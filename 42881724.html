<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1738314065005" as="style"/><link rel="stylesheet" href="styles.css?v=1738314065005"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://blog.janestreet.com/how-we-accidentally-built-a-better-build-system-for-ocaml-index/">How Jane Street accidentally built a better build system for OCaml</a> <span class="domain">(<a href="https://blog.janestreet.com">blog.janestreet.com</a>)</span></div><div class="subtext"><span>gaws</span> | <span>104 comments</span></div><br/><div><div id="42883776" class="c"><input type="checkbox" id="c-42883776" checked=""/><div class="controls bullet"><span class="by">yawaramin</span><span>|</span><a href="#42883479">next</a><span>|</span><label class="collapse" for="c-42883776">[-]</label><label class="expand" for="c-42883776">[2 more]</label></div><br/><div class="children"><div class="content">Dune&#x27;s crash message:<p>&gt; I must not segfault. Uncertainty is the mind-killer. Exceptions are the little-death that brings total obliteration. I will fully express my cases. Execution will pass over me and through me. And when it has gone past, I will unwind the stack along its path. Where the cases are handled there will be nothing. Only I will remain.</div><br/><div id="42885824" class="c"><input type="checkbox" id="c-42885824" checked=""/><div class="controls bullet"><span class="by">snthpy</span><span>|</span><a href="#42883776">parent</a><span>|</span><a href="#42883479">next</a><span>|</span><label class="collapse" for="c-42885824">[-]</label><label class="expand" for="c-42885824">[1 more]</label></div><br/><div class="children"><div class="content">Love this! Thanks for posting.</div><br/></div></div></div></div><div id="42883479" class="c"><input type="checkbox" id="c-42883479" checked=""/><div class="controls bullet"><span class="by">Lyngbakr</span><span>|</span><a href="#42883776">prev</a><span>|</span><a href="#42883393">next</a><span>|</span><label class="collapse" for="c-42883479">[-]</label><label class="expand" for="c-42883479">[4 more]</label></div><br/><div class="children"><div class="content">They did an episode of Signals and Threads (Jane Street&#x27;s technical podcast) about their build systems back in 2020¥. Highly recommended, as are the other episodes, especially The Future of Programming with Richard Eisenberg° and What is an Operating System? with Anil Madhavapeddy§.<p>¥<a href="https:&#x2F;&#x2F;signalsandthreads.com&#x2F;build-systems&#x2F;" rel="nofollow">https:&#x2F;&#x2F;signalsandthreads.com&#x2F;build-systems&#x2F;</a><p>°<a href="https:&#x2F;&#x2F;signalsandthreads.com&#x2F;future-of-programming&#x2F;" rel="nofollow">https:&#x2F;&#x2F;signalsandthreads.com&#x2F;future-of-programming&#x2F;</a><p>§<a href="https:&#x2F;&#x2F;signalsandthreads.com&#x2F;what-is-an-operating-system&#x2F;" rel="nofollow">https:&#x2F;&#x2F;signalsandthreads.com&#x2F;what-is-an-operating-system&#x2F;</a></div><br/><div id="42884317" class="c"><input type="checkbox" id="c-42884317" checked=""/><div class="controls bullet"><span class="by">triyambakam</span><span>|</span><a href="#42883479">parent</a><span>|</span><a href="#42884720">next</a><span>|</span><label class="collapse" for="c-42884317">[-]</label><label class="expand" for="c-42884317">[2 more]</label></div><br/><div class="children"><div class="content">Very interesting footnote system. Is it just for fun and aesthetic or have a deeper origin or purpose?</div><br/><div id="42884671" class="c"><input type="checkbox" id="c-42884671" checked=""/><div class="controls bullet"><span class="by">aaronbrethorst</span><span>|</span><a href="#42883479">root</a><span>|</span><a href="#42884317">parent</a><span>|</span><a href="#42884720">next</a><span>|</span><label class="collapse" for="c-42884671">[-]</label><label class="expand" for="c-42884671">[1 more]</label></div><br/><div class="children"><div class="content">whatever it is, it looks like their first time using it. here&#x27;s the last footnote I see from that account: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=39964109">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=39964109</a></div><br/></div></div></div></div><div id="42884720" class="c"><input type="checkbox" id="c-42884720" checked=""/><div class="controls bullet"><span class="by">c0redump</span><span>|</span><a href="#42883479">parent</a><span>|</span><a href="#42884317">prev</a><span>|</span><a href="#42883393">next</a><span>|</span><label class="collapse" for="c-42884720">[-]</label><label class="expand" for="c-42884720">[1 more]</label></div><br/><div class="children"><div class="content">Great suggestions, I also really liked “Multicast and the Markets”<p><a href="https:&#x2F;&#x2F;signalsandthreads.com&#x2F;multicast-and-the-markets&#x2F;" rel="nofollow">https:&#x2F;&#x2F;signalsandthreads.com&#x2F;multicast-and-the-markets&#x2F;</a></div><br/></div></div></div></div><div id="42883393" class="c"><input type="checkbox" id="c-42883393" checked=""/><div class="controls bullet"><span class="by">tombert</span><span>|</span><a href="#42883479">prev</a><span>|</span><a href="#42884515">next</a><span>|</span><label class="collapse" for="c-42883393">[-]</label><label class="expand" for="c-42883393">[15 more]</label></div><br/><div class="children"><div class="content">I have to respect Jane Street for proving that HM-typed functional programming can be production-ready and extremely fast when given enough love.<p>I still occasionally hear things about how the more academic-styled functional languages can&#x27;t work in production, but Ocaml shows that it absolutely can work, even with high performance requirements.</div><br/><div id="42883632" class="c"><input type="checkbox" id="c-42883632" checked=""/><div class="controls bullet"><span class="by">kyawzazaw</span><span>|</span><a href="#42883393">parent</a><span>|</span><a href="#42884470">next</a><span>|</span><label class="collapse" for="c-42883632">[-]</label><label class="expand" for="c-42883632">[7 more]</label></div><br/><div class="children"><div class="content">&gt; HM-typed functional programming<p>Mercury also uses Haskell for their backend
<a href="https:&#x2F;&#x2F;mercury.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;mercury.com&#x2F;</a></div><br/><div id="42883668" class="c"><input type="checkbox" id="c-42883668" checked=""/><div class="controls bullet"><span class="by">tombert</span><span>|</span><a href="#42883393">root</a><span>|</span><a href="#42883632">parent</a><span>|</span><a href="#42883815">next</a><span>|</span><label class="collapse" for="c-42883668">[-]</label><label class="expand" for="c-42883668">[1 more]</label></div><br/><div class="children"><div class="content">Also very cool!<p>I was fortunate enough to work at Jet.com before Walmart completely destroyed it, which was an F# shop.  I really liked it, and I never really felt &quot;limited&quot; by it.<p>The stuff I was working on didn&#x27;t have nearly the same requirements as high-frequency trading like Jane Street does though. I never did any super low-latency stuff with F#, so it&#x27;s tough for me to say how well it fair with that kind of environment.</div><br/></div></div><div id="42883815" class="c"><input type="checkbox" id="c-42883815" checked=""/><div class="controls bullet"><span class="by">jlarocco</span><span>|</span><a href="#42883393">root</a><span>|</span><a href="#42883632">parent</a><span>|</span><a href="#42883668">prev</a><span>|</span><a href="#42884502">next</a><span>|</span><label class="collapse" for="c-42883815">[-]</label><label class="expand" for="c-42883815">[2 more]</label></div><br/><div class="children"><div class="content">Too bad they didn&#x27;t use their namesake:<p><a href="https:&#x2F;&#x2F;mercurylang.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;mercurylang.org&#x2F;</a><p>Would honestly be a lot more interesting than Haskell.</div><br/><div id="42884287" class="c"><input type="checkbox" id="c-42884287" checked=""/><div class="controls bullet"><span class="by">brians</span><span>|</span><a href="#42883393">root</a><span>|</span><a href="#42883815">parent</a><span>|</span><a href="#42884502">next</a><span>|</span><label class="collapse" for="c-42884287">[-]</label><label class="expand" for="c-42884287">[1 more]</label></div><br/><div class="children"><div class="content">Thank you for mentioning this, because—not having followed the link—I thought someone was using Mercury for a backend.  And... I wasn&#x27;t sure I was prepared to follow that link.</div><br/></div></div></div></div><div id="42884502" class="c"><input type="checkbox" id="c-42884502" checked=""/><div class="controls bullet"><span class="by">jinwoo68</span><span>|</span><a href="#42883393">root</a><span>|</span><a href="#42883632">parent</a><span>|</span><a href="#42883815">prev</a><span>|</span><a href="#42885057">next</a><span>|</span><label class="collapse" for="c-42884502">[-]</label><label class="expand" for="c-42884502">[2 more]</label></div><br/><div class="children"><div class="content">Standard Chartered also uses their variation of Haskell.</div><br/><div id="42884524" class="c"><input type="checkbox" id="c-42884524" checked=""/><div class="controls bullet"><span class="by">tombert</span><span>|</span><a href="#42883393">root</a><span>|</span><a href="#42884502">parent</a><span>|</span><a href="#42885057">next</a><span>|</span><label class="collapse" for="c-42884524">[-]</label><label class="expand" for="c-42884524">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, I actually interviewed for a Haskell position there in 2023. They didn&#x27;t hire me, but it was kind of fun to do technical questions in Haskell for an interview instead of the boring JavaScript or Python that I usually use.</div><br/></div></div></div></div><div id="42885057" class="c"><input type="checkbox" id="c-42885057" checked=""/><div class="controls bullet"><span class="by">ofrzeta</span><span>|</span><a href="#42883393">root</a><span>|</span><a href="#42883632">parent</a><span>|</span><a href="#42884502">prev</a><span>|</span><a href="#42884470">next</a><span>|</span><label class="collapse" for="c-42885057">[-]</label><label class="expand" for="c-42885057">[1 more]</label></div><br/><div class="children"><div class="content">Why does Mercury not use ... Mercury? <a href="https:&#x2F;&#x2F;mercurylang.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;mercurylang.org&#x2F;</a></div><br/></div></div></div></div><div id="42884470" class="c"><input type="checkbox" id="c-42884470" checked=""/><div class="controls bullet"><span class="by">ibejoeb</span><span>|</span><a href="#42883393">parent</a><span>|</span><a href="#42883632">prev</a><span>|</span><a href="#42884385">next</a><span>|</span><label class="collapse" for="c-42884470">[-]</label><label class="expand" for="c-42884470">[1 more]</label></div><br/><div class="children"><div class="content">Certainly. There&#x27;s also a good amount of F# in production. It&#x27;s a fantastic option for building high quality programs with broad interop with existing systems.</div><br/></div></div><div id="42884385" class="c"><input type="checkbox" id="c-42884385" checked=""/><div class="controls bullet"><span class="by">ablob</span><span>|</span><a href="#42883393">parent</a><span>|</span><a href="#42884470">prev</a><span>|</span><a href="#42885191">next</a><span>|</span><label class="collapse" for="c-42884385">[-]</label><label class="expand" for="c-42884385">[2 more]</label></div><br/><div class="children"><div class="content">There&#x27;s also pandoc written in Haskell. Facebook used it for it&#x27;s spam-protection too, at some  point (it might still do that, but I don&#x27;t know).</div><br/><div id="42885665" class="c"><input type="checkbox" id="c-42885665" checked=""/><div class="controls bullet"><span class="by">philjohn</span><span>|</span><a href="#42883393">root</a><span>|</span><a href="#42884385">parent</a><span>|</span><a href="#42885191">next</a><span>|</span><label class="collapse" for="c-42885665">[-]</label><label class="expand" for="c-42885665">[1 more]</label></div><br/><div class="children"><div class="content">Sadly I don&#x27;t think it&#x27;s used any more - it was migrated away from. I worked in integrity there and quite enjoyed whenever I had to make some changes to the Haskell rules :)</div><br/></div></div></div></div><div id="42885191" class="c"><input type="checkbox" id="c-42885191" checked=""/><div class="controls bullet"><span class="by">emoII</span><span>|</span><a href="#42883393">parent</a><span>|</span><a href="#42884385">prev</a><span>|</span><a href="#42884597">next</a><span>|</span><label class="collapse" for="c-42885191">[-]</label><label class="expand" for="c-42885191">[2 more]</label></div><br/><div class="children"><div class="content">What do you mean? Afaik the type system does not affect run time speed, it’s just static analysis</div><br/><div id="42885322" class="c"><input type="checkbox" id="c-42885322" checked=""/><div class="controls bullet"><span class="by">imjonse</span><span>|</span><a href="#42883393">root</a><span>|</span><a href="#42885191">parent</a><span>|</span><a href="#42884597">next</a><span>|</span><label class="collapse" for="c-42885322">[-]</label><label class="expand" for="c-42885322">[1 more]</label></div><br/><div class="children"><div class="content">dynamic typing incurs runtime overhead</div><br/></div></div></div></div><div id="42884597" class="c"><input type="checkbox" id="c-42884597" checked=""/><div class="controls bullet"><span class="by">perryprog</span><span>|</span><a href="#42883393">parent</a><span>|</span><a href="#42885191">prev</a><span>|</span><a href="#42884997">next</a><span>|</span><label class="collapse" for="c-42884597">[-]</label><label class="expand" for="c-42884597">[1 more]</label></div><br/><div class="children"><div class="content">NoRedInk[0] also uses some Haskell in their backend, as well as Elm for most of their frontend. They&#x27;ve also worked some with Roc according to a blog post from a few years back; not sure if using it.<p>[0] <a href="https:&#x2F;&#x2F;blog.noredink.com" rel="nofollow">https:&#x2F;&#x2F;blog.noredink.com</a></div><br/></div></div><div id="42884997" class="c"><input type="checkbox" id="c-42884997" checked=""/><div class="controls bullet"><span class="by">fulafel</span><span>|</span><a href="#42883393">parent</a><span>|</span><a href="#42884597">prev</a><span>|</span><a href="#42884515">next</a><span>|</span><label class="collapse" for="c-42884997">[-]</label><label class="expand" for="c-42884997">[1 more]</label></div><br/><div class="children"><div class="content">Eh, this reads like damning with faint praise to me. Lots of robust and fast real world systems are in FP languages. Ocaml is estabilished and mature, far from &quot;is it production ready?&quot; category.</div><br/></div></div></div></div><div id="42884515" class="c"><input type="checkbox" id="c-42884515" checked=""/><div class="controls bullet"><span class="by">elzbardico</span><span>|</span><a href="#42883393">prev</a><span>|</span><a href="#42883618">next</a><span>|</span><label class="collapse" for="c-42884515">[-]</label><label class="expand" for="c-42884515">[22 more]</label></div><br/><div class="children"><div class="content">Whenever I see posts from Janestreet blog I laugh inside thinking how working on the financial industry at Jane is probably more fun and rewarding than some 90% of the jobs in the so-called tech industry.</div><br/><div id="42884705" class="c"><input type="checkbox" id="c-42884705" checked=""/><div class="controls bullet"><span class="by">whydid</span><span>|</span><a href="#42884515">parent</a><span>|</span><a href="#42885359">next</a><span>|</span><label class="collapse" for="c-42884705">[-]</label><label class="expand" for="c-42884705">[16 more]</label></div><br/><div class="children"><div class="content">Grass is always greener my friend.<p>Many jobs in finance are updating 20 year old Java code, or figuring out new ways to load data in and out of Excel files for custom reporting.</div><br/><div id="42884746" class="c"><input type="checkbox" id="c-42884746" checked=""/><div class="controls bullet"><span class="by">udev4096</span><span>|</span><a href="#42884515">root</a><span>|</span><a href="#42884705">parent</a><span>|</span><a href="#42884728">next</a><span>|</span><label class="collapse" for="c-42884746">[-]</label><label class="expand" for="c-42884746">[14 more]</label></div><br/><div class="children"><div class="content">OP should&#x27;ve been more specific. HFT firms, not any other finance companies, probably have a lot more exciting work due to the nature of reducing latency using all sorts of novel techniques.<p>I wonder if they disable all the fancy exploit mitigation protection in linux kernel just for a tiny performance hit</div><br/><div id="42885719" class="c"><input type="checkbox" id="c-42885719" checked=""/><div class="controls bullet"><span class="by">deivid</span><span>|</span><a href="#42884515">root</a><span>|</span><a href="#42884746">parent</a><span>|</span><a href="#42885277">next</a><span>|</span><label class="collapse" for="c-42885719">[-]</label><label class="expand" for="c-42885719">[1 more]</label></div><br/><div class="children"><div class="content">Some jobs at HFT deal with a lot of this fun--I was doing Linux at one for 6 years.<p>A lot of jobs are extremely mundane though, compliance, regulations, legacy code bases, etc.<p>Yes, all mitigations get disabled</div><br/></div></div><div id="42885277" class="c"><input type="checkbox" id="c-42885277" checked=""/><div class="controls bullet"><span class="by">n4r9</span><span>|</span><a href="#42884515">root</a><span>|</span><a href="#42884746">parent</a><span>|</span><a href="#42885719">prev</a><span>|</span><a href="#42885651">next</a><span>|</span><label class="collapse" for="c-42885277">[-]</label><label class="expand" for="c-42885277">[7 more]</label></div><br/><div class="children"><div class="content">Mother capitalism deems that our brightest young minds best serve humanity in two tasks. Keeping the public passively scrolling, and moving money at speed to make wealthy people more wealthy.</div><br/><div id="42885561" class="c"><input type="checkbox" id="c-42885561" checked=""/><div class="controls bullet"><span class="by">deepsun</span><span>|</span><a href="#42884515">root</a><span>|</span><a href="#42885277">parent</a><span>|</span><a href="#42885615">next</a><span>|</span><label class="collapse" for="c-42885561">[-]</label><label class="expand" for="c-42885561">[2 more]</label></div><br/><div class="children"><div class="content">Some fraction of young minds, not all. I was happy to work at a small aerospace company with extreme concentration of brightest minds. Only because they loved the domain, and didn&#x27;t mind a salary cut. What a joy and relief it was for me after FAANG!</div><br/><div id="42885621" class="c"><input type="checkbox" id="c-42885621" checked=""/><div class="controls bullet"><span class="by">hereonout2</span><span>|</span><a href="#42884515">root</a><span>|</span><a href="#42885561">parent</a><span>|</span><a href="#42885615">next</a><span>|</span><label class="collapse" for="c-42885621">[-]</label><label class="expand" for="c-42885621">[1 more]</label></div><br/><div class="children"><div class="content">Possibly you didn&#x27;t mind the salary  <i>because</i> you&#x27;d already worked at FAANG?</div><br/></div></div></div></div><div id="42885615" class="c"><input type="checkbox" id="c-42885615" checked=""/><div class="controls bullet"><span class="by">thom</span><span>|</span><a href="#42884515">root</a><span>|</span><a href="#42885277">parent</a><span>|</span><a href="#42885561">prev</a><span>|</span><a href="#42885319">next</a><span>|</span><label class="collapse" for="c-42885615">[-]</label><label class="expand" for="c-42885615">[1 more]</label></div><br/><div class="children"><div class="content">Hey, some of them are working tirelessly to ruin sports.</div><br/></div></div><div id="42885319" class="c"><input type="checkbox" id="c-42885319" checked=""/><div class="controls bullet"><span class="by">udev4096</span><span>|</span><a href="#42884515">root</a><span>|</span><a href="#42885277">parent</a><span>|</span><a href="#42885615">prev</a><span>|</span><a href="#42885390">next</a><span>|</span><label class="collapse" for="c-42885319">[-]</label><label class="expand" for="c-42885319">[1 more]</label></div><br/><div class="children"><div class="content">Absolutely. The moral aspect is certainly questionable. Although, I wouldn&#x27;t say &quot;all brightest minds&quot; are going to neglect their moral concerns for getting rich</div><br/></div></div><div id="42885390" class="c"><input type="checkbox" id="c-42885390" checked=""/><div class="controls bullet"><span class="by">jrockway</span><span>|</span><a href="#42884515">root</a><span>|</span><a href="#42885277">parent</a><span>|</span><a href="#42885319">prev</a><span>|</span><a href="#42885612">next</a><span>|</span><label class="collapse" for="c-42885390">[-]</label><label class="expand" for="c-42885390">[1 more]</label></div><br/><div class="children"><div class="content">There&#x27;s also electronic medical records in there somewhere.</div><br/></div></div><div id="42885612" class="c"><input type="checkbox" id="c-42885612" checked=""/><div class="controls bullet"><span class="by">vasco</span><span>|</span><a href="#42884515">root</a><span>|</span><a href="#42885277">parent</a><span>|</span><a href="#42885390">prev</a><span>|</span><a href="#42885651">next</a><span>|</span><label class="collapse" for="c-42885612">[-]</label><label class="expand" for="c-42885612">[1 more]</label></div><br/><div class="children"><div class="content">Is the problem with the system or with the minds? The minds that want to scroll are the same as the ones that make money on the scrolling, that made the scrolling itself, and that made the system we&#x27;re in. Why is it that defeatist comments always focus on the capitalism part and not on anything else? I don&#x27;t think it&#x27;s perfect like we aren&#x27;t perfect but unless you have some particular suggestion this type of comment just reads &quot;boohoo the world is bad and it&#x27;s not my fault&quot;.</div><br/></div></div></div></div><div id="42885651" class="c"><input type="checkbox" id="c-42885651" checked=""/><div class="controls bullet"><span class="by">secondcoming</span><span>|</span><a href="#42884515">root</a><span>|</span><a href="#42884746">parent</a><span>|</span><a href="#42885277">prev</a><span>|</span><a href="#42884983">next</a><span>|</span><label class="collapse" for="c-42885651">[-]</label><label class="expand" for="c-42885651">[1 more]</label></div><br/><div class="children"><div class="content">Not HFT, but we disable those on our cloud VMs</div><br/></div></div><div id="42884983" class="c"><input type="checkbox" id="c-42884983" checked=""/><div class="controls bullet"><span class="by">fuzztester</span><span>|</span><a href="#42884515">root</a><span>|</span><a href="#42884746">parent</a><span>|</span><a href="#42885651">prev</a><span>|</span><a href="#42884728">next</a><span>|</span><label class="collapse" for="c-42884983">[-]</label><label class="expand" for="c-42884983">[4 more]</label></div><br/><div class="children"><div class="content">some use a fork of rust with borrow checking disabled.<p>go fish</div><br/><div id="42884995" class="c"><input type="checkbox" id="c-42884995" checked=""/><div class="controls bullet"><span class="by">shepherdjerred</span><span>|</span><a href="#42884515">root</a><span>|</span><a href="#42884983">parent</a><span>|</span><a href="#42884728">next</a><span>|</span><label class="collapse" for="c-42884995">[-]</label><label class="expand" for="c-42884995">[3 more]</label></div><br/><div class="children"><div class="content">Isn’t borrow checking only compile time?</div><br/><div id="42885640" class="c"><input type="checkbox" id="c-42885640" checked=""/><div class="controls bullet"><span class="by">SkiFire13</span><span>|</span><a href="#42884515">root</a><span>|</span><a href="#42884995">parent</a><span>|</span><a href="#42884728">next</a><span>|</span><label class="collapse" for="c-42885640">[-]</label><label class="expand" for="c-42885640">[2 more]</label></div><br/><div class="children"><div class="content">Yes, but sometimes it forces you to write slightly slower code that can be proven safe.</div><br/><div id="42885864" class="c"><input type="checkbox" id="c-42885864" checked=""/><div class="controls bullet"><span class="by">spoiler</span><span>|</span><a href="#42884515">root</a><span>|</span><a href="#42885640">parent</a><span>|</span><a href="#42884728">next</a><span>|</span><label class="collapse" for="c-42885864">[-]</label><label class="expand" for="c-42885864">[1 more]</label></div><br/><div class="children"><div class="content">You don&#x27;t need s whole compiler for that... You can use `unsafe`. Sometimes you don&#x27;t even need that either!</div><br/></div></div></div></div></div></div></div></div></div></div><div id="42884728" class="c"><input type="checkbox" id="c-42884728" checked=""/><div class="controls bullet"><span class="by">ericjmorey</span><span>|</span><a href="#42884515">root</a><span>|</span><a href="#42884705">parent</a><span>|</span><a href="#42884746">prev</a><span>|</span><a href="#42885359">next</a><span>|</span><label class="collapse" for="c-42884728">[-]</label><label class="expand" for="c-42884728">[1 more]</label></div><br/><div class="children"><div class="content">Probably not the case at Jane Street</div><br/></div></div></div></div><div id="42885359" class="c"><input type="checkbox" id="c-42885359" checked=""/><div class="controls bullet"><span class="by">globular-toast</span><span>|</span><a href="#42884515">parent</a><span>|</span><a href="#42884705">prev</a><span>|</span><a href="#42883618">next</a><span>|</span><label class="collapse" for="c-42885359">[-]</label><label class="expand" for="c-42885359">[5 more]</label></div><br/><div class="children"><div class="content">Maybe, but could you live with the fact that you&#x27;re providing absolutely no value to the world? It always makes me sad when the greatest minds get gobbled up by these companies because they&#x27;re creaming off the top of an enormously complex system they created.</div><br/><div id="42885433" class="c"><input type="checkbox" id="c-42885433" checked=""/><div class="controls bullet"><span class="by">boxed</span><span>|</span><a href="#42884515">root</a><span>|</span><a href="#42885359">parent</a><span>|</span><a href="#42885431">next</a><span>|</span><label class="collapse" for="c-42885433">[-]</label><label class="expand" for="c-42885433">[1 more]</label></div><br/><div class="children"><div class="content">One could argue that the OCaml work they do is skimming off the top of the fintech world and putting that money to better use :P</div><br/></div></div><div id="42885431" class="c"><input type="checkbox" id="c-42885431" checked=""/><div class="controls bullet"><span class="by">smabie</span><span>|</span><a href="#42884515">root</a><span>|</span><a href="#42885359">parent</a><span>|</span><a href="#42885433">prev</a><span>|</span><a href="#42883618">next</a><span>|</span><label class="collapse" for="c-42885431">[-]</label><label class="expand" for="c-42885431">[3 more]</label></div><br/><div class="children"><div class="content">People outside the industry just use that as cope because they making way less money.<p>&quot;How do you live with yourself making high 6 fig &#x2F; 7 figs a yr?&quot;<p>Quite easily in fact.</div><br/><div id="42885854" class="c"><input type="checkbox" id="c-42885854" checked=""/><div class="controls bullet"><span class="by">globular-toast</span><span>|</span><a href="#42884515">root</a><span>|</span><a href="#42885431">parent</a><span>|</span><a href="#42885666">next</a><span>|</span><label class="collapse" for="c-42885854">[-]</label><label class="expand" for="c-42885854">[1 more]</label></div><br/><div class="children"><div class="content">I did work in the industry briefly and can confirm it is actually full of people who would post a comment like this. Just in case anyone needed another reason to avoid it!<p>Work on real problems. Try to make real people&#x27;s lives better and happier. There are real problems in finance but my feeling was it&#x27;s all very simple and solved decades ago, now it&#x27;s just pointless complexity that isn&#x27;t solving anyone&#x27;s problems. I recommend John Kay&#x27;s <i>Other People&#x27;s Money</i> for a primer on what finance is actually good for and where it&#x27;s gone wrong.<p>The real big problem in finance IMO is digital cash. Bitcoin started out trying to solve that problem, and there are still some people in the community interested in it, but it&#x27;s mostly of interest to the finance guys now. Just another &quot;instrument&quot; in their &quot;portfolios&quot;.</div><br/></div></div></div></div></div></div></div></div><div id="42883618" class="c"><input type="checkbox" id="c-42883618" checked=""/><div class="controls bullet"><span class="by">dgfitz</span><span>|</span><a href="#42884515">prev</a><span>|</span><a href="#42883613">next</a><span>|</span><label class="collapse" for="c-42883618">[-]</label><label class="expand" for="c-42883618">[21 more]</label></div><br/><div class="children"><div class="content">The only thing worse than a complex codebase is a complex build system. I think CMake is an abomination. “Hey go learn this new language to compile this other language!”</div><br/><div id="42883782" class="c"><input type="checkbox" id="c-42883782" checked=""/><div class="controls bullet"><span class="by">munificent</span><span>|</span><a href="#42883618">parent</a><span>|</span><a href="#42883671">next</a><span>|</span><label class="collapse" for="c-42883782">[-]</label><label class="expand" for="c-42883782">[10 more]</label></div><br/><div class="children"><div class="content">The only thing worse than a complex build system is a simple build system that can&#x27;t build what you need to build. :(</div><br/><div id="42884425" class="c"><input type="checkbox" id="c-42884425" checked=""/><div class="controls bullet"><span class="by">troad</span><span>|</span><a href="#42883618">root</a><span>|</span><a href="#42883782">parent</a><span>|</span><a href="#42883864">next</a><span>|</span><label class="collapse" for="c-42884425">[-]</label><label class="expand" for="c-42884425">[4 more]</label></div><br/><div class="children"><div class="content">&gt;&gt; Complexity has to live <i>somewhere</i>. If you are lucky, it lives in well-defined places. In code where you decided a bit of complexity should go, in documentation that supports the code, in training sessions for your engineers. You give it a place without trying to hide all of it. You create ways to manage it. You know where to go to meet it when you need it. If you&#x27;re unlucky and you just tried to pretend complexity could be avoided altogether, it has no place to go in this world. But it still doesn&#x27;t stop existing.<p>&gt;&gt; With nowhere to go, it has to roam everywhere in your system, both in your code and in people&#x27;s heads. And as people shift around and leave, our understanding of it erodes.<p>&gt;&gt; <i>Complexity has to live somewhere.</i> If you embrace it, give it the place it deserves, design your system and organisation knowing it exists, and focus on adapting, it might just become a strength.<p>- Fred Hebert, <a href="https:&#x2F;&#x2F;ferd.ca&#x2F;complexity-has-to-live-somewhere.html" rel="nofollow">https:&#x2F;&#x2F;ferd.ca&#x2F;complexity-has-to-live-somewhere.html</a></div><br/><div id="42885339" class="c"><input type="checkbox" id="c-42885339" checked=""/><div class="controls bullet"><span class="by">lmm</span><span>|</span><a href="#42883618">root</a><span>|</span><a href="#42884425">parent</a><span>|</span><a href="#42883864">next</a><span>|</span><label class="collapse" for="c-42885339">[-]</label><label class="expand" for="c-42885339">[3 more]</label></div><br/><div class="children"><div class="content">I think that&#x27;s true up to a point, but it misses the distinction between accidental and essential complexity. Essential complexity has to go somewhere, accidental complexity doesn&#x27;t, and most complexity in software is accidental.<p>And even when the complexity is essential, IMO it&#x27;s better off not in the build system. I&#x27;ll gladly accept more complex code for the sake of a simpler build (even though that theoretically means worse performance). Worst case if I need to do something complex at build time I&#x27;d rather model that as &quot;the build system <i>invokes a program</i> that does something complex&quot; than try to express the complex thing in some Turing Tarpit &quot;configuration&quot; language.</div><br/><div id="42885418" class="c"><input type="checkbox" id="c-42885418" checked=""/><div class="controls bullet"><span class="by">globular-toast</span><span>|</span><a href="#42883618">root</a><span>|</span><a href="#42885339">parent</a><span>|</span><a href="#42883864">next</a><span>|</span><label class="collapse" for="c-42885418">[-]</label><label class="expand" for="c-42885418">[2 more]</label></div><br/><div class="children"><div class="content">Also the point of software engineering is to take the real complexity that actually exists and you can&#x27;t get rid of and work out how to write simple code to deal with it. Good software architecture does not include complexity because there is complexity in the business. It <i>manages</i> the complexity with simple code.<p>The trouble is when people say &quot;complex&quot; you don&#x27;t really know what they mean, though. They often just mean &quot;difficult&quot;. Every programmer who wants to use that word needs to watch this: <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=SxdOUGdseq4" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=SxdOUGdseq4</a></div><br/><div id="42885576" class="c"><input type="checkbox" id="c-42885576" checked=""/><div class="controls bullet"><span class="by">lmm</span><span>|</span><a href="#42883618">root</a><span>|</span><a href="#42885418">parent</a><span>|</span><a href="#42883864">next</a><span>|</span><label class="collapse" for="c-42885576">[-]</label><label class="expand" for="c-42885576">[1 more]</label></div><br/><div class="children"><div class="content">Nah. Hickey say stuff that sounds profound but doesn&#x27;t actually help you get better at writing software or even at talking about it.</div><br/></div></div></div></div></div></div></div></div><div id="42883864" class="c"><input type="checkbox" id="c-42883864" checked=""/><div class="controls bullet"><span class="by">dgfitz</span><span>|</span><a href="#42883618">root</a><span>|</span><a href="#42883782">parent</a><span>|</span><a href="#42884425">prev</a><span>|</span><a href="#42883671">next</a><span>|</span><label class="collapse" for="c-42883864">[-]</label><label class="expand" for="c-42883864">[5 more]</label></div><br/><div class="children"><div class="content">This means the architecture is also bad, and that is what needs to be fixed.</div><br/><div id="42884353" class="c"><input type="checkbox" id="c-42884353" checked=""/><div class="controls bullet"><span class="by">almostgotcaught</span><span>|</span><a href="#42883618">root</a><span>|</span><a href="#42883864">parent</a><span>|</span><a href="#42883671">next</a><span>|</span><label class="collapse" for="c-42884353">[-]</label><label class="expand" for="c-42884353">[4 more]</label></div><br/><div class="children"><div class="content">so simple huh? since you fancy yourself an architect can you let me know how we might fix the architecture of <a href="https:&#x2F;&#x2F;github.com&#x2F;llvm&#x2F;llvm-project">https:&#x2F;&#x2F;github.com&#x2F;llvm&#x2F;llvm-project</a> such that CMake is no longer needed?</div><br/><div id="42884369" class="c"><input type="checkbox" id="c-42884369" checked=""/><div class="controls bullet"><span class="by">dgfitz</span><span>|</span><a href="#42883618">root</a><span>|</span><a href="#42884353">parent</a><span>|</span><a href="#42883671">next</a><span>|</span><label class="collapse" for="c-42884369">[-]</label><label class="expand" for="c-42884369">[3 more]</label></div><br/><div class="children"><div class="content">Not in a glib response, no.</div><br/><div id="42884890" class="c"><input type="checkbox" id="c-42884890" checked=""/><div class="controls bullet"><span class="by">almostgotcaught</span><span>|</span><a href="#42883618">root</a><span>|</span><a href="#42884369">parent</a><span>|</span><a href="#42883671">next</a><span>|</span><label class="collapse" for="c-42884890">[-]</label><label class="expand" for="c-42884890">[2 more]</label></div><br/><div class="children"><div class="content">okay can you at least tell me how the architecture of <a href="https:&#x2F;&#x2F;github.com&#x2F;llvm&#x2F;llvm-project">https:&#x2F;&#x2F;github.com&#x2F;llvm&#x2F;llvm-project</a> is &quot;bad&quot;?</div><br/><div id="42885425" class="c"><input type="checkbox" id="c-42885425" checked=""/><div class="controls bullet"><span class="by">db48x</span><span>|</span><a href="#42883618">root</a><span>|</span><a href="#42884890">parent</a><span>|</span><a href="#42883671">next</a><span>|</span><label class="collapse" for="c-42885425">[-]</label><label class="expand" for="c-42885425">[1 more]</label></div><br/><div class="children"><div class="content">That’s such an obnoxious tactic. It’s basically saying “Your point is invalid unless you can cut this Gordian Knot on the spur of the moment in an internet comment!”</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="42883671" class="c"><input type="checkbox" id="c-42883671" checked=""/><div class="controls bullet"><span class="by">gpderetta</span><span>|</span><a href="#42883618">parent</a><span>|</span><a href="#42883782">prev</a><span>|</span><a href="#42883908">next</a><span>|</span><label class="collapse" for="c-42883671">[-]</label><label class="expand" for="c-42883671">[2 more]</label></div><br/><div class="children"><div class="content">&gt; CMake is an abomination. “Hey go learn this new language to compile this other language!”<p>&quot;go learn this <i>awful</i> new language&quot;</div><br/><div id="42884827" class="c"><input type="checkbox" id="c-42884827" checked=""/><div class="controls bullet"><span class="by">feznyng</span><span>|</span><a href="#42883618">root</a><span>|</span><a href="#42883671">parent</a><span>|</span><a href="#42883908">next</a><span>|</span><label class="collapse" for="c-42884827">[-]</label><label class="expand" for="c-42884827">[1 more]</label></div><br/><div class="children"><div class="content">Xmake uses lua if you want to give it a try.</div><br/></div></div></div></div><div id="42883908" class="c"><input type="checkbox" id="c-42883908" checked=""/><div class="controls bullet"><span class="by">tom_</span><span>|</span><a href="#42883618">parent</a><span>|</span><a href="#42883671">prev</a><span>|</span><a href="#42883912">next</a><span>|</span><label class="collapse" for="c-42883908">[-]</label><label class="expand" for="c-42883908">[4 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t mind CMake. It&#x27;s awful, but I&#x27;m already using C or C++, so the bar is set pretty low. It does do a few things right, and at least some of the things it does wrong are manageable.<p>I&#x27;ll eat at least a bit of shit if it means I can get more than one platform&#x27;s-worth of build process out of a single set of human-editable configuration files.</div><br/><div id="42884224" class="c"><input type="checkbox" id="c-42884224" checked=""/><div class="controls bullet"><span class="by">queuebert</span><span>|</span><a href="#42883618">root</a><span>|</span><a href="#42883908">parent</a><span>|</span><a href="#42883912">next</a><span>|</span><label class="collapse" for="c-42884224">[-]</label><label class="expand" for="c-42884224">[3 more]</label></div><br/><div class="children"><div class="content">Have you tried meson?  I used it once many years ago, and it seemed slightly better.</div><br/><div id="42884942" class="c"><input type="checkbox" id="c-42884942" checked=""/><div class="controls bullet"><span class="by">ahartmetz</span><span>|</span><a href="#42883618">root</a><span>|</span><a href="#42884224">parent</a><span>|</span><a href="#42885690">next</a><span>|</span><label class="collapse" for="c-42884942">[-]</label><label class="expand" for="c-42884942">[1 more]</label></div><br/><div class="children"><div class="content">Meson&#x27;s approach to simplicity is if you need anything nontrivial, you simply add it to Meson itself. In CMake, you can script it in more cases.</div><br/></div></div></div></div></div></div><div id="42883912" class="c"><input type="checkbox" id="c-42883912" checked=""/><div class="controls bullet"><span class="by">kevin_thibedeau</span><span>|</span><a href="#42883618">parent</a><span>|</span><a href="#42883908">prev</a><span>|</span><a href="#42883613">next</a><span>|</span><label class="collapse" for="c-42883912">[-]</label><label class="expand" for="c-42883912">[4 more]</label></div><br/><div class="children"><div class="content">The ideas embodied in modern target-oriented CMake are worthwhile. It&#x27;s all hobbled by a dreadful script language but that could be improved with sufficient motivation.</div><br/><div id="42884121" class="c"><input type="checkbox" id="c-42884121" checked=""/><div class="controls bullet"><span class="by">tom_</span><span>|</span><a href="#42883618">root</a><span>|</span><a href="#42883912">parent</a><span>|</span><a href="#42884327">next</a><span>|</span><label class="collapse" for="c-42884121">[-]</label><label class="expand" for="c-42884121">[1 more]</label></div><br/><div class="children"><div class="content">I think what annoys me about it the most is that for every good idea in there there&#x27;s one piece of tedious crap you have to work around, one actively bad misfeature that doesn&#x27;t work properly, and one terrible aspect of the awful scripting language.<p>(And two minor annoyances that people determined to hate CMake will never shut up about. But then, if you&#x27;re determined to hate something, there are worse things than CMake to do it to! So I can&#x27;t be too critical.)</div><br/></div></div><div id="42884327" class="c"><input type="checkbox" id="c-42884327" checked=""/><div class="controls bullet"><span class="by">cmrdporcupine</span><span>|</span><a href="#42883618">root</a><span>|</span><a href="#42883912">parent</a><span>|</span><a href="#42884121">prev</a><span>|</span><a href="#42883613">next</a><span>|</span><label class="collapse" for="c-42884327">[-]</label><label class="expand" for="c-42884327">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s hobbled not just by that but by the fact that it&#x27;s not the thing doing the building. It&#x27;s a build system for build systems, and suffers from brittleness and confusion as a result.</div><br/><div id="42884849" class="c"><input type="checkbox" id="c-42884849" checked=""/><div class="controls bullet"><span class="by">kevin_thibedeau</span><span>|</span><a href="#42883618">root</a><span>|</span><a href="#42884327">parent</a><span>|</span><a href="#42883613">next</a><span>|</span><label class="collapse" for="c-42884849">[-]</label><label class="expand" for="c-42884849">[1 more]</label></div><br/><div class="children"><div class="content">Make, in all its various implementations, is far more brittle than CMake. Ninja requires a meta-build tool like CMake.</div><br/></div></div></div></div></div></div></div></div><div id="42883613" class="c"><input type="checkbox" id="c-42883613" checked=""/><div class="controls bullet"><span class="by">n144q</span><span>|</span><a href="#42883618">prev</a><span>|</span><a href="#42883435">next</a><span>|</span><label class="collapse" for="c-42883613">[-]</label><label class="expand" for="c-42883613">[5 more]</label></div><br/><div class="children"><div class="content">I wonder if anyone has used Jane Street&#x27;s open source OCaml libraries and tools for somewhat serious projects.<p>I took a brief look at these things, and my impression is that their stuff isn&#x27;t &quot;ready&quot; for anyone outside Jane Street, even though they put a lot of effort in building the ecosystem and open source their code.</div><br/><div id="42885565" class="c"><input type="checkbox" id="c-42885565" checked=""/><div class="controls bullet"><span class="by">aiono</span><span>|</span><a href="#42883613">parent</a><span>|</span><a href="#42884792">next</a><span>|</span><label class="collapse" for="c-42885565">[-]</label><label class="expand" for="c-42885565">[1 more]</label></div><br/><div class="children"><div class="content">Not a serious project, but I use their stdlib for my personal static site generator. I think it has much better API compared to the standard stdlib.</div><br/></div></div><div id="42884792" class="c"><input type="checkbox" id="c-42884792" checked=""/><div class="controls bullet"><span class="by">Syzygies</span><span>|</span><a href="#42883613">parent</a><span>|</span><a href="#42885565">prev</a><span>|</span><a href="#42884273">next</a><span>|</span><label class="collapse" for="c-42884792">[-]</label><label class="expand" for="c-42884792">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m running tests for an involved math research project, and to my great surprise Lean 4 &lt;&lt; Haskell &lt;&lt; OCaml in execution times (so far).<p>I love Lean 4, but good luck getting help with it from AI. Today&#x27;s project-in-progress is digesting their reference manual to fit well within a 200K context window. We&#x27;ll see if that helps.</div><br/></div></div><div id="42884273" class="c"><input type="checkbox" id="c-42884273" checked=""/><div class="controls bullet"><span class="by">giraffe_lady</span><span>|</span><a href="#42883613">parent</a><span>|</span><a href="#42884792">prev</a><span>|</span><a href="#42883637">next</a><span>|</span><label class="collapse" for="c-42884273">[-]</label><label class="expand" for="c-42884273">[1 more]</label></div><br/><div class="children"><div class="content">I do! Their standard lib replacement was used on the project where I originally learned ocaml, so I have just always used it. You have to be fairly sophisticated at reading fn signatures to find things sometimes but otherwise no complaints with it. It has some very nice features too for example convert functions to&#x2F;from sexps for all base types can save you a ton of time if you know it&#x27;s there and plan for it.<p>I&#x27;ve used some of their other libraries too, their logging and unit test ppx are common maybe even de facto standards as much as the ocaml world has such a thing. I&#x27;ve also used, off the top of my head, their code formatter, one of their test frameworks, their implementations of some advanced data structures.<p>Sometimes you do run into one like the other commenter said, where that shit just <i>does not work</i>. It depends on an undocumented something they shipped separately, or needs a secret bit of config or whatever. These aren&#x27;t malicious, I open a ticket and come back in a year or two often they&#x27;ll be working.<p>It&#x27;s not zero frustration but I appreciate their approach of just throwing everything over rather than spending more resources testing and polishing fewer releases. Their code quality is generally very high and even if I can&#x27;t get something working directly, it provides a rigorous &amp; vetted example implementation.</div><br/></div></div><div id="42883637" class="c"><input type="checkbox" id="c-42883637" checked=""/><div class="controls bullet"><span class="by">Kuinox</span><span>|</span><a href="#42883613">parent</a><span>|</span><a href="#42884273">prev</a><span>|</span><a href="#42883435">next</a><span>|</span><label class="collapse" for="c-42883637">[-]</label><label class="expand" for="c-42883637">[1 more]</label></div><br/><div class="children"><div class="content">I tried to use their magic-trace tool but I get at least 4 differents crash when using it on trivial dotnet programs.</div><br/></div></div></div></div><div id="42883435" class="c"><input type="checkbox" id="c-42883435" checked=""/><div class="controls bullet"><span class="by">codr7</span><span>|</span><a href="#42883613">prev</a><span>|</span><a href="#42883433">next</a><span>|</span><label class="collapse" for="c-42883435">[-]</label><label class="expand" for="c-42883435">[5 more]</label></div><br/><div class="children"><div class="content">I spent several years in Haskell land a while back, my first functional experience after Lisp.<p>Ocaml never clicked for me, I have a rare form of semicolon allergy and Haskell just looked a lot nicer to me.<p>But then I recently tried Reason and enjoyed it A LOT, so everything Ocaml is suddenly interesting.</div><br/><div id="42884584" class="c"><input type="checkbox" id="c-42884584" checked=""/><div class="controls bullet"><span class="by">int_19h</span><span>|</span><a href="#42883435">parent</a><span>|</span><a href="#42884243">next</a><span>|</span><label class="collapse" for="c-42884584">[-]</label><label class="expand" for="c-42884584">[1 more]</label></div><br/><div class="children"><div class="content">F#, while missing some of the more interesting features of OCaml (e.g. the expressiveness of its module system), also has indentation-sensitive syntax that ditches a lot of the scaffolding, including semicolons in most cases:<p><a href="https:&#x2F;&#x2F;learn.microsoft.com&#x2F;en-us&#x2F;dotnet&#x2F;fsharp&#x2F;language-reference&#x2F;verbose-syntax" rel="nofollow">https:&#x2F;&#x2F;learn.microsoft.com&#x2F;en-us&#x2F;dotnet&#x2F;fsharp&#x2F;language-ref...</a></div><br/></div></div><div id="42884243" class="c"><input type="checkbox" id="c-42884243" checked=""/><div class="controls bullet"><span class="by">cwmoore</span><span>|</span><a href="#42883435">parent</a><span>|</span><a href="#42884584">prev</a><span>|</span><a href="#42884331">next</a><span>|</span><label class="collapse" for="c-42884243">[-]</label><label class="expand" for="c-42884243">[1 more]</label></div><br/><div class="children"><div class="content">“If your intention is to compile or interpret files as scripts, double semicolons can and should be avoided when writing in OCaml. Leaving them does not raise errors, but they are useless. The compiler tolerates them to allow copy-paste from UTop to a file without having to remove them.“
<a href="https:&#x2F;&#x2F;ocaml.org&#x2F;docs&#x2F;toplevel-introduction#loading-libraries-in-utop" rel="nofollow">https:&#x2F;&#x2F;ocaml.org&#x2F;docs&#x2F;toplevel-introduction#loading-librari...</a><p><a href="https:&#x2F;&#x2F;reasonml.github.io&#x2F;" rel="nofollow">https:&#x2F;&#x2F;reasonml.github.io&#x2F;</a> looks cool, OCaml with javascript.</div><br/></div></div><div id="42884331" class="c"><input type="checkbox" id="c-42884331" checked=""/><div class="controls bullet"><span class="by">cmrdporcupine</span><span>|</span><a href="#42883435">parent</a><span>|</span><a href="#42884243">prev</a><span>|</span><a href="#42883747">next</a><span>|</span><label class="collapse" for="c-42884331">[-]</label><label class="expand" for="c-42884331">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s funny because the thing that always turned me off from Haskell was that it feels like a stream of whitespace and identifies without good visual cues as to structure.<p>I&#x27;m sure once you get the zen of it, it&#x27;s fine. Like Lisp, I guess, you learn to think in its structure. But looking at a screenful of Haskell to me is intimidating.<p>Of the bunch I found SML&#x2F;NJ to be the most readable.</div><br/></div></div><div id="42883747" class="c"><input type="checkbox" id="c-42883747" checked=""/><div class="controls bullet"><span class="by">whimsicalism</span><span>|</span><a href="#42883435">parent</a><span>|</span><a href="#42884331">prev</a><span>|</span><a href="#42883433">next</a><span>|</span><label class="collapse" for="c-42883747">[-]</label><label class="expand" for="c-42883747">[1 more]</label></div><br/><div class="children"><div class="content">i wish the reason syntax was the main one</div><br/></div></div></div></div><div id="42883433" class="c"><input type="checkbox" id="c-42883433" checked=""/><div class="controls bullet"><span class="by">zokier</span><span>|</span><a href="#42883435">prev</a><span>|</span><a href="#42883345">next</a><span>|</span><label class="collapse" for="c-42883433">[-]</label><label class="expand" for="c-42883433">[9 more]</label></div><br/><div class="children"><div class="content">kinda surprising that it still makes sense to develop your own new build system, and then do the migration to it, instead of adopting an off-the-shelf one like buck2 (or bazel&#x2F;etc...). Not saying that these fancy build tools are easy to adopt, but compared to building your own? is there something remarkable that makes dune much different?</div><br/><div id="42883551" class="c"><input type="checkbox" id="c-42883551" checked=""/><div class="controls bullet"><span class="by">wk_end</span><span>|</span><a href="#42883433">parent</a><span>|</span><a href="#42883564">next</a><span>|</span><label class="collapse" for="c-42883551">[-]</label><label class="expand" for="c-42883551">[6 more]</label></div><br/><div class="children"><div class="content">Without getting into any specifics of it - I&#x27;m sure there&#x27;s people with much more experience with these tools who can comment - I&#x27;ll point out that neither buck nor bzl existed when JS decided to start building their own tool in 2012. Bazel&#x27;s first release was in 2015, Buck&#x27;s was in 2013.<p>JS does have a bit of a NIH culture, but I&#x27;m not sure if that was really at play here. There just...weren&#x27;t very many good build tools available at the time, particularly for a company using an unorthodox tech stack.</div><br/><div id="42883711" class="c"><input type="checkbox" id="c-42883711" checked=""/><div class="controls bullet"><span class="by">zokier</span><span>|</span><a href="#42883433">root</a><span>|</span><a href="#42883551">parent</a><span>|</span><a href="#42883564">next</a><span>|</span><label class="collapse" for="c-42883711">[-]</label><label class="expand" for="c-42883711">[5 more]</label></div><br/><div class="children"><div class="content">&gt; I&#x27;ll point out that neither buck nor bzl existed when JS decided to start building their own tool in 2012. Bazel&#x27;s first release was in 2015, Buck&#x27;s was in 2013.<p>But Dune started (according to this blog post) in 2016 and JS started seriously improving and adopting it last year. So to me Jenga sounds like a reasonable step in 2012, but pouring significant effort into migrating from Jenga to Dune (and improving Dune) in 2024 sounds more weird</div><br/><div id="42883765" class="c"><input type="checkbox" id="c-42883765" checked=""/><div class="controls bullet"><span class="by">yawaramin</span><span>|</span><a href="#42883433">root</a><span>|</span><a href="#42883711">parent</a><span>|</span><a href="#42883564">next</a><span>|</span><label class="collapse" for="c-42883765">[-]</label><label class="expand" for="c-42883765">[4 more]</label></div><br/><div class="children"><div class="content">Jenga and dune are the same thing, it was just renamed.</div><br/><div id="42883841" class="c"><input type="checkbox" id="c-42883841" checked=""/><div class="controls bullet"><span class="by">zokier</span><span>|</span><a href="#42883433">root</a><span>|</span><a href="#42883765">parent</a><span>|</span><a href="#42883564">next</a><span>|</span><label class="collapse" for="c-42883841">[-]</label><label class="expand" for="c-42883841">[3 more]</label></div><br/><div class="children"><div class="content">The blog post clearly describes them as two different systems, and how Jane Street migrated from one to another.</div><br/><div id="42883945" class="c"><input type="checkbox" id="c-42883945" checked=""/><div class="controls bullet"><span class="by">wk_end</span><span>|</span><a href="#42883433">root</a><span>|</span><a href="#42883841">parent</a><span>|</span><a href="#42884223">next</a><span>|</span><label class="collapse" for="c-42883945">[-]</label><label class="expand" for="c-42883945">[1 more]</label></div><br/><div class="children"><div class="content">Yes and no. This is all spelled out in the post, but it&#x27;s a little thorny.<p>Dune is a rename of Jbuilder (2016). Jbuilder uses Jenga (2012) configuration files.<p>&gt; By 2016 we had had enough of this, and decided to make a simple cross-platform tool, called Jbuilder, that would allow external users to build our code without having to adopt Jenga in full, and would release us from the obligation of rewriting our builds in OCamlbuild [...] Jbuilder understood the jbuild files that Jenga used for build configuration.<p>So in 2012 it made sense for them to build Jenga, because there weren&#x27;t any good alternatives - Bzl etc. didn&#x27;t exist, so they couldn&#x27;t have solved their problems.<p>And in 2016 they had open-source code they wanted others to be able build; those people didn&#x27;t want to use Jenga, and JS didn&#x27;t want to rewrite their builds so that they could use something else. Thus, Jbuilder was a shim so that JS could still use their Jenga builds and others could build JS&#x27; code without using Jenga. Bzl etc., even though they existed, wouldn&#x27;t have solved these problems either.</div><br/></div></div><div id="42884223" class="c"><input type="checkbox" id="c-42884223" checked=""/><div class="controls bullet"><span class="by">yawaramin</span><span>|</span><a href="#42883433">root</a><span>|</span><a href="#42883841">parent</a><span>|</span><a href="#42883945">prev</a><span>|</span><a href="#42883564">next</a><span>|</span><label class="collapse" for="c-42884223">[-]</label><label class="expand" for="c-42884223">[1 more]</label></div><br/><div class="children"><div class="content">My bad, dune is a rename of jbuilder indeed. Not Jenga. But the other reply provides more context that&#x27;s important.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="42883564" class="c"><input type="checkbox" id="c-42883564" checked=""/><div class="controls bullet"><span class="by">mhh__</span><span>|</span><a href="#42883433">parent</a><span>|</span><a href="#42883551">prev</a><span>|</span><a href="#42883345">next</a><span>|</span><label class="collapse" for="c-42883564">[-]</label><label class="expand" for="c-42883564">[2 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t know ocaml particularly well but my understanding is that only with buck2 (of those mentioned) do you have a build system with the semantics to actually compile ocaml properly.<p>In particular I was under the impression one needed to be able to run ocamldep before hand (or compile twice) - buck2 can do this, bazel needs hacks iirc.</div><br/><div id="42883608" class="c"><input type="checkbox" id="c-42883608" checked=""/><div class="controls bullet"><span class="by">rwmj</span><span>|</span><a href="#42883433">root</a><span>|</span><a href="#42883564">parent</a><span>|</span><a href="#42883345">next</a><span>|</span><label class="collapse" for="c-42883608">[-]</label><label class="expand" for="c-42883608">[1 more]</label></div><br/><div class="children"><div class="content">I loath autotools with a passion, and it&#x27;s awkward to set it all up, but it handles OCaml code just fine.  We use it for multi-language projects (including OCaml) like nbdkit &amp; libguestfs.</div><br/></div></div></div></div></div></div><div id="42883345" class="c"><input type="checkbox" id="c-42883345" checked=""/><div class="controls bullet"><span class="by">wiseowise</span><span>|</span><a href="#42883433">prev</a><span>|</span><a href="#42883957">next</a><span>|</span><label class="collapse" for="c-42883345">[-]</label><label class="expand" for="c-42883345">[2 more]</label></div><br/><div class="children"><div class="content">Dune is the single best name of a build system out there, nothing even comes close to.</div><br/><div id="42884219" class="c"><input type="checkbox" id="c-42884219" checked=""/><div class="controls bullet"><span class="by">708733454927516</span><span>|</span><a href="#42883345">parent</a><span>|</span><a href="#42883957">next</a><span>|</span><label class="collapse" for="c-42884219">[-]</label><label class="expand" for="c-42884219">[1 more]</label></div><br/><div class="children"><div class="content">Indeed.<p>&quot;He who controls the [build system] controls the universe.&quot;</div><br/></div></div></div></div><div id="42883957" class="c"><input type="checkbox" id="c-42883957" checked=""/><div class="controls bullet"><span class="by">fire_lake</span><span>|</span><a href="#42883345">prev</a><span>|</span><a href="#42884402">next</a><span>|</span><label class="collapse" for="c-42883957">[-]</label><label class="expand" for="c-42883957">[3 more]</label></div><br/><div class="children"><div class="content">What percentage of JS programmers actually work on this stuff I wonder?</div><br/><div id="42885022" class="c"><input type="checkbox" id="c-42885022" checked=""/><div class="controls bullet"><span class="by">jyscao</span><span>|</span><a href="#42883957">parent</a><span>|</span><a href="#42884513">next</a><span>|</span><label class="collapse" for="c-42885022">[-]</label><label class="expand" for="c-42885022">[1 more]</label></div><br/><div class="children"><div class="content">Dune and its predecessor Jbuilder was started by a single guy at Jane Street almost 10 years ago. A bit later he was joined by my buddy who worked under OCaml Labs. And while I&#x27;m sure there were some occasional contributions from others at JS and the OCaml community, for a good number of years it was primarily just the 2 of them working on Dune. And as the article stated, it&#x27;s only a relatively recent development that JS has a full team working on it.<p>source: my buddy (rgrinberg) is the lead and #1 contributor (by far)</div><br/></div></div><div id="42884513" class="c"><input type="checkbox" id="c-42884513" checked=""/><div class="controls bullet"><span class="by">piuantiderp</span><span>|</span><a href="#42883957">parent</a><span>|</span><a href="#42885022">prev</a><span>|</span><a href="#42884402">next</a><span>|</span><label class="collapse" for="c-42884513">[-]</label><label class="expand" for="c-42884513">[1 more]</label></div><br/><div class="children"><div class="content">The article said the team working on it has 5 engineers.</div><br/></div></div></div></div><div id="42884402" class="c"><input type="checkbox" id="c-42884402" checked=""/><div class="controls bullet"><span class="by">thomastraum</span><span>|</span><a href="#42883957">prev</a><span>|</span><a href="#42884692">next</a><span>|</span><label class="collapse" for="c-42884402">[-]</label><label class="expand" for="c-42884402">[1 more]</label></div><br/><div class="children"><div class="content">might get downvoted but all i think of when I see a Jane Street article is how much each programmer earns</div><br/></div></div><div id="42883383" class="c"><input type="checkbox" id="c-42883383" checked=""/><div class="controls bullet"><span class="by">firesteelrain</span><span>|</span><a href="#42884692">prev</a><span>|</span><a href="#42883597">next</a><span>|</span><label class="collapse" for="c-42883383">[-]</label><label class="expand" for="c-42883383">[1 more]</label></div><br/><div class="children"><div class="content">Man I must be under a rock. Never heard of Dune!<p>Cmake mostly</div><br/></div></div><div id="42883597" class="c"><input type="checkbox" id="c-42883597" checked=""/><div class="controls bullet"><span class="by">rwmj</span><span>|</span><a href="#42883383">prev</a><span>|</span><a href="#42884078">next</a><span>|</span><label class="collapse" for="c-42883597">[-]</label><label class="expand" for="c-42883597">[11 more]</label></div><br/><div class="children"><div class="content">I respectfully have to disagree.  As Fedora packager for OCaml packages, dune&#x27;s configuration is yet another one-off, with a weird Lisp syntax, hard to understand, difficult to patch.  I&#x27;d far rather people stuck to using more familiar Linux build systems.  As an upstream OCaml developer, the whole thing falls down the minute you need to integrate other programming languages into your build (or OCaml code into a code base written in another language).<p>(This rant more or less equally applies to other language-specific build systems.)</div><br/><div id="42883779" class="c"><input type="checkbox" id="c-42883779" checked=""/><div class="controls bullet"><span class="by">munificent</span><span>|</span><a href="#42883597">parent</a><span>|</span><a href="#42883850">next</a><span>|</span><label class="collapse" for="c-42883779">[-]</label><label class="expand" for="c-42883779">[1 more]</label></div><br/><div class="children"><div class="content"><i>&gt; more familiar Linux build systems</i><p>&quot;Familiar&quot; is not a property of any system. It&#x27;s a relation between a system and a user.<p>Some Linux build systems maybe be more familiar to some users, but will be less familiar to others. When picking a build system, you can&#x27;t just look at the system itself and declare it familiar or not.<p>It&#x27;s not even enough to look at the total number of users familiar with some thing. Hindi is one of the most familiar languages in the world, but you&#x27;re probably gonna have a bad time if you use it for the menu in a cafe in rural Texas.<p>You have to look at your actual cohort of users (and potential future users) and see what&#x27;s familiar to them. This is one of the key reasons why usability is actually a deeply hard problem. So much of usability hinges on familiarity, but familiarity is a human-specific highly variable property.</div><br/></div></div><div id="42883850" class="c"><input type="checkbox" id="c-42883850" checked=""/><div class="controls bullet"><span class="by">nicoburns</span><span>|</span><a href="#42883597">parent</a><span>|</span><a href="#42883779">prev</a><span>|</span><a href="#42883757">next</a><span>|</span><label class="collapse" for="c-42883850">[-]</label><label class="expand" for="c-42883850">[2 more]</label></div><br/><div class="children"><div class="content">As a user of Linux, I wish Linux distributions would abandon their build systems which really only work well for C and maybe C++, and also only work on one platform (not even the whole of linux!) meaning that packaging has to be duplicated for every OS, and stuck to using more familiar language-specific build systems that work everywhere.<p>(this rant more or less equally applies to all os-or-distro-specific build systems)<p>---<p>This rant is only semi-serious. I do see <i>some</i> value in the Linux distribution style packaging. In particular, I do sympathise with the need to do cross-language builds. But goodness are they a pain to work with, and probably the biggest barrier to me shipping software on Linux.<p>My hope is that eventually an evolution on build systems like bazel&#x2F;buck2 will lead to a truly universal build system that is both cross-platform and cross-language. But unfortunately it doesn&#x27;t look like it&#x27;s coming soon.</div><br/><div id="42884260" class="c"><input type="checkbox" id="c-42884260" checked=""/><div class="controls bullet"><span class="by">Hasnep</span><span>|</span><a href="#42883597">root</a><span>|</span><a href="#42883850">parent</a><span>|</span><a href="#42883757">next</a><span>|</span><label class="collapse" for="c-42884260">[-]</label><label class="expand" for="c-42884260">[1 more]</label></div><br/><div class="children"><div class="content">If you only care about Linux and MacOS then Nix can be that universal cross language build tool.</div><br/></div></div></div></div><div id="42883757" class="c"><input type="checkbox" id="c-42883757" checked=""/><div class="controls bullet"><span class="by">yawaramin</span><span>|</span><a href="#42883597">parent</a><span>|</span><a href="#42883850">prev</a><span>|</span><a href="#42883662">next</a><span>|</span><label class="collapse" for="c-42883757">[-]</label><label class="expand" for="c-42883757">[3 more]</label></div><br/><div class="children"><div class="content">&gt; more familiar Linux build systems<p>What&#x27;s a &#x27;familiar Linux build system&#x27;? make?</div><br/><div id="42883788" class="c"><input type="checkbox" id="c-42883788" checked=""/><div class="controls bullet"><span class="by">blobbers</span><span>|</span><a href="#42883597">root</a><span>|</span><a href="#42883757">parent</a><span>|</span><a href="#42883662">next</a><span>|</span><label class="collapse" for="c-42883788">[-]</label><label class="expand" for="c-42883788">[2 more]</label></div><br/><div class="children"><div class="content">They likely mean &#x27;generally used with other languages&#x27;. make is an example.</div><br/><div id="42884563" class="c"><input type="checkbox" id="c-42884563" checked=""/><div class="controls bullet"><span class="by">coder543</span><span>|</span><a href="#42883597">root</a><span>|</span><a href="#42883788">parent</a><span>|</span><a href="#42883662">next</a><span>|</span><label class="collapse" for="c-42884563">[-]</label><label class="expand" for="c-42884563">[1 more]</label></div><br/><div class="children"><div class="content">Make is primarily used with C and C++. It is not commonly used in Java, Rust, Go, NodeJS, or hardly anything <i>besides</i> C and C++. Make is not &quot;generally used with other languages&quot;.</div><br/></div></div></div></div></div></div><div id="42883662" class="c"><input type="checkbox" id="c-42883662" checked=""/><div class="controls bullet"><span class="by">UncleOxidant</span><span>|</span><a href="#42883597">parent</a><span>|</span><a href="#42883757">prev</a><span>|</span><a href="#42883967">next</a><span>|</span><label class="collapse" for="c-42883662">[-]</label><label class="expand" for="c-42883662">[2 more]</label></div><br/><div class="children"><div class="content">I haven&#x27;t been doing much OCaml in recent years, but I do sometimes check in to see what&#x27;s going on in OCaml-land, and it seems like dune is what everyone is using now - what are the alternatives?</div><br/><div id="42884268" class="c"><input type="checkbox" id="c-42884268" checked=""/><div class="controls bullet"><span class="by">mhitza</span><span>|</span><a href="#42883597">root</a><span>|</span><a href="#42883662">parent</a><span>|</span><a href="#42883967">next</a><span>|</span><label class="collapse" for="c-42884268">[-]</label><label class="expand" for="c-42884268">[1 more]</label></div><br/><div class="children"><div class="content">Using, probably, to be deprecated ocamlbuild, with _tags file which is another made up syntax.<p>But I&#x27;m a new OCaml user, and actively starter using ocamlbuild because dune added layers of indirection really tripped me up at first.</div><br/></div></div></div></div><div id="42883967" class="c"><input type="checkbox" id="c-42883967" checked=""/><div class="controls bullet"><span class="by">lmm</span><span>|</span><a href="#42883597">parent</a><span>|</span><a href="#42883662">prev</a><span>|</span><a href="#42883992">next</a><span>|</span><label class="collapse" for="c-42883967">[-]</label><label class="expand" for="c-42883967">[1 more]</label></div><br/><div class="children"><div class="content">&gt; This rant more or less equally applies to other language-specific build systems.<p>And yet those language-specific build systems are overwhelmingly winning, in pretty much every language.<p>&gt; As Fedora packager for OCaml packages,...<p>I honestly think traditional Linux packaging is in the wrong here and the problems are essentially self-inflicted (not in the sense that individual maintainers are doing something wrong, but in the sense that the policy that traditional Linux distributions are following is inherently unsustainable. It&#x27;s designed for a pre-CPAN world)<p>&gt; As an upstream OCaml developer, the whole thing falls down the minute you need to integrate other programming languages into your build (or OCaml code into a code base written in another language).<p>True up to a point, but frankly the worst case is falling back to a terrible C-style build, and &quot;always do terrible C-style builds in case you need to integrate with C code&quot; is not a proposition that has much appeal.<p>Much as I wish the whole world would standardise on Maven or Cargo, I can&#x27;t see a realistic path to there without first eliminating C, because the C people are never going to agree to follow a standard for package repositories.</div><br/></div></div></div></div><div id="42884078" class="c"><input type="checkbox" id="c-42884078" checked=""/><div class="controls bullet"><span class="by">xiaodai</span><span>|</span><a href="#42883597">prev</a><span>|</span><label class="collapse" for="c-42884078">[-]</label><label class="expand" for="c-42884078">[1 more]</label></div><br/><div class="children"><div class="content">but why?</div><br/></div></div></div></div></div></div></div></body></html>