<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1712048452241" as="style"/><link rel="stylesheet" href="styles.css?v=1712048452241"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://harrisongoldste.in/papers/icse24-pbt-in-practice.pdf">Property-based testing in practice [pdf]</a> <span class="domain">(<a href="https://harrisongoldste.in">harrisongoldste.in</a>)</span></div><div class="subtext"><span>Smaug123</span> | <span>16 comments</span></div><br/><div><div id="39902984" class="c"><input type="checkbox" id="c-39902984" checked=""/><div class="controls bullet"><span class="by">jiehong</span><span>|</span><a href="#39902530">next</a><span>|</span><label class="collapse" for="c-39902984">[-]</label><label class="expand" for="c-39902984">[8 more]</label></div><br/><div class="children"><div class="content">While agreeing with the results of this article, I’ve found that convincing other developers of writing test with properties isn’t very easy: coming up with good properties is not always trivial.<p>Here is an informal testing maturity ladder in increasing order:<p>- code can only be tested with an integration test<p>- code is tested by comparing the stdout with an earlier version (hopefully it’s deterministic!)<p>- code is retrofitted with tests in mind<p>- code is written to be testable first, maybe with lots of mocks<p>- code is testable, and pure functions are tested with unit tests, leaving the rest to integration tests. Fewer mocks, some stubs.<p>- property based tests, assuming the unit tests are fast in the first place<p>- fuzzing<p>- mutation based testing<p>Not speaking of formal specs or performance testing or anything else.</div><br/><div id="39903372" class="c"><input type="checkbox" id="c-39903372" checked=""/><div class="controls bullet"><span class="by">boxed</span><span>|</span><a href="#39902984">parent</a><span>|</span><a href="#39903299">next</a><span>|</span><label class="collapse" for="c-39903372">[-]</label><label class="expand" for="c-39903372">[4 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t understand why PBT is above mutation testing. It seems like it&#x27;s more of a popularity contest kind of thing, and not a matter of engineering tradeoffs or how useful it is.</div><br/><div id="39903467" class="c"><input type="checkbox" id="c-39903467" checked=""/><div class="controls bullet"><span class="by">MrJohz</span><span>|</span><a href="#39902984">root</a><span>|</span><a href="#39903372">parent</a><span>|</span><a href="#39903450">next</a><span>|</span><label class="collapse" for="c-39903467">[-]</label><label class="expand" for="c-39903467">[1 more]</label></div><br/><div class="children"><div class="content">In my experience, adding PBT once you&#x27;ve got a codebase amenable to unit testing in general is a relatively easy step: you can add property tests to your existing unit tests without changing much about your setup, and assuming your tests in general are quick, PBT won&#x27;t add much overall time to your testing process.<p>But adding mutation testing tends to be harder: it&#x27;s not just an extra thing you can add in without changing any existing code, it&#x27;s testing whether the tests are useful in the first place. Which means when you introduce it, you&#x27;ll probably need to spend some time fixing everything that&#x27;s currently wrong. This makes it a next step in the testing process beyond just adding a new technique to your existing repertoire.<p>That said, I&#x27;ve used PBT for a while and not had as much success with mutation testing, so maybe this is a personal bias.</div><br/></div></div><div id="39903450" class="c"><input type="checkbox" id="c-39903450" checked=""/><div class="controls bullet"><span class="by">jiehong</span><span>|</span><a href="#39902984">root</a><span>|</span><a href="#39903372">parent</a><span>|</span><a href="#39903467">prev</a><span>|</span><a href="#39903299">next</a><span>|</span><label class="collapse" for="c-39903450">[-]</label><label class="expand" for="c-39903450">[2 more]</label></div><br/><div class="children"><div class="content">PBT is below mutation testing, the list is ordered with lower tier up.</div><br/><div id="39903652" class="c"><input type="checkbox" id="c-39903652" checked=""/><div class="controls bullet"><span class="by">boxed</span><span>|</span><a href="#39902984">root</a><span>|</span><a href="#39903450">parent</a><span>|</span><a href="#39903299">next</a><span>|</span><label class="collapse" for="c-39903652">[-]</label><label class="expand" for="c-39903652">[1 more]</label></div><br/><div class="children"><div class="content">Sorry, I put that badly. What I meant was that I don&#x27;t understand why PBT is something you apply before MT.</div><br/></div></div></div></div></div></div><div id="39903299" class="c"><input type="checkbox" id="c-39903299" checked=""/><div class="controls bullet"><span class="by">IshKebab</span><span>|</span><a href="#39902984">parent</a><span>|</span><a href="#39903372">prev</a><span>|</span><a href="#39902530">next</a><span>|</span><label class="collapse" for="c-39903299">[-]</label><label class="expand" for="c-39903299">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve never seen anyone do mutation testing with software (it&#x27;s pretty common for hardware though). Does it require language level support?</div><br/><div id="39903359" class="c"><input type="checkbox" id="c-39903359" checked=""/><div class="controls bullet"><span class="by">boxed</span><span>|</span><a href="#39902984">root</a><span>|</span><a href="#39903299">parent</a><span>|</span><a href="#39903368">next</a><span>|</span><label class="collapse" for="c-39903359">[-]</label><label class="expand" for="c-39903359">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m the author of mutmut, the primary mutation tester for python, so I think I can speak a bit on this.<p>It&#x27;s quite straight forward to do MT in software. I&#x27;ve done quite a bit of it for specific libraries that I&#x27;ve built (iommi, tri.struct, and internal code). A big advantage in my book of MT over PBT is the much lower cognitive overhead for MT and that you can know you have done it completely. The second may be just a false sense of security or an emotional blanket, but still.<p>I have written about mutation testing a few times: <a href="https:&#x2F;&#x2F;kodare.net&#x2F;2019&#x2F;04&#x2F;10&#x2F;mutation-vs-property-based-testing.html" rel="nofollow">https:&#x2F;&#x2F;kodare.net&#x2F;2019&#x2F;04&#x2F;10&#x2F;mutation-vs-property-based-tes...</a> <a href="https:&#x2F;&#x2F;kodare.net&#x2F;2018&#x2F;11&#x2F;18&#x2F;the-missing-mutant-a-performance-bug-we-missed.html" rel="nofollow">https:&#x2F;&#x2F;kodare.net&#x2F;2018&#x2F;11&#x2F;18&#x2F;the-missing-mutant-a-performan...</a> <a href="https:&#x2F;&#x2F;kodare.net&#x2F;2016&#x2F;12&#x2F;12&#x2F;mutation-testing-in-practice.html" rel="nofollow">https:&#x2F;&#x2F;kodare.net&#x2F;2016&#x2F;12&#x2F;12&#x2F;mutation-testing-in-practice.h...</a> and my talk on mutmut from pycon sweden is on youtube: <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=fZwB1gQBwnU" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=fZwB1gQBwnU</a></div><br/></div></div><div id="39903368" class="c"><input type="checkbox" id="c-39903368" checked=""/><div class="controls bullet"><span class="by">Smaug123</span><span>|</span><a href="#39902984">root</a><span>|</span><a href="#39903299">parent</a><span>|</span><a href="#39903359">prev</a><span>|</span><a href="#39902530">next</a><span>|</span><label class="collapse" for="c-39903368">[-]</label><label class="expand" for="c-39903368">[1 more]</label></div><br/><div class="children"><div class="content">[I&#x27;ve never used any mutation testing tools either.]<p>In general it doesn&#x27;t require language-level support, of course - you can just make a change and rebuild it, à la Stryker <a href="https:&#x2F;&#x2F;stryker-mutator.io&#x2F;docs&#x2F;stryker-net&#x2F;technical-reference&#x2F;research&#x2F;" rel="nofollow">https:&#x2F;&#x2F;stryker-mutator.io&#x2F;docs&#x2F;stryker-net&#x2F;technical-refere...</a> . PITest operates on JVM bytecode (<a href="https:&#x2F;&#x2F;pitest.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;pitest.org&#x2F;</a>) for orders of magnitude speedup.</div><br/></div></div></div></div></div></div><div id="39902530" class="c"><input type="checkbox" id="c-39902530" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#39902984">prev</a><span>|</span><a href="#39902640">next</a><span>|</span><label class="collapse" for="c-39902530">[-]</label><label class="expand" for="c-39902530">[1 more]</label></div><br/><div class="children"><div class="content">I found that writing new property based tests was a skill I picked up relatively quickly.  But learning how to retro-fit existing tests was a whole &#x27;nother skill that I had to learn almost independently afterwards.</div><br/></div></div><div id="39902640" class="c"><input type="checkbox" id="c-39902640" checked=""/><div class="controls bullet"><span class="by">dikei</span><span>|</span><a href="#39902530">prev</a><span>|</span><a href="#39902524">next</a><span>|</span><label class="collapse" for="c-39902640">[-]</label><label class="expand" for="c-39902640">[3 more]</label></div><br/><div class="children"><div class="content">TIL: Jane Street use OCalm in production</div><br/><div id="39902669" class="c"><input type="checkbox" id="c-39902669" checked=""/><div class="controls bullet"><span class="by">Tomte</span><span>|</span><a href="#39902640">parent</a><span>|</span><a href="#39902524">next</a><span>|</span><label class="collapse" for="c-39902669">[-]</label><label class="expand" for="c-39902669">[2 more]</label></div><br/><div class="children"><div class="content">They maintain their own standard library for Ocaml, don‘t they?</div><br/><div id="39903518" class="c"><input type="checkbox" id="c-39903518" checked=""/><div class="controls bullet"><span class="by">ReleaseCandidat</span><span>|</span><a href="#39902640">root</a><span>|</span><a href="#39902669">parent</a><span>|</span><a href="#39902524">next</a><span>|</span><label class="collapse" for="c-39903518">[-]</label><label class="expand" for="c-39903518">[1 more]</label></div><br/><div class="children"><div class="content">Not just the standard library, but a whole ecosystem around it.<p>And their own compiler. <a href="https:&#x2F;&#x2F;github.com&#x2F;ocaml-flambda&#x2F;ocaml-jst">https:&#x2F;&#x2F;github.com&#x2F;ocaml-flambda&#x2F;ocaml-jst</a></div><br/></div></div></div></div></div></div><div id="39902524" class="c"><input type="checkbox" id="c-39902524" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#39902640">prev</a><span>|</span><label class="collapse" for="c-39902524">[-]</label><label class="expand" for="c-39902524">[3 more]</label></div><br/><div class="children"><div class="content">Wow, hypothesis seems to have reached 4% of Python users?  That&#x27;s actually pretty impressive.</div><br/><div id="39902853" class="c"><input type="checkbox" id="c-39902853" checked=""/><div class="controls bullet"><span class="by">throwup238</span><span>|</span><a href="#39902524">parent</a><span>|</span><a href="#39903318">next</a><span>|</span><label class="collapse" for="c-39902853">[-]</label><label class="expand" for="c-39902853">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s the same percentage of users who have Python package management figured out!</div><br/></div></div><div id="39903318" class="c"><input type="checkbox" id="c-39903318" checked=""/><div class="controls bullet"><span class="by">IshKebab</span><span>|</span><a href="#39902524">parent</a><span>|</span><a href="#39902853">prev</a><span>|</span><label class="collapse" for="c-39903318">[-]</label><label class="expand" for="c-39903318">[1 more]</label></div><br/><div class="children"><div class="content">*of Python users that completed the Python Jetbrains survey.</div><br/></div></div></div></div></div></div></div></div></div></body></html>