<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1698483652248" as="style"/><link rel="stylesheet" href="styles.css?v=1698483652248"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/scratchdata/ScratchDB">Show HN: ScratchDB – Open-Source Snowflake on ClickHouse</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>memset</span> | <span>55 comments</span></div><br/><div><div id="38042892" class="c"><input type="checkbox" id="c-38042892" checked=""/><div class="controls bullet"><span class="by">CharlesW</span><span>|</span><a href="#38042978">next</a><span>|</span><label class="collapse" for="c-38042892">[-]</label><label class="expand" for="c-38042892">[5 more]</label></div><br/><div class="children"><div class="content">Can you explain what &quot;open-source Snowflake&quot; means, since you don&#x27;t explain it in this description, in the repo, or on the site?<p>Is your goal explicitly to replicate all Snowflake capabilities? <a href="https:&#x2F;&#x2F;docs.snowflake.com&#x2F;en&#x2F;user-guide&#x2F;intro-supported-features" rel="nofollow noreferrer">https:&#x2F;&#x2F;docs.snowflake.com&#x2F;en&#x2F;user-guide&#x2F;intro-supported-fea...</a></div><br/><div id="38043068" class="c"><input type="checkbox" id="c-38043068" checked=""/><div class="controls bullet"><span class="by">memset</span><span>|</span><a href="#38042892">parent</a><span>|</span><a href="#38042978">next</a><span>|</span><label class="collapse" for="c-38043068">[-]</label><label class="expand" for="c-38043068">[4 more]</label></div><br/><div class="children"><div class="content">This is good feedback on writing a clear message - I appreciate it.<p>The goal of this project is to build a superb developer experience around analytical databases. I think that is one of Snowflake&#x27;s (many) value propositions. It is also a goal for users to be able to have full control of their data, how it is processed, and be able to make economical use of their compute.<p>This project does not have a goal of matching anyone else&#x27;s features. But of course, as we grow, we&#x27;ll end up building things which are important to enterprises.</div><br/><div id="38044536" class="c"><input type="checkbox" id="c-38044536" checked=""/><div class="controls bullet"><span class="by">willseth</span><span>|</span><a href="#38042892">root</a><span>|</span><a href="#38043068">parent</a><span>|</span><a href="#38047984">next</a><span>|</span><label class="collapse" for="c-38044536">[-]</label><label class="expand" for="c-38044536">[1 more]</label></div><br/><div class="children"><div class="content">Calling it &quot;Open-Source Snowflake&quot; implies you are trying to be a drop-in replacement for Snowflake for at least a subset of features, SQL syntax, etc.</div><br/></div></div><div id="38047984" class="c"><input type="checkbox" id="c-38047984" checked=""/><div class="controls bullet"><span class="by">az226</span><span>|</span><a href="#38042892">root</a><span>|</span><a href="#38043068">parent</a><span>|</span><a href="#38044536">prev</a><span>|</span><a href="#38043609">next</a><span>|</span><label class="collapse" for="c-38047984">[-]</label><label class="expand" for="c-38047984">[1 more]</label></div><br/><div class="children"><div class="content">Snowflake started as cloud-first (elastic) data warehouse. DX came later.</div><br/></div></div><div id="38043609" class="c"><input type="checkbox" id="c-38043609" checked=""/><div class="controls bullet"><span class="by">skeeter2020</span><span>|</span><a href="#38042892">root</a><span>|</span><a href="#38043068">parent</a><span>|</span><a href="#38047984">prev</a><span>|</span><a href="#38042978">next</a><span>|</span><label class="collapse" for="c-38043609">[-]</label><label class="expand" for="c-38043609">[1 more]</label></div><br/><div class="children"><div class="content">I too was confused by the title. If it doesn&#x27;t support feature-parity, nor approach the problem space from the same perspective as Snowflake, I don&#x27;t think it&#x27;s the open source version.</div><br/></div></div></div></div></div></div><div id="38042978" class="c"><input type="checkbox" id="c-38042978" checked=""/><div class="controls bullet"><span class="by">giovannibonetti</span><span>|</span><a href="#38042892">prev</a><span>|</span><a href="#38042000">next</a><span>|</span><label class="collapse" for="c-38042978">[-]</label><label class="expand" for="c-38042978">[15 more]</label></div><br/><div class="children"><div class="content">Great product! Thanks for sharing it!<p>Question: I thought Clickhouse already has native support for flattening JSON [1], although it was released recently (version 22.3.1). Did you start working on it [2] before that? Or is it a different take? I&#x27;m curious about the pros and cons of each one.<p>[1] <a href="https:&#x2F;&#x2F;clickhouse.com&#x2F;docs&#x2F;en&#x2F;integrations&#x2F;data-formats&#x2F;json#semi-structured-approach" rel="nofollow noreferrer">https:&#x2F;&#x2F;clickhouse.com&#x2F;docs&#x2F;en&#x2F;integrations&#x2F;data-formats&#x2F;jso...</a>
[2] <a href="https:&#x2F;&#x2F;scratchdb.com&#x2F;blog&#x2F;flatten-json&#x2F;">https:&#x2F;&#x2F;scratchdb.com&#x2F;blog&#x2F;flatten-json&#x2F;</a></div><br/><div id="38043367" class="c"><input type="checkbox" id="c-38043367" checked=""/><div class="controls bullet"><span class="by">memset</span><span>|</span><a href="#38042978">parent</a><span>|</span><a href="#38045224">next</a><span>|</span><label class="collapse" for="c-38043367">[-]</label><label class="expand" for="c-38043367">[13 more]</label></div><br/><div class="children"><div class="content">This is a really good question. My snarky answer is &quot;the way we ingest JSON doesn&#x27;t require 50 pages and n configuration settings to explain.&quot;<p>Here&#x27;s a more factual one:<p>- We don&#x27;t use tuples for nested JSON. We just use underscores to show parent_child relationships in keys.<p>- We don&#x27;t use arrays. Instead, we make it easy to split into multiple rows so you can use regular SQL.<p>I haven&#x27;t directly compared Clickhouse&#x27;s all of different JSON treatments compared to what I&#x27;ve implemented, but my goal was to build something that you could run and would &quot;just work the way it should.&quot;</div><br/><div id="38043875" class="c"><input type="checkbox" id="c-38043875" checked=""/><div class="controls bullet"><span class="by">antoniojtorres</span><span>|</span><a href="#38042978">root</a><span>|</span><a href="#38043367">parent</a><span>|</span><a href="#38044901">next</a><span>|</span><label class="collapse" for="c-38043875">[-]</label><label class="expand" for="c-38043875">[1 more]</label></div><br/><div class="children"><div class="content">ClickHouse JSON certainly has some sharp edges because they do a lot of schema inference to transparently column store the component parts, which makes it tricky with anything that could be irregular.<p>Big fan of CH on my end. Will follow your project closely.</div><br/></div></div><div id="38044901" class="c"><input type="checkbox" id="c-38044901" checked=""/><div class="controls bullet"><span class="by">datatrashfire</span><span>|</span><a href="#38042978">root</a><span>|</span><a href="#38043367">parent</a><span>|</span><a href="#38043875">prev</a><span>|</span><a href="#38044513">next</a><span>|</span><label class="collapse" for="c-38044901">[-]</label><label class="expand" for="c-38044901">[1 more]</label></div><br/><div class="children"><div class="content">as a huge clickhouse fan, i have to agree json is simply not a great experience even with all the changes in the last year</div><br/></div></div><div id="38044513" class="c"><input type="checkbox" id="c-38044513" checked=""/><div class="controls bullet"><span class="by">zepolen</span><span>|</span><a href="#38042978">root</a><span>|</span><a href="#38043367">parent</a><span>|</span><a href="#38044901">prev</a><span>|</span><a href="#38045943">next</a><span>|</span><label class="collapse" for="c-38044513">[-]</label><label class="expand" for="c-38044513">[9 more]</label></div><br/><div class="children"><div class="content">What happens with this?<p><pre><code>  {
    &quot;some_key&quot;: &quot;1&quot;
    &quot;some&quot;: {
      &quot;key&quot;: &quot;2&quot;
    }
  }</code></pre></div><br/><div id="38044792" class="c"><input type="checkbox" id="c-38044792" checked=""/><div class="controls bullet"><span class="by">memset</span><span>|</span><a href="#38042978">root</a><span>|</span><a href="#38044513">parent</a><span>|</span><a href="#38044969">next</a><span>|</span><label class="collapse" for="c-38044792">[-]</label><label class="expand" for="c-38044792">[6 more]</label></div><br/><div class="children"><div class="content">Probably an error! Should create a ticket for that. What would we want the behavior to be?<p>(This hasn&#x27;t come up with existing customers because theoretically it could and we should handle it.)</div><br/><div id="38047415" class="c"><input type="checkbox" id="c-38047415" checked=""/><div class="controls bullet"><span class="by">gostsamo</span><span>|</span><a href="#38042978">root</a><span>|</span><a href="#38044792">parent</a><span>|</span><a href="#38045145">next</a><span>|</span><label class="collapse" for="c-38047415">[-]</label><label class="expand" for="c-38047415">[1 more]</label></div><br/><div class="children"><div class="content">escape the underscore. this is the only sane one, I think.</div><br/></div></div><div id="38045145" class="c"><input type="checkbox" id="c-38045145" checked=""/><div class="controls bullet"><span class="by">namtab00</span><span>|</span><a href="#38042978">root</a><span>|</span><a href="#38044792">parent</a><span>|</span><a href="#38047415">prev</a><span>|</span><a href="#38044969">next</a><span>|</span><label class="collapse" for="c-38045145">[-]</label><label class="expand" for="c-38045145">[4 more]</label></div><br/><div class="children"><div class="content">maybe double the underscore on conflict?<p>some_key =1<p>some__key = 2</div><br/><div id="38045353" class="c"><input type="checkbox" id="c-38045353" checked=""/><div class="controls bullet"><span class="by">dicriseg</span><span>|</span><a href="#38042978">root</a><span>|</span><a href="#38045145">parent</a><span>|</span><a href="#38045261">next</a><span>|</span><label class="collapse" for="c-38045353">[-]</label><label class="expand" for="c-38045353">[1 more]</label></div><br/><div class="children"><div class="content">The convention when flattening is exactly that I thought - an underscore per level of nesting. This is what I would expect to see too.</div><br/></div></div><div id="38045261" class="c"><input type="checkbox" id="c-38045261" checked=""/><div class="controls bullet"><span class="by">memset</span><span>|</span><a href="#38042978">root</a><span>|</span><a href="#38045145">parent</a><span>|</span><a href="#38045353">prev</a><span>|</span><a href="#38044969">next</a><span>|</span><label class="collapse" for="c-38045261">[-]</label><label class="expand" for="c-38045261">[2 more]</label></div><br/><div class="children"><div class="content">Agree. (What if the original users key has the double underscore?) maybe this can be defined as a param?</div><br/><div id="38045457" class="c"><input type="checkbox" id="c-38045457" checked=""/><div class="controls bullet"><span class="by">namtab00</span><span>|</span><a href="#38042978">root</a><span>|</span><a href="#38045261">parent</a><span>|</span><a href="#38044969">next</a><span>|</span><label class="collapse" for="c-38045457">[-]</label><label class="expand" for="c-38045457">[1 more]</label></div><br/><div class="children"><div class="content">&gt; What if the original users key has the double underscore?<p>Double it again.<p>some_key = 1<p>some__key = 2<p>some____key = 3<p>This is analogous to what C#11 does to allow raw string literal quotes containing those same quotes.
<a href="https:&#x2F;&#x2F;learn.microsoft.com&#x2F;en-us&#x2F;dotnet&#x2F;csharp&#x2F;language-reference&#x2F;builtin-types&#x2F;reference-types#string-literals" rel="nofollow noreferrer">https:&#x2F;&#x2F;learn.microsoft.com&#x2F;en-us&#x2F;dotnet&#x2F;csharp&#x2F;language-ref...</a></div><br/></div></div></div></div></div></div></div></div><div id="38044969" class="c"><input type="checkbox" id="c-38044969" checked=""/><div class="controls bullet"><span class="by">mosen</span><span>|</span><a href="#38042978">root</a><span>|</span><a href="#38044513">parent</a><span>|</span><a href="#38044792">prev</a><span>|</span><a href="#38045943">next</a><span>|</span><label class="collapse" for="c-38044969">[-]</label><label class="expand" for="c-38044969">[2 more]</label></div><br/><div class="children"><div class="content">I tested it with the “explode” flattening mode, and it resulted in { “some_key”: “2” }</div><br/><div id="38045268" class="c"><input type="checkbox" id="c-38045268" checked=""/><div class="controls bullet"><span class="by">memset</span><span>|</span><a href="#38042978">root</a><span>|</span><a href="#38044969">parent</a><span>|</span><a href="#38045943">next</a><span>|</span><label class="collapse" for="c-38045268">[-]</label><label class="expand" for="c-38045268">[1 more]</label></div><br/><div class="children"><div class="content">Feel free to create a gh issue - really interested in what the right solution would be here!</div><br/></div></div></div></div></div></div><div id="38045943" class="c"><input type="checkbox" id="c-38045943" checked=""/><div class="controls bullet"><span class="by">lionkor</span><span>|</span><a href="#38042978">root</a><span>|</span><a href="#38043367">parent</a><span>|</span><a href="#38044513">prev</a><span>|</span><a href="#38045224">next</a><span>|</span><label class="collapse" for="c-38045943">[-]</label><label class="expand" for="c-38045943">[1 more]</label></div><br/><div class="children"><div class="content">maybe use the json flattening RFC instead of inventing your own?</div><br/></div></div></div></div><div id="38045224" class="c"><input type="checkbox" id="c-38045224" checked=""/><div class="controls bullet"><span class="by">zX41ZdbW</span><span>|</span><a href="#38042978">parent</a><span>|</span><a href="#38043367">prev</a><span>|</span><a href="#38042000">next</a><span>|</span><label class="collapse" for="c-38045224">[-]</label><label class="expand" for="c-38045224">[1 more]</label></div><br/><div class="children"><div class="content">Schema inference for nested JSON objects is a feature of ClickHouse 23.9. I&#x27;ve made a video about it: <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=yS8YU-rBpMM&amp;t=1846s">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=yS8YU-rBpMM&amp;t=1846s</a></div><br/></div></div></div></div><div id="38042000" class="c"><input type="checkbox" id="c-38042000" checked=""/><div class="controls bullet"><span class="by">tbragin</span><span>|</span><a href="#38042978">prev</a><span>|</span><a href="#38042817">next</a><span>|</span><label class="collapse" for="c-38042000">[-]</label><label class="expand" for="c-38042000">[5 more]</label></div><br/><div class="children"><div class="content">Disclaimer: I work at ClickHouse.<p>Thank you! Looks really interesting!<p>I personally agree that real-time OLAP databases have potential to better serve workloads currently in Postgres or cloud data warehouses that need real-time ingest and analytical queries. And simplifying developer experience on top of that, so you don&#x27;t have to learn about all the details of a powerful database, really speeds up developer velocity.<p>I&#x27;m curious, how you see your project differs from GraphJSON (<a href="https:&#x2F;&#x2F;www.graphjson.com&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.graphjson.com&#x2F;</a>) and Tinybird (<a href="https:&#x2F;&#x2F;www.tinybird.co&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.tinybird.co&#x2F;</a>)?<p>Congratulations again on the launch!</div><br/><div id="38042285" class="c"><input type="checkbox" id="c-38042285" checked=""/><div class="controls bullet"><span class="by">memset</span><span>|</span><a href="#38042000">parent</a><span>|</span><a href="#38043350">next</a><span>|</span><label class="collapse" for="c-38042285">[-]</label><label class="expand" for="c-38042285">[3 more]</label></div><br/><div class="children"><div class="content">Good to meet you! I hadn&#x27;t seen graphjson before, I&#x27;ll check that out. I&#x27;m also a fan of tinybird, and I think we have similar goals of wanting to make it easier for people to adopt OLAP.<p>On the technical side, I&#x27;ve made different design decisions when it comes to ingesting and processing data. For example, after a table is created, you can post new JSON, with different columns, and we ingest it without needing a manual migration step. I also have a different treatment for JSON arrays, where we can split them into multiple Clickhouse rows (rather than using a clickhouse array.)<p>Philosophically, I think there is a lot of room for open-source software <i>that also has an amazing UI and developer experience.</i> I&#x27;ve been writing OSS for years and basically think this is the best way to build successful developer tools.</div><br/><div id="38042361" class="c"><input type="checkbox" id="c-38042361" checked=""/><div class="controls bullet"><span class="by">tbragin</span><span>|</span><a href="#38042000">root</a><span>|</span><a href="#38042285">parent</a><span>|</span><a href="#38044430">next</a><span>|</span><label class="collapse" for="c-38042361">[-]</label><label class="expand" for="c-38042361">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Philosophically, I think there is a lot of room for open-source software that also has an amazing UI and developer experience.<p>+1 to that! Welcome to the ClickHouse community!</div><br/></div></div><div id="38044430" class="c"><input type="checkbox" id="c-38044430" checked=""/><div class="controls bullet"><span class="by">hawk_</span><span>|</span><a href="#38042000">root</a><span>|</span><a href="#38042285">parent</a><span>|</span><a href="#38042361">prev</a><span>|</span><a href="#38043350">next</a><span>|</span><label class="collapse" for="c-38044430">[-]</label><label class="expand" for="c-38044430">[1 more]</label></div><br/><div class="children"><div class="content">I would like to be an OSS dev but how do you pay the bills?</div><br/></div></div></div></div><div id="38043350" class="c"><input type="checkbox" id="c-38043350" checked=""/><div class="controls bullet"><span class="by">mike_d</span><span>|</span><a href="#38042000">parent</a><span>|</span><a href="#38042285">prev</a><span>|</span><a href="#38042817">next</a><span>|</span><label class="collapse" for="c-38043350">[-]</label><label class="expand" for="c-38043350">[1 more]</label></div><br/><div class="children"><div class="content">&gt; how you see your project differs from GraphJSON (<a href="https:&#x2F;&#x2F;www.graphjson.com&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.graphjson.com&#x2F;</a>) and Tinybird (<a href="https:&#x2F;&#x2F;www.tinybird.co&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.tinybird.co&#x2F;</a>)?<p>Not OP, but neither of these appear to be open source?</div><br/></div></div></div></div><div id="38042817" class="c"><input type="checkbox" id="c-38042817" checked=""/><div class="controls bullet"><span class="by">tiffanyh</span><span>|</span><a href="#38042000">prev</a><span>|</span><a href="#38047489">next</a><span>|</span><label class="collapse" for="c-38042817">[-]</label><label class="expand" for="c-38042817">[2 more]</label></div><br/><div class="children"><div class="content">AGPL-3.0 license, for those wondering.</div><br/><div id="38046623" class="c"><input type="checkbox" id="c-38046623" checked=""/><div class="controls bullet"><span class="by">iFire</span><span>|</span><a href="#38042817">parent</a><span>|</span><a href="#38047489">next</a><span>|</span><label class="collapse" for="c-38046623">[-]</label><label class="expand" for="c-38046623">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;github.com&#x2F;scratchdata&#x2F;ScratchDB&#x2F;blob&#x2F;main&#x2F;LICENSE">https:&#x2F;&#x2F;github.com&#x2F;scratchdata&#x2F;ScratchDB&#x2F;blob&#x2F;main&#x2F;LICENSE</a></div><br/></div></div></div></div><div id="38047489" class="c"><input type="checkbox" id="c-38047489" checked=""/><div class="controls bullet"><span class="by">anon3949494</span><span>|</span><a href="#38042817">prev</a><span>|</span><a href="#38038468">next</a><span>|</span><label class="collapse" for="c-38047489">[-]</label><label class="expand" for="c-38047489">[1 more]</label></div><br/><div class="children"><div class="content">Just signed up but didn&#x27;t receive a confirmation email. Are you currently accepting new sign-ups for the managed service?</div><br/></div></div><div id="38038468" class="c"><input type="checkbox" id="c-38038468" checked=""/><div class="controls bullet"><span class="by">throwaway295729</span><span>|</span><a href="#38047489">prev</a><span>|</span><a href="#38045020">next</a><span>|</span><label class="collapse" for="c-38038468">[-]</label><label class="expand" for="c-38038468">[2 more]</label></div><br/><div class="children"><div class="content">Congrats on the release! Can this be used for log data? How long is ingested data kept?</div><br/><div id="38038597" class="c"><input type="checkbox" id="c-38038597" checked=""/><div class="controls bullet"><span class="by">memset</span><span>|</span><a href="#38038468">parent</a><span>|</span><a href="#38045020">next</a><span>|</span><label class="collapse" for="c-38038597">[-]</label><label class="expand" for="c-38038597">[1 more]</label></div><br/><div class="children"><div class="content">You can use it for logs. I have a basic example here: <a href="https:&#x2F;&#x2F;scratchdb.com&#x2F;blog&#x2F;fly-logs-to-clickhouse&#x2F;">https:&#x2F;&#x2F;scratchdb.com&#x2F;blog&#x2F;fly-logs-to-clickhouse&#x2F;</a><p>It&#x27;s just storing data in a database so it persists as long as you want. For the hosted version you just pay per GB of compressed data, so if you have tons of logs then you can keep them, or you can clear out old data to save on disk space.</div><br/></div></div></div></div><div id="38045020" class="c"><input type="checkbox" id="c-38045020" checked=""/><div class="controls bullet"><span class="by">gbrits</span><span>|</span><a href="#38038468">prev</a><span>|</span><a href="#38041920">next</a><span>|</span><label class="collapse" for="c-38045020">[-]</label><label class="expand" for="c-38045020">[2 more]</label></div><br/><div class="children"><div class="content">Congrats with the launch. This looks great. Inferring schemas on the fly is awesome to get started quickly, but are there ways to explicitly define a schema if I wanted to? For example, thinking of setting column specific compression</div><br/><div id="38045219" class="c"><input type="checkbox" id="c-38045219" checked=""/><div class="controls bullet"><span class="by">memset</span><span>|</span><a href="#38045020">parent</a><span>|</span><a href="#38041920">next</a><span>|</span><label class="collapse" for="c-38045219">[-]</label><label class="expand" for="c-38045219">[1 more]</label></div><br/><div class="children"><div class="content">Currently no, but I’m open to the idea of being able to set this. Perhaps the ability to set it on the fly (or better yet, inform the user of which type of compression to use based on their actual data!) would be useful. Happy to discuss in a gh issue too.</div><br/></div></div></div></div><div id="38041920" class="c"><input type="checkbox" id="c-38041920" checked=""/><div class="controls bullet"><span class="by">didip</span><span>|</span><a href="#38045020">prev</a><span>|</span><a href="#38045290">next</a><span>|</span><label class="collapse" for="c-38041920">[-]</label><label class="expand" for="c-38041920">[1 more]</label></div><br/><div class="children"><div class="content">You should submit your benchmarks to ClickBench.</div><br/></div></div><div id="38045290" class="c"><input type="checkbox" id="c-38045290" checked=""/><div class="controls bullet"><span class="by">pitah1</span><span>|</span><a href="#38041920">prev</a><span>|</span><a href="#38046421">next</a><span>|</span><label class="collapse" for="c-38045290">[-]</label><label class="expand" for="c-38045290">[4 more]</label></div><br/><div class="children"><div class="content">Thanks for sharing. Looks very clean and simple to use.<p>Do you plan on supporting non-JSON data types for insertion? For example, inserting CSV files, parquet files, Avro or Protobuf messages?</div><br/><div id="38045314" class="c"><input type="checkbox" id="c-38045314" checked=""/><div class="controls bullet"><span class="by">memset</span><span>|</span><a href="#38045290">parent</a><span>|</span><a href="#38046421">next</a><span>|</span><label class="collapse" for="c-38045314">[-]</label><label class="expand" for="c-38045314">[3 more]</label></div><br/><div class="children"><div class="content">Yes! Have an issue for that <a href="https:&#x2F;&#x2F;github.com&#x2F;scratchdata&#x2F;ScratchDB&#x2F;issues&#x2F;19">https:&#x2F;&#x2F;github.com&#x2F;scratchdata&#x2F;ScratchDB&#x2F;issues&#x2F;19</a><p>What would you want it to look like?</div><br/><div id="38045544" class="c"><input type="checkbox" id="c-38045544" checked=""/><div class="controls bullet"><span class="by">NortySpock</span><span>|</span><a href="#38045290">root</a><span>|</span><a href="#38045314">parent</a><span>|</span><a href="#38046421">next</a><span>|</span><label class="collapse" for="c-38045544">[-]</label><label class="expand" for="c-38045544">[2 more]</label></div><br/><div class="children"><div class="content">Not the parent poster, but I wouldn&#x27;t race to solve the problem via supporting many more connectors that require lots of config options. You&#x27;ll just spend time supporting lots of connectors.<p>Instead, recommend that users use another (connector heavy) tool to get data in -- my mind jumped to using Benthos to convert a CSV or parquet file (or any other input stream) into a series of JSON calls -- and just ask users to hammer ingestion requests at your server. From there, your job is &quot;just&quot; to handle JSON ingestion as fast as you can, rather than maintain many connectors.<p>If JSON becomes a problem, then find exactly one other well-defined file format for bulk data loads (parquet, perhaps?), and support that.<p><i>When I saw this submission, I think I fell in love. JSON to get data in; SQL to get data out; what could be simpler?</i></div><br/><div id="38045740" class="c"><input type="checkbox" id="c-38045740" checked=""/><div class="controls bullet"><span class="by">pitah1</span><span>|</span><a href="#38045290">root</a><span>|</span><a href="#38045544">parent</a><span>|</span><a href="#38046421">next</a><span>|</span><label class="collapse" for="c-38045740">[-]</label><label class="expand" for="c-38045740">[1 more]</label></div><br/><div class="children"><div class="content">Agreed. I guess it depends on the target market. If your target is small to medium sized businesses, this is great to start doing analytics. But for large organisations, they generally have ETL&#x2F;ELT jobs that do all the extraction from data sources to push to an analytics store or save in some format that is performant for analytics and storage (i.e. parquet). I&#x27;m also not sure how many data visualisation tools support API endpoints for query serving.</div><br/></div></div></div></div></div></div></div></div><div id="38046421" class="c"><input type="checkbox" id="c-38046421" checked=""/><div class="controls bullet"><span class="by">OmarAssadi</span><span>|</span><a href="#38045290">prev</a><span>|</span><a href="#38043348">next</a><span>|</span><label class="collapse" for="c-38046421">[-]</label><label class="expand" for="c-38046421">[2 more]</label></div><br/><div class="children"><div class="content">&gt; The whole thing runs on regular servers. Hetzner has become our cloud of choice, along with Backblaze B2 and SQS. It is written in Go. From an architecture perspective I try to keep things simple - want folks to make economical use of their servers.<p>Cool, glad to see Hetzner, at least presumably for compute, rather than the almost routine, absurdly expensive, mega cloud providers.<p>I have a few questions if you&#x27;ve got time.<p>1. What made you pick Hetzner in particular, and did you evaluate any of their primary competitors? (e.g., OVH, etc)<p>2. In your $100&#x2F;month figure, did you decide to go with dedicated servers or the &quot;cloud&quot; VPS line? If the latter, was there any particular reason over going with the bare-metal offerings?<p>3. Are you making use of Hetzner&#x27;s U.S. servers as well or is everything currently in Europe (or vice-versa)?<p>4. Was there any particular reason for choosing B2 and SQS as opposed to self-hosting object-storage on the SX servers?<p>Normally, I wouldn&#x27;t even wonder why someone wouldn&#x27;t want the burden of more infrastructure. But given the choice of going with relatively unmanaged Hetzner servers, presumably self-hosting clickhouse, etc, and then with your compute provider also happening to offer fairly large storage servers on the cheap, I might&#x27;ve been tempted to cut out the additional providers and DIY it:<p>- less costly for large amounts of data<p>- zero lock-in [1]<p>- fewer companies to deal with<p><pre><code>  - likely better negotiating power with Hetzner when the time comes if a bigger percentage of your overhead is with them as opposed to spread out across three providers

  - fewer points of failure; if the Hetzner servers are down, I would assume you&#x27;re in trouble anyway, so perhaps keeping [most] of your eggs on the same network might not be as bad as it sounds

  - presumably better latency and bandwidth + the ability to communicate over a private network [2]
</code></pre>
5. I see the license is AGPL. But I don&#x27;t see the usual &quot;you must dual-license all contributions under MIT&#x2F;BSD&#x2F;ISC as well [so that only we can re-license the project]&quot; nor &quot;before contributing, sign this agreement transferring copyright [and your first born child]&quot;.<p>Was this just an oversight, or do you intend to be one of the few SaaS companies that really truly is open-source rather than <i>&quot;open-source&quot;</i> [until peopled are locked-in] and then going <i>&quot;open&quot;</i>-core? If the latter, then awesome -- cool to see.<p>6. Any regrets, disasters, or lessons learned so far? Usually, I find these stories the most interesting but unfortunately too few are willing to share.<p>---<p>[1]: I know B2 provides a relatively standard, at this point, S3-compatible API and everything as well. But I think there is also still something to be said about a somewhat Juche-esque approach to infrastructure, wherein should prices rise, contracts change, service degrades, or whatever else, you&#x27;d have the ability to almost immediately switch at a moment&#x27;s notice to literally anyone else who can lease you a box with some hard drives or any colo provider.<p>[2]: This goes out the window somewhat if you&#x27;re using the VPS line and American servers, though.</div><br/><div id="38046592" class="c"><input type="checkbox" id="c-38046592" checked=""/><div class="controls bullet"><span class="by">memset</span><span>|</span><a href="#38046421">parent</a><span>|</span><a href="#38043348">next</a><span>|</span><label class="collapse" for="c-38046592">[-]</label><label class="expand" for="c-38046592">[1 more]</label></div><br/><div class="children"><div class="content">Really interesting question(s)! Will try to answer the gist.<p>First, the system is designed for users to be able to drop in whatever hardware they want. So your questions are around my initial deployment options. These will certainly change in the future.<p>I chose Hetzner because of cost. I will probably end up using other providers in the future but Hetzner let me begin this experiment without burning my runway.<p>I use metal servers for Clickhouse, and small cloud boxes and LBs for the API. It happens I&#x27;m using US-based cloud servers because that&#x27;s where my users are.<p>I&#x27;m using B2 + SQS because I did not want to take on sysadmin for those components. They are not performance-sensitive. Using B2 at $0.006&#x2F;GB vs managing minio on an SX server at $0.001&#x2F;GB was acceptable to me :)<p>Why use regular servers for the API instead of fly.io? Because the API writes data to disk, and then bulk loads it to clickhouse. This means I needed durable and reliable disk, which you can only have with actual VMs. I didn&#x27;t want the process to be randomly SIGKILL&#x27;d since the process shuts down safely to avoid data loss, and I didn&#x27;t want the risk of ephemeral storage. So to control all this I have to run the HTTP servers myself.<p>I might experiment with a PaaS for this, but it was easy enough to just set up an init script to run the daemon.<p>re: negotiating power - that conversation only happens when I have volume, at which point I will be able to negotiate with any provider.<p>re: points of failure&#x2F;latency - this will continually change: the deployment strategy for today will be different than when I&#x27;m managing 100s of TB of data across thousands of users. The main focus is to make the system flexible to handle different topologies and to be able to change providers by updating a configuration.<p>Thank you!</div><br/></div></div></div></div><div id="38043348" class="c"><input type="checkbox" id="c-38043348" checked=""/><div class="controls bullet"><span class="by">jed_sanders12</span><span>|</span><a href="#38046421">prev</a><span>|</span><a href="#38041892">next</a><span>|</span><label class="collapse" for="c-38043348">[-]</label><label class="expand" for="c-38043348">[5 more]</label></div><br/><div class="children"><div class="content">This looks great. I have one question. When you are automatically creating tables, how do you choose primary keys order for clickhouse table?</div><br/><div id="38043402" class="c"><input type="checkbox" id="c-38043402" checked=""/><div class="controls bullet"><span class="by">memset</span><span>|</span><a href="#38043348">parent</a><span>|</span><a href="#38041892">next</a><span>|</span><label class="collapse" for="c-38043402">[-]</label><label class="expand" for="c-38043402">[4 more]</label></div><br/><div class="children"><div class="content">Great question. Each new table is given a __row_id column which ScratchDB populates and that is the default primary key.<p>Then, as data is added, I look at the cardinality of each column and set an ORDER BY appropriately. The goal (implementation in progress, not launched yet) is for ScratchDB to do this automatically - we should be able to automatically look at both the data in your table and queries and analytically come up with an appropriate sorting key.</div><br/><div id="38043519" class="c"><input type="checkbox" id="c-38043519" checked=""/><div class="controls bullet"><span class="by">jed_sanders12</span><span>|</span><a href="#38043348">root</a><span>|</span><a href="#38043402">parent</a><span>|</span><a href="#38041892">next</a><span>|</span><label class="collapse" for="c-38043519">[-]</label><label class="expand" for="c-38043519">[3 more]</label></div><br/><div class="children"><div class="content">This sounds like a very interesting problem. How costly is it to modify order by after data has been loaded into the table? It sounds expensive because it should reorder the data after changing order by.</div><br/><div id="38043627" class="c"><input type="checkbox" id="c-38043627" checked=""/><div class="controls bullet"><span class="by">memset</span><span>|</span><a href="#38043348">root</a><span>|</span><a href="#38043519">parent</a><span>|</span><a href="#38041892">next</a><span>|</span><label class="collapse" for="c-38043627">[-]</label><label class="expand" for="c-38043627">[2 more]</label></div><br/><div class="children"><div class="content">It is not a cheap operation, I basically create a new table and then &quot;INSERT INTO SELECT...&quot; Then again, it isn&#x27;t something you typically need to do a lot.</div><br/><div id="38043730" class="c"><input type="checkbox" id="c-38043730" checked=""/><div class="controls bullet"><span class="by">jed_sanders12</span><span>|</span><a href="#38043348">root</a><span>|</span><a href="#38043627">parent</a><span>|</span><a href="#38041892">next</a><span>|</span><label class="collapse" for="c-38043730">[-]</label><label class="expand" for="c-38043730">[1 more]</label></div><br/><div class="children"><div class="content">Thank you for the answers, and best of luck with this product.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="38041892" class="c"><input type="checkbox" id="c-38041892" checked=""/><div class="controls bullet"><span class="by">esafak</span><span>|</span><a href="#38043348">prev</a><span>|</span><a href="#38042460">next</a><span>|</span><label class="collapse" for="c-38041892">[-]</label><label class="expand" for="c-38041892">[3 more]</label></div><br/><div class="children"><div class="content">TiDB is an HTAP whose OLAP component (TiFlash) was based on Clickhouse: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=23584022">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=23584022</a><p>If you have analyzed the competition, what are your selling points? Benchmarks welcome. Thank you!</div><br/><div id="38042422" class="c"><input type="checkbox" id="c-38042422" checked=""/><div class="controls bullet"><span class="by">memset</span><span>|</span><a href="#38041892">parent</a><span>|</span><a href="#38045291">next</a><span>|</span><label class="collapse" for="c-38042422">[-]</label><label class="expand" for="c-38042422">[1 more]</label></div><br/><div class="children"><div class="content">I haven&#x27;t seen TiDB before - thanks for sharing. I honestly haven&#x27;t spent tons of much time analyzing other databases (there are so many!) but I haven&#x27;t seen much out there which tries to be &quot;Firebase for OLAP&quot; - that is, make it so easy that a developer who maybe doesn&#x27;t have time to learn Clickhouse can be effective with it. That&#x27;s the most important goal of this project: lower the barrier for people who need to use a columnar data structure to be able to do so [without thinking too much about it] and get back to solving their engineering problems.</div><br/></div></div><div id="38045291" class="c"><input type="checkbox" id="c-38045291" checked=""/><div class="controls bullet"><span class="by">gregwebs</span><span>|</span><a href="#38041892">parent</a><span>|</span><a href="#38042422">prev</a><span>|</span><a href="#38042460">next</a><span>|</span><label class="collapse" for="c-38045291">[-]</label><label class="expand" for="c-38045291">[1 more]</label></div><br/><div class="children"><div class="content">TiFlash is designed for TiDB users and seamlessly moving between inserting row data and querying column storage.</div><br/></div></div></div></div><div id="38042460" class="c"><input type="checkbox" id="c-38042460" checked=""/><div class="controls bullet"><span class="by">ddorian43</span><span>|</span><a href="#38041892">prev</a><span>|</span><a href="#38042522">next</a><span>|</span><label class="collapse" for="c-38042460">[-]</label><label class="expand" for="c-38042460">[4 more]</label></div><br/><div class="children"><div class="content">Why is your storage 10X that of bigquery? How does your compute price compare to bigtable?<p>Edit: bigtable-&gt;bigquery</div><br/><div id="38042927" class="c"><input type="checkbox" id="c-38042927" checked=""/><div class="controls bullet"><span class="by">memset</span><span>|</span><a href="#38042460">parent</a><span>|</span><a href="#38042522">next</a><span>|</span><label class="collapse" for="c-38042927">[-]</label><label class="expand" for="c-38042927">[3 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t bill separately for the compute vs storage the way bigtable does. The pricing per GB of data is inclusive of compute. The goal is for pricing to be modeled similarly to DynamoDB - just pay for what you use. The other way I charge is by query wall time - so a 30s query will cost you more than a 500ms one.<p>I haven&#x27;t used bigtable but it seems like the minimum charge is on the order of $300 before you have any data. With ScratchDB, the minimum charge is $10 for 30 GB.<p>Additionally, on average, data has a 25% compression ratio. So if your 1 TB of data only takes up 250GB, you only pay for that.<p>Bigtable isn&#x27;t OLAP, so you would not use them for the same data. This competes more directly with GCP&#x27;s BigQuery.<p>Finally, I&#x27;m interested in pricing feedback! The goal is to be able to sustain the development of this, so I want to do what makes sense.</div><br/><div id="38042996" class="c"><input type="checkbox" id="c-38042996" checked=""/><div class="controls bullet"><span class="by">ddorian43</span><span>|</span><a href="#38042460">root</a><span>|</span><a href="#38042927">parent</a><span>|</span><a href="#38042522">next</a><span>|</span><label class="collapse" for="c-38042996">[-]</label><label class="expand" for="c-38042996">[2 more]</label></div><br/><div class="children"><div class="content">I wrote wrong, I meant bigquery, sorry. It&#x27;s 9x of bigquery.</div><br/><div id="38043219" class="c"><input type="checkbox" id="c-38043219" checked=""/><div class="controls bullet"><span class="by">memset</span><span>|</span><a href="#38042460">root</a><span>|</span><a href="#38042996">parent</a><span>|</span><a href="#38042522">next</a><span>|</span><label class="collapse" for="c-38043219">[-]</label><label class="expand" for="c-38043219">[1 more]</label></div><br/><div class="children"><div class="content">I haven&#x27;t calculated the break-even point for bigquery vs scratchdb. It would be impossible to do so, as I&#x27;d need to know the number of rows bigquery will scan in order to do an estimation in advance. Also what is a &quot;slot-hour&quot;?<p>That is why I chose pricing uses units of &quot;GB&quot; and &quot;hours&quot; for storage and compute - those are things you can more easily observe.<p>It is a good question, though, and perhaps I can do an experiment and write a blog post using example data showing the differences. I might be surprised at how efficient bigquery is!</div><br/></div></div></div></div></div></div></div></div><div id="38042522" class="c"><input type="checkbox" id="c-38042522" checked=""/><div class="controls bullet"><span class="by">wkoszek</span><span>|</span><a href="#38042460">prev</a><span>|</span><label class="collapse" for="c-38042522">[-]</label><label class="expand" for="c-38042522">[3 more]</label></div><br/><div class="children"><div class="content">ScratchDB has save my business and it&#x27;s awesome. I think if you need a columnar store, you should really try these guys</div><br/><div id="38042966" class="c"><input type="checkbox" id="c-38042966" checked=""/><div class="controls bullet"><span class="by">memset</span><span>|</span><a href="#38042522">parent</a><span>|</span><a href="#38042557">next</a><span>|</span><label class="collapse" for="c-38042966">[-]</label><label class="expand" for="c-38042966">[1 more]</label></div><br/><div class="children"><div class="content">Thank you - really excited about what you&#x27;re building too!</div><br/></div></div></div></div></div></div></div></div></div></body></html>