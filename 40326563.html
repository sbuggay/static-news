<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1715504454133" as="style"/><link rel="stylesheet" href="styles.css?v=1715504454133"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/francisrstokes/githublog/blob/main/2024/5/10/cordic.md">Why the CORDIC algorithm lives rent-free in my head</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>todsacerdoti</span> | <span>67 comments</span></div><br/><div><div id="40330151" class="c"><input type="checkbox" id="c-40330151" checked=""/><div class="controls bullet"><span class="by">apitman</span><span>|</span><a href="#40332926">next</a><span>|</span><label class="collapse" for="c-40330151">[-]</label><label class="expand" for="c-40330151">[10 more]</label></div><br/><div class="children"><div class="content">While the author mentions this is mostly applicable to things like FPGAs, there&#x27;s also an application in gamedev (or any distributed physics simulation). Floating point calculations are tricky to get deterministic across platforms[0]. One solution is to skip floats entirely and implement a fixed-point physics engine. You&#x27;d need something like CORDIC to implement all the trig functionality.<p>I started working on such a thing as a fun side project a few years ago but never finished it. One of these days I hope to get back to it.<p>[0]: <a href="https:&#x2F;&#x2F;randomascii.wordpress.com&#x2F;2013&#x2F;07&#x2F;16&#x2F;floating-point-determinism&#x2F;" rel="nofollow">https:&#x2F;&#x2F;randomascii.wordpress.com&#x2F;2013&#x2F;07&#x2F;16&#x2F;floating-point-...</a></div><br/><div id="40330591" class="c"><input type="checkbox" id="c-40330591" checked=""/><div class="controls bullet"><span class="by">boulos</span><span>|</span><a href="#40330151">parent</a><span>|</span><a href="#40330596">next</a><span>|</span><label class="collapse" for="c-40330591">[-]</label><label class="expand" for="c-40330591">[4 more]</label></div><br/><div class="children"><div class="content">That blog post is now a decade old, but includes an important quote:<p>&gt; The IEEE standard does guarantee some things. It guarantees more than the floating-point-math-is-mystical crowd realizes, but less than some programmers might think.<p>Summarizing the blog post, it highlights a few things though some less clearly than I would like:<p><pre><code>  * x87 was wonky

  * You need to ensure rounding modes, flush-to-zero, etc. are consistently set

  * Some older processors don&#x27;t have FMA

  * Approximate instructions (mmsqrtps et al.) don&#x27;t have a consistent spec

  * Compilers may reassociate expressions

</code></pre>
For <i>small</i> routines and self-written libraries, it&#x27;s straightforward, if painful to ensure you avoid all of that.<p>Briefly mentioned in the blog post is IEEE-754 (2008) made the spec more explicit, and effectively assumed the death of x87. It&#x27;s 2024 now, so you can definitely avoid x87. Similarly, FMA is part of the IEEE-754 2008 spec, and has been built into all modern processors since (Haswell and later on Intel).<p>There are still cross-architecture differences like 8-wide AVX2 vs 4-wide NEON that can trip you up, but if you are writing assembly or intrinsics or just C that  inspect with Compiler Explorer or objdump, you can look at the output and say &quot;Yep, that&#x27;ll be consistent&quot;.</div><br/><div id="40330747" class="c"><input type="checkbox" id="c-40330747" checked=""/><div class="controls bullet"><span class="by">Someone</span><span>|</span><a href="#40330151">root</a><span>|</span><a href="#40330591">parent</a><span>|</span><a href="#40330596">next</a><span>|</span><label class="collapse" for="c-40330747">[-]</label><label class="expand" for="c-40330747">[3 more]</label></div><br/><div class="children"><div class="content">&gt; but if you are writing assembly or intrinsics or just C that inspect with Compiler Explorer or objdump, you can look at the output and say &quot;Yep, that&#x27;ll be consistent&quot;.<p>Surely people have written tooling for those checks for various CPUs?<p>Also, is it that ‘simple’? Reading <a href="https:&#x2F;&#x2F;github.com&#x2F;llvm&#x2F;llvm-project&#x2F;issues&#x2F;62479">https:&#x2F;&#x2F;github.com&#x2F;llvm&#x2F;llvm-project&#x2F;issues&#x2F;62479</a>, calculations that the compiler does and that only end up in the executable as constants can make results different between architectures or compilers (possibly even compiler runs, if it runs multi-threaded and constant folding order depends on timing, but I find it hard to imagine how exactly that would happen).<p>So, you’d want to check constants in the code, too, but then, there’s no guarantee that compilers do the same constant folding. You can try to get more consistent by being really diligent in using <i>constexpr</i>, but that doesn’t guarantee that, either.</div><br/><div id="40331018" class="c"><input type="checkbox" id="c-40331018" checked=""/><div class="controls bullet"><span class="by">mjcohen</span><span>|</span><a href="#40330151">root</a><span>|</span><a href="#40330747">parent</a><span>|</span><a href="#40330929">next</a><span>|</span><label class="collapse" for="c-40331018">[-]</label><label class="expand" for="c-40331018">[1 more]</label></div><br/><div class="children"><div class="content">Years ago, I was programming in Ada and ran across a case where the value of a constant in a program differed from the same constant being converted at runtime. Took a while to track that one down.</div><br/></div></div><div id="40330929" class="c"><input type="checkbox" id="c-40330929" checked=""/><div class="controls bullet"><span class="by">boulos</span><span>|</span><a href="#40330151">root</a><span>|</span><a href="#40330747">parent</a><span>|</span><a href="#40331018">prev</a><span>|</span><a href="#40330596">next</a><span>|</span><label class="collapse" for="c-40330929">[-]</label><label class="expand" for="c-40330929">[1 more]</label></div><br/><div class="children"><div class="content">The same reasoning applies though. The compiler is just another program. Outside of doing constant folding on things that are unspec&#x27;ed or not required (like mmsqrtps and most transcendentals), you should get consistent results even between architectures.<p>Of course the specific line linked to in that GH issue <i>is</i> showing that LLVM will attempt constant folding of various trig functions:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;llvm&#x2F;llvm-project&#x2F;blob&#x2F;faa43a80f70c639f40021a175c60857bdcf7cc1f&#x2F;llvm&#x2F;lib&#x2F;Analysis&#x2F;ConstantFolding.cpp#L2407">https:&#x2F;&#x2F;github.com&#x2F;llvm&#x2F;llvm-project&#x2F;blob&#x2F;faa43a80f70c639f40...</a><p>but the IEEE-754 spec does also <i>recommend</i> correctly rounded results for those (<a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;IEEE_754#Recommended_operations" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;IEEE_754#Recommended_operation...</a>).<p>The majority of code I&#x27;m talking about though uses constants that are some long, explicit number, and doesn&#x27;t do any math on them that would then be amenable to constant folding itself.<p>That said, lines like:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;llvm&#x2F;llvm-project&#x2F;blob&#x2F;faa43a80f70c639f40021a175c60857bdcf7cc1f&#x2F;llvm&#x2F;lib&#x2F;Analysis&#x2F;ConstantFolding.cpp#L1045">https:&#x2F;&#x2F;github.com&#x2F;llvm&#x2F;llvm-project&#x2F;blob&#x2F;faa43a80f70c639f40...</a><p>are more worrying, since that may differ from what people expect dynamically (though the underlying stuff supports different denormal rules).<p>Either way, thanks for highlighting this! Clearly the answer is to just use LLVM&#x2F;clang regardless of backend :).</div><br/></div></div></div></div></div></div><div id="40330596" class="c"><input type="checkbox" id="c-40330596" checked=""/><div class="controls bullet"><span class="by">teleforce</span><span>|</span><a href="#40330151">parent</a><span>|</span><a href="#40330591">prev</a><span>|</span><a href="#40332926">next</a><span>|</span><label class="collapse" for="c-40330596">[-]</label><label class="expand" for="c-40330596">[5 more]</label></div><br/><div class="children"><div class="content">The author did mention about fixed point was very popular for gamedev before floating point becoming popular due the increased in hardware capability, and most likely CORDIC was being used as well together with fixed point.<p>&gt; In fact, before IEEE 754 became the popular standard that it is today, fixed point was used all the time (go and ask any gamedev who worked on stuff between 1980 and 2000ish and they&#x27;ll tell you all about it).</div><br/><div id="40331405" class="c"><input type="checkbox" id="c-40331405" checked=""/><div class="controls bullet"><span class="by">apitman</span><span>|</span><a href="#40330151">root</a><span>|</span><a href="#40330596">parent</a><span>|</span><a href="#40330746">next</a><span>|</span><label class="collapse" for="c-40331405">[-]</label><label class="expand" for="c-40331405">[1 more]</label></div><br/><div class="children"><div class="content">I believe that was mostly for performance reasons, not determinism, right?</div><br/></div></div><div id="40330746" class="c"><input type="checkbox" id="c-40330746" checked=""/><div class="controls bullet"><span class="by">aappleby</span><span>|</span><a href="#40330151">root</a><span>|</span><a href="#40330596">parent</a><span>|</span><a href="#40331405">prev</a><span>|</span><a href="#40332926">next</a><span>|</span><label class="collapse" for="c-40330746">[-]</label><label class="expand" for="c-40330746">[3 more]</label></div><br/><div class="children"><div class="content">Was gamedev between 1980 and 2000ish, can confirm. PS1 had no floating point unit.</div><br/><div id="40331655" class="c"><input type="checkbox" id="c-40331655" checked=""/><div class="controls bullet"><span class="by">TuringTourist</span><span>|</span><a href="#40330151">root</a><span>|</span><a href="#40330746">parent</a><span>|</span><a href="#40332926">next</a><span>|</span><label class="collapse" for="c-40331655">[-]</label><label class="expand" for="c-40331655">[2 more]</label></div><br/><div class="children"><div class="content">This was the cause of the signature jiggly textures that were pervasive in PS1 games</div><br/><div id="40332429" class="c"><input type="checkbox" id="c-40332429" checked=""/><div class="controls bullet"><span class="by">fayalalebrun</span><span>|</span><a href="#40330151">root</a><span>|</span><a href="#40331655">parent</a><span>|</span><a href="#40332926">next</a><span>|</span><label class="collapse" for="c-40332429">[-]</label><label class="expand" for="c-40332429">[1 more]</label></div><br/><div class="children"><div class="content">This is a common misconception, but is not the case. For example, look at the Voodoo 1, 2, and 3, which also used fixed point numbers internally but did not suffer from this problem.<p>The real issue is that the PS1 has no subpixel precision. In other words, it will round a triangle coordinates to the nearest integers.<p>Likely the reason why they did this is because then you can completely avoid any division and multiplication hardware, with integer start and end coordinates line rasterization can be done completely with addition and comparisons.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="40332926" class="c"><input type="checkbox" id="c-40332926" checked=""/><div class="controls bullet"><span class="by">larsrc</span><span>|</span><a href="#40330151">prev</a><span>|</span><a href="#40330909">next</a><span>|</span><label class="collapse" for="c-40332926">[-]</label><label class="expand" for="c-40332926">[1 more]</label></div><br/><div class="children"><div class="content">Some related articles with hardware implementations:
<a href="https:&#x2F;&#x2F;arxiv.org&#x2F;pdf&#x2F;2211.04053" rel="nofollow">https:&#x2F;&#x2F;arxiv.org&#x2F;pdf&#x2F;2211.04053</a>
<a href="https:&#x2F;&#x2F;hal.science&#x2F;hal-01327460&#x2F;document" rel="nofollow">https:&#x2F;&#x2F;hal.science&#x2F;hal-01327460&#x2F;document</a>
<a href="https:&#x2F;&#x2F;archive.ll.mit.edu&#x2F;HPEC&#x2F;agendas&#x2F;proc05&#x2F;Day_1&#x2F;Abstracts&#x2F;1150_Johnson_A.pdf" rel="nofollow">https:&#x2F;&#x2F;archive.ll.mit.edu&#x2F;HPEC&#x2F;agendas&#x2F;proc05&#x2F;Day_1&#x2F;Abstrac...</a><p>I would love to see how it compares to regular software and hardware trigonometric implementations on various kinds of hardware through the ages.</div><br/></div></div><div id="40330909" class="c"><input type="checkbox" id="c-40330909" checked=""/><div class="controls bullet"><span class="by">teleforce</span><span>|</span><a href="#40332926">prev</a><span>|</span><a href="#40330448">next</a><span>|</span><label class="collapse" for="c-40330909">[-]</label><label class="expand" for="c-40330909">[2 more]</label></div><br/><div class="children"><div class="content">Fun facts, in addition to sine and cosine calculation and generation, CORDIC can also be used for many operations including log, exponent, square root, vector magnitude, polar-cartesian conversion and vector rotation. Spoiler alerts, the authors provided the teaser regarding these propects in the conclusions.<p>I&#x27;ve got the feeling that by using quaternion instead of conventional orthonormal matrices, CORDIC based operations can be executed more efficiently (less compute cycles and memory) and effectively (less errors) [1].<p>[1] CORDIC Framework for Quaternion-based Joint Angle Computation to Classify Arm Movements:<p><a href="https:&#x2F;&#x2F;core.ac.uk&#x2F;works&#x2F;8439118" rel="nofollow">https:&#x2F;&#x2F;core.ac.uk&#x2F;works&#x2F;8439118</a></div><br/><div id="40330917" class="c"><input type="checkbox" id="c-40330917" checked=""/><div class="controls bullet"><span class="by">nimish</span><span>|</span><a href="#40330909">parent</a><span>|</span><a href="#40330448">next</a><span>|</span><label class="collapse" for="c-40330917">[-]</label><label class="expand" for="c-40330917">[1 more]</label></div><br/><div class="children"><div class="content">It can be extended to arbitrary Lie groups IIRC</div><br/></div></div></div></div><div id="40330448" class="c"><input type="checkbox" id="c-40330448" checked=""/><div class="controls bullet"><span class="by">rmorey</span><span>|</span><a href="#40330909">prev</a><span>|</span><a href="#40330637">next</a><span>|</span><label class="collapse" for="c-40330448">[-]</label><label class="expand" for="c-40330448">[2 more]</label></div><br/><div class="children"><div class="content">I remember in high school precalc, we learned about the Taylor series, and my teacher told us that it was how trig functions were actually implemented on calculators. Well I looked it up and found that it was actually CORDIC, and went and had some fun implementing it in TI Basic</div><br/><div id="40332805" class="c"><input type="checkbox" id="c-40332805" checked=""/><div class="controls bullet"><span class="by">rossant</span><span>|</span><a href="#40330448">parent</a><span>|</span><a href="#40330637">next</a><span>|</span><label class="collapse" for="c-40332805">[-]</label><label class="expand" for="c-40332805">[1 more]</label></div><br/><div class="children"><div class="content">Well, are there _any_ calculators out there that use Taylor expansions?</div><br/></div></div></div></div><div id="40330637" class="c"><input type="checkbox" id="c-40330637" checked=""/><div class="controls bullet"><span class="by">the__alchemist</span><span>|</span><a href="#40330448">prev</a><span>|</span><a href="#40328932">next</a><span>|</span><label class="collapse" for="c-40330637">[-]</label><label class="expand" for="c-40330637">[5 more]</label></div><br/><div class="children"><div class="content">Side note for 2023: Some modern MCUs are low cost, but have FPUs. A good example is the STM32G4. So, unlike on an M0 MCU or w&#x2F;e, you can freely use  f32, if you don&#x27;t want fixed point. And you can get these for ~$1-2 &#x2F; MCU.<p>That said... The G4 also has a hardware CORDIC peripheral that implements this algo for fixed-point uses. Is this mainly to avoid floating point precision losses? You program it using registers, but aren&#x27;t implementing CORDIC yourself on the CPU; dedicated hardware inside the IC does it.</div><br/><div id="40332025" class="c"><input type="checkbox" id="c-40332025" checked=""/><div class="controls bullet"><span class="by">ddingus</span><span>|</span><a href="#40330637">parent</a><span>|</span><a href="#40331879">next</a><span>|</span><label class="collapse" for="c-40332025">[-]</label><label class="expand" for="c-40332025">[1 more]</label></div><br/><div class="children"><div class="content">The second Parallax Propeller chip has a CORDIC engine in silicon.  It&#x27;s fast, and handles 64bit intermediate products, which makes the divide and trig stuff more than adequate precision for most things.  One can always increase precision in software too.<p>I was late to the game learning about CORDIC.  I had used fixed point a lot in 8 and 16 bit assembly land for performance, and determinism.<p>When I found out about it, I was stunned!  It was fast, and only required basic math capability to be useful.</div><br/></div></div><div id="40331879" class="c"><input type="checkbox" id="c-40331879" checked=""/><div class="controls bullet"><span class="by">kragen</span><span>|</span><a href="#40330637">parent</a><span>|</span><a href="#40332025">prev</a><span>|</span><a href="#40328932">next</a><span>|</span><label class="collapse" for="c-40331879">[-]</label><label class="expand" for="c-40331879">[3 more]</label></div><br/><div class="children"><div class="content">the cheapest cortex-m4fs in stock on digi-key, trying to omit duplicates, are the 3-dollar nuvoton m481le8ae <a href="https:&#x2F;&#x2F;www.digikey.com&#x2F;en&#x2F;products&#x2F;detail&#x2F;nuvoton-technology-corporation&#x2F;M481LE8AE&#x2F;12337382" rel="nofollow">https:&#x2F;&#x2F;www.digikey.com&#x2F;en&#x2F;products&#x2F;detail&#x2F;nuvoton-technolog...</a>, the 3-dollar maxim max32660 <a href="https:&#x2F;&#x2F;www.digikey.com&#x2F;en&#x2F;products&#x2F;detail&#x2F;analog-devices-inc-maxim-integrated&#x2F;MAX32660GWE-T&#x2F;8742640" rel="nofollow">https:&#x2F;&#x2F;www.digikey.com&#x2F;en&#x2F;products&#x2F;detail&#x2F;analog-devices-in...</a>, and the 5-dollar atmel atsamd51 <a href="https:&#x2F;&#x2F;www.digikey.com&#x2F;en&#x2F;products&#x2F;detail&#x2F;microchip-technology&#x2F;ATSAMD51G18A-MU&#x2F;7390367" rel="nofollow">https:&#x2F;&#x2F;www.digikey.com&#x2F;en&#x2F;products&#x2F;detail&#x2F;microchip-technol...</a>.  their cheapest stm32g4 is the stm32g441kbt6 which rounds to 4 dollars <a href="https:&#x2F;&#x2F;www.digikey.com&#x2F;en&#x2F;products&#x2F;detail&#x2F;microchip-technology&#x2F;ATSAMD51G18A-MU&#x2F;7390367" rel="nofollow">https:&#x2F;&#x2F;www.digikey.com&#x2F;en&#x2F;products&#x2F;detail&#x2F;microchip-technol...</a><p>where do you get them for under 2 dollars?<p>(digi-key does list the nuvoton chip for barely under 2 dollars in quantity 500)</div><br/><div id="40331966" class="c"><input type="checkbox" id="c-40331966" checked=""/><div class="controls bullet"><span class="by">the__alchemist</span><span>|</span><a href="#40330637">root</a><span>|</span><a href="#40331879">parent</a><span>|</span><a href="#40328932">next</a><span>|</span><label class="collapse" for="c-40331966">[-]</label><label class="expand" for="c-40331966">[2 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;jlcpcb.com&#x2F;partdetail&#x2F;Stmicroelectronics-STM32G431CBU6&#x2F;C529356" rel="nofollow">https:&#x2F;&#x2F;jlcpcb.com&#x2F;partdetail&#x2F;Stmicroelectronics-STM32G431CB...</a><p>JLC: $2.1 for qty=1. $1.3 at 1k qty.<p>Loads of stock. It&#x27;s a low flash and low RAM variant, but sufficient for some purposes. 170Mhz CPU with many onboard periphs.</div><br/><div id="40332119" class="c"><input type="checkbox" id="c-40332119" checked=""/><div class="controls bullet"><span class="by">kragen</span><span>|</span><a href="#40330637">root</a><span>|</span><a href="#40331966">parent</a><span>|</span><a href="#40328932">next</a><span>|</span><label class="collapse" for="c-40332119">[-]</label><label class="expand" for="c-40332119">[1 more]</label></div><br/><div class="children"><div class="content">fantastic, thanks!</div><br/></div></div></div></div></div></div></div></div><div id="40328932" class="c"><input type="checkbox" id="c-40328932" checked=""/><div class="controls bullet"><span class="by">aftbit</span><span>|</span><a href="#40330637">prev</a><span>|</span><a href="#40327726">next</a><span>|</span><label class="collapse" for="c-40328932">[-]</label><label class="expand" for="c-40328932">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Now, it&#x27;s fairly obvious that rotating by say 22.75˚ is the same as rotating by 45˚ and then -22.5˚ - i.e. we can break up a rotation into smaller parts, with both positive and negative components.<p>Wouldn&#x27;t that be rotating by 22.5°? Is this an error in the article or my understanding?</div><br/><div id="40329021" class="c"><input type="checkbox" id="c-40329021" checked=""/><div class="controls bullet"><span class="by">AlexSW</span><span>|</span><a href="#40328932">parent</a><span>|</span><a href="#40327726">next</a><span>|</span><label class="collapse" for="c-40329021">[-]</label><label class="expand" for="c-40329021">[2 more]</label></div><br/><div class="children"><div class="content">An error in the article.</div><br/><div id="40330638" class="c"><input type="checkbox" id="c-40330638" checked=""/><div class="controls bullet"><span class="by">aftbit</span><span>|</span><a href="#40328932">root</a><span>|</span><a href="#40329021">parent</a><span>|</span><a href="#40327726">next</a><span>|</span><label class="collapse" for="c-40330638">[-]</label><label class="expand" for="c-40330638">[1 more]</label></div><br/><div class="children"><div class="content">I made a PR<p><a href="https:&#x2F;&#x2F;github.com&#x2F;francisrstokes&#x2F;githublog&#x2F;pull&#x2F;7">https:&#x2F;&#x2F;github.com&#x2F;francisrstokes&#x2F;githublog&#x2F;pull&#x2F;7</a></div><br/></div></div></div></div></div></div><div id="40327726" class="c"><input type="checkbox" id="c-40327726" checked=""/><div class="controls bullet"><span class="by">1oooqooq</span><span>|</span><a href="#40328932">prev</a><span>|</span><a href="#40331103">next</a><span>|</span><label class="collapse" for="c-40327726">[-]</label><label class="expand" for="c-40327726">[6 more]</label></div><br/><div class="children"><div class="content">so, it&#x27;s a <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Farey_sequence" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Farey_sequence</a> (aka mediant, aka naive fraction sum for approximation) but for angles?</div><br/><div id="40327901" class="c"><input type="checkbox" id="c-40327901" checked=""/><div class="controls bullet"><span class="by">ykonstant</span><span>|</span><a href="#40327726">parent</a><span>|</span><a href="#40327865">next</a><span>|</span><label class="collapse" for="c-40327901">[-]</label><label class="expand" for="c-40327901">[2 more]</label></div><br/><div class="children"><div class="content">It is not, because the subdivisions in CORDIC do not possess the best approximation properties of Farey fractions.  For that, you would have to partition the circle into major&#x2F;minor arcs instead, in the sense of Hardy-Littlewood&#x27;s circle method. But that would be computationally very expensive, whereas this binary subdivision is fast, and is made faster using the shift-add tricks.</div><br/><div id="40328653" class="c"><input type="checkbox" id="c-40328653" checked=""/><div class="controls bullet"><span class="by">1oooqooq</span><span>|</span><a href="#40327726">root</a><span>|</span><a href="#40327901">parent</a><span>|</span><a href="#40327865">next</a><span>|</span><label class="collapse" for="c-40328653">[-]</label><label class="expand" for="c-40328653">[1 more]</label></div><br/><div class="children"><div class="content">i see. thanks. assumed it was just bit shift tricks implementation. but indeed, no mediant.</div><br/></div></div></div></div><div id="40327865" class="c"><input type="checkbox" id="c-40327865" checked=""/><div class="controls bullet"><span class="by">kevindamm</span><span>|</span><a href="#40327726">parent</a><span>|</span><a href="#40327901">prev</a><span>|</span><a href="#40327881">next</a><span>|</span><label class="collapse" for="c-40327865">[-]</label><label class="expand" for="c-40327865">[2 more]</label></div><br/><div class="children"><div class="content">More like a binary search, but instead of adjusting an array index you&#x27;re iterating an orthonormal matrix which represents rotation about the origin.</div><br/><div id="40330664" class="c"><input type="checkbox" id="c-40330664" checked=""/><div class="controls bullet"><span class="by">tapatio</span><span>|</span><a href="#40327726">root</a><span>|</span><a href="#40327865">parent</a><span>|</span><a href="#40327881">next</a><span>|</span><label class="collapse" for="c-40330664">[-]</label><label class="expand" for="c-40330664">[1 more]</label></div><br/><div class="children"><div class="content">Or a second order step response.</div><br/></div></div></div></div><div id="40327881" class="c"><input type="checkbox" id="c-40327881" checked=""/><div class="controls bullet"><span class="by">nico</span><span>|</span><a href="#40327726">parent</a><span>|</span><a href="#40327865">prev</a><span>|</span><a href="#40331103">next</a><span>|</span><label class="collapse" for="c-40327881">[-]</label><label class="expand" for="c-40327881">[1 more]</label></div><br/><div class="children"><div class="content">That’s super cool<p>Thank you for that link, very interesting diagrams and structures<p>They look very similar to what a neural network might be in certain cases, and it seems like the structures are trying to map some sort of duality</div><br/></div></div></div></div><div id="40331103" class="c"><input type="checkbox" id="c-40331103" checked=""/><div class="controls bullet"><span class="by">pintor-viejo</span><span>|</span><a href="#40327726">prev</a><span>|</span><a href="#40327928">next</a><span>|</span><label class="collapse" for="c-40331103">[-]</label><label class="expand" for="c-40331103">[1 more]</label></div><br/><div class="children"><div class="content">Meagher&#x27;s octree system notably used only integer arithmetic with no integer multiplication&#x2F;division:<p>&gt; Efficient (linear time) algorithms have been developed for the Boolean operations (union, intersection and difference), geometric operations (translation, scaling and rotation), N-dimensional interference detection, and display from any point in space with hidden surfaces removed. The algorithms require neither floating-point operations, integer multiplications, nor integer divisions.<p><a href="https:&#x2F;&#x2F;doi.org&#x2F;10.1016&#x2F;0146-664X(82)90104-6" rel="nofollow">https:&#x2F;&#x2F;doi.org&#x2F;10.1016&#x2F;0146-664X(82)90104-6</a><p>This facilitated creation of fast, custom VLSI graphics acceleration hardware for octree representation.</div><br/></div></div><div id="40327928" class="c"><input type="checkbox" id="c-40327928" checked=""/><div class="controls bullet"><span class="by">sunpazed</span><span>|</span><a href="#40331103">prev</a><span>|</span><a href="#40330122">next</a><span>|</span><label class="collapse" for="c-40327928">[-]</label><label class="expand" for="c-40327928">[2 more]</label></div><br/><div class="children"><div class="content">I have a few vintage programmable HP calculators that implement CORDIC on their 4-bit CPUs. You can also program them to calculate the Taylor expansion of sin() as another approximate method.<p>If you liked this, it’s worth reading Donald Knuth seminal “The Art of Computer Programming” which explains a number of mathematical algorithms by example.</div><br/></div></div><div id="40330122" class="c"><input type="checkbox" id="c-40330122" checked=""/><div class="controls bullet"><span class="by">brcmthrowaway</span><span>|</span><a href="#40327928">prev</a><span>|</span><a href="#40332445">next</a><span>|</span><label class="collapse" for="c-40330122">[-]</label><label class="expand" for="c-40330122">[2 more]</label></div><br/><div class="children"><div class="content">This used to be all the rage when folks were into DSP</div><br/><div id="40330666" class="c"><input type="checkbox" id="c-40330666" checked=""/><div class="controls bullet"><span class="by">tapatio</span><span>|</span><a href="#40330122">parent</a><span>|</span><a href="#40332445">next</a><span>|</span><label class="collapse" for="c-40330666">[-]</label><label class="expand" for="c-40330666">[1 more]</label></div><br/><div class="children"><div class="content">cos + jsin baby.</div><br/></div></div></div></div><div id="40332445" class="c"><input type="checkbox" id="c-40332445" checked=""/><div class="controls bullet"><span class="by">kazinator</span><span>|</span><a href="#40330122">prev</a><span>|</span><a href="#40327886">next</a><span>|</span><label class="collapse" for="c-40332445">[-]</label><label class="expand" for="c-40332445">[1 more]</label></div><br/><div class="children"><div class="content">If, having it in your head, you could use it to calculate trig functions in your head, that would be a way of it paying rent.<p>So, yeah.</div><br/></div></div><div id="40327886" class="c"><input type="checkbox" id="c-40327886" checked=""/><div class="controls bullet"><span class="by">nico</span><span>|</span><a href="#40332445">prev</a><span>|</span><a href="#40329036">next</a><span>|</span><label class="collapse" for="c-40327886">[-]</label><label class="expand" for="c-40327886">[16 more]</label></div><br/><div class="children"><div class="content">Cool algorithm. Might come in handy soon for running neural networks on less powerful hardware :)</div><br/><div id="40329615" class="c"><input type="checkbox" id="c-40329615" checked=""/><div class="controls bullet"><span class="by">SJC_Hacker</span><span>|</span><a href="#40327886">parent</a><span>|</span><a href="#40329491">next</a><span>|</span><label class="collapse" for="c-40329615">[-]</label><label class="expand" for="c-40329615">[2 more]</label></div><br/><div class="children"><div class="content">The primary advantage of CORDIC is that it saves space in the design.<p>Lookup tables with interpolation are much faster</div><br/><div id="40330931" class="c"><input type="checkbox" id="c-40330931" checked=""/><div class="controls bullet"><span class="by">nimish</span><span>|</span><a href="#40327886">root</a><span>|</span><a href="#40329615">parent</a><span>|</span><a href="#40329491">next</a><span>|</span><label class="collapse" for="c-40330931">[-]</label><label class="expand" for="c-40330931">[1 more]</label></div><br/><div class="children"><div class="content">Polynomial interpolation for sin&#x2F;cos is even better when you have access to an FPU: <a href="https:&#x2F;&#x2F;gist.github.com&#x2F;publik-void&#x2F;067f7f2fef32dbe5c27d6e215f824c91" rel="nofollow">https:&#x2F;&#x2F;gist.github.com&#x2F;publik-void&#x2F;067f7f2fef32dbe5c27d6e21...</a></div><br/></div></div></div></div><div id="40329491" class="c"><input type="checkbox" id="c-40329491" checked=""/><div class="controls bullet"><span class="by">KeplerBoy</span><span>|</span><a href="#40327886">parent</a><span>|</span><a href="#40329615">prev</a><span>|</span><a href="#40327977">next</a><span>|</span><label class="collapse" for="c-40329491">[-]</label><label class="expand" for="c-40329491">[12 more]</label></div><br/><div class="children"><div class="content">Neural networks usually don&#x27;t use trigonometry or complex numbers.</div><br/><div id="40330108" class="c"><input type="checkbox" id="c-40330108" checked=""/><div class="controls bullet"><span class="by">nico</span><span>|</span><a href="#40327886">root</a><span>|</span><a href="#40329491">parent</a><span>|</span><a href="#40329896">next</a><span>|</span><label class="collapse" for="c-40330108">[-]</label><label class="expand" for="c-40330108">[10 more]</label></div><br/><div class="children"><div class="content">From the neural network Wikipedia page:<p>&gt; The signal each neuron outputs is calculated from this number, according to its activation function<p>The activation function is usually a sigmoid, which is also usually defined in terms of trigonometric functions<p>Which neural networks don’t use trigonometric functions or equivalent?</div><br/><div id="40332972" class="c"><input type="checkbox" id="c-40332972" checked=""/><div class="controls bullet"><span class="by">Dylan16807</span><span>|</span><a href="#40327886">root</a><span>|</span><a href="#40330108">parent</a><span>|</span><a href="#40331007">next</a><span>|</span><label class="collapse" for="c-40332972">[-]</label><label class="expand" for="c-40332972">[1 more]</label></div><br/><div class="children"><div class="content">You just need a vague approximation.  Even CORDIC is overkill.<p>clamp(x&#x2F;2, -1, 1) is basically a sigmoid.</div><br/></div></div><div id="40331007" class="c"><input type="checkbox" id="c-40331007" checked=""/><div class="controls bullet"><span class="by">PeterisP</span><span>|</span><a href="#40327886">root</a><span>|</span><a href="#40330108">parent</a><span>|</span><a href="#40332972">prev</a><span>|</span><a href="#40330267">next</a><span>|</span><label class="collapse" for="c-40331007">[-]</label><label class="expand" for="c-40331007">[5 more]</label></div><br/><div class="children"><div class="content">In current neural networks the activation function usually is not sigmoid but something like ReLU ( y = 0 if x&lt;0 else x ), and in any case the computation of activations is not meaningful part of total compute - for non-tiny networks, almost all the effort is spent on the the large matrix multiplications of the large layers before the activation function, and as the network size grows, they become even less relevant, as the amount of activation calculations grows linearly with layer size but the core computation grows superlinearly (n^2.8 perhaps?).</div><br/><div id="40331643" class="c"><input type="checkbox" id="c-40331643" checked=""/><div class="controls bullet"><span class="by">mcguire</span><span>|</span><a href="#40327886">root</a><span>|</span><a href="#40331007">parent</a><span>|</span><a href="#40330267">next</a><span>|</span><label class="collapse" for="c-40331643">[-]</label><label class="expand" for="c-40331643">[4 more]</label></div><br/><div class="children"><div class="content">Really?<p>It&#x27;s literally been decades, but the last I learned about neural networks, a non-linear activation function was important for Turing completeness.</div><br/><div id="40332888" class="c"><input type="checkbox" id="c-40332888" checked=""/><div class="controls bullet"><span class="by">PeterisP</span><span>|</span><a href="#40327886">root</a><span>|</span><a href="#40331643">parent</a><span>|</span><a href="#40332134">next</a><span>|</span><label class="collapse" for="c-40332888">[-]</label><label class="expand" for="c-40332888">[1 more]</label></div><br/><div class="children"><div class="content">Yes, some non-linearity is important - not for Turing completeness, but because without it the consecutive layers effectively implement a single linear transformation of the same size and you&#x27;re just doing useless computation.<p>However, the &quot;decision point&quot; of the ReLU (and it&#x27;s everywhere-differentiable friends like leaky ReLU or ELU) provides a <i>sufficient</i> non-linearity - in essence, just as a sigmoid effectively results in a yes&#x2F;no chooser with some stuff in the middle for training purposes, so does the ReLU &quot;elbow point&quot;.<p>Sigmoid has a problem of &#x27;vanishing gradients&#x27; in deep networks, as the sigmoid gradients of 0 - 0.25 in standard backpropagation means that a &#x27;far away&#x27; layer will have tiny, useless gradients if there&#x27;s a hundred sigmoid layers in between.</div><br/></div></div><div id="40332134" class="c"><input type="checkbox" id="c-40332134" checked=""/><div class="controls bullet"><span class="by">jszymborski</span><span>|</span><a href="#40327886">root</a><span>|</span><a href="#40331643">parent</a><span>|</span><a href="#40332888">prev</a><span>|</span><a href="#40331890">next</a><span>|</span><label class="collapse" for="c-40332134">[-]</label><label class="expand" for="c-40332134">[1 more]</label></div><br/><div class="children"><div class="content">ReLU are indeed non-linear, despite the confusing name.<p>The nonlinearity (plus at least two layers) are required to solve nonlinear problems (like the famous XOR example).</div><br/></div></div><div id="40331890" class="c"><input type="checkbox" id="c-40331890" checked=""/><div class="controls bullet"><span class="by">kragen</span><span>|</span><a href="#40327886">root</a><span>|</span><a href="#40331643">parent</a><span>|</span><a href="#40332134">prev</a><span>|</span><a href="#40330267">next</a><span>|</span><label class="collapse" for="c-40331890">[-]</label><label class="expand" for="c-40331890">[1 more]</label></div><br/><div class="children"><div class="content">neural networks aren&#x27;t turing complete (they&#x27;re circuits, not state machines) and relu is not just nonlinear but in fact not even differentiable at zero</div><br/></div></div></div></div></div></div><div id="40330267" class="c"><input type="checkbox" id="c-40330267" checked=""/><div class="controls bullet"><span class="by">KeplerBoy</span><span>|</span><a href="#40327886">root</a><span>|</span><a href="#40330108">parent</a><span>|</span><a href="#40331007">prev</a><span>|</span><a href="#40329896">next</a><span>|</span><label class="collapse" for="c-40330267">[-]</label><label class="expand" for="c-40330267">[3 more]</label></div><br/><div class="children"><div class="content">Most activations functions are based on exponential functions.<p>I don&#x27;t immediately see how cordic would help you calculate e^(x) unless x is complex valued (which it is usually not).</div><br/><div id="40330352" class="c"><input type="checkbox" id="c-40330352" checked=""/><div class="controls bullet"><span class="by">adgjlsfhk1</span><span>|</span><a href="#40327886">root</a><span>|</span><a href="#40330267">parent</a><span>|</span><a href="#40329896">next</a><span>|</span><label class="collapse" for="c-40330352">[-]</label><label class="expand" for="c-40330352">[2 more]</label></div><br/><div class="children"><div class="content">see section B of <a href="https:&#x2F;&#x2F;eprints.soton.ac.uk&#x2F;267873&#x2F;1&#x2F;tcas1_cordic_review.pdf" rel="nofollow">https:&#x2F;&#x2F;eprints.soton.ac.uk&#x2F;267873&#x2F;1&#x2F;tcas1_cordic_review.pdf</a>. Generalized cordic can compute hyperbolic trig functions which gives you exponentials. That said, it&#x27;s still not useful for ML because it&#x27;s pretty hard to beat polynomials and tables.</div><br/><div id="40330435" class="c"><input type="checkbox" id="c-40330435" checked=""/><div class="controls bullet"><span class="by">KeplerBoy</span><span>|</span><a href="#40327886">root</a><span>|</span><a href="#40330352">parent</a><span>|</span><a href="#40329896">next</a><span>|</span><label class="collapse" for="c-40330435">[-]</label><label class="expand" for="c-40330435">[1 more]</label></div><br/><div class="children"><div class="content">Interesting, thanks.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="40329036" class="c"><input type="checkbox" id="c-40329036" checked=""/><div class="controls bullet"><span class="by">blowski</span><span>|</span><a href="#40327886">prev</a><span>|</span><label class="collapse" for="c-40329036">[-]</label><label class="expand" for="c-40329036">[15 more]</label></div><br/><div class="children"><div class="content">“Lives rent-free in my head” is a horrible cliche. By now, it has the same effect as saying “it’s nice” but uses lots more letters.</div><br/><div id="40329361" class="c"><input type="checkbox" id="c-40329361" checked=""/><div class="controls bullet"><span class="by">junon</span><span>|</span><a href="#40329036">parent</a><span>|</span><a href="#40329631">next</a><span>|</span><label class="collapse" for="c-40329361">[-]</label><label class="expand" for="c-40329361">[1 more]</label></div><br/><div class="children"><div class="content">And what does this pedantry solve, exactly? It clearly is something the author thinks often enough about and enjoys talking about.<p>Let people enjoy things.</div><br/></div></div><div id="40329631" class="c"><input type="checkbox" id="c-40329631" checked=""/><div class="controls bullet"><span class="by">beefnugs</span><span>|</span><a href="#40329036">parent</a><span>|</span><a href="#40329361">prev</a><span>|</span><a href="#40329413">next</a><span>|</span><label class="collapse" for="c-40329631">[-]</label><label class="expand" for="c-40329631">[1 more]</label></div><br/><div class="children"><div class="content">I thought it was more often &quot;negative&quot; like you cant stop thinking about some dumbass getting disproportionate affect on the world</div><br/></div></div><div id="40329413" class="c"><input type="checkbox" id="c-40329413" checked=""/><div class="controls bullet"><span class="by">wodenokoto</span><span>|</span><a href="#40329036">parent</a><span>|</span><a href="#40329631">prev</a><span>|</span><a href="#40329347">next</a><span>|</span><label class="collapse" for="c-40329413">[-]</label><label class="expand" for="c-40329413">[5 more]</label></div><br/><div class="children"><div class="content">I never liked that phrase either. So what exactly lives in your head and pays rent?</div><br/><div id="40330376" class="c"><input type="checkbox" id="c-40330376" checked=""/><div class="controls bullet"><span class="by">__MatrixMan__</span><span>|</span><a href="#40329036">root</a><span>|</span><a href="#40329413">parent</a><span>|</span><a href="#40330434">next</a><span>|</span><label class="collapse" for="c-40330376">[-]</label><label class="expand" for="c-40330376">[1 more]</label></div><br/><div class="children"><div class="content">Kubernetes, which I would evict if it stopped paying rent.</div><br/></div></div><div id="40330434" class="c"><input type="checkbox" id="c-40330434" checked=""/><div class="controls bullet"><span class="by">pynappo</span><span>|</span><a href="#40329036">root</a><span>|</span><a href="#40329413">parent</a><span>|</span><a href="#40330376">prev</a><span>|</span><a href="#40329437">next</a><span>|</span><label class="collapse" for="c-40330434">[-]</label><label class="expand" for="c-40330434">[2 more]</label></div><br/><div class="children"><div class="content">the &quot;rent&quot; in the saying is the effort to learn and upkeep a certain piece of knowledge in your head, to the point where you can recall it as needed<p>living rent free generally means that you are able to easily recall a piece of knowledge (and often do, even if you don&#x27;t want to).<p>something that pays rent might be like an important concept for an upcoming school test, for a class you&#x27;re not interested in.</div><br/><div id="40331094" class="c"><input type="checkbox" id="c-40331094" checked=""/><div class="controls bullet"><span class="by">strken</span><span>|</span><a href="#40329036">root</a><span>|</span><a href="#40330434">parent</a><span>|</span><a href="#40329437">next</a><span>|</span><label class="collapse" for="c-40331094">[-]</label><label class="expand" for="c-40331094">[1 more]</label></div><br/><div class="children"><div class="content">I always thought rent was utility, and a piece of knowledge or an opinion that didn&#x27;t pay rent was one that provided little or no practical benefit to you.<p>The term in its original use described an obsession with a particular group or thing and called it out as pointless. I don&#x27;t think it would make sense for rent to mean effort in this original sense, nor in the broader way it&#x27;s used here.</div><br/></div></div></div></div><div id="40329437" class="c"><input type="checkbox" id="c-40329437" checked=""/><div class="controls bullet"><span class="by">sublinear</span><span>|</span><a href="#40329036">root</a><span>|</span><a href="#40329413">parent</a><span>|</span><a href="#40330434">prev</a><span>|</span><a href="#40329347">next</a><span>|</span><label class="collapse" for="c-40329437">[-]</label><label class="expand" for="c-40329437">[1 more]</label></div><br/><div class="children"><div class="content">Knowledge work</div><br/></div></div></div></div><div id="40329347" class="c"><input type="checkbox" id="c-40329347" checked=""/><div class="controls bullet"><span class="by">rnmmrnm</span><span>|</span><a href="#40329036">parent</a><span>|</span><a href="#40329413">prev</a><span>|</span><a href="#40329625">next</a><span>|</span><label class="collapse" for="c-40329347">[-]</label><label class="expand" for="c-40329347">[1 more]</label></div><br/><div class="children"><div class="content">I didn&#x27;t finish yet but I was thinking he&#x27;s talking about memorizing the algorithm to calculate sines in your head.</div><br/></div></div><div id="40329625" class="c"><input type="checkbox" id="c-40329625" checked=""/><div class="controls bullet"><span class="by">B1FF_PSUVM</span><span>|</span><a href="#40329036">parent</a><span>|</span><a href="#40329347">prev</a><span>|</span><a href="#40329356">next</a><span>|</span><label class="collapse" for="c-40329625">[-]</label><label class="expand" for="c-40329625">[2 more]</label></div><br/><div class="children"><div class="content">I take it as short for the &quot;why are you still carrying her?&quot; parable <a href="https:&#x2F;&#x2F;medium.com&#x2F;@soninilucas&#x2F;two-monks-and-a-woman-zen-story-c15294c394c1" rel="nofollow">https:&#x2F;&#x2F;medium.com&#x2F;@soninilucas&#x2F;two-monks-and-a-woman-zen-st...</a> - something you should have let go and forgotten.<p>Doesn&#x27;t seem to be what the author meant in this case.</div><br/><div id="40329995" class="c"><input type="checkbox" id="c-40329995" checked=""/><div class="controls bullet"><span class="by">magicalhippo</span><span>|</span><a href="#40329036">root</a><span>|</span><a href="#40329625">parent</a><span>|</span><a href="#40329356">next</a><span>|</span><label class="collapse" for="c-40329995">[-]</label><label class="expand" for="c-40329995">[1 more]</label></div><br/><div class="children"><div class="content">Having never heard the expression before, I thought it meant it wouldn&#x27;t be forgotten, like learning to ride a bicycle kinda thing.</div><br/></div></div></div></div><div id="40329593" class="c"><input type="checkbox" id="c-40329593" checked=""/><div class="controls bullet"><span class="by">alexjplant</span><span>|</span><a href="#40329036">parent</a><span>|</span><a href="#40329356">prev</a><span>|</span><label class="collapse" for="c-40329593">[-]</label><label class="expand" for="c-40329593">[2 more]</label></div><br/><div class="children"><div class="content">&gt; “Lives rent-free in my head” is a horrible cliche.<p>Yes it is, much like &quot;dumpster fire&quot; or &quot;toxic&quot; or &quot;gaslighting&quot; or any other contemporary Reddit-isms that are associated with hyper-reductionist cultural hot takes. My personal distaste for them, however, has no bearing on the fact that they have very real meaning and people enjoy using them.<p>&gt; By now, it has the same effect as saying “it’s nice” but uses lots more letters.<p>The commonly-held meaning of this is that it describes a pervasive, intrusive thought, not a nice one. This particular turn of phrase is often used to describe how politicians devote energy to talking about other politicians that they don&#x27;t like, for instance.</div><br/><div id="40332321" class="c"><input type="checkbox" id="c-40332321" checked=""/><div class="controls bullet"><span class="by">kevindamm</span><span>|</span><a href="#40329036">root</a><span>|</span><a href="#40329593">parent</a><span>|</span><label class="collapse" for="c-40332321">[-]</label><label class="expand" for="c-40332321">[1 more]</label></div><br/><div class="children"><div class="content">&quot;Lives rent free in my head&quot; lives rent free in my head.<p>Hey it&#x27;s a quine, too!</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>