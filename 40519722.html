<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1717059669946" as="style"/><link rel="stylesheet" href="styles.css?v=1717059669946"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://frankenphp.dev/">FrankenPHP: Modern PHP App Server</a> <span class="domain">(<a href="https://frankenphp.dev">frankenphp.dev</a>)</span></div><div class="subtext"><span>aquova</span> | <span>122 comments</span></div><br/><div><div id="40521150" class="c"><input type="checkbox" id="c-40521150" checked=""/><div class="controls bullet"><span class="by">ofrzeta</span><span>|</span><a href="#40520144">next</a><span>|</span><label class="collapse" for="c-40521150">[-]</label><label class="expand" for="c-40521150">[3 more]</label></div><br/><div class="children"><div class="content">Alternatives are:<p>- Roadrunner <a href="https:&#x2F;&#x2F;roadrunner.dev&#x2F;" rel="nofollow">https:&#x2F;&#x2F;roadrunner.dev&#x2F;</a> (also written in Go)<p>- Swoole <a href="https:&#x2F;&#x2F;www.swoole.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.swoole.com&#x2F;</a> <a href="https:&#x2F;&#x2F;openswoole.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;openswoole.com&#x2F;</a><p>See <a href="https:&#x2F;&#x2F;laravel.com&#x2F;docs&#x2F;11.x&#x2F;octane" rel="nofollow">https:&#x2F;&#x2F;laravel.com&#x2F;docs&#x2F;11.x&#x2F;octane</a> for Laravel specific framework integration.</div><br/><div id="40521188" class="c"><input type="checkbox" id="c-40521188" checked=""/><div class="controls bullet"><span class="by">francislavoie</span><span>|</span><a href="#40521150">parent</a><span>|</span><a href="#40520144">next</a><span>|</span><label class="collapse" for="c-40521188">[-]</label><label class="expand" for="c-40521188">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s only an alternative if you&#x27;re running a framework which also supports those (your PHP app has to be set up in a specific way for Roadrunner or Swoole to be usable).<p>FrankenPHP has the advantage of working with _any_ PHP app (even WordPress) because it&#x27;s just PHP, but compiled into a Go program with CGO. But it also has a worker mode which makes it behave similarly to those two.</div><br/><div id="40521205" class="c"><input type="checkbox" id="c-40521205" checked=""/><div class="controls bullet"><span class="by">ofrzeta</span><span>|</span><a href="#40521150">root</a><span>|</span><a href="#40521188">parent</a><span>|</span><a href="#40520144">next</a><span>|</span><label class="collapse" for="c-40521205">[-]</label><label class="expand" for="c-40521205">[1 more]</label></div><br/><div class="children"><div class="content">Ah, I didn&#x27;t get that. Thanks for the clarification.</div><br/></div></div></div></div></div></div><div id="40520144" class="c"><input type="checkbox" id="c-40520144" checked=""/><div class="controls bullet"><span class="by">harrisonjackson</span><span>|</span><a href="#40521150">prev</a><span>|</span><a href="#40520390">next</a><span>|</span><label class="collapse" for="c-40520144">[-]</label><label class="expand" for="c-40520144">[32 more]</label></div><br/><div class="children"><div class="content">I haven&#x27;t done any php development in maybe 10 years but this landing page almost got me to spin up a hello world.<p>I like the elephant frankenstein character - goofy and ugly&#x2F;cute. Design, color scheme, copy, and animations are clean :chefkiss:<p>The value prop is well highlighted - at least for someone that&#x27;s been out of php dev for a while. This seems like a nice way to bootstrap something small. Getting started code snippet makes it seem quick and easy.</div><br/><div id="40520484" class="c"><input type="checkbox" id="c-40520484" checked=""/><div class="controls bullet"><span class="by">zer00eyz</span><span>|</span><a href="#40520144">parent</a><span>|</span><a href="#40520904">next</a><span>|</span><label class="collapse" for="c-40520484">[-]</label><label class="expand" for="c-40520484">[30 more]</label></div><br/><div class="children"><div class="content">I moved from PHP to Golang a bit over a decade ago... Because binary deploys are the bees knees.<p>I dont want 8 containers isolating a bunch of bad software or worse messed up dependency&#x27;s (looking at you python, maybe some ruby and node code as well). Because rather than releasing installable software you packaged up &quot;works for me&quot; and shipped it to the world.<p>I might play with this out of nostalgia but not so sure that I want these sorts of things in my production environment any more.</div><br/><div id="40520574" class="c"><input type="checkbox" id="c-40520574" checked=""/><div class="controls bullet"><span class="by">conradfr</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520484">parent</a><span>|</span><a href="#40520505">next</a><span>|</span><label class="collapse" for="c-40520574">[-]</label><label class="expand" for="c-40520574">[10 more]</label></div><br/><div class="children"><div class="content">This is the one good thing non-Go web developers are jealous about Go.</div><br/><div id="40521048" class="c"><input type="checkbox" id="c-40521048" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520574">parent</a><span>|</span><a href="#40520771">next</a><span>|</span><label class="collapse" for="c-40521048">[-]</label><label class="expand" for="c-40521048">[1 more]</label></div><br/><div class="children"><div class="content">Many non Go Web developers know about static compilation, before shared objects were even a feature in mainstream OSes.</div><br/></div></div><div id="40520771" class="c"><input type="checkbox" id="c-40520771" checked=""/><div class="controls bullet"><span class="by">BartjeD</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520574">parent</a><span>|</span><a href="#40521048">prev</a><span>|</span><a href="#40520873">next</a><span>|</span><label class="collapse" for="c-40520771">[-]</label><label class="expand" for="c-40520771">[7 more]</label></div><br/><div class="children"><div class="content">.Net and rust and many other languages also support binary deploy. You raise the impression this is a unique property of &#x27;go&#x27;, how come? You guys have go tunnel vision because you work with it?</div><br/><div id="40521133" class="c"><input type="checkbox" id="c-40521133" checked=""/><div class="controls bullet"><span class="by">zer00eyz</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520771">parent</a><span>|</span><a href="#40520899">next</a><span>|</span><label class="collapse" for="c-40521133">[-]</label><label class="expand" for="c-40521133">[1 more]</label></div><br/><div class="children"><div class="content">Rust and Zig also do compile to binary. They just weren&#x27;t part of the stack in thee article...<p>I dont think I would use either of them in the same places I want to use GO... Things that were java, or python are candidates to be written in go. Things that were C or C++ are good candidates for Rust or Zig.<p>Look at cloudflares nginx replacement, it&#x27;s written in rust for a GOOD reason. Thats not a place where go will shine being a GC language.</div><br/></div></div><div id="40520899" class="c"><input type="checkbox" id="c-40520899" checked=""/><div class="controls bullet"><span class="by">withinboredom</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520771">parent</a><span>|</span><a href="#40521133">prev</a><span>|</span><a href="#40520893">next</a><span>|</span><label class="collapse" for="c-40520899">[-]</label><label class="expand" for="c-40520899">[2 more]</label></div><br/><div class="children"><div class="content">Go started it. Or at least, popularized the static build, single binary docker files.<p>Naturally, you’ve been able to do this since forever with many languages like C&#x2F;C++ etc.</div><br/><div id="40521054" class="c"><input type="checkbox" id="c-40521054" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520899">parent</a><span>|</span><a href="#40520893">next</a><span>|</span><label class="collapse" for="c-40521054">[-]</label><label class="expand" for="c-40521054">[1 more]</label></div><br/><div class="children"><div class="content">Among people that have used nothing besides scripting languages.</div><br/></div></div></div></div><div id="40520893" class="c"><input type="checkbox" id="c-40520893" checked=""/><div class="controls bullet"><span class="by">conradfr</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520771">parent</a><span>|</span><a href="#40520899">prev</a><span>|</span><a href="#40520982">next</a><span>|</span><label class="collapse" for="c-40520893">[-]</label><label class="expand" for="c-40520893">[1 more]</label></div><br/><div class="children"><div class="content">That was not my experience when I worked with .Net, IIS and the whole thing but it was a long time ago so good to know :)</div><br/></div></div><div id="40520982" class="c"><input type="checkbox" id="c-40520982" checked=""/><div class="controls bullet"><span class="by">bdd8f1df777b</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520771">parent</a><span>|</span><a href="#40520893">prev</a><span>|</span><a href="#40520960">next</a><span>|</span><label class="collapse" for="c-40520982">[-]</label><label class="expand" for="c-40520982">[1 more]</label></div><br/><div class="children"><div class="content">Go popularize it, and still leads in the easiness of cross compilation.</div><br/></div></div><div id="40520960" class="c"><input type="checkbox" id="c-40520960" checked=""/><div class="controls bullet"><span class="by">gertop</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520771">parent</a><span>|</span><a href="#40520982">prev</a><span>|</span><a href="#40520873">next</a><span>|</span><label class="collapse" for="c-40520960">[-]</label><label class="expand" for="c-40520960">[1 more]</label></div><br/><div class="children"><div class="content">.Net only recently added support for it and it&#x27;s very brittle.<p>Rust is indeed in the same league as Go, I guess the difference is that Go is batteries included when it comes to web development. You don&#x27;t have to pull many dependencies, unlike rust.</div><br/></div></div></div></div><div id="40520873" class="c"><input type="checkbox" id="c-40520873" checked=""/><div class="controls bullet"><span class="by">rafark</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520574">parent</a><span>|</span><a href="#40520771">prev</a><span>|</span><a href="#40520505">next</a><span>|</span><label class="collapse" for="c-40520873">[-]</label><label class="expand" for="c-40520873">[1 more]</label></div><br/><div class="children"><div class="content">And charm.sh</div><br/></div></div></div></div><div id="40520505" class="c"><input type="checkbox" id="c-40520505" checked=""/><div class="controls bullet"><span class="by">francislavoie</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520484">parent</a><span>|</span><a href="#40520574">prev</a><span>|</span><a href="#40520807">next</a><span>|</span><label class="collapse" for="c-40520505">[-]</label><label class="expand" for="c-40520505">[11 more]</label></div><br/><div class="children"><div class="content">This is PHP running inside a Go server, btw. Compiled with CGO. One binary, one process.</div><br/><div id="40520692" class="c"><input type="checkbox" id="c-40520692" checked=""/><div class="controls bullet"><span class="by">zer00eyz</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520505">parent</a><span>|</span><a href="#40520807">next</a><span>|</span><label class="collapse" for="c-40520692">[-]</label><label class="expand" for="c-40520692">[10 more]</label></div><br/><div class="children"><div class="content">Wow the PHP is going to magically get into the binary?<p>&#x2F;s<p>Yes I could build this with c-go + the PHP and statically link everything (and there might need to be a bit of prayer involved...) ... or I could just write GO and accomplish all the same things with fewer steps.<p>That knotted up mess is why containers are popular.</div><br/><div id="40520919" class="c"><input type="checkbox" id="c-40520919" checked=""/><div class="controls bullet"><span class="by">withinboredom</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520692">parent</a><span>|</span><a href="#40520811">next</a><span>|</span><label class="collapse" for="c-40520919">[-]</label><label class="expand" for="c-40520919">[4 more]</label></div><br/><div class="children"><div class="content">There are things Go excels at and there are things PHP excels at. They don’t always overlap. For example, you can write a simple web app in 100 lines of php code, and a process manager in 100 lines of Go code. If you flip the languages around, the number of lines explodes.</div><br/><div id="40521175" class="c"><input type="checkbox" id="c-40521175" checked=""/><div class="controls bullet"><span class="by">zer00eyz</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520919">parent</a><span>|</span><a href="#40520811">next</a><span>|</span><label class="collapse" for="c-40521175">[-]</label><label class="expand" for="c-40521175">[3 more]</label></div><br/><div class="children"><div class="content">I started writing PHP back in the 3 and 4 days... I have been writing go for over a decade.<p>If I had to add a few dynamic elements to a static HTML site, php is still king.<p>If we&#x27;re building an API, go will win hands down. Not only in LOC but performance, and reporting.<p>When you get into whole pages (think blogs or shopping or... ) a lot of that is going to depend on what framework you&#x27;re grabbing on the PHP side. There arent a lot of &quot;batteries included&quot; solutions on the golang side... You might end up writing fewer lines of code in the first week but by the end of the month were going to be at feature parity and your quickly going to fall behind.<p>The moment I need a SPA, on page interactive GUI you&#x27;re going to end up with a JS framework and an API back end... here again, go will shine.</div><br/><div id="40521210" class="c"><input type="checkbox" id="c-40521210" checked=""/><div class="controls bullet"><span class="by">withinboredom</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40521175">parent</a><span>|</span><a href="#40520811">next</a><span>|</span><label class="collapse" for="c-40521210">[-]</label><label class="expand" for="c-40521210">[2 more]</label></div><br/><div class="children"><div class="content">&gt; If we&#x27;re building an API, go will win hands down.<p>I&#x27;m not so sure of that. Writing business logic in PHP is usually more concise than in Go, and more flexible. Also, I can think of a number of json schemas that are impossible to replicate in Go&#x27;s type system but work just fine in PHP.</div><br/><div id="40521551" class="c"><input type="checkbox" id="c-40521551" checked=""/><div class="controls bullet"><span class="by">zer00eyz</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40521210">parent</a><span>|</span><a href="#40520811">next</a><span>|</span><label class="collapse" for="c-40521551">[-]</label><label class="expand" for="c-40521551">[1 more]</label></div><br/><div class="children"><div class="content">&gt;&gt; Also, I can think of a number of json schemas that are impossible to replicate in Go&#x27;s type system but work just fine in PHP.<p>Not at all. There are some that would be painful to write &quot;by hand&quot;. An expansive and nested set of null fields would suck if I had to spell it all out...<p><a href="https:&#x2F;&#x2F;sqlc.dev" rel="nofollow">https:&#x2F;&#x2F;sqlc.dev</a> &lt;&lt; changes everything. If you add in the YAML (and I hate yaml) you can get your JSON to DB mapping in there, as well as your validations (all output as struct tags).<p>Everything else that you&#x27;re going to want (transforming inputs to&#x2F;from json, logging, auth) is some pretty simple middleware.</div><br/></div></div></div></div></div></div></div></div><div id="40520811" class="c"><input type="checkbox" id="c-40520811" checked=""/><div class="controls bullet"><span class="by">francislavoie</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520692">parent</a><span>|</span><a href="#40520919">prev</a><span>|</span><a href="#40520807">next</a><span>|</span><label class="collapse" for="c-40520811">[-]</label><label class="expand" for="c-40520811">[5 more]</label></div><br/><div class="children"><div class="content">Well, FrankenPHP avoids that prayer, cause it&#x27;s already done for you lmao<p>But obviously the point of using PHP is for its ecosystem, frameworks etc. Go is still missing a lot of that, the Go community has a weird aversion to frameworks.</div><br/><div id="40520977" class="c"><input type="checkbox" id="c-40520977" checked=""/><div class="controls bullet"><span class="by">zer00eyz</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520811">parent</a><span>|</span><a href="#40520807">next</a><span>|</span><label class="collapse" for="c-40520977">[-]</label><label class="expand" for="c-40520977">[4 more]</label></div><br/><div class="children"><div class="content">I wrote PHP from version 3 to version 6... I remember PHP before it had &quot;frameworks&quot;...<p>PHP ate perl because the battery&#x27;s were included, you didn&#x27;t need CPAN, and it had an amazing manual...<p>Python (pip), Ruby (gems) and Node (NPM) all looked much more attractive because they had rich library&#x27;s at their core and symphony wasnt really useful yet.<p>Yet Go eschews a lot of the same package management issues those other languages have. And a lot of go devs look at the standard library the same way early PHP devs looked at it &quot;I dont need a lot more than this&quot;.<p>It&#x27;s not that go devs are framework adverse we only want what we need and nothing more. In a language that favors composition frameworks quickly become &quot;baggage&quot;.<p>It&#x27;s kind of interesting to watch someone come from a language with a strong package ecosystem and watch them build their first go project. They tend to cruise GitHub and throw EVERYTHING in the cart. It takes them 3-4 days of working with all that before they are complaining up a storm! You hand that same dev SQLC, Validator, and point them at middle ware and the standard lib and ask them for API&#x27;s and they come back 2 days later grinning ear to ear.<p>Go, done well, is brutalism. Blocky, functional concrete buildings have an amazing charm to them... Go is blocky, its utilitarian, its expressive... You dont write cute code in go, you dont try to make go magical, you want clear easy to read and understand code... Your more likely to come back and add features long before you have to address the performance of go.</div><br/><div id="40521078" class="c"><input type="checkbox" id="c-40521078" checked=""/><div class="controls bullet"><span class="by">seszett</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520977">parent</a><span>|</span><a href="#40521091">next</a><span>|</span><label class="collapse" for="c-40521078">[-]</label><label class="expand" for="c-40521078">[2 more]</label></div><br/><div class="children"><div class="content">&gt; <i>version 6</i><p>PHP6? That was long ago because I don&#x27;t even remember it!<p>I don&#x27;t have much to say otherwise, except you could very well say the same &quot;Go is great&quot; without having to shit on PHP and the project that is being discussed here.<p>Especially since you don&#x27;t really come off as very knowledgeable on what you&#x27;re talking about.</div><br/><div id="40521440" class="c"><input type="checkbox" id="c-40521440" checked=""/><div class="controls bullet"><span class="by">zer00eyz</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40521078">parent</a><span>|</span><a href="#40521091">next</a><span>|</span><label class="collapse" for="c-40521440">[-]</label><label class="expand" for="c-40521440">[1 more]</label></div><br/><div class="children"><div class="content">It might shock you that I wrote perl before PHP... I have been in the game a LONG time. I was around for php being the language that EVERYONE shit on. I was around when PHP got somewhat huge and respectable. PHP buttered my bread for a number of years and I was one of its bigger advocates.<p>My lament here isnt about PHP at all.. It&#x27;s about the instructions here: <a href="https:&#x2F;&#x2F;frankenphp.dev&#x2F;docs&#x2F;embed&#x2F;" rel="nofollow">https:&#x2F;&#x2F;frankenphp.dev&#x2F;docs&#x2F;embed&#x2F;</a> to generate a monolithic binary... It&#x27;s about the execution of this script <a href="https:&#x2F;&#x2F;github.com&#x2F;dunglas&#x2F;frankenphp&#x2F;blob&#x2F;main&#x2F;build-static.sh">https:&#x2F;&#x2F;github.com&#x2F;dunglas&#x2F;frankenphp&#x2F;blob&#x2F;main&#x2F;build-static...</a><p>None of that is very go like at all. Having spent a lot of time with PHP I recognize a good portion of what turns up in that shell script. That having been said there are parts of it (the curl of the diff) with NO context that I would pause and go figure out what the hell that was. It really needs a note as to WHY it&#x27;s there so I dont have to go hunting. It looks like the shell script is meant to work in the docker container... A real build system might be in order here (make, basel, mage).</div><br/></div></div></div></div><div id="40521091" class="c"><input type="checkbox" id="c-40521091" checked=""/><div class="controls bullet"><span class="by">cess11</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520977">parent</a><span>|</span><a href="#40521078">prev</a><span>|</span><a href="#40520807">next</a><span>|</span><label class="collapse" for="c-40521091">[-]</label><label class="expand" for="c-40521091">[1 more]</label></div><br/><div class="children"><div class="content">PHP 6 was never released.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="40520807" class="c"><input type="checkbox" id="c-40520807" checked=""/><div class="controls bullet"><span class="by">hipadev23</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520484">parent</a><span>|</span><a href="#40520505">prev</a><span>|</span><a href="#40520889">next</a><span>|</span><label class="collapse" for="c-40520807">[-]</label><label class="expand" for="c-40520807">[4 more]</label></div><br/><div class="children"><div class="content">why would it be 8 (or any N&gt;1) containers for a php&#x2F;node&#x2F;python&#x2F;ruby app?</div><br/><div id="40520991" class="c"><input type="checkbox" id="c-40520991" checked=""/><div class="controls bullet"><span class="by">gertop</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520807">parent</a><span>|</span><a href="#40520889">next</a><span>|</span><label class="collapse" for="c-40520991">[-]</label><label class="expand" for="c-40520991">[3 more]</label></div><br/><div class="children"><div class="content">Python is pretty messy to deploy without a container. Sure you can (and should!) use a virtual env, but by that point using docker isn&#x27;t much more efforts.<p>Rails and Node and PHP have at least the decency to have the project&#x27;s dependencies contained inside the project&#x27;s own directory by default.</div><br/><div id="40521043" class="c"><input type="checkbox" id="c-40521043" checked=""/><div class="controls bullet"><span class="by">hipadev23</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520991">parent</a><span>|</span><a href="#40520889">next</a><span>|</span><label class="collapse" for="c-40521043">[-]</label><label class="expand" for="c-40521043">[2 more]</label></div><br/><div class="children"><div class="content">nah not questioning containers. questioning why he wrote 8 (obviously exaggerated) and why it’s not 1.</div><br/><div id="40521222" class="c"><input type="checkbox" id="c-40521222" checked=""/><div class="controls bullet"><span class="by">deergomoo</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40521043">parent</a><span>|</span><a href="#40520889">next</a><span>|</span><label class="collapse" for="c-40521222">[-]</label><label class="expand" for="c-40521222">[1 more]</label></div><br/><div class="children"><div class="content">Nginx&#x2F;Apache&#x2F;Caddy + php-fpm + something like MySQL if your database lives on the same server as your application. PHP in its default form isn’t a persistent process[0], so you will typically have a web server accepting the requests and forwarding them onto PHP to generate a response.<p>0: it actually usually is these days for performance reasons, with a pool of processes that are reused. But the mental model is one short-lived process per request</div><br/></div></div></div></div></div></div></div></div><div id="40520889" class="c"><input type="checkbox" id="c-40520889" checked=""/><div class="controls bullet"><span class="by">pjerem</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520484">parent</a><span>|</span><a href="#40520807">prev</a><span>|</span><a href="#40521053">next</a><span>|</span><label class="collapse" for="c-40520889">[-]</label><label class="expand" for="c-40520889">[3 more]</label></div><br/><div class="children"><div class="content">I’m a total noob in Go but is there something that approaches completeness of the good old monolithic frameworks ?<p>I’m in a pause in my career and I’m having a great time working on a &quot;side&quot; project in Django currently. Everything just works and makes sense, I just have to write business code and it gives me a nice app.<p>I’d be happy to try Go for fun and because deploying Python&#x2F;Diango is a mess (at least without docker) but my project isn’t API first, it’s deliberately a traditional server side rendered app.<p>Every Go frameworks I stumbled upon looked like they were made to serve APIs and In the case of a 1 man team, it defeats the purpose of easy deployment since you will anyway need to code and deploy a full blown frontend (and front end fatigue is a big reason why my career is currently in pause).</div><br/><div id="40521071" class="c"><input type="checkbox" id="c-40521071" checked=""/><div class="controls bullet"><span class="by">zer00eyz</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520889">parent</a><span>|</span><a href="#40521178">next</a><span>|</span><label class="collapse" for="c-40521071">[-]</label><label class="expand" for="c-40521071">[1 more]</label></div><br/><div class="children"><div class="content">GO + HTMX + standard templates... or some folks swear by templ<p>On the API side (not what you wanted, but good looking) is sqlc + validator<p>Between all of those you have everything you want for a website.<p>Week 1 go is going to be a lot slower than Django or Rails. You&#x27;re going to have a bit of bootstrapping to do for your project. By the end of the first month you will be a week or two behind but performance parity will be the same (you should have roughly the same feature cadence).<p>A good framework brings a lot to the table. With go you have to &quot;solve&quot; for that yourself. &quot;How do I log a request&quot; would be one of those first questions... the answer is &quot;the standard logger is pretty good&quot; and &quot;Middleware is awesome&quot;. It&#x27;s a question that has a simple, short, very common answer. One that works for web apps or CLI apps or ... It takes a bit but you end up embracing the idea that less is better</div><br/></div></div><div id="40521178" class="c"><input type="checkbox" id="c-40521178" checked=""/><div class="controls bullet"><span class="by">JodieBenitez</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520889">parent</a><span>|</span><a href="#40521071">prev</a><span>|</span><a href="#40521053">next</a><span>|</span><label class="collapse" for="c-40521178">[-]</label><label class="expand" for="c-40521178">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I’m a total noob in Go but is there something that approaches completeness of the good old monolithic frameworks ?<p>Some of them try, but it&#x27;s really hard to beat 20 years of development, real-life use cases, third party tools and docs, etc.<p>&gt;  deploying Python&#x2F;Diango is a mess (at least without docker)<p>Install your django app in a venv, serve it with gunicorn behind apache&#x2F;nginx... done. No docker required.<p>&gt; Every Go frameworks I stumbled upon looked like they were made to serve APIs<p>Indeed, that&#x27;s pretty much what Go was made for. And it&#x27;s also the current trend.<p>&gt; my project isn’t API first, it’s deliberately a traditional server side rendered app<p>Stick with Django then, because it remains an excellent choice for such apps. And these apps remain an excellent solution to a vast array of problems.<p>&gt; front end fatigue is a big reason why my career is currently in pause<p>I&#x27;d argue you don&#x27;t have to follow this trend to be useful. Actually, something like Django+Unpoly or HTMX probably covers 99% of the use cases with very low frontend development.</div><br/></div></div></div></div><div id="40521053" class="c"><input type="checkbox" id="c-40521053" checked=""/><div class="controls bullet"><span class="by">slim</span><span>|</span><a href="#40520144">root</a><span>|</span><a href="#40520484">parent</a><span>|</span><a href="#40520889">prev</a><span>|</span><a href="#40520904">next</a><span>|</span><label class="collapse" for="c-40521053">[-]</label><label class="expand" for="c-40521053">[1 more]</label></div><br/><div class="children"><div class="content">did you miss this part in Frankenphp website ? :)<p><pre><code>  Build standalone, self-executable and dependencies-free binaries for your PHP web applications, and command-line tools.</code></pre></div><br/></div></div></div></div><div id="40520904" class="c"><input type="checkbox" id="c-40520904" checked=""/><div class="controls bullet"><span class="by">thomasfromcdnjs</span><span>|</span><a href="#40520144">parent</a><span>|</span><a href="#40520484">prev</a><span>|</span><a href="#40520390">next</a><span>|</span><label class="collapse" for="c-40520904">[-]</label><label class="expand" for="c-40520904">[1 more]</label></div><br/><div class="children"><div class="content">Yeah it has to be one of the best landing pages I have ever seen.<p>Fun and instantly understood.</div><br/></div></div></div></div><div id="40520390" class="c"><input type="checkbox" id="c-40520390" checked=""/><div class="controls bullet"><span class="by">sandreas</span><span>|</span><a href="#40520144">prev</a><span>|</span><a href="#40520019">next</a><span>|</span><label class="collapse" for="c-40520390">[-]</label><label class="expand" for="c-40520390">[6 more]</label></div><br/><div class="children"><div class="content">While I often use the PHP integrated webserver during development:<p><pre><code>  php -S 0.0.0.0:8000 public&#x2F;index.php
</code></pre>
it is single threaded, slow and therefore not made for production environments. FrankenPHP looks promising, while the issue with limited Cores &#x2F; Threads[2] seems also to be a problem when using it in production. However, maybe I&#x27;ll give it a go for my pure-todo[1] project and see, if it suffers the same problem. The docker image as base looks really promising. Thanks for sharing.<p>1: <a href="https:&#x2F;&#x2F;github.com&#x2F;sandreas&#x2F;pure-todo">https:&#x2F;&#x2F;github.com&#x2F;sandreas&#x2F;pure-todo</a><p>2: <a href="https:&#x2F;&#x2F;github.com&#x2F;dunglas&#x2F;frankenphp&#x2F;discussions&#x2F;294">https:&#x2F;&#x2F;github.com&#x2F;dunglas&#x2F;frankenphp&#x2F;discussions&#x2F;294</a></div><br/><div id="40521097" class="c"><input type="checkbox" id="c-40521097" checked=""/><div class="controls bullet"><span class="by">lpapez</span><span>|</span><a href="#40520390">parent</a><span>|</span><a href="#40521240">next</a><span>|</span><label class="collapse" for="c-40521097">[-]</label><label class="expand" for="c-40521097">[2 more]</label></div><br/><div class="children"><div class="content">The PHP built-in server is explicitly stated <i>not</i> for production use, and is intended for development purposes only.<p>See the warning at the top of the page: <a href="https:&#x2F;&#x2F;www.php.net&#x2F;manual&#x2F;en&#x2F;features.commandline.webserver.php" rel="nofollow">https:&#x2F;&#x2F;www.php.net&#x2F;manual&#x2F;en&#x2F;features.commandline.webserver...</a><p>Not sure it&#x27;s even fair to consider it for comparison in this context.</div><br/><div id="40521309" class="c"><input type="checkbox" id="c-40521309" checked=""/><div class="controls bullet"><span class="by">sandreas</span><span>|</span><a href="#40520390">root</a><span>|</span><a href="#40521097">parent</a><span>|</span><a href="#40521240">next</a><span>|</span><label class="collapse" for="c-40521309">[-]</label><label class="expand" for="c-40521309">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s what I meant. But tbh I don&#x27;t think FrankenPHP is ready for Produktion yet, although it might geht there some day.<p>Just wanted to mention that using PHP locally, for simple app development you don&#x27;t need a full fledged nginx, Apache or caddy in all cases</div><br/></div></div></div></div><div id="40521240" class="c"><input type="checkbox" id="c-40521240" checked=""/><div class="controls bullet"><span class="by">PetahNZ</span><span>|</span><a href="#40520390">parent</a><span>|</span><a href="#40521097">prev</a><span>|</span><a href="#40520929">next</a><span>|</span><label class="collapse" for="c-40521240">[-]</label><label class="expand" for="c-40521240">[2 more]</label></div><br/><div class="children"><div class="content">You can set PHP_CLI_SERVER_WORKERS to make it run multiple threads.</div><br/><div id="40521287" class="c"><input type="checkbox" id="c-40521287" checked=""/><div class="controls bullet"><span class="by">sandreas</span><span>|</span><a href="#40520390">root</a><span>|</span><a href="#40521240">parent</a><span>|</span><a href="#40520929">next</a><span>|</span><label class="collapse" for="c-40521287">[-]</label><label class="expand" for="c-40521287">[1 more]</label></div><br/><div class="children"><div class="content">NEAT, didn&#x27;t know that. Would still not use it in production :)</div><br/></div></div></div></div><div id="40520929" class="c"><input type="checkbox" id="c-40520929" checked=""/><div class="controls bullet"><span class="by">20after4</span><span>|</span><a href="#40520390">parent</a><span>|</span><a href="#40521240">prev</a><span>|</span><a href="#40520019">next</a><span>|</span><label class="collapse" for="c-40520929">[-]</label><label class="expand" for="c-40520929">[1 more]</label></div><br/><div class="children"><div class="content">&gt;it is single threaded, slow and therefore not made for production environments.<p>I&#x27;m pretty sure that this solves those specific issues (and more)</div><br/></div></div></div></div><div id="40520019" class="c"><input type="checkbox" id="c-40520019" checked=""/><div class="controls bullet"><span class="by">jslaby</span><span>|</span><a href="#40520390">prev</a><span>|</span><a href="#40520316">next</a><span>|</span><label class="collapse" for="c-40520019">[-]</label><label class="expand" for="c-40520019">[27 more]</label></div><br/><div class="children"><div class="content">Long time C# dev, now I primarily code in PHP8 which is a great language to quickly get things done. This is the kind of direction the language needs to go in, instead of the older LAMP which can require somewhat complex Apache configuration.</div><br/><div id="40521120" class="c"><input type="checkbox" id="c-40521120" checked=""/><div class="controls bullet"><span class="by">El_RIDO</span><span>|</span><a href="#40520019">parent</a><span>|</span><a href="#40520159">next</a><span>|</span><label class="collapse" for="c-40521120">[-]</label><label class="expand" for="c-40521120">[1 more]</label></div><br/><div class="children"><div class="content">And to add one more option to the comments (beyond [frontend] + php-fpm):<p>Nginx Unit <a href="https:&#x2F;&#x2F;unit.nginx.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;unit.nginx.org&#x2F;</a> - like Apache + mod_php runs as a single service, handles the multiprocessing of php (and other languages), static files, reverse proxy and even lets you configure both itself and php via a single configuration (either as a file or dynamically at runtime, via a socket):
<a href="https:&#x2F;&#x2F;unit.nginx.org&#x2F;configuration&#x2F;#php" rel="nofollow">https:&#x2F;&#x2F;unit.nginx.org&#x2F;configuration&#x2F;#php</a><p>Here is an IRL config example:
<a href="https:&#x2F;&#x2F;github.com&#x2F;PrivateBin&#x2F;docker-unit-alpine&#x2F;blob&#x2F;master&#x2F;conf.json">https:&#x2F;&#x2F;github.com&#x2F;PrivateBin&#x2F;docker-unit-alpine&#x2F;blob&#x2F;master...</a><p>The resulting container image can be pretty small:
<a href="https:&#x2F;&#x2F;hub.docker.com&#x2F;r&#x2F;privatebin&#x2F;unit-alpine" rel="nofollow">https:&#x2F;&#x2F;hub.docker.com&#x2F;r&#x2F;privatebin&#x2F;unit-alpine</a></div><br/></div></div><div id="40520159" class="c"><input type="checkbox" id="c-40520159" checked=""/><div class="controls bullet"><span class="by">lelanthran</span><span>|</span><a href="#40520019">parent</a><span>|</span><a href="#40521120">prev</a><span>|</span><a href="#40520067">next</a><span>|</span><label class="collapse" for="c-40520159">[-]</label><label class="expand" for="c-40520159">[1 more]</label></div><br/><div class="children"><div class="content">&gt;This is the kind of direction the language needs to go in, instead of the older LAMP which can require somewhat complex Apache configuration.<p>I hardly every set up PHP (once each time I reinstall my desktop, which was last in  ... 2018?) but I recall it being very quick and smooth using apt-get.<p>I don&#x27;t recall doing anything else other than restarting apache.</div><br/></div></div><div id="40520067" class="c"><input type="checkbox" id="c-40520067" checked=""/><div class="controls bullet"><span class="by">hparadiz</span><span>|</span><a href="#40520019">parent</a><span>|</span><a href="#40520159">prev</a><span>|</span><a href="#40520486">next</a><span>|</span><label class="collapse" for="c-40520067">[-]</label><label class="expand" for="c-40520067">[22 more]</label></div><br/><div class="children"><div class="content">PHP dev of 18 years here.<p>Use nginx with php-fpm. It takes 5 minutes to configure.<p>Edit: I&#x27;m gonna give this thing a try too but I&#x27;ve never had any bottlenecks with either nginx or Apache. They both take a few minutes to get going at most.</div><br/><div id="40520424" class="c"><input type="checkbox" id="c-40520424" checked=""/><div class="controls bullet"><span class="by">anonzzzies</span><span>|</span><a href="#40520019">root</a><span>|</span><a href="#40520067">parent</a><span>|</span><a href="#40520085">next</a><span>|</span><label class="collapse" for="c-40520424">[-]</label><label class="expand" for="c-40520424">[2 more]</label></div><br/><div class="children"><div class="content">Few seconds with docker. There are fully loaded compose ones that include everything so you don’t need to add anything. It’s lovely. For prod it’s better to only leave the needed extensions etc of course but for dev it’s so easy to get going. And to be honest, for small personal, company internal and less than $1000&#x2F;mo rev saas, we just use the fully loaded in prod as well.</div><br/><div id="40520580" class="c"><input type="checkbox" id="c-40520580" checked=""/><div class="controls bullet"><span class="by">tommica</span><span>|</span><a href="#40520019">root</a><span>|</span><a href="#40520424">parent</a><span>|</span><a href="#40520085">next</a><span>|</span><label class="collapse" for="c-40520580">[-]</label><label class="expand" for="c-40520580">[1 more]</label></div><br/><div class="children"><div class="content">How does your production one look like if I may ask?</div><br/></div></div></div></div><div id="40520085" class="c"><input type="checkbox" id="c-40520085" checked=""/><div class="controls bullet"><span class="by">lordofgibbons</span><span>|</span><a href="#40520019">root</a><span>|</span><a href="#40520067">parent</a><span>|</span><a href="#40520424">prev</a><span>|</span><a href="#40521465">next</a><span>|</span><label class="collapse" for="c-40520085">[-]</label><label class="expand" for="c-40520085">[9 more]</label></div><br/><div class="children"><div class="content">&gt;It takes 5 minutes to configure<p>Is that because you have 18 years of experience, or would it be as easy for a new developer?</div><br/><div id="40520179" class="c"><input type="checkbox" id="c-40520179" checked=""/><div class="controls bullet"><span class="by">chrisandchris</span><span>|</span><a href="#40520019">root</a><span>|</span><a href="#40520085">parent</a><span>|</span><a href="#40520102">next</a><span>|</span><label class="collapse" for="c-40520179">[-]</label><label class="expand" for="c-40520179">[1 more]</label></div><br/><div class="children"><div class="content">I was a long-time PHP dev and then moved on to C#. I was close to writing this nginx&#x2F;fpm setup lookss very complex compared to &quot;dotnet run&quot;. But then I remembered, in ASP.NET you have a Program with 50 lines of code that must have an exact order, otherwise thinks work except they don&#x27;t.<p>So I would say, knowing these two languages, PHP really is that easy to setup.</div><br/></div></div><div id="40520102" class="c"><input type="checkbox" id="c-40520102" checked=""/><div class="controls bullet"><span class="by">hparadiz</span><span>|</span><a href="#40520019">root</a><span>|</span><a href="#40520085">parent</a><span>|</span><a href="#40520179">prev</a><span>|</span><a href="#40520218">next</a><span>|</span><label class="collapse" for="c-40520102">[-]</label><label class="expand" for="c-40520102">[2 more]</label></div><br/><div class="children"><div class="content">I just have the right config for both Apache2 and nginx from hundreds of sites. The config itself is only 50 lines. You can find a good one and stick with it.</div><br/><div id="40520717" class="c"><input type="checkbox" id="c-40520717" checked=""/><div class="controls bullet"><span class="by">troupo</span><span>|</span><a href="#40520019">root</a><span>|</span><a href="#40520102">parent</a><span>|</span><a href="#40520218">next</a><span>|</span><label class="collapse" for="c-40520717">[-]</label><label class="expand" for="c-40520717">[1 more]</label></div><br/><div class="children"><div class="content">Yup. The process of finding alone will take more than 5 minutes. And is likely to not work for your particular circumstance.</div><br/></div></div></div></div><div id="40520218" class="c"><input type="checkbox" id="c-40520218" checked=""/><div class="controls bullet"><span class="by">njovin</span><span>|</span><a href="#40520019">root</a><span>|</span><a href="#40520085">parent</a><span>|</span><a href="#40520102">prev</a><span>|</span><a href="#40520157">next</a><span>|</span><label class="collapse" for="c-40520218">[-]</label><label class="expand" for="c-40520218">[4 more]</label></div><br/><div class="children"><div class="content">You can have a a ~20 line docker-compose.yml file that only requires you to `docker compose up` and you&#x27;re up and running.  It&#x27;s gotten insanely easy to run php-fpm + nginx + [whateverdb] in a set of docker services that require virtually no configuration.</div><br/><div id="40520721" class="c"><input type="checkbox" id="c-40520721" checked=""/><div class="controls bullet"><span class="by">troupo</span><span>|</span><a href="#40520019">root</a><span>|</span><a href="#40520218">parent</a><span>|</span><a href="#40520157">next</a><span>|</span><label class="collapse" for="c-40520721">[-]</label><label class="expand" for="c-40520721">[3 more]</label></div><br/><div class="children"><div class="content">And who is going to write that ~20 line compose file with &quot;no configuration&quot;? A newbie?</div><br/><div id="40521266" class="c"><input type="checkbox" id="c-40521266" checked=""/><div class="controls bullet"><span class="by">wruza</span><span>|</span><a href="#40520019">root</a><span>|</span><a href="#40520721">parent</a><span>|</span><a href="#40521111">next</a><span>|</span><label class="collapse" for="c-40521266">[-]</label><label class="expand" for="c-40521266">[1 more]</label></div><br/><div class="children"><div class="content">An LLM of course. They are really good at “trivial but you have to find a good tutorial” types of work.</div><br/></div></div><div id="40521111" class="c"><input type="checkbox" id="c-40521111" checked=""/><div class="controls bullet"><span class="by">cess11</span><span>|</span><a href="#40520019">root</a><span>|</span><a href="#40520721">parent</a><span>|</span><a href="#40521266">prev</a><span>|</span><a href="#40520157">next</a><span>|</span><label class="collapse" for="c-40521111">[-]</label><label class="expand" for="c-40521111">[1 more]</label></div><br/><div class="children"><div class="content">When you&#x27;re configuring Internet facing Linux services you&#x27;re kind of out of the newbie area.<p>A newbie is more likely to use the built-in development server and then SFTP a &#x27;git archive&#x27; to a shared host.</div><br/></div></div></div></div></div></div><div id="40520157" class="c"><input type="checkbox" id="c-40520157" checked=""/><div class="controls bullet"><span class="by">donatj</span><span>|</span><a href="#40520019">root</a><span>|</span><a href="#40520085">parent</a><span>|</span><a href="#40520218">prev</a><span>|</span><a href="#40521465">next</a><span>|</span><label class="collapse" for="c-40520157">[-]</label><label class="expand" for="c-40520157">[1 more]</label></div><br/><div class="children"><div class="content">I think it would be roughly that easy for anyone with basic nginx experience. Nginx includes a php fast-cgi snippet that you just `include` from your server block.<p>It really is very easy.</div><br/></div></div></div></div><div id="40521465" class="c"><input type="checkbox" id="c-40521465" checked=""/><div class="controls bullet"><span class="by">ofrzeta</span><span>|</span><a href="#40520019">root</a><span>|</span><a href="#40520067">parent</a><span>|</span><a href="#40520085">prev</a><span>|</span><a href="#40520265">next</a><span>|</span><label class="collapse" for="c-40521465">[-]</label><label class="expand" for="c-40521465">[1 more]</label></div><br/><div class="children"><div class="content">Apache with mod_php actually takes just &quot;apt install libapache2-mod-php8.2&quot; to work.</div><br/></div></div><div id="40520265" class="c"><input type="checkbox" id="c-40520265" checked=""/><div class="controls bullet"><span class="by">francislavoie</span><span>|</span><a href="#40520019">root</a><span>|</span><a href="#40520067">parent</a><span>|</span><a href="#40521465">prev</a><span>|</span><a href="#40520135">next</a><span>|</span><label class="collapse" for="c-40520265">[-]</label><label class="expand" for="c-40520265">[8 more]</label></div><br/><div class="children"><div class="content">Just as a reminder, you can use Caddy + php-fpm as well (with vanilla Caddy, no plugins).<p>What this does is give you a way to run your webserver + PHP as a single process, or single Docker container (instead of the traditional 2-container approach), and it also unlocks the ability to run PHP in a worker mode, where you have long-running PHP processes that have your framework loaded in memory ready to serve requests, instead of booting the framework on every request (so, much lower request latency).</div><br/><div id="40520281" class="c"><input type="checkbox" id="c-40520281" checked=""/><div class="controls bullet"><span class="by">hparadiz</span><span>|</span><a href="#40520019">root</a><span>|</span><a href="#40520265">parent</a><span>|</span><a href="#40520135">next</a><span>|</span><label class="collapse" for="c-40520281">[-]</label><label class="expand" for="c-40520281">[7 more]</label></div><br/><div class="children"><div class="content">Caddy uses more RAM and has no inherent benefit when running a project in production professionally. Caddy is easier for self hosted cause it automatically handles HTTPS where Nginx does not.<p>Related reading:<p><a href="https:&#x2F;&#x2F;blog.tjll.net&#x2F;reverse-proxy-hot-dog-eating-contest-caddy-vs-nginx&#x2F;" rel="nofollow">https:&#x2F;&#x2F;blog.tjll.net&#x2F;reverse-proxy-hot-dog-eating-contest-c...</a></div><br/><div id="40520842" class="c"><input type="checkbox" id="c-40520842" checked=""/><div class="controls bullet"><span class="by">withinboredom</span><span>|</span><a href="#40520019">root</a><span>|</span><a href="#40520281">parent</a><span>|</span><a href="#40520666">next</a><span>|</span><label class="collapse" for="c-40520842">[-]</label><label class="expand" for="c-40520842">[1 more]</label></div><br/><div class="children"><div class="content">Caddy “uses” more ram because Go is a garbage collected language. It can free tons of it, but that costs cpu cycles. It generally won’t spend too much time freeing memory until the system is under pressure.<p>Because it’s Go, you can tune garbage collection to be super aggressive, at the expense of speed.</div><br/></div></div><div id="40520666" class="c"><input type="checkbox" id="c-40520666" checked=""/><div class="controls bullet"><span class="by">m_sahaf</span><span>|</span><a href="#40520019">root</a><span>|</span><a href="#40520281">parent</a><span>|</span><a href="#40520842">prev</a><span>|</span><a href="#40520563">next</a><span>|</span><label class="collapse" for="c-40520666">[-]</label><label class="expand" for="c-40520666">[2 more]</label></div><br/><div class="children"><div class="content">Citing that particular blog post isn&#x27;t making the point you think it makes. To quote:<p>&gt; The most striking piece of new knowledge for me was learning about failure modes. Nginx will fail by refusing or dropping connections, Caddy will fail by slowing everything down.<p>Do you want your clients failing to load your website at all? Is this the best approach to serving users?</div><br/><div id="40520735" class="c"><input type="checkbox" id="c-40520735" checked=""/><div class="controls bullet"><span class="by">jeroenhd</span><span>|</span><a href="#40520019">root</a><span>|</span><a href="#40520666">parent</a><span>|</span><a href="#40520563">next</a><span>|</span><label class="collapse" for="c-40520735">[-]</label><label class="expand" for="c-40520735">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Do you want your clients failing to load your website at all? Is this the best approach to serving users?<p>There are good reasons for picking either. Large services under sudden load sometimes implement queueing, which is just failing but stylish.<p>For my blog posts, I&#x27;d rather throw an error than have people wait for thirty seconds. The contents aren&#x27;t that important and the end result will probably look bad because of missing CSS anyway.<p>For API services, I&#x27;d want things to slow down rather than fail, unless failure is explicitly documented in the API and can be handled somewhat gracefully.</div><br/></div></div></div></div><div id="40520563" class="c"><input type="checkbox" id="c-40520563" checked=""/><div class="controls bullet"><span class="by">mholt</span><span>|</span><a href="#40520019">root</a><span>|</span><a href="#40520281">parent</a><span>|</span><a href="#40520666">prev</a><span>|</span><a href="#40520887">next</a><span>|</span><label class="collapse" for="c-40520563">[-]</label><label class="expand" for="c-40520563">[1 more]</label></div><br/><div class="children"><div class="content">&gt; has no inherent benefit when running a project in production professionally<p>Tell that to Stripe and Framer and numerous other businesses using it very seriously and very much professionally! ;)</div><br/></div></div><div id="40521149" class="c"><input type="checkbox" id="c-40521149" checked=""/><div class="controls bullet"><span class="by">cess11</span><span>|</span><a href="#40520019">root</a><span>|</span><a href="#40520281">parent</a><span>|</span><a href="#40520887">prev</a><span>|</span><a href="#40520135">next</a><span>|</span><label class="collapse" for="c-40521149">[-]</label><label class="expand" for="c-40521149">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m a pretty hardcore nginx fan with a decent chunk of rather low level professional experience with it in complex setups. The reason I&#x27;d still pick nginx over Caddy for prod is that I know really well how a broader tool set will work together, e.g. keepalived and whatnot.<p>Caddy kind of feels like a cute toy in comparison with nginx, but it&#x27;s not, by now it&#x27;s been seriously battle tested and has proven itself to be quite resource efficient and resilient.</div><br/></div></div></div></div></div></div><div id="40520135" class="c"><input type="checkbox" id="c-40520135" checked=""/><div class="controls bullet"><span class="by">n3storm</span><span>|</span><a href="#40520019">root</a><span>|</span><a href="#40520067">parent</a><span>|</span><a href="#40520265">prev</a><span>|</span><a href="#40520486">next</a><span>|</span><label class="collapse" for="c-40520135">[-]</label><label class="expand" for="c-40520135">[1 more]</label></div><br/><div class="children"><div class="content">I agree.
Having separated php processing and http processing brings good practices and helps further scalation.</div><br/></div></div></div></div><div id="40520486" class="c"><input type="checkbox" id="c-40520486" checked=""/><div class="controls bullet"><span class="by">KronisLV</span><span>|</span><a href="#40520019">parent</a><span>|</span><a href="#40520067">prev</a><span>|</span><a href="#40520788">next</a><span>|</span><label class="collapse" for="c-40520486">[-]</label><label class="expand" for="c-40520486">[1 more]</label></div><br/><div class="children"><div class="content">&gt; ...instead of the older LAMP which can require somewhat complex Apache configuration.<p>Is it really that bad? The Apache configuration seems decent with something like PHP-FPM: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=40256843">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=40256843</a><p><pre><code>  LoadModule proxy_fcgi_module &quot;&#x2F;usr&#x2F;lib&#x2F;apache2&#x2F;modules&#x2F;mod_proxy_fcgi.so&quot;
  &lt;FilesMatch \.(php|phar)$&gt;
    SetHandler &quot;proxy:fcgi:&#x2F;&#x2F;127.0.0.1:9000&quot;
  &lt;&#x2F;FilesMatch&gt;
</code></pre>
Here&#x27;s a more full example of Nginx that&#x27;s quite conceptually similar to how one would configure Apache, with installing the prerequisite packages: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=37443911">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=37443911</a><p>There are also prebuilt container images that you can use to achieve similar results, this is just in case you want to do it yourself and have a look at what&#x27;s under the hood a bit more.<p>In my eyes, that&#x27;s certainly easier than configuring the Java app servers of old, like doing manual Tomcat or GlassFish configuration or whatever people spent time on back then. A single run command will usually be better regardless of the environment, but LAMP isn&#x27;t all that bad either, when compared to the other stacks out there.</div><br/></div></div><div id="40520788" class="c"><input type="checkbox" id="c-40520788" checked=""/><div class="controls bullet"><span class="by">pathartl</span><span>|</span><a href="#40520019">parent</a><span>|</span><a href="#40520486">prev</a><span>|</span><a href="#40520316">next</a><span>|</span><label class="collapse" for="c-40520788">[-]</label><label class="expand" for="c-40520788">[1 more]</label></div><br/><div class="children"><div class="content">I cut my teeth as a WordPress dev and left the scene for .NET when it was still popular to use Vagrant to setup your dev environment. While I&#x27;m glad things have progressed since then, I have a trauma response to those days. The amount of hours spent getting a proper config with XDebug setup (oh god, what an absolute backwards-ass nightmare) was substantial.</div><br/></div></div></div></div><div id="40520316" class="c"><input type="checkbox" id="c-40520316" checked=""/><div class="controls bullet"><span class="by">NorwegianDude</span><span>|</span><a href="#40520019">prev</a><span>|</span><a href="#40520042">next</a><span>|</span><label class="collapse" for="c-40520316">[-]</label><label class="expand" for="c-40520316">[4 more]</label></div><br/><div class="children"><div class="content">I tried it and found it to be really slow, not even using my cores properly. Spent some time in the lacking docs and didn&#x27;t figure it out...<p>It says production ready with just a few commands and states 3,5 times the performance of fpm, but it&#x27;s running at like 1 % of the performance of fpm for me. I also tried the executable, same issue. Was expecting at least 200K rps for hello world...</div><br/><div id="40520851" class="c"><input type="checkbox" id="c-40520851" checked=""/><div class="controls bullet"><span class="by">kdunglas</span><span>|</span><a href="#40520316">parent</a><span>|</span><a href="#40520346">next</a><span>|</span><label class="collapse" for="c-40520851">[-]</label><label class="expand" for="c-40520851">[1 more]</label></div><br/><div class="children"><div class="content">Hi,<p>FrankenPHP author here. We would very much appreciate a reproducer. According to most benchmarks, FrankenPHP is generally much faster (~3 times) than FPM when worker mode is enabled, but there are still some outliers, and we&#x27;re working with PHP maintainers to fix them.</div><br/></div></div><div id="40520346" class="c"><input type="checkbox" id="c-40520346" checked=""/><div class="controls bullet"><span class="by">geenat</span><span>|</span><a href="#40520316">parent</a><span>|</span><a href="#40520851">prev</a><span>|</span><a href="#40520722">next</a><span>|</span><label class="collapse" for="c-40520346">[-]</label><label class="expand" for="c-40520346">[1 more]</label></div><br/><div class="children"><div class="content">Would appreciate sharing your experience so we can get this addressed: <a href="https:&#x2F;&#x2F;github.com&#x2F;dunglas&#x2F;frankenphp&#x2F;discussions&#x2F;294">https:&#x2F;&#x2F;github.com&#x2F;dunglas&#x2F;frankenphp&#x2F;discussions&#x2F;294</a><p>It&#x27;s really awkward because Caddy by itself performs very well with PHP.</div><br/></div></div></div></div><div id="40520042" class="c"><input type="checkbox" id="c-40520042" checked=""/><div class="controls bullet"><span class="by">geenat</span><span>|</span><a href="#40520316">prev</a><span>|</span><a href="#40520548">next</a><span>|</span><label class="collapse" for="c-40520042">[-]</label><label class="expand" for="c-40520042">[2 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;github.com&#x2F;dunglas&#x2F;frankenphp&#x2F;discussions&#x2F;294">https:&#x2F;&#x2F;github.com&#x2F;dunglas&#x2F;frankenphp&#x2F;discussions&#x2F;294</a><p>Has perf issues. Otherwise it&#x27;s a really promising project.</div><br/><div id="40520854" class="c"><input type="checkbox" id="c-40520854" checked=""/><div class="controls bullet"><span class="by">withinboredom</span><span>|</span><a href="#40520042">parent</a><span>|</span><a href="#40520548">next</a><span>|</span><label class="collapse" for="c-40520854">[-]</label><label class="expand" for="c-40520854">[1 more]</label></div><br/><div class="children"><div class="content">If I could reproduce it, I’d happily take two weeks off from work and fix it. Nobody has mentioned how to reproduce it.</div><br/></div></div></div></div><div id="40520548" class="c"><input type="checkbox" id="c-40520548" checked=""/><div class="controls bullet"><span class="by">mg</span><span>|</span><a href="#40520042">prev</a><span>|</span><a href="#40520952">next</a><span>|</span><label class="collapse" for="c-40520548">[-]</label><label class="expand" for="c-40520548">[4 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>    docker run -v $PWD:&#x2F;app&#x2F;public -p 443:443 \
      dunglas&#x2F;frankenphp
</code></pre>
If you want to build a docker container yourself that you can use to serve your app, then running these commands should do the trick to turn a fresh Debian into the container you need:<p><pre><code>    apt install -y apache2 libapache2-mod-php
    cat &lt;&lt; &#x27;EOF&#x27; &gt; &#x2F;etc&#x2F;apache2&#x2F;sites-enabled&#x2F;000-default.conf
    ServerName mysite.local
    &lt;Directory &#x2F;app&#x2F;public&gt;
        AllowOverride All
    &lt;&#x2F;Directory&gt;
    &lt;VirtualHost *:80&gt;
        DocumentRoot &#x2F;app&#x2F;public
    &lt;&#x2F;VirtualHost&gt;
    EOF
</code></pre>
Friends and I maintain a repo which shows how to go from zero to a running web application via popular languages and frameworks here:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;no-gravity&#x2F;web_app_from_scratch">https:&#x2F;&#x2F;github.com&#x2F;no-gravity&#x2F;web_app_from_scratch</a></div><br/><div id="40520632" class="c"><input type="checkbox" id="c-40520632" checked=""/><div class="controls bullet"><span class="by">lnxg33k1</span><span>|</span><a href="#40520548">parent</a><span>|</span><a href="#40520603">next</a><span>|</span><label class="collapse" for="c-40520632">[-]</label><label class="expand" for="c-40520632">[1 more]</label></div><br/><div class="children"><div class="content">I started working a month ago for a company using mod_php, it&#x27;s painful, every time you start xdebug, then after the debugging session, you need to restart apache, I started yesterday configuring apache2 to use php-fpm, but I was just wondering if it could work for us, at least in dev, this frankenphp, just can&#x27;t find how to install php-exts in the docs</div><br/></div></div><div id="40520603" class="c"><input type="checkbox" id="c-40520603" checked=""/><div class="controls bullet"><span class="by">johnchristopher</span><span>|</span><a href="#40520548">parent</a><span>|</span><a href="#40520632">prev</a><span>|</span><a href="#40520952">next</a><span>|</span><label class="collapse" for="c-40520603">[-]</label><label class="expand" for="c-40520603">[2 more]</label></div><br/><div class="children"><div class="content">Unless I am mistaken this won&#x27;t work: does default apache 000-default.conf vhost redirect traffic from 443 to 80 ?</div><br/><div id="40520669" class="c"><input type="checkbox" id="c-40520669" checked=""/><div class="controls bullet"><span class="by">mg</span><span>|</span><a href="#40520548">root</a><span>|</span><a href="#40520603">parent</a><span>|</span><a href="#40520952">next</a><span>|</span><label class="collapse" for="c-40520669">[-]</label><label class="expand" for="c-40520669">[1 more]</label></div><br/><div class="children"><div class="content">To support SSL you would add a virtual host section like this:<p><pre><code>    &lt;VirtualHost *:443&gt;
        ServerName mysite.local
        SSLEngine on
        SSLCertificateFile    &#x2F;path&#x2F;to&#x2F;cert
        SSLCertificateKeyFile &#x2F;path&#x2F;to&#x2F;key
        DocumentRoot &#x2F;app&#x2F;public
    &lt;&#x2F;VirtualHost&gt;
</code></pre>
And either use a real cert or add a command to create a self signed one:<p><pre><code>    openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout key -out cert</code></pre></div><br/></div></div></div></div></div></div><div id="40520952" class="c"><input type="checkbox" id="c-40520952" checked=""/><div class="controls bullet"><span class="by">blixt</span><span>|</span><a href="#40520548">prev</a><span>|</span><a href="#40521103">next</a><span>|</span><label class="collapse" for="c-40520952">[-]</label><label class="expand" for="c-40520952">[2 more]</label></div><br/><div class="children"><div class="content">Reminds me of that time 10 years ago when I tried to make Go more like PHP instead of the other way around: <a href="https:&#x2F;&#x2F;github.com&#x2F;blixt&#x2F;go-pher">https:&#x2F;&#x2F;github.com&#x2F;blixt&#x2F;go-pher</a><p>More seriously, happy to see worker mode in this server. PHP does come with several performance downsides, though I’m sure a lot of them have been worked around in the past decade. I don’t think I’d do PHP again though if I’m being honest.</div><br/><div id="40521407" class="c"><input type="checkbox" id="c-40521407" checked=""/><div class="controls bullet"><span class="by">pseudosavant</span><span>|</span><a href="#40520952">parent</a><span>|</span><a href="#40521103">next</a><span>|</span><label class="collapse" for="c-40521407">[-]</label><label class="expand" for="c-40521407">[1 more]</label></div><br/><div class="children"><div class="content">There seem to be a lot of us with this PHP sentiment. PHP is like a girlfriend you lived with that was easy going and super cool at first...but by the end she might have been trying to poison you. She&#x27;s been to therapy since and doing really awesome, but how could you ever go back right?<p>Like, I&#x27;m really happy for the (many) remaining PHP devs that it isn&#x27;t the shitshow it got to be around PHP6. But it could never tempt me back. Deno, Django, Go, dotnet...plenty of other fish in the sea.</div><br/></div></div></div></div><div id="40521103" class="c"><input type="checkbox" id="c-40521103" checked=""/><div class="controls bullet"><span class="by">oksteven</span><span>|</span><a href="#40520952">prev</a><span>|</span><a href="#40519910">next</a><span>|</span><label class="collapse" for="c-40521103">[-]</label><label class="expand" for="c-40521103">[1 more]</label></div><br/><div class="children"><div class="content">I have been looking for something like this for a while; it&#x27;s great to see one now. My current approach is to use nginx container as a proxy to another container which run php-fpm, I don&#x27;t think it&#x27;s efficient enough. I&#x27;ll try Frankenphp and see if it can do better.</div><br/></div></div><div id="40519910" class="c"><input type="checkbox" id="c-40519910" checked=""/><div class="controls bullet"><span class="by">dang</span><span>|</span><a href="#40521103">prev</a><span>|</span><a href="#40520304">next</a><span>|</span><label class="collapse" for="c-40519910">[-]</label><label class="expand" for="c-40519910">[3 more]</label></div><br/><div class="children"><div class="content">Related:<p><i>Show HN: FrankenPHP, an app server for PHP written in Go</i> - <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=33205282">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=33205282</a> - Oct 2022 (83 comments)</div><br/><div id="40519985" class="c"><input type="checkbox" id="c-40519985" checked=""/><div class="controls bullet"><span class="by">infogulch</span><span>|</span><a href="#40519910">parent</a><span>|</span><a href="#40519938">next</a><span>|</span><label class="collapse" for="c-40519985">[-]</label><label class="expand" for="c-40519985">[1 more]</label></div><br/><div class="children"><div class="content">Also, on the homepage today, which may have been inspiration:<p><i>Caddy 2.8</i> - <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=40517576">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=40517576</a></div><br/></div></div><div id="40519938" class="c"><input type="checkbox" id="c-40519938" checked=""/><div class="controls bullet"><span class="by">gnabgib</span><span>|</span><a href="#40519910">parent</a><span>|</span><a href="#40519985">prev</a><span>|</span><a href="#40520304">next</a><span>|</span><label class="collapse" for="c-40519938">[-]</label><label class="expand" for="c-40519938">[1 more]</label></div><br/><div class="children"><div class="content">And <i>Show HN: Package PHP apps as standalone, self-executable binaries</i> (29 points, 5 months ago, 7 comments) :D<p>[0]: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=38569637">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=38569637</a></div><br/></div></div></div></div><div id="40520304" class="c"><input type="checkbox" id="c-40520304" checked=""/><div class="controls bullet"><span class="by">CoolCold</span><span>|</span><a href="#40519910">prev</a><span>|</span><a href="#40520932">next</a><span>|</span><label class="collapse" for="c-40520304">[-]</label><label class="expand" for="c-40520304">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve tried to do Wordpress benchmark under FrankenPHP and under Apache&#x27;s Mod-PHP - I couldn&#x27;t see evidence of winning for FPHP. Have not dug deep enough though and test was in Docker, not on normal setup. Wordpress was basically in default setup - no heavy themes or anything of this sort, not very realistic case too.<p>Still want to repeat test and understand it better.</div><br/><div id="40520905" class="c"><input type="checkbox" id="c-40520905" checked=""/><div class="controls bullet"><span class="by">kdunglas</span><span>|</span><a href="#40520304">parent</a><span>|</span><a href="#40520431">next</a><span>|</span><label class="collapse" for="c-40520905">[-]</label><label class="expand" for="c-40520905">[1 more]</label></div><br/><div class="children"><div class="content">Unlike Laravel and Symfony, WordPress doesn&#x27;t support the worker mode of FrankenPHP (yet?), so there are not many benefits in terms of performance (except the ability to preload assets using 103 Early Hints, which can reduce the latency of a page load by 30%).<p>That being said, FrankenPHP makes it easy to enable HTTP cache with WordPress and simplifies the deployment story. There is a dedicated project for WordPress and FrankenPHP, that comes with a built-in HTTP cache tailored for WordPress (using the Souin Go library): <a href="https:&#x2F;&#x2F;github.com&#x2F;StephenMiracle&#x2F;frankenwp">https:&#x2F;&#x2F;github.com&#x2F;StephenMiracle&#x2F;frankenwp</a></div><br/></div></div><div id="40520431" class="c"><input type="checkbox" id="c-40520431" checked=""/><div class="controls bullet"><span class="by">mhitza</span><span>|</span><a href="#40520304">parent</a><span>|</span><a href="#40520905">prev</a><span>|</span><a href="#40520932">next</a><span>|</span><label class="collapse" for="c-40520431">[-]</label><label class="expand" for="c-40520431">[1 more]</label></div><br/><div class="children"><div class="content">Maybe you&#x27;re using that name because you&#x27;re accustomed to, but as a standard you should be using proxy_fcgi with Apache. Should squeeze out a bit of extra memory out of Apache and leave room for more PHP requests.</div><br/></div></div></div></div><div id="40520932" class="c"><input type="checkbox" id="c-40520932" checked=""/><div class="controls bullet"><span class="by">thomasfromcdnjs</span><span>|</span><a href="#40520304">prev</a><span>|</span><a href="#40521276">next</a><span>|</span><label class="collapse" for="c-40520932">[-]</label><label class="expand" for="c-40520932">[5 more]</label></div><br/><div class="children"><div class="content">It would seem that this is more or less an alternative to Octane but I don&#x27;t understand why there is documentation to also run Octane -&gt; <a href="https:&#x2F;&#x2F;frankenphp.dev&#x2F;docs&#x2F;laravel&#x2F;#laravel-octane&#x2F;" rel="nofollow">https:&#x2F;&#x2F;frankenphp.dev&#x2F;docs&#x2F;laravel&#x2F;#laravel-octane&#x2F;</a><p>Why would you run both?</div><br/><div id="40521024" class="c"><input type="checkbox" id="c-40521024" checked=""/><div class="controls bullet"><span class="by">francislavoie</span><span>|</span><a href="#40520932">parent</a><span>|</span><a href="#40521075">next</a><span>|</span><label class="collapse" for="c-40521024">[-]</label><label class="expand" for="c-40521024">[3 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not an &quot;alternative&quot;, FrankenPHP is one of the 3 available drivers for Octane. See the Laravel docs <a href="https:&#x2F;&#x2F;laravel.com&#x2F;docs&#x2F;11.x&#x2F;octane" rel="nofollow">https:&#x2F;&#x2F;laravel.com&#x2F;docs&#x2F;11.x&#x2F;octane</a> Octane is basically Laravel&#x27;s branding for its &quot;worker mode&quot;, i.e. running a long-running process which boots the framework and then processes requests, without needing to reboot the framework on every request.</div><br/><div id="40521105" class="c"><input type="checkbox" id="c-40521105" checked=""/><div class="controls bullet"><span class="by">thomasfromcdnjs</span><span>|</span><a href="#40520932">root</a><span>|</span><a href="#40521024">parent</a><span>|</span><a href="#40521075">next</a><span>|</span><label class="collapse" for="c-40521105">[-]</label><label class="expand" for="c-40521105">[2 more]</label></div><br/><div class="children"><div class="content">Thanks for the answer.<p>So you would turn on Frankens worker mode to sit on top of Laravel Octanes workers?<p>My understanding is that Franken keeps the app running so Laravel wouldn&#x27;t need to restart anyway?</div><br/><div id="40521160" class="c"><input type="checkbox" id="c-40521160" checked=""/><div class="controls bullet"><span class="by">francislavoie</span><span>|</span><a href="#40520932">root</a><span>|</span><a href="#40521105">parent</a><span>|</span><a href="#40521075">next</a><span>|</span><label class="collapse" for="c-40521160">[-]</label><label class="expand" for="c-40521160">[1 more]</label></div><br/><div class="children"><div class="content">No, you use Octane to run FrankenPHP. Octane will download and run FrankenPHP for you.<p>FrankenPHP is a program which has a webserver (Caddy) and PHP built-in, and worker mode allows it to run a pool of workers which have your Laravel app bootstrapped (all your service providers, middleware, controllers ready to go in memory) and then FrankenPHP feeds it requests as they come in.</div><br/></div></div></div></div></div></div><div id="40521075" class="c"><input type="checkbox" id="c-40521075" checked=""/><div class="controls bullet"><span class="by">yurishimo</span><span>|</span><a href="#40520932">parent</a><span>|</span><a href="#40521024">prev</a><span>|</span><a href="#40521276">next</a><span>|</span><label class="collapse" for="c-40521075">[-]</label><label class="expand" for="c-40521075">[1 more]</label></div><br/><div class="children"><div class="content">The Go container provides an environment in which to run Octane. Your webserver still needs to know to reroute traffic appropriately. You can think of FrankenPHP as more of a webserver&#x2F;app server all bundled into one binary.</div><br/></div></div></div></div><div id="40521276" class="c"><input type="checkbox" id="c-40521276" checked=""/><div class="controls bullet"><span class="by">timvdalen</span><span>|</span><a href="#40520932">prev</a><span>|</span><a href="#40520485">next</a><span>|</span><label class="collapse" for="c-40521276">[-]</label><label class="expand" for="c-40521276">[2 more]</label></div><br/><div class="children"><div class="content">What does it mean to get rid of PSR-7 in today&#x27;s age? Do people really miss $_GET and $_POST?</div><br/><div id="40521370" class="c"><input type="checkbox" id="c-40521370" checked=""/><div class="controls bullet"><span class="by">kdunglas</span><span>|</span><a href="#40521276">parent</a><span>|</span><a href="#40520485">next</a><span>|</span><label class="collapse" for="c-40521370">[-]</label><label class="expand" for="c-40521370">[1 more]</label></div><br/><div class="children"><div class="content">This means that in addition to any PSR-7 implementation, you can run apps using HttpFoundation (Symfony, Laravel, Drupal, etc) and &quot;legacy&quot; code using superglobals without the need for an adapter.</div><br/></div></div></div></div><div id="40520485" class="c"><input type="checkbox" id="c-40520485" checked=""/><div class="controls bullet"><span class="by">pachico</span><span>|</span><a href="#40521276">prev</a><span>|</span><a href="#40521135">next</a><span>|</span><label class="collapse" for="c-40520485">[-]</label><label class="expand" for="c-40520485">[1 more]</label></div><br/><div class="children"><div class="content">I enjoy seeing this in the front page of HN.<p>My feeling is that FPM and its share nothing arquitecture has been both the key of PHPs success many years ago but also its condemnation.</div><br/></div></div><div id="40521135" class="c"><input type="checkbox" id="c-40521135" checked=""/><div class="controls bullet"><span class="by">ThinkBeat</span><span>|</span><a href="#40520485">prev</a><span>|</span><a href="#40520884">next</a><span>|</span><label class="collapse" for="c-40521135">[-]</label><label class="expand" for="c-40521135">[3 more]</label></div><br/><div class="children"><div class="content">Does this still require running Nginx as a reverse proxy in front of it?</div><br/><div id="40521143" class="c"><input type="checkbox" id="c-40521143" checked=""/><div class="controls bullet"><span class="by">withinboredom</span><span>|</span><a href="#40521135">parent</a><span>|</span><a href="#40521146">next</a><span>|</span><label class="collapse" for="c-40521143">[-]</label><label class="expand" for="c-40521143">[1 more]</label></div><br/><div class="children"><div class="content">No, and I&#x27;d recommend not doing so unless you need to. Caddy&#x2F;FPHP supports https3 out of the box, and I don&#x27;t think nginx does (at least the versions currently packaged in major distros).</div><br/></div></div><div id="40521146" class="c"><input type="checkbox" id="c-40521146" checked=""/><div class="controls bullet"><span class="by">elitepleb</span><span>|</span><a href="#40521135">parent</a><span>|</span><a href="#40521143">prev</a><span>|</span><a href="#40520884">next</a><span>|</span><label class="collapse" for="c-40521146">[-]</label><label class="expand" for="c-40521146">[1 more]</label></div><br/><div class="children"><div class="content">this runs caddy (another famous reverse proxy) for you</div><br/></div></div></div></div><div id="40520884" class="c"><input type="checkbox" id="c-40520884" checked=""/><div class="controls bullet"><span class="by">jumperabg</span><span>|</span><a href="#40521135">prev</a><span>|</span><a href="#40519934">next</a><span>|</span><label class="collapse" for="c-40520884">[-]</label><label class="expand" for="c-40520884">[3 more]</label></div><br/><div class="children"><div class="content">Are there any benefits on running WordPress on top of FrankenPHP?</div><br/><div id="40521184" class="c"><input type="checkbox" id="c-40521184" checked=""/><div class="controls bullet"><span class="by">withinboredom</span><span>|</span><a href="#40520884">parent</a><span>|</span><a href="#40521042">next</a><span>|</span><label class="collapse" for="c-40521184">[-]</label><label class="expand" for="c-40521184">[1 more]</label></div><br/><div class="children"><div class="content">Not yet.<p>It&#x27;s possible when combined with some multi-site features of WordPress, an mu-plugin could enable worker mode with WordPress. Though, I&#x27;d have to contact my old employer (Automattic) to ask if they would be ok with me using an approach used on WordPress.com, which I&#x27;m fairly certain is a &#x27;trade secret.&#x27;</div><br/></div></div><div id="40521042" class="c"><input type="checkbox" id="c-40521042" checked=""/><div class="controls bullet"><span class="by">francislavoie</span><span>|</span><a href="#40520884">parent</a><span>|</span><a href="#40521184">prev</a><span>|</span><a href="#40519934">next</a><span>|</span><label class="collapse" for="c-40521042">[-]</label><label class="expand" for="c-40521042">[1 more]</label></div><br/><div class="children"><div class="content">You won&#x27;t notice much performance benefit (because WordPress doesn&#x27;t support worker mode yet), but it is simpler to run and deploy (single binary) and you get all the benefits of Caddy out of box too, like TLS automation.</div><br/></div></div></div></div><div id="40519893" class="c"><input type="checkbox" id="c-40519893" checked=""/><div class="controls bullet"><span class="by">alberth</span><span>|</span><a href="#40519934">prev</a><span>|</span><a href="#40520453">next</a><span>|</span><label class="collapse" for="c-40519893">[-]</label><label class="expand" for="c-40519893">[5 more]</label></div><br/><div class="children"><div class="content">Is this just Caddy + PHP?</div><br/><div id="40519988" class="c"><input type="checkbox" id="c-40519988" checked=""/><div class="controls bullet"><span class="by">WillyOnWheels</span><span>|</span><a href="#40519893">parent</a><span>|</span><a href="#40520453">next</a><span>|</span><label class="collapse" for="c-40519988">[-]</label><label class="expand" for="c-40519988">[4 more]</label></div><br/><div class="children"><div class="content">It&#x27;s basically a Caddy plugin that works as a drop in replacement for php-fpm, created by <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;threads?id=kdunglas">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;threads?id=kdunglas</a></div><br/><div id="40520297" class="c"><input type="checkbox" id="c-40520297" checked=""/><div class="controls bullet"><span class="by">francislavoie</span><span>|</span><a href="#40519893">root</a><span>|</span><a href="#40519988">parent</a><span>|</span><a href="#40520412">next</a><span>|</span><label class="collapse" for="c-40520297">[-]</label><label class="expand" for="c-40520297">[1 more]</label></div><br/><div class="children"><div class="content">I wouldn&#x27;t really call it a drop-in replacement for php-fpm. It&#x27;s more like emulating the way Apache+PHP was run traditionally, i.e. PHP is closer to the webserver instead of being a separate piece as it is with php-fpm (and needing fastcgi as protocol glue).<p>But yes, from a practical standpoint, your PHP apps should _just work_ if you run it with this instead of php-fpm, provided that you aren&#x27;t doing anything weird.<p>If you&#x27;re using a modern PHP framework (e.g. Laravel, Symfony) then you can use FrankenPHP&#x27;s worker mode which is a huge boost in performance by keeping workers running which have the framework already warmed up and ready to accept requests right away, instead of having to boot the framework on every request.</div><br/></div></div><div id="40520412" class="c"><input type="checkbox" id="c-40520412" checked=""/><div class="controls bullet"><span class="by">CodeCompost</span><span>|</span><a href="#40519893">root</a><span>|</span><a href="#40519988">parent</a><span>|</span><a href="#40520297">prev</a><span>|</span><a href="#40520453">next</a><span>|</span><label class="collapse" for="c-40520412">[-]</label><label class="expand" for="c-40520412">[2 more]</label></div><br/><div class="children"><div class="content">What is the Go part? It&#x27;s a PHP interpreter or is PHP still doing all the work?</div><br/><div id="40520491" class="c"><input type="checkbox" id="c-40520491" checked=""/><div class="controls bullet"><span class="by">francislavoie</span><span>|</span><a href="#40519893">root</a><span>|</span><a href="#40520412">parent</a><span>|</span><a href="#40520453">next</a><span>|</span><label class="collapse" for="c-40520491">[-]</label><label class="expand" for="c-40520491">[1 more]</label></div><br/><div class="children"><div class="content">Go is acting as the process manager for PHP (either keeping a pool of workers running, or directly invoking PHP via CGO), and as the HTTP&#x2F;HTTPS server (Caddy, obviously), ACME automation, etc. It&#x27;s not a &quot;PHP interpreter&quot;, it&#x27;s literally PHP itself (written in C, compiled in with CGO).</div><br/></div></div></div></div></div></div></div></div><div id="40520453" class="c"><input type="checkbox" id="c-40520453" checked=""/><div class="controls bullet"><span class="by">63</span><span>|</span><a href="#40519893">prev</a><span>|</span><a href="#40520195">next</a><span>|</span><label class="collapse" for="c-40520453">[-]</label><label class="expand" for="c-40520453">[1 more]</label></div><br/><div class="children"><div class="content">Interesting for sure. My current setup is your basic nginx, fastcgi, php-fpm. I have some custom ngnix config though and I wouldn&#x27;t want to have to switch web servers. I guess I could still use nginx as a reverse proxy and point it to this but then what&#x27;s the point? I&#x27;ll look into it for future projects where I really just need a simple php deployment, but for my needlessly complex project I&#x27;m already working on, I don&#x27;t think it fits.</div><br/></div></div><div id="40520195" class="c"><input type="checkbox" id="c-40520195" checked=""/><div class="controls bullet"><span class="by">chuckreynolds</span><span>|</span><a href="#40520453">prev</a><span>|</span><a href="#40520623">next</a><span>|</span><label class="collapse" for="c-40520195">[-]</label><label class="expand" for="c-40520195">[1 more]</label></div><br/><div class="children"><div class="content">oooh interesting. been a min since i&#x27;ve needed a php + WP setup but... not bad.</div><br/></div></div><div id="40521095" class="c"><input type="checkbox" id="c-40521095" checked=""/><div class="controls bullet"><span class="by">zmxz</span><span>|</span><a href="#40520623">prev</a><span>|</span><a href="#40519984">next</a><span>|</span><label class="collapse" for="c-40521095">[-]</label><label class="expand" for="c-40521095">[4 more]</label></div><br/><div class="children"><div class="content">There are claims this is faster. It&#x27;s not. I used it, together with other &quot;alternative&quot; runtimes which are just PHP command line interface long running scripts with some sort of task distribution balancer in front. Just like PHP-FPM is.<p>The apparent speedup comes from the fact it&#x27;s not shared-nothing, meaning that objects from previous requests (and variables) are persisted and present in subsequent requests. This makes it work exactly like Node.js, removing the wonderful part of PHP which is that it automatically cleans up all the crap devs  created and creates clean slate when next request is to be executed.<p>All of these &quot;alternative&quot; runtimes are false positives, because they&#x27;re quick for first few requests but get slower and slower for the subsequent ones. Then, the workers are killed and restarted (precisely what PHP-FPM does too).<p>Since there&#x27;s no new engine behind executing PHP, the only way FrankenPHP (and others) can yield any performance is when they&#x27;re benchmarked against misconfigured PHP-FPM (opcache off, JIT off, persistent connections off).<p>It&#x27;s not my cup of tea. I like that there are attempts at doing &lt;something&gt; but turning PHP execution model into Node.js execution model isn&#x27;t the way to go.<p>I find it cheaper to throw a few bucks at stronger hardware compared to risking accurate execution to become flaky because shared-nothing is now unavailable.</div><br/><div id="40521171" class="c"><input type="checkbox" id="c-40521171" checked=""/><div class="controls bullet"><span class="by">withinboredom</span><span>|</span><a href="#40521095">parent</a><span>|</span><a href="#40519984">next</a><span>|</span><label class="collapse" for="c-40521171">[-]</label><label class="expand" for="c-40521171">[3 more]</label></div><br/><div class="children"><div class="content">The right answer, as always, is: &quot;it depends.&quot; There&#x27;s no definitive &quot;faster&quot; or &quot;slower&quot; anything and the claim is &quot;up to&quot; not &quot;you will get.&quot;<p>Some workloads won&#x27;t see any benefits, others will. While your anecdata might be useful, it is just that, an anecdote.</div><br/><div id="40521296" class="c"><input type="checkbox" id="c-40521296" checked=""/><div class="controls bullet"><span class="by">zmxz</span><span>|</span><a href="#40521095">root</a><span>|</span><a href="#40521171">parent</a><span>|</span><a href="#40519984">next</a><span>|</span><label class="collapse" for="c-40521296">[-]</label><label class="expand" for="c-40521296">[2 more]</label></div><br/><div class="children"><div class="content">It doesn&#x27;t even depend. The underlying engine that executes opcodes is the same. Minimal speedup from not having to execute several &quot;new objectname&quot; commands isn&#x27;t even a drop in the sea when it comes to what servers do.<p>I, for one, would love to be wrong about this and that FrankenPHP with all the other alternative runtimes actually brought benefits.</div><br/><div id="40521333" class="c"><input type="checkbox" id="c-40521333" checked=""/><div class="controls bullet"><span class="by">withinboredom</span><span>|</span><a href="#40521095">root</a><span>|</span><a href="#40521296">parent</a><span>|</span><a href="#40519984">next</a><span>|</span><label class="collapse" for="c-40521333">[-]</label><label class="expand" for="c-40521333">[1 more]</label></div><br/><div class="children"><div class="content">It absolutely does depend and &quot;several new&quot; might be &quot;thousands new&quot;. It literally depends on what you&#x27;re doing.<p>&gt; The underlying engine that executes opcodes is the same.<p>Not exactly. FrankenPHP uses a ZTS build of PHP, which includes thread-support. Meaning you can actually spawn real-life threads in your PHP code with just a bit of work.<p>I&#x27;ve actually been working on a Parallel drop-in replacement that uses FrankenPHP&#x2F;go instead of maintaining its own thread system.</div><br/></div></div></div></div></div></div></div></div><div id="40519984" class="c"><input type="checkbox" id="c-40519984" checked=""/><div class="controls bullet"><span class="by">notpushkin</span><span>|</span><a href="#40521095">prev</a><span>|</span><a href="#40520652">next</a><span>|</span><label class="collapse" for="c-40519984">[-]</label><label class="expand" for="c-40519984">[6 more]</label></div><br/><div class="children"><div class="content">&gt; Copy your PHP files in the document root, that’s all!<p><i>sigh</i></div><br/><div id="40520036" class="c"><input type="checkbox" id="c-40520036" checked=""/><div class="controls bullet"><span class="by">c0wb0yc0d3r</span><span>|</span><a href="#40519984">parent</a><span>|</span><a href="#40520652">next</a><span>|</span><label class="collapse" for="c-40520036">[-]</label><label class="expand" for="c-40520036">[5 more]</label></div><br/><div class="children"><div class="content">How would you prefer it to work?</div><br/><div id="40520114" class="c"><input type="checkbox" id="c-40520114" checked=""/><div class="controls bullet"><span class="by">darylteo</span><span>|</span><a href="#40519984">root</a><span>|</span><a href="#40520036">parent</a><span>|</span><a href="#40520652">next</a><span>|</span><label class="collapse" for="c-40520114">[-]</label><label class="expand" for="c-40520114">[4 more]</label></div><br/><div class="children"><div class="content">If I understand the top-poster&#x27;s issue correctly:<p><a href="https:&#x2F;&#x2F;frankenphp.dev&#x2F;docs&#x2F;" rel="nofollow">https:&#x2F;&#x2F;frankenphp.dev&#x2F;docs&#x2F;</a><p>docker run -v $PWD:&#x2F;app&#x2F;public \
    -p 80:80 -p 443:443 -p 443:443&#x2F;udp \
    dunglas&#x2F;frankenphp<p>This mounts the current working directory into &quot;public&quot;. Meaning, all .git, .env etc. will be publicly accessible.<p>Better form would be to mount a $PWD&#x2F;src directory instead. The documentation needs to be updated better for newbies. Generally ill-advised. Documentation just needs better updating or warnings. Very dangerous to inexperienced devs.<p>In comparison the Laravel integration, it instructs the following:<p><a href="https:&#x2F;&#x2F;frankenphp.dev&#x2F;docs&#x2F;laravel&#x2F;" rel="nofollow">https:&#x2F;&#x2F;frankenphp.dev&#x2F;docs&#x2F;laravel&#x2F;</a><p>docker run -p 80:80 -p 443:443 -p 443:443&#x2F;udp -v $PWD:&#x2F;app dunglas&#x2F;frankenphp<p>While all the sensitive files are mounted in, they have to be to function properly. In this case, they&#x27;re mounted to a more secure context.</div><br/><div id="40520711" class="c"><input type="checkbox" id="c-40520711" checked=""/><div class="controls bullet"><span class="by">withinboredom</span><span>|</span><a href="#40519984">root</a><span>|</span><a href="#40520114">parent</a><span>|</span><a href="#40520652">next</a><span>|</span><label class="collapse" for="c-40520711">[-]</label><label class="expand" for="c-40520711">[3 more]</label></div><br/><div class="children"><div class="content">It literally says “copy your PHP files” note the PHP part. It doesn’t say copy all your secrets and git history too.</div><br/><div id="40521086" class="c"><input type="checkbox" id="c-40521086" checked=""/><div class="controls bullet"><span class="by">huimang</span><span>|</span><a href="#40519984">root</a><span>|</span><a href="#40520711">parent</a><span>|</span><a href="#40520652">next</a><span>|</span><label class="collapse" for="c-40521086">[-]</label><label class="expand" for="c-40521086">[2 more]</label></div><br/><div class="children"><div class="content">If you run the above docker command, which is directly from the docs, it copies everything inside of your current working directory. Not just PHP files.</div><br/><div id="40521124" class="c"><input type="checkbox" id="c-40521124" checked=""/><div class="controls bullet"><span class="by">withinboredom</span><span>|</span><a href="#40519984">root</a><span>|</span><a href="#40521086">parent</a><span>|</span><a href="#40520652">next</a><span>|</span><label class="collapse" for="c-40521124">[-]</label><label class="expand" for="c-40521124">[1 more]</label></div><br/><div class="children"><div class="content">That docker command isn&#x27;t &quot;copying&quot; anything; it&#x27;s mounting, and I really hope people aren&#x27;t doing that in production. There&#x27;s a separate section on running in production.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>