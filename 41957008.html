<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1730019650594" as="style"/><link rel="stylesheet" href="styles.css?v=1730019650594"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://m4xc.dev/articles/fundamental-rc/">Fundamentals of Radiance Cascades</a> <span class="domain">(<a href="https://m4xc.dev">m4xc.dev</a>)</span></div><div class="subtext"><span>ibobev</span> | <span>22 comments</span></div><br/><div><div id="41958021" class="c"><input type="checkbox" id="c-41958021" checked=""/><div class="controls bullet"><span class="by">Negitivefrags</span><span>|</span><a href="#41958465">next</a><span>|</span><label class="collapse" for="c-41958021">[-]</label><label class="expand" for="c-41958021">[7 more]</label></div><br/><div class="children"><div class="content">This approach was originally developed by Alex Sanikov for Path of Exile 2.<p>Of course in PoE2 it&#x27;s used in full 3d.<p>The benefit of this approach is that you get global illumination with a constant cost for the entire scene and because it doesn&#x27;t use any temporal acculation, it has zero latency as well.<p>This means you can rely on it as the lighting for fast effects. For example: <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=p1SvodIDz6E" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=p1SvodIDz6E</a><p>There is no traditional &quot;lighting&quot; added to these two effects. The light on the nearby surfaces is indirect light from the GI solution that you get for free by just spawning the particles. That means all effects just naturally emit light with no extra work from artists.<p>On my GPU (which is admittedly a 4090) the GI solution runs in 0.8ms for a 4k scene in &quot;High&quot; quality. This is exactly what it will always cost, no matter what scene you choose.</div><br/><div id="41959773" class="c"><input type="checkbox" id="c-41959773" checked=""/><div class="controls bullet"><span class="by">midnightclubbed</span><span>|</span><a href="#41958021">parent</a><span>|</span><a href="#41958409">next</a><span>|</span><label class="collapse" for="c-41959773">[-]</label><label class="expand" for="c-41959773">[2 more]</label></div><br/><div class="children"><div class="content">One caveat is doing screen space means anything offscreen doesn’t contribute to lighting.  For a fixed perspective dungeon or 2d game it works great, but a light source behind a column or in another room will cast no light on the scene</div><br/><div id="41959940" class="c"><input type="checkbox" id="c-41959940" checked=""/><div class="controls bullet"><span class="by">jasonjmcghee</span><span>|</span><a href="#41958021">root</a><span>|</span><a href="#41959773">parent</a><span>|</span><a href="#41958409">next</a><span>|</span><label class="collapse" for="c-41959940">[-]</label><label class="expand" for="c-41959940">[1 more]</label></div><br/><div class="children"><div class="content">There are multiple ways to solve this issue. The most naive would be rendering to a larger texture and cropping, but with radiance cascades you can do better- you could only render what&#x27;s necessary based on per-cascade interval lengths. Depending on needed accuracy, you could calculate it similar to ambient light, only calculating it for the largest cascade- wouldn&#x27;t be perfect, but could feel pretty natural.<p>Definitely an area that could use more research!</div><br/></div></div></div></div><div id="41958409" class="c"><input type="checkbox" id="c-41958409" checked=""/><div class="controls bullet"><span class="by">isaacimagine</span><span>|</span><a href="#41958021">parent</a><span>|</span><a href="#41959773">prev</a><span>|</span><a href="#41958230">next</a><span>|</span><label class="collapse" for="c-41958409">[-]</label><label class="expand" for="c-41958409">[3 more]</label></div><br/><div class="children"><div class="content">From what I understand, PoE2 has a fixed-perspective camera, so radiance is calculated in screenspace (2D) as an optimization (and not using a 3D texture). It would be interesting to see how the performance of this technique scales to full 3D, as that would be significantly more expensive &#x2F; require a lower-resolution voxelization of the scene.</div><br/><div id="41959479" class="c"><input type="checkbox" id="c-41959479" checked=""/><div class="controls bullet"><span class="by">Negitivefrags</span><span>|</span><a href="#41958021">root</a><span>|</span><a href="#41958409">parent</a><span>|</span><a href="#41958885">next</a><span>|</span><label class="collapse" for="c-41959479">[-]</label><label class="expand" for="c-41959479">[1 more]</label></div><br/><div class="children"><div class="content">The source data is indeed from screen space, but this generates a full 3d data structure by ray marching the depth buffer. Its not using the 2D algorithm. In PoE2s case, it doesn’t need to go further since light sources are not usually going to be behind the camera.<p>You can gather data in other ways.</div><br/></div></div><div id="41958885" class="c"><input type="checkbox" id="c-41958885" checked=""/><div class="controls bullet"><span class="by">corysama</span><span>|</span><a href="#41958021">root</a><span>|</span><a href="#41958409">parent</a><span>|</span><a href="#41959479">prev</a><span>|</span><a href="#41958230">next</a><span>|</span><label class="collapse" for="c-41958885">[-]</label><label class="expand" for="c-41958885">[1 more]</label></div><br/><div class="children"><div class="content">From offhand comments I&#x27;ve read, you are right. It&#x27;s not practical for 3D.</div><br/></div></div></div></div><div id="41958230" class="c"><input type="checkbox" id="c-41958230" checked=""/><div class="controls bullet"><span class="by">stonethrowaway</span><span>|</span><a href="#41958021">parent</a><span>|</span><a href="#41958409">prev</a><span>|</span><a href="#41958465">next</a><span>|</span><label class="collapse" for="c-41958230">[-]</label><label class="expand" for="c-41958230">[1 more]</label></div><br/><div class="children"><div class="content">In the age of PoE is Diablo even relevant anymore?</div><br/></div></div></div></div><div id="41958465" class="c"><input type="checkbox" id="c-41958465" checked=""/><div class="controls bullet"><span class="by">ozarker</span><span>|</span><a href="#41958021">prev</a><span>|</span><a href="#41958444">next</a><span>|</span><label class="collapse" for="c-41958465">[-]</label><label class="expand" for="c-41958465">[1 more]</label></div><br/><div class="children"><div class="content">The guy that developed the technique works on Path of Exile. They’re using it for POE2, he gave an awesome talk about it here<p><a href="https:&#x2F;&#x2F;youtu.be&#x2F;TrHHTQqmAaM?si=xrW0XT2lsGHqUYY_" rel="nofollow">https:&#x2F;&#x2F;youtu.be&#x2F;TrHHTQqmAaM?si=xrW0XT2lsGHqUYY_</a></div><br/></div></div><div id="41958444" class="c"><input type="checkbox" id="c-41958444" checked=""/><div class="controls bullet"><span class="by">arijo</span><span>|</span><a href="#41958465">prev</a><span>|</span><a href="#41958251">next</a><span>|</span><label class="collapse" for="c-41958444">[-]</label><label class="expand" for="c-41958444">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;m trying to understand the basic idea of Radiance Cascades (I don&#x27;t know much about game development and ray tracing).<p>Is the key idea the fact that light intensity and shadowing require more resolution near the light source and lower resolution far from it?<p>So you have higher probe density nearby the light source and then relax it as distance increases minimising the number of radiance collection points?<p>Also using interpolation eliminates a lot of the calculations.<p>Does this make any sense? I&#x27;m sure there&#x27;s a lot more detail, but I was looking for a bird&#x27;s eye understanding that I can keep in the back of my mind.</div><br/><div id="41960118" class="c"><input type="checkbox" id="c-41960118" checked=""/><div class="controls bullet"><span class="by">rendaw</span><span>|</span><a href="#41958444">parent</a><span>|</span><a href="#41958850">next</a><span>|</span><label class="collapse" for="c-41960118">[-]</label><label class="expand" for="c-41960118">[1 more]</label></div><br/><div class="children"><div class="content">I didn&#x27;t get it either, I found this though which seems to be a much better fundamentals of radiance cascades: <a href="https:&#x2F;&#x2F;mini.gmshaders.com&#x2F;p&#x2F;radiance-cascades" rel="nofollow">https:&#x2F;&#x2F;mini.gmshaders.com&#x2F;p&#x2F;radiance-cascades</a><p>IIUC basically you have a quad&#x2F;oct-tree of probes throughout the area of screen space (or volume of view frustum?).  The fine level uses faster measurements, and the broad level uses more intensive measurements.  The number of levels&#x2F;fineness determines resolution.<p>I guess for comparison:<p>- Radiance cascades: complexity based on resolution + view volume; can have leakage and other artifacts<p>- Ray tracing: complexity based on number of light sources, screen resolution, and noise reduction; has noise<p>- RTX: ??<p>- Radiosity: complexity based on surface area of scene<p>Also not sure, but I guess ray tracing + radiosity are harder to do in GPU?</div><br/></div></div><div id="41958850" class="c"><input type="checkbox" id="c-41958850" checked=""/><div class="controls bullet"><span class="by">pornel</span><span>|</span><a href="#41958444">parent</a><span>|</span><a href="#41960118">prev</a><span>|</span><a href="#41958251">next</a><span>|</span><label class="collapse" for="c-41958850">[-]</label><label class="expand" for="c-41958850">[1 more]</label></div><br/><div class="children"><div class="content">Essentially yes.<p>There&#x27;s ambient occlusion that computes light intensity with high spatial resolution, but completely handwaves the direction the light is coming from. OTOH there are environment maps that are rendered from a single location, so they have no spatial resolution, but have precise light intensity for every angle. Cascade Radiance observes that these two techniques are two extremes of spatial vs angular resolution trade-off, and it&#x27;s possible to render any spatial vs angular trade-off in between.<p>Getting information about light from all angles at all points would cost (all sample points × all angles), but Radiance Cascades computes and combines (very few sample points × all angles) + (some sample points × some angles) + (all sample points × very few angles), which works out to be much cheaper, and is still sufficient to render shadows accurately if the light sources are not too small.</div><br/></div></div></div></div><div id="41958251" class="c"><input type="checkbox" id="c-41958251" checked=""/><div class="controls bullet"><span class="by">cubefox</span><span>|</span><a href="#41958444">prev</a><span>|</span><a href="#41957711">next</a><span>|</span><label class="collapse" for="c-41958251">[-]</label><label class="expand" for="c-41958251">[2 more]</label></div><br/><div class="children"><div class="content">This article unfortunately presupposes understanding of (ir)radiance probes, a topic on which there isn&#x27;t even a Wikipedia article...</div><br/><div id="41959312" class="c"><input type="checkbox" id="c-41959312" checked=""/><div class="controls bullet"><span class="by">stonethrowaway</span><span>|</span><a href="#41958251">parent</a><span>|</span><a href="#41957711">next</a><span>|</span><label class="collapse" for="c-41959312">[-]</label><label class="expand" for="c-41959312">[1 more]</label></div><br/><div class="children"><div class="content">This is true for quite a few graphic algorithms today. Certain terms in the equations used are pre-computed, and you can generalize all of them in a sense to be “probes”, “queries”, “function inversions”, “look up tables” or whatever. The only real way to know what can be computed on the fly vs what can be stored is to go ahead, try to implement it, think really fucking hard, and then see what you can do in real time. That’s basically how the field has advanced the formulas used into something that can run in real time, or can run in screen space complexity rather than scene complexity, and so on.<p>An equation given to you will be one of 2 forms usually; the raw equation that may come from optics, in which case expect an ass load of calculus and diff equations with arcane terms not seen outside of Maxwell’s equations. Or, in the likely case, the presenter is a PhD ubermensch nerd who has already pulled the terms out, rewritten them, is presenting them, and you need to be really paying close attention to every single word during their talk to figure it out. It’s at your discretion to determine which of the two forms is easier for you to deal with.</div><br/></div></div></div></div><div id="41957711" class="c"><input type="checkbox" id="c-41957711" checked=""/><div class="controls bullet"><span class="by">wowxserr</span><span>|</span><a href="#41958251">prev</a><span>|</span><a href="#41957376">next</a><span>|</span><label class="collapse" for="c-41957711">[-]</label><label class="expand" for="c-41957711">[2 more]</label></div><br/><div class="children"><div class="content">So on my webcam there is a cover but it doesn&#x27;t fully cover the webcam. So this technology would be able to infer something from the radiance of the light seeping in around the edges?</div><br/><div id="41957905" class="c"><input type="checkbox" id="c-41957905" checked=""/><div class="controls bullet"><span class="by">pornel</span><span>|</span><a href="#41957711">parent</a><span>|</span><a href="#41957376">next</a><span>|</span><label class="collapse" for="c-41957905">[-]</label><label class="expand" for="c-41957905">[1 more]</label></div><br/><div class="children"><div class="content">This is a rendering technique designed for real-time graphics, and it&#x27;s not applicable to that kind of image analysis. It does what has already been possible with ray tracing, but using an approximation that makes it suitable for real-time graphics.<p>However, the technique has been used to speed up astrophysics calculations:<p><a href="https:&#x2F;&#x2F;arxiv.org&#x2F;pdf&#x2F;2408.14425" rel="nofollow">https:&#x2F;&#x2F;arxiv.org&#x2F;pdf&#x2F;2408.14425</a></div><br/></div></div></div></div><div id="41957376" class="c"><input type="checkbox" id="c-41957376" checked=""/><div class="controls bullet"><span class="by">justin66</span><span>|</span><a href="#41957711">prev</a><span>|</span><a href="#41957394">next</a><span>|</span><label class="collapse" for="c-41957376">[-]</label><label class="expand" for="c-41957376">[4 more]</label></div><br/><div class="children"><div class="content">They&#x27;re waiting for you, Gordon. <i>In the test chamber.</i></div><br/><div id="41958401" class="c"><input type="checkbox" id="c-41958401" checked=""/><div class="controls bullet"><span class="by">rustcleaner</span><span>|</span><a href="#41957376">parent</a><span>|</span><a href="#41960145">next</a><span>|</span><label class="collapse" for="c-41958401">[-]</label><label class="expand" for="c-41958401">[1 more]</label></div><br/><div class="children"><div class="content">&gt;it&#x27;s saturday morning 1998 and you are in your coziest sleepwear, on the computer in the living room.<p>I WANT TO GO BAAACK!</div><br/></div></div><div id="41960145" class="c"><input type="checkbox" id="c-41960145" checked=""/><div class="controls bullet"><span class="by">davesque</span><span>|</span><a href="#41957376">parent</a><span>|</span><a href="#41958401">prev</a><span>|</span><a href="#41957782">next</a><span>|</span><label class="collapse" for="c-41960145">[-]</label><label class="expand" for="c-41960145">[1 more]</label></div><br/><div class="children"><div class="content">Exactly what I thought of :).</div><br/></div></div><div id="41957782" class="c"><input type="checkbox" id="c-41957782" checked=""/><div class="controls bullet"><span class="by">DaiPlusPlus</span><span>|</span><a href="#41957376">parent</a><span>|</span><a href="#41960145">prev</a><span>|</span><a href="#41957394">next</a><span>|</span><label class="collapse" for="c-41957782">[-]</label><label class="expand" for="c-41957782">[1 more]</label></div><br/><div class="children"><div class="content">&gt; In the test chamber.<p>Flashbacks to sitting the GRE</div><br/></div></div></div></div><div id="41957394" class="c"><input type="checkbox" id="c-41957394" checked=""/><div class="controls bullet"><span class="by">gclawes</span><span>|</span><a href="#41957376">prev</a><span>|</span><label class="collapse" for="c-41957394">[-]</label><label class="expand" for="c-41957394">[2 more]</label></div><br/><div class="children"><div class="content">Resonance cascade?</div><br/><div id="41957419" class="c"><input type="checkbox" id="c-41957419" checked=""/><div class="controls bullet"><span class="by">speed_spread</span><span>|</span><a href="#41957394">parent</a><span>|</span><label class="collapse" for="c-41957419">[-]</label><label class="expand" for="c-41957419">[1 more]</label></div><br/><div class="children"><div class="content">A gamble, but we needed the extra resolution.</div><br/></div></div></div></div></div></div></div></div></div></body></html>