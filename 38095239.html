<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1698829260396" as="style"/><link rel="stylesheet" href="styles.css?v=1698829260396"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://antonz.org/sqlite-3-44/">SQLite 3.44: Interactive release notes</a> <span class="domain">(<a href="https://antonz.org">antonz.org</a>)</span></div><div class="subtext"><span>marcobambini</span> | <span>12 comments</span></div><br/><div><div id="38095487" class="c"><input type="checkbox" id="c-38095487" checked=""/><div class="controls bullet"><span class="by">matharmin</span><span>|</span><a href="#38095815">next</a><span>|</span><label class="collapse" for="c-38095487">[-]</label><label class="expand" for="c-38095487">[4 more]</label></div><br/><div class="children"><div class="content">I can definitely see where ORDER BY in aggregates would be useful - I recently used it with Postgres, and didn&#x27;t even know it&#x27;s not available in SQLite. Often you can do the sorting in the app code, but it&#x27;s nice to do directly in the query.<p>Other niche but useful features I&#x27;ve found with GROUP BY:<p>1. You can filter the rows used for the aggregate using a FILTER clause [1]: `group_concat(name order by name desc) filter where(salary &gt; 100)`. While you could do the same filter in the main query, this form would still give you departments where all employees are filtered out.<p>2. When selecting non-aggregate values in a GROUP BY, an arbitrary row is typically picked. You can control which one is picked by using min() or max() on a different column [2]. Example: `select depertment, name as best_earner, max(salary) as best_salary from employees group by department`<p>[1]: <a href="https:&#x2F;&#x2F;www.sqlite.org&#x2F;lang_aggfunc.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.sqlite.org&#x2F;lang_aggfunc.html</a><p>[2]: <a href="https:&#x2F;&#x2F;www.sqlite.org&#x2F;lang_select.html#bare_columns_in_an_aggregate_query" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.sqlite.org&#x2F;lang_select.html#bare_columns_in_an_a...</a></div><br/><div id="38095528" class="c"><input type="checkbox" id="c-38095528" checked=""/><div class="controls bullet"><span class="by">aidos</span><span>|</span><a href="#38095487">parent</a><span>|</span><a href="#38095815">next</a><span>|</span><label class="collapse" for="c-38095528">[-]</label><label class="expand" for="c-38095528">[3 more]</label></div><br/><div class="children"><div class="content">Surprised they let you pick something without defining the aggregate as it seems really dangerous.<p>Not entirely sure how far it extends but I’ve noticed that Postgres will let you select any rows from the table that way if you’ve included the primary key in the group by. Back when I used sql server &#x2F; MySQL you needed to specify them all in the group by.</div><br/><div id="38095915" class="c"><input type="checkbox" id="c-38095915" checked=""/><div class="controls bullet"><span class="by">GolDDranks</span><span>|</span><a href="#38095487">root</a><span>|</span><a href="#38095528">parent</a><span>|</span><a href="#38095843">next</a><span>|</span><label class="collapse" for="c-38095915">[-]</label><label class="expand" for="c-38095915">[1 more]</label></div><br/><div class="children"><div class="content">Sometimes I&#x27;d like to pick a non-aggregated, non-grouped column that I know will be the same for the whole group.  (I often write SQL in GCP&#x27;s BigQuery that forbids indeterminate results in group bys) I&#x27;d like to have an aggregate function something like assert_same(), that picks the value, and errors when all the values in the group are unexpectedly different.</div><br/></div></div><div id="38095843" class="c"><input type="checkbox" id="c-38095843" checked=""/><div class="controls bullet"><span class="by">dspillett</span><span>|</span><a href="#38095487">root</a><span>|</span><a href="#38095528">parent</a><span>|</span><a href="#38095915">prev</a><span>|</span><a href="#38095815">next</a><span>|</span><label class="collapse" for="c-38095843">[-]</label><label class="expand" for="c-38095843">[1 more]</label></div><br/><div class="children"><div class="content">SQL Server forces determinism here: anything projected when there is a GROUP BY must be one of the grouping properties, an aggregate, or a constant.<p>mySql does allow other columns to be projected, which has always felt wrong to me as I like my results from the DB to be dertemanistic. I wasn&#x27;t aware sqlite allowed it too, though I&#x27;ve not directly used sqlite much. It is something that causes issues migrating to other DBs (or when trying to be cross-DB compatible). Often it is used accidentally and by chance gives good results, where is is used deliberately IME it is where the same value will always return due to properties of the that data being queried (in which case the &quot;fix&quot; for other DBs is to use an aggregate like MIN or MAX). Sometimes accidentally use leads to subtle bugs which, as you say,  can be rather dangerous.<p>Note though that these days this can only be used dangerously if the ONLY_FULL_GROUP_BY option is on, and it is off by default. Allowing it in safe circumstances actual makes modern mySql more standards compliant in this respect, see <a href="https:&#x2F;&#x2F;dev.mysql.com&#x2F;doc&#x2F;refman&#x2F;8.0&#x2F;en&#x2F;group-by-handling.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;dev.mysql.com&#x2F;doc&#x2F;refman&#x2F;8.0&#x2F;en&#x2F;group-by-handling.ht...</a> for more detail.</div><br/></div></div></div></div></div></div><div id="38095815" class="c"><input type="checkbox" id="c-38095815" checked=""/><div class="controls bullet"><span class="by">karolist</span><span>|</span><a href="#38095487">prev</a><span>|</span><a href="#38095741">next</a><span>|</span><label class="collapse" for="c-38095815">[-]</label><label class="expand" for="c-38095815">[3 more]</label></div><br/><div class="children"><div class="content">Is there any chance SQLite will sometime work stored under CIFS&#x2F;SMB shares? I wanted to store all my container &#x2F;config directories under NAS but can&#x27;t with the ones using SQLite.</div><br/><div id="38095948" class="c"><input type="checkbox" id="c-38095948" checked=""/><div class="controls bullet"><span class="by">dgl</span><span>|</span><a href="#38095815">parent</a><span>|</span><a href="#38095857">next</a><span>|</span><label class="collapse" for="c-38095948">[-]</label><label class="expand" for="c-38095948">[1 more]</label></div><br/><div class="children"><div class="content">Depending what NAS you’re using maybe it supports iSCSI? It can be a better option for things where you need to make sure only one system accesses the data at a time.</div><br/></div></div><div id="38095857" class="c"><input type="checkbox" id="c-38095857" checked=""/><div class="controls bullet"><span class="by">masklinn</span><span>|</span><a href="#38095815">parent</a><span>|</span><a href="#38095948">prev</a><span>|</span><a href="#38095741">next</a><span>|</span><label class="collapse" for="c-38095857">[-]</label><label class="expand" for="c-38095857">[1 more]</label></div><br/><div class="children"><div class="content">It will sometimes work. Eventually it’ll get hopelessly corrupted because that’s what network filesystems do to shared files.</div><br/></div></div></div></div><div id="38095741" class="c"><input type="checkbox" id="c-38095741" checked=""/><div class="controls bullet"><span class="by">pixel_tracing</span><span>|</span><a href="#38095815">prev</a><span>|</span><a href="#38095444">next</a><span>|</span><label class="collapse" for="c-38095741">[-]</label><label class="expand" for="c-38095741">[1 more]</label></div><br/><div class="children"><div class="content">Can we please get array support and aggregates like collect_set</div><br/></div></div><div id="38095444" class="c"><input type="checkbox" id="c-38095444" checked=""/><div class="controls bullet"><span class="by">compilator1</span><span>|</span><a href="#38095741">prev</a><span>|</span><label class="collapse" for="c-38095444">[-]</label><label class="expand" for="c-38095444">[3 more]</label></div><br/><div class="children"><div class="content">SQlite is good as software, but PR for it is annoying and to much.</div><br/><div id="38095498" class="c"><input type="checkbox" id="c-38095498" checked=""/><div class="controls bullet"><span class="by">matharmin</span><span>|</span><a href="#38095444">parent</a><span>|</span><label class="collapse" for="c-38095498">[-]</label><label class="expand" for="c-38095498">[2 more]</label></div><br/><div class="children"><div class="content">SQLite comes up a lot on HN, but it&#x27;s not PR - it&#x27;s content that others find interesting, myself included. In most cases it&#x27;s not even official SQLite content being posted, but rather other projects or blogs around it.</div><br/><div id="38095825" class="c"><input type="checkbox" id="c-38095825" checked=""/><div class="controls bullet"><span class="by">mpixel</span><span>|</span><a href="#38095444">root</a><span>|</span><a href="#38095498">parent</a><span>|</span><label class="collapse" for="c-38095825">[-]</label><label class="expand" for="c-38095825">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s almost as if a site for tech has bias for tech commonly enjoyed by the readers of the said site.<p>I&#x27;m shocked, truly.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>