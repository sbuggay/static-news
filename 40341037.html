<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1715677264332" as="style"/><link rel="stylesheet" href="styles.css?v=1715677264332"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a>Ask HN: Founders who offer free/OS and paid SaaS, how do you manage your code?</a> </div><div class="subtext"><span>neya</span> | <span>59 comments</span></div><br/><div><div id="40348552" class="c"><input type="checkbox" id="c-40348552" checked=""/><div class="controls bullet"><span class="by">ezekg</span><span>|</span><a href="#40352984">next</a><span>|</span><label class="collapse" for="c-40348552">[-]</label><label class="expand" for="c-40348552">[19 more]</label></div><br/><div class="children"><div class="content">I have a single code base [0] for the self-hosted editions and for the SaaS. I split features up across two editions: community edition (CE) and enterprise edition (EE), and then also two modes: singleplayer and multiplayer (single- vs multi-tenant). The switching is done via environment variables, KEYGEN_EDITION and KEYGEN_MODE. The SaaS offering actually runs the EE edition in multiplayer mode, and is right now the only instance of the EE edition in multiplayer mode (other EE customers are entitled to singleplayer only).<p>I&#x27;ve been running this set up for about a year [1] and it&#x27;s working well. Having a single code base was a requirement before I made the project fair source [2]; the fair source ELv2 license lets me add feature gates to facilitate this, while protecting me from forks giving away EE features for free (while still allowing forks).<p>Updates are pushed to the SaaS offering daily. I cut self-hosted releases bi-annually unless it&#x27;s for a critical fix.<p>[0]: <a href="https:&#x2F;&#x2F;github.com&#x2F;keygen-sh&#x2F;keygen-api">https:&#x2F;&#x2F;github.com&#x2F;keygen-sh&#x2F;keygen-api</a><p>[1]: <a href="https:&#x2F;&#x2F;keygen.sh&#x2F;blog&#x2F;all-your-licensing-are-belong-to-you&#x2F;" rel="nofollow">https:&#x2F;&#x2F;keygen.sh&#x2F;blog&#x2F;all-your-licensing-are-belong-to-you&#x2F;</a><p>[2]: <a href="http:&#x2F;&#x2F;fair.io&#x2F;" rel="nofollow">http:&#x2F;&#x2F;fair.io&#x2F;</a></div><br/><div id="40350734" class="c"><input type="checkbox" id="c-40350734" checked=""/><div class="controls bullet"><span class="by">threecheese</span><span>|</span><a href="#40348552">parent</a><span>|</span><a href="#40349917">next</a><span>|</span><label class="collapse" for="c-40350734">[-]</label><label class="expand" for="c-40350734">[1 more]</label></div><br/><div class="children"><div class="content">We need more business owners like you. I’d never heard of your product (I’m not in an industry that would have one), just read your blog post on the license; I I wish you wild success and I hope more small dev shops will have the same courage and the same outcome. Cheers!</div><br/></div></div><div id="40349917" class="c"><input type="checkbox" id="c-40349917" checked=""/><div class="controls bullet"><span class="by">reaperman</span><span>|</span><a href="#40348552">parent</a><span>|</span><a href="#40350734">prev</a><span>|</span><a href="#40350862">next</a><span>|</span><label class="collapse" for="c-40349917">[-]</label><label class="expand" for="c-40349917">[6 more]</label></div><br/><div class="children"><div class="content">Could an individual of ill-repute freely download the source containing the EE and edit it to turn off checks for KEYGEN_EDITION and KEYFEN_MODE? Obviously you have license protection against them redistributing the modified  version but would anything practical prevent them from running it themselves?</div><br/><div id="40350001" class="c"><input type="checkbox" id="c-40350001" checked=""/><div class="controls bullet"><span class="by">ezekg</span><span>|</span><a href="#40348552">root</a><span>|</span><a href="#40349917">parent</a><span>|</span><a href="#40350682">next</a><span>|</span><label class="collapse" for="c-40350001">[-]</label><label class="expand" for="c-40350001">[3 more]</label></div><br/><div class="children"><div class="content">It&#x27;d be a violation of the license terms. Other than that, I may send Liam Neeson after them. :)</div><br/><div id="40350426" class="c"><input type="checkbox" id="c-40350426" checked=""/><div class="controls bullet"><span class="by">killingtime74</span><span>|</span><a href="#40348552">root</a><span>|</span><a href="#40350001">parent</a><span>|</span><a href="#40350682">next</a><span>|</span><label class="collapse" for="c-40350426">[-]</label><label class="expand" for="c-40350426">[2 more]</label></div><br/><div class="children"><div class="content">His very specific set of skills is hunting down license term violators</div><br/><div id="40351234" class="c"><input type="checkbox" id="c-40351234" checked=""/><div class="controls bullet"><span class="by">cushpush</span><span>|</span><a href="#40348552">root</a><span>|</span><a href="#40350426">parent</a><span>|</span><a href="#40350682">next</a><span>|</span><label class="collapse" for="c-40351234">[-]</label><label class="expand" for="c-40351234">[1 more]</label></div><br/><div class="children"><div class="content">&gt;...but what I do have are a very particular set of skills. Skills I have acquired over a very long career.</div><br/></div></div></div></div></div></div><div id="40350682" class="c"><input type="checkbox" id="c-40350682" checked=""/><div class="controls bullet"><span class="by">spoonjim</span><span>|</span><a href="#40348552">root</a><span>|</span><a href="#40349917">parent</a><span>|</span><a href="#40350001">prev</a><span>|</span><a href="#40350822">next</a><span>|</span><label class="collapse" for="c-40350682">[-]</label><label class="expand" for="c-40350682">[1 more]</label></div><br/><div class="children"><div class="content">Almost all software company revenues come from business customers who are too big to mess with stuff like this.</div><br/></div></div><div id="40350822" class="c"><input type="checkbox" id="c-40350822" checked=""/><div class="controls bullet"><span class="by">komali2</span><span>|</span><a href="#40348552">root</a><span>|</span><a href="#40349917">parent</a><span>|</span><a href="#40350682">prev</a><span>|</span><a href="#40350862">next</a><span>|</span><label class="collapse" for="c-40350822">[-]</label><label class="expand" for="c-40350822">[1 more]</label></div><br/><div class="children"><div class="content">Yes, and most places that do this (e.g. OpenProject) don&#x27;t have licenses preventing this, so I have deployed, and shimmed out the enterprise blockers, many Foss sass tools.</div><br/></div></div></div></div><div id="40350862" class="c"><input type="checkbox" id="c-40350862" checked=""/><div class="controls bullet"><span class="by">abhimanyugrover</span><span>|</span><a href="#40348552">parent</a><span>|</span><a href="#40349917">prev</a><span>|</span><a href="#40349119">next</a><span>|</span><label class="collapse" for="c-40350862">[-]</label><label class="expand" for="c-40350862">[5 more]</label></div><br/><div class="children"><div class="content">Say if someone copied your codebase tomorrow, and rebranded it as a competing solution and started advertising on same places as you are, what do you do?</div><br/><div id="40351123" class="c"><input type="checkbox" id="c-40351123" checked=""/><div class="controls bullet"><span class="by">ezekg</span><span>|</span><a href="#40348552">root</a><span>|</span><a href="#40350862">parent</a><span>|</span><a href="#40349119">next</a><span>|</span><label class="collapse" for="c-40351123">[-]</label><label class="expand" for="c-40351123">[4 more]</label></div><br/><div class="children"><div class="content">I&#x27;d handle it the same any other business would who had their intellectual property infringed upon.</div><br/><div id="40351467" class="c"><input type="checkbox" id="c-40351467" checked=""/><div class="controls bullet"><span class="by">jayd16</span><span>|</span><a href="#40348552">root</a><span>|</span><a href="#40351123">parent</a><span>|</span><a href="#40349119">next</a><span>|</span><label class="collapse" for="c-40351467">[-]</label><label class="expand" for="c-40351467">[3 more]</label></div><br/><div class="children"><div class="content">How would you know?</div><br/><div id="40351563" class="c"><input type="checkbox" id="c-40351563" checked=""/><div class="controls bullet"><span class="by">ezekg</span><span>|</span><a href="#40348552">root</a><span>|</span><a href="#40351467">parent</a><span>|</span><a href="#40351643">next</a><span>|</span><label class="collapse" for="c-40351563">[-]</label><label class="expand" for="c-40351563">[1 more]</label></div><br/><div class="children"><div class="content">How would I know if somebody forked and rebranded Keygen&#x27;s API to compete with me? I feel like it&#x27;d be pretty obvious unless they redesigned the entire API schema, endpoints, etc.<p>Not really something I&#x27;m worried about.</div><br/></div></div><div id="40351643" class="c"><input type="checkbox" id="c-40351643" checked=""/><div class="controls bullet"><span class="by">necovek</span><span>|</span><a href="#40348552">root</a><span>|</span><a href="#40351467">parent</a><span>|</span><a href="#40351563">prev</a><span>|</span><a href="#40349119">next</a><span>|</span><label class="collapse" for="c-40351643">[-]</label><label class="expand" for="c-40351643">[1 more]</label></div><br/><div class="children"><div class="content">If this happens in a market far away that the original product would have a hard time reaching, it does not really matter.<p>But if the original product grows enough to be able to reach far away markets, then it&#x27;s lawyer and discovery money would grow too.<p>I applaud Keygen API approach, though I really hope we find a formula that makes free software become pervasive while providing financial stability to authors and maintainers.</div><br/></div></div></div></div></div></div></div></div><div id="40349119" class="c"><input type="checkbox" id="c-40349119" checked=""/><div class="controls bullet"><span class="by">scottcha</span><span>|</span><a href="#40348552">parent</a><span>|</span><a href="#40350862">prev</a><span>|</span><a href="#40350939">next</a><span>|</span><label class="collapse" for="c-40349119">[-]</label><label class="expand" for="c-40349119">[3 more]</label></div><br/><div class="children"><div class="content">Couple of questions:
1. You link to fair.io but it seems there isn&#x27;t a latest license there only a legacy version.  Do you know what the current status is on what seems like a pending version update?<p>2. Your project repro actually links to the elastic license.  Is there some relation between the two?  Do you prefer the fairsource license over the elastic license&gt;</div><br/><div id="40349856" class="c"><input type="checkbox" id="c-40349856" checked=""/><div class="controls bullet"><span class="by">ezekg</span><span>|</span><a href="#40348552">root</a><span>|</span><a href="#40349119">parent</a><span>|</span><a href="#40352487">next</a><span>|</span><label class="collapse" for="c-40349856">[-]</label><label class="expand" for="c-40349856">[1 more]</label></div><br/><div class="children"><div class="content">1. You can read more about the Fair Source initiative here: <a href="https:&#x2F;&#x2F;twitter.com&#x2F;chadwhitacre_&#x2F;status&#x2F;1790101820364267902" rel="nofollow">https:&#x2F;&#x2F;twitter.com&#x2F;chadwhitacre_&#x2F;status&#x2F;1790101820364267902</a> (also [0] and [1] for previous discussions). It&#x27;s not official yet, but it&#x27;s an attempt to define a new term for Open Source vs Source Available. I figured I&#x27;d start using the term early and see what happens.<p>2. Yes, the ELv2 will be considered a Fair Source license, because it allows contributions, redistribution, forking, etc. You can visit <a href="https:&#x2F;&#x2F;faircode.io" rel="nofollow">https:&#x2F;&#x2F;faircode.io</a> for an idea of what Fair Source will ultimately entail (Fair Source and Fair Code will be merged eventually AFAICT).<p>[0]: <a href="https:&#x2F;&#x2F;github.com&#x2F;getsentry&#x2F;fsl.software&#x2F;issues&#x2F;4">https:&#x2F;&#x2F;github.com&#x2F;getsentry&#x2F;fsl.software&#x2F;issues&#x2F;4</a><p>[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;getsentry&#x2F;fsl.software&#x2F;issues&#x2F;2">https:&#x2F;&#x2F;github.com&#x2F;getsentry&#x2F;fsl.software&#x2F;issues&#x2F;2</a></div><br/></div></div><div id="40352487" class="c"><input type="checkbox" id="c-40352487" checked=""/><div class="controls bullet"><span class="by">stevage</span><span>|</span><a href="#40348552">root</a><span>|</span><a href="#40349119">parent</a><span>|</span><a href="#40349856">prev</a><span>|</span><a href="#40350939">next</a><span>|</span><label class="collapse" for="c-40352487">[-]</label><label class="expand" for="c-40352487">[1 more]</label></div><br/><div class="children"><div class="content">Fair Source seems to be pretty bleeding edge:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;fairsource&#x2F;fair.io&#x2F;issues&#x2F;14">https:&#x2F;&#x2F;github.com&#x2F;fairsource&#x2F;fair.io&#x2F;issues&#x2F;14</a></div><br/></div></div></div></div><div id="40350939" class="c"><input type="checkbox" id="c-40350939" checked=""/><div class="controls bullet"><span class="by">ijustlovemath</span><span>|</span><a href="#40348552">parent</a><span>|</span><a href="#40349119">prev</a><span>|</span><a href="#40352984">next</a><span>|</span><label class="collapse" for="c-40350939">[-]</label><label class="expand" for="c-40350939">[3 more]</label></div><br/><div class="children"><div class="content">How do you actually protect the CE users from setting the environment variables to activate premium features?</div><br/><div id="40351059" class="c"><input type="checkbox" id="c-40351059" checked=""/><div class="controls bullet"><span class="by">greenavocado</span><span>|</span><a href="#40348552">root</a><span>|</span><a href="#40350939">parent</a><span>|</span><a href="#40351083">next</a><span>|</span><label class="collapse" for="c-40351059">[-]</label><label class="expand" for="c-40351059">[1 more]</label></div><br/><div class="children"><div class="content">If you are desperate enough to shim it out you&#x27;re not worth pursuing as a customer</div><br/></div></div><div id="40351083" class="c"><input type="checkbox" id="c-40351083" checked=""/><div class="controls bullet"><span class="by">ezekg</span><span>|</span><a href="#40348552">root</a><span>|</span><a href="#40350939">parent</a><span>|</span><a href="#40351059">prev</a><span>|</span><a href="#40352984">next</a><span>|</span><label class="collapse" for="c-40351083">[-]</label><label class="expand" for="c-40351083">[1 more]</label></div><br/><div class="children"><div class="content">Keygen uses Keygen to license itself via license gates: <a href="https:&#x2F;&#x2F;github.com&#x2F;keygen-sh&#x2F;keygen-api&#x2F;blob&#x2F;e668dffbb90bd53a2c6aa040866e4883fa7aab25&#x2F;app&#x2F;controllers&#x2F;api&#x2F;v1&#x2F;licenses_controller.rb#L65">https:&#x2F;&#x2F;github.com&#x2F;keygen-sh&#x2F;keygen-api&#x2F;blob&#x2F;e668dffbb90bd53...</a> (the EE edition requires a license key with entitlements to access the EE features).</div><br/></div></div></div></div></div></div><div id="40352984" class="c"><input type="checkbox" id="c-40352984" checked=""/><div class="controls bullet"><span class="by">aussieguy1234</span><span>|</span><a href="#40348552">prev</a><span>|</span><a href="#40352787">next</a><span>|</span><label class="collapse" for="c-40352984">[-]</label><label class="expand" for="c-40352984">[1 more]</label></div><br/><div class="children"><div class="content">For Tunnelmole (open source ngrok alternative) the service is identical to the open source project, but with this module <a href="https:&#x2F;&#x2F;github.com&#x2F;robbie-cahill&#x2F;tunnelmole-service&#x2F;blob&#x2F;main&#x2F;src&#x2F;authentication&#x2F;authorize.ts">https:&#x2F;&#x2F;github.com&#x2F;robbie-cahill&#x2F;tunnelmole-service&#x2F;blob&#x2F;mai...</a> replaced with a custom version to add the billing logic. It has the same function signature so works seamlessly with the NodeJS module system.<p>It calls Stripe to check the plan for example.<p>I keep a copy of it in another folder to avoid accidentally committing it and use `rsync` to patch it in at deployment time.</div><br/></div></div><div id="40352787" class="c"><input type="checkbox" id="c-40352787" checked=""/><div class="controls bullet"><span class="by">SOLAR_FIELDS</span><span>|</span><a href="#40352984">prev</a><span>|</span><a href="#40349546">next</a><span>|</span><label class="collapse" for="c-40352787">[-]</label><label class="expand" for="c-40352787">[1 more]</label></div><br/><div class="children"><div class="content">In a previous well funded startup with a FOSS component that I worked for I designed a set up like this:<p>- 2 git repos, one public, one private<p>- Custom tooling inspired by other existing tools out there like copybara to move commits in a unidirectional flow from the private repo to the public one<p>The private repo had the contents of the OSS repo in a subfolder, and a unidirectional workflow where all commits flowed from the private to the public. The way the OSS repo accepted contributions was going through the normal pull request workflow on the OSS repo, then on approval the custom tooling copied the pull request into the private repository where it would go through a second round where it was tested against the private code. On merge in the private repo the commit sha of the original commit along with the original author would get injected into the new commit message and then the custom tooling would then automatically push commits in the private repo subfolder to the public OSS repo, which essentially served as a read only mirror on the main branch.<p>It actually worked quite well, though obviously this approach comes with some tradeoffs. Here are some of the benefits and drawbacks off the top of my head<p>Benefits:<p>- no mixing of free and proprietary code. Public users just check out the OSS repo and it’s completely free<p>- proprietary code is not visible to the public<p>Drawbacks:<p>- workflow slightly more complex for both end users and employees of the enterprise<p>- more work to mainline code by the enterprise: contributions essentially need to be reviewed twice<p>- it is not possible to have signed commits by OSS contributors with this workflow<p>Overall it ended up being a great solution for that organization but this kind of approach can only work for low traffic or easy to review  repositories. Anything with a decent amount of traffic or lots of complex contributions has a risk of becoming too much overhead for the organization to double build and test pull requests</div><br/></div></div><div id="40349546" class="c"><input type="checkbox" id="c-40349546" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#40352787">prev</a><span>|</span><a href="#40351323">next</a><span>|</span><label class="collapse" for="c-40349546">[-]</label><label class="expand" for="c-40349546">[8 more]</label></div><br/><div class="children"><div class="content">Plugins!<p>My SaaS version of <a href="https:&#x2F;&#x2F;datasette.io" rel="nofollow">https:&#x2F;&#x2F;datasette.io</a> is the open source version plus 76 plugins. Almost all of those plugins are themselves open source, with just a few that aren&#x27;t for features that are unique to the SaaS product - things like showing how much disk space the user has used up already.<p>Here&#x27;s what that custom plugin looks like, it&#x27;s pretty thin: <a href="https:&#x2F;&#x2F;gist.github.com&#x2F;simonw&#x2F;114131fd9c1826f3629cc3b3dcb845ad" rel="nofollow">https:&#x2F;&#x2F;gist.github.com&#x2F;simonw&#x2F;114131fd9c1826f3629cc3b3dcb84...</a></div><br/><div id="40349780" class="c"><input type="checkbox" id="c-40349780" checked=""/><div class="controls bullet"><span class="by">mickael-kerjean</span><span>|</span><a href="#40349546">parent</a><span>|</span><a href="#40351081">next</a><span>|</span><label class="collapse" for="c-40349780">[-]</label><label class="expand" for="c-40349780">[1 more]</label></div><br/><div class="children"><div class="content">Same idea for my Saas, pretty much every aspect of the software can be changed through plugins. A build is mostly about assembling the right lego blocks like this <a href="https:&#x2F;&#x2F;github.com&#x2F;mickael-kerjean&#x2F;filestash&#x2F;blob&#x2F;master&#x2F;server&#x2F;plugin&#x2F;index.go">https:&#x2F;&#x2F;github.com&#x2F;mickael-kerjean&#x2F;filestash&#x2F;blob&#x2F;master&#x2F;ser...</a>
and a plugin is just a piece of code implementing an interface like this one <a href="https:&#x2F;&#x2F;github.com&#x2F;mickael-kerjean&#x2F;filestash&#x2F;blob&#x2F;master&#x2F;server&#x2F;common&#x2F;types.go#L44-L46">https:&#x2F;&#x2F;github.com&#x2F;mickael-kerjean&#x2F;filestash&#x2F;blob&#x2F;master&#x2F;ser...</a> which enables various build to switch the search engine to virtually any backend</div><br/></div></div><div id="40351081" class="c"><input type="checkbox" id="c-40351081" checked=""/><div class="controls bullet"><span class="by">djbusby</span><span>|</span><a href="#40349546">parent</a><span>|</span><a href="#40349780">prev</a><span>|</span><a href="#40349723">next</a><span>|</span><label class="collapse" for="c-40351081">[-]</label><label class="expand" for="c-40351081">[4 more]</label></div><br/><div class="children"><div class="content">Got an good pointers for writing pluggable code? How to make the app itself ready to get all these fancy plugins?</div><br/><div id="40351732" class="c"><input type="checkbox" id="c-40351732" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#40349546">root</a><span>|</span><a href="#40351081">parent</a><span>|</span><a href="#40352661">next</a><span>|</span><label class="collapse" for="c-40351732">[-]</label><label class="expand" for="c-40351732">[1 more]</label></div><br/><div class="children"><div class="content">I pitched a conference talk about this recently, if it gets accepted I&#x27;ll have a good excuse to write this up. It&#x27;s surprisingly hard to find good information about!</div><br/></div></div><div id="40352661" class="c"><input type="checkbox" id="c-40352661" checked=""/><div class="controls bullet"><span class="by">withinboredom</span><span>|</span><a href="#40349546">root</a><span>|</span><a href="#40351081">parent</a><span>|</span><a href="#40351732">prev</a><span>|</span><a href="#40352415">next</a><span>|</span><label class="collapse" for="c-40352661">[-]</label><label class="expand" for="c-40352661">[1 more]</label></div><br/><div class="children"><div class="content">WordPress is a pretty good example (and all the problems that entails if it gets out of hand). They use a hook&#x2F;filter model to change outputs of various systems via plugins, and allow plugins to reimplment low-level functionality.<p>I recommend checking out their approach, as it is pretty flexible.</div><br/></div></div><div id="40352415" class="c"><input type="checkbox" id="c-40352415" checked=""/><div class="controls bullet"><span class="by">zerr</span><span>|</span><a href="#40349546">root</a><span>|</span><a href="#40351081">parent</a><span>|</span><a href="#40352661">prev</a><span>|</span><a href="#40349723">next</a><span>|</span><label class="collapse" for="c-40352415">[-]</label><label class="expand" for="c-40352415">[1 more]</label></div><br/><div class="children"><div class="content">You can get a good idea by reading docs about plugins APIs for a particular software.</div><br/></div></div></div></div><div id="40349723" class="c"><input type="checkbox" id="c-40349723" checked=""/><div class="controls bullet"><span class="by">jbarham</span><span>|</span><a href="#40349546">parent</a><span>|</span><a href="#40351081">prev</a><span>|</span><a href="#40351323">next</a><span>|</span><label class="collapse" for="c-40349723">[-]</label><label class="expand" for="c-40349723">[2 more]</label></div><br/><div class="children"><div class="content">I think that should be <a href="https:&#x2F;&#x2F;datasette.io&#x2F;" rel="nofollow">https:&#x2F;&#x2F;datasette.io&#x2F;</a></div><br/><div id="40349828" class="c"><input type="checkbox" id="c-40349828" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#40349546">root</a><span>|</span><a href="#40349723">parent</a><span>|</span><a href="#40351323">next</a><span>|</span><label class="collapse" for="c-40349828">[-]</label><label class="expand" for="c-40349828">[1 more]</label></div><br/><div class="children"><div class="content">Thanks, fixed</div><br/></div></div></div></div></div></div><div id="40351323" class="c"><input type="checkbox" id="c-40351323" checked=""/><div class="controls bullet"><span class="by">tommoor</span><span>|</span><a href="#40349546">prev</a><span>|</span><a href="#40352819">next</a><span>|</span><label class="collapse" for="c-40351323">[-]</label><label class="expand" for="c-40351323">[2 more]</label></div><br/><div class="children"><div class="content">Like many other answers here, Outline [0] has eventually landed on a plugin architecture with a private fork for EE – the paid edition has many extra plugins providing functionality such as extra importers, auth methods, search functionality etc. The interface itself has evolved several times and we&#x27;re still adding new hooks to enable plugins to integrate with different areas of the product.<p>This approach has really made the private fork much more maintanable.<p>[0] <a href="https:&#x2F;&#x2F;www.getoutline.com" rel="nofollow">https:&#x2F;&#x2F;www.getoutline.com</a><p>[0] <a href="https:&#x2F;&#x2F;github.com&#x2F;outline&#x2F;outline">https:&#x2F;&#x2F;github.com&#x2F;outline&#x2F;outline</a></div><br/><div id="40352706" class="c"><input type="checkbox" id="c-40352706" checked=""/><div class="controls bullet"><span class="by">h1fra</span><span>|</span><a href="#40351323">parent</a><span>|</span><a href="#40352819">next</a><span>|</span><label class="collapse" for="c-40352706">[-]</label><label class="expand" for="c-40352706">[1 more]</label></div><br/><div class="children"><div class="content">Is the public repo the main branch? When you want develop something: you create a PR in the public repo, review, wait for CI, merge to main, wait for CI, finally merge to the fork, wait for CI?<p>I&#x27;m always unsatisfied with the number of steps to achieve that (and the total CI time required), but maybe it&#x27;s unavoidable.</div><br/></div></div></div></div><div id="40352819" class="c"><input type="checkbox" id="c-40352819" checked=""/><div class="controls bullet"><span class="by">shafyy</span><span>|</span><a href="#40351323">prev</a><span>|</span><a href="#40351092">next</a><span>|</span><label class="collapse" for="c-40352819">[-]</label><label class="expand" for="c-40352819">[1 more]</label></div><br/><div class="children"><div class="content">I have two open-source projects where people can self-host for free, or use the cloud (SaaS) version. Although with Mapzy I stopped providing the cloud version for now. I have one codebase and then use an environment variable to activate features like Stripe that I need for the cloud version.<p>Mapzy: A simple storefinder (<a href="https:&#x2F;&#x2F;github.com&#x2F;mapzy&#x2F;mapzy">https:&#x2F;&#x2F;github.com&#x2F;mapzy&#x2F;mapzy</a>)<p>Fugue: Privacy-friendly product analytics (<a href="https:&#x2F;&#x2F;github.com&#x2F;shafy&#x2F;fugu">https:&#x2F;&#x2F;github.com&#x2F;shafy&#x2F;fugu</a>)</div><br/></div></div><div id="40351092" class="c"><input type="checkbox" id="c-40351092" checked=""/><div class="controls bullet"><span class="by">atonse</span><span>|</span><a href="#40352819">prev</a><span>|</span><a href="#40349815">next</a><span>|</span><label class="collapse" for="c-40351092">[-]</label><label class="expand" for="c-40351092">[1 more]</label></div><br/><div class="children"><div class="content">For our SaaS [1] we have a plug-in architecture.<p>And each plugin has a concept called install constraints. They consist of app, tier, and the role of the user provisioning the account.<p>Based on the right combination, certain plugins get auto installed and the user can enable&#x2F;disable optional plugins&#x2F;features.<p>Upon installation, the plug-in module has a “lifecycle” module with callbacks for install, uninstall, after_install, etc.<p>In those, we insert db metadata (pages, folders, menu items, etc) related to that plugin.<p>All is written in elixir.<p>1: <a href="https:&#x2F;&#x2F;simplyscholar.com" rel="nofollow">https:&#x2F;&#x2F;simplyscholar.com</a></div><br/></div></div><div id="40349815" class="c"><input type="checkbox" id="c-40349815" checked=""/><div class="controls bullet"><span class="by">w10-1</span><span>|</span><a href="#40351092">prev</a><span>|</span><a href="#40352399">next</a><span>|</span><label class="collapse" for="c-40349815">[-]</label><label class="expand" for="c-40349815">[2 more]</label></div><br/><div class="children"><div class="content">As another data point, IBM WebSphere had an open-source version and a paid version which used AspectJ (AOP) to deploy proprietary features.  People could deploy something like that potentially even at runtime via remote libraries and load-time weaving.  (The technique was called product-line engineering.)  Obviously Spring still does something similar with its AspectJ-derived AOP.  It works mainly for features applied as transaction&#x2F;API filters like authentication, security, first-failure data capture, etc., and when OS is used as an training tier rather than a fallback if the company folds.</div><br/><div id="40350776" class="c"><input type="checkbox" id="c-40350776" checked=""/><div class="controls bullet"><span class="by">neandrake</span><span>|</span><a href="#40349815">parent</a><span>|</span><a href="#40352399">next</a><span>|</span><label class="collapse" for="c-40350776">[-]</label><label class="expand" for="c-40350776">[1 more]</label></div><br/><div class="children"><div class="content">&gt; The technique was called product-line engineering.<p>Thank you for adding this bit of info! We’ve been using this model for a while but I hadn’t come across a label for it. Now knowing this, I’m coming across a ton of great info about managing&#x2F;sustaining these product families.</div><br/></div></div></div></div><div id="40352399" class="c"><input type="checkbox" id="c-40352399" checked=""/><div class="controls bullet"><span class="by">pplonski86</span><span>|</span><a href="#40349815">prev</a><span>|</span><a href="#40352572">next</a><span>|</span><label class="collapse" for="c-40352399">[-]</label><label class="expand" for="c-40352399">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m running a SaaS for serving Python notebooks as web apps [0]. We offer widgets for notebooks and server, both as open source [1]. In open source you are managing the server instance with default Django Admin Panel. In the SaaS version, we have a dashboard for managing site (adding users, setting visibility, usage analytics), the dashboard is closed source. The open source version by default is single site, but can be switched to multi-tenant (multiple domains and subdomains) just by adding instances in the database. In case of update, sometimes it is required to update both code bases. Employees have access to both code bases.<p>We started with open-source first, and added SaaS offering after ~2 years. The code base split was a natural choice. At first, I didn&#x27;t want to add SaaS, because managing servers is a lot of work. But, we have a lot of requests for such service, and it makes really easy to deploy notebook online (with few clicks you have unique domain and notebook running). I&#x27;m happy with this code base split.<p>[0]: <a href="https:&#x2F;&#x2F;runmercury.com" rel="nofollow">https:&#x2F;&#x2F;runmercury.com</a><p>[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;mljar&#x2F;mercury">https:&#x2F;&#x2F;github.com&#x2F;mljar&#x2F;mercury</a></div><br/></div></div><div id="40352572" class="c"><input type="checkbox" id="c-40352572" checked=""/><div class="controls bullet"><span class="by">tmzt</span><span>|</span><a href="#40352399">prev</a><span>|</span><a href="#40352690">next</a><span>|</span><label class="collapse" for="c-40352572">[-]</label><label class="expand" for="c-40352572">[1 more]</label></div><br/><div class="children"><div class="content">Not launched, but building open source components and mucroservices with a closed dashboard and overall backend.<p>For instance, a Git-like DAG for a config service [1] that supports history and eventually forking and merging on top of PostgreSQL. This was broken out of the larger Go codebase and is currently AGPL3 as a placeholder while I research better licenses to use.<p>The overall idea is the &quot;nuts and bolts&quot; of a small startup&#x2F;SaaS app, including metrics, IAM&#x2F;auth, and subscriptions via a single API and React&#x2F;JS SDKs.<p>I hope to do a Show HN on one or both in the near future.<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;tmzt&#x2F;config-api">https:&#x2F;&#x2F;github.com&#x2F;tmzt&#x2F;config-api</a></div><br/></div></div><div id="40352690" class="c"><input type="checkbox" id="c-40352690" checked=""/><div class="controls bullet"><span class="by">h1fra</span><span>|</span><a href="#40352572">prev</a><span>|</span><a href="#40350375">next</a><span>|</span><label class="collapse" for="c-40352690">[-]</label><label class="expand" for="c-40352690">[1 more]</label></div><br/><div class="children"><div class="content">I feel like most people say plugin which is fair and easy to do on the backend but I&#x27;m always wondering how they are doing for the frontend. I never found an appropriate solution to modify the frontend (i.e: adding a billing page, a button in some page, etc)</div><br/></div></div><div id="40350375" class="c"><input type="checkbox" id="c-40350375" checked=""/><div class="controls bullet"><span class="by">kevin_nisbet</span><span>|</span><a href="#40352690">prev</a><span>|</span><a href="#40351766">next</a><span>|</span><label class="collapse" for="c-40350375">[-]</label><label class="expand" for="c-40350375">[1 more]</label></div><br/><div class="children"><div class="content">One company I worked for did the enterprise version through a git submodule. So main repo was the OSS version (with it&#x27;s own main), and the git submodule was a different program entrypoint that contained &#x2F; activated the enterprise code. So devs would have both the OSS&#x2F;Enterprise module checked out and could work on both together.<p>In this example as I recall most of the enterprise code was just activation code, so a properly motivated individual could probably figure out how to turn on some of the enterprise features, but most people won&#x27;t bother to figure out how to do their own builds, and it&#x27;s more work then finding the secret env variables in an open repo.<p>It&#x27;s a little bit painful at times because changes that cover both code bases need two commits, and it isn&#x27;t uncommon for someone to forget or commit the wrong submodule pointer. But depending on the team, it can work.<p>Not for everyone, just including it as an option I haven&#x27;t seen mentioned in other comments.</div><br/></div></div><div id="40351766" class="c"><input type="checkbox" id="c-40351766" checked=""/><div class="controls bullet"><span class="by">eskibars</span><span>|</span><a href="#40350375">prev</a><span>|</span><a href="#40351504">next</a><span>|</span><label class="collapse" for="c-40351766">[-]</label><label class="expand" for="c-40351766">[1 more]</label></div><br/><div class="children"><div class="content">I worked in product at Elastic working on Elasticsearch, which ended up trying several different things (some of which I know the broader OSS-driven community didn&#x27;t like, so I&#x27;m prepared for downvotes here).<p>We had started off by using a series of private repos for our non-OSS features.  At build time, we had a pretty complicated suite of build tooling that took all of the repos and integrated them and ran the integration tests.  The biggest reason why Elasticsearch went to single repo with all of the enterprise software included (knowing that the OSS-focused community was going to backlash on it) was just how much of a hassle that was.  It bifurcated <i>everything</i> and the results were that paying customers were upset the most.<p>For example: have an issue with the product?  You could file a GitHub issue in public and it would get looked at quickly, <i>but</i> if you were a paying customer with an issue with one of the enterprise features, you had to file an issue with the support team because the GitHub repo was separate&#x2F;private, and then support would file an issue in the private GitHub repo, and you&#x27;d lose complete visibility with it.  It was even worse for free&#x2F;trial users: they had to file an issue on our forums (since they didn&#x27;t have an established support contact), after which they lost visibility.  Integration tests were also hellish.<p>I later worked at another open core company, which at first maintained a separate codebase for its paid offering, and synchronized changes over from the open source product periodically, and things were <i>much</i> worse: a ton of bugs kept popping up and getting the paid offering out the door was always extremely slow because you were always playing catch up on the OSS offering.<p>You can go down the submodule route, but you end up relying on pretty complicated build tooling.  If that&#x27;s in your team&#x27;s realm of capabilities, it&#x27;s not a bad route to go.  If you have no need for &quot;OSS,&quot; then you can choose a non-OSS license that provides whatever restrictions you care about and bundle it up together, which is easier, but might dissuade certain users.<p>Regardless, licensing enforcement isn&#x27;t <i>really</i> an issue if you&#x27;re working on a B2B product: there are certain demographics that won&#x27;t pay for your software, but they won&#x27;t pay if you have licensing enforcement either.  B2C can be a different story.</div><br/></div></div><div id="40351504" class="c"><input type="checkbox" id="c-40351504" checked=""/><div class="controls bullet"><span class="by">thayne</span><span>|</span><a href="#40351766">prev</a><span>|</span><a href="#40350260">next</a><span>|</span><label class="collapse" for="c-40351504">[-]</label><label class="expand" for="c-40351504">[1 more]</label></div><br/><div class="children"><div class="content">I am not such a founder, but as a user of and contributor to open source projects let me give a suggestion of how not to do it.<p>If you include open source and proprietary components in the same repo I will be annoyed. Especially if it is not <i>very</i> clear how the licensing is split, or if the proprietary stuff is split in multiple folders.<p>If you don&#x27;t have instructions, or it is otherwise unreasonably difficult to build the open-source only version, I will be very annoyed.<p>If your &quot;open source&quot; code  is directly linked to the proprietary parts, and it requires non-trivial changes to your code in order to build without the proprietary components, I don&#x27;t consider your project open source, no matter how much you plaster &quot;open source&quot; on your marketing materials. And it&#x27;s even worse if the license is unclear on what the licensing situation is if you use a release that includes all these proprietary components, but they are turned off because you don&#x27;t have a license key.</div><br/></div></div><div id="40350260" class="c"><input type="checkbox" id="c-40350260" checked=""/><div class="controls bullet"><span class="by">shireboy</span><span>|</span><a href="#40351504">prev</a><span>|</span><a href="#40351958">next</a><span>|</span><label class="collapse" for="c-40350260">[-]</label><label class="expand" for="c-40350260">[4 more]</label></div><br/><div class="children"><div class="content">If I understand this is more of a coding question.  I&#x27;d argue it would be best for most web based SaaS to have a single codebase, with a single branch that represents the production site. That code base would then be smart enough to enable the right features based on the current user and&#x2F;or tenant and their subscription level and payment status.  Pseudocode:<p><pre><code>   public DoFoo(){
      if(CurrentUser.IsFreeSku &amp;&amp; CurrentUser.FoosThisMonth &gt;= 10) return Error(&#x27;Free users are only allowed to do 10 foos each month);
      FooService.DoFoo();
      CurrentUser.FoosThisMonth ++ 
   }
</code></pre>
Similar in the UI you may hide or show things based on the current user&#x2F;tenant and their sub level.<p>&lt;div class=&#x27;hidden-paid-user&#x27;&gt;Click here to get our paid service&lt;&#x2F;div&gt;<p>You would still have server code enforce the subscription level rules because a malicious user could circumvent any client-based rules.  How exactly you do both will depend on the framework your saas uses.</div><br/><div id="40351371" class="c"><input type="checkbox" id="c-40351371" checked=""/><div class="controls bullet"><span class="by">101008</span><span>|</span><a href="#40350260">parent</a><span>|</span><a href="#40351958">next</a><span>|</span><label class="collapse" for="c-40351371">[-]</label><label class="expand" for="c-40351371">[3 more]</label></div><br/><div class="children"><div class="content">This is a nightmare</div><br/><div id="40351648" class="c"><input type="checkbox" id="c-40351648" checked=""/><div class="controls bullet"><span class="by">squigglydonut</span><span>|</span><a href="#40350260">root</a><span>|</span><a href="#40351371">parent</a><span>|</span><a href="#40351958">next</a><span>|</span><label class="collapse" for="c-40351648">[-]</label><label class="expand" for="c-40351648">[2 more]</label></div><br/><div class="children"><div class="content">Why</div><br/><div id="40352293" class="c"><input type="checkbox" id="c-40352293" checked=""/><div class="controls bullet"><span class="by">rareitem</span><span>|</span><a href="#40350260">root</a><span>|</span><a href="#40351648">parent</a><span>|</span><a href="#40351958">next</a><span>|</span><label class="collapse" for="c-40352293">[-]</label><label class="expand" for="c-40352293">[1 more]</label></div><br/><div class="children"><div class="content">Because you&#x27;ll end up with lots of &quot;if (user.isPaidUser) {...}&quot;</div><br/></div></div></div></div></div></div></div></div><div id="40351958" class="c"><input type="checkbox" id="c-40351958" checked=""/><div class="controls bullet"><span class="by">azeirah</span><span>|</span><a href="#40350260">prev</a><span>|</span><a href="#40350994">next</a><span>|</span><label class="collapse" for="c-40351958">[-]</label><label class="expand" for="c-40351958">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m working on a tiny saas that is moving in this direction. It&#x27;s based on laravel in the backend.<p>I&#x27;m using different implementations of interfaces for self-hosted vs commercially (my variant) hosted.<p>What implementations get chosen depends on environment variables.<p>The code is available as GPL</div><br/></div></div><div id="40350994" class="c"><input type="checkbox" id="c-40350994" checked=""/><div class="controls bullet"><span class="by">paulgb</span><span>|</span><a href="#40351958">prev</a><span>|</span><a href="#40349234">next</a><span>|</span><label class="collapse" for="c-40350994">[-]</label><label class="expand" for="c-40350994">[3 more]</label></div><br/><div class="children"><div class="content">My mental model for how we do it is the analogy of git&#x2F;github: git is an open source project that is useful in its own right; github is the opinionated SaaS “glue” between git and an organization.<p>Our “git” is Plane[1], which is by design fairly unopinionated and general. Our “github” is Jamsocket[2], which is more opinionated about deployment, observability, etc.<p>We use the open source version of Plane in Jamsocket, and build on top of it in a separate (proprietary) codebase.<p>[1] <a href="https:&#x2F;&#x2F;plane.dev" rel="nofollow">https:&#x2F;&#x2F;plane.dev</a><p>[2] <a href="https:&#x2F;&#x2F;jamsocket.com">https:&#x2F;&#x2F;jamsocket.com</a></div><br/><div id="40351630" class="c"><input type="checkbox" id="c-40351630" checked=""/><div class="controls bullet"><span class="by">toastal</span><span>|</span><a href="#40350994">parent</a><span>|</span><a href="#40349234">next</a><span>|</span><label class="collapse" for="c-40351630">[-]</label><label class="expand" for="c-40351630">[2 more]</label></div><br/><div class="children"><div class="content">Microsoft GitHub is fully proprietary &amp; while Microsoft may or may not be pulling some strings, Git is independent. OP is asking if the free &amp; paid software have the same owner.</div><br/><div id="40352748" class="c"><input type="checkbox" id="c-40352748" checked=""/><div class="controls bullet"><span class="by">paulgb</span><span>|</span><a href="#40350994">root</a><span>|</span><a href="#40351630">parent</a><span>|</span><a href="#40349234">next</a><span>|</span><label class="collapse" for="c-40352748">[-]</label><label class="expand" for="c-40352748">[1 more]</label></div><br/><div class="children"><div class="content">OP is asking about codebase organization, and from that point of view the analogy works.</div><br/></div></div></div></div></div></div><div id="40349234" class="c"><input type="checkbox" id="c-40349234" checked=""/><div class="controls bullet"><span class="by">elieskilled</span><span>|</span><a href="#40350994">prev</a><span>|</span><a href="#40350996">next</a><span>|</span><label class="collapse" for="c-40349234">[-]</label><label class="expand" for="c-40349234">[1 more]</label></div><br/><div class="children"><div class="content">You can have open source and still charge for it. For example, getinboxzero.com or posthog.com or cal.com. Many others too.<p>Projects use different licenses for enterprise and regular features. Cal does that for example.<p>Novu doesn’t commit their enterprise features to their codebase. And they symlink those features in. Their project is all MIT because of this.</div><br/></div></div><div id="40350996" class="c"><input type="checkbox" id="c-40350996" checked=""/><div class="controls bullet"><span class="by">philip1209</span><span>|</span><a href="#40349234">prev</a><span>|</span><a href="#40350381">next</a><span>|</span><label class="collapse" for="c-40350996">[-]</label><label class="expand" for="c-40350996">[1 more]</label></div><br/><div class="children"><div class="content">I watched an interview of Tom from GitHub recently with Indie.vc, and he spent a solid five minutes reiterating that you shouldn’t split your code bases.</div><br/></div></div><div id="40350381" class="c"><input type="checkbox" id="c-40350381" checked=""/><div class="controls bullet"><span class="by">nadermx</span><span>|</span><a href="#40350996">prev</a><span>|</span><a href="#40341189">next</a><span>|</span><label class="collapse" for="c-40350381">[-]</label><label class="expand" for="c-40350381">[1 more]</label></div><br/><div class="children"><div class="content">On <a href="https:&#x2F;&#x2F;backgroundremoverai.com" rel="nofollow">https:&#x2F;&#x2F;backgroundremoverai.com</a> I put the utility into it&#x27;s own pip and open source it <a href="https:&#x2F;&#x2F;github.com&#x2F;nadermx&#x2F;backgroundremover">https:&#x2F;&#x2F;github.com&#x2F;nadermx&#x2F;backgroundremover</a>, and the web framework kept closed source.</div><br/></div></div><div id="40341189" class="c"><input type="checkbox" id="c-40341189" checked=""/><div class="controls bullet"><span class="by">throwaway11460</span><span>|</span><a href="#40350381">prev</a><span>|</span><a href="#40349538">next</a><span>|</span><label class="collapse" for="c-40341189">[-]</label><label class="expand" for="c-40341189">[1 more]</label></div><br/><div class="children"><div class="content">Base platform with extension support, core functionality as well as paid additions are extensions.</div><br/></div></div><div id="40341507" class="c"><input type="checkbox" id="c-40341507" checked=""/><div class="controls bullet"><span class="by">anonzzzies</span><span>|</span><a href="#40349538">prev</a><span>|</span><a href="#40349232">next</a><span>|</span><label class="collapse" for="c-40341507">[-]</label><label class="expand" for="c-40341507">[1 more]</label></div><br/><div class="children"><div class="content">Many of these products are fully source-available, just different directories live under different licenses. That seems the easiest way.</div><br/></div></div><div id="40349232" class="c"><input type="checkbox" id="c-40349232" checked=""/><div class="controls bullet"><span class="by">peignoir</span><span>|</span><a href="#40341507">prev</a><span>|</span><a href="#40349801">next</a><span>|</span><label class="collapse" for="c-40349232">[-]</label><label class="expand" for="c-40349232">[1 more]</label></div><br/><div class="children"><div class="content">on our end the core is open sourced, we keep the saas backend closed.</div><br/></div></div><div id="40349801" class="c"><input type="checkbox" id="c-40349801" checked=""/><div class="controls bullet"><span class="by">andrewmcwatters</span><span>|</span><a href="#40349232">prev</a><span>|</span><a href="#40349916">next</a><span>|</span><label class="collapse" for="c-40349801">[-]</label><label class="expand" for="c-40349801">[1 more]</label></div><br/><div class="children"><div class="content">Paid fork, rebased on free core.</div><br/></div></div><div id="40349916" class="c"><input type="checkbox" id="c-40349916" checked=""/><div class="controls bullet"><span class="by">dangus</span><span>|</span><a href="#40349801">prev</a><span>|</span><label class="collapse" for="c-40349916">[-]</label><label class="expand" for="c-40349916">[1 more]</label></div><br/><div class="children"><div class="content">For most businesses, you shouldn’t offer a free product at all, unless your solution’s success relies on becoming a popular ecosystem.</div><br/></div></div></div></div></div></div></div></body></html>