<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1715763670889" as="style"/><link rel="stylesheet" href="styles.css?v=1715763670889"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://medium.com/pinterest-engineering/hbase-deprecation-at-pinterest-8a99e6c8e6b7">HBase Deprecation at Pinterest</a>Â <span class="domain">(<a href="https://medium.com">medium.com</a>)</span></div><div class="subtext"><span>cloudsql</span> | <span>5 comments</span></div><br/><div><div id="40364333" class="c"><input type="checkbox" id="c-40364333" checked=""/><div class="controls bullet"><span class="by">winrid</span><span>|</span><a href="#40364424">next</a><span>|</span><label class="collapse" for="c-40364333">[-]</label><label class="expand" for="c-40364333">[2 more]</label></div><br/><div class="children"><div class="content">Wow, never realized Pinterest had 6 petabytes of data. I wonder if they&#x27;re including images in that. Even billions of rows is usually around 1-2tb, so makes you wonder what they&#x27;re storing many billions of.</div><br/><div id="40364360" class="c"><input type="checkbox" id="c-40364360" checked=""/><div class="controls bullet"><span class="by">ddorian43</span><span>|</span><a href="#40364333">parent</a><span>|</span><a href="#40364424">next</a><span>|</span><label class="collapse" for="c-40364360">[-]</label><label class="expand" for="c-40364360">[1 more]</label></div><br/><div class="children"><div class="content">It makes no sense at their scale to store images in Hbase. It&#x27;s probably just user tracking&#x2F;analytics.</div><br/></div></div></div></div><div id="40364424" class="c"><input type="checkbox" id="c-40364424" checked=""/><div class="controls bullet"><span class="by">zuck_vs_musk</span><span>|</span><a href="#40364333">prev</a><span>|</span><a href="#40364343">next</a><span>|</span><label class="collapse" for="c-40364424">[-]</label><label class="expand" for="c-40364424">[1 more]</label></div><br/><div class="children"><div class="content">They switched to an SQL database.
NoSQL</div><br/></div></div><div id="40364343" class="c"><input type="checkbox" id="c-40364343" checked=""/><div class="controls bullet"><span class="by">ddorian43</span><span>|</span><a href="#40364424">prev</a><span>|</span><label class="collapse" for="c-40364343">[-]</label><label class="expand" for="c-40364343">[1 more]</label></div><br/><div class="children"><div class="content">It reminds me of the often optimization story (how we got 2x+ faster by not doing very inefficient things), in this case going 6-&gt;3 replicas.<p>Example: TiDB at a certain time didn&#x27;t write rows clustered by the primary key on disk (they had a separate index). This is very costly in distributed setups (less costly on single-node setups like PostgreSQL).<p>There are many such cases in many dbs. Another point lacking in most dbs is the &quot;lsm compaction overhead&quot; you need to do for all replicas when you&#x27;re not using shared distributed storage.<p>This optimization can be seen on QuickWit (building&#x2F;compacting inverted index is  even more expensive than LSM compaction).</div><br/></div></div></div></div></div></div></div></body></html>