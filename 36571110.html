<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1688461260284" as="style"/><link rel="stylesheet" href="styles.css?v=1688461260284"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.dataorienteddesign.com/dodbook/dodmain.html">Data-Oriented Design (2018)</a> <span class="domain">(<a href="https://www.dataorienteddesign.com">www.dataorienteddesign.com</a>)</span></div><div class="subtext"><span>DeathArrow</span> | <span>116 comments</span></div><br/><div><div id="36572155" class="c"><input type="checkbox" id="c-36572155" checked=""/><div class="controls bullet"><span class="by">inopinatus</span><span>|</span><a href="#36571673">next</a><span>|</span><label class="collapse" for="c-36572155">[-]</label><label class="expand" for="c-36572155">[33 more]</label></div><br/><div class="children"><div class="content">Some of the best advice I ever got for writing composable, high-performance code was “work on structs of arrays, not arrays of structs”. I hear many echoes of that advice in this text. Turns out that entity-component architectures work well in line-of-business applications too, not just games.<p>Alas, many developers in enterprise are rusted onto a record-keeping CRUD model and struggle to think in columns rather than rows. The idea of inserting an entity id into a “published” table, instead of setting a boolean “published” field to true, doesn’t always come naturally. Yet once you realise how readily polymorphic this is, you may start wanting to use such approaches to data for everything. Rich new opportunities then arise from cross-pollinating component data. Some may question why it is structurally permissible that, say, a network interface can have a birthday, or why an invoice has an IPv6 address, why my cat is in the DHCP pool, whilst limegreen is deleted and $5 on Tuesdays. This of course is half the fun.<p>I don’t accept that it’s wholly incompatible with OO, though, a thesis you’ll see dotted around the place. I’ve even taken this approach with Ruby using Active Record for persistence; not normally a domain where the words “high performance” are bandied about. That worked particularly because Ruby’s object system, being more Smalltalk-ish than C++&#x2F;Java-ish, strongly favours composition over inheritance.</div><br/><div id="36584015" class="c"><input type="checkbox" id="c-36584015" checked=""/><div class="controls bullet"><span class="by">winter_blue</span><span>|</span><a href="#36572155">parent</a><span>|</span><a href="#36573301">next</a><span>|</span><label class="collapse" for="c-36584015">[-]</label><label class="expand" for="c-36584015">[1 more]</label></div><br/><div class="children"><div class="content">Wouldn’t structs of arrays affect cache locality adversely, if say you’re say reading and processing the data in sequential order? You’d have to jump between memory addresses that are pretty far apart to read in a single record &#x2F; set of fields, and potentially trigger cache misses since they’re likely spread out across different memory pages and you end up filling your L1&#x2F;L2&#x2F;L3 cache?</div><br/></div></div><div id="36573301" class="c"><input type="checkbox" id="c-36573301" checked=""/><div class="controls bullet"><span class="by">gnuvince</span><span>|</span><a href="#36572155">parent</a><span>|</span><a href="#36584015">prev</a><span>|</span><a href="#36573617">next</a><span>|</span><label class="collapse" for="c-36573301">[-]</label><label class="expand" for="c-36573301">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I don’t accept that it’s wholly incompatible with OO<p>It&#x27;s not incompatible with the mechanics of OO, but it does require that programmers change how they approach problems. For instance, a common way to write code in an OO language is to focus solely on the thing you want to think about (a user, a blog post, a money transaction, what have you) and to implement it in isolation of everything else, to hide all of its data, and then to think about what methods need to be exposed to be useful to other parts of the system. The idea of encapsulation is quite strong.<p>In DOD, it is more common for data related to different domains to be accessible and let the subsystems pick and choose what they need to do their work. Nothing about Java or Ruby would prevent this, but programmers definitely have mental barriers.</div><br/></div></div><div id="36573617" class="c"><input type="checkbox" id="c-36573617" checked=""/><div class="controls bullet"><span class="by">andsoitis</span><span>|</span><a href="#36572155">parent</a><span>|</span><a href="#36573301">prev</a><span>|</span><a href="#36573922">next</a><span>|</span><label class="collapse" for="c-36573617">[-]</label><label class="expand" for="c-36573617">[1 more]</label></div><br/><div class="children"><div class="content">&gt; high-performance code was “work on structs of arrays, not arrays of structs”<p>Wikipedia&#x27;s article &quot;Array of Structure (AoS) and Structure of Arrays (SoA)&quot; explains the trade off between performance (SoA) and intuitiveness&#x2F;lang support (AoS): <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;AoS_and_SoA" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;AoS_and_SoA</a><p>They also get into software support for SoA, including data frames as implemented by R, Python&#x27;s Panda&#x27;s package, and Julia&#x27;s DataFrames.jl package which allows you to access SoA like AoS.</div><br/></div></div><div id="36573922" class="c"><input type="checkbox" id="c-36573922" checked=""/><div class="controls bullet"><span class="by">rawgabbit</span><span>|</span><a href="#36572155">parent</a><span>|</span><a href="#36573617">prev</a><span>|</span><a href="#36573107">next</a><span>|</span><label class="collapse" for="c-36573922">[-]</label><label class="expand" for="c-36573922">[5 more]</label></div><br/><div class="children"><div class="content">In the data side of the world, &quot;structs of arrays&quot; translate to column based indexes i.e. Snowflake and OLAP.  &quot;Arrays of structs&quot; translate to relational databases with its page&#x2F;row based indexes.<p>FWIW, I am a big fan of Snowflake and think it will eat everyone else&#x27;s lunch.  I also find it amusing that Snowflake &quot;supports&quot; foreign keys but don&#x27;t enforce it.  In other words, Snowflake is as &quot;nosql&quot; as I care to go.</div><br/><div id="36580581" class="c"><input type="checkbox" id="c-36580581" checked=""/><div class="controls bullet"><span class="by">OJFord</span><span>|</span><a href="#36572155">root</a><span>|</span><a href="#36573922">parent</a><span>|</span><a href="#36574078">next</a><span>|</span><label class="collapse" for="c-36580581">[-]</label><label class="expand" for="c-36580581">[3 more]</label></div><br/><div class="children"><div class="content">&gt; &quot;supports&quot; foreign keys but don&#x27;t enforce it<p>As in, you can have a sort of &#x27;link&#x27; to another table, that not only mignt be null, but might be a value which doesn&#x27;t exist over there?<p>What does the &#x27;support&#x27; add over just having a column in which you tell yourself (but not your DBMS) you&#x27;re storing values which correspond to keys in another table?<p>(You can take it further - s&#x2F;keys&#x2F;values in a column&#x2F; - many to one relationships without an intermediary table! Amazing! ...<i>more</i> &#x27;NoSQL&#x27; than <i>I</i> care to go I think, for almost anything.)</div><br/><div id="36580651" class="c"><input type="checkbox" id="c-36580651" checked=""/><div class="controls bullet"><span class="by">rawgabbit</span><span>|</span><a href="#36572155">root</a><span>|</span><a href="#36580581">parent</a><span>|</span><a href="#36574078">next</a><span>|</span><label class="collapse" for="c-36580651">[-]</label><label class="expand" for="c-36580651">[2 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;docs.snowflake.com&#x2F;en&#x2F;sql-reference&#x2F;constraints-overview" rel="nofollow noreferrer">https:&#x2F;&#x2F;docs.snowflake.com&#x2F;en&#x2F;sql-reference&#x2F;constraints-over...</a><p><i>Note
Snowflake supports defining and maintaining constraints, but does not enforce them, except for NOT NULL constraints, which are always enforced.</i></div><br/></div></div></div></div><div id="36574078" class="c"><input type="checkbox" id="c-36574078" checked=""/><div class="controls bullet"><span class="by">nerdponx</span><span>|</span><a href="#36572155">root</a><span>|</span><a href="#36573922">parent</a><span>|</span><a href="#36580581">prev</a><span>|</span><a href="#36573107">next</a><span>|</span><label class="collapse" for="c-36574078">[-]</label><label class="expand" for="c-36574078">[1 more]</label></div><br/><div class="children"><div class="content">Or an in-memory &quot;data frame&quot; like in R, Python&#x27;s Pandas, and Polars.</div><br/></div></div></div></div><div id="36573107" class="c"><input type="checkbox" id="c-36573107" checked=""/><div class="controls bullet"><span class="by">DeathArrow</span><span>|</span><a href="#36572155">parent</a><span>|</span><a href="#36573922">prev</a><span>|</span><a href="#36581811">next</a><span>|</span><label class="collapse" for="c-36573107">[-]</label><label class="expand" for="c-36573107">[3 more]</label></div><br/><div class="children"><div class="content">As I see it, there are two types of DOD, one that you&#x27;ve mentioned and where you “work on structs of arrays, not arrays of structs”.<p>The other one means just giving up of encapsulation, separate the data from the methods that work with the data, think the whole app in terms on how the data flows through it and model it so everything is easy to understand and change. For added correctness, you can use immutable data structures and pure functions.</div><br/><div id="36583516" class="c"><input type="checkbox" id="c-36583516" checked=""/><div class="controls bullet"><span class="by">butterNaN</span><span>|</span><a href="#36572155">root</a><span>|</span><a href="#36573107">parent</a><span>|</span><a href="#36581483">next</a><span>|</span><label class="collapse" for="c-36583516">[-]</label><label class="expand" for="c-36583516">[1 more]</label></div><br/><div class="children"><div class="content">Isn&#x27;t this the very definition of functional programming?</div><br/></div></div><div id="36581483" class="c"><input type="checkbox" id="c-36581483" checked=""/><div class="controls bullet"><span class="by">hohohmm</span><span>|</span><a href="#36572155">root</a><span>|</span><a href="#36573107">parent</a><span>|</span><a href="#36583516">prev</a><span>|</span><a href="#36581811">next</a><span>|</span><label class="collapse" for="c-36581483">[-]</label><label class="expand" for="c-36581483">[1 more]</label></div><br/><div class="children"><div class="content">This is exactly right. Good summary.</div><br/></div></div></div></div><div id="36581811" class="c"><input type="checkbox" id="c-36581811" checked=""/><div class="controls bullet"><span class="by">glun</span><span>|</span><a href="#36572155">parent</a><span>|</span><a href="#36573107">prev</a><span>|</span><a href="#36575315">next</a><span>|</span><label class="collapse" for="c-36581811">[-]</label><label class="expand" for="c-36581811">[1 more]</label></div><br/><div class="children"><div class="content">This architecture completely ruins your write performance. Theres a reason double databases, one OLTP and one OLAP, is the norm.</div><br/></div></div><div id="36575315" class="c"><input type="checkbox" id="c-36575315" checked=""/><div class="controls bullet"><span class="by">hu3</span><span>|</span><a href="#36572155">parent</a><span>|</span><a href="#36581811">prev</a><span>|</span><a href="#36573945">next</a><span>|</span><label class="collapse" for="c-36575315">[-]</label><label class="expand" for="c-36575315">[3 more]</label></div><br/><div class="children"><div class="content">&gt; The idea of inserting an entity id into a “published” table, instead of setting a boolean “published” field to true, doesn’t always come naturally.<p>It doesn&#x27;t come naturally because now you need a JOIN in your SQL just to fetch what was before a column. Or two queries instead of one.<p>Not to mention having closely related data spread in different tables increases cognitive load.<p>You just added a layer of indirection for what gain precisely?</div><br/><div id="36579455" class="c"><input type="checkbox" id="c-36579455" checked=""/><div class="controls bullet"><span class="by">xupybd</span><span>|</span><a href="#36572155">root</a><span>|</span><a href="#36575315">parent</a><span>|</span><a href="#36573945">next</a><span>|</span><label class="collapse" for="c-36579455">[-]</label><label class="expand" for="c-36579455">[2 more]</label></div><br/><div class="children"><div class="content">I think they&#x27;re arguing that you get a performance gain. Personally the systems if deal with wouldn&#x27;t gain from such and optimisation as there is too little data. So I&#x27;ll stick to the simplest approach.</div><br/><div id="36580709" class="c"><input type="checkbox" id="c-36580709" checked=""/><div class="controls bullet"><span class="by">hu3</span><span>|</span><a href="#36572155">root</a><span>|</span><a href="#36579455">parent</a><span>|</span><a href="#36573945">next</a><span>|</span><label class="collapse" for="c-36580709">[-]</label><label class="expand" for="c-36580709">[1 more]</label></div><br/><div class="children"><div class="content">I agree with you. Splitting db tables can be a net positive in very specific cases but it smells like premature optimization.</div><br/></div></div></div></div></div></div><div id="36573945" class="c"><input type="checkbox" id="c-36573945" checked=""/><div class="controls bullet"><span class="by">Ovid</span><span>|</span><a href="#36572155">parent</a><span>|</span><a href="#36575315">prev</a><span>|</span><a href="#36573046">next</a><span>|</span><label class="collapse" for="c-36573945">[-]</label><label class="expand" for="c-36573945">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve tried to push entity-component-systems (ECS) for non-game applications. A financial company in London took that advice to manage the complexity of their system since it was such a good fit.<p>For those who are curious, here&#x27;s a very brief introduction to ECS: <a href="https:&#x2F;&#x2F;dev.to&#x2F;ovid&#x2F;the-unknown-design-pattern-1l64" rel="nofollow noreferrer">https:&#x2F;&#x2F;dev.to&#x2F;ovid&#x2F;the-unknown-design-pattern-1l64</a></div><br/><div id="36583439" class="c"><input type="checkbox" id="c-36583439" checked=""/><div class="controls bullet"><span class="by">F-W-M</span><span>|</span><a href="#36572155">root</a><span>|</span><a href="#36573945">parent</a><span>|</span><a href="#36573046">next</a><span>|</span><label class="collapse" for="c-36583439">[-]</label><label class="expand" for="c-36583439">[1 more]</label></div><br/><div class="children"><div class="content">Would you mind to elaborate a bit on your system? I tried to do something similar for an algo trading system, but in the end I hadn&#x27;t enough entities to justify the approach.</div><br/></div></div></div></div><div id="36573046" class="c"><input type="checkbox" id="c-36573046" checked=""/><div class="controls bullet"><span class="by">whstl</span><span>|</span><a href="#36572155">parent</a><span>|</span><a href="#36573945">prev</a><span>|</span><a href="#36574764">next</a><span>|</span><label class="collapse" for="c-36573046">[-]</label><label class="expand" for="c-36573046">[4 more]</label></div><br/><div class="children"><div class="content"><i>&quot;I don’t accept that it’s wholly incompatible with OO, though, a thesis you’ll see dotted around the place.&quot;</i><p>Agreed. Arrays of Structs is not the part that is really incompatible.<p>The part that clashes a bit with <i>traditional</i> OOP is ECS, where data and code are meant to be kept separate. But of course I&#x27;m talking about <i>very traditional OOP</i>. It is entirely possible to use an OOP languages + classes to implement ECS. It&#x27;s just not gonna be &quot;traditional&quot;.<p>EDIT: To quote your other reply: &quot;records don’t have to identify strongly with a class hierarchy&quot;.</div><br/><div id="36583771" class="c"><input type="checkbox" id="c-36583771" checked=""/><div class="controls bullet"><span class="by">galaxyLogic</span><span>|</span><a href="#36572155">root</a><span>|</span><a href="#36573046">parent</a><span>|</span><a href="#36579619">next</a><span>|</span><label class="collapse" for="c-36583771">[-]</label><label class="expand" for="c-36583771">[1 more]</label></div><br/><div class="children"><div class="content">Working with JavaScript has caused me to ask this question: &quot;When should I create a Class, and when a Function?&quot;<p>This is not a trivial question because class-instances are basically collections of Functions, and Functions can return class-instances. So a trivial answer would be:  &quot;It does not matter, you can do everything with both or either one&quot;.<p>No, you shouldn&#x27;t do everything with both, you should do some specific types of things with classes and other types of things with functions. But what?<p>I&#x27;ve come to this Rule-of-Thumb: Use classes only to represent and encapsulate data, use functions to process and transform class-instances.<p>In practice this means that in most cases classes should not have methods which take arguments. Exceptions: You can have setters. You can have a new() method which creates a new instance with data that differs from the data of the recipient. But it should be all about data-creation and extraction.<p>Classes are still truly useful over plain records, because a class abstracts over what data is stored, and what are the names by which it is accessed, and whether the methods return a stored field or a calculated one.<p>The idea that &quot;Everything is an instance of a  Class&quot; as in Smalltalk is a bit flawed, or at least too trivial.  Except of course it is also true that (even in JavaScript) Functions are objects.  And in Smalltalk you can use BlockClosures, which really are &quot;functions&quot;.<p>This division of design makes it easier for me to  think about the structure of the whole application. I no longer have classes for everything.  Instead I have classes which represent and provide access to and creation of data, and a set of functions which do the processing of those class-instances.<p>Why is this good? Because classes are, and easily become complicated, since they can have many methods, they can have both static and instance-methods, and methods can be local or inherited and you can even use the &#x27;super&#x27; to add to the confusion.  So therefore if you can find a way to force your classes to be as simple as possible, do that. Don&#x27;t make them do complicated things since they are complicated to start with.<p>Dividing the design into two parts, classes + functions, divides the complexity of the whole app into two parts, each of which contains about 1&#x2F;2 of the complexity of the whole app. The complexity is now data-complexity PLUS function-complexity whereas with use-classes-for-everything the app-complexity would be more like data-complexity TIMES function complexity (I conjecture).<p>Keep data (= classes) and functions separate. Divide and conquer complexity.</div><br/></div></div><div id="36579619" class="c"><input type="checkbox" id="c-36579619" checked=""/><div class="controls bullet"><span class="by">loup-vaillant</span><span>|</span><a href="#36572155">root</a><span>|</span><a href="#36573046">parent</a><span>|</span><a href="#36583771">prev</a><span>|</span><a href="#36574764">next</a><span>|</span><label class="collapse" for="c-36579619">[-]</label><label class="expand" for="c-36579619">[2 more]</label></div><br/><div class="children"><div class="content">Not sure what you all mean by OOP to be honest. Is this a case of OOP actually meaning &quot;good programming&quot;, then morphing into the most fashionable (and hopefully best) practices of the day?<p>It wouldn&#x27;t be the first time… <a href="https:&#x2F;&#x2F;loup-vaillant.fr&#x2F;articles&#x2F;deaths-of-oop" rel="nofollow noreferrer">https:&#x2F;&#x2F;loup-vaillant.fr&#x2F;articles&#x2F;deaths-of-oop</a></div><br/><div id="36583616" class="c"><input type="checkbox" id="c-36583616" checked=""/><div class="controls bullet"><span class="by">whstl</span><span>|</span><a href="#36572155">root</a><span>|</span><a href="#36579619">parent</a><span>|</span><a href="#36574764">next</a><span>|</span><label class="collapse" for="c-36583616">[-]</label><label class="expand" for="c-36583616">[1 more]</label></div><br/><div class="children"><div class="content">Well, I made the case to emphasize the word <i>traditional</i>. By &quot;traditional&quot; I mean OOP that follows the popular practices and pedagogy.<p>Using ECS means totally eschewing things like encapsulation and inheritance. You stop grouping functions and methods together. You basically have &quot;free records&quot; and &quot;free procedures&quot; (or &quot;free methods&quot; if the language requires classes, Kingdom of Nouns style). ECS is a procedural&#x2F;functional paradigm.<p>You can argue that this is not OOP anymore, and guess what: I&#x27;ll probably support you on that! :)</div><br/></div></div></div></div></div></div><div id="36574764" class="c"><input type="checkbox" id="c-36574764" checked=""/><div class="controls bullet"><span class="by">ryukoposting</span><span>|</span><a href="#36572155">parent</a><span>|</span><a href="#36573046">prev</a><span>|</span><a href="#36573395">next</a><span>|</span><label class="collapse" for="c-36574764">[-]</label><label class="expand" for="c-36574764">[1 more]</label></div><br/><div class="children"><div class="content">Very insightful. I never thought about it like this, but it&#x27;s common practice in embedded systems to approach problems in this way. One module may provide a statically-sized pool of like objects, and other modules extend behavior in relation to those objects by carrying buffers of pointers and&#x2F;or indexes into that pool. It might feel inefficient due to the storage of so many pointers&#x2F;indexes, but you&#x27;re optimizing the size of the largest thing: the object pool itself.</div><br/></div></div><div id="36573395" class="c"><input type="checkbox" id="c-36573395" checked=""/><div class="controls bullet"><span class="by">AndrewKemendo</span><span>|</span><a href="#36572155">parent</a><span>|</span><a href="#36574764">prev</a><span>|</span><a href="#36574987">next</a><span>|</span><label class="collapse" for="c-36573395">[-]</label><label class="expand" for="c-36573395">[3 more]</label></div><br/><div class="children"><div class="content">&gt;The idea of inserting an entity id into a “published” table, instead of setting a boolean “published” field to true, doesn’t always come naturally. Yet once you realise how readily polymorphic this is, you may start wanting to use such approaches to data for everything.<p>Wow thank you for this, it&#x27;s a heuristic I didn&#x27;t think about but is really powerful.<p>I need to think through some of the implications, cause I think there are some risks to this approach - namely co-mingling production and non-production data in the same infra. That means that there are data at rest and in transport that are following the same data pathways but have different production criticality. It puts a lot of risk on the filter working perfectly, rather than not even being available on the same infra.<p>Just spitballing:<p>Is the ostensible &quot;prod_live_bool&quot; flag manually set? If not then a bug in any automation would certainly cause a nasty data exposure issue<p>Are you doing column level security tokens? Wouldn&#x27;t that need some kind of intra-table RBAC? In other words, it seems like if you want any RBAC within your table, then you have to bring it with you every time from the beginning because you have no idea what level of data sensitivity you&#x27;ll have eventually, and refactoring an increasingly expanding table to inherit RBAC later ---- omg I can&#x27;t even think of the amount of work that would be. O(n^2) level of manual work??<p>Does it lead to a canonical &quot;live or not&quot; lookup table&#x2F;dict at scale?<p>I think the data security risks would prevent me from using this design pattern for critical applications in MOST cases, but I do love some of the patterns here and will be exploring this in the future for sure!</div><br/><div id="36575479" class="c"><input type="checkbox" id="c-36575479" checked=""/><div class="controls bullet"><span class="by">Twisol</span><span>|</span><a href="#36572155">root</a><span>|</span><a href="#36573395">parent</a><span>|</span><a href="#36576672">next</a><span>|</span><label class="collapse" for="c-36575479">[-]</label><label class="expand" for="c-36575479">[1 more]</label></div><br/><div class="children"><div class="content">I interpreted `published` along the lines of blog posts, in which an article can be either a draft (visible only to the author) or published (visible to the world). This seems different from dev&#x2F;prod venueing, where having separate databases altogether makes sense.<p>I understood the column-first approach more as an alternative to putting all columns for an entity in one table, especially when rows often don&#x27;t populate every column. From that perspective, what&#x27;s being described is a strong separation of concerns; applying this to dev&#x2F;prod would be a weakening of this separation, and so probably not what is desired.</div><br/></div></div><div id="36576672" class="c"><input type="checkbox" id="c-36576672" checked=""/><div class="controls bullet"><span class="by">foobarbaz33</span><span>|</span><a href="#36572155">root</a><span>|</span><a href="#36573395">parent</a><span>|</span><a href="#36575479">prev</a><span>|</span><a href="#36574987">next</a><span>|</span><label class="collapse" for="c-36576672">[-]</label><label class="expand" for="c-36576672">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t think you&#x27;re talking about the same thing as the parent comment.</div><br/></div></div></div></div><div id="36574987" class="c"><input type="checkbox" id="c-36574987" checked=""/><div class="controls bullet"><span class="by">incrudible</span><span>|</span><a href="#36572155">parent</a><span>|</span><a href="#36573395">prev</a><span>|</span><a href="#36572585">next</a><span>|</span><label class="collapse" for="c-36574987">[-]</label><label class="expand" for="c-36574987">[1 more]</label></div><br/><div class="children"><div class="content">&gt; you may start wanting to use such approaches to data for everything<p>Please, dont. Arrays of structs is more natural for a reason, SOA is not universally faster and it has some of its own performance problems. If you <i>really</i> care about performance, AOSOA may well be your best bet. Again, please dont use it for everything.<p>&gt; a dhcp pool full of cats is half the fun<p>Replacing the weird code that the last guy wrote for his own amusement is not fun.</div><br/></div></div><div id="36572585" class="c"><input type="checkbox" id="c-36572585" checked=""/><div class="controls bullet"><span class="by">m_mueller</span><span>|</span><a href="#36572155">parent</a><span>|</span><a href="#36574987">prev</a><span>|</span><a href="#36573463">next</a><span>|</span><label class="collapse" for="c-36572585">[-]</label><label class="expand" for="c-36572585">[5 more]</label></div><br/><div class="children"><div class="content">&gt; I don’t accept that it’s wholly incompatible with OO<p>I don&#x27;t think it is, not even in Java. If you use its primitive array and value types, you can easily wrap this in a data wrapper class with functional interfaces, which then can be used quite elegantly in the rest of your code in an OO way - you just don&#x27;t box all the records into objects.</div><br/><div id="36572938" class="c"><input type="checkbox" id="c-36572938" checked=""/><div class="controls bullet"><span class="by">inopinatus</span><span>|</span><a href="#36572155">root</a><span>|</span><a href="#36572585">parent</a><span>|</span><a href="#36573463">next</a><span>|</span><label class="collapse" for="c-36572938">[-]</label><label class="expand" for="c-36572938">[4 more]</label></div><br/><div class="children"><div class="content">Agreed.  Honestly I think the hardest part here is programmer mindset - when you suggest that identity is fluid and records don’t have to correspond to a class hierarchy some folks get a panicked look going on, like you just claimed to eat their pets</div><br/><div id="36575004" class="c"><input type="checkbox" id="c-36575004" checked=""/><div class="controls bullet"><span class="by">m_mueller</span><span>|</span><a href="#36572155">root</a><span>|</span><a href="#36572938">parent</a><span>|</span><a href="#36573463">next</a><span>|</span><label class="collapse" for="c-36575004">[-]</label><label class="expand" for="c-36575004">[3 more]</label></div><br/><div class="children"><div class="content">Yep. Funny story, this was actually a coding interview homework for a question with order of millions of data rows from a file. The exercise required 10s timing requirement, so I decided to do it data centric from start. Interviewers found my style ‚non idiomatic‘, but probably never thought about why my version was done in fractions of a second.</div><br/><div id="36582219" class="c"><input type="checkbox" id="c-36582219" checked=""/><div class="controls bullet"><span class="by">zx8080</span><span>|</span><a href="#36572155">root</a><span>|</span><a href="#36575004">parent</a><span>|</span><a href="#36573463">next</a><span>|</span><label class="collapse" for="c-36582219">[-]</label><label class="expand" for="c-36582219">[2 more]</label></div><br/><div class="children"><div class="content">Did you pass the interview?</div><br/><div id="36583280" class="c"><input type="checkbox" id="c-36583280" checked=""/><div class="controls bullet"><span class="by">m_mueller</span><span>|</span><a href="#36572155">root</a><span>|</span><a href="#36582219">parent</a><span>|</span><a href="#36573463">next</a><span>|</span><label class="collapse" for="c-36583280">[-]</label><label class="expand" for="c-36583280">[1 more]</label></div><br/><div class="children"><div class="content">I did and got the offer. In the end it didn&#x27;t work out however (better offer elsewhere).</div><br/></div></div></div></div></div></div></div></div></div></div><div id="36573463" class="c"><input type="checkbox" id="c-36573463" checked=""/><div class="controls bullet"><span class="by">Capricorn2481</span><span>|</span><a href="#36572155">parent</a><span>|</span><a href="#36572585">prev</a><span>|</span><a href="#36571673">next</a><span>|</span><label class="collapse" for="c-36573463">[-]</label><label class="expand" for="c-36573463">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Alas, many developers in enterprise are rusted onto a record-keeping CRUD model and struggle to think in columns rather than rows. The idea of inserting an entity id into a “published” table, instead of setting a boolean “published” field to true, doesn’t always come naturally. Yet once you realise how readily polymorphic this is, you may start wanting to use such approaches to data for everything<p>I don&#x27;t really understand what&#x27;s Polymorphic about this, or even beneficial. It seems like everytime I&#x27;ve had a boolean column in a long-standing application, it eventually needed to turn into something else</div><br/></div></div></div></div><div id="36571673" class="c"><input type="checkbox" id="c-36571673" checked=""/><div class="controls bullet"><span class="by">bob1029</span><span>|</span><a href="#36572155">prev</a><span>|</span><a href="#36573139">next</a><span>|</span><label class="collapse" for="c-36571673">[-]</label><label class="expand" for="c-36571673">[23 more]</label></div><br/><div class="children"><div class="content">&gt; Is your data layout defined by a single interpretation from a single point of view?<p>I think this might be the most important question at technology selection and architecture time. Answering it usually requires talking to the business and customers.<p>If you are certain there is exactly 1 valid &quot;view&quot; of the data that will be used throughout, then perhaps enshrining it in code makes sense. If you are even a tiny bit uncertain of this, a relational-style model probably works better. SQL is the end game for most businesses once they realize the game theory around this one...<p>I am curious what HN thinks as major reasons for why everyone seems to have moved away from 1 big SQL database. From my perspective, yeah we have &quot;web scale&quot; edge cases that threaten vertical scalability on writes, but most businesses will never touch this, including members of the F100.</div><br/><div id="36571757" class="c"><input type="checkbox" id="c-36571757" checked=""/><div class="controls bullet"><span class="by">jwestbury</span><span>|</span><a href="#36571673">parent</a><span>|</span><a href="#36572092">next</a><span>|</span><label class="collapse" for="c-36571757">[-]</label><label class="expand" for="c-36571757">[7 more]</label></div><br/><div class="children"><div class="content">At a previous F100 company -- a tech company whose products are widely used, we&#x27;ll say -- we received guidance that RDBMS was verboten except with explicit approval. This had nothing to do with the best ways to model a given dataset, or achieving the best performance, and everything to do with schema flexibility and a history of outages caused by fucking up schema migrations. These problems weren&#x27;t occurring in our NoSQL designs, and whatever benefits SQL databases offered didn&#x27;t counter the huge benefits we gained from NoSQL&#x27;s lack of rigid schema.<p>Of course, bad uses of key-value stores can have <i>massive</i> performance impacts, and huge monetary costs when leveraging cloud platforms like DynamoDB -- I&#x27;ve seen a lot of cases where people didn&#x27;t properly structure their data for DDB, and ended up performing loads of scans and sending costs through the roof.</div><br/><div id="36572330" class="c"><input type="checkbox" id="c-36572330" checked=""/><div class="controls bullet"><span class="by">isoprophlex</span><span>|</span><a href="#36571673">root</a><span>|</span><a href="#36571757">parent</a><span>|</span><a href="#36571820">next</a><span>|</span><label class="collapse" for="c-36572330">[-]</label><label class="expand" for="c-36572330">[1 more]</label></div><br/><div class="children"><div class="content">I read that as &quot;We don&#x27;t want things to crash immediately when the data model changes. We want things to keep chugging along until the last possible moment, when we will realize we&#x27;ve been silently corrupting everything&quot;</div><br/></div></div><div id="36571820" class="c"><input type="checkbox" id="c-36571820" checked=""/><div class="controls bullet"><span class="by">bob1029</span><span>|</span><a href="#36571673">root</a><span>|</span><a href="#36571757">parent</a><span>|</span><a href="#36572330">prev</a><span>|</span><a href="#36572553">next</a><span>|</span><label class="collapse" for="c-36571820">[-]</label><label class="expand" for="c-36571820">[1 more]</label></div><br/><div class="children"><div class="content">&gt; schema flexibility<p>If the business is of the notion that the schema is &quot;flexible&quot;, then it is probably time to bring all of the MBAs into a conference room and have a come-to-jesus conversation about the limitations of information theory and human suffering.<p>At a certain point, when someone says &quot;Widget&quot;, everyone in the organization needs to be on the same page. This goes well beyond any specific technology.</div><br/></div></div><div id="36572553" class="c"><input type="checkbox" id="c-36572553" checked=""/><div class="controls bullet"><span class="by">geophile</span><span>|</span><a href="#36571673">root</a><span>|</span><a href="#36571757">parent</a><span>|</span><a href="#36571820">prev</a><span>|</span><a href="#36571861">next</a><span>|</span><label class="collapse" for="c-36572553">[-]</label><label class="expand" for="c-36572553">[1 more]</label></div><br/><div class="children"><div class="content">And then there are silent query failures. Want to change “name”: “John Smith” to “name”: {“first”: “John”, “last”: “Smith”}? Easy! No schema migration!<p>But you have to modify all your queries to support both old and new formats, or stop the world and change all the data (after modifying all your code, including dynamically generated queries).<p>And if you don’t, your queries fail silently.</div><br/></div></div><div id="36571861" class="c"><input type="checkbox" id="c-36571861" checked=""/><div class="controls bullet"><span class="by">barrkel</span><span>|</span><a href="#36571673">root</a><span>|</span><a href="#36571757">parent</a><span>|</span><a href="#36572553">prev</a><span>|</span><a href="#36571987">next</a><span>|</span><label class="collapse" for="c-36571861">[-]</label><label class="expand" for="c-36571861">[1 more]</label></div><br/><div class="children"><div class="content">Hybrid solutions are possible; e.g. JSONB in Postgres, where you can still index and join with decent performance.</div><br/></div></div><div id="36571987" class="c"><input type="checkbox" id="c-36571987" checked=""/><div class="controls bullet"><span class="by">littlestymaar</span><span>|</span><a href="#36571673">root</a><span>|</span><a href="#36571757">parent</a><span>|</span><a href="#36571861">prev</a><span>|</span><a href="#36576025">next</a><span>|</span><label class="collapse" for="c-36571987">[-]</label><label class="expand" for="c-36571987">[1 more]</label></div><br/><div class="children"><div class="content">&gt; and everything to do with schema flexibility and a history of outages caused by fucking up schema migrations. These problems weren&#x27;t occurring in our NoSQL designs, and whatever benefits SQL databases offered didn&#x27;t counter the huge benefits we gained from NoSQL&#x27;s lack of rigid schema<p>Yikes</div><br/></div></div><div id="36576025" class="c"><input type="checkbox" id="c-36576025" checked=""/><div class="controls bullet"><span class="by">layer8</span><span>|</span><a href="#36571673">root</a><span>|</span><a href="#36571757">parent</a><span>|</span><a href="#36571987">prev</a><span>|</span><a href="#36572092">next</a><span>|</span><label class="collapse" for="c-36576025">[-]</label><label class="expand" for="c-36576025">[1 more]</label></div><br/><div class="children"><div class="content">Sounds like a company whose end users are mostly not their customers.</div><br/></div></div></div></div><div id="36572092" class="c"><input type="checkbox" id="c-36572092" checked=""/><div class="controls bullet"><span class="by">lovasoa</span><span>|</span><a href="#36571673">parent</a><span>|</span><a href="#36571757">prev</a><span>|</span><a href="#36572879">next</a><span>|</span><label class="collapse" for="c-36572092">[-]</label><label class="expand" for="c-36572092">[3 more]</label></div><br/><div class="children"><div class="content">&gt; why everyone seems to have moved away from 1 big SQL database<p>Hacker News is probably not representative of the whole tech ecosystem. I think a majority of applications still uses one big SQL database.<p>I recently released an open-source framework [1] that is entirely based on Data-Oriented Design. I have received a lot of comments from people for whom it was the right design. Having all your data in the same place makes so many things easier!<p>[1] <a href="https:&#x2F;&#x2F;sql.ophir.dev" rel="nofollow noreferrer">https:&#x2F;&#x2F;sql.ophir.dev</a></div><br/><div id="36575672" class="c"><input type="checkbox" id="c-36575672" checked=""/><div class="controls bullet"><span class="by">thebruce87m</span><span>|</span><a href="#36571673">root</a><span>|</span><a href="#36572092">parent</a><span>|</span><a href="#36572879">next</a><span>|</span><label class="collapse" for="c-36575672">[-]</label><label class="expand" for="c-36575672">[2 more]</label></div><br/><div class="children"><div class="content">Web technologies are also not representative of all the whole tech ecosystem. I can’t fit an SQL database on my microcontroller.</div><br/><div id="36575981" class="c"><input type="checkbox" id="c-36575981" checked=""/><div class="controls bullet"><span class="by">bob1029</span><span>|</span><a href="#36571673">root</a><span>|</span><a href="#36575672">parent</a><span>|</span><a href="#36572879">next</a><span>|</span><label class="collapse" for="c-36575981">[-]</label><label class="expand" for="c-36575981">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I can’t fit an SQL database on my microcontroller.<p>Perhaps not SQL Server or Oracle, but unless we are talking about a very limited device there are likely options.</div><br/></div></div></div></div></div></div><div id="36572879" class="c"><input type="checkbox" id="c-36572879" checked=""/><div class="controls bullet"><span class="by">delusional</span><span>|</span><a href="#36571673">parent</a><span>|</span><a href="#36572092">prev</a><span>|</span><a href="#36572173">next</a><span>|</span><label class="collapse" for="c-36572879">[-]</label><label class="expand" for="c-36572879">[2 more]</label></div><br/><div class="children"><div class="content">&gt;I am curious what HN thinks as major reasons for why everyone seems to have moved away from 1 big SQL database.<p>We haven&#x27;t moved away from it, but we have run into a certain class of problems that seem related to the 1 big SQL database architecture. We&#x27;re a really old enterprise, with a lot of non-technical people creating a lot of technical solutions back in the day that have become calcified and therefore have to keep existing. One of the things we have is 5 levels of SQL data transformations from the operational database (the one that actually has applications) into different generations of datamodel as the &quot;type&quot; of business we did changed.<p>The problem is that as we accumulate ever more layers, we keep building on the layers before. The application that was built 10 years ago on abstraction layer 2 now needs some data from layer 4, let&#x27;s create a new script that loops that data back into the previous layer and keep going. Eventually we&#x27;ve ended up with a huge amount of interdependent tables that all load data from other tables&#x2F;views in weird and unintuitive ways, and the project to sort out the mess was deemed too expensive and postponed until the 2030&#x27;s.<p>I think it&#x27;s understandable that people see those problems and consider how we could have avoided them. Unfortunately, for reasons I don&#x27;t fully grasp, it seems impossible to apply anything to software engineers that require discipline, and we have to somehow make it impossible to create the spaghetti. That&#x27;s where separation comes in. If you can&#x27;t read the data from some other service, then it&#x27;s impossible to create a spaghetti mess that kills velocity for both parties.<p>The vertical separation of application becomes a software solution to the people problem of poor engineering discipline in enterprises.</div><br/><div id="36581703" class="c"><input type="checkbox" id="c-36581703" checked=""/><div class="controls bullet"><span class="by">bigger_cheese</span><span>|</span><a href="#36571673">root</a><span>|</span><a href="#36572879">parent</a><span>|</span><a href="#36572173">next</a><span>|</span><label class="collapse" for="c-36581703">[-]</label><label class="expand" for="c-36581703">[1 more]</label></div><br/><div class="children"><div class="content">I can relate to this where I work we have similar issues the data has grown beyond what the original database schema was designed around. Ours is older than 10 years though - it is 27 years old (originally from 1996).<p>We originally had a (in my opinion) pretty nicely designed schema and set of tables to represent the data but over time as more data has been added additional tables have grown in a hodge-podge fashion. We now have a Frankenstein&#x27;s monster of a database. Similar to you there are all sorts of weird interdependencies across various tables.<p>An additional complication is We have a lot of legacy programs&#x2F;apps that Read&#x2F;write to the database so changing types, field widths etc. Is basically impossible because you would have to recompile legacy code &#x2F; Rewrite Messaging queues etc.<p>The modern solution to this problem seems to be something called &quot;data lake&quot; which ingests data from the source DB but also applies transformations onto it. I don&#x27;t really understand how it works something like a SQL view but also keeps the underlying data accessible as well. I don&#x27;t know all the details has a lot of traction for our IT people at the moment.</div><br/></div></div></div></div><div id="36572173" class="c"><input type="checkbox" id="c-36572173" checked=""/><div class="controls bullet"><span class="by">DeathArrow</span><span>|</span><a href="#36571673">parent</a><span>|</span><a href="#36572879">prev</a><span>|</span><a href="#36572293">next</a><span>|</span><label class="collapse" for="c-36572173">[-]</label><label class="expand" for="c-36572173">[2 more]</label></div><br/><div class="children"><div class="content">&gt;I am curious what HN thinks as major reasons for why everyone seems to have moved away from 1 big SQL database<p>For the places I worked:<p>1. We transitioned to microservices<p>2. Performance, 1 BIG database slows that<p>3. Ops&#x2F;maintenance is very hard in a huge DB<p>4. In a huge DB there can be a lot of junk no one uses, no one remembers why is there, but no one is certain whether that junk is still needed<p>5. We had different optimization strategies for reads and writes<p>6. Teams need to have ownership on databases&#x2F;data stores so we can move fast instead waiting for DBAs to reply to tickets.</div><br/><div id="36573868" class="c"><input type="checkbox" id="c-36573868" checked=""/><div class="controls bullet"><span class="by">lisasays</span><span>|</span><a href="#36571673">root</a><span>|</span><a href="#36572173">parent</a><span>|</span><a href="#36572293">next</a><span>|</span><label class="collapse" for="c-36573868">[-]</label><label class="expand" for="c-36573868">[1 more]</label></div><br/><div class="children"><div class="content"><i>4. In a huge DB there can be a lot of junk no one uses, no one remembers why is there, but no one is certain whether that junk is still needed</i><p>Of course no one knows how to even begin to come up with a way of addressing that problem.<p>So the only viable option is to keep on masking it. And keep propagating the junk data and zombie schemas ever forward.</div><br/></div></div></div></div><div id="36572293" class="c"><input type="checkbox" id="c-36572293" checked=""/><div class="controls bullet"><span class="by">0wis</span><span>|</span><a href="#36571673">parent</a><span>|</span><a href="#36572173">prev</a><span>|</span><a href="#36572027">next</a><span>|</span><label class="collapse" for="c-36572293">[-]</label><label class="expand" for="c-36572293">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ll second @viraptor and @hops answers : It is the same cause as the rise of microservices and DevOps adoption, easier politics. I worked for a big old company, and most of the problems were political and administrative. One big SQL database is quite efficient until the entity that owns it does not agree with the new CTO strategy and any another critical part of the business. Add an incident that shows  the low resilience of the model and it quickly becomes a political headache, while the technical solution still seems evident to everyone.</div><br/></div></div><div id="36572027" class="c"><input type="checkbox" id="c-36572027" checked=""/><div class="controls bullet"><span class="by">viraptor</span><span>|</span><a href="#36571673">parent</a><span>|</span><a href="#36572293">prev</a><span>|</span><a href="#36571784">next</a><span>|</span><label class="collapse" for="c-36572027">[-]</label><label class="expand" for="c-36572027">[1 more]</label></div><br/><div class="children"><div class="content">&gt; reasons for why everyone seems to have moved away from 1 big SQL database<p>I&#x27;m sure there are going to be other answers for the code side of things, but for ops:<p>Depends a lot on the size of the service, but in some cases: We got enough data that 1 big SQL store makes ops <i>hard</i>. (Took me 3 days to drop a table recently in a way that wouldn&#x27;t affect the users) And splitting data became easier than before with specialised backends. (A sharded 2nd layer cache of live data seems way simpler to achieve than say 2 decades ago)</div><br/></div></div><div id="36571784" class="c"><input type="checkbox" id="c-36571784" checked=""/><div class="controls bullet"><span class="by">robertlagrant</span><span>|</span><a href="#36571673">parent</a><span>|</span><a href="#36572027">prev</a><span>|</span><a href="#36571813">next</a><span>|</span><label class="collapse" for="c-36571784">[-]</label><label class="expand" for="c-36571784">[3 more]</label></div><br/><div class="children"><div class="content">For me it&#x27;s parallelisable delivery (or fragility, depending on how you look at it). If a team owns its own data store, it can make whatever changes it needs to and not have to worry about any other part of the software being broken by those changes.</div><br/><div id="36572163" class="c"><input type="checkbox" id="c-36572163" checked=""/><div class="controls bullet"><span class="by">hcarvalhoalves</span><span>|</span><a href="#36571673">root</a><span>|</span><a href="#36571784">parent</a><span>|</span><a href="#36571813">next</a><span>|</span><label class="collapse" for="c-36572163">[-]</label><label class="expand" for="c-36572163">[2 more]</label></div><br/><div class="children"><div class="content">The trade-off being having a separate team trying to integrate all the data back together with ETL.</div><br/><div id="36573084" class="c"><input type="checkbox" id="c-36573084" checked=""/><div class="controls bullet"><span class="by">robertlagrant</span><span>|</span><a href="#36571673">root</a><span>|</span><a href="#36572163">parent</a><span>|</span><a href="#36571813">next</a><span>|</span><label class="collapse" for="c-36573084">[-]</label><label class="expand" for="c-36573084">[1 more]</label></div><br/><div class="children"><div class="content">Well, if you need to integrate it. If you have some hideous dashboards you might need to, it&#x27;s true, but at that point it&#x27;s worth investing in a data person whose job it is to keep up with all the breaking data warehouse integrations. They&#x27;d have to anyway with any data approach.</div><br/></div></div></div></div></div></div><div id="36578217" class="c"><input type="checkbox" id="c-36578217" checked=""/><div class="controls bullet"><span class="by">ChicagoDave</span><span>|</span><a href="#36571673">parent</a><span>|</span><a href="#36571813">prev</a><span>|</span><a href="#36571923">next</a><span>|</span><label class="collapse" for="c-36578217">[-]</label><label class="expand" for="c-36578217">[1 more]</label></div><br/><div class="children"><div class="content">Because over time the one big relational database turns into a big ball of mud. Change becomes expensive and has a large blast radius.<p>Contextual business domains should be the foundation of any complex architecture. You reduce complexity and change blast radius and speed up agility and feature adoption.</div><br/></div></div><div id="36571923" class="c"><input type="checkbox" id="c-36571923" checked=""/><div class="controls bullet"><span class="by">hobs</span><span>|</span><a href="#36571673">parent</a><span>|</span><a href="#36578217">prev</a><span>|</span><a href="#36573139">next</a><span>|</span><label class="collapse" for="c-36571923">[-]</label><label class="expand" for="c-36571923">[1 more]</label></div><br/><div class="children"><div class="content">For the same reason they went with microservices - its easier to service the technical boundaries you control, and is a political solution rather than a technical one.<p>Getting something based a DBA in change control was hard, but shipping some IaC templates can be done in a sprint!</div><br/></div></div></div></div><div id="36573139" class="c"><input type="checkbox" id="c-36573139" checked=""/><div class="controls bullet"><span class="by">marcosdumay</span><span>|</span><a href="#36571673">prev</a><span>|</span><a href="#36573167">next</a><span>|</span><label class="collapse" for="c-36573139">[-]</label><label class="expand" for="c-36573139">[21 more]</label></div><br/><div class="children"><div class="content">The entire advice is context-dependent.<p>Games just happen to have a lot of operations that need column-based access; but that&#x27;s not true for all domains. When you go and blindly push the game best practices into other domain, you are just making everybody&#x27;s life hard and most systems worse.</div><br/><div id="36574625" class="c"><input type="checkbox" id="c-36574625" checked=""/><div class="controls bullet"><span class="by">flohofwoe</span><span>|</span><a href="#36573139">parent</a><span>|</span><a href="#36576846">next</a><span>|</span><label class="collapse" for="c-36574625">[-]</label><label class="expand" for="c-36574625">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Games just happen to have a lot of operations that need column-based access.<p>And that&#x27;s not even true for many code areas in typical games, only where there&#x27;s at least a few thousands &#x27;things&#x27; to process (e.g. particle systems or navigation&#x2F;collision systems).<p>DOD makes a lot of sense within specific subsystems, but not necessarily in high level gameplay code (outside specific genres at least).</div><br/><div id="36581405" class="c"><input type="checkbox" id="c-36581405" checked=""/><div class="controls bullet"><span class="by">lyu07282</span><span>|</span><a href="#36573139">root</a><span>|</span><a href="#36574625">parent</a><span>|</span><a href="#36576846">next</a><span>|</span><label class="collapse" for="c-36581405">[-]</label><label class="expand" for="c-36581405">[1 more]</label></div><br/><div class="children"><div class="content">You can see that in bevy, it feels like they are slowly reinventing a relational database and query language, every time they discover another limitation in their pure ECS architecture they add another macguffin to make it work.</div><br/></div></div></div></div><div id="36576846" class="c"><input type="checkbox" id="c-36576846" checked=""/><div class="controls bullet"><span class="by">10000truths</span><span>|</span><a href="#36573139">parent</a><span>|</span><a href="#36574625">prev</a><span>|</span><a href="#36578813">next</a><span>|</span><label class="collapse" for="c-36576846">[-]</label><label class="expand" for="c-36576846">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not just column-based access. Formatting your data into a struct of arrays exposes opportunites to pack your data more efficiently and greatly reduce your application&#x27;s memory usage. Boolean struct fields can become bitsets. Nullable struct fields can become sparse (or dense) maps. Pointer&#x2F;reference struct fields can become arrays of smaller-width integers that index into a pool. And so on. When everything runs on CPUs that frequently stall on memory accesses, the impact of these sorts of changes cannot be understated - the latency difference between L3 cache and RAM can be on the order of ~10x.</div><br/></div></div><div id="36578813" class="c"><input type="checkbox" id="c-36578813" checked=""/><div class="controls bullet"><span class="by">torginus</span><span>|</span><a href="#36573139">parent</a><span>|</span><a href="#36576846">prev</a><span>|</span><a href="#36574194">next</a><span>|</span><label class="collapse" for="c-36578813">[-]</label><label class="expand" for="c-36578813">[1 more]</label></div><br/><div class="children"><div class="content">I feel like this is increasingly the only way to write high-performance code.<p>With newer hardware, the only thing that&#x27;s expected to scale is logic density - SRAM (and cache sizes) have stopped scaling with the latest lithographies - and RAM bandwidth hasn&#x27;t really been scaling for quite a while (I&#x27;d think it&#x27;s even possible that per-core bandwidth has been <i>decreasing</i>) - memory access has been the bottleneck for a while.</div><br/></div></div><div id="36574194" class="c"><input type="checkbox" id="c-36574194" checked=""/><div class="controls bullet"><span class="by">GartzenDeHaes</span><span>|</span><a href="#36573139">parent</a><span>|</span><a href="#36578813">prev</a><span>|</span><a href="#36573256">next</a><span>|</span><label class="collapse" for="c-36574194">[-]</label><label class="expand" for="c-36574194">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s for high-performance computing with current CPU designs that are dependent on data locality for performance.<p>I agree that it&#x27;s a harmful design for business data. Programmers want to push their runtime data model into the database and they have no interest in the operational, maintenance, and performance problems this causes. When someone suggests this kind of thing, I&#x27;ll ask them &quot;how do we diagnose performance problems with this technology when there are 100,000 concurrent users and millions of data elements?&quot; The rows-and-columns people can answer this question.</div><br/><div id="36576764" class="c"><input type="checkbox" id="c-36576764" checked=""/><div class="controls bullet"><span class="by">feoren</span><span>|</span><a href="#36573139">root</a><span>|</span><a href="#36574194">parent</a><span>|</span><a href="#36573256">next</a><span>|</span><label class="collapse" for="c-36576764">[-]</label><label class="expand" for="c-36576764">[1 more]</label></div><br/><div class="children"><div class="content">&gt; When someone suggests this kind of thing, I&#x27;ll ask them &quot;how do we diagnose performance problems with this technology when there are 100,000 concurrent users and millions of data elements?&quot;<p>I don&#x27;t understand; the exact same performance diagnostics work in both cases. Why is this different? There&#x27;s nothing intrinsically less performant about this approach. You really think your checkerboard tables and long lists of columns with names like &quot;VALUE12&quot; and &quot;VALUE13&quot; and multiple different kinds of key&#x2F;value pairs you jammed in there for different clients -- you think <i>those</i> are better performance!?<p>&gt;  100,000 concurrent users<p>Do you <i>actually</i> have 100,000 concurrent users? <i>Really</i>? You don&#x27;t, do you? You just kinda hope you will eventually. And again: this approach is not worse for that.<p>&gt; millions of data elements<p>This is absolute peanuts for any modern database system. It&#x27;s weird that this is your extreme example.</div><br/></div></div></div></div><div id="36578820" class="c"><input type="checkbox" id="c-36578820" checked=""/><div class="controls bullet"><span class="by">_dain_</span><span>|</span><a href="#36573139">parent</a><span>|</span><a href="#36573256">prev</a><span>|</span><a href="#36576438">next</a><span>|</span><label class="collapse" for="c-36578820">[-]</label><label class="expand" for="c-36578820">[1 more]</label></div><br/><div class="children"><div class="content"><i>&gt;Games just happen to have a lot of operations that need column-based access; but that&#x27;s not true for all domains. </i><p>This was <i>not at all</i> obvious when ECS first came around. It took a lot of time to convince people away from the OOP way.</div><br/></div></div><div id="36576438" class="c"><input type="checkbox" id="c-36576438" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#36573139">parent</a><span>|</span><a href="#36578820">prev</a><span>|</span><a href="#36575066">next</a><span>|</span><label class="collapse" for="c-36576438">[-]</label><label class="expand" for="c-36576438">[1 more]</label></div><br/><div class="children"><div class="content">Databases are another common cause.</div><br/></div></div><div id="36575066" class="c"><input type="checkbox" id="c-36575066" checked=""/><div class="controls bullet"><span class="by">jackmott42</span><span>|</span><a href="#36573139">parent</a><span>|</span><a href="#36576438">prev</a><span>|</span><a href="#36575966">next</a><span>|</span><label class="collapse" for="c-36575066">[-]</label><label class="expand" for="c-36575066">[2 more]</label></div><br/><div class="children"><div class="content">The advice of keeping the data you access frequently contiguous in memory applies to everything on modern hardware.  If there is a program where performance is an issue at all, probably this will be one way to make sure performance is good.</div><br/><div id="36575468" class="c"><input type="checkbox" id="c-36575468" checked=""/><div class="controls bullet"><span class="by">marcosdumay</span><span>|</span><a href="#36573139">root</a><span>|</span><a href="#36575066">parent</a><span>|</span><a href="#36575966">next</a><span>|</span><label class="collapse" for="c-36575468">[-]</label><label class="expand" for="c-36575468">[1 more]</label></div><br/><div class="children"><div class="content">Well, if you want to generalize, it&#x27;s about keeping data with correlated accesses close to each other and aligned inside memory pages, and failing that, yes to keep it at least contiguous. It&#x27;s not exactly about access frequency, except that you want to optimize the things you access more.<p>Yes, that&#x27;s a generic advice for high performance applications that is at least generic enough to apply on anything that is close to a normal computer. You will still need further details if you are talking about things like HPC (ironically) or mainframes, but it&#x27;s general enough to say people should do it without qualifications.</div><br/></div></div></div></div><div id="36575966" class="c"><input type="checkbox" id="c-36575966" checked=""/><div class="controls bullet"><span class="by">forrestthewoods</span><span>|</span><a href="#36573139">parent</a><span>|</span><a href="#36575066">prev</a><span>|</span><a href="#36575872">next</a><span>|</span><label class="collapse" for="c-36575966">[-]</label><label class="expand" for="c-36575966">[2 more]</label></div><br/><div class="children"><div class="content">Hrmmm. Not sure this line of thinking makes sense.<p>Game data access patterns are quite brutal. OOP for games results in extremely inefficient cache use, lots of random access, and lots of pointer chasing.<p>ECS isn’t a “natural” fit for games. It’s quite difficult and ECS systems are still far from a solved problem.<p>The two most popular game engines, Unreal and Unity, are decisively non-ECS for almost everything they do.<p>In any case, I think the underlying principles of DOD apply to all programs. Specific solutions vary, as always.</div><br/><div id="36576443" class="c"><input type="checkbox" id="c-36576443" checked=""/><div class="controls bullet"><span class="by">marcosdumay</span><span>|</span><a href="#36573139">root</a><span>|</span><a href="#36575966">parent</a><span>|</span><a href="#36575872">next</a><span>|</span><label class="collapse" for="c-36576443">[-]</label><label class="expand" for="c-36576443">[1 more]</label></div><br/><div class="children"><div class="content">&gt; In any case, I think the underlying principles of DOD apply to all programs.<p>Yeah, I do agree with that.</div><br/></div></div></div></div><div id="36575872" class="c"><input type="checkbox" id="c-36575872" checked=""/><div class="controls bullet"><span class="by">feoren</span><span>|</span><a href="#36573139">parent</a><span>|</span><a href="#36575966">prev</a><span>|</span><a href="#36573167">next</a><span>|</span><label class="collapse" for="c-36575872">[-]</label><label class="expand" for="c-36575872">[7 more]</label></div><br/><div class="children"><div class="content">But it <i>is</i> true, much much more often than you probably realize. Just look at your tables and think about how repetitive they are. The reason you can&#x27;t come up with a lot of &quot;column-based&quot; (as you put it, which is still narrow-minded IMO) operations is because you&#x27;ve never looked for them before. Of course you haven&#x27;t: you&#x27;ve been stuck in the traditional mode where such things are basically impossible.<p>Do most of your tables have Name &#x2F; Description type fields? Here&#x27;s some &quot;column-based operations&quot;: Allow translation of everything in your database. Generate natural-sounding text in a report, inserting these names and descriptions (from multiple different tables, of course). Free-text search of all your important database concepts. Detect similar names to the one the user is wanting to add, to prevent duplication. Clean whitespace. That&#x27;s five off the top of my head.<p>Do most of your tables have Archived &#x2F; Status &#x2F; Soft-delete type fields? Allow a user to archive a record. Choose whether to include archived records in a query or not. Delete archived records after X days.<p>Do most of your tables have Comments fields? Allow multiple comments. Track who made a comment and when. Track responses to comments.<p>Do most of your tables track who last modified the record? Track <i>all</i> modifications. Show a list of recent modifications to any records.<p>The list goes on and on and on. You call these &quot;column-based operations&quot;, which again, is short-sighted. They&#x27;re more like &quot;concern-based operations&quot;. And it turns out <i>everything</i> is a cross-cutting concern. You&#x27;re shooting this idea down without nearly understanding it.</div><br/><div id="36578079" class="c"><input type="checkbox" id="c-36578079" checked=""/><div class="controls bullet"><span class="by">feoren</span><span>|</span><a href="#36573139">root</a><span>|</span><a href="#36575872">parent</a><span>|</span><a href="#36576555">next</a><span>|</span><label class="collapse" for="c-36578079">[-]</label><label class="expand" for="c-36578079">[1 more]</label></div><br/><div class="children"><div class="content">For those who disagree, please give an example of a domain that is devoid of important &quot;concern-based&quot; operations.</div><br/></div></div></div></div></div></div><div id="36573167" class="c"><input type="checkbox" id="c-36573167" checked=""/><div class="controls bullet"><span class="by">Acumen321</span><span>|</span><a href="#36573139">prev</a><span>|</span><a href="#36573533">next</a><span>|</span><label class="collapse" for="c-36573167">[-]</label><label class="expand" for="c-36573167">[3 more]</label></div><br/><div class="children"><div class="content">Mike Acton&#x27;s talk &quot;Data-Oriented Design and C++&quot; from CppCon 2014 is the best programming talk ever given in my opinion. A must watch:<p><a href="https:&#x2F;&#x2F;youtu.be&#x2F;rX0ItVEVjHc" rel="nofollow noreferrer">https:&#x2F;&#x2F;youtu.be&#x2F;rX0ItVEVjHc</a></div><br/><div id="36581738" class="c"><input type="checkbox" id="c-36581738" checked=""/><div class="controls bullet"><span class="by">jrvarela56</span><span>|</span><a href="#36573167">parent</a><span>|</span><a href="#36576295">next</a><span>|</span><label class="collapse" for="c-36581738">[-]</label><label class="expand" for="c-36581738">[1 more]</label></div><br/><div class="children"><div class="content">Beat me to it, was about to post this talk.<p>For those reading, check the video out if you want to get a gist how to world-class performance is implemented.<p>Most of my career has been writing web apps and this talk showed me &#x27;why would someone use C?&#x27;</div><br/></div></div><div id="36576295" class="c"><input type="checkbox" id="c-36576295" checked=""/><div class="controls bullet"><span class="by">wrapperup</span><span>|</span><a href="#36573167">parent</a><span>|</span><a href="#36581738">prev</a><span>|</span><a href="#36573533">next</a><span>|</span><label class="collapse" for="c-36576295">[-]</label><label class="expand" for="c-36576295">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s fantastic, and also my favorite. And for those who might not know, he was the one who really mainstreamed Data-oriented design and ECS architecture in my eyes.<p>He previously was also leading the charge on Unity DOTS, though unfortunately it seems Unity is having a tailspin at the moment. The work on DOTS is solid, if incomplete.</div><br/></div></div></div></div><div id="36573533" class="c"><input type="checkbox" id="c-36573533" checked=""/><div class="controls bullet"><span class="by">cempaka</span><span>|</span><a href="#36573167">prev</a><span>|</span><a href="#36573469">next</a><span>|</span><label class="collapse" for="c-36573533">[-]</label><label class="expand" for="c-36573533">[2 more]</label></div><br/><div class="children"><div class="content">Andrew Kelley gave an informative and entertaining talk on how DOD had inspired a lot of his work on the Zig compiler: <a href="https:&#x2F;&#x2F;vimeo.com&#x2F;649009599" rel="nofollow noreferrer">https:&#x2F;&#x2F;vimeo.com&#x2F;649009599</a></div><br/><div id="36581652" class="c"><input type="checkbox" id="c-36581652" checked=""/><div class="controls bullet"><span class="by">GuestHNUser</span><span>|</span><a href="#36573533">parent</a><span>|</span><a href="#36573469">next</a><span>|</span><label class="collapse" for="c-36581652">[-]</label><label class="expand" for="c-36581652">[1 more]</label></div><br/><div class="children"><div class="content">Thanks for sharing this! Hands down the most practical talk I have seen about DOD. That made so many things click for me.</div><br/></div></div></div></div><div id="36573469" class="c"><input type="checkbox" id="c-36573469" checked=""/><div class="controls bullet"><span class="by">debanjan16</span><span>|</span><a href="#36573533">prev</a><span>|</span><a href="#36571663">next</a><span>|</span><label class="collapse" for="c-36573469">[-]</label><label class="expand" for="c-36573469">[5 more]</label></div><br/><div class="children"><div class="content">Even beginners can learn to program in a data oriented way from the beginning.<p>Two books that teach this style of programming to beginners are:<p>1. <i>How to Design Programs</i> - <a href="https:&#x2F;&#x2F;htdp.org&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;htdp.org&#x2F;</a><p>2. <i>A Data-Centric Introduction to Computing</i> - <a href="https:&#x2F;&#x2F;dcic-world.org&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;dcic-world.org&#x2F;</a></div><br/><div id="36574397" class="c"><input type="checkbox" id="c-36574397" checked=""/><div class="controls bullet"><span class="by">morelisp</span><span>|</span><a href="#36573469">parent</a><span>|</span><a href="#36571663">next</a><span>|</span><label class="collapse" for="c-36574397">[-]</label><label class="expand" for="c-36574397">[4 more]</label></div><br/><div class="children"><div class="content">Those are not this.</div><br/><div id="36575778" class="c"><input type="checkbox" id="c-36575778" checked=""/><div class="controls bullet"><span class="by">debanjan16</span><span>|</span><a href="#36573469">root</a><span>|</span><a href="#36574397">parent</a><span>|</span><a href="#36571663">next</a><span>|</span><label class="collapse" for="c-36575778">[-]</label><label class="expand" for="c-36575778">[3 more]</label></div><br/><div class="children"><div class="content">Can you elaborate a bit more on the reason?</div><br/><div id="36581767" class="c"><input type="checkbox" id="c-36581767" checked=""/><div class="controls bullet"><span class="by">jrvarela56</span><span>|</span><a href="#36573469">root</a><span>|</span><a href="#36575778">parent</a><span>|</span><a href="#36577098">next</a><span>|</span><label class="collapse" for="c-36581767">[-]</label><label class="expand" for="c-36581767">[1 more]</label></div><br/><div class="children"><div class="content">I think this may be more akin to what you original comment meant: <a href="https:&#x2F;&#x2F;blog.klipse.tech&#x2F;dop&#x2F;2022&#x2F;06&#x2F;22&#x2F;principles-of-dop.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;blog.klipse.tech&#x2F;dop&#x2F;2022&#x2F;06&#x2F;22&#x2F;principles-of-dop.ht...</a><p>I got confused by the terms (Data Oriented Design and Data Oriented Programming) and watched Mike Acton&#x27;s talk by mistake <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=rX0ItVEVjHc">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=rX0ItVEVjHc</a> (and what a lucky mistake)</div><br/></div></div><div id="36577098" class="c"><input type="checkbox" id="c-36577098" checked=""/><div class="controls bullet"><span class="by">morelisp</span><span>|</span><a href="#36573469">root</a><span>|</span><a href="#36575778">parent</a><span>|</span><a href="#36581767">prev</a><span>|</span><a href="#36571663">next</a><span>|</span><label class="collapse" for="c-36577098">[-]</label><label class="expand" for="c-36577098">[1 more]</label></div><br/><div class="children"><div class="content">The books you presented are, roughly speaking, introductions to programming with a focus on data science, functional programming, and common structures&#x2F;ideas used in those which are, in other texts, not usually considered introductory material. &quot;Data&quot; in this sense means, like, collected facts about the world and how to model them.<p>Data-oriented design is a particular way of designing your programs where you focus on efficiently laying out your &quot;data&quot; - in a different sense, meaning &quot;whatever it is I&#x27;ve got in storage&quot; - within that storage - to compute with it as fast as possible.<p>The industry-standard tools used for the first thing are often using techniques developed in the second of the second thing, but that&#x27;s not relevant for the pedagogical framing. The tools they are teaching (Scheme and Pyret) actually make it very hard to play with low-level data layout details. And the emphasis in these texts on &quot;real [as in, world] data&quot; is in direct contradiction to the DOD axiom that &quot;data is not the problem domain... The data-oriented design approach doesn&#x27;t build the real-world problem into the code.&quot;<p>A rule of thumb: Is anyone talking about GPUs, SIMD, or CPU cache sizes? If not, you&#x27;re looking at something about data modeling or data science, not data orientation.<p>And this, sorry, is all super fucking obvious if you actually read the intro to all three things.</div><br/></div></div></div></div></div></div></div></div><div id="36571663" class="c"><input type="checkbox" id="c-36571663" checked=""/><div class="controls bullet"><span class="by">gjadi</span><span>|</span><a href="#36573469">prev</a><span>|</span><a href="#36572667">next</a><span>|</span><label class="collapse" for="c-36571663">[-]</label><label class="expand" for="c-36571663">[3 more]</label></div><br/><div class="children"><div class="content">Found an online review of the book: <a href="https:&#x2F;&#x2F;gist.github.com&#x2F;seece&#x2F;25ed1b2108cf5782718b026382f2c52c" rel="nofollow noreferrer">https:&#x2F;&#x2F;gist.github.com&#x2F;seece&#x2F;25ed1b2108cf5782718b026382f2c5...</a></div><br/><div id="36573226" class="c"><input type="checkbox" id="c-36573226" checked=""/><div class="controls bullet"><span class="by">victor106</span><span>|</span><a href="#36571663">parent</a><span>|</span><a href="#36572667">next</a><span>|</span><label class="collapse" for="c-36573226">[-]</label><label class="expand" for="c-36573226">[2 more]</label></div><br/><div class="children"><div class="content">Thanks for the link.<p>Found this interesting and against common advice.<p>&quot;The bane of many projects, and the cause of their lateness, has been the insistence on not doing optimisation prematurely. The reason optimisation at late stages is so difficult is that many pieces of software are built up with instances of objects everywhere, even when not needed.&quot;<p>There are definitely applications where performance is of primary concern (maybe only a few) and others where they are not. In apps where it is, this gives me thought that maybe premature optimization is okay? Am I reading that right?<p>There&#x27;s also this called Data-Oriented Programming <a href="https:&#x2F;&#x2F;www.manning.com&#x2F;books&#x2F;data-oriented-programming" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.manning.com&#x2F;books&#x2F;data-oriented-programming</a>.<p>Are both these concepts the same?</div><br/><div id="36579267" class="c"><input type="checkbox" id="c-36579267" checked=""/><div class="controls bullet"><span class="by">crabmusket</span><span>|</span><a href="#36571663">root</a><span>|</span><a href="#36573226">parent</a><span>|</span><a href="#36572667">next</a><span>|</span><label class="collapse" for="c-36579267">[-]</label><label class="expand" for="c-36579267">[1 more]</label></div><br/><div class="children"><div class="content">No, DOP is basically just functional programming. There are some overlaps (e.g. separate code from data) but they&#x27;re not related.</div><br/></div></div></div></div></div></div><div id="36572667" class="c"><input type="checkbox" id="c-36572667" checked=""/><div class="controls bullet"><span class="by">oaiey</span><span>|</span><a href="#36571663">prev</a><span>|</span><a href="#36572851">next</a><span>|</span><label class="collapse" for="c-36572667">[-]</label><label class="expand" for="c-36572667">[2 more]</label></div><br/><div class="children"><div class="content">Data Oriented Design is more beginner friendly. Because it does not deal with people and business but only with purity of data modelling.<p>When I was young, my first step in a new project was painting the Entity Relationship Model. That gave me the foundation for everything else.<p>Nowadays, I try to understand the problems and the domain, work on capabilities and how to group&#x2F;box them before I start doing data models.</div><br/><div id="36572716" class="c"><input type="checkbox" id="c-36572716" checked=""/><div class="controls bullet"><span class="by">chrisgd</span><span>|</span><a href="#36572667">parent</a><span>|</span><a href="#36572851">next</a><span>|</span><label class="collapse" for="c-36572716">[-]</label><label class="expand" for="c-36572716">[1 more]</label></div><br/><div class="children"><div class="content">I like the content of your comment. Everyone who has experience recognizes that our love of data and programming often gets sideswiped by business needs. I think though this article tries to say that if we focus on gathering data needs from the beginning, it might make the business needs conversation moot</div><br/></div></div></div></div><div id="36572851" class="c"><input type="checkbox" id="c-36572851" checked=""/><div class="controls bullet"><span class="by">BonitaPersona</span><span>|</span><a href="#36572667">prev</a><span>|</span><a href="#36579897">next</a><span>|</span><label class="collapse" for="c-36572851">[-]</label><label class="expand" for="c-36572851">[3 more]</label></div><br/><div class="children"><div class="content">I love this book and have been very influenced by it.<p>However, it should definitely be called: Data-Oriented Design FOR GAME DEVELOPMENT.</div><br/><div id="36579958" class="c"><input type="checkbox" id="c-36579958" checked=""/><div class="controls bullet"><span class="by">loup-vaillant</span><span>|</span><a href="#36572851">parent</a><span>|</span><a href="#36579897">next</a><span>|</span><label class="collapse" for="c-36579958">[-]</label><label class="expand" for="c-36579958">[2 more]</label></div><br/><div class="children"><div class="content">Are you suggesting the advice in there isn&#x27;t applicable in other domains? Or just that it uses games as an example?</div><br/><div id="36583178" class="c"><input type="checkbox" id="c-36583178" checked=""/><div class="controls bullet"><span class="by">BonitaPersona</span><span>|</span><a href="#36572851">root</a><span>|</span><a href="#36579958">parent</a><span>|</span><a href="#36579897">next</a><span>|</span><label class="collapse" for="c-36583178">[-]</label><label class="expand" for="c-36583178">[1 more]</label></div><br/><div class="children"><div class="content">The second, more or less.<p>The advice is certainly applicable in other domains, however the explanations and examples used in the book are heavily focused on software that will be executing repetitive code in a frequency-controlled loop, that loops over arrays of arrays. This also applies to simulation software.<p>There are some key characteristics on this kind of software that may or may not be present in other domains. Once deeply inside game development, these characteristics are like the oxygen you breath, and become intrinsically ingrained in how you think. This is the case with this book and author: I have the impression he thought gamedev-focused examples were general and not specific.<p>As I said, I was really positively influenced by this book, and I tend to go back to it from time to time. Always worth it. Just be aware of what it is focused on.</div><br/></div></div></div></div></div></div><div id="36579897" class="c"><input type="checkbox" id="c-36579897" checked=""/><div class="controls bullet"><span class="by">kaycebasques</span><span>|</span><a href="#36572851">prev</a><span>|</span><a href="#36571634">next</a><span>|</span><label class="collapse" for="c-36579897">[-]</label><label class="expand" for="c-36579897">[2 more]</label></div><br/><div class="children"><div class="content">Pretty great intro paragraph. The eloquent writing and interesting ideas motivate me to keep reading:<p>&gt; Data is all we have. Data is what we need to transform in order to create a user experience. Data is what we load when we open a document. Data is the graphics on the screen, the pulses from the buttons on your gamepad, the cause of your speakers producing waves in the air, the method by which you level up and how the bad guy knew where you were so as to shoot at you. Data is how long the dynamite took to explode and how many rings you dropped when you fell on the spikes. It is the current position and velocity of every particle in the beautiful scene that ended the game which was loaded off the disc and into your life via transformations by machinery driven by decoded instructions themselves ordered by assemblers instructed by compilers fed with source-code.</div><br/><div id="36583298" class="c"><input type="checkbox" id="c-36583298" checked=""/><div class="controls bullet"><span class="by">crabmusket</span><span>|</span><a href="#36579897">parent</a><span>|</span><a href="#36571634">next</a><span>|</span><label class="collapse" for="c-36583298">[-]</label><label class="expand" for="c-36583298">[1 more]</label></div><br/><div class="children"><div class="content">I see these ideas in a lot of data-oriented-design literature and it always struck me as needlessly reductive. Maybe it&#x27;s useful to set the scene and provide a &quot;cold shower&quot; to get you out of an OOP-abstraction state of mind. But aside from that it seems about as useful as an engineer saying &quot;look around! everything is made of atoms! engineering is fundamentally about moving atoms!&quot; Which is not wrong, just not really going to help actually do any engineering.</div><br/></div></div></div></div><div id="36571634" class="c"><input type="checkbox" id="c-36571634" checked=""/><div class="controls bullet"><span class="by">dosshell</span><span>|</span><a href="#36579897">prev</a><span>|</span><a href="#36571656">next</a><span>|</span><label class="collapse" for="c-36571634">[-]</label><label class="expand" for="c-36571634">[1 more]</label></div><br/><div class="children"><div class="content">One key concept when I use DoD is to not abstract away the data. Less is more.<p>But when quickly reading the intro text, I found it doing the opposite, it talks too much and abstracts away the key concepts. Only me who found it a bit ironic of not drinking the wine?</div><br/></div></div><div id="36571656" class="c"><input type="checkbox" id="c-36571656" checked=""/><div class="controls bullet"><span class="by">Ciantic</span><span>|</span><a href="#36571634">prev</a><span>|</span><a href="#36572255">next</a><span>|</span><label class="collapse" for="c-36571656">[-]</label><label class="expand" for="c-36571656">[5 more]</label></div><br/><div class="children"><div class="content">Everytime I hear about Data-Driven&#x2F;Oriented Design I remember a paper from OOP course I had to read in University, it used Data-Driven Design as an example how to not to do things.<p>The paper in question is this from 1989: <a href="https:&#x2F;&#x2F;dl.acm.org&#x2F;doi&#x2F;pdf&#x2F;10.1145&#x2F;74877.74885" rel="nofollow noreferrer">https:&#x2F;&#x2F;dl.acm.org&#x2F;doi&#x2F;pdf&#x2F;10.1145&#x2F;74877.74885</a><p>It highlights that:<p>&quot;Even though the goal of data-driven design is to encapsulate data and algorithms, it inherently violates that encapsulation by making the structure of an object part of the definition of the object. This in turn leads to the definition of operations that reflect that structure (because they were designed with the structure in mind). Attempts to change the structure of an object transparently are destined to fail because other classes rely on that structure. This is the antithesis of encapsulation.&quot;<p>Then goes to show that Responsibility-Driven Design has better approach.<p>What we mean with Data-Driven Design have come a long way though, and isn&#x27;t comparable to those days.<p>I find it a bit amusing that Data-Driven Design used to be an insult of sorts, like you didn&#x27;t know how to do things OOP the right way.</div><br/><div id="36571683" class="c"><input type="checkbox" id="c-36571683" checked=""/><div class="controls bullet"><span class="by">dosshell</span><span>|</span><a href="#36571656">parent</a><span>|</span><a href="#36575611">next</a><span>|</span><label class="collapse" for="c-36571683">[-]</label><label class="expand" for="c-36571683">[3 more]</label></div><br/><div class="children"><div class="content">You do realize that DoD has nothing to do with data-driven, right?<p>Data oriented design is about structure the data in regard of how it is processed and the hardware. This is opposite of object oriented design which models the data around your mental model.<p>For example in DoD you could design a map with keys in one array together and one array of values. This would make it much faster to iterate over keys while searching because of cache memory.<p>While in object oriented you would store an array of pairs.<p>Both approaches can use data-driven.<p>Edit: would -&gt; could</div><br/><div id="36572043" class="c"><input type="checkbox" id="c-36572043" checked=""/><div class="controls bullet"><span class="by">drainyard</span><span>|</span><a href="#36571656">root</a><span>|</span><a href="#36571683">parent</a><span>|</span><a href="#36571743">next</a><span>|</span><label class="collapse" for="c-36572043">[-]</label><label class="expand" for="c-36572043">[1 more]</label></div><br/><div class="children"><div class="content">While I agree with your point, the map example is not entirely well represented in your comment.
The idea is not to just store keys and values in separate arrays, the idea is to look at your use case and model your data after the transformation you need.
So if you have a case where storing keys and values as pairs because of your access pattern, then do that, if you have a case where you do a lot of searches through keys, then store them in separate arrays.<p>The point of DoD is to look at the data you have and the data you need it transformed into and then structure your data after.</div><br/></div></div><div id="36571743" class="c"><input type="checkbox" id="c-36571743" checked=""/><div class="controls bullet"><span class="by">morelisp</span><span>|</span><a href="#36571656">root</a><span>|</span><a href="#36571683">parent</a><span>|</span><a href="#36572043">prev</a><span>|</span><a href="#36575611">next</a><span>|</span><label class="collapse" for="c-36571743">[-]</label><label class="expand" for="c-36571743">[1 more]</label></div><br/><div class="children"><div class="content">There are also multiple definitions of &quot;data-driven&quot; floating around depending on qualifier&#x2F;context. An OLAP RDBMS, for example, will certainly be written in a data-oriented way, and also have almost fully data-driven behavior, but will certainly not have data-driven (in the sense of that paper) design.</div><br/></div></div></div></div><div id="36575611" class="c"><input type="checkbox" id="c-36575611" checked=""/><div class="controls bullet"><span class="by">dgb23</span><span>|</span><a href="#36571656">parent</a><span>|</span><a href="#36571683">prev</a><span>|</span><a href="#36572255">next</a><span>|</span><label class="collapse" for="c-36575611">[-]</label><label class="expand" for="c-36575611">[1 more]</label></div><br/><div class="children"><div class="content">The example given as &quot;data driven design&quot; in this paper neither resembles modern data driven programming nor data oriented design.<p>I don&#x27;t quite understand why the authors thought of this as a good example of &quot;data driven design&quot;.<p>I know that functions in a data driven program tend to be very generic so the conclusion you cite is very much a mismatch from my experience.</div><br/></div></div></div></div><div id="36572255" class="c"><input type="checkbox" id="c-36572255" checked=""/><div class="controls bullet"><span class="by">camjw</span><span>|</span><a href="#36571656">prev</a><span>|</span><a href="#36573057">next</a><span>|</span><label class="collapse" for="c-36572255">[-]</label><label class="expand" for="c-36572255">[1 more]</label></div><br/><div class="children"><div class="content">Best SWE book I&#x27;ve ever read and I don&#x27;t even work on something video game adjacent any more</div><br/></div></div><div id="36573057" class="c"><input type="checkbox" id="c-36573057" checked=""/><div class="controls bullet"><span class="by">deneas</span><span>|</span><a href="#36572255">prev</a><span>|</span><a href="#36572948">next</a><span>|</span><label class="collapse" for="c-36573057">[-]</label><label class="expand" for="c-36573057">[1 more]</label></div><br/><div class="children"><div class="content">I like Data-Oriented Design, but beware of one thing: You organise your data like a database? You&#x27;ll eventually be writing a database management system, unless you can use a framework like one of the many Entity-Component-System ones.</div><br/></div></div><div id="36572948" class="c"><input type="checkbox" id="c-36572948" checked=""/><div class="controls bullet"><span class="by">synergy20</span><span>|</span><a href="#36573057">prev</a><span>|</span><a href="#36571350">next</a><span>|</span><label class="collapse" for="c-36572948">[-]</label><label class="expand" for="c-36572948">[1 more]</label></div><br/><div class="children"><div class="content">How useful and practical for DoD in ML and AI field to do parallel (matrix) computing at scale? where performance is crucial as well, but not as crucial as gaming(milliseconds matter). DoD is a new paradigm for me.</div><br/></div></div><div id="36571350" class="c"><input type="checkbox" id="c-36571350" checked=""/><div class="controls bullet"><span class="by">eska</span><span>|</span><a href="#36572948">prev</a><span>|</span><a href="#36572516">next</a><span>|</span><label class="collapse" for="c-36571350">[-]</label><label class="expand" for="c-36571350">[2 more]</label></div><br/><div class="children"><div class="content">Looked at it for 10 seconds and immediately found random 0s at the end of the document or unreplaced text like “Noel Llopis in his September 2009 article[#!NoelDOD!#]”</div><br/><div id="36571490" class="c"><input type="checkbox" id="c-36571490" checked=""/><div class="controls bullet"><span class="by">jerrygenser</span><span>|</span><a href="#36571350">parent</a><span>|</span><a href="#36572516">next</a><span>|</span><label class="collapse" for="c-36571490">[-]</label><label class="expand" for="c-36571490">[1 more]</label></div><br/><div class="children"><div class="content">The intro describes that it&#x27;s a free version of a book that contains most of the content except for a few sections.<p>The book was converted using an automated format from it&#x27;s native design into html so a large portion could be made available for free and this automated conversion process might have some minor issues -- like the one you described.</div><br/></div></div></div></div><div id="36572516" class="c"><input type="checkbox" id="c-36572516" checked=""/><div class="controls bullet"><span class="by">htk</span><span>|</span><a href="#36571350">prev</a><span>|</span><a href="#36575193">next</a><span>|</span><label class="collapse" for="c-36572516">[-]</label><label class="expand" for="c-36572516">[3 more]</label></div><br/><div class="children"><div class="content">Did anyone here by any chance create an epub out of this?<p>If not, any recommendations on utilities to convert several linked html files into a single epub?</div><br/><div id="36573006" class="c"><input type="checkbox" id="c-36573006" checked=""/><div class="controls bullet"><span class="by">asimpletune</span><span>|</span><a href="#36572516">parent</a><span>|</span><a href="#36575193">next</a><span>|</span><label class="collapse" for="c-36573006">[-]</label><label class="expand" for="c-36573006">[2 more]</label></div><br/><div class="children"><div class="content">I think standardebook&#x27;s has a command line utility that they use for producing their ebooks, which you might be able to use to produce an ebook from a bunch of html files. Ultimately an epub is a zip of html anyways, I think.</div><br/><div id="36575092" class="c"><input type="checkbox" id="c-36575092" checked=""/><div class="controls bullet"><span class="by">htk</span><span>|</span><a href="#36572516">root</a><span>|</span><a href="#36573006">parent</a><span>|</span><a href="#36575193">next</a><span>|</span><label class="collapse" for="c-36575092">[-]</label><label class="expand" for="c-36575092">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ll give this a try, thank you.</div><br/></div></div></div></div></div></div><div id="36575193" class="c"><input type="checkbox" id="c-36575193" checked=""/><div class="controls bullet"><span class="by">dkarl</span><span>|</span><a href="#36572516">prev</a><span>|</span><a href="#36573183">next</a><span>|</span><label class="collapse" for="c-36575193">[-]</label><label class="expand" for="c-36575193">[3 more]</label></div><br/><div class="children"><div class="content">&gt; [Abstraction heavy paradigms] structure the code around the description of the problem domain<p>My experience of Domain-Driven Design has been that it is extremely effective for driving conversations about the domain throughout the product life-cycle, but it produces frustrating codebases that are poorly attuned to the world outside the running process. Domain-Driven Design codebases want to be self-contained universes and treat external systems as details. OO design paradigms in general seem to have little respect for messages exchanged with external systems.<p>This wasn&#x27;t true back when JavaBeans and object databases other distributed object systems were expected to take over the world, but the failure of those technologies shrank the OO world from distributed systems to isolated programs. These days, the messages exchanged with external systems are just data, without behavior. The marriage of data and behavior can only exist inside a single process. So object-oriented design turned inward and concentrated on the creation of rich inner worlds.<p>I think this is backwards, or at least incomplete. As Rich Hickey says, effective programs need to be <i>situated in the real world.</i> They are not ethereal abstract models. They have concrete functions, inputs and outputs. Having rich internal abstractions that mimic some aspects of reality is a means to an end, entirely subordinate to the purpose of executing interactions with other computing systems. Data-driven design embraces this reality. By treating data as essential, and behavior as something to be added when it is needed, it allows inputs and outputs to be first-class citizens.<p>&gt; The data-oriented design approach doesn&#x27;t build the real-world problem into the code. This could be seen as a failing of the data-oriented approach by veteran object-oriented developers, as examples of the success of object-oriented design come from being able to bring the human concepts to the machine<p>I think this perfectly sums up the confusion that OO modeling creates. You use code to write programs, or services, or cloud functions, things like that. The real-world problem that a program, service, or cloud function solves is interacting in a certain way with other programs, services, cloud functions.<p>The real-world problems that OO modeling paradigms want you to focus on are the domain problems. This is vitally important for design products, systems of programs that solve real human problems. If you are designing a system for managing medical records in a hospital, you need to model doctors, nurses, patients, labs, radiology images, patient stays, all those real-world things. However, when you are designing a piece of software to do one thing within that medical records system, the &quot;real-world problem&quot; your code is solving is limited to its role within the larger system.<p>Data-oriented design is a natural mental fit for writing programs or services that play a limited part in larger systems, which is always what you are doing when you are writing code. Object-oriented design wants to take on the complexity of the whole real world, which is the right perspective for product design and architecture, not for writing code.</div><br/><div id="36576867" class="c"><input type="checkbox" id="c-36576867" checked=""/><div class="controls bullet"><span class="by">rapnie</span><span>|</span><a href="#36575193">parent</a><span>|</span><a href="#36573183">next</a><span>|</span><label class="collapse" for="c-36576867">[-]</label><label class="expand" for="c-36576867">[2 more]</label></div><br/><div class="children"><div class="content">&gt; My experience of Domain-Driven Design has been that it is extremely effective for driving conversations about the domain throughout the product life-cycle, but it produces frustrating codebases that are poorly attuned to the world outside the running process.<p>The DDD blue book by Eric Evans consists of two parts: Strategic Design and Tactical Patters. Is it accurate to summarize your comment as that the strategic design works very well, but that most of the information out there leads one to then learn about the tactical patterns in a particular OOP contexts, which isn&#x27;t a universal approach, and in many cases shouldn&#x27;t be the way to elaborate findings from Strategic Design?<p>Note that searching the web for &quot;DDD&quot; yields mostly OOP-related tactical patterns guidance, and this is why I think many people are so sceptical about DDD. It is the strategic parts where most of the (low-hanging fruit) value is.<p>Other non-OOP &#x27;tactical&#x27; guidance, such as functional &#x2F; functional-reactive &#x2F; actor-driven, etc. DDD is harder to come by.</div><br/><div id="36577795" class="c"><input type="checkbox" id="c-36577795" checked=""/><div class="controls bullet"><span class="by">dkarl</span><span>|</span><a href="#36575193">root</a><span>|</span><a href="#36576867">parent</a><span>|</span><a href="#36573183">next</a><span>|</span><label class="collapse" for="c-36577795">[-]</label><label class="expand" for="c-36577795">[1 more]</label></div><br/><div class="children"><div class="content">In my copy of the blue book, &quot;Strategic Design&quot; is Part IV, and there is no &quot;Tactical Patterns&quot; part or chapter. To be honest, I&#x27;ve only quickly read through Part IV, cherry-picking a couple of concepts, because it concentrates on techniques for dealing with very large domain models and&#x2F;or very large organizations.<p>I think the good and bad are interleaved together throughout the book. Part I Chapter 2, &quot;Communication and the Use of Language,&quot; is the one chapter I wish everybody I work with would read and digest. I think establishing a consistent language about the domain that is shared across functional groups is critical, so the domain terminology used in source code and comments is consistent with the terminology engineers use when talking with product and customer support. Part I Chapter 3 contains the clearest statement of (what I think is) the core error: &quot;Tightly relating the code to an underlying model [which context makes clear is the domain model] gives the code meaning and makes the model relevant.&quot; The rest of the book is like that for me, alternating between vigorously nodding my head and yelling &quot;WHY WOULD YOU TELL PEOPLE THAT,&quot; sometimes within the same chapter.<p>I suspect overall there&#x27;s a communication issue with the book, where he focuses entirely on the themes of DDD and only occasionally gives lip service to other aspects of design. For example, when he says that module names and structures should reflect domain concepts, I think, &quot;Yeah, that&#x27;s really nice to the extent you can accomplish that, but you also want your module names and structures to reflect the logical structure of your program, so somebody can look at it and see how it works.&quot; You have these two aspects that should ideally both be legible in the code, but the DDD book doesn&#x27;t show much respect for competing design priorities. In fact, it often warns against the dangers of being led astray by other design perspectives, such as architectural ones. Like so many other OO methodologies, the overwhelming thrust of the book is that if you attend to what it&#x27;s teaching you, everything else will take care of itself.<p>A priest once told me, a good priest will tell you when you need a lawyer, a good lawyer will tell you when you need a therapist, a good therapist will tell you when you need a doctor, and a good doctor will tell you when you need a priest. Be careful with an expert who always tells you that their expert perspective is what you need. The DDD book is definitely that kind of expert you have to be careful with.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>