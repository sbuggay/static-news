<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1685005259881" as="style"/><link rel="stylesheet" href="styles.css?v=1685005259881"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/PuellaeMagicae/unix-in-lisp">Show HN: Mount Unix system into Common Lisp image</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>kscarlet</span> | <span>14 comments</span></div><br/><div><div id="36068381" class="c"><input type="checkbox" id="c-36068381" checked=""/><div class="controls bullet"><span class="by">neilv</span><span>|</span><a href="#36065742">next</a><span>|</span><label class="collapse" for="c-36068381">[-]</label><label class="expand" for="c-36068381">[1 more]</label></div><br/><div class="children"><div class="content">Related: <a href="https:&#x2F;&#x2F;scsh.net&#x2F;about&#x2F;what.html" rel="nofollow">https:&#x2F;&#x2F;scsh.net&#x2F;about&#x2F;what.html</a></div><br/></div></div><div id="36065742" class="c"><input type="checkbox" id="c-36065742" checked=""/><div class="controls bullet"><span class="by">vindarel</span><span>|</span><a href="#36068381">prev</a><span>|</span><a href="#36066149">next</a><span>|</span><label class="collapse" for="c-36065742">[-]</label><label class="expand" for="c-36065742">[2 more]</label></div><br/><div class="children"><div class="content">Wow, that&#x27;s crazy O_o<p>Related:<p>- Lish allows to mix&amp;match shell and Lisp code, with regular syntax. <a href="https:&#x2F;&#x2F;github.com&#x2F;nibbula&#x2F;lish&#x2F;">https:&#x2F;&#x2F;github.com&#x2F;nibbula&#x2F;lish&#x2F;</a><p><pre><code>    $ echo ,*package*
    #&lt;PACKAGE &quot;LISH-USER&quot;&gt;
    $ (defun hello (name) (format t &quot;hello ~a!!~&amp;&quot; name))
    $ (hello &quot;me&quot;)
    hello me!!
    NIL
    $ (hello &quot;me&quot;) | wc -w
    =&gt; 2 
    </code></pre>
It is usable. Interactive commands like sudo and htop work, some like less and fzf don&#x27;t. So it ships a pager, `view`. It has a directory mode, a Lisp REPL with a debugger, completion…. It is not done, the author keeps hacking on it. Hackers invited to have a look.<p>- SHCL is a posix-like shell written in CL. <a href="https:&#x2F;&#x2F;github.com&#x2F;bradleyjensen&#x2F;shcl">https:&#x2F;&#x2F;github.com&#x2F;bradleyjensen&#x2F;shcl</a>
 (it doesn&#x27;t have completion. Not active.)<p><a href="https:&#x2F;&#x2F;github.com&#x2F;CodyReichert&#x2F;awesome-cl#shells-shells-interfaces">https:&#x2F;&#x2F;github.com&#x2F;CodyReichert&#x2F;awesome-cl#shells-shells-int...</a></div><br/><div id="36066335" class="c"><input type="checkbox" id="c-36066335" checked=""/><div class="controls bullet"><span class="by">kscarlet</span><span>|</span><a href="#36065742">parent</a><span>|</span><a href="#36066149">next</a><span>|</span><label class="collapse" for="c-36066335">[-]</label><label class="expand" for="c-36066335">[1 more]</label></div><br/><div class="children"><div class="content">Thanks for the pointer to lish! I didn&#x27;t know it had all that, I know it exists but was intimated by its non-standard packaging...<p>I decided to not go too far on the structured&#x2F;object shell route for Unix in Lisp, instead trying to get existing Unix utilities to work as seamlessly as possible first. But maybe in the future I could integrate some work from lish. That&#x27;s lots of impressive work under yew&#x2F;los and yew&#x2F;tools!</div><br/></div></div></div></div><div id="36066149" class="c"><input type="checkbox" id="c-36066149" checked=""/><div class="controls bullet"><span class="by">ahefner</span><span>|</span><a href="#36065742">prev</a><span>|</span><a href="#36065849">next</a><span>|</span><label class="collapse" for="c-36066149">[-]</label><label class="expand" for="c-36066149">[1 more]</label></div><br/><div class="children"><div class="content">Neat. Funny enough I&#x27;ve recently considered writing sort of the exact opposite of this - a FUSE FS that maps every package and symbol of a running lisp image into the filesystem, so that the value of variables could be read&#x2F;written from outside, fbound symbols would be marked executable and &quot;callable&quot; from unix by running them (via some weird shebang hack, I guess), etc.</div><br/></div></div><div id="36065849" class="c"><input type="checkbox" id="c-36065849" checked=""/><div class="controls bullet"><span class="by">agambrahma</span><span>|</span><a href="#36066149">prev</a><span>|</span><a href="#36064713">next</a><span>|</span><label class="collapse" for="c-36065849">[-]</label><label class="expand" for="c-36065849">[1 more]</label></div><br/><div class="children"><div class="content">One of those &quot;I wonder what it&#x27;d be like if someone made that&quot;, and then someone _does_ make that, kudos!<p>Also, `defile` is a great name for a macro :-)</div><br/></div></div><div id="36064713" class="c"><input type="checkbox" id="c-36064713" checked=""/><div class="controls bullet"><span class="by">all2</span><span>|</span><a href="#36065849">prev</a><span>|</span><a href="#36068331">next</a><span>|</span><label class="collapse" for="c-36064713">[-]</label><label class="expand" for="c-36064713">[7 more]</label></div><br/><div class="children"><div class="content">One of the examples in the readme is this<p>Counting number of files<p><pre><code>    &#x2F;Users&#x2F;kchan&gt; (cd quicklisp&#x2F;local-projects&#x2F;unix-in-lisp)
    &#x2F;Users&#x2F;kchan&#x2F;quicklisp&#x2F;local-projects&#x2F;unix-in-lisp&gt; (pipe (wc -l) (ls))
           9
</code></pre>
Personally, I would want the top level parens to be implicit so I could write<p><pre><code>    &#x2F;Users&#x2F;kchan&gt; cd quicklisp&#x2F;local-projects&#x2F;unix-in-lisp
    &#x2F;Users&#x2F;kchan&#x2F;quicklisp&#x2F;local-projects&#x2F;unix-in-lisp&gt;
</code></pre>
This removes what could be trivial, but for a basic `cd`, I don&#x27;t want to have to remember parens every time. Optionally having those parens would be nice for when they&#x27;re needed, but for basic use-cases I&#x27;d rather not.</div><br/><div id="36065083" class="c"><input type="checkbox" id="c-36065083" checked=""/><div class="controls bullet"><span class="by">kscarlet</span><span>|</span><a href="#36064713">parent</a><span>|</span><a href="#36068331">next</a><span>|</span><label class="collapse" for="c-36065083">[-]</label><label class="expand" for="c-36065083">[6 more]</label></div><br/><div class="children"><div class="content">Author here! I&#x27;ve considered this before, but there are problems such as what does a single atom mean:
Does
test.sh
run test.sh or returns the content of test.sh?<p>I am a heavy Lisper myself so I end up choosing consistency over one less keystroke (I have paredit, so the difference between (ls) vs ls is just one keystroke), but I could be biased.</div><br/><div id="36065161" class="c"><input type="checkbox" id="c-36065161" checked=""/><div class="controls bullet"><span class="by">all2</span><span>|</span><a href="#36064713">root</a><span>|</span><a href="#36065083">parent</a><span>|</span><a href="#36066439">next</a><span>|</span><label class="collapse" for="c-36065161">[-]</label><label class="expand" for="c-36065161">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s a fair point. Consider that I have very little experience with any kind of Lisp beyond Scheme, and even that is very limited. I was coming at this recommendation from the perspective of a heavy command line user.</div><br/></div></div><div id="36066439" class="c"><input type="checkbox" id="c-36066439" checked=""/><div class="controls bullet"><span class="by">dmb2</span><span>|</span><a href="#36064713">root</a><span>|</span><a href="#36065083">parent</a><span>|</span><a href="#36065161">prev</a><span>|</span><a href="#36065407">next</a><span>|</span><label class="collapse" for="c-36066439">[-]</label><label class="expand" for="c-36066439">[3 more]</label></div><br/><div class="children"><div class="content">Do you use this as a daily driver?<p>I got addicted to evil-mode at some point and haven’t squared the circle of modal s-expression editing that this inevitably surfaces.<p>At least readline respecting programs reward my early emacs years.</div><br/><div id="36066454" class="c"><input type="checkbox" id="c-36066454" checked=""/><div class="controls bullet"><span class="by">kscarlet</span><span>|</span><a href="#36064713">root</a><span>|</span><a href="#36066439">parent</a><span>|</span><a href="#36066883">next</a><span>|</span><label class="collapse" for="c-36066454">[-]</label><label class="expand" for="c-36066454">[1 more]</label></div><br/><div class="children"><div class="content">Yes I use it daily.<p>I never squared the circle of modal editing and use mostly vanilla Emacs bindings (and paredit) :)<p>Would love to hear feedback from evil-mode user. Just in case I port it to vim in the future.</div><br/></div></div><div id="36066883" class="c"><input type="checkbox" id="c-36066883" checked=""/><div class="controls bullet"><span class="by">fiddlerwoaroof</span><span>|</span><a href="#36064713">root</a><span>|</span><a href="#36066439">parent</a><span>|</span><a href="#36066454">prev</a><span>|</span><a href="#36065407">next</a><span>|</span><label class="collapse" for="c-36066883">[-]</label><label class="expand" for="c-36066883">[1 more]</label></div><br/><div class="children"><div class="content">I use these keys every day for just about every sort of balanced delimiter manipulation I do in any language:  <a href="https:&#x2F;&#x2F;github.com&#x2F;fiddlerwoaroof&#x2F;dotfiles&#x2F;blob&#x2F;eff889f0b74956c9536bffffb9b71d9f65853f13&#x2F;emacs.d&#x2F;lisp&#x2F;configurations&#x2F;evil-conf.el#L67">https:&#x2F;&#x2F;github.com&#x2F;fiddlerwoaroof&#x2F;dotfiles&#x2F;blob&#x2F;eff889f0b749...</a><p>A little below I bind this key map to the “,” prefix and I’ve found my layout of paredit commands pretty ergonomic to use long-term.</div><br/></div></div></div></div><div id="36065407" class="c"><input type="checkbox" id="c-36065407" checked=""/><div class="controls bullet"><span class="by">jdougan</span><span>|</span><a href="#36064713">root</a><span>|</span><a href="#36065083">parent</a><span>|</span><a href="#36066439">prev</a><span>|</span><a href="#36068331">next</a><span>|</span><label class="collapse" for="c-36065407">[-]</label><label class="expand" for="c-36065407">[1 more]</label></div><br/><div class="children"><div class="content">would it be hard to modify the readline mechanism to show the &quot;implicit&quot; parens and push them apart as you type?</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>