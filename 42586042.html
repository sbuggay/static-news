<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1735981259235" as="style"/><link rel="stylesheet" href="styles.css?v=1735981259235"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://blog.val.town/blog/fast-follow/">What we learned copying all the best code assistants</a> <span class="domain">(<a href="https://blog.val.town">blog.val.town</a>)</span></div><div class="subtext"><span>stevekrouse</span> | <span>50 comments</span></div><br/><div><div id="42592733" class="c"><input type="checkbox" id="c-42592733" checked=""/><div class="controls bullet"><span class="by">ajhit406</span><span>|</span><a href="#42590308">next</a><span>|</span><label class="collapse" for="c-42592733">[-]</label><label class="expand" for="c-42592733">[1 more]</label></div><br/><div class="children"><div class="content">One consideration not mentioned is around developer sophistication. Steve alludes to the expansion effect of CodeGen (&quot;there are millions and maybe billions who are jumping at the chance to code&quot;), but doesn&#x27;t consider that the vast majority of these people don&#x27;t know about arrays, data structures, memory, containers, runtimes, etc, etc...<p>To me, that&#x27;s the most important consideration here. Are you targeting professional devs who are enhancing their current workflows iteratively with these improvements? Or re-thinking from the ground up, obfuscating most of what we&#x27;ve learned to date?<p>Maybe we need to trudge through all of these weeds until software creation hits its final, elegant form where &quot;Anyone Can Code&quot;.<p>Maybe the old Gusteau quote is actually fitting here:<p>&quot;You must be imaginative, strong-hearted. You must try things that may not work, and you must not let anyone define your limits because of where you come from. Your only limit is your soul. What I say is true - anyone can  ̶c̶o̶o̶k̶ code... but only the fearless can be great.&quot;</div><br/></div></div><div id="42590308" class="c"><input type="checkbox" id="c-42590308" checked=""/><div class="controls bullet"><span class="by">viewhub</span><span>|</span><a href="#42592733">prev</a><span>|</span><a href="#42591658">next</a><span>|</span><label class="collapse" for="c-42590308">[-]</label><label class="expand" for="c-42590308">[6 more]</label></div><br/><div class="children"><div class="content">Windsurf + Haskell w&#x2F; CLI tools has been pretty amazing. Windsurf&#x27;s agent will loop for minutes on its own to figure out the right structure of a program. You just need to tell it to:<p>- use the hoogle cli to search for the right types and functions<p>- include a comprehensive test suite<p>- run a build after every code change<p>- run tests after every successful build<p>GHC + a Claude-based agent is a thing to behold.</div><br/><div id="42590347" class="c"><input type="checkbox" id="c-42590347" checked=""/><div class="controls bullet"><span class="by">stevekrouse</span><span>|</span><a href="#42590308">parent</a><span>|</span><a href="#42591112">next</a><span>|</span><label class="collapse" for="c-42590347">[-]</label><label class="expand" for="c-42590347">[4 more]</label></div><br/><div class="children"><div class="content">Woah, that sounds awesome! I&#x27;d love to see how you set that up and how much it can do without your intervention&#x2F;approval for various actions. Might you have a video of your workflow that you could share?</div><br/><div id="42590614" class="c"><input type="checkbox" id="c-42590614" checked=""/><div class="controls bullet"><span class="by">viewhub</span><span>|</span><a href="#42590308">root</a><span>|</span><a href="#42590347">parent</a><span>|</span><a href="#42591112">next</a><span>|</span><label class="collapse" for="c-42590614">[-]</label><label class="expand" for="c-42590614">[3 more]</label></div><br/><div class="children"><div class="content">Sure, I&#x27;ll record a little something with Loom for you tomorrow.</div><br/><div id="42591115" class="c"><input type="checkbox" id="c-42591115" checked=""/><div class="controls bullet"><span class="by">djsavvy</span><span>|</span><a href="#42590308">root</a><span>|</span><a href="#42590614">parent</a><span>|</span><a href="#42591112">next</a><span>|</span><label class="collapse" for="c-42591115">[-]</label><label class="expand" for="c-42591115">[2 more]</label></div><br/><div class="children"><div class="content">fascinating, would love to see this as well when you do.</div><br/><div id="42591614" class="c"><input type="checkbox" id="c-42591614" checked=""/><div class="controls bullet"><span class="by">jmj</span><span>|</span><a href="#42590308">root</a><span>|</span><a href="#42591115">parent</a><span>|</span><a href="#42591112">next</a><span>|</span><label class="collapse" for="c-42591614">[-]</label><label class="expand" for="c-42591614">[1 more]</label></div><br/><div class="children"><div class="content">Please, me too!</div><br/></div></div></div></div></div></div></div></div><div id="42591112" class="c"><input type="checkbox" id="c-42591112" checked=""/><div class="controls bullet"><span class="by">anonymoushn</span><span>|</span><a href="#42590308">parent</a><span>|</span><a href="#42590347">prev</a><span>|</span><a href="#42591658">next</a><span>|</span><label class="collapse" for="c-42591112">[-]</label><label class="expand" for="c-42591112">[1 more]</label></div><br/><div class="children"><div class="content">What&#x27;s the maximum file size for which this is useful in your experience? I have been refactoring some project solely to enable AI code editors to edit it. Some users in the discord suggest a maximum file size of 500LOC or small, which seems unreasonable.</div><br/></div></div></div></div><div id="42591658" class="c"><input type="checkbox" id="c-42591658" checked=""/><div class="controls bullet"><span class="by">drawnwren</span><span>|</span><a href="#42590308">prev</a><span>|</span><a href="#42589454">next</a><span>|</span><label class="collapse" for="c-42591658">[-]</label><label class="expand" for="c-42591658">[7 more]</label></div><br/><div class="children"><div class="content">&gt; The next big thing was Cursor. I must admit that I never personally fell in love with it, but given how many people I respect love it, I think that’s a me-problem<p>I&#x27;ve met so many engineers who have said exactly this. There are clearly some group of people obsessed with Cursor, but it&#x27;s interesting to me how alien they seem to the majority of people using ai codegen right now.</div><br/><div id="42591687" class="c"><input type="checkbox" id="c-42591687" checked=""/><div class="controls bullet"><span class="by">floydnoel</span><span>|</span><a href="#42591658">parent</a><span>|</span><a href="#42591926">next</a><span>|</span><label class="collapse" for="c-42591687">[-]</label><label class="expand" for="c-42591687">[2 more]</label></div><br/><div class="children"><div class="content">i had to uninstall it because it had associated itself with every possible file extension. i couldn&#x27;t open a file without cursor popping up. very horrifying for that to happen to my computer when working on important projects</div><br/><div id="42592559" class="c"><input type="checkbox" id="c-42592559" checked=""/><div class="controls bullet"><span class="by">OsrsNeedsf2P</span><span>|</span><a href="#42591658">root</a><span>|</span><a href="#42591687">parent</a><span>|</span><a href="#42591926">next</a><span>|</span><label class="collapse" for="c-42592559">[-]</label><label class="expand" for="c-42592559">[1 more]</label></div><br/><div class="children"><div class="content">On Linux, I have the opposite issue. I ended up hard symlinking cursor to VS Code because Cursor wasn&#x27;t opening despite being set as the default editor.</div><br/></div></div></div></div><div id="42591926" class="c"><input type="checkbox" id="c-42591926" checked=""/><div class="controls bullet"><span class="by">shombaboor</span><span>|</span><a href="#42591658">parent</a><span>|</span><a href="#42591687">prev</a><span>|</span><a href="#42592050">next</a><span>|</span><label class="collapse" for="c-42591926">[-]</label><label class="expand" for="c-42591926">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m pretty much full time on cursor from vscode. I don&#x27;t trust it for big code blocks, but a control-k + reasonable command (I could have typed up myself) is saving me quite a bit of time.</div><br/></div></div><div id="42592050" class="c"><input type="checkbox" id="c-42592050" checked=""/><div class="controls bullet"><span class="by">teaearlgraycold</span><span>|</span><a href="#42591658">parent</a><span>|</span><a href="#42591926">prev</a><span>|</span><a href="#42589454">next</a><span>|</span><label class="collapse" for="c-42592050">[-]</label><label class="expand" for="c-42592050">[3 more]</label></div><br/><div class="children"><div class="content">I use it. It’s not a revolution, but it’s an upgrade over vscode+copilot. Only a matter of time until the two have feature parity, though.</div><br/><div id="42592371" class="c"><input type="checkbox" id="c-42592371" checked=""/><div class="controls bullet"><span class="by">prettyblocks</span><span>|</span><a href="#42591658">root</a><span>|</span><a href="#42592050">parent</a><span>|</span><a href="#42589454">next</a><span>|</span><label class="collapse" for="c-42592371">[-]</label><label class="expand" for="c-42592371">[2 more]</label></div><br/><div class="children"><div class="content">I prefer vscode+copilot. It&#x27;s much cheaper and has all the functionality I want. There&#x27;s access to 3.5 sonnet, and it can edit&#x2F;create up to 10 files at a time.</div><br/><div id="42592969" class="c"><input type="checkbox" id="c-42592969" checked=""/><div class="controls bullet"><span class="by">tmikaeld</span><span>|</span><a href="#42591658">root</a><span>|</span><a href="#42592371">parent</a><span>|</span><a href="#42589454">next</a><span>|</span><label class="collapse" for="c-42592969">[-]</label><label class="expand" for="c-42592969">[1 more]</label></div><br/><div class="children"><div class="content">It’s just horribly slow though, using sonnet can often take 5 min to apply</div><br/></div></div></div></div></div></div></div></div><div id="42589454" class="c"><input type="checkbox" id="c-42589454" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#42591658">prev</a><span>|</span><a href="#42589451">next</a><span>|</span><label class="collapse" for="c-42589454">[-]</label><label class="expand" for="c-42589454">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s really interesting seeing the progression here, integrating AI-assisted coding tools into something like Val Town is a great arena for exploring different patterns for this stuff.<p>Worth checking out their Cerebras-powered demo too - LLMs at 2000 tokens&#x2F;second make applying proposed changes absurdly interactive: <a href="https:&#x2F;&#x2F;cerebrascoder.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;cerebrascoder.com&#x2F;</a></div><br/></div></div><div id="42589451" class="c"><input type="checkbox" id="c-42589451" checked=""/><div class="controls bullet"><span class="by">stevekrouse</span><span>|</span><a href="#42589454">prev</a><span>|</span><a href="#42590437">next</a><span>|</span><label class="collapse" for="c-42589451">[-]</label><label class="expand" for="c-42589451">[3 more]</label></div><br/><div class="children"><div class="content">This post is the latest in a series about Townie, our AI assistant.<p>Our first had a nice discussion on HN: <a href="https:&#x2F;&#x2F;blog.val.town&#x2F;blog&#x2F;codegen&#x2F;" rel="nofollow">https:&#x2F;&#x2F;blog.val.town&#x2F;blog&#x2F;codegen&#x2F;</a><p>The other posts in the series:<p>- <a href="https:&#x2F;&#x2F;blog.val.town&#x2F;blog&#x2F;townie&#x2F;" rel="nofollow">https:&#x2F;&#x2F;blog.val.town&#x2F;blog&#x2F;townie&#x2F;</a><p>- <a href="https:&#x2F;&#x2F;blog.val.town&#x2F;blog&#x2F;building-a-code-writing-robot&#x2F;" rel="nofollow">https:&#x2F;&#x2F;blog.val.town&#x2F;blog&#x2F;building-a-code-writing-robot&#x2F;</a></div><br/><div id="42591930" class="c"><input type="checkbox" id="c-42591930" checked=""/><div class="controls bullet"><span class="by">deadmutex</span><span>|</span><a href="#42589451">parent</a><span>|</span><a href="#42590437">next</a><span>|</span><label class="collapse" for="c-42591930">[-]</label><label class="expand" for="c-42591930">[2 more]</label></div><br/><div class="children"><div class="content">Interesting. On lmsys, Gemini is #1 for coding tasks. How does that compare?<p><a href="https:&#x2F;&#x2F;lmarena.ai&#x2F;?leaderboard" rel="nofollow">https:&#x2F;&#x2F;lmarena.ai&#x2F;?leaderboard</a></div><br/><div id="42592180" class="c"><input type="checkbox" id="c-42592180" checked=""/><div class="controls bullet"><span class="by">MacsHeadroom</span><span>|</span><a href="#42589451">root</a><span>|</span><a href="#42591930">parent</a><span>|</span><a href="#42590437">next</a><span>|</span><label class="collapse" for="c-42592180">[-]</label><label class="expand" for="c-42592180">[1 more]</label></div><br/><div class="children"><div class="content">lmsys is a poor judge of coding quality since it is based on ratings from a single generation rather than agentic coding over multiple steps.</div><br/></div></div></div></div></div></div><div id="42590437" class="c"><input type="checkbox" id="c-42590437" checked=""/><div class="controls bullet"><span class="by">mritchie712</span><span>|</span><a href="#42589451">prev</a><span>|</span><a href="#42590160">next</a><span>|</span><label class="collapse" for="c-42590437">[-]</label><label class="expand" for="c-42590437">[4 more]</label></div><br/><div class="children"><div class="content">&gt; The biggest problem with all current codegen systems is the speed of generation<p>I don&#x27;t see this complained about nearly as much as I&#x27;d expect. Groq has been out for over a year, I&#x27;m surprised OpenAI not acquired them and figured out how to 10x to 20x their speed on gpt4.</div><br/><div id="42590978" class="c"><input type="checkbox" id="c-42590978" checked=""/><div class="controls bullet"><span class="by">nichochar</span><span>|</span><a href="#42590437">parent</a><span>|</span><a href="#42590160">next</a><span>|</span><label class="collapse" for="c-42590978">[-]</label><label class="expand" for="c-42590978">[3 more]</label></div><br/><div class="children"><div class="content">Yeah I don&#x27;t agree. I&#x27;m building a product in the space, and the number one problem is correctness, not latency.<p>People are very happy to sit there for minutes if the correctness is high and the quality is high. It&#x27;s still 100x or 1000x faster than finding 3rd party developers to work for you.<p>I wish the models were getting better but recently they&#x27;ve felt very stuck and this is it, so agent architectures will be the answer in the short term. That&#x27;s what&#x27;s working for us at srcbook rn.</div><br/><div id="42591763" class="c"><input type="checkbox" id="c-42591763" checked=""/><div class="controls bullet"><span class="by">feznyng</span><span>|</span><a href="#42590437">root</a><span>|</span><a href="#42590978">parent</a><span>|</span><a href="#42590160">next</a><span>|</span><label class="collapse" for="c-42591763">[-]</label><label class="expand" for="c-42591763">[2 more]</label></div><br/><div class="children"><div class="content">I think the logic behind faster inference is that the LLM is unlikely to get it right the first time regardless of its intelligence simply due to the inherent ambiguity of human language. The faster it spits out a semi-functional bit of code the faster the iteration loop and the faster the user gets what they want.<p>Plus if you’re dealing with things like syntax errors, a really really fast llm + interpreter could report and fix the error in less than a minute with no user input.</div><br/><div id="42592075" class="c"><input type="checkbox" id="c-42592075" checked=""/><div class="controls bullet"><span class="by">jmathai</span><span>|</span><a href="#42590437">root</a><span>|</span><a href="#42591763">parent</a><span>|</span><a href="#42590160">next</a><span>|</span><label class="collapse" for="c-42592075">[-]</label><label class="expand" for="c-42592075">[1 more]</label></div><br/><div class="children"><div class="content">Also building something in this space. I think it’s a mistake to compare the speed of LLMs to humans. People don’t like to sit and wait. The more context you can give the better but at some point (&gt;30 seconds) people grow tired of waiting.</div><br/></div></div></div></div></div></div></div></div><div id="42590160" class="c"><input type="checkbox" id="c-42590160" checked=""/><div class="controls bullet"><span class="by">furyofantares</span><span>|</span><a href="#42590437">prev</a><span>|</span><a href="#42592715">next</a><span>|</span><label class="collapse" for="c-42590160">[-]</label><label class="expand" for="c-42590160">[2 more]</label></div><br/><div class="children"><div class="content">I wonder if you didn&#x27;t try cursor&#x27;s Composer tab, especially set to Agent?<p>I didn&#x27;t care that much for cursor when I was just using Chat but once I switched to Composer I was very happy, and my experience is in total disagreement that it&#x27;s not so good for smaller projects.<p>They also must have a good prompt for diff-based completions, I don&#x27;t know how hard it is to extract that.</div><br/><div id="42590243" class="c"><input type="checkbox" id="c-42590243" checked=""/><div class="controls bullet"><span class="by">stevekrouse</span><span>|</span><a href="#42590160">parent</a><span>|</span><a href="#42592715">next</a><span>|</span><label class="collapse" for="c-42590243">[-]</label><label class="expand" for="c-42590243">[1 more]</label></div><br/><div class="children"><div class="content">Ok, good to know! I&#x27;ll have to find time to try out Composer<p>Yes, I wonder if reilly3000 will swing by with a leaked system prompt from them too</div><br/></div></div></div></div><div id="42592715" class="c"><input type="checkbox" id="c-42592715" checked=""/><div class="controls bullet"><span class="by">seveibar</span><span>|</span><a href="#42590160">prev</a><span>|</span><a href="#42589751">next</a><span>|</span><label class="collapse" for="c-42592715">[-]</label><label class="expand" for="c-42592715">[1 more]</label></div><br/><div class="children"><div class="content">Val town has been a huge inspiration for the tscircuit site which is basically a typescript playground for electronic design. We extensively use codemirror-ts which was created by Val town and enables typescript autocomplete inside a codemirror editor. I didn’t know about codemirror-codeium but ill definitely look at integrating that as well!<p>It’s absolutely true that we are in a race for online editors, I feel fatigued competing for ai features instead of building core product features, but since my framework is new, it’s not known by any major LLM providers, so our users can’t get ai assistance unless we build something ourselves.<p>@stevekrouse huge shout out for your team’s open source work, hoping to help contribute upstream at some point!!</div><br/></div></div><div id="42589751" class="c"><input type="checkbox" id="c-42589751" checked=""/><div class="controls bullet"><span class="by">afro88</span><span>|</span><a href="#42592715">prev</a><span>|</span><a href="#42590228">next</a><span>|</span><label class="collapse" for="c-42589751">[-]</label><label class="expand" for="c-42589751">[12 more]</label></div><br/><div class="children"><div class="content">I&#x27;m interested in what stopped you from finishing diffs and diff based editing. I built an AI software engineering assistant at my last company and we got decent results with Aider&#x27;s method (and prompts, and hidden conversation starter etc). I did have to have a fallback to raw output, and a way to ask it to try again. But for the most part it worked well and unlocked editing large files (and quickly).</div><br/><div id="42589889" class="c"><input type="checkbox" id="c-42589889" checked=""/><div class="controls bullet"><span class="by">stevekrouse</span><span>|</span><a href="#42589751">parent</a><span>|</span><a href="#42590228">next</a><span>|</span><label class="collapse" for="c-42589889">[-]</label><label class="expand" for="c-42589889">[11 more]</label></div><br/><div class="children"><div class="content">Excellent question! We just didn&#x27;t have the resources at the time on our small team to invest in getting it to be good enough to be default on. We had to move on to other more core platform features.<p>Though I&#x27;m really eager to get back to it. When using Windsurf last week, I was impressed by their diffs on Sonnet. Seems like they work well. I would <i>love</i> to view their system prompt!<p>I hope that when we have time to resume work on this (maybe in Feb) that we&#x27;ll be able to get it done. But then again, maybe just patience (and more fast-following) is the right strategy, given how fast things are moving...</div><br/><div id="42589923" class="c"><input type="checkbox" id="c-42589923" checked=""/><div class="controls bullet"><span class="by">reilly3000</span><span>|</span><a href="#42589751">root</a><span>|</span><a href="#42589889">parent</a><span>|</span><a href="#42589914">next</a><span>|</span><label class="collapse" for="c-42589923">[-]</label><label class="expand" for="c-42589923">[4 more]</label></div><br/><div class="children"><div class="content">I gotchu:<p><a href="https:&#x2F;&#x2F;www.reddit.com&#x2F;r&#x2F;LocalLLaMA&#x2F;comments&#x2F;1h7sjyt&#x2F;windsurf_cascade_leaked_system_prompt&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.reddit.com&#x2F;r&#x2F;LocalLLaMA&#x2F;comments&#x2F;1h7sjyt&#x2F;windsur...</a></div><br/><div id="42590995" class="c"><input type="checkbox" id="c-42590995" checked=""/><div class="controls bullet"><span class="by">uncomplexity_</span><span>|</span><a href="#42589751">root</a><span>|</span><a href="#42589923">parent</a><span>|</span><a href="#42590391">next</a><span>|</span><label class="collapse" for="c-42590995">[-]</label><label class="expand" for="c-42590995">[1 more]</label></div><br/><div class="children"><div class="content">hey thanks for this! inaightful</div><br/></div></div><div id="42590391" class="c"><input type="checkbox" id="c-42590391" checked=""/><div class="controls bullet"><span class="by">bugglebeetle</span><span>|</span><a href="#42589751">root</a><span>|</span><a href="#42589923">parent</a><span>|</span><a href="#42590995">prev</a><span>|</span><a href="#42589951">next</a><span>|</span><label class="collapse" for="c-42590391">[-]</label><label class="expand" for="c-42590391">[1 more]</label></div><br/><div class="children"><div class="content">No wonder Windsurf breaks down after a few back and forth messages. That prompt is a monster and clogging up the context.</div><br/></div></div><div id="42589951" class="c"><input type="checkbox" id="c-42589951" checked=""/><div class="controls bullet"><span class="by">stevekrouse</span><span>|</span><a href="#42589751">root</a><span>|</span><a href="#42589923">parent</a><span>|</span><a href="#42590391">prev</a><span>|</span><a href="#42589914">next</a><span>|</span><label class="collapse" for="c-42589951">[-]</label><label class="expand" for="c-42589951">[1 more]</label></div><br/><div class="children"><div class="content">wow, magic. thank you!</div><br/></div></div></div></div><div id="42589914" class="c"><input type="checkbox" id="c-42589914" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#42589751">root</a><span>|</span><a href="#42589889">parent</a><span>|</span><a href="#42589923">prev</a><span>|</span><a href="#42590228">next</a><span>|</span><label class="collapse" for="c-42589914">[-]</label><label class="expand" for="c-42589914">[6 more]</label></div><br/><div class="children"><div class="content">An interesting alternative to diffs appears to be straightforward find and replace.<p>Claude Artifacts uses that: they have a tool where the LLM can say &quot;replace this exact text with this&quot; to update an Artifat without having to output the whole thing again.<p>ChatGPT&#x27;s new Canvas feature apparently does a more sophisticated version of that using regular expressions as opposed to simple text matching: <a href="https:&#x2F;&#x2F;twitter.com&#x2F;sh_reya&#x2F;status&#x2F;1875227816993943823" rel="nofollow">https:&#x2F;&#x2F;twitter.com&#x2F;sh_reya&#x2F;status&#x2F;1875227816993943823</a></div><br/><div id="42591018" class="c"><input type="checkbox" id="c-42591018" checked=""/><div class="controls bullet"><span class="by">r00tanon</span><span>|</span><a href="#42589751">root</a><span>|</span><a href="#42589914">parent</a><span>|</span><a href="#42590100">next</a><span>|</span><label class="collapse" for="c-42591018">[-]</label><label class="expand" for="c-42591018">[1 more]</label></div><br/><div class="children"><div class="content">How about looking at an ast-based method for making changes across code base?
<a href="https:&#x2F;&#x2F;www.reddit.com&#x2F;r&#x2F;Python&#x2F;comments&#x2F;17tvm06&#x2F;astgrep_and_python_api_a_tool_for_code_structural&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.reddit.com&#x2F;r&#x2F;Python&#x2F;comments&#x2F;17tvm06&#x2F;astgrep_and...</a></div><br/></div></div><div id="42590100" class="c"><input type="checkbox" id="c-42590100" checked=""/><div class="controls bullet"><span class="by">zamfi</span><span>|</span><a href="#42589751">root</a><span>|</span><a href="#42589914">parent</a><span>|</span><a href="#42591018">prev</a><span>|</span><a href="#42589957">next</a><span>|</span><label class="collapse" for="c-42590100">[-]</label><label class="expand" for="c-42590100">[3 more]</label></div><br/><div class="children"><div class="content">Oh that is super interesting! I wonder if they track how often it succeeds in matching and replacing, I&#x27;d love to see those numbers in aggregate.<p>Total anecdote, but I worked on this for a bit for a research-level-code code editor (system paper to come soon, fingers crossed!) and found that basic find-and-replace was pretty brittle. I also had to be confident the source appears only once (not always the case for my use case), and there was a tradeoff of fuzziness of match &#x2F; likelihood of perfectly correct source.<p>But yeah, diffs are super hard because the format requires far context and accurate mathematical computation.<p>Ultimately, the version of this that worked the best for me was a total hack:<p>Prefix every line of the code with L#### -- the line number. Ask for diffs to be the original text and the complete replacement text <i>including</i> the line number prefix on both original and replacement. Then, to apply, fuzzy match on both line number and context.<p>I suspect this worked as well as it did because it transmutes the math and computation problems into pattern-matching and copying problems, which LLMs are (still) much better at these days.</div><br/><div id="42590135" class="c"><input type="checkbox" id="c-42590135" checked=""/><div class="controls bullet"><span class="by">stevekrouse</span><span>|</span><a href="#42589751">root</a><span>|</span><a href="#42590100">parent</a><span>|</span><a href="#42589957">next</a><span>|</span><label class="collapse" for="c-42590135">[-]</label><label class="expand" for="c-42590135">[2 more]</label></div><br/><div class="children"><div class="content">Yes, adding line numbers on each line is one of the ideas we&#x27;ve been considering trying. Thanks for the reminder!</div><br/><div id="42590159" class="c"><input type="checkbox" id="c-42590159" checked=""/><div class="controls bullet"><span class="by">zamfi</span><span>|</span><a href="#42589751">root</a><span>|</span><a href="#42590135">parent</a><span>|</span><a href="#42589957">next</a><span>|</span><label class="collapse" for="c-42590159">[-]</label><label class="expand" for="c-42590159">[1 more]</label></div><br/><div class="children"><div class="content">I suspect any other &quot;hook&quot; would work just as well, a comment with a nonce--and could serve as block boundaries to make changes more likely to be complete?<p>Graphologue used a version of this too: <a href="https:&#x2F;&#x2F;hci.ucsd.edu&#x2F;papers&#x2F;graphologue.pdf" rel="nofollow">https:&#x2F;&#x2F;hci.ucsd.edu&#x2F;papers&#x2F;graphologue.pdf</a></div><br/></div></div></div></div></div></div><div id="42589957" class="c"><input type="checkbox" id="c-42589957" checked=""/><div class="controls bullet"><span class="by">stevekrouse</span><span>|</span><a href="#42589751">root</a><span>|</span><a href="#42589914">parent</a><span>|</span><a href="#42590100">prev</a><span>|</span><a href="#42590228">next</a><span>|</span><label class="collapse" for="c-42589957">[-]</label><label class="expand" for="c-42589957">[1 more]</label></div><br/><div class="children"><div class="content">Very useful! Thank you!</div><br/></div></div></div></div></div></div></div></div><div id="42590228" class="c"><input type="checkbox" id="c-42590228" checked=""/><div class="controls bullet"><span class="by">fudged71</span><span>|</span><a href="#42589751">prev</a><span>|</span><a href="#42590619">next</a><span>|</span><label class="collapse" for="c-42590228">[-]</label><label class="expand" for="c-42590228">[2 more]</label></div><br/><div class="children"><div class="content">I really enjoyed Steve’s guest appearance on Dan Shipper’s AI &amp; I <a href="https:&#x2F;&#x2F;open.spotify.com&#x2F;episode&#x2F;6hoiweWkAv84zYTC8DAi5B?si=C1UmaOJ8Rnm_MgQPeLtTDg" rel="nofollow">https:&#x2F;&#x2F;open.spotify.com&#x2F;episode&#x2F;6hoiweWkAv84zYTC8DAi5B?si=C...</a></div><br/><div id="42590245" class="c"><input type="checkbox" id="c-42590245" checked=""/><div class="controls bullet"><span class="by">stevekrouse</span><span>|</span><a href="#42590228">parent</a><span>|</span><a href="#42590619">next</a><span>|</span><label class="collapse" for="c-42590245">[-]</label><label class="expand" for="c-42590245">[1 more]</label></div><br/><div class="children"><div class="content">Thanks!!</div><br/></div></div></div></div><div id="42590619" class="c"><input type="checkbox" id="c-42590619" checked=""/><div class="controls bullet"><span class="by">polote</span><span>|</span><a href="#42590228">prev</a><span>|</span><a href="#42590577">next</a><span>|</span><label class="collapse" for="c-42590619">[-]</label><label class="expand" for="c-42590619">[3 more]</label></div><br/><div class="children"><div class="content">Kinda got the the same conclusion than OP building in the same space. There is so much innovation going on currently that whatever you do today, two other people will do better tomorrow. Which is a good news for us but difficult time for builders.</div><br/><div id="42590756" class="c"><input type="checkbox" id="c-42590756" checked=""/><div class="controls bullet"><span class="by">ed</span><span>|</span><a href="#42590619">parent</a><span>|</span><a href="#42591008">next</a><span>|</span><label class="collapse" for="c-42590756">[-]</label><label class="expand" for="c-42590756">[1 more]</label></div><br/><div class="children"><div class="content">Ditto. This was my conclusion after spending a bit of time building <a href="https:&#x2F;&#x2F;robocoder.app&#x2F;" rel="nofollow">https:&#x2F;&#x2F;robocoder.app&#x2F;</a><p>Coupled with the fact that devs prefer open source tools and are capable of (and often prefer) making their own tooling, it never seemed like a great market to go after. I also encountered a lot of hostility trying to share yet another AI developer tool.<p>(Note I am one of those developers who prefer open source tools — which should’ve been a hint…)</div><br/></div></div><div id="42591008" class="c"><input type="checkbox" id="c-42591008" checked=""/><div class="controls bullet"><span class="by">uncomplexity_</span><span>|</span><a href="#42590619">parent</a><span>|</span><a href="#42590756">prev</a><span>|</span><a href="#42590577">next</a><span>|</span><label class="collapse" for="c-42591008">[-]</label><label class="expand" for="c-42591008">[1 more]</label></div><br/><div class="children"><div class="content">goodnews is the market is still too early, a lot of people still dont know these things exist. as long as you keep showing up you&#x27;re gonna get a piece of the pie</div><br/></div></div></div></div><div id="42590577" class="c"><input type="checkbox" id="c-42590577" checked=""/><div class="controls bullet"><span class="by">amelius</span><span>|</span><a href="#42590619">prev</a><span>|</span><a href="#42592823">next</a><span>|</span><label class="collapse" for="c-42590577">[-]</label><label class="expand" for="c-42590577">[5 more]</label></div><br/><div class="children"><div class="content">When can AI do refactors that encompass multiple files or an entire project?</div><br/><div id="42591041" class="c"><input type="checkbox" id="c-42591041" checked=""/><div class="controls bullet"><span class="by">uncomplexity_</span><span>|</span><a href="#42590577">parent</a><span>|</span><a href="#42590739">next</a><span>|</span><label class="collapse" for="c-42591041">[-]</label><label class="expand" for="c-42591041">[1 more]</label></div><br/><div class="children"><div class="content">it can do it already, the trick is to prompt it to approach it how a human would.<p>1. use a temp file as a reference for the entire refactor<p>2. make it plan the entire thing, tell it to use a high level and low level checklists, tell it to take notes for itself, and tell it to use the temp file as a scratchpad for taking notes and storing code blocks.<p>3. tell it to do small incremental changes, and do bottoms up approach.</div><br/></div></div><div id="42590739" class="c"><input type="checkbox" id="c-42590739" checked=""/><div class="controls bullet"><span class="by">jacomoRodriguez</span><span>|</span><a href="#42590577">parent</a><span>|</span><a href="#42591041">prev</a><span>|</span><a href="#42590878">next</a><span>|</span><label class="collapse" for="c-42590739">[-]</label><label class="expand" for="c-42590739">[1 more]</label></div><br/><div class="children"><div class="content">It can already, try cursor composer or copilot edit sessions.</div><br/></div></div><div id="42590878" class="c"><input type="checkbox" id="c-42590878" checked=""/><div class="controls bullet"><span class="by">aprilthird2021</span><span>|</span><a href="#42590577">parent</a><span>|</span><a href="#42590739">prev</a><span>|</span><a href="#42592597">next</a><span>|</span><label class="collapse" for="c-42590878">[-]</label><label class="expand" for="c-42590878">[1 more]</label></div><br/><div class="children"><div class="content">I find that even CoPilot can do this pretty quickly if you do one example refactor and then prompt it to repeat the example on all the files from a find and search.<p>Since that&#x27;s already a huge speed up, I&#x27;m sure many of these agents can do the same.</div><br/></div></div><div id="42592597" class="c"><input type="checkbox" id="c-42592597" checked=""/><div class="controls bullet"><span class="by">itsyourcode</span><span>|</span><a href="#42590577">parent</a><span>|</span><a href="#42590878">prev</a><span>|</span><a href="#42592823">next</a><span>|</span><label class="collapse" for="c-42592597">[-]</label><label class="expand" for="c-42592597">[1 more]</label></div><br/><div class="children"><div class="content">And now Claude can do it with the right MCPs installed + smart prompts</div><br/></div></div></div></div><div id="42592823" class="c"><input type="checkbox" id="c-42592823" checked=""/><div class="controls bullet"><span class="by">kfarr</span><span>|</span><a href="#42590577">prev</a><span>|</span><a href="#42586045">next</a><span>|</span><label class="collapse" for="c-42592823">[-]</label><label class="expand" for="c-42592823">[1 more]</label></div><br/><div class="children"><div class="content">Love the openness and candor of this post!</div><br/></div></div></div></div></div></div></div></body></html>