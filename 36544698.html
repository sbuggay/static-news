<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1688202055898" as="style"/><link rel="stylesheet" href="styles.css?v=1688202055898"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://backend.cafe/should-you-use-jest-as-a-testing-library">Should you use Jest as a testing library? (2022)</a> <span class="domain">(<a href="https://backend.cafe">backend.cafe</a>)</span></div><div class="subtext"><span>fagnerbrack</span> | <span>43 comments</span></div><br/><div><div id="36545581" class="c"><input type="checkbox" id="c-36545581" checked=""/><div class="controls bullet"><span class="by">fathyb</span><span>|</span><a href="#36547067">next</a><span>|</span><label class="collapse" for="c-36545581">[-]</label><label class="expand" for="c-36545581">[17 more]</label></div><br/><div class="children"><div class="content">`instanceof Array` is a famous JavaScript footgun you should not use anyway. The same happens when sharing objects with an `iframe` (aka &quot;cross-realm objects&quot;). This is why `Array.isArray` exists.<p>That said, Jest used to be so good when it was first released, and got gradually slower and more complex. Same with Yarn.<p>I hope React won&#x27;t face the same fate. I loved integrating the recent suspense and async rendering features. It made my app feel so much better by removing loading flickers with no architectural changes.</div><br/><div id="36546092" class="c"><input type="checkbox" id="c-36546092" checked=""/><div class="controls bullet"><span class="by">afavour</span><span>|</span><a href="#36545581">parent</a><span>|</span><a href="#36545991">next</a><span>|</span><label class="collapse" for="c-36546092">[-]</label><label class="expand" for="c-36546092">[14 more]</label></div><br/><div class="children"><div class="content">In a way React has already had the same fate. It really astounds me that react-dom is &gt;100KB big while the API-compatible Preact is something like 7KB.<p>There are edge cases where you can&#x27;t just drop it in directly as a replacement but you can very, very many times. Really makes me wonder what React is doing with that extra 93KB of JS, it&#x27;s not actually even that fast compared to other frontend frameworks.</div><br/><div id="36546219" class="c"><input type="checkbox" id="c-36546219" checked=""/><div class="controls bullet"><span class="by">franciscop</span><span>|</span><a href="#36545581">root</a><span>|</span><a href="#36546092">parent</a><span>|</span><a href="#36546239">next</a><span>|</span><label class="collapse" for="c-36546219">[-]</label><label class="expand" for="c-36546219">[3 more]</label></div><br/><div class="children"><div class="content">I wrote a jQuery (30kb) alternative called Umbrella JS (2.6kb) and based on my experience and if I had to guess, probably most of the rest of React&#x27;s size is in compatibility stuff. Like making sure events work uniformly across browsers, I remember that making everything work with SVGs was also a big milestone, normalizing events (e.g. we have synthetic events which are basically React&#x27;s events on top of the normal DOM events), etc. An astute&#x2F;old fashion dev will realize that React&#x27;s onChange actually behaves like `addEventListener(&#x27;input&#x27;)` and not really like `addEventListener(&#x27;change&#x27;)`, since the latter only triggers on blur and not on each keystroke.<p>I strongly believe React team is shooting themselves on the foot by not making Error Boundaries into Hooks. If they did, someone could create a Preact 2.0 so to speak that is like React but purely functional (no classes). But since we don&#x27;t have that, and error handling IS an important part of React, any react alternative would have to implement classes fully as well, which might retract many from even trying to create a React alternative (I don&#x27;t think myself smart enough to do a React alternative properly, but I&#x27;d certainly tried if they did this).</div><br/><div id="36546291" class="c"><input type="checkbox" id="c-36546291" checked=""/><div class="controls bullet"><span class="by">acemarke</span><span>|</span><a href="#36545581">root</a><span>|</span><a href="#36546219">parent</a><span>|</span><a href="#36546863">next</a><span>|</span><label class="collapse" for="c-36546291">[-]</label><label class="expand" for="c-36546291">[1 more]</label></div><br/><div class="children"><div class="content">There&#x27;s actually a recent PR up for a `&lt;Catch&gt;` component:<p>- <a href="https:&#x2F;&#x2F;github.com&#x2F;facebook&#x2F;react&#x2F;pull&#x2F;26854">https:&#x2F;&#x2F;github.com&#x2F;facebook&#x2F;react&#x2F;pull&#x2F;26854</a></div><br/></div></div><div id="36546863" class="c"><input type="checkbox" id="c-36546863" checked=""/><div class="controls bullet"><span class="by">awayto</span><span>|</span><a href="#36545581">root</a><span>|</span><a href="#36546219">parent</a><span>|</span><a href="#36546291">prev</a><span>|</span><a href="#36546239">next</a><span>|</span><label class="collapse" for="c-36546863">[-]</label><label class="expand" for="c-36546863">[1 more]</label></div><br/><div class="children"><div class="content">I wonder if error boundary components&#x2F;functionality are an anti-pattern. They invite the developer to create components which expect to fail. Even basic hide&#x2F;show logic is better than expecting devs to orchestrate unified error handling across the app.</div><br/></div></div></div></div><div id="36546239" class="c"><input type="checkbox" id="c-36546239" checked=""/><div class="controls bullet"><span class="by">Uehreka</span><span>|</span><a href="#36545581">root</a><span>|</span><a href="#36546092">parent</a><span>|</span><a href="#36546219">prev</a><span>|</span><a href="#36546851">next</a><span>|</span><label class="collapse" for="c-36546239">[-]</label><label class="expand" for="c-36546239">[7 more]</label></div><br/><div class="children"><div class="content">OK, hold up, I’ve been hearing this line forever and I’m here to hold it to account:<p>&gt; the API-compatible Preact is something like 7KB<p>Something is up here. Either Preact is not in fact API-compatible (in which case people should stop saying this), or the React devs are dummies who have never thought of Preact’s architecture or looked at its open source code (I rank this unlikely) or there’s somehow some other catch that no one talks about.<p>Which is it? Why doesn’t React just use Preact’s architecture if it’s so lightweight? What is Preact actually giving up?</div><br/><div id="36546515" class="c"><input type="checkbox" id="c-36546515" checked=""/><div class="controls bullet"><span class="by">afavour</span><span>|</span><a href="#36545581">root</a><span>|</span><a href="#36546239">parent</a><span>|</span><a href="#36547387">next</a><span>|</span><label class="collapse" for="c-36546515">[-]</label><label class="expand" for="c-36546515">[3 more]</label></div><br/><div class="children"><div class="content">There are definitely differences here and there. One I can remember from a year  or so ago is that Preact deprecated support for string refs while React still supports them (though the docs point out they intend to deprecate IIRC).<p>Honestly to my mind the biggest thing is that bundle size just isn’t a priority for the React team. A sibling comment pointed out that React does a lot to correctly handle SVGs. Good to have, obviously, but what percentage of React users are making interactive SVGs? Probably not a whole lot. If they wanted to the React folks could break that out into a react-svg module or something and save some KB. But they don’t want to.<p>To my mind React these days is the enterprise software of the frontend. It’s big, it’s bulky, but it does absolutely everything with a minimum of fuss. They have a one size fits all approach and they’re not willing to deviate from it.</div><br/><div id="36546585" class="c"><input type="checkbox" id="c-36546585" checked=""/><div class="controls bullet"><span class="by">fathyb</span><span>|</span><a href="#36545581">root</a><span>|</span><a href="#36546515">parent</a><span>|</span><a href="#36547387">next</a><span>|</span><label class="collapse" for="c-36546585">[-]</label><label class="expand" for="c-36546585">[2 more]</label></div><br/><div class="children"><div class="content">&gt; what percentage of React users are making interactive SVGs<p>Every single app I worked on for the past 5 years did. `mui` icons are SVG for example, and it&#x27;s common practice to embed SVG as components to avoid the HTTP requests overhead and allow for theming through props.</div><br/><div id="36548145" class="c"><input type="checkbox" id="c-36548145" checked=""/><div class="controls bullet"><span class="by">josephg</span><span>|</span><a href="#36545581">root</a><span>|</span><a href="#36546585">parent</a><span>|</span><a href="#36547387">next</a><span>|</span><label class="collapse" for="c-36548145">[-]</label><label class="expand" for="c-36548145">[1 more]</label></div><br/><div class="children"><div class="content">Most people who embed svgs aren’t looking to make them interactive though. I think I’ve attached event handlers to internal elements in an svg maybe once in my entire career.</div><br/></div></div></div></div></div></div><div id="36547387" class="c"><input type="checkbox" id="c-36547387" checked=""/><div class="controls bullet"><span class="by">orangepanda</span><span>|</span><a href="#36545581">root</a><span>|</span><a href="#36546239">parent</a><span>|</span><a href="#36546515">prev</a><span>|</span><a href="#36546308">next</a><span>|</span><label class="collapse" for="c-36547387">[-]</label><label class="expand" for="c-36547387">[1 more]</label></div><br/><div class="children"><div class="content">Preact takes the King Bumi approach to API compatibility - by sometimes doing nothing.<p>The syntax may be compatible, but the semantics are not. For example, it doesn’t support react&#x27;s concurrency features; transitions are just empty wrappers.</div><br/></div></div><div id="36546308" class="c"><input type="checkbox" id="c-36546308" checked=""/><div class="controls bullet"><span class="by">Inviz</span><span>|</span><a href="#36545581">root</a><span>|</span><a href="#36546239">parent</a><span>|</span><a href="#36547387">prev</a><span>|</span><a href="#36546445">next</a><span>|</span><label class="collapse" for="c-36546308">[-]</label><label class="expand" for="c-36546308">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s fully api compatible pre-fiber. in fact it has more apis in some regards.</div><br/></div></div><div id="36546445" class="c"><input type="checkbox" id="c-36546445" checked=""/><div class="controls bullet"><span class="by">gedy</span><span>|</span><a href="#36545581">root</a><span>|</span><a href="#36546239">parent</a><span>|</span><a href="#36546308">prev</a><span>|</span><a href="#36546851">next</a><span>|</span><label class="collapse" for="c-36546445">[-]</label><label class="expand" for="c-36546445">[1 more]</label></div><br/><div class="children"><div class="content">From memory, Preact doesn&#x27;t use synthetic events system like React and its runtime is much smaller.  It can&#x27;t be used generically like React can in mobile (React Native) or similar though because of this</div><br/></div></div></div></div><div id="36546851" class="c"><input type="checkbox" id="c-36546851" checked=""/><div class="controls bullet"><span class="by">strogonoff</span><span>|</span><a href="#36545581">root</a><span>|</span><a href="#36546092">parent</a><span>|</span><a href="#36546239">prev</a><span>|</span><a href="#36547630">next</a><span>|</span><label class="collapse" for="c-36546851">[-]</label><label class="expand" for="c-36546851">[2 more]</label></div><br/><div class="children"><div class="content">It’s often cheaper to couple things tightly. Abstractions and interfaces have costs. However, they also have benefits. Perhaps React and Preact is one such example.<p>React is a tiny fully agnostic library that does components, props, hooks and all that jazz. You can use it anywhere, from DOM to CLI. To tie it to DOM, a separate library exists—named, unimaginatively, ReactDOM—and that’s where the 100KB heft comes in.<p>Preact is the opposite: smaller, but coupled to DOM. The architecture probably doesn’t facilitate cool stuff like render components to embedded LCD[0], and even to do SSR you would have to add extra libraries.<p>[0] <a href="https:&#x2F;&#x2F;github.com&#x2F;doodlewind&#x2F;react-ssd1306&#x2F;blob&#x2F;master&#x2F;docs&#x2F;tutorial.md">https:&#x2F;&#x2F;github.com&#x2F;doodlewind&#x2F;react-ssd1306&#x2F;blob&#x2F;master&#x2F;docs...</a></div><br/><div id="36546979" class="c"><input type="checkbox" id="c-36546979" checked=""/><div class="controls bullet"><span class="by">acemarke</span><span>|</span><a href="#36545581">root</a><span>|</span><a href="#36546851">parent</a><span>|</span><a href="#36547630">next</a><span>|</span><label class="collapse" for="c-36546979">[-]</label><label class="expand" for="c-36546979">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s somewhere in between.<p>React as a lib and architecture _is_ platform-agnostic. The core logic is defined in the `react-reconciler` package.  It contains all the implementation of rendering components, diffing trees, managing state, and running effects, as well as all the &quot;Suspense&quot; implementation.<p>However, the way `react-reconciler` works is that it&#x27;s built _into_ each platform-specific renderer implementation. So, the size of `react-dom` is actually the size of `react-reconciler` + all the DOM-specific behavior.<p>A quick check of <a href="https:&#x2F;&#x2F;bundlejs.com&#x2F;?q=react-reconciler" rel="nofollow noreferrer">https:&#x2F;&#x2F;bundlejs.com&#x2F;?q=react-reconciler</a> suggests it&#x27;s about 100K minified.  <a href="https:&#x2F;&#x2F;bundlejs.com&#x2F;?q=react-dom" rel="nofollow noreferrer">https:&#x2F;&#x2F;bundlejs.com&#x2F;?q=react-dom</a> is 138K, so that tells me that the DOM-specific logic is 38K.</div><br/></div></div></div></div><div id="36547630" class="c"><input type="checkbox" id="c-36547630" checked=""/><div class="controls bullet"><span class="by">aledalgrande</span><span>|</span><a href="#36545581">root</a><span>|</span><a href="#36546092">parent</a><span>|</span><a href="#36546851">prev</a><span>|</span><a href="#36545991">next</a><span>|</span><label class="collapse" for="c-36547630">[-]</label><label class="expand" for="c-36547630">[1 more]</label></div><br/><div class="children"><div class="content">Seeing Preact mentioned, just wanted to give a shoutout to one of the authors, Marvin, an ex colleague. Absolutely amazing dev and person.</div><br/></div></div></div></div><div id="36545991" class="c"><input type="checkbox" id="c-36545991" checked=""/><div class="controls bullet"><span class="by">meese712</span><span>|</span><a href="#36545581">parent</a><span>|</span><a href="#36546092">prev</a><span>|</span><a href="#36545776">next</a><span>|</span><label class="collapse" for="c-36545991">[-]</label><label class="expand" for="c-36545991">[1 more]</label></div><br/><div class="children"><div class="content">Think the biggest slow down is from it running all the test suites in isolation in separate contexts (think that&#x27;s the right word). I got frustrated with how slow our frontend tests were one day like 4 years ago and wrote a hacky jest runtime that reused the context unless it detected jest.mock or jest.spy or timer stuff in the file it was on. It speed it up by 2x with cache cleared. It was still pretty slow though...<p>There was also an existing issue opened requesting this to be built in by a lot of people and facebook said lol no.</div><br/></div></div><div id="36545776" class="c"><input type="checkbox" id="c-36545776" checked=""/><div class="controls bullet"><span class="by">CSMastermind</span><span>|</span><a href="#36545581">parent</a><span>|</span><a href="#36545991">prev</a><span>|</span><a href="#36547067">next</a><span>|</span><label class="collapse" for="c-36545776">[-]</label><label class="expand" for="c-36545776">[1 more]</label></div><br/><div class="children"><div class="content">npm took up most of yarn&#x27;s significant changes to the point where I switched back years ago.<p>I think the Jest situation is a little different as it was the incumbent not the challenger.<p>React is similar in the it&#x27;s become an incumbent, though probably with less marketshare.  Ironically I believe the lack of a virtual DOM is a big selling point for Svelte (sp?) which my frontend developers are really excited about.</div><br/></div></div></div></div><div id="36547067" class="c"><input type="checkbox" id="c-36547067" checked=""/><div class="controls bullet"><span class="by">stevebmark</span><span>|</span><a href="#36545581">prev</a><span>|</span><a href="#36545403">next</a><span>|</span><label class="collapse" for="c-36547067">[-]</label><label class="expand" for="c-36547067">[3 more]</label></div><br/><div class="children"><div class="content">Clickbait, hard skip. Jest is the best testing framework I have ever worked with, every other testing framework should learn from it (seriously). Iterating on tests in watch mode is a joy.</div><br/><div id="36547233" class="c"><input type="checkbox" id="c-36547233" checked=""/><div class="controls bullet"><span class="by">rozenmd</span><span>|</span><a href="#36547067">parent</a><span>|</span><a href="#36547223">next</a><span>|</span><label class="collapse" for="c-36547233">[-]</label><label class="expand" for="c-36547233">[1 more]</label></div><br/><div class="children"><div class="content">If you love iterating on tests in watch mode, Vitest will feel even better: <a href="https:&#x2F;&#x2F;maxrozen.com&#x2F;beginners-guide-to-react-testing&#x2F;react-testing-tools-how-to-use-them" rel="nofollow noreferrer">https:&#x2F;&#x2F;maxrozen.com&#x2F;beginners-guide-to-react-testing&#x2F;react-...</a></div><br/></div></div><div id="36547223" class="c"><input type="checkbox" id="c-36547223" checked=""/><div class="controls bullet"><span class="by">golergka</span><span>|</span><a href="#36547067">parent</a><span>|</span><a href="#36547233">prev</a><span>|</span><a href="#36545403">next</a><span>|</span><label class="collapse" for="c-36547223">[-]</label><label class="expand" for="c-36547223">[1 more]</label></div><br/><div class="children"><div class="content">Have you tried vitest?</div><br/></div></div></div></div><div id="36545403" class="c"><input type="checkbox" id="c-36545403" checked=""/><div class="controls bullet"><span class="by">codefined</span><span>|</span><a href="#36547067">prev</a><span>|</span><a href="#36546083">next</a><span>|</span><label class="collapse" for="c-36545403">[-]</label><label class="expand" for="c-36545403">[9 more]</label></div><br/><div class="children"><div class="content">Vitest[0] is a drop in replacement to Jest that we&#x27;ve had exceptional success with.  Faster test runs, more reliable, default TS and ESM support, etc.<p>[0] <a href="https:&#x2F;&#x2F;vitest.dev&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;vitest.dev&#x2F;</a></div><br/><div id="36546289" class="c"><input type="checkbox" id="c-36546289" checked=""/><div class="controls bullet"><span class="by">xer0x</span><span>|</span><a href="#36545403">parent</a><span>|</span><a href="#36546737">next</a><span>|</span><label class="collapse" for="c-36546289">[-]</label><label class="expand" for="c-36546289">[2 more]</label></div><br/><div class="children"><div class="content">Vitest may not be a good drop in replacement either. It uses Workers for multi-threading via Tinypool. For us, we use the AWS SDK and the binaries in it would cause Vitest to crash. After wasting a lot of time, we had to retreat back to Jest.<p>I really like Vitest, and it&#x27;s a great fit for lots of projects. I&#x27;m a bit sad it wasn&#x27;t for ours.</div><br/><div id="36546476" class="c"><input type="checkbox" id="c-36546476" checked=""/><div class="controls bullet"><span class="by">shitlord</span><span>|</span><a href="#36545403">root</a><span>|</span><a href="#36546289">parent</a><span>|</span><a href="#36546737">next</a><span>|</span><label class="collapse" for="c-36546476">[-]</label><label class="expand" for="c-36546476">[1 more]</label></div><br/><div class="children"><div class="content">Just curious, were you using v2 or v3 of the AWS SDK? I was going to try Vitest after reading these comments, but maybe it&#x27;s not feasible right now.</div><br/></div></div></div></div><div id="36546737" class="c"><input type="checkbox" id="c-36546737" checked=""/><div class="controls bullet"><span class="by">deanc</span><span>|</span><a href="#36545403">parent</a><span>|</span><a href="#36546289">prev</a><span>|</span><a href="#36545705">next</a><span>|</span><label class="collapse" for="c-36546737">[-]</label><label class="expand" for="c-36546737">[1 more]</label></div><br/><div class="children"><div class="content">It is most definitely not drop in. I looked into this yesterday funnily enough and you can expect to have to make many syntax changes to your test files.</div><br/></div></div><div id="36545705" class="c"><input type="checkbox" id="c-36545705" checked=""/><div class="controls bullet"><span class="by">seniorsassycat</span><span>|</span><a href="#36545403">parent</a><span>|</span><a href="#36546737">prev</a><span>|</span><a href="#36545543">next</a><span>|</span><label class="collapse" for="c-36545705">[-]</label><label class="expand" for="c-36545705">[1 more]</label></div><br/><div class="children"><div class="content">Does vitest have this same issue or make a trade off to avoid it like jest-light-runner</div><br/></div></div><div id="36545543" class="c"><input type="checkbox" id="c-36545543" checked=""/><div class="controls bullet"><span class="by">thatswrong0</span><span>|</span><a href="#36545403">parent</a><span>|</span><a href="#36545705">prev</a><span>|</span><a href="#36545757">next</a><span>|</span><label class="collapse" for="c-36545543">[-]</label><label class="expand" for="c-36545543">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s an _almost_ drop in replacement - when I tried migrating our tests recently (because of memory leak issues &#x2F; slowness resulting from Jest + a Node upgrade) I found I had to manually finagle a lot of our mocks to get them working.</div><br/></div></div><div id="36545757" class="c"><input type="checkbox" id="c-36545757" checked=""/><div class="controls bullet"><span class="by">seniorsassycat</span><span>|</span><a href="#36545403">parent</a><span>|</span><a href="#36545543">prev</a><span>|</span><a href="#36545466">next</a><span>|</span><label class="collapse" for="c-36545757">[-]</label><label class="expand" for="c-36545757">[1 more]</label></div><br/><div class="children"><div class="content">Big fan of vitest, I like typescript and esm support out of the box and without adding dependencies like types&#x2F;jest or ts-jest. I&#x27;ve filed bugs and pull requests and the maintainers have been responsive</div><br/></div></div><div id="36545466" class="c"><input type="checkbox" id="c-36545466" checked=""/><div class="controls bullet"><span class="by">ehsanu1</span><span>|</span><a href="#36545403">parent</a><span>|</span><a href="#36545757">prev</a><span>|</span><a href="#36546083">next</a><span>|</span><label class="collapse" for="c-36545466">[-]</label><label class="expand" for="c-36545466">[2 more]</label></div><br/><div class="children"><div class="content">That seems tied to Vite though?</div><br/><div id="36545484" class="c"><input type="checkbox" id="c-36545484" checked=""/><div class="controls bullet"><span class="by">zerace</span><span>|</span><a href="#36545403">root</a><span>|</span><a href="#36545466">parent</a><span>|</span><a href="#36546083">next</a><span>|</span><label class="collapse" for="c-36545484">[-]</label><label class="expand" for="c-36545484">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s actually not! You can use vitest in a node environment as well just fine.</div><br/></div></div></div></div></div></div><div id="36546083" class="c"><input type="checkbox" id="c-36546083" checked=""/><div class="controls bullet"><span class="by">bottlepalm</span><span>|</span><a href="#36545403">prev</a><span>|</span><a href="#36546204">next</a><span>|</span><label class="collapse" for="c-36546083">[-]</label><label class="expand" for="c-36546083">[2 more]</label></div><br/><div class="children"><div class="content">A bit a click bait title, are we really advising to throw out Jest because of a single hang up?</div><br/><div id="36546321" class="c"><input type="checkbox" id="c-36546321" checked=""/><div class="controls bullet"><span class="by">jaktet</span><span>|</span><a href="#36546083">parent</a><span>|</span><a href="#36546204">next</a><span>|</span><label class="collapse" for="c-36546321">[-]</label><label class="expand" for="c-36546321">[1 more]</label></div><br/><div class="children"><div class="content">Despite the title this thread has brought up numerous other pain points with jest that make it less than ideal. At the cost of ensuring tests don’t bleed into each other due to the virtualization that occurs running large suites of tests in jest is extremely slow.<p>We still use jest but it’s one of the slowest parts of our pipelines.</div><br/></div></div></div></div><div id="36546204" class="c"><input type="checkbox" id="c-36546204" checked=""/><div class="controls bullet"><span class="by">EdwardDiego</span><span>|</span><a href="#36546083">prev</a><span>|</span><a href="#36545539">next</a><span>|</span><label class="collapse" for="c-36546204">[-]</label><label class="expand" for="c-36546204">[1 more]</label></div><br/><div class="children"><div class="content">So this is like the iframe Array isn&#x27;t the same as the parent window&#x27;s Array issue? I guess both Array types are same in semantics, but have different prototypes for isolation so code in one context can&#x27;t dick with code in another context in a language where dicking with other code trivially used to be very commonplace. Good ol Prototype.js used to love extending every DOMElement prototype it could.<p>Do you need to use an instanceof in the example code? I feel like it&#x27;s already covered that in the first assertion, unless there&#x27;s some horrifying way that another type could be implicitly coerced into an array looking shape.<p><pre><code>    expect(values.bar).toEqual([&#x27;a&#x27;, &#x27;b&#x27;])</code></pre></div><br/></div></div><div id="36545539" class="c"><input type="checkbox" id="c-36545539" checked=""/><div class="controls bullet"><span class="by">jonahx</span><span>|</span><a href="#36546204">prev</a><span>|</span><a href="#36545942">next</a><span>|</span><label class="collapse" for="c-36545539">[-]</label><label class="expand" for="c-36545539">[4 more]</label></div><br/><div class="children"><div class="content">If you&#x27;re looking for a minimalist framework that can be learned in 10 minutes or so, I recommend &quot;ospec&quot;.  For me it was a delight compared with Jest.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;MithrilJS&#x2F;ospec">https:&#x2F;&#x2F;github.com&#x2F;MithrilJS&#x2F;ospec</a></div><br/><div id="36545811" class="c"><input type="checkbox" id="c-36545811" checked=""/><div class="controls bullet"><span class="by">fourthark</span><span>|</span><a href="#36545539">parent</a><span>|</span><a href="#36545583">next</a><span>|</span><label class="collapse" for="c-36545811">[-]</label><label class="expand" for="c-36545811">[1 more]</label></div><br/><div class="children"><div class="content">I like that ospec does away with the `it(...)` convention in favor of “bullets”<p>“It” always caused weird grammatical problems with test descriptions. You can’t always describe tests that way. Some authors would try and some would ignore “it”.</div><br/></div></div><div id="36545583" class="c"><input type="checkbox" id="c-36545583" checked=""/><div class="controls bullet"><span class="by">yawnxyz</span><span>|</span><a href="#36545539">parent</a><span>|</span><a href="#36545811">prev</a><span>|</span><a href="#36545942">next</a><span>|</span><label class="collapse" for="c-36545583">[-]</label><label class="expand" for="c-36545583">[2 more]</label></div><br/><div class="children"><div class="content">Wow that&#x27;s so refreshingly simple. Do you have any recommended &#x2F; official tutorials or cookbooks for this, for web projects?</div><br/><div id="36545653" class="c"><input type="checkbox" id="c-36545653" checked=""/><div class="controls bullet"><span class="by">jonahx</span><span>|</span><a href="#36545539">root</a><span>|</span><a href="#36545583">parent</a><span>|</span><a href="#36545942">next</a><span>|</span><label class="collapse" for="c-36545653">[-]</label><label class="expand" for="c-36545653">[1 more]</label></div><br/><div class="children"><div class="content">As far the library itself goes, the README is all you need to know.  That&#x27;s what&#x27;s great.<p>It does assume familiarity with testing in general (ie, how to design for unit testing, how to write clear tests, etc), but you&#x27;ll need that to use any testing library effectively, and that skill is orthogonal to the library itself.<p>If you&#x27;re looking for resources on that, I recommend:
<a href="https:&#x2F;&#x2F;github.com&#x2F;testdouble&#x2F;contributing-tests&#x2F;wiki&#x2F;London-school-TDD">https:&#x2F;&#x2F;github.com&#x2F;testdouble&#x2F;contributing-tests&#x2F;wiki&#x2F;London...</a></div><br/></div></div></div></div></div></div><div id="36545942" class="c"><input type="checkbox" id="c-36545942" checked=""/><div class="controls bullet"><span class="by">Zetice</span><span>|</span><a href="#36545539">prev</a><span>|</span><a href="#36545721">next</a><span>|</span><label class="collapse" for="c-36545942">[-]</label><label class="expand" for="c-36545942">[3 more]</label></div><br/><div class="children"><div class="content">&gt; This means that the instanceof operator will not work as expected, and it will generate false negatives!<p>But this isn’t a silent failure, so it’s obviously detectable and therefore (if you know why) avoidable.  It’s also so rare that you’d need to read a blog article to even know it was possible.<p>So I’ll keep using jest, because my tests all pass.  When I hit one that doesn’t (and I can’t figure out why) I keep this in mind, but otherwise “not recommended” is overkill.</div><br/><div id="36546185" class="c"><input type="checkbox" id="c-36546185" checked=""/><div class="controls bullet"><span class="by">afro88</span><span>|</span><a href="#36545942">parent</a><span>|</span><a href="#36545721">next</a><span>|</span><label class="collapse" for="c-36546185">[-]</label><label class="expand" for="c-36546185">[2 more]</label></div><br/><div class="children"><div class="content">Except when you test that something is *not* an instance of something else and the test wrongly passes. Then you&#x27;ll be scratching your head trying to fix a bug already in production.</div><br/><div id="36547181" class="c"><input type="checkbox" id="c-36547181" checked=""/><div class="controls bullet"><span class="by">awestroke</span><span>|</span><a href="#36545942">root</a><span>|</span><a href="#36546185">parent</a><span>|</span><a href="#36545721">next</a><span>|</span><label class="collapse" for="c-36547181">[-]</label><label class="expand" for="c-36547181">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve never written such a test assertion in my life. I&#x27;ll be fine with Jest</div><br/></div></div></div></div></div></div><div id="36545721" class="c"><input type="checkbox" id="c-36545721" checked=""/><div class="controls bullet"><span class="by">throway23yjl234</span><span>|</span><a href="#36545942">prev</a><span>|</span><a href="#36546810">next</a><span>|</span><label class="collapse" for="c-36545721">[-]</label><label class="expand" for="c-36545721">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s well-known to use `Array.isArray` instead [0].<p>[0] <a href="https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;JavaScript&#x2F;Reference&#x2F;Global_Objects&#x2F;Array&#x2F;isArray#instanceof_vs._array.isarray" rel="nofollow noreferrer">https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;JavaScript&#x2F;Refe...</a></div><br/></div></div><div id="36546810" class="c"><input type="checkbox" id="c-36546810" checked=""/><div class="controls bullet"><span class="by">locallost</span><span>|</span><a href="#36545721">prev</a><span>|</span><a href="#36545917">next</a><span>|</span><label class="collapse" for="c-36546810">[-]</label><label class="expand" for="c-36546810">[1 more]</label></div><br/><div class="children"><div class="content">One of the reasons I always preferred running tests in real browsers with Karma.</div><br/></div></div><div id="36545917" class="c"><input type="checkbox" id="c-36545917" checked=""/><div class="controls bullet"><span class="by">olliej</span><span>|</span><a href="#36546810">prev</a><span>|</span><label class="collapse" for="c-36545917">[-]</label><label class="expand" for="c-36545917">[1 more]</label></div><br/><div class="children"><div class="content">Oh is this just the multi global issue you have on the web?</div><br/></div></div></div></div></div></div></div></body></html>