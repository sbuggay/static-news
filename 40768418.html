<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1719219674315" as="style"/><link rel="stylesheet" href="styles.css?v=1719219674315"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="http://databasearchitects.blogspot.com/2024/06/b-trees-require-fewer-comparisons-than.html">B-Trees Require Fewer Comparisons Than Balanced Binary Search Trees</a> <span class="domain">(<a href="http://databasearchitects.blogspot.com">databasearchitects.blogspot.com</a>)</span></div><div class="subtext"><span>greghn</span> | <span>15 comments</span></div><br/><div><div id="40772240" class="c"><input type="checkbox" id="c-40772240" checked=""/><div class="controls bullet"><span class="by">shagie</span><span>|</span><a href="#40773249">next</a><span>|</span><label class="collapse" for="c-40772240">[-]</label><label class="expand" for="c-40772240">[10 more]</label></div><br/><div class="children"><div class="content">Long ago, I was taking the sophomore level data structures and algorithms class.  It was being transitioned from C to C++ and being taught by Professor DeWitt.  I have vague memories of linked lists and then binary trees. ... And then we got to the spot where the syllabus from previous years had AVL trees and red black trees... and he scoffed at teaching it.<p>And that I do remember.  I suspect he had been doing lecture planning over the weekend (this was in the &quot;we&#x27;re redoing the class, teach it as it needs to be taught&quot; type mandate) and he had us skip that section of the text.  The fist lecture he was going off of overhead transparencies that he was writing as he lectured.  The second lecture he gave us photocopies of hand written notes and diagrams.<p>Instead of AVL and red black trees, we instead learned about 2-3 trees and B trees.<p>For what it&#x27;s worth, I still know how to do 2-3 trees from scratch.<p>Later I looked at AVL trees... and they <i>still</i> give me a headache.</div><br/><div id="40772407" class="c"><input type="checkbox" id="c-40772407" checked=""/><div class="controls bullet"><span class="by">abhgh</span><span>|</span><a href="#40772240">parent</a><span>|</span><a href="#40772988">next</a><span>|</span><label class="collapse" for="c-40772407">[-]</label><label class="expand" for="c-40772407">[1 more]</label></div><br/><div class="children"><div class="content">Red-black trees use to make me anxious. I think the first time I grasped them was after watching Erik Demaine&#x27;s lecture on the topic. For anyone interested it is this [1]; its still a very good reference on the topic!<p>[1] <a href="https:&#x2F;&#x2F;videolectures.net&#x2F;mit6046jf05_demaine_lec10&#x2F;" rel="nofollow">https:&#x2F;&#x2F;videolectures.net&#x2F;mit6046jf05_demaine_lec10&#x2F;</a></div><br/></div></div><div id="40772988" class="c"><input type="checkbox" id="c-40772988" checked=""/><div class="controls bullet"><span class="by">saghm</span><span>|</span><a href="#40772240">parent</a><span>|</span><a href="#40772407">prev</a><span>|</span><a href="#40772480">next</a><span>|</span><label class="collapse" for="c-40772988">[-]</label><label class="expand" for="c-40772988">[4 more]</label></div><br/><div class="children"><div class="content">&gt; Instead of AVL and red black trees, we instead learned about 2-3 trees and B trees<p>When we first were taught about B trees in my databases course in college, he professor quipped something like &quot;these are the reason you&#x27;ll never actually use a red-black tree in practice&quot;. I&#x27;ve actually found that in practice I rarely ever up actually needing to use any sort of data structure that maintains sort order; for whatever reason, I&#x27;ve run into cases far more often where I need to maintain insertion order than sort order, but I&#x27;m not confident about whether this is due more to the type of stuff I work on or if it&#x27;s just a more common requirement in general.</div><br/><div id="40773411" class="c"><input type="checkbox" id="c-40773411" checked=""/><div class="controls bullet"><span class="by">jeffparsons</span><span>|</span><a href="#40772240">root</a><span>|</span><a href="#40772988">parent</a><span>|</span><a href="#40773416">next</a><span>|</span><label class="collapse" for="c-40773411">[-]</label><label class="expand" for="c-40773411">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I&#x27;ve run into cases far more often where I need to maintain insertion order than sort order, but I&#x27;m not confident about whether this is due more to the type of stuff I work on or if it&#x27;s just a more common requirement in general.<p>I&#x27;ve had the exact opposite experience, so I&#x27;m guessing it has a lot to do with the type of stuff you&#x27;ve (and I&#x27;ve) worked on.</div><br/></div></div><div id="40773416" class="c"><input type="checkbox" id="c-40773416" checked=""/><div class="controls bullet"><span class="by">kristopolous</span><span>|</span><a href="#40772240">root</a><span>|</span><a href="#40772988">parent</a><span>|</span><a href="#40773411">prev</a><span>|</span><a href="#40773318">next</a><span>|</span><label class="collapse" for="c-40773416">[-]</label><label class="expand" for="c-40773416">[1 more]</label></div><br/><div class="children"><div class="content">Honestly for me it&#x27;s either linear search, dictionary, or external store like database and that&#x27;s actually it.<p>I think I&#x27;ve had to implement my own traversable data structure literally only in interviews</div><br/></div></div><div id="40773318" class="c"><input type="checkbox" id="c-40773318" checked=""/><div class="controls bullet"><span class="by">globular-toast</span><span>|</span><a href="#40772240">root</a><span>|</span><a href="#40772988">parent</a><span>|</span><a href="#40773416">prev</a><span>|</span><a href="#40772480">next</a><span>|</span><label class="collapse" for="c-40773318">[-]</label><label class="expand" for="c-40773318">[1 more]</label></div><br/><div class="children"><div class="content">They&#x27;re not about maintaining sort order, though? They&#x27;re about arbitrary lookup. Or do you mean &quot;if I had to pick one nice side effect&quot;?</div><br/></div></div></div></div><div id="40772480" class="c"><input type="checkbox" id="c-40772480" checked=""/><div class="controls bullet"><span class="by">teruakohatu</span><span>|</span><a href="#40772240">parent</a><span>|</span><a href="#40772988">prev</a><span>|</span><a href="#40772710">next</a><span>|</span><label class="collapse" for="c-40772480">[-]</label><label class="expand" for="c-40772480">[2 more]</label></div><br/><div class="children"><div class="content">I feel there must be better ways of learning the principles of algorithms than balancing trees. I suffered through RB trees.</div><br/><div id="40772879" class="c"><input type="checkbox" id="c-40772879" checked=""/><div class="controls bullet"><span class="by">082349872349872</span><span>|</span><a href="#40772240">root</a><span>|</span><a href="#40772480">parent</a><span>|</span><a href="#40772710">next</a><span>|</span><label class="collapse" for="c-40772879">[-]</label><label class="expand" for="c-40772879">[1 more]</label></div><br/><div class="children"><div class="content">There are two fundamental things to teach in an algorithms course:<p>1) that there are many programs that implement the same algorithm, and many algorithms that implement the same function.<p>2) that there are a few basic tradeoffs we can make when implementing a function&#x2F;customising an algorithm: space vs time, read vs write, deterministic vs indeterministic, etc.<p>I&#x27;d guess trees have traditionally been used, because there&#x27;s a whole zoo of them, which clearly presents (1) and allows (2) to be learned (in &quot;cookbook&quot; style) even if they&#x27;re never explicitly presented (in &quot;textbook&quot; style).</div><br/></div></div></div></div><div id="40772710" class="c"><input type="checkbox" id="c-40772710" checked=""/><div class="controls bullet"><span class="by">slaymaker1907</span><span>|</span><a href="#40772240">parent</a><span>|</span><a href="#40772480">prev</a><span>|</span><a href="#40773000">next</a><span>|</span><label class="collapse" for="c-40772710">[-]</label><label class="expand" for="c-40772710">[1 more]</label></div><br/><div class="children"><div class="content">B-trees are definitely more useful, but I don’t think they’re really a good idea to start out with as your first balanced tree.</div><br/></div></div><div id="40773000" class="c"><input type="checkbox" id="c-40773000" checked=""/><div class="controls bullet"><span class="by">29athrowaway</span><span>|</span><a href="#40772240">parent</a><span>|</span><a href="#40772710">prev</a><span>|</span><a href="#40773249">next</a><span>|</span><label class="collapse" for="c-40773000">[-]</label><label class="expand" for="c-40773000">[1 more]</label></div><br/><div class="children"><div class="content">Left leaning red black trees are simpler to implement than the regular red black tree.</div><br/></div></div></div></div><div id="40773249" class="c"><input type="checkbox" id="c-40773249" checked=""/><div class="controls bullet"><span class="by">masklinn</span><span>|</span><a href="#40772240">prev</a><span>|</span><a href="#40773575">next</a><span>|</span><label class="collapse" for="c-40773249">[-]</label><label class="expand" for="c-40773249">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Practical B-trees often use fairly large values of k (e.g., 100) and therefore offer tight bounds -- in addition to being more cache-friendly than binary search trees.<p>That is true on-disk, where you would not use BSTs anyway. In-memory, mid to high single digit values are practical. For instance iirc Rust’s btree (map and set) uses something like k=6.</div><br/></div></div><div id="40773575" class="c"><input type="checkbox" id="c-40773575" checked=""/><div class="controls bullet"><span class="by">rtheunissen</span><span>|</span><a href="#40773249">prev</a><span>|</span><a href="#40772599">next</a><span>|</span><label class="collapse" for="c-40773575">[-]</label><label class="expand" for="c-40773575">[1 more]</label></div><br/><div class="children"><div class="content">That does not mean that b-trees are unequivocally better than binary search trees. There are some applications, like concurrency or persistence, where comparison count is not as important.<p>For instance, fewer values per node means less information to copy when copying the node. Locking is more granular with fewer values per node because fewer values are locked at a time.<p>The binary structure also makes it possible to support randomized balancing and self-adjusting strategies like splay trees.<p>I am disappointed to still see frequent mention of red-black trees –  I see no reason for red-black trees to ever be the best choice in practice, or in theory, or in school. LBST&#x27;s (logarithmic binary search trees) [1] are generally simpler, more intuitive, and more efficient [2] than red-black trees. They also support positional access inherently, so the balancing information is useful (subtree size).<p>[1] <a href="https:&#x2F;&#x2F;www.semanticscholar.org&#x2F;paper&#x2F;A-New-Method-for-Balancing-Binary-Search-Trees-Roura&#x2F;f50d33d56a11b6c3423cf003d13f717d137d1154" rel="nofollow">https:&#x2F;&#x2F;www.semanticscholar.org&#x2F;paper&#x2F;A-New-Method-for-Balan...</a>
[2] <a href="https:&#x2F;&#x2F;rtheunissen.github.io&#x2F;bst" rel="nofollow">https:&#x2F;&#x2F;rtheunissen.github.io&#x2F;bst</a></div><br/></div></div><div id="40772599" class="c"><input type="checkbox" id="c-40772599" checked=""/><div class="controls bullet"><span class="by">cperciva</span><span>|</span><a href="#40773575">prev</a><span>|</span><label class="collapse" for="c-40772599">[-]</label><label class="expand" for="c-40772599">[2 more]</label></div><br/><div class="children"><div class="content">In a sense, red-black and 2-3 trees are just a special case of B-trees with small nodes.  Smaller B-tree nodes have (by a constant factor) more expensive searching than larger nodes; but smaller nodes are more efficient for mutating operations.  And indeed, if you have an insert&#x2F;delete heavy workload you can&#x27;t beat something like a red-black tree.</div><br/><div id="40772865" class="c"><input type="checkbox" id="c-40772865" checked=""/><div class="controls bullet"><span class="by">anonymoushn</span><span>|</span><a href="#40772599">parent</a><span>|</span><label class="collapse" for="c-40772865">[-]</label><label class="expand" for="c-40772865">[1 more]</label></div><br/><div class="children"><div class="content">This sounds surprising, unless you mean specifically a workload where a bunch of inserts and deletes are made using a stored cursor, so that they don&#x27;t need to follow a bunch of pointers from the root.</div><br/></div></div></div></div></div></div></div></div></div></body></html>