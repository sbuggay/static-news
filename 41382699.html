<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1724922069026" as="style"/><link rel="stylesheet" href="styles.css?v=1724922069026"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.dolthub.com/blog/2024-08-23-the-4-chan-go-programmer/">The 4-chan Go programmer</a> <span class="domain">(<a href="https://www.dolthub.com">www.dolthub.com</a>)</span></div><div class="subtext"><span>ingve</span> | <span>132 comments</span></div><br/><div><div id="41383482" class="c"><input type="checkbox" id="c-41383482" checked=""/><div class="controls bullet"><span class="by">UniverseHacker</span><span>|</span><a href="#41388604">next</a><span>|</span><label class="collapse" for="c-41383482">[-]</label><label class="expand" for="c-41383482">[84 more]</label></div><br/><div class="children"><div class="content">As a scientist that ends up working closely with actual professional software engineers... lots of the stuff they do looks like this do me, and I can&#x27;t for the life of me make sense of why you&#x27;d do it.<p>I have seen a single line of code passed through 4 &quot;interface functions&quot; before it is called that call each other sequentially, and are of course in separate files in separate folders.<p>It makes reading the code to figure out what it does exhausting, and a few levels in you start to wonder if you&#x27;re even looking at the right area, and if it will ever get to the part where it actually computes something.</div><br/><div id="41383835" class="c"><input type="checkbox" id="c-41383835" checked=""/><div class="controls bullet"><span class="by">weitendorf</span><span>|</span><a href="#41383482">parent</a><span>|</span><a href="#41384158">next</a><span>|</span><label class="collapse" for="c-41383835">[-]</label><label class="expand" for="c-41383835">[25 more]</label></div><br/><div class="children"><div class="content">This is actually really bad practice and a very “over eager junior engineer” way of writing software. You’re not off base at all that it seems excessive and confusing. It’s the kind of thing that seems technically complex and maybe even “elegant” (in isolation, when you first write the “interesting” code) at first but becomes a technical nightmare when used in real software that has to grow around and with it. You’re actually more on point in worrying about the understandability and debuggability this introduces.<p>I spent the better part of two years unfucking some Go software that (among other things) misused channels. The problem with channels is that you rarely actually need them, but <i>can</i> use them for a lot of different things without too much initial difficulty.<p>I think a good litmus test for proper use of channels is if you answer no to “could this be done with a direct function call instead?” and “can I use a wait group or mutex instead”, and yes to (zooming out a bit to think about what kind of decisions you previously made that led you to think about using channels) “am I really benefitting from concurrency&#x2F;parallelism enough to justify the technical complexity of debugging concurrent code”.</div><br/><div id="41384856" class="c"><input type="checkbox" id="c-41384856" checked=""/><div class="controls bullet"><span class="by">SomeCallMeTim</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383835">parent</a><span>|</span><a href="#41385626">next</a><span>|</span><label class="collapse" for="c-41384856">[-]</label><label class="expand" for="c-41384856">[7 more]</label></div><br/><div class="children"><div class="content">I saw some code in a job I was just starting where they had added several abstractions that I found...confusing.<p>After taking an extra long time to understand what the code actually did, I realized that some junior engineer had been using some design pattern they didn&#x27;t really understand, and that added zero actual value to the routine.<p>After deleting all of that code and refactoring it to use completely different abstractions, everything was suddenly much easier to read and to extend.<p>Design is a hard skill to learn, and junior developers profoundly haven&#x27;t learned that skill yet. But that&#x27;s what we need to teach them as senior engineers, right?<p>Not that I could teach the author of the code I changed, since I think it was written by an intern that no longer worked for the company. But you do what you can.</div><br/><div id="41387331" class="c"><input type="checkbox" id="c-41387331" checked=""/><div class="controls bullet"><span class="by">DaiPlusPlus</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41384856">parent</a><span>|</span><a href="#41384992">next</a><span>|</span><label class="collapse" for="c-41387331">[-]</label><label class="expand" for="c-41387331">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I realized that some junior engineer had been using some design pattern they didn&#x27;t really understand, and that added zero actual value to the routine.<p>£3.50p says it was the Generic Repository pattern implemented over Entity Framework dbContext, right?<p>--------<p>Speaking of design-patterns, I subscribe to the opinon that _Design-patterns are idioms to work-around missing features in your programmign language_, which explains why Java has no end of them, and why us jaded folk find happiness in modern languages that adopt more multi-paradigm and FP (the post-Java cool-kids&#x27; club: Kotlin, Rust, Swift, TypeScript, (can C# join?)) - so my hope is that eventually we&#x27;ll have a cohort of fresh-faced CS grads entering industry who only know-of Facades&#x2F;Decorator&#x2F;Adapter as something a language designer does to spite their users because any reasonable compiler should handle interface-mapping for you - and the Visitor-pattern as a great way to get RSI.</div><br/></div></div><div id="41384992" class="c"><input type="checkbox" id="c-41384992" checked=""/><div class="controls bullet"><span class="by">RandomWorker</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41384856">parent</a><span>|</span><a href="#41387331">prev</a><span>|</span><a href="#41386208">next</a><span>|</span><label class="collapse" for="c-41384992">[-]</label><label class="expand" for="c-41384992">[3 more]</label></div><br/><div class="children"><div class="content">There is also the fact it’s much easier to write something when you know where you are going. When you start you often just make lots of items general in nature to improve later on.</div><br/><div id="41385895" class="c"><input type="checkbox" id="c-41385895" checked=""/><div class="controls bullet"><span class="by">SonOfLilit</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41384992">parent</a><span>|</span><a href="#41386208">next</a><span>|</span><label class="collapse" for="c-41385895">[-]</label><label class="expand" for="c-41385895">[2 more]</label></div><br/><div class="children"><div class="content">I mean... some do, some don&#x27;t. With experience comes appreciation for simplicity and flexibility.</div><br/><div id="41386232" class="c"><input type="checkbox" id="c-41386232" checked=""/><div class="controls bullet"><span class="by">vram22</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41385895">parent</a><span>|</span><a href="#41386208">next</a><span>|</span><label class="collapse" for="c-41386232">[-]</label><label class="expand" for="c-41386232">[1 more]</label></div><br/><div class="children"><div class="content">yep. good judgment comes from experience. experience comes from bad judgment.</div><br/></div></div></div></div></div></div><div id="41386208" class="c"><input type="checkbox" id="c-41386208" checked=""/><div class="controls bullet"><span class="by">cqqxo4zV46cp</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41384856">parent</a><span>|</span><a href="#41384992">prev</a><span>|</span><a href="#41385626">next</a><span>|</span><label class="collapse" for="c-41386208">[-]</label><label class="expand" for="c-41386208">[2 more]</label></div><br/><div class="children"><div class="content">As someone in leadership, my ‘strong opinion held loosely’ on this, is that there’s absolutely no way to meaningfully build this skill in people, in a theoretical setting.<p>You can, at best, make them aware that there is such thing as “too much”, and “the right tool for the job”, and keep reminding them.<p>But nothing, nothing, comes remotely close to the real-world experience of needing to work with over-engineered spaghetti, and getting frustrated by it. Especially if it’s code that you wrote 6 months prior.<p>Juniors will always do this. It’ll always be the senior’s job to…let it happen, so the junior learns, but to still reduce the blast radius to a manageable amount, and, at the right moment, nudge the junior toward seeing the errors in their ways.</div><br/><div id="41388104" class="c"><input type="checkbox" id="c-41388104" checked=""/><div class="controls bullet"><span class="by">carlmr</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41386208">parent</a><span>|</span><a href="#41385626">next</a><span>|</span><label class="collapse" for="c-41388104">[-]</label><label class="expand" for="c-41388104">[1 more]</label></div><br/><div class="children"><div class="content">&gt;nudge the junior toward seeing the errors in their ways.<p>At least plant a seed of doubt early on.</div><br/></div></div></div></div></div></div><div id="41385626" class="c"><input type="checkbox" id="c-41385626" checked=""/><div class="controls bullet"><span class="by">Terr_</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383835">parent</a><span>|</span><a href="#41384856">prev</a><span>|</span><a href="#41383985">next</a><span>|</span><label class="collapse" for="c-41385626">[-]</label><label class="expand" for="c-41385626">[1 more]</label></div><br/><div class="children"><div class="content">&gt; This is actually really bad practice and a very “over eager junior engineer” way of writing software.<p>To recycle a brief analysis [0] of my own youthful mistakes:<p>&gt; I used to think I could make a wonderful work of art which everyone will appreciate for the ages, crafted so that every contingency is planned for, every need met... But nobody predicts future needs that well. Someday whatever I make is going to be That Stupid Thing to somebody, and they&#x27;re going to be justified demolishing the whole mess, no matter how proud I may feel about it now.<p>&gt; So instead, put effort into making it easy to <i>remove</i>. This often ends up reducing coupling, but--crucially--it&#x27;s not the same as some enthusiastic young developer trying to decouple all the things through a meta-configurable framework. Sometimes a tight coupling is better when it&#x27;s easier to reason about. [...]<p>[0] <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41219130">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41219130</a></div><br/></div></div><div id="41383985" class="c"><input type="checkbox" id="c-41383985" checked=""/><div class="controls bullet"><span class="by">zachmu</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383835">parent</a><span>|</span><a href="#41385626">prev</a><span>|</span><a href="#41386057">next</a><span>|</span><label class="collapse" for="c-41383985">[-]</label><label class="expand" for="c-41383985">[8 more]</label></div><br/><div class="children"><div class="content">when I was learning Go, I read a guide that told you to fire off a goroutine to walk a tree and send the values back to the main goroutine via a channel. I think about that &quot;just an example&quot; guide a lot when I see bad channel code.<p>For me the biggest red flag is somebody using a channel as part of an exported library function signature, either as a param or a return value. Almost never the right call.</div><br/><div id="41388183" class="c"><input type="checkbox" id="c-41388183" checked=""/><div class="controls bullet"><span class="by">lelanthran</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383985">parent</a><span>|</span><a href="#41384539">next</a><span>|</span><label class="collapse" for="c-41388183">[-]</label><label class="expand" for="c-41388183">[1 more]</label></div><br/><div class="children"><div class="content">&gt; when I was learning Go, I read a guide that told you to fire off a goroutine to walk a tree and send the values back to the main goroutine via a channel.<p>Okay, I gotta ask - what exactly is wrong with this approach? Unless you&#x27;re starting only a single goroutine[1], this seems to me like a reasonable approach.<p>Think about recursively finding all files in a directory that match a particular filter, and then performing some action on the matches. It&#x27;s better to start a goroutine that sends each match to the caller via a channel so that as each file is found the caller can process them <i>while the searcher is still finding more matches</i>.<p>The alternatives are:<p>1. No async searching, the tree-walker simply collects all the results into a list, and returns the one big list when it is done, at which point the caller will start processing the list.<p>2. Depending on which language you are using, maybe have actual coroutines, so that the caller can re-call the callee continuously until it gets no result, while the callee can call `yield(result)` for each result.<p>Both of those seem like poor choices in Go.<p>[1] And even then, there are some cases where you&#x27;d actually want the tree-walking to be asynchronous, so starting a single goroutine so you can do other stuff while talking the tree is a reasonable approach.</div><br/></div></div><div id="41384539" class="c"><input type="checkbox" id="c-41384539" checked=""/><div class="controls bullet"><span class="by">lanstin</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383985">parent</a><span>|</span><a href="#41388183">prev</a><span>|</span><a href="#41387312">next</a><span>|</span><label class="collapse" for="c-41384539">[-]</label><label class="expand" for="c-41384539">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve used that pattern to write tools to e.g. re-encrypt all whatever millions of objects in an S3 bucket, and examine 400m files for jars that are or contain the log4j vulnerable code.  I had a large machine near the bucket&#x2F;NFS filer in question, and wanted to use all the CPUs. It worked well for that purpose.  The API is you provide callbacks for each depth of the tree, and that callback was given an array of channels and some current object to examine; your CB would figure out if that object (could be S3 path, object, version, directory, file, jar inside a jar, whatever) met the criteria for whatever action at hand, or if it generated more objects for the tree. I was able to do stuff in like 8 hours when AWS support was promising 10 days.  And deleted the bad log4j jar few times a day while we tracked down the repos&#x2F;code still putting it back on the NFS filer.<p>The library is called &quot;go-treewalk&quot; :) The data of course never ends back in main, it&#x27;s for doing things or maybe printing out data, not doing more calcualation across the tree.</div><br/></div></div><div id="41387312" class="c"><input type="checkbox" id="c-41387312" checked=""/><div class="controls bullet"><span class="by">Kamq</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383985">parent</a><span>|</span><a href="#41384539">prev</a><span>|</span><a href="#41385644">next</a><span>|</span><label class="collapse" for="c-41387312">[-]</label><label class="expand" for="c-41387312">[3 more]</label></div><br/><div class="children"><div class="content">The only time I&#x27;ve seen it work with channels in the API is when it&#x27;s something you&#x27;d realistically want to be async (say, some sort of heavy computation, network request, etc). The kind of thing that would probably already be a future&#x2F;promise&#x2F;etc in other languages.<p>And it doesn&#x27;t really color the function because you can trivially make it sync again.</div><br/><div id="41388002" class="c"><input type="checkbox" id="c-41388002" checked=""/><div class="controls bullet"><span class="by">beautron</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41387312">parent</a><span>|</span><a href="#41388192">next</a><span>|</span><label class="collapse" for="c-41388002">[-]</label><label class="expand" for="c-41388002">[1 more]</label></div><br/><div class="children"><div class="content">&gt; And it doesn&#x27;t really color the function because you can trivially make it sync again.<p>Yes, but this goes both ways: You can trivially make the sync function async (assuming it&#x27;s documented as safe for concurrent use).<p>So I would argue that the sync API design is simpler and more natural. Callers can easily set up their own goroutine and channels around the function call if they need or want that. But if they don&#x27;t need or want that, everything is simpler and they don&#x27;t even need to think about channels.</div><br/></div></div><div id="41388192" class="c"><input type="checkbox" id="c-41388192" checked=""/><div class="controls bullet"><span class="by">lelanthran</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41387312">parent</a><span>|</span><a href="#41388002">prev</a><span>|</span><a href="#41385644">next</a><span>|</span><label class="collapse" for="c-41388192">[-]</label><label class="expand" for="c-41388192">[1 more]</label></div><br/><div class="children"><div class="content">&gt; The kind of thing that would probably already be a future&#x2F;promise&#x2F;etc in other languages.<p>Or a coroutine (caller calls `yield(item)` for each match, and `return` when done).</div><br/></div></div></div></div><div id="41385644" class="c"><input type="checkbox" id="c-41385644" checked=""/><div class="controls bullet"><span class="by">Filligree</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383985">parent</a><span>|</span><a href="#41387312">prev</a><span>|</span><a href="#41386057">next</a><span>|</span><label class="collapse" for="c-41385644">[-]</label><label class="expand" for="c-41385644">[2 more]</label></div><br/><div class="children"><div class="content">At the time, that was one of the only ways to write decent-looking generic code.</div><br/></div></div></div></div><div id="41386057" class="c"><input type="checkbox" id="c-41386057" checked=""/><div class="controls bullet"><span class="by">distortionfield</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383835">parent</a><span>|</span><a href="#41383985">prev</a><span>|</span><a href="#41386161">next</a><span>|</span><label class="collapse" for="c-41386057">[-]</label><label class="expand" for="c-41386057">[5 more]</label></div><br/><div class="children"><div class="content">I get your point, but a wait group or a mutex can be removed in favor of a clean usage of channels if the proper concerns are isolated at first. And I would personally much rather reason about channels than mutexes and wait groups. Wait groups and mutexes are just begging for deadlocks and race conditions, where a proper channel, used correctly, eliminates both of those by design.</div><br/><div id="41386387" class="c"><input type="checkbox" id="c-41386387" checked=""/><div class="controls bullet"><span class="by">weitendorf</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41386057">parent</a><span>|</span><a href="#41386161">next</a><span>|</span><label class="collapse" for="c-41386387">[-]</label><label class="expand" for="c-41386387">[4 more]</label></div><br/><div class="children"><div class="content">&gt; Wait groups and mutexes are just begging for deadlocks and race conditions, where a proper channel, used correctly, eliminates both of those by design.<p>By that same logic, if you just use wait groups and mutexes correctly, you should also not worry about deadlocks and race conditions. It&#x27;s also quite trivial to introduce a deadlock with a channel.<p>Regardless, channels are basically a more expressive&#x2F;flexible type than mutexes, waitgroups, and function calling, but in the same family as all of them. You can implement any of those rather trivially with a channel, but there are things you can do with a channel that are quite complex or impossible to implement using those. Such a flexible tool allows you to start doing things that are &quot;easy&quot; to implement yet poor design decisions. For example, instead of direct function calling you can now start passing data over channels, which &quot;works&quot; just as well except it incurs some scheduling overhead (not always a concern depending on how perf sensitive you are), makes debugging and interpreting stack traces more difficult (increasingly so as the logic on both sides of the channel increases over time), and allows the software to start evolving in an unintended way (specifically into an overly complex Actor model with tons of message-passing that is impossible to untangle, rather than a directed tree of direct function calling). Or you have a hard time understanding the state and properties of a piece of data throughout the program lifetime because it doesn&#x27;t &quot;belong&quot; anywhere in particular.<p>---<p>Something I thought about recently: perhaps the biggest balancing act in software is between specificity and expressiveness. To solve a problem you might be able to find something that is perfectly tailored to your needs where you just click something or run something and your problem is solved, but it&#x27;s highly likely that it will only solve that specific problem and not others ones. Alternatively, a lot of software (like Jira, SAP, many enterprise software) is highly configurable and expressive but requires a lot of effort to set up and may not be particularly good at solving your specific task. At its most extreme, you could technically call a computer containing only a brainfuck compiler and basic text editor as being able to solve any problem solvable by a computer, because it&#x27;s a programmable turing machine.<p>This extends even into the weeds of programming, especially when you&#x27;re working on software with other people or over long periods of time, where you might struggle to enforce or maintain your particular mental model for how the software should work. When faced with implementing something with an expressive approach vs a specific one, you want to be expressive enough to be able to modify the code later to do things you plan to do or think you have a high probability of doing, but you want to be specific enough that the purpose and function of something (be it a library, class, binary, or entire distributed software system) is clear - if it isn&#x27;t clear, the people using it will struggle with it or avoid it, and the people working on it will start taking it in a direction you didn&#x27;t intend.<p>Channels are the type of thing that are expressive enough to be broadly applicable, but are easily misinterpreted (you might be using them to implement parallelism, but your coworker Bob might think you&#x27;re using them because you want to design your software under a message-passing actor model) and easily misused. They also make it very, very easy to &quot;code yourself into a corner&quot; by introducing inscrutable logical&#x2F;data paths that can&#x27;t be untangled. You might be able to use them safely in lieu of a mutex but it only takes one Bob to start taking them in the direction of unmaintainability. And sometimes you might be that Bob without knowing it. That&#x27;s why I think it&#x27;s best to avoid them unless your other options are even worse.</div><br/><div id="41387076" class="c"><input type="checkbox" id="c-41387076" checked=""/><div class="controls bullet"><span class="by">Groxx</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41386387">parent</a><span>|</span><a href="#41386452">next</a><span>|</span><label class="collapse" for="c-41387076">[-]</label><label class="expand" for="c-41387076">[1 more]</label></div><br/><div class="children"><div class="content">Using channels where mutexes would suffice has <i>by far</i> been the main cause of bad concurrent code I&#x27;ve encountered.<p>Using more than 2 &#x27;semantic&#x27; channels plus one ctx.Done() channel?  There&#x27;s probably a bug.  So far that has been well over 50% accurate, across dozens of libraries.<p>When they&#x27;re used like this, chans often break into non-blocking algorithm details, because they don&#x27;t ensure mutual exclusion.  And non-blocking algorithms are <i>freakin hard</i> - few things are guaranteed without great care.</div><br/></div></div><div id="41386452" class="c"><input type="checkbox" id="c-41386452" checked=""/><div class="controls bullet"><span class="by">distortionfield</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41386387">parent</a><span>|</span><a href="#41387076">prev</a><span>|</span><a href="#41387254">next</a><span>|</span><label class="collapse" for="c-41386452">[-]</label><label class="expand" for="c-41386452">[1 more]</label></div><br/><div class="children"><div class="content">&gt; By that same logic, if you just use wait groups and mutexes correctly, you should also not worry about deadlocks and race conditions.<p>I agree with most everything else you said - especially about software being a trade off between specificity and expressiveness - but I can’t agree with this.<p>The problem being that a mutex can hide things that a channel can’t. Channels will always give you what you expect, but that is not the case for mutexes or wait groups or error groups or whatever.<p>Honestly, the older I get, the more I understand that joke about “you must be this tall to write concurrent programs” and the mark is at the ceiling.</div><br/></div></div><div id="41387254" class="c"><input type="checkbox" id="c-41387254" checked=""/><div class="controls bullet"><span class="by">YZF</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41386387">parent</a><span>|</span><a href="#41386452">prev</a><span>|</span><a href="#41386161">next</a><span>|</span><label class="collapse" for="c-41387254">[-]</label><label class="expand" for="c-41387254">[1 more]</label></div><br/><div class="children"><div class="content">&quot;Do not communicate by sharing memory; instead, share memory by communicating.&quot; - <a href="https:&#x2F;&#x2F;go.dev&#x2F;blog&#x2F;codelab-share" rel="nofollow">https:&#x2F;&#x2F;go.dev&#x2F;blog&#x2F;codelab-share</a><p>Wait groups are preferred to channels for the purposes they serve. Mostly waiting for goroutines to finish. You can use a channel but wait groups are much cleaner.<p>Mutexes for shared memory are less preferred than channels. There are always exceptions.<p>But yeah, if all you have is a hammer then everything looks like a nail. Go has mutexes and wait groups and channels and all of these have their right place and use case. If you&#x27;re using mutexes to effectively re-implement what channels support then you&#x27;re doing it wrong. If you&#x27;re using channels for something that can be a function call then you&#x27;re also doing it wrong. Software is hard.</div><br/></div></div></div></div></div></div><div id="41386161" class="c"><input type="checkbox" id="c-41386161" checked=""/><div class="controls bullet"><span class="by">cqqxo4zV46cp</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383835">parent</a><span>|</span><a href="#41386057">prev</a><span>|</span><a href="#41384158">next</a><span>|</span><label class="collapse" for="c-41386161">[-]</label><label class="expand" for="c-41386161">[3 more]</label></div><br/><div class="children"><div class="content">Back at uni, we had a 200-level ‘software engineering’ unit, largely introducing everyone to a variety of ‘patterns’. Reading the Gang of Four book, blah blah blah. You get the idea.<p>Our final assignment for this unit was to build a piece of software, following some provided specification, and to write some supplementary document justifying the patterns that we used.
 A mature-aged student that had a little bit of industry experience under his belt didn’t use a single pattern we learned about the entire semester. His code was much more simple as a result. He put less effort in, even when taking into account his prior experience. His justifying documentation simply said something to the effect of “when considering the overall complexity of this problem, and the circumstances under which this software is being written, I don’t see any net benefit to using any of the patterns we learned about”.<p>He got full marks. Not in a “I tricked the lecturer!” way. I was, and still am, a massive fan of the academic that ran the unit. The feedback the student received was very much “you are 100% correct, at the end of the day, I couldn’t come up with an assignment that didn’t involve an unreasonable amount of work and ALSO enough complexity to ever truly justify doing any of the stuff I’ve taught you”.
All these years later, I still tell this story to my team. I think it’s such a compelling illustration of “everything in moderation”, and it’s fun enough to stick with people.</div><br/><div id="41387659" class="c"><input type="checkbox" id="c-41387659" checked=""/><div class="controls bullet"><span class="by">bionsystem</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41386161">parent</a><span>|</span><a href="#41388164">next</a><span>|</span><label class="collapse" for="c-41387659">[-]</label><label class="expand" for="c-41387659">[1 more]</label></div><br/><div class="children"><div class="content">So Grug was right all this time ?<p>Joke apart this is a really interesting example. In a job interview I&#x27;ve been asked once if I ever regretted something I did and I couldn&#x27;t quite word it on the spot, but definitely my first project included extra complexity just so that it &quot;looked good&quot; and in the end would have been more reliable had I kept it simple.</div><br/></div></div><div id="41388164" class="c"><input type="checkbox" id="c-41388164" checked=""/><div class="controls bullet"><span class="by">cutemonster</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41386161">parent</a><span>|</span><a href="#41387659">prev</a><span>|</span><a href="#41384158">next</a><span>|</span><label class="collapse" for="c-41388164">[-]</label><label class="expand" for="c-41388164">[1 more]</label></div><br/><div class="children"><div class="content">Nice with such teachers :-) What&#x27;s a 200 level unit? It means it&#x27;s &quot;very advanced&quot;?</div><br/></div></div></div></div></div></div><div id="41384158" class="c"><input type="checkbox" id="c-41384158" checked=""/><div class="controls bullet"><span class="by">yarg</span><span>|</span><a href="#41383482">parent</a><span>|</span><a href="#41383835">prev</a><span>|</span><a href="#41383771">next</a><span>|</span><label class="collapse" for="c-41384158">[-]</label><label class="expand" for="c-41384158">[8 more]</label></div><br/><div class="children"><div class="content">It gets worse (this isn&#x27;t too much of an exaggeration): <a href="https:&#x2F;&#x2F;github.com&#x2F;EnterpriseQualityCoding&#x2F;FizzBuzzEnterpriseEdition">https:&#x2F;&#x2F;github.com&#x2F;EnterpriseQualityCoding&#x2F;FizzBuzzEnterpris...</a>.<p>Sometimes there&#x27;s a scary lack of understanding and competency where you&#x27;d expect to find it.<p>As an undergrad, I once spent about half an hour peer programming with a computer science PhD - it was enlightening.<p>He didn&#x27;t have the slightest understanding of software - calling me out for things like  not checking that the size of a (standard library) data structure wasn&#x27;t negative.<p>But other times these things are done for a reason; sometimes it&#x27;s actually sane and sometimes it&#x27;s just a way to deal with the lunacy of a codebase forged by the madmen who came before you.</div><br/><div id="41384540" class="c"><input type="checkbox" id="c-41384540" checked=""/><div class="controls bullet"><span class="by">Dansvidania</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41384158">parent</a><span>|</span><a href="#41385364">next</a><span>|</span><label class="collapse" for="c-41384540">[-]</label><label class="expand" for="c-41384540">[6 more]</label></div><br/><div class="children"><div class="content">the fizzbuzz repo hurt. It is oh so true though.<p>I often wonder if, unbeknownst to me, I am writing similarly over-complicated software. People seem to be unable to tell, so I doubt I can either. It makes me second-guess my code a lot.<p>Is there any reliable&#x2F;objective&#x2F;quantitative way to evaluate such a thing? The repo is a great example of what not to do, but it&#x27;s so extreme it&#x27;s hardly useful in practice.. (nor it should care to be..as a joke)</div><br/><div id="41385101" class="c"><input type="checkbox" id="c-41385101" checked=""/><div class="controls bullet"><span class="by">yarg</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41384540">parent</a><span>|</span><a href="#41385686">next</a><span>|</span><label class="collapse" for="c-41385101">[-]</label><label class="expand" for="c-41385101">[1 more]</label></div><br/><div class="children"><div class="content">I think it&#x27;s circumstantial - do your abstractions make it easier or harder to implement and integrate the sort of features that the application generally requires?<p>There&#x27;s sometimes significant use in having some powerful abstractions in place to allow for code reuse and application customisation - but all too often people build fortresses of functionality with no idea how or if it&#x27;s ever going to be used.<p>Foresight is useful here; if you can look at new features and break them up into feature specific business logic and generalisable application logic, then similar features can be cleanly integrated with less work in the future.<p>Sometimes however, the level of customisability far exceeds what is strictly necessary; the complexities involved no longer help, but rather hinder - not only understanding, but feature implementation and integration as well.</div><br/></div></div><div id="41385686" class="c"><input type="checkbox" id="c-41385686" checked=""/><div class="controls bullet"><span class="by">Terr_</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41384540">parent</a><span>|</span><a href="#41385101">prev</a><span>|</span><a href="#41385609">next</a><span>|</span><label class="collapse" for="c-41385686">[-]</label><label class="expand" for="c-41385686">[1 more]</label></div><br/><div class="children"><div class="content">IMO the question hinges on stakeholder-dynamics and future-predictions of where the software will go, and both of those inputs are highly subjective so the result will also be subjective.<p>A simple example would be the difference between code consumed by an in-house application managed by a single team, versus code in an open-source utility library used by 50+ companies.<p>In the first case, extra layers of indirection tend to have bad cost&#x2F;benefit tradeoffs, particularly if your programming stack makes automatic refactoring fast and safe.<p>In the second case, layers of indirection are basically required for backwards-compatibility, because you can&#x27;t just &quot;fix the caller&#x27;s code&quot; or have a hard-break as conditions change.</div><br/></div></div><div id="41385609" class="c"><input type="checkbox" id="c-41385609" checked=""/><div class="controls bullet"><span class="by">p1necone</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41384540">parent</a><span>|</span><a href="#41385686">prev</a><span>|</span><a href="#41385004">next</a><span>|</span><label class="collapse" for="c-41385609">[-]</label><label class="expand" for="c-41385609">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I often wonder if, unbeknownst to me, I am writing similarly over-complicated software.<p>If you want to know, and you have a project that you can do this with - pick a reasonably complex project, back it up, don&#x27;t touch it for a year. Can you work out what the hell is going on? If yes - you&#x27;re probably doing ok.</div><br/></div></div><div id="41385004" class="c"><input type="checkbox" id="c-41385004" checked=""/><div class="controls bullet"><span class="by">devjab</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41384540">parent</a><span>|</span><a href="#41385609">prev</a><span>|</span><a href="#41384562">next</a><span>|</span><label class="collapse" for="c-41385004">[-]</label><label class="expand" for="c-41385004">[1 more]</label></div><br/><div class="children"><div class="content">If you have abstractions that you weren’t forced to make after exhausting every other option then you can improve your code. If you begrudgingly add abstractions when you can no longer convince yourself that there must be away to avoid it, then you’re likely doing well.</div><br/></div></div><div id="41384562" class="c"><input type="checkbox" id="c-41384562" checked=""/><div class="controls bullet"><span class="by">nickpeterson</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41384540">parent</a><span>|</span><a href="#41385004">prev</a><span>|</span><a href="#41385364">next</a><span>|</span><label class="collapse" for="c-41384562">[-]</label><label class="expand" for="c-41384562">[1 more]</label></div><br/><div class="children"><div class="content">Just delete some code and see if it still works. Bonus points if you can delete abstractions.</div><br/></div></div></div></div><div id="41385364" class="c"><input type="checkbox" id="c-41385364" checked=""/><div class="controls bullet"><span class="by">neonsunset</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41384158">parent</a><span>|</span><a href="#41384540">prev</a><span>|</span><a href="#41383771">next</a><span>|</span><label class="collapse" for="c-41385364">[-]</label><label class="expand" for="c-41385364">[1 more]</label></div><br/><div class="children"><div class="content">And IsEven! (the not-JS one) <a href="https:&#x2F;&#x2F;github.com&#x2F;Benjlet&#x2F;IsEven">https:&#x2F;&#x2F;github.com&#x2F;Benjlet&#x2F;IsEven</a><p>It looks really innocent. But then you browse it...</div><br/></div></div></div></div><div id="41383771" class="c"><input type="checkbox" id="c-41383771" checked=""/><div class="controls bullet"><span class="by">eddd-ddde</span><span>|</span><a href="#41383482">parent</a><span>|</span><a href="#41384158">prev</a><span>|</span><a href="#41384261">next</a><span>|</span><label class="collapse" for="c-41383771">[-]</label><label class="expand" for="c-41383771">[4 more]</label></div><br/><div class="children"><div class="content">The coder spectrum, scientists on one end, software engineers on the other. Only balance can save us.<p>I have read code used in research papers. The theoretical math usually goes beyond my comprehension, so I always dive into the code to better understand the logic, only to find... it&#x27;s way worse... unintelligible.<p>At the end of the day we are used to what we do, and anything different will be foreign to us.</div><br/><div id="41385473" class="c"><input type="checkbox" id="c-41385473" checked=""/><div class="controls bullet"><span class="by">UniverseHacker</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383771">parent</a><span>|</span><a href="#41384588">next</a><span>|</span><label class="collapse" for="c-41385473">[-]</label><label class="expand" for="c-41385473">[1 more]</label></div><br/><div class="children"><div class="content">I agree- I&#x27;d like to think I&#x27;m somewhere in the middle despite being a scientist. I try to write the best code I can, and keep up on best practices, but try to keep things simple.<p>A lot of the scientific code out there in research papers is so bad, that when you look at it, you realize the whole paper is actually B.S.. What the paper claims was never even implemented, but they just did the most kludgy and quick thing possible to produce the plots in the paper. The whole paper will often hinge on the idea that they did something that generalizes, and are showing specific examples, when actually they just skipped to producing those specific examples - cherry picked no doubt from other ones that they couldn&#x27;t get to work - and did nothing else. As a reviewer if I notice this and really tear into the authors, it will usually get published and not fixed anyways.<p>This happens because you get inexperienced new people doing the actual coding work without any proper mentors or instruction, and then they&#x27;re under enormous pressure for results from a PI that doesn&#x27;t understand or care about coding at all. It makes the whole thing a house of cards.<p>Trying to do it &#x27;properly&#x27; as a scientist is an uphill battle, because funders, collaborators, etc. expect the quick (and fake) stuff other people seem to be doing. The realities of developing good reusable software and maintaining it long term are not possible to fund through scientific grants.<p>People writing usable code in academia are doing it for free on the weekends.</div><br/></div></div><div id="41384588" class="c"><input type="checkbox" id="c-41384588" checked=""/><div class="controls bullet"><span class="by">dlisboa</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383771">parent</a><span>|</span><a href="#41385473">prev</a><span>|</span><a href="#41387888">next</a><span>|</span><label class="collapse" for="c-41384588">[-]</label><label class="expand" for="c-41384588">[1 more]</label></div><br/><div class="children"><div class="content">A lot of the code written in math, physics or data analysis settings is really written for the authors alone to understand. They benefit from tens of pages of documentation (papers) plus decades of previous experience from the readers. None of which commercial software systems have.</div><br/></div></div><div id="41387888" class="c"><input type="checkbox" id="c-41387888" checked=""/><div class="controls bullet"><span class="by">patrulek</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383771">parent</a><span>|</span><a href="#41384588">prev</a><span>|</span><a href="#41384261">next</a><span>|</span><label class="collapse" for="c-41387888">[-]</label><label class="expand" for="c-41387888">[1 more]</label></div><br/><div class="children"><div class="content">No kidding. Most of the academic&#x2F;scientist&#x27;s code is such a mess i would rather go through the paper and reimplement algorithm by myself :P</div><br/></div></div></div></div><div id="41384261" class="c"><input type="checkbox" id="c-41384261" checked=""/><div class="controls bullet"><span class="by">ljm</span><span>|</span><a href="#41383482">parent</a><span>|</span><a href="#41383771">prev</a><span>|</span><a href="#41383538">next</a><span>|</span><label class="collapse" for="c-41384261">[-]</label><label class="expand" for="c-41384261">[3 more]</label></div><br/><div class="children"><div class="content">On the contrary, and I do agree that software engineers take the abstraction too far when they don’t know better, I don’t hold the code produced by people who aren’t software engineers by profession in particularly high esteem either.<p>You’re looking at two extremes: the codebase that is spread out too much with too much abstraction, and the codebase with zero abstraction that is basically a means to an end. In both cases they are difficult to work with.<p>I’ve certainly dealt with enough python, JS and PHP scripts that are basically written with the mindset of ‘fuck this, just give me what I want’, whereas people working in the code day to day need the abstractions to facilitate collaboration and resilience.</div><br/><div id="41387350" class="c"><input type="checkbox" id="c-41387350" checked=""/><div class="controls bullet"><span class="by">Kamq</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41384261">parent</a><span>|</span><a href="#41385191">next</a><span>|</span><label class="collapse" for="c-41387350">[-]</label><label class="expand" for="c-41387350">[1 more]</label></div><br/><div class="children"><div class="content">&gt; You’re looking at two extremes: the codebase that is spread out too much with too much abstraction, and the codebase with zero abstraction that is basically a means to an end. In both cases they are difficult to work with.<p>Yeah, neither&#x27;s great. If given a choice though, I&#x27;m absolutely going to take the latter. Yeah, changing something cross-cutting is going to be rough, but my need to do that is usually orders of magnitude less than my need to change specifics.<p>On a long enough timeline, both will bite me, but the former is much more likely to bite me today.</div><br/></div></div><div id="41385191" class="c"><input type="checkbox" id="c-41385191" checked=""/><div class="controls bullet"><span class="by">computerdork</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41384261">parent</a><span>|</span><a href="#41387350">prev</a><span>|</span><a href="#41383538">next</a><span>|</span><label class="collapse" for="c-41385191">[-]</label><label class="expand" for="c-41385191">[1 more]</label></div><br/><div class="children"><div class="content">Agree with this. Abstraction and design patterns <i>when used in a well-thought out manner</i> should make <i>large or complex</i> codebases easier to work with.<p>And like you, have experienced code bases that tried to throw every design pattern in the book at you, even for a relatively simple application, and made it a pain to work with.<p>But have also seen them used carefully, in a standard company-wide usage that made all the code easier to understand - worked on a high-volume website with a large codebase, where they had micro-services that all used common 3-tier architecture, security-services, tooling... Really-well thought-out and you could work on any one of their ~100 microservices and already have a good understanding of its design, how to build and debug it, how its security worked, it&#x27;s caching...<p>Yeah, agreed, its how these techniques are used that determine if they are useful or just add complexity.</div><br/></div></div></div></div><div id="41383538" class="c"><input type="checkbox" id="c-41383538" checked=""/><div class="controls bullet"><span class="by">zimpenfish</span><span>|</span><a href="#41383482">parent</a><span>|</span><a href="#41384261">prev</a><span>|</span><a href="#41383804">next</a><span>|</span><label class="collapse" for="c-41383538">[-]</label><label class="expand" for="c-41383538">[14 more]</label></div><br/><div class="children"><div class="content">&gt; I have seen a single line of code passed through 4 &quot;interface functions&quot;<p>I once had to deal with a HTTP handler that called `Validate` on interface A which called `Validate` on interface B which called `Validate` on interface C which called `Validate` on interface D which finally did the actual work.  There was a lot of profanity that month.</div><br/><div id="41384547" class="c"><input type="checkbox" id="c-41384547" checked=""/><div class="controls bullet"><span class="by">layer8</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383538">parent</a><span>|</span><a href="#41383644">next</a><span>|</span><label class="collapse" for="c-41384547">[-]</label><label class="expand" for="c-41384547">[1 more]</label></div><br/><div class="children"><div class="content">This can happen when some of the interface operations have added logic, but others (like Validate here) don&#x27;t, so just get delegated as-is.<p>One typical example is a tower of wrapped streams, where each layer applies additional transformations to the streamed data, but the Close operation is just passed across all layers to the lowest one (which closes the underlying file or whatever).</div><br/></div></div><div id="41383644" class="c"><input type="checkbox" id="c-41383644" checked=""/><div class="controls bullet"><span class="by">Cthulhu_</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383538">parent</a><span>|</span><a href="#41384547">prev</a><span>|</span><a href="#41383804">next</a><span>|</span><label class="collapse" for="c-41383644">[-]</label><label class="expand" for="c-41383644">[12 more]</label></div><br/><div class="children"><div class="content">I mean to a point that makes sense; you got your base data types like idk, a bank account number which can be validated, which is inside a bank account which can be validated, which is in a customer which can be validated, etc etc. Visitor pattern style, I believe?</div><br/><div id="41384061" class="c"><input type="checkbox" id="c-41384061" checked=""/><div class="controls bullet"><span class="by">zimpenfish</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383644">parent</a><span>|</span><a href="#41383710">next</a><span>|</span><label class="collapse" for="c-41384061">[-]</label><label class="expand" for="c-41384061">[1 more]</label></div><br/><div class="children"><div class="content">That would make sense but this was one piece of data being validated against a lookup based off that data.  The previous devs just had a, uh, Unique™ style of development.  I swear they must have been on some kind of &quot;editor tab count&quot; bonus scheme.</div><br/></div></div><div id="41383710" class="c"><input type="checkbox" id="c-41383710" checked=""/><div class="controls bullet"><span class="by">binary132</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383644">parent</a><span>|</span><a href="#41384061">prev</a><span>|</span><a href="#41383804">next</a><span>|</span><label class="collapse" for="c-41383710">[-]</label><label class="expand" for="c-41383710">[10 more]</label></div><br/><div class="children"><div class="content">imagine allowing invalid values to exist</div><br/><div id="41383950" class="c"><input type="checkbox" id="c-41383950" checked=""/><div class="controls bullet"><span class="by">quectophoton</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383710">parent</a><span>|</span><a href="#41383807">next</a><span>|</span><label class="collapse" for="c-41383950">[-]</label><label class="expand" for="c-41383950">[1 more]</label></div><br/><div class="children"><div class="content">&gt; imagine allowing invalid values to exist<p>Pretty common, for example when using databases as a mostly dumb store with all the logic in application code, and then a second application (or big refactor) appears and they introduce a subtle bug that results in an invalid `INSERT` (or whatever), and the database happily accepts it instead of rejecting it.</div><br/></div></div><div id="41383807" class="c"><input type="checkbox" id="c-41383807" checked=""/><div class="controls bullet"><span class="by">ozr</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383710">parent</a><span>|</span><a href="#41383950">prev</a><span>|</span><a href="#41383880">next</a><span>|</span><label class="collapse" for="c-41383807">[-]</label><label class="expand" for="c-41383807">[1 more]</label></div><br/><div class="children"><div class="content">Sounds awful.</div><br/></div></div><div id="41383880" class="c"><input type="checkbox" id="c-41383880" checked=""/><div class="controls bullet"><span class="by">withinboredom</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383710">parent</a><span>|</span><a href="#41383807">prev</a><span>|</span><a href="#41384025">next</a><span>|</span><label class="collapse" for="c-41383880">[-]</label><label class="expand" for="c-41383880">[3 more]</label></div><br/><div class="children"><div class="content">This is actually my preferred approach. If you want to put a 4gb base64 as your phone number, go right on ahead; best believe I will truncate it to a sensible length before I store it, but sure. Who am I to question your reality.<p>Sadly, people abuse shit like that to pass messages (like naming Spotify playlists with messages to loved&#x2F;friends&#x2F;colleagues while in jail) and maybe we have to assert a tiny bit of sanity on the world.</div><br/><div id="41384892" class="c"><input type="checkbox" id="c-41384892" checked=""/><div class="controls bullet"><span class="by">steezeburger</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383880">parent</a><span>|</span><a href="#41384025">next</a><span>|</span><label class="collapse" for="c-41384892">[-]</label><label class="expand" for="c-41384892">[2 more]</label></div><br/><div class="children"><div class="content">How do prisoners have access to Spotify?</div><br/><div id="41386303" class="c"><input type="checkbox" id="c-41386303" checked=""/><div class="controls bullet"><span class="by">ozr</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41384892">parent</a><span>|</span><a href="#41384025">next</a><span>|</span><label class="collapse" for="c-41386303">[-]</label><label class="expand" for="c-41386303">[1 more]</label></div><br/><div class="children"><div class="content">Presumably some feature&#x2F;jailbreak of JPay (and the like) tablets.<p><a href="https:&#x2F;&#x2F;offers.jpay.com&#x2F;jp5-tablets&#x2F;" rel="nofollow">https:&#x2F;&#x2F;offers.jpay.com&#x2F;jp5-tablets&#x2F;</a></div><br/></div></div></div></div></div></div><div id="41384025" class="c"><input type="checkbox" id="c-41384025" checked=""/><div class="controls bullet"><span class="by">agency</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383710">parent</a><span>|</span><a href="#41383880">prev</a><span>|</span><a href="#41383804">next</a><span>|</span><label class="collapse" for="c-41384025">[-]</label><label class="expand" for="c-41384025">[4 more]</label></div><br/><div class="children"><div class="content">imagine enforcing invariants as part of the design of a software system</div><br/><div id="41384654" class="c"><input type="checkbox" id="c-41384654" checked=""/><div class="controls bullet"><span class="by">nickpeterson</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41384025">parent</a><span>|</span><a href="#41386644">next</a><span>|</span><label class="collapse" for="c-41384654">[-]</label><label class="expand" for="c-41384654">[1 more]</label></div><br/><div class="children"><div class="content">The nerve, taking good jobs away from young qa testers. Wait till the IT Union hears of this!</div><br/></div></div><div id="41386644" class="c"><input type="checkbox" id="c-41386644" checked=""/><div class="controls bullet"><span class="by">binary132</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41384025">parent</a><span>|</span><a href="#41384654">prev</a><span>|</span><a href="#41383804">next</a><span>|</span><label class="collapse" for="c-41386644">[-]</label><label class="expand" for="c-41386644">[2 more]</label></div><br/><div class="children"><div class="content">I’m just saying enforce invariants at construction time &#x2F; type-designing instead of with the validity checks</div><br/><div id="41388456" class="c"><input type="checkbox" id="c-41388456" checked=""/><div class="controls bullet"><span class="by">zimpenfish</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41386644">parent</a><span>|</span><a href="#41383804">next</a><span>|</span><label class="collapse" for="c-41388456">[-]</label><label class="expand" for="c-41388456">[1 more]</label></div><br/><div class="children"><div class="content">This wasn&#x27;t that kind of validation - it was &quot;is this token allowed to do this thing?&quot;  Like &quot;validate your parking&quot; kind of scenario.<p>(And yes, it should probably have been &quot;CheckAuthorisation&quot;)</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="41383804" class="c"><input type="checkbox" id="c-41383804" checked=""/><div class="controls bullet"><span class="by">mbivert</span><span>|</span><a href="#41383482">parent</a><span>|</span><a href="#41383538">prev</a><span>|</span><a href="#41387107">next</a><span>|</span><label class="collapse" for="c-41383804">[-]</label><label class="expand" for="c-41383804">[6 more]</label></div><br/><div class="children"><div class="content">&gt; I can&#x27;t for the life of me make sense of why you&#x27;d do it.<p>Over-engineering is a common cause: simple solutions can be deceitfully difficult to find. That being said, additional indirection layers are usually justified by the overall architecture, and — assuming they&#x27;re reasonable — can&#x27;t always be appreciated locally.<p><pre><code>  « I&#x27;m always delighted by the light touch and stillness of early programming languages. Not much text; a lot gets done. Old programs read like quiet conversations between a well-spoken research worker and a well-studied mechanical colleague, not as a debate with a compiler. Who&#x27;d have guessed sophistication bought such noise? » (Dick Gabriel)</code></pre></div><br/><div id="41383954" class="c"><input type="checkbox" id="c-41383954" checked=""/><div class="controls bullet"><span class="by">prisenco</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383804">parent</a><span>|</span><a href="#41387107">next</a><span>|</span><label class="collapse" for="c-41383954">[-]</label><label class="expand" for="c-41383954">[5 more]</label></div><br/><div class="children"><div class="content"><i>&quot;I apologize for such a long letter - I didn&#x27;t have time to write a short one.&quot;</i> - Mark Twain</div><br/><div id="41384804" class="c"><input type="checkbox" id="c-41384804" checked=""/><div class="controls bullet"><span class="by">kubanczyk</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383954">parent</a><span>|</span><a href="#41387107">next</a><span>|</span><label class="collapse" for="c-41384804">[-]</label><label class="expand" for="c-41384804">[4 more]</label></div><br/><div class="children"><div class="content">Twain? <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=769624">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=769624</a></div><br/><div id="41385984" class="c"><input type="checkbox" id="c-41385984" checked=""/><div class="controls bullet"><span class="by">asdfasvea</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41384804">parent</a><span>|</span><a href="#41384907">next</a><span>|</span><label class="collapse" for="c-41385984">[-]</label><label class="expand" for="c-41385984">[2 more]</label></div><br/><div class="children"><div class="content">Had a math teach full of pithy, paradoxical, sardonic and witty quotes.  Told us that if we only take away one from his class is that you can never go wrong attributing an unknown quote to Mark Twain or Benjamin Franklin.</div><br/><div id="41386133" class="c"><input type="checkbox" id="c-41386133" checked=""/><div class="controls bullet"><span class="by">teapot7</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41385984">parent</a><span>|</span><a href="#41384907">next</a><span>|</span><label class="collapse" for="c-41386133">[-]</label><label class="expand" for="c-41386133">[1 more]</label></div><br/><div class="children"><div class="content">I believe you&#x27;ll find that&#x27;s a direct quote from Winston Churchill. Or was it Dorothy Parker?</div><br/></div></div></div></div><div id="41384907" class="c"><input type="checkbox" id="c-41384907" checked=""/><div class="controls bullet"><span class="by">prisenco</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41384804">parent</a><span>|</span><a href="#41385984">prev</a><span>|</span><a href="#41387107">next</a><span>|</span><label class="collapse" for="c-41384907">[-]</label><label class="expand" for="c-41384907">[1 more]</label></div><br/><div class="children"><div class="content">≈</div><br/></div></div></div></div></div></div></div></div><div id="41387107" class="c"><input type="checkbox" id="c-41387107" checked=""/><div class="controls bullet"><span class="by">Groxx</span><span>|</span><a href="#41383482">parent</a><span>|</span><a href="#41383804">prev</a><span>|</span><a href="#41384208">next</a><span>|</span><label class="collapse" for="c-41387107">[-]</label><label class="expand" for="c-41387107">[2 more]</label></div><br/><div class="children"><div class="content">Contrary to the &quot;over-engineering&quot; claims, I&#x27;ll put this explanation up for consideration: it&#x27;s a result of fighting the system without understanding the details.  Over-engineering <i>absolutely</i> exists and can look just like this, but I think it&#x27;s mostly a lack of thought instead of too much bad thinking.<p>You see the same thing with e.g. Java programmers adding `try { } catch (Exception e) { log(e) }` until it shuts up about checked exceptions (and not realizing how many other things they also caught, like thread interrupts).<p>It&#x27;s a common result of &quot;I don&#x27;t get it but it tells me it&#x27;s wrong, so I&#x27;ll change random things until it works&quot;.  Getting engs in this state to realize that they&#x27;re wasting <i>far</i> more time and energy not-knowing something than it would take to learn it in depth has, so far, been my most successful route in dragging people into the light.<p>(Not surprisingly, <i>this</i> is one of my biggest worries about LLM-heavy programmers. LLMs can be useful when you know what you&#x27;re doing, but I keep seeing them stand in the way of learning if someone isn&#x27;t already motivated to do so, because you can keep not-understanding for longer. That&#x27;s a blessing for non-programmers and a curse for any programmer who has to work with them.)</div><br/><div id="41387770" class="c"><input type="checkbox" id="c-41387770" checked=""/><div class="controls bullet"><span class="by">bionsystem</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41387107">parent</a><span>|</span><a href="#41384208">next</a><span>|</span><label class="collapse" for="c-41387770">[-]</label><label class="expand" for="c-41387770">[1 more]</label></div><br/><div class="children"><div class="content">How would you describe a path to learn this kind of things ? (Even just dropping a link would be appreciated).<p>Indeed typical education is about algos and programing paradigm (like procedural, functional, OO, etc) and context (system, native apps, web, data), but I don&#x27;t remember&#x2F;understand much about what you describe (but definitely faced it on toy projects and reacted like the &quot;junior way&quot; you describe). Heck we even did some deep stuff like language grammar &#x2F; compiler design &#x2F; and this thing with the petri boxes but it&#x27;s a lot less practical and actionable I find.</div><br/></div></div></div></div><div id="41384208" class="c"><input type="checkbox" id="c-41384208" checked=""/><div class="controls bullet"><span class="by">jayd16</span><span>|</span><a href="#41383482">parent</a><span>|</span><a href="#41387107">prev</a><span>|</span><a href="#41383806">next</a><span>|</span><label class="collapse" for="c-41384208">[-]</label><label class="expand" for="c-41384208">[1 more]</label></div><br/><div class="children"><div class="content">ITT people who have no context passing judgement on code they&#x27;ve never seen described by someone who doesn&#x27;t know what they&#x27;re describing.</div><br/></div></div><div id="41383806" class="c"><input type="checkbox" id="c-41383806" checked=""/><div class="controls bullet"><span class="by">Misdicorl</span><span>|</span><a href="#41383482">parent</a><span>|</span><a href="#41384208">prev</a><span>|</span><a href="#41384443">next</a><span>|</span><label class="collapse" for="c-41383806">[-]</label><label class="expand" for="c-41383806">[1 more]</label></div><br/><div class="children"><div class="content">Ignoring inexperience&#x2F;incompetence as a reason (which, admittedly, is a likely root cause) domain fuzziness is often a good explanation here. If you aren&#x27;t extremely familiar with a domain and know the shape of solution you need a-priori all those levels of indirection allow you to keep lots of work &quot;online&quot; while (replacing, refactoring, experimenting) with a particular layer. The intent should be to &quot;find&quot; the right shape with all the indirection in place and then rewrite with a single correct shape without all the indirection. Of course, the rewrite never actually happens =)</div><br/></div></div><div id="41384443" class="c"><input type="checkbox" id="c-41384443" checked=""/><div class="controls bullet"><span class="by">stroupwaffle</span><span>|</span><a href="#41383482">parent</a><span>|</span><a href="#41383806">prev</a><span>|</span><a href="#41385931">next</a><span>|</span><label class="collapse" for="c-41384443">[-]</label><label class="expand" for="c-41384443">[3 more]</label></div><br/><div class="children"><div class="content">I think something people forget is that computer programming is a craft which must be honed.<p>A lot of people are introduced to it because computers are such an important part of every discipline, but unfortunately the wealth of mistakes maintaining many a code base occur from those who, quite honestly, simply lack experience.<p>In the authors case, they don’t explain the simple understanding that every pointer is simply adding a dimension to the data.<p>int *data; &#x2F;&#x2F; one dimensional vector<p>int **data; &#x2F;&#x2F; two dimensional matrix<p>int ***data; &#x2F;&#x2F; three dimensional matrix<p>Which is one way to interpret things. The problem is that when folks learn computer programming using Python (or another high level language), it’s like using power tools bought from the hardware store compared to some ancient, Japanese wood working technique. The latter takes time to understand and perfect.<p>Ten thousand hours, so I’ve heard ;)</div><br/><div id="41384623" class="c"><input type="checkbox" id="c-41384623" checked=""/><div class="controls bullet"><span class="by">THBC</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41384443">parent</a><span>|</span><a href="#41385931">next</a><span>|</span><label class="collapse" for="c-41384623">[-]</label><label class="expand" for="c-41384623">[2 more]</label></div><br/><div class="children"><div class="content">”every pointer is simply adding a dimension to the data.”<p>No, it’s not. The concept of having a pointer to a pointer has nothing to do with the concept of dimensionality.<p>You must be thinking of lists of lists (of lists…), which can be implemented using pointers. The dimensionality, however, comes from the structure of the list, not from the pointers.</div><br/><div id="41387289" class="c"><input type="checkbox" id="c-41387289" checked=""/><div class="controls bullet"><span class="by">YZF</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41384623">parent</a><span>|</span><a href="#41385931">next</a><span>|</span><label class="collapse" for="c-41387289">[-]</label><label class="expand" for="c-41387289">[1 more]</label></div><br/><div class="children"><div class="content">Right. -ish. A two dimensional array can be modeled as an array of pointers to one dimensional arrays or as one pointer to a two dimensional array. Both have use cases. It&#x27;s probably a right of passage for someone new to the C language to understand that difference (I learnt C as a teenager and it took me some time, months, to comprehend all the different permutations of pointers and square brackets).</div><br/></div></div></div></div></div></div><div id="41385931" class="c"><input type="checkbox" id="c-41385931" checked=""/><div class="controls bullet"><span class="by">ants_everywhere</span><span>|</span><a href="#41383482">parent</a><span>|</span><a href="#41384443">prev</a><span>|</span><a href="#41384629">next</a><span>|</span><label class="collapse" for="c-41385931">[-]</label><label class="expand" for="c-41385931">[2 more]</label></div><br/><div class="children"><div class="content">There&#x27;s an element of what you might call &quot;taste&quot; in choosing abstractions in software.<p>Like all matters of taste, there are at least two things to keep in mind:<p>(1) You can&#x27;t develop good taste until you have some experience. It&#x27;s hard to learn software abstractions, and we want engineers to learn about and practice them. Mistakes are crucial to learning, so we should expect some number of abstraction mistakes from even the smartest junior engineers.<p>(2) Just because something is ugly to a non-expert doesn&#x27;t mean it&#x27;s necessarily bad. Bebop, for example, has less mass appeal than bubblegum pop. One of the things that makes bebop impressive to musicians, is the amount of technical and musical skill it takes to play it. But if you&#x27;re not a musician those virtues may be lost on you whereas the frenetic noise is very apparent.<p>One of the things Google does better than other huge tech companies (IMO) is demonstrate good taste for abstractions. Those abstractions are often not obvious.<p>[Obviously the bebop comparison 
breaks down, and showing off technical skills isn&#x27;t a virtue in software. But there are other virtues that are more apparent to experts, such as maintainability, library reviews, integration with existing tooling or practices etc.]</div><br/><div id="41386209" class="c"><input type="checkbox" id="c-41386209" checked=""/><div class="controls bullet"><span class="by">jimmaswell</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41385931">parent</a><span>|</span><a href="#41384629">next</a><span>|</span><label class="collapse" for="c-41386209">[-]</label><label class="expand" for="c-41386209">[1 more]</label></div><br/><div class="children"><div class="content">A crucial thing to remember in a shared code base is that taste is ultimately subjective, and to let it go when people do something different from you so long as the code is understandable and not objectively incorrect. Remember you&#x27;re making something functional at the end of the day, not ASCII art.</div><br/></div></div></div></div><div id="41384629" class="c"><input type="checkbox" id="c-41384629" checked=""/><div class="controls bullet"><span class="by">astrange</span><span>|</span><a href="#41383482">parent</a><span>|</span><a href="#41385931">prev</a><span>|</span><a href="#41383811">next</a><span>|</span><label class="collapse" for="c-41384629">[-]</label><label class="expand" for="c-41384629">[1 more]</label></div><br/><div class="children"><div class="content">This is a popular pattern in apps or other &quot;frameworky&quot; code, especially in C++.<p>I can think of at least two open source C++ apps I used where every time I checked in the IRC channel, the main dev wasn&#x27;t talking about new app features, but about how to adopt even newer cooler C++ abstractions in the existing code. With the general result that if you want to know how some algorithm backing a feature works, you can&#x27;t find it.</div><br/></div></div><div id="41383811" class="c"><input type="checkbox" id="c-41383811" checked=""/><div class="controls bullet"><span class="by">withinboredom</span><span>|</span><a href="#41383482">parent</a><span>|</span><a href="#41384629">prev</a><span>|</span><a href="#41388154">next</a><span>|</span><label class="collapse" for="c-41383811">[-]</label><label class="expand" for="c-41383811">[2 more]</label></div><br/><div class="children"><div class="content">As a software engineer, this is something I get onto with my team. There is a such thing as too much abstraction and indirection. Abstraction should serve a purpose; don’t create an interface until you have more than one concrete implementation (or plan to within a PR or two). Premature abstraction is a type of premature optimization, just in code structure instead of execution.</div><br/><div id="41385932" class="c"><input type="checkbox" id="c-41385932" checked=""/><div class="controls bullet"><span class="by">gerdesj</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383811">parent</a><span>|</span><a href="#41388154">next</a><span>|</span><label class="collapse" for="c-41385932">[-]</label><label class="expand" for="c-41385932">[1 more]</label></div><br/><div class="children"><div class="content">You deal with getting a disparate bunch of people to persuade a mostly documented and mostly functional (as purchased) collection of IT systems to do largely what is required according to an almost complete specification (which changes on a daily basis).  All of that is exhaustively and nearly documented correctly.<p>There&#x27;s the weird bits where 2=3 but you don&#x27;t talk about that too often.  James was really clever but a bit strange even by your terms and left a lot of stuff that we can get away with describing as legacy. We sometimes have to explain ourselves to management why the system buys a bunch of flowers every Hallowe&#x27;en (piss off Google and your wiggly red line - it&#x27;s hallowed evening and I know how to abbreviate that phrase correctly) and ships them to a graveyard plot in NOLA.  We generally blame James but no-one really knows what on earth is going on.  We wrote an automated call closer for that one with a random dialogue.<p>&quot;There is a such thing as too much abstraction and indirection&quot;<p>Yes there is.  You got two words out of sequence!<p>&quot;Premature abstraction is a type of premature optimization, just in code structure instead of execution.&quot;<p>I will try to follow your suggestion but it sounds like advice to a teenage boy.<p>English is a programming language too.  You can make people do things by using it.  How you deploy it is up to you.  I try to come across as a complete wanker on internet forums and I&#x27;m sure I have been successful here.<p>(EDIT: sp)</div><br/></div></div></div></div><div id="41388154" class="c"><input type="checkbox" id="c-41388154" checked=""/><div class="controls bullet"><span class="by">mtillman</span><span>|</span><a href="#41383482">parent</a><span>|</span><a href="#41383811">prev</a><span>|</span><a href="#41383823">next</a><span>|</span><label class="collapse" for="c-41388154">[-]</label><label class="expand" for="c-41388154">[1 more]</label></div><br/><div class="children"><div class="content">The author says as much and more at the end of the article.</div><br/></div></div><div id="41383823" class="c"><input type="checkbox" id="c-41383823" checked=""/><div class="controls bullet"><span class="by">jdc0589</span><span>|</span><a href="#41383482">parent</a><span>|</span><a href="#41388154">prev</a><span>|</span><a href="#41384749">next</a><span>|</span><label class="collapse" for="c-41383823">[-]</label><label class="expand" for="c-41383823">[5 more]</label></div><br/><div class="children"><div class="content">this is the classic over abstraction problem so that you <i>can</i> change things behind an interface at some point down the line if you ever need to while being totally opaque to any consuming code.<p>A lot of languages force you to start with this from day one, unless you want to go refactor everything to use an interface later on, so people just do it even when there will literally never be a reason to (and for testability, <i>sometimes</i>).<p>The cool thing about Go is the interface system is inverted kind of like duck-typing, so if you write purely idiomatic Go, then the thing receiving an arg in a function call is the one specifying the interface it must meet, rather than the implementing code having to declare every interface that some implementation meets.<p>People screw this up a lot though, especially if they came from Java&#x2F;C# backgrounds.</div><br/><div id="41384079" class="c"><input type="checkbox" id="c-41384079" checked=""/><div class="controls bullet"><span class="by">diarrhea</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41383823">parent</a><span>|</span><a href="#41384749">next</a><span>|</span><label class="collapse" for="c-41384079">[-]</label><label class="expand" for="c-41384079">[4 more]</label></div><br/><div class="children"><div class="content">Do you have a concrete example by any chance?</div><br/><div id="41385071" class="c"><input type="checkbox" id="c-41385071" checked=""/><div class="controls bullet"><span class="by">devjab</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41384079">parent</a><span>|</span><a href="#41384749">next</a><span>|</span><label class="collapse" for="c-41385071">[-]</label><label class="expand" for="c-41385071">[3 more]</label></div><br/><div class="children"><div class="content">Most C# education will teach you to always make an interface for everything for some reason. Even in academia they’ll teach CS students to do this and well… it means there is an entire industry of people who think that over-engineering everything with needless abstractions is best practice.<p>It is what it is though. At least it’s fairly contained within the C# community in my part of the world.</div><br/><div id="41388126" class="c"><input type="checkbox" id="c-41388126" checked=""/><div class="controls bullet"><span class="by">mdructor</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41385071">parent</a><span>|</span><a href="#41384749">next</a><span>|</span><label class="collapse" for="c-41388126">[-]</label><label class="expand" for="c-41388126">[2 more]</label></div><br/><div class="children"><div class="content">Isn&#x27;t that &quot;for some reason&quot; in C# being it&#x27;s the standard way of doing dependency injection and being able to unit test&#x2F;mock objects?<p>I&#x27;ve found it easier to work in C# codebases that just drank the Microsoft Kool-Aid with &quot;Clean architecture&quot; instead of Frankenstein-esque C# projects that decidedly could do it better or didn&#x27;t care or know better.<p>Abstraction&#x2F;design patterns can be abused, but in C#, &quot;too many interfaces&quot; doesn&#x27;t seem that problematic.</div><br/><div id="41388520" class="c"><input type="checkbox" id="c-41388520" checked=""/><div class="controls bullet"><span class="by">devjab</span><span>|</span><a href="#41383482">root</a><span>|</span><a href="#41388126">parent</a><span>|</span><a href="#41384749">next</a><span>|</span><label class="collapse" for="c-41388520">[-]</label><label class="expand" for="c-41388520">[1 more]</label></div><br/><div class="children"><div class="content">I agree with you on this, my issue is mainly when they bring this thinking with them into other languages. I can easily avoid working with C# (I spent a decade working with it and I’d prefer to never work with it again), but it’s just such a pain in the ass to onboard developers coming from that world.<p>It may be the same for Java as GP mentioned it along with C#, but they tend to stay within their own little domain in my part of the world. By contrast C# is mostly used by mid-sized stagnant to failing companies which means C# developers job hop a lot. There is also a lot of them because mid-sized companies that end up failing love the shit out of C# for some reason and there are soooo many of those around here. Basically we have to un-learn almost everything a new hire knows about development or they’ve solely worked with C#.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="41384749" class="c"><input type="checkbox" id="c-41384749" checked=""/><div class="controls bullet"><span class="by">stonemetal12</span><span>|</span><a href="#41383482">parent</a><span>|</span><a href="#41383823">prev</a><span>|</span><a href="#41384280">next</a><span>|</span><label class="collapse" for="c-41384749">[-]</label><label class="expand" for="c-41384749">[1 more]</label></div><br/><div class="children"><div class="content">It is the Law of Demeter.  It sounds like a good idea, until you get the chain of wrappers.<p><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Law_of_Demeter" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Law_of_Demeter</a></div><br/></div></div><div id="41384280" class="c"><input type="checkbox" id="c-41384280" checked=""/><div class="controls bullet"><span class="by">LudwigNagasena</span><span>|</span><a href="#41383482">parent</a><span>|</span><a href="#41384749">prev</a><span>|</span><a href="#41386330">next</a><span>|</span><label class="collapse" for="c-41384280">[-]</label><label class="expand" for="c-41384280">[1 more]</label></div><br/><div class="children"><div class="content">It happens so that we don&#x27;t have &quot;a single 15,000 line file that had been worked on for a decade&quot;. We don&#x27;t have the luxury of asking the GitHub team and John Carmack to fix our code when we are forced to show it to the stakeholders.</div><br/></div></div><div id="41386330" class="c"><input type="checkbox" id="c-41386330" checked=""/><div class="controls bullet"><span class="by">giantg2</span><span>|</span><a href="#41383482">parent</a><span>|</span><a href="#41384280">prev</a><span>|</span><a href="#41383966">next</a><span>|</span><label class="collapse" for="c-41386330">[-]</label><label class="expand" for="c-41386330">[1 more]</label></div><br/><div class="children"><div class="content">Ugh, dealing with stuff like this right now for project config. Why can&#x27;t I just use yaml files in the build to generate environment files based on region&#x2F;app and then read those values in the code? Instead, it&#x27;s that plus a few layers of interfaces grouping multiple levels of config items.</div><br/></div></div><div id="41383966" class="c"><input type="checkbox" id="c-41383966" checked=""/><div class="controls bullet"><span class="by">tejtm</span><span>|</span><a href="#41383482">parent</a><span>|</span><a href="#41386330">prev</a><span>|</span><a href="#41383820">next</a><span>|</span><label class="collapse" for="c-41383966">[-]</label><label class="expand" for="c-41383966">[1 more]</label></div><br/><div class="children"><div class="content">I chalk it up to &quot;complexity envy&quot;  
If they have real problems why can&#x27;t we?<p>source me: CS by edu, science geek by choice.</div><br/></div></div><div id="41383820" class="c"><input type="checkbox" id="c-41383820" checked=""/><div class="controls bullet"><span class="by">tomcam</span><span>|</span><a href="#41383482">parent</a><span>|</span><a href="#41383966">prev</a><span>|</span><a href="#41388604">next</a><span>|</span><label class="collapse" for="c-41383820">[-]</label><label class="expand" for="c-41383820">[1 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>    I have seen a single line of code passed through 4 &quot;interface functions&quot; before it is called that call each other sequentially, and are of course in separate files in separate folders.
</code></pre>
Trigger warning next time. I was trying to eat lunch</div><br/></div></div></div></div><div id="41388604" class="c"><input type="checkbox" id="c-41388604" checked=""/><div class="controls bullet"><span class="by">Thorrez</span><span>|</span><a href="#41383482">prev</a><span>|</span><a href="#41383318">next</a><span>|</span><label class="collapse" for="c-41388604">[-]</label><label class="expand" for="c-41388604">[1 more]</label></div><br/><div class="children"><div class="content">A couple suggestions for improving the code:<p>* Currently sendChanChan() takes 2 params: a 4chan and a 3chan. I think it can be simplified by just taking a 3chan. The send on the 4chan can be done before calling sendChanChan().<p>* Why does the code have 2 levels of loops in receiveChanChanChan()? I think a single loop would be fine. Especially since there are 0 loops in the place where receiveChanChanChan() is called. So currently, a single goroutine performs N receives all the values from the 4chan, but we have N goroutines to receive values for each 3chan (so each goroutine will perform on average 1 receive). That&#x27;s inconsistent.</div><br/></div></div><div id="41383318" class="c"><input type="checkbox" id="c-41383318" checked=""/><div class="controls bullet"><span class="by">theideaofcoffee</span><span>|</span><a href="#41388604">prev</a><span>|</span><a href="#41383493">next</a><span>|</span><label class="collapse" for="c-41383318">[-]</label><label class="expand" for="c-41383318">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m going to post a low-effort, non-substantive comment because I can.<p>That meme in the first few paragraphs made me actual lol as a recovering C programmer.<p>That is all.<p>I love seeing odd contortions of languages like this, and C has opportunity aplenty, interesting to see it in Go.</div><br/></div></div><div id="41383493" class="c"><input type="checkbox" id="c-41383493" checked=""/><div class="controls bullet"><span class="by">spookie</span><span>|</span><a href="#41383318">prev</a><span>|</span><a href="#41383191">next</a><span>|</span><label class="collapse" for="c-41383493">[-]</label><label class="expand" for="c-41383493">[1 more]</label></div><br/><div class="children"><div class="content">&gt; There&#x27;s an old programming joke from back in the days when C and its derivatives dominated the landscape.<p>We are still living in those days.</div><br/></div></div><div id="41383191" class="c"><input type="checkbox" id="c-41383191" checked=""/><div class="controls bullet"><span class="by">lemursage</span><span>|</span><a href="#41383493">prev</a><span>|</span><a href="#41383303">next</a><span>|</span><label class="collapse" for="c-41383191">[-]</label><label class="expand" for="c-41383191">[1 more]</label></div><br/><div class="children"><div class="content">A timeless classic from Buena Vista Social Club comes to mind <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=o5cELP06Mik" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=o5cELP06Mik</a></div><br/></div></div><div id="41383303" class="c"><input type="checkbox" id="c-41383303" checked=""/><div class="controls bullet"><span class="by">kardianos</span><span>|</span><a href="#41383191">prev</a><span>|</span><a href="#41384106">next</a><span>|</span><label class="collapse" for="c-41383303">[-]</label><label class="expand" for="c-41383303">[4 more]</label></div><br/><div class="children"><div class="content">The &quot;chan chan Value&quot; or &quot;chan struct{resp chan Value}&quot; is actually a pattern I&#x27;ve used in a very specific situation. It&#x27;s a situation where a message bus <i>probably</i> could have been used instead, but then you&#x27;d have a message bus to handle...</div><br/><div id="41383703" class="c"><input type="checkbox" id="c-41383703" checked=""/><div class="controls bullet"><span class="by">jerf</span><span>|</span><a href="#41383303">parent</a><span>|</span><a href="#41383603">next</a><span>|</span><label class="collapse" for="c-41383703">[-]</label><label class="expand" for="c-41383703">[1 more]</label></div><br/><div class="children"><div class="content">I get &quot;chan chan&quot;s pretty routinely. It is when I send a message to some internal server&#x2F;actor, and I also send it the channel to reply on in the message. Usually it ends up being a &quot;chan struct { ... something with a chan in it ... }&quot; rather than a literal &quot;chan chan&quot; you can grep for, but the principle is there. Very useful pattern; I consider it one of the basics in Go.<p>&quot;chan chan chan&quot; never, as far as I know.<p>It would be overkill to replace everything like that with a message bus. Very different performance characteristics for one thing. Go&#x27;s channels are very much an internal-to-the-OS-process construct, if I&#x27;m talking internal to the OS process there&#x27;s no value in &quot;upgrading&quot; to a message bus.</div><br/></div></div><div id="41383603" class="c"><input type="checkbox" id="c-41383603" checked=""/><div class="controls bullet"><span class="by">mbivert</span><span>|</span><a href="#41383303">parent</a><span>|</span><a href="#41383703">prev</a><span>|</span><a href="#41386347">next</a><span>|</span><label class="collapse" for="c-41383603">[-]</label><label class="expand" for="c-41383603">[1 more]</label></div><br/><div class="children"><div class="content">Probably similar to the concurrent chat server from gopl[0] then. The pattern is a bit surprising at first, still fairly readable.<p>[0]: <a href="https:&#x2F;&#x2F;github.com&#x2F;adonovan&#x2F;gopl.io&#x2F;blob&#x2F;master&#x2F;ch8&#x2F;chat&#x2F;chat.go">https:&#x2F;&#x2F;github.com&#x2F;adonovan&#x2F;gopl.io&#x2F;blob&#x2F;master&#x2F;ch8&#x2F;chat&#x2F;cha...</a></div><br/></div></div><div id="41386347" class="c"><input type="checkbox" id="c-41386347" checked=""/><div class="controls bullet"><span class="by">attilakun</span><span>|</span><a href="#41383303">parent</a><span>|</span><a href="#41383603">prev</a><span>|</span><a href="#41384106">next</a><span>|</span><label class="collapse" for="c-41386347">[-]</label><label class="expand" for="c-41386347">[1 more]</label></div><br/><div class="children"><div class="content">I used it too. It&#x27;s useful to implement Promise-like semantics in Go.</div><br/></div></div></div></div><div id="41384106" class="c"><input type="checkbox" id="c-41384106" checked=""/><div class="controls bullet"><span class="by">zemo</span><span>|</span><a href="#41383303">prev</a><span>|</span><a href="#41383940">next</a><span>|</span><label class="collapse" for="c-41384106">[-]</label><label class="expand" for="c-41384106">[1 more]</label></div><br/><div class="children"><div class="content">channel of channel is a normal pattern, although it more commonly looks like a channel of struct vals, and the struct type has a field that&#x27;s a channel. it&#x27;s lets you send requests that are completed, whose values can be awaited on out of order, to avoid head of line blocking.  something like `type request struct { params, reply chan response }`, where you send those requests on a channel, they get dispatched to some worker, and then the worker does the work and puts the result on the reply chan. But two is as high as I&#x27;ve ever found useful, I don&#x27;t think I&#x27;ve ever seen a use case for a chan chan chan.</div><br/></div></div><div id="41383940" class="c"><input type="checkbox" id="c-41383940" checked=""/><div class="controls bullet"><span class="by">caerwy</span><span>|</span><a href="#41384106">prev</a><span>|</span><a href="#41383958">next</a><span>|</span><label class="collapse" for="c-41383940">[-]</label><label class="expand" for="c-41383940">[2 more]</label></div><br/><div class="children"><div class="content">Here&#x27;s a counterpoint blog using a chan that sends a chan in order to implement a dynamic dispatch mechanism. This is in Limbo not Go. But same concepts. Maybe the complexity proves the point.  <a href="https:&#x2F;&#x2F;ipn.caerwyn.com&#x2F;2007&#x2F;07&#x2F;lab-78-dynamic-dispatch.html?m=1" rel="nofollow">https:&#x2F;&#x2F;ipn.caerwyn.com&#x2F;2007&#x2F;07&#x2F;lab-78-dynamic-dispatch.html...</a></div><br/><div id="41383982" class="c"><input type="checkbox" id="c-41383982" checked=""/><div class="controls bullet"><span class="by">jhoechtl</span><span>|</span><a href="#41383940">parent</a><span>|</span><a href="#41383958">next</a><span>|</span><label class="collapse" for="c-41383982">[-]</label><label class="expand" for="c-41383982">[1 more]</label></div><br/><div class="children"><div class="content">For those wondering, Limbo is a predecessor of Go hand used in the Inferno operating system, a descendant of plan9.</div><br/></div></div></div></div><div id="41383958" class="c"><input type="checkbox" id="c-41383958" checked=""/><div class="controls bullet"><span class="by">malkosta</span><span>|</span><a href="#41383940">prev</a><span>|</span><a href="#41386598">next</a><span>|</span><label class="collapse" for="c-41383958">[-]</label><label class="expand" for="c-41383958">[1 more]</label></div><br/><div class="children"><div class="content">It reminds me of Joe Armstrong&#x27;s &quot;My favorite Erlang Program&quot;:
<a href="https:&#x2F;&#x2F;joearms.github.io&#x2F;published&#x2F;2013-11-21-My-favorite-erlang-program.html" rel="nofollow">https:&#x2F;&#x2F;joearms.github.io&#x2F;published&#x2F;2013-11-21-My-favorite-e...</a></div><br/></div></div><div id="41386598" class="c"><input type="checkbox" id="c-41386598" checked=""/><div class="controls bullet"><span class="by">9cb14c1ec0</span><span>|</span><a href="#41383958">prev</a><span>|</span><a href="#41386453">next</a><span>|</span><label class="collapse" for="c-41386598">[-]</label><label class="expand" for="c-41386598">[1 more]</label></div><br/><div class="children"><div class="content">I was expecting something much different when I clicked that link.  Guess I&#x27;m not enough of a Go programmer to immediately spot the joke.</div><br/></div></div><div id="41386453" class="c"><input type="checkbox" id="c-41386453" checked=""/><div class="controls bullet"><span class="by">ijustlovemath</span><span>|</span><a href="#41386598">prev</a><span>|</span><a href="#41384554">next</a><span>|</span><label class="collapse" for="c-41386453">[-]</label><label class="expand" for="c-41386453">[1 more]</label></div><br/><div class="children"><div class="content">In LabVIEW code we sometimes do this as a means of receiving asynchronous response data; instead of dumping responses in a queue, the message you pass includes a callback event channel, which you can use to notify exactly the same caller that the operation is done, and what the results are. A little wasteful on memory, but since theyre single use and are closed upon responding, the ergonomics are worth it</div><br/></div></div><div id="41384554" class="c"><input type="checkbox" id="c-41384554" checked=""/><div class="controls bullet"><span class="by">twp</span><span>|</span><a href="#41386453">prev</a><span>|</span><a href="#41383530">next</a><span>|</span><label class="collapse" for="c-41384554">[-]</label><label class="expand" for="c-41384554">[4 more]</label></div><br/><div class="children"><div class="content">Sending channels over channels (i.e. chan chan) is a common pattern for publish-subscribe systems, e.g.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;twpayne&#x2F;go-pubsub&#x2F;blob&#x2F;master&#x2F;pubsub.go">https:&#x2F;&#x2F;github.com&#x2F;twpayne&#x2F;go-pubsub&#x2F;blob&#x2F;master&#x2F;pubsub.go</a></div><br/><div id="41385638" class="c"><input type="checkbox" id="c-41385638" checked=""/><div class="controls bullet"><span class="by">cedws</span><span>|</span><a href="#41384554">parent</a><span>|</span><a href="#41383530">next</a><span>|</span><label class="collapse" for="c-41385638">[-]</label><label class="expand" for="c-41385638">[3 more]</label></div><br/><div class="children"><div class="content">That’s some pretty Go code, I like it. Just out of interest, why have a channel for subscribe&#x2F;unsubscribe? Did you want to avoid a mutex on the subscriber map?</div><br/><div id="41386108" class="c"><input type="checkbox" id="c-41386108" checked=""/><div class="controls bullet"><span class="by">distortionfield</span><span>|</span><a href="#41384554">root</a><span>|</span><a href="#41385638">parent</a><span>|</span><a href="#41383530">next</a><span>|</span><label class="collapse" for="c-41386108">[-]</label><label class="expand" for="c-41386108">[2 more]</label></div><br/><div class="children"><div class="content">Not the OP but yeah, that’s usually the reason I reach for a channel in this case. A mutex or wait group is just begging for a deadlock to rise up when you least expect.</div><br/><div id="41388483" class="c"><input type="checkbox" id="c-41388483" checked=""/><div class="controls bullet"><span class="by">Thorrez</span><span>|</span><a href="#41384554">root</a><span>|</span><a href="#41386108">parent</a><span>|</span><a href="#41383530">next</a><span>|</span><label class="collapse" for="c-41388483">[-]</label><label class="expand" for="c-41388483">[1 more]</label></div><br/><div class="children"><div class="content">Can&#x27;t channels deadlock too? Sending or receiving on a channel will block by default until the other side receives&#x2F;sends the value if the channel is unbuffered, or it&#x27;s buffered but the buffer is full. You have to write extra code to make it non-blocking; the pubsub example under discussion is blocking. I don&#x27;t see how switching the discussed code to a mutex would make it any more blocking or deadlock prone.<p>I found a bug in production caused by the author not realizing a send on a channel can block.</div><br/></div></div></div></div></div></div></div></div><div id="41383530" class="c"><input type="checkbox" id="c-41383530" checked=""/><div class="controls bullet"><span class="by">PhilipRoman</span><span>|</span><a href="#41384554">prev</a><span>|</span><a href="#41385657">next</a><span>|</span><label class="collapse" for="c-41383530">[-]</label><label class="expand" for="c-41383530">[1 more]</label></div><br/><div class="children"><div class="content">The closest thing to this I&#x27;ve seen in actual code is BlockingQueue&lt;BlockingQueue&lt;List&lt;T&gt;&gt;&gt;, which was used to wait for an element from multiple blocking queues simultaneously, where each element is a list of messages.</div><br/></div></div><div id="41385657" class="c"><input type="checkbox" id="c-41385657" checked=""/><div class="controls bullet"><span class="by">ianpenney</span><span>|</span><a href="#41383530">prev</a><span>|</span><a href="#41384389">next</a><span>|</span><label class="collapse" for="c-41385657">[-]</label><label class="expand" for="c-41385657">[5 more]</label></div><br/><div class="children"><div class="content">This is either parody or the making of someone who’s never done real work.<p>Source: if you do this stuff or even dare to name another microservice after a Harry Potter character when 11.5 million people rely on it, I’m going to dedicate the rest of my life to having you fired from everywhere.</div><br/><div id="41385965" class="c"><input type="checkbox" id="c-41385965" checked=""/><div class="controls bullet"><span class="by">enneff</span><span>|</span><a href="#41385657">parent</a><span>|</span><a href="#41384389">next</a><span>|</span><label class="collapse" for="c-41385965">[-]</label><label class="expand" for="c-41385965">[4 more]</label></div><br/><div class="children"><div class="content">Google is chock full of services with whimsical names. I’m not a fan either but I think in this industry you’re fighting a losing battle.</div><br/><div id="41386078" class="c"><input type="checkbox" id="c-41386078" checked=""/><div class="controls bullet"><span class="by">distortionfield</span><span>|</span><a href="#41385657">root</a><span>|</span><a href="#41385965">parent</a><span>|</span><a href="#41384389">next</a><span>|</span><label class="collapse" for="c-41386078">[-]</label><label class="expand" for="c-41386078">[3 more]</label></div><br/><div class="children"><div class="content">Tbh, I would rather a whimsical but unique and memorable name than another “tax-pool-cache-service” type of name to try and reason about.</div><br/><div id="41388037" class="c"><input type="checkbox" id="c-41388037" checked=""/><div class="controls bullet"><span class="by">mook</span><span>|</span><a href="#41385657">root</a><span>|</span><a href="#41386078">parent</a><span>|</span><a href="#41386255">next</a><span>|</span><label class="collapse" for="c-41388037">[-]</label><label class="expand" for="c-41388037">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve had the displeasure of depending on one such project, which means I&#x27;d need to look at it once every few months. Need to page all the vocabulary back every time.<p>(Actually it was a project with multiple subprojects done by different teams. So I&#x27;d need to page a different set of vocabulary every time.)</div><br/></div></div><div id="41386255" class="c"><input type="checkbox" id="c-41386255" checked=""/><div class="controls bullet"><span class="by">j-bos</span><span>|</span><a href="#41385657">root</a><span>|</span><a href="#41386078">parent</a><span>|</span><a href="#41388037">prev</a><span>|</span><a href="#41384389">next</a><span>|</span><label class="collapse" for="c-41386255">[-]</label><label class="expand" for="c-41386255">[1 more]</label></div><br/><div class="children"><div class="content">Especially when the repo gets contorted into some other TPS service.</div><br/></div></div></div></div></div></div></div></div><div id="41384389" class="c"><input type="checkbox" id="c-41384389" checked=""/><div class="controls bullet"><span class="by">david2ndaccount</span><span>|</span><a href="#41385657">prev</a><span>|</span><a href="#41386974">next</a><span>|</span><label class="collapse" for="c-41384389">[-]</label><label class="expand" for="c-41384389">[1 more]</label></div><br/><div class="children"><div class="content">Somewhat a reference to <a href="https:&#x2F;&#x2F;wiki.c2.com&#x2F;?ThreeStarProgrammer" rel="nofollow">https:&#x2F;&#x2F;wiki.c2.com&#x2F;?ThreeStarProgrammer</a></div><br/></div></div><div id="41386974" class="c"><input type="checkbox" id="c-41386974" checked=""/><div class="controls bullet"><span class="by">fsndz</span><span>|</span><a href="#41384389">prev</a><span>|</span><a href="#41385992">next</a><span>|</span><label class="collapse" for="c-41386974">[-]</label><label class="expand" for="c-41386974">[1 more]</label></div><br/><div class="children"><div class="content">some people are just addicted to unnecessary complexity</div><br/></div></div><div id="41385992" class="c"><input type="checkbox" id="c-41385992" checked=""/><div class="controls bullet"><span class="by">metadat</span><span>|</span><a href="#41386974">prev</a><span>|</span><a href="#41383391">next</a><span>|</span><label class="collapse" for="c-41385992">[-]</label><label class="expand" for="c-41385992">[3 more]</label></div><br/><div class="children"><div class="content">How is this related to 4chan or any other social media?  It seems like a nonsense troll title designed to waste every reader&#x27;s time.</div><br/><div id="41386589" class="c"><input type="checkbox" id="c-41386589" checked=""/><div class="controls bullet"><span class="by">Uptrenda</span><span>|</span><a href="#41385992">parent</a><span>|</span><a href="#41383391">next</a><span>|</span><label class="collapse" for="c-41386589">[-]</label><label class="expand" for="c-41386589">[2 more]</label></div><br/><div class="children"><div class="content">Yeah, I have to agree with you here. 4chan does actually have a well-developed programming culture with their own memes. They came up with a quirky algorithm for sorting numbers using sleep (not practical but fun and very out of the box.) And they seem to really appreciate lisp like a lot of people here. There is sometimes good overlap between HN and 4chan. But that doesn&#x27;t seem to be the case here.</div><br/><div id="41386797" class="c"><input type="checkbox" id="c-41386797" checked=""/><div class="controls bullet"><span class="by">metadat</span><span>|</span><a href="#41385992">root</a><span>|</span><a href="#41386589">parent</a><span>|</span><a href="#41383391">next</a><span>|</span><label class="collapse" for="c-41386797">[-]</label><label class="expand" for="c-41386797">[1 more]</label></div><br/><div class="children"><div class="content">Thanks, we are on the same page.</div><br/></div></div></div></div></div></div><div id="41383527" class="c"><input type="checkbox" id="c-41383527" checked=""/><div class="controls bullet"><span class="by">fricze</span><span>|</span><a href="#41383391">prev</a><span>|</span><a href="#41383654">next</a><span>|</span><label class="collapse" for="c-41383527">[-]</label><label class="expand" for="c-41383527">[1 more]</label></div><br/><div class="children"><div class="content">Fun stuff</div><br/></div></div><div id="41383654" class="c"><input type="checkbox" id="c-41383654" checked=""/><div class="controls bullet"><span class="by">tedunangst</span><span>|</span><a href="#41383527">prev</a><span>|</span><label class="collapse" for="c-41383654">[-]</label><label class="expand" for="c-41383654">[1 more]</label></div><br/><div class="children"><div class="content">Would benefit from an explanation of what&#x27;s wrong with the chan chan pattern, which is fairly common. Are you similarly overwhelmed by the fact http.Response has a pointer to a http.Request?</div><br/></div></div></div></div></div></div></div></body></html>