<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1684054842543" as="style"/><link rel="stylesheet" href="styles.css?v=1684054842543"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="http://www.os2museum.com/wp/idle-dr-dos/">Idle DR-DOS</a>Â <span class="domain">(<a href="http://www.os2museum.com">www.os2museum.com</a>)</span></div><div class="subtext"><span>ingve</span> | <span>22 comments</span></div><br/><div><div id="35931978" class="c"><input type="checkbox" id="c-35931978" checked=""/><div class="controls bullet"><span class="by">PreInternet01</span><span>|</span><a href="#35935129">next</a><span>|</span><label class="collapse" for="c-35931978">[-]</label><label class="expand" for="c-35931978">[9 more]</label></div><br/><div class="children"><div class="content">I continue to be amazed by Michal Necasek&#x27;s ability to deeply care about things that literally nobody has even <i>thought</i> about for decades. Kudos!<p>Power management under DOS on early x86 laptops was downright primitive. There were no standards of <i>any</i> kind (I&#x27;d never even heard of the DR-DOS $IDLE$ device until now, but it doesn&#x27;t seem like that gained any kind of traction at the time), not even BIOS-based abstractions. Just vendor-provided &#x27;drivers&#x27; (in name only: it&#x27;s not like DOS made any distinction between system and user code) that directly communicated with the hardware.<p>Unsurprisingly, that all broke down as soon as you did anything even remotely interesting. Run QEMM386? No power management for you! Have a certain PCMCIA card inserted? Ditto! And shipping any kind of updates took forever at that time (literally FedExing floppies...), so getting a working system was pretty much impossible.</div><br/><div id="35933643" class="c"><input type="checkbox" id="c-35933643" checked=""/><div class="controls bullet"><span class="by">mysterydip</span><span>|</span><a href="#35931978">parent</a><span>|</span><a href="#35934478">next</a><span>|</span><label class="collapse" for="c-35933643">[-]</label><label class="expand" for="c-35933643">[7 more]</label></div><br/><div class="children"><div class="content">What I find interesting is things like the Atari Portfolio and HP 200LX could run their versions of DOS for quite a while on a couple AA batteries.</div><br/><div id="35935053" class="c"><input type="checkbox" id="c-35935053" checked=""/><div class="controls bullet"><span class="by">p_l</span><span>|</span><a href="#35931978">root</a><span>|</span><a href="#35933643">parent</a><span>|</span><a href="#35934314">next</a><span>|</span><label class="collapse" for="c-35935053">[-]</label><label class="expand" for="c-35935053">[5 more]</label></div><br/><div class="children"><div class="content">While Atari Portfolio used the CMOS version of 8088, I believe HP ones made the jump to 80186 (or compatibles) which AFAIK had, among other things, dynamic frequency setting</div><br/><div id="35935549" class="c"><input type="checkbox" id="c-35935549" checked=""/><div class="controls bullet"><span class="by">bombcar</span><span>|</span><a href="#35931978">root</a><span>|</span><a href="#35935053">parent</a><span>|</span><a href="#35934314">next</a><span>|</span><label class="collapse" for="c-35935549">[-]</label><label class="expand" for="c-35935549">[4 more]</label></div><br/><div class="children"><div class="content">Correct - the x00LX (I think the 95 also) were one of the few mass produced computers to use the rare 186.</div><br/><div id="35935737" class="c"><input type="checkbox" id="c-35935737" checked=""/><div class="controls bullet"><span class="by">bitwize</span><span>|</span><a href="#35931978">root</a><span>|</span><a href="#35935549">parent</a><span>|</span><a href="#35934314">next</a><span>|</span><label class="collapse" for="c-35935737">[-]</label><label class="expand" for="c-35935737">[3 more]</label></div><br/><div class="children"><div class="content">The HP 200LX and similar used a 186-compatible CPU called &quot;Hornet&quot;. Using an actual 80186 in a PC compatible would have been damn near impossible; the 186 was a system-on-chip design that had built-in timers, an interrupt controller, and other gubbins. Some of these were mapped to devices that had other devices mapped to them in the PC design, so building a 186-based system that met the common threshold for PC compatibility (i.e. it ran the IBM versions of Lotus and Flight Simulator acceptably well) was a nearly insurmountable task.<p>Because it acted more like a real OS, with user programs calling through driver APIs rather than touching the hardware directly, with the right driver support Windows could run on a 186-based system; one (the Tandy 2000) was used to develop Windows 1.0&#x27;s color modes because it had a high-resolution 8-color display before the EGA came out: <a href="https:&#x2F;&#x2F;www.1000bit.it&#x2F;lista&#x2F;t&#x2F;tandy&#x2F;tandy2000_ad.jpg" rel="nofollow">https:&#x2F;&#x2F;www.1000bit.it&#x2F;lista&#x2F;t&#x2F;tandy&#x2F;tandy2000_ad.jpg</a><p>ISA-compatible &quot;clones&quot; of the 186, like the NEC V40 and the &quot;Hornet&quot;, did not have the SoC problem and could be used in PC-compatible system designs.</div><br/><div id="35936313" class="c"><input type="checkbox" id="c-35936313" checked=""/><div class="controls bullet"><span class="by">pdw</span><span>|</span><a href="#35931978">root</a><span>|</span><a href="#35935737">parent</a><span>|</span><a href="#35936101">next</a><span>|</span><label class="collapse" for="c-35936313">[-]</label><label class="expand" for="c-35936313">[1 more]</label></div><br/><div class="children"><div class="content">It was never really clear to me if the &quot;Hornet&quot; was a custom design Intel did for HP or if &quot;Hornet&quot; was just the codename for the 80C186EA, a 186 with added powersaving support. Either way those palmtops were quite cool machines.</div><br/></div></div><div id="35936101" class="c"><input type="checkbox" id="c-35936101" checked=""/><div class="controls bullet"><span class="by">userbinator</span><span>|</span><a href="#35931978">root</a><span>|</span><a href="#35935737">parent</a><span>|</span><a href="#35936313">prev</a><span>|</span><a href="#35934314">next</a><span>|</span><label class="collapse" for="c-35936101">[-]</label><label class="expand" for="c-35936101">[1 more]</label></div><br/><div class="children"><div class="content">In other words, it has a 186-class ISA but isn&#x27;t the actual 186 SoC.</div><br/></div></div></div></div></div></div></div></div><div id="35934314" class="c"><input type="checkbox" id="c-35934314" checked=""/><div class="controls bullet"><span class="by">bombcar</span><span>|</span><a href="#35931978">root</a><span>|</span><a href="#35933643">parent</a><span>|</span><a href="#35935053">prev</a><span>|</span><a href="#35934478">next</a><span>|</span><label class="collapse" for="c-35934314">[-]</label><label class="expand" for="c-35934314">[1 more]</label></div><br/><div class="children"><div class="content">IIRC they had some basic &quot;suspend to RAM&quot; where when they closed they just barely kept the RAM alive and didn&#x27;t power anything else.</div><br/></div></div></div></div><div id="35934478" class="c"><input type="checkbox" id="c-35934478" checked=""/><div class="controls bullet"><span class="by">davidthewatson</span><span>|</span><a href="#35931978">parent</a><span>|</span><a href="#35933643">prev</a><span>|</span><a href="#35935129">next</a><span>|</span><label class="collapse" for="c-35934478">[-]</label><label class="expand" for="c-35934478">[1 more]</label></div><br/><div class="children"><div class="content">Ditto. Same feeling here.<p>Kudos, indeed!</div><br/></div></div></div></div><div id="35935129" class="c"><input type="checkbox" id="c-35935129" checked=""/><div class="controls bullet"><span class="by">userbinator</span><span>|</span><a href="#35931978">prev</a><span>|</span><a href="#35933655">next</a><span>|</span><label class="collapse" for="c-35935129">[-]</label><label class="expand" for="c-35935129">[3 more]</label></div><br/><div class="children"><div class="content"><i>When a DOS VM does not have any power management, the laptop quickly lets me know by kicking up the fan speed.</i><p>An examination of the source code for the PC&#x2F;AT BIOS reveals what it actually does when waiting for input on INT 16&#x2F;AH=0 --- it polls the keyboard buffer in a loop that also appears to repeatedly update the keyboard LED indicator status, and one of the instructions that it executes (with interrupts enabled) is a NOP. Naturally, that makes one wonder whether simply replacing that NOP with a HLT would be sufficient to idle the CPU, and if so, why didn&#x27;t IBM do that originally; and what newer BIOSes do.<p>The 6A69MV39 AWARD BIOS I inspected (from 1999) looks similar, but loops with a &quot;delay&quot; created by reading from I&#x2F;O port 0EBh.</div><br/><div id="35935553" class="c"><input type="checkbox" id="c-35935553" checked=""/><div class="controls bullet"><span class="by">bombcar</span><span>|</span><a href="#35935129">parent</a><span>|</span><a href="#35933655">next</a><span>|</span><label class="collapse" for="c-35935553">[-]</label><label class="expand" for="c-35935553">[2 more]</label></div><br/><div class="children"><div class="content">What would unHLT it? The next timer tick?</div><br/><div id="35935727" class="c"><input type="checkbox" id="c-35935727" checked=""/><div class="controls bullet"><span class="by">userbinator</span><span>|</span><a href="#35935129">root</a><span>|</span><a href="#35935553">parent</a><span>|</span><a href="#35933655">next</a><span>|</span><label class="collapse" for="c-35935727">[-]</label><label class="expand" for="c-35935727">[1 more]</label></div><br/><div class="children"><div class="content">It stops execution until an interrupt occurs.<p><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;HLT_(x86_instruction)" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;HLT_(x86_instruction)</a></div><br/></div></div></div></div></div></div><div id="35933655" class="c"><input type="checkbox" id="c-35933655" checked=""/><div class="controls bullet"><span class="by">NelsonMinar</span><span>|</span><a href="#35935129">prev</a><span>|</span><a href="#35934850">next</a><span>|</span><label class="collapse" for="c-35933655">[-]</label><label class="expand" for="c-35933655">[2 more]</label></div><br/><div class="children"><div class="content">This must be the first time in history when the technical information in a software patent was actually useful.</div><br/><div id="35935551" class="c"><input type="checkbox" id="c-35935551" checked=""/><div class="controls bullet"><span class="by">bombcar</span><span>|</span><a href="#35933655">parent</a><span>|</span><a href="#35934850">next</a><span>|</span><label class="collapse" for="c-35935551">[-]</label><label class="expand" for="c-35935551">[1 more]</label></div><br/><div class="children"><div class="content">A requirement that a software patent <i>compile and run</i> would be a welcome one.</div><br/></div></div></div></div><div id="35934850" class="c"><input type="checkbox" id="c-35934850" checked=""/><div class="controls bullet"><span class="by">qingcharles</span><span>|</span><a href="#35933655">prev</a><span>|</span><a href="#35933102">next</a><span>|</span><label class="collapse" for="c-35934850">[-]</label><label class="expand" for="c-35934850">[6 more]</label></div><br/><div class="children"><div class="content">This is an awesome article, but I was hoping for a copy of the final source and MAKE files on Github...</div><br/><div id="35934964" class="c"><input type="checkbox" id="c-35934964" checked=""/><div class="controls bullet"><span class="by">unnouinceput</span><span>|</span><a href="#35934850">parent</a><span>|</span><a href="#35933102">next</a><span>|</span><label class="collapse" for="c-35934964">[-]</label><label class="expand" for="c-35934964">[5 more]</label></div><br/><div class="children"><div class="content">Spoon-fed kids nowadays, sheesh. In my days an .img file was a godsend. You&#x27;d took it as your precious and ran away with it. A bit of disassembler and you were good to go. I recommend Ghidra, you&#x27;ll learn a valuable skill, namely reverse engineering, trust me, will give a very nice thrill of the hunt.</div><br/><div id="35935017" class="c"><input type="checkbox" id="c-35935017" checked=""/><div class="controls bullet"><span class="by">qingcharles</span><span>|</span><a href="#35934850">root</a><span>|</span><a href="#35934964">parent</a><span>|</span><a href="#35933102">next</a><span>|</span><label class="collapse" for="c-35935017">[-]</label><label class="expand" for="c-35935017">[4 more]</label></div><br/><div class="children"><div class="content">Believe me, I&#x27;ve done my time in the trenches. I&#x27;ve disassembled enough x86 machine code to get my sick kicks. And I did a lot of it using DEBUG.EXE, the monster that I am!</div><br/><div id="35935555" class="c"><input type="checkbox" id="c-35935555" checked=""/><div class="controls bullet"><span class="by">bombcar</span><span>|</span><a href="#35934850">root</a><span>|</span><a href="#35935017">parent</a><span>|</span><a href="#35933102">next</a><span>|</span><label class="collapse" for="c-35935555">[-]</label><label class="expand" for="c-35935555">[3 more]</label></div><br/><div class="children"><div class="content">Memories of inputting small COM programs with debug so I could jump start serial communications and bring over bigger guns - good bad times!</div><br/><div id="35935873" class="c"><input type="checkbox" id="c-35935873" checked=""/><div class="controls bullet"><span class="by">iforgotpassword</span><span>|</span><a href="#35934850">root</a><span>|</span><a href="#35935555">parent</a><span>|</span><a href="#35933102">next</a><span>|</span><label class="collapse" for="c-35935873">[-]</label><label class="expand" for="c-35935873">[2 more]</label></div><br/><div class="children"><div class="content">Should I feel uncool now for having used gwbasic for that? ;)</div><br/><div id="35935889" class="c"><input type="checkbox" id="c-35935889" checked=""/><div class="controls bullet"><span class="by">bombcar</span><span>|</span><a href="#35934850">root</a><span>|</span><a href="#35935873">parent</a><span>|</span><a href="#35933102">next</a><span>|</span><label class="collapse" for="c-35935889">[-]</label><label class="expand" for="c-35935889">[1 more]</label></div><br/><div class="children"><div class="content">Look at this fancy dude having gwbasic ha! We were lucky to find a DEBUG laying around, some poor slobs were stuck with EDLIN.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="35933102" class="c"><input type="checkbox" id="c-35933102" checked=""/><div class="controls bullet"><span class="by">bradneuberg</span><span>|</span><a href="#35934850">prev</a><span>|</span><label class="collapse" for="c-35933102">[-]</label><label class="expand" for="c-35933102">[1 more]</label></div><br/><div class="children"><div class="content">This is pretty epic work, nicely done!</div><br/></div></div></div></div></div></div></div></body></html>