<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1722243658788" as="style"/><link rel="stylesheet" href="styles.css?v=1722243658788"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/StreamPot/StreamPot">StreamPot: Run FFmpeg as an API with fluent-FFmpeg compatibility, queues and S3</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>thunderbong</span> | <span>18 comments</span></div><br/><div><div id="41093404" class="c"><input type="checkbox" id="c-41093404" checked=""/><div class="controls bullet"><span class="by">justin_murray</span><span>|</span><a href="#41096190">next</a><span>|</span><label class="collapse" for="c-41093404">[-]</label><label class="expand" for="c-41093404">[8 more]</label></div><br/><div class="children"><div class="content">Seeing the need for polling the job status is off putting, especially for a js api that already is using async. If you _need_ to use polling, at least provide a convenience method I can just await. Better yet, add some signaling to the http api via eventsource or something.</div><br/><div id="41094241" class="c"><input type="checkbox" id="c-41094241" checked=""/><div class="controls bullet"><span class="by">osbre</span><span>|</span><a href="#41093404">parent</a><span>|</span><a href="#41098338">next</a><span>|</span><label class="collapse" for="c-41094241">[-]</label><label class="expand" for="c-41094241">[2 more]</label></div><br/><div class="children"><div class="content">Thank you! We do have one - `runAndWait`. I will shortly update the docs and I agree that using SSE would be more efficient than polling. Will add that next!</div><br/><div id="41094281" class="c"><input type="checkbox" id="c-41094281" checked=""/><div class="controls bullet"><span class="by">01HNNWZ0MV43FF</span><span>|</span><a href="#41093404">root</a><span>|</span><a href="#41094241">parent</a><span>|</span><a href="#41098338">next</a><span>|</span><label class="collapse" for="c-41094281">[-]</label><label class="expand" for="c-41094281">[1 more]</label></div><br/><div class="children"><div class="content">Long polling would be cool!</div><br/></div></div></div></div><div id="41098338" class="c"><input type="checkbox" id="c-41098338" checked=""/><div class="controls bullet"><span class="by">rainbowskys</span><span>|</span><a href="#41093404">parent</a><span>|</span><a href="#41094241">prev</a><span>|</span><a href="#41095887">next</a><span>|</span><label class="collapse" for="c-41098338">[-]</label><label class="expand" for="c-41098338">[1 more]</label></div><br/><div class="children"><div class="content">Can you elaborate on what you mean by signaling to the http api?</div><br/></div></div><div id="41095887" class="c"><input type="checkbox" id="c-41095887" checked=""/><div class="controls bullet"><span class="by">jjcm</span><span>|</span><a href="#41093404">parent</a><span>|</span><a href="#41098338">prev</a><span>|</span><a href="#41096190">next</a><span>|</span><label class="collapse" for="c-41095887">[-]</label><label class="expand" for="c-41095887">[4 more]</label></div><br/><div class="children"><div class="content">Highly prefer and recommend websocket connections for polling. This is what I ended up doing for my side project&#x27;s video encoding needs[1]. It lets me get silky smooth progress indicators on multiple encoding resolutions at once.<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;jjcm&#x2F;nonio-video-cdn&#x2F;blob&#x2F;master&#x2F;route&#x2F;encode.go#L233">https:&#x2F;&#x2F;github.com&#x2F;jjcm&#x2F;nonio-video-cdn&#x2F;blob&#x2F;master&#x2F;route&#x2F;en...</a></div><br/><div id="41096221" class="c"><input type="checkbox" id="c-41096221" checked=""/><div class="controls bullet"><span class="by">LoganDark</span><span>|</span><a href="#41093404">root</a><span>|</span><a href="#41095887">parent</a><span>|</span><a href="#41096190">next</a><span>|</span><label class="collapse" for="c-41096221">[-]</label><label class="expand" for="c-41096221">[3 more]</label></div><br/><div class="children"><div class="content">Do you mean over* polling (instead of polling)? Polling (repeatedly asking the server) and pushing (the server telling you directly) are two different things; polling over WebSocket seems sort of weird.</div><br/><div id="41098911" class="c"><input type="checkbox" id="c-41098911" checked=""/><div class="controls bullet"><span class="by">inopinatus</span><span>|</span><a href="#41093404">root</a><span>|</span><a href="#41096221">parent</a><span>|</span><a href="#41096190">next</a><span>|</span><label class="collapse" for="c-41098911">[-]</label><label class="expand" for="c-41098911">[2 more]</label></div><br/><div class="children"><div class="content">A websocket is still invoking polling behaviour, just further down the network stack where application code can’t see it. The element that <i>isn’t</i> polling is the interrupt handler in the top half of the kernel (or architectural equivalent)</div><br/><div id="41098932" class="c"><input type="checkbox" id="c-41098932" checked=""/><div class="controls bullet"><span class="by">LoganDark</span><span>|</span><a href="#41093404">root</a><span>|</span><a href="#41098911">parent</a><span>|</span><a href="#41096190">next</a><span>|</span><label class="collapse" for="c-41098932">[-]</label><label class="expand" for="c-41098932">[1 more]</label></div><br/><div class="children"><div class="content">Servers doing polling internally and sending you periodic status updates over WebSocket is relatively common. I don&#x27;t think polling <i>over</i> WebSocket is a good idea though.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="41096190" class="c"><input type="checkbox" id="c-41096190" checked=""/><div class="controls bullet"><span class="by">jackbridger</span><span>|</span><a href="#41093404">prev</a><span>|</span><a href="#41097447">next</a><span>|</span><label class="collapse" for="c-41096190">[-]</label><label class="expand" for="c-41096190">[2 more]</label></div><br/><div class="children"><div class="content">Jack from StreamPot here. So happy to see it shared here. We&#x27;d love you to try it out and give us any feedback or requests.</div><br/><div id="41097517" class="c"><input type="checkbox" id="c-41097517" checked=""/><div class="controls bullet"><span class="by">leerob</span><span>|</span><a href="#41096190">parent</a><span>|</span><a href="#41097447">next</a><span>|</span><label class="collapse" for="c-41097517">[-]</label><label class="expand" for="c-41097517">[1 more]</label></div><br/><div class="children"><div class="content">Looks really nice, great work!</div><br/></div></div></div></div><div id="41097447" class="c"><input type="checkbox" id="c-41097447" checked=""/><div class="controls bullet"><span class="by">ggernov</span><span>|</span><a href="#41096190">prev</a><span>|</span><a href="#41096847">next</a><span>|</span><label class="collapse" for="c-41097447">[-]</label><label class="expand" for="c-41097447">[3 more]</label></div><br/><div class="children"><div class="content">Is there any way I can run this in a fully local setup?  Curious if a config for nginx could be provided?</div><br/><div id="41098874" class="c"><input type="checkbox" id="c-41098874" checked=""/><div class="controls bullet"><span class="by">pjc50</span><span>|</span><a href="#41097447">parent</a><span>|</span><a href="#41097482">next</a><span>|</span><label class="collapse" for="c-41098874">[-]</label><label class="expand" for="c-41098874">[1 more]</label></div><br/><div class="children"><div class="content">Isn&#x27;t the local version just running ffmpeg as a command line?</div><br/></div></div><div id="41097482" class="c"><input type="checkbox" id="c-41097482" checked=""/><div class="controls bullet"><span class="by">toomuchtodo</span><span>|</span><a href="#41097447">parent</a><span>|</span><a href="#41098874">prev</a><span>|</span><a href="#41096847">next</a><span>|</span><label class="collapse" for="c-41097482">[-]</label><label class="expand" for="c-41097482">[1 more]</label></div><br/><div class="children"><div class="content">Looks like you could potentially point this at Minio local S3 compatible storage based on env vars?<p><a href="https:&#x2F;&#x2F;docs.streampot.io&#x2F;installation" rel="nofollow">https:&#x2F;&#x2F;docs.streampot.io&#x2F;installation</a></div><br/></div></div></div></div><div id="41096847" class="c"><input type="checkbox" id="c-41096847" checked=""/><div class="controls bullet"><span class="by">gelatocar</span><span>|</span><a href="#41097447">prev</a><span>|</span><a href="#41096303">next</a><span>|</span><label class="collapse" for="c-41096847">[-]</label><label class="expand" for="c-41096847">[1 more]</label></div><br/><div class="children"><div class="content">This is great, I don&#x27;t have a concrete use-case right now but can definitely see myself returning to this in the future. One thing that would be handy is having a way to either accept a ffmpeg cli command, or convert from a cli command to the typescript syntax. My experience with ffmpeg if you often do a lot of copying and pasting of commands from documentation or random guides, it&#x27;d save a bit of time if you didn&#x27;t need to transcribe the commands into streampot&#x27;s syntax.</div><br/></div></div><div id="41096303" class="c"><input type="checkbox" id="c-41096303" checked=""/><div class="controls bullet"><span class="by">rustcleaner</span><span>|</span><a href="#41096847">prev</a><span>|</span><a href="#41095483">next</a><span>|</span><label class="collapse" for="c-41096303">[-]</label><label class="expand" for="c-41096303">[1 more]</label></div><br/><div class="children"><div class="content">Somebody please bring fully functional ffmpeg to Android via F-Droid please, one which is not compiled against &#x2F;storage&#x2F;emulated&#x2F;0&#x2F; like Termux, etc, are.  Many users rely on multiple profiles and don&#x27;t run anything in the primary profile.  I know of nothing right now like this.  No FFshare doesn&#x27;t work for purpose as outlined.<p>Bonus if all of Termux can be fixed for secondary Android profiles,</div><br/></div></div><div id="41095483" class="c"><input type="checkbox" id="c-41095483" checked=""/><div class="controls bullet"><span class="by">leros</span><span>|</span><a href="#41096303">prev</a><span>|</span><label class="collapse" for="c-41095483">[-]</label><label class="expand" for="c-41095483">[2 more]</label></div><br/><div class="children"><div class="content">Looks really cool. I&#x27;ve thought about building a business around ffmpeg myself. Btw, your self hosting link is broken.</div><br/><div id="41096129" class="c"><input type="checkbox" id="c-41096129" checked=""/><div class="controls bullet"><span class="by">jackbridger</span><span>|</span><a href="#41095483">parent</a><span>|</span><label class="collapse" for="c-41096129">[-]</label><label class="expand" for="c-41096129">[1 more]</label></div><br/><div class="children"><div class="content">Thanks! Oops, good spot. Updated it. 
This is where it was supposed to go <a href="https:&#x2F;&#x2F;docs.streampot.io&#x2F;installation.html" rel="nofollow">https:&#x2F;&#x2F;docs.streampot.io&#x2F;installation.html</a></div><br/></div></div></div></div></div></div></div></div></div></body></html>