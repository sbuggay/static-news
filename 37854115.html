<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1697101265565" as="style"/><link rel="stylesheet" href="styles.css?v=1697101265565"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/ohler55/ojg/blob/develop/design.md">A Journey building a fast JSON parser and full JSONPath</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>atomicnature</span> | <span>13 comments</span></div><br/><div><div id="37854633" class="c"><input type="checkbox" id="c-37854633" checked=""/><div class="controls bullet"><span class="by">baz00</span><span>|</span><a href="#37854386">next</a><span>|</span><label class="collapse" for="c-37854633">[-]</label><label class="expand" for="c-37854633">[4 more]</label></div><br/><div class="children"><div class="content">Is JSON XML yet? Nearly!<p>I’m going to invent Baz’s 11th law of computing here: any data format that isn’t XML will evolve into a badly specified version of XML over time.</div><br/><div id="37854747" class="c"><input type="checkbox" id="c-37854747" checked=""/><div class="controls bullet"><span class="by">kevingadd</span><span>|</span><a href="#37854633">parent</a><span>|</span><a href="#37854749">next</a><span>|</span><label class="collapse" for="c-37854747">[-]</label><label class="expand" for="c-37854747">[2 more]</label></div><br/><div class="children"><div class="content">With respect for the pain everyone has suffered through due to XML... at this point I prefer XML with a good schema to JSON any day, even if it&#x27;s more verbose and more awkward to hand-edit. It&#x27;s just so much easier to validate it or generate code to handle it, and you get things like XSLT or XPath if you want them.</div><br/><div id="37854760" class="c"><input type="checkbox" id="c-37854760" checked=""/><div class="controls bullet"><span class="by">Deukhoofd</span><span>|</span><a href="#37854633">root</a><span>|</span><a href="#37854747">parent</a><span>|</span><a href="#37854749">next</a><span>|</span><label class="collapse" for="c-37854760">[-]</label><label class="expand" for="c-37854760">[1 more]</label></div><br/><div class="children"><div class="content">I mean, you can use JSON Schema as well to have similar functionality to XML Schema.</div><br/></div></div></div></div><div id="37854749" class="c"><input type="checkbox" id="c-37854749" checked=""/><div class="controls bullet"><span class="by">Traubenfuchs</span><span>|</span><a href="#37854633">parent</a><span>|</span><a href="#37854747">prev</a><span>|</span><a href="#37854386">next</a><span>|</span><label class="collapse" for="c-37854749">[-]</label><label class="expand" for="c-37854749">[1 more]</label></div><br/><div class="children"><div class="content">As someone who greatly enjoyed the rigidity of SOAP&#x2F;xml, which made proper architectural planning and careful deprecation mandatory, I wonder where we went so wrong. I feel like it&#x27;s all connected to the impreciseness and typelessness of JavaScript. SOAP&#x2F;xml to generate well defined client and server entry points in Java is how things should be done and SoapUI was a pleasure to use.</div><br/></div></div></div></div><div id="37854386" class="c"><input type="checkbox" id="c-37854386" checked=""/><div class="controls bullet"><span class="by">tomthe</span><span>|</span><a href="#37854633">prev</a><span>|</span><a href="#37854589">next</a><span>|</span><label class="collapse" for="c-37854386">[-]</label><label class="expand" for="c-37854386">[6 more]</label></div><br/><div class="children"><div class="content">I like the &quot;Simple Encoding Notation&quot; (SEN) of the underlying library: <a href="https:&#x2F;&#x2F;github.com&#x2F;ohler55&#x2F;ojg&#x2F;blob&#x2F;develop&#x2F;sen.md">https:&#x2F;&#x2F;github.com&#x2F;ohler55&#x2F;ojg&#x2F;blob&#x2F;develop&#x2F;sen.md</a><p>&quot;
A valid example of a SEN document is:<p>{
  one: 1
  two: 2
  array: [a b c]
  yes: true
}
&quot;</div><br/><div id="37854605" class="c"><input type="checkbox" id="c-37854605" checked=""/><div class="controls bullet"><span class="by">kubanczyk</span><span>|</span><a href="#37854386">parent</a><span>|</span><a href="#37854897">next</a><span>|</span><label class="collapse" for="c-37854605">[-]</label><label class="expand" for="c-37854605">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Which is the same as the following JSON:<p><pre><code>  {
    &quot;one&quot;: 1,
    &quot;two&quot;: 2,
    &quot;array&quot;: [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;],
    &quot;yes&quot;: true
  }
</code></pre>
That example also caught my attention, but in a bad way. It looks just like a comeback of one of the worst ideas of YAML.<p>My immediate question would be what&#x27;s the JSON for this SEN I&#x27;ve crafted:<p><pre><code>  {
    array: [string1 string2 &quot;true&quot; true True TRUE yes y]
  }
</code></pre>
For more fun, there&#x27;s a single problematic entry here, can you spot it?:<p><pre><code>  1.20.4
  1.204.4
  1.20
  1.204
  1.20.0
  1.20.00
  1.20-rc2
</code></pre>
Or, level expert, there&#x27;s exactly one problem here as well:<p><pre><code>  0a1f
  0bfd
  0c0c
  0d01
  0e02</code></pre></div><br/><div id="37854799" class="c"><input type="checkbox" id="c-37854799" checked=""/><div class="controls bullet"><span class="by">tomthe</span><span>|</span><a href="#37854386">root</a><span>|</span><a href="#37854605">parent</a><span>|</span><a href="#37854840">next</a><span>|</span><label class="collapse" for="c-37854799">[-]</label><label class="expand" for="c-37854799">[1 more]</label></div><br/><div class="children"><div class="content">Thank you for thinking more deeply about this than I did!
But I do not see a problem in your first example, only true is the true true (according to my browser and the linked definition on <a href="https:&#x2F;&#x2F;www.json.org" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.json.org</a>)<p>I don&#x27;t get your other examples, can you explain? I assumed that 1.20.4 is not a valid SEN entry, because it starts with a digit but is not a number.</div><br/></div></div><div id="37854840" class="c"><input type="checkbox" id="c-37854840" checked=""/><div class="controls bullet"><span class="by">jarym</span><span>|</span><a href="#37854386">root</a><span>|</span><a href="#37854605">parent</a><span>|</span><a href="#37854799">prev</a><span>|</span><a href="#37854897">next</a><span>|</span><label class="collapse" for="c-37854840">[-]</label><label class="expand" for="c-37854840">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not following: 
`
  {
    array: [string1 string2 &quot;true&quot; true True TRUE yes y]
  }
`
Doesn&#x27;t look like a valid SEN or JSON. The `y` `yes`, `True`, TRUE` aren&#x27;t valid keywords&#x2F;variables&#x2F;consts and `string1` and `string2` look like variable references which aren&#x27;t something SEN or JSON support.  The closest valid thing I can imagine is:<p>`
  {
    array: [&quot;string1&quot; &quot;string2&quot; &quot;true&quot; true &quot;True&quot; &quot;TRUE&quot; &quot;yes&quot; &quot;y&quot;]
  }
`</div><br/></div></div></div></div><div id="37854897" class="c"><input type="checkbox" id="c-37854897" checked=""/><div class="controls bullet"><span class="by">lazyasciiart</span><span>|</span><a href="#37854386">parent</a><span>|</span><a href="#37854605">prev</a><span>|</span><a href="#37854407">next</a><span>|</span><label class="collapse" for="c-37854897">[-]</label><label class="expand" for="c-37854897">[1 more]</label></div><br/><div class="children"><div class="content">Am I missing something about the definition of “tokenStart”? It can be ‘letter’ or three other characters: but all those other characters (and more) are already in the definition of ‘letter’?</div><br/></div></div><div id="37854407" class="c"><input type="checkbox" id="c-37854407" checked=""/><div class="controls bullet"><span class="by">koito17</span><span>|</span><a href="#37854386">parent</a><span>|</span><a href="#37854897">prev</a><span>|</span><a href="#37854589">next</a><span>|</span><label class="collapse" for="c-37854407">[-]</label><label class="expand" for="c-37854407">[1 more]</label></div><br/><div class="children"><div class="content">An interesting observation: if you move the colon on the opposite side then you get valid EDN data!<p>{:one 1 :two 2 :array [a b c] :yes true}<p>cf. <a href="https:&#x2F;&#x2F;github.com&#x2F;edn-format&#x2F;edn">https:&#x2F;&#x2F;github.com&#x2F;edn-format&#x2F;edn</a><p>Likewise, commas are considered whitespace. They are sometimes added to make lengthy maps easier to read.</div><br/></div></div></div></div><div id="37854589" class="c"><input type="checkbox" id="c-37854589" checked=""/><div class="controls bullet"><span class="by">ithkuil</span><span>|</span><a href="#37854386">prev</a><span>|</span><a href="#37854692">next</a><span>|</span><label class="collapse" for="c-37854589">[-]</label><label class="expand" for="c-37854589">[1 more]</label></div><br/><div class="children"><div class="content">reminder of recent efforts at standardizing JSONPath: <a href="https:&#x2F;&#x2F;datatracker.ietf.org&#x2F;wg&#x2F;jsonpath&#x2F;about&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;datatracker.ietf.org&#x2F;wg&#x2F;jsonpath&#x2F;about&#x2F;</a></div><br/></div></div></div></div></div></div></div></body></html>