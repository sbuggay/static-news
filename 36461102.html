<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1687683650533" as="style"/><link rel="stylesheet" href="styles.css?v=1687683650533"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/binpash/try">Try: run a command and inspect its effects before changing your live system</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>espressoRunner</span> | <span>146 comments</span></div><br/><div><div id="36466135" class="c"><input type="checkbox" id="c-36466135" checked=""/><div class="controls bullet"><span class="by">MichaelMoser123</span><span>|</span><a href="#36461317">next</a><span>|</span><label class="collapse" for="c-36466135">[-]</label><label class="expand" for="c-36466135">[1 more]</label></div><br/><div class="children"><div class="content">he is not running in a container - he is not running the command in isolation from the system, he is running on the current system. The script is mounting an overlay file system for each root directory on the current system, then looking at what has been added as a new layer - that&#x27;s what the command is supposed to add to the running system.<p>Pure genius.<p>See <a href="https:&#x2F;&#x2F;github.com&#x2F;binpash&#x2F;try&#x2F;blob&#x2F;b2df6b650cb2b589515631748761e9910a07c343&#x2F;try#L22C4-L22C4">https:&#x2F;&#x2F;github.com&#x2F;binpash&#x2F;try&#x2F;blob&#x2F;b2df6b650cb2b58951563174...</a></div><br/></div></div><div id="36461317" class="c"><input type="checkbox" id="c-36461317" checked=""/><div class="controls bullet"><span class="by">mikepurvis</span><span>|</span><a href="#36466135">prev</a><span>|</span><a href="#36462177">next</a><span>|</span><label class="collapse" for="c-36461317">[-]</label><label class="expand" for="c-36461317">[57 more]</label></div><br/><div class="children"><div class="content">Looks nifty— basically it&#x27;s the &quot;let me try that in a container first&quot; except on your live system with no setup to get it going.<p>That said, as a NixOS user for the last year or so, I think I&#x27;ve gotten a bit spoiled by just not worrying about this kind of thing any more— eliminating the filesystem (other than home and var) as a big ol&#x27; chunk of globally mutable state is so liberating.</div><br/><div id="36461865" class="c"><input type="checkbox" id="c-36461865" checked=""/><div class="controls bullet"><span class="by">rvdca</span><span>|</span><a href="#36461317">parent</a><span>|</span><a href="#36462037">next</a><span>|</span><label class="collapse" for="c-36461865">[-]</label><label class="expand" for="c-36461865">[27 more]</label></div><br/><div class="children"><div class="content">I feel that one day I should write about this curse that NixOS brings into your life when you start enjoying it : you cannot go back to different systems but at the same time you  (at least I) cannot vouch and recommend it to others as the languages and constructs (Flakes with a space or an utf-8 character in the path ? Here is a rabbit hole you can go down with) are just so byzantine and painful to work with but oh boy do they work... A crystal prison, nice but with sharp corners everywhere...</div><br/><div id="36462426" class="c"><input type="checkbox" id="c-36462426" checked=""/><div class="controls bullet"><span class="by">rhaps0dy</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36461865">parent</a><span>|</span><a href="#36462843">next</a><span>|</span><label class="collapse" for="c-36462426">[-]</label><label class="expand" for="c-36462426">[18 more]</label></div><br/><div class="children"><div class="content">It&#x27;s the same as Emacs for me. I don&#x27;t want to leave it but I don&#x27;t recommend it to anyone.</div><br/><div id="36463966" class="c"><input type="checkbox" id="c-36463966" checked=""/><div class="controls bullet"><span class="by">ledauphin</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36462426">parent</a><span>|</span><a href="#36462734">next</a><span>|</span><label class="collapse" for="c-36463966">[-]</label><label class="expand" for="c-36463966">[1 more]</label></div><br/><div class="children"><div class="content">this is exactly the software that came to mind for me.</div><br/></div></div><div id="36462734" class="c"><input type="checkbox" id="c-36462734" checked=""/><div class="controls bullet"><span class="by">lovelyviking</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36462426">parent</a><span>|</span><a href="#36463966">prev</a><span>|</span><a href="#36462843">next</a><span>|</span><label class="collapse" for="c-36462734">[-]</label><label class="expand" for="c-36462734">[16 more]</label></div><br/><div class="children"><div class="content">Why you don’t recommend it to anyone? May be 
a proper recommendation is what I need to really 
be engaged with it ? The same for Nix.<p>Please more  details about the practical  benefits
because I kind of see in general why it can be good 
but there is still certain lack of the real practical demonstrations from those who use it daily.</div><br/><div id="36463586" class="c"><input type="checkbox" id="c-36463586" checked=""/><div class="controls bullet"><span class="by">dxhdr</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36462734">parent</a><span>|</span><a href="#36465341">next</a><span>|</span><label class="collapse" for="c-36463586">[-]</label><label class="expand" for="c-36463586">[10 more]</label></div><br/><div class="children"><div class="content">Try out Doom! You don&#x27;t have to use evil-mode either if that&#x27;s not your thing (I don&#x27;t use it), just disable :editor evil in your init.el.<p>Personally I kind of view it like having a custom mechanical keyboard. Why not invest some time and money into making your tools more ergonomic and enjoyable? Yeah any keyboard will work, and any text editor will edit documents.<p>Text-editing aside, magit and org-mode are particularly nice in Emacs. Plus there&#x27;s just something comforting knowing that Emacs will always be there for me, just the way I set it up.</div><br/><div id="36465089" class="c"><input type="checkbox" id="c-36465089" checked=""/><div class="controls bullet"><span class="by">marssaxman</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36463586">parent</a><span>|</span><a href="#36464290">next</a><span>|</span><label class="collapse" for="c-36465089">[-]</label><label class="expand" for="c-36465089">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Why not invest some time and money into making your tools more ergonomic and enjoyable?<p>I did that for many years. After switching from one machine to the next, one operating system to the next, one IDE to the next, everything constantly changing, year after year - I found myself in a job where I had to reinstall the OS and everything on it from scratch, every two weeks, for a year, because... well. Because! By the time that was over, I had given up customizing much of anything at all, and that has been working out all right ever since.</div><br/><div id="36465776" class="c"><input type="checkbox" id="c-36465776" checked=""/><div class="controls bullet"><span class="by">zelphirkalt</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36465089">parent</a><span>|</span><a href="#36465608">next</a><span>|</span><label class="collapse" for="c-36465776">[-]</label><label class="expand" for="c-36465776">[1 more]</label></div><br/><div class="children"><div class="content">Why not keep your config externally available and reuse when setting up again? With Emacs that is easily possible.</div><br/></div></div><div id="36465608" class="c"><input type="checkbox" id="c-36465608" checked=""/><div class="controls bullet"><span class="by">hollander</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36465089">parent</a><span>|</span><a href="#36465776">prev</a><span>|</span><a href="#36464290">next</a><span>|</span><label class="collapse" for="c-36465608">[-]</label><label class="expand" for="c-36465608">[1 more]</label></div><br/><div class="children"><div class="content">Reinstall every other week. Haven&#x27;t done that since Windows 98.</div><br/></div></div></div></div><div id="36464290" class="c"><input type="checkbox" id="c-36464290" checked=""/><div class="controls bullet"><span class="by">TedDoesntTalk</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36463586">parent</a><span>|</span><a href="#36465089">prev</a><span>|</span><a href="#36465341">next</a><span>|</span><label class="collapse" for="c-36464290">[-]</label><label class="expand" for="c-36464290">[6 more]</label></div><br/><div class="children"><div class="content">&gt; Why not invest some time and money into making your tools more ergonomic and enjoyable?<p>Because unless you use just one system daily or even weekly, customizations are nothing an annoyance since it’s unlikely you can clone every customization across every system you use daily.</div><br/><div id="36464518" class="c"><input type="checkbox" id="c-36464518" checked=""/><div class="controls bullet"><span class="by">DaiPlusPlus</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36464290">parent</a><span>|</span><a href="#36465200">next</a><span>|</span><label class="collapse" for="c-36464518">[-]</label><label class="expand" for="c-36464518">[4 more]</label></div><br/><div class="children"><div class="content">&gt;  since it’s unlikely you can clone every customization across every system you use daily.<p>But you can, even for physically distinct machines: just package-up your emacs&#x2F;environment&#x2F;shell&#x2F;etc profile into a bash-bunny USB stick, such that the bunny uses its keyboard emulation to type-out and run the commands that load your profile into your current machine.</div><br/><div id="36465333" class="c"><input type="checkbox" id="c-36465333" checked=""/><div class="controls bullet"><span class="by">111111IIIIIII</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36464518">parent</a><span>|</span><a href="#36465327">next</a><span>|</span><label class="collapse" for="c-36465333">[-]</label><label class="expand" for="c-36465333">[1 more]</label></div><br/><div class="children"><div class="content">Unlike most things in the comments above, I have no clue what you are talking about and highly doubt many people do.</div><br/></div></div><div id="36465327" class="c"><input type="checkbox" id="c-36465327" checked=""/><div class="controls bullet"><span class="by">thwarted</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36464518">parent</a><span>|</span><a href="#36465333">prev</a><span>|</span><a href="#36465200">next</a><span>|</span><label class="collapse" for="c-36465327">[-]</label><label class="expand" for="c-36465327">[2 more]</label></div><br/><div class="children"><div class="content">Not everyone works on the machine they are sitting in front of.</div><br/><div id="36465516" class="c"><input type="checkbox" id="c-36465516" checked=""/><div class="controls bullet"><span class="by">pastage</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36465327">parent</a><span>|</span><a href="#36465200">next</a><span>|</span><label class="collapse" for="c-36465516">[-]</label><label class="expand" for="c-36465516">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s why storing your conf in a keyboard input device is so nice, works as long as you can insert your own keyboard. I think I might start doing that, but the systems I remote in to are so different can not be sure emacs&#x2F;vim is there.<p>I would recommend a Raspberry Pico as a fake keyboard, it has 2MB of storage. But that all falls apart when you are not allowed your own USB devices...</div><br/></div></div></div></div></div></div><div id="36465200" class="c"><input type="checkbox" id="c-36465200" checked=""/><div class="controls bullet"><span class="by">worthless-trash</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36464290">parent</a><span>|</span><a href="#36464518">prev</a><span>|</span><a href="#36465341">next</a><span>|</span><label class="collapse" for="c-36465200">[-]</label><label class="expand" for="c-36465200">[1 more]</label></div><br/><div class="children"><div class="content">bring your $HOME&#x2F;.emacs.d around with you, pretty easy :)</div><br/></div></div></div></div></div></div><div id="36465341" class="c"><input type="checkbox" id="c-36465341" checked=""/><div class="controls bullet"><span class="by">imiric</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36462734">parent</a><span>|</span><a href="#36463586">prev</a><span>|</span><a href="#36463738">next</a><span>|</span><label class="collapse" for="c-36465341">[-]</label><label class="expand" for="c-36465341">[2 more]</label></div><br/><div class="children"><div class="content">A long-term practical benefit: it will always be there for you.<p>In a world of corporate built software that may or may not exist in a few years, Emacs is an investment for life. It&#x27;s the last editor, or whatever you use it for, that you&#x27;ll ever need.</div><br/><div id="36465375" class="c"><input type="checkbox" id="c-36465375" checked=""/><div class="controls bullet"><span class="by">eternauta3k</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36465341">parent</a><span>|</span><a href="#36463738">next</a><span>|</span><label class="collapse" for="c-36465375">[-]</label><label class="expand" for="c-36465375">[1 more]</label></div><br/><div class="children"><div class="content">Any open source software project will last as long as the community lasts. If interest fades, then it will become worse&#x2F;harder to run. It slowly becomes incompatible with newer systems, no one is making plugins, documentation becomes outdated.</div><br/></div></div></div></div><div id="36463738" class="c"><input type="checkbox" id="c-36463738" checked=""/><div class="controls bullet"><span class="by">bsder</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36462734">parent</a><span>|</span><a href="#36465341">prev</a><span>|</span><a href="#36462772">next</a><span>|</span><label class="collapse" for="c-36463738">[-]</label><label class="expand" for="c-36463738">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Why you don’t recommend it to anyone?<p>I don&#x27;t recommend emacs because the vast majority of packages have &quot;Lisp Incompletion Syndrome&quot;--they get the easy 80% right and leave you to get bitten by the difficult 20%.<p>lsp-mode and tramp still have bad Heisenbug interactions even after you get the correct incantations to make them not crash.  Other packages are similar.<p>There are a few very core packages that work well.  Everything else is in sufficient disrepair that you <i>will</i> have to pick the broken pieces up off the floor at fairly regular intervals.</div><br/></div></div><div id="36462772" class="c"><input type="checkbox" id="c-36462772" checked=""/><div class="controls bullet"><span class="by">LadyCailin</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36462734">parent</a><span>|</span><a href="#36463738">prev</a><span>|</span><a href="#36462843">next</a><span>|</span><label class="collapse" for="c-36462772">[-]</label><label class="expand" for="c-36462772">[2 more]</label></div><br/><div class="children"><div class="content">Are you kidding me? Who wouldn’t want to emulate an OS or play games directly from their text editor?</div><br/><div id="36462996" class="c"><input type="checkbox" id="c-36462996" checked=""/><div class="controls bullet"><span class="by">Conscat</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36462772">parent</a><span>|</span><a href="#36462843">next</a><span>|</span><label class="collapse" for="c-36462996">[-]</label><label class="expand" for="c-36462996">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m loving Dunnet in Emacs. Nobody spoil me on how it ends, plz.</div><br/></div></div></div></div></div></div></div></div><div id="36462843" class="c"><input type="checkbox" id="c-36462843" checked=""/><div class="controls bullet"><span class="by">vczf</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36461865">parent</a><span>|</span><a href="#36462426">prev</a><span>|</span><a href="#36462194">next</a><span>|</span><label class="collapse" for="c-36462843">[-]</label><label class="expand" for="c-36462843">[1 more]</label></div><br/><div class="children"><div class="content">Funny you mention spaces in flake paths. I was hit by that bug and bumped the PR to address it, and it might be getting merged in soon!</div><br/></div></div><div id="36462194" class="c"><input type="checkbox" id="c-36462194" checked=""/><div class="controls bullet"><span class="by">pxc</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36461865">parent</a><span>|</span><a href="#36462843">prev</a><span>|</span><a href="#36464603">next</a><span>|</span><label class="collapse" for="c-36462194">[-]</label><label class="expand" for="c-36462194">[4 more]</label></div><br/><div class="children"><div class="content">You mean like this? <a href="https:&#x2F;&#x2F;blog.wesleyac.com&#x2F;posts&#x2F;the-curse-of-nixos" rel="nofollow noreferrer">https:&#x2F;&#x2F;blog.wesleyac.com&#x2F;posts&#x2F;the-curse-of-nixos</a><p>You should still write your commentary on the idea, though!</div><br/><div id="36464956" class="c"><input type="checkbox" id="c-36464956" checked=""/><div class="controls bullet"><span class="by">miniBill</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36462194">parent</a><span>|</span><a href="#36465453">next</a><span>|</span><label class="collapse" for="c-36464956">[-]</label><label class="expand" for="c-36464956">[2 more]</label></div><br/><div class="children"><div class="content">Thanks for the link! I definitely agree with the author, NixOS is the only system that does The Right Thing but I cannot recommend it to anyone. I mean, I technically have recommended it to one person, but he&#x27;s an ex-Arch user so... does it really count? :D</div><br/><div id="36465103" class="c"><input type="checkbox" id="c-36465103" checked=""/><div class="controls bullet"><span class="by">pxc</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36464956">parent</a><span>|</span><a href="#36465453">next</a><span>|</span><label class="collapse" for="c-36465103">[-]</label><label class="expand" for="c-36465103">[1 more]</label></div><br/><div class="children"><div class="content">There are definitely still many rough edges and sharp corners!<p>For software developers and sysadmins with certain temperaments, though, I think it&#x27;s definitely already a good fit. A lot of NixOS people come from Arch and Gentoo, and it works well for them— although Arch folks who are deeply aligned with its keep-it-simple philosophy are probably usually turned off by Nix.</div><br/></div></div></div></div><div id="36465453" class="c"><input type="checkbox" id="c-36465453" checked=""/><div class="controls bullet"><span class="by">foota</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36462194">parent</a><span>|</span><a href="#36464956">prev</a><span>|</span><a href="#36464603">next</a><span>|</span><label class="collapse" for="c-36465453">[-]</label><label class="expand" for="c-36465453">[1 more]</label></div><br/><div class="children"><div class="content">Heh, I love a good dig at GCL.</div><br/></div></div></div></div><div id="36464603" class="c"><input type="checkbox" id="c-36464603" checked=""/><div class="controls bullet"><span class="by">toomanydoubts</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36461865">parent</a><span>|</span><a href="#36462194">prev</a><span>|</span><a href="#36462002">next</a><span>|</span><label class="collapse" for="c-36464603">[-]</label><label class="expand" for="c-36464603">[1 more]</label></div><br/><div class="children"><div class="content">Or even worst: when you cannot switch out of it but you&#x27;re not smart to package proprietary software that&#x27;s not available in the repositories.</div><br/></div></div><div id="36462002" class="c"><input type="checkbox" id="c-36462002" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36461865">parent</a><span>|</span><a href="#36464603">prev</a><span>|</span><a href="#36463528">next</a><span>|</span><label class="collapse" for="c-36462002">[-]</label><label class="expand" for="c-36462002">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s the problem ... So much time to a pleasing but inefficient payoff</div><br/></div></div><div id="36463528" class="c"><input type="checkbox" id="c-36463528" checked=""/><div class="controls bullet"><span class="by">nektro</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36461865">parent</a><span>|</span><a href="#36462002">prev</a><span>|</span><a href="#36462037">next</a><span>|</span><label class="collapse" for="c-36463528">[-]</label><label class="expand" for="c-36463528">[1 more]</label></div><br/><div class="children"><div class="content">there&#x27;s always not using flakes</div><br/></div></div></div></div><div id="36462037" class="c"><input type="checkbox" id="c-36462037" checked=""/><div class="controls bullet"><span class="by">throwing_away</span><span>|</span><a href="#36461317">parent</a><span>|</span><a href="#36461865">prev</a><span>|</span><a href="#36466109">next</a><span>|</span><label class="collapse" for="c-36462037">[-]</label><label class="expand" for="c-36462037">[19 more]</label></div><br/><div class="children"><div class="content">&gt; eliminating the filesystem (other than home and var) as a big ol&#x27; chunk of globally mutable state is so liberating<p>I&#x27;m about a week into the (very painful) process of switching to NixOS.<p>This is pretty much the promise of NixOS that got me interested, but it seems to be that it&#x27;s not really true.<p>NixOS is just running a regular kernel that does regular linux security things.  If you want AppArmor or SELinux you still have to configure it yourself.<p>If you want a sandbox on NixOS, your options are still bubblewrap&#x2F;firejail, proot, or flatpak.  Or of course full virtualization with libvirt.<p>The NixOS &quot;containers&quot; are just systemd-nspawn which (if I understand correctly) doesn&#x27;t really offer more security than a properly permissioned user.<p>I suspect that if you installed a malicious binary in a NixOS package, you&#x27;d be just as compromised as you would installing something malicious from AUR.</div><br/><div id="36462216" class="c"><input type="checkbox" id="c-36462216" checked=""/><div class="controls bullet"><span class="by">mitchellh</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36462037">parent</a><span>|</span><a href="#36462281">next</a><span>|</span><label class="collapse" for="c-36462216">[-]</label><label class="expand" for="c-36462216">[13 more]</label></div><br/><div class="children"><div class="content">The Nix store `&#x2F;nix` is readonly except by the Nix build users. So, if you’re using Nix derivations for everything (the end goal), then rogue processes cannot interfere in any way with files outside of the chroot-like environment the build process creates.<p>The writable directories (your home dir and var, as the parent stated) are still “vulnerable” and a program can run anything they want of course (bound by typical Linux&#x2F;Unix rules). Nix isn’t a containerization&#x2F;sandboxing technology, but it does remove any fear of installing software overwriting files you wanted, including OS level (and kernel) upgrades.</div><br/><div id="36463930" class="c"><input type="checkbox" id="c-36463930" checked=""/><div class="controls bullet"><span class="by">fbdab103</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36462216">parent</a><span>|</span><a href="#36462279">next</a><span>|</span><label class="collapse" for="c-36463930">[-]</label><label class="expand" for="c-36463930">[2 more]</label></div><br/><div class="children"><div class="content">&gt;...but it does remove any fear of installing software overwriting files you wanted, including OS level (and kernel) upgrades.<p>I guess that is nice to know my Python installation cannot be deleted by malware, but I am more concerned about a process stealing my .ssh keys.</div><br/><div id="36465114" class="c"><input type="checkbox" id="c-36465114" checked=""/><div class="controls bullet"><span class="by">arjvik</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36463930">parent</a><span>|</span><a href="#36462279">next</a><span>|</span><label class="collapse" for="c-36465114">[-]</label><label class="expand" for="c-36465114">[1 more]</label></div><br/><div class="children"><div class="content">Honestly, exactly recreating my byzantine python installation(s) would probably be impossible [0]<p>(In all seriousness, after switching to Arch I&#x27;ve actually solved this problem by simply installing python packages I need from the AUR)<p>[0]: <a href="https:&#x2F;&#x2F;xkcd.com&#x2F;1987&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;xkcd.com&#x2F;1987&#x2F;</a></div><br/></div></div></div></div><div id="36462279" class="c"><input type="checkbox" id="c-36462279" checked=""/><div class="controls bullet"><span class="by">throwing_away</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36462216">parent</a><span>|</span><a href="#36463930">prev</a><span>|</span><a href="#36462281">next</a><span>|</span><label class="collapse" for="c-36462279">[-]</label><label class="expand" for="c-36462279">[10 more]</label></div><br/><div class="children"><div class="content">&gt; but it does remove any fear of installing software overwriting files you wanted, including OS level (and kernel) upgrades.<p>I understand that&#x27;s &quot;true&quot; in a theoretical way because the store is read-only and it is all hashed.  But the hashes aren&#x27;t routinely checked by some kind of hypervisor, and root can still overwrite things in the store.<p>The &quot;fear of installing software overwriting files you wanted&quot; essentially comes down to config file management (unhappy accidents) and malware.<p>You should have config file management in git already, so I don&#x27;t feel like NixOS needs to solve that.  I was hoping it would solve the problem of random software being able to obtain root and not ransomware me, but it practically doesn&#x27;t solve that any better than any other distro.<p>I want to be missing something.  I&#x27;ve invested a lot of time learning about Nix for the last week and my system is finally working, but I just got to the sandboxing&#x2F;security portion of my install and the threat model seems broken.</div><br/><div id="36462382" class="c"><input type="checkbox" id="c-36462382" checked=""/><div class="controls bullet"><span class="by">xyzzy_plugh</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36462279">parent</a><span>|</span><a href="#36462281">next</a><span>|</span><label class="collapse" for="c-36462382">[-]</label><label class="expand" for="c-36462382">[9 more]</label></div><br/><div class="children"><div class="content">It seems like you misinterpreted the isolation that&#x27;s advertised. There are security benefit but the isolation provided is predominantly about deterministic and reproducible runtime environments.<p>There&#x27;s nothing particularly novel happening at the OS level compared to, say, Debian, but the difference is in how you arrived at the current state. You&#x27;re free to sprinkle whatever other security bits you are fond of.</div><br/><div id="36462802" class="c"><input type="checkbox" id="c-36462802" checked=""/><div class="controls bullet"><span class="by">throwing_away</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36462382">parent</a><span>|</span><a href="#36462281">next</a><span>|</span><label class="collapse" for="c-36462802">[-]</label><label class="expand" for="c-36462802">[8 more]</label></div><br/><div class="children"><div class="content">&gt; deterministic and reproducible runtime environments<p>But is there a point to having what you believe are deterministic and reproducible runtimes if the environment used to build them doesn&#x27;t protect against malware in a build from escaping into the build system?</div><br/><div id="36462934" class="c"><input type="checkbox" id="c-36462934" checked=""/><div class="controls bullet"><span class="by">zaphar</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36462802">parent</a><span>|</span><a href="#36464186">next</a><span>|</span><label class="collapse" for="c-36462934">[-]</label><label class="expand" for="c-36462934">[6 more]</label></div><br/><div class="children"><div class="content">There are multiple non security reasons to want deterministic and reproducible runtime environments.<p>1. Everything you need to describe and build a project is obtained by checking it out.<p>2. No more, works on my machine but not yours problems.<p>3. No more weird library dependency conflicts.<p>I&#x27;ve run into all of these and I find them all frustrating when it happens.</div><br/><div id="36463186" class="c"><input type="checkbox" id="c-36463186" checked=""/><div class="controls bullet"><span class="by">throwing_away</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36462934">parent</a><span>|</span><a href="#36464186">next</a><span>|</span><label class="collapse" for="c-36463186">[-]</label><label class="expand" for="c-36463186">[5 more]</label></div><br/><div class="children"><div class="content">These are good things and possibly make the struggle of NixOS worth it.<p>But the impression the community gives is very much that you can always rollback and everything is in its own sandbox, which is sort of true, but not at all true as soon as malware happens.<p>I&#x27;ve never really had a huge problem rolling back an ubuntu or arch update when something breaks, so I&#x27;m surprised at the amount of effort people are expending for <i>just</i> this feature with no additional security.</div><br/><div id="36463686" class="c"><input type="checkbox" id="c-36463686" checked=""/><div class="controls bullet"><span class="by">jacoblambda</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36463186">parent</a><span>|</span><a href="#36464159">next</a><span>|</span><label class="collapse" for="c-36463686">[-]</label><label class="expand" for="c-36463686">[1 more]</label></div><br/><div class="children"><div class="content">&gt; But the impression the community gives is very much that you can always rollback and everything is in its own sandbox, which is sort of true, but not at all true as soon as malware happens.<p>This is more the case with something like Hydra where you have a remote nix store and builder. Then even if you compromise a given nixos instance, they store stays isolated and intact.<p>So then if you are doing things right, you should be able to optionally back up any mutable data you need and then blow away the entire instance from scratch, creating a new one immediately after.<p>And bonus points if you can run a UEFI-over-HTTPS image on boot so that your boot image and config are always being delivered (and signed) fresh from a locked down server you control. That way if you want, on boot all nix-store content is validated with `nix store verify --all` before ever being loaded in any trusted context.</div><br/></div></div><div id="36464159" class="c"><input type="checkbox" id="c-36464159" checked=""/><div class="controls bullet"><span class="by">tripdout</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36463186">parent</a><span>|</span><a href="#36463686">prev</a><span>|</span><a href="#36464421">next</a><span>|</span><label class="collapse" for="c-36464159">[-]</label><label class="expand" for="c-36464159">[2 more]</label></div><br/><div class="children"><div class="content">&quot;rolling back&quot; an Ubuntu update? Considering how atomic rollbacks work on NixOS, what do you mean by this in the context of Ubuntu?</div><br/><div id="36464254" class="c"><input type="checkbox" id="c-36464254" checked=""/><div class="controls bullet"><span class="by">throwing_away</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36464159">parent</a><span>|</span><a href="#36464421">next</a><span>|</span><label class="collapse" for="c-36464254">[-]</label><label class="expand" for="c-36464254">[1 more]</label></div><br/><div class="children"><div class="content">If you update ubuntu or arch and something breaks, you have to look at `dpkg.log` or `pacman.log` to see what updated, and then you might need to grab an old package from the archive and manually install it.</div><br/></div></div></div></div><div id="36464421" class="c"><input type="checkbox" id="c-36464421" checked=""/><div class="controls bullet"><span class="by">pxc</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36463186">parent</a><span>|</span><a href="#36464159">prev</a><span>|</span><a href="#36464186">next</a><span>|</span><label class="collapse" for="c-36464421">[-]</label><label class="expand" for="c-36464421">[1 more]</label></div><br/><div class="children"><div class="content">&gt; But the impression the community gives is very much that you can always rollback and everything is in its own sandbox, which is sort of true, but not at all true as soon as malware happens.<p>I can see why if you do malware research or something like that, you might hear about the rollbacks capability and get your hopes up in a certain way, but that&#x27;s not really the use case.<p>NixOS is nice for running untrusted&#x2F;suspect software in a few ways I can think of, though. (They don&#x27;t exactly make NixOS a security tool, but I think maybe you could leverage them to build one.)<p>1. If a NixOS system is compromised, blowing it away and installing from clean media is cheap compared to on other operating systems, since you can retain more of your special configuration. Reinstalling is a bit more like a snapshot restore, at least in terms of the systemwide setup (users, running services and their configurations, and installed packages).<p>2. NixOS does make it really easy to spin up a clone of your running configuration in a VM instead of directly switching to that config on the local system.<p>3. The Nix sandbox is a pretty nice place to perform builds from big repos where packages can run arbitrary hooks at build time, like PyPI and NPM, since you can have it build in chroots with temporary build users, no network access, and maybe some other nice things.<p>There is also actually at least one Nix-based OS trying to achieve new things in security research out there, Spectrum: <a href="https:&#x2F;&#x2F;spectrum-os.org&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;spectrum-os.org&#x2F;</a><p>&gt; I&#x27;m surprised at the amount of effort people are expending for just this feature with no additional security.<p>NixOS (and Nix more generally) doesn&#x27;t have a singular feature like that driving its usage or development forward, even though rollbacks is a really nice one that will often come to mind when you ask NixOS users what they like about running NixOS.<p>But if I had to name contenders for the top one or two &#x27;biggest differentiators&#x27; from other tools&#x2F;paradigms that let you achieve similar effects, like other configuration management systems or copy-on-write filesystem snapshotting, I&#x27;d say it&#x27;s the totalizing way that NixOS integrates those features.<p>Because NixOS generates the configuration of the whole system, it gets to avoid having to inspect most of the system&#x27;s state, and generally handles the bits of transitioning between configurations that do require inspecting and reasoning about the state of the system quickly and pretty well. There&#x27;s just a smaller surface area there.<p>Similarly, you&#x27;re just more likely to be able to easily roll back with NixOS because those features are built into all of the normal system&#x2F;package management operations, and leveraging those things is generally the path of least resistance to changing the system. You end up being able to count on them more &#x27;by default&#x27;— you&#x27;re much less likely to make an important change and have a gap without a snapshot. The garbage collection system makes clearing the unused ones data easier (imo). The general reproducibility also gives you multiple sort of layers of intervention for rolling back— even if you <i>do</i> collect all your past generations, your version control system becomes <i>another</i> reliable way of &#x27;rolling back&#x27;. Both of those ways of going back and forth through iterations of your configuration can be further combined with similar interventions at other layers, like dotfile management via Home Manager, snapshotting filesystems for unmanaged files, selective persistence via something like Impermanence, etc. These things can add up a system where the kind of ad-hoc changes that might leak through your state management tools (snapper, etckeeper, dotfile management, etc.) become a radical departure from the way you regularly work.<p>Another differentiator here is maybe the generality: when you Nixify, you sometimes have to do a lot of work up front just to get things working on <i>any</i> deployment target, but the marginal work to go from a NixOS setup to some other kind— generating identical container images, preparing a VM for local use, running your config on macOS, partially sharing your desktop configuration with a server, letting a friend or colleague experiment with or debug your exact setup, preparing an AMI, etc.— is lower, and decreases with each further investment you make in the Nix universe. Different aspects of that inevitably end up being valuable, impressive, or delightful to different users. Taken alone, none of them might seem incomparably compelling over alternative approaches.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="36462281" class="c"><input type="checkbox" id="c-36462281" checked=""/><div class="controls bullet"><span class="by">cookiengineer</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36462037">parent</a><span>|</span><a href="#36462216">prev</a><span>|</span><a href="#36462405">next</a><span>|</span><label class="collapse" for="c-36462281">[-]</label><label class="expand" for="c-36462281">[3 more]</label></div><br/><div class="children"><div class="content">I can recommend reading the systemd manual entries (e.g. man systemd.exec).<p>SystemD meanwhile has a lot of options for managing a seccomp based sandbox, e.g. various protect options for the filesystem, mounting critical things as read-only, simulating a chroot with its own fake-root user etc.pp.<p>You can also manage the capabilities of a binary from there, so it&#x27;s actually integrated down the kernel stack.<p>However, as you mentioned, the lack of an official &quot;profile database&quot; for common packages&#x2F;software makes it just as useless as the other tools.<p>I wish we had a repo where all the things come together and people can just do something like &quot;autosandbox apache2&quot; and it will do the rest.</div><br/><div id="36465798" class="c"><input type="checkbox" id="c-36465798" checked=""/><div class="controls bullet"><span class="by">progval</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36462281">parent</a><span>|</span><a href="#36462723">next</a><span>|</span><label class="collapse" for="c-36465798">[-]</label><label class="expand" for="c-36465798">[1 more]</label></div><br/><div class="children"><div class="content">Firejail does this. The profile database is the two &quot;profile&quot; directories in <a href="https:&#x2F;&#x2F;github.com&#x2F;netblue30&#x2F;firejail&#x2F;tree&#x2F;master&#x2F;etc">https:&#x2F;&#x2F;github.com&#x2F;netblue30&#x2F;firejail&#x2F;tree&#x2F;master&#x2F;etc</a></div><br/></div></div><div id="36462723" class="c"><input type="checkbox" id="c-36462723" checked=""/><div class="controls bullet"><span class="by">throwing_away</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36462281">parent</a><span>|</span><a href="#36465798">prev</a><span>|</span><a href="#36462405">next</a><span>|</span><label class="collapse" for="c-36462723">[-]</label><label class="expand" for="c-36462723">[1 more]</label></div><br/><div class="children"><div class="content">Thanks.  I&#x27;m learning about this today and I&#x27;m beginning to suspect all the extra isolation software is not really useful if you configure AppArmor and SystemD properly per service.<p>The space between &quot;full virtual machine&quot; and &quot;unix permission model&quot; is vast and confusing.<p>I would have thought that because everything is hashed on nix, it would be trivial to spin up full &quot;virtual machines&quot; without consuming mountains of disk space, but that does not seem to be an option.</div><br/></div></div></div></div><div id="36462405" class="c"><input type="checkbox" id="c-36462405" checked=""/><div class="controls bullet"><span class="by">nextos</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36462037">parent</a><span>|</span><a href="#36462281">prev</a><span>|</span><a href="#36464557">next</a><span>|</span><label class="collapse" for="c-36462405">[-]</label><label class="expand" for="c-36462405">[1 more]</label></div><br/><div class="children"><div class="content">&gt; If you want a sandbox on NixOS, your options are still [...]<p>Exactly, I have brought this up in the Nix forum a few times, but developers don&#x27;t seem to see the value.<p>Really frustrating and a bit ironic given that sandboxing should be quite appealing to a crowd that is attracted to Nix.<p>Guix does implement some a variety of sandboxing options.</div><br/></div></div><div id="36464557" class="c"><input type="checkbox" id="c-36464557" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36462037">parent</a><span>|</span><a href="#36462405">prev</a><span>|</span><a href="#36466109">next</a><span>|</span><label class="collapse" for="c-36464557">[-]</label><label class="expand" for="c-36464557">[1 more]</label></div><br/><div class="children"><div class="content">NixOS isn&#x27;t a security solution.<p>If you expect that, you will be disappointed.<p>It&#x27;s isolated for good actors.</div><br/></div></div></div></div><div id="36465496" class="c"><input type="checkbox" id="c-36465496" checked=""/><div class="controls bullet"><span class="by">yonrg</span><span>|</span><a href="#36461317">parent</a><span>|</span><a href="#36466109">prev</a><span>|</span><a href="#36463655">next</a><span>|</span><label class="collapse" for="c-36465496">[-]</label><label class="expand" for="c-36465496">[1 more]</label></div><br/><div class="children"><div class="content">I am intrigued by experimenting with nixos. For now, my current driver for workstations is arch, on servers rh-flavored or debian. 
Everything is managed by ansible, plus persistent data is in backup. A lost server could reinstated quickly. Same for starting a new workstation.
I understand nixos can do this, too. And also I have read about an home manager in nixos, which I think is essential too. 
Otoh, I&#x27;m not a developer. I think I do not need different versions of softwares. Maybe this is why I have not switched to nixos so far.</div><br/></div></div><div id="36463655" class="c"><input type="checkbox" id="c-36463655" checked=""/><div class="controls bullet"><span class="by">OOPMan</span><span>|</span><a href="#36461317">parent</a><span>|</span><a href="#36465496">prev</a><span>|</span><a href="#36461414">next</a><span>|</span><label class="collapse" for="c-36463655">[-]</label><label class="expand" for="c-36463655">[3 more]</label></div><br/><div class="children"><div class="content">I wanted to use NixOS but it just proved to be too much of a PITA to get going with :-&#x2F;<p>Hopefully someone will find a way to take some lessons from it while leaving all the friction behind.</div><br/><div id="36464192" class="c"><input type="checkbox" id="c-36464192" checked=""/><div class="controls bullet"><span class="by">notfed</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36463655">parent</a><span>|</span><a href="#36461414">next</a><span>|</span><label class="collapse" for="c-36464192">[-]</label><label class="expand" for="c-36464192">[2 more]</label></div><br/><div class="children"><div class="content">The the Nix language itself is the biggest PITA aspect of NixOS. It&#x27;s just so unnecessarily awkward.</div><br/><div id="36465689" class="c"><input type="checkbox" id="c-36465689" checked=""/><div class="controls bullet"><span class="by">RGBCube</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36464192">parent</a><span>|</span><a href="#36461414">next</a><span>|</span><label class="collapse" for="c-36465689">[-]</label><label class="expand" for="c-36465689">[1 more]</label></div><br/><div class="children"><div class="content">Agree, NixOS without the Nix would be awesome.</div><br/></div></div></div></div></div></div><div id="36461414" class="c"><input type="checkbox" id="c-36461414" checked=""/><div class="controls bullet"><span class="by">JadeNB</span><span>|</span><a href="#36461317">parent</a><span>|</span><a href="#36463655">prev</a><span>|</span><a href="#36462177">next</a><span>|</span><label class="collapse" for="c-36461414">[-]</label><label class="expand" for="c-36461414">[5 more]</label></div><br/><div class="children"><div class="content">&gt; Looks nifty— basically it&#x27;s the &quot;let me try that in a container first&quot; except on your live system with no setup to get it going.<p>Also, if I understand it correctly, it saves doing a potentially expensive operation twice: `try`ing actually performs the operation, ready to be committed; whereas, if I understand correctly, if you do something in a container and it works, then you still have to do it again &quot;normally&quot;.</div><br/><div id="36462116" class="c"><input type="checkbox" id="c-36462116" checked=""/><div class="controls bullet"><span class="by">samstave</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36461414">parent</a><span>|</span><a href="#36462177">next</a><span>|</span><label class="collapse" for="c-36462116">[-]</label><label class="expand" for="c-36462116">[4 more]</label></div><br/><div class="children"><div class="content">It would be nifty to save out &quot;try&quot;s in a sqlite&#x2F;whatever and then curl install tries on other systems - such that you can easily clone certain setups between machines on a small&#x2F;home network.<p>Also, if you can name tries, install-stacks - such that you can do &quot;Try --name &#x27;homeWebSever&#x27; [then do your tries here]<p>Then go to another machine and from your try repo, just type &#x27;try install --name homeWebServer -- and it does whatever your try stack was</div><br/><div id="36464171" class="c"><input type="checkbox" id="c-36464171" checked=""/><div class="controls bullet"><span class="by">tripdout</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36462116">parent</a><span>|</span><a href="#36462743">next</a><span>|</span><label class="collapse" for="c-36464171">[-]</label><label class="expand" for="c-36464171">[1 more]</label></div><br/><div class="children"><div class="content">This is basically what you can get with Nix, sharing a binary cache between machines and getting an identical dev environment &#x2F; package setup.</div><br/></div></div><div id="36462743" class="c"><input type="checkbox" id="c-36462743" checked=""/><div class="controls bullet"><span class="by">JadeNB</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36462116">parent</a><span>|</span><a href="#36464171">prev</a><span>|</span><a href="#36462177">next</a><span>|</span><label class="collapse" for="c-36462743">[-]</label><label class="expand" for="c-36462743">[2 more]</label></div><br/><div class="children"><div class="content">From my cursory understanding (based solely on the README), it seems that `try`s are just directories, so that they can automatically be slung around, without any need for a backing database:<p>&gt; Sometimes, you might want to pre-execute a command and commit its result at a later time. Invoking try with the -n flag will return the overlay directory, without committing the result.<p>Also:<p>&gt; curl install tries<p>… my brain instantly translated that to &quot;curly fries&quot;.  Built-in auto-correct!</div><br/><div id="36462918" class="c"><input type="checkbox" id="c-36462918" checked=""/><div class="controls bullet"><span class="by">samstave</span><span>|</span><a href="#36461317">root</a><span>|</span><a href="#36462743">parent</a><span>|</span><a href="#36462177">next</a><span>|</span><label class="collapse" for="c-36462918">[-]</label><label class="expand" for="c-36462918">[1 more]</label></div><br/><div class="children"><div class="content">Makes more, simpler, sense...</div><br/></div></div></div></div></div></div></div></div></div></div><div id="36462177" class="c"><input type="checkbox" id="c-36462177" checked=""/><div class="controls bullet"><span class="by">thadk</span><span>|</span><a href="#36461317">prev</a><span>|</span><a href="#36464001">next</a><span>|</span><label class="collapse" for="c-36462177">[-]</label><label class="expand" for="c-36462177">[1 more]</label></div><br/><div class="children"><div class="content">As it happens, the Luke-Yoda phraseology like &quot;Do or do not. There is no try&quot; seems to be drawn by George Lucas from the popular late 1960s era books by Carlos Castaneda about a mentorship (~7 mil copies sold). That in turn seems to be about the apprenticeship that Castaneda had with his UCLA PhD advisor Harold Garfinkel:<p>Parallel Yoda quotes: <a href="https:&#x2F;&#x2F;books.google.com&#x2F;books?id=pAjYCgAAQBAJ&amp;pg=PT47#v=onepage&amp;q&amp;f=false" rel="nofollow noreferrer">https:&#x2F;&#x2F;books.google.com&#x2F;books?id=pAjYCgAAQBAJ&amp;pg=PT47#v=one...</a>
via: <a href="https:&#x2F;&#x2F;www.slate.com&#x2F;articles&#x2F;arts&#x2F;cover_story&#x2F;2015&#x2F;12&#x2F;star_wars_is_a_pastiche_how_george_lucas_combined_flash_gordon_westerns.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.slate.com&#x2F;articles&#x2F;arts&#x2F;cover_story&#x2F;2015&#x2F;12&#x2F;star...</a><p>Thread with 1975 magazine explanation of Castaneda&#x27;s advisor found partly via David Chapman: <a href="https:&#x2F;&#x2F;twitter.com&#x2F;thadk&#x2F;status&#x2F;1670316860368199681?s=20" rel="nofollow noreferrer">https:&#x2F;&#x2F;twitter.com&#x2F;thadk&#x2F;status&#x2F;1670316860368199681?s=20</a></div><br/></div></div><div id="36464001" class="c"><input type="checkbox" id="c-36464001" checked=""/><div class="controls bullet"><span class="by">palata</span><span>|</span><a href="#36462177">prev</a><span>|</span><a href="#36461468">next</a><span>|</span><label class="collapse" for="c-36464001">[-]</label><label class="expand" for="c-36464001">[3 more]</label></div><br/><div class="children"><div class="content">This looks cool, and the script actually seems pretty small, but I am not entirely sure I understand what it does.<p>My naive understanding skimming through the code:<p>1- It mounts the entire (?) filesystem in what I will call &quot;overlayfs mount points&quot; (doesn&#x27;t it need root access for that?)<p>2- It executes the command on that &quot;sandbox&quot;, which looks exactly like the rootfs, but is actually an overlay<p>3- Once the command returns, it knows what has been changed in the overlay, and shows it to the user. The user can then &quot;commit&quot; those changes (in which case I assume the command writes them from the overlayfs to the actual rootfs)<p>Everything that does not happen on the filesystem (e.g. a network call) won&#x27;t be &quot;tried&quot;, it will just happen.<p>Is that about right?</div><br/><div id="36464143" class="c"><input type="checkbox" id="c-36464143" checked=""/><div class="controls bullet"><span class="by">evgpbfhnr</span><span>|</span><a href="#36464001">parent</a><span>|</span><a href="#36464928">next</a><span>|</span><label class="collapse" for="c-36464143">[-]</label><label class="expand" for="c-36464143">[1 more]</label></div><br/><div class="children"><div class="content">yes; the mount doesn&#x27;t need root access because of user namespaces (which is one of the linux features with the most vulnerabilities next to BPF, but it&#x27;s also quite handy...)<p>the sandbox is just a directory with the overlayfs content (whole new files for modified files, whiteouts for removals); there&#x27;s some bugs e.g. removing a directory will create a whiteout that the apply script will try to rm without -r, and there&#x27;s a handful of other failure modes I can think of (really doing network etc), but for simple commands it&#x27;s a nice idea.</div><br/></div></div><div id="36464928" class="c"><input type="checkbox" id="c-36464928" checked=""/><div class="controls bullet"><span class="by">KRAKRISMOTT</span><span>|</span><a href="#36464001">parent</a><span>|</span><a href="#36464143">prev</a><span>|</span><a href="#36461468">next</a><span>|</span><label class="collapse" for="c-36464928">[-]</label><label class="expand" for="c-36464928">[1 more]</label></div><br/><div class="children"><div class="content">What about the checkinstall command? How does that work?</div><br/></div></div></div></div><div id="36461468" class="c"><input type="checkbox" id="c-36461468" checked=""/><div class="controls bullet"><span class="by">jez</span><span>|</span><a href="#36464001">prev</a><span>|</span><a href="#36461412">next</a><span>|</span><label class="collapse" for="c-36461468">[-]</label><label class="expand" for="c-36461468">[3 more]</label></div><br/><div class="children"><div class="content">It seems that the focus is on sandboxing file system access. This is great if you already know that “stateful disk access” is the only thing the command does!<p>It would be interesting to think about how&#x2F;whether to extend this to stateful network access. What would happen if I used try on a command that does something like create a GitHub pull request? Right now I believe the pull request gets created regardless of whether I commit the file system changes at the end. Some alternatives:<p>1. Block all network access, because the tool can’t reliably reason about what could be happening.<p>2. Block all network access, except accesses that look like HTTP GET requests (and maybe HEAD&#x2F;OPTIONS requests).<p>3. Attempt to build some sort of request replay mechanism, so that if a command’s results aren’t committed, but the command is ~immediately re-run with slightly different options, HTTP responses for  requests identical to those from the previous attempt are re-used without making the request a second time.<p>Obviously all three have downsides in terms of how useful&#x2F;complex&#x2F;brittle they make the command. But maybe worth pondering at the least.</div><br/><div id="36461521" class="c"><input type="checkbox" id="c-36461521" checked=""/><div class="controls bullet"><span class="by">jez</span><span>|</span><a href="#36461468">parent</a><span>|</span><a href="#36461412">next</a><span>|</span><label class="collapse" for="c-36461521">[-]</label><label class="expand" for="c-36461521">[2 more]</label></div><br/><div class="children"><div class="content">4. Attempt to intercept network requests, so you can prompt the user with whether they want to continue running the command, or abort the connection.</div><br/><div id="36461735" class="c"><input type="checkbox" id="c-36461735" checked=""/><div class="controls bullet"><span class="by">golemotron</span><span>|</span><a href="#36461468">root</a><span>|</span><a href="#36461521">parent</a><span>|</span><a href="#36461412">next</a><span>|</span><label class="collapse" for="c-36461735">[-]</label><label class="expand" for="c-36461735">[1 more]</label></div><br/><div class="children"><div class="content">If there&#x27;s a mode to prompt on all system &#x2F; file system access it would be a great tool for understanding what a command does to the system.</div><br/></div></div></div></div></div></div><div id="36461412" class="c"><input type="checkbox" id="c-36461412" checked=""/><div class="controls bullet"><span class="by">awestroke</span><span>|</span><a href="#36461468">prev</a><span>|</span><a href="#36461397">next</a><span>|</span><label class="collapse" for="c-36461412">[-]</label><label class="expand" for="c-36461412">[3 more]</label></div><br/><div class="children"><div class="content">This is super cool, and I immediately thought of many use cases.
For example:<p>* quickly find out which files are touched &#x2F; installed by apt installing a certain package<p>* find out which log file, if any, a program writes to<p>* run one of those curl | bash installation commands and inspect exactly what it&#x27;ll do without reading through a huge script</div><br/><div id="36461766" class="c"><input type="checkbox" id="c-36461766" checked=""/><div class="controls bullet"><span class="by">klabb3</span><span>|</span><a href="#36461412">parent</a><span>|</span><a href="#36462227">next</a><span>|</span><label class="collapse" for="c-36461766">[-]</label><label class="expand" for="c-36461766">[1 more]</label></div><br/><div class="children"><div class="content">Indeed. A cardinal sin in software (in general, not just CLIs) is skipping or half-assing documentation of side effects. Combined with multi-step operations, partially committed operations can be nasty to debug, and even reason about.<p>This tool can bring a level of control that is typically only available in databases and VCSs, and make it a commodity.</div><br/></div></div><div id="36462227" class="c"><input type="checkbox" id="c-36462227" checked=""/><div class="controls bullet"><span class="by">manmal</span><span>|</span><a href="#36461412">parent</a><span>|</span><a href="#36461766">prev</a><span>|</span><a href="#36461397">next</a><span>|</span><label class="collapse" for="c-36462227">[-]</label><label class="expand" for="c-36462227">[1 more]</label></div><br/><div class="children"><div class="content">* see how often a process writes to disk, preventing spindown</div><br/></div></div></div></div><div id="36461397" class="c"><input type="checkbox" id="c-36461397" checked=""/><div class="controls bullet"><span class="by">pavlov</span><span>|</span><a href="#36461412">prev</a><span>|</span><a href="#36461533">next</a><span>|</span><label class="collapse" for="c-36461397">[-]</label><label class="expand" for="c-36461397">[30 more]</label></div><br/><div class="children"><div class="content">As cool as this is, it shouldn’t be necessary. A proper undo turns every command into the equivalent of a “try”, allowing users to experiment without fear of data loss. Everything in a computer user interface should be undoable.<p>This has been known for over 40 years, but the industry has been very slow to get the memo. The undo implementation on the iPhone is a weird joke. CLIs have barely even tried (with a few exceptions like Jef Raskin’s Canon Cat, a textual UI completely different from anything else I’ve ever seen).<p>Maybe one day…</div><br/><div id="36463480" class="c"><input type="checkbox" id="c-36463480" checked=""/><div class="controls bullet"><span class="by">dtgriscom</span><span>|</span><a href="#36461397">parent</a><span>|</span><a href="#36461477">next</a><span>|</span><label class="collapse" for="c-36463480">[-]</label><label class="expand" for="c-36463480">[2 more]</label></div><br/><div class="children"><div class="content">To quote Tom Lehrer, &quot;I am never forget the day...&quot; [1]<p>I was working with WinXP, trying to reconfigure a machine&#x27;s network for something abstruse. I was making changes in the network configuration dialog, and kept tentatively moving forward because there was always the &quot;CANCEL&quot; button available to revert my changes.<p>I made one last change, and suddenly the &quot;CANCEL&quot; button dimmed. It was as if you were creeping into the entranceway of a haunted castle, and after one more step the door slams shut behind you.<p>20 years later and I&#x27;m still scarred...<p>[1] <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=gXlfXirQF3A&amp;t=24s">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=gXlfXirQF3A&amp;t=24s</a></div><br/><div id="36465585" class="c"><input type="checkbox" id="c-36465585" checked=""/><div class="controls bullet"><span class="by">predictabl3</span><span>|</span><a href="#36461397">root</a><span>|</span><a href="#36463480">parent</a><span>|</span><a href="#36461477">next</a><span>|</span><label class="collapse" for="c-36465585">[-]</label><label class="expand" for="c-36465585">[1 more]</label></div><br/><div class="children"><div class="content">Heh, it&#x27;s like when there are Ok, Apply, cancel options and cancel absolutely does not undo or negate having pressed Apply.</div><br/></div></div></div></div><div id="36461477" class="c"><input type="checkbox" id="c-36461477" checked=""/><div class="controls bullet"><span class="by">elwell</span><span>|</span><a href="#36461397">parent</a><span>|</span><a href="#36463480">prev</a><span>|</span><a href="#36463284">next</a><span>|</span><label class="collapse" for="c-36461477">[-]</label><label class="expand" for="c-36461477">[15 more]</label></div><br/><div class="children"><div class="content"><i>me trying to figure out how to undo my ping to google.com</i></div><br/><div id="36461920" class="c"><input type="checkbox" id="c-36461920" checked=""/><div class="controls bullet"><span class="by">sixstringtheory</span><span>|</span><a href="#36461397">root</a><span>|</span><a href="#36461477">parent</a><span>|</span><a href="#36461894">next</a><span>|</span><label class="collapse" for="c-36461920">[-]</label><label class="expand" for="c-36461920">[1 more]</label></div><br/><div class="children"><div class="content">If you rm -rf &#x2F; you will also remove the undo history and script ¯\_(ツ)_&#x2F;¯</div><br/></div></div><div id="36461894" class="c"><input type="checkbox" id="c-36461894" checked=""/><div class="controls bullet"><span class="by">klabb3</span><span>|</span><a href="#36461397">root</a><span>|</span><a href="#36461477">parent</a><span>|</span><a href="#36461920">prev</a><span>|</span><a href="#36461954">next</a><span>|</span><label class="collapse" for="c-36461894">[-]</label><label class="expand" for="c-36461894">[10 more]</label></div><br/><div class="children"><div class="content">ping -c -1 google.com</div><br/><div id="36462515" class="c"><input type="checkbox" id="c-36462515" checked=""/><div class="controls bullet"><span class="by">elwell</span><span>|</span><a href="#36461397">root</a><span>|</span><a href="#36461894">parent</a><span>|</span><a href="#36461954">next</a><span>|</span><label class="collapse" for="c-36462515">[-]</label><label class="expand" for="c-36462515">[9 more]</label></div><br/><div class="children"><div class="content">DO NOT RUN THAT or risk breaking Computer Fraud and Abuse Act! It sends a &#x27;reverse ping&#x27; <i>from</i> Google to you, and it effectively hacks their server to initiate it.</div><br/><div id="36463476" class="c"><input type="checkbox" id="c-36463476" checked=""/><div class="controls bullet"><span class="by">Alekhine</span><span>|</span><a href="#36461397">root</a><span>|</span><a href="#36462515">parent</a><span>|</span><a href="#36463321">next</a><span>|</span><label class="collapse" for="c-36463476">[-]</label><label class="expand" for="c-36463476">[2 more]</label></div><br/><div class="children"><div class="content">No, it doesn&#x27;t. It just sends 1 ECHO_REQUEST packet. If this was sarcasm I could not detect it</div><br/><div id="36463560" class="c"><input type="checkbox" id="c-36463560" checked=""/><div class="controls bullet"><span class="by">kzrdude</span><span>|</span><a href="#36461397">root</a><span>|</span><a href="#36463476">parent</a><span>|</span><a href="#36463321">next</a><span>|</span><label class="collapse" for="c-36463560">[-]</label><label class="expand" for="c-36463560">[1 more]</label></div><br/><div class="children"><div class="content">It seems to give up before sending anything at all:<p><pre><code>    ping: invalid argument: &#x27;-1&#x27;: out of range: 1 &lt;= value &lt;= 9223372036854775807</code></pre></div><br/></div></div></div></div><div id="36463321" class="c"><input type="checkbox" id="c-36463321" checked=""/><div class="controls bullet"><span class="by">2OEH8eoCRo0</span><span>|</span><a href="#36461397">root</a><span>|</span><a href="#36462515">parent</a><span>|</span><a href="#36463476">prev</a><span>|</span><a href="#36461954">next</a><span>|</span><label class="collapse" for="c-36463321">[-]</label><label class="expand" for="c-36463321">[6 more]</label></div><br/><div class="children"><div class="content">Please explain</div><br/><div id="36463578" class="c"><input type="checkbox" id="c-36463578" checked=""/><div class="controls bullet"><span class="by">kzrdude</span><span>|</span><a href="#36461397">root</a><span>|</span><a href="#36463321">parent</a><span>|</span><a href="#36463523">next</a><span>|</span><label class="collapse" for="c-36463578">[-]</label><label class="expand" for="c-36463578">[2 more]</label></div><br/><div class="children"><div class="content">The `-c -1` reads like it&#x27;s requesting sending negative one pings, hence the reversal.</div><br/><div id="36463623" class="c"><input type="checkbox" id="c-36463623" checked=""/><div class="controls bullet"><span class="by">rzzzt</span><span>|</span><a href="#36461397">root</a><span>|</span><a href="#36463578">parent</a><span>|</span><a href="#36463523">next</a><span>|</span><label class="collapse" for="c-36463623">[-]</label><label class="expand" for="c-36463623">[1 more]</label></div><br/><div class="children"><div class="content">A gnip!</div><br/></div></div></div></div><div id="36463523" class="c"><input type="checkbox" id="c-36463523" checked=""/><div class="controls bullet"><span class="by">eska</span><span>|</span><a href="#36461397">root</a><span>|</span><a href="#36463321">parent</a><span>|</span><a href="#36463578">prev</a><span>|</span><a href="#36461954">next</a><span>|</span><label class="collapse" for="c-36463523">[-]</label><label class="expand" for="c-36463523">[3 more]</label></div><br/><div class="children"><div class="content">Programmer humor is generally terrible</div><br/><div id="36464041" class="c"><input type="checkbox" id="c-36464041" checked=""/><div class="controls bullet"><span class="by">throwawaaarrgh</span><span>|</span><a href="#36461397">root</a><span>|</span><a href="#36463523">parent</a><span>|</span><a href="#36461954">next</a><span>|</span><label class="collapse" for="c-36464041">[-]</label><label class="expand" for="c-36464041">[2 more]</label></div><br/><div class="children"><div class="content">Hah, clearly you have no idea of what you are talking! In order to ascertain the general level of humor of a programmer, you would have to assume all programmers are equivalent! Furthermore you would be assuming that there is one kind of humor, which is <i>clearly</i> a fallacy. Finally, the amount of &quot;terribleness&quot; you allude to cannot be quantified in such a way as to distinguish an objective level of quality. Therefore you are clearly <i>wrong!</i> Try doing some research before you share such a naive opinion in the future.</div><br/><div id="36466080" class="c"><input type="checkbox" id="c-36466080" checked=""/><div class="controls bullet"><span class="by">eska</span><span>|</span><a href="#36461397">root</a><span>|</span><a href="#36464041">parent</a><span>|</span><a href="#36461954">next</a><span>|</span><label class="collapse" for="c-36466080">[-]</label><label class="expand" for="c-36466080">[1 more]</label></div><br/><div class="children"><div class="content">qed</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="36461954" class="c"><input type="checkbox" id="c-36461954" checked=""/><div class="controls bullet"><span class="by">moffkalast</span><span>|</span><a href="#36461397">root</a><span>|</span><a href="#36461477">parent</a><span>|</span><a href="#36461894">prev</a><span>|</span><a href="#36461855">next</a><span>|</span><label class="collapse" for="c-36461954">[-]</label><label class="expand" for="c-36461954">[2 more]</label></div><br/><div class="children"><div class="content"><i>me serving google a court order to remove logs with my ping in them</i><p>All in a day&#x27;s work.</div><br/><div id="36462152" class="c"><input type="checkbox" id="c-36462152" checked=""/><div class="controls bullet"><span class="by">fragmede</span><span>|</span><a href="#36461397">root</a><span>|</span><a href="#36461954">parent</a><span>|</span><a href="#36461855">next</a><span>|</span><label class="collapse" for="c-36462152">[-]</label><label class="expand" for="c-36462152">[1 more]</label></div><br/><div class="children"><div class="content">don&#x27;t forget all the routers in the path between your consumer level Internet connection and Google. Level3 and telia need their court orders too!</div><br/></div></div></div></div><div id="36461855" class="c"><input type="checkbox" id="c-36461855" checked=""/><div class="controls bullet"><span class="by">doublerabbit</span><span>|</span><a href="#36461397">root</a><span>|</span><a href="#36461477">parent</a><span>|</span><a href="#36461954">prev</a><span>|</span><a href="#36463284">next</a><span>|</span><label class="collapse" for="c-36461855">[-]</label><label class="expand" for="c-36461855">[1 more]</label></div><br/><div class="children"><div class="content">In theory: the router could capture such ICMP packets, drop them. Save them as a pcap and then mail them back to you.<p>Maybe via a Pigeon?</div><br/></div></div></div></div><div id="36463284" class="c"><input type="checkbox" id="c-36463284" checked=""/><div class="controls bullet"><span class="by">kzrdude</span><span>|</span><a href="#36461397">parent</a><span>|</span><a href="#36461477">prev</a><span>|</span><a href="#36461886">next</a><span>|</span><label class="collapse" for="c-36463284">[-]</label><label class="expand" for="c-36463284">[1 more]</label></div><br/><div class="children"><div class="content">Hm, what is this &quot;try&quot; command if it&#x27;s not the first step towards a proper undo? I&#x27;ve never seen a better increment towards that.</div><br/></div></div><div id="36461886" class="c"><input type="checkbox" id="c-36461886" checked=""/><div class="controls bullet"><span class="by">code_runner</span><span>|</span><a href="#36461397">parent</a><span>|</span><a href="#36463284">prev</a><span>|</span><a href="#36461434">next</a><span>|</span><label class="collapse" for="c-36461886">[-]</label><label class="expand" for="c-36461886">[1 more]</label></div><br/><div class="children"><div class="content">A particular Billy Madison quotes comes to mind.<p>Cars are cool but humans should be capable of flight, I guess only birds got the memo about wings.</div><br/></div></div><div id="36461434" class="c"><input type="checkbox" id="c-36461434" checked=""/><div class="controls bullet"><span class="by">TheAceOfHearts</span><span>|</span><a href="#36461397">parent</a><span>|</span><a href="#36461886">prev</a><span>|</span><a href="#36462738">next</a><span>|</span><label class="collapse" for="c-36461434">[-]</label><label class="expand" for="c-36461434">[1 more]</label></div><br/><div class="children"><div class="content">Agree in principle, but I&#x27;m not sure if it&#x27;s possible to implement Undo for all shell operations. But there&#x27;s a lot of existing systems out there, and anything which can be adopted incrementally is a big win.<p>Another shell variation I like is using trash rather than rm.</div><br/></div></div><div id="36462738" class="c"><input type="checkbox" id="c-36462738" checked=""/><div class="controls bullet"><span class="by">ben0x539</span><span>|</span><a href="#36461397">parent</a><span>|</span><a href="#36461434">prev</a><span>|</span><a href="#36463249">next</a><span>|</span><label class="collapse" for="c-36462738">[-]</label><label class="expand" for="c-36462738">[1 more]</label></div><br/><div class="children"><div class="content">I agree that there should be universal undo, but I think by contrast the (informally) transactionality of the &quot;try&quot; model can be a big deal if your system is concurrent.<p>If you do a thing, find out it isn&#x27;t what you wanted, and then undo it, while at the same some other process is observing the mutated state, that&#x27;s potentially a much trickier mental model. If you undo a configuration change and in the meantime a background process has acted on the new configuration, how do you roll that back? Rewinding the timeline is one thing, but maybe throwing out all the work that happened with the wrong configuration is even worse than the status quo.<p>From the top of my head I am thinking about accidentally changing retention windows or bash history max size where the data loss is super indirect and you&#x27;d have to hunt down the undo button for a completely different process, or changing a log format so you end up with a file that&#x27;s mixed json and plain text logs.<p>(Of course, &quot;try&quot; presumably applying the changes in a completely synthetic way after the fact could be its entire own can of worms in a very dynamic system if there&#x27;s a risk changes are applied in the wrong order or skipping some atomicity dance.)</div><br/></div></div><div id="36463249" class="c"><input type="checkbox" id="c-36463249" checked=""/><div class="controls bullet"><span class="by">ziml77</span><span>|</span><a href="#36461397">parent</a><span>|</span><a href="#36462738">prev</a><span>|</span><a href="#36463940">next</a><span>|</span><label class="collapse" for="c-36463249">[-]</label><label class="expand" for="c-36463249">[2 more]</label></div><br/><div class="children"><div class="content">Fully agreed on this. The simple, default way of doing anything should be able to be undone. Hell, years ago Google even figured out how to give people an undo button on email! Yes, it&#x27;s just a simple time delay but it makes such a huge difference because of how your state of mind changes between typing an email and hitting send. Or hell, maybe you just accidentally hit the send button.<p>Undo allows you to make the default behavior for every operation to be to just go and do it (or queue it up to be done). No need to have a confirmation that the user is going to quickly become conditioned to pressing yes on while also being just an annoyance 99% of the time.</div><br/><div id="36464337" class="c"><input type="checkbox" id="c-36464337" checked=""/><div class="controls bullet"><span class="by">arcanemachiner</span><span>|</span><a href="#36461397">root</a><span>|</span><a href="#36463249">parent</a><span>|</span><a href="#36463940">next</a><span>|</span><label class="collapse" for="c-36464337">[-]</label><label class="expand" for="c-36464337">[1 more]</label></div><br/><div class="children"><div class="content">We should also build a space elevator and figure out nuclear fusion. Unfortunately, many good ideas are easy to describe but difficult&#x2F;impossible to do.</div><br/></div></div></div></div><div id="36463940" class="c"><input type="checkbox" id="c-36463940" checked=""/><div class="controls bullet"><span class="by">PaulDavisThe1st</span><span>|</span><a href="#36461397">parent</a><span>|</span><a href="#36463249">prev</a><span>|</span><a href="#36461978">next</a><span>|</span><label class="collapse" for="c-36463940">[-]</label><label class="expand" for="c-36463940">[3 more]</label></div><br/><div class="children"><div class="content">Sorry, I don&#x27;t want a transactional layer to accompany every interaction I have with my Linux system (or most other systems, for that matter).<p>I want to choose when I need undo&#x2F;redo and when I don&#x27;t; a perpetually present transactional layer is just cruft for most of the time.<p>Furthermore, it opens up basic system interaction to the same fundamental questions that in-app undo systems have: do you branch? how deep is the history? how persistent is the history? etc.</div><br/><div id="36464017" class="c"><input type="checkbox" id="c-36464017" checked=""/><div class="controls bullet"><span class="by">throwawaaarrgh</span><span>|</span><a href="#36461397">root</a><span>|</span><a href="#36463940">parent</a><span>|</span><a href="#36461978">next</a><span>|</span><label class="collapse" for="c-36464017">[-]</label><label class="expand" for="c-36464017">[2 more]</label></div><br/><div class="children"><div class="content">&gt; I don&#x27;t want a transactional layer to accompany every interaction I have with my Linux system (or most other systems, for that matter)<p>I guess you don&#x27;t use journaling filesystems then ?</div><br/><div id="36464684" class="c"><input type="checkbox" id="c-36464684" checked=""/><div class="controls bullet"><span class="by">PaulDavisThe1st</span><span>|</span><a href="#36461397">root</a><span>|</span><a href="#36464017">parent</a><span>|</span><a href="#36461978">next</a><span>|</span><label class="collapse" for="c-36464684">[-]</label><label class="expand" for="c-36464684">[1 more]</label></div><br/><div class="children"><div class="content">a journaling file system is not the same as creating rollback points for every shell command prompt + enter.<p>also, if you&#x27;re going to be strict about it, a true undo would need to handle modifications to anything in the &#x2F;proc or &#x2F;sys or &#x2F;dev &quot;filesystems&quot;, which are not covered by journaling-anything.</div><br/></div></div></div></div></div></div><div id="36461978" class="c"><input type="checkbox" id="c-36461978" checked=""/><div class="controls bullet"><span class="by">devit</span><span>|</span><a href="#36461397">parent</a><span>|</span><a href="#36463940">prev</a><span>|</span><a href="#36462148">next</a><span>|</span><label class="collapse" for="c-36461978">[-]</label><label class="expand" for="c-36461978">[1 more]</label></div><br/><div class="children"><div class="content">You can implement such a system-wide undo with filesystem snapshots using LVM2 or btrfs (or with backup&#x2F;restore).<p>However, you also need to properly isolate software in containers or VMs since of course doing a system-wide undo on a system that is running a server will also revert the server state, which is usually disastrous.</div><br/></div></div><div id="36462148" class="c"><input type="checkbox" id="c-36462148" checked=""/><div class="controls bullet"><span class="by">auggierose</span><span>|</span><a href="#36461397">parent</a><span>|</span><a href="#36461978">prev</a><span>|</span><a href="#36463260">next</a><span>|</span><label class="collapse" for="c-36462148">[-]</label><label class="expand" for="c-36462148">[1 more]</label></div><br/><div class="children"><div class="content">That made me curious. I think here is an emulator for Canon Cat: <a href="https:&#x2F;&#x2F;archive.org&#x2F;details&#x2F;canoncat" rel="nofollow noreferrer">https:&#x2F;&#x2F;archive.org&#x2F;details&#x2F;canoncat</a></div><br/></div></div><div id="36463260" class="c"><input type="checkbox" id="c-36463260" checked=""/><div class="controls bullet"><span class="by">bmacho</span><span>|</span><a href="#36461397">parent</a><span>|</span><a href="#36462148">prev</a><span>|</span><a href="#36461533">next</a><span>|</span><label class="collapse" for="c-36463260">[-]</label><label class="expand" for="c-36463260">[1 more]</label></div><br/><div class="children"><div class="content">Undo needs a ton, possibly infinite free space.</div><br/></div></div></div></div><div id="36461533" class="c"><input type="checkbox" id="c-36461533" checked=""/><div class="controls bullet"><span class="by">xyst</span><span>|</span><a href="#36461397">prev</a><span>|</span><a href="#36465641">next</a><span>|</span><label class="collapse" for="c-36461533">[-]</label><label class="expand" for="c-36461533">[1 more]</label></div><br/><div class="children"><div class="content">Interesting. It’s like nixOS but for individual fs changes. I’ll have to give this a try.<p>off topic: Theranos CEO that was recently convicted really ruined Star Wars quotes for me<p><a href="https:&#x2F;&#x2F;www.thecut.com&#x2F;2019&#x2F;03&#x2F;the-most-bizarre-moments-from-the-theranos-documentary.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.thecut.com&#x2F;2019&#x2F;03&#x2F;the-most-bizarre-moments-from...</a></div><br/></div></div><div id="36465641" class="c"><input type="checkbox" id="c-36465641" checked=""/><div class="controls bullet"><span class="by">Szpadel</span><span>|</span><a href="#36461533">prev</a><span>|</span><a href="#36461287">next</a><span>|</span><label class="collapse" for="c-36465641">[-]</label><label class="expand" for="c-36465641">[1 more]</label></div><br/><div class="children"><div class="content">oh,I actually implemented something similar few days ago, I was doing rpm build script to make repository on s3. repo is mounted with rclone and I&#x27;m using overlaysfs to make staging area where I can add new rpms while those are build and update repo metadata, but without risking that if at one point something fails to build i get inconsistent state (eg build succeeds for x86 but failed for aarch64). i when whole build process succeeded then I&#x27;m using rclone sync to commit changes back to s3</div><br/></div></div><div id="36461287" class="c"><input type="checkbox" id="c-36461287" checked=""/><div class="controls bullet"><span class="by">4pkjai</span><span>|</span><a href="#36465641">prev</a><span>|</span><a href="#36461409">next</a><span>|</span><label class="collapse" for="c-36461287">[-]</label><label class="expand" for="c-36461287">[5 more]</label></div><br/><div class="children"><div class="content">I&#x27;m too much of a cowboy for this, but I do recognise this is very cool.</div><br/><div id="36463783" class="c"><input type="checkbox" id="c-36463783" checked=""/><div class="controls bullet"><span class="by">ghayes</span><span>|</span><a href="#36461287">parent</a><span>|</span><a href="#36463296">next</a><span>|</span><label class="collapse" for="c-36463783">[-]</label><label class="expand" for="c-36463783">[3 more]</label></div><br/><div class="children"><div class="content">I wonder if there&#x27;s a world where we run nearly all user programs in isolated (containerized) environments, with minimal access to persistent storage, etc. In many ways it seems weird that we let every program access everything that your user has access to, by default.</div><br/><div id="36465397" class="c"><input type="checkbox" id="c-36465397" checked=""/><div class="controls bullet"><span class="by">dotancohen</span><span>|</span><a href="#36461287">root</a><span>|</span><a href="#36463783">parent</a><span>|</span><a href="#36463296">next</a><span>|</span><label class="collapse" for="c-36465397">[-]</label><label class="expand" for="c-36465397">[2 more]</label></div><br/><div class="children"><div class="content">Android works like you describe, for the most part. It would be great to have such a permissions model on the desktop.</div><br/><div id="36465716" class="c"><input type="checkbox" id="c-36465716" checked=""/><div class="controls bullet"><span class="by">RGBCube</span><span>|</span><a href="#36461287">root</a><span>|</span><a href="#36465397">parent</a><span>|</span><a href="#36463296">next</a><span>|</span><label class="collapse" for="c-36465716">[-]</label><label class="expand" for="c-36465716">[1 more]</label></div><br/><div class="children"><div class="content">Android still has a global FS that programs can write to if they have the permission, in Fuschia there is no global FS, which is as sandboxed it gets.</div><br/></div></div></div></div></div></div><div id="36463296" class="c"><input type="checkbox" id="c-36463296" checked=""/><div class="controls bullet"><span class="by">kzrdude</span><span>|</span><a href="#36461287">parent</a><span>|</span><a href="#36463783">prev</a><span>|</span><a href="#36461409">next</a><span>|</span><label class="collapse" for="c-36463296">[-]</label><label class="expand" for="c-36463296">[1 more]</label></div><br/><div class="children"><div class="content">try is written in posix shell, it&#x27;s cowboy too.</div><br/></div></div></div></div><div id="36461409" class="c"><input type="checkbox" id="c-36461409" checked=""/><div class="controls bullet"><span class="by">TheAceOfHearts</span><span>|</span><a href="#36461287">prev</a><span>|</span><a href="#36464823">next</a><span>|</span><label class="collapse" for="c-36461409">[-]</label><label class="expand" for="c-36461409">[2 more]</label></div><br/><div class="children"><div class="content">That&#x27;s awesome, it feels like an area worth exploring within the shell. If I had a magic wand and I could create an ideal shell experience, I&#x27;d love it if you could soft-execute a script in a notebook style environment where each command can be inspected and tweaked before committing the change. It feels like shells are still incredibly constrained and that they haven&#x27;t evolved that much since the 90s.<p>The defaults are kind of crazy as well. Every OS should ship with a `trash` binary that puts a file in the Trash without actually deleting it, rather than recommending `rm`. I get some people are perfectly happy to play without guard rails, but I&#x27;m sure some of us would like a few more guard rails which we can tweak.<p>I think another similar innovation is how with NixOS you&#x27;re supposed to be able to diff system changes between upgrades with ease. Which makes sense, since your OS config is usually based on the vendor default with a bunch of changes applied on top.</div><br/><div id="36463307" class="c"><input type="checkbox" id="c-36463307" checked=""/><div class="controls bullet"><span class="by">kzrdude</span><span>|</span><a href="#36461409">parent</a><span>|</span><a href="#36464823">next</a><span>|</span><label class="collapse" for="c-36463307">[-]</label><label class="expand" for="c-36463307">[1 more]</label></div><br/><div class="children"><div class="content">Linux&#x2F;Gnome has &quot;gio trash&quot; as the trash command. It&#x27;s available yet mostly unused I think.</div><br/></div></div></div></div><div id="36464823" class="c"><input type="checkbox" id="c-36464823" checked=""/><div class="controls bullet"><span class="by">sacnoradhq</span><span>|</span><a href="#36461409">prev</a><span>|</span><a href="#36463977">next</a><span>|</span><label class="collapse" for="c-36464823">[-]</label><label class="expand" for="c-36464823">[1 more]</label></div><br/><div class="children"><div class="content">Honestly, this is only necessary when there is no virtualization, the system image is mutable, and not managed by configuration management.<p>With virtualization, snapshot and restore functionality makes this completely moot because it occurs outside of OS and captures the entire system state.<p>If the system image is mutable and not using configuration management, then system entropy is a real problem. Better have backups before &quot;trying&quot; anything you can&#x27;t undo or has side-effects. You generally should have backups, configuration management, monitoring, and minimize attended commands issued and log them. Attended fiddling is the path to entropy and problems.</div><br/></div></div><div id="36463977" class="c"><input type="checkbox" id="c-36463977" checked=""/><div class="controls bullet"><span class="by">throwawaaarrgh</span><span>|</span><a href="#36464823">prev</a><span>|</span><a href="#36461520">next</a><span>|</span><label class="collapse" for="c-36463977">[-]</label><label class="expand" for="c-36463977">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s certainly a neat idea, I like where it&#x27;s coming from. I think it might be better if we just had an easier way to checkpoint and restore systems, so you don&#x27;t have to &quot;try&quot; anything, you just &quot;do&quot;, and ideally we have a very reliable way to just... Go back 2 minutes in time if something goes wrong. Something that isn&#x27;t painful or slow and does work intuitively.<p>Filesystem checkpointing&#x2F;snapshotting can take care of most of the ability to restore a system after a big problem. The next best thing is something like process checkpointing, and after that would be checkpointing a whole system&#x27;s processes, which would be much more complicated and perhaps not worth it.</div><br/><div id="36464261" class="c"><input type="checkbox" id="c-36464261" checked=""/><div class="controls bullet"><span class="by">quesera</span><span>|</span><a href="#36463977">parent</a><span>|</span><a href="#36461520">next</a><span>|</span><label class="collapse" for="c-36464261">[-]</label><label class="expand" for="c-36464261">[1 more]</label></div><br/><div class="children"><div class="content">Filesystem checkpointing&#x2F;snapshotting is one of the nice things about ZFS.<p>If the OS supports ZFS on boot drives, you can do checkpointed full system&#x2F;kernel upgrades.<p>I like your idea about process checkpointing. Of course any side effects (eventually we&#x27;re only talking about network in&#x2F;out) would be <i>nonreversible</i>, but would be theoretically replayable (have to checkpoint the RTC too). The other side of the connection might have other ideas...<p>Sounds like a dream debugging tool though.</div><br/></div></div></div></div><div id="36461520" class="c"><input type="checkbox" id="c-36461520" checked=""/><div class="controls bullet"><span class="by">mihaic</span><span>|</span><a href="#36463977">prev</a><span>|</span><a href="#36464768">next</a><span>|</span><label class="collapse" for="c-36461520">[-]</label><label class="expand" for="c-36461520">[2 more]</label></div><br/><div class="children"><div class="content">Interesting. How does it handle if a modified file has another change between the run and the confirmation? Understanding this case is really my only reservation to try this out.</div><br/><div id="36464127" class="c"><input type="checkbox" id="c-36464127" checked=""/><div class="controls bullet"><span class="by">evgpbfhnr</span><span>|</span><a href="#36461520">parent</a><span>|</span><a href="#36464768">next</a><span>|</span><label class="collapse" for="c-36464127">[-]</label><label class="expand" for="c-36464127">[1 more]</label></div><br/><div class="children"><div class="content">it doesn&#x27;t, will just overwrite the file with its version (cp -af)</div><br/></div></div></div></div><div id="36464768" class="c"><input type="checkbox" id="c-36464768" checked=""/><div class="controls bullet"><span class="by">MuffinFlavored</span><span>|</span><a href="#36461520">prev</a><span>|</span><a href="#36464944">next</a><span>|</span><label class="collapse" for="c-36464768">[-]</label><label class="expand" for="c-36464768">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;sandboxie-plus.com&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;sandboxie-plus.com&#x2F;</a> This exists for Windows, but apps can detect and change their behavior when you are hooking all of the underlying calls for filesystem&#x2F;registry.</div><br/></div></div><div id="36464944" class="c"><input type="checkbox" id="c-36464944" checked=""/><div class="controls bullet"><span class="by">dingaling</span><span>|</span><a href="#36464768">prev</a><span>|</span><a href="#36461992">next</a><span>|</span><label class="collapse" for="c-36464944">[-]</label><label class="expand" for="c-36464944">[3 more]</label></div><br/><div class="children"><div class="content">It would be fabulous to have something equivalent within SQL, instead of having to run a SELECT first and then hacking that into an UPDATE.  Every time.</div><br/><div id="36465275" class="c"><input type="checkbox" id="c-36465275" checked=""/><div class="controls bullet"><span class="by">boruto</span><span>|</span><a href="#36464944">parent</a><span>|</span><a href="#36461992">next</a><span>|</span><label class="collapse" for="c-36465275">[-]</label><label class="expand" for="c-36465275">[2 more]</label></div><br/><div class="children"><div class="content">Don&#x27;t transactions give that feature?</div><br/><div id="36466072" class="c"><input type="checkbox" id="c-36466072" checked=""/><div class="controls bullet"><span class="by">hughesjj</span><span>|</span><a href="#36464944">root</a><span>|</span><a href="#36465275">parent</a><span>|</span><a href="#36461992">next</a><span>|</span><label class="collapse" for="c-36466072">[-]</label><label class="expand" for="c-36466072">[1 more]</label></div><br/><div class="children"><div class="content">&quot;transactions&quot; do give that feature, but related to the nix&#x2F;emacs discussion above, my gripe is that every rdbms seems to do it differently.<p>That said I forgot how overloaded the term &quot;transactions&quot; is and most kinds of &quot;transactions&quot; don&#x27;t allow undo or preview modes.  Like, there&#x27;s the reserved word &quot;transaction&quot;, and then there&#x27;s the &quot;transaction&quot; that can literally describe any db&#x2F;network request, or an exchange of money for goods and services.<p>When I do what the parent comment says, it&#x27;s basically because the select statement is a &quot;test&quot;&#x2F;preview<p>In some dbs you can do rollbacks or need to commit your db changes to affect the global state, but I haven&#x27;t seen that universally + consistently implemented.</div><br/></div></div></div></div></div></div><div id="36461992" class="c"><input type="checkbox" id="c-36461992" checked=""/><div class="controls bullet"><span class="by">yarekt</span><span>|</span><a href="#36464944">prev</a><span>|</span><a href="#36461566">next</a><span>|</span><label class="collapse" for="c-36461992">[-]</label><label class="expand" for="c-36461992">[1 more]</label></div><br/><div class="children"><div class="content">Neat! I’m definitely looking for something like this. My use case is running semi-trusted dev tools that come packaged. I need to run them, but I don’t want to trust them, but it’s too much of a faff to actually check, or run them in isolation (think dotnet tooling).<p>What I would love to see is a blocking IO on reads and writes, and network requests. Would let me see if some script is attempting to exfiltrate my home dir&#x2F;ssh&#x2F;gpg keys.<p>Not looking to fully secure, just for some more intuition about commands&#x2F;scripts and their dependencies</div><br/></div></div><div id="36461566" class="c"><input type="checkbox" id="c-36461566" checked=""/><div class="controls bullet"><span class="by">Not_John</span><span>|</span><a href="#36461992">prev</a><span>|</span><a href="#36461319">next</a><span>|</span><label class="collapse" for="c-36461566">[-]</label><label class="expand" for="c-36461566">[4 more]</label></div><br/><div class="children"><div class="content">The title reminds me of my time in a call center. At that time I was trying to earn an income working as an inbound and outbound agent for a large german telecommunications network operator. When I was fired, my team leader gave me the advice: &quot;There&#x27;s no trying, just do or don&#x27;t do.&quot; (in German of course)<p>I think I had a moment of post-traumatic stress disorder while reading the title.<p>But binpash seems to be a very useful and nice piece of software that i will gladly give a try. :)</div><br/><div id="36461607" class="c"><input type="checkbox" id="c-36461607" checked=""/><div class="controls bullet"><span class="by">slashtab</span><span>|</span><a href="#36461566">parent</a><span>|</span><a href="#36461319">next</a><span>|</span><label class="collapse" for="c-36461607">[-]</label><label class="expand" for="c-36461607">[3 more]</label></div><br/><div class="children"><div class="content">This is what &quot;Elizabeth Holmes&quot; beleived in. I think this is a quote from Star Wars.</div><br/><div id="36461645" class="c"><input type="checkbox" id="c-36461645" checked=""/><div class="controls bullet"><span class="by">Zealotux</span><span>|</span><a href="#36461566">root</a><span>|</span><a href="#36461607">parent</a><span>|</span><a href="#36461319">next</a><span>|</span><label class="collapse" for="c-36461645">[-]</label><label class="expand" for="c-36461645">[2 more]</label></div><br/><div class="children"><div class="content">“If you&#x27;re going to try, go all the way. Otherwise, don&#x27;t even start. This could mean losing girlfriends, wives, relatives and maybe even your mind. It could mean not eating for three or four days. It could mean freezing on a park bench. It could mean jail. It could mean derision. It could mean mockery--isolation. Isolation is the gift. All the others are a test of your endurance, of how much you really want to do it. And, you&#x27;ll do it, despite rejection and the worst odds. And it will be better than anything else you can imagine. If you&#x27;re going to try, go all the way. There is no other feeling like that. You will be alone with the gods, and the nights will flame with fire. You will ride life straight to perfect laughter. It&#x27;s the only good fight there is.”<p>– Charles Bukowski</div><br/><div id="36461682" class="c"><input type="checkbox" id="c-36461682" checked=""/><div class="controls bullet"><span class="by">anonymouskimmer</span><span>|</span><a href="#36461566">root</a><span>|</span><a href="#36461645">parent</a><span>|</span><a href="#36461319">next</a><span>|</span><label class="collapse" for="c-36461682">[-]</label><label class="expand" for="c-36461682">[1 more]</label></div><br/><div class="children"><div class="content">Sunk cost fallacy. And the cause of the continuation of so many horrible wars. Take Quark&#x27;s advice on the third rule of acquisition: <a href="https:&#x2F;&#x2F;youtu.be&#x2F;hdQcGzbpN7s" rel="nofollow noreferrer">https:&#x2F;&#x2F;youtu.be&#x2F;hdQcGzbpN7s</a><p>&gt; Never spend more for an acquisition than you have to.</div><br/></div></div></div></div></div></div></div></div><div id="36461319" class="c"><input type="checkbox" id="c-36461319" checked=""/><div class="controls bullet"><span class="by">dumdumchan</span><span>|</span><a href="#36461566">prev</a><span>|</span><a href="#36461303">next</a><span>|</span><label class="collapse" for="c-36461319">[-]</label><label class="expand" for="c-36461319">[2 more]</label></div><br/><div class="children"><div class="content">Doesn&#x27;t work on popos:<p><pre><code>    $ try pip3 install libdash
    Warning: Failed mounting &#x2F;boot as an overlay, see &#x2F;tmp&#x2F;tmp.BrLiRj0Brb
    Warning: Failed mounting &#x2F;home as an overlay, see &#x2F;tmp&#x2F;tmp.BrLiRj0Brb
    Warning: Failed mounting &#x2F;snap as an overlay, see &#x2F;tmp&#x2F;tmp.BrLiRj0Brb
    &#x2F;tmp&#x2F;tmp.c7hp4nI6lE: line 4: cd: &#x2F;home&#x2F;user: No such file or directory</code></pre></div><br/><div id="36461403" class="c"><input type="checkbox" id="c-36461403" checked=""/><div class="controls bullet"><span class="by">korzq</span><span>|</span><a href="#36461319">parent</a><span>|</span><a href="#36461303">next</a><span>|</span><label class="collapse" for="c-36461403">[-]</label><label class="expand" for="c-36461403">[1 more]</label></div><br/><div class="children"><div class="content">Could be related to <a href="https:&#x2F;&#x2F;github.com&#x2F;binpash&#x2F;try&#x2F;issues&#x2F;38">https:&#x2F;&#x2F;github.com&#x2F;binpash&#x2F;try&#x2F;issues&#x2F;38</a>
Could you see if the &#x27;mount-fix&#x27; branch works?</div><br/></div></div></div></div><div id="36461390" class="c"><input type="checkbox" id="c-36461390" checked=""/><div class="controls bullet"><span class="by">chrisshroba</span><span>|</span><a href="#36461303">prev</a><span>|</span><a href="#36462314">next</a><span>|</span><label class="collapse" for="c-36461390">[-]</label><label class="expand" for="c-36461390">[2 more]</label></div><br/><div class="children"><div class="content">Such a simple concept. Not something I&#x27;ll reach for every day but I can absolutely see myself using this a few times a year. Thanks for sharing!</div><br/><div id="36461437" class="c"><input type="checkbox" id="c-36461437" checked=""/><div class="controls bullet"><span class="by">samwillis</span><span>|</span><a href="#36461390">parent</a><span>|</span><a href="#36462314">next</a><span>|</span><label class="collapse" for="c-36461437">[-]</label><label class="expand" for="c-36461437">[1 more]</label></div><br/><div class="children"><div class="content">I think there are some interesting use cases where I could see myself using this every day.<p>Say your a Django developer, using the dev server and a SQLite db. Every time you restart the dev server you can easily reset to the previous state, SQLite db reverted, any other media uploaded or modified changed back. All with no setup, no containers, just prepend &quot;try&quot;.</div><br/></div></div></div></div><div id="36462314" class="c"><input type="checkbox" id="c-36462314" checked=""/><div class="controls bullet"><span class="by">jchw</span><span>|</span><a href="#36461390">prev</a><span>|</span><a href="#36464800">next</a><span>|</span><label class="collapse" for="c-36462314">[-]</label><label class="expand" for="c-36462314">[1 more]</label></div><br/><div class="children"><div class="content">I use a similar approach to have multiple isolated VS Code instances each in their own Nix shell, for easier development. It&#x27;s surprisingly effective, and performance is just fine. I&#x27;m kind of curious how this interacts with Chromium&#x27;s use of SQLite, but I haven&#x27;t noticed any particular problems.</div><br/></div></div><div id="36464800" class="c"><input type="checkbox" id="c-36464800" checked=""/><div class="controls bullet"><span class="by">est</span><span>|</span><a href="#36462314">prev</a><span>|</span><a href="#36464229">next</a><span>|</span><label class="collapse" for="c-36464800">[-]</label><label class="expand" for="c-36464800">[1 more]</label></div><br/><div class="children"><div class="content">I wonder if it can predit the cluster change of my `kubectl` command. Gotta parse those messy .yaml</div><br/></div></div><div id="36464229" class="c"><input type="checkbox" id="c-36464229" checked=""/><div class="controls bullet"><span class="by">jagtstronaut</span><span>|</span><a href="#36464800">prev</a><span>|</span><a href="#36461281">next</a><span>|</span><label class="collapse" for="c-36464229">[-]</label><label class="expand" for="c-36464229">[6 more]</label></div><br/><div class="children"><div class="content">Maybe there is already something like this but this would be sick for sql DBs. Having to make prod updates to a table always terrifies me.</div><br/><div id="36464238" class="c"><input type="checkbox" id="c-36464238" checked=""/><div class="controls bullet"><span class="by">peter422</span><span>|</span><a href="#36464229">parent</a><span>|</span><a href="#36464263">next</a><span>|</span><label class="collapse" for="c-36464238">[-]</label><label class="expand" for="c-36464238">[1 more]</label></div><br/><div class="children"><div class="content">Just run the whole operation in a transaction and verify whatever you need to verify before committing.</div><br/></div></div><div id="36464263" class="c"><input type="checkbox" id="c-36464263" checked=""/><div class="controls bullet"><span class="by">Avery3R</span><span>|</span><a href="#36464229">parent</a><span>|</span><a href="#36464238">prev</a><span>|</span><a href="#36464237">next</a><span>|</span><label class="collapse" for="c-36464263">[-]</label><label class="expand" for="c-36464263">[3 more]</label></div><br/><div class="children"><div class="content">BEGIN TRANSACTION;<p>... ; Modify DB<p>... ; Inspect State<p>ROLLBACK TRANSACTION;<p>and then switch the rollback to commit when satisfied</div><br/><div id="36464403" class="c"><input type="checkbox" id="c-36464403" checked=""/><div class="controls bullet"><span class="by">jagtstronaut</span><span>|</span><a href="#36464229">root</a><span>|</span><a href="#36464263">parent</a><span>|</span><a href="#36464237">next</a><span>|</span><label class="collapse" for="c-36464403">[-]</label><label class="expand" for="c-36464403">[2 more]</label></div><br/><div class="children"><div class="content">This is cool I probably will do this.</div><br/><div id="36464778" class="c"><input type="checkbox" id="c-36464778" checked=""/><div class="controls bullet"><span class="by">wnolens</span><span>|</span><a href="#36464229">root</a><span>|</span><a href="#36464403">parent</a><span>|</span><a href="#36464237">next</a><span>|</span><label class="collapse" for="c-36464778">[-]</label><label class="expand" for="c-36464778">[1 more]</label></div><br/><div class="children"><div class="content">Just mind the isolation level of concurrent queries which may be running. By default you are probably fine since it&#x27;s usually snapshot isolation mode (will only see committed results as of query start) but there are other modes that break this.</div><br/></div></div></div></div></div></div><div id="36464237" class="c"><input type="checkbox" id="c-36464237" checked=""/><div class="controls bullet"><span class="by">hybby</span><span>|</span><a href="#36464229">parent</a><span>|</span><a href="#36464263">prev</a><span>|</span><a href="#36461281">next</a><span>|</span><label class="collapse" for="c-36464237">[-]</label><label class="expand" for="c-36464237">[1 more]</label></div><br/><div class="children"><div class="content">maybe you could run the updates in a transaction that you could roll back if you were unhappy with the result?</div><br/></div></div></div></div><div id="36461281" class="c"><input type="checkbox" id="c-36461281" checked=""/><div class="controls bullet"><span class="by">samwillis</span><span>|</span><a href="#36464229">prev</a><span>|</span><a href="#36461851">next</a><span>|</span><label class="collapse" for="c-36461281">[-]</label><label class="expand" for="c-36461281">[3 more]</label></div><br/><div class="children"><div class="content">This is really nice! What a clever, but oh so obvious, idea. Love it.<p>Anyone know of an equivalent for MacOS?<p>Obviously Macs are missing some of the features this uses, but I wander if there any alternatives that could enable this sort of command on a Mac. I assume the lack of native Docker or equivalent is probably indicative of no.</div><br/><div id="36465864" class="c"><input type="checkbox" id="c-36465864" checked=""/><div class="controls bullet"><span class="by">Jnr</span><span>|</span><a href="#36461281">parent</a><span>|</span><a href="#36461800">next</a><span>|</span><label class="collapse" for="c-36465864">[-]</label><label class="expand" for="c-36465864">[1 more]</label></div><br/><div class="children"><div class="content">This requires Linux specific features. The only way you are getting this on Macos is the same way you are getting &quot;Docker on Macos&quot; - by running a virtualised Linux machine.</div><br/></div></div><div id="36461800" class="c"><input type="checkbox" id="c-36461800" checked=""/><div class="controls bullet"><span class="by">lanstin</span><span>|</span><a href="#36461281">parent</a><span>|</span><a href="#36465864">prev</a><span>|</span><a href="#36461851">next</a><span>|</span><label class="collapse" for="c-36461800">[-]</label><label class="expand" for="c-36461800">[1 more]</label></div><br/><div class="children"><div class="content">I haven’t run this command but (editing as this was an incomplete thought accidentally posted) minikube and brew&#x27;s version of docker work for me as a complete docker environment that works on my (intel) Mac.</div><br/></div></div></div></div><div id="36461851" class="c"><input type="checkbox" id="c-36461851" checked=""/><div class="controls bullet"><span class="by">prpl</span><span>|</span><a href="#36461281">prev</a><span>|</span><a href="#36462569">next</a><span>|</span><label class="collapse" for="c-36461851">[-]</label><label class="expand" for="c-36461851">[1 more]</label></div><br/><div class="children"><div class="content">This would be good with batch HPC systems, possibly both for checkpointing and idempotency. I was trying out to do something similar with fuse overlays, but had so much issues (2020) with this and rootless containers at the time.</div><br/></div></div><div id="36462569" class="c"><input type="checkbox" id="c-36462569" checked=""/><div class="controls bullet"><span class="by">gdevenyi</span><span>|</span><a href="#36461851">prev</a><span>|</span><a href="#36461481">next</a><span>|</span><label class="collapse" for="c-36462569">[-]</label><label class="expand" for="c-36462569">[3 more]</label></div><br/><div class="children"><div class="content">I love that their demo is to finally give me a dry run command for pip.</div><br/><div id="36463332" class="c"><input type="checkbox" id="c-36463332" checked=""/><div class="controls bullet"><span class="by">kzrdude</span><span>|</span><a href="#36462569">parent</a><span>|</span><a href="#36461481">next</a><span>|</span><label class="collapse" for="c-36463332">[-]</label><label class="expand" for="c-36463332">[2 more]</label></div><br/><div class="children"><div class="content">Since pip v22.2, pip install --dry-run finally exists. It will still perform downloads but it will dry run the install part.</div><br/><div id="36463700" class="c"><input type="checkbox" id="c-36463700" checked=""/><div class="controls bullet"><span class="by">gdevenyi</span><span>|</span><a href="#36462569">root</a><span>|</span><a href="#36463332">parent</a><span>|</span><a href="#36461481">next</a><span>|</span><label class="collapse" for="c-36463700">[-]</label><label class="expand" for="c-36463700">[1 more]</label></div><br/><div class="children"><div class="content">Amazing, good to know, thanks</div><br/></div></div></div></div></div></div><div id="36461481" class="c"><input type="checkbox" id="c-36461481" checked=""/><div class="controls bullet"><span class="by">gchaincl</span><span>|</span><a href="#36462569">prev</a><span>|</span><a href="#36464020">next</a><span>|</span><label class="collapse" for="c-36461481">[-]</label><label class="expand" for="c-36461481">[1 more]</label></div><br/><div class="children"><div class="content">This is awesome! I wonder if using the same techinque you could even even create a pseudo package manager. Once a pkg is installed via &#x27;try&#x27;, it keeps track of its filea ans remove or update such a pkg.</div><br/></div></div><div id="36464020" class="c"><input type="checkbox" id="c-36464020" checked=""/><div class="controls bullet"><span class="by">mkonecny</span><span>|</span><a href="#36461481">prev</a><span>|</span><a href="#36461451">next</a><span>|</span><label class="collapse" for="c-36464020">[-]</label><label class="expand" for="c-36464020">[1 more]</label></div><br/><div class="children"><div class="content">How does this work if you run a database insert query from the command line? Or to a remote database?</div><br/></div></div><div id="36461451" class="c"><input type="checkbox" id="c-36461451" checked=""/><div class="controls bullet"><span class="by">nu11ptr</span><span>|</span><a href="#36464020">prev</a><span>|</span><label class="collapse" for="c-36461451">[-]</label><label class="expand" for="c-36461451">[2 more]</label></div><br/><div class="children"><div class="content">Neat trick. What about commands that impact the running state (or other external systems) and not just the file system? Would that also be rolled back? Take effect? (I&#x27;m not familiar with namespaces)</div><br/><div id="36463955" class="c"><input type="checkbox" id="c-36463955" checked=""/><div class="controls bullet"><span class="by">palata</span><span>|</span><a href="#36461451">parent</a><span>|</span><label class="collapse" for="c-36463955">[-]</label><label class="expand" for="c-36463955">[1 more]</label></div><br/><div class="children"><div class="content">The example does `try pip install ...`. So it does execute the network requests, I think it just impacts the file system. I can&#x27;t imagine a way for the tool to know what the network request would answer without actually running it, right?</div><br/></div></div></div></div></div></div></div></div></div></body></html>