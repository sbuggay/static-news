<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1725181262576" as="style"/><link rel="stylesheet" href="styles.css?v=1725181262576"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://docs.percona.com/everest/index.html">Percona Everest: open-source automated database provisioning and management</a> <span class="domain">(<a href="https://docs.percona.com">docs.percona.com</a>)</span></div><div class="subtext"><span>petecooper</span> | <span>33 comments</span></div><br/><div><div id="41414531" class="c"><input type="checkbox" id="c-41414531" checked=""/><div class="controls bullet"><span class="by">cyrnel</span><span>|</span><a href="#41413039">next</a><span>|</span><label class="collapse" for="c-41414531">[-]</label><label class="expand" for="c-41414531">[1 more]</label></div><br/><div class="children"><div class="content">Most of the pain of running databases in k8s is all of the &quot;day 2&quot; operations like backups, clustering, scaling, upgrading, tuning, etc., so I&#x27;m glad to see all that accumulated knowledge built into controllers like this.<p>One feature I feel is lacking is better handling of database credentials. I see there&#x27;s a &quot;copy to clipboard&quot; button next to the password, which tells me we&#x27;re still using the same single, static, plain-text DB passwords that we&#x27;ve been using since the 90s. I&#x27;d love to see some kind of cross-platform RBAC system that uses rotating credentials or asymmetric crypto or something.</div><br/></div></div><div id="41413039" class="c"><input type="checkbox" id="c-41413039" checked=""/><div class="controls bullet"><span class="by">movedx</span><span>|</span><a href="#41414531">prev</a><span>|</span><a href="#41413640">next</a><span>|</span><label class="collapse" for="c-41413039">[-]</label><label class="expand" for="c-41413039">[28 more]</label></div><br/><div class="children"><div class="content">I got really excited about this and then realised it&#x27;s only for Kubernetes: the one platform I&#x27;ve never believed you should deploy a database to (relational or otherwise.) I guess there are some use cases for such a deployment, but after 20 years of experience across many organisations on three continents, I&#x27;ve never encountered a situation that involves constantly rolling forward the database engine. Bring the engine inline with updates, sure, but weekly? Even monthly? No.</div><br/><div id="41413900" class="c"><input type="checkbox" id="c-41413900" checked=""/><div class="controls bullet"><span class="by">eropple</span><span>|</span><a href="#41413039">parent</a><span>|</span><a href="#41413912">next</a><span>|</span><label class="collapse" for="c-41413900">[-]</label><label class="expand" for="c-41413900">[1 more]</label></div><br/><div class="children"><div class="content">I wouldn&#x27;t have put a database on k8s five years ago, but today the options are a lot better for persistent and resilient storage on k8s and there are pretty significant advantages to being able to normalize your deployment platform. I use CrunchyData&#x27;s Postgres operator on top of Longhorn volumes for most of my stuff and being able to have what amounts to one-click deployment of multi-host-redundant, automatically backed-up databases is really nice.<p>The Percona Everest operator doesn&#x27;t look as full-featured for Postgres, which is the only database I typically use, so this isn&#x27;t for me, but might be a little better if you&#x27;re a MySQL user (though that&#x27;s just me guessing).</div><br/></div></div><div id="41413912" class="c"><input type="checkbox" id="c-41413912" checked=""/><div class="controls bullet"><span class="by">voidfunc</span><span>|</span><a href="#41413039">parent</a><span>|</span><a href="#41413900">prev</a><span>|</span><a href="#41414094">next</a><span>|</span><label class="collapse" for="c-41413912">[-]</label><label class="expand" for="c-41413912">[11 more]</label></div><br/><div class="children"><div class="content">Kubernetes is bad for running databases is a _very_ outdated belief</div><br/><div id="41414252" class="c"><input type="checkbox" id="c-41414252" checked=""/><div class="controls bullet"><span class="by">sgarland</span><span>|</span><a href="#41413039">root</a><span>|</span><a href="#41413912">parent</a><span>|</span><a href="#41414421">next</a><span>|</span><label class="collapse" for="c-41414252">[-]</label><label class="expand" for="c-41414252">[1 more]</label></div><br/><div class="children"><div class="content">As a DBRE, I disagree. See post below [0].<p>[0]: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41414237">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41414237</a></div><br/></div></div><div id="41414421" class="c"><input type="checkbox" id="c-41414421" checked=""/><div class="controls bullet"><span class="by">otabdeveloper4</span><span>|</span><a href="#41413039">root</a><span>|</span><a href="#41413912">parent</a><span>|</span><a href="#41414252">prev</a><span>|</span><a href="#41414094">next</a><span>|</span><label class="collapse" for="c-41414421">[-]</label><label class="expand" for="c-41414421">[9 more]</label></div><br/><div class="children"><div class="content">Kubernetes is bad for running anything at all, including databases.<p>(K8s is second-system effect and job security for sysadmins. From a technical point of view it causes more problems than it solves.)</div><br/><div id="41414664" class="c"><input type="checkbox" id="c-41414664" checked=""/><div class="controls bullet"><span class="by">jb_gericke</span><span>|</span><a href="#41413039">root</a><span>|</span><a href="#41414421">parent</a><span>|</span><a href="#41414582">next</a><span>|</span><label class="collapse" for="c-41414664">[-]</label><label class="expand" for="c-41414664">[2 more]</label></div><br/><div class="children"><div class="content">Can you qualify this statement? It’s 2024, Kubernetes is old tech and bullet proof at that.</div><br/><div id="41415039" class="c"><input type="checkbox" id="c-41415039" checked=""/><div class="controls bullet"><span class="by">raverbashing</span><span>|</span><a href="#41413039">root</a><span>|</span><a href="#41414664">parent</a><span>|</span><a href="#41414582">next</a><span>|</span><label class="collapse" for="c-41415039">[-]</label><label class="expand" for="c-41415039">[1 more]</label></div><br/><div class="children"><div class="content">Does Kubernetes has reliable and predictable cronjobs already?</div><br/></div></div></div></div><div id="41414582" class="c"><input type="checkbox" id="c-41414582" checked=""/><div class="controls bullet"><span class="by">movedx</span><span>|</span><a href="#41413039">root</a><span>|</span><a href="#41414421">parent</a><span>|</span><a href="#41414664">prev</a><span>|</span><a href="#41414717">next</a><span>|</span><label class="collapse" for="c-41414582">[-]</label><label class="expand" for="c-41414582">[2 more]</label></div><br/><div class="children"><div class="content">I couldn&#x27;t agree more.</div><br/><div id="41414837" class="c"><input type="checkbox" id="c-41414837" checked=""/><div class="controls bullet"><span class="by">jauntywundrkind</span><span>|</span><a href="#41413039">root</a><span>|</span><a href="#41414582">parent</a><span>|</span><a href="#41414717">next</a><span>|</span><label class="collapse" for="c-41414837">[-]</label><label class="expand" for="c-41414837">[1 more]</label></div><br/><div class="children"><div class="content">And yet you both throw incredibly weak &amp; broad non-technical aspersions.<p>Casting such broad unspecific unnuanced nets, denying value blanketly where clearly some people do find value, is trolling.</div><br/></div></div></div></div><div id="41414717" class="c"><input type="checkbox" id="c-41414717" checked=""/><div class="controls bullet"><span class="by">cyberpunk</span><span>|</span><a href="#41413039">root</a><span>|</span><a href="#41414421">parent</a><span>|</span><a href="#41414582">prev</a><span>|</span><a href="#41415110">next</a><span>|</span><label class="collapse" for="c-41414717">[-]</label><label class="expand" for="c-41414717">[2 more]</label></div><br/><div class="children"><div class="content">This is just not true anymore. I went through the pain of using it early and there were times to feel like that, but t brings far more to the table than it costs anymore…</div><br/><div id="41415004" class="c"><input type="checkbox" id="c-41415004" checked=""/><div class="controls bullet"><span class="by">anonzzzies</span><span>|</span><a href="#41413039">root</a><span>|</span><a href="#41414717">parent</a><span>|</span><a href="#41415110">next</a><span>|</span><label class="collapse" for="c-41415004">[-]</label><label class="expand" for="c-41415004">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s fine if you run it at a cloud provider. Setting up a k8s cluster yourself is painful though and at a cloud provider it costs far more than using just bare metal and&#x2F;or docker (we do not, as it&#x27;s another thing to manage and very boring). We have auto deploy scripts in Perl since the 90s and never had any needs for any of this stuff; we now host for less than $100&#x2F;mo, with millions of users and a <i>lot</i> of profit with very little maintenance. I wonder why IT people like burning money so much, especially here on HN.<p>There is no need for almost any sites; sure facebook&#x2F;google, but you are not running those nor is it likely you (not specifically you obviously, me neither) ever will. VPSs are robust these days and have no downtime besides kernel updates. I cannot phantom why you would want to burn humans or money on this kind of complexity. But then again, we like profit (not growth because of growth) and it seems that most here really are not that interested in that. If I cannot be Gates or Musk (and I cannot, nor can you, again, no attack on you; just statistics) then I rather have little work or headache with millions $ of profit&#x2F;mo coming in instead of &#x27;growth&#x27;. Maybe i&#x27;m odd, but I am free for the past 30+ years because of these choices (currently; common lisp, apache, perl, php, mysql, haproxy, redis, wireguard; hopefully I get this down to just common lisp + wireguard before I pass). We don&#x27;t use libraries or tech less than 10 years old unless it&#x27;s really needed and we contribute to everything we use (so we use very few things otherwise we have to hire and that&#x27;s a waste of $); I sleep very well at night knowing nothing is going to happen.</div><br/></div></div></div></div><div id="41414601" class="c"><input type="checkbox" id="c-41414601" checked=""/><div class="controls bullet"><span class="by">throwaway984393</span><span>|</span><a href="#41413039">root</a><span>|</span><a href="#41414421">parent</a><span>|</span><a href="#41415110">prev</a><span>|</span><a href="#41414094">next</a><span>|</span><label class="collapse" for="c-41414601">[-]</label><label class="expand" for="c-41414601">[1 more]</label></div><br/><div class="children"><div class="content">K8s is a fantastic development tool. You can&#x27;t ask for a better self-service tool to enable developers to ramp up on a platform and develop or test their apps across teams and orgs in a standard, portable, safe way. Its biggest problem arguably is that it&#x27;s too configurable, and doesn&#x27;t have enough abstractions to hide the complexity.</div><br/></div></div></div></div></div></div><div id="41414094" class="c"><input type="checkbox" id="c-41414094" checked=""/><div class="controls bullet"><span class="by">cortesoft</span><span>|</span><a href="#41413039">parent</a><span>|</span><a href="#41413912">prev</a><span>|</span><a href="#41414062">next</a><span>|</span><label class="collapse" for="c-41414094">[-]</label><label class="expand" for="c-41414094">[4 more]</label></div><br/><div class="children"><div class="content">How do you patch and update your host machines? You need to roll to a backup host, have it take over as primary, patch and reboot your DB host, and then roll back.<p>I would much rather have an automated process for doing that. Kubernetes provides a framework for allowing that to happen.</div><br/><div id="41414138" class="c"><input type="checkbox" id="c-41414138" checked=""/><div class="controls bullet"><span class="by">sgarland</span><span>|</span><a href="#41413039">root</a><span>|</span><a href="#41414094">parent</a><span>|</span><a href="#41414733">next</a><span>|</span><label class="collapse" for="c-41414138">[-]</label><label class="expand" for="c-41414138">[1 more]</label></div><br/><div class="children"><div class="content">With the exception of kernel patches (and even then, tools like ksplice exist), you generally do not have to restart the OS to apply patches.<p>If the DB itself is being patched, then yes, you’ll restart the DB process, but it’s also not difficult to automate failover.</div><br/></div></div><div id="41414733" class="c"><input type="checkbox" id="c-41414733" checked=""/><div class="controls bullet"><span class="by">zsoltkacsandi</span><span>|</span><a href="#41413039">root</a><span>|</span><a href="#41414094">parent</a><span>|</span><a href="#41414138">prev</a><span>|</span><a href="#41414062">next</a><span>|</span><label class="collapse" for="c-41414733">[-]</label><label class="expand" for="c-41414733">[2 more]</label></div><br/><div class="children"><div class="content">I was managing a database cluster that served 30% of the population of my entire country.<p>We rarely needed to restart the hosts or database service (maybe once in every two years), and even if we had the failover process took minutes and it was automated. Without Kubernetes.<p>Nowadays people often think that Kubernetes is the only answer for scalability and automation problems.<p>As the matter of fact we had another product that was running on Kubernetes, they are now migrating off from it, turned out that the old school approach with bare EC2 instances, Ansible, Terraform and Packer is much more reliable, scalable and cost effective than Kubernetes.<p>I have to add that yes, we had to write some custom tools, but it was way less effort than managing a K8S cluster and all the software&#x2F;operators&#x2F;controllers that are needed for running your workload on it.</div><br/></div></div></div></div><div id="41414062" class="c"><input type="checkbox" id="c-41414062" checked=""/><div class="controls bullet"><span class="by">dboreham</span><span>|</span><a href="#41413039">parent</a><span>|</span><a href="#41414094">prev</a><span>|</span><a href="#41413830">next</a><span>|</span><label class="collapse" for="c-41414062">[-]</label><label class="expand" for="c-41414062">[1 more]</label></div><br/><div class="children"><div class="content">K8s is just a complicated confusing poorly documented thing for running containers. Database server processes running in a container is totally fine. Not really different than running said processes on a bare kernel like it&#x27;s 2010.</div><br/></div></div><div id="41413830" class="c"><input type="checkbox" id="c-41413830" checked=""/><div class="controls bullet"><span class="by">awsanswers</span><span>|</span><a href="#41413039">parent</a><span>|</span><a href="#41414062">prev</a><span>|</span><a href="#41414221">next</a><span>|</span><label class="collapse" for="c-41413830">[-]</label><label class="expand" for="c-41413830">[8 more]</label></div><br/><div class="children"><div class="content">Explain why kubernetes isn&#x27;t a good choice for hosting a relational database.</div><br/><div id="41414237" class="c"><input type="checkbox" id="c-41414237" checked=""/><div class="controls bullet"><span class="by">sgarland</span><span>|</span><a href="#41413039">root</a><span>|</span><a href="#41413830">parent</a><span>|</span><a href="#41414221">next</a><span>|</span><label class="collapse" for="c-41414237">[-]</label><label class="expand" for="c-41414237">[7 more]</label></div><br/><div class="children"><div class="content">For small databases (anything with ~&lt; 10,000,000 rows), sure, it&#x27;s probably fine. Other than that, no.<p>* Unless you are self-hosting K8s and thus have a large amount of control over the underlying storage, the amount of IOPS you&#x27;re getting will be hazy at best. Tbf this is also true with every single DBaaS, because the latency on network storage is absurd, so IOPS become somewhat meaningless.<p>* Unless you have modified the CPU scheduling options [0] in K8s, you have no control over core pinning or NUMA layout. This is even worse due to the fact that your K8s nodes are probably multi-tenancy.<p>* By its nature, K8s is designed to host stateless apps. It is <i>fantastic</i> at doing this, to be clear. I love K8s. But a system where the nodes can (and should, if you&#x27;re taking advantage of spot pricing) disappear with a few minutes&#x27; warning is not a great host for an RDBMS.<p>* Hot take: it makes provisioning a database even easier, which means people with even less understanding or care of how they operate will be doing so with reckless abandon, which means people like me have even more work to do cleaning up their mess. I am a big fan of gatekeeping things that keep companies afloat. If you want to touch the thing that every service is depending on, learn how it works first – I&#x27;d be thrilled to help you. But don&#x27;t come in and just yolo a copy-paste YAML into prod and then start chucking JSON blobs into it because you can&#x27;t be bothered to learn proper data modeling, nor reading RDBMS docs.<p>Re: [0], if you don&#x27;t care about core pinning, then it&#x27;s unlikely you&#x27;re going to care about any of these other points, and you probably also don&#x27;t understand (or care) how blindingly fast an RDBMS on metal with NVMe can be.<p>I am not a Luddite. To reiterate, I have administrated self-hosted and managed K8s professionally. I also run it at home. I just have strong opinions about understanding fundamentals (and not causing myself extra work by allowing people who don&#x27;t care about them to run infra).<p>[0]: <a href="https:&#x2F;&#x2F;kubernetes.io&#x2F;docs&#x2F;tasks&#x2F;administer-cluster&#x2F;cpu-management-policies&#x2F;" rel="nofollow">https:&#x2F;&#x2F;kubernetes.io&#x2F;docs&#x2F;tasks&#x2F;administer-cluster&#x2F;cpu-mana...</a></div><br/><div id="41414305" class="c"><input type="checkbox" id="c-41414305" checked=""/><div class="controls bullet"><span class="by">achanda358</span><span>|</span><a href="#41413039">root</a><span>|</span><a href="#41414237">parent</a><span>|</span><a href="#41415141">next</a><span>|</span><label class="collapse" for="c-41414305">[-]</label><label class="expand" for="c-41414305">[5 more]</label></div><br/><div class="children"><div class="content">&gt; By its nature, K8s is designed to host stateless apps. It is fantastic at doing this, to be clear. I love K8s. But a system where the nodes can (and should, if you&#x27;re taking advantage of spot pricing) disappear with a few minutes&#x27; warning is not a great host for an RDBMS.<p>Why is this a problem? A typical deployment will have multiple replicas, with (hopefully) small replication lag. Those should be able to be promoted to be the new primary within a minute.</div><br/><div id="41414745" class="c"><input type="checkbox" id="c-41414745" checked=""/><div class="controls bullet"><span class="by">porker</span><span>|</span><a href="#41413039">root</a><span>|</span><a href="#41414305">parent</a><span>|</span><a href="#41414507">next</a><span>|</span><label class="collapse" for="c-41414745">[-]</label><label class="expand" for="c-41414745">[1 more]</label></div><br/><div class="children"><div class="content">&gt; A typical deployment will have multiple replicas, with (hopefully) small replication lag. Those should be able to be promoted to be the new primary within a minute.<p>What happens within that minute to database writes?</div><br/></div></div><div id="41414507" class="c"><input type="checkbox" id="c-41414507" checked=""/><div class="controls bullet"><span class="by">anonzzzies</span><span>|</span><a href="#41413039">root</a><span>|</span><a href="#41414305">parent</a><span>|</span><a href="#41414745">prev</a><span>|</span><a href="#41415141">next</a><span>|</span><label class="collapse" for="c-41414507">[-]</label><label class="expand" for="c-41414507">[3 more]</label></div><br/><div class="children"><div class="content">&gt; typical deployment<p>Ah yes, HN. You know there are billions of sites(wp mostly), LoB apps etc that run on 1 mysql&#x2F;pg&#x2F;etc instance right? Replicas are not typical and a tiny minority.</div><br/><div id="41415186" class="c"><input type="checkbox" id="c-41415186" checked=""/><div class="controls bullet"><span class="by">kgeist</span><span>|</span><a href="#41413039">root</a><span>|</span><a href="#41414507">parent</a><span>|</span><a href="#41414594">next</a><span>|</span><label class="collapse" for="c-41415186">[-]</label><label class="expand" for="c-41415186">[1 more]</label></div><br/><div class="children"><div class="content">Why would I want k8s for a simple Wordpress site in that case?</div><br/></div></div><div id="41414594" class="c"><input type="checkbox" id="c-41414594" checked=""/><div class="controls bullet"><span class="by">movedx</span><span>|</span><a href="#41413039">root</a><span>|</span><a href="#41414507">parent</a><span>|</span><a href="#41415186">prev</a><span>|</span><a href="#41415141">next</a><span>|</span><label class="collapse" for="c-41414594">[-]</label><label class="expand" for="c-41414594">[1 more]</label></div><br/><div class="children"><div class="content">Exactly. Kubernetes and micro services? Sure, for about 0.5% of the industry. Everyone else needs two servers and a load balancer.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="41414221" class="c"><input type="checkbox" id="c-41414221" checked=""/><div class="controls bullet"><span class="by">j45</span><span>|</span><a href="#41413039">parent</a><span>|</span><a href="#41413830">prev</a><span>|</span><a href="#41415166">next</a><span>|</span><label class="collapse" for="c-41414221">[-]</label><label class="expand" for="c-41414221">[1 more]</label></div><br/><div class="children"><div class="content">Depending on what you&#x27;re after, the serversideup.net libraries can be pretty handy.<p>They also have a relatively new project out called spin which is a docker swarm orchestrator. Seems to be the real deal.<p><a href="https:&#x2F;&#x2F;serversideup.net&#x2F;open-source&#x2F;spin&#x2F;" rel="nofollow">https:&#x2F;&#x2F;serversideup.net&#x2F;open-source&#x2F;spin&#x2F;</a></div><br/></div></div></div></div><div id="41413640" class="c"><input type="checkbox" id="c-41413640" checked=""/><div class="controls bullet"><span class="by">cwiggs</span><span>|</span><a href="#41413039">prev</a><span>|</span><a href="#41414593">next</a><span>|</span><label class="collapse" for="c-41413640">[-]</label><label class="expand" for="c-41413640">[2 more]</label></div><br/><div class="children"><div class="content">Anyone know how this compares with stackgres and cloudnative-pg?<p>Looks like this supports mysql and mongodb, which the others don&#x27;t.</div><br/></div></div></div></div></div></div></div></body></html>