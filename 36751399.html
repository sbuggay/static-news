<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1689584451521" as="style"/><link rel="stylesheet" href="styles.css?v=1689584451521"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.righto.com/2023/07/undocumented-8086-instructions.html">Undocumented 8086 instructions, explained by the microcode</a> <span class="domain">(<a href="https://www.righto.com">www.righto.com</a>)</span></div><div class="subtext"><span>kens</span> | <span>73 comments</span></div><br/><div><div id="36752098" class="c"><input type="checkbox" id="c-36752098" checked=""/><div class="controls bullet"><span class="by">chx</span><span>|</span><a href="#36755695">next</a><span>|</span><label class="collapse" for="c-36752098">[-]</label><label class="expand" for="c-36752098">[16 more]</label></div><br/><div class="children"><div class="content">&gt; The undocumented C9 opcode is identical to the documented CB, far return instruction.<p>I <i>remember</i> this.<p>Once ... gosh, it&#x27;s hard to believe how long ago that was now, but once I knew the entire Z80 opcode table off head. I could read the Z80 machine code and disassemble it. High school crowded that stuff out of my head, I went to a special math school, it was very very hard. Except... C9 was RET (and the Z80 is an extension of the Intel 8080).  That has burned into me so deep I still remember, across more than 35 years. I will be 30 ;) years old in two weeks.</div><br/><div id="36753351" class="c"><input type="checkbox" id="c-36753351" checked=""/><div class="controls bullet"><span class="by">sedatk</span><span>|</span><a href="#36752098">parent</a><span>|</span><a href="#36755622">next</a><span>|</span><label class="collapse" for="c-36753351">[-]</label><label class="expand" for="c-36753351">[1 more]</label></div><br/><div class="children"><div class="content">There is a plaque with hex dump at the entrance of Computer History Museum in Mountain View, California.<p>I immediately recognized the opcodes on it because I knew Z80 and they were in 8080 (I don&#x27;t remember seeing any ED B0 or similar Z80 extensions). 01, 11, 21, C3 and CD’s all over. I think it was either a boot loader or a BASIC ROM startup code, but not sure.<p>8080 probably implies Altair BASIC because there was “(C) MICROSOFT” string in the code.</div><br/></div></div><div id="36755622" class="c"><input type="checkbox" id="c-36755622" checked=""/><div class="controls bullet"><span class="by">watersb</span><span>|</span><a href="#36752098">parent</a><span>|</span><a href="#36753351">prev</a><span>|</span><a href="#36752156">next</a><span>|</span><label class="collapse" for="c-36755622">[-]</label><label class="expand" for="c-36755622">[2 more]</label></div><br/><div class="children"><div class="content">Somewhere around here, I&#x27;ve got a notebook, it&#x27;s pages of hex dump written with a pencil in a child&#x27;s handwriting.<p>I couldn&#x27;t afford a printer.</div><br/><div id="36755706" class="c"><input type="checkbox" id="c-36755706" checked=""/><div class="controls bullet"><span class="by">chx</span><span>|</span><a href="#36752098">root</a><span>|</span><a href="#36755622">parent</a><span>|</span><a href="#36752156">next</a><span>|</span><label class="collapse" for="c-36755706">[-]</label><label class="expand" for="c-36755706">[1 more]</label></div><br/><div class="children"><div class="content">Afford is a good problem to have.<p>I grew up behind the Iron Curtain, the ZX Spectrum we had was smuggled into the country by my parents in 1985.<p>What printer...? There was no printer to buy!</div><br/></div></div></div></div><div id="36752156" class="c"><input type="checkbox" id="c-36752156" checked=""/><div class="controls bullet"><span class="by">gnat</span><span>|</span><a href="#36752098">parent</a><span>|</span><a href="#36755622">prev</a><span>|</span><a href="#36752467">next</a><span>|</span><label class="collapse" for="c-36752156">[-]</label><label class="expand" for="c-36752156">[5 more]</label></div><br/><div class="children"><div class="content">I&#x27;m the same with LDA immediate = A9 in 6502 machine code, from my C64 days. It&#x27;s disturbing how strongly burned-in those neurons are ...</div><br/><div id="36752408" class="c"><input type="checkbox" id="c-36752408" checked=""/><div class="controls bullet"><span class="by">gilmore606</span><span>|</span><a href="#36752098">root</a><span>|</span><a href="#36752156">parent</a><span>|</span><a href="#36752984">next</a><span>|</span><label class="collapse" for="c-36752408">[-]</label><label class="expand" for="c-36752408">[3 more]</label></div><br/><div class="children"><div class="content">SYS 64738</div><br/><div id="36752635" class="c"><input type="checkbox" id="c-36752635" checked=""/><div class="controls bullet"><span class="by">anyfoo</span><span>|</span><a href="#36752098">root</a><span>|</span><a href="#36752408">parent</a><span>|</span><a href="#36752984">next</a><span>|</span><label class="collapse" for="c-36752635">[-]</label><label class="expand" for="c-36752635">[2 more]</label></div><br/><div class="children"><div class="content">In a similar vein, C000 == 49152 has been burned into my brain. I recognize it immediately, because that’s where most C64 assembly programs were loaded, followed by “SYS 49152” for loading them.<p>A000 for example I recognize, but can’t tell you as quickly what it is in decimal as I can with C000.</div><br/><div id="36753291" class="c"><input type="checkbox" id="c-36753291" checked=""/><div class="controls bullet"><span class="by">CptTightpants</span><span>|</span><a href="#36752098">root</a><span>|</span><a href="#36752635">parent</a><span>|</span><a href="#36752984">next</a><span>|</span><label class="collapse" for="c-36753291">[-]</label><label class="expand" for="c-36753291">[1 more]</label></div><br/><div class="children"><div class="content">That address is where cartridges would appear in memory when plugged in, which is why it became SOP to use it.</div><br/></div></div></div></div></div></div></div></div><div id="36752467" class="c"><input type="checkbox" id="c-36752467" checked=""/><div class="controls bullet"><span class="by">userbinator</span><span>|</span><a href="#36752098">parent</a><span>|</span><a href="#36752156">prev</a><span>|</span><a href="#36752809">next</a><span>|</span><label class="collapse" for="c-36752467">[-]</label><label class="expand" for="c-36752467">[4 more]</label></div><br/><div class="children"><div class="content">I have most of the single-byte x86 opcodes still memorised - as many others have independently discovered, it&#x27;s much easier in octal.<p><pre><code>    95 ba 07 01 cd 21 c3 48 65 6c 6c 6f 20 77 6f 72 6c 64 21 0d 0a 24</code></pre></div><br/><div id="36752922" class="c"><input type="checkbox" id="c-36752922" checked=""/><div class="controls bullet"><span class="by">messe</span><span>|</span><a href="#36752098">root</a><span>|</span><a href="#36752467">parent</a><span>|</span><a href="#36754325">next</a><span>|</span><label class="collapse" for="c-36752922">[-]</label><label class="expand" for="c-36752922">[2 more]</label></div><br/><div class="children"><div class="content">I recognize the &quot;hello world&quot; and &quot;int 21h&quot; but, can I ask why that instruction listing seems to start with &quot;xchg (e)ax, (e)bp&quot;?</div><br/><div id="36753108" class="c"><input type="checkbox" id="c-36753108" checked=""/><div class="controls bullet"><span class="by">userbinator</span><span>|</span><a href="#36752098">root</a><span>|</span><a href="#36752922">parent</a><span>|</span><a href="#36754325">next</a><span>|</span><label class="collapse" for="c-36753108">[-]</label><label class="expand" for="c-36753108">[1 more]</label></div><br/><div class="children"><div class="content">Saves one byte since BP is 09xx on start for MS-DOS &gt;= 4.0. Old demoscene sizecoding trick.</div><br/></div></div></div></div><div id="36754325" class="c"><input type="checkbox" id="c-36754325" checked=""/><div class="controls bullet"><span class="by">djmips</span><span>|</span><a href="#36752098">root</a><span>|</span><a href="#36752467">parent</a><span>|</span><a href="#36752922">prev</a><span>|</span><a href="#36752809">next</a><span>|</span><label class="collapse" for="c-36754325">[-]</label><label class="expand" for="c-36754325">[1 more]</label></div><br/><div class="children"><div class="content">I still remember 0x90 because I still use it all the time!</div><br/></div></div></div></div><div id="36752809" class="c"><input type="checkbox" id="c-36752809" checked=""/><div class="controls bullet"><span class="by">donw</span><span>|</span><a href="#36752098">parent</a><span>|</span><a href="#36752467">prev</a><span>|</span><a href="#36755695">next</a><span>|</span><label class="collapse" for="c-36752809">[-]</label><label class="expand" for="c-36752809">[3 more]</label></div><br/><div class="children"><div class="content">As a total aside, domain expertise is kind of amazing.<p>Like, you can look at a string of opcodes from a processor that you haven’t touched for a decade-plus, and still recognize what’s going on.<p>It’s important to remember that applies in all fields.<p>That bumpkin that grew up on a farm?<p>Sure, he might not be able to write an award-winning essay, but he could probably tell you everything you need to know about your local soil chemistry and it’s suitability for various crops just by smelling it.</div><br/></div></div></div></div><div id="36755695" class="c"><input type="checkbox" id="c-36755695" checked=""/><div class="controls bullet"><span class="by">peterfirefly</span><span>|</span><a href="#36752098">prev</a><span>|</span><a href="#36755349">next</a><span>|</span><label class="collapse" for="c-36755695">[-]</label><label class="expand" for="c-36755695">[1 more]</label></div><br/><div class="children"><div class="content">&gt; It gets two bytes from the instruction prefetch queue (Q) and puts them in the AX register.<p>Not <i>actually</i> in the AX register but in a tmp reg, right?</div><br/></div></div><div id="36755349" class="c"><input type="checkbox" id="c-36755349" checked=""/><div class="controls bullet"><span class="by">Max-q</span><span>|</span><a href="#36755695">prev</a><span>|</span><a href="#36751556">next</a><span>|</span><label class="collapse" for="c-36755349">[-]</label><label class="expand" for="c-36755349">[1 more]</label></div><br/><div class="children"><div class="content">I love this blog series that just goes on and on. Keep up the good work!<p>One thing I&#x27;m thinking about: I grew up writing 6502 assembly on the VIC20 and C64. We hated the 8086 back then, as kids do with hardware. When growing up I saw that we were partly right. The 6502 performed very well compared to the IBM PC on practical tasks. But the 6502 is a dirt simple, while the 8086 is surprisingly complex. Was the PC slow due to 8088 and not 8086?<p>I can of course just Google it or check the op code table. But always fun to talk about old technology :)</div><br/></div></div><div id="36751556" class="c"><input type="checkbox" id="c-36751556" checked=""/><div class="controls bullet"><span class="by">colejohnson66</span><span>|</span><a href="#36755349">prev</a><span>|</span><a href="#36752718">next</a><span>|</span><label class="collapse" for="c-36751556">[-]</label><label class="expand" for="c-36751556">[8 more]</label></div><br/><div class="children"><div class="content">A lot of the undocumented instruction &quot;match&quot; bits make sense, such as POP CS at [0F]. However, it&#x27;s clear that the authors of the microcode <i>deliberately</i> made every opcode match to some routine, as evidenced by Jcc being mirrored into the [60..6F] region, LOCK into [F1], group 2 &#x2F;6 into &#x2F;7, etc. It wouldn&#x27;t&#x27;ve &quot;cost&quot; anything extra to make Jcc only match on its documented [70..7F] region (and others) like later processors do. What&#x27;s the advantage of matching on undefined byte sequences?<p>Also, SALC is still <i>technically</i> undocumented by Intel (AMD documents it, though). It doesn&#x27;t have a dedicated section in the SDM (would be in Volume 2, Chapter 4), and in the opcode map (Volume 2, Appendix A), there&#x27;s a blank there. One actually has to go to Volume 3, Chapter 23 &quot;Architecture Compatibility&quot;, Section 15 &quot;Undefined Opcodes&quot; (of version 080 from June) to see it mentioned. It&#x27;s weird. They even call it out as SALC &quot;when not in 64-bit mode&quot; and that it performs &quot;IF (CF=1), AL=FF, ELSE, AL=0&quot;, but refuse to officially document it.</div><br/><div id="36751644" class="c"><input type="checkbox" id="c-36751644" checked=""/><div class="controls bullet"><span class="by">kens</span><span>|</span><a href="#36751556">parent</a><span>|</span><a href="#36754883">next</a><span>|</span><label class="collapse" for="c-36751644">[-]</label><label class="expand" for="c-36751644">[5 more]</label></div><br/><div class="children"><div class="content">There&#x27;s a reason why every 8086 opcode matches something. If an instruction didn&#x27;t match anything, I think the microcode engine would spin idle and the instruction would never terminate. (You need a RNI micro-instruction to end microcode processing.) Having your processor lock up due to a bad opcode is something that the designers presumably explicitly avoided.<p>The 6502 on the other hand, didn&#x27;t take such precautions. There are opcodes that cause the internal timing state machine to sort of fall off the end, causing the CPU to lock up and even an interrupt won&#x27;t rescue you. You need a RESET signal.</div><br/><div id="36755700" class="c"><input type="checkbox" id="c-36755700" checked=""/><div class="controls bullet"><span class="by">watersb</span><span>|</span><a href="#36751556">root</a><span>|</span><a href="#36751644">parent</a><span>|</span><a href="#36751757">next</a><span>|</span><label class="collapse" for="c-36755700">[-]</label><label class="expand" for="c-36755700">[1 more]</label></div><br/><div class="children"><div class="content">Heck, MY computer <i>literally</i> had the infamous &quot;Halt and Catch Fire&quot; instruction:<p><a href="https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Halt_and_Catch_Fire_(computing)" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Halt_and_Catch_Fire_(computi...</a><p>although by the time I got to computing, the HCF didn&#x27;t actually cause conflagration.<p>I think I recall a 1960s computer design that would poll a limited set of (magnetic core) memory addresses in its idle loop, which led to overheating in those memory elements. Boot loader for PDP-8? I don&#x27;t think it was the CDC-6600...</div><br/></div></div><div id="36751757" class="c"><input type="checkbox" id="c-36751757" checked=""/><div class="controls bullet"><span class="by">greenyoda</span><span>|</span><a href="#36751556">root</a><span>|</span><a href="#36751644">parent</a><span>|</span><a href="#36755700">prev</a><span>|</span><a href="#36754883">next</a><span>|</span><label class="collapse" for="c-36751757">[-]</label><label class="expand" for="c-36751757">[3 more]</label></div><br/><div class="children"><div class="content">Also the 6800, with its famous HCF (Halt and Catch Fire) instruction:<p>&gt; <i>With the advent of the MC6800 (introduced in 1974), a design flaw was discovered by programmers. Due to incomplete opcode decoding, two illegal opcodes, 0x9D and 0xDD, will cause the program counter on the processor to increment endlessly, which locks the processor until reset. Those codes have been unofficially named HCF. During the design process of the MC6802, engineers originally planned to remove this instruction, but kept it as-is for testing purposes. As a result, HCF was officially recognized as a real instruction.</i><p><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Halt_and_Catch_Fire_(computing)" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Halt_and_Catch_Fire_(computing...</a></div><br/><div id="36754514" class="c"><input type="checkbox" id="c-36754514" checked=""/><div class="controls bullet"><span class="by">sedatk</span><span>|</span><a href="#36751556">root</a><span>|</span><a href="#36751757">parent</a><span>|</span><a href="#36754883">next</a><span>|</span><label class="collapse" for="c-36754514">[-]</label><label class="expand" for="c-36754514">[2 more]</label></div><br/><div class="children"><div class="content">Also a fantastic TV series about the personal computing era of the 80&#x27;s. <a href="https:&#x2F;&#x2F;www.imdb.com&#x2F;title&#x2F;tt2543312&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.imdb.com&#x2F;title&#x2F;tt2543312&#x2F;</a></div><br/><div id="36755095" class="c"><input type="checkbox" id="c-36755095" checked=""/><div class="controls bullet"><span class="by">SomeRndName11</span><span>|</span><a href="#36751556">root</a><span>|</span><a href="#36754514">parent</a><span>|</span><a href="#36754883">next</a><span>|</span><label class="collapse" for="c-36755095">[-]</label><label class="expand" for="c-36755095">[1 more]</label></div><br/><div class="children"><div class="content">The show is mediocre, lots of technical inaccuracies.</div><br/></div></div></div></div></div></div></div></div><div id="36754883" class="c"><input type="checkbox" id="c-36754883" checked=""/><div class="controls bullet"><span class="by">kiwidrew</span><span>|</span><a href="#36751556">parent</a><span>|</span><a href="#36751644">prev</a><span>|</span><a href="#36752718">next</a><span>|</span><label class="collapse" for="c-36754883">[-]</label><label class="expand" for="c-36754883">[2 more]</label></div><br/><div class="children"><div class="content">When implementing the decoding in silicon, each bit you want to compare requires one or more transistors;  but no transistors are required for the &quot;don&#x27;t care&quot; bits.</div><br/><div id="36755166" class="c"><input type="checkbox" id="c-36755166" checked=""/><div class="controls bullet"><span class="by">kens</span><span>|</span><a href="#36751556">root</a><span>|</span><a href="#36754883">parent</a><span>|</span><a href="#36752718">next</a><span>|</span><label class="collapse" for="c-36755166">[-]</label><label class="expand" for="c-36755166">[1 more]</label></div><br/><div class="children"><div class="content">Since the decoder is implemented in a PLA-style matrix, you don&#x27;t save any space by omitting transistors. So that&#x27;s not a motivation.<p>Random thing: chip transistor counts usually count &quot;transistor sites&quot; rather than physical transistors, so the omitted transistors still show up in the transistor counts.</div><br/></div></div></div></div></div></div><div id="36752718" class="c"><input type="checkbox" id="c-36752718" checked=""/><div class="controls bullet"><span class="by">userbinator</span><span>|</span><a href="#36751556">prev</a><span>|</span><a href="#36751722">next</a><span>|</span><label class="collapse" for="c-36752718">[-]</label><label class="expand" for="c-36752718">[5 more]</label></div><br/><div class="children"><div class="content"><i>Although these registers are normally not accessible by the programmer, some undocumented instructions provide access to these registers, as will be described later.</i><p>Reminds me of the MEMPTR on Z80: <a href="https:&#x2F;&#x2F;gist.github.com&#x2F;drhelius&#x2F;8497817" rel="nofollow noreferrer">https:&#x2F;&#x2F;gist.github.com&#x2F;drhelius&#x2F;8497817</a><p>Also, I&#x27;m not sure if you&#x27;ve explored 8f&#x2F;1-7 yet, since it&#x27;s not mentioned in the article, but I suspect it&#x27;s just the same as pop r&#x2F;m16 (8f&#x2F;0) as it ignores the subopcode bits completely. It&#x27;s very weird that the push and pop are in completely different places in the opcode map.</div><br/><div id="36754468" class="c"><input type="checkbox" id="c-36754468" checked=""/><div class="controls bullet"><span class="by">toast0</span><span>|</span><a href="#36752718">parent</a><span>|</span><a href="#36754704">next</a><span>|</span><label class="collapse" for="c-36754468">[-]</label><label class="expand" for="c-36754468">[2 more]</label></div><br/><div class="children"><div class="content">&gt; It&#x27;s very weird that the push and pop are in completely different places in the opcode map.<p>Are they? There&#x27;s a lot of different opcodes for push and pop, but if I&#x27;m reading right, for a given address mode, the op code for push and pop always differs by one bit (which bit changes though)<p><a href="https:&#x2F;&#x2F;www.felixcloutier.com&#x2F;x86&#x2F;push" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.felixcloutier.com&#x2F;x86&#x2F;push</a> <a href="https:&#x2F;&#x2F;www.felixcloutier.com&#x2F;x86&#x2F;pop" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.felixcloutier.com&#x2F;x86&#x2F;pop</a></div><br/><div id="36754650" class="c"><input type="checkbox" id="c-36754650" checked=""/><div class="controls bullet"><span class="by">bonzini</span><span>|</span><a href="#36752718">root</a><span>|</span><a href="#36754468">parent</a><span>|</span><a href="#36754704">next</a><span>|</span><label class="collapse" for="c-36754650">[-]</label><label class="expand" for="c-36754650">[1 more]</label></div><br/><div class="children"><div class="content">He&#x27;s talking about 8F&#x2F;0 (pop) and FF&#x2F;6 (push).</div><br/></div></div></div></div><div id="36754704" class="c"><input type="checkbox" id="c-36754704" checked=""/><div class="controls bullet"><span class="by">kens</span><span>|</span><a href="#36752718">parent</a><span>|</span><a href="#36754468">prev</a><span>|</span><a href="#36751722">next</a><span>|</span><label class="collapse" for="c-36754704">[-]</label><label class="expand" for="c-36754704">[2 more]</label></div><br/><div class="children"><div class="content">I hadn&#x27;t noticed that characteristic of 8F. Looking at the microcode, the subopcode bits are ignored, so I think your analysis is correct.<p>I agree that it&#x27;s very weird that PUSH rm and POP rm are arranged completely differently. The obvious place to put POP would be in FF&#x2F;7, especially since that spot is unused. I can&#x27;t think of any reason why they wouldn&#x27;t do that.</div><br/><div id="36755475" class="c"><input type="checkbox" id="c-36755475" checked=""/><div class="controls bullet"><span class="by">peterfirefly</span><span>|</span><a href="#36752718">root</a><span>|</span><a href="#36754704">parent</a><span>|</span><a href="#36751722">next</a><span>|</span><label class="collapse" for="c-36755475">[-]</label><label class="expand" for="c-36755475">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Looking at the microcode, the subopcode bits are ignored, so I think your analysis is correct.<p>That&#x27;s what Andrew Jenner&#x27;s emulator code does.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;reenigne&#x2F;reenigne&#x2F;blob&#x2F;master&#x2F;8088&#x2F;xtce&#x2F;xtce.h">https:&#x2F;&#x2F;github.com&#x2F;reenigne&#x2F;reenigne&#x2F;blob&#x2F;master&#x2F;8088&#x2F;xtce&#x2F;x...</a><p>Line 3049.</div><br/></div></div></div></div></div></div><div id="36751722" class="c"><input type="checkbox" id="c-36751722" checked=""/><div class="controls bullet"><span class="by">quickthrower2</span><span>|</span><a href="#36752718">prev</a><span>|</span><a href="#36751918">next</a><span>|</span><label class="collapse" for="c-36751722">[-]</label><label class="expand" for="c-36751722">[19 more]</label></div><br/><div class="children"><div class="content">Aside: If you are writing stuff this good (and this niche) I would say ditch the ads. They really will turn off the audience you want to attract. Or at least use one of the developer-focused ad networks that just inline ads not pop them up.</div><br/><div id="36752737" class="c"><input type="checkbox" id="c-36752737" checked=""/><div class="controls bullet"><span class="by">Aurornis</span><span>|</span><a href="#36751722">parent</a><span>|</span><a href="#36752178">next</a><span>|</span><label class="collapse" for="c-36752737">[-]</label><label class="expand" for="c-36752737">[1 more]</label></div><br/><div class="children"><div class="content">&gt; They really will turn off the audience you want to attract.<p>I disagree. The vast majority of the internet doesn’t care, because it’s the internet and this is normal.<p>The types of readers who will read a blog post and critique the author for things unrelated to the content of the blog (such as the presence of ads) are generally not a great audience to cultivate, and definitely not a great vocal minority to cater to.<p>There are numerous examples of YouTubers being hesitant to turn on ads in their early days because they think it will drive away potential subscribers and drive down view counts. Then they turn them on eventually, growth continues exactly as before, and their only regret is not turning them on sooner.<p>Be careful not to mistake the vocal minority’s complaints as a common concern.</div><br/></div></div><div id="36752178" class="c"><input type="checkbox" id="c-36752178" checked=""/><div class="controls bullet"><span class="by">EvanAnderson</span><span>|</span><a href="#36751722">parent</a><span>|</span><a href="#36752737">prev</a><span>|</span><a href="#36752895">next</a><span>|</span><label class="collapse" for="c-36752178">[-]</label><label class="expand" for="c-36752178">[3 more]</label></div><br/><div class="children"><div class="content">I’m on iOS and the ad was unobtrusive. I’m very happy to support Ken. Unless the ads are more disruptive on other platforms I’d say leave ‘em in.</div><br/><div id="36752451" class="c"><input type="checkbox" id="c-36752451" checked=""/><div class="controls bullet"><span class="by">quickthrower2</span><span>|</span><a href="#36751722">root</a><span>|</span><a href="#36752178">parent</a><span>|</span><a href="#36752895">next</a><span>|</span><label class="collapse" for="c-36752451">[-]</label><label class="expand" for="c-36752451">[2 more]</label></div><br/><div class="children"><div class="content">Another factor though is for tech people:<p>1. Either they block the ad, in which case no revenue anyway.<p>2. Or they don&#x27;t block it and it looks like an ad ridden site at first glance, so makes some people kneejerk close it.</div><br/><div id="36752568" class="c"><input type="checkbox" id="c-36752568" checked=""/><div class="controls bullet"><span class="by">anyfoo</span><span>|</span><a href="#36751722">root</a><span>|</span><a href="#36752451">parent</a><span>|</span><a href="#36752895">next</a><span>|</span><label class="collapse" for="c-36752568">[-]</label><label class="expand" for="c-36752568">[1 more]</label></div><br/><div class="children"><div class="content">I use an adblocker, but even if I didn’t, I’d have a very hard time to think that someone who is actually interested in the subject would think this is an “ad ridden” site and close it. The quality of the blog posts are apparent immediately.</div><br/></div></div></div></div></div></div><div id="36752895" class="c"><input type="checkbox" id="c-36752895" checked=""/><div class="controls bullet"><span class="by">NotYourLawyer</span><span>|</span><a href="#36751722">parent</a><span>|</span><a href="#36752178">prev</a><span>|</span><a href="#36751886">next</a><span>|</span><label class="collapse" for="c-36752895">[-]</label><label class="expand" for="c-36752895">[1 more]</label></div><br/><div class="children"><div class="content">&gt;2023<p>&gt;even being able to tell that a website has ads<p>Wew</div><br/></div></div><div id="36751886" class="c"><input type="checkbox" id="c-36751886" checked=""/><div class="controls bullet"><span class="by">djmips</span><span>|</span><a href="#36751722">parent</a><span>|</span><a href="#36752895">prev</a><span>|</span><a href="#36752564">next</a><span>|</span><label class="collapse" for="c-36751886">[-]</label><label class="expand" for="c-36751886">[1 more]</label></div><br/><div class="children"><div class="content">Data point: I browsed without an adblocker on phone in Chrome and didn&#x27;t see any ads.</div><br/></div></div><div id="36752564" class="c"><input type="checkbox" id="c-36752564" checked=""/><div class="controls bullet"><span class="by">asdfasdfjkl</span><span>|</span><a href="#36751722">parent</a><span>|</span><a href="#36751886">prev</a><span>|</span><a href="#36751788">next</a><span>|</span><label class="collapse" for="c-36752564">[-]</label><label class="expand" for="c-36752564">[1 more]</label></div><br/><div class="children"><div class="content">&gt; They really will turn off the audience you want to attract.<p>Unless you were about to donate a few pennies to the author, I&#x27;m not sure &quot;freeloaders&quot; is the audience they were aiming for.</div><br/></div></div><div id="36751788" class="c"><input type="checkbox" id="c-36751788" checked=""/><div class="controls bullet"><span class="by">unnouinceput</span><span>|</span><a href="#36751722">parent</a><span>|</span><a href="#36752564">prev</a><span>|</span><a href="#36751918">next</a><span>|</span><label class="collapse" for="c-36751788">[-]</label><label class="expand" for="c-36751788">[11 more]</label></div><br/><div class="children"><div class="content">What ads? Didn&#x27;t seen any ads when visiting the page. Are you browsing the web without uBlock Origin by any chance?</div><br/><div id="36751856" class="c"><input type="checkbox" id="c-36751856" checked=""/><div class="controls bullet"><span class="by">lloydatkinson</span><span>|</span><a href="#36751722">root</a><span>|</span><a href="#36751788">parent</a><span>|</span><a href="#36753122">next</a><span>|</span><label class="collapse" for="c-36751856">[-]</label><label class="expand" for="c-36751856">[6 more]</label></div><br/><div class="children"><div class="content">I am always amazed how many tech orientated people don&#x27;t use any kind of ad blocking</div><br/><div id="36752122" class="c"><input type="checkbox" id="c-36752122" checked=""/><div class="controls bullet"><span class="by">flockonus</span><span>|</span><a href="#36751722">root</a><span>|</span><a href="#36751856">parent</a><span>|</span><a href="#36751887">next</a><span>|</span><label class="collapse" for="c-36752122">[-]</label><label class="expand" for="c-36752122">[3 more]</label></div><br/><div class="children"><div class="content">Having AdBlock extension, but like all my extensions also have &quot;This can read and change site data &gt; when you click the extension&quot; while turn on to any domain that &quot;misbehave&quot; with sticky ads, videos or whatever annoying flashing things. Otherwise I&#x27;m just hurting content creators for no good reason.
I would not enable an extension on any domain i input my email, password, or otherwise have sensitive private information.</div><br/><div id="36752406" class="c"><input type="checkbox" id="c-36752406" checked=""/><div class="controls bullet"><span class="by">treyd</span><span>|</span><a href="#36751722">root</a><span>|</span><a href="#36752122">parent</a><span>|</span><a href="#36752578">next</a><span>|</span><label class="collapse" for="c-36752406">[-]</label><label class="expand" for="c-36752406">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Otherwise I&#x27;m just hurting content creators for no good reason.<p>It&#x27;s less about the content creators and more about supporting a system &#x2F; business model that isn&#x27;t really sustainable and reliant on business practices that distract and in many cases actively harm consumers.  Most content creators have Patreon profiles or some similar service for taking donations in a structured and community-driven way, why don&#x27;t you use an adblocker and donate there?</div><br/></div></div><div id="36752578" class="c"><input type="checkbox" id="c-36752578" checked=""/><div class="controls bullet"><span class="by">anyfoo</span><span>|</span><a href="#36751722">root</a><span>|</span><a href="#36752122">parent</a><span>|</span><a href="#36752406">prev</a><span>|</span><a href="#36751887">next</a><span>|</span><label class="collapse" for="c-36752578">[-]</label><label class="expand" for="c-36752578">[1 more]</label></div><br/><div class="children"><div class="content">That’s why Safari has content blocker extensions. Those cannot read the content or do network requests, they can only block content.<p>I use 1Blocker. It’s made of several extensions, only one or two non-essential ones that are not pure content blockers (and so can read the site), and which I have turned off, with still very good results.</div><br/></div></div></div></div><div id="36752407" class="c"><input type="checkbox" id="c-36752407" checked=""/><div class="controls bullet"><span class="by">FpUser</span><span>|</span><a href="#36751722">root</a><span>|</span><a href="#36751856">parent</a><span>|</span><a href="#36751887">prev</a><span>|</span><a href="#36753122">next</a><span>|</span><label class="collapse" for="c-36752407">[-]</label><label class="expand" for="c-36752407">[1 more]</label></div><br/><div class="children"><div class="content">I use Brave browser. It has built in ad blocker</div><br/></div></div></div></div><div id="36753122" class="c"><input type="checkbox" id="c-36753122" checked=""/><div class="controls bullet"><span class="by">afavour</span><span>|</span><a href="#36751722">root</a><span>|</span><a href="#36751788">parent</a><span>|</span><a href="#36751856">prev</a><span>|</span><a href="#36752430">next</a><span>|</span><label class="collapse" for="c-36753122">[-]</label><label class="expand" for="c-36753122">[3 more]</label></div><br/><div class="children"><div class="content">I see this kind of “ads? I didn’t see any ads in my ad-blocking browser!” response practically every time someone mentions ads on here. Can I ask what you’re trying to achieve? Do you think the HN audience is unaware of ad blockers?</div><br/><div id="36754554" class="c"><input type="checkbox" id="c-36754554" checked=""/><div class="controls bullet"><span class="by">gkbrk</span><span>|</span><a href="#36751722">root</a><span>|</span><a href="#36753122">parent</a><span>|</span><a href="#36753382">next</a><span>|</span><label class="collapse" for="c-36754554">[-]</label><label class="expand" for="c-36754554">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Do you think the HN audience is unaware of ad blockers?<p>Clearly some portion of the HN audience might be unaware, as they are in this thread complaining about ads.</div><br/></div></div><div id="36753382" class="c"><input type="checkbox" id="c-36753382" checked=""/><div class="controls bullet"><span class="by">hfkwer</span><span>|</span><a href="#36751722">root</a><span>|</span><a href="#36753122">parent</a><span>|</span><a href="#36754554">prev</a><span>|</span><a href="#36752430">next</a><span>|</span><label class="collapse" for="c-36753382">[-]</label><label class="expand" for="c-36753382">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s just an expression of irritation towards people who contribute nothing of value to the discussion about the content of the article. &quot;oh no I see ads on your site it sucks!&quot; Erm, okay? Who cares? Install an ad blocker if it bothers you so much. It&#x27;s faster than typing a comment on hn for greater pay off.</div><br/></div></div></div></div><div id="36752430" class="c"><input type="checkbox" id="c-36752430" checked=""/><div class="controls bullet"><span class="by">quickthrower2</span><span>|</span><a href="#36751722">root</a><span>|</span><a href="#36751788">parent</a><span>|</span><a href="#36753122">prev</a><span>|</span><a href="#36751918">next</a><span>|</span><label class="collapse" for="c-36752430">[-]</label><label class="expand" for="c-36752430">[1 more]</label></div><br/><div class="children"><div class="content">Yes, when you have a bunch of devices, sometimes one of them doesn&#x27;t have it set up yet.</div><br/></div></div></div></div></div></div><div id="36751918" class="c"><input type="checkbox" id="c-36751918" checked=""/><div class="controls bullet"><span class="by">djmips</span><span>|</span><a href="#36751722">prev</a><span>|</span><a href="#36752221">next</a><span>|</span><label class="collapse" for="c-36751918">[-]</label><label class="expand" for="c-36751918">[5 more]</label></div><br/><div class="children"><div class="content">Offtopic: this is an excellent series on the 8086! Do you have plans to give a similar treatment to the Motorola 68000?</div><br/><div id="36752013" class="c"><input type="checkbox" id="c-36752013" checked=""/><div class="controls bullet"><span class="by">kens</span><span>|</span><a href="#36751918">parent</a><span>|</span><a href="#36752221">next</a><span>|</span><label class="collapse" for="c-36752013">[-]</label><label class="expand" for="c-36752013">[4 more]</label></div><br/><div class="children"><div class="content">When I&#x27;m done with the 8086, I might look at the 68000 but I don&#x27;t have any specific plans.</div><br/><div id="36753368" class="c"><input type="checkbox" id="c-36753368" checked=""/><div class="controls bullet"><span class="by">pwg</span><span>|</span><a href="#36751918">root</a><span>|</span><a href="#36752013">parent</a><span>|</span><a href="#36754180">next</a><span>|</span><label class="collapse" for="c-36753368">[-]</label><label class="expand" for="c-36753368">[2 more]</label></div><br/><div class="children"><div class="content">Ken, before you do, you have a typo in the 5th paragraph of this post:<p>The 80_68_&#x27;s microcode ROM</div><br/><div id="36754085" class="c"><input type="checkbox" id="c-36754085" checked=""/><div class="controls bullet"><span class="by">kens</span><span>|</span><a href="#36751918">root</a><span>|</span><a href="#36753368">parent</a><span>|</span><a href="#36754180">next</a><span>|</span><label class="collapse" for="c-36754085">[-]</label><label class="expand" for="c-36754085">[1 more]</label></div><br/><div class="children"><div class="content">Thanks! It&#x27;s fixed now.</div><br/></div></div></div></div><div id="36754180" class="c"><input type="checkbox" id="c-36754180" checked=""/><div class="controls bullet"><span class="by">Zeetah</span><span>|</span><a href="#36751918">root</a><span>|</span><a href="#36752013">parent</a><span>|</span><a href="#36753368">prev</a><span>|</span><a href="#36752221">next</a><span>|</span><label class="collapse" for="c-36754180">[-]</label><label class="expand" for="c-36754180">[1 more]</label></div><br/><div class="children"><div class="content">I really hope you take a look at the 68000.<p>I&#x27;m curious how Motorola&#x27;s circuit design and approach differs from Intel&#x27;s.</div><br/></div></div></div></div></div></div><div id="36752221" class="c"><input type="checkbox" id="c-36752221" checked=""/><div class="controls bullet"><span class="by">EvanAnderson</span><span>|</span><a href="#36751918">prev</a><span>|</span><a href="#36751983">next</a><span>|</span><label class="collapse" for="c-36752221">[-]</label><label class="expand" for="c-36752221">[3 more]</label></div><br/><div class="children"><div class="content">Based on AAM using CORD for the division operation will D4 00 generate the same division by zero error as a DIV with a zero divisor? (I can’t think of any reason this would be useful but I do like thinking about edge cases and how things break.)</div><br/><div id="36752264" class="c"><input type="checkbox" id="c-36752264" checked=""/><div class="controls bullet"><span class="by">kens</span><span>|</span><a href="#36752221">parent</a><span>|</span><a href="#36751983">next</a><span>|</span><label class="collapse" for="c-36752264">[-]</label><label class="expand" for="c-36752264">[2 more]</label></div><br/><div class="children"><div class="content">My transistor-level simulator shows that the 8086 will generate a divide by 0 interrupt if you give the AAM instruction a divisor of 0. But I haven&#x27;t tried this on a real chip.</div><br/><div id="36752488" class="c"><input type="checkbox" id="c-36752488" checked=""/><div class="controls bullet"><span class="by">userbinator</span><span>|</span><a href="#36752221">root</a><span>|</span><a href="#36752264">parent</a><span>|</span><a href="#36751983">next</a><span>|</span><label class="collapse" for="c-36752488">[-]</label><label class="expand" for="c-36752488">[1 more]</label></div><br/><div class="children"><div class="content">It does on newer physical hardware too.</div><br/></div></div></div></div></div></div><div id="36751983" class="c"><input type="checkbox" id="c-36751983" checked=""/><div class="controls bullet"><span class="by">bruce343434</span><span>|</span><a href="#36752221">prev</a><span>|</span><a href="#36753059">next</a><span>|</span><label class="collapse" for="c-36751983">[-]</label><label class="expand" for="c-36751983">[8 more]</label></div><br/><div class="children"><div class="content">Where can one learn more about microcode, how it&#x27;s implemented in silicon? As I understand it most machine code is actually &quot;VM bytecode&quot;, and the &quot;real&quot; cpu is the microcode processor?</div><br/><div id="36752028" class="c"><input type="checkbox" id="c-36752028" checked=""/><div class="controls bullet"><span class="by">kens</span><span>|</span><a href="#36751983">parent</a><span>|</span><a href="#36752105">next</a><span>|</span><label class="collapse" for="c-36752028">[-]</label><label class="expand" for="c-36752028">[2 more]</label></div><br/><div class="children"><div class="content">A computer architecture book such as Hennessy and Patterson will describe microcode in detail.<p>It&#x27;s a bit confusing because microcode has changed meaning a bit over time. &quot;Classical&quot; microcode, such as the 8086, replaces hard-wired control logic with micro-instructions. The processor steps through the appropriate micro-instructions, which are decoded to generate control signals.<p>The Pentium Pro introduced a new model, where machine instructions are broken down into independent micro-ops, which are handed off to the core processor engine and processed independently, in parallel. At the end, the micro-ops are &quot;retired&quot; in a sequential order, so your program appears sequential.<p>Most micro-ops are generated by decoders that convert a machine instruction into a small number of micro-ops. However, complicated machine instructions are converted into micro-ops by microcode. This is similar to classical microcode, except it&#x27;s not executing micro-instructions but generating micro-ops that then get run by the underlying processor.</div><br/><div id="36752592" class="c"><input type="checkbox" id="c-36752592" checked=""/><div class="controls bullet"><span class="by">userbinator</span><span>|</span><a href="#36751983">root</a><span>|</span><a href="#36752028">parent</a><span>|</span><a href="#36752105">next</a><span>|</span><label class="collapse" for="c-36752592">[-]</label><label class="expand" for="c-36752592">[1 more]</label></div><br/><div class="children"><div class="content">I wouldn&#x27;t recommend anything from Hennessy and Patterson for learning about microcode; they are entirely RISC proponents, after all. Instead, books and articles from 50s-70s on computer design are probably far more detailed and relevant.</div><br/></div></div></div></div><div id="36752105" class="c"><input type="checkbox" id="c-36752105" checked=""/><div class="controls bullet"><span class="by">pests</span><span>|</span><a href="#36751983">parent</a><span>|</span><a href="#36752028">prev</a><span>|</span><a href="#36753353">next</a><span>|</span><label class="collapse" for="c-36752105">[-]</label><label class="expand" for="c-36752105">[3 more]</label></div><br/><div class="children"><div class="content">Ben Eater on YouTube has recreated an 8-bit computer on breadboards.<p><a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=dXdoim96v5A">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=dXdoim96v5A</a><p>That is the start of the videos where the control logic gets microcoded. Its pretty basic but over the next few videos he comes up with about 10 different OPCODES and programs their microcode (a series of control logic activations). Its pretty amazing to see it all come together and work in the end.</div><br/><div id="36752604" class="c"><input type="checkbox" id="c-36752604" checked=""/><div class="controls bullet"><span class="by">anyfoo</span><span>|</span><a href="#36751983">root</a><span>|</span><a href="#36752105">parent</a><span>|</span><a href="#36753353">next</a><span>|</span><label class="collapse" for="c-36752604">[-]</label><label class="expand" for="c-36752604">[2 more]</label></div><br/><div class="children"><div class="content">Yes, absolutely. Ben Eater’s series is fantastic.<p>If you want to learn about simple microcode and how a (non-superscalar, which matches the 8086) CPU generally works, this is a brilliant resource, and fun to watch.</div><br/><div id="36753298" class="c"><input type="checkbox" id="c-36753298" checked=""/><div class="controls bullet"><span class="by">pests</span><span>|</span><a href="#36751983">root</a><span>|</span><a href="#36752604">parent</a><span>|</span><a href="#36753353">next</a><span>|</span><label class="collapse" for="c-36753298">[-]</label><label class="expand" for="c-36753298">[1 more]</label></div><br/><div class="children"><div class="content">His entire channel is brilliant. I also love his homemade GPU. I forget sometimes just how fast CPUs are so watching him &#x27;race the beam&#x27; (not literally anymore, but HDMI has timings just the same) is fascinating.</div><br/></div></div></div></div></div></div><div id="36753353" class="c"><input type="checkbox" id="c-36753353" checked=""/><div class="controls bullet"><span class="by">pwg</span><span>|</span><a href="#36751983">parent</a><span>|</span><a href="#36752105">prev</a><span>|</span><a href="#36753059">next</a><span>|</span><label class="collapse" for="c-36753353">[-]</label><label class="expand" for="c-36753353">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Where can one learn more about microcode,<p>Provided you can find a copy, the book &quot;Computer Organization&quot;, 2nd ed, by V. Car Hamacher, Zvonko G. Vranesic and Safwat G. Zary, published by McGraw Hill, contains a very understandable chapter of microcode control.  Depending on your background, you may want to read some of the prior chapters first before starting on the microcode one, to get some foundational knowledge.<p>Do note that the 2nd ed was published in 1984, so finding a copy may be difficult.  I do not know how (or even if) the microcode control chapter was updated in subsequent editions.</div><br/><div id="36755635" class="c"><input type="checkbox" id="c-36755635" checked=""/><div class="controls bullet"><span class="by">peterfirefly</span><span>|</span><a href="#36751983">root</a><span>|</span><a href="#36753353">parent</a><span>|</span><a href="#36753059">next</a><span>|</span><label class="collapse" for="c-36755635">[-]</label><label class="expand" for="c-36755635">[1 more]</label></div><br/><div class="children"><div class="content">Amazon has some used copies.</div><br/></div></div></div></div></div></div><div id="36753059" class="c"><input type="checkbox" id="c-36753059" checked=""/><div class="controls bullet"><span class="by">oskarw85</span><span>|</span><a href="#36751983">prev</a><span>|</span><a href="#36753663">next</a><span>|</span><label class="collapse" for="c-36753059">[-]</label><label class="expand" for="c-36753059">[2 more]</label></div><br/><div class="children"><div class="content">On a side note - it would be also interesting how invalid instructions detection is implemented in later processors. It&#x27;s hard to imagine giant lookup table because that sounds like waste of resources.</div><br/><div id="36753359" class="c"><input type="checkbox" id="c-36753359" checked=""/><div class="controls bullet"><span class="by">userbinator</span><span>|</span><a href="#36753059">parent</a><span>|</span><a href="#36753663">next</a><span>|</span><label class="collapse" for="c-36753359">[-]</label><label class="expand" for="c-36753359">[1 more]</label></div><br/><div class="children"><div class="content">My guess is a giant NOR gate of all the other decoder outputs.</div><br/></div></div></div></div><div id="36753663" class="c"><input type="checkbox" id="c-36753663" checked=""/><div class="controls bullet"><span class="by">quotemstr</span><span>|</span><a href="#36753059">prev</a><span>|</span><a href="#36754979">next</a><span>|</span><label class="collapse" for="c-36753663">[-]</label><label class="expand" for="c-36753663">[2 more]</label></div><br/><div class="children"><div class="content">I can only imagine the nail-biting at Intel when repurposing the 8086&#x27;s undocumented but instruction aliases for new 80[123]86&#x27;s instructions. Intel had no way of knowing whether someone, somewhere, had written software using these aliases.</div><br/><div id="36755629" class="c"><input type="checkbox" id="c-36755629" checked=""/><div class="controls bullet"><span class="by">peterfirefly</span><span>|</span><a href="#36753663">parent</a><span>|</span><a href="#36754979">next</a><span>|</span><label class="collapse" for="c-36755629">[-]</label><label class="expand" for="c-36755629">[1 more]</label></div><br/><div class="children"><div class="content">My guess is that they didn&#x27;t care much when they made the 186&#x2F;286 because it wasn&#x27;t yet clear how big the PC would get -- and those chips did a lot to weed out bad programs (the once they didn&#x27;t use caused INT 6) so they felt perfectly safe when they made the 386.</div><br/></div></div></div></div><div id="36754979" class="c"><input type="checkbox" id="c-36754979" checked=""/><div class="controls bullet"><span class="by">darkclouds</span><span>|</span><a href="#36753663">prev</a><span>|</span><a href="#36752038">next</a><span>|</span><label class="collapse" for="c-36754979">[-]</label><label class="expand" for="c-36754979">[1 more]</label></div><br/><div class="children"><div class="content">Telephone exchanges in a tiny black box.</div><br/></div></div></div></div></div></div></div></body></html>