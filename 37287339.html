<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1693213263719" as="style"/><link rel="stylesheet" href="styles.css?v=1693213263719"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://runno.dev/articles/wasi-web-component">Running WASI binaries from your HTML using Web Components</a> <span class="domain">(<a href="https://runno.dev">runno.dev</a>)</span></div><div class="subtext"><span>benno128</span> | <span>36 comments</span></div><br/><div><div id="37289834" class="c"><input type="checkbox" id="c-37289834" checked=""/><div class="controls bullet"><span class="by">drawkbox</span><span>|</span><a href="#37288115">next</a><span>|</span><label class="collapse" for="c-37289834">[-]</label><label class="expand" for="c-37289834">[8 more]</label></div><br/><div class="children"><div class="content">Very slick and opens up so many possibilities.<p>WebAssembly, WASI, like WebRTC&#x2F;WebGPU&#x2F;WebXR&#x2F;WebAudio, just makes webdev, gamedev + native&#x2F;networking very very interesting in this phase of technology where js frameworks are culty bloated&#x2F;verbose and apps are the main thing for marketing&#x2F;tools. Web apps + tools are opening up with wasm&#x2F;wasi.<p>Runno (<a href="https:&#x2F;&#x2F;runno.dev&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;runno.dev&#x2F;</a> + <a href="https:&#x2F;&#x2F;runno.dev&#x2F;wasi" rel="nofollow noreferrer">https:&#x2F;&#x2F;runno.dev&#x2F;wasi</a>) is a great idea and helps make interesting native stuff in a sandbox locally. Running all this directly without having to mash into assembly is a great idea. Awesome job on this!<p>&gt; Runno helps you make runnable code examples that can be embedded in web pages. This is very handy for educational tools, it means:<p>&gt; - You can make code examples that don&#x27;t need users to install scary tools.<p>&gt; - No need to run a server, it all runs client-side in the browser.<p>&gt; - Your users can edit and re-run any code examples you make.<p>&gt; - The examples are extremely customisable with HTML, CSS and JavaScript!</div><br/><div id="37290667" class="c"><input type="checkbox" id="c-37290667" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#37289834">parent</a><span>|</span><a href="#37288115">next</a><span>|</span><label class="collapse" for="c-37290667">[-]</label><label class="expand" for="c-37290667">[7 more]</label></div><br/><div class="children"><div class="content">Yet I am still waiting to see a game with the same capabilities of Infinity Blade, that Apple used in 2011, as an example of a game showing of the newly acquired OpenGL ES 3.0 capabilities of iDevices.<p>Or the Unreal Engine 3.0 citadel demo, also in 2011, for Flash&#x2F;CrossBridge.<p>It seems the only thing usable is running ShaderToy demos, and 3D views on ecommerce sites.</div><br/><div id="37290820" class="c"><input type="checkbox" id="c-37290820" checked=""/><div class="controls bullet"><span class="by">parasti</span><span>|</span><a href="#37289834">root</a><span>|</span><a href="#37290667">parent</a><span>|</span><a href="#37288115">next</a><span>|</span><label class="collapse" for="c-37290820">[-]</label><label class="expand" for="c-37290820">[6 more]</label></div><br/><div class="children"><div class="content">That expectation is off by nearly a decade. WASM games in terms of performance are closer to 2000 than 2010. Here&#x27;s an open source indie game from 2003 that I ported to WASM [1]. It struggles to hit 60 FPS on devices that were released a good 15 years after the game itself. Browsers sometimes struggle to animate simple lines at 60 FPS still to this day, because they&#x27;re just hugely massive platforms with thousands of moving parts with no room for big, complex apps on top of them.<p>[1] <a href="https:&#x2F;&#x2F;neverball.github.io&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;neverball.github.io&#x2F;</a></div><br/><div id="37290987" class="c"><input type="checkbox" id="c-37290987" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#37289834">root</a><span>|</span><a href="#37290820">parent</a><span>|</span><a href="#37291117">next</a><span>|</span><label class="collapse" for="c-37290987">[-]</label><label class="expand" for="c-37290987">[2 more]</label></div><br/><div class="children"><div class="content">If we hadn&#x27;t lost a decade with what Flash and PNACL already offered us in 2011...<p>No wonder studios rather bet on streaming than a tech that will never deliver.</div><br/><div id="37291420" class="c"><input type="checkbox" id="c-37291420" checked=""/><div class="controls bullet"><span class="by">jdmichal</span><span>|</span><a href="#37289834">root</a><span>|</span><a href="#37290987">parent</a><span>|</span><a href="#37291117">next</a><span>|</span><label class="collapse" for="c-37291420">[-]</label><label class="expand" for="c-37291420">[1 more]</label></div><br/><div class="children"><div class="content">Let&#x27;s be clear what Flash was though.  It was a native binary that would paint to a region owned by the browser.  So yes, it was performant because basically the only thing it was doing differently than any other native application was how it was hosted by the browser.<p>That&#x27;s also why it was such a security nightmare.  It was a complete escape from the browser sandbox.</div><br/></div></div></div></div><div id="37291117" class="c"><input type="checkbox" id="c-37291117" checked=""/><div class="controls bullet"><span class="by">dgb23</span><span>|</span><a href="#37289834">root</a><span>|</span><a href="#37290820">parent</a><span>|</span><a href="#37290987">prev</a><span>|</span><a href="#37291055">next</a><span>|</span><label class="collapse" for="c-37291117">[-]</label><label class="expand" for="c-37291117">[1 more]</label></div><br/><div class="children"><div class="content">A browser also has the baked in expectation of you interacting with hypertext.<p>A video game of this caliber you are discussing is typically entitled to:<p>- have a dowload and installation process that might span over say 20min or more<p>- load slowly, because it needs to push a ton of assets through<p>- demand a ton of resources such CPU, GPU, threads, memory etc. to achieve amazing graphics and simulation<p>- being the primary foreground process or possibly the only one<p>None of these things apply to the typical web. Quite the contrary: most web devs would get fired or ridiculed if they demanded these resources.<p>So I assume that browsers optimize for the typical usage, which is hypertext.</div><br/></div></div><div id="37291055" class="c"><input type="checkbox" id="c-37291055" checked=""/><div class="controls bullet"><span class="by">speps</span><span>|</span><a href="#37289834">root</a><span>|</span><a href="#37290820">parent</a><span>|</span><a href="#37291117">prev</a><span>|</span><a href="#37288115">next</a><span>|</span><label class="collapse" for="c-37291055">[-]</label><label class="expand" for="c-37291055">[2 more]</label></div><br/><div class="children"><div class="content">I need to double check what you&#x27;re saying, how do you show the FPS in your WASM port?</div><br/><div id="37291231" class="c"><input type="checkbox" id="c-37291231" checked=""/><div class="controls bullet"><span class="by">parasti</span><span>|</span><a href="#37289834">root</a><span>|</span><a href="#37291055">parent</a><span>|</span><a href="#37288115">next</a><span>|</span><label class="collapse" for="c-37291231">[-]</label><label class="expand" for="c-37291231">[1 more]</label></div><br/><div class="children"><div class="content">Devtools or F9 while in game. Type a famous magic word in the title screen to access all levels. Not sure how to do this on a phone which is what I was referring to - but framedrops are pretty obvious.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="37288115" class="c"><input type="checkbox" id="c-37288115" checked=""/><div class="controls bullet"><span class="by">benno128</span><span>|</span><a href="#37289834">prev</a><span>|</span><a href="#37288513">next</a><span>|</span><label class="collapse" for="c-37288115">[-]</label><label class="expand" for="c-37288115">[13 more]</label></div><br/><div class="children"><div class="content">G’day, if anyone has any questions about this I’m happy to answer them here.</div><br/><div id="37288922" class="c"><input type="checkbox" id="c-37288922" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#37288115">parent</a><span>|</span><a href="#37288975">next</a><span>|</span><label class="collapse" for="c-37288922">[-]</label><label class="expand" for="c-37288922">[5 more]</label></div><br/><div class="children"><div class="content">I tried this in your Python example:<p><pre><code>    import sqlite3
    &gt;&gt;&gt; db = sqlite3.connect(&quot;data.db&quot;)
    Traceback (most recent call last):
      File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
    sqlite3.OperationalError: unable to open database file
</code></pre>
Presumably that operation failed because there isn&#x27;t a writable virtual filesystem. Would it be possible to provide one?</div><br/><div id="37288995" class="c"><input type="checkbox" id="c-37288995" checked=""/><div class="controls bullet"><span class="by">benno128</span><span>|</span><a href="#37288115">root</a><span>|</span><a href="#37288922">parent</a><span>|</span><a href="#37288975">next</a><span>|</span><label class="collapse" for="c-37288995">[-]</label><label class="expand" for="c-37288995">[4 more]</label></div><br/><div class="children"><div class="content">You just need to create the file first!<p><pre><code>    &gt;&gt;&gt; open(&quot;data.db&quot;, &quot;w+&quot;).close()
    &gt;&gt;&gt; db = sqlite3.connect(&quot;&#x2F;data.db&quot;)
    &gt;&gt;&gt; db
    &lt;sqlite3.Connection object at 0x8b3fd8&gt;</code></pre></div><br/><div id="37289241" class="c"><input type="checkbox" id="c-37289241" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#37288115">root</a><span>|</span><a href="#37288995">parent</a><span>|</span><a href="#37288975">next</a><span>|</span><label class="collapse" for="c-37289241">[-]</label><label class="expand" for="c-37289241">[3 more]</label></div><br/><div class="children"><div class="content">Oh cool!<p>Regular Python doesn&#x27;t need me to create the file first, I wonder why this works differently.</div><br/><div id="37289330" class="c"><input type="checkbox" id="c-37289330" checked=""/><div class="controls bullet"><span class="by">benno128</span><span>|</span><a href="#37288115">root</a><span>|</span><a href="#37289241">parent</a><span>|</span><a href="#37288975">next</a><span>|</span><label class="collapse" for="c-37289330">[-]</label><label class="expand" for="c-37289330">[2 more]</label></div><br/><div class="children"><div class="content">Might be this particular build of Python, or might be that I implemented one of the `fd` functions in a way Python&#x2F;SQlite is surprised by. I&#x27;ll have a look into it some time!</div><br/><div id="37290669" class="c"><input type="checkbox" id="c-37290669" checked=""/><div class="controls bullet"><span class="by">evacchi</span><span>|</span><a href="#37288115">root</a><span>|</span><a href="#37289330">parent</a><span>|</span><a href="#37288975">next</a><span>|</span><label class="collapse" for="c-37290669">[-]</label><label class="expand" for="c-37290669">[1 more]</label></div><br/><div class="children"><div class="content">Maybe just the missing leading slash in the original reproducer? :)</div><br/></div></div></div></div></div></div></div></div></div></div><div id="37288975" class="c"><input type="checkbox" id="c-37288975" checked=""/><div class="controls bullet"><span class="by">pseudosavant</span><span>|</span><a href="#37288115">parent</a><span>|</span><a href="#37288922">prev</a><span>|</span><a href="#37290935">next</a><span>|</span><label class="collapse" for="c-37288975">[-]</label><label class="expand" for="c-37288975">[3 more]</label></div><br/><div class="children"><div class="content">What a novel way to integrate a bunch of web technologies! It makes me much more interested in using WASM.</div><br/><div id="37289068" class="c"><input type="checkbox" id="c-37289068" checked=""/><div class="controls bullet"><span class="by">chii</span><span>|</span><a href="#37288115">root</a><span>|</span><a href="#37288975">parent</a><span>|</span><a href="#37289081">next</a><span>|</span><label class="collapse" for="c-37289068">[-]</label><label class="expand" for="c-37289068">[1 more]</label></div><br/><div class="children"><div class="content">I can imagine how a new style of web-only terminals be possible. The filesystem is realistically _any_ url, and you can load any wasi programs (via a shell, which is also just another wasi program).<p>I wonder if this is practical, or just a gimmicky way to use a computer...</div><br/></div></div><div id="37289081" class="c"><input type="checkbox" id="c-37289081" checked=""/><div class="controls bullet"><span class="by">benno128</span><span>|</span><a href="#37288115">root</a><span>|</span><a href="#37288975">parent</a><span>|</span><a href="#37289068">prev</a><span>|</span><a href="#37290935">next</a><span>|</span><label class="collapse" for="c-37289081">[-]</label><label class="expand" for="c-37289081">[1 more]</label></div><br/><div class="children"><div class="content">Thanks! Yeah WebAssembly has an exciting future ahead of it.</div><br/></div></div></div></div><div id="37290935" class="c"><input type="checkbox" id="c-37290935" checked=""/><div class="controls bullet"><span class="by">bantunes</span><span>|</span><a href="#37288115">parent</a><span>|</span><a href="#37288975">prev</a><span>|</span><a href="#37288295">next</a><span>|</span><label class="collapse" for="c-37290935">[-]</label><label class="expand" for="c-37290935">[2 more]</label></div><br/><div class="children"><div class="content">Would it be practical to output HTML from these WASI components and build a page from them?</div><br/><div id="37290972" class="c"><input type="checkbox" id="c-37290972" checked=""/><div class="controls bullet"><span class="by">benno128</span><span>|</span><a href="#37288115">root</a><span>|</span><a href="#37290935">parent</a><span>|</span><a href="#37288295">next</a><span>|</span><label class="collapse" for="c-37290972">[-]</label><label class="expand" for="c-37290972">[1 more]</label></div><br/><div class="children"><div class="content">I wouldn&#x27;t put it in prod, but it would be possible. You&#x27;d need a JS binding layer that dealt with the output and wrote it to the page, but it could be minimal.<p>There are other projects that are targeted more at this kind of thing if you want dynamic access to the DOM from Web Assembly (sorry I don&#x27;t know them off the top of my head).</div><br/></div></div></div></div><div id="37288295" class="c"><input type="checkbox" id="c-37288295" checked=""/><div class="controls bullet"><span class="by">jurynulifcation</span><span>|</span><a href="#37288115">parent</a><span>|</span><a href="#37290935">prev</a><span>|</span><a href="#37288513">next</a><span>|</span><label class="collapse" for="c-37288295">[-]</label><label class="expand" for="c-37288295">[2 more]</label></div><br/><div class="children"><div class="content">no questions, hope you&#x27;re having a good day, cool idea!</div><br/><div id="37288310" class="c"><input type="checkbox" id="c-37288310" checked=""/><div class="controls bullet"><span class="by">benno128</span><span>|</span><a href="#37288115">root</a><span>|</span><a href="#37288295">parent</a><span>|</span><a href="#37288513">next</a><span>|</span><label class="collapse" for="c-37288310">[-]</label><label class="expand" for="c-37288310">[1 more]</label></div><br/><div class="children"><div class="content">Haha thanks, you too!</div><br/></div></div></div></div></div></div><div id="37288513" class="c"><input type="checkbox" id="c-37288513" checked=""/><div class="controls bullet"><span class="by">xena</span><span>|</span><a href="#37288115">prev</a><span>|</span><a href="#37288574">next</a><span>|</span><label class="collapse" for="c-37288513">[-]</label><label class="expand" for="c-37288513">[2 more]</label></div><br/><div class="children"><div class="content">This is seriously awesome. I&#x27;m gonna use it in my blog. Stay tuned!</div><br/><div id="37289073" class="c"><input type="checkbox" id="c-37289073" checked=""/><div class="controls bullet"><span class="by">benno128</span><span>|</span><a href="#37288513">parent</a><span>|</span><a href="#37288574">next</a><span>|</span><label class="collapse" for="c-37289073">[-]</label><label class="expand" for="c-37289073">[1 more]</label></div><br/><div class="children"><div class="content">Looking forward to it!</div><br/></div></div></div></div><div id="37288574" class="c"><input type="checkbox" id="c-37288574" checked=""/><div class="controls bullet"><span class="by">appleflaxen</span><span>|</span><a href="#37288513">prev</a><span>|</span><a href="#37288396">next</a><span>|</span><label class="collapse" for="c-37288574">[-]</label><label class="expand" for="c-37288574">[4 more]</label></div><br/><div class="children"><div class="content">I get &quot;Runno crashed: ReferenceError: SharedArrayBuffer is not defined&quot; in every component.</div><br/><div id="37288654" class="c"><input type="checkbox" id="c-37288654" checked=""/><div class="controls bullet"><span class="by">benno128</span><span>|</span><a href="#37288574">parent</a><span>|</span><a href="#37289057">next</a><span>|</span><label class="collapse" for="c-37288654">[-]</label><label class="expand" for="c-37288654">[2 more]</label></div><br/><div class="children"><div class="content">Is this on the blog post, or are you trying it out yourself?<p>If it&#x27;s on the blog post, it sounds like your browser doesn&#x27;t support `SharedArrayBuffer` (<a href="https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;JavaScript&#x2F;Reference&#x2F;Global_Objects&#x2F;SharedArrayBuffer" rel="nofollow noreferrer">https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;JavaScript&#x2F;Refe...</a>) or you&#x27;ve disabled Cross Origin Isolation somehow. It might be because you have an old browser (there was a period where it was disabled) or you have disabled Cross Origin Isolation yourself (maybe a security setting?).</div><br/><div id="37289744" class="c"><input type="checkbox" id="c-37289744" checked=""/><div class="controls bullet"><span class="by">sureglymop</span><span>|</span><a href="#37288574">root</a><span>|</span><a href="#37288654">parent</a><span>|</span><a href="#37289057">next</a><span>|</span><label class="collapse" for="c-37289744">[-]</label><label class="expand" for="c-37289744">[1 more]</label></div><br/><div class="children"><div class="content">Same here - using mobile chromium on android.</div><br/></div></div></div></div><div id="37289057" class="c"><input type="checkbox" id="c-37289057" checked=""/><div class="controls bullet"><span class="by">kbumsik</span><span>|</span><a href="#37288574">parent</a><span>|</span><a href="#37288654">prev</a><span>|</span><a href="#37288396">next</a><span>|</span><label class="collapse" for="c-37289057">[-]</label><label class="expand" for="c-37289057">[1 more]</label></div><br/><div class="children"><div class="content">SharedArrayBuffer was affected by Spectre vuln and was disabled in some old browsers (or browser config).</div><br/></div></div></div></div><div id="37288396" class="c"><input type="checkbox" id="c-37288396" checked=""/><div class="controls bullet"><span class="by">n89nanda</span><span>|</span><a href="#37288574">prev</a><span>|</span><label class="collapse" for="c-37288396">[-]</label><label class="expand" for="c-37288396">[8 more]</label></div><br/><div class="children"><div class="content">website not loading for me</div><br/><div id="37288413" class="c"><input type="checkbox" id="c-37288413" checked=""/><div class="controls bullet"><span class="by">benno128</span><span>|</span><a href="#37288396">parent</a><span>|</span><a href="#37289061">next</a><span>|</span><label class="collapse" for="c-37288413">[-]</label><label class="expand" for="c-37288413">[4 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a bit temperamental on some browsers sorry (I&#x27;ve seen it fail on Arc). I implemented my own front-end router and I have done a bad job. I&#x27;ve seen it work today on Chrome, Firefox and Safari.</div><br/><div id="37288611" class="c"><input type="checkbox" id="c-37288611" checked=""/><div class="controls bullet"><span class="by">kamel3d</span><span>|</span><a href="#37288396">root</a><span>|</span><a href="#37288413">parent</a><span>|</span><a href="#37288427">next</a><span>|</span><label class="collapse" for="c-37288611">[-]</label><label class="expand" for="c-37288611">[1 more]</label></div><br/><div class="children"><div class="content">Not working on chrome here</div><br/></div></div><div id="37288427" class="c"><input type="checkbox" id="c-37288427" checked=""/><div class="controls bullet"><span class="by">n89nanda</span><span>|</span><a href="#37288396">root</a><span>|</span><a href="#37288413">parent</a><span>|</span><a href="#37288611">prev</a><span>|</span><a href="#37289061">next</a><span>|</span><label class="collapse" for="c-37288427">[-]</label><label class="expand" for="c-37288427">[2 more]</label></div><br/><div class="children"><div class="content">i tried chrome and safari as well, no luck</div><br/><div id="37288548" class="c"><input type="checkbox" id="c-37288548" checked=""/><div class="controls bullet"><span class="by">benno128</span><span>|</span><a href="#37288396">root</a><span>|</span><a href="#37288427">parent</a><span>|</span><a href="#37289061">next</a><span>|</span><label class="collapse" for="c-37288548">[-]</label><label class="expand" for="c-37288548">[1 more]</label></div><br/><div class="children"><div class="content">Sorry! Sometimes web is hard.</div><br/></div></div></div></div></div></div><div id="37289061" class="c"><input type="checkbox" id="c-37289061" checked=""/><div class="controls bullet"><span class="by">moderation</span><span>|</span><a href="#37288396">parent</a><span>|</span><a href="#37288413">prev</a><span>|</span><a href="#37288715">next</a><span>|</span><label class="collapse" for="c-37289061">[-]</label><label class="expand" for="c-37289061">[1 more]</label></div><br/><div class="children"><div class="content">Not loading with Firefox Nightly or Chrome Beta on Linux</div><br/></div></div><div id="37288715" class="c"><input type="checkbox" id="c-37288715" checked=""/><div class="controls bullet"><span class="by">ben-schaaf</span><span>|</span><a href="#37288396">parent</a><span>|</span><a href="#37289061">prev</a><span>|</span><label class="collapse" for="c-37288715">[-]</label><label class="expand" for="c-37288715">[2 more]</label></div><br/><div class="children"><div class="content">Seemed to load, but brought my phone to a crawl (Firefox Android).</div><br/><div id="37288782" class="c"><input type="checkbox" id="c-37288782" checked=""/><div class="controls bullet"><span class="by">benno128</span><span>|</span><a href="#37288396">root</a><span>|</span><a href="#37288715">parent</a><span>|</span><label class="collapse" for="c-37288782">[-]</label><label class="expand" for="c-37288782">[1 more]</label></div><br/><div class="children"><div class="content">Sorry! It is running ffmpeg in your browser on page load, which might not make it happy.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>