<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1725526862753" as="style"/><link rel="stylesheet" href="styles.css?v=1725526862753"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.trickster.dev/post/lesser-known-parts-of-python-standard-library/">Lesser known parts of Python standard library – Trickster Dev</a> <span class="domain">(<a href="https://www.trickster.dev">www.trickster.dev</a>)</span></div><div class="subtext"><span>rbanffy</span> | <span>25 comments</span></div><br/><div><div id="41454249" class="c"><input type="checkbox" id="c-41454249" checked=""/><div class="controls bullet"><span class="by">nick238</span><span>|</span><a href="#41453048">next</a><span>|</span><label class="collapse" for="c-41454249">[-]</label><label class="expand" for="c-41454249">[1 more]</label></div><br/><div class="children"><div class="content">The following are identical<p><pre><code>    fractions.Fraction(numerator=1, denominator=3)
    fractions.Fraction(1) &#x2F; 3
</code></pre>
ChainMap is maybe better described&#x2F;used as inheritance for dicts, where something like<p><pre><code>    settings = ChainMap(instance_settings, region_settings, global_settings)
</code></pre>
would give you one object to look in.</div><br/></div></div><div id="41453048" class="c"><input type="checkbox" id="c-41453048" checked=""/><div class="controls bullet"><span class="by">judicious</span><span>|</span><a href="#41454249">prev</a><span>|</span><a href="#41453011">next</a><span>|</span><label class="collapse" for="c-41453048">[-]</label><label class="expand" for="c-41453048">[17 more]</label></div><br/><div class="children"><div class="content">I find defaultdict, OrderedDict, namedtuple among other data structures&#x2F;classes in the collections module to be incredibly useful.<p>Another module that&#x27;s packaged with the stdlib that&#x27;s immensely useful is itertools. I especially find takewhile, cycle, and chain to be incredibly useful building blocks for list-related functions. I highly recommend a quick read.<p>EDIT: functools is also great! Fantastic module for higher-order functions on callable objects.<p><a href="https:&#x2F;&#x2F;docs.python.org&#x2F;3&#x2F;library&#x2F;itertools.html" rel="nofollow">https:&#x2F;&#x2F;docs.python.org&#x2F;3&#x2F;library&#x2F;itertools.html</a></div><br/><div id="41454241" class="c"><input type="checkbox" id="c-41454241" checked=""/><div class="controls bullet"><span class="by">BerislavLopac</span><span>|</span><a href="#41453048">parent</a><span>|</span><a href="#41453180">next</a><span>|</span><label class="collapse" for="c-41454241">[-]</label><label class="expand" for="c-41454241">[1 more]</label></div><br/><div class="children"><div class="content">ChainMap might be the most underrated bit in the standard library.</div><br/></div></div><div id="41453180" class="c"><input type="checkbox" id="c-41453180" checked=""/><div class="controls bullet"><span class="by">padthai</span><span>|</span><a href="#41453048">parent</a><span>|</span><a href="#41454241">prev</a><span>|</span><a href="#41453011">next</a><span>|</span><label class="collapse" for="c-41453180">[-]</label><label class="expand" for="c-41453180">[15 more]</label></div><br/><div class="children"><div class="content">Why do you use OrderedDict for now that regular dicts are ordered by default?</div><br/><div id="41454120" class="c"><input type="checkbox" id="c-41454120" checked=""/><div class="controls bullet"><span class="by">d0mine</span><span>|</span><a href="#41453048">root</a><span>|</span><a href="#41453180">parent</a><span>|</span><a href="#41453278">next</a><span>|</span><label class="collapse" for="c-41454120">[-]</label><label class="expand" for="c-41454120">[1 more]</label></div><br/><div class="children"><div class="content">It may be more explicit: OrderedDict has move_to_end()  which may be useful e.g., for implementing lru_cache-like functionality (like deque.rotate but with arbitrary keys).</div><br/></div></div><div id="41453278" class="c"><input type="checkbox" id="c-41453278" checked=""/><div class="controls bullet"><span class="by">heavyset_go</span><span>|</span><a href="#41453048">root</a><span>|</span><a href="#41453180">parent</a><span>|</span><a href="#41454120">prev</a><span>|</span><a href="#41453219">next</a><span>|</span><label class="collapse" for="c-41453278">[-]</label><label class="expand" for="c-41453278">[8 more]</label></div><br/><div class="children"><div class="content">OrderedDicts have some convenience methods and features that ordinary dicts don&#x27;t have.</div><br/><div id="41453349" class="c"><input type="checkbox" id="c-41453349" checked=""/><div class="controls bullet"><span class="by">rbanffy</span><span>|</span><a href="#41453048">root</a><span>|</span><a href="#41453278">parent</a><span>|</span><a href="#41453396">next</a><span>|</span><label class="collapse" for="c-41453349">[-]</label><label class="expand" for="c-41453349">[5 more]</label></div><br/><div class="children"><div class="content">Also, dicts can become unordered at any time in the future. Right now the OrderedDict implementation is a thin layer over dict, but there are no guarantees it’ll always be that.</div><br/><div id="41453451" class="c"><input type="checkbox" id="c-41453451" checked=""/><div class="controls bullet"><span class="by">3eb7988a1663</span><span>|</span><a href="#41453048">root</a><span>|</span><a href="#41453349">parent</a><span>|</span><a href="#41454660">next</a><span>|</span><label class="collapse" for="c-41453451">[-]</label><label class="expand" for="c-41453451">[1 more]</label></div><br/><div class="children"><div class="content">Not true as of 3.7[0]<p><pre><code>  the insertion-order preservation nature of dict objects has been declared to be an official part of the Python language spec.
</code></pre>
[0] <a href="https:&#x2F;&#x2F;docs.python.org&#x2F;3.7&#x2F;whatsnew&#x2F;3.7.html" rel="nofollow">https:&#x2F;&#x2F;docs.python.org&#x2F;3.7&#x2F;whatsnew&#x2F;3.7.html</a></div><br/></div></div><div id="41454660" class="c"><input type="checkbox" id="c-41454660" checked=""/><div class="controls bullet"><span class="by">SuchAnonMuchWow</span><span>|</span><a href="#41453048">root</a><span>|</span><a href="#41453349">parent</a><span>|</span><a href="#41453451">prev</a><span>|</span><a href="#41453386">next</a><span>|</span><label class="collapse" for="c-41454660">[-]</label><label class="expand" for="c-41454660">[1 more]</label></div><br/><div class="children"><div class="content">dict are ordered to keep argument order when using named arguments in function calling. So it would be a non-trivial breaking change to revert this now.<p>I would argue that OrderedDict have more chances to be depreciated than dict becoming unordered again, since there is now little value to keep OrderedDict around now (and the methods currently specific to UnorderedDict could be added to dict).</div><br/></div></div><div id="41453386" class="c"><input type="checkbox" id="c-41453386" checked=""/><div class="controls bullet"><span class="by">wodenokoto</span><span>|</span><a href="#41453048">root</a><span>|</span><a href="#41453349">parent</a><span>|</span><a href="#41454660">prev</a><span>|</span><a href="#41453390">next</a><span>|</span><label class="collapse" for="c-41453386">[-]</label><label class="expand" for="c-41453386">[1 more]</label></div><br/><div class="children"><div class="content">They can, but ordered dict can also become unordered in the future, should the steering committee decide.<p>But seriously: It’s no longer an implementation detail that dictionaries are ordered in Python. It’s a specification of how Python works.</div><br/></div></div><div id="41453390" class="c"><input type="checkbox" id="c-41453390" checked=""/><div class="controls bullet"><span class="by">judicious</span><span>|</span><a href="#41453048">root</a><span>|</span><a href="#41453349">parent</a><span>|</span><a href="#41453386">prev</a><span>|</span><a href="#41453396">next</a><span>|</span><label class="collapse" for="c-41453390">[-]</label><label class="expand" for="c-41453390">[1 more]</label></div><br/><div class="children"><div class="content">There in lies another reason why OrderedDicts are still useful even in 3.12</div><br/></div></div></div></div><div id="41453396" class="c"><input type="checkbox" id="c-41453396" checked=""/><div class="controls bullet"><span class="by">wodenokoto</span><span>|</span><a href="#41453048">root</a><span>|</span><a href="#41453278">parent</a><span>|</span><a href="#41453349">prev</a><span>|</span><a href="#41453219">next</a><span>|</span><label class="collapse" for="c-41453396">[-]</label><label class="expand" for="c-41453396">[2 more]</label></div><br/><div class="children"><div class="content">Do you have any examples?</div><br/><div id="41453862" class="c"><input type="checkbox" id="c-41453862" checked=""/><div class="controls bullet"><span class="by">heavyset_go</span><span>|</span><a href="#41453048">root</a><span>|</span><a href="#41453396">parent</a><span>|</span><a href="#41453219">next</a><span>|</span><label class="collapse" for="c-41453862">[-]</label><label class="expand" for="c-41453862">[1 more]</label></div><br/><div class="children"><div class="content">Check out the docs: <a href="https:&#x2F;&#x2F;docs.python.org&#x2F;3&#x2F;library&#x2F;collections.html#collections.OrderedDict" rel="nofollow">https:&#x2F;&#x2F;docs.python.org&#x2F;3&#x2F;library&#x2F;collections.html#collectio...</a></div><br/></div></div></div></div></div></div><div id="41453219" class="c"><input type="checkbox" id="c-41453219" checked=""/><div class="controls bullet"><span class="by">judicious</span><span>|</span><a href="#41453048">root</a><span>|</span><a href="#41453180">parent</a><span>|</span><a href="#41453278">prev</a><span>|</span><a href="#41453011">next</a><span>|</span><label class="collapse" for="c-41453219">[-]</label><label class="expand" for="c-41453219">[5 more]</label></div><br/><div class="children"><div class="content">I work with different versions of Python3 (and 2 unfortunately) and some code is still in 3.6, hence I used OrderedDicts.</div><br/><div id="41453484" class="c"><input type="checkbox" id="c-41453484" checked=""/><div class="controls bullet"><span class="by">mixmastamyk</span><span>|</span><a href="#41453048">root</a><span>|</span><a href="#41453219">parent</a><span>|</span><a href="#41453011">next</a><span>|</span><label class="collapse" for="c-41453484">[-]</label><label class="expand" for="c-41453484">[4 more]</label></div><br/><div class="children"><div class="content">3.6 was the first with the new ordered by default dicts, even though wasn&#x27;t specc&#x27;d until 3.7.</div><br/><div id="41453673" class="c"><input type="checkbox" id="c-41453673" checked=""/><div class="controls bullet"><span class="by">Izkata</span><span>|</span><a href="#41453048">root</a><span>|</span><a href="#41453484">parent</a><span>|</span><a href="#41453011">next</a><span>|</span><label class="collapse" for="c-41453673">[-]</label><label class="expand" for="c-41453673">[3 more]</label></div><br/><div class="children"><div class="content">It worked as an accidental implementation detail in CPython from some other optimization, but it wasn&#x27;t intentional at the time.  Because it wasn&#x27;t intentional and wasn&#x27;t part of the spec, that code could be incompatible with other interpreters like pypy or jython.</div><br/><div id="41453902" class="c"><input type="checkbox" id="c-41453902" checked=""/><div class="controls bullet"><span class="by">ericvsmith</span><span>|</span><a href="#41453048">root</a><span>|</span><a href="#41453673">parent</a><span>|</span><a href="#41453011">next</a><span>|</span><label class="collapse" for="c-41453902">[-]</label><label class="expand" for="c-41453902">[2 more]</label></div><br/><div class="children"><div class="content">See my comment and the linked email at <a href="https:&#x2F;&#x2F;github.com&#x2F;ericvsmith&#x2F;dataclasses?tab=readme-ov-file#compatibility">https:&#x2F;&#x2F;github.com&#x2F;ericvsmith&#x2F;dataclasses?tab=readme-ov-file...</a> for dataclasses and 3.6. I think it&#x27;s still true.</div><br/><div id="41454390" class="c"><input type="checkbox" id="c-41454390" checked=""/><div class="controls bullet"><span class="by">raymondh</span><span>|</span><a href="#41453048">root</a><span>|</span><a href="#41453902">parent</a><span>|</span><a href="#41453011">next</a><span>|</span><label class="collapse" for="c-41454390">[-]</label><label class="expand" for="c-41454390">[1 more]</label></div><br/><div class="children"><div class="content">The reason Guido didn&#x27;t want 3.6 to guarantee dict ordering was to protect 3.5 projects from mysteriously failing when using code that implicitly relied on 3.6 behaviors (for example, cutting and pasting a snippet from StackOverflow).<p>He thought that one cycle of &quot;no ordering assumptions&quot; would give a smoother transition.  All 3.6 implementations would have dict ordering, but it was safer to not have people rely on it right away.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="41453011" class="c"><input type="checkbox" id="c-41453011" checked=""/><div class="controls bullet"><span class="by">brianyu8</span><span>|</span><a href="#41453048">prev</a><span>|</span><a href="#41454264">next</a><span>|</span><label class="collapse" for="c-41453011">[-]</label><label class="expand" for="c-41453011">[1 more]</label></div><br/><div class="children"><div class="content">If you liked this blog post, I can’t recommend PyMOTW[0] highly enough. It’s my goto for a concise introduction whenever I need to pick up a new Python stdlib module.<p>[0]: <a href="https:&#x2F;&#x2F;pymotw.com&#x2F;3&#x2F;" rel="nofollow">https:&#x2F;&#x2F;pymotw.com&#x2F;3&#x2F;</a></div><br/></div></div><div id="41454264" class="c"><input type="checkbox" id="c-41454264" checked=""/><div class="controls bullet"><span class="by">openrisk</span><span>|</span><a href="#41453011">prev</a><span>|</span><a href="#41454189">next</a><span>|</span><label class="collapse" for="c-41454264">[-]</label><label class="expand" for="c-41454264">[1 more]</label></div><br/><div class="children"><div class="content">Some modules are essential additions while others are handy so as not to have to manage dependencies.<p>Good example of the latter use case is the statistics module.<p>There is a price to pay though: its performance is 10x slower than numpy. So its mostly useful when the required calculation is not a bottleneck.<p>The benefit is you are good to go (batteries included) without any virtual environmemts, pip&#x27;s etc.</div><br/></div></div><div id="41454189" class="c"><input type="checkbox" id="c-41454189" checked=""/><div class="controls bullet"><span class="by">Uptrenda</span><span>|</span><a href="#41454264">prev</a><span>|</span><a href="#41453669">next</a><span>|</span><label class="collapse" for="c-41454189">[-]</label><label class="expand" for="c-41454189">[1 more]</label></div><br/><div class="children"><div class="content">Throwing frozensets out, too. If regular sets aren&#x27;t obscure enough, frozensets might be your thing. It looks like a set, it acts like a set, but its... hashable (for indexing) and (immutable.) Why use this? For algorithms that rely on combinations (not permutations), frozensets can be very useful. E.g. NOT this -- (0, 1) (1, 0) (both distinct using tuples) vs frozenset([0, 1]) ([1, 0] or [0, 1] have the same identity &#x2F; frozenset.) You can use this for indexing algorithms and things like that. Sometimes, sets are very convenient because they naturally &#x27;normalise&#x27; entries into a fixed order. This can simply a lot of code.</div><br/></div></div><div id="41453669" class="c"><input type="checkbox" id="c-41453669" checked=""/><div class="controls bullet"><span class="by">joshdavham</span><span>|</span><a href="#41454189">prev</a><span>|</span><label class="collapse" for="c-41453669">[-]</label><label class="expand" for="c-41453669">[3 more]</label></div><br/><div class="children"><div class="content">I did not know about that webbrowser module. This will definitely come in handy for sure!</div><br/><div id="41454367" class="c"><input type="checkbox" id="c-41454367" checked=""/><div class="controls bullet"><span class="by">fuzztester</span><span>|</span><a href="#41453669">parent</a><span>|</span><label class="collapse" for="c-41454367">[-]</label><label class="expand" for="c-41454367">[2 more]</label></div><br/><div class="children"><div class="content">Try:<p><pre><code>  import antigravity
</code></pre>
and<p><pre><code>  import braces 
</code></pre>
separately.</div><br/><div id="41454849" class="c"><input type="checkbox" id="c-41454849" checked=""/><div class="controls bullet"><span class="by">adm_</span><span>|</span><a href="#41453669">root</a><span>|</span><a href="#41454367">parent</a><span>|</span><label class="collapse" for="c-41454849">[-]</label><label class="expand" for="c-41454849">[1 more]</label></div><br/><div class="children"><div class="content">Actually it is<p>from __future__ import braces</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>