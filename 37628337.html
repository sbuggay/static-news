<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1695546059968" as="style"/><link rel="stylesheet" href="styles.css?v=1695546059968"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://media.defcon.org/DEF%20CON%2031/DEF%20CON%2031%20presentations/byt3bl33d3r%20-%20SpamChannel%20Spoofing%20Emails%20From%202%20Million%20Domains%20and%20Virtually%20Becoming%20Satan.pdf">SpamChannel: Spoofing emails from 2M domains and virtually becoming Satan [pdf]</a> <span class="domain">(<a href="https://media.defcon.org">media.defcon.org</a>)</span></div><div class="subtext"><span>mfru</span> | <span>64 comments</span></div><br/><div><div id="37628932" class="c"><input type="checkbox" id="c-37628932" checked=""/><div class="controls bullet"><span class="by">crtasm</span><span>|</span><a href="#37629233">next</a><span>|</span><label class="collapse" for="c-37628932">[-]</label><label class="expand" for="c-37628932">[2 more]</label></div><br/><div class="children"><div class="content">Video of the talk: <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=NwnT15q_PS8">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=NwnT15q_PS8</a><p>or here (video format didn&#x27;t work in firefox for me but VLC plays it): <a href="https:&#x2F;&#x2F;media.defcon.org&#x2F;DEF%20CON%2031&#x2F;DEF%20CON%2031%20video%20and%20slides&#x2F;DEF%20CON%2031%20-%20SpamChannel%20-%20Spoofing%20Emails%20From%202%20Million%20Domains%20and%20Virtually%20Becoming%20Satan%20-%20byt3bl33d3r.mp4" rel="nofollow noreferrer">https:&#x2F;&#x2F;media.defcon.org&#x2F;DEF%20CON%2031&#x2F;DEF%20CON%2031%20vid...</a></div><br/><div id="37629673" class="c"><input type="checkbox" id="c-37629673" checked=""/><div class="controls bullet"><span class="by">Brybry</span><span>|</span><a href="#37628932">parent</a><span>|</span><a href="#37629233">next</a><span>|</span><label class="collapse" for="c-37629673">[-]</label><label class="expand" for="c-37629673">[1 more]</label></div><br/><div class="children"><div class="content">I think these might be the demos that were unable to play during the talk:<p><a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=61PIOBp30vA">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=61PIOBp30vA</a><p><a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=eODw4t4WaCw">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=eODw4t4WaCw</a></div><br/></div></div></div></div><div id="37629233" class="c"><input type="checkbox" id="c-37629233" checked=""/><div class="controls bullet"><span class="by">promiseofbeans</span><span>|</span><a href="#37628932">prev</a><span>|</span><a href="#37629217">next</a><span>|</span><label class="collapse" for="c-37629233">[-]</label><label class="expand" for="c-37629233">[12 more]</label></div><br/><div class="children"><div class="content">We use cloudflare workers + mailchannels in production. Yikes.<p>We were already sorking on migrating away from cf workers to real servers, and now also we&#x27;ll also have to move away from mailchannels I guess.<p>Security risks aren&#x27;t worth the convenience.</div><br/><div id="37629407" class="c"><input type="checkbox" id="c-37629407" checked=""/><div class="controls bullet"><span class="by">ttul</span><span>|</span><a href="#37629233">parent</a><span>|</span><a href="#37629217">next</a><span>|</span><label class="collapse" for="c-37629407">[-]</label><label class="expand" for="c-37629407">[11 more]</label></div><br/><div class="children"><div class="content">Note that since June 2023, it is impossible to send email from Workers through MailChannels unless you publish a _mailchannels record in your DNS.</div><br/><div id="37630307" class="c"><input type="checkbox" id="c-37630307" checked=""/><div class="controls bullet"><span class="by">Thorrez</span><span>|</span><a href="#37629233">root</a><span>|</span><a href="#37629407">parent</a><span>|</span><a href="#37629428">next</a><span>|</span><label class="collapse" for="c-37630307">[-]</label><label class="expand" for="c-37630307">[3 more]</label></div><br/><div class="children"><div class="content">Source? The talk slides seem to contradict that:<p>&gt;● CF workers will be required to set their “Domain Lockdown” record in order to send emails after a specific cutoff date (TBA). You’re still able to spoof all the things until then!</div><br/><div id="37630319" class="c"><input type="checkbox" id="c-37630319" checked=""/><div class="controls bullet"><span class="by">ttul</span><span>|</span><a href="#37629233">root</a><span>|</span><a href="#37630307">parent</a><span>|</span><a href="#37630334">next</a><span>|</span><label class="collapse" for="c-37630319">[-]</label><label class="expand" for="c-37630319">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;community.cloudflare.com&#x2F;t&#x2F;this-week-mailchannels-will-enforce-domain-lockdown-on-legacy-workers-users&#x2F;544874" rel="nofollow noreferrer">https:&#x2F;&#x2F;community.cloudflare.com&#x2F;t&#x2F;this-week-mailchannels-wi...</a></div><br/></div></div><div id="37630334" class="c"><input type="checkbox" id="c-37630334" checked=""/><div class="controls bullet"><span class="by">weird-eye-issue</span><span>|</span><a href="#37629233">root</a><span>|</span><a href="#37630307">parent</a><span>|</span><a href="#37630319">prev</a><span>|</span><a href="#37629428">next</a><span>|</span><label class="collapse" for="c-37630334">[-]</label><label class="expand" for="c-37630334">[1 more]</label></div><br/><div class="children"><div class="content">These slides are outdated</div><br/></div></div></div></div><div id="37629428" class="c"><input type="checkbox" id="c-37629428" checked=""/><div class="controls bullet"><span class="by">inetknght</span><span>|</span><a href="#37629233">root</a><span>|</span><a href="#37629407">parent</a><span>|</span><a href="#37630307">prev</a><span>|</span><a href="#37629217">next</a><span>|</span><label class="collapse" for="c-37629428">[-]</label><label class="expand" for="c-37629428">[7 more]</label></div><br/><div class="children"><div class="content">Ahh yes, another &quot;standard&quot;. <a href="https:&#x2F;&#x2F;xkcd.com&#x2F;927&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;xkcd.com&#x2F;927&#x2F;</a></div><br/><div id="37629464" class="c"><input type="checkbox" id="c-37629464" checked=""/><div class="controls bullet"><span class="by">ttul</span><span>|</span><a href="#37629233">root</a><span>|</span><a href="#37629428">parent</a><span>|</span><a href="#37630222">next</a><span>|</span><label class="collapse" for="c-37629464">[-]</label><label class="expand" for="c-37629464">[4 more]</label></div><br/><div class="children"><div class="content">Absolutely. For reference, here is a TXT lookup for a random large corporation:<p>% host -t txt bosch.com
bosch.com descriptive text &quot;b5r8gr465ydgqlvwlwy6x7dshccwg37c&quot;
bosch.com descriptive text &quot;mindmanager-verification=5eacd59de90dd7d9933da220294f2906a881fa6701d64a1a4667c05abac12546&quot;
bosch.com descriptive text &quot;cisco-ci-domain-verification=20e8d94f041a742a6de560a038d031baf659330970e6f05bb03fb2468bba379a&quot;
bosch.com descriptive text &quot;v=spf1 mx redirect=_spf.bosch.de&quot;
bosch.com descriptive text &quot;r7bNBcUhS&#x2F;tsO45+nP1dycu5UDrZ7TniKe858vhLNJwAcCNDQlpdaks8iBm3TxV9r3fCYRvup&#x2F;QpaC1rdp4Dpg==&quot;
bosch.com descriptive text &quot;google-site-verification=avGZ684w6lq0UwXmOHxz9l6u9GL8r-sXoV7io9KzZOc&quot;
bosch.com descriptive text &quot;facebook-domain-verification=20380cm6fdq6h7tdcqzmhysa70ctdo&quot;
bosch.com descriptive text &quot;google-site-verification=jWBLaKM6WZQoAV6crbGGsAre3rSvqaDtwnCKuwvDPCg&quot;
bosch.com descriptive text &quot;adobe-idp-site-verification=e13fd7b27a30ca44261bc7ad3f0b2e0994b724830fe8afc38a6565a40d81bde4&quot;
bosch.com descriptive text &quot;google-site-verification=yeXu97OTorw4QioF3yNiDvTn-0GL8__7-iTNLEp6Vbk&quot;
bosch.com descriptive text &quot;docusign=4f8c3289-c1e1-42a5-a541-f3459d2da55e&quot;
bosch.com descriptive text &quot;docusign=95ecd2d2-2737-4b07-9d40-95d065bfbc49&quot;
bosch.com descriptive text &quot;atlassian-domain-verification=1XOeeaiW02aX&#x2F;CXX&#x2F;725tFzKFh4PA18JpZoyq9qBDqDxR2PP&#x2F;9LDxCqlmYYgyb4D&quot;
bosch.com descriptive text &quot;77D8-D4C6-1CCC-8D85-3127-5140-11D2-956B&quot;
bosch.com descriptive text &quot;axway-amplify=af03bdb0-d4a8-429f-bf96-b7ba41051d49&quot;
bosch.com descriptive text &quot;apple-domain-verification=VYw9jmavDBjP0C9S&quot;
bosch.com descriptive text &quot;mongodb-site-verification=gf5347Wa7YvVkq4C51l3srxrco2GLGPl&quot;
bosch.com descriptive text &quot;docusign=ebea8618-97e6-4a64-82a9-2e3fa036d5bb&quot;
bosch.com descriptive text &quot;docusign=df164c89-5239-42d4-97f5-8f5710b1b929&quot;
bosch.com descriptive text &quot;miro-verification=95bb46ca27717c388e091411d7fe643e3a3d2b3d&quot;
bosch.com descriptive text &quot;docker-verification=224577a6-972f-4e1d-a8b9-c5fc2e8da018&quot;
bosch.com descriptive text &quot;klaviyo-site-verification=THKvhQ&quot;
bosch.com descriptive text &quot;atlassian-sending-domain-verification=e4597f31-7a29-47fd-b150-5e1eaeac437b&quot;
bosch.com descriptive text &quot;sFHU8FVI0Jt2PIXJAn2DWGmT7UJmZJzyq2THJmabTvEcw0IGtPu2UHU9Wf&#x2F;zdvZoGAvtmO5tD3rOSvXjQWZ57Q==&quot;</div><br/><div id="37629538" class="c"><input type="checkbox" id="c-37629538" checked=""/><div class="controls bullet"><span class="by">lucb1e</span><span>|</span><a href="#37629233">root</a><span>|</span><a href="#37629464">parent</a><span>|</span><a href="#37629997">next</a><span>|</span><label class="collapse" for="c-37629538">[-]</label><label class="expand" for="c-37629538">[1 more]</label></div><br/><div class="children"><div class="content">Indent with four spaces to render as preformatted text which preserves newlines... I also removed the redundant info from each line and sorted alphabetically while I was at it<p>TXT records for bosch.com:<p><pre><code>    77D8-D4C6-1CCC-8D85-3127-5140-11D2-956B
    adobe-idp-site-verification=e13fd7b27a30ca44261bc7ad3f0b2e0994b724830fe8afc38a6565a40d81bde4
    apple-domain-verification=VYw9jmavDBjP0C9S
    atlassian-domain-verification=1XOeeaiW02aX&#x2F;CXX&#x2F;725tFzKFh4PA18JpZoyq9qBDqDxR2PP&#x2F;9LDxCqlmYYgyb4D
    atlassian-sending-domain-verification=e4597f31-7a29-47fd-b150-5e1eaeac437b
    axway-amplify=af03bdb0-d4a8-429f-bf96-b7ba41051d49
    b5r8gr465ydgqlvwlwy6x7dshccwg37c
    cisco-ci-domain-verification=20e8d94f041a742a6de560a038d031baf659330970e6f05bb03fb2468bba379a
    docker-verification=224577a6-972f-4e1d-a8b9-c5fc2e8da018
    docusign=4f8c3289-c1e1-42a5-a541-f3459d2da55e
    docusign=95ecd2d2-2737-4b07-9d40-95d065bfbc49
    docusign=df164c89-5239-42d4-97f5-8f5710b1b929
    docusign=ebea8618-97e6-4a64-82a9-2e3fa036d5bb
    facebook-domain-verification=20380cm6fdq6h7tdcqzmhysa70ctdo
    google-site-verification=avGZ684w6lq0UwXmOHxz9l6u9GL8r-sXoV7io9KzZOc
    google-site-verification=jWBLaKM6WZQoAV6crbGGsAre3rSvqaDtwnCKuwvDPCg
    google-site-verification=yeXu97OTorw4QioF3yNiDvTn-0GL8__7-iTNLEp6Vbk
    klaviyo-site-verification=THKvhQ
    mindmanager-verification=5eacd59de90dd7d9933da220294f2906a881fa6701d64a1a4667c05abac12546
    miro-verification=95bb46ca27717c388e091411d7fe643e3a3d2b3d
    mongodb-site-verification=gf5347Wa7YvVkq4C51l3srxrco2GLGPl
    r7bNBcUhS&#x2F;tsO45+nP1dycu5UDrZ7TniKe858vhLNJwAcCNDQlpdaks8iBm3TxV9r3fCYRvup&#x2F;QpaC1rdp4Dpg==
    sFHU8FVI0Jt2PIXJAn2DWGmT7UJmZJzyq2THJmabTvEcw0IGtPu2UHU9Wf&#x2F;zdvZoGAvtmO5tD3rOSvXjQWZ57Q==
    v=spf1 mx redirect=_spf.bosch.de</code></pre></div><br/></div></div><div id="37629997" class="c"><input type="checkbox" id="c-37629997" checked=""/><div class="controls bullet"><span class="by">technion</span><span>|</span><a href="#37629233">root</a><span>|</span><a href="#37629464">parent</a><span>|</span><a href="#37629538">prev</a><span>|</span><a href="#37630222">next</a><span>|</span><label class="collapse" for="c-37629997">[-]</label><label class="expand" for="c-37629997">[2 more]</label></div><br/><div class="children"><div class="content">I cannot believe how absurd and out of hand this has gotten.<p>Why did we not all standardise on some _well_known. subdomain or similar for these dozens of records?<p>The part that gives me an eye twitch is so many domains have multiple verifications for the same group, your own example has Google three times for example. The reason being one marketing company sets up Analytics. A few months later, a different company expects to be authorised to run another set, but all the admins get told is &quot;you have to add this record&quot;.</div><br/><div id="37630595" class="c"><input type="checkbox" id="c-37630595" checked=""/><div class="controls bullet"><span class="by">lathiat</span><span>|</span><a href="#37629233">root</a><span>|</span><a href="#37629997">parent</a><span>|</span><a href="#37630222">next</a><span>|</span><label class="collapse" for="c-37630595">[-]</label><label class="expand" for="c-37630595">[1 more]</label></div><br/><div class="children"><div class="content">They also generally don&#x27;t need to stay there it&#x27;s usually one-shot (at least the ones I&#x27;ve seen) but no one bothers to delete them.</div><br/></div></div></div></div></div></div><div id="37630222" class="c"><input type="checkbox" id="c-37630222" checked=""/><div class="controls bullet"><span class="by">weird-eye-issue</span><span>|</span><a href="#37629233">root</a><span>|</span><a href="#37629428">parent</a><span>|</span><a href="#37629464">prev</a><span>|</span><a href="#37629217">next</a><span>|</span><label class="collapse" for="c-37630222">[-]</label><label class="expand" for="c-37630222">[2 more]</label></div><br/><div class="children"><div class="content">What would you have used?</div><br/><div id="37631315" class="c"><input type="checkbox" id="c-37631315" checked=""/><div class="controls bullet"><span class="by">inetknght</span><span>|</span><a href="#37629233">root</a><span>|</span><a href="#37630222">parent</a><span>|</span><a href="#37629217">next</a><span>|</span><label class="collapse" for="c-37631315">[-]</label><label class="expand" for="c-37631315">[1 more]</label></div><br/><div class="children"><div class="content">I would have implemented DKIM and SPF.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="37629217" class="c"><input type="checkbox" id="c-37629217" checked=""/><div class="controls bullet"><span class="by">teddyh</span><span>|</span><a href="#37629233">prev</a><span>|</span><a href="#37631218">next</a><span>|</span><label class="collapse" for="c-37629217">[-]</label><label class="expand" for="c-37629217">[8 more]</label></div><br/><div class="children"><div class="content">&gt; <i>Display a banner on any email that doesn’t have a DKIM
signature but comes from a domain that’s implemented DKIM
(I’ve never seen this, I’m assuming possible?)</i><p>IIUC, it’s mostly <i>not</i> possible, because there is no sure way to know if a domain has “implemented DKIM”.<p>You can, in theory, do a DNS query for “_domainkey.example.com” and see if you get NXDOMAIN or NOERROR; the latter usually¹ means that there are subdomains present, which in turn would imply that there are some DKIM keys present in DNS (although you can’t know what the selector names are).  But you don’t know if these keys are active, or if they are meant to be activated later.  Or there might be multiple authenticated senders for a domain name, and some might use DKIM signing, but others might not.<p>1. Not all DNS servers obey the standards correctly, so the NXDOMAIN&#x2F;NOERROR distinction only <i>mostly</i> works.</div><br/><div id="37629346" class="c"><input type="checkbox" id="c-37629346" checked=""/><div class="controls bullet"><span class="by">mike_d</span><span>|</span><a href="#37629217">parent</a><span>|</span><a href="#37631218">next</a><span>|</span><label class="collapse" for="c-37629346">[-]</label><label class="expand" for="c-37629346">[7 more]</label></div><br/><div class="children"><div class="content">It is possible for  providers who see a statically significant potion of mail traffic to see all or almost all DKIM selectors.<p>I think what the line you quote is trying to say is reject mail from MailChannels that isn&#x27;t DKIM signed.</div><br/><div id="37629410" class="c"><input type="checkbox" id="c-37629410" checked=""/><div class="controls bullet"><span class="by">teddyh</span><span>|</span><a href="#37629217">root</a><span>|</span><a href="#37629346">parent</a><span>|</span><a href="#37631218">next</a><span>|</span><label class="collapse" for="c-37629410">[-]</label><label class="expand" for="c-37629410">[6 more]</label></div><br/><div class="children"><div class="content">&gt; <i>It is possible for providers who see a statically significant potion of mail traffic to see all or almost all DKIM selectors.</i><p>Yes, but you can’t know that <i>every</i> authenticated sender is using DKIM at all.  If the mail you just recieved from a new sender (even if it is from a domain which you have recieved DKIM signed mail from before) passes SPF but is not signed using DKIM, they are quite probably from a valid, albeit rarely used, mail sender who simply does not use DKIM.<p>&gt; <i>I think what the line you quote is trying to say is reject mail from MailChannels that isn&#x27;t DKIM signed.</i><p>No, they can’t be saying that, since elsewhere they say that only <i>105</i> out of <i>2 million</i> MailChannel domains are using DKIM.  Therefore, they can’t be reasonably suggesting to block all mail from all but 105 of these domains.</div><br/><div id="37629460" class="c"><input type="checkbox" id="c-37629460" checked=""/><div class="controls bullet"><span class="by">ttul</span><span>|</span><a href="#37629217">root</a><span>|</span><a href="#37629410">parent</a><span>|</span><a href="#37631218">next</a><span>|</span><label class="collapse" for="c-37629460">[-]</label><label class="expand" for="c-37629460">[5 more]</label></div><br/><div class="children"><div class="content">You&#x27;re pointing out the inherent challenge of domain authentication. Large domain owners like Google lock their domains down by publishing restrictive SPF records that do not authorize anyone other than their own IP space. For everyone else, SPF is a gigantic hole that you can drive a truck through.<p>For this and other reasons, people who actually work in the email industry do not trust SPF when authenticating domains. An SPF pass is necessary but not sufficient to know that someone is responsible for the email you just received. A far more trustworthy element is a valid DKIM signature; this certifies that the domain owner signed the message contents with a key they presumably control themselves.</div><br/><div id="37629515" class="c"><input type="checkbox" id="c-37629515" checked=""/><div class="controls bullet"><span class="by">teddyh</span><span>|</span><a href="#37629217">root</a><span>|</span><a href="#37629460">parent</a><span>|</span><a href="#37631218">next</a><span>|</span><label class="collapse" for="c-37629515">[-]</label><label class="expand" for="c-37629515">[4 more]</label></div><br/><div class="children"><div class="content">The logical way to fix this seems to me to be for DMARC to implement some way for the domain to not just require SPF <i>or</i> DKIM, but explicitly require DKIM specifically.<p>This is how other similar things have solved similar problems, like DANE, CAA DNS records, and HSTS headers in HTTP.  CAA records, in particular, long had a similar problem which was only solved with RFC 8657; discussion here: &lt;<a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=34035148">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=34035148</a>&gt;</div><br/><div id="37629582" class="c"><input type="checkbox" id="c-37629582" checked=""/><div class="controls bullet"><span class="by">InvaderFizz</span><span>|</span><a href="#37629217">root</a><span>|</span><a href="#37629515">parent</a><span>|</span><a href="#37629611">prev</a><span>|</span><a href="#37631218">next</a><span>|</span><label class="collapse" for="c-37629582">[-]</label><label class="expand" for="c-37629582">[2 more]</label></div><br/><div class="children"><div class="content">I thought it already was required and if you specify adkim in your record.</div><br/><div id="37629664" class="c"><input type="checkbox" id="c-37629664" checked=""/><div class="controls bullet"><span class="by">teddyh</span><span>|</span><a href="#37629217">root</a><span>|</span><a href="#37629582">parent</a><span>|</span><a href="#37631218">next</a><span>|</span><label class="collapse" for="c-37629664">[-]</label><label class="expand" for="c-37629664">[1 more]</label></div><br/><div class="children"><div class="content">No, my understanding is that the “adkim” tag in DMARC only affects how strictly the DKIM check is done, but <i>not</i> whether a DKIM signature is actually required.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="37631218" class="c"><input type="checkbox" id="c-37631218" checked=""/><div class="controls bullet"><span class="by">kijin</span><span>|</span><a href="#37629217">prev</a><span>|</span><a href="#37629268">next</a><span>|</span><label class="collapse" for="c-37631218">[-]</label><label class="expand" for="c-37631218">[1 more]</label></div><br/><div class="children"><div class="content">&gt; <i>MailChannels main customers are web hosting providers who don’t
own the domains they send emails from!</i><p>That&#x27;s the lamest excuse I&#x27;ve heard in a while.<p>Web hosting providers generally don&#x27;t &quot;own&quot; the domains they host, but they absolutely know which domains they host. Routing domains to customer accounts&#x2F;directories is the whole point of web hosting!<p>All they need is some sort of cPanel integration to report the list of domains and tie each domain to a randomly generated key. All of this can (and should) be automated without bothering the end users in any way.</div><br/></div></div><div id="37629268" class="c"><input type="checkbox" id="c-37629268" checked=""/><div class="controls bullet"><span class="by">mc10</span><span>|</span><a href="#37631218">prev</a><span>|</span><a href="#37630617">next</a><span>|</span><label class="collapse" for="c-37629268">[-]</label><label class="expand" for="c-37629268">[2 more]</label></div><br/><div class="children"><div class="content">I wish there was some way to evolve the DMARC spec such that only DKIM and not SPF is used for validation. Sadly things like Google Calendar invites still fail DKIM…</div><br/><div id="37629426" class="c"><input type="checkbox" id="c-37629426" checked=""/><div class="controls bullet"><span class="by">ttul</span><span>|</span><a href="#37629268">parent</a><span>|</span><a href="#37630617">next</a><span>|</span><label class="collapse" for="c-37629426">[-]</label><label class="expand" for="c-37629426">[1 more]</label></div><br/><div class="children"><div class="content">The next release of DMARC will likely include an option to exclude SPF from DMARC verification. Google&#x27;s team is pushing for this on the IETF DMARC mailing list:<p><a href="https:&#x2F;&#x2F;mailarchive.ietf.org&#x2F;arch&#x2F;msg&#x2F;dmarc&#x2F;PDktxOYkB28k6ukLDgDqlp6NEGw&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;mailarchive.ietf.org&#x2F;arch&#x2F;msg&#x2F;dmarc&#x2F;PDktxOYkB28k6ukL...</a><p>We think this is a very good idea as it will allow domain owners to use DMARC but specify that they prefer DKIM to be the only mechanism that truly authenticates traffic as their own.<p>The industry has many workarounds for the weaknesses of SPF and DMARC, such as using SPF macros to dynamically shape authentication based on criteria one only knows at the time of SPF resolution, but none of these workarounds is better than just saying, &quot;DKIM only for my domain, please.&quot;</div><br/></div></div></div></div><div id="37630617" class="c"><input type="checkbox" id="c-37630617" checked=""/><div class="controls bullet"><span class="by">azca</span><span>|</span><a href="#37629268">prev</a><span>|</span><a href="#37629922">next</a><span>|</span><label class="collapse" for="c-37630617">[-]</label><label class="expand" for="c-37630617">[1 more]</label></div><br/><div class="children"><div class="content">Ken is a good friend in the industry and always has the best interest of email security at heart. This may have been an architectural oversight but they are not wrong that SPF is surely a cause for concern, as is misconfigured DNS based trust and recertifications via arc (which was supposed to solve a problem for forwarding scenarios).<p>The centralization of email services to a handful of providers basically has led to multihoming of millions of domains that open SPF auth to the same handful. Any integrations by them or changes to existing stack can cause issues to pop up, because delegation of sending rights isn&#x27;t strictly auth controlled. The same also happens with dkim delegation to saas providers who share backend keys across other customers of theirs and if their API is open to experiment (or an account gets popped) then the customer domains are possibly at risk.<p>Email is hard to do right. No auth no entry should be the default. But majority of domain owners aren&#x27;t very good at figuring out how to secure things, or have business&#x2F;product interests that are a priority, specially when delegated and authorized to third party senders on their behalf.</div><br/></div></div><div id="37629922" class="c"><input type="checkbox" id="c-37629922" checked=""/><div class="controls bullet"><span class="by">bhaney</span><span>|</span><a href="#37630617">prev</a><span>|</span><a href="#37629979">next</a><span>|</span><label class="collapse" for="c-37629922">[-]</label><label class="expand" for="c-37629922">[6 more]</label></div><br/><div class="children"><div class="content">The effect that ARC headers have on spam scores is interesting. As someone who runs his own private mail server, I can seemingly improve the deliverability of my emails by just adding a set of useless ARC headers to my own emails?</div><br/><div id="37629969" class="c"><input type="checkbox" id="c-37629969" checked=""/><div class="controls bullet"><span class="by">movedx</span><span>|</span><a href="#37629922">parent</a><span>|</span><a href="#37630326">next</a><span>|</span><label class="collapse" for="c-37629969">[-]</label><label class="expand" for="c-37629969">[2 more]</label></div><br/><div class="children"><div class="content">I want to say no, purely based on the idea that if that were the case all my inboxes - spreads across several providers - would be overwhelmed with spam? Surely the (organised, educated) spammers are all over this sort of thing and would be using that to break through?</div><br/><div id="37630002" class="c"><input type="checkbox" id="c-37630002" checked=""/><div class="controls bullet"><span class="by">bhaney</span><span>|</span><a href="#37629922">root</a><span>|</span><a href="#37629969">parent</a><span>|</span><a href="#37630326">next</a><span>|</span><label class="collapse" for="c-37630002">[-]</label><label class="expand" for="c-37630002">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s what I would assume too, but one of the slides very specifically claims:<p>&gt; The presence of an arc=pass generally guarantees a better spam score. Confirmed with ProtonMail. Seems to be the case with Gmail and Outlook as well.<p>And it doesn&#x27;t seem like there&#x27;s anything that would prevent me from adding this to my own emails. I don&#x27;t think it would turn blatant spam into non-spam, but it seems like it could help something that&#x27;s already teetering on the line.</div><br/></div></div></div></div><div id="37630326" class="c"><input type="checkbox" id="c-37630326" checked=""/><div class="controls bullet"><span class="by">ttul</span><span>|</span><a href="#37629922">parent</a><span>|</span><a href="#37629969">prev</a><span>|</span><a href="#37629979">next</a><span>|</span><label class="collapse" for="c-37630326">[-]</label><label class="expand" for="c-37630326">[3 more]</label></div><br/><div class="children"><div class="content">Nobody in the email world considers ARC to be a bulletproof way to bypass spam filtering at a major receiver. The DEFCON presenter was ill-equipped to make that determination.</div><br/><div id="37630491" class="c"><input type="checkbox" id="c-37630491" checked=""/><div class="controls bullet"><span class="by">bhaney</span><span>|</span><a href="#37629922">root</a><span>|</span><a href="#37630326">parent</a><span>|</span><a href="#37629979">next</a><span>|</span><label class="collapse" for="c-37630491">[-]</label><label class="expand" for="c-37630491">[2 more]</label></div><br/><div class="children"><div class="content">&gt; bulletproof way to bypass spam filtering<p>Yeah that&#x27;s definitely not what I meant or what the presenter seems to be implying. If it helps spam scores even a little bit, that&#x27;s very interesting and potentially worth implementing in private hosts that often get dinged by larger hosts just for not being well-known. It doesn&#x27;t need to get anywhere near turning actual spam into non-spam.</div><br/><div id="37630761" class="c"><input type="checkbox" id="c-37630761" checked=""/><div class="controls bullet"><span class="by">ttul</span><span>|</span><a href="#37629922">root</a><span>|</span><a href="#37630491">parent</a><span>|</span><a href="#37629979">next</a><span>|</span><label class="collapse" for="c-37630761">[-]</label><label class="expand" for="c-37630761">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve worked in anti-spam since 2003. I am skeptical that his claims about ARC work at scale. Google does not have a rules-based spam filtering system. It is entirely driven by a massive machine learning model that adjusts its weights in response to user interaction. You can&#x27;t beat that model.</div><br/></div></div></div></div></div></div></div></div><div id="37629979" class="c"><input type="checkbox" id="c-37629979" checked=""/><div class="controls bullet"><span class="by">iamjason89</span><span>|</span><a href="#37629922">prev</a><span>|</span><a href="#37629945">next</a><span>|</span><label class="collapse" for="c-37629979">[-]</label><label class="expand" for="c-37629979">[1 more]</label></div><br/><div class="children"><div class="content">looks like this was even ack&#x27;d in May 2022: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=30533032">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=30533032</a></div><br/></div></div><div id="37629945" class="c"><input type="checkbox" id="c-37629945" checked=""/><div class="controls bullet"><span class="by">hoerzu</span><span>|</span><a href="#37629979">prev</a><span>|</span><a href="#37628999">next</a><span>|</span><label class="collapse" for="c-37629945">[-]</label><label class="expand" for="c-37629945">[4 more]</label></div><br/><div class="children"><div class="content">Does the issue still exist if you register an $80 SMTP outbox and spoof the address?</div><br/><div id="37630312" class="c"><input type="checkbox" id="c-37630312" checked=""/><div class="controls bullet"><span class="by">Thorrez</span><span>|</span><a href="#37629945">parent</a><span>|</span><a href="#37628999">next</a><span>|</span><label class="collapse" for="c-37630312">[-]</label><label class="expand" for="c-37630312">[3 more]</label></div><br/><div class="children"><div class="content">The slides say yes:<p>&gt;● Anyone is still able to sign up on MCs website and for 80$ spoof all their customers via their SMTP relay. You’re fully trusting in their mitigating controls.</div><br/><div id="37630337" class="c"><input type="checkbox" id="c-37630337" checked=""/><div class="controls bullet"><span class="by">ttul</span><span>|</span><a href="#37629945">root</a><span>|</span><a href="#37630312">parent</a><span>|</span><a href="#37628999">next</a><span>|</span><label class="collapse" for="c-37630337">[-]</label><label class="expand" for="c-37630337">[2 more]</label></div><br/><div class="children"><div class="content">Thought experiment: Would an email sending service that sends email for 42% of the domains globally that send through a transactional service [1] possibly exist on today&#x27;s internet if it _wasn&#x27;t_ incredibly good at blocking spam?<p>The DEFCON presenter makes the assertion that you can set up a spamming operation for $80&#x2F;mo, but has he tried?<p>[1] <a href="https:&#x2F;&#x2F;trends.builtwith.com&#x2F;mx&#x2F;transactional-email&#x2F;traffic&#x2F;Entire-Internet" rel="nofollow noreferrer">https:&#x2F;&#x2F;trends.builtwith.com&#x2F;mx&#x2F;transactional-email&#x2F;traffic&#x2F;...</a></div><br/><div id="37630425" class="c"><input type="checkbox" id="c-37630425" checked=""/><div class="controls bullet"><span class="by">Manouchehri</span><span>|</span><a href="#37629945">root</a><span>|</span><a href="#37630337">parent</a><span>|</span><a href="#37628999">next</a><span>|</span><label class="collapse" for="c-37630425">[-]</label><label class="expand" for="c-37630425">[1 more]</label></div><br/><div class="children"><div class="content">SendGrid isn&#x27;t great at blocking spam, and they&#x27;re a billion dollar company.<p>So yes.</div><br/></div></div></div></div></div></div></div></div><div id="37629929" class="c"><input type="checkbox" id="c-37629929" checked=""/><div class="controls bullet"><span class="by">salawat</span><span>|</span><a href="#37628999">prev</a><span>|</span><a href="#37629068">next</a><span>|</span><label class="collapse" for="c-37629929">[-]</label><label class="expand" for="c-37629929">[1 more]</label></div><br/><div class="children"><div class="content">As someone whose recently facechecked getting my domains email ready, including the absolute frustration of dealing with an ISP who has decreed that &quot;those who want to send email from their own metal shalt have a business account&quot;, shit like this makes my blood boil.<p>I bust my ass to be a responsible member of the Net and do my damnedest to ensure that my systems are up to snuff, up to and including ripping through&#x2F;tearing apart the current SotA... and yet assholes like that not only exist, but flippantly run as an open relay. With almost half of the Net paying them to do so. Are you frigging kidding me?!</div><br/></div></div><div id="37629068" class="c"><input type="checkbox" id="c-37629068" checked=""/><div class="controls bullet"><span class="by">jeffbee</span><span>|</span><a href="#37629929">prev</a><span>|</span><a href="#37629988">next</a><span>|</span><label class="collapse" for="c-37629068">[-]</label><label class="expand" for="c-37629068">[14 more]</label></div><br/><div class="children"><div class="content">TL;DR They found an open relay included in many SPF records.</div><br/><div id="37629231" class="c"><input type="checkbox" id="c-37629231" checked=""/><div class="controls bullet"><span class="by">3np</span><span>|</span><a href="#37629068">parent</a><span>|</span><a href="#37630233">next</a><span>|</span><label class="collapse" for="c-37629231">[-]</label><label class="expand" for="c-37629231">[3 more]</label></div><br/><div class="children"><div class="content">Where out of those 2M domains with SPF records opening themselves up, &lt;1k had set up DKIM&#x2F;DMARC records and somehow even those with DKIM configured and neglected still pass as authentic in Gmail.</div><br/><div id="37629476" class="c"><input type="checkbox" id="c-37629476" checked=""/><div class="controls bullet"><span class="by">jeffbee</span><span>|</span><a href="#37629068">root</a><span>|</span><a href="#37629231">parent</a><span>|</span><a href="#37630233">next</a><span>|</span><label class="collapse" for="c-37629476">[-]</label><label class="expand" for="c-37629476">[2 more]</label></div><br/><div class="children"><div class="content">That part did not make any sense to me. I do not see how this person determined that these domains are not using DKIM. There is no standard DKIM domain name, so what did they check?</div><br/></div></div></div></div><div id="37630233" class="c"><input type="checkbox" id="c-37630233" checked=""/><div class="controls bullet"><span class="by">weird-eye-issue</span><span>|</span><a href="#37629068">parent</a><span>|</span><a href="#37629231">prev</a><span>|</span><a href="#37629439">next</a><span>|</span><label class="collapse" for="c-37630233">[-]</label><label class="expand" for="c-37630233">[1 more]</label></div><br/><div class="children"><div class="content">Worse than that. The platform itself didn&#x27;t even attempt to verify domain ownership so you could send as anyone.</div><br/></div></div><div id="37629439" class="c"><input type="checkbox" id="c-37629439" checked=""/><div class="controls bullet"><span class="by">ttul</span><span>|</span><a href="#37629068">parent</a><span>|</span><a href="#37630233">prev</a><span>|</span><a href="#37629988">next</a><span>|</span><label class="collapse" for="c-37629439">[-]</label><label class="expand" for="c-37629439">[9 more]</label></div><br/><div class="children"><div class="content">Except it&#x27;s not an open relay. MailChannels would not exist on the internet if it didn&#x27;t aggressively control spam and phishing. The DEFCON talk did not prove the existence of a gaping hole; it showed something that has existed since the dawn of internet email: the sender domain cannot be adequately authenticated unless you use message signatures such as S&#x2F;MIME and DKIM. And even with DKIM, DKIM replay attacks allow widespread abuse.</div><br/><div id="37629808" class="c"><input type="checkbox" id="c-37629808" checked=""/><div class="controls bullet"><span class="by">elif</span><span>|</span><a href="#37629068">root</a><span>|</span><a href="#37629439">parent</a><span>|</span><a href="#37630361">next</a><span>|</span><label class="collapse" for="c-37629808">[-]</label><label class="expand" for="c-37629808">[4 more]</label></div><br/><div class="children"><div class="content">That&#x27;s a terribly incomplete understanding of what&#x27;s going on here.<p>It is incumbent upon them to validate that their API users own the domain they intend to send from. All the reputable senders do this. Allowing unchecked user-defined from field is the definition of an open relay.</div><br/><div id="37629837" class="c"><input type="checkbox" id="c-37629837" checked=""/><div class="controls bullet"><span class="by">ttul</span><span>|</span><a href="#37629068">root</a><span>|</span><a href="#37629808">parent</a><span>|</span><a href="#37630361">next</a><span>|</span><label class="collapse" for="c-37629837">[-]</label><label class="expand" for="c-37629837">[3 more]</label></div><br/><div class="children"><div class="content">Why is it not valid for someone to send email from another domain? I’m asking seriously. That’s not an invalid thing to do. The RFC explicitly advises that flexibility in the envelope address is a necessary feature of internet email.<p>It may be a convention that transactional email services require proof of domain ownership, but that is a convention, not a standard.</div><br/><div id="37629954" class="c"><input type="checkbox" id="c-37629954" checked=""/><div class="controls bullet"><span class="by">buzer</span><span>|</span><a href="#37629068">root</a><span>|</span><a href="#37629837">parent</a><span>|</span><a href="#37629947">next</a><span>|</span><label class="collapse" for="c-37629954">[-]</label><label class="expand" for="c-37629954">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s valid, but it needs to be authorized. Back when initial specs of SMTP were it didn&#x27;t matter that much as users were mainly academics and it was primarily used for discussion&#x2F;passing information.<p>These days you don&#x27;t really want your finance team getting email which say it&#x27;s from CEO and is asking them to make wire transfer, email from IT asking to password reset and so on. While it probably shouldn&#x27;t be, the sender address is treated as very strong signal that email is legitimate so you should be taking steps to make it so that if someone tries to spoof it without authorization, it should be treated as suspicious.</div><br/></div></div><div id="37629947" class="c"><input type="checkbox" id="c-37629947" checked=""/><div class="controls bullet"><span class="by">iamjason89</span><span>|</span><a href="#37629068">root</a><span>|</span><a href="#37629837">parent</a><span>|</span><a href="#37629954">prev</a><span>|</span><a href="#37630361">next</a><span>|</span><label class="collapse" for="c-37629947">[-]</label><label class="expand" for="c-37629947">[1 more]</label></div><br/><div class="children"><div class="content">I think the fact this was possible via the use of CF workers invalidates your point. Also, you choose to add the Domain Lockdown feature as a direct results of these findings.<p>I&#x27;d feel pretty silly too if my &quot;email filters&quot; kept me from acting sooner on this problem.</div><br/></div></div></div></div></div></div><div id="37630361" class="c"><input type="checkbox" id="c-37630361" checked=""/><div class="controls bullet"><span class="by">Manouchehri</span><span>|</span><a href="#37629068">root</a><span>|</span><a href="#37629439">parent</a><span>|</span><a href="#37629808">prev</a><span>|</span><a href="#37630223">next</a><span>|</span><label class="collapse" for="c-37630361">[-]</label><label class="expand" for="c-37630361">[1 more]</label></div><br/><div class="children"><div class="content">Ironically it&#x27;s not possible to use S&#x2F;MIME with MailChannels here because you don&#x27;t allow sending raw MIME content.</div><br/></div></div><div id="37630223" class="c"><input type="checkbox" id="c-37630223" checked=""/><div class="controls bullet"><span class="by">weird-eye-issue</span><span>|</span><a href="#37629068">root</a><span>|</span><a href="#37629439">parent</a><span>|</span><a href="#37630361">prev</a><span>|</span><a href="#37629494">next</a><span>|</span><label class="collapse" for="c-37630223">[-]</label><label class="expand" for="c-37630223">[2 more]</label></div><br/><div class="children"><div class="content">You don&#x27;t understand the situation at all</div><br/><div id="37630992" class="c"><input type="checkbox" id="c-37630992" checked=""/><div class="controls bullet"><span class="by">isatty</span><span>|</span><a href="#37629068">root</a><span>|</span><a href="#37630223">parent</a><span>|</span><a href="#37629494">next</a><span>|</span><label class="collapse" for="c-37630992">[-]</label><label class="expand" for="c-37630992">[1 more]</label></div><br/><div class="children"><div class="content">If you check their profile they’re the founder of MC. That would explain the comments more than understanding of the topic.</div><br/></div></div></div></div><div id="37629494" class="c"><input type="checkbox" id="c-37629494" checked=""/><div class="controls bullet"><span class="by">jeffbee</span><span>|</span><a href="#37629068">root</a><span>|</span><a href="#37629439">parent</a><span>|</span><a href="#37630223">prev</a><span>|</span><a href="#37629988">next</a><span>|</span><label class="collapse" for="c-37629494">[-]</label><label class="expand" for="c-37629494">[1 more]</label></div><br/><div class="children"><div class="content">Sorry, no. Any service that will issue emails masquerading as 3rd-party domains, which does not use an effective authentication mechanism, is an open relay by definition.</div><br/></div></div></div></div></div></div><div id="37629988" class="c"><input type="checkbox" id="c-37629988" checked=""/><div class="controls bullet"><span class="by">johnklos</span><span>|</span><a href="#37629068">prev</a><span>|</span><a href="#37629183">next</a><span>|</span><label class="collapse" for="c-37629988">[-]</label><label class="expand" for="c-37629988">[3 more]</label></div><br/><div class="children"><div class="content">Due to laziness &#x2F; ignorance &#x2F; some combination of both, many domains that use Amazon can be trivially spoofed by anyone else who can send via Amazon. Last I checked, that was true of outlook.com, too. I think there was a recent article about it...<p>These companies are so hungry for money, they forget that their products need anything else at all after they get to the &quot;charge customer money for service&quot; part. Companies have been told about issues like these for ages now, yet they all act so surprised when the same ancient problem pops up, time and time again.</div><br/><div id="37631141" class="c"><input type="checkbox" id="c-37631141" checked=""/><div class="controls bullet"><span class="by">ahoka</span><span>|</span><a href="#37629988">parent</a><span>|</span><a href="#37631147">next</a><span>|</span><label class="collapse" for="c-37631141">[-]</label><label class="expand" for="c-37631141">[1 more]</label></div><br/><div class="children"><div class="content">And if you want to setup an honest mail server as Random Joe, you will struggle to not get blocked by spam filters while these too-big-to-fail mail senders can get away with being on open relay.</div><br/></div></div></div></div><div id="37629183" class="c"><input type="checkbox" id="c-37629183" checked=""/><div class="controls bullet"><span class="by">charles_f</span><span>|</span><a href="#37629988">prev</a><span>|</span><a href="#37630199">next</a><span>|</span><label class="collapse" for="c-37629183">[-]</label><label class="expand" for="c-37629183">[3 more]</label></div><br/><div class="children"><div class="content">The level of complacency of mailchannels when they were contacted about the issue is just unbelievable. Those guys are responsible for a sizeable portion of the corporate email traffic, and don&#x27;t seem to give a shit about security or spam (the cancer of the very thing they sell) until publicly shamed about it.<p>Entertaining presentation</div><br/><div id="37630381" class="c"><input type="checkbox" id="c-37630381" checked=""/><div class="controls bullet"><span class="by">Manouchehri</span><span>|</span><a href="#37629183">parent</a><span>|</span><a href="#37629236">next</a><span>|</span><label class="collapse" for="c-37630381">[-]</label><label class="expand" for="c-37630381">[1 more]</label></div><br/><div class="children"><div class="content">Eh, it&#x27;s not just their security that has complacency. I contacted their support and explained how to fix their incorrect handling of text&#x2F;x-amp-html content (they insist on putting text&#x2F;html first, which breaks Apple Mail when sending AMP emails), and this is the eventual response I got after wasting time trying to help:<p>```<p>I do understand what you want, but we&#x27;re not going to make that change at this time.<p>This probably isn&#x27;t the answer you wanted, but I&#x27;m afraid we can&#x27;t be any more help with this issue. I&#x27;m marking this ticket solved. Please open a new ticket if you need anything else.<p>```</div><br/></div></div></div></div><div id="37630199" class="c"><input type="checkbox" id="c-37630199" checked=""/><div class="controls bullet"><span class="by">cyclotron3k</span><span>|</span><a href="#37629183">prev</a><span>|</span><label class="collapse" for="c-37630199">[-]</label><label class="expand" for="c-37630199">[4 more]</label></div><br/><div class="children"><div class="content">A PDF? From Defcon? I&#x27;ll give that one a miss thanks</div><br/><div id="37630314" class="c"><input type="checkbox" id="c-37630314" checked=""/><div class="controls bullet"><span class="by">Thorrez</span><span>|</span><a href="#37630199">parent</a><span>|</span><a href="#37630209">next</a><span>|</span><label class="collapse" for="c-37630314">[-]</label><label class="expand" for="c-37630314">[2 more]</label></div><br/><div class="children"><div class="content">I thought PDFs are pretty common from Defcon. I&#x27;ve seen this a lot.</div><br/><div id="37630601" class="c"><input type="checkbox" id="c-37630601" checked=""/><div class="controls bullet"><span class="by">cyclotron3k</span><span>|</span><a href="#37630199">root</a><span>|</span><a href="#37630314">parent</a><span>|</span><a href="#37630209">next</a><span>|</span><label class="collapse" for="c-37630601">[-]</label><label class="expand" for="c-37630601">[1 more]</label></div><br/><div class="children"><div class="content">Tbf I&#x27;m sure it&#x27;s fine, but PDFs are a notorious attack vector, and Defcon, well...</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>