<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1703494858722" as="style"/><link rel="stylesheet" href="styles.css?v=1703494858722"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="http://www.egr.unlv.edu/~ed/x86.html">x86-64 Assembly Language Programming with Ubuntu (2022)</a>Â <span class="domain">(<a href="http://www.egr.unlv.edu">www.egr.unlv.edu</a>)</span></div><div class="subtext"><span>generichuman</span> | <span>24 comments</span></div><br/><div><div id="38760386" class="c"><input type="checkbox" id="c-38760386" checked=""/><div class="controls bullet"><span class="by">kragen</span><span>|</span><a href="#38759081">next</a><span>|</span><label class="collapse" for="c-38760386">[-]</label><label class="expand" for="c-38760386">[2 more]</label></div><br/><div class="children"><div class="content">367-page cc-by-nc-sa textbook; though the license permits modification, no source format seems to be provided, just a pdf.  it covers mostly introductory userland programming, though there&#x27;s a chapter on interrupt handling.  on skimming the table of contents i don&#x27;t see anything about page tables, tlbs, atomics, the amd64 memory consistency model, running before sdram is enabled, iommus, mtrrs, or simd.  none of those things are necessary to write a compiler or debug most compiled code, except maybe simd<p>this book also looks like it could be a very solid base for a course that did cover one or more of those additional topics; the course would also include some supplementary material<p>it probably teaches more than everything i know about amd64 assembly, except the most important thing, which is that arm assembly is much better</div><br/><div id="38760575" class="c"><input type="checkbox" id="c-38760575" checked=""/><div class="controls bullet"><span class="by">snvzz</span><span>|</span><a href="#38760386">parent</a><span>|</span><a href="#38759081">next</a><span>|</span><label class="collapse" for="c-38760575">[-]</label><label class="expand" for="c-38760575">[1 more]</label></div><br/><div class="children"><div class="content">Or RISC-V for that matter.<p>(while being an order of magnitude simpler)</div><br/></div></div></div></div><div id="38759081" class="c"><input type="checkbox" id="c-38759081" checked=""/><div class="controls bullet"><span class="by">grandiego</span><span>|</span><a href="#38760386">prev</a><span>|</span><a href="#38758755">next</a><span>|</span><label class="collapse" for="c-38759081">[-]</label><label class="expand" for="c-38759081">[2 more]</label></div><br/><div class="children"><div class="content">Some months ago I was trying to learn a bit on this subject (using Debian); from my notes I made a sort of beginner&#x27;s &quot;self-tutorial&quot;[1].<p>[1]: <a href="https:&#x2F;&#x2F;americati.com&#x2F;dat&#x2F;assembler.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;americati.com&#x2F;dat&#x2F;assembler.html</a></div><br/><div id="38759413" class="c"><input type="checkbox" id="c-38759413" checked=""/><div class="controls bullet"><span class="by">yla92</span><span>|</span><a href="#38759081">parent</a><span>|</span><a href="#38758755">next</a><span>|</span><label class="collapse" for="c-38759413">[-]</label><label class="expand" for="c-38759413">[1 more]</label></div><br/><div class="children"><div class="content">This is great. Thanks for sharing!</div><br/></div></div></div></div><div id="38758755" class="c"><input type="checkbox" id="c-38758755" checked=""/><div class="controls bullet"><span class="by">corysama</span><span>|</span><a href="#38759081">prev</a><span>|</span><a href="#38758682">next</a><span>|</span><label class="collapse" for="c-38758755">[-]</label><label class="expand" for="c-38758755">[17 more]</label></div><br/><div class="children"><div class="content">Besides media codecs and embedded microcontrollers, what are major uses of writing raw assembly language these days? I worked in game engines for quite a while and everyone I know of there sticks to intrinsics.</div><br/><div id="38758938" class="c"><input type="checkbox" id="c-38758938" checked=""/><div class="controls bullet"><span class="by">o11c</span><span>|</span><a href="#38758755">parent</a><span>|</span><a href="#38758831">next</a><span>|</span><label class="collapse" for="c-38758938">[-]</label><label class="expand" for="c-38758938">[2 more]</label></div><br/><div class="children"><div class="content">Most people who need assembly are going to want to only write assembly-embedded-in-C, and learn the GCC constraint specifiers. This of course assumes that there aren&#x27;t sufficient intrinsics (these days, there are a lot of intrinsics exposed! [1]). Note that you can specify registers to be used to store a variable without writing any asm, if for some reason the register allocator is confused by what you&#x27;re doing.<p>Developing a compiler from scratch is the other significant use for writing it. Of course it is quite common to need to <i>read</i> it.<p>[1]: <a href="https:&#x2F;&#x2F;gcc.gnu.org&#x2F;onlinedocs&#x2F;gcc&#x2F;x86-Built-in-Functions.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;gcc.gnu.org&#x2F;onlinedocs&#x2F;gcc&#x2F;x86-Built-in-Functions.ht...</a><p>Edit: also useful are <a href="https:&#x2F;&#x2F;gcc.gnu.org&#x2F;onlinedocs&#x2F;gcc&#x2F;Extended-Asm.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;gcc.gnu.org&#x2F;onlinedocs&#x2F;gcc&#x2F;Extended-Asm.html</a> and <a href="https:&#x2F;&#x2F;gcc.gnu.org&#x2F;onlinedocs&#x2F;gcc&#x2F;Local-Register-Variables.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;gcc.gnu.org&#x2F;onlinedocs&#x2F;gcc&#x2F;Local-Register-Variables....</a></div><br/><div id="38759324" class="c"><input type="checkbox" id="c-38759324" checked=""/><div class="controls bullet"><span class="by">x1sec</span><span>|</span><a href="#38758755">root</a><span>|</span><a href="#38758938">parent</a><span>|</span><a href="#38758831">next</a><span>|</span><label class="collapse" for="c-38759324">[-]</label><label class="expand" for="c-38759324">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Of course it is quite common to need to read it<p>This is a notable differentiation - Writing assembly is a different skill to reading it from a disassembly. Reverse engineering, malware analysis etc. does not inherently require you to be able to write asm, although it certainly would help.</div><br/></div></div></div></div><div id="38758831" class="c"><input type="checkbox" id="c-38758831" checked=""/><div class="controls bullet"><span class="by">moonchild</span><span>|</span><a href="#38758755">parent</a><span>|</span><a href="#38758938">prev</a><span>|</span><a href="#38760352">next</a><span>|</span><label class="collapse" for="c-38758831">[-]</label><label class="expand" for="c-38758831">[2 more]</label></div><br/><div class="children"><div class="content">Media codecs are a microcosm of routines that want more care and attention than compilers are yet able to give.  Some of RAD&#x27;s decompression kernels are written in assembly, for instance, and a particular unicode transcoding routine was 20% faster in assembly than in c with intrinsics.  An anecdote I heard: it was appreciably faster to run the linux version of postgresql in a translation layer under solaris than to run the native version, because the linux c library&#x27;s strings functions were written in assembly.  A particular binary search routine I rewrote in assembly (from c) was about 4x faster; I would estimate that about half of that was from an improved algorithm, and the other half was from the choice of language.  (Of course, somebody else later made a c implementation that was a bit faster, owing to an algorithmic improvement...)</div><br/><div id="38760302" class="c"><input type="checkbox" id="c-38760302" checked=""/><div class="controls bullet"><span class="by">kragen</span><span>|</span><a href="#38758755">root</a><span>|</span><a href="#38758831">parent</a><span>|</span><a href="#38760352">next</a><span>|</span><label class="collapse" for="c-38760302">[-]</label><label class="expand" for="c-38760302">[1 more]</label></div><br/><div class="children"><div class="content">i feel like maybe you told me about this particular routine but i failed to bookmark it, or maybe tag the bookmark appropriately; do you have a link?</div><br/></div></div></div></div><div id="38760352" class="c"><input type="checkbox" id="c-38760352" checked=""/><div class="controls bullet"><span class="by">kragen</span><span>|</span><a href="#38758755">parent</a><span>|</span><a href="#38758831">prev</a><span>|</span><a href="#38759612">next</a><span>|</span><label class="collapse" for="c-38760352">[-]</label><label class="expand" for="c-38760352">[1 more]</label></div><br/><div class="children"><div class="content">as you know, a lot of day-to-day use of assembly nowadays is writing compilers and debugging compiled programs, though i also got surprisingly good performance in httpdito from a fork-per-client web server <a href="http:&#x2F;&#x2F;canonical.org&#x2F;~kragen&#x2F;sw&#x2F;dev3&#x2F;httpdito-readme" rel="nofollow noreferrer">http:&#x2F;&#x2F;canonical.org&#x2F;~kragen&#x2F;sw&#x2F;dev3&#x2F;httpdito-readme</a><p>dan bernstein makes the argument that, as computers get faster, we use them on bigger problems, which means that computer performance is increasingly dominated by small inner loops, which is precisely the situation where it becomes more rational to put effort into hand-optimizing your small inner loops than to hack on the compiler to hopefully speed up all parts of the program, just as it was in the 01960s for different reasons<p>a different way to attack that problem in many cases is to write a domain-specific compiler from a domain-specific language to machine code, as thompson&#x27;s regexp engine did, and as verilog compilers do.  but i&#x27;m not sure how you speed up a media codec that way<p>bernstein has also written a fair bit of assembly to eliminate timing side-channel leaks from cryptographic code</div><br/></div></div><div id="38759612" class="c"><input type="checkbox" id="c-38759612" checked=""/><div class="controls bullet"><span class="by">8372049</span><span>|</span><a href="#38758755">parent</a><span>|</span><a href="#38760352">prev</a><span>|</span><a href="#38759579">next</a><span>|</span><label class="collapse" for="c-38759612">[-]</label><label class="expand" for="c-38759612">[1 more]</label></div><br/><div class="children"><div class="content">Not exactly what you&#x27;re asking, but reading and manipulating asm is critical in several parts of infosec: reversing, vuln analysis, sploiting and manipulating, etc. The same goes for somewhat related fields suchs as game hacks, cracking and so on. To some extent this also includes writing raw asm.</div><br/></div></div><div id="38759579" class="c"><input type="checkbox" id="c-38759579" checked=""/><div class="controls bullet"><span class="by">Manuel_D</span><span>|</span><a href="#38758755">parent</a><span>|</span><a href="#38759612">prev</a><span>|</span><a href="#38760364">next</a><span>|</span><label class="collapse" for="c-38759579">[-]</label><label class="expand" for="c-38759579">[1 more]</label></div><br/><div class="children"><div class="content">Operating systems and hardware drivers are big ones. Compilers do a lot of silent stuff behind the scene that can interfere when bare metal is involved.<p>Example: <a href="https:&#x2F;&#x2F;github.com&#x2F;dddrrreee&#x2F;cs140e-23win&#x2F;blob&#x2F;85b9ae3bd46c7e2edaf69b2b3c3afb741e8f4fa2&#x2F;notes&#x2F;observability&#x2F;BUG.md">https:&#x2F;&#x2F;github.com&#x2F;dddrrreee&#x2F;cs140e-23win&#x2F;blob&#x2F;85b9ae3bd46c7...</a></div><br/></div></div><div id="38760364" class="c"><input type="checkbox" id="c-38760364" checked=""/><div class="controls bullet"><span class="by">ack_complete</span><span>|</span><a href="#38758755">parent</a><span>|</span><a href="#38759579">prev</a><span>|</span><a href="#38760438">next</a><span>|</span><label class="collapse" for="c-38760364">[-]</label><label class="expand" for="c-38760364">[1 more]</label></div><br/><div class="children"><div class="content">General data compression&#x2F;decompression can also benefit from asm level tuning, including generic compression such as Huffman&#x2F;zlib and more specific compression like animation compression. MSVC is also a lot worse at vectorization than GCC or Clang and can more easily be beaten with asm.<p>I would agree that direct asm is very rare these days in game engines outside of third-party libraries. There can be significant gains with tuned asm but some combination of intrinsics and ISPC is usually good enough. But it is far more useful to be able to _read_ assembly, for debugging in an optimized build or analyzing release crashes.</div><br/></div></div><div id="38760438" class="c"><input type="checkbox" id="c-38760438" checked=""/><div class="controls bullet"><span class="by">fragmede</span><span>|</span><a href="#38758755">parent</a><span>|</span><a href="#38760364">prev</a><span>|</span><a href="#38759622">next</a><span>|</span><label class="collapse" for="c-38760438">[-]</label><label class="expand" for="c-38760438">[1 more]</label></div><br/><div class="children"><div class="content">Another area that demands performance and can pay for it is databases. Proprietary databases have hand written assembly tuned for the exact processor its running on in its hot paths.</div><br/></div></div><div id="38759622" class="c"><input type="checkbox" id="c-38759622" checked=""/><div class="controls bullet"><span class="by">latenightcoding</span><span>|</span><a href="#38758755">parent</a><span>|</span><a href="#38760438">prev</a><span>|</span><a href="#38759898">next</a><span>|</span><label class="collapse" for="c-38759622">[-]</label><label class="expand" for="c-38759622">[2 more]</label></div><br/><div class="children"><div class="content">I donât write it but I read it almost every day while working on high performance C&#x2F;C++ code. Reading the generated assembly almost always gives me hints on how to optimize the code better</div><br/><div id="38760287" class="c"><input type="checkbox" id="c-38760287" checked=""/><div class="controls bullet"><span class="by">corysama</span><span>|</span><a href="#38758755">root</a><span>|</span><a href="#38759622">parent</a><span>|</span><a href="#38759898">next</a><span>|</span><label class="collapse" for="c-38760287">[-]</label><label class="expand" for="c-38760287">[1 more]</label></div><br/><div class="children"><div class="content">Godbolt FTW.</div><br/></div></div></div></div><div id="38759898" class="c"><input type="checkbox" id="c-38759898" checked=""/><div class="controls bullet"><span class="by">CoastalCoder</span><span>|</span><a href="#38758755">parent</a><span>|</span><a href="#38759622">prev</a><span>|</span><a href="#38759303">next</a><span>|</span><label class="collapse" for="c-38759898">[-]</label><label class="expand" for="c-38759898">[1 more]</label></div><br/><div class="children"><div class="content">I used it to write a bare-bones JIT compiler for deep-learning kernels.<p>I would have preferred to emit something like LLVM IR instead, but couldn&#x27;t because of several constraints.</div><br/></div></div><div id="38759303" class="c"><input type="checkbox" id="c-38759303" checked=""/><div class="controls bullet"><span class="by">e12e</span><span>|</span><a href="#38758755">parent</a><span>|</span><a href="#38759898">prev</a><span>|</span><a href="#38759445">next</a><span>|</span><label class="collapse" for="c-38759303">[-]</label><label class="expand" for="c-38759303">[1 more]</label></div><br/><div class="children"><div class="content">I always like to point at heavy thing - but not sure if it inactive?<p><a href="https:&#x2F;&#x2F;2ton.com.au&#x2F;HeavyThing&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;2ton.com.au&#x2F;HeavyThing&#x2F;</a></div><br/></div></div><div id="38759445" class="c"><input type="checkbox" id="c-38759445" checked=""/><div class="controls bullet"><span class="by">anonacct37</span><span>|</span><a href="#38758755">parent</a><span>|</span><a href="#38759303">prev</a><span>|</span><a href="#38758774">next</a><span>|</span><label class="collapse" for="c-38759445">[-]</label><label class="expand" for="c-38759445">[1 more]</label></div><br/><div class="children"><div class="content">cryptography. Things that really need to be constant time and not be &quot;optimized&quot; by the compiler.<p>See the .s files in: <a href="https:&#x2F;&#x2F;cs.opensource.google&#x2F;go&#x2F;go&#x2F;+&#x2F;refs&#x2F;tags&#x2F;go1.21.5:src&#x2F;crypto&#x2F;aes&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;cs.opensource.google&#x2F;go&#x2F;go&#x2F;+&#x2F;refs&#x2F;tags&#x2F;go1.21.5:src&#x2F;...</a><p>I occasionally see it in compression as well.</div><br/></div></div><div id="38758774" class="c"><input type="checkbox" id="c-38758774" checked=""/><div class="controls bullet"><span class="by">spicymaki</span><span>|</span><a href="#38758755">parent</a><span>|</span><a href="#38759445">prev</a><span>|</span><a href="#38759233">next</a><span>|</span><label class="collapse" for="c-38758774">[-]</label><label class="expand" for="c-38758774">[1 more]</label></div><br/><div class="children"><div class="content">Debugging, Emulation and Compiler development comes to mind.</div><br/></div></div><div id="38759233" class="c"><input type="checkbox" id="c-38759233" checked=""/><div class="controls bullet"><span class="by">rickoooooo</span><span>|</span><a href="#38758755">parent</a><span>|</span><a href="#38758774">prev</a><span>|</span><a href="#38758682">next</a><span>|</span><label class="collapse" for="c-38759233">[-]</label><label class="expand" for="c-38759233">[1 more]</label></div><br/><div class="children"><div class="content">Exploit payloads (shellcode)</div><br/></div></div></div></div><div id="38758682" class="c"><input type="checkbox" id="c-38758682" checked=""/><div class="controls bullet"><span class="by">kd913</span><span>|</span><a href="#38758755">prev</a><span>|</span><a href="#38758956">next</a><span>|</span><label class="collapse" for="c-38758682">[-]</label><label class="expand" for="c-38758682">[1 more]</label></div><br/><div class="children"><div class="content">Thank you for this resource. Bookmarked and will hopefully prove useful for debugging crash or interviews.</div><br/></div></div><div id="38758956" class="c"><input type="checkbox" id="c-38758956" checked=""/><div class="controls bullet"><span class="by">ThinkBeat</span><span>|</span><a href="#38758682">prev</a><span>|</span><label class="collapse" for="c-38758956">[-]</label><label class="expand" for="c-38758956">[1 more]</label></div><br/><div class="children"><div class="content">Thank you for making this available. 
I am reading it tomorrow. (well starting it).
Been looking for something like this for a while</div><br/></div></div></div></div></div></div></div></body></html>