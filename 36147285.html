<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1685610079720" as="style"/><link rel="stylesheet" href="styles.css?v=1685610079720"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://utcc.utoronto.ca/~cks/space/blog/tech/DNSSECFailureDrivesDisablement">DNSSEC failures are how you get people to disable DNSSEC</a> <span class="domain">(<a href="https://utcc.utoronto.ca">utcc.utoronto.ca</a>)</span></div><div class="subtext"><span>zdw</span> | <span>29 comments</span></div><br/><div><div id="36148014" class="c"><input type="checkbox" id="c-36148014" checked=""/><div class="controls bullet"><span class="by">elp</span><span>|</span><a href="#36147733">next</a><span>|</span><label class="collapse" for="c-36148014">[-]</label><label class="expand" for="c-36148014">[4 more]</label></div><br/><div class="children"><div class="content">I run the signing systems for a bunch of TLDs and honestly it scares me.<p>.NZ was just the latest public failure. If multiple large registry operators employing people who wrote the DNS and DNSSEC rfcs have had failures then how can you expect regular mortals to get it right?<p>Transferring your domain and your old ISP had dnssec on but the new one knows nothing about it and didn&#x27;t check ... Down you go.<p>Mess up the key signing key change over procedure while transferring to a competent DNSSEC provider ... down you go again (although hopefully for a shorter time).<p>We do best practice DNSSEC, using fancy HSMs to do so, but if my fancy, proprietary, badly documented Thales HSM dies and the next person with my job has trouble getting the new box configured... no changes to the zones until its fixed.  Take long enough that the RRSIGs expire ... down YOU go again.  If at that point they throw out the HSM and roll regular DNSSEC using Knot or something it will probably be at least 24 hours for the zone to work properly even with IANAs emergency procedures.<p>I&#x27;m paranoid so we have 3 identical HSMs and detailed restore procedures but there is zero guarantee that if I ever leave my replacement will get it right.  You can&#x27;t hire dnssec staff, they are impossible to find, you have to train on the job.<p>The basic idea is excellent but the implementation in the real world is horrible. If dnssec usage was wide spread we might reach some decent maturity with the tools and protocols, but I can&#x27;t see that happening any time soon.</div><br/><div id="36148195" class="c"><input type="checkbox" id="c-36148195" checked=""/><div class="controls bullet"><span class="by">donttellmypeers</span><span>|</span><a href="#36148014">parent</a><span>|</span><a href="#36147733">next</a><span>|</span><label class="collapse" for="c-36148195">[-]</label><label class="expand" for="c-36148195">[3 more]</label></div><br/><div class="children"><div class="content">&gt; If dnssec usage was wide spread we might reach some decent maturity with the tools and protocols, but I can&#x27;t see that happening any time soon.<p>DNSSEC&#x27;s lack of maturity is a symptom of DNS itself not having a healthy ecosystem. I feel like it&#x27;d take as little as a half-percent of the people writing new HTTP tooling to noticeable improve the DNS ecosystem as a whole.</div><br/><div id="36148395" class="c"><input type="checkbox" id="c-36148395" checked=""/><div class="controls bullet"><span class="by">silisili</span><span>|</span><a href="#36148014">root</a><span>|</span><a href="#36148195">parent</a><span>|</span><a href="#36148606">next</a><span>|</span><label class="collapse" for="c-36148395">[-]</label><label class="expand" for="c-36148395">[1 more]</label></div><br/><div class="children"><div class="content">Totally.  DNS was always an IETF RFC bound thing.  Recently, big players just kinda started making their own decisions.<p>I&#x27;m not sure which is better. Having big companies control the internet is definitely bad, but the pedantry and bikeshedding the IETF offers can be equally bad.<p>I&#x27;d probably rather see the two cooperate&#x2F;converge, but that&#x27;s a pipe dream.</div><br/></div></div><div id="36148606" class="c"><input type="checkbox" id="c-36148606" checked=""/><div class="controls bullet"><span class="by">abwizz</span><span>|</span><a href="#36148014">root</a><span>|</span><a href="#36148195">parent</a><span>|</span><a href="#36148395">prev</a><span>|</span><a href="#36147733">next</a><span>|</span><label class="collapse" for="c-36148606">[-]</label><label class="expand" for="c-36148606">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I feel like it&#x27;d take as little as a half-percent of the people writing new HTTP tooling to noticeable improve the DNS ecosystem as a whole.<p>you mean like the ppl that made it more centralized and failure prone?</div><br/></div></div></div></div></div></div><div id="36147733" class="c"><input type="checkbox" id="c-36147733" checked=""/><div class="controls bullet"><span class="by">HaroldBolt78</span><span>|</span><a href="#36148014">prev</a><span>|</span><a href="#36148726">next</a><span>|</span><label class="collapse" for="c-36147733">[-]</label><label class="expand" for="c-36147733">[6 more]</label></div><br/><div class="children"><div class="content">I had the power turned off at home about a year ago. I think it was due to maintenance by the utilities company, or maybe I did it for DIY reasons.<p>Anyway, after it came back on, it took me far too long to realise why my internet was down. All DNS responses were being rejected. It turns out, my Pi-Hole DNS server - which had forgotten the time, of course - was trying to resolve the IP of an NTP server so it could fetch the current time, but this name resolution was over DNSSEC <i>which requires the current time</i>. You need the time to get the time.<p>I turned off DNSSEC and haven&#x27;t looked back since.</div><br/><div id="36148461" class="c"><input type="checkbox" id="c-36148461" checked=""/><div class="controls bullet"><span class="by">citrin_ru</span><span>|</span><a href="#36147733">parent</a><span>|</span><a href="#36147858">next</a><span>|</span><label class="collapse" for="c-36148461">[-]</label><label class="expand" for="c-36148461">[1 more]</label></div><br/><div class="children"><div class="content">For me it&#x27;s a reason to use IP address in &#x2F;etc&#x2F;ntp.conf instead. DNS over HTTPS and HTTPS in general also need current time to validate a certificate so DNSSEC is not unique here.</div><br/></div></div><div id="36147858" class="c"><input type="checkbox" id="c-36147858" checked=""/><div class="controls bullet"><span class="by">bouke</span><span>|</span><a href="#36147733">parent</a><span>|</span><a href="#36148461">prev</a><span>|</span><a href="#36148726">next</a><span>|</span><label class="collapse" for="c-36147858">[-]</label><label class="expand" for="c-36147858">[4 more]</label></div><br/><div class="children"><div class="content">I had exactly the same issue happening to me! I’ve since added a Real Time Clock (RTC), so the Pi shouldn’t forget about the current time anymore. That is until the battery runs out of course, for which there is no monitoring in place. So yeah maybe I should disable DNSSEC as well. At least we need to get better at building fault tolerant systems. Maybe Pi-Hole needs to be aware of and handle this scenario better: a special “we’re booting up and we don’t have the current time so don’t do DNSSEC yet”.</div><br/><div id="36148009" class="c"><input type="checkbox" id="c-36148009" checked=""/><div class="controls bullet"><span class="by">toast0</span><span>|</span><a href="#36147733">root</a><span>|</span><a href="#36147858">parent</a><span>|</span><a href="#36148047">next</a><span>|</span><label class="collapse" for="c-36148009">[-]</label><label class="expand" for="c-36148009">[1 more]</label></div><br/><div class="children"><div class="content">fake-hwclock[1] is useful for this. I don&#x27;t know much about Pi-Hole, but if it involves writable storage and has a package manager, fake-hwclock may be available from there.<p>&gt; At least we need to get better at building fault tolerant systems.<p>Security and fault tolerance are at odds here. Failing closed when you can&#x27;t validate is correct, but not so useful. Properly modeling the clock might give you a way to get bootstrapped, but then an adversary would arrange for a bootstrap situation so they could interfere with your clock and then make use of the incorrect time for their nefarious purposes.<p>[1] <a href="https:&#x2F;&#x2F;git.einval.com&#x2F;cgi-bin&#x2F;gitweb.cgi?p=fake-hwclock.git" rel="nofollow">https:&#x2F;&#x2F;git.einval.com&#x2F;cgi-bin&#x2F;gitweb.cgi?p=fake-hwclock.git</a></div><br/></div></div><div id="36148047" class="c"><input type="checkbox" id="c-36148047" checked=""/><div class="controls bullet"><span class="by">boringuser2</span><span>|</span><a href="#36147733">root</a><span>|</span><a href="#36147858">parent</a><span>|</span><a href="#36148009">prev</a><span>|</span><a href="#36148726">next</a><span>|</span><label class="collapse" for="c-36148047">[-]</label><label class="expand" for="c-36148047">[2 more]</label></div><br/><div class="children"><div class="content">Does pihole even have value anymore with DNS over https?<p>I&#x27;d just implement that in 0.2 nanoseconds if I were a Samsung engineer making an intrusive adserver.</div><br/><div id="36148378" class="c"><input type="checkbox" id="c-36148378" checked=""/><div class="controls bullet"><span class="by">elcomet</span><span>|</span><a href="#36147733">root</a><span>|</span><a href="#36148047">parent</a><span>|</span><a href="#36148726">next</a><span>|</span><label class="collapse" for="c-36148378">[-]</label><label class="expand" for="c-36148378">[1 more]</label></div><br/><div class="children"><div class="content">What&#x27;s your alternative to the pihole with dns over https?</div><br/></div></div></div></div></div></div></div></div><div id="36148726" class="c"><input type="checkbox" id="c-36148726" checked=""/><div class="controls bullet"><span class="by">jongjong</span><span>|</span><a href="#36147733">prev</a><span>|</span><a href="#36148769">next</a><span>|</span><label class="collapse" for="c-36148726">[-]</label><label class="expand" for="c-36148726">[1 more]</label></div><br/><div class="children"><div class="content">Why isn&#x27;t Blockchain tech used to solve the problem of domain name resolution? Why aren&#x27;t these solutions getting any traction? Tokens would serve as a built-in payment system for purchasing domain names and also as a spam prevention mechanism, it&#x27;s decentralized and therefore wouldn&#x27;t rely on any centralized authority, the incentives for running nodes would be built in... They are highly replicated and can replicate without limit which means it would be able to scale to support unlimited reads (which is what matters most when it comes to a DNS system). It would be distributed geographically and therefore could provide the fastest lookup times possible as you could run your own node to get the lowest lookups for existing domains... Also, ownership of domains would be cryptographically secured. WTF is this not getting any traction? Why aren&#x27;t browser makers adopting this or enabling Blockchain-based domain lookups by default? There are solutions like Unlimited domains but they&#x27;re not actually being rolled out...</div><br/></div></div><div id="36148769" class="c"><input type="checkbox" id="c-36148769" checked=""/><div class="controls bullet"><span class="by">rightbyte</span><span>|</span><a href="#36148726">prev</a><span>|</span><a href="#36147634">next</a><span>|</span><label class="collapse" for="c-36148769">[-]</label><label class="expand" for="c-36148769">[1 more]</label></div><br/><div class="children"><div class="content">I think the main problem is the expiration dates. Like, why do they exist? I see no point in having a ticking bomb in your setup.</div><br/></div></div><div id="36147634" class="c"><input type="checkbox" id="c-36147634" checked=""/><div class="controls bullet"><span class="by">yakkityyak</span><span>|</span><a href="#36148769">prev</a><span>|</span><a href="#36147907">next</a><span>|</span><label class="collapse" for="c-36147634">[-]</label><label class="expand" for="c-36147634">[5 more]</label></div><br/><div class="children"><div class="content">The experience around just setting up DNSSEC when I tried it on Google domains was so incredibly frustrating due to the time delays and pain points surrounding correcting mistakes.<p>Don&#x27;t know if it has gotten any better.</div><br/><div id="36147728" class="c"><input type="checkbox" id="c-36147728" checked=""/><div class="controls bullet"><span class="by">cyberax</span><span>|</span><a href="#36147634">parent</a><span>|</span><a href="#36147685">next</a><span>|</span><label class="collapse" for="c-36147728">[-]</label><label class="expand" for="c-36147728">[1 more]</label></div><br/><div class="children"><div class="content">One trick to make it easier: set all relevant TTLs to 1 minute before trying something dangerous. Plenty of resolvers ignore that, but the main ones (1.1.1.1, 8.8.8.8, etc.) respect that.</div><br/></div></div><div id="36147685" class="c"><input type="checkbox" id="c-36147685" checked=""/><div class="controls bullet"><span class="by">silisili</span><span>|</span><a href="#36147634">parent</a><span>|</span><a href="#36147728">prev</a><span>|</span><a href="#36147907">next</a><span>|</span><label class="collapse" for="c-36147685">[-]</label><label class="expand" for="c-36147685">[3 more]</label></div><br/><div class="children"><div class="content">Correcting mistakes is a pain point, but really applies to DNS as a whole rather than just DNSSEC.<p>I think a lot of the problem stems from people using really long TTLs for the keys, which used to be the standard advice.<p>That said, as someone who used to manage DNS and DNSSEC at a TLD level, I will admit that documentation and best practices are poor.  I remember asking someone why it was this way, and he told me it was because people want to make money contracting, so were less than willing to make it accessible.<p>Once you understand what&#x27;s happening, you can make a little cheat sheet and it&#x27;s actually really simple.  But it seems like everyone forges ahead their own way, myself included.</div><br/><div id="36147813" class="c"><input type="checkbox" id="c-36147813" checked=""/><div class="controls bullet"><span class="by">esaym</span><span>|</span><a href="#36147634">root</a><span>|</span><a href="#36147685">parent</a><span>|</span><a href="#36147907">next</a><span>|</span><label class="collapse" for="c-36147813">[-]</label><label class="expand" for="c-36147813">[2 more]</label></div><br/><div class="children"><div class="content">Show us your cheat sheet...</div><br/><div id="36148131" class="c"><input type="checkbox" id="c-36148131" checked=""/><div class="controls bullet"><span class="by">silisili</span><span>|</span><a href="#36147634">root</a><span>|</span><a href="#36147813">parent</a><span>|</span><a href="#36147907">next</a><span>|</span><label class="collapse" for="c-36148131">[-]</label><label class="expand" for="c-36148131">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been out of the business for seven years, and don&#x27;t have much anymore as I&#x27;ve switched jobs a few times.<p>It was mainly around process and timings.  Bind9 has a pretty good guide on it.  The easy option is to just add the new key, let everything sign, then later(after at least a TTL period, probably longer to be safe) remove the old.<p>The other way, that we did, is to publish keys before you use them, then retain the old key after the signing key swap, for a TTL period each.  That keeps the zone size small.<p>Lastly, don&#x27;t roll a KSK and ZSK at the same time.  It&#x27;s doable, but not worth the dance in any situation.<p>That said, if you have any specific questions, I&#x27;m happy to help.</div><br/></div></div></div></div></div></div></div></div><div id="36147907" class="c"><input type="checkbox" id="c-36147907" checked=""/><div class="controls bullet"><span class="by">mnd999</span><span>|</span><a href="#36147634">prev</a><span>|</span><a href="#36148636">next</a><span>|</span><label class="collapse" for="c-36147907">[-]</label><label class="expand" for="c-36147907">[1 more]</label></div><br/><div class="children"><div class="content">When I’ve enabled it in systemd.resolved it breaks every hotel &#x2F; conference centre &#x2F; airport WiFi. Maybe that’s a good thing but it’s pretty inconvenient.</div><br/></div></div><div id="36148636" class="c"><input type="checkbox" id="c-36148636" checked=""/><div class="controls bullet"><span class="by">roadiase</span><span>|</span><a href="#36147907">prev</a><span>|</span><a href="#36147652">next</a><span>|</span><label class="collapse" for="c-36148636">[-]</label><label class="expand" for="c-36148636">[1 more]</label></div><br/><div class="children"><div class="content">Dnssec is so hard to manage right</div><br/></div></div><div id="36147652" class="c"><input type="checkbox" id="c-36147652" checked=""/><div class="controls bullet"><span class="by">xvilka</span><span>|</span><a href="#36148636">prev</a><span>|</span><a href="#36147951">next</a><span>|</span><label class="collapse" for="c-36147652">[-]</label><label class="expand" for="c-36147652">[8 more]</label></div><br/><div class="children"><div class="content">We need a truly decentralized alternative, DNSSEC isn&#x27;t that.</div><br/><div id="36147672" class="c"><input type="checkbox" id="c-36147672" checked=""/><div class="controls bullet"><span class="by">silisili</span><span>|</span><a href="#36147652">parent</a><span>|</span><a href="#36147951">next</a><span>|</span><label class="collapse" for="c-36147672">[-]</label><label class="expand" for="c-36147672">[7 more]</label></div><br/><div class="children"><div class="content">DNS is de facto decentralized.  Stand up your own root, it&#x27;s that simple.<p>DNSSEC has no bearing on how centralized something is - it works the same on the current system as it would on your own new DNS system.</div><br/><div id="36147687" class="c"><input type="checkbox" id="c-36147687" checked=""/><div class="controls bullet"><span class="by">noman-land</span><span>|</span><a href="#36147652">root</a><span>|</span><a href="#36147672">parent</a><span>|</span><a href="#36147951">next</a><span>|</span><label class="collapse" for="c-36147687">[-]</label><label class="expand" for="c-36147687">[6 more]</label></div><br/><div class="children"><div class="content">Wait, what? How can I be my own certificate authority?</div><br/><div id="36147723" class="c"><input type="checkbox" id="c-36147723" checked=""/><div class="controls bullet"><span class="by">cyberax</span><span>|</span><a href="#36147652">root</a><span>|</span><a href="#36147687">parent</a><span>|</span><a href="#36147701">next</a><span>|</span><label class="collapse" for="c-36147723">[-]</label><label class="expand" for="c-36147723">[4 more]</label></div><br/><div class="children"><div class="content">Create your own root certificate, import it into your browser, and into the OS certificate store. Then just sign CSRs with this root certificate&#x27;s private key.<p>This is pretty much what all large corporations do for their internal infrastructure.</div><br/><div id="36147820" class="c"><input type="checkbox" id="c-36147820" checked=""/><div class="controls bullet"><span class="by">RandomBK</span><span>|</span><a href="#36147652">root</a><span>|</span><a href="#36147723">parent</a><span>|</span><a href="#36147841">next</a><span>|</span><label class="collapse" for="c-36147820">[-]</label><label class="expand" for="c-36147820">[2 more]</label></div><br/><div class="children"><div class="content">This of course, only works for your own internal use. I feel this disclaimer needs to be called out explicitly.<p>If you&#x27;re trying to do something that will be trusted by the global internet, you&#x27;ll need to use an official CA, ergo the complaints of DNSSEC being too &#x27;centralized&#x27;.</div><br/><div id="36147874" class="c"><input type="checkbox" id="c-36147874" checked=""/><div class="controls bullet"><span class="by">IcePic</span><span>|</span><a href="#36147652">root</a><span>|</span><a href="#36147820">parent</a><span>|</span><a href="#36147841">next</a><span>|</span><label class="collapse" for="c-36147874">[-]</label><label class="expand" for="c-36147874">[1 more]</label></div><br/><div class="children"><div class="content">Then again, what the &quot;global CAs&quot; are doing is not wholly different in a technical level than what a company with their own internal CA does, except that I hope the global CAs take security very very seriously, and they pass an expensive audit.<p>In the end, it is just some company or organisation that creates a root CA cert and intermediaries, and then jump through hoops to make browsers and OS cert stores add their certs. Not saying it is easy, just that the technical parts are rather similar, the rest being a cumbersome way to prove you are trustworthy by showing off your processes and fences around the signing boxes.</div><br/></div></div></div></div><div id="36147841" class="c"><input type="checkbox" id="c-36147841" checked=""/><div class="controls bullet"><span class="by">conradev</span><span>|</span><a href="#36147652">root</a><span>|</span><a href="#36147723">parent</a><span>|</span><a href="#36147820">prev</a><span>|</span><a href="#36147701">next</a><span>|</span><label class="collapse" for="c-36147841">[-]</label><label class="expand" for="c-36147841">[1 more]</label></div><br/><div class="children"><div class="content">and, if you have a compelling reason, you can convince other CAs to cross-sign your certificate, like LetsEncrypt did: <a href="https:&#x2F;&#x2F;letsencrypt.org&#x2F;2020&#x2F;09&#x2F;17&#x2F;new-root-and-intermediates.html" rel="nofollow">https:&#x2F;&#x2F;letsencrypt.org&#x2F;2020&#x2F;09&#x2F;17&#x2F;new-root-and-intermediate...</a><p>Browsers control what they trust, too, and can remove roots if they’re behaving poorly: <a href="https:&#x2F;&#x2F;blog.mozilla.org&#x2F;security&#x2F;2011&#x2F;08&#x2F;29&#x2F;fraudulent-google-com-certificate&#x2F;" rel="nofollow">https:&#x2F;&#x2F;blog.mozilla.org&#x2F;security&#x2F;2011&#x2F;08&#x2F;29&#x2F;fraudulent-goog...</a><p>That is to further your point: there is no central decision-maker</div><br/></div></div></div></div><div id="36147701" class="c"><input type="checkbox" id="c-36147701" checked=""/><div class="controls bullet"><span class="by">silisili</span><span>|</span><a href="#36147652">root</a><span>|</span><a href="#36147687">parent</a><span>|</span><a href="#36147723">prev</a><span>|</span><a href="#36147951">next</a><span>|</span><label class="collapse" for="c-36147701">[-]</label><label class="expand" for="c-36147701">[1 more]</label></div><br/><div class="children"><div class="content">Openssl works just fine, if you&#x27;re asking in earnest.<p>Either way, it has no bearing on DNS.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>