<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1693990869238" as="style"/><link rel="stylesheet" href="styles.css?v=1693990869238"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/YavorGIvanov/sam.cpp">Meta&#x27;s Segment Anything written with C++ / GGML</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>ariym</span> | <span>21 comments</span></div><br/><div><div id="37398892" class="c"><input type="checkbox" id="c-37398892" checked=""/><div class="controls bullet"><span class="by">ariym</span><span>|</span><a href="#37402755">next</a><span>|</span><label class="collapse" for="c-37398892">[-]</label><label class="expand" for="c-37398892">[2 more]</label></div><br/><div class="children"><div class="content">This is a port of Meta&#x27;s Segment Anything computer vision model which allows easy segmentation of shapes in images. Originally written in Python, Yavor Ivanov has ported it to C++ using the GGML library created by Georgi Gerganov which is optimized for CPU instead of GPU, specifically Apple Silicon M1&#x2F;M2. The repo is still in it&#x27;s early stage</div><br/><div id="37399391" class="c"><input type="checkbox" id="c-37399391" checked=""/><div class="controls bullet"><span class="by">dekhn</span><span>|</span><a href="#37398892">parent</a><span>|</span><a href="#37402755">next</a><span>|</span><label class="collapse" for="c-37399391">[-]</label><label class="expand" for="c-37399391">[1 more]</label></div><br/><div class="children"><div class="content">Do you know how the time to do the image embedding takes?  In SAM, most of the time is spent generating a very expensive embedding (prohibitive for real-time object detection).  From the timing on your page it looks like yours is also similarly slow, but I&#x27;m curious how it compares to the pytorch Meta implementation.</div><br/></div></div></div></div><div id="37402755" class="c"><input type="checkbox" id="c-37402755" checked=""/><div class="controls bullet"><span class="by">accurrent</span><span>|</span><a href="#37398892">prev</a><span>|</span><a href="#37400593">next</a><span>|</span><label class="collapse" for="c-37402755">[-]</label><label class="expand" for="c-37402755">[1 more]</label></div><br/><div class="children"><div class="content">Hmm wonder how this compares to stuff like FastSAM and MobileSAM. Is SAM quantized better or are those knock of architectures more performant.</div><br/></div></div><div id="37400593" class="c"><input type="checkbox" id="c-37400593" checked=""/><div class="controls bullet"><span class="by">unshavedyak</span><span>|</span><a href="#37402755">prev</a><span>|</span><a href="#37400424">next</a><span>|</span><label class="collapse" for="c-37400593">[-]</label><label class="expand" for="c-37400593">[5 more]</label></div><br/><div class="children"><div class="content">Well... damn. Is there a framework like this (or this directly?) which can run object detection? People, car types, makes, animals, etc?</div><br/><div id="37400727" class="c"><input type="checkbox" id="c-37400727" checked=""/><div class="controls bullet"><span class="by">yeldarb</span><span>|</span><a href="#37400593">parent</a><span>|</span><a href="#37400424">next</a><span>|</span><label class="collapse" for="c-37400727">[-]</label><label class="expand" for="c-37400727">[4 more]</label></div><br/><div class="children"><div class="content">Yes, GroundingDINO is an open set object detector. There are some others (eg DETIC and OWL-ViT) as well.<p>We’ve been working on using them (often in conjunction with SAM) for auto-labeling datasets to train smaller faster models that can run in real-time at the edge: <a href="https:&#x2F;&#x2F;github.com&#x2F;autodistill&#x2F;autodistill">https:&#x2F;&#x2F;github.com&#x2F;autodistill&#x2F;autodistill</a></div><br/><div id="37401272" class="c"><input type="checkbox" id="c-37401272" checked=""/><div class="controls bullet"><span class="by">fiddlerwoaroof</span><span>|</span><a href="#37400593">root</a><span>|</span><a href="#37400727">parent</a><span>|</span><a href="#37401109">next</a><span>|</span><label class="collapse" for="c-37401272">[-]</label><label class="expand" for="c-37401272">[2 more]</label></div><br/><div class="children"><div class="content">Would this be suitable for labeling images to search by keyword (think Apple Photos-like “car” searches to pull up photos of cars)</div><br/><div id="37402195" class="c"><input type="checkbox" id="c-37402195" checked=""/><div class="controls bullet"><span class="by">lulurennt</span><span>|</span><a href="#37400593">root</a><span>|</span><a href="#37401272">parent</a><span>|</span><a href="#37401109">next</a><span>|</span><label class="collapse" for="c-37402195">[-]</label><label class="expand" for="c-37402195">[1 more]</label></div><br/><div class="children"><div class="content">I think you would want to use something like CLIP embeddings for image search.<p>Really enjoyed using this app for iOS: <a href="https:&#x2F;&#x2F;github.com&#x2F;mazzzystar&#x2F;Queryable">https:&#x2F;&#x2F;github.com&#x2F;mazzzystar&#x2F;Queryable</a>
HN discussion: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=34686947">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=34686947</a><p>Or explore the dataset stable diffusion was trained on: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=32655497">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=32655497</a></div><br/></div></div></div></div></div></div></div></div><div id="37400424" class="c"><input type="checkbox" id="c-37400424" checked=""/><div class="controls bullet"><span class="by">artninja1988</span><span>|</span><a href="#37400593">prev</a><span>|</span><a href="#37401872">next</a><span>|</span><label class="collapse" for="c-37400424">[-]</label><label class="expand" for="c-37400424">[2 more]</label></div><br/><div class="children"><div class="content">Big fan of your work GGML friends</div><br/><div id="37402099" class="c"><input type="checkbox" id="c-37402099" checked=""/><div class="controls bullet"><span class="by">lelag</span><span>|</span><a href="#37400424">parent</a><span>|</span><a href="#37401872">next</a><span>|</span><label class="collapse" for="c-37402099">[-]</label><label class="expand" for="c-37402099">[1 more]</label></div><br/><div class="children"><div class="content">Another GGML model port that I&#x27;m pretty excited about is <a href="https:&#x2F;&#x2F;github.com&#x2F;PABannier&#x2F;bark.cpp">https:&#x2F;&#x2F;github.com&#x2F;PABannier&#x2F;bark.cpp</a>.<p>The Bark python model is very compute intensive and require a powerful GPU to get bearable inference speed. I really hope that bark.cpp with GPU&#x2F;Metal support and quanticized model can bring useful inference speed on a laptop in the near future.</div><br/></div></div></div></div><div id="37401872" class="c"><input type="checkbox" id="c-37401872" checked=""/><div class="controls bullet"><span class="by">IshKebab</span><span>|</span><a href="#37400424">prev</a><span>|</span><a href="#37400118">next</a><span>|</span><label class="collapse" for="c-37401872">[-]</label><label class="expand" for="c-37401872">[6 more]</label></div><br/><div class="children"><div class="content">I&#x27;m so glad the AI community is finally starting to ditch Python. It has held progress back for far too long.</div><br/><div id="37402049" class="c"><input type="checkbox" id="c-37402049" checked=""/><div class="controls bullet"><span class="by">lelag</span><span>|</span><a href="#37401872">parent</a><span>|</span><a href="#37402034">next</a><span>|</span><label class="collapse" for="c-37402049">[-]</label><label class="expand" for="c-37402049">[1 more]</label></div><br/><div class="children"><div class="content">The AI community is nowhere close to ditching Python. Most model development and training still use python based toolchains (torch, tf...). The new trends is for popular and useful models to be ported to more efficient stack like C++&#x2F;GGML for easier usage and inference speed on consumer hardware.<p>Another popular optimisation is to port models to WASM + GPU because it makes them easy to support a variety of platforms (desktop, mobile...) with a single API and it can still offer great performance (see Google&#x27;s mediapipe as an exemple of that).</div><br/></div></div><div id="37402034" class="c"><input type="checkbox" id="c-37402034" checked=""/><div class="controls bullet"><span class="by">dbmikus</span><span>|</span><a href="#37401872">parent</a><span>|</span><a href="#37402049">prev</a><span>|</span><a href="#37402393">next</a><span>|</span><label class="collapse" for="c-37402034">[-]</label><label class="expand" for="c-37402034">[2 more]</label></div><br/><div class="children"><div class="content">How has Python held it back? Most of the heavy computation lifting is done by C extensions&#x2F;bindings and the models are compiled to run on CUDA, etc. What am I missing?</div><br/><div id="37402417" class="c"><input type="checkbox" id="c-37402417" checked=""/><div class="controls bullet"><span class="by">lhl</span><span>|</span><a href="#37401872">root</a><span>|</span><a href="#37402034">parent</a><span>|</span><a href="#37402393">next</a><span>|</span><label class="collapse" for="c-37402417">[-]</label><label class="expand" for="c-37402417">[1 more]</label></div><br/><div class="children"><div class="content">Presumably what you&#x27;re missing is that it&#x27;s that IshKebab probably doesn&#x27;t work in AI&#x2F;ML at all (no links in his profile, but you can judge his post history yourself). Anyone can have voice opinion, but that doesn&#x27;t mean it&#x27;s particularly well informed.</div><br/></div></div></div></div><div id="37402393" class="c"><input type="checkbox" id="c-37402393" checked=""/><div class="controls bullet"><span class="by">fsloth</span><span>|</span><a href="#37401872">parent</a><span>|</span><a href="#37402034">prev</a><span>|</span><a href="#37402333">next</a><span>|</span><label class="collapse" for="c-37402393">[-]</label><label class="expand" for="c-37402393">[1 more]</label></div><br/><div class="children"><div class="content">In general if you don&#x27;t know what you are doing, it&#x27;s much faster to first figure out a good strategy for a solution in a language that does not suffer from all of the encumbrance C++ brings in.<p>Python is really great for fast prototyping. It can be argued most AI products so far are result of fast prototyping. So not sure if there is anything wrong with that.<p>As practical models emerge, at that point it indeed makes sense to port them to C++. But I would not in my wildest dreams suggest prototyping a data model in C++ unless absolutely necessary.</div><br/></div></div><div id="37402333" class="c"><input type="checkbox" id="c-37402333" checked=""/><div class="controls bullet"><span class="by">Havoc</span><span>|</span><a href="#37401872">parent</a><span>|</span><a href="#37402393">prev</a><span>|</span><a href="#37400118">next</a><span>|</span><label class="collapse" for="c-37402333">[-]</label><label class="expand" for="c-37402333">[1 more]</label></div><br/><div class="children"><div class="content">I’d say discovery and innovation would be slower in a less relaxed language. And speed end up comparable thanks to the compiled parts of python</div><br/></div></div></div></div><div id="37400118" class="c"><input type="checkbox" id="c-37400118" checked=""/><div class="controls bullet"><span class="by">farhanhubble</span><span>|</span><a href="#37401872">prev</a><span>|</span><label class="collapse" for="c-37400118">[-]</label><label class="expand" for="c-37400118">[4 more]</label></div><br/><div class="children"><div class="content">While I love the efficiency from these Python to C++ ports I can&#x27;t stop thinking about the long tail of subtle bugs that will likely infest these libraries forever but then the Python versions also sit atop C&#x2F;C++ cores</div><br/><div id="37401499" class="c"><input type="checkbox" id="c-37401499" checked=""/><div class="controls bullet"><span class="by">wmf</span><span>|</span><a href="#37400118">parent</a><span>|</span><a href="#37402075">next</a><span>|</span><label class="collapse" for="c-37401499">[-]</label><label class="expand" for="c-37401499">[1 more]</label></div><br/><div class="children"><div class="content">Good news! Deep learning inherently has a long tail of subtle bugs (SolidGoldMagikarp anyone?) so no one will care if C++ introduces a few more.</div><br/></div></div><div id="37402075" class="c"><input type="checkbox" id="c-37402075" checked=""/><div class="controls bullet"><span class="by">hoseja</span><span>|</span><a href="#37400118">parent</a><span>|</span><a href="#37401499">prev</a><span>|</span><a href="#37400599">next</a><span>|</span><label class="collapse" for="c-37402075">[-]</label><label class="expand" for="c-37402075">[1 more]</label></div><br/><div class="children"><div class="content">Just because Python silently ignores the bugs doesn&#x27;t mean they&#x27;re not there.</div><br/></div></div></div></div></div></div></div></div></div></body></html>