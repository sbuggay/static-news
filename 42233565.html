<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1732611672515" as="style"/><link rel="stylesheet" href="styles.css?v=1732611672515"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://articles.foletta.org/post/2024-01-08-a-day-in-the-life-the-bgp-table/">A Day in the Life: The Global BGP Table</a> <span class="domain">(<a href="https://articles.foletta.org">articles.foletta.org</a>)</span></div><div class="subtext"><span>gjf</span> | <span>20 comments</span></div><br/><div><div id="42237494" class="c"><input type="checkbox" id="c-42237494" checked=""/><div class="controls bullet"><span class="by">chriscjcj</span><span>|</span><a href="#42235932">next</a><span>|</span><label class="collapse" for="c-42237494">[-]</label><label class="expand" for="c-42237494">[5 more]</label></div><br/><div class="children"><div class="content">25 years ago, I worked for a small ISP (back when there was such a thing.) When I started there, we had one upstream ISP. I was charged with getting us multihomed. I found some tutorials written by Avi Freedman (1). I don&#x27;t know what I would have done without him. He made an intimidating topic approachable. Thanks to him, I got us a &#x2F;20 from ARIN and advertised our routes to two different peers. It was fascinating to learn how it all worked. And the more I learned about it, the more amazed I was that it worked at all.<p>(1) <a href="http:&#x2F;&#x2F;avi.freedman.net&#x2F;" rel="nofollow">http:&#x2F;&#x2F;avi.freedman.net&#x2F;</a><p>Avi</div><br/><div id="42240330" class="c"><input type="checkbox" id="c-42240330" checked=""/><div class="controls bullet"><span class="by">avifreedman</span><span>|</span><a href="#42237494">parent</a><span>|</span><a href="#42237729">next</a><span>|</span><label class="collapse" for="c-42240330">[-]</label><label class="expand" for="c-42240330">[2 more]</label></div><br/><div class="children"><div class="content">Thanks!<p>Like the human body the more you study the Internet the more amazing it is not that it sometimes breaks, but that it works at all. Especially for video&#x2F;phone&#x2F;etc.<p>Glad the content was helpful, I have links to some of them at avi.net (tutorials and old Boardwatch articles).<p>I swear my motive was pure (frustration with the content out there) but it was easy to see back then that helping people out with good content yields rewards (&quot;Can I buy a T1?&quot;) or (&quot;Come run my big global network&quot;). So I still encourage everyone to write about what&#x27;s confusing and frustrating...</div><br/><div id="42242391" class="c"><input type="checkbox" id="c-42242391" checked=""/><div class="controls bullet"><span class="by">chriscjcj</span><span>|</span><a href="#42237494">root</a><span>|</span><a href="#42240330">parent</a><span>|</span><a href="#42237729">next</a><span>|</span><label class="collapse" for="c-42242391">[-]</label><label class="expand" for="c-42242391">[1 more]</label></div><br/><div class="children"><div class="content">I think I sent you an e-mail back then, but let me take this opportunity to heap a bunch of praise and gratitude upon you in front of God and everybody. I bought several books on BGP at the time and slogged through them, but it was intimidating and I had a lot of trouble putting the pieces together. Your tutorials were simple, straightforward and helped me an awful lot. And the other thing about the way you wrote them that I really appreciated was that you didn&#x27;t make me feel inferior for not knowing WTF I was doing. Thanks Avi. From time to time, I think back on the challenges I had in my life&#x2F;career and I&#x27;m grateful for the people who helped me. You&#x27;re definitely on that list, sir.</div><br/></div></div></div></div><div id="42237729" class="c"><input type="checkbox" id="c-42237729" checked=""/><div class="controls bullet"><span class="by">nickstinemates</span><span>|</span><a href="#42237494">parent</a><span>|</span><a href="#42240330">prev</a><span>|</span><a href="#42241946">next</a><span>|</span><label class="collapse" for="c-42237729">[-]</label><label class="expand" for="c-42237729">[1 more]</label></div><br/><div class="children"><div class="content">I used to work for Avi at Kentik. He is a smart, nice person and remembered writing these articles fondly to help people out!</div><br/></div></div><div id="42241946" class="c"><input type="checkbox" id="c-42241946" checked=""/><div class="controls bullet"><span class="by">aspenmayer</span><span>|</span><a href="#42237494">parent</a><span>|</span><a href="#42237729">prev</a><span>|</span><a href="#42235932">next</a><span>|</span><label class="collapse" for="c-42241946">[-]</label><label class="expand" for="c-42241946">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Avi<p>Somewhat off-topic, I’ve noticed on HN that sometimes comments end with single word on a newline, like you have done here.<p>Did your comment get truncated somehow, or did you mess up a copy&#x2F;paste, or what?<p>Has anyone else noticed this? Is this a telltale sign of generated comments, or other tool usage?<p>I’ve only noticed this on HN, and maybe Reddit once? It happens somewhat more regularly than I can attribute to mere coincidence or accident.</div><br/></div></div></div></div><div id="42235932" class="c"><input type="checkbox" id="c-42235932" checked=""/><div class="controls bullet"><span class="by">kortilla</span><span>|</span><a href="#42237494">prev</a><span>|</span><a href="#42235628">next</a><span>|</span><label class="collapse" for="c-42235932">[-]</label><label class="expand" for="c-42235932">[4 more]</label></div><br/><div class="children"><div class="content">Nice article.<p>That flapping from EpicUp 140.99.244.0&#x2F;23 prefix should have been subject to route dampening. This is per peer or per prefix rate limiting typically enforced on all peers by ISPs to prevent this exact issue of a single prefix making up a significant portion of the global BGP churn.<p>I’m unconvinced of the correlation between the updates that the author attributed to knock on effects. It would be pretty janky to have your advertisements be based on the path to other autonomous systems’ prefixes, especially unstable ones.<p>I don’t think there is a 40 minute periodicity either (at least there wasn’t 8 years ago when I was deep in the BGP world). Smells like what this dataset happened to show either by luck or because of the network the author was getting the BGP feed from.<p>If you dig into the data and look at which AS’s and prefixes are experiencing changes, you’ll find it’s all over the place and there isn’t really any bigger pattern.<p>On any given day there are usually a few noisy ISPs because of bad circuits or misconfigurations. Then there are new prefixes flapping in and out as a new thing is brought online for the first time, etc. Then sprinkle in path changes for regular draining maintenance, etc.<p>It’s simultaneously both fascinating and a little horrifying how a little ISP in Kansas experiencing a fiber consuming backhoe shows up on routers in Perth. Yet the frequency of updates is kept to &lt;10hz globally through tons of hand tuned policies.</div><br/><div id="42238438" class="c"><input type="checkbox" id="c-42238438" checked=""/><div class="controls bullet"><span class="by">benjojo12</span><span>|</span><a href="#42235932">parent</a><span>|</span><a href="#42235628">next</a><span>|</span><label class="collapse" for="c-42238438">[-]</label><label class="expand" for="c-42238438">[3 more]</label></div><br/><div class="children"><div class="content">Route dampening has mostly fallen out of fashion with networks these days.<p>Most setups were horribly misconfigured and (most) routers are no longer extremely CPU starved as they once were, That doesn&#x27;t mean that it does not still exist of course, when I did bgp battleships ( <a href="https:&#x2F;&#x2F;blog.benjojo.co.uk&#x2F;post&#x2F;bgp-battleships" rel="nofollow">https:&#x2F;&#x2F;blog.benjojo.co.uk&#x2F;post&#x2F;bgp-battleships</a> ) I found that 3356 (at the time) was doing route dampening, so play had to be paused for a while.</div><br/><div id="42239670" class="c"><input type="checkbox" id="c-42239670" checked=""/><div class="controls bullet"><span class="by">kortilla</span><span>|</span><a href="#42235932">root</a><span>|</span><a href="#42238438">parent</a><span>|</span><a href="#42235628">next</a><span>|</span><label class="collapse" for="c-42239670">[-]</label><label class="expand" for="c-42239670">[2 more]</label></div><br/><div class="children"><div class="content">That seems crazy to me. What guardrails are there against a single hacked router pumping 10000 path changes&#x2F;sec?</div><br/><div id="42240811" class="c"><input type="checkbox" id="c-42240811" checked=""/><div class="controls bullet"><span class="by">gjf</span><span>|</span><a href="#42235932">root</a><span>|</span><a href="#42239670">parent</a><span>|</span><a href="#42235628">next</a><span>|</span><label class="collapse" for="c-42240811">[-]</label><label class="expand" for="c-42240811">[1 more]</label></div><br/><div class="children"><div class="content">The direct peering to the router is likely going to have a bad time, but route advertisement interval I mention in the article is going to coalesce all of those updates together. Downstream peers would only see the one update every 30 seconds (or so).</div><br/></div></div></div></div></div></div></div></div><div id="42235628" class="c"><input type="checkbox" id="c-42235628" checked=""/><div class="controls bullet"><span class="by">throw0101a</span><span>|</span><a href="#42235932">prev</a><span>|</span><a href="#42238456">next</a><span>|</span><label class="collapse" for="c-42235628">[-]</label><label class="expand" for="c-42235628">[1 more]</label></div><br/><div class="children"><div class="content">If anyone wants to learn about BGP (especially day-to-day stuff for peering scenarios), the Network Startup Resource Center out of U.Oregon has a good series of videos going through things:<p>* <a href="https:&#x2F;&#x2F;learn.nsrc.org&#x2F;bgp" rel="nofollow">https:&#x2F;&#x2F;learn.nsrc.org&#x2F;bgp</a></div><br/></div></div><div id="42238456" class="c"><input type="checkbox" id="c-42238456" checked=""/><div class="controls bullet"><span class="by">benjojo12</span><span>|</span><a href="#42235628">prev</a><span>|</span><a href="#42241762">next</a><span>|</span><label class="collapse" for="c-42238456">[-]</label><label class="expand" for="c-42238456">[1 more]</label></div><br/><div class="children"><div class="content">Based on some quick sleuthing, I would assume that the 0xff reserved BGP attribute is likely a huawei quirk. Almost all of the 0xff&#x27;s visible to bgp.tools (hi) follow the same format as the one in the post, and some of those networks with them seem to be running huawei kit.</div><br/></div></div><div id="42241762" class="c"><input type="checkbox" id="c-42241762" checked=""/><div class="controls bullet"><span class="by">clbrmbr</span><span>|</span><a href="#42238456">prev</a><span>|</span><a href="#42234128">next</a><span>|</span><label class="collapse" for="c-42241762">[-]</label><label class="expand" for="c-42241762">[1 more]</label></div><br/><div class="children"><div class="content">I once designed and configured a satellite-microwave hybrid network for a large US customer with field offices around Borneo. I’ll never forget making the leased line handoffs back in Jakarta. I had exactly zero experience doing this so I googled around and read that BGP is what you would use to connect between our OSPF&#x2F;UBNT net and their IGRP&#x2F;Cisco corporate WAN. When asked to configure BGP on their routers, the guys from Tata were like “what do you think you are AT&amp;T or something?” We did kind of feel that way until one season of lightning strikes took out most of our AirFibers.</div><br/></div></div><div id="42234128" class="c"><input type="checkbox" id="c-42234128" checked=""/><div class="controls bullet"><span class="by">CJefferson</span><span>|</span><a href="#42241762">prev</a><span>|</span><a href="#42237482">next</a><span>|</span><label class="collapse" for="c-42234128">[-]</label><label class="expand" for="c-42234128">[1 more]</label></div><br/><div class="children"><div class="content">I learnt quite a few things I didn’t know about BGP from this article, probably most interesting how chaotic it is!<p>I’d definitely be interested to read some follow-ups, diving into more details.</div><br/></div></div><div id="42237482" class="c"><input type="checkbox" id="c-42237482" checked=""/><div class="controls bullet"><span class="by">zokier</span><span>|</span><a href="#42234128">prev</a><span>|</span><a href="#42237033">next</a><span>|</span><label class="collapse" for="c-42237482">[-]</label><label class="expand" for="c-42237482">[4 more]</label></div><br/><div class="children"><div class="content">What is the easiest way for average joe to get hands on BGP data? If I wanted to try do similar analysis and don&#x27;t happen to have a friend at ISP.</div><br/><div id="42237582" class="c"><input type="checkbox" id="c-42237582" checked=""/><div class="controls bullet"><span class="by">throw0101a</span><span>|</span><a href="#42237482">parent</a><span>|</span><a href="#42238908">next</a><span>|</span><label class="collapse" for="c-42237582">[-]</label><label class="expand" for="c-42237582">[1 more]</label></div><br/><div class="children"><div class="content">* <a href="http:&#x2F;&#x2F;archive.routeviews.org" rel="nofollow">http:&#x2F;&#x2F;archive.routeviews.org</a><p>* <a href="https:&#x2F;&#x2F;www.ripe.net&#x2F;analyse&#x2F;internet-measurements&#x2F;routing-information-service-ris&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.ripe.net&#x2F;analyse&#x2F;internet-measurements&#x2F;routing-i...</a><p>* <a href="https:&#x2F;&#x2F;lukasz.bromirski.net&#x2F;post&#x2F;bgp-w-labie-3&#x2F;" rel="nofollow">https:&#x2F;&#x2F;lukasz.bromirski.net&#x2F;post&#x2F;bgp-w-labie-3&#x2F;</a></div><br/></div></div><div id="42238908" class="c"><input type="checkbox" id="c-42238908" checked=""/><div class="controls bullet"><span class="by">mike_d</span><span>|</span><a href="#42237482">parent</a><span>|</span><a href="#42237582">prev</a><span>|</span><a href="#42237033">next</a><span>|</span><label class="collapse" for="c-42238908">[-]</label><label class="expand" for="c-42238908">[2 more]</label></div><br/><div class="children"><div class="content">I have had a project on the back burner for about a year now to offer a BGP feed via a websocket to facilitate people playing around and doing research without allowing them to accidently spew crap into the DFZ. Shoot me an email if you are interested and I&#x27;ll try to get it spun up this week.</div><br/><div id="42239113" class="c"><input type="checkbox" id="c-42239113" checked=""/><div class="controls bullet"><span class="by">icedchai</span><span>|</span><a href="#42237482">root</a><span>|</span><a href="#42238908">parent</a><span>|</span><a href="#42237033">next</a><span>|</span><label class="collapse" for="c-42239113">[-]</label><label class="expand" for="c-42239113">[1 more]</label></div><br/><div class="children"><div class="content">Generally, your upstream won&#x27;t allow you to spew crap. Route filters are in place. I run a small AS for hobbyist purposes and all my upstreams are locked down.</div><br/></div></div></div></div></div></div><div id="42237033" class="c"><input type="checkbox" id="c-42237033" checked=""/><div class="controls bullet"><span class="by">nhggfu</span><span>|</span><a href="#42237482">prev</a><span>|</span><a href="#42241565">next</a><span>|</span><label class="collapse" for="c-42237033">[-]</label><label class="expand" for="c-42237033">[1 more]</label></div><br/><div class="children"><div class="content">&#x2F;me thinks to himself : real nice font on that page</div><br/></div></div><div id="42241565" class="c"><input type="checkbox" id="c-42241565" checked=""/><div class="controls bullet"><span class="by">motohagiography</span><span>|</span><a href="#42237033">prev</a><span>|</span><label class="collapse" for="c-42241565">[-]</label><label class="expand" for="c-42241565">[1 more]</label></div><br/><div class="children"><div class="content">&gt; What is apparent in both the path and IP space changes over time is that there is some sort of cyclic behaviour in the IPv4 updates.<p>does this imply the internet has something akin to <i>tides</i> ?</div><br/></div></div></div></div></div></div></div></body></html>