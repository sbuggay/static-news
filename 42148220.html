<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1731747659969" as="style"/><link rel="stylesheet" href="styles.css?v=1731747659969"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/pex-tool/pex">Pex: A tool for generating .pex (Python EXecutable) files, lock files and venvs</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>eamag</span> | <span>57 comments</span></div><br/><div><div id="42149918" class="c"><input type="checkbox" id="c-42149918" checked=""/><div class="controls bullet"><span class="by">glass-z13</span><span>|</span><a href="#42149914">next</a><span>|</span><label class="collapse" for="c-42149918">[-]</label><label class="expand" for="c-42149918">[21 more]</label></div><br/><div class="children"><div class="content">I used python to write a small utility that i wanted to share with a coworker, ended up having to rewrite it in Go because i spent 3 hours trying to compile the python version to an exe so that it was easier to run on their machine.<p>I wonder why isn&#x27;t there an easy way to just package the interpreter inside an EXE for people that don&#x27;t care about binary size just so that it would make it seamless to package up utilities written in python.</div><br/><div id="42152607" class="c"><input type="checkbox" id="c-42152607" checked=""/><div class="controls bullet"><span class="by">marginalia_nu</span><span>|</span><a href="#42149918">parent</a><span>|</span><a href="#42153548">next</a><span>|</span><label class="collapse" for="c-42152607">[-]</label><label class="expand" for="c-42152607">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s kind of frustrating to deal with python stuff as an user.  I wish it didn&#x27;t have to be like this, because there&#x27;s a lot of interesting stuff written in python that&#x27;s nearly impossible to get to run.<p>There are too many environemnt systems (conda, venv, I think I&#x27;m forgetting one more), not all of them build or ship on all systems, then you need to manage them, and sometimes to have the exact correct python version installed because god help you if you&#x27;re on 3.12 and not 3.11; and set as PATH for pip to find the correct dependencies, but you need to do that before you set up your venv and run pip, otherwise you need to tear that down and star tover.  Sometimes the dependencies build, and break, because some package is missing from your system.<p>It&#x27;s kind of a miserable experience.</div><br/><div id="42155364" class="c"><input type="checkbox" id="c-42155364" checked=""/><div class="controls bullet"><span class="by">networked</span><span>|</span><a href="#42149918">root</a><span>|</span><a href="#42152607">parent</a><span>|</span><a href="#42153548">next</a><span>|</span><label class="collapse" for="c-42155364">[-]</label><label class="expand" for="c-42155364">[1 more]</label></div><br/><div class="children"><div class="content">[delayed]</div><br/></div></div></div></div><div id="42153548" class="c"><input type="checkbox" id="c-42153548" checked=""/><div class="controls bullet"><span class="by">faizshah</span><span>|</span><a href="#42149918">parent</a><span>|</span><a href="#42152607">prev</a><span>|</span><a href="#42150842">next</a><span>|</span><label class="collapse" for="c-42153548">[-]</label><label class="expand" for="c-42153548">[1 more]</label></div><br/><div class="children"><div class="content">PyApp is really good for this: <a href="https:&#x2F;&#x2F;github.com&#x2F;ofek&#x2F;pyapp">https:&#x2F;&#x2F;github.com&#x2F;ofek&#x2F;pyapp</a><p>It is just a way to wrap your python code into a self bootstrapping executable: <a href="https:&#x2F;&#x2F;ofek.dev&#x2F;pyapp&#x2F;latest&#x2F;runtime&#x2F;" rel="nofollow">https:&#x2F;&#x2F;ofek.dev&#x2F;pyapp&#x2F;latest&#x2F;runtime&#x2F;</a><p>You can get it setup pretty easily with hatch: <a href="https:&#x2F;&#x2F;hatch.pypa.io&#x2F;1.9&#x2F;plugins&#x2F;builder&#x2F;app&#x2F;" rel="nofollow">https:&#x2F;&#x2F;hatch.pypa.io&#x2F;1.9&#x2F;plugins&#x2F;builder&#x2F;app&#x2F;</a><p>But yea I agree the problem with python is there isn’t a tool like deno that just does everything that has to do with packaging, locking, venvs, and building a cross platform binary.</div><br/></div></div><div id="42150842" class="c"><input type="checkbox" id="c-42150842" checked=""/><div class="controls bullet"><span class="by">toprerules</span><span>|</span><a href="#42149918">parent</a><span>|</span><a href="#42153548">prev</a><span>|</span><a href="#42152113">next</a><span>|</span><label class="collapse" for="c-42150842">[-]</label><label class="expand" for="c-42150842">[1 more]</label></div><br/><div class="children"><div class="content">I also end up avoiding python not because it&#x27;s a bad language, but because it&#x27;s so much more convenient to work with compiled artifacts that worry about shipping around a bunch of source or object files and a full compiler. Not to mention the speed of using Go and the ability to write concurrent code without a lot of effort.<p>The only time I really use python is when I need a quick and dirty script.</div><br/></div></div><div id="42152113" class="c"><input type="checkbox" id="c-42152113" checked=""/><div class="controls bullet"><span class="by">rcleveng</span><span>|</span><a href="#42149918">parent</a><span>|</span><a href="#42150842">prev</a><span>|</span><a href="#42150154">next</a><span>|</span><label class="collapse" for="c-42152113">[-]</label><label class="expand" for="c-42152113">[4 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve come to realize that putting everything into a container is the only viable way to share a python program.<p>I&#x27;ll certainly checkout PEX, I think that distribution of a binary is likely the largest one for Python right now.  Java solved it with a JAR file, static-compiled binaries for most compiled languages.<p>At Google PAR files have been quite a useful way to handle this for at least 18 years now, hope this can get reasonably solved everywhere.</div><br/><div id="42154970" class="c"><input type="checkbox" id="c-42154970" checked=""/><div class="controls bullet"><span class="by">SoothingSorbet</span><span>|</span><a href="#42149918">root</a><span>|</span><a href="#42152113">parent</a><span>|</span><a href="#42155194">next</a><span>|</span><label class="collapse" for="c-42154970">[-]</label><label class="expand" for="c-42154970">[2 more]</label></div><br/><div class="children"><div class="content">&gt;  Java solved it with a JAR file<p>JARs still require a JRE to run, and the runtime needs to be invoked. The equivalent would probably be a Python zipapp (which are just Python files zipped into a .pyz the interpreter can run).<p>Static binaries are one advantage that languages like Go and Rust have though, yeah.</div><br/><div id="42155341" class="c"><input type="checkbox" id="c-42155341" checked=""/><div class="controls bullet"><span class="by">fire_lake</span><span>|</span><a href="#42149918">root</a><span>|</span><a href="#42154970">parent</a><span>|</span><a href="#42155194">next</a><span>|</span><label class="collapse" for="c-42155341">[-]</label><label class="expand" for="c-42155341">[1 more]</label></div><br/><div class="children"><div class="content">You can bundle a JRE with a JAR to get a self contained executable.<p>Also don’t forget that many compiled languages depend on a particular libc so you’re not totally in the clear there.</div><br/></div></div></div></div><div id="42155194" class="c"><input type="checkbox" id="c-42155194" checked=""/><div class="controls bullet"><span class="by">forrestthewoods</span><span>|</span><a href="#42149918">root</a><span>|</span><a href="#42152113">parent</a><span>|</span><a href="#42154970">prev</a><span>|</span><a href="#42150154">next</a><span>|</span><label class="collapse" for="c-42155194">[-]</label><label class="expand" for="c-42155194">[1 more]</label></div><br/><div class="children"><div class="content">Docker exists because running a Python program is so brutally difficult that packaging up half an OS is the only way to reliably run them.</div><br/></div></div></div></div><div id="42150154" class="c"><input type="checkbox" id="c-42150154" checked=""/><div class="controls bullet"><span class="by">dbaupp</span><span>|</span><a href="#42149918">parent</a><span>|</span><a href="#42152113">prev</a><span>|</span><a href="#42151315">next</a><span>|</span><label class="collapse" for="c-42150154">[-]</label><label class="expand" for="c-42150154">[1 more]</label></div><br/><div class="children"><div class="content">As of a few months ago, pex supports including an interpreter, either directly inline or lazily downloaded (and cached): <a href="https:&#x2F;&#x2F;docs.pex-tool.org&#x2F;scie.html" rel="nofollow">https:&#x2F;&#x2F;docs.pex-tool.org&#x2F;scie.html</a></div><br/></div></div><div id="42151315" class="c"><input type="checkbox" id="c-42151315" checked=""/><div class="controls bullet"><span class="by">quietbritishjim</span><span>|</span><a href="#42149918">parent</a><span>|</span><a href="#42150154">prev</a><span>|</span><a href="#42152392">next</a><span>|</span><label class="collapse" for="c-42151315">[-]</label><label class="expand" for="c-42151315">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s probably on the list that you&#x27;ve tried, but I&#x27;ve had most luck with Nuitka (in standalone mode, not onefile). Unlike pyinstaller, it really is the executable it claims to be, not just an elaborate zip file containing python.exe and your source files.</div><br/><div id="42154415" class="c"><input type="checkbox" id="c-42154415" checked=""/><div class="controls bullet"><span class="by">Zamiel_Snawley</span><span>|</span><a href="#42149918">root</a><span>|</span><a href="#42151315">parent</a><span>|</span><a href="#42152392">next</a><span>|</span><label class="collapse" for="c-42154415">[-]</label><label class="expand" for="c-42154415">[1 more]</label></div><br/><div class="children"><div class="content">Nuitka(and a couple other python distribution techniques) tripped my employer’s antivirus.<p>The packaging&#x2F;deployment of python keeps me from using it for anything other than one-off, disposable programs.</div><br/></div></div></div></div><div id="42152392" class="c"><input type="checkbox" id="c-42152392" checked=""/><div class="controls bullet"><span class="by">BerislavLopac</span><span>|</span><a href="#42149918">parent</a><span>|</span><a href="#42151315">prev</a><span>|</span><a href="#42149940">next</a><span>|</span><label class="collapse" for="c-42152392">[-]</label><label class="expand" for="c-42152392">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve always been curious why Nim never took off as the solution for use cases like this. It combines the simplicity and clarity of Python-like syntax with the performance of a natively compiled language, which looks like the best of both worlds.</div><br/><div id="42153746" class="c"><input type="checkbox" id="c-42153746" checked=""/><div class="controls bullet"><span class="by">dudus</span><span>|</span><a href="#42149918">root</a><span>|</span><a href="#42152392">parent</a><span>|</span><a href="#42149940">next</a><span>|</span><label class="collapse" for="c-42153746">[-]</label><label class="expand" for="c-42153746">[2 more]</label></div><br/><div class="children"><div class="content">Python strength is not the syntax but the standard and 3rd party libraries.</div><br/><div id="42154777" class="c"><input type="checkbox" id="c-42154777" checked=""/><div class="controls bullet"><span class="by">og_kalu</span><span>|</span><a href="#42149918">root</a><span>|</span><a href="#42153746">parent</a><span>|</span><a href="#42149940">next</a><span>|</span><label class="collapse" for="c-42154777">[-]</label><label class="expand" for="c-42154777">[1 more]</label></div><br/><div class="children"><div class="content">3rd party libraries don&#x27;t spring from nowhere. And no language starts having one in abundance. People have to be motivated enough to write all those libraries in the first place and a lot of them are written just to use python syntax over C Code.<p>I&#x27;m not saying it&#x27;s the only reason to choose python now but it&#x27;s definitely among the biggest reasons.</div><br/></div></div></div></div></div></div><div id="42149940" class="c"><input type="checkbox" id="c-42149940" checked=""/><div class="controls bullet"><span class="by">Esgrove</span><span>|</span><a href="#42149918">parent</a><span>|</span><a href="#42152392">prev</a><span>|</span><a href="#42149914">next</a><span>|</span><label class="collapse" for="c-42149940">[-]</label><label class="expand" for="c-42149940">[6 more]</label></div><br/><div class="children"><div class="content">There is: PyInstaller</div><br/><div id="42149978" class="c"><input type="checkbox" id="c-42149978" checked=""/><div class="controls bullet"><span class="by">glass-z13</span><span>|</span><a href="#42149918">root</a><span>|</span><a href="#42149940">parent</a><span>|</span><a href="#42150888">next</a><span>|</span><label class="collapse" for="c-42149978">[-]</label><label class="expand" for="c-42149978">[4 more]</label></div><br/><div class="children"><div class="content">Seems like i have it in my browsing history, i remember not being able to run the executable it produced, not being able to find a library it was supposed to have. This was just using the default &quot;pyinstaller your_program.py&quot;, and i was frustrated enough to not go deeper into why that was. Will definitely give it a try again in the future</div><br/><div id="42151217" class="c"><input type="checkbox" id="c-42151217" checked=""/><div class="controls bullet"><span class="by">WhyCause</span><span>|</span><a href="#42149918">root</a><span>|</span><a href="#42149978">parent</a><span>|</span><a href="#42150380">next</a><span>|</span><label class="collapse" for="c-42151217">[-]</label><label class="expand" for="c-42151217">[1 more]</label></div><br/><div class="children"><div class="content">PyInstaller-made executables also used to have a habit of getting flagged by security software as malicious (maybe that&#x27;s why you couldn&#x27;t run it?) -- apparently, so many malware writers used it that it ruined the party for everyone.<p>Fortunately, that was only the 32-bit version of Python 2.7.  Using 64-bit versions or Python 3 was enough to not get flagged as malicious.  I figured that out when I decided I didn&#x27;t want to teach myself Go just then to deploy something that had worked the day before.</div><br/></div></div><div id="42150380" class="c"><input type="checkbox" id="c-42150380" checked=""/><div class="controls bullet"><span class="by">randlet</span><span>|</span><a href="#42149918">root</a><span>|</span><a href="#42149978">parent</a><span>|</span><a href="#42151217">prev</a><span>|</span><a href="#42150888">next</a><span>|</span><label class="collapse" for="c-42150380">[-]</label><label class="expand" for="c-42150380">[2 more]</label></div><br/><div class="children"><div class="content">Pyinstaller can be a bit fiddly to get right initially if you have a lot of package dependencies, but other than that it works really well.</div><br/><div id="42152209" class="c"><input type="checkbox" id="c-42152209" checked=""/><div class="controls bullet"><span class="by">Numerlor</span><span>|</span><a href="#42149918">root</a><span>|</span><a href="#42150380">parent</a><span>|</span><a href="#42150888">next</a><span>|</span><label class="collapse" for="c-42152209">[-]</label><label class="expand" for="c-42152209">[1 more]</label></div><br/><div class="children"><div class="content">Using the spec files for persistent readable configuration also goes a long way, if you treat pyinstaller as a python module you can automate it whole with just python, including the spec files as it executes them as python scripts<p>I&#x27;ve had automated builds running mostly untouched for years here <a href="https:&#x2F;&#x2F;github.com&#x2F;Numerlor&#x2F;Auto_Neutron&#x2F;blob&#x2F;master&#x2F;pyinstaller_build">https:&#x2F;&#x2F;github.com&#x2F;Numerlor&#x2F;Auto_Neutron&#x2F;blob&#x2F;master&#x2F;pyinsta...</a>, though it doesn&#x27;t have any particularly troublesome packages other than PySide6</div><br/></div></div></div></div></div></div><div id="42150888" class="c"><input type="checkbox" id="c-42150888" checked=""/><div class="controls bullet"><span class="by">ktm5j</span><span>|</span><a href="#42149918">root</a><span>|</span><a href="#42149940">parent</a><span>|</span><a href="#42149978">prev</a><span>|</span><a href="#42149914">next</a><span>|</span><label class="collapse" for="c-42150888">[-]</label><label class="expand" for="c-42150888">[1 more]</label></div><br/><div class="children"><div class="content">Yep I used it at my last job and it worked great! Startup times were horrible, but that didn&#x27;t matter so much to us and it solved tons of problems we had with people messing up their python environments. Takes some tweaking to get certain modules (like scikit-rf) to work, but never found an issue that couldn&#x27;t be solved.<p>Would recommend!</div><br/></div></div></div></div></div></div><div id="42149914" class="c"><input type="checkbox" id="c-42149914" checked=""/><div class="controls bullet"><span class="by">MikeTheGreat</span><span>|</span><a href="#42149918">prev</a><span>|</span><a href="#42150378">next</a><span>|</span><label class="collapse" for="c-42149914">[-]</label><label class="expand" for="c-42149914">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;m always on the lookout for ways of packaging Python programs&#x2F;script-piles into single-file executables, so thank you for posting this!<p>The GitHub README says it builds on the Python .ZIP App format (PEP441), which in turns says you can put your app in a .ZIP file and Python will run it as an app.<p>I think I went this route with PyInstaller&#x27;s one-file output option.  But I found it to be too slow because (1) my app was a CLI app and I needed it to start, run, and end quickly, (2) I imported something from Django because it was useful (which ballooned the size), and (3) the single-file .ZIP needed to be extracted into a temporary directory, run, and then deleted every time (!!!).<p>Does anyone know how Pex &#x2F; PEP441 deals with this?  Is the extract-run-delete thing normal&#x2F;standard?  Is there a way to cache the extracted app?</div><br/><div id="42150167" class="c"><input type="checkbox" id="c-42150167" checked=""/><div class="controls bullet"><span class="by">tylerhou</span><span>|</span><a href="#42149914">parent</a><span>|</span><a href="#42150378">next</a><span>|</span><label class="collapse" for="c-42150167">[-]</label><label class="expand" for="c-42150167">[1 more]</label></div><br/><div class="children"><div class="content">My guess is that without operating system support or equivalent, there is not an easy way to avoid extracting the zip file. (You could patch syscalls in the Python interpreter to read from the zip file for certain paths, but that might be hacky.)<p>I did find <a href="https:&#x2F;&#x2F;github.com&#x2F;google&#x2F;mount-zip">https:&#x2F;&#x2F;github.com&#x2F;google&#x2F;mount-zip</a> which might be useful, but you would likely have to still mount the zip manually. However, you don’t have to worry as much about cleaning up after yourself.</div><br/></div></div></div></div><div id="42150378" class="c"><input type="checkbox" id="c-42150378" checked=""/><div class="controls bullet"><span class="by">serjester</span><span>|</span><a href="#42149914">prev</a><span>|</span><a href="#42151397">next</a><span>|</span><label class="collapse" for="c-42150378">[-]</label><label class="expand" for="c-42150378">[2 more]</label></div><br/><div class="children"><div class="content">I think the easiest way to do this now is with uv and their support for inline metadata. At this point you can just have the user install uv with a single command and then have the user run the script with `uv run example.py`.</div><br/><div id="42150804" class="c"><input type="checkbox" id="c-42150804" checked=""/><div class="controls bullet"><span class="by">d0mine</span><span>|</span><a href="#42150378">parent</a><span>|</span><a href="#42151397">next</a><span>|</span><label class="collapse" for="c-42150804">[-]</label><label class="expand" for="c-42150804">[1 more]</label></div><br/><div class="children"><div class="content">—script appears to be missing if you meant <a href="https:&#x2F;&#x2F;peps.python.org&#x2F;pep-0723&#x2F;" rel="nofollow">https:&#x2F;&#x2F;peps.python.org&#x2F;pep-0723&#x2F;</a></div><br/></div></div></div></div><div id="42151397" class="c"><input type="checkbox" id="c-42151397" checked=""/><div class="controls bullet"><span class="by">mappu</span><span>|</span><a href="#42150378">prev</a><span>|</span><a href="#42149950">next</a><span>|</span><label class="collapse" for="c-42151397">[-]</label><label class="expand" for="c-42151397">[4 more]</label></div><br/><div class="children"><div class="content">Pex and Shiv both require the end user to have Python installed, so I think PyOxidizer is the best tool in this category: <a href="https:&#x2F;&#x2F;pyoxidizer.readthedocs.io&#x2F;en&#x2F;stable&#x2F;pyoxidizer_comparisons.html" rel="nofollow">https:&#x2F;&#x2F;pyoxidizer.readthedocs.io&#x2F;en&#x2F;stable&#x2F;pyoxidizer_compa...</a></div><br/><div id="42155021" class="c"><input type="checkbox" id="c-42155021" checked=""/><div class="controls bullet"><span class="by">stuhood</span><span>|</span><a href="#42151397">parent</a><span>|</span><a href="#42152292">next</a><span>|</span><label class="collapse" for="c-42155021">[-]</label><label class="expand" for="c-42155021">[1 more]</label></div><br/><div class="children"><div class="content">Not anymore: PEX now supports including an interpreter in the package: <a href="https:&#x2F;&#x2F;docs.pex-tool.org&#x2F;scie.html" rel="nofollow">https:&#x2F;&#x2F;docs.pex-tool.org&#x2F;scie.html</a><p>And unfortunately, PyOxidizer went into maintenance mode: <a href="https:&#x2F;&#x2F;gregoryszorc.com&#x2F;blog&#x2F;2024&#x2F;03&#x2F;17&#x2F;my-shifting-open-source-priorities&#x2F;" rel="nofollow">https:&#x2F;&#x2F;gregoryszorc.com&#x2F;blog&#x2F;2024&#x2F;03&#x2F;17&#x2F;my-shifting-open-so...</a></div><br/></div></div><div id="42152292" class="c"><input type="checkbox" id="c-42152292" checked=""/><div class="controls bullet"><span class="by">martsa1</span><span>|</span><a href="#42151397">parent</a><span>|</span><a href="#42155021">prev</a><span>|</span><a href="#42149950">next</a><span>|</span><label class="collapse" for="c-42152292">[-]</label><label class="expand" for="c-42152292">[2 more]</label></div><br/><div class="children"><div class="content">How does Pyoxidizer compare to pyinstaller and nuitka?</div><br/><div id="42152916" class="c"><input type="checkbox" id="c-42152916" checked=""/><div class="controls bullet"><span class="by">mappu</span><span>|</span><a href="#42151397">root</a><span>|</span><a href="#42152292">parent</a><span>|</span><a href="#42149950">next</a><span>|</span><label class="collapse" for="c-42152916">[-]</label><label class="expand" for="c-42152916">[1 more]</label></div><br/><div class="children"><div class="content">Great question! That was actually covered in the link I posted.<p>Compared to PyInstaller, it doesn&#x27;t dump any temporary files on disk.<p>Compared to Nuitka, it uses the real CPython, not a different implementation.</div><br/></div></div></div></div></div></div><div id="42149950" class="c"><input type="checkbox" id="c-42149950" checked=""/><div class="controls bullet"><span class="by">BiteCode_dev</span><span>|</span><a href="#42151397">prev</a><span>|</span><a href="#42150864">next</a><span>|</span><label class="collapse" for="c-42149950">[-]</label><label class="expand" for="c-42149950">[17 more]</label></div><br/><div class="children"><div class="content">I know it&#x27;s not very nice to post that here, but given it&#x27;s hard to get good info about python because the ecosystem is so huge, I&#x27;d rather give it straight:<p>Don&#x27;t use pex, use shiv: <a href="https:&#x2F;&#x2F;shiv.readthedocs.io&#x2F;" rel="nofollow">https:&#x2F;&#x2F;shiv.readthedocs.io&#x2F;</a><p>Pex doesn&#x27;t work on windows, is slower than shiv and shiv solves the resource files problem that you will encounter with dependencies like django. To achieve this, shiv unzips the whole zipapp in a cache on disk and create a transparent proxy to it.<p>Still, I wish zipapps had better tooling honestly. Using either pex or shiv is more complex than it needs to be.<p>I hope uv will eventually give you something like &quot;uv zipapp&quot; and make it good and simple.<p>Right now, to bundle all deps for shiv you have to download first all wheels, then figure out the proper incantation to include them. And if you use WSGI, you probably want some kind of dedicated entry point.<p>The tech is cool, but it deserves maturing to be a true &quot;.war for python&quot;.</div><br/><div id="42151011" class="c"><input type="checkbox" id="c-42151011" checked=""/><div class="controls bullet"><span class="by">dbaupp</span><span>|</span><a href="#42149950">parent</a><span>|</span><a href="#42150561">next</a><span>|</span><label class="collapse" for="c-42151011">[-]</label><label class="expand" for="c-42151011">[2 more]</label></div><br/><div class="children"><div class="content">FWIW, pex now also has options to unzip the archive to a cache directory on startup (I believe this happens by default now, but am not at a computer to confirm), to side step the zipapp limitations that you reference.</div><br/><div id="42151701" class="c"><input type="checkbox" id="c-42151701" checked=""/><div class="controls bullet"><span class="by">BiteCode_dev</span><span>|</span><a href="#42149950">root</a><span>|</span><a href="#42151011">parent</a><span>|</span><a href="#42150561">next</a><span>|</span><label class="collapse" for="c-42151701">[-]</label><label class="expand" for="c-42151701">[1 more]</label></div><br/><div class="children"><div class="content">I just checked, and there is indeed a `--pex-root` option with and even &quot;-c&quot; to specify a custom entry point.<p>Thanks for pointing it out.</div><br/></div></div></div></div><div id="42150561" class="c"><input type="checkbox" id="c-42150561" checked=""/><div class="controls bullet"><span class="by">MikeTheGreat</span><span>|</span><a href="#42149950">parent</a><span>|</span><a href="#42151011">prev</a><span>|</span><a href="#42151178">next</a><span>|</span><label class="collapse" for="c-42150561">[-]</label><label class="expand" for="c-42150561">[3 more]</label></div><br/><div class="children"><div class="content">While we&#x27;re posting not-nice things, I&#x27;ll throw my current favorite out:  pipx ( <a href="https:&#x2F;&#x2F;github.com&#x2F;pypa&#x2F;pipx">https:&#x2F;&#x2F;github.com&#x2F;pypa&#x2F;pipx</a> ).  I use Python&#x27;s Poetry to build a wheel and then pipx to install it.  Super-easy, barely an inconvenience :)</div><br/><div id="42150681" class="c"><input type="checkbox" id="c-42150681" checked=""/><div class="controls bullet"><span class="by">BiteCode_dev</span><span>|</span><a href="#42149950">root</a><span>|</span><a href="#42150561">parent</a><span>|</span><a href="#42151178">next</a><span>|</span><label class="collapse" for="c-42150681">[-]</label><label class="expand" for="c-42150681">[2 more]</label></div><br/><div class="children"><div class="content">pipx is orthogonal to the problem pex and shiv are solving since:<p>- it doesn&#x27;t provide a single file for a full project with all dependencies.<p>- it requires internet access on the target machine to install things.<p>- it can&#x27;t give you access to underlying API for things like wsgi.<p>- it requires pipx on the target machine.<p>- it requires a wheels made from a build, which many projects don&#x27;t have (such as a lot of web projects).</div><br/><div id="42153095" class="c"><input type="checkbox" id="c-42153095" checked=""/><div class="controls bullet"><span class="by">MikeTheGreat</span><span>|</span><a href="#42149950">root</a><span>|</span><a href="#42150681">parent</a><span>|</span><a href="#42151178">next</a><span>|</span><label class="collapse" for="c-42153095">[-]</label><label class="expand" for="c-42153095">[1 more]</label></div><br/><div class="children"><div class="content">Hello!<p>I&#x27;m not a pipx expert (I&#x27;m a &quot;I got it to work for my use case and then stopped&quot; person :) )  but I was able to get my project working after installing a local wheel file (so i don&#x27;t think you need access to the Internet to install things).<p>I <i>thought</i> the wheel file has all the dependencies since (my understanding of) pipx uses a venv for each individual wheel file&#x2F;app.  Certainly I&#x27;m using a bunch of packages that I needed to pip install into my development environment, but it&#x27;s entirely possible that my pipx-managed wheels are using those installs, too.<p>I think the last two points are accurate, and I&#x27;ve never tried to use APIs like wsgi with it.</div><br/></div></div></div></div></div></div><div id="42151178" class="c"><input type="checkbox" id="c-42151178" checked=""/><div class="controls bullet"><span class="by">emmelaich</span><span>|</span><a href="#42149950">parent</a><span>|</span><a href="#42150561">prev</a><span>|</span><a href="#42150294">next</a><span>|</span><label class="collapse" for="c-42151178">[-]</label><label class="expand" for="c-42151178">[3 more]</label></div><br/><div class="children"><div class="content">&gt; .war for python<p>It shouldn&#x27;t be that hard to get a general &#x27;jar&#x2F;war&#x27;, not just for python.<p>Perhaps jart&#x27;s cosmolitan libc with a zip file appendage which it auto extracts and optionally caches on first use.<p>A heavyweight solution, but still lighter than Docker.</div><br/><div id="42151675" class="c"><input type="checkbox" id="c-42151675" checked=""/><div class="controls bullet"><span class="by">BiteCode_dev</span><span>|</span><a href="#42149950">root</a><span>|</span><a href="#42151178">parent</a><span>|</span><a href="#42150294">next</a><span>|</span><label class="collapse" for="c-42151675">[-]</label><label class="expand" for="c-42151675">[2 more]</label></div><br/><div class="children"><div class="content">It would today, because macos requires signing, and windows has &quot;the mark of the web&quot;.<p>They don&#x27;t apply to scripts, so Python is fine, but they do apply to executables.<p>Having to sign your zip every time you produce it would nullify the benefit of the concept. And because the checksum of the executable file change according to the content of the zip, you can&#x27;t just sign the cosmopolitan part.</div><br/><div id="42153569" class="c"><input type="checkbox" id="c-42153569" checked=""/><div class="controls bullet"><span class="by">emmelaich</span><span>|</span><a href="#42149950">root</a><span>|</span><a href="#42151675">parent</a><span>|</span><a href="#42150294">next</a><span>|</span><label class="collapse" for="c-42153569">[-]</label><label class="expand" for="c-42153569">[1 more]</label></div><br/><div class="children"><div class="content">You can work around both, but I agree that&#x27;s a big point of friction.</div><br/></div></div></div></div></div></div><div id="42150294" class="c"><input type="checkbox" id="c-42150294" checked=""/><div class="controls bullet"><span class="by">fsloth</span><span>|</span><a href="#42149950">parent</a><span>|</span><a href="#42151178">prev</a><span>|</span><a href="#42150612">next</a><span>|</span><label class="collapse" for="c-42150294">[-]</label><label class="expand" for="c-42150294">[2 more]</label></div><br/><div class="children"><div class="content">”Pex doesn&#x27;t work on windows”<p>Oh that’s such a weird limitation.<p>In the early 2000’s open source hubris, next year was always the year of the Linux desktop. Since then consumer windows matured into a totally ok OS and one with the best support for graphics and C++ development at that.<p>Non-windows support nowadays is a fairly strong signal of a non-serious software offering if there is no obvious reason for it. And that’s totally fine, hobby tools developed by enthusiasts rock - but they are not <i>industrial</i> in scope as such.</div><br/><div id="42150918" class="c"><input type="checkbox" id="c-42150918" checked=""/><div class="controls bullet"><span class="by">sneed_chucker</span><span>|</span><a href="#42149950">root</a><span>|</span><a href="#42150294">parent</a><span>|</span><a href="#42150612">next</a><span>|</span><label class="collapse" for="c-42150918">[-]</label><label class="expand" for="c-42150918">[1 more]</label></div><br/><div class="children"><div class="content">A lot of serious software offerings are only concerned with the server use case, modern servers run Linux unless there&#x27;s a good reason not to, and modern windows has more than one acceptable way to run Linux binaries if you absolutely have to.</div><br/></div></div></div></div><div id="42150612" class="c"><input type="checkbox" id="c-42150612" checked=""/><div class="controls bullet"><span class="by">packetlost</span><span>|</span><a href="#42149950">parent</a><span>|</span><a href="#42150294">prev</a><span>|</span><a href="#42152563">next</a><span>|</span><label class="collapse" for="c-42150612">[-]</label><label class="expand" for="c-42150612">[5 more]</label></div><br/><div class="children"><div class="content">I feel like, in general, you should be able to treat an archive as a filesystem. Zipapps could be so much easier if it did that transparently.</div><br/><div id="42150695" class="c"><input type="checkbox" id="c-42150695" checked=""/><div class="controls bullet"><span class="by">BiteCode_dev</span><span>|</span><a href="#42149950">root</a><span>|</span><a href="#42150612">parent</a><span>|</span><a href="#42152563">next</a><span>|</span><label class="collapse" for="c-42150695">[-]</label><label class="expand" for="c-42150695">[4 more]</label></div><br/><div class="children"><div class="content">It can, but:<p>- It&#x27;s slow.<p>- The underlying python code cannot use open() to access its own resources, but must use pkg_resources, and most packages on pypi don&#x27;t do that because most dev don&#x27;t even know it exists or what problem is soves.<p>- _ _ file _ _ is not available, breaking a lot of things. zip_safe is a build option, but actual compliance to it is hard work and rare.</div><br/><div id="42150715" class="c"><input type="checkbox" id="c-42150715" checked=""/><div class="controls bullet"><span class="by">packetlost</span><span>|</span><a href="#42149950">root</a><span>|</span><a href="#42150695">parent</a><span>|</span><a href="#42152563">next</a><span>|</span><label class="collapse" for="c-42150715">[-]</label><label class="expand" for="c-42150715">[3 more]</label></div><br/><div class="children"><div class="content">I was thinking more along the lines of using namespaces and FUSE. I&#x27;m aware that <i>Python</i> kinda treats them like folders transparently, but not completely for reasons (and more) that you described.</div><br/><div id="42150809" class="c"><input type="checkbox" id="c-42150809" checked=""/><div class="controls bullet"><span class="by">BiteCode_dev</span><span>|</span><a href="#42149950">root</a><span>|</span><a href="#42150715">parent</a><span>|</span><a href="#42152563">next</a><span>|</span><label class="collapse" for="c-42150809">[-]</label><label class="expand" for="c-42150809">[2 more]</label></div><br/><div class="children"><div class="content">That&#x27;s a cool idea.<p>Wonder what the FUSE equivalent for windows is.</div><br/><div id="42150855" class="c"><input type="checkbox" id="c-42150855" checked=""/><div class="controls bullet"><span class="by">packetlost</span><span>|</span><a href="#42149950">root</a><span>|</span><a href="#42150809">parent</a><span>|</span><a href="#42152563">next</a><span>|</span><label class="collapse" for="c-42150855">[-]</label><label class="expand" for="c-42150855">[1 more]</label></div><br/><div class="children"><div class="content">Probably Windows Projected FileSystem: <a href="https:&#x2F;&#x2F;learn.microsoft.com&#x2F;en-us&#x2F;windows&#x2F;win32&#x2F;projfs&#x2F;projected-file-system" rel="nofollow">https:&#x2F;&#x2F;learn.microsoft.com&#x2F;en-us&#x2F;windows&#x2F;win32&#x2F;projfs&#x2F;proje...</a></div><br/></div></div></div></div></div></div></div></div></div></div><div id="42152563" class="c"><input type="checkbox" id="c-42152563" checked=""/><div class="controls bullet"><span class="by">ttyprintk</span><span>|</span><a href="#42149950">parent</a><span>|</span><a href="#42150612">prev</a><span>|</span><a href="#42150864">next</a><span>|</span><label class="collapse" for="c-42152563">[-]</label><label class="expand" for="c-42152563">[1 more]</label></div><br/><div class="children"><div class="content">Pex works with older versions than shiv.</div><br/></div></div></div></div><div id="42150864" class="c"><input type="checkbox" id="c-42150864" checked=""/><div class="controls bullet"><span class="by">gavmor</span><span>|</span><a href="#42149950">prev</a><span>|</span><a href="#42153770">next</a><span>|</span><label class="collapse" for="c-42150864">[-]</label><label class="expand" for="c-42150864">[5 more]</label></div><br/><div class="children"><div class="content">I can see how .pex or shiv&#x27;s zippaps live at the Pareto threshold where converting a Python app to an 80% (or less...) executable takes only 20% (or less!) of the effort that would be spent re-writing the app in eg C, C++, Rust, or Golang. Still, it breaks my heart to see all this work being done to keep developers employed as &quot;Python developers&quot;, instead of leveling them up to a broader programming skillset. It seems as if the industry is investing rather heavily in a local maximum.<p>But, of course, the market is has information that I don&#x27;t.</div><br/><div id="42154239" class="c"><input type="checkbox" id="c-42154239" checked=""/><div class="controls bullet"><span class="by">zem</span><span>|</span><a href="#42150864">parent</a><span>|</span><a href="#42152943">next</a><span>|</span><label class="collapse" for="c-42154239">[-]</label><label class="expand" for="c-42154239">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Still, it breaks my heart to see all this work being done to keep developers employed as &quot;Python developers&quot;, instead of leveling them up to a broader programming skillset. It seems as if the industry is investing rather heavily in a local maximum.<p>this is a topic near to my heart; I have spent the last several years building my career around doing this sort of work (specifically writing tools to expand the capabilities of python code). the key idea is not that we &quot;keep people employed as python developers&quot;, it is that python (you can also substitute ruby, javascript, php, or any other popular dynamic language) is a genuinely powerful and expressive language from the point of view of converting ideas to code, and having that code be readable, maintainable, and extensible by other humans.<p>where is falls down is on the &quot;machine facing&quot; end - you don&#x27;t get the guarantees of static typing, the import system is a bit of a mess, it isn&#x27;t as fast as lower level, statically-compiled-to-native-code languages, and (as the current discussion shows) packaging and distributing an end user binary is somewhere between a morass and a nightmare. however, none of these things are a problem with the <i>language</i> per se, and they can be fixed with some combination of improving the implementation, writing better tooling (cf valgrind from the c world), making it easier to write small bits of critical code in c&#x2F;rust&#x2F;zig&#x2F;etc, and improving language features while not sacrificing what draws people to use python in the first place.<p>is python a local maximum? almost certainly; it would be foolish to think that nothing better could come along, and indeed pyret already looks distinctly better in terms of pure dynamic language design. but the answer to that is not to &quot;level up&quot; people who are happy and productive using python to some language like rust or c++ that imposes a heavier cognitive burden on the user to take care of low level details that their applications might not need, or one like golang that pushes the complexity out into the application where problems need to be solved via design patterns that people need to learn and copy, rather than just building them into the language or stdlib.</div><br/></div></div><div id="42152943" class="c"><input type="checkbox" id="c-42152943" checked=""/><div class="controls bullet"><span class="by">slotrans</span><span>|</span><a href="#42150864">parent</a><span>|</span><a href="#42154239">prev</a><span>|</span><a href="#42151048">next</a><span>|</span><label class="collapse" for="c-42152943">[-]</label><label class="expand" for="c-42152943">[2 more]</label></div><br/><div class="children"><div class="content">It is often the case that the nifty Python thing you want to pass around uses one or more nifty Python libraries that have no C&#x2F;C++&#x2F;Rust&#x2F;Golang equivalent (or no <i>obvious</i> equivalent), and so rewriting it becomes a herculean task.</div><br/><div id="42153027" class="c"><input type="checkbox" id="c-42153027" checked=""/><div class="controls bullet"><span class="by">gavmor</span><span>|</span><a href="#42150864">root</a><span>|</span><a href="#42152943">parent</a><span>|</span><a href="#42151048">next</a><span>|</span><label class="collapse" for="c-42153027">[-]</label><label class="expand" for="c-42153027">[1 more]</label></div><br/><div class="children"><div class="content">I wonder if this isn&#x27;t reflective of some universal law of niftiness.</div><br/></div></div></div></div><div id="42151048" class="c"><input type="checkbox" id="c-42151048" checked=""/><div class="controls bullet"><span class="by">Numerlor</span><span>|</span><a href="#42150864">parent</a><span>|</span><a href="#42152943">prev</a><span>|</span><a href="#42153770">next</a><span>|</span><label class="collapse" for="c-42151048">[-]</label><label class="expand" for="c-42151048">[1 more]</label></div><br/><div class="children"><div class="content">Eh I wouldn&#x27;t call PEX proper executables that&#x27;d replace the languages above as they still need python, but I still prefer python for things like simple Qt apps even if it means using e.g. PyInstaller</div><br/></div></div></div></div><div id="42153770" class="c"><input type="checkbox" id="c-42153770" checked=""/><div class="controls bullet"><span class="by">jbritton</span><span>|</span><a href="#42150864">prev</a><span>|</span><a href="#42150677">next</a><span>|</span><label class="collapse" for="c-42153770">[-]</label><label class="expand" for="c-42153770">[1 more]</label></div><br/><div class="children"><div class="content">I use cx_Freeze to get an exe
and Inno Setup for a Windows installer. It has worked well for me. I also have a DigiCert dongle to sign the exes.</div><br/></div></div><div id="42150677" class="c"><input type="checkbox" id="c-42150677" checked=""/><div class="controls bullet"><span class="by">khaledh</span><span>|</span><a href="#42153770">prev</a><span>|</span><a href="#42152077">next</a><span>|</span><label class="collapse" for="c-42150677">[-]</label><label class="expand" for="c-42150677">[3 more]</label></div><br/><div class="children"><div class="content">We&#x27;ve been using pex for a long while to package PySpark jobs with dependencies into a single file. Saves a ton of time vs. the old way of building&#x2F;deploying docker images.<p><a href="https:&#x2F;&#x2F;spark.apache.org&#x2F;docs&#x2F;latest&#x2F;api&#x2F;python&#x2F;user_guide&#x2F;python_packaging.html#using-pex" rel="nofollow">https:&#x2F;&#x2F;spark.apache.org&#x2F;docs&#x2F;latest&#x2F;api&#x2F;python&#x2F;user_guide&#x2F;p...</a></div><br/><div id="42155359" class="c"><input type="checkbox" id="c-42155359" checked=""/><div class="controls bullet"><span class="by">fire_lake</span><span>|</span><a href="#42150677">parent</a><span>|</span><a href="#42152618">next</a><span>|</span><label class="collapse" for="c-42155359">[-]</label><label class="expand" for="c-42155359">[1 more]</label></div><br/><div class="children"><div class="content">I would prefer Docker images since you they are easier to “cross compile”.<p>However EMR requires the same Docker image for the entire cluster - why not per job!?!?</div><br/></div></div><div id="42152618" class="c"><input type="checkbox" id="c-42152618" checked=""/><div class="controls bullet"><span class="by">ttyprintk</span><span>|</span><a href="#42150677">parent</a><span>|</span><a href="#42155359">prev</a><span>|</span><a href="#42152077">next</a><span>|</span><label class="collapse" for="c-42152618">[-]</label><label class="expand" for="c-42152618">[1 more]</label></div><br/><div class="children"><div class="content">We shiv all the dependencies into a single file, bake it into a Docker layer, and refer to it in each scripts shebang.</div><br/></div></div></div></div><div id="42152077" class="c"><input type="checkbox" id="c-42152077" checked=""/><div class="controls bullet"><span class="by">smallmouth</span><span>|</span><a href="#42150677">prev</a><span>|</span><label class="collapse" for="c-42152077">[-]</label><label class="expand" for="c-42152077">[1 more]</label></div><br/><div class="children"><div class="content">I thought this was going to be a post about plumbing and then I read further and was even more excited to say the phrase &quot;python executable&quot;. Very interesting. Thanks!</div><br/></div></div></div></div></div></div></div></body></html>