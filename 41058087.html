<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1722070848590" as="style"/><link rel="stylesheet" href="styles.css?v=1722070848590"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://railsatscale.com/2024-07-18-mastering-ruby-code-navigation-major-enhancements-in-ruby-lsp-2024/">Mastering Ruby Code Navigation: Ruby LSP Enhancements in the First Half of 2024</a> <span class="domain">(<a href="https://railsatscale.com">railsatscale.com</a>)</span></div><div class="subtext"><span>ksec</span> | <span>19 comments</span></div><br/><div><div id="41084461" class="c"><input type="checkbox" id="c-41084461" checked=""/><div class="controls bullet"><span class="by">stevebmark</span><span>|</span><a href="#41085312">next</a><span>|</span><label class="collapse" for="c-41084461">[-]</label><label class="expand" for="c-41084461">[3 more]</label></div><br/><div class="children"><div class="content">Ruby has a lot going for it, but as other commenters point out, the metaprogramming nightmares of the language have held it back 10-30 years behind modern language ecosystems, depending on the feature you&#x27;re looking at. Celebrating &quot;jump to source definition&quot; (sometimes working) for such a mature language is a symptom of the nature of the language. Sometimes insane dynamic freedom is really useful, but it comes with heavy drawbacks.</div><br/><div id="41085027" class="c"><input type="checkbox" id="c-41085027" checked=""/><div class="controls bullet"><span class="by">jaynetics</span><span>|</span><a href="#41084461">parent</a><span>|</span><a href="#41085047">next</a><span>|</span><label class="collapse" for="c-41085027">[-]</label><label class="expand" for="c-41085027">[1 more]</label></div><br/><div class="children"><div class="content">As someone who uses Ruby as well as plenty of other languages, I agree that it can feel awkward not to have &quot;go to source&quot; work reliably, but in the greater scheme of things, it&#x27;s not a big drain on time to do the occasional full text search or look something up through programmatic introspection. In other areas that might really slow you down or become blocking, Ruby&#x27;s ecosystem still seems OK to me. I&#x27;m thinking package management, compilation or transpilation, availability of battle-tested libraries etc.<p>I guess it depends on scale as well. The bigger the codebase, the nicer it is to find implementations and references automatically, and the bigger the company, the more likely they are to have good workarounds for the shortcomings of various language ecosystems or even dedicated dev experience teams, in which case Ruby&#x27;s potential runtime intricacies might really start to weigh it down. Then again, there seems to be some movement away from that all-too-dynamic stuff e.g. in the rails codebase.</div><br/></div></div><div id="41085047" class="c"><input type="checkbox" id="c-41085047" checked=""/><div class="controls bullet"><span class="by">psychoslave</span><span>|</span><a href="#41084461">parent</a><span>|</span><a href="#41085027">prev</a><span>|</span><a href="#41085312">next</a><span>|</span><label class="collapse" for="c-41085047">[-]</label><label class="expand" for="c-41085047">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t think metaprogramming is the key point here,  though it doesn&#x27;t help with this kind of issue.<p>That is,  yesterday I spent the afternoon trying to follow a maze of signal observers in a Vue3 project. After a moment, not finding why the redirect to login page was nowhere to be found in the signal obsevers of the concerned transition, it finally reveled to be linked to a more broad route hook mechanism that the framework provides.<p>No meta programming is involved, be it in signal observers or route hook.<p>Regarding metaprogramming,  Crystal keep only the parts that are straightfoward to deal with in static analysis, from what I grasped when skiming its elevator speech.<p>On Ruby side the great stuffs I like in it are more linked to the homogeneous approach it follows. Almost everything is an object and something like `42.extend(:custom•module).original•action` is possible due to that. It&#x27;s not 100% pure object though,  reserved keywords like `if` can not be used as objects, that is `if.class` is not valid.</div><br/></div></div></div></div><div id="41085312" class="c"><input type="checkbox" id="c-41085312" checked=""/><div class="controls bullet"><span class="by">Alifatisk</span><span>|</span><a href="#41084461">prev</a><span>|</span><a href="#41083880">next</a><span>|</span><label class="collapse" for="c-41085312">[-]</label><label class="expand" for="c-41085312">[1 more]</label></div><br/><div class="children"><div class="content">Ruby is nice, I just find the DX to be far behind the other languages. Like code completion is barely working.</div><br/></div></div><div id="41083880" class="c"><input type="checkbox" id="c-41083880" checked=""/><div class="controls bullet"><span class="by">simply-typed</span><span>|</span><a href="#41085312">prev</a><span>|</span><a href="#41084041">next</a><span>|</span><label class="collapse" for="c-41083880">[-]</label><label class="expand" for="c-41083880">[12 more]</label></div><br/><div class="children"><div class="content">The fact IntelliSense and jump-to-source are supported at a very superficial level goes to show the heavy drawbacks of dynamic types.<p>Sorbet may fix things, but at that point, just use a language with more mature tooling around types, like Python or TypeScript.<p>Dynamic types offer dubious marginal benefits but bring tons of downsides. The demonstrations in this article reflect that.</div><br/><div id="41083934" class="c"><input type="checkbox" id="c-41083934" checked=""/><div class="controls bullet"><span class="by">ecshafer</span><span>|</span><a href="#41083880">parent</a><span>|</span><a href="#41083947">next</a><span>|</span><label class="collapse" for="c-41083934">[-]</label><label class="expand" for="c-41083934">[5 more]</label></div><br/><div class="children"><div class="content">I like coding in Ruby a lot more than Python or Typescript. From using the Ruby LSP in the article daily (though I am not on the team) I can say it works quite good and I have very few issues with navigating Ruby source. If I were very worried about types, going to Python or Typescript seems like not a very good solution. Python barely has more type support than Ruby, and Ruby is making a lot of gains in this area. Might as well go to an even more expressive and powerful language like F#, Haskell, Ocaml, Scala, or similar.</div><br/><div id="41084293" class="c"><input type="checkbox" id="c-41084293" checked=""/><div class="controls bullet"><span class="by">maleldil</span><span>|</span><a href="#41083880">root</a><span>|</span><a href="#41083934">parent</a><span>|</span><a href="#41083947">next</a><span>|</span><label class="collapse" for="c-41084293">[-]</label><label class="expand" for="c-41084293">[4 more]</label></div><br/><div class="children"><div class="content">&gt; Python barely has more type support than Ruby<p>That&#x27;s not true. mypy and Pyright (the main type checkers) are very ahead of Ruby&#x27;s Sorbet, and Python actually has proper ergonomic syntax to work with types, which Ruby doesn&#x27;t. It&#x27;s also seeing constant development to bring more powerful typing and syntax.<p>Also, typing has become part of the Python culture, which means most of the big libraries have type hints. It doesn&#x27;t seem like that is the case with Ruby, where type hints aren&#x27;t as prevalent. Even the core maintainers don&#x27;t like the idea and want to keep it as dynamic as possible.</div><br/><div id="41084439" class="c"><input type="checkbox" id="c-41084439" checked=""/><div class="controls bullet"><span class="by">jshen</span><span>|</span><a href="#41083880">root</a><span>|</span><a href="#41084293">parent</a><span>|</span><a href="#41083947">next</a><span>|</span><label class="collapse" for="c-41084439">[-]</label><label class="expand" for="c-41084439">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve had the hardest time getting mypy to work well in vscode. Trying pyright with neovim now, curious how it goes.</div><br/><div id="41084738" class="c"><input type="checkbox" id="c-41084738" checked=""/><div class="controls bullet"><span class="by">ReleaseCandidat</span><span>|</span><a href="#41083880">root</a><span>|</span><a href="#41084439">parent</a><span>|</span><a href="#41084540">next</a><span>|</span><label class="collapse" for="c-41084738">[-]</label><label class="expand" for="c-41084738">[1 more]</label></div><br/><div class="children"><div class="content">Instead of Pyright use Based Pyright for anything that isn&#x27;t Code, and in Code (not Codium) you can use Pylance instead.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;DetachHead&#x2F;basedpyright">https:&#x2F;&#x2F;github.com&#x2F;DetachHead&#x2F;basedpyright</a></div><br/></div></div><div id="41084540" class="c"><input type="checkbox" id="c-41084540" checked=""/><div class="controls bullet"><span class="by">teaearlgraycold</span><span>|</span><a href="#41083880">root</a><span>|</span><a href="#41084439">parent</a><span>|</span><a href="#41084738">prev</a><span>|</span><a href="#41083947">next</a><span>|</span><label class="collapse" for="c-41084540">[-]</label><label class="expand" for="c-41084540">[1 more]</label></div><br/><div class="children"><div class="content">pyright just requires the Microsoft Python extension. In my experience once you have that it works instantly.</div><br/></div></div></div></div></div></div></div></div><div id="41083947" class="c"><input type="checkbox" id="c-41083947" checked=""/><div class="controls bullet"><span class="by">pjm331</span><span>|</span><a href="#41083880">parent</a><span>|</span><a href="#41083934">prev</a><span>|</span><a href="#41084088">next</a><span>|</span><label class="collapse" for="c-41083947">[-]</label><label class="expand" for="c-41083947">[2 more]</label></div><br/><div class="children"><div class="content">Or the fact that people continue to do a lot of development in these languages would suggest that the benefits are more than marginal, and the lack of a few editor features is not such a terrible hindrance.</div><br/><div id="41085101" class="c"><input type="checkbox" id="c-41085101" checked=""/><div class="controls bullet"><span class="by">ht85</span><span>|</span><a href="#41083880">root</a><span>|</span><a href="#41083947">parent</a><span>|</span><a href="#41084088">next</a><span>|</span><label class="collapse" for="c-41085101">[-]</label><label class="expand" for="c-41085101">[1 more]</label></div><br/><div class="children"><div class="content">Strongly typed languages have a higher barrier of entry and require an engineering mindset. That&#x27;s anecdotal but if I think of exceptionally competent people I&#x27;ve worked with on JS projects, all of them have spent time building and advocated for properly typed code bases.<p>The other camp &quot;just hates it&quot; because it &quot;slows them down&quot;, as it seems they spend most of their time fighting the types but never get to the point where you get that huge return on investment.</div><br/></div></div></div></div><div id="41084088" class="c"><input type="checkbox" id="c-41084088" checked=""/><div class="controls bullet"><span class="by">cardy31</span><span>|</span><a href="#41083880">parent</a><span>|</span><a href="#41083947">prev</a><span>|</span><a href="#41084115">next</a><span>|</span><label class="collapse" for="c-41084088">[-]</label><label class="expand" for="c-41084088">[1 more]</label></div><br/><div class="children"><div class="content">Not everyone is at a point where they are greenfield picking a language for a new project. Sorbet was built by a large organization (Stripe IIRC) and is used effectively by organizations with large Rails codebases. I think Sorbet is a great way to maintain velocity on a large Ruby codebase after the initial velocity benefits of dynamic typing have ceased and the dynamic typing is actually a drain on velocity.</div><br/></div></div><div id="41084115" class="c"><input type="checkbox" id="c-41084115" checked=""/><div class="controls bullet"><span class="by">jshen</span><span>|</span><a href="#41083880">parent</a><span>|</span><a href="#41084088">prev</a><span>|</span><a href="#41084060">next</a><span>|</span><label class="collapse" for="c-41084115">[-]</label><label class="expand" for="c-41084115">[1 more]</label></div><br/><div class="children"><div class="content">There is no strong evidence to back up your claims, just opinions.</div><br/></div></div><div id="41084060" class="c"><input type="checkbox" id="c-41084060" checked=""/><div class="controls bullet"><span class="by">adamtaylor_13</span><span>|</span><a href="#41083880">parent</a><span>|</span><a href="#41084115">prev</a><span>|</span><a href="#41084491">next</a><span>|</span><label class="collapse" for="c-41084060">[-]</label><label class="expand" for="c-41084060">[1 more]</label></div><br/><div class="children"><div class="content">The problem is that Rails is the super power that keeps Ruby alive (in my personal opinion). I’d love to use a Typescript solution that has the power and opinionated style of Rails, but there’s nothing comparable. I think AdonisJS wants to be that, but it’s not battle-tested enough for me to feel comfortable relying on it for production projects.</div><br/></div></div><div id="41084491" class="c"><input type="checkbox" id="c-41084491" checked=""/><div class="controls bullet"><span class="by">viraptor</span><span>|</span><a href="#41083880">parent</a><span>|</span><a href="#41084060">prev</a><span>|</span><a href="#41084041">next</a><span>|</span><label class="collapse" for="c-41084491">[-]</label><label class="expand" for="c-41084491">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Sorbet may fix things<p>Sorbet is very slow for large codebases. I keep checking it from time to time, but the biggest service I&#x27;m dealing with just fails to run through the initialisation. And that&#x27;s ignoring the idea that someone will have to clean up the result. Not holding my breath for it to be functional in LSP situations.</div><br/></div></div></div></div><div id="41084041" class="c"><input type="checkbox" id="c-41084041" checked=""/><div class="controls bullet"><span class="by">hstaab</span><span>|</span><a href="#41083880">prev</a><span>|</span><a href="#41084253">next</a><span>|</span><label class="collapse" for="c-41084041">[-]</label><label class="expand" for="c-41084041">[1 more]</label></div><br/><div class="children"><div class="content">How does this compare to the JetBrains solution?</div><br/></div></div><div id="41084253" class="c"><input type="checkbox" id="c-41084253" checked=""/><div class="controls bullet"><span class="by">milofeynman</span><span>|</span><a href="#41084041">prev</a><span>|</span><label class="collapse" for="c-41084253">[-]</label><label class="expand" for="c-41084253">[1 more]</label></div><br/><div class="children"><div class="content">I started a small service recently in rails. I&#x27;m forcing sorbet with typechecking (you can still set things to false like tests which sometimes are a pain to get to pass). It feels almost like a typed language with LSP jump to etc. It&#x27;s getting there.</div><br/></div></div></div></div></div></div></div></body></html>