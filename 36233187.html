<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1686214885893" as="style"/><link rel="stylesheet" href="styles.css?v=1686214885893"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://mcoliver.substack.com/p/quick-vpn-setup-with-aws-lightsail">Quick VPN Setup with AWS Lightsail and WireGuard</a> <span class="domain">(<a href="https://mcoliver.substack.com">mcoliver.substack.com</a>)</span></div><div class="subtext"><span>mcoliver</span> | <span>61 comments</span></div><br/><div><div id="36235114" class="c"><input type="checkbox" id="c-36235114" checked=""/><div class="controls bullet"><span class="by">giobox</span><span>|</span><a href="#36238952">next</a><span>|</span><label class="collapse" for="c-36235114">[-]</label><label class="expand" for="c-36235114">[5 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve long given up hosting my own VPN on VPC&#x2F;cloud providers as means of cheap and quick &quot;browser in another country&quot; hack - so many things block access to known VPC&#x2F;cloud IP address ranges, especially AWS, and I was previously an advocate for just throwing up a cheap self-run VPN container somewhere too.<p>The big advantage offered by many of the VPN vendors this article looks down on is the fact they can give you a residential IP in the target country - this can be a vast quality of life improvement for many browsing scenarios.<p>~5-6 years ago a self-hosted VPN exit node in AWS worked so much better than today in my experience, so many services have since added IP range blocks. This really matters for the common use case of trying to access TV streaming services in other countries, as one example.<p>I still run a private WireGuard setup at home to take advantage of my personal residential IP, but that&#x27;s only good for content in my home country naturally - still handy when traveling, or to get more secure access on public wifi.</div><br/><div id="36237754" class="c"><input type="checkbox" id="c-36237754" checked=""/><div class="controls bullet"><span class="by">LeoPanthera</span><span>|</span><a href="#36235114">parent</a><span>|</span><a href="#36235225">next</a><span>|</span><label class="collapse" for="c-36237754">[-]</label><label class="expand" for="c-36237754">[1 more]</label></div><br/><div class="children"><div class="content">&gt; The big advantage offered by many of the VPN vendors this article looks down on is the fact they can give you a residential IP in the target country<p>This is <i>almost</i> always <i>not</i> true.<p>There <i>are</i> &quot;residential&quot; VPN providers, but they are scammy AF. The only way to get access to a true residential IP is via some proxy&#x2F;gateway software run by a customer of a real home ISP. These are usually obtained via botnets of infected PCs.<p>Users of residential VPNs are usually using them to scrape sites which try to prevent scraping and so are probably happy to turn a blind eye to where they get their IPs from.<p>They&#x27;re also much more expensive then traditional VPNs.</div><br/></div></div><div id="36235225" class="c"><input type="checkbox" id="c-36235225" checked=""/><div class="controls bullet"><span class="by">mcoliver</span><span>|</span><a href="#36235114">parent</a><span>|</span><a href="#36237754">prev</a><span>|</span><a href="#36238566">next</a><span>|</span><label class="collapse" for="c-36235225">[-]</label><label class="expand" for="c-36235225">[2 more]</label></div><br/><div class="children"><div class="content">Fair comment on getting a residential IP.  I&#x27;m not necessarily looking down on commercial VPN providers.  I do think a lot of their users don&#x27;t understand the transfer of trust they are engaging in.  As long as you understand that then great.<p>Another benefit is that your traffic can be pooled with other users coming from an exit IP which can be useful (as opposed from a single endpoint you control as I wrote about in this article).  Tradeoffs.</div><br/><div id="36237756" class="c"><input type="checkbox" id="c-36237756" checked=""/><div class="controls bullet"><span class="by">aborsy</span><span>|</span><a href="#36235114">root</a><span>|</span><a href="#36235225">parent</a><span>|</span><a href="#36238566">next</a><span>|</span><label class="collapse" for="c-36237756">[-]</label><label class="expand" for="c-36237756">[1 more]</label></div><br/><div class="children"><div class="content">But there is also the transfer of trust to the VPS provider, no?<p>The cloud provider may have a less favorable privacy policy.</div><br/></div></div></div></div><div id="36238566" class="c"><input type="checkbox" id="c-36238566" checked=""/><div class="controls bullet"><span class="by">IceWreck</span><span>|</span><a href="#36235114">parent</a><span>|</span><a href="#36235225">prev</a><span>|</span><a href="#36238952">next</a><span>|</span><label class="collapse" for="c-36238566">[-]</label><label class="expand" for="c-36238566">[1 more]</label></div><br/><div class="children"><div class="content">Another reason to host your own VPN is that you want all your devices to be on the same network.</div><br/></div></div></div></div><div id="36238952" class="c"><input type="checkbox" id="c-36238952" checked=""/><div class="controls bullet"><span class="by">anshargal</span><span>|</span><a href="#36235114">prev</a><span>|</span><a href="#36234752">next</a><span>|</span><label class="collapse" for="c-36238952">[-]</label><label class="expand" for="c-36238952">[1 more]</label></div><br/><div class="children"><div class="content">I wrote a TUI tool (runs over SSH in a terminal) for managing simple WireGuard configuration on the server:  <a href="https:&#x2F;&#x2F;github.com&#x2F;andrianbdn&#x2F;wg-cmd">https:&#x2F;&#x2F;github.com&#x2F;andrianbdn&#x2F;wg-cmd</a><p>You just run it on your server and it does most of things, including generating WireGuard keys for clients and showing QR codes.</div><br/></div></div><div id="36234752" class="c"><input type="checkbox" id="c-36234752" checked=""/><div class="controls bullet"><span class="by">thatcherc</span><span>|</span><a href="#36238952">prev</a><span>|</span><a href="#36237798">next</a><span>|</span><label class="collapse" for="c-36234752">[-]</label><label class="expand" for="c-36234752">[14 more]</label></div><br/><div class="children"><div class="content">Fairly off-topic, but I&#x27;ve been having the hardest time finding a Wireguard configuration guide that lets me connect two peers (my phone and an SBC at my house behind my router) to a VPS peer (with a public IP) in a way that routes all the traffic from my phone through the SBC (via WG) and out to the internet via my home fiber connection. All the blog posts and tutorials I&#x27;ve seen have traffic going out through the VPS peer, with little explanation of how all the firewall and iptables commands might change if I wanted a different configuration. Has anyone seen a configuration like that, or know which networking concepts I should keep searching for to go in the right direction?</div><br/><div id="36235270" class="c"><input type="checkbox" id="c-36235270" checked=""/><div class="controls bullet"><span class="by">nucleardog</span><span>|</span><a href="#36234752">parent</a><span>|</span><a href="#36235628">next</a><span>|</span><label class="collapse" for="c-36235270">[-]</label><label class="expand" for="c-36235270">[1 more]</label></div><br/><div class="children"><div class="content">Since you’re just asking for concepts I can take a probably wrong guess that might lead you to something useful with some googling. (I’ve done stuff like this a lot, but not lately and this is all from memory.)<p>The problem you’re trying to solve is basically one of routing. You have a packet leaving your phone to the internet, and you want it to route it through the VPS, from VPS to SBC, SBC to your home router, then out to the internet. Start from one end and figure out each step.<p>From your phone, you basically just need your wireguard config to specify 0.0.0.0&#x2F;0 in the allowed IPs. That will specify that all traffic should go to the peer. So that’s the easy part down.<p>Next is you need your VPS to route all traffic out through the tunnel to your SBC. You’ll need to enable IP forwarding, then you’ll need to set up the routes to accomplish this. You can’t just globally route 0.0.0.0&#x2F;0 otherwise your VPS will no longer be connectable. All the traffic coming in via the wireguard interface from your phone will need to be marked via iptables’ fwmark to use a separate routing table (actually wireguard may do this by default…). So that table is where you’ll need to configure a route for 0.0.0.0&#x2F;0 to your SBC as the next hop. Otherwise you just need to make sure you have allow rules in place on the forward chain to permit the packets to pass.<p>Once it hits your SBC, it gets easier. It needs IP forwarding enabled. Depending on whether you want to use double NAT or not you can do this a couple of ways. One is to set up masquerading&#x2F;NAT and call it a day. The other is to, again, simply allow it to forward the packets along (passing them to your home router) and let your router handle the NAT.<p>The difference between the approaches will mostly play into how you set up all the reverse routes. As long as you can add routes to your home router, you can add a route for your wireguard range(s) to be routed through the SBC and it _should_ cooperate. If your router doesn’t allow you to set up routing like this, you’ll need to do the NAT on your SBC.<p>Then reverse route from SBC to VPS for wireguard range. (Can control this through the AllowedIPs in the wireguard config.) Your VPS shouldn’t need any extra work because it’s directly connected to your phone.<p>And you’re done! Maybe! Good luck!</div><br/></div></div><div id="36235628" class="c"><input type="checkbox" id="c-36235628" checked=""/><div class="controls bullet"><span class="by">mcoliver</span><span>|</span><a href="#36234752">parent</a><span>|</span><a href="#36235270">prev</a><span>|</span><a href="#36237877">next</a><span>|</span><label class="collapse" for="c-36235628">[-]</label><label class="expand" for="c-36235628">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not sure I fully understand your setup or what you are trying to accomplish so apologies beforehand if I misunderstand.<p>One option would be to host the wg server on your SBC (guessing a raspi or something like it?) and make the VPS a peer thus routing everything out your home network.  You can also use AllowedIPs to only route specific ranges on the wg network which allows other traffic to follow the route tables on that device and exit accordingly.<p>But if what you are asking is how do you have different peers on a wg network route their traffic out to the internet on various different peers you&#x27;re going to need to get fancy with routes&#x2F;iptables&#x2F;virtual network interfaces&#x2F;policy based routing using PostUp commands.<p>Hopefully that gives you something to go on.</div><br/></div></div><div id="36237877" class="c"><input type="checkbox" id="c-36237877" checked=""/><div class="controls bullet"><span class="by">justinludwig</span><span>|</span><a href="#36234752">parent</a><span>|</span><a href="#36235628">prev</a><span>|</span><a href="#36235518">next</a><span>|</span><label class="collapse" for="c-36237877">[-]</label><label class="expand" for="c-36237877">[1 more]</label></div><br/><div class="children"><div class="content">Is this what you&#x27;re looking for?:<p><a href="https:&#x2F;&#x2F;www.procustodibus.com&#x2F;blog&#x2F;2022&#x2F;06&#x2F;multi-hop-wireguard&#x2F;#internet-gateway-as-a-spoke" rel="nofollow">https:&#x2F;&#x2F;www.procustodibus.com&#x2F;blog&#x2F;2022&#x2F;06&#x2F;multi-hop-wiregua...</a></div><br/></div></div><div id="36234971" class="c"><input type="checkbox" id="c-36234971" checked=""/><div class="controls bullet"><span class="by">VTimofeenko</span><span>|</span><a href="#36234752">parent</a><span>|</span><a href="#36235518">prev</a><span>|</span><a href="#36234876">next</a><span>|</span><label class="collapse" for="c-36234971">[-]</label><label class="expand" for="c-36234971">[2 more]</label></div><br/><div class="children"><div class="content">I have a vps as the wireguard &quot;hub&quot; with my phone, DNS and internal services being the spokes. I don&#x27;t route traffic through home, but I do use home DNS as adblocker on the go. DNS also does the split horizon to route the phone to internal services over wg.<p>I would strongly recommend switching from iptables to nftables -- drastically reduces wtfs&#x2F;minute metric during the configuration.<p>If you&#x27;d like -- I can send you the relevant parts of the firewall settings with some comments. My email is in the profile.</div><br/><div id="36237289" class="c"><input type="checkbox" id="c-36237289" checked=""/><div class="controls bullet"><span class="by">blooalien</span><span>|</span><a href="#36234752">root</a><span>|</span><a href="#36234971">parent</a><span>|</span><a href="#36234876">next</a><span>|</span><label class="collapse" for="c-36237289">[-]</label><label class="expand" for="c-36237289">[1 more]</label></div><br/><div class="children"><div class="content">&gt; If you&#x27;d like -- I can send you the relevant parts of the firewall settings with some comments.<p>Or you could post a link to a GitHub &quot;gist&quot; of a &quot;sanitized&quot; version of it it, so other random folks (like me; it sounds interesting &#x2F; useful) can also benefit from it without you havin&#x27; to email it to a zillion random people.  ;~)</div><br/></div></div></div></div><div id="36234876" class="c"><input type="checkbox" id="c-36234876" checked=""/><div class="controls bullet"><span class="by">renewiltord</span><span>|</span><a href="#36234752">parent</a><span>|</span><a href="#36234971">prev</a><span>|</span><a href="#36235929">next</a><span>|</span><label class="collapse" for="c-36234876">[-]</label><label class="expand" for="c-36234876">[3 more]</label></div><br/><div class="children"><div class="content">Wireguard is L3, right? So it behaves like a network layer VPN. That means that you can&#x27;t switch how traffic is flowing based on application protocol. But I&#x27;m not super familiar with VoIP stuff.<p>You can split the tunnel based on IP routing, but I think that&#x27;s as good as it gets. So if you want to Wireguard specific traffic to your peer then you&#x27;re fine. For instance, we have our internal cloud network linked to our offices via wireguard, but traffic to anything that is not that network goes to the public Internet via our fiber.<p>But if we wanted to send HTTP requests always through the WG, that is not possible to configure because WG acts as an L3 VPN and Layer 3 has no conception of anything but the network. You couldn&#x27;t say &quot;Send HTTP requests through my normal fiber, but DNS requests through my VPS peer&quot;.</div><br/><div id="36235996" class="c"><input type="checkbox" id="c-36235996" checked=""/><div class="controls bullet"><span class="by">megous</span><span>|</span><a href="#36234752">root</a><span>|</span><a href="#36234876">parent</a><span>|</span><a href="#36235929">next</a><span>|</span><label class="collapse" for="c-36235996">[-]</label><label class="expand" for="c-36235996">[2 more]</label></div><br/><div class="children"><div class="content">How about policy routing based on dport? See `ip rule help`.</div><br/><div id="36237405" class="c"><input type="checkbox" id="c-36237405" checked=""/><div class="controls bullet"><span class="by">renewiltord</span><span>|</span><a href="#36234752">root</a><span>|</span><a href="#36235996">parent</a><span>|</span><a href="#36235929">next</a><span>|</span><label class="collapse" for="c-36237405">[-]</label><label class="expand" for="c-36237405">[1 more]</label></div><br/><div class="children"><div class="content">Very cool. Thanks for the tip! I had no idea this was possible.</div><br/></div></div></div></div></div></div><div id="36235929" class="c"><input type="checkbox" id="c-36235929" checked=""/><div class="controls bullet"><span class="by">j45</span><span>|</span><a href="#36234752">parent</a><span>|</span><a href="#36234876">prev</a><span>|</span><a href="#36234795">next</a><span>|</span><label class="collapse" for="c-36235929">[-]</label><label class="expand" for="c-36235929">[1 more]</label></div><br/><div class="children"><div class="content">Would something like AlgoVPN installed at the appropriate point in your hierarchy&#x2F;network map simplify this?<p>Unsure if&#x2F;how&#x2F;why you want to modify firewalls and iptables.<p>If you&#x27;re ok running ubuntu or debian, the commands for ufw as a firewall are pretty straight forward to setup and maintain and can be scriptable.<p>Algo is a nice install that works just fine installed as a docker image running on a linux VPS.  Installing docker and docker-compose are essential for this.<p>If after reading this you are saying there is no comprehensive step by step article that does this, let me know, and I can see if I have my install notes and the install script I created to put up somewhere.<p>I think sometimes enough years of linux and looking things up can be at fault for some of the documentation needs.</div><br/></div></div><div id="36234795" class="c"><input type="checkbox" id="c-36234795" checked=""/><div class="controls bullet"><span class="by">Nux</span><span>|</span><a href="#36234752">parent</a><span>|</span><a href="#36235929">prev</a><span>|</span><a href="#36237798">next</a><span>|</span><label class="collapse" for="c-36234795">[-]</label><label class="expand" for="c-36234795">[3 more]</label></div><br/><div class="children"><div class="content">What is an sbc and the phone&#x27;s relation to it?</div><br/><div id="36235982" class="c"><input type="checkbox" id="c-36235982" checked=""/><div class="controls bullet"><span class="by">harry8</span><span>|</span><a href="#36234752">root</a><span>|</span><a href="#36234795">parent</a><span>|</span><a href="#36237798">next</a><span>|</span><label class="collapse" for="c-36235982">[-]</label><label class="expand" for="c-36235982">[2 more]</label></div><br/><div class="children"><div class="content">SBC - Single Board Computer. Raspberry Pi most famous example? <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Single-board_computer" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Single-board_computer</a><p>In this instance consider the SBC a lightweight, low-power, always on server sitting behind his&#x2F;her router.</div><br/><div id="36238739" class="c"><input type="checkbox" id="c-36238739" checked=""/><div class="controls bullet"><span class="by">Nux</span><span>|</span><a href="#36234752">root</a><span>|</span><a href="#36235982">parent</a><span>|</span><a href="#36237798">next</a><span>|</span><label class="collapse" for="c-36238739">[-]</label><label class="expand" for="c-36238739">[1 more]</label></div><br/><div class="children"><div class="content">I thought it&#x27;s a VOIP SBC, but don&#x27;t know how those work to fully understand his issue, hence my question.</div><br/></div></div></div></div></div></div></div></div><div id="36237798" class="c"><input type="checkbox" id="c-36237798" checked=""/><div class="controls bullet"><span class="by">aborsy</span><span>|</span><a href="#36234752">prev</a><span>|</span><a href="#36235979">next</a><span>|</span><label class="collapse" for="c-36237798">[-]</label><label class="expand" for="c-36237798">[5 more]</label></div><br/><div class="children"><div class="content">I’m curious, if we have a hub and spoke vpn, could we have peer to peer end to end encryption, with the exchange between them facilitated by an untrusted hub on a cloud instance?<p>So, the phone wants to connect to a media server at home. In hub and spoke vpn, both connect to a vpn server. The problem is, the traffic decrypted on VPS. I want the packers from phone go to vps then to home, with end to end encryption. The VPS acts as a relay.<p>The connection between peers need not be direct (peer to peer). The traffic could go through the central hub if needed. I just don’t want the hub to access the decrypted traffic.</div><br/><div id="36238076" class="c"><input type="checkbox" id="c-36238076" checked=""/><div class="controls bullet"><span class="by">pluto_modadic</span><span>|</span><a href="#36237798">parent</a><span>|</span><a href="#36238827">next</a><span>|</span><label class="collapse" for="c-36238076">[-]</label><label class="expand" for="c-36238076">[1 more]</label></div><br/><div class="children"><div class="content">mesh VPNs (tailscale, zerotier) are what you want :) tailscale will do the hole punching for you. :)</div><br/></div></div><div id="36238827" class="c"><input type="checkbox" id="c-36238827" checked=""/><div class="controls bullet"><span class="by">candiodari</span><span>|</span><a href="#36237798">parent</a><span>|</span><a href="#36238076">prev</a><span>|</span><a href="#36237841">next</a><span>|</span><label class="collapse" for="c-36238827">[-]</label><label class="expand" for="c-36238827">[1 more]</label></div><br/><div class="children"><div class="content">In professional settings what you&#x27;re describing is more-or-less what DMVPN provides.</div><br/></div></div><div id="36237841" class="c"><input type="checkbox" id="c-36237841" checked=""/><div class="controls bullet"><span class="by">no_time</span><span>|</span><a href="#36237798">parent</a><span>|</span><a href="#36238827">prev</a><span>|</span><a href="#36235979">next</a><span>|</span><label class="collapse" for="c-36237841">[-]</label><label class="expand" for="c-36237841">[2 more]</label></div><br/><div class="children"><div class="content">You basically described Tor.</div><br/><div id="36237929" class="c"><input type="checkbox" id="c-36237929" checked=""/><div class="controls bullet"><span class="by">aborsy</span><span>|</span><a href="#36237798">root</a><span>|</span><a href="#36237841">parent</a><span>|</span><a href="#36235979">next</a><span>|</span><label class="collapse" for="c-36237929">[-]</label><label class="expand" for="c-36237929">[1 more]</label></div><br/><div class="children"><div class="content">Mesh VPN is one way. The VPS node will be the coordination server.<p>Tor is another, onion layers of tunnels.<p>But maybe there is an easy networking solution, like creating a route table on VPS implementing a relay or STUN server , that says traffic coming from the peers public key is exchanged on VPS server.</div><br/></div></div></div></div></div></div><div id="36235979" class="c"><input type="checkbox" id="c-36235979" checked=""/><div class="controls bullet"><span class="by">josephh</span><span>|</span><a href="#36237798">prev</a><span>|</span><a href="#36233318">next</a><span>|</span><label class="collapse" for="c-36235979">[-]</label><label class="expand" for="c-36235979">[2 more]</label></div><br/><div class="children"><div class="content">Does anyone know the latest on having WG support dynamically assigned IP for peers? There have been some work done[1], but it seems to have stalled for quite some time.<p>1. <a href="https:&#x2F;&#x2F;github.com&#x2F;WireGuard&#x2F;wg-dynamic">https:&#x2F;&#x2F;github.com&#x2F;WireGuard&#x2F;wg-dynamic</a></div><br/><div id="36238367" class="c"><input type="checkbox" id="c-36238367" checked=""/><div class="controls bullet"><span class="by">vegardx</span><span>|</span><a href="#36235979">parent</a><span>|</span><a href="#36233318">next</a><span>|</span><label class="collapse" for="c-36238367">[-]</label><label class="expand" for="c-36238367">[1 more]</label></div><br/><div class="children"><div class="content">The stateless nature of Wireguard makes it kind of hard to implement. Having something DHCP-esque makes sense when you have an external mechanism for authentication, like most traditional VPN software does, but with Wireguard you have to exchange public keys with peers that communicate with each other, so you might as well just set up the IP at the same time.</div><br/></div></div></div></div><div id="36233318" class="c"><input type="checkbox" id="c-36233318" checked=""/><div class="controls bullet"><span class="by">aborsy</span><span>|</span><a href="#36235979">prev</a><span>|</span><a href="#36234492">next</a><span>|</span><label class="collapse" for="c-36233318">[-]</label><label class="expand" for="c-36233318">[7 more]</label></div><br/><div class="children"><div class="content">This VPN setup is great to use in public WiFi.<p>But be aware that the IP address may not be private in cloud instances.<p>Is it known to what extent the traffic is logged on AWS EC2 or Lightsail?</div><br/><div id="36233937" class="c"><input type="checkbox" id="c-36233937" checked=""/><div class="controls bullet"><span class="by">atomicnumber3</span><span>|</span><a href="#36233318">parent</a><span>|</span><a href="#36234066">next</a><span>|</span><label class="collapse" for="c-36233937">[-]</label><label class="expand" for="c-36233937">[5 more]</label></div><br/><div class="children"><div class="content">&gt;traffic logging<p>None! that&#x27;s an enterprise feature, you&#x27;ll have to contact sales for pricing</div><br/><div id="36235108" class="c"><input type="checkbox" id="c-36235108" checked=""/><div class="controls bullet"><span class="by">rbanffy</span><span>|</span><a href="#36233318">root</a><span>|</span><a href="#36233937">parent</a><span>|</span><a href="#36234374">next</a><span>|</span><label class="collapse" for="c-36235108">[-]</label><label class="expand" for="c-36235108">[1 more]</label></div><br/><div class="children"><div class="content">Not necessarily. If <i>you</i> want to see the logs, you’ll have to pay for them.<p>If your government wants them, they’ll probably get them for free.</div><br/></div></div><div id="36234374" class="c"><input type="checkbox" id="c-36234374" checked=""/><div class="controls bullet"><span class="by">aborsy</span><span>|</span><a href="#36233318">root</a><span>|</span><a href="#36233937">parent</a><span>|</span><a href="#36235108">prev</a><span>|</span><a href="#36234151">next</a><span>|</span><label class="collapse" for="c-36234374">[-]</label><label class="expand" for="c-36234374">[1 more]</label></div><br/><div class="children"><div class="content">I guess your response indicates that the DNS records are not logged.<p>I thought some metadata is logged, at least for security or to fight abuse, but probably for more reasons. But I’m not sure.</div><br/></div></div><div id="36234151" class="c"><input type="checkbox" id="c-36234151" checked=""/><div class="controls bullet"><span class="by">jesuspiece</span><span>|</span><a href="#36233318">root</a><span>|</span><a href="#36233937">parent</a><span>|</span><a href="#36234374">prev</a><span>|</span><a href="#36234066">next</a><span>|</span><label class="collapse" for="c-36234151">[-]</label><label class="expand" for="c-36234151">[2 more]</label></div><br/><div class="children"><div class="content">? VPC FLow logs exist, as well as load balancer logs</div><br/><div id="36234421" class="c"><input type="checkbox" id="c-36234421" checked=""/><div class="controls bullet"><span class="by">slt2021</span><span>|</span><a href="#36233318">root</a><span>|</span><a href="#36234151">parent</a><span>|</span><a href="#36234066">next</a><span>|</span><label class="collapse" for="c-36234421">[-]</label><label class="expand" for="c-36234421">[1 more]</label></div><br/><div class="children"><div class="content">if you enable these features and pay for them?
so just by not paying for these features will you get privacy naturally?</div><br/></div></div></div></div></div></div></div></div><div id="36234492" class="c"><input type="checkbox" id="c-36234492" checked=""/><div class="controls bullet"><span class="by">tyingq</span><span>|</span><a href="#36233318">prev</a><span>|</span><a href="#36236772">next</a><span>|</span><label class="collapse" for="c-36234492">[-]</label><label class="expand" for="c-36234492">[5 more]</label></div><br/><div class="children"><div class="content">Depending on the instance type, Lightsail easily gets throttled into oblivion.  The $3.50&#x2F;month instance allows for 5% utilization before you start eating up burst capacity. Perhaps WireGuard is light enough that it&#x27;s okay, but thought it worth mentioning.</div><br/><div id="36234961" class="c"><input type="checkbox" id="c-36234961" checked=""/><div class="controls bullet"><span class="by">Sohcahtoa82</span><span>|</span><a href="#36234492">parent</a><span>|</span><a href="#36235938">next</a><span>|</span><label class="collapse" for="c-36234961">[-]</label><label class="expand" for="c-36234961">[3 more]</label></div><br/><div class="children"><div class="content">LightSail instances are burstable t2&#x2F;t3 instances under the hood.<p>Which...those types of instances have their use.  But the fact that AWS kind of hides the whole CPU credit thing in LightSail is a bit misleading.</div><br/><div id="36235637" class="c"><input type="checkbox" id="c-36235637" checked=""/><div class="controls bullet"><span class="by">tyingq</span><span>|</span><a href="#36234492">root</a><span>|</span><a href="#36234961">parent</a><span>|</span><a href="#36237044">next</a><span>|</span><label class="collapse" for="c-36235637">[-]</label><label class="expand" for="c-36235637">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, it&#x27;s documented, but it&#x27;s fairly buried in a place where you&#x27;ll only find it if you already know throttling exists for Lightsail.  It&#x27;s irritating when I read blog posts comparing Lightsail to other, normal VPS offerings because it&#x27;s not very normal :)</div><br/></div></div><div id="36237044" class="c"><input type="checkbox" id="c-36237044" checked=""/><div class="controls bullet"><span class="by">supriyo-biswas</span><span>|</span><a href="#36234492">root</a><span>|</span><a href="#36234961">parent</a><span>|</span><a href="#36235637">prev</a><span>|</span><a href="#36235938">next</a><span>|</span><label class="collapse" for="c-36237044">[-]</label><label class="expand" for="c-36237044">[1 more]</label></div><br/><div class="children"><div class="content">You’ll also discover it if you look around in IMDS, though that’s no excuse for not documenting the throttle limits.</div><br/></div></div></div></div><div id="36235938" class="c"><input type="checkbox" id="c-36235938" checked=""/><div class="controls bullet"><span class="by">j45</span><span>|</span><a href="#36234492">parent</a><span>|</span><a href="#36234961">prev</a><span>|</span><a href="#36236772">next</a><span>|</span><label class="collapse" for="c-36235938">[-]</label><label class="expand" for="c-36235938">[1 more]</label></div><br/><div class="children"><div class="content">Linode isn&#x27;t too bad for a VPS instance - best ot make sure the IP isn&#x27;t on many block lists, take your time logging into all your services through it and the rest can be generally smooth sailing.<p>More and more cloud providers look for and block vpn&#x27;s self-hosted with vps providers, in which case, finding access to residential connections (trading) or a provider is a way to go.</div><br/></div></div></div></div><div id="36236772" class="c"><input type="checkbox" id="c-36236772" checked=""/><div class="controls bullet"><span class="by">dangerboysteve</span><span>|</span><a href="#36234492">prev</a><span>|</span><a href="#36237528">next</a><span>|</span><label class="collapse" for="c-36236772">[-]</label><label class="expand" for="c-36236772">[1 more]</label></div><br/><div class="children"><div class="content">There are also many scripts to automate the wireguard install and client setup and generate QR codes as well.   Example: 
<a href="https:&#x2F;&#x2F;github.com&#x2F;angristan&#x2F;wireguard-install">https:&#x2F;&#x2F;github.com&#x2F;angristan&#x2F;wireguard-install</a></div><br/></div></div><div id="36237528" class="c"><input type="checkbox" id="c-36237528" checked=""/><div class="controls bullet"><span class="by">caseyf7</span><span>|</span><a href="#36236772">prev</a><span>|</span><a href="#36236189">next</a><span>|</span><label class="collapse" for="c-36237528">[-]</label><label class="expand" for="c-36237528">[2 more]</label></div><br/><div class="children"><div class="content">I’m surprised how many hotels block WireGuard now. I’m finding it harder and harder to do this.</div><br/><div id="36238889" class="c"><input type="checkbox" id="c-36238889" checked=""/><div class="controls bullet"><span class="by">girishso</span><span>|</span><a href="#36237528">parent</a><span>|</span><a href="#36236189">next</a><span>|</span><label class="collapse" for="c-36238889">[-]</label><label class="expand" for="c-36238889">[1 more]</label></div><br/><div class="children"><div class="content">Yes, I was surprised that internet stopped after connecting to OpenVPN at home. Had to use the mobile network.</div><br/></div></div></div></div><div id="36236189" class="c"><input type="checkbox" id="c-36236189" checked=""/><div class="controls bullet"><span class="by">benr75</span><span>|</span><a href="#36237528">prev</a><span>|</span><a href="#36234881">next</a><span>|</span><label class="collapse" for="c-36236189">[-]</label><label class="expand" for="c-36236189">[1 more]</label></div><br/><div class="children"><div class="content">I built this to deploy a wireguard instance to your digital ocean account. Pick the region you want. It’s free, just pay digital ocean for the droplet…<p>Https:&#x2F;&#x2F;vpn.democratize.cloud</div><br/></div></div><div id="36234881" class="c"><input type="checkbox" id="c-36234881" checked=""/><div class="controls bullet"><span class="by">WirelessGigabit</span><span>|</span><a href="#36236189">prev</a><span>|</span><a href="#36234376">next</a><span>|</span><label class="collapse" for="c-36234881">[-]</label><label class="expand" for="c-36234881">[1 more]</label></div><br/><div class="children"><div class="content">Careful with using a domain for this. If your domain has an A and an AAAA Wireguard will prefer the A.<p>Which sucks on 464xlat networks, as the proxy dies after a while making you lose incoming connections.</div><br/></div></div><div id="36234376" class="c"><input type="checkbox" id="c-36234376" checked=""/><div class="controls bullet"><span class="by">MallocVoidstar</span><span>|</span><a href="#36234881">prev</a><span>|</span><a href="#36235720">next</a><span>|</span><label class="collapse" for="c-36234376">[-]</label><label class="expand" for="c-36234376">[1 more]</label></div><br/><div class="children"><div class="content">Easier to use <a href="https:&#x2F;&#x2F;github.com&#x2F;trailofbits&#x2F;algo">https:&#x2F;&#x2F;github.com&#x2F;trailofbits&#x2F;algo</a></div><br/></div></div><div id="36235720" class="c"><input type="checkbox" id="c-36235720" checked=""/><div class="controls bullet"><span class="by">noncoml</span><span>|</span><a href="#36234376">prev</a><span>|</span><a href="#36234861">next</a><span>|</span><label class="collapse" for="c-36235720">[-]</label><label class="expand" for="c-36235720">[4 more]</label></div><br/><div class="children"><div class="content">And then half of the websites are not working because they think you are a crawler&#x2F;malicious user.</div><br/><div id="36236823" class="c"><input type="checkbox" id="c-36236823" checked=""/><div class="controls bullet"><span class="by">oriettaxx</span><span>|</span><a href="#36235720">parent</a><span>|</span><a href="#36234861">next</a><span>|</span><label class="collapse" for="c-36236823">[-]</label><label class="expand" for="c-36236823">[3 more]</label></div><br/><div class="children"><div class="content">&#x27;half&#x27; is a lot, can y give some examples?</div><br/><div id="36237701" class="c"><input type="checkbox" id="c-36237701" checked=""/><div class="controls bullet"><span class="by">noncoml</span><span>|</span><a href="#36235720">root</a><span>|</span><a href="#36236823">parent</a><span>|</span><a href="#36236912">next</a><span>|</span><label class="collapse" for="c-36237701">[-]</label><label class="expand" for="c-36237701">[1 more]</label></div><br/><div class="children"><div class="content">Was figure of speech. Not to be taken literally</div><br/></div></div><div id="36236912" class="c"><input type="checkbox" id="c-36236912" checked=""/><div class="controls bullet"><span class="by">Aleklart</span><span>|</span><a href="#36235720">root</a><span>|</span><a href="#36236823">parent</a><span>|</span><a href="#36237701">prev</a><span>|</span><a href="#36234861">next</a><span>|</span><label class="collapse" for="c-36236912">[-]</label><label class="expand" for="c-36236912">[1 more]</label></div><br/><div class="children"><div class="content">openai</div><br/></div></div></div></div></div></div><div id="36234861" class="c"><input type="checkbox" id="c-36234861" checked=""/><div class="controls bullet"><span class="by">hejcloud</span><span>|</span><a href="#36235720">prev</a><span>|</span><a href="#36234246">next</a><span>|</span><label class="collapse" for="c-36234861">[-]</label><label class="expand" for="c-36234861">[3 more]</label></div><br/><div class="children"><div class="content">Question: Assuming PKI is &quot;solved&quot; (whatever that means) isn&#x27;t mTLS in contrast to sth like a VPN the preferred solution nowadays? Or both? I&#x27;m asking because Wireguard itself looks a lot like mTLS to me and I&#x27;m curious how HN people currently see that context.</div><br/><div id="36235694" class="c"><input type="checkbox" id="c-36235694" checked=""/><div class="controls bullet"><span class="by">tptacek</span><span>|</span><a href="#36234861">parent</a><span>|</span><a href="#36236268">next</a><span>|</span><label class="collapse" for="c-36235694">[-]</label><label class="expand" for="c-36235694">[1 more]</label></div><br/><div class="children"><div class="content">WireGuard is a better, safer protocol than mTLS. If you can use WireGuard, that&#x27;s what you should use (often you can&#x27;t, because you don&#x27;t want IP addressing between your components).</div><br/></div></div><div id="36236268" class="c"><input type="checkbox" id="c-36236268" checked=""/><div class="controls bullet"><span class="by">computerfriend</span><span>|</span><a href="#36234861">parent</a><span>|</span><a href="#36235694">prev</a><span>|</span><a href="#36234246">next</a><span>|</span><label class="collapse" for="c-36236268">[-]</label><label class="expand" for="c-36236268">[1 more]</label></div><br/><div class="children"><div class="content">mTLS is not a VPN.</div><br/></div></div></div></div><div id="36234246" class="c"><input type="checkbox" id="c-36234246" checked=""/><div class="controls bullet"><span class="by">lormayna</span><span>|</span><a href="#36234861">prev</a><span>|</span><label class="collapse" for="c-36234246">[-]</label><label class="expand" for="c-36234246">[8 more]</label></div><br/><div class="children"><div class="content">Why not using an Ansible playbook? You can deploy it on any VPS without vendor lock in.</div><br/><div id="36235044" class="c"><input type="checkbox" id="c-36235044" checked=""/><div class="controls bullet"><span class="by">mcoliver</span><span>|</span><a href="#36234246">parent</a><span>|</span><a href="#36234655">next</a><span>|</span><label class="collapse" for="c-36235044">[-]</label><label class="expand" for="c-36235044">[2 more]</label></div><br/><div class="children"><div class="content">First off...wow.  Never expected this to hit front page.  Just started writing and trying to get the juices flowing.<p>You could totally use an Ansible playbook.  I&#x27;ve used a lot of them over the years.  Ansible, Terraform, Salt, Chef, Puppet, etc... 
 As I said at the end of the article I glossed over a lot of things and the beauty of tech is there are lots of ways to do things.  Do what works for you.  Tradeoffs all over the place.<p>I do think that shell scripts provide lower level insight to people that may be trying to understand what is going on rather than the magic of something like Ansible that abstracts things away.  Or maybe I&#x27;m just old school :D</div><br/><div id="36235946" class="c"><input type="checkbox" id="c-36235946" checked=""/><div class="controls bullet"><span class="by">j45</span><span>|</span><a href="#36234246">root</a><span>|</span><a href="#36235044">parent</a><span>|</span><a href="#36234655">next</a><span>|</span><label class="collapse" for="c-36235946">[-]</label><label class="expand" for="c-36235946">[1 more]</label></div><br/><div class="children"><div class="content">Ansible, etc, are great.<p>But also one more dependancy.<p>More and more I&#x27;m finding having a bash script that can work on most debian&#x2F;ubuntu systems is pretty handy to be able to run remotely whether it&#x27;s a VPS or more.</div><br/></div></div></div></div><div id="36234655" class="c"><input type="checkbox" id="c-36234655" checked=""/><div class="controls bullet"><span class="by">Nux</span><span>|</span><a href="#36234246">parent</a><span>|</span><a href="#36235044">prev</a><span>|</span><a href="#36234427">next</a><span>|</span><label class="collapse" for="c-36234655">[-]</label><label class="expand" for="c-36234655">[3 more]</label></div><br/><div class="children"><div class="content">I didn&#x27;t care about the AWS and zsh aspects of the article, but what vendor lock-in are you talking about and how exactly would an ansible playbook sort it?<p>All you need is any ubuntu vps - in fact any systemd distro if you ignore the &quot;ufw&quot; commands - and the 50 or so lines following &quot;Wireguard Setup&quot;.<p>It doesn&#x27;t get more simple than this.</div><br/><div id="36234791" class="c"><input type="checkbox" id="c-36234791" checked=""/><div class="controls bullet"><span class="by">hejcloud</span><span>|</span><a href="#36234246">root</a><span>|</span><a href="#36234655">parent</a><span>|</span><a href="#36234427">next</a><span>|</span><label class="collapse" for="c-36234791">[-]</label><label class="expand" for="c-36234791">[2 more]</label></div><br/><div class="children"><div class="content">Well using the aws cli is locking you in to AWS, isn&#x27;t it? And at least from my experience those &quot;just 50 lines of shell&quot; can get very messy overtime. Eventually, if you add more features (pretty much every project gets more features over time), you will refactor once or twice and end up rewriting it in Python, make it more declarative because it&#x27;s easier to test and tada, you just reinvented Ansible yourself. I think this question is legit.</div><br/><div id="36234874" class="c"><input type="checkbox" id="c-36234874" checked=""/><div class="controls bullet"><span class="by">Nux</span><span>|</span><a href="#36234246">root</a><span>|</span><a href="#36234791">parent</a><span>|</span><a href="#36234427">next</a><span>|</span><label class="collapse" for="c-36234874">[-]</label><label class="expand" for="c-36234874">[1 more]</label></div><br/><div class="children"><div class="content">Question is not legit. Refactor what? Did you guys actually read the article?<p>Just copy&#x2F;paste them commands in any linux vps. You don&#x27;t need aws, at least lightsail is cheap. Ionos (1&amp;1) is cheaper.</div><br/></div></div></div></div></div></div><div id="36234427" class="c"><input type="checkbox" id="c-36234427" checked=""/><div class="controls bullet"><span class="by">brazzledazzle</span><span>|</span><a href="#36234246">parent</a><span>|</span><a href="#36234655">prev</a><span>|</span><a href="#36234444">next</a><span>|</span><label class="collapse" for="c-36234427">[-]</label><label class="expand" for="c-36234427">[1 more]</label></div><br/><div class="children"><div class="content">Might be the only tooling they have experience using. “When the only thing you have is a hammer everything is a nail” sort of thing.</div><br/></div></div></div></div></div></div></div></div></div></body></html>