<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1699174857834" as="style"/><link rel="stylesheet" href="styles.css?v=1699174857834"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/Danlock/gogosseract">Show HN: Gogosseract, a Go Lib for CGo-Free Tesseract OCR via Wazero</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>dlock17</span> | <span>13 comments</span></div><br/><div><div id="38149237" class="c"><input type="checkbox" id="c-38149237" checked=""/><div class="controls bullet"><span class="by">yklcs</span><span>|</span><a href="#38149230">next</a><span>|</span><label class="collapse" for="c-38149237">[-]</label><label class="expand" for="c-38149237">[1 more]</label></div><br/><div class="children"><div class="content">I wrote a short blog post[1] on this method a while ago. I do think running WASM in embedded runtimes is a pretty good option, but overhead remains high, and WASI remains somewhat fragmented between compilers and runtimes.<p>I think this method really shines in Go as not having CGo simplifies a lot of things, and as a decently performant JITed runtime exists in the form of wazero.<p>[1]: <a href="https:&#x2F;&#x2F;yklcs.com&#x2F;blog&#x2F;universal-libs-with-wasm" rel="nofollow noreferrer">https:&#x2F;&#x2F;yklcs.com&#x2F;blog&#x2F;universal-libs-with-wasm</a></div><br/></div></div><div id="38149230" class="c"><input type="checkbox" id="c-38149230" checked=""/><div class="controls bullet"><span class="by">tommiegannert</span><span>|</span><a href="#38149237">prev</a><span>|</span><a href="#38148822">next</a><span>|</span><label class="collapse" for="c-38149230">[-]</label><label class="expand" for="c-38149230">[1 more]</label></div><br/><div class="children"><div class="content">Thanks for sharing!<p>Since OCR is a somewhat slow process, how does the WASM approach compare to running libtesseract in a subprocess and use some IPC layer to talk to Go? It would require a separate C++ compiler, but not CGo.<p>&gt; one of the largest Open Source OCR<p>Tangential, but are there others as large as Tesseract? It seems to pop up anywhere I look.</div><br/></div></div><div id="38148822" class="c"><input type="checkbox" id="c-38148822" checked=""/><div class="controls bullet"><span class="by">mappu</span><span>|</span><a href="#38149230">prev</a><span>|</span><a href="#38149329">next</a><span>|</span><label class="collapse" for="c-38148822">[-]</label><label class="expand" for="c-38148822">[2 more]</label></div><br/><div class="children"><div class="content">Another really interesting way to approach this problem would be to adapt wasm2c to emit Go output. It should result in better performance than wazero.</div><br/><div id="38149124" class="c"><input type="checkbox" id="c-38149124" checked=""/><div class="controls bullet"><span class="by">dlock17</span><span>|</span><a href="#38148822">parent</a><span>|</span><a href="#38149329">next</a><span>|</span><label class="collapse" for="c-38149124">[-]</label><label class="expand" for="c-38149124">[1 more]</label></div><br/><div class="children"><div class="content">You mean this? <a href="https:&#x2F;&#x2F;github.com&#x2F;WebAssembly&#x2F;wabt&#x2F;blob&#x2F;main&#x2F;wasm2c&#x2F;README.md">https:&#x2F;&#x2F;github.com&#x2F;WebAssembly&#x2F;wabt&#x2F;blob&#x2F;main&#x2F;wasm2c&#x2F;README....</a><p>That seems like quite an undertaking. But at that point, It would make sense to cut out WASM entirely like <a href="https:&#x2F;&#x2F;datastation.multiprocess.io&#x2F;blog&#x2F;2022-05-12-sqlite-in-go-with-and-without-cgo.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;datastation.multiprocess.io&#x2F;blog&#x2F;2022-05-12-sqlite-i...</a></div><br/></div></div></div></div><div id="38149329" class="c"><input type="checkbox" id="c-38149329" checked=""/><div class="controls bullet"><span class="by">technics256</span><span>|</span><a href="#38148822">prev</a><span>|</span><a href="#38147261">next</a><span>|</span><label class="collapse" for="c-38149329">[-]</label><label class="expand" for="c-38149329">[1 more]</label></div><br/><div class="children"><div class="content">Off topic but in general how does something like this compare to cloud hosted ocr solutions?</div><br/></div></div><div id="38147261" class="c"><input type="checkbox" id="c-38147261" checked=""/><div class="controls bullet"><span class="by">iampims</span><span>|</span><a href="#38149329">prev</a><span>|</span><a href="#38148367">next</a><span>|</span><label class="collapse" for="c-38147261">[-]</label><label class="expand" for="c-38147261">[2 more]</label></div><br/><div class="children"><div class="content">To me, this is the real value of Wasm: platform independent libraries with a standard interface that doesn’t require C.</div><br/><div id="38148975" class="c"><input type="checkbox" id="c-38148975" checked=""/><div class="controls bullet"><span class="by">slimsag</span><span>|</span><a href="#38147261">parent</a><span>|</span><a href="#38148367">next</a><span>|</span><label class="collapse" for="c-38148975">[-]</label><label class="expand" for="c-38148975">[1 more]</label></div><br/><div class="children"><div class="content">WASM runtimes miss out on a _lot_ of optimizations that a battle-tested C compiler will perform, and sometimes requires machine emulation (e.g. Go compiled to WASM results in a virtual machine&#x2F;emulation layer to run Go code.)<p>It can work, but it&#x27;s not the fastest thing in the world.<p>I think languages that make working with C&#x2F;C++ code much more seamless, e.g. as nice as working with Go code can be, is a better approach. Zig does this well and feels quite natural coming from Go. It can also be used to make CGO cross compilation &#x27;just work&#x27; and alleviate many of those pains.</div><br/></div></div></div></div><div id="38148367" class="c"><input type="checkbox" id="c-38148367" checked=""/><div class="controls bullet"><span class="by">donatj</span><span>|</span><a href="#38147261">prev</a><span>|</span><a href="#38147282">next</a><span>|</span><label class="collapse" for="c-38148367">[-]</label><label class="expand" for="c-38148367">[2 more]</label></div><br/><div class="children"><div class="content">Oh awesome. I was really hoping a native OCR would pop up but this really is the next best thing and a more realistic avenue.</div><br/><div id="38149044" class="c"><input type="checkbox" id="c-38149044" checked=""/><div class="controls bullet"><span class="by">dlock17</span><span>|</span><a href="#38148367">parent</a><span>|</span><a href="#38147282">next</a><span>|</span><label class="collapse" for="c-38149044">[-]</label><label class="expand" for="c-38149044">[1 more]</label></div><br/><div class="children"><div class="content">Exactly, I expected to find one but couldn&#x27;t, so I put together my own. It&#x27;s not the fastest, but it&#x27;ll do for my purposes.</div><br/></div></div></div></div><div id="38147282" class="c"><input type="checkbox" id="c-38147282" checked=""/><div class="controls bullet"><span class="by">richieartoul</span><span>|</span><a href="#38148367">prev</a><span>|</span><a href="#38147307">next</a><span>|</span><label class="collapse" for="c-38147282">[-]</label><label class="expand" for="c-38147282">[2 more]</label></div><br/><div class="children"><div class="content">This is awesome and one of the things I’m really excited about with WASM, and specifically Wazero. The Wazero team is top notch. Now someone just needs to do this with zstd and make it fast…</div><br/><div id="38148817" class="c"><input type="checkbox" id="c-38148817" checked=""/><div class="controls bullet"><span class="by">mappu</span><span>|</span><a href="#38147282">parent</a><span>|</span><a href="#38147307">next</a><span>|</span><label class="collapse" for="c-38148817">[-]</label><label class="expand" for="c-38148817">[1 more]</label></div><br/><div class="children"><div class="content">There&#x27;s a pure-go zstd at <a href="https:&#x2F;&#x2F;github.com&#x2F;klauspost&#x2F;compress">https:&#x2F;&#x2F;github.com&#x2F;klauspost&#x2F;compress</a> - it&#x27;s likely faster than running the upstream zstd under Wazero.</div><br/></div></div></div></div><div id="38147307" class="c"><input type="checkbox" id="c-38147307" checked=""/><div class="controls bullet"><span class="by">breadchris</span><span>|</span><a href="#38147282">prev</a><span>|</span><label class="collapse" for="c-38147307">[-]</label><label class="expand" for="c-38147307">[1 more]</label></div><br/><div class="children"><div class="content">this is sick</div><br/></div></div></div></div></div></div></div></body></html>