<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1728118872792" as="style"/><link rel="stylesheet" href="styles.css?v=1728118872792"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://theor.xyz/esp32-love-notes-demoscene/">ESP32: leaving love notes and entering demoscene territory (2022)</a> <span class="domain">(<a href="https://theor.xyz">theor.xyz</a>)</span></div><div class="subtext"><span>larodi</span> | <span>17 comments</span></div><br/><div><div id="41742697" class="c"><input type="checkbox" id="c-41742697" checked=""/><div class="controls bullet"><span class="by">majke</span><span>|</span><a href="#41743661">next</a><span>|</span><label class="collapse" for="c-41742697">[-]</label><label class="expand" for="c-41742697">[7 more]</label></div><br/><div class="children"><div class="content">ESP32 uses the Xtensa instruction set. As far as I understand this is a custom instruction set, which is surprisingly popular in low power applications.<p>Investigating this lead me to an interesting polish company called semihalf who were recently acquired by google.<p><a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=qLh1FOcGysY" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=qLh1FOcGysY</a><p>Apparently they added some Xtensa support to clang. I guess that means xtensa is very important in the android context.</div><br/><div id="41744278" class="c"><input type="checkbox" id="c-41744278" checked=""/><div class="controls bullet"><span class="by">robjwells</span><span>|</span><a href="#41742697">parent</a><span>|</span><a href="#41744554">next</a><span>|</span><label class="collapse" for="c-41744278">[-]</label><label class="expand" for="c-41744278">[1 more]</label></div><br/><div class="children"><div class="content">Xtensa is from Tensilica (now Cadence) but, as sibling comments point out, new Espressif designs use RISC-V. There&#x27;s a bit of an overlap point: the ESP32-S2 and ESP32-S3 are recent designs that use Xtensa, and they were released at roughly the same time as the ESP32-C3 (I believe the first Espressif RISC-V part).<p>Here&#x27;s the ISA summary for Xtensa LX as used by the ESP32: <a href="https:&#x2F;&#x2F;www.cadence.com&#x2F;content&#x2F;dam&#x2F;cadence-www&#x2F;global&#x2F;en_US&#x2F;documents&#x2F;tools&#x2F;silicon-solutions&#x2F;compute-ip&#x2F;isa-summary.pdf" rel="nofollow">https:&#x2F;&#x2F;www.cadence.com&#x2F;content&#x2F;dam&#x2F;cadence-www&#x2F;global&#x2F;en_US...</a><p>The S2 &amp; S3 are more powerful and capable than the currently available Espressif RISC-V microcontrollers. Perhaps it&#x27;s best to think of them marking the summit or climax of Espressif&#x27;s Xtensa parts. But the future clearly lies with RISC-V.<p>The Xtensa support in LLVM&#x2F;Clang appears to have resulted (at least in part) from Espressif&#x27;s active support for Rust on their microcontrollers. The recent Rust 1.81 release merged support for the ESP32, ESP32-S2 and ESP32-S3 into upstream rustc. It&#x27;s great to see a microcontroller vendor directly support the use of Rust on its parts, and not just its &quot;new&quot; parts.<p>Edit: To be clear, the ESP-IDF framework is a huge C project, so Espressif working on LLVM support for Xtensa is clearly _not just_ for Rust. And &quot;easy mode&quot; Rust-on-Espressif (std support!) relies on the ESP-IDF so merging their patches into LLVM is beneficial all-round.</div><br/></div></div><div id="41744554" class="c"><input type="checkbox" id="c-41744554" checked=""/><div class="controls bullet"><span class="by">ithkuil</span><span>|</span><a href="#41742697">parent</a><span>|</span><a href="#41744278">prev</a><span>|</span><a href="#41743650">next</a><span>|</span><label class="collapse" for="c-41744554">[-]</label><label class="expand" for="c-41744554">[3 more]</label></div><br/><div class="children"><div class="content">Xtensa is an interesting &quot;instruction set&quot; because it&#x27;s not one single instruction set but it&#x27;s a &quot;parametric instruction set&quot; (hence the name which hints at &quot;extensible&quot;)<p>When instantiating an xtensa core you can choose how many registers you want, whether you want to have register windows or not, and many other options.<p>If you want a compiler that targets a given instance of that architecture you have to tailor it to those parameters.</div><br/><div id="41748101" class="c"><input type="checkbox" id="c-41748101" checked=""/><div class="controls bullet"><span class="by">ithkuil</span><span>|</span><a href="#41742697">root</a><span>|</span><a href="#41744554">parent</a><span>|</span><a href="#41746344">next</a><span>|</span><label class="collapse" for="c-41748101">[-]</label><label class="expand" for="c-41748101">[1 more]</label></div><br/><div class="children"><div class="content">BTW I wrote a gdb-protocol speaking software debugger component for the esp8266 (before xtensa wrote&#x2F;published their own)<p>I had to reverse engineer a lot of details (number of registers, Layout of the stack frame in various kinds of interrupts and traps etc) because xtensa didn&#x27;t publish the actual parameters of their xtensa instantiation</div><br/></div></div></div></div><div id="41743650" class="c"><input type="checkbox" id="c-41743650" checked=""/><div class="controls bullet"><span class="by">philsnow</span><span>|</span><a href="#41742697">parent</a><span>|</span><a href="#41744554">prev</a><span>|</span><a href="#41743661">next</a><span>|</span><label class="collapse" for="c-41743650">[-]</label><label class="expand" for="c-41743650">[2 more]</label></div><br/><div class="children"><div class="content">There are ESP32s that use RISC-V, see <a href="https:&#x2F;&#x2F;www.espressif.com&#x2F;en&#x2F;products&#x2F;socs&#x2F;esp32-c3" rel="nofollow">https:&#x2F;&#x2F;www.espressif.com&#x2F;en&#x2F;products&#x2F;socs&#x2F;esp32-c3</a></div><br/><div id="41743730" class="c"><input type="checkbox" id="c-41743730" checked=""/><div class="controls bullet"><span class="by">jsheard</span><span>|</span><a href="#41742697">root</a><span>|</span><a href="#41743650">parent</a><span>|</span><a href="#41743661">next</a><span>|</span><label class="collapse" for="c-41743730">[-]</label><label class="expand" for="c-41743730">[1 more]</label></div><br/><div class="children"><div class="content">All of their models released after a certain point are RISC-V, though there&#x27;s still gaps in the capabilities of their RISC-V range (e.g. no LCD controller or USB OTG) which means it can&#x27;t cover all of the Xtensa models use-cases yet.</div><br/></div></div></div></div></div></div><div id="41743661" class="c"><input type="checkbox" id="c-41743661" checked=""/><div class="controls bullet"><span class="by">camtarn</span><span>|</span><a href="#41742697">prev</a><span>|</span><a href="#41741615">next</a><span>|</span><label class="collapse" for="c-41743661">[-]</label><label class="expand" for="c-41743661">[1 more]</label></div><br/><div class="children"><div class="content">The demoscene trickery is not very significant and is only a tiny part of the article. Great project though, so still worth reading.</div><br/></div></div><div id="41741615" class="c"><input type="checkbox" id="c-41741615" checked=""/><div class="controls bullet"><span class="by">larodi</span><span>|</span><a href="#41743661">prev</a><span>|</span><a href="#41747032">next</a><span>|</span><label class="collapse" for="c-41741615">[-]</label><label class="expand" for="c-41741615">[1 more]</label></div><br/><div class="children"><div class="content">This was already posted back in the day, but gained zero points, which seems unfair, given the tooling applied here. Playing with one TTGO with small display, this all in the article makes lotta sense, and perahsp to others too.</div><br/></div></div><div id="41747032" class="c"><input type="checkbox" id="c-41747032" checked=""/><div class="controls bullet"><span class="by">dlevine</span><span>|</span><a href="#41741615">prev</a><span>|</span><a href="#41743853">next</a><span>|</span><label class="collapse" for="c-41747032">[-]</label><label class="expand" for="c-41747032">[1 more]</label></div><br/><div class="children"><div class="content">I have been screwing around with ESP01s lately (based on the ESP8266, which is the predecessor to the ESP32). It’s amazing how much power you get in a &lt;$5 microcontroller, plus WiFi.</div><br/></div></div><div id="41743853" class="c"><input type="checkbox" id="c-41743853" checked=""/><div class="controls bullet"><span class="by">anyfoo</span><span>|</span><a href="#41747032">prev</a><span>|</span><a href="#41743153">next</a><span>|</span><label class="collapse" for="c-41743853">[-]</label><label class="expand" for="c-41743853">[2 more]</label></div><br/><div class="children"><div class="content">This is great. I shudder a bit over doing all that dev work from Windows, but they made it work very nicely.</div><br/><div id="41747962" class="c"><input type="checkbox" id="c-41747962" checked=""/><div class="controls bullet"><span class="by">reassembled</span><span>|</span><a href="#41743853">parent</a><span>|</span><a href="#41743153">next</a><span>|</span><label class="collapse" for="c-41747962">[-]</label><label class="expand" for="c-41747962">[1 more]</label></div><br/><div class="children"><div class="content">A testament to how well designed and executed the ESP-IDF framework is. Paired with VSCode I’ve found it a joy to work with IDF and my ESP32-S3.</div><br/></div></div></div></div><div id="41743153" class="c"><input type="checkbox" id="c-41743153" checked=""/><div class="controls bullet"><span class="by">pengaru</span><span>|</span><a href="#41743853">prev</a><span>|</span><a href="#41741687">next</a><span>|</span><label class="collapse" for="c-41743153">[-]</label><label class="expand" for="c-41743153">[3 more]</label></div><br/><div class="children"><div class="content">For those on *nux wishing to play with Rocket, I&#x27;ve found emoon&#x27;s GL editor preferable over the Qt one bundled with the library.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;emoon&#x2F;rocket">https:&#x2F;&#x2F;github.com&#x2F;emoon&#x2F;rocket</a></div><br/><div id="41743632" class="c"><input type="checkbox" id="c-41743632" checked=""/><div class="controls bullet"><span class="by">SpaceNugget</span><span>|</span><a href="#41743153">parent</a><span>|</span><a href="#41741687">next</a><span>|</span><label class="collapse" for="c-41743632">[-]</label><label class="expand" for="c-41743632">[2 more]</label></div><br/><div class="children"><div class="content">Emoons&#x27; editor is featured in the article. I don&#x27;t understand these kinds of comments.</div><br/><div id="41748172" class="c"><input type="checkbox" id="c-41748172" checked=""/><div class="controls bullet"><span class="by">pengaru</span><span>|</span><a href="#41743153">root</a><span>|</span><a href="#41743632">parent</a><span>|</span><a href="#41741687">next</a><span>|</span><label class="collapse" for="c-41748172">[-]</label><label class="expand" for="c-41748172">[1 more]</label></div><br/><div class="children"><div class="content">The one actually linked in the article when mentioning emoon&#x27;s is Ground Control [0], which I mistook to be another of emoon&#x27;s projects, but doesn&#x27;t seem to be.<p>The one I highlighted is a work-in-progress GL based editor that isn&#x27;t windows-specific [1], and is indeed the one they were criticizing for the small font&#x2F;not dpi aware, my mistake.  They didn&#x27;t link it in the article, which is why I felt compelled to link it.<p>No need to be a twat about it.  I have commits in emoon&#x27;s GL editor and GNU Rocket, these aren&#x27;t some uninformed b.s. drive-by comments.<p>[0] <a href="https:&#x2F;&#x2F;github.com&#x2F;edoreshef&#x2F;ground-control">https:&#x2F;&#x2F;github.com&#x2F;edoreshef&#x2F;ground-control</a><p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;emoon&#x2F;rocket">https:&#x2F;&#x2F;github.com&#x2F;emoon&#x2F;rocket</a></div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>