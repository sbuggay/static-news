<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1725699671405" as="style"/><link rel="stylesheet" href="styles.css?v=1725699671405"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/nuno-faria/tetris-sql">Show HN: Using SQL&#x27;s Turing completeness to build Tetris</a>Â <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>nffaria</span> | <span>16 comments</span></div><br/><div><div id="41468730" class="c"><input type="checkbox" id="c-41468730" checked=""/><div class="controls bullet"><span class="by">jihadjihad</span><span>|</span><a href="#41468729">next</a><span>|</span><label class="collapse" for="c-41468730">[-]</label><label class="expand" for="c-41468730">[4 more]</label></div><br/><div class="children"><div class="content">It seems at first to be a toy or silly intellectual exercise, but after reading the whole thing it really feels like an example of how constraints can lead to creative solutions. Can&#x27;t log to stdout in the recursive CTE&#x27;s loop? Maybe `RAISE NOTICE` will work. Can&#x27;t take user input from the query itself? What if we stored the input in a table locally and read from that instead with `dblink`?<p>It&#x27;s just a lot of fun, kudos for hacking this together, this is the sort of thing that makes me love software so much.</div><br/><div id="41468879" class="c"><input type="checkbox" id="c-41468879" checked=""/><div class="controls bullet"><span class="by">nffaria</span><span>|</span><a href="#41468730">parent</a><span>|</span><a href="#41469600">next</a><span>|</span><label class="collapse" for="c-41468879">[-]</label><label class="expand" for="c-41468879">[2 more]</label></div><br/><div class="children"><div class="content">Thanks for the kind words, it was exactly like you described. Many times I thought it would not be possible after hitting some of those walls, but luckily there was always a way around them.</div><br/><div id="41469039" class="c"><input type="checkbox" id="c-41469039" checked=""/><div class="controls bullet"><span class="by">tanelpoder</span><span>|</span><a href="#41468730">root</a><span>|</span><a href="#41468879">parent</a><span>|</span><a href="#41469600">next</a><span>|</span><label class="collapse" for="c-41469039">[-]</label><label class="expand" for="c-41469039">[1 more]</label></div><br/><div class="children"><div class="content">I once wrote a top-like tool in Oracle&#x27;s sqlplus client, that is <i>not</i> designed for building self-refreshing terminal UI display apps. Just to see if I could do it, had to get creative too. Used pipelined PL&#x2F;SQL functions with never-ending output stream and a sleep function within it and had to carefully match the sqlplus &quot;fetch array size&quot; with number of rows returned in a batch from the pipelined function. Called it MOATS - the Mother of All Tuning Scripts - and then someone took the idea further and built v2.0 with added colors and charts, etc:<p>The v2.0 UI GIF is here: <a href="https:&#x2F;&#x2F;github.com&#x2F;dbsid&#x2F;moats_rac">https:&#x2F;&#x2F;github.com&#x2F;dbsid&#x2F;moats_rac</a></div><br/></div></div></div></div><div id="41469600" class="c"><input type="checkbox" id="c-41469600" checked=""/><div class="controls bullet"><span class="by">written-beyond</span><span>|</span><a href="#41468730">parent</a><span>|</span><a href="#41468879">prev</a><span>|</span><a href="#41468729">next</a><span>|</span><label class="collapse" for="c-41469600">[-]</label><label class="expand" for="c-41469600">[1 more]</label></div><br/><div class="children"><div class="content">I will admit that in the past I&#x27;ve used `RAISE NOTICE` quite frequently for debugging difficult to navigate PL&#x2F;pgSQL procedures.</div><br/></div></div></div></div><div id="41468729" class="c"><input type="checkbox" id="c-41468729" checked=""/><div class="controls bullet"><span class="by">abhgh</span><span>|</span><a href="#41468730">prev</a><span>|</span><a href="#41470167">next</a><span>|</span><label class="collapse" for="c-41468729">[-]</label><label class="expand" for="c-41468729">[1 more]</label></div><br/><div class="children"><div class="content">Cool project! I remember I had coded a Reinforcement Learning (RL) assignment long ago back in college with just SQL (I was familiar with Oracle back then, so that&#x27;s what I had used). The course instructor was amused, more so when he saw how loops were implemented: I had a &quot;loop&quot; table with a sequence of N numbers in a column, and used to join with it to &quot;loop&quot; N times!</div><br/></div></div><div id="41470167" class="c"><input type="checkbox" id="c-41470167" checked=""/><div class="controls bullet"><span class="by">fishtoaster</span><span>|</span><a href="#41468729">prev</a><span>|</span><a href="#41468896">next</a><span>|</span><label class="collapse" for="c-41470167">[-]</label><label class="expand" for="c-41470167">[1 more]</label></div><br/><div class="children"><div class="content">This is hilarious and amazing.  But moreso than most such cool hack projects, it has a great writeup.  The author really did a great job walking through how it worked.  Love it.</div><br/></div></div><div id="41468896" class="c"><input type="checkbox" id="c-41468896" checked=""/><div class="controls bullet"><span class="by">foreigner</span><span>|</span><a href="#41470167">prev</a><span>|</span><a href="#41470945">next</a><span>|</span><label class="collapse" for="c-41468896">[-]</label><label class="expand" for="c-41468896">[1 more]</label></div><br/><div class="children"><div class="content">This is great but even more impressive than the code is all the documentation and explanation of how it works. Well done!</div><br/></div></div><div id="41470945" class="c"><input type="checkbox" id="c-41470945" checked=""/><div class="controls bullet"><span class="by">gfody</span><span>|</span><a href="#41468896">prev</a><span>|</span><a href="#41471702">next</a><span>|</span><label class="collapse" for="c-41470945">[-]</label><label class="expand" for="c-41470945">[1 more]</label></div><br/><div class="children"><div class="content">I think a general purpose programming language that was just SQL with some provisions for user input and rendering would be really cool. Having to model all your state relationally and implement all your logic declaratively ultimately leads to some very nice code.</div><br/></div></div><div id="41471702" class="c"><input type="checkbox" id="c-41471702" checked=""/><div class="controls bullet"><span class="by">firer</span><span>|</span><a href="#41470945">prev</a><span>|</span><a href="#41471054">next</a><span>|</span><label class="collapse" for="c-41471702">[-]</label><label class="expand" for="c-41471702">[1 more]</label></div><br/><div class="children"><div class="content">This is awesome, great writeup.<p>I never attempted these kinds of things with postgresql, so it was very interesting to contrast the problems and solutions with SQLite, which I&#x27;m more familiar with [1].<p>If anyone is interested in more SQL Turing completeness, the Explain Extended blog is great [2].<p>[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;DanielFi&#x2F;sqlite-vm&#x2F;tree&#x2F;feature&#x2F;io">https:&#x2F;&#x2F;github.com&#x2F;DanielFi&#x2F;sqlite-vm&#x2F;tree&#x2F;feature&#x2F;io</a><p>[2]: <a href="https:&#x2F;&#x2F;explainextended.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;explainextended.com&#x2F;</a></div><br/></div></div><div id="41471054" class="c"><input type="checkbox" id="c-41471054" checked=""/><div class="controls bullet"><span class="by">tisdadd</span><span>|</span><a href="#41471702">prev</a><span>|</span><a href="#41469752">next</a><span>|</span><label class="collapse" for="c-41471054">[-]</label><label class="expand" for="c-41471054">[1 more]</label></div><br/><div class="children"><div class="content">Nice, I remember my boss telling me not to do that when I was an intern for routing services, always wanted to see a working example. Well done.</div><br/></div></div><div id="41469752" class="c"><input type="checkbox" id="c-41469752" checked=""/><div class="controls bullet"><span class="by">gigatexal</span><span>|</span><a href="#41471054">prev</a><span>|</span><a href="#41470648">next</a><span>|</span><label class="collapse" for="c-41469752">[-]</label><label class="expand" for="c-41469752">[1 more]</label></div><br/><div class="children"><div class="content">This is really really cool. Very cool work and welcome to HN!</div><br/></div></div><div id="41470648" class="c"><input type="checkbox" id="c-41470648" checked=""/><div class="controls bullet"><span class="by">prng2021</span><span>|</span><a href="#41469752">prev</a><span>|</span><a href="#41468872">next</a><span>|</span><label class="collapse" for="c-41470648">[-]</label><label class="expand" for="c-41470648">[1 more]</label></div><br/><div class="children"><div class="content">Wow this is amazing. Makes me realize how elementary my SQL skills are.</div><br/></div></div><div id="41468872" class="c"><input type="checkbox" id="c-41468872" checked=""/><div class="controls bullet"><span class="by">otteromkram</span><span>|</span><a href="#41470648">prev</a><span>|</span><a href="#41468533">next</a><span>|</span><label class="collapse" for="c-41468872">[-]</label><label class="expand" for="c-41468872">[1 more]</label></div><br/><div class="children"><div class="content">This is awesome. I did linear regression in T-SQL once and it&#x27;s a fun way to figure out what you can do with the language (eg - if you&#x27;re unfamiliar with CTEs or cursors).<p>I&#x27;ll definitely be checking this out later. Thanks for the post!</div><br/></div></div></div></div></div></div></div></body></html>