<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1704358854790" as="style"/><link rel="stylesheet" href="styles.css?v=1704358854790"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.morling.dev/blog/one-billion-row-challenge/">The One Billion Row Challenge</a> <span class="domain">(<a href="https://www.morling.dev">www.morling.dev</a>)</span></div><div class="subtext"><span>madmax108</span> | <span>98 comments</span></div><br/><div><div id="38864712" class="c"><input type="checkbox" id="c-38864712" checked=""/><div class="controls bullet"><span class="by">spullara</span><span>|</span><a href="#38864426">next</a><span>|</span><label class="collapse" for="c-38864712">[-]</label><label class="expand" for="c-38864712">[1 more]</label></div><br/><div class="children"><div class="content">This has been super fun. My current PR[1] is another 15% faster than my entry in the README. Sadly I haven&#x27;t been able to make any progress on using SIMD to accelerate any part of it.<p>I think the issues with hashing could be easily covered by having the 500 city names in the test data also be randomly generated at test time. There is no way to ensure there aren&#x27;t hash collisions without doing a complete comparison between the names.<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;gunnarmorling&#x2F;1brc&#x2F;pull&#x2F;56">https:&#x2F;&#x2F;github.com&#x2F;gunnarmorling&#x2F;1brc&#x2F;pull&#x2F;56</a></div><br/></div></div><div id="38864426" class="c"><input type="checkbox" id="c-38864426" checked=""/><div class="controls bullet"><span class="by">JohnKemeny</span><span>|</span><a href="#38864712">prev</a><span>|</span><a href="#38864545">next</a><span>|</span><label class="collapse" for="c-38864426">[-]</label><label class="expand" for="c-38864426">[3 more]</label></div><br/><div class="children"><div class="content">&gt; The slowest and the fastest runs are discarded. The mean value of the remaining three runs is the result for that contender and will be added to the leaderboard.<p>I think it&#x27;s better to discard the two slowest, or simply accept the fastest as the correct. There&#x27;s (in my opinion) no good reason to discard the best runs.</div><br/><div id="38864597" class="c"><input type="checkbox" id="c-38864597" checked=""/><div class="controls bullet"><span class="by">mayank</span><span>|</span><a href="#38864426">parent</a><span>|</span><a href="#38864545">next</a><span>|</span><label class="collapse" for="c-38864597">[-]</label><label class="expand" for="c-38864597">[2 more]</label></div><br/><div class="children"><div class="content">This is a pretty standard measure called the Trimmed Mean: <a href="https:&#x2F;&#x2F;statisticsbyjim.com&#x2F;basics&#x2F;trimmed-mean&#x2F;" rel="nofollow">https:&#x2F;&#x2F;statisticsbyjim.com&#x2F;basics&#x2F;trimmed-mean&#x2F;</a></div><br/><div id="38864629" class="c"><input type="checkbox" id="c-38864629" checked=""/><div class="controls bullet"><span class="by">stabbles</span><span>|</span><a href="#38864426">root</a><span>|</span><a href="#38864597">parent</a><span>|</span><a href="#38864545">next</a><span>|</span><label class="collapse" for="c-38864629">[-]</label><label class="expand" for="c-38864629">[1 more]</label></div><br/><div class="children"><div class="content">For performance benchmarking the minimal runtime is typically the best estimator if the computations are identical, cause it measures perf w&#x2F;o interrupts.<p>If the language is garbage collected, or if the test is randomized you obviously don&#x27;t want to look at the minimum.</div><br/></div></div></div></div></div></div><div id="38864545" class="c"><input type="checkbox" id="c-38864545" checked=""/><div class="controls bullet"><span class="by">planb</span><span>|</span><a href="#38864426">prev</a><span>|</span><a href="#38864267">next</a><span>|</span><label class="collapse" for="c-38864545">[-]</label><label class="expand" for="c-38864545">[2 more]</label></div><br/><div class="children"><div class="content">As far as I see the currently best performing solution [0] does not account for hash collisions and therefore probably generates wrong results if enough different cities are in the dataset. Or am I missing something?<p>[0] <a href="https:&#x2F;&#x2F;github.com&#x2F;gunnarmorling&#x2F;1brc&#x2F;blob&#x2F;main&#x2F;src&#x2F;main&#x2F;java&#x2F;dev&#x2F;morling&#x2F;onebrc&#x2F;CalculateAverage_ebarlas.java">https:&#x2F;&#x2F;github.com&#x2F;gunnarmorling&#x2F;1brc&#x2F;blob&#x2F;main&#x2F;src&#x2F;main&#x2F;jav...</a></div><br/><div id="38864609" class="c"><input type="checkbox" id="c-38864609" checked=""/><div class="controls bullet"><span class="by">gunnarmorling</span><span>|</span><a href="#38864545">parent</a><span>|</span><a href="#38864267">next</a><span>|</span><label class="collapse" for="c-38864609">[-]</label><label class="expand" for="c-38864609">[1 more]</label></div><br/><div class="children"><div class="content">Yes, you are right. This came up yesterday and indeed two solutions were violating the &quot;must work for all station names&quot; rule by relying on specific hash functions optimized for the specific data set, which I unfortunately missed during evaluation. I&#x27;ve just removed these entries from the leaderboard for the time being. Both authors are reworking their submissions and then they&#x27;ll be added back.<p>[0] <a href="https:&#x2F;&#x2F;twitter.com&#x2F;mtopolnik&#x2F;status&#x2F;1742652716919251052" rel="nofollow">https:&#x2F;&#x2F;twitter.com&#x2F;mtopolnik&#x2F;status&#x2F;1742652716919251052</a></div><br/></div></div></div></div><div id="38864267" class="c"><input type="checkbox" id="c-38864267" checked=""/><div class="controls bullet"><span class="by">e63f67dd-065b</span><span>|</span><a href="#38864545">prev</a><span>|</span><a href="#38863647">next</a><span>|</span><label class="collapse" for="c-38864267">[-]</label><label class="expand" for="c-38864267">[5 more]</label></div><br/><div class="children"><div class="content">The rule lawyer in me wants to spend the first run spinning up a background daemon that loads everything into memory, pins it there, and maybe even prefetches everything into cache as the subsequent runs perform basically a linear scan (you never have to pagemiss if you have an oracle!).<p>&gt; write a Java program for retrieving temperature measurement values from a text file and calculating the min, mean, and max temperature per weather station<p>Depending on how far you want to stretch it, doesn’t precomputing the result on 1st run count too? Or pre-parsing the numbers into a compact format you can just slurp directly into rolling sums for subsequent runs.<p>Not the slightest in the spirit of the competition, but not against the rules as far as I can tell.<p>Edit: if we don&#x27;t like pre-computation, we can still play with fancy out-of-the-box tricks like pre-sorting the input, pre-parsing, compacting, aligning everything, etc.<p>Edit 2: while we&#x27;re here, why not just patch the calculate_time script to return 0 seconds :) And return 9999 for competitors, for good measure</div><br/><div id="38864314" class="c"><input type="checkbox" id="c-38864314" checked=""/><div class="controls bullet"><span class="by">yellow_lead</span><span>|</span><a href="#38864267">parent</a><span>|</span><a href="#38864602">next</a><span>|</span><label class="collapse" for="c-38864314">[-]</label><label class="expand" for="c-38864314">[3 more]</label></div><br/><div class="children"><div class="content">I think that would violate this rule<p>&gt; The computation must happen at application runtime, i.e. you cannot process the measurements file at build time (for instance, when using GraalVM) and just bake the result into the binary</div><br/><div id="38864635" class="c"><input type="checkbox" id="c-38864635" checked=""/><div class="controls bullet"><span class="by">gunnarmorling</span><span>|</span><a href="#38864267">root</a><span>|</span><a href="#38864314">parent</a><span>|</span><a href="#38864368">next</a><span>|</span><label class="collapse" for="c-38864635">[-]</label><label class="expand" for="c-38864635">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, and I&#x27;d count caching results between runs into the same category, i.e. against the spirit of this challenge. Folks should keep in mind that the goal is to learn something new, rather than &quot;winning&quot; by cheating the rules.</div><br/></div></div><div id="38864368" class="c"><input type="checkbox" id="c-38864368" checked=""/><div class="controls bullet"><span class="by">e63f67dd-065b</span><span>|</span><a href="#38864267">root</a><span>|</span><a href="#38864314">parent</a><span>|</span><a href="#38864635">prev</a><span>|</span><a href="#38864602">next</a><span>|</span><label class="collapse" for="c-38864368">[-]</label><label class="expand" for="c-38864368">[1 more]</label></div><br/><div class="children"><div class="content">Ah I didn&#x27;t actually follow the link to the github repo. I don&#x27;t think that percludes pre-processing the input into something that needs no parsing, however, or to spawn a background daemon that prefetches everything in the right order.<p>The first run is indeed <i>runtime</i>, not build time, so technically I think I still count with pre-computation, sending that to the daemon (or just stashing it somewhere in &#x2F;tmp, or even crazier patching the jarfile), and just printing it back out on the second run onwards.</div><br/></div></div></div></div><div id="38864602" class="c"><input type="checkbox" id="c-38864602" checked=""/><div class="controls bullet"><span class="by">camkego</span><span>|</span><a href="#38864267">parent</a><span>|</span><a href="#38864314">prev</a><span>|</span><a href="#38863647">next</a><span>|</span><label class="collapse" for="c-38864602">[-]</label><label class="expand" for="c-38864602">[1 more]</label></div><br/><div class="children"><div class="content">There is a real issue with providing the contestant the real exact file that will be used in the contest. Because there are 1e9 shades of gray between hard coding the correct answer in a single line program which doesn&#x27;t even read the input, and processing the file as if we don&#x27;t know what it contains.<p>This might become a contest of judging what is fair pre-computing and what is not.<p>That&#x27;s why machine learning contests don&#x27;t let participants see the final data.</div><br/></div></div></div></div><div id="38863647" class="c"><input type="checkbox" id="c-38863647" checked=""/><div class="controls bullet"><span class="by">pbh101</span><span>|</span><a href="#38864267">prev</a><span>|</span><a href="#38863624">next</a><span>|</span><label class="collapse" for="c-38863647">[-]</label><label class="expand" for="c-38863647">[10 more]</label></div><br/><div class="children"><div class="content">&gt; Each contender will be run five times in a row. The slowest and the fastest runs are discarded. The mean value of the remaining three runs is the result for that contender and will be added to the leaderboard.<p>Shouldn’t he take the single fastest time, assuming file (and JDK) being in file cache is controlled for?</div><br/><div id="38863914" class="c"><input type="checkbox" id="c-38863914" checked=""/><div class="controls bullet"><span class="by">bayindirh</span><span>|</span><a href="#38863647">parent</a><span>|</span><a href="#38864060">next</a><span>|</span><label class="collapse" for="c-38863914">[-]</label><label class="expand" for="c-38863914">[8 more]</label></div><br/><div class="children"><div class="content">This is done to simulate real-world performance. Your binary is not the only binary in the system and other services may be running as well. So fastest time is the happiest path and slowest is the unluckiest.<p>The range of remaining three is what you expect to get 99% of the time on a real world system.</div><br/><div id="38864033" class="c"><input type="checkbox" id="c-38864033" checked=""/><div class="controls bullet"><span class="by">cwillu</span><span>|</span><a href="#38863647">root</a><span>|</span><a href="#38863914">parent</a><span>|</span><a href="#38864255">next</a><span>|</span><label class="collapse" for="c-38864033">[-]</label><label class="expand" for="c-38864033">[2 more]</label></div><br/><div class="children"><div class="content">Any production where you&#x27;re routinely scanning a text file with a million records is probably a batch process, and I&#x27;d be shocked if the usual performance wasn&#x27;t much closer to the worst case than the average.</div><br/></div></div><div id="38864255" class="c"><input type="checkbox" id="c-38864255" checked=""/><div class="controls bullet"><span class="by">fragmede</span><span>|</span><a href="#38863647">root</a><span>|</span><a href="#38863914">parent</a><span>|</span><a href="#38864033">prev</a><span>|</span><a href="#38864060">next</a><span>|</span><label class="collapse" for="c-38864255">[-]</label><label class="expand" for="c-38864255">[5 more]</label></div><br/><div class="children"><div class="content">&gt; Your binary is not the only binary in the system and other services may be running as well.<p>Technically yes, but these days most of my machines are single purpose VMs; database&#x2F;load balancer&#x2F;app server&#x2F;etc, so it still seems weird not to take the fastest.</div><br/><div id="38864580" class="c"><input type="checkbox" id="c-38864580" checked=""/><div class="controls bullet"><span class="by">berkes</span><span>|</span><a href="#38863647">root</a><span>|</span><a href="#38864255">parent</a><span>|</span><a href="#38864272">next</a><span>|</span><label class="collapse" for="c-38864580">[-]</label><label class="expand" for="c-38864580">[1 more]</label></div><br/><div class="children"><div class="content">That VM is hardly &quot;single purpose&quot;.<p>There&#x27;s logrotate and other cleanup tasks, monitoring, dns, a firewall, and many more stuff running on that server. No matter how much you offload to the host (or forego), there&#x27;s always a kernel and supporting deamons running alongside or under your app.</div><br/></div></div><div id="38864272" class="c"><input type="checkbox" id="c-38864272" checked=""/><div class="controls bullet"><span class="by">bayindirh</span><span>|</span><a href="#38863647">root</a><span>|</span><a href="#38864255">parent</a><span>|</span><a href="#38864580">prev</a><span>|</span><a href="#38864060">next</a><span>|</span><label class="collapse" for="c-38864272">[-]</label><label class="expand" for="c-38864272">[3 more]</label></div><br/><div class="children"><div class="content">Then, your VM is not the only VM sharing the bare metal. Same thing applies, only on a slightly higher level.<p>As long as you share the metal with other stuff (be it containers, binaries, VMs), there&#x27;s always competition for resources, and your average time becomes your real world time.</div><br/><div id="38864410" class="c"><input type="checkbox" id="c-38864410" checked=""/><div class="controls bullet"><span class="by">vinay_ys</span><span>|</span><a href="#38863647">root</a><span>|</span><a href="#38864272">parent</a><span>|</span><a href="#38864060">next</a><span>|</span><label class="collapse" for="c-38864410">[-]</label><label class="expand" for="c-38864410">[2 more]</label></div><br/><div class="children"><div class="content">Physical memory is not fungible like that across VMs. So, you can expect stuff loaded into memory to stay there unless your kernel inside the VM decides it not to.</div><br/><div id="38864437" class="c"><input type="checkbox" id="c-38864437" checked=""/><div class="controls bullet"><span class="by">bayindirh</span><span>|</span><a href="#38863647">root</a><span>|</span><a href="#38864410">parent</a><span>|</span><a href="#38864060">next</a><span>|</span><label class="collapse" for="c-38864437">[-]</label><label class="expand" for="c-38864437">[1 more]</label></div><br/><div class="children"><div class="content">No, it&#x27;s. VirtIO&#x27;s balooning device can &quot;inflate&quot; to pseudo-allocate memory on a VM to free physical memory for other hosts.<p>Moreover, even if your files in memory, you cannot reserve &quot;memory controller bandwidth&quot;. A VM using tons of memory bandwidth or a couple of cores in the same NUMA node with your VM will inevitably cause some traffic and slow you down.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="38864060" class="c"><input type="checkbox" id="c-38864060" checked=""/><div class="controls bullet"><span class="by">rockwotj</span><span>|</span><a href="#38863647">parent</a><span>|</span><a href="#38863914">prev</a><span>|</span><a href="#38863624">next</a><span>|</span><label class="collapse" for="c-38864060">[-]</label><label class="expand" for="c-38864060">[1 more]</label></div><br/><div class="children"><div class="content">Why?<p>The author does explicitly want all the files to be cached in memory for the later runs: <a href="https:&#x2F;&#x2F;x.com&#x2F;gunnarmorling&#x2F;status&#x2F;1742181941409882151?s=20" rel="nofollow">https:&#x2F;&#x2F;x.com&#x2F;gunnarmorling&#x2F;status&#x2F;1742181941409882151?s=20</a></div><br/></div></div></div></div><div id="38863624" class="c"><input type="checkbox" id="c-38863624" checked=""/><div class="controls bullet"><span class="by">lifthrasiir</span><span>|</span><a href="#38863647">prev</a><span>|</span><a href="#38864404">next</a><span>|</span><label class="collapse" for="c-38863624">[-]</label><label class="expand" for="c-38863624">[5 more]</label></div><br/><div class="children"><div class="content">&gt; Q: Can I make assumptions on the names of the weather stations showing up in the data set?<p>&gt; A: No, while only a fixed set of station names is used by the data set generator, any solution should work with arbitrary UTF-8 station names (for the sake of simplicity, names are guaranteed to contain no `;` character).<p>I&#x27;m unsure if it&#x27;s intentional or not, but this essentially means that the submission should be correct for all inputs, but can and probably should be tuned for the particular input regenerated by `create_measurements.sh`. I can imagine submissions with a perfect hash function tuned for given set of stations, for example.</div><br/><div id="38863763" class="c"><input type="checkbox" id="c-38863763" checked=""/><div class="controls bullet"><span class="by">Hugsun</span><span>|</span><a href="#38863624">parent</a><span>|</span><a href="#38864404">next</a><span>|</span><label class="collapse" for="c-38863763">[-]</label><label class="expand" for="c-38863763">[4 more]</label></div><br/><div class="children"><div class="content">Given this requirement, they would be wise to have the test data be different from the example data. That would prevent overfitting optimizations.</div><br/><div id="38863870" class="c"><input type="checkbox" id="c-38863870" checked=""/><div class="controls bullet"><span class="by">josephg</span><span>|</span><a href="#38863624">root</a><span>|</span><a href="#38863763">parent</a><span>|</span><a href="#38864404">next</a><span>|</span><label class="collapse" for="c-38863870">[-]</label><label class="expand" for="c-38863870">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not sure that it is overfitting to optimize your code for the test set. The requirement is just that you don&#x27;t break compatibility for arbitrary names in the process.<p>This sort of thing shows up all the time in the real world - where, for example, 90% of traffic will hit one endpoint. Or 90% of a database is one specific table. Discovering and microoptimizing for the common case is an important skill.</div><br/><div id="38864660" class="c"><input type="checkbox" id="c-38864660" checked=""/><div class="controls bullet"><span class="by">gunnarmorling</span><span>|</span><a href="#38863624">root</a><span>|</span><a href="#38863870">parent</a><span>|</span><a href="#38863899">next</a><span>|</span><label class="collapse" for="c-38864660">[-]</label><label class="expand" for="c-38864660">[1 more]</label></div><br/><div class="children"><div class="content">Their should be no optimizations which rely on a-priori knowledge of the dataset. I.e. if you calculate a perfect hash function at runtime by inspecting the dataset, that&#x27;s fine (not sure whether it&#x27;s beneficial), but hard coding it, is not.</div><br/></div></div><div id="38863899" class="c"><input type="checkbox" id="c-38863899" checked=""/><div class="controls bullet"><span class="by">lifthrasiir</span><span>|</span><a href="#38863624">root</a><span>|</span><a href="#38863870">parent</a><span>|</span><a href="#38864660">prev</a><span>|</span><a href="#38864404">next</a><span>|</span><label class="collapse" for="c-38863899">[-]</label><label class="expand" for="c-38863899">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s why I was so unsure. I think though, that it is generally better to have the input generator seeded and do not disclose the chosen seed in advance, which prevents overfitting to a single input and yet encourages overfitting to a much bigger class of inputs.</div><br/></div></div></div></div></div></div></div></div><div id="38864404" class="c"><input type="checkbox" id="c-38864404" checked=""/><div class="controls bullet"><span class="by">countrymile</span><span>|</span><a href="#38863624">prev</a><span>|</span><a href="#38863993">next</a><span>|</span><label class="collapse" for="c-38864404">[-]</label><label class="expand" for="c-38864404">[2 more]</label></div><br/><div class="children"><div class="content">Comparing solutions from the Rstats world: <a href="https:&#x2F;&#x2F;twitter.com&#x2F;RandVegan&#x2F;status&#x2F;1742721195781267650" rel="nofollow">https:&#x2F;&#x2F;twitter.com&#x2F;RandVegan&#x2F;status&#x2F;1742721195781267650</a></div><br/></div></div><div id="38863993" class="c"><input type="checkbox" id="c-38863993" checked=""/><div class="controls bullet"><span class="by">vessenes</span><span>|</span><a href="#38864404">prev</a><span>|</span><a href="#38863703">next</a><span>|</span><label class="collapse" for="c-38863993">[-]</label><label class="expand" for="c-38863993">[12 more]</label></div><br/><div class="children"><div class="content">Ooh fun, Advent of Code chaser!<p>A fair comparison between languages should include the make and build times. I haven&#x27;t used Java &#x2F; Maven for years, and I&#x27;m reminded why, heading into minute 2 of downloads for &#x27;.&#x2F;mvnw clean verify&#x27;.</div><br/><div id="38864017" class="c"><input type="checkbox" id="c-38864017" checked=""/><div class="controls bullet"><span class="by">kaba0</span><span>|</span><a href="#38863993">parent</a><span>|</span><a href="#38864209">next</a><span>|</span><label class="collapse" for="c-38864017">[-]</label><label class="expand" for="c-38864017">[8 more]</label></div><br/><div class="children"><div class="content">Java build times are very fast. You are just measuring your internet speed here.<p>(Also, gradle is faster as a build tool for incremental compilation)</div><br/><div id="38864063" class="c"><input type="checkbox" id="c-38864063" checked=""/><div class="controls bullet"><span class="by">pkolaczk</span><span>|</span><a href="#38863993">root</a><span>|</span><a href="#38864017">parent</a><span>|</span><a href="#38864044">next</a><span>|</span><label class="collapse" for="c-38864063">[-]</label><label class="expand" for="c-38864063">[4 more]</label></div><br/><div class="children"><div class="content">Gradle is faster than what? Than maven? Maybe. But not than Go or Cargo.</div><br/><div id="38864484" class="c"><input type="checkbox" id="c-38864484" checked=""/><div class="controls bullet"><span class="by">kaba0</span><span>|</span><a href="#38863993">root</a><span>|</span><a href="#38864063">parent</a><span>|</span><a href="#38864223">next</a><span>|</span><label class="collapse" for="c-38864484">[-]</label><label class="expand" for="c-38864484">[1 more]</label></div><br/><div class="children"><div class="content">What step are we talking about? Javac itself is absolutely on the same order of magnitude speed as Go per loc, while rust is significantly slower (which makes sense, the latter is a properly optimizing compiler with heavy static analysis, while the former two just spews out java byte code&#x2F;machine code).<p>Gradle with a daemon is also pretty fast, you are just probably used to some complex project with hundreds of dependencies and compare it to a cargo file with a single dependency.</div><br/></div></div><div id="38864223" class="c"><input type="checkbox" id="c-38864223" checked=""/><div class="controls bullet"><span class="by">wiseowise</span><span>|</span><a href="#38863993">root</a><span>|</span><a href="#38864063">parent</a><span>|</span><a href="#38864484">prev</a><span>|</span><a href="#38864132">next</a><span>|</span><label class="collapse" for="c-38864223">[-]</label><label class="expand" for="c-38864223">[1 more]</label></div><br/><div class="children"><div class="content">That depends on project and scope of the project.</div><br/></div></div><div id="38864132" class="c"><input type="checkbox" id="c-38864132" checked=""/><div class="controls bullet"><span class="by">wokwokwok</span><span>|</span><a href="#38863993">root</a><span>|</span><a href="#38864063">parent</a><span>|</span><a href="#38864223">prev</a><span>|</span><a href="#38864044">next</a><span>|</span><label class="collapse" for="c-38864132">[-]</label><label class="expand" for="c-38864132">[1 more]</label></div><br/><div class="children"><div class="content">Itself.<p>&gt; gradle is faster as a build tool <i>for incremental compilation</i><p>Implicit:<p>&gt; …than it is building from scratch, where it needs to download lots of stuff<p>I mean, yes, saying Java builds are fast does seem a bit “rolls eyes, yes technically by loc when the compiler is actually running” …but, ^_^! let’s not start banging on about how great cargo&#x2F;rust compile times are… they’re really terrible once procedural macros are used, or sys dependencies invoke some heinous c dependency build like autoconf and lots of crates do… and there’s still a subpar incremental compilation story.<p>So, you know. Eh. Live and let live. Gradle isn’t that bad.</div><br/></div></div></div></div><div id="38864044" class="c"><input type="checkbox" id="c-38864044" checked=""/><div class="controls bullet"><span class="by">occams_chainsaw</span><span>|</span><a href="#38863993">root</a><span>|</span><a href="#38864017">parent</a><span>|</span><a href="#38864063">prev</a><span>|</span><a href="#38864400">next</a><span>|</span><label class="collapse" for="c-38864044">[-]</label><label class="expand" for="c-38864044">[1 more]</label></div><br/><div class="children"><div class="content">...very relative</div><br/></div></div><div id="38864400" class="c"><input type="checkbox" id="c-38864400" checked=""/><div class="controls bullet"><span class="by">sixlelyt321</span><span>|</span><a href="#38863993">root</a><span>|</span><a href="#38864017">parent</a><span>|</span><a href="#38864044">prev</a><span>|</span><a href="#38864209">next</a><span>|</span><label class="collapse" for="c-38864400">[-]</label><label class="expand" for="c-38864400">[2 more]</label></div><br/><div class="children"><div class="content">But run time is slow, is that you want to convey?</div><br/><div id="38864498" class="c"><input type="checkbox" id="c-38864498" checked=""/><div class="controls bullet"><span class="by">kaba0</span><span>|</span><a href="#38863993">root</a><span>|</span><a href="#38864400">parent</a><span>|</span><a href="#38864209">next</a><span>|</span><label class="collapse" for="c-38864498">[-]</label><label class="expand" for="c-38864498">[1 more]</label></div><br/><div class="children"><div class="content">No, I would even go as far as to say that a naive, non-microbenchmark java program can often perform better than a naive, low-level language one.</div><br/></div></div></div></div></div></div><div id="38864209" class="c"><input type="checkbox" id="c-38864209" checked=""/><div class="controls bullet"><span class="by">wiseowise</span><span>|</span><a href="#38863993">parent</a><span>|</span><a href="#38864017">prev</a><span>|</span><a href="#38864055">next</a><span>|</span><label class="collapse" for="c-38864209">[-]</label><label class="expand" for="c-38864209">[1 more]</label></div><br/><div class="children"><div class="content">Why would you clean?<p>“I discard cache and it is so slow, aarghhh”</div><br/></div></div><div id="38864055" class="c"><input type="checkbox" id="c-38864055" checked=""/><div class="controls bullet"><span class="by">mrkeen</span><span>|</span><a href="#38863993">parent</a><span>|</span><a href="#38864209">prev</a><span>|</span><a href="#38863703">next</a><span>|</span><label class="collapse" for="c-38864055">[-]</label><label class="expand" for="c-38864055">[2 more]</label></div><br/><div class="children"><div class="content">Don&#x27;t need maven<p>&gt; No external dependencies may be used</div><br/><div id="38864164" class="c"><input type="checkbox" id="c-38864164" checked=""/><div class="controls bullet"><span class="by">chii</span><span>|</span><a href="#38863993">root</a><span>|</span><a href="#38864055">parent</a><span>|</span><a href="#38863703">next</a><span>|</span><label class="collapse" for="c-38864164">[-]</label><label class="expand" for="c-38864164">[1 more]</label></div><br/><div class="children"><div class="content">maven is just a build tool. It creates a single uberjar which you run with the JDK directly - you don&#x27;t ship the maven project.<p>But the real meaning is that you&#x27;re not allowed to use external libraries, rather than build tool related dependency.</div><br/></div></div></div></div></div></div><div id="38863703" class="c"><input type="checkbox" id="c-38863703" checked=""/><div class="controls bullet"><span class="by">brrrrrm</span><span>|</span><a href="#38863993">prev</a><span>|</span><a href="#38864187">next</a><span>|</span><label class="collapse" for="c-38863703">[-]</label><label class="expand" for="c-38863703">[3 more]</label></div><br/><div class="children"><div class="content">looking at the sample code I’m quite glad I’ve never really touched Java. What a clunky language</div><br/><div id="38864656" class="c"><input type="checkbox" id="c-38864656" checked=""/><div class="controls bullet"><span class="by">wiseowise</span><span>|</span><a href="#38863703">parent</a><span>|</span><a href="#38864187">next</a><span>|</span><label class="collapse" for="c-38864656">[-]</label><label class="expand" for="c-38864656">[2 more]</label></div><br/><div class="children"><div class="content">Ok, I’ll bite - why?</div><br/><div id="38864723" class="c"><input type="checkbox" id="c-38864723" checked=""/><div class="controls bullet"><span class="by">winrid</span><span>|</span><a href="#38863703">root</a><span>|</span><a href="#38864656">parent</a><span>|</span><a href="#38864187">next</a><span>|</span><label class="collapse" for="c-38864723">[-]</label><label class="expand" for="c-38864723">[1 more]</label></div><br/><div class="children"><div class="content">It looks like they mostly work in JS, so maybe it&#x27;s the type definitions that look clunky.<p>Java is explicit, yes. This is intentional :)</div><br/></div></div></div></div></div></div><div id="38864187" class="c"><input type="checkbox" id="c-38864187" checked=""/><div class="controls bullet"><span class="by">wokwokwok</span><span>|</span><a href="#38863703">prev</a><span>|</span><a href="#38864607">next</a><span>|</span><label class="collapse" for="c-38864187">[-]</label><label class="expand" for="c-38864187">[2 more]</label></div><br/><div class="children"><div class="content">I suppose it defeats the spirit of the game to, knowing your worst run is discarded, calculate the results on the first run by whatever slow method you want, save them somewhere useful, and just read the results and print them out on the following runs?<p>Or at the very least, convert the input into a more convenient binary format for the following runs.</div><br/><div id="38864418" class="c"><input type="checkbox" id="c-38864418" checked=""/><div class="controls bullet"><span class="by">tutfbhuf</span><span>|</span><a href="#38864187">parent</a><span>|</span><a href="#38864607">next</a><span>|</span><label class="collapse" for="c-38864418">[-]</label><label class="expand" for="c-38864418">[1 more]</label></div><br/><div class="children"><div class="content">I thought the same, but to ensure fairness, I would suggest that the application should run in a stateless container without internet access, and the infrastructure (Hetzner VM) should be recreated from scratch for each run to eliminate all caches.</div><br/></div></div></div></div><div id="38864607" class="c"><input type="checkbox" id="c-38864607" checked=""/><div class="controls bullet"><span class="by">mgoetzke</span><span>|</span><a href="#38864187">prev</a><span>|</span><a href="#38864213">next</a><span>|</span><label class="collapse" for="c-38864607">[-]</label><label class="expand" for="c-38864607">[2 more]</label></div><br/><div class="children"><div class="content">Anyone up to also do this in Rust ?</div><br/><div id="38864615" class="c"><input type="checkbox" id="c-38864615" checked=""/><div class="controls bullet"><span class="by">gunnarmorling</span><span>|</span><a href="#38864607">parent</a><span>|</span><a href="#38864213">next</a><span>|</span><label class="collapse" for="c-38864615">[-]</label><label class="expand" for="c-38864615">[1 more]</label></div><br/><div class="children"><div class="content">See the &quot;Show &amp; Tell&quot;, where folks are discussing solutions in different languages, including Rust: <a href="https:&#x2F;&#x2F;github.com&#x2F;gunnarmorling&#x2F;1brc&#x2F;discussions&#x2F;categories&#x2F;show-and-tell">https:&#x2F;&#x2F;github.com&#x2F;gunnarmorling&#x2F;1brc&#x2F;discussions&#x2F;categories...</a>.</div><br/></div></div></div></div><div id="38864213" class="c"><input type="checkbox" id="c-38864213" checked=""/><div class="controls bullet"><span class="by">drusepth</span><span>|</span><a href="#38864607">prev</a><span>|</span><a href="#38864208">next</a><span>|</span><label class="collapse" for="c-38864213">[-]</label><label class="expand" for="c-38864213">[2 more]</label></div><br/><div class="children"><div class="content">This would make for a really fun challenge in SQL, too.</div><br/><div id="38864727" class="c"><input type="checkbox" id="c-38864727" checked=""/><div class="controls bullet"><span class="by">winrid</span><span>|</span><a href="#38864213">parent</a><span>|</span><a href="#38864208">next</a><span>|</span><label class="collapse" for="c-38864727">[-]</label><label class="expand" for="c-38864727">[1 more]</label></div><br/><div class="children"><div class="content">May be of interest: <a href="https:&#x2F;&#x2F;benchmark.clickhouse.com" rel="nofollow">https:&#x2F;&#x2F;benchmark.clickhouse.com</a></div><br/></div></div></div></div><div id="38864208" class="c"><input type="checkbox" id="c-38864208" checked=""/><div class="controls bullet"><span class="by">pronoiac</span><span>|</span><a href="#38864213">prev</a><span>|</span><a href="#38863544">next</a><span>|</span><label class="collapse" for="c-38864208">[-]</label><label class="expand" for="c-38864208">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve idly been considering how to score this with more languages, with far less memory. I&#x27;m thinking, buildpacks on a Raspberry Pi.</div><br/></div></div><div id="38863544" class="c"><input type="checkbox" id="c-38863544" checked=""/><div class="controls bullet"><span class="by">worthless-trash</span><span>|</span><a href="#38864208">prev</a><span>|</span><a href="#38863845">next</a><span>|</span><label class="collapse" for="c-38863544">[-]</label><label class="expand" for="c-38863544">[18 more]</label></div><br/><div class="children"><div class="content">Interesting challenge, shame its only java. Can&#x27;t wait till people start hand rolling their own JVM bytecode.</div><br/><div id="38863616" class="c"><input type="checkbox" id="c-38863616" checked=""/><div class="controls bullet"><span class="by">kriskrunch</span><span>|</span><a href="#38863544">parent</a><span>|</span><a href="#38863822">next</a><span>|</span><label class="collapse" for="c-38863616">[-]</label><label class="expand" for="c-38863616">[13 more]</label></div><br/><div class="children"><div class="content">Check out the discussion[0], looks like there are submissions in several languages. Go, Rust, Python, and C++, to name a few<p>[0] <a href="https:&#x2F;&#x2F;github.com&#x2F;gunnarmorling&#x2F;1brc&#x2F;discussions">https:&#x2F;&#x2F;github.com&#x2F;gunnarmorling&#x2F;1brc&#x2F;discussions</a></div><br/><div id="38863688" class="c"><input type="checkbox" id="c-38863688" checked=""/><div class="controls bullet"><span class="by">Animats</span><span>|</span><a href="#38863544">root</a><span>|</span><a href="#38863616">parent</a><span>|</span><a href="#38863822">next</a><span>|</span><label class="collapse" for="c-38863688">[-]</label><label class="expand" for="c-38863688">[12 more]</label></div><br/><div class="children"><div class="content">It looks like the problem is dominated by reading in the data file. Some fast solutions just read the whole file into memory.</div><br/><div id="38864503" class="c"><input type="checkbox" id="c-38864503" checked=""/><div class="controls bullet"><span class="by">somat</span><span>|</span><a href="#38863544">root</a><span>|</span><a href="#38863688">parent</a><span>|</span><a href="#38863719">next</a><span>|</span><label class="collapse" for="c-38864503">[-]</label><label class="expand" for="c-38864503">[1 more]</label></div><br/><div class="children"><div class="content">It would be a more interesting challenge if the data file were larger than the memory. I would love to see what people would come up with on some baby vm with 512 mb of ram.<p>Even more interesting would be small ram, little local storage and a large file only available via network, I would like to see something other than http but realistically it would be http.</div><br/></div></div><div id="38863719" class="c"><input type="checkbox" id="c-38863719" checked=""/><div class="controls bullet"><span class="by">fny</span><span>|</span><a href="#38863544">root</a><span>|</span><a href="#38863688">parent</a><span>|</span><a href="#38864503">prev</a><span>|</span><a href="#38863822">next</a><span>|</span><label class="collapse" for="c-38863719">[-]</label><label class="expand" for="c-38863719">[10 more]</label></div><br/><div class="children"><div class="content">Rather than read the file into memory, memory mapping can be used.</div><br/><div id="38864470" class="c"><input type="checkbox" id="c-38864470" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#38863544">root</a><span>|</span><a href="#38863719">parent</a><span>|</span><a href="#38863878">next</a><span>|</span><label class="collapse" for="c-38864470">[-]</label><label class="expand" for="c-38864470">[1 more]</label></div><br/><div class="children"><div class="content">Memory mapping (at least on Linux) isn&#x27;t actually faster than reading the file manually.  Especially if you use appropriately sized buffers.<p>(Of course, the five times in a row might mess with that.)</div><br/></div></div><div id="38863878" class="c"><input type="checkbox" id="c-38863878" checked=""/><div class="controls bullet"><span class="by">pclmulqdq</span><span>|</span><a href="#38863544">root</a><span>|</span><a href="#38863719">parent</a><span>|</span><a href="#38864470">prev</a><span>|</span><a href="#38863839">next</a><span>|</span><label class="collapse" for="c-38863878">[-]</label><label class="expand" for="c-38863878">[7 more]</label></div><br/><div class="children"><div class="content">You wouldn&#x27;t want to do this for a huge file. A very fast solution would use a small number of buffers and io_uring (or equivalent), keeping the page table and cache footprint small.</div><br/><div id="38864034" class="c"><input type="checkbox" id="c-38864034" checked=""/><div class="controls bullet"><span class="by">rockwotj</span><span>|</span><a href="#38863544">root</a><span>|</span><a href="#38863878">parent</a><span>|</span><a href="#38864058">next</a><span>|</span><label class="collapse" for="c-38864034">[-]</label><label class="expand" for="c-38864034">[4 more]</label></div><br/><div class="children"><div class="content">Yeah so I had a discussion on Twitter about this, turns out 12GB is small enough to fit into memory, and the author runs submissions by running a solution 5 times in a row, so using direct IO actually hurts because having the kernel cache is a way to enforce the file is in memory for the 4 runs after. I have a direct IO solution with SIMD string search and double parsing, just in C++ (using libraries). It runs in 6 seconds on my 24 core linux box (NVMe).<p>Code: <a href="https:&#x2F;&#x2F;github.com&#x2F;rockwotj&#x2F;1brc">https:&#x2F;&#x2F;github.com&#x2F;rockwotj&#x2F;1brc</a><p>Discussion on Filesystem cache: <a href="https:&#x2F;&#x2F;x.com&#x2F;rockwotj&#x2F;status&#x2F;1742168024776430041?s=20" rel="nofollow">https:&#x2F;&#x2F;x.com&#x2F;rockwotj&#x2F;status&#x2F;1742168024776430041?s=20</a></div><br/><div id="38864071" class="c"><input type="checkbox" id="c-38864071" checked=""/><div class="controls bullet"><span class="by">pclmulqdq</span><span>|</span><a href="#38863544">root</a><span>|</span><a href="#38864034">parent</a><span>|</span><a href="#38864111">next</a><span>|</span><label class="collapse" for="c-38864071">[-]</label><label class="expand" for="c-38864071">[1 more]</label></div><br/><div class="children"><div class="content">I missed the &quot;5 times in a row.&quot; If you do that, yeah, keeping the whole thing in memory is far better.</div><br/></div></div><div id="38864111" class="c"><input type="checkbox" id="c-38864111" checked=""/><div class="controls bullet"><span class="by">lifthrasiir</span><span>|</span><a href="#38863544">root</a><span>|</span><a href="#38864034">parent</a><span>|</span><a href="#38864071">prev</a><span>|</span><a href="#38864058">next</a><span>|</span><label class="collapse" for="c-38864111">[-]</label><label class="expand" for="c-38864111">[2 more]</label></div><br/><div class="children"><div class="content">&gt; double parsing<p>In case you haven&#x27;t noticed yet, the input format guarantees exactly one fractional digit, so you can read a single signed integer followed by `.` and one digit instead.</div><br/><div id="38864362" class="c"><input type="checkbox" id="c-38864362" checked=""/><div class="controls bullet"><span class="by">rockwotj</span><span>|</span><a href="#38863544">root</a><span>|</span><a href="#38864111">parent</a><span>|</span><a href="#38864058">next</a><span>|</span><label class="collapse" for="c-38864362">[-]</label><label class="expand" for="c-38864362">[1 more]</label></div><br/><div class="children"><div class="content">Yeah I missed this originally, and stuff could be faster with this assumption without a full double parser. The fastest java solution dies some near branchless decoding for these</div><br/></div></div></div></div></div></div><div id="38864058" class="c"><input type="checkbox" id="c-38864058" checked=""/><div class="controls bullet"><span class="by">charcircuit</span><span>|</span><a href="#38863544">root</a><span>|</span><a href="#38863878">parent</a><span>|</span><a href="#38864034">prev</a><span>|</span><a href="#38863839">next</a><span>|</span><label class="collapse" for="c-38864058">[-]</label><label class="expand" for="c-38864058">[2 more]</label></div><br/><div class="children"><div class="content">What is the downside of memory mapping in this scenario? Shouldn&#x27;t the page table properly handle the case of doing a single sequential read over a range of pages? Accessing the contents of a file doesn&#x27;t seem like something caching would matter for. Do you mean that reading of sequential pages will keep adding to the cache compared to reading from a single page? That seems like a similar thing as before where they will be the first things gone from the cache anyways.</div><br/><div id="38864495" class="c"><input type="checkbox" id="c-38864495" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#38863544">root</a><span>|</span><a href="#38864058">parent</a><span>|</span><a href="#38863839">next</a><span>|</span><label class="collapse" for="c-38864495">[-]</label><label class="expand" for="c-38864495">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Shouldn&#x27;t the page table properly handle the case of doing a single sequential read over a range of pages?<p>That&#x27;s what I used to think, too.  But the kernel ain&#x27;t that smart.</div><br/></div></div></div></div></div></div><div id="38863839" class="c"><input type="checkbox" id="c-38863839" checked=""/><div class="controls bullet"><span class="by">capitol_</span><span>|</span><a href="#38863544">root</a><span>|</span><a href="#38863719">parent</a><span>|</span><a href="#38863878">prev</a><span>|</span><a href="#38863822">next</a><span>|</span><label class="collapse" for="c-38863839">[-]</label><label class="expand" for="c-38863839">[1 more]</label></div><br/><div class="children"><div class="content">But would that really be faster when you need to read every byte of a file?<p>I thought memory mapping solved a different problem.</div><br/></div></div></div></div></div></div></div></div><div id="38863822" class="c"><input type="checkbox" id="c-38863822" checked=""/><div class="controls bullet"><span class="by">userbinator</span><span>|</span><a href="#38863544">parent</a><span>|</span><a href="#38863616">prev</a><span>|</span><a href="#38863845">next</a><span>|</span><label class="collapse" for="c-38863822">[-]</label><label class="expand" for="c-38863822">[4 more]</label></div><br/><div class="children"><div class="content">Alternatively, &quot;must be written in Java&quot; can be interpreted to mean &quot;must use the JVM to <i>begin</i> execution&quot;, and you can clearly spawn another process from Java...</div><br/><div id="38864126" class="c"><input type="checkbox" id="c-38864126" checked=""/><div class="controls bullet"><span class="by">nneonneo</span><span>|</span><a href="#38863544">root</a><span>|</span><a href="#38863822">parent</a><span>|</span><a href="#38863924">next</a><span>|</span><label class="collapse" for="c-38864126">[-]</label><label class="expand" for="c-38864126">[1 more]</label></div><br/><div class="children"><div class="content">Just use JNA to allocate an RWX buffer with mmap, unpack a bit of clever code into the buffer, and forge a native function pointer to call it :)</div><br/></div></div><div id="38863924" class="c"><input type="checkbox" id="c-38863924" checked=""/><div class="controls bullet"><span class="by">yardstick</span><span>|</span><a href="#38863544">root</a><span>|</span><a href="#38863822">parent</a><span>|</span><a href="#38864126">prev</a><span>|</span><a href="#38863845">next</a><span>|</span><label class="collapse" for="c-38863924">[-]</label><label class="expand" for="c-38863924">[2 more]</label></div><br/><div class="children"><div class="content">Another rule was no external dependencies<p>I guess you could from Java itself write a new binary and then run that binary, but it would be against the spirit of the challenge.</div><br/><div id="38864350" class="c"><input type="checkbox" id="c-38864350" checked=""/><div class="controls bullet"><span class="by">sweetjuly</span><span>|</span><a href="#38863544">root</a><span>|</span><a href="#38863924">parent</a><span>|</span><a href="#38863845">next</a><span>|</span><label class="collapse" for="c-38864350">[-]</label><label class="expand" for="c-38864350">[1 more]</label></div><br/><div class="children"><div class="content">There&#x27;s sun.misc.Unsafe which is a builtin that gives you raw read&#x2F;write. Turn that into ROP, mmap your native program, and now you&#x27;re full native :)</div><br/></div></div></div></div></div></div></div></div><div id="38864140" class="c"><input type="checkbox" id="c-38864140" checked=""/><div class="controls bullet"><span class="by">justinl33</span><span>|</span><a href="#38864568">prev</a><span>|</span><a href="#38863668">next</a><span>|</span><label class="collapse" for="c-38864140">[-]</label><label class="expand" for="c-38864140">[4 more]</label></div><br/><div class="children"><div class="content">but… can I use pandas?</div><br/><div id="38864590" class="c"><input type="checkbox" id="c-38864590" checked=""/><div class="controls bullet"><span class="by">buybackoff</span><span>|</span><a href="#38864140">parent</a><span>|</span><a href="#38864237">next</a><span>|</span><label class="collapse" for="c-38864590">[-]</label><label class="expand" for="c-38864590">[1 more]</label></div><br/><div class="children"><div class="content">It takes 330 seconds on a machine where the top OpenJDK version takes 5.75 secs and my .NET version takes 4.8 seconds. However it&#x27;s just several lines of code and I used ChatGPT as a fun use case for how long it would take to have something working. It took around 5 mins. So if one needs to run this code only once Pandas would be a huge win considering development time. Interestingly the RAM usage was much more than 14 GB input file, probably 2-2.5x of that.<p>BTW asking ChatGPT to utilize all cores did not yield anything working in reasonable time.</div><br/></div></div><div id="38864237" class="c"><input type="checkbox" id="c-38864237" checked=""/><div class="controls bullet"><span class="by">tempay</span><span>|</span><a href="#38864140">parent</a><span>|</span><a href="#38864590">prev</a><span>|</span><a href="#38863668">next</a><span>|</span><label class="collapse" for="c-38864237">[-]</label><label class="expand" for="c-38864237">[2 more]</label></div><br/><div class="children"><div class="content">From a pure performance perspective it’d probably be quite slow in comparison to a dedicated implementation for this task. Especially as it wouldn’t fit in memory.</div><br/><div id="38864283" class="c"><input type="checkbox" id="c-38864283" checked=""/><div class="controls bullet"><span class="by">fragmede</span><span>|</span><a href="#38864140">root</a><span>|</span><a href="#38864237">parent</a><span>|</span><a href="#38863668">next</a><span>|</span><label class="collapse" for="c-38864283">[-]</label><label class="expand" for="c-38864283">[1 more]</label></div><br/><div class="children"><div class="content">why wouldn&#x27;t it fit into memory? the data set is only 12gb.</div><br/></div></div></div></div></div></div><div id="38863668" class="c"><input type="checkbox" id="c-38863668" checked=""/><div class="controls bullet"><span class="by">lessbergstein</span><span>|</span><a href="#38864140">prev</a><span>|</span><a href="#38863564">next</a><span>|</span><label class="collapse" for="c-38863668">[-]</label><label class="expand" for="c-38863668">[5 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t understand, it should be pretty easy. A rolling average with BigDecimal would probably be sufficient but a scientific lib might be better for a rolling average or more than a hundred million numbers.<p><a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;277309&#x2F;java-floating-point-high-precision-library" rel="nofollow">https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;277309&#x2F;java-floating-poi...</a></div><br/><div id="38863802" class="c"><input type="checkbox" id="c-38863802" checked=""/><div class="controls bullet"><span class="by">ako</span><span>|</span><a href="#38863668">parent</a><span>|</span><a href="#38864347">next</a><span>|</span><label class="collapse" for="c-38863802">[-]</label><label class="expand" for="c-38863802">[3 more]</label></div><br/><div class="children"><div class="content">The difficulty is creating the fastest implementation. If you look at the results of the submissions so far you’ll see a big difference in duration, between 11 seconds and more than 4 minutes.<p>11 seconds seems pretty impressive for a 12Gb file. Would be interesting to know what programming language could do it faster. For a database comparison you’d probably want to include loading the data into your database for a fair comparrison.</div><br/><div id="38864457" class="c"><input type="checkbox" id="c-38864457" checked=""/><div class="controls bullet"><span class="by">lessbergstein</span><span>|</span><a href="#38863668">root</a><span>|</span><a href="#38863802">parent</a><span>|</span><a href="#38864347">next</a><span>|</span><label class="collapse" for="c-38864457">[-]</label><label class="expand" for="c-38864457">[2 more]</label></div><br/><div class="children"><div class="content">Perl would do it quite fast and it has the benefit of accessing posix primitives directly.</div><br/><div id="38864540" class="c"><input type="checkbox" id="c-38864540" checked=""/><div class="controls bullet"><span class="by">gerikson</span><span>|</span><a href="#38863668">root</a><span>|</span><a href="#38864457">parent</a><span>|</span><a href="#38864347">next</a><span>|</span><label class="collapse" for="c-38864540">[-]</label><label class="expand" for="c-38864540">[1 more]</label></div><br/><div class="children"><div class="content">A naive perl solution is really really slow compared to even the reference Java implementation. (I know, I&#x27;ve tried)</div><br/></div></div></div></div></div></div><div id="38864347" class="c"><input type="checkbox" id="c-38864347" checked=""/><div class="controls bullet"><span class="by">petters</span><span>|</span><a href="#38863668">parent</a><span>|</span><a href="#38863802">prev</a><span>|</span><a href="#38863564">next</a><span>|</span><label class="collapse" for="c-38864347">[-]</label><label class="expand" for="c-38864347">[1 more]</label></div><br/><div class="children"><div class="content">It’s easy to solve but even fizzbuzz becomes complicated if you want double digit GB&#x2F;s output.</div><br/></div></div></div></div><div id="38863564" class="c"><input type="checkbox" id="c-38863564" checked=""/><div class="controls bullet"><span class="by">scumola</span><span>|</span><a href="#38863668">prev</a><span>|</span><a href="#38863549">next</a><span>|</span><label class="collapse" for="c-38863564">[-]</label><label class="expand" for="c-38863564">[12 more]</label></div><br/><div class="children"><div class="content">This is just a map&#x2F;reduce problem. Use Hadoop. It&#x27;s Java, isn&#x27;t it?</div><br/><div id="38863631" class="c"><input type="checkbox" id="c-38863631" checked=""/><div class="controls bullet"><span class="by">baq</span><span>|</span><a href="#38863564">parent</a><span>|</span><a href="#38863588">next</a><span>|</span><label class="collapse" for="c-38863631">[-]</label><label class="expand" for="c-38863631">[8 more]</label></div><br/><div class="children"><div class="content">Why would I use Hadoop for such a small number of rows…?</div><br/><div id="38863764" class="c"><input type="checkbox" id="c-38863764" checked=""/><div class="controls bullet"><span class="by">jalino23</span><span>|</span><a href="#38863564">root</a><span>|</span><a href="#38863631">parent</a><span>|</span><a href="#38863588">next</a><span>|</span><label class="collapse" for="c-38863764">[-]</label><label class="expand" for="c-38863764">[7 more]</label></div><br/><div class="children"><div class="content">1 billion is small for hadoop?</div><br/><div id="38864510" class="c"><input type="checkbox" id="c-38864510" checked=""/><div class="controls bullet"><span class="by">chmod775</span><span>|</span><a href="#38863564">root</a><span>|</span><a href="#38863764">parent</a><span>|</span><a href="#38863789">next</a><span>|</span><label class="collapse" for="c-38864510">[-]</label><label class="expand" for="c-38864510">[1 more]</label></div><br/><div class="children"><div class="content">Anything that fits in RAM on one machine is easily too small for Hadoop. In those cases, the overhead of Hadoop is going to make it get destroyed by a single beefy machine. The only times where this might not be the case is when you&#x27;re doing a crazy amount of computation relative to the data you have.<p>Note that you can easily reach 1TB of RAM on (enterprise) commodity hardware now, and SSDs are pretty fast too.<p>Old but gold post from 2014: <a href="https:&#x2F;&#x2F;adamdrake.com&#x2F;command-line-tools-can-be-235x-faster-than-your-hadoop-cluster.html" rel="nofollow">https:&#x2F;&#x2F;adamdrake.com&#x2F;command-line-tools-can-be-235x-faster-...</a></div><br/></div></div><div id="38863789" class="c"><input type="checkbox" id="c-38863789" checked=""/><div class="controls bullet"><span class="by">rapsey</span><span>|</span><a href="#38863564">root</a><span>|</span><a href="#38863764">parent</a><span>|</span><a href="#38864510">prev</a><span>|</span><a href="#38863776">next</a><span>|</span><label class="collapse" for="c-38863789">[-]</label><label class="expand" for="c-38863789">[4 more]</label></div><br/><div class="children"><div class="content">If it fits on one computer it&#x27;s not a hadoop problem.</div><br/><div id="38864288" class="c"><input type="checkbox" id="c-38864288" checked=""/><div class="controls bullet"><span class="by">8organicbits</span><span>|</span><a href="#38863564">root</a><span>|</span><a href="#38863789">parent</a><span>|</span><a href="#38864240">next</a><span>|</span><label class="collapse" for="c-38864288">[-]</label><label class="expand" for="c-38864288">[1 more]</label></div><br/><div class="children"><div class="content">A Hadoop submission may help people realize that. But since you only have one machine to work with it should be obvious that you&#x27;re not going to get any speed-up via divide and conquer.</div><br/></div></div><div id="38864240" class="c"><input type="checkbox" id="c-38864240" checked=""/><div class="controls bullet"><span class="by">badgersnake</span><span>|</span><a href="#38863564">root</a><span>|</span><a href="#38863789">parent</a><span>|</span><a href="#38864288">prev</a><span>|</span><a href="#38864067">next</a><span>|</span><label class="collapse" for="c-38864240">[-]</label><label class="expand" for="c-38864240">[1 more]</label></div><br/><div class="children"><div class="content">Sounds like an awk problem tbh.</div><br/></div></div><div id="38864067" class="c"><input type="checkbox" id="c-38864067" checked=""/><div class="controls bullet"><span class="by">quickthrower2</span><span>|</span><a href="#38863564">root</a><span>|</span><a href="#38863789">parent</a><span>|</span><a href="#38864240">prev</a><span>|</span><a href="#38863776">next</a><span>|</span><label class="collapse" for="c-38864067">[-]</label><label class="expand" for="c-38864067">[1 more]</label></div><br/><div class="children"><div class="content">It fits on a dusty ten year old USB stick</div><br/></div></div></div></div><div id="38863776" class="c"><input type="checkbox" id="c-38863776" checked=""/><div class="controls bullet"><span class="by">brokensegue</span><span>|</span><a href="#38863564">root</a><span>|</span><a href="#38863764">parent</a><span>|</span><a href="#38863789">prev</a><span>|</span><a href="#38863588">next</a><span>|</span><label class="collapse" for="c-38863776">[-]</label><label class="expand" for="c-38863776">[1 more]</label></div><br/><div class="children"><div class="content">~14GB file? it&#x27;s on the small side for hadoop</div><br/></div></div></div></div></div></div><div id="38863588" class="c"><input type="checkbox" id="c-38863588" checked=""/><div class="controls bullet"><span class="by">kriskrunch</span><span>|</span><a href="#38863564">parent</a><span>|</span><a href="#38863631">prev</a><span>|</span><a href="#38863578">next</a><span>|</span><label class="collapse" for="c-38863588">[-]</label><label class="expand" for="c-38863588">[1 more]</label></div><br/><div class="children"><div class="content">&gt; No external dependencies may be used</div><br/></div></div></div></div><div id="38864383" class="c"><input type="checkbox" id="c-38864383" checked=""/><div class="controls bullet"><span class="by">sixlelyt321</span><span>|</span><a href="#38863549">prev</a><span>|</span><label class="collapse" for="c-38864383">[-]</label><label class="expand" for="c-38864383">[2 more]</label></div><br/><div class="children"><div class="content">You had 32GB more than expected 16GB RAM but for Java I doubt that 32GB is fine enough. Java is aboslutely good on older days but nowadays there is lot of opportunities than that poor guy.</div><br/><div id="38864585" class="c"><input type="checkbox" id="c-38864585" checked=""/><div class="controls bullet"><span class="by">EdwardDiego</span><span>|</span><a href="#38864383">parent</a><span>|</span><label class="collapse" for="c-38864585">[-]</label><label class="expand" for="c-38864585">[1 more]</label></div><br/><div class="children"><div class="content">Meaningless to talk about how much RAM you need for a JVM program as it will (obviously) depend on what the program is doing.</div><br/></div></div></div></div></div></div></div></div></div></body></html>