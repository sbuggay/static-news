<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1716109254797" as="style"/><link rel="stylesheet" href="styles.css?v=1716109254797"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/skx/cpmulator">Show HN: A Golang CP/M emulator</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>stevekemp</span> | <span>12 comments</span></div><br/><div><div id="40401983" class="c"><input type="checkbox" id="c-40401983" checked=""/><div class="controls bullet"><span class="by">an-unknown</span><span>|</span><a href="#40404227">next</a><span>|</span><label class="collapse" for="c-40401983">[-]</label><label class="expand" for="c-40401983">[4 more]</label></div><br/><div class="children"><div class="content">This project looks interesting. I saw you use stty to configure the console, but there is a native &quot;UNIX way&quot; to do this via tcgetattr&#x2F;tcsetattr, you&#x27;ll have to figure out how to use these C functions elegantly in Go though &#x2F; if there is some Go package which wraps them already. On Windows you&#x27;ll have to configure the console via win32 API calls GetConsoleMode&#x2F;SetConsoleMode and again you&#x27;ll have to figure out how to do this from Go ⇒ you&#x27;ll have to add some compile time switch between &quot;UNIX like&quot; OS and Windows to support both. The &quot;UNIX like&quot; version should work on Linux, macOS, and various other UNIX like systems.<p>You could also improve the debugging experience with full execution trace recording (record all executed instructions &#x2F; memory accesses &#x2F; … to a trace file) which would not only give you detailed information about what exactly went wrong if something goes wrong but also allow you to directly debug your own Z80 code on assembler level.</div><br/><div id="40403788" class="c"><input type="checkbox" id="c-40403788" checked=""/><div class="controls bullet"><span class="by">stevekemp</span><span>|</span><a href="#40401983">parent</a><span>|</span><a href="#40403203">next</a><span>|</span><label class="collapse" for="c-40403788">[-]</label><label class="expand" for="c-40403788">[1 more]</label></div><br/><div class="children"><div class="content">Thanks for the feedback - there&#x27;s a disjoined comment in the README on portability that points to the golang package x&#x2F;term, and a single open bug report that says &quot;fix it&quot;.<p>So I have a plan, but it&#x27;s a bit more annoying than I&#x27;d like to handle.  At least the &quot;conditional compilation&quot; via build-tags is nice and straight-forward!<p>There is a trace of all CP&#x2F;M syscalls made, available via the &quot;-log-path&quot; command-line option, but so far I&#x27;ve not needed to debug actual Z80 opcodes.</div><br/></div></div><div id="40403203" class="c"><input type="checkbox" id="c-40403203" checked=""/><div class="controls bullet"><span class="by">whartung</span><span>|</span><a href="#40401983">parent</a><span>|</span><a href="#40403788">prev</a><span>|</span><a href="#40402132">next</a><span>|</span><label class="collapse" for="c-40403203">[-]</label><label class="expand" for="c-40403203">[1 more]</label></div><br/><div class="children"><div class="content">I dabble with the CP&#x2F;M simulator in z80pack.<p>And I had to use stty to make it work better from the command line. At least from BASH on MacOS.<p>Minimally, you need to disable ^Z, or you send it into the background. ^Z is the EOF character for text files in CP&#x2F;M.<p>The other is ^Y. Which is another suspend process command for BASH. ^Y is important for Turbo Pascal, it’s a key editing command.<p>I don’t think I’ve have to fix any others. Those two have let me do what I want so far.</div><br/></div></div><div id="40402132" class="c"><input type="checkbox" id="c-40402132" checked=""/><div class="controls bullet"><span class="by">Max-q</span><span>|</span><a href="#40401983">parent</a><span>|</span><a href="#40403203">prev</a><span>|</span><a href="#40404227">next</a><span>|</span><label class="collapse" for="c-40402132">[-]</label><label class="expand" for="c-40402132">[1 more]</label></div><br/><div class="children"><div class="content">&gt; you&#x27;ll have to add some compile time switch<p>Isn&#x27;t it best to use the switch already built into Go?</div><br/></div></div></div></div><div id="40404227" class="c"><input type="checkbox" id="c-40404227" checked=""/><div class="controls bullet"><span class="by">bitwize</span><span>|</span><a href="#40401983">prev</a><span>|</span><a href="#40401544">next</a><span>|</span><label class="collapse" for="c-40404227">[-]</label><label class="expand" for="c-40404227">[2 more]</label></div><br/><div class="children"><div class="content">OP is a based madlad for writing a text adventure game -- for ancient retro hardware -- to amuse their kid. If kids are going to be exposed to technology at all, the old 8-bitters are much more effective at stimulating curiosity, imagination, and learning than an iPad with Cocomelon or Skibidi Toilet queued up -- even in emulated form.</div><br/><div id="40404320" class="c"><input type="checkbox" id="c-40404320" checked=""/><div class="controls bullet"><span class="by">stevekemp</span><span>|</span><a href="#40404227">parent</a><span>|</span><a href="#40401544">next</a><span>|</span><label class="collapse" for="c-40404320">[-]</label><label class="expand" for="c-40404320">[1 more]</label></div><br/><div class="children"><div class="content">I wrote a BASIC interpreter in golang a few years back, and somehow the child really fell in love with the classic &quot;guess the number&quot; game:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;skx&#x2F;gobasic&#x2F;blob&#x2F;master&#x2F;examples&#x2F;55-game.bas">https:&#x2F;&#x2F;github.com&#x2F;skx&#x2F;gobasic&#x2F;blob&#x2F;master&#x2F;examples&#x2F;55-game....</a><p>I taught him how to divide the range in half to cut down on the number of guesses, and once he got the hang of that he was hooked.<p>We played a couple of simple text-based games together after that, but most of the classics were too hard, too long, and required too much typing for him.  So the game I made was deliberately simple.<p>Even so the first time he played he had no idea that a rug could cover a trapdoor.  That level of hiding things was too much for him to leap to himself, I had to direct him.<p>These kinda shared activities don&#x27;t replace his love of Minecraft, or Super Mario Bros (original NES version!), but I&#x27;m still glad we can do them together.</div><br/></div></div></div></div><div id="40401544" class="c"><input type="checkbox" id="c-40401544" checked=""/><div class="controls bullet"><span class="by">wiz21c</span><span>|</span><a href="#40404227">prev</a><span>|</span><label class="collapse" for="c-40401544">[-]</label><label class="expand" for="c-40401544">[5 more]</label></div><br/><div class="children"><div class="content">cp&#x2F;m still ticking... Time flies! Had somewhat checked it once on my Apple 2 :-)</div><br/><div id="40401598" class="c"><input type="checkbox" id="c-40401598" checked=""/><div class="controls bullet"><span class="by">jimmaswell</span><span>|</span><a href="#40401544">parent</a><span>|</span><label class="collapse" for="c-40401598">[-]</label><label class="expand" for="c-40401598">[4 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve become familiar with it playing with the Kaypro 1 (the last CP&#x2F;M model, not the first Kaypro - their model numbers are confusing). I picked it up years ago and just got around to getting disks etc recently.<p>Interesting to see the influence on DOS, and how people used to deal with ED to write assembly etc.<p>Really nice machine to play Zork and such on. The monochrome green is so clear and nice, and a really good size. Keyboard feels great.<p>I&#x27;ve been trying to get serial working with the odd pinout without success yet.</div><br/><div id="40402417" class="c"><input type="checkbox" id="c-40402417" checked=""/><div class="controls bullet"><span class="by">nsguy</span><span>|</span><a href="#40401544">root</a><span>|</span><a href="#40401598">parent</a><span>|</span><a href="#40402823">next</a><span>|</span><label class="collapse" for="c-40402417">[-]</label><label class="expand" for="c-40402417">[1 more]</label></div><br/><div class="children"><div class="content">I got to use CP&#x2F;M briefly on a DEC Rainbow machine in the 80&#x27;s. It was very similar to DOS but IIRC there were quite a few differences at the detail level. I remember seeing some ads for Kaypro&#x27;s but I don&#x27;t think I ever saw one in real life... What sort of issues are you having with the serial port? You might need to jumper the flow control pins if you can&#x27;t disable flow control. I&#x27;m sure the pinout is documented? I had to deal with lots of oddball serial ports way back when, I might even have some breakout&#x2F;jumper RS232 adapters lying around.</div><br/></div></div><div id="40402823" class="c"><input type="checkbox" id="c-40402823" checked=""/><div class="controls bullet"><span class="by">technofiend</span><span>|</span><a href="#40401544">root</a><span>|</span><a href="#40401598">parent</a><span>|</span><a href="#40402417">prev</a><span>|</span><label class="collapse" for="c-40402823">[-]</label><label class="expand" for="c-40402823">[2 more]</label></div><br/><div class="children"><div class="content">I worked at a computer store in the mid 80s and we sold the heck out of Kaypros because they were a bargain next to DOS machines. They came  bundled with software and often times a promotion with a bundled printer as well.<p>They tried transitioning to add DOS support with an addin card but it was too late to save them as PC and Apple became the defacto standards.<p>There was a little-known multiuser CP&#x2F;M variant called MPM and we managed to sell a few of those, too. It was a cool if plain OS.</div><br/><div id="40403609" class="c"><input type="checkbox" id="c-40403609" checked=""/><div class="controls bullet"><span class="by">LeFantome</span><span>|</span><a href="#40401544">root</a><span>|</span><a href="#40402823">parent</a><span>|</span><label class="collapse" for="c-40403609">[-]</label><label class="expand" for="c-40403609">[1 more]</label></div><br/><div class="children"><div class="content">I have never heard of MPM. Thank you for the reference.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>