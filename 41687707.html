<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1727686865557" as="style"/><link rel="stylesheet" href="styles.css?v=1727686865557"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://jvns.ca/blog/2024/09/27/some-go-web-dev-notes/">Some Go web dev notes</a> <span class="domain">(<a href="https://jvns.ca">jvns.ca</a>)</span></div><div class="subtext"><span>tosh</span> | <span>99 comments</span></div><br/><div><div id="41688306" class="c"><input type="checkbox" id="c-41688306" checked=""/><div class="controls bullet"><span class="by">voigt</span><span>|</span><a href="#41688680">next</a><span>|</span><label class="collapse" for="c-41688306">[-]</label><label class="expand" for="c-41688306">[26 more]</label></div><br/><div class="children"><div class="content">&gt; In general everything about it feels like it makes projects easy to work on for 5 days, abandon for 2 years, and then get back into writing code without a lot of problems.<p>To me this is one of the most underrated qualities of go code.<p>Go is a language that I started learning years ago, but did&#x27;t change dramatically. So my knowledge is still useful, even almost ten years later.</div><br/><div id="41689776" class="c"><input type="checkbox" id="c-41689776" checked=""/><div class="controls bullet"><span class="by">arp242</span><span>|</span><a href="#41688306">parent</a><span>|</span><a href="#41688553">next</a><span>|</span><label class="collapse" for="c-41689776">[-]</label><label class="expand" for="c-41689776">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve picked up some Go projects after no development for years, including some I didn&#x27;t write myself as a contractor. It&#x27;s typically been a fairly painless experience. Typically dependencies go from &quot;1.3.1&quot; to &quot;1.7.5&quot; or something, and generally it&#x27;s a &quot;read changelogs, nothing interesting, updating just works&quot;-type experience.<p>On the frontend side it&#x27;s typically been much more difficult. There are tons of dependencies, everything depends on everything else, there are typically many new major releases, and things can break in pretty non-obvious ways.<p>It&#x27;s not so much the language itself, it&#x27;s the ecosystem as a whole. There is nothing in JavaScript-the-language or npm-the-package-manager that says the npm experience needs to be so dreadful. Yet here we are.</div><br/></div></div><div id="41688553" class="c"><input type="checkbox" id="c-41688553" checked=""/><div class="controls bullet"><span class="by">tmpz22</span><span>|</span><a href="#41688306">parent</a><span>|</span><a href="#41689776">prev</a><span>|</span><a href="#41689690">next</a><span>|</span><label class="collapse" for="c-41688553">[-]</label><label class="expand" for="c-41688553">[19 more]</label></div><br/><div class="children"><div class="content">I agree but those first 5 days are going to be a mixed bag as you pick through libraries for logging, database drivers, migrations, as well as project organization, dependency injection patterns for testing, organize your testing structure, and more.<p>If you have a template to derive from or sufficient Go experience you&#x27;ll be fine, but selecting from a grab bag of small libraries early on in a project can be a distraction that slows down feature development significantly.<p>I love Go but for rapid project development, like working on a personal project with limited time, or at a startup with ambitious goals, Go certainly has its tradeoffs.</div><br/><div id="41689602" class="c"><input type="checkbox" id="c-41689602" checked=""/><div class="controls bullet"><span class="by">tptacek</span><span>|</span><a href="#41688306">root</a><span>|</span><a href="#41688553">parent</a><span>|</span><a href="#41689702">next</a><span>|</span><label class="collapse" for="c-41689602">[-]</label><label class="expand" for="c-41689602">[3 more]</label></div><br/><div class="children"><div class="content">I think 80% of this is people coming to Go from other languages (<i>everybody</i> comes to Go from some other language) and trying to bring what they think was best about that language to Go. To an extent unusual in languages I&#x27;ve worked in, it&#x27;s idiomatic in Go to get by with what&#x27;s in the standard library. If you&#x27;re new to Go, that&#x27;s what you should do: use standard logging, just use net&#x2F;http and its router, use standard Go tests (without an assertion library), &amp;c.<p>I&#x27;m not saying you need to stay there, but if your project environment feels like Rails or Flask or whatever in your first month or two, you may have done something wrong.</div><br/><div id="41689732" class="c"><input type="checkbox" id="c-41689732" checked=""/><div class="controls bullet"><span class="by">ljm</span><span>|</span><a href="#41688306">root</a><span>|</span><a href="#41689602">parent</a><span>|</span><a href="#41690114">next</a><span>|</span><label class="collapse" for="c-41689732">[-]</label><label class="expand" for="c-41689732">[1 more]</label></div><br/><div class="children"><div class="content">Go these days has had a good few stdlib improvements that reduce your reliance on third party libraries even further.<p>The http router now handles path parameters and methods, so you might just pull in a library to run a middleware stack.<p>There is structured logging in the stdlib, which works with the existing log package for an easy transition.<p>The thing I’ve struggled with is structuring a project nicely, what with the way modules work, especially for services that aren’t exactly ‘micro’, and especially when the module and workspace system is still pretty unintuitive.</div><br/></div></div><div id="41690114" class="c"><input type="checkbox" id="c-41690114" checked=""/><div class="controls bullet"><span class="by">Attummm</span><span>|</span><a href="#41688306">root</a><span>|</span><a href="#41689602">parent</a><span>|</span><a href="#41689732">prev</a><span>|</span><a href="#41689702">next</a><span>|</span><label class="collapse" for="c-41690114">[-]</label><label class="expand" for="c-41690114">[1 more]</label></div><br/><div class="children"><div class="content">I completely agree with the comment, except for the Flask example. Django would be a better example.<p>Both Flask and Golang&#x27;s http package have simplicity and minimalism as their philosophy. Of course, most mature projects will eventually diverge from that. But both can start out as a single file with just a few lines of code.</div><br/></div></div></div></div><div id="41689702" class="c"><input type="checkbox" id="c-41689702" checked=""/><div class="controls bullet"><span class="by">jrockway</span><span>|</span><a href="#41688306">root</a><span>|</span><a href="#41688553">parent</a><span>|</span><a href="#41689602">prev</a><span>|</span><a href="#41692469">next</a><span>|</span><label class="collapse" for="c-41689702">[-]</label><label class="expand" for="c-41689702">[3 more]</label></div><br/><div class="children"><div class="content">I really think the library search is more of something you inherit from other languages, though database drivers are something you need to go looking for.  The standard library has an adequate HTTP router (though I prefer grpc-gateway as it autogenerates docs, types, etc.) and logger (slog, but honestly plain log is fine).<p>For your database driver, just use pgx.  For migrations, tern is fine.  For the tiniest bit of sugar around scanning database results into structs, use sqlx instead of database&#x2F;sql.<p>I wouldn&#x27;t recommend using a testing framework in Go: <a href="https:&#x2F;&#x2F;go.dev&#x2F;wiki&#x2F;TestComments#assert-libraries" rel="nofollow">https:&#x2F;&#x2F;go.dev&#x2F;wiki&#x2F;TestComments#assert-libraries</a><p>Here&#x27;s how I do dependency injection:<p><pre><code>   func main() {
       foo := &amp;Foo{
           Parameter: goesHere,
       }
       bar := &amp;Bar{
           SomethingItNeeds: canJustBeTypedIn,
       }
       app := &amp;App{
           Foo: foo,
           Bar: bar,
       }
       app.ListenAndServe()
   }
</code></pre>
If you need more complexity, you can add more complexity.  I like &quot;zap&quot; over &quot;slog&quot; for logging.  I am interested in some of the DI frameworks (dig), but it&#x27;s never been a clear win to me over a little bit of hand-rolled complexity like the above.<p>A lot of people want some sort of mocking framework.  I just do this:<p><pre><code>   - func foo(x SomethingConcrete) {
   -     x.Whatever()
   - }
   + interface Whateverer { Whatever() }
   + func foo(x Whateverer) {
   +     x.Whatever()
   + } 
</code></pre>
Then in the tests:<p><pre><code>   type testWhateverer {
      n int
   }
   var _ Whateverer = (*testWhateverer)(nil)
   func (w *testWhateverer) Whatever() { w.n++ }
   func TestFoo(t *testing.T) {
       x := &amp;testWhateverer{}
       foo(x)
       if got, want := x.n, 1; got != want {
           t.Errorf(&quot;expected Whatever to have been called: invocation count:\n  got: %v\n want: %v&quot;, got, want)
       }
   }
</code></pre>
It&#x27;s easy.  I typed it in an HN comment in like 30 seconds.  Whether or not a test that counts how many times you called Whatever is up to you, but if you need it, you need it, and it&#x27;s easy to do.</div><br/><div id="41693160" class="c"><input type="checkbox" id="c-41693160" checked=""/><div class="controls bullet"><span class="by">peterldowns</span><span>|</span><a href="#41688306">root</a><span>|</span><a href="#41689702">parent</a><span>|</span><a href="#41692469">next</a><span>|</span><label class="collapse" for="c-41693160">[-]</label><label class="expand" for="c-41693160">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been writing Golang for years now, and I heavily endorse everything written here.<p>Only exception is you should use my migration library [0] instead of tern — you don&#x27;t need down migrations, and you can stop worrying about migration number conflicts.<p>One other suggestion I&#x27;ll make is you probably at some point should write a translation layer between your API endpoints and the http.Handler interface, so that your endpoints return `(result *T, error)` and your tests can avoid worrying about serde&#x2F;typeasserting the results.<p>[0] <a href="https:&#x2F;&#x2F;github.com&#x2F;peterldowns&#x2F;pgmigrate">https:&#x2F;&#x2F;github.com&#x2F;peterldowns&#x2F;pgmigrate</a></div><br/><div id="41693637" class="c"><input type="checkbox" id="c-41693637" checked=""/><div class="controls bullet"><span class="by">jrockway</span><span>|</span><a href="#41688306">root</a><span>|</span><a href="#41693160">parent</a><span>|</span><a href="#41692469">next</a><span>|</span><label class="collapse" for="c-41693637">[-]</label><label class="expand" for="c-41693637">[1 more]</label></div><br/><div class="children"><div class="content">I can definitely get behind using some other migration library!  Thank you for writing and sharing this!</div><br/></div></div></div></div></div></div><div id="41692469" class="c"><input type="checkbox" id="c-41692469" checked=""/><div class="controls bullet"><span class="by">tacticus</span><span>|</span><a href="#41688306">root</a><span>|</span><a href="#41688553">parent</a><span>|</span><a href="#41689702">prev</a><span>|</span><a href="#41689542">next</a><span>|</span><label class="collapse" for="c-41692469">[-]</label><label class="expand" for="c-41692469">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I agree but those first 5 days are going to be a mixed bag as you pick through libraries for logging, database drivers, migrations, as well as project organization, dependency injection patterns for testing, organize your testing structure, and more.<p>So the same as every other language that lacks these in the standard lib?</div><br/></div></div><div id="41689542" class="c"><input type="checkbox" id="c-41689542" checked=""/><div class="controls bullet"><span class="by">mattgreenrocks</span><span>|</span><a href="#41688306">root</a><span>|</span><a href="#41688553">parent</a><span>|</span><a href="#41692469">prev</a><span>|</span><a href="#41688627">next</a><span>|</span><label class="collapse" for="c-41689542">[-]</label><label class="expand" for="c-41689542">[1 more]</label></div><br/><div class="children"><div class="content">About 50% of the time learning a new language I find that the consensus framework&#x2F;library choice is not quite to my taste. It isn’t that it’s bad, it just often feels like one thing went viral and then ends up boxed in by their success such that people double down&#x2F;put up with it rather than evolve it further.<p>Point being you’re probably going to spend those first five days evaluating the options. The “community” doesn’t know your taste or your needs. You have no idea what their goals are, or what the average skill level is. All of those things can make a big difference in selecting tech to build atop of.</div><br/></div></div><div id="41688627" class="c"><input type="checkbox" id="c-41688627" checked=""/><div class="controls bullet"><span class="by">joshlemer</span><span>|</span><a href="#41688306">root</a><span>|</span><a href="#41688553">parent</a><span>|</span><a href="#41689542">prev</a><span>|</span><a href="#41688865">next</a><span>|</span><label class="collapse" for="c-41688627">[-]</label><label class="expand" for="c-41688627">[7 more]</label></div><br/><div class="children"><div class="content">I stumbled on this Go starter project that has enough batteries included to get you started I think. You might find it useful<p><a href="https:&#x2F;&#x2F;github.com&#x2F;mikestefanello&#x2F;pagoda">https:&#x2F;&#x2F;github.com&#x2F;mikestefanello&#x2F;pagoda</a></div><br/><div id="41688819" class="c"><input type="checkbox" id="c-41688819" checked=""/><div class="controls bullet"><span class="by">tmpz22</span><span>|</span><a href="#41688306">root</a><span>|</span><a href="#41688627">parent</a><span>|</span><a href="#41688865">next</a><span>|</span><label class="collapse" for="c-41688819">[-]</label><label class="expand" for="c-41688819">[6 more]</label></div><br/><div class="children"><div class="content">Right and mikestefanello&#x2F;pagoda seems like a comprehensive framework combining the labstack&#x2F;echo&#x2F;v4 routing framework and entgo.io&#x2F;ent &quot;ORM&quot; - among other things like HTMX and Bulma.<p>That is a highly opinionated grouping of tools that gets you to a poor persons version of a full stack framework that many in the Go community would flat out reject.</div><br/><div id="41688920" class="c"><input type="checkbox" id="c-41688920" checked=""/><div class="controls bullet"><span class="by">leetrout</span><span>|</span><a href="#41688306">root</a><span>|</span><a href="#41688819">parent</a><span>|</span><a href="#41688930">next</a><span>|</span><label class="collapse" for="c-41688920">[-]</label><label class="expand" for="c-41688920">[4 more]</label></div><br/><div class="children"><div class="content">I really don&#x27;t understand the hate for a framework in &quot;the community&quot;. I had stayed away from Go for about 3 years and I posted on r&#x2F;golang asking if anything had popped up like a django in go and got nothing but hate.<p>I chock it up to people enjoy writing the same boiler plate stuff over and over in their paid jobs where they have the time to do it.<p>To your point, I&#x27;ve got my own set of libraries that I think are The Best™ for all my reasons that at least keep me productive.<p>Echo for the routing... sqlc for the db interface... I actually _love_ gomega and ginkgo for BDD but it makes people actually angry so I settle for testify and for logging we have slog now but I usually grab the logging lib from charm bracelet for nice colorized, leveled logging.</div><br/><div id="41689239" class="c"><input type="checkbox" id="c-41689239" checked=""/><div class="controls bullet"><span class="by">onislandtime</span><span>|</span><a href="#41688306">root</a><span>|</span><a href="#41688920">parent</a><span>|</span><a href="#41689258">next</a><span>|</span><label class="collapse" for="c-41689239">[-]</label><label class="expand" for="c-41689239">[1 more]</label></div><br/><div class="children"><div class="content">Hey, I checked your Reddit thread [1] and I see a good discussion with useful suggestions. I don&#x27;t see &quot;anything but hate&quot; at all. There are pros and cons to using frameworks. True, many people seem to prefer to use smaller libraries. I personally don&#x27;t like magic because sooner or later I lose track of what&#x27;s going on and need to start guessing. With direct code I can understand faster without having to read docs and layers of source code. It&#x27;s all about finding the right balance of abstractions.<p>1 - <a href="https:&#x2F;&#x2F;www.reddit.com&#x2F;r&#x2F;golang&#x2F;comments&#x2F;1anmoqg&#x2F;what_go_libraries_make_web_products_as&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.reddit.com&#x2F;r&#x2F;golang&#x2F;comments&#x2F;1anmoqg&#x2F;what_go_lib...</a></div><br/></div></div><div id="41689258" class="c"><input type="checkbox" id="c-41689258" checked=""/><div class="controls bullet"><span class="by">pepelotas</span><span>|</span><a href="#41688306">root</a><span>|</span><a href="#41688920">parent</a><span>|</span><a href="#41689239">prev</a><span>|</span><a href="#41689218">next</a><span>|</span><label class="collapse" for="c-41689258">[-]</label><label class="expand" for="c-41689258">[1 more]</label></div><br/><div class="children"><div class="content">I liked gomega and ginkgo when I worked with it. But by virtue of running tests serially, the race detection becomes useless during testing, and I think it&#x27;s a must have. Has it changed?</div><br/></div></div><div id="41689218" class="c"><input type="checkbox" id="c-41689218" checked=""/><div class="controls bullet"><span class="by">cgg1</span><span>|</span><a href="#41688306">root</a><span>|</span><a href="#41688920">parent</a><span>|</span><a href="#41689258">prev</a><span>|</span><a href="#41688930">next</a><span>|</span><label class="collapse" for="c-41689218">[-]</label><label class="expand" for="c-41689218">[1 more]</label></div><br/><div class="children"><div class="content">The best thing I’ve found is beego: <a href="https:&#x2F;&#x2F;github.com&#x2F;beego&#x2F;beego">https:&#x2F;&#x2F;github.com&#x2F;beego&#x2F;beego</a><p>Not affiliated in any way, but to me it’s better than most of the alternatives</div><br/></div></div></div></div><div id="41688930" class="c"><input type="checkbox" id="c-41688930" checked=""/><div class="controls bullet"><span class="by">joshlemer</span><span>|</span><a href="#41688306">root</a><span>|</span><a href="#41688819">parent</a><span>|</span><a href="#41688920">prev</a><span>|</span><a href="#41688865">next</a><span>|</span><label class="collapse" for="c-41688930">[-]</label><label class="expand" for="c-41688930">[1 more]</label></div><br/><div class="children"><div class="content">And since it isn&#x27;t a &quot;framework&quot; but rather just a wired up collection of libraries, it would be pretty simple and even a good learning process to change out the couple of libraries one doesn&#x27;t like (say, in case they prefer not to use ent, and backlite).</div><br/></div></div></div></div></div></div><div id="41688865" class="c"><input type="checkbox" id="c-41688865" checked=""/><div class="controls bullet"><span class="by">DarkCrusader2</span><span>|</span><a href="#41688306">root</a><span>|</span><a href="#41688553">parent</a><span>|</span><a href="#41688627">prev</a><span>|</span><a href="#41693563">next</a><span>|</span><label class="collapse" for="c-41688865">[-]</label><label class="expand" for="c-41688865">[1 more]</label></div><br/><div class="children"><div class="content">I had this exact same experience with Go. I picked up .Net (and Asp.Net for web stuff) on linux recently and found it to be much more easier to get started batteries included than Go. Don&#x27;t need external libraries for any of the things you mentioned (ORM, logging, metrics, DI etc.).<p>Razor pages are very interesting as well. I haven&#x27;t used them enough to have a solid opinion yet but I really liked them for quick server rendered pages.</div><br/></div></div><div id="41693563" class="c"><input type="checkbox" id="c-41693563" checked=""/><div class="controls bullet"><span class="by">sureglymop</span><span>|</span><a href="#41688306">root</a><span>|</span><a href="#41688553">parent</a><span>|</span><a href="#41688865">prev</a><span>|</span><a href="#41689690">next</a><span>|</span><label class="collapse" for="c-41693563">[-]</label><label class="expand" for="c-41693563">[2 more]</label></div><br/><div class="children"><div class="content">I would also say library quality can be generally low. E.g. there are numerous flag parsing libraries but not a single one comes even close to clap in rust.</div><br/><div id="41693780" class="c"><input type="checkbox" id="c-41693780" checked=""/><div class="controls bullet"><span class="by">demi56</span><span>|</span><a href="#41688306">root</a><span>|</span><a href="#41693563">parent</a><span>|</span><a href="#41689690">next</a><span>|</span><label class="collapse" for="c-41693780">[-]</label><label class="expand" for="c-41693780">[1 more]</label></div><br/><div class="children"><div class="content">You can’t just compare a library from another language, because they’re different, if all flag parsing library were inspired by Clap it’ll be a living nightmare for language that isn’t rust</div><br/></div></div></div></div></div></div><div id="41689690" class="c"><input type="checkbox" id="c-41689690" checked=""/><div class="controls bullet"><span class="by">almatabata</span><span>|</span><a href="#41688306">parent</a><span>|</span><a href="#41688553">prev</a><span>|</span><a href="#41693542">next</a><span>|</span><label class="collapse" for="c-41689690">[-]</label><label class="expand" for="c-41689690">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Go is a language that I started learning years ago, but did&#x27;t change dramatically.<p>A lot of people underrate that quality I feel. C had that quality but pushed it to neurotic levels where it would change so slowly even when it needed to do it faster. Other language in contrast change too fast and try to do too many things at once.<p>You do not often get credit for providing boring, stable programs that work. I hope they continue to do it this way and do not get seduced into overloading the language.<p>We have a lot of fast moving languages already, so having one that moves slowly increases potential choice.</div><br/></div></div><div id="41693542" class="c"><input type="checkbox" id="c-41693542" checked=""/><div class="controls bullet"><span class="by">WuxiFingerHold</span><span>|</span><a href="#41688306">parent</a><span>|</span><a href="#41689690">prev</a><span>|</span><a href="#41689104">next</a><span>|</span><label class="collapse" for="c-41693542">[-]</label><label class="expand" for="c-41693542">[1 more]</label></div><br/><div class="children"><div class="content">Absolutely, but not really underrated. The large and useful std lib plays an important role in the long term stability.</div><br/></div></div><div id="41689104" class="c"><input type="checkbox" id="c-41689104" checked=""/><div class="controls bullet"><span class="by">aczerepinski</span><span>|</span><a href="#41688306">parent</a><span>|</span><a href="#41693542">prev</a><span>|</span><a href="#41689224">next</a><span>|</span><label class="collapse" for="c-41689104">[-]</label><label class="expand" for="c-41689104">[1 more]</label></div><br/><div class="children"><div class="content">It’s why I moved my personal site from Phoenix to Go and it has proven to he a great choice. I have zero dependencies so they never go out of date.</div><br/></div></div><div id="41689224" class="c"><input type="checkbox" id="c-41689224" checked=""/><div class="controls bullet"><span class="by">ocdtrekkie</span><span>|</span><a href="#41688306">parent</a><span>|</span><a href="#41689104">prev</a><span>|</span><a href="#41694313">next</a><span>|</span><label class="collapse" for="c-41689224">[-]</label><label class="expand" for="c-41689224">[1 more]</label></div><br/><div class="children"><div class="content">This used to be true of PHP as well, though them finally picking off the hairy bits of bad assumptions has eroded that a fair bit. For a long time you didn&#x27;t usually need to concern yourself what version of PHP 4-5 or so what version you were running on.</div><br/></div></div></div></div><div id="41688680" class="c"><input type="checkbox" id="c-41688680" checked=""/><div class="controls bullet"><span class="by">yegle</span><span>|</span><a href="#41688306">prev</a><span>|</span><a href="#41689048">next</a><span>|</span><label class="collapse" for="c-41688680">[-]</label><label class="expand" for="c-41688680">[7 more]</label></div><br/><div class="children"><div class="content">It&#x27;s sad <a href="https:&#x2F;&#x2F;pkg.go.dev&#x2F;embed" rel="nofollow">https:&#x2F;&#x2F;pkg.go.dev&#x2F;embed</a> was not mentioned in a post about web development in Go :-)<p>Having a true single binary bundling your static resources is so convenient.</div><br/><div id="41689498" class="c"><input type="checkbox" id="c-41689498" checked=""/><div class="controls bullet"><span class="by">dullcrisp</span><span>|</span><a href="#41688680">parent</a><span>|</span><a href="#41688945">next</a><span>|</span><label class="collapse" for="c-41689498">[-]</label><label class="expand" for="c-41689498">[1 more]</label></div><br/><div class="children"><div class="content">It is mentioned now.</div><br/></div></div><div id="41688945" class="c"><input type="checkbox" id="c-41688945" checked=""/><div class="controls bullet"><span class="by">okibry</span><span>|</span><a href="#41688680">parent</a><span>|</span><a href="#41689498">prev</a><span>|</span><a href="#41689048">next</a><span>|</span><label class="collapse" for="c-41688945">[-]</label><label class="expand" for="c-41688945">[5 more]</label></div><br/><div class="children"><div class="content">Which time golang read file, build time or run time ?</div><br/><div id="41689068" class="c"><input type="checkbox" id="c-41689068" checked=""/><div class="controls bullet"><span class="by">nasretdinov</span><span>|</span><a href="#41688680">root</a><span>|</span><a href="#41688945">parent</a><span>|</span><a href="#41688980">next</a><span>|</span><label class="collapse" for="c-41689068">[-]</label><label class="expand" for="c-41689068">[1 more]</label></div><br/><div class="children"><div class="content">embed package allows to embed assets directly into the binary, so the files are read once during build time and then you can access them as e.g. a byte slice, a string, or a special FS object that acts like an in-memory file system</div><br/></div></div><div id="41688980" class="c"><input type="checkbox" id="c-41688980" checked=""/><div class="controls bullet"><span class="by">catlifeonmars</span><span>|</span><a href="#41688680">root</a><span>|</span><a href="#41688945">parent</a><span>|</span><a href="#41689068">prev</a><span>|</span><a href="#41689114">next</a><span>|</span><label class="collapse" for="c-41688980">[-]</label><label class="expand" for="c-41688980">[1 more]</label></div><br/><div class="children"><div class="content">Build time</div><br/></div></div><div id="41689114" class="c"><input type="checkbox" id="c-41689114" checked=""/><div class="controls bullet"><span class="by">estebarb</span><span>|</span><a href="#41688680">root</a><span>|</span><a href="#41688945">parent</a><span>|</span><a href="#41688980">prev</a><span>|</span><a href="#41689329">next</a><span>|</span><label class="collapse" for="c-41689114">[-]</label><label class="expand" for="c-41689114">[1 more]</label></div><br/><div class="children"><div class="content">Build time. It literally embeeds the file in the binary.</div><br/></div></div></div></div></div></div><div id="41689048" class="c"><input type="checkbox" id="c-41689048" checked=""/><div class="controls bullet"><span class="by">imiric</span><span>|</span><a href="#41688680">prev</a><span>|</span><a href="#41688906">next</a><span>|</span><label class="collapse" for="c-41689048">[-]</label><label class="expand" for="c-41689048">[7 more]</label></div><br/><div class="children"><div class="content">There are some good tips here.<p>As for sqlc, I really wanted to like it, but it had some major limitations and minor annoyances last time I tried it a few months ago. You might want to go through its list of issues[1] before adopting it.<p>Things like no support for dynamic queries[2], one-to-many relationships[3], embedded CTEs[4], composite types[5], etc.<p>It might work fine if you only have simple needs, but if you ever want to do something slightly sophisticated, you&#x27;ll have to fallback to the manual approach. It&#x27;s partly understandable, though. It cannot realistically support every feature of every DBMS, and it&#x27;s explicitly not an ORM. But I still decided to stick to the manual approach for everything, instead of wondering whether something is or isn&#x27;t supported by sqlc.<p>One tip&#x2F;gotcha I recently ran into: if you run Go within containers, you should set GOMAXPROCS appropriately to avoid CPU throttling. Good explanation here[6], and solution here[7].<p>[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;sqlc-dev&#x2F;sqlc&#x2F;issues&#x2F;">https:&#x2F;&#x2F;github.com&#x2F;sqlc-dev&#x2F;sqlc&#x2F;issues&#x2F;</a><p>[2]: <a href="https:&#x2F;&#x2F;github.com&#x2F;sqlc-dev&#x2F;sqlc&#x2F;issues&#x2F;3414">https:&#x2F;&#x2F;github.com&#x2F;sqlc-dev&#x2F;sqlc&#x2F;issues&#x2F;3414</a><p>[3]: <a href="https:&#x2F;&#x2F;github.com&#x2F;sqlc-dev&#x2F;sqlc&#x2F;issues&#x2F;3394">https:&#x2F;&#x2F;github.com&#x2F;sqlc-dev&#x2F;sqlc&#x2F;issues&#x2F;3394</a><p>[4]: <a href="https:&#x2F;&#x2F;github.com&#x2F;sqlc-dev&#x2F;sqlc&#x2F;issues&#x2F;3128">https:&#x2F;&#x2F;github.com&#x2F;sqlc-dev&#x2F;sqlc&#x2F;issues&#x2F;3128</a><p>[5]: <a href="https:&#x2F;&#x2F;github.com&#x2F;sqlc-dev&#x2F;sqlc&#x2F;issues&#x2F;2760">https:&#x2F;&#x2F;github.com&#x2F;sqlc-dev&#x2F;sqlc&#x2F;issues&#x2F;2760</a><p>[6]: <a href="https:&#x2F;&#x2F;kanishk.io&#x2F;posts&#x2F;cpu-throttling-in-containerized-go-apps&#x2F;" rel="nofollow">https:&#x2F;&#x2F;kanishk.io&#x2F;posts&#x2F;cpu-throttling-in-containerized-go-...</a><p>[7]: <a href="https:&#x2F;&#x2F;github.com&#x2F;uber-go&#x2F;automaxprocs">https:&#x2F;&#x2F;github.com&#x2F;uber-go&#x2F;automaxprocs</a></div><br/><div id="41689649" class="c"><input type="checkbox" id="c-41689649" checked=""/><div class="controls bullet"><span class="by">bornfreddy</span><span>|</span><a href="#41689048">parent</a><span>|</span><a href="#41689759">next</a><span>|</span><label class="collapse" for="c-41689649">[-]</label><label class="expand" for="c-41689649">[1 more]</label></div><br/><div class="children"><div class="content">I agree that sqlc has limits, but for me it is great because it takes care of 98% of the queries (made up number) and keeps them simple to write. I can still write manual queries for the rest of them so it&#x27;s still a net win.</div><br/></div></div><div id="41689759" class="c"><input type="checkbox" id="c-41689759" checked=""/><div class="controls bullet"><span class="by">0x_rs</span><span>|</span><a href="#41689048">parent</a><span>|</span><a href="#41689649">prev</a><span>|</span><a href="#41688906">next</a><span>|</span><label class="collapse" for="c-41689759">[-]</label><label class="expand" for="c-41689759">[5 more]</label></div><br/><div class="children"><div class="content">It gets mentioned a lot in the context of database&#x2F;sql and sqlc, but Jet has been a great alternative so far, most notably because of its non-issue with dynamic queries support.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;go-jet&#x2F;jet&#x2F;">https:&#x2F;&#x2F;github.com&#x2F;go-jet&#x2F;jet&#x2F;</a></div><br/><div id="41691039" class="c"><input type="checkbox" id="c-41691039" checked=""/><div class="controls bullet"><span class="by">CBarkleyU</span><span>|</span><a href="#41689048">root</a><span>|</span><a href="#41689759">parent</a><span>|</span><a href="#41688906">next</a><span>|</span><label class="collapse" for="c-41691039">[-]</label><label class="expand" for="c-41691039">[4 more]</label></div><br/><div class="children"><div class="content">Unfortunately it relies on CGO for SQLite, which is a bummer</div><br/><div id="41691647" class="c"><input type="checkbox" id="c-41691647" checked=""/><div class="controls bullet"><span class="by">0x_rs</span><span>|</span><a href="#41689048">root</a><span>|</span><a href="#41691039">parent</a><span>|</span><a href="#41691377">next</a><span>|</span><label class="collapse" for="c-41691647">[-]</label><label class="expand" for="c-41691647">[1 more]</label></div><br/><div class="children"><div class="content">Good point. The generator (and tests) do use mattn&#x27;s SQLite driver, but you&#x27;re free to choose any database&#x2F;sql-compliant implementation in your program, so that means setting up the necessary toolchain only in your development machine, even just using a very simple zig setup. I <i>think</i> it should be fairly easy to make it use a pure-go driver, some of which are nearly drop-in replacements and have only minute differences like the string name being &quot;sqlite&quot; instead of &quot;sqlite3&quot;, but of course that&#x27;s extra stuff to test and maintain (but still only running when you&#x27;re generating from a target database).</div><br/></div></div><div id="41691377" class="c"><input type="checkbox" id="c-41691377" checked=""/><div class="controls bullet"><span class="by">ncruces</span><span>|</span><a href="#41689048">root</a><span>|</span><a href="#41691039">parent</a><span>|</span><a href="#41691647">prev</a><span>|</span><a href="#41688906">next</a><span>|</span><label class="collapse" for="c-41691377">[-]</label><label class="expand" for="c-41691377">[2 more]</label></div><br/><div class="children"><div class="content">Yeah, it&#x27;d be much nicer if libraries were designed to be driver agnostic, like redka which supports 4 different SQLite drivers:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;nalgeon&#x2F;redka&#x2F;tree&#x2F;main&#x2F;example">https:&#x2F;&#x2F;github.com&#x2F;nalgeon&#x2F;redka&#x2F;tree&#x2F;main&#x2F;example</a></div><br/><div id="41694870" class="c"><input type="checkbox" id="c-41694870" checked=""/><div class="controls bullet"><span class="by">blipWER</span><span>|</span><a href="#41689048">root</a><span>|</span><a href="#41691377">parent</a><span>|</span><a href="#41688906">next</a><span>|</span><label class="collapse" for="c-41694870">[-]</label><label class="expand" for="c-41694870">[1 more]</label></div><br/><div class="children"><div class="content">Library is driver agnostic. Jet cli code generator indeed uses mattn&#x2F;go-sqlite3, but you can run your queries using any driver you prefer. You can also customize jet generator and use any other driver for code generation.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="41688906" class="c"><input type="checkbox" id="c-41688906" checked=""/><div class="controls bullet"><span class="by">gwd</span><span>|</span><a href="#41689048">prev</a><span>|</span><a href="#41688596">next</a><span>|</span><label class="collapse" for="c-41688906">[-]</label><label class="expand" for="c-41688906">[15 more]</label></div><br/><div class="children"><div class="content">&gt; I learned the hard way that if I don’t do this then I’ll get SQLITE_BUSY errors from two threads trying to write to the db at the same time.<p>OK, here&#x27;s a potentially controversial opinion from someone coming into the web + DB field from writing operating systems:<p>1. <i>Database transactions are designed to fail</i><p>Therefore<p>2. <i>All database transactions should done in a transaction loop</i><p>Basically something like this:<p><a href="https:&#x2F;&#x2F;gitlab.com&#x2F;martyros&#x2F;sqlutil&#x2F;-&#x2F;blob&#x2F;master&#x2F;txutil&#x2F;txutil.go?ref_type=heads#L35" rel="nofollow">https:&#x2F;&#x2F;gitlab.com&#x2F;martyros&#x2F;sqlutil&#x2F;-&#x2F;blob&#x2F;master&#x2F;txutil&#x2F;txu...</a><p>That loop function should really have a Context so it can be cancelled; that&#x27;s future work.  But the idea stands -- it should be considered normal for transactions to fail, so you should always have a retry loop around them.</div><br/><div id="41691867" class="c"><input type="checkbox" id="c-41691867" checked=""/><div class="controls bullet"><span class="by">mekoka</span><span>|</span><a href="#41688906">parent</a><span>|</span><a href="#41690002">next</a><span>|</span><label class="collapse" for="c-41691867">[-]</label><label class="expand" for="c-41691867">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s controversial for many good reasons. You make the general claim that retrying a db transaction should be the rule, when most experts agree that it should be the exception. Just in the context of web development it can be disputed on the account that a db transaction is just a part of a bigger contract that includes a user at the other end of a network, a request, a session, and a slew of other possible connected services. If one thing shows signs of being unstable, everything should fail. That&#x27;s the general wisdom.<p>More specific to the code that you linked to, the retry happens in only two specific cases. Even then, I personally don&#x27;t find what it&#x27;s doing to be such great engineering. It hacks its way around something that should really be fixed by properly setting the db engine. By encroaching like this, it effectively hides the deeper problem that SQLite has been badly configured, which may come to bite you later.<p>Failing transactions would raise a stink earlier. Upon inquiry, you&#x27;d find the actual remedy, resulting in tremendous performance. Instead, this magic loop is trying to help SQLite be a database and it does this in Go! So you end up with these smart transactions that know to wait in a queue for their turn. And for some time, nobody in the dev team may be aware that this can become a problem, as everything seems to be working fine. The response time just gets slightly longer and longer as the load increases.<p>Code that tries to save failing things at all cost like this also tends to do this kind of glue and duct tape micromanaging of dependencies. Usually with worse results than simply adjusting some settings in the dependencies themselves. You end up with hard to diagnose issues. The code itself becomes hard to reason about as it&#x27;s peppered with complicated ifs and buts to cover these strange cases.</div><br/></div></div><div id="41690002" class="c"><input type="checkbox" id="c-41690002" checked=""/><div class="controls bullet"><span class="by">whizzter</span><span>|</span><a href="#41688906">parent</a><span>|</span><a href="#41691867">prev</a><span>|</span><a href="#41689304">next</a><span>|</span><label class="collapse" for="c-41690002">[-]</label><label class="expand" for="c-41690002">[1 more]</label></div><br/><div class="children"><div class="content">Transactions are hard, and in reality there&#x27;s a shit-ton of things people do that has no right to be close to a transaction (but still are), and transactions were a good imperative kludge at the time that has just warped into a monster that people kinda accept over the years.<p>A loop is a  bad construct imho, something I like far better is the Mnesia approach that simply decides that transactional updates are self-contained functional blocks and the database manages the transactional issues (yes, this eschews the regular SQL interfaces and Db-application separation but could probably be emulated to a certain degree).<p><a href="https:&#x2F;&#x2F;www.erlang.org&#x2F;doc&#x2F;apps&#x2F;mnesia&#x2F;mnesia_chap4.html" rel="nofollow">https:&#x2F;&#x2F;www.erlang.org&#x2F;doc&#x2F;apps&#x2F;mnesia&#x2F;mnesia_chap4.html</a></div><br/></div></div><div id="41689304" class="c"><input type="checkbox" id="c-41689304" checked=""/><div class="controls bullet"><span class="by">tedunangst</span><span>|</span><a href="#41688906">parent</a><span>|</span><a href="#41690002">prev</a><span>|</span><a href="#41694102">next</a><span>|</span><label class="collapse" for="c-41689304">[-]</label><label class="expand" for="c-41689304">[1 more]</label></div><br/><div class="children"><div class="content">You&#x27;ll just end up looping until your retry limit is reached. SQLite just isn&#x27;t very good at upgrading read locks to write locks, so the appropriate fix really is to prevent that from happening.</div><br/></div></div><div id="41694102" class="c"><input type="checkbox" id="c-41694102" checked=""/><div class="controls bullet"><span class="by">lifthrasiir</span><span>|</span><a href="#41688906">parent</a><span>|</span><a href="#41689304">prev</a><span>|</span><a href="#41689891">next</a><span>|</span><label class="collapse" for="c-41694102">[-]</label><label class="expand" for="c-41694102">[1 more]</label></div><br/><div class="children"><div class="content">Others have said much about a transaction loop, but I also don&#x27;t think that database transactions are necessarily designed to fail in the sense that the failure is a normal mode of operation. Failing transactions are still considered exceptional; their sole goal is to provide logical atomicity.</div><br/></div></div><div id="41689891" class="c"><input type="checkbox" id="c-41689891" checked=""/><div class="controls bullet"><span class="by">Thaxll</span><span>|</span><a href="#41688906">parent</a><span>|</span><a href="#41694102">prev</a><span>|</span><a href="#41691097">next</a><span>|</span><label class="collapse" for="c-41689891">[-]</label><label class="expand" for="c-41689891">[2 more]</label></div><br/><div class="children"><div class="content">You should never do blind retries in an infinite for loop, ideally it should be a generic retry function ( bounded ) that type check the error.</div><br/><div id="41690108" class="c"><input type="checkbox" id="c-41690108" checked=""/><div class="controls bullet"><span class="by">gwd</span><span>|</span><a href="#41688906">root</a><span>|</span><a href="#41689891">parent</a><span>|</span><a href="#41691097">next</a><span>|</span><label class="collapse" for="c-41690108">[-]</label><label class="expand" for="c-41690108">[1 more]</label></div><br/><div class="children"><div class="content">Yes, that&#x27;s exactly what the linked code does: Calls your function, and if it returns an error, check through the wrapped errors to see if it&#x27;s one of the SQLite errors which should be retried.  If it is, try the transaction again; if not, pass the error up.</div><br/></div></div></div></div><div id="41691097" class="c"><input type="checkbox" id="c-41691097" checked=""/><div class="controls bullet"><span class="by">marcosdumay</span><span>|</span><a href="#41688906">parent</a><span>|</span><a href="#41689891">prev</a><span>|</span><a href="#41689636">next</a><span>|</span><label class="collapse" for="c-41691097">[-]</label><label class="expand" for="c-41691097">[1 more]</label></div><br/><div class="children"><div class="content">You shouldn&#x27;t blindly retry things that fail as a default, and you should really not default into making the decision of what to do on a server that is just on the middle between the actual user and the database.<p>Handling errors on the middle is a dangerous optimization.</div><br/></div></div><div id="41689636" class="c"><input type="checkbox" id="c-41689636" checked=""/><div class="controls bullet"><span class="by">krackers</span><span>|</span><a href="#41688906">parent</a><span>|</span><a href="#41691097">prev</a><span>|</span><a href="#41688921">next</a><span>|</span><label class="collapse" for="c-41689636">[-]</label><label class="expand" for="c-41689636">[2 more]</label></div><br/><div class="children"><div class="content">I always see SQLite as recommended, but every time I look into it there are some non-obvious subtleties around txn lock, retry behavior, and WAL mode. By default if you don&#x27;t tweak things right getting frequent SQLITE_BUSY errors seems to occur at non-trivial QPS.<p>Is there a place that documents what the set-and-forget setting should be?</div><br/><div id="41689705" class="c"><input type="checkbox" id="c-41689705" checked=""/><div class="controls bullet"><span class="by">arp242</span><span>|</span><a href="#41688906">root</a><span>|</span><a href="#41689636">parent</a><span>|</span><a href="#41688921">next</a><span>|</span><label class="collapse" for="c-41689705">[-]</label><label class="expand" for="c-41689705">[1 more]</label></div><br/><div class="children"><div class="content">_journal_mode=wal&amp;_busy_timeout=200 seems to work well enough.</div><br/></div></div></div></div><div id="41688921" class="c"><input type="checkbox" id="c-41688921" checked=""/><div class="controls bullet"><span class="by">returningfory2</span><span>|</span><a href="#41688906">parent</a><span>|</span><a href="#41689636">prev</a><span>|</span><a href="#41689206">next</a><span>|</span><label class="collapse" for="c-41688921">[-]</label><label class="expand" for="c-41688921">[4 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t think this controversial. Retrying failed transactions is a common strategy.</div><br/><div id="41688955" class="c"><input type="checkbox" id="c-41688955" checked=""/><div class="controls bullet"><span class="by">gwd</span><span>|</span><a href="#41688906">root</a><span>|</span><a href="#41688921">parent</a><span>|</span><a href="#41689206">next</a><span>|</span><label class="collapse" for="c-41688955">[-]</label><label class="expand" for="c-41688955">[3 more]</label></div><br/><div class="children"><div class="content">You&#x27;re the first person I&#x27;ve heard say so.  When I was learning DB stuff, there were loads of examples of things that looked at the error from a transaction.  Not a single one of them then <i>retried the transaction</i> as a result.<p>The OP&#x27;s comment is a symptom of this -- they did some writes or some transactions and were getting failures, which means they weren&#x27;t retrying their transactions.  And then when they searched to solve the problem, the advice they received wasn&#x27;t &quot;oh, you should be retrying your transactions&quot; -- rather, it was some complicated technical thing to avoid the problem by preventing concurrent writes.</div><br/><div id="41689586" class="c"><input type="checkbox" id="c-41689586" checked=""/><div class="controls bullet"><span class="by">bornfreddy</span><span>|</span><a href="#41688906">root</a><span>|</span><a href="#41688955">parent</a><span>|</span><a href="#41689556">next</a><span>|</span><label class="collapse" for="c-41689586">[-]</label><label class="expand" for="c-41689586">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m in the opposite camp. Transactions can fail, however retrying them is not the solution. It hides the symptom (which is not a problem with proper monitoring), but more importantly, it can lead to overwhelming the db server. Sometimes failure happens because of the load, in which case retrying the query is counterproductive. And even in cases where retrying would be the correct approach, it is the responsibility of the app logic, not of the db connection layer, to retry the query. Imho of course. :)</div><br/></div></div><div id="41689556" class="c"><input type="checkbox" id="c-41689556" checked=""/><div class="controls bullet"><span class="by">returningfory2</span><span>|</span><a href="#41688906">root</a><span>|</span><a href="#41688955">parent</a><span>|</span><a href="#41689586">prev</a><span>|</span><a href="#41689206">next</a><span>|</span><label class="collapse" for="c-41689556">[-]</label><label class="expand" for="c-41689556">[1 more]</label></div><br/><div class="children"><div class="content">Ah, interesting. Maybe my experience has been unusual then.<p>I agree with you the retrying transactions is relatively simple and powerful.</div><br/></div></div></div></div></div></div><div id="41689206" class="c"><input type="checkbox" id="c-41689206" checked=""/><div class="controls bullet"><span class="by">rad_gruchalski</span><span>|</span><a href="#41688906">parent</a><span>|</span><a href="#41688921">prev</a><span>|</span><a href="#41688596">next</a><span>|</span><label class="collapse" for="c-41689206">[-]</label><label class="expand" for="c-41689206">[1 more]</label></div><br/><div class="children"><div class="content">Wouldn&#x27;t you need two contexts? One for retry cancellation, one for underlying resources to be passed on to?</div><br/></div></div></div></div><div id="41688596" class="c"><input type="checkbox" id="c-41688596" checked=""/><div class="controls bullet"><span class="by">physicles</span><span>|</span><a href="#41688906">prev</a><span>|</span><a href="#41689725">next</a><span>|</span><label class="collapse" for="c-41688596">[-]</label><label class="expand" for="c-41688596">[3 more]</label></div><br/><div class="children"><div class="content">GOMEMLIMIT has really cut down on the amount of time I’ve had to spend worrying about the GC. I’d recommend it. Plus, if you’re using kubernetes or docker, you can automatically set it to the orchestrator-managed memory limit using something like <a href="https:&#x2F;&#x2F;github.com&#x2F;KimMachineGun&#x2F;automemlimit">https:&#x2F;&#x2F;github.com&#x2F;KimMachineGun&#x2F;automemlimit</a> — no need to add any manual config at all.</div><br/><div id="41689461" class="c"><input type="checkbox" id="c-41689461" checked=""/><div class="controls bullet"><span class="by">nickzelei</span><span>|</span><a href="#41688596">parent</a><span>|</span><a href="#41691328">next</a><span>|</span><label class="collapse" for="c-41689461">[-]</label><label class="expand" for="c-41689461">[1 more]</label></div><br/><div class="children"><div class="content">Oh this is a good find. Thank you for sharing that link!</div><br/></div></div><div id="41691328" class="c"><input type="checkbox" id="c-41691328" checked=""/><div class="controls bullet"><span class="by">arccy</span><span>|</span><a href="#41688596">parent</a><span>|</span><a href="#41689461">prev</a><span>|</span><a href="#41689725">next</a><span>|</span><label class="collapse" for="c-41691328">[-]</label><label class="expand" for="c-41691328">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;pkg.go.dev&#x2F;go.uber.org&#x2F;automaxprocs" rel="nofollow">https:&#x2F;&#x2F;pkg.go.dev&#x2F;go.uber.org&#x2F;automaxprocs</a> is another useful one if you set CPU limits</div><br/></div></div></div></div><div id="41689725" class="c"><input type="checkbox" id="c-41689725" checked=""/><div class="controls bullet"><span class="by">trustno2</span><span>|</span><a href="#41688596">prev</a><span>|</span><a href="#41688418">next</a><span>|</span><label class="collapse" for="c-41689725">[-]</label><label class="expand" for="c-41689725">[5 more]</label></div><br/><div class="children"><div class="content">Other note<p>Sooner or later you will hit html&#x2F;template, and realize it&#x27;s actually very weird and has a lot of weird issues.<p>Don&#x27;t use html&#x2F;template.<p>I grew to like Templ instead</div><br/><div id="41689864" class="c"><input type="checkbox" id="c-41689864" checked=""/><div class="controls bullet"><span class="by">emmanueloga_</span><span>|</span><a href="#41689725">parent</a><span>|</span><a href="#41691524">next</a><span>|</span><label class="collapse" for="c-41689864">[-]</label><label class="expand" for="c-41689864">[1 more]</label></div><br/><div class="children"><div class="content">Templ [1] is great!<p>Another go mod that helps a lot when massaging JSON (something most web servers end up doing sooner or later) is GJSON [2].<p>--<p>1: <a href="https:&#x2F;&#x2F;github.com&#x2F;a-h&#x2F;templ">https:&#x2F;&#x2F;github.com&#x2F;a-h&#x2F;templ</a><p>2: <a href="https:&#x2F;&#x2F;github.com&#x2F;tidwall&#x2F;gjson">https:&#x2F;&#x2F;github.com&#x2F;tidwall&#x2F;gjson</a></div><br/></div></div><div id="41691524" class="c"><input type="checkbox" id="c-41691524" checked=""/><div class="controls bullet"><span class="by">sethammons</span><span>|</span><a href="#41689725">parent</a><span>|</span><a href="#41689864">prev</a><span>|</span><a href="#41689820">next</a><span>|</span><label class="collapse" for="c-41691524">[-]</label><label class="expand" for="c-41691524">[1 more]</label></div><br/><div class="children"><div class="content">I am just trying Templ. I like what I am seeing for the most part. There are some tooling ergonomics to work out. Lots of &quot;suddenly the editor things everything is an error and nothing will autoimport or format&quot; back to mostly working. Click to definition goes to the autogenerated code instead of the templ file. Couple things like that. But soooooooooo much better to deal with code gen than html&#x2F;template. That thing is a pita</div><br/></div></div><div id="41689820" class="c"><input type="checkbox" id="c-41689820" checked=""/><div class="controls bullet"><span class="by">arp242</span><span>|</span><a href="#41689725">parent</a><span>|</span><a href="#41691524">prev</a><span>|</span><a href="#41688418">next</a><span>|</span><label class="collapse" for="c-41689820">[-]</label><label class="expand" for="c-41689820">[2 more]</label></div><br/><div class="children"><div class="content">stdlib templates are a bit idiosyncratic and probably not the easiest to start with, but they do work and don&#x27;t have &quot;weird issues&quot; AFAIK. What issues did you encounter?</div><br/><div id="41691413" class="c"><input type="checkbox" id="c-41691413" checked=""/><div class="controls bullet"><span class="by">kbolino</span><span>|</span><a href="#41689725">root</a><span>|</span><a href="#41689820">parent</a><span>|</span><a href="#41688418">next</a><span>|</span><label class="collapse" for="c-41691413">[-]</label><label class="expand" for="c-41691413">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t know what issues others have had with it, but for me one notable thing is that html&#x2F;template strips all comments out. This is by design, but it&#x27;s not documented anywhere. I&#x27;ve proposed making this configurable, but my proposal has gotten no traction so far.</div><br/></div></div></div></div></div></div><div id="41688418" class="c"><input type="checkbox" id="c-41688418" checked=""/><div class="controls bullet"><span class="by">srameshc</span><span>|</span><a href="#41689725">prev</a><span>|</span><a href="#41693815">next</a><span>|</span><label class="collapse" for="c-41688418">[-]</label><label class="expand" for="c-41688418">[7 more]</label></div><br/><div class="children"><div class="content">Good to see author&#x27;s mention about routing. I am mentally stuck with mux for a long time and didn&#x27;t pay attention to the new release features. Happy that I always find things like these on HN.</div><br/><div id="41688638" class="c"><input type="checkbox" id="c-41688638" checked=""/><div class="controls bullet"><span class="by">JodieBenitez</span><span>|</span><a href="#41688418">parent</a><span>|</span><a href="#41693815">next</a><span>|</span><label class="collapse" for="c-41688638">[-]</label><label class="expand" for="c-41688638">[6 more]</label></div><br/><div class="children"><div class="content">Nice new feature, would actually make me want to use Go without Gin.</div><br/><div id="41693985" class="c"><input type="checkbox" id="c-41693985" checked=""/><div class="controls bullet"><span class="by">rwdf</span><span>|</span><a href="#41688418">root</a><span>|</span><a href="#41688638">parent</a><span>|</span><a href="#41688720">next</a><span>|</span><label class="collapse" for="c-41693985">[-]</label><label class="expand" for="c-41693985">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve grown to prefer go-chi over Gin (or Echo), since it&#x27;s just the standard library with some QoL features on top.</div><br/><div id="41694724" class="c"><input type="checkbox" id="c-41694724" checked=""/><div class="controls bullet"><span class="by">thiht</span><span>|</span><a href="#41688418">root</a><span>|</span><a href="#41693985">parent</a><span>|</span><a href="#41688720">next</a><span>|</span><label class="collapse" for="c-41694724">[-]</label><label class="expand" for="c-41694724">[1 more]</label></div><br/><div class="children"><div class="content">Chi is amazing. I love the philosophy of extending the stdlib instead of writing an alternative. I try to keep that in mind when writing my own libs or helpers now, and I&#x27;m very satisfied with the results.<p>For example I made a lib to write commands (like cobra or urfave&#x2F;cli), but based entirely on the `flag` package: <a href="https:&#x2F;&#x2F;github.com&#x2F;Thiht&#x2F;go-command">https:&#x2F;&#x2F;github.com&#x2F;Thiht&#x2F;go-command</a></div><br/></div></div></div></div><div id="41688720" class="c"><input type="checkbox" id="c-41688720" checked=""/><div class="controls bullet"><span class="by">leetrout</span><span>|</span><a href="#41688418">root</a><span>|</span><a href="#41688638">parent</a><span>|</span><a href="#41693985">prev</a><span>|</span><a href="#41693815">next</a><span>|</span><label class="collapse" for="c-41688720">[-]</label><label class="expand" for="c-41688720">[3 more]</label></div><br/><div class="children"><div class="content">I am over Gin and have been for years yet everyone keeps using it because it has inertia. The docs are garbage.<p>Big fan of Echo and it has much better docs.<p><a href="https:&#x2F;&#x2F;echo.labstack.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;echo.labstack.com&#x2F;</a></div><br/><div id="41689495" class="c"><input type="checkbox" id="c-41689495" checked=""/><div class="controls bullet"><span class="by">JodieBenitez</span><span>|</span><a href="#41688418">root</a><span>|</span><a href="#41688720">parent</a><span>|</span><a href="#41689340">next</a><span>|</span><label class="collapse" for="c-41689495">[-]</label><label class="expand" for="c-41689495">[1 more]</label></div><br/><div class="children"><div class="content">Thanks for the suggestion, will give it a try. I&#x27;m more familiar with Python than Go. I know my way around the Python ecosystem and can make informed decisions about which tool to use. Not so much with Go, so I appreciate your advice.</div><br/></div></div><div id="41689340" class="c"><input type="checkbox" id="c-41689340" checked=""/><div class="controls bullet"><span class="by">xerox13ster</span><span>|</span><a href="#41688418">root</a><span>|</span><a href="#41688720">parent</a><span>|</span><a href="#41689495">prev</a><span>|</span><a href="#41693815">next</a><span>|</span><label class="collapse" for="c-41689340">[-]</label><label class="expand" for="c-41689340">[1 more]</label></div><br/><div class="children"><div class="content">I had to move from Gin to echo for my personal site, the routing in Gin was refusing to serve static resources at the root path without some headache.</div><br/></div></div></div></div></div></div></div></div><div id="41693815" class="c"><input type="checkbox" id="c-41693815" checked=""/><div class="controls bullet"><span class="by">geoka9</span><span>|</span><a href="#41688418">prev</a><span>|</span><a href="#41688390">next</a><span>|</span><label class="collapse" for="c-41693815">[-]</label><label class="expand" for="c-41693815">[1 more]</label></div><br/><div class="children"><div class="content">I recently put together a &quot;stack&quot; of libraries to use for a new webapp project in Go; here&#x27;s what I ended up using:<p>- go-chi for routing
- pgx for Postgres driver
- pressly&#x2F;goose for migrations (I like how it can embed migrations into the binary as long as they are in SQL&#x2F;not Go)
- go-jet (for type-safe SQL; sort of - it lets you write 100% Go that looks like 98% SQL)
- templ
- htmx (not Go-specific, but feels like a match made in heaven for templ)
- authboss for auth<p>I&#x27;m very happy with all of these choices, except maybe authboss - it&#x27;s a powerful auth framework, but it took a bit of figuring out since the documentation is not very comprehensive; but it worked out in the end.</div><br/></div></div><div id="41688390" class="c"><input type="checkbox" id="c-41688390" checked=""/><div class="controls bullet"><span class="by">codegeek</span><span>|</span><a href="#41693815">prev</a><span>|</span><a href="#41690936">next</a><span>|</span><label class="collapse" for="c-41688390">[-]</label><label class="expand" for="c-41688390">[13 more]</label></div><br/><div class="children"><div class="content">What I love about Go is its simplicity and no framework dependency. Go is popular because it has no dominating framework. Nothing wrong with frameworks when it fits the use case but I feel that we have become over dependent on framework and Go brings that freshness about just using standard libraries to create something decent with some decent battle tested 3rd party libraries.<p>I personally love &quot;library over framework&quot; mindset and I found Go to do that best.<p>Also, whether you want to build a web app or cli tool, Go wins there (for me at least). And I work a lot with PHP and .NET as well and love all 3 overall.<p>Not to mention how easy was it for someone like me who never wrote Go before to get up and running with it quickly. Oh did I mention that I personally love the explicit error handling which gets a lot of hate (Never understood why). I can do if err != nil all day.<p>A big Go fan.</div><br/><div id="41688484" class="c"><input type="checkbox" id="c-41688484" checked=""/><div class="controls bullet"><span class="by">jeffreyrogers</span><span>|</span><a href="#41688390">parent</a><span>|</span><a href="#41690936">next</a><span>|</span><label class="collapse" for="c-41688484">[-]</label><label class="expand" for="c-41688484">[12 more]</label></div><br/><div class="children"><div class="content">I like Go for this reason as well. In Python I found the Flask framework to be suitably unobtrusive enough to be nice to use (never liked Django), but deploying python is a hassle. Go is much better in that area. The error handling never bothered me either.<p>I think if Go shipped better support for auth&#x2F;sessions in the standard library more people would use it. Having to write that code yourself (actually not very hard, but intimidating if you&#x27;ve never done it before) deters people and ironically the ease of creating Go packages makes it unclear which you should use if you&#x27;re not going to implement it yourself.</div><br/><div id="41688711" class="c"><input type="checkbox" id="c-41688711" checked=""/><div class="controls bullet"><span class="by">leetrout</span><span>|</span><a href="#41688390">root</a><span>|</span><a href="#41688484">parent</a><span>|</span><a href="#41688498">next</a><span>|</span><label class="collapse" for="c-41688711">[-]</label><label class="expand" for="c-41688711">[3 more]</label></div><br/><div class="children"><div class="content">I am a Django apologist because I grew up with Django. So with that being said, I&#x27;m not out to convert you but I am genuinely curious what you don&#x27;t like about it. Promise I won&#x27;t refute anything I just like to try to understand where it turned off folks.<p>I don&#x27;t like flask because it seems just easy enough to be really productive in the beginning but you eventually need most of the things Django gives you. So I would rather pick up Django Rest Framework or Django Ninja than Flask or Fast API. In those cases I jump straight to Go and use it instead because the same library decisions on the Go side give me a lot more lift on the operations end (easy to deploy, predictable performance into thousands of requests per second if built correctly).</div><br/><div id="41688961" class="c"><input type="checkbox" id="c-41688961" checked=""/><div class="controls bullet"><span class="by">jeffreyrogers</span><span>|</span><a href="#41688390">root</a><span>|</span><a href="#41688711">parent</a><span>|</span><a href="#41688809">next</a><span>|</span><label class="collapse" for="c-41688961">[-]</label><label class="expand" for="c-41688961">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s opinionated in a way I dislike. I don&#x27;t actually have anything against opinionated software--tailwind is very opinionated about how you should write CSS but I like it because it matches up with how my mind works. But I find Django very jarring. I can&#x27;t point to a specific thing about Django, it&#x27;s more that if I were to design a framework from scratch it would look nothing like Django, so I experience a lot of friction trying to shape my ideas about how to build an application into Django&#x27;s way of doing it. I have the same problem with Rails as well.<p>I agree with you that Django provides most things that an application will eventually need, and if I were managing a team that was starting a project from scratch I think Django would be a reasonable choice, but aesthetically something about it irritates me.</div><br/></div></div><div id="41688809" class="c"><input type="checkbox" id="c-41688809" checked=""/><div class="controls bullet"><span class="by">jpc0</span><span>|</span><a href="#41688390">root</a><span>|</span><a href="#41688711">parent</a><span>|</span><a href="#41688961">prev</a><span>|</span><a href="#41688498">next</a><span>|</span><label class="collapse" for="c-41688809">[-]</label><label class="expand" for="c-41688809">[1 more]</label></div><br/><div class="children"><div class="content">I have to learn an entite framework and if I want to stray away from what it wants the magic makes it hard.<p>For one, I so migrations with raw SQL onto the server, I just don&#x27;t trust it any other way and I dislike ORMs, I even dislike query builders.<p>But for a big framework like Django you can&#x27;t remove those batteries easily and you have already strayed away from the narrow paved road.<p>If I&#x27;m spinning up an API endpoint for my existing stack, I&#x27;m picking flask ( well no I&#x27;m picking go because WSGI is a pain in the... to deploy ) purely because I don&#x27;t need auth + rate limiting + an orm and all that. I need endpoints exposed to do what I need, literally the rest is already handled by my API gateway and it will be tied into our existing management dashboard.<p>Django may be great to spin up a quick project but I found I needed to stary for the paved road pretty quickly so I rather picked a different tool...<p>This doesn&#x27;t apply to everybody either, for aome Django is the correct solution.</div><br/></div></div></div></div><div id="41688498" class="c"><input type="checkbox" id="c-41688498" checked=""/><div class="controls bullet"><span class="by">atomicnumber3</span><span>|</span><a href="#41688390">root</a><span>|</span><a href="#41688484">parent</a><span>|</span><a href="#41688711">prev</a><span>|</span><a href="#41688988">next</a><span>|</span><label class="collapse" for="c-41688498">[-]</label><label class="expand" for="c-41688498">[4 more]</label></div><br/><div class="children"><div class="content">My main gripe about go is that it&#x27;s decent for the middle and late stages and really really bad to start with. You&#x27;ll spend way too much time rewriting stuff you literally get for free by running &quot;rails new&quot; or &quot;bundle add devise&quot;</div><br/><div id="41688605" class="c"><input type="checkbox" id="c-41688605" checked=""/><div class="controls bullet"><span class="by">vasilzhigilei</span><span>|</span><a href="#41688390">root</a><span>|</span><a href="#41688498">parent</a><span>|</span><a href="#41688988">next</a><span>|</span><label class="collapse" for="c-41688605">[-]</label><label class="expand" for="c-41688605">[3 more]</label></div><br/><div class="children"><div class="content">I love using Go for personal projects, but I keep finding myself recreating the same redis-based session storage logic, authentication, admin vs public routes, etc. Really does burn time in the beginning, even though it&#x27;s fun to write the code.</div><br/><div id="41688673" class="c"><input type="checkbox" id="c-41688673" checked=""/><div class="controls bullet"><span class="by">tizzy</span><span>|</span><a href="#41688390">root</a><span>|</span><a href="#41688605">parent</a><span>|</span><a href="#41688988">next</a><span>|</span><label class="collapse" for="c-41688673">[-]</label><label class="expand" for="c-41688673">[2 more]</label></div><br/><div class="children"><div class="content">There is definitely space for an opinionated set of libraries and boiler plate code for golang projects like this.<p>Having said that, I’d bet that the go community consensus is that you build one out yourself and reuse it. So most times I end up copy and pasting the same logic rather than recreating.</div><br/><div id="41689135" class="c"><input type="checkbox" id="c-41689135" checked=""/><div class="controls bullet"><span class="by">legorobot</span><span>|</span><a href="#41688390">root</a><span>|</span><a href="#41688673">parent</a><span>|</span><a href="#41688988">next</a><span>|</span><label class="collapse" for="c-41689135">[-]</label><label class="expand" for="c-41689135">[1 more]</label></div><br/><div class="children"><div class="content">100% this. I have a set of commonly-used code in a repository we use at work. AuthN&#x2F;AuthZ, code specific to our infrastructure&#x2F;architecture, common http middlewares, error types, DB wrapper, API clients, OpenAPI Server generation, etc.<p>However, my personal projects have a different set of code I reuse (more CLI- and tool-heavy focus), and I&#x27;m sure other environments would have an entirely different set of reused code.<p>On the opinionated library side of things, I did follow LiveBud for a while, and Go-Micro but haven&#x27;t really sat well with the experiences from those, given how they lock you in to different aspects of your stack.</div><br/></div></div></div></div></div></div></div></div><div id="41688988" class="c"><input type="checkbox" id="c-41688988" checked=""/><div class="controls bullet"><span class="by">kolja005</span><span>|</span><a href="#41688390">root</a><span>|</span><a href="#41688484">parent</a><span>|</span><a href="#41688498">prev</a><span>|</span><a href="#41688688">next</a><span>|</span><label class="collapse" for="c-41688988">[-]</label><label class="expand" for="c-41688988">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;m curious in what sense you find Python difficult to deploy? My company has tons of Python APIs internally and we never have much trouble with them. They are all pretty lightly used services so it it something about doing it on a larger scale?</div><br/><div id="41689952" class="c"><input type="checkbox" id="c-41689952" checked=""/><div class="controls bullet"><span class="by">javcasas</span><span>|</span><a href="#41688390">root</a><span>|</span><a href="#41688988">parent</a><span>|</span><a href="#41688688">next</a><span>|</span><label class="collapse" for="c-41689952">[-]</label><label class="expand" for="c-41689952">[1 more]</label></div><br/><div class="children"><div class="content">There is a world of difference between having to install python, libraries (some of them may require C-based libs and compiling, therefore also install gcc), then configure wsgi, hope it doesn&#x27;t clash with other python versions or have docker and containers... or just generating a fat binary in go.</div><br/></div></div></div></div><div id="41688688" class="c"><input type="checkbox" id="c-41688688" checked=""/><div class="controls bullet"><span class="by">codegeek</span><span>|</span><a href="#41688390">root</a><span>|</span><a href="#41688484">parent</a><span>|</span><a href="#41688988">prev</a><span>|</span><a href="#41690122">next</a><span>|</span><label class="collapse" for="c-41688688">[-]</label><label class="expand" for="c-41688688">[1 more]</label></div><br/><div class="children"><div class="content">Some great points about the downsides of Go. Btw I was a Flask junkie in early days.</div><br/></div></div><div id="41690122" class="c"><input type="checkbox" id="c-41690122" checked=""/><div class="controls bullet"><span class="by">kaba0</span><span>|</span><a href="#41688390">root</a><span>|</span><a href="#41688484">parent</a><span>|</span><a href="#41688688">prev</a><span>|</span><a href="#41690936">next</a><span>|</span><label class="collapse" for="c-41690122">[-]</label><label class="expand" for="c-41690122">[1 more]</label></div><br/><div class="children"><div class="content">&gt; (actually not very hard, but intimidating if you&#x27;ve never done it before)<p>These stuff are never really hard, but you <i>will</i> make countless vulnerabilities that way. The most important job of a good framework is cutting down significantly on the possible to get wrong use cases, exposing you to already safe APIs.</div><br/></div></div></div></div></div></div><div id="41690936" class="c"><input type="checkbox" id="c-41690936" checked=""/><div class="controls bullet"><span class="by">ncruces</span><span>|</span><a href="#41688390">prev</a><span>|</span><a href="#41690412">next</a><span>|</span><label class="collapse" for="c-41690936">[-]</label><label class="expand" for="c-41690936">[1 more]</label></div><br/><div class="children"><div class="content">If you decide to use SQLite with one (single thread) writer pool and an
other reader pool, this may help:
<a href="https:&#x2F;&#x2F;github.com&#x2F;bxcodec&#x2F;dbresolver">https:&#x2F;&#x2F;github.com&#x2F;bxcodec&#x2F;dbresolver</a><p><i>Also sometimes if I have two tables where I know I’ll never need to do a JOIN between them, I’ll just put them in separate databases so that I can connect to them independently.</i><p>If this data belongs together and you&#x27;re just doing this to improve concurrency, this may be a case where BEGIN CONCURRENT helps: <a href="https:&#x2F;&#x2F;sqlite.org&#x2F;src&#x2F;doc&#x2F;begin-concurrent&#x2F;doc&#x2F;begin_concurrent.md" rel="nofollow">https:&#x2F;&#x2F;sqlite.org&#x2F;src&#x2F;doc&#x2F;begin-concurrent&#x2F;doc&#x2F;begin_concur...</a><p>If you want to experiment with BEGIN CONCURRENT in Go you could do worse than try my SQLite driver:
<a href="https:&#x2F;&#x2F;github.com&#x2F;ncruces&#x2F;go-sqlite3">https:&#x2F;&#x2F;github.com&#x2F;ncruces&#x2F;go-sqlite3</a><p>Import this package to get the version with BEGIN CONCURRENT:
<a href="https:&#x2F;&#x2F;github.com&#x2F;ncruces&#x2F;go-sqlite3&#x2F;tree&#x2F;main&#x2F;embed&#x2F;bcw2">https:&#x2F;&#x2F;github.com&#x2F;ncruces&#x2F;go-sqlite3&#x2F;tree&#x2F;main&#x2F;embed&#x2F;bcw2</a></div><br/></div></div><div id="41690412" class="c"><input type="checkbox" id="c-41690412" checked=""/><div class="controls bullet"><span class="by">kristianp</span><span>|</span><a href="#41690936">prev</a><span>|</span><a href="#41689608">next</a><span>|</span><label class="collapse" for="c-41690412">[-]</label><label class="expand" for="c-41690412">[2 more]</label></div><br/><div class="children"><div class="content">Does she (or anyone else here) use net&#x2F;http&#x27;s built in https support?  Seems implied by saying the built-in web server is used in production.</div><br/><div id="41690481" class="c"><input type="checkbox" id="c-41690481" checked=""/><div class="controls bullet"><span class="by">eliben</span><span>|</span><a href="#41690412">parent</a><span>|</span><a href="#41689608">next</a><span>|</span><label class="collapse" for="c-41690481">[-]</label><label class="expand" for="c-41690481">[1 more]</label></div><br/><div class="children"><div class="content">Yes, all the time! The built-in net&#x2F;http has great TLS support<p><a href="https:&#x2F;&#x2F;eli.thegreenplace.net&#x2F;2021&#x2F;go-https-servers-with-tls&#x2F;" rel="nofollow">https:&#x2F;&#x2F;eli.thegreenplace.net&#x2F;2021&#x2F;go-https-servers-with-tls...</a></div><br/></div></div></div></div><div id="41689608" class="c"><input type="checkbox" id="c-41689608" checked=""/><div class="controls bullet"><span class="by">rmac</span><span>|</span><a href="#41690412">prev</a><span>|</span><a href="#41691716">next</a><span>|</span><label class="collapse" for="c-41689608">[-]</label><label class="expand" for="c-41689608">[5 more]</label></div><br/><div class="children"><div class="content">the whole gobin &#x2F; gopath thing was annoying as a beginner: I just want to build this module and use that local module<p>go build .&#x2F;... Goes where ?</div><br/><div id="41689695" class="c"><input type="checkbox" id="c-41689695" checked=""/><div class="controls bullet"><span class="by">coffeeindex</span><span>|</span><a href="#41689608">parent</a><span>|</span><a href="#41691716">next</a><span>|</span><label class="collapse" for="c-41689695">[-]</label><label class="expand" for="c-41689695">[4 more]</label></div><br/><div class="children"><div class="content">I believe it is recommended to not use gobin&#x2F;gopath anymore.<p>go test .&#x2F;… tests all files in the project, so I assume build does something similar.</div><br/><div id="41690556" class="c"><input type="checkbox" id="c-41690556" checked=""/><div class="controls bullet"><span class="by">NAHWheatCracker</span><span>|</span><a href="#41689608">root</a><span>|</span><a href="#41689695">parent</a><span>|</span><a href="#41691716">next</a><span>|</span><label class="collapse" for="c-41690556">[-]</label><label class="expand" for="c-41690556">[3 more]</label></div><br/><div class="children"><div class="content">My experience with go build .&#x2F;... is that it compiles everything but it doesn&#x27;t make the binaries.<p>&gt; When compiling multiple packages or a single non-main package, build compiles the packages but discards the resulting object, serving only as a check that the packages can be built.<p>From <a href="https:&#x2F;&#x2F;pkg.go.dev&#x2F;cmd&#x2F;go#hdr-Compile_packages_and_dependencies" rel="nofollow">https:&#x2F;&#x2F;pkg.go.dev&#x2F;cmd&#x2F;go#hdr-Compile_packages_and_dependenc...</a><p>A bit annoying when you want to build a bunch of executables, but it&#x27;s not something I need often and it&#x27;s easy to script.</div><br/><div id="41691371" class="c"><input type="checkbox" id="c-41691371" checked=""/><div class="controls bullet"><span class="by">arccy</span><span>|</span><a href="#41689608">root</a><span>|</span><a href="#41690556">parent</a><span>|</span><a href="#41691716">next</a><span>|</span><label class="collapse" for="c-41691371">[-]</label><label class="expand" for="c-41691371">[2 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>  go build -o some&#x2F;dir&#x2F; .&#x2F;...
</code></pre>
will actually output the binaries</div><br/><div id="41691466" class="c"><input type="checkbox" id="c-41691466" checked=""/><div class="controls bullet"><span class="by">NAHWheatCracker</span><span>|</span><a href="#41689608">root</a><span>|</span><a href="#41691371">parent</a><span>|</span><a href="#41691716">next</a><span>|</span><label class="collapse" for="c-41691466">[-]</label><label class="expand" for="c-41691466">[1 more]</label></div><br/><div class="children"><div class="content">Sick, I couldn&#x27;t figure it out when I needed it so I just manually created a 20 line script to cd into each directory and go build.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="41691716" class="c"><input type="checkbox" id="c-41691716" checked=""/><div class="controls bullet"><span class="by">zaptheimpaler</span><span>|</span><a href="#41689608">prev</a><span>|</span><label class="collapse" for="c-41691716">[-]</label><label class="expand" for="c-41691716">[6 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been using go for a month now in a new job and hate it. It feels like they learned nothing from the past 20 years of language development.<p>Just one huge problem is that they REPEATED Java&#x27;s million&#x2F;billion dollar mistake with nulls. The usual way to get HTTP Headers using Go cannot distinguish between an empty header value and no header at all because the method returns &quot;nil&quot; for both these cases. They could&#x27;ve adopted option types but instead we are back to this 90s bullshit of conflating error types with valid values. If you&#x27;re programming defensively, every single object reference anywhere has to be checked for nil or risk panicking now.. like why, after we literally named this a billion dollar mistake in Java, why would anyone fucking do this again?<p>We have helper methods in our codebase just do to this:<p><pre><code>    fn checkThingIsA(ctx) {
      thing := ctx.get(thing)
      if thing == nil || thing != Thing.A {
        return false
      }
      return true
    }
</code></pre>
In any sane language this is one line:<p><pre><code>  ctx.get(thing).map(|x| x == Thing.A).unwrap_or(false)
</code></pre>
In Go, we have to make helper methods for the simplest things because the simplest 1-liner becomes 4 lines with the nil&#x2F;error check after. We have 100 helpers that do some variation of that because everything is so verbose that could would become unreadable without it.<p>I hate that they made and popularized this backwards dumpster fire of a language when we should know much better by now.</div><br/><div id="41693038" class="c"><input type="checkbox" id="c-41693038" checked=""/><div class="controls bullet"><span class="by">cle</span><span>|</span><a href="#41691716">parent</a><span>|</span><a href="#41693567">next</a><span>|</span><label class="collapse" for="c-41693038">[-]</label><label class="expand" for="c-41693038">[1 more]</label></div><br/><div class="children"><div class="content">&gt; The usual way to get HTTP Headers using Go cannot distinguish between an empty header value and no header at all<p>HTTP headers in Go are maps, which have a built-in mechanism for checking key existence, which distinguishes b&#x2F;t empty and missing. No nils involved.<p><pre><code>  if vals, ok := headers[&quot;Content-Length&quot;]; !ok {
    &#x2F;&#x2F; no content-length header was passed
  }</code></pre></div><br/></div></div><div id="41693567" class="c"><input type="checkbox" id="c-41693567" checked=""/><div class="controls bullet"><span class="by">WuxiFingerHold</span><span>|</span><a href="#41691716">parent</a><span>|</span><a href="#41693038">prev</a><span>|</span><a href="#41694032">next</a><span>|</span><label class="collapse" for="c-41693567">[-]</label><label class="expand" for="c-41693567">[1 more]</label></div><br/><div class="children"><div class="content">Go as a language is not fun at all. Nor very good. Weaker type system and less language features that increase productivity and readability than C#, Java, Kotlin and Typescript, no null checks.<p>Go as a runtime is outstanding.<p>Go&#x27;s tooling, stability and governance are very good.<p>Nothing is perfect. Enter into your compromise.</div><br/></div></div><div id="41694032" class="c"><input type="checkbox" id="c-41694032" checked=""/><div class="controls bullet"><span class="by">Mikushi</span><span>|</span><a href="#41691716">parent</a><span>|</span><a href="#41693567">prev</a><span>|</span><a href="#41692120">next</a><span>|</span><label class="collapse" for="c-41694032">[-]</label><label class="expand" for="c-41694032">[2 more]</label></div><br/><div class="children"><div class="content">Your &quot;sane&quot; language looks quite insane to me, unreadable mess at a glance.</div><br/><div id="41694243" class="c"><input type="checkbox" id="c-41694243" checked=""/><div class="controls bullet"><span class="by">lifthrasiir</span><span>|</span><a href="#41691716">root</a><span>|</span><a href="#41694032">parent</a><span>|</span><a href="#41692120">next</a><span>|</span><label class="collapse" for="c-41694243">[-]</label><label class="expand" for="c-41694243">[1 more]</label></div><br/><div class="children"><div class="content">It almost looks like a Rust syntax to me, which is only one way to do that. A concise syntax is always possible if that&#x27;s prioritized, like `(ctx.get(thing)? == Thing.A) ?? false` or `ctx.get(thing)?.(_ == Thing.A)`. Actual Rust programmers would also prefer to check against the explicit value whenever possible: `thing == Some(Thing.A)`.</div><br/></div></div></div></div><div id="41692120" class="c"><input type="checkbox" id="c-41692120" checked=""/><div class="controls bullet"><span class="by">sethammons</span><span>|</span><a href="#41691716">parent</a><span>|</span><a href="#41694032">prev</a><span>|</span><label class="collapse" for="c-41692120">[-]</label><label class="expand" for="c-41692120">[1 more]</label></div><br/><div class="children"><div class="content">Sounds like you are storing interfaces in the context. I wouldn&#x27;t do that. I do hit the occasional nil reference error, but it is usually very rare. If you deal with concrete types, not interfaces, you don&#x27;t have to worry about that very weird nil but not nil thing. And always use constructors.</div><br/></div></div></div></div></div></div></div></div></div></body></html>