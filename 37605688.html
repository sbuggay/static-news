<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1695373261159" as="style"/><link rel="stylesheet" href="styles.css?v=1695373261159"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="http://joeyh.name/blog/entry/Haskell_webassembly_in_the_browser/">Haskell WebAssembly in the Browser</a> <span class="domain">(<a href="http://joeyh.name">joeyh.name</a>)</span></div><div class="subtext"><span>zdw</span> | <span>8 comments</span></div><br/><div><div id="37606655" class="c"><input type="checkbox" id="c-37606655" checked=""/><div class="controls bullet"><span class="by">bradrn</span><span>|</span><a href="#37607228">next</a><span>|</span><label class="collapse" for="c-37606655">[-]</label><label class="expand" for="c-37606655">[1 more]</label></div><br/><div class="children"><div class="content">GHC’s WASM backend is already really useful! I also used it to port one of my own programs to the browser [0], albeit not using the DOM as this person did. Documentation is still sparse, but it’s a very similar process to creating a shared foreign library. (At the very least, I tried to document what I could.)<p>[0] <a href="https:&#x2F;&#x2F;github.com&#x2F;bradrn&#x2F;brassica">https:&#x2F;&#x2F;github.com&#x2F;bradrn&#x2F;brassica</a></div><br/></div></div><div id="37607228" class="c"><input type="checkbox" id="c-37607228" checked=""/><div class="controls bullet"><span class="by">evmar</span><span>|</span><a href="#37606655">prev</a><span>|</span><a href="#37606766">next</a><span>|</span><label class="collapse" for="c-37607228">[-]</label><label class="expand" for="c-37607228">[1 more]</label></div><br/><div class="children"><div class="content">It think you might not need to go via CString to get to the browser, given that the browser side doesn&#x27;t care about NUL termination either.  I think you could use Data.ByteString.Internal to grab the ForeignPtr&#x2F;length out of the BS constructor directly.</div><br/></div></div><div id="37606766" class="c"><input type="checkbox" id="c-37606766" checked=""/><div class="controls bullet"><span class="by">whateveracct</span><span>|</span><a href="#37607228">prev</a><span>|</span><a href="#37607554">next</a><span>|</span><label class="collapse" for="c-37606766">[-]</label><label class="expand" for="c-37606766">[1 more]</label></div><br/><div class="children"><div class="content">haskell and raylib work together in WebAssembly too!<p><a href="https:&#x2F;&#x2F;github.com&#x2F;Anut-py&#x2F;ghc-web-test">https:&#x2F;&#x2F;github.com&#x2F;Anut-py&#x2F;ghc-web-test</a></div><br/></div></div><div id="37607554" class="c"><input type="checkbox" id="c-37607554" checked=""/><div class="controls bullet"><span class="by">forgetbook</span><span>|</span><a href="#37606766">prev</a><span>|</span><a href="#37607543">next</a><span>|</span><label class="collapse" for="c-37607554">[-]</label><label class="expand" for="c-37607554">[2 more]</label></div><br/><div class="children"><div class="content">Does this unlock something re: postgrest?  I&#x27;m way out of my depth; the level of detail I can bring is the factoid &#x27;postgrest runs on haskell&#x27;</div><br/><div id="37607844" class="c"><input type="checkbox" id="c-37607844" checked=""/><div class="controls bullet"><span class="by">chatmasta</span><span>|</span><a href="#37607554">parent</a><span>|</span><a href="#37607543">next</a><span>|</span><label class="collapse" for="c-37607844">[-]</label><label class="expand" for="c-37607844">[1 more]</label></div><br/><div class="children"><div class="content">Maybe, but probably not. Postgrest still needs to talk to Postgres over the Postgres wire protocol, which isn&#x27;t possible with wasm in the browser because there is no raw socket API. However, I&#x27;m sure there are some cool hacks you could do like running postgres-wasm &quot;locally&quot; (also within the browser) and having postgres talk to it. You&#x27;d still need to modify Postgrest to change how it speaks to Postgres, though.<p>This is also assuming you&#x27;re running the WebAssembly in the browser. If you&#x27;re running it in something like WASI, you might have access to a raw socket API and then maybe it&#x27;s a different story.</div><br/></div></div></div></div><div id="37607543" class="c"><input type="checkbox" id="c-37607543" checked=""/><div class="controls bullet"><span class="by">agentultra</span><span>|</span><a href="#37607554">prev</a><span>|</span><a href="#37607500">next</a><span>|</span><label class="collapse" for="c-37607543">[-]</label><label class="expand" for="c-37607543">[1 more]</label></div><br/><div class="children"><div class="content">Finally! Nice!!<p>I tried getting it going on my stream a couple times but failed to get the shim going!<p>Can’t wait to dive into this!<p>Well done!</div><br/></div></div><div id="37607500" class="c"><input type="checkbox" id="c-37607500" checked=""/><div class="controls bullet"><span class="by">miga</span><span>|</span><a href="#37607543">prev</a><span>|</span><label class="collapse" for="c-37607500">[-]</label><label class="expand" for="c-37607500">[1 more]</label></div><br/><div class="children"><div class="content">It is nice to live in the future &quot;when browsers do not include JS any more&quot;.<p>I do not want to steal your greatness when you port basic JS APIs to Haskell WASM.<p>Or that of WASI work, when we no longer need to use raw JS API.</div><br/></div></div></div></div></div></div></div></body></html>