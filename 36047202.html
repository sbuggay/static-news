<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1684918865747" as="style"/><link rel="stylesheet" href="styles.css?v=1684918865747"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://opensource.googleblog.com/2023/05/open-sourcing-our-rust-crate-audits.html">Google open-sources Rust crate audits</a> <span class="domain">(<a href="https://opensource.googleblog.com">opensource.googleblog.com</a>)</span></div><div class="subtext"><span>taintegral</span> | <span>44 comments</span></div><br/><div><div id="36051320" class="c"><input type="checkbox" id="c-36051320" checked=""/><div class="controls bullet"><span class="by">SilverBirch</span><span>|</span><a href="#36050866">next</a><span>|</span><label class="collapse" for="c-36051320">[-]</label><label class="expand" for="c-36051320">[16 more]</label></div><br/><div class="children"><div class="content">&gt;Before a project starts using a new crate, members usually perform a thorough audit to measure it against their standards for security, correctness, testing, and more.<p>Do they? I mean really? Let&#x27;s lay aside the fact that it&#x27;s almost impossible to eyeball security. I just cannot imagine that Google works so differently to every company I&#x27;ve ever worked at that they <i>actually</i> carefully check the stuff they use. Every company I&#x27;ve worked at has had a process for using external code. Some have been stricter than others, none have meaningfully required engineers to make a judgement on the security of code. All of them boil down to speed-running a pointless process.<p>And that leaves apart the obvious question: I want to use a crate, I check it &#x27;works&#x27; for what I need. Some middle manager type has mandated I have to now add it to crate audit (FYI, this is the point I dropped importing the library and just wrote it myself) so I add it to crate audit. Some other poor sap comes along and uses it because I audited it, but he&#x27;s working on VR goggles and I was working on in-vitro fertilization of cats and he&#x27;s using a whole set of functions that I didn&#x27;t even realise were there. When his VR Goggles fertilize his beta testers eyes with cat sperm due to a buffer overflow, which of us get fired?</div><br/><div id="36055263" class="c"><input type="checkbox" id="c-36055263" checked=""/><div class="controls bullet"><span class="by">zemnmez</span><span>|</span><a href="#36051320">parent</a><span>|</span><a href="#36051801">next</a><span>|</span><label class="collapse" for="c-36055263">[-]</label><label class="expand" for="c-36055263">[1 more]</label></div><br/><div class="children"><div class="content">Before the layoffs I worked on a security checks team (“ISE Hardening”) at Google. Google requires for almost all projects that code is physically imported into the SCS; when this code touches anything at all, extremely stringent security checks run at build-time.<p>These checks often don’t attempt to detect actual exploit paths, but for usage of APIs that simply <i>may</i> lead to vulnerability. These checks can only be disabled per file or per symbol and per check by a member of the security team via an allowlist change that has to be in the same commit.<p>This is not perfect but is by far the most stringent third party policy I’ve seen or worked with. The cost of bringing 3p code into the fold is high.<p>The flipside of this is that Google tech ends up with an insular and conservative outlook. I’d describe the Googl stack as ‘retro-futuristic’. It is still extremely mature and effective.</div><br/></div></div><div id="36051801" class="c"><input type="checkbox" id="c-36051801" checked=""/><div class="controls bullet"><span class="by">yablak</span><span>|</span><a href="#36051320">parent</a><span>|</span><a href="#36055263">prev</a><span>|</span><a href="#36051809">next</a><span>|</span><label class="collapse" for="c-36051801">[-]</label><label class="expand" for="c-36051801">[1 more]</label></div><br/><div class="children"><div class="content">Some useful context here:<p><a href="https:&#x2F;&#x2F;chromium.googlesource.com&#x2F;chromiumos&#x2F;third_party&#x2F;rust_crates&#x2F;+&#x2F;refs&#x2F;heads&#x2F;main&#x2F;cargo-vet&#x2F;#How-do-I-audit" rel="nofollow">https:&#x2F;&#x2F;chromium.googlesource.com&#x2F;chromiumos&#x2F;third_party&#x2F;rus...</a><p>Seems there are 3-4 folks who helped build this and spent a lot of time doing initial audits; they outsource crypto algorithm audits to specialists.</div><br/></div></div><div id="36051809" class="c"><input type="checkbox" id="c-36051809" checked=""/><div class="controls bullet"><span class="by">dboreham</span><span>|</span><a href="#36051320">parent</a><span>|</span><a href="#36051801">prev</a><span>|</span><a href="#36053676">next</a><span>|</span><label class="collapse" for="c-36051809">[-]</label><label class="expand" for="c-36051809">[5 more]</label></div><br/><div class="children"><div class="content">Like many here I haven&#x27;t seen the Google sausage being made, but I&#x27;ve had many Googler coworkers and friends over the years. I&#x27;ve learned that they may really be in another universe (e.g. put every single line of code over all space and time in the same SCCS, oh and write a new kind of build system while you&#x27;re at it because otherwise that...doesn&#x27;t work). So possibly they just don&#x27;t use external dependencies, and the small number they do use really <i>are</i> &quot;properly&quot; audited?<p>But meanwhile in the regular universe, yes it happens the way you say.</div><br/><div id="36053281" class="c"><input type="checkbox" id="c-36053281" checked=""/><div class="controls bullet"><span class="by">tylerhou</span><span>|</span><a href="#36051320">root</a><span>|</span><a href="#36051809">parent</a><span>|</span><a href="#36053676">next</a><span>|</span><label class="collapse" for="c-36053281">[-]</label><label class="expand" for="c-36053281">[4 more]</label></div><br/><div class="children"><div class="content">Google uses a fair number of external dependencies. But Google imposes a fairly heavy cost to add a new dependency. You (and usually your team) has to commit to supporting updating the dependency in the future (only one version of a dependency is allowed at any given repo snapshot), and fixing bugs. Often it is easier just to write code yourself for trivial dependencies (nobody is using left-pad!).<p>Adding a dependency also generates a change list (because dependencies are vendored), and so the normal code review guidelines apply. Both the person adding the dependency and the reviewer should read through the code to make sure that the code is in a good state to be submitted, like any other code (excluding style violations). Small bugs can be fixed with follow up CLs. If the author&#x2F;reviewer doesn’t understand e.g. the security implications of adding the dependency, they should not submit the CL.</div><br/><div id="36054637" class="c"><input type="checkbox" id="c-36054637" checked=""/><div class="controls bullet"><span class="by">lopkeny12ko</span><span>|</span><a href="#36051320">root</a><span>|</span><a href="#36053281">parent</a><span>|</span><a href="#36053676">next</a><span>|</span><label class="collapse" for="c-36054637">[-]</label><label class="expand" for="c-36054637">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve talked to many Googlers over the years, and your summary is consistent with what I&#x27;ve heard before, so I don&#x27;t think you&#x27;re lying. But this is still the most insane dependency managenent scheme I&#x27;ve ever heard of. Is Google truly so far up their own ass that they make it harder to pull in a third party library than write the code in-house? Why is Google so allergic to using a package manager like every other software project in open source?<p>You depend on any modern JS library like Babel or Webpack and it pulls in a dependency tree consisting of hundreds of packages. I cannot fathom that the expected and approved workflow is for someone to check in their node_modules directory <i>and</i> be expected to security-audit every single line, and &quot;own&quot; that source code for the entirety of Google. Sounds absolutely insane.<p>Not to mention needing to hand-audit that every transitive dependency of Babel and Webpack works with every other module in the repository, because of the one-version policy that exists <i>for some &quot;good&quot; reason</i>.</div><br/><div id="36054750" class="c"><input type="checkbox" id="c-36054750" checked=""/><div class="controls bullet"><span class="by">remus</span><span>|</span><a href="#36051320">root</a><span>|</span><a href="#36054637">parent</a><span>|</span><a href="#36054686">next</a><span>|</span><label class="collapse" for="c-36054750">[-]</label><label class="expand" for="c-36054750">[1 more]</label></div><br/><div class="children"><div class="content">&gt; But this is still the most insane dependency managenent scheme I&#x27;ve ever heard of. Is Google truly so far up their own ass that they make it harder to pull in a third party library than write the code in-house? Why is Google so allergic to using a package manager like every other software project in open source?<p>In the context of working in a highly sensitive business environment, I think the typical defaults of most package managers are way more insane than the practices being described (vendoring, auditing etc.) I think google is just being upfront about the costs of dependencies, which are often hidden by package managers. At the end of the day it&#x27;s just code written by other people and using that code blindly has huge risks.<p>I think this is pretty context specific though. Do I care if my hobby project goes down for a day because a dependency auto-updated and broke something? Not really.</div><br/></div></div><div id="36054686" class="c"><input type="checkbox" id="c-36054686" checked=""/><div class="controls bullet"><span class="by">atq2119</span><span>|</span><a href="#36051320">root</a><span>|</span><a href="#36054637">parent</a><span>|</span><a href="#36054750">prev</a><span>|</span><a href="#36053676">next</a><span>|</span><label class="collapse" for="c-36054686">[-]</label><label class="expand" for="c-36054686">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Is Google truly so far up their own ass that they make it harder to pull in a third party library than write the code in-house?<p>From the descriptions in this thread, pulling in a third-party library is still far easier than writing the code in-house for them.<p>At least, it sounds to me like for adding the kind of example you gave, their process for adding the dependency is on the order of person weeks or in the worst case months, while writing the code themselves would be on the order of person years or decades.</div><br/></div></div></div></div></div></div></div></div><div id="36053676" class="c"><input type="checkbox" id="c-36053676" checked=""/><div class="controls bullet"><span class="by">neilv</span><span>|</span><a href="#36051320">parent</a><span>|</span><a href="#36051809">prev</a><span>|</span><a href="#36051534">next</a><span>|</span><label class="collapse" for="c-36053676">[-]</label><label class="expand" for="c-36053676">[1 more]</label></div><br/><div class="children"><div class="content">Starting over a decade ago, I instituted auditing packages used from a Cargo-like network package manager, in an important system that handled sensitive data.<p>I set up the environment to disable the normal package repo access.  Every third-party package we wanted to use had to be imported into a mirror in our code repo and audited.  (THe mirror also preserved multiple versions at once, like the package manager did.) New versions were also audited.<p>One effect of this was that I immediately incurred a cost when adding a new dependency on some random third party, which hinted at the risk.  For example, if a small package had pulled in a dozen other dependencies, which I also would&#x27;ve had to maintain and audit, I would&#x27;ve gone &quot;oh, heck, no!&quot; and considered some other way.<p>At a later company, in which people had been writing code pulling on the order of a hundred packages from PyPI (and not tracking dep versions), yet it would have to run in production with very-very sensitive customer data... that was interesting.  Fortunately, by then, software supply chain attacks were a thing, so at least I had something to point to, that my concern wasn&#x27;t purely theoretical, but a real active threat.<p>Now that I have to use Python, JavaScript, and Rust, the cavalier attitudes towards pulling in whatever package some Stack Overflow answer used (and whatever indirect dependencies that package adds) are a source of concern and disappointment.  Such are current incentives in many companies.  But it&#x27;s nice to know that some successful companies, like Google, take security and reliability very seriously.</div><br/></div></div><div id="36051534" class="c"><input type="checkbox" id="c-36051534" checked=""/><div class="controls bullet"><span class="by">zeroxfe</span><span>|</span><a href="#36051320">parent</a><span>|</span><a href="#36053676">prev</a><span>|</span><a href="#36052117">next</a><span>|</span><label class="collapse" for="c-36051534">[-]</label><label class="expand" for="c-36051534">[1 more]</label></div><br/><div class="children"><div class="content">&gt; All of them boil down to speed-running a pointless process.<p>There&#x27;s a pretty large gap between auditing every line of code and doing nothing. Google does a good job managing external dependencies within their monorepo. There&#x27;s dedicated tooling, infrastructure, and processes for this.</div><br/></div></div><div id="36052117" class="c"><input type="checkbox" id="c-36052117" checked=""/><div class="controls bullet"><span class="by">pornel</span><span>|</span><a href="#36051320">parent</a><span>|</span><a href="#36051534">prev</a><span>|</span><a href="#36052837">next</a><span>|</span><label class="collapse" for="c-36052117">[-]</label><label class="expand" for="c-36052117">[1 more]</label></div><br/><div class="children"><div class="content">Yes, some people review literally every line. Cargo-crev has a field for thoroughness. Many reviews are just &quot;LGTM&quot;, but some reviewers really take time to check for bugs and have flagged dodgy code.</div><br/></div></div><div id="36052837" class="c"><input type="checkbox" id="c-36052837" checked=""/><div class="controls bullet"><span class="by">lathiat</span><span>|</span><a href="#36051320">parent</a><span>|</span><a href="#36052117">prev</a><span>|</span><a href="#36051520">next</a><span>|</span><label class="collapse" for="c-36052837">[-]</label><label class="expand" for="c-36052837">[1 more]</label></div><br/><div class="children"><div class="content">At least sometimes: <a href="https:&#x2F;&#x2F;cloud.google.com&#x2F;assured-open-source-software" rel="nofollow">https:&#x2F;&#x2F;cloud.google.com&#x2F;assured-open-source-software</a><p>Only 1000 packages but certainly seems they do that for a subset.</div><br/></div></div><div id="36051520" class="c"><input type="checkbox" id="c-36051520" checked=""/><div class="controls bullet"><span class="by">vasco</span><span>|</span><a href="#36051320">parent</a><span>|</span><a href="#36052837">prev</a><span>|</span><a href="#36054655">next</a><span>|</span><label class="collapse" for="c-36051520">[-]</label><label class="expand" for="c-36051520">[1 more]</label></div><br/><div class="children"><div class="content">&gt; When his VR Goggles fertilize his beta testers eyes with cat sperm due to a buffer overflow, which of us get fired?<p>The PM gets promoted for encouraging fast experimentation!</div><br/></div></div><div id="36054655" class="c"><input type="checkbox" id="c-36054655" checked=""/><div class="controls bullet"><span class="by">Conscat</span><span>|</span><a href="#36051320">parent</a><span>|</span><a href="#36051520">prev</a><span>|</span><a href="#36052004">next</a><span>|</span><label class="collapse" for="c-36054655">[-]</label><label class="expand" for="c-36054655">[1 more]</label></div><br/><div class="children"><div class="content">&gt; When his VR Goggles fertilize his beta testers eyes with cat sperm due to a buffer overflow<p>Ahh, classic undefined behavior.</div><br/></div></div><div id="36052004" class="c"><input type="checkbox" id="c-36052004" checked=""/><div class="controls bullet"><span class="by">afranchuk</span><span>|</span><a href="#36051320">parent</a><span>|</span><a href="#36054655">prev</a><span>|</span><a href="#36051763">next</a><span>|</span><label class="collapse" for="c-36052004">[-]</label><label class="expand" for="c-36052004">[1 more]</label></div><br/><div class="children"><div class="content">Well just today I found unsoundness in a crate I was auditing. It turned out that the crate had since removed the entire module of functionality in question so I couldn&#x27;t submit a bug, but it led me to take steps to remove use of the crate entirely.</div><br/></div></div><div id="36051763" class="c"><input type="checkbox" id="c-36051763" checked=""/><div class="controls bullet"><span class="by">jupp0r</span><span>|</span><a href="#36051320">parent</a><span>|</span><a href="#36052004">prev</a><span>|</span><a href="#36050866">next</a><span>|</span><label class="collapse" for="c-36051763">[-]</label><label class="expand" for="c-36051763">[1 more]</label></div><br/><div class="children"><div class="content">Don&#x27;t forget that you need to do this not only for the crate you depend on, but the whole dependency subtree that comes with it as well.</div><br/></div></div></div></div><div id="36050866" class="c"><input type="checkbox" id="c-36050866" checked=""/><div class="controls bullet"><span class="by">progbits</span><span>|</span><a href="#36051320">prev</a><span>|</span><a href="#36049589">next</a><span>|</span><label class="collapse" for="c-36050866">[-]</label><label class="expand" for="c-36050866">[4 more]</label></div><br/><div class="children"><div class="content">Can someone explain why cargo-vet doesn&#x27;t include a cryptographic hash of the crate contents?<p>My understanding is that this repository, and similar ones from Mozilla and others, says: &quot;I, person X from trustworthy organization Y, have reviewed version 1.0 of crate foo and deemed it legit&quot; (for a definition of trustworthy and legit).<p>But now how does that help me if I want to be careful about what I depend on and supply-chain attacks? I ask for version 1.0 of crate foo but might get some malicious payload without knowing it.</div><br/><div id="36050921" class="c"><input type="checkbox" id="c-36050921" checked=""/><div class="controls bullet"><span class="by">hobofan</span><span>|</span><a href="#36050866">parent</a><span>|</span><a href="#36051988">next</a><span>|</span><label class="collapse" for="c-36050921">[-]</label><label class="expand" for="c-36050921">[2 more]</label></div><br/><div class="children"><div class="content">That&#x27;s already prevented by the checksum which is present for all crate versions in the registry index, which is set in stone on publish and verified by cargo on download. See e.g. <a href="https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;crates.io-index&#x2F;blob&#x2F;74f1b1e064bc63a3be7026165d0b39ea88baf515&#x2F;se&#x2F;rd&#x2F;serde">https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;crates.io-index&#x2F;blob&#x2F;74f1b1e064...</a></div><br/><div id="36051262" class="c"><input type="checkbox" id="c-36051262" checked=""/><div class="controls bullet"><span class="by">progbits</span><span>|</span><a href="#36050866">root</a><span>|</span><a href="#36050921">parent</a><span>|</span><a href="#36051988">next</a><span>|</span><label class="collapse" for="c-36051262">[-]</label><label class="expand" for="c-36051262">[1 more]</label></div><br/><div class="children"><div class="content">Hmm, but then you have to trust 1) github, 2) anyone with commit access to that repository.<p>It&#x27;s not the worst thing I suppose: #1 is a problem anyway for trusting Google&#x2F;Mozilla&#x27;s repo of audits, and #2 can be noticed by others so hard to pull of some supply chain attack that way.<p>But I would still feel more confident if the audit log contained a copy of the checksum, and ideally itself was signed with author&#x27;s keys.</div><br/></div></div></div></div><div id="36051988" class="c"><input type="checkbox" id="c-36051988" checked=""/><div class="controls bullet"><span class="by">pornel</span><span>|</span><a href="#36050866">parent</a><span>|</span><a href="#36050921">prev</a><span>|</span><a href="#36049589">next</a><span>|</span><label class="collapse" for="c-36051988">[-]</label><label class="expand" for="c-36051988">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;lib.rs&#x2F;cargo-crev" rel="nofollow">https:&#x2F;&#x2F;lib.rs&#x2F;cargo-crev</a> does this, with the entire chain from the crate data to the reviewer&#x27;s trusted identity. However, this adds a lot of complexity.<p>cargo-vet went for the other extreme of being super simple. To fill in their review report you don&#x27;t even need any tooling.</div><br/></div></div></div></div><div id="36049589" class="c"><input type="checkbox" id="c-36049589" checked=""/><div class="controls bullet"><span class="by">mr_00ff00</span><span>|</span><a href="#36050866">prev</a><span>|</span><a href="#36050129">next</a><span>|</span><label class="collapse" for="c-36049589">[-]</label><label class="expand" for="c-36049589">[16 more]</label></div><br/><div class="children"><div class="content">Curious if any senior devs on HN can comment on the importance&#x2F;effectiveness of audits for crates?<p>I’m a junior C++ dev that dabbles with rust in my free time, and I always feel a bit nervous when pulling huge dependency trees with tons of crates into projects.<p>I would assume most places would turn away from the “node.js” way of doing these things and would just write internal versions of things they need.<p>Again I am junior, so maybe my worries are way over blown.</div><br/><div id="36050064" class="c"><input type="checkbox" id="c-36050064" checked=""/><div class="controls bullet"><span class="by">pclmulqdq</span><span>|</span><a href="#36049589">parent</a><span>|</span><a href="#36049758">next</a><span>|</span><label class="collapse" for="c-36050064">[-]</label><label class="expand" for="c-36050064">[8 more]</label></div><br/><div class="children"><div class="content">I think in a lot of C++ and ex-C++ orgs you see this sentiment a lot, and sometimes for good reason. Sometimes that code has security or performance reasons to worry about this. On the other hand, it often doesn&#x27;t.<p>On the other hand, Python folks and JavaScript users (which make up a lot of emigres to Rust) probably don&#x27;t care enough about their supply chain. That&#x27;s how you end up with misspelled packages causing viruses in production and other disasters.<p>The short answer to this is that it actually depends a lot on what you are doing.</div><br/><div id="36051179" class="c"><input type="checkbox" id="c-36051179" checked=""/><div class="controls bullet"><span class="by">arp242</span><span>|</span><a href="#36049589">root</a><span>|</span><a href="#36050064">parent</a><span>|</span><a href="#36050951">next</a><span>|</span><label class="collapse" for="c-36051179">[-]</label><label class="expand" for="c-36051179">[3 more]</label></div><br/><div class="children"><div class="content">&gt; That&#x27;s how you end up with misspelled packages causing viruses in production and other disasters.<p>For all the stories about malicious packages on PyPI and whatnot: I can&#x27;t recall ever seeing a story about &quot;misspelled packages caused us problems in production&quot;. Most of these packages have downloads in the low-hundreds <i>at best</i>, and I wouldn&#x27;t be surprised if the vast majority are from the attackers testing it and bots automatically downloading packages for archiving, analysis, etc. I&#x27;ve come to think it&#x27;s not as much of a big deal as it&#x27;s sometimes made out to be.<p>The closest I&#x27;ve seen is the whole event-stream business where the maintainer transferred it to someone else who promptly inserted some crypto-wallet stealing code, but that&#x27;s a markedly different scenario (and that also seems quite rare; it was over 4 years ago).</div><br/><div id="36051727" class="c"><input type="checkbox" id="c-36051727" checked=""/><div class="controls bullet"><span class="by">imran-iq</span><span>|</span><a href="#36049589">root</a><span>|</span><a href="#36051179">parent</a><span>|</span><a href="#36050951">next</a><span>|</span><label class="collapse" for="c-36051727">[-]</label><label class="expand" for="c-36051727">[2 more]</label></div><br/><div class="children"><div class="content">&gt; For all the stories about malicious packages on PyPI and whatnot: I can&#x27;t recall ever seeing a story about &quot;misspelled packages caused us problems in production&quot;.<p><a href="https:&#x2F;&#x2F;medium.com&#x2F;@alex.birsan&#x2F;dependency-confusion-4a5d60fec610" rel="nofollow">https:&#x2F;&#x2F;medium.com&#x2F;@alex.birsan&#x2F;dependency-confusion-4a5d60f...</a><p>Discussed at the time: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=26087064" rel="nofollow">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=26087064</a></div><br/><div id="36053080" class="c"><input type="checkbox" id="c-36053080" checked=""/><div class="controls bullet"><span class="by">arp242</span><span>|</span><a href="#36049589">root</a><span>|</span><a href="#36051727">parent</a><span>|</span><a href="#36050951">next</a><span>|</span><label class="collapse" for="c-36053080">[-]</label><label class="expand" for="c-36053080">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s a different thing; it would (ab)use some package tools&#x27; preference of public packages over private ones (at least in some configurations). It&#x27;s not really a &quot;supply chain issue&quot; but more of a &quot;footgun in some package tools&quot;-issue.</div><br/></div></div></div></div></div></div><div id="36050951" class="c"><input type="checkbox" id="c-36050951" checked=""/><div class="controls bullet"><span class="by">mr_00ff00</span><span>|</span><a href="#36049589">root</a><span>|</span><a href="#36050064">parent</a><span>|</span><a href="#36051179">prev</a><span>|</span><a href="#36049758">next</a><span>|</span><label class="collapse" for="c-36050951">[-]</label><label class="expand" for="c-36050951">[4 more]</label></div><br/><div class="children"><div class="content">This surprises me that most people that use rust come from python and JavaScript.  I would think the reason rust is so popular is from people moving from C and C++ and getting all the nice modern features to do systems with.<p>Python and JavaScript people I would imagine find rust annoying since it’s all the niceties they are use to but with a bunch of rules on top.</div><br/><div id="36051255" class="c"><input type="checkbox" id="c-36051255" checked=""/><div class="controls bullet"><span class="by">efnx</span><span>|</span><a href="#36049589">root</a><span>|</span><a href="#36050951">parent</a><span>|</span><a href="#36054358">next</a><span>|</span><label class="collapse" for="c-36051255">[-]</label><label class="expand" for="c-36051255">[1 more]</label></div><br/><div class="children"><div class="content">I see people coming to Rust from all angles. It’s a nice sweet spot. I came to it from Haskell and on my team of three the other two devs came to Rust from C++. I can opine the motivation looks something like this:<p>* From Haskell - looking for a strong type system (with sum types, typeclasses) but is “widely accepted”. No GC.<p>* From C++ - looking for low-level capabilities (pointers, references) with improved safety. Improved manual memory management.<p>* From Python&#x2F;JS - looking for performance with a familiar feeling ecosystem and a welcoming community<p>I think the Python and JS folks will have the hardest go of it, but they also have the most to gain.</div><br/></div></div><div id="36054358" class="c"><input type="checkbox" id="c-36054358" checked=""/><div class="controls bullet"><span class="by">deathanatos</span><span>|</span><a href="#36049589">root</a><span>|</span><a href="#36050951">parent</a><span>|</span><a href="#36051255">prev</a><span>|</span><a href="#36054267">next</a><span>|</span><label class="collapse" for="c-36054358">[-]</label><label class="expand" for="c-36054358">[1 more]</label></div><br/><div class="children"><div class="content">I went Python → Rust. Rust is high-level enough for me to remain competitively productive with Python, and the type-system just helps <i>so</i> much. I can&#x27;t tell you how nice it has been to not have to see &quot;Object of type NoneType has no attribute &#x27;foo&#x27;&quot; anymore. Also,<p><pre><code>  def foo(obj):
    # ...
</code></pre>
And me wondering &quot;what is &#x27;obj&#x27;?&quot; and then pulling that root … and pulling … and pulling …. Also &quot;data&quot;, another just fabulous name for a variable, really narrows the possibilities. Even once you know the &quot;type&quot; of the variable, oftentimes I&#x27;d find that the type definition would subtle shift and morph in different parts of the program: they&#x27;d all want a Duck, but have varying opinions on what a Duck actually <i>is</i>. You cannot commit such BS with an actual type-checker.<p>There is more up-front work with the compiler, but it pays off: the code that passes the compiler is of much better quality.<p>Also, Option&lt;T&gt; is very nice to have when you need an actual Option&lt;T&gt; (i.e., generically), which Python lacks. (No, `None` is not it: You run into problems when T == Option&lt;U&gt;, and you have None and Some(None) — Python&#x27;s cannot differentiate between the two.) Also sum types in general.</div><br/></div></div><div id="36054267" class="c"><input type="checkbox" id="c-36054267" checked=""/><div class="controls bullet"><span class="by">david2ndaccount</span><span>|</span><a href="#36049589">root</a><span>|</span><a href="#36050951">parent</a><span>|</span><a href="#36054358">prev</a><span>|</span><a href="#36049758">next</a><span>|</span><label class="collapse" for="c-36054267">[-]</label><label class="expand" for="c-36054267">[1 more]</label></div><br/><div class="children"><div class="content">Python and Javascript programmers so massively outnumber all other programmers that they are the majority of people converting to any language.</div><br/></div></div></div></div></div></div><div id="36049758" class="c"><input type="checkbox" id="c-36049758" checked=""/><div class="controls bullet"><span class="by">lesuorac</span><span>|</span><a href="#36049589">parent</a><span>|</span><a href="#36050064">prev</a><span>|</span><a href="#36050365">next</a><span>|</span><label class="collapse" for="c-36049758">[-]</label><label class="expand" for="c-36049758">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I would assume most places would turn away from the “node.js” way of doing these things and would just write internal versions of things they need.<p>Incorrect assumption, look up the left pad fiasco [1]. Its importance is really a personal opinion; convince nearly always trumps security so if the NPM way allows you to increase sales by ~10% you&#x27;ll see people continuing to do it.<p>Google is fairly principled though, all of the 3p code is internally vendored and supposed to be audited by the people pulling in that code&#x2F;update.<p>[1]: <a href="https:&#x2F;&#x2F;www.google.com&#x2F;search?q=leftpad+broke+the+internet" rel="nofollow">https:&#x2F;&#x2F;www.google.com&#x2F;search?q=leftpad+broke+the+internet</a></div><br/></div></div><div id="36050365" class="c"><input type="checkbox" id="c-36050365" checked=""/><div class="controls bullet"><span class="by">nemothekid</span><span>|</span><a href="#36049589">parent</a><span>|</span><a href="#36049758">prev</a><span>|</span><a href="#36055504">next</a><span>|</span><label class="collapse" for="c-36050365">[-]</label><label class="expand" for="c-36050365">[3 more]</label></div><br/><div class="children"><div class="content">The &quot;node.js&quot; way of doing things, and it&#x27;s dysfunction, is nearly exclusive to node because Javascript lacks a standard library and npm&#x27;s haphazard way of running things. Java, Ruby, Python, even my grandfather&#x27;s Perl have had &quot;modules&quot; for years with none of the fear that is typically associated with Node.<p>Personally, C++ aversion to sane dependency management is more about C++&#x27;s &quot;I know better than you&quot; culture and legacy cruft (packages are usually managed by the distro, not the language) than actually having any serious security implications.</div><br/><div id="36054490" class="c"><input type="checkbox" id="c-36054490" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#36049589">root</a><span>|</span><a href="#36050365">parent</a><span>|</span><a href="#36055518">next</a><span>|</span><label class="collapse" for="c-36054490">[-]</label><label class="expand" for="c-36054490">[1 more]</label></div><br/><div class="children"><div class="content">This is slowly changing wiht conan and vcpkg increasing adoption.<p>Still most environments I worked on, always had internal repos for packages, no CI&#x2F;CD server talks to the outside world and vendoring isn&#x27;t allowed.</div><br/></div></div><div id="36055518" class="c"><input type="checkbox" id="c-36055518" checked=""/><div class="controls bullet"><span class="by">bombolo</span><span>|</span><a href="#36049589">root</a><span>|</span><a href="#36050365">parent</a><span>|</span><a href="#36054490">prev</a><span>|</span><a href="#36055504">next</a><span>|</span><label class="collapse" for="c-36055518">[-]</label><label class="expand" for="c-36055518">[1 more]</label></div><br/><div class="children"><div class="content">in a way rust&#x27;s standard library is close to node&#x27;s than python&#x27;s. You can&#x27;t really do much without getting some crates in.</div><br/></div></div></div></div><div id="36055504" class="c"><input type="checkbox" id="c-36055504" checked=""/><div class="controls bullet"><span class="by">bombolo</span><span>|</span><a href="#36049589">parent</a><span>|</span><a href="#36050365">prev</a><span>|</span><a href="#36050924">next</a><span>|</span><label class="collapse" for="c-36055504">[-]</label><label class="expand" for="c-36055504">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I would assume most places would turn away from the “node.js” way of doing these things and would just write internal versions of things they need.<p>I assume most places don&#x27;t care.</div><br/></div></div><div id="36050924" class="c"><input type="checkbox" id="c-36050924" checked=""/><div class="controls bullet"><span class="by">wongarsu</span><span>|</span><a href="#36049589">parent</a><span>|</span><a href="#36055504">prev</a><span>|</span><a href="#36052068">next</a><span>|</span><label class="collapse" for="c-36050924">[-]</label><label class="expand" for="c-36050924">[1 more]</label></div><br/><div class="children"><div class="content">Writing your own version of everything means it&#x27;s probably more tuned to your needs. But unless it&#x27;s a core part of your software it will also be worse because you can&#x27;t justify putting many resources into it. It also means new hires will have to learn a lot more. It&#x27;s one of the (many) reasons why it&#x27;s so hard to onboard into C&#x2F;C++ projects, because every standard building block is bespoke and somehow different than what everyone else does. Of course if you are really big you just have those resources, which is why Meta or Google can have bespoke everything.<p>On security it&#x27;s a tradeoff. The open-source version is an easier target for attackers, but might be much more battle-tested and thus more bug-free. Audits are the attempt to have the best of both worlds here, and since they again can be crowd-sourced (with cargo-vet and cargo-cev both working on this) it scales even for companies that aren&#x27;t Google-sized.</div><br/></div></div><div id="36052068" class="c"><input type="checkbox" id="c-36052068" checked=""/><div class="controls bullet"><span class="by">fcantournet</span><span>|</span><a href="#36049589">parent</a><span>|</span><a href="#36050924">prev</a><span>|</span><a href="#36050129">next</a><span>|</span><label class="collapse" for="c-36052068">[-]</label><label class="expand" for="c-36052068">[1 more]</label></div><br/><div class="children"><div class="content">Dependencies are dependencies in rust as in C++.
I found it&#x27;s extremely rare that homegrown library that have similar functionality to (used) open-source libraries are better from a security stand-point.<p>At least in Rust a large part of the security issues that would be VERY time consuming to audit at scale through your dependency tree (whether internal or public) are covered by the compiler&#x2F;borrow checker&#x2F;type-system.<p>In that sense I would take on an larger amount of dependency in Rust than I would in C++ while sleeping better.</div><br/></div></div></div></div><div id="36050129" class="c"><input type="checkbox" id="c-36050129" checked=""/><div class="controls bullet"><span class="by">vitorsr</span><span>|</span><a href="#36049589">prev</a><span>|</span><a href="#36051140">next</a><span>|</span><label class="collapse" for="c-36050129">[-]</label><label class="expand" for="c-36050129">[1 more]</label></div><br/><div class="children"><div class="content">See also Google Cloud’s Assured Open Source Software service:<p><a href="https:&#x2F;&#x2F;cloud.google.com&#x2F;assured-open-source-software" rel="nofollow">https:&#x2F;&#x2F;cloud.google.com&#x2F;assured-open-source-software</a></div><br/></div></div><div id="36051140" class="c"><input type="checkbox" id="c-36051140" checked=""/><div class="controls bullet"><span class="by">baby</span><span>|</span><a href="#36050129">prev</a><span>|</span><a href="#36054379">next</a><span>|</span><label class="collapse" for="c-36051140">[-]</label><label class="expand" for="c-36051140">[1 more]</label></div><br/><div class="children"><div class="content">Interesting stuff! I think everyone seems to come up with their own solutions. I think security in general is a matter of who you trust, and things only work when we build a network of trust.<p>Imagine if all companies and rust developers started sharing what crates they were confident in + what other organizations they trust as well. If you could then create your own set of such companies, and then choose a dependency depth you were willing to go down to, you might be able to quickly vet a number of crates this way, or at least see the weird crates that demand a bit more attention.<p>If this could be added to whackadep[1] then you&#x27;d be able to monitor your Rust repo pretty solidly!<p>[1]: <a href="https:&#x2F;&#x2F;www.cryptologie.net&#x2F;article&#x2F;550&#x2F;supply-chain-attacks-are-the-new-big-thing&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.cryptologie.net&#x2F;article&#x2F;550&#x2F;supply-chain-attacks...</a></div><br/></div></div><div id="36054379" class="c"><input type="checkbox" id="c-36054379" checked=""/><div class="controls bullet"><span class="by">pabs3</span><span>|</span><a href="#36051140">prev</a><span>|</span><a href="#36054128">next</a><span>|</span><label class="collapse" for="c-36054379">[-]</label><label class="expand" for="c-36054379">[1 more]</label></div><br/><div class="children"><div class="content">I wonder why they went with cargo vet instead of the more cross-language crev:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;crev-dev&#x2F;">https:&#x2F;&#x2F;github.com&#x2F;crev-dev&#x2F;</a></div><br/></div></div><div id="36054128" class="c"><input type="checkbox" id="c-36054128" checked=""/><div class="controls bullet"><span class="by">wly_cdgr</span><span>|</span><a href="#36054379">prev</a><span>|</span><a href="#36050811">next</a><span>|</span><label class="collapse" for="c-36054128">[-]</label><label class="expand" for="c-36054128">[1 more]</label></div><br/><div class="children"><div class="content">Hmmm, is it really a good idea to de-duplicate audits? This is a situation where I want multiple parties to each separately do their own audits</div><br/></div></div><div id="36050811" class="c"><input type="checkbox" id="c-36050811" checked=""/><div class="controls bullet"><span class="by">sneed_chucker</span><span>|</span><a href="#36054128">prev</a><span>|</span><a href="#36050842">next</a><span>|</span><label class="collapse" for="c-36050811">[-]</label><label class="expand" for="c-36050811">[2 more]</label></div><br/><div class="children"><div class="content">What&#x27;s the state of supply chain auditing in general these days?</div><br/><div id="36051016" class="c"><input type="checkbox" id="c-36051016" checked=""/><div class="controls bullet"><span class="by">adolph</span><span>|</span><a href="#36050811">parent</a><span>|</span><a href="#36050842">next</a><span>|</span><label class="collapse" for="c-36051016">[-]</label><label class="expand" for="c-36051016">[1 more]</label></div><br/><div class="children"><div class="content">SE Daily podcast episode &quot;CAP Theorem 23 Years Later with Eric Brewer&quot; touches on it a bit. On the whole an excellent episode.<p><a href="https:&#x2F;&#x2F;softwareengineeringdaily.com&#x2F;2023&#x2F;05&#x2F;12&#x2F;cap-theorem-23-years-later&#x2F;" rel="nofollow">https:&#x2F;&#x2F;softwareengineeringdaily.com&#x2F;2023&#x2F;05&#x2F;12&#x2F;cap-theorem-...</a></div><br/></div></div></div></div></div></div></div></div></div></body></html>