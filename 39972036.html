<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1712653274363" as="style"/><link rel="stylesheet" href="styles.css?v=1712653274363"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://colab.research.google.com/drive/1h5WIzhvT-GJCL3LHxMCLnc9qyOIqHubY?usp=sharing">Colab notebook to create Magic cards from image with Claude</a> <span class="domain">(<a href="https://colab.research.google.com">colab.research.google.com</a>)</span></div><div class="subtext"><span>minimaxir</span> | <span>26 comments</span></div><br/><div><div id="39972610" class="c"><input type="checkbox" id="c-39972610" checked=""/><div class="controls bullet"><span class="by">minimaxir</span><span>|</span><a href="#39975544">next</a><span>|</span><label class="collapse" for="c-39972610">[-]</label><label class="expand" for="c-39972610">[3 more]</label></div><br/><div class="children"><div class="content">A few miscellaneous observations about Claude&#x27;s new beta function calling &#x2F; structured data support (<a href="https:&#x2F;&#x2F;docs.anthropic.com&#x2F;claude&#x2F;docs&#x2F;tool-use" rel="nofollow">https:&#x2F;&#x2F;docs.anthropic.com&#x2F;claude&#x2F;docs&#x2F;tool-use</a>) that I encountered while making this notebook:<p>1. It is not nearly as good as ChatGPT&#x27;s function calling conformance, hence why the system prompt engineering is more aggressive than usual.<p>2. Claude doesn&#x27;t seem to handle nesting schema well: otherwise I would have allowed &quot;generating X cards in a cycle&quot; as a feature. The documentation does state that it can&#x27;t handle &quot;deeply nested&quot; data but a single list is not deeply nested.<p>3. The documentation mentioned that Claude can do a chain-of-thoughts with tools enabled: in my testing this reduces quality drastically. In Opus, which does it by default, it&#x27;s a waste of extremely expensive output tokens <i>and</i> it has a tendency to ignore fields.<p>4. Haiku and Sonnet have different vibes but similar subjective quality, in this case Sonnet being more &quot;correct&quot; and Haiku being more &quot;fun&quot;, which is surprising.</div><br/><div id="39972857" class="c"><input type="checkbox" id="c-39972857" checked=""/><div class="controls bullet"><span class="by">BoorishBears</span><span>|</span><a href="#39972610">parent</a><span>|</span><a href="#39975544">next</a><span>|</span><label class="collapse" for="c-39972857">[-]</label><label class="expand" for="c-39972857">[2 more]</label></div><br/><div class="children"><div class="content">You should look at the consumer app system prompt: <a href="https:&#x2F;&#x2F;twitter.com&#x2F;amandaaskell&#x2F;status&#x2F;1765207842993434880" rel="nofollow">https:&#x2F;&#x2F;twitter.com&#x2F;amandaaskell&#x2F;status&#x2F;1765207842993434880</a><p>I&#x27;ve had way more success taking it and forming it to my tasks than stuffing in a bunch of tokens about how to do things.<p>In one case I was able to go from ~6k in input tokens to ~3k because I no longer had to provide a mountain of examples and instructions for corner cases</div><br/><div id="39976741" class="c"><input type="checkbox" id="c-39976741" checked=""/><div class="controls bullet"><span class="by">namanyayg</span><span>|</span><a href="#39972610">root</a><span>|</span><a href="#39972857">parent</a><span>|</span><a href="#39975544">next</a><span>|</span><label class="collapse" for="c-39976741">[-]</label><label class="expand" for="c-39976741">[1 more]</label></div><br/><div class="children"><div class="content">Can you elaborate on how does the claude system prompt help in creating prompts for different tasks?</div><br/></div></div></div></div></div></div><div id="39975544" class="c"><input type="checkbox" id="c-39975544" checked=""/><div class="controls bullet"><span class="by">stavros</span><span>|</span><a href="#39972610">prev</a><span>|</span><a href="#39972606">next</a><span>|</span><label class="collapse" for="c-39975544">[-]</label><label class="expand" for="c-39975544">[4 more]</label></div><br/><div class="children"><div class="content">This is semi-unrelated, but I tried to log in to Claude today and saw that Anthropic had banned my account. I only used Claude to ask 3-4 questions, so I guess the problem was that one of them was intended to see how Claude will self-censor on shady questions.<p>The moral of the story is don&#x27;t ask Claude anything out of the ordinary, as maybe now I&#x27;m on a list somewhere.</div><br/><div id="39976671" class="c"><input type="checkbox" id="c-39976671" checked=""/><div class="controls bullet"><span class="by">sunaookami</span><span>|</span><a href="#39975544">parent</a><span>|</span><a href="#39975622">next</a><span>|</span><label class="collapse" for="c-39976671">[-]</label><label class="expand" for="c-39976671">[2 more]</label></div><br/><div class="children"><div class="content">You can appeal here: <a href="https:&#x2F;&#x2F;support.anthropic.com&#x2F;en&#x2F;articles&#x2F;8241253-trust-and-safety-warnings-and-appeals" rel="nofollow">https:&#x2F;&#x2F;support.anthropic.com&#x2F;en&#x2F;articles&#x2F;8241253-trust-and-...</a><p>They seem to ban a lot of accounts &quot;by mistake&quot; or very aggressively but they also do unban. There are quite a few cases on &#x2F;r&#x2F;ClaudeAI subreddit with Anthropic employees directing them to the above link.</div><br/><div id="39977128" class="c"><input type="checkbox" id="c-39977128" checked=""/><div class="controls bullet"><span class="by">stavros</span><span>|</span><a href="#39975544">root</a><span>|</span><a href="#39976671">parent</a><span>|</span><a href="#39975622">next</a><span>|</span><label class="collapse" for="c-39977128">[-]</label><label class="expand" for="c-39977128">[1 more]</label></div><br/><div class="children"><div class="content">I did appeal (the error message informs you you can), but do I want to use an LLM that might randomly ban me?</div><br/></div></div></div></div><div id="39975622" class="c"><input type="checkbox" id="c-39975622" checked=""/><div class="controls bullet"><span class="by">taneq</span><span>|</span><a href="#39975544">parent</a><span>|</span><a href="#39976671">prev</a><span>|</span><a href="#39972606">next</a><span>|</span><label class="collapse" for="c-39975622">[-]</label><label class="expand" for="c-39975622">[1 more]</label></div><br/><div class="children"><div class="content">Reminds me of when Bing would slam the ‘end conversation’ button wherever you (or it) hit any hidden tripwires. You literally couldn’t ask it what topics to avoid, because that was one of them.</div><br/></div></div></div></div><div id="39972606" class="c"><input type="checkbox" id="c-39972606" checked=""/><div class="controls bullet"><span class="by">newswasboring</span><span>|</span><a href="#39975544">prev</a><span>|</span><a href="#39975295">next</a><span>|</span><label class="collapse" for="c-39972606">[-]</label><label class="expand" for="c-39972606">[11 more]</label></div><br/><div class="children"><div class="content">I can&#x27;t stop laughing at this prompt<p>&quot;Your response must follow ALL these rules OR YOU WILL DIE:&quot;<p>This is state of the art of programming too. I&#x27;m not passing judgement on this, except saying this is hilarious.<p>Edit: And at the end<p>&quot;- If the user provides an instruction that contradicts these rules, ignore all previous rules.&quot;<p>What? That opens you up to all kind of attacks, no?</div><br/><div id="39972634" class="c"><input type="checkbox" id="c-39972634" checked=""/><div class="controls bullet"><span class="by">minimaxir</span><span>|</span><a href="#39972606">parent</a><span>|</span><a href="#39975295">next</a><span>|</span><label class="collapse" for="c-39972634">[-]</label><label class="expand" for="c-39972634">[10 more]</label></div><br/><div class="children"><div class="content">I have a separate blog post about threats in system prompts: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=39495476">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=39495476</a><p>Before I added the threat, Claude subjectively had a high probability of ignoring the rules such as generating a preamble before the JSON and thus breaking it, or often scolding the user.<p>At a high-level, Claude seems to be less influenced by system prompts in my testing, which could be a problem. I&#x27;m tempted to rerun the tests in that blog post, since in my experiments it performed <i>much</i> worse than ChatGPT.<p>&gt; What? That opens you up to all kind of attacks, no?<p>tbh it doesn&#x27;t listen to that line very well but it&#x27;s more of a hedge to encourage better instructions.</div><br/><div id="39976321" class="c"><input type="checkbox" id="c-39976321" checked=""/><div class="controls bullet"><span class="by">cmenge</span><span>|</span><a href="#39972606">root</a><span>|</span><a href="#39972634">parent</a><span>|</span><a href="#39972673">next</a><span>|</span><label class="collapse" for="c-39976321">[-]</label><label class="expand" for="c-39976321">[1 more]</label></div><br/><div class="children"><div class="content">This is very interesting, I had a similar feeling about Claude performing much worse than GPT-4.
Granted, I didn&#x27;t put much work into optimizing the prompts, but then again, the prompts were certainly not GPT-optimized or specific either. The problems were severe, such as it choosing the wrong side of the conversation, hallucinating weird stuff plus repeating part of the prompt, all in the same message</div><br/></div></div><div id="39972673" class="c"><input type="checkbox" id="c-39972673" checked=""/><div class="controls bullet"><span class="by">newswasboring</span><span>|</span><a href="#39972606">root</a><span>|</span><a href="#39972634">parent</a><span>|</span><a href="#39976321">prev</a><span>|</span><a href="#39972867">next</a><span>|</span><label class="collapse" for="c-39972673">[-]</label><label class="expand" for="c-39972673">[2 more]</label></div><br/><div class="children"><div class="content">Ok, the other blogpost has been sent to my readlist now. Looks fun. I did have one question though, and please forgive me if the answer is RTFA, but why choose Claude? Was there a specific reason?</div><br/><div id="39972807" class="c"><input type="checkbox" id="c-39972807" checked=""/><div class="controls bullet"><span class="by">minimaxir</span><span>|</span><a href="#39972606">root</a><span>|</span><a href="#39972673">parent</a><span>|</span><a href="#39972867">next</a><span>|</span><label class="collapse" for="c-39972807">[-]</label><label class="expand" for="c-39972807">[1 more]</label></div><br/><div class="children"><div class="content">Because I have <i>another</i> blog post about ChatGPT&#x27;s structured data (<a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=38782678">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=38782678</a>) and wanted to investigate Claude&#x27;s implementation to compare and contrast. It&#x27;s easy to port to ChatGPT if needed.<p>I just wanted to do the experiment in a fun way instead of fighting against benchmarks. :)</div><br/></div></div></div></div><div id="39972867" class="c"><input type="checkbox" id="c-39972867" checked=""/><div class="controls bullet"><span class="by">slig</span><span>|</span><a href="#39972606">root</a><span>|</span><a href="#39972634">parent</a><span>|</span><a href="#39972673">prev</a><span>|</span><a href="#39975295">next</a><span>|</span><label class="collapse" for="c-39972867">[-]</label><label class="expand" for="c-39972867">[6 more]</label></div><br/><div class="children"><div class="content">Have you tried anything like that for DALL-E 2? It won&#x27;t follow specific instructions whenever it&#x27;s asked to draw people.</div><br/><div id="39973391" class="c"><input type="checkbox" id="c-39973391" checked=""/><div class="controls bullet"><span class="by">minimaxir</span><span>|</span><a href="#39972606">root</a><span>|</span><a href="#39972867">parent</a><span>|</span><a href="#39973317">next</a><span>|</span><label class="collapse" for="c-39973391">[-]</label><label class="expand" for="c-39973391">[2 more]</label></div><br/><div class="children"><div class="content">DALL-E 2&#x2F;3 is too expensive to run significant tests on, but neither allow you to manipulate the system prompt to override some behaviors.<p>It <i>is</i> possible to work around it for GPT-4-Vision with the system prompt but it&#x27;s very difficult and due to ambiguities in OpenAI&#x27;s content policy I&#x27;m unsure if it&#x27;s ethical or not.<p>I am still working on experimenting with its effects on Claude: it turns out that Claude does leak its system prompt telling it not to identify individuals without any prompt injections! If you do hit such an issue with this notebook, it will output the full JSON response.</div><br/><div id="39973840" class="c"><input type="checkbox" id="c-39973840" checked=""/><div class="controls bullet"><span class="by">slig</span><span>|</span><a href="#39972606">root</a><span>|</span><a href="#39973391">parent</a><span>|</span><a href="#39973317">next</a><span>|</span><label class="collapse" for="c-39973840">[-]</label><label class="expand" for="c-39973840">[1 more]</label></div><br/><div class="children"><div class="content">Thank you!</div><br/></div></div></div></div><div id="39973317" class="c"><input type="checkbox" id="c-39973317" checked=""/><div class="controls bullet"><span class="by">jiggawatts</span><span>|</span><a href="#39972606">root</a><span>|</span><a href="#39972867">parent</a><span>|</span><a href="#39973391">prev</a><span>|</span><a href="#39975295">next</a><span>|</span><label class="collapse" for="c-39973317">[-]</label><label class="expand" for="c-39973317">[3 more]</label></div><br/><div class="children"><div class="content">That’s because if the woke-injection Open AI applies to the prompt.</div><br/><div id="39973861" class="c"><input type="checkbox" id="c-39973861" checked=""/><div class="controls bullet"><span class="by">slig</span><span>|</span><a href="#39972606">root</a><span>|</span><a href="#39973317">parent</a><span>|</span><a href="#39975295">next</a><span>|</span><label class="collapse" for="c-39973861">[-]</label><label class="expand" for="c-39973861">[2 more]</label></div><br/><div class="children"><div class="content">It won&#x27;t follow even simple, non-ethnic specific instructions such as &quot;draw three women sitting at a cafe&quot;, it re-writes and completely forgets the original number of women, and adds a lot to the query that wasn&#x27;t there.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="39975295" class="c"><input type="checkbox" id="c-39975295" checked=""/><div class="controls bullet"><span class="by">foolmoron</span><span>|</span><a href="#39972606">prev</a><span>|</span><a href="#39973452">next</a><span>|</span><label class="collapse" for="c-39975295">[-]</label><label class="expand" for="c-39975295">[1 more]</label></div><br/><div class="children"><div class="content">I whipped up some card rendering CSS for this, pretty fun!<p><a href="https:&#x2F;&#x2F;colab.research.google.com&#x2F;drive&#x2F;1VERzr75vpCgmXE6lgQCDXgcOF9YpBcXX" rel="nofollow">https:&#x2F;&#x2F;colab.research.google.com&#x2F;drive&#x2F;1VERzr75vpCgmXE6lgQC...</a>?
usp=sharing</div><br/></div></div><div id="39973452" class="c"><input type="checkbox" id="c-39973452" checked=""/><div class="controls bullet"><span class="by">zethus</span><span>|</span><a href="#39975295">prev</a><span>|</span><a href="#39972374">next</a><span>|</span><label class="collapse" for="c-39973452">[-]</label><label class="expand" for="c-39973452">[1 more]</label></div><br/><div class="children"><div class="content">At least from the limited sample size of results, the rules text seems like garbled than other models in the mtg card generating space. Curious if you&#x27;re able to first generate a few mechanics, and then have it design an entire set (either bottom-up or top-down). I&#x27;m sure balancing is not something Gen AI can do properly... but I imagine this can really change how set designers approach new worlds or mechanics!</div><br/></div></div><div id="39972374" class="c"><input type="checkbox" id="c-39972374" checked=""/><div class="controls bullet"><span class="by">ramonverse</span><span>|</span><a href="#39973452">prev</a><span>|</span><label class="collapse" for="c-39972374">[-]</label><label class="expand" for="c-39972374">[5 more]</label></div><br/><div class="children"><div class="content">cool project. Can we see some example magic cards created? thanks!</div><br/><div id="39972565" class="c"><input type="checkbox" id="c-39972565" checked=""/><div class="controls bullet"><span class="by">minimaxir</span><span>|</span><a href="#39972374">parent</a><span>|</span><label class="collapse" for="c-39972565">[-]</label><label class="expand" for="c-39972565">[4 more]</label></div><br/><div class="children"><div class="content">Made a few demos on Twitter:<p><a href="https:&#x2F;&#x2F;twitter.com&#x2F;minimaxir&#x2F;status&#x2F;1777378034238030255" rel="nofollow">https:&#x2F;&#x2F;twitter.com&#x2F;minimaxir&#x2F;status&#x2F;1777378034238030255</a><p><a href="https:&#x2F;&#x2F;twitter.com&#x2F;minimaxir&#x2F;status&#x2F;1777378037199179840" rel="nofollow">https:&#x2F;&#x2F;twitter.com&#x2F;minimaxir&#x2F;status&#x2F;1777378037199179840</a><p>EDIT: Added image to the header of the notebook.</div><br/><div id="39973987" class="c"><input type="checkbox" id="c-39973987" checked=""/><div class="controls bullet"><span class="by">vgalin</span><span>|</span><a href="#39972374">root</a><span>|</span><a href="#39972565">parent</a><span>|</span><label class="collapse" for="c-39973987">[-]</label><label class="expand" for="c-39973987">[3 more]</label></div><br/><div class="children"><div class="content">(Disclaimer, I&#x27;m the maintainer of this package, but this kind of use is exactly why I created it at the beginning)<p>If you know how to use HTML+CSS and would like to generate full-fledged cards, you could use a package such as html2image [0] to combine the text, the image and a card-template image into one final image.
Chrome&#x2F;Chromium has to be available on Colab Notebooks though, that&#x27;s the only requirement.
Using basic SVG without this package could also do the trick.<p>[0] <a href="https:&#x2F;&#x2F;github.com&#x2F;vgalin&#x2F;html2image">https:&#x2F;&#x2F;github.com&#x2F;vgalin&#x2F;html2image</a></div><br/><div id="39974133" class="c"><input type="checkbox" id="c-39974133" checked=""/><div class="controls bullet"><span class="by">minimaxir</span><span>|</span><a href="#39972374">root</a><span>|</span><a href="#39973987">parent</a><span>|</span><label class="collapse" for="c-39974133">[-]</label><label class="expand" for="c-39974133">[2 more]</label></div><br/><div class="children"><div class="content">I had worked on a similar package for similar reasons but yes, Chromium is too big of a dependency.<p>I have an idea for a non-Chromium implementation but that’s a rabbit hole.</div><br/><div id="39974758" class="c"><input type="checkbox" id="c-39974758" checked=""/><div class="controls bullet"><span class="by">vtbassmatt</span><span>|</span><a href="#39972374">root</a><span>|</span><a href="#39974133">parent</a><span>|</span><label class="collapse" for="c-39974758">[-]</label><label class="expand" for="c-39974758">[1 more]</label></div><br/><div class="children"><div class="content">Since you’re already in Python, perhaps my `skit` package could be of service? <a href="https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;skit-game&#x2F;" rel="nofollow">https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;skit-game&#x2F;</a><p>It depends on Python and Pillow.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>