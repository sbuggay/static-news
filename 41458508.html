<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1725613277131" as="style"/><link rel="stylesheet" href="styles.css?v=1725613277131"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://security.googleblog.com/2024/09/deploying-rust-in-existing-firmware.html">Deploying rust in existing firmware codebases</a>Â <span class="domain">(<a href="https://security.googleblog.com">security.googleblog.com</a>)</span></div><div class="subtext"><span>pjmlp</span> | <span>83 comments</span></div><br/><div><div id="41464048" class="c"><input type="checkbox" id="c-41464048" checked=""/><div class="controls bullet"><span class="by">the_panopticon</span><span>|</span><a href="#41460368">next</a><span>|</span><label class="collapse" for="c-41464048">[-]</label><label class="expand" for="c-41464048">[1 more]</label></div><br/><div class="children"><div class="content">This article is a nice addition to the community since rarely is a complete rewrite of a firmware corpus possible. Speaking of Rust and host or boot firmware, the recently published <a href="https:&#x2F;&#x2F;techcommunity.microsoft.com&#x2F;t5&#x2F;surface-it-pro-blog&#x2F;surface-uefi-evolution-in-boot-security-amp-device-management-to&#x2F;ba-p&#x2F;4159998" rel="nofollow">https:&#x2F;&#x2F;techcommunity.microsoft.com&#x2F;t5&#x2F;surface-it-pro-blog&#x2F;s...</a> provides a nice experience report. Other work on moving Rust into EDKII for UEFI style firmware <a href="https:&#x2F;&#x2F;github.com&#x2F;tianocore&#x2F;edk2-staging&#x2F;tree&#x2F;edkii-rust">https:&#x2F;&#x2F;github.com&#x2F;tianocore&#x2F;edk2-staging&#x2F;tree&#x2F;edkii-rust</a> is described in <a href="https:&#x2F;&#x2F;uefi.org&#x2F;sites&#x2F;default&#x2F;files&#x2F;resources&#x2F;Enabling%20RUST%20for%20UEFI%20Firmware_8.19.2020.pdf" rel="nofollow">https:&#x2F;&#x2F;uefi.org&#x2F;sites&#x2F;default&#x2F;files&#x2F;resources&#x2F;Enabling%20RU...</a> and <a href="https:&#x2F;&#x2F;cfp.osfc.io&#x2F;media&#x2F;osfc2020&#x2F;submissions&#x2F;SLFJTN&#x2F;resources&#x2F;OSFC2020_Rust_EFI_Yao_Zimmer_NDK4Dme.pdf" rel="nofollow">https:&#x2F;&#x2F;cfp.osfc.io&#x2F;media&#x2F;osfc2020&#x2F;submissions&#x2F;SLFJTN&#x2F;resour...</a>. There&#x27;s also guidance on Rust for firmware in a book chapter <a href="https:&#x2F;&#x2F;link.springer.com&#x2F;chapter&#x2F;10.1007&#x2F;978-1-4842-6106-4_20" rel="nofollow">https:&#x2F;&#x2F;link.springer.com&#x2F;chapter&#x2F;10.1007&#x2F;978-1-4842-6106-4_...</a>.</div><br/></div></div><div id="41460368" class="c"><input type="checkbox" id="c-41460368" checked=""/><div class="controls bullet"><span class="by">smaudet</span><span>|</span><a href="#41464048">prev</a><span>|</span><a href="#41459412">next</a><span>|</span><label class="collapse" for="c-41460368">[-]</label><label class="expand" for="c-41460368">[11 more]</label></div><br/><div class="children"><div class="content">This page came up for me blank...<p>I had to stick it in brave for it to work. I guess google doesn&#x27;t make web pages anymore...</div><br/><div id="41461911" class="c"><input type="checkbox" id="c-41461911" checked=""/><div class="controls bullet"><span class="by">tlavoie</span><span>|</span><a href="#41460368">parent</a><span>|</span><a href="#41460638">next</a><span>|</span><label class="collapse" for="c-41461911">[-]</label><label class="expand" for="c-41461911">[1 more]</label></div><br/><div class="children"><div class="content">It was blank for me on Firefox, even with uBlock origin turned off. However, disabling JavaScript on the page did the trick!<p>So, whatever shenanigans they&#x27;re doing to mess with the page rendering are completely unnecessary for the reader.</div><br/></div></div><div id="41460638" class="c"><input type="checkbox" id="c-41460638" checked=""/><div class="controls bullet"><span class="by">jeroenhd</span><span>|</span><a href="#41460368">parent</a><span>|</span><a href="#41461911">prev</a><span>|</span><a href="#41463577">next</a><span>|</span><label class="collapse" for="c-41460638">[-]</label><label class="expand" for="c-41460638">[1 more]</label></div><br/><div class="children"><div class="content">Ad blockers get really weird with Google blog pages, especially if you use multiple or very strict ones. There are plenty of rule lists where most Google domains are just blacklisted by default in case something tries to load javascript from them, and those will break the blog posts.<p>Page works for me, but the CSS is screwed up by adblock. It is what it is.</div><br/></div></div><div id="41463577" class="c"><input type="checkbox" id="c-41463577" checked=""/><div class="controls bullet"><span class="by">dartharva</span><span>|</span><a href="#41460368">parent</a><span>|</span><a href="#41460638">prev</a><span>|</span><a href="#41463739">next</a><span>|</span><label class="collapse" for="c-41463577">[-]</label><label class="expand" for="c-41463577">[1 more]</label></div><br/><div class="children"><div class="content">Same for me. It was going on for quite some time, but guess it has started with full force now. Google will now steadily turn Firefox useless by having everything break on a non-Chromium browser.</div><br/></div></div><div id="41463739" class="c"><input type="checkbox" id="c-41463739" checked=""/><div class="controls bullet"><span class="by">Kostarrr</span><span>|</span><a href="#41460368">parent</a><span>|</span><a href="#41463577">prev</a><span>|</span><a href="#41460939">next</a><span>|</span><label class="collapse" for="c-41463739">[-]</label><label class="expand" for="c-41463739">[1 more]</label></div><br/><div class="children"><div class="content">It was blank for me as well until I reloaded with dev tools open and cache disabled. Figured it was a caching issue but maybe something more weird?</div><br/></div></div><div id="41460939" class="c"><input type="checkbox" id="c-41460939" checked=""/><div class="controls bullet"><span class="by">monocasa</span><span>|</span><a href="#41460368">parent</a><span>|</span><a href="#41463739">prev</a><span>|</span><a href="#41464149">next</a><span>|</span><label class="collapse" for="c-41460939">[-]</label><label class="expand" for="c-41460939">[2 more]</label></div><br/><div class="children"><div class="content">Comes up essentially blank for me too on Firefox desktop on ubuntu 24.04.  Still comes up blank with the only adblocker I use (ublock) disabled as well.</div><br/><div id="41461095" class="c"><input type="checkbox" id="c-41461095" checked=""/><div class="controls bullet"><span class="by">Gigachad</span><span>|</span><a href="#41460368">root</a><span>|</span><a href="#41460939">parent</a><span>|</span><a href="#41464149">next</a><span>|</span><label class="collapse" for="c-41461095">[-]</label><label class="expand" for="c-41461095">[1 more]</label></div><br/><div class="children"><div class="content">Loaded fine for me on Firefox on Macos</div><br/></div></div></div></div><div id="41464149" class="c"><input type="checkbox" id="c-41464149" checked=""/><div class="controls bullet"><span class="by">goodpoint</span><span>|</span><a href="#41460368">parent</a><span>|</span><a href="#41460939">prev</a><span>|</span><a href="#41460845">next</a><span>|</span><label class="collapse" for="c-41464149">[-]</label><label class="expand" for="c-41464149">[1 more]</label></div><br/><div class="children"><div class="content">That says a lot about google&#x27;s efforts at monopolizing the web.</div><br/></div></div><div id="41460845" class="c"><input type="checkbox" id="c-41460845" checked=""/><div class="controls bullet"><span class="by">wging</span><span>|</span><a href="#41460368">parent</a><span>|</span><a href="#41464149">prev</a><span>|</span><a href="#41461040">next</a><span>|</span><label class="collapse" for="c-41460845">[-]</label><label class="expand" for="c-41460845">[2 more]</label></div><br/><div class="children"><div class="content">In what browser did it fail to work? It works for me in both iOS Safari and desktop Firefox.</div><br/><div id="41461088" class="c"><input type="checkbox" id="c-41461088" checked=""/><div class="controls bullet"><span class="by">tom_</span><span>|</span><a href="#41460368">root</a><span>|</span><a href="#41460845">parent</a><span>|</span><a href="#41461040">next</a><span>|</span><label class="collapse" for="c-41461088">[-]</label><label class="expand" for="c-41461088">[1 more]</label></div><br/><div class="children"><div class="content">Comes up blank for me on Firefox 129.0.2 and Firefox 130.0, both on Windows. I don&#x27;t use ad blockers.</div><br/></div></div></div></div><div id="41461040" class="c"><input type="checkbox" id="c-41461040" checked=""/><div class="controls bullet"><span class="by">freedomben</span><span>|</span><a href="#41460368">parent</a><span>|</span><a href="#41460845">prev</a><span>|</span><a href="#41459412">next</a><span>|</span><label class="collapse" for="c-41461040">[-]</label><label class="expand" for="c-41461040">[1 more]</label></div><br/><div class="children"><div class="content">I had to whitelist a script from ajax.googleapis.com to get the page to load.</div><br/></div></div></div></div><div id="41459412" class="c"><input type="checkbox" id="c-41459412" checked=""/><div class="controls bullet"><span class="by">Kostarrr</span><span>|</span><a href="#41460368">prev</a><span>|</span><a href="#41461471">next</a><span>|</span><label class="collapse" for="c-41459412">[-]</label><label class="expand" for="c-41459412">[30 more]</label></div><br/><div class="children"><div class="content">It&#x27;s really cool that google is investing so heavily in rust. However, the blog post is more of a &quot;starting point&quot; than a &quot;lessons learned&quot; (which I hoped for).</div><br/><div id="41462026" class="c"><input type="checkbox" id="c-41462026" checked=""/><div class="controls bullet"><span class="by">zamalek</span><span>|</span><a href="#41459412">parent</a><span>|</span><a href="#41460331">next</a><span>|</span><label class="collapse" for="c-41462026">[-]</label><label class="expand" for="c-41462026">[1 more]</label></div><br/><div class="children"><div class="content">I feel like it&#x27;s a poor starting point, too. embedded-hal or embassy would be a much better starting point. Ultimately if you know enough to know what a memory mapped register is, you can _probably_ become dangerous with Rust really quickly. The alternative is someone using Arduino libraries, who would greatly benefit from a HAL of some kind.<p>What I found is that the Rust HALs are incredibly thin and understandable, I was digging into MCU datasheets within a month of first using embassy (with no prior embedded experience).</div><br/></div></div><div id="41460331" class="c"><input type="checkbox" id="c-41460331" checked=""/><div class="controls bullet"><span class="by">Analemma_</span><span>|</span><a href="#41459412">parent</a><span>|</span><a href="#41462026">prev</a><span>|</span><a href="#41460382">next</a><span>|</span><label class="collapse" for="c-41460331">[-]</label><label class="expand" for="c-41460331">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not a great title for the post, because it&#x27;s ambiguous and could go either way, but the post itself doesn&#x27;t pretend to be anything other than a how-to documentation guide for Android integrators.</div><br/></div></div><div id="41460382" class="c"><input type="checkbox" id="c-41460382" checked=""/><div class="controls bullet"><span class="by">nicce</span><span>|</span><a href="#41459412">parent</a><span>|</span><a href="#41460331">prev</a><span>|</span><a href="#41461471">next</a><span>|</span><label class="collapse" for="c-41460382">[-]</label><label class="expand" for="c-41460382">[27 more]</label></div><br/><div class="children"><div class="content">In some sense it is bit missleading as well. On firmware level, you typically need to use a lot of unsafe code. Of course, this highlights the potential danger zones very well, if you use it correctly. But there is still chance that human made a mistake that leads into memory bug. It should be addressed, while it greatly reduces the risks.</div><br/><div id="41460485" class="c"><input type="checkbox" id="c-41460485" checked=""/><div class="controls bullet"><span class="by">timschmidt</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41460382">parent</a><span>|</span><a href="#41460519">next</a><span>|</span><label class="collapse" for="c-41460485">[-]</label><label class="expand" for="c-41460485">[22 more]</label></div><br/><div class="children"><div class="content">I&#x27;m hacking on a firmware in Rust right now, for the ESP32-C3, and the only unsafe bits are buried deeply in the esp-hal crate for the C FFI to ESP-IDF and low level hardware twiddling.  esp-hal exposes safe interfaces to all of that, so I&#x27;ve had to write zero unsafe code.</div><br/><div id="41460916" class="c"><input type="checkbox" id="c-41460916" checked=""/><div class="controls bullet"><span class="by">nicce</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41460485">parent</a><span>|</span><a href="#41461350">next</a><span>|</span><label class="collapse" for="c-41460916">[-]</label><label class="expand" for="c-41460916">[19 more]</label></div><br/><div class="children"><div class="content">But someone else just has written that unsafe code. It is there and unsafe is used as intended, to create an abstraction layer and limit the risky area. Note that even if you use safe abstractions, interactions through safe abstractions can leak to issues in unsafe code.</div><br/><div id="41460965" class="c"><input type="checkbox" id="c-41460965" checked=""/><div class="controls bullet"><span class="by">mecsred</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41460916">parent</a><span>|</span><a href="#41461169">next</a><span>|</span><label class="collapse" for="c-41460965">[-]</label><label class="expand" for="c-41460965">[2 more]</label></div><br/><div class="children"><div class="content">This may come as a shock, but it&#x27;s actually unsafe all the way down. Turns out everything needs to become machine code eventually, and CPUs can do all kinds of nasty stuff. Doesn&#x27;t make containing the unsafe codes to a region of the program any less of a good idea.</div><br/><div id="41461022" class="c"><input type="checkbox" id="c-41461022" checked=""/><div class="controls bullet"><span class="by">nicce</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41460965">parent</a><span>|</span><a href="#41461169">next</a><span>|</span><label class="collapse" for="c-41461022">[-]</label><label class="expand" for="c-41461022">[1 more]</label></div><br/><div class="children"><div class="content">I was just about to edit my comment, because indeed that is the case, and someone will grab into it. But firmware as a term includes typically writing also that part which parent used âsafelyâ. In Rust world hal is own term and as abstraction more known term, but that is not the case if you advertise Rust in blog in order to make non-Rust users to make an understanding. If you build your own products, there is no hal, you need to write it. And use of unsafe to limit the dangerous code is indeed excellent practice.<p>But why leave that part out from the blog post which gets a lot of audience?</div><br/></div></div></div></div><div id="41461169" class="c"><input type="checkbox" id="c-41461169" checked=""/><div class="controls bullet"><span class="by">lilyball</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41460916">parent</a><span>|</span><a href="#41460965">prev</a><span>|</span><a href="#41461867">next</a><span>|</span><label class="collapse" for="c-41461169">[-]</label><label class="expand" for="c-41461169">[7 more]</label></div><br/><div class="children"><div class="content">If interactions through safe abstractions leak unsafety into your code, that&#x27;s a bug in the abstractions.<p>Edit: who voted me down? This is literally the <i>definition</i> of writing a safe abstraction around unsafe code in Rust. If the user of your safe abstraction can trigger a segfault or UB or otherwise do something that is supposed to require unsafe, then your safe abstraction is buggy.</div><br/><div id="41461414" class="c"><input type="checkbox" id="c-41461414" checked=""/><div class="controls bullet"><span class="by">vlovich123</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41461169">parent</a><span>|</span><a href="#41463438">next</a><span>|</span><label class="collapse" for="c-41461414">[-]</label><label class="expand" for="c-41461414">[4 more]</label></div><br/><div class="children"><div class="content">Memory safety and UB sure you could argue for that. But take for example something like FD reuse. In Rust&#x27;s std library there&#x27;s abstractions to prevent that and encourage ownership semantics even though there&#x27;s no segfault or UB that will happen as a result. So clearly &quot;safety&quot; is a spectrum here. And it should be pretty obvious from the existence of unit tests and various property testing frameworks &amp; sanitizers that bugs exist that aren&#x27;t memory safety &#x2F; UB related can&#x27;t be completely prevented through Rust&#x27;s abstractions.</div><br/><div id="41461774" class="c"><input type="checkbox" id="c-41461774" checked=""/><div class="controls bullet"><span class="by">dwattttt</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41461414">parent</a><span>|</span><a href="#41463438">next</a><span>|</span><label class="collapse" for="c-41461774">[-]</label><label class="expand" for="c-41461774">[3 more]</label></div><br/><div class="children"><div class="content">Safety may be a spectrum, but `unsafe` in Rust is very explicit about what it allows&#x2F;enables. They never say &quot;if you only write safe Rust you won&#x27;t encounter logic bugs&quot;.</div><br/><div id="41462533" class="c"><input type="checkbox" id="c-41462533" checked=""/><div class="controls bullet"><span class="by">vlovich123</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41461774">parent</a><span>|</span><a href="#41463438">next</a><span>|</span><label class="collapse" for="c-41462533">[-]</label><label class="expand" for="c-41462533">[2 more]</label></div><br/><div class="children"><div class="content">All unsafe does is mean youâre only allowed to call unsafe functions from unsafe blocks or unsafe functions. Idiomatically memory safety is guaranteed if you stick to safe functions that themselves donât have any issues with memory safety (by being safe or by calling an unsafe function that is correctly implemented).*<p>For example, retrieving the raw fd from a BorrowFd is unsafe even though thereâs no memory corruption issues.<p>I was just replying to OP that claimed that safety issues in an abstraction are a bug in the abstraction. While thatâs a good general rule of thumb, I was highlighting how there are safety issues that are difficult to guarantee within some abstractions.<p>* and adding on this, technically even using only safe code thereâs a few examples how you can create memory unsafety. The canonical example is opening &#x2F;proc&#x2F;mem as a file and overwriting memory out from under Rustâs ownership model. This just goes to show how difficult it is to provide a completely safe abstraction even when you limit yourself to memory safety so treating every safety issue a buggy abstraction is too strong. Itâs an important opportunity to review but it could just be intractable and you have to establish other conventions to solve the issue</div><br/><div id="41462866" class="c"><input type="checkbox" id="c-41462866" checked=""/><div class="controls bullet"><span class="by">ameliaquining</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41462533">parent</a><span>|</span><a href="#41463438">next</a><span>|</span><label class="collapse" for="c-41462866">[-]</label><label class="expand" for="c-41462866">[1 more]</label></div><br/><div class="children"><div class="content">&gt; All unsafe does is mean youâre only allowed to call unsafe functions from unsafe blocks or unsafe functions.<p>That&#x27;s the mechanism by which the safety invariant is enforced, not a description of the safety invariant itself; it&#x27;s the &quot;how&quot;, not the &quot;why&quot;. The safety invariant itself can be roughly summarized as &quot;memory corruption can&#x27;t originate in safe code&quot;.<p>&gt; retrieving the raw fd from a BorrowFd is unsafe<p>No it isn&#x27;t. <a href="https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;std&#x2F;os&#x2F;fd&#x2F;struct.BorrowedFd.html#method.as_raw_fd" rel="nofollow">https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;std&#x2F;os&#x2F;fd&#x2F;struct.BorrowedFd.html#m...</a><p>&gt; opening &#x2F;proc&#x2F;mem as a file<p>I think the Ferrocene people are working on a more formal definition of memory safety in Rust that excludes things like this, since of course no program can defend itself against it.<p>There <i>are</i> some cases, especially when embedding other runtimes with different invariants, where Rust&#x27;s safety model isn&#x27;t quite expressive enough and so people are forced to provide unsound APIs for the sake of practicality. <a href="https:&#x2F;&#x2F;docs.rs&#x2F;pyo3&#x2F;latest&#x2F;pyo3&#x2F;marker&#x2F;index.html#drawbacks" rel="nofollow">https:&#x2F;&#x2F;docs.rs&#x2F;pyo3&#x2F;latest&#x2F;pyo3&#x2F;marker&#x2F;index.html#drawbacks</a> is an example. None of those have been cited here, though, and it&#x27;s not clear to me that firmware inherently imposes this kind of challenge; as far as I can tell, it&#x27;s perfectly possible to write sound Rust APIs for firmware.</div><br/></div></div></div></div></div></div></div></div><div id="41463438" class="c"><input type="checkbox" id="c-41463438" checked=""/><div class="controls bullet"><span class="by">nicce</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41461169">parent</a><span>|</span><a href="#41461414">prev</a><span>|</span><a href="#41461867">next</a><span>|</span><label class="collapse" for="c-41463438">[-]</label><label class="expand" for="c-41463438">[2 more]</label></div><br/><div class="children"><div class="content">&gt; If interactions through safe abstractions leak unsafety into your code, that&#x27;s a bug in the abstractions.<p>This isn&#x27;t much different than saying that C safe language if you write it perfectly.<p>&gt;  definition of writing a safe abstraction<p>That definition is not guaranteeing safety, because that is usually not possible. It just about limiting risky areas.</div><br/><div id="41463713" class="c"><input type="checkbox" id="c-41463713" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41463438">parent</a><span>|</span><a href="#41461867">next</a><span>|</span><label class="collapse" for="c-41463713">[-]</label><label class="expand" for="c-41463713">[1 more]</label></div><br/><div class="children"><div class="content">No, not quite. If the abstractions leak then it&#x27;s Rust&#x27;s fault. If you write buggy C then it&#x27;s your fault.</div><br/></div></div></div></div></div></div><div id="41461867" class="c"><input type="checkbox" id="c-41461867" checked=""/><div class="controls bullet"><span class="by">anon-3988</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41460916">parent</a><span>|</span><a href="#41461169">prev</a><span>|</span><a href="#41461350">next</a><span>|</span><label class="collapse" for="c-41461867">[-]</label><label class="expand" for="c-41461867">[9 more]</label></div><br/><div class="children"><div class="content">There&#x27;s a huge gap between:<p>1. this is nasty
2. this is so much better
3. this is perfect<p>writing C is (1), most people claim that Rust is (2). (3) is utopia and anyone who claims that is not being honest.<p>I have seen this argument SO many times. I don&#x27;t understand why this is so hard to understand? Do C folks use mmap directly instead of malloc? Does &quot;safe&quot; or &quot;sensible&quot; abstraction not exist in C? Do you use void* everywhere because &quot;safe&quot; abstraction like struct S* simply doesnt exist and if they do exist then &quot;well, it could be wrong anyway so why not just give up?&quot;</div><br/><div id="41463143" class="c"><input type="checkbox" id="c-41463143" checked=""/><div class="controls bullet"><span class="by">uecker</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41461867">parent</a><span>|</span><a href="#41462176">next</a><span>|</span><label class="collapse" for="c-41463143">[-]</label><label class="expand" for="c-41463143">[6 more]</label></div><br/><div class="children"><div class="content">There is  Rust code I saw that was cluttered with &quot;unsafe block&quot; to an extend that I am a bit skeptical there was meaningful memory safety left.. There is C code which is nicely structured where I have more confidence in. I am also skeptical about the overall complexity of Rust and I think cargo is &quot;nasty&quot; because of supply chain risk, proliferation of dependencies.  So I do not believe for a second the gap between C and Rust so  big Rust proponents want us to believe.</div><br/><div id="41463285" class="c"><input type="checkbox" id="c-41463285" checked=""/><div class="controls bullet"><span class="by">anon-3988</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41463143">parent</a><span>|</span><a href="#41463287">next</a><span>|</span><label class="collapse" for="c-41463285">[-]</label><label class="expand" for="c-41463285">[3 more]</label></div><br/><div class="children"><div class="content">&gt; There is Rust code I saw that was cluttered with &quot;unsafe block&quot; to an extend that I am a bit skeptical there was meaningful memory safety left.. There is C code which is nicely structured where I have more confidence in.<p>This is anecdotal but I have seen FAR more nasty C code than I have Rust. I can probably count using all my fingers and toes the number of times I have seen and have to vet unsafe code.<p>I spent a week vetting a WebSocket implementation in C to not have buffer overflows, memory leak, use-after-free, overflow, etc etc before I even start vetting the logic. They also have their own bespoke async library so I have to make sense of that first too.<p>I spent a day looking at WebSocket implementation in Rust exactly because I don&#x27;t have to worry about stuff like is this void* reliable and following the call stack to make sure it makes sense.<p>&gt; I am also skeptical about the overall complexity of Rust and I think cargo is &quot;nasty&quot; because of supply chain risk, proliferation of dependencies<p>I am curious how C solves this problem, if you need a btree, a JSON parser, a tree-sitter, a string with SSO optimization; where do you get this? Write your own? Vendor some packages? Rely on the package manager?<p>They all have the same issue of there&#x27;s simply too many code to vet.</div><br/><div id="41463303" class="c"><input type="checkbox" id="c-41463303" checked=""/><div class="controls bullet"><span class="by">whytevuhuni</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41463285">parent</a><span>|</span><a href="#41463287">next</a><span>|</span><label class="collapse" for="c-41463303">[-]</label><label class="expand" for="c-41463303">[2 more]</label></div><br/><div class="children"><div class="content">&gt; They all have the same issue of there&#x27;s simply too many code to vet.<p>The problem is not the amount of code to vet, it&#x27;s the amount of people who own it, and thus the amount of people I need to trust.<p>In C, I use a &quot;standard library&quot; replacement like GLib or APR, and if they don&#x27;t have what I need, then I implement it myself. Thus, the number of owners is just 2.<p>Is my own code less trustworthy? For a start, of course. But once I fix it, once a tool becomes stable, it <i>stays</i> fixed, in the face of all future dependency updates.</div><br/><div id="41463788" class="c"><input type="checkbox" id="c-41463788" checked=""/><div class="controls bullet"><span class="by">anon-3988</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41463303">parent</a><span>|</span><a href="#41463287">next</a><span>|</span><label class="collapse" for="c-41463788">[-]</label><label class="expand" for="c-41463788">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t see why you can&#x27;t do this with Rust? If you want to use your own internet checksum implementation that doesn&#x27;t draw in &quot;random dependencies&quot; for simd or whatever else. You are free to implement, verify and optimize your own.</div><br/></div></div></div></div></div></div><div id="41463287" class="c"><input type="checkbox" id="c-41463287" checked=""/><div class="controls bullet"><span class="by">whytevuhuni</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41463143">parent</a><span>|</span><a href="#41463285">prev</a><span>|</span><a href="#41463742">next</a><span>|</span><label class="collapse" for="c-41463287">[-]</label><label class="expand" for="c-41463287">[1 more]</label></div><br/><div class="children"><div class="content">&gt; There is Rust code I saw that was cluttered with &quot;unsafe block&quot; to an extend that I am a bit skeptical there was meaningful memory safety left..<p>There certainly is. But is it more than 1% of the Rust code out there?<p>And let&#x27;s assume we&#x27;re talking about a project where it <i>is</i> more than 1%. Let&#x27;s say there&#x27;s only 50% safe code (I personally have never seen this, not even in embedded). Is that still not a strict improvement over C?<p>&gt; I am also skeptical about the overall complexity of Rust<p>When you&#x27;re building a small project, using something like C++ or Rust will indeed feel like that.<p>But when you&#x27;re building a large project, then using a simple language doesn&#x27;t make things simpler... it simply moves the complexity elsewhere, and more specifically, into your code.<p>In that case, consolidating the complexity into a single place (the language) makes it so that this complexity is <i>reusable</i>, you learn it once and you understand all places that use it, even in other projects.<p>The time it takes to learn, yes, it&#x27;ll be huge. Afterwards, programming in Rust becomes <i>significantly</i> easier than in C.<p>&gt; I think cargo is &quot;nasty&quot; because of supply chain risk, proliferation of dependencies.<p>This one I actually really agree with, and am very sad about it.</div><br/></div></div><div id="41463742" class="c"><input type="checkbox" id="c-41463742" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41463143">parent</a><span>|</span><a href="#41463287">prev</a><span>|</span><a href="#41462176">next</a><span>|</span><label class="collapse" for="c-41463742">[-]</label><label class="expand" for="c-41463742">[1 more]</label></div><br/><div class="children"><div class="content">I invite you to look at how close the C proponents think the gap is.</div><br/></div></div></div></div><div id="41462176" class="c"><input type="checkbox" id="c-41462176" checked=""/><div class="controls bullet"><span class="by">adgjlsfhk1</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41461867">parent</a><span>|</span><a href="#41463143">prev</a><span>|</span><a href="#41461350">next</a><span>|</span><label class="collapse" for="c-41462176">[-]</label><label class="expand" for="c-41462176">[2 more]</label></div><br/><div class="children"><div class="content">The problem with manual memory management is that it makes safe and easy abstraction a lot harder. Every non-trivial function has a set of rules on who owns what that only exist in comments (or worse, in someone&#x27;s head). Using the function wrong won&#x27;t cause a compile error, but random unsoundness (that is sometimes data&#x2F;dataflow dependent so pretty much impossible to sanitize for).</div><br/></div></div></div></div></div></div><div id="41461350" class="c"><input type="checkbox" id="c-41461350" checked=""/><div class="controls bullet"><span class="by">mystified5016</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41460485">parent</a><span>|</span><a href="#41460916">prev</a><span>|</span><a href="#41460519">next</a><span>|</span><label class="collapse" for="c-41461350">[-]</label><label class="expand" for="c-41461350">[2 more]</label></div><br/><div class="children"><div class="content">ESP-IDF is a pretty high-level framework on top of FreeRTOS. Both do the <i>vast</i> majority of the heavy lifting. Once you&#x27;re working on bare metal without these fancy frameworks, things get real hairy real fast.<p>I strongly encourage you to poke around in the lower levels of the IDF. It&#x27;s equal parts fascinating and horrifying.<p>Espressif&#x27;s code is... interesting, to say the least.</div><br/><div id="41461566" class="c"><input type="checkbox" id="c-41461566" checked=""/><div class="controls bullet"><span class="by">timschmidt</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41461350">parent</a><span>|</span><a href="#41460519">next</a><span>|</span><label class="collapse" for="c-41461566">[-]</label><label class="expand" for="c-41461566">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Espressif&#x27;s code is... interesting, to say the least.<p>Of that, I have no doubt.  I&#x27;m anxiously awaiting esp-openmac&#x27;s completion, so that I can use Wifi without the ESP-IDF as a dependency.  It&#x27;s the only reason I pull that crate in, because I&#x27;m aware of the FreeRTOS dependency.<p>In my experience, one never really has to work at the bare metal layer in Rust, unless you are designing new chips yourself.  All the existing microcontrollers I would think of using already have well worn hals.  Truly impressive what the Rust community has accomplished.</div><br/></div></div></div></div></div></div><div id="41460519" class="c"><input type="checkbox" id="c-41460519" checked=""/><div class="controls bullet"><span class="by">oll3</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41460382">parent</a><span>|</span><a href="#41460485">prev</a><span>|</span><a href="#41461471">next</a><span>|</span><label class="collapse" for="c-41460519">[-]</label><label class="expand" for="c-41460519">[4 more]</label></div><br/><div class="children"><div class="content">Yes, on hal level there will be a bunch of unsafe. On firmware application level it&#x27;s not often I find the need to reach for unsafe though. It would typically be if the hal is lacking in some sense.</div><br/><div id="41460879" class="c"><input type="checkbox" id="c-41460879" checked=""/><div class="controls bullet"><span class="by">jsheard</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41460519">parent</a><span>|</span><a href="#41460895">next</a><span>|</span><label class="collapse" for="c-41460879">[-]</label><label class="expand" for="c-41460879">[2 more]</label></div><br/><div class="children"><div class="content">I was a bit taken aback when I realized that Embassy&#x27;s low-level PAC crates expose all of the devices raw registers through &quot;safe&quot; interfaces though. I&#x27;m pretty sure that letting you configure DMA engines arbitrarily at any time is not in the spirit of safe Rust. AFAIK their high-level HAL crates do aim to be properly safe but their PAC approach makes me nervous.<p><a href="https:&#x2F;&#x2F;docs.embassy.dev&#x2F;rp-pac&#x2F;git&#x2F;default&#x2F;dma&#x2F;struct.Channel.html" rel="nofollow">https:&#x2F;&#x2F;docs.embassy.dev&#x2F;rp-pac&#x2F;git&#x2F;default&#x2F;dma&#x2F;struct.Chann...</a></div><br/><div id="41462712" class="c"><input type="checkbox" id="c-41462712" checked=""/><div class="controls bullet"><span class="by">bacon_waffle</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41460879">parent</a><span>|</span><a href="#41460895">next</a><span>|</span><label class="collapse" for="c-41462712">[-]</label><label class="expand" for="c-41462712">[1 more]</label></div><br/><div class="children"><div class="content">Usually the HAL is between the main firmware and the PAC, so whether the PAC methods are marked as unsafe could almost be considered an implementation detail.<p>But yes, there has been a lot of discussion around how to handle DMA peripherals - the embedded_dma crate offers some abstractions that I&#x27;ve found handy.</div><br/></div></div></div></div><div id="41460895" class="c"><input type="checkbox" id="c-41460895" checked=""/><div class="controls bullet"><span class="by">nicce</span><span>|</span><a href="#41459412">root</a><span>|</span><a href="#41460519">parent</a><span>|</span><a href="#41460879">prev</a><span>|</span><a href="#41461471">next</a><span>|</span><label class="collapse" for="c-41460895">[-]</label><label class="expand" for="c-41460895">[1 more]</label></div><br/><div class="children"><div class="content">But firmware is kinda generic term that usually includes the hal. I am not sure what it meant in this blog post.</div><br/></div></div></div></div></div></div></div></div><div id="41461471" class="c"><input type="checkbox" id="c-41461471" checked=""/><div class="controls bullet"><span class="by">gpvos</span><span>|</span><a href="#41459412">prev</a><span>|</span><a href="#41460279">next</a><span>|</span><label class="collapse" for="c-41461471">[-]</label><label class="expand" for="c-41461471">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;archive.is&#x2F;HitH8" rel="nofollow">https:&#x2F;&#x2F;archive.is&#x2F;HitH8</a></div><br/></div></div><div id="41460279" class="c"><input type="checkbox" id="c-41460279" checked=""/><div class="controls bullet"><span class="by">yazaddaruvala</span><span>|</span><a href="#41461471">prev</a><span>|</span><a href="#41462253">next</a><span>|</span><label class="collapse" for="c-41460279">[-]</label><label class="expand" for="c-41460279">[17 more]</label></div><br/><div class="children"><div class="content">I hope this effort can also translate into more Rust in Linux, rather than potentially Android on a different OS.</div><br/><div id="41460627" class="c"><input type="checkbox" id="c-41460627" checked=""/><div class="controls bullet"><span class="by">vlovich123</span><span>|</span><a href="#41460279">parent</a><span>|</span><a href="#41462253">next</a><span>|</span><label class="collapse" for="c-41460627">[-]</label><label class="expand" for="c-41460627">[16 more]</label></div><br/><div class="children"><div class="content">This isnât relevant to either thing youâve said. The post is about taking the firmware code thatâs on various peripherals (eg the microcontroller the IMU is connected to which Android then talks to or the WiFi&#x2F;BT microcontroller that talks to the actual PHY radio).<p>Rust in Linux is about the Linux kernel having more rust code but Linux is not firmware in the traditional sense (unless youâre talking about ucLinux which no one in my experience uses) and this would have nothing to do with porting Android to another kernel which I canât see happening considering how much custom kernel code there is (unless you are talking about fuschia but fuschia is not Android even though it implements an Android compat layer).</div><br/><div id="41461265" class="c"><input type="checkbox" id="c-41461265" checked=""/><div class="controls bullet"><span class="by">yazaddaruvala</span><span>|</span><a href="#41460279">root</a><span>|</span><a href="#41460627">parent</a><span>|</span><a href="#41461235">next</a><span>|</span><label class="collapse" for="c-41461265">[-]</label><label class="expand" for="c-41461265">[10 more]</label></div><br/><div class="children"><div class="content">Once 100% of the firmware is migrated to Rust. What do you think will be this Google teamsâ next steps?<p>Very likely if Firmware is successful they would use the current positive talking points from this blog post and lessons learned and keep trying to secure Android.<p>My guess would be the kernel and&#x2F;or JVM are on the next step list.</div><br/><div id="41463399" class="c"><input type="checkbox" id="c-41463399" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#41460279">root</a><span>|</span><a href="#41461265">parent</a><span>|</span><a href="#41461386">next</a><span>|</span><label class="collapse" for="c-41463399">[-]</label><label class="expand" for="c-41463399">[1 more]</label></div><br/><div class="children"><div class="content">Android doesn&#x27;t use the JVM, rather ART, which is its own thing.</div><br/></div></div><div id="41461386" class="c"><input type="checkbox" id="c-41461386" checked=""/><div class="controls bullet"><span class="by">vlovich123</span><span>|</span><a href="#41460279">root</a><span>|</span><a href="#41461265">parent</a><span>|</span><a href="#41463399">prev</a><span>|</span><a href="#41461235">next</a><span>|</span><label class="collapse" for="c-41461386">[-]</label><label class="expand" for="c-41461386">[8 more]</label></div><br/><div class="children"><div class="content">&gt; My guess would be the kernel and&#x2F;or JVM are on the next step list<p>I wouldn&#x27;t bother integrating Rust into the JVM because there&#x27;s limited security value. There may be ergonomic advantages in terms of project management but my hunch is that those are limited for something mature like Dalvik. If they rewrote it to use Futamura projections like Truffle, then Rust would be much more interesting as it would reduce the possibility of JIT bugs AND basically make it impossible to do a sandbox escape (most sandbox escapes target the JIT and thus other memory safety issues are rare &amp; unlikely). Finally Dalvik security is unlikely to matter all that much because they rely on process isolation as the security model (Chrome does too but sometimes it loads multiple V8 isolates in a single process so V8 escapes are more valuable).<p>&gt; My guess would be the kernel<p>There&#x27;s already a Rust in Linux project &amp; if you missed the news there&#x27;s a lot of political in-fighting on the LKML. It&#x27;s unlikely that Google has much sway here because even though they employ maintainers like Ted Tso, I suspect their influence on this matter is limited given how staunchly opposed he is &amp; I doubt they&#x27;d be firing engineers like Ted over this. The Android team is going to have limited additional influence beyond what&#x27;s already going on, but the Linux kernel itself is under no threat of being rewritten in Rust any time soon &amp; Android isn&#x27;t migrating to another kernel any time soon.</div><br/><div id="41461973" class="c"><input type="checkbox" id="c-41461973" checked=""/><div class="controls bullet"><span class="by">gpm</span><span>|</span><a href="#41460279">root</a><span>|</span><a href="#41461386">parent</a><span>|</span><a href="#41461235">next</a><span>|</span><label class="collapse" for="c-41461973">[-]</label><label class="expand" for="c-41461973">[7 more]</label></div><br/><div class="children"><div class="content">The goal of rust for linux isn&#x27;t to wholesale translate linux into rust, but simply to be able to write pieces of linux (largely new ones) in rust. I think it&#x27;s very unlikely anyone (including google) will take on a wholesale translation anytime soon. That said<p>&gt; It&#x27;s unlikely that Google has much sway here<p>Google has helped fund the rust for linux project pretty much from the start [1], they&#x27;re one of three organizations mentioned on the homepage due to their sponorship [2]. They&#x27;re actively involved in it, and have already ported their android &quot;binder&quot; driver into it with the intent to ship it in android. This strikes me as a very weird take.<p>[1] <a href="https:&#x2F;&#x2F;www.memorysafety.org&#x2F;blog&#x2F;supporting-miguel-ojeda-rust-in-linux&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.memorysafety.org&#x2F;blog&#x2F;supporting-miguel-ojeda-ru...</a><p>[2] <a href="https:&#x2F;&#x2F;rust-for-linux.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;rust-for-linux.com&#x2F;</a></div><br/><div id="41462548" class="c"><input type="checkbox" id="c-41462548" checked=""/><div class="controls bullet"><span class="by">vlovich123</span><span>|</span><a href="#41460279">root</a><span>|</span><a href="#41461973">parent</a><span>|</span><a href="#41462192">next</a><span>|</span><label class="collapse" for="c-41462548">[-]</label><label class="expand" for="c-41462548">[2 more]</label></div><br/><div class="children"><div class="content">Google is a contributor but youâre going to have a bad time if you think that Google is some monolithic entity. While a part of Google is funding it, other Googlers may be maintainers that are opposed to helping the project (eg look at the article about the rust for Linux maintainer stepping down due to burnout from politics and the comments made my Ted Tso a Google employee against the R4L project).<p>But yes, R4L is a thing thatâs still going on but itâs unrelated to rust in firmware unless you bucket everything Rust together. R4L is adapting Rust and establishing conventions and build systems relevant only to the Linux kernel and thatâs not necessarily a whole lot in common with firmware projects which are typically managed and maintained very differently with very different build systems.</div><br/><div id="41462656" class="c"><input type="checkbox" id="c-41462656" checked=""/><div class="controls bullet"><span class="by">gpm</span><span>|</span><a href="#41460279">root</a><span>|</span><a href="#41462548">parent</a><span>|</span><a href="#41462192">next</a><span>|</span><label class="collapse" for="c-41462656">[-]</label><label class="expand" for="c-41462656">[1 more]</label></div><br/><div class="children"><div class="content">Yep, I agree with all that.</div><br/></div></div></div></div><div id="41462192" class="c"><input type="checkbox" id="c-41462192" checked=""/><div class="controls bullet"><span class="by">adgjlsfhk1</span><span>|</span><a href="#41460279">root</a><span>|</span><a href="#41461973">parent</a><span>|</span><a href="#41462548">prev</a><span>|</span><a href="#41461235">next</a><span>|</span><label class="collapse" for="c-41462192">[-]</label><label class="expand" for="c-41462192">[4 more]</label></div><br/><div class="children"><div class="content">One of the really nice parts of the Rust linux project is that the new Rust code is getting a some of the memory management patterns in the C code actually written down rather than just being in the heads of the programmers.</div><br/><div id="41462892" class="c"><input type="checkbox" id="c-41462892" checked=""/><div class="controls bullet"><span class="by">lenkite</span><span>|</span><a href="#41460279">root</a><span>|</span><a href="#41462192">parent</a><span>|</span><a href="#41461235">next</a><span>|</span><label class="collapse" for="c-41462892">[-]</label><label class="expand" for="c-41462892">[3 more]</label></div><br/><div class="children"><div class="content">Can you please explain what this means ? Isn&#x27;t it now just in Rust code instead of C code ? Or is there some design documentation being written around this ?</div><br/><div id="41462972" class="c"><input type="checkbox" id="c-41462972" checked=""/><div class="controls bullet"><span class="by">yazaddaruvala</span><span>|</span><a href="#41460279">root</a><span>|</span><a href="#41462892">parent</a><span>|</span><a href="#41461235">next</a><span>|</span><label class="collapse" for="c-41462972">[-]</label><label class="expand" for="c-41462972">[2 more]</label></div><br/><div class="children"><div class="content">My understanding is there is a bunch of poorly documented C code that is being translated into Rust using strict types.<p>This can simplify a bunch when using Rust but also better documents the internals for C.</div><br/><div id="41462993" class="c"><input type="checkbox" id="c-41462993" checked=""/><div class="controls bullet"><span class="by">gpm</span><span>|</span><a href="#41460279">root</a><span>|</span><a href="#41462972">parent</a><span>|</span><a href="#41461235">next</a><span>|</span><label class="collapse" for="c-41462993">[-]</label><label class="expand" for="c-41462993">[1 more]</label></div><br/><div class="children"><div class="content">Translated is really the wrong word here.<p>Rust bindings for it are being written so you can call the C code from safe rust. The C code still exists and only the api is duplicated into rust.<p>The convenient side effect of that is that you need to know what constraints you have to enforce to make that memory safe, and generally memory safe here is going to translate to knowing how to properly call the api and enforcing that.<p>Very little C code is actually being rewritten in rust. None of the core C code that is really at issue here (but, for example, android&#x27;s binder driver has been rewritten).</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="41461235" class="c"><input type="checkbox" id="c-41461235" checked=""/><div class="controls bullet"><span class="by">monocasa</span><span>|</span><a href="#41460279">root</a><span>|</span><a href="#41460627">parent</a><span>|</span><a href="#41461265">prev</a><span>|</span><a href="#41462253">next</a><span>|</span><label class="collapse" for="c-41461235">[-]</label><label class="expand" for="c-41461235">[5 more]</label></div><br/><div class="children"><div class="content">This is a very similar environment to the Linux kernel, and most of what this blog post suggests applies to Rust in Linux.</div><br/><div id="41461390" class="c"><input type="checkbox" id="c-41461390" checked=""/><div class="controls bullet"><span class="by">vlovich123</span><span>|</span><a href="#41460279">root</a><span>|</span><a href="#41461235">parent</a><span>|</span><a href="#41462253">next</a><span>|</span><label class="collapse" for="c-41461390">[-]</label><label class="expand" for="c-41461390">[4 more]</label></div><br/><div class="children"><div class="content">Kind of, but Rust in Linux is already an effort that&#x27;s way ahead of what this blog is talking about and has adapted itself to things specific to the Linux kernel whereas firmware environments are typically even more barebones.</div><br/><div id="41462459" class="c"><input type="checkbox" id="c-41462459" checked=""/><div class="controls bullet"><span class="by">monocasa</span><span>|</span><a href="#41460279">root</a><span>|</span><a href="#41461390">parent</a><span>|</span><a href="#41461866">next</a><span>|</span><label class="collapse" for="c-41462459">[-]</label><label class="expand" for="c-41462459">[1 more]</label></div><br/><div class="children"><div class="content">Honestly this is way closer to a conventional Rust environment than the kernel gives you.  In the kennel external crates are pretty much verboten, large chunks of alloc are verboten, no panicking is allowed, etc.</div><br/></div></div><div id="41461866" class="c"><input type="checkbox" id="c-41461866" checked=""/><div class="controls bullet"><span class="by">sophacles</span><span>|</span><a href="#41460279">root</a><span>|</span><a href="#41461390">parent</a><span>|</span><a href="#41462459">prev</a><span>|</span><a href="#41462253">next</a><span>|</span><label class="collapse" for="c-41461866">[-]</label><label class="expand" for="c-41461866">[2 more]</label></div><br/><div class="children"><div class="content">Firmware is not new territory for rust at all. Oxide compiter has been making their firmware in rust for a few years, they even have an embedded OS (called hubris).<p>This effort may ne new for Android, but its not a &quot;break into a new area&quot; type thing.</div><br/><div id="41462438" class="c"><input type="checkbox" id="c-41462438" checked=""/><div class="controls bullet"><span class="by">monocasa</span><span>|</span><a href="#41460279">root</a><span>|</span><a href="#41461866">parent</a><span>|</span><a href="#41462253">next</a><span>|</span><label class="collapse" for="c-41462438">[-]</label><label class="expand" for="c-41462438">[1 more]</label></div><br/><div class="children"><div class="content">And in fact I&#x27;ve been giving more or less annual &quot;State of Embedded Software on Rust&quot; talks since 2017, and every time it has been running as slides on the Nintendo 64 written in Rust.<p>Embedded software in Rust is pretty much as mature as C and C++ at this point.  The vendor won&#x27;t give you examples in Rust, but honestly their code generally barely works anyway and you end up rewriting it.  Might as well rewrite for your use case in Rust.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="41459556" class="c"><input type="checkbox" id="c-41459556" checked=""/><div class="controls bullet"><span class="by">unwind</span><span>|</span><a href="#41462253">prev</a><span>|</span><label class="collapse" for="c-41459556">[-]</label><label class="expand" for="c-41459556">[21 more]</label></div><br/><div class="children"><div class="content">Uh, I get a mostly blank page with a randomly-placed YouTube icon on the right, and no actual text? Wut?<p>Edit: Firefox on Linux&#x2F;x64.</div><br/><div id="41459666" class="c"><input type="checkbox" id="c-41459666" checked=""/><div class="controls bullet"><span class="by">tux3</span><span>|</span><a href="#41459556">parent</a><span>|</span><a href="#41460069">next</a><span>|</span><label class="collapse" for="c-41459666">[-]</label><label class="expand" for="c-41459666">[8 more]</label></div><br/><div class="children"><div class="content">Impressive that they managed to make a plain blog post break. What kind of insane Javascript must be running, that a vertical scroll view with text and pictures has been overcomplicated to the point of breakage</div><br/><div id="41459711" class="c"><input type="checkbox" id="c-41459711" checked=""/><div class="controls bullet"><span class="by">swatcoder</span><span>|</span><a href="#41459556">root</a><span>|</span><a href="#41459666">parent</a><span>|</span><a href="#41459867">next</a><span>|</span><label class="collapse" for="c-41459711">[-]</label><label class="expand" for="c-41459711">[1 more]</label></div><br/><div class="children"><div class="content">Last time I looked up a function in the Android API reference, it involved a 10MB of file transfer (mostly crude custom fonts, IIRC), and the browser gave up trying to resolve the anchor url meant to jump me to the function itself, so I had to Ctrl-f or manually scroll to actually get to my information.<p>In recent years, FAANG web teams are way more invested in automating things than engineering them to be efficient, durable, or gracefully adaptive products.</div><br/></div></div><div id="41459867" class="c"><input type="checkbox" id="c-41459867" checked=""/><div class="controls bullet"><span class="by">wmf</span><span>|</span><a href="#41459556">root</a><span>|</span><a href="#41459666">parent</a><span>|</span><a href="#41459711">prev</a><span>|</span><a href="#41459728">next</a><span>|</span><label class="collapse" for="c-41459867">[-]</label><label class="expand" for="c-41459867">[2 more]</label></div><br/><div class="children"><div class="content">I also got a blank page on Firefox so I opened the inspector and found manmade horrors sadly within my comprehension: a bunch of elements that initially load as hidden then get unhidden later by JS (which never runs) and the body of the blog post is nothing but a script tag. What the fuck, Google.</div><br/><div id="41460111" class="c"><input type="checkbox" id="c-41460111" checked=""/><div class="controls bullet"><span class="by">01HNNWZ0MV43FF</span><span>|</span><a href="#41459556">root</a><span>|</span><a href="#41459867">parent</a><span>|</span><a href="#41459728">next</a><span>|</span><label class="collapse" for="c-41460111">[-]</label><label class="expand" for="c-41460111">[1 more]</label></div><br/><div class="children"><div class="content">Thank goodness no natural intelligence will be able to scrape and copy the content</div><br/></div></div></div></div><div id="41459728" class="c"><input type="checkbox" id="c-41459728" checked=""/><div class="controls bullet"><span class="by">winrid</span><span>|</span><a href="#41459556">root</a><span>|</span><a href="#41459666">parent</a><span>|</span><a href="#41459867">prev</a><span>|</span><a href="#41460183">next</a><span>|</span><label class="collapse" for="c-41459728">[-]</label><label class="expand" for="c-41459728">[1 more]</label></div><br/><div class="children"><div class="content">Loading this page actually makes my CPU fan spin faster for a few seconds :D</div><br/></div></div><div id="41460183" class="c"><input type="checkbox" id="c-41460183" checked=""/><div class="controls bullet"><span class="by">sim7c00</span><span>|</span><a href="#41459556">root</a><span>|</span><a href="#41459666">parent</a><span>|</span><a href="#41459728">prev</a><span>|</span><a href="#41460069">next</a><span>|</span><label class="collapse" for="c-41460183">[-]</label><label class="expand" for="c-41460183">[3 more]</label></div><br/><div class="children"><div class="content">maybe they can replace javascript with rust :&#x27;)</div><br/><div id="41460413" class="c"><input type="checkbox" id="c-41460413" checked=""/><div class="controls bullet"><span class="by">smaudet</span><span>|</span><a href="#41459556">root</a><span>|</span><a href="#41460183">parent</a><span>|</span><a href="#41460069">next</a><span>|</span><label class="collapse" for="c-41460413">[-]</label><label class="expand" for="c-41460413">[2 more]</label></div><br/><div class="children"><div class="content">Their Javascript must have got wet - it rusted too much...</div><br/><div id="41460937" class="c"><input type="checkbox" id="c-41460937" checked=""/><div class="controls bullet"><span class="by">FridgeSeal</span><span>|</span><a href="#41459556">root</a><span>|</span><a href="#41460413">parent</a><span>|</span><a href="#41460069">next</a><span>|</span><label class="collapse" for="c-41460937">[-]</label><label class="expand" for="c-41460937">[1 more]</label></div><br/><div class="children"><div class="content">That makes it sound like JS is analogous to iron, instead of the damp cardboard it actually is hahahaha</div><br/></div></div></div></div></div></div></div></div><div id="41460069" class="c"><input type="checkbox" id="c-41460069" checked=""/><div class="controls bullet"><span class="by">dsissitka</span><span>|</span><a href="#41459556">parent</a><span>|</span><a href="#41459666">prev</a><span>|</span><a href="#41459926">next</a><span>|</span><label class="collapse" for="c-41460069">[-]</label><label class="expand" for="c-41460069">[3 more]</label></div><br/><div class="children"><div class="content">It&#x27;s choking on this regex with a &quot;too much recursion&quot; error:<p><pre><code>   var match = data.match(&#x2F;([\s\S]+?)&lt;div data-is-preview.+?&gt;([\s\S]+)&lt;\&#x2F;div&gt;&#x2F;m);</code></pre></div><br/><div id="41464174" class="c"><input type="checkbox" id="c-41464174" checked=""/><div class="controls bullet"><span class="by">Brybry</span><span>|</span><a href="#41459556">root</a><span>|</span><a href="#41460069">parent</a><span>|</span><a href="#41461445">next</a><span>|</span><label class="collapse" for="c-41464174">[-]</label><label class="expand" for="c-41464174">[1 more]</label></div><br/><div class="children"><div class="content">There&#x27;s a Firefox bugzilla entry for it: <a href="https:&#x2F;&#x2F;bugzilla.mozilla.org&#x2F;show_bug.cgi?id=1845775" rel="nofollow">https:&#x2F;&#x2F;bugzilla.mozilla.org&#x2F;show_bug.cgi?id=1845775</a><p>And a (closed in favor of the bugzilla entry) webcompat issue:  
<a href="https:&#x2F;&#x2F;github.com&#x2F;webcompat&#x2F;web-bugs&#x2F;issues&#x2F;125193">https:&#x2F;&#x2F;github.com&#x2F;webcompat&#x2F;web-bugs&#x2F;issues&#x2F;125193</a></div><br/></div></div><div id="41461445" class="c"><input type="checkbox" id="c-41461445" checked=""/><div class="controls bullet"><span class="by">gpvos</span><span>|</span><a href="#41459556">root</a><span>|</span><a href="#41460069">parent</a><span>|</span><a href="#41464174">prev</a><span>|</span><a href="#41459926">next</a><span>|</span><label class="collapse" for="c-41461445">[-]</label><label class="expand" for="c-41461445">[1 more]</label></div><br/><div class="children"><div class="content">Same here.</div><br/></div></div></div></div><div id="41459926" class="c"><input type="checkbox" id="c-41459926" checked=""/><div class="controls bullet"><span class="by">loeg</span><span>|</span><a href="#41459556">parent</a><span>|</span><a href="#41460069">prev</a><span>|</span><a href="#41460562">next</a><span>|</span><label class="collapse" for="c-41459926">[-]</label><label class="expand" for="c-41459926">[1 more]</label></div><br/><div class="children"><div class="content">If you use the uBlock Origin &quot;disable Javascript for this site,&quot; it loads totally fine (all of the content is hidden behind either &lt;noscript&gt; tags or some broken javascript).</div><br/></div></div><div id="41460562" class="c"><input type="checkbox" id="c-41460562" checked=""/><div class="controls bullet"><span class="by">piperswe</span><span>|</span><a href="#41459556">parent</a><span>|</span><a href="#41459926">prev</a><span>|</span><a href="#41459606">next</a><span>|</span><label class="collapse" for="c-41460562">[-]</label><label class="expand" for="c-41460562">[1 more]</label></div><br/><div class="children"><div class="content">Works fine for me with no JavaScript, but if I open it in a private browsing window without LibreJS I get what you describe. Funny, usually it&#x27;s the opposite!</div><br/></div></div><div id="41459606" class="c"><input type="checkbox" id="c-41459606" checked=""/><div class="controls bullet"><span class="by">gpm</span><span>|</span><a href="#41459556">parent</a><span>|</span><a href="#41460562">prev</a><span>|</span><a href="#41459766">next</a><span>|</span><label class="collapse" for="c-41459606">[-]</label><label class="expand" for="c-41459606">[1 more]</label></div><br/><div class="children"><div class="content">Try refreshing a few times. It seems that they&#x27;ve managed to partially break the page on firefox. I&#x27;m currently also on x64&#x2F;firefox&#x2F;linux and it works roughly half the time for me.</div><br/></div></div><div id="41459766" class="c"><input type="checkbox" id="c-41459766" checked=""/><div class="controls bullet"><span class="by">tripdout</span><span>|</span><a href="#41459556">parent</a><span>|</span><a href="#41459606">prev</a><span>|</span><a href="#41459600">next</a><span>|</span><label class="collapse" for="c-41459766">[-]</label><label class="expand" for="c-41459766">[1 more]</label></div><br/><div class="children"><div class="content">On the same platform and browser, it displays the header line separator and my CPU fan ramps up but it does load after a few seconds.</div><br/></div></div><div id="41459600" class="c"><input type="checkbox" id="c-41459600" checked=""/><div class="controls bullet"><span class="by">pm215</span><span>|</span><a href="#41459556">parent</a><span>|</span><a href="#41459766">prev</a><span>|</span><a href="#41461131">next</a><span>|</span><label class="collapse" for="c-41459600">[-]</label><label class="expand" for="c-41459600">[2 more]</label></div><br/><div class="children"><div class="content">It doesn&#x27;t seem to display properly on all browsers - I got that on Linux Firefox at work earlier, but Android Firefox seems to manage to display it OK.</div><br/><div id="41460733" class="c"><input type="checkbox" id="c-41460733" checked=""/><div class="controls bullet"><span class="by">Sindisil</span><span>|</span><a href="#41459556">root</a><span>|</span><a href="#41459600">parent</a><span>|</span><a href="#41461131">next</a><span>|</span><label class="collapse" for="c-41460733">[-]</label><label class="expand" for="c-41460733">[1 more]</label></div><br/><div class="children"><div class="content">Not always. I just tried it in FF on my Android phone. No luck. Assuming I&#x27;m not missing anything, if they can&#x27;t be bothered to make a simple blog page loadable.<p>FFS.</div><br/></div></div></div></div><div id="41461131" class="c"><input type="checkbox" id="c-41461131" checked=""/><div class="controls bullet"><span class="by">bongodongobob</span><span>|</span><a href="#41459556">parent</a><span>|</span><a href="#41459600">prev</a><span>|</span><label class="collapse" for="c-41461131">[-]</label><label class="expand" for="c-41461131">[3 more]</label></div><br/><div class="children"><div class="content">I gave up on Firefox about a month ago. The stupid not being able to copy bug was enough for me. Have had plenty of webpage issues that Chrome and Edge seem to handle just fine. I don&#x27;t know what&#x27;s changed lately, but seems as if it&#x27;s gotten quite buggy.</div><br/><div id="41461985" class="c"><input type="checkbox" id="c-41461985" checked=""/><div class="controls bullet"><span class="by">spartanatreyu</span><span>|</span><a href="#41459556">root</a><span>|</span><a href="#41461131">parent</a><span>|</span><label class="collapse" for="c-41461985">[-]</label><label class="expand" for="c-41461985">[2 more]</label></div><br/><div class="children"><div class="content">I gave up on having feet about a month ago. The stupid I hit my toe on the corner of the wall bug was enough for me. Have had plenty of times now where I&#x27;ve ignored that walls might have corners and I haven&#x27;t banged my toes anymore. I don&#x27;t know what&#x27;s changed lately, but seems as if having feet have gotten quite buggy.<p>Personally when I bang my toes against a corner, I don&#x27;t think about removing my feet just to prevent toe banging.<p>---------------<p>Reductio ad absurdum aside, if I&#x27;m experiencing an issue in a browser, my first thought is to diagnose and fix the issue or find an expectable workaround rather than change to a browser with obvious privacy issues.</div><br/><div id="41463029" class="c"><input type="checkbox" id="c-41463029" checked=""/><div class="controls bullet"><span class="by">warkdarrior</span><span>|</span><a href="#41459556">root</a><span>|</span><a href="#41461985">parent</a><span>|</span><label class="collapse" for="c-41463029">[-]</label><label class="expand" for="c-41463029">[1 more]</label></div><br/><div class="children"><div class="content">The browser, for me, is a tool to view web pages. If it does not do that for some web page, I&#x27;m going to switch to another browser to view the web page. Lots of browsers to try to view that web page I want to see!</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>