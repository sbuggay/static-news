<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1735290050552" as="style"/><link rel="stylesheet" href="styles.css?v=1735290050552"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://brennan.io/2015/01/16/write-a-shell-in-c/">Write a Shell in C (2015)</a>Â <span class="domain">(<a href="https://brennan.io">brennan.io</a>)</span></div><div class="subtext"><span>sebg</span> | <span>12 comments</span></div><br/><div><div id="42517933" class="c"><input type="checkbox" id="c-42517933" checked=""/><div class="controls bullet"><span class="by">leonheld</span><span>|</span><a href="#42518412">next</a><span>|</span><label class="collapse" for="c-42517933">[-]</label><label class="expand" for="c-42517933">[1 more]</label></div><br/><div class="children"><div class="content">Honestly this was one of the most influential pieces of writing I&#x27;ve ever read. Back in the day this opened up a lot of the implementation details on interpreters and C for me. It quite literally helped &quot;get&quot; how programs are designed and written.<p>I found this piece around eighth grade and I&#x27;m very glad I did! :-)</div><br/></div></div><div id="42518412" class="c"><input type="checkbox" id="c-42518412" checked=""/><div class="controls bullet"><span class="by">dang</span><span>|</span><a href="#42517933">prev</a><span>|</span><a href="#42519193">next</a><span>|</span><label class="collapse" for="c-42518412">[-]</label><label class="expand" for="c-42518412">[1 more]</label></div><br/><div class="children"><div class="content">Related. Others?<p><i>Write a Shell in C</i> - <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=26126010">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=26126010</a> - Feb 2021 (80 comments)<p><i>Write a Shell in C (2015)</i> - <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=13112589">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=13112589</a> - Dec 2016 (68 comments)<p><i>Write a Shell in C</i> - <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=8907392">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=8907392</a> - Jan 2015 (8 comments)</div><br/></div></div><div id="42519193" class="c"><input type="checkbox" id="c-42519193" checked=""/><div class="controls bullet"><span class="by">jkingsman</span><span>|</span><a href="#42518412">prev</a><span>|</span><a href="#42519773">next</a><span>|</span><label class="collapse" for="c-42519193">[-]</label><label class="expand" for="c-42519193">[1 more]</label></div><br/><div class="children"><div class="content">This was one of my favorite exercises in my introductory C classes in college. I&#x27;m gratified to see other people with warm and enlightened reactions to implementing something like this; it was a monumental and eye-opening assignment for me and I couldn&#x27;t help but tinker with it for weeks. Many others saw it as just a box ticking exercise with annoying string and OS munging, but it felt like I had a secret of the universe laid bare for me in seeing how to go from toy C programs to a useful shell that accelerated some special purpose tasks.</div><br/></div></div><div id="42519773" class="c"><input type="checkbox" id="c-42519773" checked=""/><div class="controls bullet"><span class="by">emmelaich</span><span>|</span><a href="#42519193">prev</a><span>|</span><a href="#42518718">next</a><span>|</span><label class="collapse" for="c-42519773">[-]</label><label class="expand" for="c-42519773">[1 more]</label></div><br/><div class="children"><div class="content">You might have a look the source for Advanced UNIX Programming by Marc Rochkind, too.<p>In the book it starts literally with a one-shot shell - exec - and moves onto fancier ones, including piping etc.<p>First version of source accompanying the book is at <a href="https:&#x2F;&#x2F;github.com&#x2F;gmarler&#x2F;AUPv2&#x2F;blob&#x2F;master&#x2F;c5&#x2F;sh0.c">https:&#x2F;&#x2F;github.com&#x2F;gmarler&#x2F;AUPv2&#x2F;blob&#x2F;master&#x2F;c5&#x2F;sh0.c</a>
and does multiple commands.</div><br/></div></div><div id="42518718" class="c"><input type="checkbox" id="c-42518718" checked=""/><div class="controls bullet"><span class="by">seafoamteal</span><span>|</span><a href="#42519773">prev</a><span>|</span><a href="#42519974">next</a><span>|</span><label class="collapse" for="c-42518718">[-]</label><label class="expand" for="c-42518718">[1 more]</label></div><br/><div class="children"><div class="content">I wrote a toy shell last summer and this was one of the pieces I referred to most.<p>Writing the beginnings of a shell is surprisingly easy. fork() and exec() do all the heavy lifting. I would recommend it as a great systems programming exercise.</div><br/></div></div><div id="42519974" class="c"><input type="checkbox" id="c-42519974" checked=""/><div class="controls bullet"><span class="by">rramadass</span><span>|</span><a href="#42518718">prev</a><span>|</span><a href="#42518600">next</a><span>|</span><label class="collapse" for="c-42519974">[-]</label><label class="expand" for="c-42519974">[1 more]</label></div><br/><div class="children"><div class="content">Very nice especially the pedagogy. A little bit of code (in a top-down manner) together with the corresponding explanation for a complete app is how things used to be explained in the old days. I still remember studying Al Stevens&#x27; book <i>Turbo C: Memory Resident Utilities, Screen I-O and Programming Techniques</i> (for DOS) and learning how to layer software viz. 1) a layer over BIOS, 2) a layer to draw windows using (1) 3) a desktop manager using (2) 4) a text editor 5) making the editor memory-resident. Reading that book really taught me how to use C to build a non-trivial app.<p>A very good Unix book with lots of projects like shell, token ring etc. is <i>Practical UNIX Programming: A Guide to Concurrency, Communication, and Multithreading</i> by Kay Robbins and Steven Robbins. It&#x27;s 2nd edition is named <i>UNIX Systems Programming: Communication, Concurrency and Threads</i>. The code given in the book is really illuminating.</div><br/></div></div><div id="42518600" class="c"><input type="checkbox" id="c-42518600" checked=""/><div class="controls bullet"><span class="by">rtpg</span><span>|</span><a href="#42519974">prev</a><span>|</span><a href="#42517993">next</a><span>|</span><label class="collapse" for="c-42518600">[-]</label><label class="expand" for="c-42518600">[1 more]</label></div><br/><div class="children"><div class="content">For people who are interested in this stuff, I really recommend just getting a copy of Advanced Programming in the UNIX Environment and flipping through all (or most) of it. Pretty de-mystifying (and a good argument for caring about what OS you use!).<p>Then you can pick up some book on shells (Effective Linux at the Command Line is one I&#x27;m going through right now), and you can piece a lot of it together.<p>There&#x27;s no magic, just a combo of decent ideas working together. But no single idea is hard to implement. Maybe just hard to come up with from scratch.</div><br/></div></div><div id="42517993" class="c"><input type="checkbox" id="c-42517993" checked=""/><div class="controls bullet"><span class="by">stefantalpalaru</span><span>|</span><a href="#42518600">prev</a><span>|</span><a href="#42517309">next</a><span>|</span><label class="collapse" for="c-42517993">[-]</label><label class="expand" for="c-42517993">[1 more]</label></div><br/><div class="children"><div class="content">The glibc manual has a section about writing a job control shell: <a href="https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;libc&#x2F;manual&#x2F;html_mono&#x2F;libc.html#Implementing-a-Shell" rel="nofollow">https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;libc&#x2F;manual&#x2F;html_mono&#x2F;libc.html...</a></div><br/></div></div></div></div></div></div></div></body></html>