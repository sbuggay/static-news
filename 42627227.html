<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1736326879435" as="style"/><link rel="stylesheet" href="styles.css?v=1736326879435"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.seangoedecke.com/large-established-codebases/">Mistakes engineers make in large established codebases</a> <span class="domain">(<a href="https://www.seangoedecke.com">www.seangoedecke.com</a>)</span></div><div class="subtext"><span>BerislavLopac</span> | <span>177 comments</span></div><br/><div><div id="42628594" class="c"><input type="checkbox" id="c-42628594" checked=""/><div class="controls bullet"><span class="by">peterldowns</span><span>|</span><a href="#42628400">next</a><span>|</span><label class="collapse" for="c-42628594">[-]</label><label class="expand" for="c-42628594">[61 more]</label></div><br/><div class="children"><div class="content">I agree that consistency is important — but what about when the existing codebase is already inconsistent? Even worse, what if the existing codebase is both inconsistent <i>and</i> the &quot;right way to do things&quot; is undocumented? That&#x27;s much closer to what I&#x27;ve experienced when joining companies with lots of existing code.<p>In this scenario, I&#x27;ve found that the only productive way forward is to do the best job you can, in your own isolated code, and share loudly and frequently why you&#x27;re doing things your new different way. Write your code to be re-used and shared. Write docs for it. Explain why it&#x27;s the correct approach. Ask for feedback from the wider engineering org (although don&#x27;t block on it if they&#x27;re not directly involved with your work.) You&#x27;ll quickly find out if other engineers agree that your approach is better. If it&#x27;s actually better, others will start following your lead. If it&#x27;s not, you&#x27;ll be able to adjust.<p>Of course, when working in the existing code, try to be as locally consistent as possible with the surrounding code, even if it&#x27;s terrible. I like to think of this as &quot;getting in and out&quot; as quickly as possible.<p>If you encounter particularly sticky&#x2F;unhelpful&#x2F;reticent team members, it can help to remind them that (a) the existing code is worse than what you&#x27;re writing, (b) there is no documented pattern that you&#x27;re breaking, (c) your work is an experiment and you will later revise it. Often asking them to simply document the convention that you are supposedly breaking is enough to get them to go away, since they won&#x27;t bother to spend the effort.</div><br/><div id="42630368" class="c"><input type="checkbox" id="c-42630368" checked=""/><div class="controls bullet"><span class="by">sfink</span><span>|</span><a href="#42628594">parent</a><span>|</span><a href="#42628959">next</a><span>|</span><label class="collapse" for="c-42630368">[-]</label><label class="expand" for="c-42630368">[15 more]</label></div><br/><div class="children"><div class="content">Hopefully, you have a monorepo or something with similar effects, and a lack of fiefdoms. In that case, if the current way is undocumented and&#x2F;or inconsistent, you make it better before or while adding in your new approach. If there are 4 ways to do the same thing and you really want to do it a different way, then replace one of those ways with your new one in the process of adding it. For extra credit, get to the point where you understand why you can&#x27;t replace the other 3. (Or if you can, do it! Preferably in followups, to avoid bundling too much risk at once.)<p>A lot of inconsistency is the result of unwillingness to fix other people&#x27;s stuff. If your way is better, trust people to see it when applied to their own code. They probably have similar grievances, but it has never been a priority to fix. If you&#x27;re willing to spend the time and energy, there&#x27;s a good chance they&#x27;ll be willing to accept the results even if it does cause some churn and require new learning.<p>(Source: I have worked on Firefox for a decade now, which fits the criteria in the article, and sweeping changes that affect the entire codebase are relatively common. People here are more likely to encourage such thinking than to shoot it down because it is new or different than the status quo. You just can&#x27;t be an ass about it and ignore legitimate objections. It is still a giant legacy codebase with ancient warts, but I mostly see technical or logistical obstacles to cleaning things up, not political ones.)</div><br/><div id="42630570" class="c"><input type="checkbox" id="c-42630570" checked=""/><div class="controls bullet"><span class="by">peterldowns</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42630368">parent</a><span>|</span><a href="#42631522">next</a><span>|</span><label class="collapse" for="c-42630570">[-]</label><label class="expand" for="c-42630570">[2 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t disagree with what you&#x27;ve written at all, but let me just say:<p>&gt; Hopefully, you have a monorepo or something with similar effects, and a lack of fiefdoms<p>ah to be so lucky...</div><br/><div id="42630821" class="c"><input type="checkbox" id="c-42630821" checked=""/><div class="controls bullet"><span class="by">sverhagen</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42630570">parent</a><span>|</span><a href="#42631522">next</a><span>|</span><label class="collapse" for="c-42630821">[-]</label><label class="expand" for="c-42630821">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a bit of a non-issue in this context. If you don&#x27;t have a mono-repo, you should maintain reasonable consistency <i>within</i> each repository (and hope they&#x27;re consistent between each other, but that&#x27;s probably less important here).</div><br/></div></div></div></div><div id="42631522" class="c"><input type="checkbox" id="c-42631522" checked=""/><div class="controls bullet"><span class="by">zwnow</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42630368">parent</a><span>|</span><a href="#42630570">prev</a><span>|</span><a href="#42631081">next</a><span>|</span><label class="collapse" for="c-42631522">[-]</label><label class="expand" for="c-42631522">[10 more]</label></div><br/><div class="children"><div class="content">Thats not how software engineering works in a business setting though? Not a single company I have been in has the time to first fix the existing codebase before adding a new feature. The new feature is verbally guaranteed to the customers by project managers and then its on the dev to deliver within the deadline or you&#x27;ll have much greater issues than a inconsistent codebase.
I&#x27;d love to work in a fantasy company that allows for fixing legacy code, but that can take months to years with multi million line codebases.</div><br/><div id="42631665" class="c"><input type="checkbox" id="c-42631665" checked=""/><div class="controls bullet"><span class="by">huijzer</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42631522">parent</a><span>|</span><a href="#42631818">next</a><span>|</span><label class="collapse" for="c-42631665">[-]</label><label class="expand" for="c-42631665">[7 more]</label></div><br/><div class="children"><div class="content">And then at some point the codebase becomes so unusable that new features take too long and out of frustration management decides to hire 500 extra programmers to fix the situation, which makes the situation even more slow.<p>As I understand, there is a balance between refactoring and adding new features. It’s up to the engineers to find a way to do both. Isn’t it also fair if engineers push sometimes back on management? Shouldn’t a civil engineer speak up if he&#x2F;she thinks the bridge is going to collapse with the current design?</div><br/><div id="42631696" class="c"><input type="checkbox" id="c-42631696" checked=""/><div class="controls bullet"><span class="by">zwnow</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42631665">parent</a><span>|</span><a href="#42632077">next</a><span>|</span><label class="collapse" for="c-42631696">[-]</label><label class="expand" for="c-42631696">[5 more]</label></div><br/><div class="children"><div class="content">The issue is that management usually doesn&#x27;t care. Personally I usually have about 3-4 days to implement something. If I can&#x27;t deliver they will just look for more devs, yes. Quantity is what matters for management. New New New is what they want, who cares about the codebase (sarcasm). Management doesn&#x27;t even know how a good codebase looks. A bridge that is missing support probably wouldn&#x27;t have been opened to the public in the first place. Thats not correct for codebases.</div><br/><div id="42632014" class="c"><input type="checkbox" id="c-42632014" checked=""/><div class="controls bullet"><span class="by">staunton</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42631696">parent</a><span>|</span><a href="#42631807">next</a><span>|</span><label class="collapse" for="c-42632014">[-]</label><label class="expand" for="c-42632014">[1 more]</label></div><br/><div class="children"><div class="content">&gt; A bridge that is missing support probably wouldn&#x27;t have been opened to the public in the first place.<p>That&#x27;s not always been the case and came to be because people have died... Is anyone going to die if your codebase is an unmaintainable mess?</div><br/></div></div><div id="42631807" class="c"><input type="checkbox" id="c-42631807" checked=""/><div class="controls bullet"><span class="by">baq</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42631696">parent</a><span>|</span><a href="#42632014">prev</a><span>|</span><a href="#42632077">next</a><span>|</span><label class="collapse" for="c-42631807">[-]</label><label class="expand" for="c-42631807">[3 more]</label></div><br/><div class="children"><div class="content">&gt; The issue is that management usually doesn&#x27;t care.<p>Neither do customers.<p>The product is an asset. Code is a liability.</div><br/><div id="42631872" class="c"><input type="checkbox" id="c-42631872" checked=""/><div class="controls bullet"><span class="by">zwnow</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42631807">parent</a><span>|</span><a href="#42632077">next</a><span>|</span><label class="collapse" for="c-42631872">[-]</label><label class="expand" for="c-42631872">[2 more]</label></div><br/><div class="children"><div class="content">Can&#x27;t be held accountable for work conditions engineers dont have power over. If I dont have time to write tests, I cant be blamed for not writing tests.
Especially now with hallucinating bs AI there is a whole load of more output expected from devs.</div><br/><div id="42632147" class="c"><input type="checkbox" id="c-42632147" checked=""/><div class="controls bullet"><span class="by">baq</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42631872">parent</a><span>|</span><a href="#42632077">next</a><span>|</span><label class="collapse" for="c-42632147">[-]</label><label class="expand" for="c-42632147">[1 more]</label></div><br/><div class="children"><div class="content">Don&#x27;t check in any code, only prompts. The product is reconfabulated on every build.</div><br/></div></div></div></div></div></div></div></div><div id="42632077" class="c"><input type="checkbox" id="c-42632077" checked=""/><div class="controls bullet"><span class="by">mrkeen</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42631665">parent</a><span>|</span><a href="#42631696">prev</a><span>|</span><a href="#42631818">next</a><span>|</span><label class="collapse" for="c-42632077">[-]</label><label class="expand" for="c-42632077">[1 more]</label></div><br/><div class="children"><div class="content">&gt; As I understand, there is a balance between refactoring and adding new features.<p>True, but has drifted from the TFA&#x27;s assertion about consistency.<p>As the thread has implied, it&#x27;s already hard enough to find time to make small improvements.  But once you do, get ready for them to be rejected in PR for nebulous &quot;consistency&quot; reasons.</div><br/></div></div></div></div><div id="42631818" class="c"><input type="checkbox" id="c-42631818" checked=""/><div class="controls bullet"><span class="by">bcrosby95</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42631522">parent</a><span>|</span><a href="#42631665">prev</a><span>|</span><a href="#42631081">next</a><span>|</span><label class="collapse" for="c-42631818">[-]</label><label class="expand" for="c-42631818">[2 more]</label></div><br/><div class="children"><div class="content">New features are the right time to refactor.  If you can&#x27;t make the code not complete shit you don&#x27;t have time to add the feature.  Never refactor code to make it prettier or whatever, refactor it when it becomes not-fit-for-purpose for what you need to do.  There&#x27;s obviously exceptions (both ways) but those are exceptions not rules.<p>At least, that&#x27;s what I teach our devs.</div><br/><div id="42631963" class="c"><input type="checkbox" id="c-42631963" checked=""/><div class="controls bullet"><span class="by">zwnow</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42631818">parent</a><span>|</span><a href="#42631081">next</a><span>|</span><label class="collapse" for="c-42631963">[-]</label><label class="expand" for="c-42631963">[1 more]</label></div><br/><div class="children"><div class="content">My company didn&#x27;t even have time to keep the dependencies up to date so now we are stuck with Laravel 5 and Vue 2. Refactoring&#x2F;Updating can be an incredible workload. Personally I&#x27;d say rewriting the whole thing would be more efficient but that&#x27;s not my choice to make.
If you have plenty of time for a task, I fully agree with you.</div><br/></div></div></div></div></div></div><div id="42631081" class="c"><input type="checkbox" id="c-42631081" checked=""/><div class="controls bullet"><span class="by">StellarScience</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42630368">parent</a><span>|</span><a href="#42631522">prev</a><span>|</span><a href="#42631323">next</a><span>|</span><label class="collapse" for="c-42631081">[-]</label><label class="expand" for="c-42631081">[1 more]</label></div><br/><div class="children"><div class="content">Great points, I&#x27;d just add:<p>&gt; A lot of inconsistency is the result of unwillingness to fix other people&#x27;s stuff<p>Agree,  so we find it best to practice &quot;no code ownership&quot; or better yet &quot;shared code ownership.&quot; So we try to think of it all as &quot;our stuff&quot; rather than &quot;other people&#x27;s stuff.&quot; Maybe you just joined the project, and are working around code that hasn&#x27;t been touched in 5 years, but we&#x27;re all responsible for improving the code and making it better as we go.<p>That requires a high trust environment; I don&#x27;t know if it could work for Firefox where you may have some very part-time contributors. But having documented standards, plus clang-format and clang-tidy to automate some of the simpler things, also goes a long way.</div><br/></div></div><div id="42631323" class="c"><input type="checkbox" id="c-42631323" checked=""/><div class="controls bullet"><span class="by">The_Colonel</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42630368">parent</a><span>|</span><a href="#42631081">prev</a><span>|</span><a href="#42628959">next</a><span>|</span><label class="collapse" for="c-42631323">[-]</label><label class="expand" for="c-42631323">[1 more]</label></div><br/><div class="children"><div class="content">I agree, but this presupposes a large comprehensive test suite giving you enough confidence to do such sweeping changes. I don&#x27;t doubt Firefox has it, but most (even large, established projects) will not. A common case I&#x27;ve seen is that newer parts are relatively well covered, but older, less often touched parts don&#x27;t have good coverage, which makes it risky to do such sweeping changes.</div><br/></div></div></div></div><div id="42628959" class="c"><input type="checkbox" id="c-42628959" checked=""/><div class="controls bullet"><span class="by">digging</span><span>|</span><a href="#42628594">parent</a><span>|</span><a href="#42630368">prev</a><span>|</span><a href="#42629464">next</a><span>|</span><label class="collapse" for="c-42628959">[-]</label><label class="expand" for="c-42628959">[20 more]</label></div><br/><div class="children"><div class="content">&gt; If it&#x27;s actually better, others will start following your lead.<p>Not really my experience in teams that create inconsistent, undocumented codebases... but you might get 1 or 2 converts.</div><br/><div id="42629068" class="c"><input type="checkbox" id="c-42629068" checked=""/><div class="controls bullet"><span class="by">peterldowns</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42628959">parent</a><span>|</span><a href="#42629865">next</a><span>|</span><label class="collapse" for="c-42629068">[-]</label><label class="expand" for="c-42629068">[13 more]</label></div><br/><div class="children"><div class="content">It depends on the day but generally I believe that most engineers want to write good code, want to improve their own skills, and like learning and critiquing with other engineers. Sometimes a small catalyst is all it takes to dramatically improve things. Most of the times I&#x27;ve thought that individual contributors were the problem, the real issue was what the company&#x27;s leaders were punishing&#x2F;rewarding&#x2F;demanding.</div><br/><div id="42632228" class="c"><input type="checkbox" id="c-42632228" checked=""/><div class="controls bullet"><span class="by">Tallain</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42629068">parent</a><span>|</span><a href="#42630371">next</a><span>|</span><label class="collapse" for="c-42632228">[-]</label><label class="expand" for="c-42632228">[1 more]</label></div><br/><div class="children"><div class="content">Exactly this. I (relatively recently) joined a team with a handful of developers all sort of doing things their own way. No docs, no shared practices, just individuals doing their own thing. After reviewing the code, submitted PRs with fixes, putting together docs for best practices, the entire team shifted their stance and started working closer together in terms of dev practices, coding styles, etc.<p>Not to say I got everyone to march to my drum -- the &quot;best practices&quot; was a shared effort. As you said, sometimes it just takes someone to call things out. We can do things better. Look at how things improve if you approach X problem in Y manner, or share Z code this way. Maybe the team was overwhelmed before and another voice is enough to tip the scales. If you don&#x27;t try, you&#x27;ll never know.</div><br/></div></div><div id="42630371" class="c"><input type="checkbox" id="c-42630371" checked=""/><div class="controls bullet"><span class="by">aleph_minus_one</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42629068">parent</a><span>|</span><a href="#42632228">prev</a><span>|</span><a href="#42630072">next</a><span>|</span><label class="collapse" for="c-42630371">[-]</label><label class="expand" for="c-42630371">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I believe that most engineers want to write good code<p>But the opinion what makes code good differ a lot between software developers. This exactly leads to many of the inconsistencies in the code.</div><br/></div></div><div id="42630072" class="c"><input type="checkbox" id="c-42630072" checked=""/><div class="controls bullet"><span class="by">darepublic</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42629068">parent</a><span>|</span><a href="#42630371">prev</a><span>|</span><a href="#42629865">next</a><span>|</span><label class="collapse" for="c-42630072">[-]</label><label class="expand" for="c-42630072">[10 more]</label></div><br/><div class="children"><div class="content">doing some recent contract work I discovered someone putting this into a PR (comments my own)<p>```<p>let susJsonString = &#x27;...&#x27; &#x2F;&#x2F; we get this parseable json string from somwhere but of course it might not be parseable.  so testing seems warranted...<p>try {
&#x2F;&#x2F; lets bust out a while loop!<p>while(typeof susJsonString === &#x27;string&#x27;) {
  susJsonString = JSON.parse(susJsonString) 
}<p>} catch {
  susJsonString = {} 
}<p>&#x2F;&#x2F; also this was a typescript codebase but all the more reason to have a variable switch types!  this dev undoubtedly puts typescript at the top of their resume<p>```<p>I suppose this works?! I haven&#x27;t thought it through carefully, it&#x27;s just deciding to put your shoes on backward, and open doors while standing on your head.   But I decided to just keep out of it, not get involved in the politics.  I guess this is what getting old is like seriously you just see younger people doing stuff that makes your jaw drop from the stupidity (or maybe its just me)  but you can&#x27;t say anything because reasons.  Copilot, ai assisted coding only further muddies the waters imo.</div><br/><div id="42630120" class="c"><input type="checkbox" id="c-42630120" checked=""/><div class="controls bullet"><span class="by">liontwist</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42630072">parent</a><span>|</span><a href="#42629865">next</a><span>|</span><label class="collapse" for="c-42630120">[-]</label><label class="expand" for="c-42630120">[9 more]</label></div><br/><div class="children"><div class="content">This is totally fine.  If you&#x27;re given shit data this seems like a reasonable way to try to parse it (I would personally bound the loop).<p>Typescript is not going to make it better.<p>The problem is whoever is producing the data.</div><br/><div id="42630500" class="c"><input type="checkbox" id="c-42630500" checked=""/><div class="controls bullet"><span class="by">bryanrasmussen</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42630120">parent</a><span>|</span><a href="#42631463">next</a><span>|</span><label class="collapse" for="c-42630500">[-]</label><label class="expand" for="c-42630500">[6 more]</label></div><br/><div class="children"><div class="content">I think the complaint here is they have a string, which even has the word string in the variable name, and they turn it into an object at the end. Hence references to Typescript.<p>I suppose what is wanted is something like<p>let parsedJSON = {}<p>try {
parsedJSON = JSON.parse(susJsonString) } catch {
 &#x2F;&#x2F;maybe register problem with parsing. 
}</div><br/><div id="42630877" class="c"><input type="checkbox" id="c-42630877" checked=""/><div class="controls bullet"><span class="by">accoil</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42630500">parent</a><span>|</span><a href="#42630949">next</a><span>|</span><label class="collapse" for="c-42630877">[-]</label><label class="expand" for="c-42630877">[4 more]</label></div><br/><div class="children"><div class="content">That&#x27;s quite different though. It looks to be dealing with the case that a serialised object gets serialiased multiple times before it reaches that point of code, so it needs to keep deserialising until it gets a real object. E.g:<p><pre><code>    JSON.parse(JSON.parse(&quot;\&quot;{foo: 1}\&quot;&quot;))
</code></pre>
I&#x27;d guess the problem is something upstream.</div><br/><div id="42632026" class="c"><input type="checkbox" id="c-42632026" checked=""/><div class="controls bullet"><span class="by">bryanrasmussen</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42630877">parent</a><span>|</span><a href="#42631491">next</a><span>|</span><label class="collapse" for="c-42632026">[-]</label><label class="expand" for="c-42632026">[1 more]</label></div><br/><div class="children"><div class="content">Hmm, yeah ok, didn&#x27;t pick this out of the<p>let susJsonString = &#x27;...&#x27;<p>example<p>but evidently it is not just that it is serialized multiple times, otherwise it shouldn&#x27;t need the try catch (of course one problem with online discussion of code examples is you must always assume, contra obvious errors, that the code actually needs what it has)<p>Something upstream, sure, but often not something &quot;fixable&quot;  either, given third parties and organizational headaches some places are prone to.</div><br/></div></div><div id="42631491" class="c"><input type="checkbox" id="c-42631491" checked=""/><div class="controls bullet"><span class="by">darepublic</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42630877">parent</a><span>|</span><a href="#42632026">prev</a><span>|</span><a href="#42630949">next</a><span>|</span><label class="collapse" for="c-42631491">[-]</label><label class="expand" for="c-42631491">[2 more]</label></div><br/><div class="children"><div class="content">The code is either going to loop once and exit or loop forever no</div><br/><div id="42631952" class="c"><input type="checkbox" id="c-42631952" checked=""/><div class="controls bullet"><span class="by">andrewf</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42631491">parent</a><span>|</span><a href="#42630949">next</a><span>|</span><label class="collapse" for="c-42631952">[-]</label><label class="expand" for="c-42631952">[1 more]</label></div><br/><div class="children"><div class="content">Putting this in my web console:<p><pre><code>  let susJsonString=JSON.stringify(JSON.stringify(JSON.stringify({foo:1})))
  console.log(&quot;initial:&quot;, susJsonString);
  try { 
    while(typeof susJsonString===&#x27;string&#x27;) {
        susJsonString = JSON.parse(susJsonString);
        console.log(&quot;iteration:&quot;, typeof susJsonString, susJsonString);
    }
  } catch {
    susJsonString = {};
  }
</code></pre>
I see:<p><pre><code>  initial: &quot;\&quot;{\\\&quot;foo\\\&quot;:1}\&quot;&quot;
  iteration: string &quot;{\&quot;foo\&quot;:1}&quot;
  iteration: string {&quot;foo&quot;:1}
  iteration: object {foo: 1}
</code></pre>
A comment explaining the sort of &quot;sus&quot; input it was designed to cope with may have been helpful.</div><br/></div></div></div></div></div></div></div></div><div id="42631463" class="c"><input type="checkbox" id="c-42631463" checked=""/><div class="controls bullet"><span class="by">darepublic</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42630120">parent</a><span>|</span><a href="#42630500">prev</a><span>|</span><a href="#42629865">next</a><span>|</span><label class="collapse" for="c-42631463">[-]</label><label class="expand" for="c-42631463">[2 more]</label></div><br/><div class="children"><div class="content">Why the while loop</div><br/><div id="42632004" class="c"><input type="checkbox" id="c-42632004" checked=""/><div class="controls bullet"><span class="by">otabdeveloper4</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42631463">parent</a><span>|</span><a href="#42629865">next</a><span>|</span><label class="collapse" for="c-42632004">[-]</label><label class="expand" for="c-42632004">[1 more]</label></div><br/><div class="children"><div class="content">Because some upstream idiot is calling JSON.stringify several times.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="42629865" class="c"><input type="checkbox" id="c-42629865" checked=""/><div class="controls bullet"><span class="by">citizenpaul</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42628959">parent</a><span>|</span><a href="#42629068">prev</a><span>|</span><a href="#42629667">next</a><span>|</span><label class="collapse" for="c-42629865">[-]</label><label class="expand" for="c-42629865">[5 more]</label></div><br/><div class="children"><div class="content">&gt;Not really my experience in teams that create inconsistent, undocumented codebases... but you might get 1 or 2 converts.<p>This has also been my experience.  Usually there is a &quot;Top&quot; sticky&#x2F;unhelpful&#x2F;reticent person.  They are not really a director or exec but they often act like it and seem immune from any repercussions from the actual higher ups.  This person tends to attract &quot;followers&quot; that know they will keep their jobs if they follow the sticky person for job security. There usually are a few up and coming people that want better that will kinda go along with you for their own skill building benefit but its all very shaky and you can&#x27;t count on them supporting you if resistance happens.<p>I&#x27;ve literally had the &quot;I was here before you and will be after&quot; speech from one of the &quot;sticky&#x27;s&quot; before.<p>All these HN how to do better write ups seem to universally ignore the issues of power and politics dynamics and give &quot;in a vacuum&quot; advice.  Recognizing a rock and a hard place and saving your sanity by not caring is a perfectly rational decision.</div><br/><div id="42630014" class="c"><input type="checkbox" id="c-42630014" checked=""/><div class="controls bullet"><span class="by">jimbokun</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42629865">parent</a><span>|</span><a href="#42630714">next</a><span>|</span><label class="collapse" for="c-42630014">[-]</label><label class="expand" for="c-42630014">[2 more]</label></div><br/><div class="children"><div class="content">Well HN was created as a forum for discussing start up best practices, which is all about disrupting big companies weighed down by internal politics.</div><br/><div id="42630874" class="c"><input type="checkbox" id="c-42630874" checked=""/><div class="controls bullet"><span class="by">awesome_dude</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42630014">parent</a><span>|</span><a href="#42630714">next</a><span>|</span><label class="collapse" for="c-42630874">[-]</label><label class="expand" for="c-42630874">[1 more]</label></div><br/><div class="children"><div class="content">The linked article is about dealing with legacy codebases with millions of lines of code.<p>The response is accurate - anyone that&#x27;s had to deal with a legacy code base has had to deal with the creators of said birds nest (who proudly strut around as though the trouble it causes to maintainability makes them &quot;clever&quot;).</div><br/></div></div></div></div><div id="42630714" class="c"><input type="checkbox" id="c-42630714" checked=""/><div class="controls bullet"><span class="by">peterldowns</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42629865">parent</a><span>|</span><a href="#42630014">prev</a><span>|</span><a href="#42629667">next</a><span>|</span><label class="collapse" for="c-42630714">[-]</label><label class="expand" for="c-42630714">[2 more]</label></div><br/><div class="children"><div class="content">I tried my best to offer a pragmatic recommendation for dealing with those sorts of people. I&#x27;d love to know what you would recommend instead?</div><br/><div id="42630881" class="c"><input type="checkbox" id="c-42630881" checked=""/><div class="controls bullet"><span class="by">awesome_dude</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42630714">parent</a><span>|</span><a href="#42629667">next</a><span>|</span><label class="collapse" for="c-42630881">[-]</label><label class="expand" for="c-42630881">[1 more]</label></div><br/><div class="children"><div class="content">IME it&#x27;s politics, so you need to find someone that the sticky person fears&#x2F;respects, and get them onboard.<p>The only other way I have succeeded is to appeal to the sticky person&#x27;s ego, make them think that it&#x27;s their idea.<p>Note: I have also had to deal with<p>Sticky person: Do it this way<p>Me: But X<p>Sticky Person: No, do it the way I have decreed<p>[...]<p>Three hours later (literally)<p>Sticky Person: Do it X way</div><br/></div></div></div></div></div></div><div id="42629667" class="c"><input type="checkbox" id="c-42629667" checked=""/><div class="controls bullet"><span class="by">LAC-Tech</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42628959">parent</a><span>|</span><a href="#42629865">prev</a><span>|</span><a href="#42629464">next</a><span>|</span><label class="collapse" for="c-42629667">[-]</label><label class="expand" for="c-42629667">[1 more]</label></div><br/><div class="children"><div class="content">ahh, there&#x27;s a lot of scenarios here.<p>in my scenario, those people were gone.</div><br/></div></div></div></div><div id="42629464" class="c"><input type="checkbox" id="c-42629464" checked=""/><div class="controls bullet"><span class="by">agentultra</span><span>|</span><a href="#42628594">parent</a><span>|</span><a href="#42628959">prev</a><span>|</span><a href="#42628676">next</a><span>|</span><label class="collapse" for="c-42629464">[-]</label><label class="expand" for="c-42629464">[2 more]</label></div><br/><div class="children"><div class="content">&gt; In this scenario, I&#x27;ve found that the only productive way forward is to do the best job you can, in your own isolated code, and share loudly and frequently why you&#x27;re doing things your new different way.<p>Now you have N+1 ways.<p>It can work if you manage to get a majority of a team to support your efforts, create good interfaces into the legacy code paths, and most importantly: write meaningful and useful integration tests against that interface.<p>Michael Feathers wrote a wonderful book about this called, <i>Working Effectively with Legacy Code</i>.<p>I think what the author is trying to say with consistency is to avoid adding even more paths, layers, and indirection in an already untested and difficult code base.<p>Work strategically, methodically, and communicate well as you say and it can be a real source of progress with an existing system.</div><br/><div id="42629800" class="c"><input type="checkbox" id="c-42629800" checked=""/><div class="controls bullet"><span class="by">peterldowns</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42629464">parent</a><span>|</span><a href="#42628676">next</a><span>|</span><label class="collapse" for="c-42629800">[-]</label><label class="expand" for="c-42629800">[1 more]</label></div><br/><div class="children"><div class="content">I’ll check out that book, thanks for the reference.</div><br/></div></div></div></div><div id="42628676" class="c"><input type="checkbox" id="c-42628676" checked=""/><div class="controls bullet"><span class="by">mgfist</span><span>|</span><a href="#42628594">parent</a><span>|</span><a href="#42629464">prev</a><span>|</span><a href="#42631769">next</a><span>|</span><label class="collapse" for="c-42628676">[-]</label><label class="expand" for="c-42628676">[10 more]</label></div><br/><div class="children"><div class="content">I rarely see large 10m+ LOC codebases with any sort of strong consistency. There are always flavors of implementations and patterns all over the place. Hell, it&#x27;s common to see some functionality implemented multiple times in different places</div><br/><div id="42628694" class="c"><input type="checkbox" id="c-42628694" checked=""/><div class="controls bullet"><span class="by">peterldowns</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42628676">parent</a><span>|</span><a href="#42629072">next</a><span>|</span><label class="collapse" for="c-42628694">[-]</label><label class="expand" for="c-42628694">[8 more]</label></div><br/><div class="children"><div class="content">And it&#x27;s fine, right? Honestly I think people need to realize that part of being a good engineer is being able to deal with inconsistency. Maybe submodule A and submodule B do network requests slightly differently but if both ways are reasonable, working, and making the company money, it&#x27;s probably not worth delaying product improvements in order to make things &quot;more consistent.&quot;<p>On the other hand if <i>no one in your company</i> cares about consistency, at some point everything becomes so awful you basically won&#x27;t be able to retain engineers or hire new ones, so this is a place where careful judgement is needed.</div><br/><div id="42629929" class="c"><input type="checkbox" id="c-42629929" checked=""/><div class="controls bullet"><span class="by">citizenpaul</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42628694">parent</a><span>|</span><a href="#42629697">next</a><span>|</span><label class="collapse" for="c-42629929">[-]</label><label class="expand" for="c-42629929">[2 more]</label></div><br/><div class="children"><div class="content">&gt;and it&#x27;s fine, right?<p>The hard part of being an engineer is realizing that sometimes even when something is horribly wrong people may not actually want it fixed.  I&#x27;ve seen systems where actual monetary loss was happening but no one wanted it brought to light because &quot;who gets blamed&quot;</div><br/><div id="42630023" class="c"><input type="checkbox" id="c-42630023" checked=""/><div class="controls bullet"><span class="by">jimbokun</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42629929">parent</a><span>|</span><a href="#42629697">next</a><span>|</span><label class="collapse" for="c-42630023">[-]</label><label class="expand" for="c-42630023">[1 more]</label></div><br/><div class="children"><div class="content">That’s always a strong signal to start polishing your resume.  Layoffs are probably just around the corner.</div><br/></div></div></div></div><div id="42629697" class="c"><input type="checkbox" id="c-42629697" checked=""/><div class="controls bullet"><span class="by">dasil003</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42628694">parent</a><span>|</span><a href="#42629929">prev</a><span>|</span><a href="#42629072">next</a><span>|</span><label class="collapse" for="c-42629697">[-]</label><label class="expand" for="c-42629697">[5 more]</label></div><br/><div class="children"><div class="content">Yeah 100%.  Honestly style &#x2F; technique &#x2F; language consistency are implementation details, it helps with engineer fungibility and ramp up, but it also works against engineers applying local judgement.  This is something to briefly consider when starting new services&#x2F;features, but definitely not something to optimize for in an existing system.<p>On the other hand, data and logic consistency can be really important, but you still have to pick your battles because it&#x27;s all tradeoffs.  I&#x27;ve done a lot of work in pricing over the decades, and it tends to be an area where the logic is complex and you need consistency across surfaces owned by many teams, but at the same time it will interact with local features that you don&#x27;t want to turn pricing libraries&#x2F;services into god objects as you start bottlenecking all kinds of tangentially related projects.  It&#x27;s a very tricky balance to get right.  My general rule of thumb is to anchor on user impact as the first order consideration, developer experience is important as a second order, but many engineers will over-index on things they are deeply familiar with and not be objective in their evaluation of the impact &#x2F; cost to other teams who pay an interaction cost but are not experts in the domain.</div><br/><div id="42629767" class="c"><input type="checkbox" id="c-42629767" checked=""/><div class="controls bullet"><span class="by">Supermancho</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42629697">parent</a><span>|</span><a href="#42629072">next</a><span>|</span><label class="collapse" for="c-42629767">[-]</label><label class="expand" for="c-42629767">[4 more]</label></div><br/><div class="children"><div class="content">A common experience (mostly in the Pacific North West) I have had is to implement a feature in a straightforward manner that works with minimal code, for some backlog issue. Then I&#x27;m told the PR will be looked at.<p>A couple days later I am told this is not the way to do X. You must do it Y? Why Y? Because of historical battles won and lost why, not because of a specific characteristic. My PR doesn&#x27;t work with Y and it would be more complicated...like who knows what multiplier of code to make it work. Well that makes it a harder task than your estimate, which is why nobody ever took it up before and was really excited about your low estimate.<p>How does Y work? Well it works specifically to prevent features like X. How am I supposed to know how to modify Y in a way that satisfies the invisible soft requirements? Someone more senior takes over my ticket, while I&#x27;m assigned unit tests. They end up writing a few hundred lines of code for Y2.0 then implement X with a copy paste of a few lines.<p>I must not be &quot;a good fit&quot;. Welcome to the next 6-12 months of not caring about this job at all, while I find another job without my resume starting to look like patchwork.<p>Challenging people&#x27;s egos by providing a simpler implementation for something someone says is very hard, has been effective at getting old stagnant issues completed. Unnaturally effective. Of course, those new &quot;right way&quot; features are just as ugly as any existing feature, ensuring the perpetuation of the code complexity. Continually writing themselves into corners they don&#x27;t want to mess with.</div><br/><div id="42630142" class="c"><input type="checkbox" id="c-42630142" checked=""/><div class="controls bullet"><span class="by">liontwist</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42629767">parent</a><span>|</span><a href="#42629912">next</a><span>|</span><label class="collapse" for="c-42630142">[-]</label><label class="expand" for="c-42630142">[1 more]</label></div><br/><div class="children"><div class="content">This sounds like you are missing important context. Here is a similar conversation:<p>&quot;Why do I have to use the system button class. I implemented my own and it works.&quot;<p>&quot;Because when the OS updates with new behavior your button may break or not get new styling and functionality&quot;<p>&quot;But this works and meets the spec, that&#x27;s 10x harder&quot;</div><br/></div></div><div id="42629912" class="c"><input type="checkbox" id="c-42629912" checked=""/><div class="controls bullet"><span class="by">dasil003</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42629767">parent</a><span>|</span><a href="#42630142">prev</a><span>|</span><a href="#42630008">next</a><span>|</span><label class="collapse" for="c-42629912">[-]</label><label class="expand" for="c-42629912">[1 more]</label></div><br/><div class="children"><div class="content">Hard for me to comment definitively here since I don&#x27;t have the other side of the story, but I will say that I have seen teams operating based on all kinds of assumed constraints where we lose sight of the ultimate objective of building systems that serve human needs.  I&#x27;ve definintely seen cases where the true cost of technical debt is over-represented due to a lack of trust between between business stakeholders and engineering, and those kind of scenarios could definintely lead to this kind of rote engineering policy detached from reality.  Without knowledge of your specific company and team I can&#x27;t offer any more specific advice other than to say that I think your viewpoint of the big picture sounds reasonable and would resonate in a healthy software company with competent leadership.  Your current company may not be that, but rest assured that such companies do exist!  Never lose that common sense grounding, as that way madness lies.  Good luck in finding a place where your experience and pragmatism is valued and recognized!</div><br/></div></div><div id="42630008" class="c"><input type="checkbox" id="c-42630008" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42629767">parent</a><span>|</span><a href="#42629912">prev</a><span>|</span><a href="#42629072">next</a><span>|</span><label class="collapse" for="c-42630008">[-]</label><label class="expand" for="c-42630008">[1 more]</label></div><br/><div class="children"><div class="content">I feel your pain.  But I guess you need to work harder on detecting these kinds of work places upfront, instead of joining them one after another?</div><br/></div></div></div></div></div></div></div></div><div id="42629072" class="c"><input type="checkbox" id="c-42629072" checked=""/><div class="controls bullet"><span class="by">wrs</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42628676">parent</a><span>|</span><a href="#42628694">prev</a><span>|</span><a href="#42631769">next</a><span>|</span><label class="collapse" for="c-42629072">[-]</label><label class="expand" for="c-42629072">[1 more]</label></div><br/><div class="children"><div class="content">And to be practical, that&#x27;s fine. In a big codebase it&#x27;s more important to encourage consistent, well-defined, small <i>interfaces</i>, and a clean separation of concerns, than to try to get consistency in the lower-level implementation details. Other non-code concerns like coordinating releases and migration of shared services are also way more important than getting everyone to use the same string library.<p>(Of course, if you carry that principle to the extreme you end up with a lot of  black-box networked microservices.)</div><br/></div></div></div></div><div id="42631769" class="c"><input type="checkbox" id="c-42631769" checked=""/><div class="controls bullet"><span class="by">whilenot-dev</span><span>|</span><a href="#42628594">parent</a><span>|</span><a href="#42628676">prev</a><span>|</span><a href="#42630111">next</a><span>|</span><label class="collapse" for="c-42631769">[-]</label><label class="expand" for="c-42631769">[1 more]</label></div><br/><div class="children"><div class="content">Consistency is never the sole reason to change something, there&#x27;s always consistency and at least one of the following:<p>- coherency<p>- type safety (shout-out to dynamically typed languages that adapted static typing)<p>- concurrency<p>- simplicity<p>- (and more)<p>&gt; If it&#x27;s actually better, others will start following your lead.<p>A lot of people don&#x27;t want to improve the quality in their output and for various reasons... some are happy to have something &quot;to pay the bills&quot;, some don&#x27;t want to use a programming language to its full extend, some have a deeply rooted paradigm that worked for 10 years already (&quot;static types won&#x27;t change that&quot;), others are scared of concurrency etc. For some people there&#x27;s nothing to worry about when a server can be blocked by a single request for 60 secs.</div><br/></div></div><div id="42630111" class="c"><input type="checkbox" id="c-42630111" checked=""/><div class="controls bullet"><span class="by">lamontcg</span><span>|</span><a href="#42628594">parent</a><span>|</span><a href="#42631769">prev</a><span>|</span><a href="#42630436">next</a><span>|</span><label class="collapse" for="c-42630111">[-]</label><label class="expand" for="c-42630111">[4 more]</label></div><br/><div class="children"><div class="content">It is terrible to just do this on your own, particularly as the n00b.<p>If there are 5 different standards in the codebase, don&#x27;t just invent your own better way of doing things.  That is literally the xkcd&#x2F;Standards problem.  Go find one of the people who have worked there the longest and ask which of the 5 existing standards are most modern and should be copied.<p>And as you get more experience with the codebase you can suggest updates to the best standard and evolve it.  The problem is that you then need to own updating that whole standard across the entire codebase.  That&#x27;s the hard part.<p>If you aren&#x27;t experienced enough with the codebase to be aggressive about standardization, you shouldn&#x27;t be creating some little playground of your own.</div><br/><div id="42630484" class="c"><input type="checkbox" id="c-42630484" checked=""/><div class="controls bullet"><span class="by">peterldowns</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42630111">parent</a><span>|</span><a href="#42630436">next</a><span>|</span><label class="collapse" for="c-42630484">[-]</label><label class="expand" for="c-42630484">[3 more]</label></div><br/><div class="children"><div class="content">&gt; If there are 5 different standards in the codebase, don&#x27;t just invent your own better way of doing things. That is literally the xkcd&#x2F;Standards problem. Go find one of the people who have worked there the longest and ask which of the 5 existing standards are most modern and should be copied.<p>I strongly disagree with you and believe you&#x27;ve missed the point of my comment. Think about this: why are there 5 different standards in the codebase, none of which meet your needs? Do you think any engineers on the team are aware of this situation? And how might you get more experience with the codebase without writing code that solves your problems?</div><br/><div id="42631857" class="c"><input type="checkbox" id="c-42631857" checked=""/><div class="controls bullet"><span class="by">baq</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42630484">parent</a><span>|</span><a href="#42630767">next</a><span>|</span><label class="collapse" for="c-42631857">[-]</label><label class="expand" for="c-42631857">[1 more]</label></div><br/><div class="children"><div class="content">People who created 3 of the 5 no longer work at the company, test coverage is minimal or nonexistent and the system mostly does what it’s supposed to.<p>In this situation, ‘getting more experience in the code base’ is more or less synonymous with ‘getting paged on the weekend’.</div><br/></div></div><div id="42630767" class="c"><input type="checkbox" id="c-42630767" checked=""/><div class="controls bullet"><span class="by">jiggawatts</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42630484">parent</a><span>|</span><a href="#42631857">prev</a><span>|</span><a href="#42630436">next</a><span>|</span><label class="collapse" for="c-42630767">[-]</label><label class="expand" for="c-42630767">[1 more]</label></div><br/><div class="children"><div class="content">“Time” is the answer almost always.<p>Standards evolve over time, as do the languages and frameworks. Old code is rarely rewritten, so you end up with layers of code like geological strata recording the history of the developer landscape.<p>There’s a more complicated aspect of “Conway’s law, <i>but over time</i>” that’s hard to explain in a comment. And anyway, Casey Muratori did it better: <a href="https:&#x2F;&#x2F;youtu.be&#x2F;5IUj1EZwpJY?si=hnrKXeknMCe0UPv4" rel="nofollow">https:&#x2F;&#x2F;youtu.be&#x2F;5IUj1EZwpJY?si=hnrKXeknMCe0UPv4</a></div><br/></div></div></div></div></div></div><div id="42630436" class="c"><input type="checkbox" id="c-42630436" checked=""/><div class="controls bullet"><span class="by">stravant</span><span>|</span><a href="#42628594">parent</a><span>|</span><a href="#42630111">prev</a><span>|</span><a href="#42630019">next</a><span>|</span><label class="collapse" for="c-42630436">[-]</label><label class="expand" for="c-42630436">[1 more]</label></div><br/><div class="children"><div class="content">Sometimes people are too afraid of attempting to make it consistent.<p>I&#x27;ve done several migrations of thing with dozens of unique bespoke usage patterns back to a nice consistent approach.<p>It sometimes takes a couple straight days of just raw focused code munging, and doesn&#x27;t always end up being viable, but it&#x27;s worth a shot for how much better a state it can leave things in.</div><br/></div></div><div id="42630019" class="c"><input type="checkbox" id="c-42630019" checked=""/><div class="controls bullet"><span class="by">darepublic</span><span>|</span><a href="#42628594">parent</a><span>|</span><a href="#42630436">prev</a><span>|</span><a href="#42631990">next</a><span>|</span><label class="collapse" for="c-42630019">[-]</label><label class="expand" for="c-42630019">[2 more]</label></div><br/><div class="children"><div class="content">My last experience with this, in the section of code I had to navigate for my first ticket at startup X we had some code that was querying the same tables multiple times unnecessarily.  We were also using a highly bespoke (imo) code library with a relatively small following on github but this library permeated the entire codebase and dictated the way things had to be done. I tried to just make my changes by touching the code as little as possible, but avoiding the most outstanding inefficiencies.  I thought of my changes as a small oasis of sanity in a desert of madness.  In that first PR the seniors tore me a new one.  It turned out there was a v2 of &quot;the right way of doing things&quot; that I had to learn about and then write my code to conform to. v2 had it&#x27;s own issues, though was perhaps not as bad as v1. Later on when I became more influential I was able to successfully advocate to management to change many things to my liking, including axing the beloved exotic library that distinguished our codebase.  But the old guard remained highly resistant to changing the way our code was written, and switched their stance from &#x27;this is great&#x27; to, &#x27;it sucks but its too much effort not to keep with it&#x27;.  I am left feeling that it was all not worth it, not just the struggle but whether the product was appreciably effected one way or another.  Just another crappy war story of my blighted career.</div><br/><div id="42630060" class="c"><input type="checkbox" id="c-42630060" checked=""/><div class="controls bullet"><span class="by">dirtbag__dad</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42630019">parent</a><span>|</span><a href="#42631990">next</a><span>|</span><label class="collapse" for="c-42630060">[-]</label><label class="expand" for="c-42630060">[1 more]</label></div><br/><div class="children"><div class="content">This resonates hard. In particular, managing the old guard’s emotions is a defeating process. It is almost always easier to jump into a project and critique it than it is to start from scratch. New perspectives and better ideas should be welcome, but instead they can be shut down because folks take things personally.<p>My (rather unfortunate) conclusion is that when I encounter this behavior I move to another team to avoid it. If that’s not possible it’s honestly worth looking for another job.</div><br/></div></div></div></div><div id="42631990" class="c"><input type="checkbox" id="c-42631990" checked=""/><div class="controls bullet"><span class="by">virgilp</span><span>|</span><a href="#42628594">parent</a><span>|</span><a href="#42630019">prev</a><span>|</span><a href="#42629217">next</a><span>|</span><label class="collapse" for="c-42631990">[-]</label><label class="expand" for="c-42631990">[1 more]</label></div><br/><div class="children"><div class="content">Relevant xkcd: <a href="https:&#x2F;&#x2F;xkcd.com&#x2F;927&#x2F;" rel="nofollow">https:&#x2F;&#x2F;xkcd.com&#x2F;927&#x2F;</a></div><br/></div></div><div id="42629217" class="c"><input type="checkbox" id="c-42629217" checked=""/><div class="controls bullet"><span class="by">HideousKojima</span><span>|</span><a href="#42628594">parent</a><span>|</span><a href="#42631990">prev</a><span>|</span><a href="#42631234">next</a><span>|</span><label class="collapse" for="c-42629217">[-]</label><label class="expand" for="c-42629217">[2 more]</label></div><br/><div class="children"><div class="content">My approach is what I call defensive programming, with a different meaning than the usual usage of the term. I assume that my coworkers are idiots that aren&#x27;t going to read my documentation, so I make all public classes and methods etc. as idiot-proof as possible to use. Hasn&#x27;t saved me from every issue caused by my teammates never reading my docs or asking me questions, but it&#x27;s definitely prevented several.</div><br/><div id="42629944" class="c"><input type="checkbox" id="c-42629944" checked=""/><div class="controls bullet"><span class="by">staunton</span><span>|</span><a href="#42628594">root</a><span>|</span><a href="#42629217">parent</a><span>|</span><a href="#42631234">next</a><span>|</span><label class="collapse" for="c-42629944">[-]</label><label class="expand" for="c-42629944">[1 more]</label></div><br/><div class="children"><div class="content">&gt; assume that my coworkers are idiots<p>I know (most?) people don&#x27;t mean it literally when writing something like this but I still wonder why such self-evident ideas as &quot;make things easy to use correctly and hard to use incorrectly&quot; are framed in terms of &quot;idiots who don&#x27;t rtfm&quot;.<p>The best documentation is what wasn&#x27;t written because it (actually!) wasn&#x27;t needed. On the other hand, even if people aren&#x27;t &quot;idiots&quot;, they still make mistakes and take time to figure out (perhaps by reading tfm) how to do things and complete their tasks, all of which has a cost. Making this easier is a clear benefit.</div><br/></div></div></div></div><div id="42631234" class="c"><input type="checkbox" id="c-42631234" checked=""/><div class="controls bullet"><span class="by">bandrami</span><span>|</span><a href="#42628594">parent</a><span>|</span><a href="#42629217">prev</a><span>|</span><a href="#42628667">next</a><span>|</span><label class="collapse" for="c-42631234">[-]</label><label class="expand" for="c-42631234">[1 more]</label></div><br/><div class="children"><div class="content">&quot;Now we have <i>five</i> inconsistent coding conventions...&quot;</div><br/></div></div></div></div><div id="42628400" class="c"><input type="checkbox" id="c-42628400" checked=""/><div class="controls bullet"><span class="by">mjr00</span><span>|</span><a href="#42628594">prev</a><span>|</span><a href="#42632338">next</a><span>|</span><label class="collapse" for="c-42628400">[-]</label><label class="expand" for="c-42628400">[20 more]</label></div><br/><div class="children"><div class="content">&gt; The other reason is that you cannot split up a large established codebase without first understanding it. I have seen large codebases successfully split up, but I have never seen that done by a team that wasn’t already fluent at shipping features inside the large codebase. You simply cannot redesign any non-trivial project (i.e. a project that makes real money) from first-principles.<p>This resonates. At one former company, there was a clear divide between the people working on the &quot;legacy monolith&quot; in PHP and the &quot;scalable microservices&quot; in Scala&#x2F;Go. One new Scala team was tasked with extracting permissions management from the monolith into a separate service. Was estimated to take 6-9 months. 18 months later, project was canned without delivering anything. The team was starting from scratch and had no experience working with the current monolith permissions model and could not get it successfully integrated. Every time an integration was attempted they found a new edge case that was totally incompatible with the nice, &quot;clean&quot; model they had created with the new service.</div><br/><div id="42630297" class="c"><input type="checkbox" id="c-42630297" checked=""/><div class="controls bullet"><span class="by">newaccountman2</span><span>|</span><a href="#42628400">parent</a><span>|</span><a href="#42628638">next</a><span>|</span><label class="collapse" for="c-42630297">[-]</label><label class="expand" for="c-42630297">[7 more]</label></div><br/><div class="children"><div class="content">Am I naive for thinking that nothing like that should take as long as 6-9 months in the happy case and that it&#x27;s absurd for it to not succeed at all?</div><br/><div id="42631270" class="c"><input type="checkbox" id="c-42631270" checked=""/><div class="controls bullet"><span class="by">Aeolun</span><span>|</span><a href="#42628400">root</a><span>|</span><a href="#42630297">parent</a><span>|</span><a href="#42631843">next</a><span>|</span><label class="collapse" for="c-42631270">[-]</label><label class="expand" for="c-42631270">[1 more]</label></div><br/><div class="children"><div class="content">Maybe. There&#x27;s a lot of dragons hidden inside enterprise code. Only if you know all of them can you really succeed the first time around.</div><br/></div></div><div id="42631843" class="c"><input type="checkbox" id="c-42631843" checked=""/><div class="controls bullet"><span class="by">000ooo000</span><span>|</span><a href="#42628400">root</a><span>|</span><a href="#42630297">parent</a><span>|</span><a href="#42631270">prev</a><span>|</span><a href="#42631877">next</a><span>|</span><label class="collapse" for="c-42631843">[-]</label><label class="expand" for="c-42631843">[1 more]</label></div><br/><div class="children"><div class="content">You know so little about the team, the organisation, the codebase, other concurrent obligations (e.g. prod support), and the way the project is run. The only way I can imagine one having confidence in a statement like &quot;nothing should take that long&quot; is naïveté.</div><br/></div></div><div id="42631877" class="c"><input type="checkbox" id="c-42631877" checked=""/><div class="controls bullet"><span class="by">baq</span><span>|</span><a href="#42628400">root</a><span>|</span><a href="#42630297">parent</a><span>|</span><a href="#42631843">prev</a><span>|</span><a href="#42631900">next</a><span>|</span><label class="collapse" for="c-42631877">[-]</label><label class="expand" for="c-42631877">[1 more]</label></div><br/><div class="children"><div class="content">Authz can make the most otherwise trivial features into a depressing journey in the valley of edge cases.</div><br/></div></div><div id="42631900" class="c"><input type="checkbox" id="c-42631900" checked=""/><div class="controls bullet"><span class="by">mjr00</span><span>|</span><a href="#42628400">root</a><span>|</span><a href="#42630297">parent</a><span>|</span><a href="#42631877">prev</a><span>|</span><a href="#42631932">next</a><span>|</span><label class="collapse" for="c-42631900">[-]</label><label class="expand" for="c-42631900">[1 more]</label></div><br/><div class="children"><div class="content">It really depends. Honestly 6-9 months would have been an optimistic estimate even if it were 2-4 devs intimately familiar with the existing codebase. Permissions is a very cross-cutting concern, as you might imagine, and touched a huge amount of the monolith code. A big problem was that permissions checks weren&#x27;t done in a consistent layer, instead scattered all over the place, and the team responsible for the rewrite, being new to the code, was starting from scratch and finding these landmines as they went. Scoping was also unclear and kept changing as the project went along, at first to pull in <i>more</i> scope that was peripherally related, then to push stuff out of scope as the project went off track. And during all these changes you have to keep the existing auth system working with zero downtime.<p>The devs were good developers, too! Two people on the team went off to Google after, so it&#x27;s not like this was due to total incompetence or anything; more just overambition and lack of familiarity with working on legacy code.</div><br/></div></div><div id="42631932" class="c"><input type="checkbox" id="c-42631932" checked=""/><div class="controls bullet"><span class="by">yid</span><span>|</span><a href="#42628400">root</a><span>|</span><a href="#42630297">parent</a><span>|</span><a href="#42631900">prev</a><span>|</span><a href="#42630333">next</a><span>|</span><label class="collapse" for="c-42631932">[-]</label><label class="expand" for="c-42631932">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Am I naive for thinking that nothing like that should take as long as 6-9 months in the happy case and that it&#x27;s absurd for it to not succeed at all?<p>Bluntly, yes. And so is every other reply to you that says &quot;no this isn&#x27;t naive&quot;, or &quot;there&#x27;s no reason this project shouldn&#x27;t have finished&quot;. All that means is that you&#x27;ve not seen a truly &quot;enterprise&quot; codebase that may be bringing in tons of business value, but whose internals are a true human centipede of bad practices and organic tendrils of doing things the wrong way.</div><br/></div></div><div id="42630333" class="c"><input type="checkbox" id="c-42630333" checked=""/><div class="controls bullet"><span class="by">murkt</span><span>|</span><a href="#42628400">root</a><span>|</span><a href="#42630297">parent</a><span>|</span><a href="#42631932">prev</a><span>|</span><a href="#42628638">next</a><span>|</span><label class="collapse" for="c-42630333">[-]</label><label class="expand" for="c-42630333">[1 more]</label></div><br/><div class="children"><div class="content">No, you’re not naive. If it’s done by one-two people that know what they’re doing, it should be done much faster.<p>If it’s a big new team that doesn’t know what they’re doing, working separately from existing codebase, with lots of meetings… I see no reason why it would finish at all.</div><br/></div></div></div></div><div id="42628638" class="c"><input type="checkbox" id="c-42628638" checked=""/><div class="controls bullet"><span class="by">cratermoon</span><span>|</span><a href="#42628400">parent</a><span>|</span><a href="#42630297">prev</a><span>|</span><a href="#42632338">next</a><span>|</span><label class="collapse" for="c-42628638">[-]</label><label class="expand" for="c-42628638">[12 more]</label></div><br/><div class="children"><div class="content">I worked at a company that had a Rails monolith that underwent similar scenario. A new director of engineering brought in a half dozen or of his friends from his previous employer to write Scala. They formed up a clique and decide Things Were Going to Change. Some 18 months and 3 projects later, nothing they worked on was in production. Meanwhile the developer that was quietly doing ongoing maintenance on the monolith had gradually broken out some key performance-critical elements into Scala and migrated away from the Ruby code for those features. Not only had it gone into production, it made maintenance far easier.</div><br/><div id="42628832" class="c"><input type="checkbox" id="c-42628832" checked=""/><div class="controls bullet"><span class="by">mjr00</span><span>|</span><a href="#42628400">root</a><span>|</span><a href="#42628638">parent</a><span>|</span><a href="#42629688">next</a><span>|</span><label class="collapse" for="c-42628832">[-]</label><label class="expand" for="c-42628832">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Meanwhile the developer that was quietly doing ongoing maintenance on the monolith had gradually broken out some key performance-critical elements into Scala and migrated away from the Ruby code for those features.<p>Yep and that&#x27;s what I&#x27;ve seen be successful: someone who <i>really</i> knows the existing code inside and out, warts and all, needs to be a key leader for the part being broken out into a separate system. The hard part isn&#x27;t building the new system in these projects, it&#x27;s the integration into the existing system, which always requires a ton of refactoring work.</div><br/><div id="42630634" class="c"><input type="checkbox" id="c-42630634" checked=""/><div class="controls bullet"><span class="by">cratermoon</span><span>|</span><a href="#42628400">root</a><span>|</span><a href="#42628832">parent</a><span>|</span><a href="#42629688">next</a><span>|</span><label class="collapse" for="c-42630634">[-]</label><label class="expand" for="c-42630634">[2 more]</label></div><br/><div class="children"><div class="content">&gt; needs to be a key leader for the part being broken out into a separate system<p>Indeed, the developer was one of the best programmers I&#x27;ve known
and absolutely the key person on the system.
The New Guys Clique were the sort of developers,
you might know some,
who come in, look at the existing systems, decide it&#x27;s all wrong and terrible, and set out to Do It Right.</div><br/><div id="42630832" class="c"><input type="checkbox" id="c-42630832" checked=""/><div class="controls bullet"><span class="by">usefulcat</span><span>|</span><a href="#42628400">root</a><span>|</span><a href="#42630634">parent</a><span>|</span><a href="#42629688">next</a><span>|</span><label class="collapse" for="c-42630832">[-]</label><label class="expand" for="c-42630832">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve seen almost this exact scenario play out, although in my case it was just one person as opposed to a clique. He had just come from a much larger company in the same business, and almost right away he proposed that we should rearchitect a significant portion of our software to match the way things were done at his previous employer.<p>His proposed architecture wasn&#x27;t without elegance, but it was also more complex and, more importantly, it didn&#x27;t solve any problems that we actually had. So in the end it was more of an ideological thing.<p>He seemed to take it personally that we didn&#x27;t take him up on his proposal, and he left a few months later (and went back to his previous employer, though to a different group). Don&#x27;t think he was around for even a year. He wasn&#x27;t young either; he was pretty experienced.</div><br/></div></div></div></div></div></div><div id="42629688" class="c"><input type="checkbox" id="c-42629688" checked=""/><div class="controls bullet"><span class="by">photonthug</span><span>|</span><a href="#42628400">root</a><span>|</span><a href="#42628638">parent</a><span>|</span><a href="#42628832">prev</a><span>|</span><a href="#42629128">next</a><span>|</span><label class="collapse" for="c-42629688">[-]</label><label class="expand" for="c-42629688">[3 more]</label></div><br/><div class="children"><div class="content">Even if you’re generally suspicious of so called best practice&#x2F; design patterns &#x2F; Martin Fowlerisms.. this is a time for the strangler approach. (Parent and siblings are already talking about the same idea without naming it.)<p>Rewrites from scratch never work with sufficiently large systems, and anyone that’s been involved with these things should be savvy enough to recognize this.  The only question is around the exact definition of sufficiently large for a given context.<p><a href="https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Strangler_fig_pattern" rel="nofollow">https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Strangler_fig_pattern</a></div><br/><div id="42629874" class="c"><input type="checkbox" id="c-42629874" checked=""/><div class="controls bullet"><span class="by">mjr00</span><span>|</span><a href="#42628400">root</a><span>|</span><a href="#42629688">parent</a><span>|</span><a href="#42629128">next</a><span>|</span><label class="collapse" for="c-42629874">[-]</label><label class="expand" for="c-42629874">[2 more]</label></div><br/><div class="children"><div class="content">A similar, more concrete approach is parallel implementations, as written about by John Carmack[0]. I suppose the main difference is that parallel implementation has you very explicitly and intentionally leave the &quot;old stuff&quot; around until you&#x27;re ready to flip the switch. I&#x27;ve used this approach in large-scale refactorings very successfully.<p>One of the benefits is that you get to compare the new vs old implementation quickly and easily, and it lets you raise questions about the old implementation; every time I&#x27;ve done this I&#x27;ve found real, production-impacting bugs because the old system was exhibiting behaviors that didn&#x27;t match the new system, and it turned out they weren&#x27;t intentional!<p>[0] <a href="http:&#x2F;&#x2F;sevangelatos.com&#x2F;john-carmack-on-parallel-implementations&#x2F;" rel="nofollow">http:&#x2F;&#x2F;sevangelatos.com&#x2F;john-carmack-on-parallel-implementat...</a></div><br/><div id="42630762" class="c"><input type="checkbox" id="c-42630762" checked=""/><div class="controls bullet"><span class="by">Tknl</span><span>|</span><a href="#42628400">root</a><span>|</span><a href="#42629874">parent</a><span>|</span><a href="#42629128">next</a><span>|</span><label class="collapse" for="c-42630762">[-]</label><label class="expand" for="c-42630762">[1 more]</label></div><br/><div class="children"><div class="content">I second this approach. I&#x27;ve utilized it successfully in an ongoing migration. I also second the need to have engineering knowledge from the previous system available. I was lead for 5 years on a previous system before being tasked as solution architect of new total rewrite to cloud native. The hardest part of such a migration is maintaining sponsor buy-in while you build the parallel run evaluation strangler fig integration with the old system and get some existing flow polished enough to take live. If you happen to have a rule or scripting system in place piggy pack off of it so you can do an incremental migration.</div><br/></div></div></div></div></div></div><div id="42629128" class="c"><input type="checkbox" id="c-42629128" checked=""/><div class="controls bullet"><span class="by">harrall</span><span>|</span><a href="#42628400">root</a><span>|</span><a href="#42628638">parent</a><span>|</span><a href="#42629688">prev</a><span>|</span><a href="#42628710">next</a><span>|</span><label class="collapse" for="c-42629128">[-]</label><label class="expand" for="c-42629128">[3 more]</label></div><br/><div class="children"><div class="content">Also an issue is that the director attempted a full rewrite as a separate project.<p>You can do successful rewrites but your rewrite has to be usable in production within like a month.<p>If you don’t know how to achieve that, don’t even try.<p>The quiet developer was able to get their own rewrite done because they understood that.<p>Looks like the director of engineering showed some classic inexperience. You can tell when someone has done something before and when it’s their first time.</div><br/><div id="42630679" class="c"><input type="checkbox" id="c-42630679" checked=""/><div class="controls bullet"><span class="by">cratermoon</span><span>|</span><a href="#42628400">root</a><span>|</span><a href="#42629128">parent</a><span>|</span><a href="#42629673">next</a><span>|</span><label class="collapse" for="c-42630679">[-]</label><label class="expand" for="c-42630679">[1 more]</label></div><br/><div class="children"><div class="content">&gt; a full rewrite as a separate project.<p>And it was never constrained to rewriting the existing system.
The rewrite plan was motivated by the entirely reasonable desire to make further improvements possible,
an additional mistake was the attempt to add major improvements as part of the rewrite.
The new guys made their disdain for the existing system obvious,
to the extent that their intent for the rewrite ballooned into a ground-up rebuild of everything.<p>Things You Should Never Do, Part I: <a href="https:&#x2F;&#x2F;www.joelonsoftware.com&#x2F;2000&#x2F;04&#x2F;06&#x2F;things-you-should-never-do-part-i&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.joelonsoftware.com&#x2F;2000&#x2F;04&#x2F;06&#x2F;things-you-should-...</a></div><br/></div></div><div id="42629673" class="c"><input type="checkbox" id="c-42629673" checked=""/><div class="controls bullet"><span class="by">LAC-Tech</span><span>|</span><a href="#42628400">root</a><span>|</span><a href="#42629128">parent</a><span>|</span><a href="#42630679">prev</a><span>|</span><a href="#42628710">next</a><span>|</span><label class="collapse" for="c-42629673">[-]</label><label class="expand" for="c-42629673">[1 more]</label></div><br/><div class="children"><div class="content">literally what I wanted to do as an opinionated junior</div><br/></div></div></div></div><div id="42629664" class="c"><input type="checkbox" id="c-42629664" checked=""/><div class="controls bullet"><span class="by">LAC-Tech</span><span>|</span><a href="#42628400">root</a><span>|</span><a href="#42628638">parent</a><span>|</span><a href="#42628710">prev</a><span>|</span><a href="#42632338">next</a><span>|</span><label class="collapse" for="c-42629664">[-]</label><label class="expand" for="c-42629664">[1 more]</label></div><br/><div class="children"><div class="content">This is the way. You absolutely can turn shit codebases into something nicer and faster, and this is best done by people who know the system, and maybe even more important, knows the operational context the system exists in.<p>I once came into an old codebase like this as a junior, thinking I can start again. And I was gently but firmly told by my boss that it wouldn&#x27;t work, this software is crucial to operations that support all our revenue, and while it can be improved it has to keep working. And we improved the hell out of it.</div><br/></div></div></div></div></div></div><div id="42632338" class="c"><input type="checkbox" id="c-42632338" checked=""/><div class="controls bullet"><span class="by">quick_brown_fox</span><span>|</span><a href="#42628400">prev</a><span>|</span><a href="#42628861">next</a><span>|</span><label class="collapse" for="c-42632338">[-]</label><label class="expand" for="c-42632338">[1 more]</label></div><br/><div class="children"><div class="content">I mostly agree, however experienced a different challenge exactly for the very reason of consistency:<p>I used to work within the Chromium codebase (at the order of 10s of million LOC) and the parts I worked in were generally in line with Google&#x27;s style guide, i.e. consistent and of decent quality. The challenge was to identify legacy patterns that shouldn&#x27;t be imitated or cargo-culted for the sake of consistency.<p>In practice that meant having an up to date knowledge of coding standards in order to not perpetuate anti-patterns in the name of consistency.</div><br/></div></div><div id="42628861" class="c"><input type="checkbox" id="c-42628861" checked=""/><div class="controls bullet"><span class="by">pablobaz</span><span>|</span><a href="#42632338">prev</a><span>|</span><a href="#42632181">next</a><span>|</span><label class="collapse" for="c-42628861">[-]</label><label class="expand" for="c-42628861">[3 more]</label></div><br/><div class="children"><div class="content">In my experience with very large codebases, a common problem is devs trying to improve random things.<p>This is well intentioned. But in a large old codebase finding things to improve is trivial - there are thousands of them. Finding and judging which things to improve that will actually have a real positive impact is the real skill.<p>The terminal case of this is developers who in the midst of another task try improve one little bit but pulling on that thread leads to them attempting bigger and bigger fixes that are never completed.<p>Knowing what to fix and when to stop is invaluable.</div><br/><div id="42632312" class="c"><input type="checkbox" id="c-42632312" checked=""/><div class="controls bullet"><span class="by">Kinrany</span><span>|</span><a href="#42628861">parent</a><span>|</span><a href="#42630064">next</a><span>|</span><label class="collapse" for="c-42632312">[-]</label><label class="expand" for="c-42632312">[1 more]</label></div><br/><div class="children"><div class="content">Do you think boyscouting, &quot;leave it better than you found it&quot; is misguided as well?</div><br/></div></div><div id="42630064" class="c"><input type="checkbox" id="c-42630064" checked=""/><div class="controls bullet"><span class="by">jimbokun</span><span>|</span><a href="#42628861">parent</a><span>|</span><a href="#42632312">prev</a><span>|</span><a href="#42632181">next</a><span>|</span><label class="collapse" for="c-42630064">[-]</label><label class="expand" for="c-42630064">[1 more]</label></div><br/><div class="children"><div class="content">Which can lead to trying to rewrite Netscape Navigator from scratch and killing the company:<p><a href="https:&#x2F;&#x2F;www.joelonsoftware.com&#x2F;2000&#x2F;04&#x2F;06&#x2F;things-you-should-never-do-part-i&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.joelonsoftware.com&#x2F;2000&#x2F;04&#x2F;06&#x2F;things-you-should-...</a></div><br/></div></div></div></div><div id="42632181" class="c"><input type="checkbox" id="c-42632181" checked=""/><div class="controls bullet"><span class="by">KronisLV</span><span>|</span><a href="#42628861">prev</a><span>|</span><a href="#42631131">next</a><span>|</span><label class="collapse" for="c-42632181">[-]</label><label class="expand" for="c-42632181">[3 more]</label></div><br/><div class="children"><div class="content">&gt; If they use some specific set of helpers, you should also use that helper (even if it’s ugly, hard to integrate with, or seems like overkill for your use case). You must resist the urge to make your little corner of the codebase nicer than the rest of it.<p>This reads like an admission of established&#x2F;legacy codebases somewhat sucking to work with, in addition to there being a ceiling for how quickly you can iterate, if you do care about consistency.<p>I don&#x27;t think that the article is wrong, merely felt like pointing that out - building a new service&#x2F;codebase that doesn&#x27;t rely on 10 years old practices or code touched by dozens of developers will <i>often</i> be far more pleasant, especially when the established solution doesn&#x27;t always have the best DX (like docs that tell you about the 10 abstraction layers needed to get data from an incoming API call through the database and back to the user, and enough tests).<p>Plus, the more you couple things, the harder it will be to actually change anything, if you don&#x27;t have enough of the aforementioned test coverage - if I change how auth&#x2F;DB logic&#x2F;business rules are processed due to the need for some refactoring to enable new functionality, it might either go well or break in hundreds of places, or worse yet, break in just a few untested places that aren&#x27;t obvious yet, but might start misbehaving and lead to greater problems down the road. That coupling will turn your hair gray.</div><br/><div id="42632266" class="c"><input type="checkbox" id="c-42632266" checked=""/><div class="controls bullet"><span class="by">olau</span><span>|</span><a href="#42632181">parent</a><span>|</span><a href="#42631131">next</a><span>|</span><label class="collapse" for="c-42632266">[-]</label><label class="expand" for="c-42632266">[2 more]</label></div><br/><div class="children"><div class="content">But if you see yourself as trying to make the world a better place, you&#x27;ll accept that because the large code base is actually doing a lot of good out there. The article discusses this at the end.</div><br/><div id="42632287" class="c"><input type="checkbox" id="c-42632287" checked=""/><div class="controls bullet"><span class="by">KronisLV</span><span>|</span><a href="#42632181">root</a><span>|</span><a href="#42632266">parent</a><span>|</span><a href="#42631131">next</a><span>|</span><label class="collapse" for="c-42632287">[-]</label><label class="expand" for="c-42632287">[1 more]</label></div><br/><div class="children"><div class="content">Sure, I can accept that, I&#x27;m not saying they&#x27;re all bad, just that they have very obvious drawbacks, same as projects that pick untested technologies and get burned when they cease to exist after a year.<p>&gt; Large codebases are worth working in because they usually pay your salary<p>Though remember that greenfield projects might also pay your salary and be better for your employability and enjoyment of your profession in some cases. They might be the minority in the job market, though.</div><br/></div></div></div></div></div></div><div id="42631131" class="c"><input type="checkbox" id="c-42631131" checked=""/><div class="controls bullet"><span class="by">Animats</span><span>|</span><a href="#42632181">prev</a><span>|</span><a href="#42632118">next</a><span>|</span><label class="collapse" for="c-42631131">[-]</label><label class="expand" for="c-42631131">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Single-digit million lines of code (~5M, let’s say)<p>&gt; Somewhere between 100 and 1000 engineers working on the same codebase<p>&gt; The first working version of the codebase is at least ten years old<p>That&#x27;s 5,000 to 50,000 lines of code per engineer. Not understaffed.
A worse problem is when you have that much code, but fewer people. Too few people for there to be someone who understands each part, and the original authors are long gone.
Doing anything requires reverse engineering something.
Learning the code base is time-consuming. It may be a year before someone new is productive.<p>Such a job may be a bad career move. You can spend a decade learning a one-off system, gaining skills useless in any other environment. Then it&#x27;s hard to change jobs. Your resume has none of the current buzzwords. This helps the employer to keep salaries down.</div><br/><div id="42631757" class="c"><input type="checkbox" id="c-42631757" checked=""/><div class="controls bullet"><span class="by">atmavatar</span><span>|</span><a href="#42631131">parent</a><span>|</span><a href="#42632118">next</a><span>|</span><label class="collapse" for="c-42631757">[-]</label><label class="expand" for="c-42631757">[1 more]</label></div><br/><div class="children"><div class="content">&gt; A worse problem is when you have that much code, but fewer people. Too few people for there to be someone who understands each part, and the original authors are long gone.<p>Maybe.<p>I spent most of my career at a small mom and pop shop where we had single-digit MLOC spanning 20-25 years but only 15-20 engineers working at any given time.  This wasn&#x27;t a problem, though, because turn-over was extremely low (the range in engineer count was mostly due to internships), so many of the original code owners were still around, and we spent some effort to spread out code ownership such that virtually all parts were well understood by at least 2 people at any given moment.<p>If anything, I rather shudder at the thought of working somewhere that <i>only</i> has ~5M lines of code split up amongst 100 (and especially 1000) engineers over a span of 10 years.  I can&#x27;t imagine producing only 5-50 KLOC over that time, even despite often engaging in behind-the-scenes competition with colleagues over who could produce pull requests with the least (and especially negative) net LOC.<p>&gt; Your resume has none of the current buzzwords.<p>That&#x27;s one of my bigger pet peeves about software development, actually.<p>While you probably didn&#x27;t mean it this way, over the years, I encountered a number of people who&#x27;d consistently attempt to insert fad technologies for the sake of doing so, rather than because they actually provided any kind of concrete benefit.  Quite the contrary: they often complicated code without any benefit whatsoever.  My more experienced colleagues snidely referred to it as resume-driven development.<p>I can&#x27;t hate people doing this <i>too</i> much, though, because our industry incentivizes job hopping.</div><br/></div></div></div></div><div id="42632118" class="c"><input type="checkbox" id="c-42632118" checked=""/><div class="controls bullet"><span class="by">praptak</span><span>|</span><a href="#42631131">prev</a><span>|</span><a href="#42629801">next</a><span>|</span><label class="collapse" for="c-42632118">[-]</label><label class="expand" for="c-42632118">[1 more]</label></div><br/><div class="children"><div class="content">Another post from the same author puts this in an interesting context: <a href="https:&#x2F;&#x2F;www.seangoedecke.com&#x2F;glue-work-considered-harmful&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.seangoedecke.com&#x2F;glue-work-considered-harmful&#x2F;</a> (follow up: <a href="https:&#x2F;&#x2F;www.seangoedecke.com&#x2F;cynicism&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.seangoedecke.com&#x2F;cynicism&#x2F;</a>)<p>Keeping the code base tidy is glue work, so you should only do enough of it to ship features. So maybe these are not &quot;mistakes&quot; but rather tactical choices made by politically smart engineers focused on shipping features.</div><br/></div></div><div id="42629801" class="c"><input type="checkbox" id="c-42629801" checked=""/><div class="controls bullet"><span class="by">lmm</span><span>|</span><a href="#42632118">prev</a><span>|</span><a href="#42628022">next</a><span>|</span><label class="collapse" for="c-42629801">[-]</label><label class="expand" for="c-42629801">[4 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve worked in codebases like this and disagree. Consistency isn&#x27;t the most important, making your little corner of the codebase nicer than the rest of it is fine, actually, and dependencies are great - especially as they&#x27;re the easiest way to delete code (the article is right about the importance of that). What&#x27;s sometimes called the &quot;lava layer anti-pattern&quot; is actually a perfectly good way of working, that tends to result in better systems than trying to maintain consistency. As Wall says, the three cardinal virtues of a programmer are laziness, impatience, and hubris; if you don&#x27;t believe you can make this system better then why would you even be working on it?<p>Also if the system was <i>actually</i> capable of maintaining consistency then it would never have got that large in the first place. No-one&#x27;s actual business problem takes 5M lines of code to describe, those 5M lines are mostly copy-paste &quot;patterns&quot; and repeated attempts to reimplement the same thing.</div><br/><div id="42630097" class="c"><input type="checkbox" id="c-42630097" checked=""/><div class="controls bullet"><span class="by">jimbokun</span><span>|</span><a href="#42629801">parent</a><span>|</span><a href="#42628022">next</a><span>|</span><label class="collapse" for="c-42630097">[-]</label><label class="expand" for="c-42630097">[3 more]</label></div><br/><div class="children"><div class="content">Pulling in lots of dependencies will eventually grind progress on features to a halt as you spend more and more time patching and deploying vulnerabilities.  The probability of seeing new vulnerabilities I believe is pretty much linear in the number of dependencies you have.</div><br/><div id="42630304" class="c"><input type="checkbox" id="c-42630304" checked=""/><div class="controls bullet"><span class="by">abc-1</span><span>|</span><a href="#42629801">root</a><span>|</span><a href="#42630097">parent</a><span>|</span><a href="#42628022">next</a><span>|</span><label class="collapse" for="c-42630304">[-]</label><label class="expand" for="c-42630304">[2 more]</label></div><br/><div class="children"><div class="content">As opposed to your in-house code which is vulnerability free?<p>The issue isn’t vulnerability&#x27;s, it’s dependency hell where all your packages are constantly fighting each other for specific versions. Although some languages handle this better than others.</div><br/><div id="42631155" class="c"><input type="checkbox" id="c-42631155" checked=""/><div class="controls bullet"><span class="by">jimbokun</span><span>|</span><a href="#42629801">root</a><span>|</span><a href="#42630304">parent</a><span>|</span><a href="#42628022">next</a><span>|</span><label class="collapse" for="c-42631155">[-]</label><label class="expand" for="c-42631155">[1 more]</label></div><br/><div class="children"><div class="content">In house code could very well have many fewer vulnerabilities, as you only write exactly the functionality you need, vs pulling a large dependency and only using a small percentage of the API.</div><br/></div></div></div></div></div></div></div></div><div id="42628022" class="c"><input type="checkbox" id="c-42628022" checked=""/><div class="controls bullet"><span class="by">IvyMike</span><span>|</span><a href="#42629801">prev</a><span>|</span><a href="#42632105">next</a><span>|</span><label class="collapse" for="c-42628022">[-]</label><label class="expand" for="c-42628022">[25 more]</label></div><br/><div class="children"><div class="content">The &quot;The cardinal mistake is inconsistency&quot; is 100% true.  We used to call the guiding philosophy of working in these codebases &quot;When in Rome&quot;.</div><br/><div id="42628149" class="c"><input type="checkbox" id="c-42628149" checked=""/><div class="controls bullet"><span class="by">pryelluw</span><span>|</span><a href="#42628022">parent</a><span>|</span><a href="#42628158">next</a><span>|</span><label class="collapse" for="c-42628149">[-]</label><label class="expand" for="c-42628149">[6 more]</label></div><br/><div class="children"><div class="content">I have this bad codebase at work. Really bad. One of the things I’ve been working on for the past two years is making it consistent. I’m almost at the point where interfaces can be left alone and internals rewrites in a consistent style.<p>People often ask why I hardly ever have any prod issues (zero so far this year). This is part of the reason. Having consistent codebases that are written in a specific style and implement things in similar manner.<p>Some codebases make me feel like I’m reading a book in multiple languages …</div><br/><div id="42628312" class="c"><input type="checkbox" id="c-42628312" checked=""/><div class="controls bullet"><span class="by">bizzletk</span><span>|</span><a href="#42628022">root</a><span>|</span><a href="#42628149">parent</a><span>|</span><a href="#42628552">next</a><span>|</span><label class="collapse" for="c-42628312">[-]</label><label class="expand" for="c-42628312">[2 more]</label></div><br/><div class="children"><div class="content">&gt; People often ask why I hardly ever have any prod issues (zero so far this year).<p>It also helps that we&#x27;re still only in January!</div><br/><div id="42629451" class="c"><input type="checkbox" id="c-42629451" checked=""/><div class="controls bullet"><span class="by">bballer</span><span>|</span><a href="#42628022">root</a><span>|</span><a href="#42628312">parent</a><span>|</span><a href="#42628552">next</a><span>|</span><label class="collapse" for="c-42629451">[-]</label><label class="expand" for="c-42629451">[1 more]</label></div><br/><div class="children"><div class="content">Bahh thanks for the chuckle. The man is 7&#x2F;7 as of today!</div><br/></div></div></div></div><div id="42628552" class="c"><input type="checkbox" id="c-42628552" checked=""/><div class="controls bullet"><span class="by">onemoresoop</span><span>|</span><a href="#42628022">root</a><span>|</span><a href="#42628149">parent</a><span>|</span><a href="#42628312">prev</a><span>|</span><a href="#42628310">next</a><span>|</span><label class="collapse" for="c-42628552">[-]</label><label class="expand" for="c-42628552">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Some codebases make me feel like I’m reading a book in multiple languages …<p>In most cases the codebase does consist of muliple languges.</div><br/></div></div><div id="42628310" class="c"><input type="checkbox" id="c-42628310" checked=""/><div class="controls bullet"><span class="by">cyco130</span><span>|</span><a href="#42628022">root</a><span>|</span><a href="#42628149">parent</a><span>|</span><a href="#42628552">prev</a><span>|</span><a href="#42628158">next</a><span>|</span><label class="collapse" for="c-42628310">[-]</label><label class="expand" for="c-42628310">[2 more]</label></div><br/><div class="children"><div class="content">&gt; zero so far this year<p>I saw what you did there.</div><br/><div id="42628571" class="c"><input type="checkbox" id="c-42628571" checked=""/><div class="controls bullet"><span class="by">onemoresoop</span><span>|</span><a href="#42628022">root</a><span>|</span><a href="#42628310">parent</a><span>|</span><a href="#42628158">next</a><span>|</span><label class="collapse" for="c-42628571">[-]</label><label class="expand" for="c-42628571">[1 more]</label></div><br/><div class="children"><div class="content">Maybe that’s not even that bad if number of issues went down from multiple a day to none in a couple of days.</div><br/></div></div></div></div></div></div><div id="42628158" class="c"><input type="checkbox" id="c-42628158" checked=""/><div class="controls bullet"><span class="by">SoftTalker</span><span>|</span><a href="#42628022">parent</a><span>|</span><a href="#42628149">prev</a><span>|</span><a href="#42628577">next</a><span>|</span><label class="collapse" for="c-42628158">[-]</label><label class="expand" for="c-42628158">[2 more]</label></div><br/><div class="children"><div class="content">Yep when I have to work on old code I find something in the existing code that&#x27;s close to what I want to do, and copy&#x2F;paste it. I do not try to abstract it into a common function, unless that&#x27;s already been done and can be used verbatim.<p>You don&#x27;t know the 10 years of reasons behind why the code is the way it is, and the safest thing is to stay as close as possible to how the existing code is written, both to avoid landmines, and so that future you (or someone else) has one less peculiar style they have to figure out.<p>All that said, the more usual case is that the code is already a huge mess of different styles, because the 100 different developers who have touched it before you didn&#x27;t follow this advice.</div><br/><div id="42630119" class="c"><input type="checkbox" id="c-42630119" checked=""/><div class="controls bullet"><span class="by">jimbokun</span><span>|</span><a href="#42628022">root</a><span>|</span><a href="#42628158">parent</a><span>|</span><a href="#42628577">next</a><span>|</span><label class="collapse" for="c-42630119">[-]</label><label class="expand" for="c-42630119">[1 more]</label></div><br/><div class="children"><div class="content">The only time I abstract something into a function even if it’s only used in one place, is if the generic case is as easier or easier than the code for the specific case.<p>But that’s a judgment call based on experience.</div><br/></div></div></div></div><div id="42628577" class="c"><input type="checkbox" id="c-42628577" checked=""/><div class="controls bullet"><span class="by">aranw</span><span>|</span><a href="#42628022">parent</a><span>|</span><a href="#42628158">prev</a><span>|</span><a href="#42628574">next</a><span>|</span><label class="collapse" for="c-42628577">[-]</label><label class="expand" for="c-42628577">[12 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t like this philosophy as it often leads to stagnation in patterns and ways of working that seep into newer systems. &quot;That&#x27;s not how we do things here&quot; becomes a common criticism, resulting in systems and services that share the same flaws and trade-offs, making progress difficult.<p>Engineers often adhere too rigidly to these principles rather than taking a pragmatic approach that balances existing practices with future improvements.</div><br/><div id="42628657" class="c"><input type="checkbox" id="c-42628657" checked=""/><div class="controls bullet"><span class="by">djeastm</span><span>|</span><a href="#42628022">root</a><span>|</span><a href="#42628577">parent</a><span>|</span><a href="#42628679">next</a><span>|</span><label class="collapse" for="c-42628657">[-]</label><label class="expand" for="c-42628657">[3 more]</label></div><br/><div class="children"><div class="content">&gt;improvements<p>Therein lies the rub. Everyone has a different idea of what is an improvement in a codebase. Unless there&#x27;s some performance or security concern, I&#x27;d much rather work in an &quot;old&quot; style codebase that&#x27;s consistent than a continually partially updated codebase by multiple engineers with different opinions on what an &quot;improvement&quot; is.</div><br/><div id="42632245" class="c"><input type="checkbox" id="c-42632245" checked=""/><div class="controls bullet"><span class="by">mrkeen</span><span>|</span><a href="#42628022">root</a><span>|</span><a href="#42628657">parent</a><span>|</span><a href="#42628716">next</a><span>|</span><label class="collapse" for="c-42632245">[-]</label><label class="expand" for="c-42632245">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Everyone has a different idea of what is an improvement in a codebase<p>Yes, and consistency is the tie-breaker.  So the status quo remains, and improvements aren&#x27;t made.</div><br/></div></div><div id="42628716" class="c"><input type="checkbox" id="c-42628716" checked=""/><div class="controls bullet"><span class="by">peterldowns</span><span>|</span><a href="#42628022">root</a><span>|</span><a href="#42628657">parent</a><span>|</span><a href="#42632245">prev</a><span>|</span><a href="#42628679">next</a><span>|</span><label class="collapse" for="c-42628716">[-]</label><label class="expand" for="c-42628716">[1 more]</label></div><br/><div class="children"><div class="content">I completely agree with this.</div><br/></div></div></div></div><div id="42628679" class="c"><input type="checkbox" id="c-42628679" checked=""/><div class="controls bullet"><span class="by">rstuart4133</span><span>|</span><a href="#42628022">root</a><span>|</span><a href="#42628577">parent</a><span>|</span><a href="#42628657">prev</a><span>|</span><a href="#42628635">next</a><span>|</span><label class="collapse" for="c-42628679">[-]</label><label class="expand" for="c-42628679">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I don&#x27;t like this philosophy as it often leads to stagnation in patterns and ways of working that seep into newer systems.<p>The rule isn&#x27;t &quot;don&#x27;t introduce change&quot;, it&#x27;s &quot;be consistent&quot;.  Using the example from the post, if you want to use a different method of doing auth that simpler the &quot;be consistent&quot; rule means you must change the way auth is done everywhere.<p>Interestingly, if you do that the negatives he lists go away.  For example, if the global auth mechanism handles bots specially, you will learn that if you are forced to change it everywhere.</div><br/></div></div><div id="42628635" class="c"><input type="checkbox" id="c-42628635" checked=""/><div class="controls bullet"><span class="by">Cthulhu_</span><span>|</span><a href="#42628022">root</a><span>|</span><a href="#42628577">parent</a><span>|</span><a href="#42628679">prev</a><span>|</span><a href="#42628773">next</a><span>|</span><label class="collapse" for="c-42628635">[-]</label><label class="expand" for="c-42628635">[6 more]</label></div><br/><div class="children"><div class="content">And that&#x27;s a fair criticism, however, if you change a pattern without changing it everywhere, you now have two patterns to maintain (the article mentions this). And if multiple people come up with multiple patterns, that maintenance debt multiplies.<p>Progress and improvement is fine, great even, but consistency is more important. If you change a pattern, change it everywhere.</div><br/><div id="42628814" class="c"><input type="checkbox" id="c-42628814" checked=""/><div class="controls bullet"><span class="by">rudasn</span><span>|</span><a href="#42628022">root</a><span>|</span><a href="#42628635">parent</a><span>|</span><a href="#42628773">next</a><span>|</span><label class="collapse" for="c-42628814">[-]</label><label class="expand" for="c-42628814">[5 more]</label></div><br/><div class="children"><div class="content">Change it at once everywhere on an existing large codebase? That&#x27;s going to be one huge PR no one will want to review properly, let alone approve.<p>Document the old pattern, document the new pattern, discuss, and come up with a piece by piece plan that is easy to ship and easy to revert if you do screw things up.<p>Unless the old pattern is insecure or burns your servers, that is.</div><br/><div id="42629485" class="c"><input type="checkbox" id="c-42629485" checked=""/><div class="controls bullet"><span class="by">cowsandmilk</span><span>|</span><a href="#42628022">root</a><span>|</span><a href="#42628814">parent</a><span>|</span><a href="#42630914">next</a><span>|</span><label class="collapse" for="c-42629485">[-]</label><label class="expand" for="c-42629485">[1 more]</label></div><br/><div class="children"><div class="content">If things are consistent enough, tools like open rewrite can be used. I’ve seen reviews where it is the recipe for generating the code transformation that gets reviewed, not the thousands of spots where the transform was applied.</div><br/></div></div><div id="42630914" class="c"><input type="checkbox" id="c-42630914" checked=""/><div class="controls bullet"><span class="by">dml2135</span><span>|</span><a href="#42628022">root</a><span>|</span><a href="#42628814">parent</a><span>|</span><a href="#42629485">prev</a><span>|</span><a href="#42629159">next</a><span>|</span><label class="collapse" for="c-42630914">[-]</label><label class="expand" for="c-42630914">[1 more]</label></div><br/><div class="children"><div class="content">I don’t think you and the comment you are replying to are in conflict. Documenting and rolling it out piecemeal is the correct way to make a large change.<p>I think the point is, either actually commit to doing that, or don’t introduce the new pattern.</div><br/></div></div><div id="42629159" class="c"><input type="checkbox" id="c-42629159" checked=""/><div class="controls bullet"><span class="by">not2b</span><span>|</span><a href="#42628022">root</a><span>|</span><a href="#42628814">parent</a><span>|</span><a href="#42630914">prev</a><span>|</span><a href="#42629140">next</a><span>|</span><label class="collapse" for="c-42629159">[-]</label><label class="expand" for="c-42629159">[1 more]</label></div><br/><div class="children"><div class="content">Yes, it usually can&#x27;t be done with one massive checkin. First get buy-in that the old pattern will be changed to the new pattern (hopefully you won&#x27;t have some senior developer who likes it the old way and fights you), then as you say, come up with a plan to get it done.<p>The down side to this that I&#x27;ve experienced more than once, though, is incomplete conversions: we thought we had agreement that the change should be done, it turns out to be more difficult than planned, it gets partially completed and then management has a new fire for us to fight, resources are taken away, so you still have two or more ways of doing things.</div><br/></div></div><div id="42629140" class="c"><input type="checkbox" id="c-42629140" checked=""/><div class="controls bullet"><span class="by">yuliyp</span><span>|</span><a href="#42628022">root</a><span>|</span><a href="#42628814">parent</a><span>|</span><a href="#42629159">prev</a><span>|</span><a href="#42628773">next</a><span>|</span><label class="collapse" for="c-42629140">[-]</label><label class="expand" for="c-42629140">[1 more]</label></div><br/><div class="children"><div class="content">Naturally unless it&#x27;s trivial do it in steps, but committing to doing the whole migration as quickly as prudent or rolling it back completely is key.</div><br/></div></div></div></div></div></div><div id="42628773" class="c"><input type="checkbox" id="c-42628773" checked=""/><div class="controls bullet"><span class="by">cratermoon</span><span>|</span><a href="#42628022">root</a><span>|</span><a href="#42628577">parent</a><span>|</span><a href="#42628635">prev</a><span>|</span><a href="#42628574">next</a><span>|</span><label class="collapse" for="c-42628773">[-]</label><label class="expand" for="c-42628773">[1 more]</label></div><br/><div class="children"><div class="content">What&#x27;s bad is code exhibiting multiple fragmentary inconsistencies,
and no plan or effort exists to bring older code up to match the new patterns.
An example I was closely involved with:
A java programmer who wrote a plethora of new code in a pure functional paradigm,
scattering Vavr library uses all over it.
The existing code was built on Dropwizard
and any experienced Java programmer could rapidly get comfortable with it.
The difference between the existing code and the new was jarring (sorry for the pun) to say the least,
and I wonder if, later, the company ever managed to recruit anyone who understood both well enough to maintain the system.<p>ETA: upon reflection I&#x27;d consider that programmer a canonical example of the kinds of mistakes the author covers in the article.</div><br/></div></div></div></div><div id="42628574" class="c"><input type="checkbox" id="c-42628574" checked=""/><div class="controls bullet"><span class="by">layer8</span><span>|</span><a href="#42628022">parent</a><span>|</span><a href="#42628577">prev</a><span>|</span><a href="#42628749">next</a><span>|</span><label class="collapse" for="c-42628574">[-]</label><label class="expand" for="c-42628574">[3 more]</label></div><br/><div class="children"><div class="content">How do you tackle the case where the codebase is consistent in a bad way, like pervasive use of antipatterns that make code difficult to change or to reason about? If you want to improve that, you have to start somewhere. Of course, Chesterton’s Fence applies.</div><br/><div id="42628765" class="c"><input type="checkbox" id="c-42628765" checked=""/><div class="controls bullet"><span class="by">viraptor</span><span>|</span><a href="#42628022">root</a><span>|</span><a href="#42628574">parent</a><span>|</span><a href="#42628749">next</a><span>|</span><label class="collapse" for="c-42628765">[-]</label><label class="expand" for="c-42628765">[2 more]</label></div><br/><div class="children"><div class="content">Or when people keep the old pattern because there&#x27;s a &quot;higher priority&quot;.<p>I&#x27;ve worked on a project with absolutely terrible duplication of deserialisers of models, each one slightly different even those most properties were named the same and should&#x27;ve been handled the same. But we can&#x27;t touch anything because important things are happening in business and we can&#x27;t risk anything. The ignored part was that this led to bugs and extreme confusion from new people. They were even too worried to accept a repo-wide whitespace normalisation.</div><br/><div id="42630157" class="c"><input type="checkbox" id="c-42630157" checked=""/><div class="controls bullet"><span class="by">jimbokun</span><span>|</span><a href="#42628022">root</a><span>|</span><a href="#42628765">parent</a><span>|</span><a href="#42628749">next</a><span>|</span><label class="collapse" for="c-42630157">[-]</label><label class="expand" for="c-42630157">[1 more]</label></div><br/><div class="children"><div class="content">In the past I have performed needed refactorings as part of new feature development, without asking permissions.  Even though my boss at the time said “don’t make it pretty, just make it work.”<p>Of course, I knew that writing the code the “pretty”, more maintainable, easier to understand way wouldn’t take any longer to write, and might take less time as the refactoring requires less new code overall.<p>But I didn’t bother explaining all that.  Just nodded then went and implemented it the best way as I was the experienced software engineer.</div><br/></div></div></div></div></div></div><div id="42628749" class="c"><input type="checkbox" id="c-42628749" checked=""/><div class="controls bullet"><span class="by">gwillz</span><span>|</span><a href="#42628022">parent</a><span>|</span><a href="#42628574">prev</a><span>|</span><a href="#42632105">next</a><span>|</span><label class="collapse" for="c-42628749">[-]</label><label class="expand" for="c-42628749">[1 more]</label></div><br/><div class="children"><div class="content">&quot;When is Rome&quot; is good, might use that.<p>My old boss used to say: &quot;Be a chameleon. I don&#x27;t want to know that I didn&#x27;t write this.&quot;</div><br/></div></div></div></div><div id="42632105" class="c"><input type="checkbox" id="c-42632105" checked=""/><div class="controls bullet"><span class="by">BlackFly</span><span>|</span><a href="#42628022">prev</a><span>|</span><a href="#42630388">next</a><span>|</span><label class="collapse" for="c-42632105">[-]</label><label class="expand" for="c-42632105">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Because it protects you from nasty surprises, it slows down the codebase’s progression into a mess, and it allows you to take advantage of future improvements.<p>The codebase is already a nasty surprise for people coming in from the outside with experience or people that are aware of current best practices or outside cultures, therefore, the codebase is already a mess and you cannot take advantage of future improvements without a big bang since that would be inconsistent.<p>How to keep your code evolving in time and constantly feeling like it is something you want to maintain and add features to is difficult. But constantly rewriting the world when you discover a newer slight improvement will grind your development to a halt quickly. Never implementing that slight improvement incrementally will also slowly rot your feelings and your desire to maintain the code. Absolute consistency is the opposite of evolution: never allowing experimentation; no failed experiments mean no successes either. Sure, too much experimentation is equally disastrous, but abstinence is the other extreme and is not moderation.</div><br/></div></div><div id="42630388" class="c"><input type="checkbox" id="c-42630388" checked=""/><div class="controls bullet"><span class="by">dav</span><span>|</span><a href="#42632105">prev</a><span>|</span><a href="#42628029">next</a><span>|</span><label class="collapse" for="c-42630388">[-]</label><label class="expand" for="c-42630388">[1 more]</label></div><br/><div class="children"><div class="content">I have three maxims that basically power all my decisions as an engineer:<p>1. The three C’s: Clarity always, Consistency with determination, Concision when prudent.
2. Keep the pain in the right place.
3. Fight entropy!<p>So in the context of the main example in this article, I would say you can try to improve clarity by e.g. wrapping the existing auth code in something that looks nicer in the context of your new endpoint but try very hard to stay consistent for all the great reasons the article gives.</div><br/></div></div><div id="42628029" class="c"><input type="checkbox" id="c-42628029" checked=""/><div class="controls bullet"><span class="by">protonbob</span><span>|</span><a href="#42630388">prev</a><span>|</span><a href="#42630188">next</a><span>|</span><label class="collapse" for="c-42628029">[-]</label><label class="expand" for="c-42628029">[6 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t have a real critique because I don&#x27;t have that many years in a codebase the size of OP (just 2). But I struggle with the advice to not try and make a clean section of the code base that doesn&#x27;t depend on the rest of the application.<p>Isn&#x27;t part of good engineering trying to reduce your dependencies, even on yourself? In a latter part of the post, OP says to be careful tweaking existing code, because it can have unforeseen consequences. Isn&#x27;t this the problem that having deep vertical slices of functionality tries to solve? High cohesion in that related code is grouped together, and low coupling in that you can add new code to your feature or modify it without worrying about breaking everyone else&#x27;s code.<p>Does this high cohesion and low coupling just not really work at the scale that OP is talking about?</div><br/><div id="42628142" class="c"><input type="checkbox" id="c-42628142" checked=""/><div class="controls bullet"><span class="by">gleenn</span><span>|</span><a href="#42628029">parent</a><span>|</span><a href="#42628234">next</a><span>|</span><label class="collapse" for="c-42628142">[-]</label><label class="expand" for="c-42628142">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s one thing to reduce dependency and another to have reduced consistency. If you have 10 web routes and 1 behaves differently, it doesn&#x27;t matter if the code is cross coupled or not, it matters if it behaves similarly. Does it return the same status codes on error? Does it always return JSON with error messages inside? Do you auth the same way? The implementation can be wholly separate but end users will notice because logic on their side now has to special-case your 11th endpoint because you returned HTTP 20x instead of 40x on error. Or when you realize that you want to refactor the code to DRY it (Don&#x27;t Repeat Yourself), now you can&#x27;t reduce all the duplication because you have bespoke parts.</div><br/></div></div><div id="42628234" class="c"><input type="checkbox" id="c-42628234" checked=""/><div class="controls bullet"><span class="by">mbivert</span><span>|</span><a href="#42628029">parent</a><span>|</span><a href="#42628142">prev</a><span>|</span><a href="#42628740">next</a><span>|</span><label class="collapse" for="c-42628234">[-]</label><label class="expand" for="c-42628234">[1 more]</label></div><br/><div class="children"><div class="content">I think the gist of it is humility: as a newcomer, you don&#x27;t really know what&#x27;s out there and why, and there are often good reasons for things to be how they are. Not always, but often enough for avoiding being too original to be favored. This doesn&#x27;t imply relinquishing on &quot;good engineering habits&quot; either.<p>Now, once you have a deeper understanding of the codebase, you&#x27;ll know when and why to break away from existing patterns, but in the beginning phase, it&#x27;s a good habit to start by learning carefully how things are designed and why.</div><br/></div></div><div id="42628740" class="c"><input type="checkbox" id="c-42628740" checked=""/><div class="controls bullet"><span class="by">Cthulhu_</span><span>|</span><a href="#42628029">parent</a><span>|</span><a href="#42628234">prev</a><span>|</span><a href="#42628279">next</a><span>|</span><label class="collapse" for="c-42628740">[-]</label><label class="expand" for="c-42628740">[1 more]</label></div><br/><div class="children"><div class="content">These are two different concepts though; reducing dependencies is good, but you can have minimal dependencies AND have the code look &#x2F; feel &#x2F; behave like the rest of the codebase. Always remember, it&#x27;s not <i>your</i> code. Assume someone else will need to read &#x2F; maintain it. Thousands might. You might have made the perfect section of code, then get an offer you can&#x27;t refuse or get hit by a bus.</div><br/></div></div><div id="42628279" class="c"><input type="checkbox" id="c-42628279" checked=""/><div class="controls bullet"><span class="by">Salgat</span><span>|</span><a href="#42628029">parent</a><span>|</span><a href="#42628740">prev</a><span>|</span><a href="#42628556">next</a><span>|</span><label class="collapse" for="c-42628279">[-]</label><label class="expand" for="c-42628279">[1 more]</label></div><br/><div class="children"><div class="content">Consistency makes code predictable and reduces mental overhead. It doesn&#x27;t mean you have to write it poorly like the rest of the codebase, but it does mean using the same general practices as the rest of the codebase. Think of it like using knockoff legos vs the real thing. They both work interchangeably which makes it easy to use them together, but you&#x27;d prefer to use the nicer lego pieces as much as possible in your builds because the material is higher quality, tighter tolerances, just overall works better even if it&#x27;s the same shape as the knockoff pieces.</div><br/></div></div><div id="42628556" class="c"><input type="checkbox" id="c-42628556" checked=""/><div class="controls bullet"><span class="by">mrkeen</span><span>|</span><a href="#42628029">parent</a><span>|</span><a href="#42628279">prev</a><span>|</span><a href="#42630188">next</a><span>|</span><label class="collapse" for="c-42628556">[-]</label><label class="expand" for="c-42628556">[1 more]</label></div><br/><div class="children"><div class="content">Nope, you&#x27;ve got it.<p>Code-consistency is a property just like any other property, e.g. correctness, efficiency, testability, modifiability, verifiability, platform-agnosticism.  Does it beat any of the examples I happened to list? Not a chance.<p>&gt; worrying about breaking everyone else&#x27;s code<p>You already said it, but just to expand: if you already have feature A, you might succeed in plumbing feature B through feature A&#x27;s guts.  And so on with feature C and D.  But now you can&#x27;t change any of them in isolation.  When you try to fix up the plumbing, you&#x27;ll now break 4 features at once.</div><br/></div></div></div></div><div id="42630188" class="c"><input type="checkbox" id="c-42630188" checked=""/><div class="controls bullet"><span class="by">hnanon98791</span><span>|</span><a href="#42628029">prev</a><span>|</span><a href="#42628884">next</a><span>|</span><label class="collapse" for="c-42630188">[-]</label><label class="expand" for="c-42630188">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Single-digit million lines of code (~5M, let’s say)<p>&gt; Somewhere between 100 and 1000 engineers working on the same codebase<p>&gt; The first working version of the codebase is at least ten years old<p>&gt; The cardinal mistake is inconsistency<p>Funny enough, the author notes the problem on why consistency is impossible in such a project and the proceeds to call it the cardinal mistake.<p>You cannot be consistent in a project of that size and scope. Full stop. Half those engineers will statistically be below average and constantly dragging the codebase towards their skill level each time they make a change. Technology changes a lot in ten years, people like to use new language features and frameworks.<p>And the final nail in the coffin: the limits of human cognition. To be consistent you must keep the standards in working memory. Do you think this is possible when the entire project is over a million LOC? Don&#x27;t be silly.<p>There&#x27;s a reason why big projects will always be big balls of mud. Embrace it. <a href="http:&#x2F;&#x2F;www.laputan.org&#x2F;mud&#x2F;" rel="nofollow">http:&#x2F;&#x2F;www.laputan.org&#x2F;mud&#x2F;</a></div><br/><div id="42630480" class="c"><input type="checkbox" id="c-42630480" checked=""/><div class="controls bullet"><span class="by">noodletheworld</span><span>|</span><a href="#42630188">parent</a><span>|</span><a href="#42628884">next</a><span>|</span><label class="collapse" for="c-42630480">[-]</label><label class="expand" for="c-42630480">[2 more]</label></div><br/><div class="children"><div class="content">&gt; people like to use new language features and frameworks.<p>Have of the point of this article is that people need to suck it up and not use new frameworks sometimes...<p>There are times for coding in a way you, personally, find pleasing; and there are times when:<p>&gt; So you should know how to work in the “legacy mess” because that’s what your company actually does. Good engineering or not, it’s your job.<p>A quote from the &#x27;big ball of mud&#x27;:<p>&gt; Sometimes it’s just easier to throw a system away, and start over.<p>It <i>is</i> easier, but it&#x27;s also a) not your decision and b) <i>enormously disruptive and expensive</i>.<p>How do you tell if you&#x27;re in the &#x27;naive and enthusiastic but misguided&#x27; camp, or in the &#x27;understand the costs and benefits and it&#x27;s worth a rewrite&#x27; camp?<p>Maybe the takeaway from the OP&#x27;s post really should be this one:<p>&gt; If you work at a big tech company and don’t think this is true, maybe you’re right, but I’ll only take that opinion seriously if you’re deeply familiar with the large established codebase you think isn’t providing value.<p>^ because <i>this</i> is the heart of it.<p>If you don&#x27;t understand, or haven&#x27;t bothered to understand, or haven&#x27;t spent the time understanding what is <i>already there</i>, then you are <i>not qualified</i> to make large scale decisions about changing it.</div><br/><div id="42631048" class="c"><input type="checkbox" id="c-42631048" checked=""/><div class="controls bullet"><span class="by">Tknl</span><span>|</span><a href="#42630188">root</a><span>|</span><a href="#42630480">parent</a><span>|</span><a href="#42628884">next</a><span>|</span><label class="collapse" for="c-42631048">[-]</label><label class="expand" for="c-42631048">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve successfully pulled off most of such a majority re-write but a key driver - but not the only  was that the legacy language the existing system was implemented in had lost virtually all traction in the local and global market. Mostly only expensive contractors coming out of pension availabile and on top of that the custom libraries required us to recruit the 10 percent of that segment. Any new hires straight up refused to pick it up as they accurately deemed it career suicide.</div><br/></div></div></div></div></div></div><div id="42628884" class="c"><input type="checkbox" id="c-42628884" checked=""/><div class="controls bullet"><span class="by">forty</span><span>|</span><a href="#42630188">prev</a><span>|</span><a href="#42631855">next</a><span>|</span><label class="collapse" for="c-42628884">[-]</label><label class="expand" for="c-42628884">[2 more]</label></div><br/><div class="children"><div class="content">I have been working on a code base that is now 14 year old for many years (almost since the beginning), and is now well over 1M LoC of typescript (for Nodejs) - we are only 20-30 engineers working on it, rather than the 100-1000 suggested on the article. And I can say I couldn&#x27;t agree more with the article.<p>If you have to work on such projects, there are two things to keep in mind: consistency and integration tests.</div><br/><div id="42628973" class="c"><input type="checkbox" id="c-42628973" checked=""/><div class="controls bullet"><span class="by">jamesfinlayson</span><span>|</span><a href="#42628884">parent</a><span>|</span><a href="#42631855">next</a><span>|</span><label class="collapse" for="c-42628973">[-]</label><label class="expand" for="c-42628973">[1 more]</label></div><br/><div class="children"><div class="content">&gt; integration tests<p>Yes. I remember working in a 700,000+ line PHP code base that around 30% unit test coverage and an unknown percentage of e2e test coverage. I kept my changes very localised because it was a minefield.<p>Also, the unit tests didn&#x27;t do teardown so adding a new unit test required you to slot it in with assertions accounting for the state of all tests run so far.</div><br/></div></div></div></div><div id="42631855" class="c"><input type="checkbox" id="c-42631855" checked=""/><div class="controls bullet"><span class="by">Jean-Papoulos</span><span>|</span><a href="#42628884">prev</a><span>|</span><a href="#42628810">next</a><span>|</span><label class="collapse" for="c-42631855">[-]</label><label class="expand" for="c-42631855">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m all for consistency. But imagine having a codebase where most operations point back to an in-memory dataset representation of a database table, and everytime you change your position in this dataset (the only &quot;correct&quot; way of accessing that table&#x27;s data), it updates the UI accordingly.<p>New feature where you compare 2 records ? Too bad, the UI is going to show them both then go back to the first one in a epileptic spasm.<p>Sometimes, things are just that bad enough that keeping it consistent would mean producing things that will make clients call saying it&#x27;s a bug. &quot;No sorry, it&#x27;s a feature actually&quot;.</div><br/></div></div><div id="42628810" class="c"><input type="checkbox" id="c-42628810" checked=""/><div class="controls bullet"><span class="by">0xbadcafebee</span><span>|</span><a href="#42631855">prev</a><span>|</span><a href="#42628253">next</a><span>|</span><label class="collapse" for="c-42628810">[-]</label><label class="expand" for="c-42628810">[1 more]</label></div><br/><div class="children"><div class="content">&quot;Coding defensively&quot; is perhaps the understatement of the year. Good software architecture is, in my opinion, the single most powerful tool you have to keep things from becoming an unmanageable mess.<p>If I could give one &quot;defensive coding&quot; tip, it would be for seniors doing the design to put in road blocks and make examples that prevent components from falling for common traps (interdependency, highly variant state, complex conditions, backwards-incompatibility, tight coupling, large scope, inter-dependent models, etc) so that humans don&#x27;t have to remember to avoid those things. Make a list of things your team should never do and make them have a conversation with a senior if they want to do it anyway. Road blocks are good when they&#x27;re blocking the way to the bad.<p>Starting with good design leads to continuing to follow good design. Not starting with good design leads to years of pain. Spend a lot more time on the design than you think you should.</div><br/></div></div><div id="42628253" class="c"><input type="checkbox" id="c-42628253" checked=""/><div class="controls bullet"><span class="by">adamc</span><span>|</span><a href="#42628810">prev</a><span>|</span><a href="#42628905">next</a><span>|</span><label class="collapse" for="c-42628253">[-]</label><label class="expand" for="c-42628253">[12 more]</label></div><br/><div class="children"><div class="content">I really liked this:
&quot;as a general rule, large established codebases produce 90% of the value.&quot;<p>People see the ugliness -- because solving real problems, especially if business practices are involved, is often very messy -- but that&#x27;s where the value is.</div><br/><div id="42628419" class="c"><input type="checkbox" id="c-42628419" checked=""/><div class="controls bullet"><span class="by">bdangubic</span><span>|</span><a href="#42628253">parent</a><span>|</span><a href="#42628648">next</a><span>|</span><label class="collapse" for="c-42628419">[-]</label><label class="expand" for="c-42628419">[10 more]</label></div><br/><div class="children"><div class="content">I also find amusing that “legacy” more often than not gets used in negative conotation. I hear “legacy” and I think “bunch of people wrote some AWESOME shit that lasted so long that now other people get to view it as ‘legacy’”</div><br/><div id="42628585" class="c"><input type="checkbox" id="c-42628585" checked=""/><div class="controls bullet"><span class="by">tpoacher</span><span>|</span><a href="#42628253">root</a><span>|</span><a href="#42628419">parent</a><span>|</span><a href="#42630253">next</a><span>|</span><label class="collapse" for="c-42628585">[-]</label><label class="expand" for="c-42628585">[3 more]</label></div><br/><div class="children"><div class="content">There&#x27;s a good chance that&#x27;s not what people mean by this term though.<p>It&#x27;s probably used in the (now) classic sense as defined by M. Feathers in his &quot;Working with legacy code&quot; book.<p>Code that is old but otherwise awesome, maintainable (or even actively maintained) and easy &#x2F; a joy to work with are rarely referred to as &quot;legacy code&quot;.</div><br/><div id="42630171" class="c"><input type="checkbox" id="c-42630171" checked=""/><div class="controls bullet"><span class="by">jimbokun</span><span>|</span><a href="#42628253">root</a><span>|</span><a href="#42628585">parent</a><span>|</span><a href="#42629111">next</a><span>|</span><label class="collapse" for="c-42630171">[-]</label><label class="expand" for="c-42630171">[1 more]</label></div><br/><div class="children"><div class="content">It doesn’t seem awesome at first glance because it takes longer to get up to speed on a large, old code base than a small, young one.<p>But you will quickly learn how awesome the old code base is if you attempt to rewrite it, and realize everything the old code base takes into account.</div><br/></div></div><div id="42629111" class="c"><input type="checkbox" id="c-42629111" checked=""/><div class="controls bullet"><span class="by">bdangubic</span><span>|</span><a href="#42628253">root</a><span>|</span><a href="#42628585">parent</a><span>|</span><a href="#42630171">prev</a><span>|</span><a href="#42630253">next</a><span>|</span><label class="collapse" for="c-42629111">[-]</label><label class="expand" for="c-42629111">[1 more]</label></div><br/><div class="children"><div class="content">hmmm almost 3 decades in the industry and have very seldom (some exceptions) heard “legacy” for code that is old but awesome.</div><br/></div></div></div></div><div id="42630253" class="c"><input type="checkbox" id="c-42630253" checked=""/><div class="controls bullet"><span class="by">jsrcout</span><span>|</span><a href="#42628253">root</a><span>|</span><a href="#42628419">parent</a><span>|</span><a href="#42628585">prev</a><span>|</span><a href="#42628833">next</a><span>|</span><label class="collapse" for="c-42630253">[-]</label><label class="expand" for="c-42630253">[1 more]</label></div><br/><div class="children"><div class="content">In my experience people use it to mean &quot;old crap that we can&#x27;t get rid of (yet)&quot;.</div><br/></div></div><div id="42628833" class="c"><input type="checkbox" id="c-42628833" checked=""/><div class="controls bullet"><span class="by">forty</span><span>|</span><a href="#42628253">root</a><span>|</span><a href="#42628419">parent</a><span>|</span><a href="#42630253">prev</a><span>|</span><a href="#42628840">next</a><span>|</span><label class="collapse" for="c-42628833">[-]</label><label class="expand" for="c-42628833">[4 more]</label></div><br/><div class="children"><div class="content">Measuring value by what stays the longer is tempting, but sometimes it&#x27;s just that the mess is such that no one can touch it :)</div><br/><div id="42629078" class="c"><input type="checkbox" id="c-42629078" checked=""/><div class="controls bullet"><span class="by">bdangubic</span><span>|</span><a href="#42628253">root</a><span>|</span><a href="#42628833">parent</a><span>|</span><a href="#42628840">next</a><span>|</span><label class="collapse" for="c-42629078">[-]</label><label class="expand" for="c-42629078">[3 more]</label></div><br/><div class="children"><div class="content">100% but mess or not - it works -  otherwise you’d have no option but to touch it</div><br/><div id="42629805" class="c"><input type="checkbox" id="c-42629805" checked=""/><div class="controls bullet"><span class="by">galimaufry</span><span>|</span><a href="#42628253">root</a><span>|</span><a href="#42629078">parent</a><span>|</span><a href="#42628840">next</a><span>|</span><label class="collapse" for="c-42629805">[-]</label><label class="expand" for="c-42629805">[2 more]</label></div><br/><div class="children"><div class="content">Sometimes it doesn&#x27;t work and no one can tell.</div><br/><div id="42630404" class="c"><input type="checkbox" id="c-42630404" checked=""/><div class="controls bullet"><span class="by">bdangubic</span><span>|</span><a href="#42628253">root</a><span>|</span><a href="#42629805">parent</a><span>|</span><a href="#42628840">next</a><span>|</span><label class="collapse" for="c-42630404">[-]</label><label class="expand" for="c-42630404">[1 more]</label></div><br/><div class="children"><div class="content">how can that be possible?</div><br/></div></div></div></div></div></div></div></div></div></div><div id="42628648" class="c"><input type="checkbox" id="c-42628648" checked=""/><div class="controls bullet"><span class="by">Cthulhu_</span><span>|</span><a href="#42628253">parent</a><span>|</span><a href="#42628419">prev</a><span>|</span><a href="#42628905">next</a><span>|</span><label class="collapse" for="c-42628648">[-]</label><label class="expand" for="c-42628648">[1 more]</label></div><br/><div class="children"><div class="content">Earning code trumps pretty code every time.</div><br/></div></div></div></div><div id="42628905" class="c"><input type="checkbox" id="c-42628905" checked=""/><div class="controls bullet"><span class="by">maxwellg</span><span>|</span><a href="#42628253">prev</a><span>|</span><a href="#42629231">next</a><span>|</span><label class="collapse" for="c-42628905">[-]</label><label class="expand" for="c-42628905">[4 more]</label></div><br/><div class="children"><div class="content">I never really understood putting consistency on a pedestal. It&#x27;s certainly nice when everything operates exactly the same way - but consistency for consistency&#x27;s sake is awful to work in too. If a team realizes that logging library B is better than library A, and but NEVER switches from A to B because of consistency concerns, then in two years they&#x27;ll still all be using inferior tools and writing worse code. Similarly, if a team DOES decide to switch from A to B, they probably shouldn&#x27;t spend months rewriting all previous code to use the new tool. It&#x27;s ok for multiple established patterns to live in the same codebase, so long as everyone has an understanding of what the &quot;correct&quot; pattern should be for all new code.</div><br/><div id="42628962" class="c"><input type="checkbox" id="c-42628962" checked=""/><div class="controls bullet"><span class="by">jakefromstatecs</span><span>|</span><a href="#42628905">parent</a><span>|</span><a href="#42629603">next</a><span>|</span><label class="collapse" for="c-42628962">[-]</label><label class="expand" for="c-42628962">[1 more]</label></div><br/><div class="children"><div class="content">The consistency that they&#x27;re referring to specifically is to do with consistency in the way that certain features or functionality is implemented.<p>To make your example match, it would be more so that there are two teams A and B, Team A already created a framework and integration for logging across the entire application. Team B comes along and doesn&#x27;t realize that this framework exists, and also invents their own framework and integration for logging.<p>This is the type of consistency that the author points to, because Team B could have looked at other code already referencing and depending on the logging framework from Team A and they would have avoided the need to create their own.</div><br/></div></div><div id="42629603" class="c"><input type="checkbox" id="c-42629603" checked=""/><div class="controls bullet"><span class="by">ted_bunny</span><span>|</span><a href="#42628905">parent</a><span>|</span><a href="#42628962">prev</a><span>|</span><a href="#42629178">next</a><span>|</span><label class="collapse" for="c-42629603">[-]</label><label class="expand" for="c-42629603">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s about minimizing cognitive load.</div><br/></div></div><div id="42629178" class="c"><input type="checkbox" id="c-42629178" checked=""/><div class="controls bullet"><span class="by">lilyball</span><span>|</span><a href="#42628905">parent</a><span>|</span><a href="#42629603">prev</a><span>|</span><a href="#42629231">next</a><span>|</span><label class="collapse" for="c-42629178">[-]</label><label class="expand" for="c-42629178">[1 more]</label></div><br/><div class="children"><div class="content">&quot;Consistency for consistency&#x27;s sake&quot; is usually a misinterpretation of &quot;Consistency because there are reasons for the way things are already done and you don&#x27;t understand those reasons well enough to diverge&quot;. If you understand the current system completely, then you can understand when to diverge from the system (though this is usually better expressed as &quot;when to improve the system&quot; rather than doing something completely new). If you don&#x27;t understand the current system, then you can&#x27;t possibly ensure that you haven&#x27;t missed something in your shiny new way of doing things.</div><br/></div></div></div></div><div id="42629231" class="c"><input type="checkbox" id="c-42629231" checked=""/><div class="controls bullet"><span class="by">sirmarksalot</span><span>|</span><a href="#42628905">prev</a><span>|</span><a href="#42629227">next</a><span>|</span><label class="collapse" for="c-42629231">[-]</label><label class="expand" for="c-42629231">[1 more]</label></div><br/><div class="children"><div class="content">Consistency is often helpful, but you also need to be wary of cargo culting. For example, you see a server back end that uses an ORM model and you figure you&#x27;ll implement your new feature using the same patterns you see there. Then a month later the author of the original code you cribbed comes by and asks you, &quot;just out of curiosity, why did you feel the need to create five new database tables for your feature?&quot;<p>I know, that&#x27;s a pretty specific &quot;hypothetical,&quot; but that experience taught me that copying for the sake of consistency only works if you actually understand what it is you&#x27;re copying. And I was also lucky that the senior engineer was nice about it.</div><br/></div></div><div id="42629227" class="c"><input type="checkbox" id="c-42629227" checked=""/><div class="controls bullet"><span class="by">ram_rar</span><span>|</span><a href="#42629231">prev</a><span>|</span><a href="#42628489">next</a><span>|</span><label class="collapse" for="c-42629227">[-]</label><label class="expand" for="c-42629227">[1 more]</label></div><br/><div class="children"><div class="content">&gt;The other reason is that you cannot split up a large established codebase without first understanding it. I have seen large codebases successfully split up, but I have never seen that done by a team that wasn’t already fluent at shipping features inside the large codebase<p>I cannot resonate with this. Having worked with multiple large code bases 5M+, splitting the codebase is usually a reflection of org structure and bifurcation of domain within eng orgs. While it may seem convoluted at first, its certainly doable and gets easier as you progress along. Also, code migrations of this magnitude is usually carried out by core platform oriented teams, that rarely ship customer-facing features.</div><br/></div></div><div id="42628489" class="c"><input type="checkbox" id="c-42628489" checked=""/><div class="controls bullet"><span class="by">o_nate</span><span>|</span><a href="#42629227">prev</a><span>|</span><a href="#42630923">next</a><span>|</span><label class="collapse" for="c-42628489">[-]</label><label class="expand" for="c-42628489">[2 more]</label></div><br/><div class="children"><div class="content">A big part of this advice boils down to the old adage: &quot;Don&#x27;t remove a fence if you don&#x27;t know why it was put there.&quot; In other words, when making changes, make sure you preserve every behavior of the old code, even things that seem unnecessary or counter-intuitive.</div><br/><div id="42628673" class="c"><input type="checkbox" id="c-42628673" checked=""/><div class="controls bullet"><span class="by">Aloha</span><span>|</span><a href="#42628489">parent</a><span>|</span><a href="#42630923">next</a><span>|</span><label class="collapse" for="c-42628673">[-]</label><label class="expand" for="c-42628673">[1 more]</label></div><br/><div class="children"><div class="content">Chesterton&#x27;s Fence</div><br/></div></div></div></div><div id="42630923" class="c"><input type="checkbox" id="c-42630923" checked=""/><div class="controls bullet"><span class="by">rf15</span><span>|</span><a href="#42628489">prev</a><span>|</span><a href="#42628434">next</a><span>|</span><label class="collapse" for="c-42630923">[-]</label><label class="expand" for="c-42630923">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Single-digit million lines of code (~5M, let’s say)<p>as someone working on a 60M codebase, we have very different understandings of the word &quot;large&quot;. My team is leaning more towards &quot;understand the existing code, but also try to write maintainable and readable code&quot;. Everything looks like a mess built by a thousand different minds, some of them better and a lot of them worse, so keeping consistency would just drag the project deeper into hell.</div><br/></div></div><div id="42628434" class="c"><input type="checkbox" id="c-42628434" checked=""/><div class="controls bullet"><span class="by">ge96</span><span>|</span><a href="#42630923">prev</a><span>|</span><a href="#42631148">next</a><span>|</span><label class="collapse" for="c-42628434">[-]</label><label class="expand" for="c-42628434">[7 more]</label></div><br/><div class="children"><div class="content">I&#x27;m just thinking about this time at a previous job, I was reviewing a PR and they decided to just find&#x2F;replace every variable and switch from snake to camel case. I was like &quot;why are you guys doing this, not part of the job&quot;. There was some back and forward on that. This is a place where PRs weren&#x27;t about reviews but just a process to follow, ask someone to approve&#x2F;not expect feedback.<p>edit: job = ticket task</div><br/><div id="42631286" class="c"><input type="checkbox" id="c-42631286" checked=""/><div class="controls bullet"><span class="by">bandrami</span><span>|</span><a href="#42628434">parent</a><span>|</span><a href="#42628655">next</a><span>|</span><label class="collapse" for="c-42631286">[-]</label><label class="expand" for="c-42631286">[1 more]</label></div><br/><div class="children"><div class="content">This. There&#x27;s consistency and there&#x27;s yak-shaving. We had a guy who spent two months changing tabs to multiple spaces (or vice versa; whichever was in fashion at the time) mostly to get those sweet commits for &quot;productivity&quot; metrics. Yes, our bad for not realizing that sooner, but at some point you have to let inconsistencies go.</div><br/></div></div><div id="42628655" class="c"><input type="checkbox" id="c-42628655" checked=""/><div class="controls bullet"><span class="by">Cthulhu_</span><span>|</span><a href="#42628434">parent</a><span>|</span><a href="#42631286">prev</a><span>|</span><a href="#42628453">next</a><span>|</span><label class="collapse" for="c-42628655">[-]</label><label class="expand" for="c-42628655">[4 more]</label></div><br/><div class="children"><div class="content">What was the established code style (...if any) in that project?<p>Anyway it doesn&#x27;t sound like that was a very mature project or developers, not when the reviewer decide to just edit code instead of provide a review.</div><br/><div id="42628728" class="c"><input type="checkbox" id="c-42628728" checked=""/><div class="controls bullet"><span class="by">ge96</span><span>|</span><a href="#42628434">root</a><span>|</span><a href="#42628655">parent</a><span>|</span><a href="#42628453">next</a><span>|</span><label class="collapse" for="c-42628728">[-]</label><label class="expand" for="c-42628728">[3 more]</label></div><br/><div class="children"><div class="content">the old&#x2F;existing code was all underscore, they wanted to use camelcase instead. it&#x27;s a dumb thing to be argue about I know but it made the code review harder when instead of 10s of line diffs there&#x27;s almost a hundred granted easy to see just changing casing</div><br/><div id="42629229" class="c"><input type="checkbox" id="c-42629229" checked=""/><div class="controls bullet"><span class="by">willseth</span><span>|</span><a href="#42628434">root</a><span>|</span><a href="#42628728">parent</a><span>|</span><a href="#42628453">next</a><span>|</span><label class="collapse" for="c-42629229">[-]</label><label class="expand" for="c-42629229">[2 more]</label></div><br/><div class="children"><div class="content">I just insist that style only changes go in a separate commit.</div><br/><div id="42632132" class="c"><input type="checkbox" id="c-42632132" checked=""/><div class="controls bullet"><span class="by">JTyQZSnP3cQGa8B</span><span>|</span><a href="#42628434">root</a><span>|</span><a href="#42629229">parent</a><span>|</span><a href="#42628453">next</a><span>|</span><label class="collapse" for="c-42632132">[-]</label><label class="expand" for="c-42632132">[1 more]</label></div><br/><div class="children"><div class="content">And when it impacts a lot of files, it can break the compiler or introduce bugs. It MUST go in its own PR&#x2F;MR.</div><br/></div></div></div></div></div></div></div></div><div id="42628453" class="c"><input type="checkbox" id="c-42628453" checked=""/><div class="controls bullet"><span class="by">dboreham</span><span>|</span><a href="#42628434">parent</a><span>|</span><a href="#42628655">prev</a><span>|</span><a href="#42631148">next</a><span>|</span><label class="collapse" for="c-42628453">[-]</label><label class="expand" for="c-42628453">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s also literally not part of the job.</div><br/></div></div></div></div><div id="42631148" class="c"><input type="checkbox" id="c-42631148" checked=""/><div class="controls bullet"><span class="by">riwsky</span><span>|</span><a href="#42628434">prev</a><span>|</span><a href="#42628341">next</a><span>|</span><label class="collapse" for="c-42631148">[-]</label><label class="expand" for="c-42631148">[1 more]</label></div><br/><div class="children"><div class="content">Sounds like common law—one of the biggest, oldest &quot;codebases&quot; there is.<p>To quote Wikipedia:<p>&gt; Common law is deeply rooted in stare decisis (&quot;to stand by things decided&quot;), where courts follow precedents established by previous decisions.[5] When a similar case has been resolved, courts typically align their reasoning with the precedent set in that decision.[5] However, in a &quot;case of first impression&quot; with no precedent or clear legislative guidance, judges are empowered to resolve the issue and establish new precedent.</div><br/></div></div><div id="42628341" class="c"><input type="checkbox" id="c-42628341" checked=""/><div class="controls bullet"><span class="by">nitwit005</span><span>|</span><a href="#42631148">prev</a><span>|</span><a href="#42630822">next</a><span>|</span><label class="collapse" for="c-42628341">[-]</label><label class="expand" for="c-42628341">[1 more]</label></div><br/><div class="children"><div class="content">Except, the old stuff will be effectively untestable, and they&#x27;ll demand near perfect coverage for your changes.<p>Also, they&#x27;re will be four incomplete refactorings, and people will insist on it matching the latest refactoring attempt. Which, will then turn out to be impossible, as it&#x27;s too unfinished.</div><br/></div></div><div id="42630822" class="c"><input type="checkbox" id="c-42630822" checked=""/><div class="controls bullet"><span class="by">luisgvv</span><span>|</span><a href="#42628341">prev</a><span>|</span><a href="#42629685">next</a><span>|</span><label class="collapse" for="c-42630822">[-]</label><label class="expand" for="c-42630822">[1 more]</label></div><br/><div class="children"><div class="content">My only advice is &quot;if it ain&#x27;t broke don&#x27;t fix it&quot;. And if you&#x27;re going to improve something, make sure it&#x27;s something small and local, ideally further from the &quot;core logic&quot; of the business.</div><br/></div></div><div id="42629685" class="c"><input type="checkbox" id="c-42629685" checked=""/><div class="controls bullet"><span class="by">lifeisstillgood</span><span>|</span><a href="#42630822">prev</a><span>|</span><a href="#42629137">next</a><span>|</span><label class="collapse" for="c-42629685">[-]</label><label class="expand" for="c-42629685">[1 more]</label></div><br/><div class="children"><div class="content">All these are part of a different mistake - lack of common culture amount the coders.  It’s really really hard, and often antithetical to the politics of the org, but having a common area (email, actual physical meetings) between the “tech leads” - so that’s one in 8 to one in twenty devs, is vital.<p>Sharing code, ideas, good and bad etc is possible - but it requires deliberate effort</div><br/></div></div><div id="42629137" class="c"><input type="checkbox" id="c-42629137" checked=""/><div class="controls bullet"><span class="by">PaulDavisThe1st</span><span>|</span><a href="#42629685">prev</a><span>|</span><a href="#42629727">next</a><span>|</span><label class="collapse" for="c-42629137">[-]</label><label class="expand" for="c-42629137">[3 more]</label></div><br/><div class="children"><div class="content">&gt; You can’t practice it beforehand (no, open source does not give you the same experience).<p>This is ridiculous. Even if you want to ignore the kernel, there are plenty of &quot;large established codebases&quot; in the open source world that are at least 20 years old. Firefox, various *office projects, hell, even my own cross-platform DAW Ardour is now 25 years old and is represented by 1.3M lines of code at this point in time.<p>You absolutely can practice it on open source. What you can&#x27;t practice dealing with is the corporate BS that will typically surround such codebases. Which is not to say that the large established codebases in the open source world are BS free, but it&#x27;s different BS.</div><br/><div id="42630294" class="c"><input type="checkbox" id="c-42630294" checked=""/><div class="controls bullet"><span class="by">sfink</span><span>|</span><a href="#42629137">parent</a><span>|</span><a href="#42629836">next</a><span>|</span><label class="collapse" for="c-42630294">[-]</label><label class="expand" for="c-42630294">[1 more]</label></div><br/><div class="children"><div class="content">Personally, I think that part is just incomplete. I think that there is an attitude that because you have jumped into several older open source projects and successfully made meaningful changes, that you have mastered the art of diving into legacy codebases and can handle anything. Even if those projects were not all that large. People sometimes think that because in theory thousands of people could be looking at the code, that they can treat the code as if it has been vetted over time by thousands of people.<p>But I agree that there are absolutely eligible open source codebases that could be used to practice beforehand. I&#x27;d better; I work on Firefox. It is not a small thing to dive into, but people successfully do, and get solid experience from it.</div><br/></div></div><div id="42629836" class="c"><input type="checkbox" id="c-42629836" checked=""/><div class="controls bullet"><span class="by">francisofascii</span><span>|</span><a href="#42629137">parent</a><span>|</span><a href="#42630294">prev</a><span>|</span><a href="#42629727">next</a><span>|</span><label class="collapse" for="c-42629836">[-]</label><label class="expand" for="c-42629836">[1 more]</label></div><br/><div class="children"><div class="content">Agreed. If you didn’t work on a codebase of 1000 engineers, how else would you practice.</div><br/></div></div></div></div><div id="42629727" class="c"><input type="checkbox" id="c-42629727" checked=""/><div class="controls bullet"><span class="by">_fizz_buzz_</span><span>|</span><a href="#42629137">prev</a><span>|</span><a href="#42628520">next</a><span>|</span><label class="collapse" for="c-42629727">[-]</label><label class="expand" for="c-42629727">[2 more]</label></div><br/><div class="children"><div class="content">&gt; no, open source does not give you the same experience<p>Why not? There are open source projects that are many years old with millions lines of code and many developers.</div><br/><div id="42629744" class="c"><input type="checkbox" id="c-42629744" checked=""/><div class="controls bullet"><span class="by">ZeWaka</span><span>|</span><a href="#42629727">parent</a><span>|</span><a href="#42628520">next</a><span>|</span><label class="collapse" for="c-42629744">[-]</label><label class="expand" for="c-42629744">[1 more]</label></div><br/><div class="children"><div class="content">yeah, this doesn&#x27;t make sense.<p>The project I work on has had a thousand+ contributors of extremely varied skill levels, and is over 15 years old. Many lines of code, but I&#x27;m not going to count them because that&#x27;s a terrible metric.<p>This fits all of the criteria outlined in the article. Sure, it might not apply to portfolio project #32 but there&#x27;s plenty of open source repositories out there that are huge legacy codebases.</div><br/></div></div></div></div><div id="42628520" class="c"><input type="checkbox" id="c-42628520" checked=""/><div class="controls bullet"><span class="by">gwbas1c</span><span>|</span><a href="#42629727">prev</a><span>|</span><label class="collapse" for="c-42628520">[-]</label><label class="expand" for="c-42628520">[4 more]</label></div><br/><div class="children"><div class="content">Unit tests, exhaustive regression tests, and automated tests are the best way to prevent regressions.<p>Time spent writing good unit tests today allows you to make riskier changes tomorrow; good unit tests de-risk refactors.</div><br/><div id="42628544" class="c"><input type="checkbox" id="c-42628544" checked=""/><div class="controls bullet"><span class="by">notyourwork</span><span>|</span><a href="#42628520">parent</a><span>|</span><a href="#42629071">next</a><span>|</span><label class="collapse" for="c-42628544">[-]</label><label class="expand" for="c-42628544">[2 more]</label></div><br/><div class="children"><div class="content">Unit tests cover the single functionality but ignore the system as a whole. Most regressions I&#x27;ve seen in industry are because of a lack of understanding how the system components interact with one another.<p>Therefore, I see unit tests as one pillar but also suspect that without good quality integration or end-to-end testing you won&#x27;t be able to realize the riskier re-factors you describe. Perhaps you consider these part of your regression testing and if so, I agree.</div><br/><div id="42629940" class="c"><input type="checkbox" id="c-42629940" checked=""/><div class="controls bullet"><span class="by">magicalhippo</span><span>|</span><a href="#42628520">root</a><span>|</span><a href="#42628544">parent</a><span>|</span><a href="#42629071">next</a><span>|</span><label class="collapse" for="c-42629940">[-]</label><label class="expand" for="c-42629940">[1 more]</label></div><br/><div class="children"><div class="content">The way I like to view it is that Lego bricks might pass unit tests aka QC with zero issue, but you can still easily build an unreliable mess with them.</div><br/></div></div></div></div><div id="42629071" class="c"><input type="checkbox" id="c-42629071" checked=""/><div class="controls bullet"><span class="by">grumpy_coder</span><span>|</span><a href="#42628520">parent</a><span>|</span><a href="#42628544">prev</a><span>|</span><label class="collapse" for="c-42629071">[-]</label><label class="expand" for="c-42629071">[1 more]</label></div><br/><div class="children"><div class="content">I see an over-reliance on automated tests recently. Often suggesting just passing the CI tests is enough to approve a change. In ancient code it&#x27;s just as important to limit the blast radius of your changes, and have a good reason for making them. Not changing something is the ultimate way to prevent a regression.</div><br/></div></div></div></div></div></div></div></div></div></body></html>