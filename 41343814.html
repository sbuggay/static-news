<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1724576472774" as="style"/><link rel="stylesheet" href="styles.css?v=1724576472774"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://anyblockers.com/posts/postgres-as-a-search-engine">Postgres as a Search Engine</a>Â <span class="domain">(<a href="https://anyblockers.com">anyblockers.com</a>)</span></div><div class="subtext"><span>philippemnoel</span> | <span>17 comments</span></div><br/><div><div id="41345666" class="c"><input type="checkbox" id="c-41345666" checked=""/><div class="controls bullet"><span class="by">ahaapple</span><span>|</span><a href="#41344981">next</a><span>|</span><label class="collapse" for="c-41345666">[-]</label><label class="expand" for="c-41345666">[1 more]</label></div><br/><div class="children"><div class="content">1. Compared with column storage, the performance of vectorized search is relatively poor.<p>2. Postgre is not serverless, so it is not easy to separate read and write, and it is not easy to auto scaling</div><br/></div></div><div id="41344981" class="c"><input type="checkbox" id="c-41344981" checked=""/><div class="controls bullet"><span class="by">feverzsj</span><span>|</span><a href="#41345666">prev</a><span>|</span><a href="#41344871">next</a><span>|</span><label class="collapse" for="c-41344981">[-]</label><label class="expand" for="c-41344981">[2 more]</label></div><br/><div class="children"><div class="content">SQLite ver:<p>1. Full-text search with FTS5<p>2. Semantic search with sqlite-vec<p>3. Fuzzy matching with FTS5 trigram tokenizer<p>4. Bonus: FTS5 bm25() function</div><br/><div id="41345726" class="c"><input type="checkbox" id="c-41345726" checked=""/><div class="controls bullet"><span class="by">bityard</span><span>|</span><a href="#41344981">parent</a><span>|</span><a href="#41344871">next</a><span>|</span><label class="collapse" for="c-41345726">[-]</label><label class="expand" for="c-41345726">[1 more]</label></div><br/><div class="children"><div class="content">FTS5 is amazing.<p>Is there anything that&#x27;s as small and easy to use as FTS5 for indexing text files or JSON documents on the file system?</div><br/></div></div></div></div><div id="41344871" class="c"><input type="checkbox" id="c-41344871" checked=""/><div class="controls bullet"><span class="by">troupo</span><span>|</span><a href="#41344981">prev</a><span>|</span><label class="collapse" for="c-41344871">[-]</label><label class="expand" for="c-41344871">[13 more]</label></div><br/><div class="children"><div class="content">I would add: you should look for alternative solutions when you need to search anything other than English.</div><br/><div id="41345419" class="c"><input type="checkbox" id="c-41345419" checked=""/><div class="controls bullet"><span class="by">jillesvangurp</span><span>|</span><a href="#41344871">parent</a><span>|</span><a href="#41345250">next</a><span>|</span><label class="collapse" for="c-41345419">[-]</label><label class="expand" for="c-41345419">[4 more]</label></div><br/><div class="children"><div class="content">Or when you care at all about optimizing your search ranking. Postgresql has a few alright tools to do vector search and to do some simple things with trigrams. And that can work well for some narrow use cases. If that&#x27;s all you need, great. But this doesn&#x27;t give you a whole lot of control over search ranking. And if search is in anyway on the critical path to revenue for whatever it is your product does, you probably need to invest in making sure your users find what they need. And that means getting a bit systematic about things, using specialized tools, and making sure you have some skills on your team that know how to do this.</div><br/><div id="41345547" class="c"><input type="checkbox" id="c-41345547" checked=""/><div class="controls bullet"><span class="by">0x008</span><span>|</span><a href="#41344871">root</a><span>|</span><a href="#41345419">parent</a><span>|</span><a href="#41345250">next</a><span>|</span><label class="collapse" for="c-41345547">[-]</label><label class="expand" for="c-41345547">[3 more]</label></div><br/><div class="children"><div class="content">You can use custom ranking functions (shown in the article) add weights to columns, etc.<p>What techniques are you talking about that cannot be implemented in Postgres?</div><br/><div id="41345632" class="c"><input type="checkbox" id="c-41345632" checked=""/><div class="controls bullet"><span class="by">jillesvangurp</span><span>|</span><a href="#41344871">root</a><span>|</span><a href="#41345547">parent</a><span>|</span><a href="#41345250">next</a><span>|</span><label class="collapse" for="c-41345632">[-]</label><label class="expand" for="c-41345632">[2 more]</label></div><br/><div class="children"><div class="content">The hundreds of features things like Solr and Elasticsearch&#x2F;Opensearch have. These are complex products but mostly this is a form of necessary complexity.<p>To be blunt, the intersection of people that know what they are doing on this front and people that choose to use Postgres for this is pretty narrow. It does happen and I&#x27;ve seen a few nice things built with Postgres. But mostly it&#x27;s just people using the wrong tool for the job.</div><br/><div id="41345723" class="c"><input type="checkbox" id="c-41345723" checked=""/><div class="controls bullet"><span class="by">danielheath</span><span>|</span><a href="#41344871">root</a><span>|</span><a href="#41345632">parent</a><span>|</span><a href="#41345250">next</a><span>|</span><label class="collapse" for="c-41345723">[-]</label><label class="expand" for="c-41345723">[1 more]</label></div><br/><div class="children"><div class="content">I agree with you, but to be fair, that&#x27;s true of virtually every technology I&#x27;ve encountered in my career.</div><br/></div></div></div></div></div></div></div></div><div id="41345250" class="c"><input type="checkbox" id="c-41345250" checked=""/><div class="controls bullet"><span class="by">kiwicopple</span><span>|</span><a href="#41344871">parent</a><span>|</span><a href="#41345419">prev</a><span>|</span><a href="#41345535">next</a><span>|</span><label class="collapse" for="c-41345250">[-]</label><label class="expand" for="c-41345250">[2 more]</label></div><br/><div class="children"><div class="content">pgroonga is a good Postgres option in these cases<p><a href="https:&#x2F;&#x2F;supabase.com&#x2F;docs&#x2F;guides&#x2F;database&#x2F;extensions&#x2F;pgroonga">https:&#x2F;&#x2F;supabase.com&#x2F;docs&#x2F;guides&#x2F;database&#x2F;extensions&#x2F;pgroong...</a></div><br/><div id="41345300" class="c"><input type="checkbox" id="c-41345300" checked=""/><div class="controls bullet"><span class="by">troupo</span><span>|</span><a href="#41344871">root</a><span>|</span><a href="#41345250">parent</a><span>|</span><a href="#41345535">next</a><span>|</span><label class="collapse" for="c-41345300">[-]</label><label class="expand" for="c-41345300">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a bit weird that the pages claim to support all languages, and all examples are in English. Even the documentation for Groonga, on which it&#x27;s based doesn&#x27;t talk about multiple languages.<p>It looks like at best it makes Postgres aware of more characters</div><br/></div></div></div></div><div id="41345535" class="c"><input type="checkbox" id="c-41345535" checked=""/><div class="controls bullet"><span class="by">0x008</span><span>|</span><a href="#41344871">parent</a><span>|</span><a href="#41345250">prev</a><span>|</span><a href="#41344918">next</a><span>|</span><label class="collapse" for="c-41345535">[-]</label><label class="expand" for="c-41345535">[1 more]</label></div><br/><div class="children"><div class="content">But tsvector supports all sorts of different languages, at least western.</div><br/></div></div><div id="41344918" class="c"><input type="checkbox" id="c-41344918" checked=""/><div class="controls bullet"><span class="by">indulona</span><span>|</span><a href="#41344871">parent</a><span>|</span><a href="#41345535">prev</a><span>|</span><label class="collapse" for="c-41344918">[-]</label><label class="expand" for="c-41344918">[5 more]</label></div><br/><div class="children"><div class="content">Eh, why? Have you ever heard of transliteration?</div><br/><div id="41345633" class="c"><input type="checkbox" id="c-41345633" checked=""/><div class="controls bullet"><span class="by">Terr_</span><span>|</span><a href="#41344871">root</a><span>|</span><a href="#41344918">parent</a><span>|</span><a href="#41345044">next</a><span>|</span><label class="collapse" for="c-41345633">[-]</label><label class="expand" for="c-41345633">[1 more]</label></div><br/><div class="children"><div class="content">Back atcha: Have you ever heard of stemming?<p>That&#x27;ll be different depending on the language, you can&#x27;t simply transliterate to another language and apply that other language&#x27;s rules.<p>For example, in English &quot;manage &#x2F; managers&quot;, are practically the same, but transliterating to Spanish gives you &quot;gestionan &#x2F; gerentes&quot;, which diverge very early on.</div><br/></div></div><div id="41345044" class="c"><input type="checkbox" id="c-41345044" checked=""/><div class="controls bullet"><span class="by">troupo</span><span>|</span><a href="#41344871">root</a><span>|</span><a href="#41344918">parent</a><span>|</span><a href="#41345633">prev</a><span>|</span><label class="collapse" for="c-41345044">[-]</label><label class="expand" for="c-41345044">[3 more]</label></div><br/><div class="children"><div class="content">Because search in different languages needs to be aware of that language&#x27;s peculiarities.<p>Including but not limited to things that English doesn&#x27;t have or only has in vestigial forms like grammatical cases, complex word morphology, declensions etc.</div><br/><div id="41345513" class="c"><input type="checkbox" id="c-41345513" checked=""/><div class="controls bullet"><span class="by">fpoling</span><span>|</span><a href="#41344871">root</a><span>|</span><a href="#41345044">parent</a><span>|</span><a href="#41345190">next</a><span>|</span><label class="collapse" for="c-41345513">[-]</label><label class="expand" for="c-41345513">[1 more]</label></div><br/><div class="children"><div class="content">For example, it took Google years before they properly implemented search in Russian.  That allowed Russian Yandex to win Russian market.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>