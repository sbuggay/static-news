<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1684227658934" as="style"/><link rel="stylesheet" href="styles.css?v=1684227658934"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://makefiletutorial.com/#top">Learn Makefiles with the Tastiest Examples</a> <span class="domain">(<a href="https://makefiletutorial.com">makefiletutorial.com</a>)</span></div><div class="subtext"><span>ingve</span> | <span>72 comments</span></div><br/><div><div id="35954749" class="c"><input type="checkbox" id="c-35954749" checked=""/><div class="controls bullet"><span class="by">dijit</span><span>|</span><a href="#35957538">next</a><span>|</span><label class="collapse" for="c-35954749">[-]</label><label class="expand" for="c-35954749">[39 more]</label></div><br/><div class="children"><div class="content">Rant incoming;<p>I really don’t like Make for the common use-cases it is being used for in the modern day, such as the Golang ecosystem or in many cases: creating docker files.<p>Make, at its core, is a tool that is meant to help you structure your dependencies for incrementally building things, but people use it as a glorified task runner simply due to the fact that it’s such a common build tool that it is <i>nearly</i> always installed if you have a development toolchain on your machine.<p>Go and docker already have incremental compilation built in, and docker doesn’t give definable artifacts so you can’t make other things depend on them either<p>It is a powerful tool, but the syntax is hideous and has more jagged edges than bash does, and we aren’t even <i>using</i> it in a way that justifies this. Makes me so frustrated for some reason.<p>Like everyone deciding to use a supercar to do farmwork.</div><br/><div id="35957460" class="c"><input type="checkbox" id="c-35957460" checked=""/><div class="controls bullet"><span class="by">Groxx</span><span>|</span><a href="#35954749">parent</a><span>|</span><a href="#35955999">next</a><span>|</span><label class="collapse" for="c-35957460">[-]</label><label class="expand" for="c-35957460">[6 more]</label></div><br/><div class="children"><div class="content">Yeah. And it&#x27;s wildly misunderstood too, so you get random people writing and running `make clean test` stuff that inherently disagrees with itself, which can do all kinds of nonsense if your system isn&#x27;t normal&#x2F;clean&#x2F;running on Thursday.<p>I do still use it for simple automation, because it&#x27;s nice to have a language-agnostic way to do simple things. But once it grows beyond about a page of text it tends to become a real nightmare, and is nigh impossible for most people to help maintain... which is not at all helped by its absolute lack of clear best-practices or warnings when misconfigured, and poor meshing with many common systems (like source-modifying tools, e.g. gofmt).<p>It doesn&#x27;t help that every guide starts out with<p><pre><code>    # so easy!
    thing:
      .&#x2F;build thing
</code></pre>
When in reality you pretty much always need <i>at least</i> how this page ends, to be even slightly stable and maintainable:<p><pre><code>    # The final build step.
    $(BUILD_DIR)&#x2F;$(TARGET_EXEC): $(OBJS)
      $(CXX) $(OBJS) -o $@ $(LDFLAGS)
    
    # Build step for C source
    $(BUILD_DIR)&#x2F;%.c.o: %.c
      mkdir -p $(dir $@)
      $(CC) $(CPPFLAGS) $(CFLAGS) -c $&lt; -o $@
    
    # Build step for C++ source
    $(BUILD_DIR)&#x2F;%.cpp.o: %.cpp
      mkdir -p $(dir $@)
      $(CXX) $(CPPFLAGS) $(CXXFLAGS) -c $&lt; -o $@
</code></pre>
It&#x27;s a horrifying bait-and-switch that a lot of people never fully learn their way through to the end.</div><br/><div id="35959100" class="c"><input type="checkbox" id="c-35959100" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#35954749">root</a><span>|</span><a href="#35957460">parent</a><span>|</span><a href="#35958275">next</a><span>|</span><label class="collapse" for="c-35959100">[-]</label><label class="expand" for="c-35959100">[2 more]</label></div><br/><div class="children"><div class="content">That&#x27;s true of every language, yes?<p>It always starts with `print &#x27;Hello world&#x27;`, but it isn&#x27;t that simple.</div><br/><div id="35959223" class="c"><input type="checkbox" id="c-35959223" checked=""/><div class="controls bullet"><span class="by">samhh</span><span>|</span><a href="#35954749">root</a><span>|</span><a href="#35959100">parent</a><span>|</span><a href="#35958275">next</a><span>|</span><label class="collapse" for="c-35959223">[-]</label><label class="expand" for="c-35959223">[1 more]</label></div><br/><div class="children"><div class="content">In terms of task running specifically it does generally stay that simple for the likes of just.<p>The only complexity there is getting it installed on everyone&#x27;s machine, but that&#x27;s true of most tooling, even the common stuff given versions won&#x27;t match. I solve that with Nix.</div><br/></div></div></div></div><div id="35958275" class="c"><input type="checkbox" id="c-35958275" checked=""/><div class="controls bullet"><span class="by">Someone</span><span>|</span><a href="#35954749">root</a><span>|</span><a href="#35957460">parent</a><span>|</span><a href="#35959100">prev</a><span>|</span><a href="#35958090">next</a><span>|</span><label class="collapse" for="c-35958275">[-]</label><label class="expand" for="c-35958275">[2 more]</label></div><br/><div class="children"><div class="content">I do not rule out that one exists, but what tool looks simpler (I wanted to say ‘nicer’, but I think we should avoid ‘it looks ugly’ arguments; I think those largely are about familiarity) once you start building something from code written in multiple programming languages?<p>And what tool is as powerful that doesn’t have the ‘problem’ that a lot of people never learn it fully? (Why would I learn <i>make</i> or any other tool to the full? I browse its manual so that I know what it can do, and (hopefully) remember features exist when I need them, so that I can (often temporarily) learn them then)</div><br/><div id="35958675" class="c"><input type="checkbox" id="c-35958675" checked=""/><div class="controls bullet"><span class="by">Groxx</span><span>|</span><a href="#35954749">root</a><span>|</span><a href="#35958275">parent</a><span>|</span><a href="#35958090">next</a><span>|</span><label class="collapse" for="c-35958675">[-]</label><label class="expand" for="c-35958675">[1 more]</label></div><br/><div class="children"><div class="content">Most of Make is quite reasonable.  The simple stuff is clear and effective and a lot of the foundations are good (dependency order? only redo changes? great!)<p>It&#x27;s the uncountable number of edge cases, lack of versioning&#x2F;features (you can&#x27;t declare what you need, you just succeed&#x2F;fail&#x2F;misbehave, often silently), massive <i>massive</i> problems dealing with entirely normal things in file paths like <i>spaces</i>, and more useful output than `make -d` for very common cases like &quot;why am I rebuilding every time&quot; &#x2F; accidentally cyclic dependencies.<p>For starters.<p>Make does a lot right, but the amount of inconsistencies and friction to be reliable with it is truly absurd and unnecessary, and you need to go to extreme lengths to correctly handle them (e.g. cmake).</div><br/></div></div></div></div><div id="35958090" class="c"><input type="checkbox" id="c-35958090" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#35954749">root</a><span>|</span><a href="#35957460">parent</a><span>|</span><a href="#35958275">prev</a><span>|</span><a href="#35955999">next</a><span>|</span><label class="collapse" for="c-35958090">[-]</label><label class="expand" for="c-35958090">[1 more]</label></div><br/><div class="children"><div class="content">FYI if you care to, you can prevent `make clean test` by looking at `$(MAKECMDGOALS)`.</div><br/></div></div></div></div><div id="35955999" class="c"><input type="checkbox" id="c-35955999" checked=""/><div class="controls bullet"><span class="by">Izkata</span><span>|</span><a href="#35954749">parent</a><span>|</span><a href="#35957460">prev</a><span>|</span><a href="#35957140">next</a><span>|</span><label class="collapse" for="c-35955999">[-]</label><label class="expand" for="c-35955999">[2 more]</label></div><br/><div class="children"><div class="content">I use it as a task runner with dependencies in python projects.  In particular, it checks requirements files against the virtualenv to see if anything needs to be installed&#x2F;updated, then all the tasks depend on that.  If you&#x27;re up-to-date the task runs immediately, if you&#x27;re not it&#x27;ll update for you.<p>&gt; and docker doesn’t give definable artifacts so you can’t make other things depend on them either<p>Similar to how old projects have &quot;make configure&quot; to do some initial setup before &quot;make&quot; actually builds the project, I&#x27;ve done stuff on occasion where something like &quot;make check&quot; would pull information out of a system and create timestamped files in a scratch&#x2F; directory.  Then the normal &quot;make&quot; would compare those files to the codebase to see if the system needed to be updated.<p>It is different from the first use I just mentioned, since you need two commands and it&#x27;s not entirely automatic, but it&#x27;s still simpler than checking each of the dependencies yourself.</div><br/><div id="35956181" class="c"><input type="checkbox" id="c-35956181" checked=""/><div class="controls bullet"><span class="by">silverwind</span><span>|</span><a href="#35954749">root</a><span>|</span><a href="#35955999">parent</a><span>|</span><a href="#35957140">next</a><span>|</span><label class="collapse" for="c-35956181">[-]</label><label class="expand" for="c-35956181">[1 more]</label></div><br/><div class="children"><div class="content">I too use Make to install `node_modules` and `.venv`.<p>It is very convenient never having to ask oneself &quot;Is my node_modules up to date?&quot; after pulling or switching branches. I&#x27;ll just let Make figure that out.</div><br/></div></div></div></div><div id="35957140" class="c"><input type="checkbox" id="c-35957140" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#35954749">parent</a><span>|</span><a href="#35955999">prev</a><span>|</span><a href="#35957255">next</a><span>|</span><label class="collapse" for="c-35957140">[-]</label><label class="expand" for="c-35957140">[8 more]</label></div><br/><div class="children"><div class="content">Hard disagree.<p><pre><code>    GO_SRCS=$(shell find src -name &#x27;*.go&#x27; -not -name &#x27;*_test.go)
    GO_TESTS=$(shell find src -name &#x27;*_test.go&#x27;)

    .PHONY: run
    docker-run: target&#x2F;image.target
        docker run example

    .PHONY: integration-test
    integration-test: target&#x2F;integration-test.target

    .PHONY: test
    test: target&#x2F;test.target

    target&#x2F;bin: $(GO_SRCS)
        mkdir -p $(@D)
        GOOS=linux-amd64 go build -ldflags=&#x27;-s -w&#x27; -o $@

    target&#x2F;context.target: Dockerfile target&#x2F;bin
        rm -fr $(@:.target=)
        mkdir -p $(@:.target=)
        cp Dockerfile target&#x2F;bin $(@:.target=)
    
    target&#x2F;image.target: target&#x2F;context.target
        docker build -t example $(&lt;:.target=)

    target&#x2F;integration-test.target: target&#x2F;image.target
        # TODO: test the docker image

    target&#x2F;test.target: $(GO_SRCS) $(GO_TESTS)
        go test
</code></pre>
What is your better thing?<p>(The answer is Bazel, but if you think Make is a &quot;supercar&quot;.......)</div><br/><div id="35957405" class="c"><input type="checkbox" id="c-35957405" checked=""/><div class="controls bullet"><span class="by">rgoulter</span><span>|</span><a href="#35954749">root</a><span>|</span><a href="#35957140">parent</a><span>|</span><a href="#35958344">next</a><span>|</span><label class="collapse" for="c-35957405">[-]</label><label class="expand" for="c-35957405">[4 more]</label></div><br/><div class="children"><div class="content">Most (all?) of your Makefile targets don&#x27;t represent actual files to &#x27;make&#x27;.<p>You&#x27;re using make to run a bunch of tasks, including where tasks may depend on other tasks having been run before.<p>A task-runner tool like `just` is better suited to this task.
<a href="https:&#x2F;&#x2F;github.com&#x2F;casey&#x2F;just">https:&#x2F;&#x2F;github.com&#x2F;casey&#x2F;just</a><p>`just` has some nice UX improvements over `make`. (e.g. doesn&#x27;t require soft tabs, can list recipes out of the box, recipes can take command line arguments, supports .env files, can be run from any subdirectory).</div><br/><div id="35957604" class="c"><input type="checkbox" id="c-35957604" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#35954749">root</a><span>|</span><a href="#35957405">parent</a><span>|</span><a href="#35958100">next</a><span>|</span><label class="collapse" for="c-35957604">[-]</label><label class="expand" for="c-35957604">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Most (all?) of your Makefile targets don&#x27;t represent actual files to &#x27;make&#x27;.<p>&gt; You&#x27;re using make to run a bunch of tasks, including where tasks may depend on other tasks having been run before.<p>And the cool thing is....it works for both!<p>It can represent an actual file (e.g. a compiled binary) or abstract result (e.g., a successful test).</div><br/></div></div><div id="35958100" class="c"><input type="checkbox" id="c-35958100" checked=""/><div class="controls bullet"><span class="by">therein</span><span>|</span><a href="#35954749">root</a><span>|</span><a href="#35957405">parent</a><span>|</span><a href="#35957604">prev</a><span>|</span><a href="#35958344">next</a><span>|</span><label class="collapse" for="c-35958100">[-]</label><label class="expand" for="c-35958100">[1 more]</label></div><br/><div class="children"><div class="content">I wish `just` had a way to capture the output of functions and act on them.
Without that, it is only a slightly more straight-forward Make that&#x27;s way less likely to be installed on the system plus you have to take additional steps if you want shell completion for tasks.</div><br/></div></div></div></div><div id="35958344" class="c"><input type="checkbox" id="c-35958344" checked=""/><div class="controls bullet"><span class="by">lenkite</span><span>|</span><a href="#35954749">root</a><span>|</span><a href="#35957140">parent</a><span>|</span><a href="#35957405">prev</a><span>|</span><a href="#35957255">next</a><span>|</span><label class="collapse" for="c-35958344">[-]</label><label class="expand" for="c-35958344">[3 more]</label></div><br/><div class="children"><div class="content">Why do we need to add `.PHONY` for every target ? This is one of the things I utterly despise about make.</div><br/><div id="35959075" class="c"><input type="checkbox" id="c-35959075" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#35954749">root</a><span>|</span><a href="#35958344">parent</a><span>|</span><a href="#35958407">next</a><span>|</span><label class="collapse" for="c-35959075">[-]</label><label class="expand" for="c-35959075">[1 more]</label></div><br/><div class="children"><div class="content">.PHONY is how you distinguish between targets that are actual files vs targets that are virtual.<p>Seems like useful information to me....<p>It&#x27;s best practice, though the only time you <i>need</i> it is when a virtual target happens to have the same name as an actual file.</div><br/></div></div><div id="35958407" class="c"><input type="checkbox" id="c-35958407" checked=""/><div class="controls bullet"><span class="by">jbverschoor</span><span>|</span><a href="#35954749">root</a><span>|</span><a href="#35958344">parent</a><span>|</span><a href="#35959075">prev</a><span>|</span><a href="#35957255">next</a><span>|</span><label class="collapse" for="c-35958407">[-]</label><label class="expand" for="c-35958407">[1 more]</label></div><br/><div class="children"><div class="content">Because make is misused<p>Make is a tool to make files based on dependencies<p>It was not created as a scripting language. It understands trees.<p>It is not to “make” your project. It “makes” “files”</div><br/></div></div></div></div></div></div><div id="35957255" class="c"><input type="checkbox" id="c-35957255" checked=""/><div class="controls bullet"><span class="by">zie</span><span>|</span><a href="#35954749">parent</a><span>|</span><a href="#35957140">prev</a><span>|</span><a href="#35958668">next</a><span>|</span><label class="collapse" for="c-35957255">[-]</label><label class="expand" for="c-35957255">[1 more]</label></div><br/><div class="children"><div class="content">You are correct that Make is being abused because it&#x27;s common.  Me, I&#x27;m going to keep abusing Make vs bothering to find something supposedly better, that will then inject dependency startup problems I&#x27;d rather avoid.<p>Yes, abusing Make the way I and many others do is not the ideal use case, but it works just fine. It&#x27;s good enough at being a task manager.</div><br/></div></div><div id="35958668" class="c"><input type="checkbox" id="c-35958668" checked=""/><div class="controls bullet"><span class="by">r0l1</span><span>|</span><a href="#35954749">parent</a><span>|</span><a href="#35957255">prev</a><span>|</span><a href="#35956904">next</a><span>|</span><label class="collapse" for="c-35958668">[-]</label><label class="expand" for="c-35958668">[1 more]</label></div><br/><div class="children"><div class="content">I agree. That&#x27;s why we use the small grml tool as task&#x2F;command runner in all our projects.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;desertbit&#x2F;grml">https:&#x2F;&#x2F;github.com&#x2F;desertbit&#x2F;grml</a></div><br/></div></div><div id="35956904" class="c"><input type="checkbox" id="c-35956904" checked=""/><div class="controls bullet"><span class="by">evancordell</span><span>|</span><a href="#35954749">parent</a><span>|</span><a href="#35958668">prev</a><span>|</span><a href="#35955252">next</a><span>|</span><label class="collapse" for="c-35956904">[-]</label><label class="expand" for="c-35956904">[2 more]</label></div><br/><div class="children"><div class="content">I have long held similar opinions on make, and I&#x27;ve recently started using mage[0] in more and more go projects and have been happy with the result.<p>It&#x27;s more task-oriented, the way people tend to write Makefiles with .PHONY rules, but it&#x27;s all in go. It can be bootstrapped just with go too, and comes with some utilities to do make-like incremental builds if you need to.<p>[0]: <a href="https:&#x2F;&#x2F;magefile.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;magefile.org&#x2F;</a></div><br/><div id="35958040" class="c"><input type="checkbox" id="c-35958040" checked=""/><div class="controls bullet"><span class="by">emptysongglass</span><span>|</span><a href="#35954749">root</a><span>|</span><a href="#35956904">parent</a><span>|</span><a href="#35955252">next</a><span>|</span><label class="collapse" for="c-35958040">[-]</label><label class="expand" for="c-35958040">[1 more]</label></div><br/><div class="children"><div class="content">How does it compare to Just?</div><br/></div></div></div></div><div id="35955252" class="c"><input type="checkbox" id="c-35955252" checked=""/><div class="controls bullet"><span class="by">tyingq</span><span>|</span><a href="#35954749">parent</a><span>|</span><a href="#35956904">prev</a><span>|</span><a href="#35956188">next</a><span>|</span><label class="collapse" for="c-35955252">[-]</label><label class="expand" for="c-35955252">[1 more]</label></div><br/><div class="children"><div class="content">Agree, though it can be handy for sort of non-standard dependency stuff.  Like if you need to pull some thing with curl before a build, and you want &quot;curl succeeded (exited zero)&quot; to be a pre-requisite for that build. It&#x27;s often less work to get a Makefile to do that than a script, or the make-like things that come with some other languages.<p>Maybe not the best example, but if you have a project with several weird things like that, make is often easier.</div><br/></div></div><div id="35956188" class="c"><input type="checkbox" id="c-35956188" checked=""/><div class="controls bullet"><span class="by">clintonc</span><span>|</span><a href="#35954749">parent</a><span>|</span><a href="#35955252">prev</a><span>|</span><a href="#35955350">next</a><span>|</span><label class="collapse" for="c-35956188">[-]</label><label class="expand" for="c-35956188">[1 more]</label></div><br/><div class="children"><div class="content">True.<p>I do, however, like having some of the amenities of a task runner without bringing in the &quot;cruft&quot; that&#x27;s suited toward incremental builds. I like using Just (<a href="https:&#x2F;&#x2F;just.systems&#x2F;" rel="nofollow">https:&#x2F;&#x2F;just.systems&#x2F;</a>) for those cases.</div><br/></div></div><div id="35955350" class="c"><input type="checkbox" id="c-35955350" checked=""/><div class="controls bullet"><span class="by">mongol</span><span>|</span><a href="#35954749">parent</a><span>|</span><a href="#35956188">prev</a><span>|</span><a href="#35955854">next</a><span>|</span><label class="collapse" for="c-35955350">[-]</label><label class="expand" for="c-35955350">[4 more]</label></div><br/><div class="children"><div class="content">But is there not a &quot;minimal Makefile&quot; type of subset that you can use that appears really clean and tidy? My Makefiles are super basic and are basically task runners. Perhaps there are traps I have not fallen into but I value that I can count on them working on whatever distro I run in 5 years time.</div><br/><div id="35955851" class="c"><input type="checkbox" id="c-35955851" checked=""/><div class="controls bullet"><span class="by">assbuttbuttass</span><span>|</span><a href="#35954749">root</a><span>|</span><a href="#35955350">parent</a><span>|</span><a href="#35955854">next</a><span>|</span><label class="collapse" for="c-35955851">[-]</label><label class="expand" for="c-35955851">[3 more]</label></div><br/><div class="children"><div class="content">A shell script will also work in whatever distro in whatever years time</div><br/><div id="35957175" class="c"><input type="checkbox" id="c-35957175" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#35954749">root</a><span>|</span><a href="#35955851">parent</a><span>|</span><a href="#35956854">next</a><span>|</span><label class="collapse" for="c-35957175">[-]</label><label class="expand" for="c-35957175">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, but Make is parallel+incremental.<p>And can do what a shell script can.</div><br/></div></div><div id="35956854" class="c"><input type="checkbox" id="c-35956854" checked=""/><div class="controls bullet"><span class="by">kevin_thibedeau</span><span>|</span><a href="#35954749">root</a><span>|</span><a href="#35955851">parent</a><span>|</span><a href="#35957175">prev</a><span>|</span><a href="#35955854">next</a><span>|</span><label class="collapse" for="c-35956854">[-]</label><label class="expand" for="c-35956854">[1 more]</label></div><br/><div class="children"><div class="content">A distro running a Busybox userland doesn&#x27;t necessarily support the same command options as one running GNU or BSD.</div><br/></div></div></div></div></div></div><div id="35955854" class="c"><input type="checkbox" id="c-35955854" checked=""/><div class="controls bullet"><span class="by">antipaul</span><span>|</span><a href="#35954749">parent</a><span>|</span><a href="#35955350">prev</a><span>|</span><a href="#35955361">next</a><span>|</span><label class="collapse" for="c-35955854">[-]</label><label class="expand" for="c-35955854">[6 more]</label></div><br/><div class="children"><div class="content">That&#x27;s a fine opinion, but I haven&#x27;t found a more widely available tool to describe a project &quot;recipe&quot;, where project is written in one or more, of many possible languages<p>* Snakefile -&gt; requires installation<p>* bash -&gt; macOS is now ZSH. (Is bash a better choice than Make?)<p>* python -&gt; what if I&#x27;m not using python?<p>What else is as &quot;accessible&quot; as Makefile?<p>EDIT: formatting</div><br/><div id="35955885" class="c"><input type="checkbox" id="c-35955885" checked=""/><div class="controls bullet"><span class="by">jjnoakes</span><span>|</span><a href="#35954749">root</a><span>|</span><a href="#35955854">parent</a><span>|</span><a href="#35956013">next</a><span>|</span><label class="collapse" for="c-35955885">[-]</label><label class="expand" for="c-35955885">[4 more]</label></div><br/><div class="children"><div class="content">The Makefile is going to be running external commands, no? So you still have the same problem (what are those external commands written in?) - whatever the answer to that question is, your task runner could be written in as well, probably.<p>At least, that&#x27;s how I prefer to do it. A project that&#x27;s heavy JS? Use a JS task runner. Heavy python? Python task runner. Heavy shell? And so on.</div><br/><div id="35956644" class="c"><input type="checkbox" id="c-35956644" checked=""/><div class="controls bullet"><span class="by">taeric</span><span>|</span><a href="#35954749">root</a><span>|</span><a href="#35955885">parent</a><span>|</span><a href="#35957820">next</a><span>|</span><label class="collapse" for="c-35956644">[-]</label><label class="expand" for="c-35956644">[1 more]</label></div><br/><div class="children"><div class="content">I have seen few hells as bad as &quot;just use the target runtime for build.&quot;</div><br/></div></div><div id="35957820" class="c"><input type="checkbox" id="c-35957820" checked=""/><div class="controls bullet"><span class="by">alwillis</span><span>|</span><a href="#35954749">root</a><span>|</span><a href="#35955885">parent</a><span>|</span><a href="#35956644">prev</a><span>|</span><a href="#35957183">next</a><span>|</span><label class="collapse" for="c-35957820">[-]</label><label class="expand" for="c-35957820">[1 more]</label></div><br/><div class="children"><div class="content">&gt; A project that&#x27;s heavy JS? Use a JS task runner.<p>Trying to keep up with JS task runners for web projects is why I started using Make and haven’t looked back.</div><br/></div></div><div id="35957183" class="c"><input type="checkbox" id="c-35957183" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#35954749">root</a><span>|</span><a href="#35955885">parent</a><span>|</span><a href="#35957820">prev</a><span>|</span><a href="#35956013">next</a><span>|</span><label class="collapse" for="c-35957183">[-]</label><label class="expand" for="c-35957183">[1 more]</label></div><br/><div class="children"><div class="content">Step 0: Ensure your project only uses one thing.</div><br/></div></div></div></div><div id="35956013" class="c"><input type="checkbox" id="c-35956013" checked=""/><div class="controls bullet"><span class="by">Izkata</span><span>|</span><a href="#35954749">root</a><span>|</span><a href="#35955854">parent</a><span>|</span><a href="#35955885">prev</a><span>|</span><a href="#35955361">next</a><span>|</span><label class="collapse" for="c-35956013">[-]</label><label class="expand" for="c-35956013">[1 more]</label></div><br/><div class="children"><div class="content">&gt; * bash -&gt; macOS is now ZSH. (Is bash a better choice than Make?)<p>Makefiles don&#x27;t run code themselves, the recipe is written to a file and executed using &quot;sh&quot; (at least by default, the shell to use is changeable).</div><br/></div></div></div></div><div id="35955361" class="c"><input type="checkbox" id="c-35955361" checked=""/><div class="controls bullet"><span class="by">LeBit</span><span>|</span><a href="#35954749">parent</a><span>|</span><a href="#35955854">prev</a><span>|</span><a href="#35957176">next</a><span>|</span><label class="collapse" for="c-35955361">[-]</label><label class="expand" for="c-35955361">[4 more]</label></div><br/><div class="children"><div class="content">go-task is a very good task runner. Better than “just&quot; IMO.  I am now using go-task with every project. Right after creating the gitignore, I create the Taskfile.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;go-task&#x2F;task">https:&#x2F;&#x2F;github.com&#x2F;go-task&#x2F;task</a></div><br/><div id="35958879" class="c"><input type="checkbox" id="c-35958879" checked=""/><div class="controls bullet"><span class="by">dividedbyzero</span><span>|</span><a href="#35954749">root</a><span>|</span><a href="#35955361">parent</a><span>|</span><a href="#35955622">next</a><span>|</span><label class="collapse" for="c-35958879">[-]</label><label class="expand" for="c-35958879">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Better than “just&quot; IMO.<p>Could you elaborate on its advantages vs just?</div><br/></div></div><div id="35955622" class="c"><input type="checkbox" id="c-35955622" checked=""/><div class="controls bullet"><span class="by">leetrout</span><span>|</span><a href="#35954749">root</a><span>|</span><a href="#35955361">parent</a><span>|</span><a href="#35958879">prev</a><span>|</span><a href="#35957176">next</a><span>|</span><label class="collapse" for="c-35955622">[-]</label><label class="expand" for="c-35955622">[2 more]</label></div><br/><div class="children"><div class="content">Second time that has been mentioned today. I wish it wasn&#x27;t YAML.</div><br/><div id="35957110" class="c"><input type="checkbox" id="c-35957110" checked=""/><div class="controls bullet"><span class="by">fbdab103</span><span>|</span><a href="#35954749">root</a><span>|</span><a href="#35955622">parent</a><span>|</span><a href="#35957176">next</a><span>|</span><label class="collapse" for="c-35957110">[-]</label><label class="expand" for="c-35957110">[1 more]</label></div><br/><div class="children"><div class="content">You were not kidding, I am not loving that syntax.</div><br/></div></div></div></div></div></div><div id="35957176" class="c"><input type="checkbox" id="c-35957176" checked=""/><div class="controls bullet"><span class="by">jimbob45</span><span>|</span><a href="#35954749">parent</a><span>|</span><a href="#35955361">prev</a><span>|</span><a href="#35957985">next</a><span>|</span><label class="collapse" for="c-35957176">[-]</label><label class="expand" for="c-35957176">[1 more]</label></div><br/><div class="children"><div class="content">What’s your preferred alternative?</div><br/></div></div><div id="35957985" class="c"><input type="checkbox" id="c-35957985" checked=""/><div class="controls bullet"><span class="by">gigatexal</span><span>|</span><a href="#35954749">parent</a><span>|</span><a href="#35957176">prev</a><span>|</span><a href="#35957538">next</a><span>|</span><label class="collapse" for="c-35957985">[-]</label><label class="expand" for="c-35957985">[1 more]</label></div><br/><div class="children"><div class="content">I take the other side of this and find that it being so useful its use as a task runner just means make is really awesome. Even when “misused” it’s super useful.<p>That being said I really do like this article. I want to learn how to use make properly.</div><br/></div></div></div></div><div id="35957538" class="c"><input type="checkbox" id="c-35957538" checked=""/><div class="controls bullet"><span class="by">rubicks</span><span>|</span><a href="#35954749">prev</a><span>|</span><a href="#35955115">next</a><span>|</span><label class="collapse" for="c-35957538">[-]</label><label class="expand" for="c-35957538">[4 more]</label></div><br/><div class="children"><div class="content">GNU Make is shockingly versatile and unreasonably effective. I have used Makefiles to build, check, and install projects in C, C++, golang, and python. I have abused Makefiles to generate websites, Docker images, PDFs (from LaTeX), and even macro-expanded yaml. It&#x27;s old and weird and I love it.</div><br/><div id="35957866" class="c"><input type="checkbox" id="c-35957866" checked=""/><div class="controls bullet"><span class="by">nequo</span><span>|</span><a href="#35957538">parent</a><span>|</span><a href="#35955115">next</a><span>|</span><label class="collapse" for="c-35957866">[-]</label><label class="expand" for="c-35957866">[3 more]</label></div><br/><div class="children"><div class="content">&gt; It&#x27;s old and weird and I love it.<p>Likewise. And it has the added benefit of parallelizing those website and LaTeX builds according to the dependency graph by just adding “-j4” to the make call.</div><br/><div id="35958061" class="c"><input type="checkbox" id="c-35958061" checked=""/><div class="controls bullet"><span class="by">nephanth</span><span>|</span><a href="#35957538">root</a><span>|</span><a href="#35957866">parent</a><span>|</span><a href="#35955115">next</a><span>|</span><label class="collapse" for="c-35958061">[-]</label><label class="expand" for="c-35958061">[2 more]</label></div><br/><div class="children"><div class="content">What is there to parallelize in a latex build? Isn&#x27;t it incremental?</div><br/><div id="35958422" class="c"><input type="checkbox" id="c-35958422" checked=""/><div class="controls bullet"><span class="by">porridgeandrice</span><span>|</span><a href="#35957538">root</a><span>|</span><a href="#35958061">parent</a><span>|</span><a href="#35955115">next</a><span>|</span><label class="collapse" for="c-35958422">[-]</label><label class="expand" for="c-35958422">[1 more]</label></div><br/><div class="children"><div class="content">I assume parallelizing latex builds of separate sections for their website. Like building out blogs&#x2F;physics and blogs&#x2F;cs from their latex equivalents in parallel.</div><br/></div></div></div></div></div></div></div></div><div id="35955115" class="c"><input type="checkbox" id="c-35955115" checked=""/><div class="controls bullet"><span class="by">kstrauser</span><span>|</span><a href="#35957538">prev</a><span>|</span><a href="#35955407">next</a><span>|</span><label class="collapse" for="c-35955115">[-]</label><label class="expand" for="c-35955115">[11 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve started using justfiles (<a href="https:&#x2F;&#x2F;just.systems&#x2F;man&#x2F;en&#x2F;" rel="nofollow">https:&#x2F;&#x2F;just.systems&#x2F;man&#x2F;en&#x2F;</a>) for everything I would&#x27;ve previously used Makefiles for that aren&#x27;t directly related to compiling code.<p>Make is a wonderful way to provide a standard set of entry points into working with repos. For instance, if you can standardize on `make setup`, `make test`, `make docker`, etc. on all of your organization&#x27;s code, it&#x27;s very easy for a new develop on a project to start contributing quickly. You <i>could</i> do that with shell scripts, but then you have to re-implement all the command line parsing that make gives you for free. And with justfiles, you can have something that looks and feels like make, but with a more pleasant syntax for non-compiling jobs.<p>IMO, Just is to make as zsh&#x2F;fish are to bash. It&#x27;s not ubiquitously available, and it&#x27;s not 100% backward compatible, but if you can convince your coworkers to adopt it as your standard, it makes life that much easier for everyone.</div><br/><div id="35956224" class="c"><input type="checkbox" id="c-35956224" checked=""/><div class="controls bullet"><span class="by">silverwind</span><span>|</span><a href="#35955115">parent</a><span>|</span><a href="#35955378">next</a><span>|</span><label class="collapse" for="c-35956224">[-]</label><label class="expand" for="c-35956224">[2 more]</label></div><br/><div class="children"><div class="content">Just does not support dependency tracking. That eliminates a huge chunk of make&#x27;s usefulness right there.</div><br/><div id="35956303" class="c"><input type="checkbox" id="c-35956303" checked=""/><div class="controls bullet"><span class="by">kstrauser</span><span>|</span><a href="#35955115">root</a><span>|</span><a href="#35956224">parent</a><span>|</span><a href="#35955378">next</a><span>|</span><label class="collapse" for="c-35956303">[-]</label><label class="expand" for="c-35956303">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s a feature if you&#x27;re not using a language that needs it. I&#x27;ve never, not once, ever wanted or needed it for working with Python code, for example.</div><br/></div></div></div></div><div id="35955378" class="c"><input type="checkbox" id="c-35955378" checked=""/><div class="controls bullet"><span class="by">roqi</span><span>|</span><a href="#35955115">parent</a><span>|</span><a href="#35956224">prev</a><span>|</span><a href="#35955407">next</a><span>|</span><label class="collapse" for="c-35955378">[-]</label><label class="expand" for="c-35955378">[8 more]</label></div><br/><div class="children"><div class="content">&gt; And with justfiles, you can have something that looks and feels like make, but with a more pleasant syntax for non-compiling jobs.<p>Make is a part of UNIX, which ensures it is extremely stable and is available on all UNIX systems. You don&#x27;t get that from justfiles. You get syntactic sugar, but all the best parts of Make are thrown out of the window.</div><br/><div id="35958818" class="c"><input type="checkbox" id="c-35958818" checked=""/><div class="controls bullet"><span class="by">nprateem</span><span>|</span><a href="#35955115">root</a><span>|</span><a href="#35955378">parent</a><span>|</span><a href="#35955574">next</a><span>|</span><label class="collapse" for="c-35958818">[-]</label><label class="expand" for="c-35958818">[1 more]</label></div><br/><div class="children"><div class="content">If the best thing going for make is its ubiquity I&#x27;d rather have a tool that&#x27;s better designed (for non- compiling jobs).</div><br/></div></div><div id="35955574" class="c"><input type="checkbox" id="c-35955574" checked=""/><div class="controls bullet"><span class="by">kstrauser</span><span>|</span><a href="#35955115">root</a><span>|</span><a href="#35955378">parent</a><span>|</span><a href="#35958818">prev</a><span>|</span><a href="#35957099">next</a><span>|</span><label class="collapse" for="c-35955574">[-]</label><label class="expand" for="c-35955574">[2 more]</label></div><br/><div class="children"><div class="content">OK, that&#x27;s just not true. For starters, which make? GNU and BSD are common variants, and aren&#x27;t 100% compatible. The overlap is large and useful, but does mean that you have to be aware of it if you&#x27;re using multiple systems.<p><i>For my uses</i>, make offers nothing of value over just. I don&#x27;t need any of the clever build dependency resolution stuff when I&#x27;m working in Python, and cargo handles everything better when I&#x27;m using Rust. Which isn&#x27;t to say that make isn&#x27;t enormously powerful and useful <i>for other people</i>, only that its extra power causes more work than reward for the ways I personally want to use it. For me, just is everything about make that I actually use, minus all the complicating features that get in my way.</div><br/><div id="35958425" class="c"><input type="checkbox" id="c-35958425" checked=""/><div class="controls bullet"><span class="by">roqi</span><span>|</span><a href="#35955115">root</a><span>|</span><a href="#35955574">parent</a><span>|</span><a href="#35957099">next</a><span>|</span><label class="collapse" for="c-35958425">[-]</label><label class="expand" for="c-35958425">[1 more]</label></div><br/><div class="children"><div class="content">&gt; OK, that&#x27;s just not true.<p>If you really feel that way then you will have to ask the OpenGroup people to fix the UNIX Shell and Utilities part, because they seem to have included a specification of make.<p><a href="https:&#x2F;&#x2F;pubs.opengroup.org&#x2F;onlinepubs&#x2F;009695299&#x2F;utilities&#x2F;make.html" rel="nofollow">https:&#x2F;&#x2F;pubs.opengroup.org&#x2F;onlinepubs&#x2F;009695299&#x2F;utilities&#x2F;ma...</a><p>&gt; For starters, which make?<p>The interface specified in the standard.<p>&gt; GNU and BSD are common variants, and aren&#x27;t 100% compatible.<p>Irrelevant. UNIX specifies an interface. It matters nothing if some implementation added their extensions.<p>&gt; For my uses, make offers nothing of value (...)<p>That&#x27;s perfectly fine. Just install just in your machines and work on your personal projects as you see fit.<p>If on the other hand you intend to distribute something you work on, using make ensures that those using specific target platforms don&#x27;t need to install extra software because it already ships preinstalled.</div><br/></div></div></div></div><div id="35957099" class="c"><input type="checkbox" id="c-35957099" checked=""/><div class="controls bullet"><span class="by">fbdab103</span><span>|</span><a href="#35955115">root</a><span>|</span><a href="#35955378">parent</a><span>|</span><a href="#35955574">prev</a><span>|</span><a href="#35955594">next</a><span>|</span><label class="collapse" for="c-35957099">[-]</label><label class="expand" for="c-35957099">[3 more]</label></div><br/><div class="children"><div class="content">&gt;You get syntactic sugar, but all the best parts of Make are thrown out of the window.<p>What does make have that just is missing? I have only dipped my toe into just, but it seems like a more-or-less superset of functionality. Plus, all sorts of niceties: built-in functions (path manipulation!), ability to declare scripting languages, self-documenting through `--list`, etc. Quite a lot of natural feature evolution if make was not forever frozen in time by the POSIX standard.</div><br/><div id="35958451" class="c"><input type="checkbox" id="c-35958451" checked=""/><div class="controls bullet"><span class="by">roqi</span><span>|</span><a href="#35955115">root</a><span>|</span><a href="#35957099">parent</a><span>|</span><a href="#35955594">next</a><span>|</span><label class="collapse" for="c-35958451">[-]</label><label class="expand" for="c-35958451">[2 more]</label></div><br/><div class="children"><div class="content">&gt; What does make have that just is missing?<p>Make is a part of UNIX, so it&#x27;s ubiquitous, stable, and time-proof.</div><br/><div id="35958825" class="c"><input type="checkbox" id="c-35958825" checked=""/><div class="controls bullet"><span class="by">nprateem</span><span>|</span><a href="#35955115">root</a><span>|</span><a href="#35958451">parent</a><span>|</span><a href="#35955594">next</a><span>|</span><label class="collapse" for="c-35958825">[-]</label><label class="expand" for="c-35958825">[1 more]</label></div><br/><div class="children"><div class="content">By this argument there would never be any innovation</div><br/></div></div></div></div></div></div></div></div></div></div><div id="35955407" class="c"><input type="checkbox" id="c-35955407" checked=""/><div class="controls bullet"><span class="by">boerseth</span><span>|</span><a href="#35955115">prev</a><span>|</span><a href="#35954822">next</a><span>|</span><label class="collapse" for="c-35955407">[-]</label><label class="expand" for="c-35955407">[1 more]</label></div><br/><div class="children"><div class="content">I recently used my blog as a way to learn how to use Make and Makefiles. I write posts in Markdown, and my Makefile generates HTML for each using Pandoc, then stitches it all together into one `index.html` file. The webpage behaves like a single-page-app, with a table-of-contents and everything, with just some CSS trickery.<p>I know there are probably frameworks and tools that do this for me already, in ways both more flexible and robust than how I&#x27;ve done it, but I&#x27;ve really enjoyed the process of getting to this point. I started writing dumb shell scripts and struggling with weird cases and messy code, then learned more about Make and improved on things by a lot. In the end, it didn&#x27;t take a lot of code, yet I feel like I can be really pleased with the result.<p>I have come to really like Make, I have to say. It is probably used more often than it should, judging by some of the comments here. I&#x27;ve seen a few Makefiles where a substantial percentage of recipes are `.PHONY`, and maybe those are the cases where you should think about looking for a different task-runner? Not sure, but I enjoy Make anyway.</div><br/></div></div><div id="35954822" class="c"><input type="checkbox" id="c-35954822" checked=""/><div class="controls bullet"><span class="by">alhirzel</span><span>|</span><a href="#35955407">prev</a><span>|</span><a href="#35956762">next</a><span>|</span><label class="collapse" for="c-35954822">[-]</label><label class="expand" for="c-35954822">[2 more]</label></div><br/><div class="children"><div class="content">I end up using Makefiles for many projects that have even trivial stages in their execution (e.g. manual&#x2F;one-off ETL pipelines). I do feel like I bastardize it sometimes as a convenient command runner or brain augmentation: sure makes it easy to remember how to run something if you can just type &quot;make&quot; or look at the top of the file, a cool intersection between &quot;can get it working in 5 minutes&quot; and &quot;will be readable in 5 months&quot;.<p>The Just command runner [1] is good, but is not as ubiquitous.<p>[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;casey&#x2F;just">https:&#x2F;&#x2F;github.com&#x2F;casey&#x2F;just</a></div><br/><div id="35958039" class="c"><input type="checkbox" id="c-35958039" checked=""/><div class="controls bullet"><span class="by">francoismassot</span><span>|</span><a href="#35954822">parent</a><span>|</span><a href="#35956762">next</a><span>|</span><label class="collapse" for="c-35958039">[-]</label><label class="expand" for="c-35958039">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve got the same usage of Make and wanted to give Just a try. Which limitations did you identify with Just?</div><br/></div></div></div></div><div id="35956762" class="c"><input type="checkbox" id="c-35956762" checked=""/><div class="controls bullet"><span class="by">woodruffw</span><span>|</span><a href="#35954822">prev</a><span>|</span><a href="#35955342">next</a><span>|</span><label class="collapse" for="c-35956762">[-]</label><label class="expand" for="c-35956762">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been using and writing Makefiles for over a decade and, ironically, my least favorite experiences with it are in the ecosystems (C and C++) it&#x27;s ostensibly intended for.<p>When using it for Python or multi-language projects (especially ones with lots of code generation or intermediate outputs), it&#x27;s a joy: it&#x27;s very satisfying to be able to write dependency patterns and relations and have the machine satisfy and parallelize them.</div><br/></div></div><div id="35955342" class="c"><input type="checkbox" id="c-35955342" checked=""/><div class="controls bullet"><span class="by">roqi</span><span>|</span><a href="#35956762">prev</a><span>|</span><a href="#35958805">next</a><span>|</span><label class="collapse" for="c-35955342">[-]</label><label class="expand" for="c-35955342">[3 more]</label></div><br/><div class="children"><div class="content">Nit picking.<p>From the article:<p>&gt; Popular C&#x2F;C++ alternative build systems are SCons, CMake, Bazel, and Ninja.<p>CMake is not a build system. It&#x27;s a build system generator. A higher level abstraction over the problem of specifying projects, which greatly simplifies the work of creating and maintaining them. Once a CMake project is created, it is then used to create the actually build system. Originally it was mainly Makefile, but nowadays it also supports Ninja, Xcode, and Visual Studio. I&#x27;m sure that if there is any interest cmake could also be updated to generate other build systems.</div><br/><div id="35955544" class="c"><input type="checkbox" id="c-35955544" checked=""/><div class="controls bullet"><span class="by">aidenn0</span><span>|</span><a href="#35955342">parent</a><span>|</span><a href="#35958805">next</a><span>|</span><label class="collapse" for="c-35955544">[-]</label><label class="expand" for="c-35955544">[2 more]</label></div><br/><div class="children"><div class="content">Arguably CMake is a build system; as a user you can build your project only by running CMake commands.  The fact that it will run e.g. ninja or make under-the-hood can be ignored for many use-cases.</div><br/><div id="35958462" class="c"><input type="checkbox" id="c-35958462" checked=""/><div class="controls bullet"><span class="by">roqi</span><span>|</span><a href="#35955342">root</a><span>|</span><a href="#35955544">parent</a><span>|</span><a href="#35958805">next</a><span>|</span><label class="collapse" for="c-35958462">[-]</label><label class="expand" for="c-35958462">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Arguably CMake is a build system; as a user you can build your project only by running CMake commands.<p>If you put together a shell script that calls some other program that runs a build, that doesn&#x27;t make shell script a build system.<p>&gt; The fact that it will run e.g. ninja or make under-the-hood can be ignored for many use-cases.<p>You can&#x27;t, though. Some features are only available on projects generaded by cmake for specific build systems.</div><br/></div></div></div></div></div></div><div id="35958805" class="c"><input type="checkbox" id="c-35958805" checked=""/><div class="controls bullet"><span class="by">nprateem</span><span>|</span><a href="#35955342">prev</a><span>|</span><a href="#35956511">next</a><span>|</span><label class="collapse" for="c-35958805">[-]</label><label class="expand" for="c-35958805">[1 more]</label></div><br/><div class="children"><div class="content">If you&#x27;re thinking of using it as a task runner, do yourself a favour and pick something else (eg just).<p>Make has no end of gotchas it&#x27;s a complete pain to work with.</div><br/></div></div><div id="35956511" class="c"><input type="checkbox" id="c-35956511" checked=""/><div class="controls bullet"><span class="by">move-on-by</span><span>|</span><a href="#35958805">prev</a><span>|</span><a href="#35956648">next</a><span>|</span><label class="collapse" for="c-35956511">[-]</label><label class="expand" for="c-35956511">[3 more]</label></div><br/><div class="children"><div class="content">Makefiles are great for what they were made for. Compiling a binary? You should consider using Make.<p>I get frustrated when I start seeing tests and run commands hidden behind a make task. An  example I saw recently was using a makefile to run docker compose. Simple enough, but it used a non-standard docker compose file, so it required the -f flag for every invocation. Which is fine since that’s handled for you by the makefile. Then it had docker compose run commands to invoke pytests. One key feature of running tests is passing arguments to limit test runs to specific packages&#x2F;files&#x2F;functions- but of course passing arguments down to a command isn’t supported by Make. All very convoluted and not the best tool for the job IMO. A simple bash script with “$@“ to pass my args to pytest is a lot more straightforward and allows pytest features to be used without needing to do anything extra.</div><br/><div id="35956627" class="c"><input type="checkbox" id="c-35956627" checked=""/><div class="controls bullet"><span class="by">taeric</span><span>|</span><a href="#35956511">parent</a><span>|</span><a href="#35957193">next</a><span>|</span><label class="collapse" for="c-35956627">[-]</label><label class="expand" for="c-35956627">[1 more]</label></div><br/><div class="children"><div class="content">This is silly.  Make was made for hierarchical tasks that can be done incrementally.  This was largely about compiling things, sure.  But, I&#x27;d wager all old make files have test targets.  My favorite example in recentish times is <a href="http:&#x2F;&#x2F;ftp.cs.stanford.edu&#x2F;pub&#x2F;sgb&#x2F;Makefile" rel="nofollow">http:&#x2F;&#x2F;ftp.cs.stanford.edu&#x2F;pub&#x2F;sgb&#x2F;Makefile</a>.  And yeah, has a test target.<p>That docker compose and friend weren&#x27;t good for building on top of is their &quot;fault,&quot; as it were.  Stability of software is not something that modern build tools really take to heart, sadly.  Note that this is not &quot;do not crash&quot; stability.<p>I cede that progress is progress, such that there may be better tools today.  I&#x27;d hesitate to base anything on python&#x27;s ecosystem, sadly.  They jumped a hell of a shark in the past few years that will be tough to get trust back on.</div><br/></div></div><div id="35957193" class="c"><input type="checkbox" id="c-35957193" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#35956511">parent</a><span>|</span><a href="#35956627">prev</a><span>|</span><a href="#35956648">next</a><span>|</span><label class="collapse" for="c-35957193">[-]</label><label class="expand" for="c-35957193">[1 more]</label></div><br/><div class="children"><div class="content">&gt;  but of course passing arguments down to a command isn’t supported by Make<p>Sure it is.<p><pre><code>   .PHONY: test
   test:
       pytest $TEST_FILTER

   make TEST_FILTER=example test</code></pre></div><br/></div></div></div></div><div id="35956648" class="c"><input type="checkbox" id="c-35956648" checked=""/><div class="controls bullet"><span class="by">m463</span><span>|</span><a href="#35956511">prev</a><span>|</span><a href="#35957683">next</a><span>|</span><label class="collapse" for="c-35956648">[-]</label><label class="expand" for="c-35956648">[1 more]</label></div><br/><div class="children"><div class="content">Make is extremely useful, but it is not simple or pretty.<p>I honestly think instead of teaching make, it would be easier to refine it and then teach the simpler, more elegant make.<p>honestly, there is <i>SO</i> much low-hanging fruit.<p>- tabs vs spaces, indentation, the mess of continuing multiline statements<p>- variables are inelegant, interpreted out-of-order, and = vs :=<p>- quoting maintains the mess of the rest of linux where you confuse a literal vs a special character<p>- files, directories and targets (.PHONY) are confusing<p>and lots more all the way down</div><br/></div></div><div id="35957683" class="c"><input type="checkbox" id="c-35957683" checked=""/><div class="controls bullet"><span class="by">yellowapple</span><span>|</span><a href="#35956648">prev</a><span>|</span><a href="#35954750">next</a><span>|</span><label class="collapse" for="c-35957683">[-]</label><label class="expand" for="c-35957683">[1 more]</label></div><br/><div class="children"><div class="content">I resisted learning Make because of the clunkiness around it (Tab-indentation?  C-specific features?  Gross!), but after using it a few times now I&#x27;ve come to appreciate it.<p>Most recent case was for Starbound mods.  The macOS and Linux versions of Starbound don&#x27;t ship with any built-in tools for uploading mods to the Steam Workshop (unlike Windows, which apparently has a dedicated GUI for it), and I didn&#x27;t want to have to manually go through a bunch of SteamCMD steps every time I wanted to publish an update, so for my first real mod I put together a Makefile to automatically pack all the files together (using Starbound&#x27;s included asset_packer CLI tool), populate a metadata.vdf for the Steam Workshop, and run the right steamcmd incantations to get everything up.  Once that was reliably working, I condensed everything into a GitHub template repo (<a href="https:&#x2F;&#x2F;github.com&#x2F;YellowApple&#x2F;Starbound-Mod">https:&#x2F;&#x2F;github.com&#x2F;YellowApple&#x2F;Starbound-Mod</a>) and ended up with a pretty straightforward (albeit a bit clunky in spots) universal Makefile:<p><pre><code>    MODNAME  = StarboundMod
    
    ifeq &quot;$(shell uname)&quot; &quot;Linux&quot;
    PLATFORM = linux
    endif
    ifeq &quot;$(shell uname)&quot; &quot;Darwin&quot;
    PLATFORM = macos
    endif
    
    SB_PACKER = ..&#x2F;..&#x2F;$(PLATFORM)&#x2F;asset_packer
    OUT  = .&#x2F;out
    
    SRC_DIRS =  achievements ai animations behaviors biomes \
       celestial cinematics codex collections \
       cursors damage dialog dungeons effects \
       humanoid interface items leveling liquids \
       monsters music names npcs objects parallax \
       particles plants player projectiles quests \
       radiomessages recipes rendering scripts sfx \
       ships sky spawntypes species stagehands stats \
       tech tenants terrain tiles tilesets treasure \
       vehicles versioning weather
    SRC_EXTS = config macros patch png wav
    
    STEAMCMD = steamcmd +login $(STEAMCMD_USER)
    STEAM_ID_PARSER = awk &#x27;&#x2F;&quot;publishedfileid&quot;&#x2F;{print $$2}&#x27; \
       metadata.vdf | sed &#x27;s&#x2F;&quot;&#x2F;&#x2F;g&#x27;
    
    $(OUT)&#x2F;pkg&#x2F;contents.pak: $(SRC_DIRS) $(SRC_EXTS)
     rm -rf $(OUT)&#x2F;pkg
     mkdir -p $(OUT)&#x2F;pkg
     $(SB_PACKER) $(OUT)&#x2F;src $(OUT)&#x2F;pkg&#x2F;$(MODNAME).pak
    
    $(OUT)&#x2F;src:
     rm -rf $(OUT)&#x2F;src
     mkdir -p $(OUT)&#x2F;src
     cp _metadata $(OUT)&#x2F;src&#x2F;
    
    $(SRC_DIRS): FORCE $(OUT)&#x2F;src
     @cp -rv $@ $(OUT)&#x2F;src&#x2F;$@ 2&gt;&#x2F;dev&#x2F;null \
      || echo &#x27;No $@ folder present in mod root; skipping&#x27;
    
    $(SRC_EXTS): FORCE $(OUT)&#x2F;src
     @cp -v *.$@ $(OUT)&#x2F;src&#x2F; 2&gt;&#x2F;dev&#x2F;null \
      || echo &#x27;No *.$@ files present in mod root; skipping&#x27;
    
    upload: $(OUT)&#x2F;pkg&#x2F;contents.pak
     mkdir -p $(OUT)&#x2F;workshop
     cp $(OUT)&#x2F;pkg&#x2F;$(MODNAME).pak $(OUT)&#x2F;workshop&#x2F;contents.pak
     cp preview.jpg $(OUT)&#x2F;preview.jpg
     sed &#x27;s,{{PWD}},$(PWD),g&#x27; &lt;metadata.vdf.template &gt;metadata.vdf
     $(STEAMCMD) +workshop_build_item $(PWD)&#x2F;metadata.vdf +quit
     $(eval STEAM_ID=$(shell $(STEAM_ID_PARSER)))
     sed -i &#x27;s&#x2F;&quot;publishedfileid&quot; &quot;0&quot;&#x2F;&quot;publishedfileid&quot; &quot;$(STEAM_ID)&quot;&#x2F;g&#x27; \
      metadata.vdf.template
    
    clean: FORCE
     rm -rf $(OUT)
     rm -f metadata.vdf
    
    FORCE:
    </code></pre>
All in all, it works well enough.  Certainly nicer than trying to do it with shell scripts IMO, and I don&#x27;t have to worry <i>quite</i> as much about whether someone else using my mod template (including my future self) is able to install some fancier build tool &#x2F; task runner given how ubiquitous (GNU) Make tends to be.</div><br/></div></div><div id="35954750" class="c"><input type="checkbox" id="c-35954750" checked=""/><div class="controls bullet"><span class="by">williamcotton</span><span>|</span><a href="#35957683">prev</a><span>|</span><a href="#35955613">next</a><span>|</span><label class="collapse" for="c-35954750">[-]</label><label class="expand" for="c-35954750">[1 more]</label></div><br/><div class="children"><div class="content">Put this at the top of your Makefile for a node project:<p><pre><code>  export PATH := node_modules&#x2F;.bin:$(PATH)</code></pre></div><br/></div></div><div id="35955613" class="c"><input type="checkbox" id="c-35955613" checked=""/><div class="controls bullet"><span class="by">banku_brougham</span><span>|</span><a href="#35954750">prev</a><span>|</span><a href="#35956402">next</a><span>|</span><label class="collapse" for="c-35955613">[-]</label><label class="expand" for="c-35955613">[1 more]</label></div><br/><div class="children"><div class="content">My favorite glorified taskrunner is <a href="https:&#x2F;&#x2F;just.systems&#x2F;" rel="nofollow">https:&#x2F;&#x2F;just.systems&#x2F;</a>, using the `justfile` to formalize random task steps I do in local development.</div><br/></div></div><div id="35956402" class="c"><input type="checkbox" id="c-35956402" checked=""/><div class="controls bullet"><span class="by">pimlottc</span><span>|</span><a href="#35955613">prev</a><span>|</span><a href="#35955826">next</a><span>|</span><label class="collapse" for="c-35956402">[-]</label><label class="expand" for="c-35956402">[1 more]</label></div><br/><div class="children"><div class="content">When it said “tastiest”, I thought the example problem was going to be making a cake or something. Seems like a good tutorial regardless.</div><br/></div></div><div id="35955826" class="c"><input type="checkbox" id="c-35955826" checked=""/><div class="controls bullet"><span class="by">antipaul</span><span>|</span><a href="#35956402">prev</a><span>|</span><label class="collapse" for="c-35955826">[-]</label><label class="expand" for="c-35955826">[1 more]</label></div><br/><div class="children"><div class="content">This tutorial feels like its only for C++ (-like) coders, since it focuses on &quot;(re)compiling&quot;<p>&gt; Makefiles are used to help decide which parts of a large program need to be recompiled<p>I&#x27;ve found uses for Makefiles, where users don&#x27;t have a clue what &quot;compiling&quot; is.<p>(Though other commenters may not necessarily appreciate such use cases!)</div><br/></div></div></div></div></div></div></div></body></html>