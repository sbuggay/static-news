<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1719997253630" as="style"/><link rel="stylesheet" href="styles.css?v=1719997253630"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/rhysd/8cc.vim">8cc.vim: Pure Vim script C Compiler</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>JNRowe</span> | <span>22 comments</span></div><br/><div><div id="40862442" class="c"><input type="checkbox" id="c-40862442" checked=""/><div class="controls bullet"><span class="by">timando</span><span>|</span><a href="#40857394">next</a><span>|</span><label class="collapse" for="c-40862442">[-]</label><label class="expand" for="c-40862442">[1 more]</label></div><br/><div class="children"><div class="content">Can you use the ELVM backend to compile Emacs into Vim script?</div><br/></div></div><div id="40857394" class="c"><input type="checkbox" id="c-40857394" checked=""/><div class="controls bullet"><span class="by">INTPenis</span><span>|</span><a href="#40862442">prev</a><span>|</span><a href="#40860832">next</a><span>|</span><label class="collapse" for="c-40857394">[-]</label><label class="expand" for="c-40857394">[14 more]</label></div><br/><div class="children"><div class="content">It looks like they&#x27;re just taking the entire eightcc compiler and stuffed into vim buffer memory.</div><br/><div id="40857480" class="c"><input type="checkbox" id="c-40857480" checked=""/><div class="controls bullet"><span class="by">rhysd</span><span>|</span><a href="#40857394">parent</a><span>|</span><a href="#40860832">next</a><span>|</span><label class="collapse" for="c-40857480">[-]</label><label class="expand" for="c-40857480">[13 more]</label></div><br/><div class="children"><div class="content">No. It is a C compiler compiled to Vim script. So it is actually a C compiler written in Vim script.</div><br/><div id="40857736" class="c"><input type="checkbox" id="c-40857736" checked=""/><div class="controls bullet"><span class="by">munificent</span><span>|</span><a href="#40857394">root</a><span>|</span><a href="#40857480">parent</a><span>|</span><a href="#40857626">next</a><span>|</span><label class="collapse" for="c-40857736">[-]</label><label class="expand" for="c-40857736">[6 more]</label></div><br/><div class="children"><div class="content">I think a more accurate way to describe it is that it&#x27;s a C compiler written in C and then automatically transpiled to VimScript.<p>No human hand-authored this giant pile of VimScript: <a href="https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;rhysd&#x2F;8cc.vim&#x2F;master&#x2F;autoload&#x2F;eightcc&#x2F;frontend.vim" rel="nofollow">https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;rhysd&#x2F;8cc.vim&#x2F;master&#x2F;autol...</a></div><br/><div id="40857838" class="c"><input type="checkbox" id="c-40857838" checked=""/><div class="controls bullet"><span class="by">rhysd</span><span>|</span><a href="#40857394">root</a><span>|</span><a href="#40857736">parent</a><span>|</span><a href="#40860897">next</a><span>|</span><label class="collapse" for="c-40857838">[-]</label><label class="expand" for="c-40857838">[3 more]</label></div><br/><div class="children"><div class="content">Yes. It is compiled to Vim script using ELVM[1]. Though the author of Vim script backend of ELVM is me :)<p>[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;shinh&#x2F;elvm">https:&#x2F;&#x2F;github.com&#x2F;shinh&#x2F;elvm</a></div><br/><div id="40859778" class="c"><input type="checkbox" id="c-40859778" checked=""/><div class="controls bullet"><span class="by">nequo</span><span>|</span><a href="#40857394">root</a><span>|</span><a href="#40857838">parent</a><span>|</span><a href="#40860958">next</a><span>|</span><label class="collapse" for="c-40859778">[-]</label><label class="expand" for="c-40859778">[1 more]</label></div><br/><div class="children"><div class="content">That is very cool! So with ELVM one could put together a C compiler in TeX too? Or transpile Vim into Vim script to self-host it?</div><br/></div></div><div id="40860958" class="c"><input type="checkbox" id="c-40860958" checked=""/><div class="controls bullet"><span class="by">krick</span><span>|</span><a href="#40857394">root</a><span>|</span><a href="#40857838">parent</a><span>|</span><a href="#40859778">prev</a><span>|</span><a href="#40860897">next</a><span>|</span><label class="collapse" for="c-40860958">[-]</label><label class="expand" for="c-40860958">[1 more]</label></div><br/><div class="children"><div class="content">Cool. Why, though? I mean, it&#x27;s not like this project has any practical value anyway, but wouldn&#x27;t it be actually easier and more efficient to actually implement a C compiler in VimScript? Or is the vimscript ELVM backend the actual end-goal here, and C-compiler at question is basically just a proof that it works?</div><br/></div></div></div></div><div id="40860897" class="c"><input type="checkbox" id="c-40860897" checked=""/><div class="controls bullet"><span class="by">metadat</span><span>|</span><a href="#40857394">root</a><span>|</span><a href="#40857736">parent</a><span>|</span><a href="#40857838">prev</a><span>|</span><a href="#40860973">next</a><span>|</span><label class="collapse" for="c-40860897">[-]</label><label class="expand" for="c-40860897">[1 more]</label></div><br/><div class="children"><div class="content">Thanks, at first I thought someone had written it in vim script, then I inspected the README in detail and learned it&#x27;s only transpiled from C to vim script, which is not particularly exciting or impressive compared to a human wielding such a degree of vim script fu.</div><br/></div></div><div id="40860973" class="c"><input type="checkbox" id="c-40860973" checked=""/><div class="controls bullet"><span class="by">gsuuon</span><span>|</span><a href="#40857394">root</a><span>|</span><a href="#40857736">parent</a><span>|</span><a href="#40860897">prev</a><span>|</span><a href="#40857626">next</a><span>|</span><label class="collapse" for="c-40860973">[-]</label><label class="expand" for="c-40860973">[1 more]</label></div><br/><div class="children"><div class="content">Ah - my impression went from &#x27;this is pure masochism&#x27; to just &#x27;this is slightly insane&#x27;.</div><br/></div></div></div></div><div id="40857626" class="c"><input type="checkbox" id="c-40857626" checked=""/><div class="controls bullet"><span class="by">flohofwoe</span><span>|</span><a href="#40857394">root</a><span>|</span><a href="#40857480">parent</a><span>|</span><a href="#40857736">prev</a><span>|</span><a href="#40860832">next</a><span>|</span><label class="collapse" for="c-40857626">[-]</label><label class="expand" for="c-40857626">[6 more]</label></div><br/><div class="children"><div class="content">I wonder how much faster a manually written C compiler in Vim script would be.<p>The current code is essentially assembly instructions running as Vim script, this gotta be incredibly slow, probably not much faster than an x86 emulator written in Vim script:<p><a href="https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;rhysd&#x2F;8cc.vim&#x2F;master&#x2F;autoload&#x2F;eightcc&#x2F;backend.vim" rel="nofollow">https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;rhysd&#x2F;8cc.vim&#x2F;master&#x2F;autol...</a></div><br/><div id="40858562" class="c"><input type="checkbox" id="c-40858562" checked=""/><div class="controls bullet"><span class="by">actionfromafar</span><span>|</span><a href="#40857394">root</a><span>|</span><a href="#40857626">parent</a><span>|</span><a href="#40858068">next</a><span>|</span><label class="collapse" for="c-40858562">[-]</label><label class="expand" for="c-40858562">[3 more]</label></div><br/><div class="children"><div class="content">Time for JIT-compiled vimscript, I guess? Why should Javascript have all the fun.</div><br/><div id="40859797" class="c"><input type="checkbox" id="c-40859797" checked=""/><div class="controls bullet"><span class="by">augusto-moura</span><span>|</span><a href="#40857394">root</a><span>|</span><a href="#40858562">parent</a><span>|</span><a href="#40858068">next</a><span>|</span><label class="collapse" for="c-40859797">[-]</label><label class="expand" for="c-40859797">[2 more]</label></div><br/><div class="children"><div class="content">Funny because neovim supports LuaJIT for it&#x27;s lua init files by default. I wonder if there would be a way to compile vimscript to lua and have it everything inside the lua IR. Probably very hard, given the DSL nature of vimscript</div><br/><div id="40863737" class="c"><input type="checkbox" id="c-40863737" checked=""/><div class="controls bullet"><span class="by">setopt</span><span>|</span><a href="#40857394">root</a><span>|</span><a href="#40859797">parent</a><span>|</span><a href="#40858068">next</a><span>|</span><label class="collapse" for="c-40863737">[-]</label><label class="expand" for="c-40863737">[1 more]</label></div><br/><div class="children"><div class="content">Vim9script is already compiled (which is why it’s much faster), so there’s no need to go via Lua if you’re on ”normal” Vim :)</div><br/></div></div></div></div></div></div><div id="40858068" class="c"><input type="checkbox" id="c-40858068" checked=""/><div class="controls bullet"><span class="by">svlasov</span><span>|</span><a href="#40857394">root</a><span>|</span><a href="#40857626">parent</a><span>|</span><a href="#40858562">prev</a><span>|</span><a href="#40858251">next</a><span>|</span><label class="collapse" for="c-40858068">[-]</label><label class="expand" for="c-40858068">[1 more]</label></div><br/><div class="children"><div class="content">I wonder how much faster it would be if it was written in Vim9 script.</div><br/></div></div><div id="40858251" class="c"><input type="checkbox" id="c-40858251" checked=""/><div class="controls bullet"><span class="by">aghastnj</span><span>|</span><a href="#40857394">root</a><span>|</span><a href="#40857626">parent</a><span>|</span><a href="#40858068">prev</a><span>|</span><a href="#40860832">next</a><span>|</span><label class="collapse" for="c-40858251">[-]</label><label class="expand" for="c-40858251">[1 more]</label></div><br/><div class="children"><div class="content">There&#x27;s only one way to find out, bubba! You&#x27;re gonna have to write an x86 emulator in vimscript for us, and tell us how it compares...</div><br/></div></div></div></div></div></div></div></div><div id="40858819" class="c"><input type="checkbox" id="c-40858819" checked=""/><div class="controls bullet"><span class="by">flying_sheep</span><span>|</span><a href="#40860832">prev</a><span>|</span><a href="#40859780">next</a><span>|</span><label class="collapse" for="c-40858819">[-]</label><label class="expand" for="c-40858819">[4 more]</label></div><br/><div class="children"><div class="content">I&#x27;d love to use vim to compile vim lolz</div><br/><div id="40859330" class="c"><input type="checkbox" id="c-40859330" checked=""/><div class="controls bullet"><span class="by">queuebert</span><span>|</span><a href="#40858819">parent</a><span>|</span><a href="#40859780">next</a><span>|</span><label class="collapse" for="c-40859330">[-]</label><label class="expand" for="c-40859330">[3 more]</label></div><br/><div class="children"><div class="content">I always suspected Emacs would achieve sentience before vim. Maybe I&#x27;ll be wrong.</div><br/><div id="40859975" class="c"><input type="checkbox" id="c-40859975" checked=""/><div class="controls bullet"><span class="by">zelphirkalt</span><span>|</span><a href="#40858819">root</a><span>|</span><a href="#40859330">parent</a><span>|</span><a href="#40859780">next</a><span>|</span><label class="collapse" for="c-40859975">[-]</label><label class="expand" for="c-40859975">[2 more]</label></div><br/><div class="children"><div class="content">The difference is, that with Vim script it will either happen unexpectedly or unexplicably, while in Elisp it will&#x2F;might happen later, but will be in the realm of understandable things.</div><br/><div id="40860158" class="c"><input type="checkbox" id="c-40860158" checked=""/><div class="controls bullet"><span class="by">tambourine_man</span><span>|</span><a href="#40858819">root</a><span>|</span><a href="#40859975">parent</a><span>|</span><a href="#40859780">next</a><span>|</span><label class="collapse" for="c-40860158">[-]</label><label class="expand" for="c-40860158">[1 more]</label></div><br/><div class="children"><div class="content">Just keep adding closing parenthesis to the end of the file. Eventually Emacs will greet you in HAL 9000 style.</div><br/></div></div></div></div></div></div></div></div><div id="40859780" class="c"><input type="checkbox" id="c-40859780" checked=""/><div class="controls bullet"><span class="by">riddley</span><span>|</span><a href="#40858819">prev</a><span>|</span><label class="collapse" for="c-40859780">[-]</label><label class="expand" for="c-40859780">[1 more]</label></div><br/><div class="children"><div class="content">Checkmate, athiests.</div><br/></div></div></div></div></div></div></div></body></html>