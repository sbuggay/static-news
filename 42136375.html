<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1731661284293" as="style"/><link rel="stylesheet" href="styles.css?v=1731661284293"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://blog.pypi.org/posts/2024-11-14-pypi-now-supports-digital-attestations/">PyPI now supports digital attestations</a>Â <span class="domain">(<a href="https://blog.pypi.org">blog.pypi.org</a>)</span></div><div class="subtext"><span>miketheman</span> | <span>104 comments</span></div><br/><div><div id="42137562" class="c"><input type="checkbox" id="c-42137562" checked=""/><div class="controls bullet"><span class="by">belval</span><span>|</span><a href="#42141666">next</a><span>|</span><label class="collapse" for="c-42137562">[-]</label><label class="expand" for="c-42137562">[72 more]</label></div><br/><div class="children"><div class="content">I have a bit of uneasiness about how this is heavily pushing GitHub actions as the correct way to publish to PyPI. I had to check PEP740 to make sure it was not directly supported by Microsoft.<p>&gt; The generation and publication of attestations happens by default, and no changes are necessary for projects that meet all of these conditions: publish from GitHub Actions; via Trusted Publishing; and use the pypa&#x2F;gh-action-pypi-publish action to publish.<p>If you then click on &quot;The manual way&quot; it adds a big disclaimer:<p>&gt; STOP! You probably don&#x27;t need this section; it exists only to provide some internal details about how attestation generation and uploading work. If you&#x27;re an ordinary user, it is strongly recommended that you use one of the official workflows described above.<p>Where the only official workflow is &quot;Use GitHub Actions&quot;.<p>I guess I am an idealist but as a maintainer this falls short of my expectations  for the openness of Python and PyPI.</div><br/><div id="42137628" class="c"><input type="checkbox" id="c-42137628" checked=""/><div class="controls bullet"><span class="by">woodruffw</span><span>|</span><a href="#42137562">parent</a><span>|</span><a href="#42138035">next</a><span>|</span><label class="collapse" for="c-42137628">[-]</label><label class="expand" for="c-42137628">[47 more]</label></div><br/><div class="children"><div class="content">&gt; Where the only official workflow is &quot;Use GitHub Actions&quot;.<p>The standard behind this (PEP 740) supports anything that can be used with Trusted Publishing[1]. That includes GitLab, Google Cloud, ActiveState, and <i>can</i> include any other OIDC IdP if people make a good case for including it.<p>It&#x27;s not tied to Microsoft or GitHub in any particular way. The only reason it emphasizes GitHub Actions is because that&#x27;s where the overwhelming majority of automatic publishing traffic comes from, and because it follows a similar enablement pattern as Trusted Publishing did (where we did GitHub first, followed by GitLab and other providers).<p>[1]: <a href="https:&#x2F;&#x2F;docs.pypi.org&#x2F;trusted-publishers&#x2F;" rel="nofollow">https:&#x2F;&#x2F;docs.pypi.org&#x2F;trusted-publishers&#x2F;</a></div><br/><div id="42137713" class="c"><input type="checkbox" id="c-42137713" checked=""/><div class="controls bullet"><span class="by">belval</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42137628">parent</a><span>|</span><a href="#42140207">next</a><span>|</span><label class="collapse" for="c-42137713">[-]</label><label class="expand" for="c-42137713">[17 more]</label></div><br/><div class="children"><div class="content">I get that, that&#x27;s why I didn&#x27;t go &quot;This is Embrace Extend Extinguish&quot;, but as constructive feedback I would recommend softening the language and to replace:<p>&gt; STOP! You probably don&#x27;t need this section;<p>In <a href="https:&#x2F;&#x2F;docs.pypi.org&#x2F;attestations&#x2F;producing-attestations&#x2F;#the-manual-way" rel="nofollow">https:&#x2F;&#x2F;docs.pypi.org&#x2F;attestations&#x2F;producing-attestations&#x2F;#t...</a><p>Perhaps also add a few of the providers you listed as well?<p>&gt; The only reason it emphasizes GitHub Actions is because that&#x27;s where the overwhelming majority of automatic publishing traffic comes from<p>GitHub being popular is a self-reinforcing process, if GitHub is your first class citizen for something as crucial as trusted publishing then projects on GitHub will see a higher adoption and become the de-facto &quot;secure choice&quot;.</div><br/><div id="42137810" class="c"><input type="checkbox" id="c-42137810" checked=""/><div class="controls bullet"><span class="by">woodruffw</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42137713">parent</a><span>|</span><a href="#42140207">next</a><span>|</span><label class="collapse" for="c-42137810">[-]</label><label class="expand" for="c-42137810">[16 more]</label></div><br/><div class="children"><div class="content">&gt; but as constructive feedback I would recommend softening the language and to replace:<p>I can soften it, but I think you&#x27;re reading it excessively negatively: that warning is there to make sure people don&#x27;t try to do the fiddly, error-prone cryptographic bits <i>if</i> they don&#x27;t need to. It&#x27;s a numerical fact that most project owners <i>don&#x27;t</i> need that section, since most are either using manual API tokens or are publishing via GitHub Actions.<p>&gt; Perhaps also add a few of the providers you listed as well?<p>They&#x27;ll be added when they&#x27;re enabled. Like I said in the original comment, we&#x27;re using a similar enablement pattern as happened with Trusted Publishing: GitHub was enabled first because it represents the majority of publishing traffic, followed by GitLab and the others.<p>&gt; GitHub being popular is a self-reinforcing process, if GitHub is your first class citizen for something as crucial as trusted publishing then projects on GitHub will see a higher adoption and become the de-facto &quot;secure choice&quot;.<p>I agree, but I don&#x27;t think this is PyPI&#x27;s problem to solve. From a security perspective, PyPI should prioritize the platforms where the traffic is.<p>(I&#x27;ll note that GitLab has been supported by Trusted Publishing for a while now, and they <i>could</i> make the publishing workflow more of a first class citizen, the way it is on GHA.)</div><br/><div id="42138119" class="c"><input type="checkbox" id="c-42138119" checked=""/><div class="controls bullet"><span class="by">belval</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42137810">parent</a><span>|</span><a href="#42138610">next</a><span>|</span><label class="collapse" for="c-42138119">[-]</label><label class="expand" for="c-42138119">[4 more]</label></div><br/><div class="children"><div class="content">&gt; I agree, but I don&#x27;t think this is PyPI&#x27;s problem to solve. From a security perspective, PyPI should prioritize the platforms where the traffic is.<p>To me that&#x27;s a bit of a weird statement, PyPI is part of the Python foundation, making sure that the project remains true to its open-source nature is reasonable?<p>My concern is that these type of things ultimately play out as &quot;we are doing the right thing to limit supply chain attacks&quot; which is good an defendable, but in ~5 years PyPI will have an announcement that they are sunsetting PyPI package upload in favor of the trusted provider system. pip (or other tooling) will add warnings whenever I install a package that is not &quot;trusted&quot;. Maybe I am simply pessimistic.<p>That being said we can agree to disagree, I am not part of the PSF and I did preface my first comment with &quot;I guess I am an idealist&quot;.</div><br/><div id="42138248" class="c"><input type="checkbox" id="c-42138248" checked=""/><div class="controls bullet"><span class="by">woodruffw</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42138119">parent</a><span>|</span><a href="#42138610">next</a><span>|</span><label class="collapse" for="c-42138248">[-]</label><label class="expand" for="c-42138248">[3 more]</label></div><br/><div class="children"><div class="content">&gt; making sure that the project remains true to its open-source nature is reasonable?<p>What about this, in your estimation, undermines the open-source nature of PyPI? Nothing about this is proprietary, and I can&#x27;t think of any sane definition of OSS in which PyPI choosing to verify OIDC tokens from GitHub (among other IdPs!) meaningfully subverts PyPI&#x27;s OSS committment.<p>&gt; PyPI package upload in favor of the trusted provider system. pip (or other tooling) will add warnings whenever I install a package that is not &quot;trusted&quot;. Maybe I am simply pessimistic.<p>Let me put it this way: if PyPI disables API tokens in favor of <i>mandatory</i> Trusted Publishing, I will eat my shoe on a livestream.<p>(I was the one of the engineers for both API tokens <i>and</i> Trusted Publishing on PyPI. They&#x27;re complementary, and neither can replace the other.)</div><br/><div id="42141048" class="c"><input type="checkbox" id="c-42141048" checked=""/><div class="controls bullet"><span class="by">mananaysiempre</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42138248">parent</a><span>|</span><a href="#42138610">next</a><span>|</span><label class="collapse" for="c-42141048">[-]</label><label class="expand" for="c-42141048">[2 more]</label></div><br/><div class="children"><div class="content">&gt; What about this, in your estimation, undermines the open-source nature of PyPI?<p>Absence of support for self-hosting, in the spirit of freedom 0 = OSD 5&amp;6? Or, for that matter, for any provider whose code is fully open source?</div><br/><div id="42141092" class="c"><input type="checkbox" id="c-42141092" checked=""/><div class="controls bullet"><span class="by">woodruffw</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42141048">parent</a><span>|</span><a href="#42138610">next</a><span>|</span><label class="collapse" for="c-42141092">[-]</label><label class="expand" for="c-42141092">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Absence of support for self-hosting, or for that matter for any non-proprietary service?<p>This has nothing to do with self-hosting, whatsoever. You can upload to PyPI with an API token; that will always work and will not do anything related to Trusted Publishing, which exists entirely because it makes sense for <i>large</i> services.<p>PyPI isn&#x27;t required to federate with the server in my basement through OpenID Connect to be considered open source.</div><br/></div></div></div></div></div></div></div></div><div id="42138610" class="c"><input type="checkbox" id="c-42138610" checked=""/><div class="controls bullet"><span class="by">BiteCode_dev</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42137810">parent</a><span>|</span><a href="#42138119">prev</a><span>|</span><a href="#42140447">next</a><span>|</span><label class="collapse" for="c-42138610">[-]</label><label class="expand" for="c-42138610">[8 more]</label></div><br/><div class="children"><div class="content">I&#x27;m with @belval on this one, it&#x27;s ok to prioritize github, but people that want the standard to implement an alternative should not feel like they are doing something that may not be supported.<p>It kinda feels like that right now.</div><br/><div id="42138822" class="c"><input type="checkbox" id="c-42138822" checked=""/><div class="controls bullet"><span class="by">woodruffw</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42138610">parent</a><span>|</span><a href="#42139884">next</a><span>|</span><label class="collapse" for="c-42138822">[-]</label><label class="expand" for="c-42138822">[4 more]</label></div><br/><div class="children"><div class="content">Again, to be clear: the standard does not stipulate GitHub or any other specific identity providers. The plan is to enable GitLab and the other Trusted Publisher providers in short order.<p>This is <i>exactly</i> the same as Trusted Publishing, where people accused the feature of being a MSFT trojan horse because GitHub was enabled first. I think it would behoove everybody to assume the best intentions here and remember that the goal is to secure the most people <i>by default</i>.</div><br/><div id="42138989" class="c"><input type="checkbox" id="c-42138989" checked=""/><div class="controls bullet"><span class="by">int_19h</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42138822">parent</a><span>|</span><a href="#42144864">prev</a><span>|</span><a href="#42139884">next</a><span>|</span><label class="collapse" for="c-42138989">[-]</label><label class="expand" for="c-42138989">[2 more]</label></div><br/><div class="children"><div class="content">I think the point is that this needs to be made clearer in the official docs from the get go.</div><br/><div id="42139015" class="c"><input type="checkbox" id="c-42139015" checked=""/><div class="controls bullet"><span class="by">woodruffw</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42138989">parent</a><span>|</span><a href="#42139884">next</a><span>|</span><label class="collapse" for="c-42139015">[-]</label><label class="expand" for="c-42139015">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s said explicitly in the second sentence in the usage docs[1].<p>&gt; Attestations are currently only supported when uploading with Trusted Publishing, and currently only with GitHub-based Trusted Publishers. Support for other Trusted Publishers is planned. See #17001 for additional information.<p>[1]: <a href="https:&#x2F;&#x2F;docs.pypi.org&#x2F;attestations&#x2F;producing-attestations&#x2F;" rel="nofollow">https:&#x2F;&#x2F;docs.pypi.org&#x2F;attestations&#x2F;producing-attestations&#x2F;</a></div><br/></div></div></div></div></div></div><div id="42139884" class="c"><input type="checkbox" id="c-42139884" checked=""/><div class="controls bullet"><span class="by">aseipp</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42138610">parent</a><span>|</span><a href="#42138822">prev</a><span>|</span><a href="#42140447">next</a><span>|</span><label class="collapse" for="c-42139884">[-]</label><label class="expand" for="c-42139884">[3 more]</label></div><br/><div class="children"><div class="content">Anyone can run an OIDC system if they want. But PyPI is not under an obligation to trust an OIDC provider running on a random rpi3 in your basement. More than that, GitHub is &quot;trusted&quot; because we can be pretty sure they have an on-call staff to handle incidents, that they can reliably say &quot;This token was provided on behalf of this user at this time for this build&quot;, etc.<p>Even if you standardized the more technical parts like OIDC claim metadata (which is 100% provider specific), it wouldn&#x27;t really change the thrust of any of this â PyPI is literally <i>trusting</i> the publisher in a <i>social</i> sense, not in some &quot;They comply with RFC standards and therefore I can plug in my random favorite thing&quot; sense.<p>This whole discussion is basically a non-issue, IMO. If you want to publish stuff from your super-duper-secret underground airgapped base buried a mile underneath the Himalayas, you can use an API token like you have been able to. It will be far less hassle than running your own OIDC solution for this stuff.</div><br/><div id="42144010" class="c"><input type="checkbox" id="c-42144010" checked=""/><div class="controls bullet"><span class="by">immibis</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42139884">parent</a><span>|</span><a href="#42140300">prev</a><span>|</span><a href="#42140447">next</a><span>|</span><label class="collapse" for="c-42144010">[-]</label><label class="expand" for="c-42144010">[1 more]</label></div><br/><div class="children"><div class="content">If I can&#x27;t build on a rpi3 in my basement and am forced to use GitHub that&#x27;s exactly against the spirit of open source</div><br/></div></div></div></div></div></div><div id="42140447" class="c"><input type="checkbox" id="c-42140447" checked=""/><div class="controls bullet"><span class="by">guappa</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42137810">parent</a><span>|</span><a href="#42138610">prev</a><span>|</span><a href="#42140207">next</a><span>|</span><label class="collapse" for="c-42140447">[-]</label><label class="expand" for="c-42140447">[3 more]</label></div><br/><div class="children"><div class="content">&gt; error-prone cryptographic bits if they don&#x27;t need to<p>They can&#x27;t. Because you wouldn&#x27;t accept their key anyway.</div><br/><div id="42140794" class="c"><input type="checkbox" id="c-42140794" checked=""/><div class="controls bullet"><span class="by">woodruffw</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42140447">parent</a><span>|</span><a href="#42140207">next</a><span>|</span><label class="collapse" for="c-42140794">[-]</label><label class="expand" for="c-42140794">[2 more]</label></div><br/><div class="children"><div class="content">I think you&#x27;re missing something. The key in question is a short-lived ECDSA key that lives inside a publishing workflow and is destroyed after signing; neither GitHub nor the Sigstore CA generates a signing key for you.<p>PyPI will accept any key bound to an identity, provided we know how to verify that identity. Right now that means we accept Trusted Publishing identities, and GitHub identities in particular, since that&#x27;s where the overwhelming majority of Python package publishing traffic comes from. Like what happened Trusted Publishing, this will be expanded to other identities (like GitLab repositories)  as we roll it out.</div><br/><div id="42141463" class="c"><input type="checkbox" id="c-42141463" checked=""/><div class="controls bullet"><span class="by">guappa</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42140794">parent</a><span>|</span><a href="#42140207">next</a><span>|</span><label class="collapse" for="c-42141463">[-]</label><label class="expand" for="c-42141463">[1 more]</label></div><br/><div class="children"><div class="content">How does pypi know I&#x27;m not github? Because I can sign with my keys and not with github&#x27;s key.<p>Never mind all the low level details of the temporary keys and hashes and all of that. This is an high level comment not a university book about security.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="42140207" class="c"><input type="checkbox" id="c-42140207" checked=""/><div class="controls bullet"><span class="by">freeone3000</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42137628">parent</a><span>|</span><a href="#42137713">prev</a><span>|</span><a href="#42143213">next</a><span>|</span><label class="collapse" for="c-42140207">[-]</label><label class="expand" for="c-42140207">[6 more]</label></div><br/><div class="children"><div class="content">It requires an OIDC IdP, thoughâ¦ with PGP, I can verify that my identity is constant, but now, Iâm reliant on some chosen third-party. And it has to keep being the same one, to boot! I donât like the lock-in this causes, and I definitely donât like the possibility of my right to publish being revoked by a third party.</div><br/><div id="42141767" class="c"><input type="checkbox" id="c-42141767" checked=""/><div class="controls bullet"><span class="by">beng-nl</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42140207">parent</a><span>|</span><a href="#42143213">next</a><span>|</span><label class="collapse" for="c-42141767">[-]</label><label class="expand" for="c-42141767">[5 more]</label></div><br/><div class="children"><div class="content">Iâm only now learning about what OIDC IdP is (for those like me: openid connect identity provider). But from my reading, a self hosted gitlab can function as an oidc idp.<p>That would be enough control, right?</div><br/><div id="42142276" class="c"><input type="checkbox" id="c-42142276" checked=""/><div class="controls bullet"><span class="by">chippiewill</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42141767">parent</a><span>|</span><a href="#42143213">next</a><span>|</span><label class="collapse" for="c-42142276">[-]</label><label class="expand" for="c-42142276">[4 more]</label></div><br/><div class="children"><div class="content">You can&#x27;t use a self-hosted Gitlab because you can only use a &quot;trusted publisher&quot;.<p>There&#x27;s no hard technical reason for that. It&#x27;s mostly that PyPI only want to trust certain issuers who they think will look after their signing keys responsibly.</div><br/><div id="42143918" class="c"><input type="checkbox" id="c-42143918" checked=""/><div class="controls bullet"><span class="by">woodruffw</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42142276">parent</a><span>|</span><a href="#42143624">next</a><span>|</span><label class="collapse" for="c-42143918">[-]</label><label class="expand" for="c-42143918">[1 more]</label></div><br/><div class="children"><div class="content">There is a technical reason for it, and itâs explained in an adjacent thread. Accepting every single small-scale IdP would result in a strictly worse security posture for PyPI as a whole, with no actual benefit to small instances (who are better off provisioning API tokens the normal way instead of using Trusted Publishing).</div><br/></div></div><div id="42143624" class="c"><input type="checkbox" id="c-42143624" checked=""/><div class="controls bullet"><span class="by">intelVISA</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42142276">parent</a><span>|</span><a href="#42143918">prev</a><span>|</span><a href="#42143213">next</a><span>|</span><label class="collapse" for="c-42143624">[-]</label><label class="expand" for="c-42143624">[2 more]</label></div><br/><div class="children"><div class="content">Sounds like PyPI have been corrupted? Hopefully The Foundation can remind them of their mission.</div><br/><div id="42144556" class="c"><input type="checkbox" id="c-42144556" checked=""/><div class="controls bullet"><span class="by">guappa</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42143624">parent</a><span>|</span><a href="#42143213">next</a><span>|</span><label class="collapse" for="c-42144556">[-]</label><label class="expand" for="c-42144556">[1 more]</label></div><br/><div class="children"><div class="content">Good luck with thatâ¦</div><br/></div></div></div></div></div></div></div></div></div></div><div id="42143213" class="c"><input type="checkbox" id="c-42143213" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42137628">parent</a><span>|</span><a href="#42140207">prev</a><span>|</span><a href="#42140433">next</a><span>|</span><label class="collapse" for="c-42143213">[-]</label><label class="expand" for="c-42143213">[3 more]</label></div><br/><div class="children"><div class="content">&quot;Ordinary user&quot; here.<p>It comes across like the goal of this system is to prove to my users a) who I am; b) that I am working in cooperation with some legitimate big business. I don&#x27;t understand why I should want to prove such things, nor why it&#x27;s desirable for b) to even be true, nor why my users should particularly care about a) at all, whether I can prove it or not.<p>I think my users should only care that the actual contents of the sdist match, and the built contents of the wheel correspond to, the source available at the location described in the README.<p>Yes, byte-for-byte reproducible builds would be a problem, for those who don&#x27;t develop pure Python. Part of why sdists exist is so that people who can&#x27;t trust the wheel, like distro maintainers, can build things themselves. And really - why would a distro maintainer take I take &quot;I can cryptographically prove the source came from zahlman, and trust me, this wheel corresponds to the source&quot; from $big_company any more seriously than &quot;trust me, this wheel corresponds to the source&quot; directly from me?<p>If I have to route my code through one of these companies (&quot;Don&#x27;t worry, you can work with Google instead!&quot; is <i>not a good response</i> to people who don&#x27;t want to work with Microsoft) to gain a compliance checkmark, and figure out how someone else&#x27;s CI system works (for many years it was perfectly possible for me to write thousands of lines of code and never even have an awareness that there <i>is such a thing</i> as CI) so that I can actually use the publishing system, and learn what things like &quot;OIDC IdP&quot; are so that I can talk to the people in charge...<p>... then I might as well learn the internal details of how it works.<p>And, in fact, if those people are suggesting that I shouldn&#x27;t worry about such details, I count that as a red flag.<p>I thought open source was about transparency.</div><br/><div id="42145000" class="c"><input type="checkbox" id="c-42145000" checked=""/><div class="controls bullet"><span class="by">dogleash</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42143213">parent</a><span>|</span><a href="#42144451">next</a><span>|</span><label class="collapse" for="c-42145000">[-]</label><label class="expand" for="c-42145000">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Part of why sdists exist is so that people who can&#x27;t trust the wheel, like distro maintainers, can build things themselves.<p>Some might even expect to see pypi do the builds of everything going into it&#x27;s repo similar to a distro building for it&#x27;s repos. As far as I can tell, all this &#x27;attestation&#x27; is just pypi making microsoft pay for the compute time with extra steps.</div><br/></div></div><div id="42144451" class="c"><input type="checkbox" id="c-42144451" checked=""/><div class="controls bullet"><span class="by">solatic</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42143213">parent</a><span>|</span><a href="#42145000">prev</a><span>|</span><a href="#42140433">next</a><span>|</span><label class="collapse" for="c-42144451">[-]</label><label class="expand" for="c-42144451">[1 more]</label></div><br/><div class="children"><div class="content">There&#x27;s two alternate visions: anybody can work with anybody they trust, and Only BigCo Can Protect You.<p>We know the first falls apart because the Web of Trust fell apart. When the UI asks people &quot;hey, this is new, here&#x27;s the fingerprint, do you trust it?&quot;, nobody actually conducts review, they just mindlessly click &quot;yes&quot; and move on. Very, very, very few people will actually conduct full review of all changes. Even massive organizations that want to lie to themselves that they review the changes, end up just outsourcing the responsibility to someone who is willing to legally accept the risk then they go ahead and just mindlessly click &quot;yes&quot; anyway. There are just too many changes to keep track of and too many ways to obscure malicious code.<p>We know the second falls apart because human beings are both the inevitable and ultimate weakest link in even the robustest security architectures. Human beings <i>will</i> be compromised and the blast radius on these highly centralized architectures will be immense.<p>Pick your poison.</div><br/></div></div></div></div><div id="42140433" class="c"><input type="checkbox" id="c-42140433" checked=""/><div class="controls bullet"><span class="by">guappa</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42137628">parent</a><span>|</span><a href="#42143213">prev</a><span>|</span><a href="#42137658">next</a><span>|</span><label class="collapse" for="c-42140433">[-]</label><label class="expand" for="c-42140433">[5 more]</label></div><br/><div class="children"><div class="content">Except that also for trusted publishing, they only allowed github in the beginning and eventually added a couple of other providers. But if you&#x27;re not google or microsoft you won&#x27;t be added.</div><br/><div id="42140733" class="c"><input type="checkbox" id="c-42140733" checked=""/><div class="controls bullet"><span class="by">woodruffw</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42140433">parent</a><span>|</span><a href="#42137658">next</a><span>|</span><label class="collapse" for="c-42140733">[-]</label><label class="expand" for="c-42140733">[4 more]</label></div><br/><div class="children"><div class="content">These kinds of comments are borderline mendacious: you can observe, trivially, that 50% of the Trusted Publishers currently known to PyPI are neither Google nor Microsoft controlled[1].<p>If PyPI accepts two more likely ones, a full 2&#x2F;3rds will unrelated to GitHub.<p>[1]: <a href="https:&#x2F;&#x2F;docs.pypi.org&#x2F;trusted-publishers&#x2F;adding-a-publisher&#x2F;" rel="nofollow">https:&#x2F;&#x2F;docs.pypi.org&#x2F;trusted-publishers&#x2F;adding-a-publisher&#x2F;</a></div><br/><div id="42141474" class="c"><input type="checkbox" id="c-42141474" checked=""/><div class="controls bullet"><span class="by">guappa</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42140733">parent</a><span>|</span><a href="#42144016">next</a><span>|</span><label class="collapse" for="c-42141474">[-]</label><label class="expand" for="c-42141474">[1 more]</label></div><br/><div class="children"><div class="content">Ping me when one of them will be an open source entity rather than a company.</div><br/></div></div><div id="42144016" class="c"><input type="checkbox" id="c-42144016" checked=""/><div class="controls bullet"><span class="by">immibis</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42140733">parent</a><span>|</span><a href="#42141474">prev</a><span>|</span><a href="#42142880">next</a><span>|</span><label class="collapse" for="c-42144016">[-]</label><label class="expand" for="c-42144016">[1 more]</label></div><br/><div class="children"><div class="content">Wow. I get to choose one from a total of FOUR large corporations! Amazing openness!</div><br/></div></div><div id="42142880" class="c"><input type="checkbox" id="c-42142880" checked=""/><div class="controls bullet"><span class="by">cpburns2009</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42140733">parent</a><span>|</span><a href="#42144016">prev</a><span>|</span><a href="#42137658">next</a><span>|</span><label class="collapse" for="c-42142880">[-]</label><label class="expand" for="c-42142880">[1 more]</label></div><br/><div class="children"><div class="content">Wow, you can use a whole two other providers from your list: Gitlab and ActiveState. Color me unimpressed.</div><br/></div></div></div></div></div></div><div id="42137658" class="c"><input type="checkbox" id="c-42137658" checked=""/><div class="controls bullet"><span class="by">silverwind</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42137628">parent</a><span>|</span><a href="#42140433">prev</a><span>|</span><a href="#42139209">next</a><span>|</span><label class="collapse" for="c-42137658">[-]</label><label class="expand" for="c-42137658">[14 more]</label></div><br/><div class="children"><div class="content">Why does this need to allowlist CI providers in first place? Why not publish an open interface any CI provider can integrate against?</div><br/><div id="42137727" class="c"><input type="checkbox" id="c-42137727" checked=""/><div class="controls bullet"><span class="by">woodruffw</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42137658">parent</a><span>|</span><a href="#42137703">next</a><span>|</span><label class="collapse" for="c-42137727">[-]</label><label class="expand" for="c-42137727">[12 more]</label></div><br/><div class="children"><div class="content">Because the security benefit of Trusted Publishing via OIDC versus normal API tokens is marginal at small scales, in two senses:<p>1. The primary benefit of Trusted Publishing over a manual API token is knowing that the underlying OIDC IdP has an on-call staff, proper key management and rotation policies, etc. These can be guaranteed for GitHub, GitLab, etc., but they&#x27;re harder to prove for one-off self-hosted CI setups. For the latter case, the user is no better off than they would be with a manual API token, which is still (and will always be) supported.<p>2. If the overwhelming majority of traffic comes from a single CI&#x2F;CD provider, adding more code to support generic OIDC IdPs increases PyPI&#x27;s attack surface for only marginal user benefit.<p>There also is no &quot;open interface&quot; for PyPI to really use here: this is all built on OIDC, but each OIDC provider needs to have its unique claims mapped to something intelligible by PyPI. That step requires thoughtful, manual, per-IdP consideration to avoid security issues.</div><br/><div id="42142417" class="c"><input type="checkbox" id="c-42142417" checked=""/><div class="controls bullet"><span class="by">chippiewill</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42137727">parent</a><span>|</span><a href="#42144916">prev</a><span>|</span><a href="#42140243">next</a><span>|</span><label class="collapse" for="c-42142417">[-]</label><label class="expand" for="c-42142417">[2 more]</label></div><br/><div class="children"><div class="content">I still think this is overly strict. Supporting arbitrary OIDC providers is not excessively complex or particularly rare, the major cloud providers all support it in one way or another [1][2][3], as does Hashicorp Vault [4]. I disagree that the primary benefit over a manual API token is _knowing_ that the OIDC IdP is following the best practices you talk about. Having it rely on asymmetric keys makes the process more secure and scalable than API tokens for those that choose to use it.<p>I think there&#x27;s a separate question around trust. But I think blocking non-trusted publishers from using a more secure form of authentication isn&#x27;t the answer. Instead I think it makes more sense to use nudges in the PyPI UI and eventually of consumers (e.g. pip) to indicate that packages have come from non-trusted publishers.<p>[1] <a href="https:&#x2F;&#x2F;docs.aws.amazon.com&#x2F;IAM&#x2F;latest&#x2F;UserGuide&#x2F;id_roles_providers_create_oidc.html" rel="nofollow">https:&#x2F;&#x2F;docs.aws.amazon.com&#x2F;IAM&#x2F;latest&#x2F;UserGuide&#x2F;id_roles_pr...</a>
[2] <a href="https:&#x2F;&#x2F;learn.microsoft.com&#x2F;en-us&#x2F;graph&#x2F;api&#x2F;resources&#x2F;federatedidentitycredentials-overview?view=graph-rest-1.0" rel="nofollow">https:&#x2F;&#x2F;learn.microsoft.com&#x2F;en-us&#x2F;graph&#x2F;api&#x2F;resources&#x2F;federa...</a>
[3] <a href="https:&#x2F;&#x2F;cloud.google.com&#x2F;identity-platform&#x2F;docs&#x2F;web&#x2F;oidc" rel="nofollow">https:&#x2F;&#x2F;cloud.google.com&#x2F;identity-platform&#x2F;docs&#x2F;web&#x2F;oidc</a>
[4] <a href="https:&#x2F;&#x2F;developer.hashicorp.com&#x2F;vault&#x2F;docs&#x2F;auth&#x2F;jwt" rel="nofollow">https:&#x2F;&#x2F;developer.hashicorp.com&#x2F;vault&#x2F;docs&#x2F;auth&#x2F;jwt</a></div><br/><div id="42144570" class="c"><input type="checkbox" id="c-42144570" checked=""/><div class="controls bullet"><span class="by">guappa</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42142417">parent</a><span>|</span><a href="#42140243">next</a><span>|</span><label class="collapse" for="c-42144570">[-]</label><label class="expand" for="c-42144570">[1 more]</label></div><br/><div class="children"><div class="content">I can create a github account. How does that make me trustworthy? How being able to create a github account prevents me from adding a virus in my module?</div><br/></div></div></div></div><div id="42140243" class="c"><input type="checkbox" id="c-42140243" checked=""/><div class="controls bullet"><span class="by">freeone3000</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42137727">parent</a><span>|</span><a href="#42142417">prev</a><span>|</span><a href="#42138661">next</a><span>|</span><label class="collapse" for="c-42140243">[-]</label><label class="expand" for="c-42140243">[6 more]</label></div><br/><div class="children"><div class="content">I think I would be better off with API key + PGP than API key alone. And thatâs being phased out?</div><br/><div id="42140749" class="c"><input type="checkbox" id="c-42140749" checked=""/><div class="controls bullet"><span class="by">woodruffw</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42140243">parent</a><span>|</span><a href="#42138661">next</a><span>|</span><label class="collapse" for="c-42140749">[-]</label><label class="expand" for="c-42140749">[5 more]</label></div><br/><div class="children"><div class="content">You can no longer upload a PGP signature to PyPI, if that&#x27;s what you mean. That was phased out last year (to virtually no complaint since nobody was actually verifying any of the signatures, much less attempting to confirm that their keys were discoverable[1]).<p>[1]: <a href="https:&#x2F;&#x2F;blog.yossarian.net&#x2F;2023&#x2F;05&#x2F;21&#x2F;PGP-signatures-on-PyPI-worse-than-useless" rel="nofollow">https:&#x2F;&#x2F;blog.yossarian.net&#x2F;2023&#x2F;05&#x2F;21&#x2F;PGP-signatures-on-PyPI...</a></div><br/><div id="42141554" class="c"><input type="checkbox" id="c-42141554" checked=""/><div class="controls bullet"><span class="by">guappa</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42140749">parent</a><span>|</span><a href="#42138661">next</a><span>|</span><label class="collapse" for="c-42141554">[-]</label><label class="expand" for="c-42141554">[4 more]</label></div><br/><div class="children"><div class="content">&gt; to virtually no complaint since nobody was actually verifying any of the signatures<p>And this is in no way a consequence of pypi stopping to host public keys right? Say the whole story at leastâ¦ Say that there used to be a way to verify the signatures but you dropped it years ago and since then the signatures have been useless.</div><br/><div id="42141856" class="c"><input type="checkbox" id="c-42141856" checked=""/><div class="controls bullet"><span class="by">woodruffw</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42141554">parent</a><span>|</span><a href="#42138661">next</a><span>|</span><label class="collapse" for="c-42141856">[-]</label><label class="expand" for="c-42141856">[3 more]</label></div><br/><div class="children"><div class="content">If it did, it was well before I ever began to work on PyPI. By the time I came around, PGP signature support was vestigial twice over <i>and</i> the public key discovery network on the Internet was rapidly imploding.<p>(But also: having PyPI be the keyserver defeats the point, since PyPI could then trivially replace my package&#x27;s key. If that&#x27;s the &quot;whole story,&quot; it&#x27;s not a very good one.)</div><br/><div id="42144900" class="c"><input type="checkbox" id="c-42144900" checked=""/><div class="controls bullet"><span class="by">guappa</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42141856">parent</a><span>|</span><a href="#42142309">next</a><span>|</span><label class="collapse" for="c-42144900">[-]</label><label class="expand" for="c-42144900">[1 more]</label></div><br/><div class="children"><div class="content">It was a plural you. I have no idea who you personally are.</div><br/></div></div><div id="42142309" class="c"><input type="checkbox" id="c-42142309" checked=""/><div class="controls bullet"><span class="by">freeone3000</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42141856">parent</a><span>|</span><a href="#42144900">prev</a><span>|</span><a href="#42138661">next</a><span>|</span><label class="collapse" for="c-42142309">[-]</label><label class="expand" for="c-42142309">[1 more]</label></div><br/><div class="children"><div class="content">This attestation doesnât change a ton with that, though. The point is to provide chain of custody â it got to my computer, from pypi, from ???. The PGP signature, much like a self-signed android app, verifies that it continues to be the same person.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="42138661" class="c"><input type="checkbox" id="c-42138661" checked=""/><div class="controls bullet"><span class="by">antononcube</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42137727">parent</a><span>|</span><a href="#42140243">prev</a><span>|</span><a href="#42137703">next</a><span>|</span><label class="collapse" for="c-42138661">[-]</label><label class="expand" for="c-42138661">[2 more]</label></div><br/><div class="children"><div class="content">&gt; [...] the user is no better off than they would be with a manual API token, which is still (and will always be) supported.<p>This is good to know. I did not see related statements in of the documents linked to this discussion, though.</div><br/><div id="42140620" class="c"><input type="checkbox" id="c-42140620" checked=""/><div class="controls bullet"><span class="by">antononcube</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42138661">parent</a><span>|</span><a href="#42137703">next</a><span>|</span><label class="collapse" for="c-42140620">[-]</label><label class="expand" for="c-42140620">[1 more]</label></div><br/><div class="children"><div class="content">I am not sure why my comment above is downvoted -- if you know where the perpetual optionality of digital attestations is officially stated, please, provide a link.</div><br/></div></div></div></div></div></div><div id="42137703" class="c"><input type="checkbox" id="c-42137703" checked=""/><div class="controls bullet"><span class="by">SethMLarson</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42137658">parent</a><span>|</span><a href="#42137727">prev</a><span>|</span><a href="#42139209">next</a><span>|</span><label class="collapse" for="c-42137703">[-]</label><label class="expand" for="c-42137703">[1 more]</label></div><br/><div class="children"><div class="content">Because every CI&#x2F;ID provider has a different set of claims and behaviors that would constitute a &quot;secure&quot; policy for verification. If there was one singular way to do that then we could, but there isn&#x27;t yet so PyPI needs to onboard providers piecemeal. The work to add a new provider is not massive, the reason there are not tons of providers isn&#x27;t because the work is hard but rather because people are voting with their feet so Github and Gitlab make sense as initial providers to support.</div><br/></div></div></div></div><div id="42139209" class="c"><input type="checkbox" id="c-42139209" checked=""/><div class="controls bullet"><span class="by">benatkin</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42137628">parent</a><span>|</span><a href="#42137658">prev</a><span>|</span><a href="#42138035">next</a><span>|</span><label class="collapse" for="c-42139209">[-]</label><label class="expand" for="c-42139209">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s good. IIRC the feature was launched with GitHub as the only option, which is the same state of affairs of <a href="https:&#x2F;&#x2F;jsr.io&#x2F;" rel="nofollow">https:&#x2F;&#x2F;jsr.io&#x2F;</a> right now.<p>IMO the launch should have been delayed until there was more than one <i>trusted publisher</i>.</div><br/></div></div></div></div><div id="42138035" class="c"><input type="checkbox" id="c-42138035" checked=""/><div class="controls bullet"><span class="by">hifromwork</span><span>|</span><a href="#42137562">parent</a><span>|</span><a href="#42137628">prev</a><span>|</span><a href="#42140525">next</a><span>|</span><label class="collapse" for="c-42138035">[-]</label><label class="expand" for="c-42138035">[2 more]</label></div><br/><div class="children"><div class="content">Even more, the previous way was to use GPG signatures, which were recently deprecated and removed. So you don&#x27;t really have a choice.<p>&gt;Where the only official workflow is &quot;Use GitHub Actions&quot;.<p>Well you can do it manually with other solutions... as long as they are one of the four trusted publishers (see &quot;Producing attestations manually does not bypass (...) restrictions on (...) Trusted Publishers&quot;:<p><a href="https:&#x2F;&#x2F;docs.pypi.org&#x2F;trusted-publishers&#x2F;adding-a-publisher&#x2F;#gitlab-cicd" rel="nofollow">https:&#x2F;&#x2F;docs.pypi.org&#x2F;trusted-publishers&#x2F;adding-a-publisher&#x2F;...</a><p>This means that you literally can&#x27;t do it manually, you have to rely on one of:<p>* Github<p>* Google Cloud<p>* ActiveState (I&#x27;m not familiar with it)<p>* Github.com (not just github, only that one instance)<p>Really surprising development, IMO.</div><br/><div id="42144318" class="c"><input type="checkbox" id="c-42144318" checked=""/><div class="controls bullet"><span class="by">burnt-resistor</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42138035">parent</a><span>|</span><a href="#42140525">next</a><span>|</span><label class="collapse" for="c-42144318">[-]</label><label class="expand" for="c-42144318">[1 more]</label></div><br/><div class="children"><div class="content">It looks a lot like reinventing the wheel, but as an octagon.</div><br/></div></div></div></div><div id="42140525" class="c"><input type="checkbox" id="c-42140525" checked=""/><div class="controls bullet"><span class="by">doctorpangloss</span><span>|</span><a href="#42137562">parent</a><span>|</span><a href="#42138035">prev</a><span>|</span><a href="#42144423">next</a><span>|</span><label class="collapse" for="c-42140525">[-]</label><label class="expand" for="c-42140525">[9 more]</label></div><br/><div class="children"><div class="content">On the one hand, you are totally right, GitHub Actions are the VS Code of automation. People choose them because they are broke, they work well enough, and the average person chooses things based on how it looks. GitHub Actions looks easy, it&#x27;s cozy, it&#x27;s comfy, VS Code looks like a code editor, everything has to be cozy and comfy.<p>On the other hand, considering all of that, you can see why Python would arrive at this design. They are the only other people besides NPM who regularly have supply chain attack problems. They are seemingly completely unopinionated about how to fix their supply chain problems, while being opinionated about the lack of opinions about packaging in general. What is the end goal? Presumably one of the giant media companies, Meta, Google or Microsoft maybe, have to take over the development of runtime and PEP process, but does that even sound good?</div><br/><div id="42141248" class="c"><input type="checkbox" id="c-42141248" checked=""/><div class="controls bullet"><span class="by">LtWorf</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42140525">parent</a><span>|</span><a href="#42144423">next</a><span>|</span><label class="collapse" for="c-42141248">[-]</label><label class="expand" for="c-42141248">[8 more]</label></div><br/><div class="children"><div class="content">I think the end goal is to only allow github&#x2F;google whatever accounts to publish code on Pypi, so importing whatever will be USA-sanctions safe.<p>The burden to ban russians&#x2F;koreans&#x2F;iranians will be on those big companies and pypi will be able to claim they respect the rules without having the resources themselves to ban accounts from sanctioned countries.<p>So in my opinion, in the future tooling will have some option to check if the software was uploaded via microsoft et al and can be considered unsanctioned in USA.<p>Or they might just say that&#x27;s how you upload now and that&#x27;s it.</div><br/><div id="42141438" class="c"><input type="checkbox" id="c-42141438" checked=""/><div class="controls bullet"><span class="by">doctorpangloss</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42141248">parent</a><span>|</span><a href="#42141488">next</a><span>|</span><label class="collapse" for="c-42141438">[-]</label><label class="expand" for="c-42141438">[2 more]</label></div><br/><div class="children"><div class="content">&gt; so importing whatever will be USA-sanctions safe...<p>You are talking about guys who can barely figure out how to structure a Python package repository. They are not doing this kind of 4D chess.<p>And anyway, none of that makes any sense.</div><br/><div id="42141521" class="c"><input type="checkbox" id="c-42141521" checked=""/><div class="controls bullet"><span class="by">LtWorf</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42141438">parent</a><span>|</span><a href="#42141488">next</a><span>|</span><label class="collapse" for="c-42141521">[-]</label><label class="expand" for="c-42141521">[1 more]</label></div><br/><div class="children"><div class="content">The people paying for this, not them.</div><br/></div></div></div></div><div id="42141488" class="c"><input type="checkbox" id="c-42141488" checked=""/><div class="controls bullet"><span class="by">woodruffw</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42141248">parent</a><span>|</span><a href="#42141438">prev</a><span>|</span><a href="#42144423">next</a><span>|</span><label class="collapse" for="c-42141488">[-]</label><label class="expand" for="c-42141488">[5 more]</label></div><br/><div class="children"><div class="content">None of this is true. There is no plan to disable API token uploads to PyPI or to mandate Trusted Publishing, much less attestations. It&#x27;s entirely intended to be a misuse-resistant way to upload to the index in the &quot;happy case&quot; where the package uses a CI&#x2F;CD workflow that supports OpenID Connect.<p>(I&#x27;m disappointed by the degree to which people seem to gleefully conspiracize about Python packaging, and consequently uncritically accept the worse possible interpretation of anything done to try and improve the ecosystem.)</div><br/><div id="42143482" class="c"><input type="checkbox" id="c-42143482" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42141488">parent</a><span>|</span><a href="#42141561">next</a><span>|</span><label class="collapse" for="c-42143482">[-]</label><label class="expand" for="c-42143482">[1 more]</label></div><br/><div class="children"><div class="content">&gt;(I&#x27;m disappointed by the degree to which people seem to gleefully conspiracize about Python packaging, and consequently uncritically accept the worse possible interpretation of anything done to try and improve the ecosystem.)<p>I sympathize, but there are obvious reasons for this: low trust in the Python packaging system generally (both because of recent PSF activity and because of the history of complications and long-standing problems), and the fact that many similar things have been seen in the Linux and open-source worlds lately (for one example, Linux Mint&#x27;s new stance on Flatpak and how they present Flatpak options in the Software Manager). (Edit: it also kinda rhymes with the whole &quot;Secure Boot&quot; thing and how much trouble it causes for Linux installation.)</div><br/></div></div><div id="42141561" class="c"><input type="checkbox" id="c-42141561" checked=""/><div class="controls bullet"><span class="by">LtWorf</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42141488">parent</a><span>|</span><a href="#42143482">prev</a><span>|</span><a href="#42144423">next</a><span>|</span><label class="collapse" for="c-42141561">[-]</label><label class="expand" for="c-42141561">[3 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t think you can predict the future any more than me.</div><br/><div id="42141836" class="c"><input type="checkbox" id="c-42141836" checked=""/><div class="controls bullet"><span class="by">woodruffw</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42141561">parent</a><span>|</span><a href="#42141600">next</a><span>|</span><label class="collapse" for="c-42141836">[-]</label><label class="expand" for="c-42141836">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t baselessly speculate about it. But yes, I do think I can predict with some confidence that PyPI is not going to remove API token access.</div><br/></div></div><div id="42141600" class="c"><input type="checkbox" id="c-42141600" checked=""/><div class="controls bullet"><span class="by">doctorpangloss</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42141561">parent</a><span>|</span><a href="#42141836">prev</a><span>|</span><a href="#42144423">next</a><span>|</span><label class="collapse" for="c-42141600">[-]</label><label class="expand" for="c-42141600">[1 more]</label></div><br/><div class="children"><div class="content">I understand the desire to raise awareness about your fringe concern. But it makes no sense.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="42144423" class="c"><input type="checkbox" id="c-42144423" checked=""/><div class="controls bullet"><span class="by">HdS84</span><span>|</span><a href="#42137562">parent</a><span>|</span><a href="#42140525">prev</a><span>|</span><a href="#42138967">next</a><span>|</span><label class="collapse" for="c-42144423">[-]</label><label class="expand" for="c-42144423">[3 more]</label></div><br/><div class="children"><div class="content">While I understand that, are more deep problem is that their main competitor (gut lab) is too busy to implement the fad of the day. Got labs cicd is already an unholy mess of scripting in yaml, and there is no good way to provide encapsulated pieces of code to gitlab. GitHub has actions which have a defined input and output, gitlab has nothing comparable. That makes it very difficult to provide functionality for gitlab.</div><br/><div id="42144481" class="c"><input type="checkbox" id="c-42144481" checked=""/><div class="controls bullet"><span class="by">riffraff</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42144423">parent</a><span>|</span><a href="#42145032">next</a><span>|</span><label class="collapse" for="c-42144481">[-]</label><label class="expand" for="c-42144481">[1 more]</label></div><br/><div class="children"><div class="content">Is it really that hard to provide a gitlab workflow?<p>AFAIU it&#x27;d be enough to have a docker image and use that in a standalone workflow which is a few lines of yaml in both GitHub and gitlab, what&#x27;d be the problem with that?</div><br/></div></div><div id="42145032" class="c"><input type="checkbox" id="c-42145032" checked=""/><div class="controls bullet"><span class="by">myworkinisgood</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42144423">parent</a><span>|</span><a href="#42144481">prev</a><span>|</span><a href="#42138967">next</a><span>|</span><label class="collapse" for="c-42145032">[-]</label><label class="expand" for="c-42145032">[1 more]</label></div><br/><div class="children"><div class="content">CI&#x2F;CD components and steps.</div><br/></div></div></div></div><div id="42138967" class="c"><input type="checkbox" id="c-42138967" checked=""/><div class="controls bullet"><span class="by">ryanisnan</span><span>|</span><a href="#42137562">parent</a><span>|</span><a href="#42144423">prev</a><span>|</span><a href="#42137831">next</a><span>|</span><label class="collapse" for="c-42138967">[-]</label><label class="expand" for="c-42138967">[2 more]</label></div><br/><div class="children"><div class="content">I think you&#x27;re being overly critical. When it says that it adds support for Trusted Publishers, it links directly to this page: <a href="https:&#x2F;&#x2F;docs.pypi.org&#x2F;trusted-publishers&#x2F;" rel="nofollow">https:&#x2F;&#x2F;docs.pypi.org&#x2F;trusted-publishers&#x2F;</a>.<p>This page clearly explains how this uses OIDC, and uses GitHub Actions as an example. At no point in my read did I feel like this was shilling me a microsoft product.</div><br/><div id="42140483" class="c"><input type="checkbox" id="c-42140483" checked=""/><div class="controls bullet"><span class="by">guappa</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42138967">parent</a><span>|</span><a href="#42137831">next</a><span>|</span><label class="collapse" for="c-42140483">[-]</label><label class="expand" for="c-42140483">[1 more]</label></div><br/><div class="children"><div class="content">Try to run your own gitlab instance and use this to publish. See what happensâ¦<p>At this moment this only supports github.</div><br/></div></div></div></div><div id="42137831" class="c"><input type="checkbox" id="c-42137831" checked=""/><div class="controls bullet"><span class="by">didntcheck</span><span>|</span><a href="#42137562">parent</a><span>|</span><a href="#42138967">prev</a><span>|</span><a href="#42140881">next</a><span>|</span><label class="collapse" for="c-42137831">[-]</label><label class="expand" for="c-42137831">[3 more]</label></div><br/><div class="children"><div class="content">I might be reading this wrong but doesn&#x27;t it include four workflows, including Gitlab? The &quot;manual way&quot; section is grouped under the Github tab, which indicates to me that it&#x27;s only explaining how the Github-specific workflow works?<p><a href="https:&#x2F;&#x2F;docs.pypi.org&#x2F;trusted-publishers&#x2F;creating-a-project-through-oidc&#x2F;" rel="nofollow">https:&#x2F;&#x2F;docs.pypi.org&#x2F;trusted-publishers&#x2F;creating-a-project-...</a></div><br/><div id="42137978" class="c"><input type="checkbox" id="c-42137978" checked=""/><div class="controls bullet"><span class="by">belval</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42137831">parent</a><span>|</span><a href="#42138301">next</a><span>|</span><label class="collapse" for="c-42137978">[-]</label><label class="expand" for="c-42137978">[1 more]</label></div><br/><div class="children"><div class="content">I was referring to the &quot;Get Started&quot; section that links to a producing attestation page that can be found here: <a href="https:&#x2F;&#x2F;docs.pypi.org&#x2F;attestations&#x2F;producing-attestations&#x2F;#the-manual-way" rel="nofollow">https:&#x2F;&#x2F;docs.pypi.org&#x2F;attestations&#x2F;producing-attestations&#x2F;#t...</a>.<p>&gt; Support for automatic attestation generation and publication from other Trusted Publisher environments is planned. While not recommended, maintainers can also manually generate and publish attestations.</div><br/></div></div><div id="42138301" class="c"><input type="checkbox" id="c-42138301" checked=""/><div class="controls bullet"><span class="by">woodruffw</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42137831">parent</a><span>|</span><a href="#42137978">prev</a><span>|</span><a href="#42140881">next</a><span>|</span><label class="collapse" for="c-42138301">[-]</label><label class="expand" for="c-42138301">[1 more]</label></div><br/><div class="children"><div class="content">You&#x27;re on a slightly different page: Trusted Publishing supports four different providers, but this initial enablement of attestations (which are built <i>on top</i> of Trusted Publishing) is for GitHub only. The plan is to enable the others in short order.</div><br/></div></div></div></div><div id="42140881" class="c"><input type="checkbox" id="c-42140881" checked=""/><div class="controls bullet"><span class="by">LtWorf</span><span>|</span><a href="#42137562">parent</a><span>|</span><a href="#42137831">prev</a><span>|</span><a href="#42144001">next</a><span>|</span><label class="collapse" for="c-42140881">[-]</label><label class="expand" for="c-42140881">[3 more]</label></div><br/><div class="children"><div class="content">Funny how I have a talk about the evolution of pypi&#x27;s security at the upcoming minidebconf this weekend.<p>I guess I&#x27;ll have to update my slides :D<p>But well as a debian developer my advice is to just use debian and completely ignore pypi, so I might be slightly biased.</div><br/><div id="42143566" class="c"><input type="checkbox" id="c-42143566" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42140881">parent</a><span>|</span><a href="#42143412">next</a><span>|</span><label class="collapse" for="c-42143566">[-]</label><label class="expand" for="c-42143566">[1 more]</label></div><br/><div class="children"><div class="content">Does a .deb file even allow for installing for an arbitrary Python (i.e. not the system installation)? Am I supposed to find them through Apt and hope the Debian version of the package has a `python3` prefix on the name? Is that going to help if there are dependencies outside the Apt system?</div><br/></div></div><div id="42143412" class="c"><input type="checkbox" id="c-42143412" checked=""/><div class="controls bullet"><span class="by">mistrial9</span><span>|</span><a href="#42137562">root</a><span>|</span><a href="#42140881">parent</a><span>|</span><a href="#42143566">prev</a><span>|</span><a href="#42144001">next</a><span>|</span><label class="collapse" for="c-42143412">[-]</label><label class="expand" for="c-42143412">[1 more]</label></div><br/><div class="children"><div class="content">except that is impractical at best. The Debian (and Ubuntu) python packaging groups have been overwhelmed since Python2.7.  no way at all does the Debian packaging ecosystem reasonably satisfy python packages.. And there is more.. the Debian system does what it must do -- ensure system Python has integrity with major software stacks and the OS use of Python. Super! that is not at all the needs of users of python. As you know, Python has passed Javascript as the most used language on Github. There is tremendous pace and breadth to several important Python uses, with their libraries.<p>Please reconsider this position with Debian and python packaging.</div><br/></div></div></div></div><div id="42144001" class="c"><input type="checkbox" id="c-42144001" checked=""/><div class="controls bullet"><span class="by">immibis</span><span>|</span><a href="#42137562">parent</a><span>|</span><a href="#42140881">prev</a><span>|</span><a href="#42142188">next</a><span>|</span><label class="collapse" for="c-42144001">[-]</label><label class="expand" for="c-42144001">[1 more]</label></div><br/><div class="children"><div class="content">And the in-detail explanation is full of references to specific third-party services, like Fulcio and SigStore...</div><br/></div></div><div id="42142188" class="c"><input type="checkbox" id="c-42142188" checked=""/><div class="controls bullet"><span class="by">ikiris</span><span>|</span><a href="#42137562">parent</a><span>|</span><a href="#42144001">prev</a><span>|</span><a href="#42141666">next</a><span>|</span><label class="collapse" for="c-42142188">[-]</label><label class="expand" for="c-42142188">[1 more]</label></div><br/><div class="children"><div class="content">I think yâall are being overly aggressive against what is from an outside perspective looks like a mvp targeting the majority use case.<p>If the devâs lower in the comments claim that other support is soon to be added doesnât pan out then sure this is a valid argument, but it feels very premature and ignores the reality of launch expectations of most agile based teams.</div><br/></div></div></div></div><div id="42141666" class="c"><input type="checkbox" id="c-42141666" checked=""/><div class="controls bullet"><span class="by">ris</span><span>|</span><a href="#42137562">prev</a><span>|</span><a href="#42144884">next</a><span>|</span><label class="collapse" for="c-42141666">[-]</label><label class="expand" for="c-42141666">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not really convinced of the value of such attestations until a second party can reproduce the build themselves on their own hardware.<p>Putting aside the fact that the mechanisms underpinning Github Actions are a mystery black box, the vast vast vast majority of github workflows are not built in a reproducible way - it&#x27;s not even something that&#x27;s encouraged by Github Actions&#x27; architecture, which emphasises Actions&#x27; container images that are little more than packaged installer scripts that go and download dependencies from random parts of the internet at runtime. An &quot;attestation&quot; makes no guarantee that one of these randomly fetched dependencies hasn&#x27;t been usurped.<p>This is not to go into the poor security record of Github Actions&#x27; permissions model, which has brought us all a number of &quot;oh shit&quot; moments.</div><br/></div></div><div id="42144884" class="c"><input type="checkbox" id="c-42144884" checked=""/><div class="controls bullet"><span class="by">guappa</span><span>|</span><a href="#42141666">prev</a><span>|</span><a href="#42137406">next</a><span>|</span><label class="collapse" for="c-42144884">[-]</label><label class="expand" for="c-42144884">[1 more]</label></div><br/><div class="children"><div class="content">They even got some public money from Germany&#x27;s sovreign tech fund to couple uploads with gigantic USA companies.<p>This is probably deserving a criminal investigation since it appears the funds were probably misused?<p>Well done guys! Good job!</div><br/></div></div><div id="42137406" class="c"><input type="checkbox" id="c-42137406" checked=""/><div class="controls bullet"><span class="by">krnavy</span><span>|</span><a href="#42144884">prev</a><span>|</span><a href="#42138725">next</a><span>|</span><label class="collapse" for="c-42137406">[-]</label><label class="expand" for="c-42137406">[6 more]</label></div><br/><div class="children"><div class="content">After 2FA, the previous PyPI buzzword that was forced on everyone, JFrog discovered a key leak that compromised everything:<p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=40941809">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=40941809</a><p>JFrog also discovered multiple malicious package exploits later.<p>Now we get a Github centric new buzzword that could be replaced by trusted SHA256 sums. Python is also big on business speak like SBOM. The above key leak of course occurred after all these new security &quot;experts&quot; manifested themselves out of nowhere.<p>The procedure remains the same. Download a package from the original creators, audit it, use a local repo and block PyPI.</div><br/><div id="42138028" class="c"><input type="checkbox" id="c-42138028" checked=""/><div class="controls bullet"><span class="by">SethMLarson</span><span>|</span><a href="#42137406">parent</a><span>|</span><a href="#42144668">next</a><span>|</span><label class="collapse" for="c-42138028">[-]</label><label class="expand" for="c-42138028">[2 more]</label></div><br/><div class="children"><div class="content">Hello! I believe I&#x27;m one of the &quot;manifested&quot; security experts you&#x27;re hinting at :)<p>Good security doesn&#x27;t demand perfection, that&#x27;s why security is both prevention and preparedness. The response from our admin was in every way beyond what you&#x27;d expect from many other orgs: prompt response (on the order of minutes), full audit of activity for the credential (none found), and full public disclosure ahead of the security researcher&#x27;s report.<p>&gt; JFrog also discovered multiple malicious package exploits later.<p>If you&#x27;re referencing malicious packages on PyPI then yes! We want to keep PyPI freely open to all to use, and that has negative knock-on effects. Turns out that exploiting public good code repositories is quite popular, but I maintain that the impact is quite low and that our ability to respond to these sorts of attacks is also very good due to our network of security engineers and volunteers who are triaging their reports. Thanks to the work of Mike Fiedler (quarantining packages, API for reporting malicious packages, better UI for triagers) our ability to respond to malicious packages will become even better.<p>&gt; Now we get a Github centric new buzzword that could be replaced by trusted SHA256 sums.<p>In a way, this feature is what you&#x27;re describing but is easier to automate (therefore: good for you as a user) and is more likely to be correct because every attestation is verified by PyPI before it&#x27;s made available to others (which is also good for users). The focus on GitHub Actions is because this is where many Python projects publish from, there is little incentive to create a feature that no one will use.<p>&gt; Python is also big on business speak like SBOM.<p>Indeed, there is legislation in many places that will require SBOMs for all software placed in their markets so there is plenty of interest in these standards. I&#x27;m working on this myself to try to do the most we can for users while minimizing the impact this will have on upstream open source project maintainers.</div><br/><div id="42143625" class="c"><input type="checkbox" id="c-42143625" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42137406">root</a><span>|</span><a href="#42138028">parent</a><span>|</span><a href="#42144668">next</a><span>|</span><label class="collapse" for="c-42143625">[-]</label><label class="expand" for="c-42143625">[1 more]</label></div><br/><div class="children"><div class="content">&gt;In a way, this feature is what you&#x27;re describing but is easier to automate (therefore: good for you as a user) and is more likely to be correct because every attestation is verified by PyPI before it&#x27;s made available to others (which is also good for users).<p>How long should I expect it to take until I can automatically generate an attestation from `twine`? Or does someone else have to sign off on it through some OpenID mumbo-jumbo before I can qualify as &quot;trusted&quot;?<p>Automating the creation of SBOMs sounds even further out, since we&#x27;re still struggling with actually just building sdists in the first place.</div><br/></div></div></div></div><div id="42144668" class="c"><input type="checkbox" id="c-42144668" checked=""/><div class="controls bullet"><span class="by">pabs3</span><span>|</span><a href="#42137406">parent</a><span>|</span><a href="#42138028">prev</a><span>|</span><a href="#42143607">next</a><span>|</span><label class="collapse" for="c-42144668">[-]</label><label class="expand" for="c-42144668">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Download a package from the original creators<p>Don&#x27;t download packages from PyPI, go upstream to the actual source code on GitHub, audit that, build locally, verify your build is the same as the PyPI one, check the audits people have posted using crev, decide if you trust any of them, upload your audit to crev too.<p><a href="https:&#x2F;&#x2F;reproducible-builds.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;reproducible-builds.org&#x2F;</a>
<a href="https:&#x2F;&#x2F;github.com&#x2F;crev-dev&#x2F;">https:&#x2F;&#x2F;github.com&#x2F;crev-dev&#x2F;</a></div><br/></div></div><div id="42143607" class="c"><input type="checkbox" id="c-42143607" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42137406">parent</a><span>|</span><a href="#42144668">prev</a><span>|</span><a href="#42138937">next</a><span>|</span><label class="collapse" for="c-42143607">[-]</label><label class="expand" for="c-42143607">[1 more]</label></div><br/><div class="children"><div class="content">After reading the underlying report (<a href="https:&#x2F;&#x2F;jfrog.com&#x2F;blog&#x2F;leaked-pypi-secret-token-revealed-in-binary-preventing-suppy-chain-attack&#x2F;" rel="nofollow">https:&#x2F;&#x2F;jfrog.com&#x2F;blog&#x2F;leaked-pypi-secret-token-revealed-in-...</a>), I can&#x27;t help but think: &quot;where is the defense in depth?&quot; Since `.pyc` files are just a cache of compilation that&#x27;s already generally pretty quick, this could have been prevented by systems that simply didn&#x27;t allow for pushing them into the Docker image in the first place. Or by having `PYTHONDONTWRITEBYTECODE=1` set on the developer&#x27;s machine.<p>(Also, now I&#x27;m trying to wrap my head around the fact that there&#x27;s such a thing as &quot;Docker Hub&quot; in the first place, and that people feel comfortable using it.)</div><br/></div></div></div></div><div id="42138725" class="c"><input type="checkbox" id="c-42138725" checked=""/><div class="controls bullet"><span class="by">jonnycomputer</span><span>|</span><a href="#42137406">prev</a><span>|</span><a href="#42136739">next</a><span>|</span><label class="collapse" for="c-42138725">[-]</label><label class="expand" for="c-42138725">[1 more]</label></div><br/><div class="children"><div class="content">Supply chain security is very important, and this seems like an important step. Seems absolutely essential that something like the Mozilla foundation, or EFF, or some other open-source friendly entity help provide such a service, instead of corralling users into companies with exploitative business models.<p>I am in no hurry to be pushed into using Github, Gitlab or whatever else. Programmer&#x27;s open source code has been monetized by these companies to feed AI LLM beasties, and it&#x27;s fundamentally objectionable to me. I self-host my code using Gitea for that reason.</div><br/></div></div><div id="42136739" class="c"><input type="checkbox" id="c-42136739" checked=""/><div class="controls bullet"><span class="by">ashvardanian</span><span>|</span><a href="#42138725">prev</a><span>|</span><a href="#42137803">next</a><span>|</span><label class="collapse" for="c-42136739">[-]</label><label class="expand" for="c-42136739">[2 more]</label></div><br/><div class="children"><div class="content">Here is the GitHub issue you can subscribe to for automatically generated attestations in the GitHub CI PyPi upload action: <a href="https:&#x2F;&#x2F;github.com&#x2F;pypa&#x2F;gh-action-pypi-publish&#x2F;issues&#x2F;288">https:&#x2F;&#x2F;github.com&#x2F;pypa&#x2F;gh-action-pypi-publish&#x2F;issues&#x2F;288</a></div><br/><div id="42136782" class="c"><input type="checkbox" id="c-42136782" checked=""/><div class="controls bullet"><span class="by">woodruffw</span><span>|</span><a href="#42136739">parent</a><span>|</span><a href="#42137803">next</a><span>|</span><label class="collapse" for="c-42136782">[-]</label><label class="expand" for="c-42136782">[1 more]</label></div><br/><div class="children"><div class="content">Just a note: that issue is for connecting the already-present attestations to GitHub&#x27;s attestations feature[1]. Attestations are already automatically generated and uploaded <i>to PyPI</i> regardless of that issue.<p>(That issue will still be great to resolve, but just to avoid any confusion about its scope.)<p>[1]: <a href="https:&#x2F;&#x2F;docs.github.com&#x2F;en&#x2F;actions&#x2F;security-for-github-actions&#x2F;using-artifact-attestations&#x2F;using-artifact-attestations-to-establish-provenance-for-builds" rel="nofollow">https:&#x2F;&#x2F;docs.github.com&#x2F;en&#x2F;actions&#x2F;security-for-github-actio...</a></div><br/></div></div></div></div><div id="42137803" class="c"><input type="checkbox" id="c-42137803" checked=""/><div class="controls bullet"><span class="by">SethMLarson</span><span>|</span><a href="#42136739">prev</a><span>|</span><a href="#42142918">next</a><span>|</span><label class="collapse" for="c-42137803">[-]</label><label class="expand" for="c-42137803">[1 more]</label></div><br/><div class="children"><div class="content">Congratulations to everyone involved in this work! This is an incredible building block for not just supply-chain security both inside and downstream of the PyPI ecosystem but also for data analysis of open source projects (through strong linkage back to source repositories). Thank you all &lt;3</div><br/></div></div><div id="42142918" class="c"><input type="checkbox" id="c-42142918" checked=""/><div class="controls bullet"><span class="by">pabs3</span><span>|</span><a href="#42137803">prev</a><span>|</span><a href="#42136754">next</a><span>|</span><label class="collapse" for="c-42142918">[-]</label><label class="expand" for="c-42142918">[2 more]</label></div><br/><div class="children"><div class="content">Wonder when PyPI will be doing bootstrappable and reproducible builds.<p><a href="https:&#x2F;&#x2F;bootstrappable.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;bootstrappable.org&#x2F;</a> <a href="https:&#x2F;&#x2F;reproducible-builds.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;reproducible-builds.org&#x2F;</a></div><br/><div id="42142927" class="c"><input type="checkbox" id="c-42142927" checked=""/><div class="controls bullet"><span class="by">stavros</span><span>|</span><a href="#42142918">parent</a><span>|</span><a href="#42136754">next</a><span>|</span><label class="collapse" for="c-42142927">[-]</label><label class="expand" for="c-42142927">[1 more]</label></div><br/><div class="children"><div class="content">Given that it doesn&#x27;t do builds, never?</div><br/></div></div></div></div><div id="42136754" class="c"><input type="checkbox" id="c-42136754" checked=""/><div class="controls bullet"><span class="by">dlor</span><span>|</span><a href="#42142918">prev</a><span>|</span><a href="#42136713">next</a><span>|</span><label class="collapse" for="c-42136754">[-]</label><label class="expand" for="c-42136754">[1 more]</label></div><br/><div class="children"><div class="content">This is awesome to see, and the result of many years of hard work from awesome people.</div><br/></div></div><div id="42136713" class="c"><input type="checkbox" id="c-42136713" checked=""/><div class="controls bullet"><span class="by">woodruffw</span><span>|</span><a href="#42136754">prev</a><span>|</span><a href="#42143799">next</a><span>|</span><label class="collapse" for="c-42136713">[-]</label><label class="expand" for="c-42136713">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m very excited this has come to fruition!<p>PyPI&#x27;s user docs[1] have some more details, as does the underlying PEP[2].<p>[1]: <a href="https:&#x2F;&#x2F;docs.pypi.org&#x2F;attestations&#x2F;" rel="nofollow">https:&#x2F;&#x2F;docs.pypi.org&#x2F;attestations&#x2F;</a><p>[2]: <a href="https:&#x2F;&#x2F;peps.python.org&#x2F;pep-0740&#x2F;" rel="nofollow">https:&#x2F;&#x2F;peps.python.org&#x2F;pep-0740&#x2F;</a></div><br/></div></div><div id="42143799" class="c"><input type="checkbox" id="c-42143799" checked=""/><div class="controls bullet"><span class="by">OutOfHere</span><span>|</span><a href="#42136713">prev</a><span>|</span><a href="#42137278">next</a><span>|</span><label class="collapse" for="c-42143799">[-]</label><label class="expand" for="c-42143799">[1 more]</label></div><br/><div class="children"><div class="content">Are tools like uv, rye, hatch, etc. going to facilitate this?</div><br/></div></div><div id="42137278" class="c"><input type="checkbox" id="c-42137278" checked=""/><div class="controls bullet"><span class="by">cpburns2009</span><span>|</span><a href="#42143799">prev</a><span>|</span><a href="#42136983">next</a><span>|</span><label class="collapse" for="c-42137278">[-]</label><label class="expand" for="c-42137278">[5 more]</label></div><br/><div class="children"><div class="content">Great, now how do you use attestations with Twine when publishing packages on PyPI outside of the Github ecosystem?</div><br/><div id="42140707" class="c"><input type="checkbox" id="c-42140707" checked=""/><div class="controls bullet"><span class="by">guappa</span><span>|</span><a href="#42137278">parent</a><span>|</span><a href="#42138625">next</a><span>|</span><label class="collapse" for="c-42140707">[-]</label><label class="expand" for="c-42140707">[3 more]</label></div><br/><div class="children"><div class="content">You don&#x27;t. The whole point is that you can no longer sign anything. Microsoft signs for you.<p>And of course the signature means &quot;this user can push to github&quot; and nothing more.</div><br/><div id="42142395" class="c"><input type="checkbox" id="c-42142395" checked=""/><div class="controls bullet"><span class="by">remram</span><span>|</span><a href="#42137278">root</a><span>|</span><a href="#42140707">parent</a><span>|</span><a href="#42138625">next</a><span>|</span><label class="collapse" for="c-42142395">[-]</label><label class="expand" for="c-42142395">[2 more]</label></div><br/><div class="children"><div class="content">Hopefully the attestation is bound to a specific commit, so you can know the binaries came from the source?<p>Otherwise I don&#x27;t get it.</div><br/><div id="42144587" class="c"><input type="checkbox" id="c-42144587" checked=""/><div class="controls bullet"><span class="by">guappa</span><span>|</span><a href="#42137278">root</a><span>|</span><a href="#42142395">parent</a><span>|</span><a href="#42138625">next</a><span>|</span><label class="collapse" for="c-42144587">[-]</label><label class="expand" for="c-42144587">[1 more]</label></div><br/><div class="children"><div class="content">It doesn&#x27;t seem to be from what I can see. Only states that the upload came from a gh runner.</div><br/></div></div></div></div></div></div><div id="42138625" class="c"><input type="checkbox" id="c-42138625" checked=""/><div class="controls bullet"><span class="by">hifromwork</span><span>|</span><a href="#42137278">parent</a><span>|</span><a href="#42140707">prev</a><span>|</span><a href="#42136983">next</a><span>|</span><label class="collapse" for="c-42138625">[-]</label><label class="expand" for="c-42138625">[1 more]</label></div><br/><div class="children"><div class="content">You need to rely on one of the four trusted publishers. You can&#x27;t do it yourself: <a href="https:&#x2F;&#x2F;docs.pypi.org&#x2F;trusted-publishers&#x2F;adding-a-publisher&#x2F;" rel="nofollow">https:&#x2F;&#x2F;docs.pypi.org&#x2F;trusted-publishers&#x2F;adding-a-publisher&#x2F;</a></div><br/></div></div></div></div><div id="42136983" class="c"><input type="checkbox" id="c-42136983" checked=""/><div class="controls bullet"><span class="by">antononcube</span><span>|</span><a href="#42137278">prev</a><span>|</span><a href="#42143852">next</a><span>|</span><label class="collapse" for="c-42136983">[-]</label><label class="expand" for="c-42136983">[3 more]</label></div><br/><div class="children"><div class="content">It looks like another process certain software engineers want to program and facilitate. I hope it is and stays optional.</div><br/><div id="42141274" class="c"><input type="checkbox" id="c-42141274" checked=""/><div class="controls bullet"><span class="by">LtWorf</span><span>|</span><a href="#42136983">parent</a><span>|</span><a href="#42137157">next</a><span>|</span><label class="collapse" for="c-42141274">[-]</label><label class="expand" for="c-42141274">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m pessimistic about that.</div><br/></div></div></div></div><div id="42143852" class="c"><input type="checkbox" id="c-42143852" checked=""/><div class="controls bullet"><span class="by">Uptrenda</span><span>|</span><a href="#42136983">prev</a><span>|</span><a href="#42137079">next</a><span>|</span><label class="collapse" for="c-42143852">[-]</label><label class="expand" for="c-42143852">[1 more]</label></div><br/><div class="children"><div class="content">Despite crypto getting easier and easier + more main stream. You often don&#x27;t see it used that often. Even in (((&#x27;&quot;```blockchain&#x27;&quot;```))) projects (wink emoji; skull emoji; frown; picture of a chart crashing.) I welcome these additions to PyPI. I am a proud Python Chad and always will be.</div><br/></div></div><div id="42137079" class="c"><input type="checkbox" id="c-42137079" checked=""/><div class="controls bullet"><span class="by">trishankkarthik</span><span>|</span><a href="#42143852">prev</a><span>|</span><a href="#42142619">next</a><span>|</span><label class="collapse" for="c-42137079">[-]</label><label class="expand" for="c-42137079">[1 more]</label></div><br/><div class="children"><div class="content">Very cool, and congrats!<p>The corresponding ToB blog post says the following:<p>&gt; Longer term, we can do even better: doing âone offâ verifications means that the client has no recollection of which identities should be trusted for which distributions. To address this, installation tools need a notion of âtrust on first useâ for signing identities, meaning that subsequent installations can be halted and inspected by a user if the attesting identity changes (or the package becomes unattested between versions).<p>Agree: signing is only as good as verification. However, trust-on-first-use (TOFU) is not the most secure way to map packages to attestations because nothing stops attackers who have taken over PyPI from tampering with the _unsigned_ mapping of identities to attestations in package lockfiles for new clients (certainly in containerized environments where everything could look new), and even just new versions of packages.<p>Although [PEP 458](<a href="https:&#x2F;&#x2F;peps.python.org&#x2F;pep-0458&#x2F;" rel="nofollow">https:&#x2F;&#x2F;peps.python.org&#x2F;pep-0458&#x2F;</a>) is about signing the Python package index, it sets the foundation for being able to securely map packages to signed in-toto _policies_, which would in turn securely map identities to attestations. I think  it is worth noting how these different PEPs can work together :)</div><br/></div></div><div id="42142619" class="c"><input type="checkbox" id="c-42142619" checked=""/><div class="controls bullet"><span class="by">amelius</span><span>|</span><a href="#42137079">prev</a><span>|</span><a href="#42140702">next</a><span>|</span><label class="collapse" for="c-42142619">[-]</label><label class="expand" for="c-42142619">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;m curious what would happen if a maintainer&#x27;s PC is compromised. Is there any line of defense left at that point?</div><br/><div id="42144678" class="c"><input type="checkbox" id="c-42144678" checked=""/><div class="controls bullet"><span class="by">pabs3</span><span>|</span><a href="#42142619">parent</a><span>|</span><a href="#42144542">next</a><span>|</span><label class="collapse" for="c-42144678">[-]</label><label class="expand" for="c-42144678">[1 more]</label></div><br/><div class="children"><div class="content">Your own source code audits (including just watching git logs), and or social code audits using crev.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;crev-dev&#x2F;">https:&#x2F;&#x2F;github.com&#x2F;crev-dev&#x2F;</a></div><br/></div></div><div id="42144542" class="c"><input type="checkbox" id="c-42144542" checked=""/><div class="controls bullet"><span class="by">guappa</span><span>|</span><a href="#42142619">parent</a><span>|</span><a href="#42144678">prev</a><span>|</span><a href="#42140702">next</a><span>|</span><label class="collapse" for="c-42144542">[-]</label><label class="expand" for="c-42144542">[1 more]</label></div><br/><div class="children"><div class="content">None.<p>Developer machine will have ssh keys and github tokens that can be used to push a commit on github, that will be built, signed, and uploaded on pypi.</div><br/></div></div></div></div><div id="42140702" class="c"><input type="checkbox" id="c-42140702" checked=""/><div class="controls bullet"><span class="by">Comma2976</span><span>|</span><a href="#42142619">prev</a><span>|</span><label class="collapse" for="c-42140702">[-]</label><label class="expand" for="c-42140702">[1 more]</label></div><br/><div class="children"><div class="content">Great, now all that is missing is a decent packaging system for Python.</div><br/></div></div></div></div></div></div></div></body></html>