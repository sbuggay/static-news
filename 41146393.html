<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1722762051907" as="style"/><link rel="stylesheet" href="styles.css?v=1722762051907"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/flavioribeiro/donut">Go Donut: Convert Live Streaming to WebRTC</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>dreampeppers99</span> | <span>17 comments</span></div><br/><div><div id="41149426" class="c"><input type="checkbox" id="c-41149426" checked=""/><div class="controls bullet"><span class="by">iod</span><span>|</span><a href="#41148482">next</a><span>|</span><label class="collapse" for="c-41149426">[-]</label><label class="expand" for="c-41149426">[1 more]</label></div><br/><div class="children"><div class="content">Another library that I would recommend people look into for live streaming to WebRTC, as an alternative to Pion used in this project, is Janus WebRTC Server. I use it for ingesting RTP streams I generate from usb webcams and then playing it with very low latency in the browser. It even has a feature where you can stream multiple streams simultaneously. It also has a simple http api for adding, updating, and removing streams on demand.<p>Here is the library&#x27;s streaming demo:<p><a href="https:&#x2F;&#x2F;janus.conf.meetecho.com&#x2F;demos&#x2F;streaming.html" rel="nofollow">https:&#x2F;&#x2F;janus.conf.meetecho.com&#x2F;demos&#x2F;streaming.html</a></div><br/></div></div><div id="41148482" class="c"><input type="checkbox" id="c-41148482" checked=""/><div class="controls bullet"><span class="by">majorchord</span><span>|</span><a href="#41149426">prev</a><span>|</span><a href="#41146832">next</a><span>|</span><label class="collapse" for="c-41148482">[-]</label><label class="expand" for="c-41148482">[4 more]</label></div><br/><div class="children"><div class="content">My issue with this (and WebRTC in general) is that most residential users (at least in the US, probably many other countries) are behind some type of symmetrical NAT or CGNAT, often without the ability to forward ports or have working NAT traversal, which makes WebRTC unusable without a TURN server as it relies on communicating between peers via DTLS over UDP.<p>The problem with needing a TURN server is that you practically need to host it yourself, because there are no fast and reliable public ones, probably due to abuse. WebTorrent also has the same problem since it also uses WebRTC, and as such, 99% of applications that use either technology simply do not work at all for me or anyone else I&#x27;ve asked to try these services.</div><br/><div id="41148656" class="c"><input type="checkbox" id="c-41148656" checked=""/><div class="controls bullet"><span class="by">Sean-Der</span><span>|</span><a href="#41148482">parent</a><span>|</span><a href="#41146832">next</a><span>|</span><label class="collapse" for="c-41148656">[-]</label><label class="expand" for="c-41148656">[3 more]</label></div><br/><div class="children"><div class="content">You shouldn’t need TURN for Client&#x2F;Server like Donut. The Donut server runs on a world addressable host. So luckily no TURN woes here!<p>In practice ~20% of users need TURN <a href="https:&#x2F;&#x2F;medium.com&#x2F;@fippo&#x2F;what-kind-of-turn-server-is-being-used-d67dbfc2ff5d" rel="nofollow">https:&#x2F;&#x2F;medium.com&#x2F;@fippo&#x2F;what-kind-of-turn-server-is-being-...</a></div><br/><div id="41150115" class="c"><input type="checkbox" id="c-41150115" checked=""/><div class="controls bullet"><span class="by">majorchord</span><span>|</span><a href="#41148482">root</a><span>|</span><a href="#41148656">parent</a><span>|</span><a href="#41146832">next</a><span>|</span><label class="collapse" for="c-41150115">[-]</label><label class="expand" for="c-41150115">[2 more]</label></div><br/><div class="children"><div class="content">Donut still uses WebRTC though, which like I said, I still need TURN for and I can prove it. I still have a really hard time believing that only 20% of &quot;users&quot; (what users where? everyone in the world?) need it, as like I said, almost every residential US user needs it at the least.</div><br/><div id="41150585" class="c"><input type="checkbox" id="c-41150585" checked=""/><div class="controls bullet"><span class="by">ongy</span><span>|</span><a href="#41148482">root</a><span>|</span><a href="#41150115">parent</a><span>|</span><a href="#41146832">next</a><span>|</span><label class="collapse" for="c-41150585">[-]</label><label class="expand" for="c-41150585">[1 more]</label></div><br/><div class="children"><div class="content">If the server is not behind NAT, the only reason you might require TURN is a restrictive egress firewall blocking UDP to arbitrary ports.<p>It&#x27;ll be a host&lt;&gt;prflx connection pair. Though if the host can be reached that way, I&#x27;m unsure what the benefit of WebRTC is.</div><br/></div></div></div></div></div></div></div></div><div id="41146832" class="c"><input type="checkbox" id="c-41146832" checked=""/><div class="controls bullet"><span class="by">Hypnosis6173</span><span>|</span><a href="#41148482">prev</a><span>|</span><a href="#41147142">next</a><span>|</span><label class="collapse" for="c-41146832">[-]</label><label class="expand" for="c-41146832">[2 more]</label></div><br/><div class="children"><div class="content">I searched a solution to this 2 year ago, great to see such an easy to use implementation now.</div><br/><div id="41147917" class="c"><input type="checkbox" id="c-41147917" checked=""/><div class="controls bullet"><span class="by">Sean-Der</span><span>|</span><a href="#41146832">parent</a><span>|</span><a href="#41147142">next</a><span>|</span><label class="collapse" for="c-41147917">[-]</label><label class="expand" for="c-41147917">[1 more]</label></div><br/><div class="children"><div class="content">Did you end building it? What did yo use? What made it hard?</div><br/></div></div></div></div><div id="41147142" class="c"><input type="checkbox" id="c-41147142" checked=""/><div class="controls bullet"><span class="by">ongy</span><span>|</span><a href="#41146832">prev</a><span>|</span><a href="#41148923">next</a><span>|</span><label class="collapse" for="c-41147142">[-]</label><label class="expand" for="c-41147142">[4 more]</label></div><br/><div class="children"><div class="content">What&#x27;s the purpose of this?<p>Mostly a tech-demo, or primarily to plug a p2p layer onto existing servers?</div><br/><div id="41147887" class="c"><input type="checkbox" id="c-41147887" checked=""/><div class="controls bullet"><span class="by">Sean-Der</span><span>|</span><a href="#41147142">parent</a><span>|</span><a href="#41148553">next</a><span>|</span><label class="collapse" for="c-41147887">[-]</label><label class="expand" for="c-41147887">[1 more]</label></div><br/><div class="children"><div class="content">This allows you to view video from protocols the browser doesn’t support with very little added latency.<p>Things like RTMP&#x2F;SRT&#x2F;RIST&#x2F;RTSP….</div><br/></div></div><div id="41148553" class="c"><input type="checkbox" id="c-41148553" checked=""/><div class="controls bullet"><span class="by">majorchord</span><span>|</span><a href="#41147142">parent</a><span>|</span><a href="#41147887">prev</a><span>|</span><a href="#41147578">next</a><span>|</span><label class="collapse" for="c-41148553">[-]</label><label class="expand" for="c-41148553">[1 more]</label></div><br/><div class="children"><div class="content">It looks to me like an early WIP clone of those &quot;watch movies together with friends online&quot; services.</div><br/></div></div><div id="41147578" class="c"><input type="checkbox" id="c-41147578" checked=""/><div class="controls bullet"><span class="by">manorwar8</span><span>|</span><a href="#41147142">parent</a><span>|</span><a href="#41148553">prev</a><span>|</span><a href="#41148923">next</a><span>|</span><label class="collapse" for="c-41147578">[-]</label><label class="expand" for="c-41147578">[1 more]</label></div><br/><div class="children"><div class="content">it might be useful as a preview for media ingestion</div><br/></div></div></div></div><div id="41148923" class="c"><input type="checkbox" id="c-41148923" checked=""/><div class="controls bullet"><span class="by">alexdoesh</span><span>|</span><a href="#41147142">prev</a><span>|</span><a href="#41147913">next</a><span>|</span><label class="collapse" for="c-41148923">[-]</label><label class="expand" for="c-41148923">[3 more]</label></div><br/><div class="children"><div class="content">Do we have any reverse bridge available, that you can use for in-browser or edge conversion from WebRTC to RTMP&#x2F;HSL?</div><br/><div id="41151863" class="c"><input type="checkbox" id="c-41151863" checked=""/><div class="controls bullet"><span class="by">Manfred</span><span>|</span><a href="#41148923">parent</a><span>|</span><a href="#41148930">next</a><span>|</span><label class="collapse" for="c-41151863">[-]</label><label class="expand" for="c-41151863">[1 more]</label></div><br/><div class="children"><div class="content">Not sure what you want to do exactly, but <a href="https:&#x2F;&#x2F;github.com&#x2F;harlanc&#x2F;xiu">https:&#x2F;&#x2F;github.com&#x2F;harlanc&#x2F;xiu</a> could be a fit.</div><br/></div></div><div id="41148930" class="c"><input type="checkbox" id="c-41148930" checked=""/><div class="controls bullet"><span class="by">Sean-Der</span><span>|</span><a href="#41148923">parent</a><span>|</span><a href="#41151863">prev</a><span>|</span><a href="#41147913">next</a><span>|</span><label class="collapse" for="c-41148930">[-]</label><label class="expand" for="c-41148930">[1 more]</label></div><br/><div class="children"><div class="content">Not that I am aware of! Happy to help build it if you are interested in starting it :)</div><br/></div></div></div></div><div id="41147913" class="c"><input type="checkbox" id="c-41147913" checked=""/><div class="controls bullet"><span class="by">Sean-Der</span><span>|</span><a href="#41148923">prev</a><span>|</span><label class="collapse" for="c-41147913">[-]</label><label class="expand" for="c-41147913">[2 more]</label></div><br/><div class="children"><div class="content">This is a great project. I really want to add a little JS lib so it could be all done client side<p>&lt;donut server=‘’ src=‘rtmp:&#x2F;&#x2F;….’ &#x2F;&gt;<p>src could be any protocol you want.</div><br/><div id="41148252" class="c"><input type="checkbox" id="c-41148252" checked=""/><div class="controls bullet"><span class="by">dreampeppers99</span><span>|</span><a href="#41147913">parent</a><span>|</span><label class="collapse" for="c-41148252">[-]</label><label class="expand" for="c-41148252">[1 more]</label></div><br/><div class="children"><div class="content">that is the idea behind <a href="https:&#x2F;&#x2F;github.com&#x2F;flavioribeiro&#x2F;donut-video">https:&#x2F;&#x2F;github.com&#x2F;flavioribeiro&#x2F;donut-video</a> but it needs to be updated</div><br/></div></div></div></div></div></div></div></div></div></body></html>