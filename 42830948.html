<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1738227667500" as="style"/><link rel="stylesheet" href="styles.css?v=1738227667500"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://codeinsecurity.wordpress.com/2025/01/25/proper-decoupling-practices-and-why-you-should-leave-100nf-behind/">Proper decoupling capacitor practices, and why you should leave 100nF behind</a> <span class="domain">(<a href="https://codeinsecurity.wordpress.com">codeinsecurity.wordpress.com</a>)</span></div><div class="subtext"><span>zdw</span> | <span>46 comments</span></div><br/><div><div id="42874466" class="c"><input type="checkbox" id="c-42874466" checked=""/><div class="controls bullet"><span class="by">Aurornis</span><span>|</span><a href="#42875862">next</a><span>|</span><label class="collapse" for="c-42874466">[-]</label><label class="expand" for="c-42874466">[6 more]</label></div><br/><div class="children"><div class="content">The advice to use 1uF or 2.2uF for typical projects is good. It&#x27;s common to see higher value capacitors in modern reference designs because this is well known among people who actually engineer circuits instead of copy and paste from 20 year old wisdom.<p>Don&#x27;t go to a larger package to get more capacitance, though. Capacitors that are physically larger will have worse higher frequency performance. The physical package is part of the limiting factor. Very high speed designs will prefer 0201 capacitors.<p>Also keep in mind the distribution of your decoupling capacitors. Putting a single 2.2uF in a board in place of multiple 100nF caps distributed around the PCB would be a mistake. The decoupling capacitor needs to be physically close to what you&#x27;re trying to decouple.<p>For hobby projects and microcontrollers most of this just doesn&#x27;t matter. Pick a capacitor and put it on the board. For real high speed work you have to consider the layout. Number, size, and location of vias around the capacitor has a big impact. Loop area is also a big factor. Don&#x27;t use narrow traces or locate capacitors far away.</div><br/><div id="42875724" class="c"><input type="checkbox" id="c-42875724" checked=""/><div class="controls bullet"><span class="by">bboygravity</span><span>|</span><a href="#42874466">parent</a><span>|</span><a href="#42875341">next</a><span>|</span><label class="collapse" for="c-42875724">[-]</label><label class="expand" for="c-42875724">[1 more]</label></div><br/><div class="children"><div class="content">Or just open the simulator&#x2F;charts on the capacitor manufacturer website and look at which capacitor filters which frequencies at which temperatures?<p>Apparently most EE&#x27;s don&#x27;t do this.. I&#x27;ve seen decoupling caps in designs that basically do nothing.</div><br/></div></div><div id="42875341" class="c"><input type="checkbox" id="c-42875341" checked=""/><div class="controls bullet"><span class="by">LiamPowell</span><span>|</span><a href="#42874466">parent</a><span>|</span><a href="#42875724">prev</a><span>|</span><a href="#42875862">next</a><span>|</span><label class="collapse" for="c-42875341">[-]</label><label class="expand" for="c-42875341">[4 more]</label></div><br/><div class="children"><div class="content">I think 100nF is arguably still a safer option for people that are just going to copy the datasheet. As mentioned at the end of the post, lots of low inductance capacitance can reduce the phase margin of your linear regulators, and you can very quickly end up with a hundred decoupling caps on a small board. This is of course a solvable problem and sometimes it&#x27;s just not a problem at all, but it&#x27;s horrendously difficult to determine when it&#x27;s going to start being a problem in many cases with big, low inductance power planes and caps littered across them various distances away from each other and the regulator.</div><br/><div id="42875481" class="c"><input type="checkbox" id="c-42875481" checked=""/><div class="controls bullet"><span class="by">exmadscientist</span><span>|</span><a href="#42874466">root</a><span>|</span><a href="#42875341">parent</a><span>|</span><a href="#42875524">next</a><span>|</span><label class="collapse" for="c-42875481">[-]</label><label class="expand" for="c-42875481">[2 more]</label></div><br/><div class="children"><div class="content">The solution is to <i>additionally</i> stuff a bigass electrolytic capacitor on the rail, either tantalum or aluminum. The ESR of the electrolytic will damp out the naughty high-Q tendencies of the ceramics and everything will work out wonderfully in typical cases. (Of course there are pathological cases out there. There are always pathological cases. And if there ever stop being pathological cases, I&#x27;ll be out of a job!)</div><br/><div id="42876056" class="c"><input type="checkbox" id="c-42876056" checked=""/><div class="controls bullet"><span class="by">AnthonBerg</span><span>|</span><a href="#42874466">root</a><span>|</span><a href="#42875481">parent</a><span>|</span><a href="#42875524">next</a><span>|</span><label class="collapse" for="c-42876056">[-]</label><label class="expand" for="c-42876056">[1 more]</label></div><br/><div class="children"><div class="content">At this point—thank you!—a Zachtronics game was born in my head. I’d like to play it!<p>(Maybe it’s a good secret level in that Zachtronics game about nondeterministic infinitesimals portrayed as getting things done in a corporate environment;… what was the name of that one again?)</div><br/></div></div></div></div><div id="42875524" class="c"><input type="checkbox" id="c-42875524" checked=""/><div class="controls bullet"><span class="by">mort96</span><span>|</span><a href="#42874466">root</a><span>|</span><a href="#42875341">parent</a><span>|</span><a href="#42875481">prev</a><span>|</span><a href="#42875862">next</a><span>|</span><label class="collapse" for="c-42875524">[-]</label><label class="expand" for="c-42875524">[1 more]</label></div><br/><div class="children"><div class="content">Having more decoupling capacitance on the board will increase inrush current as well, as all the capacitors have to be charged up once power is connected. Using larger decoupling capacitors than necessary might mean you&#x27;ll have to add measures to decrease inrush current where you&#x27;d otherwise not need to.</div><br/></div></div></div></div></div></div><div id="42875862" class="c"><input type="checkbox" id="c-42875862" checked=""/><div class="controls bullet"><span class="by">fxtentacle</span><span>|</span><a href="#42874466">prev</a><span>|</span><a href="#42874300">next</a><span>|</span><label class="collapse" for="c-42875862">[-]</label><label class="expand" for="c-42875862">[6 more]</label></div><br/><div class="children"><div class="content">In my opinion, this is bad advice.<p>Peak currents are very much a thing! for anything powered by battery or over USB. When you connect your USB gadget, you don&#x27;t want it to exceed the USB spec and fry your USB port (or USB hub). That means there is a limit to how much in total capacitance your USB gadget can have before the power surge of connecting its cable becomes an issue. And that means you usually need to use the smallest caps that are OK to do the job. You typically need to use multiple decoupling caps all over the board, so using one that is too large very quickly adds up. That&#x27;s how you end up using 100nF instead of 1uF.<p>Also, the article complains that 100nF caps have their filtering peak at the wrong frequency, but I&#x27;d argue that 20MHz to 40MHz is exactly in line with the rise and fall times of modern ICs, meaning that 100nF caps would even work better than 1uF for those ICs. As an example, look at the PCM5242 datasheet which suggests 100nF caps and their switching times are in the 16ns to 20ns range. Looking at the &quot;impedance plot&quot; in the original article, that means the red line is most suitable ... which is the 100nF 0402 capacitor.<p>The article would be correct if you are working on things using old (slow) ICs and a dedicated power supply. But if you&#x27;re working on USB power with modern ICs, I believe going from 100nF to 1uF is a step in the wrong direction.</div><br/><div id="42875957" class="c"><input type="checkbox" id="c-42875957" checked=""/><div class="controls bullet"><span class="by">bunnie</span><span>|</span><a href="#42875862">parent</a><span>|</span><a href="#42875940">next</a><span>|</span><label class="collapse" for="c-42875957">[-]</label><label class="expand" for="c-42875957">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;m glad I&#x27;m not the only one who was weirded out by the glossing over of the &quot;it&#x27;s better in the 20-40MHz range, I guess?&quot; punch line. That&#x27;s kind of exactly the frequency band where you need the reinforcement.<p>The article does get it right that you need to reduce the parasitic elements to the chip, but you have to consider like, everything - not just the wires to the package, but also the lead frame, bond wires, the wiring in the chip. Usually the chip designers modeled that all out and they put decoupling capacitors on chip and did PCB model simulations that includes some specific assumption about the impedance curves of the off-chip caps, and they probably used 0.1uF in their simulations.<p>If anything, you need closely placed decaps to prop up higher frequencies, not lower frequencies. Remember if you have a SPI bus clocking at 25MHz, 25MHz is just the fundamental - you have the whole fourier series going up to 100&#x27;s of MHz on the edge.<p>The answer I had always seen looking at the chip models is that there is an off-chip capacitance value below which it does not make sense to use because the bond wires effectively isolate the chip above certain frequencies (i.e., while smaller value capacitors have higher SRF it doesn&#x27;t matter because the chip can&#x27;t &quot;see&quot; the capacitor due to the bond wires screening it out).<p>If you knew where that roll-off was, and you knew the curve of your capacitors + board parasitics, you&#x27;d place a cap as close as you can to the chip in the frequency band right below the roll off of the bond wires to prop up that zone. Then, you&#x27;d place larger caps farther away because, as the article notes, the inductance goes up but also you&#x27;re just looking to prop up the higher impedance-at-lower-frequencies curve of the tiny cap that&#x27;s close to the chip.<p>So a lot of it depends on the exact chip you&#x27;re working with and how well designed it is. A classic chip design team would have an expert who did all the parasitic modeling of the package, board, and then they&#x27;d do a noise analysis on the chip and recommend a minimum on-chip decap so the board designers don&#x27;t have to worry too much, they can get away with &quot;almost anything&quot; in the 0.1uF range. Unfortunately chip design teams are getting leaner and leaner these days and I don&#x27;t see the same level of care being put into chips. I think we more or less get away with it because there is so much margin in the chip timing; also modern chips are &quot;mostly&quot; (&gt;50%) fill cells -- e.g. decoupling capacitors -- that are placed right up against the logic gates so you can get away with bloody murder on the package and power distribution networks (background: modern chips are wiring-limited, not transistor-limited, but for process stability reasons you still need to make transistors everywhere at a uniform density, so they instantiate dummy transistors that are wired as capacitors between power and ground).<p>Where it really starts to matter is if you had e.g. a PLL and you&#x27;re trying to reduce noise that the loop filter can&#x27;t get rid of and in those cases often times you need much <i>smaller</i> capacitors because they have much better performance at higher frequencies. Yes, they suck at low frequencies - but your noise problem isn&#x27;t in the 1MHz band anyways; the loop filter can track that out. It&#x27;s going to be in the 100MHz+ range.<p>And as someone noted elsewhere, in-rush current is a real problem, and too much capacitance can cause a problem for regulator stability; especially the extremely high performance ceramics. And, if you&#x27;re doing an extremely power efficient design you may need to consider factors like leakage and losses due to CV-energy cycling if you shut down significant portions of the design when not in use.<p>(edits for clarity)</div><br/><div id="42876148" class="c"><input type="checkbox" id="c-42876148" checked=""/><div class="controls bullet"><span class="by">fxtentacle</span><span>|</span><a href="#42875862">root</a><span>|</span><a href="#42875957">parent</a><span>|</span><a href="#42875940">next</a><span>|</span><label class="collapse" for="c-42876148">[-]</label><label class="expand" for="c-42876148">[1 more]</label></div><br/><div class="children"><div class="content">Oh yeah, I completely forgot to mention proximity. 10x 100nF caps might be superior to 1x 1uF simply because the latter can only be close to 1 pin whereas the first can be close to 10 power supply pins.<p>Looking at the left diagram under the &quot;Decoupling capacitor placement&quot; headline here:<p><a href="https:&#x2F;&#x2F;jmw.name&#x2F;projects&#x2F;exploring-pdns&#x2F;" rel="nofollow">https:&#x2F;&#x2F;jmw.name&#x2F;projects&#x2F;exploring-pdns&#x2F;</a><p>... it is very obvious that the cap being 1cm away will already cause much worse degradation than what going from 100nF to 1uF could ever improve.<p>Many modern chips have multiple power input pins. Using smaller caps close to all of them will do much better than fewer bigger better caps, but with more distance.</div><br/></div></div></div></div><div id="42875940" class="c"><input type="checkbox" id="c-42875940" checked=""/><div class="controls bullet"><span class="by">robotresearcher</span><span>|</span><a href="#42875862">parent</a><span>|</span><a href="#42875957">prev</a><span>|</span><a href="#42876026">next</a><span>|</span><label class="collapse" for="c-42875940">[-]</label><label class="expand" for="c-42875940">[2 more]</label></div><br/><div class="children"><div class="content">The article says:<p>&quot;If you have a lot of devices powered off a single rail, placing lots of high-value decoupling capacitors will add up, so pay attention to inrush current. If you’re sticking 10uF decoupling caps on 20 devices then that’s 200uF. Maybe dial it back a smidge.&quot;</div><br/><div id="42876090" class="c"><input type="checkbox" id="c-42876090" checked=""/><div class="controls bullet"><span class="by">fxtentacle</span><span>|</span><a href="#42875862">root</a><span>|</span><a href="#42875940">parent</a><span>|</span><a href="#42876026">next</a><span>|</span><label class="collapse" for="c-42876090">[-]</label><label class="expand" for="c-42876090">[1 more]</label></div><br/><div class="children"><div class="content">In the recommended application circuit for a PCM5242RHB DA with a TPA6120A2 headphone amp, I already count 22 decoupling caps. Adding a STM32F446 CPU adds another 21 decoupling caps.<p>So if I was following the advice in the article, that would be 43uF of total capacitance just for a small CPU and headphone sound output. At about 10uF at 5V, you&#x27;re running into issues with the USB spec. (When not using power delivery negotiation, which necessitates additional components and beefy MOSFETs)<p>So while the article mentions that too much capacitance can be an issue, following the advice in the article will pretty much make sure you run into exactly that issue.</div><br/></div></div></div></div><div id="42876026" class="c"><input type="checkbox" id="c-42876026" checked=""/><div class="controls bullet"><span class="by">Zardoz84</span><span>|</span><a href="#42875862">parent</a><span>|</span><a href="#42875940">prev</a><span>|</span><a href="#42874300">next</a><span>|</span><label class="collapse" for="c-42876026">[-]</label><label class="expand" for="c-42876026">[1 more]</label></div><br/><div class="children"><div class="content">Interesting... My father, was a electronics engineer, was putting always 100nF decoupling caps in his boards. And was stuff that not was powered by a USB. It was on industrial control boards. Boards controling electrovalvs and circuits in high tension AC (10-20KV) at around 10KHz to drive ozone generators. And never had issues with electrical noise in his boards.</div><br/></div></div></div></div><div id="42874300" class="c"><input type="checkbox" id="c-42874300" checked=""/><div class="controls bullet"><span class="by">pclmulqdq</span><span>|</span><a href="#42875862">prev</a><span>|</span><a href="#42875118">next</a><span>|</span><label class="collapse" for="c-42874300">[-]</label><label class="expand" for="c-42874300">[1 more]</label></div><br/><div class="children"><div class="content">Fewer, larger caps is probably correct for most hobby projects per this post, but many high-speed parts will recommend using tiny caps on the order of 1-10 nF underneath large BGAs plus some extra bulk capacitance (1-10 uF parts). It is really all about doing the math.</div><br/></div></div><div id="42875118" class="c"><input type="checkbox" id="c-42875118" checked=""/><div class="controls bullet"><span class="by">em3rgent0rdr</span><span>|</span><a href="#42874300">prev</a><span>|</span><a href="#42875263">next</a><span>|</span><label class="collapse" for="c-42875118">[-]</label><label class="expand" for="c-42875118">[4 more]</label></div><br/><div class="children"><div class="content">Since these ceramic decoupling capacitors can be made so small nowadays and since very low-inductance capacitors are suited to handle today&#x27;s high frequency switching noise, maybe it is worth the cost for IC packages should incorporate a small sized (low inductance) capacitor directly in the package, as that would be much closer to the silicon&#x27;s power &amp; ground than could be placed on a pcb. Then the pcb would only need to have the larger (&gt;=1uF) capacitor.<p>Just after I typed the above, I see Intel has such a patent filed in 2001 (<a href="https:&#x2F;&#x2F;patents.google.com&#x2F;patent&#x2F;US20050156280A1&#x2F;en" rel="nofollow">https:&#x2F;&#x2F;patents.google.com&#x2F;patent&#x2F;US20050156280A1&#x2F;en</a>). So maybe that patent has prevented other companies from adopting such a practice. (Having decoupling capacitors already in the package would sure make hobbyist pcb designing much easier, cause it is so hard to deal with tiny SMD parts.)</div><br/><div id="42875176" class="c"><input type="checkbox" id="c-42875176" checked=""/><div class="controls bullet"><span class="by">Aurornis</span><span>|</span><a href="#42875118">parent</a><span>|</span><a href="#42875263">next</a><span>|</span><label class="collapse" for="c-42875176">[-]</label><label class="expand" for="c-42875176">[3 more]</label></div><br/><div class="children"><div class="content">Capacitors can be embedded in chip packages, but it adds cost, size and complexity. Bonding two chips inside of a package increases the overall size considerably. You would have trouble connecting from the main IC to pins on one side of the chip, crossing over the capacitor, for example.<p>Every production board will have capacitors in other places, so removing one of them at the expense of increasing chip size and PCB area isn&#x27;t a good trade.<p>For high density designs with high budgets, you can embed capacitors and other passives directly into the circuit board in cutouts. You can also use special capacitance layer substrates to form a big distributed capacitor between two copper planes in the PCB.<p>There are a lot of options out there, it just doesn&#x27;t make sense in most cases because putting a capacitor that costs less than $0.01 around the chip is trivial.</div><br/><div id="42875190" class="c"><input type="checkbox" id="c-42875190" checked=""/><div class="controls bullet"><span class="by">picture</span><span>|</span><a href="#42875118">root</a><span>|</span><a href="#42875176">parent</a><span>|</span><a href="#42875263">next</a><span>|</span><label class="collapse" for="c-42875190">[-]</label><label class="expand" for="c-42875190">[2 more]</label></div><br/><div class="children"><div class="content">Most of the advanced chips (the 16 nm that Xilinx uses for UltraScale&#x2F;+ and below) are flip-chip wafers and have an interposer which is basically a very dense PCB that helps fanning out the extremely dense and small pitch of flip-chip bumps. They will usually include extra low impedance (&quot;landscape&quot; orientation) capacitors on the substrate, which leads to much relaxed PCB decoupling requirements.<p>Having designed FPGA boards with both their 7th generation parts and their Zynq UltraScale parts, the internal capacitors are such a time and cost saver in terms of being able to fan out more signals without more PCB layers<p>I can also attest that even relatively &quot;slow&quot; chips like 14 nm FinFET MPUs from Renesas have decoupling caps on the substrate</div><br/><div id="42876077" class="c"><input type="checkbox" id="c-42876077" checked=""/><div class="controls bullet"><span class="by">icefo</span><span>|</span><a href="#42875118">root</a><span>|</span><a href="#42875190">parent</a><span>|</span><a href="#42875263">next</a><span>|</span><label class="collapse" for="c-42876077">[-]</label><label class="expand" for="c-42876077">[1 more]</label></div><br/><div class="children"><div class="content">Do you make SoMs for a reseller by any chance ?<p>I&#x27;m looking at the newest versal chips from Xilinx&#x2F;AMD for a new design and buying a SoM &amp; designing our carrier board could fit the bill nicely. We&#x27;re still very early in the design process, we need to get prices for the chips too to see if it&#x27;s an idea worth pursuing.</div><br/></div></div></div></div></div></div></div></div><div id="42875263" class="c"><input type="checkbox" id="c-42875263" checked=""/><div class="controls bullet"><span class="by">farkanoid</span><span>|</span><a href="#42875118">prev</a><span>|</span><a href="#42874363">next</a><span>|</span><label class="collapse" for="c-42875263">[-]</label><label class="expand" for="c-42875263">[4 more]</label></div><br/><div class="children"><div class="content">Critical information for those that aren&#x27;t aware: MLCC capacitance decreases with applied DC voltage, like, a whole fucking lot. [1]<p>Those 10uF&#x2F;100V&#x2F;X7R&#x2F;1210 capacitors you love for your space constrained designs might only be 1uF at 48V. And it gets worse when choosing smaller package sizes.<p>This caught me completely off-guard. I&#x27;ve always thought an MLCC with a reasonable Dielectric at a given Capacitance would perform at least as well as an Electrolytic or Tantalum (minus fire hazards).<p>[1] (PDF) <a href="https:&#x2F;&#x2F;www.digikey.com&#x2F;Site&#x2F;Global&#x2F;Layouts&#x2F;DownloadPdf.ashx?pdfUrl=863968494F2E4E13BBEA65B55A358443" rel="nofollow">https:&#x2F;&#x2F;www.digikey.com&#x2F;Site&#x2F;Global&#x2F;Layouts&#x2F;DownloadPdf.ashx...</a></div><br/><div id="42875418" class="c"><input type="checkbox" id="c-42875418" checked=""/><div class="controls bullet"><span class="by">daedrdev</span><span>|</span><a href="#42875263">parent</a><span>|</span><a href="#42875314">next</a><span>|</span><label class="collapse" for="c-42875418">[-]</label><label class="expand" for="c-42875418">[2 more]</label></div><br/><div class="children"><div class="content">Thats because of the MLCCs you are considering, you can get ones with different voltage coefficents if you want. Like ones that keep 95% at 100v or even better. They cost more and have different materials.<p>Extreme parts cost a whole lot more</div><br/><div id="42875635" class="c"><input type="checkbox" id="c-42875635" checked=""/><div class="controls bullet"><span class="by">SequoiaHope</span><span>|</span><a href="#42875263">root</a><span>|</span><a href="#42875418">parent</a><span>|</span><a href="#42875314">next</a><span>|</span><label class="collapse" for="c-42875635">[-]</label><label class="expand" for="c-42875635">[1 more]</label></div><br/><div class="children"><div class="content">I was once caught by this issue too. The problem was that I didn’t know about the basic phenomenon (MLCC losing capacitance with voltage) so I didn’t know that I was expecting extreme parts.</div><br/></div></div></div></div><div id="42875314" class="c"><input type="checkbox" id="c-42875314" checked=""/><div class="controls bullet"><span class="by">LiamPowell</span><span>|</span><a href="#42875263">parent</a><span>|</span><a href="#42875418">prev</a><span>|</span><a href="#42874363">next</a><span>|</span><label class="collapse" for="c-42875314">[-]</label><label class="expand" for="c-42875314">[1 more]</label></div><br/><div class="children"><div class="content">Notably as the capacitance goes up in a given package size this effect increases dramatically. Every good manufacturer provides a plot of this for each product.</div><br/></div></div></div></div><div id="42874363" class="c"><input type="checkbox" id="c-42874363" checked=""/><div class="controls bullet"><span class="by">mikewarot</span><span>|</span><a href="#42875263">prev</a><span>|</span><a href="#42836341">next</a><span>|</span><label class="collapse" for="c-42874363">[-]</label><label class="expand" for="c-42874363">[5 more]</label></div><br/><div class="children"><div class="content">The traditional fix back in the 1980s was to use Tantalum capacitors which had good high frequency response. Unfortunately they turned out to be dependent on oppression for their source material and also tend to short at the smallest possible disturbance.<p>The cheap option was an electrolytic cap and a .1 uF disc ceramic. The self inductance of a wound aluminum capacitor tended to be ok at 120 hz hum frequency but horrible at higher frequencies found in TTL and CMOS logic.<p>Those also turned out to self destruct over time due to the extensive use of an <i>incomplete</i> stolen trade secret electrolyte formula in many low cost capacitors.<p>I&#x27;d still use both, personally.</div><br/><div id="42874409" class="c"><input type="checkbox" id="c-42874409" checked=""/><div class="controls bullet"><span class="by">Aurornis</span><span>|</span><a href="#42874363">parent</a><span>|</span><a href="#42836341">next</a><span>|</span><label class="collapse" for="c-42874409">[-]</label><label class="expand" for="c-42874409">[4 more]</label></div><br/><div class="children"><div class="content">Tantalum and electrolytic capacitors are primarily for bulk storage and lower frequencies. They don&#x27;t substitute for small ceramic capacitors in this context.<p>Switching regulator frequencies have become much higher since the 80s. It&#x27;s common to have switching regulators operating in the MHz range with small ceramic output capacitors and relatively low value inductors.</div><br/><div id="42874574" class="c"><input type="checkbox" id="c-42874574" checked=""/><div class="controls bullet"><span class="by">numpad0</span><span>|</span><a href="#42874363">root</a><span>|</span><a href="#42874409">parent</a><span>|</span><a href="#42836341">next</a><span>|</span><label class="collapse" for="c-42874574">[-]</label><label class="expand" for="c-42874574">[3 more]</label></div><br/><div class="children"><div class="content">I think the setup in GP is something like 0.1uF tantalum + 47uF electrolytic. 0.1uF stops CPU crashing and electrolytic stops CPU passing out. Tantalum fails in shorting mode and have since been replaced with ceramics that fail open, of course.</div><br/><div id="42875210" class="c"><input type="checkbox" id="c-42875210" checked=""/><div class="controls bullet"><span class="by">Aurornis</span><span>|</span><a href="#42874363">root</a><span>|</span><a href="#42874574">parent</a><span>|</span><a href="#42836341">next</a><span>|</span><label class="collapse" for="c-42875210">[-]</label><label class="expand" for="c-42875210">[2 more]</label></div><br/><div class="children"><div class="content">&gt; I think the setup in GP is something like 0.1uF tantalum + 47uF electrolytic. 0.1uF stops CPU crashing and electrolytic stops CPU passing out.<p>You might find a configuration like that in some old retro computing gear, but a modern 1uF ceramic chip capacitor will outperform a 0.1uF tantalum significantly. You don&#x27;t need to use an electrolytic for 47uF. You can get 47uF in one or two surface mount ceramic caps.</div><br/><div id="42875922" class="c"><input type="checkbox" id="c-42875922" checked=""/><div class="controls bullet"><span class="by">mikewarot</span><span>|</span><a href="#42874363">root</a><span>|</span><a href="#42875210">parent</a><span>|</span><a href="#42836341">next</a><span>|</span><label class="collapse" for="c-42875922">[-]</label><label class="expand" for="c-42875922">[1 more]</label></div><br/><div class="children"><div class="content">I was surprised to find that you can, indeed, get 47 uF 35 volt MLCC surface mount caps, but they&#x27;ll set you back about 10x the cost of the same capacitance in a surface mount electrolytic. In some cases, it might be worth it.<p>Most of the repairs I do are to older test equipment and radios, from WWII to the end of the 20th century. Some of the new surface mount stuff is just too small for us to work with. 6TTSOP is a chip 2 by 1.25 mm, and it&#x27;s really hard to tack leads onto it to patch it into an existing circuit.  (We needed 20+ dB of gain at 2 Ghz to replace an obsolete part, we ended up ordering a MAR-6+ instead, at least it&#x27;s big enough to solder)</div><br/></div></div></div></div></div></div></div></div></div></div><div id="42836341" class="c"><input type="checkbox" id="c-42836341" checked=""/><div class="controls bullet"><span class="by">polishdude20</span><span>|</span><a href="#42874363">prev</a><span>|</span><a href="#42834832">next</a><span>|</span><label class="collapse" for="c-42836341">[-]</label><label class="expand" for="c-42836341">[6 more]</label></div><br/><div class="children"><div class="content">I&#x27;d love to see some practical tests done. Like just layout a microcontroller PCB and use different decoupling caps and see how that affects things like max working SPI frequency or something.</div><br/><div id="42875157" class="c"><input type="checkbox" id="c-42875157" checked=""/><div class="controls bullet"><span class="by">jmwilson</span><span>|</span><a href="#42836341">parent</a><span>|</span><a href="#42841031">next</a><span>|</span><label class="collapse" for="c-42875157">[-]</label><label class="expand" for="c-42875157">[2 more]</label></div><br/><div class="children"><div class="content">I made a test PCB with capacitor footprints repeated at various intervals, with measurement ports for controlled experiments. You can really see the performance difference between two and four layer PCBs, for example: <a href="https:&#x2F;&#x2F;jmw.name&#x2F;projects&#x2F;exploring-pdns&#x2F;" rel="nofollow">https:&#x2F;&#x2F;jmw.name&#x2F;projects&#x2F;exploring-pdns&#x2F;</a></div><br/><div id="42875543" class="c"><input type="checkbox" id="c-42875543" checked=""/><div class="controls bullet"><span class="by">exmadscientist</span><span>|</span><a href="#42836341">root</a><span>|</span><a href="#42875157">parent</a><span>|</span><a href="#42841031">next</a><span>|</span><label class="collapse" for="c-42875543">[-]</label><label class="expand" for="c-42875543">[1 more]</label></div><br/><div class="children"><div class="content">Nice one!<p>I don&#x27;t suppose you ever did the measurement with big-V decoupling, and with and without the big electrolytic? That would have been really interesting.</div><br/></div></div></div></div><div id="42841031" class="c"><input type="checkbox" id="c-42841031" checked=""/><div class="controls bullet"><span class="by">jbarberu</span><span>|</span><a href="#42836341">parent</a><span>|</span><a href="#42875157">prev</a><span>|</span><a href="#42874930">next</a><span>|</span><label class="collapse" for="c-42841031">[-]</label><label class="expand" for="c-42841031">[1 more]</label></div><br/><div class="children"><div class="content">Maybe this fits the bill? <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=ARwBwHZESOY" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=ARwBwHZESOY</a></div><br/></div></div><div id="42874930" class="c"><input type="checkbox" id="c-42874930" checked=""/><div class="controls bullet"><span class="by">Joel_Mckay</span><span>|</span><a href="#42836341">parent</a><span>|</span><a href="#42841031">prev</a><span>|</span><a href="#42834832">next</a><span>|</span><label class="collapse" for="c-42874930">[-]</label><label class="expand" for="c-42874930">[2 more]</label></div><br/><div class="children"><div class="content">Like many engineering problems, filter design rarely has a universal solution. Many MLCC exhibit resonant piezoelectric and or electrostrictive effects. Thus offer marginal noise floor performance in VHF&#x2F;UHF LNA, and sometimes introduce more problems than they solve.<p>The main reason MLCC are so popular... is the price.   =3</div><br/><div id="42875099" class="c"><input type="checkbox" id="c-42875099" checked=""/><div class="controls bullet"><span class="by">daedrdev</span><span>|</span><a href="#42836341">root</a><span>|</span><a href="#42874930">parent</a><span>|</span><a href="#42834832">next</a><span>|</span><label class="collapse" for="c-42875099">[-]</label><label class="expand" for="c-42875099">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s also probably dependent on who made them, and the engineering of the materials they used. After all even if every cap meets the spec but there are several paths to get to the spec.</div><br/></div></div></div></div></div></div><div id="42834832" class="c"><input type="checkbox" id="c-42834832" checked=""/><div class="controls bullet"><span class="by">generj</span><span>|</span><a href="#42836341">prev</a><span>|</span><a href="#42874825">next</a><span>|</span><label class="collapse" for="c-42834832">[-]</label><label class="expand" for="c-42834832">[1 more]</label></div><br/><div class="children"><div class="content">This was really well written.
As someone who isn’t an electrical engineer but dabbles in making PCBs, I learned a lot.<p>But most importantly, as the author ends, I will probably continue lowering my mental overhead and put in 1uF or 2.2uF capacitors as my decoupling caps from now</div><br/></div></div><div id="42874825" class="c"><input type="checkbox" id="c-42874825" checked=""/><div class="controls bullet"><span class="by">satiric</span><span>|</span><a href="#42834832">prev</a><span>|</span><a href="#42874616">next</a><span>|</span><label class="collapse" for="c-42874825">[-]</label><label class="expand" for="c-42874825">[3 more]</label></div><br/><div class="children"><div class="content">What about for microcontrollers? I&#x27;ve seen some sequences of fairly specific capacitor values for 3.3V power in some microcontroller datasheets, and I always wondered how much that mattered.</div><br/><div id="42875204" class="c"><input type="checkbox" id="c-42875204" checked=""/><div class="controls bullet"><span class="by">picture</span><span>|</span><a href="#42874825">parent</a><span>|</span><a href="#42874977">next</a><span>|</span><label class="collapse" for="c-42875204">[-]</label><label class="expand" for="c-42875204">[1 more]</label></div><br/><div class="children"><div class="content">Usually the value isn&#x27;t a big deal for &quot;power rails&quot; which expect to have additional capacitors connected elsewhere. However, sometimes microcontrollers expose decoupling pins for use with internal voltage converters and regulators (for example the core voltage on older STM32 parts), and those require very specific values that correspond with the tuning of feedback networks and power converter design within the IC</div><br/></div></div><div id="42874977" class="c"><input type="checkbox" id="c-42874977" checked=""/><div class="controls bullet"><span class="by">serviceberry</span><span>|</span><a href="#42874825">parent</a><span>|</span><a href="#42875204">prev</a><span>|</span><a href="#42874616">next</a><span>|</span><label class="collapse" for="c-42874977">[-]</label><label class="expand" for="c-42874977">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s hard to generalize. Common microcontroller clock speeds range from 1 to 500 MHz. An 8-bit microcontroller running at 1 MHz will often work fine without any decoupling at all. A 32-bit microcontroller might not even boot without a ceramic capacitor nearby.<p>The basic answer is basically what the original article says. If you don&#x27;t want the mental burden of figuring it out, the spec gives you safe defaults that should work for almost all uses. But it&#x27;s almost never the case that you need to do it that way.</div><br/></div></div></div></div><div id="42874616" class="c"><input type="checkbox" id="c-42874616" checked=""/><div class="controls bullet"><span class="by">nubinetwork</span><span>|</span><a href="#42874825">prev</a><span>|</span><a href="#42874690">next</a><span>|</span><label class="collapse" for="c-42874616">[-]</label><label class="expand" for="c-42874616">[1 more]</label></div><br/><div class="children"><div class="content">I was always a fan of using 100uf and 100nf near a chip, and something like 1000uf for the entire board... but I don&#x27;t do modern stuff usually, mostly retro boards if I can still get parts.</div><br/></div></div><div id="42874690" class="c"><input type="checkbox" id="c-42874690" checked=""/><div class="controls bullet"><span class="by">nimish</span><span>|</span><a href="#42874616">prev</a><span>|</span><a href="#42874951">next</a><span>|</span><label class="collapse" for="c-42874690">[-]</label><label class="expand" for="c-42874690">[2 more]</label></div><br/><div class="children"><div class="content">Just use 3 terminal capacitors. Crazy low inductance, no rules of thumb needed.<p><a href="https:&#x2F;&#x2F;www.kyocera-avx.com&#x2F;docs&#x2F;techinfo&#x2F;CeramicCapacitors&#x2F;decoupling-principle-and-low-inductance-mlcc.pdf" rel="nofollow">https:&#x2F;&#x2F;www.kyocera-avx.com&#x2F;docs&#x2F;techinfo&#x2F;CeramicCapacitors&#x2F;...</a> by Kyocera AVX<p><a href="https:&#x2F;&#x2F;product.tdk.com&#x2F;en&#x2F;techlibrary&#x2F;solutionguide&#x2F;3tf03.html" rel="nofollow">https:&#x2F;&#x2F;product.tdk.com&#x2F;en&#x2F;techlibrary&#x2F;solutionguide&#x2F;3tf03.h...</a> by TDK<p>tl;dr: ESL is dominated by packaging inductance so the geometry of the capacitor matters a lot more than the value<p>3 terminal capacitors are the cheapest &quot;low inductance&quot; capacitor that have a meaningfully better ESL. If you need better than that you should use an EM field solver to properly understand PDN impedance.</div><br/><div id="42875282" class="c"><input type="checkbox" id="c-42875282" checked=""/><div class="controls bullet"><span class="by">thrtythreeforty</span><span>|</span><a href="#42874690">parent</a><span>|</span><a href="#42874951">next</a><span>|</span><label class="collapse" for="c-42875282">[-]</label><label class="expand" for="c-42875282">[1 more]</label></div><br/><div class="children"><div class="content">Yes, but the regular 2 terminal kind round to free at JLC on my hobby projects!</div><br/></div></div></div></div><div id="42874951" class="c"><input type="checkbox" id="c-42874951" checked=""/><div class="controls bullet"><span class="by">bsder</span><span>|</span><a href="#42874690">prev</a><span>|</span><a href="#42875456">next</a><span>|</span><label class="collapse" for="c-42874951">[-]</label><label class="expand" for="c-42874951">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Now, when I said that 100nF “works well enough” above, what I really mean is your circuit usually doesn’t completely break if you use a 100nF decoupling capacitor. But given that the cost to use a larger, better capacitor is effectively nil in most cases<p>This is simply not true.<p>That Samsung cap he quoted is about 1 or 2 cents in volume from Digikey or Mouser.  That cheap Chinese quote means that they are probably substituting inferior parts.<p>By contrast, the 0.1uF(100nF) in the same size is at least an <i>order of magnitude</i> cheaper.  This matters a lot as you can wind up with a lot of bypass caps on your board (a significant percentage of 100 isn&#x27;t uncommon).  In addition, you can get 10V rating instead of 6V which means that you don&#x27;t have to worry about USB transients destroying your cap and you get <i>much</i> better bias derating.<p>However, this article has a kind of fundamental misunderstanding:<p>&quot;Bypass&quot; caps (mostly) <i>aren&#x27;t about charge storage</i>.<p>The point of a &quot;bypass&quot; cap is to provide a return path for high frequency signals--the &quot;bypass&quot;.<p>All electrical signals require a <i>circuit</i>--that&#x27;s a full loop.  That loop goes positive power supply-&gt;chip A power-&gt;chip A out-&gt;chip B in-&gt;chip B gnd-&gt;negative power supply.<p>In the case of slow signals, it is fine for that loop to be that big.  The problem is that as the signal speed increases, the resistance&#x2F;capacitance&#x2F;inductance of that loop the whole way back to the power supply gets bigger and bigger and starts slowing everything down.<p>You use your bypass capacitor so that the loop looks like chip A bypass (positive)-&gt;chip A power-&gt;chip A out-&gt;chip B in-&gt;chip B gnd-&gt;chip A bypass (negative).  That loop is a <i>LOT</i> smaller than going the whole way back to the power supply.  Which means that you want your capacitor to look a whole lot like a short circuit at the frequencies of interest, which 0.1uF(100nF) <i>does</i>.<p>In fact, given how much faster signals are nowadays, you probably want to use 10nF bypass caps, but that&#x27;s an argument for another day.<p>As for RF bypassing, you almost always have to go to small value 0402 and 0201 in values like 100pF or lower, anyway.  So, this discussion is mostly moot for RF.<p>Yes, if I have to use a ceramic 1uF capacitor for some other reason already, I won&#x27;t sweat the idea of it serving as a bypass capacitor.  But I&#x27;m certainly not going to upvalue all my nice, cheap 100nF bypasses.</div><br/><div id="42875220" class="c"><input type="checkbox" id="c-42875220" checked=""/><div class="controls bullet"><span class="by">murderfs</span><span>|</span><a href="#42874951">parent</a><span>|</span><a href="#42875456">next</a><span>|</span><label class="collapse" for="c-42875220">[-]</label><label class="expand" for="c-42875220">[1 more]</label></div><br/><div class="children"><div class="content">&gt; That Samsung cap he quoted is about 1 or 2 cents in volume from Digikey or Mouser. That cheap Chinese quote means that they are probably substituting inferior parts.<p>No, they aren&#x27;t. LCSC is a very reputable distributor that has lower margins by having much cheaper labor and having absolutely insane economies of scale.</div><br/></div></div></div></div><div id="42875456" class="c"><input type="checkbox" id="c-42875456" checked=""/><div class="controls bullet"><span class="by">hulitu</span><span>|</span><a href="#42874951">prev</a><span>|</span><a href="#42837195">next</a><span>|</span><label class="collapse" for="c-42875456">[-]</label><label class="expand" for="c-42875456">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Proper decoupling capacitor practices, and why you should leave 100nF behind<p>Interesting article with lot of good points. However, without an EMC radiated emmissions test, the rant is useless. Especially when it resorts to &quot;monkeys&quot;.</div><br/></div></div><div id="42837195" class="c"><input type="checkbox" id="c-42837195" checked=""/><div class="controls bullet"><span class="by">LarsKrimi</span><span>|</span><a href="#42875456">prev</a><span>|</span><a href="#42874458">next</a><span>|</span><label class="collapse" for="c-42837195">[-]</label><label class="expand" for="c-42837195">[2 more]</label></div><br/><div class="children"><div class="content">Important subject, but impossible to read on a phone due to animated ads for every second paragraph</div><br/><div id="42874425" class="c"><input type="checkbox" id="c-42874425" checked=""/><div class="controls bullet"><span class="by">pwg</span><span>|</span><a href="#42837195">parent</a><span>|</span><a href="#42874458">next</a><span>|</span><label class="collapse" for="c-42874425">[-]</label><label class="expand" for="c-42874425">[1 more]</label></div><br/><div class="children"><div class="content">UblockOrigin, on a phone, blocking the javascript, resulted in reading the whole article with zero ads.</div><br/></div></div></div></div><div id="42874458" class="c"><input type="checkbox" id="c-42874458" checked=""/><div class="controls bullet"><span class="by">whiterook6</span><span>|</span><a href="#42837195">prev</a><span>|</span><label class="collapse" for="c-42874458">[-]</label><label class="expand" for="c-42874458">[1 more]</label></div><br/><div class="children"><div class="content">I read this in electroboom&#x27;s voice. Much more entertaining that way.</div><br/></div></div></div></div></div></div></div></body></html>