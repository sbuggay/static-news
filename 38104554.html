<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1698915667480" as="style"/><link rel="stylesheet" href="styles.css?v=1698915667480"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://developer.apple.com/forums/thread/738862">macOS Sonoma Broke Grep</a> <span class="domain">(<a href="https://developer.apple.com">developer.apple.com</a>)</span></div><div class="subtext"><span>cstrahan</span> | <span>90 comments</span></div><br/><div><div id="38108048" class="c"><input type="checkbox" id="c-38108048" checked=""/><div class="controls bullet"><span class="by">mjsweet</span><span>|</span><a href="#38109516">next</a><span>|</span><label class="collapse" for="c-38108048">[-]</label><label class="expand" for="c-38108048">[51 more]</label></div><br/><div class="children"><div class="content">My partner is an Astrophysicist who relies on Gnu Emacs as her daily driver. Her work involves managing a treasure trove of legacy code written in a variety of languages like Fortran, Matlab, IDL, and IRAF. This code is essential for her data reduction pipelines, supporting instruments across observatories such as Keck 1 &amp; 2, the AAT, Gemini, and more.<p>Each time she acquires a new Mac, she embarks on a week-long odyssey to set up her computing environment from scratch. It&#x27;s not because she enjoys it; rather, it&#x27;s a necessity because the built-in migration assistant just doesn&#x27;t cut it for her specialised needs.<p>While she currently wields the power of an M1 Max MacBook Pro and runs on the Monterey operating system, she tends to stick with the pre-installed OS for the lifespan of her hardware, which often spans several years. In her case, this could be another 2-3 years or even more before she retires the machine or hands it over to a postdoc or student.<p>But why does she avoid the annual OS upgrades? It&#x27;s simple. About a decade ago, every OS update would wreak havoc on her meticulously set-up environment. Paths would break, software would malfunction, and libraries that used to reside in one place mysteriously migrated to another. The headache and disruptions were just not worth it.<p>She decided to call it quits on annual OS upgrades roughly 7-8 years ago. While I&#x27;ve suggested Docker as a potential solution, it still requires her to take on the role of administrator and caretaker, which, in her busy world of astrophysical research, can be quite the distraction.</div><br/><div id="38110661" class="c"><input type="checkbox" id="c-38110661" checked=""/><div class="controls bullet"><span class="by">coldtea</span><span>|</span><a href="#38108048">parent</a><span>|</span><a href="#38108468">next</a><span>|</span><label class="collapse" for="c-38110661">[-]</label><label class="expand" for="c-38110661">[1 more]</label></div><br/><div class="children"><div class="content">&gt;<i>Each time she acquires a new Mac, she embarks on a week-long odyssey to set up her computing environment from scratch. It&#x27;s not because she enjoys it; rather, it&#x27;s a necessity because the built-in migration assistant just doesn&#x27;t cut it for her specialised needs.</i><p>She could use a bash or zsh script, with instructions to get the apps she wants. Brew allows installing most open source apps + MAS apps you&#x27;ve bought + third party proprietary apps. E.g.:<p><pre><code>  brew install --cask alfred
  brew install --cask google-chrome
</code></pre>
(She could save those in a brew dump file from the earlier machine too and re-play it).<p>then she could hookup up some external disk (or use some cloud storage) and sync any settings files she has customized (.zshrc, and so on) and rsync any stuff, build some folder structure she has, etc, and copy over settings for third party apps.<p>With &quot;defaults write&quot; commands she can then set a lof of Mac preferences that she&#x27;d normally have to change on the Settings page or individual Apple apps, e.g.:<p><pre><code>  defaults write com.apple.finder QuitMenuItem -bool true
</code></pre>
A new system would just need some small time to run the script to get to taste. I&#x27;ve been using that for years and it works great.</div><br/></div></div><div id="38108468" class="c"><input type="checkbox" id="c-38108468" checked=""/><div class="controls bullet"><span class="by">jonhohle</span><span>|</span><a href="#38108048">parent</a><span>|</span><a href="#38110661">prev</a><span>|</span><a href="#38110650">next</a><span>|</span><label class="collapse" for="c-38108468">[-]</label><label class="expand" for="c-38108468">[13 more]</label></div><br/><div class="children"><div class="content">You might suggest she write a MacPorts Portfile(s) (or the Homebrew equivalent) that describes the her setup. It is a distraction, but hopefully a one time distraction. It doesn’t have the overhead of running docker, gives her all the tools in well-known paths. IMHO (and as a fan), MacPorts has an advantage over HomeBrew by having all dependencies vendored so OS updates have less impact.<p>Edit to add, if you or her want help with this, I wouldn’t mind helping, reach out to my username at gmail.</div><br/><div id="38108769" class="c"><input type="checkbox" id="c-38108769" checked=""/><div class="controls bullet"><span class="by">koito17</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38108468">parent</a><span>|</span><a href="#38108868">next</a><span>|</span><label class="collapse" for="c-38108769">[-]</label><label class="expand" for="c-38108769">[3 more]</label></div><br/><div class="children"><div class="content">&gt; MacPorts has an advantage over HomeBrew by having all dependencies vendored so OS updates have less impact.<p>I use MacPorts, but be careful stating this. libc is unstable between major releases of Mac OS, and the recommendation from the MacPorts project itself is to reinstall *all* of your ports after an OS upgrade.[1] This is not a fun process if you don&#x27;t delay updating until the build bots for the latest OS go online. Also note it is literally impossible to statically link libc in Mac OS applications.[2]<p>Realistically speaking, I think Nix is likely to be a better alternative to both MacPorts and Homebrew for setting up dev environments, since you will have a declarative file format rather than ad-hoc Tcl (or Ruby) scripts running a function for fetch, verify, configure, build, destroot, etc. The only reason I personally don&#x27;t use Nix is because MacPorts has more or less just worked for me and I haven&#x27;t had the motivation to learn how Nix really works.<p>[1] <a href="https:&#x2F;&#x2F;trac.macports.org&#x2F;wiki&#x2F;Migration" rel="nofollow noreferrer">https:&#x2F;&#x2F;trac.macports.org&#x2F;wiki&#x2F;Migration</a><p>[2] <a href="https:&#x2F;&#x2F;developer.apple.com&#x2F;library&#x2F;archive&#x2F;qa&#x2F;qa1118&#x2F;_index.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;developer.apple.com&#x2F;library&#x2F;archive&#x2F;qa&#x2F;qa1118&#x2F;_index...</a></div><br/><div id="38109288" class="c"><input type="checkbox" id="c-38109288" checked=""/><div class="controls bullet"><span class="by">spease</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38108769">parent</a><span>|</span><a href="#38110437">next</a><span>|</span><label class="collapse" for="c-38109288">[-]</label><label class="expand" for="c-38109288">[1 more]</label></div><br/><div class="children"><div class="content">Nix is great in theory, but the user experience is unacceptably bad, especially for anyone who isn’t a software engineer.<p>While it does do an excellent job of reproducibility if the inputs are the same, I’ve found it to be prone to be breaking if you switch to newer versions.<p>Part of the reason that it’s painful to use is because while it’s marketed as “declarative”, in actuality it’s functional, which results in a lot of convoluted syntax to modify parameters for a package, which varies based on the language of the package.<p>There seems to be some awareness of the usability issues, but the changes have seemed both a step forward and backwards. For instance, you used to be able to use the “nix search” command to look up package names; now it’s gated behind some arcane syntax because it’s “experimental” and something to do with flakes. And flakes seems like it has the consequence of fragmenting the package repositories and making it impractical to improve the language.<p>I still have helper functions to wrap desktop applications that I had to set aside, because some upstream changes broke it and neither I nor anyone on the nix forums could figure out if there was even a way to include them in the “darwin” namespace with an overlay. My goal was to make it as easy as homebrew to add an app to nix’s repository.<p>Another evening I sat down to make a minor feature to a Python library and decided to use a nix environment. In theory, this should have been better than a virtualenv. In practice, there’s no in-tree support for specifying specific versions of Python libraries, and mach-nix had trouble with the dependencies, so I wound up just filing a bug report and gave up on the feature I was trying to implement.<p>On the plus side, NixOS finally has a graphic installer, but I don’t think that helps macOS.<p>I’m still hopeful that the community will decide to prioritize usability, but after spending an aggregate of months of time trying to get things to work and continually running into time-consuming roadblocks, it’s not something I would recommend lightly to someone who wants to be more productive.</div><br/></div></div><div id="38110437" class="c"><input type="checkbox" id="c-38110437" checked=""/><div class="controls bullet"><span class="by">orra</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38108769">parent</a><span>|</span><a href="#38109288">prev</a><span>|</span><a href="#38108868">next</a><span>|</span><label class="collapse" for="c-38110437">[-]</label><label class="expand" for="c-38110437">[1 more]</label></div><br/><div class="children"><div class="content">&gt; libc is unstable between major releases of Mac OS<p>Really? I thought Golang on macOS switched from direct syscalls to linking against libc, because the former is unstable but the latter is stable.</div><br/></div></div></div></div><div id="38108868" class="c"><input type="checkbox" id="c-38108868" checked=""/><div class="controls bullet"><span class="by">nsagent</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38108468">parent</a><span>|</span><a href="#38108769">prev</a><span>|</span><a href="#38108583">next</a><span>|</span><label class="collapse" for="c-38108868">[-]</label><label class="expand" for="c-38108868">[1 more]</label></div><br/><div class="children"><div class="content">Agreed. I switched from Homebrew to MacPorts a few years ago and couldn&#x27;t be happier. I just delay upgrading macOS until MacPorts officially supports the latest OS (which often takes a bit longer than Homebrew).<p>NOTE: I briefly tried Gentoo Prefix, so I could use the same setup for both Linux and macOS, but that required quite a bit more time investment than I&#x27;m willing to deal with. I spent even less time trying out Nix, but the learning curve was steeper than I had the time for, so I gave up on it pretty quickly.</div><br/></div></div><div id="38108583" class="c"><input type="checkbox" id="c-38108583" checked=""/><div class="controls bullet"><span class="by">Implicated</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38108468">parent</a><span>|</span><a href="#38108868">prev</a><span>|</span><a href="#38108815">next</a><span>|</span><label class="collapse" for="c-38108583">[-]</label><label class="expand" for="c-38108583">[1 more]</label></div><br/><div class="children"><div class="content">Cheers to this guy.</div><br/></div></div><div id="38108815" class="c"><input type="checkbox" id="c-38108815" checked=""/><div class="controls bullet"><span class="by">jiveturkey</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38108468">parent</a><span>|</span><a href="#38108583">prev</a><span>|</span><a href="#38110650">next</a><span>|</span><label class="collapse" for="c-38108815">[-]</label><label class="expand" for="c-38108815">[7 more]</label></div><br/><div class="children"><div class="content">&gt; dependencies vendored<p>did you mean versioned? if you really meant vendored, could you elaborate?<p>I don&#x27;t know about brew, but MacPorts wasn&#x27;t ready when Sonoma came out. So that&#x27;s a bit of a bummer for early adopter types, or folks that need to develop their own app against beta macOS and depend on ports for their setup.</div><br/><div id="38110680" class="c"><input type="checkbox" id="c-38110680" checked=""/><div class="controls bullet"><span class="by">coldtea</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38108815">parent</a><span>|</span><a href="#38109115">next</a><span>|</span><label class="collapse" for="c-38110680">[-]</label><label class="expand" for="c-38110680">[1 more]</label></div><br/><div class="children"><div class="content">vendored just means copying the upstream code dependencies into your project.<p>Golang, where it is (or used to be) a common practice, even has special tooling for this, and dedicates the &quot;vendor&quot; directory to that.</div><br/></div></div><div id="38109115" class="c"><input type="checkbox" id="c-38109115" checked=""/><div class="controls bullet"><span class="by">ramzyo</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38108815">parent</a><span>|</span><a href="#38110680">prev</a><span>|</span><a href="#38108909">next</a><span>|</span><label class="collapse" for="c-38109115">[-]</label><label class="expand" for="c-38109115">[1 more]</label></div><br/><div class="children"><div class="content">Vendoring means to bundle dependencies into a project directly (often this means copying source code and using&#x2F;maintaining the copy) rather than from some other source (other packages, OS, package repo, etc). Here&#x27;s an article from LWN that talks about it with a real world example: <a href="https:&#x2F;&#x2F;lwn.net&#x2F;Articles&#x2F;842319&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;lwn.net&#x2F;Articles&#x2F;842319&#x2F;</a></div><br/></div></div><div id="38108909" class="c"><input type="checkbox" id="c-38108909" checked=""/><div class="controls bullet"><span class="by">nsagent</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38108815">parent</a><span>|</span><a href="#38109115">prev</a><span>|</span><a href="#38110650">next</a><span>|</span><label class="collapse" for="c-38108909">[-]</label><label class="expand" for="c-38108909">[4 more]</label></div><br/><div class="children"><div class="content">Early adopters can upgrade MacPorts before it officially supports the latest OS by building from source if they have the patience and are willing to debug any broken ports.</div><br/><div id="38109148" class="c"><input type="checkbox" id="c-38109148" checked=""/><div class="controls bullet"><span class="by">dylan604</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38108909">parent</a><span>|</span><a href="#38110650">next</a><span>|</span><label class="collapse" for="c-38109148">[-]</label><label class="expand" for="c-38109148">[3 more]</label></div><br/><div class="children"><div class="content">Isn&#x27;t that the point of using a package manager to avoid the compiling from source and manually handling the dependency tree? Seems the better advice would be to wait for MacPorts is ready before upgrading if the software from it is that critical</div><br/><div id="38110685" class="c"><input type="checkbox" id="c-38110685" checked=""/><div class="controls bullet"><span class="by">coldtea</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38109148">parent</a><span>|</span><a href="#38109918">next</a><span>|</span><label class="collapse" for="c-38110685">[-]</label><label class="expand" for="c-38110685">[1 more]</label></div><br/><div class="children"><div class="content">&gt;<i>Isn&#x27;t that the point of using a package manager to avoid the compiling from source and manually handling the dependency tree?</i><p>The point of using a package manager is to avoid &quot;manually handling the dependency tree&quot;. Whether you build from source or not is orthogonal.</div><br/></div></div><div id="38109918" class="c"><input type="checkbox" id="c-38109918" checked=""/><div class="controls bullet"><span class="by">jen20</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38109148">parent</a><span>|</span><a href="#38110685">prev</a><span>|</span><a href="#38110650">next</a><span>|</span><label class="collapse" for="c-38109918">[-]</label><label class="expand" for="c-38109918">[1 more]</label></div><br/><div class="children"><div class="content">No? Ports (and thus MacPorts) is source based. For FreeBSD, pkg provides binaries for ports, but is separate.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="38110650" class="c"><input type="checkbox" id="c-38110650" checked=""/><div class="controls bullet"><span class="by">mythhabit</span><span>|</span><a href="#38108048">parent</a><span>|</span><a href="#38108468">prev</a><span>|</span><a href="#38109883">next</a><span>|</span><label class="collapse" for="c-38110650">[-]</label><label class="expand" for="c-38110650">[1 more]</label></div><br/><div class="children"><div class="content">It sounds like her use case is a good candidate for containerising the data reduction pipelines. If she can get the cruft to run in a container (or a few perhaps), she has instant access to get them running on a new computer as long as Emacs is &quot;just&quot; the frontend.</div><br/></div></div><div id="38109883" class="c"><input type="checkbox" id="c-38109883" checked=""/><div class="controls bullet"><span class="by">zxexz</span><span>|</span><a href="#38108048">parent</a><span>|</span><a href="#38110650">prev</a><span>|</span><a href="#38108935">next</a><span>|</span><label class="collapse" for="c-38109883">[-]</label><label class="expand" for="c-38109883">[2 more]</label></div><br/><div class="children"><div class="content">Some unsolicited, anecdotal advice I hope will be appreciated -<p>After several years of perennial macOS environment hell (part of which was spent working in a much more research-oriented environment - e.g. lots of ancient HPC packages, etc.), I made the jump to just using Nix on macOS [0]. Takes a little bit of learning (realistically just a couple hours to get productive IME - just enough to get acquainted with nix-shell [1] and build some configs). After a few months, I had the thought to look at what I still used brew for and realized I could just move to Nix completely - and remove Brew. I back up all my nix configs to a git repo, just in case - and whenever I switch to a new machine, or &quot;brick&quot; my current one - I just reinstall nix, pull in my configs, and I&#x27;m good to go - takes 5 minutes (a conservative estimate tbh). The only caveat is to just check the community [2] before upgrading to the next macOS version to make sure any issues have been ironed out. In the early days of macOS support, it was a bit finnicky between updates - I haven&#x27;t had any issues for the last couple years that weren&#x27;t my fault (for example, booting into recovery mode and accidentally deleting the nix store APFS volume - even then, all I had to do was reinstall nix and pull my configs).<p>It is so nice to just &quot;declare&quot; I want to use and just...use it. Want to try out ripgrep for something?
`nix-shell -p ripgrep`
Not what you want? just exit the shell. Too much unused crap taking up space in your Nix store? `nix-collect-garbage`.<p>There&#x27;s even darwin-nix [3] as a sort-of &quot;nixos-for-macos&quot; - I started using it recently, mostly for managing macOS settings declaratively, and it&#x27;s great - but honestly 99% of the usefulness I get on macOS from Nix is just using the package manager!<p>[0] <a href="https:&#x2F;&#x2F;nixos.org&#x2F;download#nix-install-macos" rel="nofollow noreferrer">https:&#x2F;&#x2F;nixos.org&#x2F;download#nix-install-macos</a>
[1] <a href="https:&#x2F;&#x2F;nix.dev&#x2F;tutorials&#x2F;first-steps&#x2F;declarative-shell" rel="nofollow noreferrer">https:&#x2F;&#x2F;nix.dev&#x2F;tutorials&#x2F;first-steps&#x2F;declarative-shell</a>
[2] <a href="https:&#x2F;&#x2F;nixos.org&#x2F;community&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;nixos.org&#x2F;community&#x2F;</a>
[3] <a href="https:&#x2F;&#x2F;github.com&#x2F;LnL7&#x2F;nix-darwin">https:&#x2F;&#x2F;github.com&#x2F;LnL7&#x2F;nix-darwin</a></div><br/><div id="38110139" class="c"><input type="checkbox" id="c-38110139" checked=""/><div class="controls bullet"><span class="by">licebmi__at__</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38109883">parent</a><span>|</span><a href="#38108935">next</a><span>|</span><label class="collapse" for="c-38110139">[-]</label><label class="expand" for="c-38110139">[1 more]</label></div><br/><div class="children"><div class="content">I have the same exact recommendation. My work laptop was stolen and setting back everything was a matter of 10 mins. I have a custom emacs configuration, templated with nix, that only calls stuff from nix store, that I’m pretty much confident that I nothing will break as long as nix works.<p>Btw, I still use hombrew for some stuff I’m too lazy to create derivations, but I use nix-darwin homebrew module to also manage it with nix. The shitty part is that I must install homebrew. I think that can also be automated with a simple activation script, but I’m too lazy and it’s not something I do more than once on the machine.</div><br/></div></div></div></div><div id="38108935" class="c"><input type="checkbox" id="c-38108935" checked=""/><div class="controls bullet"><span class="by">dlyons</span><span>|</span><a href="#38108048">parent</a><span>|</span><a href="#38109883">prev</a><span>|</span><a href="#38109554">next</a><span>|</span><label class="collapse" for="c-38108935">[-]</label><label class="expand" for="c-38108935">[4 more]</label></div><br/><div class="children"><div class="content">Hey, I have a pretty extensive Emacs configuration [1] on my Macbook using Nix, nix-darwin, and the Nix community Emacs overlay. It&#x27;s been stable across multiple OS updates, and if minor stuff breaks 99% of the time an issue is already open as it&#x27;s broken for everyone. Really, Nix is pretty awesome for the dev environment use case; bore yourself through the syntax and be rewarded with an easily reproducible system.<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;dustinlyons&#x2F;nixos-config">https:&#x2F;&#x2F;github.com&#x2F;dustinlyons&#x2F;nixos-config</a></div><br/><div id="38109178" class="c"><input type="checkbox" id="c-38109178" checked=""/><div class="controls bullet"><span class="by">jamesgeck0</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38108935">parent</a><span>|</span><a href="#38109141">next</a><span>|</span><label class="collapse" for="c-38109178">[-]</label><label class="expand" for="c-38109178">[1 more]</label></div><br/><div class="children"><div class="content">There are a few cases where Nix itself can break on macOS upgrades, but the recently released Survival Mode installer should mitigate that.<p><a href="https:&#x2F;&#x2F;determinate.systems&#x2F;posts&#x2F;nix-survival-mode-on-macos" rel="nofollow noreferrer">https:&#x2F;&#x2F;determinate.systems&#x2F;posts&#x2F;nix-survival-mode-on-macos</a></div><br/></div></div><div id="38109141" class="c"><input type="checkbox" id="c-38109141" checked=""/><div class="controls bullet"><span class="by">viraptor</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38108935">parent</a><span>|</span><a href="#38109178">prev</a><span>|</span><a href="#38109231">next</a><span>|</span><label class="collapse" for="c-38109141">[-]</label><label class="expand" for="c-38109141">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, this is basically the perfect use case for nixpkgs. You can make sure the same versions are built every time and get configured exactly the same. Then home-manager can deal with the extra config files. No reliance on the system tools anymore beyond the core libraries and you&#x27;re not bound by the brew update cadence either.</div><br/></div></div><div id="38109231" class="c"><input type="checkbox" id="c-38109231" checked=""/><div class="controls bullet"><span class="by">nextos</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38108935">parent</a><span>|</span><a href="#38109141">prev</a><span>|</span><a href="#38109554">next</a><span>|</span><label class="collapse" for="c-38109231">[-]</label><label class="expand" for="c-38109231">[1 more]</label></div><br/><div class="children"><div class="content">Came here to say the same thing. Nix can even configure Emacs with all packages, so that everything is static, deterministic, and reproducible. I am actually looking forward to the possibility of running NixOS on MacBooks.</div><br/></div></div></div></div><div id="38109554" class="c"><input type="checkbox" id="c-38109554" checked=""/><div class="controls bullet"><span class="by">steve1977</span><span>|</span><a href="#38108048">parent</a><span>|</span><a href="#38108935">prev</a><span>|</span><a href="#38110571">next</a><span>|</span><label class="collapse" for="c-38109554">[-]</label><label class="expand" for="c-38109554">[1 more]</label></div><br/><div class="children"><div class="content">Maybe macOS is not the optimal platform for this kind of work (anymore).<p>I’ve relegated my Mac usage to simple web browsing and stuff like that.</div><br/></div></div><div id="38110571" class="c"><input type="checkbox" id="c-38110571" checked=""/><div class="controls bullet"><span class="by">buro9</span><span>|</span><a href="#38108048">parent</a><span>|</span><a href="#38109554">prev</a><span>|</span><a href="#38108775">next</a><span>|</span><label class="collapse" for="c-38110571">[-]</label><label class="expand" for="c-38110571">[2 more]</label></div><br/><div class="children"><div class="content">this is the advice I&#x27;ve been hearing more often than not. I&#x27;ve been Linux and Windows for most of my career, and only strayed into Mac a few times in the last 5 years. Without fail, _every_ Mac I&#x27;ve owned has needed support involvement on an OS upgrade.<p>when I&#x27;ve told people that, what I hear is &quot;you&#x27;re not supposed to update the OS on a Mac, stick with the one it shipped with and never make the major OS update as those are for newer hardware&quot;.<p>to me that seems illogical, wrong, worse than Windows... and yet as an observer to comments like the parent and seeing colleagues get bitten by issues, it appears to be true... the happy path with Mac OS is to never upgrade the major version</div><br/><div id="38110665" class="c"><input type="checkbox" id="c-38110665" checked=""/><div class="controls bullet"><span class="by">steve1977</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38110571">parent</a><span>|</span><a href="#38108775">next</a><span>|</span><label class="collapse" for="c-38110665">[-]</label><label class="expand" for="c-38110665">[1 more]</label></div><br/><div class="children"><div class="content">The happy path with macOS is to only use hardware and apps made by Apple, I think that’s the problem.<p>If you stick to that, upgrades are usually pretty safe.</div><br/></div></div></div></div><div id="38108775" class="c"><input type="checkbox" id="c-38108775" checked=""/><div class="controls bullet"><span class="by">tiltowait</span><span>|</span><a href="#38108048">parent</a><span>|</span><a href="#38110571">prev</a><span>|</span><a href="#38108409">next</a><span>|</span><label class="collapse" for="c-38108775">[-]</label><label class="expand" for="c-38108775">[1 more]</label></div><br/><div class="children"><div class="content">I’ve found the Migration Assistant to be solid—almost fanatical—for persisting custom settings. Most recently, it carried over my non-standard OpenSSH + config with resident key support, GPG config, and a couple of other things without a hitch. I even found a few config files from 2007 and a same-era Safari SIMBL extension that probably stopped working in Snow Leopard, all faithfully migrated across five different machines and a dozen operating systems.<p>I’m curious what doesn’t work for her.</div><br/></div></div><div id="38108409" class="c"><input type="checkbox" id="c-38108409" checked=""/><div class="controls bullet"><span class="by">renegade-otter</span><span>|</span><a href="#38108048">parent</a><span>|</span><a href="#38108775">prev</a><span>|</span><a href="#38109246">next</a><span>|</span><label class="collapse" for="c-38108409">[-]</label><label class="expand" for="c-38108409">[4 more]</label></div><br/><div class="children"><div class="content">Wouldn&#x27;t it be simpler to just have a &#x27;Nix running in a VMWare Fusion? Why go through this pain?<p>I am on a Mac, but my work is done on a Mint.</div><br/><div id="38108602" class="c"><input type="checkbox" id="c-38108602" checked=""/><div class="controls bullet"><span class="by">hobotime</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38108409">parent</a><span>|</span><a href="#38108594">next</a><span>|</span><label class="collapse" for="c-38108602">[-]</label><label class="expand" for="c-38108602">[1 more]</label></div><br/><div class="children"><div class="content">Native on apple silicon can be magical. I remember Jupyter being awesome once I found the goat to sacrifice to get it to install a few years back.</div><br/></div></div><div id="38108594" class="c"><input type="checkbox" id="c-38108594" checked=""/><div class="controls bullet"><span class="by">pyridines</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38108409">parent</a><span>|</span><a href="#38108602">prev</a><span>|</span><a href="#38109282">next</a><span>|</span><label class="collapse" for="c-38108594">[-]</label><label class="expand" for="c-38108594">[1 more]</label></div><br/><div class="children"><div class="content">If it&#x27;s already a massive house of cards, setting that all up all over again might be a nightmare.</div><br/></div></div><div id="38109282" class="c"><input type="checkbox" id="c-38109282" checked=""/><div class="controls bullet"><span class="by">jbverschoor</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38108409">parent</a><span>|</span><a href="#38108594">prev</a><span>|</span><a href="#38109246">next</a><span>|</span><label class="collapse" for="c-38109282">[-]</label><label class="expand" for="c-38109282">[1 more]</label></div><br/><div class="children"><div class="content">Just run orbstack. Gives you nix or Debian. Or use a persistent docker.</div><br/></div></div></div></div><div id="38109246" class="c"><input type="checkbox" id="c-38109246" checked=""/><div class="controls bullet"><span class="by">mise_en_place</span><span>|</span><a href="#38108048">parent</a><span>|</span><a href="#38108409">prev</a><span>|</span><a href="#38110035">next</a><span>|</span><label class="collapse" for="c-38109246">[-]</label><label class="expand" for="c-38109246">[1 more]</label></div><br/><div class="children"><div class="content">The state of laptop and desktop computing is abysmal. I use Ubuntu as a daily driver for desktop and macOS for my laptop, but all three major OSes, including Windows, have many issues.<p>Gnome is relatively stable but not foolproof, there are strange behaviors like file picker previews not working. There are services running in the background that do who knows what. I have built a custom distribution using build root, I will be attempting to use that as my daily driver.</div><br/></div></div><div id="38110035" class="c"><input type="checkbox" id="c-38110035" checked=""/><div class="controls bullet"><span class="by">barkingcat</span><span>|</span><a href="#38108048">parent</a><span>|</span><a href="#38109246">prev</a><span>|</span><a href="#38109635">next</a><span>|</span><label class="collapse" for="c-38110035">[-]</label><label class="expand" for="c-38110035">[2 more]</label></div><br/><div class="children"><div class="content">Part of your story involves the point os update release where apple just straight up removed system python.<p>that would have been a nightmare</div><br/><div id="38110261" class="c"><input type="checkbox" id="c-38110261" checked=""/><div class="controls bullet"><span class="by">pasc1878</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38110035">parent</a><span>|</span><a href="#38109635">next</a><span>|</span><label class="collapse" for="c-38110261">[-]</label><label class="expand" for="c-38110261">[1 more]</label></div><br/><div class="children"><div class="content">Not really - if you were using python heavily you would not be using Apple python but installed from python.org or Anaconda or a package manager to control what version is in use<p>Also Apple did give an OS release or two warning I think.</div><br/></div></div></div></div><div id="38109635" class="c"><input type="checkbox" id="c-38109635" checked=""/><div class="controls bullet"><span class="by">lnxg33k1</span><span>|</span><a href="#38108048">parent</a><span>|</span><a href="#38110035">prev</a><span>|</span><a href="#38110457">next</a><span>|</span><label class="collapse" for="c-38109635">[-]</label><label class="expand" for="c-38109635">[6 more]</label></div><br/><div class="children"><div class="content">I am not sure how to handle this post, I guess that&#x27;s the same for RHEL or LTSes, if you upgrade major OSes you might break things, stay on current versions in order to stay safe, should we freeze  software because astrophysicists are too busy?</div><br/><div id="38110681" class="c"><input type="checkbox" id="c-38110681" checked=""/><div class="controls bullet"><span class="by">steve1977</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38109635">parent</a><span>|</span><a href="#38109706">next</a><span>|</span><label class="collapse" for="c-38110681">[-]</label><label class="expand" for="c-38110681">[1 more]</label></div><br/><div class="children"><div class="content">With the difference that major LTS upgrades happen much less frequently than major macOS upgrades.</div><br/></div></div><div id="38109706" class="c"><input type="checkbox" id="c-38109706" checked=""/><div class="controls bullet"><span class="by">nine_k</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38109635">parent</a><span>|</span><a href="#38110681">prev</a><span>|</span><a href="#38109947">next</a><span>|</span><label class="collapse" for="c-38109706">[-]</label><label class="expand" for="c-38109706">[2 more]</label></div><br/><div class="children"><div class="content">A rolling Linux distro would introduce minor, easy-to-address changes every now and then. This may be less pain overall (much like making many small pull requests vs one giant rewrite).<p>Disclaimer: I&#x27;m running a rolling-release distro (Void) since 2016, and has gone through 5 machines with it, usually with near-zero setup after a move.</div><br/><div id="38109719" class="c"><input type="checkbox" id="c-38109719" checked=""/><div class="controls bullet"><span class="by">lnxg33k1</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38109706">parent</a><span>|</span><a href="#38109947">next</a><span>|</span><label class="collapse" for="c-38109719">[-]</label><label class="expand" for="c-38109719">[1 more]</label></div><br/><div class="children"><div class="content">I also am on linux rolling, I use gentoo on desktop and arch on laptop, I update, things break, it&#x27;s my fault, but would use the same approach for major non-rolling OSes updates, the point was not the amount of breakage, it&#x27;s the breakage principle in itself, I am not sure why OP was blaming maintainer for breakage of major OS updates?</div><br/></div></div></div></div><div id="38109947" class="c"><input type="checkbox" id="c-38109947" checked=""/><div class="controls bullet"><span class="by">dclowd9901</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38109635">parent</a><span>|</span><a href="#38109706">prev</a><span>|</span><a href="#38110457">next</a><span>|</span><label class="collapse" for="c-38109947">[-]</label><label class="expand" for="c-38109947">[2 more]</label></div><br/><div class="children"><div class="content">I don’t understand why they can’t suitably migrate things so they don’t break. They have kernel access to the system. It should be trivial to move whatever around that needs to be moved to carry on functionality.<p>I suspect it’s because they actually don’t know _what_ will break with what they change.</div><br/><div id="38109981" class="c"><input type="checkbox" id="c-38109981" checked=""/><div class="controls bullet"><span class="by">lnxg33k1</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38109947">parent</a><span>|</span><a href="#38110457">next</a><span>|</span><label class="collapse" for="c-38109981">[-]</label><label class="expand" for="c-38109981">[1 more]</label></div><br/><div class="children"><div class="content">I think either of us misunderstood, I understood that the wife wanted the update to don’t trigger any changes to their existing tools, you said that it should be trivial to move stuff around, implying that some change would be needed, that is according to what i got, the point OP was complaining about? I agree with you anyway, at least mostly, should be trivial or not, I wonder how many people have a look at changelogs before updating and then go to blogs to complain, I dont use osx as a linux user, when i see something of interest in update packages i go to check the changelogs to make sure its smooth and almost never anything happen, so I don’t have much to complain</div><br/></div></div></div></div></div></div><div id="38110457" class="c"><input type="checkbox" id="c-38110457" checked=""/><div class="controls bullet"><span class="by">prmoustache</span><span>|</span><a href="#38108048">parent</a><span>|</span><a href="#38109635">prev</a><span>|</span><a href="#38108202">next</a><span>|</span><label class="collapse" for="c-38110457">[-]</label><label class="expand" for="c-38110457">[1 more]</label></div><br/><div class="children"><div class="content">She looks to be the perfect candidate for RedHat Enterprise Linux instead.</div><br/></div></div><div id="38108202" class="c"><input type="checkbox" id="c-38108202" checked=""/><div class="controls bullet"><span class="by">bloopernova</span><span>|</span><a href="#38108048">parent</a><span>|</span><a href="#38110457">prev</a><span>|</span><a href="#38110211">next</a><span>|</span><label class="collapse" for="c-38108202">[-]</label><label class="expand" for="c-38108202">[4 more]</label></div><br/><div class="children"><div class="content">It might not be up to her requirements, but an Ansible playbook may help. It&#x27;s what we use to set up new MacBooks and only runs in localhost mode.<p>Ansible is fairly quick to learn, and can control homebrew so it&#x27;s able to install a <i>lot</i> of stuff.<p>If you&#x27;re interested, ping me and I can share some snippets. Also I bet you&#x27;ll get a reply from someone evangelizing Nix ;)<p>EDIT: Oh, and git repo with dot files is very useful. As is homebrew bundle, which installs a list generated from a different host.<p>EDIT 2: oh also I just moved MacBooks last week, so a lot of this fresh in my head right now. Including cargo&#x2F;rust, VSCode profiles, brew bundle, ublock origin config, backups of .envrc files, etc etc ad infinitum. My Emacs config was actually about the easiest bit to move!</div><br/><div id="38108293" class="c"><input type="checkbox" id="c-38108293" checked=""/><div class="controls bullet"><span class="by">MichaelZuo</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38108202">parent</a><span>|</span><a href="#38110211">next</a><span>|</span><label class="collapse" for="c-38108293">[-]</label><label class="expand" for="c-38108293">[3 more]</label></div><br/><div class="children"><div class="content">This sounds like a lot more work then a few extra button clicks?</div><br/><div id="38108449" class="c"><input type="checkbox" id="c-38108449" checked=""/><div class="controls bullet"><span class="by">dumpsterdiver</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38108293">parent</a><span>|</span><a href="#38108543">next</a><span>|</span><label class="collapse" for="c-38108449">[-]</label><label class="expand" for="c-38108449">[1 more]</label></div><br/><div class="children"><div class="content">Indeed, but when the alternative is missing critical security updates for years at a time one only needs to be bitten once to understand the value.</div><br/></div></div><div id="38108543" class="c"><input type="checkbox" id="c-38108543" checked=""/><div class="controls bullet"><span class="by">bloopernova</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38108293">parent</a><span>|</span><a href="#38108449">prev</a><span>|</span><a href="#38110211">next</a><span>|</span><label class="collapse" for="c-38108543">[-]</label><label class="expand" for="c-38108543">[1 more]</label></div><br/><div class="children"><div class="content">Less work than a week of manually doing it.</div><br/></div></div></div></div></div></div><div id="38110211" class="c"><input type="checkbox" id="c-38110211" checked=""/><div class="controls bullet"><span class="by">nicbou</span><span>|</span><a href="#38108048">parent</a><span>|</span><a href="#38108202">prev</a><span>|</span><a href="#38109184">next</a><span>|</span><label class="collapse" for="c-38110211">[-]</label><label class="expand" for="c-38110211">[1 more]</label></div><br/><div class="children"><div class="content">I have a Settings folder for this. It includes a Brewfile and a lot of other configs. It cut down that setup time to under a day</div><br/></div></div><div id="38109184" class="c"><input type="checkbox" id="c-38109184" checked=""/><div class="controls bullet"><span class="by">JCharante</span><span>|</span><a href="#38108048">parent</a><span>|</span><a href="#38110211">prev</a><span>|</span><a href="#38109236">next</a><span>|</span><label class="collapse" for="c-38109184">[-]</label><label class="expand" for="c-38109184">[2 more]</label></div><br/><div class="children"><div class="content">Ideally she would have the dependencies written down. How else are people supposed to replicate her work?</div><br/><div id="38109207" class="c"><input type="checkbox" id="c-38109207" checked=""/><div class="controls bullet"><span class="by">adastra22</span><span>|</span><a href="#38108048">root</a><span>|</span><a href="#38109184">parent</a><span>|</span><a href="#38109236">next</a><span>|</span><label class="collapse" for="c-38109207">[-]</label><label class="expand" for="c-38109207">[1 more]</label></div><br/><div class="children"><div class="content">Nobody replicates work in these fields in that way.<p>Most of the time people just don’t replicate work, full stop. In the rare instances that they do, replicating the analysis from scratch is the whole point. Running the same script and getting the same result is not interesting.</div><br/></div></div></div></div><div id="38109236" class="c"><input type="checkbox" id="c-38109236" checked=""/><div class="controls bullet"><span class="by">m463</span><span>|</span><a href="#38108048">parent</a><span>|</span><a href="#38109184">prev</a><span>|</span><a href="#38108799">next</a><span>|</span><label class="collapse" for="c-38109236">[-]</label><label class="expand" for="c-38109236">[1 more]</label></div><br/><div class="children"><div class="content">I have slowly moved to macos as my &quot;front end&quot; to all the other machines.</div><br/></div></div><div id="38108799" class="c"><input type="checkbox" id="c-38108799" checked=""/><div class="controls bullet"><span class="by">balves</span><span>|</span><a href="#38108048">parent</a><span>|</span><a href="#38109236">prev</a><span>|</span><a href="#38108903">next</a><span>|</span><label class="collapse" for="c-38108799">[-]</label><label class="expand" for="c-38108799">[1 more]</label></div><br/><div class="children"><div class="content">Nix-darwin seems like a solution worth looking into for this.</div><br/></div></div><div id="38109678" class="c"><input type="checkbox" id="c-38109678" checked=""/><div class="controls bullet"><span class="by">flemhans</span><span>|</span><a href="#38108048">parent</a><span>|</span><a href="#38108903">prev</a><span>|</span><a href="#38109516">next</a><span>|</span><label class="collapse" for="c-38109678">[-]</label><label class="expand" for="c-38109678">[1 more]</label></div><br/><div class="children"><div class="content">I, too, decided to skip on macOS upgrades for the lifespan of the hardware. But I tend to buy a Mac every 2-3 years so it&#x27;s just a few skips.</div><br/></div></div></div></div><div id="38109516" class="c"><input type="checkbox" id="c-38109516" checked=""/><div class="controls bullet"><span class="by">lysium</span><span>|</span><a href="#38108048">prev</a><span>|</span><a href="#38107155">next</a><span>|</span><label class="collapse" for="c-38109516">[-]</label><label class="expand" for="c-38109516">[1 more]</label></div><br/><div class="children"><div class="content">In one of the comments:<p><pre><code>    that lower-cased LANG is invalid on macOS, so the system will silently default to LANG=C
</code></pre>
Oh my!</div><br/></div></div><div id="38107155" class="c"><input type="checkbox" id="c-38107155" checked=""/><div class="controls bullet"><span class="by">nunez</span><span>|</span><a href="#38109516">prev</a><span>|</span><a href="#38107123">next</a><span>|</span><label class="collapse" for="c-38107155">[-]</label><label class="expand" for="c-38107155">[18 more]</label></div><br/><div class="children"><div class="content">Switching to bsd grep is one of the first things I do on a new macOS install. The builtins are old as hell!</div><br/><div id="38107318" class="c"><input type="checkbox" id="c-38107318" checked=""/><div class="controls bullet"><span class="by">orf</span><span>|</span><a href="#38107155">parent</a><span>|</span><a href="#38107199">next</a><span>|</span><label class="collapse" for="c-38107318">[-]</label><label class="expand" for="c-38107318">[1 more]</label></div><br/><div class="children"><div class="content">Same, but BSD feel is also old as hell. Ripgrep all the way.</div><br/></div></div><div id="38107199" class="c"><input type="checkbox" id="c-38107199" checked=""/><div class="controls bullet"><span class="by">cpressland</span><span>|</span><a href="#38107155">parent</a><span>|</span><a href="#38107318">prev</a><span>|</span><a href="#38108772">next</a><span>|</span><label class="collapse" for="c-38107199">[-]</label><label class="expand" for="c-38107199">[12 more]</label></div><br/><div class="children"><div class="content">Any reason for picking the BSD variants of usedland tooling over the GNU ones?</div><br/><div id="38107517" class="c"><input type="checkbox" id="c-38107517" checked=""/><div class="controls bullet"><span class="by">torstenvl</span><span>|</span><a href="#38107155">root</a><span>|</span><a href="#38107199">parent</a><span>|</span><a href="#38108772">next</a><span>|</span><label class="collapse" for="c-38107517">[-]</label><label class="expand" for="c-38107517">[11 more]</label></div><br/><div class="children"><div class="content">Can&#x27;t speak for everyone, but for me... familiarity, hackability, simplicity, standards compliance.<p>GNU coreutils deviate from POSIX in a number of instances.<p>GNU coreutils are also verbose and potentially overengineered.  Compare GNU ls.c (4726 LOC) to FreeBSD ls.c (1030 LOC), for example.  Even if you include the other BSD source files used in ls, the FreeBSD version is still half the size of the GNU version. GNU grep is over 3000 LOC, whereas the FreeBSD version is 724.</div><br/><div id="38110716" class="c"><input type="checkbox" id="c-38110716" checked=""/><div class="controls bullet"><span class="by">vocworker</span><span>|</span><a href="#38107155">root</a><span>|</span><a href="#38107517">parent</a><span>|</span><a href="#38108956">next</a><span>|</span><label class="collapse" for="c-38110716">[-]</label><label class="expand" for="c-38110716">[1 more]</label></div><br/><div class="children"><div class="content">Isn&#x27;t bsd grep very slow? I remember reading &quot;why gnu grep is fast&quot;: <a href="https:&#x2F;&#x2F;lists.freebsd.org&#x2F;pipermail&#x2F;freebsd-current&#x2F;2010-August&#x2F;019310.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;lists.freebsd.org&#x2F;pipermail&#x2F;freebsd-current&#x2F;2010-Aug...</a></div><br/></div></div><div id="38108956" class="c"><input type="checkbox" id="c-38108956" checked=""/><div class="controls bullet"><span class="by">arp242</span><span>|</span><a href="#38107155">root</a><span>|</span><a href="#38107517">parent</a><span>|</span><a href="#38110716">prev</a><span>|</span><a href="#38108925">next</a><span>|</span><label class="collapse" for="c-38108956">[-]</label><label class="expand" for="c-38108956">[1 more]</label></div><br/><div class="children"><div class="content">&gt; GNU grep is over 3000 LOC, whereas the FreeBSD version is 724.<p>Where are you getting that number from? Because I have a bit over 1,500 lines in usr.bin&#x2F;grep (code only, excluding comments and blanks) vs. 3,900 for GNU grep.<p>Also you can&#x27;t compile bsdgrep with just POSIX libc (such as musl) since it relies on some extensions (specifically: REG_STARTEND). So if you&#x27;re looking for POSIX_ME_HARDER then bsdgrep isn&#x27;t actually the right place.</div><br/></div></div><div id="38108925" class="c"><input type="checkbox" id="c-38108925" checked=""/><div class="controls bullet"><span class="by">jppittma</span><span>|</span><a href="#38107155">root</a><span>|</span><a href="#38107517">parent</a><span>|</span><a href="#38108956">prev</a><span>|</span><a href="#38107639">next</a><span>|</span><label class="collapse" for="c-38108925">[-]</label><label class="expand" for="c-38108925">[2 more]</label></div><br/><div class="children"><div class="content">Who cares about posix? It&#x27;s not the 2000&#x27;s anymore. Solaris is dead. HP-UX is dead. Were you worried that someday you might have to port your shell script to AIX?<p>GNU and Linux won. The only BSD environment is macOS, and if you put GNU on macOS, then the only thing I can think of that&#x27;s worth a mention is alpine and busybox containers, but at that point it feels like we&#x27;re just grasping at straws.</div><br/><div id="38109067" class="c"><input type="checkbox" id="c-38109067" checked=""/><div class="controls bullet"><span class="by">torstenvl</span><span>|</span><a href="#38107155">root</a><span>|</span><a href="#38108925">parent</a><span>|</span><a href="#38107639">next</a><span>|</span><label class="collapse" for="c-38109067">[-]</label><label class="expand" for="c-38109067">[1 more]</label></div><br/><div class="children"><div class="content">&gt; <i>Who cares about posix? ...
GNU and Linux won.</i><p>Well, I do :) That&#x27;s why I said I was only speaking for myself.<p>As long as we have a rich variety of free and open source software to choose from, I think we&#x27;ve <i>all</i> won.</div><br/></div></div></div></div><div id="38107639" class="c"><input type="checkbox" id="c-38107639" checked=""/><div class="controls bullet"><span class="by">burntsushi</span><span>|</span><a href="#38107155">root</a><span>|</span><a href="#38107517">parent</a><span>|</span><a href="#38108925">prev</a><span>|</span><a href="#38110338">next</a><span>|</span><label class="collapse" for="c-38107639">[-]</label><label class="expand" for="c-38107639">[5 more]</label></div><br/><div class="children"><div class="content">What kinds of patches have you made to the BSD coreutils programs that you use?</div><br/><div id="38107669" class="c"><input type="checkbox" id="c-38107669" checked=""/><div class="controls bullet"><span class="by">torstenvl</span><span>|</span><a href="#38107155">root</a><span>|</span><a href="#38107639">parent</a><span>|</span><a href="#38110338">next</a><span>|</span><label class="collapse" for="c-38107669">[-]</label><label class="expand" for="c-38107669">[4 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;github.com&#x2F;torstenvl&#x2F;betterls">https:&#x2F;&#x2F;github.com&#x2F;torstenvl&#x2F;betterls</a><p>To be fair, one of these two flags comes built in with GNU ls, but using GNU ls comes with the downside of losing support for macOS extended attributes (and GNU ls doesn&#x27;t have --group-dots-extra-first).</div><br/><div id="38107718" class="c"><input type="checkbox" id="c-38107718" checked=""/><div class="controls bullet"><span class="by">Pet_Ant</span><span>|</span><a href="#38107155">root</a><span>|</span><a href="#38107669">parent</a><span>|</span><a href="#38110338">next</a><span>|</span><label class="collapse" for="c-38107718">[-]</label><label class="expand" for="c-38107718">[3 more]</label></div><br/><div class="children"><div class="content">I mean that seems like a simple patch to upstream if it’s a real deal breaker for you….</div><br/><div id="38108256" class="c"><input type="checkbox" id="c-38108256" checked=""/><div class="controls bullet"><span class="by">corbezzoli</span><span>|</span><a href="#38107155">root</a><span>|</span><a href="#38107718">parent</a><span>|</span><a href="#38107777">next</a><span>|</span><label class="collapse" for="c-38108256">[-]</label><label class="expand" for="c-38108256">[1 more]</label></div><br/><div class="children"><div class="content">You make it sound like just because you want and write something it will get merged into a project. It doesn’t work like that. Maintainers have a million reasons to say no and I have one reason to just use a different tool instead.</div><br/></div></div><div id="38107777" class="c"><input type="checkbox" id="c-38107777" checked=""/><div class="controls bullet"><span class="by">torstenvl</span><span>|</span><a href="#38107155">root</a><span>|</span><a href="#38107718">parent</a><span>|</span><a href="#38108256">prev</a><span>|</span><a href="#38110338">next</a><span>|</span><label class="collapse" for="c-38107777">[-]</label><label class="expand" for="c-38107777">[1 more]</label></div><br/><div class="children"><div class="content">Or I can just continue being happy hacking on simple code bases.<p>It is not my responsibility to upstream anything. If you feel like it should be upstreamed, my additions are open source. Go for it.</div><br/></div></div></div></div></div></div></div></div><div id="38110338" class="c"><input type="checkbox" id="c-38110338" checked=""/><div class="controls bullet"><span class="by">globular-toast</span><span>|</span><a href="#38107155">root</a><span>|</span><a href="#38107517">parent</a><span>|</span><a href="#38107639">prev</a><span>|</span><a href="#38108772">next</a><span>|</span><label class="collapse" for="c-38110338">[-]</label><label class="expand" for="c-38110338">[1 more]</label></div><br/><div class="children"><div class="content">Honestly picking programs based on lines of source code where fewer is better is quite silly. Better algorithms generally have more code, not less. Unless you&#x27;re doing embedded work it essentially doesn&#x27;t matter how &quot;big&quot; programs are.</div><br/></div></div></div></div></div></div><div id="38108772" class="c"><input type="checkbox" id="c-38108772" checked=""/><div class="controls bullet"><span class="by">arp242</span><span>|</span><a href="#38107155">parent</a><span>|</span><a href="#38107199">prev</a><span>|</span><a href="#38108416">next</a><span>|</span><label class="collapse" for="c-38108772">[-]</label><label class="expand" for="c-38108772">[1 more]</label></div><br/><div class="children"><div class="content">That article is about FreeBSD&#x27;s grep.</div><br/></div></div><div id="38108416" class="c"><input type="checkbox" id="c-38108416" checked=""/><div class="controls bullet"><span class="by">stefan_</span><span>|</span><a href="#38107155">parent</a><span>|</span><a href="#38108772">prev</a><span>|</span><a href="#38107123">next</a><span>|</span><label class="collapse" for="c-38108416">[-]</label><label class="expand" for="c-38108416">[3 more]</label></div><br/><div class="children"><div class="content">I can understand shipping the old stuff because you don&#x27;t give a fuck, but why on earth are they .. patching them. Jesus.</div><br/><div id="38108586" class="c"><input type="checkbox" id="c-38108586" checked=""/><div class="controls bullet"><span class="by">callalex</span><span>|</span><a href="#38107155">root</a><span>|</span><a href="#38108416">parent</a><span>|</span><a href="#38107123">next</a><span>|</span><label class="collapse" for="c-38108586">[-]</label><label class="expand" for="c-38108586">[2 more]</label></div><br/><div class="children"><div class="content">The explicit stated reason is to avoid copyleft.</div><br/><div id="38109931" class="c"><input type="checkbox" id="c-38109931" checked=""/><div class="controls bullet"><span class="by">epcoa</span><span>|</span><a href="#38107155">root</a><span>|</span><a href="#38108586">parent</a><span>|</span><a href="#38107123">next</a><span>|</span><label class="collapse" for="c-38109931">[-]</label><label class="expand" for="c-38109931">[1 more]</label></div><br/><div class="children"><div class="content">Up to date BSD code would still avoid copyleft so that is not a valid explanation.</div><br/></div></div></div></div></div></div></div></div><div id="38107123" class="c"><input type="checkbox" id="c-38107123" checked=""/><div class="controls bullet"><span class="by">alberth</span><span>|</span><a href="#38107155">prev</a><span>|</span><a href="#38109144">next</a><span>|</span><label class="collapse" for="c-38107123">[-]</label><label class="expand" for="c-38107123">[4 more]</label></div><br/><div class="children"><div class="content">Let’s not forget that macOS BSD userland utilities are also super old and outdated.</div><br/><div id="38109261" class="c"><input type="checkbox" id="c-38109261" checked=""/><div class="controls bullet"><span class="by">stateofinquiry</span><span>|</span><a href="#38107123">parent</a><span>|</span><a href="#38110015">next</a><span>|</span><label class="collapse" for="c-38109261">[-]</label><label class="expand" for="c-38109261">[2 more]</label></div><br/><div class="children"><div class="content">Serious question, where is the effort going on each of these annual OS releases? I truly don&#x27;t know, probably out of ignorance. Comparability with new HW? Supporting new file formats? As far as I can tell the headline feature of the latest MacOS is a screensaver with very large file sizes. Perhaps Apple and its many developers efforts would be better employed updating these essential tools and QA of the same.</div><br/><div id="38109566" class="c"><input type="checkbox" id="c-38109566" checked=""/><div class="controls bullet"><span class="by">dagmx</span><span>|</span><a href="#38107123">root</a><span>|</span><a href="#38109261">parent</a><span>|</span><a href="#38110015">next</a><span>|</span><label class="collapse" for="c-38109566">[-]</label><label class="expand" for="c-38109566">[1 more]</label></div><br/><div class="children"><div class="content">There’s tons of things that are new in every OS version<p>The consumer facing site shows consumer facing features. Hence why you’d see things like screensavers and video effects highlighted.<p>The developer side features are documented on videos released at WWDC each year. <a href="https:&#x2F;&#x2F;developer.apple.com&#x2F;news&#x2F;?id=cj1fjit2" rel="nofollow noreferrer">https:&#x2F;&#x2F;developer.apple.com&#x2F;news&#x2F;?id=cj1fjit2</a><p>Or summarized in the Platform State of the Union <a href="https:&#x2F;&#x2F;developer.apple.com&#x2F;news&#x2F;?id=gxtoci7w" rel="nofollow noreferrer">https:&#x2F;&#x2F;developer.apple.com&#x2F;news&#x2F;?id=gxtoci7w</a></div><br/></div></div></div></div><div id="38110015" class="c"><input type="checkbox" id="c-38110015" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#38107123">parent</a><span>|</span><a href="#38109261">prev</a><span>|</span><a href="#38109144">next</a><span>|</span><label class="collapse" for="c-38110015">[-]</label><label class="expand" for="c-38110015">[1 more]</label></div><br/><div class="children"><div class="content">Good enough for UNIX certification, though.</div><br/></div></div></div></div><div id="38109144" class="c"><input type="checkbox" id="c-38109144" checked=""/><div class="controls bullet"><span class="by">mvdtnz</span><span>|</span><a href="#38107123">prev</a><span>|</span><a href="#38110175">next</a><span>|</span><label class="collapse" for="c-38109144">[-]</label><label class="expand" for="c-38109144">[1 more]</label></div><br/><div class="children"><div class="content">I dread every MacOS update. It&#x27;s always so painful, you never know what they&#x27;re going to break.</div><br/></div></div><div id="38110175" class="c"><input type="checkbox" id="c-38110175" checked=""/><div class="controls bullet"><span class="by">walthamstow</span><span>|</span><a href="#38109144">prev</a><span>|</span><a href="#38104555">next</a><span>|</span><label class="collapse" for="c-38110175">[-]</label><label class="expand" for="c-38110175">[1 more]</label></div><br/><div class="children"><div class="content">Anyone having better luck with a clean install vs upgrading to Sonama?</div><br/></div></div><div id="38104555" class="c"><input type="checkbox" id="c-38104555" checked=""/><div class="controls bullet"><span class="by">cstrahan</span><span>|</span><a href="#38110175">prev</a><span>|</span><a href="#38109428">next</a><span>|</span><label class="collapse" for="c-38104555">[-]</label><label class="expand" for="c-38104555">[1 more]</label></div><br/><div class="children"><div class="content">Apple introduced a bug in grep that, under certain circumstances, causes grep to assert.</div><br/></div></div><div id="38109428" class="c"><input type="checkbox" id="c-38109428" checked=""/><div class="controls bullet"><span class="by">sschueller</span><span>|</span><a href="#38104555">prev</a><span>|</span><a href="#38107681">next</a><span>|</span><label class="collapse" for="c-38109428">[-]</label><label class="expand" for="c-38109428">[1 more]</label></div><br/><div class="children"><div class="content">Openssl is also &quot;broken&quot;. As in if you generate a pfx export file using the openssl command included on macos you can not import the resulting pfx into the same machines Keychain.<p>You have to use the legacy flag!</div><br/></div></div><div id="38107681" class="c"><input type="checkbox" id="c-38107681" checked=""/><div class="controls bullet"><span class="by">soneil</span><span>|</span><a href="#38109428">prev</a><span>|</span><a href="#38107138">next</a><span>|</span><label class="collapse" for="c-38107681">[-]</label><label class="expand" for="c-38107681">[3 more]</label></div><br/><div class="children"><div class="content">Interesting - it only appears to affect me with --color set (which is a default alias, but if you unalias grep it stops exploding.)</div><br/><div id="38108348" class="c"><input type="checkbox" id="c-38108348" checked=""/><div class="controls bullet"><span class="by">ArchOversight</span><span>|</span><a href="#38107681">parent</a><span>|</span><a href="#38107138">next</a><span>|</span><label class="collapse" for="c-38108348">[-]</label><label class="expand" for="c-38108348">[2 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>  % type grep
  grep is &#x2F;usr&#x2F;bin&#x2F;grep

  % echo -n &quot;a&quot; | &#x2F;usr&#x2F;bin&#x2F;grep -o &#x27;b*&#x27;
  Assertion failed: (advance &gt; 0), function procline, file util.c, line 732.
  zsh: done       echo -n &quot;a&quot; |
  zsh: abort      &#x2F;usr&#x2F;bin&#x2F;grep -o &#x27;b*&#x27;
</code></pre>
Your alias is not part of the macOS default.</div><br/><div id="38109026" class="c"><input type="checkbox" id="c-38109026" checked=""/><div class="controls bullet"><span class="by">soneil</span><span>|</span><a href="#38107681">root</a><span>|</span><a href="#38108348">parent</a><span>|</span><a href="#38107138">next</a><span>|</span><label class="collapse" for="c-38109026">[-]</label><label class="expand" for="c-38109026">[1 more]</label></div><br/><div class="children"><div class="content">ah, you&#x27;re right - it looks like it was part of ohmyzsh.<p>It appears I missed the -o; without it, my alias asserts, but unaliased doesn&#x27;t.  With the -o they both assert.  Still not what I was expecting, but the failure to cleanly replicate it is mine.</div><br/></div></div></div></div></div></div><div id="38107138" class="c"><input type="checkbox" id="c-38107138" checked=""/><div class="controls bullet"><span class="by">tedunangst</span><span>|</span><a href="#38107681">prev</a><span>|</span><a href="#38109313">next</a><span>|</span><label class="collapse" for="c-38107138">[-]</label><label class="expand" for="c-38107138">[6 more]</label></div><br/><div class="children"><div class="content">lol, I&#x27;m in this file.</div><br/><div id="38107736" class="c"><input type="checkbox" id="c-38107736" checked=""/><div class="controls bullet"><span class="by">Aachen</span><span>|</span><a href="#38107138">parent</a><span>|</span><a href="#38109313">next</a><span>|</span><label class="collapse" for="c-38107736">[-]</label><label class="expand" for="c-38107736">[5 more]</label></div><br/><div class="children"><div class="content">As tedu, or what do you mean?</div><br/><div id="38108282" class="c"><input type="checkbox" id="c-38108282" checked=""/><div class="controls bullet"><span class="by">shassard</span><span>|</span><a href="#38107138">root</a><span>|</span><a href="#38107736">parent</a><span>|</span><a href="#38108301">next</a><span>|</span><label class="collapse" for="c-38108282">[-]</label><label class="expand" for="c-38108282">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;github.com&#x2F;apple-oss-distributions&#x2F;text_cmds&#x2F;blob&#x2F;c0780aa3432383e0acde7dc7cf42972716925de6&#x2F;grep&#x2F;util.c#L3">https:&#x2F;&#x2F;github.com&#x2F;apple-oss-distributions&#x2F;text_cmds&#x2F;blob&#x2F;c0...</a></div><br/></div></div><div id="38108301" class="c"><input type="checkbox" id="c-38108301" checked=""/><div class="controls bullet"><span class="by">tedunangst</span><span>|</span><a href="#38107138">root</a><span>|</span><a href="#38107736">parent</a><span>|</span><a href="#38108282">prev</a><span>|</span><a href="#38109313">next</a><span>|</span><label class="collapse" for="c-38108301">[-]</label><label class="expand" for="c-38108301">[3 more]</label></div><br/><div class="children"><div class="content">Aye, though I checked the rev number and they apparently forked from before I added -o support, so I&#x27;m in the clear.</div><br/><div id="38108793" class="c"><input type="checkbox" id="c-38108793" checked=""/><div class="controls bullet"><span class="by">kevans91</span><span>|</span><a href="#38107138">root</a><span>|</span><a href="#38108301">parent</a><span>|</span><a href="#38108706">next</a><span>|</span><label class="collapse" for="c-38108793">[-]</label><label class="expand" for="c-38108793">[1 more]</label></div><br/><div class="children"><div class="content">We (FreeBSD) should really reconcile our diff against OpenBSD and figure out what of the work I&#x27;ve done downstream makes sense and what doesn&#x27;t. I&#x27;d imagine there&#x27;s a healthy amount in both categories.</div><br/></div></div></div></div></div></div></div></div><div id="38109313" class="c"><input type="checkbox" id="c-38109313" checked=""/><div class="controls bullet"><span class="by">raverbashing</span><span>|</span><a href="#38107138">prev</a><span>|</span><a href="#38108662">next</a><span>|</span><label class="collapse" for="c-38109313">[-]</label><label class="expand" for="c-38109313">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, grep &#x27;.&#x27; was broken in previous versions (maybe it&#x27;s a zsh builtin, but it  is broken), it would give you repeated lines</div><br/></div></div><div id="38108662" class="c"><input type="checkbox" id="c-38108662" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#38109313">prev</a><span>|</span><label class="collapse" for="c-38108662">[-]</label><label class="expand" for="c-38108662">[1 more]</label></div><br/><div class="children"><div class="content">I honestly feel like the fix here is replacing the assert with advance = advance &gt; 0 ? advance : 1;</div><br/></div></div></div></div></div></div></div></body></html>