<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1691917258801" as="style"/><link rel="stylesheet" href="styles.css?v=1691917258801"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://wsdookadr.github.io/posts/p9/">Solving a simple puzzle using SymPy</a> <span class="domain">(<a href="https://wsdookadr.github.io">wsdookadr.github.io</a>)</span></div><div class="subtext"><span>somat</span> | <span>20 comments</span></div><br/><div><div id="37106891" class="c"><input type="checkbox" id="c-37106891" checked=""/><div class="controls bullet"><span class="by">elesiuta</span><span>|</span><a href="#37106853">next</a><span>|</span><label class="collapse" for="c-37106891">[-]</label><label class="expand" for="c-37106891">[3 more]</label></div><br/><div class="children"><div class="content">This problem is even simpler if you notice that the rectangle made up of yellow + green + pink is just 3x the area of the orange rectangle, by definition.<p>Since these two rectangles share the same width, the combined rectangle must have 3x the height of the orange one, making the height of the yellow rectangle 9.<p>This gives a side length of 12 and an area of 144.</div><br/><div id="37107520" class="c"><input type="checkbox" id="c-37107520" checked=""/><div class="controls bullet"><span class="by">albert_e</span><span>|</span><a href="#37106891">parent</a><span>|</span><a href="#37107830">next</a><span>|</span><label class="collapse" for="c-37107520">[-]</label><label class="expand" for="c-37107520">[1 more]</label></div><br/><div class="children"><div class="content">Very elegant! I like puzzles like these - the solutions provide a kind of satisfaction.<p>And good sources of such puzzles. I am hoping to get my school age kid interested in these.</div><br/></div></div></div></div><div id="37106853" class="c"><input type="checkbox" id="c-37106853" checked=""/><div class="controls bullet"><span class="by">bar94</span><span>|</span><a href="#37106891">prev</a><span>|</span><a href="#37106595">next</a><span>|</span><label class="collapse" for="c-37106853">[-]</label><label class="expand" for="c-37106853">[1 more]</label></div><br/><div class="children"><div class="content">Not sure if everything is correct, seems a bit too easy -<p>Let y be the horizontal width of the bottom-left-most rectangle, and x be the horizontal width of each of the rectangles directly adjacent on the right to the first one, so that the rectangle marked at the top right as having a vertical width of 3 now has a horizontal width of x + y.<p>Then, the area of each rectangle is 3x + 3y, as all rectangles have the same area.<p>It follows that the vertical width of the bottom-left-most rectangle is (3x + 3y)&#x2F;y, and that the vertical width of each of the two stacked rectangles is (3x + 3y)&#x2F;x.<p>Note now that the stacked rectangles have the same horizontal width, and therefore must have the same vertical width. Thus, the vertical width of the bottom-left-most rectangle must be 2 times the vertical width of each of these stacked rectangles, so (3x + 3y)&#x2F;y = 2*(3x + 3y)&#x2F;x.<p>From this, we get 1&#x2F;y = 2&#x2F;x (noting that 3x + 3y cannot be be zero), so x = 2y.<p>This means that the vertical width of the bottom-left-most rectangle is then (3(2y) + 3y)&#x2F;y = (6y + 3y)&#x2F;y = 9y&#x2F;y = 9.<p>Therefore, the entire left side width is 3 + 9, or 12 units. Since the overall shape is a square, the entire square&#x27;s area must be 144 square units.</div><br/></div></div><div id="37106595" class="c"><input type="checkbox" id="c-37106595" checked=""/><div class="controls bullet"><span class="by">somat</span><span>|</span><a href="#37106853">prev</a><span>|</span><a href="#37107853">next</a><span>|</span><label class="collapse" for="c-37106595">[-]</label><label class="expand" for="c-37106595">[5 more]</label></div><br/><div class="children"><div class="content">I find these sort of calculation engines very interesting. Here is my attempt to solve the same somewhat more geometrically in solvespace. Any good papers on the data structures needed to implement one?<p>I am not very good at math so I might of done something terribly wrong but the theory is. The rectangles have equal area, area is length * width, items with the same L + W will have the same area(this is where I might have gone wrong), create a structure where all rectangles are forced to have the same L + W.<p><a href="http:&#x2F;&#x2F;nl1.outband.net&#x2F;extra&#x2F;floorplan.png" rel="nofollow noreferrer">http:&#x2F;&#x2F;nl1.outband.net&#x2F;extra&#x2F;floorplan.png</a><p><a href="http:&#x2F;&#x2F;nl1.outband.net&#x2F;extra&#x2F;floorplan.slvs" rel="nofollow noreferrer">http:&#x2F;&#x2F;nl1.outband.net&#x2F;extra&#x2F;floorplan.slvs</a></div><br/><div id="37106797" class="c"><input type="checkbox" id="c-37106797" checked=""/><div class="controls bullet"><span class="by">WoodenChair</span><span>|</span><a href="#37106595">parent</a><span>|</span><a href="#37106792">next</a><span>|</span><label class="collapse" for="c-37106797">[-]</label><label class="expand" for="c-37106797">[2 more]</label></div><br/><div class="children"><div class="content">&gt; items with the same L + W will have the same area(this is where I might have gone wrong),<p>Unfortunately yeah that’s not right. Think of a 1x3 and a 2x2.</div><br/><div id="37106906" class="c"><input type="checkbox" id="c-37106906" checked=""/><div class="controls bullet"><span class="by">somat</span><span>|</span><a href="#37106595">root</a><span>|</span><a href="#37106797">parent</a><span>|</span><a href="#37106792">next</a><span>|</span><label class="collapse" for="c-37106906">[-]</label><label class="expand" for="c-37106906">[1 more]</label></div><br/><div class="children"><div class="content">Right, a simple sanity check on the rects would have shown my mistake.</div><br/></div></div></div></div><div id="37106792" class="c"><input type="checkbox" id="c-37106792" checked=""/><div class="controls bullet"><span class="by">mk_stjames</span><span>|</span><a href="#37106595">parent</a><span>|</span><a href="#37106797">prev</a><span>|</span><a href="#37106642">next</a><span>|</span><label class="collapse" for="c-37106792">[-]</label><label class="expand" for="c-37106792">[1 more]</label></div><br/><div class="children"><div class="content">This is a class of problems known as constraint solvers, and a program like Solvespace is actually using a symbolic algebra system under the hood to &#x27;solve&#x27; the layout as you constraint the sketch in the GUI in nearly the exact way that SymPy is solving the puzzle above.<p>There are various approaches; Solvespace uses a modified Newton&#x27;s method and was written in C++ making use of just the Eigen lib.</div><br/></div></div><div id="37106642" class="c"><input type="checkbox" id="c-37106642" checked=""/><div class="controls bullet"><span class="by">PaulHoule</span><span>|</span><a href="#37106595">parent</a><span>|</span><a href="#37106792">prev</a><span>|</span><a href="#37107853">next</a><span>|</span><label class="collapse" for="c-37106642">[-]</label><label class="expand" for="c-37106642">[1 more]</label></div><br/><div class="children"><div class="content">I could see this being useful for graphical layout.</div><br/></div></div></div></div><div id="37107853" class="c"><input type="checkbox" id="c-37107853" checked=""/><div class="controls bullet"><span class="by">sriram_malhar</span><span>|</span><a href="#37106595">prev</a><span>|</span><a href="#37107477">next</a><span>|</span><label class="collapse" for="c-37107853">[-]</label><label class="expand" for="c-37107853">[1 more]</label></div><br/><div class="children"><div class="content">If the longer side of yellow = y, and the longer side of the orange = o,<p>&#x2F;&#x2F; yellow+pink+green area = 3 x orange)<p>y * o = 3 (3 * o)<p>y = 9<p>Side of square = 9+3 = 12. So area is 144.</div><br/></div></div><div id="37107477" class="c"><input type="checkbox" id="c-37107477" checked=""/><div class="controls bullet"><span class="by">albert_e</span><span>|</span><a href="#37107853">prev</a><span>|</span><a href="#37106904">next</a><span>|</span><label class="collapse" for="c-37107477">[-]</label><label class="expand" for="c-37107477">[2 more]</label></div><br/><div class="children"><div class="content">Is there a labelled version of the diagram with the points o,y,p,b,g shown?<p>That would have made the code more obvious to read I think?<p>EDIT: Just realized these labels are probably meant to represent areas of the colored shapes ... orange, yellow, pink, blue and green?</div><br/><div id="37107673" class="c"><input type="checkbox" id="c-37107673" checked=""/><div class="controls bullet"><span class="by">spuz</span><span>|</span><a href="#37107477">parent</a><span>|</span><a href="#37106904">next</a><span>|</span><label class="collapse" for="c-37107673">[-]</label><label class="expand" for="c-37107673">[1 more]</label></div><br/><div class="children"><div class="content">Yes, plus I believe P represents the set of equivalent areas and U represents the set of equivalent lengths.</div><br/></div></div></div></div><div id="37106904" class="c"><input type="checkbox" id="c-37106904" checked=""/><div class="controls bullet"><span class="by">mk_stjames</span><span>|</span><a href="#37107477">prev</a><span>|</span><a href="#37106817">next</a><span>|</span><label class="collapse" for="c-37106904">[-]</label><label class="expand" for="c-37106904">[5 more]</label></div><br/><div class="children"><div class="content">I have a completely absurd way to use python to approximate the integer solution.  Right answer achieved via hopes and prayers:<p><pre><code>    from PIL import Image
    from math import ceil
    given=3
    def is_orange(p):
        return 200 &lt;= p[0] &lt;= 255 and 100 &lt;= p[1] &lt;= 170 and 0 &lt;= p[2] &lt;= 50
    img = Image.open(&quot;p9-problem.png&quot;)
    w, h = img.size
    o = (sum(is_orange(img.getpixel((w &#x2F;&#x2F; 2, y))) for y in range(h)))
    T = (sum(p[:3] != (p[0], p[0], p[0]) for p in (img.getpixel((w &#x2F;&#x2F; 2, i)) for i in range(h))))
    L = ceil((T&#x2F;o)*given)
    print(L**2)
</code></pre>
Think about how many ways this could be tricked.... :)</div><br/><div id="37106922" class="c"><input type="checkbox" id="c-37106922" checked=""/><div class="controls bullet"><span class="by">somat</span><span>|</span><a href="#37106904">parent</a><span>|</span><a href="#37106912">next</a><span>|</span><label class="collapse" for="c-37106922">[-]</label><label class="expand" for="c-37106922">[3 more]</label></div><br/><div class="children"><div class="content">For one it is making the rather large assumption that the image is to dimension.</div><br/><div id="37106935" class="c"><input type="checkbox" id="c-37106935" checked=""/><div class="controls bullet"><span class="by">mk_stjames</span><span>|</span><a href="#37106904">root</a><span>|</span><a href="#37106922">parent</a><span>|</span><a href="#37106912">next</a><span>|</span><label class="collapse" for="c-37106935">[-]</label><label class="expand" for="c-37106935">[2 more]</label></div><br/><div class="children"><div class="content">Yes, and it doesn&#x27;t seem to be (there is no way the side is 12 if that given is 3, looks more like ~9).<p>So yeah... complete luck was had here.</div><br/><div id="37107578" class="c"><input type="checkbox" id="c-37107578" checked=""/><div class="controls bullet"><span class="by">nerdponx</span><span>|</span><a href="#37106904">root</a><span>|</span><a href="#37106935">parent</a><span>|</span><a href="#37106912">next</a><span>|</span><label class="collapse" for="c-37107578">[-]</label><label class="expand" for="c-37107578">[1 more]</label></div><br/><div class="children"><div class="content">It looks deliberately <i>not</i> to dimension. In the process of getting to the answer I figured out that the width of the yellow rectangle is actually twice the width of the green and pink rectangles. It&#x27;s a fakeout because it <i>is</i> correct that the green and pink rectangles have the same height.</div><br/></div></div></div></div></div></div></div></div><div id="37106817" class="c"><input type="checkbox" id="c-37106817" checked=""/><div class="controls bullet"><span class="by">Enigma02</span><span>|</span><a href="#37106904">prev</a><span>|</span><a href="#37106722">next</a><span>|</span><label class="collapse" for="c-37106817">[-]</label><label class="expand" for="c-37106817">[1 more]</label></div><br/><div class="children"><div class="content">For the posed question you could assume that each rectangle has area 1, so the square has area 5. From there its pretty easy to find the lengths of relevant sides, which can then tell you how much you need to scale by.<p>Of course for more complicated layouts this method won&#x27;t work as well, but at least for this simple one this method seems easier.</div><br/></div></div><div id="37106722" class="c"><input type="checkbox" id="c-37106722" checked=""/><div class="controls bullet"><span class="by">mjfl</span><span>|</span><a href="#37106817">prev</a><span>|</span><label class="collapse" for="c-37106722">[-]</label><label class="expand" for="c-37106722">[1 more]</label></div><br/><div class="children"><div class="content">Simple guess assuming that the answer is an integer: We have 5 copies of equal area with area = 3w, where w is the width of the first box. That means the whole square has area 15w. If the answer is an integer then it means 15w is a perfect square, which requires w = 15u^2 for some integer u. Guessing u = 1, the answer may be 15^2 = 225.</div><br/></div></div></div></div></div></div></div></body></html>