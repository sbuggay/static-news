<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1700298060132" as="style"/><link rel="stylesheet" href="styles.css?v=1700298060132"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://squint-cljs.github.io/squint/?src=https://gist.githubusercontent.com/borkdude/ca3af924dc2526f00361f28dcf5d0bfb/raw/09cd9e17bf0d6fa3655d0e7cbf2c878e19cb894f/pinball.cljs">Pinball implemented using Squint, a ClojureScript dialect</a>Â <span class="domain">(<a href="https://squint-cljs.github.io">squint-cljs.github.io</a>)</span></div><div class="subtext"><span>Borkdude</span> | <span>11 comments</span></div><br/><div><div id="38314074" class="c"><input type="checkbox" id="c-38314074" checked=""/><div class="controls bullet"><span class="by">koito17</span><span>|</span><a href="#38314989">next</a><span>|</span><label class="collapse" for="c-38314074">[-]</label><label class="expand" for="c-38314074">[1 more]</label></div><br/><div class="children"><div class="content">For those who don&#x27;t know:<p>Borkdude is a fairly big name in the Clojure community, most known for developing clj-kondo (static analysis tool used by clojure-lsp) and babashka (a Clojure interpreter built atop GraalVM native image so you can have fast startup times and decent performance writing scripts in Clojure).<p>&quot;Squint&quot; is a ClojureScript compiler of his that transpiles ClojureScript directly to JS while introducing as little runtime overhead as possible. For instance, the usual PersistantVector, PersistentHashMap, etc. data structures compile straight to ordinary vectors and maps in JS. This means they are technically mutable and have slightly different semantics underneath. The goal of Squint as far as I can tell is to be akin to ParenScript but for Clojure (a subset of the language implemented that compiles straight to human-like JS code).<p>ClojureScript itself is a compiler that takes Clojure code and transforms it into JS code that is processable by Google Closure Compiler&#x27;s advanced optimizations. Unfortunately, betting on Google Closure proved to be bad, given that next to nobody in the modern JS ecosystem has used it in years. It also was the biggest reason for painful NPM integration in the past, though this has been mostly fixed thanks to externs inference by the CLJS compiler and tools like Shadow-CLJS that make use of Babel to run various transformations and pass NPM code into Closure&#x27;s simple optimizations rather than advanced. This gives you bundles that are more or less equivalent to using Webpack with the terser plugin, but you still have painfully long compile times and the usual caveats of using Closure compiler.<p>Borkdude also has a CLJS to ES6 compiler called &quot;Cherry&quot;, which behaves much more like ClojureScript compiler than Squint does (e.g. it actually implements persistent, immutable data structures and there is a runtime associated to it).<p>Squint has been gaining a bit of interest from ClojureScript developers since it theoretically offers the past of least resistance if you want to make use of &quot;modern&quot; JS tooling like Vite, esbuild, and so on. It also frees you from the externs issues that plague ClojureScript since you are no longer passing everything into Closure compiler.</div><br/></div></div><div id="38314989" class="c"><input type="checkbox" id="c-38314989" checked=""/><div class="controls bullet"><span class="by">papaver-somnamb</span><span>|</span><a href="#38314074">prev</a><span>|</span><a href="#38312986">next</a><span>|</span><label class="collapse" for="c-38314989">[-]</label><label class="expand" for="c-38314989">[1 more]</label></div><br/><div class="children"><div class="content">And not a single :require or outside library. Also, this pinball demo CLJS code seems to be being compiled directly within the browser. Want!<p>Let&#x27;s go further. Imagine, a Clojure that directly produces WASM, without JS, without Google Closure. A Clojure that can target the browser and bring in NPM modules with alacrity, like shadow-cljs does today. This approximates the most forward-looking path for Clojure on web technologies I can think of at the moment.<p>Borkdude appears to have boundless energy. Just maybe, in the Clojure community, Borkdude is what comes after Chuck Norris memes. Does Borkdude ever sleep?</div><br/></div></div><div id="38312986" class="c"><input type="checkbox" id="c-38312986" checked=""/><div class="controls bullet"><span class="by">refset</span><span>|</span><a href="#38314989">prev</a><span>|</span><a href="#38304700">next</a><span>|</span><label class="collapse" for="c-38312986">[-]</label><label class="expand" for="c-38312986">[1 more]</label></div><br/><div class="children"><div class="content">The Wordle clone is less exciting but you can scroll down to see the source code and JS output more easily: <a href="https:&#x2F;&#x2F;squint-cljs.github.io&#x2F;squint&#x2F;?src=https:&#x2F;&#x2F;gist.githubusercontent.com&#x2F;borkdude&#x2F;9ed90af225a57ba6b8d9dd12e7c71eea&#x2F;raw&#x2F;02fd614cad0da4ac696511c438ebd9ed67d412b5&#x2F;wordle.cljs" rel="nofollow noreferrer">https:&#x2F;&#x2F;squint-cljs.github.io&#x2F;squint&#x2F;?src=https:&#x2F;&#x2F;gist.githu...</a></div><br/></div></div><div id="38304700" class="c"><input type="checkbox" id="c-38304700" checked=""/><div class="controls bullet"><span class="by">Borkdude</span><span>|</span><a href="#38312986">prev</a><span>|</span><a href="#38312265">next</a><span>|</span><label class="collapse" for="c-38304700">[-]</label><label class="expand" for="c-38304700">[3 more]</label></div><br/><div class="children"><div class="content">The original implementation: <a href="https:&#x2F;&#x2F;thegeez.net&#x2F;2023&#x2F;03&#x2F;01&#x2F;pinball_scittle.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;thegeez.net&#x2F;2023&#x2F;03&#x2F;01&#x2F;pinball_scittle.html</a><p>Squint website: <a href="https:&#x2F;&#x2F;github.com&#x2F;squint-cljs&#x2F;squint">https:&#x2F;&#x2F;github.com&#x2F;squint-cljs&#x2F;squint</a></div><br/><div id="38312359" class="c"><input type="checkbox" id="c-38312359" checked=""/><div class="controls bullet"><span class="by">roenxi</span><span>|</span><a href="#38304700">parent</a><span>|</span><a href="#38312265">next</a><span>|</span><label class="collapse" for="c-38312359">[-]</label><label class="expand" for="c-38312359">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve never used ClojureScript, but if I&#x27;m reading this correctly the big difference between it and Squint is the representation of data structures where ClojureScript uses something clever and Squint uses basic JavaScript structures.<p>How are you finding the implications of that decision? Thoughtful data structures choice seems to be one of Clojure&#x27;s biggest advantages so I&#x27;m assuming there is a lot to dig through here.<p>Also, thanks for being a star. I nearly started this post with &quot;Wow, what a neat beginner project, welcome to the Clojure community&quot; but my grin threatened to hurt my face so I gave up on that idea.</div><br/><div id="38316448" class="c"><input type="checkbox" id="c-38316448" checked=""/><div class="controls bullet"><span class="by">kimi</span><span>|</span><a href="#38304700">root</a><span>|</span><a href="#38312359">parent</a><span>|</span><a href="#38312265">next</a><span>|</span><label class="collapse" for="c-38316448">[-]</label><label class="expand" for="c-38316448">[1 more]</label></div><br/><div class="children"><div class="content">This means that if you use some third-party code, it may work funny if it hits one of the differences. OTOH it should be somehow faster.</div><br/></div></div></div></div></div></div><div id="38312265" class="c"><input type="checkbox" id="c-38312265" checked=""/><div class="controls bullet"><span class="by">tomcam</span><span>|</span><a href="#38304700">prev</a><span>|</span><a href="#38313301">next</a><span>|</span><label class="collapse" for="c-38312265">[-]</label><label class="expand" for="c-38312265">[1 more]</label></div><br/><div class="children"><div class="content">Lots more fun than I expected on my iPhone. Thank you</div><br/></div></div><div id="38313301" class="c"><input type="checkbox" id="c-38313301" checked=""/><div class="controls bullet"><span class="by">thegeekpirate</span><span>|</span><a href="#38312265">prev</a><span>|</span><a href="#38314062">next</a><span>|</span><label class="collapse" for="c-38313301">[-]</label><label class="expand" for="c-38313301">[1 more]</label></div><br/><div class="children"><div class="content">It runs far too quickly on Firefox for whatever reason.</div><br/></div></div><div id="38314062" class="c"><input type="checkbox" id="c-38314062" checked=""/><div class="controls bullet"><span class="by">meiraleal</span><span>|</span><a href="#38313301">prev</a><span>|</span><label class="collapse" for="c-38314062">[-]</label><label class="expand" for="c-38314062">[2 more]</label></div><br/><div class="children"><div class="content">Hey borkdude, this looks great! I&#x27;ve checked Squint and Cherry before but got confused about why 2 separated projects?</div><br/><div id="38316019" class="c"><input type="checkbox" id="c-38316019" checked=""/><div class="controls bullet"><span class="by">stefcoetzee</span><span>|</span><a href="#38314062">parent</a><span>|</span><label class="collapse" for="c-38316019">[-]</label><label class="expand" for="c-38316019">[1 more]</label></div><br/><div class="children"><div class="content">See <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=38314074">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=38314074</a> for explanation</div><br/></div></div></div></div></div></div></div></div></div></body></html>