<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1687424459210" as="style"/><link rel="stylesheet" href="styles.css?v=1687424459210"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://bvisness.me/coroutines/">Coroutines make robot code easy for high schoolers</a> <span class="domain">(<a href="https://bvisness.me">bvisness.me</a>)</span></div><div class="subtext"><span>bvisness</span> | <span>16 comments</span></div><br/><div><div id="36429603" class="c"><input type="checkbox" id="c-36429603" checked=""/><div class="controls bullet"><span class="by">rtpg</span><span>|</span><a href="#36429555">next</a><span>|</span><label class="collapse" for="c-36429603">[-]</label><label class="expand" for="c-36429603">[1 more]</label></div><br/><div class="children"><div class="content">Coroutined make programming for pico8 very chill as well.<p>The biggest challenge is sometimes you do want external flow control, and there coroutines can get hard to untangle if your design is a bit messy.<p>Something like “A signals to B to do something else” starts to be a bit tricky (along with interruptible actions). I think there are good patterns in theory but I’ve found myself with pretty tangled knots at times.<p>This is ultimately a general problem when programming everything as functions. Sometimes you need to mess with state that’s “hidden away” in your closure. Building out control flow data structures ends up becoming mandatory in many cases.</div><br/></div></div><div id="36429537" class="c"><input type="checkbox" id="c-36429537" checked=""/><div class="controls bullet"><span class="by">samsquire</span><span>|</span><a href="#36429555">prev</a><span>|</span><a href="#36429583">next</a><span>|</span><label class="collapse" for="c-36429537">[-]</label><label class="expand" for="c-36429537">[1 more]</label></div><br/><div class="children"><div class="content">I think that developers have minimal scheduling primitives available to them, to schedule complicated work, in the order and timings you want it to have.<p>I don&#x27;t like hardcoding functions in coroutine pipelines. Depending on the ordering of your pipeline, you might have to create things and then refer to them, because of the forward reference problem.<p>Here&#x27;s my stackoverflow question for what I&#x27;m getting at:<p><a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;74420108&#x2F;whats-the-canonical-approach-to-creating-multiple-producers-and-consumers-with" rel="nofollow noreferrer">https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;74420108&#x2F;whats-the-canon...</a><p>Coordinating work between independent threads of execution is adhoc and not really well developed. I would like to build a rich &quot;process api&quot; that can fork, merge, pause, yield, yield until, drop while, synchronize, wait (latch), react according to events. I feel every distributed systems builds this again and again.<p>Go&#x27;s and Occam&#x27;s CSP is pretty powerful.<p>I&#x27;ve noticed that people build turing completeness ontop of existing languages, probably due to the lack of expressivity of the original programming langauge to take turingness as an input.</div><br/></div></div><div id="36429583" class="c"><input type="checkbox" id="c-36429583" checked=""/><div class="controls bullet"><span class="by">noobermin</span><span>|</span><a href="#36429537">prev</a><span>|</span><a href="#36429389">next</a><span>|</span><label class="collapse" for="c-36429583">[-]</label><label class="expand" for="c-36429583">[1 more]</label></div><br/><div class="children"><div class="content">Ah coroutines, essentially glorified goto. My 10keV take is that dijsktra&#x27;s paper while probably right about goto back then has cursed us and we are still cursed till this day. Some logical structures map well to just using goto in a series of steps, but because of this allergy to goto, we&#x27;re stuck where basically jumping into a random place in a function is &quot;novel.&quot;</div><br/></div></div><div id="36429389" class="c"><input type="checkbox" id="c-36429389" checked=""/><div class="controls bullet"><span class="by">taberiand</span><span>|</span><a href="#36429583">prev</a><span>|</span><a href="#36428881">next</a><span>|</span><label class="collapse" for="c-36429389">[-]</label><label class="expand" for="c-36429389">[3 more]</label></div><br/><div class="children"><div class="content">Similar code could be written in C#, with code like<p><pre><code>    IEnumerable&lt;RobotCommand&gt; MyRobotBrain() {
       while(drivetrain:getDistanceInches() &gt; -48) {
            yield drivetrain:arcadeDrive(0.5, 0);
        }

        yield shooter:shoot();
    }</code></pre></div><br/><div id="36429480" class="c"><input type="checkbox" id="c-36429480" checked=""/><div class="controls bullet"><span class="by">isanjay</span><span>|</span><a href="#36429389">parent</a><span>|</span><a href="#36429496">prev</a><span>|</span><a href="#36428881">next</a><span>|</span><label class="collapse" for="c-36429480">[-]</label><label class="expand" for="c-36429480">[1 more]</label></div><br/><div class="children"><div class="content">Dots instead of colons ?</div><br/></div></div></div></div><div id="36428881" class="c"><input type="checkbox" id="c-36428881" checked=""/><div class="controls bullet"><span class="by">quantified</span><span>|</span><a href="#36429389">prev</a><span>|</span><a href="#36429089">next</a><span>|</span><label class="collapse" for="c-36428881">[-]</label><label class="expand" for="c-36428881">[2 more]</label></div><br/><div class="children"><div class="content">Thankfully a piece that emphasizes that coroutines are functions that pause. Java frameworks like Quasar became focused on other goals besides that basic capability and lost their way (IMHO).<p>Java&#x27;s not the easiest to pick up in high school unless you really make a big after-school effort. Something like Lua is probably better.</div><br/><div id="36429235" class="c"><input type="checkbox" id="c-36429235" checked=""/><div class="controls bullet"><span class="by">happymellon</span><span>|</span><a href="#36428881">parent</a><span>|</span><a href="#36429089">next</a><span>|</span><label class="collapse" for="c-36429235">[-]</label><label class="expand" for="c-36429235">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t know Quasar, but a lot of projects seem to want to add functionality rather than be a library for that purpose, and create a new one for the completely unrelated feature that you want.</div><br/></div></div></div></div><div id="36429089" class="c"><input type="checkbox" id="c-36429089" checked=""/><div class="controls bullet"><span class="by">alex-moon</span><span>|</span><a href="#36428881">prev</a><span>|</span><a href="#36429465">next</a><span>|</span><label class="collapse" for="c-36429089">[-]</label><label class="expand" for="c-36429089">[1 more]</label></div><br/><div class="children"><div class="content">Had a go at writing a game a while back, purely for fun, reinventing the wheel to learn about what makes writing games hard. The command pattern here is a really great way to solve a persistent difficulty I had (largely the same one discussed in the article). I have certainly missed the point of the article but that is a great takeaway for me personally.<p>Funnily enough I have used the command pattern before to automate sequences of steps in a workflow. Back then I kind of stumbled on it - it is super effective for certain kinds of things.</div><br/></div></div><div id="36429465" class="c"><input type="checkbox" id="c-36429465" checked=""/><div class="controls bullet"><span class="by">pas</span><span>|</span><a href="#36429089">prev</a><span>|</span><a href="#36429433">next</a><span>|</span><label class="collapse" for="c-36429465">[-]</label><label class="expand" for="c-36429465">[1 more]</label></div><br/><div class="children"><div class="content">leaky abstractions and all aside, the coroutine code is unreadable to me after clean looking commands. :|<p>yes, new Java(new Java(1), new ...) is bad, and asynchronous programming paradigms are usually fitting for robotics, but abstractions are good.</div><br/></div></div><div id="36429433" class="c"><input type="checkbox" id="c-36429433" checked=""/><div class="controls bullet"><span class="by">Dudester230602</span><span>|</span><a href="#36429465">prev</a><span>|</span><a href="#36428711">next</a><span>|</span><label class="collapse" for="c-36429433">[-]</label><label class="expand" for="c-36429433">[1 more]</label></div><br/><div class="children"><div class="content">So many similarities with game development: central loop, coroutines, character state machine etc.</div><br/></div></div><div id="36428711" class="c"><input type="checkbox" id="c-36428711" checked=""/><div class="controls bullet"><span class="by">greatgib</span><span>|</span><a href="#36429433">prev</a><span>|</span><label class="collapse" for="c-36428711">[-]</label><label class="expand" for="c-36428711">[3 more]</label></div><br/><div class="children"><div class="content">If you want to make it easy for high schoolers, just don&#x27;t use java in the first place...</div><br/><div id="36428978" class="c"><input type="checkbox" id="c-36428978" checked=""/><div class="controls bullet"><span class="by">rootlocus</span><span>|</span><a href="#36428711">parent</a><span>|</span><a href="#36429021">next</a><span>|</span><label class="collapse" for="c-36428978">[-]</label><label class="expand" for="c-36428978">[1 more]</label></div><br/><div class="children"><div class="content">We learned borland pascal and borland c in high school. Java is perfectly fine.</div><br/></div></div><div id="36429021" class="c"><input type="checkbox" id="c-36429021" checked=""/><div class="controls bullet"><span class="by">bvisness</span><span>|</span><a href="#36428711">parent</a><span>|</span><a href="#36428978">prev</a><span>|</span><label class="collapse" for="c-36429021">[-]</label><label class="expand" for="c-36429021">[1 more]</label></div><br/><div class="children"><div class="content">The only officially supported languages for the competition are C++, Java, and LabVIEW. When those are your educational options...you stick with Java.<p>(We&#x27;ve now switched to Lua, integrated with the official C++, but it&#x27;s a lot more work behind the scenes.)</div><br/></div></div></div></div></div></div></div></div></div></body></html>