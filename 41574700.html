<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1726650078032" as="style"/><link rel="stylesheet" href="styles.css?v=1726650078032"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://sigwait.org/~alex/blog/2023/07/10/yqh6fX.html">Exploring pre-1990 versions of wc(1) (2023)</a>Â <span class="domain">(<a href="https://sigwait.org">sigwait.org</a>)</span></div><div class="subtext"><span>henry_flower</span> | <span>12 comments</span></div><br/><div><div id="41576635" class="c"><input type="checkbox" id="c-41576635" checked=""/><div class="controls bullet"><span class="by">shric</span><span>|</span><a href="#41575220">next</a><span>|</span><label class="collapse" for="c-41576635">[-]</label><label class="expand" for="c-41576635">[2 more]</label></div><br/><div class="children"><div class="content">A fun read on word count optimization can be found in Abrash&#x27;s Black Book:<p><a href="https:&#x2F;&#x2F;www.jagregory.com&#x2F;abrash-black-book&#x2F;#lessons-learned-in-the-pursuit-of-the-ultimate-word-counter" rel="nofollow">https:&#x2F;&#x2F;www.jagregory.com&#x2F;abrash-black-book&#x2F;#lessons-learned...</a><p>You can gloss over the asm if you wish, the tricks that are explained around it are worth it imho.</div><br/><div id="41576837" class="c"><input type="checkbox" id="c-41576837" checked=""/><div class="controls bullet"><span class="by">Joker_vD</span><span>|</span><a href="#41576635">parent</a><span>|</span><a href="#41575220">next</a><span>|</span><label class="collapse" for="c-41576837">[-]</label><label class="expand" for="c-41576837">[1 more]</label></div><br/><div class="children"><div class="content">I wonder if large lookup tables&#x2F;table-driven state machines are still as good as they used to be. After all, even with all the on-chip caches, the additional memory accesses today seem to be slower than doing some multi-instruction SIMD voodoo.</div><br/></div></div></div></div><div id="41575220" class="c"><input type="checkbox" id="c-41575220" checked=""/><div class="controls bullet"><span class="by">tripdout</span><span>|</span><a href="#41576635">prev</a><span>|</span><a href="#41575968">next</a><span>|</span><label class="collapse" for="c-41575220">[-]</label><label class="expand" for="c-41575220">[2 more]</label></div><br/><div class="children"><div class="content">Those `goto`s between two different for loops is crazy.</div><br/><div id="41577317" class="c"><input type="checkbox" id="c-41577317" checked=""/><div class="controls bullet"><span class="by">actionfromafar</span><span>|</span><a href="#41575220">parent</a><span>|</span><a href="#41575968">next</a><span>|</span><label class="collapse" for="c-41577317">[-]</label><label class="expand" for="c-41577317">[1 more]</label></div><br/><div class="children"><div class="content">Assembly &#x2F; machine code thinking.</div><br/></div></div></div></div><div id="41575968" class="c"><input type="checkbox" id="c-41575968" checked=""/><div class="controls bullet"><span class="by">Joker_vD</span><span>|</span><a href="#41575220">prev</a><span>|</span><label class="collapse" for="c-41575968">[-]</label><label class="expand" for="c-41575968">[7 more]</label></div><br/><div class="children"><div class="content">&gt; A word is a maximal string of characters delimited by spaces, tabs or newlines.<p>And then the <i>actual</i> code explicitly filters out and ignores every character larger than 0x7F. Just why.</div><br/><div id="41577070" class="c"><input type="checkbox" id="c-41577070" checked=""/><div class="controls bullet"><span class="by">jolmg</span><span>|</span><a href="#41575968">parent</a><span>|</span><a href="#41576896">next</a><span>|</span><label class="collapse" for="c-41577070">[-]</label><label class="expand" for="c-41577070">[1 more]</label></div><br/><div class="children"><div class="content">Probably because they&#x27;re not characters. They&#x27;re just bytes undefined by ASCII.</div><br/></div></div><div id="41576896" class="c"><input type="checkbox" id="c-41576896" checked=""/><div class="controls bullet"><span class="by">Tor3</span><span>|</span><a href="#41575968">parent</a><span>|</span><a href="#41577070">prev</a><span>|</span><a href="#41576074">next</a><span>|</span><label class="collapse" for="c-41576896">[-]</label><label class="expand" for="c-41576896">[1 more]</label></div><br/><div class="children"><div class="content">ASCII is 7 bits (the eight bit would be parity), so that makes perfect sense, in an ASCII world.</div><br/></div></div><div id="41576074" class="c"><input type="checkbox" id="c-41576074" checked=""/><div class="controls bullet"><span class="by">ivan_gammel</span><span>|</span><a href="#41575968">parent</a><span>|</span><a href="#41576896">prev</a><span>|</span><label class="collapse" for="c-41576074">[-]</label><label class="expand" for="c-41576074">[4 more]</label></div><br/><div class="children"><div class="content">Because they thought that a word is something said in a human language that they can understand.</div><br/><div id="41576291" class="c"><input type="checkbox" id="c-41576291" checked=""/><div class="controls bullet"><span class="by">Joker_vD</span><span>|</span><a href="#41575968">root</a><span>|</span><a href="#41576074">parent</a><span>|</span><label class="collapse" for="c-41576291">[-]</label><label class="expand" for="c-41576291">[3 more]</label></div><br/><div class="children"><div class="content">Mi ne pensas ke lingvoj kiuj usas ekskluzive la basan latinan alfabeton estas 
komprepeneblaj per si mem.</div><br/><div id="41577414" class="c"><input type="checkbox" id="c-41577414" checked=""/><div class="controls bullet"><span class="by">luismedel</span><span>|</span><a href="#41575968">root</a><span>|</span><a href="#41576291">parent</a><span>|</span><a href="#41577325">next</a><span>|</span><label class="collapse" for="c-41577414">[-]</label><label class="expand" for="c-41577414">[1 more]</label></div><br/><div class="children"><div class="content">Cool how my native language is Spanish and I can almost-understand 80% of Esperanto.</div><br/></div></div><div id="41577325" class="c"><input type="checkbox" id="c-41577325" checked=""/><div class="controls bullet"><span class="by">actionfromafar</span><span>|</span><a href="#41575968">root</a><span>|</span><a href="#41576291">parent</a><span>|</span><a href="#41577414">prev</a><span>|</span><label class="collapse" for="c-41577325">[-]</label><label class="expand" for="c-41577325">[1 more]</label></div><br/><div class="children"><div class="content">Ze riform iz komplit.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>