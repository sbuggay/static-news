<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1693990869238" as="style"/><link rel="stylesheet" href="styles.css?v=1693990869238"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.troyhunt.com/fighting-api-bots-with-cloudflares-invisible-turnstile/">Fighting API bots with Cloudflare&#x27;s invisible turnstile</a> <span class="domain">(<a href="https://www.troyhunt.com">www.troyhunt.com</a>)</span></div><div class="subtext"><span>healsdata</span> | <span>56 comments</span></div><br/><div><div id="37402599" class="c"><input type="checkbox" id="c-37402599" checked=""/><div class="controls bullet"><span class="by">bArray</span><span>|</span><a href="#37401937">next</a><span>|</span><label class="collapse" for="c-37402599">[-]</label><label class="expand" for="c-37402599">[1 more]</label></div><br/><div class="children"><div class="content">&gt; That&#x27;s a 91% hit rate of solved challenges which is great. That remaining 9% is either humans with a false positive or... bots getting rejected<p>If I meet a &quot;human check&quot;, I quickly decide whether it is worth me solving it, or just close the tab. I could imagine 9% of people just giving up. Some of these CAPTCHAs require you to find 20 fire hydrants on 3 different rounds of tiles, just to fail you anyway. We have loads of data on websites keeping user&#x27;s attention [1], this also seems to apply to CAPTCHAs.<p>Besides, I think it is now well known that AI is fully capable of solving CAPTCHAs.<p>[1] <a href="https:&#x2F;&#x2F;www.nngroup.com&#x2F;articles&#x2F;response-times-3-important-limits&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.nngroup.com&#x2F;articles&#x2F;response-times-3-important-...</a></div><br/></div></div><div id="37401937" class="c"><input type="checkbox" id="c-37401937" checked=""/><div class="controls bullet"><span class="by">Rebelgecko</span><span>|</span><a href="#37402599">prev</a><span>|</span><a href="#37402706">next</a><span>|</span><label class="collapse" for="c-37401937">[-]</label><label class="expand" for="c-37401937">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;m trying to buy a car, which involves going to a bunch of dealer websites and seeing what they have in stock. Usually after checking 2-3 dealers I&#x27;ll get a Cloudflare error and can&#x27;t access any car dealer websites for a day or two (or I can keep going if I use a different browser, or just Incognito mode).<p>I guess &quot;Turnstile&quot; might be what I&#x27;m running into?</div><br/><div id="37402111" class="c"><input type="checkbox" id="c-37402111" checked=""/><div class="controls bullet"><span class="by">mtsr</span><span>|</span><a href="#37401937">parent</a><span>|</span><a href="#37402706">next</a><span>|</span><label class="collapse" for="c-37402111">[-]</label><label class="expand" for="c-37402111">[1 more]</label></div><br/><div class="children"><div class="content">I run pihole, my own DNS resolver and some other stuff and I get the cloud flare checking your browser page on every single site using cloud flare.<p>Fortunately I haven’t seen the longer blocking you mention.</div><br/></div></div></div></div><div id="37402706" class="c"><input type="checkbox" id="c-37402706" checked=""/><div class="controls bullet"><span class="by">mrieck</span><span>|</span><a href="#37401937">prev</a><span>|</span><a href="#37401836">next</a><span>|</span><label class="collapse" for="c-37402706">[-]</label><label class="expand" for="c-37402706">[1 more]</label></div><br/><div class="children"><div class="content">Cloudflare doesn’t like my VPN so I get a lot of their challenges.  Now whenever I see one I just close the tab.<p>Let’s say you run a SaaS using Cloudflare. You may be extremely happy you block 10000 bot requests for every false positive that’s a real human.  But let’s say that false positive was a potential customer that would only have paid if they weren’t blocked, and now you just saved less than a penny in server costs to lose hundreds of dollars of lifetime value from that customer.<p>Sure if you run a free service use Cloudflare.  Give in to centralizing the web more, supporting more censorship, and annoying the hell out of a ton of people in the process.  But if you’re making money, I don’t see why you wouldn’t have authentication tied to paying users for anything of value, or think of bot traffic as a cost of doing business.</div><br/></div></div><div id="37401836" class="c"><input type="checkbox" id="c-37401836" checked=""/><div class="controls bullet"><span class="by">ZiiS</span><span>|</span><a href="#37402706">prev</a><span>|</span><a href="#37401592">next</a><span>|</span><label class="collapse" for="c-37401836">[-]</label><label class="expand" for="c-37401836">[1 more]</label></div><br/><div class="children"><div class="content">This is as practical solution to a very real problem. HIBP is so valuable both the no API case, and the case where bots scrape the API reduces people&#x27;s online security.<p>However relying on the near universal behaviour tracking and fingerprinting of large corporations is extreemly worrying. The better Turnstile works the more like Google&#x27;s proposed Web Environment Integrity it becomes.<p><a href="https:&#x2F;&#x2F;www.eff.org&#x2F;deeplinks&#x2F;2023&#x2F;08&#x2F;your-computer-should-say-what-you-tell-it-say-1" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.eff.org&#x2F;deeplinks&#x2F;2023&#x2F;08&#x2F;your-computer-should-s...</a></div><br/></div></div><div id="37401592" class="c"><input type="checkbox" id="c-37401592" checked=""/><div class="controls bullet"><span class="by">krackers</span><span>|</span><a href="#37401836">prev</a><span>|</span><a href="#37402048">next</a><span>|</span><label class="collapse" for="c-37401592">[-]</label><label class="expand" for="c-37401592">[5 more]</label></div><br/><div class="children"><div class="content">&quot;Invisible&quot; assuming you have javascript enabled and use a mainstream browser. The failure mode on these is worse than regular captchas because cloudflare won&#x27;t even give you a chance to prove that you&#x27;re a human, you&#x27;ll just be stuck in a refresh loop.</div><br/><div id="37401678" class="c"><input type="checkbox" id="c-37401678" checked=""/><div class="controls bullet"><span class="by">shortcake27</span><span>|</span><a href="#37401592">parent</a><span>|</span><a href="#37401759">next</a><span>|</span><label class="collapse" for="c-37401678">[-]</label><label class="expand" for="c-37401678">[3 more]</label></div><br/><div class="children"><div class="content">Surely people who disable javascript are used to the majority of the web being broken for them. JS is an integral part of the web, regardless of how people feel about it.</div><br/><div id="37402422" class="c"><input type="checkbox" id="c-37402422" checked=""/><div class="controls bullet"><span class="by">Karellen</span><span>|</span><a href="#37401592">root</a><span>|</span><a href="#37401678">parent</a><span>|</span><a href="#37401693">next</a><span>|</span><label class="collapse" for="c-37402422">[-]</label><label class="expand" for="c-37402422">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Surely people who disable javascript are used to the majority of the web being broken for them.<p>Not really. I&#x27;d say &gt;80% of sites I visit are accessible, in that I can read the content of the page I want to look at, with javascript disabled.<p>Of the remainder, I can temporarily switch javascript back on for a tab with two clicks, if I want to read the contents enough, and I think the odds of that site having especially malicious javascript on it is slim. (e.g. mastodon instances)<p>I can also create permanent exceptions for websites in a couple of clicks too, and there are some frequently-visited sites that I have done that for.<p>Don&#x27;t think of those who disable javascript as browsing with <i>no</i> javascript. Think of it as browsing with javascript <i>disabled by default</i>.</div><br/></div></div><div id="37401693" class="c"><input type="checkbox" id="c-37401693" checked=""/><div class="controls bullet"><span class="by">throwitaway156</span><span>|</span><a href="#37401592">root</a><span>|</span><a href="#37401678">parent</a><span>|</span><a href="#37402422">prev</a><span>|</span><a href="#37401759">next</a><span>|</span><label class="collapse" for="c-37401693">[-]</label><label class="expand" for="c-37401693">[1 more]</label></div><br/><div class="children"><div class="content">it doesnt matter if you enabled it or not, you need to allow Clownflare&#x27;s guerrilla fingerprinting to be allowed access. Which is a huge downside, unless you have access to a bunch of proxy servers and the knowledge to randomize and spoof your fingerprint accurately.</div><br/></div></div></div></div><div id="37401759" class="c"><input type="checkbox" id="c-37401759" checked=""/><div class="controls bullet"><span class="by">ZiiS</span><span>|</span><a href="#37401592">parent</a><span>|</span><a href="#37401678">prev</a><span>|</span><a href="#37402048">next</a><span>|</span><label class="collapse" for="c-37401759">[-]</label><label class="expand" for="c-37401759">[1 more]</label></div><br/><div class="children"><div class="content">He implemented a fallback to a regular captcha to cover this case.</div><br/></div></div></div></div><div id="37402048" class="c"><input type="checkbox" id="c-37402048" checked=""/><div class="controls bullet"><span class="by">lionkor</span><span>|</span><a href="#37401592">prev</a><span>|</span><a href="#37402213">next</a><span>|</span><label class="collapse" for="c-37402048">[-]</label><label class="expand" for="c-37402048">[2 more]</label></div><br/><div class="children"><div class="content">That peak is around 400 req&#x2F;s, right? I would expect the usual solution to be to just rate limit each user to some reasonable limit, and then 429 if theyre over.<p>I feel like 400 req&#x2F;s should be absorbed, especially since my 5€&#x2F;month VPS can handle about 2x that, sustained. I might be missing something here, but that just doesnt seem like a peak big enough to warrant degrading user experience.<p>Sadly I&#x27;m often categorized by websites as &quot;probably a bot haha get fucked&quot;, and its lost sites hundreds or thousands of $$$ worth of revenue over the years, just from me alone.</div><br/><div id="37402597" class="c"><input type="checkbox" id="c-37402597" checked=""/><div class="controls bullet"><span class="by">nilsherzig</span><span>|</span><a href="#37402048">parent</a><span>|</span><a href="#37402213">next</a><span>|</span><label class="collapse" for="c-37402597">[-]</label><label class="expand" for="c-37402597">[1 more]</label></div><br/><div class="children"><div class="content">The backend has to search through TBs of data per request</div><br/></div></div></div></div><div id="37402213" class="c"><input type="checkbox" id="c-37402213" checked=""/><div class="controls bullet"><span class="by">SCUSKU</span><span>|</span><a href="#37402048">prev</a><span>|</span><a href="#37401593">next</a><span>|</span><label class="collapse" for="c-37402213">[-]</label><label class="expand" for="c-37402213">[2 more]</label></div><br/><div class="children"><div class="content">I am most likely misunderstanding this, but why can&#x27;t you just use browser automation to then generate the turnstile token? For example, just use Playwright&#x2F;Selenium&#x2F;Phantom to generate the token and then use that in an API call?<p>Otherwise, great write-up! And excellent service!</div><br/><div id="37402467" class="c"><input type="checkbox" id="c-37402467" checked=""/><div class="controls bullet"><span class="by">ahofmann</span><span>|</span><a href="#37402213">parent</a><span>|</span><a href="#37401593">next</a><span>|</span><label class="collapse" for="c-37402467">[-]</label><label class="expand" for="c-37402467">[1 more]</label></div><br/><div class="children"><div class="content">This will cost you time and most likely money. And that&#x27;s stopping a lot of attackers.<p>And if you don&#x27;t stop them, you at least slowed them down big time. This could also be enough to make the attack useless.</div><br/></div></div></div></div><div id="37401593" class="c"><input type="checkbox" id="c-37401593" checked=""/><div class="controls bullet"><span class="by">1vuio0pswjnm7</span><span>|</span><a href="#37402213">prev</a><span>|</span><a href="#37401631">next</a><span>|</span><label class="collapse" for="c-37401593">[-]</label><label class="expand" for="c-37401593">[25 more]</label></div><br/><div class="children"><div class="content">&quot;Which poses an interesting question: how do you create an API that should only be consumed asynchronously from a web page and never programmatically via a script?&quot;<p>Web developers use JavaScripts to make HTTP requests to API endpoints.  The data is being consumed by a script, programmatically.  Unless Javascripts are neither scripts nor programs.  Good luck with that argument.<p>There is a W3C TAG Ethical Web Principle that states web users can conusme and display data from the web any way they like.  They do not need to use, for example, a particular software or a particular web page design.<p>2.12 People should be able to render web content as they want<p>People must be able to change web pages according to their needs. For example, people should be able to install style sheets, assistive browser extensions, and blockers of unwanted content or scripts or auto-played videos. We will build features and write specifications that respect peoples&#x27; agency, and will create user agents to represent those preferences on the web user&#x27;s behalf.<p>With respect to the JavaScripts authored by web developers and inlined&#x2F;sourced in web pages, web users have no control over them short of blocking them outright.  As such, arguably they are not ideal for making HTTP requests to API endpoints.  Unfortunately these scripts can be, and are, used to deny web users&#x27; agency.</div><br/><div id="37401624" class="c"><input type="checkbox" id="c-37401624" checked=""/><div class="controls bullet"><span class="by">andersa</span><span>|</span><a href="#37401593">parent</a><span>|</span><a href="#37402259">next</a><span>|</span><label class="collapse" for="c-37401624">[-]</label><label class="expand" for="c-37401624">[17 more]</label></div><br/><div class="children"><div class="content">Who cares?<p>He wants to provide a free service, which he is not obligated to do and costs money for him to do, for individuals to check their email. He never intended for bots to check a billion emails, and obviously doesn&#x27;t want to pay for that.<p>That should be respected, and people failing to respect it is why we see the destruction of the open web with things like remote attestation as the only way forward.<p>Complaints like &quot;but the open web&quot; or &quot;but my exotic browser&quot; are honestly worth nothing against a potential solution for a real, pressing issue like spam requests and bots - if we want to keep the nice things we better start coming up with alternative solutions to the real problem, because corporations will decide the future for us if we don&#x27;t. Ignoring it will not work out for us.</div><br/><div id="37401831" class="c"><input type="checkbox" id="c-37401831" checked=""/><div class="controls bullet"><span class="by">CameronNemo</span><span>|</span><a href="#37401593">root</a><span>|</span><a href="#37401624">parent</a><span>|</span><a href="#37401862">next</a><span>|</span><label class="collapse" for="c-37401831">[-]</label><label class="expand" for="c-37401831">[2 more]</label></div><br/><div class="children"><div class="content">OK, but remote attestation isn&#x27;t really a thing on the web (right now). And you can script a browser UI, anyway.<p>The point is to not get hung up on the client as a security boundary (it isn&#x27;t, can&#x27;t be, won&#x27;t be), but to focus on the actual harm -- excessive use of the limited resources provided.<p>And you have to frame your security posture as rooted in the server side throttling, heuristics, et cetera. Flipping out because the client isn&#x27;t what you expected isn&#x27;t going to help (determined attackers can look like &quot;vanilla&quot; clients), and is just going to harm the long tail of actual users who are not bots.</div><br/><div id="37402043" class="c"><input type="checkbox" id="c-37402043" checked=""/><div class="controls bullet"><span class="by">true_religion</span><span>|</span><a href="#37401593">root</a><span>|</span><a href="#37401831">parent</a><span>|</span><a href="#37401862">next</a><span>|</span><label class="collapse" for="c-37402043">[-]</label><label class="expand" for="c-37402043">[1 more]</label></div><br/><div class="children"><div class="content">It will also harm the short tail of bots who aren’t run by dedicated attackers.</div><br/></div></div></div></div><div id="37401862" class="c"><input type="checkbox" id="c-37401862" checked=""/><div class="controls bullet"><span class="by">davidspiess</span><span>|</span><a href="#37401593">root</a><span>|</span><a href="#37401624">parent</a><span>|</span><a href="#37401831">prev</a><span>|</span><a href="#37401957">next</a><span>|</span><label class="collapse" for="c-37401862">[-]</label><label class="expand" for="c-37401862">[5 more]</label></div><br/><div class="children"><div class="content">I agree. Our public APIs are also massively queried. The number of queries is out of proportion to the legitimate traffic. Rate-Limiting does not work, because of the volume of different ips they send against you in parallel. Our servers are not designed for such peaks. What other choice do we have but to block them.</div><br/><div id="37401918" class="c"><input type="checkbox" id="c-37401918" checked=""/><div class="controls bullet"><span class="by">afandian</span><span>|</span><a href="#37401593">root</a><span>|</span><a href="#37401862">parent</a><span>|</span><a href="#37401957">next</a><span>|</span><label class="collapse" for="c-37401918">[-]</label><label class="expand" for="c-37401918">[4 more]</label></div><br/><div class="children"><div class="content">Did you consider API keys? Via email? That’s at least a natural throttle.</div><br/><div id="37402088" class="c"><input type="checkbox" id="c-37402088" checked=""/><div class="controls bullet"><span class="by">davidspiess</span><span>|</span><a href="#37401593">root</a><span>|</span><a href="#37401918">parent</a><span>|</span><a href="#37401957">next</a><span>|</span><label class="collapse" for="c-37402088">[-]</label><label class="expand" for="c-37402088">[3 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a public price API. There is no authentication required to list prices.</div><br/><div id="37402207" class="c"><input type="checkbox" id="c-37402207" checked=""/><div class="controls bullet"><span class="by">switch007</span><span>|</span><a href="#37401593">root</a><span>|</span><a href="#37402088">parent</a><span>|</span><a href="#37401957">next</a><span>|</span><label class="collapse" for="c-37402207">[-]</label><label class="expand" for="c-37402207">[2 more]</label></div><br/><div class="children"><div class="content">Host a static json file?</div><br/><div id="37402302" class="c"><input type="checkbox" id="c-37402302" checked=""/><div class="controls bullet"><span class="by">ukuina</span><span>|</span><a href="#37401593">root</a><span>|</span><a href="#37402207">parent</a><span>|</span><a href="#37401957">next</a><span>|</span><label class="collapse" for="c-37402302">[-]</label><label class="expand" for="c-37402302">[1 more]</label></div><br/><div class="children"><div class="content">Preferably on a provider with no egress fees.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="37401957" class="c"><input type="checkbox" id="c-37401957" checked=""/><div class="controls bullet"><span class="by">mschuster91</span><span>|</span><a href="#37401593">root</a><span>|</span><a href="#37401624">parent</a><span>|</span><a href="#37401862">prev</a><span>|</span><a href="#37402035">next</a><span>|</span><label class="collapse" for="c-37401957">[-]</label><label class="expand" for="c-37401957">[1 more]</label></div><br/><div class="children"><div class="content">&gt; if we want to keep the nice things we better start coming up with alternative solutions to the real problem<p>Indeed. To state the obvious: the real problem are bad actors - no matter if they are nation states, cybercriminals or people running compromised devices - and their accomplices such as ISPs not responding to abuse reports.<p>As long as we don&#x27;t get that under control (say, by threatening to cut offender countries and ISPs from the Internet and SS7 phone networks) we&#x27;ll have to continue whack-a-mole&#x27;ing.</div><br/></div></div><div id="37402035" class="c"><input type="checkbox" id="c-37402035" checked=""/><div class="controls bullet"><span class="by">outofpaper</span><span>|</span><a href="#37401593">root</a><span>|</span><a href="#37401624">parent</a><span>|</span><a href="#37401957">prev</a><span>|</span><a href="#37401755">next</a><span>|</span><label class="collapse" for="c-37402035">[-]</label><label class="expand" for="c-37402035">[3 more]</label></div><br/><div class="children"><div class="content">I still don&#x27;t get why not just implement some basic usage rate limiting. Go two fold limit the rate to 2x or 3x the fastest they can manually use the service and limit users to only being able to burst like that for a bit.<p>You&#x27;re going to have zero horid scraping once that&#x27;s in place.</div><br/><div id="37402047" class="c"><input type="checkbox" id="c-37402047" checked=""/><div class="controls bullet"><span class="by">andersa</span><span>|</span><a href="#37401593">root</a><span>|</span><a href="#37402035">parent</a><span>|</span><a href="#37402418">next</a><span>|</span><label class="collapse" for="c-37402047">[-]</label><label class="expand" for="c-37402047">[1 more]</label></div><br/><div class="children"><div class="content">Because it doesn&#x27;t work. Malicious users can circumvent the rate limiting by using botnets. If requests were somehow tied to the identity of the human operator rather than the particular computer they used, then yes, rate limiting would be all we need.</div><br/></div></div><div id="37402418" class="c"><input type="checkbox" id="c-37402418" checked=""/><div class="controls bullet"><span class="by">Kiro</span><span>|</span><a href="#37401593">root</a><span>|</span><a href="#37402035">parent</a><span>|</span><a href="#37402047">prev</a><span>|</span><a href="#37401755">next</a><span>|</span><label class="collapse" for="c-37402418">[-]</label><label class="expand" for="c-37402418">[1 more]</label></div><br/><div class="children"><div class="content">That doesn&#x27;t solve the problem with bots in games. They are not hammering the API, they are automating things that shouldn&#x27;t be automated and drives away non-bot players.</div><br/></div></div></div></div><div id="37401755" class="c"><input type="checkbox" id="c-37401755" checked=""/><div class="controls bullet"><span class="by">ZiiS</span><span>|</span><a href="#37401593">root</a><span>|</span><a href="#37401624">parent</a><span>|</span><a href="#37402035">prev</a><span>|</span><a href="#37402259">next</a><span>|</span><label class="collapse" for="c-37401755">[-]</label><label class="expand" for="c-37401755">[5 more]</label></div><br/><div class="children"><div class="content">It often costs far more then money. In the this case bots were gaining data to better target future attacks. In the common spam case it costs real user&#x27;s attention.</div><br/><div id="37401826" class="c"><input type="checkbox" id="c-37401826" checked=""/><div class="controls bullet"><span class="by">andersa</span><span>|</span><a href="#37401593">root</a><span>|</span><a href="#37401755">parent</a><span>|</span><a href="#37402259">next</a><span>|</span><label class="collapse" for="c-37401826">[-]</label><label class="expand" for="c-37401826">[4 more]</label></div><br/><div class="children"><div class="content">There definitely is an alternative solution here that preserves people&#x27;s freedom to use whatever browser they want, but I&#x27;m not sure if anyone would like it.<p>Web services are intended for humans to use them, and all abuse also ultimately comes from humans directing computers to be abusive. Thus, rather than attaching a computer&#x27;s temporary identity (an IP address) to the request, we should be attaching a human identity to it. Note here, that I don&#x27;t care whether the request comes from John Smith in New York. I care about being able to ban you from the service if you are abusive, no matter how many computers you have at your disposal now or in the future.<p>There&#x27;s lots of downsides I haven&#x27;t got solutions for, such as, how do we stop sites cross referencing to reliably discover all users real identities (Google analytics would love this!), and so much more. But we&#x27;ll have to give up something - if we do nothing we give up everything, maybe giving up only absolute anonymity could be preferred.</div><br/><div id="37401978" class="c"><input type="checkbox" id="c-37401978" checked=""/><div class="controls bullet"><span class="by">CameronNemo</span><span>|</span><a href="#37401593">root</a><span>|</span><a href="#37401826">parent</a><span>|</span><a href="#37402259">next</a><span>|</span><label class="collapse" for="c-37401978">[-]</label><label class="expand" for="c-37401978">[3 more]</label></div><br/><div class="children"><div class="content">IP reputation doesn&#x27;t seem to be much of a thing right now, but it might be the only way forward for a spyware-free web.<p>You can have a group of people sharing a block and collectively responding to abuse reports to slightly improve privacy. That at least shields you somewhat from the big tech firms.<p>Essentially a large number of virtual private micro-ISPs.</div><br/><div id="37402521" class="c"><input type="checkbox" id="c-37402521" checked=""/><div class="controls bullet"><span class="by">kmlx</span><span>|</span><a href="#37401593">root</a><span>|</span><a href="#37401978">parent</a><span>|</span><a href="#37402546">next</a><span>|</span><label class="collapse" for="c-37402521">[-]</label><label class="expand" for="c-37402521">[1 more]</label></div><br/><div class="children"><div class="content">&gt; IP reputation doesn&#x27;t seem to be much of a thing right now<p>disclaimer: acquaintance works in the spam business. someone i tried to steer clear of, but was fascinated of what they told me.<p>IP reputation is a huge thing in the spam world. they pay top dollar for residential US&#x2F;UK&#x2F;etc IPs which they can then use for spamming others. and we&#x27;re not talking one or two IPs. we&#x27;re talking 100s of thousands of IPs being transacted daily globally. all for spam.<p>for anyone interested in seeing how low we&#x27;ve come, they have a huge convention in Las Vegas. one should visit it to better understand a field that has been growing like crazy but so few know it. apparently everyone is preparing for a big boom next year, with 10s of $B ready to be deployed.</div><br/></div></div><div id="37402546" class="c"><input type="checkbox" id="c-37402546" checked=""/><div class="controls bullet"><span class="by">andersa</span><span>|</span><a href="#37401593">root</a><span>|</span><a href="#37401978">parent</a><span>|</span><a href="#37402521">prev</a><span>|</span><a href="#37402259">next</a><span>|</span><label class="collapse" for="c-37402546">[-]</label><label class="expand" for="c-37402546">[1 more]</label></div><br/><div class="children"><div class="content">IP reputation is absolutely a thing, as I understand it it&#x27;s a large factor in Cloudflare deciding to put you in an infinite loop (or trigger the protection at all).</div><br/></div></div></div></div></div></div></div></div></div></div><div id="37402259" class="c"><input type="checkbox" id="c-37402259" checked=""/><div class="controls bullet"><span class="by">PennRobotics</span><span>|</span><a href="#37401593">parent</a><span>|</span><a href="#37401624">prev</a><span>|</span><a href="#37402440">next</a><span>|</span><label class="collapse" for="c-37402259">[-]</label><label class="expand" for="c-37402259">[4 more]</label></div><br/><div class="children"><div class="content">I asked an online shop I frequent if they have an API, as they discount some inventory sometimes, to which they responded there is no public API. It&#x27;s easy enough to find (using Inspect-&gt;Network-&gt;XHR) how they serve data, and with just five minutes of work, their raw JSON can be loaded in Python and polled for specific brands&#x2F;categories&#x2F;individual products, including anything flagged for a discount.<p>Programmatic? Yes. Against their wishes? Also, yes.<p>The guilt or bad feelings subsided after realizing I&#x27;ll use more of their bandwidth how I was searching before via the browser. Using the API, I see when the last inventory update occurred, and only after this will I search their discount inventory.<p>(In any case, if they are on EC2, I cost them 3 to 8 cents per month, estimating high, which they have certainly recouped.)</div><br/><div id="37402551" class="c"><input type="checkbox" id="c-37402551" checked=""/><div class="controls bullet"><span class="by">1vuio0pswjnm7</span><span>|</span><a href="#37401593">root</a><span>|</span><a href="#37402259">parent</a><span>|</span><a href="#37402534">next</a><span>|</span><label class="collapse" for="c-37402551">[-]</label><label class="expand" for="c-37402551">[1 more]</label></div><br/><div class="children"><div class="content">More efficient.<p>They could (incorrectly) call you a &quot;bot&quot; but that&#x27;s simply not true.  You are human.<p>The amount of server resources you deplete is actually <i>less</i> than a modern graphical browser from an ad-sponsored team of software developers.<p>However perhaps you are not looking at some ads or submitting yourself to tracking or telemetry.  Under the W3C web ethics principles you can consume the data from the web in any way you like.<p>It is your right to decide what HTTP requests you make.  XHR&#x2F;fetch in someone else&#x27;s Javascript could be well-intentioned but too often it tries to take away some of that agency and transfer it to a web developer.</div><br/></div></div><div id="37402492" class="c"><input type="checkbox" id="c-37402492" checked=""/><div class="controls bullet"><span class="by">olig15</span><span>|</span><a href="#37401593">root</a><span>|</span><a href="#37402259">parent</a><span>|</span><a href="#37402534">prev</a><span>|</span><a href="#37402440">next</a><span>|</span><label class="collapse" for="c-37402492">[-]</label><label class="expand" for="c-37402492">[1 more]</label></div><br/><div class="children"><div class="content">Why have bad feelings at all. It’s a shop, and I’m assuming the end goal of you looking for discounts is to make purchases from that store?</div><br/></div></div></div></div><div id="37402440" class="c"><input type="checkbox" id="c-37402440" checked=""/><div class="controls bullet"><span class="by">Kiro</span><span>|</span><a href="#37401593">parent</a><span>|</span><a href="#37402259">prev</a><span>|</span><a href="#37402444">next</a><span>|</span><label class="collapse" for="c-37402440">[-]</label><label class="expand" for="c-37402440">[1 more]</label></div><br/><div class="children"><div class="content">What about botting in games? It&#x27;s something that almost everyone is against so it&#x27;s clear that the general opinion is not aligned with the W3C TAG Ethical Web Principle there.<p>I&#x27;ve seen many games die due to bots. If developers just straight-up allow them all the normal players quit.</div><br/></div></div><div id="37402444" class="c"><input type="checkbox" id="c-37402444" checked=""/><div class="controls bullet"><span class="by">raverbashing</span><span>|</span><a href="#37401593">parent</a><span>|</span><a href="#37402440">prev</a><span>|</span><a href="#37402503">next</a><span>|</span><label class="collapse" for="c-37402444">[-]</label><label class="expand" for="c-37402444">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Javascripts<p>&gt; 2.12 People should be able to render web content as they want<p>Yes, the choice between Chrome&#x2F;FF&#x2F;Safari&#x2F;Lynx or some other remains<p>Any discussion not discussing how to deal with abusers is moot</div><br/></div></div></div></div><div id="37401631" class="c"><input type="checkbox" id="c-37401631" checked=""/><div class="controls bullet"><span class="by">nicoboo</span><span>|</span><a href="#37401593">prev</a><span>|</span><a href="#37401990">next</a><span>|</span><label class="collapse" for="c-37401631">[-]</label><label class="expand" for="c-37401631">[1 more]</label></div><br/><div class="children"><div class="content">Really interesting article and details, we are in similar cases, I would definitely consider such implementation and we&#x27;ll also look at alternatives to Cloudflare.<p>Thanks you Troy for writing and sharing your experience.</div><br/></div></div><div id="37401990" class="c"><input type="checkbox" id="c-37401990" checked=""/><div class="controls bullet"><span class="by">cinntaile</span><span>|</span><a href="#37401631">prev</a><span>|</span><a href="#37401895">next</a><span>|</span><label class="collapse" for="c-37401990">[-]</label><label class="expand" for="c-37401990">[1 more]</label></div><br/><div class="children"><div class="content">This was posted last week. It still reads like an ad and it very likely is one.</div><br/></div></div><div id="37401895" class="c"><input type="checkbox" id="c-37401895" checked=""/><div class="controls bullet"><span class="by">neonate</span><span>|</span><a href="#37401990">prev</a><span>|</span><a href="#37401882">next</a><span>|</span><label class="collapse" for="c-37401895">[-]</label><label class="expand" for="c-37401895">[2 more]</label></div><br/><div class="children"><div class="content">Did I miss something? I don&#x27;t understand what the &quot;non-interactive challenge&quot; is here:<p>&gt; The widget takes responsibility for running the non-interactive challenge and returning a token<p>I get that a widget can return a token and then you trust the token and do the rest. But what determines whether a caller receives a tokens or not? That is, what&#x27;s the actual challenge? That is, how is the distinction between bot vs. real human user actually getting decided?</div><br/><div id="37402078" class="c"><input type="checkbox" id="c-37402078" checked=""/><div class="controls bullet"><span class="by">allisdust</span><span>|</span><a href="#37401895">parent</a><span>|</span><a href="#37401882">next</a><span>|</span><label class="collapse" for="c-37402078">[-]</label><label class="expand" for="c-37402078">[1 more]</label></div><br/><div class="children"><div class="content">Probably a form of proof of work which is costly for the bots but fair on normal users (combined with normal fingerprinting and IP check which determines how hard the challenge should be for a request)</div><br/></div></div></div></div><div id="37401882" class="c"><input type="checkbox" id="c-37401882" checked=""/><div class="controls bullet"><span class="by">ytch</span><span>|</span><a href="#37401895">prev</a><span>|</span><a href="#37401811">next</a><span>|</span><label class="collapse" for="c-37401882">[-]</label><label class="expand" for="c-37401882">[1 more]</label></div><br/><div class="children"><div class="content">I encountered a similar problem at work recently. The first thing come to my mind is CSRF. But it can be bypassed by parsing the token in HTML.<p>Then I found this article[1]. Embedding a challenging with valid time in Javascript, calculating the response by obfuscated Javascript code.<p>[1] &quot;Bypassing YouTube video download throttling&quot; <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=37117338">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=37117338</a></div><br/></div></div><div id="37401811" class="c"><input type="checkbox" id="c-37401811" checked=""/><div class="controls bullet"><span class="by">politelemon</span><span>|</span><a href="#37401882">prev</a><span>|</span><a href="#37402730">next</a><span>|</span><label class="collapse" for="c-37401811">[-]</label><label class="expand" for="c-37401811">[1 more]</label></div><br/><div class="children"><div class="content">The concept makes sense to me, it&#x27;s reminiscent of hmac, but with the additional constraint that the &quot;secret&quot; key is in the open. And the server side verification is opaque so you have to hope it works. But I like that it&#x27;s not captcha which has made web browsing worse over the years<p>I&#x27;m curious to know if there have been similar open source implementations of turnstile where website operators have found ways of limiting an API call to just a browser, without captcha. Does anyone know of any?</div><br/></div></div><div id="37402730" class="c"><input type="checkbox" id="c-37402730" checked=""/><div class="controls bullet"><span class="by">hkt</span><span>|</span><a href="#37401811">prev</a><span>|</span><a href="#37401885">next</a><span>|</span><label class="collapse" for="c-37402730">[-]</label><label class="expand" for="c-37402730">[1 more]</label></div><br/><div class="children"><div class="content">My isp uses cgnat, so I see these all the time. The two tier internet is here and I hate it.</div><br/></div></div><div id="37401885" class="c"><input type="checkbox" id="c-37401885" checked=""/><div class="controls bullet"><span class="by">buro9</span><span>|</span><a href="#37402730">prev</a><span>|</span><a href="#37401619">next</a><span>|</span><label class="collapse" for="c-37401885">[-]</label><label class="expand" for="c-37401885">[1 more]</label></div><br/><div class="children"><div class="content">Just put in a multi second delay to _all_ requests to that API, humans wait but this costs bots and slows the aggregate progress.<p>Add HTTP headers documenting the API you want them to use as a bot author will look and wonder why it&#x27;s performing so badly.<p>The difference between human speed and computer speed is so noticeable that it can be leveraged... No high bar or complex adversarial solution needed, and the side benefit is that if a bot does persist it spreads the load.</div><br/></div></div><div id="37401619" class="c"><input type="checkbox" id="c-37401619" checked=""/><div class="controls bullet"><span class="by">fswd</span><span>|</span><a href="#37401885">prev</a><span>|</span><a href="#37401935">next</a><span>|</span><label class="collapse" for="c-37401619">[-]</label><label class="expand" for="c-37401619">[5 more]</label></div><br/><div class="children"><div class="content">Recently fighting with bots in a different situation. I discovered you can return code &quot;466&quot; in nginx, which is a special code that completely disconnects the TCP session.</div><br/><div id="37401668" class="c"><input type="checkbox" id="c-37401668" checked=""/><div class="controls bullet"><span class="by">nicoboo</span><span>|</span><a href="#37401619">parent</a><span>|</span><a href="#37402079">next</a><span>|</span><label class="collapse" for="c-37401668">[-]</label><label class="expand" for="c-37401668">[2 more]</label></div><br/><div class="children"><div class="content">466 vs transparently slow the response (exponential throttling)? To avoid having auto reconnecting behavior? Maybe both.</div><br/><div id="37401931" class="c"><input type="checkbox" id="c-37401931" checked=""/><div class="controls bullet"><span class="by">tlavoie</span><span>|</span><a href="#37401619">root</a><span>|</span><a href="#37401668">parent</a><span>|</span><a href="#37402079">next</a><span>|</span><label class="collapse" for="c-37401931">[-]</label><label class="expand" for="c-37401931">[1 more]</label></div><br/><div class="children"><div class="content">Like a Slow Loris attack, but from the server side? I like it!
I&#x27;ve been using a mostly-Apache setup for ages, but thinking about how it might be fun to implement something lightweight for my VPS, that includes a variety of ways to mess with those sending unwanted requests. I suppose ModSecurity could get me most of the way there without having to reinvent everything.</div><br/></div></div></div></div><div id="37402079" class="c"><input type="checkbox" id="c-37402079" checked=""/><div class="controls bullet"><span class="by">tedunangst</span><span>|</span><a href="#37401619">parent</a><span>|</span><a href="#37401668">prev</a><span>|</span><a href="#37401935">next</a><span>|</span><label class="collapse" for="c-37402079">[-]</label><label class="expand" for="c-37402079">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s 444.</div><br/><div id="37402413" class="c"><input type="checkbox" id="c-37402413" checked=""/><div class="controls bullet"><span class="by">fswd</span><span>|</span><a href="#37401619">root</a><span>|</span><a href="#37402079">parent</a><span>|</span><a href="#37401935">next</a><span>|</span><label class="collapse" for="c-37402413">[-]</label><label class="expand" for="c-37402413">[1 more]</label></div><br/><div class="children"><div class="content">sh*t my bad</div><br/></div></div></div></div></div></div><div id="37401935" class="c"><input type="checkbox" id="c-37401935" checked=""/><div class="controls bullet"><span class="by">wewxjfq</span><span>|</span><a href="#37401619">prev</a><span>|</span><a href="#37402068">next</a><span>|</span><label class="collapse" for="c-37401935">[-]</label><label class="expand" for="c-37401935">[1 more]</label></div><br/><div class="children"><div class="content">&gt; the unsolved challenges are when the Turnstile widget is loaded but not solved (hopefully due to it being a bot rather than a false positive)<p>So people employ these measure and have no clue whom they filter. Reminds me of the online shops who block you because you click on the products too fast. Congratulations, you lost a customer to keep the CPU utilization at 20%.</div><br/></div></div><div id="37402068" class="c"><input type="checkbox" id="c-37402068" checked=""/><div class="controls bullet"><span class="by">hoseja</span><span>|</span><a href="#37401935">prev</a><span>|</span><label class="collapse" for="c-37402068">[-]</label><label class="expand" for="c-37402068">[2 more]</label></div><br/><div class="children"><div class="content">Not a fan of nasty fingerprinting tricks honestly.</div><br/><div id="37402490" class="c"><input type="checkbox" id="c-37402490" checked=""/><div class="controls bullet"><span class="by">kurtoid</span><span>|</span><a href="#37402068">parent</a><span>|</span><label class="collapse" for="c-37402490">[-]</label><label class="expand" for="c-37402490">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s feels more like they&#x27;re cavity-searching your browser, not just fingerprinting</div><br/></div></div></div></div></div></div></div></div></div></body></html>