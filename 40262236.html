<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1714899712614" as="style"/><link rel="stylesheet" href="styles.css?v=1714899712614"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://yuanchuan.dev/time-based-css-animations">Time-Based CSS Animations</a> <span class="domain">(<a href="https://yuanchuan.dev">yuanchuan.dev</a>)</span></div><div class="subtext"><span>spirit23</span> | <span>14 comments</span></div><br/><div><div id="40263253" class="c"><input type="checkbox" id="c-40263253" checked=""/><div class="controls bullet"><span class="by">silvestrov</span><span>|</span><a href="#40262655">next</a><span>|</span><label class="collapse" for="c-40263253">[-]</label><label class="expand" for="c-40263253">[1 more]</label></div><br/><div class="children"><div class="content">The animation at the bottom of the page is very impressive.  It looks very much like a &lt;video&gt; rather than &lt;div&gt; elements.</div><br/></div></div><div id="40262655" class="c"><input type="checkbox" id="c-40262655" checked=""/><div class="controls bullet"><span class="by">nikisweeting</span><span>|</span><a href="#40263253">prev</a><span>|</span><a href="#40262942">next</a><span>|</span><label class="collapse" for="c-40262655">[-]</label><label class="expand" for="c-40262655">[3 more]</label></div><br/><div class="children"><div class="content">I also recommend using negative animation delay values if you want to control the progress via JS.<p>e.g. animation-delay: -1500ms will begin the animation immediately but jump to 1.5s into the animation. Controlling this value with JS lets you effectively scrub through CSS animations via JS, making every animation compatible with game-engine style compute-update-render tick loops.<p><a href="https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;CSS&#x2F;animation-delay" rel="nofollow">https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;CSS&#x2F;animation-d...</a></div><br/><div id="40262690" class="c"><input type="checkbox" id="c-40262690" checked=""/><div class="controls bullet"><span class="by">9dev</span><span>|</span><a href="#40262655">parent</a><span>|</span><a href="#40262942">next</a><span>|</span><label class="collapse" for="c-40262690">[-]</label><label class="expand" for="c-40262690">[2 more]</label></div><br/><div class="children"><div class="content">That should also enable iOS style, scroll-offset bound animations, right?</div><br/><div id="40262996" class="c"><input type="checkbox" id="c-40262996" checked=""/><div class="controls bullet"><span class="by">nikisweeting</span><span>|</span><a href="#40262655">root</a><span>|</span><a href="#40262690">parent</a><span>|</span><a href="#40262942">next</a><span>|</span><label class="collapse" for="c-40262996">[-]</label><label class="expand" for="c-40262996">[1 more]</label></div><br/><div class="children"><div class="content">Yeah you can do tons of interaction-dependent stuff without losing the GPU-accelerated nature and declarative style of CSS animations.<p>We built a high performance animation library on this concept:
<a href="https:&#x2F;&#x2F;github.com&#x2F;Monadical-SAS&#x2F;redux-time">https:&#x2F;&#x2F;github.com&#x2F;Monadical-SAS&#x2F;redux-time</a></div><br/></div></div></div></div></div></div><div id="40262942" class="c"><input type="checkbox" id="c-40262942" checked=""/><div class="controls bullet"><span class="by">TekMol</span><span>|</span><a href="#40262655">prev</a><span>|</span><a href="#40262955">next</a><span>|</span><label class="collapse" for="c-40262942">[-]</label><label class="expand" for="c-40262942">[6 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>    CSS now has enough Math functions supported,
    particularly mod(), round(), and trigonometric
    functions

    CSS can not start a timer like JavaScript does,
    but nowadays it&#x27;s possible to define a custom
    variable with the CSS Houdini API to track time
    in milliseconds. 
</code></pre>
Why do we need all this when we have JavaScript?<p>Shouldn&#x27;t the drawing layer be concerned with drawing primitives? Why put more and more of the higher layers into it?</div><br/><div id="40263267" class="c"><input type="checkbox" id="c-40263267" checked=""/><div class="controls bullet"><span class="by">onion2k</span><span>|</span><a href="#40262942">parent</a><span>|</span><a href="#40263140">next</a><span>|</span><label class="collapse" for="c-40263267">[-]</label><label class="expand" for="c-40263267">[1 more]</label></div><br/><div class="children"><div class="content">Regardless of anything else, JS is a single thread (mostly, there are workers of course) so anything you can do to offload work somewhere else is a good thing for keeping the UI running at a solid frame rate.</div><br/></div></div><div id="40263140" class="c"><input type="checkbox" id="c-40263140" checked=""/><div class="controls bullet"><span class="by">joestrong</span><span>|</span><a href="#40262942">parent</a><span>|</span><a href="#40263267">prev</a><span>|</span><a href="#40263212">next</a><span>|</span><label class="collapse" for="c-40263140">[-]</label><label class="expand" for="c-40263140">[2 more]</label></div><br/><div class="children"><div class="content">Don&#x27;t forget that CSS animations are hardware accelerated. If you&#x27;re doing trig in JS for animations, you&#x27;re probably also manipulating the DOM to update the UI every millisecond, which is very expensive</div><br/><div id="40263231" class="c"><input type="checkbox" id="c-40263231" checked=""/><div class="controls bullet"><span class="by">mattgperry</span><span>|</span><a href="#40262942">root</a><span>|</span><a href="#40263140">parent</a><span>|</span><a href="#40263212">next</a><span>|</span><label class="collapse" for="c-40263231">[-]</label><label class="expand" for="c-40263231">[1 more]</label></div><br/><div class="children"><div class="content">Most CSS animations aren&#x27;t hardware accelerated. Only a few values like opacity and transform.<p>Updating the DOM (as in innerHTML) is always expensive because it triggers layout. This is true whether you&#x27;re doing it from JS or a CSS trick like on this page.<p>Finally this approach is using CSS custom properties. These are slow - slower than JS for most things.<p>If you stop all animations on this page and profile it via Chrome you can see this in effect. The root node is animating a CSS variable. 117 elements have their style recalculated. Every frame - yet no animations are running. There&#x27;s also a tiny paint triggered too, obviously there&#x27;s been no changes so it is tiny in this instance, but a paint is always triggered when a CSS variable updates.<p>This is why animating x and y separately via CSS and a style like `translate(var(--x) var(--y))` would be worse than animating them via JS ala Framer Motion&#x2F;GSAP.</div><br/></div></div></div></div><div id="40263212" class="c"><input type="checkbox" id="c-40263212" checked=""/><div class="controls bullet"><span class="by">tuyiown</span><span>|</span><a href="#40262942">parent</a><span>|</span><a href="#40263140">prev</a><span>|</span><a href="#40262984">next</a><span>|</span><label class="collapse" for="c-40263212">[-]</label><label class="expand" for="c-40263212">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Shouldn&#x27;t the drawing layer be concerned with drawing primitives?<p>CSS is not a drawing layer. The drawing is driven by the DOM, either setup by HTML or updated through JS. CSS only piggyback on it by giving parameters to the painting engine about what to do with dom, essentially overriding the defaults parameters. You can add dom blocks, modify positioning behavior with complex algorithms, even margins are not really trivial.<p>I don&#x27;t think this is a great solution, but people started this to be able to modify colors during dom rendering  without having to update their HTML code, probably because updating HTML code was not fun at all, but I really think the wrong problem was addressed. Those were the «webmaster» times, so there&#x27;s also that.</div><br/></div></div><div id="40262984" class="c"><input type="checkbox" id="c-40262984" checked=""/><div class="controls bullet"><span class="by">toxik</span><span>|</span><a href="#40262942">parent</a><span>|</span><a href="#40263212">prev</a><span>|</span><a href="#40262955">next</a><span>|</span><label class="collapse" for="c-40262984">[-]</label><label class="expand" for="c-40262984">[1 more]</label></div><br/><div class="children"><div class="content">Just wait until we have WebSockets in CSS!<p>Jokes aside, CSS is declarative and while there is overlap between problems solvable by JS and CSS, I think that’s only natural.<p>I’m actually really excited for all the new features added to CSS lately, less interpreted code is better.</div><br/></div></div></div></div><div id="40262955" class="c"><input type="checkbox" id="c-40262955" checked=""/><div class="controls bullet"><span class="by">ulrischa</span><span>|</span><a href="#40262942">prev</a><span>|</span><a href="#40262763">next</a><span>|</span><label class="collapse" for="c-40262955">[-]</label><label class="expand" for="c-40262955">[1 more]</label></div><br/><div class="children"><div class="content">Very impressive. But somehow I think we just reached the point coming close to what we were able to do with flash decades before.
I do not want flash back but a more user friendly tool to create css animations. If somebody knows any I would be glad.</div><br/></div></div><div id="40262763" class="c"><input type="checkbox" id="c-40262763" checked=""/><div class="controls bullet"><span class="by">GalaxyNova</span><span>|</span><a href="#40262955">prev</a><span>|</span><label class="collapse" for="c-40262763">[-]</label><label class="expand" for="c-40262763">[2 more]</label></div><br/><div class="children"><div class="content">Whatever you&#x27;re doing isn&#x27;t working on Firefox.<p>Edit: Just read the disclaimer, whoops!</div><br/></div></div></div></div></div></div></div></body></html>