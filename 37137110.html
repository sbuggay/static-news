<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1692176461062" as="style"/><link rel="stylesheet" href="styles.css?v=1692176461062"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://blog.redplanetlabs.com/2023/08/15/how-we-reduced-the-cost-of-building-twitter-at-twitter-scale-by-100x/">We reduced the cost of building Mastodon at Twitter-scale by 100x</a> <span class="domain">(<a href="https://blog.redplanetlabs.com">blog.redplanetlabs.com</a>)</span></div><div class="subtext"><span>tekacs</span> | <span>206 comments</span></div><br/><div><div id="37138938" class="c"><input type="checkbox" id="c-37138938" checked=""/><div class="controls bullet"><span class="by">RomanPushkin</span><span>|</span><a href="#37139356">next</a><span>|</span><label class="collapse" for="c-37138938">[-]</label><label class="expand" for="c-37138938">[34 more]</label></div><br/><div class="children"><div class="content">&gt; ...10k lines of code. This is 100x less code than the ~1M lines Twitter<p>I wish I didn&#x27;t see this comparison, which is not fair at all. Everyone in their right mind understands that the number of features is much less, that&#x27;s why you have 10k lines.<p>Add large-scale distributed live video support at the top of that, and you won&#x27;t get any close to 10k lines. It&#x27;s only one of many many examples. I really wish you compare Mastodon to Twitter 0.1 and don&#x27;t do false advertising<p>&gt; 100M bots posting 3,500 times per second... to demonstrate its scale<p>I&#x27;m wondering why 100M bots post only 3500 times per second? Is it 3500 per second for each bot? Seems like it&#x27;s not, since https termination will consume the most of resources in this case. So I&#x27;m afraid it&#x27;s just not enough.<p>When I worked in Statuspage, we had support of 50-100k requests per second, because this is how it works - you have spikes, and traffic which is not evenly distributed. TBH, if it&#x27;s only 3500 per second total, then I have to admit it is not enough.</div><br/><div id="37139018" class="c"><input type="checkbox" id="c-37139018" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37138938">parent</a><span>|</span><a href="#37140063">next</a><span>|</span><label class="collapse" for="c-37139018">[-]</label><label class="expand" for="c-37139018">[13 more]</label></div><br/><div class="children"><div class="content">We&#x27;re comparing just to the original consumer product, which is about the same as Mastodon is today. That&#x27;s why we said &quot;original consumer product&quot; and not &quot;Twitter&#x27;s current consumer product&quot;.<p>Mastodon actually has more features than the original Twitter consumer product like hashtag follows, global timelines, and more sophisticated filtering&#x2F;muting capabilities.<p>Some people argue it&#x27;s not so expensive to build a scalable Twitter with modern tools, which is why we also included the comparison against Threads. That&#x27;s a very recent data point showing how ridiculously expensive it is to build applications like this, and they didn&#x27;t even start from scratch as Instagram&#x2F;Meta already had infrastructure powering similar products.</div><br/><div id="37140272" class="c"><input type="checkbox" id="c-37140272" checked=""/><div class="controls bullet"><span class="by">doctorpangloss</span><span>|</span><a href="#37138938">root</a><span>|</span><a href="#37139018">parent</a><span>|</span><a href="#37140446">next</a><span>|</span><label class="collapse" for="c-37140272">[-]</label><label class="expand" for="c-37140272">[6 more]</label></div><br/><div class="children"><div class="content">I work in gaming, so I cannot speak to your specific experiences. Entity Component Systems are extremely performant, really good science, and shipping in middlewares like Unity. However, in order to ship an ECS game, in my experience, you have to have already made your whole game first in a normal approach, in order to have everything be fully specified sufficiently that you can correctly create an ECS implementation. In practice, this means ECS is used to make first person shooters, which have decades of well specified traditions and behavior, and V2 of simulators, like for Cities Skylines 2 and Two Point Campus.<p>So this is not meant to diminish the achievements of what you have built at all, it is more intellectually honest to say that &quot;any high performance framework is most suitable for projects that are exact clones of pre-existing, mature things with battle-hardened specifications and end user behavior.&quot; While this might cover some greenfield projects, including the best capitalized ones that may matter to you, it does diminish the appeal of a framework for the vast majority of success stories from small &amp; poorly capitalized teams. Those small &amp; poor teams are very innovation and serendipity driven and hence rarely copying a pre-existing thing. And even if they try to become well-capitalized, they are almost always doing so by having worked on the thing they are copying already (i.e., already shipping version 1.0 for years).</div><br/><div id="37142198" class="c"><input type="checkbox" id="c-37142198" checked=""/><div class="controls bullet"><span class="by">syntheweave</span><span>|</span><a href="#37138938">root</a><span>|</span><a href="#37140272">parent</a><span>|</span><a href="#37142413">next</a><span>|</span><label class="collapse" for="c-37142198">[-]</label><label class="expand" for="c-37142198">[2 more]</label></div><br/><div class="children"><div class="content">Yes, this is along the lines of what I&#x27;m suspicious of too, as an also-gamedev that has done some ECS.<p>It&#x27;s too easy to study an existing system and, given the resources, create a perfect demo for how to dramatically improve it in certain ways. You can go on to ship the demo, but the demo wasn&#x27;t made by the same kind of organization, with the same kinds of goals, as the original system builders. The extreme example of this is, of course, the demoscene and its hardware-bending tricks that achieve the impossible through a significant modification to the design of a &quot;production&quot; equivalent.<p>So it&#x27;s better by performance metrics, better by codesize, but unknown on other metrics. Like, &quot;do I know how to start building new things with this?&quot;</div><br/><div id="37142407" class="c"><input type="checkbox" id="c-37142407" checked=""/><div class="controls bullet"><span class="by">moate</span><span>|</span><a href="#37138938">root</a><span>|</span><a href="#37142198">parent</a><span>|</span><a href="#37142413">next</a><span>|</span><label class="collapse" for="c-37142407">[-]</label><label class="expand" for="c-37142407">[1 more]</label></div><br/><div class="children"><div class="content">Asking “what are you optimizing for&#x2F;building towards” and getting different answers for different products isn’t proof that either is inferior, just that they may be better at different things.<p>Your comment makes it seem like their post is misleading, when it isn’t it just might be that what they do best isn’t useful to you (or possibly anyone).</div><br/></div></div></div></div><div id="37142413" class="c"><input type="checkbox" id="c-37142413" checked=""/><div class="controls bullet"><span class="by">tacotacotaco</span><span>|</span><a href="#37138938">root</a><span>|</span><a href="#37140272">parent</a><span>|</span><a href="#37142198">prev</a><span>|</span><a href="#37142417">next</a><span>|</span><label class="collapse" for="c-37142413">[-]</label><label class="expand" for="c-37142413">[1 more]</label></div><br/><div class="children"><div class="content">I only hobby in game dev. I have read some basics of ECS and IMO it seems a lot more intuitive than the “normal approach”. I think this is a case of using familiar tools we are comfortable with, not necessarily better. Unity’s ECS implementation is a hot mess though. I am looking forward to seeing what Bevy delivers as it matures.<p>I agree that copying an existing product will be easier and is usually cheaper and more performant because you can leverage your competitor’s R&amp;D and lessons learned. I presume this is why some tech companies’ product lines are full of clones.</div><br/></div></div><div id="37142417" class="c"><input type="checkbox" id="c-37142417" checked=""/><div class="controls bullet"><span class="by">danbolt</span><span>|</span><a href="#37138938">root</a><span>|</span><a href="#37140272">parent</a><span>|</span><a href="#37142413">prev</a><span>|</span><a href="#37143759">next</a><span>|</span><label class="collapse" for="c-37142417">[-]</label><label class="expand" for="c-37142417">[1 more]</label></div><br/><div class="children"><div class="content">I can’t go into specifics due to NDAs, but I’ve been a developer on a game that was designed and programmed with the EnTT library from the ground up. [1]<p>I don’t know if I’d suggest ECS for every team as you need the right tooling, culture, and leadership to pull it off. That said, I think the paradigm has unrecognized benefits when it comes to greenfield gameplay programming.<p>Or, your data structures become a way for sub-teams to communicate and share state without stepping on one another’s toes. A group handling pathfinding and a different one handling scenario&#x2F;mission logic can both pay attention to the position data without needing to be highly coupled. It becomes easy to “just add a system” or “an extra component” to build on existing functionality.<p>The Fred Brooks quote about “showing me your tables” comes to mind.<p>[1] <a href="https:&#x2F;&#x2F;www.minecraft.net&#x2F;en-us&#x2F;about-legends" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.minecraft.net&#x2F;en-us&#x2F;about-legends</a></div><br/></div></div><div id="37143759" class="c"><input type="checkbox" id="c-37143759" checked=""/><div class="controls bullet"><span class="by">koonsolo</span><span>|</span><a href="#37138938">root</a><span>|</span><a href="#37140272">parent</a><span>|</span><a href="#37142417">prev</a><span>|</span><a href="#37140446">next</a><span>|</span><label class="collapse" for="c-37143759">[-]</label><label class="expand" for="c-37143759">[1 more]</label></div><br/><div class="children"><div class="content">&gt; your whole game first in a normal approach<p>What do you mean by normal approach? OO classes with inheritance?</div><br/></div></div></div></div><div id="37140446" class="c"><input type="checkbox" id="c-37140446" checked=""/><div class="controls bullet"><span class="by">reissbaker</span><span>|</span><a href="#37138938">root</a><span>|</span><a href="#37139018">parent</a><span>|</span><a href="#37140272">prev</a><span>|</span><a href="#37140708">next</a><span>|</span><label class="collapse" for="c-37140446">[-]</label><label class="expand" for="c-37140446">[1 more]</label></div><br/><div class="children"><div class="content">I worked on a previous iteration of Threads at Instagram, and I don&#x27;t think the 25 person-years number you&#x27;re estimating spent on the project was spent primarily on backend engineering. They concurrently launched native iOS and Android apps, and I <i>think</i> you&#x27;re also factoring in the IC count from the linked article to mean full-time ICs dedicated exclusively to Threads, which is probably not how it worked. (Although TBH I&#x27;m not sure how you arrived at 25-person-years from the article, which said the project started with &quot;dozens&quot; of engineers and peaked at 50, and was 7 months long in total — a simple average of 24-50 engineers for 7 months, even if you assume they&#x27;re all full time, would be about 21 person-years).<p>When I was at IG, my team was 20-something ICs full-time on our project, bursted to maybe double that as necessary in part-time help from ICs in the wider org. We had a total of three backend engineers, of which I was one, as well as a backend intern for a few months, although we bursted the backend team for a couple of months to four for some ML help.<p>Your project sounds pretty cool! But I don&#x27;t think the comparison to Threads productivity is quite right. The majority of IG engineering is focused on building polished native clients, not generally on backend infrastructure. It&#x27;s true that Meta already has a lot of the backend infra built — if Red Planet Labs can come close to what you get at Meta, that&#x27;s pretty amazing. But I don&#x27;t think the numbers you&#x27;re quoting are apples-to-apples, or mean quite what you think they do. I don&#x27;t know if this version of Threads operated exactly like the one I worked on (a Snapchat competitor), but I&#x27;d be pretty surprised if there was a product team at IG that was majority backend.<p>(Edit: I also think it&#x27;s worth keeping in mind the experience levels of who works on these projects — at IG it&#x27;s usually a smaller number of E6&#x2F;E5s guiding a larger number of E4&#x2F;E3s. Person-years are not all equivalent! If you spent ten years building the Red Planet Labs infrastructure based on your time at Twitter, nine person-months of your team&#x27;s time building a product on your infra might not be the same as nine person-months of someone else&#x27;s.)<p>Anyway — I don&#x27;t mean to downplay your product, and really, if it&#x27;s anything like the backend productivity I experienced at Meta, that would be pretty groundbreaking. Curious to see what you launch :)</div><br/></div></div><div id="37140708" class="c"><input type="checkbox" id="c-37140708" checked=""/><div class="controls bullet"><span class="by">dpweb</span><span>|</span><a href="#37138938">root</a><span>|</span><a href="#37139018">parent</a><span>|</span><a href="#37140446">prev</a><span>|</span><a href="#37139405">next</a><span>|</span><label class="collapse" for="c-37140708">[-]</label><label class="expand" for="c-37140708">[2 more]</label></div><br/><div class="children"><div class="content">Built some log databases and back end frameworks myself with some of the same concepts.
I applaud the creativity in rethinking how back ends should work. Please now do frontends next! :)<p>&quot;But it&#x27;s not a fully functioning 2023 Twitter!!!&quot; I think some people miss the point. This is not about hey we built a Twitter clone. This is about a POC for a novel app architecture.<p>We need to be constantly examining and re-examining our thoughts about the best way to deal with distributed systems, scale, developer workflow. Even inventing new ones.</div><br/><div id="37143867" class="c"><input type="checkbox" id="c-37143867" checked=""/><div class="controls bullet"><span class="by">philipwhiuk</span><span>|</span><a href="#37138938">root</a><span>|</span><a href="#37140708">parent</a><span>|</span><a href="#37139405">next</a><span>|</span><label class="collapse" for="c-37143867">[-]</label><label class="expand" for="c-37143867">[1 more]</label></div><br/><div class="children"><div class="content">&gt; This is not about hey we built a Twitter clone.<p>Then they shouldn’t have titled it “we built a Twitter clone”</div><br/></div></div></div></div><div id="37139405" class="c"><input type="checkbox" id="c-37139405" checked=""/><div class="controls bullet"><span class="by">ehutch79</span><span>|</span><a href="#37138938">root</a><span>|</span><a href="#37139018">parent</a><span>|</span><a href="#37140708">prev</a><span>|</span><a href="#37140308">next</a><span>|</span><label class="collapse" for="c-37139405">[-]</label><label class="expand" for="c-37139405">[2 more]</label></div><br/><div class="children"><div class="content">Are you sure about that.<p>With things like twitter, the ui is not the hard part. Things like moderation are the secret sauce. All the corner cases and support for devopsy stuff likely account for a lot. Routing to specific instances for celebrities and such.</div><br/><div id="37139507" class="c"><input type="checkbox" id="c-37139507" checked=""/><div class="controls bullet"><span class="by">justrealist</span><span>|</span><a href="#37138938">root</a><span>|</span><a href="#37139405">parent</a><span>|</span><a href="#37140308">next</a><span>|</span><label class="collapse" for="c-37139507">[-]</label><label class="expand" for="c-37139507">[1 more]</label></div><br/><div class="children"><div class="content">Nathan worked at Twitter so while he might be wrong, I don&#x27;t think it&#x27;s reasonable to assume he&#x27;s just naive <a href="http:&#x2F;&#x2F;nathanmarz.com&#x2F;blog&#x2F;leaving-twitter.html" rel="nofollow noreferrer">http:&#x2F;&#x2F;nathanmarz.com&#x2F;blog&#x2F;leaving-twitter.html</a>.</div><br/></div></div></div></div></div></div><div id="37140063" class="c"><input type="checkbox" id="c-37140063" checked=""/><div class="controls bullet"><span class="by">WheelsAtLarge</span><span>|</span><a href="#37138938">parent</a><span>|</span><a href="#37139018">prev</a><span>|</span><a href="#37139331">next</a><span>|</span><label class="collapse" for="c-37140063">[-]</label><label class="expand" for="c-37140063">[2 more]</label></div><br/><div class="children"><div class="content">We see this type of post regularly. Something like, &quot;How I built a better &lt;pick your app&gt; clone by myself in a month.&quot; Well, no, usually it&#x27;s just a bare skeleton with the least amount of functionality.  Not only that, the software is the least of the functionality. The organizational structure around the app is what matters most to keep it going. It&#x27;s an attention seeking ploy and the whole thing usually disappears real quick.</div><br/><div id="37141897" class="c"><input type="checkbox" id="c-37141897" checked=""/><div class="controls bullet"><span class="by">gexla</span><span>|</span><a href="#37138938">root</a><span>|</span><a href="#37140063">parent</a><span>|</span><a href="#37139331">next</a><span>|</span><label class="collapse" for="c-37141897">[-]</label><label class="expand" for="c-37141897">[1 more]</label></div><br/><div class="children"><div class="content">If you want background, you can go to the blog in his bio and read the first post, which mentioned he worked at Twitter starting in 2011. He mentioned elsewhere that his comparison is early Twitter, as opposed to current Twitter.<p>The background makes this a bit more interesting, because you can imagine how those early days impacted the arc of his work.</div><br/></div></div></div></div><div id="37139331" class="c"><input type="checkbox" id="c-37139331" checked=""/><div class="controls bullet"><span class="by">hosh</span><span>|</span><a href="#37138938">parent</a><span>|</span><a href="#37140063">prev</a><span>|</span><a href="#37144105">next</a><span>|</span><label class="collapse" for="c-37139331">[-]</label><label class="expand" for="c-37139331">[8 more]</label></div><br/><div class="children"><div class="content">How much of Twitter’s code base is dedicated to things like security, compliance, and moderation?<p>Granted, a decentralized platform would eliminate some of those, just by being decentralized</div><br/><div id="37140982" class="c"><input type="checkbox" id="c-37140982" checked=""/><div class="controls bullet"><span class="by">asu_thomas</span><span>|</span><a href="#37138938">root</a><span>|</span><a href="#37139331">parent</a><span>|</span><a href="#37139420">next</a><span>|</span><label class="collapse" for="c-37140982">[-]</label><label class="expand" for="c-37140982">[1 more]</label></div><br/><div class="children"><div class="content">And advertising. Twitter is an advertising platform.</div><br/></div></div><div id="37139420" class="c"><input type="checkbox" id="c-37139420" checked=""/><div class="controls bullet"><span class="by">adventured</span><span>|</span><a href="#37138938">root</a><span>|</span><a href="#37139331">parent</a><span>|</span><a href="#37140982">prev</a><span>|</span><a href="#37144105">next</a><span>|</span><label class="collapse" for="c-37139420">[-]</label><label class="expand" for="c-37139420">[6 more]</label></div><br/><div class="children"><div class="content">None of those things get eliminated by decentralization, they get distributed to whatever the point of control &#x2F; ownership is.<p>Mastodon still requires security, compliance and moderation. And those requirements are going to keep getting more challenging by the year. It&#x27;ll end up being another reason nobody will want to host content in a decentralized manner, the burden will become obnoxious.</div><br/><div id="37139635" class="c"><input type="checkbox" id="c-37139635" checked=""/><div class="controls bullet"><span class="by">hosh</span><span>|</span><a href="#37138938">root</a><span>|</span><a href="#37139420">parent</a><span>|</span><a href="#37140390">next</a><span>|</span><label class="collapse" for="c-37139635">[-]</label><label class="expand" for="c-37139635">[4 more]</label></div><br/><div class="children"><div class="content">An organization trying to maintain an ISO certification will have drastically different policies and controls than a small shop, or even a hobbyist group.<p>Everyone (theoretically) would be complying to statues in its broadest sense, but jurisdiction, regulations, industry best practices, reporting requirements, and appetite for risk is going to be different from organization to organization. It’s not one-size-fits-all.<p>So some of these things are eliminated because the people hosting those are not put under the same kind of scrutiny as say, a Twitter.</div><br/><div id="37141535" class="c"><input type="checkbox" id="c-37141535" checked=""/><div class="controls bullet"><span class="by">jeremyjh</span><span>|</span><a href="#37138938">root</a><span>|</span><a href="#37139635">parent</a><span>|</span><a href="#37140390">next</a><span>|</span><label class="collapse" for="c-37141535">[-]</label><label class="expand" for="c-37141535">[3 more]</label></div><br/><div class="children"><div class="content">The scrutiny from investors, legal and compliance exists because the risks are real, and they don&#x27;t go away just because there isn&#x27;t a Serious Business involved. Once someone operating one of these is publicly damaged, the risk will be better understood and marked up accordingly.</div><br/><div id="37141846" class="c"><input type="checkbox" id="c-37141846" checked=""/><div class="controls bullet"><span class="by">hosh</span><span>|</span><a href="#37138938">root</a><span>|</span><a href="#37141535">parent</a><span>|</span><a href="#37140390">next</a><span>|</span><label class="collapse" for="c-37141846">[-]</label><label class="expand" for="c-37141846">[2 more]</label></div><br/><div class="children"><div class="content">They sure are, which brings back to the point: how much did this implementation of Mastadon adequately addressed these risks with the reduced code count?</div><br/><div id="37142141" class="c"><input type="checkbox" id="c-37142141" checked=""/><div class="controls bullet"><span class="by">jeremyjh</span><span>|</span><a href="#37138938">root</a><span>|</span><a href="#37141846">parent</a><span>|</span><a href="#37140390">next</a><span>|</span><label class="collapse" for="c-37142141">[-]</label><label class="expand" for="c-37142141">[1 more]</label></div><br/><div class="children"><div class="content">I assumed this is just marketing, so it addressed the risks by never operating a public instance.</div><br/></div></div></div></div></div></div></div></div><div id="37140390" class="c"><input type="checkbox" id="c-37140390" checked=""/><div class="controls bullet"><span class="by">Fomite</span><span>|</span><a href="#37138938">root</a><span>|</span><a href="#37139420">parent</a><span>|</span><a href="#37139635">prev</a><span>|</span><a href="#37144105">next</a><span>|</span><label class="collapse" for="c-37140390">[-]</label><label class="expand" for="c-37140390">[1 more]</label></div><br/><div class="children"><div class="content">During the first wave of Twitter exodus, several people in my professional circle asked if they should be hosting professional, field-specific Mastadon servers, etc.<p>My answer, born of moderating a modestly sized forum, was &quot;Absolutely not under any circumstances.&quot;</div><br/></div></div></div></div></div></div><div id="37144105" class="c"><input type="checkbox" id="c-37144105" checked=""/><div class="controls bullet"><span class="by">smcl</span><span>|</span><a href="#37138938">parent</a><span>|</span><a href="#37139331">prev</a><span>|</span><a href="#37142999">next</a><span>|</span><label class="collapse" for="c-37144105">[-]</label><label class="expand" for="c-37144105">[1 more]</label></div><br/><div class="children"><div class="content">Not to mention the phrase &quot;x times less than&quot; doesn&#x27;t really make sense the way it&#x27;s often used. For it to make sense you have to reinterpret it to mean something that it doesn&#x27;t based on being the opposite of &quot;x times more than&quot; (which is also often misused).</div><br/></div></div><div id="37142999" class="c"><input type="checkbox" id="c-37142999" checked=""/><div class="controls bullet"><span class="by">KingOfCoders</span><span>|</span><a href="#37138938">parent</a><span>|</span><a href="#37144105">prev</a><span>|</span><a href="#37141135">next</a><span>|</span><label class="collapse" for="c-37142999">[-]</label><label class="expand" for="c-37142999">[2 more]</label></div><br/><div class="children"><div class="content">The 100x less code always reminds me of a hypothetical Half Life 2 game engine. 
Then your code would be:<p><pre><code>   StartHalfLife2LikeGame()
</code></pre>
and you&#x27;d replace millions LOC with one line. If there is a perfect match between the framework and your app, there is no code. The more your app diverges from the ideal app the framework was written for, the more code you have.</div><br/><div id="37144163" class="c"><input type="checkbox" id="c-37144163" checked=""/><div class="controls bullet"><span class="by">lbalazscs</span><span>|</span><a href="#37138938">root</a><span>|</span><a href="#37142999">parent</a><span>|</span><a href="#37141135">next</a><span>|</span><label class="collapse" for="c-37144163">[-]</label><label class="expand" for="c-37144163">[1 more]</label></div><br/><div class="children"><div class="content">They claim that &quot;Reddit, Slack, Gmail, Uber, etc&quot; could also be done with a similar level of effort.</div><br/></div></div></div></div><div id="37141135" class="c"><input type="checkbox" id="c-37141135" checked=""/><div class="controls bullet"><span class="by">codedokode</span><span>|</span><a href="#37138938">parent</a><span>|</span><a href="#37142999">prev</a><span>|</span><a href="#37141130">next</a><span>|</span><label class="collapse" for="c-37141135">[-]</label><label class="expand" for="c-37141135">[1 more]</label></div><br/><div class="children"><div class="content">&gt; When I worked in Statuspage, we had support of 50-100k requests per second<p>Serving one cached HTML with Nginx and serving dynamically generated content, updating a database is a different thing.</div><br/></div></div><div id="37141130" class="c"><input type="checkbox" id="c-37141130" checked=""/><div class="controls bullet"><span class="by">codedokode</span><span>|</span><a href="#37138938">parent</a><span>|</span><a href="#37141135">prev</a><span>|</span><a href="#37141009">next</a><span>|</span><label class="collapse" for="c-37141130">[-]</label><label class="expand" for="c-37141130">[1 more]</label></div><br/><div class="children"><div class="content">Twitter has many features, but not all of them are necessary. For example, there is no need to implement popups blocking the page and demanding a user to register, or detailed telemetry collecting user data from 20 different providers.</div><br/></div></div><div id="37141009" class="c"><input type="checkbox" id="c-37141009" checked=""/><div class="controls bullet"><span class="by">otikik</span><span>|</span><a href="#37138938">parent</a><span>|</span><a href="#37141130">prev</a><span>|</span><a href="#37142819">next</a><span>|</span><label class="collapse" for="c-37141009">[-]</label><label class="expand" for="c-37141009">[1 more]</label></div><br/><div class="children"><div class="content">Indeed. Add a single JavaScript dependency… you will get the banana, the gorilla holding the banana, the tree holding the gorilla, and the whole jungle.</div><br/></div></div><div id="37142819" class="c"><input type="checkbox" id="c-37142819" checked=""/><div class="controls bullet"><span class="by">anothernewdude</span><span>|</span><a href="#37138938">parent</a><span>|</span><a href="#37141009">prev</a><span>|</span><a href="#37140045">next</a><span>|</span><label class="collapse" for="c-37142819">[-]</label><label class="expand" for="c-37142819">[1 more]</label></div><br/><div class="children"><div class="content">It takes more self-control and effort to reduce the number of features to the ones that matter. Twitter having more features is a liability, not a benefit.<p>&gt; Add large-scale distributed live video support at the top of that,<p>Why? For the love of all that is good and efficient, why? Why not have a separate platform for that? Or link to a different federated video service? Why does every platform need to do all the things?</div><br/></div></div><div id="37140045" class="c"><input type="checkbox" id="c-37140045" checked=""/><div class="controls bullet"><span class="by">littlestymaar</span><span>|</span><a href="#37138938">parent</a><span>|</span><a href="#37142819">prev</a><span>|</span><a href="#37139720">next</a><span>|</span><label class="collapse" for="c-37140045">[-]</label><label class="expand" for="c-37140045">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Add large-scale distributed live video support at the top of that, and you won&#x27;t get any close to 10k lines.<p>But Twitter isn&#x27;t, and was never, about live video support: this is pure feature creep and that&#x27;s how you get headcount inflation and a company that can be run for 17 years without making profit (AKA terrible business).<p>&gt; When I worked in Statuspage, we had support of 50-100k requests per second<p>Having served 150kqps in the past as part of a very small team (3 back-end eng.), this isn&#x27;t necessarily as big of a deal as you make it sound: it mostly depends on your workload and whether or not you need consistency (or even persistence at all) in your data.<p>In practice, building scalable system is hard mostly because it&#x27;s hard to get the management forgot their vanity ideas that go against your (their, actually) system&#x27;s scalability.</div><br/></div></div><div id="37139720" class="c"><input type="checkbox" id="c-37139720" checked=""/><div class="controls bullet"><span class="by">MikePlacid</span><span>|</span><a href="#37138938">parent</a><span>|</span><a href="#37140045">prev</a><span>|</span><a href="#37139356">next</a><span>|</span><label class="collapse" for="c-37139720">[-]</label><label class="expand" for="c-37139720">[2 more]</label></div><br/><div class="children"><div class="content">So<p>&gt;&gt; 100M bots posting 3,500 times per second...<p>and<p>&gt; We used the OpenAI API to generate 50,000 statuses for the bots to choose from at random.<p>I wonder: 100M OpenAI bots talking to each other continuously and with much vigor - how is this affecting OpenAI’s uhm… intellect?</div><br/><div id="37139845" class="c"><input type="checkbox" id="c-37139845" checked=""/><div class="controls bullet"><span class="by">sdwr</span><span>|</span><a href="#37138938">root</a><span>|</span><a href="#37139720">parent</a><span>|</span><a href="#37139356">next</a><span>|</span><label class="collapse" for="c-37139845">[-]</label><label class="expand" for="c-37139845">[1 more]</label></div><br/><div class="children"><div class="content">They generated 50,000 statuses once, put them in a text file, and pick between them randomly. So not at all.</div><br/></div></div></div></div></div></div><div id="37139356" class="c"><input type="checkbox" id="c-37139356" checked=""/><div class="controls bullet"><span class="by">dataangel</span><span>|</span><a href="#37138938">prev</a><span>|</span><a href="#37137896">next</a><span>|</span><label class="collapse" for="c-37139356">[-]</label><label class="expand" for="c-37139356">[24 more]</label></div><br/><div class="children"><div class="content">I do C++ backend work in a non-web industry and this entire post is Greek to me. Even though this is targeted at developers, you need a better pitch. I get &quot;we did this 100x faster&quot; but the obvious followup question is &quot;how&quot; but then the answer seems to be a ton of flow diagrams with way too many nodes that tell me approximately nothing and some handwaving about something called P-States that are basically defined to be entirely nebulous because they are any kind of data structure.<p>I&#x27;m not saying there&#x27;s nothing here, but I am adjacent to your core audience and I have no idea whether there is after reading your post. I think you are strongly assuming a shared basis where everybody has worked on the same kind of large scale web app before; I would find it much more useful to have an overview of, &quot;This what you would usually do, here are the problems with it, here is what we do instead&quot; with side by side code comparison of Rama vs what a newbie is likely to hack together with single instance postgres.</div><br/><div id="37139649" class="c"><input type="checkbox" id="c-37139649" checked=""/><div class="controls bullet"><span class="by">sdwr</span><span>|</span><a href="#37139356">parent</a><span>|</span><a href="#37139479">next</a><span>|</span><label class="collapse" for="c-37139649">[-]</label><label class="expand" for="c-37139649">[15 more]</label></div><br/><div class="children"><div class="content">In a typical architecture, the DB stores data, and the backend calls the DB to make updates and compile views.<p>Here, the &quot;views&quot; are defined formally (the P-states), and incrementally, automatically updated when the underlying data changes.<p>Example problem:<p>Get a list of accounts that follow account 1306<p>&quot;Classic architecture&quot;:<p>- Naive approach. Search through all accounts follow lists for &quot;1306&quot;. Super slow, scales terribly with # of accounts.<p>- Normal approach. Create a &quot;followed by&quot; table, update it whenever an account follows &#x2F; unfollows &#x2F; is deleted &#x2F; is blocked.<p>Normal sounds good, but add 10x features, or 1000x users, and it gets trickier. You need to make a new table for each feature, and add conditions to the update calls, and they start overlapping... Or you have to split the database up so it scales, but then you have to pay attention to consistency, and watch which order stuff gets updated in.<p>Their solution is separating the &quot;true&quot; data tables from the &quot;view&quot; tables, formally defining the relationship between the two, and creating the &quot;view&quot; tables magically behind the scenes.</div><br/><div id="37139794" class="c"><input type="checkbox" id="c-37139794" checked=""/><div class="controls bullet"><span class="by">endisneigh</span><span>|</span><a href="#37139356">root</a><span>|</span><a href="#37139649">parent</a><span>|</span><a href="#37140015">next</a><span>|</span><label class="collapse" for="c-37139794">[-]</label><label class="expand" for="c-37139794">[10 more]</label></div><br/><div class="children"><div class="content">I read their post and honestly it’s not really that much different than just materialized views in a regular database plus async jobs to do the long running tasks.<p>It’s a ridiculous amount of fluff to describe that. Not to mention it’s proprietary and only supports the JVM and doesn’t integrate with the tons of tooling designed about RDBMS unless you stream everything to them, defeating the purpose.<p>What really irks me is that they go on and on bragging about the low LoC count and literally show nothing complete. They should’ve held on this post and released it simultaneously with the code.</div><br/><div id="37140496" class="c"><input type="checkbox" id="c-37140496" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37139356">root</a><span>|</span><a href="#37139794">parent</a><span>|</span><a href="#37140321">next</a><span>|</span><label class="collapse" for="c-37140496">[-]</label><label class="expand" for="c-37140496">[3 more]</label></div><br/><div class="children"><div class="content">We are very open in the post that the core concepts are not new:<p><pre><code>  Individually, none of these concepts are new. I’m sure you’ve seen them all before. You may be tempted to dismiss Rama’s programming model as just a combination of event sourcing and materialized views. But what Rama does is integrate and generalize these concepts to such an extent that you can build entire backends end-to-end without any of the impedance mismatches or complexity that characterize and overwhelm existing systems.
</code></pre>
Indexes as arbitrary data structures that you shape to perfectly meet your use cases, a powerful computation API that&#x27;s like a &quot;distributed programming language&quot;, and everything being so integrated make a world of difference.<p>I understand the desire to see all the code, and that&#x27;s coming in two weeks. That said, the code in the post isn&#x27;t trivial as it&#x27;s showing almost the complete implementations of two major parts of Mastodon: the social graph and timeline fanout.<p>Next week you&#x27;ll be able to play with Rama when we release a build of it, and the documentation will help with that.</div><br/><div id="37140841" class="c"><input type="checkbox" id="c-37140841" checked=""/><div class="controls bullet"><span class="by">Aeolun</span><span>|</span><a href="#37139356">root</a><span>|</span><a href="#37140496">parent</a><span>|</span><a href="#37140321">next</a><span>|</span><label class="collapse" for="c-37140841">[-]</label><label class="expand" for="c-37140841">[2 more]</label></div><br/><div class="children"><div class="content">&gt; But what Rama does is integrate and generalize these concepts to such an extent that you can build entire backends end-to-end without any of the impedance mismatches or complexity<p>Every time I hear this the reality turns out to be that building anything with this tech is like building something on top of SAP.<p>But I’m also just allergic to any post that says ‘look how amazing’ in general, so I’m a bit prejudiced.</div><br/><div id="37141530" class="c"><input type="checkbox" id="c-37141530" checked=""/><div class="controls bullet"><span class="by">Aeolun</span><span>|</span><a href="#37139356">root</a><span>|</span><a href="#37140841">parent</a><span>|</span><a href="#37140321">next</a><span>|</span><label class="collapse" for="c-37141530">[-]</label><label class="expand" for="c-37141530">[1 more]</label></div><br/><div class="children"><div class="content">After reading through the post a bit more, I’m inclined to believe it’s not hot air, but I think most of the innovation where is in the management layer, not the ease of application development.<p>Just looking at the first example tells me that there’s a million ways someone that doesn’t know what they’re doing can mess this up.<p>If the author of the platform implements some service on their own platform it’s always going to seem simple.</div><br/></div></div></div></div></div></div><div id="37140321" class="c"><input type="checkbox" id="c-37140321" checked=""/><div class="controls bullet"><span class="by">sixo</span><span>|</span><a href="#37139356">root</a><span>|</span><a href="#37139794">parent</a><span>|</span><a href="#37140496">prev</a><span>|</span><a href="#37140088">next</a><span>|</span><label class="collapse" for="c-37140321">[-]</label><label class="expand" for="c-37140321">[2 more]</label></div><br/><div class="children"><div class="content">The difference is that the materialized-view logic lives naturally in the application code; there&#x27;s no step where they go out of the DB to do computations and then reinsert.<p>Once SQL materialized views aren&#x27;t enough, you might do this by replicating your database into Kafka, implementing logic in Flink or something, and reinserting into the same DB&#x2F;Elasticsearch&#x2F;etc. Very common architecture. (Writ small, could also use a queue processor like RabbitMQ.)<p>Their approach is to instead--apparently--make all of these first-class elements of the same ecosystem, not by &quot;putting it all in the database&quot;, but by putting the database into the application code. Which seems wild, but colocates data, transformation, and view.<p>Seems like it would open up a lot of cans of worms, but if you solve those, sounds great.</div><br/><div id="37142706" class="c"><input type="checkbox" id="c-37142706" checked=""/><div class="controls bullet"><span class="by">cormacrelf</span><span>|</span><a href="#37139356">root</a><span>|</span><a href="#37140321">parent</a><span>|</span><a href="#37140088">next</a><span>|</span><label class="collapse" for="c-37142706">[-]</label><label class="expand" for="c-37142706">[1 more]</label></div><br/><div class="children"><div class="content">You can do all of this with <a href="https:&#x2F;&#x2F;materialize.com" rel="nofollow noreferrer">https:&#x2F;&#x2F;materialize.com</a>, and you don’t need to write it in Java. Just connect it to a Postgres instance and start creating materialised views using SQL. These views then auto update. So much so, that you can create a view for the top 10 of something, and let it sit there as the list updates. Otherwise just use normal select statements from your views using any Postgres client.</div><br/></div></div></div></div><div id="37140088" class="c"><input type="checkbox" id="c-37140088" checked=""/><div class="controls bullet"><span class="by">leonidasv</span><span>|</span><a href="#37139356">root</a><span>|</span><a href="#37139794">parent</a><span>|</span><a href="#37140321">prev</a><span>|</span><a href="#37140004">next</a><span>|</span><label class="collapse" for="c-37140088">[-]</label><label class="expand" for="c-37140088">[2 more]</label></div><br/><div class="children"><div class="content">IIUIC, the most significant difference from a materialized view is that the Rama infrastructure recompute only the changed data by checking the relationship between fields, while a traditional materialized view recomputes the whole table?</div><br/><div id="37142409" class="c"><input type="checkbox" id="c-37142409" checked=""/><div class="controls bullet"><span class="by">andrenotgiant</span><span>|</span><a href="#37139356">root</a><span>|</span><a href="#37140088">parent</a><span>|</span><a href="#37140004">next</a><span>|</span><label class="collapse" for="c-37142409">[-]</label><label class="expand" for="c-37142409">[1 more]</label></div><br/><div class="children"><div class="content">incremental view maintenance is the database equivalent of: &quot;recompute only the changed data by checking the relationship between fields,&quot;<p>Oracle has decent support for incrementally updated materialized views, redshift has some too. Materialize.com is an entire snowflake-like platform built around incrementally maintained materialized views.</div><br/></div></div></div></div><div id="37140004" class="c"><input type="checkbox" id="c-37140004" checked=""/><div class="controls bullet"><span class="by">sdwr</span><span>|</span><a href="#37139356">root</a><span>|</span><a href="#37139794">parent</a><span>|</span><a href="#37140088">prev</a><span>|</span><a href="#37140015">next</a><span>|</span><label class="collapse" for="c-37140004">[-]</label><label class="expand" for="c-37140004">[2 more]</label></div><br/><div class="children"><div class="content">This is all armchair for me, but I think they have containers and sharding built in as well, which is the other half of the puzzle when it comes to scaling.</div><br/><div id="37140061" class="c"><input type="checkbox" id="c-37140061" checked=""/><div class="controls bullet"><span class="by">endisneigh</span><span>|</span><a href="#37139356">root</a><span>|</span><a href="#37140004">parent</a><span>|</span><a href="#37140015">next</a><span>|</span><label class="collapse" for="c-37140061">[-]</label><label class="expand" for="c-37140061">[1 more]</label></div><br/><div class="children"><div class="content">Yes, but there are plenty of NewSQL that support views and offer all of that too. Yugabyte, Cockroach, TiDB and that’s just off the top of my head and open source. If we count proprietary then you have Fauna, Cloud Spanner and more I’m sure.</div><br/></div></div></div></div></div></div><div id="37140015" class="c"><input type="checkbox" id="c-37140015" checked=""/><div class="controls bullet"><span class="by">ethbr1</span><span>|</span><a href="#37139356">root</a><span>|</span><a href="#37139649">parent</a><span>|</span><a href="#37139794">prev</a><span>|</span><a href="#37139479">next</a><span>|</span><label class="collapse" for="c-37140015">[-]</label><label class="expand" for="c-37140015">[4 more]</label></div><br/><div class="children"><div class="content">So... at a high level, early React for data? In other words, letting a framework manage update dependency graph tracking, and then cascading updates through its graph in an optimized manner to enhance performance?<p>Obviously, with tons of implementation difficulties and details, and not actual graph structures, but as a top level analogy.</div><br/><div id="37141249" class="c"><input type="checkbox" id="c-37141249" checked=""/><div class="controls bullet"><span class="by">ricardobeat</span><span>|</span><a href="#37139356">root</a><span>|</span><a href="#37140015">parent</a><span>|</span><a href="#37139479">next</a><span>|</span><label class="collapse" for="c-37141249">[-]</label><label class="expand" for="c-37141249">[3 more]</label></div><br/><div class="children"><div class="content">Not at all, especially because React doesn’t do much dependency tracking on its own and is built for <i>predictable</i> UI updates and not performance.<p>To be honest any parallel with frontend here is meaningless, reactivity and all the concepts at play have existed long before JS and browsers came along, it’s easier to explain from first principles.</div><br/><div id="37141574" class="c"><input type="checkbox" id="c-37141574" checked=""/><div class="controls bullet"><span class="by">Aeolun</span><span>|</span><a href="#37139356">root</a><span>|</span><a href="#37141249">parent</a><span>|</span><a href="#37139479">next</a><span>|</span><label class="collapse" for="c-37141574">[-]</label><label class="expand" for="c-37141574">[2 more]</label></div><br/><div class="children"><div class="content">I think that’s probably not the case for many new developers that don’t have any exposure to anything not React. Of course ‘react for data’ is entirely misleading, but it may give a decent idea if you don’t have an hour to spend on an explanation.</div><br/><div id="37142300" class="c"><input type="checkbox" id="c-37142300" checked=""/><div class="controls bullet"><span class="by">throwuxiytayq</span><span>|</span><a href="#37139356">root</a><span>|</span><a href="#37141574">parent</a><span>|</span><a href="#37139479">next</a><span>|</span><label class="collapse" for="c-37142300">[-]</label><label class="expand" for="c-37142300">[1 more]</label></div><br/><div class="children"><div class="content">In other words, it’s the Dark Souls of application backends, but entirely different.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="37139479" class="c"><input type="checkbox" id="c-37139479" checked=""/><div class="controls bullet"><span class="by">ldayley</span><span>|</span><a href="#37139356">parent</a><span>|</span><a href="#37139649">prev</a><span>|</span><a href="#37140453">next</a><span>|</span><label class="collapse" for="c-37139479">[-]</label><label class="expand" for="c-37139479">[1 more]</label></div><br/><div class="children"><div class="content">Nathan Marz created Apache Storm, coauthored the book &quot;Big Data&quot;, and founded an early real-time infrastructure team at Twitter. It&#x27;s likely the &#x27;curse of knowledge&#x27; of working on this specific problem for so long is responsible for the unique and&#x2F;or unfamiliar style of communication here.<p>EDIT: Specifics</div><br/></div></div><div id="37140453" class="c"><input type="checkbox" id="c-37140453" checked=""/><div class="controls bullet"><span class="by">falsandtru</span><span>|</span><a href="#37139356">parent</a><span>|</span><a href="#37139479">prev</a><span>|</span><a href="#37141855">next</a><span>|</span><label class="collapse" for="c-37140453">[-]</label><label class="expand" for="c-37140453">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Whereas Twitter stores home timelines in a dedicated in-memory database, in Rama they’re stored in-memory in the same processes executing the ETL for timeline fanout. So instead of having to do network operations, serialization, and deserialization, the reads and writes to home timelines in our implementation are literally just in-memory operations on a hash map. This is dramatically simpler and more efficient than operating a separate in-memory database. The timelines themselves are stored like this:<p>&gt; To minimize memory usage and GC pressure, we use a ring buffer and Java primitives to represent each home timeline. The buffer contains pairs of author ID and status ID. The author ID is stored along with the status ID since it is static information that will never change, and materializing it means that information doesn’t need to be looked up at query time. The home timeline stores the most recent 600 statuses, so the buffer size is 1,200 to accommodate each author ID and status ID pair. The size is fixed since storing full timelines would require a prohibitive amount of memory (the number of statuses times the average number of followers).<p>&gt; Each user utilizes about 10kb of memory to represent their home timeline. For a Twitter-scale deployment of 500M users, that requires about 4.7TB of memory total around the cluster, which is easily achievable.<p>Isn&#x27;t this where the most difficult(expensive) part is and Rama has little to do with it? It appears that the other parts also do not have to be Rama.</div><br/><div id="37140521" class="c"><input type="checkbox" id="c-37140521" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37139356">root</a><span>|</span><a href="#37140453">parent</a><span>|</span><a href="#37141855">next</a><span>|</span><label class="collapse" for="c-37140521">[-]</label><label class="expand" for="c-37140521">[2 more]</label></div><br/><div class="children"><div class="content">We&#x27;re storing those in-memory within the Rama modules materializing the home timelines. And the query topologies that refresh home timelines for lost partitions is colocated with that. This is dramatically simpler than operating a separate in-memory database, and Rama has everything to do with that.</div><br/><div id="37140626" class="c"><input type="checkbox" id="c-37140626" checked=""/><div class="controls bullet"><span class="by">falsandtru</span><span>|</span><a href="#37139356">root</a><span>|</span><a href="#37140521">parent</a><span>|</span><a href="#37141855">next</a><span>|</span><label class="collapse" for="c-37140626">[-]</label><label class="expand" for="c-37140626">[1 more]</label></div><br/><div class="children"><div class="content">It appears simpler and better without Rama.<p>&gt; So instead of having to do network operations, serialization, and deserialization, the reads and writes to home timelines in our implementation are literally just in-memory operations on a hash map. This is dramatically simpler and more efficient than operating a separate in-memory database.</div><br/></div></div></div></div></div></div><div id="37141855" class="c"><input type="checkbox" id="c-37141855" checked=""/><div class="controls bullet"><span class="by">rasz</span><span>|</span><a href="#37139356">parent</a><span>|</span><a href="#37140453">prev</a><span>|</span><a href="#37139505">next</a><span>|</span><label class="collapse" for="c-37141855">[-]</label><label class="expand" for="c-37141855">[1 more]</label></div><br/><div class="children"><div class="content">Here in video form: Microservices <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=y8OnoxKotPQ">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=y8OnoxKotPQ</a></div><br/></div></div><div id="37139505" class="c"><input type="checkbox" id="c-37139505" checked=""/><div class="controls bullet"><span class="by">HaZeust</span><span>|</span><a href="#37139356">parent</a><span>|</span><a href="#37141855">prev</a><span>|</span><a href="#37137896">next</a><span>|</span><label class="collapse" for="c-37139505">[-]</label><label class="expand" for="c-37139505">[3 more]</label></div><br/><div class="children"><div class="content">... Maybe the post isn&#x27;t targeted to your audience at all? How is &quot;C++&quot; and &quot;non-web work&quot; adjacent to web work with web launguage audiences?</div><br/><div id="37139662" class="c"><input type="checkbox" id="c-37139662" checked=""/><div class="controls bullet"><span class="by">slim</span><span>|</span><a href="#37139356">root</a><span>|</span><a href="#37139505">parent</a><span>|</span><a href="#37139738">next</a><span>|</span><label class="collapse" for="c-37139662">[-]</label><label class="expand" for="c-37139662">[1 more]</label></div><br/><div class="children"><div class="content">he&#x27;s a developer and curious about the subject. Since it&#x27;s a blog post, not a scientific paper, the fact that he did not understand could be a communication failure. I think he&#x27;s being helpful</div><br/></div></div><div id="37139738" class="c"><input type="checkbox" id="c-37139738" checked=""/><div class="controls bullet"><span class="by">rollcat</span><span>|</span><a href="#37139356">root</a><span>|</span><a href="#37139505">parent</a><span>|</span><a href="#37139662">prev</a><span>|</span><a href="#37137896">next</a><span>|</span><label class="collapse" for="c-37139738">[-]</label><label class="expand" for="c-37139738">[1 more]</label></div><br/><div class="children"><div class="content">OP did not specify what their industry actually is. I&#x27;ve been doing &quot;web work&quot; for 17 years and I&#x27;m sharing their concern: where&#x27;s the TL;DR for this? If this somehow can make me 100x as productive, how about starting with a &quot;hello world&quot; example that shows me how is it different from pip install django, etc?</div><br/></div></div></div></div></div></div><div id="37137896" class="c"><input type="checkbox" id="c-37137896" checked=""/><div class="controls bullet"><span class="by">buro9</span><span>|</span><a href="#37139356">prev</a><span>|</span><a href="#37137738">next</a><span>|</span><label class="collapse" for="c-37137896">[-]</label><label class="expand" for="c-37137896">[4 more]</label></div><br/><div class="children"><div class="content">Measuring &quot;Twitter Scale&quot; by tweets per second seems to be not how I would measure it.<p>Updates per second to end users who follow the 7K tweets per second seems more realistic, it&#x27;s the timelines and notifications that hurt, not the top of ingest tweets per second prior to the fan out... and then of course it&#x27;s whether you can do that continuously so as not to back up on it.</div><br/><div id="37137989" class="c"><input type="checkbox" id="c-37137989" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37137896">parent</a><span>|</span><a href="#37137738">next</a><span>|</span><label class="collapse" for="c-37137989">[-]</label><label class="expand" for="c-37137989">[3 more]</label></div><br/><div class="children"><div class="content">That&#x27;s why we&#x27;re saying &quot;at 403 fanout&quot;. The bottleneck of Mastodon&#x2F;Twitter is timeline writes, which is posts&#x2F;second multiplied by the average number of followers per post. So our instance is doing 1.4M timeline writes &#x2F; second.<p>Another important metric is &quot;time to deliver to follower timelines&quot;, which is tricky due to how much variance there can be every second due to the extremely unbalanced social graph. When someone with 20M followers posts, that multiples the number of needed timeline writes by 15x. We went into depth in our post on how we handled that to provide fairness by preventing these big users from hogging all the resources all at once.</div><br/><div id="37138269" class="c"><input type="checkbox" id="c-37138269" checked=""/><div class="controls bullet"><span class="by">faitswulff</span><span>|</span><a href="#37137896">root</a><span>|</span><a href="#37137989">parent</a><span>|</span><a href="#37137738">next</a><span>|</span><label class="collapse" for="c-37138269">[-]</label><label class="expand" for="c-37138269">[2 more]</label></div><br/><div class="children"><div class="content">I heard somewhere that one of the particular challenges of Twitter&#x27;s scale is not the average fanout, but the outliers where millions or tens of millions of users follow a single account. Does your simulation take that into account?</div><br/><div id="37138278" class="c"><input type="checkbox" id="c-37138278" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37137896">root</a><span>|</span><a href="#37138269">parent</a><span>|</span><a href="#37137738">next</a><span>|</span><label class="collapse" for="c-37138278">[-]</label><label class="expand" for="c-37138278">[1 more]</label></div><br/><div class="children"><div class="content">Yes, we discussed this at length in the post.</div><br/></div></div></div></div></div></div></div></div><div id="37137738" class="c"><input type="checkbox" id="c-37137738" checked=""/><div class="controls bullet"><span class="by">mping</span><span>|</span><a href="#37137896">prev</a><span>|</span><a href="#37137449">next</a><span>|</span><label class="collapse" for="c-37137738">[-]</label><label class="expand" for="c-37137738">[8 more]</label></div><br/><div class="children"><div class="content">Congrats on the (kinda) launch. I was curious to see what you guys were up to. The blog post is pretty detailed, and with good insights. Reducing modern app development complexity to mixing data structures sounds like a good abstraction. I&#x27;m sure you thought really hard about the building blocks of Rama and you know your problems better than most of the hn crowd.<p>Now, the really hard part becomes selling. If companies start using your product to get ahead, that will be the real proof, otherwise its &quot;just&quot; tech that is good on paper.<p>On a side note, did you guys got any inspiration from clojure? I see  lots of interesting projects propping up from clojure people...<p>Best of luck!</div><br/><div id="37137779" class="c"><input type="checkbox" id="c-37137779" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37137738">parent</a><span>|</span><a href="#37137449">next</a><span>|</span><label class="collapse" for="c-37137779">[-]</label><label class="expand" for="c-37137779">[7 more]</label></div><br/><div class="children"><div class="content">Rama is written in Clojure :)</div><br/><div id="37140267" class="c"><input type="checkbox" id="c-37140267" checked=""/><div class="controls bullet"><span class="by">mark_l_watson</span><span>|</span><a href="#37137738">root</a><span>|</span><a href="#37137779">parent</a><span>|</span><a href="#37138237">next</a><span>|</span><label class="collapse" for="c-37140267">[-]</label><label class="expand" for="c-37140267">[1 more]</label></div><br/><div class="children"><div class="content">Nathan, we guessed that it was written in Clojure :-)<p>Interesting to finally see the announcement.</div><br/></div></div><div id="37138237" class="c"><input type="checkbox" id="c-37138237" checked=""/><div class="controls bullet"><span class="by">cutler</span><span>|</span><a href="#37137738">root</a><span>|</span><a href="#37137779">parent</a><span>|</span><a href="#37140267">prev</a><span>|</span><a href="#37137449">next</a><span>|</span><label class="collapse" for="c-37138237">[-]</label><label class="expand" for="c-37138237">[5 more]</label></div><br/><div class="children"><div class="content">&quot;Rama is programmed entirely with a Java API&quot;.</div><br/><div id="37138282" class="c"><input type="checkbox" id="c-37138282" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37137738">root</a><span>|</span><a href="#37138237">parent</a><span>|</span><a href="#37137449">next</a><span>|</span><label class="collapse" for="c-37138282">[-]</label><label class="expand" for="c-37138282">[4 more]</label></div><br/><div class="children"><div class="content">The customer API in Java, and the implementation of that API is in Clojure.</div><br/><div id="37138383" class="c"><input type="checkbox" id="c-37138383" checked=""/><div class="controls bullet"><span class="by">fiddlerwoaroof</span><span>|</span><a href="#37137738">root</a><span>|</span><a href="#37138282">parent</a><span>|</span><a href="#37137449">next</a><span>|</span><label class="collapse" for="c-37138383">[-]</label><label class="expand" for="c-37138383">[3 more]</label></div><br/><div class="children"><div class="content">Will there be a first-party Clojure wrapper? Or, would the expectation be that users would use Java interop?</div><br/><div id="37138526" class="c"><input type="checkbox" id="c-37138526" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37137738">root</a><span>|</span><a href="#37138383">parent</a><span>|</span><a href="#37137449">next</a><span>|</span><label class="collapse" for="c-37138526">[-]</label><label class="expand" for="c-37138526">[2 more]</label></div><br/><div class="children"><div class="content">We&#x27;re not releasing one as we don&#x27;t have the bandwidth right now to maintain and document another API. That said, making a Clojure wrapper around the Java API should be pretty easy.</div><br/><div id="37142747" class="c"><input type="checkbox" id="c-37142747" checked=""/><div class="controls bullet"><span class="by">stefcoetzee</span><span>|</span><a href="#37137738">root</a><span>|</span><a href="#37138526">parent</a><span>|</span><a href="#37137449">next</a><span>|</span><label class="collapse" for="c-37142747">[-]</label><label class="expand" for="c-37142747">[1 more]</label></div><br/><div class="children"><div class="content">And hopefully, simple, too! ;)</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="37137449" class="c"><input type="checkbox" id="c-37137449" checked=""/><div class="controls bullet"><span class="by">Pxtl</span><span>|</span><a href="#37137738">prev</a><span>|</span><a href="#37137551">next</a><span>|</span><label class="collapse" for="c-37137449">[-]</label><label class="expand" for="c-37137449">[45 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve seen many people describe frameworks like this - you know, first you have the slow back-end event-driven master database that you don&#x27;t query live against, then you&#x27;ve got eventual-consistency flows against the various data-warehouses and data-stores and partitioned sharded databases in useful query-friendly layouts that you actually read live from... and I never see it clearly explained: how do you read a change back to the user literally just after they made the change?  How do you say &quot;other views eventual-consistency is fine but for this view of this bit of info we need it updated <i>now</i>&quot;.<p>This write-up is very detailed but I couldn&#x27;t find that explanation.</div><br/><div id="37137617" class="c"><input type="checkbox" id="c-37137617" checked=""/><div class="controls bullet"><span class="by">jedberg</span><span>|</span><a href="#37137449">parent</a><span>|</span><a href="#37137563">next</a><span>|</span><label class="collapse" for="c-37137617">[-]</label><label class="expand" for="c-37137617">[18 more]</label></div><br/><div class="children"><div class="content">The short answer is write-through cache.<p>You write the update directly to the cache closest to the user and into the eventually consistent queue.<p>We did this at reddit.  When you make a comment the HTML is rendered and put straight into the cache, and the raw text is put into the queue to go into the database.  Same with votes.  I suspect they do this client side now, which is now the closest cache to the user, but back then it was the server cache.</div><br/><div id="37139113" class="c"><input type="checkbox" id="c-37139113" checked=""/><div class="controls bullet"><span class="by">squeaky-clean</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37137617">parent</a><span>|</span><a href="#37138775">next</a><span>|</span><label class="collapse" for="c-37139113">[-]</label><label class="expand" for="c-37139113">[4 more]</label></div><br/><div class="children"><div class="content">In Nathan Marz&#x27;s (the article author) book, Big Data, he describes this and calls it the Speed Layer. I haven&#x27;t fully finished the article yet, but the components it&#x27;s describing seem to be equivalent to what he calls the Batch Layer and the Serving Layer in his book.<p>But I&#x27;m kind of getting the impression this works without any speed layer and is expected to be fast enough as-is.</div><br/><div id="37139258" class="c"><input type="checkbox" id="c-37139258" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37139113">parent</a><span>|</span><a href="#37138775">next</a><span>|</span><label class="collapse" for="c-37139258">[-]</label><label class="expand" for="c-37139258">[3 more]</label></div><br/><div class="children"><div class="content">Rama codifies and integrates the concepts I described in my book, with the high level model being: indexes = function(data) and query = function(indexes). These correspond to &quot;depots&quot; (data) , &quot;ETLs&quot; (functions), &quot;PStates&quot; (indexes), and &quot;queries&quot; (functions).<p>Rama is not batch-based. That is, PStates are not materialized by recomputing from scratch. They&#x27;re incrementally updated either with stream or microbatch processing. But PStates can be recomputed from the source data on depots if needed.</div><br/><div id="37141014" class="c"><input type="checkbox" id="c-37141014" checked=""/><div class="controls bullet"><span class="by">FridgeSeal</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37139258">parent</a><span>|</span><a href="#37140410">next</a><span>|</span><label class="collapse" for="c-37141014">[-]</label><label class="expand" for="c-37141014">[1 more]</label></div><br/><div class="children"><div class="content">Forgive me if I’m misunderstanding things, but this seems quite similar to what Materialize and ReadySet do, but like “as a library”, because Rama doesn’t use a “separate” layer for the storage stuff. Is that correct-ish?</div><br/></div></div><div id="37140410" class="c"><input type="checkbox" id="c-37140410" checked=""/><div class="controls bullet"><span class="by">Pxtl</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37139258">parent</a><span>|</span><a href="#37141014">prev</a><span>|</span><a href="#37138775">next</a><span>|</span><label class="collapse" for="c-37140410">[-]</label><label class="expand" for="c-37140410">[1 more]</label></div><br/><div class="children"><div class="content">So the idea is that you could do<p>1. send event data to depot<p>2. trigger localized ETLs (or put it high-priority in queue) to recalculate just the impacted data into relevant PStates<p>3. await completion of aforementioned ETLs<p>4. run query from updated PStates<p>Maybe too heavy for an upvote, but very appropriate for a an important transaction like a purchase.</div><br/></div></div></div></div></div></div><div id="37138775" class="c"><input type="checkbox" id="c-37138775" checked=""/><div class="controls bullet"><span class="by">jitl</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37137617">parent</a><span>|</span><a href="#37139113">prev</a><span>|</span><a href="#37138376">next</a><span>|</span><label class="collapse" for="c-37138775">[-]</label><label class="expand" for="c-37138775">[10 more]</label></div><br/><div class="children"><div class="content">Rama should bundle a write-through cache! Another in-memory JVM cluster thingamabob (Apache Ignite) used to propose write-through caching as it&#x27;s primary selling point: <a href="https:&#x2F;&#x2F;ignite.apache.org&#x2F;use-cases&#x2F;in-memory-cache.html#:~:text=Read%2DThrough%20%2F%20Write%2DThrough%20Caching&amp;text=When%20Apache%20Ignite%20is%20deployed,with%20the%20in%2Dmemory%20data" rel="nofollow noreferrer">https:&#x2F;&#x2F;ignite.apache.org&#x2F;use-cases&#x2F;in-memory-cache.html#:~:...</a>.<p>Or, maybe their pitch is that the streaming bits are so fast, you can just await the downstream commit of some write to a depot and it&#x27;ll be as fast as a normal SQL UPDATE.</div><br/><div id="37138868" class="c"><input type="checkbox" id="c-37138868" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37138775">parent</a><span>|</span><a href="#37138376">next</a><span>|</span><label class="collapse" for="c-37138868">[-]</label><label class="expand" for="c-37138868">[9 more]</label></div><br/><div class="children"><div class="content">Rama is extremely fast, as you can see for yourself by playing with our Mastodon instance.</div><br/><div id="37138910" class="c"><input type="checkbox" id="c-37138910" checked=""/><div class="controls bullet"><span class="by">jedberg</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37138868">parent</a><span>|</span><a href="#37138923">next</a><span>|</span><label class="collapse" for="c-37138910">[-]</label><label class="expand" for="c-37138910">[4 more]</label></div><br/><div class="children"><div class="content">It’s fast until it’s not. Making a post and then hitting reload and not seeing it can be very jarring for the user. Definitely something to think about.</div><br/><div id="37139063" class="c"><input type="checkbox" id="c-37139063" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37138910">parent</a><span>|</span><a href="#37138923">next</a><span>|</span><label class="collapse" for="c-37139063">[-]</label><label class="expand" for="c-37139063">[3 more]</label></div><br/><div class="children"><div class="content">What do you mean? Every post I do shows up instantly.<p>Reloading the page from scratch can be slow due to Soapbox doing a lot of stuff asynchronously from scratch (Soapbox is the open-source Mastodon interface that we&#x27;re using to serve the frontend). <a href="https:&#x2F;&#x2F;soapbox.pub&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;soapbox.pub&#x2F;</a></div><br/><div id="37139132" class="c"><input type="checkbox" id="c-37139132" checked=""/><div class="controls bullet"><span class="by">squeaky-clean</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37139063">parent</a><span>|</span><a href="#37138923">next</a><span>|</span><label class="collapse" for="c-37139132">[-]</label><label class="expand" for="c-37139132">[2 more]</label></div><br/><div class="children"><div class="content">I think the concern is will this still be true if Mastodon reaches Twitter scale?</div><br/><div id="37139208" class="c"><input type="checkbox" id="c-37139208" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37139132">parent</a><span>|</span><a href="#37138923">next</a><span>|</span><label class="collapse" for="c-37139208">[-]</label><label class="expand" for="c-37139208">[1 more]</label></div><br/><div class="children"><div class="content">Rama is scalable. So as your usage grows, you add resources to keep up. Scaling a Rama module is a trivial one-line command at the terminal.<p>Rama&#x27;s built-in telemetry provides the information you need to know when it&#x27;s time to scale.</div><br/></div></div></div></div></div></div></div></div><div id="37138923" class="c"><input type="checkbox" id="c-37138923" checked=""/><div class="controls bullet"><span class="by">jitl</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37138868">parent</a><span>|</span><a href="#37138910">prev</a><span>|</span><a href="#37138376">next</a><span>|</span><label class="collapse" for="c-37138923">[-]</label><label class="expand" for="c-37138923">[4 more]</label></div><br/><div class="children"><div class="content">is there a way to guarantee reading your own writes from a client perspective?</div><br/><div id="37139079" class="c"><input type="checkbox" id="c-37139079" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37138923">parent</a><span>|</span><a href="#37138376">next</a><span>|</span><label class="collapse" for="c-37139079">[-]</label><label class="expand" for="c-37139079">[3 more]</label></div><br/><div class="children"><div class="content">Yes. Depot appends by default don&#x27;t return success until colocated streaming topologies have completed processing the data. So this is one way to coordinate the frontend with changes on the backend.<p>Within an ETL, when the computations you do on PStates are colocated with them, you always read your own writes.</div><br/><div id="37139840" class="c"><input type="checkbox" id="c-37139840" checked=""/><div class="controls bullet"><span class="by">teacpde</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37139079">parent</a><span>|</span><a href="#37138376">next</a><span>|</span><label class="collapse" for="c-37139840">[-]</label><label class="expand" for="c-37139840">[2 more]</label></div><br/><div class="children"><div class="content">It makes sense, but wouldn’t the write be slow? Especially when you have many streaming pipelines.</div><br/><div id="37140338" class="c"><input type="checkbox" id="c-37140338" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37139840">parent</a><span>|</span><a href="#37138376">next</a><span>|</span><label class="collapse" for="c-37140338">[-]</label><label class="expand" for="c-37140338">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s part of designing Rama applications. Acking is only coordinated with colocated stream topologies – stream topologies consuming that depot from another module don&#x27;t add any latency.<p>Internally Rama does a lot of dynamic auto-batching for both depot appends and stream ETLs to amortize the cost of things like replication. So additional colocated stream topologies don&#x27;t necessarily add much cost (though that depends on how complex the topology is, of course).</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="37138376" class="c"><input type="checkbox" id="c-37138376" checked=""/><div class="controls bullet"><span class="by">kulahan</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37137617">parent</a><span>|</span><a href="#37138775">prev</a><span>|</span><a href="#37138288">next</a><span>|</span><label class="collapse" for="c-37138376">[-]</label><label class="expand" for="c-37138376">[1 more]</label></div><br/><div class="children"><div class="content">This explains so many bugs I came across on Reddit. I guess it works, but man I dislike this implementation.</div><br/></div></div><div id="37138288" class="c"><input type="checkbox" id="c-37138288" checked=""/><div class="controls bullet"><span class="by">reilly3000</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37137617">parent</a><span>|</span><a href="#37138376">prev</a><span>|</span><a href="#37137563">next</a><span>|</span><label class="collapse" for="c-37138288">[-]</label><label class="expand" for="c-37138288">[2 more]</label></div><br/><div class="children"><div class="content">DynamoDB’s DAX cache espouses the same approach.<p>I have to say in my ~12 years as an active Redditor I can’t recall a time where I saw any real state issues, even with rapidly changing votes, etc. Bravo!? Now that we’re beyond the days of molten servers, I have to say its overall reliability in the face of massive spiky traffic is quite a feat.</div><br/><div id="37138371" class="c"><input type="checkbox" id="c-37138371" checked=""/><div class="controls bullet"><span class="by">endisneigh</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37138288">parent</a><span>|</span><a href="#37137563">next</a><span>|</span><label class="collapse" for="c-37138371">[-]</label><label class="expand" for="c-37138371">[1 more]</label></div><br/><div class="children"><div class="content">Really? I see this all the time even now.</div><br/></div></div></div></div></div></div><div id="37137563" class="c"><input type="checkbox" id="c-37137563" checked=""/><div class="controls bullet"><span class="by">sixo</span><span>|</span><a href="#37137449">parent</a><span>|</span><a href="#37137617">prev</a><span>|</span><a href="#37142965">next</a><span>|</span><label class="collapse" for="c-37137563">[-]</label><label class="expand" for="c-37137563">[1 more]</label></div><br/><div class="children"><div class="content">I imagine you get some UUID back from your write, and effectively &quot;block&quot; until you see it committed to the event stream. The intent of such a system is certainly for the read-after-write latency to be not much longer than a traditional RDBMS. (This is roughly what the RDBMS is doing under the hood anyway.) Probably you can isolate latency-critical paths so they don&#x27;t get stuck behind big stream processing jobs.<p>The advantage of the overall architecture is that nearly all application functionality (for something like a social network) can tolerate much higher latency than an RDBMS, so you really want to have architectural building blocks that let you actually <i>use</i> this headroom.</div><br/></div></div><div id="37142965" class="c"><input type="checkbox" id="c-37142965" checked=""/><div class="controls bullet"><span class="by">throw14082020</span><span>|</span><a href="#37137449">parent</a><span>|</span><a href="#37137563">prev</a><span>|</span><a href="#37138816">next</a><span>|</span><label class="collapse" for="c-37142965">[-]</label><label class="expand" for="c-37142965">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s called &quot;read-after-write consistency&quot;. Write-through cache is one way, or just use a strongly consistent database, haha.<p><a href="https:&#x2F;&#x2F;avikdas.com&#x2F;2020&#x2F;04&#x2F;13&#x2F;scalability-concepts-read-after-write-consistency.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;avikdas.com&#x2F;2020&#x2F;04&#x2F;13&#x2F;scalability-concepts-read-aft...</a><p><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Cache_%28computing%29#Writing_policies" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Cache_%28computing%29#Writing_...</a><p><a href="https:&#x2F;&#x2F;cloud.google.com&#x2F;blog&#x2F;products&#x2F;databases&#x2F;why-you-should-pick-strong-consistency-whenever-possible" rel="nofollow noreferrer">https:&#x2F;&#x2F;cloud.google.com&#x2F;blog&#x2F;products&#x2F;databases&#x2F;why-you-sho...</a></div><br/></div></div><div id="37138816" class="c"><input type="checkbox" id="c-37138816" checked=""/><div class="controls bullet"><span class="by">chubot</span><span>|</span><a href="#37137449">parent</a><span>|</span><a href="#37142965">prev</a><span>|</span><a href="#37137543">next</a><span>|</span><label class="collapse" for="c-37138816">[-]</label><label class="expand" for="c-37138816">[8 more]</label></div><br/><div class="children"><div class="content">Yeah definitely, these ideas always sound very appealing to me, in theory -- I almost wonder why nobody has built it before<p>e.g. they mention &quot;event sourcing&quot; and &quot;materialized views&quot; in the post -- sounds good<p>But I thought I heard from a few people who were like &quot;we ripped event sourcing&quot; out of our codebase and so forth<p>And yeah your question is an obvious good one, and the Reddit answer of &quot;write through cache&quot; ... is less than satisfying to me<p>I FREQUENTLY have the problem where I reload the page and Reddit shows me stale data.  It&#x27;s SUPER buggy.<p>---<p>Anyway I definitely look forward to hearing people try this and what their longer term impressions are !<p>I basically want to know what  the tradeoffs are -- it sounds good, but there are always tradeoffs<p>So is the tradeoff &quot;eventual consistency&quot; ?  What are the other tradeoffs?</div><br/><div id="37139137" class="c"><input type="checkbox" id="c-37139137" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37138816">parent</a><span>|</span><a href="#37138873">next</a><span>|</span><label class="collapse" for="c-37139137">[-]</label><label class="expand" for="c-37139137">[5 more]</label></div><br/><div class="children"><div class="content">When you step back and consider the incredible amount of manpower and resources that have been put into these applications, it&#x27;s amazing how buggy these applications are. To put it simply, they&#x27;re buggy because the underlying infrastructure and techniques used to build them are so complex that the implementation is beyond the realm of human understanding.<p>The way applications are built, and have been built since before I was born, is by combining together potentially dozens of narrow tools together: databases, computation systems, caches, monitoring tools, etc. There has never been a cohesive model capable of expressing arbitrary backends end-to-end, and every application built has to be twisted to fit onto the existing narrow pieces.<p>Rama is a lot more than just &quot;event sourcing&quot; and &quot;materialized views&quot;. Those are two concepts at its foundation, but the real breakthrough is being that cohesive model capable of expressing diverse backends in their entirety. It took me more than five years of dedicated research to discover this model, and it was extremely difficult.</div><br/><div id="37139359" class="c"><input type="checkbox" id="c-37139359" checked=""/><div class="controls bullet"><span class="by">chubot</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37139137">parent</a><span>|</span><a href="#37140640">next</a><span>|</span><label class="collapse" for="c-37139359">[-]</label><label class="expand" for="c-37139359">[3 more]</label></div><br/><div class="children"><div class="content">Yes, I 100% agree with you.   I would like something like this to succeed, and agree the problem is real.<p>But what are the tradeoffs?  There&#x27;s nothing that comes with 100x benefit with no tradeoffs<p>(side note: I worked on Google Code for a short while in 2008, concurrent with Github&#x27;s founding ... I think Github moved a lot faster in a large part because they weren&#x27;t dealing with distributed systems at first -- they had a Rails app, a database, and RAID disks, and grew it from there.  We had BigTable and perf reviews :-P )<p>Eventual consistency is probably one?<p>Can I specify that comment editing is correct and ACID, while likes&#x2F;upvotes are eventually consistent?  (No is a fine answer, these problems are hard)<p>I read through much of the doc, and don&#x27;t see a mention of the word &quot;consistency&quot; at all, which seems like an oversight for something that is unifying what would be in a database with computation.</div><br/><div id="37140255" class="c"><input type="checkbox" id="c-37140255" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37139359">parent</a><span>|</span><a href="#37140640">next</a><span>|</span><label class="collapse" for="c-37140255">[-]</label><label class="expand" for="c-37140255">[2 more]</label></div><br/><div class="children"><div class="content">Rama is a much broader platform than a database, so the consistency semantics you get depend on how you use it. When using Rama, you&#x27;re not mutating indexes directly like you do with a database, but adding source data that then gets materialized into any number of indexes.<p>You get read-after-write consistency for any PStates in a streaming ETL colocated with the depot you appended to. This is if you do the depot append with &quot;full acking&quot;, which coordinates its response with the completion of colocated streaming ETLs. If you append at a lower level of acking, then you get eventual consistency on those PStates at the benefit of lower latency appends.<p>Microbatching is always eventually consistent as processing is asynchronous and uncoordinated to depot appends. Microbatching is higher thorughput than streaming and has simpler fault-tolerance semantics.<p>You&#x27;ll be able to read a lot more about this when we release the docs next week.</div><br/><div id="37140660" class="c"><input type="checkbox" id="c-37140660" checked=""/><div class="controls bullet"><span class="by">datavirtue</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37140255">parent</a><span>|</span><a href="#37140640">next</a><span>|</span><label class="collapse" for="c-37140660">[-]</label><label class="expand" for="c-37140660">[1 more]</label></div><br/><div class="children"><div class="content">I would like your newsletter.</div><br/></div></div></div></div></div></div><div id="37140640" class="c"><input type="checkbox" id="c-37140640" checked=""/><div class="controls bullet"><span class="by">datavirtue</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37139137">parent</a><span>|</span><a href="#37139359">prev</a><span>|</span><a href="#37138873">next</a><span>|</span><label class="collapse" for="c-37140640">[-]</label><label class="expand" for="c-37140640">[1 more]</label></div><br/><div class="children"><div class="content">You should try using Facebook marketplace. It is so rickety. I have to get on a desktop to use it at all.</div><br/></div></div></div></div><div id="37138873" class="c"><input type="checkbox" id="c-37138873" checked=""/><div class="controls bullet"><span class="by">chubot</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37138816">parent</a><span>|</span><a href="#37139137">prev</a><span>|</span><a href="#37137543">next</a><span>|</span><label class="collapse" for="c-37138873">[-]</label><label class="expand" for="c-37138873">[2 more]</label></div><br/><div class="children"><div class="content">Hilariously, I went to edit the above comment, and HN was overloaded.  Then it served me three or four 500&#x27;s, AND it served me stale data in between<p>I was pissed off that I would have to type my comment again, but actually it did save it, and refreshing worked.<p>From what I understand Hacker News is architected more in-memory, on one big box ... Perhaps similar to the event sourcing model<p>(not knocking hacker news -- it&#x27;s generally a very fast site, MUCH better  than Reddit.  Just that scaling beyond a single machine is difficult and full of gotchas )</div><br/><div id="37143017" class="c"><input type="checkbox" id="c-37143017" checked=""/><div class="controls bullet"><span class="by">kaba0</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37138873">parent</a><span>|</span><a href="#37137543">next</a><span>|</span><label class="collapse" for="c-37143017">[-]</label><label class="expand" for="c-37143017">[1 more]</label></div><br/><div class="children"><div class="content">StackOverflow used to run on a single (very beefy) machine also for a long time — databases make efficient use of vertical scaling, horizontal scaling is much harder.<p>Of course, specialist systems can often do much better.</div><br/></div></div></div></div></div></div><div id="37137543" class="c"><input type="checkbox" id="c-37137543" checked=""/><div class="controls bullet"><span class="by">jokethrowaway</span><span>|</span><a href="#37137449">parent</a><span>|</span><a href="#37138816">prev</a><span>|</span><a href="#37137560">next</a><span>|</span><label class="collapse" for="c-37137543">[-]</label><label class="expand" for="c-37137543">[14 more]</label></div><br/><div class="children"><div class="content">You can hack it and optimistically render the data you know about because your client created it - on the frontend, at no additional cost.</div><br/><div id="37137628" class="c"><input type="checkbox" id="c-37137628" checked=""/><div class="controls bullet"><span class="by">hot_gril</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37137543">parent</a><span>|</span><a href="#37137560">next</a><span>|</span><label class="collapse" for="c-37137628">[-]</label><label class="expand" for="c-37137628">[13 more]</label></div><br/><div class="children"><div class="content">This is usually what I do. Don&#x27;t even want to wait for an HTTP roundtrip for some of these, e.g. &quot;liking&quot; a post should fill in the heart icon or whatever instantly.<p>One famous example of this going to far: Mac Mail app used to play a whoosh sound when your email is actually sent. They changed it to whoosh instantly no matter what. Given how often an email might fail to send or get delayed, this meant an actually useful indication of &quot;great, your thing was sent, you can close your laptop now&quot; was rendered useless.</div><br/><div id="37137739" class="c"><input type="checkbox" id="c-37137739" checked=""/><div class="controls bullet"><span class="by">ceejayoz</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37137628">parent</a><span>|</span><a href="#37137560">next</a><span>|</span><label class="collapse" for="c-37137739">[-]</label><label class="expand" for="c-37137739">[12 more]</label></div><br/><div class="children"><div class="content">&gt; Don&#x27;t even want to wait for an HTTP roundtrip for some of these, e.g. &quot;liking&quot; a post should fill in the heart icon or whatever instantly.<p>HN does this, and on slow days, about half of my upvotes don&#x27;t go through.</div><br/><div id="37137789" class="c"><input type="checkbox" id="c-37137789" checked=""/><div class="controls bullet"><span class="by">hot_gril</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37137739">parent</a><span>|</span><a href="#37138875">next</a><span>|</span><label class="collapse" for="c-37137789">[-]</label><label class="expand" for="c-37137789">[3 more]</label></div><br/><div class="children"><div class="content">Messaging apps often have a checkmark to indicate the message actually went to the server, and maybe another checkmark to indicate it was received on the other end. Maybe HN needs an icon indicating that your vote went through.</div><br/><div id="37138843" class="c"><input type="checkbox" id="c-37138843" checked=""/><div class="controls bullet"><span class="by">newaccount74</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37137789">parent</a><span>|</span><a href="#37138875">next</a><span>|</span><label class="collapse" for="c-37138843">[-]</label><label class="expand" for="c-37138843">[2 more]</label></div><br/><div class="children"><div class="content">Make the arrows grey to indicate the click registered, make them disappear to indicate the server successfully registered the vote?</div><br/><div id="37140007" class="c"><input type="checkbox" id="c-37140007" checked=""/><div class="controls bullet"><span class="by">hot_gril</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37138843">parent</a><span>|</span><a href="#37138875">next</a><span>|</span><label class="collapse" for="c-37140007">[-]</label><label class="expand" for="c-37140007">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, it&#x27;s easy enough that I was able to do it in the web inspector in a minute (artificial 1s network delay added): <a href="https:&#x2F;&#x2F;s11.gifyu.com&#x2F;images&#x2F;ScPMI.gif" rel="nofollow noreferrer">https:&#x2F;&#x2F;s11.gifyu.com&#x2F;images&#x2F;ScPMI.gif</a></div><br/></div></div></div></div></div></div><div id="37138875" class="c"><input type="checkbox" id="c-37138875" checked=""/><div class="controls bullet"><span class="by">wizofaus</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37137739">parent</a><span>|</span><a href="#37137789">prev</a><span>|</span><a href="#37138460">next</a><span>|</span><label class="collapse" for="c-37138875">[-]</label><label class="expand" for="c-37138875">[2 more]</label></div><br/><div class="children"><div class="content">You actually check your list of upvoted comments?</div><br/><div id="37139160" class="c"><input type="checkbox" id="c-37139160" checked=""/><div class="controls bullet"><span class="by">ceejayoz</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37138875">parent</a><span>|</span><a href="#37138460">next</a><span>|</span><label class="collapse" for="c-37139160">[-]</label><label class="expand" for="c-37139160">[1 more]</label></div><br/><div class="children"><div class="content">No, I just notice it when I come back to the thread later in the day and a bunch of comments I know I upvoted are back to normal.</div><br/></div></div></div></div><div id="37138460" class="c"><input type="checkbox" id="c-37138460" checked=""/><div class="controls bullet"><span class="by">sitzkrieg</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37137739">parent</a><span>|</span><a href="#37138875">prev</a><span>|</span><a href="#37137560">next</a><span>|</span><label class="collapse" for="c-37138460">[-]</label><label class="expand" for="c-37138460">[6 more]</label></div><br/><div class="children"><div class="content">yea but does hn have any client side js?</div><br/><div id="37139015" class="c"><input type="checkbox" id="c-37139015" checked=""/><div class="controls bullet"><span class="by">codetrotter</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37138460">parent</a><span>|</span><a href="#37140033">next</a><span>|</span><label class="collapse" for="c-37139015">[-]</label><label class="expand" for="c-37139015">[4 more]</label></div><br/><div class="children"><div class="content">Yeah, a very small amount so that clicking the upvote button does not need to reload the whole page</div><br/><div id="37143410" class="c"><input type="checkbox" id="c-37143410" checked=""/><div class="controls bullet"><span class="by">bmacho</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37139015">parent</a><span>|</span><a href="#37140085">next</a><span>|</span><label class="collapse" for="c-37143410">[-]</label><label class="expand" for="c-37143410">[1 more]</label></div><br/><div class="children"><div class="content">Upvoting does work javascript disabled, it upvotes and reloads the page. It approximately keeps your position by jumping the message anchor.</div><br/></div></div><div id="37140085" class="c"><input type="checkbox" id="c-37140085" checked=""/><div class="controls bullet"><span class="by">hot_gril</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37139015">parent</a><span>|</span><a href="#37143410">prev</a><span>|</span><a href="#37140033">next</a><span>|</span><label class="collapse" for="c-37140085">[-]</label><label class="expand" for="c-37140085">[2 more]</label></div><br/><div class="children"><div class="content">Can confirm, HN relies on client-side JS for voting and collapsing, but view&#x2F;post&#x2F;edit&#x2F;delete don&#x27;t need it.</div><br/><div id="37141158" class="c"><input type="checkbox" id="c-37141158" checked=""/><div class="controls bullet"><span class="by">sitzkrieg</span><span>|</span><a href="#37137449">root</a><span>|</span><a href="#37140085">parent</a><span>|</span><a href="#37140033">next</a><span>|</span><label class="collapse" for="c-37141158">[-]</label><label class="expand" for="c-37141158">[1 more]</label></div><br/><div class="children"><div class="content">makes sense, thanks for the clarification yall</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="37139017" class="c"><input type="checkbox" id="c-37139017" checked=""/><div class="controls bullet"><span class="by">lossolo</span><span>|</span><a href="#37137449">parent</a><span>|</span><a href="#37137560">prev</a><span>|</span><a href="#37137551">next</a><span>|</span><label class="collapse" for="c-37139017">[-]</label><label class="expand" for="c-37139017">[1 more]</label></div><br/><div class="children"><div class="content">You have the option to track the latest update time and, during the minute immediately following this update, direct all reads to come from the leader. Additionally, you could oversee the replication lag among followers and block queries on any follower that lags more than a minute behind the leader.<p>For the client, it&#x27;s feasible to retain the timestamp of its most recent write. In this way, the system can ensure that the replica responsible for any reads related to that user incorporates updates at minimum up to that recorded timestamp. If a replica isn&#x27;t adequately current, the read can either be managed by another replica or the query can wait until the replica catches up. The timestamp might take the form of a logical timestamp, signifying the order of writes (e.g., log sequence number), or it could be based on the actual system clock, where synchronized clocks become vital.<p>When your replicas are spread across multiple datacenters—whether for user proximity or enhanced availability—there&#x27;s an added layer of complexity. Requests requiring the leader&#x27;s involvement must be directed to the datacenter housing the leader.</div><br/></div></div></div></div><div id="37137551" class="c"><input type="checkbox" id="c-37137551" checked=""/><div class="controls bullet"><span class="by">softwaredoug</span><span>|</span><a href="#37137449">prev</a><span>|</span><a href="#37139653">next</a><span>|</span><label class="collapse" for="c-37137551">[-]</label><label class="expand" for="c-37137551">[19 more]</label></div><br/><div class="children"><div class="content">It’s a massive ask, even if the platform was 100x better, for all developers to give up every programming language and database they’ve ever used to depend on a startups closed source platform for all functionality.<p>It’s hard enough trusting Google or Amazons cloud offerings won’t change.<p>It seems that’s what they’re proposing right? What am I missing?</div><br/><div id="37137593" class="c"><input type="checkbox" id="c-37137593" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37137551">parent</a><span>|</span><a href="#37139653">next</a><span>|</span><label class="collapse" for="c-37137593">[-]</label><label class="expand" for="c-37137593">[18 more]</label></div><br/><div class="children"><div class="content">We&#x27;re actually not asking anyone to give up anything. First off, it has a simple integration API (which you&#x27;ll be able to see the details of next week) that allows it to seamlessly integrate with any other backend tool (databases, monitoring systems, queues, etc.). So Rama can be incrementally introduced into any existing architecture.<p>Second, Rama has a pure Java API and is not a bespoke language. So no new language needs to be learned.</div><br/><div id="37137875" class="c"><input type="checkbox" id="c-37137875" checked=""/><div class="controls bullet"><span class="by">erlend_sh</span><span>|</span><a href="#37137551">root</a><span>|</span><a href="#37137593">parent</a><span>|</span><a href="#37139327">next</a><span>|</span><label class="collapse" for="c-37137875">[-]</label><label class="expand" for="c-37137875">[5 more]</label></div><br/><div class="children"><div class="content">So Rama-powered apps need to be written in Java? Or will any JVM language work?<p>And the Rama core will remain closed-source? That part seems like the toughest sell of all, at a time when the vast majority of developer tooling and backends are open source or at the very least source-available.</div><br/><div id="37138019" class="c"><input type="checkbox" id="c-37138019" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37137551">root</a><span>|</span><a href="#37137875">parent</a><span>|</span><a href="#37137980">next</a><span>|</span><label class="collapse" for="c-37138019">[-]</label><label class="expand" for="c-37138019">[3 more]</label></div><br/><div class="children"><div class="content">Any JVM language should work. We&#x27;ve built modules with Clojure.<p>We&#x27;re keeping it closed-source for now.</div><br/><div id="37139228" class="c"><input type="checkbox" id="c-37139228" checked=""/><div class="controls bullet"><span class="by">vanviegen</span><span>|</span><a href="#37137551">root</a><span>|</span><a href="#37138019">parent</a><span>|</span><a href="#37137980">next</a><span>|</span><label class="collapse" for="c-37139228">[-]</label><label class="expand" for="c-37139228">[2 more]</label></div><br/><div class="children"><div class="content">&gt; We&#x27;re keeping it closed-source for now.<p>Rama sounds interesting to me for my &#x27;next big project&#x27;, but I&#x27;d not even consider building it on top of a closed core. I think this is a pretty common sentiment in these circles.<p>I understand building an OSS business is not easy either. But perhaps there is some middle of the road that you can walk?<p>- A contractual obligation to open source all (now current) code a couple of years in the future? 
- Or an almost-OSS license that makes life difficult for competing cloud providers, like <a href="https:&#x2F;&#x2F;www.mongodb.com&#x2F;licensing&#x2F;server-side-public-license&#x2F;faq" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.mongodb.com&#x2F;licensing&#x2F;server-side-public-license...</a> ?</div><br/><div id="37143440" class="c"><input type="checkbox" id="c-37143440" checked=""/><div class="controls bullet"><span class="by">anonzzzies</span><span>|</span><a href="#37137551">root</a><span>|</span><a href="#37139228">parent</a><span>|</span><a href="#37137980">next</a><span>|</span><label class="collapse" for="c-37143440">[-]</label><label class="expand" for="c-37143440">[1 more]</label></div><br/><div class="children"><div class="content">Yep, not OSS licensed is a nope for us for core dependencies. I am aware many here like to sign away freedom (even future viability) for more productivity now (using some new fangled cloud thingy which might&#x2F;will be gone in a few months to underpin your entire product), but we are not interested in that.</div><br/></div></div></div></div></div></div><div id="37137980" class="c"><input type="checkbox" id="c-37137980" checked=""/><div class="controls bullet"><span class="by">roguas</span><span>|</span><a href="#37137551">root</a><span>|</span><a href="#37137875">parent</a><span>|</span><a href="#37138019">prev</a><span>|</span><a href="#37139327">next</a><span>|</span><label class="collapse" for="c-37137980">[-]</label><label class="expand" for="c-37137980">[1 more]</label></div><br/><div class="children"><div class="content">Since all jvm languages usually have &quot;ffi&quot; to javaapis&#x2F;javalibs, I would say yes.</div><br/></div></div></div></div><div id="37139327" class="c"><input type="checkbox" id="c-37139327" checked=""/><div class="controls bullet"><span class="by">kpw94</span><span>|</span><a href="#37137551">root</a><span>|</span><a href="#37137593">parent</a><span>|</span><a href="#37137875">prev</a><span>|</span><a href="#37137776">next</a><span>|</span><label class="collapse" for="c-37139327">[-]</label><label class="expand" for="c-37139327">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Rama can be incrementally introduced into any existing architecture<p>Big if true (and if the opposite, of incrementally <i>removing</i> it also works).  There have been similar platform efforts in past, such as <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=20985429">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=20985429</a> . For that one, the &quot;massive ask to give up every programming language and database they’ve ever used to depend on a startups closed source platform&quot; seems like the biggest hindrance to adoption.</div><br/></div></div><div id="37137776" class="c"><input type="checkbox" id="c-37137776" checked=""/><div class="controls bullet"><span class="by">mikae1</span><span>|</span><a href="#37137551">root</a><span>|</span><a href="#37137593">parent</a><span>|</span><a href="#37139327">prev</a><span>|</span><a href="#37139841">next</a><span>|</span><label class="collapse" for="c-37137776">[-]</label><label class="expand" for="c-37137776">[5 more]</label></div><br/><div class="children"><div class="content"><i>&gt; Second, Rama has a pure Java API and is not a bespoke language. So no new language needs to be learned.</i><p>Isn&#x27;t Mastodon a Ruby On Rails application?</div><br/><div id="37137788" class="c"><input type="checkbox" id="c-37137788" checked=""/><div class="controls bullet"><span class="by">theogravity</span><span>|</span><a href="#37137551">root</a><span>|</span><a href="#37137776">parent</a><span>|</span><a href="#37139841">next</a><span>|</span><label class="collapse" for="c-37137788">[-]</label><label class="expand" for="c-37137788">[4 more]</label></div><br/><div class="children"><div class="content">The article says they re-wrote Mastodon from scratch (probably the backend piece). I&#x27;m guessing in Java.</div><br/><div id="37138023" class="c"><input type="checkbox" id="c-37138023" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37137551">root</a><span>|</span><a href="#37137788">parent</a><span>|</span><a href="#37139841">next</a><span>|</span><label class="collapse" for="c-37138023">[-]</label><label class="expand" for="c-37138023">[3 more]</label></div><br/><div class="children"><div class="content">Yes, it&#x27;s 100% written in Java.</div><br/><div id="37140938" class="c"><input type="checkbox" id="c-37140938" checked=""/><div class="controls bullet"><span class="by">newlisp</span><span>|</span><a href="#37137551">root</a><span>|</span><a href="#37138023">parent</a><span>|</span><a href="#37139841">next</a><span>|</span><label class="collapse" for="c-37140938">[-]</label><label class="expand" for="c-37140938">[2 more]</label></div><br/><div class="children"><div class="content">This looks interesting and a nice weekend read but just skimming through, why is spring needed?</div><br/><div id="37142969" class="c"><input type="checkbox" id="c-37142969" checked=""/><div class="controls bullet"><span class="by">newlisp</span><span>|</span><a href="#37137551">root</a><span>|</span><a href="#37140938">parent</a><span>|</span><a href="#37139841">next</a><span>|</span><label class="collapse" for="c-37142969">[-]</label><label class="expand" for="c-37142969">[1 more]</label></div><br/><div class="children"><div class="content">Nevermind (it has to be paired with some web server&#x2F;framework).</div><br/></div></div></div></div></div></div></div></div></div></div><div id="37139841" class="c"><input type="checkbox" id="c-37139841" checked=""/><div class="controls bullet"><span class="by">softwaredoug</span><span>|</span><a href="#37137551">root</a><span>|</span><a href="#37137593">parent</a><span>|</span><a href="#37137776">prev</a><span>|</span><a href="#37137771">next</a><span>|</span><label class="collapse" for="c-37139841">[-]</label><label class="expand" for="c-37139841">[4 more]</label></div><br/><div class="children"><div class="content">I can imagine this being really useful from the ground up. Because it looks like it wants to be the source of truth, with different views on the data.<p>It’s hard to imagine it for a complex legacy application without having lots of added complexity. It wants to be the unifying programming model for the application. It would seem like running with two RDMS sources of truth simultaneously.<p>It’s like the xkcd “there are 12 ways of doing X, let’s create a standard to unify them” now there are 13 ways</div><br/><div id="37139887" class="c"><input type="checkbox" id="c-37139887" checked=""/><div class="controls bullet"><span class="by">fragmede</span><span>|</span><a href="#37137551">root</a><span>|</span><a href="#37139841">parent</a><span>|</span><a href="#37137771">next</a><span>|</span><label class="collapse" for="c-37139887">[-]</label><label class="expand" for="c-37139887">[3 more]</label></div><br/><div class="children"><div class="content">That&#x27;s xkcd 927.<p>9, which is 3^2, and 27, which is 3^3. Or 900 is Yoda&#x27;s age, and 27 which is the 27 club of musicians who committed suicide.</div><br/><div id="37140203" class="c"><input type="checkbox" id="c-37140203" checked=""/><div class="controls bullet"><span class="by">mkl</span><span>|</span><a href="#37137551">root</a><span>|</span><a href="#37139887">parent</a><span>|</span><a href="#37137771">next</a><span>|</span><label class="collapse" for="c-37140203">[-]</label><label class="expand" for="c-37140203">[2 more]</label></div><br/><div class="children"><div class="content">Most members of the 27 Club didn&#x27;t die by suicide: <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;27_Club" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;27_Club</a></div><br/><div id="37141039" class="c"><input type="checkbox" id="c-37141039" checked=""/><div class="controls bullet"><span class="by">russelg</span><span>|</span><a href="#37137551">root</a><span>|</span><a href="#37140203">parent</a><span>|</span><a href="#37137771">next</a><span>|</span><label class="collapse" for="c-37141039">[-]</label><label class="expand" for="c-37141039">[1 more]</label></div><br/><div class="children"><div class="content">True, but perhaps you could call drug overdosing suicide.</div><br/></div></div></div></div></div></div></div></div><div id="37137771" class="c"><input type="checkbox" id="c-37137771" checked=""/><div class="controls bullet"><span class="by">yazzku</span><span>|</span><a href="#37137551">root</a><span>|</span><a href="#37137593">parent</a><span>|</span><a href="#37139841">prev</a><span>|</span><a href="#37139653">next</a><span>|</span><label class="collapse" for="c-37137771">[-]</label><label class="expand" for="c-37137771">[2 more]</label></div><br/><div class="children"><div class="content">What is the licensing of Rama? Is it libre&#x2F;open?</div><br/><div id="37138518" class="c"><input type="checkbox" id="c-37138518" checked=""/><div class="controls bullet"><span class="by">masklinn</span><span>|</span><a href="#37137551">root</a><span>|</span><a href="#37137771">parent</a><span>|</span><a href="#37139653">next</a><span>|</span><label class="collapse" for="c-37138518">[-]</label><label class="expand" for="c-37138518">[1 more]</label></div><br/><div class="children"><div class="content">&gt; We&#x27;re keeping it closed-source for now.</div><br/></div></div></div></div></div></div></div></div><div id="37139653" class="c"><input type="checkbox" id="c-37139653" checked=""/><div class="controls bullet"><span class="by">ThinkBeat</span><span>|</span><a href="#37137551">prev</a><span>|</span><a href="#37137327">next</a><span>|</span><label class="collapse" for="c-37139653">[-]</label><label class="expand" for="c-37139653">[3 more]</label></div><br/><div class="children"><div class="content">I am confused.<p>This is meant to be hyped to sell your Rama platform&#x2F;product&#x2F;framework?
That you have spent 10 years building in secret?
During that time you have built a datastore and a Kafke competitor and ?<p>Should not those 10 years be factored into the time it took to develop this 
technical demo?<p>Is it 100x less code including every LOC in all of Rama?<p>I mean I am sure you picked a use cast that is well suited to creating a 
Twitterish architecture implementation.<p>If I went off and wrote a ThinkBeat platform for creating Twitterish systems
and then created a Twitterish implementation on top if it, its real easy to
reach low LOCs.</div><br/><div id="37140787" class="c"><input type="checkbox" id="c-37140787" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37139653">parent</a><span>|</span><a href="#37141326">next</a><span>|</span><label class="collapse" for="c-37140787">[-]</label><label class="expand" for="c-37140787">[1 more]</label></div><br/><div class="children"><div class="content">Your comment is addressed in another thread by other commenters: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=37137653">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=37137653</a></div><br/></div></div><div id="37141326" class="c"><input type="checkbox" id="c-37141326" checked=""/><div class="controls bullet"><span class="by">softwaredoug</span><span>|</span><a href="#37139653">parent</a><span>|</span><a href="#37140787">prev</a><span>|</span><a href="#37137327">next</a><span>|</span><label class="collapse" for="c-37141326">[-]</label><label class="expand" for="c-37141326">[1 more]</label></div><br/><div class="children"><div class="content">Kind of reminds me of when FoundationDB came out, they really needed to demonstrate lots of different use cases to prove they were the database storage layer to rule them all... Not just one</div><br/></div></div></div></div><div id="37137327" class="c"><input type="checkbox" id="c-37137327" checked=""/><div class="controls bullet"><span class="by">sharms</span><span>|</span><a href="#37139653">prev</a><span>|</span><a href="#37138224">next</a><span>|</span><label class="collapse" for="c-37137327">[-]</label><label class="expand" for="c-37137327">[6 more]</label></div><br/><div class="children"><div class="content">The performance on the example Mastodon instance is very responsive - almost anywhere I clicked loaded nearly instantly.  I created an account and the only thing I found missing was it doesn&#x27;t implement full text search unless my user was tagged, but that might be a Mastodon specific item.<p>I think they have thought a lot about typical hard problems, such as having the timeline processing happen along side the pipeline, taking network &#x2F; storage etc out of the picture.  Nice work!</div><br/><div id="37137368" class="c"><input type="checkbox" id="c-37137368" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37137327">parent</a><span>|</span><a href="#37138224">next</a><span>|</span><label class="collapse" for="c-37137368">[-]</label><label class="expand" for="c-37137368">[5 more]</label></div><br/><div class="children"><div class="content">That is indeed an intentional part of Mastodon&#x27;s design, which we tried to be faithful to as much as possible. We originally implemented search across all statuses and had to reimplement it when we realized Mastodon is a little different.</div><br/><div id="37138479" class="c"><input type="checkbox" id="c-37138479" checked=""/><div class="controls bullet"><span class="by">sitzkrieg</span><span>|</span><a href="#37137327">root</a><span>|</span><a href="#37137368">parent</a><span>|</span><a href="#37138224">next</a><span>|</span><label class="collapse" for="c-37138479">[-]</label><label class="expand" for="c-37138479">[4 more]</label></div><br/><div class="children"><div class="content">did you ever consider starting from something already technically performant like pleroma or misskey?</div><br/><div id="37138891" class="c"><input type="checkbox" id="c-37138891" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37137327">root</a><span>|</span><a href="#37138479">parent</a><span>|</span><a href="#37138224">next</a><span>|</span><label class="collapse" for="c-37138891">[-]</label><label class="expand" for="c-37138891">[3 more]</label></div><br/><div class="children"><div class="content">Well, we didn&#x27;t start from anything as we implemented this completely from scratch. I believe Mastodon is much more widely used than those so it seemed like a better target for this.</div><br/><div id="37139181" class="c"><input type="checkbox" id="c-37139181" checked=""/><div class="controls bullet"><span class="by">sitzkrieg</span><span>|</span><a href="#37137327">root</a><span>|</span><a href="#37138891">parent</a><span>|</span><a href="#37139131">prev</a><span>|</span><a href="#37138224">next</a><span>|</span><label class="collapse" for="c-37139181">[-]</label><label class="expand" for="c-37139181">[1 more]</label></div><br/><div class="children"><div class="content">yea i misspoke, good distinction lol. certainly makes sense, thanks</div><br/></div></div></div></div></div></div></div></div></div></div><div id="37138224" class="c"><input type="checkbox" id="c-37138224" checked=""/><div class="controls bullet"><span class="by">afro88</span><span>|</span><a href="#37137327">prev</a><span>|</span><a href="#37138063">next</a><span>|</span><label class="collapse" for="c-37138224">[-]</label><label class="expand" for="c-37138224">[5 more]</label></div><br/><div class="children"><div class="content">Looks amazing and incredibly smart. But I found the LOC and implementation time comparisons to Twitter and Threads very disingenuous. It makes me wonder what other wool will be pulled over our eyes with Rama in future (or important real world details missed &#x2F; future footguns).<p>Still super impressive. Reminds me of when I discovered Elixir while building a social-ish music discovery app. Switching the backend from Rails to Elixir felt like putting on clothes that actually fit after wearing old sweats. Rama looks like a similar jump, but another layer up, encompassing system architecture.</div><br/><div id="37138270" class="c"><input type="checkbox" id="c-37138270" checked=""/><div class="controls bullet"><span class="by">StephenAmar</span><span>|</span><a href="#37138224">parent</a><span>|</span><a href="#37138461">next</a><span>|</span><label class="collapse" for="c-37138270">[-]</label><label class="expand" for="c-37138270">[3 more]</label></div><br/><div class="children"><div class="content">+1 the comparisons are not great. How much engineer-hours did it take to build Rama itself?<p>The numbers they got for Twitter likely include the time it took to build their infrastructure, common libraries (like finagle,…)</div><br/><div id="37139571" class="c"><input type="checkbox" id="c-37139571" checked=""/><div class="controls bullet"><span class="by">jacoblambda</span><span>|</span><a href="#37138224">root</a><span>|</span><a href="#37138270">parent</a><span>|</span><a href="#37139297">next</a><span>|</span><label class="collapse" for="c-37139571">[-]</label><label class="expand" for="c-37139571">[1 more]</label></div><br/><div class="children"><div class="content">Honestly I&#x27;m willing to accept the number they gave since the author (Nathan Marz) was one of the lead&#x2F;founding devs for twitter&#x27;s streaming compute backend in the past.</div><br/></div></div><div id="37139297" class="c"><input type="checkbox" id="c-37139297" checked=""/><div class="controls bullet"><span class="by">paxys</span><span>|</span><a href="#37138224">root</a><span>|</span><a href="#37138270">parent</a><span>|</span><a href="#37139571">prev</a><span>|</span><a href="#37138461">next</a><span>|</span><label class="collapse" for="c-37139297">[-]</label><label class="expand" for="c-37139297">[1 more]</label></div><br/><div class="children"><div class="content">Don&#x27;t forget their entire ads system, data processing&#x2F;analytics, monitoring, customer support, payments, internationalization. They have replicated <i>at most</i> a tiny bit of Twitter&#x27;s core infra for sending Tweets. The company itself does a lot more than that.</div><br/></div></div></div></div><div id="37138461" class="c"><input type="checkbox" id="c-37138461" checked=""/><div class="controls bullet"><span class="by">softwaredoug</span><span>|</span><a href="#37138224">parent</a><span>|</span><a href="#37138270">prev</a><span>|</span><a href="#37138063">next</a><span>|</span><label class="collapse" for="c-37138461">[-]</label><label class="expand" for="c-37138461">[1 more]</label></div><br/><div class="children"><div class="content">It’s hard to construct a true randomized control trial for software engineering methods. People make many claims about programming paradigms or tools hard to validate.<p>It’s also unsure what we would compare a tool like this to. I doubt you could just say “compare it to Rails” given how frameworks like rails are bound to specific data models, and most realistic applications. You’d have to compare it to some other opinion about how to wire together different data structures.</div><br/></div></div></div></div><div id="37138063" class="c"><input type="checkbox" id="c-37138063" checked=""/><div class="controls bullet"><span class="by">clusterhacks</span><span>|</span><a href="#37138224">prev</a><span>|</span><a href="#37138668">next</a><span>|</span><label class="collapse" for="c-37138063">[-]</label><label class="expand" for="c-37138063">[4 more]</label></div><br/><div class="children"><div class="content">I&#x27;m excited to see the docs for Rama. But I am also a little scared of the comment &quot; I came to suspect a new programming paradigm was needed&quot; from Nathan.<p>It&#x27;s not so much that I think the comment is wrong or anything, but rather that it seems so similar to what I have heard in the past from power-lisp (or Clojure in this case) super-smart engineers.<p>I feel like we have reached a point in software development where &quot;better&quot; paradigms don&#x27;t necessarily gain much adoption. But if Rama wins in the marketplace, that will be interesting. And I am quite excited to see what a smart tech leader and good team have been able to grind out given a years-long timeframe in this programming platform space . . .</div><br/><div id="37138158" class="c"><input type="checkbox" id="c-37138158" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37138063">parent</a><span>|</span><a href="#37138668">next</a><span>|</span><label class="collapse" for="c-37138158">[-]</label><label class="expand" for="c-37138158">[3 more]</label></div><br/><div class="children"><div class="content">This is why we exposed Rama as a Java API rather than Clojure or our internal language (which is defined with Clojure macros, so it&#x27;s technically also Clojure).  Rama&#x27;s Java dataflow API is effectively a subset of our internal language, with operations like &quot;partitioners&quot; being implemented using continuations.</div><br/><div id="37138357" class="c"><input type="checkbox" id="c-37138357" checked=""/><div class="controls bullet"><span class="by">cutler</span><span>|</span><a href="#37138063">root</a><span>|</span><a href="#37138158">parent</a><span>|</span><a href="#37138668">next</a><span>|</span><label class="collapse" for="c-37138357">[-]</label><label class="expand" for="c-37138357">[2 more]</label></div><br/><div class="children"><div class="content">Just curious, what advantage over Clojure did reverting to &quot;pure Java&quot; give you? Perf or something else?</div><br/><div id="37138575" class="c"><input type="checkbox" id="c-37138575" checked=""/><div class="controls bullet"><span class="by">mwcampbell</span><span>|</span><a href="#37138063">root</a><span>|</span><a href="#37138357">parent</a><span>|</span><a href="#37138668">next</a><span>|</span><label class="collapse" for="c-37138575">[-]</label><label class="expand" for="c-37138575">[1 more]</label></div><br/><div class="children"><div class="content">Presumably approachability for programmers that would be scared away by Clojure. Smart marketing move.</div><br/></div></div></div></div></div></div></div></div><div id="37138668" class="c"><input type="checkbox" id="c-37138668" checked=""/><div class="controls bullet"><span class="by">jitl</span><span>|</span><a href="#37138063">prev</a><span>|</span><a href="#37140059">next</a><span>|</span><label class="collapse" for="c-37138668">[-]</label><label class="expand" for="c-37138668">[2 more]</label></div><br/><div class="children"><div class="content">This architecture seems very similar to existing offerings in the &quot;in-memory data grid&quot; category, like Apache Ignite and Hazelcast. I&#x27;m more familiar with Ignite (I built a toy  Notion backend with it over a few afternoons in 2020).<p>The way Ignite works overall is similar. You make a cluster of JVM processes, your data partitioned and replicated across the cluster, and you upload some JARs of business logic to the cluster to do things. Your business logic can specify locality so it runs on the same nodes as the relevant data, which ideally makes things a lot faster compared to systems where you need to pull all your data across the wire from a DB. Like Rama, Ignite uses a Java API for everything, including serializing and storing plain &#x27;ol java objects.<p>Ignite&#x27;s architecture isn&#x27;t focused on &quot;ETL&quot; into &quot;PStates&quot;. Instead it&#x27;s more about distributed &quot;caches&quot; of data. It does have streaming for ingestion (<a href="https:&#x2F;&#x2F;ignite.apache.org&#x2F;docs&#x2F;latest&#x2F;data-streaming" rel="nofollow noreferrer">https:&#x2F;&#x2F;ignite.apache.org&#x2F;docs&#x2F;latest&#x2F;data-streaming</a>), but you can transactionally update the datastore directly (<a href="https:&#x2F;&#x2F;ignite.apache.org&#x2F;docs&#x2F;latest&#x2F;key-value-api&#x2F;transactions" rel="nofollow noreferrer">https:&#x2F;&#x2F;ignite.apache.org&#x2F;docs&#x2F;latest&#x2F;key-value-api&#x2F;transact...</a>). It also has a &quot;continuous query&quot; feature for those reactive queries to retrieve data (<a href="https:&#x2F;&#x2F;ignite.apache.org&#x2F;docs&#x2F;latest&#x2F;key-value-api&#x2F;continuous-queries" rel="nofollow noreferrer">https:&#x2F;&#x2F;ignite.apache.org&#x2F;docs&#x2F;latest&#x2F;key-value-api&#x2F;continuo...</a>).<p>Rama&#x27;s data-structure oriented PState index seems easier to work with than building indexes yourself on top of Ignite&#x27;s KV cache, but Ignite also offers an SQL language, so you can insert your data into the KV cache however, add some custom SQL functions, and then accept more flexible SQL querying of your data compared to the very purpose-built PCache things, but still be able to do lower-level or more performance-oriented logic with data locality.<p>Anyways, if you like some of this stuff but want to use an existing, already battle-tested open source project, you can look for these &quot;in-memory data grid&quot;, &quot;distributed cache&quot;, kind of projects. There&#x27;s a few more out there that have similar JVM cluster computing models.</div><br/><div id="37138823" class="c"><input type="checkbox" id="c-37138823" checked=""/><div class="controls bullet"><span class="by">theptip</span><span>|</span><a href="#37138668">parent</a><span>|</span><a href="#37140059">next</a><span>|</span><label class="collapse" for="c-37138823">[-]</label><label class="expand" for="c-37138823">[1 more]</label></div><br/><div class="children"><div class="content">Hazelcast has been on my list to explore for a while. Anyone have pointers to a good sample project &#x2F; deep-dive in the same sort of spirit as the OP here?<p>Also would love to hear folks’ thoughts on the sort of usecase where this data grid excels.</div><br/></div></div></div></div><div id="37140059" class="c"><input type="checkbox" id="c-37140059" checked=""/><div class="controls bullet"><span class="by">miki123211</span><span>|</span><a href="#37138668">prev</a><span>|</span><a href="#37143509">next</a><span>|</span><label class="collapse" for="c-37140059">[-]</label><label class="expand" for="c-37140059">[2 more]</label></div><br/><div class="children"><div class="content">Is this just me, or does the code in the post feel like they&#x27;ve implemented what should have been a new programming language on top of Java?<p>Their &quot;variables&quot; have names that you have to keep as Java strings and pass to random functions. If you want composable code, you don&#x27;t declare a function, you call .macro(). For control flow and loops, you don&#x27;t use if and for, but a weird abstraction of theirs.<p>I feel like this code could have been a lot simpler if it was written in a specialized language (or a mainstream language with a specialized transpiler and&#x2F;or Macro capabilities.)<p>I&#x27;d quote the old adage about every big program containing a slow and buggy implementation of Common Lisp, but considering that this thing is written in Clojure, the authors have probably heard it before.</div><br/><div id="37140818" class="c"><input type="checkbox" id="c-37140818" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37140059">parent</a><span>|</span><a href="#37143509">next</a><span>|</span><label class="collapse" for="c-37140818">[-]</label><label class="expand" for="c-37140818">[1 more]</label></div><br/><div class="children"><div class="content">Internally there actually is a new programming language, implemented using Clojure macros (so it&#x27;s also Clojure). The Java dataflow API is exposing a subset of that language. We did it this way rather than expose this new language directly because most people don&#x27;t know Clojure and we don&#x27;t feel it necessary or desirable to require people to have to learn a new language to benefit from this technology.</div><br/></div></div></div></div><div id="37143509" class="c"><input type="checkbox" id="c-37143509" checked=""/><div class="controls bullet"><span class="by">beefnugs</span><span>|</span><a href="#37140059">prev</a><span>|</span><a href="#37137612">next</a><span>|</span><label class="collapse" for="c-37143509">[-]</label><label class="expand" for="c-37143509">[1 more]</label></div><br/><div class="children"><div class="content">I think the marketing idea of this is amazing : I would probably never even consider learning and reading about such a framework if I heard of it straight up.
But if you are really releasing a usable open source implementation of something performant that actually federates properly, that is a huge selling point that buys you a ton of respect up front.</div><br/></div></div><div id="37137612" class="c"><input type="checkbox" id="c-37137612" checked=""/><div class="controls bullet"><span class="by">skybrian</span><span>|</span><a href="#37143509">prev</a><span>|</span><a href="#37138093">next</a><span>|</span><label class="collapse" for="c-37137612">[-]</label><label class="expand" for="c-37137612">[6 more]</label></div><br/><div class="children"><div class="content">It sounds like interesting technology for someone, but I wonder more about scaling down. What does a developer instance running on a laptop look like?</div><br/><div id="37137753" class="c"><input type="checkbox" id="c-37137753" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37137612">parent</a><span>|</span><a href="#37138093">next</a><span>|</span><label class="collapse" for="c-37137753">[-]</label><label class="expand" for="c-37137753">[5 more]</label></div><br/><div class="children"><div class="content">Great question. There&#x27;s actually two ways to look at this: what does it look like to run Rama in a unit test environment, and what does it look like to run a small-scale single-node Rama application in production?<p>For the former, Rama has a class called &quot;InProcessCluster&quot; that works identically to a real cluster. It enables Rama applications to be tested and experimented with end-to-end. There&#x27;s an example of this in the post and this is what we&#x27;re releasing next week.<p>For the latter, Rama can be run on a single node with each daemon and module being a separate process. We made it really easy to launch single-node Rama instances with just a couple commands with the &quot;rama&quot; script that comes with the release. That said, we haven&#x27;t spent much time yet optimizing small-scale Rama deployments and there&#x27;s likely things we can do to make it more efficient (e.g. combine the Conductor and Supervisor daemons into a single process).</div><br/><div id="37139410" class="c"><input type="checkbox" id="c-37139410" checked=""/><div class="controls bullet"><span class="by">joelthelion</span><span>|</span><a href="#37137612">root</a><span>|</span><a href="#37137753">parent</a><span>|</span><a href="#37138585">next</a><span>|</span><label class="collapse" for="c-37139410">[-]</label><label class="expand" for="c-37139410">[2 more]</label></div><br/><div class="children"><div class="content">Follow up question : do you see Rama as being a good fit for applications that &#x2F;don&#x27;t&#x2F; need Twitter scale? These have simpler requirements, but I feel the integration you propose could still have value there.</div><br/><div id="37139823" class="c"><input type="checkbox" id="c-37139823" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37137612">root</a><span>|</span><a href="#37139410">parent</a><span>|</span><a href="#37138585">next</a><span>|</span><label class="collapse" for="c-37139823">[-]</label><label class="expand" for="c-37139823">[1 more]</label></div><br/><div class="children"><div class="content">Yes, it&#x27;s a better model for developing backends in general. Our comparison against Mastodon&#x27;s official implementation demonstrates this, being at least 44% less code.<p>It&#x27;s the ability to avoid the impedance mismatches which dominate existing tooling that makes such a difference. With existing databases, including RDBMS&#x27;s, you have to twist your application to fit their data models. The existence of things like ORMs help, but they add their own layers of complexity.<p>With Rama, you mold your indexes to exactly match your application&#x27;s needs. And you&#x27;re always just working with objects represented however you want, whether appending data to depots, processing data in ETLs, or storing data in PStates.<p>That computation and storage are integrated and colocated is another way that Rama simplifies application development and deployment.</div><br/></div></div></div></div><div id="37138585" class="c"><input type="checkbox" id="c-37138585" checked=""/><div class="controls bullet"><span class="by">dunk010</span><span>|</span><a href="#37137612">root</a><span>|</span><a href="#37137753">parent</a><span>|</span><a href="#37139410">prev</a><span>|</span><a href="#37140136">next</a><span>|</span><label class="collapse" for="c-37138585">[-]</label><label class="expand" for="c-37138585">[1 more]</label></div><br/><div class="children"><div class="content">You&#x27;re killing it with the replies here +++</div><br/></div></div><div id="37140136" class="c"><input type="checkbox" id="c-37140136" checked=""/><div class="controls bullet"><span class="by">skybrian</span><span>|</span><a href="#37137612">root</a><span>|</span><a href="#37137753">parent</a><span>|</span><a href="#37138585">prev</a><span>|</span><a href="#37138093">next</a><span>|</span><label class="collapse" for="c-37140136">[-]</label><label class="expand" for="c-37140136">[1 more]</label></div><br/><div class="children"><div class="content">Interesting. How about running the cloud? I&#x27;m thinking of the many ways someone who wants to start a blog could install Ghost. [1]<p>[1] <a href="https:&#x2F;&#x2F;ghost.org&#x2F;docs&#x2F;install&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;ghost.org&#x2F;docs&#x2F;install&#x2F;</a></div><br/></div></div></div></div></div></div><div id="37138093" class="c"><input type="checkbox" id="c-37138093" checked=""/><div class="controls bullet"><span class="by">failuser</span><span>|</span><a href="#37137612">prev</a><span>|</span><a href="#37144036">next</a><span>|</span><label class="collapse" for="c-37138093">[-]</label><label class="expand" for="c-37138093">[1 more]</label></div><br/><div class="children"><div class="content">Is there a breakdown of effort Twitter spent doing the mastodon-level service (serving a feed of the accounts you are subscribed to) vs everything else like ads, algorithmic feed, moderation, fighting spam, copyright claims, localization, GR, PR, safety, etc?</div><br/></div></div><div id="37144036" class="c"><input type="checkbox" id="c-37144036" checked=""/><div class="controls bullet"><span class="by">wink</span><span>|</span><a href="#37138093">prev</a><span>|</span><a href="#37139014">next</a><span>|</span><label class="collapse" for="c-37144036">[-]</label><label class="expand" for="c-37144036">[1 more]</label></div><br/><div class="children"><div class="content">Look, I don&#x27;t want to defend Twitter but ignoring 15 years of changes and the whole journey of scaling and then using the cost op just building a snapshot of the 15y old version is pretty disingenuous.<p>That&#x27;s a bit like starting an Oracle clone now and summing up what they spent on developer salaries in the last 40 years. You basically can&#x27;t not &quot;reduce costs&quot;.<p>And no &quot;the original consumer product&quot; is not a real cop-out, you probably still have tons of people building iterations.</div><br/></div></div><div id="37139014" class="c"><input type="checkbox" id="c-37139014" checked=""/><div class="controls bullet"><span class="by">kyle-rb</span><span>|</span><a href="#37144036">prev</a><span>|</span><a href="#37143323">next</a><span>|</span><label class="collapse" for="c-37139014">[-]</label><label class="expand" for="c-37139014">[4 more]</label></div><br/><div class="children"><div class="content">Kinda disappointed by the simulation, where are all the viral posts?<p>I&#x27;ve been digging around for a while and haven&#x27;t found any posts with more than 20 faves. The accounts I&#x27;ve found with ~1 million followers have little to no engagement. I want to see how a post with a million faves holds up to the promises of &quot;fast constant time&quot;.<p>I&#x27;m especially curious about these queries — fave-count and has-user-faved — since a couple years ago Twitter stopped checking has-user-faved when rendering posts more than a month or so old, so I imagine it was expensive at scale.</div><br/><div id="37139734" class="c"><input type="checkbox" id="c-37139734" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37139014">parent</a><span>|</span><a href="#37143323">next</a><span>|</span><label class="collapse" for="c-37139734">[-]</label><label class="expand" for="c-37139734">[3 more]</label></div><br/><div class="children"><div class="content">The load generator generates boosts&#x2F;favorites for a subset of posts that are randomly picked to be &quot;popular&quot;. However, since the rate of posts is so high even individual posts picked to be &quot;popular&quot; are only getting ~70 reactions.<p>Tracking reactions is considerably easier than timeline fanout though, as a favorite does a small handful of things (updates set of users favoriting a status and sending a notification), while fanout has to do an operation on every follower (403 operations on average, sometimes up to 22M).<p>The code getting the favorite count for a status looks like:<p><pre><code>  .localSelect(&quot;$$statusIdToFavoriters&quot;, Path.key(&quot;*statusId&quot;).view(Ops.SIZE)).out(&quot;*numFavorites&quot;)
</code></pre>
Because the nested set is subindexed, that&#x27;s an extremely fast operation (looking at our telemetry, about 0.05ms).<p>Determining &quot;has-user-faved&quot; looks like:<p><pre><code>  .localSelect(&quot;$$statusIdToFavoriters&quot;, Path.key(&quot;*statusId&quot;).view(Ops.CONTAINS, &quot;*accountId&quot;)).out(&quot;\*hasFavorited&quot;)
</code></pre>
The API server doesn&#x27;t do these queries individually, which would be two roundtrips. It does them together in a query topology along with fetching other needed information (like number of boosts, number of replies, &quot;has boosted&quot;, &quot;has muted this status&quot;, etc.).</div><br/><div id="37140309" class="c"><input type="checkbox" id="c-37140309" checked=""/><div class="controls bullet"><span class="by">kyle-rb</span><span>|</span><a href="#37139014">root</a><span>|</span><a href="#37139734">parent</a><span>|</span><a href="#37143323">next</a><span>|</span><label class="collapse" for="c-37140309">[-]</label><label class="expand" for="c-37140309">[2 more]</label></div><br/><div class="children"><div class="content">Thanks for the response, I&#x27;m still curious about the details of the subindexing and how that scales. I&#x27;ll be keeping an eye out for the release!</div><br/><div id="37140946" class="c"><input type="checkbox" id="c-37140946" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37139014">root</a><span>|</span><a href="#37140309">parent</a><span>|</span><a href="#37143323">next</a><span>|</span><label class="collapse" for="c-37140946">[-]</label><label class="expand" for="c-37140946">[1 more]</label></div><br/><div class="children"><div class="content">A lot of detail on subindexing and everything else in Rama is coming next week when we release the docs.</div><br/></div></div></div></div></div></div></div></div><div id="37143323" class="c"><input type="checkbox" id="c-37143323" checked=""/><div class="controls bullet"><span class="by">zubairq</span><span>|</span><a href="#37139014">prev</a><span>|</span><a href="#37143435">next</a><span>|</span><label class="collapse" for="c-37143323">[-]</label><label class="expand" for="c-37143323">[1 more]</label></div><br/><div class="children"><div class="content">As someone who has worked in both startups and Enterprise IT for over 30 years (including large Java based systems) I see a use case for Rama in large companies who have a lot of difficulty glueing many different systems together to achieve scalability. So I think that Red Planet Labs could get several contracts in the 100k USD and over range in large Enterprises. This is for enterprises who have the problem of integrating many systems to achieve scalability and who are already large Java shops.<p>However, I do not see Rama&#x27;s initial market being startups, since they just want the simplest way possible to build UI + backend and want to iterate super fast with tech that their developers already know in the initial stages.</div><br/></div></div><div id="37143435" class="c"><input type="checkbox" id="c-37143435" checked=""/><div class="controls bullet"><span class="by">runeks</span><span>|</span><a href="#37143323">prev</a><span>|</span><a href="#37137284">next</a><span>|</span><label class="collapse" for="c-37143435">[-]</label><label class="expand" for="c-37143435">[1 more]</label></div><br/><div class="children"><div class="content">&gt; To demonstrate the scale of our instance, we’re also running 100M bot accounts which continuously post statuses (Mastodon’s analogue of a “tweet”), replies, boosts (“retweet”), and favorites. 3,500 statuses are posted per second, the average number of followers for each post is 403, and the largest account has over 22M followers. As a comparison, Twitter serves 7,000 tweets per second at 700 average fanout (according to the numbers I could find).<p>Is Twitters 7k tweets per second the average? If so, what’s the peak rate, and have you tested your system under this load?</div><br/></div></div><div id="37137284" class="c"><input type="checkbox" id="c-37137284" checked=""/><div class="controls bullet"><span class="by">NoraCodes</span><span>|</span><a href="#37143435">prev</a><span>|</span><a href="#37139363">next</a><span>|</span><label class="collapse" for="c-37137284">[-]</label><label class="expand" for="c-37137284">[18 more]</label></div><br/><div class="children"><div class="content">I would argue that this is not &quot;a Mastodon instance&quot;, since it is not running Mastodon - other than that, very very neat work! I&#x27;m excited for that &quot;Source Code&quot; link to be live :)</div><br/><div id="37138250" class="c"><input type="checkbox" id="c-37138250" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37137284">parent</a><span>|</span><a href="#37137349">next</a><span>|</span><label class="collapse" for="c-37138250">[-]</label><label class="expand" for="c-37138250">[7 more]</label></div><br/><div class="children"><div class="content">We call it a &quot;Mastodon instance&quot; because we implemented the entire Mastodon API (<a href="https:&#x2F;&#x2F;docs.joinmastodon.org&#x2F;api&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;docs.joinmastodon.org&#x2F;api&#x2F;</a>). This is in addition to also implementing the ActivityPub API which Mastodon also implements for federation.</div><br/><div id="37140726" class="c"><input type="checkbox" id="c-37140726" checked=""/><div class="controls bullet"><span class="by">dools</span><span>|</span><a href="#37137284">root</a><span>|</span><a href="#37138250">parent</a><span>|</span><a href="#37142869">next</a><span>|</span><label class="collapse" for="c-37140726">[-]</label><label class="expand" for="c-37140726">[1 more]</label></div><br/><div class="children"><div class="content">&quot;Originally, Twitter was one, monolithic application built with Ruby on Rails. But now, it&#x27;s divided into about two hundred self-contained services that talk to each other. Each runs atop the JVM, with most written in Scala and some in Java and Clojure&quot;[1]<p>So is Twitter not a Twitter instance? Like if it looks, walks and toots like a Mastodon, is it not a Mastodon instance?<p>[1] <a href="https:&#x2F;&#x2F;www.wired.com&#x2F;2013&#x2F;09&#x2F;the-second-coming-of-java&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.wired.com&#x2F;2013&#x2F;09&#x2F;the-second-coming-of-java&#x2F;</a></div><br/></div></div><div id="37142869" class="c"><input type="checkbox" id="c-37142869" checked=""/><div class="controls bullet"><span class="by">mal-2</span><span>|</span><a href="#37137284">root</a><span>|</span><a href="#37138250">parent</a><span>|</span><a href="#37140726">prev</a><span>|</span><a href="#37140611">next</a><span>|</span><label class="collapse" for="c-37142869">[-]</label><label class="expand" for="c-37142869">[1 more]</label></div><br/><div class="children"><div class="content">That doesn&#x27;t match the way people use the term though. Pleroma and Akkoma implement the Mastodon API but wouldn&#x27;t be called Mastodon instances since they aren&#x27;t running Mastodon.</div><br/></div></div><div id="37140611" class="c"><input type="checkbox" id="c-37140611" checked=""/><div class="controls bullet"><span class="by">legi0nary</span><span>|</span><a href="#37137284">root</a><span>|</span><a href="#37138250">parent</a><span>|</span><a href="#37142869">prev</a><span>|</span><a href="#37138850">next</a><span>|</span><label class="collapse" for="c-37140611">[-]</label><label class="expand" for="c-37140611">[2 more]</label></div><br/><div class="children"><div class="content">If you can do this with Bluesky once it federates we might be able to get away from twitter for good.</div><br/><div id="37140734" class="c"><input type="checkbox" id="c-37140734" checked=""/><div class="controls bullet"><span class="by">INTPenis</span><span>|</span><a href="#37137284">root</a><span>|</span><a href="#37140611">parent</a><span>|</span><a href="#37138850">next</a><span>|</span><label class="collapse" for="c-37140734">[-]</label><label class="expand" for="c-37140734">[1 more]</label></div><br/><div class="children"><div class="content">&gt;We spent nine person-months building our scalable Mastodon instance<p>They federated this brand new code in 9 months, and bluesky still hasn&#x27;t released anything regarding federation. Don&#x27;t keep your hopes up, it would kill their business model to let anyone run part of the network. People-driven networks are just not compatible with commercially driven ones, name one successful example.</div><br/></div></div></div></div><div id="37138850" class="c"><input type="checkbox" id="c-37138850" checked=""/><div class="controls bullet"><span class="by">CharlesW</span><span>|</span><a href="#37137284">root</a><span>|</span><a href="#37138250">parent</a><span>|</span><a href="#37140611">prev</a><span>|</span><a href="#37138632">next</a><span>|</span><label class="collapse" for="c-37138850">[-]</label><label class="expand" for="c-37138850">[1 more]</label></div><br/><div class="children"><div class="content">&gt; <i>We call it a &quot;Mastodon instance&quot; because we implemented the entire Mastodon API…</i><p>Except &quot;Mastodon instance&quot; means an instance of Mastodon, which is open source. Whether or not it was intended to be deceptive (I&#x27;d think a group of smart people would know better), this personally left a bad taste in my mouth.</div><br/></div></div><div id="37138632" class="c"><input type="checkbox" id="c-37138632" checked=""/><div class="controls bullet"><span class="by">mattl</span><span>|</span><a href="#37137284">root</a><span>|</span><a href="#37138250">parent</a><span>|</span><a href="#37138850">prev</a><span>|</span><a href="#37137349">next</a><span>|</span><label class="collapse" for="c-37138632">[-]</label><label class="expand" for="c-37138632">[1 more]</label></div><br/><div class="children"><div class="content">Mastodon-compatible would be better.<p>Mastodon is the name of a piece of software as well as an API, a website, etc.<p>Naming this stuff is hard but calling it a Mastodon instance would be more confusing.</div><br/></div></div></div></div><div id="37137349" class="c"><input type="checkbox" id="c-37137349" checked=""/><div class="controls bullet"><span class="by">ollien</span><span>|</span><a href="#37137284">parent</a><span>|</span><a href="#37138250">prev</a><span>|</span><a href="#37137339">next</a><span>|</span><label class="collapse" for="c-37137349">[-]</label><label class="expand" for="c-37137349">[4 more]</label></div><br/><div class="children"><div class="content">Yeah, I think this is just an ActivityPub server that supports the Mastodon extensions, right? I think we should embrace the fact that the federated world can be diverse, rather than just call everything &quot;Mastodon&quot;</div><br/><div id="37137679" class="c"><input type="checkbox" id="c-37137679" checked=""/><div class="controls bullet"><span class="by">jauntywundrkind</span><span>|</span><a href="#37137284">root</a><span>|</span><a href="#37137349">parent</a><span>|</span><a href="#37137339">next</a><span>|</span><label class="collapse" for="c-37137679">[-]</label><label class="expand" for="c-37137679">[3 more]</label></div><br/><div class="children"><div class="content">Mastodon has it&#x27;s own API. It basically offers a very limited ActivityPub API too, but it&#x27;s own API is very different.<p>And it&#x27;s a very slim ActivityPub inplementation. For example, I don&#x27;t think you can do basic things like get an individual post in ActivityPub. This should be easy simple json-ld to get but it&#x27;s just 404. <a href="https:&#x2F;&#x2F;www.w3.org&#x2F;TR&#x2F;activitypub&#x2F;#retrieving-objects" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.w3.org&#x2F;TR&#x2F;activitypub&#x2F;#retrieving-objects</a></div><br/><div id="37138129" class="c"><input type="checkbox" id="c-37138129" checked=""/><div class="controls bullet"><span class="by">colatkinson</span><span>|</span><a href="#37137284">root</a><span>|</span><a href="#37137679">parent</a><span>|</span><a href="#37138153">next</a><span>|</span><label class="collapse" for="c-37138129">[-]</label><label class="expand" for="c-37138129">[1 more]</label></div><br/><div class="children"><div class="content">Mastodon for sure supports fetching individual posts over ActivityPub. For example:<p><pre><code>    curl -L -H &#x27;accept: application&#x2F;activity+json&#x27; &#x27;https:&#x2F;&#x2F;mastodon.social&#x2F;users&#x2F;Gargron&#x2F;statuses&#x2F;18614983&#x27;
</code></pre>
It does have a bunch of stuff that isn&#x27;t federated though, such as Like counts&#x2F;collections. And of course it only implements the server-to-server (S2S) part of AP, not the client-to-server (C2S) part.</div><br/></div></div><div id="37138153" class="c"><input type="checkbox" id="c-37138153" checked=""/><div class="controls bullet"><span class="by">pmlnr</span><span>|</span><a href="#37137284">root</a><span>|</span><a href="#37137679">parent</a><span>|</span><a href="#37138129">prev</a><span>|</span><a href="#37137339">next</a><span>|</span><label class="collapse" for="c-37138153">[-]</label><label class="expand" for="c-37138153">[1 more]</label></div><br/><div class="children"><div class="content">Mastodon. o. not a.</div><br/></div></div></div></div></div></div><div id="37137339" class="c"><input type="checkbox" id="c-37137339" checked=""/><div class="controls bullet"><span class="by">rvnx</span><span>|</span><a href="#37137284">parent</a><span>|</span><a href="#37137349">prev</a><span>|</span><a href="#37137721">next</a><span>|</span><label class="collapse" for="c-37137339">[-]</label><label class="expand" for="c-37137339">[2 more]</label></div><br/><div class="children"><div class="content">I think it&#x27;s smart from a legal perspective, because the team members seem to partially be coming from companies acquired by Twitter.<p>So I guess, if you say &quot;it&#x27;s a Mastodon-clone&quot;, you cannot be accused of taking proprietary ideas from Twitter (this is just a guess, they know better).<p>But technically very interesting and refreshing to see. I really like their approach. It feels they are innovative.</div><br/><div id="37143569" class="c"><input type="checkbox" id="c-37143569" checked=""/><div class="controls bullet"><span class="by">progval</span><span>|</span><a href="#37137284">root</a><span>|</span><a href="#37137339">parent</a><span>|</span><a href="#37137721">next</a><span>|</span><label class="collapse" for="c-37143569">[-]</label><label class="expand" for="c-37143569">[1 more]</label></div><br/><div class="children"><div class="content">From a legal perspective, it&#x27;s against Mastodon&#x27;s trademark policy: &quot;Only use the Mastodon marks to accurately identify those goods or services that are built using the Mastodon software.&quot; <a href="https:&#x2F;&#x2F;joinmastodon.org&#x2F;trademark" rel="nofollow noreferrer">https:&#x2F;&#x2F;joinmastodon.org&#x2F;trademark</a></div><br/></div></div></div></div><div id="37137721" class="c"><input type="checkbox" id="c-37137721" checked=""/><div class="controls bullet"><span class="by">mikae1</span><span>|</span><a href="#37137284">parent</a><span>|</span><a href="#37137339">prev</a><span>|</span><a href="#37138028">next</a><span>|</span><label class="collapse" for="c-37137721">[-]</label><label class="expand" for="c-37137721">[1 more]</label></div><br/><div class="children"><div class="content">It was a good blog post title choice for making it to the front page of HN.</div><br/></div></div><div id="37137375" class="c"><input type="checkbox" id="c-37137375" checked=""/><div class="controls bullet"><span class="by">Pxtl</span><span>|</span><a href="#37137284">parent</a><span>|</span><a href="#37138028">prev</a><span>|</span><a href="#37137712">next</a><span>|</span><label class="collapse" for="c-37137375">[-]</label><label class="expand" for="c-37137375">[1 more]</label></div><br/><div class="children"><div class="content">Yes, a &quot;mastodon-like Fediverse instance running on our proprietary new application&#x2F;data framework&quot; sounds like a better description.<p>And either way, I think the source code to their Mastodonlike will not be usable since it will be running on their Rama server framework.</div><br/></div></div><div id="37137712" class="c"><input type="checkbox" id="c-37137712" checked=""/><div class="controls bullet"><span class="by">frandroid</span><span>|</span><a href="#37137284">parent</a><span>|</span><a href="#37137375">prev</a><span>|</span><a href="#37139363">next</a><span>|</span><label class="collapse" for="c-37137712">[-]</label><label class="expand" for="c-37137712">[1 more]</label></div><br/><div class="children"><div class="content">Mastodon-compatible or Mastodon clone...  If it quacks and walks like a duck, surely it is part of the aviary family of microblogging services...</div><br/></div></div></div></div><div id="37139363" class="c"><input type="checkbox" id="c-37139363" checked=""/><div class="controls bullet"><span class="by">yayitswei</span><span>|</span><a href="#37137284">prev</a><span>|</span><a href="#37141068">next</a><span>|</span><label class="collapse" for="c-37139363">[-]</label><label class="expand" for="c-37139363">[1 more]</label></div><br/><div class="children"><div class="content">For context, nathanmarz created what is now Apache Storm, which is used for stream processing at some of the world&#x27;s largest companies, so he knows a thing or two about scale.</div><br/></div></div><div id="37141068" class="c"><input type="checkbox" id="c-37141068" checked=""/><div class="controls bullet"><span class="by">beders</span><span>|</span><a href="#37139363">prev</a><span>|</span><a href="#37137629">next</a><span>|</span><label class="collapse" for="c-37141068">[-]</label><label class="expand" for="c-37141068">[1 more]</label></div><br/><div class="children"><div class="content">This is a lovely and very detailed showcase in how to combine streaming+ETL+materalized-view+query!<p>That said: You need better advisors. Your investors and&#x2F;or the board gave you bad advice on how to publish these accomplishments and talk about them.<p>I hope your go-to-market strategy works out a little better.
Hyperbole is fine, but at least on hacker news, the audience is a bit careful with regards to grandiose statements.<p>What might work well on an investor presentation might backfire when you target engineers as audience.</div><br/></div></div><div id="37137629" class="c"><input type="checkbox" id="c-37137629" checked=""/><div class="controls bullet"><span class="by">gfodor</span><span>|</span><a href="#37141068">prev</a><span>|</span><a href="#37143976">next</a><span>|</span><label class="collapse" for="c-37137629">[-]</label><label class="expand" for="c-37137629">[2 more]</label></div><br/><div class="children"><div class="content">Something I&#x27;m immediately thinking about with this is change management and inertia at the early stages of a new, underdefined project. Less code is great, the big question is how such a system compares to the usual hack-and-slash method of getting a v1 up and running as you search for PMF from the perspectives of ops, cost, data migrations, rapid deployments, and so on. Presumably, the idea here is to start from the beginning with Rama, skipping over the usual &quot;monolith fetches from RDBMS&quot; happy paths, even for your basic prototype, this way you don&#x27;t slip into a situation like Twitter did where that grew slowly into an unscalable monstrosity requiring a rewrite. So an article focused on the &quot;easy&quot; part that&#x27;s required in the beginning of rapid change, as much as it&#x27;s not as important as the &quot;simple&quot; part that shines later at scale, seems useful.</div><br/><div id="37138299" class="c"><input type="checkbox" id="c-37138299" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37137629">parent</a><span>|</span><a href="#37143976">next</a><span>|</span><label class="collapse" for="c-37138299">[-]</label><label class="expand" for="c-37138299">[1 more]</label></div><br/><div class="children"><div class="content">Thanks, this is a good idea for a another post.<p>The basic operation Rama provides for evolving an application over time is &quot;module update&quot;. This lets you update the code for an existing module, including adding new depots, PStates, and topologies.</div><br/></div></div></div></div><div id="37143976" class="c"><input type="checkbox" id="c-37143976" checked=""/><div class="controls bullet"><span class="by">runeks</span><span>|</span><a href="#37137629">prev</a><span>|</span><a href="#37143472">next</a><span>|</span><label class="collapse" for="c-37143976">[-]</label><label class="expand" for="c-37143976">[1 more]</label></div><br/><div class="children"><div class="content">Sounds like Rama is also useful for small scale applications (where high scalability isn’t needed), since it simplifies how they’re implemented.<p>Is this the case — ie. would a TodoMVC app implemented in Rama also be much simpler than a traditional frontend&#x2F;backend&#x2F;database CRUD implementation?</div><br/></div></div><div id="37143472" class="c"><input type="checkbox" id="c-37143472" checked=""/><div class="controls bullet"><span class="by">alexcpn</span><span>|</span><a href="#37143976">prev</a><span>|</span><a href="#37137345">next</a><span>|</span><label class="collapse" for="c-37143472">[-]</label><label class="expand" for="c-37143472">[2 more]</label></div><br/><div class="children"><div class="content">Why choose Java of all languages. Why not something more modern and less verbose like Go or Rust. Just asking as I have worked enough in Java and then spend a lot of time in GC tunining. Granted the code was not that great and from a diverse team with different skill levels causing all the leaks.. But still</div><br/><div id="37144434" class="c"><input type="checkbox" id="c-37144434" checked=""/><div class="controls bullet"><span class="by">jillesvangurp</span><span>|</span><a href="#37143472">parent</a><span>|</span><a href="#37137345">next</a><span>|</span><label class="collapse" for="c-37144434">[-]</label><label class="expand" for="c-37144434">[1 more]</label></div><br/><div class="children"><div class="content">They actually used clojure; which is an interesting choice.<p>GC tuning on the JVM is much less of a topic these days than it used to be. The default garbage collector was changed at some point (G1). It has some configuration options but they come with sane defaults that mostly just work fine and adapt to your memory and cpus. You don&#x27;t spend a lot (or any) time on tuning this typically. I know I haven&#x27;t even looked at GC params in many years now. Never had to. And we run on modestly sized vms of 1 or 2 GB typically. This was different 10 or so years ago when G1 was still newish and not default. ZGC was introduced with Java 11 (I think), and aimed at very large heaps. It trades off additional overhead for guaranteeing very low latency. That tradeoff is why it is not default. For most users, G1 without any tuning whatsoever should be fine. Generally, if you are stressing your heap, you get more hardware. And if you are not, the GC should be keeping up just fine.<p>Anyway, like it or not, the JVM has been a work horse for big data for ages. Things like Hadoop, Kafka, Cassandra, Elasticsearch, etc. all run on it and scale fine (and typically without a lot of GC tuning). The only feasible alternative to the jvm used to be things like C++. Lately, Go and Rust are pretty credible in this space as well and both have had to do a bit of catchup in terms of maturity of tooling, libraries, and language features. Things like generics (Go), async (Rust), etc. are still fairly recent additions and both kind of relevant in a project of this type.<p>In any case, switching languages is hard for teams and these guys have been around for quite some time. When they started, Rust was a lot less mature than it is now and Go was still pretty new as well. Neither was an obvious choice for this stuff at the time.</div><br/></div></div></div></div><div id="37139050" class="c"><input type="checkbox" id="c-37139050" checked=""/><div class="controls bullet"><span class="by">ltr_</span><span>|</span><a href="#37137345">prev</a><span>|</span><a href="#37137387">next</a><span>|</span><label class="collapse" for="c-37139050">[-]</label><label class="expand" for="c-37139050">[2 more]</label></div><br/><div class="children"><div class="content">i always had this question: how realistically is to, having an standard spec and interoperable protocols, for toxic apps of big international tech companies that provides &quot;&quot;&quot;services&quot;&quot;&quot;, so instances of implementations can be maintained by municipalities or local tech business and talent with 100x less employees and money?
what policies should be in place to achieve that? what would be the challenges? it would be better&#x2F;healthier? is someone researching such things like transition to sustainable digital services? (sustainable in terms of local labor, privacy, economy, accountability, etc...)<p>i mean if you think about this as public services not as a business, profit is secondary, and first is just to make the thing better and better for the users, no need for spying , no advertisement, no need for a rich piece of shit somewhere getting a piece of the money paid in your city for every taxi drive, food delivery or to give up privacy to a soulless&#x2F;faceless entity just because you want to say something publicly or keep in touch with people. there is no disruption from their part, its just an old thing put on the internet, they are just in the middle of everyone&#x27;s life, just sucking everything they can. is the actual state of affairs &quot;efficient&quot;?<p>there must be fed up engineers and tech people everywhere with the sad state of IT industry.</div><br/><div id="37139164" class="c"><input type="checkbox" id="c-37139164" checked=""/><div class="controls bullet"><span class="by">5636588</span><span>|</span><a href="#37139050">parent</a><span>|</span><a href="#37137387">next</a><span>|</span><label class="collapse" for="c-37139164">[-]</label><label class="expand" for="c-37139164">[1 more]</label></div><br/><div class="children"><div class="content">The EU already has regulations in place regarding open banking with its Payment Services Directive. I&#x27;d imagine a similar framework could be applied to big social tech.</div><br/></div></div></div></div><div id="37137387" class="c"><input type="checkbox" id="c-37137387" checked=""/><div class="controls bullet"><span class="by">duped</span><span>|</span><a href="#37139050">prev</a><span>|</span><a href="#37141978">next</a><span>|</span><label class="collapse" for="c-37137387">[-]</label><label class="expand" for="c-37137387">[4 more]</label></div><br/><div class="children"><div class="content">This is what they&#x27;ve been hyping on Twitter for a week?<p>FWIW, why hype at all? Why &quot;We&#x27;ll more in a week. Then more in two weeks.&quot; Show the code today!</div><br/><div id="37138975" class="c"><input type="checkbox" id="c-37138975" checked=""/><div class="controls bullet"><span class="by">newaccount74</span><span>|</span><a href="#37137387">parent</a><span>|</span><a href="#37141978">next</a><span>|</span><label class="collapse" for="c-37138975">[-]</label><label class="expand" for="c-37138975">[3 more]</label></div><br/><div class="children"><div class="content">Considering the length and amount of detail in this blog post, I understand why they would need another week to get the code ready (assuming there will be more docs)</div><br/><div id="37139270" class="c"><input type="checkbox" id="c-37139270" checked=""/><div class="controls bullet"><span class="by">nathanmarz</span><span>|</span><a href="#37137387">root</a><span>|</span><a href="#37138975">parent</a><span>|</span><a href="#37141978">next</a><span>|</span><label class="collapse" for="c-37139270">[-]</label><label class="expand" for="c-37139270">[2 more]</label></div><br/><div class="children"><div class="content">We&#x27;re releasing 100k words of high-quality documentation next week.</div><br/><div id="37141264" class="c"><input type="checkbox" id="c-37141264" checked=""/><div class="controls bullet"><span class="by">dbish</span><span>|</span><a href="#37137387">root</a><span>|</span><a href="#37139270">parent</a><span>|</span><a href="#37141978">next</a><span>|</span><label class="collapse" for="c-37141264">[-]</label><label class="expand" for="c-37141264">[1 more]</label></div><br/><div class="children"><div class="content">Measuring words and loc is not a great way, imho, to share what you’re doing. In fact, I’d love a much shorter set of documentation now to under and this better. Long docs will probably make it less likely to read.</div><br/></div></div></div></div></div></div></div></div><div id="37141978" class="c"><input type="checkbox" id="c-37141978" checked=""/><div class="controls bullet"><span class="by">gexla</span><span>|</span><a href="#37137387">prev</a><span>|</span><a href="#37141090">next</a><span>|</span><label class="collapse" for="c-37141978">[-]</label><label class="expand" for="c-37141978">[1 more]</label></div><br/><div class="children"><div class="content">This is fascinating, and I&#x27;m glad to have come across it. And your story is inspiring. Thank you!<p>One question, why Google Groups rather than something like Discord? Not sure I would trust Google Groups to be around long.</div><br/></div></div><div id="37141090" class="c"><input type="checkbox" id="c-37141090" checked=""/><div class="controls bullet"><span class="by">cduzz</span><span>|</span><a href="#37141978">prev</a><span>|</span><label class="collapse" for="c-37141090">[-]</label><label class="expand" for="c-37141090">[1 more]</label></div><br/><div class="children"><div class="content">I would hazard the guess that twitter&#x27;s &quot;show tweets to other people&quot; is 1&#x2F;40th of the functionality piled into twitter; some other large functions would be things like &quot;track ad sales&quot; or &quot;improve engagement&quot; or &quot;allow random law enforcement organizations to engage in whatever access is needed for any particular part of the world&quot;  Each of those is going to be a huge pile of code and all of it working together is going to N! your complexity.</div><br/></div></div></div></div></div></div></div></body></html>