<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1723194080904" as="style"/><link rel="stylesheet" href="styles.css?v=1723194080904"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.sqlite.org/fts5.html">SQLite FTS5 Extension</a> <span class="domain">(<a href="https://www.sqlite.org">www.sqlite.org</a>)</span></div><div class="subtext"><span>thunderbong</span> | <span>25 comments</span></div><br/><div><div id="41199155" class="c"><input type="checkbox" id="c-41199155" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#41199126">next</a><span>|</span><label class="collapse" for="c-41199155">[-]</label><label class="expand" for="c-41199155">[8 more]</label></div><br/><div class="children"><div class="content">This is hugely underrated in my opinion: it’s a very competent search engine.<p>It also ships as part of the Python standard library, so if your machine has Python installed you have a high quality search engine ready to use without installing anything else.<p>I have a CLI tool (and Python library) for working with it here: <a href="https:&#x2F;&#x2F;sqlite-utils.datasette.io&#x2F;en&#x2F;stable&#x2F;cli.html#configuring-full-text-search" rel="nofollow">https:&#x2F;&#x2F;sqlite-utils.datasette.io&#x2F;en&#x2F;stable&#x2F;cli.html#configu...</a></div><br/><div id="41199307" class="c"><input type="checkbox" id="c-41199307" checked=""/><div class="controls bullet"><span class="by">anitil</span><span>|</span><a href="#41199155">parent</a><span>|</span><a href="#41199428">next</a><span>|</span><label class="collapse" for="c-41199307">[-]</label><label class="expand" for="c-41199307">[1 more]</label></div><br/><div class="children"><div class="content">On a lark I used this to build a local-first code search tool for my organisation. Of course I used datasette for running the queries.<p>Other than getting all my git access revoked and receiving a very concerned email from our security team, it was a great project.</div><br/></div></div><div id="41199428" class="c"><input type="checkbox" id="c-41199428" checked=""/><div class="controls bullet"><span class="by">rcarmo</span><span>|</span><a href="#41199155">parent</a><span>|</span><a href="#41199307">prev</a><span>|</span><a href="#41199861">next</a><span>|</span><label class="collapse" for="c-41199428">[-]</label><label class="expand" for="c-41199428">[1 more]</label></div><br/><div class="children"><div class="content">I have been using it as my only searching engine for my blog in years and it’s much better than anything else I’ve thrown at it. For bonus points, peewee ORM supports it directly.</div><br/></div></div><div id="41199861" class="c"><input type="checkbox" id="c-41199861" checked=""/><div class="controls bullet"><span class="by">nxicvyvy</span><span>|</span><a href="#41199155">parent</a><span>|</span><a href="#41199428">prev</a><span>|</span><a href="#41199282">next</a><span>|</span><label class="collapse" for="c-41199861">[-]</label><label class="expand" for="c-41199861">[1 more]</label></div><br/><div class="children"><div class="content">Shh, it&#x27;s a secret, don&#x27;t tell people.</div><br/></div></div><div id="41199282" class="c"><input type="checkbox" id="c-41199282" checked=""/><div class="controls bullet"><span class="by">wahnfrieden</span><span>|</span><a href="#41199155">parent</a><span>|</span><a href="#41199861">prev</a><span>|</span><a href="#41199126">next</a><span>|</span><label class="collapse" for="c-41199282">[-]</label><label class="expand" for="c-41199282">[4 more]</label></div><br/><div class="children"><div class="content">though useless for many non english languages</div><br/><div id="41199451" class="c"><input type="checkbox" id="c-41199451" checked=""/><div class="controls bullet"><span class="by">epcoa</span><span>|</span><a href="#41199155">root</a><span>|</span><a href="#41199282">parent</a><span>|</span><a href="#41199407">next</a><span>|</span><label class="collapse" for="c-41199451">[-]</label><label class="expand" for="c-41199451">[2 more]</label></div><br/><div class="children"><div class="content">Eh? The tokenizers are fully pluggable, the Unicode and ICU tokenizers will be good for many purposes and you can always drop something specific in.<p>Eg <a href="https:&#x2F;&#x2F;github.com&#x2F;wangfenjin&#x2F;simple">https:&#x2F;&#x2F;github.com&#x2F;wangfenjin&#x2F;simple</a></div><br/><div id="41199529" class="c"><input type="checkbox" id="c-41199529" checked=""/><div class="controls bullet"><span class="by">wahnfrieden</span><span>|</span><a href="#41199155">root</a><span>|</span><a href="#41199451">parent</a><span>|</span><a href="#41199407">next</a><span>|</span><label class="collapse" for="c-41199529">[-]</label><label class="expand" for="c-41199529">[1 more]</label></div><br/><div class="children"><div class="content">I know it’s extensible, with original work. ICU isn’t helpful for some languages</div><br/></div></div></div></div><div id="41199407" class="c"><input type="checkbox" id="c-41199407" checked=""/><div class="controls bullet"><span class="by">keithalewis</span><span>|</span><a href="#41199155">root</a><span>|</span><a href="#41199282">parent</a><span>|</span><a href="#41199451">prev</a><span>|</span><a href="#41199126">next</a><span>|</span><label class="collapse" for="c-41199407">[-]</label><label class="expand" for="c-41199407">[1 more]</label></div><br/><div class="children"><div class="content">As useless as you are for whining about not getting something you want for free?</div><br/></div></div></div></div></div></div><div id="41199126" class="c"><input type="checkbox" id="c-41199126" checked=""/><div class="controls bullet"><span class="by">iansinnott</span><span>|</span><a href="#41199155">prev</a><span>|</span><a href="#41199429">next</a><span>|</span><label class="collapse" for="c-41199126">[-]</label><label class="expand" for="c-41199126">[3 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a very useful feature of sqlite and it also works great in-browser using wa-sqlite[0]. Example, if anyone&#x27;s curious [1].<p>[0]: <a href="https:&#x2F;&#x2F;github.com&#x2F;rhashimoto&#x2F;wa-sqlite">https:&#x2F;&#x2F;github.com&#x2F;rhashimoto&#x2F;wa-sqlite</a>
[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;iansinnott&#x2F;prompta&#x2F;blob&#x2F;master&#x2F;src&#x2F;lib&#x2F;migrations&#x2F;prompta_schema.sql#L54-L63">https:&#x2F;&#x2F;github.com&#x2F;iansinnott&#x2F;prompta&#x2F;blob&#x2F;master&#x2F;src&#x2F;lib&#x2F;mi...</a></div><br/><div id="41199977" class="c"><input type="checkbox" id="c-41199977" checked=""/><div class="controls bullet"><span class="by">ThatPlayer</span><span>|</span><a href="#41199126">parent</a><span>|</span><a href="#41199329">next</a><span>|</span><label class="collapse" for="c-41199977">[-]</label><label class="expand" for="c-41199977">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been trying something similar, but using <a href="https:&#x2F;&#x2F;github.com&#x2F;mmomtchev&#x2F;sqlite-wasm-http">https:&#x2F;&#x2F;github.com&#x2F;mmomtchev&#x2F;sqlite-wasm-http</a> to stream the database over http for a SPA without a backend. It&#x27;s actually able to do searches (for queries that aren&#x27;t super short) without downloading the entire FTS table.</div><br/></div></div><div id="41199329" class="c"><input type="checkbox" id="c-41199329" checked=""/><div class="controls bullet"><span class="by">jbaiter</span><span>|</span><a href="#41199126">parent</a><span>|</span><a href="#41199977">prev</a><span>|</span><a href="#41199429">next</a><span>|</span><label class="collapse" for="c-41199329">[-]</label><label class="expand" for="c-41199329">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;d go as far as claiming that the WASM port of SQLite with FTS5 enabled makes SQLite the best general purpose client-side search engine currently on the market. And with the option to further customize it with custom tokenizers and auxilliary functions, you can do pretty advanced stuff with it, rivalling Lucene (not completely though,  e.g. FTS5 does not store offsets, so highlighting is more expensive than in Lucene).</div><br/></div></div></div></div><div id="41199429" class="c"><input type="checkbox" id="c-41199429" checked=""/><div class="controls bullet"><span class="by">qwertox</span><span>|</span><a href="#41199126">prev</a><span>|</span><a href="#41199587">next</a><span>|</span><label class="collapse" for="c-41199429">[-]</label><label class="expand" for="c-41199429">[1 more]</label></div><br/><div class="children"><div class="content">FTS5 got added to SQLite in October 2015 (3.9.0). But it&#x27;s nice seeing it trending here on HN.</div><br/></div></div><div id="41199587" class="c"><input type="checkbox" id="c-41199587" checked=""/><div class="controls bullet"><span class="by">gyf304</span><span>|</span><a href="#41199429">prev</a><span>|</span><a href="#41199659">next</a><span>|</span><label class="collapse" for="c-41199587">[-]</label><label class="expand" for="c-41199587">[1 more]</label></div><br/><div class="children"><div class="content">If you want to index HTML documents using SQLite FTS5, I have a HTML (pseudo) tokenizer plugin <a href="https:&#x2F;&#x2F;github.com&#x2F;gyf304&#x2F;sqlite3-fts5-html">https:&#x2F;&#x2F;github.com&#x2F;gyf304&#x2F;sqlite3-fts5-html</a></div><br/></div></div><div id="41199659" class="c"><input type="checkbox" id="c-41199659" checked=""/><div class="controls bullet"><span class="by">jezek2</span><span>|</span><a href="#41199587">prev</a><span>|</span><a href="#41199200">next</a><span>|</span><label class="collapse" for="c-41199659">[-]</label><label class="expand" for="c-41199659">[1 more]</label></div><br/><div class="children"><div class="content">FTS5 works great. The only issue I had is that the syntax for the queries is quite irregular. Had problems both with understanding it exactly and translating to it from the usual format of space delimited keywords, exact strings in quotes, etc.<p>I wish it would have an API instead where I could put the parts of the query exactly (as nodes in a tree) without the need to translate to this irregular syntax.</div><br/></div></div><div id="41199200" class="c"><input type="checkbox" id="c-41199200" checked=""/><div class="controls bullet"><span class="by">mcbetz</span><span>|</span><a href="#41199659">prev</a><span>|</span><a href="#41199409">next</a><span>|</span><label class="collapse" for="c-41199200">[-]</label><label class="expand" for="c-41199200">[2 more]</label></div><br/><div class="children"><div class="content">Does anyone have successfully worked with Non-English text with FTS5 in Sqlite? I could not find any reference for German, e.g. and the default stemming does not seem to work properly (given some short tests).</div><br/><div id="41199297" class="c"><input type="checkbox" id="c-41199297" checked=""/><div class="controls bullet"><span class="by">atoav</span><span>|</span><a href="#41199200">parent</a><span>|</span><a href="#41199409">next</a><span>|</span><label class="collapse" for="c-41199297">[-]</label><label class="expand" for="c-41199297">[1 more]</label></div><br/><div class="children"><div class="content">Not that I tried it, but this problem seems to be related: <a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;45681645&#x2F;how-to-enable-fts5-search-a-string-with-and-0-9" rel="nofollow">https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;45681645&#x2F;how-to-enable-f...</a><p>Just that you would need to tokenize the right characters for your target language (e.g. ÜüÖöÄäßẞ¹), maybe those are already included in Unicode61.<p>¹: Yeah there is now a capital Eszett</div><br/></div></div></div></div><div id="41199409" class="c"><input type="checkbox" id="c-41199409" checked=""/><div class="controls bullet"><span class="by">freeqaz</span><span>|</span><a href="#41199200">prev</a><span>|</span><a href="#41199467">next</a><span>|</span><label class="collapse" for="c-41199409">[-]</label><label class="expand" for="c-41199409">[2 more]</label></div><br/><div class="children"><div class="content">Does anybody know how to make it work with UUID as primary keys? I got stuck on that a while back and it randomly corrupts when using rowid. Couldn&#x27;t figure out a solution other than migrate my schema to use a sequential integer instead.</div><br/><div id="41199542" class="c"><input type="checkbox" id="c-41199542" checked=""/><div class="controls bullet"><span class="by">mischa_u</span><span>|</span><a href="#41199409">parent</a><span>|</span><a href="#41199467">next</a><span>|</span><label class="collapse" for="c-41199542">[-]</label><label class="expand" for="c-41199542">[1 more]</label></div><br/><div class="children"><div class="content">Use an UNINDEXED column, see <a href="https:&#x2F;&#x2F;www.sqlite.org&#x2F;fts5.html#the_unindexed_column_option" rel="nofollow">https:&#x2F;&#x2F;www.sqlite.org&#x2F;fts5.html#the_unindexed_column_option</a></div><br/></div></div></div></div><div id="41199467" class="c"><input type="checkbox" id="c-41199467" checked=""/><div class="controls bullet"><span class="by">m_fayer</span><span>|</span><a href="#41199409">prev</a><span>|</span><a href="#41199375">next</a><span>|</span><label class="collapse" for="c-41199467">[-]</label><label class="expand" for="c-41199467">[2 more]</label></div><br/><div class="children"><div class="content">Has anyone tried this out on mobile? I have a list of app ideas that all center around shipping a big database to a device and allowing complex querying while offline.</div><br/><div id="41199553" class="c"><input type="checkbox" id="c-41199553" checked=""/><div class="controls bullet"><span class="by">wahnfrieden</span><span>|</span><a href="#41199467">parent</a><span>|</span><a href="#41199375">next</a><span>|</span><label class="collapse" for="c-41199553">[-]</label><label class="expand" for="c-41199553">[1 more]</label></div><br/><div class="children"><div class="content">Yes</div><br/></div></div></div></div><div id="41199375" class="c"><input type="checkbox" id="c-41199375" checked=""/><div class="controls bullet"><span class="by">spa5k</span><span>|</span><a href="#41199467">prev</a><span>|</span><label class="collapse" for="c-41199375">[-]</label><label class="expand" for="c-41199375">[4 more]</label></div><br/><div class="children"><div class="content">Can you do fuzzy search with it?</div><br/><div id="41199496" class="c"><input type="checkbox" id="c-41199496" checked=""/><div class="controls bullet"><span class="by">jbaiter</span><span>|</span><a href="#41199375">parent</a><span>|</span><label class="collapse" for="c-41199496">[-]</label><label class="expand" for="c-41199496">[3 more]</label></div><br/><div class="children"><div class="content">Not by default, no. But you could kind of implement it by providing a custom tokenizer that emits multiple terms for the same position in the document, with different variants of the same token. This would not be &quot;proper&quot; fuzzy search, but might be enough depending on the use case.<p>See <a href="https:&#x2F;&#x2F;www.sqlite.org&#x2F;fts5.html#synonym_support" rel="nofollow">https:&#x2F;&#x2F;www.sqlite.org&#x2F;fts5.html#synonym_support</a> for more details on the different approaches for implementing synonyms in custom tokenizers.</div><br/><div id="41199584" class="c"><input type="checkbox" id="c-41199584" checked=""/><div class="controls bullet"><span class="by">spa5k</span><span>|</span><a href="#41199375">root</a><span>|</span><a href="#41199496">parent</a><span>|</span><label class="collapse" for="c-41199584">[-]</label><label class="expand" for="c-41199584">[2 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t think that will work for me, since I needed something that can handle mistakes in the words, like Du&#x27;ha to duha etc, Rahman to rehman, basically whatever looks closest.</div><br/><div id="41199959" class="c"><input type="checkbox" id="c-41199959" checked=""/><div class="controls bullet"><span class="by">jbaiter</span><span>|</span><a href="#41199375">root</a><span>|</span><a href="#41199584">parent</a><span>|</span><label class="collapse" for="c-41199959">[-]</label><label class="expand" for="c-41199959">[1 more]</label></div><br/><div class="children"><div class="content">One thing you could do: FTS5 has the `fts5vocab` virtual table [1] that has all the terms. You could provide a user-defined function that computes the levenshtein distance between your query terms and the terms in that table, obtain candidate terms that way and build a big query that searches for all those lexically close terms.<p>[1] <a href="https:&#x2F;&#x2F;www.sqlite.org&#x2F;fts5.html#the_fts5vocab_virtual_table_module" rel="nofollow">https:&#x2F;&#x2F;www.sqlite.org&#x2F;fts5.html#the_fts5vocab_virtual_table...</a></div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>