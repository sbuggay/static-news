<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1696928467233" as="style"/><link rel="stylesheet" href="styles.css?v=1696928467233"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.storj.io/blog/lensm">Lensm, a tool for viewing disassembly</a> <span class="domain">(<a href="https://www.storj.io">www.storj.io</a>)</span></div><div class="subtext"><span>jtolds</span> | <span>16 comments</span></div><br/><div><div id="37829810" class="c"><input type="checkbox" id="c-37829810" checked=""/><div class="controls bullet"><span class="by">brancz</span><span>|</span><a href="#37829723">next</a><span>|</span><label class="collapse" for="c-37829810">[-]</label><label class="expand" for="c-37829810">[1 more]</label></div><br/><div class="children"><div class="content">Love lensm! I&#x27;ve used it on several occasions to teach people about inlining, bounds check removals, and other performance related topics that are best highlighted by actually seeing differences in assembly. I find it&#x27;s easier for people to understand what is actually happening under the hood than just tell them &quot;do this and it&#x27;s faster&quot;.<p>I also highly recommend following the creator. I&#x27;m always impressed with anything Egon creates.</div><br/></div></div><div id="37829723" class="c"><input type="checkbox" id="c-37829723" checked=""/><div class="controls bullet"><span class="by">speps</span><span>|</span><a href="#37829810">prev</a><span>|</span><a href="#37824691">next</a><span>|</span><label class="collapse" for="c-37829723">[-]</label><label class="expand" for="c-37829723">[1 more]</label></div><br/><div class="children"><div class="content">Looks a lot like the P4Merge diffing window: <a href="https:&#x2F;&#x2F;www.perforce.com&#x2F;manuals&#x2F;p4merge&#x2F;Content&#x2F;P4Merge&#x2F;diff-merge.text_diff.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.perforce.com&#x2F;manuals&#x2F;p4merge&#x2F;Content&#x2F;P4Merge&#x2F;dif...</a></div><br/></div></div><div id="37824691" class="c"><input type="checkbox" id="c-37824691" checked=""/><div class="controls bullet"><span class="by">vardump</span><span>|</span><a href="#37829723">prev</a><span>|</span><a href="#37825305">next</a><span>|</span><label class="collapse" for="c-37824691">[-]</label><label class="expand" for="c-37824691">[4 more]</label></div><br/><div class="children"><div class="content">Wow, having to stare at disassembly too often, I really like this.<p>Makes it much faster to follow branches and can easily see what instructions correspond to source code lines, even though it&#x27;s not very exact at higher optimization levels.<p>This should be integrated in all IDEs.</div><br/><div id="37826119" class="c"><input type="checkbox" id="c-37826119" checked=""/><div class="controls bullet"><span class="by">mananaysiempre</span><span>|</span><a href="#37824691">parent</a><span>|</span><a href="#37829741">next</a><span>|</span><label class="collapse" for="c-37826119">[-]</label><label class="expand" for="c-37826119">[2 more]</label></div><br/><div class="children"><div class="content">With recent versions of GNU objdump, you can use --source --visualize-jumps=color and perhaps also --reloc or --dynamic-reloc for a similar experience with the native toolchain. (Unfortunately, -S&#x2F;--source absolutely sucks for executables compiled at -O2.)<p>Other tricks include --no-addresses --no-show-raw-insn, which make the disassembly decently diffable.</div><br/><div id="37826622" class="c"><input type="checkbox" id="c-37826622" checked=""/><div class="controls bullet"><span class="by">beeburrt</span><span>|</span><a href="#37824691">root</a><span>|</span><a href="#37826119">parent</a><span>|</span><a href="#37829741">next</a><span>|</span><label class="collapse" for="c-37826622">[-]</label><label class="expand" for="c-37826622">[1 more]</label></div><br/><div class="children"><div class="content">Nice. Thanks for the tip</div><br/></div></div></div></div><div id="37829741" class="c"><input type="checkbox" id="c-37829741" checked=""/><div class="controls bullet"><span class="by">PhilipRoman</span><span>|</span><a href="#37824691">parent</a><span>|</span><a href="#37826119">prev</a><span>|</span><a href="#37825305">next</a><span>|</span><label class="collapse" for="c-37829741">[-]</label><label class="expand" for="c-37829741">[1 more]</label></div><br/><div class="children"><div class="content">If you don&#x27;t care about source lines, I find radare2 has a really good disassembler (in graph mode)<p>It&#x27;s meant for reverse engineering but I use it for debugging purposes too</div><br/></div></div></div></div><div id="37825305" class="c"><input type="checkbox" id="c-37825305" checked=""/><div class="controls bullet"><span class="by">c7DJTLrn</span><span>|</span><a href="#37824691">prev</a><span>|</span><a href="#37828817">next</a><span>|</span><label class="collapse" for="c-37825305">[-]</label><label class="expand" for="c-37825305">[7 more]</label></div><br/><div class="children"><div class="content">It would probably be worth mentioning that this is for Go in the title.</div><br/><div id="37826165" class="c"><input type="checkbox" id="c-37826165" checked=""/><div class="controls bullet"><span class="by">jcul</span><span>|</span><a href="#37825305">parent</a><span>|</span><a href="#37828817">next</a><span>|</span><label class="collapse" for="c-37826165">[-]</label><label class="expand" for="c-37826165">[6 more]</label></div><br/><div class="children"><div class="content">I&#x27;d imagine it would work for any binary with debug symbols, even though the tool is written in go?<p>Though I haven&#x27;t tried it, on mobile right now.</div><br/><div id="37826769" class="c"><input type="checkbox" id="c-37826769" checked=""/><div class="controls bullet"><span class="by">liamwire</span><span>|</span><a href="#37825305">root</a><span>|</span><a href="#37826165">parent</a><span>|</span><a href="#37828365">next</a><span>|</span><label class="collapse" for="c-37826769">[-]</label><label class="expand" for="c-37826769">[1 more]</label></div><br/><div class="children"><div class="content">I’m not so sure. From the article, the author mentions that they’re using an internal library from the Go compiler for the disassembly.</div><br/></div></div><div id="37828365" class="c"><input type="checkbox" id="c-37828365" checked=""/><div class="controls bullet"><span class="by">vzaliva</span><span>|</span><a href="#37825305">root</a><span>|</span><a href="#37826165">parent</a><span>|</span><a href="#37826769">prev</a><span>|</span><a href="#37827897">next</a><span>|</span><label class="collapse" for="c-37828365">[-]</label><label class="expand" for="c-37828365">[3 more]</label></div><br/><div class="children"><div class="content">I tried it with C and it does not work. So I guess it is go-specific indeed.</div><br/><div id="37829841" class="c"><input type="checkbox" id="c-37829841" checked=""/><div class="controls bullet"><span class="by">jcul</span><span>|</span><a href="#37825305">root</a><span>|</span><a href="#37828365">parent</a><span>|</span><a href="#37828781">next</a><span>|</span><label class="collapse" for="c-37829841">[-]</label><label class="expand" for="c-37829841">[1 more]</label></div><br/><div class="children"><div class="content">Yeah I just tried it too.
It did disassemble it and showed jumps, but no source code.
It also didn&#x27;t resolve calls to functions like printf.</div><br/></div></div><div id="37828781" class="c"><input type="checkbox" id="c-37828781" checked=""/><div class="controls bullet"><span class="by">MobiusHorizons</span><span>|</span><a href="#37825305">root</a><span>|</span><a href="#37828365">parent</a><span>|</span><a href="#37829841">prev</a><span>|</span><a href="#37827897">next</a><span>|</span><label class="collapse" for="c-37828781">[-]</label><label class="expand" for="c-37828781">[1 more]</label></div><br/><div class="children"><div class="content">Did you have debug symbols? I assume you probably passed -g, but the debug info can still not be compatible sometimes. I know when using lldb I sometimes have to force dwarf debug info or -ggdb to get it working.</div><br/></div></div></div></div><div id="37827897" class="c"><input type="checkbox" id="c-37827897" checked=""/><div class="controls bullet"><span class="by">Conscat</span><span>|</span><a href="#37825305">root</a><span>|</span><a href="#37826165">parent</a><span>|</span><a href="#37828365">prev</a><span>|</span><a href="#37828817">next</a><span>|</span><label class="collapse" for="c-37827897">[-]</label><label class="expand" for="c-37827897">[1 more]</label></div><br/><div class="children"><div class="content">Can it demangle non-Go identifiers?</div><br/></div></div></div></div></div></div><div id="37828817" class="c"><input type="checkbox" id="c-37828817" checked=""/><div class="controls bullet"><span class="by">throwaway29303</span><span>|</span><a href="#37825305">prev</a><span>|</span><a href="#37828799">next</a><span>|</span><label class="collapse" for="c-37828817">[-]</label><label class="expand" for="c-37828817">[1 more]</label></div><br/><div class="children"><div class="content">Previous threads about lensm<p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=32138111">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=32138111</a> - Lensm, a Tool for Viewing Disassembly (2022)<p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=32133394">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=32133394</a> - Lensm: Go Assembly and Source Viewer (2022)</div><br/></div></div></div></div></div></div></div></body></html>