<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1696842083411" as="style"/><link rel="stylesheet" href="styles.css?v=1696842083411"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://internetnz.nz/assets/Archives/External-report-on-nz-DNSSEC-chain-validation-incident-on-May-2023.pdf">Review of the .nz DNSSEC Chain Validation Incident on 29-30 May 2023 [pdf]</a> <span class="domain">(<a href="https://internetnz.nz">internetnz.nz</a>)</span></div><div class="subtext"><span>slyall</span> | <span>19 comments</span></div><br/><div><div id="37816562" class="c"><input type="checkbox" id="c-37816562" checked=""/><div class="controls bullet"><span class="by">aussiedude</span><span>|</span><a href="#37818082">next</a><span>|</span><label class="collapse" for="c-37816562">[-]</label><label class="expand" for="c-37816562">[7 more]</label></div><br/><div class="children"><div class="content">- Responsible for .nz tld are staffed by 4 technical  employees doing 24x7 on call support<p>- Engagement surveys captured staff feeling fatigued and under resources at entire org level<p>- Hard to hire for roles due to specialisation<p>- Team moving away from BAU work to projects<p>- Issues raised by external partner but team had other immediate work pressures<p>- Had to contact ex-employee that use to worked there to help resolve<p>- Once a year critical take just done by one team member<p>- Many IT operations tasks have sufficient external dependencies that it is impossible to tell – for certain that the task will be successful in production without doing the task in the production environment. - We&#x27;ve all been there.<p>Sounds like InternetNZ should actually outsource all of this to an external party and just focus on governance work.</div><br/><div id="37816931" class="c"><input type="checkbox" id="c-37816931" checked=""/><div class="controls bullet"><span class="by">cyrnel</span><span>|</span><a href="#37816562">parent</a><span>|</span><a href="#37817341">next</a><span>|</span><label class="collapse" for="c-37816931">[-]</label><label class="expand" for="c-37816931">[4 more]</label></div><br/><div class="children"><div class="content">Good summary! Not sure about that conclusion. I don&#x27;t imagine there are roving bands of these specialized DNS network architects to whom you can magically outsource the operations.<p>The whole thing just strikes me as the continued under-valuing of this kind of maintenance work. It&#x27;s not glamorous, you often work for a government&#x2F;non-profit that pays less, on-call is brutal, and the chronic short-staffing is a pain multiplier. Not exactly the best foundation for an entire country&#x27;s internet infrastructure to sit atop.</div><br/><div id="37816951" class="c"><input type="checkbox" id="c-37816951" checked=""/><div class="controls bullet"><span class="by">aussiedude</span><span>|</span><a href="#37816562">root</a><span>|</span><a href="#37816931">parent</a><span>|</span><a href="#37817341">next</a><span>|</span><label class="collapse" for="c-37816951">[-]</label><label class="expand" for="c-37816951">[3 more]</label></div><br/><div class="children"><div class="content">But DNSSEC in root zones isn&#x27;t unique to .nz.<p>.au, .us, .com, .net, .gov, .io, etc all have the same challenges.</div><br/><div id="37817482" class="c"><input type="checkbox" id="c-37817482" checked=""/><div class="controls bullet"><span class="by">mcesch</span><span>|</span><a href="#37816562">root</a><span>|</span><a href="#37816951">parent</a><span>|</span><a href="#37817288">next</a><span>|</span><label class="collapse" for="c-37817482">[-]</label><label class="expand" for="c-37817482">[1 more]</label></div><br/><div class="children"><div class="content">Outsourcing isn&#x27;t a panacea. `.au` is outsourced to Identity Digital (formerly Afilias) and they managed to flub their configuration recently too[1].<p>1. <a href="https:&#x2F;&#x2F;www.auda.org.au&#x2F;statement&#x2F;au-domain-name-system-update" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.auda.org.au&#x2F;statement&#x2F;au-domain-name-system-upda...</a></div><br/></div></div><div id="37817288" class="c"><input type="checkbox" id="c-37817288" checked=""/><div class="controls bullet"><span class="by">alfons_foobar</span><span>|</span><a href="#37816562">root</a><span>|</span><a href="#37816951">parent</a><span>|</span><a href="#37817482">prev</a><span>|</span><a href="#37817341">next</a><span>|</span><label class="collapse" for="c-37817288">[-]</label><label class="expand" for="c-37817288">[1 more]</label></div><br/><div class="children"><div class="content">TLDs, not root zones ;)<p>The root zone is atop the DNS hierarchy and is usually denoted by a single dot, it contains all the top-level-domains.</div><br/></div></div></div></div></div></div><div id="37817341" class="c"><input type="checkbox" id="c-37817341" checked=""/><div class="controls bullet"><span class="by">1vuio0pswjnm7</span><span>|</span><a href="#37816562">parent</a><span>|</span><a href="#37816931">prev</a><span>|</span><a href="#37818082">next</a><span>|</span><label class="collapse" for="c-37817341">[-]</label><label class="expand" for="c-37817341">[2 more]</label></div><br/><div class="children"><div class="content">Only needing to hire a minimum number of employees to run it, the &quot;TLD business&quot; must be quite profitable.</div><br/><div id="37818283" class="c"><input type="checkbox" id="c-37818283" checked=""/><div class="controls bullet"><span class="by">themoonisachees</span><span>|</span><a href="#37816562">root</a><span>|</span><a href="#37817341">parent</a><span>|</span><a href="#37818082">next</a><span>|</span><label class="collapse" for="c-37818283">[-]</label><label class="expand" for="c-37818283">[1 more]</label></div><br/><div class="children"><div class="content">Actually margins are razor thin. Most of the hard part is compliance, and you&#x27;re paying out huge sums for audits.</div><br/></div></div></div></div></div></div><div id="37818082" class="c"><input type="checkbox" id="c-37818082" checked=""/><div class="controls bullet"><span class="by">mjl-</span><span>|</span><a href="#37816562">prev</a><span>|</span><a href="#37818382">next</a><span>|</span><label class="collapse" for="c-37818082">[-]</label><label class="expand" for="c-37818082">[3 more]</label></div><br/><div class="children"><div class="content">Does anyone know of a tool that guides you with making DNS changes? Before starting it would analyze the current settings (SOA, parent&#x2F;child NS, DS, DNSKEY, RRSIG, etc and their TTLs), possibly suggest reducing some TTLs, show the when you need to make which changes. Then checking along the way for each step if the changes have propagated and letting you continue with the next step when it is safe. Could be useful for DNSSEC changes, but also just changing name servers.<p>I moved domains to new name servers last week. I took the poor-man&#x27;s approach of disabling DNSSEC during the migration. I made a step-by-step plan, verifying propagation along the way with dig. Still made one mistake, where I thought I had reduced the NS TTL in a child zone before migrating, but hadn&#x27;t (it was still 2 days instead of 1 hour). An automated check would have caught it.<p>I think such a tool could also have shown this KSK rollover required a longer wait than the procedure had.</div><br/><div id="37818197" class="c"><input type="checkbox" id="c-37818197" checked=""/><div class="controls bullet"><span class="by">teddyh</span><span>|</span><a href="#37818082">parent</a><span>|</span><a href="#37818187">next</a><span>|</span><label class="collapse" for="c-37818197">[-]</label><label class="expand" for="c-37818197">[1 more]</label></div><br/><div class="children"><div class="content">For moving DNSSEC-signed domains, there’s MUSIC: &lt;<a href="https:&#x2F;&#x2F;github.com&#x2F;DNSSEC-Provisioning&#x2F;music">https:&#x2F;&#x2F;github.com&#x2F;DNSSEC-Provisioning&#x2F;music</a>&gt;</div><br/></div></div><div id="37818187" class="c"><input type="checkbox" id="c-37818187" checked=""/><div class="controls bullet"><span class="by">mcesch</span><span>|</span><a href="#37818082">parent</a><span>|</span><a href="#37818197">prev</a><span>|</span><a href="#37818382">next</a><span>|</span><label class="collapse" for="c-37818187">[-]</label><label class="expand" for="c-37818187">[1 more]</label></div><br/><div class="children"><div class="content">I only know of proprietary tooling for this sort of thing. I&#x27;d imagine it&#x27;d be tough to sell as a product or service so it&#x27;d probably have to be someones labor of love.</div><br/></div></div></div></div><div id="37818382" class="c"><input type="checkbox" id="c-37818382" checked=""/><div class="controls bullet"><span class="by">MaximilianEmel</span><span>|</span><a href="#37818082">prev</a><span>|</span><a href="#37817851">next</a><span>|</span><label class="collapse" for="c-37818382">[-]</label><label class="expand" for="c-37818382">[1 more]</label></div><br/><div class="children"><div class="content">Interesting that it was written in LibreOffice.</div><br/></div></div><div id="37817851" class="c"><input type="checkbox" id="c-37817851" checked=""/><div class="controls bullet"><span class="by">mjl-</span><span>|</span><a href="#37818382">prev</a><span>|</span><a href="#37816683">next</a><span>|</span><label class="collapse" for="c-37817851">[-]</label><label class="expand" for="c-37817851">[3 more]</label></div><br/><div class="children"><div class="content">Does anyone know if DNSSEC-validating recursive resolvers will retry (fetch new records) if their cached DNSSEC-related records (e.g. DS) are a certain age and they are seeing a validating error?<p>If they would, problems could autocorrect faster (than waiting out a TTL of 1 day). It could cause higher load on name servers, but at first glance it seems like a reasonable trade off.</div><br/><div id="37818068" class="c"><input type="checkbox" id="c-37818068" checked=""/><div class="controls bullet"><span class="by">comex</span><span>|</span><a href="#37817851">parent</a><span>|</span><a href="#37818116">next</a><span>|</span><label class="collapse" for="c-37818068">[-]</label><label class="expand" for="c-37818068">[1 more]</label></div><br/><div class="children"><div class="content">Page 50 of the report says that some (unnamed) resolvers do this, and “we think this [..] is a very good implementation feature to reduce the impact of mistakes”, but that it’s “definitely not universally implemented”.</div><br/></div></div><div id="37818116" class="c"><input type="checkbox" id="c-37818116" checked=""/><div class="controls bullet"><span class="by">mcesch</span><span>|</span><a href="#37817851">parent</a><span>|</span><a href="#37818068">prev</a><span>|</span><a href="#37816683">next</a><span>|</span><label class="collapse" for="c-37818116">[-]</label><label class="expand" for="c-37818116">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s implementation dependent. If I recall correctly unbound defaults to caching bogus responses for 60 seconds and BIND for 30 seconds.</div><br/></div></div></div></div><div id="37816683" class="c"><input type="checkbox" id="c-37816683" checked=""/><div class="controls bullet"><span class="by">onionisafruit</span><span>|</span><a href="#37817851">prev</a><span>|</span><a href="#37817541">next</a><span>|</span><label class="collapse" for="c-37816683">[-]</label><label class="expand" for="c-37816683">[2 more]</label></div><br/><div class="children"><div class="content">I wonder how the budget to write this 90 page report compares to the annual budget for .nz</div><br/><div id="37816975" class="c"><input type="checkbox" id="c-37816975" checked=""/><div class="controls bullet"><span class="by">Aachen</span><span>|</span><a href="#37816683">parent</a><span>|</span><a href="#37817541">next</a><span>|</span><label class="collapse" for="c-37816975">[-]</label><label class="expand" for="c-37816975">[1 more]</label></div><br/><div class="children"><div class="content">90 pages are easily filled with a handful of contributors. It&#x27;s when you want to convey (without removing (much)) the same information in 9 pages where it gets time-consuming</div><br/></div></div></div></div><div id="37817541" class="c"><input type="checkbox" id="c-37817541" checked=""/><div class="controls bullet"><span class="by">mmsc</span><span>|</span><a href="#37816683">prev</a><span>|</span><label class="collapse" for="c-37817541">[-]</label><label class="expand" for="c-37817541">[2 more]</label></div><br/><div class="children"><div class="content">Technical tl;dr:<p>The DS record was cached for 24 hours but the DNSKEY record was cached for 1 hour. 
The DS and DNSKEY records were rotated due to an annual rotation of the signing key. 
The (cached) old DS record referenced the old DNSKEY. This inconsistency invalidated records for resolvers which validated dnssec records (85% of New Zealanders users, mostly through their ISPs’ resolvers.)<p>Procedural tl;dr:
Management was not informed of the incident until the next day. 
DNS operators were not made aware of the rotation of the KSK (key signing key) so the problem by outside operators was difficult to theorise.</div><br/><div id="37818112" class="c"><input type="checkbox" id="c-37818112" checked=""/><div class="controls bullet"><span class="by">comex</span><span>|</span><a href="#37817541">parent</a><span>|</span><label class="collapse" for="c-37818112">[-]</label><label class="expand" for="c-37818112">[1 more]</label></div><br/><div class="children"><div class="content">Also, the software they were using (OpenDNSSEC) had an automated delay to avoid exactly this issue, but the delay period was based on a setting in its config file that was supposed to reflect the TTL of the DS record, and they forgot to change it when the TTL changed.</div><br/></div></div></div></div></div></div></div></div></div></body></html>