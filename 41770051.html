<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1728464455038" as="style"/><link rel="stylesheet" href="styles.css?v=1728464455038"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/BobMcDear/trap">Trap – Transformers in APL</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>tlack</span> | <span>15 comments</span></div><br/><div><div id="41782802" class="c"><input type="checkbox" id="c-41782802" checked=""/><div class="controls bullet"><span class="by">photonthug</span><span>|</span><a href="#41784394">next</a><span>|</span><label class="collapse" for="c-41782802">[-]</label><label class="expand" for="c-41782802">[10 more]</label></div><br/><div class="children"><div class="content">&gt; Though APL may strike some as a strange language of choice for deep learning, it offers benefits that are especially suitable for this field: First, the only first-class data type in APL is the multi-dimensional array, which is one of the central object of deep learning in the form of tensors. This also signifies that APL is by nature data parallel and therefore particularly amenable to parallelization. Notably, the Co-dfns project compiles APL code for CPUs and GPUs, exploiting the data parallel essence of APL to achieve high performance. Second, APL also almost entirely dispenses with the software-specific &quot;noise&quot; that bloats code in other languages, so APL code can be directly mapped to algorithms or mathematical expressions on a blackboard and vice versa, which cannot be said of the majority of programming languages. Finally, APL is extremely terse; its density might be considered a defect by some that renders APL a cryptic write-once, read-never language, but it allows for incredibly concise implementations of most algorithms. Assuming a decent grasp on APL syntax, shorter programs mean less code to maintain, debug, and understand.<p>This is really cool.  At about 150 lines, terse indeed.  And it makes sense that of course APL could work well with gpus, but I’m kind of surprised there’s enough of it still out in the wild so that there’s already a reliable tool chain for doing this.</div><br/><div id="41783329" class="c"><input type="checkbox" id="c-41783329" checked=""/><div class="controls bullet"><span class="by">nextos</span><span>|</span><a href="#41782802">parent</a><span>|</span><a href="#41782853">next</a><span>|</span><label class="collapse" for="c-41783329">[-]</label><label class="expand" for="c-41783329">[3 more]</label></div><br/><div class="children"><div class="content">&gt; APL could work well with gpus<p>I&#x27;ve seen at least an APL implementation running on top of Julia, thanks to macros.<p>Julia has good GPU support, and it makes it easy to compose that support with any library.<p>However, kdb+ and q, which are APL descendants, have good GPU support already: <a href="https:&#x2F;&#x2F;code.kx.com&#x2F;q&#x2F;interfaces&#x2F;gpus" rel="nofollow">https:&#x2F;&#x2F;code.kx.com&#x2F;q&#x2F;interfaces&#x2F;gpus</a>. But licenses are not cheap...</div><br/><div id="41783806" class="c"><input type="checkbox" id="c-41783806" checked=""/><div class="controls bullet"><span class="by">koolala</span><span>|</span><a href="#41782802">root</a><span>|</span><a href="#41783329">parent</a><span>|</span><a href="#41782853">next</a><span>|</span><label class="collapse" for="c-41783806">[-]</label><label class="expand" for="c-41783806">[2 more]</label></div><br/><div class="children"><div class="content">GPUs can even run APL as a higher level programming language. It&#x27;s the only abstract language I&#x27;ve ever heard to run on a GPU. Arrays in, Arrays out. A gpu is  array programming hardware.<p>I hope one day its normal like the 1000s of CPU languages. Would be nice to have more than 10 gpu languages.</div><br/><div id="41785621" class="c"><input type="checkbox" id="c-41785621" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#41782802">root</a><span>|</span><a href="#41783806">parent</a><span>|</span><a href="#41782853">next</a><span>|</span><label class="collapse" for="c-41785621">[-]</label><label class="expand" for="c-41785621">[1 more]</label></div><br/><div class="children"><div class="content">StarLisp on the Connection Machine, which is kind of early attempt to what GPU became.<p>Futhark is another more recent example.</div><br/></div></div></div></div></div></div><div id="41782853" class="c"><input type="checkbox" id="c-41782853" checked=""/><div class="controls bullet"><span class="by">Dr_Birdbrain</span><span>|</span><a href="#41782802">parent</a><span>|</span><a href="#41783329">prev</a><span>|</span><a href="#41784394">next</a><span>|</span><label class="collapse" for="c-41782853">[-]</label><label class="expand" for="c-41782853">[6 more]</label></div><br/><div class="children"><div class="content">&gt; APL code can be directly mapped to algorithms or mathematical expressions on a blackboard and vice versa<p>After looking at the code, I find this claim questionable.</div><br/><div id="41783369" class="c"><input type="checkbox" id="c-41783369" checked=""/><div class="controls bullet"><span class="by">Avshalom</span><span>|</span><a href="#41782802">root</a><span>|</span><a href="#41782853">parent</a><span>|</span><a href="#41782954">next</a><span>|</span><label class="collapse" for="c-41783369">[-]</label><label class="expand" for="c-41783369">[2 more]</label></div><br/><div class="children"><div class="content">APL was invented by Iverson <i>as a blackboard notation</i> because he felt the existing notation was awkward&#x2F;insufficent for describing computation&#x2F;algorithms</div><br/><div id="41783792" class="c"><input type="checkbox" id="c-41783792" checked=""/><div class="controls bullet"><span class="by">koolala</span><span>|</span><a href="#41782802">root</a><span>|</span><a href="#41783369">parent</a><span>|</span><a href="#41782954">next</a><span>|</span><label class="collapse" for="c-41783792">[-]</label><label class="expand" for="c-41783792">[1 more]</label></div><br/><div class="children"><div class="content"><i>linear algebra notation</i> is the real notation (on a blackboard). aka the language of AI. the medium is just the message format.</div><br/></div></div></div></div><div id="41782954" class="c"><input type="checkbox" id="c-41782954" checked=""/><div class="controls bullet"><span class="by">jodrellblank</span><span>|</span><a href="#41782802">root</a><span>|</span><a href="#41782853">parent</a><span>|</span><a href="#41783369">prev</a><span>|</span><a href="#41783496">next</a><span>|</span><label class="collapse" for="c-41782954">[-]</label><label class="expand" for="c-41782954">[1 more]</label></div><br/><div class="children"><div class="content">After looking at HN comments for years, I find this low effort dismissal downvoteable.<p>APL was originally a rewrite and normalisation of traditional math notation for use on blackboards. Before it was anything to do with computers it was linear algebra without all the bizarre precedence rules and with some common useful operations.</div><br/></div></div><div id="41783156" class="c"><input type="checkbox" id="c-41783156" checked=""/><div class="controls bullet"><span class="by">keithalewis</span><span>|</span><a href="#41782802">root</a><span>|</span><a href="#41782853">parent</a><span>|</span><a href="#41783496">prev</a><span>|</span><a href="#41784394">next</a><span>|</span><label class="collapse" for="c-41783156">[-]</label><label class="expand" for="c-41783156">[1 more]</label></div><br/><div class="children"><div class="content">Name checks out.</div><br/></div></div></div></div></div></div><div id="41784394" class="c"><input type="checkbox" id="c-41784394" checked=""/><div class="controls bullet"><span class="by">sakras</span><span>|</span><a href="#41782802">prev</a><span>|</span><a href="#41785362">next</a><span>|</span><label class="collapse" for="c-41784394">[-]</label><label class="expand" for="c-41784394">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Though APL may strike some as a strange language of choice for deep learning<p>I&#x27;ve actually spent the better part of last year wondering why we _haven&#x27;t_ been using APL for deep learning. And actually I&#x27;ve been wondering why we don&#x27;t just use APL for everything that operates over arrays, like data lakes and such.<p>Honestly, APL is probably a good fit for compilers. I seem to remember a guy who had some tree-wrangling APL scheme, and could execute his compiler on a GPU. But I can&#x27;t find it now.</div><br/><div id="41784704" class="c"><input type="checkbox" id="c-41784704" checked=""/><div class="controls bullet"><span class="by">tlack</span><span>|</span><a href="#41784394">parent</a><span>|</span><a href="#41785362">next</a><span>|</span><label class="collapse" for="c-41784704">[-]</label><label class="expand" for="c-41784704">[1 more]</label></div><br/><div class="children"><div class="content">I believe the tree-wrangler you mentioned is Aaron Hsu, author of the Co-dfns APL &quot;compiler&quot; that Trap uses.<p>Here are some videos related to his work: <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;playlist?list=PLDU0iEj6f8duXzmgnlGX4hMHJUMYh4rJq" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;playlist?list=PLDU0iEj6f8duXzmgnlGX4...</a><p>Co-dfns was most recently discussed on Hacker News 3 months ago: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=40928450">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=40928450</a></div><br/></div></div></div></div><div id="41785362" class="c"><input type="checkbox" id="c-41785362" checked=""/><div class="controls bullet"><span class="by">smartmic</span><span>|</span><a href="#41784394">prev</a><span>|</span><a href="#41783631">next</a><span>|</span><label class="collapse" for="c-41785362">[-]</label><label class="expand" for="c-41785362">[1 more]</label></div><br/><div class="children"><div class="content">It would be good if the APL dialect in which this is implemented is mentioned on the front page. I implemented some things in GNU APL which is an (almost) complete implementation of ISO standard 13751, based primarily on APL2. More common and modern is the proprietary Dyalog APL, which I assume is used here (and which is also free for personal use).</div><br/></div></div><div id="41783631" class="c"><input type="checkbox" id="c-41783631" checked=""/><div class="controls bullet"><span class="by">gcanyon</span><span>|</span><a href="#41785362">prev</a><span>|</span><label class="collapse" for="c-41783631">[-]</label><label class="expand" for="c-41783631">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Though APL may strike some as a strange language of choice for deep learning<p>It sure did to me, even as someone who has written (a trivial amount of) J. But the argument that follows is more than convincing.</div><br/></div></div></div></div></div></div></div></body></html>