<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1709715666032" as="style"/><link rel="stylesheet" href="styles.css?v=1709715666032"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://forums.swift.org/t/embedded-swift-on-the-raspberry-pi-pico-rp2040-without-the-pico-sdk/69338">Embedded Swift on the Raspberry Pi Pico</a> <span class="domain">(<a href="https://forums.swift.org">forums.swift.org</a>)</span></div><div class="subtext"><span>goranmoomin</span> | <span>56 comments</span></div><br/><div><div id="39613244" class="c"><input type="checkbox" id="c-39613244" checked=""/><div class="controls bullet"><span class="by">FlyingSnake</span><span>|</span><a href="#39611559">next</a><span>|</span><label class="collapse" for="c-39613244">[-]</label><label class="expand" for="c-39613244">[4 more]</label></div><br/><div class="children"><div class="content">Swift is really an underrated language mainly due to the Apple baggage.
It hits the sweet spot between Rust and C++ due to it&#x27;s sane design choices like structured concurrency or simple things like tagged enums, Result&lt;T,E&gt; etc.<p>I wish it gains more popularity outside Apple land and is discussed more like Zig or Rust.</div><br/><div id="39613551" class="c"><input type="checkbox" id="c-39613551" checked=""/><div class="controls bullet"><span class="by">sgt</span><span>|</span><a href="#39613244">parent</a><span>|</span><a href="#39613303">next</a><span>|</span><label class="collapse" for="c-39613551">[-]</label><label class="expand" for="c-39613551">[1 more]</label></div><br/><div class="children"><div class="content">Having written a bit of Swift code on macOS and a bit for iOS, I agree. This language has a very nice flow to it which should appeal to developers. It&#x27;s hard to explain, but somehow the language is a joy to work in (Xcode also helps with that experience, of course).<p>If I could use a minimized Swift on embedded, I&#x27;d be very happy. Right now I&#x27;m just doing C for ESP32 and that sort of thing.</div><br/></div></div><div id="39613303" class="c"><input type="checkbox" id="c-39613303" checked=""/><div class="controls bullet"><span class="by">slekker</span><span>|</span><a href="#39613244">parent</a><span>|</span><a href="#39613551">prev</a><span>|</span><a href="#39611559">next</a><span>|</span><label class="collapse" for="c-39613303">[-]</label><label class="expand" for="c-39613303">[2 more]</label></div><br/><div class="children"><div class="content">Wasn&#x27;t the performance and tooling poor in Linux and Windows? Has something changed there?</div><br/><div id="39613794" class="c"><input type="checkbox" id="c-39613794" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#39613244">root</a><span>|</span><a href="#39613303">parent</a><span>|</span><a href="#39611559">next</a><span>|</span><label class="collapse" for="c-39613794">[-]</label><label class="expand" for="c-39613794">[1 more]</label></div><br/><div class="children"><div class="content">Things are changing slowly.</div><br/></div></div></div></div></div></div><div id="39611559" class="c"><input type="checkbox" id="c-39611559" checked=""/><div class="controls bullet"><span class="by">RantyDave</span><span>|</span><a href="#39613244">prev</a><span>|</span><a href="#39611261">next</a><span>|</span><label class="collapse" for="c-39611559">[-]</label><label class="expand" for="c-39611559">[1 more]</label></div><br/><div class="children"><div class="content">FWIW Micropython look to be solving the &quot;no drivers&quot; problem by building a port that targets Zephyr. <a href="https:&#x2F;&#x2F;docs.micropython.org&#x2F;en&#x2F;latest&#x2F;zephyr&#x2F;general.html" rel="nofollow">https:&#x2F;&#x2F;docs.micropython.org&#x2F;en&#x2F;latest&#x2F;zephyr&#x2F;general.html</a></div><br/></div></div><div id="39611261" class="c"><input type="checkbox" id="c-39611261" checked=""/><div class="controls bullet"><span class="by">RetpolineDrama</span><span>|</span><a href="#39611559">prev</a><span>|</span><a href="#39611426">next</a><span>|</span><label class="collapse" for="c-39611261">[-]</label><label class="expand" for="c-39611261">[32 more]</label></div><br/><div class="children"><div class="content">Super cool! I absolutely adore swift, it has so many simple features I love that I am sometimes surprised to find are missing in other languages. (ex off the top of my head: switching on enum&#x27;s with associated values is super powerful in Swift and I was surprised Dart was completely missing that when I tried flutter a while back?)<p>Ex:<p>enum MyEnum&lt;T&gt; {<p><pre><code>   case one

   case two(twosChild: Child)

   case three(threesGenericChild: T)

   case four(foursCallbackChild: () -&gt; Void)
</code></pre>
}<p>You can then pass this enum around and switch on it, with compiler-guaranteed completeness everywhere in your codebase. It seems so freaking simple, but it&#x27;s incredibly useful.</div><br/><div id="39612907" class="c"><input type="checkbox" id="c-39612907" checked=""/><div class="controls bullet"><span class="by">bmitc</span><span>|</span><a href="#39611261">parent</a><span>|</span><a href="#39612745">next</a><span>|</span><label class="collapse" for="c-39612907">[-]</label><label class="expand" for="c-39612907">[3 more]</label></div><br/><div class="children"><div class="content">As others have pointed out, that is actually a stunted and quite limited version of pattern matching that existed in other languages for years and even decades before Swift.<p>F#, OCaml, and Standard ML are the primary examples. It&#x27;s surprising to me how ignored these languages are.</div><br/><div id="39613179" class="c"><input type="checkbox" id="c-39613179" checked=""/><div class="controls bullet"><span class="by">arwhatever</span><span>|</span><a href="#39611261">root</a><span>|</span><a href="#39612907">parent</a><span>|</span><a href="#39613254">next</a><span>|</span><label class="collapse" for="c-39613179">[-]</label><label class="expand" for="c-39613179">[1 more]</label></div><br/><div class="children"><div class="content">Languages without this feature are basically refusing to wash their hands between the morgue and the maternity ward at this point.</div><br/></div></div><div id="39613254" class="c"><input type="checkbox" id="c-39613254" checked=""/><div class="controls bullet"><span class="by">wilg</span><span>|</span><a href="#39611261">root</a><span>|</span><a href="#39612907">parent</a><span>|</span><a href="#39613179">prev</a><span>|</span><a href="#39612745">next</a><span>|</span><label class="collapse" for="c-39613254">[-]</label><label class="expand" for="c-39613254">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t think Swift&#x27;s enum with associated values are pattern matching. You can use pattern matching to unpack them though. (<a href="https:&#x2F;&#x2F;docs.swift.org&#x2F;swift-book&#x2F;documentation&#x2F;the-swift-programming-language&#x2F;patterns&#x2F;" rel="nofollow">https:&#x2F;&#x2F;docs.swift.org&#x2F;swift-book&#x2F;documentation&#x2F;the-swift-pr...</a>)</div><br/></div></div></div></div><div id="39612745" class="c"><input type="checkbox" id="c-39612745" checked=""/><div class="controls bullet"><span class="by">iknowstuff</span><span>|</span><a href="#39611261">parent</a><span>|</span><a href="#39612907">prev</a><span>|</span><a href="#39612024">next</a><span>|</span><label class="collapse" for="c-39612745">[-]</label><label class="expand" for="c-39612745">[2 more]</label></div><br/><div class="children"><div class="content">Yup it&#x27;s called a sum type, or a tagged union <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Tagged_union" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Tagged_union</a></div><br/><div id="39612915" class="c"><input type="checkbox" id="c-39612915" checked=""/><div class="controls bullet"><span class="by">bmitc</span><span>|</span><a href="#39611261">root</a><span>|</span><a href="#39612745">parent</a><span>|</span><a href="#39612024">next</a><span>|</span><label class="collapse" for="c-39612915">[-]</label><label class="expand" for="c-39612915">[1 more]</label></div><br/><div class="children"><div class="content">The enum example is not really a union though or is a constrained version. For example, the cases are non-recursive.</div><br/></div></div></div></div><div id="39612024" class="c"><input type="checkbox" id="c-39612024" checked=""/><div class="controls bullet"><span class="by">jwells89</span><span>|</span><a href="#39611261">parent</a><span>|</span><a href="#39612745">prev</a><span>|</span><a href="#39612844">next</a><span>|</span><label class="collapse" for="c-39612024">[-]</label><label class="expand" for="c-39612024">[3 more]</label></div><br/><div class="children"><div class="content">I miss Swift enums when writing Kotlin. Kotlin enums are more restricted in that associated values can’t differ between cases, which limits their usefulness and means that much of the time what you want are instead sealed classes.<p>There’s actually several bits of Kotlin like this which feel somewhat pedantic&#x2F;idiosyncratic and fussy if you’re used to writing Swift. I’m sure there’s valid design reasons behind these decisions, but sometimes it feels like unnecessary friction.</div><br/><div id="39613736" class="c"><input type="checkbox" id="c-39613736" checked=""/><div class="controls bullet"><span class="by">MrBuddyCasino</span><span>|</span><a href="#39611261">root</a><span>|</span><a href="#39612024">parent</a><span>|</span><a href="#39612129">next</a><span>|</span><label class="collapse" for="c-39613736">[-]</label><label class="expand" for="c-39613736">[1 more]</label></div><br/><div class="children"><div class="content">Since sealed class definitions can live in the same file and the syntax is quite compact, in Kotlin they don&#x27;t annoy me as much as in Java.</div><br/></div></div></div></div><div id="39612844" class="c"><input type="checkbox" id="c-39612844" checked=""/><div class="controls bullet"><span class="by">hyperthesis</span><span>|</span><a href="#39611261">parent</a><span>|</span><a href="#39612024">prev</a><span>|</span><a href="#39611284">next</a><span>|</span><label class="collapse" for="c-39612844">[-]</label><label class="expand" for="c-39612844">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;wikipedia.org&#x2F;wiki&#x2F;Pattern_matching" rel="nofollow">https:&#x2F;&#x2F;wikipedia.org&#x2F;wiki&#x2F;Pattern_matching</a> since 1957<p>I feel ML is the most famous for it.</div><br/></div></div><div id="39611284" class="c"><input type="checkbox" id="c-39611284" checked=""/><div class="controls bullet"><span class="by">refulgentis</span><span>|</span><a href="#39611261">parent</a><span>|</span><a href="#39612844">prev</a><span>|</span><a href="#39611361">next</a><span>|</span><label class="collapse" for="c-39611284">[-]</label><label class="expand" for="c-39611284">[21 more]</label></div><br/><div class="children"><div class="content">Dart has it, last 12 months or so.<p>Funnily enough, I sort of had the opposite journey, Swift seems horribly complicated and over-specified. The Dart compiler knows if I do a null-check, it can treat following references as safe, instead of if let x = x etc.<p>And it just hasn&#x27;t lived up to any of the initial starry-eyed hype I had for it and expectations for a wider Swift ecosystem...<p>Like, here, it&#x27;s great it runs on Raspberry Pi Pico but...it can&#x27;t render UI unless someone writes a new UI library from scratch. And whoever does that inevitably will have to copy SwiftUI directly or alienate the people who actually know Swift.</div><br/><div id="39612060" class="c"><input type="checkbox" id="c-39612060" checked=""/><div class="controls bullet"><span class="by">jwells89</span><span>|</span><a href="#39611261">root</a><span>|</span><a href="#39611284">parent</a><span>|</span><a href="#39611492">next</a><span>|</span><label class="collapse" for="c-39612060">[-]</label><label class="expand" for="c-39612060">[1 more]</label></div><br/><div class="children"><div class="content">&gt; And whoever does that inevitably will have to copy SwiftUI directly or alienate the people who actually know Swift.<p>I may be wrong, but I don’t think this is actually true. SwiftUI isn’t universally loved in the community, largely thanks to its rough edges and how it struggles with that last 10% of polish in projects written with it. While copying SwiftUI wouldn’t necessarily be wrong per se, you’d actually probably get more rapid buy-in by copying “boring” old imperative UIKit, as that’s what most writers of Swift are using.</div><br/></div></div><div id="39611492" class="c"><input type="checkbox" id="c-39611492" checked=""/><div class="controls bullet"><span class="by">marcellus23</span><span>|</span><a href="#39611261">root</a><span>|</span><a href="#39611284">parent</a><span>|</span><a href="#39612060">prev</a><span>|</span><a href="#39612091">next</a><span>|</span><label class="collapse" for="c-39611492">[-]</label><label class="expand" for="c-39611492">[11 more]</label></div><br/><div class="children"><div class="content">&gt; Swift seems horribly complicated and over-specified. The Dart compiler knows if I do a null-check, it can treat following references as safe, instead of if let x = x etc.<p>`if let x = x` is an alternative to a null check, it&#x27;s not as if now you need both a null check and an `if let`. What makes an `if let` more complicated?</div><br/><div id="39611550" class="c"><input type="checkbox" id="c-39611550" checked=""/><div class="controls bullet"><span class="by">refulgentis</span><span>|</span><a href="#39611261">root</a><span>|</span><a href="#39611492">parent</a><span>|</span><a href="#39612091">next</a><span>|</span><label class="collapse" for="c-39611550">[-]</label><label class="expand" for="c-39611550">[10 more]</label></div><br/><div class="children"><div class="content">There are now 2x as many syntaxes for the same operation, if let and if != null</div><br/><div id="39611686" class="c"><input type="checkbox" id="c-39611686" checked=""/><div class="controls bullet"><span class="by">RetpolineDrama</span><span>|</span><a href="#39611261">root</a><span>|</span><a href="#39611550">parent</a><span>|</span><a href="#39612091">next</a><span>|</span><label class="collapse" for="c-39611686">[-]</label><label class="expand" for="c-39611686">[9 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not the same op though. One is a check, the other creates an in-context copy that&#x27;s unwrapped from the optional. The compiler of course optimizes this out but it&#x27;s not the same.</div><br/><div id="39612197" class="c"><input type="checkbox" id="c-39612197" checked=""/><div class="controls bullet"><span class="by">refulgentis</span><span>|</span><a href="#39611261">root</a><span>|</span><a href="#39611686">parent</a><span>|</span><a href="#39612091">next</a><span>|</span><label class="collapse" for="c-39612197">[-]</label><label class="expand" for="c-39612197">[8 more]</label></div><br/><div class="children"><div class="content">Right. In Dart they are the same. In Swift they are distinct.</div><br/><div id="39612788" class="c"><input type="checkbox" id="c-39612788" checked=""/><div class="controls bullet"><span class="by">mckn1ght</span><span>|</span><a href="#39611261">root</a><span>|</span><a href="#39612197">parent</a><span>|</span><a href="#39612987">next</a><span>|</span><label class="collapse" for="c-39612788">[-]</label><label class="expand" for="c-39612788">[4 more]</label></div><br/><div class="children"><div class="content">They have different use cases. 
if x != nil is to do some work without needing x, because you&#x27;d still have to unwrap it if you used it.<p>That&#x27;s what if let y = x is for, it creates a safe lexical context to use the unwrapped value.<p>And then you have guard let y = x which is a stronger guarantee that no code further down in the context is executed if x is nil. This helps to write happy-path code with early returns, avoiding pyramids of doom and encouraging writing code where all the assumptions are listed up front with logic handling exceptional cases before finally arriving at the logic that works under all the assumptions.<p>Dart feels like a step backwards after seeing the benefits these provide.</div><br/><div id="39612963" class="c"><input type="checkbox" id="c-39612963" checked=""/><div class="controls bullet"><span class="by">afavour</span><span>|</span><a href="#39611261">root</a><span>|</span><a href="#39612788">parent</a><span>|</span><a href="#39612987">next</a><span>|</span><label class="collapse" for="c-39612963">[-]</label><label class="expand" for="c-39612963">[3 more]</label></div><br/><div class="children"><div class="content">&gt; They have different use cases.<p>But there’s also no harm in combining them. I agree with the OP, TypeScript does what they describe Dart doing and I find it much simpler than the way Swift does it. It’s never confusing.</div><br/><div id="39613822" class="c"><input type="checkbox" id="c-39613822" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#39611261">root</a><span>|</span><a href="#39612963">parent</a><span>|</span><a href="#39613055">next</a><span>|</span><label class="collapse" for="c-39613822">[-]</label><label class="expand" for="c-39613822">[1 more]</label></div><br/><div class="children"><div class="content">Changing the type of something based on a conditional check is not great, because if I wanted a non-optional I would request it. Sometimes a nil check is literally just a nil check. What if I want to set the value back to nil if it is not-nil? Why should I have to wrap things back in an optional if I want to pass it along as such?</div><br/></div></div><div id="39613055" class="c"><input type="checkbox" id="c-39613055" checked=""/><div class="controls bullet"><span class="by">mckn1ght</span><span>|</span><a href="#39611261">root</a><span>|</span><a href="#39612963">parent</a><span>|</span><a href="#39613822">prev</a><span>|</span><a href="#39612987">next</a><span>|</span><label class="collapse" for="c-39613055">[-]</label><label class="expand" for="c-39613055">[1 more]</label></div><br/><div class="children"><div class="content">&gt; But there’s also no harm in combining them<p>Disagree. I’ve seen people write things like the following:<p><pre><code>    if x != nil { x!.foo() }
</code></pre>
and then later the x != nil condition is changed to no longer check for nil, or the x!.foo() is moved out of that lexical scope elsewhere, or copypastad, and then the force unwrap crashed. I’ve seen similar yet more subtle bugs with soft unwraps instead of forced: x?.foo()<p>Not possible if you use if let y = x . If you copypasta the inner scope with the different variable name then it won’t compile.<p>(ofc these are trivial representative examples, in reality these were lexical scopes with many lines and more complicated code)<p>It’s not just about how the code looks when you write it, it’s the paths that can be taken by future maintenance programmers.<p>I‘ve complained about the large surface area of swift syntax, stdlib etc in the past, but I don’t personally find this specific thing confusing.</div><br/></div></div></div></div></div></div><div id="39612987" class="c"><input type="checkbox" id="c-39612987" checked=""/><div class="controls bullet"><span class="by">teho</span><span>|</span><a href="#39611261">root</a><span>|</span><a href="#39612197">parent</a><span>|</span><a href="#39612788">prev</a><span>|</span><a href="#39612091">next</a><span>|</span><label class="collapse" for="c-39612987">[-]</label><label class="expand" for="c-39612987">[3 more]</label></div><br/><div class="children"><div class="content">In Dart if you want to narrow down a nullable final class variable, it is not enough to do<p>if (value == null) { 
  &#x2F;&#x2F; value is still nullable here
}<p>instead you need to first capture the value<p>final value = this.value
if (value == null) { 
  &#x2F;&#x2F; value is non-null
}<p>Swift&#x27;s guard and if let syntax seems way nicer here. In swift, it&#x27;s also nice to destructure nested nullable values using if let.<p>if let value = object.object?.value {
  &#x2F;&#x2F; value is non null
}<p>In dart you&#x27;d need to first assign this into a local variable and then do the null check which is unnecessarily verbose.</div><br/><div id="39613427" class="c"><input type="checkbox" id="c-39613427" checked=""/><div class="controls bullet"><span class="by">mraleph</span><span>|</span><a href="#39611261">root</a><span>|</span><a href="#39612987">parent</a><span>|</span><a href="#39612091">next</a><span>|</span><label class="collapse" for="c-39613427">[-]</label><label class="expand" for="c-39613427">[2 more]</label></div><br/><div class="children"><div class="content">In Dart 3 instead of declaring the variable and then comparing you can simply write an if-case pattern:<p><pre><code>    if (value case final value?) {
      &#x2F;&#x2F; value is a fresh final variable 
    }</code></pre></div><br/><div id="39613773" class="c"><input type="checkbox" id="c-39613773" checked=""/><div class="controls bullet"><span class="by">teho</span><span>|</span><a href="#39611261">root</a><span>|</span><a href="#39613427">parent</a><span>|</span><a href="#39612091">next</a><span>|</span><label class="collapse" for="c-39613773">[-]</label><label class="expand" for="c-39613773">[1 more]</label></div><br/><div class="children"><div class="content">The more you know, I had totally missed this.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="39612091" class="c"><input type="checkbox" id="c-39612091" checked=""/><div class="controls bullet"><span class="by">hgs3</span><span>|</span><a href="#39611261">root</a><span>|</span><a href="#39611284">parent</a><span>|</span><a href="#39611492">prev</a><span>|</span><a href="#39611909">next</a><span>|</span><label class="collapse" for="c-39612091">[-]</label><label class="expand" for="c-39612091">[3 more]</label></div><br/><div class="children"><div class="content">&gt; The Dart compiler knows if I do a null-check, it can treat following references as safe, instead of if let x = x etc.<p>Does Dart bind a new variable &#x27;x&#x27; for the if-statement scope or does the if-statement scope refer to the same &#x27;x&#x27; from the outer scope?<p>The reason Swift and other languages bind a new &#x27;x&#x27; variable (if let x = x) is because the original &#x27;x&#x27; can be assigned a different value elsewhere, like in another thread or a closure. If a closure captures and assigns null to &#x27;x&#x27; and there is only one binding of &#x27;x&#x27;, then that means the &#x27;x&#x27; within the if-statement will become null _post null-check_ which is type unsound. I believe TypeScript has this &quot;problem&quot; as well.</div><br/><div id="39612736" class="c"><input type="checkbox" id="c-39612736" checked=""/><div class="controls bullet"><span class="by">FuturisticGoo</span><span>|</span><a href="#39611261">root</a><span>|</span><a href="#39612091">parent</a><span>|</span><a href="#39612928">next</a><span>|</span><label class="collapse" for="c-39612736">[-]</label><label class="expand" for="c-39612736">[1 more]</label></div><br/><div class="children"><div class="content">I assume Dart refers to the same variable since:<p>1) Dart doesn&#x27;t have threads, it has isolates (where memory is not shared). So no variable modifications here.<p>2) Dart will promote a variable as not null after a non-null check only if it cannot be modified elsewhere, ie, the variable is final (can&#x27;t be modified once assigned), or there&#x27;s no other reference to it.</div><br/></div></div><div id="39612928" class="c"><input type="checkbox" id="c-39612928" checked=""/><div class="controls bullet"><span class="by">KerrAvon</span><span>|</span><a href="#39611261">root</a><span>|</span><a href="#39612091">parent</a><span>|</span><a href="#39612736">prev</a><span>|</span><a href="#39611909">next</a><span>|</span><label class="collapse" for="c-39612928">[-]</label><label class="expand" for="c-39612928">[1 more]</label></div><br/><div class="children"><div class="content">gentle reminder that `if let x = x` can now be spelled simply `if let x` in current versions of Swift</div><br/></div></div></div></div><div id="39611909" class="c"><input type="checkbox" id="c-39611909" checked=""/><div class="controls bullet"><span class="by">timsneath</span><span>|</span><a href="#39611261">root</a><span>|</span><a href="#39611284">parent</a><span>|</span><a href="#39612091">prev</a><span>|</span><a href="#39611532">next</a><span>|</span><label class="collapse" for="c-39611909">[-]</label><label class="expand" for="c-39611909">[2 more]</label></div><br/><div class="children"><div class="content">I believe Dart has pattern matching, but not associated values of different types.</div><br/><div id="39613415" class="c"><input type="checkbox" id="c-39613415" checked=""/><div class="controls bullet"><span class="by">mraleph</span><span>|</span><a href="#39611261">root</a><span>|</span><a href="#39611909">parent</a><span>|</span><a href="#39611532">next</a><span>|</span><label class="collapse" for="c-39613415">[-]</label><label class="expand" for="c-39613415">[1 more]</label></div><br/><div class="children"><div class="content">In Dart you use class hierarchies instead, rather than enums (which in Dart are way to define a compile time constant set of values). So the original example becomes:<p><pre><code>    sealed class MySomething&lt;T&gt; {
    }

    final class One extends MySomething&lt;Never&gt; {
    }

    final class Two extends MySomething&lt;Never&gt; {
      final Child child; 
      
      Two(this.child);
    }

    final class Three&lt;T&gt; extends MySomething&lt;T&gt; {
      final T value;

      Three(this.value);
    }

    final class Four extends MySomething&lt;Never&gt; {
      final int Function() callback;

      Four(this.callback);
    }
</code></pre>
And then you can exhaustively switch over values of MySomething:<p><pre><code>    int foo(MySomething&lt;String&gt; foo) {
      return switch (foo) {
        One() =&gt; 1,
        Two(child: Child(:final value)) =&gt; value,
        Three(:final value) =&gt; int.parse(value),
        Four(:final callback) =&gt; callback(),
      };
    }
</code></pre>
The declaration of a sealed family is considerably more verbose than Swift - and I really would like[1] us to optimized things for the case when people often declare such families. Macros and a primary constructors will likely provide reprieve from this verbosity.<p>But importantly it composes well with Dart&#x27;s OOPy nature to achieve things which are not possible in Swift: you can mix and match pattern matching and classical virtual dispatch as you see fit. This, for example, means you can attach different virtual behavior to every member of the sealed class family.<p>[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;dart-lang&#x2F;language&#x2F;issues&#x2F;3021">https:&#x2F;&#x2F;github.com&#x2F;dart-lang&#x2F;language&#x2F;issues&#x2F;3021</a></div><br/></div></div></div></div><div id="39611532" class="c"><input type="checkbox" id="c-39611532" checked=""/><div class="controls bullet"><span class="by">RetpolineDrama</span><span>|</span><a href="#39611261">root</a><span>|</span><a href="#39611284">parent</a><span>|</span><a href="#39611909">prev</a><span>|</span><a href="#39611361">next</a><span>|</span><label class="collapse" for="c-39611532">[-]</label><label class="expand" for="c-39611532">[3 more]</label></div><br/><div class="children"><div class="content">&gt;Dart has it, last 12 months or so.<p>To clarify, in the above scenario in dart I can have an input with type MyEnum and do this?<p>switch myEnum {<p>case let one:<p><pre><code>   &#x2F;&#x2F; react to this here

 case let two(twosChild: twosChild):

   &#x2F;&#x2F; call an API passing in a child element of twosChild here

 case let three(threesGenericChild: threesGenericChild):

   &#x2F;&#x2F; T: Protocol, and call an extension function threesGenericChild.extension() here?


 case let four(foursCallbackChild: foursCallbackChild):

   &#x2F;&#x2F; Pass foursCallbackChild callback into another context, and execute an escaping closure if needed?
</code></pre>
}<p>Last I checked Dart required a nested if&#x2F;else tree and didn&#x27;t have compiler-guarantees of switch completeness like the above.</div><br/><div id="39613439" class="c"><input type="checkbox" id="c-39613439" checked=""/><div class="controls bullet"><span class="by">mraleph</span><span>|</span><a href="#39611261">root</a><span>|</span><a href="#39611532">parent</a><span>|</span><a href="#39612199">next</a><span>|</span><label class="collapse" for="c-39613439">[-]</label><label class="expand" for="c-39613439">[1 more]</label></div><br/><div class="children"><div class="content">In Dart 3 you have patterns and sealed class families to achieve that. See my comment above[1].<p>The syntax is unfortunately more verbose, but if all goes well we will address that issue this year.<p>[1]: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=39613415">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=39613415</a></div><br/></div></div><div id="39612199" class="c"><input type="checkbox" id="c-39612199" checked=""/><div class="controls bullet"><span class="by">refulgentis</span><span>|</span><a href="#39611261">root</a><span>|</span><a href="#39611532">parent</a><span>|</span><a href="#39613439">prev</a><span>|</span><a href="#39611361">next</a><span>|</span><label class="collapse" for="c-39612199">[-]</label><label class="expand" for="c-39612199">[1 more]</label></div><br/><div class="children"><div class="content">Correct, Dart has enum exhaustiveness checks, associated types, and expressions as of 11-13 months ago: <a href="https:&#x2F;&#x2F;cfdevelop.medium.com&#x2F;dart-switch-expressions-33145c393052" rel="nofollow">https:&#x2F;&#x2F;cfdevelop.medium.com&#x2F;dart-switch-expressions-33145c3...</a> (keeping it short and simple because I&#x27;m at -2 on the original post, don&#x27;t want to look like I&#x27;m argumentative)</div><br/></div></div></div></div></div></div></div></div><div id="39611426" class="c"><input type="checkbox" id="c-39611426" checked=""/><div class="controls bullet"><span class="by">jsheard</span><span>|</span><a href="#39611261">prev</a><span>|</span><label class="collapse" for="c-39611426">[-]</label><label class="expand" for="c-39611426">[18 more]</label></div><br/><div class="children"><div class="content">How usable&#x2F;useful is Swift on not-Apple platforms in general nowadays? I&#x27;ve been giving it a wide berth since I got the impression that other platforms were more of an afterthought, but maybe things have improved when I wasn&#x27;t looking.</div><br/><div id="39612779" class="c"><input type="checkbox" id="c-39612779" checked=""/><div class="controls bullet"><span class="by">w10-1</span><span>|</span><a href="#39611426">parent</a><span>|</span><a href="#39613750">next</a><span>|</span><label class="collapse" for="c-39612779">[-]</label><label class="expand" for="c-39612779">[2 more]</label></div><br/><div class="children"><div class="content">The automatic C&#x2F;C++ bridging got way better in 5.9, so building an app integrating native libraries is pretty easy (~ 1 day to start iterating).<p>As for Swift libraries, Stdlib is fully ported, Foundation can be spotty, the new Foundation-Essentials is small but growing.  Swift-System has portable low-level path and such, and Shwift helps with fully async scripting.<p>As for supported platforms, Ubuntu seems robust, AWS is usable but marginal. Windows has some hurdles - technical, legal, and incentives - but VSCode support seems relatively good for non-GUI stuff outside windows API&#x27;s.<p>Embedded has been landing in the main compiler and pushed by the Swift team lead.  They&#x27;re still issue-spotting, planning how (much) to live without a heap and the runtime metadata used for protocols, but the number of issues seems manageable for the intensity of effort, even though it&#x27;s not Apple&#x27;s priority.<p>With Swift 6.0, a breaking release, up next (in September?), it&#x27;s likely embedded features could be both driven by the desire to make any breaking changes now, and blocked by other priorities.</div><br/><div id="39612837" class="c"><input type="checkbox" id="c-39612837" checked=""/><div class="controls bullet"><span class="by">georgelyon</span><span>|</span><a href="#39611426">root</a><span>|</span><a href="#39612779">parent</a><span>|</span><a href="#39613750">next</a><span>|</span><label class="collapse" for="c-39612837">[-]</label><label class="expand" for="c-39612837">[1 more]</label></div><br/><div class="children"><div class="content">Great summary!<p>One addition: Swift WASM support has recently become stable enough to be [included in CI](<a href="https:&#x2F;&#x2F;forums.swift.org&#x2F;t&#x2F;stdlib-and-runtime-tests-for-wasm-wasi-now-available-on-swift-ci&#x2F;70385" rel="nofollow">https:&#x2F;&#x2F;forums.swift.org&#x2F;t&#x2F;stdlib-and-runtime-tests-for-wasm...</a>). The folks working on that have done a great job and I’m very excited for that to get more fleshed out!</div><br/></div></div></div></div><div id="39613750" class="c"><input type="checkbox" id="c-39613750" checked=""/><div class="controls bullet"><span class="by">bsaul</span><span>|</span><a href="#39611426">parent</a><span>|</span><a href="#39612779">prev</a><span>|</span><a href="#39611823">next</a><span>|</span><label class="collapse" for="c-39613750">[-]</label><label class="expand" for="c-39613750">[1 more]</label></div><br/><div class="children"><div class="content">Depends on the platform. Android is still super rough (expect debugging custom third-party experimental compiler build scripts).<p>Linux support is i think a bit better. But for now it&#x27;s still the biggest handicap for the language for sure. Any sane project would have solved those issues a long time ago. But since it&#x27;s an apple language, they seem to not be caring much.</div><br/></div></div><div id="39611823" class="c"><input type="checkbox" id="c-39611823" checked=""/><div class="controls bullet"><span class="by">lukeh</span><span>|</span><a href="#39611426">parent</a><span>|</span><a href="#39613750">prev</a><span>|</span><a href="#39612376">next</a><span>|</span><label class="collapse" for="c-39611823">[-]</label><label class="expand" for="c-39611823">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s pretty usable on Linux, the odd package needs a patch, but it&#x27;s pretty smooth sailing. Of course, if you&#x27;re trying to write an application with a UI, YMMV (although swift-cross-ui looks promising).</div><br/></div></div><div id="39612376" class="c"><input type="checkbox" id="c-39612376" checked=""/><div class="controls bullet"><span class="by">shagie</span><span>|</span><a href="#39611426">parent</a><span>|</span><a href="#39611823">prev</a><span>|</span><a href="#39612405">next</a><span>|</span><label class="collapse" for="c-39612376">[-]</label><label class="expand" for="c-39612376">[2 more]</label></div><br/><div class="children"><div class="content">IBM was working on it for a while...<p>IBM Stops Work on Swift — Q&amp;A with Chris Bailey
 :: <a href="https:&#x2F;&#x2F;www.infoq.com&#x2F;news&#x2F;2020&#x2F;01&#x2F;ibm-stop-work-swift-server&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.infoq.com&#x2F;news&#x2F;2020&#x2F;01&#x2F;ibm-stop-work-swift-serve...</a> ( 43 points | 3 comments <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=22175652">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=22175652</a> )<p>In this (and highlighted in a comment) there&#x27;s a quote:<p>&gt; Swift benefits greatly from being an embedded part of Apple&#x27;s ecosystem, but it also provides challenges for its organic growth as there&#x27;s a lot of dependency on Apple for capabilities that the server ecosystem requires. For example, almost all Swift developers use Apple&#x27;s Xcode as their IDE and it has fantastic support for developing for iOS devices, including the ability to run locally in emulator environments. It would be great to add support for writing server code that allows developers to develop directly into containerized environments from their local IDE by supporting the simple integration into Xcode of development tools such as Appsody. Where there is open governance and open ecosystems, it enables the community to contribute and to solve the problems and use cases that are important to them.<p>Same timeframe: IBM Stops Server Side Swift Framework Development - <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=21808619">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=21808619</a> (156 points | 97 comments)<p>---<p>From earlier times:<p>Introducing the IBM Swift Sandbox - <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=10676655">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=10676655</a> (246 points | 59 comments)<p>IBM says Swift is ready for the enterprise  - <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=12581250">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=12581250</a> (176 points| 226 comments)</div><br/><div id="39612738" class="c"><input type="checkbox" id="c-39612738" checked=""/><div class="controls bullet"><span class="by">lukeh</span><span>|</span><a href="#39611426">root</a><span>|</span><a href="#39612376">parent</a><span>|</span><a href="#39612405">next</a><span>|</span><label class="collapse" for="c-39612738">[-]</label><label class="expand" for="c-39612738">[1 more]</label></div><br/><div class="children"><div class="content">I use vim on Linux without any LSP integration, it’s fine, although I do prefer Xcode. I guess I should look into VSCode…</div><br/></div></div></div></div><div id="39612405" class="c"><input type="checkbox" id="c-39612405" checked=""/><div class="controls bullet"><span class="by">frizlab</span><span>|</span><a href="#39611426">parent</a><span>|</span><a href="#39612376">prev</a><span>|</span><a href="#39611450">next</a><span>|</span><label class="collapse" for="c-39612405">[-]</label><label class="expand" for="c-39612405">[1 more]</label></div><br/><div class="children"><div class="content">I’m using swift on the server with vapor and it’s really working great. Non-Apple platforms support has been greatly enhanced over time and is still being enhanced.</div><br/></div></div><div id="39611450" class="c"><input type="checkbox" id="c-39611450" checked=""/><div class="controls bullet"><span class="by">pdpi</span><span>|</span><a href="#39611426">parent</a><span>|</span><a href="#39612405">prev</a><span>|</span><a href="#39612431">next</a><span>|</span><label class="collapse" for="c-39611450">[-]</label><label class="expand" for="c-39611450">[1 more]</label></div><br/><div class="children"><div class="content">I’ve been playing around with Swift on Windows, building a small raylib-based game. The only raylib bindings out there are pretty outdated so I had to write my own, with little to no experience with either C or Swift. It was <i>way</i> easier to get that set up than I expected it to be!<p>The language server seems a bit clunky on Windows, I’ve only used Swift with Xcode on macOS so I don’t know if that’s platform specific.</div><br/></div></div><div id="39612431" class="c"><input type="checkbox" id="c-39612431" checked=""/><div class="controls bullet"><span class="by">navanchauhan</span><span>|</span><a href="#39611426">parent</a><span>|</span><a href="#39611450">prev</a><span>|</span><a href="#39612319">next</a><span>|</span><label class="collapse" for="c-39612431">[-]</label><label class="expand" for="c-39612431">[1 more]</label></div><br/><div class="children"><div class="content">I like using it for non-GUI programs.<p>I usually test them on a Linux VM and a Raspberry Pi</div><br/></div></div><div id="39612319" class="c"><input type="checkbox" id="c-39612319" checked=""/><div class="controls bullet"><span class="by">hboon</span><span>|</span><a href="#39611426">parent</a><span>|</span><a href="#39612431">prev</a><span>|</span><a href="#39611509">next</a><span>|</span><label class="collapse" for="c-39612319">[-]</label><label class="expand" for="c-39612319">[1 more]</label></div><br/><div class="children"><div class="content">There&#x27;s <a href="https:&#x2F;&#x2F;speakinginswift.substack.com&#x2F;p&#x2F;swift-meet-winrt" rel="nofollow">https:&#x2F;&#x2F;speakinginswift.substack.com&#x2F;p&#x2F;swift-meet-winrt</a></div><br/></div></div><div id="39611509" class="c"><input type="checkbox" id="c-39611509" checked=""/><div class="controls bullet"><span class="by">zer0zzz</span><span>|</span><a href="#39611426">parent</a><span>|</span><a href="#39612319">prev</a><span>|</span><a href="#39612612">next</a><span>|</span><label class="collapse" for="c-39611509">[-]</label><label class="expand" for="c-39611509">[1 more]</label></div><br/><div class="children"><div class="content">The arc browser has a beta for windows. It’s pretty decent so far and is written in swift</div><br/></div></div><div id="39612612" class="c"><input type="checkbox" id="c-39612612" checked=""/><div class="controls bullet"><span class="by">TravelPiglet</span><span>|</span><a href="#39611426">parent</a><span>|</span><a href="#39611509">prev</a><span>|</span><a href="#39611466">next</a><span>|</span><label class="collapse" for="c-39612612">[-]</label><label class="expand" for="c-39612612">[5 more]</label></div><br/><div class="children"><div class="content">It’s barely usable on Apple platforms. Horrible compiler and Xcode is very buggy. 
Segfaults and error report dialog popups.</div><br/><div id="39612730" class="c"><input type="checkbox" id="c-39612730" checked=""/><div class="controls bullet"><span class="by">jwells89</span><span>|</span><a href="#39611426">root</a><span>|</span><a href="#39612612">parent</a><span>|</span><a href="#39612943">next</a><span>|</span><label class="collapse" for="c-39612730">[-]</label><label class="expand" for="c-39612730">[3 more]</label></div><br/><div class="children"><div class="content">Xcode is fine as long as you don’t have a ton of Obj-C ↔ Swift bridging going on and avoid XIBs&#x2F;Storyboards, with writing UIKit in pure code being the most stable option (SwiftUI still needs some time in the oven). Writing idiomatic Swift also helps (code smells like deeply nested closures can make SourceKit grumpy).<p>I’ve spent countless hours working in it and crashes and errors have been rare for years now. Especially since ditching CocoaPods in favor of Swift Package Manager for dependencies, I’ve found that Android development to be considerably more frustrating with the mess of Gradle and Proguard paired with the surprisingly anemic Android Framework. Jetpack Compose is thankfully replacing Android Framework and is a major improvement, but from time to time Gradle and Proguard make me want to tear my hair out.</div><br/><div id="39612777" class="c"><input type="checkbox" id="c-39612777" checked=""/><div class="controls bullet"><span class="by">chairhairair</span><span>|</span><a href="#39611426">root</a><span>|</span><a href="#39612730">parent</a><span>|</span><a href="#39612943">next</a><span>|</span><label class="collapse" for="c-39612777">[-]</label><label class="expand" for="c-39612777">[2 more]</label></div><br/><div class="children"><div class="content">That first paragraph is hilarious and consistent with my experience.<p>It’s pretty baffling how bad Xcode is. Although at this point I’m not sure to what extent Swift is to blame.<p>Everything seems to work much better when Swift is abandoned and I just use UIKit.<p>(And it’s a personal blessing when I get to use Flutter and bypass 90% of the insanity that is modern native iOS and Android dev)</div><br/><div id="39612904" class="c"><input type="checkbox" id="c-39612904" checked=""/><div class="controls bullet"><span class="by">jwells89</span><span>|</span><a href="#39611426">root</a><span>|</span><a href="#39612777">parent</a><span>|</span><a href="#39612943">next</a><span>|</span><label class="collapse" for="c-39612904">[-]</label><label class="expand" for="c-39612904">[1 more]</label></div><br/><div class="children"><div class="content">It makes sense that UIKit is more solid, because not only does it have 17 years of its own history, but builds upon the legacy of AppKit which stretches back another 20 years. By comparison SwiftUI is still quite young.<p>Haven’t touched Flutter because Material Design feels weird on iOS, its Cupertino theme isn’t great, and I’m not the type to reinvent the wheel on UI design in the apps I work on. Also don’t really feel like picking up a language, toolchain, and ecosystem for a single UI framework.</div><br/></div></div></div></div></div></div><div id="39612943" class="c"><input type="checkbox" id="c-39612943" checked=""/><div class="controls bullet"><span class="by">KerrAvon</span><span>|</span><a href="#39611426">root</a><span>|</span><a href="#39612612">parent</a><span>|</span><a href="#39612730">prev</a><span>|</span><a href="#39611466">next</a><span>|</span><label class="collapse" for="c-39612943">[-]</label><label class="expand" for="c-39612943">[1 more]</label></div><br/><div class="children"><div class="content">Have you used it recently? It’s improved a lot in the last five years.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>