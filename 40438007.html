<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1716541273151" as="style"/><link rel="stylesheet" href="styles.css?v=1716541273151"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://utcc.utoronto.ca/~cks/space/blog/programming/GoTheGopathDevelopmentStory">Go&#x27;s old $GOPATH story for development and dependencies</a> <span class="domain">(<a href="https://utcc.utoronto.ca">utcc.utoronto.ca</a>)</span></div><div class="subtext"><span>ingve</span> | <span>9 comments</span></div><br/><div><div id="40454701" class="c"><input type="checkbox" id="c-40454701" checked=""/><div class="controls bullet"><span class="by">stairlane</span><span>|</span><a href="#40464151">next</a><span>|</span><label class="collapse" for="c-40454701">[-]</label><label class="expand" for="c-40454701">[6 more]</label></div><br/><div class="children"><div class="content">I struggle to see the authors point.<p>His last sentence:<p>&gt; It could have worked, at least in theory, in a world where preserving API compatibility (in a broad sense) is much more common than it clearly is (or isn&#x27;t) in this one.<p>Is he implying that using vendor packages is more clear that using version tags in a go.mod? That would certainly be the first I’ve ever heard of someone preferring dependency management via vendor packages over a go.mod &amp; ‘go get’.<p>Personally I absolutely love the way go manages dependencies. I have way more confidence that my old go programs will run with minimal dependency related issues compared to programs written in something like python.</div><br/><div id="40462682" class="c"><input type="checkbox" id="c-40462682" checked=""/><div class="controls bullet"><span class="by">siebenmann</span><span>|</span><a href="#40454701">parent</a><span>|</span><a href="#40462640">next</a><span>|</span><label class="collapse" for="c-40462682">[-]</label><label class="expand" for="c-40462682">[4 more]</label></div><br/><div class="children"><div class="content">My badly communicated overall point is that I don&#x27;t think it&#x27;s right to say that Go started without any thought about dependency management. Instead, the Go developers had a theory for how it would work (with $GOPATH creating workspaces), but in practice their theory didn&#x27;t work out (for various reasons). For me, this makes the evolution of Go modules much more interesting, because we can get a window into what didn&#x27;t work.<p>(I&#x27;m the author of the linked-to entry. I wrote the entry because my impression is that a lot of modern Go programmers don&#x27;t have this view of pre-module Go, and especially Go when you had to set $GOPATH and it was expected that you&#x27;d change it, instead of a default $HOME&#x2F;go that you used almost all the time.)</div><br/><div id="40464171" class="c"><input type="checkbox" id="c-40464171" checked=""/><div class="controls bullet"><span class="by">gwd</span><span>|</span><a href="#40454701">root</a><span>|</span><a href="#40462682">parent</a><span>|</span><a href="#40464045">next</a><span>|</span><label class="collapse" for="c-40464171">[-]</label><label class="expand" for="c-40464171">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s certainly an interesting angle.  It might have been more clear if the documentation and how-to&#x27;s had explicitly used that sort of terminology: e.g., saying that step 1 of creating a project would be to create a new workspace directory for all the dependencies, then create a package directory (with a git tree) inside that.<p>There are certainly nice things that the current Go module system buys; but one thing I miss is that under the old system, if one of the packages wasn&#x27;t working the way you expected, the code was right there already; all you had to do was to go to that directory and start editing it, because it was already cloned and ready to go.  The current thing where you have to clone the repo locally, add a &quot;go.work&quot; to replace just that package locally to do experimentation, and then remove the &quot;go.work&quot; afterwards isn&#x27;t terrible, but it&#x27;s just that extra bit of annoying busy-work.<p>But being able to downgrade by simply changing the version in go.mod is certainly a big improvement, as is having the hashes to make supply chain attacks more difficult.</div><br/></div></div><div id="40464045" class="c"><input type="checkbox" id="c-40464045" checked=""/><div class="controls bullet"><span class="by">quectophoton</span><span>|</span><a href="#40454701">root</a><span>|</span><a href="#40462682">parent</a><span>|</span><a href="#40464171">prev</a><span>|</span><a href="#40462640">next</a><span>|</span><label class="collapse" for="c-40464045">[-]</label><label class="expand" for="c-40464045">[2 more]</label></div><br/><div class="children"><div class="content">&gt; but in practice their theory didn&#x27;t work out (for various reasons)<p>For me, one of the reasons I disliked $GOPATH is that source code was not in $GOPATH; it was in `$GOPATH&#x2F;src`.<p>The fact that they are very strongly against relative imports also didn&#x27;t help, even if I get why they do it.</div><br/><div id="40464214" class="c"><input type="checkbox" id="c-40464214" checked=""/><div class="controls bullet"><span class="by">demi56</span><span>|</span><a href="#40454701">root</a><span>|</span><a href="#40464045">parent</a><span>|</span><a href="#40462640">next</a><span>|</span><label class="collapse" for="c-40464214">[-]</label><label class="expand" for="c-40464214">[1 more]</label></div><br/><div class="children"><div class="content">From my experience the reason $GOPATH has pkg, bin src directory was they wanted to limit spread of affecting the filesystem, I could zip my go directory put it in another computer and still works as good as before, I hated Python because it couldn’t do this even pyenv have high chances of it not working correctly if changed to a different distro and most times I don’t wanna download 500M of anaconda everytime I swap.</div><br/></div></div></div></div></div></div><div id="40462640" class="c"><input type="checkbox" id="c-40462640" checked=""/><div class="controls bullet"><span class="by">mdaniel</span><span>|</span><a href="#40454701">parent</a><span>|</span><a href="#40462682">prev</a><span>|</span><a href="#40464151">next</a><span>|</span><label class="collapse" for="c-40462640">[-]</label><label class="expand" for="c-40462640">[1 more]</label></div><br/><div class="children"><div class="content">There is a small asterisk about &quot;more clear&quot; in that if one vendors the deps, they are guaranteed to be available, and not subject to <i>github</i> outages, which seems to be 99.5% of all go deps in the world<p>It for sure is easier to reason about a declarative text file than 18 quadrillion .go files in a subdirectory, but using go.mod does come with tradeoffs</div><br/></div></div></div></div><div id="40464151" class="c"><input type="checkbox" id="c-40464151" checked=""/><div class="controls bullet"><span class="by">leaveyou</span><span>|</span><a href="#40454701">prev</a><span>|</span><label class="collapse" for="c-40464151">[-]</label><label class="expand" for="c-40464151">[2 more]</label></div><br/><div class="children"><div class="content">sorry for the slight off topic but I still don&#x27;t understand what is the advantage of having the domain hard coded in the name of the module<p>go mod init example.com&#x2F;hello<p>and also hardcoded in all the import statements<p>import &quot;example.com&#x2F;hello&quot;<p>what if you move the code to other domain ? you need to change the module and all the references to it instead of only the references<p>I find it quite cumbersome&#x2F;counter intuitive even after all these years.</div><br/><div id="40464221" class="c"><input type="checkbox" id="c-40464221" checked=""/><div class="controls bullet"><span class="by">ionut-maxim</span><span>|</span><a href="#40464151">parent</a><span>|</span><label class="collapse" for="c-40464221">[-]</label><label class="expand" for="c-40464221">[1 more]</label></div><br/><div class="children"><div class="content">I think that the domain is hard coded so you can import the module from any git repo and not depend on a central repository.</div><br/></div></div></div></div></div></div></div></div></div></body></html>