<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1710320462169" as="style"/><link rel="stylesheet" href="styles.css?v=1710320462169"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.rfleury.com/p/multi-threading-and-mutation">Multi-Threading and Mutation</a> <span class="domain">(<a href="https://www.rfleury.com">www.rfleury.com</a>)</span></div><div class="subtext"><span>chmaynard</span> | <span>8 comments</span></div><br/><div><div id="39687576" class="c"><input type="checkbox" id="c-39687576" checked=""/><div class="controls bullet"><span class="by">hedora</span><span>|</span><a href="#39688156">next</a><span>|</span><label class="collapse" for="c-39687576">[-]</label><label class="expand" for="c-39687576">[3 more]</label></div><br/><div class="children"><div class="content">Rust’s borrow checker does a nice job of formalizing the ideas in this post with &amp; and &amp;mut (shared reference and exclusive&#x2F;mutable reference, respectively).  The unsafe keyword (and the interior mutability pattern) provides exactly the right escape hatch for things like TableInsert and the join operation in the post.<p>People like to talk about its memory safety, but it’s the fact that the compiler checks for data-race freedom that really sells rust for me.<p>Languages like Java claim to be memory safe and type safe, but what does that actually mean if a concurrency bug means you have multiple CPUs stomping over your objects’ internal state in race?</div><br/><div id="39688227" class="c"><input type="checkbox" id="c-39688227" checked=""/><div class="controls bullet"><span class="by">jjtheblunt</span><span>|</span><a href="#39687576">parent</a><span>|</span><a href="#39688156">next</a><span>|</span><label class="collapse" for="c-39688227">[-]</label><label class="expand" for="c-39688227">[2 more]</label></div><br/><div class="children"><div class="content">Java doesn’t claim quite to be type safe considering type erasure is built into its spec, so that, by runtime, containers (for example) might be surprised by a runtime appearance of an object type not checked for or known at compile time.</div><br/><div id="39688685" class="c"><input type="checkbox" id="c-39688685" checked=""/><div class="controls bullet"><span class="by">lmm</span><span>|</span><a href="#39687576">root</a><span>|</span><a href="#39688227">parent</a><span>|</span><a href="#39688156">next</a><span>|</span><label class="collapse" for="c-39688685">[-]</label><label class="expand" for="c-39688685">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Java doesn’t claim quite to be type safe considering type erasure is built into its spec, so that, by runtime, containers (for example) might be surprised by a runtime appearance of an object type not checked for or known at compile time.<p>Erasure has nothing to do with type safety; ultimately almost all types are &quot;erased at runtime&quot; since we have Von Neumann architecture where effectively everything is a byte&#x2F;word, but this does not mean mechanical computers cannot run typesafe languages. Java <i>reflection</i> is arguably less safe due to type erasure, but reflection is almost inherently type-unsafe in the first place.<p>(Java does have type unsafety via e.g. covariant arrays, but that&#x27;s a design choice, not a fundamental limitation)</div><br/></div></div></div></div></div></div><div id="39688156" class="c"><input type="checkbox" id="c-39688156" checked=""/><div class="controls bullet"><span class="by">didgetmaster</span><span>|</span><a href="#39687576">prev</a><span>|</span><a href="#39688919">next</a><span>|</span><label class="collapse" for="c-39688156">[-]</label><label class="expand" for="c-39688156">[1 more]</label></div><br/><div class="children"><div class="content">I learned multi-threaded programming on OS&#x2F;2 back in the late 80s. Ever since, I have designed any code I have written to handle multiple threads, even if I thought only a single thread would execute it.<p>That has saved me many rewrites over the years when other threads were introduced.<p>When I began writing my new data management system, multi-threading was designed into every component. It is thrilling when your code runs nearly twice as fast simply because you run it on a CPU with twice as many cores.</div><br/></div></div><div id="39688919" class="c"><input type="checkbox" id="c-39688919" checked=""/><div class="controls bullet"><span class="by">barrenko</span><span>|</span><a href="#39688156">prev</a><span>|</span><a href="#39688723">next</a><span>|</span><label class="collapse" for="c-39688919">[-]</label><label class="expand" for="c-39688919">[1 more]</label></div><br/><div class="children"><div class="content">Tackling this myself atm, as a self-taught CS enthusiast reasoning about multiprocessing in python.</div><br/></div></div><div id="39688723" class="c"><input type="checkbox" id="c-39688723" checked=""/><div class="controls bullet"><span class="by">LAC-Tech</span><span>|</span><a href="#39688919">prev</a><span>|</span><a href="#39688610">next</a><span>|</span><label class="collapse" for="c-39688723">[-]</label><label class="expand" for="c-39688723">[1 more]</label></div><br/><div class="children"><div class="content">Enjoying this article. It&#x27;s an area of computing I am very weak on, and it&#x27;s really good to see an intelligent formulation of the why and how of multi-threaded computing in a broader context.</div><br/></div></div><div id="39688610" class="c"><input type="checkbox" id="c-39688610" checked=""/><div class="controls bullet"><span class="by">foofie</span><span>|</span><a href="#39688723">prev</a><span>|</span><label class="collapse" for="c-39688610">[-]</label><label class="expand" for="c-39688610">[1 more]</label></div><br/><div class="children"><div class="content">Great article. I think it would benefit from a sentence or paragraph on Amdahl&#x27;s law to help drive the point home about potential performance improvements of serial code, which I would classify synchronization as one type.<p><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Amdahl%27s_law" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Amdahl%27s_law</a></div><br/></div></div></div></div></div></div></div></body></html>