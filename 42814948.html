<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1737795674365" as="style"/><link rel="stylesheet" href="styles.css?v=1737795674365"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://wasmgroundup.com/blog/wasm-compiler-in-a-tweet/">A WebAssembly compiler that fits in a tweet</a> <span class="domain">(<a href="https://wasmgroundup.com">wasmgroundup.com</a>)</span></div><div class="subtext"><span>todsacerdoti</span> | <span>29 comments</span></div><br/><div><div id="42815589" class="c"><input type="checkbox" id="c-42815589" checked=""/><div class="controls bullet"><span class="by">tromp</span><span>|</span><a href="#42816402">next</a><span>|</span><label class="collapse" for="c-42815589">[-]</label><label class="expand" for="c-42815589">[2 more]</label></div><br/><div class="children"><div class="content">Interesting how the obfuscated code is explained by slowly unobfuscating it step by step. This is the reverse of how obfuscated code is normally created: by starting with understandable code, and then slowly obfuscating it bit by bit (as I explained for this IOCCC submission [1]).<p>I say normally because one could also have a superoptimizer search for a minimal program that achieves some desired behaviour, and then one has to understand it by slowly unraveling the generated code.<p>[1] <a href="https:&#x2F;&#x2F;tromp.github.io&#x2F;maze.html" rel="nofollow">https:&#x2F;&#x2F;tromp.github.io&#x2F;maze.html</a></div><br/><div id="42815666" class="c"><input type="checkbox" id="c-42815666" checked=""/><div class="controls bullet"><span class="by">marianoguerra</span><span>|</span><a href="#42815589">parent</a><span>|</span><a href="#42816402">next</a><span>|</span><label class="collapse" for="c-42815666">[-]</label><label class="expand" for="c-42815666">[1 more]</label></div><br/><div class="children"><div class="content">this one started pretty obfuscated :)<p><a href="https:&#x2F;&#x2F;x.com&#x2F;warianoguerra&#x2F;status&#x2F;1576166873296941056" rel="nofollow">https:&#x2F;&#x2F;x.com&#x2F;warianoguerra&#x2F;status&#x2F;1576166873296941056</a></div><br/></div></div></div></div><div id="42816402" class="c"><input type="checkbox" id="c-42816402" checked=""/><div class="controls bullet"><span class="by">martijnarts</span><span>|</span><a href="#42815589">prev</a><span>|</span><a href="#42815390">next</a><span>|</span><label class="collapse" for="c-42816402">[-]</label><label class="expand" for="c-42816402">[2 more]</label></div><br/><div class="children"><div class="content">&gt; if you take the time to understand what this code does, you’ll learn a surprising amount about WebAssembly!<p>It&#x27;s a shame the article mostly teaches about codegolf tricks, and the actual wasm info is left to a single commented code block.<p>Nonetheless an interesting article about JavaScript quirks though!</div><br/><div id="42816594" class="c"><input type="checkbox" id="c-42816594" checked=""/><div class="controls bullet"><span class="by">hinkley</span><span>|</span><a href="#42816402">parent</a><span>|</span><a href="#42815390">next</a><span>|</span><label class="collapse" for="c-42816594">[-]</label><label class="expand" for="c-42816594">[1 more]</label></div><br/><div class="children"><div class="content">“Fits in a tweet” can be safely assumed to mean lots and lots of code golf.</div><br/></div></div></div></div><div id="42815390" class="c"><input type="checkbox" id="c-42815390" checked=""/><div class="controls bullet"><span class="by">trescenzi</span><span>|</span><a href="#42816402">prev</a><span>|</span><a href="#42817997">next</a><span>|</span><label class="collapse" for="c-42815390">[-]</label><label class="expand" for="c-42815390">[3 more]</label></div><br/><div class="children"><div class="content">I’ve used reverse Polish notation as an interview question many times. It works well because if someone’s never seen it you can learn a lot about their basic understanding of algorithms. But if they are aware of how easy it is you can extend it forever by adding symbols, improving the algo they build, or doing something like this.</div><br/><div id="42816976" class="c"><input type="checkbox" id="c-42816976" checked=""/><div class="controls bullet"><span class="by">eleumik</span><span>|</span><a href="#42815390">parent</a><span>|</span><a href="#42817997">next</a><span>|</span><label class="collapse" for="c-42816976">[-]</label><label class="expand" for="c-42816976">[2 more]</label></div><br/><div class="children"><div class="content">You are a crazy sadic bastard</div><br/><div id="42818950" class="c"><input type="checkbox" id="c-42818950" checked=""/><div class="controls bullet"><span class="by">AdieuToLogic</span><span>|</span><a href="#42815390">root</a><span>|</span><a href="#42816976">parent</a><span>|</span><a href="#42817997">next</a><span>|</span><label class="collapse" for="c-42818950">[-]</label><label class="expand" for="c-42818950">[1 more]</label></div><br/><div class="children"><div class="content">Such is the result of delving into languages such as Forth[0].<p>Can you make programs with it smaller than assembly language?  Sure.<p>Will you come out the other side a mad hatter speaking of things such as words, dictionaries, and washing machine firmware?  Well, I can only speak for myself...<p>:-D<p>0 - <a href="https:&#x2F;&#x2F;forth-standard.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;forth-standard.org&#x2F;</a></div><br/></div></div></div></div></div></div><div id="42817997" class="c"><input type="checkbox" id="c-42817997" checked=""/><div class="controls bullet"><span class="by">Lerc</span><span>|</span><a href="#42815390">prev</a><span>|</span><a href="#42815185">next</a><span>|</span><label class="collapse" for="c-42817997">[-]</label><label class="expand" for="c-42817997">[1 more]</label></div><br/><div class="children"><div class="content">Really interesting.   I considered having a go at a RPN to WASM converter when I was making <a href="https:&#x2F;&#x2F;c50.fingswotidun.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;c50.fingswotidun.com&#x2F;</a><p>I ended up converting the RPN style notation into a JavaScript string and creating a new function, which lets the JIT sort it out.<p><a href="https:&#x2F;&#x2F;c50.fingswotidun.com&#x2F;show&#x2F;?code=xy!2*!2y!*6%2Bo2%2Fvy%23!*%3ACy%23*%2Bz%23d!%3B*%3Aze!xy*4s*43%2F*e%2B*%2B" rel="nofollow">https:&#x2F;&#x2F;c50.fingswotidun.com&#x2F;show&#x2F;?code=xy!2*!2y!*6%2Bo2%2Fv...</a><p>which has the code<p><pre><code>    xy!2*!2y!*6+o2&#x2F;vy#!*:Cy#*+z#d!;*:ze!xy*4s*43&#x2F;*e+*+
</code></pre>
becomes<p><pre><code>    ((round(z) * ((v * (1 - round(y))) + (clamp((( ((x*(2**((2 * (1 - y)) + 6))) ^ ((1 - ((1 - y) * 2))*(2**((2 * (1 - y)) + 6)))) &#x2F;(2**((2 * (1 - y)) + 6))) &#x2F; 2)) * round(y)))) + ((1 - round(z)) * ((1 - smoothStep(z)) + smoothStep((((x * y) * sin(4)) * (4 &#x2F; 3))))))

</code></pre>
It would be interesting to see the performance difference  from a wasm version, but in the end I found the human(ish) readable expression to be quite useful too.<p>Originally I created an interpreter for a code as a texture maker for code golfed javascripted games.  <a href="https:&#x2F;&#x2F;github.com&#x2F;Lerc&#x2F;stackie">https:&#x2F;&#x2F;github.com&#x2F;Lerc&#x2F;stackie</a><p>There&#x27;s potential for a WASM implementation to be both smaller than the small version and Faster than the fast version.</div><br/></div></div><div id="42815185" class="c"><input type="checkbox" id="c-42815185" checked=""/><div class="controls bullet"><span class="by">marianoguerra</span><span>|</span><a href="#42817997">prev</a><span>|</span><a href="#42819072">next</a><span>|</span><label class="collapse" for="c-42815185">[-]</label><label class="expand" for="c-42815185">[2 more]</label></div><br/><div class="children"><div class="content">post co-author here, let me know if you have any questions :)</div><br/><div id="42818964" class="c"><input type="checkbox" id="c-42818964" checked=""/><div class="controls bullet"><span class="by">AdieuToLogic</span><span>|</span><a href="#42815185">parent</a><span>|</span><a href="#42819072">next</a><span>|</span><label class="collapse" for="c-42818964">[-]</label><label class="expand" for="c-42818964">[1 more]</label></div><br/><div class="children"><div class="content">Have you or the other co-author ever worked with&#x2F;in Forth[0]?<p>0 - <a href="https:&#x2F;&#x2F;forth-standard.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;forth-standard.org&#x2F;</a></div><br/></div></div></div></div><div id="42819072" class="c"><input type="checkbox" id="c-42819072" checked=""/><div class="controls bullet"><span class="by">deivid</span><span>|</span><a href="#42815185">prev</a><span>|</span><a href="#42815512">next</a><span>|</span><label class="collapse" for="c-42819072">[-]</label><label class="expand" for="c-42819072">[2 more]</label></div><br/><div class="children"><div class="content">WASM is cool; I&#x27;ve started implemented a CPU that runs unmodified WASM in Verilog, but I&#x27;m finding the feature creep on the instruction set (SIMD, GC) to take away from the initial values behind WASM (simple, small)</div><br/><div id="42820378" class="c"><input type="checkbox" id="c-42820378" checked=""/><div class="controls bullet"><span class="by">enos_feedler</span><span>|</span><a href="#42819072">parent</a><span>|</span><a href="#42815512">next</a><span>|</span><label class="collapse" for="c-42820378">[-]</label><label class="expand" for="c-42820378">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t think WASM&#x27;s value was ever in a hardware instantiation of the actual instruction set.</div><br/></div></div></div></div><div id="42815512" class="c"><input type="checkbox" id="c-42815512" checked=""/><div class="controls bullet"><span class="by">kragen</span><span>|</span><a href="#42819072">prev</a><span>|</span><a href="#42817853">next</a><span>|</span><label class="collapse" for="c-42815512">[-]</label><label class="expand" for="c-42815512">[9 more]</label></div><br/><div class="children"><div class="content">This is really impressive.  It <i>is</i> over 140 characters, but I guess &quot;a tweet&quot; can be any length now.</div><br/><div id="42815836" class="c"><input type="checkbox" id="c-42815836" checked=""/><div class="controls bullet"><span class="by">pdubroy</span><span>|</span><a href="#42815512">parent</a><span>|</span><a href="#42815544">next</a><span>|</span><label class="collapse" for="c-42815836">[-]</label><label class="expand" for="c-42815836">[1 more]</label></div><br/><div class="children"><div class="content">Co-author of the post here — we had 280 characters in mind. :-)</div><br/></div></div><div id="42815544" class="c"><input type="checkbox" id="c-42815544" checked=""/><div class="controls bullet"><span class="by">lcnPylGDnU4H9OF</span><span>|</span><a href="#42815512">parent</a><span>|</span><a href="#42815836">prev</a><span>|</span><a href="#42817853">next</a><span>|</span><label class="collapse" for="c-42815544">[-]</label><label class="expand" for="c-42815544">[7 more]</label></div><br/><div class="children"><div class="content">I have never used Twitter so I might be mistaken but I believe the limit has been 280 for a while now, which is why the first one at 269 bytes would also have fit.</div><br/><div id="42815602" class="c"><input type="checkbox" id="c-42815602" checked=""/><div class="controls bullet"><span class="by">jsheard</span><span>|</span><a href="#42815512">root</a><span>|</span><a href="#42815544">parent</a><span>|</span><a href="#42815641">next</a><span>|</span><label class="collapse" for="c-42815602">[-]</label><label class="expand" for="c-42815602">[1 more]</label></div><br/><div class="children"><div class="content">Yeah it was changed to 280 for all users in 2017. That&#x27;s still the default limit, but paying users can exceed it now.</div><br/></div></div><div id="42815641" class="c"><input type="checkbox" id="c-42815641" checked=""/><div class="controls bullet"><span class="by">GrumpyNl</span><span>|</span><a href="#42815512">root</a><span>|</span><a href="#42815544">parent</a><span>|</span><a href="#42815602">prev</a><span>|</span><a href="#42817853">next</a><span>|</span><label class="collapse" for="c-42815641">[-]</label><label class="expand" for="c-42815641">[5 more]</label></div><br/><div class="children"><div class="content">Twitter was based on sms, the standard SMS character limit is 160. They used 140 so they could use the remained 20 chars for other purposes.</div><br/><div id="42816393" class="c"><input type="checkbox" id="c-42816393" checked=""/><div class="controls bullet"><span class="by">acuozzo</span><span>|</span><a href="#42815512">root</a><span>|</span><a href="#42815641">parent</a><span>|</span><a href="#42816774">next</a><span>|</span><label class="collapse" for="c-42816393">[-]</label><label class="expand" for="c-42816393">[3 more]</label></div><br/><div class="children"><div class="content">140 and 160 are related when it comes to SMS.<p>The GSM-7 alphabet is the most common one in use with SMS (or, at least, it was as UCS-2 is more common now with emojis and such).<p>160 is the number of GSM-7 characters.<p>160*7&#x2F;8 = 140 which is the number of bytes in the userdata portion of the TPDU.</div><br/><div id="42817825" class="c"><input type="checkbox" id="c-42817825" checked=""/><div class="controls bullet"><span class="by">pests</span><span>|</span><a href="#42815512">root</a><span>|</span><a href="#42816393">parent</a><span>|</span><a href="#42817839">next</a><span>|</span><label class="collapse" for="c-42817825">[-]</label><label class="expand" for="c-42817825">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t think the Twitter choice of 140 was anything to do with this though and is just a coincidence. Back during dumbphones the only way to receive tweets while mobile was via the texting interface, and it would want to prepend the username. I don&#x27;t think reserving 20 for the username has anything to do with how many bits are used to represent the alphabet.</div><br/></div></div><div id="42817839" class="c"><input type="checkbox" id="c-42817839" checked=""/><div class="controls bullet"><span class="by">kragen</span><span>|</span><a href="#42815512">root</a><span>|</span><a href="#42816393">parent</a><span>|</span><a href="#42817825">prev</a><span>|</span><a href="#42816774">next</a><span>|</span><label class="collapse" for="c-42817839">[-]</label><label class="expand" for="c-42817839">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s coincidence, though.  I used Twitter to keep in touch with friends via SMS in 02008, and the messages had space for a prelude to say who they were from.  In the opposite direction, you could use that space to tell Twitter to send the message privately to someone.</div><br/></div></div></div></div><div id="42816774" class="c"><input type="checkbox" id="c-42816774" checked=""/><div class="controls bullet"><span class="by">benatkin</span><span>|</span><a href="#42815512">root</a><span>|</span><a href="#42815641">parent</a><span>|</span><a href="#42816393">prev</a><span>|</span><a href="#42817853">next</a><span>|</span><label class="collapse" for="c-42816774">[-]</label><label class="expand" for="c-42816774">[1 more]</label></div><br/><div class="children"><div class="content">The username length restriction might come partly from that. They could surely relax it by now, though. I saw it at play this week when @SecondGentleman (15 characters) changed to @SecondGent46.</div><br/></div></div></div></div></div></div></div></div><div id="42817853" class="c"><input type="checkbox" id="c-42817853" checked=""/><div class="controls bullet"><span class="by">parlortricks</span><span>|</span><a href="#42815512">prev</a><span>|</span><a href="#42815061">next</a><span>|</span><label class="collapse" for="c-42817853">[-]</label><label class="expand" for="c-42817853">[2 more]</label></div><br/><div class="children"><div class="content">Is this a Tweet or a Xit (zit)? ha.<p>This is cool though, i love these programs that exist in these constraints, like Dwitter does with the demoscene.</div><br/><div id="42820325" class="c"><input type="checkbox" id="c-42820325" checked=""/><div class="controls bullet"><span class="by">numpy-thagoras</span><span>|</span><a href="#42817853">parent</a><span>|</span><a href="#42815061">next</a><span>|</span><label class="collapse" for="c-42820325">[-]</label><label class="expand" for="c-42820325">[1 more]</label></div><br/><div class="children"><div class="content">I call them Xeets now.</div><br/></div></div></div></div></div></div></div></div></div></body></html>