<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1712739667824" as="style"/><link rel="stylesheet" href="styles.css?v=1712739667824"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://traxys.me/riscv_os_buddy.html">Making an RISC-V OS (Part 3): Managing free memory</a>Â <span class="domain">(<a href="https://traxys.me">traxys.me</a>)</span></div><div class="subtext"><span>traxys</span> | <span>10 comments</span></div><br/><div><div id="39987747" class="c"><input type="checkbox" id="c-39987747" checked=""/><div class="controls bullet"><span class="by">bigstrat2003</span><span>|</span><a href="#39984322">next</a><span>|</span><label class="collapse" for="c-39987747">[-]</label><label class="expand" for="c-39987747">[1 more]</label></div><br/><div class="children"><div class="content">Thanks for this, I enjoyed it. Just as a point of constructive criticism, I would say that you might want to go into some more detail on some of the pieces like how the linker script works, or how you are assembling your asm file. I took a look at the repo and figured it out pretty quickly, but I think a beginner would be pretty lost in some of those details.<p>Also, your buddy allocator fills me with shame. I didn&#x27;t think of doing it that way when I wrote the physical memory allocator for my hobby OS, and my algorithm is <i>way</i> slow to initialize as a result of how I did it. I&#x27;m thinking I might have to go and revisit my allocator.</div><br/></div></div><div id="39984322" class="c"><input type="checkbox" id="c-39984322" checked=""/><div class="controls bullet"><span class="by">torstenvl</span><span>|</span><a href="#39987747">prev</a><span>|</span><a href="#39987294">next</a><span>|</span><label class="collapse" for="c-39984322">[-]</label><label class="expand" for="c-39984322">[2 more]</label></div><br/><div class="children"><div class="content">Part 1: <a href="https:&#x2F;&#x2F;traxys.me&#x2F;riscv_os_setup.html" rel="nofollow">https:&#x2F;&#x2F;traxys.me&#x2F;riscv_os_setup.html</a><p>Part 2: <a href="https:&#x2F;&#x2F;traxys.me&#x2F;riscv_os_2.html" rel="nofollow">https:&#x2F;&#x2F;traxys.me&#x2F;riscv_os_2.html</a></div><br/><div id="39985573" class="c"><input type="checkbox" id="c-39985573" checked=""/><div class="controls bullet"><span class="by">tony-allan</span><span>|</span><a href="#39984322">parent</a><span>|</span><a href="#39987294">next</a><span>|</span><label class="collapse" for="c-39985573">[-]</label><label class="expand" for="c-39985573">[1 more]</label></div><br/><div class="children"><div class="content">And the list of all parts is here:<p><a href="https:&#x2F;&#x2F;traxys.me&#x2F;" rel="nofollow">https:&#x2F;&#x2F;traxys.me&#x2F;</a></div><br/></div></div></div></div><div id="39987294" class="c"><input type="checkbox" id="c-39987294" checked=""/><div class="controls bullet"><span class="by">lelanthran</span><span>|</span><a href="#39984322">prev</a><span>|</span><a href="#39984683">next</a><span>|</span><label class="collapse" for="c-39987294">[-]</label><label class="expand" for="c-39987294">[3 more]</label></div><br/><div class="children"><div class="content">Wouldn&#x27;t it be more accurate to call this &quot;Making a RISC-V Bootloader&quot;?<p>As nice as this was to read (and I read all three parts), it&#x27;s basically all the functionality of grub (or similar).<p>For toy OSes on x86&#x2F;x86_64 the best way to get started is to use grub to do all the setup and then launch the kernel.</div><br/><div id="39988070" class="c"><input type="checkbox" id="c-39988070" checked=""/><div class="controls bullet"><span class="by">traxys</span><span>|</span><a href="#39987294">parent</a><span>|</span><a href="#39987698">next</a><span>|</span><label class="collapse" for="c-39988070">[-]</label><label class="expand" for="c-39988070">[1 more]</label></div><br/><div class="children"><div class="content">Well yes, but I the main idea of this series is to use no dependencies in order to have a deeper under standing of the entire stack, from boot to GUIs (that is a long term goal!)</div><br/></div></div><div id="39987698" class="c"><input type="checkbox" id="c-39987698" checked=""/><div class="controls bullet"><span class="by">bigstrat2003</span><span>|</span><a href="#39987294">parent</a><span>|</span><a href="#39988070">prev</a><span>|</span><a href="#39984683">next</a><span>|</span><label class="collapse" for="c-39987698">[-]</label><label class="expand" for="c-39987698">[1 more]</label></div><br/><div class="children"><div class="content">Sure, the first three parts aren&#x27;t exactly doing anything earth shattering. But it&#x27;s an ongoing series, so I don&#x27;t think one can judge it just yet.</div><br/></div></div></div></div><div id="39984683" class="c"><input type="checkbox" id="c-39984683" checked=""/><div class="controls bullet"><span class="by">kiwijamo</span><span>|</span><a href="#39987294">prev</a><span>|</span><label class="collapse" for="c-39984683">[-]</label><label class="expand" for="c-39984683">[3 more]</label></div><br/><div class="children"><div class="content">For a moment there I thought this was referring to RISC OS[1].<p>[1]: <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;RISC_OS" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;RISC_OS</a></div><br/><div id="39986123" class="c"><input type="checkbox" id="c-39986123" checked=""/><div class="controls bullet"><span class="by">brucehoult</span><span>|</span><a href="#39984683">parent</a><span>|</span><label class="collapse" for="c-39986123">[-]</label><label class="expand" for="c-39986123">[2 more]</label></div><br/><div class="children"><div class="content">Might as well be. Little to no RISC-V content here, and it&#x27;s not even depending on the page table format, just blasting through physical RAM.</div><br/><div id="39988059" class="c"><input type="checkbox" id="c-39988059" checked=""/><div class="controls bullet"><span class="by">traxys</span><span>|</span><a href="#39984683">root</a><span>|</span><a href="#39986123">parent</a><span>|</span><label class="collapse" for="c-39988059">[-]</label><label class="expand" for="c-39988059">[1 more]</label></div><br/><div class="children"><div class="content">Well this part did not have much RISC-V in it, as it builds upon the abstractions of part 2, which had lots of assembly!</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>