<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1705136466852" as="style"/><link rel="stylesheet" href="styles.css?v=1705136466852"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/aws/aws-lc-rs">AWS Libcrypto for Rust</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>jrpelkonen</span> | <span>22 comments</span></div><br/><div><div id="38976864" class="c"><input type="checkbox" id="c-38976864" checked=""/><div class="controls bullet"><span class="by">rusbus</span><span>|</span><a href="#38976633">next</a><span>|</span><label class="collapse" for="c-38976864">[-]</label><label class="expand" for="c-38976864">[2 more]</label></div><br/><div class="children"><div class="content">How crazy is the build chain these days? Well, to build it in FIPS mode you need a Go compiler!</div><br/><div id="38976971" class="c"><input type="checkbox" id="c-38976971" checked=""/><div class="controls bullet"><span class="by">guardiangod</span><span>|</span><a href="#38976864">parent</a><span>|</span><a href="#38976633">next</a><span>|</span><label class="collapse" for="c-38976971">[-]</label><label class="expand" for="c-38976971">[1 more]</label></div><br/><div class="children"><div class="content">Go is only needed to build the test suite.<p>&#x2F;I asked the same question and got this from the dev.</div><br/></div></div></div></div><div id="38976633" class="c"><input type="checkbox" id="c-38976633" checked=""/><div class="controls bullet"><span class="by">Thaxll</span><span>|</span><a href="#38976864">prev</a><span>|</span><a href="#38976157">next</a><span>|</span><label class="collapse" for="c-38976633">[-]</label><label class="expand" for="c-38976633">[8 more]</label></div><br/><div class="children"><div class="content">It&#x27;s just a wrapper arround aws-lc which is 100% C++&#x2F;C&#x2F;ASM.</div><br/><div id="38976843" class="c"><input type="checkbox" id="c-38976843" checked=""/><div class="controls bullet"><span class="by">jrpelkonen</span><span>|</span><a href="#38976633">parent</a><span>|</span><a href="#38976781">next</a><span>|</span><label class="collapse" for="c-38976843">[-]</label><label class="expand" for="c-38976843">[2 more]</label></div><br/><div class="children"><div class="content">Maybe so, but pretty much all cryptographic primitives have to be written in assembly anyway to achieve constant time operation. Furthermore, it has a ring compatible API, and it is evidently faster than ring itself[1].<p>[1] <a href="https:&#x2F;&#x2F;www.memorysafety.org&#x2F;blog&#x2F;rustls-performance&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.memorysafety.org&#x2F;blog&#x2F;rustls-performance&#x2F;</a></div><br/><div id="38977289" class="c"><input type="checkbox" id="c-38977289" checked=""/><div class="controls bullet"><span class="by">briansmith</span><span>|</span><a href="#38976633">root</a><span>|</span><a href="#38976843">parent</a><span>|</span><a href="#38976781">next</a><span>|</span><label class="collapse" for="c-38977289">[-]</label><label class="expand" for="c-38977289">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Maybe so, but pretty much all cryptographic primitives have to be written in assembly anyway to achieve constant time operation.<p>This really oversimplifies the situation. Even at my most pessimistic, I believe just a very few, very small, parts need to be written in assembly language to maintain the &quot;constant time&quot; properties, and that&#x27;s just until we can work together better with the Rust language team to eliminate these small  gaps. Even before then, the Rust language team is doing a good job at independently improving and expanding the building blocks we need to get to entirely-safe (in the Rust `unsafe` sense) and high-performance crypto libraries in Rust.<p>&gt; evidently faster than ring itself[1].<p>If you&#x27;re running on an AVX-512 system, there is a notable performance gap, temporarily. This state will persist for a few months at most, most likely. It&#x27;s inevitable that we (all the OpenSSL forks, and even including non-OpenSSL-forks like rust-crypto) all converge on more-or-less the same implementations and&#x2F;or different implementations of the same optimizations.</div><br/></div></div></div></div><div id="38976781" class="c"><input type="checkbox" id="c-38976781" checked=""/><div class="controls bullet"><span class="by">brundolf</span><span>|</span><a href="#38976633">parent</a><span>|</span><a href="#38976843">prev</a><span>|</span><a href="#38976789">next</a><span>|</span><label class="collapse" for="c-38976781">[-]</label><label class="expand" for="c-38976781">[1 more]</label></div><br/><div class="children"><div class="content">It still matters for the ecosystem to have SDKs available for use</div><br/></div></div><div id="38976789" class="c"><input type="checkbox" id="c-38976789" checked=""/><div class="controls bullet"><span class="by">methodical</span><span>|</span><a href="#38976633">parent</a><span>|</span><a href="#38976781">prev</a><span>|</span><a href="#38976157">next</a><span>|</span><label class="collapse" for="c-38976789">[-]</label><label class="expand" for="c-38976789">[4 more]</label></div><br/><div class="children"><div class="content">It&#x27;s incredible how many Rust packages are just wrappers around C++ implementations. That being said, as a weekend rustacean (I hate saying it but couldn&#x27;t resist the urge) and current user of tch-rs (a rust PyTorch C++ wrapper) I&#x27;m glad somebody out there is writing the interfaces to allow more functionality in Rust. It&#x27;s probably a good thing that C++ is so established since it allows these types of packages to come to fruition without the leg work of an actual re-implementation of the same logic in Rust from scratch.</div><br/><div id="38977500" class="c"><input type="checkbox" id="c-38977500" checked=""/><div class="controls bullet"><span class="by">bee_rider</span><span>|</span><a href="#38976633">root</a><span>|</span><a href="#38976789">parent</a><span>|</span><a href="#38977197">next</a><span>|</span><label class="collapse" for="c-38977500">[-]</label><label class="expand" for="c-38977500">[1 more]</label></div><br/><div class="children"><div class="content">It seems odd but it makes sense, right? Rust prevents a whole class of bugs. But, reusing existing code that’s already well debugged and battle-tested prevents even more bugs!</div><br/></div></div><div id="38977197" class="c"><input type="checkbox" id="c-38977197" checked=""/><div class="controls bullet"><span class="by">catgary</span><span>|</span><a href="#38976633">root</a><span>|</span><a href="#38976789">parent</a><span>|</span><a href="#38977500">prev</a><span>|</span><a href="#38976157">next</a><span>|</span><label class="collapse" for="c-38977197">[-]</label><label class="expand" for="c-38977197">[2 more]</label></div><br/><div class="children"><div class="content">Have you looked at burn.dev? It’s kind of a neat approach where they backend to torch&#x2F;candle&#x2F;other things and are also building a pure Rust backend that compiles to webgpu shaders.</div><br/><div id="38977604" class="c"><input type="checkbox" id="c-38977604" checked=""/><div class="controls bullet"><span class="by">paholg</span><span>|</span><a href="#38976633">root</a><span>|</span><a href="#38977197">parent</a><span>|</span><a href="#38976157">next</a><span>|</span><label class="collapse" for="c-38977604">[-]</label><label class="expand" for="c-38977604">[1 more]</label></div><br/><div class="children"><div class="content">There&#x27;s also dfdx, which is pure Rust and really leverages the type system.</div><br/></div></div></div></div></div></div></div></div><div id="38976157" class="c"><input type="checkbox" id="c-38976157" checked=""/><div class="controls bullet"><span class="by">gfs</span><span>|</span><a href="#38976633">prev</a><span>|</span><a href="#38977956">next</a><span>|</span><label class="collapse" for="c-38976157">[-]</label><label class="expand" for="c-38976157">[10 more]</label></div><br/><div class="children"><div class="content">&gt; aws-lc-rs is a cryptographic library using AWS-LC for its cryptographic operations.<p>Why should I use AWS-LC over the myriad cryptography libraries out there already?</div><br/><div id="38976439" class="c"><input type="checkbox" id="c-38976439" checked=""/><div class="controls bullet"><span class="by">koolba</span><span>|</span><a href="#38976157">parent</a><span>|</span><a href="#38976968">next</a><span>|</span><label class="collapse" for="c-38976439">[-]</label><label class="expand" for="c-38976439">[4 more]</label></div><br/><div class="children"><div class="content">I would wager this is a big reason:<p>&gt; This crate provides bindings to AWS-LC-FIPS 2.x, which has completed FIPS validation testing by an accredited lab and has been submitted to NIST for certification.<p>If you are in a regulated environment, that’s reason enough.</div><br/><div id="38976850" class="c"><input type="checkbox" id="c-38976850" checked=""/><div class="controls bullet"><span class="by">colmmacc</span><span>|</span><a href="#38976157">root</a><span>|</span><a href="#38976439">parent</a><span>|</span><a href="#38976625">next</a><span>|</span><label class="collapse" for="c-38976850">[-]</label><label class="expand" for="c-38976850">[2 more]</label></div><br/><div class="children"><div class="content">Another nice reason is that AWS-LC includes rewrites and optimizations that make it faster than alternatives, especially on Graviton.</div><br/><div id="38978236" class="c"><input type="checkbox" id="c-38978236" checked=""/><div class="controls bullet"><span class="by">jpgvm</span><span>|</span><a href="#38976157">root</a><span>|</span><a href="#38976850">parent</a><span>|</span><a href="#38976625">next</a><span>|</span><label class="collapse" for="c-38978236">[-]</label><label class="expand" for="c-38978236">[1 more]</label></div><br/><div class="children"><div class="content">Are there benches on this vs say OpenSSL on Graviton and Apple M chips? I would be curious how big the difference is vs whatever NEON optimizations are in OpenSSL (and friends) already.</div><br/></div></div></div></div><div id="38976625" class="c"><input type="checkbox" id="c-38976625" checked=""/><div class="controls bullet"><span class="by">fitzoh</span><span>|</span><a href="#38976157">root</a><span>|</span><a href="#38976439">parent</a><span>|</span><a href="#38976850">prev</a><span>|</span><a href="#38976968">next</a><span>|</span><label class="collapse" for="c-38976625">[-]</label><label class="expand" for="c-38976625">[1 more]</label></div><br/><div class="children"><div class="content">Exactly, see the &quot;Motivation&quot; section of the README</div><br/></div></div></div></div><div id="38976968" class="c"><input type="checkbox" id="c-38976968" checked=""/><div class="controls bullet"><span class="by">JoshTriplett</span><span>|</span><a href="#38976157">parent</a><span>|</span><a href="#38976439">prev</a><span>|</span><a href="#38977956">next</a><span>|</span><label class="collapse" for="c-38976968">[-]</label><label class="expand" for="c-38976968">[5 more]</label></div><br/><div class="children"><div class="content">One reason: you can use this as a backend to rustls, and then you no longer have anything under the OpenSSL license in your dependencies, which improves the license compatibility of your project.</div><br/><div id="38977309" class="c"><input type="checkbox" id="c-38977309" checked=""/><div class="controls bullet"><span class="by">briansmith</span><span>|</span><a href="#38976157">root</a><span>|</span><a href="#38976968">parent</a><span>|</span><a href="#38977956">next</a><span>|</span><label class="collapse" for="c-38977309">[-]</label><label class="expand" for="c-38977309">[4 more]</label></div><br/><div class="children"><div class="content">Again, this is just a temporary situation, and a matter of burning down a list of small tasks. Not that the OpenSSL license issue is a big deal for most anyway. Feel free to help; see this issue filed by Josh Triplett: <a href="https:&#x2F;&#x2F;github.com&#x2F;briansmith&#x2F;ring&#x2F;issues&#x2F;1318#issuecomment-1890239223">https:&#x2F;&#x2F;github.com&#x2F;briansmith&#x2F;ring&#x2F;issues&#x2F;1318#issuecomment-...</a></div><br/><div id="38977615" class="c"><input type="checkbox" id="c-38977615" checked=""/><div class="controls bullet"><span class="by">JoshTriplett</span><span>|</span><a href="#38976157">root</a><span>|</span><a href="#38977309">parent</a><span>|</span><a href="#38977926">next</a><span>|</span><label class="collapse" for="c-38977615">[-]</label><label class="expand" for="c-38977615">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, I realize, and I <i>am</i> looking forward to having multiple options to choose from that all have the same license compatibility. It&#x27;s nice that there&#x27;s a short-term solution that&#x27;s available for people who need to ship things soon, and it&#x27;s nice that there&#x27;s a longstanding library (ring) that&#x27;ll long-term will be capable of providing a compatible solution as well.</div><br/></div></div><div id="38978211" class="c"><input type="checkbox" id="c-38978211" checked=""/><div class="controls bullet"><span class="by">littlestymaar</span><span>|</span><a href="#38976157">root</a><span>|</span><a href="#38977309">parent</a><span>|</span><a href="#38977926">prev</a><span>|</span><a href="#38977956">next</a><span>|</span><label class="collapse" for="c-38978211">[-]</label><label class="expand" for="c-38978211">[1 more]</label></div><br/><div class="children"><div class="content">&gt; see this issue filed by Josh Triplett<p>Check who you are replying to ;)</div><br/></div></div></div></div></div></div></div></div><div id="38977956" class="c"><input type="checkbox" id="c-38977956" checked=""/><div class="controls bullet"><span class="by">cryptonector</span><span>|</span><a href="#38976157">prev</a><span>|</span><label class="collapse" for="c-38977956">[-]</label><label class="expand" for="c-38977956">[1 more]</label></div><br/><div class="children"><div class="content">Joy!</div><br/></div></div></div></div></div></div></div></body></html>