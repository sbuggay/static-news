<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1717059669946" as="style"/><link rel="stylesheet" href="styles.css?v=1717059669946"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="http://angg.twu.net/miniforth-article.html">Bootstrapping a Forth in 40 lines of Lua code</a>Â <span class="domain">(<a href="http://angg.twu.net">angg.twu.net</a>)</span></div><div class="subtext"><span>anothername12</span> | <span>18 comments</span></div><br/><div><div id="40520797" class="c"><input type="checkbox" id="c-40520797" checked=""/><div class="controls bullet"><span class="by">rasur</span><span>|</span><a href="#40519432">next</a><span>|</span><label class="collapse" for="c-40520797">[-]</label><label class="expand" for="c-40520797">[1 more]</label></div><br/><div class="children"><div class="content">I &#x27;learned&#x27; Forth decades ago (on a Sinclair ZX81, so essentially a quite horrible experience), and tripped over it again recently.. ending up ploughing through the books &quot;Thinking Forth&quot; and (currently) &quot;Starting Forth&quot; both of which are extremely interesting and so very very different to what we use these days. It very much fits into that saying &quot;A language that doesn&#x27;t change how your think about programming, isn&#x27;t worth knowing&quot;. I realise now just how shallow an understanding of Forth I had as a teen, back in the day ;)<p>But I think the win here - these days - for Forth is in things like &quot;running on small embedded devices&quot;.. I&#x27;m looking with interest at some of the activity around say Arduinos and am thinking that Forth is a rather nice fit for that sort of system. Have bought a kit, and am looking forwards to some non-work quality time to play further :)<p>(The Books I meantion can be found online very easily, but you&#x27;ll forgive them for being written back in a time when systems were _simpler_ to grok ;) )</div><br/></div></div><div id="40519432" class="c"><input type="checkbox" id="c-40519432" checked=""/><div class="controls bullet"><span class="by">mjevans</span><span>|</span><a href="#40520797">prev</a><span>|</span><a href="#40518284">next</a><span>|</span><label class="collapse" for="c-40519432">[-]</label><label class="expand" for="c-40519432">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;d be interesting to see how compact the binary form is, and what external dependencies it has.<p>Forth&#x27;s selling points are mostly how compact a minimal environment can be, and how easy it is to extend that environment to do more useful things.  The &#x27;shell&#x27; is the compiler.</div><br/></div></div><div id="40518284" class="c"><input type="checkbox" id="c-40518284" checked=""/><div class="controls bullet"><span class="by">bmitc</span><span>|</span><a href="#40519432">prev</a><span>|</span><a href="#40518311">next</a><span>|</span><label class="collapse" for="c-40518284">[-]</label><label class="expand" for="c-40518284">[12 more]</label></div><br/><div class="children"><div class="content">I need to do something with either of these languages. I&#x27;ve learned Forth before but never did anything with it. I should learn Lua as well.</div><br/><div id="40520461" class="c"><input type="checkbox" id="c-40520461" checked=""/><div class="controls bullet"><span class="by">JBits</span><span>|</span><a href="#40518284">parent</a><span>|</span><a href="#40520340">next</a><span>|</span><label class="collapse" for="c-40520461">[-]</label><label class="expand" for="c-40520461">[1 more]</label></div><br/><div class="children"><div class="content">If you&#x27;re looking for something to do in Lua, I suggest making a game with the Love2D framework [love2d.org]!</div><br/></div></div><div id="40520340" class="c"><input type="checkbox" id="c-40520340" checked=""/><div class="controls bullet"><span class="by">larsbrinkhoff</span><span>|</span><a href="#40518284">parent</a><span>|</span><a href="#40520461">prev</a><span>|</span><a href="#40519117">next</a><span>|</span><label class="collapse" for="c-40520340">[-]</label><label class="expand" for="c-40520340">[1 more]</label></div><br/><div class="children"><div class="content">Tradition has it that the thing to do with Forth is implement your own toy and then call it a day.  Usually not having learned how to actually program in Forth.  Yes I&#x27;m bitter.</div><br/></div></div><div id="40519117" class="c"><input type="checkbox" id="c-40519117" checked=""/><div class="controls bullet"><span class="by">aeonik</span><span>|</span><a href="#40518284">parent</a><span>|</span><a href="#40520340">prev</a><span>|</span><a href="#40519347">next</a><span>|</span><label class="collapse" for="c-40519117">[-]</label><label class="expand" for="c-40519117">[1 more]</label></div><br/><div class="children"><div class="content">The two Forths that I&#x27;ve had my eye on:<p><a href="https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;gforth&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;gforth&#x2F;</a><p>And the inventor of Forth has a very power efficient multi-computer chip that can be programmed with colorForth or array forth (he claims most power efficient):<p><a href="https:&#x2F;&#x2F;www.greenarraychips.com&#x2F;home&#x2F;products&#x2F;index.php" rel="nofollow">https:&#x2F;&#x2F;www.greenarraychips.com&#x2F;home&#x2F;products&#x2F;index.php</a><p><a href="https:&#x2F;&#x2F;www.greenarraychips.com&#x2F;home&#x2F;documents&#x2F;greg&#x2F;cf-intro.htm" rel="nofollow">https:&#x2F;&#x2F;www.greenarraychips.com&#x2F;home&#x2F;documents&#x2F;greg&#x2F;cf-intro...</a><p>Here is a video about the chip, and some cool Forth demos with it:<p><a href="https:&#x2F;&#x2F;youtu.be&#x2F;0PclgBd6_Zs?si=nThy9TnGl9rJX5_u" rel="nofollow">https:&#x2F;&#x2F;youtu.be&#x2F;0PclgBd6_Zs?si=nThy9TnGl9rJX5_u</a></div><br/></div></div><div id="40519347" class="c"><input type="checkbox" id="c-40519347" checked=""/><div class="controls bullet"><span class="by">IncreasePosts</span><span>|</span><a href="#40518284">parent</a><span>|</span><a href="#40519117">prev</a><span>|</span><a href="#40519327">next</a><span>|</span><label class="collapse" for="c-40519347">[-]</label><label class="expand" for="c-40519347">[7 more]</label></div><br/><div class="children"><div class="content">Forth is super interesting, and worth learning, but it seems like an evolutionary dead end. Even Chuck Moore doesn&#x27;t do much Forth these days, because he doesn&#x27;t like having to keep track of a whole bunch of details that keep getting changed between processor families.</div><br/><div id="40519624" class="c"><input type="checkbox" id="c-40519624" checked=""/><div class="controls bullet"><span class="by">7thaccount</span><span>|</span><a href="#40518284">root</a><span>|</span><a href="#40519347">parent</a><span>|</span><a href="#40519493">next</a><span>|</span><label class="collapse" for="c-40519624">[-]</label><label class="expand" for="c-40519624">[4 more]</label></div><br/><div class="children"><div class="content">Chuck gave up doing Forth in assembly for modern processors a number of years ago, but developed the GreenArrays chips that are apparently like 144 computers on a chip. He programs that in some version of ColorForth and has done several talks on it. I have no clue if there is any value because I can&#x27;t understand it&#x27;s use case. It is really cool though that when he builds an application, he typically understands everything from the machine level all the way through the software and he designs them both to some kind of optimal overall system. He&#x27;s got to be one of the only people alive who can still claim that I&#x27;d guess.</div><br/><div id="40519810" class="c"><input type="checkbox" id="c-40519810" checked=""/><div class="controls bullet"><span class="by">chuckadams</span><span>|</span><a href="#40518284">root</a><span>|</span><a href="#40519624">parent</a><span>|</span><a href="#40519493">next</a><span>|</span><label class="collapse" for="c-40519810">[-]</label><label class="expand" for="c-40519810">[3 more]</label></div><br/><div class="children"><div class="content">&gt; 144 computers on a chip<p>Ugh, &quot;computers&quot;.  I&#x27;m not even a stickler for terminology, but the whole &quot;144 computers&quot; thing somehow rubs me the wrong way, like it&#x27;s some Best Buy salesdroid telling me that a quad-core means having four computers in one box.</div><br/><div id="40521021" class="c"><input type="checkbox" id="c-40521021" checked=""/><div class="controls bullet"><span class="by">rasur</span><span>|</span><a href="#40518284">root</a><span>|</span><a href="#40519810">parent</a><span>|</span><a href="#40521464">next</a><span>|</span><label class="collapse" for="c-40521021">[-]</label><label class="expand" for="c-40521021">[1 more]</label></div><br/><div class="children"><div class="content">An understandable reaction, and one I can claim to feel myself in similar salesdroid situations, however they have an explanatory sheet which reiterates the claim: <a href="https:&#x2F;&#x2F;www.greenarraychips.com&#x2F;home&#x2F;documents&#x2F;greg&#x2F;PB002-100822-GA-Arch.pdf" rel="nofollow">https:&#x2F;&#x2F;www.greenarraychips.com&#x2F;home&#x2F;documents&#x2F;greg&#x2F;PB002-10...</a><p>They honestly do sound quite interesting, and if I could fork myself off a few times to look at fun &amp; interesting things, this GreenArray stuff would be in the list ;)</div><br/></div></div><div id="40521464" class="c"><input type="checkbox" id="c-40521464" checked=""/><div class="controls bullet"><span class="by">cess11</span><span>|</span><a href="#40518284">root</a><span>|</span><a href="#40519810">parent</a><span>|</span><a href="#40521021">prev</a><span>|</span><a href="#40519493">next</a><span>|</span><label class="collapse" for="c-40521464">[-]</label><label class="expand" for="c-40521464">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not 144 CPU cores. It&#x27;s more like 144 Forth computers, with their own memory and four ports to adjacent units, making up a network mesh where each unit can also make use of both stacks and RAM of its neighbours.<p>So it&#x27;s not like a computer with 144 1-core CPU:s sharing RAM and ports, or a CPU with 144 cores, it&#x27;s something weirder and more reminiscent of a network of small computers.</div><br/></div></div></div></div></div></div><div id="40519493" class="c"><input type="checkbox" id="c-40519493" checked=""/><div class="controls bullet"><span class="by">chuckadams</span><span>|</span><a href="#40518284">root</a><span>|</span><a href="#40519347">parent</a><span>|</span><a href="#40519624">prev</a><span>|</span><a href="#40519327">next</a><span>|</span><label class="collapse" for="c-40519493">[-]</label><label class="expand" for="c-40519493">[2 more]</label></div><br/><div class="children"><div class="content">Chuck Moore designs processors, seems to me he&#x27;s got those details handled.  Last thing I heard he worked on was etherForth, but the guy&#x27;s 85 years old, so he might just have quietly retired by now.<p>Forth was never going to be the next Java or Rust, but in its own little niche, it&#x27;s fantastic.  ANS Forth isn&#x27;t getting any new features anytime soon, but meanwhile forth spawned a whole family of interesting languages like Joy, Factor, and ColorForth.  Besides, evolution is overrated: tardigrades are still doing fine :)</div><br/><div id="40520822" class="c"><input type="checkbox" id="c-40520822" checked=""/><div class="controls bullet"><span class="by">andsoitis</span><span>|</span><a href="#40518284">root</a><span>|</span><a href="#40519493">parent</a><span>|</span><a href="#40519327">next</a><span>|</span><label class="collapse" for="c-40520822">[-]</label><label class="expand" for="c-40520822">[1 more]</label></div><br/><div class="children"><div class="content">&gt; evolution is overrated: tardigrades are still doing fine :)<p>The evolution of tardigrades as super fascinating: <a href="https:&#x2F;&#x2F;eartharchives.org&#x2F;articles&#x2F;tardigrade-genome-reveals-secrets-of-their-toughness-and-evolution&#x2F;index.html" rel="nofollow">https:&#x2F;&#x2F;eartharchives.org&#x2F;articles&#x2F;tardigrade-genome-reveals...</a></div><br/></div></div></div></div></div></div><div id="40519327" class="c"><input type="checkbox" id="c-40519327" checked=""/><div class="controls bullet"><span class="by">turtledragonfly</span><span>|</span><a href="#40518284">parent</a><span>|</span><a href="#40519347">prev</a><span>|</span><a href="#40518311">next</a><span>|</span><label class="collapse" for="c-40519327">[-]</label><label class="expand" for="c-40519327">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve had a very enjoyable experience with Lua, and kaguya for binding it to C++. Match made in heaven, for the most part (:<p>PUC Lua also has a very solid coherent C implementation; it&#x27;s basically a masterclass in making an effective, portable, but also necessarily complex C library.</div><br/></div></div></div></div><div id="40518311" class="c"><input type="checkbox" id="c-40518311" checked=""/><div class="controls bullet"><span class="by">veqq</span><span>|</span><a href="#40518284">prev</a><span>|</span><a href="#40518886">next</a><span>|</span><label class="collapse" for="c-40518311">[-]</label><label class="expand" for="c-40518311">[2 more]</label></div><br/><div class="children"><div class="content">As eval() was removed from Lua, you must reimplement it:<p><pre><code>  ```
  function eval(s)
    load(s)()
  end

  ```</code></pre></div><br/><div id="40519084" class="c"><input type="checkbox" id="c-40519084" checked=""/><div class="controls bullet"><span class="by">aeonik</span><span>|</span><a href="#40518311">parent</a><span>|</span><a href="#40518886">next</a><span>|</span><label class="collapse" for="c-40519084">[-]</label><label class="expand" for="c-40519084">[1 more]</label></div><br/><div class="children"><div class="content">For those who don&#x27;t know Lua very well (like me), here is a link to the reference manual.<p><a href="https:&#x2F;&#x2F;www.lua.org&#x2F;manual&#x2F;5.4&#x2F;manual.html#pdf-load" rel="nofollow">https:&#x2F;&#x2F;www.lua.org&#x2F;manual&#x2F;5.4&#x2F;manual.html#pdf-load</a><p>A simple example that I tested:<p><pre><code>   local chunk = &quot;return 2 + 2&quot;
   local func = load(chunk)
   print(func())  -- Output: 4</code></pre></div><br/></div></div></div></div><div id="40518886" class="c"><input type="checkbox" id="c-40518886" checked=""/><div class="controls bullet"><span class="by">thefaux</span><span>|</span><a href="#40518311">prev</a><span>|</span><label class="collapse" for="c-40518886">[-]</label><label class="expand" for="c-40518886">[1 more]</label></div><br/><div class="children"><div class="content">Lua and Forth is like pb&amp;j.</div><br/></div></div></div></div></div></div></div></body></html>