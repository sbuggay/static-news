<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1719478854745" as="style"/><link rel="stylesheet" href="styles.css?v=1719478854745"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://grantkot.com/ll/">Liquid Layers</a>Â <span class="domain">(<a href="https://grantkot.com">grantkot.com</a>)</span></div><div class="subtext"><span>nmstoker</span> | <span>39 comments</span></div><br/><div><div id="40801626" class="c"><input type="checkbox" id="c-40801626" checked=""/><div class="controls bullet"><span class="by">hopfog</span><span>|</span><a href="#40804130">next</a><span>|</span><label class="collapse" for="c-40801626">[-]</label><label class="expand" for="c-40801626">[5 more]</label></div><br/><div class="children"><div class="content">The author is also working on a really impressive voxel physics engine: <a href="https:&#x2F;&#x2F;youtu.be&#x2F;3259aycYcek" rel="nofollow">https:&#x2F;&#x2F;youtu.be&#x2F;3259aycYcek</a></div><br/><div id="40802115" class="c"><input type="checkbox" id="c-40802115" checked=""/><div class="controls bullet"><span class="by">pornel</span><span>|</span><a href="#40801626">parent</a><span>|</span><a href="#40804130">next</a><span>|</span><label class="collapse" for="c-40802115">[-]</label><label class="expand" for="c-40802115">[4 more]</label></div><br/><div class="children"><div class="content">I&#x27;m surprised the simulation is run on the CPU! This problem has solutions that fit the GPU well, even for grid&lt;&gt;particle conversions.</div><br/><div id="40803309" class="c"><input type="checkbox" id="c-40803309" checked=""/><div class="controls bullet"><span class="by">troglobite</span><span>|</span><a href="#40801626">root</a><span>|</span><a href="#40802115">parent</a><span>|</span><a href="#40802660">next</a><span>|</span><label class="collapse" for="c-40803309">[-]</label><label class="expand" for="c-40803309">[2 more]</label></div><br/><div class="children"><div class="content">this kind of sims are better suited for CPU ;-), gpu are good to work on meshes, not really on pure particles. At GPU are super good for grid based hydro.</div><br/><div id="40807377" class="c"><input type="checkbox" id="c-40807377" checked=""/><div class="controls bullet"><span class="by">lukan</span><span>|</span><a href="#40801626">root</a><span>|</span><a href="#40803309">parent</a><span>|</span><a href="#40802660">next</a><span>|</span><label class="collapse" for="c-40807377">[-]</label><label class="expand" for="c-40807377">[1 more]</label></div><br/><div class="children"><div class="content">&quot;gpu are good to work on meshes, not really on pure particles&quot;<p>Why?<p>Having thousands of particles, all in need of doing the same operations on them in parallel screams GPU to me.
It is just way harder to program a GPU, vs a CPU.</div><br/></div></div></div></div></div></div></div></div><div id="40804130" class="c"><input type="checkbox" id="c-40804130" checked=""/><div class="controls bullet"><span class="by">sphars</span><span>|</span><a href="#40801626">prev</a><span>|</span><a href="#40801605">next</a><span>|</span><label class="collapse" for="c-40804130">[-]</label><label class="expand" for="c-40804130">[1 more]</label></div><br/><div class="children"><div class="content">FYI, in the Interaction settings you can enable accelerometer and use gyro. Lots of fun on mobile devices! Works well for me on Android&#x2F;Firefox</div><br/></div></div><div id="40801605" class="c"><input type="checkbox" id="c-40801605" checked=""/><div class="controls bullet"><span class="by">yayitswei</span><span>|</span><a href="#40804130">prev</a><span>|</span><a href="#40804899">next</a><span>|</span><label class="collapse" for="c-40801605">[-]</label><label class="expand" for="c-40801605">[2 more]</label></div><br/><div class="children"><div class="content">Super fun to resize the window and watch the liquid slosh into the new space.</div><br/><div id="40801766" class="c"><input type="checkbox" id="c-40801766" checked=""/><div class="controls bullet"><span class="by">ssl-3</span><span>|</span><a href="#40801605">parent</a><span>|</span><a href="#40804899">next</a><span>|</span><label class="collapse" for="c-40801766">[-]</label><label class="expand" for="c-40801766">[1 more]</label></div><br/><div class="children"><div class="content">Super fun on mobile to dig into the settings and turn on the accelerometer and gyro, and give the phone a twist and a shake.</div><br/></div></div></div></div><div id="40804899" class="c"><input type="checkbox" id="c-40804899" checked=""/><div class="controls bullet"><span class="by">vanderZwan</span><span>|</span><a href="#40801605">prev</a><span>|</span><a href="#40806020">next</a><span>|</span><label class="collapse" for="c-40804899">[-]</label><label class="expand" for="c-40804899">[3 more]</label></div><br/><div class="children"><div class="content">Wasn&#x27;t this shared a week&#x2F;few weeks ago? Not that I mind it being posted again, just that if it was already posted it might be worth linking the old thread, in case there was some interesting discussion there.</div><br/><div id="40805160" class="c"><input type="checkbox" id="c-40805160" checked=""/><div class="controls bullet"><span class="by">kotsoft</span><span>|</span><a href="#40804899">parent</a><span>|</span><a href="#40806020">next</a><span>|</span><label class="collapse" for="c-40805160">[-]</label><label class="expand" for="c-40805160">[2 more]</label></div><br/><div class="children"><div class="content">Yes, the previous one is: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=40429878">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=40429878</a>
There are some new features since then and some major speed improvements from using SIMD.
I do still see complaints about the compressibility so I still need to work on some improvements for that.
(dev)</div><br/><div id="40805185" class="c"><input type="checkbox" id="c-40805185" checked=""/><div class="controls bullet"><span class="by">vanderZwan</span><span>|</span><a href="#40804899">root</a><span>|</span><a href="#40805160">parent</a><span>|</span><a href="#40806020">next</a><span>|</span><label class="collapse" for="c-40805185">[-]</label><label class="expand" for="c-40805185">[1 more]</label></div><br/><div class="children"><div class="content">Thank you for digging up the link! And the bonus &quot;release notes&quot; ;)</div><br/></div></div></div></div></div></div><div id="40806020" class="c"><input type="checkbox" id="c-40806020" checked=""/><div class="controls bullet"><span class="by">fx18011</span><span>|</span><a href="#40804899">prev</a><span>|</span><a href="#40806927">next</a><span>|</span><label class="collapse" for="c-40806020">[-]</label><label class="expand" for="c-40806020">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;sandspiel.club" rel="nofollow">https:&#x2F;&#x2F;sandspiel.club</a> is also interesting</div><br/></div></div><div id="40806927" class="c"><input type="checkbox" id="c-40806927" checked=""/><div class="controls bullet"><span class="by">dctaflin</span><span>|</span><a href="#40806020">prev</a><span>|</span><a href="#40803835">next</a><span>|</span><label class="collapse" for="c-40806927">[-]</label><label class="expand" for="c-40806927">[1 more]</label></div><br/><div class="children"><div class="content">It also takes into account surface tension. Bubbles of denser&#x2F;lighter materials cling to the interfaces, rather than sinking or rising.</div><br/></div></div><div id="40803835" class="c"><input type="checkbox" id="c-40803835" checked=""/><div class="controls bullet"><span class="by">hermitcrab</span><span>|</span><a href="#40806927">prev</a><span>|</span><a href="#40801975">next</a><span>|</span><label class="collapse" for="c-40803835">[-]</label><label class="expand" for="c-40803835">[1 more]</label></div><br/><div class="children"><div class="content">This is really impressive. Especially the performance in a browser.</div><br/></div></div><div id="40803259" class="c"><input type="checkbox" id="c-40803259" checked=""/><div class="controls bullet"><span class="by">imzadi</span><span>|</span><a href="#40801975">prev</a><span>|</span><a href="#40802983">next</a><span>|</span><label class="collapse" for="c-40803259">[-]</label><label class="expand" for="c-40803259">[1 more]</label></div><br/><div class="children"><div class="content">This is interesting. I wish the other interactions were as dramatic as the drag one. You have to really crank up the brush size to see anything interesting.</div><br/></div></div><div id="40802983" class="c"><input type="checkbox" id="c-40802983" checked=""/><div class="controls bullet"><span class="by">sBqQu3U0wH</span><span>|</span><a href="#40803259">prev</a><span>|</span><a href="#40804272">next</a><span>|</span><label class="collapse" for="c-40802983">[-]</label><label class="expand" for="c-40802983">[4 more]</label></div><br/><div class="children"><div class="content">Cool, the performance is significantly better than the previous time. Or is it a different kind of simulation?</div><br/><div id="40804161" class="c"><input type="checkbox" id="c-40804161" checked=""/><div class="controls bullet"><span class="by">kotsoft</span><span>|</span><a href="#40802983">parent</a><span>|</span><a href="#40804272">next</a><span>|</span><label class="collapse" for="c-40804161">[-]</label><label class="expand" for="c-40804161">[3 more]</label></div><br/><div class="children"><div class="content">This is still the same kind of simulation, based on the Particle-based Viscoelastic Fluid Simulation paper. I updated it to use Wasm SIMD more fully with the help of Clang Vector Extensions, Compiler Explorer and Wasm Analyzer. Compiler explorer to play around with patterns and Wasm Analyzer to double check the final compilation.</div><br/><div id="40804870" class="c"><input type="checkbox" id="c-40804870" checked=""/><div class="controls bullet"><span class="by">eigenvalue</span><span>|</span><a href="#40802983">root</a><span>|</span><a href="#40804161">parent</a><span>|</span><a href="#40804272">next</a><span>|</span><label class="collapse" for="c-40804870">[-]</label><label class="expand" for="c-40804870">[2 more]</label></div><br/><div class="children"><div class="content">Really awesome work. The WASM lets you show this off to a massively larger audience than a regular binary. I&#x27;d encourage you to make your Voxel project also using WASM, then you can easily turn it into a mobile&#x2F;tablet game.</div><br/><div id="40805301" class="c"><input type="checkbox" id="c-40805301" checked=""/><div class="controls bullet"><span class="by">kotsoft</span><span>|</span><a href="#40802983">root</a><span>|</span><a href="#40804870">parent</a><span>|</span><a href="#40804272">next</a><span>|</span><label class="collapse" for="c-40805301">[-]</label><label class="expand" for="c-40805301">[1 more]</label></div><br/><div class="children"><div class="content">Thanks! I am definitely working on bringing more to the WASM world. I&#x27;d begun experimenting with 3D and multithreading and then last week decided to circle back to the 2d demo and polish it up a bit more.</div><br/></div></div></div></div></div></div></div></div><div id="40804272" class="c"><input type="checkbox" id="c-40804272" checked=""/><div class="controls bullet"><span class="by">d--b</span><span>|</span><a href="#40802983">prev</a><span>|</span><a href="#40802017">next</a><span>|</span><label class="collapse" for="c-40804272">[-]</label><label class="expand" for="c-40804272">[3 more]</label></div><br/><div class="children"><div class="content">I really wish these were 3D simulations. The 2D ones are always a bit off to me...</div><br/><div id="40805575" class="c"><input type="checkbox" id="c-40805575" checked=""/><div class="controls bullet"><span class="by">CaptainOfCoit</span><span>|</span><a href="#40804272">parent</a><span>|</span><a href="#40805938">next</a><span>|</span><label class="collapse" for="c-40805575">[-]</label><label class="expand" for="c-40805575">[1 more]</label></div><br/><div class="children"><div class="content">&quot;3D Liquid WIP Preview&quot; <a href="https:&#x2F;&#x2F;kotsoft.github.io&#x2F;pvfs3d&#x2F;" rel="nofollow">https:&#x2F;&#x2F;kotsoft.github.io&#x2F;pvfs3d&#x2F;</a><p>From the description of &quot;WebAssembly Liquid Simulator&quot; <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=phXwC6HxWEQ" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=phXwC6HxWEQ</a><p>Incredible stuff.</div><br/></div></div><div id="40805938" class="c"><input type="checkbox" id="c-40805938" checked=""/><div class="controls bullet"><span class="by">Voltage</span><span>|</span><a href="#40804272">parent</a><span>|</span><a href="#40805575">prev</a><span>|</span><a href="#40802017">next</a><span>|</span><label class="collapse" for="c-40805938">[-]</label><label class="expand" for="c-40805938">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;david.li&#x2F;fluid&#x2F;" rel="nofollow">https:&#x2F;&#x2F;david.li&#x2F;fluid&#x2F;</a></div><br/></div></div></div></div><div id="40802017" class="c"><input type="checkbox" id="c-40802017" checked=""/><div class="controls bullet"><span class="by">BugsJustFindMe</span><span>|</span><a href="#40804272">prev</a><span>|</span><a href="#40807051">next</a><span>|</span><label class="collapse" for="c-40802017">[-]</label><label class="expand" for="c-40802017">[2 more]</label></div><br/><div class="children"><div class="content">Are there compressible liquids? I&#x27;m seeing the whole thing bounce like the layers are compressing.</div><br/><div id="40802166" class="c"><input type="checkbox" id="c-40802166" checked=""/><div class="controls bullet"><span class="by">pornel</span><span>|</span><a href="#40802017">parent</a><span>|</span><a href="#40807051">next</a><span>|</span><label class="collapse" for="c-40802166">[-]</label><label class="expand" for="c-40802166">[1 more]</label></div><br/><div class="children"><div class="content">This is a common and difficult problem when simulating fluids using particles.<p>It&#x27;s possible to simulate using a grid instead, and that computes pressure very precisely, but it has a downside of adding inaccurate viscosity.<p>And there are tricks that combine both approaches to balance out the errors.</div><br/></div></div></div></div><div id="40807051" class="c"><input type="checkbox" id="c-40807051" checked=""/><div class="controls bullet"><span class="by">Anotheroneagain</span><span>|</span><a href="#40802017">prev</a><span>|</span><a href="#40804846">next</a><span>|</span><label class="collapse" for="c-40807051">[-]</label><label class="expand" for="c-40807051">[1 more]</label></div><br/><div class="children"><div class="content">When you set all materials to the same density, you get a cold surface, with hot matter below it.</div><br/></div></div><div id="40804846" class="c"><input type="checkbox" id="c-40804846" checked=""/><div class="controls bullet"><span class="by">miohtama</span><span>|</span><a href="#40807051">prev</a><span>|</span><a href="#40802846">next</a><span>|</span><label class="collapse" for="c-40804846">[-]</label><label class="expand" for="c-40804846">[1 more]</label></div><br/><div class="children"><div class="content">iPad accelerometer is 90 degrees off</div><br/></div></div><div id="40802846" class="c"><input type="checkbox" id="c-40802846" checked=""/><div class="controls bullet"><span class="by">amelius</span><span>|</span><a href="#40804846">prev</a><span>|</span><a href="#40804150">next</a><span>|</span><label class="collapse" for="c-40802846">[-]</label><label class="expand" for="c-40802846">[1 more]</label></div><br/><div class="children"><div class="content">Was hoping for accurate simulation of laminar flow.</div><br/></div></div><div id="40804150" class="c"><input type="checkbox" id="c-40804150" checked=""/><div class="controls bullet"><span class="by">shinze</span><span>|</span><a href="#40802846">prev</a><span>|</span><a href="#40803301">next</a><span>|</span><label class="collapse" for="c-40804150">[-]</label><label class="expand" for="c-40804150">[1 more]</label></div><br/><div class="children"><div class="content">Impressive</div><br/></div></div><div id="40803301" class="c"><input type="checkbox" id="c-40803301" checked=""/><div class="controls bullet"><span class="by">troglobite</span><span>|</span><a href="#40804150">prev</a><span>|</span><a href="#40802157">next</a><span>|</span><label class="collapse" for="c-40803301">[-]</label><label class="expand" for="c-40803301">[1 more]</label></div><br/><div class="children"><div class="content">Awesome!</div><br/></div></div><div id="40802157" class="c"><input type="checkbox" id="c-40802157" checked=""/><div class="controls bullet"><span class="by">whisk</span><span>|</span><a href="#40803301">prev</a><span>|</span><a href="#40805727">next</a><span>|</span><label class="collapse" for="c-40802157">[-]</label><label class="expand" for="c-40802157">[1 more]</label></div><br/><div class="children"><div class="content">Super fun!</div><br/></div></div><div id="40805700" class="c"><input type="checkbox" id="c-40805700" checked=""/><div class="controls bullet"><span class="by">owork138</span><span>|</span><a href="#40765787">prev</a><span>|</span><a href="#40801571">next</a><span>|</span><label class="collapse" for="c-40805700">[-]</label><label class="expand" for="c-40805700">[2 more]</label></div><br/><div class="children"><div class="content">I think the author is also working on an amazing voxel physics engine : <a href="https:&#x2F;&#x2F;libgenis.net" rel="nofollow">https:&#x2F;&#x2F;libgenis.net</a></div><br/><div id="40806355" class="c"><input type="checkbox" id="c-40806355" checked=""/><div class="controls bullet"><span class="by">ta435747</span><span>|</span><a href="#40805700">parent</a><span>|</span><a href="#40801571">next</a><span>|</span><label class="collapse" for="c-40806355">[-]</label><label class="expand" for="c-40806355">[1 more]</label></div><br/><div class="children"><div class="content">That link just goes to the libgenis home page (although cool site! will have a look around).<p>All I could find from the OP so far is: <a href="https:&#x2F;&#x2F;www.reddit.com&#x2F;r&#x2F;VoxelGameDev&#x2F;comments&#x2F;ecxiyw&#x2F;voxels_w_material_point_method_physics&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.reddit.com&#x2F;r&#x2F;VoxelGameDev&#x2F;comments&#x2F;ecxiyw&#x2F;voxels...</a> that has a few links to a YT demo and some papers referenced.</div><br/></div></div></div></div><div id="40801571" class="c"><input type="checkbox" id="c-40801571" checked=""/><div class="controls bullet"><span class="by">Nzen</span><span>|</span><a href="#40805700">prev</a><span>|</span><label class="collapse" for="c-40801571">[-]</label><label class="expand" for="c-40801571">[3 more]</label></div><br/><div class="children"><div class="content">tl;dr this is a liquid simulation toy. This starts with four colors of different densities (so they self-organize into layers). Clicking allows scooping up a ball of the liquid. I consider this pretty to watch, like a laval lamp that I can also throw globs of.</div><br/><div id="40804157" class="c"><input type="checkbox" id="c-40804157" checked=""/><div class="controls bullet"><span class="by">TeMPOraL</span><span>|</span><a href="#40801571">parent</a><span>|</span><label class="collapse" for="c-40804157">[-]</label><label class="expand" for="c-40804157">[2 more]</label></div><br/><div class="children"><div class="content">You also have a settings UI, where you can change (among many other things) what clicking does. I find it most interesting to switch to &quot;repel&quot; - the repulsion forcefield turns to be an universal tool for mixing and separating the different liquids, depending on how fast and precisely you operate it. Fascinating.</div><br/><div id="40804200" class="c"><input type="checkbox" id="c-40804200" checked=""/><div class="controls bullet"><span class="by">kotsoft</span><span>|</span><a href="#40801571">root</a><span>|</span><a href="#40804157">parent</a><span>|</span><label class="collapse" for="c-40804200">[-]</label><label class="expand" for="c-40804200">[1 more]</label></div><br/><div class="children"><div class="content">With keyboard there are also the shortcuts:
1-4 to emit the different materials
a&#x2F;r to attract repel from mouse
x&#x2F;c to rotate a bit</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>