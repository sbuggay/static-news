<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1732698075277" as="style"/><link rel="stylesheet" href="styles.css?v=1732698075277"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/thamugadi/jazelle-wii">Executing ARM Jazelle (JVM Bytecode) on the Wii&#x27;s Starlet</a>Â <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>jamesy0ung</span> | <span>9 comments</span></div><br/><div><div id="42252648" class="c"><input type="checkbox" id="c-42252648" checked=""/><div class="controls bullet"><span class="by">carom</span><span>|</span><a href="#42252045">next</a><span>|</span><label class="collapse" for="c-42252648">[-]</label><label class="expand" for="c-42252648">[1 more]</label></div><br/><div class="children"><div class="content">Awesome. I did something similar on the old Raspberry Pi Zeros which had the right chip for it. It was a Linux kernel module with with a bit implemented in ARM assembly. All it executed was an add, I always meant to go back and reverse more functionality of the instruction set.<p><pre><code>    .byte 0x05 @ iconst_2
    .byte 0x06 @ iconst_3
    .byte 0x60 @ iadd
    .byte 0xAC @ ireturn</code></pre></div><br/></div></div><div id="42252045" class="c"><input type="checkbox" id="c-42252045" checked=""/><div class="controls bullet"><span class="by">dmitrygr</span><span>|</span><a href="#42252648">prev</a><span>|</span><a href="#42252681">next</a><span>|</span><label class="collapse" for="c-42252045">[-]</label><label class="expand" for="c-42252045">[6 more]</label></div><br/><div class="children"><div class="content">Back in the mid 2000s I tried to reverse engineer some of it. Got to executing a few instructions. Found that ARMv5TEJ cores did not natively execute very many Java instructions. It was sad. I had say hoped that later cores got better.<p>I never understood why ARM hid jazzelle docs away. It made no sense. It is probably why Jazzelle died.</div><br/><div id="42252829" class="c"><input type="checkbox" id="c-42252829" checked=""/><div class="controls bullet"><span class="by">cyberax</span><span>|</span><a href="#42252045">parent</a><span>|</span><a href="#42253563">next</a><span>|</span><label class="collapse" for="c-42252829">[-]</label><label class="expand" for="c-42252829">[1 more]</label></div><br/><div class="children"><div class="content">ARM wanted to deprecate Jazzelle as fast as possible. Even during its development, it became clear that Java bytecode is never going to be quick, and that it&#x27;s better to just JIT&#x2F;AOT it.</div><br/></div></div><div id="42253563" class="c"><input type="checkbox" id="c-42253563" checked=""/><div class="controls bullet"><span class="by">TNorthover</span><span>|</span><a href="#42252045">parent</a><span>|</span><a href="#42252829">prev</a><span>|</span><a href="#42252423">next</a><span>|</span><label class="collapse" for="c-42253563">[-]</label><label class="expand" for="c-42253563">[1 more]</label></div><br/><div class="children"><div class="content">I was working there at the time and even internally Jazelle documentation was hidden. Very odd for what it is.</div><br/></div></div><div id="42252423" class="c"><input type="checkbox" id="c-42252423" checked=""/><div class="controls bullet"><span class="by">wyager</span><span>|</span><a href="#42252045">parent</a><span>|</span><a href="#42253563">prev</a><span>|</span><a href="#42252681">next</a><span>|</span><label class="collapse" for="c-42252423">[-]</label><label class="expand" for="c-42252423">[3 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a bit of a bizarre design; the JVM&#x27;s execution model is not sufficiently different from any standard procedural execution semantics to justify special hardware support. It makes more sense to use a normal JIT&#x2F;AOT compiler that&#x27;s modular over the target ISA.<p>There&#x27;s that one ARM instruction specifically for JavaScript float-to-i32 casts, but at least that&#x27;s relatively narrowly scoped.</div><br/><div id="42253636" class="c"><input type="checkbox" id="c-42253636" checked=""/><div class="controls bullet"><span class="by">kmeisthax</span><span>|</span><a href="#42252045">root</a><span>|</span><a href="#42252423">parent</a><span>|</span><a href="#42252642">next</a><span>|</span><label class="collapse" for="c-42253636">[-]</label><label class="expand" for="c-42253636">[1 more]</label></div><br/><div class="children"><div class="content">&gt;JavaScript float-to-i32 casts<p>To be clear, the behavior in question is <i>Intel</i> behavior that snuck its way into the JavaScript spec; ARM just doesn&#x27;t wanna use the word &quot;Intel&quot; in public documentation. For similar reasons there&#x27;s a few other places where there&#x27;s an &quot;alternate&quot; execution mode that exists solely to emulate x86.</div><br/></div></div><div id="42252642" class="c"><input type="checkbox" id="c-42252642" checked=""/><div class="controls bullet"><span class="by">elchananHaas</span><span>|</span><a href="#42252045">root</a><span>|</span><a href="#42252423">parent</a><span>|</span><a href="#42253636">prev</a><span>|</span><a href="#42252681">next</a><span>|</span><label class="collapse" for="c-42252642">[-]</label><label class="expand" for="c-42252642">[1 more]</label></div><br/><div class="children"><div class="content">There was a narrow window where CPUs were big enough to have circuitry for JVM fast bytecode execution, but too small for strong JIT compilation. ARM deprecated Jazelle as soon as that window passed.</div><br/></div></div></div></div></div></div><div id="42252681" class="c"><input type="checkbox" id="c-42252681" checked=""/><div class="controls bullet"><span class="by">SuperNinKenDo</span><span>|</span><a href="#42252045">prev</a><span>|</span><label class="collapse" for="c-42252681">[-]</label><label class="expand" for="c-42252681">[1 more]</label></div><br/><div class="children"><div class="content">Funny, I pulled up HN while I go through modding a Wii I got from hard rubbish.</div><br/></div></div></div></div></div></div></div></body></html>