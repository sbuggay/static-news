<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1691485263556" as="style"/><link rel="stylesheet" href="styles.css?v=1691485263556"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.npmjs.com/package/doculite">Show HN: Doculite – Use SQLite as a Document Database</a> <span class="domain">(<a href="https://www.npmjs.com">www.npmjs.com</a>)</span></div><div class="subtext"><span>thenorthbay</span> | <span>38 comments</span></div><br/><div><div id="37043340" class="c"><input type="checkbox" id="c-37043340" checked=""/><div class="controls bullet"><span class="by">theogravity</span><span>|</span><a href="#37041362">next</a><span>|</span><label class="collapse" for="c-37043340">[-]</label><label class="expand" for="c-37043340">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;m the core maintainer of the npm sqlite package that your library uses. I recommend that you don&#x27;t make it a direct dependency, but use dependency injection or an adapter pattern that way your library isn&#x27;t dependent on a specific package version of sqlite&#x2F;sqlite3 (the npm sqlite package API is pretty static at this point though!).<p>The npm sqlite package used to have sqlite3 as a direct dependency in older major versions and most of the support issues were against sqlite3 instead of sqlite. Taking that dependency out and having the user inject it into sqlite instead removed 99% of the support issues. It&#x27;s also really nice that sqlite has no dependencies at all.<p>If you go the adapter pattern route, you can support other sqlite libraries like better-sqlite3. Sometimes sqlite&#x2F;sqlite3 doesn&#x27;t fit a user&#x27;s use-case and alternative libraries do.<p>Same deal with the pub&#x2F;sub mechanism. You have the Typescript types defined to create abstractions. Would be nice to see adapters for Redis streams &#x2F; kafka &#x2F; etc, as in-memory pub&#x2F;sub may not cut it after a certain point.<p>Great start on your library!</div><br/><div id="37045059" class="c"><input type="checkbox" id="c-37045059" checked=""/><div class="controls bullet"><span class="by">skinkestek</span><span>|</span><a href="#37043340">parent</a><span>|</span><a href="#37041362">next</a><span>|</span><label class="collapse" for="c-37045059">[-]</label><label class="expand" for="c-37045059">[2 more]</label></div><br/><div class="children"><div class="content">&gt; I recommend that you don&#x27;t make it a direct dependency, but use dependency injection or an adapter pattern that way your library isn&#x27;t dependent on a specific package version of sqlite&#x2F;sqlite3<p>Do you have examples of what you mean?<p>Do you just mean in the code or is this something about how it is imported as a dependency in package.json?</div><br/><div id="37045519" class="c"><input type="checkbox" id="c-37045519" checked=""/><div class="controls bullet"><span class="by">theogravity</span><span>|</span><a href="#37043340">root</a><span>|</span><a href="#37045059">parent</a><span>|</span><a href="#37041362">next</a><span>|</span><label class="collapse" for="c-37045519">[-]</label><label class="expand" for="c-37045519">[1 more]</label></div><br/><div class="children"><div class="content">They would have to install sqlite and sqlite3 separately and feed the sqlite instance to your library when creating a new instance of your library. It would no longer be a dependency in package.json (maybe a devDependency when you write unit tests using it). Look at how the npm sqlite source code does it as an example.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;kriasoft&#x2F;node-sqlite">https:&#x2F;&#x2F;github.com&#x2F;kriasoft&#x2F;node-sqlite</a><p>In the src&#x2F;index.ts file, the `open()` function takes in an instance of sqlite3, vs the file importing it from the sqlite3 package itself.<p>An adapter &#x2F; driver pattern would extend this where you can interchange usage of either the sqlite package or an alternative.<p>For example, let&#x27;s say you have two SQLite drivers. They both allow you to execute a statement, but their methods and maybe parameters are named differently. One might expose a `exec()`, while the other exposes `run()` to do the same thing.<p>Your codebase probably is coded for one or the other, which means you can&#x27;t freely interchange the drivers.<p>So what you do to support this is create a an interface with methods that describe what you want to do. In the above case, you might describe a method called `executeStatement()`.<p>Then you create two classes, one for each driver. They both implement `executeStatement()`, but under the hood, they&#x27;ll run `exec()` and `run()` in their implementations.<p>So your main code now will accept an instance of anything that implements your interface, and instead of calling like `exec()`, you&#x27;ll be calling `executeStatement()`, which under the hood calls `exec()`.<p>So it goes like this:<p>- Define common interface for interacting with different database libraries (the abstraction)<p>- Implementation class using that interface (the drivers)<p>- Your constructor takes in anything that conforms to that interface<p>- The user creates an instance of your implementation (eg SqliteDriver) and feeds in the instance of the driver (eg `new SqliteDriver(&lt;output of npm sqlite open()&gt;)`<p>- Your code calls the interface methods in place of the actual database calls instead<p>You had something like:<p><pre><code>  db.collection(&#x27;users&#x27;).set(..)
</code></pre>
So rather than calling SQLite `run()`, it&#x27;d be calling your interface method `executeStatment()` (which calls `run()`) instead in that `set()` call.<p>It looks like the &quot;Bridge&quot; pattern is what you want here:<p><a href="https:&#x2F;&#x2F;www.phind.com&#x2F;agent?cache=cll1zw1n60010la08mn89dd8g">https:&#x2F;&#x2F;www.phind.com&#x2F;agent?cache=cll1zw1n60010la08mn89dd8g</a><p>The generated code is Java, but the idea and concept is the exact same that I&#x27;ve described above.</div><br/></div></div></div></div></div></div><div id="37041362" class="c"><input type="checkbox" id="c-37041362" checked=""/><div class="controls bullet"><span class="by">bastawhiz</span><span>|</span><a href="#37043340">prev</a><span>|</span><a href="#37045800">next</a><span>|</span><label class="collapse" for="c-37041362">[-]</label><label class="expand" for="c-37041362">[10 more]</label></div><br/><div class="children"><div class="content">The one feature that I&#x27;d want out of this is atomic writes. If I have a document and want to increment the value of a field in it by one, I&#x27;m not sure that&#x27;s possible with Doculite today: if two requests read the same document at the same time and both write an incremented value, the value is incremented by one, not two.<p>The way _I_ would expect to do this is something like this:<p><pre><code>  const ref = db.collection(&#x27;page&#x27;).doc(&#x27;foo&#x27;);
  do {
    const current = await ref.get();
    try {
      await ref.set({ likes: current.likes + 1 }, { when: { likes: current.likes } });
    } catch {
      continue;
    }
  } while (false);
</code></pre>
If `set()` attempts to write to the ref when the conditions in `when` are not matched exactly, the write should fail and you should have to try the operation again. In this example, the `set()` call increments the like value by one, but specifies that the write is only valid if `likes` is equal to the value that the client read. In the scenario I provided, one of the two concurrent requests would fail and retry the write (and succeed on the second go).</div><br/><div id="37041651" class="c"><input type="checkbox" id="c-37041651" checked=""/><div class="controls bullet"><span class="by">thenorthbay</span><span>|</span><a href="#37041362">parent</a><span>|</span><a href="#37042836">next</a><span>|</span><label class="collapse" for="c-37041651">[-]</label><label class="expand" for="c-37041651">[6 more]</label></div><br/><div class="children"><div class="content">Interesting. Updating values via incrementing them is a use case I barely had in Firebase. I mostly only dealt with 1-time updates to values, e.g. by the user or scheduled jobs. In which scenario would the current design cause you problems?</div><br/><div id="37042438" class="c"><input type="checkbox" id="c-37042438" checked=""/><div class="controls bullet"><span class="by">bastawhiz</span><span>|</span><a href="#37041362">root</a><span>|</span><a href="#37041651">parent</a><span>|</span><a href="#37042170">next</a><span>|</span><label class="collapse" for="c-37042438">[-]</label><label class="expand" for="c-37042438">[3 more]</label></div><br/><div class="children"><div class="content">Incrementing is only one possible use case. Any time you read data and then write back based on that data, you need to ensure that nobody wrote to the document in the interim. RDBMS do this with transactions.<p>Consider the case where a user is submitting an e-commerce order. You want to mark their order as processed and submit it for fulfillment. If you read the order to check if it&#x27;s already submitted, two requests to submit it made at almost the same time (e.g., hitting the button twice) will both read that it&#x27;s unfulfilled and try to each submit it.<p>By doing an atomic write you can be sure that at most one request submits the order.</div><br/><div id="37044105" class="c"><input type="checkbox" id="c-37044105" checked=""/><div class="controls bullet"><span class="by">gerad</span><span>|</span><a href="#37041362">root</a><span>|</span><a href="#37042438">parent</a><span>|</span><a href="#37042768">next</a><span>|</span><label class="collapse" for="c-37044105">[-]</label><label class="expand" for="c-37044105">[1 more]</label></div><br/><div class="children"><div class="content">It’s possible to use optimistic locking and versioning to ensure that things haven’t changed underneath you unexpectedly.</div><br/></div></div><div id="37042768" class="c"><input type="checkbox" id="c-37042768" checked=""/><div class="controls bullet"><span class="by">thenorthbay</span><span>|</span><a href="#37041362">root</a><span>|</span><a href="#37042438">parent</a><span>|</span><a href="#37044105">prev</a><span>|</span><a href="#37042170">next</a><span>|</span><label class="collapse" for="c-37042768">[-]</label><label class="expand" for="c-37042768">[1 more]</label></div><br/><div class="children"><div class="content">Thank you for the feedback. Seems this is important.</div><br/></div></div></div></div><div id="37042170" class="c"><input type="checkbox" id="c-37042170" checked=""/><div class="controls bullet"><span class="by">winrid</span><span>|</span><a href="#37041362">root</a><span>|</span><a href="#37041651">parent</a><span>|</span><a href="#37042438">prev</a><span>|</span><a href="#37042836">next</a><span>|</span><label class="collapse" for="c-37042170">[-]</label><label class="expand" for="c-37042170">[2 more]</label></div><br/><div class="children"><div class="content">Honestly, it&#x27;s weird that you never ran into this. This is a requirement for any data store and I&#x27;ve never <i>not</i> used atomic updates at any company. Most basic example: what if two users load the same object at the same time and you want to increment a &quot;seen&quot; count...?</div><br/><div id="37042435" class="c"><input type="checkbox" id="c-37042435" checked=""/><div class="controls bullet"><span class="by">thenorthbay</span><span>|</span><a href="#37041362">root</a><span>|</span><a href="#37042170">parent</a><span>|</span><a href="#37042836">next</a><span>|</span><label class="collapse" for="c-37042435">[-]</label><label class="expand" for="c-37042435">[1 more]</label></div><br/><div class="children"><div class="content">I guess it was sufficient to not have that kind of accuracy in most of the application to deliver user value. There probably were parts of the application where we used transactions.
Could be a cool feature to build for this, though.</div><br/></div></div></div></div></div></div><div id="37042836" class="c"><input type="checkbox" id="c-37042836" checked=""/><div class="controls bullet"><span class="by">schemescape</span><span>|</span><a href="#37041362">parent</a><span>|</span><a href="#37041651">prev</a><span>|</span><a href="#37041508">next</a><span>|</span><label class="collapse" for="c-37042836">[-]</label><label class="expand" for="c-37042836">[1 more]</label></div><br/><div class="children"><div class="content">What about FieldValue.increment()?<p><a href="https:&#x2F;&#x2F;cloud.google.com&#x2F;firestore&#x2F;docs&#x2F;samples&#x2F;firestore-data-set-numeric-increment" rel="nofollow noreferrer">https:&#x2F;&#x2F;cloud.google.com&#x2F;firestore&#x2F;docs&#x2F;samples&#x2F;firestore-da...</a></div><br/></div></div><div id="37041508" class="c"><input type="checkbox" id="c-37041508" checked=""/><div class="controls bullet"><span class="by">DANmode</span><span>|</span><a href="#37041362">parent</a><span>|</span><a href="#37042836">prev</a><span>|</span><a href="#37045800">next</a><span>|</span><label class="collapse" for="c-37041508">[-]</label><label class="expand" for="c-37041508">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;d like to enable the same in my startup.<p>What are you using for this today?</div><br/><div id="37042345" class="c"><input type="checkbox" id="c-37042345" checked=""/><div class="controls bullet"><span class="by">bastawhiz</span><span>|</span><a href="#37041362">root</a><span>|</span><a href="#37041508">parent</a><span>|</span><a href="#37045800">next</a><span>|</span><label class="collapse" for="c-37042345">[-]</label><label class="expand" for="c-37042345">[1 more]</label></div><br/><div class="children"><div class="content">If you&#x27;re using something like MySQL or Postgres, you can do locking with the built in transaction primitives (see, for instance, SELECT FOR UPDATE). Mongo has tools like findAndModify which can help.<p>If you&#x27;re using SQLite you can use exclusive transactions to perform the read+write but I&#x27;m sure there&#x27;s probably a more efficient way to go about it. You can craft an UPDATE that selects on the primary key and the condition and then use sqlite3_changes() to get back the number of records modified (and fail if it&#x27;s zero), but that may not be possible with your setup.</div><br/></div></div></div></div></div></div><div id="37045800" class="c"><input type="checkbox" id="c-37045800" checked=""/><div class="controls bullet"><span class="by">jinjin2</span><span>|</span><a href="#37041362">prev</a><span>|</span><a href="#37042383">next</a><span>|</span><label class="collapse" for="c-37045800">[-]</label><label class="expand" for="c-37045800">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Alternative, proven Document Databases only offered client&#x2F;server support.<p>We currently use Realm for this use case. It’s a local database just like SQLite, but with native support for documents and listeners. Did you try that out?</div><br/></div></div><div id="37042383" class="c"><input type="checkbox" id="c-37042383" checked=""/><div class="controls bullet"><span class="by">zdragnar</span><span>|</span><a href="#37045800">prev</a><span>|</span><a href="#37041432">next</a><span>|</span><label class="collapse" for="c-37042383">[-]</label><label class="expand" for="c-37042383">[7 more]</label></div><br/><div class="children"><div class="content">Why do you have async reads and writes? There&#x27;s no client-server setup here, using async &#x2F; await just introduces pointless waiting.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;WiseLibs&#x2F;better-sqlite3">https:&#x2F;&#x2F;github.com&#x2F;WiseLibs&#x2F;better-sqlite3</a></div><br/><div id="37042481" class="c"><input type="checkbox" id="c-37042481" checked=""/><div class="controls bullet"><span class="by">thenorthbay</span><span>|</span><a href="#37042383">parent</a><span>|</span><a href="#37042866">next</a><span>|</span><label class="collapse" for="c-37042481">[-]</label><label class="expand" for="c-37042481">[5 more]</label></div><br/><div class="children"><div class="content">If you use the library on a server in a node.js environment, wouldn&#x27;t it be useful to fetch data (e.g. Remix &#x2F; NextJS)?
Besides, I&#x27;m not sure if better-sqlite3 offers the listener functionalities I care about. Skimming the docs, it seems it doesn&#x27;t.</div><br/><div id="37042821" class="c"><input type="checkbox" id="c-37042821" checked=""/><div class="controls bullet"><span class="by">zdragnar</span><span>|</span><a href="#37042383">root</a><span>|</span><a href="#37042481">parent</a><span>|</span><a href="#37042819">next</a><span>|</span><label class="collapse" for="c-37042821">[-]</label><label class="expand" for="c-37042821">[2 more]</label></div><br/><div class="children"><div class="content">Listener functionality could be something you&#x27;d have to write yourself, I suppose.<p>As for on the server, no. Sqlite is a c library, not a separate application- the work happens inside the node process. Regardless of how you do it, any call into sqlite is going to block. Adding promises or callbacks on top of that is just wasting CPU cycles, unlike reading from the filesystem or making a network request, where the work is offloaded to a process outside of node (and hence why it makes sense to let node do other things instead of waiting).<p>In fact, if you synchronously read and write within a single function with no awaits or timeouts in-between, you don&#x27;t have to worry about atomicity- no other request is being handled in the meantime.</div><br/></div></div><div id="37042819" class="c"><input type="checkbox" id="c-37042819" checked=""/><div class="controls bullet"><span class="by">jitl</span><span>|</span><a href="#37042383">root</a><span>|</span><a href="#37042481">parent</a><span>|</span><a href="#37042821">prev</a><span>|</span><a href="#37042866">next</a><span>|</span><label class="collapse" for="c-37042819">[-]</label><label class="expand" for="c-37042819">[2 more]</label></div><br/><div class="children"><div class="content">better-sqlite3 is orders of magnitude faster than the async SQLite bindings. We found this to be true when testing SQLite options for Notion&#x27;s desktop app anyways. The &quot;why should I use this&quot; bits sound boastful but are reasonable.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;WiseLibs&#x2F;better-sqlite3#why-should-i-use-this-instead-of-node-sqlite3">https:&#x2F;&#x2F;github.com&#x2F;WiseLibs&#x2F;better-sqlite3#why-should-i-use-...</a></div><br/></div></div></div></div><div id="37042866" class="c"><input type="checkbox" id="c-37042866" checked=""/><div class="controls bullet"><span class="by">schemescape</span><span>|</span><a href="#37042383">parent</a><span>|</span><a href="#37042481">prev</a><span>|</span><a href="#37041432">next</a><span>|</span><label class="collapse" for="c-37042866">[-]</label><label class="expand" for="c-37042866">[1 more]</label></div><br/><div class="children"><div class="content">I assumed they were implementing the Firestore API (which I’m fairly certain is async).</div><br/></div></div></div></div><div id="37041432" class="c"><input type="checkbox" id="c-37041432" checked=""/><div class="controls bullet"><span class="by">tracker1</span><span>|</span><a href="#37042383">prev</a><span>|</span><a href="#37042701">next</a><span>|</span><label class="collapse" for="c-37041432">[-]</label><label class="expand" for="c-37041432">[5 more]</label></div><br/><div class="children"><div class="content">Kind of nifty...  Just curious if this is using the JSON functions&#x2F;operators for SQLite under the covers?<p><a href="https:&#x2F;&#x2F;www.sqlite.org&#x2F;json1.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.sqlite.org&#x2F;json1.html</a><p>Edit: where is the database file stored?   A parameter for the Database() constructor seems obvious, but not seeing it in the basic sample.</div><br/><div id="37041482" class="c"><input type="checkbox" id="c-37041482" checked=""/><div class="controls bullet"><span class="by">thenorthbay</span><span>|</span><a href="#37041432">parent</a><span>|</span><a href="#37042701">next</a><span>|</span><label class="collapse" for="c-37041482">[-]</label><label class="expand" for="c-37041482">[4 more]</label></div><br/><div class="children"><div class="content">Yes – I&#x27;m using JSON_extract and generated virtual columns <a href="https:&#x2F;&#x2F;www.sqlite.org&#x2F;json1.html#jex" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.sqlite.org&#x2F;json1.html#jex</a>
Edit: the database is stored in a sqlite.db file in the cwd</div><br/><div id="37041661" class="c"><input type="checkbox" id="c-37041661" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#37041432">root</a><span>|</span><a href="#37041482">parent</a><span>|</span><a href="#37042701">next</a><span>|</span><label class="collapse" for="c-37041661">[-]</label><label class="expand" for="c-37041661">[3 more]</label></div><br/><div class="children"><div class="content">Found where you&#x27;re using those: <a href="https:&#x2F;&#x2F;github.com&#x2F;thenorthbay&#x2F;doculite&#x2F;blob&#x2F;c05d98c209d003161ab00fbbdb6016d7f5b26f7c&#x2F;src&#x2F;database.ts#L184-L209">https:&#x2F;&#x2F;github.com&#x2F;thenorthbay&#x2F;doculite&#x2F;blob&#x2F;c05d98c209d0031...</a><p>It looks like your tables have a single value column and a id generated column that extracts $.id from that value:<p><pre><code>      CREATE TABLE IF NOT EXISTS ${collection} (
            value TEXT,
            id TEXT GENERATED ALWAYS AS (json_extract(value, &quot;$.id&quot;)) VIRTUAL NOT NULL
      )
</code></pre>
GENERATED ALWAYS AS was added in a relatively recent SQLite version - 2020-01-22 (3.31.0) - do you have a feel for how likely it is for Node.js users to be stuck on an older version? I&#x27;ve had a lot of concern about Python users who are on a stale SQLite for my own projects.</div><br/><div id="37042852" class="c"><input type="checkbox" id="c-37042852" checked=""/><div class="controls bullet"><span class="by">jitl</span><span>|</span><a href="#37041432">root</a><span>|</span><a href="#37041661">parent</a><span>|</span><a href="#37042564">next</a><span>|</span><label class="collapse" for="c-37042852">[-]</label><label class="expand" for="c-37042852">[1 more]</label></div><br/><div class="children"><div class="content">Often sqlite libraries just bundle SQLite instead of relying on the system one, better-sqlite3 does that just fine and has provisions for building against a custom SQLite version if you really need it.</div><br/></div></div><div id="37042564" class="c"><input type="checkbox" id="c-37042564" checked=""/><div class="controls bullet"><span class="by">thenorthbay</span><span>|</span><a href="#37041432">root</a><span>|</span><a href="#37041661">parent</a><span>|</span><a href="#37042852">prev</a><span>|</span><a href="#37042701">next</a><span>|</span><label class="collapse" for="c-37042564">[-]</label><label class="expand" for="c-37042564">[1 more]</label></div><br/><div class="children"><div class="content">Yup! I actually don&#x27;t know about that. I figured this would be used for setting up newer, server-side Remix or Next projects rather than more dated ones. I could imagine that by keeping sqlite and sqlite3 up to date, people might also not be stuck on more dated versions of SQLite. The tracing&#x2F;profiling functions were also only implemented recently in sqlite3 (node to C interface), in 2023.</div><br/></div></div></div></div></div></div></div></div><div id="37042701" class="c"><input type="checkbox" id="c-37042701" checked=""/><div class="controls bullet"><span class="by">plaguuuuuu</span><span>|</span><a href="#37041432">prev</a><span>|</span><a href="#37042700">next</a><span>|</span><label class="collapse" for="c-37042701">[-]</label><label class="expand" for="c-37042701">[3 more]</label></div><br/><div class="children"><div class="content">This is cool. There are a tonne of options for local KV stores that likely outperform this by a large margin, but the obvious benefit here is that SQLite is really simple to configure and operate!</div><br/><div id="37043071" class="c"><input type="checkbox" id="c-37043071" checked=""/><div class="controls bullet"><span class="by">kstrauser</span><span>|</span><a href="#37042701">parent</a><span>|</span><a href="#37043041">next</a><span>|</span><label class="collapse" for="c-37043071">[-]</label><label class="expand" for="c-37043071">[1 more]</label></div><br/><div class="children"><div class="content">I wouldn’t count on it. SQLite is unreasonably fast in ways you’d think it shouldn’t be.</div><br/></div></div><div id="37043041" class="c"><input type="checkbox" id="c-37043041" checked=""/><div class="controls bullet"><span class="by">thenorthbay</span><span>|</span><a href="#37042701">parent</a><span>|</span><a href="#37043071">prev</a><span>|</span><a href="#37042700">next</a><span>|</span><label class="collapse" for="c-37043041">[-]</label><label class="expand" for="c-37043041">[1 more]</label></div><br/><div class="children"><div class="content">Thank you!</div><br/></div></div></div></div><div id="37042700" class="c"><input type="checkbox" id="c-37042700" checked=""/><div class="controls bullet"><span class="by">thenorthbay</span><span>|</span><a href="#37042701">prev</a><span>|</span><a href="#37041499">next</a><span>|</span><label class="collapse" for="c-37042700">[-]</label><label class="expand" for="c-37042700">[1 more]</label></div><br/><div class="children"><div class="content">Here&#x27;s the source: <a href="https:&#x2F;&#x2F;github.com&#x2F;thenorthbay&#x2F;doculite">https:&#x2F;&#x2F;github.com&#x2F;thenorthbay&#x2F;doculite</a></div><br/></div></div><div id="37041499" class="c"><input type="checkbox" id="c-37041499" checked=""/><div class="controls bullet"><span class="by">cyanydeez</span><span>|</span><a href="#37042700">prev</a><span>|</span><a href="#37042117">next</a><span>|</span><label class="collapse" for="c-37041499">[-]</label><label class="expand" for="c-37041499">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;d see if you can easily port the on top of browser based sqlite in wasm, that&#x27;s expand your user base and lead to some of the &quot;holy Grail&quot; in the offline first&#x2F;sync systems</div><br/><div id="37042179" class="c"><input type="checkbox" id="c-37042179" checked=""/><div class="controls bullet"><span class="by">__jonas</span><span>|</span><a href="#37041499">parent</a><span>|</span><a href="#37042117">next</a><span>|</span><label class="collapse" for="c-37042179">[-]</label><label class="expand" for="c-37042179">[2 more]</label></div><br/><div class="children"><div class="content">Why not just use IndexedDB in the browser if you don’t want an SQL database?</div><br/><div id="37042860" class="c"><input type="checkbox" id="c-37042860" checked=""/><div class="controls bullet"><span class="by">jitl</span><span>|</span><a href="#37041499">root</a><span>|</span><a href="#37042179">parent</a><span>|</span><a href="#37042117">next</a><span>|</span><label class="collapse" for="c-37042860">[-]</label><label class="expand" for="c-37042860">[1 more]</label></div><br/><div class="children"><div class="content">a) IndexedDB&#x27;s API is horrid, so everyone wants to layer an abstraction on top anyways.<p>b) You can&#x27;t use IndexedDB on the server, so you wouldn&#x27;t be able to write sync code that runs on both the client and the server</div><br/></div></div></div></div></div></div><div id="37042117" class="c"><input type="checkbox" id="c-37042117" checked=""/><div class="controls bullet"><span class="by">actionfromafar</span><span>|</span><a href="#37041499">prev</a><span>|</span><a href="#37042784">next</a><span>|</span><label class="collapse" for="c-37042117">[-]</label><label class="expand" for="c-37042117">[1 more]</label></div><br/><div class="children"><div class="content">I read point 1 as <i>against</i> using SQLite at first. :-D</div><br/></div></div><div id="37042784" class="c"><input type="checkbox" id="c-37042784" checked=""/><div class="controls bullet"><span class="by">mixmastamyk</span><span>|</span><a href="#37042117">prev</a><span>|</span><a href="#37040405">next</a><span>|</span><label class="collapse" for="c-37042784">[-]</label><label class="expand" for="c-37042784">[2 more]</label></div><br/><div class="children"><div class="content">Does this mean documents in a database, or a database as a document?<p>I&#x27;ve tried the second, but the time comes when you need to (re)order items which gets clumsy.</div><br/><div id="37043034" class="c"><input type="checkbox" id="c-37043034" checked=""/><div class="controls bullet"><span class="by">thenorthbay</span><span>|</span><a href="#37042784">parent</a><span>|</span><a href="#37040405">next</a><span>|</span><label class="collapse" for="c-37043034">[-]</label><label class="expand" for="c-37043034">[1 more]</label></div><br/><div class="children"><div class="content">If I understood you correctly, Documents in a database, and database as a file. If else please let me know.</div><br/></div></div></div></div></div></div></div></div></div></body></html>