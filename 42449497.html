<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1734771666194" as="style"/><link rel="stylesheet" href="styles.css?v=1734771666194"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/boardgameio/boardgame.io">Boardgame.io: an engine for creating turn-based games using JavaScript</a>Â <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>freetonik</span> | <span>63 comments</span></div><br/><div><div id="42471003" class="c"><input type="checkbox" id="c-42471003" checked=""/><div class="controls bullet"><span class="by">nicolodavis</span><span>|</span><a href="#42471288">next</a><span>|</span><label class="collapse" for="c-42471003">[-]</label><label class="expand" for="c-42471003">[17 more]</label></div><br/><div class="children"><div class="content">Original creator of boardgame.io here. A pleasant surprise to see this here after many years.<p>More recently, I&#x27;ve been working on <a href="https:&#x2F;&#x2F;boardgamelab.app&#x2F;" rel="nofollow">https:&#x2F;&#x2F;boardgamelab.app&#x2F;</a>, which uses a visual programming language to model game rules while also taking care of the UI layer.</div><br/><div id="42472950" class="c"><input type="checkbox" id="c-42472950" checked=""/><div class="controls bullet"><span class="by">mankyd</span><span>|</span><a href="#42471003">parent</a><span>|</span><a href="#42471102">next</a><span>|</span><label class="collapse" for="c-42472950">[-]</label><label class="expand" for="c-42472950">[3 more]</label></div><br/><div class="children"><div class="content">I feel like saying that is supports AI players, but not having a simple, already hosted example is a disservice. Even tic tac toe, or go fish would be a nice hook to help people understand what it actually delivers.</div><br/><div id="42476086" class="c"><input type="checkbox" id="c-42476086" checked=""/><div class="controls bullet"><span class="by">thrwthsnw</span><span>|</span><a href="#42471003">root</a><span>|</span><a href="#42472950">parent</a><span>|</span><a href="#42471102">next</a><span>|</span><label class="collapse" for="c-42476086">[-]</label><label class="expand" for="c-42476086">[2 more]</label></div><br/><div class="children"><div class="content">Go to the projects page on the docs site</div><br/><div id="42476295" class="c"><input type="checkbox" id="c-42476295" checked=""/><div class="controls bullet"><span class="by">moffkalast</span><span>|</span><a href="#42471003">root</a><span>|</span><a href="#42476086">parent</a><span>|</span><a href="#42471102">next</a><span>|</span><label class="collapse" for="c-42476295">[-]</label><label class="expand" for="c-42476295">[1 more]</label></div><br/><div class="children"><div class="content">I think this is the one, there&#x27;s quite a few it seems, but not all work: <a href="https:&#x2F;&#x2F;boardgame.io&#x2F;documentation&#x2F;#&#x2F;notable_projects" rel="nofollow">https:&#x2F;&#x2F;boardgame.io&#x2F;documentation&#x2F;#&#x2F;notable_projects</a></div><br/></div></div></div></div></div></div><div id="42471102" class="c"><input type="checkbox" id="c-42471102" checked=""/><div class="controls bullet"><span class="by">jfengel</span><span>|</span><a href="#42471003">parent</a><span>|</span><a href="#42472950">prev</a><span>|</span><a href="#42472518">next</a><span>|</span><label class="collapse" for="c-42471102">[-]</label><label class="expand" for="c-42471102">[1 more]</label></div><br/><div class="children"><div class="content">Oh, thank you. I&#x27;ve used your library a few times for personal projects, and it does exactly the thing that I needed. I really appreciate you having created this.</div><br/></div></div><div id="42472518" class="c"><input type="checkbox" id="c-42472518" checked=""/><div class="controls bullet"><span class="by">wordglyph</span><span>|</span><a href="#42471003">parent</a><span>|</span><a href="#42471102">prev</a><span>|</span><a href="#42472566">next</a><span>|</span><label class="collapse" for="c-42472518">[-]</label><label class="expand" for="c-42472518">[1 more]</label></div><br/><div class="children"><div class="content">Omg! I&#x27;ve been noodling about making my word game  <a href="https:&#x2F;&#x2F;WordGlyph.xyz" rel="nofollow">https:&#x2F;&#x2F;WordGlyph.xyz</a> multi player and been dreading that journey but now here it is!</div><br/></div></div><div id="42472566" class="c"><input type="checkbox" id="c-42472566" checked=""/><div class="controls bullet"><span class="by">doctorpangloss</span><span>|</span><a href="#42471003">parent</a><span>|</span><a href="#42472518">prev</a><span>|</span><a href="#42476490">next</a><span>|</span><label class="collapse" for="c-42472566">[-]</label><label class="expand" for="c-42472566">[3 more]</label></div><br/><div class="children"><div class="content">&gt; More recently, I&#x27;ve been working on <a href="https:&#x2F;&#x2F;boardgamelab.app&#x2F;" rel="nofollow">https:&#x2F;&#x2F;boardgamelab.app&#x2F;</a>, which uses a visual programming language to model game rules while also taking care of the UI layer.<p>Suppose there were a technology that could turn the canvas you authored into finished, consistent art; and a way to turn natural language rules into correct code. Would you use it? Why or why not?</div><br/><div id="42474248" class="c"><input type="checkbox" id="c-42474248" checked=""/><div class="controls bullet"><span class="by">anonymoushn</span><span>|</span><a href="#42471003">root</a><span>|</span><a href="#42472566">parent</a><span>|</span><a href="#42475310">next</a><span>|</span><label class="collapse" for="c-42474248">[-]</label><label class="expand" for="c-42474248">[1 more]</label></div><br/><div class="children"><div class="content">It would be great to save time on the implementation of board game rules engines. Unfortunately the fine folks at FFG are really bad at figuring out what the rules actually are and telling people :(</div><br/></div></div><div id="42475310" class="c"><input type="checkbox" id="c-42475310" checked=""/><div class="controls bullet"><span class="by">lukan</span><span>|</span><a href="#42471003">root</a><span>|</span><a href="#42472566">parent</a><span>|</span><a href="#42474248">prev</a><span>|</span><a href="#42476490">next</a><span>|</span><label class="collapse" for="c-42475310">[-]</label><label class="expand" for="c-42475310">[1 more]</label></div><br/><div class="children"><div class="content">&quot;turn the canvas you authored into finished, consistent art&quot;<p>Like a jpeg? Otherwise I don&#x27;t understand your question.<p>&quot; a way to turn natural language rules into correct code&quot;<p>And this is straight impossible, as natural language is by definition ambigious in meaning and code is not. Try your luck with LLM&#x27;s, they come closest.<p>(a subset of natural language might work, but this is kind of a complex research topic)</div><br/></div></div></div></div><div id="42473623" class="c"><input type="checkbox" id="c-42473623" checked=""/><div class="controls bullet"><span class="by">beretguy</span><span>|</span><a href="#42471003">parent</a><span>|</span><a href="#42476490">prev</a><span>|</span><a href="#42471392">next</a><span>|</span><label class="collapse" for="c-42473623">[-]</label><label class="expand" for="c-42473623">[3 more]</label></div><br/><div class="children"><div class="content">There was this iOS game which died which I wanted to recreate:<p><a href="https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20161020010853&#x2F;http:&#x2F;&#x2F;www.82apps.com&#x2F;colony&#x2F;" rel="nofollow">https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20161020010853&#x2F;http:&#x2F;&#x2F;www.82apps...</a><p>But I have 0 knowledge of game development. Maybe this could make my job easier? Or maybe somebody else who know how to write game can do it? Please?</div><br/></div></div><div id="42471392" class="c"><input type="checkbox" id="c-42471392" checked=""/><div class="controls bullet"><span class="by">thih9</span><span>|</span><a href="#42471003">parent</a><span>|</span><a href="#42473623">prev</a><span>|</span><a href="#42471288">next</a><span>|</span><label class="collapse" for="c-42471392">[-]</label><label class="expand" for="c-42471392">[4 more]</label></div><br/><div class="children"><div class="content">The boardgamelab.app looks like a stealth, proprietary project; at least at the moment its T&amp;C[1] says: &quot;under this license you may not (...) use the materials for any commercial purpose, or for any public display (commercial or non-commercial)&quot;.<p>Do you have any plans for the business model?<p>[1]: <a href="https:&#x2F;&#x2F;boardgamelab.app&#x2F;terms-and-conditions" rel="nofollow">https:&#x2F;&#x2F;boardgamelab.app&#x2F;terms-and-conditions</a></div><br/><div id="42472109" class="c"><input type="checkbox" id="c-42472109" checked=""/><div class="controls bullet"><span class="by">fourside</span><span>|</span><a href="#42471003">root</a><span>|</span><a href="#42471392">parent</a><span>|</span><a href="#42471288">next</a><span>|</span><label class="collapse" for="c-42472109">[-]</label><label class="expand" for="c-42472109">[3 more]</label></div><br/><div class="children"><div class="content">What do you mean by stealth? I looked at the website and nothing about it makes it look like it would necessarily be free or open source.</div><br/><div id="42472458" class="c"><input type="checkbox" id="c-42472458" checked=""/><div class="controls bullet"><span class="by">thih9</span><span>|</span><a href="#42471003">root</a><span>|</span><a href="#42472109">parent</a><span>|</span><a href="#42472187">next</a><span>|</span><label class="collapse" for="c-42472458">[-]</label><label class="expand" for="c-42472458">[1 more]</label></div><br/><div class="children"><div class="content">&gt; What do you mean by stealth?<p>I meant stealth as in: âor for any public display (commercial or non-commercial)â, see grandparent comment. I edited the grandparent comment now and added a comma between âstealthâ and âproprietaryâ, hope this is clearer.</div><br/></div></div><div id="42472187" class="c"><input type="checkbox" id="c-42472187" checked=""/><div class="controls bullet"><span class="by">jzig</span><span>|</span><a href="#42471003">root</a><span>|</span><a href="#42472109">parent</a><span>|</span><a href="#42472458">prev</a><span>|</span><a href="#42471288">next</a><span>|</span><label class="collapse" for="c-42472187">[-]</label><label class="expand" for="c-42472187">[1 more]</label></div><br/><div class="children"><div class="content">Still needs clearer language IMO.</div><br/></div></div></div></div></div></div></div></div><div id="42471288" class="c"><input type="checkbox" id="c-42471288" checked=""/><div class="controls bullet"><span class="by">fleabitdev</span><span>|</span><a href="#42471003">prev</a><span>|</span><a href="#42473165">next</a><span>|</span><label class="collapse" for="c-42471288">[-]</label><label class="expand" for="c-42471288">[22 more]</label></div><br/><div class="children"><div class="content">This engine uses a Redux-like architecture. You have a State type (containing data like &quot;the position of the black kingside rook&quot;) and a stream of in-game actions (like &quot;knight to F3&quot;). Each action is handled by a pure function which converts the current State to a new State. You can either transmit State deltas from the server to the client, or just transmit the actions themselves (<a href="https:&#x2F;&#x2F;longwelwind.net&#x2F;blog&#x2F;networking-turn-based-game&#x2F;" rel="nofollow">https:&#x2F;&#x2F;longwelwind.net&#x2F;blog&#x2F;networking-turn-based-game&#x2F;</a>).<p>This design makes it easy to implement optimistic updates, rollback, replays, automated testing, and recovery after a disconnection. It&#x27;s a surprisingly good fit for UI, too; you can render simple games as a React component which takes the current State as one of its props.<p>However, a stream of context-free actions can be a really inconvenient representation for some games. The rules of a board game are often like the control flow of a computer program: you&#x27;ll see branching, iteration, local variables, function calls, structured concurrency, and sometimes even race conditions and reentrancy. When you try to represent all of this logic as a State object, you&#x27;re basically maintaining a snapshot of a &quot;call stack&quot; as plain data, and manually resuming that &quot;program&quot; whenever you handle an action. It doesn&#x27;t seem ideal.<p>I&#x27;ve been sketching a board game engine which would represent the game logic as normal code instead. It seems promising, but it really needs a couple of language features which don&#x27;t exist in the mainstream yet, like serialisation of suspended async functions.</div><br/><div id="42477605" class="c"><input type="checkbox" id="c-42477605" checked=""/><div class="controls bullet"><span class="by">nicolodavis</span><span>|</span><a href="#42471288">parent</a><span>|</span><a href="#42472084">next</a><span>|</span><label class="collapse" for="c-42477605">[-]</label><label class="expand" for="c-42477605">[1 more]</label></div><br/><div class="children"><div class="content">I agree that asynchronous flows are hard to represent using a state object.<p>I chose to go with a monadic approach in boardgamelab.app (I&#x27;m not limited by language features since I&#x27;m designing it from the ground up for this use case). The language is pure and functional with managed effects. You can express things like:<p><pre><code>  set of cards -&gt; filter by action cards -&gt; choose -&gt; [card]
  do stuff with [card]
</code></pre>
written in a synchronous style, while under the hood it:<p>1. suspends the rule.<p>2. waits for the user to make a choice.<p>3. resumes the rule with the choice made by the user.<p>(note: listed above is a simplified text representation. The Boardgame Lab structure editor uses a block-based visual language.)<p>If written in Haskell, the underlying monad would look something like this:<p><pre><code>  {-# LANGUAGE ExistentialQuantification #-}

  newtype Rule a = Rule {fn :: State -&gt; (RuleResult a, State)}

  data RuleResult a
    = Done a
    | forall x. Show x =&gt; Choose [x] (x -&gt; Rule a)

  instance Monad Rule where
    m &gt;&gt;= k = Rule $ \state -&gt;
      case fn m state of
        (Done a, state&#x27;) -&gt; fn (k a) state&#x27;
        (Choose list m&#x27;, state&#x27;) -&gt; (Choose list (m&#x27; &gt;=&gt; k), state&#x27;)
</code></pre>
i.e. each rule returns either a completed result or a choice along with a continuation of the remainder of the rule past that choice.</div><br/></div></div><div id="42472084" class="c"><input type="checkbox" id="c-42472084" checked=""/><div class="controls bullet"><span class="by">LudwigNagasena</span><span>|</span><a href="#42471288">parent</a><span>|</span><a href="#42477605">prev</a><span>|</span><a href="#42472570">next</a><span>|</span><label class="collapse" for="c-42472084">[-]</label><label class="expand" for="c-42472084">[10 more]</label></div><br/><div class="children"><div class="content">My main pain point with any sort of Flux-like state management is transitions [1]. The state of UI is not fully described by the state of the game [2]. If I play a card, the game state can be instantly updated to the next decison-making point, but in reality I want to show steps of the game through animations, some of which are concurrent and some of which are consecutive. That usually ends up in a mess; and I&#x27;ve never seen someone implement it nicely.<p>[1] And generally dynamic stuff like drag-n-drop, which is infinitely times simpler in any other architecture than in React.<p>[2] That is also true for business apps, but their animations are usually so simple you can simply use CSS.</div><br/><div id="42475378" class="c"><input type="checkbox" id="c-42475378" checked=""/><div class="controls bullet"><span class="by">nkrisc</span><span>|</span><a href="#42471288">root</a><span>|</span><a href="#42472084">parent</a><span>|</span><a href="#42475075">next</a><span>|</span><label class="collapse" for="c-42475378">[-]</label><label class="expand" for="c-42475378">[2 more]</label></div><br/><div class="children"><div class="content">I toyed with an approach once that separated animations from game state updates.<p>Every player action could cause a cascade of updates, which would all be resolved âinstantlyâ to the point no more cascaded updates were left to be processed.<p>While this is happening, any update that includes an animation pushes that to an âanimation stackâ, then the animations are played back one by one to show the player what happened. In this animation state most input in disabled and the game is effectively on hold until the animations complete (or are skipped by the player).<p>The âanimationsâ were basically commands that the Model used to update the View, just with the option to apply them one by one over time. So the model is always up to date as fast as possible as possible, and the view just lags behind a bit and catches up.</div><br/><div id="42478049" class="c"><input type="checkbox" id="c-42478049" checked=""/><div class="controls bullet"><span class="by">jay_kyburz</span><span>|</span><a href="#42471288">root</a><span>|</span><a href="#42475378">parent</a><span>|</span><a href="#42475075">next</a><span>|</span><label class="collapse" for="c-42478049">[-]</label><label class="expand" for="c-42478049">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve found in the past its good to have the model updates in the queue so that the animation controllers can be simpler. The animations simply need to observe the model and react to changes, and post events when they complete.</div><br/></div></div></div></div><div id="42475075" class="c"><input type="checkbox" id="c-42475075" checked=""/><div class="controls bullet"><span class="by">sjrd</span><span>|</span><a href="#42471288">root</a><span>|</span><a href="#42472084">parent</a><span>|</span><a href="#42475378">prev</a><span>|</span><a href="#42472685">next</a><span>|</span><label class="collapse" for="c-42475075">[-]</label><label class="expand" for="c-42475075">[3 more]</label></div><br/><div class="children"><div class="content">The way I did this was to design a more-or-less monadic container `Result&lt;A&gt;` for all my game logic functions. It batches a sequence of animation steps with a result. It can also model error conditions (like not having enough resources for example). I can then instantiate it any concrete result type, such as a full game state or just the result of individual computations. It was very nice to concisely write complicated game logic with animations while retaining the happy path.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;sjrd&#x2F;barrage&#x2F;blob&#x2F;main&#x2F;src&#x2F;main&#x2F;scala&#x2F;be&#x2F;doeraene&#x2F;barrage&#x2F;model&#x2F;Result.scala">https:&#x2F;&#x2F;github.com&#x2F;sjrd&#x2F;barrage&#x2F;blob&#x2F;main&#x2F;src&#x2F;main&#x2F;scala&#x2F;be&#x2F;...</a></div><br/><div id="42475752" class="c"><input type="checkbox" id="c-42475752" checked=""/><div class="controls bullet"><span class="by">LudwigNagasena</span><span>|</span><a href="#42471288">root</a><span>|</span><a href="#42475075">parent</a><span>|</span><a href="#42472685">next</a><span>|</span><label class="collapse" for="c-42475752">[-]</label><label class="expand" for="c-42475752">[2 more]</label></div><br/><div class="children"><div class="content">Interesting. Unfortunately, your repo seems to be private.</div><br/><div id="42475821" class="c"><input type="checkbox" id="c-42475821" checked=""/><div class="controls bullet"><span class="by">sjrd</span><span>|</span><a href="#42471288">root</a><span>|</span><a href="#42475752">parent</a><span>|</span><a href="#42472685">next</a><span>|</span><label class="collapse" for="c-42475821">[-]</label><label class="expand" for="c-42475821">[1 more]</label></div><br/><div class="children"><div class="content">Oh shoot, yes. I have imitation copies of the original game graphics in there, and so I can&#x27;t make it public without violating copyright of their assets. :-(<p>Here is a public gist with the `Result` data structure, as well a good portion of the file handling all the game mechanics, which should show it gets used. 
<a href="https:&#x2F;&#x2F;gist.github.com&#x2F;sjrd&#x2F;34fe234d1b6232cf42ffda5d23292d35" rel="nofollow">https:&#x2F;&#x2F;gist.github.com&#x2F;sjrd&#x2F;34fe234d1b6232cf42ffda5d23292d3...</a></div><br/></div></div></div></div></div></div><div id="42472685" class="c"><input type="checkbox" id="c-42472685" checked=""/><div class="controls bullet"><span class="by">Longwelwind</span><span>|</span><a href="#42471288">root</a><span>|</span><a href="#42472084">parent</a><span>|</span><a href="#42475075">prev</a><span>|</span><a href="#42472171">next</a><span>|</span><label class="collapse" for="c-42472685">[-]</label><label class="expand" for="c-42472685">[1 more]</label></div><br/><div class="children"><div class="content">The way I wanted to implement this in my turn-based game engine:<p>If you implement the deterministic update pattern to handle state synchronisation you can add &quot;event&quot; inside the logic that handles updates that pause the processing allowing your animations to be played. In JS, for example:<p><pre><code>    async function handleUpdate(update) {
        if (update.type == &quot;sell-items&quot;) {
            this.player.inventory[update.itemId] -= 1;

            await emitEvent(&quot;itemSold&quot;);

            this.player.money += 10;

            await emitEvent(&quot;moneyGain&quot;);
        }
    }
</code></pre>
Server-side, &quot;emitEvents&quot; would be a no-op. Everything would resolve synchronously.<p>Client-side, the UI can listen to those events to pause the updating of the game state to see the intermediary state of the game and play animations. When the animation is done, it can resolve the promise, resuming the game updating logic.<p>If an update arrives while an update is being handled, it can be queued so it can be played after the current update finishes.</div><br/></div></div><div id="42472171" class="c"><input type="checkbox" id="c-42472171" checked=""/><div class="controls bullet"><span class="by">semitones</span><span>|</span><a href="#42471288">root</a><span>|</span><a href="#42472084">parent</a><span>|</span><a href="#42472685">prev</a><span>|</span><a href="#42476566">next</a><span>|</span><label class="collapse" for="c-42472171">[-]</label><label class="expand" for="c-42472171">[1 more]</label></div><br/><div class="children"><div class="content">In my experience, the way to solve [1] and [2] is to design a game state that can also _fully_ describe the state of the UI, including animation cues.</div><br/></div></div><div id="42476566" class="c"><input type="checkbox" id="c-42476566" checked=""/><div class="controls bullet"><span class="by">ginsider_oaks</span><span>|</span><a href="#42471288">root</a><span>|</span><a href="#42472084">parent</a><span>|</span><a href="#42472171">prev</a><span>|</span><a href="#42476646">next</a><span>|</span><label class="collapse" for="c-42476566">[-]</label><label class="expand" for="c-42476566">[1 more]</label></div><br/><div class="children"><div class="content">I remember someone making a card game GALGA [1] in Haskell and compiling a high-level &quot;rules&quot; DSL to a low-level &quot;animation&quot; DSL and &quot;primitive&quot; DSL for handling animations and state changes respectively.<p>[1] <a href="https:&#x2F;&#x2F;roganmurley.com&#x2F;2021&#x2F;12&#x2F;11&#x2F;free-monads.html" rel="nofollow">https:&#x2F;&#x2F;roganmurley.com&#x2F;2021&#x2F;12&#x2F;11&#x2F;free-monads.html</a></div><br/></div></div><div id="42476646" class="c"><input type="checkbox" id="c-42476646" checked=""/><div class="controls bullet"><span class="by">gr4vityWall</span><span>|</span><a href="#42471288">root</a><span>|</span><a href="#42472084">parent</a><span>|</span><a href="#42476566">prev</a><span>|</span><a href="#42472570">next</a><span>|</span><label class="collapse" for="c-42476646">[-]</label><label class="expand" for="c-42476646">[1 more]</label></div><br/><div class="children"><div class="content">(game dev) What I did in the past was having actions generate both a new state, and a stack of &#x27;instructions&#x27; that update the UI, which was deliberately <i>not</i> a 1:1 representation of the game state for the exact reasons you described.<p>Then you can &#x27;execute&#x27; the stack within a command VM of some sorts, where instructions can move sprites around, play sounds, etc. You can have &#x27;high level&#x27; instructions (&quot;display the enemy&#x27;s death&quot;) implemented as a combination of low level instructions (&#x27;reduce that health bar count until it goes to zero&#x27; -&gt; &#x27;change entity X&#x27;s sprite to dead sprite&#x27; -&gt; &#x27;give player 200 gold as reward&#x27; -&gt; &#x27;play sound&#x27; -&gt; &#x27;change text in the text bar to something&#x27; -&gt; ...)<p>It ended up working waaay better than what I was expecting, felt very easy to reason about, wasn&#x27;t hard to maintain, and scratched that itch of implementing an interesting solution. :)</div><br/></div></div></div></div><div id="42472570" class="c"><input type="checkbox" id="c-42472570" checked=""/><div class="controls bullet"><span class="by">bbminner</span><span>|</span><a href="#42471288">parent</a><span>|</span><a href="#42472084">prev</a><span>|</span><a href="#42471791">next</a><span>|</span><label class="collapse" for="c-42472570">[-]</label><label class="expand" for="c-42472570">[1 more]</label></div><br/><div class="children"><div class="content">Yep, that&#x27;s the exact issue I wanted to address with my own twist on the idea of an online boardgame engine - I  was trying to actually persist the callstack of an async wasm vm function (game loop) execution into a database in rust. It is working in a sense that you can implement battle ships or tick tack toe, but I did not quite finish it. Happy to still make repo public if helpful.<p>To be more specific, async wasm function was implemented as a poll loop sync function exported to the caller, there was (at the time) no way to move wasm mv memory, so it was persisted while the game was live and replayed from a message log stored in a db after&#x2F;if preemption.</div><br/></div></div><div id="42471791" class="c"><input type="checkbox" id="c-42471791" checked=""/><div class="controls bullet"><span class="by">NathanaelRea</span><span>|</span><a href="#42471288">parent</a><span>|</span><a href="#42472570">prev</a><span>|</span><a href="#42475998">next</a><span>|</span><label class="collapse" for="c-42471791">[-]</label><label class="expand" for="c-42471791">[5 more]</label></div><br/><div class="children"><div class="content">Can you explain more what type of game would need a call stack snapshot? I&#x27;ve never developed a game, but it seems like as long as you store like the initial state and prng you could always get the current state by replaying the full history. All the other logic would be stored outside the state, and only added when &quot;committed&quot;. As long as prng is stable and you start from the clean state every time, you&#x27;d get the same outcome.</div><br/><div id="42472203" class="c"><input type="checkbox" id="c-42472203" checked=""/><div class="controls bullet"><span class="by">yojo</span><span>|</span><a href="#42471288">root</a><span>|</span><a href="#42471791">parent</a><span>|</span><a href="#42472211">next</a><span>|</span><label class="collapse" for="c-42472203">[-]</label><label class="expand" for="c-42472203">[3 more]</label></div><br/><div class="children"><div class="content">I think I have a good example from Magic: the Gathering.<p>Thereâs a card called âFact or Fictionâ. You reveal the top five cards of your deck. Then your opponent splits the cards into two piles. Then you pick one of the two piles to take into your hand.<p>Youâll need to store structures representing the choices that are intermediary steps (split cards, pick stack) in your state, which is basically function calls and their params (a call stack). This example could get hairier - Magic also features cards with branching logic âchoose 1: do a or bâ. I can imagine designing cards with large and convoluted possible execution paths.<p>You could have the card define a schema for state transitions&#x2F;params and represent all these choices as JSON encoded POJOs, but as a developer it sounds a lot nicer to just be able to suspend an async function every time a choice is made.</div><br/><div id="42472730" class="c"><input type="checkbox" id="c-42472730" checked=""/><div class="controls bullet"><span class="by">Longwelwind</span><span>|</span><a href="#42471288">root</a><span>|</span><a href="#42472203">parent</a><span>|</span><a href="#42472211">next</a><span>|</span><label class="collapse" for="c-42472730">[-]</label><label class="expand" for="c-42472730">[2 more]</label></div><br/><div class="children"><div class="content">I had the same issue in AGoT:BG and I solved it by representing the state of the game as a tree. At any point of the game, the current game state is a leaf of the tree.<p>You&#x27;d represent this kind of choice as a child node. When the user has made their choice, the code can return to the parent node with the choice being made so it can continue with the next &quot;step&quot; of the game.</div><br/><div id="42474385" class="c"><input type="checkbox" id="c-42474385" checked=""/><div class="controls bullet"><span class="by">scrollaway</span><span>|</span><a href="#42471288">root</a><span>|</span><a href="#42472730">parent</a><span>|</span><a href="#42472211">next</a><span>|</span><label class="collapse" for="c-42474385">[-]</label><label class="expand" for="c-42474385">[1 more]</label></div><br/><div class="children"><div class="content">This is the correct response. Hearthstone is structured like this internally.<p>If you are curious about it, I wrote a cc0 spec which stores hearthstone game state in xml. Itâs based on how hearthstone stores game state on the server and client, and it was the first time a replay format was created for hearthstone:
<a href="https:&#x2F;&#x2F;hearthsim.info&#x2F;hsreplay&#x2F;" rel="nofollow">https:&#x2F;&#x2F;hearthsim.info&#x2F;hsreplay&#x2F;</a><p>Incidentally the UI we wrote for hearthstone replays is a react app. Itâs funny because looking back it was the first time I used react and typescript, and both were not at all adopted by the js community yet at the time.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;hearthsim&#x2F;joust">https:&#x2F;&#x2F;github.com&#x2F;hearthsim&#x2F;joust</a></div><br/></div></div></div></div></div></div><div id="42472211" class="c"><input type="checkbox" id="c-42472211" checked=""/><div class="controls bullet"><span class="by">fleabitdev</span><span>|</span><a href="#42471288">root</a><span>|</span><a href="#42471791">parent</a><span>|</span><a href="#42472203">prev</a><span>|</span><a href="#42475998">next</a><span>|</span><label class="collapse" for="c-42472211">[-]</label><label class="expand" for="c-42472211">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s the exact approach I&#x27;m considering for the new engine I mentioned!<p>Although that strategy enables you to store and recover the state of a game, it doesn&#x27;t give you the ability to inspect a snapshot of that state. How can you print the card which has just been played, if that data only exists as an argument in the call stack of a suspended async function? In the same way that you can&#x27;t inspect the local variables captured by a closure, mainstream languages also provide no way to inspect a suspended stack frame.<p>This problem interferes with debugging, consistency checks (e.g. hashing the game state to check that two clients are in sync), and unit testing.</div><br/></div></div></div></div><div id="42475998" class="c"><input type="checkbox" id="c-42475998" checked=""/><div class="controls bullet"><span class="by">Savageman</span><span>|</span><a href="#42471288">parent</a><span>|</span><a href="#42471791">prev</a><span>|</span><a href="#42473165">next</a><span>|</span><label class="collapse" for="c-42475998">[-]</label><label class="expand" for="c-42475998">[4 more]</label></div><br/><div class="children"><div class="content">How does secret state fit in this? If you want each player hand to be secret, then each player has its own state?</div><br/><div id="42476225" class="c"><input type="checkbox" id="c-42476225" checked=""/><div class="controls bullet"><span class="by">fleabitdev</span><span>|</span><a href="#42471288">root</a><span>|</span><a href="#42475998">parent</a><span>|</span><a href="#42473165">next</a><span>|</span><label class="collapse" for="c-42476225">[-]</label><label class="expand" for="c-42476225">[3 more]</label></div><br/><div class="children"><div class="content">boardgame.io only runs game logic on the server, and it censors the State just before sending it to each client. This strategy makes the UI feel less responsive, but it keeps things simple.<p>The Swords and Ravens blog post recommends resolving actions on the client when they don&#x27;t require secret information, but resolving other actions on the server. You&#x27;d also need to resolve actions on the server when they involve RNG.</div><br/><div id="42476298" class="c"><input type="checkbox" id="c-42476298" checked=""/><div class="controls bullet"><span class="by">Savageman</span><span>|</span><a href="#42471288">root</a><span>|</span><a href="#42476225">parent</a><span>|</span><a href="#42473165">next</a><span>|</span><label class="collapse" for="c-42476298">[-]</label><label class="expand" for="c-42476298">[2 more]</label></div><br/><div class="children"><div class="content">Interesting, would you share the link of this post please?</div><br/><div id="42476330" class="c"><input type="checkbox" id="c-42476330" checked=""/><div class="controls bullet"><span class="by">fleabitdev</span><span>|</span><a href="#42471288">root</a><span>|</span><a href="#42476298">parent</a><span>|</span><a href="#42473165">next</a><span>|</span><label class="collapse" for="c-42476330">[-]</label><label class="expand" for="c-42476330">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;longwelwind.net&#x2F;blog&#x2F;networking-turn-based-game&#x2F;" rel="nofollow">https:&#x2F;&#x2F;longwelwind.net&#x2F;blog&#x2F;networking-turn-based-game&#x2F;</a></div><br/></div></div></div></div></div></div></div></div></div></div><div id="42473165" class="c"><input type="checkbox" id="c-42473165" checked=""/><div class="controls bullet"><span class="by">mvolfik</span><span>|</span><a href="#42471288">prev</a><span>|</span><a href="#42477550">next</a><span>|</span><label class="collapse" for="c-42473165">[-]</label><label class="expand" for="c-42473165">[1 more]</label></div><br/><div class="children"><div class="content">10 months ago, there was also Boardzilla (<a href="https:&#x2F;&#x2F;www.boardzilla.io&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.boardzilla.io&#x2F;</a>) posted here: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=39180953">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=39180953</a> . Curious to see how these two compare</div><br/></div></div><div id="42477550" class="c"><input type="checkbox" id="c-42477550" checked=""/><div class="controls bullet"><span class="by">Feathercrown</span><span>|</span><a href="#42473165">prev</a><span>|</span><a href="#42453205">next</a><span>|</span><label class="collapse" for="c-42477550">[-]</label><label class="expand" for="c-42477550">[1 more]</label></div><br/><div class="children"><div class="content">Ooh this is neat, I&#x27;ve been working on something similar. I&#x27;ll have to check it out and see if they&#x27;re using the same abstractions as I am. Could be enlightening!</div><br/></div></div><div id="42453205" class="c"><input type="checkbox" id="c-42453205" checked=""/><div class="controls bullet"><span class="by">brudgers</span><span>|</span><a href="#42477550">prev</a><span>|</span><a href="#42470928">next</a><span>|</span><label class="collapse" for="c-42453205">[-]</label><label class="expand" for="c-42453205">[3 more]</label></div><br/><div class="children"><div class="content">Looks like it might originally have been from Google based on this discussion<p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=15946425">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=15946425</a></div><br/><div id="42470768" class="c"><input type="checkbox" id="c-42470768" checked=""/><div class="controls bullet"><span class="by">ErrantX</span><span>|</span><a href="#42453205">parent</a><span>|</span><a href="#42470928">next</a><span>|</span><label class="collapse" for="c-42470768">[-]</label><label class="expand" for="c-42470768">[2 more]</label></div><br/><div class="children"><div class="content">The original author looks to have been at Google till 2020.<p><a href="https:&#x2F;&#x2F;nicolodavis.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;nicolodavis.com&#x2F;</a></div><br/><div id="42471028" class="c"><input type="checkbox" id="c-42471028" checked=""/><div class="controls bullet"><span class="by">nicolodavis</span><span>|</span><a href="#42453205">root</a><span>|</span><a href="#42470768">parent</a><span>|</span><a href="#42470928">next</a><span>|</span><label class="collapse" for="c-42471028">[-]</label><label class="expand" for="c-42471028">[1 more]</label></div><br/><div class="children"><div class="content">boardgame.io was created as a personal open-source project while I was employed at Google. It is not an official Google product.</div><br/></div></div></div></div></div></div><div id="42470928" class="c"><input type="checkbox" id="c-42470928" checked=""/><div class="controls bullet"><span class="by">ferd</span><span>|</span><a href="#42453205">prev</a><span>|</span><a href="#42471525">next</a><span>|</span><label class="collapse" for="c-42470928">[-]</label><label class="expand" for="c-42470928">[1 more]</label></div><br/><div class="children"><div class="content">Looks very interesting.<p>Somewhat related:  I&#x27;ve recently wrote a code-walkthrough (in Clojure) of modeling chess-like games.<p><a href="https:&#x2F;&#x2F;neuroning.com&#x2F;boardgames-exercise&#x2F;" rel="nofollow">https:&#x2F;&#x2F;neuroning.com&#x2F;boardgames-exercise&#x2F;</a><p>It&#x27;s very basic and intended for teaching&#x2F;learning functional programming, not a real library or engine like the OP.</div><br/></div></div><div id="42471525" class="c"><input type="checkbox" id="c-42471525" checked=""/><div class="controls bullet"><span class="by">DominikPeters</span><span>|</span><a href="#42470928">prev</a><span>|</span><a href="#42474344">next</a><span>|</span><label class="collapse" for="c-42471525">[-]</label><label class="expand" for="c-42471525">[2 more]</label></div><br/><div class="children"><div class="content">Is there a simple demo that one can test? I see a tutorial about tic tac toe, but the result doesn&#x27;t seem to be hosted anywhere.</div><br/><div id="42473309" class="c"><input type="checkbox" id="c-42473309" checked=""/><div class="controls bullet"><span class="by">freetonik</span><span>|</span><a href="#42471525">parent</a><span>|</span><a href="#42474344">next</a><span>|</span><label class="collapse" for="c-42473309">[-]</label><label class="expand" for="c-42473309">[1 more]</label></div><br/><div class="children"><div class="content">The tutorial page[1] has a link to open an interactive sandbox with a TicTacToe example. The link is titled &quot;Edit in CodeSandbox&quot;.<p>1. <a href="https:&#x2F;&#x2F;boardgame.io&#x2F;documentation&#x2F;#&#x2F;tutorial" rel="nofollow">https:&#x2F;&#x2F;boardgame.io&#x2F;documentation&#x2F;#&#x2F;tutorial</a></div><br/></div></div></div></div><div id="42474344" class="c"><input type="checkbox" id="c-42474344" checked=""/><div class="controls bullet"><span class="by">Lucasoato</span><span>|</span><a href="#42471525">prev</a><span>|</span><a href="#42472178">next</a><span>|</span><label class="collapse" for="c-42474344">[-]</label><label class="expand" for="c-42474344">[1 more]</label></div><br/><div class="children"><div class="content">If anybody knows of any reference, article, book to study and implement turn-based engines like this, please add them under this thread.</div><br/></div></div><div id="42472178" class="c"><input type="checkbox" id="c-42472178" checked=""/><div class="controls bullet"><span class="by">tasuki</span><span>|</span><a href="#42474344">prev</a><span>|</span><a href="#42472893">next</a><span>|</span><label class="collapse" for="c-42472178">[-]</label><label class="expand" for="c-42472178">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s really cool that it has a MCTS bot built-in!</div><br/></div></div><div id="42472893" class="c"><input type="checkbox" id="c-42472893" checked=""/><div class="controls bullet"><span class="by">throw94838211</span><span>|</span><a href="#42472178">prev</a><span>|</span><a href="#42471409">next</a><span>|</span><label class="collapse" for="c-42472893">[-]</label><label class="expand" for="c-42472893">[1 more]</label></div><br/><div class="children"><div class="content">I tried to use this before, but many parts didn&#x27;t really work right, lots of conflict between dependencies, especially the server parts. I had to abandon what I wanted to do with it. Shame because many ideas were interesting, but felt it was a bit untested.</div><br/></div></div><div id="42471409" class="c"><input type="checkbox" id="c-42471409" checked=""/><div class="controls bullet"><span class="by">billnreed</span><span>|</span><a href="#42472893">prev</a><span>|</span><a href="#42475413">next</a><span>|</span><label class="collapse" for="c-42471409">[-]</label><label class="expand" for="c-42471409">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve seen this engine before and thought it was really cool!<p>I&#x27;ve been playing around with writing my own turn-based game engine with TypeScript: <a href="https:&#x2F;&#x2F;github.com&#x2F;snowbillr&#x2F;turn-based-game-engine">https:&#x2F;&#x2F;github.com&#x2F;snowbillr&#x2F;turn-based-game-engine</a><p>It&#x27;s a WIP still, but what&#x27;s really been the struggle for me is coming up with a data structure and traversal algorithm for the turn order. I wanted that to be extremely configurable by whoever uses the library.<p>```<p>engine.defineFlow((f) =&gt; {<p><pre><code>  f.node({
    actions: f.actions(WelcomeMessage),
  })

  f.node(
    {
      actions: f.actions(RoundStart),
      cleanups: f.cleanups(RoundEnd, TestLog),
    },
    players.map(player =&gt; f.node({
      playerId: player.id,
      actions: f.actions(TurnStart),
      cleanups: f.cleanups(TurnEnd),
    })),
  )</code></pre>
});<p>```<p>This example shows a TicTacToe game defined like this:<p>```<p>- welcome<p>- round<p><pre><code>  - player 1 turn

  - player 2 turn
</code></pre>
```<p>What I ended up with was essentially a tree that&#x27;s traversed depth-first to enter each node, and then goes back up the same traversal path until a sibling node is found to dive into.<p>That lets the user define rounds&#x2F;turns&#x2F;phases as children of each other in whatever shape they want.<p>It&#x27;s been a real fun project!</div><br/></div></div><div id="42449666" class="c"><input type="checkbox" id="c-42449666" checked=""/><div class="controls bullet"><span class="by">downThePipe</span><span>|</span><a href="#42475413">prev</a><span>|</span><label class="collapse" for="c-42449666">[-]</label><label class="expand" for="c-42449666">[10 more]</label></div><br/><div class="children"><div class="content">Then what, print it out to play on the kitchen table?</div><br/><div id="42470360" class="c"><input type="checkbox" id="c-42470360" checked=""/><div class="controls bullet"><span class="by">ramon156</span><span>|</span><a href="#42449666">parent</a><span>|</span><a href="#42450467">next</a><span>|</span><label class="collapse" for="c-42470360">[-]</label><label class="expand" for="c-42470360">[1 more]</label></div><br/><div class="children"><div class="content">&gt; multiplayer networking 
Its in the description</div><br/></div></div><div id="42450467" class="c"><input type="checkbox" id="c-42450467" checked=""/><div class="controls bullet"><span class="by">tardibear</span><span>|</span><a href="#42449666">parent</a><span>|</span><a href="#42470360">prev</a><span>|</span><a href="#42471089">next</a><span>|</span><label class="collapse" for="c-42450467">[-]</label><label class="expand" for="c-42450467">[1 more]</label></div><br/><div class="children"><div class="content">It supports multiplayer over the network.</div><br/></div></div><div id="42471089" class="c"><input type="checkbox" id="c-42471089" checked=""/><div class="controls bullet"><span class="by">vasco</span><span>|</span><a href="#42449666">parent</a><span>|</span><a href="#42450467">prev</a><span>|</span><label class="collapse" for="c-42471089">[-]</label><label class="expand" for="c-42471089">[7 more]</label></div><br/><div class="children"><div class="content">Put the screen on the kitchen table and sit around it, call it CounterTop Surface, have a little imagination man.</div><br/><div id="42471398" class="c"><input type="checkbox" id="c-42471398" checked=""/><div class="controls bullet"><span class="by">sethammons</span><span>|</span><a href="#42449666">root</a><span>|</span><a href="#42471089">parent</a><span>|</span><a href="#42471155">next</a><span>|</span><label class="collapse" for="c-42471398">[-]</label><label class="expand" for="c-42471398">[2 more]</label></div><br/><div class="children"><div class="content">a tad further: a central phone or tablet as a main board that you interact with via touch and where you can then transfer over to your handheld device over the network to manage your hand. I&#x27;ve not seen this yet, and it would be a pretty great experience I think. No clean up</div><br/><div id="42474737" class="c"><input type="checkbox" id="c-42474737" checked=""/><div class="controls bullet"><span class="by">dalmo3</span><span>|</span><a href="#42449666">root</a><span>|</span><a href="#42471398">parent</a><span>|</span><a href="#42471155">next</a><span>|</span><label class="collapse" for="c-42474737">[-]</label><label class="expand" for="c-42474737">[1 more]</label></div><br/><div class="children"><div class="content">This is basically how Jackbox games work.</div><br/></div></div></div></div><div id="42471155" class="c"><input type="checkbox" id="c-42471155" checked=""/><div class="controls bullet"><span class="by">thaumasiotes</span><span>|</span><a href="#42449666">root</a><span>|</span><a href="#42471089">parent</a><span>|</span><a href="#42471398">prev</a><span>|</span><label class="collapse" for="c-42471155">[-]</label><label class="expand" for="c-42471155">[4 more]</label></div><br/><div class="children"><div class="content">You say this like a joke, but that would bring a lot of usability and convenience improvements compared to a physical board game. Just moving stuff out of and back into the box can take a lot of work.<p>It&#x27;s easy to overlook rules that a computerized game automatically handles for you, though. For example, I&#x27;m part of a group that plays Heat ( <a href="https:&#x2F;&#x2F;boardgamearena.com&#x2F;gamepanel?game=heat" rel="nofollow">https:&#x2F;&#x2F;boardgamearena.com&#x2F;gamepanel?game=heat</a> ) every week. An important part of that game is moving the game-controlled cars, and since the platform handles that, only one person in the group. This is potentially quite bad for strategy, depending on the rules you don&#x27;t know. Another issue that comes up in the same game is people losing track of the size of their deck. The game is very generous about the allowable timing of deck-manipulation effects, but if you&#x27;re not actively paying attention you can draw through your deck and trigger a reshuffle, wiping out your discard pile, when you wanted to do something special before the reshuffle. This isn&#x27;t a mistake it&#x27;s possible to make while using a physical game.</div><br/><div id="42472139" class="c"><input type="checkbox" id="c-42472139" checked=""/><div class="controls bullet"><span class="by">jz67</span><span>|</span><a href="#42449666">root</a><span>|</span><a href="#42471155">parent</a><span>|</span><a href="#42474116">next</a><span>|</span><label class="collapse" for="c-42472139">[-]</label><label class="expand" for="c-42472139">[2 more]</label></div><br/><div class="children"><div class="content">Hey sorry if this is not the place for it but I play heat a lot too and I was looking for a group like this on bgm since the random matches have a lot of people rage quiting etc. can I ask to join this group?</div><br/><div id="42472526" class="c"><input type="checkbox" id="c-42472526" checked=""/><div class="controls bullet"><span class="by">azemetre</span><span>|</span><a href="#42449666">root</a><span>|</span><a href="#42472139">parent</a><span>|</span><a href="#42474116">next</a><span>|</span><label class="collapse" for="c-42472526">[-]</label><label class="expand" for="c-42472526">[1 more]</label></div><br/><div class="children"><div class="content">Do you play live or turn based games? I never had an issue of people rage quitting, I also tend to set the games to one turn per day which is reasonable for most people.</div><br/></div></div></div></div><div id="42474116" class="c"><input type="checkbox" id="c-42474116" checked=""/><div class="controls bullet"><span class="by">thaumasiotes</span><span>|</span><a href="#42449666">root</a><span>|</span><a href="#42471155">parent</a><span>|</span><a href="#42472139">prev</a><span>|</span><label class="collapse" for="c-42474116">[-]</label><label class="expand" for="c-42474116">[1 more]</label></div><br/><div class="children"><div class="content">&gt; and since the platform handles that, only one person in the group.<p>This should read &quot;only one person in the group knows how it works&quot;.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>