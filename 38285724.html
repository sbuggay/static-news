<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1700125279412" as="style"/><link rel="stylesheet" href="styles.css?v=1700125279412"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.sandordargo.com/blog/2023/11/15/most-important-complexities">C++: The most important complexities</a> <span class="domain">(<a href="https://www.sandordargo.com">www.sandordargo.com</a>)</span></div><div class="subtext"><span>jandeboevrie</span> | <span>30 comments</span></div><br/><div><div id="38286429" class="c"><input type="checkbox" id="c-38286429" checked=""/><div class="controls bullet"><span class="by">harrid</span><span>|</span><a href="#38287137">next</a><span>|</span><label class="collapse" for="c-38286429">[-]</label><label class="expand" for="c-38286429">[11 more]</label></div><br/><div class="children"><div class="content">Yes... But you don&#x27;t need to memorize all this, and it leaves out a simple rule: vectors (or arrays) outperform everything else if the dataset is small. Small is usually in the order of 100-300, but can vary wildly.<p>Also note that all &lt;algorithm&gt;s have built-in fully automatic parallelism via &lt;execution&gt;, a massively underused feature. In typical CPP fashion though, their newer views:: counterparts lack those overloads for the moment.</div><br/><div id="38287076" class="c"><input type="checkbox" id="c-38287076" checked=""/><div class="controls bullet"><span class="by">Arelius</span><span>|</span><a href="#38286429">parent</a><span>|</span><a href="#38286517">next</a><span>|</span><label class="collapse" for="c-38287076">[-]</label><label class="expand" for="c-38287076">[1 more]</label></div><br/><div class="children"><div class="content">Yes, but actually small can often be much larger then 100-300 depending on the specifics. Programmers often vastly underestimate how fast cache, and prefetch can go compared to complicated data structures.</div><br/></div></div><div id="38286517" class="c"><input type="checkbox" id="c-38286517" checked=""/><div class="controls bullet"><span class="by">csjh</span><span>|</span><a href="#38286429">parent</a><span>|</span><a href="#38287076">prev</a><span>|</span><a href="#38286946">next</a><span>|</span><label class="collapse" for="c-38286517">[-]</label><label class="expand" for="c-38286517">[4 more]</label></div><br/><div class="children"><div class="content">Never heard of `execution`, great tip. Is there some big caveat or just generally unknown?</div><br/><div id="38287144" class="c"><input type="checkbox" id="c-38287144" checked=""/><div class="controls bullet"><span class="by">coffeeaddict1</span><span>|</span><a href="#38286429">root</a><span>|</span><a href="#38286517">parent</a><span>|</span><a href="#38286834">next</a><span>|</span><label class="collapse" for="c-38287144">[-]</label><label class="expand" for="c-38287144">[1 more]</label></div><br/><div class="children"><div class="content">They&#x27;re only supported in MSVC and GCC (for the latter you need to link against Intel&#x27;s TBB to make it work). Support in libc++ (Clang) is work in progress.</div><br/></div></div><div id="38286834" class="c"><input type="checkbox" id="c-38286834" checked=""/><div class="controls bullet"><span class="by">lionkor</span><span>|</span><a href="#38286429">root</a><span>|</span><a href="#38286517">parent</a><span>|</span><a href="#38287144">prev</a><span>|</span><a href="#38286701">next</a><span>|</span><label class="collapse" for="c-38286834">[-]</label><label class="expand" for="c-38286834">[1 more]</label></div><br/><div class="children"><div class="content">I looked into it (my video, probably too long <a href="https:&#x2F;&#x2F;youtu.be&#x2F;9oh66SF91LA?si=azDCSOAJKA9Gpzim" rel="nofollow noreferrer">https:&#x2F;&#x2F;youtu.be&#x2F;9oh66SF91LA?si=azDCSOAJKA9Gpzim</a>), and the general result was that they make sense for non-small datasets and are a solid way to to parallelize something without having to pull in OpenMP or something.</div><br/></div></div><div id="38286701" class="c"><input type="checkbox" id="c-38286701" checked=""/><div class="controls bullet"><span class="by">harrid</span><span>|</span><a href="#38286429">root</a><span>|</span><a href="#38286517">parent</a><span>|</span><a href="#38286834">prev</a><span>|</span><a href="#38286946">next</a><span>|</span><label class="collapse" for="c-38286701">[-]</label><label class="expand" for="c-38286701">[1 more]</label></div><br/><div class="children"><div class="content">You need to be aware that these invocations are going to blast your cores full throttle as you obviously don&#x27;t have fine grained control.  But as long as your data is easily parallelized on a vector with computations that don&#x27;t depend on each other, it&#x27;s a game changer. I use it all the time to multithread things with literally a single line of code.</div><br/></div></div></div></div><div id="38286946" class="c"><input type="checkbox" id="c-38286946" checked=""/><div class="controls bullet"><span class="by">papichulo2023</span><span>|</span><a href="#38286429">parent</a><span>|</span><a href="#38286517">prev</a><span>|</span><a href="#38286734">next</a><span>|</span><label class="collapse" for="c-38286946">[-]</label><label class="expand" for="c-38286946">[2 more]</label></div><br/><div class="children"><div class="content">iirc, on msvc, execution parallel delegates to the OS (windows) to decide how many threads to create, at it is usually more than the total number of vcpu contrary to the usual recommendation.</div><br/><div id="38287035" class="c"><input type="checkbox" id="c-38287035" checked=""/><div class="controls bullet"><span class="by">harrid</span><span>|</span><a href="#38286429">root</a><span>|</span><a href="#38286946">parent</a><span>|</span><a href="#38286734">next</a><span>|</span><label class="collapse" for="c-38287035">[-]</label><label class="expand" for="c-38287035">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s very much implementation defined yes. I&#x27;m currently using this for something that runs for about 10 seconds, and even music playback and mouse cursor movement gets affected.<p>(But I&#x27;m about to move it to GPU)</div><br/></div></div></div></div><div id="38286734" class="c"><input type="checkbox" id="c-38286734" checked=""/><div class="controls bullet"><span class="by">01100011</span><span>|</span><a href="#38286429">parent</a><span>|</span><a href="#38286946">prev</a><span>|</span><a href="#38287088">next</a><span>|</span><label class="collapse" for="c-38286734">[-]</label><label class="expand" for="c-38286734">[2 more]</label></div><br/><div class="children"><div class="content">I rarely meet a CS major who will accept that small things will always stay small.  They will frequently talk you into more complex data structures with the assurance that you are just too stupid to realize your problem will suddenly need to scale several orders of magnitude.  Do they teach you in CS-101 to interpret &#x27;+&#x27; as the exponential operator? It often feels that way.</div><br/><div id="38286974" class="c"><input type="checkbox" id="c-38286974" checked=""/><div class="controls bullet"><span class="by">baq</span><span>|</span><a href="#38286429">root</a><span>|</span><a href="#38286734">parent</a><span>|</span><a href="#38287088">next</a><span>|</span><label class="collapse" for="c-38286974">[-]</label><label class="expand" for="c-38286974">[1 more]</label></div><br/><div class="children"><div class="content">There’s computer science and there’s software engineering. The best developers are good at both.<p>…but in order for this to really matter, communication is required, since even the best developers don’t scale.</div><br/></div></div></div></div><div id="38287088" class="c"><input type="checkbox" id="c-38287088" checked=""/><div class="controls bullet"><span class="by">elromulous</span><span>|</span><a href="#38286429">parent</a><span>|</span><a href="#38286734">prev</a><span>|</span><a href="#38287137">next</a><span>|</span><label class="collapse" for="c-38287088">[-]</label><label class="expand" for="c-38287088">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s even <i>more</i> true for larger collections. Stroustrup gave a talk on this back at GoingNative2012. Tl;Dr: &quot;Use a Vectah&quot; -Bjarne<p><a href="https:&#x2F;&#x2F;youtu.be&#x2F;YQs6IC-vgmo" rel="nofollow noreferrer">https:&#x2F;&#x2F;youtu.be&#x2F;YQs6IC-vgmo</a></div><br/></div></div></div></div><div id="38287137" class="c"><input type="checkbox" id="c-38287137" checked=""/><div class="controls bullet"><span class="by">vore</span><span>|</span><a href="#38286429">prev</a><span>|</span><a href="#38286542">next</a><span>|</span><label class="collapse" for="c-38287137">[-]</label><label class="expand" for="c-38287137">[1 more]</label></div><br/><div class="children"><div class="content">I think it&#x27;s pretty rare you would ever use std::list and rarer still std::forward_list – the on-paper complexities might be okay but the memory locality is so bad you should almost always be using std::vector or std::deque.</div><br/></div></div><div id="38286542" class="c"><input type="checkbox" id="c-38286542" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#38287137">prev</a><span>|</span><a href="#38286979">next</a><span>|</span><label class="collapse" for="c-38286542">[-]</label><label class="expand" for="c-38286542">[4 more]</label></div><br/><div class="children"><div class="content">Or maybe, if lucky to be on a market where there are more jobs than developers, avoid the companies that think they are the next Google on their interview process.<p>Naturally one should have a base knowledge of data structures and algorithms complexity, to the point relevant to the job, and naturally knowing which book to open when needed.</div><br/><div id="38286721" class="c"><input type="checkbox" id="c-38286721" checked=""/><div class="controls bullet"><span class="by">harrid</span><span>|</span><a href="#38286542">parent</a><span>|</span><a href="#38286979">next</a><span>|</span><label class="collapse" for="c-38286721">[-]</label><label class="expand" for="c-38286721">[3 more]</label></div><br/><div class="children"><div class="content">A tricky question in the context of this: why doesn&#x27;t vector have a constant time pop_front? By just incrementing the begin pointer</div><br/><div id="38287152" class="c"><input type="checkbox" id="c-38287152" checked=""/><div class="controls bullet"><span class="by">nly</span><span>|</span><a href="#38286542">root</a><span>|</span><a href="#38286721">parent</a><span>|</span><a href="#38286848">next</a><span>|</span><label class="collapse" for="c-38287152">[-]</label><label class="expand" for="c-38287152">[1 more]</label></div><br/><div class="children"><div class="content">One of the top guides to learn and accept as a C++ developer is &quot;Boost has it&quot;:<p><a href="https:&#x2F;&#x2F;www.boost.org&#x2F;doc&#x2F;libs&#x2F;master&#x2F;doc&#x2F;html&#x2F;container&#x2F;non_standard_containers.html#container.non_standard_containers.devector" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.boost.org&#x2F;doc&#x2F;libs&#x2F;master&#x2F;doc&#x2F;html&#x2F;container&#x2F;non...</a></div><br/></div></div><div id="38286848" class="c"><input type="checkbox" id="c-38286848" checked=""/><div class="controls bullet"><span class="by">swolpatrol</span><span>|</span><a href="#38286542">root</a><span>|</span><a href="#38286721">parent</a><span>|</span><a href="#38287152">prev</a><span>|</span><a href="#38286979">next</a><span>|</span><label class="collapse" for="c-38286848">[-]</label><label class="expand" for="c-38286848">[1 more]</label></div><br/><div class="children"><div class="content">because vectors are not designed for that. When they mean &quot;dynamic&quot; they literally just mean ontiguous memory, removing the first element would leave an empty space at the beginning. To maintain contiguity, all other elements would need to be shifted one position forward. This operation is linear in time complexity 
O(n), as it depends on the number of elements in the vector.<p>Also Vectors manage their own memory allocation and deallocation. If the begin pointer is incremented without moving the elements, the vector would still be holding onto memory that it&#x27;s not actually using for storage of active elements. This can lead to inefficient memory usage.
Basically speaking: they are designed to modify the end, keep adding, take a bit off, split them at a point, but not really take away from the beginning ( and I mean literally the first element)</div><br/></div></div></div></div></div></div><div id="38286979" class="c"><input type="checkbox" id="c-38286979" checked=""/><div class="controls bullet"><span class="by">lordnacho</span><span>|</span><a href="#38286542">prev</a><span>|</span><a href="#38286820">next</a><span>|</span><label class="collapse" for="c-38286979">[-]</label><label class="expand" for="c-38286979">[1 more]</label></div><br/><div class="children"><div class="content">I think don&#x27;t try to memorize the big-Os. Just read through a basic DS&amp;A text, and see the standard structures: vectors, trees, linked lists, hashmaps.<p>If you can picture them in your mind using blocks and arrows, the big-Os fall out of them naturally. To find an element, do you have to follow one pointer, then another? Do you have a choice at each junction? Is it contiguous? Hashmaps you have to convince yourself that it is indeed constant time, but once you get it you won&#x27;t be in doubt.<p>Do the same for &quot;what if I have to rearrange it, adding or removing an element?&quot; and you get a bunch of other logical big-O answers.<p>There&#x27;s a bunch of things made up of these things (LRU cache) and you can similarly logic your way to the answer, but I don&#x27;t think I&#x27;ve come across an algo problem that isn&#x27;t just a mash of these basic structures.</div><br/></div></div><div id="38286820" class="c"><input type="checkbox" id="c-38286820" checked=""/><div class="controls bullet"><span class="by">fzy95</span><span>|</span><a href="#38286979">prev</a><span>|</span><a href="#38286971">next</a><span>|</span><label class="collapse" for="c-38286820">[-]</label><label class="expand" for="c-38286820">[2 more]</label></div><br/><div class="children"><div class="content">At the std::vector section I think the std::array is used instead of std::vector<p>&gt;std::array is a dynamically sized sequence container</div><br/><div id="38286947" class="c"><input type="checkbox" id="c-38286947" checked=""/><div class="controls bullet"><span class="by">repelsteeltje</span><span>|</span><a href="#38286820">parent</a><span>|</span><a href="#38286971">next</a><span>|</span><label class="collapse" for="c-38286947">[-]</label><label class="expand" for="c-38286947">[1 more]</label></div><br/><div class="children"><div class="content">Yup, spotted the same. Looks like a copy-paste &#x2F; typo</div><br/></div></div></div></div><div id="38286971" class="c"><input type="checkbox" id="c-38286971" checked=""/><div class="controls bullet"><span class="by">bottled_poe</span><span>|</span><a href="#38286820">prev</a><span>|</span><a href="#38286426">next</a><span>|</span><label class="collapse" for="c-38286971">[-]</label><label class="expand" for="c-38286971">[3 more]</label></div><br/><div class="children"><div class="content">Ummm.. this is pretty basic stuff. If you don’t know this, you probably shouldn’t be claiming to be a c++ developer.</div><br/><div id="38287050" class="c"><input type="checkbox" id="c-38287050" checked=""/><div class="controls bullet"><span class="by">mgaunard</span><span>|</span><a href="#38286971">parent</a><span>|</span><a href="#38286997">next</a><span>|</span><label class="collapse" for="c-38287050">[-]</label><label class="expand" for="c-38287050">[1 more]</label></div><br/><div class="children"><div class="content">There is a very large spectrum of quality for C++ developers.<p>That&#x27;s why the yearly salary of a senior C++ dev can vary a lot, usually from 1x to 10x.</div><br/></div></div><div id="38286997" class="c"><input type="checkbox" id="c-38286997" checked=""/><div class="controls bullet"><span class="by">skrebbel</span><span>|</span><a href="#38286971">parent</a><span>|</span><a href="#38287050">prev</a><span>|</span><a href="#38286426">next</a><span>|</span><label class="collapse" for="c-38286997">[-]</label><label class="expand" for="c-38286997">[1 more]</label></div><br/><div class="children"><div class="content">I’ll never understand the aversion of C++ developers to useful learning resources and documentation.</div><br/></div></div></div></div><div id="38286426" class="c"><input type="checkbox" id="c-38286426" checked=""/><div class="controls bullet"><span class="by">jeffreygoesto</span><span>|</span><a href="#38286971">prev</a><span>|</span><a href="#38286576">next</a><span>|</span><label class="collapse" for="c-38286426">[-]</label><label class="expand" for="c-38286426">[2 more]</label></div><br/><div class="children"><div class="content">&gt; removing an item from a random location: with erase() which has a complexity of O(1) for one element<p>This is not considering the time you need to get to that element before erasing, which is O(n). The most frequent fallacy about lists.<p>Someone had to do it, sorry.</div><br/><div id="38286447" class="c"><input type="checkbox" id="c-38286447" checked=""/><div class="controls bullet"><span class="by">verall</span><span>|</span><a href="#38286426">parent</a><span>|</span><a href="#38286576">next</a><span>|</span><label class="collapse" for="c-38286447">[-]</label><label class="expand" for="c-38286447">[1 more]</label></div><br/><div class="children"><div class="content">But std::list doesn&#x27;t invalidate iterators, so in situations where you can keep a reference back to whatever item you need, it&#x27;s quite nice.</div><br/></div></div></div></div><div id="38286576" class="c"><input type="checkbox" id="c-38286576" checked=""/><div class="controls bullet"><span class="by">mike_hock</span><span>|</span><a href="#38286426">prev</a><span>|</span><a href="#38286573">next</a><span>|</span><label class="collapse" for="c-38286576">[-]</label><label class="expand" for="c-38286576">[1 more]</label></div><br/><div class="children"><div class="content">Typo: The section about std::vector starts with &quot;<i>std::array</i> is a dynamically sized sequence container&quot; (lol).</div><br/></div></div><div id="38286573" class="c"><input type="checkbox" id="c-38286573" checked=""/><div class="controls bullet"><span class="by">foma-roje</span><span>|</span><a href="#38286576">prev</a><span>|</span><label class="collapse" for="c-38286573">[-]</label><label class="expand" for="c-38286573">[4 more]</label></div><br/><div class="children"><div class="content">An often missed c++ Container is std::deque, which has constant O(1) complexities in adding and removing from front and back, and accessing random elements. This is missing in the article.</div><br/><div id="38286628" class="c"><input type="checkbox" id="c-38286628" checked=""/><div class="controls bullet"><span class="by">mike_hock</span><span>|</span><a href="#38286573">parent</a><span>|</span><label class="collapse" for="c-38286628">[-]</label><label class="expand" for="c-38286628">[3 more]</label></div><br/><div class="children"><div class="content">Which only has a reasonable implementation in one of the three major stdlibs (libc++).</div><br/><div id="38287159" class="c"><input type="checkbox" id="c-38287159" checked=""/><div class="controls bullet"><span class="by">nly</span><span>|</span><a href="#38286573">root</a><span>|</span><a href="#38286628">parent</a><span>|</span><a href="#38287063">next</a><span>|</span><label class="collapse" for="c-38287159">[-]</label><label class="expand" for="c-38287159">[1 more]</label></div><br/><div class="children"><div class="content">Boosts implementation has a configurable block size.</div><br/></div></div><div id="38287063" class="c"><input type="checkbox" id="c-38287063" checked=""/><div class="controls bullet"><span class="by">mgaunard</span><span>|</span><a href="#38286573">root</a><span>|</span><a href="#38286628">parent</a><span>|</span><a href="#38287159">prev</a><span>|</span><label class="collapse" for="c-38287063">[-]</label><label class="expand" for="c-38287063">[1 more]</label></div><br/><div class="children"><div class="content">The libstdc++ one is also pretty good.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>