<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1734685260945" as="style"/><link rel="stylesheet" href="styles.css?v=1734685260945"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://win-vector.com/2024/12/19/kelly-cant-fail/">Kelly Can&#x27;t Fail</a> <span class="domain">(<a href="https://win-vector.com">win-vector.com</a>)</span></div><div class="subtext"><span>jmount</span> | <span>64 comments</span></div><br/><div><div id="42469365" class="c"><input type="checkbox" id="c-42469365" checked=""/><div class="controls bullet"><span class="by">ilya_m</span><span>|</span><a href="#42467756">next</a><span>|</span><label class="collapse" for="c-42469365">[-]</label><label class="expand" for="c-42469365">[1 more]</label></div><br/><div class="children"><div class="content">Beautiful, thanks for sharing it!<p>I think the portfolio argument is an unnecessary detour though. There&#x27;s a two-line proof by induction.<p>1. The payoff in the base case of (0,1) or (1,0) is 2.<p>2. If we are at (r,b), r &gt;=b , have $X, and stake (r-b)&#x2F;(r+b) on red, the payoff if we draw red and win is X * (1+(r-b)&#x2F;(r+b)) * 2^(r+b-1) &#x2F; (r+b-1 choose r-1) = X * 2^(r+b) * r &#x2F; ((r+b) * (r+b-1 choose r-1)) = X * 2^(r+b) &#x2F; (r+b choose r).<p>Similarly, if we draw black and lose, the payoff is X * (1-(r-b)&#x2F;(r+b)) * 2^(r+b-1) &#x2F; (r+b-1 choose r) = X * 2^(r+b) * b &#x2F; ((r+b) * (r+b-1 choose r)) = X * 2^(r+b) &#x2F; (r+b choose r). QED</div><br/></div></div><div id="42467756" class="c"><input type="checkbox" id="c-42467756" checked=""/><div class="controls bullet"><span class="by">pcthrowaway</span><span>|</span><a href="#42469365">prev</a><span>|</span><a href="#42467818">next</a><span>|</span><label class="collapse" for="c-42467756">[-]</label><label class="expand" for="c-42467756">[14 more]</label></div><br/><div class="children"><div class="content">Note that you need to be able to infinitely divide your stake for this to work out for you all the time.<p>For example, if the deck has 26 red cards on top, you&#x27;d end up dwindling your initial $1.00 stake to 0.000000134 before riding it back up to 9.08</div><br/><div id="42467915" class="c"><input type="checkbox" id="c-42467915" checked=""/><div class="controls bullet"><span class="by">boothby</span><span>|</span><a href="#42467756">parent</a><span>|</span><a href="#42467772">next</a><span>|</span><label class="collapse" for="c-42467915">[-]</label><label class="expand" for="c-42467915">[9 more]</label></div><br/><div class="children"><div class="content">If you start out with a $1e12 stake, you&#x27;re able to avoid catastrophic rounding errors even in the worst case.  There&#x27;s probably a life lesson here.</div><br/><div id="42468417" class="c"><input type="checkbox" id="c-42468417" checked=""/><div class="controls bullet"><span class="by">cbsks</span><span>|</span><a href="#42467756">root</a><span>|</span><a href="#42467915">parent</a><span>|</span><a href="#42468021">next</a><span>|</span><label class="collapse" for="c-42468417">[-]</label><label class="expand" for="c-42468417">[3 more]</label></div><br/><div class="children"><div class="content">My simulation shows that with a 52 card deck, if you round the bet to the nearest $.01 you will need to start with $35,522.08 to win a total of $293,601.28.<p>If you start with $35,522.07 or less, you will lose it all after 26 incorrect cards.</div><br/><div id="42468808" class="c"><input type="checkbox" id="c-42468808" checked=""/><div class="controls bullet"><span class="by">boothby</span><span>|</span><a href="#42467756">root</a><span>|</span><a href="#42468417">parent</a><span>|</span><a href="#42468767">next</a><span>|</span><label class="collapse" for="c-42468808">[-]</label><label class="expand" for="c-42468808">[1 more]</label></div><br/><div class="children"><div class="content">Nearest rounding does seem like a mistake here.  Rounding down is quite safe: rather than lose it all, you end up with at least 2^26 pennies.</div><br/></div></div></div></div><div id="42468021" class="c"><input type="checkbox" id="c-42468021" checked=""/><div class="controls bullet"><span class="by">fragmede</span><span>|</span><a href="#42467756">root</a><span>|</span><a href="#42467915">parent</a><span>|</span><a href="#42468417">prev</a><span>|</span><a href="#42467772">next</a><span>|</span><label class="collapse" for="c-42468021">[-]</label><label class="expand" for="c-42468021">[5 more]</label></div><br/><div class="children"><div class="content">Is the lesson: choose to be born to wealthy parents?</div><br/><div id="42468201" class="c"><input type="checkbox" id="c-42468201" checked=""/><div class="controls bullet"><span class="by">darkerside</span><span>|</span><a href="#42467756">root</a><span>|</span><a href="#42468021">parent</a><span>|</span><a href="#42467772">next</a><span>|</span><label class="collapse" for="c-42468201">[-]</label><label class="expand" for="c-42468201">[4 more]</label></div><br/><div class="children"><div class="content">Or is it to choose appropriate betting amounts based on your capacity for risk</div><br/><div id="42468373" class="c"><input type="checkbox" id="c-42468373" checked=""/><div class="controls bullet"><span class="by">laidoffamazon</span><span>|</span><a href="#42467756">root</a><span>|</span><a href="#42468201">parent</a><span>|</span><a href="#42468290">next</a><span>|</span><label class="collapse" for="c-42468373">[-]</label><label class="expand" for="c-42468373">[1 more]</label></div><br/><div class="children"><div class="content">I guess it then does follow that having rich parents does expand your capacity for risk!</div><br/></div></div><div id="42468290" class="c"><input type="checkbox" id="c-42468290" checked=""/><div class="controls bullet"><span class="by">Onavo</span><span>|</span><a href="#42467756">root</a><span>|</span><a href="#42468201">parent</a><span>|</span><a href="#42468373">prev</a><span>|</span><a href="#42468428">next</a><span>|</span><label class="collapse" for="c-42468290">[-]</label><label class="expand" for="c-42468290">[1 more]</label></div><br/><div class="children"><div class="content">IEEE-754 isn&#x27;t precise enough for my capacity :( I too need rich parents.</div><br/></div></div><div id="42468428" class="c"><input type="checkbox" id="c-42468428" checked=""/><div class="controls bullet"><span class="by">User23</span><span>|</span><a href="#42467756">root</a><span>|</span><a href="#42468201">parent</a><span>|</span><a href="#42468290">prev</a><span>|</span><a href="#42467772">next</a><span>|</span><label class="collapse" for="c-42468428">[-]</label><label class="expand" for="c-42468428">[1 more]</label></div><br/><div class="children"><div class="content">The lesson I&#x27;m taking away is &quot;learn math and how to use it.&quot;</div><br/></div></div></div></div></div></div></div></div><div id="42467772" class="c"><input type="checkbox" id="c-42467772" checked=""/><div class="controls bullet"><span class="by">jmount</span><span>|</span><a href="#42467756">parent</a><span>|</span><a href="#42467915">prev</a><span>|</span><a href="#42468411">next</a><span>|</span><label class="collapse" for="c-42467772">[-]</label><label class="expand" for="c-42467772">[1 more]</label></div><br/><div class="children"><div class="content">Very good point. I did some experiments and the system is very sensitive to any sort of quantization or rounding of bets. You get the expected value about the right place, but the variance goes up quickly. So in addition to your important case, things are a bit dicey in general.</div><br/></div></div><div id="42468411" class="c"><input type="checkbox" id="c-42468411" checked=""/><div class="controls bullet"><span class="by">tgma</span><span>|</span><a href="#42467756">parent</a><span>|</span><a href="#42467772">prev</a><span>|</span><a href="#42468365">next</a><span>|</span><label class="collapse" for="c-42468411">[-]</label><label class="expand" for="c-42468411">[1 more]</label></div><br/><div class="children"><div class="content">Yup, the dual would be saying Martingale can&#x27;t fail with infinite money.</div><br/></div></div><div id="42468365" class="c"><input type="checkbox" id="c-42468365" checked=""/><div class="controls bullet"><span class="by">kamaal</span><span>|</span><a href="#42467756">parent</a><span>|</span><a href="#42468411">prev</a><span>|</span><a href="#42467818">next</a><span>|</span><label class="collapse" for="c-42468365">[-]</label><label class="expand" for="c-42468365">[2 more]</label></div><br/><div class="children"><div class="content">&gt;&gt;Note that you need to be able to infinitely divide your stake for this to work out for you all the time.<p>This is what most people discover, you need to play like every toss of the coin(i.e tosses over a very long periods of time). In series, like the whole strategy for it to work as is. You can&#x27;t miss a toss. If you do you basically are missing out on either series of profitable tosses, or that one toss where you make a good return. If you draw the price vs time chart, like a renko chart you pretty much see a how any chart for any instrument would look.<p>Here is the catch. In the real world stock&#x2F;crypto&#x2F;forex trading scenario that means you basically have to take nearly trade. Other wise the strategy doesn&#x27;t work as good.<p>The deal about tossing coins to conduct this experiment is <i>you don&#x27;t change the coin during the experiment</i>. You don&#x27;t skip tosses, you don&#x27;t change anything at all. While you are trading all this means- You can&#x27;t change the stock that you are trading(Else you would be missing those phases where the instruments perform well, and will likely keep landing into situations with other instruments where its performing bad), you can&#x27;t miss trades, and of course you have to keep at these for very long periods of time to work.<p>Needless to say this is not for insanely consistent. Doing this day after day can also be draining on your mental and physical health, where there is money there is stress. You can&#x27;t do this for long basically.</div><br/><div id="42468764" class="c"><input type="checkbox" id="c-42468764" checked=""/><div class="controls bullet"><span class="by">teo_zero</span><span>|</span><a href="#42467756">root</a><span>|</span><a href="#42468365">parent</a><span>|</span><a href="#42467818">next</a><span>|</span><label class="collapse" for="c-42468764">[-]</label><label class="expand" for="c-42468764">[1 more]</label></div><br/><div class="children"><div class="content">While I don&#x27;t agree on nearly anything you stated, I enjoyed your prose: I suppose you left out words here and there as a metaphorical proof of your claim that you can&#x27;t miss a single toss, didn&#x27;t you?</div><br/></div></div></div></div></div></div><div id="42467818" class="c"><input type="checkbox" id="c-42467818" checked=""/><div class="controls bullet"><span class="by">fancy_pantser</span><span>|</span><a href="#42467756">prev</a><span>|</span><a href="#42467834">next</a><span>|</span><label class="collapse" for="c-42467818">[-]</label><label class="expand" for="c-42467818">[3 more]</label></div><br/><div class="children"><div class="content">A very similar card game played by deciding when to stop flipping cards from a deck where red is $1 and black is −$1 as described in Timothy Falcon’s quantitative-finance interview book (problem #14). Gwern describes it and also writes code to prove out an optimal stopping strategy: <a href="https:&#x2F;&#x2F;gwern.net&#x2F;problem-14" rel="nofollow">https:&#x2F;&#x2F;gwern.net&#x2F;problem-14</a></div><br/><div id="42468277" class="c"><input type="checkbox" id="c-42468277" checked=""/><div class="controls bullet"><span class="by">snthpy</span><span>|</span><a href="#42467818">parent</a><span>|</span><a href="#42468005">next</a><span>|</span><label class="collapse" for="c-42468277">[-]</label><label class="expand" for="c-42468277">[1 more]</label></div><br/><div class="children"><div class="content">Nice!<p>Only quibble i have is that black should be +$1 and red -$1 to follow standard finance conventions, i.e. be in the &quot;black&quot; or &quot;red&quot;.</div><br/></div></div><div id="42468005" class="c"><input type="checkbox" id="c-42468005" checked=""/><div class="controls bullet"><span class="by">jmount</span><span>|</span><a href="#42467818">parent</a><span>|</span><a href="#42468277">prev</a><span>|</span><a href="#42467834">next</a><span>|</span><label class="collapse" for="c-42468005">[-]</label><label class="expand" for="c-42468005">[1 more]</label></div><br/><div class="children"><div class="content">That is a nice game and writeup.</div><br/></div></div></div></div><div id="42467834" class="c"><input type="checkbox" id="c-42467834" checked=""/><div class="controls bullet"><span class="by">JohnMakin</span><span>|</span><a href="#42467818">prev</a><span>|</span><a href="#42467272">next</a><span>|</span><label class="collapse" for="c-42467834">[-]</label><label class="expand" for="c-42467834">[8 more]</label></div><br/><div class="children"><div class="content">Kelly criterion is one of my favorite game theory concepts that is used heavily in bankroll management of professional gamblers, particularly poker players. It is a good way to help someone understand how you can manage your finances and stakes in a way that allows you to climb steadily forward without risking too much or any ruin, but is frequently misapplied in that space. The problem is kelly deals with binary results, and often situations in which this is applied where the results are not binary (a criteria for applying this) you can see skewed results that look almost right but not quite so, depending on how you view the math</div><br/><div id="42467902" class="c"><input type="checkbox" id="c-42467902" checked=""/><div class="controls bullet"><span class="by">amluto</span><span>|</span><a href="#42467834">parent</a><span>|</span><a href="#42468559">next</a><span>|</span><label class="collapse" for="c-42467902">[-]</label><label class="expand" for="c-42467902">[3 more]</label></div><br/><div class="children"><div class="content">&gt; particularly poker players<p>The Kelly criterion seems excellent for many forms of gambling, but poker seems like it could be an exception: in poker, you’re playing against other players, so the utility of a given distribution of chips seems like it ought to be more complicated than just the number of chips you have.<p>(I’m not a poker player.)</div><br/><div id="42468793" class="c"><input type="checkbox" id="c-42468793" checked=""/><div class="controls bullet"><span class="by">tempestn</span><span>|</span><a href="#42467834">root</a><span>|</span><a href="#42467902">parent</a><span>|</span><a href="#42468057">next</a><span>|</span><label class="collapse" for="c-42468793">[-]</label><label class="expand" for="c-42468793">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s used for bankroll management (basically deciding what stakes to play) rather than for sizing bets within a particular game.</div><br/></div></div></div></div><div id="42468559" class="c"><input type="checkbox" id="c-42468559" checked=""/><div class="controls bullet"><span class="by">peter_retief</span><span>|</span><a href="#42467834">parent</a><span>|</span><a href="#42467902">prev</a><span>|</span><a href="#42467965">next</a><span>|</span><label class="collapse" for="c-42468559">[-]</label><label class="expand" for="c-42468559">[3 more]</label></div><br/><div class="children"><div class="content">Could this work with roulette betting on color?
Seems like you could spend a lot of time not winning or losing</div><br/><div id="42468729" class="c"><input type="checkbox" id="c-42468729" checked=""/><div class="controls bullet"><span class="by">plorkyeran</span><span>|</span><a href="#42467834">root</a><span>|</span><a href="#42468559">parent</a><span>|</span><a href="#42467965">next</a><span>|</span><label class="collapse" for="c-42468729">[-]</label><label class="expand" for="c-42468729">[2 more]</label></div><br/><div class="children"><div class="content">Roulette results are uncorrelated and you have the exact same chance of winning each time, so the Kelly criterion isn’t applicable. Betting on a color has a negative edge and you don’t have the option of taking the house’s side, so it just tells you the obvious thing that you should bet zero.</div><br/><div id="42469336" class="c"><input type="checkbox" id="c-42469336" checked=""/><div class="controls bullet"><span class="by">dmurray</span><span>|</span><a href="#42467834">root</a><span>|</span><a href="#42468729">parent</a><span>|</span><a href="#42467965">next</a><span>|</span><label class="collapse" for="c-42469336">[-]</label><label class="expand" for="c-42469336">[1 more]</label></div><br/><div class="children"><div class="content">&gt; exact same chance of winning each time, so the Kelly criterion isn’t applicable.<p>Actually, the main assumption that leads to the Kelly criterion is that you will have future opportunities to bet with the same edge, not constrained by the amount.<p>For example, if you knew this was your last profitable betting opportunity, to maximise your expected value you should bet your entire stake.<p>I&#x27;m slightly surprised it leads to such a nice result for this game - I don&#x27;t see a claim that this is the optimal strategy for maximizing EV zero variance is great, but having more money is also great.<p>Of course you are right about roulette and, if you are playing standard casino roulette against the house, the optimal strategy is not to play. But that&#x27;s not because bets are uncorrelated, it&#x27;s because they are all negative value.</div><br/></div></div></div></div></div></div><div id="42467965" class="c"><input type="checkbox" id="c-42467965" checked=""/><div class="controls bullet"><span class="by">bloodyplonker22</span><span>|</span><a href="#42467834">parent</a><span>|</span><a href="#42468559">prev</a><span>|</span><a href="#42467272">next</a><span>|</span><label class="collapse" for="c-42467965">[-]</label><label class="expand" for="c-42467965">[1 more]</label></div><br/><div class="children"><div class="content">You are right that Kelly criterion deals with binary results. This won&#x27;t work for poker. In poker, we use expected value because wins and losses are not binary because of the amount you win or lose. Once you figure out your approximate EV, you use a variance calculator in addition to that (example: <a href="https:&#x2F;&#x2F;www.primedope.com&#x2F;poker-variance-calculator&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.primedope.com&#x2F;poker-variance-calculator&#x2F;</a>) to see how likely and how much it is you will be winning over a certain number of hands in the long run.</div><br/></div></div></div></div><div id="42467272" class="c"><input type="checkbox" id="c-42467272" checked=""/><div class="controls bullet"><span class="by">barbegal</span><span>|</span><a href="#42467834">prev</a><span>|</span><a href="#42467116">next</a><span>|</span><label class="collapse" for="c-42467272">[-]</label><label class="expand" for="c-42467272">[4 more]</label></div><br/><div class="children"><div class="content">It would have been a better demo if reduced to more manageable numbers e.g. a deck of 2 black and 2 red cards.<p>Turn 1 r = b so no bet<p>Turn 2 bet 1&#x2F;3 on whichever card wasn&#x27;t revealed in turn 1.<p>Turn 3 either you were wrong on turn 2 and you now have 2&#x2F;3 of your stake but you know the colour of the next two cards so you can double your stake each time to end up with 4&#x2F;3 after turn 3 or you were right and you have 4&#x2F;3 of your stake but have one of each red or black left so you don&#x27;t bet this turn.<p>Turn 4 you know the colour of the final card so you double your money to 8&#x2F;3 of your original stake.<p>And then the exercise to the reader is to prove optimality (which is fairly straightforward but I don&#x27;t believe there is a short proof)</div><br/><div id="42467429" class="c"><input type="checkbox" id="c-42467429" checked=""/><div class="controls bullet"><span class="by">libraryofbabel</span><span>|</span><a href="#42467272">parent</a><span>|</span><a href="#42467312">next</a><span>|</span><label class="collapse" for="c-42467429">[-]</label><label class="expand" for="c-42467429">[1 more]</label></div><br/><div class="children"><div class="content">Yes. Although four cards has only one nontrivial branch, on turn 3. So, start out with the four cards example, and then show tree diagrams for the 5 and 6 cards cases (still manageable numbers) to build intuition for induction to the general case.</div><br/></div></div><div id="42467312" class="c"><input type="checkbox" id="c-42467312" checked=""/><div class="controls bullet"><span class="by">stevage</span><span>|</span><a href="#42467272">parent</a><span>|</span><a href="#42467429">prev</a><span>|</span><a href="#42467997">next</a><span>|</span><label class="collapse" for="c-42467312">[-]</label><label class="expand" for="c-42467312">[1 more]</label></div><br/><div class="children"><div class="content">Agreed, I could follow the general argument but not enough to be convinced about why the result is exactly the same regardless of the order of cards.</div><br/></div></div></div></div><div id="42467116" class="c"><input type="checkbox" id="c-42467116" checked=""/><div class="controls bullet"><span class="by">hawkjo</span><span>|</span><a href="#42467272">prev</a><span>|</span><a href="#42467218">next</a><span>|</span><label class="collapse" for="c-42467116">[-]</label><label class="expand" for="c-42467116">[10 more]</label></div><br/><div class="children"><div class="content">Very cool to see no variance in the outcome. But that also makes it feel like there should be a strategy with better expected return due to the unique problem structure. Do we know if the Kelly strategy is optimal here?</div><br/><div id="42468243" class="c"><input type="checkbox" id="c-42468243" checked=""/><div class="controls bullet"><span class="by">travisjungroth</span><span>|</span><a href="#42467116">parent</a><span>|</span><a href="#42467239">next</a><span>|</span><label class="collapse" for="c-42468243">[-]</label><label class="expand" for="c-42468243">[3 more]</label></div><br/><div class="children"><div class="content">I have a feeling it’s the highest EV. I tried a strategy of flipping all the cards until there’s only one color left and then betting it all every time. Ran a million trials and got 9.08.<p>I was thinking these are very different strategies, but they’re not exactly. The Kelly strategy does the same thing when there’s only one color left. The difference is this strategy does nothing before that point.<p>Still, they feel like limit cases. Betting it all with only one color left is the only right move, so it’s what you do before that. Nothing and Kelly seem like the only good strategies.</div><br/><div id="42468692" class="c"><input type="checkbox" id="c-42468692" checked=""/><div class="controls bullet"><span class="by">foota</span><span>|</span><a href="#42467116">root</a><span>|</span><a href="#42468243">parent</a><span>|</span><a href="#42467239">next</a><span>|</span><label class="collapse" for="c-42468692">[-]</label><label class="expand" for="c-42468692">[2 more]</label></div><br/><div class="children"><div class="content">Ah, but these aren&#x27;t the same. The Kelly strategy has zero variance, whereas this strategy likely has very high variance.<p>It would be interesting to do the math and show why they&#x27;re equal. It seems like you should be able to make the same sort of portfolio probability argument.</div><br/><div id="42468908" class="c"><input type="checkbox" id="c-42468908" checked=""/><div class="controls bullet"><span class="by">foota</span><span>|</span><a href="#42467116">root</a><span>|</span><a href="#42468692">parent</a><span>|</span><a href="#42467239">next</a><span>|</span><label class="collapse" for="c-42468908">[-]</label><label class="expand" for="c-42468908">[1 more]</label></div><br/><div class="children"><div class="content">To start, your minimum return is 2x, and depending on how many cards of a single color are left at the end, you get a return of 2^N. You could take the summation of those N card returns, times the probability of each, and that must come out to 9.08 on average.<p>I guess the number of possible arrangements of cards with N of one color remaining is... The number of permutations of N times 2 times the number of permutations of 52 minus N times 26 choose N?<p>Ah, yes this works, you can see it here: <a href="https:&#x2F;&#x2F;www.wolframalpha.com&#x2F;input?i=%28summation+of+N%21+*+%2852+-+N%29%21*+%2826+choose+N%29+*+2%5EN%2F52%21+from+N%3D0+to+26" rel="nofollow">https:&#x2F;&#x2F;www.wolframalpha.com&#x2F;input?i=%28summation+of+N%21+*+...</a>.<p>That is: (summation of N! * (52 - N)!* (26 choose N) * 2^N&#x2F;52! from N=0 to 26 (for some reason the * 2 for different suits was over counting, so I removed it. Not sure why? Also it seems like it should be from 1 to 26, but that also doesn&#x27;t give the right answer, so something is whack)</div><br/></div></div></div></div></div></div><div id="42467239" class="c"><input type="checkbox" id="c-42467239" checked=""/><div class="controls bullet"><span class="by">rahimnathwani</span><span>|</span><a href="#42467116">parent</a><span>|</span><a href="#42468243">prev</a><span>|</span><a href="#42467134">next</a><span>|</span><label class="collapse" for="c-42467239">[-]</label><label class="expand" for="c-42467239">[3 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>  Do we know if the Kelly strategy is optimal here?
</code></pre>
What do you mean by optimal? Do you mean you&#x27;re willing to risk going bankrupt, if it means a higher expected value?</div><br/><div id="42467969" class="c"><input type="checkbox" id="c-42467969" checked=""/><div class="controls bullet"><span class="by">scotty79</span><span>|</span><a href="#42467116">root</a><span>|</span><a href="#42467239">parent</a><span>|</span><a href="#42467134">next</a><span>|</span><label class="collapse" for="c-42467969">[-]</label><label class="expand" for="c-42467969">[2 more]</label></div><br/><div class="children"><div class="content">Surely there&#x27;s some space between risking to go bankrupt and risking of getting less than 9.08 return guaranteed by Kelly strategy.<p>If you are willing to take some risk in exchange for possibility of higher payout just bet a bit more then Kelly recommends. That&#x27;s your &quot;optimal&quot; strategy for the amount of risk you are willing to take. I imagine it&#x27;s expected return is the same as Kelly and calculating it&#x27;s variance is left as the exercise for the reader.</div><br/><div id="42469364" class="c"><input type="checkbox" id="c-42469364" checked=""/><div class="controls bullet"><span class="by">rahimnathwani</span><span>|</span><a href="#42467116">root</a><span>|</span><a href="#42467969">parent</a><span>|</span><a href="#42467134">next</a><span>|</span><label class="collapse" for="c-42469364">[-]</label><label class="expand" for="c-42469364">[1 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>  I imagine it&#x27;s expected return is the same as Kelly
</code></pre>
Given two options with the same expected return, most people would prefer the lower variance.<p>Accepting higher variance with no increase in expected return has a name: gambling.</div><br/></div></div></div></div></div></div><div id="42467134" class="c"><input type="checkbox" id="c-42467134" checked=""/><div class="controls bullet"><span class="by">jmount</span><span>|</span><a href="#42467116">parent</a><span>|</span><a href="#42467239">prev</a><span>|</span><a href="#42467299">next</a><span>|</span><label class="collapse" for="c-42467134">[-]</label><label class="expand" for="c-42467134">[1 more]</label></div><br/><div class="children"><div class="content">The book claims it is optimal for a set of strategies they called &quot;sensible.&quot; I didn&#x27;t think the argument flowed as well as the zero variance part of the proof, so I didn&#x27;t work it in. I think the source also hinted at a game-theory proof as they called the sub-strategies in the portfolio &quot;pure strategies.&quot;</div><br/></div></div><div id="42467299" class="c"><input type="checkbox" id="c-42467299" checked=""/><div class="controls bullet"><span class="by">barbegal</span><span>|</span><a href="#42467116">parent</a><span>|</span><a href="#42467134">prev</a><span>|</span><a href="#42468284">next</a><span>|</span><label class="collapse" for="c-42467299">[-]</label><label class="expand" for="c-42467299">[1 more]</label></div><br/><div class="children"><div class="content">It is optimal for expected returns yes.</div><br/></div></div><div id="42468284" class="c"><input type="checkbox" id="c-42468284" checked=""/><div class="controls bullet"><span class="by">lupire</span><span>|</span><a href="#42467116">parent</a><span>|</span><a href="#42467299">prev</a><span>|</span><a href="#42467218">next</a><span>|</span><label class="collapse" for="c-42468284">[-]</label><label class="expand" for="c-42468284">[1 more]</label></div><br/><div class="children"><div class="content">The Kelly criterion <i>is</i> the strategy with better return due to the uniquely problem structure.</div><br/></div></div></div></div><div id="42467218" class="c"><input type="checkbox" id="c-42467218" checked=""/><div class="controls bullet"><span class="by">raydiak</span><span>|</span><a href="#42467116">prev</a><span>|</span><a href="#42467929">next</a><span>|</span><label class="collapse" for="c-42467218">[-]</label><label class="expand" for="c-42467218">[2 more]</label></div><br/><div class="children"><div class="content">As a guy named Kelly, I appreciate the vote of confidence!</div><br/><div id="42468011" class="c"><input type="checkbox" id="c-42468011" checked=""/><div class="controls bullet"><span class="by">pvg</span><span>|</span><a href="#42467218">parent</a><span>|</span><a href="#42467929">next</a><span>|</span><label class="collapse" for="c-42468011">[-]</label><label class="expand" for="c-42468011">[1 more]</label></div><br/><div class="children"><div class="content">I think you&#x27;re underselling it a bit, it&#x27;s a decree of confidence rather than a mere vote.</div><br/></div></div></div></div><div id="42467929" class="c"><input type="checkbox" id="c-42467929" checked=""/><div class="controls bullet"><span class="by">amluto</span><span>|</span><a href="#42467218">prev</a><span>|</span><a href="#42467484">next</a><span>|</span><label class="collapse" for="c-42467929">[-]</label><label class="expand" for="c-42467929">[1 more]</label></div><br/><div class="children"><div class="content">&gt; The problem and solution appear to come from Thomas Cover.<p>I don’t recall this specific example, but I learned about the Kelly criterion in a class that Thomas Cover taught. He was one of my favorite teachers, and any discussion with him was guaranteed to be interesting and worthwhile. RIP.</div><br/></div></div><div id="42467484" class="c"><input type="checkbox" id="c-42467484" checked=""/><div class="controls bullet"><span class="by">malisper</span><span>|</span><a href="#42467929">prev</a><span>|</span><a href="#42467039">next</a><span>|</span><label class="collapse" for="c-42467484">[-]</label><label class="expand" for="c-42467484">[2 more]</label></div><br/><div class="children"><div class="content">I need to do some Math, but I wonder if there&#x27;s a better strategy than Kelly betting. An assumption made for Kelly betting is the bets are independent of each other. That&#x27;s not the case in the problem given.<p>After making a bet, you gain information about the contents of the rest of the deck of cards. I could see it being possible to do better by pricing in that information into your bet.</div><br/><div id="42467912" class="c"><input type="checkbox" id="c-42467912" checked=""/><div class="controls bullet"><span class="by">amluto</span><span>|</span><a href="#42467484">parent</a><span>|</span><a href="#42467039">next</a><span>|</span><label class="collapse" for="c-42467912">[-]</label><label class="expand" for="c-42467912">[1 more]</label></div><br/><div class="children"><div class="content">But the information gained in this game is independent of your bet.  The multi-armed bandit problem is a famous example of the opposite situation.</div><br/></div></div></div></div><div id="42467039" class="c"><input type="checkbox" id="c-42467039" checked=""/><div class="controls bullet"><span class="by">Vecr</span><span>|</span><a href="#42467484">prev</a><span>|</span><a href="#42467280">next</a><span>|</span><label class="collapse" for="c-42467039">[-]</label><label class="expand" for="c-42467039">[2 more]</label></div><br/><div class="children"><div class="content">Checks out with multiple RNG seeds.<p>It shouldn&#x27;t be a problem because the RNG is advanced each run. Might save someone a check though.</div><br/><div id="42467079" class="c"><input type="checkbox" id="c-42467079" checked=""/><div class="controls bullet"><span class="by">jmount</span><span>|</span><a href="#42467039">parent</a><span>|</span><a href="#42467280">next</a><span>|</span><label class="collapse" for="c-42467079">[-]</label><label class="expand" for="c-42467079">[1 more]</label></div><br/><div class="children"><div class="content">I love that. Gaming the seed is always a possibility in demos.</div><br/></div></div></div></div><div id="42467280" class="c"><input type="checkbox" id="c-42467280" checked=""/><div class="controls bullet"><span class="by">siavosh</span><span>|</span><a href="#42467039">prev</a><span>|</span><a href="#42466864">next</a><span>|</span><label class="collapse" for="c-42467280">[-]</label><label class="expand" for="c-42467280">[2 more]</label></div><br/><div class="children"><div class="content">Can anyone comment on the universal portfolio article linked in the conclusion? Asking for a friend.</div><br/><div id="42467465" class="c"><input type="checkbox" id="c-42467465" checked=""/><div class="controls bullet"><span class="by">robbomacrae</span><span>|</span><a href="#42467280">parent</a><span>|</span><a href="#42466864">next</a><span>|</span><label class="collapse" for="c-42467465">[-]</label><label class="expand" for="c-42467465">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a theory on how to optimally rebalance your investment portfolio every day.<p>Original paper by Thomas Cover: <a href="https:&#x2F;&#x2F;isl.stanford.edu&#x2F;~cover&#x2F;papers&#x2F;paper93.pdf" rel="nofollow">https:&#x2F;&#x2F;isl.stanford.edu&#x2F;~cover&#x2F;papers&#x2F;paper93.pdf</a><p>A good breakdown with links to code examples by Andy Jones: <a href="https:&#x2F;&#x2F;andrewcharlesjones.github.io&#x2F;journal&#x2F;universal-portfolios.html" rel="nofollow">https:&#x2F;&#x2F;andrewcharlesjones.github.io&#x2F;journal&#x2F;universal-portf...</a></div><br/></div></div></div></div><div id="42466864" class="c"><input type="checkbox" id="c-42466864" checked=""/><div class="controls bullet"><span class="by">dado3212</span><span>|</span><a href="#42467280">prev</a><span>|</span><a href="#42468550">next</a><span>|</span><label class="collapse" for="c-42466864">[-]</label><label class="expand" for="c-42466864">[5 more]</label></div><br/><div class="children"><div class="content">Very cool writeup, would’ve benefited from some LaTeX formatting.</div><br/><div id="42466958" class="c"><input type="checkbox" id="c-42466958" checked=""/><div class="controls bullet"><span class="by">jmount</span><span>|</span><a href="#42466864">parent</a><span>|</span><a href="#42466926">next</a><span>|</span><label class="collapse" for="c-42466958">[-]</label><label class="expand" for="c-42466958">[3 more]</label></div><br/><div class="children"><div class="content">Thank you, and sorry. The Wordpress&#x2F;Markdown path seems to be getting worse over time.</div><br/><div id="42467862" class="c"><input type="checkbox" id="c-42467862" checked=""/><div class="controls bullet"><span class="by">smcin</span><span>|</span><a href="#42466864">root</a><span>|</span><a href="#42466958">parent</a><span>|</span><a href="#42466926">next</a><span>|</span><label class="collapse" for="c-42467862">[-]</label><label class="expand" for="c-42467862">[2 more]</label></div><br/><div class="children"><div class="content">How is the Wordpress&#x2F;Markdown path getting worse over time?</div><br/><div id="42468329" class="c"><input type="checkbox" id="c-42468329" checked=""/><div class="controls bullet"><span class="by">jmount</span><span>|</span><a href="#42466864">root</a><span>|</span><a href="#42467862">parent</a><span>|</span><a href="#42466926">next</a><span>|</span><label class="collapse" for="c-42468329">[-]</label><label class="expand" for="c-42468329">[1 more]</label></div><br/><div class="children"><div class="content">Mathjax used to be available more places. Jupyter used to respect spacing around h2 labels. Things like that.</div><br/></div></div></div></div></div></div></div></div><div id="42468550" class="c"><input type="checkbox" id="c-42468550" checked=""/><div class="controls bullet"><span class="by">andrewprock</span><span>|</span><a href="#42466864">prev</a><span>|</span><a href="#42467809">next</a><span>|</span><label class="collapse" for="c-42468550">[-]</label><label class="expand" for="c-42468550">[2 more]</label></div><br/><div class="children"><div class="content">In practice, there are a number of factors which make using Kelly more difficult than in toy examples.<p>What is your bankroll? Cash on hand? Total net worth? Liquid net work? Future earned income?<p>Depending on the size of your bankroll, a number of factors come in to play. For example, if your bankroll is $100 and you lose it all it&#x27;s typically not a big deal. If you have a $1 million bankroll, then you are likely more adverse to risking it.<p>What is the expected value? Is it known? Is it stationary? Is the game honest?<p>Depending on the statistical profile of your expected value, you are going to have to make significant adjustments to how you approach bet sizing. In domains where you can only estimate your EV, and which are rife with cheats (e.g. poker), you need to size your wagers under significant uncertainty.<p>What bet sizes are available?<p>In practice, you won&#x27;t have a continuous range of bet sizes you can make. You will typically have discrete bet sizes within a fixed range, say $5-$500 in increments of $5 or $25. If your bankroll falls to low you will be shut out of the game. If your bankroll gets too high, you will no longer be able to maximize your returns.<p>At the end of the day, professional gamblers are often wagering at half-kelly, or even at quarter-kelly, due in large part to all these complexities and others.</div><br/><div id="42468913" class="c"><input type="checkbox" id="c-42468913" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42468550">parent</a><span>|</span><a href="#42467809">next</a><span>|</span><label class="collapse" for="c-42468913">[-]</label><label class="expand" for="c-42468913">[1 more]</label></div><br/><div class="children"><div class="content">&gt; In practice, you won&#x27;t have a continuous range of bet sizes you can make.<p>You may also be required to pay for the privilege of placing a bet (spread and commissions in trading; the rake at a casino table).</div><br/></div></div></div></div><div id="42467809" class="c"><input type="checkbox" id="c-42467809" checked=""/><div class="controls bullet"><span class="by">ed-209</span><span>|</span><a href="#42468550">prev</a><span>|</span><a href="#42468228">next</a><span>|</span><label class="collapse" for="c-42467809">[-]</label><label class="expand" for="c-42467809">[2 more]</label></div><br/><div class="children"><div class="content">why use a static seed on the random generator and could that be making this appear more interesting than it might otherwise?</div><br/><div id="42467828" class="c"><input type="checkbox" id="c-42467828" checked=""/><div class="controls bullet"><span class="by">jfengel</span><span>|</span><a href="#42467809">parent</a><span>|</span><a href="#42468228">next</a><span>|</span><label class="collapse" for="c-42467828">[-]</label><label class="expand" for="c-42467828">[1 more]</label></div><br/><div class="children"><div class="content">The idea is sound. The static seed is presumably so the results are repeatable, but it works for true randomness. (Assuming you were permitted to do it this way, which you wouldn&#x27;t be.)</div><br/></div></div></div></div><div id="42468228" class="c"><input type="checkbox" id="c-42468228" checked=""/><div class="controls bullet"><span class="by">lupire</span><span>|</span><a href="#42467809">prev</a><span>|</span><a href="#42468048">next</a><span>|</span><label class="collapse" for="c-42468228">[-]</label><label class="expand" for="c-42468228">[1 more]</label></div><br/><div class="children"><div class="content">Intuition for the bet size:<p>When the deck has d cards left, it is sensible to make d bets of 1&#x2F;d your stack,  where each bet is that one specific card is next. If there are r reds and b=r+e blues, r of these bets simply cancel out r other bets, leaving e (times 1&#x2F;d) remaining to be a nontrivial bet.</div><br/></div></div><div id="42468048" class="c"><input type="checkbox" id="c-42468048" checked=""/><div class="controls bullet"><span class="by">lupire</span><span>|</span><a href="#42468228">prev</a><span>|</span><a href="#42467958">next</a><span>|</span><label class="collapse" for="c-42468048">[-]</label><label class="expand" for="c-42468048">[1 more]</label></div><br/><div class="children"><div class="content">Corollaries, by considering different deck shufflings, such as perfectly interleaved as perfectly separated:<p><pre><code>  9.08 ~
         52&#x2F;52 × 52&#x2F;51 × 50&#x2F;50 ÷ 50&#x2F;49 × ... 2&#x2F;2 × 2&#x2F;1 
       = 52&#x2F;51 × 50&#x2F;49 × ... × 2&#x2F;1 
       = 2^52 × 26!² &#x2F; 52!
       = (52&#x2F;52 × 50&#x2F;51 × ... ×  2&#x2F;27) × (52&#x2F;26 × 50&#x2F;25 × ... × 2&#x2F;1)
</code></pre>
and these equalities can also be directly verified algebraically<p>This also points to a non-&quot;many worlds&quot;&#x2F;portfolio version of the prod of zero-variance.<p>Every bet is e&#x2F;d, where e is current edge and d is current deck size.
So every outcome multiplies the stack by (d + e × (-1)^i)&#x2F;d, where is ±1, depending on win or lose.<p>Note that the product of all the values of d is constant, so we can ignore the denominator.<p>Since we know (from the OP proof) that the product of these numbers is constant for all shuffles of the deck, we can split a shuffled deck anywhere such that both parts are balanced red=blue, and the total (multiplicative) return over each part of the deck is constant across all shuffling of that part of the deck. (There are at least two ways to prove this part!)<p>This is gives a further hint toward another fascinating fact: over any span of the deck between points where the deck is balanced, the numerators of the bet results double-cover all the even numbers between the starting and ending deck size.<p>To see why:<p>* A loss after a loss has a numerator (deck minus edge) of 2 less than the previous bet, as the deck size decreased by 1 and the edge has inccreased by 1.<p>* A win after a win also has a numerator (deck plus edge) of 2 less than the previous bet, as the deck size decreased by 1 and the edge has decreased by 1.<p>* A win after a loss, causes a big swing in the numerator, exactly back to the largest not yet double-covered numerator that started the streak that just ended. Then the new win streak continues making the second cover of even numerators, until... a loss after a win jumps the numerator back to continuing the sequence of decreasing even numberators, which will get their second cover later when the later wins come.<p>Since the deck is balanced, the number of wins always equals the number of losses, as long as we consider the 0 wager on a balanced subdeck to be a loss, since it increases the edge like non-degenerate losses do.<p>(When the deck is balanced, edge is 0, so the return of no-bet is same as a win is same as a loss)<p>You can visualize the numerator changes like so: a crane is driving from 52 to 0. Its arm is pointing either forward or backward, and there is a counterweight of the same length pointing in the opposite direction. At each step, the crane arm is either pointing toward 0 and stretches another step toward 0, or points backward to 52 and shrinks (toward  0 milestone and toward 0 arm length), or it swings to the other direction. Whenever the crane stretches toward 0, the counterweight stretches backward, its end not moving relative to the ground.<p>Because the deck is balanced at start and empty deck is balanced, the crane starts and ends with a 0-stretch arm. 
The front side is either the frame arm stepping 2 steps forward at a time relative to the ground, or holding still while the backside crane arm shrinks closer, and the crane arm occasionally flips back and forth pointing forward or ackward. And vice versa for the counterweight.<p>Over the course of the drive, the crane arm end reaches every even milestone once pointing forward and once again pointing backward.</div><br/></div></div><div id="42467958" class="c"><input type="checkbox" id="c-42467958" checked=""/><div class="controls bullet"><span class="by">moonlion_eth</span><span>|</span><a href="#42468048">prev</a><span>|</span><a href="#42467726">next</a><span>|</span><label class="collapse" for="c-42467958">[-]</label><label class="expand" for="c-42467958">[2 more]</label></div><br/><div class="children"><div class="content">I was like &quot;oooh fun a card game&quot; then was like &quot;oh shit I&#x27;m too dumb for this math&quot;</div><br/><div id="42468239" class="c"><input type="checkbox" id="c-42468239" checked=""/><div class="controls bullet"><span class="by">IAmGraydon</span><span>|</span><a href="#42467958">parent</a><span>|</span><a href="#42467726">next</a><span>|</span><label class="collapse" for="c-42468239">[-]</label><label class="expand" for="c-42468239">[1 more]</label></div><br/><div class="children"><div class="content">You aren&#x27;t dumb. You just don&#x27;t have enough exposure to the prerequisites.</div><br/></div></div></div></div><div id="42467726" class="c"><input type="checkbox" id="c-42467726" checked=""/><div class="controls bullet"><span class="by">tooblies</span><span>|</span><a href="#42467958">prev</a><span>|</span><label class="collapse" for="c-42467726">[-]</label><label class="expand" for="c-42467726">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s really disappointing that the code examples aren&#x27;t given in PyGyat.</div><br/></div></div></div></div></div></div></div></body></html>