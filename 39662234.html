<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1710147663537" as="style"/><link rel="stylesheet" href="styles.css?v=1710147663537"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://motherduck.com/blog/perf-is-not-enough/">Perf Is Not Enough</a> <span class="domain">(<a href="https://motherduck.com">motherduck.com</a>)</span></div><div class="subtext"><span>shubhamjain</span> | <span>31 comments</span></div><br/><div><div id="39664595" class="c"><input type="checkbox" id="c-39664595" checked=""/><div class="controls bullet"><span class="by">jrflowers</span><span>|</span><a href="#39664960">next</a><span>|</span><label class="collapse" for="c-39664595">[-]</label><label class="expand" for="c-39664595">[1 more]</label></div><br/><div class="children"><div class="content">&gt;It takes about 4.5 hours for me to go door to door from my house in Seattle to our office in San Francisco<p>Not enough founders are moving at one hundred and seventy nine miles per hour anymore but I guess that’s what happens when the fed jacks up interest rates</div><br/></div></div><div id="39664960" class="c"><input type="checkbox" id="c-39664960" checked=""/><div class="controls bullet"><span class="by">xt00</span><span>|</span><a href="#39664595">prev</a><span>|</span><a href="#39664458">next</a><span>|</span><label class="collapse" for="c-39664960">[-]</label><label class="expand" for="c-39664960">[4 more]</label></div><br/><div class="children"><div class="content">This sounds like a company organizational problem — if the ultimate goal is to get people to use your cloud and provide value, then why would you have metrics that diverge from what the customer sees as the important things? There should be somebody at Google actively talking to customers about what problems they have and communicating that to the engineers so they know what to improve. The organization should be structured so the engineers get the metrics they need or make it part of their job description to make the metrics.</div><br/><div id="39665116" class="c"><input type="checkbox" id="c-39665116" checked=""/><div class="controls bullet"><span class="by">nightpool</span><span>|</span><a href="#39664960">parent</a><span>|</span><a href="#39664458">next</a><span>|</span><label class="collapse" for="c-39665116">[-]</label><label class="expand" for="c-39665116">[3 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Seeing_Like_a_State" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Seeing_Like_a_State</a></div><br/><div id="39665207" class="c"><input type="checkbox" id="c-39665207" checked=""/><div class="controls bullet"><span class="by">chrisandchris</span><span>|</span><a href="#39664960">root</a><span>|</span><a href="#39665116">parent</a><span>|</span><a href="#39664458">next</a><span>|</span><label class="collapse" for="c-39665207">[-]</label><label class="expand" for="c-39665207">[2 more]</label></div><br/><div class="children"><div class="content">From what I read here on HN, this book describes Google.</div><br/><div id="39665923" class="c"><input type="checkbox" id="c-39665923" checked=""/><div class="controls bullet"><span class="by">Jensson</span><span>|</span><a href="#39664960">root</a><span>|</span><a href="#39665207">parent</a><span>|</span><a href="#39664458">next</a><span>|</span><label class="collapse" for="c-39665923">[-]</label><label class="expand" for="c-39665923">[1 more]</label></div><br/><div class="children"><div class="content">Every organization is inflexible, you need a swarm of organization to be flexible. That is the main difference between the state and the private sector, the private sector is a herd.</div><br/></div></div></div></div></div></div></div></div><div id="39664458" class="c"><input type="checkbox" id="c-39664458" checked=""/><div class="controls bullet"><span class="by">flik</span><span>|</span><a href="#39664960">prev</a><span>|</span><a href="#39665312">next</a><span>|</span><label class="collapse" for="c-39664458">[-]</label><label class="expand" for="c-39664458">[1 more]</label></div><br/><div class="children"><div class="content">&gt;&gt; &quot;The caveat to this rule, of course, is that architectural differences are hard to overcome. Shared nothing databases are at a disadvantage vs shared disk, and it took Redshift many years to switch to a primarily shared disk architecture. Lakehouses that rely on persisting metadata to an object store will have a hard time with rapid updates; this is built into the model.&quot;<p>Looking for good literature on this topic</div><br/></div></div><div id="39665312" class="c"><input type="checkbox" id="c-39665312" checked=""/><div class="controls bullet"><span class="by">__mharrison__</span><span>|</span><a href="#39664458">prev</a><span>|</span><a href="#39664696">next</a><span>|</span><label class="collapse" for="c-39665312">[-]</label><label class="expand" for="c-39665312">[1 more]</label></div><br/><div class="children"><div class="content">Great post. I think this is one of the reasons that pandas had shown in the past decade. Performance on a single machine was good enough and it could ingest 99% of CSVs known to humanity.</div><br/></div></div><div id="39664696" class="c"><input type="checkbox" id="c-39664696" checked=""/><div class="controls bullet"><span class="by">Nevermark</span><span>|</span><a href="#39665312">prev</a><span>|</span><a href="#39665801">next</a><span>|</span><label class="collapse" for="c-39664696">[-]</label><label class="expand" for="c-39664696">[1 more]</label></div><br/><div class="children"><div class="content">Performance is “relative””, not “subjective”. Its meaning is related to the task at hand.<p>Unless we are talking about user interfaces designed to give the user a feeling of greater speed. With fast moving status indicators that communicate great efforts and the user feels like the response was fast for all the work. But that is an interface thing, not a database thing.</div><br/></div></div><div id="39665801" class="c"><input type="checkbox" id="c-39665801" checked=""/><div class="controls bullet"><span class="by">chme</span><span>|</span><a href="#39664696">prev</a><span>|</span><a href="#39665659">next</a><span>|</span><label class="collapse" for="c-39665801">[-]</label><label class="expand" for="c-39665801">[2 more]</label></div><br/><div class="children"><div class="content">I am a bit disappointed. I though this was about the Linux perf tool and would make a point that better tools are required while providing some suggestions.<p>All I got was a piece that more or less states that generic benchmarks are not as useful as one might expect and that other stuff is important too. Which TBH is not really that surprising...</div><br/><div id="39665880" class="c"><input type="checkbox" id="c-39665880" checked=""/><div class="controls bullet"><span class="by">dan-robertson</span><span>|</span><a href="#39665801">parent</a><span>|</span><a href="#39665659">next</a><span>|</span><label class="collapse" for="c-39665880">[-]</label><label class="expand" for="c-39665880">[1 more]</label></div><br/><div class="children"><div class="content">Perf is very powerful but indeed can be hard to get good information out of. Try pprof and read a bunch of Brendan Gregg’s articles about perf (and bpftrace).</div><br/></div></div></div></div><div id="39665659" class="c"><input type="checkbox" id="c-39665659" checked=""/><div class="controls bullet"><span class="by">jongjong</span><span>|</span><a href="#39665801">prev</a><span>|</span><a href="#39664678">next</a><span>|</span><label class="collapse" for="c-39665659">[-]</label><label class="expand" for="c-39665659">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s unwise to obsess about raw performance because of various reasons.<p>For example, there might be a library which performs 2x faster than its closest alternative... Yet it might not necessarily be the best option for your project. There are other factors to consider like compatibility. E.g. If the library breaks every time you upgrade your Node.js engine version, it may add some risk to your project and require additional maintenance. Also, maybe the library itself is 2x faster, but once you&#x27;ve added all your application logic on top of it, your product might only end up being 5% faster than if you had used the alternative because, as is often the case, most of the workload is in the business layer.<p>Also, often, performance is at odds with scalability. You often need to make some performance sacrifices to achieve scalability. For example load balancing with consistent hashing adds overhead on a per-machine basis but you can&#x27;t scale to multiple machines without them.</div><br/></div></div><div id="39664678" class="c"><input type="checkbox" id="c-39664678" checked=""/><div class="controls bullet"><span class="by">causality0</span><span>|</span><a href="#39665659">prev</a><span>|</span><a href="#39663336">next</a><span>|</span><label class="collapse" for="c-39664678">[-]</label><label class="expand" for="c-39664678">[2 more]</label></div><br/><div class="children"><div class="content">Were I the author of this article, I could not have resisted titling it &quot;Perf is Not Enerf&quot;</div><br/><div id="39664898" class="c"><input type="checkbox" id="c-39664898" checked=""/><div class="controls bullet"><span class="by">Qwertious</span><span>|</span><a href="#39664678">parent</a><span>|</span><a href="#39663336">next</a><span>|</span><label class="collapse" for="c-39664898">[-]</label><label class="expand" for="c-39664898">[1 more]</label></div><br/><div class="children"><div class="content">With the right accent the title already rhymes.</div><br/></div></div></div></div><div id="39663336" class="c"><input type="checkbox" id="c-39663336" checked=""/><div class="controls bullet"><span class="by">pstuart</span><span>|</span><a href="#39664678">prev</a><span>|</span><a href="#39663495">next</a><span>|</span><label class="collapse" for="c-39663336">[-]</label><label class="expand" for="c-39663336">[9 more]</label></div><br/><div class="children"><div class="content">I&#x27;m using duckdb for a side project and it keeps getting more powerful. Ironically it was envisioned to use SQLite for the project (we&#x27;re not doing OLAP processing) but duckdb is faster and more feature complete.</div><br/><div id="39663373" class="c"><input type="checkbox" id="c-39663373" checked=""/><div class="controls bullet"><span class="by">LunaSea</span><span>|</span><a href="#39663336">parent</a><span>|</span><a href="#39663495">next</a><span>|</span><label class="collapse" for="c-39663373">[-]</label><label class="expand" for="c-39663373">[8 more]</label></div><br/><div class="children"><div class="content">My issue with DuckDB is:<p>- unstable execution (random crashes)<p>- out-of-memory errors where I would&#x27;ve hoped for DuckDB to gracefully take the slow route to completion if no more memory is available (tried all the different conf settings)</div><br/><div id="39663870" class="c"><input type="checkbox" id="c-39663870" checked=""/><div class="controls bullet"><span class="by">jtigani</span><span>|</span><a href="#39663336">root</a><span>|</span><a href="#39663373">parent</a><span>|</span><a href="#39663569">next</a><span>|</span><label class="collapse" for="c-39663870">[-]</label><label class="expand" for="c-39663870">[1 more]</label></div><br/><div class="children"><div class="content">The article mentioned that DuckDB keeps improving very quickly. The next couple of months of DuckDB are all about stabilization, with no new features getting added. Once it is robust enough it will be declared &quot;1.0&quot;. My guess is that will be in late April.<p>You mentioned OOMs, this has been a focus for a while and ha gotten steadily better over the past few releases. 0.9 added spill to disk to prevent most OOMs. And 0.10, released a couple of weeks ago, fixes a bunch more memory usage problems. The storage format, which another commenter brought up, is now fully backwards compatible.<p>I&#x27;d suggest giving it another try, especially once 1.0 comes out.</div><br/></div></div><div id="39663569" class="c"><input type="checkbox" id="c-39663569" checked=""/><div class="controls bullet"><span class="by">swasheck</span><span>|</span><a href="#39663336">root</a><span>|</span><a href="#39663373">parent</a><span>|</span><a href="#39663870">prev</a><span>|</span><a href="#39665425">next</a><span>|</span><label class="collapse" for="c-39663569">[-]</label><label class="expand" for="c-39663569">[5 more]</label></div><br/><div class="children"><div class="content">- each version breaks previous format and renders it unusable</div><br/><div id="39663760" class="c"><input type="checkbox" id="c-39663760" checked=""/><div class="controls bullet"><span class="by">1egg0myegg0</span><span>|</span><a href="#39663336">root</a><span>|</span><a href="#39663569">parent</a><span>|</span><a href="#39665862">next</a><span>|</span><label class="collapse" for="c-39663760">[-]</label><label class="expand" for="c-39663760">[3 more]</label></div><br/><div class="children"><div class="content">We heard your feedback! Backward compatibility was just implemented! Version 0.9 is actually fully readable by 0.10. With version 1.0 coming in a few months, this will be readable for several years&#x27; worth of version updates.</div><br/><div id="39665341" class="c"><input type="checkbox" id="c-39665341" checked=""/><div class="controls bullet"><span class="by">eyegor</span><span>|</span><a href="#39663336">root</a><span>|</span><a href="#39663760">parent</a><span>|</span><a href="#39665862">next</a><span>|</span><label class="collapse" for="c-39665341">[-]</label><label class="expand" for="c-39665341">[2 more]</label></div><br/><div class="children"><div class="content">&gt; readable for several years<p>Why not just make shims to migrate dbs for future compatibility? So you could read db 1.0 in v2.0 but only insofar as to migrate it to v2. The implication that you don&#x27;t want to promise backwards read compatibility feels antithetical to a db driver.<p>For example, if I have an ancient mssql db that was started in 2001, I&#x27;m confident that I can grab the latest mssql driver and still use it. I don&#x27;t have to track down mssql 2007 to migrate incrementally. Not sure about postgres or mysql but I assume it&#x27;s the same there. Sqlite is definitely backwards read compatible.</div><br/><div id="39665387" class="c"><input type="checkbox" id="c-39665387" checked=""/><div class="controls bullet"><span class="by">plugin-baby</span><span>|</span><a href="#39663336">root</a><span>|</span><a href="#39665341">parent</a><span>|</span><a href="#39665862">next</a><span>|</span><label class="collapse" for="c-39665387">[-]</label><label class="expand" for="c-39665387">[1 more]</label></div><br/><div class="children"><div class="content">Postgres:<p>&gt; Major versions usually change the internal format of system tables and data files. These changes are often complex, so we do not maintain backward compatibility of all stored data.<p><a href="https:&#x2F;&#x2F;www.postgresql.org&#x2F;support&#x2F;versioning&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.postgresql.org&#x2F;support&#x2F;versioning&#x2F;</a></div><br/></div></div></div></div></div></div><div id="39665862" class="c"><input type="checkbox" id="c-39665862" checked=""/><div class="controls bullet"><span class="by">Tarq0n</span><span>|</span><a href="#39663336">root</a><span>|</span><a href="#39663569">parent</a><span>|</span><a href="#39663760">prev</a><span>|</span><a href="#39665425">next</a><span>|</span><label class="collapse" for="c-39665862">[-]</label><label class="expand" for="c-39665862">[1 more]</label></div><br/><div class="children"><div class="content">That seems entirely fair for pre-1.0 software.</div><br/></div></div></div></div><div id="39665425" class="c"><input type="checkbox" id="c-39665425" checked=""/><div class="controls bullet"><span class="by">vietvu</span><span>|</span><a href="#39663336">root</a><span>|</span><a href="#39663373">parent</a><span>|</span><a href="#39663569">prev</a><span>|</span><a href="#39663495">next</a><span>|</span><label class="collapse" for="c-39665425">[-]</label><label class="expand" for="c-39665425">[1 more]</label></div><br/><div class="children"><div class="content">I haven&#x27;t used duckdb since I got OOM on my dataset too. I think I will try again on 1.0.</div><br/></div></div></div></div></div></div><div id="39663495" class="c"><input type="checkbox" id="c-39663495" checked=""/><div class="controls bullet"><span class="by">HackerThemAll</span><span>|</span><a href="#39663336">prev</a><span>|</span><label class="collapse" for="c-39663495">[-]</label><label class="expand" for="c-39663495">[8 more]</label></div><br/><div class="children"><div class="content">Yeah, lots of bs in this text. The comparison of Synapse Analytics to BigQuery is totally flawed. Not only the cost presented in the chart is taken out of someone&#x27;s back, the scale of those solutions do not match. Try doing multiple petabyte scale analysis on Synapse and then compare cost and performance to BigQuery. Maybe Databricks could match BQ in this use case.</div><br/><div id="39664725" class="c"><input type="checkbox" id="c-39664725" checked=""/><div class="controls bullet"><span class="by">bushbaba</span><span>|</span><a href="#39663495">parent</a><span>|</span><a href="#39664954">next</a><span>|</span><label class="collapse" for="c-39664725">[-]</label><label class="expand" for="c-39664725">[1 more]</label></div><br/><div class="children"><div class="content">99% of the BQ use cases I’ve seen is reporting on a dataset &lt; 100GiB. 99% of all big data is really just enterprise reporting and having 1 tool that can work for nearly all reporting needs. Querying a petabyte just isn’t needed these days for nearly all sql needs. And for the 1% of the time it is, often teams prefer spark.</div><br/></div></div><div id="39664954" class="c"><input type="checkbox" id="c-39664954" checked=""/><div class="controls bullet"><span class="by">dhoe</span><span>|</span><a href="#39663495">parent</a><span>|</span><a href="#39664725">prev</a><span>|</span><a href="#39663727">next</a><span>|</span><label class="collapse" for="c-39664954">[-]</label><label class="expand" for="c-39664954">[1 more]</label></div><br/><div class="children"><div class="content">Do I understand you correctly that you&#x27;re saying that the author of this post, one of the founding engineers of BigQuery, is being unfair to BigQuery?</div><br/></div></div><div id="39663727" class="c"><input type="checkbox" id="c-39663727" checked=""/><div class="controls bullet"><span class="by">jitl</span><span>|</span><a href="#39663495">parent</a><span>|</span><a href="#39664954">prev</a><span>|</span><label class="collapse" for="c-39663727">[-]</label><label class="expand" for="c-39663727">[5 more]</label></div><br/><div class="children"><div class="content">I think you&#x27;re missing the point of the article. The article is arguing that these kinds of performance benchmarks&#x2F;graphs as a whole are not the most important thing when it comes to database success. I think the points made here would stand if you shuffled all the names around in the images, or made up new names and data. There&#x27;s even a graph later on that just compares &quot;our system&quot; (very fast) to &quot;their system&quot; (10x slower).<p>I&#x27;m working on a database system right now, and my favorite paragraph was this one:<p>&gt; Performance must be measured from the user’s perspective, not the database’s. It is a UX problem and, like any UX problem, can’t really be described in a single number. This is surprising to many people, since they think performance, like car racing, is an objective thing. Just because you can say that a Lamborghini is faster than a Prius, they believe you should also be able to say that My database is faster than Your database. But just like a Lamborghini might not get me to work any faster than a Prius (or a bicycle, if there is traffic), the actual workload for a database is going to determine which one is faster.</div><br/><div id="39663829" class="c"><input type="checkbox" id="c-39663829" checked=""/><div class="controls bullet"><span class="by">HackerThemAll</span><span>|</span><a href="#39663495">root</a><span>|</span><a href="#39663727">parent</a><span>|</span><label class="collapse" for="c-39663829">[-]</label><label class="expand" for="c-39663829">[4 more]</label></div><br/><div class="children"><div class="content">I also work in databases. The thing is the database engine isn&#x27;t usually slow by itself. It&#x27;s the programmers whose programs usually are just as lame as they are. For example during one of my &quot;help us with the slow database server&quot; consultancy assignments I discovered an incident of a query executed collectively over a 1000 times per second on average, adding considerable load to an already overloaded RDBMS, querying a single-row table where the company data (name and address) was stored, which has not changed for over 10 years. No caching in the app whatsoever. The clients _had to_ ask for this info afresh every so often. Eliminating this and only a few similar patterns reduced overall CPU consumption by some 50% and sped up the damn system a lot. I could write a book about this kind of bs I see every day.<p>So, comparing BigQuery to some small data warehouse product, while BigQuery could not even get off the ground yet, that I call bs and put in the same drawer as the above. If the intention was to say &quot;product x&quot; vs &quot;product y&quot;, this is what should have been done. But the author deliberately put the proper product names in a lame and dishonest perspective, which makes the whole thing not credible.</div><br/><div id="39664971" class="c"><input type="checkbox" id="c-39664971" checked=""/><div class="controls bullet"><span class="by">eyelidlessness</span><span>|</span><a href="#39663495">root</a><span>|</span><a href="#39663829">parent</a><span>|</span><a href="#39665677">next</a><span>|</span><label class="collapse" for="c-39664971">[-]</label><label class="expand" for="c-39664971">[1 more]</label></div><br/><div class="children"><div class="content">You seem very hung up on a particular graph, and don’t seem to have much to say about the text which follows it and has a substantially different takeaway than the graph alone seems to have impressed on you. Maybe give the article another read with a little bit more of an open mind.</div><br/></div></div><div id="39665677" class="c"><input type="checkbox" id="c-39665677" checked=""/><div class="controls bullet"><span class="by">ricardobeat</span><span>|</span><a href="#39663495">root</a><span>|</span><a href="#39663829">parent</a><span>|</span><a href="#39664971">prev</a><span>|</span><a href="#39665689">next</a><span>|</span><label class="collapse" for="c-39665677">[-]</label><label class="expand" for="c-39665677">[1 more]</label></div><br/><div class="children"><div class="content">It seems clear that you haven’t actually read the rest of the piece (or are purposefully ignoring it). That graph is used as an a example of <i>why benchmarks don’t matter</i>.</div><br/></div></div><div id="39665689" class="c"><input type="checkbox" id="c-39665689" checked=""/><div class="controls bullet"><span class="by">porker</span><span>|</span><a href="#39663495">root</a><span>|</span><a href="#39663829">parent</a><span>|</span><a href="#39665677">prev</a><span>|</span><label class="collapse" for="c-39665689">[-]</label><label class="expand" for="c-39665689">[1 more]</label></div><br/><div class="children"><div class="content">Write that book.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>