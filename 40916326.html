<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1720861252406" as="style"/><link rel="stylesheet" href="styles.css?v=1720861252406"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/bitwhip/bitwhip">Show HN: 30ms latency screen sharing in Rust</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>Sean-Der</span> | <span>32 comments</span></div><br/><div><div id="40951316" class="c"><input type="checkbox" id="c-40951316" checked=""/><div class="controls bullet"><span class="by">Sean-Der</span><span>|</span><a href="#40951631">next</a><span>|</span><label class="collapse" for="c-40951316">[-]</label><label class="expand" for="c-40951316">[6 more]</label></div><br/><div class="children"><div class="content">I wrote this to solve a few things I cared about.<p>* I want to show people that native WebRTC players can be a thing. I hope this encourages hangouts&#x2F;discord&#x2F;$x to implement WHIP and WHEP it would let people do so much more<p>* I wanted to make low latency sharing easier. I saw the need for this working on adding WebRTC to OBS and Broadcast Box[0]<p>* I wanted to show devs what a great ecosystem exists for WebRTC. Lots of great implementations in different languages.<p>* Was a bit of a ‘frustration project’. I saw a company claiming only their proprietary protocol can do latency this low. So I thought ‘screw you I will make an open source version!’<p>[0] <a href="https:&#x2F;&#x2F;github.com&#x2F;glimesh&#x2F;broadcast-box">https:&#x2F;&#x2F;github.com&#x2F;glimesh&#x2F;broadcast-box</a></div><br/><div id="40951998" class="c"><input type="checkbox" id="c-40951998" checked=""/><div class="controls bullet"><span class="by">slashink</span><span>|</span><a href="#40951316">parent</a><span>|</span><a href="#40951424">next</a><span>|</span><label class="collapse" for="c-40951998">[-]</label><label class="expand" for="c-40951998">[1 more]</label></div><br/><div class="children"><div class="content">Hey Sean, we both worked at Twitch Video but I left just as you were joining. I currently work on the Discord video stack and am somewhat curious about how you imagine Discord leveraging WHIP&#x2F;WHEP. Do you see it as a way for these clients to broadcast outwards to services like Twitch or more as an interoperability tool?</div><br/></div></div><div id="40951424" class="c"><input type="checkbox" id="c-40951424" checked=""/><div class="controls bullet"><span class="by">Sean-Der</span><span>|</span><a href="#40951316">parent</a><span>|</span><a href="#40951998">prev</a><span>|</span><a href="#40952476">next</a><span>|</span><label class="collapse" for="c-40951424">[-]</label><label class="expand" for="c-40951424">[1 more]</label></div><br/><div class="children"><div class="content">Another things that is in this realm. I am adding native co-streaming&#x2F;conferencing to OBS [0]. OBS can send WebRTC, next I want to make receiving work well.<p>Between that and Simulcast I hope to make real-time video dramatically cheaper and easier<p>[0] <a href="https:&#x2F;&#x2F;docs.google.com&#x2F;document&#x2F;d&#x2F;1Ed2Evze1ZJHY-1f4tYzqNZfx2NIVD2HMLbyVScsTxnM&#x2F;edit" rel="nofollow">https:&#x2F;&#x2F;docs.google.com&#x2F;document&#x2F;d&#x2F;1Ed2Evze1ZJHY-1f4tYzqNZfx...</a></div><br/></div></div><div id="40952476" class="c"><input type="checkbox" id="c-40952476" checked=""/><div class="controls bullet"><span class="by">Karrot_Kream</span><span>|</span><a href="#40951316">parent</a><span>|</span><a href="#40951424">prev</a><span>|</span><a href="#40952109">next</a><span>|</span><label class="collapse" for="c-40952476">[-]</label><label class="expand" for="c-40952476">[1 more]</label></div><br/><div class="children"><div class="content">Thanks the code is really useful to read through.</div><br/></div></div><div id="40952109" class="c"><input type="checkbox" id="c-40952109" checked=""/><div class="controls bullet"><span class="by">makapuf</span><span>|</span><a href="#40951316">parent</a><span>|</span><a href="#40952476">prev</a><span>|</span><a href="#40951978">next</a><span>|</span><label class="collapse" for="c-40952109">[-]</label><label class="expand" for="c-40952109">[1 more]</label></div><br/><div class="children"><div class="content">Great things are accomplished by spite programming! <a href="https:&#x2F;&#x2F;hackaday.com&#x2F;2018&#x2F;01&#x2F;03&#x2F;spite-thrift-and-the-virtues-of-an-affordable-logic-analyzer&#x2F;" rel="nofollow">https:&#x2F;&#x2F;hackaday.com&#x2F;2018&#x2F;01&#x2F;03&#x2F;spite-thrift-and-the-virtues...</a></div><br/></div></div><div id="40951978" class="c"><input type="checkbox" id="c-40951978" checked=""/><div class="controls bullet"><span class="by">tamimio</span><span>|</span><a href="#40951316">parent</a><span>|</span><a href="#40952109">prev</a><span>|</span><a href="#40951631">next</a><span>|</span><label class="collapse" for="c-40951978">[-]</label><label class="expand" for="c-40951978">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I saw a company claiming only their proprietary protocol<p>Did the company have a “ripple” in its name? Curious</div><br/></div></div></div></div><div id="40951631" class="c"><input type="checkbox" id="c-40951631" checked=""/><div class="controls bullet"><span class="by">eigenvalue</span><span>|</span><a href="#40951316">prev</a><span>|</span><a href="#40952415">next</a><span>|</span><label class="collapse" for="c-40951631">[-]</label><label class="expand" for="c-40951631">[2 more]</label></div><br/><div class="children"><div class="content">Couldn&#x27;t get it to work in Windows 11. Was able to run the just install script only after editing it to use the full path to the 7zip binary. Said it installed correctly, but then when I try to do `just run play whip` I got this:<p><pre><code>  cargo:rustc-cfg=feature=&quot;ffmpeg_7_0&quot;
  cargo:ffmpeg_7_0=true

  --- stderr
  cl : Command line warning D9035 : option &#x27;o&#x27; has been deprecated and will be removed in a future release
  thread &#x27;main&#x27; panicked at C:\Users\jeffr\.cargo\registry\src\index.crates.io-6f17d22bba15001f\bindgen-0.69.4\lib.rs:622:31:
  Unable to find libclang: &quot;couldn&#x27;t find any valid shared libraries matching: [&#x27;clang.dll&#x27;, &#x27;libclang.dll&#x27;], set the `LIBCLANG_PATH` environment variable to a path where one of these files can be found (invalid: [])&quot;
  note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace</code></pre></div><br/><div id="40951816" class="c"><input type="checkbox" id="c-40951816" checked=""/><div class="controls bullet"><span class="by">mintplant</span><span>|</span><a href="#40951631">parent</a><span>|</span><a href="#40952415">next</a><span>|</span><label class="collapse" for="c-40951816">[-]</label><label class="expand" for="c-40951816">[1 more]</label></div><br/><div class="children"><div class="content">Looks like you need libclang for the ffmpeg bindings.</div><br/></div></div></div></div><div id="40952415" class="c"><input type="checkbox" id="c-40952415" checked=""/><div class="controls bullet"><span class="by">Tielem</span><span>|</span><a href="#40951631">prev</a><span>|</span><a href="#40952162">next</a><span>|</span><label class="collapse" for="c-40952415">[-]</label><label class="expand" for="c-40952415">[1 more]</label></div><br/><div class="children"><div class="content">Always a bit sceprical when it comes to latency claims, especially in the sub 100ms space, but screen sharing 1-1 or video ingest should be a great use case for WebRTC<p>WebRTC is a great technology, but it still suffers from a scaling problem that is harder to resolve. On top of that, the protocol itself does not define things like adaptive bitrate switching or stalling recovery<p>Curious to hear what you think of some (proprietary) options for low latency playback like LLHLS LLDASH, WebRTC or HESP</div><br/></div></div><div id="40952162" class="c"><input type="checkbox" id="c-40952162" checked=""/><div class="controls bullet"><span class="by">daghamm</span><span>|</span><a href="#40952415">prev</a><span>|</span><a href="#40951561">next</a><span>|</span><label class="collapse" for="c-40952162">[-]</label><label class="expand" for="c-40952162">[6 more]</label></div><br/><div class="children"><div class="content">What is the reason for using &quot;just&quot; here?<p>I understand people have their tooling preferences, but this looks like something that build.rs or a plain makefile could have handled?</div><br/><div id="40952259" class="c"><input type="checkbox" id="c-40952259" checked=""/><div class="controls bullet"><span class="by">mijoharas</span><span>|</span><a href="#40952162">parent</a><span>|</span><a href="#40951561">next</a><span>|</span><label class="collapse" for="c-40952259">[-]</label><label class="expand" for="c-40952259">[5 more]</label></div><br/><div class="children"><div class="content">I was also wondering if anyone could chime in on advantages of using just.<p>I&#x27;m familiar with makefiles, is there a particular advantage to using just over makefiles or is it personal preference? (which is a totally valid answer! I&#x27;m just wondering if I&#x27;m missing something)</div><br/><div id="40952303" class="c"><input type="checkbox" id="c-40952303" checked=""/><div class="controls bullet"><span class="by">aerzen</span><span>|</span><a href="#40952162">root</a><span>|</span><a href="#40952259">parent</a><span>|</span><a href="#40951561">next</a><span>|</span><label class="collapse" for="c-40952303">[-]</label><label class="expand" for="c-40952303">[4 more]</label></div><br/><div class="children"><div class="content">I think that the appeal of just is that it is simpler than make. It is not checking timestamps of files, but executes a DAG of tasks unconditionally.</div><br/><div id="40952611" class="c"><input type="checkbox" id="c-40952611" checked=""/><div class="controls bullet"><span class="by">mijoharas</span><span>|</span><a href="#40952162">root</a><span>|</span><a href="#40952303">parent</a><span>|</span><a href="#40952614">next</a><span>|</span><label class="collapse" for="c-40952611">[-]</label><label class="expand" for="c-40952611">[2 more]</label></div><br/><div class="children"><div class="content">My first thought was that that was dropping one of the main features of make.<p>On reflection though, the timestamp dependant part isn&#x27;t really something used much nowadays apart from compiling C.<p>It&#x27;d be cool if it was an opt-in feature for just files so that it could actually function as a replacement for make in all cases.<p>I went looking in the docs and found this[0] which I&#x27;d missed last time I looked into justfiles.<p>[0] <a href="https:&#x2F;&#x2F;github.com&#x2F;casey&#x2F;just?tab=readme-ov-file#what-are-the-idiosyncrasies-of-make-that-just-avoids">https:&#x2F;&#x2F;github.com&#x2F;casey&#x2F;just?tab=readme-ov-file#what-are-th...</a></div><br/><div id="40952628" class="c"><input type="checkbox" id="c-40952628" checked=""/><div class="controls bullet"><span class="by">daghamm</span><span>|</span><a href="#40952162">root</a><span>|</span><a href="#40952611">parent</a><span>|</span><a href="#40952614">next</a><span>|</span><label class="collapse" for="c-40952628">[-]</label><label class="expand" for="c-40952628">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t really buy his justification that &quot;.PHONY: xxx&quot; is hard to remember so we should have a complete new tool instead.<p>Make has its issues, but it also has two big advantages: it&#x27;s simple and everyone already have it.</div><br/></div></div></div></div><div id="40952614" class="c"><input type="checkbox" id="c-40952614" checked=""/><div class="controls bullet"><span class="by">daghamm</span><span>|</span><a href="#40952162">root</a><span>|</span><a href="#40952303">parent</a><span>|</span><a href="#40952611">prev</a><span>|</span><a href="#40951561">next</a><span>|</span><label class="collapse" for="c-40952614">[-]</label><label class="expand" for="c-40952614">[1 more]</label></div><br/><div class="children"><div class="content">Wouldn&#x27;t a shell script work just as well than?<p>I&#x27;m not against new better tooling, but I also want to keep my dev machine reasonably clean.</div><br/></div></div></div></div></div></div></div></div><div id="40951561" class="c"><input type="checkbox" id="c-40951561" checked=""/><div class="controls bullet"><span class="by">comex</span><span>|</span><a href="#40952162">prev</a><span>|</span><a href="#40951965">next</a><span>|</span><label class="collapse" for="c-40951561">[-]</label><label class="expand" for="c-40951561">[1 more]</label></div><br/><div class="children"><div class="content">Ooh, I’ve been looking for a good solution for this for years.  Currently I use Parsec, but it’s closed source and not compatible with direct streaming from OBS etc.  I’ll definitely check this out.</div><br/></div></div><div id="40951965" class="c"><input type="checkbox" id="c-40951965" checked=""/><div class="controls bullet"><span class="by">tamimio</span><span>|</span><a href="#40951561">prev</a><span>|</span><a href="#40951179">next</a><span>|</span><label class="collapse" for="c-40951965">[-]</label><label class="expand" for="c-40951965">[1 more]</label></div><br/><div class="children"><div class="content">Amazing work! The most I could achieve is ~40ms of video streams, although it was over a cellular network from a drone. But 30ms is a new milestone! I will see if I can repurpose this and test out a real-time video stream from a robot if I get some spare time.</div><br/></div></div><div id="40951179" class="c"><input type="checkbox" id="c-40951179" checked=""/><div class="controls bullet"><span class="by">krick</span><span>|</span><a href="#40951965">prev</a><span>|</span><a href="#40952288">next</a><span>|</span><label class="collapse" for="c-40951179">[-]</label><label class="expand" for="c-40951179">[4 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t get what it does, exactly? This doesn&#x27;t seem to be an OBS alternative (judging by the description), but… I mean, isn&#x27;t it exactly the same as just running OBS directly?</div><br/><div id="40951291" class="c"><input type="checkbox" id="c-40951291" checked=""/><div class="controls bullet"><span class="by">notjoemama</span><span>|</span><a href="#40951179">parent</a><span>|</span><a href="#40951355">next</a><span>|</span><label class="collapse" for="c-40951291">[-]</label><label class="expand" for="c-40951291">[2 more]</label></div><br/><div class="children"><div class="content">Looks like a LAN tele…er, screen sharing server&#x2F;client. Presumably you could serve over the internet but it will not get the 30ms latency. Aside from the streaming (I only spent a few minutes reviewing the source) it’s a live jpeg kind of thing. I built something similar to screen share with my kids when we played Minecraft together. It was really for me because once we got in game they would take off and in 5 minutes be screaming for help 10 chunks away in some zombie skeleton infested cave at or near bedrock. Being kids, I never got good enough directions to help them in time. Anyway, it was a fun project. I used CUDA and could get 60fps per client on CAT5 and 45-ish over WiFi, dropping to 10-15fps when I walked in and out of rooms with the laptop. 60fps is 15ms, so 20 is 50fps.</div><br/><div id="40952388" class="c"><input type="checkbox" id="c-40952388" checked=""/><div class="controls bullet"><span class="by">imtringued</span><span>|</span><a href="#40951179">root</a><span>|</span><a href="#40951291">parent</a><span>|</span><a href="#40951355">next</a><span>|</span><label class="collapse" for="c-40952388">[-]</label><label class="expand" for="c-40952388">[1 more]</label></div><br/><div class="children"><div class="content">&gt;Presumably you could serve over the internet but it will not get the 30ms latency.<p>Indeed, you&#x27;ll have to live with something like 80ms to 100ms latency over the internet and a horrifying 160 ms if you want to have things respond to keyboard and mouse inputs.</div><br/></div></div></div></div><div id="40951355" class="c"><input type="checkbox" id="c-40951355" checked=""/><div class="controls bullet"><span class="by">Sean-Der</span><span>|</span><a href="#40951179">parent</a><span>|</span><a href="#40951291">prev</a><span>|</span><a href="#40952288">next</a><span>|</span><label class="collapse" for="c-40951355">[-]</label><label class="expand" for="c-40951355">[1 more]</label></div><br/><div class="children"><div class="content">It is also a player!<p>You can either pull the video from a WHEP source or run in a P2P mode. I wanted to demonstrate the flexibility and hackability of it all :)</div><br/></div></div></div></div><div id="40952288" class="c"><input type="checkbox" id="c-40952288" checked=""/><div class="controls bullet"><span class="by">jmakov</span><span>|</span><a href="#40951179">prev</a><span>|</span><a href="#40951821">next</a><span>|</span><label class="collapse" for="c-40952288">[-]</label><label class="expand" for="c-40952288">[1 more]</label></div><br/><div class="children"><div class="content">Can this be used as remote desktop?</div><br/></div></div><div id="40951821" class="c"><input type="checkbox" id="c-40951821" checked=""/><div class="controls bullet"><span class="by">Dwedit</span><span>|</span><a href="#40952288">prev</a><span>|</span><a href="#40951181">next</a><span>|</span><label class="collapse" for="c-40951821">[-]</label><label class="expand" for="c-40951821">[1 more]</label></div><br/><div class="children"><div class="content">How does this compare with Moonlight?</div><br/></div></div><div id="40951181" class="c"><input type="checkbox" id="c-40951181" checked=""/><div class="controls bullet"><span class="by">1oooqooq</span><span>|</span><a href="#40951821">prev</a><span>|</span><a href="#40951010">next</a><span>|</span><label class="collapse" for="c-40951181">[-]</label><label class="expand" for="c-40951181">[2 more]</label></div><br/><div class="children"><div class="content">mostly glues two libraries? ffmpeg from capture, play and whip?</div><br/><div id="40951334" class="c"><input type="checkbox" id="c-40951334" checked=""/><div class="controls bullet"><span class="by">Sean-Der</span><span>|</span><a href="#40951181">parent</a><span>|</span><a href="#40951010">next</a><span>|</span><label class="collapse" for="c-40951334">[-]</label><label class="expand" for="c-40951334">[1 more]</label></div><br/><div class="children"><div class="content">Yep! It glues ffmpeg, str0m[0] and SDL together. I hope bitwhip doesn’t need to exist someday. When WHIP&#x2F;WHEP has enough traction it will be easier to land in FFMPEG<p>[0] <a href="https:&#x2F;&#x2F;github.com&#x2F;algesten&#x2F;str0m">https:&#x2F;&#x2F;github.com&#x2F;algesten&#x2F;str0m</a></div><br/></div></div></div></div><div id="40951736" class="c"><input type="checkbox" id="c-40951736" checked=""/><div class="controls bullet"><span class="by">synthoidzeta</span><span>|</span><a href="#40951010">prev</a><span>|</span><a href="#40951826">next</a><span>|</span><label class="collapse" for="c-40951736">[-]</label><label class="expand" for="c-40951736">[1 more]</label></div><br/><div class="children"><div class="content">vdo.ninja is another excellent alternative but I&#x27;ll definitely check this out!</div><br/></div></div></div></div></div></div></div></body></html>