<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1684659656329" as="style"/><link rel="stylesheet" href="styles.css?v=1684659656329"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="http://www.deater.net/weave/vmwprod/megademo/vapor_lock.html">Apple II Vapor Lock and the Floating Bus (2018)</a> <span class="domain">(<a href="http://www.deater.net">www.deater.net</a>)</span></div><div class="subtext"><span>rbanffy</span> | <span>15 comments</span></div><br/><div><div id="36017330" class="c"><input type="checkbox" id="c-36017330" checked=""/><div class="controls bullet"><span class="by">shwaj</span><span>|</span><a href="#36018106">next</a><span>|</span><label class="collapse" for="c-36017330">[-]</label><label class="expand" for="c-36017330">[2 more]</label></div><br/><div class="children"><div class="content">I was really tickled by the phrase “for complex Woz-related reasons”:<p>“They aren&#x27;t even linear framebuffers, they are split up in complex ways for complex Woz-related reasons having to do with getting DRAM refresh for free.”<p>This seems to be a demo using the described techniques:
<a href="https:&#x2F;&#x2F;youtu.be&#x2F;McKAcKVTIQs" rel="nofollow">https:&#x2F;&#x2F;youtu.be&#x2F;McKAcKVTIQs</a></div><br/><div id="36017995" class="c"><input type="checkbox" id="c-36017995" checked=""/><div class="controls bullet"><span class="by">bombcar</span><span>|</span><a href="#36017330">parent</a><span>|</span><a href="#36018106">next</a><span>|</span><label class="collapse" for="c-36017995">[-]</label><label class="expand" for="c-36017995">[1 more]</label></div><br/><div class="children"><div class="content">IIRC Woz made a floppy controller unlike any else in the world, and save a (relatively) huge amount of money doing so.<p>So, Woz invented the software-defined hardware, and the first &quot;win-floppy&quot; :D</div><br/></div></div></div></div><div id="36018106" class="c"><input type="checkbox" id="c-36018106" checked=""/><div class="controls bullet"><span class="by">gooseyman</span><span>|</span><a href="#36017330">prev</a><span>|</span><a href="#35999626">next</a><span>|</span><label class="collapse" for="c-36018106">[-]</label><label class="expand" for="c-36018106">[1 more]</label></div><br/><div class="children"><div class="content">My car used to get vapor lock in high school. The fuel line was run too close to the hot exhaust pipe. At red lights when there was no air moving, the exhaust pipe heat would be so hot it would cause the gas to vaporize. That vapor’s higher pressure caused no more fuel to flow, and the car to stall. vapor lock</div><br/></div></div><div id="35999626" class="c"><input type="checkbox" id="c-35999626" checked=""/><div class="controls bullet"><span class="by">Someone</span><span>|</span><a href="#36018106">prev</a><span>|</span><a href="#36017446">next</a><span>|</span><label class="collapse" for="c-35999626">[-]</label><label class="expand" for="c-35999626">[4 more]</label></div><br/><div class="children"><div class="content">So, can you do the switch mid-line, and create a display with text and hires side-by-side (at the price of making the programming restrictions even more horrible), or is the switch so slow that that introduces horrible display artifacts?</div><br/><div id="36017644" class="c"><input type="checkbox" id="c-36017644" checked=""/><div class="controls bullet"><span class="by">derekja</span><span>|</span><a href="#35999626">parent</a><span>|</span><a href="#36012617">next</a><span>|</span><label class="collapse" for="c-36017644">[-]</label><label class="expand" for="c-36017644">[1 more]</label></div><br/><div class="children"><div class="content">You can. Although I have long since lost many of the details, I used the Apple II to present subliminal perception data in experiments for a cognitive psychology lab that was an early programming job for me in the 80&#x27;s. We had to run an oscilloscope on the signal to catch the vblank to time our display onset properly.</div><br/></div></div><div id="36012617" class="c"><input type="checkbox" id="c-36012617" checked=""/><div class="controls bullet"><span class="by">bcrl</span><span>|</span><a href="#35999626">parent</a><span>|</span><a href="#36017644">prev</a><span>|</span><a href="#36017446">next</a><span>|</span><label class="collapse" for="c-36012617">[-]</label><label class="expand" for="c-36012617">[2 more]</label></div><br/><div class="children"><div class="content">Try watching the demo using that technique called the &quot;Apple II 64k Cycle-counting Megademo&quot; at <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=McKAcKVTIQs">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=McKAcKVTIQs</a> .  There are not any artifacts with the changes between text and graphics mode in the middle of lines.</div><br/><div id="36017338" class="c"><input type="checkbox" id="c-36017338" checked=""/><div class="controls bullet"><span class="by">deater</span><span>|</span><a href="#35999626">root</a><span>|</span><a href="#36012617">parent</a><span>|</span><a href="#36017446">next</a><span>|</span><label class="collapse" for="c-36017338">[-]</label><label class="expand" for="c-36017338">[1 more]</label></div><br/><div class="children"><div class="content">there are no artifacts in the recording because it was recorded on an Apple IIe which has slightly better video hardware.  You do get some glithces on the earlier Apple II+<p>Later models you can bypass the floating bus&#x2F;vapor lock and get VBLANK from a register (but IIe&#x2F;IIc&#x2F;IIgs all do it differently).  I coincidentally released a 256 byte demoscene demo using this today: <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=iWq57yeu4gQ">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=iWq57yeu4gQ</a></div><br/></div></div></div></div></div></div><div id="36017446" class="c"><input type="checkbox" id="c-36017446" checked=""/><div class="controls bullet"><span class="by">allenrb</span><span>|</span><a href="#35999626">prev</a><span>|</span><a href="#36017184">next</a><span>|</span><label class="collapse" for="c-36017446">[-]</label><label class="expand" for="c-36017446">[1 more]</label></div><br/><div class="children"><div class="content">The explanation I had always heard for the very non-linear frame buffer layout was that it let Woz save a pair of gates. Which made sense, in the context of the time.<p>I’d never heard about the relationship between that layout and refreshing the DRAM. After 40 years since my Apple &#x2F;&#x2F;e, this is kind of a revelation!</div><br/></div></div><div id="36017184" class="c"><input type="checkbox" id="c-36017184" checked=""/><div class="controls bullet"><span class="by">zaps</span><span>|</span><a href="#36017446">prev</a><span>|</span><a href="#36017898">next</a><span>|</span><label class="collapse" for="c-36017184">[-]</label><label class="expand" for="c-36017184">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;youtu.be&#x2F;ewfXce3oylk" rel="nofollow">https:&#x2F;&#x2F;youtu.be&#x2F;ewfXce3oylk</a></div><br/></div></div><div id="36017898" class="c"><input type="checkbox" id="c-36017898" checked=""/><div class="controls bullet"><span class="by">kazinator</span><span>|</span><a href="#36017184">prev</a><span>|</span><a href="#36018712">next</a><span>|</span><label class="collapse" for="c-36017898">[-]</label><label class="expand" for="c-36017898">[4 more]</label></div><br/><div class="children"><div class="content">Why wasn&#x27;t this more widely known? I did a lot of hacking on the Apple II+ platform back in the day, yet basically, TIL.<p>(I do know about the hardware hacks for vsync.)</div><br/><div id="36019080" class="c"><input type="checkbox" id="c-36019080" checked=""/><div class="controls bullet"><span class="by">djmips</span><span>|</span><a href="#36017898">parent</a><span>|</span><a href="#36018067">next</a><span>|</span><label class="collapse" for="c-36019080">[-]</label><label class="expand" for="c-36019080">[1 more]</label></div><br/><div class="children"><div class="content">It was impractical and didn&#x27;t work on every Apple II+.  IIRC peripheral cards loading the bus could cause it not to function and for instance some clones also didn&#x27;t work. It was fully documented in Jim Sather&#x27;s Understanding the Apple II where it described the technique and even gave examples. After reading that as a kid I experimented with it but I never felt like I would use it because it was so awkward to incorporate into a real game plus it wouldn&#x27;t work on every system.<p>Read chapter 3 in Sather&#x27;s book for complete documentation on the Apple II video hardware and 3-16 for switching screen modes in timed loops (no mods). 3-19 has detecting VSYNC with a small hardware mod.<p><a href="https:&#x2F;&#x2F;archive.org&#x2F;details&#x2F;understanding_the_apple_ii&#x2F;page&#x2F;n49&#x2F;mode&#x2F;2up" rel="nofollow">https:&#x2F;&#x2F;archive.org&#x2F;details&#x2F;understanding_the_apple_ii&#x2F;page&#x2F;...</a></div><br/></div></div><div id="36018067" class="c"><input type="checkbox" id="c-36018067" checked=""/><div class="controls bullet"><span class="by">dehrmann</span><span>|</span><a href="#36017898">parent</a><span>|</span><a href="#36019080">prev</a><span>|</span><a href="#36018712">next</a><span>|</span><label class="collapse" for="c-36018067">[-]</label><label class="expand" for="c-36018067">[2 more]</label></div><br/><div class="children"><div class="content">Because of cycle counting, it sounds pretty impractical to use.</div><br/><div id="36018355" class="c"><input type="checkbox" id="c-36018355" checked=""/><div class="controls bullet"><span class="by">kazinator</span><span>|</span><a href="#36017898">root</a><span>|</span><a href="#36018067">parent</a><span>|</span><a href="#36018712">next</a><span>|</span><label class="collapse" for="c-36018355">[-]</label><label class="expand" for="c-36018355">[1 more]</label></div><br/><div class="children"><div class="content">The detailed description of the technique claims that the mode must be the high res page 1 for it to work. But it seems it should be possible to have a mirror of the code that works when page 2 is being shown.<p>It seems like it would be useful for basic page flipping (no split effects). Draw something on the off-page, and then poll for those vapor sequence to appear; flip the page and repeat.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>