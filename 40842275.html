<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1719824481844" as="style"/><link rel="stylesheet" href="styles.css?v=1719824481844"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://boston.conman.org/2024/06/30.1">Four lines of code it was four lines of code</a>Â <span class="domain">(<a href="https://boston.conman.org">boston.conman.org</a>)</span></div><div class="subtext"><span>todsacerdoti</span> | <span>9 comments</span></div><br/><div><div id="40842614" class="c"><input type="checkbox" id="c-40842614" checked=""/><div class="controls bullet"><span class="by">vidarh</span><span>|</span><a href="#40842632">next</a><span>|</span><label class="collapse" for="c-40842614">[-]</label><label class="expand" for="c-40842614">[1 more]</label></div><br/><div class="children"><div class="content">&quot;strace -c&quot; is usually how I start looking for things like this. It so often immediately reveal some vast difference in syscalls that&#x27;ll give a clue, and is usually faster&#x2F;more convenient as a first step than starting with a full profiler trace or looking through code.</div><br/></div></div><div id="40842632" class="c"><input type="checkbox" id="c-40842632" checked=""/><div class="controls bullet"><span class="by">barsonme</span><span>|</span><a href="#40842614">prev</a><span>|</span><a href="#40843231">next</a><span>|</span><label class="collapse" for="c-40842632">[-]</label><label class="expand" for="c-40842632">[1 more]</label></div><br/><div class="children"><div class="content">The site seems down, so here&#x27;s the wayback link: <a href="https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20240701032732&#x2F;https:&#x2F;&#x2F;boston.conman.org&#x2F;2024&#x2F;06&#x2F;30.1" rel="nofollow">https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20240701032732&#x2F;https:&#x2F;&#x2F;boston.co...</a></div><br/></div></div><div id="40843231" class="c"><input type="checkbox" id="c-40843231" checked=""/><div class="controls bullet"><span class="by">mbreese</span><span>|</span><a href="#40842632">prev</a><span>|</span><a href="#40843301">next</a><span>|</span><label class="collapse" for="c-40843231">[-]</label><label class="expand" for="c-40843231">[3 more]</label></div><br/><div class="children"><div class="content">Best line of the post:<p><i>&gt; And as it is with these types of bugs, finding the root cause is not trivial, but the fix almost always is.</i></div><br/><div id="40843481" class="c"><input type="checkbox" id="c-40843481" checked=""/><div class="controls bullet"><span class="by">rob74</span><span>|</span><a href="#40843231">parent</a><span>|</span><a href="#40843412">next</a><span>|</span><label class="collapse" for="c-40843481">[-]</label><label class="expand" for="c-40843481">[1 more]</label></div><br/><div class="children"><div class="content">This is actually the best case: putting in some effort to find the root cause, having maybe a bit luck and actually finding it, and then making a minimal change to fix it (hopefully) once and for all. Much better than the typical back-and-forth trial-and-error &quot;I changed something, see if it works now&quot; - which I suspect are much more common in the real world (especially if the reporter is a different person than the one fixing it), but are nothing worth blogging about...</div><br/></div></div><div id="40843412" class="c"><input type="checkbox" id="c-40843412" checked=""/><div class="controls bullet"><span class="by">xandrius</span><span>|</span><a href="#40843231">parent</a><span>|</span><a href="#40843481">prev</a><span>|</span><a href="#40843301">next</a><span>|</span><label class="collapse" for="c-40843412">[-]</label><label class="expand" for="c-40843412">[1 more]</label></div><br/><div class="children"><div class="content">Getting paid not to turn a screw but to know which screw to turn.</div><br/></div></div></div></div><div id="40843301" class="c"><input type="checkbox" id="c-40843301" checked=""/><div class="controls bullet"><span class="by">boffinAudio</span><span>|</span><a href="#40843231">prev</a><span>|</span><label class="collapse" for="c-40843301">[-]</label><label class="expand" for="c-40843301">[3 more]</label></div><br/><div class="children"><div class="content">Whenever I need to do network things in Lua, I refer to the turbo.lua framework, which I&#x27;ve used in the past on other projects and I just find it so useful:<p><a href="https:&#x2F;&#x2F;turbo.readthedocs.io&#x2F;en&#x2F;latest&#x2F;" rel="nofollow">https:&#x2F;&#x2F;turbo.readthedocs.io&#x2F;en&#x2F;latest&#x2F;</a><p>Whether its a set of file descriptors, a network socket, or some higher level session abstraction, I can usually find the &#x27;best&#x27; way to deal with it by inspecting the turbo.lua sources - or, if feasible, I just <i>use</i> turbo.lua for the application on the table.  It has been a seriously valuable tool in the &#x27;get some networking&#x2F;signals&#x2F;fd_set thing working as quickly as possible&quot; department.<p>Not that I&#x27;m suggesting the author switch to it, just that there is already a battle-tested and well-proven Lua-based framework for these things, and its worth investigating how it manages these abstractions.  The distinction between local and IP sockets is well managed, also ..</div><br/><div id="40843314" class="c"><input type="checkbox" id="c-40843314" checked=""/><div class="controls bullet"><span class="by">soxocx</span><span>|</span><a href="#40843301">parent</a><span>|</span><label class="collapse" for="c-40843314">[-]</label><label class="expand" for="c-40843314">[2 more]</label></div><br/><div class="children"><div class="content">There seems to be a copy double paste error in the link. Should be: <a href="https:&#x2F;&#x2F;turbo.readthedocs.io&#x2F;en&#x2F;latest" rel="nofollow">https:&#x2F;&#x2F;turbo.readthedocs.io&#x2F;en&#x2F;latest</a></div><br/><div id="40843485" class="c"><input type="checkbox" id="c-40843485" checked=""/><div class="controls bullet"><span class="by">boffinAudio</span><span>|</span><a href="#40843301">root</a><span>|</span><a href="#40843314">parent</a><span>|</span><label class="collapse" for="c-40843485">[-]</label><label class="expand" for="c-40843485">[1 more]</label></div><br/><div class="children"><div class="content">Thanks, fixed.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>