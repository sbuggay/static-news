<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1691830860179" as="style"/><link rel="stylesheet" href="styles.css?v=1691830860179"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://blog.danslimmon.com/2023/08/11/squeeze-the-hell-out-of-the-system-you-have/#like-2777">Squeeze the hell out of the system you have</a> <span class="domain">(<a href="https://blog.danslimmon.com">blog.danslimmon.com</a>)</span></div><div class="subtext"><span>sbmsr</span> | <span>241 comments</span></div><br/><div><div id="37098145" class="c"><input type="checkbox" id="c-37098145" checked=""/><div class="controls bullet"><span class="by">otar</span><span>|</span><a href="#37092875">next</a><span>|</span><label class="collapse" for="c-37098145">[-]</label><label class="expand" for="c-37098145">[1 more]</label></div><br/><div class="children"><div class="content">Loads of over-engineering decisions would be avoided if devs understood how to read EXPLAIN&#x2F;ANALYZE results and do the proper indexing&#x2F;query optimization.<p>Log queries, filter our the ones that are very frequent or take loads of time to execute, cache the frequent ones, optimize the fat ones, do this systematically and your system will be healthier.<p>Things that help massively from my experience:
- APM
- slow query log
- DB read&#x2F;write replicas
- partitioning and sharding</div><br/></div></div><div id="37092875" class="c"><input type="checkbox" id="c-37092875" checked=""/><div class="controls bullet"><span class="by">endisneigh</span><span>|</span><a href="#37098145">prev</a><span>|</span><a href="#37098211">next</a><span>|</span><label class="collapse" for="c-37092875">[-]</label><label class="expand" for="c-37092875">[95 more]</label></div><br/><div class="children"><div class="content">The bit on the database performance issues leads me to my hottest, flamiest take for new projects:<p>- Design your application&#x27;s hot path to never use joins. Storage is cheap, denormalize everything and update it all in a transaction. It&#x27;s truly amazing how much faster everything is when you eliminate joins. For your ad-hoc queries you can replicate to another database for analytical purposes.<p>On this note, I have mixed feelings about Amazon&#x27;s DynamoDB, but one things about it is to use it properly you need to plan your use first, and schema second. I think there&#x27;s something you can take from this even with a RDBMS.<p>In fact, I&#x27;d go as far to say as joins are unnecessary for nonanalytical purposes these days. Storage is so mind booglingly cheap and the major DBs have ACID properties. Just denormalize, forreal.<p>- Use something more akin to UUIDs to prevent hot partitions. They&#x27;re not a silver bullet and have their own downsides, but you&#x27;ll already be used to the consistently &quot;OK&quot; performance that can be horizontally scaled rather than the great performance of say integers that will fall apart eventually.<p>&#x2F;hottakes<p>my sun level take would be also to just index all columns. but that&#x27;ll have to wait for another day.</div><br/><div id="37096414" class="c"><input type="checkbox" id="c-37096414" checked=""/><div class="controls bullet"><span class="by">theptip</span><span>|</span><a href="#37092875">parent</a><span>|</span><a href="#37095427">next</a><span>|</span><label class="collapse" for="c-37096414">[-]</label><label class="expand" for="c-37096414">[3 more]</label></div><br/><div class="children"><div class="content">Honestly I couldn’t disagree more. I built a startup and paid little attention to perf for years 1-5, and finally in year 6 we started to get bitten by some perf issues in specific tables, and spent a few engineer-months optimizing.<p>In terms of tech debt it would have been way more expensive to make everything perform well from the start, we would have moved much slower and probably failed during a few crunch points.<p>Instead we paid probably a few $k&#x2F;mo more than we really needed to on machines, and in return saved man-months of effort at a time when we couldn’t hire enough engineers and the opportunity cost for feature work was huge. (Keep in mind that making everything perform well would have required us to do 10-20x as much work, because we could not know ahead of time where the hot spots would be. Some were surprising.)<p>Joins may be evil at scale, but most startups don’t have scale problems, at least not at first.<p>Denormalizing can be a good optimization but you pay a velocity cost in keeping all the copies in sync across changes. Someone will write the bug that misses a denormalized non-canonical field and serves up stale data to a user. It’s usually cheaper (in total cost, ie CapEx+OpEx) to write the join and optimize later with a read-aside cache or whatever, rather than contorting your schema.</div><br/><div id="37097581" class="c"><input type="checkbox" id="c-37097581" checked=""/><div class="controls bullet"><span class="by">re-thc</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37096414">parent</a><span>|</span><a href="#37095427">next</a><span>|</span><label class="collapse" for="c-37097581">[-]</label><label class="expand" for="c-37097581">[2 more]</label></div><br/><div class="children"><div class="content">&gt; I built a startup and paid little attention to perf for years 1-5, and finally in year 6 we started to get bitten by some perf issues in specific tables, and spent a few engineer-months optimizing.<p>This screams of if I don’t see it it the problem doesn’t exist view of the world.<p>How do you know it’s not a problem? Perhaps customers would have signed up if it as faster?<p>The problem is also treating it in terms of business value and&#x2F;or cost.<p>A lot of things are “free” and yet it’s ignored.<p>For most people, in simple cases like turning on http3, brotli, switching to newer instances and many others are all quick wins that I see ignored 90% of the time.<p>A good design, implementing some good practices etc are performance specific and don’t always cost more.</div><br/><div id="37097879" class="c"><input type="checkbox" id="c-37097879" checked=""/><div class="controls bullet"><span class="by">kreetx</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37097581">parent</a><span>|</span><a href="#37095427">next</a><span>|</span><label class="collapse" for="c-37097879">[-]</label><label class="expand" for="c-37097879">[1 more]</label></div><br/><div class="children"><div class="content">A denormalized database model is considered bad desig to begin with, and has performance costs on its own. This is why the OP says this is a &quot;hot take&quot;. :)<p>Maybe there <i>are</i> situations where this actually helps, although the resulting datastructure to me looks more like a multi-key cache.</div><br/></div></div></div></div></div></div><div id="37095427" class="c"><input type="checkbox" id="c-37095427" checked=""/><div class="controls bullet"><span class="by">crazygringo</span><span>|</span><a href="#37092875">parent</a><span>|</span><a href="#37096414">prev</a><span>|</span><a href="#37094414">next</a><span>|</span><label class="collapse" for="c-37095427">[-]</label><label class="expand" for="c-37095427">[19 more]</label></div><br/><div class="children"><div class="content">That <i>is</i> a hot take... ;)<p>But joins should never impact performance in a large way if they&#x27;re on the same server and properly indexed. &quot;It&#x27;s truly amazing how much faster everything is when you eliminate joins&quot; is just not true if you&#x27;re using joins correctly. Sadly, many developers simply never bother to learn.<p>On the other hand, having to write a piece of data to 20 different spots instead of 1 <i>is</i> going to be <i>dramatically</i> slower performance-wise, not to mention make your queries <i>tremendously</i> more complex and bug-prone, when you remember to update a value in 18 spots but forget about 2 of them.<p>You mention cheap storage as an advantage for denormalizing, but storage is the <i>least</i> problem here. It&#x27;s a vastly larger surface area for bugs, and terrible write performance (that can easily chew up read performance).</div><br/><div id="37095845" class="c"><input type="checkbox" id="c-37095845" checked=""/><div class="controls bullet"><span class="by">jiggawatts</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37095427">parent</a><span>|</span><a href="#37097433">next</a><span>|</span><label class="collapse" for="c-37095845">[-]</label><label class="expand" for="c-37095845">[1 more]</label></div><br/><div class="children"><div class="content">Storage might be cheap, but memory and bandwidth aren’t.<p>Memory is the new disk, and disk is the new tape.<p>You want everything to remain resident in memory, and spool backups and transaction logs to disk.<p>If you’re joining from disk, you’ve probably done something wrong.<p>E.g.: compression is often a net win because while it uses more CPU, it allows more data to fit into memory. And if it doesn’t fit, it reduces the disk I&#x2F;O required.<p>This is why I look upon JSON-based document databases in horror. They’re bloating the data out many times over by denormalizing <i>and then</i> expand that into a verbose and repetitive text format.<p>This is why we have insanity like placeholders for <i>text</i> on web apps now — they’re struggling to retrieve a mere kilobyte of data!</div><br/></div></div><div id="37097433" class="c"><input type="checkbox" id="c-37097433" checked=""/><div class="controls bullet"><span class="by">yashap</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37095427">parent</a><span>|</span><a href="#37095845">prev</a><span>|</span><a href="#37096024">next</a><span>|</span><label class="collapse" for="c-37097433">[-]</label><label class="expand" for="c-37097433">[12 more]</label></div><br/><div class="children"><div class="content">Joins are not inherently expensive, but they can lead to expensive queries. For example, say I want to find the 10 most recent users with a phone number as their primary contact method:<p>SELECT …<p>FROM User<p>JOIN ContactMethod on ContactMethod.userId = User.id<p>WHERE ContactMethod.priority = ‘primary’ AND ContactMethod.type = ‘phoneNumber’<p>ORDER BY User.createdAt DESC<p>LIMIT 10<p>If there are a very large number of users, and a very large number of phone number primary contacts, you cannot make this query fast&#x2F;efficient (on most RDBMSes). You CAN make this query fast&#x2F;efficient by denormalizing, ensuring the user creation date and primary contact method are on the same table, and then creating a compound index.  But if they’re in separate tables, and you have to join, you can’t make it efficient, because you can’t create cross-table compound indeces.<p>This pattern of join, filter by something in table A, sort by something in table B, and query out one page of data, is something that comes up a lot. It’s why ppl thing joins are generally expensive, but it’s more like they’re expensive in specific cases.</div><br/><div id="37097560" class="c"><input type="checkbox" id="c-37097560" checked=""/><div class="controls bullet"><span class="by">franckpachot</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37097433">parent</a><span>|</span><a href="#37097572">next</a><span>|</span><label class="collapse" for="c-37097560">[-]</label><label class="expand" for="c-37097560">[2 more]</label></div><br/><div class="children"><div class="content">With an index on User (createdAt, id) and one on ContactMethod ( primary,ContactMethod,userId), it should be fast (check that the the execution plan starts with User). Except if lot of recent users have no phones, but that will not be better in a single table (except if columnar storage)</div><br/><div id="37098140" class="c"><input type="checkbox" id="c-37098140" checked=""/><div class="controls bullet"><span class="by">aidos</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37097560">parent</a><span>|</span><a href="#37097572">next</a><span>|</span><label class="collapse" for="c-37098140">[-]</label><label class="expand" for="c-37098140">[1 more]</label></div><br/><div class="children"><div class="content">I imagine so too. You’ll be able to interate over the users in order and hit an instant index on contact method.<p><pre><code>    select
      *
    from
      user
    where
      exists (
        select
          true
        from
          contact_method cm
        where
          cm.contact_id = contact.id
          and cm.method = &#x27;phone&#x27;
          and cm.primary
      )
    order by
      created_at desc
    limit 10

    —- partial index is even faster
    create index primary_phone on contact_method (contact_id) where method = &#x27;phone&#x27; and primary;</code></pre></div><br/></div></div></div></div><div id="37097572" class="c"><input type="checkbox" id="c-37097572" checked=""/><div class="controls bullet"><span class="by">Turskarama</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37097433">parent</a><span>|</span><a href="#37097560">prev</a><span>|</span><a href="#37097928">next</a><span>|</span><label class="collapse" for="c-37097572">[-]</label><label class="expand" for="c-37097572">[1 more]</label></div><br/><div class="children"><div class="content">In my experience with SQL, a query like that should return in under a second even if you have 100k or more users.<p>There are some other tricks you can use if you&#x27;re clever&#x2F;lucky as well.  If you&#x27;re just using integer IDs (which is reasonable if your system isn&#x27;t distributed) then you could order by userid on you ContactMethod table and still get the same speed as you would with no join.</div><br/></div></div><div id="37097928" class="c"><input type="checkbox" id="c-37097928" checked=""/><div class="controls bullet"><span class="by">tlarkworthy</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37097433">parent</a><span>|</span><a href="#37097572">prev</a><span>|</span><a href="#37097740">next</a><span>|</span><label class="collapse" for="c-37097928">[-]</label><label class="expand" for="c-37097928">[4 more]</label></div><br/><div class="children"><div class="content">Yes this is the exact situation where sql falls short. You can&#x27;t make cross-table indexes to serve OLAP-esq queries, and the most recent X is the common one for pagination in applications.
I prefer to denormalize manually at write time in a transaction, rather than use triggers or materialized views.</div><br/><div id="37098060" class="c"><input type="checkbox" id="c-37098060" checked=""/><div class="controls bullet"><span class="by">ako</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37097928">parent</a><span>|</span><a href="#37097740">next</a><span>|</span><label class="collapse" for="c-37098060">[-]</label><label class="expand" for="c-37098060">[3 more]</label></div><br/><div class="children"><div class="content">Why do you prefer manually doing this rather than using materialized views? Materialized views seem easier to create and maintain?</div><br/><div id="37098118" class="c"><input type="checkbox" id="c-37098118" checked=""/><div class="controls bullet"><span class="by">tlarkworthy</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37098060">parent</a><span>|</span><a href="#37097740">next</a><span>|</span><label class="collapse" for="c-37098118">[-]</label><label class="expand" for="c-37098118">[2 more]</label></div><br/><div class="children"><div class="content">Because they are o(n) complexity to refresh so either you settle for eventual complexity or have expensive writes.
By forwarding just the index data to the right table you maintain an consistent idiomatic index at 0(1) write cost</div><br/><div id="37098149" class="c"><input type="checkbox" id="c-37098149" checked=""/><div class="controls bullet"><span class="by">aidos</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37098118">parent</a><span>|</span><a href="#37097740">next</a><span>|</span><label class="collapse" for="c-37098149">[-]</label><label class="expand" for="c-37098149">[1 more]</label></div><br/><div class="children"><div class="content">Agreed. Matarialized views will be limited in use until we get nice incremental updating versions.</div><br/></div></div></div></div></div></div></div></div><div id="37097740" class="c"><input type="checkbox" id="c-37097740" checked=""/><div class="controls bullet"><span class="by">Zanfa</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37097433">parent</a><span>|</span><a href="#37097928">prev</a><span>|</span><a href="#37097563">next</a><span>|</span><label class="collapse" for="c-37097740">[-]</label><label class="expand" for="c-37097740">[1 more]</label></div><br/><div class="children"><div class="content">&gt; If there are a very large number of users, and a very large number of phone number primary contacts, you cannot make this query fast&#x2F;efficient<p>I think specific numbers would help make this point better. With a few hundred thousand to low millions of users this should be plenty fast in Postgres for example. That’s magnitudes more than most startups ever reach anyway.</div><br/></div></div><div id="37097892" class="c"><input type="checkbox" id="c-37097892" checked=""/><div class="controls bullet"><span class="by">unnouinceput</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37097433">parent</a><span>|</span><a href="#37097563">prev</a><span>|</span><a href="#37096024">next</a><span>|</span><label class="collapse" for="c-37097892">[-]</label><label class="expand" for="c-37097892">[2 more]</label></div><br/><div class="children"><div class="content">If the tables involved in the join are of 100M+ records what I do when the joins use varchar columns to improve the performance is to use an additional integer column of the varchar one that is a CRC of it (or hash if you prefer that) and use the integer one instead in the join.</div><br/><div id="37098056" class="c"><input type="checkbox" id="c-37098056" checked=""/><div class="controls bullet"><span class="by">aidos</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37097892">parent</a><span>|</span><a href="#37096024">next</a><span>|</span><label class="collapse" for="c-37098056">[-]</label><label class="expand" for="c-37098056">[1 more]</label></div><br/><div class="children"><div class="content">That seems weirdly convoluted. So you store two columns to represent the foreign key?</div><br/></div></div></div></div></div></div><div id="37096024" class="c"><input type="checkbox" id="c-37096024" checked=""/><div class="controls bullet"><span class="by">endisneigh</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37095427">parent</a><span>|</span><a href="#37097433">prev</a><span>|</span><a href="#37094414">next</a><span>|</span><label class="collapse" for="c-37096024">[-]</label><label class="expand" for="c-37096024">[5 more]</label></div><br/><div class="children"><div class="content">I agree but I’m talking in the context where you can’t vertically scale anymore.<p>I also don’t think it’s worth the trouble “never using joins” for an existing project. Denormalize as necessary. But for a green one I honestly think since our access patterns can be understood as you continue you can completely get rid of joins.<p>Again, assuming your new project can’t fit on a single machine. If it can you’re best just following the “traditional” advice, or better yet keep everything in memory.</div><br/><div id="37096940" class="c"><input type="checkbox" id="c-37096940" checked=""/><div class="controls bullet"><span class="by">fastball</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37096024">parent</a><span>|</span><a href="#37094414">next</a><span>|</span><label class="collapse" for="c-37096940">[-]</label><label class="expand" for="c-37096940">[4 more]</label></div><br/><div class="children"><div class="content">How is it that your new project can&#x27;t fit on a single machine?</div><br/><div id="37098161" class="c"><input type="checkbox" id="c-37098161" checked=""/><div class="controls bullet"><span class="by">aidos</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37096940">parent</a><span>|</span><a href="#37097685">next</a><span>|</span><label class="collapse" for="c-37098161">[-]</label><label class="expand" for="c-37098161">[1 more]</label></div><br/><div class="children"><div class="content">Everyone thinks they start their project with Facebook scale problems.</div><br/></div></div><div id="37097685" class="c"><input type="checkbox" id="c-37097685" checked=""/><div class="controls bullet"><span class="by">yafbum</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37096940">parent</a><span>|</span><a href="#37098161">prev</a><span>|</span><a href="#37097276">next</a><span>|</span><label class="collapse" for="c-37097685">[-]</label><label class="expand" for="c-37097685">[1 more]</label></div><br/><div class="children"><div class="content">Could be plenty of reasons, but say you want to support spikey traffic like whatever is related to events, news, realtime information, etc., or highly seasonal stuff like a school portal or selling flowers on mother&#x27;s day, you want the ability to scale horizontally very quickly to accommodate spikes</div><br/></div></div><div id="37097276" class="c"><input type="checkbox" id="c-37097276" checked=""/><div class="controls bullet"><span class="by">cuu508</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37096940">parent</a><span>|</span><a href="#37097685">prev</a><span>|</span><a href="#37094414">next</a><span>|</span><label class="collapse" for="c-37097276">[-]</label><label class="expand" for="c-37097276">[1 more]</label></div><br/><div class="children"><div class="content">Perhaps they&#x27;re building an internet search engine.</div><br/></div></div></div></div></div></div></div></div><div id="37094414" class="c"><input type="checkbox" id="c-37094414" checked=""/><div class="controls bullet"><span class="by">feoren</span><span>|</span><a href="#37092875">parent</a><span>|</span><a href="#37095427">prev</a><span>|</span><a href="#37094399">next</a><span>|</span><label class="collapse" for="c-37094414">[-]</label><label class="expand" for="c-37094414">[19 more]</label></div><br/><div class="children"><div class="content">There are &quot;tall&quot; applications and &quot;wide&quot; applications. Almost all advice you ever read about database design and optimization is for &quot;tall&quot; applications. Basically, it means that your application is only doing one single thing, and everything else is in service of that. Most of the big tech companies you can think of are tall. They have only a handful of really critical, driving concepts in their data model.<p>Facebook really only has people, posts, and ads.<p>Netflix really only has accounts and shows.<p>Amazon (the product) really only has sellers, buyers, and products, with maybe a couple more behind the scene for logistics.<p>The reason for this is because tall applications are <i>easy</i>. Much, much easier than wide applications, which are often called &quot;enterprise&quot;. Enterprise software is bad because it&#x27;s <i>hard</i>. This is where the most unexplored territory is. This is where untold riches lie. The existing players in this space are abysmally bad at it (Oracle, etc.). You will be too, if you enter it with a tall mindset.<p>Advice like &quot;never user joins&quot; and &quot;design around a single table&quot; makes a lot of sense for tall applications. It&#x27;s awful, terrible, very bad, no-good advice for wide applications. You see this occasionally when these very tall companies attempt to do literally anything other than their core competency: they fail miserably, because they&#x27;re staffed with people who hold sacrosanct this kind of advice that <i>does not translate</i> to the vast space of &quot;wide&quot; applications. Just realize that: your advice is for companies doing easy things who are already successful and have run out of low-hanging fruit. Even tall applications that aren&#x27;t yet victims of their own success do not need to think about butchering their data model in service of performance. Only those who are already vastly successful and are trying to squeeze out the last juices of performance. But those are the people who <i>least need advice</i>. This kind of tall-centered advice, justified with &quot;FAANG is doing it so you should too&quot; and &quot;but what about when you have a billion users?&quot; is poisoning the minds of people who set off to do something more interesting than serve ads to billions of people.</div><br/><div id="37095283" class="c"><input type="checkbox" id="c-37095283" checked=""/><div class="controls bullet"><span class="by">DylanDmitri</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37094414">parent</a><span>|</span><a href="#37098092">next</a><span>|</span><label class="collapse" for="c-37095283">[-]</label><label class="expand" for="c-37095283">[3 more]</label></div><br/><div class="children"><div class="content">For Amazon, if we consider everything for website retail purchases, I would estimate tens of thousands of table schemas. This is counting:<p>- Sellers (Amazon, third party, retail store)
 - Inventory (forecasting, recommendation)
 - Customers (comments, ratings, returns, preferences)
 - Warehouses (5+ distinct types, filled with custom machines)
 - Transit Options (long haul, air, vans, cars, bikes, walking, boats)
 - Delivery Partners (DSP, Flex, Fedex, UPS - forecasting capacity here)
 - Routing (between warehouses, within warehouses, to specific homes)
 - skipping AWS
 - skipping billing
 - skipping advertising on amazon.com (bidding, attribution, etc)<p>There&#x27;s optimizations and metrics collected and packages transition between all these layers. There&#x27;s hundreds of &quot;neat projects&quot; running to special case different things; all them useful but adding complexity.<p>For example ordering prescriptions off Amazon pharmacy needs effectively its own website and permissions and integrations. Probably distinct sorting machines with supporting databases for them. Do you need to log repairs on those machines? Probably another table schema.<p>You want to normalize international addresses? And fine tune based on delivery status and logs and customer complaints and map data? Believe it not like 20 more tables. Oh this country has no clear addresses? Need to send experienced drivers to areas they already know. Need to track that in more tables.</div><br/><div id="37095491" class="c"><input type="checkbox" id="c-37095491" checked=""/><div class="controls bullet"><span class="by">r00fus</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37095283">parent</a><span>|</span><a href="#37098092">next</a><span>|</span><label class="collapse" for="c-37095491">[-]</label><label class="expand" for="c-37095491">[2 more]</label></div><br/><div class="children"><div class="content">But these aren&#x27;t the website, right? Amazon runs &quot;wide&quot; enterprise systems in the back end for sure.</div><br/><div id="37095522" class="c"><input type="checkbox" id="c-37095522" checked=""/><div class="controls bullet"><span class="by">DylanDmitri</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37095491">parent</a><span>|</span><a href="#37098092">next</a><span>|</span><label class="collapse" for="c-37095522">[-]</label><label class="expand" for="c-37095522">[1 more]</label></div><br/><div class="children"><div class="content">Oh yeah these are &quot;wide&quot; enterprise systems, and not for the website. I think we read the initial comment differently.</div><br/></div></div></div></div></div></div><div id="37098092" class="c"><input type="checkbox" id="c-37098092" checked=""/><div class="controls bullet"><span class="by">donavanm</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37094414">parent</a><span>|</span><a href="#37095283">prev</a><span>|</span><a href="#37097431">next</a><span>|</span><label class="collapse" for="c-37098092">[-]</label><label class="expand" for="c-37098092">[1 more]</label></div><br/><div class="children"><div class="content">I apologize up front if I completely misunderstand your intent. However ...<p>&gt; Amazon (the product) really only has sellers, buyers, and products, with maybe a couple more behind the scene for logistics.<p>Is a comically bad hot take that is so entirely divorced from reality. A full decade ago the item catalog (eg ASINs or items to purchase) <i>alone</i> had closer to 1,000 different subsystems&#x2F;components&#x2F;RPCs etc for a single query. I think you&#x27;d have to go back to circa 2000 before it could be optimistically described as a couple of databases for the item catalog.<p>DylanDmitri sibling comment is a hell of a lot closer to the truth, and I&#x27;d hazard is still orders of magnitude underestimating what it takes to go from viewing an item detail page to completing checkout, let alone picking or delivery. Theres a reason the service map diagram, again circa 2010, was called &quot;the deathstar.&quot;<p>&gt; &quot;FAANG is doing it so you should too&quot; and &quot;but what about when you have a billion users?&quot; is poisoning the minds of people<p>This part I completely agree with. And many individual components in those giant systems are dead simple. I dare say the best ones are simplistic even.</div><br/></div></div><div id="37097431" class="c"><input type="checkbox" id="c-37097431" checked=""/><div class="controls bullet"><span class="by">wruza</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37094414">parent</a><span>|</span><a href="#37098092">prev</a><span>|</span><a href="#37094673">next</a><span>|</span><label class="collapse" for="c-37097431">[-]</label><label class="expand" for="c-37097431">[1 more]</label></div><br/><div class="children"><div class="content"><i>This kind of tall-centered advice, justified with &quot;FAANG is doing it so you should too&quot; and &quot;but what about when you have a billion users?&quot; is poisoning the minds of people</i><p>The world runs on success stories, not on technology. I wish “wide” thinking was default, for both un-delusion and better development in this area. But everyone is amazed with facebook (not the site, just money), so they have to imitate it, like those tribes who build jets out of wood.</div><br/></div></div><div id="37094673" class="c"><input type="checkbox" id="c-37094673" checked=""/><div class="controls bullet"><span class="by">xyzzy123</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37094414">parent</a><span>|</span><a href="#37097431">prev</a><span>|</span><a href="#37094895">next</a><span>|</span><label class="collapse" for="c-37094673">[-]</label><label class="expand" for="c-37094673">[6 more]</label></div><br/><div class="children"><div class="content">Thanks I think this is a really interesting way to look at things.<p>What is the market for &quot;wide&quot; applications though? It seems like any particular business can only really support one or two of them, for some that will be SAP and for others it might be Salesforce (if they don&#x27;t need much ERP), or (as you mentioned) some giant semi homebrewed Oracle thing.<p>Usually there is a legacy system which is failing but still runs the business, and a &quot;next gen&quot; system which is not ready yet (and might never be, because it only supports a small number of use cases from the old software and even with an army of BAs it&#x27;s difficult to spec out all the things the old software is actually doing with any accuracy).<p>Or am I not quite getting the idea?</div><br/><div id="37095124" class="c"><input type="checkbox" id="c-37095124" checked=""/><div class="controls bullet"><span class="by">feoren</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37094673">parent</a><span>|</span><a href="#37095456">next</a><span>|</span><label class="collapse" for="c-37095124">[-]</label><label class="expand" for="c-37095124">[1 more]</label></div><br/><div class="children"><div class="content">I think you&#x27;re getting the idea -- both your points kinda highlight that this is something that companies want, but are not really getting.<p>As for the market, various sources have the &quot;enterprise software market&quot;, whatever that means, at somewhere around $100 billion to $300 billion. We also see companies trying over and over to do this kind of thing. The demand is clearly there.<p>Certainly the mandate &quot;help run the business&quot; is a wide concern, and that&#x27;s an OK working definition of &quot;enterprise&quot;, and what most existing solutions are trying to do. There are hundreds of interconnected concerns, lots of things to coordinate, etc.<p>There are other wide concerns, though. Almost anything in engineering and science. Take, for example, the question &quot;how can we reduce our greenhouse gas emissions?&quot; which a lot of companies are asking (or being forced to ask). If you wanted to build a SAAS product for helping companies reduce their GHG, you&#x27;ve got a wide problem, because there are a thousand activities that can emit GHG, and any given company is going to be doing dozens of them at once. But each company is different. Each state and country thinks of things differently. You might not even have the same calculations state-to-state.<p>Hard problems in science and engineering are just naturally cross-disciplinary, meaning your system has to know a lot of things about a lot of subjects. There are just thousands of little complicating differences and factors. If you&#x27;re trying to solve a problem like this, absolutely do <i>not</i> de-normalize your database.</div><br/></div></div><div id="37095456" class="c"><input type="checkbox" id="c-37095456" checked=""/><div class="controls bullet"><span class="by">other_herbert</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37094673">parent</a><span>|</span><a href="#37095124">prev</a><span>|</span><a href="#37094895">next</a><span>|</span><label class="collapse" for="c-37095456">[-]</label><label class="expand" for="c-37095456">[4 more]</label></div><br/><div class="children"><div class="content">Lotus notes is wide… I imagine their scope creep checker was just a sticky note that said Absolutely!!</div><br/><div id="37095476" class="c"><input type="checkbox" id="c-37095476" checked=""/><div class="controls bullet"><span class="by">lanstin</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37095456">parent</a><span>|</span><a href="#37094895">next</a><span>|</span><label class="collapse" for="c-37095476">[-]</label><label class="expand" for="c-37095476">[3 more]</label></div><br/><div class="children"><div class="content">I miss notes - it was really a better way to organize companies than anything later. Historical valuable data, records of why decisions were made, ephemeral email like things but for groups, user programmable if it didn&#x27;t quite match your needs, robust encryption, it had it all.</div><br/><div id="37095814" class="c"><input type="checkbox" id="c-37095814" checked=""/><div class="controls bullet"><span class="by">lifeisstillgood</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37095476">parent</a><span>|</span><a href="#37094895">next</a><span>|</span><label class="collapse" for="c-37095814">[-]</label><label class="expand" for="c-37095814">[2 more]</label></div><br/><div class="children"><div class="content">oh I always nust assumed Lotus Notes was just lesser Outlook.  can you give examples - such has how did it capture why decisions were made - that sounds ... hard or just &quot;someone wrote it down&quot;</div><br/><div id="37097376" class="c"><input type="checkbox" id="c-37097376" checked=""/><div class="controls bullet"><span class="by">anonzzzies</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37095814">parent</a><span>|</span><a href="#37094895">next</a><span>|</span><label class="collapse" for="c-37097376">[-]</label><label class="expand" for="c-37097376">[1 more]</label></div><br/><div class="children"><div class="content">It was a low&#x2F;nocode environment; anyone (with enough rights) could knock up a simple app with rules&#x2F;workflows and share it with the company. It made collecting, distributing and organising information easy if you knew what you were doing. It also created complex monsters as it was both too easy and too hard to use. I liked it a lot; we moved from Notes to Exchange and Sharepoint back in the day and it was awful for effiency. We required so much more people to do the same things. Luckily I left shortly after.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="37094895" class="c"><input type="checkbox" id="c-37094895" checked=""/><div class="controls bullet"><span class="by">pipe_connector</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37094414">parent</a><span>|</span><a href="#37094673">prev</a><span>|</span><a href="#37097700">next</a><span>|</span><label class="collapse" for="c-37094895">[-]</label><label class="expand" for="c-37094895">[3 more]</label></div><br/><div class="children"><div class="content">I agree with the characterization of applications you&#x27;ve laid out and think everyone should consider whether they&#x27;re working on a &quot;tall&quot; (most users use a narrow band of functionality) or a &quot;wide&quot; (most users use a mostly non-overlapping band of functionality) application.<p>I also agree with your take that tall applications are generally easier to build engineering-wise.<p>Where I disagree is that I think in general wide applications are failures in product design, even if profitable for a period of time. I&#x27;ve worked on a ton of wide applications, and each of them eventually became loathed by users and really hard to design features for. I think my advice would be to strive to build a tall application for as long as you can muster, because it means you understand your customers&#x27; problems better than anyone else.</div><br/><div id="37095032" class="c"><input type="checkbox" id="c-37095032" checked=""/><div class="controls bullet"><span class="by">feoren</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37094895">parent</a><span>|</span><a href="#37097700">next</a><span>|</span><label class="collapse" for="c-37095032">[-]</label><label class="expand" for="c-37095032">[2 more]</label></div><br/><div class="children"><div class="content">&gt; I&#x27;ve worked on a ton of wide applications, and each of them eventually became loathed by users and really hard to design features for.<p>Yes, I agree that this is the fate of most. But I refuse to believe it&#x27;s inevitable; rather, I think it comes from systemic flaws in our design thinking. Most of what we learn in a college database course, most of what we read online, most all ideas in this space, transfer poorly to &quot;wide&quot; design. People don&#x27;t realize this because those approaches do work well for tall applications, and because they&#x27;re regarded religiously. This is why I call them so much harder.</div><br/><div id="37096795" class="c"><input type="checkbox" id="c-37096795" checked=""/><div class="controls bullet"><span class="by">lll-o-lll</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37095032">parent</a><span>|</span><a href="#37097700">next</a><span>|</span><label class="collapse" for="c-37096795">[-]</label><label class="expand" for="c-37096795">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Yes, I agree that this is the fate of most. But I refuse to believe it&#x27;s inevitable<p>Yes exactly. It is not inevitable, I’ve worked on several “enterprise” software suits that did not suffer from this problem. However! They all had that period in their history where they did, and this is why:<p>Early on in a companies history there will be a number of “big” customers from whom most of the revenue is coming. To keep those customers and money flowing, often bespoke features are added for these customers and these accumulate over time. This is equivalent in character to maintaining several forks of an OSS project. Long term no forward progress can be made due to all time ending up in maintenance.<p>The solution to this sorry state is to transition to an “all features must be general for the product” and <i>ruthlessly</i> enforce this. That will also mean freezing customer specific “branches” and there will be a temporary hit to revenue. Customers need to be conditioned to the “no bespoke features” and they need to be sold on the long term benefits and be brought along for the ride.<p>This then enables massive scaling benefits, and the end of all your time in maintenance.</div><br/></div></div></div></div></div></div><div id="37097700" class="c"><input type="checkbox" id="c-37097700" checked=""/><div class="controls bullet"><span class="by">yafbum</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37094414">parent</a><span>|</span><a href="#37094895">prev</a><span>|</span><a href="#37095443">next</a><span>|</span><label class="collapse" for="c-37097700">[-]</label><label class="expand" for="c-37097700">[1 more]</label></div><br/><div class="children"><div class="content">Doesn&#x27;t that also say something like, it&#x27;s an easier road to success if you find the tall way to market and scale, scale, scale once you find it? What is the &quot;wide&quot; success story to take inspiration from?</div><br/></div></div><div id="37095443" class="c"><input type="checkbox" id="c-37095443" checked=""/><div class="controls bullet"><span class="by">other_herbert</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37094414">parent</a><span>|</span><a href="#37097700">prev</a><span>|</span><a href="#37094967">next</a><span>|</span><label class="collapse" for="c-37095443">[-]</label><label class="expand" for="c-37095443">[1 more]</label></div><br/><div class="children"><div class="content">That’s awesome …. I’ve gotta remember this when our PO’s want to add things that have absolutely no business being in our software…</div><br/></div></div><div id="37094967" class="c"><input type="checkbox" id="c-37094967" checked=""/><div class="controls bullet"><span class="by">endisneigh</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37094414">parent</a><span>|</span><a href="#37095443">prev</a><span>|</span><a href="#37096190">next</a><span>|</span><label class="collapse" for="c-37094967">[-]</label><label class="expand" for="c-37094967">[1 more]</label></div><br/><div class="children"><div class="content">I agree with your sentiment, but even enterprises work on multiple “tall” features.<p>If they didn’t then I’d change my advice to be simply multi tenant per customer and replicate into a column store for cross customer analytics.<p>What advice would you give for a “wide” application?</div><br/></div></div><div id="37096190" class="c"><input type="checkbox" id="c-37096190" checked=""/><div class="controls bullet"><span class="by">poidos</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37094414">parent</a><span>|</span><a href="#37094967">prev</a><span>|</span><a href="#37094399">next</a><span>|</span><label class="collapse" for="c-37096190">[-]</label><label class="expand" for="c-37096190">[1 more]</label></div><br/><div class="children"><div class="content">Very insightful, thank you for writing this.</div><br/></div></div></div></div><div id="37094399" class="c"><input type="checkbox" id="c-37094399" checked=""/><div class="controls bullet"><span class="by">macNchz</span><span>|</span><a href="#37092875">parent</a><span>|</span><a href="#37094414">prev</a><span>|</span><a href="#37093777">next</a><span>|</span><label class="collapse" for="c-37094399">[-]</label><label class="expand" for="c-37094399">[1 more]</label></div><br/><div class="children"><div class="content">Over the years I think I&#x27;ve encountered more pain from applications where the devs leaned on denormalization than from those that developed issues with join performance on large tables.<p>You can mash those big joins into a materialized view or ETL them into a column store or whatever you need to fix performance later on, but once someone has copied the `subtotal_cents` column onto the Order, Invoice, Payment, NotificationEmail, and UserProfileRecentOrders models, and they&#x27;re referenced and&#x2F;or updated in 296 different places...it&#x27;s a long road back to sanity.</div><br/></div></div><div id="37093777" class="c"><input type="checkbox" id="c-37093777" checked=""/><div class="controls bullet"><span class="by">wizofaus</span><span>|</span><a href="#37092875">parent</a><span>|</span><a href="#37094399">prev</a><span>|</span><a href="#37093211">next</a><span>|</span><label class="collapse" for="c-37093777">[-]</label><label class="expand" for="c-37093777">[4 more]</label></div><br/><div class="children"><div class="content">Can&#x27;t say I&#x27;ve ever come across a scenario where a join itself was the performance bottleneck. If there&#x27;s any single principle I have observed is &quot;don&#x27;t let a table get too big&quot;. More often than not it&#x27;s historical-record type tables that are the issue - but the amount of data you need for day-to-day operations is usually a tiny fraction of what&#x27;s actually in the table, and you&#x27;re bound to start finding operations on massive tables get slow no matter what indexes you have (and even the act of adding more indexes becomes problematic. And just indexing all columns isn&#x27;t enough for traditional RMDBSes at least - you have to index the right combinations of columns for them to be used. Might be different for DynamoDb).</div><br/><div id="37095463" class="c"><input type="checkbox" id="c-37095463" checked=""/><div class="controls bullet"><span class="by">pixl97</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093777">parent</a><span>|</span><a href="#37094916">next</a><span>|</span><label class="collapse" for="c-37095463">[-]</label><label class="expand" for="c-37095463">[2 more]</label></div><br/><div class="children"><div class="content">In enterprise clients you commonly run into issues where the company thinks you have to save all data forever. Very often this runs in a pattern where the application is lightly used a first then uptake increases over time. Then you run into the slowness issue. They typically expand DB sizing, bit eventually run into the problem where archiving is needed. This can be a huge problem when it&#x27;s an after thought instead of a primary design. All kinds of fun when you have key relationships between different tablea.</div><br/><div id="37095736" class="c"><input type="checkbox" id="c-37095736" checked=""/><div class="controls bullet"><span class="by">wizofaus</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37095463">parent</a><span>|</span><a href="#37094916">next</a><span>|</span><label class="collapse" for="c-37095736">[-]</label><label class="expand" for="c-37095736">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s more that once it gets to a certain size (say, 100s of 1000s of rows), doing anything with the table is painfully slow, often requiring you to take your application offline for considerable periods. Even deleting rows can take 10s of minutes at a time, and it can certainly take a very long time to work out what indexes need to be added and whether they&#x27;re actually helping.<p>Yes, sometimes the pressure comes from management etc., but more often than not it would be premature optimisation to add the archiving, so it&#x27;s a matter of finding a balance and &quot;predicting&quot; at what point the archiving needs to happen.<p>Table partitioning can help too but only so much.</div><br/></div></div></div></div><div id="37094916" class="c"><input type="checkbox" id="c-37094916" checked=""/><div class="controls bullet"><span class="by">8note</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093777">parent</a><span>|</span><a href="#37095463">prev</a><span>|</span><a href="#37093211">next</a><span>|</span><label class="collapse" for="c-37094916">[-]</label><label class="expand" for="c-37094916">[1 more]</label></div><br/><div class="children"><div class="content">Dynamo is quick for that, so long as you are picking good partition keys.<p>Instead, it&#x27;ll throw you hot key throttling if you start querying one partition too much</div><br/></div></div></div></div><div id="37093211" class="c"><input type="checkbox" id="c-37093211" checked=""/><div class="controls bullet"><span class="by">latchkey</span><span>|</span><a href="#37092875">parent</a><span>|</span><a href="#37093777">prev</a><span>|</span><a href="#37097053">next</a><span>|</span><label class="collapse" for="c-37093211">[-]</label><label class="expand" for="c-37093211">[7 more]</label></div><br/><div class="children"><div class="content">&gt; <i>Design your application&#x27;s hot path to never use joins.</i><p>Grab (uber of asia) did this religiously and it created a ton of friction within the company due to the way the teams were laid out. It always required one team to add some sort of API that another team could take advantage of. Since the first team was so busy always implementing their own features, it created roadblocks with other teams and everyone started pointing fingers at each other to the point that nothing ever got done on time.<p>Law of unintended consequences</div><br/><div id="37093980" class="c"><input type="checkbox" id="c-37093980" checked=""/><div class="controls bullet"><span class="by">tedunangst</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093211">parent</a><span>|</span><a href="#37093259">next</a><span>|</span><label class="collapse" for="c-37093980">[-]</label><label class="expand" for="c-37093980">[2 more]</label></div><br/><div class="children"><div class="content">Hard to follow the link. How would you join two tables between teams that don&#x27;t communicate?</div><br/><div id="37094960" class="c"><input type="checkbox" id="c-37094960" checked=""/><div class="controls bullet"><span class="by">latchkey</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093980">parent</a><span>|</span><a href="#37093259">next</a><span>|</span><label class="collapse" for="c-37094960">[-]</label><label class="expand" for="c-37094960">[1 more]</label></div><br/><div class="children"><div class="content">You don’t, that’s the problem.</div><br/></div></div></div></div><div id="37093259" class="c"><input type="checkbox" id="c-37093259" checked=""/><div class="controls bullet"><span class="by">endisneigh</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093211">parent</a><span>|</span><a href="#37093980">prev</a><span>|</span><a href="#37097053">next</a><span>|</span><label class="collapse" for="c-37093259">[-]</label><label class="expand" for="c-37093259">[4 more]</label></div><br/><div class="children"><div class="content">yes, this is a fair point. there&#x27;s no free lunch after all. without knowing more about what happened with Grab I&#x27;d say you could mitigate some of that with good management and access patterns, though.</div><br/><div id="37093356" class="c"><input type="checkbox" id="c-37093356" checked=""/><div class="controls bullet"><span class="by">latchkey</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093259">parent</a><span>|</span><a href="#37097053">next</a><span>|</span><label class="collapse" for="c-37093356">[-]</label><label class="expand" for="c-37093356">[3 more]</label></div><br/><div class="children"><div class="content">All in all though, I don&#x27;t think that &#x27;never use joins&#x27; is a good solution either since it does create more developer work almost every way you slice it.<p>I think the op&#x27;s solution of looking more closely at the hot paths and solving for those is a far better solution than re-architecting the application in ways that could, or can, create unintended consequences. People don&#x27;t consider that enough, at all.<p>Don&#x27;t forget that hot path resolution is the antithesis of &#x27;premature optimization&#x27;.<p>&gt; you could mitigate some of that with good management and access patterns<p>the CTO fired me for making those sorts of suggestions about better management, and then got fired himself a couple months later... ¯\_(ツ)_&#x2F;¯... even with the macro events, their stock is down 72% since it opened, which doesn&#x27;t surprise me in the least bit having been on the inside...</div><br/><div id="37095588" class="c"><input type="checkbox" id="c-37095588" checked=""/><div class="controls bullet"><span class="by">jodrellblank</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093356">parent</a><span>|</span><a href="#37097053">next</a><span>|</span><label class="collapse" for="c-37095588">[-]</label><label class="expand" for="c-37095588">[2 more]</label></div><br/><div class="children"><div class="content">Grab was the company Steve Yegge left Google to go to. He quit during COVID when he could no longer travel to Asia, and his retrospective is glowing, including of the CTO Mark Porter(I think?): &quot;<i>frankly, the “Grab Way” of collaboration teaches you life skills, such as psychological safety and inclusiveness, which work everywhere else as well. [...] We US Grabbers made many mistakes on the journey towards becoming better Grabbers. Mark Porter led the charge on figuring it out, and we’ve learned a ton from him as he has evolved as a person before our eyes [...] I want to thank Mark especially for helping me grow as a leader and as a person. It takes humility to become a better person, and Grab is a humbling place. The core company value of humility comes straight from the CEO and cofounder Anthony Tan, who is one of the most humble, down-to-earth people you’ll ever meet.</i>&quot;.<p>Is that, uhh, rose-tinted glasses?<p>2020: <a href="https:&#x2F;&#x2F;steve-yegge.medium.com&#x2F;saying-goodbye-to-the-best-gig-i-ever-had-a33736833c1e" rel="nofollow noreferrer">https:&#x2F;&#x2F;steve-yegge.medium.com&#x2F;saying-goodbye-to-the-best-gi...</a><p>Previously, 2018: <a href="https:&#x2F;&#x2F;steve-yegge.medium.com&#x2F;why-i-left-google-to-join-grab-86dfffc0be84" rel="nofollow noreferrer">https:&#x2F;&#x2F;steve-yegge.medium.com&#x2F;why-i-left-google-to-join-gra...</a><p>[I don&#x27;t have any knowledge of Grab or the people involved other than reading these two blog posts, or of the parent commenter].</div><br/><div id="37096668" class="c"><input type="checkbox" id="c-37096668" checked=""/><div class="controls bullet"><span class="by">latchkey</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37095588">parent</a><span>|</span><a href="#37097053">next</a><span>|</span><label class="collapse" for="c-37096668">[-]</label><label class="expand" for="c-37096668">[1 more]</label></div><br/><div class="children"><div class="content">Sorry, I gave the wrong role, it was this guy... VP of Eng [0] that fired me and then left for &#x27;personal reasons&#x27;... he was fired. Classic incompetent VP Eng manager who didn&#x27;t know anything about computers. Note how he never really found another position of equal stature as Grab...<p>I came along as an aquihire of a Vietnamese team that I just happened to be managing at the time. Great team of people. I negotiated a stupid high salary, probably because they weren&#x27;t used to someone negotiating at all (highest eng in all of Singapore) and that was part of why they were upset at me, I was making more than that VP of Eng and stirring the pot with comments about their poor architecture decisions.<p>Yegge was a good hire, but probably wrong company for him given the political differences. I think Yegge started a bit after I was fired. I remember thinking to myself that he&#x27;s either not going to be very effective or he won&#x27;t last long. To his credit, I think he lasted longer than I would have bet he would have. They had had another ex FB CTO much earlier before me, that was a train wreck [1] and ended up suing the company. They were without a CTO for a long time, probably thought Yegge could fill that roll and ended up hiring Mark instead.<p>There was a definite distinction between the Singapore and US&#x2F;Seattle teams, at least the short time while I was there, they pretty much didn&#x27;t talk to or like each other at all. It made getting those API calls almost impossible.<p>[0] <a href="https:&#x2F;&#x2F;www.techinasia.com&#x2F;kumaravel-leaves-grab" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.techinasia.com&#x2F;kumaravel-leaves-grab</a><p>[1] <a href="https:&#x2F;&#x2F;www.techinasia.com&#x2F;wei-zhu-leaves-grabtaxi" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.techinasia.com&#x2F;wei-zhu-leaves-grabtaxi</a></div><br/></div></div></div></div></div></div></div></div></div></div><div id="37097053" class="c"><input type="checkbox" id="c-37097053" checked=""/><div class="controls bullet"><span class="by">chaxor</span><span>|</span><a href="#37092875">parent</a><span>|</span><a href="#37093211">prev</a><span>|</span><a href="#37093731">next</a><span>|</span><label class="collapse" for="c-37097053">[-]</label><label class="expand" for="c-37097053">[1 more]</label></div><br/><div class="children"><div class="content">Thanks, I hate it.<p>This seems close to the territory of &quot;why do I need a database? I just keep a bunch of text files with really long names that described exactly what I did to compute the file.   They&#x27;re all in various directories, so if you need to find one just do some greps and finds on the whole system&quot;<p>I recognize there&#x27;s a big gap, but boy howdy does what you&#x27;re suggesting sound messy.</div><br/></div></div><div id="37093731" class="c"><input type="checkbox" id="c-37093731" checked=""/><div class="controls bullet"><span class="by">taylodl</span><span>|</span><a href="#37092875">parent</a><span>|</span><a href="#37097053">prev</a><span>|</span><a href="#37093464">next</a><span>|</span><label class="collapse" for="c-37093731">[-]</label><label class="expand" for="c-37093731">[11 more]</label></div><br/><div class="children"><div class="content">My hot take: always use a materialized view or a stored procedure. <i>Hide the actual, physical tables from the Application&#x27;s account!</i><p>The application doesn&#x27;t need to know how the data is physically stored in the database. They specify the logical view they need of the data. The DBAs create the materialized view&#x2F;stored procedure that&#x27;s needed to implement that logical view.<p>Since the application is <i>never</i> directly accessing the underlying physical data, it can be changed to make the retrieval more efficient without affecting any of the database&#x27;s users. You&#x27;re also getting the experts to create the required data access for you in the fastest, most efficient way possible.<p>We&#x27;ve been doing this for years now and it works great. It&#x27;s alleviated so many headaches we used to have.</div><br/><div id="37096848" class="c"><input type="checkbox" id="c-37096848" checked=""/><div class="controls bullet"><span class="by">wvenable</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093731">parent</a><span>|</span><a href="#37095497">next</a><span>|</span><label class="collapse" for="c-37096848">[-]</label><label class="expand" for="c-37096848">[1 more]</label></div><br/><div class="children"><div class="content">&quot;Show me your flowchart and conceal your tables, and I shall continue to be mystified. Show me your tables, and I won&#x27;t usually need your flowchart; it&#x27;ll be obvious.&quot; -- Fred Brooks, The Mythical Man Month (1975)<p>&gt; The application doesn&#x27;t need to know how the data is physically stored in the database.<p>In all the applications that I&#x27;ve designed, the application and the database design are in sync.  That&#x27;s not say that you wouldn&#x27;t use materialized views to deal with certain broad queries but I just don&#x27;t see how this level of abstraction would make a big difference.</div><br/></div></div><div id="37095497" class="c"><input type="checkbox" id="c-37095497" checked=""/><div class="controls bullet"><span class="by">lanstin</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093731">parent</a><span>|</span><a href="#37096848">prev</a><span>|</span><a href="#37094165">next</a><span>|</span><label class="collapse" for="c-37095497">[-]</label><label class="expand" for="c-37095497">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s how it was at AOL. But also, in general, people who wrote C code never designed SQL stuff. We&#x27;d come up with some requirements, meet with a DBA (who at the time got paid a lot more money, I always assumed because their work was inherently dull), they&#x27;d put together stored procedures for use to call, and then do whatever on the physical table side. They did sometimes change the physical table stuff without us having to change anything (not sharding tho, that was edit a TCL file and restart when they said to restart).</div><br/></div></div><div id="37094165" class="c"><input type="checkbox" id="c-37094165" checked=""/><div class="controls bullet"><span class="by">walterbell</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093731">parent</a><span>|</span><a href="#37095497">prev</a><span>|</span><a href="#37097032">next</a><span>|</span><label class="collapse" for="c-37094165">[-]</label><label class="expand" for="c-37094165">[1 more]</label></div><br/><div class="children"><div class="content">Interface contracts and indirection FTW.<p>2011, &quot;Materialized Views&quot; by Rada Chirkova and Jun Yang, <a href="https:&#x2F;&#x2F;dsf.berkeley.edu&#x2F;cs286&#x2F;papers&#x2F;mv-fntdb2012.pdf" rel="nofollow noreferrer">https:&#x2F;&#x2F;dsf.berkeley.edu&#x2F;cs286&#x2F;papers&#x2F;mv-fntdb2012.pdf</a><p><i>&gt; We cover three fundamental problems: (1) maintaining materialized views efficiently when the base tables change, (2) using materialized views effectively to improve performance and availability, and (3) selecting which views to materialize. We also point out their connections to a few other areas in database research, illustrate the benefit of cross-pollination of ideas with these areas, and identify several directions for research on materialized views.</i></div><br/></div></div><div id="37097032" class="c"><input type="checkbox" id="c-37097032" checked=""/><div class="controls bullet"><span class="by">porridgeandrice</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093731">parent</a><span>|</span><a href="#37094165">prev</a><span>|</span><a href="#37094054">next</a><span>|</span><label class="collapse" for="c-37097032">[-]</label><label class="expand" for="c-37097032">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, I like doing this too. Not _always_, but for a few things. I use it to emulate partial functions.<p>In a show hosting&#x2F;ticket booking app for example, I never want in any case user facing search&#x2F;by-id endpoints to serve a show from 2 months ago. So I create a view `select * from shows where time &gt; now`. I can now use this as a &#x27;table&#x27; and apply more filters and joins to this if I wish.</div><br/></div></div><div id="37094054" class="c"><input type="checkbox" id="c-37094054" checked=""/><div class="controls bullet"><span class="by">alfor</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093731">parent</a><span>|</span><a href="#37097032">prev</a><span>|</span><a href="#37094746">next</a><span>|</span><label class="collapse" for="c-37094054">[-]</label><label class="expand" for="c-37094054">[3 more]</label></div><br/><div class="children"><div class="content">But for the saves the structure is visible?</div><br/><div id="37094077" class="c"><input type="checkbox" id="c-37094077" checked=""/><div class="controls bullet"><span class="by">taylodl</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37094054">parent</a><span>|</span><a href="#37094746">next</a><span>|</span><label class="collapse" for="c-37094077">[-]</label><label class="expand" for="c-37094077">[2 more]</label></div><br/><div class="children"><div class="content">You can update underlying data via a materialized view.</div><br/><div id="37096455" class="c"><input type="checkbox" id="c-37096455" checked=""/><div class="controls bullet"><span class="by">NortySpock</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37094077">parent</a><span>|</span><a href="#37094746">next</a><span>|</span><label class="collapse" for="c-37096455">[-]</label><label class="expand" for="c-37096455">[1 more]</label></div><br/><div class="children"><div class="content">Heck, at least with SQL Server 2017, I&#x27;ve been able to write updates to a thin view, and so long as the columns referenced were not ambiguous, the database would handle the underlying tables and locks required.</div><br/></div></div></div></div></div></div><div id="37094746" class="c"><input type="checkbox" id="c-37094746" checked=""/><div class="controls bullet"><span class="by">downWidOutaFite</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093731">parent</a><span>|</span><a href="#37094054">prev</a><span>|</span><a href="#37093464">next</a><span>|</span><label class="collapse" for="c-37094746">[-]</label><label class="expand" for="c-37094746">[3 more]</label></div><br/><div class="children"><div class="content">This doesn&#x27;t work because DBAs are rarely on the dev team&#x27;s sprint schedule. If the DBAs are blocking them devs can and will figure out how to route around the gatekeepers. In general, keep the logic in the app not the db.</div><br/><div id="37095567" class="c"><input type="checkbox" id="c-37095567" checked=""/><div class="controls bullet"><span class="by">icedchai</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37094746">parent</a><span>|</span><a href="#37095196">next</a><span>|</span><label class="collapse" for="c-37095567">[-]</label><label class="expand" for="c-37095567">[1 more]</label></div><br/><div class="children"><div class="content">Also, many companies don&#x27;t even <i>have</i> DBAs these days. DBA is, at best, a part time job for a senior+ engineer.</div><br/></div></div><div id="37095196" class="c"><input type="checkbox" id="c-37095196" checked=""/><div class="controls bullet"><span class="by">taylodl</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37094746">parent</a><span>|</span><a href="#37095567">prev</a><span>|</span><a href="#37093464">next</a><span>|</span><label class="collapse" for="c-37095196">[-]</label><label class="expand" for="c-37095196">[1 more]</label></div><br/><div class="children"><div class="content">We have sprints. We also have super responsive DBAs. Keeping the logic in the app is the path to unresponsive database calls. Been there, done that. Not going back to that crap.<p>In all seriousness, I won&#x27;t work for an organization that works the way you describe. It&#x27;s a red flag and a sign of organizational issues, personality issues, and ineffective management. Don&#x27;t need to waste my time at a place like that.</div><br/></div></div></div></div></div></div><div id="37093464" class="c"><input type="checkbox" id="c-37093464" checked=""/><div class="controls bullet"><span class="by">tibbetts</span><span>|</span><a href="#37092875">parent</a><span>|</span><a href="#37093731">prev</a><span>|</span><a href="#37095533">next</a><span>|</span><label class="collapse" for="c-37093464">[-]</label><label class="expand" for="c-37093464">[2 more]</label></div><br/><div class="children"><div class="content">Premature denomalization is expensive complexity. Denormalization is a great tool, maybe an under-used tool. But you should wait until there are hot paths before using it.</div><br/><div id="37094305" class="c"><input type="checkbox" id="c-37094305" checked=""/><div class="controls bullet"><span class="by">endisneigh</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093464">parent</a><span>|</span><a href="#37095533">next</a><span>|</span><label class="collapse" for="c-37094305">[-]</label><label class="expand" for="c-37094305">[1 more]</label></div><br/><div class="children"><div class="content">I agree. To be clear I&#x27;m not suggesting anyone start denormalizing everything. I&#x27;m saying if you&#x27;re fortunate enough to be on a green project, you should design the schema around the access patterns which will surely be &quot;denomarlized.&quot; as opposed to designing a normalized schema and designing your access patterns around those.</div><br/></div></div></div></div><div id="37095533" class="c"><input type="checkbox" id="c-37095533" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#37092875">parent</a><span>|</span><a href="#37093464">prev</a><span>|</span><a href="#37097814">next</a><span>|</span><label class="collapse" for="c-37095533">[-]</label><label class="expand" for="c-37095533">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Design your application&#x27;s hot path to never use joins<p>I had a Chief Architect who decreed this.<p>So engineers wound up doing joins in application code, with far worse performance, filtering, memory caching, etc.</div><br/></div></div><div id="37097814" class="c"><input type="checkbox" id="c-37097814" checked=""/><div class="controls bullet"><span class="by">dajonker</span><span>|</span><a href="#37092875">parent</a><span>|</span><a href="#37095533">prev</a><span>|</span><a href="#37097726">next</a><span>|</span><label class="collapse" for="c-37097814">[-]</label><label class="expand" for="c-37097814">[1 more]</label></div><br/><div class="children"><div class="content">Very hot take indeed. As with all things, it depends and use the query planner to measure what actually makes a difference.<p>In our application we have one important join that actually makes things a lot faster than the denormalized alternatieve. The main table has about 8 references to an organization table. To figure out what rows should be selected for a particular organization, you could either query on those 8 columns, making a very big where&#x2F;or clause. As it turns out, PostgreSQL will usually end up doing a full table scan despite any index you would create.<p>Instead, there is an auxiliary table with two columns, one for organization and one reference to the main table. Joining on this table simplifies the query and also turns out to be much faster.</div><br/></div></div><div id="37097726" class="c"><input type="checkbox" id="c-37097726" checked=""/><div class="controls bullet"><span class="by">Buttons840</span><span>|</span><a href="#37092875">parent</a><span>|</span><a href="#37097814">prev</a><span>|</span><a href="#37093093">next</a><span>|</span><label class="collapse" for="c-37097726">[-]</label><label class="expand" for="c-37097726">[1 more]</label></div><br/><div class="children"><div class="content">&gt; On this note, I have mixed feelings about Amazon&#x27;s DynamoDB, but one things about it is to use it properly you need to plan your use first, and schema second. I think there&#x27;s something you can take from this even with a RDBMS.<p>This captures the experience I&#x27;ve had with DynamoDB and document databases in general. They appear more flexible at first, but in truth they are much less flexible. You <i>must</i> get them right up front or your going to be paying thousands of dollars every month in AWS bills just for DynamoDB. The need to get things right up front is the opposite of flexibility.</div><br/></div></div><div id="37093093" class="c"><input type="checkbox" id="c-37093093" checked=""/><div class="controls bullet"><span class="by">iamwil</span><span>|</span><a href="#37092875">parent</a><span>|</span><a href="#37097726">prev</a><span>|</span><a href="#37097132">next</a><span>|</span><label class="collapse" for="c-37093093">[-]</label><label class="expand" for="c-37093093">[9 more]</label></div><br/><div class="children"><div class="content">If you don&#x27;t use joins, how do you associate records from two different tables when displaying the UI? Do you just join in the application? Or something else?</div><br/><div id="37093144" class="c"><input type="checkbox" id="c-37093144" checked=""/><div class="controls bullet"><span class="by">endisneigh</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093093">parent</a><span>|</span><a href="#37093357">next</a><span>|</span><label class="collapse" for="c-37093144">[-]</label><label class="expand" for="c-37093144">[5 more]</label></div><br/><div class="children"><div class="content">this has opinionated answers.<p>if you ask Amazon, they might suggest that you design around a single table (<a href="https:&#x2F;&#x2F;aws.amazon.com&#x2F;blogs&#x2F;compute&#x2F;creating-a-single-table-design-with-amazon-dynamodb&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;aws.amazon.com&#x2F;blogs&#x2F;compute&#x2F;creating-a-single-table...</a>).<p>in my opinion it&#x27;s easier to use join tables. which are what are sometimes temporarily created when you do a join anyways. in this case, you permanently create table1, table2, and table1_join_table2, and keep all three in sync transactionally. when you need a join you just select on table1_join_table2. you might think this is a waste of space, but I&#x27;d argue storage is too cheap for you to be thinking about that.<p>that being said, you really have to design around your access patterns, don&#x27;t design your application around your schema. most people do the latter because it seems more natural. what this might mean in practice is that you do mockups of all of the expected pages and what data is necessary on each one. <i>then</i> you design a schema that results in you never having to do joins on the majority, if not all, of them.</div><br/><div id="37095532" class="c"><input type="checkbox" id="c-37095532" checked=""/><div class="controls bullet"><span class="by">r00fus</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093144">parent</a><span>|</span><a href="#37093763">next</a><span>|</span><label class="collapse" for="c-37095532">[-]</label><label class="expand" for="c-37095532">[1 more]</label></div><br/><div class="children"><div class="content">Would it be possible to simply use a materialized view for table1_join_table2?</div><br/></div></div><div id="37093763" class="c"><input type="checkbox" id="c-37093763" checked=""/><div class="controls bullet"><span class="by">sainez</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093144">parent</a><span>|</span><a href="#37095532">prev</a><span>|</span><a href="#37093357">next</a><span>|</span><label class="collapse" for="c-37093763">[-]</label><label class="expand" for="c-37093763">[3 more]</label></div><br/><div class="children"><div class="content">&gt; what this might mean in practice is that you do mockups of all of the expected pages and what data is necessary on each one. then you design a schema that results in you never having to do joins on the majority, if not all, of them.<p>Great suggestion! I had a role where I helped a small team develop a full stack, data-heavy application. I felt pretty good about the individual layers but I felt we could have done a better job at achieving cohesion in the big picture. Do you have any resources where people think about these sorts of things deeply?</div><br/><div id="37094271" class="c"><input type="checkbox" id="c-37094271" checked=""/><div class="controls bullet"><span class="by">walterbell</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093763">parent</a><span>|</span><a href="#37093357">next</a><span>|</span><label class="collapse" for="c-37094271">[-]</label><label class="expand" for="c-37094271">[2 more]</label></div><br/><div class="children"><div class="content">2001, &quot;Denormalization effects on performance of RDBMS&quot;, by 
G. L. Sanders and Seungkyoon Shin, <a href="https:&#x2F;&#x2F;www.semanticscholar.org&#x2F;paper&#x2F;Denormalization-effects-on-performance-of-RDBMS-Sanders-Shin&#x2F;7643e5a175693ca07eff70e933214a67f216186f" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.semanticscholar.org&#x2F;paper&#x2F;Denormalization-effect...</a><p><i>&gt; We have suggested using denormalization as an intermediate step between logical and physical modeling, to be used as an analytic procedure for the design of the applications requirements criteria ... The guidelines and methodology presented are sufficiently general, and they can be applicable to most databases ...  denormalization can enhance query performance when it is deployed with a complete understanding of application requirements.</i><p>PDF: <a href="https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20171201030308&#x2F;https:&#x2F;&#x2F;pdfs.semanticscholar.org&#x2F;2c79&#x2F;069c01ba8d598f32e61fe367ef6d261a0cb4.pdf" rel="nofollow noreferrer">https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20171201030308&#x2F;https:&#x2F;&#x2F;pdfs.sema...</a></div><br/><div id="37094325" class="c"><input type="checkbox" id="c-37094325" checked=""/><div class="controls bullet"><span class="by">endisneigh</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37094271">parent</a><span>|</span><a href="#37093357">next</a><span>|</span><label class="collapse" for="c-37094325">[-]</label><label class="expand" for="c-37094325">[1 more]</label></div><br/><div class="children"><div class="content">yeah, exactly. in my experience the vast majority of access patterns are designed around a normalized schema, where it really should be that the schema is designed around the access patterns and generously &quot;denormalize&quot; (which doesn&#x27;t make sense in this context of a new database) as necessary.</div><br/></div></div></div></div></div></div></div></div><div id="37093357" class="c"><input type="checkbox" id="c-37093357" checked=""/><div class="controls bullet"><span class="by">joshstrange</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093093">parent</a><span>|</span><a href="#37093144">prev</a><span>|</span><a href="#37097132">next</a><span>|</span><label class="collapse" for="c-37093357">[-]</label><label class="expand" for="c-37093357">[3 more]</label></div><br/><div class="children"><div class="content">Single Table Design is the way forward here. I can highly recommend The DynamoDB Book [0] and anything (talks, blogs, etc) that Rick Houlihan has put out. In previous discussions the author shared a coupon code (&quot;HACKERNEWS&quot;) that will take $20-$50 off the cost depending on the package you buy. It worked earlier this year for me when I bought the book. It was very helpful and I referred back to it a number of times. This github repo [1] is also a wealth of information (maintained by the same guy who wrote the book).<p>As an added data point I don&#x27;t really like programming books but bought this since the data out there on Single Table Design was sparse or not well organized, it was worth every penny for me.<p>[0] <a href="https:&#x2F;&#x2F;www.dynamodbbook.com&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.dynamodbbook.com&#x2F;</a><p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;alexdebrie&#x2F;awesome-dynamodb">https:&#x2F;&#x2F;github.com&#x2F;alexdebrie&#x2F;awesome-dynamodb</a></div><br/><div id="37093482" class="c"><input type="checkbox" id="c-37093482" checked=""/><div class="controls bullet"><span class="by">deely3</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093357">parent</a><span>|</span><a href="#37097132">next</a><span>|</span><label class="collapse" for="c-37093482">[-]</label><label class="expand" for="c-37093482">[2 more]</label></div><br/><div class="children"><div class="content">And if you don&#x27;t want to spend money, you can get idea from this article:<p><a href="https:&#x2F;&#x2F;www.alexdebrie.com&#x2F;posts&#x2F;dynamodb-single-table&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.alexdebrie.com&#x2F;posts&#x2F;dynamodb-single-table&#x2F;</a><p>Im really curious about real life performance on different databases, especially in situation where RAM is smaller than database size.</div><br/><div id="37093960" class="c"><input type="checkbox" id="c-37093960" checked=""/><div class="controls bullet"><span class="by">wizofaus</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093482">parent</a><span>|</span><a href="#37097132">next</a><span>|</span><label class="collapse" for="c-37093960">[-]</label><label class="expand" for="c-37093960">[1 more]</label></div><br/><div class="children"><div class="content">That article didn&#x27;t appear to be suggesting single-table design was appropriate for general purpose RMDBSes (or any database other than DynamoDb).</div><br/></div></div></div></div></div></div></div></div><div id="37097132" class="c"><input type="checkbox" id="c-37097132" checked=""/><div class="controls bullet"><span class="by">hliyan</span><span>|</span><a href="#37092875">parent</a><span>|</span><a href="#37093093">prev</a><span>|</span><a href="#37097418">next</a><span>|</span><label class="collapse" for="c-37097132">[-]</label><label class="expand" for="c-37097132">[1 more]</label></div><br/><div class="children"><div class="content">Ten years ago when DB engines were not as good and servers were not as large, I did something similar -- set up a trigger on insert&#x2F;updates to certain relations that auto updates the main record with a cache column. Back then it was comma separated, but today I would obviously use JSONB. Back then it reduced latency significantly. Today, I would probably not attempt it.</div><br/></div></div><div id="37097418" class="c"><input type="checkbox" id="c-37097418" checked=""/><div class="controls bullet"><span class="by">anonzzzies</span><span>|</span><a href="#37092875">parent</a><span>|</span><a href="#37097132">prev</a><span>|</span><a href="#37097794">next</a><span>|</span><label class="collapse" for="c-37097418">[-]</label><label class="expand" for="c-37097418">[1 more]</label></div><br/><div class="children"><div class="content">As indeed a traditional HN remark, you are giving advice for applications that almost no one will ever need to build because you will never, ever see the type of traffic&#x2F;users for it.<p>Also, doing these things ; dejoining, UUIDs and indexing all columns (really unsure about this one; why?), might be better later on, but at the start it will be a lot heavier.<p>Modern hardware and databases can take an incredible amount of traffic if you use them in the right and natural way without artificial tricks.</div><br/></div></div><div id="37097794" class="c"><input type="checkbox" id="c-37097794" checked=""/><div class="controls bullet"><span class="by">bbojan</span><span>|</span><a href="#37092875">parent</a><span>|</span><a href="#37097418">prev</a><span>|</span><a href="#37097337">next</a><span>|</span><label class="collapse" for="c-37097794">[-]</label><label class="expand" for="c-37097794">[1 more]</label></div><br/><div class="children"><div class="content">&gt; - Design your application&#x27;s hot path to never use joins. Storage is cheap, denormalize everything and update it all in a transaction.<p>Hard disagree. You just re-implemented a database engine in your application code. Poorly.</div><br/></div></div><div id="37097337" class="c"><input type="checkbox" id="c-37097337" checked=""/><div class="controls bullet"><span class="by">killthebuddha</span><span>|</span><a href="#37092875">parent</a><span>|</span><a href="#37097794">prev</a><span>|</span><a href="#37094336">next</a><span>|</span><label class="collapse" for="c-37097337">[-]</label><label class="expand" for="c-37097337">[1 more]</label></div><br/><div class="children"><div class="content">IME if a join is the problem, a join is not the problem.</div><br/></div></div><div id="37094336" class="c"><input type="checkbox" id="c-37094336" checked=""/><div class="controls bullet"><span class="by">wtetzner</span><span>|</span><a href="#37092875">parent</a><span>|</span><a href="#37097337">prev</a><span>|</span><a href="#37092997">next</a><span>|</span><label class="collapse" for="c-37094336">[-]</label><label class="expand" for="c-37094336">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;d say that probably depends on what your hot path is. If it&#x27;s write-heavy, then you&#x27;ll probably end up with performance issues when you need to write the same data to multiple tables in a single transaction. And if all of those columns are indexed, it&#x27;ll be even worse.</div><br/></div></div><div id="37092997" class="c"><input type="checkbox" id="c-37092997" checked=""/><div class="controls bullet"><span class="by">Scarbutt</span><span>|</span><a href="#37092875">parent</a><span>|</span><a href="#37094336">prev</a><span>|</span><a href="#37093110">next</a><span>|</span><label class="collapse" for="c-37092997">[-]</label><label class="expand" for="c-37092997">[7 more]</label></div><br/><div class="children"><div class="content">Normalization is not only about data storage but most importantly, data integrity.</div><br/><div id="37093040" class="c"><input type="checkbox" id="c-37093040" checked=""/><div class="controls bullet"><span class="by">endisneigh</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37092997">parent</a><span>|</span><a href="#37093110">next</a><span>|</span><label class="collapse" for="c-37093040">[-]</label><label class="expand" for="c-37093040">[6 more]</label></div><br/><div class="children"><div class="content">Yes, but I assert that it&#x27;s possible to use transactions to update everything consistently. Serializable transactions weren&#x27;t really common when MySQL&#x2F;Postgres <i>first</i> came out, but now that they&#x27;re common in new DBs + ACID, I think it&#x27;s not possible to do with reasonable difficulty. If you agree with this, than its easy to prove that denormalized tables performance increase is well worth the annoyance of updating everything to transactionally update the dependencies.<p>I won&#x27;t say that it&#x27;s trivial to update all of your business logic to do this, but I think it&#x27;s definitely worth it for a new project at least.</div><br/><div id="37093175" class="c"><input type="checkbox" id="c-37093175" checked=""/><div class="controls bullet"><span class="by">Bognar</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093040">parent</a><span>|</span><a href="#37093693">next</a><span>|</span><label class="collapse" for="c-37093175">[-]</label><label class="expand" for="c-37093175">[2 more]</label></div><br/><div class="children"><div class="content">Denormalized transactions are not trivial unless you are using serializable isolation level which will kill performance. If you don&#x27;t use serializable isolation level, then you risk either running into deadlocks (which will kill performance) or inconsistency.<p>Decent SQL databases offer materialized views, which probably give you what you want without all the headache of maintaining denormalized tables yourself.</div><br/><div id="37093246" class="c"><input type="checkbox" id="c-37093246" checked=""/><div class="controls bullet"><span class="by">endisneigh</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093175">parent</a><span>|</span><a href="#37093693">next</a><span>|</span><label class="collapse" for="c-37093246">[-]</label><label class="expand" for="c-37093246">[1 more]</label></div><br/><div class="children"><div class="content">all fair points, but to be fair I don&#x27;t necessary think this makes the most sense for an existing project for the reasons you state. I do think for a new project would best be able to design around the access patterns in a way that eliminate most of the downsides.</div><br/></div></div></div></div><div id="37093693" class="c"><input type="checkbox" id="c-37093693" checked=""/><div class="controls bullet"><span class="by">williamdclt</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093040">parent</a><span>|</span><a href="#37093175">prev</a><span>|</span><a href="#37093128">next</a><span>|</span><label class="collapse" for="c-37093693">[-]</label><label class="expand" for="c-37093693">[2 more]</label></div><br/><div class="children"><div class="content">Transactions are not only (actually mainly not) about atomicity. Of course it’s possible to keep data integrity without normalisation, but that means you need to maintain the invariants yourself at application level and a big could result in data inconsistency. Normalisation isn’t there to make integrity possible, it’s there to make (some) non-integrity impossible.<p>Nobody says you have to have only one view of your data though. You can have a normalised view of your data to write, and another denormalised for fast reads (you usually have to, at scale). Something like event sourcing is another way (which is actually pushing invariants to application level, in a structured way)</div><br/><div id="37095507" class="c"><input type="checkbox" id="c-37095507" checked=""/><div class="controls bullet"><span class="by">sgarland</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093693">parent</a><span>|</span><a href="#37093128">next</a><span>|</span><label class="collapse" for="c-37095507">[-]</label><label class="expand" for="c-37095507">[1 more]</label></div><br/><div class="children"><div class="content">&gt; that means you need to maintain the invariants yourself at application level<p>Foreign Keys.<p>Of course, now you have a new set of problems, but referential integrity isn&#x27;t one of them.</div><br/></div></div></div></div><div id="37093128" class="c"><input type="checkbox" id="c-37093128" checked=""/><div class="controls bullet"><span class="by">Guvante</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093040">parent</a><span>|</span><a href="#37093693">prev</a><span>|</span><a href="#37093110">next</a><span>|</span><label class="collapse" for="c-37093128">[-]</label><label class="expand" for="c-37093128">[1 more]</label></div><br/><div class="children"><div class="content">You always need to compare write vs read performance.<p>Turning a single table update into a 10 table one could tip your lock contention to the point where you are write bound or worse start hitting retries.<p>Certainly it makes sense to move rarely updated fields to where they are used makes sense.<p>Similarly &quot;build your table against your queries not your ideal data model&quot; is always sage advice.</div><br/></div></div></div></div></div></div><div id="37093110" class="c"><input type="checkbox" id="c-37093110" checked=""/><div class="controls bullet"><span class="by">skybrian</span><span>|</span><a href="#37092875">parent</a><span>|</span><a href="#37092997">prev</a><span>|</span><a href="#37098211">next</a><span>|</span><label class="collapse" for="c-37093110">[-]</label><label class="expand" for="c-37093110">[3 more]</label></div><br/><div class="children"><div class="content">I’m wondering if indexes and materialized views can be used to do basically the same thing? That is, assuming they contain all the columns you want.</div><br/><div id="37093442" class="c"><input type="checkbox" id="c-37093442" checked=""/><div class="controls bullet"><span class="by">giantrobot</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093110">parent</a><span>|</span><a href="#37093380">next</a><span>|</span><label class="collapse" for="c-37093442">[-]</label><label class="expand" for="c-37093442">[1 more]</label></div><br/><div class="children"><div class="content">There&#x27;s always money in the banana sta...materialized views. Materialized views will get you quite a ways on read heavy workloads.</div><br/></div></div><div id="37093380" class="c"><input type="checkbox" id="c-37093380" checked=""/><div class="controls bullet"><span class="by">latchkey</span><span>|</span><a href="#37092875">root</a><span>|</span><a href="#37093110">parent</a><span>|</span><a href="#37093442">prev</a><span>|</span><a href="#37098211">next</a><span>|</span><label class="collapse" for="c-37093380">[-]</label><label class="expand" for="c-37093380">[1 more]</label></div><br/><div class="children"><div class="content">The issue is writes, not reads.</div><br/></div></div></div></div></div></div><div id="37098211" class="c"><input type="checkbox" id="c-37098211" checked=""/><div class="controls bullet"><span class="by">atmosx</span><span>|</span><a href="#37092875">prev</a><span>|</span><a href="#37095145">next</a><span>|</span><label class="collapse" for="c-37098211">[-]</label><label class="expand" for="c-37098211">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Just think about how massive these costs are. How much feature delivery will have to be delayed or foregone to support the additional architectural complexity?<p>I don’t know if the author has worked with micro services. MS solve a communication issue. If implemented semi-properly teams stop blocking each other and the overall result is _faster_ and _safer_ feature delivery to production because the scope a team (or tribe, etc) will be working on a smaller, isolated codebase. The challenge _usually_ is that now developers have to take the environment into consideration introducing new patterns (retries, structured logs, time outs, circuit breakers, possibly SLIs for other teams, distributed tracing, metrics, etc). Given a large enough org, someone will either adopt or write a micro-framework to handle all or most of them.<p>To re-iterate if introducing MS stalled feature delivery, then it is a premature decision. YMMV, of course as there are other reasons to isolate part of the code base (e.g. compliance).</div><br/><div id="37098280" class="c"><input type="checkbox" id="c-37098280" checked=""/><div class="controls bullet"><span class="by">andresp</span><span>|</span><a href="#37098211">parent</a><span>|</span><a href="#37095145">next</a><span>|</span><label class="collapse" for="c-37098280">[-]</label><label class="expand" for="c-37098280">[1 more]</label></div><br/><div class="children"><div class="content">I got to understand from personal experience that the anti-SOA people are usually the ones who stayed at the same company their entire carers, never saw any model other than the monolithic one, see SOA as a threat to their domain knowledge within the company and simply are not able to see its downsides (because they have adapted their ways of work around it and never experienced anything better).</div><br/></div></div></div></div><div id="37095145" class="c"><input type="checkbox" id="c-37095145" checked=""/><div class="controls bullet"><span class="by">justinlloyd</span><span>|</span><a href="#37098211">prev</a><span>|</span><a href="#37093099">next</a><span>|</span><label class="collapse" for="c-37095145">[-]</label><label class="expand" for="c-37095145">[8 more]</label></div><br/><div class="children"><div class="content">Squeeze what you&#x27;ve got, as hard as you can, then realize after squeezing for a while that if you squeezed here, here, and also... here, by changing how you think about a problem, suddenly you&#x27;ve got a lot left to get.<p>I spent two or so months optimizing the crap out of a majestic monolith and went from under 2K RPS when the PM thought, and the team repeatedly reported, that everything had been squeezed as much as it could, then changing the hardware, which got us to less than 3200 RPS, then to 4K RPS after just a few days of tinkering, to 10K RPS with a bit more effort, to 40K RPS a week or so later. &quot;Oh that&#x27;s, enough, we don&#x27;t need to go further.&quot; I then changed &quot;quite a bit of stuff&quot;  which then jumped us to 2M+ RPS, and then a month later, a consistent 40M+ RPS with low latency on a single box and there is still some juice left in the box should we want to go a little harder.<p>Right now we&#x27;re not even touching 5% of the capacity of what we can pull from, it was that much of a change, simply by changing how we think about the problems. Moving from the old server to the new server let us jump from around 1800 RPS to a hair over 3000 RPS. Adding more hardware didn&#x27;t fix our underlying problems. Adding more complexity was just punting the problem down the road. But changing how to think about the problem? _That_ changed the problem. And changed our answer to the problem.</div><br/><div id="37095548" class="c"><input type="checkbox" id="c-37095548" checked=""/><div class="controls bullet"><span class="by">smarkov</span><span>|</span><a href="#37095145">parent</a><span>|</span><a href="#37097275">next</a><span>|</span><label class="collapse" for="c-37095548">[-]</label><label class="expand" for="c-37095548">[4 more]</label></div><br/><div class="children"><div class="content">Very curious to learn more about what the monolith was doing so incredibly poorly that you managed to squeeze that much performance out of it. Poorly written queries? Too many queries?  Lack of any caching? Doing things synchronously when they could&#x27;ve been done concurrently?</div><br/><div id="37097521" class="c"><input type="checkbox" id="c-37097521" checked=""/><div class="controls bullet"><span class="by">justinlloyd</span><span>|</span><a href="#37095145">root</a><span>|</span><a href="#37095548">parent</a><span>|</span><a href="#37097087">next</a><span>|</span><label class="collapse" for="c-37097521">[-]</label><label class="expand" for="c-37097521">[1 more]</label></div><br/><div class="children"><div class="content">Some of that, some other bad practices. Lots of low-hanging fruit, then more esoteric changes.<p><a href="https:&#x2F;&#x2F;justinlloyd.li&#x2F;blog&#x2F;how-much-cache-you-got-on-you&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;justinlloyd.li&#x2F;blog&#x2F;how-much-cache-you-got-on-you&#x2F;</a></div><br/></div></div><div id="37097087" class="c"><input type="checkbox" id="c-37097087" checked=""/><div class="controls bullet"><span class="by">porridgeandrice</span><span>|</span><a href="#37095145">root</a><span>|</span><a href="#37095548">parent</a><span>|</span><a href="#37097521">prev</a><span>|</span><a href="#37097275">next</a><span>|</span><label class="collapse" for="c-37097087">[-]</label><label class="expand" for="c-37097087">[2 more]</label></div><br/><div class="children"><div class="content">+1 I&#x27;d like to know as well</div><br/><div id="37097515" class="c"><input type="checkbox" id="c-37097515" checked=""/><div class="controls bullet"><span class="by">justinlloyd</span><span>|</span><a href="#37095145">root</a><span>|</span><a href="#37097087">parent</a><span>|</span><a href="#37097275">next</a><span>|</span><label class="collapse" for="c-37097515">[-]</label><label class="expand" for="c-37097515">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;justinlloyd.li&#x2F;blog&#x2F;how-much-cache-you-got-on-you&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;justinlloyd.li&#x2F;blog&#x2F;how-much-cache-you-got-on-you&#x2F;</a></div><br/></div></div></div></div></div></div><div id="37097275" class="c"><input type="checkbox" id="c-37097275" checked=""/><div class="controls bullet"><span class="by">therealdrag0</span><span>|</span><a href="#37095145">parent</a><span>|</span><a href="#37095548">prev</a><span>|</span><a href="#37093099">next</a><span>|</span><label class="collapse" for="c-37097275">[-]</label><label class="expand" for="c-37097275">[3 more]</label></div><br/><div class="children"><div class="content">You gotta share more lol. These are insane gains.</div><br/><div id="37097532" class="c"><input type="checkbox" id="c-37097532" checked=""/><div class="controls bullet"><span class="by">justinlloyd</span><span>|</span><a href="#37095145">root</a><span>|</span><a href="#37097275">parent</a><span>|</span><a href="#37093099">next</a><span>|</span><label class="collapse" for="c-37097532">[-]</label><label class="expand" for="c-37097532">[2 more]</label></div><br/><div class="children"><div class="content">I cannot go too deep. It was some client work.<p><a href="https:&#x2F;&#x2F;justinlloyd.li&#x2F;blog&#x2F;how-much-cache-you-got-on-you&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;justinlloyd.li&#x2F;blog&#x2F;how-much-cache-you-got-on-you&#x2F;</a></div><br/><div id="37097652" class="c"><input type="checkbox" id="c-37097652" checked=""/><div class="controls bullet"><span class="by">therealdrag0</span><span>|</span><a href="#37095145">root</a><span>|</span><a href="#37097532">parent</a><span>|</span><a href="#37093099">next</a><span>|</span><label class="collapse" for="c-37097652">[-]</label><label class="expand" for="c-37097652">[1 more]</label></div><br/><div class="children"><div class="content">Thank you! Even that was insightful.</div><br/></div></div></div></div></div></div></div></div><div id="37093099" class="c"><input type="checkbox" id="c-37093099" checked=""/><div class="controls bullet"><span class="by">deathanatos</span><span>|</span><a href="#37095145">prev</a><span>|</span><a href="#37093267">next</a><span>|</span><label class="collapse" for="c-37093099">[-]</label><label class="expand" for="c-37093099">[8 more]</label></div><br/><div class="children"><div class="content">&gt; <i>Split up the monolith into multiple interconnected services, each with its own data store that could be scaled on its own terms.</i><p>Just to note: you don&#x27;t have to split out all the possible microservices at this junction. You can ask, &quot;what split would have the most impact?&quot;<p>In my case, we split out some timeseries data from Mongo into Cassandra. Cass&#x27;s table structure was a much better fit — that dataset had a well defined schema, so Cass could pack the data much more efficiently; for that subset, we didn&#x27;t need the flexibility of JSON docs. And it was the bulk of our data, and so Mongo was quite happy after that. Only a single split was required. (And technically, we were a monolith before and after: the same service just ended up writing to two databases.)<p>Ironically, later, an airchair architect wanted to merge all the data into a JSON document store, which resulted in numerous &quot;we&#x27;ve been down that road, and we know where it goes&quot; type discussions.</div><br/><div id="37093990" class="c"><input type="checkbox" id="c-37093990" checked=""/><div class="controls bullet"><span class="by">mamcx</span><span>|</span><a href="#37093099">parent</a><span>|</span><a href="#37093452">next</a><span>|</span><label class="collapse" for="c-37093990">[-]</label><label class="expand" for="c-37093990">[2 more]</label></div><br/><div class="children"><div class="content">Is interesting that the idea of micro services is throw like a obvious &quot;solution&quot;.<p>Is not.<p>&quot;Scale-up&quot; MUST be the &quot;obvious&quot; solution. What is missed by many, and this article touch (despite saying that micro-services is a &quot;solid&quot; choice) is that &quot;Scale-up&quot; is &quot;scale-out&quot; without breaking the consistency of the DB.<p>Is a lot you can do to squeeze, and is rare you need to ignore join, data validations and other anti-patterns that are normally trow casual when problems of performance happens.</div><br/><div id="37094591" class="c"><input type="checkbox" id="c-37094591" checked=""/><div class="controls bullet"><span class="by">deathanatos</span><span>|</span><a href="#37093099">root</a><span>|</span><a href="#37093990">parent</a><span>|</span><a href="#37093452">next</a><span>|</span><label class="collapse" for="c-37094591">[-]</label><label class="expand" for="c-37094591">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t know what to tell you other than I&#x27;ve seen vertical scaling hit its ceiling, several times. The OP lists &quot;scale vertically first&quot; as a given; to an extent, I agree with it, and the comment you&#x27;re responding to is made with that as a base assumption.<p>There are sometimes diminishing returns to simple scaling; e.g., in my current job, each new disk we add adds 1&#x2F;n disks&#x27; worth of capacity. Each scaling step happens quicker and quicker (assuming growth of the underlying system). Eventually, you hit the wall in the OP, in that you need design level changes, not just quick fixes.<p>The situation I mention in my comment was one of those: we&#x27;d about reached the limits of what was possible with the setup we had. We were hitting things such as bringing in new nodes was difficult: the time for the replica to replicate was getting too long, and Mongo, at the time, had some bug that caused like a ~30% chance that the replica would SIGSEGV and need to restart the replication from scratch. Operationally, it was a headache, and the split moved a <i>lot</i> of data out that made these cuts not so bad. (Cassandra did bring its own challenges, but the sum of the new state was that it was better than where we were.)<p>Consistency is something you must pay attention to. In our case, the old foreign key between the two systems was the user ID, and we had specific checks to ensure consistency of it.</div><br/></div></div></div></div><div id="37093452" class="c"><input type="checkbox" id="c-37093452" checked=""/><div class="controls bullet"><span class="by">kreetx</span><span>|</span><a href="#37093099">parent</a><span>|</span><a href="#37093990">prev</a><span>|</span><a href="#37097424">next</a><span>|</span><label class="collapse" for="c-37093452">[-]</label><label class="expand" for="c-37093452">[2 more]</label></div><br/><div class="children"><div class="content">In a way, in the article they also did a split: specific heavy select queries were offloaded to a replica.</div><br/><div id="37093906" class="c"><input type="checkbox" id="c-37093906" checked=""/><div class="controls bullet"><span class="by">agentultra</span><span>|</span><a href="#37093099">root</a><span>|</span><a href="#37093452">parent</a><span>|</span><a href="#37097424">next</a><span>|</span><label class="collapse" for="c-37093906">[-]</label><label class="expand" for="c-37093906">[1 more]</label></div><br/><div class="children"><div class="content">They could probably squeeze more depending on their workload patterns. RDBMS&#x27; typically optimize for fast&#x2F;convenient writes. If your write load would be fine with a small increase in latency then you can do a lot of de-normalization so that your reads can avoid using tonnes of joins, aggregates, windows, etc at read-time. Update write path so that you update all of the de-normalized views at write time.<p>Depending on your read load and application structure you can get a lot more scale with caching.<p>Decent article.</div><br/></div></div></div></div><div id="37097424" class="c"><input type="checkbox" id="c-37097424" checked=""/><div class="controls bullet"><span class="by">alexchamberlain</span><span>|</span><a href="#37093099">parent</a><span>|</span><a href="#37093452">prev</a><span>|</span><a href="#37094449">next</a><span>|</span><label class="collapse" for="c-37097424">[-]</label><label class="expand" for="c-37097424">[1 more]</label></div><br/><div class="children"><div class="content">The other thing worth noting is a server can read from 2 datastores - which as a sibling comment says, they ended up doing with a read replica. There&#x27;s nothing preventing you from reading from Postgres and Redis in the same process!</div><br/></div></div><div id="37094449" class="c"><input type="checkbox" id="c-37094449" checked=""/><div class="controls bullet"><span class="by">kedean</span><span>|</span><a href="#37093099">parent</a><span>|</span><a href="#37097424">prev</a><span>|</span><a href="#37093267">next</a><span>|</span><label class="collapse" for="c-37094449">[-]</label><label class="expand" for="c-37094449">[2 more]</label></div><br/><div class="children"><div class="content">Funny enough I frequently have the opposite problem, justifying repeatedly why Cassandra is a bad fit for relatively short lived, frequently updated data (tombstones, baby).</div><br/><div id="37094614" class="c"><input type="checkbox" id="c-37094614" checked=""/><div class="controls bullet"><span class="by">deathanatos</span><span>|</span><a href="#37093099">root</a><span>|</span><a href="#37094449">parent</a><span>|</span><a href="#37093267">next</a><span>|</span><label class="collapse" for="c-37094614">[-]</label><label class="expand" for="c-37094614">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;d agree with you there.<p>The specific data that went into Cassandra in our case was basically immutable. (And somehow, IIRC, we <i>still</i> had issues around tombstones. I am not a fan of them.) Cassandra&#x27;s tooling left much to be desired around inspecting the exact state of tombstones within the cluster.</div><br/></div></div></div></div></div></div><div id="37093267" class="c"><input type="checkbox" id="c-37093267" checked=""/><div class="controls bullet"><span class="by">i_like_apis</span><span>|</span><a href="#37093099">prev</a><span>|</span><a href="#37094554">next</a><span>|</span><label class="collapse" for="c-37093267">[-]</label><label class="expand" for="c-37093267">[79 more]</label></div><br/><div class="children"><div class="content">I’m reminded of one of my favorite sayings:<p><i>You go to war with the army you have, not the army you might want or wish to have at a later time.</i><p>You may want to ignore that this this comes from Donald Rumsfeld (he has some great ones though: “unknown unknowns …”, etc.)<p>I think about this a lot when working on teams. Everyone is not perfectly agreeable or has the same understanding or collective goals. Some may be suboptimal or prone to doing things you don’t prefer. But having a team is better than no team, so find the best way to accomplish goals with the one you have.<p>It applies to systems well too.</div><br/><div id="37093815" class="c"><input type="checkbox" id="c-37093815" checked=""/><div class="controls bullet"><span class="by">roughly</span><span>|</span><a href="#37093267">parent</a><span>|</span><a href="#37094900">next</a><span>|</span><label class="collapse" for="c-37093815">[-]</label><label class="expand" for="c-37093815">[24 more]</label></div><br/><div class="children"><div class="content">Rumsfeld&#x27;s got some great quotes, most of which were delivered in the context of explaining how the Iraq war turned into such a clusterfuck, and boy could that whole situation have used the kind of leadership Donald Rumsfeld&#x27;s quotes would lead you to believe the man could&#x27;ve provided.</div><br/><div id="37095391" class="c"><input type="checkbox" id="c-37095391" checked=""/><div class="controls bullet"><span class="by">rovolo</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37093815">parent</a><span>|</span><a href="#37094785">next</a><span>|</span><label class="collapse" for="c-37095391">[-]</label><label class="expand" for="c-37095391">[3 more]</label></div><br/><div class="children"><div class="content">JFYI, the &quot;Unknown Unknowns&quot; quote is from before the invasion (2002-02-12). It was deflection on whether there was evidence of Iraq building WMDs or of cooperating with e.g Al Qaeda.<p>&gt; Q: Could I follow up, Mr. Secretary, on what you just said, please? In regard to Iraq weapons of mass destruction and terrorists, is there any evidence to indicate that Iraq has attempted to or is willing to supply terrorists with weapons of mass destruction? Because there are reports that there is no evidence of a direct link between Baghdad and some of these terrorist organizations.<p>&gt; Rumsfeld: Reports that say that something hasn&#x27;t happened are always interesting to me, because as we know, there are known knowns; there are things we know we know. We also know there are known unknowns; that is to say we know there are some things we do not know. But there are also unknown unknowns -- the ones we don&#x27;t know we don&#x27;t know. And if one looks throughout the history of our country and other free countries, it is the latter category that tend to be the difficult ones.<p>&gt; And so people who have the omniscience that they can say with high certainty that something has not happened or is not being tried, have capabilities that are ...<p><a href="https:&#x2F;&#x2F;archive.ph&#x2F;20180320091111&#x2F;http:&#x2F;&#x2F;archive.defense.gov&#x2F;Transcripts&#x2F;Transcript.aspx#selection-1045.5-1081.44" rel="nofollow noreferrer">https:&#x2F;&#x2F;archive.ph&#x2F;20180320091111&#x2F;http:&#x2F;&#x2F;archive.defense.gov...</a></div><br/><div id="37096256" class="c"><input type="checkbox" id="c-37096256" checked=""/><div class="controls bullet"><span class="by">el_nahual</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37095391">parent</a><span>|</span><a href="#37094785">next</a><span>|</span><label class="collapse" for="c-37096256">[-]</label><label class="expand" for="c-37096256">[2 more]</label></div><br/><div class="children"><div class="content">I haven&#x27;t read the transcript of this conversation in a long time, but thank you for sharing it.<p>The sophistry of his argument is extreme.<p>Yes, of course there are always &quot;unknown unknowns&quot;-- but the statement &quot;there is no evidence that Iraq is supplying WMDs to terrorists&quot; is not a statement made in a vacuum, in which all permutations of known&#x2F;unknown are equally likely.</div><br/><div id="37096445" class="c"><input type="checkbox" id="c-37096445" checked=""/><div class="controls bullet"><span class="by">jkern</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37096256">parent</a><span>|</span><a href="#37094785">next</a><span>|</span><label class="collapse" for="c-37096445">[-]</label><label class="expand" for="c-37096445">[1 more]</label></div><br/><div class="children"><div class="content">It really is jarring that this is about the actual justification for a war, and his response basically boils down to &quot;well we don&#x27;t know they haven&#x27;t done it or if they might in the future&quot;.</div><br/></div></div></div></div></div></div><div id="37094785" class="c"><input type="checkbox" id="c-37094785" checked=""/><div class="controls bullet"><span class="by">marcosdumay</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37093815">parent</a><span>|</span><a href="#37095391">prev</a><span>|</span><a href="#37094273">next</a><span>|</span><label class="collapse" for="c-37094785">[-]</label><label class="expand" for="c-37094785">[7 more]</label></div><br/><div class="children"><div class="content">If I remember it correctly (it was a long time ago), he never fully supported the war. It didn&#x27;t take a genius to notice that the goals set by the presidency were (literally) impossible and not the kind of thing you do achieve a war.<p>But whatever position he had, Iraq turning into a clusterfuck wasn&#x27;t a sign of bad leadership by his part. It was a sign of bad ethics, but not leadership. His options were all of getting out of his position, disobeying the people above him, or leading the US into a clusterfuck.</div><br/><div id="37094957" class="c"><input type="checkbox" id="c-37094957" checked=""/><div class="controls bullet"><span class="by">mickdeek86</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37094785">parent</a><span>|</span><a href="#37095335">next</a><span>|</span><label class="collapse" for="c-37094957">[-]</label><label class="expand" for="c-37094957">[1 more]</label></div><br/><div class="children"><div class="content">Rumsfeld personally advanced the de-baathification directive - the lynchpin of the clusterfuckery - all on his own, and he certainly would have known to expect the &#x27;unexpected&#x27; results to be similar to de-nazification. This was absolutely his choice. Another point you have (unintentionally?) brought up is the dignified resignation option. While it is often a naive, self-serving gesture, we can reasonably imagine that the Defense Secretary publicly resigning over opposition to a war during the public consideration of that war, might have had some effect on whether that war was started. I want to like him too, with his grandfatherly demeanor and genuine funnyness (&quot;My god, were there so many vases?!&quot;) but, come on.</div><br/></div></div><div id="37095335" class="c"><input type="checkbox" id="c-37095335" checked=""/><div class="controls bullet"><span class="by">js2</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37094785">parent</a><span>|</span><a href="#37094957">prev</a><span>|</span><a href="#37095863">next</a><span>|</span><label class="collapse" for="c-37095335">[-]</label><label class="expand" for="c-37095335">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t think you remember correctly:<p>&gt; In the first emergency meeting of the National Security Council on the day of the attacks, Rumsfeld asked, &quot;Why shouldn&#x27;t we go against Iraq, not just al-Qaeda?&quot; with his deputy Paul Wolfowitz adding that Iraq was a &quot;brittle, oppressive regime that might break easily—it was doable,&quot; and, according to John Kampfner, &quot;from that moment on, he and Wolfowitz used every available opportunity to press the case.&quot;<p><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Donald_Rumsfeld#Military_decisions_in_the_wake_of_9&#x2F;11" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Donald_Rumsfeld#Military_decis...</a></div><br/></div></div><div id="37095863" class="c"><input type="checkbox" id="c-37095863" checked=""/><div class="controls bullet"><span class="by">earthboundkid</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37094785">parent</a><span>|</span><a href="#37095335">prev</a><span>|</span><a href="#37094273">next</a><span>|</span><label class="collapse" for="c-37095863">[-]</label><label class="expand" for="c-37095863">[4 more]</label></div><br/><div class="children"><div class="content">As history, this is completely incorrect, but beyond that, if you don’t believe in the mission of the President in committing an act of war, you have a responsibility to resign, and it can’t be bracketed as “bad ethics”.<p>Anyway, another historical point besides what the other commenters have said is that Rumsfeld believed in “transformation” which meant you could do more with less in modern war. He was totally wrong about it.<p>It wasn’t his fault Turkey didn’t let the US attack from the north, but other than that, the fuck up is his responsibility, among others.</div><br/><div id="37096434" class="c"><input type="checkbox" id="c-37096434" checked=""/><div class="controls bullet"><span class="by">Miraste</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37095863">parent</a><span>|</span><a href="#37096314">next</a><span>|</span><label class="collapse" for="c-37096434">[-]</label><label class="expand" for="c-37096434">[1 more]</label></div><br/><div class="children"><div class="content">There&#x27;s a distinction missing here. Rumsfeld&#x27;s Transformation  idea was correct with regard to the invasion, which was one of the most successful invasions in history, period. No one has ever taken over such a large country, so far away, so fast, with so few troops, before or since.<p>The occupation afterward was where the clusterfuck came in, and (somehow) none of the preparation had been directed toward that.</div><br/></div></div><div id="37096314" class="c"><input type="checkbox" id="c-37096314" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37095863">parent</a><span>|</span><a href="#37096434">prev</a><span>|</span><a href="#37094273">next</a><span>|</span><label class="collapse" for="c-37096314">[-]</label><label class="expand" for="c-37096314">[2 more]</label></div><br/><div class="children"><div class="content">Funny enough, if you go by what&#x27;s written in the US constitution, their president can&#x27;t actually go to war.<p>But thanks to enough loop holes, they can get into &#x27;special military operations&#x27; (to misappropriate a recent term).</div><br/><div id="37096920" class="c"><input type="checkbox" id="c-37096920" checked=""/><div class="controls bullet"><span class="by">meepmorp</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37096314">parent</a><span>|</span><a href="#37094273">next</a><span>|</span><label class="collapse" for="c-37096920">[-]</label><label class="expand" for="c-37096920">[1 more]</label></div><br/><div class="children"><div class="content">At no point in US history was it ever the case that every military operation was considered a war, nor that a war declaration would be necessary and&#x2F;or appropriate to conduct such operations. What&#x27;s more, Congress has frequently and explicitly given the President authority to conduct large scale military operations and held oversight hearings, etc. of the execution of those operations - all without formal declarations of war; Vietnam, Iraq, and Afghanistan being prime examples of this.<p>Calling them &quot;special military operations,&quot; poor taste aside, especially with a focus on the formal process used, ignores the fact that all of those conflicts were entered and conducted with the full knowledge and involvement of Congresss.</div><br/></div></div></div></div></div></div></div></div><div id="37094273" class="c"><input type="checkbox" id="c-37094273" checked=""/><div class="controls bullet"><span class="by">dragonwriter</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37093815">parent</a><span>|</span><a href="#37094785">prev</a><span>|</span><a href="#37093929">next</a><span>|</span><label class="collapse" for="c-37094273">[-]</label><label class="expand" for="c-37094273">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Rumsfeld&#x27;s got some great quotes, most of which were delivered in the context of explaining how the Iraq war turned into such a clusterfuck<p>If by “explaining how” you mean “deflecting (often preemptively) responsibility for”, yes.</div><br/><div id="37095964" class="c"><input type="checkbox" id="c-37095964" checked=""/><div class="controls bullet"><span class="by">froggit</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37094273">parent</a><span>|</span><a href="#37093929">next</a><span>|</span><label class="collapse" for="c-37095964">[-]</label><label class="expand" for="c-37095964">[2 more]</label></div><br/><div class="children"><div class="content">&gt; If by “explaining how” you mean “deflecting (often preemptively) responsibility for”, yes.<p>There&#x27;s no reason to think you can&#x27;t do both of those with the same statement.</div><br/><div id="37096719" class="c"><input type="checkbox" id="c-37096719" checked=""/><div class="controls bullet"><span class="by">dragonwriter</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37095964">parent</a><span>|</span><a href="#37093929">next</a><span>|</span><label class="collapse" for="c-37096719">[-]</label><label class="expand" for="c-37096719">[1 more]</label></div><br/><div class="children"><div class="content">Abstractly, sure.<p>I’m characterizing what I recall Rumsfeld concretely doing, not what is abstractly possible for one to do.</div><br/></div></div></div></div></div></div><div id="37093929" class="c"><input type="checkbox" id="c-37093929" checked=""/><div class="controls bullet"><span class="by">xapata</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37093815">parent</a><span>|</span><a href="#37094273">prev</a><span>|</span><a href="#37093869">next</a><span>|</span><label class="collapse" for="c-37093929">[-]</label><label class="expand" for="c-37093929">[5 more]</label></div><br/><div class="children"><div class="content">&gt; could&#x27;ve<p>If someone is 83.7% likely to provide good leadership, how would you evaluate the choice to hire that person as a leader in the hindsight that the person failed to provide good leadership -- was it a bad choice, or was it a good choice that was unlucky?<p>(Likelihood was selected arbitrarily.)</div><br/><div id="37094564" class="c"><input type="checkbox" id="c-37094564" checked=""/><div class="controls bullet"><span class="by">hluska</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37093929">parent</a><span>|</span><a href="#37096583">next</a><span>|</span><label class="collapse" for="c-37094564">[-]</label><label class="expand" for="c-37094564">[1 more]</label></div><br/><div class="children"><div class="content">Like everything in politics, I think this is a function of what team you cheer for. If your goal was to come up with an excuse to invade Iraq, that person was an excellent choice. If you’re on the other team, what a clusterfuck.<p>Then you add in a party system and it gets more complicated. Realistically, you don’t get to be the United States Secretary of Defense (twice) if you’re  the kind of person who will ignore the will of the party and whoever is President.</div><br/></div></div><div id="37096583" class="c"><input type="checkbox" id="c-37096583" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37093929">parent</a><span>|</span><a href="#37094564">prev</a><span>|</span><a href="#37094098">next</a><span>|</span><label class="collapse" for="c-37096583">[-]</label><label class="expand" for="c-37096583">[2 more]</label></div><br/><div class="children"><div class="content">Is that number (publicly) known when you hire the person?<p>If yes, you just evaluate the choice based on that probability (and other things you knew at the time), not on the actual outcome.<p>Prediction markets are one way to make these kinds numbers known.</div><br/><div id="37097119" class="c"><input type="checkbox" id="c-37097119" checked=""/><div class="controls bullet"><span class="by">xapata</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37096583">parent</a><span>|</span><a href="#37094098">next</a><span>|</span><label class="collapse" for="c-37097119">[-]</label><label class="expand" for="c-37097119">[1 more]</label></div><br/><div class="children"><div class="content">No, the likelihood is unknown, but the hiring process includes a model to estimate it.  Of a sort.</div><br/></div></div></div></div><div id="37094098" class="c"><input type="checkbox" id="c-37094098" checked=""/><div class="controls bullet"><span class="by">whatshisface</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37093929">parent</a><span>|</span><a href="#37096583">prev</a><span>|</span><a href="#37093869">next</a><span>|</span><label class="collapse" for="c-37094098">[-]</label><label class="expand" for="c-37094098">[1 more]</label></div><br/><div class="children"><div class="content">&gt;<i>quotes would lead you to believe</i></div><br/></div></div></div></div><div id="37093869" class="c"><input type="checkbox" id="c-37093869" checked=""/><div class="controls bullet"><span class="by">moffkalast</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37093815">parent</a><span>|</span><a href="#37093929">prev</a><span>|</span><a href="#37094384">next</a><span>|</span><label class="collapse" for="c-37093869">[-]</label><label class="expand" for="c-37093869">[1 more]</label></div><br/><div class="children"><div class="content">Could&#x27;ve at least given them some motivational quotes.</div><br/></div></div><div id="37094384" class="c"><input type="checkbox" id="c-37094384" checked=""/><div class="controls bullet"><span class="by">hluska</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37093815">parent</a><span>|</span><a href="#37093869">prev</a><span>|</span><a href="#37094900">next</a><span>|</span><label class="collapse" for="c-37094384">[-]</label><label class="expand" for="c-37094384">[4 more]</label></div><br/><div class="children"><div class="content">I like to remind myself that very few people reach positions of great power after mediocre lives. Rather there’s a thread of talent that runs through government.<p>Once they’re in, the predilections that led to power often rear their dark long tails. But they’re all (even the ones I disagree with) talented.</div><br/><div id="37094582" class="c"><input type="checkbox" id="c-37094582" checked=""/><div class="controls bullet"><span class="by">patmcc</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37094384">parent</a><span>|</span><a href="#37096896">next</a><span>|</span><label class="collapse" for="c-37094582">[-]</label><label class="expand" for="c-37094582">[1 more]</label></div><br/><div class="children"><div class="content">They&#x27;re talented at getting into power, and may be talented at any number of other things.<p>They&#x27;re not always talented at the things we may want them to be, unfortunately. And that&#x27;s true of both the ones I agree and disagree with.</div><br/></div></div><div id="37096896" class="c"><input type="checkbox" id="c-37096896" checked=""/><div class="controls bullet"><span class="by">coldtea</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37094384">parent</a><span>|</span><a href="#37094582">prev</a><span>|</span><a href="#37095468">next</a><span>|</span><label class="collapse" for="c-37096896">[-]</label><label class="expand" for="c-37096896">[1 more]</label></div><br/><div class="children"><div class="content">&gt;<i>I like to remind myself that very few people reach positions of great power after mediocre lives.</i><p>You&#x27;d be surprised.<p>&quot;Reaching positions of great power after mediocre lives&quot; is the very art of career politics.</div><br/></div></div><div id="37095468" class="c"><input type="checkbox" id="c-37095468" checked=""/><div class="controls bullet"><span class="by">roughly</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37094384">parent</a><span>|</span><a href="#37096896">prev</a><span>|</span><a href="#37094900">next</a><span>|</span><label class="collapse" for="c-37095468">[-]</label><label class="expand" for="c-37095468">[1 more]</label></div><br/><div class="children"><div class="content">Politics is fundamentally the art of convincing people of things - usually “vote for me.” That is the only skill that acquisition of high office is evidence of. Many politicians have more skills than just than that, but the mere fact of having acquired high office tells you nothing more about a person than that they’re particularly good at politics.</div><br/></div></div></div></div></div></div><div id="37094900" class="c"><input type="checkbox" id="c-37094900" checked=""/><div class="controls bullet"><span class="by">oDot</span><span>|</span><a href="#37093267">parent</a><span>|</span><a href="#37093815">prev</a><span>|</span><a href="#37094401">next</a><span>|</span><label class="collapse" for="c-37094900">[-]</label><label class="expand" for="c-37094900">[2 more]</label></div><br/><div class="children"><div class="content">Every time I hear the name Rumsfeld, I am reminded of the time when, for over 10 minutes, he refused to deny being a lizard:<p><a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=XH_34tqxAjA">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=XH_34tqxAjA</a></div><br/><div id="37096186" class="c"><input type="checkbox" id="c-37096186" checked=""/><div class="controls bullet"><span class="by">i_like_apis</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37094900">parent</a><span>|</span><a href="#37094401">next</a><span>|</span><label class="collapse" for="c-37096186">[-]</label><label class="expand" for="c-37096186">[1 more]</label></div><br/><div class="children"><div class="content">Haha. Thanks for sharing that. Rumsfeld definitely has a sense of humor.<p>He’s also one of the best candidates for that type of conspiracy theory. His career history is flabbergasting.<p>Check out <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Donald_Rumsfeld#Corporate_connections_and_business_interests" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Donald_Rumsfeld#Corporate_conn...</a><p>In addition to all the Bohemian Club, RAND corp, defense and government posts, in the 70s the guy was a CEO in the pharmaceuticals and electronics industries, was a director in aerospace, media and tech.<p>Definitely the type of resume that lets the imagination run wild with, “… wait, <i>was</i> he a lizard person …?”</div><br/></div></div></div></div><div id="37094401" class="c"><input type="checkbox" id="c-37094401" checked=""/><div class="controls bullet"><span class="by">fuzztester</span><span>|</span><a href="#37093267">parent</a><span>|</span><a href="#37094900">prev</a><span>|</span><a href="#37095451">next</a><span>|</span><label class="collapse" for="c-37094401">[-]</label><label class="expand" for="c-37094401">[16 more]</label></div><br/><div class="children"><div class="content">&quot;No battle plan survives contact with the enemy.&quot;<p><a href="https:&#x2F;&#x2F;www.google.com&#x2F;search?q=no+battle+plan+survives" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.google.com&#x2F;search?q=no+battle+plan+survives</a></div><br/><div id="37094638" class="c"><input type="checkbox" id="c-37094638" checked=""/><div class="controls bullet"><span class="by">fuzztester</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37094401">parent</a><span>|</span><a href="#37094743">next</a><span>|</span><label class="collapse" for="c-37094638">[-]</label><label class="expand" for="c-37094638">[5 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Helmuth_von_Moltke_the_Elder" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Helmuth_von_Moltke_the_Elder</a><p>Moltke&#x27;s thesis was that military strategy had to be understood as a system of options, since it was possible to plan only the beginning of a military operation. As a result, he considered the main task of military leaders to consist in the extensive preparation of all possible outcomes.[3] His thesis can be summed up by two statements, one famous and one less so, translated into English as &quot;No plan of operations extends with certainty beyond the first encounter with the enemy&#x27;s main strength&quot; (or &quot;no plan survives contact with the enemy&quot;) and &quot;Strategy is a system of expedients&quot;.[18][8] Right before the Austro-Prussian War, Moltke was promoted to General of the Infantry.[8]</div><br/><div id="37095662" class="c"><input type="checkbox" id="c-37095662" checked=""/><div class="controls bullet"><span class="by">roughly</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37094638">parent</a><span>|</span><a href="#37094743">next</a><span>|</span><label class="collapse" for="c-37095662">[-]</label><label class="expand" for="c-37095662">[4 more]</label></div><br/><div class="children"><div class="content">I’m reminded of the Eisenhower line: “plans are worthless, but planning is everything.”</div><br/><div id="37096192" class="c"><input type="checkbox" id="c-37096192" checked=""/><div class="controls bullet"><span class="by">agrippanux</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37095662">parent</a><span>|</span><a href="#37096428">next</a><span>|</span><label class="collapse" for="c-37096192">[-]</label><label class="expand" for="c-37096192">[2 more]</label></div><br/><div class="children"><div class="content">Also Moltke: “no plan survives contact with the enemy”</div><br/><div id="37096403" class="c"><input type="checkbox" id="c-37096403" checked=""/><div class="controls bullet"><span class="by">fuzztester</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37096192">parent</a><span>|</span><a href="#37096428">next</a><span>|</span><label class="collapse" for="c-37096403">[-]</label><label class="expand" for="c-37096403">[1 more]</label></div><br/><div class="children"><div class="content">Recursion.<p><pre><code>   ...

         Recursion</code></pre></div><br/></div></div></div></div><div id="37096428" class="c"><input type="checkbox" id="c-37096428" checked=""/><div class="controls bullet"><span class="by">fuzztester</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37095662">parent</a><span>|</span><a href="#37096192">prev</a><span>|</span><a href="#37094743">next</a><span>|</span><label class="collapse" for="c-37096428">[-]</label><label class="expand" for="c-37096428">[1 more]</label></div><br/><div class="children"><div class="content">Classic.</div><br/></div></div></div></div></div></div><div id="37094743" class="c"><input type="checkbox" id="c-37094743" checked=""/><div class="controls bullet"><span class="by">sbuk</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37094401">parent</a><span>|</span><a href="#37094638">prev</a><span>|</span><a href="#37095451">next</a><span>|</span><label class="collapse" for="c-37094743">[-]</label><label class="expand" for="c-37094743">[10 more]</label></div><br/><div class="children"><div class="content">Mike Tyson said it more simply: &quot;Everybody has a plan until you get hit in the face.&quot;</div><br/><div id="37095633" class="c"><input type="checkbox" id="c-37095633" checked=""/><div class="controls bullet"><span class="by">fuzztester</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37094743">parent</a><span>|</span><a href="#37095545">prev</a><span>|</span><a href="#37095451">next</a><span>|</span><label class="collapse" for="c-37095633">[-]</label><label class="expand" for="c-37095633">[8 more]</label></div><br/><div class="children"><div class="content">Nope.<p>Let&#x27;s juxtapose them and see:<p>Von Moltke:<p>&quot;No battle plan survives contact with the enemy.&quot;<p>Tyson:<p>&quot;Everybody has a plan until you get hit in the face.&quot;<p>Pretty much the same meaning, and Von Moltke&#x27;s quote is three words shorter, so no, Tyson&#x27;s quote is <i>not</i> simpler.<p>Also, Tyson was ungrammatical, IMO:<p>&quot;Everybody&quot; vs. &quot;you&quot; in the same sentence, referring to the same entity.<p>Grammar experts, correct me if I am wrong.</div><br/><div id="37097525" class="c"><input type="checkbox" id="c-37097525" checked=""/><div class="controls bullet"><span class="by">sbuk</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37095633">parent</a><span>|</span><a href="#37096601">next</a><span>|</span><label class="collapse" for="c-37097525">[-]</label><label class="expand" for="c-37097525">[1 more]</label></div><br/><div class="children"><div class="content">It was midnight and a few beers after celebrating a birthday. I&#x27;m sorry I offended your grammatical sensibilities. But you really did go full orange site there, didn&#x27;t you! I will admit to misquoting Mike Tyson; &quot;Everyone has a plan until they get punched in the mouth.&quot;, which I hope goes someway to restoring peace and order over a tiny, drunken grammatical slip-up.</div><br/></div></div><div id="37096601" class="c"><input type="checkbox" id="c-37096601" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37095633">parent</a><span>|</span><a href="#37097525">prev</a><span>|</span><a href="#37095650">next</a><span>|</span><label class="collapse" for="c-37096601">[-]</label><label class="expand" for="c-37096601">[3 more]</label></div><br/><div class="children"><div class="content">Simplicity isn&#x27;t a function of number of words alone.<p>&gt; Also, Tyson was ungrammatical, IMO:<p>&gt; &quot;Everybody&quot; vs. &quot;you&quot; in the same sentence, referring to the same entity.<p>Seems perfectly understandable to English speakers.  (And that&#x27;s pretty close to how English grammar is defined by descriptive linguists.)<p>Have a look at <a href="http:&#x2F;&#x2F;fine.me.uk&#x2F;Emonds&#x2F;" rel="nofollow noreferrer">http:&#x2F;&#x2F;fine.me.uk&#x2F;Emonds&#x2F;</a> for an exploration of these kinds of concepts.</div><br/><div id="37097029" class="c"><input type="checkbox" id="c-37097029" checked=""/><div class="controls bullet"><span class="by">dizhn</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37096601">parent</a><span>|</span><a href="#37095650">next</a><span>|</span><label class="collapse" for="c-37097029">[-]</label><label class="expand" for="c-37097029">[2 more]</label></div><br/><div class="children"><div class="content">Most places have &quot;they&quot; instead of &quot;you&quot; in the quote.</div><br/><div id="37098275" class="c"><input type="checkbox" id="c-37098275" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37097029">parent</a><span>|</span><a href="#37095650">next</a><span>|</span><label class="collapse" for="c-37098275">[-]</label><label class="expand" for="c-37098275">[1 more]</label></div><br/><div class="children"><div class="content">That works, too.</div><br/></div></div></div></div></div></div><div id="37095650" class="c"><input type="checkbox" id="c-37095650" checked=""/><div class="controls bullet"><span class="by">fuzztester</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37095633">parent</a><span>|</span><a href="#37096601">prev</a><span>|</span><a href="#37095821">next</a><span>|</span><label class="collapse" for="c-37095650">[-]</label><label class="expand" for="c-37095650">[1 more]</label></div><br/><div class="children"><div class="content">And anyway, simplicity, although I favor it a lot in my work, is not a virtue in itself. As for many, if not most issues, the answer is &quot;It all depends.&quot;.</div><br/></div></div></div></div></div></div></div></div><div id="37095451" class="c"><input type="checkbox" id="c-37095451" checked=""/><div class="controls bullet"><span class="by">bmurphy1976</span><span>|</span><a href="#37093267">parent</a><span>|</span><a href="#37094401">prev</a><span>|</span><a href="#37094235">next</a><span>|</span><label class="collapse" for="c-37095451">[-]</label><label class="expand" for="c-37095451">[1 more]</label></div><br/><div class="children"><div class="content">I think about this whenever a product lead talks about planning something, dumping it on the dev team, and saying it&#x27;s the dev team&#x27;s responsibility to figure out how to implement it. No wonder the part of the company that does this has a very contentious relationship with their product team and is overly oriented around metrics, having to constantly fight for resources and prove they don&#x27;t have the bandwidth to take on projects.<p>Meanwhile our side of the org has a much more collaborative relationship with our product team. We have our issues for sure, but our relationships are sound. The feedback loop is tight and product pushes back on things as much as the dev team does. Product works with the dev team to figure out what we can do and stays with us to the end. There&#x27;s much less tossing things over the fence and everybody seems happier.</div><br/></div></div><div id="37094235" class="c"><input type="checkbox" id="c-37094235" checked=""/><div class="controls bullet"><span class="by">Buttons840</span><span>|</span><a href="#37093267">parent</a><span>|</span><a href="#37095451">prev</a><span>|</span><a href="#37095810">next</a><span>|</span><label class="collapse" for="c-37094235">[-]</label><label class="expand" for="c-37094235">[2 more]</label></div><br/><div class="children"><div class="content">I like a similar quote from Steven Pressfield:<p>“The athlete knows the day will never come when he wakes up pain-free. He has to play hurt.”<p>This applies to ourselves more than our systems though.</div><br/><div id="37095267" class="c"><input type="checkbox" id="c-37095267" checked=""/><div class="controls bullet"><span class="by">brookst</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37094235">parent</a><span>|</span><a href="#37095810">next</a><span>|</span><label class="collapse" for="c-37095267">[-]</label><label class="expand" for="c-37095267">[1 more]</label></div><br/><div class="children"><div class="content">I think it’s as applicable to systems. They are all imperfect, they all have flaws and broken parts that need fixing. And we have to use them.</div><br/></div></div></div></div><div id="37095810" class="c"><input type="checkbox" id="c-37095810" checked=""/><div class="controls bullet"><span class="by">yardie</span><span>|</span><a href="#37093267">parent</a><span>|</span><a href="#37094235">prev</a><span>|</span><a href="#37093653">next</a><span>|</span><label class="collapse" for="c-37095810">[-]</label><label class="expand" for="c-37095810">[2 more]</label></div><br/><div class="children"><div class="content">I’m not sure who came up with it first but the nautical expression is, “you sail with the crew you have”</div><br/><div id="37098312" class="c"><input type="checkbox" id="c-37098312" checked=""/><div class="controls bullet"><span class="by">i_like_apis</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37095810">parent</a><span>|</span><a href="#37093653">next</a><span>|</span><label class="collapse" for="c-37098312">[-]</label><label class="expand" for="c-37098312">[1 more]</label></div><br/><div class="children"><div class="content">Yeah I should have left the Rumsfeld part out because the conversation naturally got distracted. It isn’t accurate to attribute it to him. His was perhaps the most prominent recent version , but he was definitely paraphrasing an existing adage.</div><br/></div></div></div></div><div id="37093653" class="c"><input type="checkbox" id="c-37093653" checked=""/><div class="controls bullet"><span class="by">sainez</span><span>|</span><a href="#37093267">parent</a><span>|</span><a href="#37095810">prev</a><span>|</span><a href="#37093936">next</a><span>|</span><label class="collapse" for="c-37093653">[-]</label><label class="expand" for="c-37093653">[4 more]</label></div><br/><div class="children"><div class="content">Great point about working on teams. For the vast majority of tasks, people are only marginally better or worse than each other. A few people with decent communication will outpace a &quot;star&quot; any day of the week.<p>I try to remind myself of this fact when I&#x27;m frustrated with other people. A bit of humility and gratitude go a long way.</div><br/><div id="37095123" class="c"><input type="checkbox" id="c-37095123" checked=""/><div class="controls bullet"><span class="by">prmph</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37093653">parent</a><span>|</span><a href="#37096635">next</a><span>|</span><label class="collapse" for="c-37095123">[-]</label><label class="expand" for="c-37095123">[2 more]</label></div><br/><div class="children"><div class="content">Hmmmm, I really don&#x27;t think this is true all (or even most of) the time. It probably depends on the task at hand, but if leading small teams of all kinds has taught me anything, it&#x27;s that I&#x27;d prefer a tiny team (or even one person) who is at least above average competence, and is reflective of the work they are doing, than several people of average or below-average competence.<p>It&#x27;s eye opening how many people are outright lazy with thought, don&#x27;t care about the joy of doing something well (apart from whatever extrinsic rewards are attached to the work). Many team members can actually produce negative value.<p>It seems that people who are really capable of (or care about) conscientious, original thought in problem solving and driving projects forward are few. Count yourself lucky if you get to manage one of these people, they can produce incredible value when well directed.</div><br/><div id="37096679" class="c"><input type="checkbox" id="c-37096679" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37095123">parent</a><span>|</span><a href="#37096635">next</a><span>|</span><label class="collapse" for="c-37096679">[-]</label><label class="expand" for="c-37096679">[1 more]</label></div><br/><div class="children"><div class="content">Btw, excellent communication can also be the skill that makes a &#x27;star&#x27;.</div><br/></div></div></div></div><div id="37096635" class="c"><input type="checkbox" id="c-37096635" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37093653">parent</a><span>|</span><a href="#37095123">prev</a><span>|</span><a href="#37093936">next</a><span>|</span><label class="collapse" for="c-37096635">[-]</label><label class="expand" for="c-37096635">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Great point about working on teams. For the vast majority of tasks, people are only marginally better or worse than each other. A few people with decent communication will outpace a &quot;star&quot; any day of the week.<p>Depends on what you are working on.  Btw, good communication can also make someone a &#x27;star&#x27; and elevate the whole team.<p>&gt; I try to remind myself of this fact when I&#x27;m frustrated with other people. A bit of humility and gratitude go a long way.<p>That&#x27;s good advice for most situations.</div><br/></div></div></div></div><div id="37093936" class="c"><input type="checkbox" id="c-37093936" checked=""/><div class="controls bullet"><span class="by">tedunangst</span><span>|</span><a href="#37093267">parent</a><span>|</span><a href="#37093653">prev</a><span>|</span><a href="#37096884">next</a><span>|</span><label class="collapse" for="c-37093936">[-]</label><label class="expand" for="c-37093936">[3 more]</label></div><br/><div class="children"><div class="content">Mattis &quot;the enemy gets a vote&quot; is another good reminder of reality, although people get very angry about it. Useful in terms of security, privacy, DRM, etc.</div><br/><div id="37096300" class="c"><input type="checkbox" id="c-37096300" checked=""/><div class="controls bullet"><span class="by">roughly</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37093936">parent</a><span>|</span><a href="#37094124">next</a><span>|</span><label class="collapse" for="c-37096300">[-]</label><label class="expand" for="c-37096300">[1 more]</label></div><br/><div class="children"><div class="content">I work in an area with particularly clever and motivated users, and this quote pops to mind now and again when I learn about some of the hacks they’re using to get around some of the more optimistically designed systems they’ve been provided.</div><br/></div></div><div id="37094124" class="c"><input type="checkbox" id="c-37094124" checked=""/><div class="controls bullet"><span class="by">walterbell</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37093936">parent</a><span>|</span><a href="#37096300">prev</a><span>|</span><a href="#37096884">next</a><span>|</span><label class="collapse" for="c-37094124">[-]</label><label class="expand" for="c-37094124">[1 more]</label></div><br/><div class="children"><div class="content">Product management outside the box.</div><br/></div></div></div></div><div id="37096884" class="c"><input type="checkbox" id="c-37096884" checked=""/><div class="controls bullet"><span class="by">coldtea</span><span>|</span><a href="#37093267">parent</a><span>|</span><a href="#37093936">prev</a><span>|</span><a href="#37094410">next</a><span>|</span><label class="collapse" for="c-37096884">[-]</label><label class="expand" for="c-37096884">[1 more]</label></div><br/><div class="children"><div class="content">This however is a retelling of centuries old proverbs and quotes (all the way to Roosevel&#x27;s &quot;do what you can, with what you have, where you are&quot;), and &quot;unknown unknowns&quot; was a concept already familiar in epistemology, but also fields like systems theory, risk management, etc.</div><br/></div></div><div id="37094410" class="c"><input type="checkbox" id="c-37094410" checked=""/><div class="controls bullet"><span class="by">makeitdouble</span><span>|</span><a href="#37093267">parent</a><span>|</span><a href="#37096884">prev</a><span>|</span><a href="#37095579">next</a><span>|</span><label class="collapse" for="c-37094410">[-]</label><label class="expand" for="c-37094410">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m thinking about this quote for a while but have a hard time squeezing the meaning, or really the actionable part out of it.<p>The unknown unknowns quote brings the concept that however confident you are in a plan you absolutely need margin. The other quote thought...what do you do differently when understanding that your team is not perfect ?<p>On one side, outside of VC backed startups I don&#x27;t see companies trying to reinvent linux whith a team of 4 new graduates. On the other side companies with really big goals will hire a bunch until they feel comfortable with their talent before &quot;going to war&quot;. You&#x27;ll see recruiting posts seeking specialists in a field before a company bets the farm on that specific field (imagine Facebook renaming itself to Meta before owning Oculus...nobody does that[0])<p>Edit: sorry, I forgot some guy actually just did that 2 weeks ago with a major social platform. And I kinda wanted to forget about it I think.</div><br/></div></div><div id="37095579" class="c"><input type="checkbox" id="c-37095579" checked=""/><div class="controls bullet"><span class="by">bachmeier</span><span>|</span><a href="#37093267">parent</a><span>|</span><a href="#37094410">prev</a><span>|</span><a href="#37096193">next</a><span>|</span><label class="collapse" for="c-37095579">[-]</label><label class="expand" for="c-37095579">[2 more]</label></div><br/><div class="children"><div class="content">That&#x27;s the right attitude for an employee. If management says something like that, look for a new job. It&#x27;s not sustainable to compete with fewer resources than your opposition. There&#x27;s a reason college sports is going through a passionate realignment right now.</div><br/><div id="37096216" class="c"><input type="checkbox" id="c-37096216" checked=""/><div class="controls bullet"><span class="by">nostrademons</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37095579">parent</a><span>|</span><a href="#37096193">next</a><span>|</span><label class="collapse" for="c-37096216">[-]</label><label class="expand" for="c-37096216">[1 more]</label></div><br/><div class="children"><div class="content">The way to win with fewer resources than your competition is to convince them it&#x27;s not a competition.  Or even better, to not let them know you exist.</div><br/></div></div></div></div><div id="37096193" class="c"><input type="checkbox" id="c-37096193" checked=""/><div class="controls bullet"><span class="by">batch12</span><span>|</span><a href="#37093267">parent</a><span>|</span><a href="#37095579">prev</a><span>|</span><a href="#37093614">next</a><span>|</span><label class="collapse" for="c-37096193">[-]</label><label class="expand" for="c-37096193">[2 more]</label></div><br/><div class="children"><div class="content">Sounds like he may have been a Shania Twain fan - &quot;Dance with the One That Brought You&quot; is the similar phrase I&#x27;ve heard</div><br/><div id="37097045" class="c"><input type="checkbox" id="c-37097045" checked=""/><div class="controls bullet"><span class="by">dizhn</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37096193">parent</a><span>|</span><a href="#37093614">next</a><span>|</span><label class="collapse" for="c-37097045">[-]</label><label class="expand" for="c-37097045">[1 more]</label></div><br/><div class="children"><div class="content">Let&#x27;s go back to the 70s.<p><a href="https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Love_the_One_You%27re_With" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Love_the_One_You%27re_With</a></div><br/></div></div></div></div><div id="37093614" class="c"><input type="checkbox" id="c-37093614" checked=""/><div class="controls bullet"><span class="by">KnobbleMcKnees</span><span>|</span><a href="#37093267">parent</a><span>|</span><a href="#37096193">prev</a><span>|</span><a href="#37094554">next</a><span>|</span><label class="collapse" for="c-37093614">[-]</label><label class="expand" for="c-37093614">[18 more]</label></div><br/><div class="children"><div class="content">That was Donald Rumsfeld!? I always assumed this came from some techie or agile guru given how much it&#x27;s used as a concept in project planning.</div><br/><div id="37094348" class="c"><input type="checkbox" id="c-37094348" checked=""/><div class="controls bullet"><span class="by">killjoywashere</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37093614">parent</a><span>|</span><a href="#37095813">next</a><span>|</span><label class="collapse" for="c-37094348">[-]</label><label class="expand" for="c-37094348">[5 more]</label></div><br/><div class="children"><div class="content">As a military officer who was watching CNN live from inside an aircraft carrier (moored) when he said that, being in charge of anti-terrorism on the ship at the time, it was absolutely foundational to my approach to so many things after that. Here&#x27;s the actual footage: <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=REWeBzGuzCc">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=REWeBzGuzCc</a><p>Rumsfeld was complicated, but there&#x27;s no doubt he was very effective at leading the Department. I think most people fail to realize how sophisticated the Office of the Secretary of Defense is. Their resources reel the mind, most of all the human capital, many with PhDs, many very savvy political operators with stunning operational experiences. As a small example, as I recall, Google&#x27;s hallowed SRE system was developed by an engineer who had come up through the ranks of Navy nuclear power. That&#x27;s but one small component reporting into OSD.<p>Not a Rumsfeld apologist, by any means. Errol Morris did a good job showing the man for who he is, and it&#x27;s not pretty (1). But reading HN comments opining about the leadership qualities of a Navy fighter pilot who was both the youngest and oldest SECDEF makes me realize how the Internet lets people indulge in a Dunning-Kruger situation the likes of which humanity has never seen.<p><a href="https:&#x2F;&#x2F;www.amazon.com&#x2F;Known-Donald-Rumsfeld&#x2F;dp&#x2F;B00JGMJ914" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.amazon.com&#x2F;Known-Donald-Rumsfeld&#x2F;dp&#x2F;B00JGMJ914</a></div><br/><div id="37095472" class="c"><input type="checkbox" id="c-37095472" checked=""/><div class="controls bullet"><span class="by">sgarland</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37094348">parent</a><span>|</span><a href="#37094959">next</a><span>|</span><label class="collapse" for="c-37095472">[-]</label><label class="expand" for="c-37095472">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Google&#x27;s hallowed SRE system was developed by an engineer who had come up through the ranks of Navy nuclear power<p>Wait, really? That makes _so much sense._ It also makes me upset that all of my attempts to sway other SRE orgs over to Nuclear Navy practices have been met with doubt.<p>- ex nuke submariner</div><br/><div id="37097217" class="c"><input type="checkbox" id="c-37097217" checked=""/><div class="controls bullet"><span class="by">hliyan</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37095472">parent</a><span>|</span><a href="#37094959">next</a><span>|</span><label class="collapse" for="c-37097217">[-]</label><label class="expand" for="c-37097217">[1 more]</label></div><br/><div class="children"><div class="content">Amazing. Just looked it up. This document references the nuclear navy and civil nuclear power multiple times: <a href="https:&#x2F;&#x2F;sre.google&#x2F;sre-book&#x2F;lessons-learned&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;sre.google&#x2F;sre-book&#x2F;lessons-learned&#x2F;</a></div><br/></div></div></div></div><div id="37094959" class="c"><input type="checkbox" id="c-37094959" checked=""/><div class="controls bullet"><span class="by">michael1999</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37094348">parent</a><span>|</span><a href="#37095472">prev</a><span>|</span><a href="#37096657">next</a><span>|</span><label class="collapse" for="c-37094959">[-]</label><label class="expand" for="c-37094959">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ll support you there.  In any sensible reading of Nuremberg, they all deserve to hang from the neck until dead.  But the central moral failure was Bush.  Letting Cheney hijack the vp search, and then pairing him up with Rumsfeld was a bad move, and obviously bad at the time.  Those two had established themselves as brilliant but paranoid kooks with their Team B fantasies in the 70s, and should never have been allowed free rein.</div><br/></div></div><div id="37096657" class="c"><input type="checkbox" id="c-37096657" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37094348">parent</a><span>|</span><a href="#37094959">prev</a><span>|</span><a href="#37095813">next</a><span>|</span><label class="collapse" for="c-37096657">[-]</label><label class="expand" for="c-37096657">[1 more]</label></div><br/><div class="children"><div class="content">&gt; [...] the Internet lets people indulge in a Dunning-Kruger situation the likes of which humanity has never seen.<p>While we are at it, that infamous Dunning-Kruger study showed didn&#x27;t even claim what people like to pretend it claimed.  In addition the more nuanced claim they did make is not supported by the evidence they collected and presented in their paper.  (Their statistics are pretty much useless, and as with any social science study, it has a small &#x27;n&#x27; and it doesn&#x27;t replicate.)<p>But the mythology &#x27;Dunning-Kruger effect&#x27; is too good to pass up in Internet discussions, so it survives as a meme.</div><br/></div></div></div></div><div id="37095813" class="c"><input type="checkbox" id="c-37095813" checked=""/><div class="controls bullet"><span class="by">twelvechairs</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37093614">parent</a><span>|</span><a href="#37094348">prev</a><span>|</span><a href="#37094260">next</a><span>|</span><label class="collapse" for="c-37095813">[-]</label><label class="expand" for="c-37095813">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s from a post WWII psychological theory the &#x27;Johari Window&#x27;. Rumsfeld brought the phrase into wider consciousness.<p><a href="https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Johari_window" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Johari_window</a></div><br/></div></div><div id="37094260" class="c"><input type="checkbox" id="c-37094260" checked=""/><div class="controls bullet"><span class="by">a_seattle_ian</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37093614">parent</a><span>|</span><a href="#37095813">prev</a><span>|</span><a href="#37093819">next</a><span>|</span><label class="collapse" for="c-37094260">[-]</label><label class="expand" for="c-37094260">[2 more]</label></div><br/><div class="children"><div class="content">That it came from Donald Rumsfeld in the context of what we know now and what he surely knew then is why it&#x27;s such a good quote. The words basically say nothing but are also true about everything. So it can implicit be a warning that there is probably some bullshit going on or someone has a sense of humor and is also warning people while also avoiding the subject - of course just my opinion. How people actually use it will depend what the audience agrees it to mean.</div><br/></div></div><div id="37093819" class="c"><input type="checkbox" id="c-37093819" checked=""/><div class="controls bullet"><span class="by">midasuni</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37093614">parent</a><span>|</span><a href="#37094260">prev</a><span>|</span><a href="#37094554">next</a><span>|</span><label class="collapse" for="c-37093819">[-]</label><label class="expand" for="c-37093819">[9 more]</label></div><br/><div class="children"><div class="content">And unknown unknowns is a great way to communicate with stakeholders too</div><br/><div id="37093888" class="c"><input type="checkbox" id="c-37093888" checked=""/><div class="controls bullet"><span class="by">roughly</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37093819">parent</a><span>|</span><a href="#37094554">next</a><span>|</span><label class="collapse" for="c-37093888">[-]</label><label class="expand" for="c-37093888">[8 more]</label></div><br/><div class="children"><div class="content">Žižek has a followup to that quote:<p>&quot;What he forgot to add was the crucial fourth term: the &quot;unknown knowns,&quot; the things we don&#x27;t know that we know.&quot;<p>I&#x27;ve found it&#x27;s really critical during the project planning phase to get to not just where the boundaries of our knowledge are, but also where are the things we&#x27;re either tacitly assuming or not even aware that we&#x27;ve assumed. An awful lot of postmortems I&#x27;ve been a part of have come down to &quot;It didn&#x27;t occur to us that could happen.&quot;</div><br/><div id="37094307" class="c"><input type="checkbox" id="c-37094307" checked=""/><div class="controls bullet"><span class="by">waprin</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37093888">parent</a><span>|</span><a href="#37097793">next</a><span>|</span><label class="collapse" for="c-37094307">[-]</label><label class="expand" for="c-37094307">[3 more]</label></div><br/><div class="children"><div class="content">I really enjoy the concept of unknown knowns, but I don’t agree with your example, which is an unknown unknown.<p>To me the corporate version of the unknown known is when a a project is certainly
doomed, for reasons everyone on the ground knows about, yet nobody wants to say anything and be the messenger that inevitably gets killed, as long as paycheck keeps clearing. An exec ten thousand feet from the ground sets a “vision” which can’t be blown off course by minor details such as reality, until the day it does.<p>Theranos is a famous example of this but I’ve had less extreme versions happen to me many times throughout my career.<p>Another example of unknown knowns might be the conflict between companies stated values (Focus on the User) and the unstated values that are often much more important (Make Lots of Money)</div><br/><div id="37096364" class="c"><input type="checkbox" id="c-37096364" checked=""/><div class="controls bullet"><span class="by">cozzyd</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37094307">parent</a><span>|</span><a href="#37095180">next</a><span>|</span><label class="collapse" for="c-37096364">[-]</label><label class="expand" for="c-37096364">[1 more]</label></div><br/><div class="children"><div class="content">In the case of the Iraq war, the unknown knowns were probably key...</div><br/></div></div><div id="37095180" class="c"><input type="checkbox" id="c-37095180" checked=""/><div class="controls bullet"><span class="by">roughly</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37094307">parent</a><span>|</span><a href="#37096364">prev</a><span>|</span><a href="#37097793">next</a><span>|</span><label class="collapse" for="c-37095180">[-]</label><label class="expand" for="c-37095180">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, you’re right. I was reaching for an example, but yours are much better and better capture the idea.</div><br/></div></div></div></div><div id="37097793" class="c"><input type="checkbox" id="c-37097793" checked=""/><div class="controls bullet"><span class="by">59nadir</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37093888">parent</a><span>|</span><a href="#37094307">prev</a><span>|</span><a href="#37093931">next</a><span>|</span><label class="collapse" for="c-37097793">[-]</label><label class="expand" for="c-37097793">[1 more]</label></div><br/><div class="children"><div class="content">I think unknown knowns are more easy to spot when teaching newcomers how the system works. Their questions will sometimes be about things we hadn&#x27;t even considerered (at least in some time) to be the case, but when you have to spell everything out it is indeed the case. In terms of teaching unknown knowns are critical to identify and instead make known knowns so that everyone can end up with a mostly equal playing field.<p>As an example, there are a lot of unknown knowns that you accumulate over the years in certain lower level languages that need to be spelled out more clearly to someone who is coming at it as a later endeavor. It&#x27;s entirely possible to spend all your time in a completely managed language nowadays and the concept of the stack, heap, etc., will be largely alien to you. These ideas and their limitations need to be spelled out clearly in order for someone to build the same knowledge base and intuition.<p>Unknown knowns are essentially endless in nature and extremely hard to find unless you have someone who simply doesn&#x27;t know to basically fall into traps and guide you toward finding your hidden knowledge.</div><br/></div></div><div id="37093931" class="c"><input type="checkbox" id="c-37093931" checked=""/><div class="controls bullet"><span class="by">munificent</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37093888">parent</a><span>|</span><a href="#37097793">prev</a><span>|</span><a href="#37094554">next</a><span>|</span><label class="collapse" for="c-37093931">[-]</label><label class="expand" for="c-37093931">[3 more]</label></div><br/><div class="children"><div class="content"><i>&gt; An awful lot of postmortems I&#x27;ve been a part of have come down to &quot;It didn&#x27;t occur to us that could happen.&quot; </i><p>Would that not be an unknown unknown?</div><br/><div id="37094013" class="c"><input type="checkbox" id="c-37094013" checked=""/><div class="controls bullet"><span class="by">roughly</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37093931">parent</a><span>|</span><a href="#37094554">next</a><span>|</span><label class="collapse" for="c-37094013">[-]</label><label class="expand" for="c-37094013">[2 more]</label></div><br/><div class="children"><div class="content">Usually there&#x27;s a tacit assumption of how the system works, how the users are using the system, or something else about the system or the environment that causes that - it&#x27;s not that the answer wasn&#x27;t known, it&#x27;s that it was assumed to be something it wasn&#x27;t and nobody realized that was an assumption and not a fact.</div><br/><div id="37094120" class="c"><input type="checkbox" id="c-37094120" checked=""/><div class="controls bullet"><span class="by">thfuran</span><span>|</span><a href="#37093267">root</a><span>|</span><a href="#37094013">parent</a><span>|</span><a href="#37094554">next</a><span>|</span><label class="collapse" for="c-37094120">[-]</label><label class="expand" for="c-37094120">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s just an unknown unknown masquerading as a known known.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="37094554" class="c"><input type="checkbox" id="c-37094554" checked=""/><div class="controls bullet"><span class="by">macNchz</span><span>|</span><a href="#37093267">prev</a><span>|</span><a href="#37092765">next</a><span>|</span><label class="collapse" for="c-37094554">[-]</label><label class="expand" for="c-37094554">[6 more]</label></div><br/><div class="children"><div class="content">In my experience, in web apps built on top of ORMs there is often a TON of low hanging fruit for query optimization when database load becomes an issue. Beyond the basics of &quot;do we have N+1 issues&quot;, ORMs sometimes just don&#x27;t generate optimal queries. I wouldn&#x27;t want to built a complex production web app <i>without</i> an ORM, but being able to eject from it sometimes is key.<p>Profile real world queries being run in production that use the most resources. Take a look at them. Get a sense of the shape of the tables that they&#x27;re running against. Sometimes the ORM will be using a join where you actually want a subquery. Sometimes the opposite. Sometimes you&#x27;ll want to aggregate some results beforehand, or adjust the WHERE conditions in a complex join. I&#x27;ve seen situations where a semi-frequent ORM-generated query was murdering the DB, taking 20+ seconds to run, and with a few minor tweaks it would run in less than a second.</div><br/><div id="37094669" class="c"><input type="checkbox" id="c-37094669" checked=""/><div class="controls bullet"><span class="by">nerdponx</span><span>|</span><a href="#37094554">parent</a><span>|</span><a href="#37096702">next</a><span>|</span><label class="collapse" for="c-37094669">[-]</label><label class="expand" for="c-37094669">[4 more]</label></div><br/><div class="children"><div class="content">I&#x27;m working on something right now with the Python ORM SQLAlchemy. It turns out that getting it to use RETURNING with INSERT is not trivial and requires you to set the non-obvious option `expire_on_commit=False`, which doesn&#x27;t <i>guarantee</i> use of RETURNING, but is supposed to use it if your db driver and database happen to support it and the ORM happens to support it for that particular combination of driver and database. And there&#x27;s no API to actually inspect the generated SQL even though it&#x27;s emitted in the logs, so there&#x27;s no way to enforce the use of RETURNING in your test suite without capturing and scraping your own logs (which fortunately is very easy within the Pytest framework).<p>I like ORMs but this is just frustratingly complicated on so many levels. I also understand that SQLAlchemy is an enormous library and not everything will be easy. But I think this case exemplifies the trade-offs involved with using an ORM.<p>(Yes I am aware that using insert() itself in Core does what I want, I&#x27;m talking about .add()-ing an ORM object to an AsyncSession).</div><br/><div id="37096326" class="c"><input type="checkbox" id="c-37096326" checked=""/><div class="controls bullet"><span class="by">roughly</span><span>|</span><a href="#37094554">root</a><span>|</span><a href="#37094669">parent</a><span>|</span><a href="#37094911">next</a><span>|</span><label class="collapse" for="c-37096326">[-]</label><label class="expand" for="c-37096326">[1 more]</label></div><br/><div class="children"><div class="content">I don’t mean this as a slight on SQLAlchemy - it does a lot of things very well and provides a ton of levers and knobs - but it’s absolutely the first place I look when I’m looking for performance improvements.<p>A friend used to say Zookeeper was where the crazy lived in any application that used it - sqlalchemy is where the slow lives in any application that uses it.</div><br/></div></div><div id="37094911" class="c"><input type="checkbox" id="c-37094911" checked=""/><div class="controls bullet"><span class="by">bootsmann</span><span>|</span><a href="#37094554">root</a><span>|</span><a href="#37094669">parent</a><span>|</span><a href="#37096326">prev</a><span>|</span><a href="#37096702">next</a><span>|</span><label class="collapse" for="c-37094911">[-]</label><label class="expand" for="c-37094911">[2 more]</label></div><br/><div class="children"><div class="content">There is certainly an API to inspect your query, you can just call print() on the object iirc.</div><br/><div id="37095202" class="c"><input type="checkbox" id="c-37095202" checked=""/><div class="controls bullet"><span class="by">nerdponx</span><span>|</span><a href="#37094554">root</a><span>|</span><a href="#37094911">parent</a><span>|</span><a href="#37096702">next</a><span>|</span><label class="collapse" for="c-37095202">[-]</label><label class="expand" for="c-37095202">[1 more]</label></div><br/><div class="children"><div class="content">The problem is with using `session.add(obj)` instead of `session.scalars(insert(TheClass).returning(TheClass), data)`. If there&#x27;s a way to get generated SQL from an AsyncSession, please do let me know.</div><br/></div></div></div></div></div></div><div id="37096702" class="c"><input type="checkbox" id="c-37096702" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#37094554">parent</a><span>|</span><a href="#37094669">prev</a><span>|</span><a href="#37092765">next</a><span>|</span><label class="collapse" for="c-37096702">[-]</label><label class="expand" for="c-37096702">[1 more]</label></div><br/><div class="children"><div class="content">A big problem with ORM&#x27;s is that object orientation is just not a good way to organise software nor data for most domains.<p>Most business logic would be better expressed in the language of relational algebra (plus some extensions) than via OOP.</div><br/></div></div></div></div><div id="37092765" class="c"><input type="checkbox" id="c-37092765" checked=""/><div class="controls bullet"><span class="by">Xeoncross</span><span>|</span><a href="#37094554">prev</a><span>|</span><a href="#37092911">next</a><span>|</span><label class="collapse" for="c-37092765">[-]</label><label class="expand" for="c-37092765">[2 more]</label></div><br/><div class="children"><div class="content">&gt; The real cost of increased complexity – often the much larger cost – is attention.<p>...or just mental load. I&#x27;m tired of working on micro-service systems that still have downtime, but no one knows how it all works. Most are actually just distributed monoliths so changes often touch multiple services and have to be rolled out in order. Data has to be duplicated, tasks have to be synchronized, state has to be shared, etc...<p><a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=y8OnoxKotPQ">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=y8OnoxKotPQ</a></div><br/><div id="37093284" class="c"><input type="checkbox" id="c-37093284" checked=""/><div class="controls bullet"><span class="by">javajosh</span><span>|</span><a href="#37092765">parent</a><span>|</span><a href="#37092911">next</a><span>|</span><label class="collapse" for="c-37093284">[-]</label><label class="expand" for="c-37093284">[1 more]</label></div><br/><div class="children"><div class="content">This is a very common architectural smell, when you have uservices and &quot;no-one knows how they all work&quot;. The whole point is that no-one can or should know how they all work; the fact that someone does in order to fix or modify the system is a strong signal that you&#x27;ve violated some of the rules - like single responsibility, and proper abstraction through API. But, in my experience, this is extremely common - debugging a pipeline of N microservices often requires running and building all N services locally. This is, strictly speaking, a monolith + network partitions + (infinite) build&#x2F;deploy variation. An extremely challenging work environment that is ultimately beyond any mortal programmer&#x27;s ability, IMO.</div><br/></div></div></div></div><div id="37092911" class="c"><input type="checkbox" id="c-37092911" checked=""/><div class="controls bullet"><span class="by">sssspppp</span><span>|</span><a href="#37092765">prev</a><span>|</span><a href="#37092711">next</a><span>|</span><label class="collapse" for="c-37092911">[-]</label><label class="expand" for="c-37092911">[1 more]</label></div><br/><div class="children"><div class="content">Love this post. I’ve been trying to tell my manager the same message for the last few months (with little success).
We’re about to embark on a massive migration to “next-gen infrastructure” (read: three different Redshift clusters managed by CDK) because our overloaded Redshift cluster (already maxed out  with RA3 nodes) has melted down one too many times. The next-gen infra is significantly more complex than our existing setup and I’m not convinced this migration will be the silver bullet everyone is hoping for.</div><br/></div></div><div id="37092711" class="c"><input type="checkbox" id="c-37092711" checked=""/><div class="controls bullet"><span class="by">discussDev</span><span>|</span><a href="#37092911">prev</a><span>|</span><a href="#37097797">next</a><span>|</span><label class="collapse" for="c-37092711">[-]</label><label class="expand" for="c-37092711">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s the boring solution.  It should also only be the default answer if you are not building a super critical system to life and limb. But it certainly gives a much lower total cost of ownership.  If you don&#x27;t have the resources for some big redundant system, I&#x27;ve too often seen the complexity added by the redundant system be the issue then focusing on simplicity.  If you need to add a bunch of people to support complexity but both the money and the risk assessment doesn&#x27;t call for it, simpler is much better.  I won&#x27;t say I haven&#x27;t seen the issue where eventually it was only a huge project to go forward, but I tend to think sometimes even that is less then the sum of having dealt with complexity to that point, it&#x27;s dependent on a lot about what you are building.</div><br/></div></div><div id="37097797" class="c"><input type="checkbox" id="c-37097797" checked=""/><div class="controls bullet"><span class="by">pythooooi</span><span>|</span><a href="#37092711">prev</a><span>|</span><a href="#37094351">next</a><span>|</span><label class="collapse" for="c-37097797">[-]</label><label class="expand" for="c-37097797">[1 more]</label></div><br/><div class="children"><div class="content">It has never been as easy as today to see slow &#x2F; shitty queries life.<p>Open telemetry, tracing and grafanasupport with k8s you basically get it running in a day.<p>But with performance it&#x27;s always the same issue: people apparently do not think about it and the optimizations necessary are often: enable query statistics, finding the query in code and either fix&#x2F;add an index or slightly rewrite your code or add some kind of cache (query, etc).<p>The last time I analyzed a slow query apparently no one before me spotted the huge memory footprint of that PostgreSQL query and focused on why it runs slower in one region vs the other.<p>You know the &#x27;10x developer&#x27; myth?<p>Yeah if you still look like a sheep after working in it so long and thinking about architecture and performance is still not second nature for you...<p>I&#x27;m slightly cynical because I love performance and optimizing it but 99% of those issues are no issues just people not knowing enough about their tools.</div><br/></div></div><div id="37094351" class="c"><input type="checkbox" id="c-37094351" checked=""/><div class="controls bullet"><span class="by">zengid</span><span>|</span><a href="#37097797">prev</a><span>|</span><a href="#37098016">next</a><span>|</span><label class="collapse" for="c-37094351">[-]</label><label class="expand" for="c-37094351">[4 more]</label></div><br/><div class="children"><div class="content">The solution they went with, squeezing juice out of the system by finding performance optimizations, brings me so much joy.<p>It reminds me of Richard L. Sites&#x27;s book _Understanding_Software_Dynamics_ where he basically teaches how to measure and fix latency issues, and how at large scales, reducing latency can have tremendous savings.<p>Measuring and reasoning about those issues are hard, but the solutions are often simple. For example, on page 9 he mentions that <i>&quot;[a] simple change paid for 10 years of my salary.&quot;</i><p>I hope to someday make such an impactful optimization!</div><br/><div id="37096336" class="c"><input type="checkbox" id="c-37096336" checked=""/><div class="controls bullet"><span class="by">scottlamb</span><span>|</span><a href="#37094351">parent</a><span>|</span><a href="#37094703">next</a><span>|</span><label class="collapse" for="c-37096336">[-]</label><label class="expand" for="c-37096336">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Measuring and reasoning about those issues are hard, but the solutions are often simple. For example, on page 9 he mentions that &quot;[a] simple change paid for 10 years of my salary.&quot; I hope to someday make such an impactful optimization!<p>I did that at Google more than once. They use a tremendous amount of machine resources and have excellent performance tools [1], so it&#x27;s fertile ground.<p>There are a lot of other smart people around though so if you find a big opportunity there&#x27;s probably a reason no one else has jumped on it. Maybe technical, maybe organizational. As an example of the latter, Google doesn&#x27;t usually reward this kind of thing except when there&#x27;s a resource crunch. Like, maybe I got a peer bonus (~$100) for one of them. I certainly didn&#x27;t a 10% commission or a promotion or the ability to keep getting a paycheck without showing up for the next 10 years or whatever. As a general rule, they&#x27;d prefer engineers work on growing revenue than on reducing cost. Whether this is the right policy or not is kind of above my pay grade...<p>[1] e.g. <a href="https:&#x2F;&#x2F;research.google&#x2F;pubs&#x2F;pub36575&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;research.google&#x2F;pubs&#x2F;pub36575&#x2F;</a></div><br/></div></div><div id="37094703" class="c"><input type="checkbox" id="c-37094703" checked=""/><div class="controls bullet"><span class="by">canucker2016</span><span>|</span><a href="#37094351">parent</a><span>|</span><a href="#37096336">prev</a><span>|</span><a href="#37098016">next</a><span>|</span><label class="collapse" for="c-37094703">[-]</label><label class="expand" for="c-37094703">[2 more]</label></div><br/><div class="children"><div class="content">The problem I have with their eventual solution is that they only optimized their queries AFTER they had upgraded their instance to the largest config available.<p>They couldn&#x27;t upgrade their config with a few clicks in the admin console anymore (I&#x27;m guessing what&#x27;s involved here) so now they had to use actual grey matter to fix their capacity problem. Maybe if they had spent more time optimizing specific parts of their code, they wouldn&#x27;t even need such a large config instance.</div><br/><div id="37095536" class="c"><input type="checkbox" id="c-37095536" checked=""/><div class="controls bullet"><span class="by">sgarland</span><span>|</span><a href="#37094351">root</a><span>|</span><a href="#37094703">parent</a><span>|</span><a href="#37098016">next</a><span>|</span><label class="collapse" for="c-37095536">[-]</label><label class="expand" for="c-37095536">[1 more]</label></div><br/><div class="children"><div class="content">Despite the fact that SQL is not a complex language, and relational algebra isn&#x27;t that hard, people regard it as dark magic.<p>Administering and tuning RDBMS is dark magic. Doing basic query optimization should be viewed the same as &quot;maybe don&#x27;t write an O(n^3) algorithm.&quot;</div><br/></div></div></div></div></div></div><div id="37098016" class="c"><input type="checkbox" id="c-37098016" checked=""/><div class="controls bullet"><span class="by">klntsky</span><span>|</span><a href="#37094351">prev</a><span>|</span><a href="#37093018">next</a><span>|</span><label class="collapse" for="c-37098016">[-]</label><label class="expand" for="c-37098016">[1 more]</label></div><br/><div class="children"><div class="content">Changing the architecture gives objective, measurable and predictable gains. Fine-tuning can give you any improvement on a scale of 0%-100%, and you never know in advance. So it is sometimes better to invest resources in a re-design.</div><br/></div></div><div id="37093018" class="c"><input type="checkbox" id="c-37093018" checked=""/><div class="controls bullet"><span class="by">sheepz</span><span>|</span><a href="#37098016">prev</a><span>|</span><a href="#37092913">next</a><span>|</span><label class="collapse" for="c-37093018">[-]</label><label class="expand" for="c-37093018">[4 more]</label></div><br/><div class="children"><div class="content">Agree wholeheartedly with the conclusion of the article.<p>But the post makes it seem that there was no real query-level monitoring for the Postgres instance in place, other than perhaps the basic CPU&#x2F;memory ones provided by the cloud provider. Using an ORM without this kind of monitoring is sure way to shoot yourself in the foot with n+1 queries, queries not using indexes&#x2F;missing indexes etc<p>The other thing that is amazing that everyone immediately reached for redesigning the system without analyzing the cause of the issues. A single postgres instance can do a lot!</div><br/><div id="37093728" class="c"><input type="checkbox" id="c-37093728" checked=""/><div class="controls bullet"><span class="by">PeledYuval</span><span>|</span><a href="#37093018">parent</a><span>|</span><a href="#37092913">next</a><span>|</span><label class="collapse" for="c-37093728">[-]</label><label class="expand" for="c-37093728">[3 more]</label></div><br/><div class="children"><div class="content">What&#x27;s your recommended way of implementing this in a simple App Server &lt;&gt; Postgres architecture? Is there a good Postgres plugin or do you utilize something on the App side?</div><br/><div id="37093825" class="c"><input type="checkbox" id="c-37093825" checked=""/><div class="controls bullet"><span class="by">sheepz</span><span>|</span><a href="#37093018">root</a><span>|</span><a href="#37093728">parent</a><span>|</span><a href="#37094144">next</a><span>|</span><label class="collapse" for="c-37093825">[-]</label><label class="expand" for="c-37093825">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve used pganalyze which is a non-free SaaS tool. Gives you a very good overview of where the DB time is spent with index suggestions etc. There are free alternatives, but require more work from you.</div><br/></div></div><div id="37094144" class="c"><input type="checkbox" id="c-37094144" checked=""/><div class="controls bullet"><span class="by">clintonb</span><span>|</span><a href="#37093018">root</a><span>|</span><a href="#37093728">parent</a><span>|</span><a href="#37093825">prev</a><span>|</span><a href="#37092913">next</a><span>|</span><label class="collapse" for="c-37094144">[-]</label><label class="expand" for="c-37094144">[1 more]</label></div><br/><div class="children"><div class="content">We use Datadog, which centralizes logs and application traces, allowing us to better pinpoint the exact request&#x2F;code path making the slow query.</div><br/></div></div></div></div></div></div><div id="37092913" class="c"><input type="checkbox" id="c-37092913" checked=""/><div class="controls bullet"><span class="by">iamwil</span><span>|</span><a href="#37093018">prev</a><span>|</span><a href="#37093539">next</a><span>|</span><label class="collapse" for="c-37092913">[-]</label><label class="expand" for="c-37092913">[5 more]</label></div><br/><div class="children"><div class="content">Ugh. I had a colleague that addressed any scaling problem by putting a cache in front of the DB. Praised for solving the immediate problem, but shouldered none of the costs. &lt;&#x2F;rant&gt;<p>I admit in the face of finding Prod&#x2F;market fit, you do the expedient thing, but damned if I&#x27;m not often at the receiving end of these sorts of decisions.</div><br/><div id="37096104" class="c"><input type="checkbox" id="c-37096104" checked=""/><div class="controls bullet"><span class="by">FridgeSeal</span><span>|</span><a href="#37092913">parent</a><span>|</span><a href="#37093612">next</a><span>|</span><label class="collapse" for="c-37096104">[-]</label><label class="expand" for="c-37096104">[1 more]</label></div><br/><div class="children"><div class="content">“Just put a cache in front of it to speed it up” is up there along with everyone’s favourite misunderstood “(premature) optimisation is the root of all evil” when it comes to performance and efficient software in my opinion.<p>Caching is mostly a lie. Redis will not “make” your application faster. It will just let you pretend the problem doesn’t exist for a while, and then when the caching eventually falls over, you will be even more stuck, because you’re now past your scaling limits, with no more defenses left and software that has been (continually) built without the understanding of its performance requirements.</div><br/></div></div><div id="37093612" class="c"><input type="checkbox" id="c-37093612" checked=""/><div class="controls bullet"><span class="by">aidos</span><span>|</span><a href="#37092913">parent</a><span>|</span><a href="#37096104">prev</a><span>|</span><a href="#37093539">next</a><span>|</span><label class="collapse" for="c-37093612">[-]</label><label class="expand" for="c-37093612">[3 more]</label></div><br/><div class="children"><div class="content">Interestingly, I often ask candidates about optimising a slow running db query and the majority of people jump to adding caching and very few ask if they can run an explain or see the indexes.</div><br/><div id="37094050" class="c"><input type="checkbox" id="c-37094050" checked=""/><div class="controls bullet"><span class="by">tedunangst</span><span>|</span><a href="#37092913">root</a><span>|</span><a href="#37093612">parent</a><span>|</span><a href="#37093539">next</a><span>|</span><label class="collapse" for="c-37094050">[-]</label><label class="expand" for="c-37094050">[2 more]</label></div><br/><div class="children"><div class="content">&quot;I would make the slow query faster&quot; seems too obvious an answer for an interview question.</div><br/><div id="37095492" class="c"><input type="checkbox" id="c-37095492" checked=""/><div class="controls bullet"><span class="by">pphysch</span><span>|</span><a href="#37092913">root</a><span>|</span><a href="#37094050">parent</a><span>|</span><a href="#37093539">next</a><span>|</span><label class="collapse" for="c-37095492">[-]</label><label class="expand" for="c-37095492">[1 more]</label></div><br/><div class="children"><div class="content">The question is usually phrased like &quot;what would you check&#x2F;do if you had a page that was taking many seconds to load&quot;.</div><br/></div></div></div></div></div></div></div></div><div id="37093539" class="c"><input type="checkbox" id="c-37093539" checked=""/><div class="controls bullet"><span class="by">mandevil</span><span>|</span><a href="#37092913">prev</a><span>|</span><a href="#37093743">next</a><span>|</span><label class="collapse" for="c-37093539">[-]</label><label class="expand" for="c-37093539">[2 more]</label></div><br/><div class="children"><div class="content">He says to avoid complexity, and the team he was on (cleaning up some bad queries) was probably improving along that axis (or at worst orthogonal to complexity) but, from having done exactly this, adding an optional &#x27;query the read-replica&#x27; option for queries- and determining whether this query can safely go there- is definitely extra complexity which will now need to be managed into the future. Definitely less overall than a complete re-arching of the system, but this is where engineering judgement and experience come into play: would you be better off getting those select queries resolved with some other data store or with a pg read-replica? If your query can survive against the read-replica (so stale data is at least sometimes acceptable) would you be better off caching results in redis?</div><br/><div id="37094552" class="c"><input type="checkbox" id="c-37094552" checked=""/><div class="controls bullet"><span class="by">gwbas1c</span><span>|</span><a href="#37093539">parent</a><span>|</span><a href="#37093743">next</a><span>|</span><label class="collapse" for="c-37094552">[-]</label><label class="expand" for="c-37094552">[1 more]</label></div><br/><div class="children"><div class="content">&gt; If your query can survive against the read-replica (so stale data is at least sometimes acceptable) would you be better off caching results in redis?<p>Caching adds a lot of complexity. It denormalizes the data, and now you &quot;need to know&quot; when to update the cache. Because &quot;the single source of truth&quot; is no longer maintained, it&#x27;s easy to accidentally add regressions.<p>If it&#x27;s a matter of adding a read replica, that&#x27;s a much better solution, long-term, because you don&#x27;t have the effort of &quot;does this query also need to update the cache?&quot;<p>(I&#x27;d think by now there would be a way to expose events in a DB when certain tables are updated; and then (semi) automatically invalidate the cache.)</div><br/></div></div></div></div><div id="37093743" class="c"><input type="checkbox" id="c-37093743" checked=""/><div class="controls bullet"><span class="by">sakopov</span><span>|</span><a href="#37093539">prev</a><span>|</span><a href="#37093707">next</a><span>|</span><label class="collapse" for="c-37093743">[-]</label><label class="expand" for="c-37093743">[1 more]</label></div><br/><div class="children"><div class="content">I thought I was going to read something insightful. Instead it was a post about how to completely ignore your database performance and then consider overcomplicating everything with sharding and microservices because you didn&#x27;t care to do basic profiling on your queries. I&#x27;m glad common sense prevailed, but this is really some junior-level stuff and it&#x27;s being celebrated as some kind of novelty.</div><br/></div></div><div id="37093707" class="c"><input type="checkbox" id="c-37093707" checked=""/><div class="controls bullet"><span class="by">phirschybar</span><span>|</span><a href="#37093743">prev</a><span>|</span><a href="#37095376">next</a><span>|</span><label class="collapse" for="c-37093707">[-]</label><label class="expand" for="c-37093707">[1 more]</label></div><br/><div class="children"><div class="content">I agree with this approach. the other added benefit is that when they decided to optimize the app by eliminating or tuning queries and utilizing replicas for reads, they ultimately made the app much more performant while possibly reducing complexity. the &quot;squeeze&quot; mindset pays off in the long-run here. the continued optimization over time is infinitely better than adding the complexity of microservices or expanded infrastructure because the latter will simply bury and compound the potential optimizations which could AND SHOULD have been made. squeeze squeeze squeeze until you just can&#x27;t squeeze any more!</div><br/></div></div><div id="37095376" class="c"><input type="checkbox" id="c-37095376" checked=""/><div class="controls bullet"><span class="by">tomxor</span><span>|</span><a href="#37093707">prev</a><span>|</span><a href="#37094299">next</a><span>|</span><label class="collapse" for="c-37095376">[-]</label><label class="expand" for="c-37095376">[1 more]</label></div><br/><div class="children"><div class="content">I find it useful to frame performance of pure software in two fairly distinct categories:<p>1. Efficiency, which I define as minimising losses i.e <i>not</i> writing things inefficiently, avoiding artificial complexity, bloat and keeping code simple. Performance hits here can also be a 1000 cuts problem when depending on many 3rd party pieces while having people chanting &quot;premature optimisation&quot; at you.<p>2. Optimization, which I define as employing specialist algorithms (which sometimes come in the form of entire tech stacks these days) with the cost of added complexity (and potentially performance trade) to get performance beyond the basic or naive yet efficiently implemented methods. The cost benefit ratio to these is not always worth it, especially in the beginning.<p>Hopefully the point I&#x27;m trying to make should be obvious, that attempting #2 before #1 is a bad idea, and in less explicit words I suspect this is kind of what the author is getting at... Yet it&#x27;s not all that uncommon to see someone trying to fit a turbocharger to a cheese skateboard with 64 triangular wheels.</div><br/></div></div><div id="37094299" class="c"><input type="checkbox" id="c-37094299" checked=""/><div class="controls bullet"><span class="by">gillh</span><span>|</span><a href="#37095376">prev</a><span>|</span><a href="#37092675">next</a><span>|</span><label class="collapse" for="c-37094299">[-]</label><label class="expand" for="c-37094299">[1 more]</label></div><br/><div class="children"><div class="content">Prioritized load shedding works well as a last resort [0]. The idea is simple -<p>- Detect overload&#x2F;congestion build-up at the database<p>- Apply queueing at the gateway service and schedule requests based on their priority<p>- Shed excess requests after a timeout<p>[0]:  <a href="https:&#x2F;&#x2F;docs.fluxninja.com&#x2F;blog&#x2F;protecting-postgresql-with-adaptive-rate-limiting" rel="nofollow noreferrer">https:&#x2F;&#x2F;docs.fluxninja.com&#x2F;blog&#x2F;protecting-postgresql-with-a...</a></div><br/></div></div><div id="37092675" class="c"><input type="checkbox" id="c-37092675" checked=""/><div class="controls bullet"><span class="by">huijzer</span><span>|</span><a href="#37094299">prev</a><span>|</span><a href="#37094933">next</a><span>|</span><label class="collapse" for="c-37092675">[-]</label><label class="expand" for="c-37092675">[3 more]</label></div><br/><div class="children"><div class="content">&gt; We should always put off significant complexity increases as long as possible.<p>Reminds me of the mantra that I’ve read here to easily go for reversible things and very careful when going for irreversible things.</div><br/><div id="37093537" class="c"><input type="checkbox" id="c-37093537" checked=""/><div class="controls bullet"><span class="by">sainez</span><span>|</span><a href="#37092675">parent</a><span>|</span><a href="#37093001">next</a><span>|</span><label class="collapse" for="c-37093537">[-]</label><label class="expand" for="c-37093537">[1 more]</label></div><br/><div class="children"><div class="content">It is mentioned in this article about the inception of AWS&#x27;s custom silicon: <a href="https:&#x2F;&#x2F;semiconductor.substack.com&#x2F;p&#x2F;on-the-origins-of-aws-custom-silicon" rel="nofollow noreferrer">https:&#x2F;&#x2F;semiconductor.substack.com&#x2F;p&#x2F;on-the-origins-of-aws-c...</a><p>&gt; “We use the terms one-way door and two-way door to describe the risk of a decision at Amazon. Two-way door decisions have a low cost of failure and are easy to undo, while one-way door decisions have a high cost of failure and are hard to undo. We make two-way door decisions quickly, knowing that speed of execution is key, but we make one-way door decisions slowly and far more deliberately.”</div><br/></div></div><div id="37093001" class="c"><input type="checkbox" id="c-37093001" checked=""/><div class="controls bullet"><span class="by">sssspppp</span><span>|</span><a href="#37092675">parent</a><span>|</span><a href="#37093537">prev</a><span>|</span><a href="#37094933">next</a><span>|</span><label class="collapse" for="c-37093001">[-]</label><label class="expand" for="c-37093001">[1 more]</label></div><br/><div class="children"><div class="content">Amazon’s one way vs two way door decisions echo the sentiment</div><br/></div></div></div></div><div id="37094933" class="c"><input type="checkbox" id="c-37094933" checked=""/><div class="controls bullet"><span class="by">klodolph</span><span>|</span><a href="#37092675">prev</a><span>|</span><a href="#37092896">next</a><span>|</span><label class="collapse" for="c-37094933">[-]</label><label class="expand" for="c-37094933">[1 more]</label></div><br/><div class="children"><div class="content">I have personally witnessed the “let’s build microservices to get better performance” argument. I definitely want to nip that in the bud.<p>It’s easy to fall in love with complexity, especially since you see a lot of complexity in existing systems. But those systems became complex as they evolved to meet user needs, or for other reasons, over time. Complex systems are impressive, but you need to make sure that your team has people who recognize the heavy costs of complexity, and who can throw their engineering efforts directly against the most important problems your team faces.</div><br/></div></div><div id="37092896" class="c"><input type="checkbox" id="c-37092896" checked=""/><div class="controls bullet"><span class="by">gary_0</span><span>|</span><a href="#37094933">prev</a><span>|</span><a href="#37093075">next</a><span>|</span><label class="collapse" for="c-37092896">[-]</label><label class="expand" for="c-37092896">[4 more]</label></div><br/><div class="children"><div class="content">No mention of caching? If your database is getting hammered with SELECTs, isn&#x27;t putting a cache in front of it something that should at least be considered?</div><br/><div id="37093026" class="c"><input type="checkbox" id="c-37093026" checked=""/><div class="controls bullet"><span class="by">deathanatos</span><span>|</span><a href="#37092896">parent</a><span>|</span><a href="#37093054">next</a><span>|</span><label class="collapse" for="c-37093026">[-]</label><label class="expand" for="c-37093026">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been in the OP&#x27;s situation, and this exact suggestion was made in my case. Welcome to one of the hardest problems in CS: cache invalidation.<p>If you have a dataset for which cache invalidation is easy (e.g., data that is written and never updated), yeah, absolutely go for this.<p>In our case, and most cases I&#x27;ve seen, it wasn&#x27;t so simple, and &quot;split this off to a DB better suited to it&quot; was less complex (maybe still a lot of work, but conceptually <i>simple</i>) than figuring out cache invalidation.</div><br/><div id="37093414" class="c"><input type="checkbox" id="c-37093414" checked=""/><div class="controls bullet"><span class="by">lern_too_spel</span><span>|</span><a href="#37092896">root</a><span>|</span><a href="#37093026">parent</a><span>|</span><a href="#37093054">next</a><span>|</span><label class="collapse" for="c-37093414">[-]</label><label class="expand" for="c-37093414">[1 more]</label></div><br/><div class="children"><div class="content">There are systems that will do that for you like <a href="https:&#x2F;&#x2F;readyset.io&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;readyset.io&#x2F;</a>.</div><br/></div></div></div></div><div id="37093054" class="c"><input type="checkbox" id="c-37093054" checked=""/><div class="controls bullet"><span class="by">Scarbutt</span><span>|</span><a href="#37092896">parent</a><span>|</span><a href="#37093026">prev</a><span>|</span><a href="#37093075">next</a><span>|</span><label class="collapse" for="c-37093054">[-]</label><label class="expand" for="c-37093054">[1 more]</label></div><br/><div class="children"><div class="content">They mentioned adding a DB replica for reads.</div><br/></div></div></div></div><div id="37093075" class="c"><input type="checkbox" id="c-37093075" checked=""/><div class="controls bullet"><span class="by">fritzo</span><span>|</span><a href="#37092896">prev</a><span>|</span><a href="#37092737">next</a><span>|</span><label class="collapse" for="c-37093075">[-]</label><label class="expand" for="c-37093075">[1 more]</label></div><br/><div class="children"><div class="content">&gt; since our work touched many parts of the codebase and demanded collaboration with lots of different devs, we now have a strong distributed knowledge base about the existing system<p>Great to see this cultural side-effect called out.</div><br/></div></div><div id="37092737" class="c"><input type="checkbox" id="c-37092737" checked=""/><div class="controls bullet"><span class="by">account-5</span><span>|</span><a href="#37093075">prev</a><span>|</span><a href="#37094228">next</a><span>|</span><label class="collapse" for="c-37092737">[-]</label><label class="expand" for="c-37092737">[1 more]</label></div><br/><div class="children"><div class="content">I suppose it seems obvious in hindsight that your first move should always be to investigate potential causes before a wholesale redesign that adds potentially unnecessary complexity to your system.</div><br/></div></div><div id="37094228" class="c"><input type="checkbox" id="c-37094228" checked=""/><div class="controls bullet"><span class="by">alfalfasprout</span><span>|</span><a href="#37092737">prev</a><span>|</span><a href="#37093166">next</a><span>|</span><label class="collapse" for="c-37094228">[-]</label><label class="expand" for="c-37094228">[1 more]</label></div><br/><div class="children"><div class="content">The problem is this is also a myopic way of looking at things. What you should be looking at is also operational complexity. What&#x27;s the current burden on your org&#x2F;team maintaining what you currently have? What about when you need to scale even higher?<p>A lot of teams that think this way end up with really high oncall burdens and then never have the time to even iterate on their infrastructure.</div><br/></div></div><div id="37093166" class="c"><input type="checkbox" id="c-37093166" checked=""/><div class="controls bullet"><span class="by">jakey_bakey</span><span>|</span><a href="#37094228">prev</a><span>|</span><a href="#37094431">next</a><span>|</span><label class="collapse" for="c-37093166">[-]</label><label class="expand" for="c-37093166">[1 more]</label></div><br/><div class="children"><div class="content">[The Grug Brained Developer](<a href="https:&#x2F;&#x2F;grugbrain.dev&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;grugbrain.dev&#x2F;</a>)</div><br/></div></div><div id="37094431" class="c"><input type="checkbox" id="c-37094431" checked=""/><div class="controls bullet"><span class="by">jsight</span><span>|</span><a href="#37093166">prev</a><span>|</span><a href="#37093997">next</a><span>|</span><label class="collapse" for="c-37094431">[-]</label><label class="expand" for="c-37094431">[1 more]</label></div><br/><div class="children"><div class="content">I blame the easy availability of additional resources in the cloud for a lot of problems here. Prod db slow? Get a bigger EC2 instance. Still slow? Hmm, maybe bigger again! Why bother tuning.<p>Now... Who knows why our AWS bill is so high?<p>With real hardware in a DC, you&#x27;d have to justify large capital expenditures to do something that stupid.</div><br/></div></div><div id="37093997" class="c"><input type="checkbox" id="c-37093997" checked=""/><div class="controls bullet"><span class="by">alfor</span><span>|</span><a href="#37094431">prev</a><span>|</span><a href="#37095547">next</a><span>|</span><label class="collapse" for="c-37093997">[-]</label><label class="expand" for="c-37093997">[2 more]</label></div><br/><div class="children"><div class="content">I wonder if moving the db on beefy dedicated hardware with ton of ram and nvme would solve the problem. Preferably physicaly connected to the web serveurs.<p>Cost: a fraction of the developper cost.<p>I see so many things done on the cloud that 10X their complexity because of it.
Modern hardware in increadibly powerfull.</div><br/><div id="37095794" class="c"><input type="checkbox" id="c-37095794" checked=""/><div class="controls bullet"><span class="by">winrid</span><span>|</span><a href="#37093997">parent</a><span>|</span><a href="#37095547">next</a><span>|</span><label class="collapse" for="c-37095794">[-]</label><label class="expand" for="c-37095794">[1 more]</label></div><br/><div class="children"><div class="content">If they were on the biggest instance I doubt they want to setup a network connection to another DC with another provider which has all kinds of business&#x2F;privacy policy&#x2F;etc concerns.<p>They likely already had 24.xlarge or something lol</div><br/></div></div></div></div><div id="37095547" class="c"><input type="checkbox" id="c-37095547" checked=""/><div class="controls bullet"><span class="by">jmmv</span><span>|</span><a href="#37093997">prev</a><span>|</span><label class="collapse" for="c-37095547">[-]</label><label class="expand" for="c-37095547">[1 more]</label></div><br/><div class="children"><div class="content">Reminds me of something I wrote a while back: <a href="https:&#x2F;&#x2F;jmmv.dev&#x2F;2020&#x2F;01&#x2F;system-rewrites-and-tuning.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;jmmv.dev&#x2F;2020&#x2F;01&#x2F;system-rewrites-and-tuning.html</a><p>TLDR: when facing problems like these, it’s too easy to look at grandiose solutions and, because they look like cool engineering problems, we end up justifying that it’s worth and reasonable to take on such year-long projects. But most often, the boring incremental solutions are easier and cheaper to achieve, while delivering benefit along the way.<p>This article shows examples of both, and I’m happy to see that the “boring” solution won.</div><br/></div></div></div></div></div></div></div></body></html>