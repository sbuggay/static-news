<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1727946065570" as="style"/><link rel="stylesheet" href="styles.css?v=1727946065570"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://chrisdone.com/posts/tour-of-hell/">A Tour of Hell – Shell scripting Haskell dialect</a> <span class="domain">(<a href="https://chrisdone.com">chrisdone.com</a>)</span></div><div class="subtext"><span>kreyenborgi</span> | <span>20 comments</span></div><br/><div><div id="41727826" class="c"><input type="checkbox" id="c-41727826" checked=""/><div class="controls bullet"><span class="by">chubot</span><span>|</span><a href="#41726284">next</a><span>|</span><label class="collapse" for="c-41727826">[-]</label><label class="expand" for="c-41727826">[1 more]</label></div><br/><div class="children"><div class="content">FWIW there are several Haskell and OCaml shell projects on this wiki page, which is editable:<p>Internal DSLs for Shell - <a href="https:&#x2F;&#x2F;github.com&#x2F;oils-for-unix&#x2F;oils&#x2F;wiki&#x2F;Internal-DSLs-for-Shell">https:&#x2F;&#x2F;github.com&#x2F;oils-for-unix&#x2F;oils&#x2F;wiki&#x2F;Internal-DSLs-for...</a><p>and ones in many other languages like Scheme and Lisp<p>e.g.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;jgoerzen&#x2F;hsh&#x2F;wiki">https:&#x2F;&#x2F;github.com&#x2F;jgoerzen&#x2F;hsh&#x2F;wiki</a><p><a href="https:&#x2F;&#x2F;github.com&#x2F;luke-clifton&#x2F;shh&#x2F;tree&#x2F;master&#x2F;shh">https:&#x2F;&#x2F;github.com&#x2F;luke-clifton&#x2F;shh&#x2F;tree&#x2F;master&#x2F;shh</a><p>And also a page of alternative shells:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;oils-for-unix&#x2F;oils&#x2F;wiki&#x2F;Alternative-Shells">https:&#x2F;&#x2F;github.com&#x2F;oils-for-unix&#x2F;oils&#x2F;wiki&#x2F;Alternative-Shell...</a></div><br/></div></div><div id="41726284" class="c"><input type="checkbox" id="c-41726284" checked=""/><div class="controls bullet"><span class="by">metadat</span><span>|</span><a href="#41727826">prev</a><span>|</span><a href="#41725146">next</a><span>|</span><label class="collapse" for="c-41726284">[-]</label><label class="expand" for="c-41726284">[3 more]</label></div><br/><div class="children"><div class="content">Why are there no examples with &quot;#!&#x2F;usr&#x2F;bin&#x2F;env ghc&quot; at the top?<p>It&#x27;s not a shell script without the Linux incantation stanza.. for reals.  How are you going to get started without the proper boiler plate?</div><br/><div id="41726652" class="c"><input type="checkbox" id="c-41726652" checked=""/><div class="controls bullet"><span class="by">whateveracct</span><span>|</span><a href="#41726284">parent</a><span>|</span><a href="#41726655">next</a><span>|</span><label class="collapse" for="c-41726652">[-]</label><label class="expand" for="c-41726652">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s &quot;#!&#x2F;usr&#x2F;bin&#x2F;env hell&quot; - this isn&#x27;t ghc. See <a href="https:&#x2F;&#x2F;chrisdone.com&#x2F;posts&#x2F;hell&#x2F;" rel="nofollow">https:&#x2F;&#x2F;chrisdone.com&#x2F;posts&#x2F;hell&#x2F;</a><p>This seems to be a deep tour of the implementation as much as the language. So it&#x27;s not supposed to be a first principles talk. That&#x27;s fine. It&#x27;s not all for everybody.</div><br/></div></div><div id="41726655" class="c"><input type="checkbox" id="c-41726655" checked=""/><div class="controls bullet"><span class="by">hi-v-rocknroll</span><span>|</span><a href="#41726284">parent</a><span>|</span><a href="#41726652">prev</a><span>|</span><a href="#41725146">next</a><span>|</span><label class="collapse" for="c-41726655">[-]</label><label class="expand" for="c-41726655">[1 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>    #!&#x2F;usr&#x2F;bin&#x2F;env runhaskell
</code></pre>
^ Works just fine. No need to reinvent what already exists and blog throwing shade on an inability to learn shell scripting.</div><br/></div></div></div></div><div id="41725146" class="c"><input type="checkbox" id="c-41725146" checked=""/><div class="controls bullet"><span class="by">simonmic</span><span>|</span><a href="#41726284">prev</a><span>|</span><a href="#41724422">next</a><span>|</span><label class="collapse" for="c-41725146">[-]</label><label class="expand" for="c-41725146">[1 more]</label></div><br/><div class="children"><div class="content">As a haskeller, and shell scripter, I find this a refreshing and exciting experiment. 
Much of the goodness of haskell, but with a much tighter focus and smaller scope. 
No imports, language pragmas, packages or build tools needed; 
all of the building blocks listed on one short page, <a href="https:&#x2F;&#x2F;chrisdone.github.io&#x2F;hell&#x2F;api" rel="nofollow">https:&#x2F;&#x2F;chrisdone.github.io&#x2F;hell&#x2F;api</a>.
More platform independent, robust, and regular than shell.
Potentially a nice learning language &#x2F; stepping stone to haskell itself.<p>It&#x27;s quite verbose right now, and I don&#x27;t see much networking API yet, but it&#x27;s just starting. I could see it easily growing into something very nice.</div><br/></div></div><div id="41724422" class="c"><input type="checkbox" id="c-41724422" checked=""/><div class="controls bullet"><span class="by">chongli</span><span>|</span><a href="#41725146">prev</a><span>|</span><a href="#41727141">next</a><span>|</span><label class="collapse" for="c-41724422">[-]</label><label class="expand" for="c-41724422">[8 more]</label></div><br/><div class="children"><div class="content">Interesting but not a great piece for anyone not into functional language design. A pretty deep dive into the &quot;how&quot; while completely ignoring the &quot;why.&quot;</div><br/><div id="41724650" class="c"><input type="checkbox" id="c-41724650" checked=""/><div class="controls bullet"><span class="by">rwmj</span><span>|</span><a href="#41724422">parent</a><span>|</span><a href="#41724769">next</a><span>|</span><label class="collapse" for="c-41724650">[-]</label><label class="expand" for="c-41724650">[3 more]</label></div><br/><div class="children"><div class="content">Or indeed the &quot;what&quot;.  Did he ever show an example of what the shell scripts look like?  I couldn&#x27;t see it.</div><br/><div id="41725048" class="c"><input type="checkbox" id="c-41725048" checked=""/><div class="controls bullet"><span class="by">simonmic</span><span>|</span><a href="#41724422">root</a><span>|</span><a href="#41724650">parent</a><span>|</span><a href="#41724769">next</a><span>|</span><label class="collapse" for="c-41725048">[-]</label><label class="expand" for="c-41725048">[2 more]</label></div><br/><div class="children"><div class="content">The first link takes you to the home page, which links to examples; probably a better starting point.<p><a href="https:&#x2F;&#x2F;chrisdone.github.io&#x2F;hell" rel="nofollow">https:&#x2F;&#x2F;chrisdone.github.io&#x2F;hell</a></div><br/><div id="41728025" class="c"><input type="checkbox" id="c-41728025" checked=""/><div class="controls bullet"><span class="by">rwmj</span><span>|</span><a href="#41724422">root</a><span>|</span><a href="#41725048">parent</a><span>|</span><a href="#41724769">next</a><span>|</span><label class="collapse" for="c-41728025">[-]</label><label class="expand" for="c-41728025">[1 more]</label></div><br/><div class="children"><div class="content">If you&#x27;re giving a presentation, you should start by telling the audience what it is you&#x27;re talking about.  <i>Someone</i> in the audience won&#x27;t have a clue, and usually most of the audience have no clue.</div><br/></div></div></div></div></div></div><div id="41724769" class="c"><input type="checkbox" id="c-41724769" checked=""/><div class="controls bullet"><span class="by">tmoertel</span><span>|</span><a href="#41724422">parent</a><span>|</span><a href="#41724650">prev</a><span>|</span><a href="#41727141">next</a><span>|</span><label class="collapse" for="c-41724769">[-]</label><label class="expand" for="c-41724769">[4 more]</label></div><br/><div class="children"><div class="content">Chris discusses the rationale in his blog post at <a href="https:&#x2F;&#x2F;chrisdone.com&#x2F;posts&#x2F;hell&#x2F;" rel="nofollow">https:&#x2F;&#x2F;chrisdone.com&#x2F;posts&#x2F;hell&#x2F;</a></div><br/><div id="41724939" class="c"><input type="checkbox" id="c-41724939" checked=""/><div class="controls bullet"><span class="by">chongli</span><span>|</span><a href="#41724422">root</a><span>|</span><a href="#41724769">parent</a><span>|</span><a href="#41727141">next</a><span>|</span><label class="collapse" for="c-41724939">[-]</label><label class="expand" for="c-41724939">[3 more]</label></div><br/><div class="children"><div class="content">Thanks for this! I read that but I&#x27;m still not convinced. Quote:<p><i>They lean far too heavily on sub processes to do basic things.</i><p>I thought this was the whole point of a unix scripting language! Most of the scripts I&#x27;m writing are not interactive REPLs or string-parsers, they&#x27;re glue code for batch-invoking commands on files. Stuff like converting a bunch of FLAC files into MP3 with lame or avi video files into mkv with ffmpeg.<p>What bash offers me is very terse command invocation and powerful filename globbing, including regexp substitution. Scripts like this are generally not intended to be used more than once or twice, and so a type system like Haskell provides is irrelevant here. If you&#x27;re writing something that&#x27;s going to be iterated on and maintained for years then you&#x27;re writing an application, not a script.</div><br/><div id="41727917" class="c"><input type="checkbox" id="c-41727917" checked=""/><div class="controls bullet"><span class="by">thesz</span><span>|</span><a href="#41724422">root</a><span>|</span><a href="#41724939">parent</a><span>|</span><a href="#41727977">next</a><span>|</span><label class="collapse" for="c-41727917">[-]</label><label class="expand" for="c-41727917">[1 more]</label></div><br/><div class="children"><div class="content">Let me introduce to you Kaldi, a speech-to-text engine. I put the link right into models directory, to save you some time.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;kaldi-asr&#x2F;kaldi&#x2F;tree&#x2F;master&#x2F;egs">https:&#x2F;&#x2F;github.com&#x2F;kaldi-asr&#x2F;kaldi&#x2F;tree&#x2F;master&#x2F;egs</a><p>There are a bunch of shell, Perl and Python scripts there, with some awk in between. These scripts are often copied almost verbatim between models and this, believe me, can lead to all sorts of errors.<p>The running joke around working with these scripts was &quot;all these .sh should be .hs,&quot; i.e., these scripts should be implemented in Haskell.</div><br/></div></div><div id="41727977" class="c"><input type="checkbox" id="c-41727977" checked=""/><div class="controls bullet"><span class="by">082349872349872</span><span>|</span><a href="#41724422">root</a><span>|</span><a href="#41724939">parent</a><span>|</span><a href="#41727917">prev</a><span>|</span><a href="#41727141">next</a><span>|</span><label class="collapse" for="c-41727977">[-]</label><label class="expand" for="c-41727977">[1 more]</label></div><br/><div class="children"><div class="content">&gt; <i>generally not intended to be used more than once or twice</i><p>on that note: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41489436">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41489436</a></div><br/></div></div></div></div></div></div></div></div><div id="41727141" class="c"><input type="checkbox" id="c-41727141" checked=""/><div class="controls bullet"><span class="by">scythmic_waves</span><span>|</span><a href="#41724422">prev</a><span>|</span><a href="#41723988">next</a><span>|</span><label class="collapse" for="c-41727141">[-]</label><label class="expand" for="c-41727141">[1 more]</label></div><br/><div class="children"><div class="content">I bet reddit.com&#x2F;r&#x2F;ProgrammingLanguages&#x2F; would like this.</div><br/></div></div><div id="41723988" class="c"><input type="checkbox" id="c-41723988" checked=""/><div class="controls bullet"><span class="by">jonotime</span><span>|</span><a href="#41727141">prev</a><span>|</span><a href="#41723593">next</a><span>|</span><label class="collapse" for="c-41723988">[-]</label><label class="expand" for="c-41723988">[2 more]</label></div><br/><div class="children"><div class="content">How was this page generated? I have a marp presentation (<a href="https:&#x2F;&#x2F;github.com&#x2F;jonocodes&#x2F;awesome-keyboards">https:&#x2F;&#x2F;github.com&#x2F;jonocodes&#x2F;awesome-keyboards</a>) that I would like to have shown on a single page like this with the notes expanded.</div><br/><div id="41724274" class="c"><input type="checkbox" id="c-41724274" checked=""/><div class="controls bullet"><span class="by">cryptonector</span><span>|</span><a href="#41723988">parent</a><span>|</span><a href="#41723593">next</a><span>|</span><label class="collapse" for="c-41724274">[-]</label><label class="expand" for="c-41724274">[1 more]</label></div><br/><div class="children"><div class="content">I really like this page, with slides on the left and blog on the right.</div><br/></div></div></div></div><div id="41723593" class="c"><input type="checkbox" id="c-41723593" checked=""/><div class="controls bullet"><span class="by">pvsnp</span><span>|</span><a href="#41723988">prev</a><span>|</span><label class="collapse" for="c-41723593">[-]</label><label class="expand" for="c-41723593">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve wanted many things from shell but never to write Haskell in Shell. This turned something relatively naturally expressible into something so complex that requires type theory</div><br/><div id="41723825" class="c"><input type="checkbox" id="c-41723825" checked=""/><div class="controls bullet"><span class="by">sinkasapa</span><span>|</span><a href="#41723593">parent</a><span>|</span><a href="#41726395">next</a><span>|</span><label class="collapse" for="c-41723825">[-]</label><label class="expand" for="c-41723825">[1 more]</label></div><br/><div class="children"><div class="content">There is no reason why one has to enjoy a haskell-like syntax over Bourne shell syntax but I think you&#x27;re wrong about the tool. The author states that &quot;It should have no abstraction capabilities (classes, data types, polymorphic functions, etc.).&quot; Granted, there may be types but without those abstractions, I don&#x27;t think you need to know much of anything about type theory.</div><br/></div></div><div id="41726395" class="c"><input type="checkbox" id="c-41726395" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#41723593">parent</a><span>|</span><a href="#41723825">prev</a><span>|</span><label class="collapse" for="c-41726395">[-]</label><label class="expand" for="c-41726395">[1 more]</label></div><br/><div class="children"><div class="content">You could use the Scheme Shell instead, if you don&#x27;t like static typing.<p><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Scsh" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Scsh</a><p>And specifically <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Scsh#%22Acknowledgments%22" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Scsh#%22Acknowledgments%22</a></div><br/></div></div></div></div></div></div></div></div></div></body></html>