<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1738141265766" as="style"/><link rel="stylesheet" href="styles.css?v=1738141265766"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://akrabat.com/using-uv-as-your-shebang-line/">Using uv as your shebang line</a> <span class="domain">(<a href="https://akrabat.com">akrabat.com</a>)</span></div><div class="subtext"><span>Einenlum</span> | <span>113 comments</span></div><br/><div><div id="42856610" class="c"><input type="checkbox" id="c-42856610" checked=""/><div class="controls bullet"><span class="by">rav</span><span>|</span><a href="#42859038">next</a><span>|</span><label class="collapse" for="c-42856610">[-]</label><label class="expand" for="c-42856610">[26 more]</label></div><br/><div class="children"><div class="content">Oh wow, today I learned about env -S - when I saw the shebang line in the article, I immediately thought &quot;that doesn&#x27;t work on Linux, shebang lines can only pass a single argument&quot;. Basically, running foo.py starting with<p><pre><code>    #!&#x2F;usr&#x2F;bin&#x2F;env -S uv run --script
</code></pre>
causes the OS run really run env with only two arguments, namely the shebang line as one argument and the script&#x27;s filename as the second argument, i.e.:<p><pre><code>    &#x2F;usr&#x2F;bin&#x2F;env &#x27;-S uv run --script&#x27; foo.py
</code></pre>
However, the -S flag of env causes env to split everything back into separate arguments! Very cool, very useful.</div><br/><div id="42862036" class="c"><input type="checkbox" id="c-42862036" checked=""/><div class="controls bullet"><span class="by">moondev</span><span>|</span><a href="#42856610">parent</a><span>|</span><a href="#42856704">next</a><span>|</span><label class="collapse" for="c-42862036">[-]</label><label class="expand" for="c-42862036">[1 more]</label></div><br/><div class="children"><div class="content">I like using this with tusk, which is a golang cli a bit like make, but it uses yaml for the config. The shebang is<p><pre><code>      #!&#x2F;usr&#x2F;bin&#x2F;env -s go run github.com&#x2F;rliebz&#x2F;tusk@latest -f
</code></pre>
Then use gosh a golang shell for the interpreter<p><pre><code>      interpreter: go run mvdan.cc&#x2F;sh&#x2F;v3&#x2F;cmd&#x2F;gosh@latest -s
</code></pre>
This makes it a cli can run anywhere on any architecture with golang installed</div><br/></div></div><div id="42856704" class="c"><input type="checkbox" id="c-42856704" checked=""/><div class="controls bullet"><span class="by">sangeeth96</span><span>|</span><a href="#42856610">parent</a><span>|</span><a href="#42862036">prev</a><span>|</span><a href="#42861614">next</a><span>|</span><label class="collapse" for="c-42856704">[-]</label><label class="expand" for="c-42856704">[11 more]</label></div><br/><div class="children"><div class="content">It&#x27;s frustrating this is not the same behavior on macOS: <a href="https:&#x2F;&#x2F;unix.stackexchange.com&#x2F;a&#x2F;774145" rel="nofollow">https:&#x2F;&#x2F;unix.stackexchange.com&#x2F;a&#x2F;774145</a></div><br/><div id="42858744" class="c"><input type="checkbox" id="c-42858744" checked=""/><div class="controls bullet"><span class="by">rav</span><span>|</span><a href="#42856610">root</a><span>|</span><a href="#42856704">parent</a><span>|</span><a href="#42857602">next</a><span>|</span><label class="collapse" for="c-42858744">[-]</label><label class="expand" for="c-42858744">[4 more]</label></div><br/><div class="children"><div class="content">It seems to me that macOS has env -S as well, but the shebang parsing is different. The result is that shebang lines using env -S are portable if they don&#x27;t contain any quotes or other characters. The reason is that, running env -S &#x27;echo a b c&#x27; has the same behavior as running env -S &#x27;echo&#x27; &#x27;a&#x27; &#x27;b&#x27; &#x27;c&#x27; - so simple command lines like the one with uv are still portable, regardless of whether the OS splits on space (macOS) or not (Linux).</div><br/><div id="42858954" class="c"><input type="checkbox" id="c-42858954" checked=""/><div class="controls bullet"><span class="by">fjarlq</span><span>|</span><a href="#42856610">root</a><span>|</span><a href="#42858744">parent</a><span>|</span><a href="#42860593">next</a><span>|</span><label class="collapse" for="c-42858954">[-]</label><label class="expand" for="c-42858954">[2 more]</label></div><br/><div class="children"><div class="content">This is true. For example, the following shebang&#x2F;uv header works on both macOS and Linux:<p><pre><code>  #!&#x2F;usr&#x2F;bin&#x2F;env -S uv --quiet run --script
  # &#x2F;&#x2F;&#x2F; script
  # requires-python = &quot;&gt;=3.13&quot;
  # dependencies = [
  #     &quot;python-dateutil&quot;,
  # ]
  # &#x2F;&#x2F;&#x2F;
  #
  # [python script that needs dateutil]</code></pre></div><br/><div id="42859684" class="c"><input type="checkbox" id="c-42859684" checked=""/><div class="controls bullet"><span class="by">bas</span><span>|</span><a href="#42856610">root</a><span>|</span><a href="#42858954">parent</a><span>|</span><a href="#42860593">next</a><span>|</span><label class="collapse" for="c-42859684">[-]</label><label class="expand" for="c-42859684">[1 more]</label></div><br/><div class="children"><div class="content">Very informative. Thank you!</div><br/></div></div></div></div><div id="42860593" class="c"><input type="checkbox" id="c-42860593" checked=""/><div class="controls bullet"><span class="by">sangeeth96</span><span>|</span><a href="#42856610">root</a><span>|</span><a href="#42858744">parent</a><span>|</span><a href="#42858954">prev</a><span>|</span><a href="#42857602">next</a><span>|</span><label class="collapse" for="c-42860593">[-]</label><label class="expand" for="c-42860593">[1 more]</label></div><br/><div class="children"><div class="content">True, this should be fine for straightforward stuff but extremely annoying as soon as you have for eg, quoted strings with whitespace in it which is where it breaks. Have to keep that difference in mind when writing scripts.<p>The link I posted in my original reply has a good explanation of this behavior. I was the one who asked the question there.</div><br/></div></div></div></div><div id="42857602" class="c"><input type="checkbox" id="c-42857602" checked=""/><div class="controls bullet"><span class="by">silverwind</span><span>|</span><a href="#42856610">root</a><span>|</span><a href="#42856704">parent</a><span>|</span><a href="#42858744">prev</a><span>|</span><a href="#42861614">next</a><span>|</span><label class="collapse" for="c-42857602">[-]</label><label class="expand" for="c-42857602">[6 more]</label></div><br/><div class="children"><div class="content">`brew install coreutils` and update your `PATH`.</div><br/><div id="42857738" class="c"><input type="checkbox" id="c-42857738" checked=""/><div class="controls bullet"><span class="by">sangeeth96</span><span>|</span><a href="#42856610">root</a><span>|</span><a href="#42857602">parent</a><span>|</span><a href="#42861268">next</a><span>|</span><label class="collapse" for="c-42857738">[-]</label><label class="expand" for="c-42857738">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;m aware of this package for getting other utilities but:<p>1. I&#x27;m worried about this conflicting&#x2F;causing other programs to fail if I set it on PATH.
2. This probably doesn&#x27;t fix the shebang parsing issue I mentioned since it&#x27;s an OS thing. Let me know if that&#x27;s not the case.</div><br/><div id="42858806" class="c"><input type="checkbox" id="c-42858806" checked=""/><div class="controls bullet"><span class="by">andreineculau</span><span>|</span><a href="#42856610">root</a><span>|</span><a href="#42857738">parent</a><span>|</span><a href="#42861268">next</a><span>|</span><label class="collapse" for="c-42858806">[-]</label><label class="expand" for="c-42858806">[2 more]</label></div><br/><div class="children"><div class="content">You&#x27;ve got nothing to worry<p>Been doing it for more than a decade and yet to get in trouble. Not one issue. Doing it consistently for my teams as we decrease cognitive load (developing on macs but targeting unix). Others would confirm <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=17943202">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=17943202</a><p>Basically software will either use absolute paths i.e. wants to use your OS version for a dependency like grep, or will use whatever grep is in your $PATH and stick to safe invocations regardless if it&#x27;s BSD&#x2F;GNU or if it&#x27;s version x or y</div><br/><div id="42860569" class="c"><input type="checkbox" id="c-42860569" checked=""/><div class="controls bullet"><span class="by">sangeeth96</span><span>|</span><a href="#42856610">root</a><span>|</span><a href="#42858806">parent</a><span>|</span><a href="#42861268">next</a><span>|</span><label class="collapse" for="c-42860569">[-]</label><label class="expand" for="c-42860569">[1 more]</label></div><br/><div class="children"><div class="content">Hmm, I haven’t run this experiment myself but I have in the past faced problems overriding default python&#x2F;ruby commands in PATH that caused some stuff to fail and had to add some specific overrides for `brew` command, for example.<p>&gt; Basically software will either use absolute paths<p>I’ve personally written scripts that break this assumption (that’s a me problem, I guess) so I am quite sure there’s a lot of scripts at the very least that do this.<p>Nevertheless, you’ve given me something to consider.</div><br/></div></div></div></div></div></div><div id="42861268" class="c"><input type="checkbox" id="c-42861268" checked=""/><div class="controls bullet"><span class="by">drzaiusx11</span><span>|</span><a href="#42856610">root</a><span>|</span><a href="#42857602">parent</a><span>|</span><a href="#42857738">prev</a><span>|</span><a href="#42859853">next</a><span>|</span><label class="collapse" for="c-42861268">[-]</label><label class="expand" for="c-42861268">[1 more]</label></div><br/><div class="children"><div class="content">You can also brew install the gnu tools package and have both side by side for compatibility (gnu tools are prefixed with &#x27;g&#x27;, gls, gcat, etc<p>I have a script that toggles the prefix on or off via bash aliases for when I need to run Linux bash scripts on a mac.</div><br/></div></div><div id="42859853" class="c"><input type="checkbox" id="c-42859853" checked=""/><div class="controls bullet"><span class="by">4ad</span><span>|</span><a href="#42856610">root</a><span>|</span><a href="#42857602">parent</a><span>|</span><a href="#42861268">prev</a><span>|</span><a href="#42861614">next</a><span>|</span><label class="collapse" for="c-42859853">[-]</label><label class="expand" for="c-42859853">[1 more]</label></div><br/><div class="children"><div class="content">The PATH is irrelevant, this is about how the kernel parses the shebang. It starts exactly &#x2F;usr&#x2F;bin&#x2F;env with two arguments, not some other env binary you might have in your PATH.</div><br/></div></div></div></div></div></div><div id="42861614" class="c"><input type="checkbox" id="c-42861614" checked=""/><div class="controls bullet"><span class="by">sudahtigabulan</span><span>|</span><a href="#42856610">parent</a><span>|</span><a href="#42856704">prev</a><span>|</span><a href="#42856742">next</a><span>|</span><label class="collapse" for="c-42861614">[-]</label><label class="expand" for="c-42861614">[1 more]</label></div><br/><div class="children"><div class="content">Reminds me of how GNU Guile handles the one argument limitation - with &quot;multi-line&quot; shebang[1].<p><pre><code>  #!&#x2F;usr&#x2F;bin&#x2F;guile \
  -e main -s
  !#
</code></pre>
turns into<p><pre><code>  &#x2F;usr&#x2F;bin&#x2F;guile -e main -s filename
</code></pre>
Wonder why they bothered.<p>Probably env -S is a recent addition. Or not available on all platforms they cared about.<p>[1]: <a href="https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;guile&#x2F;manual&#x2F;html_node&#x2F;The-Meta-Switch.html" rel="nofollow">https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;guile&#x2F;manual&#x2F;html_node&#x2F;The-Meta...</a></div><br/></div></div><div id="42856742" class="c"><input type="checkbox" id="c-42856742" checked=""/><div class="controls bullet"><span class="by">viraptor</span><span>|</span><a href="#42856610">parent</a><span>|</span><a href="#42861614">prev</a><span>|</span><a href="#42857888">next</a><span>|</span><label class="collapse" for="c-42856742">[-]</label><label class="expand" for="c-42856742">[2 more]</label></div><br/><div class="children"><div class="content">If the wrapper itself cooperates, you can also embed more information in the following lines. nix-shell for example allows installing dependencies and any parameters with:<p><pre><code>    #!&#x2F;usr&#x2F;bin&#x2F;env nix-shell
    #!nix-shell --pure -i runghc .&#x2F;default.nix
    ... Any Haskell code follows</code></pre></div><br/><div id="42857475" class="c"><input type="checkbox" id="c-42857475" checked=""/><div class="controls bullet"><span class="by">__float</span><span>|</span><a href="#42856610">root</a><span>|</span><a href="#42856742">parent</a><span>|</span><a href="#42857888">next</a><span>|</span><label class="collapse" for="c-42857475">[-]</label><label class="expand" for="c-42857475">[1 more]</label></div><br/><div class="children"><div class="content">Uv supports this: <a href="https:&#x2F;&#x2F;docs.astral.sh&#x2F;uv&#x2F;guides&#x2F;scripts&#x2F;#declaring-script-dependencies" rel="nofollow">https:&#x2F;&#x2F;docs.astral.sh&#x2F;uv&#x2F;guides&#x2F;scripts&#x2F;#declaring-script-d...</a><p>(Though, this is more general than uv for Python script deps: <a href="https:&#x2F;&#x2F;packaging.python.org&#x2F;en&#x2F;latest&#x2F;specifications&#x2F;inline-script-metadata&#x2F;#script-type" rel="nofollow">https:&#x2F;&#x2F;packaging.python.org&#x2F;en&#x2F;latest&#x2F;specifications&#x2F;inline...</a>)</div><br/></div></div></div></div><div id="42857888" class="c"><input type="checkbox" id="c-42857888" checked=""/><div class="controls bullet"><span class="by">IshKebab</span><span>|</span><a href="#42856610">parent</a><span>|</span><a href="#42856742">prev</a><span>|</span><a href="#42859038">next</a><span>|</span><label class="collapse" for="c-42857888">[-]</label><label class="expand" for="c-42857888">[10 more]</label></div><br/><div class="children"><div class="content">Yeah unfortunately support for that is kind of spotty, so don&#x27;t do this in any scripts you want to work everywhere.</div><br/><div id="42858345" class="c"><input type="checkbox" id="c-42858345" checked=""/><div class="controls bullet"><span class="by">gkfasdfasdf</span><span>|</span><a href="#42856610">root</a><span>|</span><a href="#42857888">parent</a><span>|</span><a href="#42857954">next</a><span>|</span><label class="collapse" for="c-42858345">[-]</label><label class="expand" for="c-42858345">[1 more]</label></div><br/><div class="children"><div class="content">It would be nice if uv had something like uvx but for scripts...uvs maybe? Then you could put it as a single arg to env and it would work everywhere.</div><br/></div></div><div id="42857954" class="c"><input type="checkbox" id="c-42857954" checked=""/><div class="controls bullet"><span class="by">mingus88</span><span>|</span><a href="#42856610">root</a><span>|</span><a href="#42857888">parent</a><span>|</span><a href="#42858345">prev</a><span>|</span><a href="#42859038">next</a><span>|</span><label class="collapse" for="c-42857954">[-]</label><label class="expand" for="c-42857954">[8 more]</label></div><br/><div class="children"><div class="content">Yeah, my first reaction was cool, what’s uv<p>Oh, yet another python dependency tool. I have used a handful of them, and they keep coming<p>I guess no work is important enough until it gets a super fast CLI written in the language du jour and installed by piping curl into sh</div><br/><div id="42858575" class="c"><input type="checkbox" id="c-42858575" checked=""/><div class="controls bullet"><span class="by">kernelbugs</span><span>|</span><a href="#42856610">root</a><span>|</span><a href="#42857954">parent</a><span>|</span><a href="#42858770">next</a><span>|</span><label class="collapse" for="c-42858575">[-]</label><label class="expand" for="c-42858575">[1 more]</label></div><br/><div class="children"><div class="content">I believe parent comment was about `env -S` not being portable rather than `uv` being portable.<p>I&#x27;ll say, I am as pessimistic as the next person about new ways to do X just to be hip. But as someone who works on many different Python projects day to day (from fully fledged services, to a set of lambdas with shared internal libraries, to CI scripts, to local tooling needing to run on developer laptops) - I&#x27;ve found uv to be particularly free of many sharp edges of other solutions (poetry, pipenv, pyenv, etc).<p>I think the fact that the uv tool itself is not written in Python actually solves a number of real problems around bootstrapping and dependency management for the tool that is meant to be a dependency manager.</div><br/></div></div><div id="42858770" class="c"><input type="checkbox" id="c-42858770" checked=""/><div class="controls bullet"><span class="by">alt187</span><span>|</span><a href="#42856610">root</a><span>|</span><a href="#42857954">parent</a><span>|</span><a href="#42858575">prev</a><span>|</span><a href="#42860877">next</a><span>|</span><label class="collapse" for="c-42858770">[-]</label><label class="expand" for="c-42858770">[3 more]</label></div><br/><div class="children"><div class="content">It&#x27;s, er, &quot;funny&quot; how people used to make fun of `curl | sh` because of how lame it was, and now you have it everywhere because Rust decided that this should be the install.</div><br/><div id="42862095" class="c"><input type="checkbox" id="c-42862095" checked=""/><div class="controls bullet"><span class="by">mixmastamyk</span><span>|</span><a href="#42856610">root</a><span>|</span><a href="#42858770">parent</a><span>|</span><a href="#42860877">next</a><span>|</span><label class="collapse" for="c-42862095">[-]</label><label class="expand" for="c-42862095">[2 more]</label></div><br/><div class="children"><div class="content">There&#x27;s a recent rust available in Fedora.  That&#x27;s what I use.</div><br/><div id="42862915" class="c"><input type="checkbox" id="c-42862915" checked=""/><div class="controls bullet"><span class="by">benediktwerner</span><span>|</span><a href="#42856610">root</a><span>|</span><a href="#42862095">parent</a><span>|</span><a href="#42860877">next</a><span>|</span><label class="collapse" for="c-42862915">[-]</label><label class="expand" for="c-42862915">[1 more]</label></div><br/><div class="children"><div class="content">You can also install rustup via your package manager and then use it as usual to manage your Rust installations. Though I guess in most cases, a single moderately recent Rust installation works just fine. But it&#x27;s useful if you want&#x2F;need to use Rust nightly for example.</div><br/></div></div></div></div></div></div><div id="42860877" class="c"><input type="checkbox" id="c-42860877" checked=""/><div class="controls bullet"><span class="by">epcoa</span><span>|</span><a href="#42856610">root</a><span>|</span><a href="#42857954">parent</a><span>|</span><a href="#42858770">prev</a><span>|</span><a href="#42858900">next</a><span>|</span><label class="collapse" for="c-42860877">[-]</label><label class="expand" for="c-42860877">[1 more]</label></div><br/><div class="children"><div class="content">uv is not just a dependency tool. uv deals well with packages and dependency management (well), venvs, runtimes, and tools. It replaces all the other tools and works better in just about every way.</div><br/></div></div><div id="42858900" class="c"><input type="checkbox" id="c-42858900" checked=""/><div class="controls bullet"><span class="by">baq</span><span>|</span><a href="#42856610">root</a><span>|</span><a href="#42857954">parent</a><span>|</span><a href="#42860877">prev</a><span>|</span><a href="#42858732">next</a><span>|</span><label class="collapse" for="c-42858900">[-]</label><label class="expand" for="c-42858900">[1 more]</label></div><br/><div class="children"><div class="content">uv is <i>the</i> tool, finally. We&#x27;ve been waiting for two decades and it really does basically everything right, no ifs or buts. You can scratch off the &#x27;yet another&#x27; part.</div><br/></div></div><div id="42858732" class="c"><input type="checkbox" id="c-42858732" checked=""/><div class="controls bullet"><span class="by">IshKebab</span><span>|</span><a href="#42856610">root</a><span>|</span><a href="#42857954">parent</a><span>|</span><a href="#42858900">prev</a><span>|</span><a href="#42859038">next</a><span>|</span><label class="collapse" for="c-42858732">[-]</label><label class="expand" for="c-42858732">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Oh, yet another python dependency tool. I have used a handful of them, and they keep coming<p>Yeah that&#x27;s my opinion of all the other Python dependency tools, but uv is the real deal. It&#x27;s fast, well designed, it&#x27;s actually a drop-in replacement for pip and it actually works.<p>&gt; I guess no work is important enough until it gets a super fast CLI written in the language du jour and installed by piping curl into sh<p>Yeah it&#x27;s pretty nice that it&#x27;s written in Rust so it&#x27;s fast and reliable, and piping curl into sh makes it easy to install. Huge upgrade compared to the rest of Python tooling which is slow, janky and hard to install. Seriously the official way to install a recent Python on Linux is to build it from source!<p>It&#x27;s a shame curl | bash is the best option we have but it does at least work reliably. Maybe one day the Linux community will come up with something better.</div><br/></div></div></div></div></div></div></div></div><div id="42859038" class="c"><input type="checkbox" id="c-42859038" checked=""/><div class="controls bullet"><span class="by">anotherpaulg</span><span>|</span><a href="#42856610">prev</a><span>|</span><a href="#42858220">next</a><span>|</span><label class="collapse" for="c-42859038">[-]</label><label class="expand" for="c-42859038">[4 more]</label></div><br/><div class="children"><div class="content">Not using shebang, but I&#x27;ve recently been using uv as an &quot;installer&quot;. It&#x27;s hard to package and distribute python CLI tools with complex dependencies. I used uv in a couple of novel ways:<p>1. I copied their `curl | sh` install script and added a `uv tool install --python python3.12 my-tool` line at the end. So users can now install my CLI tool with a nice curl-pipe-sh one-liner.<p>2. I made a tiny pypi &quot;installer&quot; package that has &quot;uv&quot; as its only dependency. All it does is  `uv tool install` my CLI tool.<p>Both methods install the CLI tool, python3.12 and all python dependencies in their own isolated environment. Users don&#x27;t need to manage python virtual envs. They don&#x27;t need to even have python installed for the curl-pipe-sh method.<p>I now get far fewer GitHub issues from users who have somehow mangled the complex dependencies of my tool.<p>I wrote it up with more detail and links to code:<p><a href="https:&#x2F;&#x2F;aider.chat&#x2F;2025&#x2F;01&#x2F;15&#x2F;uv.html" rel="nofollow">https:&#x2F;&#x2F;aider.chat&#x2F;2025&#x2F;01&#x2F;15&#x2F;uv.html</a></div><br/><div id="42862140" class="c"><input type="checkbox" id="c-42862140" checked=""/><div class="controls bullet"><span class="by">CoolCold</span><span>|</span><a href="#42859038">parent</a><span>|</span><a href="#42858220">next</a><span>|</span><label class="collapse" for="c-42862140">[-]</label><label class="expand" for="c-42862140">[3 more]</label></div><br/><div class="children"><div class="content">I have not checked how that works under the hood, but<p>&gt; Both methods install the CLI tool, python3.12<p>Won&#x27;t that require some compiler (GCC?), kernel headers, openssl-dev&#x2F;gzip&#x2F;ffi&#x2F;other_lib headers to be present on end user system and then compiling Python?<p>At least that&#x27;s my experience with ASDF-VM, which uses someother Python-setup toolkit under the hood.</div><br/><div id="42862287" class="c"><input type="checkbox" id="c-42862287" checked=""/><div class="controls bullet"><span class="by">Zizizizz</span><span>|</span><a href="#42859038">root</a><span>|</span><a href="#42862140">parent</a><span>|</span><a href="#42862302">next</a><span>|</span><label class="collapse" for="c-42862287">[-]</label><label class="expand" for="c-42862287">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;docs.astral.sh&#x2F;uv&#x2F;concepts&#x2F;python-versions&#x2F;#cpython-distributions" rel="nofollow">https:&#x2F;&#x2F;docs.astral.sh&#x2F;uv&#x2F;concepts&#x2F;python-versions&#x2F;#cpython-...</a> it has pre-compiled versions</div><br/></div></div></div></div></div></div><div id="42858220" class="c"><input type="checkbox" id="c-42858220" checked=""/><div class="controls bullet"><span class="by">infogulch</span><span>|</span><a href="#42859038">prev</a><span>|</span><a href="#42856213">next</a><span>|</span><label class="collapse" for="c-42858220">[-]</label><label class="expand" for="c-42858220">[4 more]</label></div><br/><div class="children"><div class="content">Speaking of funny shebangs, I came up with this to shell execute prolog .pl files, but it should work for any scripting language that has &#x2F;**&#x2F;-comments but doesn&#x27;t support #-comments or #! shebangs specifically:<p><pre><code>    &#x2F;*usr&#x2F;bin&#x2F;env scryer-prolog &quot;$0&quot; &quot;$@&quot; ; exit #*&#x2F;
</code></pre>
From my original comment <a href="https:&#x2F;&#x2F;github.com&#x2F;mthom&#x2F;scryer-prolog&#x2F;issues&#x2F;2170#issuecomment-1821713993">https:&#x2F;&#x2F;github.com&#x2F;mthom&#x2F;scryer-prolog&#x2F;issues&#x2F;2170#issuecomm...</a> :<p>&gt; The way this works is that this test.pl is both a valid shell file and prolog file. When executing as shell the first line finds and executes &#x2F;usr&#x2F;bin&#x2F;env after searching for the glob pattern &#x2F;*usr&#x2F;bin&#x2F;env. env then executes scryer-prolog &quot;test.pl&quot; which runs the prolog file as a module and halts; of course prolog ignores the first line as a comment &#x2F;* ... *&#x2F;. Then the shell continues and executes the next command after ; which is exit which stops execution so the rest of the file (which is not valid shell) is ignored. The # makes the shell evaluator ignore prolog comment closer *&#x2F; to prevent it from printing an error.<p>This may be the best and worst thing I have ever created.</div><br/><div id="42859871" class="c"><input type="checkbox" id="c-42859871" checked=""/><div class="controls bullet"><span class="by">emmelaich</span><span>|</span><a href="#42858220">parent</a><span>|</span><a href="#42859937">next</a><span>|</span><label class="collapse" for="c-42859871">[-]</label><label class="expand" for="c-42859871">[1 more]</label></div><br/><div class="children"><div class="content">Similarly, make go source executable : <a href="https:&#x2F;&#x2F;unix.stackexchange.com&#x2F;questions&#x2F;162531&#x2F;shebang-starting-with" rel="nofollow">https:&#x2F;&#x2F;unix.stackexchange.com&#x2F;questions&#x2F;162531&#x2F;shebang-star...</a><p>also, my contribution, make C programs executable:<p><pre><code>    $ cat cute-use-of-slash-slash.c
    &#x2F;&#x2F;usr&#x2F;bin&#x2F;env sh -c &#x27;p=$(expr &#x27;&quot;_$0&quot;&#x27; : &quot;_\(.*\)\.[^.]*&quot;); make $p &gt; &#x2F;dev&#x2F;null &amp;&amp; $p&#x27;; exit

    #include &lt;stdio.h&gt;

    int main()
    {
        puts(&quot;hello world&quot;);
    }
    $ chmod  +x cute-use-of-slash-slash.c
    $ .&#x2F;cute-use-of-slash-slash.c
    hello world
    $ $(pwd)&#x2F;cute-use-of-slash-slash.c
    hello world
    $ ..&#x2F;cc&#x2F;cute-use-of-slash-slash.c
    hello world
    $ sed -i -e s&#x2F;hello&#x2F;bye&#x2F; cute-use-of-slash-slash.c
    $ .&#x2F;cute-use-of-slash-slash.c
    bye world
    $</code></pre></div><br/></div></div><div id="42859937" class="c"><input type="checkbox" id="c-42859937" checked=""/><div class="controls bullet"><span class="by">mzs</span><span>|</span><a href="#42858220">parent</a><span>|</span><a href="#42859871">prev</a><span>|</span><a href="#42859146">next</a><span>|</span><label class="collapse" for="c-42859937">[-]</label><label class="expand" for="c-42859937">[1 more]</label></div><br/><div class="children"><div class="content">I didn&#x27;t think of this but I use it:<p><pre><code>  % .&#x2F;hworld.tcl  
  Hello, world.
  % cat hworld.tcl 
  #!&#x2F;bin&#x2F;sh
  # the next line restarts using tcl \
  exec tclsh &quot;$0&quot; &quot;$@&quot;
  puts &quot;Hello, world.&quot;
  % 
</code></pre>
Turns-out that in TCL you can line continue a comment :)</div><br/></div></div><div id="42859146" class="c"><input type="checkbox" id="c-42859146" checked=""/><div class="controls bullet"><span class="by">upghost</span><span>|</span><a href="#42858220">parent</a><span>|</span><a href="#42859937">prev</a><span>|</span><a href="#42856213">next</a><span>|</span><label class="collapse" for="c-42859146">[-]</label><label class="expand" for="c-42859146">[1 more]</label></div><br/><div class="children"><div class="content">Oh my god this is amazing. We need to fix some of the IO redirect in Scryer and then this will be a perfect replacement for bash scripts &lt;3<p>You rock!</div><br/></div></div></div></div><div id="42856213" class="c"><input type="checkbox" id="c-42856213" checked=""/><div class="controls bullet"><span class="by">nikkindev</span><span>|</span><a href="#42858220">prev</a><span>|</span><a href="#42862719">next</a><span>|</span><label class="collapse" for="c-42856213">[-]</label><label class="expand" for="c-42856213">[3 more]</label></div><br/><div class="children"><div class="content">“Lazy self-installing Python scripts with uv”[1] article from Trey Hunner has more details with examples<p>[1] <a href="https:&#x2F;&#x2F;treyhunner.com&#x2F;2024&#x2F;12&#x2F;lazy-self-installing-python-scripts-with-uv&#x2F;" rel="nofollow">https:&#x2F;&#x2F;treyhunner.com&#x2F;2024&#x2F;12&#x2F;lazy-self-installing-python-s...</a></div><br/><div id="42858975" class="c"><input type="checkbox" id="c-42858975" checked=""/><div class="controls bullet"><span class="by">godelski</span><span>|</span><a href="#42856213">parent</a><span>|</span><a href="#42862719">next</a><span>|</span><label class="collapse" for="c-42858975">[-]</label><label class="expand" for="c-42858975">[2 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>  &gt; For example, here’s a script I use to print out 80 zeroes (or a specific number of zeroes) 
</code></pre>
Also...<p><pre><code>  # Print 80 0&#x27;s and flush 
  printf %.1s 0{1..80} $&#x27;\n&#x27;
  # Alternatively
  for i in {1..80}; do echo -n 0; done; echo
</code></pre>
For the ffmpeg example is this any different from<p><pre><code>  ffmpeg -i in.mp4 -c:v copy -filter:a volumedetect -pass 1 -f null &#x2F;dev&#x2F;null &amp;&amp;\
  ffmpeg -i in.mp4 -c:v copy -filter:a &quot;loudnorm&quot; -pass 2 out.mp4
</code></pre>
The python seems more complicated tbh</div><br/><div id="42860117" class="c"><input type="checkbox" id="c-42860117" checked=""/><div class="controls bullet"><span class="by">EdwardDiego</span><span>|</span><a href="#42856213">root</a><span>|</span><a href="#42858975">parent</a><span>|</span><a href="#42862719">next</a><span>|</span><label class="collapse" for="c-42860117">[-]</label><label class="expand" for="c-42860117">[1 more]</label></div><br/><div class="children"><div class="content">Not in any way relevant to an example of leveraging Python&#x27;s new inline metadata PEP via uv.</div><br/></div></div></div></div></div></div><div id="42862719" class="c"><input type="checkbox" id="c-42862719" checked=""/><div class="controls bullet"><span class="by">recursive_fruit</span><span>|</span><a href="#42856213">prev</a><span>|</span><a href="#42857711">next</a><span>|</span><label class="collapse" for="c-42862719">[-]</label><label class="expand" for="c-42862719">[1 more]</label></div><br/><div class="children"><div class="content">Oh nice, that&#x27;s really cool. I&#x27;m seeing uv pop up in more and more places. Python really needed this tooling upgrade. Also, I&#x27;ll make a mental note of -S, awesome.<p>If you want to do the same with javascript or typescript, you can just use bun, it will auto-install[1] the packages included in there.<p><pre><code>    #!&#x2F;usr&#x2F;bin&#x2F;env bun
</code></pre>
[1]: <a href="https:&#x2F;&#x2F;bun.sh&#x2F;docs&#x2F;runtime&#x2F;autoimport" rel="nofollow">https:&#x2F;&#x2F;bun.sh&#x2F;docs&#x2F;runtime&#x2F;autoimport</a></div><br/></div></div><div id="42857711" class="c"><input type="checkbox" id="c-42857711" checked=""/><div class="controls bullet"><span class="by">mkl</span><span>|</span><a href="#42862719">prev</a><span>|</span><a href="#42855936">next</a><span>|</span><label class="collapse" for="c-42857711">[-]</label><label class="expand" for="c-42857711">[1 more]</label></div><br/><div class="children"><div class="content">Related article and discussion from 16 days ago: Uv&#x27;s killer feature is making ad-hoc environments easy <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=42676432">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=42676432</a> (502 points, 417 comments)</div><br/></div></div><div id="42855936" class="c"><input type="checkbox" id="c-42855936" checked=""/><div class="controls bullet"><span class="by">hv42</span><span>|</span><a href="#42857711">prev</a><span>|</span><a href="#42856532">next</a><span>|</span><label class="collapse" for="c-42855936">[-]</label><label class="expand" for="c-42855936">[2 more]</label></div><br/><div class="children"><div class="content">You can use this trick with mise (mise-en-place) for small tasks: 
<a href="https:&#x2F;&#x2F;mise.jdx.dev&#x2F;tasks&#x2F;toml-tasks.html#shell-shebang" rel="nofollow">https:&#x2F;&#x2F;mise.jdx.dev&#x2F;tasks&#x2F;toml-tasks.html#shell-shebang</a><p><pre><code>  [tools]
  uv = &#x27;latest&#x27;

  [tasks.python_uv_task]
  run = &quot;&quot;&quot;
  #!&#x2F;usr&#x2F;bin&#x2F;env -S uv run --script
  # &#x2F;&#x2F;&#x2F; script
  # dependencies = [&quot;requests&lt;3&quot;, &quot;rich&quot;]
  # &#x2F;&#x2F;&#x2F;

  import requests
  # your code here 
  &quot;&quot;&quot;</code></pre></div><br/><div id="42856214" class="c"><input type="checkbox" id="c-42856214" checked=""/><div class="controls bullet"><span class="by">kseistrup</span><span>|</span><a href="#42855936">parent</a><span>|</span><a href="#42856532">next</a><span>|</span><label class="collapse" for="c-42856214">[-]</label><label class="expand" for="c-42856214">[1 more]</label></div><br/><div class="children"><div class="content">Something similar is shown for uv here: <a href="https:&#x2F;&#x2F;simonwillison.net&#x2F;2024&#x2F;Aug&#x2F;21&#x2F;usrbinenv-uv-run&#x2F;" rel="nofollow">https:&#x2F;&#x2F;simonwillison.net&#x2F;2024&#x2F;Aug&#x2F;21&#x2F;usrbinenv-uv-run&#x2F;</a></div><br/></div></div></div></div><div id="42856532" class="c"><input type="checkbox" id="c-42856532" checked=""/><div class="controls bullet"><span class="by">babel_</span><span>|</span><a href="#42855936">prev</a><span>|</span><a href="#42855970">next</a><span>|</span><label class="collapse" for="c-42856532">[-]</label><label class="expand" for="c-42856532">[1 more]</label></div><br/><div class="children"><div class="content">Now that&#x27;s a trick I should remember!<p>I recently switched over my python aliases to `uv run python` and it&#x27;s been really quite pleasant, without needing to manage `.venv`s and the rest. No fuss about system installs for python or anything else either, which resolves the old global&#x2F;user install problem (and is a boon on Debian). Also means you can invoke the REPL within a project&#x2F;environment without any `activate`, which saves needing to think about it.<p>Only downside for calling a .py directly with uv is the cwd relative pathing to project&#x2F;environment files, rather than relative to the .py file itself. There is an explicit switch for it, `--project`, which at least is not much of an ask (`uv run --project &lt;path&gt; &lt;path&gt;&#x2F;script.py`), though a target relative project switch would be appreciated, to at least avoid the repetition.</div><br/></div></div><div id="42855970" class="c"><input type="checkbox" id="c-42855970" checked=""/><div class="controls bullet"><span class="by">threecheese</span><span>|</span><a href="#42856532">prev</a><span>|</span><a href="#42857514">next</a><span>|</span><label class="collapse" for="c-42855970">[-]</label><label class="expand" for="c-42855970">[6 more]</label></div><br/><div class="children"><div class="content">I e experienced a few “gotchas” using uv (or uvx) as a command runner, but when it works (which is most of the time) it’s a big time saver. As a Python dev and curious person my homedir is littered with shallow clones and one-off directories for testing some package or another, and not having to manage this overhead is really useful.<p>OP, you have a great idea and I’m stealing it. Do you use some non-.py suffix, or is seeing the exec bit at on a .py file enough of a signal for you to know that you can just run the file as a script (and it won’t use the system Python)?</div><br/><div id="42860131" class="c"><input type="checkbox" id="c-42860131" checked=""/><div class="controls bullet"><span class="by">EdwardDiego</span><span>|</span><a href="#42855970">parent</a><span>|</span><a href="#42856149">next</a><span>|</span><label class="collapse" for="c-42860131">[-]</label><label class="expand" for="c-42860131">[1 more]</label></div><br/><div class="children"><div class="content">Really curious as to your gotchas.<p>One thing that hit me in Pipenv, but worked well in Poetry, is when a given dep has different wheels for different platforms.<p>The pipenv lock lockfile would only include the deps for the platform you locked it on.<p>Poetry adds all platform variants to the lockfile.<p>And haven&#x27;t found any documentation around uv&#x27;s behaviour in this regard.</div><br/></div></div><div id="42856149" class="c"><input type="checkbox" id="c-42856149" checked=""/><div class="controls bullet"><span class="by">przemub</span><span>|</span><a href="#42855970">parent</a><span>|</span><a href="#42860131">prev</a><span>|</span><a href="#42856287">next</a><span>|</span><label class="collapse" for="c-42856149">[-]</label><label class="expand" for="c-42856149">[1 more]</label></div><br/><div class="children"><div class="content">From what I understand, he uses .py with exec bit and the shebang line as in the article.</div><br/></div></div><div id="42856287" class="c"><input type="checkbox" id="c-42856287" checked=""/><div class="controls bullet"><span class="by">BiteCode_dev</span><span>|</span><a href="#42855970">parent</a><span>|</span><a href="#42856149">prev</a><span>|</span><a href="#42857514">next</a><span>|</span><label class="collapse" for="c-42856287">[-]</label><label class="expand" for="c-42856287">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been collecting gotchas from using uv myself over the last year to assess whether to recommend it or not and I found surprisingly few. Not zero, but I&#x27;m looking pretty hard.<p>Would love to hear what gotchas to find so I can add that to the list.</div><br/><div id="42858204" class="c"><input type="checkbox" id="c-42858204" checked=""/><div class="controls bullet"><span class="by">achierius</span><span>|</span><a href="#42855970">root</a><span>|</span><a href="#42856287">parent</a><span>|</span><a href="#42857514">next</a><span>|</span><label class="collapse" for="c-42858204">[-]</label><label class="expand" for="c-42858204">[2 more]</label></div><br/><div class="children"><div class="content">Is the list public? I&#x27;m trying to figure out whether it&#x27;s worth taking the plunge.</div><br/><div id="42862355" class="c"><input type="checkbox" id="c-42862355" checked=""/><div class="controls bullet"><span class="by">BiteCode_dev</span><span>|</span><a href="#42855970">root</a><span>|</span><a href="#42858204">parent</a><span>|</span><a href="#42857514">next</a><span>|</span><label class="collapse" for="c-42862355">[-]</label><label class="expand" for="c-42862355">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ll write an article on bitecode.dev at the one year mark (about end of feb) about the various situations I tested it in with clients and the results.<p>I will include a section about the things that it was not good for and the problems with it. Spoiler, there were not that many and they fixed them astonishingly well (even one this week!). But obviously there were some, no software is perfect although they worked hard to not make it too opinionated for the first taste.<p>I can ping you when it comes out.</div><br/></div></div></div></div></div></div></div></div><div id="42857514" class="c"><input type="checkbox" id="c-42857514" checked=""/><div class="controls bullet"><span class="by">dcre</span><span>|</span><a href="#42855970">prev</a><span>|</span><a href="#42856128">next</a><span>|</span><label class="collapse" for="c-42857514">[-]</label><label class="expand" for="c-42857514">[5 more]</label></div><br/><div class="children"><div class="content">For the TypeScript enjoyers: you can do the same with Deno (and I&#x27;m sure Bun too, though I haven&#x27;t done it).<p><pre><code>    #! &#x2F;usr&#x2F;bin&#x2F;env -S deno run
</code></pre>
You can add permission flags like this:<p><pre><code>    #! &#x2F;usr&#x2F;bin&#x2F;env -S deno run --allow-env --allow-read --allow-net</code></pre></div><br/><div id="42857909" class="c"><input type="checkbox" id="c-42857909" checked=""/><div class="controls bullet"><span class="by">IshKebab</span><span>|</span><a href="#42857514">parent</a><span>|</span><a href="#42856128">next</a><span>|</span><label class="collapse" for="c-42857909">[-]</label><label class="expand" for="c-42857909">[4 more]</label></div><br/><div class="children"><div class="content">I love Deno and I use this, but I really wish they would fix this dumb bug:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;denoland&#x2F;deno&#x2F;issues&#x2F;16466">https:&#x2F;&#x2F;github.com&#x2F;denoland&#x2F;deno&#x2F;issues&#x2F;16466</a></div><br/><div id="42858711" class="c"><input type="checkbox" id="c-42858711" checked=""/><div class="controls bullet"><span class="by">sebmellen</span><span>|</span><a href="#42857514">root</a><span>|</span><a href="#42857909">parent</a><span>|</span><a href="#42860079">next</a><span>|</span><label class="collapse" for="c-42858711">[-]</label><label class="expand" for="c-42858711">[2 more]</label></div><br/><div class="children"><div class="content">I really wish they would allow you to connect to &quot;unsafe&quot; TLS endpoints.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;denoland&#x2F;deno&#x2F;issues&#x2F;6427#issuecomment-650666206">https:&#x2F;&#x2F;github.com&#x2F;denoland&#x2F;deno&#x2F;issues&#x2F;6427#issuecomment-65...</a></div><br/><div id="42862120" class="c"><input type="checkbox" id="c-42862120" checked=""/><div class="controls bullet"><span class="by">tempaccount420</span><span>|</span><a href="#42857514">root</a><span>|</span><a href="#42858711">parent</a><span>|</span><a href="#42860079">next</a><span>|</span><label class="collapse" for="c-42862120">[-]</label><label class="expand" for="c-42862120">[1 more]</label></div><br/><div class="children"><div class="content">Jesus, both of these issues are sad. This is probably why Bun is winning</div><br/></div></div></div></div><div id="42860079" class="c"><input type="checkbox" id="c-42860079" checked=""/><div class="controls bullet"><span class="by">dcre</span><span>|</span><a href="#42857514">root</a><span>|</span><a href="#42857909">parent</a><span>|</span><a href="#42858711">prev</a><span>|</span><a href="#42856128">next</a><span>|</span><label class="collapse" for="c-42860079">[-]</label><label class="expand" for="c-42860079">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s interesting! I think I&#x27;ve run into it but it has rarely been a problem.</div><br/></div></div></div></div></div></div><div id="42856128" class="c"><input type="checkbox" id="c-42856128" checked=""/><div class="controls bullet"><span class="by">traverseda</span><span>|</span><a href="#42857514">prev</a><span>|</span><a href="#42855893">next</a><span>|</span><label class="collapse" for="c-42856128">[-]</label><label class="expand" for="c-42856128">[3 more]</label></div><br/><div class="children"><div class="content">You can also do the same thing with the nix package manager and pretty much any language or dependency. Like if you wanted a portable bash-script with imagemagick<p><pre><code>    #! &#x2F;usr&#x2F;bin&#x2F;env nix-shell
    #! nix-shell -i bash -p bash imagemagick
</code></pre>
Handy for passing quick scripts around. Nothing is quite as portable as a single file like this.</div><br/><div id="42857917" class="c"><input type="checkbox" id="c-42857917" checked=""/><div class="controls bullet"><span class="by">IshKebab</span><span>|</span><a href="#42856128">parent</a><span>|</span><a href="#42855893">next</a><span>|</span><label class="collapse" for="c-42857917">[-]</label><label class="expand" for="c-42857917">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Nothing is quite as portable as a single file like this.<p>Well... a file that doesn&#x27;t require Nix is probably a fair bit more portable!</div><br/><div id="42858661" class="c"><input type="checkbox" id="c-42858661" checked=""/><div class="controls bullet"><span class="by">traverseda</span><span>|</span><a href="#42856128">root</a><span>|</span><a href="#42857917">parent</a><span>|</span><a href="#42855893">next</a><span>|</span><label class="collapse" for="c-42858661">[-]</label><label class="expand" for="c-42858661">[1 more]</label></div><br/><div class="children"><div class="content">Sure, an appimage, the UV example above</div><br/></div></div></div></div></div></div><div id="42855893" class="c"><input type="checkbox" id="c-42855893" checked=""/><div class="controls bullet"><span class="by">krick</span><span>|</span><a href="#42856128">prev</a><span>|</span><a href="#42860299">next</a><span>|</span><label class="collapse" for="c-42855893">[-]</label><label class="expand" for="c-42855893">[2 more]</label></div><br/><div class="children"><div class="content">Wow, this is super obvious (so obvious that it wouldn&#x27;t occur to me to write a post to brag about it), yet it somehow didn&#x27;t occur to me. Very cool.<p>Not so long ago I started pip-installing my scripts to keep things tidy. It seems now I can regress back to chaos again...</div><br/><div id="42858605" class="c"><input type="checkbox" id="c-42858605" checked=""/><div class="controls bullet"><span class="by">nomel</span><span>|</span><a href="#42855893">parent</a><span>|</span><a href="#42860299">next</a><span>|</span><label class="collapse" for="c-42858605">[-]</label><label class="expand" for="c-42858605">[1 more]</label></div><br/><div class="children"><div class="content">My favorite way to pass small scripts to non software colleagues:<p><pre><code>    try:
       import package
    except ImportError:
       import pip
       print(&quot;Installing package...&quot;)
       pip.main([&#x27;install&#x27;, &#x27;package&#x27;]
       import package
</code></pre>
:D</div><br/></div></div></div></div><div id="42860299" class="c"><input type="checkbox" id="c-42860299" checked=""/><div class="controls bullet"><span class="by">AdieuToLogic</span><span>|</span><a href="#42855893">prev</a><span>|</span><a href="#42857720">next</a><span>|</span><label class="collapse" for="c-42860299">[-]</label><label class="expand" for="c-42860299">[1 more]</label></div><br/><div class="children"><div class="content">This reminds me of an old Perl magic spell for invoking it within a Bourne&#x2F;POSIX shell wrapper along with allowing arbitrary command line arguments[0]:<p><pre><code>  #!&#x2F;bin&#x2F;sh
  #! -*- perl -*- -p
  eval &#x27;exec perl -x -wS $0 ${1+&quot;$@&quot;}&#x27;
    if 0;

  # It&#x27;s Perl code from this point.
</code></pre>
0 - <a href="https:&#x2F;&#x2F;perldoc.perl.org&#x2F;perlrun" rel="nofollow">https:&#x2F;&#x2F;perldoc.perl.org&#x2F;perlrun</a></div><br/></div></div><div id="42857720" class="c"><input type="checkbox" id="c-42857720" checked=""/><div class="controls bullet"><span class="by">TrueDuality</span><span>|</span><a href="#42860299">prev</a><span>|</span><a href="#42856315">next</a><span>|</span><label class="collapse" for="c-42857720">[-]</label><label class="expand" for="c-42857720">[3 more]</label></div><br/><div class="children"><div class="content">One gotcha that annoys me when do this... The file still needs to end in .py which I generally don&#x27;t like for the bins and utilities in my path. Everyone using these shebangs either doesn&#x27;t hit this or never mentions it. Entirely a stylistic personal preference but still makes me a sad lady.</div><br/><div id="42858312" class="c"><input type="checkbox" id="c-42858312" checked=""/><div class="controls bullet"><span class="by">d0mine</span><span>|</span><a href="#42857720">parent</a><span>|</span><a href="#42857922">next</a><span>|</span><label class="collapse" for="c-42858312">[-]</label><label class="expand" for="c-42858312">[1 more]</label></div><br/><div class="children"><div class="content">`--script` has been added to fix it
<a href="https:&#x2F;&#x2F;github.com&#x2F;astral-sh&#x2F;uv&#x2F;issues&#x2F;6360#issuecomment-2450085953">https:&#x2F;&#x2F;github.com&#x2F;astral-sh&#x2F;uv&#x2F;issues&#x2F;6360#issuecomment-245...</a></div><br/></div></div><div id="42857922" class="c"><input type="checkbox" id="c-42857922" checked=""/><div class="controls bullet"><span class="by">puzzledobserver</span><span>|</span><a href="#42857720">parent</a><span>|</span><a href="#42858312">prev</a><span>|</span><a href="#42856315">next</a><span>|</span><label class="collapse" for="c-42857922">[-]</label><label class="expand" for="c-42857922">[1 more]</label></div><br/><div class="children"><div class="content">Are you sure about this?<p>I just wrote a script without a .py extension, and it seemed to work fine.</div><br/></div></div></div></div><div id="42856315" class="c"><input type="checkbox" id="c-42856315" checked=""/><div class="controls bullet"><span class="by">PhilippGille</span><span>|</span><a href="#42857720">prev</a><span>|</span><a href="#42857181">next</a><span>|</span><label class="collapse" for="c-42856315">[-]</label><label class="expand" for="c-42856315">[2 more]</label></div><br/><div class="children"><div class="content">From 68 days ago:<p>&quot;&#x2F;usr&#x2F;bin&#x2F;env -S uv run&quot;:  <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=42198256">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=42198256</a><p>125 points, 45 comments</div><br/><div id="42858362" class="c"><input type="checkbox" id="c-42858362" checked=""/><div class="controls bullet"><span class="by">d0mine</span><span>|</span><a href="#42856315">parent</a><span>|</span><a href="#42857181">next</a><span>|</span><label class="collapse" for="c-42858362">[-]</label><label class="expand" for="c-42858362">[1 more]</label></div><br/><div class="children"><div class="content">to drop .py extension, you need to add `--script`</div><br/></div></div></div></div><div id="42857181" class="c"><input type="checkbox" id="c-42857181" checked=""/><div class="controls bullet"><span class="by">picafrost</span><span>|</span><a href="#42856315">prev</a><span>|</span><a href="#42856773">next</a><span>|</span><label class="collapse" for="c-42857181">[-]</label><label class="expand" for="c-42857181">[1 more]</label></div><br/><div class="children"><div class="content">Astral are making great tools. There are many points of friction in the Python world and Astral is making them seem obvious to see and obvious to solve. That is hard work.</div><br/></div></div><div id="42856773" class="c"><input type="checkbox" id="c-42856773" checked=""/><div class="controls bullet"><span class="by">tiberriver256</span><span>|</span><a href="#42857181">prev</a><span>|</span><a href="#42859556">next</a><span>|</span><label class="collapse" for="c-42856773">[-]</label><label class="expand" for="c-42856773">[1 more]</label></div><br/><div class="children"><div class="content">uv makes Python actually usable. Freaking love that tool.</div><br/></div></div><div id="42859556" class="c"><input type="checkbox" id="c-42859556" checked=""/><div class="controls bullet"><span class="by">Tyrubias</span><span>|</span><a href="#42856773">prev</a><span>|</span><a href="#42859210">next</a><span>|</span><label class="collapse" for="c-42859556">[-]</label><label class="expand" for="c-42859556">[1 more]</label></div><br/><div class="children"><div class="content">I love using this technique, but developing these scripts has always bothered me because there’s no code completion without an actual `venv` to point my editor to. Has anyone found a way around this?</div><br/></div></div><div id="42859210" class="c"><input type="checkbox" id="c-42859210" checked=""/><div class="controls bullet"><span class="by">alin23</span><span>|</span><a href="#42859556">prev</a><span>|</span><a href="#42856995">next</a><span>|</span><label class="collapse" for="c-42859210">[-]</label><label class="expand" for="c-42859210">[1 more]</label></div><br/><div class="children"><div class="content">I recently learned about swift-sh [1] which is the same thing as “uv run —script” but for swift files.<p>I’ve been having a blast automating some macOS annoyances with small scripts that can use native macOS APIs directly, no more pyobjc.<p>I also wrote an app to bring the startup folder functionality from Windows to the Mac to help me run these scripts at startup more easily [2]<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;mxcl&#x2F;swift-sh">https:&#x2F;&#x2F;github.com&#x2F;mxcl&#x2F;swift-sh</a><p>[2] <a href="https:&#x2F;&#x2F;github.com&#x2F;FuzzyIdeas&#x2F;StartupFolder">https:&#x2F;&#x2F;github.com&#x2F;FuzzyIdeas&#x2F;StartupFolder</a></div><br/></div></div><div id="42856995" class="c"><input type="checkbox" id="c-42856995" checked=""/><div class="controls bullet"><span class="by">7thpower</span><span>|</span><a href="#42859210">prev</a><span>|</span><a href="#42856083">next</a><span>|</span><label class="collapse" for="c-42856995">[-]</label><label class="expand" for="c-42856995">[1 more]</label></div><br/><div class="children"><div class="content">Does anyone have any intro to UV guides they found helpful?<p>I haven’t dove into uv as it just hasn’t been at the top of my list, but I will probably take the plunge soon.<p>I gave it an initial try thinking it might function as a drop in, but didn’t find any great guides, and just haven’t been back yet. But we’re ~8% into 2025 so it’s time.</div><br/></div></div><div id="42856083" class="c"><input type="checkbox" id="c-42856083" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42856995">prev</a><span>|</span><a href="#42860078">next</a><span>|</span><label class="collapse" for="c-42856083">[-]</label><label class="expand" for="c-42856083">[12 more]</label></div><br/><div class="children"><div class="content">I really don&#x27;t understand how it is that other people frequently write one-off scripts that nevertheless need to run in an isolated environment (as opposed to a sandbox that contains a few common workhorse packages like NumPy or Requests).<p>Of course I have plenty of separate environments set up, but that&#x27;s because I&#x27;m <i>developing</i> things I hope to share with others, so I need to keep close track of their specific dependencies (so I can specify them in package metadata). But even this stuff would generally work with a wide range of versions for those dependencies. I&#x27;d imagine this is equally true of small, one-off, personal automation scripts.<p>But, sure, if you have this problem, that&#x27;s a great way to use the shebang line. (You can do similarly with Pipx, and I expect you&#x27;ll be able to with Paper as well, although I might push that sort of thing into an optional add-on.)</div><br/><div id="42856780" class="c"><input type="checkbox" id="c-42856780" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#42856083">parent</a><span>|</span><a href="#42856094">next</a><span>|</span><label class="collapse" for="c-42856780">[-]</label><label class="expand" for="c-42856780">[1 more]</label></div><br/><div class="children"><div class="content">I think it&#x27;s just good hygiene.<p>If my weird one-off ad-hoc script needs numpy I can bake the exact tested version into an inline script dependency and run it with &quot;uv run&quot; and never have to think about it ever again.<p>If I don&#x27;t do that, there&#x27;s a good chance that in a year I&#x27;ll upgrade numpy for some other project and now my ad-hoc script will break.<p>(Numpy is actually a great example here, lots of code I try to run turns out to need numpy 1.0 because it hasn&#x27;t yet been upgraded to work with the new 2.0 - here&#x27;s a recent example <a href="https:&#x2F;&#x2F;simonwillison.net&#x2F;2024&#x2F;Dec&#x2F;24&#x2F;modernbert&#x2F;" rel="nofollow">https:&#x2F;&#x2F;simonwillison.net&#x2F;2024&#x2F;Dec&#x2F;24&#x2F;modernbert&#x2F;</a> )</div><br/></div></div><div id="42856094" class="c"><input type="checkbox" id="c-42856094" checked=""/><div class="controls bullet"><span class="by">traverseda</span><span>|</span><a href="#42856083">parent</a><span>|</span><a href="#42856780">prev</a><span>|</span><a href="#42856178">next</a><span>|</span><label class="collapse" for="c-42856094">[-]</label><label class="expand" for="c-42856094">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s when you need to give the script to someone else.</div><br/></div></div><div id="42856178" class="c"><input type="checkbox" id="c-42856178" checked=""/><div class="controls bullet"><span class="by">imtringued</span><span>|</span><a href="#42856083">parent</a><span>|</span><a href="#42856094">prev</a><span>|</span><a href="#42860078">next</a><span>|</span><label class="collapse" for="c-42856178">[-]</label><label class="expand" for="c-42856178">[9 more]</label></div><br/><div class="children"><div class="content">They don&#x27;t care about the isolated environment. They care about having the right dependencies available to the script.<p>Competing languages like Java don&#x27;t need or even have the concept of isolated environments. It&#x27;s an illogical concept. You have a class path and that is about it.</div><br/><div id="42858660" class="c"><input type="checkbox" id="c-42858660" checked=""/><div class="controls bullet"><span class="by">dkarl</span><span>|</span><a href="#42856083">root</a><span>|</span><a href="#42856178">parent</a><span>|</span><a href="#42856560">next</a><span>|</span><label class="collapse" for="c-42858660">[-]</label><label class="expand" for="c-42858660">[1 more]</label></div><br/><div class="children"><div class="content">The isolated environment can matter when different scripts that you use depend on libraries that have conflicting dependency requirements.<p>&gt; Competing languages like Java don&#x27;t need or even have the concept of isolated environments<p>The nice thing about scripts is that you can quickly add new capabilities when you need them. They are always under development. To get the same thing in Java, you need a project directory with a build file, which gives you an isolated build environment.</div><br/></div></div><div id="42856560" class="c"><input type="checkbox" id="c-42856560" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42856083">root</a><span>|</span><a href="#42856178">parent</a><span>|</span><a href="#42858660">prev</a><span>|</span><a href="#42856882">next</a><span>|</span><label class="collapse" for="c-42856560">[-]</label><label class="expand" for="c-42856560">[1 more]</label></div><br/><div class="children"><div class="content">&gt;They care about having the right dependencies available to the script.<p>Right; my point is that I&#x27;d expect one-off scripts like this to keep relying on the same few standard dependencies which would already have been set up in an environment somewhere.<p>&gt;You have a class path and that is about it.<p>A Python venv pretty much is just a layer on top of the existing &quot;class path&quot; mechanism (sys.path) to point it at the right place automatically (reproducing the basic folder layout relative to a symlinked executable, so that sys.path ends up with the right paths and so that there&#x27;s a dedicated folder for installing the dependencies). While it&#x27;s ugly and not recommended, you can work with the PYTHONPATH environment variable, or even modify sys.path at runtime.</div><br/></div></div><div id="42856882" class="c"><input type="checkbox" id="c-42856882" checked=""/><div class="controls bullet"><span class="by">SAI_Peregrinus</span><span>|</span><a href="#42856083">root</a><span>|</span><a href="#42856178">parent</a><span>|</span><a href="#42856560">prev</a><span>|</span><a href="#42856279">next</a><span>|</span><label class="collapse" for="c-42856882">[-]</label><label class="expand" for="c-42856882">[1 more]</label></div><br/><div class="children"><div class="content">The isolated environment is required because most Linux systems also depend upon Python, and can have dependency conflicts if you install development dependencies that conflict with system dependencies.</div><br/></div></div><div id="42856279" class="c"><input type="checkbox" id="c-42856279" checked=""/><div class="controls bullet"><span class="by">orf</span><span>|</span><a href="#42856083">root</a><span>|</span><a href="#42856178">parent</a><span>|</span><a href="#42856882">prev</a><span>|</span><a href="#42860078">next</a><span>|</span><label class="collapse" for="c-42856279">[-]</label><label class="expand" for="c-42856279">[5 more]</label></div><br/><div class="children"><div class="content">A virtual environment is just a project-specific class path, but for Python.</div><br/><div id="42856460" class="c"><input type="checkbox" id="c-42856460" checked=""/><div class="controls bullet"><span class="by">tcptomato</span><span>|</span><a href="#42856083">root</a><span>|</span><a href="#42856279">parent</a><span>|</span><a href="#42860078">next</a><span>|</span><label class="collapse" for="c-42856460">[-]</label><label class="expand" for="c-42856460">[4 more]</label></div><br/><div class="children"><div class="content">Which also installs a complete JVM in it.</div><br/><div id="42856789" class="c"><input type="checkbox" id="c-42856789" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#42856083">root</a><span>|</span><a href="#42856460">parent</a><span>|</span><a href="#42856590">next</a><span>|</span><label class="collapse" for="c-42856789">[-]</label><label class="expand" for="c-42856789">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s one of the great things about uv: it uses clever symlink tricks to avoid installing copies of things, so it&#x27;s wildly fast.</div><br/></div></div><div id="42856590" class="c"><input type="checkbox" id="c-42856590" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42856083">root</a><span>|</span><a href="#42856460">parent</a><span>|</span><a href="#42856789">prev</a><span>|</span><a href="#42860078">next</a><span>|</span><label class="collapse" for="c-42856590">[-]</label><label class="expand" for="c-42856590">[2 more]</label></div><br/><div class="children"><div class="content">Not really; it can just symlink the base executable and make a few folders and scripts.<p><pre><code>    $ python -m venv --without-pip test-venv &amp;&amp; du -sh test-venv
    56K     test-venv</code></pre></div><br/><div id="42856676" class="c"><input type="checkbox" id="c-42856676" checked=""/><div class="controls bullet"><span class="by">dragonwriter</span><span>|</span><a href="#42856083">root</a><span>|</span><a href="#42856590">parent</a><span>|</span><a href="#42860078">next</a><span>|</span><label class="collapse" for="c-42856676">[-]</label><label class="expand" for="c-42856676">[1 more]</label></div><br/><div class="children"><div class="content">Conceptually, a venv has its own executable.<p>Physically, that can just be a symlink to the system python (or another version that is still potentially shared with multiple venvs.)</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="42860078" class="c"><input type="checkbox" id="c-42860078" checked=""/><div class="controls bullet"><span class="by">m3at</span><span>|</span><a href="#42856083">prev</a><span>|</span><a href="#42855856">next</a><span>|</span><label class="collapse" for="c-42860078">[-]</label><label class="expand" for="c-42860078">[1 more]</label></div><br/><div class="children"><div class="content">Uv&#x27;s support of inline metadata is super handy. What if the person running the scripts doesn&#x27;t have uv yet though? For fun I wrote a double shebang script that will handle that too:
<a href="https:&#x2F;&#x2F;paulw.tokyo&#x2F;standalone-python-script-with-uv&#x2F;" rel="nofollow">https:&#x2F;&#x2F;paulw.tokyo&#x2F;standalone-python-script-with-uv&#x2F;</a></div><br/></div></div><div id="42855856" class="c"><input type="checkbox" id="c-42855856" checked=""/><div class="controls bullet"><span class="by">vunderba</span><span>|</span><a href="#42860078">prev</a><span>|</span><a href="#42858638">next</a><span>|</span><label class="collapse" for="c-42855856">[-]</label><label class="expand" for="c-42855856">[4 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been meaning to look into uv. However, since I make pretty heavy use of conda for my pythons scripts, I&#x27;ll usually add a bash function that handles conda activation &#x2F; code execution to my .zshrc file.<p><pre><code>  function transcribe() {
    # get the active conda environment
    active_env=$(conda info | grep &quot;active environment&quot; | awk &#x27;{print $4}&#x27;)

    if [[ &quot;$active_env&quot; != &quot;speechrec-env&quot; ]]; then
      conda activate speechrec-env
    fi

    python &#x2F;users&#x2F;vunderba&#x2F;dev&#x2F;transcriber&#x2F;transcribe.py &quot;$@&quot;
  }
</code></pre>
It&#x27;s handy because if it&#x27;ll always point to the most current version of my script.</div><br/><div id="42856232" class="c"><input type="checkbox" id="c-42856232" checked=""/><div class="controls bullet"><span class="by">kjkjadksj</span><span>|</span><a href="#42855856">parent</a><span>|</span><a href="#42858638">next</a><span>|</span><label class="collapse" for="c-42856232">[-]</label><label class="expand" for="c-42856232">[3 more]</label></div><br/><div class="children"><div class="content">What seems to suck about the uvx way of doing things is that your script and dependencies are now in one document. It just seems so much more useful for so many reasons to keep these things discrete in my mind. Especially when we are talking about uvx which is something probably only a fraction of python devs actually use vs a built in paradigm of the language. Yes, conda is not built in but it might as well be with the amount of influence it has on python development and downstream tools to manage conda envs (e.g. mamba or snakemake).</div><br/><div id="42856798" class="c"><input type="checkbox" id="c-42856798" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#42855856">root</a><span>|</span><a href="#42856232">parent</a><span>|</span><a href="#42856643">next</a><span>|</span><label class="collapse" for="c-42856798">[-]</label><label class="expand" for="c-42856798">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s a misundersanding of uv - the inline script dependencies feature is strictly optional. You&#x27;re encouraged to use pyproject.toml as a default instead of that for most projects. <a href="https:&#x2F;&#x2F;docs.astral.sh&#x2F;uv&#x2F;guides&#x2F;projects&#x2F;" rel="nofollow">https:&#x2F;&#x2F;docs.astral.sh&#x2F;uv&#x2F;guides&#x2F;projects&#x2F;</a></div><br/></div></div><div id="42856643" class="c"><input type="checkbox" id="c-42856643" checked=""/><div class="controls bullet"><span class="by">babel_</span><span>|</span><a href="#42855856">root</a><span>|</span><a href="#42856232">parent</a><span>|</span><a href="#42856798">prev</a><span>|</span><a href="#42858638">next</a><span>|</span><label class="collapse" for="c-42856643">[-]</label><label class="expand" for="c-42856643">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s not the uvx way? Dependencies at the top of a script was outlined in PEP 723, which uv&#x2F;uvx added support for. Not everything is a &quot;project&quot;, some files are just one-and-done scripts which should not have to carry the burden of project&#x2F;environment management, but absolutely should still be able to make use of dependencies. The &quot;uvx way&quot; of doing it just means that it doesn&#x27;t have to pollute the global&#x2F;user install, and can even be isolated into a separate instance.<p>Besides, not everyone uses conda, and it would be quite a stretch to say it &quot;might as well&quot; be a built-in compared to, well, the actual built in, pip! Plus, uv works quite nicely as &quot;just a pip replacement&quot;, which is how I started with it, so it aligns quite well to the actual built-in paradigm of the language.</div><br/></div></div></div></div></div></div><div id="42858638" class="c"><input type="checkbox" id="c-42858638" checked=""/><div class="controls bullet"><span class="by">Levitating</span><span>|</span><a href="#42855856">prev</a><span>|</span><a href="#42859749">next</a><span>|</span><label class="collapse" for="c-42858638">[-]</label><label class="expand" for="c-42858638">[1 more]</label></div><br/><div class="children"><div class="content">Ruby&#x27;s bundler has actually always been able to do inline dependencies<p><a href="https:&#x2F;&#x2F;bundler.io&#x2F;guides&#x2F;bundler_in_a_single_file_ruby_script.html" rel="nofollow">https:&#x2F;&#x2F;bundler.io&#x2F;guides&#x2F;bundler_in_a_single_file_ruby_scri...</a><p>Though I think the implementation could be improved upon</div><br/></div></div><div id="42855757" class="c"><input type="checkbox" id="c-42855757" checked=""/><div class="controls bullet"><span class="by">einpoklum</span><span>|</span><a href="#42859749">prev</a><span>|</span><a href="#42859833">next</a><span>|</span><label class="collapse" for="c-42855757">[-]</label><label class="expand" for="c-42855757">[5 more]</label></div><br/><div class="children"><div class="content">The idea is as follows:<p>* A recently-published PEP specificies how Python scripts can declare dependencies in opening comments.<p>* uv is a Python script-runner&#x2F;package manager which scans for those dependencies, arranges for them to be met, and runs the script with those dependency modules available for importing<p>* If, in a Python script, you use the first line comment - the shebang line - to have the file invoked using uv rather than python itself, you&#x27;ll get that effect automagically when &quot;running&quot; the Python script<p>The result: Python scripts which require setup of dependencies will now &quot;just run&quot;.</div><br/><div id="42856263" class="c"><input type="checkbox" id="c-42856263" checked=""/><div class="controls bullet"><span class="by">bityard</span><span>|</span><a href="#42855757">parent</a><span>|</span><a href="#42856284">next</a><span>|</span><label class="collapse" for="c-42856263">[-]</label><label class="expand" for="c-42856263">[1 more]</label></div><br/><div class="children"><div class="content">(If you have `uv` installed in your $PATH.)<p>Also, uv will install the dependencies, but I am not clear on whether or not it will automatically install a Python interpreter for you using this method.</div><br/></div></div><div id="42856284" class="c"><input type="checkbox" id="c-42856284" checked=""/><div class="controls bullet"><span class="by">kjkjadksj</span><span>|</span><a href="#42855757">parent</a><span>|</span><a href="#42856263">prev</a><span>|</span><a href="#42859833">next</a><span>|</span><label class="collapse" for="c-42856284">[-]</label><label class="expand" for="c-42856284">[3 more]</label></div><br/><div class="children"><div class="content">Will now “just run” after you satisfied the dependency of installing uv on your system and prepending these dependency lines to all your scripts, that is.<p>Imo this saves you no time over just constructing and calling environments the old way. I’m not sure either whether uv lets you load the env only in an interactive session or if its just for script running.</div><br/><div id="42858629" class="c"><input type="checkbox" id="c-42858629" checked=""/><div class="controls bullet"><span class="by">fastasucan</span><span>|</span><a href="#42855757">root</a><span>|</span><a href="#42856284">parent</a><span>|</span><a href="#42858233">next</a><span>|</span><label class="collapse" for="c-42858629">[-]</label><label class="expand" for="c-42858629">[1 more]</label></div><br/><div class="children"><div class="content">Ofcourse it does, after you have installed uv and prepending the dependencies you never have to do it again. Calling environments etc have to be done every time. You also have to keep these env around.</div><br/></div></div><div id="42858233" class="c"><input type="checkbox" id="c-42858233" checked=""/><div class="controls bullet"><span class="by">einpoklum</span><span>|</span><a href="#42855757">root</a><span>|</span><a href="#42856284">parent</a><span>|</span><a href="#42858629">prev</a><span>|</span><a href="#42859833">next</a><span>|</span><label class="collapse" for="c-42858233">[-]</label><label class="expand" for="c-42858233">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ll first day I&#x27;m not a proponent of uv, I just read the post and tried to clarify what it says...<p>but I think what it saves you is the trouble of setting up a virtual environment the &quot;old&quot; way. So, it&#x27;s about making things easier, not faster.</div><br/></div></div></div></div></div></div><div id="42859833" class="c"><input type="checkbox" id="c-42859833" checked=""/><div class="controls bullet"><span class="by">Eduard</span><span>|</span><a href="#42855757">prev</a><span>|</span><a href="#42855704">next</a><span>|</span><label class="collapse" for="c-42859833">[-]</label><label class="expand" for="c-42859833">[2 more]</label></div><br/><div class="children"><div class="content">why not<p><pre><code>    #!&#x2F;usr&#x2F;bin&#x2F;env python3

?</code></pre></div><br/><div id="42860179" class="c"><input type="checkbox" id="c-42860179" checked=""/><div class="controls bullet"><span class="by">mynegation</span><span>|</span><a href="#42859833">parent</a><span>|</span><a href="#42855704">next</a><span>|</span><label class="collapse" for="c-42860179">[-]</label><label class="expand" for="c-42860179">[1 more]</label></div><br/><div class="children"><div class="content">That works reliably for scripts that use standard library only and you also have to be careful not to use features incompatible with various minor versions of Python 3.</div><br/></div></div></div></div><div id="42855704" class="c"><input type="checkbox" id="c-42855704" checked=""/><div class="controls bullet"><span class="by">thecodemonkey</span><span>|</span><a href="#42859833">prev</a><span>|</span><a href="#42856606">next</a><span>|</span><label class="collapse" for="c-42855704">[-]</label><label class="expand" for="c-42855704">[10 more]</label></div><br/><div class="children"><div class="content">What is uv?</div><br/><div id="42855760" class="c"><input type="checkbox" id="c-42855760" checked=""/><div class="controls bullet"><span class="by">benreesman</span><span>|</span><a href="#42855704">parent</a><span>|</span><a href="#42855750">next</a><span>|</span><label class="collapse" for="c-42855760">[-]</label><label class="expand" for="c-42855760">[6 more]</label></div><br/><div class="children"><div class="content">It’s a package manager for Python (among other things) that is simultaneously correct and performant. It’s getting a lot of attention these days.<p>I highly recommend it over all conceivable alternatives.</div><br/><div id="42857481" class="c"><input type="checkbox" id="c-42857481" checked=""/><div class="controls bullet"><span class="by">IgorPartola</span><span>|</span><a href="#42855704">root</a><span>|</span><a href="#42855760">parent</a><span>|</span><a href="#42855861">next</a><span>|</span><label class="collapse" for="c-42857481">[-]</label><label class="expand" for="c-42857481">[4 more]</label></div><br/><div class="children"><div class="content">How likely is this to be another npm&#x2F;yarn situation? I have used a number of Python tools that in the long run turned out to be less portable and less usable than plain Pip and virtualenv. I do use pyenv for a personal setup but not for any production use.</div><br/><div id="42858514" class="c"><input type="checkbox" id="c-42858514" checked=""/><div class="controls bullet"><span class="by">d0mine</span><span>|</span><a href="#42855704">root</a><span>|</span><a href="#42857481">parent</a><span>|</span><a href="#42858981">next</a><span>|</span><label class="collapse" for="c-42858514">[-]</label><label class="expand" for="c-42858514">[1 more]</label></div><br/><div class="children"><div class="content">You can use uv and get the benefits today: it combines the functionality from several tools (including pyenv) and the performance is such that it is transformative.</div><br/></div></div><div id="42858981" class="c"><input type="checkbox" id="c-42858981" checked=""/><div class="controls bullet"><span class="by">baq</span><span>|</span><a href="#42855704">root</a><span>|</span><a href="#42857481">parent</a><span>|</span><a href="#42858514">prev</a><span>|</span><a href="#42855861">next</a><span>|</span><label class="collapse" for="c-42858981">[-]</label><label class="expand" for="c-42858981">[2 more]</label></div><br/><div class="children"><div class="content">as if it was so simple. don&#x27;t forget about pnpm.<p>it&#x27;s the same for uv&#x2F;pip&#x2F;poetry except uv is so much better than the alternatives there isn&#x27;t any contest. pip is the safe default (which doesn&#x27;t even work out of the box on debian derivatives, which is half the issue) and uv is... just default.</div><br/><div id="42860192" class="c"><input type="checkbox" id="c-42860192" checked=""/><div class="controls bullet"><span class="by">Arrowmaster</span><span>|</span><a href="#42855704">root</a><span>|</span><a href="#42858981">parent</a><span>|</span><a href="#42855861">next</a><span>|</span><label class="collapse" for="c-42860192">[-]</label><label class="expand" for="c-42860192">[1 more]</label></div><br/><div class="children"><div class="content">As a Debian user that wanted to use a cli tool only available from npm it was horrible trying to find some sane instructions that didn&#x27;t assume intimate knowledge of node package structures.<p>I did eventually figure out I could just do `corepack pnpm setup` then install packages globally with pnpm.</div><br/></div></div></div></div></div></div></div></div><div id="42855750" class="c"><input type="checkbox" id="c-42855750" checked=""/><div class="controls bullet"><span class="by">woodruffw</span><span>|</span><a href="#42855704">parent</a><span>|</span><a href="#42855760">prev</a><span>|</span><a href="#42855751">next</a><span>|</span><label class="collapse" for="c-42855750">[-]</label><label class="expand" for="c-42855750">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;github.com&#x2F;astral-sh&#x2F;uv">https:&#x2F;&#x2F;github.com&#x2F;astral-sh&#x2F;uv</a></div><br/></div></div><div id="42855751" class="c"><input type="checkbox" id="c-42855751" checked=""/><div class="controls bullet"><span class="by">avidiax</span><span>|</span><a href="#42855704">parent</a><span>|</span><a href="#42855750">prev</a><span>|</span><a href="#42855738">next</a><span>|</span><label class="collapse" for="c-42855751">[-]</label><label class="expand" for="c-42855751">[1 more]</label></div><br/><div class="children"><div class="content">Seems that it interprets a special comment block, then automatically creates a python venv and gathers dependencies. As the post[1] says, it obviates &quot;faffing&quot; with venv and pip to run a script.<p><a href="https:&#x2F;&#x2F;akrabat.com&#x2F;defining-python-dependencies-at-the-top-of-the-file&#x2F;" rel="nofollow">https:&#x2F;&#x2F;akrabat.com&#x2F;defining-python-dependencies-at-the-top-...</a></div><br/></div></div></div></div><div id="42856606" class="c"><input type="checkbox" id="c-42856606" checked=""/><div class="controls bullet"><span class="by">tiltowait</span><span>|</span><a href="#42855704">prev</a><span>|</span><a href="#42856239">next</a><span>|</span><label class="collapse" for="c-42856606">[-]</label><label class="expand" for="c-42856606">[6 more]</label></div><br/><div class="children"><div class="content">I’ve seen uv a lot recently. Is there any major benefit over poetry?</div><br/><div id="42857315" class="c"><input type="checkbox" id="c-42857315" checked=""/><div class="controls bullet"><span class="by">xboxnolifes</span><span>|</span><a href="#42856606">parent</a><span>|</span><a href="#42857072">next</a><span>|</span><label class="collapse" for="c-42857315">[-]</label><label class="expand" for="c-42857315">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been using uv as a drop-in replacement for poetry. My little usage of it so far has led me to view it as just a better poetry. Does the same things I wanted from poetry, but faster and I haven&#x27;t hit the dependency resolve issues I hit with poetry in the past (tbf, I think these got fixed in poetry since).</div><br/></div></div><div id="42857072" class="c"><input type="checkbox" id="c-42857072" checked=""/><div class="controls bullet"><span class="by">beaugunderson</span><span>|</span><a href="#42856606">parent</a><span>|</span><a href="#42857315">prev</a><span>|</span><a href="#42860188">next</a><span>|</span><label class="collapse" for="c-42857072">[-]</label><label class="expand" for="c-42857072">[1 more]</label></div><br/><div class="children"><div class="content">- great lock update behavior by default (though --no-update became the default in poetry 2.0)<p>- speed, as others have said (5 minutes → 70 seconds for our docker build)<p>- much easier (and faster) virtual environment management than poetry, should you want a venv<p>- manages the python version, including new GIL-less variants if you want to try them<p>- script dependencies (include requirements as a comment in a script and it will install and use them)</div><br/></div></div><div id="42860188" class="c"><input type="checkbox" id="c-42860188" checked=""/><div class="controls bullet"><span class="by">mynegation</span><span>|</span><a href="#42856606">parent</a><span>|</span><a href="#42857072">prev</a><span>|</span><a href="#42856991">next</a><span>|</span><label class="collapse" for="c-42860188">[-]</label><label class="expand" for="c-42860188">[1 more]</label></div><br/><div class="children"><div class="content">It’s way way faster for one.</div><br/></div></div><div id="42856991" class="c"><input type="checkbox" id="c-42856991" checked=""/><div class="controls bullet"><span class="by">dave4420</span><span>|</span><a href="#42856606">parent</a><span>|</span><a href="#42860188">prev</a><span>|</span><a href="#42856770">next</a><span>|</span><label class="collapse" for="c-42856991">[-]</label><label class="expand" for="c-42856991">[1 more]</label></div><br/><div class="children"><div class="content">Uv will manage python versions for you.</div><br/></div></div><div id="42856770" class="c"><input type="checkbox" id="c-42856770" checked=""/><div class="controls bullet"><span class="by">__mharrison__</span><span>|</span><a href="#42856606">parent</a><span>|</span><a href="#42856991">prev</a><span>|</span><a href="#42856239">next</a><span>|</span><label class="collapse" for="c-42856770">[-]</label><label class="expand" for="c-42856770">[1 more]</label></div><br/><div class="children"><div class="content">Speed! You won&#x27;t go back</div><br/></div></div></div></div><div id="42856239" class="c"><input type="checkbox" id="c-42856239" checked=""/><div class="controls bullet"><span class="by">kseistrup</span><span>|</span><a href="#42856606">prev</a><span>|</span><label class="collapse" for="c-42856239">[-]</label><label class="expand" for="c-42856239">[1 more]</label></div><br/><div class="children"><div class="content">See also <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=42198256">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=42198256</a> from November 2024 (40 comments).</div><br/></div></div></div></div></div></div></div></body></html>