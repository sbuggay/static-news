<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1725786069084" as="style"/><link rel="stylesheet" href="styles.css?v=1725786069084"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://sunshowers.io/posts/beyond-ctrl-c-signals/">Beyond Ctrl-C: The dark corners of Unix signal handling</a> <span class="domain">(<a href="https://sunshowers.io">sunshowers.io</a>)</span></div><div class="subtext"><span>PuercoPop</span> | <span>36 comments</span></div><br/><div><div id="41476879" class="c"><input type="checkbox" id="c-41476879" checked=""/><div class="controls bullet"><span class="by">chrsig</span><span>|</span><a href="#41477254">next</a><span>|</span><label class="collapse" for="c-41476879">[-]</label><label class="expand" for="c-41476879">[10 more]</label></div><br/><div class="children"><div class="content">My favorite signal surprise was running nginx and&#x2F;or httpd in the foreground and wondering why on earth it quit whenver i resized the window.<p>Turns out, they use SIGWINCH (which is sent on WINdow CHange) for graceful shutdown.<p>It&#x27;s a silly, silly problem.</div><br/><div id="41477820" class="c"><input type="checkbox" id="c-41477820" checked=""/><div class="controls bullet"><span class="by">eadmund</span><span>|</span><a href="#41476879">parent</a><span>|</span><a href="#41478071">next</a><span>|</span><label class="collapse" for="c-41477820">[-]</label><label class="expand" for="c-41477820">[5 more]</label></div><br/><div class="children"><div class="content">&gt; Turns out, they use SIGWINCH (which is sent on WINdow CHange) for graceful shutdown.<p>That’s … that’s even worse than people who send errors with an HTTP 200 response code.</div><br/><div id="41478471" class="c"><input type="checkbox" id="c-41478471" checked=""/><div class="controls bullet"><span class="by">aunderscored</span><span>|</span><a href="#41476879">root</a><span>|</span><a href="#41477820">parent</a><span>|</span><a href="#41478171">next</a><span>|</span><label class="collapse" for="c-41478471">[-]</label><label class="expand" for="c-41478471">[2 more]</label></div><br/><div class="children"><div class="content">Disagree. Annoyingly there is a reasonable case for 200 but with an error, if http is your transport but not your application, then 200 says &quot;yes, the message was transfered and understood correctly, here is your response&quot; which may be an error response from the application</div><br/><div id="41478761" class="c"><input type="checkbox" id="c-41478761" checked=""/><div class="controls bullet"><span class="by">Izkata</span><span>|</span><a href="#41476879">root</a><span>|</span><a href="#41478471">parent</a><span>|</span><a href="#41478171">next</a><span>|</span><label class="collapse" for="c-41478761">[-]</label><label class="expand" for="c-41478761">[1 more]</label></div><br/><div class="children"><div class="content">For example: Apache (httpd) replaces the 4xx and 5xx response body with its own content instead of whatever you&#x27;d returned from an external handler like wsgi.  You have to use a 2xx (except for 204) to get a relevant error message back out.</div><br/></div></div></div></div><div id="41478171" class="c"><input type="checkbox" id="c-41478171" checked=""/><div class="controls bullet"><span class="by">chrsig</span><span>|</span><a href="#41476879">root</a><span>|</span><a href="#41477820">parent</a><span>|</span><a href="#41478471">prev</a><span>|</span><a href="#41478071">next</a><span>|</span><label class="collapse" for="c-41478171">[-]</label><label class="expand" for="c-41478171">[2 more]</label></div><br/><div class="children"><div class="content">y&#x27;know...what really is an error, anyway?</div><br/><div id="41478898" class="c"><input type="checkbox" id="c-41478898" checked=""/><div class="controls bullet"><span class="by">thebruce87m</span><span>|</span><a href="#41476879">root</a><span>|</span><a href="#41478171">parent</a><span>|</span><a href="#41478071">next</a><span>|</span><label class="collapse" for="c-41478898">[-]</label><label class="expand" for="c-41478898">[1 more]</label></div><br/><div class="children"><div class="content">For what is an error, if not a success at failing?</div><br/></div></div></div></div></div></div><div id="41478071" class="c"><input type="checkbox" id="c-41478071" checked=""/><div class="controls bullet"><span class="by">thayne</span><span>|</span><a href="#41476879">parent</a><span>|</span><a href="#41477820">prev</a><span>|</span><a href="#41477254">next</a><span>|</span><label class="collapse" for="c-41478071">[-]</label><label class="expand" for="c-41478071">[4 more]</label></div><br/><div class="children"><div class="content">Why? That&#x27;s what SIGTERM is for.</div><br/><div id="41478166" class="c"><input type="checkbox" id="c-41478166" checked=""/><div class="controls bullet"><span class="by">chrsig</span><span>|</span><a href="#41476879">root</a><span>|</span><a href="#41478071">parent</a><span>|</span><a href="#41478183">next</a><span>|</span><label class="collapse" for="c-41478166">[-]</label><label class="expand" for="c-41478166">[1 more]</label></div><br/><div class="children"><div class="content">No clue what the decision making process was.<p>There&#x27;s a bug report for httpd dating back to 2011[0]. The nginx mailling list also has a grumpy person contemporary with that[1].<p>My guess is someone thought &quot;httpd is a server running somewhere without a monitor attached, why on earth would it get a SIGWINCH!?  surely it&#x27;s available to use for something completely different&quot;, not considering users running it in the foreground during development.  Nginx probably followed suit for convention, but that&#x27;s pure speculation on my part.<p>Also that was before docker really took off (I&#x27;m not sure if it was around in 2011 yet; still in it&#x27;s infancy maybe).  Running it in the foreground didn&#x27;t happen as much yet.  People were still using wamp or installing it via apt and restarting via sudo.<p>[0] <a href="https:&#x2F;&#x2F;bz.apache.org&#x2F;bugzilla&#x2F;show_bug.cgi?id=50669" rel="nofollow">https:&#x2F;&#x2F;bz.apache.org&#x2F;bugzilla&#x2F;show_bug.cgi?id=50669</a><p>[1] <a href="https:&#x2F;&#x2F;mailman.nginx.org&#x2F;pipermail&#x2F;nginx&#x2F;2011-August&#x2F;028640.html" rel="nofollow">https:&#x2F;&#x2F;mailman.nginx.org&#x2F;pipermail&#x2F;nginx&#x2F;2011-August&#x2F;028640...</a></div><br/></div></div><div id="41478183" class="c"><input type="checkbox" id="c-41478183" checked=""/><div class="controls bullet"><span class="by">ibash</span><span>|</span><a href="#41476879">root</a><span>|</span><a href="#41478071">parent</a><span>|</span><a href="#41478166">prev</a><span>|</span><a href="#41477254">next</a><span>|</span><label class="collapse" for="c-41478183">[-]</label><label class="expand" for="c-41478183">[2 more]</label></div><br/><div class="children"><div class="content">I tried to find out why.<p>Unfortunately the change that introduces it predates the official release by a few months. And predates the mailing list by about a year:<p><a href="https:&#x2F;&#x2F;trac.nginx.org&#x2F;nginx&#x2F;changeset&#x2F;5238e93961a189c13eefff01f8eccfe863159c72&#x2F;nginx" rel="nofollow">https:&#x2F;&#x2F;trac.nginx.org&#x2F;nginx&#x2F;changeset&#x2F;5238e93961a189c13eeff...</a></div><br/><div id="41478226" class="c"><input type="checkbox" id="c-41478226" checked=""/><div class="controls bullet"><span class="by">chrsig</span><span>|</span><a href="#41476879">root</a><span>|</span><a href="#41478183">parent</a><span>|</span><a href="#41477254">next</a><span>|</span><label class="collapse" for="c-41478226">[-]</label><label class="expand" for="c-41478226">[1 more]</label></div><br/><div class="children"><div class="content">ok, I found a commit in 2005, coming about because linuxthreads was interfering with the SIGUSR1 signal.<p>It looks like they wound up making it platform specific, so BSDs and unix like operating systems might still use SIGUSR1.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;apache&#x2F;httpd&#x2F;commit&#x2F;395896ae8d19bbea10f82b1d40e16f4721d316b7">https:&#x2F;&#x2F;github.com&#x2F;apache&#x2F;httpd&#x2F;commit&#x2F;395896ae8d19bbea10f82...</a></div><br/></div></div></div></div></div></div></div></div><div id="41477254" class="c"><input type="checkbox" id="c-41477254" checked=""/><div class="controls bullet"><span class="by">layer8</span><span>|</span><a href="#41476879">prev</a><span>|</span><a href="#41477870">next</a><span>|</span><label class="collapse" for="c-41477254">[-]</label><label class="expand" for="c-41477254">[17 more]</label></div><br/><div class="children"><div class="content">&gt; Another common extension is to use what is sometimes called a double Ctrl-C pattern. The first time the user hits Ctrl-C, you attempt to shut down the database cleanly, but the second time you encounter it, you give up and exit immediately.<p>This is a terrible behavior, because users tend to hit Ctrl-C multiple times without intending anything different than on a single hit (not to mention bouncing key mechanics and short key repeat delays). Unclean exits should be reserved for SIGQUIT (Ctrl-\) and SIGKILL (by definition).</div><br/><div id="41477671" class="c"><input type="checkbox" id="c-41477671" checked=""/><div class="controls bullet"><span class="by">tripdout</span><span>|</span><a href="#41477254">parent</a><span>|</span><a href="#41477761">next</a><span>|</span><label class="collapse" for="c-41477671">[-]</label><label class="expand" for="c-41477671">[3 more]</label></div><br/><div class="children"><div class="content">If you don&#x27;t know about it, sure, but I find it&#x27;s kind of convenient to get a safe shutdown and then be able to easily say &quot;I don&#x27;t care, just stop this program&quot; without needing a separate kill -9 command or something.</div><br/><div id="41478279" class="c"><input type="checkbox" id="c-41478279" checked=""/><div class="controls bullet"><span class="by">wombatpm</span><span>|</span><a href="#41477254">root</a><span>|</span><a href="#41477671">parent</a><span>|</span><a href="#41477685">next</a><span>|</span><label class="collapse" for="c-41478279">[-]</label><label class="expand" for="c-41478279">[1 more]</label></div><br/><div class="children"><div class="content">Kids these day. Try resetting server windows on a sgi.<p>Subject:   -42- How can I restart the X server?
Date: 10 Sep 1995 00:00:01 EST<p><pre><code>  To restart the X server (Xsgi) once, do any one of the following
  (in increasing order of brutality):

  - killall -TERM Xsgi
  - hold down the left-Control, left-Shift, F12 and keypad slash keys
    (this is fondly known as the &quot;Vulcan Death Grip&quot;)
  - &#x2F;usr&#x2F;gfx&#x2F;stopgfx; &#x2F;usr&#x2F;gfx&#x2F;startgfx
  - reboot

  To restart the X server every time someone logs out of the console,
  edit &#x2F;var&#x2F;X11&#x2F;xdm&#x2F;xdm-config, change the setting of
  &quot;DisplayManager._0.terminateServer&quot; from &quot;False&quot; to &quot;True&quot; and do
  &#x27;killall -HUP xdm&#x27;.</code></pre></div><br/></div></div><div id="41477685" class="c"><input type="checkbox" id="c-41477685" checked=""/><div class="controls bullet"><span class="by">layer8</span><span>|</span><a href="#41477254">root</a><span>|</span><a href="#41477671">parent</a><span>|</span><a href="#41478279">prev</a><span>|</span><a href="#41477761">next</a><span>|</span><label class="collapse" for="c-41477685">[-]</label><label class="expand" for="c-41477685">[1 more]</label></div><br/><div class="children"><div class="content">As I wrote, Ctrl-\ should do the trick. And it’s just not practical having to know which program applies the double pattern, and having to train yourself to not accidentally hit Ctrl-C twice.</div><br/></div></div></div></div><div id="41477761" class="c"><input type="checkbox" id="c-41477761" checked=""/><div class="controls bullet"><span class="by">jcelerier</span><span>|</span><a href="#41477254">parent</a><span>|</span><a href="#41477671">prev</a><span>|</span><a href="#41477374">next</a><span>|</span><label class="collapse" for="c-41477761">[-]</label><label class="expand" for="c-41477761">[12 more]</label></div><br/><div class="children"><div class="content">&gt; Unclean exits should be reserved for SIGQUIT (Ctrl-\) and SIGKILL (by definition).<p>I don&#x27;t know how it works on your keyboard but on french layout, Ctrl-\ is a two-hands, three-fingers, very unpleasant on the wrist, keyboard shortcut. Not a chance I&#x27;d use that for such a common operation.</div><br/><div id="41477865" class="c"><input type="checkbox" id="c-41477865" checked=""/><div class="controls bullet"><span class="by">mananaysiempre</span><span>|</span><a href="#41477254">root</a><span>|</span><a href="#41477761">parent</a><span>|</span><a href="#41477826">next</a><span>|</span><label class="collapse" for="c-41477865">[-]</label><label class="expand" for="c-41477865">[5 more]</label></div><br/><div class="children"><div class="content">The byte that sends SIGQUIT is very much configurable with stty quit ^X , but unfortunately X has to be a-z or one of \]^_ (that is, 0x41 through 0x5F except 0x5B = [ which would conflict with other uses of ESC = ^[ = 0x1B) because of how the Ctrl modifier traditionally works. Looking at a map of AZERTY, I don’t see any good options, but you may still want to experiment.</div><br/><div id="41478472" class="c"><input type="checkbox" id="c-41478472" checked=""/><div class="controls bullet"><span class="by">jks</span><span>|</span><a href="#41477254">root</a><span>|</span><a href="#41477865">parent</a><span>|</span><a href="#41477886">next</a><span>|</span><label class="collapse" for="c-41478472">[-]</label><label class="expand" for="c-41478472">[1 more]</label></div><br/><div class="children"><div class="content">Curiously, on many terminal emulators the following work:<p>Ctrl-2 = Ctrl-@ = NUL byte<p>Ctrl-3 = Ctrl-[ = ESC<p>Ctrl-4 = Ctrl-\ = default for SIGQUIT<p>Ctrl-5 = Ctrl-] = jump to definition in vim<p>Ctrl-6 = Ctrl-^ = mosh escape key<p>Ctrl-7 = Ctrl-_ = undo in Emacs<p>I think these probably originate in xterm.</div><br/></div></div><div id="41477886" class="c"><input type="checkbox" id="c-41477886" checked=""/><div class="controls bullet"><span class="by">cperciva</span><span>|</span><a href="#41477254">root</a><span>|</span><a href="#41477865">parent</a><span>|</span><a href="#41478472">prev</a><span>|</span><a href="#41477826">next</a><span>|</span><label class="collapse" for="c-41477886">[-]</label><label class="expand" for="c-41477886">[3 more]</label></div><br/><div class="children"><div class="content">I map SIGQUIT to ^Q because that&#x27;s the easiest to remember.</div><br/><div id="41478310" class="c"><input type="checkbox" id="c-41478310" checked=""/><div class="controls bullet"><span class="by">glandium</span><span>|</span><a href="#41477254">root</a><span>|</span><a href="#41477886">parent</a><span>|</span><a href="#41477826">next</a><span>|</span><label class="collapse" for="c-41478310">[-]</label><label class="expand" for="c-41478310">[2 more]</label></div><br/><div class="children"><div class="content">I suppose you never hit CTRL+S by accident?</div><br/><div id="41478420" class="c"><input type="checkbox" id="c-41478420" checked=""/><div class="controls bullet"><span class="by">cperciva</span><span>|</span><a href="#41477254">root</a><span>|</span><a href="#41478310">parent</a><span>|</span><a href="#41477826">next</a><span>|</span><label class="collapse" for="c-41478420">[-]</label><label class="expand" for="c-41478420">[1 more]</label></div><br/><div class="children"><div class="content">Rarely enough that needing to open another terminal and use kill to send a signal doesn&#x27;t bother me.</div><br/></div></div></div></div></div></div></div></div><div id="41477826" class="c"><input type="checkbox" id="c-41477826" checked=""/><div class="controls bullet"><span class="by">remram</span><span>|</span><a href="#41477254">root</a><span>|</span><a href="#41477761">parent</a><span>|</span><a href="#41477865">prev</a><span>|</span><a href="#41477804">next</a><span>|</span><label class="collapse" for="c-41477826">[-]</label><label class="expand" for="c-41477826">[2 more]</label></div><br/><div class="children"><div class="content">I think the point is that it is not to be a common operation.</div><br/><div id="41477929" class="c"><input type="checkbox" id="c-41477929" checked=""/><div class="controls bullet"><span class="by">jcelerier</span><span>|</span><a href="#41477254">root</a><span>|</span><a href="#41477826">parent</a><span>|</span><a href="#41477804">next</a><span>|</span><label class="collapse" for="c-41477929">[-]</label><label class="expand" for="c-41477929">[1 more]</label></div><br/><div class="children"><div class="content">well I don&#x27;t know, it feels like I must mash ctrl-c twenty times per day on average at least</div><br/></div></div></div></div><div id="41477804" class="c"><input type="checkbox" id="c-41477804" checked=""/><div class="controls bullet"><span class="by">Sophira</span><span>|</span><a href="#41477254">root</a><span>|</span><a href="#41477761">parent</a><span>|</span><a href="#41477826">prev</a><span>|</span><a href="#41477862">next</a><span>|</span><label class="collapse" for="c-41477804">[-]</label><label class="expand" for="c-41477804">[3 more]</label></div><br/><div class="children"><div class="content">While on UK keyboards it&#x27;s the opposite &quot;problem&quot; - the left Ctrl key and the \ key are right next to each other (making it potentially a one-finger operation), which is the opposite of how a US keyboard is laid out (where Ctrl-\ was presumably intended to need to be a two-handed, two-finger operation).</div><br/><div id="41478795" class="c"><input type="checkbox" id="c-41478795" checked=""/><div class="controls bullet"><span class="by">Izkata</span><span>|</span><a href="#41477254">root</a><span>|</span><a href="#41477804">parent</a><span>|</span><a href="#41477872">next</a><span>|</span><label class="collapse" for="c-41478795">[-]</label><label class="expand" for="c-41478795">[1 more]</label></div><br/><div class="children"><div class="content">&gt; which is the opposite of how a US keyboard is laid out (where Ctrl-\ was presumably intended to need to be a two-handed, two-finger operation).<p>We have a right Ctrl, so one-hand two-finger.</div><br/></div></div><div id="41477872" class="c"><input type="checkbox" id="c-41477872" checked=""/><div class="controls bullet"><span class="by">mananaysiempre</span><span>|</span><a href="#41477254">root</a><span>|</span><a href="#41477804">parent</a><span>|</span><a href="#41478795">prev</a><span>|</span><a href="#41477862">next</a><span>|</span><label class="collapse" for="c-41477872">[-]</label><label class="expand" for="c-41477872">[1 more]</label></div><br/><div class="children"><div class="content">stty quit ^] ?</div><br/></div></div></div></div></div></div><div id="41477374" class="c"><input type="checkbox" id="c-41477374" checked=""/><div class="controls bullet"><span class="by">bcrl</span><span>|</span><a href="#41477254">parent</a><span>|</span><a href="#41477761">prev</a><span>|</span><a href="#41477870">next</a><span>|</span><label class="collapse" for="c-41477374">[-]</label><label class="expand" for="c-41477374">[1 more]</label></div><br/><div class="children"><div class="content">That shouldn&#x27;t matter.  Your database should be consistent in the face of an unclean exit.  ACID has been around for a <i>long</i> time.</div><br/></div></div></div></div><div id="41477870" class="c"><input type="checkbox" id="c-41477870" checked=""/><div class="controls bullet"><span class="by">cperciva</span><span>|</span><a href="#41477254">prev</a><span>|</span><a href="#41476938">next</a><span>|</span><label class="collapse" for="c-41477870">[-]</label><label class="expand" for="c-41477870">[5 more]</label></div><br/><div class="children"><div class="content">The article doesn&#x27;t mention the most useful of all signals: SIGINFO, aka &quot;please print to stderr your current status&quot;.  Very useful for tools like dd and tar.<p>Probably because Linux doesn&#x27;t implement it.  Worst mistake Linus ever made.<p>Also, it talks about self-pipe but doesn&#x27;t mention that self-<i>socket</i> is much better since you can&#x27;t select on a pipe.</div><br/><div id="41478247" class="c"><input type="checkbox" id="c-41478247" checked=""/><div class="controls bullet"><span class="by">epcoa</span><span>|</span><a href="#41477870">parent</a><span>|</span><a href="#41478177">next</a><span>|</span><label class="collapse" for="c-41478247">[-]</label><label class="expand" for="c-41478247">[2 more]</label></div><br/><div class="children"><div class="content">&gt; self-socket is much better since you can&#x27;t select on a pipe.<p>This needs further explanation. Why can’t you select on a pipe? You certainly can use select&#x2F;poll on pipes in general and I’m not sure of any reason in particular they won’t work for the self pipe notification.<p>Its even right in the original:
<a href="https:&#x2F;&#x2F;cr.yp.to&#x2F;docs&#x2F;selfpipe.html" rel="nofollow">https:&#x2F;&#x2F;cr.yp.to&#x2F;docs&#x2F;selfpipe.html</a></div><br/><div id="41478416" class="c"><input type="checkbox" id="c-41478416" checked=""/><div class="controls bullet"><span class="by">cperciva</span><span>|</span><a href="#41477870">root</a><span>|</span><a href="#41478247">parent</a><span>|</span><a href="#41478177">next</a><span>|</span><label class="collapse" for="c-41478416">[-]</label><label class="expand" for="c-41478416">[1 more]</label></div><br/><div class="children"><div class="content">Oops, brainfart.  Sadly it&#x27;s too late for me to edit that comment.<p>Yes, you can select just fine on pipes.  What I was thinking of is that <i>recv</i> and <i>send</i> doesn&#x27;t work on pipes, and asynchronous I&#x2F;O frameworks typically want to use send&#x2F;recv rather than write&#x2F;read because the latter don&#x27;t have a flags parameter.</div><br/></div></div></div></div><div id="41478177" class="c"><input type="checkbox" id="c-41478177" checked=""/><div class="controls bullet"><span class="by">fragmede</span><span>|</span><a href="#41477870">parent</a><span>|</span><a href="#41478247">prev</a><span>|</span><a href="#41476938">next</a><span>|</span><label class="collapse" for="c-41478177">[-]</label><label class="expand" for="c-41478177">[2 more]</label></div><br/><div class="children"><div class="content"><i>dd</i> prints out status when sent SIGUSR1, but yeah that would be cool if other utilities did that as well off SIGINFO.</div><br/><div id="41478201" class="c"><input type="checkbox" id="c-41478201" checked=""/><div class="controls bullet"><span class="by">cperciva</span><span>|</span><a href="#41477870">root</a><span>|</span><a href="#41478177">parent</a><span>|</span><a href="#41476938">next</a><span>|</span><label class="collapse" for="c-41478201">[-]</label><label class="expand" for="c-41478201">[1 more]</label></div><br/><div class="children"><div class="content">And does ^T map to SIGUSR1?  That&#x27;s the other thing which makes it so useful in BSD.</div><br/></div></div></div></div></div></div><div id="41476938" class="c"><input type="checkbox" id="c-41476938" checked=""/><div class="controls bullet"><span class="by">efxhoy</span><span>|</span><a href="#41477870">prev</a><span>|</span><label class="collapse" for="c-41476938">[-]</label><label class="expand" for="c-41476938">[3 more]</label></div><br/><div class="children"><div class="content">I recently wrote a little data transfer service in python that runs in ECS. When developing it locally it was easy to handle SIGINT: try write a batch, except KeyboardInterrupt, if caught mark the transfer as incomplete and finally commit the change and shut down.<p>But there’s no exception in python to catch for a SIGTERM, which is what ECS and other service mangers send when it’s time to shut down. So I had to add a signal handler. Would have been neat if SIGTERM could be caught like SIGINT with a “native” exception.</div><br/><div id="41477932" class="c"><input type="checkbox" id="c-41477932" checked=""/><div class="controls bullet"><span class="by">mananaysiempre</span><span>|</span><a href="#41476938">parent</a><span>|</span><a href="#41477754">next</a><span>|</span><label class="collapse" for="c-41477932">[-]</label><label class="expand" for="c-41477932">[1 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>  from signal import SIGTERM, raise_signal, signal
  import sys # for excepthook
  class Terminate(BaseException):
      pass
  def _excepthook(type, value, traceback):
      if not issubclass(type, Terminate):
          return _prevhook(type, value, traceback)
      # If a Terminate went unhandled, make sure we are killed
      # by SIGTERM as far as wait(2) and friends are concerned.
      signal(SIGTERM, _prevterm)
      raise_signal(SIGTERM)
  _prevhook, sys.excepthook = sys.excepthook, _excepthook
  def terminate(signo=SIGTERM, frame=None):
      signal(SIGTERM, _prevterm)
      raise Terminate
  _prevterm = signal(SIGTERM, terminate)</code></pre></div><br/></div></div><div id="41477754" class="c"><input type="checkbox" id="c-41477754" checked=""/><div class="controls bullet"><span class="by">Spivak</span><span>|</span><a href="#41476938">parent</a><span>|</span><a href="#41477932">prev</a><span>|</span><label class="collapse" for="c-41477754">[-]</label><label class="expand" for="c-41477754">[1 more]</label></div><br/><div class="children"><div class="content">I mean you can just have the signal handler throw StopRequested in your Python boilerplate and never think about it again.<p>One common pattern is raising KeyboardInterrupt from your handler so it&#x27;s all handled the same.</div><br/></div></div></div></div></div></div></div></div></div></body></html>