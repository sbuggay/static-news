<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1706000462890" as="style"/><link rel="stylesheet" href="styles.css?v=1706000462890"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/viraniaman94/sendenv">Show HN: Sendenv, a CLI tool to share environment variables</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>aster0id</span> | <span>11 comments</span></div><br/><div><div id="39099343" class="c"><input type="checkbox" id="c-39099343" checked=""/><div class="controls bullet"><span class="by">TheDong</span><span>|</span><a href="#39100905">next</a><span>|</span><label class="collapse" for="c-39099343">[-]</label><label class="expand" for="c-39099343">[6 more]</label></div><br/><div class="children"><div class="content">Before sendenv, but with magicwormhole (which it&#x27;s built on top of):<p><pre><code>    machine1 $ export var1=hello
    machine1 $ export -p var1 | wormhole send --text -
      On the other computer, please run wormhole receive 1-word-word

    machine2 $ eval &quot;$(wormhole receive 1-word-word)&quot;
    machine2 $ echo $var1
    hello

</code></pre>
After sendenv:<p><pre><code>    machine1 $ export var1=hello
    machine1 $ sendenv create-vault v
    machine1 $ sendenv add-var v
    machine1 $ sendenv send-vault v

    machine2 $ sendenv receive-vault
      Please logout and login again for the changes to take effect
    machine2 $ echo $var1 # doesn&#x27;t work, needed to re-login
</code></pre>
sendenv also writes to &quot;~&#x2F;.bash_profile&quot;, &quot;~&#x2F;.zshrc&quot;, which is fraught (i.e. on my system they&#x27;re read-only files).<p>It also, just like the eval in the first example, has the downside of requiring you to completely trust the sender since they can send arbitrary code to execute that&#x27;ll get written to your shell&#x27;s rc file.<p>Basically, if you need to share ad-hoc env vars in a single terminal session, the wormhole snippet I posted above is fine.<p>If you want them to persist, probably use direnv to share them, ideally tracked in version control.<p>If you want them to persist system-wide, use ansible or some other configuration management.<p>The middle-ground, of wanting them to persist so much you write them to the shell rc, but not wanting them to be version controlled or configuration managed, seems like the worst of both worlds.</div><br/><div id="39099412" class="c"><input type="checkbox" id="c-39099412" checked=""/><div class="controls bullet"><span class="by">aster0id</span><span>|</span><a href="#39099343">parent</a><span>|</span><a href="#39099560">next</a><span>|</span><label class="collapse" for="c-39099412">[-]</label><label class="expand" for="c-39099412">[2 more]</label></div><br/><div class="children"><div class="content">Fair criticism. I seek feedback like this, which is why I posted it here.<p>You could call `sendenv` syntactic sugar on top of the first example, allowing you to do things neatly in bulk instead of having to write ad hoc scripts. Additionally once you store a vault, you can send it any number of times Granted, its likely not a very frequent need, but still handy I guess.<p>Tracking secrets in version control is exactly what I wanted to sidestep by creating this. Sharing environment variables is an ad hoc manual process at my current company (and was the same way in previous workplaces as well).<p>Ansible or other centralized secret stores felt too heavy for something that should be simple.<p>The point of trusting the sender is applicable to anything you would send over magic wormhole, but I accept that this solution is more vulnerable given that it writes to rc files directly. I will be adding more validation at the receiver end before writing to rc files, as a response to this criticism.</div><br/><div id="39101028" class="c"><input type="checkbox" id="c-39101028" checked=""/><div class="controls bullet"><span class="by">flakes</span><span>|</span><a href="#39099343">root</a><span>|</span><a href="#39099412">parent</a><span>|</span><a href="#39099560">next</a><span>|</span><label class="collapse" for="c-39101028">[-]</label><label class="expand" for="c-39101028">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Sharing environment variables is an ad hoc manual process at my current company (and was the same way in previous workplaces as well).<p>It really shouldn’t be that way. If the data is meant to be selectively accessed, it should have access controls in place with Authentication, Authorization and Auditing. If its any employees discretion to share the data with another adhoc, I certainly hope the secret is not of great value.</div><br/></div></div></div></div><div id="39099560" class="c"><input type="checkbox" id="c-39099560" checked=""/><div class="controls bullet"><span class="by">chrisfinazzo</span><span>|</span><a href="#39099343">parent</a><span>|</span><a href="#39099412">prev</a><span>|</span><a href="#39100905">next</a><span>|</span><label class="collapse" for="c-39099560">[-]</label><label class="expand" for="c-39099560">[3 more]</label></div><br/><div class="children"><div class="content">&gt; sendenv also writes to &quot;~&#x2F;.bash_profile&quot;, &quot;~&#x2F;.zshrc&quot;, which is fraught (i.e. on my system they&#x27;re read-only files).<p>&gt; If you want them to persist system-wide, use ansible or some other configuration management.<p>I <i>kind of</i> understand not wanting to give other people the ability to mess with your shell, but why are these read-only?<p>Also, curious about the choice of Ansible...symlinks are a thing and the setup is really only as complicated as you make it. Building a mansion when you might only &quot;need&quot; a house with 1 or 2 bedrooms seems like an odd decision.</div><br/><div id="39099577" class="c"><input type="checkbox" id="c-39099577" checked=""/><div class="controls bullet"><span class="by">TheDong</span><span>|</span><a href="#39099343">root</a><span>|</span><a href="#39099560">parent</a><span>|</span><a href="#39100905">next</a><span>|</span><label class="collapse" for="c-39099577">[-]</label><label class="expand" for="c-39099577">[2 more]</label></div><br/><div class="children"><div class="content">They&#x27;re read-only because I use a dotfile manager for them, and that manager owns the contents of those files, so it doesn&#x27;t want external changes to mess with them. I&#x27;m specifically using home-manager [0], but various other profile managers will also make them read-only... Especially since any changes to them will just be over-written next time you apply your dotfiles, right?<p>I think &#x27;direnv&#x27; is really the way to go here for most cases you want to share environment variables between developer machines, but if you&#x27;re managing user&#x27;s shell rc files, then you might as well use proper configuration management, because ad-hoc appending strings to those rc files is the stuff of nightmares.<p>[0]: <a href="https:&#x2F;&#x2F;github.com&#x2F;nix-community&#x2F;home-manager">https:&#x2F;&#x2F;github.com&#x2F;nix-community&#x2F;home-manager</a></div><br/><div id="39099638" class="c"><input type="checkbox" id="c-39099638" checked=""/><div class="controls bullet"><span class="by">chrisfinazzo</span><span>|</span><a href="#39099343">root</a><span>|</span><a href="#39099577">parent</a><span>|</span><a href="#39100905">next</a><span>|</span><label class="collapse" for="c-39099638">[-]</label><label class="expand" for="c-39099638">[1 more]</label></div><br/><div class="children"><div class="content">Ah, now I see...<p>The thing that really made dotfiles click for me was the switch to zsh in macOS + Armin Briegel&#x27;s (of Scripting OS X) book, which laid out exactly how the transition was going to work. I&#x27;d done some basic things in `.bash_profile`, but this took it to another level entirely.<p>Tl;dr `zsh-newuser-install` is pretty idiot-proof, but it helps to know what the options are if you&#x27;ve never seen them before.</div><br/></div></div></div></div></div></div></div></div><div id="39100905" class="c"><input type="checkbox" id="c-39100905" checked=""/><div class="controls bullet"><span class="by">wanderingstan</span><span>|</span><a href="#39099343">prev</a><span>|</span><a href="#39100042">next</a><span>|</span><label class="collapse" for="c-39100905">[-]</label><label class="expand" for="c-39100905">[1 more]</label></div><br/><div class="children"><div class="content">Related tool: a friend and I created `diffenv` for developers to easily compare (diff) development environments including environment variables:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;error-central&#x2F;diffenv">https:&#x2F;&#x2F;github.com&#x2F;error-central&#x2F;diffenv</a><p>Helps for debugging those times when you say, “well it runs fine on my machine, what’s different about your machine??”</div><br/></div></div><div id="39100042" class="c"><input type="checkbox" id="c-39100042" checked=""/><div class="controls bullet"><span class="by">kamma4434</span><span>|</span><a href="#39100905">prev</a><span>|</span><a href="#39099300">next</a><span>|</span><label class="collapse" for="c-39100042">[-]</label><label class="expand" for="c-39100042">[1 more]</label></div><br/><div class="children"><div class="content">Not sure I’d use this. Might be fun to develop, but what’s wrong with a text file you copy to your bashrc or whatever?</div><br/></div></div><div id="39099300" class="c"><input type="checkbox" id="c-39099300" checked=""/><div class="controls bullet"><span class="by">seangirard</span><span>|</span><a href="#39100042">prev</a><span>|</span><label class="collapse" for="c-39099300">[-]</label><label class="expand" for="c-39099300">[2 more]</label></div><br/><div class="children"><div class="content">Cool idea!</div><br/><div id="39099336" class="c"><input type="checkbox" id="c-39099336" checked=""/><div class="controls bullet"><span class="by">aster0id</span><span>|</span><a href="#39099300">parent</a><span>|</span><label class="collapse" for="c-39099336">[-]</label><label class="expand" for="c-39099336">[1 more]</label></div><br/><div class="children"><div class="content">Appreciate it!</div><br/></div></div></div></div></div></div></div></div></div></body></html>