<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1731661284293" as="style"/><link rel="stylesheet" href="styles.css?v=1731661284293"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://trailofbits.github.io/are-we-pep740-yet/">Are We PEP740 Yet?</a> <span class="domain">(<a href="https://trailofbits.github.io">trailofbits.github.io</a>)</span></div><div class="subtext"><span>djoldman</span> | <span>43 comments</span></div><br/><div><div id="42143328" class="c"><input type="checkbox" id="c-42143328" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#42145012">next</a><span>|</span><label class="collapse" for="c-42143328">[-]</label><label class="expand" for="c-42143328">[1 more]</label></div><br/><div class="children"><div class="content">I suggest reading this detailed article to understand why they built this: <a href="https:&#x2F;&#x2F;blog.trailofbits.com&#x2F;2024&#x2F;11&#x2F;14&#x2F;attestations-a-new-generation-of-signatures-on-pypi&#x2F;" rel="nofollow">https:&#x2F;&#x2F;blog.trailofbits.com&#x2F;2024&#x2F;11&#x2F;14&#x2F;attestations-a-new-g...</a><p>The implementation is interesting - it&#x27;s a static page built using GitHub Actions, and the key part of the implementation is this Python function here: <a href="https:&#x2F;&#x2F;github.com&#x2F;trailofbits&#x2F;are-we-pep740-yet&#x2F;blob&#x2F;a87a8895dd238d14af50aaa2675c81060aa52846&#x2F;utils.py#L31-L72">https:&#x2F;&#x2F;github.com&#x2F;trailofbits&#x2F;are-we-pep740-yet&#x2F;blob&#x2F;a87a88...</a><p>If you read the code you can see that it&#x27;s hitting pages like <a href="https:&#x2F;&#x2F;pypi.org&#x2F;simple&#x2F;pydantic&#x2F;" rel="nofollow">https:&#x2F;&#x2F;pypi.org&#x2F;simple&#x2F;pydantic&#x2F;</a> - which return HTML - but sending this header instead:<p><pre><code>    Accept: application&#x2F;vnd.pypi.simple.v1+json
</code></pre>
Then scanning through the resulting JSON looking for files that have a provenance that isn&#x27;t set to null.<p>Here&#x27;s an equivalent curl + jq incantation:<p><pre><code>    curl -s \
      -H &#x27;Accept: application&#x2F;vnd.pypi.simple.v1+json&#x27; \
      https:&#x2F;&#x2F;pypi.org&#x2F;simple&#x2F;pydantic&#x2F; \
    | jq &#x27;.files | map(select(.provenance != null)) | length&#x27;</code></pre></div><br/></div></div><div id="42145012" class="c"><input type="checkbox" id="c-42145012" checked=""/><div class="controls bullet"><span class="by">Tknl</span><span>|</span><a href="#42143328">prev</a><span>|</span><a href="#42144163">next</a><span>|</span><label class="collapse" for="c-42145012">[-]</label><label class="expand" for="c-42145012">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;slsa.dev&#x2F;" rel="nofollow">https:&#x2F;&#x2F;slsa.dev&#x2F;</a> gives much clearer explanations about the why if this work. 
Github recently started offering a SaaS sigstore implementation including support for private reps. <a href="https:&#x2F;&#x2F;docs.github.com&#x2F;en&#x2F;actions&#x2F;security-for-github-actions&#x2F;using-artifact-attestations&#x2F;using-artifact-attestations-to-establish-provenance-for-builds" rel="nofollow">https:&#x2F;&#x2F;docs.github.com&#x2F;en&#x2F;actions&#x2F;security-for-github-actio...</a>
Anyone working on OT should be quickly moving towards this.</div><br/></div></div><div id="42144163" class="c"><input type="checkbox" id="c-42144163" checked=""/><div class="controls bullet"><span class="by">cyrnel</span><span>|</span><a href="#42145012">prev</a><span>|</span><a href="#42144796">next</a><span>|</span><label class="collapse" for="c-42144163">[-]</label><label class="expand" for="c-42144163">[8 more]</label></div><br/><div class="children"><div class="content">Why invest so much time and money in a feature that prevents such a small percentage of data breaches that it&#x27;s not even categorized on the 2024 Verizon Data Breach Investigations Report?<p>The vast majority of breaches are caused by credential theft, phishing, and exploiting vulnerabilities.<p>It doesn&#x27;t matter that you can cryptographically verify that a package came from a given commit if that commit has accidentally-vulnerable code, or someone just gets phished.</div><br/><div id="42145075" class="c"><input type="checkbox" id="c-42145075" checked=""/><div class="controls bullet"><span class="by">darkamaul</span><span>|</span><a href="#42144163">parent</a><span>|</span><a href="#42144730">next</a><span>|</span><label class="collapse" for="c-42145075">[-]</label><label class="expand" for="c-42145075">[1 more]</label></div><br/><div class="children"><div class="content">The fact that a security measure doesn&#x27;t solve all or even most breaches doesn&#x27;t mean it&#x27;s not worth implementing. Supply chain attacks may be a smaller percentage of breaches, but they can have massive impact when they do occur (see SolarWinds). Security is all about layers - each measure raises the bar incrementally.</div><br/></div></div><div id="42144730" class="c"><input type="checkbox" id="c-42144730" checked=""/><div class="controls bullet"><span class="by">twothreeone</span><span>|</span><a href="#42144163">parent</a><span>|</span><a href="#42145075">prev</a><span>|</span><a href="#42144435">next</a><span>|</span><label class="collapse" for="c-42144730">[-]</label><label class="expand" for="c-42144730">[1 more]</label></div><br/><div class="children"><div class="content">Probably because they got a government contract under which they receive funding for 3-5 FTEs over 24-36 months in return for quarterly reports - and a tool like this makes the DARPA PM happy. They&#x27;re one of those &quot;Cyber Defense Contractors&quot;..</div><br/></div></div><div id="42144435" class="c"><input type="checkbox" id="c-42144435" checked=""/><div class="controls bullet"><span class="by">tptacek</span><span>|</span><a href="#42144163">parent</a><span>|</span><a href="#42144730">prev</a><span>|</span><a href="#42144334">next</a><span>|</span><label class="collapse" for="c-42144435">[-]</label><label class="expand" for="c-42144435">[1 more]</label></div><br/><div class="children"><div class="content">The 2024 DBIR, for whatever it&#x27;s worth, repeatedly mentions software supply chain attacks.</div><br/></div></div><div id="42144334" class="c"><input type="checkbox" id="c-42144334" checked=""/><div class="controls bullet"><span class="by">some_furry</span><span>|</span><a href="#42144163">parent</a><span>|</span><a href="#42144435">prev</a><span>|</span><a href="#42144550">next</a><span>|</span><label class="collapse" for="c-42144334">[-]</label><label class="expand" for="c-42144334">[2 more]</label></div><br/><div class="children"><div class="content">Because Verizon&#x27;s report, while a good read, isn&#x27;t the end-all-be-all of threat intelligence.<p><a href="https:&#x2F;&#x2F;www.wired.com&#x2F;story&#x2F;notpetya-cyberattack-ukraine-russia-code-crashed-the-world&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.wired.com&#x2F;story&#x2F;notpetya-cyberattack-ukraine-rus...</a><p><a href="https:&#x2F;&#x2F;krebsonsecurity.com&#x2F;2020&#x2F;12&#x2F;u-s-treasury-commerce-depts-hacked-through-solarwinds-compromise&#x2F;" rel="nofollow">https:&#x2F;&#x2F;krebsonsecurity.com&#x2F;2020&#x2F;12&#x2F;u-s-treasury-commerce-de...</a><p>Software supply chain attacks are rare, but when they happen, they&#x27;re usually high-impact ordeals.</div><br/><div id="42144920" class="c"><input type="checkbox" id="c-42144920" checked=""/><div class="controls bullet"><span class="by">MattPalmer1086</span><span>|</span><a href="#42144163">root</a><span>|</span><a href="#42144334">parent</a><span>|</span><a href="#42144550">next</a><span>|</span><label class="collapse" for="c-42144920">[-]</label><label class="expand" for="c-42144920">[1 more]</label></div><br/><div class="children"><div class="content">Correct, software supply chain attacks may be rarer than a simple SQL injection attack, but they are much harder to detect and defend against, and can have very high impact.<p>Where I work (highly regulated financial utility), we would absolutely love to have signed attestations for the provenance of python packages.<p>I also have personal experience of NotPetya; I produced the forensic analysis of how it compromised the whole of Maersk.  Took less than 30 minutes to take out their entire <i>global</i> IT infrastructure, with a cost of about $400 million.</div><br/></div></div></div></div><div id="42144550" class="c"><input type="checkbox" id="c-42144550" checked=""/><div class="controls bullet"><span class="by">gklitz</span><span>|</span><a href="#42144163">parent</a><span>|</span><a href="#42144334">prev</a><span>|</span><a href="#42144796">next</a><span>|</span><label class="collapse" for="c-42144550">[-]</label><label class="expand" for="c-42144550">[2 more]</label></div><br/><div class="children"><div class="content">They already went through requirering 2FA for the most popular packages: <a href="https:&#x2F;&#x2F;blog.pypi.org&#x2F;posts&#x2F;2023-05-25-securing-pypi-with-2fa&#x2F;" rel="nofollow">https:&#x2F;&#x2F;blog.pypi.org&#x2F;posts&#x2F;2023-05-25-securing-pypi-with-2f...</a><p>This is just another step in increasing security. And of cause that is something you want to preferably do prior to breaches not only as a reaction.</div><br/><div id="42144654" class="c"><input type="checkbox" id="c-42144654" checked=""/><div class="controls bullet"><span class="by">the_mitsuhiko</span><span>|</span><a href="#42144163">root</a><span>|</span><a href="#42144550">parent</a><span>|</span><a href="#42144796">next</a><span>|</span><label class="collapse" for="c-42144654">[-]</label><label class="expand" for="c-42144654">[1 more]</label></div><br/><div class="children"><div class="content">Because publishing goes with GitHub actions for the most part for attestations the attack vector is getting access to GitHub which might be easier at this point.</div><br/></div></div></div></div></div></div><div id="42144796" class="c"><input type="checkbox" id="c-42144796" checked=""/><div class="controls bullet"><span class="by">progval</span><span>|</span><a href="#42144163">prev</a><span>|</span><a href="#42144316">next</a><span>|</span><label class="collapse" for="c-42144796">[-]</label><label class="expand" for="c-42144796">[1 more]</label></div><br/><div class="children"><div class="content">According to this page, urllib3 does not use trusted publishing. According to <a href="https:&#x2F;&#x2F;docs.pypi.org&#x2F;project_metadata&#x2F;#verified-details" rel="nofollow">https:&#x2F;&#x2F;docs.pypi.org&#x2F;project_metadata&#x2F;#verified-details</a> , trusted publishing and self-links are the only ways to have &quot;verified details&quot;. However <a href="https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;urllib3&#x2F;" rel="nofollow">https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;urllib3&#x2F;</a> shows Changelog&#x2F;Code&#x2F;Issue tracker as &quot;Verified details&quot; even though they are not self-links. How come?<p>urllib3 does not have a recent release that could explain <a href="https:&#x2F;&#x2F;trailofbits.github.io&#x2F;are-we-pep740-yet&#x2F;" rel="nofollow">https:&#x2F;&#x2F;trailofbits.github.io&#x2F;are-we-pep740-yet&#x2F;</a> lagging behind.</div><br/></div></div><div id="42144316" class="c"><input type="checkbox" id="c-42144316" checked=""/><div class="controls bullet"><span class="by">physicsguy</span><span>|</span><a href="#42144796">prev</a><span>|</span><a href="#42143288">next</a><span>|</span><label class="collapse" for="c-42144316">[-]</label><label class="expand" for="c-42144316">[1 more]</label></div><br/><div class="children"><div class="content">People don’t have to use GitHub, and certainly don’t have to use GitHub Actions even if they do</div><br/></div></div><div id="42143288" class="c"><input type="checkbox" id="c-42143288" checked=""/><div class="controls bullet"><span class="by">marky1991</span><span>|</span><a href="#42144316">prev</a><span>|</span><a href="#42143071">next</a><span>|</span><label class="collapse" for="c-42143288">[-]</label><label class="expand" for="c-42143288">[22 more]</label></div><br/><div class="children"><div class="content">Could someone explain why this is important? My uninformed feeling towards PEP 740 is &#x27;who cares?&#x27;.</div><br/><div id="42143331" class="c"><input type="checkbox" id="c-42143331" checked=""/><div class="controls bullet"><span class="by">hadlock</span><span>|</span><a href="#42143288">parent</a><span>|</span><a href="#42143329">next</a><span>|</span><label class="collapse" for="c-42143331">[-]</label><label class="expand" for="c-42143331">[17 more]</label></div><br/><div class="children"><div class="content">I believe this is a system where a human&#x2F;system builds a package and uploads and cryptographically signs it, verifying end to end that the code uploaded to github for widget-package 3.2.1 is the code you&#x27;re downloading to your laptop for widget-package 3.2.1 and there&#x27;s no chance it is modified&#x2F;signed by a adversarial third party</div><br/><div id="42143351" class="c"><input type="checkbox" id="c-42143351" checked=""/><div class="controls bullet"><span class="by">marky1991</span><span>|</span><a href="#42143288">root</a><span>|</span><a href="#42143331">parent</a><span>|</span><a href="#42143888">next</a><span>|</span><label class="collapse" for="c-42143351">[-]</label><label class="expand" for="c-42143351">[14 more]</label></div><br/><div class="children"><div class="content">That&#x27;s my understanding also, but I still feel like &#x27;who cares&#x27; about that attack scenario. Am I just insufficiently paranoid? Is this kind of attack really likely? (How is it done, other than evil people at pypi?)</div><br/><div id="42143594" class="c"><input type="checkbox" id="c-42143594" checked=""/><div class="controls bullet"><span class="by">OutOfHere</span><span>|</span><a href="#42143288">root</a><span>|</span><a href="#42143351">parent</a><span>|</span><a href="#42144561">next</a><span>|</span><label class="collapse" for="c-42143594">[-]</label><label class="expand" for="c-42143594">[9 more]</label></div><br/><div class="children"><div class="content">Yes, it is likely. It is done by evil intermediaries on hosts that are used to create and upload the package. It is possible for example if the package is created and uploaded on the developer laptop which is compromised.<p>---<p>From the docs:<p>&gt; PyPI&#x27;s support for digital attestations defines a strong and verifiable association between a file on PyPI and the source repository, workflow, and even the commit hash that produced and uploaded the file.</div><br/><div id="42143635" class="c"><input type="checkbox" id="c-42143635" checked=""/><div class="controls bullet"><span class="by">abotsis</span><span>|</span><a href="#42143288">root</a><span>|</span><a href="#42143594">parent</a><span>|</span><a href="#42143786">next</a><span>|</span><label class="collapse" for="c-42143635">[-]</label><label class="expand" for="c-42143635">[1 more]</label></div><br/><div class="children"><div class="content">It still doesn’t protect against rogue commits to packages by bad actors. Which, IMO, is the larger threat (and one that’s been actively exploited).
So while a step in the right direction, it certainly doesn’t completely solve the supply chain risk.</div><br/></div></div><div id="42143786" class="c"><input type="checkbox" id="c-42143786" checked=""/><div class="controls bullet"><span class="by">mikepurvis</span><span>|</span><a href="#42143288">root</a><span>|</span><a href="#42143594">parent</a><span>|</span><a href="#42143635">prev</a><span>|</span><a href="#42143984">next</a><span>|</span><label class="collapse" for="c-42143786">[-]</label><label class="expand" for="c-42143786">[2 more]</label></div><br/><div class="children"><div class="content">It’s honestly a bit nuts that in 2024 a system as foundational as PyPI just accepts totally arbitrary, locally built archives for its “packages”.<p>I appreciate that it’s a community effort and compute isn’t free, but Launchpad did this correctly from the very beginning — dput your signed dsc and <i>it</i> will build and sign binary debs for you.</div><br/><div id="42144534" class="c"><input type="checkbox" id="c-42144534" checked=""/><div class="controls bullet"><span class="by">baq</span><span>|</span><a href="#42143288">root</a><span>|</span><a href="#42143786">parent</a><span>|</span><a href="#42143984">next</a><span>|</span><label class="collapse" for="c-42144534">[-]</label><label class="expand" for="c-42144534">[1 more]</label></div><br/><div class="children"><div class="content">Build farms are expensive though. The PSF probably doesn’t have this kind of money and if they do, there’s a whole lot of other Python issues to fix.<p><a href="https:&#x2F;&#x2F;xkcd.com&#x2F;2347&#x2F;" rel="nofollow">https:&#x2F;&#x2F;xkcd.com&#x2F;2347&#x2F;</a> all over again.</div><br/></div></div></div></div><div id="42143984" class="c"><input type="checkbox" id="c-42143984" checked=""/><div class="controls bullet"><span class="by">marky1991</span><span>|</span><a href="#42143288">root</a><span>|</span><a href="#42143594">parent</a><span>|</span><a href="#42143786">prev</a><span>|</span><a href="#42144215">next</a><span>|</span><label class="collapse" for="c-42143984">[-]</label><label class="expand" for="c-42143984">[3 more]</label></div><br/><div class="children"><div class="content">Could you explain why you think it is a likely risk? Has this attack happened frequently?</div><br/><div id="42144704" class="c"><input type="checkbox" id="c-42144704" checked=""/><div class="controls bullet"><span class="by">bostik</span><span>|</span><a href="#42143288">root</a><span>|</span><a href="#42143984">parent</a><span>|</span><a href="#42144185">next</a><span>|</span><label class="collapse" for="c-42144704">[-]</label><label class="expand" for="c-42144704">[1 more]</label></div><br/><div class="children"><div class="content">Yes. Solarwinds.<p>Code checked out from the repository was not the same that was used to build the actual release. These are not high-likelyhood incidents but when they do occur, they tend to have high impact.<p>And more recently, semantically similar code-vs-build mismatch: CrowdStrike. The broken release was modified after the actual build step, as per their own build process, and the modified artifact is what was released.</div><br/></div></div><div id="42144185" class="c"><input type="checkbox" id="c-42144185" checked=""/><div class="controls bullet"><span class="by">OutOfHere</span><span>|</span><a href="#42143288">root</a><span>|</span><a href="#42143984">parent</a><span>|</span><a href="#42144704">prev</a><span>|</span><a href="#42144215">next</a><span>|</span><label class="collapse" for="c-42144185">[-]</label><label class="expand" for="c-42144185">[1 more]</label></div><br/><div class="children"><div class="content">It is likely in the same way that aliens are statistically likely. There is no evidence so far afaik, but you will likely never find out when it happens, and it can compromise the whole world if it were to happen to a widely used package. It is not worth the risk to not have the feature. I even think it should ideally eventually become mandatory.</div><br/></div></div></div></div><div id="42144215" class="c"><input type="checkbox" id="c-42144215" checked=""/><div class="controls bullet"><span class="by">cyrnel</span><span>|</span><a href="#42143288">root</a><span>|</span><a href="#42143594">parent</a><span>|</span><a href="#42143984">prev</a><span>|</span><a href="#42144561">next</a><span>|</span><label class="collapse" for="c-42144215">[-]</label><label class="expand" for="c-42144215">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;d encourage you to read the Verizon DBIR before making statements about whether a given attack is likely or not. Hijacking build systems is not likely: <a href="https:&#x2F;&#x2F;www.verizon.com&#x2F;business&#x2F;resources&#x2F;reports&#x2F;dbir&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.verizon.com&#x2F;business&#x2F;resources&#x2F;reports&#x2F;dbir&#x2F;</a></div><br/><div id="42144632" class="c"><input type="checkbox" id="c-42144632" checked=""/><div class="controls bullet"><span class="by">usr1106</span><span>|</span><a href="#42143288">root</a><span>|</span><a href="#42144215">parent</a><span>|</span><a href="#42144561">next</a><span>|</span><label class="collapse" for="c-42144632">[-]</label><label class="expand" for="c-42144632">[1 more]</label></div><br/><div class="children"><div class="content">A directed attack against the homegrown build system of a small company is unlikely. An attack against a high profile, centralized system or a commonly used package in such system is something to be prepared against.</div><br/></div></div></div></div></div></div><div id="42144561" class="c"><input type="checkbox" id="c-42144561" checked=""/><div class="controls bullet"><span class="by">gklitz</span><span>|</span><a href="#42143288">root</a><span>|</span><a href="#42143351">parent</a><span>|</span><a href="#42143594">prev</a><span>|</span><a href="#42144055">next</a><span>|</span><label class="collapse" for="c-42144561">[-]</label><label class="expand" for="c-42144561">[1 more]</label></div><br/><div class="children"><div class="content">It’s like HTTPS vs HTTP for your packages. It’s fine if you don’t care but having more secure standards helps us all and hopefully doesn’t add too much of a headache to provides while being mostly semi invisible for end users.</div><br/></div></div><div id="42144055" class="c"><input type="checkbox" id="c-42144055" checked=""/><div class="controls bullet"><span class="by">otabdeveloper4</span><span>|</span><a href="#42143288">root</a><span>|</span><a href="#42143351">parent</a><span>|</span><a href="#42144561">prev</a><span>|</span><a href="#42143888">next</a><span>|</span><label class="collapse" for="c-42144055">[-]</label><label class="expand" for="c-42144055">[3 more]</label></div><br/><div class="children"><div class="content">You are correct. Start distributing and requiring hashes with your Python dependencies instead.<p>This thing is a non-solution to a non-problem. (The adversaries won&#x27;t be MiTM&#x27;ing Github or Pypi.)<p>The actual problem is developers installing &quot;foopackage&quot; by referencing the latest version instead of vetting their software supply chain. Fixing this implies a culture change where people stop using version numbers for software at all.</div><br/><div id="42144557" class="c"><input type="checkbox" id="c-42144557" checked=""/><div class="controls bullet"><span class="by">baq</span><span>|</span><a href="#42143288">root</a><span>|</span><a href="#42144055">parent</a><span>|</span><a href="#42145048">prev</a><span>|</span><a href="#42143888">next</a><span>|</span><label class="collapse" for="c-42144557">[-]</label><label class="expand" for="c-42144557">[1 more]</label></div><br/><div class="children"><div class="content">Nothing stopping version numbers from being 512 bits long. It’s nice if they can be obviously correlated with time of release and their predecessor, which hashes alone can’t do.</div><br/></div></div></div></div></div></div><div id="42143888" class="c"><input type="checkbox" id="c-42143888" checked=""/><div class="controls bullet"><span class="by">TZubiri</span><span>|</span><a href="#42143288">root</a><span>|</span><a href="#42143331">parent</a><span>|</span><a href="#42143351">prev</a><span>|</span><a href="#42144047">next</a><span>|</span><label class="collapse" for="c-42143888">[-]</label><label class="expand" for="c-42143888">[1 more]</label></div><br/><div class="children"><div class="content">1- Why not compile it?
2- does pip install x not guarantee that?</div><br/></div></div><div id="42144047" class="c"><input type="checkbox" id="c-42144047" checked=""/><div class="controls bullet"><span class="by">otabdeveloper4</span><span>|</span><a href="#42143288">root</a><span>|</span><a href="#42143331">parent</a><span>|</span><a href="#42143888">prev</a><span>|</span><a href="#42143329">next</a><span>|</span><label class="collapse" for="c-42144047">[-]</label><label class="expand" for="c-42144047">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, because the problem with Python packaging is a lack of cryptographic signatures.<p>&#x2F;&quot;Rolls eyes&quot; would be an understatement&#x2F;</div><br/></div></div></div></div><div id="42143329" class="c"><input type="checkbox" id="c-42143329" checked=""/><div class="controls bullet"><span class="by">rty32</span><span>|</span><a href="#42143288">parent</a><span>|</span><a href="#42143331">prev</a><span>|</span><a href="#42143071">next</a><span>|</span><label class="collapse" for="c-42143329">[-]</label><label class="expand" for="c-42143329">[4 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;XZ_Utils_backdoor" rel="nofollow">https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;XZ_Utils_backdoor</a></div><br/><div id="42143346" class="c"><input type="checkbox" id="c-42143346" checked=""/><div class="controls bullet"><span class="by">marky1991</span><span>|</span><a href="#42143288">root</a><span>|</span><a href="#42143329">parent</a><span>|</span><a href="#42143071">next</a><span>|</span><label class="collapse" for="c-42143346">[-]</label><label class="expand" for="c-42143346">[3 more]</label></div><br/><div class="children"><div class="content">But that involved one of the developers of said package committing malicious code and it being accepted and then deployed. How would this prevent that from happening?<p>I thought this was about ensuring the code that developers pushed is what you end up downloading.</div><br/><div id="42143423" class="c"><input type="checkbox" id="c-42143423" checked=""/><div class="controls bullet"><span class="by">rty32</span><span>|</span><a href="#42143288">root</a><span>|</span><a href="#42143346">parent</a><span>|</span><a href="#42143071">next</a><span>|</span><label class="collapse" for="c-42143423">[-]</label><label class="expand" for="c-42143423">[2 more]</label></div><br/><div class="children"><div class="content">No, part of the malicious code is in test data file, and the modified m4 file is not in the git repo. The package signed and published by Jia Tan is not reproducible from the source and intentionally done that way.<p>You might want to revisit the script of xz backdoor.</div><br/><div id="42143585" class="c"><input type="checkbox" id="c-42143585" checked=""/><div class="controls bullet"><span class="by">epcoa</span><span>|</span><a href="#42143288">root</a><span>|</span><a href="#42143423">parent</a><span>|</span><a href="#42143071">next</a><span>|</span><label class="collapse" for="c-42143585">[-]</label><label class="expand" for="c-42143585">[1 more]</label></div><br/><div class="children"><div class="content">An absolutely irrelevant detail here. While there was an additional flourish of obfuscation of questionable prudence, the attack was not at all dependent on that. It’s a library that justifies all kinds of seemingly innocuous test data. There were plenty of creative ways to smuggle in selective backdoors to the build without resorting to a compromised tar file. The main backdoor mechanism resided in test data in the git repo, the entire compromise could have.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="42143071" class="c"><input type="checkbox" id="c-42143071" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42143288">prev</a><span>|</span><label class="collapse" for="c-42143071">[-]</label><label class="expand" for="c-42143071">[8 more]</label></div><br/><div class="children"><div class="content">&gt;Using a Trusted Publisher is the easiest way to enable attestations, since they come baked in! See the PyPI user docs and official PyPA publishing action to get started.<p>For many smaller packages in this top 360 list I could imagine this representing quite a bit of a learning curve.</div><br/><div id="42143273" class="c"><input type="checkbox" id="c-42143273" checked=""/><div class="controls bullet"><span class="by">amiga386</span><span>|</span><a href="#42143071">parent</a><span>|</span><a href="#42143340">next</a><span>|</span><label class="collapse" for="c-42143273">[-]</label><label class="expand" for="c-42143273">[5 more]</label></div><br/><div class="children"><div class="content">Or it could see Microsoft tightening its proprietary grip over free software by not only generously offering <i>gratis hosting</i>, but now also <i>it&#x27;s a Trusted Publisher and you&#x27;re not</i> - why read those tricky docs? Move <i>all</i> your hosting to Microsoft today, make yourself <i>completely</i> dependent on it, and you&#x27;ll be rewarded with a green tick!</div><br/><div id="42143345" class="c"><input type="checkbox" id="c-42143345" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#42143071">root</a><span>|</span><a href="#42143273">parent</a><span>|</span><a href="#42143491">next</a><span>|</span><label class="collapse" for="c-42143345">[-]</label><label class="expand" for="c-42143345">[3 more]</label></div><br/><div class="children"><div class="content">I think it&#x27;s a little rude to imply that the people who worked on this are serving an ulterior motive.</div><br/><div id="42143442" class="c"><input type="checkbox" id="c-42143442" checked=""/><div class="controls bullet"><span class="by">akira2501</span><span>|</span><a href="#42143071">root</a><span>|</span><a href="#42143345">parent</a><span>|</span><a href="#42144056">next</a><span>|</span><label class="collapse" for="c-42143442">[-]</label><label class="expand" for="c-42143442">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s possible they&#x27;re just naive.</div><br/></div></div><div id="42144056" class="c"><input type="checkbox" id="c-42144056" checked=""/><div class="controls bullet"><span class="by">Spivak</span><span>|</span><a href="#42143071">root</a><span>|</span><a href="#42143345">parent</a><span>|</span><a href="#42143442">prev</a><span>|</span><a href="#42143491">next</a><span>|</span><label class="collapse" for="c-42144056">[-]</label><label class="expand" for="c-42144056">[1 more]</label></div><br/><div class="children"><div class="content">Microsoft for sure has an ulterior motive here, and the PyPI devs are serving it. It&#x27;s not a bad thing, it&#x27;s a win-win for both parties. That kind of carrot is how you get buy-in from huge companies and in return they do free labor for you that secures your software supply chain.</div><br/></div></div></div></div><div id="42143491" class="c"><input type="checkbox" id="c-42143491" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42143071">root</a><span>|</span><a href="#42143273">parent</a><span>|</span><a href="#42143345">prev</a><span>|</span><a href="#42143340">next</a><span>|</span><label class="collapse" for="c-42143491">[-]</label><label class="expand" for="c-42143491">[1 more]</label></div><br/><div class="children"><div class="content">Thankfully, the PyPI side of the hosting is done by a smaller, unrelated company (Fastly).</div><br/></div></div></div></div><div id="42143340" class="c"><input type="checkbox" id="c-42143340" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#42143071">parent</a><span>|</span><a href="#42143273">prev</a><span>|</span><a href="#42143773">next</a><span>|</span><label class="collapse" for="c-42143340">[-]</label><label class="expand" for="c-42143340">[1 more]</label></div><br/><div class="children"><div class="content">I think it&#x27;s pretty hard to get a Python package into the top 360 list while not picking up any maintainers who could climb that learning curve pretty quickly. I wrote my own notes on how to use Trusted Publishers here: <a href="https:&#x2F;&#x2F;til.simonwillison.net&#x2F;pypi&#x2F;pypi-releases-from-github" rel="nofollow">https:&#x2F;&#x2F;til.simonwillison.net&#x2F;pypi&#x2F;pypi-releases-from-github</a><p>The bigger problem is for projects that aren&#x27;t hosting on GitHub and using GitHub Actions - I&#x27;m sure there are quite a few of those in the top 360.<p>I expect that implementing attestations without using the PyPA GitHub Actions script has a much steeper learning curve, at least for the moment.</div><br/></div></div><div id="42143773" class="c"><input type="checkbox" id="c-42143773" checked=""/><div class="controls bullet"><span class="by">woodruffw</span><span>|</span><a href="#42143071">parent</a><span>|</span><a href="#42143340">prev</a><span>|</span><label class="collapse" for="c-42143773">[-]</label><label class="expand" for="c-42143773">[1 more]</label></div><br/><div class="children"><div class="content">I suspect that most of the packages in the top 360 list are already hosted on GitHub, so this shouldn’t be a leap for many of them. This is one of the reasons we saw Trusted Publishing adopted relatively quickly: it required less work and was trivial to adopt within existing CI workflows.</div><br/></div></div></div></div></div></div></div></div></div></body></html>