<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1716022854490" as="style"/><link rel="stylesheet" href="styles.css?v=1716022854490"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/m4rs-mt/ILGPU">ILGPU: Write GPU programs with C# and F#</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>neonsunset</span> | <span>21 comments</span></div><br/><div><div id="40395786" class="c"><input type="checkbox" id="c-40395786" checked=""/><div class="controls bullet"><span class="by">atonalfreerider</span><span>|</span><a href="#40394860">next</a><span>|</span><label class="collapse" for="c-40395786">[-]</label><label class="expand" for="c-40395786">[2 more]</label></div><br/><div class="children"><div class="content">Also recommending ComputeSharp. I&#x27;ve been using it for a few years now: 
<a href="https:&#x2F;&#x2F;github.com&#x2F;Sergio0694&#x2F;ComputeSharp">https:&#x2F;&#x2F;github.com&#x2F;Sergio0694&#x2F;ComputeSharp</a></div><br/><div id="40396729" class="c"><input type="checkbox" id="c-40396729" checked=""/><div class="controls bullet"><span class="by">neonsunset</span><span>|</span><a href="#40395786">parent</a><span>|</span><a href="#40394860">next</a><span>|</span><label class="collapse" for="c-40396729">[-]</label><label class="expand" for="c-40396729">[1 more]</label></div><br/><div class="children"><div class="content">Unfortunately, ComputeSharp is Windows-only which significantly limits its usability.</div><br/></div></div></div></div><div id="40394860" class="c"><input type="checkbox" id="c-40394860" checked=""/><div class="controls bullet"><span class="by">jvanderbot</span><span>|</span><a href="#40395786">prev</a><span>|</span><a href="#40395275">next</a><span>|</span><label class="collapse" for="c-40394860">[-]</label><label class="expand" for="c-40394860">[17 more]</label></div><br/><div class="children"><div class="content">I&#x27;m going through the CUDA courses. I&#x27;ve done GPU and CPU optimization as an enthusiastic amateur in my day job once or twice a year, but it&#x27;s not my core focus.<p>It quickly seems that the low level C&#x2F;Cpp is becoming obsolete, and it&#x27;s hard to squeeze performance unless you&#x27;re doing something truly green field &#x2F; new. Otherwise someone has already optimized the hell out of it.<p>So what&#x27;s the use case for porting GPU to higher level languages like C#? What would you use this for?</div><br/><div id="40395152" class="c"><input type="checkbox" id="c-40395152" checked=""/><div class="controls bullet"><span class="by">almostgotcaught</span><span>|</span><a href="#40394860">parent</a><span>|</span><a href="#40395444">next</a><span>|</span><label class="collapse" for="c-40395152">[-]</label><label class="expand" for="c-40395152">[9 more]</label></div><br/><div class="children"><div class="content">&gt; It quickly seems that the low level C&#x2F;Cpp is becoming obsolete, and it&#x27;s hard to squeeze performance unless you&#x27;re doing something truly green field &#x2F; new. Otherwise someone has already optimized the hell out of it.<p>I hear and see both of these sentiments frequently from the internet crowd (on-lookers). It&#x27;s both wrong and humorously arrogant. I&#x27;ll repeat what I said to someone on reddit yesterday: there are thousands (maybe 10s?) scattered around the FAANGs, NVIDIA, AMD, Intel, accelerator startups, boutiques, etc. whose day to day is both C&#x2F;C++ <i>and</i> squeezing perf out of kernels and getting many points (sometimes 10s) improvement. Certainly the wins aren&#x27;t daily but I&#x27;m saying they do steadily find room for improvement. How is that possible? I&#x27;ll give you a hint: platforms, demands, hardware, use-cases all change essentially on a quarterly basis.<p>So before you proclaim victory on behalf of whatever high-level framework, ask yourself if you&#x27;re really familiar with the production and business environment for this kind of code.</div><br/><div id="40395212" class="c"><input type="checkbox" id="c-40395212" checked=""/><div class="controls bullet"><span class="by">jvanderbot</span><span>|</span><a href="#40394860">root</a><span>|</span><a href="#40395152">parent</a><span>|</span><a href="#40397005">prev</a><span>|</span><a href="#40395444">next</a><span>|</span><label class="collapse" for="c-40395212">[-]</label><label class="expand" for="c-40395212">[7 more]</label></div><br/><div class="children"><div class="content">As a learner and self proclaimed amateur, I assume the vitriolic tone is directed elsewhere. Without that, you&#x27;re saying that performant pipelines are definitely in demand and optimization is still a full time job.  That&#x27;s good! I&#x27;d like to get better at that.</div><br/><div id="40395286" class="c"><input type="checkbox" id="c-40395286" checked=""/><div class="controls bullet"><span class="by">almostgotcaught</span><span>|</span><a href="#40394860">root</a><span>|</span><a href="#40395212">parent</a><span>|</span><a href="#40395444">next</a><span>|</span><label class="collapse" for="c-40395286">[-]</label><label class="expand" for="c-40395286">[6 more]</label></div><br/><div class="children"><div class="content">&gt;I assume the vitriolic tone is directed elsewhere<p>I&#x27;m always really shocked on hn when people getting called out for arrogance respond with accusations (of vitriol). What day job do you have where you can make proclamations like &quot;It quickly seems that the low level C&#x2F;Cpp is becoming obsolete&quot; while simultaneously admitting being an amateur <i>and not get checked</i>. Must be very different from my day job where being precise and accurate and conservative is paramount. Moreover what kind of habit of thought are you in that being called out for that is read as vitriol?</div><br/><div id="40396094" class="c"><input type="checkbox" id="c-40396094" checked=""/><div class="controls bullet"><span class="by">jvanderbot</span><span>|</span><a href="#40394860">root</a><span>|</span><a href="#40395286">parent</a><span>|</span><a href="#40395831">next</a><span>|</span><label class="collapse" for="c-40396094">[-]</label><label class="expand" for="c-40396094">[1 more]</label></div><br/><div class="children"><div class="content">&quot;it seems&quot; combined with &quot;I&#x27;m learning&quot; was meant to convey ignorance not arrogance. I think I&#x27;m just being misread and that&#x27;s probably my fault. It wouldn&#x27;t be the first time - so I&#x27;m sorry if you found it off-putting<p>My day job is optimization for logistics and multi-agent systems on edge deployments. We vary between heterogenous compute environment <i>on-platform</i> and occasional connections to cloud-like servers, but only occasionally. The system has a lot to do and we&#x27;re pushing what it can do for itself.<p>I like these problems and am always trying to find new ways to solve them. That&#x27;s really it, I&#x27;m wondering if it&#x27;s best to focus on learning to work the hardware as is, or learning to twist existing libraries into new problems.<p>For example if you look at this: <a href="https:&#x2F;&#x2F;weightythoughts.com&#x2F;p&#x2F;cuda-is-still-a-giant-moat-for-nvidia" rel="nofollow">https:&#x2F;&#x2F;weightythoughts.com&#x2F;p&#x2F;cuda-is-still-a-giant-moat-for...</a><p>It actually denigrates anyone who would consider starting at low level CUDA kernels. I liked your message though, you had a great point: what do I imagine all those CUDA programmers do if not write CUDA?</div><br/></div></div><div id="40395831" class="c"><input type="checkbox" id="c-40395831" checked=""/><div class="controls bullet"><span class="by">denom</span><span>|</span><a href="#40394860">root</a><span>|</span><a href="#40395286">parent</a><span>|</span><a href="#40396094">prev</a><span>|</span><a href="#40395434">next</a><span>|</span><label class="collapse" for="c-40395831">[-]</label><label class="expand" for="c-40395831">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Moreover what kind of habit of thought are you in that being called out for that is read as vitriol?<p>That’s as much a matter of personal identity as a ‘habit of thought’, friend. Otherwise, we could we comment on the basis of _your_ perspective as some mutable affectation, no?<p>You see, we are shadows of ourselves. An inquisitive play, or let’s say a “judgment” about Cuda economics: aspirational, errant? Then, the linguistic phalanx: honed no doubt by long running needs to be heard and seen and listened to.</div><br/></div></div><div id="40395434" class="c"><input type="checkbox" id="c-40395434" checked=""/><div class="controls bullet"><span class="by">ClassyJacket</span><span>|</span><a href="#40394860">root</a><span>|</span><a href="#40395286">parent</a><span>|</span><a href="#40395831">prev</a><span>|</span><a href="#40395444">next</a><span>|</span><label class="collapse" for="c-40395434">[-]</label><label class="expand" for="c-40395434">[3 more]</label></div><br/><div class="children"><div class="content">Oh my god, calm down. Jesus christ.</div><br/><div id="40395457" class="c"><input type="checkbox" id="c-40395457" checked=""/><div class="controls bullet"><span class="by">almostgotcaught</span><span>|</span><a href="#40394860">root</a><span>|</span><a href="#40395434">parent</a><span>|</span><a href="#40395444">next</a><span>|</span><label class="collapse" for="c-40395457">[-]</label><label class="expand" for="c-40395457">[2 more]</label></div><br/><div class="children"><div class="content">Same thing applies here: I&#x27;m not the one the one that&#x27;s not calm. I very calmly pointed out that op is wrong. That&#x27;s it. You painting that as &quot;not calm&quot; is the only abnormal thing going on here.</div><br/><div id="40396116" class="c"><input type="checkbox" id="c-40396116" checked=""/><div class="controls bullet"><span class="by">jvanderbot</span><span>|</span><a href="#40394860">root</a><span>|</span><a href="#40395457">parent</a><span>|</span><a href="#40395444">next</a><span>|</span><label class="collapse" for="c-40396116">[-]</label><label class="expand" for="c-40396116">[1 more]</label></div><br/><div class="children"><div class="content">You can interpret text as being uncalm, but there&#x27;s always room for misunderstanding, esp in a forum&#x2F;thread. Nobody is actually upset I think, just using direct language.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="40395444" class="c"><input type="checkbox" id="c-40395444" checked=""/><div class="controls bullet"><span class="by">jay-barronville</span><span>|</span><a href="#40394860">parent</a><span>|</span><a href="#40395152">prev</a><span>|</span><a href="#40394906">next</a><span>|</span><label class="collapse" for="c-40395444">[-]</label><label class="expand" for="c-40395444">[2 more]</label></div><br/><div class="children"><div class="content">1. C and C++ aren’t going anywhere.<p>2. I don’t think you have an appreciation for the sheer amount of software—including lots of very critical software—implemented in C and C++ that are being improved upon daily.<p>A buddy of mine works on critical low-level software (including C) in the energy sector. Millions of lines of code. The effects, positive or negative, of any single code change can impact tens of thousands of Americans (likely even more). His job is to maintain and continuously optimize this software. Given your comment, I think you’d be surprised to learn that he never runs out of work.</div><br/><div id="40396120" class="c"><input type="checkbox" id="c-40396120" checked=""/><div class="controls bullet"><span class="by">jvanderbot</span><span>|</span><a href="#40394860">root</a><span>|</span><a href="#40395444">parent</a><span>|</span><a href="#40394906">next</a><span>|</span><label class="collapse" for="c-40396120">[-]</label><label class="expand" for="c-40396120">[1 more]</label></div><br/><div class="children"><div class="content">Well, I write in those languages every day!  It&#x27;s not a statement about the languages, just wondering about whether CUDA is best approached low level or from well established libraries.</div><br/></div></div></div></div><div id="40394906" class="c"><input type="checkbox" id="c-40394906" checked=""/><div class="controls bullet"><span class="by">sheepscreek</span><span>|</span><a href="#40394860">parent</a><span>|</span><a href="#40395444">prev</a><span>|</span><a href="#40396892">next</a><span>|</span><label class="collapse" for="c-40394906">[-]</label><label class="expand" for="c-40394906">[1 more]</label></div><br/><div class="children"><div class="content">Make it more accessible? Prototyping? Eg. easily determining if your use case is even suited for a GPU workload. Best case - it is, and now you can write a custom CUDA kernel to squeeze out more performance. Worst case, you lose a couple of hours vs weeks before you discover it’s not going to work.</div><br/></div></div><div id="40396892" class="c"><input type="checkbox" id="c-40396892" checked=""/><div class="controls bullet"><span class="by">fulafel</span><span>|</span><a href="#40394860">parent</a><span>|</span><a href="#40394906">prev</a><span>|</span><a href="#40395544">next</a><span>|</span><label class="collapse" for="c-40396892">[-]</label><label class="expand" for="c-40396892">[1 more]</label></div><br/><div class="children"><div class="content">Programmers generally use higher level languages to implement original code because the code is easier for humans to read, write and debug. Porting from low level languages (eg CUDA or C++ to F#) is less common.</div><br/></div></div><div id="40394942" class="c"><input type="checkbox" id="c-40394942" checked=""/><div class="controls bullet"><span class="by">neonsunset</span><span>|</span><a href="#40394860">parent</a><span>|</span><a href="#40395175">prev</a><span>|</span><a href="#40395275">next</a><span>|</span><label class="collapse" for="c-40394942">[-]</label><label class="expand" for="c-40394942">[1 more]</label></div><br/><div class="children"><div class="content">Given IL itself is an abstract stack-based bytecode, it can be compiled to the corresponding IR, which can then target corresponding back-end (CUDA, OpenCL, CPU, etc.) - this is what ILGPU does.<p>Because all code is in the single repository in the post and is fairly easy to read, you can skim through it to draw your own conclusions if this interests you.<p>Also, very easy to start using: <i>just</i> `dotnet add package ILGPU` on most configurations (as ADHD puts higher mental strain on activities involving complex configuration, I try to keep to the tools that have minimal ceremony)<p>C# (and F# by extension) generally allow to write system-ish code, with references to locals and same C primitives, which means that you&#x27;re likely not sacrificing in performance in this particular scenario by having the language be higher-level. After all, you&#x27;re using ILGPU&#x27;s APIs first and foremost.<p>As to why use it at all - you are <i>likely</i> to move faster with it than C++, especially if it&#x27;s not your full-time job, with all the escape hatches to extract 99.9% efficiency still on the table (that is, if performance of the kernel emitted by ILGPU has issues in the first place - see below for alternative, cheap FFI and easy C&#x2F;C++ integration are still there as well).<p>It also lets you do things like PTX assembly: <a href="https:&#x2F;&#x2F;github.com&#x2F;m4rs-mt&#x2F;ILGPU&#x2F;blob&#x2F;master&#x2F;Samples&#x2F;InlinePTXAssembly&#x2F;Program.cs">https:&#x2F;&#x2F;github.com&#x2F;m4rs-mt&#x2F;ILGPU&#x2F;blob&#x2F;master&#x2F;Samples&#x2F;InlineP...</a></div><br/></div></div></div></div><div id="40395275" class="c"><input type="checkbox" id="c-40395275" checked=""/><div class="controls bullet"><span class="by">davidgl</span><span>|</span><a href="#40394860">prev</a><span>|</span><label class="collapse" for="c-40395275">[-]</label><label class="expand" for="c-40395275">[1 more]</label></div><br/><div class="children"><div class="content">Also see <a href="https:&#x2F;&#x2F;www.fshade.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.fshade.org&#x2F;</a>, a F# dsl for shaders</div><br/></div></div></div></div></div></div></div></body></html>