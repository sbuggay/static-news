<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1730192458014" as="style"/><link rel="stylesheet" href="styles.css?v=1730192458014"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://blog.vladzahorodnii.com/2024/10/28/improving-xwayland-window-resizing/">Improving Xwayland window resizing</a> <span class="domain">(<a href="https://blog.vladzahorodnii.com">blog.vladzahorodnii.com</a>)</span></div><div class="subtext"><span>TangerineDream</span> | <span>64 comments</span></div><br/><div><div id="41976524" class="c"><input type="checkbox" id="c-41976524" checked=""/><div class="controls bullet"><span class="by">Arainach</span><span>|</span><a href="#41976762">next</a><span>|</span><label class="collapse" for="c-41976524">[-]</label><label class="expand" for="c-41976524">[4 more]</label></div><br/><div class="children"><div class="content">Excellent writeup, thanks for posting.  I was involved with efforts to achieve similar things in Windows (Direct Composition, etc.).  In practice, it was enlightening to debug various apps and frameworks and discover just how long repainting can take and how many edge cases there are around slow apps, hung apps, and so on.  Who knows, maybe someone there still has some of the malicious test apps I wrote (using the language of this article, apps which acknowledge the sync request and then take multiple seconds to actually paint, etc., etc.).<p>It&#x27;s definitely a hard problem space that&#x27;s basically incompatible with how most GUI apps and frameworks worked from 1985-2015.</div><br/><div id="41978714" class="c"><input type="checkbox" id="c-41978714" checked=""/><div class="controls bullet"><span class="by">ack_complete</span><span>|</span><a href="#41976524">parent</a><span>|</span><a href="#41976762">next</a><span>|</span><label class="collapse" for="c-41978714">[-]</label><label class="expand" for="c-41978714">[3 more]</label></div><br/><div class="children"><div class="content">IMO, the neatest trick that the DWM does is avoiding jitter&#x2F;lag between the mouse cursor and window when dragging a window.<p>Sadly, DXGI flip model seems to have reintroduced some issues -- it is difficult to avoid the kind of jank shown in this article when resizing a window drawn using flip mode presentation. Which is unfortunate, since it&#x27;s the highest performing mode.</div><br/><div id="41979121" class="c"><input type="checkbox" id="c-41979121" checked=""/><div class="controls bullet"><span class="by">jchw</span><span>|</span><a href="#41976524">root</a><span>|</span><a href="#41978714">parent</a><span>|</span><a href="#41976762">next</a><span>|</span><label class="collapse" for="c-41979121">[-]</label><label class="expand" for="c-41979121">[2 more]</label></div><br/><div class="children"><div class="content">That trick is fun, but I wish Windows did a better job of synchronizing the visibility of the cursor sprite versus the presentation of the frames where the cursor is rendered in the frame. It&#x27;s impossible for me to not notice the brief period where the cursor is missing!</div><br/><div id="41979379" class="c"><input type="checkbox" id="c-41979379" checked=""/><div class="controls bullet"><span class="by">mouse_</span><span>|</span><a href="#41976524">root</a><span>|</span><a href="#41979121">parent</a><span>|</span><a href="#41976762">next</a><span>|</span><label class="collapse" for="c-41979379">[-]</label><label class="expand" for="c-41979379">[1 more]</label></div><br/><div class="children"><div class="content">I think it&#x27;s cute. They&#x27;re doing &quot;disable hardware cursor, enable software cursor&quot; instead of the other way around. Seeing that happen is somehow fun for me.</div><br/></div></div></div></div></div></div></div></div><div id="41976762" class="c"><input type="checkbox" id="c-41976762" checked=""/><div class="controls bullet"><span class="by">o11c</span><span>|</span><a href="#41976524">prev</a><span>|</span><a href="#41978046">next</a><span>|</span><label class="collapse" for="c-41976762">[-]</label><label class="expand" for="c-41976762">[15 more]</label></div><br/><div class="children"><div class="content">For me, the quickest way to tell that I&#x27;m running on Wayland is seeing if multi-lingual keyboard input is broken. I have right-alt-while-pressed set to switch to a Greek layout (because who doesn&#x27;t math?), and it reliably works on X11 but breaks in all sorts of weird ways under Wayland (sometimes it simply fails to enable&#x2F;disable, sometimes it shows a notification as if it changed but switches back when input actually happens, ...).<p>On the bright side I&#x27;m finally learning how Vim&#x27;s digraphs work.</div><br/><div id="41978240" class="c"><input type="checkbox" id="c-41978240" checked=""/><div class="controls bullet"><span class="by">tomxor</span><span>|</span><a href="#41976762">parent</a><span>|</span><a href="#41978798">next</a><span>|</span><label class="collapse" for="c-41978240">[-]</label><label class="expand" for="c-41978240">[4 more]</label></div><br/><div class="children"><div class="content">Both Xorg and Wayland compositors use libinput, so it&#x27;s probably more to do with lack of decent configuration support in your DE or WM. You can always configure libinput manually. Sway just lets you add libinput configs inline inside your sway config.<p>[edit]<p>This is probably not relevant (assuming correct wayland libinput config), since this is not where mult-lingual input transformations live. libinput just handles the physical keyboard mapping and behaviour.<p>On more careful reading of the parent this sounds more like a buggy input method editor.. or maybe an issue with switching between X and wayland apps.</div><br/><div id="41978259" class="c"><input type="checkbox" id="c-41978259" checked=""/><div class="controls bullet"><span class="by">mananaysiempre</span><span>|</span><a href="#41976762">root</a><span>|</span><a href="#41978240">parent</a><span>|</span><a href="#41980419">next</a><span>|</span><label class="collapse" for="c-41978259">[-]</label><label class="expand" for="c-41978259">[2 more]</label></div><br/><div class="children"><div class="content">Is (simple, so e.g. non-CJK) multilingual input a libinput thing? I thought it was a libxkbcommon thing.</div><br/><div id="41978334" class="c"><input type="checkbox" id="c-41978334" checked=""/><div class="controls bullet"><span class="by">tomxor</span><span>|</span><a href="#41976762">root</a><span>|</span><a href="#41978259">parent</a><span>|</span><a href="#41980419">next</a><span>|</span><label class="collapse" for="c-41978334">[-]</label><label class="expand" for="c-41978334">[1 more]</label></div><br/><div class="children"><div class="content">NO! my mistake, I latched onto keyboard input and didn&#x27;t think about multi-lingual. I&#x27;m guessing you mean things like pinyin, I think that&#x27;s a dbus thing, which is still a thing on wayland but I don&#x27;t really know anything about this... I&#x27;ll get my coat.</div><br/></div></div></div></div><div id="41980419" class="c"><input type="checkbox" id="c-41980419" checked=""/><div class="controls bullet"><span class="by">immibis</span><span>|</span><a href="#41976762">root</a><span>|</span><a href="#41978240">parent</a><span>|</span><a href="#41978259">prev</a><span>|</span><a href="#41978798">next</a><span>|</span><label class="collapse" for="c-41980419">[-]</label><label class="expand" for="c-41980419">[1 more]</label></div><br/><div class="children"><div class="content">That still boils down to a Wayland design issue, since Wayland requires each individual DE&#x2F;WM to get support for such features while X only needs them in Xorg.</div><br/></div></div></div></div><div id="41978798" class="c"><input type="checkbox" id="c-41978798" checked=""/><div class="controls bullet"><span class="by">sho_hn</span><span>|</span><a href="#41976762">parent</a><span>|</span><a href="#41978240">prev</a><span>|</span><a href="#41977117">next</a><span>|</span><label class="collapse" for="c-41978798">[-]</label><label class="expand" for="c-41978798">[1 more]</label></div><br/><div class="children"><div class="content">Hear, hear.<p>KDE just elected improving the Input story in its bi-annual community wide goals election: <a href="https:&#x2F;&#x2F;kde.org&#x2F;goals&#x2F;" rel="nofollow">https:&#x2F;&#x2F;kde.org&#x2F;goals&#x2F;</a></div><br/></div></div><div id="41977117" class="c"><input type="checkbox" id="c-41977117" checked=""/><div class="controls bullet"><span class="by">porphyra</span><span>|</span><a href="#41976762">parent</a><span>|</span><a href="#41978798">prev</a><span>|</span><a href="#41977491">next</a><span>|</span><label class="collapse" for="c-41977117">[-]</label><label class="expand" for="c-41977117">[2 more]</label></div><br/><div class="children"><div class="content">Multilingual keyboard input is such a mess haha. I need to type a lot of Chinese using pinyin and still haven&#x27;t found a reasonably polished implementation on Wayland (Sway) that works on both Xwayland and true Wayland applications. So I reverted to i3 with ibus.</div><br/><div id="41980281" class="c"><input type="checkbox" id="c-41980281" checked=""/><div class="controls bullet"><span class="by">przmk</span><span>|</span><a href="#41976762">root</a><span>|</span><a href="#41977117">parent</a><span>|</span><a href="#41977491">next</a><span>|</span><label class="collapse" for="c-41980281">[-]</label><label class="expand" for="c-41980281">[1 more]</label></div><br/><div class="children"><div class="content">For what it&#x27;s worth, the latest 1.10 release of sway introduced support for IME popups. Maybe that would help</div><br/></div></div></div></div><div id="41977491" class="c"><input type="checkbox" id="c-41977491" checked=""/><div class="controls bullet"><span class="by">pmontra</span><span>|</span><a href="#41976762">parent</a><span>|</span><a href="#41977117">prev</a><span>|</span><a href="#41978046">next</a><span>|</span><label class="collapse" for="c-41977491">[-]</label><label class="expand" for="c-41977491">[7 more]</label></div><br/><div class="children"><div class="content">Really? My laptop has my national keyboard but I switch to USA for programming because of {} [] and all the other characters that can be typed with minimal use of extra keys. My fingers know the keys and the switch combination, maybe windows + space. I didn&#x27;t expect Wayland not to have such basic functionality after so many years. But frames must be perfect, no tearing (is that the word?)</div><br/><div id="41977673" class="c"><input type="checkbox" id="c-41977673" checked=""/><div class="controls bullet"><span class="by">o11c</span><span>|</span><a href="#41976762">root</a><span>|</span><a href="#41977491">parent</a><span>|</span><a href="#41978046">next</a><span>|</span><label class="collapse" for="c-41977673">[-]</label><label class="expand" for="c-41977673">[6 more]</label></div><br/><div class="children"><div class="content">It&#x27;s possible that the &quot;permanently switch to next layout&quot; works reliably, but not the &quot;switch while held&quot; (which I do because I&#x27;m selecting single symbols at a time)?</div><br/><div id="41978398" class="c"><input type="checkbox" id="c-41978398" checked=""/><div class="controls bullet"><span class="by">dietr1ch</span><span>|</span><a href="#41976762">root</a><span>|</span><a href="#41977673">parent</a><span>|</span><a href="#41978046">next</a><span>|</span><label class="collapse" for="c-41978398">[-]</label><label class="expand" for="c-41978398">[5 more]</label></div><br/><div class="children"><div class="content">Have you tried using a compose key? I lost my custom mappings when switching from X to Wayland, but they work fine in both.<p>I did lose my custom mappings though, but I only needed them when I was in emacs and obviously there&#x27;s already a command for inserting weird stuff, so I just added a binding for it.</div><br/><div id="41978633" class="c"><input type="checkbox" id="c-41978633" checked=""/><div class="controls bullet"><span class="by">o11c</span><span>|</span><a href="#41976762">root</a><span>|</span><a href="#41978398">parent</a><span>|</span><a href="#41978046">next</a><span>|</span><label class="collapse" for="c-41978633">[-]</label><label class="expand" for="c-41978633">[4 more]</label></div><br/><div class="children"><div class="content">I use the compose key for compose stuff. It&#x27;s a huge pain to actually write and install custom compositions so I don&#x27;t bother anymore, just use the defaults (which is mostly annoying due to missing keypad variants, e.g. ± must be typed using the top of the keyboard).<p>It looks like the default en_US.UTF-8&#x2F;Compose includes mappings of the form:<p><pre><code>  &lt;dead_greek&gt; &lt;a&gt;  : &quot;α&quot;
</code></pre>
but to use that I&#x27;d have to figure out how to map a key to `&lt;dead_greek&gt;`, and keyboard mappings that aren&#x27;t in the standard checkboxes are such a pain.</div><br/><div id="41979186" class="c"><input type="checkbox" id="c-41979186" checked=""/><div class="controls bullet"><span class="by">interroboink</span><span>|</span><a href="#41976762">root</a><span>|</span><a href="#41978633">parent</a><span>|</span><a href="#41978046">next</a><span>|</span><label class="collapse" for="c-41979186">[-]</label><label class="expand" for="c-41979186">[3 more]</label></div><br/><div class="children"><div class="content">&gt; It&#x27;s a huge pain to actually write and install custom compositions<p>Could you say more about this?<p>IME, it&#x27;s just a matter of adding lines to ~&#x2F;.XCompose — is there something I&#x27;m missing?</div><br/><div id="41979351" class="c"><input type="checkbox" id="c-41979351" checked=""/><div class="controls bullet"><span class="by">dietr1ch</span><span>|</span><a href="#41976762">root</a><span>|</span><a href="#41979186">parent</a><span>|</span><a href="#41978046">next</a><span>|</span><label class="collapse" for="c-41979351">[-]</label><label class="expand" for="c-41979351">[2 more]</label></div><br/><div class="children"><div class="content">Is ~&#x2F;.XComposed picked up anymore? At least it wasn&#x27;t early on, and I just gave up on keeping it around.<p>I guess it&#x27;s up to each Wayland compositor, which calls for inconsistency :&#x2F;</div><br/><div id="41979430" class="c"><input type="checkbox" id="c-41979430" checked=""/><div class="controls bullet"><span class="by">interroboink</span><span>|</span><a href="#41976762">root</a><span>|</span><a href="#41979351">parent</a><span>|</span><a href="#41978046">next</a><span>|</span><label class="collapse" for="c-41979430">[-]</label><label class="expand" for="c-41979430">[1 more]</label></div><br/><div class="children"><div class="content">My understanding is that generally, Wayland uses XKB, which respects ~&#x2F;.XCompose<p>But I think there are specific exceptions still, such as this Chromium bug: <a href="https:&#x2F;&#x2F;issues.chromium.org&#x2F;issues&#x2F;40272818" rel="nofollow">https:&#x2F;&#x2F;issues.chromium.org&#x2F;issues&#x2F;40272818</a></div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="41978046" class="c"><input type="checkbox" id="c-41978046" checked=""/><div class="controls bullet"><span class="by">whywhywhywhy</span><span>|</span><a href="#41976762">prev</a><span>|</span><a href="#41977073">next</a><span>|</span><label class="collapse" for="c-41978046">[-]</label><label class="expand" for="c-41978046">[1 more]</label></div><br/><div class="children"><div class="content">Huge respect to any dev who goes out of their way to fix flickering&#x2F;glitching&#x2F;black regions when resizing or moving windows, I honestly can&#x27;t stand it when I see it because I know it can be solved with effort.</div><br/></div></div><div id="41977073" class="c"><input type="checkbox" id="c-41977073" checked=""/><div class="controls bullet"><span class="by">ryandrake</span><span>|</span><a href="#41978046">prev</a><span>|</span><a href="#41976488">next</a><span>|</span><label class="collapse" for="c-41977073">[-]</label><label class="expand" for="c-41977073">[26 more]</label></div><br/><div class="children"><div class="content">Nice results. It&#x27;s kind of wild that the &quot;before&quot; behavior would be considered acceptable&#x2F;shippable by anyone. That kind of jank should be a show stopper.</div><br/><div id="41977138" class="c"><input type="checkbox" id="c-41977138" checked=""/><div class="controls bullet"><span class="by">porphyra</span><span>|</span><a href="#41977073">parent</a><span>|</span><a href="#41978790">next</a><span>|</span><label class="collapse" for="c-41977138">[-]</label><label class="expand" for="c-41977138">[14 more]</label></div><br/><div class="children"><div class="content">Linux desktop is full of such jank. Fortunately, thanks to contributors like OP, the jank is gradually getting fixed. The whole point of Wayland is to eliminate a whole class of jank (screen tearing) that was essentially unfixable with X.</div><br/><div id="41977371" class="c"><input type="checkbox" id="c-41977371" checked=""/><div class="controls bullet"><span class="by">o11c</span><span>|</span><a href="#41977073">root</a><span>|</span><a href="#41977138">parent</a><span>|</span><a href="#41978790">next</a><span>|</span><label class="collapse" for="c-41977371">[-]</label><label class="expand" for="c-41977371">[13 more]</label></div><br/><div class="children"><div class="content">And yet, empirically, jank is far more common on Wayland than X11. With X11, on the rare case I noticed, it was usually just a matter of &quot;okay, which toolkit or driver do I need to look up the vsync environment variable for?&quot;<p>I have no opposition to Wayland in <i>theory</i>; my concerns are entirely practical and unignorable.</div><br/><div id="41978318" class="c"><input type="checkbox" id="c-41978318" checked=""/><div class="controls bullet"><span class="by">bpye</span><span>|</span><a href="#41977073">root</a><span>|</span><a href="#41977371">parent</a><span>|</span><a href="#41980055">next</a><span>|</span><label class="collapse" for="c-41978318">[-]</label><label class="expand" for="c-41978318">[1 more]</label></div><br/><div class="children"><div class="content">In my experience Wayland has been a better experience than X11, I have two monitors with different refresh rates and I could never eliminate tearing with X11 whilst Wayland works as expected.</div><br/></div></div><div id="41980055" class="c"><input type="checkbox" id="c-41980055" checked=""/><div class="controls bullet"><span class="by">Flimm</span><span>|</span><a href="#41977073">root</a><span>|</span><a href="#41977371">parent</a><span>|</span><a href="#41978318">prev</a><span>|</span><a href="#41980130">next</a><span>|</span><label class="collapse" for="c-41980055">[-]</label><label class="expand" for="c-41980055">[1 more]</label></div><br/><div class="children"><div class="content">For me, fractional scaling on a HiDPI screen is broken on X11, but works well in Wayland. Here&#x27;s an example from yesterday: I was playing Factorio full-screen, and some of the GUI elements were too large and wouldn&#x27;t fit it in the screen. I found a Factorio setting that enabled Wayland, and it instantly fixed the problem. Kudos to Factorio for supporting Wayland! You wouldn&#x27;t think it was needed for a full screen game, but it was.</div><br/></div></div><div id="41980130" class="c"><input type="checkbox" id="c-41980130" checked=""/><div class="controls bullet"><span class="by">kaba0</span><span>|</span><a href="#41977073">root</a><span>|</span><a href="#41977371">parent</a><span>|</span><a href="#41980055">prev</a><span>|</span><a href="#41977778">next</a><span>|</span><label class="collapse" for="c-41980130">[-]</label><label class="expand" for="c-41980130">[1 more]</label></div><br/><div class="children"><div class="content">Heh? That hasn’t been true on even the very first POC wayland compositor, Weston. I mean, it used to crash from time to time in the very early days, but visual artifacts? I don’t remember any, besides the occasional xwayland app (which is literally an X app running inside wayland).</div><br/></div></div><div id="41977778" class="c"><input type="checkbox" id="c-41977778" checked=""/><div class="controls bullet"><span class="by">porphyra</span><span>|</span><a href="#41977073">root</a><span>|</span><a href="#41977371">parent</a><span>|</span><a href="#41980130">prev</a><span>|</span><a href="#41978184">next</a><span>|</span><label class="collapse" for="c-41977778">[-]</label><label class="expand" for="c-41977778">[6 more]</label></div><br/><div class="children"><div class="content">Yeah I have experienced all sorts of flickering and artifacts on Wayland, especially on nvidia. Recently it has gotten a lot better though.</div><br/><div id="41978214" class="c"><input type="checkbox" id="c-41978214" checked=""/><div class="controls bullet"><span class="by">seba_dos1</span><span>|</span><a href="#41977073">root</a><span>|</span><a href="#41977778">parent</a><span>|</span><a href="#41978184">next</a><span>|</span><label class="collapse" for="c-41978214">[-]</label><label class="expand" for="c-41978214">[5 more]</label></div><br/><div class="children"><div class="content">FWIW, Nvidia problems on Wayland were Nvidia&#x27;s problems, not Wayland&#x27;s. Wayland was just a victim of Nvidia&#x27;s bugs and lacking implementations.</div><br/><div id="41978357" class="c"><input type="checkbox" id="c-41978357" checked=""/><div class="controls bullet"><span class="by">p_l</span><span>|</span><a href="#41977073">root</a><span>|</span><a href="#41978214">parent</a><span>|</span><a href="#41978184">next</a><span>|</span><label class="collapse" for="c-41978357">[-]</label><label class="expand" for="c-41978357">[4 more]</label></div><br/><div class="children"><div class="content">Except for tearing, which turned out to be a combination of Mesa&#x2F;DRM bugs and Wayland naively assuming the behaviour of those bugs.<p>Then nVidia decided to switch to GBM&#x2F;EGL way of doing things and it turned out everyone had incorrect assumptions...</div><br/><div id="41980103" class="c"><input type="checkbox" id="c-41980103" checked=""/><div class="controls bullet"><span class="by">pmontra</span><span>|</span><a href="#41977073">root</a><span>|</span><a href="#41978357">parent</a><span>|</span><a href="#41978988">next</a><span>|</span><label class="collapse" for="c-41980103">[-]</label><label class="expand" for="c-41980103">[2 more]</label></div><br/><div class="children"><div class="content">You mean this <a href="https:&#x2F;&#x2F;www.phoronix.com&#x2F;news&#x2F;NVIDIA-EGL-Wayland-1.15" rel="nofollow">https:&#x2F;&#x2F;www.phoronix.com&#x2F;news&#x2F;NVIDIA-EGL-Wayland-1.15</a> and the multy year story that I can guess from the comments in there?</div><br/><div id="41980779" class="c"><input type="checkbox" id="c-41980779" checked=""/><div class="controls bullet"><span class="by">p_l</span><span>|</span><a href="#41977073">root</a><span>|</span><a href="#41980103">parent</a><span>|</span><a href="#41978988">next</a><span>|</span><label class="collapse" for="c-41980779">[-]</label><label class="expand" for="c-41980779">[1 more]</label></div><br/><div class="children"><div class="content">Explicit Sync, yes. The reason why I consider previous implicit sync a bug is that it was essentially unfounded expectation - nothing guaranteed you&#x27;d get a magic mutex in the sky that synchronized renders for you, and in fact, you do not want one for maximum performance. Lack of explicit sync also essentially meant common multi-gpu setups would be broken.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="41978184" class="c"><input type="checkbox" id="c-41978184" checked=""/><div class="controls bullet"><span class="by">talldayo</span><span>|</span><a href="#41977073">root</a><span>|</span><a href="#41977371">parent</a><span>|</span><a href="#41977778">prev</a><span>|</span><a href="#41978790">next</a><span>|</span><label class="collapse" for="c-41978184">[-]</label><label class="expand" for="c-41978184">[3 more]</label></div><br/><div class="children"><div class="content">&gt; And yet, empirically, jank is far more common on Wayland than X11<p>It depends on the type of jank you&#x27;re talking about. It&#x27;s wholly disingenuous to characterize Wayland as janky but x11 as not - the jank inherent to x11 is what made the original Xorg developers start making Wayland in the first place. Empirically, if x11 was perfectly fine there would be no motivation to design a successor.<p>x11 gets the first-mover advantage of a lot of implementations and a straightforward design goal, but that&#x27;s about it. It&#x27;s not secure enough to recommend as a serious alternative to Mac and Windows users, and it&#x27;s too slow and unopinionated to present a friendly face to new users. Features like 1:1 trackpad gestures, genuine HDR pipelines and a locked compositor framerate are all getting to the point that regular consumers expect them as default.<p>If you want to keep using x11, it&#x27;s unlikely someone is going to take it away from you. But it&#x27;s on track for depreciation and hasn&#x27;t been actively developed in years. Recommending it as a panacea to new users is a bad idea.</div><br/><div id="41979910" class="c"><input type="checkbox" id="c-41979910" checked=""/><div class="controls bullet"><span class="by">FeepingCreature</span><span>|</span><a href="#41977073">root</a><span>|</span><a href="#41978184">parent</a><span>|</span><a href="#41978790">next</a><span>|</span><label class="collapse" for="c-41979910">[-]</label><label class="expand" for="c-41979910">[2 more]</label></div><br/><div class="children"><div class="content">&gt; x11 gets the first-mover advantage of a lot of implementations and a straightforward design goal, but that&#x27;s about it. It&#x27;s not secure enough to recommend as a serious alternative to Mac and Windows users, and it&#x27;s too slow and unopinionated to present a friendly face to new users.<p>I&#x27;ve been recommending it as a serious alternative for years, and it&#x27;s always presented a friendly face.<p>&gt; Features like 1:1 trackpad gestures, genuine HDR pipelines and a locked compositor framerate are all getting to the point that regular consumers expect them as default.<p>I have never heard anyone not already a Linux user comment on even one of those as a problem.</div><br/><div id="41980057" class="c"><input type="checkbox" id="c-41980057" checked=""/><div class="controls bullet"><span class="by">Arainach</span><span>|</span><a href="#41977073">root</a><span>|</span><a href="#41979910">parent</a><span>|</span><a href="#41978790">next</a><span>|</span><label class="collapse" for="c-41980057">[-]</label><label class="expand" for="c-41980057">[1 more]</label></div><br/><div class="children"><div class="content">&gt;I have never heard anyone not already a Linux user comment on even one of those as a problem<p>....because Windows and Mac users have not had these problems since 2006?</div><br/></div></div></div></div></div></div></div></div></div></div><div id="41978790" class="c"><input type="checkbox" id="c-41978790" checked=""/><div class="controls bullet"><span class="by">sho_hn</span><span>|</span><a href="#41977073">parent</a><span>|</span><a href="#41977138">prev</a><span>|</span><a href="#41978596">next</a><span>|</span><label class="collapse" for="c-41978790">[-]</label><label class="expand" for="c-41978790">[3 more]</label></div><br/><div class="children"><div class="content">I assume you know this, but just to be sure: The &quot;before&quot; state only happened in a fallback codepath when using a legacy application, i.e. an X11 app in the modern Wayland-based desktop. When using modern apps, or when using the entire desktop in legacy X11 mode, this doesn&#x27;t happen.<p>Most legacy X11 apps in active use are actually games which tend to be fullscreen and not resized, so it wouldn&#x27;t happen that often for many users.<p>(That said, sure, I can also respect the stance as I tend to place a premium on glitch-freeness too.)</div><br/><div id="41978982" class="c"><input type="checkbox" id="c-41978982" checked=""/><div class="controls bullet"><span class="by">kevin_thibedeau</span><span>|</span><a href="#41977073">root</a><span>|</span><a href="#41978790">parent</a><span>|</span><a href="#41978596">next</a><span>|</span><label class="collapse" for="c-41978982">[-]</label><label class="expand" for="c-41978982">[2 more]</label></div><br/><div class="children"><div class="content">This didn&#x27;t happen on Hummingbird Exceed or Xorg on Windows. It&#x27;s not X&#x27;s fault that rendering is wrong in the encapsulating windowing system.</div><br/><div id="41979054" class="c"><input type="checkbox" id="c-41979054" checked=""/><div class="controls bullet"><span class="by">sho_hn</span><span>|</span><a href="#41977073">root</a><span>|</span><a href="#41978982">parent</a><span>|</span><a href="#41978596">next</a><span>|</span><label class="collapse" for="c-41979054">[-]</label><label class="expand" for="c-41979054">[1 more]</label></div><br/><div class="children"><div class="content">Nor did I claim it is.<p>My comment was concerned with making it abundantly clear that this glitch happened in specific scenarios and not just any and all window resizing.</div><br/></div></div></div></div></div></div><div id="41978596" class="c"><input type="checkbox" id="c-41978596" checked=""/><div class="controls bullet"><span class="by">bee_rider</span><span>|</span><a href="#41977073">parent</a><span>|</span><a href="#41978790">prev</a><span>|</span><a href="#41977280">next</a><span>|</span><label class="collapse" for="c-41978596">[-]</label><label class="expand" for="c-41978596">[1 more]</label></div><br/><div class="children"><div class="content">My window manager had the “before” behavior, but I complained it was defective and they gave it to me free. Not sure how much it would have cost beforehand, but I can’t complain after a 100% discount, right?</div><br/></div></div><div id="41977280" class="c"><input type="checkbox" id="c-41977280" checked=""/><div class="controls bullet"><span class="by">bsder</span><span>|</span><a href="#41977073">parent</a><span>|</span><a href="#41978596">prev</a><span>|</span><a href="#41976488">next</a><span>|</span><label class="collapse" for="c-41977280">[-]</label><label class="expand" for="c-41977280">[7 more]</label></div><br/><div class="children"><div class="content">&quot;Jank&quot; is still functional.  And, to a first order approximation, <i>nobody cares</i>.<p>Even Windows generally switches down to software rendering when resizing.  And on mobile devices, nobody resizes.<p>No pointer warp, however, is a failure (CAD packages all have significant issues on Wayland).  Lack of multilingual support&#x2F;accessibility is a failure.  Lack of screenshots&#x2F;screencasts is a failure.  Lack of support for the BSD lineages is a failure.  etc.<p>People are still bitching up a storm because Wayland <i>still</i> (Pipewire does screen sharing using DBUS(!) for example) hasn&#x27;t fixed basic things while DeadRat is shoving it down everybody&#x27;s throat by dropping X11 support.<p>The Wayland devs aren&#x27;t wrong about the security implications of this kind of stuff.  However, they&#x27;re also not giving anybody <i>solutions</i>, either.<p>One big issue is that Wayland devlopment is so slow that the entire space moved forward and destroyed a bunch of assumptions that Wayland is based around.</div><br/><div id="41977773" class="c"><input type="checkbox" id="c-41977773" checked=""/><div class="controls bullet"><span class="by">tomxor</span><span>|</span><a href="#41977073">root</a><span>|</span><a href="#41977280">parent</a><span>|</span><a href="#41978014">next</a><span>|</span><label class="collapse" for="c-41977773">[-]</label><label class="expand" for="c-41977773">[5 more]</label></div><br/><div class="children"><div class="content">&gt; Lack of support for the BSD lineages is a failure.<p>Not true. FreeBSD and OpenBSD have had various wlroots compositors such as Sway available for some time. e.g [1] Some people have even been experimenting with KDE-wayland on FreeBSD since 2021.<p>Wayland support on any OS is not <i>binary</i> because there is no single layer like Xorg. It&#x27;s a matter of individual compositors and their components being ported to the OS, which is a matter of popularity, and the BSDs are always at a disadvantage in that respect, so they lag behind, same as other software. Nevertheless, they are definitely gaining support. Then again this distinction is only technical, for functional support new DEs&#x2F;WMs would always have needed to be ported regardless of display architecture, the only case it would not is for an Xorg drop-in, which defeats the purpose.<p>&gt; Lack of screenshots&#x2F;screencasts is a failure.<p>... but there <i>are</i> many functional screencapture apps, and even browser support, I use this pretty much every week. I think you might be operating on out of date info. I&#x27;d highly recommend giving it another try, the Wayland ecosystem has come quite far over the last decade.<p>[1] <a href="https:&#x2F;&#x2F;docs.freebsd.org&#x2F;en&#x2F;books&#x2F;handbook&#x2F;wayland&#x2F;" rel="nofollow">https:&#x2F;&#x2F;docs.freebsd.org&#x2F;en&#x2F;books&#x2F;handbook&#x2F;wayland&#x2F;</a></div><br/><div id="41980977" class="c"><input type="checkbox" id="c-41980977" checked=""/><div class="controls bullet"><span class="by">badgersnake</span><span>|</span><a href="#41977073">root</a><span>|</span><a href="#41977773">parent</a><span>|</span><a href="#41978400">next</a><span>|</span><label class="collapse" for="c-41980977">[-]</label><label class="expand" for="c-41980977">[1 more]</label></div><br/><div class="children"><div class="content">If you know how to make screen sharing work under Sway on FreeBSD, please do share. I have not managed to figure it out.</div><br/></div></div><div id="41978400" class="c"><input type="checkbox" id="c-41978400" checked=""/><div class="controls bullet"><span class="by">p_l</span><span>|</span><a href="#41977073">root</a><span>|</span><a href="#41977773">parent</a><span>|</span><a href="#41980977">prev</a><span>|</span><a href="#41978014">next</a><span>|</span><label class="collapse" for="c-41978400">[-]</label><label class="expand" for="c-41978400">[3 more]</label></div><br/><div class="children"><div class="content">Wayland unfortunately is a mess that is hard to implement so we get a balkanized situation where not only everything often boils down to Big Important Process in the middle (that actually integrates more things than X.Org used to), the set of features it supports are way more balkanized and most importantly, specific to that one Big Important Process as they can&#x27;t be viably separated out.<p>And even then you have to deal with a mix because you have to work through two different unsynced possibly broken in weird ways connections (Wayland + D-Bus).<p>This results in how last week I couldn&#x27;t screenshare under Wayland, and had zero chances to figure it out - and to make it worse since I had some important state and no time to play with reboots, I couldn&#x27;t fix it.</div><br/><div id="41980208" class="c"><input type="checkbox" id="c-41980208" checked=""/><div class="controls bullet"><span class="by">kaba0</span><span>|</span><a href="#41977073">root</a><span>|</span><a href="#41978400">parent</a><span>|</span><a href="#41978014">next</a><span>|</span><label class="collapse" for="c-41980208">[-]</label><label class="expand" for="c-41980208">[2 more]</label></div><br/><div class="children"><div class="content">XOrg was predominantly used as a useless middleman between a compositor and a window manager communicating with each other. Just because the wayland compositor is “one big important process” doesn’t mean that the whole architecture is more complicated.<p>Multiple IPCs make the whole stuff way more complex, there is a reason why we have a big monolith as browsers and not some `curl | htmlRender | jsInterpreter` Rube Goldberg machine — the unix philosophy is not the pan ultimate design, it works in some cases and is utterly broken in others.</div><br/><div id="41980762" class="c"><input type="checkbox" id="c-41980762" checked=""/><div class="controls bullet"><span class="by">p_l</span><span>|</span><a href="#41977073">root</a><span>|</span><a href="#41980208">parent</a><span>|</span><a href="#41978014">next</a><span>|</span><label class="collapse" for="c-41980762">[-]</label><label class="expand" for="c-41980762">[1 more]</label></div><br/><div class="children"><div class="content">X11 != the lowest common denominator implementation of X11. Nor was everyone using it with big heavy compositors (honestly, the only reason I used a compositor for years was intel removing sync circuitry from their iGPUs).<p>And Wayland did not stop requiring multiple IPCs, in fact it <i>mandates</i> them as several features require passing data by secondary channels, not just for Portals et al - some don&#x27;t even have any described way to reliably pass the information that I have seen (like how to pass around cookie to let one application activate window of another? Or maybe the spec is such a mess that I&#x27;m looking at completely wrong place when I tried to fix ability to reliably switch between applications without extending compositor).<p>And yes, the architecture is more complicated in practice, otherwise it might have reached parity with what X11 did after as many years - like input method support. Unfortunately it&#x27;s so broken that you have multiple versions of it in practice, <i>it requires extra IPC in practice</i>, and at least in my experience just does not work.</div><br/></div></div></div></div></div></div></div></div><div id="41978014" class="c"><input type="checkbox" id="c-41978014" checked=""/><div class="controls bullet"><span class="by">DonHopkins</span><span>|</span><a href="#41977073">root</a><span>|</span><a href="#41977280">parent</a><span>|</span><a href="#41977773">prev</a><span>|</span><a href="#41976488">next</a><span>|</span><label class="collapse" for="c-41978014">[-]</label><label class="expand" for="c-41978014">[1 more]</label></div><br/><div class="children"><div class="content">If you mean to use &quot;DeadRat&quot; as a derogatory term for &quot;RedHat&quot;, I appreciate the sentiment, but their particular color of headgear has been unfortunately taken over to mean something far more insidious than a dead rat, so you might as well just go back to derogatorily calling them &quot;RedHat&quot; for all of its MAGAstic implications.</div><br/></div></div></div></div></div></div><div id="41976488" class="c"><input type="checkbox" id="c-41976488" checked=""/><div class="controls bullet"><span class="by">yxhuvud</span><span>|</span><a href="#41977073">prev</a><span>|</span><a href="#41976269">next</a><span>|</span><label class="collapse" for="c-41976488">[-]</label><label class="expand" for="c-41976488">[2 more]</label></div><br/><div class="children"><div class="content">Hmm. Even with the fix it didn&#x27;t look very smooth even if it is a lot better. I wonder if that is due to the recording, or due to the mouse settings (mouse poll rate and acceleration settings are very impactful on smoothness), due to X or the toolkit, or due to it not being as good as it can be.</div><br/><div id="41978201" class="c"><input type="checkbox" id="c-41978201" checked=""/><div class="controls bullet"><span class="by">GrantMoyer</span><span>|</span><a href="#41976488">parent</a><span>|</span><a href="#41976269">next</a><span>|</span><label class="collapse" for="c-41978201">[-]</label><label class="expand" for="c-41978201">[1 more]</label></div><br/><div class="children"><div class="content">I think issue is the screen capture tool or a framerate mismatch in transcoding. The video is 59fps, but the mouse cursor only updates every few frames. Usually it&#x27;s every other frame, but sometimes it takes three frames or more to update, and sometimes it updates in two or more consecutive frames. On most of the frames where the cursor moves, the window size also changes.</div><br/></div></div></div></div><div id="41976269" class="c"><input type="checkbox" id="c-41976269" checked=""/><div class="controls bullet"><span class="by">anotherhue</span><span>|</span><a href="#41976488">prev</a><span>|</span><a href="#41978371">next</a><span>|</span><label class="collapse" for="c-41976269">[-]</label><label class="expand" for="c-41976269">[13 more]</label></div><br/><div class="children"><div class="content">I like to run xeyes and see if they move when I interact with the test application. It&#x27;s not better but they&#x27;re as charming as they always were.<p>Also consider running an xwayland app under gamescope which smooths out some issues.</div><br/><div id="41977598" class="c"><input type="checkbox" id="c-41977598" checked=""/><div class="controls bullet"><span class="by">anyfoo</span><span>|</span><a href="#41976269">parent</a><span>|</span><a href="#41977418">next</a><span>|</span><label class="collapse" for="c-41977598">[-]</label><label class="expand" for="c-41977598">[11 more]</label></div><br/><div class="children"><div class="content">That’s actually something you don’t want nowadays. A random app like xeyes should not be able to know mouse position at all times, for privacy reasons. (Unless you very explicitly gave xeyes super-extra permission to do that.)<p>We’ve long stopped living in a world where you should need to fully trust every piece software that you run as your user on your computer. And even probably trustworthy software can go bad at an update due to supply-chain attacks.</div><br/><div id="41977722" class="c"><input type="checkbox" id="c-41977722" checked=""/><div class="controls bullet"><span class="by">ChocolateGod</span><span>|</span><a href="#41976269">root</a><span>|</span><a href="#41977598">parent</a><span>|</span><a href="#41978935">next</a><span>|</span><label class="collapse" for="c-41977722">[-]</label><label class="expand" for="c-41977722">[1 more]</label></div><br/><div class="children"><div class="content">&gt; A random app like xeyes should not be able to know mouse position at all times, for privacy reasons. (Unless you very explicitly gave xeyes super-extra permission to do that.)<p>The thing about xeyes isn&#x27;t that its privacy invasive, is that it shows that xeyes knows what you&#x27;re doing in other clients.<p>Got a gnome terminal root shell open? That&#x27;s a privilege escalation method for any other client running on the desktop under Xorg. This itself, isn&#x27;t really a problem, but chained with other attacks could be (e.g. browser escape).</div><br/></div></div><div id="41978935" class="c"><input type="checkbox" id="c-41978935" checked=""/><div class="controls bullet"><span class="by">dgfitz</span><span>|</span><a href="#41976269">root</a><span>|</span><a href="#41977598">parent</a><span>|</span><a href="#41977722">prev</a><span>|</span><a href="#41980232">next</a><span>|</span><label class="collapse" for="c-41978935">[-]</label><label class="expand" for="c-41978935">[6 more]</label></div><br/><div class="children"><div class="content">Isn’t is possible to get something like mouse position from almost any stdlib of most languages?</div><br/><div id="41979041" class="c"><input type="checkbox" id="c-41979041" checked=""/><div class="controls bullet"><span class="by">seba_dos1</span><span>|</span><a href="#41976269">root</a><span>|</span><a href="#41978935">parent</a><span>|</span><a href="#41980232">next</a><span>|</span><label class="collapse" for="c-41979041">[-]</label><label class="expand" for="c-41979041">[5 more]</label></div><br/><div class="children"><div class="content">No, not really. Modern APIs usually don&#x27;t even let you access that kind of information without additional privileges. Some older toolkits have functions that are supposed to do this, but it doesn&#x27;t work everywhere.</div><br/><div id="41979110" class="c"><input type="checkbox" id="c-41979110" checked=""/><div class="controls bullet"><span class="by">dgfitz</span><span>|</span><a href="#41976269">root</a><span>|</span><a href="#41979041">parent</a><span>|</span><a href="#41980232">next</a><span>|</span><label class="collapse" for="c-41979110">[-]</label><label class="expand" for="c-41979110">[4 more]</label></div><br/><div class="children"><div class="content">Can’t you get the cursor position from the windows c++ stdlib? Or like pyautogui? Or the Java stdlib?</div><br/><div id="41979206" class="c"><input type="checkbox" id="c-41979206" checked=""/><div class="controls bullet"><span class="by">adzm</span><span>|</span><a href="#41976269">root</a><span>|</span><a href="#41979110">parent</a><span>|</span><a href="#41980059">next</a><span>|</span><label class="collapse" for="c-41979206">[-]</label><label class="expand" for="c-41979206">[1 more]</label></div><br/><div class="children"><div class="content">Windows&#x27; pointer position is available to even the most limited GUI application; it is not protected information. For win32 at least, I am not familiar enough to say that about the newer app packages which are much more locked down, but I would be surprised.</div><br/></div></div><div id="41980059" class="c"><input type="checkbox" id="c-41980059" checked=""/><div class="controls bullet"><span class="by">anyfoo</span><span>|</span><a href="#41976269">root</a><span>|</span><a href="#41979110">parent</a><span>|</span><a href="#41979206">prev</a><span>|</span><a href="#41980259">next</a><span>|</span><label class="collapse" for="c-41980059">[-]</label><label class="expand" for="c-41980059">[1 more]</label></div><br/><div class="children"><div class="content">Hopefully only if the given app has focus.</div><br/></div></div><div id="41980259" class="c"><input type="checkbox" id="c-41980259" checked=""/><div class="controls bullet"><span class="by">kaba0</span><span>|</span><a href="#41976269">root</a><span>|</span><a href="#41979110">parent</a><span>|</span><a href="#41980059">prev</a><span>|</span><a href="#41980232">next</a><span>|</span><label class="collapse" for="c-41980259">[-]</label><label class="expand" for="c-41980259">[1 more]</label></div><br/><div class="children"><div class="content">They queried that info based on a specific implementation of a framework. If that framework is implemented under Wayland, then through the Wayland APIs it will only get rudimentary info on mouse position (e.g. only when it’s in focus and the mouse is over it).</div><br/></div></div></div></div></div></div></div></div><div id="41980232" class="c"><input type="checkbox" id="c-41980232" checked=""/><div class="controls bullet"><span class="by">kaba0</span><span>|</span><a href="#41976269">root</a><span>|</span><a href="#41977598">parent</a><span>|</span><a href="#41978935">prev</a><span>|</span><a href="#41979620">next</a><span>|</span><label class="collapse" for="c-41980232">[-]</label><label class="expand" for="c-41980232">[1 more]</label></div><br/><div class="children"><div class="content">And an often under appreciated tenet of security — even a “good” software can be exposed to “bad” <i>data</i>, and you only need a bug (especially a memory bug, which is exceedingly common because linux userspace can’t get rid of c for the life of it) to have arbitrary code executed.<p>Like, your pdf reader is surely not evil, but do you trust every single pdf file you open?</div><br/></div></div><div id="41979620" class="c"><input type="checkbox" id="c-41979620" checked=""/><div class="controls bullet"><span class="by">superkuh</span><span>|</span><a href="#41976269">root</a><span>|</span><a href="#41977598">parent</a><span>|</span><a href="#41980232">prev</a><span>|</span><a href="#41977418">next</a><span>|</span><label class="collapse" for="c-41979620">[-]</label><label class="expand" for="c-41979620">[2 more]</label></div><br/><div class="children"><div class="content">It really is something I want. But most people do live in your described world. That&#x27;s the smartphone and &quot;run&#x27;s every javascript application sent to my web browser automatically&quot; kind of computing security model. But there do exist <i>personal</i> behaviors of desktop operating system use where you can actually trust the applications installed and not put up walls between everything. And then things like keyboard&#x2F;mouse sharing work, windows return to their places, and screen readers work. Those are all very important to me. For them I&#x27;m willing to browse with javascript temp-whitelist-only and many other such tedious things.<p>What I&#x27;m trying to get across is that the need for that kind of intense security model, every process a threat, is not intrinsic to modern computing.</div><br/><div id="41980284" class="c"><input type="checkbox" id="c-41980284" checked=""/><div class="controls bullet"><span class="by">kaba0</span><span>|</span><a href="#41976269">root</a><span>|</span><a href="#41979620">parent</a><span>|</span><a href="#41977418">next</a><span>|</span><label class="collapse" for="c-41980284">[-]</label><label class="expand" for="c-41980284">[1 more]</label></div><br/><div class="children"><div class="content">But what’s the limiting factor of doing the sane and safe thing by default?<p>The most popular operating systems all do that (ios and android), and they have carved out safe APIs for all of that to work. You can’t patch up a Swiss cheese after the fact.<p>Is it hard to create standard APIs in a bazaar style of development? Yeah. But that doesn’t mean that it’s not <i>the correct</i> approach.</div><br/></div></div></div></div></div></div><div id="41977418" class="c"><input type="checkbox" id="c-41977418" checked=""/><div class="controls bullet"><span class="by">yjftsjthsd-h</span><span>|</span><a href="#41976269">parent</a><span>|</span><a href="#41977598">prev</a><span>|</span><a href="#41978371">next</a><span>|</span><label class="collapse" for="c-41977418">[-]</label><label class="expand" for="c-41977418">[1 more]</label></div><br/><div class="children"><div class="content">I would argue that it <i>is</i> better; it works regardless of this fix and on all compositors.</div><br/></div></div></div></div><div id="41978371" class="c"><input type="checkbox" id="c-41978371" checked=""/><div class="controls bullet"><span class="by">shmerl</span><span>|</span><a href="#41976269">prev</a><span>|</span><a href="#41977164">next</a><span>|</span><label class="collapse" for="c-41978371">[-]</label><label class="expand" for="c-41978371">[1 more]</label></div><br/><div class="children"><div class="content">Nice! It would be cool for Wine Wayland driver to also fix window resizing (regedit currently is blinking all over when being resized).</div><br/></div></div></div></div></div></div></div></body></html>