<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1717059669946" as="style"/><link rel="stylesheet" href="styles.css?v=1717059669946"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://foojay.io/today/indexing-all-of-wikipedia-on-a-laptop/">Vector indexing all of Wikipedia on a laptop</a> <span class="domain">(<a href="https://foojay.io">foojay.io</a>)</span></div><div class="subtext"><span>tjake</span> | <span>126 comments</span></div><br/><div><div id="40521564" class="c"><input type="checkbox" id="c-40521564" checked=""/><div class="controls bullet"><span class="by">anonymousDan</span><span>|</span><a href="#40516237">next</a><span>|</span><label class="collapse" for="c-40521564">[-]</label><label class="expand" for="c-40521564">[1 more]</label></div><br/><div class="children"><div class="content">How do embeddings created by state of the art open source models compare to the free embeddings mentioned in the article? Would they actually cost 5k to create given a reasonable local GPU setup?</div><br/></div></div><div id="40516237" class="c"><input type="checkbox" id="c-40516237" checked=""/><div class="controls bullet"><span class="by">peter_l_downs</span><span>|</span><a href="#40521564">prev</a><span>|</span><a href="#40514671">next</a><span>|</span><label class="collapse" for="c-40516237">[-]</label><label class="expand" for="c-40516237">[3 more]</label></div><br/><div class="children"><div class="content">&gt; JVector, the library that powers DataStax Astra vector search, now supports indexing larger-than-memory datasets by performing construction-related searches with compressed vectors.  This means that the edge lists need to fit in memory, but the uncompressed vectors do not, which gives us enough headroom to index Wikipedia-en on a laptop.<p>It&#x27;s interesting to note that JVector accomplishes this differently than how DiskANN described doing it. My understanding (based on the links below, but I didn&#x27;t read the full diff in #244) is that JVector will incrementally compress the vectors it is using to construct the index; whereas DiskANN described partitioning the vectors into subsets small enough that indexes can be built in-memory using uncompressed vectors, building those indexes independently, and then merging the results into one larger index.<p>OP, have you done any quality comparisons between an index built with JVector using the PQ approach (small RAM machine) vs. an index built with JVector using the raw vectors during construction (big RAM machine)? I&#x27;d be curious to understand what this technique&#x27;s impact is on the final search results.<p>I&#x27;d also be interested to know if any other vector stores support building indexes in limited memory using the partition-then-merge approach described by DiskANN.<p>Finally, it&#x27;s been a while since I looked at this stuff, so if I mis-wrote or mis-understood please correct me!<p>- DiskANN: <a href="https:&#x2F;&#x2F;dl.acm.org&#x2F;doi&#x2F;10.5555&#x2F;3454287.3455520" rel="nofollow">https:&#x2F;&#x2F;dl.acm.org&#x2F;doi&#x2F;10.5555&#x2F;3454287.3455520</a><p>- Anisotropic Vector Quantization (PQ Compression): <a href="https:&#x2F;&#x2F;arxiv.org&#x2F;abs&#x2F;1908.10396" rel="nofollow">https:&#x2F;&#x2F;arxiv.org&#x2F;abs&#x2F;1908.10396</a><p>- JVector&#x2F;#168: How to support building larger-than-memory indexes <a href="https:&#x2F;&#x2F;github.com&#x2F;jbellis&#x2F;jvector&#x2F;issues&#x2F;168">https:&#x2F;&#x2F;github.com&#x2F;jbellis&#x2F;jvector&#x2F;issues&#x2F;168</a><p>- JVector&#x2F;#244: Build indexes using compressed vectors <a href="https:&#x2F;&#x2F;github.com&#x2F;jbellis&#x2F;jvector&#x2F;pull&#x2F;244">https:&#x2F;&#x2F;github.com&#x2F;jbellis&#x2F;jvector&#x2F;pull&#x2F;244</a></div><br/><div id="40516913" class="c"><input type="checkbox" id="c-40516913" checked=""/><div class="controls bullet"><span class="by">pbadams</span><span>|</span><a href="#40516237">parent</a><span>|</span><a href="#40516363">next</a><span>|</span><label class="collapse" for="c-40516913">[-]</label><label class="expand" for="c-40516913">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not mentioned in the original paper, but DiskANN also supports PQ at build-time via `--build_PQ_bytes`, though it&#x27;s a tradeoff with the graph quality as you mention.<p>One interesting property in benchmarking is that the distance comparison implementations for full-dim vectors can often be more efficient than those for PQ-compressed vectors (straight-line SIMD execution vs table lookups), so on some systems cluster-and-merge is relatively competitive in terms of build performance.</div><br/></div></div><div id="40516363" class="c"><input type="checkbox" id="c-40516363" checked=""/><div class="controls bullet"><span class="by">jbellis</span><span>|</span><a href="#40516237">parent</a><span>|</span><a href="#40516913">prev</a><span>|</span><a href="#40514671">next</a><span>|</span><label class="collapse" for="c-40516363">[-]</label><label class="expand" for="c-40516363">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s correct!<p>I&#x27;ve tested the build-with-compression approach used here with all the datasets in JVector&#x27;s Bench [1] and there&#x27;s near zero loss in accuracy.<p>I suspect that the reason the DiskANN authors used the approach they did is that in 2019 Deep1B was about the only very large public dataset around, and since the vectors themselves are small your edge lists end up dominating your memory usage.  So they came up with a clever solution, at the cost of making construction 2.5x as expensive.  (Educated guess: 2x is from adding each vector to multiple partitions and the extra 50% to merge the results.)<p>So JVector is just keeping edge lists in memory today.  When that becomes a bottleneck we may need to do something similar to DiskANN but I&#x27;m hoping we can do better because it&#x27;s frankly a little inelegant.<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;jbellis&#x2F;jvector&#x2F;blob&#x2F;main&#x2F;jvector-examples&#x2F;src&#x2F;main&#x2F;java&#x2F;io&#x2F;github&#x2F;jbellis&#x2F;jvector&#x2F;example&#x2F;Bench.java">https:&#x2F;&#x2F;github.com&#x2F;jbellis&#x2F;jvector&#x2F;blob&#x2F;main&#x2F;jvector-example...</a></div><br/></div></div></div></div><div id="40514671" class="c"><input type="checkbox" id="c-40514671" checked=""/><div class="controls bullet"><span class="by">gfourfour</span><span>|</span><a href="#40516237">prev</a><span>|</span><a href="#40518910">next</a><span>|</span><label class="collapse" for="c-40514671">[-]</label><label class="expand" for="c-40514671">[40 more]</label></div><br/><div class="children"><div class="content">Maybe I’m missing something but I’ve created vector embeddings for all of English Wikipedia about a dozen times and it costs maybe $10 of compute on Colab, not $5000</div><br/><div id="40514831" class="c"><input type="checkbox" id="c-40514831" checked=""/><div class="controls bullet"><span class="by">bunderbunder</span><span>|</span><a href="#40514671">parent</a><span>|</span><a href="#40514761">next</a><span>|</span><label class="collapse" for="c-40514831">[-]</label><label class="expand" for="c-40514831">[14 more]</label></div><br/><div class="children"><div class="content">This is covering 300+ languages, not just English, and it&#x27;s specifically using Cohere&#x27;s Embed v3 embeddings, which are provided as a service and currently priced at US$0.10 per million tokens [1]. I assume if you&#x27;re running on Colab you&#x27;re using an open model, and possibly a relatively lighter weight one as well?<p>[1]: <a href="https:&#x2F;&#x2F;cohere.com&#x2F;pricing" rel="nofollow">https:&#x2F;&#x2F;cohere.com&#x2F;pricing</a></div><br/><div id="40515145" class="c"><input type="checkbox" id="c-40515145" checked=""/><div class="controls bullet"><span class="by">traverseda</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40514831">parent</a><span>|</span><a href="#40515262">next</a><span>|</span><label class="collapse" for="c-40515145">[-]</label><label class="expand" for="c-40515145">[7 more]</label></div><br/><div class="children"><div class="content">This is pretty early in the game to be relying on proprietary embeddings, don&#x27;t you think? If if they are 20% better, blink and there will be a new normal.<p>It&#x27;s insane to me that someone, this early in the gold rush, would be mining in someone else&#x27;s mine, so to speak</div><br/><div id="40515618" class="c"><input type="checkbox" id="c-40515618" checked=""/><div class="controls bullet"><span class="by">bunderbunder</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40515145">parent</a><span>|</span><a href="#40516629">next</a><span>|</span><label class="collapse" for="c-40515618">[-]</label><label class="expand" for="c-40515618">[2 more]</label></div><br/><div class="children"><div class="content">I have no idea. But that wasn&#x27;t the question I was answering. It was, &quot;how does the article&#x27;s author estimate that would cost $5000?&quot; And I think that&#x27;s how. Or at least, that gets to a number that&#x27;s in the same ballpark as what the author was suggesting.<p>That said, first guess, if you <i>do</i> want to evaluate Cohere embeddings for a commercial application, using this dataset could be a decent basis for a lower-cost spike.</div><br/><div id="40515680" class="c"><input type="checkbox" id="c-40515680" checked=""/><div class="controls bullet"><span class="by">jbellis</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40515618">parent</a><span>|</span><a href="#40516629">next</a><span>|</span><label class="collapse" for="c-40515680">[-]</label><label class="expand" for="c-40515680">[1 more]</label></div><br/><div class="children"><div class="content">Yes, that is how I came up with that number.</div><br/></div></div></div></div><div id="40516629" class="c"><input type="checkbox" id="c-40516629" checked=""/><div class="controls bullet"><span class="by">janalsncm</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40515145">parent</a><span>|</span><a href="#40515618">prev</a><span>|</span><a href="#40515262">next</a><span>|</span><label class="collapse" for="c-40516629">[-]</label><label class="expand" for="c-40516629">[4 more]</label></div><br/><div class="children"><div class="content">It’s not just that. Embeddings aren’t magic. If you’re going to be creating embeddings for similarity search, the first thing you need to ask yourself is what makes two vectors similar such that two embeddings should even be close together?<p>There are a lot of related sources of similarity, but they’re slightly different. And I have no idea what Cohere is doing. Additionally, it’s not clear to me how queries can and should be embedded. Queries are typically much shorter than their associated documents, so they typically need to be trained jointly.<p>Selling “embeddings as a service” is a bit like selling hashing as a service. There are a lot of different hash functions. Cryptographic hashes, locality sensitive hashes, hashes for checksum, etc.</div><br/><div id="40519747" class="c"><input type="checkbox" id="c-40519747" checked=""/><div class="controls bullet"><span class="by">vineyardmike</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40516629">parent</a><span>|</span><a href="#40517043">next</a><span>|</span><label class="collapse" for="c-40519747">[-]</label><label class="expand" for="c-40519747">[2 more]</label></div><br/><div class="children"><div class="content">&gt; If you’re going to be creating embeddings for similarity search, the first thing you need to ask yourself is what makes two vectors similar such that two embeddings should even be close together?<p>I have no association with Cohere, but in their docs clearly say that their embedding were trained so two similar vectors have similar &quot;<i>semantic meaning</i>&quot;. Which is still pretty vague, but it&#x27;s at least clear what their goals were.<p>&gt; Selling “embeddings as a service” is a bit like selling hashing as a service.<p>Coincidentally, Cohere also aggressively advertises that they want you to fine-tune and co-develop custom models (with their proprietary services).</div><br/><div id="40519914" class="c"><input type="checkbox" id="c-40519914" checked=""/><div class="controls bullet"><span class="by">nostrebored</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40519747">parent</a><span>|</span><a href="#40517043">next</a><span>|</span><label class="collapse" for="c-40519914">[-]</label><label class="expand" for="c-40519914">[1 more]</label></div><br/><div class="children"><div class="content">But this is the GPs point — that doesn’t mean they’re optimized for retrieval.</div><br/></div></div></div></div><div id="40517043" class="c"><input type="checkbox" id="c-40517043" checked=""/><div class="controls bullet"><span class="by">bunderbunder</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40516629">parent</a><span>|</span><a href="#40519747">prev</a><span>|</span><a href="#40515262">next</a><span>|</span><label class="collapse" for="c-40517043">[-]</label><label class="expand" for="c-40517043">[1 more]</label></div><br/><div class="children"><div class="content">You probably won&#x27;t find out exactly what they&#x27;re doing any more than anyone&#x27;s going to find out a whole lot of details on what OpenAI is doing with GPT. But, as the popularity of GPT demonstrates, it seems that many business customers are now comfortable embracing closed models.<p>There is more information here, though: <a href="https:&#x2F;&#x2F;cohere.com&#x2F;blog&#x2F;introducing-embed-v3" rel="nofollow">https:&#x2F;&#x2F;cohere.com&#x2F;blog&#x2F;introducing-embed-v3</a></div><br/></div></div></div></div></div></div><div id="40515262" class="c"><input type="checkbox" id="c-40515262" checked=""/><div class="controls bullet"><span class="by">gfourfour</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40514831">parent</a><span>|</span><a href="#40515145">prev</a><span>|</span><a href="#40517884">next</a><span>|</span><label class="collapse" for="c-40515262">[-]</label><label class="expand" for="c-40515262">[3 more]</label></div><br/><div class="children"><div class="content">Ah didn’t realize it was every language. Yes I’m using a light weight open model - but also my use case doesn’t require anything super heavy weight. Wikipedia articles are very feature-dense and differentiable from one another. It doesn’t require a massive feature vector to create meaningful embeddings.</div><br/><div id="40515431" class="c"><input type="checkbox" id="c-40515431" checked=""/><div class="controls bullet"><span class="by">tjake</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40515262">parent</a><span>|</span><a href="#40517884">next</a><span>|</span><label class="collapse" for="c-40515431">[-]</label><label class="expand" for="c-40515431">[2 more]</label></div><br/><div class="children"><div class="content">it&#x27;s 35M 1024 vectors Plus the text</div><br/><div id="40517145" class="c"><input type="checkbox" id="c-40517145" checked=""/><div class="controls bullet"><span class="by">gfourfour</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40515431">parent</a><span>|</span><a href="#40517884">next</a><span>|</span><label class="collapse" for="c-40517145">[-]</label><label class="expand" for="c-40517145">[1 more]</label></div><br/><div class="children"><div class="content">Still, $5000 is kind of insane. That makes no sense to me.</div><br/></div></div></div></div></div></div><div id="40517884" class="c"><input type="checkbox" id="c-40517884" checked=""/><div class="controls bullet"><span class="by">janalsncm</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40514831">parent</a><span>|</span><a href="#40515262">prev</a><span>|</span><a href="#40514761">next</a><span>|</span><label class="collapse" for="c-40517884">[-]</label><label class="expand" for="c-40517884">[3 more]</label></div><br/><div class="children"><div class="content">I also don’t quite understand the value of embedding all languages into the same database. If I search for “dog” do I really need to see the same article 300 times?<p>As a first step they are using PQ anyways. It seems natural to just assume all English docs have the same centroid and search that subspace with hnswlib.</div><br/><div id="40517907" class="c"><input type="checkbox" id="c-40517907" checked=""/><div class="controls bullet"><span class="by">jbellis</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40517884">parent</a><span>|</span><a href="#40514761">next</a><span>|</span><label class="collapse" for="c-40517907">[-]</label><label class="expand" for="c-40517907">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s split by language.  TFA builds an index on the English language subset.</div><br/><div id="40517933" class="c"><input type="checkbox" id="c-40517933" checked=""/><div class="controls bullet"><span class="by">janalsncm</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40517907">parent</a><span>|</span><a href="#40514761">next</a><span>|</span><label class="collapse" for="c-40517933">[-]</label><label class="expand" for="c-40517933">[1 more]</label></div><br/><div class="children"><div class="content">Ah, missed that.</div><br/></div></div></div></div></div></div></div></div><div id="40514761" class="c"><input type="checkbox" id="c-40514761" checked=""/><div class="controls bullet"><span class="by">hivacruz</span><span>|</span><a href="#40514671">parent</a><span>|</span><a href="#40514831">prev</a><span>|</span><a href="#40516452">next</a><span>|</span><label class="collapse" for="c-40514761">[-]</label><label class="expand" for="c-40514761">[7 more]</label></div><br/><div class="children"><div class="content">Did you do use the same method, i.e. split by chunks each article and vectorize each chunk?</div><br/><div id="40515149" class="c"><input type="checkbox" id="c-40515149" checked=""/><div class="controls bullet"><span class="by">dudus</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40514761">parent</a><span>|</span><a href="#40514777">next</a><span>|</span><label class="collapse" for="c-40515149">[-]</label><label class="expand" for="c-40515149">[5 more]</label></div><br/><div class="children"><div class="content">That&#x27;s the only way to do it. You can&#x27;t index the whole thing. The challenge is chunking. There are several different algorithms to chunk content for vectorization with different pros and cons.</div><br/><div id="40515454" class="c"><input type="checkbox" id="c-40515454" checked=""/><div class="controls bullet"><span class="by">minimaxir</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40515149">parent</a><span>|</span><a href="#40514777">next</a><span>|</span><label class="collapse" for="c-40515454">[-]</label><label class="expand" for="c-40515454">[4 more]</label></div><br/><div class="children"><div class="content">You can do much bigger chunks with models that support RoPE embeddings, such as nomic-embed-text-1.5 which has a 8192 context length: <a href="https:&#x2F;&#x2F;huggingface.co&#x2F;nomic-ai&#x2F;nomic-embed-text-v1.5" rel="nofollow">https:&#x2F;&#x2F;huggingface.co&#x2F;nomic-ai&#x2F;nomic-embed-text-v1.5</a><p>In theory this would be an efficiency boost but the performance math can be tricky.</div><br/><div id="40516524" class="c"><input type="checkbox" id="c-40516524" checked=""/><div class="controls bullet"><span class="by">qudat</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40515454">parent</a><span>|</span><a href="#40516587">next</a><span>|</span><label class="collapse" for="c-40516524">[-]</label><label class="expand" for="c-40516524">[1 more]</label></div><br/><div class="children"><div class="content">As far as I understand it, context length degrades llm performance, so just because an llm &quot;supports&quot; a large context length it basically just clips a top and bottom chunk and skips over the middle bits.</div><br/></div></div><div id="40516587" class="c"><input type="checkbox" id="c-40516587" checked=""/><div class="controls bullet"><span class="by">rahimnathwani</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40515454">parent</a><span>|</span><a href="#40516524">prev</a><span>|</span><a href="#40514777">next</a><span>|</span><label class="collapse" for="c-40516587">[-]</label><label class="expand" for="c-40516587">[2 more]</label></div><br/><div class="children"><div class="content">Why would you want chunks that big for vector search? Wouldn&#x27;t there be too much information in each chunk, making it harder to match a query to a concept within the chunk?</div><br/><div id="40519928" class="c"><input type="checkbox" id="c-40519928" checked=""/><div class="controls bullet"><span class="by">nostrebored</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40516587">parent</a><span>|</span><a href="#40514777">next</a><span>|</span><label class="collapse" for="c-40519928">[-]</label><label class="expand" for="c-40519928">[1 more]</label></div><br/><div class="children"><div class="content">The problem is that often semantic meaning depends on state multiple paragraphs or sections away.<p>This is a coarse way to tackle that</div><br/></div></div></div></div></div></div></div></div><div id="40514777" class="c"><input type="checkbox" id="c-40514777" checked=""/><div class="controls bullet"><span class="by">gfourfour</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40514761">parent</a><span>|</span><a href="#40515149">prev</a><span>|</span><a href="#40516452">next</a><span>|</span><label class="collapse" for="c-40514777">[-]</label><label class="expand" for="c-40514777">[1 more]</label></div><br/><div class="children"><div class="content">Yes</div><br/></div></div></div></div><div id="40516452" class="c"><input type="checkbox" id="c-40516452" checked=""/><div class="controls bullet"><span class="by">janalsncm</span><span>|</span><a href="#40514671">parent</a><span>|</span><a href="#40514761">prev</a><span>|</span><a href="#40517608">next</a><span>|</span><label class="collapse" for="c-40516452">[-]</label><label class="expand" for="c-40516452">[2 more]</label></div><br/><div class="children"><div class="content">Also, if you’re spending $5000 to compute embeddings, why are you indexing them on a laptop?</div><br/><div id="40517122" class="c"><input type="checkbox" id="c-40517122" checked=""/><div class="controls bullet"><span class="by">syllogistic</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40516452">parent</a><span>|</span><a href="#40517608">next</a><span>|</span><label class="collapse" for="c-40517122">[-]</label><label class="expand" for="c-40517122">[1 more]</label></div><br/><div class="children"><div class="content">He&#x27;s not though because cohere stuck the already embedded dataset on huggingface <a href="https:&#x2F;&#x2F;huggingface.co&#x2F;datasets&#x2F;Cohere&#x2F;wikipedia-22-12-en-embeddings" rel="nofollow">https:&#x2F;&#x2F;huggingface.co&#x2F;datasets&#x2F;Cohere&#x2F;wikipedia-22-12-en-em...</a></div><br/></div></div></div></div><div id="40517608" class="c"><input type="checkbox" id="c-40517608" checked=""/><div class="controls bullet"><span class="by">bytearray</span><span>|</span><a href="#40514671">parent</a><span>|</span><a href="#40516452">prev</a><span>|</span><a href="#40514675">next</a><span>|</span><label class="collapse" for="c-40517608">[-]</label><label class="expand" for="c-40517608">[2 more]</label></div><br/><div class="children"><div class="content">Do you have a link to the notebook?</div><br/><div id="40518821" class="c"><input type="checkbox" id="c-40518821" checked=""/><div class="controls bullet"><span class="by">gfourfour</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40517608">parent</a><span>|</span><a href="#40514675">next</a><span>|</span><label class="collapse" for="c-40518821">[-]</label><label class="expand" for="c-40518821">[1 more]</label></div><br/><div class="children"><div class="content">No haha just a rats nest of a bunch of notebooks</div><br/></div></div></div></div><div id="40514675" class="c"><input type="checkbox" id="c-40514675" checked=""/><div class="controls bullet"><span class="by">emmelaich</span><span>|</span><a href="#40514671">parent</a><span>|</span><a href="#40517608">prev</a><span>|</span><a href="#40514803">next</a><span>|</span><label class="collapse" for="c-40514675">[-]</label><label class="expand" for="c-40514675">[13 more]</label></div><br/><div class="children"><div class="content">Got any details?</div><br/><div id="40514827" class="c"><input type="checkbox" id="c-40514827" checked=""/><div class="controls bullet"><span class="by">gfourfour</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40514675">parent</a><span>|</span><a href="#40514803">next</a><span>|</span><label class="collapse" for="c-40514827">[-]</label><label class="expand" for="c-40514827">[12 more]</label></div><br/><div class="children"><div class="content">Nothing too crazy, just downloading a dump, splitting it into manageable batch sizes, and using a lightweight embedding model to vectorize each article. 
Using the best GPU available on colab it takes maybe 8 hours if I remember correctly? Vectors can be saved as NPY files and loaded into something like FAISS for fast querying.</div><br/><div id="40515457" class="c"><input type="checkbox" id="c-40515457" checked=""/><div class="controls bullet"><span class="by">abetusk</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40514827">parent</a><span>|</span><a href="#40516918">next</a><span>|</span><label class="collapse" for="c-40515457">[-]</label><label class="expand" for="c-40515457">[3 more]</label></div><br/><div class="children"><div class="content">This probably deserves its own article and might be of interest to the HN community.</div><br/><div id="40517080" class="c"><input type="checkbox" id="c-40517080" checked=""/><div class="controls bullet"><span class="by">gfourfour</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40515457">parent</a><span>|</span><a href="#40516918">next</a><span>|</span><label class="collapse" for="c-40517080">[-]</label><label class="expand" for="c-40517080">[2 more]</label></div><br/><div class="children"><div class="content">I will probably make a post when I launch my app! For now I’m trying to figure out how I can host the whole system for cheap because I don’t anticipate generating much revenue</div><br/><div id="40520320" class="c"><input type="checkbox" id="c-40520320" checked=""/><div class="controls bullet"><span class="by">solarengineer</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40517080">parent</a><span>|</span><a href="#40516918">next</a><span>|</span><label class="collapse" for="c-40520320">[-]</label><label class="expand" for="c-40520320">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m interested in hearing about what you will be hosting.<p>Would Digital Ocean or Hetzner meet your needs?</div><br/></div></div></div></div></div></div><div id="40516918" class="c"><input type="checkbox" id="c-40516918" checked=""/><div class="controls bullet"><span class="by">thomasfromcdnjs</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40514827">parent</a><span>|</span><a href="#40515457">prev</a><span>|</span><a href="#40515022">next</a><span>|</span><label class="collapse" for="c-40516918">[-]</label><label class="expand" for="c-40516918">[4 more]</label></div><br/><div class="children"><div class="content">Did you chunk the articles? If so, in what way?</div><br/><div id="40517134" class="c"><input type="checkbox" id="c-40517134" checked=""/><div class="controls bullet"><span class="by">gfourfour</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40516918">parent</a><span>|</span><a href="#40515022">next</a><span>|</span><label class="collapse" for="c-40517134">[-]</label><label class="expand" for="c-40517134">[3 more]</label></div><br/><div class="children"><div class="content">Yes. I split the text into sentence and append sentences to a chunk until the max context window is reached. The context window size is dynamic for each article so that each chunk is roughly the same size. Then I just do a mean pool of the chunks for each article.</div><br/><div id="40517307" class="c"><input type="checkbox" id="c-40517307" checked=""/><div class="controls bullet"><span class="by">thomasfromcdnjs</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40517134">parent</a><span>|</span><a href="#40515022">next</a><span>|</span><label class="collapse" for="c-40517307">[-]</label><label class="expand" for="c-40517307">[2 more]</label></div><br/><div class="children"><div class="content">Thanks for the answer.<p>Wikipedia has a lot of tables so I was wondering if content-aware sentence chunking would be good enough for Wikipedia.<p><a href="https:&#x2F;&#x2F;www.pinecone.io&#x2F;learn&#x2F;chunking-strategies&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.pinecone.io&#x2F;learn&#x2F;chunking-strategies&#x2F;</a></div><br/><div id="40518303" class="c"><input type="checkbox" id="c-40518303" checked=""/><div class="controls bullet"><span class="by">gfourfour</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40517307">parent</a><span>|</span><a href="#40515022">next</a><span>|</span><label class="collapse" for="c-40518303">[-]</label><label class="expand" for="c-40518303">[1 more]</label></div><br/><div class="children"><div class="content">mwparserfromhell can parse the text content without including tables</div><br/></div></div></div></div></div></div></div></div><div id="40515022" class="c"><input type="checkbox" id="c-40515022" checked=""/><div class="controls bullet"><span class="by">j0hnyl</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40514827">parent</a><span>|</span><a href="#40516918">prev</a><span>|</span><a href="#40516336">next</a><span>|</span><label class="collapse" for="c-40515022">[-]</label><label class="expand" for="c-40515022">[2 more]</label></div><br/><div class="children"><div class="content">How big is the resulting vector data?</div><br/><div id="40515272" class="c"><input type="checkbox" id="c-40515272" checked=""/><div class="controls bullet"><span class="by">gfourfour</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40515022">parent</a><span>|</span><a href="#40516336">next</a><span>|</span><label class="collapse" for="c-40515272">[-]</label><label class="expand" for="c-40515272">[1 more]</label></div><br/><div class="children"><div class="content">Like 8 gb roughly</div><br/></div></div></div></div><div id="40516336" class="c"><input type="checkbox" id="c-40516336" checked=""/><div class="controls bullet"><span class="by">riku_iki</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40514827">parent</a><span>|</span><a href="#40515022">prev</a><span>|</span><a href="#40514803">next</a><span>|</span><label class="collapse" for="c-40516336">[-]</label><label class="expand" for="c-40516336">[2 more]</label></div><br/><div class="children"><div class="content">What is the end task(e.g. RAG, or just vector search for question answering), are you satisfied with results in terms of quality?</div><br/><div id="40517094" class="c"><input type="checkbox" id="c-40517094" checked=""/><div class="controls bullet"><span class="by">gfourfour</span><span>|</span><a href="#40514671">root</a><span>|</span><a href="#40516336">parent</a><span>|</span><a href="#40514803">next</a><span>|</span><label class="collapse" for="c-40517094">[-]</label><label class="expand" for="c-40517094">[1 more]</label></div><br/><div class="children"><div class="content">The end result is a recommendation algorithm, so basically just vector similarity search (with a bunch of other logic too ofc). The quality is great, and if anything a little bit of underfitting is desirable to avoid the “we see you bought a toilet seat, here’s 50 other toilet seats you might like” effect.</div><br/></div></div></div></div></div></div></div></div><div id="40514803" class="c"><input type="checkbox" id="c-40514803" checked=""/><div class="controls bullet"><span class="by">DataDaemon</span><span>|</span><a href="#40514671">parent</a><span>|</span><a href="#40514675">prev</a><span>|</span><a href="#40518910">next</a><span>|</span><label class="collapse" for="c-40514803">[-]</label><label class="expand" for="c-40514803">[1 more]</label></div><br/><div class="children"><div class="content">How?</div><br/></div></div></div></div><div id="40518910" class="c"><input type="checkbox" id="c-40518910" checked=""/><div class="controls bullet"><span class="by">burgerrito</span><span>|</span><a href="#40514671">prev</a><span>|</span><a href="#40521090">next</a><span>|</span><label class="collapse" for="c-40518910">[-]</label><label class="expand" for="c-40518910">[1 more]</label></div><br/><div class="children"><div class="content">I made a side project that uses Wikipedia recently too, and found out that there are database dump available to be downloaded: <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Wikipedia:Database_download" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Wikipedia:Database_download</a></div><br/></div></div><div id="40521090" class="c"><input type="checkbox" id="c-40521090" checked=""/><div class="controls bullet"><span class="by">noufalibrahim</span><span>|</span><a href="#40518910">prev</a><span>|</span><a href="#40515462">next</a><span>|</span><label class="collapse" for="c-40521090">[-]</label><label class="expand" for="c-40521090">[3 more]</label></div><br/><div class="children"><div class="content">What are the good solutions in this space? Vector databases I mean. Mostly for semantic search across various texts.<p>I have a few projects I&#x27;d like to work on. For typical web projects, I have a &quot;go to&quot; stack and I&#x27;d like to add something sensible for vector based search to that.</div><br/><div id="40521423" class="c"><input type="checkbox" id="c-40521423" checked=""/><div class="controls bullet"><span class="by">jbellis</span><span>|</span><a href="#40521090">parent</a><span>|</span><a href="#40521108">next</a><span>|</span><label class="collapse" for="c-40521423">[-]</label><label class="expand" for="c-40521423">[1 more]</label></div><br/><div class="children"><div class="content">JVector (the index used in TFA) is available as a service with a friendly API from DataStax. <a href="https:&#x2F;&#x2F;www.datastax.com&#x2F;products&#x2F;datastax-astra" rel="nofollow">https:&#x2F;&#x2F;www.datastax.com&#x2F;products&#x2F;datastax-astra</a><p>[article author, I work on JVector and Astra]</div><br/></div></div><div id="40521108" class="c"><input type="checkbox" id="c-40521108" checked=""/><div class="controls bullet"><span class="by">StrauXX</span><span>|</span><a href="#40521090">parent</a><span>|</span><a href="#40521423">prev</a><span>|</span><a href="#40515462">next</a><span>|</span><label class="collapse" for="c-40521108">[-]</label><label class="expand" for="c-40521108">[1 more]</label></div><br/><div class="children"><div class="content">In my experience its usually easiest to use a vector store extension for an off-the-shelf database like postgres (pgvector is nice). That way you don&#x27;t have to manage another, rapidly changing, service and you can easily combine queries on the vectors with regular columns, join them and so on.</div><br/></div></div></div></div><div id="40515462" class="c"><input type="checkbox" id="c-40515462" checked=""/><div class="controls bullet"><span class="by">tjake</span><span>|</span><a href="#40521090">prev</a><span>|</span><a href="#40515826">next</a><span>|</span><label class="collapse" for="c-40515462">[-]</label><label class="expand" for="c-40515462">[6 more]</label></div><br/><div class="children"><div class="content">You can demo this here: <a href="https:&#x2F;&#x2F;jvectordemo.com:8443&#x2F;" rel="nofollow">https:&#x2F;&#x2F;jvectordemo.com:8443&#x2F;</a><p>GH Project: <a href="https:&#x2F;&#x2F;github.com&#x2F;jbellis&#x2F;jvector">https:&#x2F;&#x2F;github.com&#x2F;jbellis&#x2F;jvector</a></div><br/><div id="40515693" class="c"><input type="checkbox" id="c-40515693" checked=""/><div class="controls bullet"><span class="by">jbellis</span><span>|</span><a href="#40515462">parent</a><span>|</span><a href="#40517296">next</a><span>|</span><label class="collapse" for="c-40515693">[-]</label><label class="expand" for="c-40515693">[1 more]</label></div><br/><div class="children"><div class="content">[article author]<p>The source to build and serve the index are at <a href="https:&#x2F;&#x2F;github.com&#x2F;jbellis&#x2F;coherepedia-jvector">https:&#x2F;&#x2F;github.com&#x2F;jbellis&#x2F;coherepedia-jvector</a></div><br/></div></div><div id="40517296" class="c"><input type="checkbox" id="c-40517296" checked=""/><div class="controls bullet"><span class="by">xandrius</span><span>|</span><a href="#40515462">parent</a><span>|</span><a href="#40515693">prev</a><span>|</span><a href="#40517625">next</a><span>|</span><label class="collapse" for="c-40517296">[-]</label><label class="expand" for="c-40517296">[3 more]</label></div><br/><div class="children"><div class="content">Internal sever error :(</div><br/><div id="40517801" class="c"><input type="checkbox" id="c-40517801" checked=""/><div class="controls bullet"><span class="by">jbellis</span><span>|</span><a href="#40515462">root</a><span>|</span><a href="#40517296">parent</a><span>|</span><a href="#40517632">next</a><span>|</span><label class="collapse" for="c-40517801">[-]</label><label class="expand" for="c-40517801">[1 more]</label></div><br/><div class="children"><div class="content">Oops, HN maxed out the free Cohere API key it was using.  Fixed.</div><br/></div></div><div id="40517632" class="c"><input type="checkbox" id="c-40517632" checked=""/><div class="controls bullet"><span class="by">bytearray</span><span>|</span><a href="#40515462">root</a><span>|</span><a href="#40517296">parent</a><span>|</span><a href="#40517801">prev</a><span>|</span><a href="#40517625">next</a><span>|</span><label class="collapse" for="c-40517632">[-]</label><label class="expand" for="c-40517632">[1 more]</label></div><br/><div class="children"><div class="content">Same.</div><br/></div></div></div></div></div></div><div id="40515826" class="c"><input type="checkbox" id="c-40515826" checked=""/><div class="controls bullet"><span class="by">isoprophlex</span><span>|</span><a href="#40515462">prev</a><span>|</span><a href="#40517872">next</a><span>|</span><label class="collapse" for="c-40515826">[-]</label><label class="expand" for="c-40515826">[2 more]</label></div><br/><div class="children"><div class="content">$5000?! I indexed all of HN for ... $50 I think. And that&#x27;s tens of millions of posts.</div><br/><div id="40517289" class="c"><input type="checkbox" id="c-40517289" checked=""/><div class="controls bullet"><span class="by">xandrius</span><span>|</span><a href="#40515826">parent</a><span>|</span><a href="#40517872">next</a><span>|</span><label class="collapse" for="c-40517289">[-]</label><label class="expand" for="c-40517289">[1 more]</label></div><br/><div class="children"><div class="content">To be fair Wikipedia has over 60 million pages and this is for 300+ languages. But yeah, the value shows that they might not be using the cheapest service out there.</div><br/></div></div></div></div><div id="40517872" class="c"><input type="checkbox" id="c-40517872" checked=""/><div class="controls bullet"><span class="by">jl6</span><span>|</span><a href="#40515826">prev</a><span>|</span><a href="#40518480">next</a><span>|</span><label class="collapse" for="c-40517872">[-]</label><label class="expand" for="c-40517872">[3 more]</label></div><br/><div class="children"><div class="content">The source files appear to include pages from all namespaces, which is good, because a lot of the value of Wikipedia articles is held in the talk page discussions, and these sometimes get stripped from projects that use Wikipedia dumps.</div><br/><div id="40517911" class="c"><input type="checkbox" id="c-40517911" checked=""/><div class="controls bullet"><span class="by">worldsayshi</span><span>|</span><a href="#40517872">parent</a><span>|</span><a href="#40518480">next</a><span>|</span><label class="collapse" for="c-40517911">[-]</label><label class="expand" for="c-40517911">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;m curious what the main value you see in the talk pages? I almost never look at them myself.</div><br/><div id="40517950" class="c"><input type="checkbox" id="c-40517950" checked=""/><div class="controls bullet"><span class="by">jl6</span><span>|</span><a href="#40517872">root</a><span>|</span><a href="#40517911">parent</a><span>|</span><a href="#40518480">next</a><span>|</span><label class="collapse" for="c-40517950">[-]</label><label class="expand" for="c-40517950">[1 more]</label></div><br/><div class="children"><div class="content">They’re not so interesting for mundane topics, but for anything remotely controversial, they are essential for understanding what perspectives <i>aren’t</i> included in the article.</div><br/></div></div></div></div></div></div><div id="40518480" class="c"><input type="checkbox" id="c-40518480" checked=""/><div class="controls bullet"><span class="by">HammadB</span><span>|</span><a href="#40517872">prev</a><span>|</span><a href="#40519896">next</a><span>|</span><label class="collapse" for="c-40518480">[-]</label><label class="expand" for="c-40518480">[6 more]</label></div><br/><div class="children"><div class="content">&quot;The obstacle is that until now, off-the-shelf vector databases could not index a dataset larger than memory, because both the full-resolution vectors and the index (edge list) needed to be kept in memory during index construction.  Larger datasets could be split into segments, but this means that at query time they need to search each segment separately, then combine the results, turning an O(log N) search per segment into O(N) overall.&quot;<p>How is a log N search over S segments O(N)?</div><br/><div id="40519198" class="c"><input type="checkbox" id="c-40519198" checked=""/><div class="controls bullet"><span class="by">jbellis</span><span>|</span><a href="#40518480">parent</a><span>|</span><a href="#40518546">next</a><span>|</span><label class="collapse" for="c-40519198">[-]</label><label class="expand" for="c-40519198">[4 more]</label></div><br/><div class="children"><div class="content">I was trying to make the point that the dominant factor becomes linear instead of logarithmic, but more accurately it&#x27;s O(S log N) = O(N log N) because S is proportional to N.</div><br/><div id="40520419" class="c"><input type="checkbox" id="c-40520419" checked=""/><div class="controls bullet"><span class="by">HammadB</span><span>|</span><a href="#40518480">root</a><span>|</span><a href="#40519198">parent</a><span>|</span><a href="#40520264">next</a><span>|</span><label class="collapse" for="c-40520419">[-]</label><label class="expand" for="c-40520419">[2 more]</label></div><br/><div class="children"><div class="content">Sure, I see. I think this is an area where complexity analysis doesn’t lead to useful information.<p>To be more correct it’s O(N&#x2F;C log C) where C is the capacity of a segment. In this case you can ignore 1&#x2F;C and log C as constant. So now sure, you actually just have O(N). But this is not super useful as it says that a segmented hnsw approach and brute force approach are the same - when this is really not the case in practice.<p>Also O(N log N) &gt; O(N) so I’m not sure why we would ever do anything with segmentation according to that analysis if it were correct.</div><br/><div id="40521435" class="c"><input type="checkbox" id="c-40521435" checked=""/><div class="controls bullet"><span class="by">jbellis</span><span>|</span><a href="#40518480">root</a><span>|</span><a href="#40520419">parent</a><span>|</span><a href="#40520264">next</a><span>|</span><label class="collapse" for="c-40521435">[-]</label><label class="expand" for="c-40521435">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I’m not sure why we would ever do anything with segmentation according to that analysis if it were correct.<p>What&#x27;s your alternative when you can&#x27;t build an index larger than C?</div><br/></div></div></div></div></div></div><div id="40518546" class="c"><input type="checkbox" id="c-40518546" checked=""/><div class="controls bullet"><span class="by">thfuran</span><span>|</span><a href="#40518480">parent</a><span>|</span><a href="#40519198">prev</a><span>|</span><a href="#40519896">next</a><span>|</span><label class="collapse" for="c-40518546">[-]</label><label class="expand" for="c-40518546">[1 more]</label></div><br/><div class="children"><div class="content">Doesn&#x27;t doubling N double S?</div><br/></div></div></div></div><div id="40519896" class="c"><input type="checkbox" id="c-40519896" checked=""/><div class="controls bullet"><span class="by">opdahl</span><span>|</span><a href="#40518480">prev</a><span>|</span><a href="#40516901">next</a><span>|</span><label class="collapse" for="c-40519896">[-]</label><label class="expand" for="c-40519896">[1 more]</label></div><br/><div class="children"><div class="content">Would be interesting if you could try implementing the Cohere Reranker into this. Should be fairly easy, and could lead to quite a bit of performance gain.</div><br/></div></div><div id="40516901" class="c"><input type="checkbox" id="c-40516901" checked=""/><div class="controls bullet"><span class="by">localhost</span><span>|</span><a href="#40519896">prev</a><span>|</span><a href="#40515652">next</a><span>|</span><label class="collapse" for="c-40516901">[-]</label><label class="expand" for="c-40516901">[1 more]</label></div><br/><div class="children"><div class="content">This is a giant dataset of 536GB of embeddings. I wonder how much compression is possible by training or fine-tuning a transformer model directly using these embeddings, i.e., no tokenization&#x2F;decoding steps? Could a 7B or 14B model &quot;memorize&quot; Wikipedia?</div><br/></div></div><div id="40515652" class="c"><input type="checkbox" id="c-40515652" checked=""/><div class="controls bullet"><span class="by">hot_gril</span><span>|</span><a href="#40516901">prev</a><span>|</span><a href="#40517169">next</a><span>|</span><label class="collapse" for="c-40515652">[-]</label><label class="expand" for="c-40515652">[5 more]</label></div><br/><div class="children"><div class="content">How many dimensions are in the original vectors? Something in the millions?</div><br/><div id="40515666" class="c"><input type="checkbox" id="c-40515666" checked=""/><div class="controls bullet"><span class="by">jbellis</span><span>|</span><a href="#40515652">parent</a><span>|</span><a href="#40517169">next</a><span>|</span><label class="collapse" for="c-40515666">[-]</label><label class="expand" for="c-40515666">[4 more]</label></div><br/><div class="children"><div class="content">1024 per vector x 41M vectors</div><br/><div id="40516129" class="c"><input type="checkbox" id="c-40516129" checked=""/><div class="controls bullet"><span class="by">hot_gril</span><span>|</span><a href="#40515652">root</a><span>|</span><a href="#40515666">parent</a><span>|</span><a href="#40517169">next</a><span>|</span><label class="collapse" for="c-40516129">[-]</label><label class="expand" for="c-40516129">[3 more]</label></div><br/><div class="children"><div class="content">1024-dim vectors would fit into pgvector in Postgres, which can do cosine similarity indexing and doesn&#x27;t require everything to fit into memory. Wonder how the performance of that would compare to this.</div><br/><div id="40516422" class="c"><input type="checkbox" id="c-40516422" checked=""/><div class="controls bullet"><span class="by">jbellis</span><span>|</span><a href="#40515652">root</a><span>|</span><a href="#40516129">parent</a><span>|</span><a href="#40517169">next</a><span>|</span><label class="collapse" for="c-40516422">[-]</label><label class="expand" for="c-40516422">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s been a while since I read the source to pgvector but at the time it was a straightforward HNSW implementation that implicitly assumes your index fits in page cache.  Once that&#x27;s not true, your search performance will fall off a cliff.  Which in turn means your insert performance also hits a wall since each new vector requires a search.<p>I haven&#x27;t seen any news that indicates this has changed, but by all means give it a try!</div><br/><div id="40516527" class="c"><input type="checkbox" id="c-40516527" checked=""/><div class="controls bullet"><span class="by">hot_gril</span><span>|</span><a href="#40515652">root</a><span>|</span><a href="#40516422">parent</a><span>|</span><a href="#40517169">next</a><span>|</span><label class="collapse" for="c-40516527">[-]</label><label class="expand" for="c-40516527">[1 more]</label></div><br/><div class="children"><div class="content">Thanks, I didn&#x27;t know that. Last time I was dealing with these kinds of problems, pgvector didn&#x27;t exist yet.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="40517169" class="c"><input type="checkbox" id="c-40517169" checked=""/><div class="controls bullet"><span class="by">arnaudsm</span><span>|</span><a href="#40515652">prev</a><span>|</span><a href="#40515545">next</a><span>|</span><label class="collapse" for="c-40517169">[-]</label><label class="expand" for="c-40517169">[2 more]</label></div><br/><div class="children"><div class="content">In expert topics, is vector search finally competitive with BM25-like algorithms? Or do we still need to mix the 2 together ?</div><br/><div id="40517975" class="c"><input type="checkbox" id="c-40517975" checked=""/><div class="controls bullet"><span class="by">jbellis</span><span>|</span><a href="#40517169">parent</a><span>|</span><a href="#40515545">next</a><span>|</span><label class="collapse" for="c-40517975">[-]</label><label class="expand" for="c-40517975">[1 more]</label></div><br/><div class="children"><div class="content">ColBERT gives you best of both worlds.<p><a href="https:&#x2F;&#x2F;arxiv.org&#x2F;abs&#x2F;2004.12832" rel="nofollow">https:&#x2F;&#x2F;arxiv.org&#x2F;abs&#x2F;2004.12832</a><p><a href="https:&#x2F;&#x2F;thenewstack.io&#x2F;overcoming-the-limits-of-rag-with-colbert&#x2F;" rel="nofollow">https:&#x2F;&#x2F;thenewstack.io&#x2F;overcoming-the-limits-of-rag-with-col...</a></div><br/></div></div></div></div><div id="40517929" class="c"><input type="checkbox" id="c-40517929" checked=""/><div class="controls bullet"><span class="by">lilatree</span><span>|</span><a href="#40515545">prev</a><span>|</span><a href="#40517221">next</a><span>|</span><label class="collapse" for="c-40517929">[-]</label><label class="expand" for="c-40517929">[3 more]</label></div><br/><div class="children"><div class="content">“… turning an O(log N) search per segment into O(N) overall.”<p>Can someone explain why?</div><br/><div id="40518523" class="c"><input type="checkbox" id="c-40518523" checked=""/><div class="controls bullet"><span class="by">StrangeDoctor</span><span>|</span><a href="#40517929">parent</a><span>|</span><a href="#40517221">next</a><span>|</span><label class="collapse" for="c-40518523">[-]</label><label class="expand" for="c-40518523">[2 more]</label></div><br/><div class="children"><div class="content">When it’s all in memory you get to amortize the cost of the initial load. Or just pay it when it’s not part of the hot path. When it’s segmented, you’re doing that because memory is full and you need to read in all the segments you don’t have. That’ll completely overwhelm the log n of the search you still get</div><br/><div id="40519253" class="c"><input type="checkbox" id="c-40519253" checked=""/><div class="controls bullet"><span class="by">jbellis</span><span>|</span><a href="#40517929">root</a><span>|</span><a href="#40518523">parent</a><span>|</span><a href="#40517221">next</a><span>|</span><label class="collapse" for="c-40519253">[-]</label><label class="expand" for="c-40519253">[1 more]</label></div><br/><div class="children"><div class="content">I was trying to make the point that the dominant factor becomes linear instead of logarithmic, but more accurately it&#x27;s O(S log N) = O(N log N) because S (number of segments) is proportional to N (number of vectors).</div><br/></div></div></div></div></div></div><div id="40517221" class="c"><input type="checkbox" id="c-40517221" checked=""/><div class="controls bullet"><span class="by">danaugrs</span><span>|</span><a href="#40517929">prev</a><span>|</span><a href="#40520000">next</a><span>|</span><label class="collapse" for="c-40517221">[-]</label><label class="expand" for="c-40517221">[1 more]</label></div><br/><div class="children"><div class="content">Loosely related: <a href="https:&#x2F;&#x2F;www.quantamagazine.org&#x2F;computer-scientists-invent-an-efficient-new-way-to-count-20240516&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.quantamagazine.org&#x2F;computer-scientists-invent-an...</a></div><br/></div></div><div id="40520000" class="c"><input type="checkbox" id="c-40520000" checked=""/><div class="controls bullet"><span class="by">issafram</span><span>|</span><a href="#40517221">prev</a><span>|</span><a href="#40519563">next</a><span>|</span><label class="collapse" for="c-40520000">[-]</label><label class="expand" for="c-40520000">[2 more]</label></div><br/><div class="children"><div class="content">Would a docker container help running it on Windows?</div><br/><div id="40520044" class="c"><input type="checkbox" id="c-40520044" checked=""/><div class="controls bullet"><span class="by">cosmojg</span><span>|</span><a href="#40520000">parent</a><span>|</span><a href="#40519563">next</a><span>|</span><label class="collapse" for="c-40520044">[-]</label><label class="expand" for="c-40520044">[1 more]</label></div><br/><div class="children"><div class="content">Just use WSL. Or dual boot.</div><br/></div></div></div></div><div id="40519563" class="c"><input type="checkbox" id="c-40519563" checked=""/><div class="controls bullet"><span class="by">Khelavaster</span><span>|</span><a href="#40520000">prev</a><span>|</span><a href="#40514810">next</a><span>|</span><label class="collapse" for="c-40519563">[-]</label><label class="expand" for="c-40519563">[1 more]</label></div><br/><div class="children"><div class="content">This is how Microsoft powered it&#x27;s academic paper search in 2016, before rolling it into Bing in 2020!</div><br/></div></div><div id="40514810" class="c"><input type="checkbox" id="c-40514810" checked=""/><div class="controls bullet"><span class="by">traverseda</span><span>|</span><a href="#40519563">prev</a><span>|</span><a href="#40518878">next</a><span>|</span><label class="collapse" for="c-40514810">[-]</label><label class="expand" for="c-40514810">[30 more]</label></div><br/><div class="children"><div class="content">&gt;Disable swap before building the index.  Linux will aggressively try to cache the index being constructed to the point of swapping out parts of the JVM heap, which is obviously counterproductive.  In my test, building with swap enabled was almost twice as slow as with it off.<p>This is an indication to me that something has gone very wrong in your code base.</div><br/><div id="40515720" class="c"><input type="checkbox" id="c-40515720" checked=""/><div class="controls bullet"><span class="by">nisa</span><span>|</span><a href="#40514810">parent</a><span>|</span><a href="#40515844">next</a><span>|</span><label class="collapse" for="c-40515720">[-]</label><label class="expand" for="c-40515720">[7 more]</label></div><br/><div class="children"><div class="content">&gt; This is an indication to me that something has gone very wrong in your code base.<p>I&#x27;m not sure on what planet all of these people here live that they have success with Linux swap. It&#x27;s been broken for me forever and the first thing I do is disable it everywhere.</div><br/><div id="40517433" class="c"><input type="checkbox" id="c-40517433" checked=""/><div class="controls bullet"><span class="by">nolist_policy</span><span>|</span><a href="#40514810">root</a><span>|</span><a href="#40515720">parent</a><span>|</span><a href="#40516105">next</a><span>|</span><label class="collapse" for="c-40517433">[-]</label><label class="expand" for="c-40517433">[1 more]</label></div><br/><div class="children"><div class="content">Linux swap has been fixed on Chromebooks for years thanks to MGLRU. It&#x27;s upstream now and you can try it with a recent enough kernel with<p><pre><code>  echo y &gt;&#x2F;sys&#x2F;kernel&#x2F;mm&#x2F;lru_gen&#x2F;enabled</code></pre></div><br/></div></div><div id="40516105" class="c"><input type="checkbox" id="c-40516105" checked=""/><div class="controls bullet"><span class="by">funcDropShadow</span><span>|</span><a href="#40514810">root</a><span>|</span><a href="#40515720">parent</a><span>|</span><a href="#40517433">prev</a><span>|</span><a href="#40515820">next</a><span>|</span><label class="collapse" for="c-40516105">[-]</label><label class="expand" for="c-40516105">[4 more]</label></div><br/><div class="children"><div class="content">On a planet where the heap size of the JVM is properly set.</div><br/><div id="40516601" class="c"><input type="checkbox" id="c-40516601" checked=""/><div class="controls bullet"><span class="by">hot_gril</span><span>|</span><a href="#40514810">root</a><span>|</span><a href="#40516105">parent</a><span>|</span><a href="#40515820">next</a><span>|</span><label class="collapse" for="c-40516601">[-]</label><label class="expand" for="c-40516601">[3 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t use Java often, but when I do, I have to look up again how the heap settings work.</div><br/><div id="40517153" class="c"><input type="checkbox" id="c-40517153" checked=""/><div class="controls bullet"><span class="by">taspeotis</span><span>|</span><a href="#40514810">root</a><span>|</span><a href="#40516601">parent</a><span>|</span><a href="#40515820">next</a><span>|</span><label class="collapse" for="c-40517153">[-]</label><label class="expand" for="c-40517153">[2 more]</label></div><br/><div class="children"><div class="content">It’s just -xXxXxX360NoScopexXxXxHeapSize=69G</div><br/><div id="40517544" class="c"><input type="checkbox" id="c-40517544" checked=""/><div class="controls bullet"><span class="by">Izkata</span><span>|</span><a href="#40514810">root</a><span>|</span><a href="#40517153">parent</a><span>|</span><a href="#40515820">next</a><span>|</span><label class="collapse" for="c-40517544">[-]</label><label class="expand" for="c-40517544">[1 more]</label></div><br/><div class="children"><div class="content">There should be at least one : in there.<p>(IIRC these options are used like -XX:foo=bar)<p>(Edit - no, but some do use : instead of = I guess)</div><br/></div></div></div></div></div></div></div></div><div id="40515820" class="c"><input type="checkbox" id="c-40515820" checked=""/><div class="controls bullet"><span class="by">zero_k</span><span>|</span><a href="#40514810">root</a><span>|</span><a href="#40515720">parent</a><span>|</span><a href="#40516105">prev</a><span>|</span><a href="#40515844">next</a><span>|</span><label class="collapse" for="c-40515820">[-]</label><label class="expand" for="c-40515820">[1 more]</label></div><br/><div class="children"><div class="content">100% agree</div><br/></div></div></div></div><div id="40515844" class="c"><input type="checkbox" id="c-40515844" checked=""/><div class="controls bullet"><span class="by">jbellis</span><span>|</span><a href="#40514810">parent</a><span>|</span><a href="#40515720">prev</a><span>|</span><a href="#40514890">next</a><span>|</span><label class="collapse" for="c-40515844">[-]</label><label class="expand" for="c-40515844">[2 more]</label></div><br/><div class="children"><div class="content">[article author]<p>TBH this was sloppy on my part.  I tested multiple runs of the index build and early on kswapd was super busy.  I assumed Linux was just caching recently read parts of the source dataset, but it&#x27;s also possible it was something external to the index build since it&#x27;s my daily driver machine.  After I turned off swap I had no issues and didn&#x27;t look into it harder.</div><br/><div id="40518629" class="c"><input type="checkbox" id="c-40518629" checked=""/><div class="controls bullet"><span class="by">cwillu</span><span>|</span><a href="#40514810">root</a><span>|</span><a href="#40515844">parent</a><span>|</span><a href="#40514890">next</a><span>|</span><label class="collapse" for="c-40518629">[-]</label><label class="expand" for="c-40518629">[1 more]</label></div><br/><div class="children"><div class="content">The usual thing would be to fadvise(POSIX_FADV_DONTNEED) the relevant file handle you don&#x27;t want cached.<p>Edit: see for instance <a href="https:&#x2F;&#x2F;insights.oetiker.ch&#x2F;linux&#x2F;fadvise.html" rel="nofollow">https:&#x2F;&#x2F;insights.oetiker.ch&#x2F;linux&#x2F;fadvise.html</a></div><br/></div></div></div></div><div id="40514890" class="c"><input type="checkbox" id="c-40514890" checked=""/><div class="controls bullet"><span class="by">dekhn</span><span>|</span><a href="#40514810">parent</a><span>|</span><a href="#40515844">prev</a><span>|</span><a href="#40515495">next</a><span>|</span><label class="collapse" for="c-40514890">[-]</label><label class="expand" for="c-40514890">[5 more]</label></div><br/><div class="children"><div class="content">As a workaround, you can mlock your process which should prevent the application pages from being evicted by swap.</div><br/><div id="40515862" class="c"><input type="checkbox" id="c-40515862" checked=""/><div class="controls bullet"><span class="by">jbellis</span><span>|</span><a href="#40514810">root</a><span>|</span><a href="#40514890">parent</a><span>|</span><a href="#40515495">next</a><span>|</span><label class="collapse" for="c-40515862">[-]</label><label class="expand" for="c-40515862">[4 more]</label></div><br/><div class="children"><div class="content">FWIW this is what Cassandra does on startup, but it didn&#x27;t seem worth it to go to the trouble of dealing with Unsafe for a demo project.</div><br/><div id="40516208" class="c"><input type="checkbox" id="c-40516208" checked=""/><div class="controls bullet"><span class="by">nextaccountic</span><span>|</span><a href="#40514810">root</a><span>|</span><a href="#40515862">parent</a><span>|</span><a href="#40515495">next</a><span>|</span><label class="collapse" for="c-40516208">[-]</label><label class="expand" for="c-40516208">[3 more]</label></div><br/><div class="children"><div class="content">Can&#x27;t mlock be wrapped out in a safe API?</div><br/><div id="40516387" class="c"><input type="checkbox" id="c-40516387" checked=""/><div class="controls bullet"><span class="by">jbellis</span><span>|</span><a href="#40514810">root</a><span>|</span><a href="#40516208">parent</a><span>|</span><a href="#40515495">next</a><span>|</span><label class="collapse" for="c-40516387">[-]</label><label class="expand" for="c-40516387">[2 more]</label></div><br/><div class="children"><div class="content">Probably, but I&#x27;m not aware of any Java library that provides that functionality.</div><br/><div id="40518746" class="c"><input type="checkbox" id="c-40518746" checked=""/><div class="controls bullet"><span class="by">papercrane</span><span>|</span><a href="#40514810">root</a><span>|</span><a href="#40516387">parent</a><span>|</span><a href="#40515495">next</a><span>|</span><label class="collapse" for="c-40518746">[-]</label><label class="expand" for="c-40518746">[1 more]</label></div><br/><div class="children"><div class="content">If you don&#x27;t mind using a preview feature you should be able to use the foreign function API to call mlockall without any unsafe code.<p>Otherwise, JNA is probably the easiest way, and how Cassandra does it.<p><a href="https:&#x2F;&#x2F;docs.oracle.com&#x2F;en&#x2F;java&#x2F;javase&#x2F;21&#x2F;core&#x2F;calling-c-library-function-foreign-function-and-memory-api.html" rel="nofollow">https:&#x2F;&#x2F;docs.oracle.com&#x2F;en&#x2F;java&#x2F;javase&#x2F;21&#x2F;core&#x2F;calling-c-lib...</a><p><a href="https:&#x2F;&#x2F;github.com&#x2F;java-native-access&#x2F;jna">https:&#x2F;&#x2F;github.com&#x2F;java-native-access&#x2F;jna</a></div><br/></div></div></div></div></div></div></div></div></div></div><div id="40515495" class="c"><input type="checkbox" id="c-40515495" checked=""/><div class="controls bullet"><span class="by">hot_gril</span><span>|</span><a href="#40514810">parent</a><span>|</span><a href="#40514890">prev</a><span>|</span><a href="#40520590">next</a><span>|</span><label class="collapse" for="c-40515495">[-]</label><label class="expand" for="c-40515495">[2 more]</label></div><br/><div class="children"><div class="content">Linux swap has some fuzzy logic that I never fully understood. There have been times I&#x27;ve disabled it because it wasn&#x27;t doing what I wanted.</div><br/><div id="40515717" class="c"><input type="checkbox" id="c-40515717" checked=""/><div class="controls bullet"><span class="by">lynx23</span><span>|</span><a href="#40514810">root</a><span>|</span><a href="#40515495">parent</a><span>|</span><a href="#40520590">next</a><span>|</span><label class="collapse" for="c-40515717">[-]</label><label class="expand" for="c-40515717">[1 more]</label></div><br/><div class="children"><div class="content">I almost always reduce swappiness on a new install, the default of (60?) never served me well.</div><br/></div></div></div></div><div id="40520590" class="c"><input type="checkbox" id="c-40520590" checked=""/><div class="controls bullet"><span class="by">lionkor</span><span>|</span><a href="#40514810">parent</a><span>|</span><a href="#40515495">prev</a><span>|</span><a href="#40516332">next</a><span>|</span><label class="collapse" for="c-40520590">[-]</label><label class="expand" for="c-40520590">[1 more]</label></div><br/><div class="children"><div class="content">Could just turn down swappiness?!</div><br/></div></div><div id="40516332" class="c"><input type="checkbox" id="c-40516332" checked=""/><div class="controls bullet"><span class="by">spullara</span><span>|</span><a href="#40514810">parent</a><span>|</span><a href="#40520590">prev</a><span>|</span><a href="#40515187">next</a><span>|</span><label class="collapse" for="c-40516332">[-]</label><label class="expand" for="c-40516332">[2 more]</label></div><br/><div class="children"><div class="content">All the major web companies disable swap so no work has been done to optimize it.</div><br/><div id="40516616" class="c"><input type="checkbox" id="c-40516616" checked=""/><div class="controls bullet"><span class="by">hot_gril</span><span>|</span><a href="#40514810">root</a><span>|</span><a href="#40516332">parent</a><span>|</span><a href="#40515187">next</a><span>|</span><label class="collapse" for="c-40516616">[-]</label><label class="expand" for="c-40516616">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, in most situations I&#x27;d rather kill processes with excessive mem usage (possibly due to memleak) than have the machine grind to a halt by swapping. Sometimes my headless lab machines would become practically inaccessible over SSH if I didn&#x27;t swapoff before running something that accidentally chews up mem.<p>I&#x27;ll let my personal laptop swap, though. Especially if my wife is also logged in and has tons of idle stuff open.</div><br/></div></div></div></div><div id="40515187" class="c"><input type="checkbox" id="c-40515187" checked=""/><div class="controls bullet"><span class="by">nsingh2</span><span>|</span><a href="#40514810">parent</a><span>|</span><a href="#40516332">prev</a><span>|</span><a href="#40518117">next</a><span>|</span><label class="collapse" for="c-40515187">[-]</label><label class="expand" for="c-40515187">[4 more]</label></div><br/><div class="children"><div class="content">Yea this was strange, I&#x27;ve only ever seen swaps when my main memory was near being full. Maybe they&#x27;re storing all embeddings in memory?</div><br/><div id="40515886" class="c"><input type="checkbox" id="c-40515886" checked=""/><div class="controls bullet"><span class="by">jbellis</span><span>|</span><a href="#40514810">root</a><span>|</span><a href="#40515187">parent</a><span>|</span><a href="#40518117">next</a><span>|</span><label class="collapse" for="c-40515886">[-]</label><label class="expand" for="c-40515886">[3 more]</label></div><br/><div class="children"><div class="content">I routinely see Linux page memory out to swap while having 10+GB free.  I can only guess that it really really <i>really</i> likes to cache recently used data from disk.</div><br/><div id="40516205" class="c"><input type="checkbox" id="c-40516205" checked=""/><div class="controls bullet"><span class="by">hot_gril</span><span>|</span><a href="#40514810">root</a><span>|</span><a href="#40515886">parent</a><span>|</span><a href="#40518117">next</a><span>|</span><label class="collapse" for="c-40516205">[-]</label><label class="expand" for="c-40516205">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve seen the same. It will sometimes prefer to swap rather than evict the disk cache.<p>I don&#x27;t know how Linux does this in particular, but intuitively swapping can make sense if part of your allocated RAM isn&#x27;t being accessed often and the disk is. The kernel isn&#x27;t going to know for sure of course, and seems in my case it guessed wrong.</div><br/><div id="40518190" class="c"><input type="checkbox" id="c-40518190" checked=""/><div class="controls bullet"><span class="by">kevincox</span><span>|</span><a href="#40514810">root</a><span>|</span><a href="#40516205">parent</a><span>|</span><a href="#40518117">next</a><span>|</span><label class="collapse" for="c-40518190">[-]</label><label class="expand" for="c-40518190">[1 more]</label></div><br/><div class="children"><div class="content">At a very abstract level there isn&#x27;t much difference between dropping a disk cache and writing anonymous memory to swap. Obviously the actual step of writing to swap is more expensive but once the data is out of memory they will both require a read to get the data back. So if you imagine that you are occasionally reading a file and an anonymous page you can thrash on either if your system doesn&#x27;t have enough memory. After the initial write to swap it is effectively identical to keep reading either back in.<p>It is much better to swap out anonymous memory that isn&#x27;t being used than to flush file data that is being used. Or another way of looking at it if you run out of memory you will thrash with or without swap enabled. The difference is that with swap the kernel can evict the most rarely accessed memory whether file-backed or anonymous. Without swap the kernel is forced to only consider file-backed memory, even if it is being used more frequently than the anonymous memory.</div><br/></div></div></div></div></div></div></div></div><div id="40516292" class="c"><input type="checkbox" id="c-40516292" checked=""/><div class="controls bullet"><span class="by">AnotherGoodName</span><span>|</span><a href="#40514810">parent</a><span>|</span><a href="#40518117">prev</a><span>|</span><a href="#40518878">next</a><span>|</span><label class="collapse" for="c-40516292">[-]</label><label class="expand" for="c-40516292">[5 more]</label></div><br/><div class="children"><div class="content">Memory managed languages won’t do long term garbage collection till memory is nearly full.<p>I suspect they just need to pass in -xmx options to the jvm to avoid this.</div><br/><div id="40517786" class="c"><input type="checkbox" id="c-40517786" checked=""/><div class="controls bullet"><span class="by">threeseed</span><span>|</span><a href="#40514810">root</a><span>|</span><a href="#40516292">parent</a><span>|</span><a href="#40516507">next</a><span>|</span><label class="collapse" for="c-40517786">[-]</label><label class="expand" for="c-40517786">[1 more]</label></div><br/><div class="children"><div class="content">Not sure what long term garbage collection means. Because the JVM will GC all objects at any point if they are unused.<p>If you&#x27;re referring to full GC you can configure how often that happens and by default it doesn&#x27;t just wait until memory is nearly full.</div><br/></div></div><div id="40516507" class="c"><input type="checkbox" id="c-40516507" checked=""/><div class="controls bullet"><span class="by">marginalia_nu</span><span>|</span><a href="#40514810">root</a><span>|</span><a href="#40516292">parent</a><span>|</span><a href="#40517786">prev</a><span>|</span><a href="#40517072">next</a><span>|</span><label class="collapse" for="c-40516507">[-]</label><label class="expand" for="c-40516507">[1 more]</label></div><br/><div class="children"><div class="content">Even if this wasn&#x27;t factually incorrect, default max heap size on the JVM is 25% of system RAM.</div><br/></div></div><div id="40517072" class="c"><input type="checkbox" id="c-40517072" checked=""/><div class="controls bullet"><span class="by">menacingly</span><span>|</span><a href="#40514810">root</a><span>|</span><a href="#40516292">parent</a><span>|</span><a href="#40516507">prev</a><span>|</span><a href="#40518878">next</a><span>|</span><label class="collapse" for="c-40517072">[-]</label><label class="expand" for="c-40517072">[2 more]</label></div><br/><div class="children"><div class="content">I actually wish this were true because of more predictable gc pauses</div><br/><div id="40517797" class="c"><input type="checkbox" id="c-40517797" checked=""/><div class="controls bullet"><span class="by">threeseed</span><span>|</span><a href="#40514810">root</a><span>|</span><a href="#40517072">parent</a><span>|</span><a href="#40518878">next</a><span>|</span><label class="collapse" for="c-40517797">[-]</label><label class="expand" for="c-40517797">[1 more]</label></div><br/><div class="children"><div class="content">With G1GC there is a setting called MaxGCPauseMillis which can give you predictability.</div><br/></div></div></div></div></div></div></div></div><div id="40518878" class="c"><input type="checkbox" id="c-40518878" checked=""/><div class="controls bullet"><span class="by">m3kw9</span><span>|</span><a href="#40514810">prev</a><span>|</span><a href="#40519129">next</a><span>|</span><label class="collapse" for="c-40518878">[-]</label><label class="expand" for="c-40518878">[5 more]</label></div><br/><div class="children"><div class="content">He should have asked HN on the cheapest way to embed Wikipedia before starting</div><br/><div id="40519211" class="c"><input type="checkbox" id="c-40519211" checked=""/><div class="controls bullet"><span class="by">jbellis</span><span>|</span><a href="#40518878">parent</a><span>|</span><a href="#40519129">next</a><span>|</span><label class="collapse" for="c-40519211">[-]</label><label class="expand" for="c-40519211">[4 more]</label></div><br/><div class="children"><div class="content">I&#x27;m baffled that so many people fixate on the estimated cost and miss the fact that it&#x27;s a <i>public dataset</i>. As in, free.</div><br/><div id="40519396" class="c"><input type="checkbox" id="c-40519396" checked=""/><div class="controls bullet"><span class="by">syllogistic</span><span>|</span><a href="#40518878">root</a><span>|</span><a href="#40519211">parent</a><span>|</span><a href="#40519714">next</a><span>|</span><label class="collapse" for="c-40519396">[-]</label><label class="expand" for="c-40519396">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s in the first sentence of the article too :)</div><br/></div></div><div id="40519714" class="c"><input type="checkbox" id="c-40519714" checked=""/><div class="controls bullet"><span class="by">m3kw9</span><span>|</span><a href="#40518878">root</a><span>|</span><a href="#40519211">parent</a><span>|</span><a href="#40519396">prev</a><span>|</span><a href="#40519129">next</a><span>|</span><label class="collapse" for="c-40519714">[-]</label><label class="expand" for="c-40519714">[2 more]</label></div><br/><div class="children"><div class="content">Getting the embeddings ain’t free</div><br/><div id="40521443" class="c"><input type="checkbox" id="c-40521443" checked=""/><div class="controls bullet"><span class="by">jbellis</span><span>|</span><a href="#40518878">root</a><span>|</span><a href="#40519714">parent</a><span>|</span><a href="#40519129">next</a><span>|</span><label class="collapse" for="c-40521443">[-]</label><label class="expand" for="c-40521443">[1 more]</label></div><br/><div class="children"><div class="content">Unless you&#x27;re counting your network access cost, the dataset of embeddings is in fact free and TFA includes instructions on how to download them for free.</div><br/></div></div></div></div></div></div></div></div><div id="40519129" class="c"><input type="checkbox" id="c-40519129" checked=""/><div class="controls bullet"><span class="by">Atotalnoob</span><span>|</span><a href="#40518878">prev</a><span>|</span><label class="collapse" for="c-40519129">[-]</label><label class="expand" for="c-40519129">[8 more]</label></div><br/><div class="children"><div class="content">Why is the author listing himself as datastax cto?<p>He isn’t according the Wikipedia, my friend who works there, and their company website. <a href="https:&#x2F;&#x2F;www.datastax.com&#x2F;our-people" rel="nofollow">https:&#x2F;&#x2F;www.datastax.com&#x2F;our-people</a><p>That’s kind of weird</div><br/><div id="40519336" class="c"><input type="checkbox" id="c-40519336" checked=""/><div class="controls bullet"><span class="by">jbellis</span><span>|</span><a href="#40519129">parent</a><span>|</span><a href="#40519177">next</a><span>|</span><label class="collapse" for="c-40519336">[-]</label><label class="expand" for="c-40519336">[1 more]</label></div><br/><div class="children"><div class="content">I guess I&#x27;m kind of a CTO emeritus now -- I mostly write code, by choice. <a href="https:&#x2F;&#x2F;github.com&#x2F;jbellis">https:&#x2F;&#x2F;github.com&#x2F;jbellis</a></div><br/></div></div><div id="40519177" class="c"><input type="checkbox" id="c-40519177" checked=""/><div class="controls bullet"><span class="by">lemarchr</span><span>|</span><a href="#40519129">parent</a><span>|</span><a href="#40519336">prev</a><span>|</span><a href="#40519170">next</a><span>|</span><label class="collapse" for="c-40519177">[-]</label><label class="expand" for="c-40519177">[2 more]</label></div><br/><div class="children"><div class="content">See <a href="https:&#x2F;&#x2F;www.datastax.com&#x2F;our-people&#x2F;jonathan-ellis" rel="nofollow">https:&#x2F;&#x2F;www.datastax.com&#x2F;our-people&#x2F;jonathan-ellis</a><p>Wikipedia lists them as a founder. Perhaps their author bio is outdated, or Wikipedia is. Not sure about your friend.</div><br/><div id="40519192" class="c"><input type="checkbox" id="c-40519192" checked=""/><div class="controls bullet"><span class="by">Atotalnoob</span><span>|</span><a href="#40519129">root</a><span>|</span><a href="#40519177">parent</a><span>|</span><a href="#40519170">next</a><span>|</span><label class="collapse" for="c-40519192">[-]</label><label class="expand" for="c-40519192">[1 more]</label></div><br/><div class="children"><div class="content">They were definitely a founder, but they are not the current cto</div><br/></div></div></div></div><div id="40519170" class="c"><input type="checkbox" id="c-40519170" checked=""/><div class="controls bullet"><span class="by">metadat</span><span>|</span><a href="#40519129">parent</a><span>|</span><a href="#40519177">prev</a><span>|</span><a href="#40519166">next</a><span>|</span><label class="collapse" for="c-40519170">[-]</label><label class="expand" for="c-40519170">[3 more]</label></div><br/><div class="children"><div class="content">What are you talking about?  The datastax site lists it:<p><i>&gt; SANTA CLARA, Calif. – September 28, 2020 – DataStax today announced that DataStax Co-Founder and CTO Jonathan Ellis will deliver a keynote address at ApacheCon @Home 2020</i><p><a href="https:&#x2F;&#x2F;www.datastax.com&#x2F;press-release&#x2F;datastax-co-founder-and-cto-jonathan-ellis-keynote-apachecon-2020-open-source-cloud" rel="nofollow">https:&#x2F;&#x2F;www.datastax.com&#x2F;press-release&#x2F;datastax-co-founder-a...</a>.<p>As an aside, I&#x27;m an ApacheCon presenter but there was no press release about the hot excitement of my involvement.  Maybe next time :)</div><br/><div id="40519193" class="c"><input type="checkbox" id="c-40519193" checked=""/><div class="controls bullet"><span class="by">Atotalnoob</span><span>|</span><a href="#40519129">root</a><span>|</span><a href="#40519170">parent</a><span>|</span><a href="#40519166">next</a><span>|</span><label class="collapse" for="c-40519193">[-]</label><label class="expand" for="c-40519193">[2 more]</label></div><br/><div class="children"><div class="content">That’s from 2024. They aren’t the cto of datastax currently</div><br/><div id="40519210" class="c"><input type="checkbox" id="c-40519210" checked=""/><div class="controls bullet"><span class="by">metadat</span><span>|</span><a href="#40519129">root</a><span>|</span><a href="#40519193">parent</a><span>|</span><a href="#40519166">next</a><span>|</span><label class="collapse" for="c-40519210">[-]</label><label class="expand" for="c-40519210">[1 more]</label></div><br/><div class="children"><div class="content">Maybe it&#x27;s the highest rank they achieved and still trying to capitalize on it.  So what?  Should they now say &quot;Unemployed&quot;?<p>There has to be more interesting things to discuss than this.<p>P.s. I think you meant 2020.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>