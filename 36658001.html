<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1688979649196" as="style"/><link rel="stylesheet" href="styles.css?v=1688979649196"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://tedpiotrowski.svbtle.com/using-lidar-for-tree-shadows-in-shademap">Using Lidar to map tree shadows</a> <span class="domain">(<a href="https://tedpiotrowski.svbtle.com">tedpiotrowski.svbtle.com</a>)</span></div><div class="subtext"><span>tppiotrowski</span> | <span>40 comments</span></div><br/><div><div id="36662701" class="c"><input type="checkbox" id="c-36662701" checked=""/><div class="controls bullet"><span class="by">derstander</span><span>|</span><a href="#36659003">next</a><span>|</span><label class="collapse" for="c-36662701">[-]</label><label class="expand" for="c-36662701">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Radar clearly misses 90% of the shadows cast because it does not include vegetation. Radar only reflects off the ground, making objects such as trees and buildings invisible.<p>This doesn’t sound right to me. Certainly radar can, at certain bands, see through foliage (so-called FOPEN). I don’t have familiarity with radar seeing through buildings at the sorts of ranges and coverage rates that you’d want to use for ground mapping.<p>The article references the Shuttle Radar Topography Mission, which should use C- and&#x2F;or X-Band radars — both should see returns from foliage and buildings.<p>Without digging more into it, my thoughts about the reason behind absence of foliage and building shadows in the radar data are potentially: 1) resolution of the radar data is too low (tens of meters or more), 2) maybe post-processing of multiple radar passes with different geometries to get rid of them, 3) steep grazing angles from the radar not generating much shadow to begin with.</div><br/><div id="36663629" class="c"><input type="checkbox" id="c-36663629" checked=""/><div class="controls bullet"><span class="by">ReleaseCandidat</span><span>|</span><a href="#36662701">parent</a><span>|</span><a href="#36662780">next</a><span>|</span><label class="collapse" for="c-36663629">[-]</label><label class="expand" for="c-36663629">[1 more]</label></div><br/><div class="children"><div class="content">SRTM&#x27;s FAQ shows that the argumentation in the article is backwards.<p><pre><code>    Did the radar sample the tops of trees or the ground level?

    The radar does not &quot;see&quot; through thick vegetation canopies. It probably penetrated a little way into some canopies, but in general it followed near the top of the canopy.

    Did the radar signal bounce off treetops, or topography, or some combination of both that will provide separate data sets (geodesists like myself care about topography, whereas scientists more interested in forestry care about the height of the canopy).

    Unfortunately, the wavelength used, 5.6 centimeters, didn&#x27;t penetrate vegetation very well. That means, for moderate-heavy vegetation, we mapped near the canopy top. We did penetrate a little, as some studies comparing our technique with laser altimeters showed, but not to the ground. If the vegetation was sparse, or had no leaves, we might get a return from the ground. The Vegetation Canopy Lidar, scheduled to fly as part of the Earth Observing System, will have this capability, which may provide some interesting data-set comparisons.
</code></pre>
<a href="https:&#x2F;&#x2F;www2.jpl.nasa.gov&#x2F;srtm&#x2F;faq.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;www2.jpl.nasa.gov&#x2F;srtm&#x2F;faq.html</a></div><br/></div></div><div id="36662780" class="c"><input type="checkbox" id="c-36662780" checked=""/><div class="controls bullet"><span class="by">tppiotrowski</span><span>|</span><a href="#36662701">parent</a><span>|</span><a href="#36663629">prev</a><span>|</span><a href="#36659003">next</a><span>|</span><label class="collapse" for="c-36662780">[-]</label><label class="expand" for="c-36662780">[1 more]</label></div><br/><div class="children"><div class="content">Good clarification. My understanding is that SRTM data did not include buildings or foliage (maybe they filtered out all data except the lowest elevation values?) but that&#x27;s not &quot;radar&quot; in general.</div><br/></div></div></div></div><div id="36659003" class="c"><input type="checkbox" id="c-36659003" checked=""/><div class="controls bullet"><span class="by">Soupy</span><span>|</span><a href="#36662701">prev</a><span>|</span><a href="#36662338">next</a><span>|</span><label class="collapse" for="c-36659003">[-]</label><label class="expand" for="c-36659003">[13 more]</label></div><br/><div class="children"><div class="content">This is ridiculously cool, demo is slick and fast! I work pretty extensively with tiling pipelines and GeoTiffs right now as I&#x27;m building out a mass repository and platform for historical map and aerial analysis (<a href="https:&#x2F;&#x2F;pastmaps.com" rel="nofollow noreferrer">https:&#x2F;&#x2F;pastmaps.com</a> - still very early so don&#x27;t judge it too hard please)<p>As part of this work, I similarly hit problems with using the raw GeoTiff files as my source and found that I was able to build some custom tiling hooks into MapLibre coupled with http range queries on the static files hosted in S3 to bypass the need for tiling. It does push the compute to the clients but I&#x27;ve found it&#x27;s actually pretty fast even on older mobile devices.<p>If this MapLibre GeoTiff source support is at all of interest, I&#x27;m happy to share some basic code or even open source some of that work. Here I was thinking I was the only weird dude on the internet messing with this stuff :D</div><br/><div id="36659170" class="c"><input type="checkbox" id="c-36659170" checked=""/><div class="controls bullet"><span class="by">tppiotrowski</span><span>|</span><a href="#36659003">parent</a><span>|</span><a href="#36659191">next</a><span>|</span><label class="collapse" for="c-36659170">[-]</label><label class="expand" for="c-36659170">[7 more]</label></div><br/><div class="children"><div class="content">Ah. I hadn&#x27;t even thought that I could do byte offsets on the fly. In general I would err on the side of over-sharing because until ChatGPT came along I struggled to understand what tools and options were to generate tiles as there wasn&#x27;t much data I could find online.<p>One thing specific in my case: the LiDAR GeoTiffs are in imperial feet with a 32 bit floating point precision. If you take the elevation range from sea level to Everest in meters (8848) and pack it into an int16, you can get .2 meter precision. That&#x27;s plenty for ShadeMap so converting from float32 to int16 should save half the cloud storage space in theory and more when taking PNG compression into account.</div><br/><div id="36659522" class="c"><input type="checkbox" id="c-36659522" checked=""/><div class="controls bullet"><span class="by">Soupy</span><span>|</span><a href="#36659003">root</a><span>|</span><a href="#36659170">parent</a><span>|</span><a href="#36659191">next</a><span>|</span><label class="collapse" for="c-36659522">[-]</label><label class="expand" for="c-36659522">[6 more]</label></div><br/><div class="children"><div class="content">This code is <i>rough</i>, and that&#x27;s an understatement, but here&#x27;s a basic gist showing how I&#x27;m doing what I&#x27;m doing in case it helps you in any way: <a href="https:&#x2F;&#x2F;gist.github.com&#x2F;craigsc&#x2F;fdb867f8971ff5b4ae42de4e0d7c229e" rel="nofollow noreferrer">https:&#x2F;&#x2F;gist.github.com&#x2F;craigsc&#x2F;fdb867f8971ff5b4ae42de4e0d7c...</a><p>I&#x27;m similarly using R2 as my static hosting backend and it&#x27;s been pretty fast and seamless<p>note that i&#x27;m using the geotiff.js and fast-png libraries for the heavy-lifting behind the range-queries and the client-side png encoding. why reinvent the wheel, right?</div><br/><div id="36660909" class="c"><input type="checkbox" id="c-36660909" checked=""/><div class="controls bullet"><span class="by">blacha</span><span>|</span><a href="#36659003">root</a><span>|</span><a href="#36659522">parent</a><span>|</span><a href="#36659191">next</a><span>|</span><label class="collapse" for="c-36660909">[-]</label><label class="expand" for="c-36660909">[5 more]</label></div><br/><div class="children"><div class="content">Your browser has a very powerful image decoder built into it, offloading the PNG decoding into Javascript is very resource hungry.<p>Using maplibre (or any map viewer) you can load blobs of image data out of a tiff and use `Image` or `Canvas` to render the data onto a map.<p>Its even easier if the tiffs are already Cloud optimized as they perfectly align to a 1-to-1 map tile and they don&#x27;t need to be rescaled, you can then just render the images onto the map. eg here is a viewer that loads webps out of a 15GB tiff and uses Canvas to render them onto a map [1]<p>Unless you are trying to layer all your maps together, you also could stop reprojecting them into webmercator, or if your goal is to layer them, then storing them in webmercator would save a ton of user&#x27;s compute time.<p>There are a bunch of us that talk web maping and imagery in the #maplibre and #imagery slack channels in OSMUS&#x27;s slack [2]<p>[1] <a href="https:&#x2F;&#x2F;blayne.chard.com&#x2F;cogeotiff-web&#x2F;index.html?view=cog&amp;i=https%3A%2F%2Fpublic.lo.chard.com%2F2019-new-zealand-sentinel.3857.lzw.cog.tiff&amp;debug=true" rel="nofollow noreferrer">https:&#x2F;&#x2F;blayne.chard.com&#x2F;cogeotiff-web&#x2F;index.html?view=cog&amp;i...</a><p>[2] <a href="https:&#x2F;&#x2F;github.com&#x2F;maplibre&#x2F;maplibre-gl-js#getting-involved">https:&#x2F;&#x2F;github.com&#x2F;maplibre&#x2F;maplibre-gl-js#getting-involved</a></div><br/><div id="36662039" class="c"><input type="checkbox" id="c-36662039" checked=""/><div class="controls bullet"><span class="by">Soupy</span><span>|</span><a href="#36659003">root</a><span>|</span><a href="#36660909">parent</a><span>|</span><a href="#36661242">next</a><span>|</span><label class="collapse" for="c-36662039">[-]</label><label class="expand" for="c-36662039">[1 more]</label></div><br/><div class="children"><div class="content">amazing comments and callouts, thank you! I actually tried to load the raw image data blobs as a layer into MapLibre but couldn&#x27;t figure out a way to do it and finally capitulated and did the &quot;bad&quot; move of re-encoding just to get the initial interactive map collection out the door for folks. It sounds like this is in fact possible but I missed something. I&#x27;ll take a look at the Image and Canvas sources, thanks!<p>Re the webmercator reprojection - yea it&#x27;s gnarly that I&#x27;m doing it clientside but it&#x27;s exactly because I&#x27;m working towards the ability to layer them interactively on top of eachother (as well as on various basemaps). My projection code is also only half-working at the moment and it&#x27;s where I&#x27;m currently spending my time next week. I&#x27;m trying to avoid building pipelines to re-encode the geotiffs as long as I can since there&#x27;s 10+TB of them in my backend so this is why you&#x27;re seeing me doing this clientside instead. This is a solo project so I need to be really picky where I spend my time so I can keep moving the ball forward<p>I&#x27;ll join those 2 communities, thank you! Been crazy hard to find folks who are deep in this stuff so most of my learning has been through endless googling down deep dark corners of the web for the past 2 months</div><br/></div></div><div id="36661242" class="c"><input type="checkbox" id="c-36661242" checked=""/><div class="controls bullet"><span class="by">tppiotrowski</span><span>|</span><a href="#36659003">root</a><span>|</span><a href="#36660909">parent</a><span>|</span><a href="#36662039">prev</a><span>|</span><a href="#36659191">next</a><span>|</span><label class="collapse" for="c-36661242">[-]</label><label class="expand" for="c-36661242">[3 more]</label></div><br/><div class="children"><div class="content">Great points. Thank you for the links. The one trade off here is that uncompressed blobs will require longer downloads than PNG and I think usually the network transfer is slower than PNG decoding.<p>But maybe the sample gist takes a Tiff blob and encodes it to a PNG on the client and then maplibre decodes the PNG to canvas. That would be quite inefficient if that&#x27;s what it&#x27;s doing.</div><br/><div id="36661567" class="c"><input type="checkbox" id="c-36661567" checked=""/><div class="controls bullet"><span class="by">blacha</span><span>|</span><a href="#36659003">root</a><span>|</span><a href="#36661242">parent</a><span>|</span><a href="#36659191">next</a><span>|</span><label class="collapse" for="c-36661567">[-]</label><label class="expand" for="c-36661567">[2 more]</label></div><br/><div class="children"><div class="content">Those comments were more at pastmaps.<p>For elevation data, we store our DEM&#x2F;DSM in S3 as LERC [1] COGS, LERC has a WASM bundle which I think can be used in the browser. We found LERC COGs to be one of the most space efficient ways of storing highresolution DEM&#x2F;DSM data [2], If you wanted to you could fetch LERC tiles directly out of a remote COG and use that directly for the terrain heights.<p>I am more focused on storage&#x2F;archiving&#x2F;publishing of our LiDAR capture program [3] than web based visualizations of it though, so I am unsure if a LERC COG would even be better for you than a PNG TerrainRGB.<p>[1] <a href="https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;lerc" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;lerc</a><p>[2] <a href="https:&#x2F;&#x2F;github.com&#x2F;linz&#x2F;elevation&#x2F;tree&#x2F;master&#x2F;docs&#x2F;tiff-compression">https:&#x2F;&#x2F;github.com&#x2F;linz&#x2F;elevation&#x2F;tree&#x2F;master&#x2F;docs&#x2F;tiff-comp...</a><p>[3] <a href="https:&#x2F;&#x2F;linz.maps.arcgis.com&#x2F;apps&#x2F;MapSeries&#x2F;index.html?appid=2552c3a5cee24f7b87806b085c3fee8a" rel="nofollow noreferrer">https:&#x2F;&#x2F;linz.maps.arcgis.com&#x2F;apps&#x2F;MapSeries&#x2F;index.html?appid...</a></div><br/><div id="36661682" class="c"><input type="checkbox" id="c-36661682" checked=""/><div class="controls bullet"><span class="by">Pabloski80</span><span>|</span><a href="#36659003">root</a><span>|</span><a href="#36661567">parent</a><span>|</span><a href="#36659191">next</a><span>|</span><label class="collapse" for="c-36661682">[-]</label><label class="expand" for="c-36661682">[1 more]</label></div><br/><div class="children"><div class="content">WASM surely could be an improvement over js, especially for kind of BigData-ish&#x2F;repetitive jobs, and where load on clients might become the next wall after we optimized the cloud&#x2F;server part, or when we try to use js on cloud leafnodes.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="36659191" class="c"><input type="checkbox" id="c-36659191" checked=""/><div class="controls bullet"><span class="by">jamessb</span><span>|</span><a href="#36659003">parent</a><span>|</span><a href="#36659170">prev</a><span>|</span><a href="#36659264">next</a><span>|</span><label class="collapse" for="c-36659191">[-]</label><label class="expand" for="c-36659191">[2 more]</label></div><br/><div class="children"><div class="content">&gt; coupled with http range queries on the static files hosted in S3 to bypass the need for tiling<p>Did you look into Cloud Optimized GeoTIFF format?<p><a href="https:&#x2F;&#x2F;www.cogeo.org&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.cogeo.org&#x2F;</a><p>It is supported by OpenLayers: <a href="https:&#x2F;&#x2F;openlayers.org&#x2F;en&#x2F;latest&#x2F;examples&#x2F;cog.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;openlayers.org&#x2F;en&#x2F;latest&#x2F;examples&#x2F;cog.html</a><p>(I don&#x27;t think that Maplibre or Leaflet have built-in support for it)</div><br/><div id="36659403" class="c"><input type="checkbox" id="c-36659403" checked=""/><div class="controls bullet"><span class="by">Soupy</span><span>|</span><a href="#36659003">root</a><span>|</span><a href="#36659191">parent</a><span>|</span><a href="#36659264">next</a><span>|</span><label class="collapse" for="c-36659403">[-]</label><label class="expand" for="c-36659403">[1 more]</label></div><br/><div class="children"><div class="content">I did actually! For my particular source dataset it was far easier just to lean on the plain old GeoTiff format since that&#x27;s what my source data was already formatted in and my testing of the client-side on-the-fly tiling using range queries and fast-png for encoding resulted in close to par performance with 0 increase in hosting costs and 0 headache in building custom pipelines to encode the cloud-optimized versions. Basically, I&#x27;m lazy, I&#x27;m sure it&#x27;s the &quot;correct&quot; answer for other use-cases<p>I also have been digging pretty extensively into protomaps though for some newer non-GeoTiff datasets I&#x27;m in the process of pulling in, in my opinion it&#x27;s the future for this space - <a href="https:&#x2F;&#x2F;protomaps.com&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;protomaps.com&#x2F;</a></div><br/></div></div></div></div><div id="36659264" class="c"><input type="checkbox" id="c-36659264" checked=""/><div class="controls bullet"><span class="by">avibryant</span><span>|</span><a href="#36659003">parent</a><span>|</span><a href="#36659191">prev</a><span>|</span><a href="#36662090">next</a><span>|</span><label class="collapse" for="c-36659264">[-]</label><label class="expand" for="c-36659264">[1 more]</label></div><br/><div class="children"><div class="content">See also <a href="https:&#x2F;&#x2F;geoblaze-gsoc.vercel.app" rel="nofollow noreferrer">https:&#x2F;&#x2F;geoblaze-gsoc.vercel.app</a> and the underlying libraries it uses, which also do range queries on GeoTIFFs.<p>I&#x27;m super interested in this space, including in helping financially support some projects. I already emailed Ted about this, but would be happy to chat to anyone doing this stuff. My email&#x27;s in my profile.<p>(Luckily this is niche enough I&#x27;m not worried about my inbox blowing up....)</div><br/></div></div><div id="36662090" class="c"><input type="checkbox" id="c-36662090" checked=""/><div class="controls bullet"><span class="by">fzeindl</span><span>|</span><a href="#36659003">parent</a><span>|</span><a href="#36659264">prev</a><span>|</span><a href="#36661640">next</a><span>|</span><label class="collapse" for="c-36662090">[-]</label><label class="expand" for="c-36662090">[1 more]</label></div><br/><div class="children"><div class="content">&gt; This is ridiculously cool<p>I think so too. And it reminds me that I refactored Leaflet&#x27;s core event-handling and SVG rendering code 8 years ago. It&#x27;s good to know your opensource contribution play part in such cool things.</div><br/></div></div><div id="36661640" class="c"><input type="checkbox" id="c-36661640" checked=""/><div class="controls bullet"><span class="by">Pabloski80</span><span>|</span><a href="#36659003">parent</a><span>|</span><a href="#36662090">prev</a><span>|</span><a href="#36662338">next</a><span>|</span><label class="collapse" for="c-36661640">[-]</label><label class="expand" for="c-36661640">[1 more]</label></div><br/><div class="children"><div class="content">You&#x27;re not anymore &quot;the weirdest&quot;, You two are unique still though. Share and exchange, and try to support each other. All gonna be good.<p>I need to learn more where lies the issue with GeoTIFF format. Perhaps &quot;pure conversion&quot; pipeline infrastructure shared between your two projects could help.<p>If there are two of You, perhaps there are more hitting the same wall.</div><br/></div></div></div></div><div id="36662338" class="c"><input type="checkbox" id="c-36662338" checked=""/><div class="controls bullet"><span class="by">olup</span><span>|</span><a href="#36659003">prev</a><span>|</span><a href="#36661060">next</a><span>|</span><label class="collapse" for="c-36662338">[-]</label><label class="expand" for="c-36662338">[5 more]</label></div><br/><div class="children"><div class="content">If you do end up preprocessing the geotiff and if you already have the pipeline to give terrain elevation to user I guess you could also only encode the difference between lidar and radar in your tiles, in order to have only trees data on top of your already served terrains data. The objects you are encoding and the precision you need could fit in as small as 4 bits, with lots of zeros that could be compressed away ? Just a brainstormy kind of comment.</div><br/><div id="36662431" class="c"><input type="checkbox" id="c-36662431" checked=""/><div class="controls bullet"><span class="by">tppiotrowski</span><span>|</span><a href="#36662338">parent</a><span>|</span><a href="#36662573">next</a><span>|</span><label class="collapse" for="c-36662431">[-]</label><label class="expand" for="c-36662431">[1 more]</label></div><br/><div class="children"><div class="content">This is a good idea. There are two popular encodings of elevation data into RGB tiles. They are both not optimal in size because their value ranges need to accommodate bathymetric data (negative elevations for mapping the sea floor)<p>height = -10000 + ((R * 256 * 256 + G * 256 + B) * 0.1) [mapbox&#x2F;maptiler]<p>height = (R * 256 + G + B &#x2F; 256) - 32768 [mapzen terrarium]<p>If you only care about elevations above sea level (0-8848 meters), you can pack the data into just two bytes maintaining a .13 meter precision (Mapbox precision is .1)<p>height = (R * 256 + B) &#x2F; (256 * 256) * 8848 [shademap]<p>This is the encoding I&#x27;m going to use. I&#x27;ve already trialed it and it saves space (I&#x27;m not sure about processing time).<p>The best encoding would be to encode the min elevation for an entire tile in the header and then just store the delta between the tile&#x27;s min elevation and the elevation for a given pixel. It would be the most space efficient but would involve loading the whole tile data into memory to find the minimum elevation (which is less efficient then streaming and encoding one pixel at a time)</div><br/></div></div><div id="36662573" class="c"><input type="checkbox" id="c-36662573" checked=""/><div class="controls bullet"><span class="by">samstave</span><span>|</span><a href="#36662338">parent</a><span>|</span><a href="#36662431">prev</a><span>|</span><a href="#36661060">next</a><span>|</span><label class="collapse" for="c-36662573">[-]</label><label class="expand" for="c-36662573">[3 more]</label></div><br/><div class="children"><div class="content">UHM - I really need to know more about you&#x2F;what you know - because this is a passion of mine as seeking the next thing I want to focus on - and the terminology that you have is exactly where I want my knowledge to be.<p>Please point me at what I should study to be proficient in topological data science (which is what I want to study)</div><br/><div id="36662656" class="c"><input type="checkbox" id="c-36662656" checked=""/><div class="controls bullet"><span class="by">mmyrte</span><span>|</span><a href="#36662338">root</a><span>|</span><a href="#36662573">parent</a><span>|</span><a href="#36661060">next</a><span>|</span><label class="collapse" for="c-36662656">[-]</label><label class="expand" for="c-36662656">[2 more]</label></div><br/><div class="children"><div class="content">Are you sure you mean topological data science? I know that there are topological methods for classifying high-dimensional data structures, but this discussion is mostly geographical&#x2F;topographical. Yes, it does describe a surface, but there&#x27;s a fundamental assumption that all objects are either on a plane or a sphere.<p>edit: If you mean GIS (geographical information systems&#x2F;science), there are plenty of undergraduate courses strewn over github. IMO, the R geospatial ecosystem is more mature than its Python counterpart, but both are very usable.</div><br/><div id="36662833" class="c"><input type="checkbox" id="c-36662833" checked=""/><div class="controls bullet"><span class="by">samstave</span><span>|</span><a href="#36662338">root</a><span>|</span><a href="#36662656">parent</a><span>|</span><a href="#36661060">next</a><span>|</span><label class="collapse" for="c-36662833">[-]</label><label class="expand" for="c-36662833">[1 more]</label></div><br/><div class="children"><div class="content">Thank you, I didnt have the vocabulary to acurately describe my interest - I appreciate it. Thanks.<p>EDIT: I also made up &quot;topological data science&quot; - not sure thats a thing, but I want it to be.</div><br/></div></div></div></div></div></div></div></div><div id="36661060" class="c"><input type="checkbox" id="c-36661060" checked=""/><div class="controls bullet"><span class="by">alexpotato</span><span>|</span><a href="#36662338">prev</a><span>|</span><a href="#36662491">next</a><span>|</span><label class="collapse" for="c-36661060">[-]</label><label class="expand" for="c-36661060">[2 more]</label></div><br/><div class="children"><div class="content">This feels like it should be an interview question for a GIS firm:<p>&quot;So, you have some radar and lidar data and want to merge on a box with limited memory. What would you do?&quot;</div><br/><div id="36661099" class="c"><input type="checkbox" id="c-36661099" checked=""/><div class="controls bullet"><span class="by">tppiotrowski</span><span>|</span><a href="#36661060">parent</a><span>|</span><a href="#36662491">next</a><span>|</span><label class="collapse" for="c-36661099">[-]</label><label class="expand" for="c-36661099">[1 more]</label></div><br/><div class="children"><div class="content">In a way, the problems I&#x27;m dealing with here are what my CS education prepared me for. Previously I did web development and you rarely had to worry if your webpage would fit into memory and you rarely used more than a few percent of the cycles your processor was capable of.</div><br/></div></div></div></div><div id="36662491" class="c"><input type="checkbox" id="c-36662491" checked=""/><div class="controls bullet"><span class="by">barbegal</span><span>|</span><a href="#36661060">prev</a><span>|</span><a href="#36658942">next</a><span>|</span><label class="collapse" for="c-36662491">[-]</label><label class="expand" for="c-36662491">[1 more]</label></div><br/><div class="children"><div class="content">A very cool demo but most of the output has no value as it is calculating the shadows on the top of the tree canopy rather than the &quot;ground&quot; (hence why you get sunlight even at dawn in a dense forest)<p>But this would be very useful for many applications at the edges of forests and for urban vegetation, in that use case the map tiles can be much smaller and maybe the Lidar data can be fetched and converted on demand.</div><br/></div></div><div id="36658942" class="c"><input type="checkbox" id="c-36658942" checked=""/><div class="controls bullet"><span class="by">verelo</span><span>|</span><a href="#36662491">prev</a><span>|</span><a href="#36662284">next</a><span>|</span><label class="collapse" for="c-36658942">[-]</label><label class="expand" for="c-36658942">[3 more]</label></div><br/><div class="children"><div class="content">I love Shademaps. I wish my product that has been using it was more of a hit, but I&#x27;ll say this, Ted and Shademaps are cool. Adding trees is super practical, in many of the areas I leverage this tool we&#x27;re in Urban centres but in scenarios where i&#x27;m not, the tree data is almost always more relevant than the buildings or elevation (Ontario is pretty flat and thats 99% of my users)<p>Keep up the great work!</div><br/><div id="36659033" class="c"><input type="checkbox" id="c-36659033" checked=""/><div class="controls bullet"><span class="by">tppiotrowski</span><span>|</span><a href="#36658942">parent</a><span>|</span><a href="#36662284">next</a><span>|</span><label class="collapse" for="c-36659033">[-]</label><label class="expand" for="c-36659033">[2 more]</label></div><br/><div class="children"><div class="content">Thanks Andrew. Still struggling a bit with the business&#x2F;marketing side of things but the idea appears popular and the work itself is fun and fulfilling.<p>Thanks again for your support.</div><br/><div id="36662729" class="c"><input type="checkbox" id="c-36662729" checked=""/><div class="controls bullet"><span class="by">mmyrte</span><span>|</span><a href="#36658942">root</a><span>|</span><a href="#36659033">parent</a><span>|</span><a href="#36662284">next</a><span>|</span><label class="collapse" for="c-36662729">[-]</label><label class="expand" for="c-36662729">[1 more]</label></div><br/><div class="children"><div class="content">Have you thought of marketing at cities 
or public sector consultancies for modelling urban heat islands? Might be handy to prioritize climate adaptation measures.</div><br/></div></div></div></div></div></div><div id="36662284" class="c"><input type="checkbox" id="c-36662284" checked=""/><div class="controls bullet"><span class="by">berlincount</span><span>|</span><a href="#36658942">prev</a><span>|</span><a href="#36661725">next</a><span>|</span><label class="collapse" for="c-36662284">[-]</label><label class="expand" for="c-36662284">[1 more]</label></div><br/><div class="children"><div class="content">Awesome project!<p>What about hosting the data in an S3 bucket with &quot;Requestor Pays&quot;? You&#x27;d only have the storage cost.<p>Disables anonymous access (so would a Dropbox share) but reduces your cost massively.<p><a href="https:&#x2F;&#x2F;docs.aws.amazon.com&#x2F;AmazonS3&#x2F;latest&#x2F;userguide&#x2F;RequesterPaysBuckets.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;docs.aws.amazon.com&#x2F;AmazonS3&#x2F;latest&#x2F;userguide&#x2F;Reques...</a><p>You wouldn&#x27;t necessarily need an SQL frontend as it&#x27;s readonly anyway, and there are multiple ways of letting SQLite access databases in S3 buckets, e.g. <a href="https:&#x2F;&#x2F;github.com&#x2F;michalc&#x2F;sqlite-s3-query">https:&#x2F;&#x2F;github.com&#x2F;michalc&#x2F;sqlite-s3-query</a></div><br/></div></div><div id="36661725" class="c"><input type="checkbox" id="c-36661725" checked=""/><div class="controls bullet"><span class="by">crtified</span><span>|</span><a href="#36662284">prev</a><span>|</span><a href="#36660756">next</a><span>|</span><label class="collapse" for="c-36661725">[-]</label><label class="expand" for="c-36661725">[1 more]</label></div><br/><div class="children"><div class="content">Love it.<p>Vaguely related and potentially boring ramble, from the perspective of a dinosaur&#x2F;former geospatial tech : starting in the 2000&#x27;s, we went through the emergence of the trend where local governments commissioned (part-)district-wide LiDAR fly-overs, and even better, were willing to release the resulting digital data to the public.<p>Even over a decade ago, we private sector techs were receiving those city-wide LiDAR datasets en-masse, for our everyday usage in small scale analysis, maps and plans.<p>The data sharing policies of local governments did (and probably still do) vary widely between different areas, but sometimes, the LiDAR data would be passed on in the form of multiple layers : &quot;ground terrain&quot;, &quot;buildings&quot;, &quot;tree canopy&quot;, as initially captured and computed by the LiDAR operators by way of varying frequencies.<p>We office techs would figure out and run the procedures necessary to adapt the data to any given request. We usually used commercial software and routines to create small scale product, and analysis of this precise nature - sun&#x2F;shade, and viewshed (or &quot;what a viewer will see, from a given point&quot;), were a couple of services that were called upon, even back then.<p>The early seeds of inclusion of tree canopy LiDAR specifically in such work, at a small neighbourhood scale, began to percolate through the private sector (yes, the seeds percolated, thank you metaphor gods), but it was new and rare, and to see this work now at large scale is heartening.<p>While my dinosaur experience includes very little regarding the serving of large scale data online, dealing with larger scale raw geospatial datasets has always been one of, if not the, key challenges of working in this area. All of the work boils down to the translation or abstraction of those sources, into efficient, easily digestible and suitably focused outputs.<p>In that sense, the CS, and more specifically data science, aspects of this type of work are what really drive the practical implementation of such innovations at large scale.</div><br/></div></div><div id="36660756" class="c"><input type="checkbox" id="c-36660756" checked=""/><div class="controls bullet"><span class="by">bee_rider</span><span>|</span><a href="#36661725">prev</a><span>|</span><a href="#36659432">next</a><span>|</span><label class="collapse" for="c-36660756">[-]</label><label class="expand" for="c-36660756">[4 more]</label></div><br/><div class="children"><div class="content">This is neat.<p>I guess you are building the tool mostly (is this right?), but what sort of things are&#x2F;do you imagine your users using it for? Is it granular enough to help, like, help plan a home solar installation?<p>It would be a neat, if slightly over-the-top, flex to have this in a flight simulator.</div><br/><div id="36661171" class="c"><input type="checkbox" id="c-36661171" checked=""/><div class="controls bullet"><span class="by">tppiotrowski</span><span>|</span><a href="#36660756">parent</a><span>|</span><a href="#36659432">next</a><span>|</span><label class="collapse" for="c-36661171">[-]</label><label class="expand" for="c-36661171">[3 more]</label></div><br/><div class="children"><div class="content">I think it&#x27;s granular enough for solar. I put a tool together for annual sunlight[1] charts but haven&#x27;t calculated the energy potential yet.<p>Some personal problems it solves for me:<p>- I hike&#x2F;ski&#x2F;climb a lot and want to know how late I can sleep in and still avoid the worst of the sun [2]<p>- I&#x27;m getting married this year and had wedding photos taken in a meadow in the mountains and we needed to set a time to meet with the photographer for a 2 hour session where we would still get sun but as late in the evening as possible.<p>- We&#x27;re getting married in a back yard and want to place tables in a shady location for 5pm dinner<p>- I have a car I use occasionally and want to park it in a location that receives very little sun so the rubber&#x2F;paint doesn&#x27;t deteriorate as fast [3]<p>- We have a small van we take to the mountains and want to park it in the shade to keep it cool or sun to charge solar panels.<p>- etc, etc, etc<p>All these use-cases would be enhanced by trees and I can do it on my local machine but want to share if other people have similar needs.<p>[1] <a href="https:&#x2F;&#x2F;shademap.app&#x2F;sunchart&#x2F;#15&#x2F;47.61754&#x2F;-122.34365" rel="nofollow noreferrer">https:&#x2F;&#x2F;shademap.app&#x2F;sunchart&#x2F;#15&#x2F;47.61754&#x2F;-122.34365</a><p>[2] <a href="https:&#x2F;&#x2F;shademap.app&#x2F;shadeprofile&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;shademap.app&#x2F;shadeprofile&#x2F;</a><p>[3] <a href="https:&#x2F;&#x2F;shademap.app&#x2F;@47.61767,-122.34993,16.13693z,1688954430277t,0b,0p,1m!1688905293677!1688962110126,qU3BhY2UgbmVlZGxlIA==!47.62051!-122.34928" rel="nofollow noreferrer">https:&#x2F;&#x2F;shademap.app&#x2F;@47.61767,-122.34993,16.13693z,16889544...</a></div><br/><div id="36661738" class="c"><input type="checkbox" id="c-36661738" checked=""/><div class="controls bullet"><span class="by">Pabloski80</span><span>|</span><a href="#36660756">root</a><span>|</span><a href="#36661171">parent</a><span>|</span><a href="#36661718">next</a><span>|</span><label class="collapse" for="c-36661738">[-]</label><label class="expand" for="c-36661738">[1 more]</label></div><br/><div class="children"><div class="content">Shademaps for the applucation for FV planning and optimization sounds cool.<p>Could they be helpful for agriculture planning, for example vineyards etc?<p>Another bunch could perhaps be the mobile bots which need to follow the sun or the shadow, either way.</div><br/></div></div><div id="36661718" class="c"><input type="checkbox" id="c-36661718" checked=""/><div class="controls bullet"><span class="by">tdvtg</span><span>|</span><a href="#36660756">root</a><span>|</span><a href="#36661171">parent</a><span>|</span><a href="#36661738">prev</a><span>|</span><a href="#36659432">next</a><span>|</span><label class="collapse" for="c-36661718">[-]</label><label class="expand" for="c-36661718">[1 more]</label></div><br/><div class="children"><div class="content">I have also used shademaps for my project on assessing walkability! While coverage for my country is pretty patchy, it helps looking at things at a glance. I used some maps to analyze correlation between urban heat islands, and the effect of tree presence and artificial shade.</div><br/></div></div></div></div></div></div><div id="36659432" class="c"><input type="checkbox" id="c-36659432" checked=""/><div class="controls bullet"><span class="by">punnerud</span><span>|</span><a href="#36660756">prev</a><span>|</span><a href="#36661606">next</a><span>|</span><label class="collapse" for="c-36659432">[-]</label><label class="expand" for="c-36659432">[2 more]</label></div><br/><div class="children"><div class="content">Something that could be converted into SQLite database and served as static file at a fraction of the cost?
<a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=27016630">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=27016630</a><p>Range request in HTTP is doing the magic, but that part is already “solved”</div><br/><div id="36659692" class="c"><input type="checkbox" id="c-36659692" checked=""/><div class="controls bullet"><span class="by">Soupy</span><span>|</span><a href="#36659432">parent</a><span>|</span><a href="#36661606">next</a><span>|</span><label class="collapse" for="c-36659692">[-]</label><label class="expand" for="c-36659692">[1 more]</label></div><br/><div class="children"><div class="content">that&#x27;s essentially the route that Mapbox went down and they&#x27;ve even invented an entire mbtiles file format that essentially is just a sqlite db for doing these kinds of queries on the server<p>it&#x27;s the &quot;status quo&quot; approach today in the industry, but it has some downsides still especially for smaller builders (ie me):<p>1. i&#x27;d have to run a separate tile server to take in the tile requests and convert them to &quot;sql&quot; requests (or mbtile requests) under the hood, and I&#x27;m just not a fan of more moving parts
2. I&#x27;d have to take my 10+ TB (and growing) of geotiffs and process them all into mbtiles which is a huge compute and walltime cost
3. the resulting mbtiles end up being similar in size at best, but at worst far larger than the original geotiffs so it balloons up the hosting and egress costs in exchange for faster requests. this is a great compression optimization breakdown for geotiffs that dives into this if you&#x27;re interested - <a href="https:&#x2F;&#x2F;blog.cleverelephant.ca&#x2F;2015&#x2F;02&#x2F;geotiff-compression-for-dummies.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;blog.cleverelephant.ca&#x2F;2015&#x2F;02&#x2F;geotiff-compression-f...</a><p>anyways, I&#x27;m sure ted has his own thoughts as well but this is at least what I&#x27;ve taken away from this space after diving into it with fresh eyes in the past few months</div><br/></div></div></div></div><div id="36661606" class="c"><input type="checkbox" id="c-36661606" checked=""/><div class="controls bullet"><span class="by">Pabloski80</span><span>|</span><a href="#36659432">prev</a><span>|</span><a href="#36661587">next</a><span>|</span><label class="collapse" for="c-36661606">[-]</label><label class="expand" for="c-36661606">[1 more]</label></div><br/><div class="children"><div class="content">I think I would try to use cloud first, or for completely non-profit projects - the crowdsourcing&#x2F;distributed_computation, perhaps with help of people from projects like OpenStreetMap.</div><br/></div></div><div id="36659529" class="c"><input type="checkbox" id="c-36659529" checked=""/><div class="controls bullet"><span class="by">veec_cas_tant</span><span>|</span><a href="#36661587">prev</a><span>|</span><a href="#36660731">next</a><span>|</span><label class="collapse" for="c-36659529">[-]</label><label class="expand" for="c-36659529">[1 more]</label></div><br/><div class="children"><div class="content">Wow, this is very neat. Awesome project</div><br/></div></div><div id="36660731" class="c"><input type="checkbox" id="c-36660731" checked=""/><div class="controls bullet"><span class="by">mempko</span><span>|</span><a href="#36659529">prev</a><span>|</span><label class="collapse" for="c-36660731">[-]</label><label class="expand" for="c-36660731">[1 more]</label></div><br/><div class="children"><div class="content">Regarding hosting, have people forgotten about BitTorrent already?</div><br/></div></div></div></div></div></div></div></body></html>