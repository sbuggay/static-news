<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1691917258801" as="style"/><link rel="stylesheet" href="styles.css?v=1691917258801"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://blog.podman.io/2023/08/podman-v4-6-introduces-podmansh-a-revolutionary-login-shell/">Podman v4.6 Introduces Podmansh: A Revolutionary Login Shell</a> <span class="domain">(<a href="https://blog.podman.io">blog.podman.io</a>)</span></div><div class="subtext"><span>shallow-mind</span> | <span>17 comments</span></div><br/><div><div id="37107505" class="c"><input type="checkbox" id="c-37107505" checked=""/><div class="controls bullet"><span class="by">ximm</span><span>|</span><a href="#37107779">next</a><span>|</span><label class="collapse" for="c-37107505">[-]</label><label class="expand" for="c-37107505">[2 more]</label></div><br/><div class="children"><div class="content">I wouldn&#x27;t call that revolutionary. As far as I understand, this is a simple alias to something like `podman exec -it somecontainer bash`. We were able to do this for a long time. I mean, it is nice that they provide a simple alias for that. But the marketing talk is a bit much for my taste.</div><br/><div id="37107874" class="c"><input type="checkbox" id="c-37107874" checked=""/><div class="controls bullet"><span class="by">choppaface</span><span>|</span><a href="#37107505">parent</a><span>|</span><a href="#37107779">next</a><span>|</span><label class="collapse" for="c-37107874">[-]</label><label class="expand" for="c-37107874">[1 more]</label></div><br/><div class="children"><div class="content">The feature is more similar to e.g. dockersh than just exec <a href="https:&#x2F;&#x2F;github.com&#x2F;Yelp&#x2F;dockersh">https:&#x2F;&#x2F;github.com&#x2F;Yelp&#x2F;dockersh</a><p>Or e.g. change ssh config to use ForceCommand.<p>That said, the main benefit is not just that a shell gets a container but that you can easily compose this feature with the container &#x2F; image ecosystem to deploy specialized shells.  Perhaps even you don’t need a VM to service the request but rather a container orchestrator ..</div><br/></div></div></div></div><div id="37107779" class="c"><input type="checkbox" id="c-37107779" checked=""/><div class="controls bullet"><span class="by">pxc</span><span>|</span><a href="#37107505">prev</a><span>|</span><a href="#37107237">next</a><span>|</span><label class="collapse" for="c-37107779">[-]</label><label class="expand" for="c-37107779">[1 more]</label></div><br/><div class="children"><div class="content">See also GNU Rush:<p>&gt; GNU Rush is a Restricted User Shell, designed for sites providing limited remote access to their resources, such as, for example, savannah.gnu.org. Its main program, rush, is configured as a user login shell for users that are allowed only remote access to the machine. Using a flexible configuration file, GNU Rush gives administrator complete control over the command lines that users execute, and allows to tune the usage of system resources, such as virtual memory, CPU time, etc. on a per-user basis.<p>&gt; In particular, GNU Rush allows to run remote programs in a chrooted environment, which helps tighten security when offering access over such programs as sftp-server or scp, that access the entire file system by default.<p><a href="https:&#x2F;&#x2F;www.gnu.org.ua&#x2F;software&#x2F;rush" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.gnu.org.ua&#x2F;software&#x2F;rush</a></div><br/></div></div><div id="37107237" class="c"><input type="checkbox" id="c-37107237" checked=""/><div class="controls bullet"><span class="by">wejick</span><span>|</span><a href="#37107779">prev</a><span>|</span><a href="#37107209">next</a><span>|</span><label class="collapse" for="c-37107237">[-]</label><label class="expand" for="c-37107237">[2 more]</label></div><br/><div class="children"><div class="content">Several times I tried to use podman on mac to replace docker tooling, the idea of daemonless-rootless is enticing. However, there&#x27;s always things that doesn&#x27;t work or work differently on podman that make it not easy to work in team that predominantly using docker.
Usually it&#x27;s about networking setup or compose compatibility.<p>Maybe someone encountered similar situation can share your experience.</div><br/><div id="37107320" class="c"><input type="checkbox" id="c-37107320" checked=""/><div class="controls bullet"><span class="by">rgovostes</span><span>|</span><a href="#37107237">parent</a><span>|</span><a href="#37107209">next</a><span>|</span><label class="collapse" for="c-37107320">[-]</label><label class="expand" for="c-37107320">[1 more]</label></div><br/><div class="children"><div class="content">I had the same experience for a while, and was a little bitter about repeatedly taking them at their word that you could transparently `alias docker=podman`, even when Podman 4.0 didn&#x27;t even support volume mounts from the host without jumping through hoops.<p>I suggested that the team document or at least label compatibility issues so users are informed about them, but they rejected the idea[0], recommending instead that users keep abreast of changes to a 35 page troubleshooting file.<p>That said, I&#x27;ve been living on it full time for a few months, and it&#x27;s working well. I&#x27;m using the Docker CLI with Podman providing the backend implementation. Biggest caveats: Mounting volumes from the host is still a little limited. It doesn&#x27;t play nice with giving docker.sock back to Docker Engine (wontfix[1]). The --platform flag was broken but should be fixed in 4.6.<p>0: <a href="https:&#x2F;&#x2F;github.com&#x2F;containers&#x2F;podman&#x2F;discussions&#x2F;14430">https:&#x2F;&#x2F;github.com&#x2F;containers&#x2F;podman&#x2F;discussions&#x2F;14430</a><p>1: <a href="https:&#x2F;&#x2F;github.com&#x2F;containers&#x2F;podman&#x2F;issues&#x2F;18784">https:&#x2F;&#x2F;github.com&#x2F;containers&#x2F;podman&#x2F;issues&#x2F;18784</a></div><br/></div></div></div></div><div id="37107209" class="c"><input type="checkbox" id="c-37107209" checked=""/><div class="controls bullet"><span class="by">WirelessGigabit</span><span>|</span><a href="#37107237">prev</a><span>|</span><a href="#37107662">next</a><span>|</span><label class="collapse" for="c-37107209">[-]</label><label class="expand" for="c-37107209">[2 more]</label></div><br/><div class="children"><div class="content">I do think it&#x27;s sad that Podman doesn&#x27;t offer official Ubuntu packages. 
I&#x27;m stuck at v3 from Ubuntu itself.<p>It feels hacky: 
&gt; CAUTION: The Kubic repo is NOT recommended for production use.</div><br/><div id="37107790" class="c"><input type="checkbox" id="c-37107790" checked=""/><div class="controls bullet"><span class="by">jackweirdy</span><span>|</span><a href="#37107209">parent</a><span>|</span><a href="#37107662">next</a><span>|</span><label class="collapse" for="c-37107790">[-]</label><label class="expand" for="c-37107790">[1 more]</label></div><br/><div class="children"><div class="content">In the meantime I maintain an unofficial apt source that autogenerates packages via GitHub actions - <a href="https:&#x2F;&#x2F;github.com&#x2F;notbobthebuilder&#x2F;podman">https:&#x2F;&#x2F;github.com&#x2F;notbobthebuilder&#x2F;podman</a></div><br/></div></div></div></div><div id="37107662" class="c"><input type="checkbox" id="c-37107662" checked=""/><div class="controls bullet"><span class="by">kristaps</span><span>|</span><a href="#37107209">prev</a><span>|</span><a href="#37107281">next</a><span>|</span><label class="collapse" for="c-37107662">[-]</label><label class="expand" for="c-37107662">[1 more]</label></div><br/><div class="children"><div class="content">Probably an 80s sysadmins dream, but are multi-user Unix machines really that much of a thing currently?</div><br/></div></div><div id="37107281" class="c"><input type="checkbox" id="c-37107281" checked=""/><div class="controls bullet"><span class="by">DangitBobby</span><span>|</span><a href="#37107662">prev</a><span>|</span><label class="collapse" for="c-37107281">[-]</label><label class="expand" for="c-37107281">[8 more]</label></div><br/><div class="children"><div class="content">Can any grey beard types explain to me why someone would throw users into containers instead of their own user accounts with permissions? Why is the desired level of isolation not possible or too difficult without them?</div><br/><div id="37107378" class="c"><input type="checkbox" id="c-37107378" checked=""/><div class="controls bullet"><span class="by">asah</span><span>|</span><a href="#37107281">parent</a><span>|</span><a href="#37107697">next</a><span>|</span><label class="collapse" for="c-37107378">[-]</label><label class="expand" for="c-37107378">[3 more]</label></div><br/><div class="children"><div class="content">The regular shell is a huge attack surface, including user-to-user attacks and overly permissive network access.<p>Frankly, ssh-to-container is a &quot;slaps forehead&quot; obvious solution and I&#x27;m surprised none of us thought of it before - I&#x27;d love to see it as a standard option in the OS, e.g. chsh allows you to specify a container and optional port and volume mappings.<p>In the old days, we&#x27;d (try to) use chroot, but that has all sorts of big problems with needing access to various directories, and those batches begat patches...</div><br/><div id="37107825" class="c"><input type="checkbox" id="c-37107825" checked=""/><div class="controls bullet"><span class="by">ndmrs</span><span>|</span><a href="#37107281">root</a><span>|</span><a href="#37107378">parent</a><span>|</span><a href="#37107783">next</a><span>|</span><label class="collapse" for="c-37107825">[-]</label><label class="expand" for="c-37107825">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Frankly, ssh-to-container is a &quot;slaps forehead&quot; obvious solution and I&#x27;m surprised none of us thought of it before<p>I think CNCF is at the point where you can assume that &quot;there&#x27;s a CNCF project for that&quot; is true for anything container&#x2F;kubernetes related.<p><a href="https:&#x2F;&#x2F;www.cncf.io&#x2F;projects&#x2F;containerssh&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.cncf.io&#x2F;projects&#x2F;containerssh&#x2F;</a></div><br/></div></div><div id="37107783" class="c"><input type="checkbox" id="c-37107783" checked=""/><div class="controls bullet"><span class="by">OlympusMonds</span><span>|</span><a href="#37107281">root</a><span>|</span><a href="#37107378">parent</a><span>|</span><a href="#37107825">prev</a><span>|</span><a href="#37107697">next</a><span>|</span><label class="collapse" for="c-37107783">[-]</label><label class="expand" for="c-37107783">[1 more]</label></div><br/><div class="children"><div class="content">We replicated the behavior (somewhat) of the article, using podman, as a way to allow devs to SSH into a container that was identical to the CI&#x2F;CD environment.
It also mapped in their NFS home drive, so they could quickly SSH into the container to try a build, to see if it was their dev machine, or a real issue.
It did allow them to choose their container though.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;SEL4PROJ&#x2F;imagesh&#x2F;tree&#x2F;master">https:&#x2F;&#x2F;github.com&#x2F;SEL4PROJ&#x2F;imagesh&#x2F;tree&#x2F;master</a></div><br/></div></div></div></div><div id="37107697" class="c"><input type="checkbox" id="c-37107697" checked=""/><div class="controls bullet"><span class="by">tyingq</span><span>|</span><a href="#37107281">parent</a><span>|</span><a href="#37107378">prev</a><span>|</span><a href="#37107367">next</a><span>|</span><label class="collapse" for="c-37107697">[-]</label><label class="expand" for="c-37107697">[1 more]</label></div><br/><div class="children"><div class="content">Not sure.  When the shared hosting pattern was popular, it needed to support the users running background daemons that ran all the time, plus things like &quot;cron&quot; and &quot;at&quot;, etc.  It&#x27;s not very clear, but the article reads like none of that would work.</div><br/></div></div><div id="37107367" class="c"><input type="checkbox" id="c-37107367" checked=""/><div class="controls bullet"><span class="by">usrnm</span><span>|</span><a href="#37107281">parent</a><span>|</span><a href="#37107697">prev</a><span>|</span><label class="collapse" for="c-37107367">[-]</label><label class="expand" for="c-37107367">[3 more]</label></div><br/><div class="children"><div class="content">You can&#x27;t limit resources like CPU and memory for users.</div><br/><div id="37107412" class="c"><input type="checkbox" id="c-37107412" checked=""/><div class="controls bullet"><span class="by">dijit</span><span>|</span><a href="#37107281">root</a><span>|</span><a href="#37107367">parent</a><span>|</span><a href="#37107395">next</a><span>|</span><label class="collapse" for="c-37107412">[-]</label><label class="expand" for="c-37107412">[1 more]</label></div><br/><div class="children"><div class="content">As much as I complain about systemd being overly complex and the lock-in that follows:<p><pre><code>    sudo systemctl edit --force user-1234.slice

    [Slice]
    MemoryMax=1G
    CPUQuota=10%
</code></pre>
It&#x27;s also something that&#x27;s been available on the other UNIX-likes (FreeBSD&#x2F;Solaris) since essentially forever.</div><br/></div></div><div id="37107395" class="c"><input type="checkbox" id="c-37107395" checked=""/><div class="controls bullet"><span class="by">inferiorhuman</span><span>|</span><a href="#37107281">root</a><span>|</span><a href="#37107367">parent</a><span>|</span><a href="#37107412">prev</a><span>|</span><label class="collapse" for="c-37107395">[-]</label><label class="expand" for="c-37107395">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;man.freebsd.org&#x2F;cgi&#x2F;man.cgi?query=login.conf&amp;apropos=0&amp;sektion=5&amp;manpath=FreeBSD+13.2-RELEASE&amp;arch=default&amp;format=html" rel="nofollow noreferrer">https:&#x2F;&#x2F;man.freebsd.org&#x2F;cgi&#x2F;man.cgi?query=login.conf&amp;apropos...</a><p><a href="https:&#x2F;&#x2F;man.freebsd.org&#x2F;cgi&#x2F;man.cgi?query=rctl&amp;apropos=0&amp;sektion=0&amp;manpath=FreeBSD+13.2-RELEASE&amp;arch=default&amp;format=html" rel="nofollow noreferrer">https:&#x2F;&#x2F;man.freebsd.org&#x2F;cgi&#x2F;man.cgi?query=rctl&amp;apropos=0&amp;sek...</a><p><a href="https:&#x2F;&#x2F;www.tecmint.com&#x2F;set-limits-on-user-processes-using-ulimit-in-linux&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.tecmint.com&#x2F;set-limits-on-user-processes-using-u...</a></div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>