<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1729155666290" as="style"/><link rel="stylesheet" href="styles.css?v=1729155666290"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://jank-lang.org/blog/2024-10-14-llvm-ir/">Jank development update – Moving to LLVM IR</a> <span class="domain">(<a href="https://jank-lang.org">jank-lang.org</a>)</span></div><div class="subtext"><span>refset</span> | <span>12 comments</span></div><br/><div><div id="41867415" class="c"><input type="checkbox" id="c-41867415" checked=""/><div class="controls bullet"><span class="by">fire_lake</span><span>|</span><a href="#41865268">next</a><span>|</span><label class="collapse" for="c-41867415">[-]</label><label class="expand" for="c-41867415">[1 more]</label></div><br/><div class="children"><div class="content">IIUIR, Clojure uses the JVM garbage collector to clean up memory.<p>How does Jank do this whilst keeping the user code… still Clojure?</div><br/></div></div><div id="41865268" class="c"><input type="checkbox" id="c-41865268" checked=""/><div class="controls bullet"><span class="by">masijo</span><span>|</span><a href="#41867415">prev</a><span>|</span><a href="#41867167">next</a><span>|</span><label class="collapse" for="c-41865268">[-]</label><label class="expand" for="c-41865268">[1 more]</label></div><br/><div class="children"><div class="content">Incredible work. A native Clojure would be a dream come true!<p>Wish jank the best of lucks. Hope I can contribute soon.</div><br/></div></div><div id="41867167" class="c"><input type="checkbox" id="c-41867167" checked=""/><div class="controls bullet"><span class="by">RossBencina</span><span>|</span><a href="#41865268">prev</a><span>|</span><a href="#41867134">next</a><span>|</span><label class="collapse" for="c-41867167">[-]</label><label class="expand" for="c-41867167">[4 more]</label></div><br/><div class="children"><div class="content">Is LLVM IR a stable target these days? I once heard of a project that got bit pretty hard with LLVM IR interface changes in the (not all that recent) past.</div><br/><div id="41867338" class="c"><input type="checkbox" id="c-41867338" checked=""/><div class="controls bullet"><span class="by">michielderhaeg</span><span>|</span><a href="#41867167">parent</a><span>|</span><a href="#41867511">next</a><span>|</span><label class="collapse" for="c-41867338">[-]</label><label class="expand" for="c-41867338">[2 more]</label></div><br/><div class="children"><div class="content">Absolutely not. They do invasive changes all the time. At work we maintain an LLVM compatibility library that provides a stable interface across different LLVM versions. It has grown quite big over the years. The pure C interface is in comparison much more stable, but also quite limited.<p>Not just the API changes, the LLVM IR syntax can change drastically as well. E.g. not too long ago they switched from types pointer types to opaque pointers. `i32*` just becomes `ptr`. [1]<p>[1] <a href="https:&#x2F;&#x2F;llvm.org&#x2F;docs&#x2F;OpaquePointers.html" rel="nofollow">https:&#x2F;&#x2F;llvm.org&#x2F;docs&#x2F;OpaquePointers.html</a></div><br/><div id="41867508" class="c"><input type="checkbox" id="c-41867508" checked=""/><div class="controls bullet"><span class="by">fooker</span><span>|</span><a href="#41867167">root</a><span>|</span><a href="#41867338">parent</a><span>|</span><a href="#41867511">next</a><span>|</span><label class="collapse" for="c-41867508">[-]</label><label class="expand" for="c-41867508">[1 more]</label></div><br/><div class="children"><div class="content">IR can be auto-upgraded between LLVM versions.</div><br/></div></div></div></div><div id="41867511" class="c"><input type="checkbox" id="c-41867511" checked=""/><div class="controls bullet"><span class="by">fooker</span><span>|</span><a href="#41867167">parent</a><span>|</span><a href="#41867338">prev</a><span>|</span><a href="#41867134">next</a><span>|</span><label class="collapse" for="c-41867511">[-]</label><label class="expand" for="c-41867511">[1 more]</label></div><br/><div class="children"><div class="content">As long as you use the C++ API, the pace of change is reasonable.<p>If you try to keep by by generating textual IR, it can be a nightmare.</div><br/></div></div></div></div><div id="41867134" class="c"><input type="checkbox" id="c-41867134" checked=""/><div class="controls bullet"><span class="by">sorrythanks</span><span>|</span><a href="#41867167">prev</a><span>|</span><a href="#41864694">next</a><span>|</span><label class="collapse" for="c-41867134">[-]</label><label class="expand" for="c-41867134">[1 more]</label></div><br/><div class="children"><div class="content">This is a wonderful project, I&#x27;m very excited for it. I look forward to reading about the WebAssembly plan</div><br/></div></div><div id="41864694" class="c"><input type="checkbox" id="c-41864694" checked=""/><div class="controls bullet"><span class="by">anovick</span><span>|</span><a href="#41867134">prev</a><span>|</span><a href="#41866882">next</a><span>|</span><label class="collapse" for="c-41864694">[-]</label><label class="expand" for="c-41864694">[1 more]</label></div><br/><div class="children"><div class="content">I love this writing style, very easy to read.
Best of luck with the optimizations effort! looking forward to hearing more about this project.</div><br/></div></div><div id="41866882" class="c"><input type="checkbox" id="c-41866882" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#41864694">prev</a><span>|</span><a href="#41866356">next</a><span>|</span><label class="collapse" for="c-41866882">[-]</label><label class="expand" for="c-41866882">[1 more]</label></div><br/><div class="children"><div class="content">Great that it is already making use of C++20 modules.</div><br/></div></div><div id="41866356" class="c"><input type="checkbox" id="c-41866356" checked=""/><div class="controls bullet"><span class="by">rads</span><span>|</span><a href="#41866882">prev</a><span>|</span><a href="#41865152">next</a><span>|</span><label class="collapse" for="c-41866356">[-]</label><label class="expand" for="c-41866356">[1 more]</label></div><br/><div class="children"><div class="content">Awesome work Jeaye!</div><br/></div></div><div id="41865152" class="c"><input type="checkbox" id="c-41865152" checked=""/><div class="controls bullet"><span class="by">eikenberry</span><span>|</span><a href="#41866356">prev</a><span>|</span><label class="collapse" for="c-41865152">[-]</label><label class="expand" for="c-41865152">[1 more]</label></div><br/><div class="children"><div class="content">Nice to see a language take developer UX seriously and focus on good compilation times. I wish this was more common.</div><br/></div></div></div></div></div></div></div></body></html>