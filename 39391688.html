<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1708074052207" as="style"/><link rel="stylesheet" href="styles.css?v=1708074052207"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://opensource.googleblog.com/2024/02/magika-ai-powered-fast-and-efficient-file-type-identification.html">Magika: AI powered fast and efficient file type identification</a> <span class="domain">(<a href="https://opensource.googleblog.com">opensource.googleblog.com</a>)</span></div><div class="subtext"><span>alphabetting</span> | <span>92 comments</span></div><br/><div><div id="39394737" class="c"><input type="checkbox" id="c-39394737" checked=""/><div class="controls bullet"><span class="by">awaythrow999</span><span>|</span><a href="#39392090">next</a><span>|</span><label class="collapse" for="c-39394737">[-]</label><label class="expand" for="c-39394737">[1 more]</label></div><br/><div class="children"><div class="content">Wonder how this would handle a polyglot[0][1], that is valid as a PDF document, a ZIP archive, and a Bash script that runs a Python webserver, which hosts
    Kaitai Struct’s WebIDE which, allowing you to view the file’s own annotated bytes.<p>[0]: <a href="https:&#x2F;&#x2F;www.alchemistowl.org&#x2F;pocorgtfo&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.alchemistowl.org&#x2F;pocorgtfo&#x2F;</a><p>[1]: <a href="https:&#x2F;&#x2F;www.alchemistowl.org&#x2F;pocorgtfo&#x2F;pocorgtfo16.pdf" rel="nofollow">https:&#x2F;&#x2F;www.alchemistowl.org&#x2F;pocorgtfo&#x2F;pocorgtfo16.pdf</a></div><br/></div></div><div id="39392090" class="c"><input type="checkbox" id="c-39392090" checked=""/><div class="controls bullet"><span class="by">stevepike</span><span>|</span><a href="#39394737">prev</a><span>|</span><a href="#39392797">next</a><span>|</span><label class="collapse" for="c-39392090">[-]</label><label class="expand" for="c-39392090">[12 more]</label></div><br/><div class="children"><div class="content">Oh man, this brings me back! Almost 10 years ago I was working on a rails app trying to detect the file type of uploaded spreadsheets (xlsx files were being detected as application&#x2F;zip, which is technically true but useless).<p>I found &quot;magic&quot; that could detect these and submitted a patch at <a href="https:&#x2F;&#x2F;bugs.freedesktop.org&#x2F;show_bug.cgi?id=78797" rel="nofollow">https:&#x2F;&#x2F;bugs.freedesktop.org&#x2F;show_bug.cgi?id=78797</a>. My patch got rejected for needing to look at the first 3KB bytes of the file to figure out the type. They had a hard limit that they wouldn&#x27;t see past the first 256 bytes. Now in 2024 we&#x27;re doing this with deep learning! It&#x27;d be cool if google released some speed performance benchmarks here against the old-fashioned implementations. Obviously it&#x27;d be slower, but is it 1000x or 10^6x?</div><br/><div id="39393682" class="c"><input type="checkbox" id="c-39393682" checked=""/><div class="controls bullet"><span class="by">ebursztein</span><span>|</span><a href="#39392090">parent</a><span>|</span><a href="#39393821">next</a><span>|</span><label class="collapse" for="c-39393682">[-]</label><label class="expand" for="c-39393682">[6 more]</label></div><br/><div class="children"><div class="content">Co-author of Magika here (Elie) so we didn&#x27;t include the measurements in the blog post to avoid making it too long but we did those measurements.<p>Overall file takes about 6ms (single file) 2.26ms per files when scanning multiples. Magika is at 65ms single file and 5.3ms when scanning multiples.<p>So Magika is for the worst case scenario about 10x slower due to the time it takes to load the model and 2x slower on repeated detection. This is why we said it is not that much slower.<p>We will have more performance measurements in the upcoming research paper. Hope that answer the question</div><br/><div id="39393862" class="c"><input type="checkbox" id="c-39393862" checked=""/><div class="controls bullet"><span class="by">jpk</span><span>|</span><a href="#39392090">root</a><span>|</span><a href="#39393682">parent</a><span>|</span><a href="#39393821">next</a><span>|</span><label class="collapse" for="c-39393862">[-]</label><label class="expand" for="c-39393862">[5 more]</label></div><br/><div class="children"><div class="content">Do you have a sense of performance in terms of energy use?  2x slower is fine, but is that at the same wattage, or more?</div><br/><div id="39394028" class="c"><input type="checkbox" id="c-39394028" checked=""/><div class="controls bullet"><span class="by">alephnan</span><span>|</span><a href="#39392090">root</a><span>|</span><a href="#39393862">parent</a><span>|</span><a href="#39393821">next</a><span>|</span><label class="collapse" for="c-39394028">[-]</label><label class="expand" for="c-39394028">[4 more]</label></div><br/><div class="children"><div class="content">That sounds like a nit &#x2F; premature optimization.<p>Electricity is cheap. If this is sufficiently or actually important for your org, you should measure it yourself. There are too many variables and factors subject to your org’s hardware.</div><br/><div id="39394118" class="c"><input type="checkbox" id="c-39394118" checked=""/><div class="controls bullet"><span class="by">djxfade</span><span>|</span><a href="#39392090">root</a><span>|</span><a href="#39394028">parent</a><span>|</span><a href="#39393821">next</a><span>|</span><label class="collapse" for="c-39394118">[-]</label><label class="expand" for="c-39394118">[3 more]</label></div><br/><div class="children"><div class="content">Totally disagree. Most end users are on laptops and mobile devices these days, not desktop towers. Thus power efficiency is important for battery life. Performance per watt would be an interesting comparison.</div><br/><div id="39394494" class="c"><input type="checkbox" id="c-39394494" checked=""/><div class="controls bullet"><span class="by">true_religion</span><span>|</span><a href="#39392090">root</a><span>|</span><a href="#39394118">parent</a><span>|</span><a href="#39394553">next</a><span>|</span><label class="collapse" for="c-39394494">[-]</label><label class="expand" for="c-39394494">[1 more]</label></div><br/><div class="children"><div class="content">What end users are working with arbitrary files that they don’t know the identification of?<p>This entire use case seems to be one suited for servers handling user media.</div><br/></div></div><div id="39394553" class="c"><input type="checkbox" id="c-39394553" checked=""/><div class="controls bullet"><span class="by">underdeserver</span><span>|</span><a href="#39392090">root</a><span>|</span><a href="#39394118">parent</a><span>|</span><a href="#39394494">prev</a><span>|</span><a href="#39393821">next</a><span>|</span><label class="collapse" for="c-39394553">[-]</label><label class="expand" for="c-39394553">[1 more]</label></div><br/><div class="children"><div class="content">In general you&#x27;re right, but I can&#x27;t think of a single local use for identifying file types by a human on a laptop - at least, one with scale where this matters. It&#x27;s all going to be SaaS services where people upload stuff.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="39393821" class="c"><input type="checkbox" id="c-39393821" checked=""/><div class="controls bullet"><span class="by">metafunctor</span><span>|</span><a href="#39392090">parent</a><span>|</span><a href="#39393682">prev</a><span>|</span><a href="#39392340">next</a><span>|</span><label class="collapse" for="c-39393821">[-]</label><label class="expand" for="c-39393821">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve ended up implementing a layer on top of &quot;magic&quot; which, if magic detects application&#x2F;zip, reads the zip file manifest and checks for telltale file names to reliably detect Office files.<p>The &quot;magic&quot; library does not seem to be equipped with the capabilities needed to be robust against the zip manifest being ordered in a different way than expected.<p>But this deep learning approach... I don&#x27;t know.  It might be hard to shoehorn in to many applications where the traditional methods have negligible memory and compute costs and the accuracy is basically 100% for cases that matter (detecting particular file types of interest).   But when looking at a large random collection of unknown blobs, yeah, I can see how this could be great.</div><br/></div></div><div id="39392340" class="c"><input type="checkbox" id="c-39392340" checked=""/><div class="controls bullet"><span class="by">renonce</span><span>|</span><a href="#39392090">parent</a><span>|</span><a href="#39393821">prev</a><span>|</span><a href="#39392797">next</a><span>|</span><label class="collapse" for="c-39392340">[-]</label><label class="expand" for="c-39392340">[4 more]</label></div><br/><div class="children"><div class="content">From the first paragraph:<p>&gt; enabling precise file identification within milliseconds, even when running on a CPU.<p>Maybe your old-fashioned implementations were detecting in microseconds?</div><br/><div id="39392370" class="c"><input type="checkbox" id="c-39392370" checked=""/><div class="controls bullet"><span class="by">stevepike</span><span>|</span><a href="#39392090">root</a><span>|</span><a href="#39392340">parent</a><span>|</span><a href="#39393591">next</a><span>|</span><label class="collapse" for="c-39392370">[-]</label><label class="expand" for="c-39392370">[2 more]</label></div><br/><div class="children"><div class="content">Yeah I saw that, but that could cover a pretty wide range and it&#x27;s not clear to me whether that relies on preloading a model.</div><br/><div id="39393504" class="c"><input type="checkbox" id="c-39393504" checked=""/><div class="controls bullet"><span class="by">ryanjshaw</span><span>|</span><a href="#39392090">root</a><span>|</span><a href="#39392370">parent</a><span>|</span><a href="#39393591">next</a><span>|</span><label class="collapse" for="c-39393504">[-]</label><label class="expand" for="c-39393504">[1 more]</label></div><br/><div class="children"><div class="content">&gt; At inference time Magika uses Onnx as an inference engine to ensure files are identified in a matter of milliseconds, almost as fast as a non-AI tool even on CPU.</div><br/></div></div></div></div></div></div></div></div><div id="39392797" class="c"><input type="checkbox" id="c-39392797" checked=""/><div class="controls bullet"><span class="by">m0shen</span><span>|</span><a href="#39392090">prev</a><span>|</span><a href="#39394700">next</a><span>|</span><label class="collapse" for="c-39392797">[-]</label><label class="expand" for="c-39392797">[7 more]</label></div><br/><div class="children"><div class="content">As someone that has worked in a space that has to deal with uploaded files for the last few years, and someone who maintains a WASM libmagic Node package ( <a href="https:&#x2F;&#x2F;github.com&#x2F;moshen&#x2F;wasmagic">https:&#x2F;&#x2F;github.com&#x2F;moshen&#x2F;wasmagic</a> ) , I have to say I really love seeing new entries into the file type detection space.<p>Though I have to say when looking at the Node module, I don&#x27;t understand why they released it.<p>Their docs say it&#x27;s slow:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;google&#x2F;magika&#x2F;blob&#x2F;120205323e260dad4e58778093fb220aa1991c2b&#x2F;js&#x2F;README.md#L43-L44">https:&#x2F;&#x2F;github.com&#x2F;google&#x2F;magika&#x2F;blob&#x2F;120205323e260dad4e5877...</a><p>It loads the model an runtime:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;google&#x2F;magika&#x2F;blob&#x2F;120205323e260dad4e58778093fb220aa1991c2b&#x2F;js&#x2F;magika.js#L74-L75">https:&#x2F;&#x2F;github.com&#x2F;google&#x2F;magika&#x2F;blob&#x2F;120205323e260dad4e5877...</a><p>They mark it as Experimental in the documentation, but it seems like it was just made for the web demo.<p>Also as others have mentioned. The model appears to only detect 116 file types:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;google&#x2F;magika&#x2F;blob&#x2F;120205323e260dad4e58778093fb220aa1991c2b&#x2F;docs&#x2F;supported-content-types-list.md">https:&#x2F;&#x2F;github.com&#x2F;google&#x2F;magika&#x2F;blob&#x2F;120205323e260dad4e5877...</a><p>Where libmagic detects... a lot. Over 1600 last time I checked:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;file&#x2F;file&#x2F;tree&#x2F;4cbd5c8f0851201d203755b76cb66ba991ffd8be&#x2F;magic&#x2F;Magdir">https:&#x2F;&#x2F;github.com&#x2F;file&#x2F;file&#x2F;tree&#x2F;4cbd5c8f0851201d203755b76c...</a><p>I guess I&#x27;m confused by this release. Sure it detected most of my list of sample files, but in a sample set of 4 zip files, it misidentified one.</div><br/><div id="39392940" class="c"><input type="checkbox" id="c-39392940" checked=""/><div class="controls bullet"><span class="by">m0shen</span><span>|</span><a href="#39392797">parent</a><span>|</span><a href="#39393637">next</a><span>|</span><label class="collapse" for="c-39392940">[-]</label><label class="expand" for="c-39392940">[1 more]</label></div><br/><div class="children"><div class="content">Made a small test to try it out: <a href="https:&#x2F;&#x2F;gist.github.com&#x2F;moshen&#x2F;784ee4a38439f00b17855233617e9e13" rel="nofollow">https:&#x2F;&#x2F;gist.github.com&#x2F;moshen&#x2F;784ee4a38439f00b17855233617e9...</a><p><pre><code>    hyperfine .&#x2F;magika.bash .&#x2F;file.bash
    Benchmark 1: .&#x2F;magika.bash
      Time (mean ± σ):     706.2 ms ±  21.1 ms    [User: 10520.3 ms, System: 1604.6 ms]
      Range (min … max):   684.0 ms … 738.9 ms    10 runs
    
    Benchmark 2: .&#x2F;file.bash
      Time (mean ± σ):      23.6 ms ±   1.1 ms    [User: 15.7 ms, System: 7.9 ms]
      Range (min … max):    22.4 ms …  29.0 ms    111 runs
    
    Summary
      &#x27;.&#x2F;file.bash&#x27; ran
       29.88 ± 1.65 times faster than &#x27;.&#x2F;magika.bash&#x27;</code></pre></div><br/></div></div><div id="39393637" class="c"><input type="checkbox" id="c-39393637" checked=""/><div class="controls bullet"><span class="by">ebursztein</span><span>|</span><a href="#39392797">parent</a><span>|</span><a href="#39392940">prev</a><span>|</span><a href="#39392900">next</a><span>|</span><label class="collapse" for="c-39393637">[-]</label><label class="expand" for="c-39393637">[2 more]</label></div><br/><div class="children"><div class="content">We did release the npm package because indeed we create a web demo and thought people might want to also use it. We know it is not as fast as the python version or a C++ version -- which why we did mark it as experimental.<p>The release include the python package and the cli which are quite fast and is the main way we did expect people to use -- sorry if that hasn&#x27;t be clear in the post.<p>The goal of the release is to offer a tool that is far more accurate that other tools and works on the major file types as we hope it to be useful to the community.<p>Glad to hear it worked on your files</div><br/><div id="39393786" class="c"><input type="checkbox" id="c-39393786" checked=""/><div class="controls bullet"><span class="by">m0shen</span><span>|</span><a href="#39392797">root</a><span>|</span><a href="#39393637">parent</a><span>|</span><a href="#39392900">next</a><span>|</span><label class="collapse" for="c-39393786">[-]</label><label class="expand" for="c-39393786">[1 more]</label></div><br/><div class="children"><div class="content">Thank you for the release! I understand you&#x27;re just getting it out the door. I just hope to see it delivered as a native library or something more reusable.<p>I did try the python cli, but it seems to be about 30x slower than `file` for the random bag of files I checked.<p>I&#x27;ll probably take some time this weekend to make a couple of issues around misidentified files.<p>I&#x27;ll definitely be adding this to my toolset!</div><br/></div></div></div></div><div id="39392900" class="c"><input type="checkbox" id="c-39392900" checked=""/><div class="controls bullet"><span class="by">lebean</span><span>|</span><a href="#39392797">parent</a><span>|</span><a href="#39393637">prev</a><span>|</span><a href="#39394400">next</a><span>|</span><label class="collapse" for="c-39392900">[-]</label><label class="expand" for="c-39392900">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s for researchers, probably.</div><br/><div id="39392984" class="c"><input type="checkbox" id="c-39392984" checked=""/><div class="controls bullet"><span class="by">m0shen</span><span>|</span><a href="#39392797">root</a><span>|</span><a href="#39392900">parent</a><span>|</span><a href="#39394400">next</a><span>|</span><label class="collapse" for="c-39392984">[-]</label><label class="expand" for="c-39392984">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, there is this line:<p><pre><code>    By open-sourcing Magika, we aim to help other software improve their file identification accuracy and offer researchers a reliable method for identifying file types at scale.
</code></pre>
Which implies a production-ready release for general usage, as well as usage by security researchers.</div><br/></div></div></div></div></div></div><div id="39394700" class="c"><input type="checkbox" id="c-39394700" checked=""/><div class="controls bullet"><span class="by">Labo333</span><span>|</span><a href="#39392797">prev</a><span>|</span><a href="#39392130">next</a><span>|</span><label class="collapse" for="c-39394700">[-]</label><label class="expand" for="c-39394700">[1 more]</label></div><br/><div class="children"><div class="content">I wonder what the output will be on polyglot files like run-anywhere binaries produced by cosmopolitan [1]<p>[1]: <a href="https:&#x2F;&#x2F;justine.lol&#x2F;cosmopolitan&#x2F;" rel="nofollow">https:&#x2F;&#x2F;justine.lol&#x2F;cosmopolitan&#x2F;</a></div><br/></div></div><div id="39392130" class="c"><input type="checkbox" id="c-39392130" checked=""/><div class="controls bullet"><span class="by">lifthrasiir</span><span>|</span><a href="#39394700">prev</a><span>|</span><a href="#39391917">next</a><span>|</span><label class="collapse" for="c-39392130">[-]</label><label class="expand" for="c-39392130">[8 more]</label></div><br/><div class="children"><div class="content">I&#x27;m extremely confused about the claim that other tools have a worse precision or recall for APK or JAR files which are very much regular. Like, they should be a valid ZIP file with `META-INF&#x2F;MANIFEST.MF` present (at least), and APK would need `classes.dex` as well, but at this point there is no other format that can be confused with APK or JAR I believe. I&#x27;d like to see which file was causing unexpected drop on precision or recall.</div><br/><div id="39392701" class="c"><input type="checkbox" id="c-39392701" checked=""/><div class="controls bullet"><span class="by">HtmlProgrammer</span><span>|</span><a href="#39392130">parent</a><span>|</span><a href="#39393149">next</a><span>|</span><label class="collapse" for="c-39392701">[-]</label><label class="expand" for="c-39392701">[1 more]</label></div><br/><div class="children"><div class="content">Minecraft mods 14 years ago used to tell you to open the JAR and delete the META-INF when installing them so can’t rely on that one…</div><br/></div></div><div id="39393149" class="c"><input type="checkbox" id="c-39393149" checked=""/><div class="controls bullet"><span class="by">supriyo-biswas</span><span>|</span><a href="#39392130">parent</a><span>|</span><a href="#39392701">prev</a><span>|</span><a href="#39392667">next</a><span>|</span><label class="collapse" for="c-39393149">[-]</label><label class="expand" for="c-39393149">[5 more]</label></div><br/><div class="children"><div class="content">The `file` command checks only the first few bytes, and doesn’t parse the structure of the file. APK files are indeed reported as Zip archives by the latest version of `file`.</div><br/><div id="39393506" class="c"><input type="checkbox" id="c-39393506" checked=""/><div class="controls bullet"><span class="by">m0shen</span><span>|</span><a href="#39392130">root</a><span>|</span><a href="#39393149">parent</a><span>|</span><a href="#39392667">next</a><span>|</span><label class="collapse" for="c-39393506">[-]</label><label class="expand" for="c-39393506">[4 more]</label></div><br/><div class="children"><div class="content">This is false in every sense for <a href="https:&#x2F;&#x2F;www.darwinsys.com&#x2F;file&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.darwinsys.com&#x2F;file&#x2F;</a> (probably the most used file version). It depends on the magic for a specific file, but it can check any part of your file. Many Linux distros are years out of date, you might be using a very old version.<p>FILE_45:<p><pre><code>    .&#x2F;src&#x2F;file -m magic&#x2F;magic.mgc ..&#x2F;..&#x2F;OpenCalc.v2.3.1.apk
    ..&#x2F;..&#x2F;OpenCalc.v2.3.1.apk: Android package (APK), with zipflinger virtual entry, with APK Signing Block</code></pre></div><br/><div id="39393644" class="c"><input type="checkbox" id="c-39393644" checked=""/><div class="controls bullet"><span class="by">supriyo-biswas</span><span>|</span><a href="#39392130">root</a><span>|</span><a href="#39393506">parent</a><span>|</span><a href="#39392667">next</a><span>|</span><label class="collapse" for="c-39393644">[-]</label><label class="expand" for="c-39393644">[3 more]</label></div><br/><div class="children"><div class="content">Interesting! I checked with file 5.44 from Ubuntu 23.10 and 5.45 on macOS using homebrew, and in both cases, I got “Zip archive data, at least v2.0 to extract” for the file here[1]. I don’t have an Android phone to check and I’m also not familiar with Android tooling, so is this a corrupt APK?<p>[1] <a href="https:&#x2F;&#x2F;download.apkpure.net&#x2F;custom&#x2F;com.apkpure.aegon-3197817.apk?_fn=QVBLUHVyZV92My4xOS43OF9hcGtwdXJlLmNvbS5hcGs&amp;as=952379a4c2cf139483a198906d30724d65cef794&amp;ai=-711161207&amp;at=1708062492&amp;_sa=ai%2Cat&amp;k=af2a27ab4a6fcef520110d64b356610d65d19a1c&amp;r=https%3A%2F%2Fapkpure.net%2Famp&amp;_p=Y29tLmFwa3B1cmUuYWVnb24&amp;c=1%7CTOOLS%7CZGV2PUFQS1B1cmUmdD1hcGsmcz0xMDQzMzgyNiZ2bj0zLjE5Ljc4JnZjPTMxOTc4MTc&amp;hot=1&amp;arg=apkpure%3A%2F%2Fcampaign%2F%3Futm_medium%3Dapkpure%26utm_source%3Dpre-register%26report_context%3D%7B%22channel_id%22%3A2007%2C%22source_package_name%22%3A%22com.levelinfinite.sgameGlobal%22%7D&amp;arg=apkpure%3A%2F%2Fcustom%3Ftype%3Dopen_detail%26package_name%3Dcom.levelinfinite.sgameGlobal%26auto_pre_register%3D1" rel="nofollow">https:&#x2F;&#x2F;download.apkpure.net&#x2F;custom&#x2F;com.apkpure.aegon-319781...</a></div><br/><div id="39393824" class="c"><input type="checkbox" id="c-39393824" checked=""/><div class="controls bullet"><span class="by">m0shen</span><span>|</span><a href="#39392130">root</a><span>|</span><a href="#39393644">parent</a><span>|</span><a href="#39392667">next</a><span>|</span><label class="collapse" for="c-39393824">[-]</label><label class="expand" for="c-39393824">[2 more]</label></div><br/><div class="children"><div class="content">That doesn&#x27;t appear to be a valid link. Try building `file` from source and using the provided default magic database.</div><br/><div id="39393909" class="c"><input type="checkbox" id="c-39393909" checked=""/><div class="controls bullet"><span class="by">supriyo-biswas</span><span>|</span><a href="#39392130">root</a><span>|</span><a href="#39393824">parent</a><span>|</span><a href="#39392667">next</a><span>|</span><label class="collapse" for="c-39393909">[-]</label><label class="expand" for="c-39393909">[1 more]</label></div><br/><div class="children"><div class="content">I also tried this with the sources of file from the homepage you linked above, and I still get the same results.<p>You could try this for yourself using the same APKPure file which I uploaded at the following alternative link[1]. Further, while this could be a corrupt APK, I can’t see any signs of that from a cursory inspection as both the `classes.dex` and `META-INF` directory are present, and this is APKPure’s own APK, instead of an APK contributed for an app contributed by a third-party.<p>[1] <a href="https:&#x2F;&#x2F;wormhole.app&#x2F;Mebmy#CDv86juV9H4aRCL2DSJeDw" rel="nofollow">https:&#x2F;&#x2F;wormhole.app&#x2F;Mebmy#CDv86juV9H4aRCL2DSJeDw</a></div><br/></div></div></div></div></div></div></div></div></div></div><div id="39392667" class="c"><input type="checkbox" id="c-39392667" checked=""/><div class="controls bullet"><span class="by">charcircuit</span><span>|</span><a href="#39392130">parent</a><span>|</span><a href="#39393149">prev</a><span>|</span><a href="#39391917">next</a><span>|</span><label class="collapse" for="c-39392667">[-]</label><label class="expand" for="c-39392667">[1 more]</label></div><br/><div class="children"><div class="content">apks are also zipaligned so it&#x27;s not like random users are going to be making them either</div><br/></div></div></div></div><div id="39391917" class="c"><input type="checkbox" id="c-39391917" checked=""/><div class="controls bullet"><span class="by">vunderba</span><span>|</span><a href="#39392130">prev</a><span>|</span><a href="#39394344">next</a><span>|</span><label class="collapse" for="c-39391917">[-]</label><label class="expand" for="c-39391917">[1 more]</label></div><br/><div class="children"><div class="content">As somebody who&#x27;s dealt with the ambiguity of attempting to use file signatures in order to identify file type, this seems like a pretty useful library. Especially since it seems to be able to distinguish between different types of text files based on their format&#x2F;content e.g. CSV, markdown, etc.</div><br/></div></div><div id="39394344" class="c"><input type="checkbox" id="c-39394344" checked=""/><div class="controls bullet"><span class="by">thangalin</span><span>|</span><a href="#39391917">prev</a><span>|</span><a href="#39393455">next</a><span>|</span><label class="collapse" for="c-39394344">[-]</label><label class="expand" for="c-39394344">[1 more]</label></div><br/><div class="children"><div class="content">My FOSS desktop text editor performs a subset of file type identification using the first 12 bytes, detecting the type quite quickly:<p>* <a href="https:&#x2F;&#x2F;gitlab.com&#x2F;DaveJarvis&#x2F;KeenWrite&#x2F;-&#x2F;blob&#x2F;main&#x2F;src&#x2F;main&#x2F;java&#x2F;com&#x2F;keenwrite&#x2F;io&#x2F;MediaTypeSniffer.java" rel="nofollow">https:&#x2F;&#x2F;gitlab.com&#x2F;DaveJarvis&#x2F;KeenWrite&#x2F;-&#x2F;blob&#x2F;main&#x2F;src&#x2F;main...</a><p>There&#x27;s a much larger list of file signatures at:<p>* <a href="https:&#x2F;&#x2F;github.com&#x2F;veniware&#x2F;Space-Maker&#x2F;blob&#x2F;master&#x2F;FileSignatures.cs">https:&#x2F;&#x2F;github.com&#x2F;veniware&#x2F;Space-Maker&#x2F;blob&#x2F;master&#x2F;FileSign...</a></div><br/></div></div><div id="39393455" class="c"><input type="checkbox" id="c-39393455" checked=""/><div class="controls bullet"><span class="by">lopkeny12ko</span><span>|</span><a href="#39394344">prev</a><span>|</span><a href="#39391843">next</a><span>|</span><label class="collapse" for="c-39393455">[-]</label><label class="expand" for="c-39393455">[7 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t understand why this needs to exist. Isn&#x27;t file type detection inherently deterministic by nature? A valid tar archive will always have the same first few magic bytes. An ELF binary has a universal ELF magic and header. If the magic is bad, then the file is corrupted and not a valid XYZ file. What&#x27;s the value in throwing in &quot;heuristics&quot; and probabilistic inference into a process that is black and white by design.</div><br/><div id="39394448" class="c"><input type="checkbox" id="c-39394448" checked=""/><div class="controls bullet"><span class="by">vintermann</span><span>|</span><a href="#39393455">parent</a><span>|</span><a href="#39393493">next</a><span>|</span><label class="collapse" for="c-39394448">[-]</label><label class="expand" for="c-39394448">[1 more]</label></div><br/><div class="children"><div class="content">Consider, it&#x27;s perfectly possible for a file to fit two or more file formats - polyglot files are a hobby for some people.<p>And there are also a billion formats that are <i>not</i> uniquely determined by magic bytes. You don&#x27;t have to go further than text files.</div><br/></div></div><div id="39393493" class="c"><input type="checkbox" id="c-39393493" checked=""/><div class="controls bullet"><span class="by">potatoman22</span><span>|</span><a href="#39393455">parent</a><span>|</span><a href="#39394448">prev</a><span>|</span><a href="#39391843">next</a><span>|</span><label class="collapse" for="c-39393493">[-]</label><label class="expand" for="c-39393493">[5 more]</label></div><br/><div class="children"><div class="content">This also works for formats like Python, HTML, and JSON.</div><br/><div id="39393642" class="c"><input type="checkbox" id="c-39393642" checked=""/><div class="controls bullet"><span class="by">LiamPowell</span><span>|</span><a href="#39393455">root</a><span>|</span><a href="#39393493">parent</a><span>|</span><a href="#39391843">next</a><span>|</span><label class="collapse" for="c-39393642">[-]</label><label class="expand" for="c-39393642">[4 more]</label></div><br/><div class="children"><div class="content">file (<a href="https:&#x2F;&#x2F;www.darwinsys.com&#x2F;file&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.darwinsys.com&#x2F;file&#x2F;</a>) already detects all these formats.</div><br/><div id="39393658" class="c"><input type="checkbox" id="c-39393658" checked=""/><div class="controls bullet"><span class="by">ebursztein</span><span>|</span><a href="#39393455">root</a><span>|</span><a href="#39393642">parent</a><span>|</span><a href="#39391843">next</a><span>|</span><label class="collapse" for="c-39393658">[-]</label><label class="expand" for="c-39393658">[3 more]</label></div><br/><div class="children"><div class="content">Indeed but as pointed out in the blog post -- file is significantly less accurate that Magika. There are also some file type that we support and file doesn&#x27;t as reported in the table.</div><br/><div id="39393688" class="c"><input type="checkbox" id="c-39393688" checked=""/><div class="controls bullet"><span class="by">LiamPowell</span><span>|</span><a href="#39393455">root</a><span>|</span><a href="#39393658">parent</a><span>|</span><a href="#39391843">next</a><span>|</span><label class="collapse" for="c-39393688">[-]</label><label class="expand" for="c-39393688">[2 more]</label></div><br/><div class="children"><div class="content">I can&#x27;t immediately find the dataset used for benchmarking. Is file actually failing on common files or just particularly nasty examples? If it&#x27;s the latter then how does it compare to Magika on files that an average person is likely to see?</div><br/><div id="39393919" class="c"><input type="checkbox" id="c-39393919" checked=""/><div class="controls bullet"><span class="by">schleck8</span><span>|</span><a href="#39393455">root</a><span>|</span><a href="#39393688">parent</a><span>|</span><a href="#39391843">next</a><span>|</span><label class="collapse" for="c-39393919">[-]</label><label class="expand" for="c-39393919">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Is file actually failing on common files or just particularly nasty examples? If it&#x27;s the latter then how does it compare to Magika on files that an average person is likely to see?<p>That&#x27;s not the point in file type guessing is it? Google employs it as an additional security measure for user submitted content which absolutely makes sense given what malware devs do with file types.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="39391843" class="c"><input type="checkbox" id="c-39391843" checked=""/><div class="controls bullet"><span class="by">NiloCK</span><span>|</span><a href="#39393455">prev</a><span>|</span><a href="#39391900">next</a><span>|</span><label class="collapse" for="c-39391843">[-]</label><label class="expand" for="c-39391843">[4 more]</label></div><br/><div class="children"><div class="content">A somewhat surprising and genuinely useful application of the family of techniques.<p>I wonder how susceptible it is to adversarial binaries or, hah, prompt-injected binaries.</div><br/><div id="39392632" class="c"><input type="checkbox" id="c-39392632" checked=""/><div class="controls bullet"><span class="by">jamesdwilson</span><span>|</span><a href="#39391843">parent</a><span>|</span><a href="#39393317">next</a><span>|</span><label class="collapse" for="c-39392632">[-]</label><label class="expand" for="c-39392632">[1 more]</label></div><br/><div class="children"><div class="content">For the extremely limited number of file types supported, I question the utility of this compared to `magic`</div><br/></div></div><div id="39393317" class="c"><input type="checkbox" id="c-39393317" checked=""/><div class="controls bullet"><span class="by">star4040</span><span>|</span><a href="#39391843">parent</a><span>|</span><a href="#39392632">prev</a><span>|</span><a href="#39391864">next</a><span>|</span><label class="collapse" for="c-39393317">[-]</label><label class="expand" for="c-39393317">[1 more]</label></div><br/><div class="children"><div class="content">It gets a lot of binary file formats wrong for me out-of-the-box. I think it needs to be a bit more effective before we can truly determine the effectiveness of such exploits.</div><br/></div></div><div id="39391864" class="c"><input type="checkbox" id="c-39391864" checked=""/><div class="controls bullet"><span class="by">dghlsakjg</span><span>|</span><a href="#39391843">parent</a><span>|</span><a href="#39393317">prev</a><span>|</span><a href="#39391900">next</a><span>|</span><label class="collapse" for="c-39391864">[-]</label><label class="expand" for="c-39391864">[1 more]</label></div><br/><div class="children"><div class="content">“These aren’t the binaries you are looking for…”</div><br/></div></div></div></div><div id="39391900" class="c"><input type="checkbox" id="c-39391900" checked=""/><div class="controls bullet"><span class="by">thorum</span><span>|</span><a href="#39391843">prev</a><span>|</span><a href="#39393413">next</a><span>|</span><label class="collapse" for="c-39391900">[-]</label><label class="expand" for="c-39391900">[6 more]</label></div><br/><div class="children"><div class="content">Supported file types: <a href="https:&#x2F;&#x2F;github.com&#x2F;google&#x2F;magika&#x2F;blob&#x2F;main&#x2F;docs&#x2F;supported-content-types-list.md">https:&#x2F;&#x2F;github.com&#x2F;google&#x2F;magika&#x2F;blob&#x2F;main&#x2F;docs&#x2F;supported-co...</a></div><br/><div id="39392361" class="c"><input type="checkbox" id="c-39392361" checked=""/><div class="controls bullet"><span class="by">s1mon</span><span>|</span><a href="#39391900">parent</a><span>|</span><a href="#39393413">next</a><span>|</span><label class="collapse" for="c-39392361">[-]</label><label class="expand" for="c-39392361">[5 more]</label></div><br/><div class="children"><div class="content">It&#x27;s surprising that there are so many file types that seem relatively common which are missing from this list. There are no raw image file formats. There&#x27;s nothing for CAD - either source files or neutral files. There&#x27;s no MIDI files, or any other music creation types. There&#x27;s no APL, Pascal, COBOL, assembly source file formats etc.</div><br/><div id="39394436" class="c"><input type="checkbox" id="c-39394436" checked=""/><div class="controls bullet"><span class="by">vintermann</span><span>|</span><a href="#39391900">root</a><span>|</span><a href="#39392361">parent</a><span>|</span><a href="#39393849">next</a><span>|</span><label class="collapse" for="c-39394436">[-]</label><label class="expand" for="c-39394436">[1 more]</label></div><br/><div class="children"><div class="content">Well, what they used this for at Google was apparently scanning their user&#x27;s files for things they shouldn&#x27;t store in the cloud. Probably they don&#x27;t care much about MIDI.</div><br/></div></div><div id="39393849" class="c"><input type="checkbox" id="c-39393849" checked=""/><div class="controls bullet"><span class="by">photoGrant</span><span>|</span><a href="#39391900">root</a><span>|</span><a href="#39392361">parent</a><span>|</span><a href="#39394436">prev</a><span>|</span><a href="#39392550">next</a><span>|</span><label class="collapse" for="c-39393849">[-]</label><label class="expand" for="c-39393849">[1 more]</label></div><br/><div class="children"><div class="content">Yeah this quickly went from &#x27;additional helpful tool in the kit&#x27; to &#x27;probably should use something else first&#x27;</div><br/></div></div><div id="39392550" class="c"><input type="checkbox" id="c-39392550" checked=""/><div class="controls bullet"><span class="by">_3u10</span><span>|</span><a href="#39391900">root</a><span>|</span><a href="#39392361">parent</a><span>|</span><a href="#39393849">prev</a><span>|</span><a href="#39393413">next</a><span>|</span><label class="collapse" for="c-39392550">[-]</label><label class="expand" for="c-39392550">[2 more]</label></div><br/><div class="children"><div class="content">No tracker &#x2F; .mod files either, just use file.</div><br/><div id="39393664" class="c"><input type="checkbox" id="c-39393664" checked=""/><div class="controls bullet"><span class="by">ebursztein</span><span>|</span><a href="#39391900">root</a><span>|</span><a href="#39392550">parent</a><span>|</span><a href="#39393413">next</a><span>|</span><label class="collapse" for="c-39393664">[-]</label><label class="expand" for="c-39393664">[1 more]</label></div><br/><div class="children"><div class="content">Thanks for the list, we will probably try to extend the list of format supported in future revision.</div><br/></div></div></div></div></div></div></div></div><div id="39393413" class="c"><input type="checkbox" id="c-39393413" checked=""/><div class="controls bullet"><span class="by">VikingCoder</span><span>|</span><a href="#39391900">prev</a><span>|</span><a href="#39393977">next</a><span>|</span><label class="collapse" for="c-39393413">[-]</label><label class="expand" for="c-39393413">[2 more]</label></div><br/><div class="children"><div class="content">What does it do with an Actually Portable Executable compiled by Cosmopolitan libc compiler?</div><br/><div id="39393700" class="c"><input type="checkbox" id="c-39393700" checked=""/><div class="controls bullet"><span class="by">supriyo-biswas</span><span>|</span><a href="#39393413">parent</a><span>|</span><a href="#39393977">next</a><span>|</span><label class="collapse" for="c-39393700">[-]</label><label class="expand" for="c-39393700">[1 more]</label></div><br/><div class="children"><div class="content">It’s reported as a PE executable, `file` on the other hand reports it as a “DOS&#x2F;MBR boot sector.”</div><br/></div></div></div></div><div id="39393977" class="c"><input type="checkbox" id="c-39393977" checked=""/><div class="controls bullet"><span class="by">account-5</span><span>|</span><a href="#39393413">prev</a><span>|</span><a href="#39393173">next</a><span>|</span><label class="collapse" for="c-39393977">[-]</label><label class="expand" for="c-39393977">[3 more]</label></div><br/><div class="children"><div class="content">Assuming that I&#x27;ve not misunderstood, how does this compare to things like: TrID [0]?? Apart from being open source.<p>[0] <a href="https:&#x2F;&#x2F;mark0.net&#x2F;soft-trid-e.html" rel="nofollow">https:&#x2F;&#x2F;mark0.net&#x2F;soft-trid-e.html</a></div><br/><div id="39393992" class="c"><input type="checkbox" id="c-39393992" checked=""/><div class="controls bullet"><span class="by">JacobThreeThree</span><span>|</span><a href="#39393977">parent</a><span>|</span><a href="#39393173">next</a><span>|</span><label class="collapse" for="c-39393992">[-]</label><label class="expand" for="c-39393992">[2 more]</label></div><br/><div class="children"><div class="content">The bulk of the short article is a set of performance benchmarks comparing Magika to TrID and others.</div><br/><div id="39394040" class="c"><input type="checkbox" id="c-39394040" checked=""/><div class="controls bullet"><span class="by">account-5</span><span>|</span><a href="#39393977">root</a><span>|</span><a href="#39393992">parent</a><span>|</span><a href="#39393173">next</a><span>|</span><label class="collapse" for="c-39394040">[-]</label><label class="expand" for="c-39394040">[1 more]</label></div><br/><div class="children"><div class="content">Argh, the risks of browsing the web without JavaScript and&#x2F;or third party scripts enabled, you miss content, because rendering text and images on the modern web can&#x27;t be done without them, apparently. (Sarcasm).<p>You are of course correct. I can see the images showing the comparison. Apologies.</div><br/></div></div></div></div></div></div><div id="39393173" class="c"><input type="checkbox" id="c-39393173" checked=""/><div class="controls bullet"><span class="by">krick</span><span>|</span><a href="#39393977">prev</a><span>|</span><a href="#39392004">next</a><span>|</span><label class="collapse" for="c-39393173">[-]</label><label class="expand" for="c-39393173">[3 more]</label></div><br/><div class="children"><div class="content">What are use-cases for this? I mean, obviously detecting the filetype is useful, but we kinda already have plenty of tools to do that, and I cannot imagine, why we need some &quot;smart&quot; way of doing this. If you are not a human, and you are not sure what is it (like, an unknown file being uploaded to a server) you would be better off just rejecting it completely, right? After all, there&#x27;s absolutely no way an &quot;AI powered&quot; tool can be more reliable than some dumb, err-on-safer-side heuristic, and you wouldn&#x27;t want to trust <i>that</i> thing to protect you from malicious payloads.</div><br/><div id="39393310" class="c"><input type="checkbox" id="c-39393310" checked=""/><div class="controls bullet"><span class="by">nindalf</span><span>|</span><a href="#39393173">parent</a><span>|</span><a href="#39393374">next</a><span>|</span><label class="collapse" for="c-39393310">[-]</label><label class="expand" for="c-39393310">[1 more]</label></div><br/><div class="children"><div class="content">&gt; no way an &quot;AI powered&quot; tool can be more reliable<p>The article provides accuracy benchmarks.<p>&gt; you would be better off just rejecting it completely<p>They mention using it in gmail and Drive, neither of which have the luxury of rejecting files willy-nilly.</div><br/></div></div><div id="39393374" class="c"><input type="checkbox" id="c-39393374" checked=""/><div class="controls bullet"><span class="by">n2d4</span><span>|</span><a href="#39393173">parent</a><span>|</span><a href="#39393310">prev</a><span>|</span><a href="#39392004">next</a><span>|</span><label class="collapse" for="c-39393374">[-]</label><label class="expand" for="c-39393374">[1 more]</label></div><br/><div class="children"><div class="content">Virus detection is mentioned in the article. Code editors need to find the programming language for syntax highlighting of code before you give it a name. Your desktop OS needs to know which program to open files with. Or, recovering files from a corrupted drive. Etc<p>It&#x27;s easy to distinguish, say, a PNG from a JPG file (or anything else that has well-defined magic bytes). But some files look virtually identical (eg. .jar files are really just .zip files). Also see polyglot files [1].<p>If you allow an `unknown` label or human intervention, then yes, magic bytes might be enough, but sometimes you&#x27;d rather have a 99% chance to be right about 95% of files vs. a 100% chance to be right about 50% of files.<p>[1] <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Polyglot_(computing)" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Polyglot_(computing)</a></div><br/></div></div></div></div><div id="39392004" class="c"><input type="checkbox" id="c-39392004" checked=""/><div class="controls bullet"><span class="by">userbinator</span><span>|</span><a href="#39393173">prev</a><span>|</span><a href="#39393165">next</a><span>|</span><label class="collapse" for="c-39392004">[-]</label><label class="expand" for="c-39392004">[2 more]</label></div><br/><div class="children"><div class="content"><i>Today web browsers, code editors, and countless other software rely on file-type detection to decide how to properly render a file.</i><p>&quot;web browsers&quot;? Odd to see this coming from Google itself. <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Content_sniffing" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Content_sniffing</a> was widely criticised for being problematic for security.</div><br/><div id="39392559" class="c"><input type="checkbox" id="c-39392559" checked=""/><div class="controls bullet"><span class="by">rafram</span><span>|</span><a href="#39392004">parent</a><span>|</span><a href="#39393165">next</a><span>|</span><label class="collapse" for="c-39392559">[-]</label><label class="expand" for="c-39392559">[1 more]</label></div><br/><div class="children"><div class="content">Content sniffing can be disabled by the server (X-Content-Type-Options: nosniff),  but it’s still used by default. Web browsers have to assume that servers are stupid, and that for relatively harmless cases, it’s fine to e.g. render a PNG loaded by an &lt;img&gt; even if it’s served as text&#x2F;plain.</div><br/></div></div></div></div><div id="39393165" class="c"><input type="checkbox" id="c-39393165" checked=""/><div class="controls bullet"><span class="by">Nullabillity</span><span>|</span><a href="#39392004">prev</a><span>|</span><a href="#39392248">next</a><span>|</span><label class="collapse" for="c-39393165">[-]</label><label class="expand" for="c-39393165">[1 more]</label></div><br/><div class="children"><div class="content">It seems to detect my Android build.gradle.kts as Scala, which I suppose is a kind of hilarious confusion but not exactly useful.</div><br/></div></div><div id="39392248" class="c"><input type="checkbox" id="c-39392248" checked=""/><div class="controls bullet"><span class="by">vrnvu</span><span>|</span><a href="#39393165">prev</a><span>|</span><a href="#39393297">next</a><span>|</span><label class="collapse" for="c-39392248">[-]</label><label class="expand" for="c-39392248">[1 more]</label></div><br/><div class="children"><div class="content">At $job we have been using Apache Tika for years.<p>Works but occasionally having bugs and weird collisions when working with billions of files.<p>Happy to see new contributions in the space.</div><br/></div></div><div id="39393297" class="c"><input type="checkbox" id="c-39393297" checked=""/><div class="controls bullet"><span class="by">star4040</span><span>|</span><a href="#39392248">prev</a><span>|</span><a href="#39392536">next</a><span>|</span><label class="collapse" for="c-39393297">[-]</label><label class="expand" for="c-39393297">[1 more]</label></div><br/><div class="children"><div class="content">It seems like it defeats the purpose of such a tool that this initial version doesn’t have polyglot files. I hope they’re quick to work on that.</div><br/></div></div><div id="39392536" class="c"><input type="checkbox" id="c-39392536" checked=""/><div class="controls bullet"><span class="by">Imnimo</span><span>|</span><a href="#39393297">prev</a><span>|</span><a href="#39392527">next</a><span>|</span><label class="collapse" for="c-39392536">[-]</label><label class="expand" for="c-39392536">[1 more]</label></div><br/><div class="children"><div class="content">I wonder how big of a deal it is that you&#x27;d have to retrain the model to support a new or changed file type? It doesn&#x27;t seem like the repo contains training code, but I could be missing it...</div><br/></div></div><div id="39392527" class="c"><input type="checkbox" id="c-39392527" checked=""/><div class="controls bullet"><span class="by">johnea</span><span>|</span><a href="#39392536">prev</a><span>|</span><a href="#39393802">next</a><span>|</span><label class="collapse" for="c-39392527">[-]</label><label class="expand" for="c-39392527">[5 more]</label></div><br/><div class="children"><div class="content">The results of which you&#x27;ll never be 100% sure are correct...</div><br/><div id="39392588" class="c"><input type="checkbox" id="c-39392588" checked=""/><div class="controls bullet"><span class="by">wruza</span><span>|</span><a href="#39392527">parent</a><span>|</span><a href="#39393110">next</a><span>|</span><label class="collapse" for="c-39392588">[-]</label><label class="expand" for="c-39392588">[2 more]</label></div><br/><div class="children"><div class="content">They missed such an opportunity to name it &quot;fail&quot;. It&#x27;s like &quot;file&quot; but with &quot;ai&quot; in it.</div><br/><div id="39392958" class="c"><input type="checkbox" id="c-39392958" checked=""/><div class="controls bullet"><span class="by">tamrix</span><span>|</span><a href="#39392527">root</a><span>|</span><a href="#39392588">parent</a><span>|</span><a href="#39393110">next</a><span>|</span><label class="collapse" for="c-39392958">[-]</label><label class="expand" for="c-39392958">[1 more]</label></div><br/><div class="children"><div class="content">What about faile?</div><br/></div></div></div></div><div id="39393110" class="c"><input type="checkbox" id="c-39393110" checked=""/><div class="controls bullet"><span class="by">rfoo</span><span>|</span><a href="#39392527">parent</a><span>|</span><a href="#39392588">prev</a><span>|</span><a href="#39394240">next</a><span>|</span><label class="collapse" for="c-39393110">[-]</label><label class="expand" for="c-39393110">[1 more]</label></div><br/><div class="children"><div class="content">But file(2) is already like that - my data files without headers are reported randomly as disk images, compressed archives or even executables for never-heard-of machines.</div><br/></div></div><div id="39394240" class="c"><input type="checkbox" id="c-39394240" checked=""/><div class="controls bullet"><span class="by">plesiv</span><span>|</span><a href="#39392527">parent</a><span>|</span><a href="#39393110">prev</a><span>|</span><a href="#39393802">next</a><span>|</span><label class="collapse" for="c-39394240">[-]</label><label class="expand" for="c-39394240">[1 more]</label></div><br/><div class="children"><div class="content">Other methods use heuristics to guess many filetypes and in the benchmark they show worse performance (in terms of precision). Assuming benchmarks are not biased, the fact that this approach uses AI heuristics instead of hard-coded heuristics shouldn&#x27;t make it strictly worse.</div><br/></div></div></div></div><div id="39393802" class="c"><input type="checkbox" id="c-39393802" checked=""/><div class="controls bullet"><span class="by">a-dub</span><span>|</span><a href="#39392527">prev</a><span>|</span><a href="#39392245">next</a><span>|</span><label class="collapse" for="c-39393802">[-]</label><label class="expand" for="c-39393802">[1 more]</label></div><br/><div class="children"><div class="content">probably a lot of interesting work going on that looks like this for the virustotal db itself.</div><br/></div></div><div id="39392245" class="c"><input type="checkbox" id="c-39392245" checked=""/><div class="controls bullet"><span class="by">Vt71fcAqt7</span><span>|</span><a href="#39393802">prev</a><span>|</span><a href="#39392885">next</a><span>|</span><label class="collapse" for="c-39392245">[-]</label><label class="expand" for="c-39392245">[1 more]</label></div><br/><div class="children"><div class="content">This feels like old school google. I like that it&#x27;s just a static webpage that basically can&#x27;t be shut down or sunsetted. It reminds of when Google just made useful stuff and gave them away for free on a webpage like translate and google books. Obviously less life changing than the above but still a great option to have when I need this.</div><br/></div></div><div id="39392885" class="c"><input type="checkbox" id="c-39392885" checked=""/><div class="controls bullet"><span class="by">kazinator</span><span>|</span><a href="#39392245">prev</a><span>|</span><a href="#39394105">next</a><span>|</span><label class="collapse" for="c-39392885">[-]</label><label class="expand" for="c-39392885">[3 more]</label></div><br/><div class="children"><div class="content">&gt; <i>So far, libmagic and most other file-type-identification software have been relying on a handcrafted collection of heuristics and custom rules to detect each file format.<p>This manual approach is both time consuming and error prone as it is hard for humans to create generalized rules by hand.</i><p>Pure nonsense. The rules are accurate, based on the actual formats, and not &quot;heuristics&quot;.</div><br/><div id="39393420" class="c"><input type="checkbox" id="c-39393420" checked=""/><div class="controls bullet"><span class="by">cAtte_</span><span>|</span><a href="#39392885">parent</a><span>|</span><a href="#39393039">next</a><span>|</span><label class="collapse" for="c-39393420">[-]</label><label class="expand" for="c-39393420">[1 more]</label></div><br/><div class="children"><div class="content">the rules aren&#x27;t based on the formats, but on a small portion of them (their magic numbers). this makes them inaccurate (think docx vs zip) and heuristic.</div><br/></div></div></div></div><div id="39394105" class="c"><input type="checkbox" id="c-39394105" checked=""/><div class="controls bullet"><span class="by">earth2mars</span><span>|</span><a href="#39392885">prev</a><span>|</span><a href="#39391981">next</a><span>|</span><label class="collapse" for="c-39394105">[-]</label><label class="expand" for="c-39394105">[1 more]</label></div><br/><div class="children"><div class="content">how do i pronounce this? Myajika or MaGika?
anyhow, its super cool.</div><br/></div></div><div id="39391981" class="c"><input type="checkbox" id="c-39391981" checked=""/><div class="controls bullet"><span class="by">semitones</span><span>|</span><a href="#39394105">prev</a><span>|</span><a href="#39391899">next</a><span>|</span><label class="collapse" for="c-39391981">[-]</label><label class="expand" for="c-39391981">[6 more]</label></div><br/><div class="children"><div class="content">Is it really common enough for files not to be annotated with a useful&#x2F;correct file type extension (e.g. .mp3, .txt) that a library like this is needed?</div><br/><div id="39392547" class="c"><input type="checkbox" id="c-39392547" checked=""/><div class="controls bullet"><span class="by">SnowflakeOnIce</span><span>|</span><a href="#39391981">parent</a><span>|</span><a href="#39392237">next</a><span>|</span><label class="collapse" for="c-39392547">[-]</label><label class="expand" for="c-39392547">[1 more]</label></div><br/><div class="children"><div class="content">Yes!<p>Sometimes a file has no extension. Other times the extension is a lie. Still other times, you may be dealing with an unnamed bytestring and wish to know what kind of content it is.<p>This last case happens quite a lot in Nosey Parker [1], a detector of secrets in textual data. There, it is possible to come across unnamed files in Git history, and it would be useful to the user to still indicate what type of file it seems to be.<p>I added file type detection based on libmagic to Nosey Parker a while back, but it&#x27;s not compiled in by default because libmagic is slow and complicates the build process. Also, libmagic is implemented as a large C library whose primary job is parsing, which makes the security side of me jittery.<p>I will likely add enabled-by-default filetype detection to Nosey Parker using Magika&#x27;s ONNX model.<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;praetorian-inc&#x2F;noseyparker">https:&#x2F;&#x2F;github.com&#x2F;praetorian-inc&#x2F;noseyparker</a></div><br/></div></div><div id="39392237" class="c"><input type="checkbox" id="c-39392237" checked=""/><div class="controls bullet"><span class="by">callalex</span><span>|</span><a href="#39391981">parent</a><span>|</span><a href="#39392547">prev</a><span>|</span><a href="#39393538">next</a><span>|</span><label class="collapse" for="c-39392237">[-]</label><label class="expand" for="c-39392237">[2 more]</label></div><br/><div class="children"><div class="content">Nothing is ever simple. Even for the most basic .txt files it’s still useful to know what the character encoding is (utf? 8&#x2F;16? Latin-whatever? etc.) and what the line format is (\n,\cr\lf,\n\lf) as well as determining if some maniac removed all the indentation characters and replaced them with a mystery number of spaces.<p>Then there are all the container formats that have different kinds of formats embedded in them (mov,mkv,pdf etc.)</div><br/><div id="39394227" class="c"><input type="checkbox" id="c-39394227" checked=""/><div class="controls bullet"><span class="by">cole-k</span><span>|</span><a href="#39391981">root</a><span>|</span><a href="#39392237">parent</a><span>|</span><a href="#39393538">next</a><span>|</span><label class="collapse" for="c-39394227">[-]</label><label class="expand" for="c-39394227">[1 more]</label></div><br/><div class="children"><div class="content">A fun read in service of your first point: <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Bush_hid_the_facts" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Bush_hid_the_facts</a></div><br/></div></div></div></div><div id="39393538" class="c"><input type="checkbox" id="c-39393538" checked=""/><div class="controls bullet"><span class="by">m0shen</span><span>|</span><a href="#39391981">parent</a><span>|</span><a href="#39392237">prev</a><span>|</span><a href="#39392028">next</a><span>|</span><label class="collapse" for="c-39393538">[-]</label><label class="expand" for="c-39393538">[1 more]</label></div><br/><div class="children"><div class="content">At multiple points in my career I&#x27;ve been responsible for apis that accept PDFs. Many non-tech savvy people seeing this, will just change the extension of the file they&#x27;re uploading to `.pdf`.<p>To make matters worse, there is some business software out there that will actually bastardize the PDF format and put garbage before the PDF file header. So for some things you end up writing custom validation and cleanup logic anyway.</div><br/></div></div><div id="39392028" class="c"><input type="checkbox" id="c-39392028" checked=""/><div class="controls bullet"><span class="by">hiddencost</span><span>|</span><a href="#39391981">parent</a><span>|</span><a href="#39393538">prev</a><span>|</span><a href="#39391899">next</a><span>|</span><label class="collapse" for="c-39392028">[-]</label><label class="expand" for="c-39392028">[1 more]</label></div><br/><div class="children"><div class="content">malware can intentionally obfuscate itself</div><br/></div></div></div></div><div id="39391899" class="c"><input type="checkbox" id="c-39391899" checked=""/><div class="controls bullet"><span class="by">kushie</span><span>|</span><a href="#39391981">prev</a><span>|</span><a href="#39392109">next</a><span>|</span><label class="collapse" for="c-39391899">[-]</label><label class="expand" for="c-39391899">[3 more]</label></div><br/><div class="children"><div class="content">this couldnt have been released at a better time for me! really needed a library like this.</div><br/><div id="39393648" class="c"><input type="checkbox" id="c-39393648" checked=""/><div class="controls bullet"><span class="by">ebursztein</span><span>|</span><a href="#39391899">parent</a><span>|</span><a href="#39392801">next</a><span>|</span><label class="collapse" for="c-39393648">[-]</label><label class="expand" for="c-39393648">[1 more]</label></div><br/><div class="children"><div class="content">Thanks :)</div><br/></div></div><div id="39392801" class="c"><input type="checkbox" id="c-39392801" checked=""/><div class="controls bullet"><span class="by">petesergeant</span><span>|</span><a href="#39391899">parent</a><span>|</span><a href="#39393648">prev</a><span>|</span><a href="#39392109">next</a><span>|</span><label class="collapse" for="c-39392801">[-]</label><label class="expand" for="c-39392801">[1 more]</label></div><br/><div class="children"><div class="content">Tell us why!</div><br/></div></div></div></div><div id="39392109" class="c"><input type="checkbox" id="c-39392109" checked=""/><div class="controls bullet"><span class="by">rfl890</span><span>|</span><a href="#39391899">prev</a><span>|</span><a href="#39393514">next</a><span>|</span><label class="collapse" for="c-39392109">[-]</label><label class="expand" for="c-39392109">[8 more]</label></div><br/><div class="children"><div class="content">We have had file(1) for years</div><br/><div id="39392190" class="c"><input type="checkbox" id="c-39392190" checked=""/><div class="controls bullet"><span class="by">samtheprogram</span><span>|</span><a href="#39392109">parent</a><span>|</span><a href="#39393516">next</a><span>|</span><label class="collapse" for="c-39392190">[-]</label><label class="expand" for="c-39392190">[3 more]</label></div><br/><div class="children"><div class="content">This is beyond what file is capable of. It’s also mentioned in the third paragraph.<p>RTFA.</div><br/><div id="39392686" class="c"><input type="checkbox" id="c-39392686" checked=""/><div class="controls bullet"><span class="by">wruza</span><span>|</span><a href="#39392109">root</a><span>|</span><a href="#39392190">parent</a><span>|</span><a href="#39394462">next</a><span>|</span><label class="collapse" for="c-39392686">[-]</label><label class="expand" for="c-39392686">[1 more]</label></div><br/><div class="children"><div class="content">Some HN readers may not know about file(1) even. It&#x27;s fine to mention that $subj enhances that, but the rtfa part seems pretty unnecessary.</div><br/></div></div><div id="39394462" class="c"><input type="checkbox" id="c-39394462" checked=""/><div class="controls bullet"><span class="by">Vogtinator</span><span>|</span><a href="#39392109">root</a><span>|</span><a href="#39392190">parent</a><span>|</span><a href="#39392686">prev</a><span>|</span><a href="#39393516">next</a><span>|</span><label class="collapse" for="c-39394462">[-]</label><label class="expand" for="c-39394462">[1 more]</label></div><br/><div class="children"><div class="content">FWICT file is more capable, predictable and also faster while being more energy-efficient at the same time.</div><br/></div></div></div></div><div id="39393516" class="c"><input type="checkbox" id="c-39393516" checked=""/><div class="controls bullet"><span class="by">aitchnyu</span><span>|</span><a href="#39392109">parent</a><span>|</span><a href="#39392190">prev</a><span>|</span><a href="#39392199">next</a><span>|</span><label class="collapse" for="c-39393516">[-]</label><label class="expand" for="c-39393516">[1 more]</label></div><br/><div class="children"><div class="content">This group of Linux users used to brag Linux will identify files even if you change the extension, Windoze needs to police you about changing extension, nearly 20 years back.</div><br/></div></div></div></div></div></div></div></div></div></body></html>