<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1712566861305" as="style"/><link rel="stylesheet" href="styles.css?v=1712566861305"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/stackframe-projects/pgmock">Show HN: I open-sourced the in-memory PostgreSQL I built at work for E2E tests</a>Â <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>n2d4</span> | <span>68 comments</span></div><br/><div><div id="39960538" class="c"><input type="checkbox" id="c-39960538" checked=""/><div class="controls bullet"><span class="by">n2d4</span><span>|</span><a href="#39967364">next</a><span>|</span><label class="collapse" for="c-39960538">[-]</label><label class="expand" for="c-39960538">[21 more]</label></div><br/><div class="children"><div class="content">Hey HN! For a few months, I&#x27;ve been building an in-memory version of Postgres at work. It has full feature parity with production databases.<p>The cool thing about it is that you don&#x27;t need any external processes or proxies. If your platform can run WASM (Node.js, browser, etc.), it can probably run pgmock. Creating a new database with mock data is as simple as creating a JavaScript object.<p>It&#x27;s a bit different from the amazing pglite [1] (which inspired me to open-source pgmock in the first place). pgmock runs an x86 emulator with the original Postgres inside, while pglite compiles a Postgres fork to native WASM directly and is hence much faster and more lightweight. However, it only supports single-user mode and a select few extensions, so you can&#x27;t connect to it with normal Postgres clients (which is quite crucial for E2E testing).<p>Theoretically, it could be modified to run any Docker image on WebAssembly platforms. Anything specific you&#x27;d like to see?<p>Happy hacking!<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;electric-sql&#x2F;pglite">https:&#x2F;&#x2F;github.com&#x2F;electric-sql&#x2F;pglite</a></div><br/><div id="39963649" class="c"><input type="checkbox" id="c-39963649" checked=""/><div class="controls bullet"><span class="by">samwillis</span><span>|</span><a href="#39960538">parent</a><span>|</span><a href="#39964308">next</a><span>|</span><label class="collapse" for="c-39963649">[-]</label><label class="expand" for="c-39963649">[1 more]</label></div><br/><div class="children"><div class="content">This looks really cool, awesome work!<p>Correct on PGlite only being single user at the moment, and that certainly is a problem for using it for integration tests in some environments. But I&#x27;m hopeful we can bring a multi-connection mode to it, I have a few ideas how, but it will be a while before we do.<p>There are a few other limitations with PGlite at the moment (related to it being single user mode), such as lacking support for pg_notify (have plans to fix this too). Whereas with this it should &quot;just work&quot; as it&#x27;s much closer to a real Postgres.<p>I think there is a big future for these in-memory Postgres projects for testing, it&#x27;s looks like test run times can be brought down to less than a 1&#x2F;4 with them.<p>(I work on PGlite)</div><br/></div></div><div id="39964308" class="c"><input type="checkbox" id="c-39964308" checked=""/><div class="controls bullet"><span class="by">negus</span><span>|</span><a href="#39960538">parent</a><span>|</span><a href="#39963649">prev</a><span>|</span><a href="#39965038">next</a><span>|</span><label class="collapse" for="c-39964308">[-]</label><label class="expand" for="c-39964308">[6 more]</label></div><br/><div class="children"><div class="content">That&#x27;s great. But doesn&#x27;t the whole concept of E2E test mean that you use real environment without mocking the components?</div><br/><div id="39964322" class="c"><input type="checkbox" id="c-39964322" checked=""/><div class="controls bullet"><span class="by">refulgentis</span><span>|</span><a href="#39960538">root</a><span>|</span><a href="#39964308">parent</a><span>|</span><a href="#39965038">next</a><span>|</span><label class="collapse" for="c-39964322">[-]</label><label class="expand" for="c-39964322">[5 more]</label></div><br/><div class="children"><div class="content">Explicitly mentioned in the comment as a drawback. In practice E2E means &quot;E2E as much as humanly possible&quot;, and I&#x27;m glad to see any work that can help.</div><br/><div id="39965216" class="c"><input type="checkbox" id="c-39965216" checked=""/><div class="controls bullet"><span class="by">sverhagen</span><span>|</span><a href="#39960538">root</a><span>|</span><a href="#39964322">parent</a><span>|</span><a href="#39965038">next</a><span>|</span><label class="collapse" for="c-39965216">[-]</label><label class="expand" for="c-39965216">[4 more]</label></div><br/><div class="children"><div class="content">It is, however, humanly possible, to run a real Postgres instance in a Docker container. You may use for example Testcontainers. So, I would not resort to an inferior Postgres &quot;mock&quot; for E2E testing.<p>For <i>unit</i> testing (also mentioned in the tagline of the project on GitHub) I could see you wanting something snappier than a real Postgres in Docker, so then... maybe? Purists of some following will tell you to use a mocking framework instead, but I think that something closer to the real thing would be better in all cases. This might be it, just be careful not to lull yourself into a false sense of security about how close to the real thing this is (isn&#x27;t).</div><br/><div id="39966329" class="c"><input type="checkbox" id="c-39966329" checked=""/><div class="controls bullet"><span class="by">wpietri</span><span>|</span><a href="#39960538">root</a><span>|</span><a href="#39965216">parent</a><span>|</span><a href="#39965766">next</a><span>|</span><label class="collapse" for="c-39966329">[-]</label><label class="expand" for="c-39966329">[1 more]</label></div><br/><div class="children"><div class="content">It depends on the humans and what they&#x27;re up to. Fast feedback is a very valuable attribute of a test suite, so reasonable people may well be willing to go down this road.</div><br/></div></div><div id="39965766" class="c"><input type="checkbox" id="c-39965766" checked=""/><div class="controls bullet"><span class="by">justinclift</span><span>|</span><a href="#39960538">root</a><span>|</span><a href="#39965216">parent</a><span>|</span><a href="#39966329">prev</a><span>|</span><a href="#39965038">next</a><span>|</span><label class="collapse" for="c-39965766">[-]</label><label class="expand" for="c-39965766">[2 more]</label></div><br/><div class="children"><div class="content">It does seem to be running a real version of Postgres though, unless I&#x27;m misreading?</div><br/><div id="39965795" class="c"><input type="checkbox" id="c-39965795" checked=""/><div class="controls bullet"><span class="by">sverhagen</span><span>|</span><a href="#39960538">root</a><span>|</span><a href="#39965766">parent</a><span>|</span><a href="#39965038">next</a><span>|</span><label class="collapse" for="c-39965795">[-]</label><label class="expand" for="c-39965795">[1 more]</label></div><br/><div class="children"><div class="content">On first reading of the main GitHub page, I didn&#x27;t take it that way. On second reading, I guess it could go either way. But there&#x27;s talk about having reimplemented the network stack, so maybe that implies they just repurposed the rest of Postgres. I just don&#x27;t know enough, happy to take your word.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="39965038" class="c"><input type="checkbox" id="c-39965038" checked=""/><div class="controls bullet"><span class="by">nborwankar</span><span>|</span><a href="#39960538">parent</a><span>|</span><a href="#39964308">prev</a><span>|</span><a href="#39963710">next</a><span>|</span><label class="collapse" for="c-39965038">[-]</label><label class="expand" for="c-39965038">[2 more]</label></div><br/><div class="children"><div class="content">If it could support the pgvector extension it would be a super fast vector database with all the power of Pg - the relational aspect brings the ability to add and query using rich domain specific metadata usually contained in relational databases.</div><br/><div id="39966227" class="c"><input type="checkbox" id="c-39966227" checked=""/><div class="controls bullet"><span class="by">J_Shelby_J</span><span>|</span><a href="#39960538">root</a><span>|</span><a href="#39965038">parent</a><span>|</span><a href="#39963710">next</a><span>|</span><label class="collapse" for="c-39966227">[-]</label><label class="expand" for="c-39966227">[1 more]</label></div><br/><div class="children"><div class="content">I spent last week trying to do that with some of the other pg embeded libs.<p>And then lancedb released their embedded client for rust, so I went towards that. But it&#x27;s still lacking FTS. So I fell back to sqlite. have some notes here <a href="https:&#x2F;&#x2F;shelbyjenkins.github.io&#x2F;blog&#x2F;retrieval-is-all-you-need-2&#x2F;" rel="nofollow">https:&#x2F;&#x2F;shelbyjenkins.github.io&#x2F;blog&#x2F;retrieval-is-all-you-ne...</a></div><br/></div></div></div></div><div id="39963710" class="c"><input type="checkbox" id="c-39963710" checked=""/><div class="controls bullet"><span class="by">justinclift</span><span>|</span><a href="#39960538">parent</a><span>|</span><a href="#39965038">prev</a><span>|</span><a href="#39962178">next</a><span>|</span><label class="collapse" for="c-39963710">[-]</label><label class="expand" for="c-39963710">[4 more]</label></div><br/><div class="children"><div class="content">As a data point, the online demo seems broken for queries it doesn&#x27;t like:<p><pre><code>    select foo();
    Error.captureStackTrace is not a function
</code></pre>
That&#x27;s when using Firefox 124.0.2 on Linux.</div><br/><div id="39964515" class="c"><input type="checkbox" id="c-39964515" checked=""/><div class="controls bullet"><span class="by">rezonant</span><span>|</span><a href="#39960538">root</a><span>|</span><a href="#39963710">parent</a><span>|</span><a href="#39965141">next</a><span>|</span><label class="collapse" for="c-39964515">[-]</label><label class="expand" for="c-39964515">[2 more]</label></div><br/><div class="children"><div class="content">Yes, that&#x27;s a nonstandard function provided by v8, so it wouldn&#x27;t work on Firefox. [1]<p>This can be worked around by just constructing an Error and taking it&#x27;s stack property, captureStackTrace is just a convenience function, so hopefully they can fix that.<p>[1] <a href="https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;JavaScript&#x2F;Reference&#x2F;Global_Objects&#x2F;Error#error.capturestacktrace" rel="nofollow">https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;JavaScript&#x2F;Refe...</a></div><br/><div id="39966904" class="c"><input type="checkbox" id="c-39966904" checked=""/><div class="controls bullet"><span class="by">justinclift</span><span>|</span><a href="#39960538">root</a><span>|</span><a href="#39964515">parent</a><span>|</span><a href="#39965141">next</a><span>|</span><label class="collapse" for="c-39966904">[-]</label><label class="expand" for="c-39966904">[1 more]</label></div><br/><div class="children"><div class="content">Thanks for suggesting that.  Looks like they&#x27;ve implemented that here:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;stackframe-projects&#x2F;pgmock&#x2F;commit&#x2F;f80d9fa0ee8d420a9d5947f20a1a6c3bc7482d10">https:&#x2F;&#x2F;github.com&#x2F;stackframe-projects&#x2F;pgmock&#x2F;commit&#x2F;f80d9fa...</a><p>It seems to have beendeployed out to the demo already as it&#x27;s working now. :)</div><br/></div></div></div></div><div id="39965141" class="c"><input type="checkbox" id="c-39965141" checked=""/><div class="controls bullet"><span class="by">n2d4</span><span>|</span><a href="#39960538">root</a><span>|</span><a href="#39963710">parent</a><span>|</span><a href="#39964515">prev</a><span>|</span><a href="#39962178">next</a><span>|</span><label class="collapse" for="c-39965141">[-]</label><label class="expand" for="c-39965141">[1 more]</label></div><br/><div class="children"><div class="content">My bad, gotta fix that one!</div><br/></div></div></div></div><div id="39962178" class="c"><input type="checkbox" id="c-39962178" checked=""/><div class="controls bullet"><span class="by">waldrews</span><span>|</span><a href="#39960538">parent</a><span>|</span><a href="#39963710">prev</a><span>|</span><a href="#39964982">next</a><span>|</span><label class="collapse" for="c-39962178">[-]</label><label class="expand" for="c-39962178">[5 more]</label></div><br/><div class="children"><div class="content">Ooh!  The &#x27;docker image on WASM&#x27; thing sounds promising for a wide range of problems.  Recently I wanted to run a FFMPEG&#x2F;SoX pipeline on the client - too many dependencies to easily recompile with Emscripten; could your approach help there?</div><br/><div id="39963210" class="c"><input type="checkbox" id="c-39963210" checked=""/><div class="controls bullet"><span class="by">jasonjmcghee</span><span>|</span><a href="#39960538">root</a><span>|</span><a href="#39962178">parent</a><span>|</span><a href="#39962519">next</a><span>|</span><label class="collapse" for="c-39963210">[-]</label><label class="expand" for="c-39963210">[3 more]</label></div><br/><div class="children"><div class="content">There&#x27;s already ffmpeg wasm. I&#x27;ve used it in projects. Works great.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;ffmpegwasm&#x2F;ffmpeg.wasm">https:&#x2F;&#x2F;github.com&#x2F;ffmpegwasm&#x2F;ffmpeg.wasm</a></div><br/><div id="39965041" class="c"><input type="checkbox" id="c-39965041" checked=""/><div class="controls bullet"><span class="by">waldrews</span><span>|</span><a href="#39960538">root</a><span>|</span><a href="#39963210">parent</a><span>|</span><a href="#39962519">next</a><span>|</span><label class="collapse" for="c-39965041">[-]</label><label class="expand" for="c-39965041">[2 more]</label></div><br/><div class="children"><div class="content">Thanks, looks good... doesn&#x27;t look like there&#x27;s a SoX though.</div><br/><div id="39966628" class="c"><input type="checkbox" id="c-39966628" checked=""/><div class="controls bullet"><span class="by">jasonjmcghee</span><span>|</span><a href="#39960538">root</a><span>|</span><a href="#39965041">parent</a><span>|</span><a href="#39962519">next</a><span>|</span><label class="collapse" for="c-39966628">[-]</label><label class="expand" for="c-39966628">[1 more]</label></div><br/><div class="children"><div class="content">I googled - havenât tried it <a href="https:&#x2F;&#x2F;github.com&#x2F;rameshvarun&#x2F;sox-emscripten">https:&#x2F;&#x2F;github.com&#x2F;rameshvarun&#x2F;sox-emscripten</a><p>Thereâs also
<a href="https:&#x2F;&#x2F;github.com&#x2F;IPS-LMU&#x2F;wasmsox">https:&#x2F;&#x2F;github.com&#x2F;IPS-LMU&#x2F;wasmsox</a><p>Lots of cool software that people hack together for fun. Just site:github and search!</div><br/></div></div></div></div></div></div><div id="39962519" class="c"><input type="checkbox" id="c-39962519" checked=""/><div class="controls bullet"><span class="by">n2d4</span><span>|</span><a href="#39960538">root</a><span>|</span><a href="#39962178">parent</a><span>|</span><a href="#39963210">prev</a><span>|</span><a href="#39964982">next</a><span>|</span><label class="collapse" for="c-39962519">[-]</label><label class="expand" for="c-39962519">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, that should be possible! Though, for audio processing, the performance will probably be terrible (because it&#x27;s all emulated).</div><br/></div></div></div></div><div id="39964982" class="c"><input type="checkbox" id="c-39964982" checked=""/><div class="controls bullet"><span class="by">MuffinFlavored</span><span>|</span><a href="#39960538">parent</a><span>|</span><a href="#39962178">prev</a><span>|</span><a href="#39967364">next</a><span>|</span><label class="collapse" for="c-39964982">[-]</label><label class="expand" for="c-39964982">[2 more]</label></div><br/><div class="children"><div class="content">&gt; pgmock runs an x86 emulator with the original Postgres inside<p>Why can&#x27;t Postgres compile to WASM instead of x86?</div><br/><div id="39965112" class="c"><input type="checkbox" id="c-39965112" checked=""/><div class="controls bullet"><span class="by">anarazel</span><span>|</span><a href="#39960538">root</a><span>|</span><a href="#39964982">parent</a><span>|</span><a href="#39967364">next</a><span>|</span><label class="collapse" for="c-39965112">[-]</label><label class="expand" for="c-39965112">[1 more]</label></div><br/><div class="children"><div class="content">Postgres uses multiple processes, shared memory etc. The single user thing that OP referenced is single user because of that...</div><br/></div></div></div></div></div></div><div id="39967364" class="c"><input type="checkbox" id="c-39967364" checked=""/><div class="controls bullet"><span class="by">theage</span><span>|</span><a href="#39960538">prev</a><span>|</span><a href="#39962634">next</a><span>|</span><label class="collapse" for="c-39967364">[-]</label><label class="expand" for="c-39967364">[1 more]</label></div><br/><div class="children"><div class="content">For prisma&#x2F;nodejs devs who just want postgres-in-a-can for local dev you are better off using the recently released serverizing of pglite, pglite-server: <a href="https:&#x2F;&#x2F;github.com&#x2F;kamilogorek&#x2F;pglite-server">https:&#x2F;&#x2F;github.com&#x2F;kamilogorek&#x2F;pglite-server</a><p>It&#x27;s faster, can persist data to fs, though less stable under heavy use than the full x86 emu e2e test server. I found pglite-server uses only 150MB ram compared to 830MB for pgmock-server. You can then use dotenv to checkout a new .env.local with updated DATABASE_URL for all your nextjs&#x2F;prisma package.json run scripts<p><pre><code>  DATABASE_URL=&quot;postgresql:&#x2F;&#x2F;postgres@localhost:5432&#x2F;awesomeproject&quot;
  &quot;db:pushlocal&quot;: &quot;dotenv -e .env.local -- pnpm prisma db push&quot;

</code></pre>
Very easy to add to any project, No wonder neon is sponsoring this space.</div><br/></div></div><div id="39962634" class="c"><input type="checkbox" id="c-39962634" checked=""/><div class="controls bullet"><span class="by">rsyring</span><span>|</span><a href="#39967364">prev</a><span>|</span><a href="#39966809">next</a><span>|</span><label class="collapse" for="c-39962634">[-]</label><label class="expand" for="c-39962634">[26 more]</label></div><br/><div class="children"><div class="content">Why not just run Postgres with it&#x27;s files on a ramdisk?<p>Update: this can apparently run in a browser&#x2F;Node environment so can be created&#x2F;updated&#x2F;destroyed by the tests.  I guess I&#x27;m too much of a backend dev to understand the advantage over a more typical dev setup.  Can someone elaborate on where&#x2F;when&#x2F;how this is better?</div><br/><div id="39962726" class="c"><input type="checkbox" id="c-39962726" checked=""/><div class="controls bullet"><span class="by">n2d4</span><span>|</span><a href="#39962634">parent</a><span>|</span><a href="#39962710">next</a><span>|</span><label class="collapse" for="c-39962726">[-]</label><label class="expand" for="c-39962726">[10 more]</label></div><br/><div class="children"><div class="content">That&#x27;s more or less what happens inside the emulator (the emulated disk is an in-memory 9P file system). It&#x27;s in WebAssembly because that makes it more portable (same behaviour across platforms, architectures, and even in the browser or edge environments), and there are no external dependencies (not even Docker).<p>Because the emulator lets us boot an &quot;already launched&quot; state directly, it&#x27;s also faster to boot up the emulated database than spinning up a real one (or Docker container), but this was more of a happy accident than a design goal.</div><br/><div id="39965334" class="c"><input type="checkbox" id="c-39965334" checked=""/><div class="controls bullet"><span class="by">peter_l_downs</span><span>|</span><a href="#39962634">root</a><span>|</span><a href="#39962726">parent</a><span>|</span><a href="#39964292">next</a><span>|</span><label class="collapse" for="c-39965334">[-]</label><label class="expand" for="c-39965334">[8 more]</label></div><br/><div class="children"><div class="content">Can you give a specific &#x2F; concrete example of why I would want to use this instead of running a postgres server a different way (docker, binary, whatever) and having the tests connect to that server? I really don&#x27;t understand when this would be useful.</div><br/><div id="39965942" class="c"><input type="checkbox" id="c-39965942" checked=""/><div class="controls bullet"><span class="by">augunrik</span><span>|</span><a href="#39962634">root</a><span>|</span><a href="#39965334">parent</a><span>|</span><a href="#39965750">next</a><span>|</span><label class="collapse" for="c-39965942">[-]</label><label class="expand" for="c-39965942">[2 more]</label></div><br/><div class="children"><div class="content">I have a customer that is not allowed to run Postgres natively or docker at all (bc of security). They could use this, I guess.</div><br/><div id="39966015" class="c"><input type="checkbox" id="c-39966015" checked=""/><div class="controls bullet"><span class="by">peter_l_downs</span><span>|</span><a href="#39962634">root</a><span>|</span><a href="#39965942">parent</a><span>|</span><a href="#39965750">next</a><span>|</span><label class="collapse" for="c-39966015">[-]</label><label class="expand" for="c-39966015">[1 more]</label></div><br/><div class="children"><div class="content">Wow, ok thanks that makes sense â I never thought of an environment like that.</div><br/></div></div></div></div><div id="39965750" class="c"><input type="checkbox" id="c-39965750" checked=""/><div class="controls bullet"><span class="by">lelandbatey</span><span>|</span><a href="#39962634">root</a><span>|</span><a href="#39965334">parent</a><span>|</span><a href="#39965942">prev</a><span>|</span><a href="#39965533">next</a><span>|</span><label class="collapse" for="c-39965750">[-]</label><label class="expand" for="c-39965750">[4 more]</label></div><br/><div class="children"><div class="content">These kinds of in-process&#x2F;in-memory versions of dependencies take the startup time of those test from minutes&#x2F;seconds to milliseconds, allowing you to run your tests vastly faster. That&#x27;s a game changer for developer productivity.<p>What&#x27;s great is that your code still just depends on &quot;postgres&quot;, so you can test against this in-memory version most of the time then occasionally (such as in CI) run that same suite but either a &quot;real&quot; postgres as a way to make SURE you&#x27;re not missing anything.</div><br/><div id="39966002" class="c"><input type="checkbox" id="c-39966002" checked=""/><div class="controls bullet"><span class="by">peter_l_downs</span><span>|</span><a href="#39962634">root</a><span>|</span><a href="#39965750">parent</a><span>|</span><a href="#39966290">next</a><span>|</span><label class="collapse" for="c-39966002">[-]</label><label class="expand" for="c-39966002">[1 more]</label></div><br/><div class="children"><div class="content">OK, that goal makes sense, thanks for explaining. For what it&#x27;s worth I&#x27;m pretty sure you can do this with postgres, tmpfs, and template databases â see my project, pgtestdb [0]. I haven&#x27;t done a formal perf measurement, but each test would get a fresh and migrated database in about 20ms on my local machine. The setup described runs postgres in a container for convenience, but you could probably also just run a postgres binary and store the data on a memory-backed filesystem.<p>[0] <a href="https:&#x2F;&#x2F;github.com&#x2F;peterldowns&#x2F;pgtestdb">https:&#x2F;&#x2F;github.com&#x2F;peterldowns&#x2F;pgtestdb</a></div><br/></div></div><div id="39966290" class="c"><input type="checkbox" id="c-39966290" checked=""/><div class="controls bullet"><span class="by">stickfigure</span><span>|</span><a href="#39962634">root</a><span>|</span><a href="#39965750">parent</a><span>|</span><a href="#39966002">prev</a><span>|</span><a href="#39965533">next</a><span>|</span><label class="collapse" for="c-39966290">[-]</label><label class="expand" for="c-39966290">[2 more]</label></div><br/><div class="children"><div class="content">You can bring &quot;real postgres&quot; test startup times back to milliseconds with CREATE DATABASE ... FROM TEMPLATE. Every test gets a fresh database (without having to run migration scripts) and the step takes millis.</div><br/><div id="39966337" class="c"><input type="checkbox" id="c-39966337" checked=""/><div class="controls bullet"><span class="by">CogitoCogito</span><span>|</span><a href="#39962634">root</a><span>|</span><a href="#39966290">parent</a><span>|</span><a href="#39965533">next</a><span>|</span><label class="collapse" for="c-39966337">[-]</label><label class="expand" for="c-39966337">[1 more]</label></div><br/><div class="children"><div class="content">Yeah Iâd be surprised if this method werenât just as fast. And if itâs not, would the difference just be to run the server with a ramdisk and to maybe turn off some of the durable setting to speed things up ( <a href="https:&#x2F;&#x2F;www.postgresql.org&#x2F;docs&#x2F;current&#x2F;non-durability.html" rel="nofollow">https:&#x2F;&#x2F;www.postgresql.org&#x2F;docs&#x2F;current&#x2F;non-durability.html</a> ).</div><br/></div></div></div></div></div></div><div id="39965533" class="c"><input type="checkbox" id="c-39965533" checked=""/><div class="controls bullet"><span class="by">danmur</span><span>|</span><a href="#39962634">root</a><span>|</span><a href="#39965334">parent</a><span>|</span><a href="#39965750">prev</a><span>|</span><a href="#39964292">next</a><span>|</span><label class="collapse" for="c-39965533">[-]</label><label class="expand" for="c-39965533">[1 more]</label></div><br/><div class="children"><div class="content">Me either.  It&#x27;s a couple hundred lines of code to make a very comprehensive fixture using the real postgres, and it supports all extensions, including exotic ones you make yourself.</div><br/></div></div></div></div><div id="39964292" class="c"><input type="checkbox" id="c-39964292" checked=""/><div class="controls bullet"><span class="by">gchamonlive</span><span>|</span><a href="#39962634">root</a><span>|</span><a href="#39962726">parent</a><span>|</span><a href="#39965334">prev</a><span>|</span><a href="#39962710">next</a><span>|</span><label class="collapse" for="c-39964292">[-]</label><label class="expand" for="c-39964292">[1 more]</label></div><br/><div class="children"><div class="content">You could also use memory state dump from a microvm manager like firecracker and have the state replicated</div><br/></div></div></div></div><div id="39962710" class="c"><input type="checkbox" id="c-39962710" checked=""/><div class="controls bullet"><span class="by">orphea</span><span>|</span><a href="#39962634">parent</a><span>|</span><a href="#39962726">prev</a><span>|</span><a href="#39964566">next</a><span>|</span><label class="collapse" for="c-39962710">[-]</label><label class="expand" for="c-39962710">[8 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t get it either. I feel like this is so much unnecessary code, an emulator, a network stack...<p>Why not use something like <a href="https:&#x2F;&#x2F;testcontainers.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;testcontainers.com&#x2F;</a>? Is a container engine as an external dependency <i>that</i> bad?</div><br/><div id="39963851" class="c"><input type="checkbox" id="c-39963851" checked=""/><div class="controls bullet"><span class="by">medellin</span><span>|</span><a href="#39962634">root</a><span>|</span><a href="#39962710">parent</a><span>|</span><a href="#39963629">next</a><span>|</span><label class="collapse" for="c-39963851">[-]</label><label class="expand" for="c-39963851">[5 more]</label></div><br/><div class="children"><div class="content">It is annoying is you want to run your teat inside a container for ci and now you are running a container in a container and all the issues that come with it.</div><br/><div id="39965357" class="c"><input type="checkbox" id="c-39965357" checked=""/><div class="controls bullet"><span class="by">peter_l_downs</span><span>|</span><a href="#39962634">root</a><span>|</span><a href="#39963851">parent</a><span>|</span><a href="#39963901">next</a><span>|</span><label class="collapse" for="c-39965357">[-]</label><label class="expand" for="c-39965357">[1 more]</label></div><br/><div class="children"><div class="content">Why would the postgres container need to be nested inside another container? Why not just have the CI environment also run a Postgres container, along side your tests, and give your tests a `POSTGRES_URL` environment variable? Or why even bother running Postgres in a container, why not just run the Postgres binary on the host that&#x27;s running your tests in the container?</div><br/></div></div><div id="39963901" class="c"><input type="checkbox" id="c-39963901" checked=""/><div class="controls bullet"><span class="by">dorianmariefr</span><span>|</span><a href="#39962634">root</a><span>|</span><a href="#39963851">parent</a><span>|</span><a href="#39965357">prev</a><span>|</span><a href="#39963629">next</a><span>|</span><label class="collapse" for="c-39963901">[-]</label><label class="expand" for="c-39963901">[3 more]</label></div><br/><div class="children"><div class="content">which issues?</div><br/><div id="39964250" class="c"><input type="checkbox" id="c-39964250" checked=""/><div class="controls bullet"><span class="by">c0balt</span><span>|</span><a href="#39962634">root</a><span>|</span><a href="#39963901">parent</a><span>|</span><a href="#39963629">next</a><span>|</span><label class="collapse" for="c-39964250">[-]</label><label class="expand" for="c-39964250">[2 more]</label></div><br/><div class="children"><div class="content">Depending on the setup it can be a pain to get nested containers working sometimes. There is, e.g., Docker In Docker but this often required a privileged host container which is often not provided in CI&#x2F;CD pipelines.</div><br/><div id="39964447" class="c"><input type="checkbox" id="c-39964447" checked=""/><div class="controls bullet"><span class="by">j45</span><span>|</span><a href="#39962634">root</a><span>|</span><a href="#39964250">parent</a><span>|</span><a href="#39963629">next</a><span>|</span><label class="collapse" for="c-39964447">[-]</label><label class="expand" for="c-39964447">[1 more]</label></div><br/><div class="children"><div class="content">Which issues&#x2F;pains with getting nested containers?<p>I am aware of only a few settings that make a container nestle, or not, whether it is a vm, lxc&#x2F;lxd type container, etc.</div><br/></div></div></div></div></div></div></div></div><div id="39963629" class="c"><input type="checkbox" id="c-39963629" checked=""/><div class="controls bullet"><span class="by">bastawhiz</span><span>|</span><a href="#39962634">root</a><span>|</span><a href="#39962710">parent</a><span>|</span><a href="#39963851">prev</a><span>|</span><a href="#39965226">next</a><span>|</span><label class="collapse" for="c-39963629">[-]</label><label class="expand" for="c-39963629">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s the same amount of code and on Mac you still run a full VM to load containers (with a network stack), so I&#x27;m not really sure what your point is. If anything it&#x27;s <i>less</i> code because the notion of the container is entirely abstracted away, and the whole thing is entirely a wasm dependency that you load as a normal import.</div><br/></div></div><div id="39965226" class="c"><input type="checkbox" id="c-39965226" checked=""/><div class="controls bullet"><span class="by">hamandcheese</span><span>|</span><a href="#39962634">root</a><span>|</span><a href="#39962710">parent</a><span>|</span><a href="#39963629">prev</a><span>|</span><a href="#39964566">next</a><span>|</span><label class="collapse" for="c-39965226">[-]</label><label class="expand" for="c-39965226">[1 more]</label></div><br/><div class="children"><div class="content">The fact that this can run in-process is a big deal, as it means you don&#x27;t have to worry about cleanup.<p>As soon as you have external processes that your tests depend on, your tests need some sort of wrapper or orchestrator to set everything up before starting tests, and ideally tear it down after.<p>In 90% of cases I see, that orchestration is done in an extremely non-portable way (like leveraging tools built in to your CI system) which can make reproducing test failures a huge pain in the ass.</div><br/></div></div></div></div><div id="39964566" class="c"><input type="checkbox" id="c-39964566" checked=""/><div class="controls bullet"><span class="by">zer00eyz</span><span>|</span><a href="#39962634">parent</a><span>|</span><a href="#39962710">prev</a><span>|</span><a href="#39966809">next</a><span>|</span><label class="collapse" for="c-39964566">[-]</label><label class="expand" for="c-39964566">[7 more]</label></div><br/><div class="children"><div class="content">The whole purpose of End to End testing is that your testing the system in a real state. It&#x27;s an emulation of your live environment. Because of that you can do interesting things like find out what happens if you pull the plug or run out of disk or ....<p>The moment that you shove a mock in there, your unit testing. Effective but not the same. One of the critical points of E2E is that without mocks you know that your tests are accurate. Because this isnt Postgres I&#x27;m testing it every time and not that system.<p>&gt;&gt; Can someone elaborate on where&#x2F;when&#x2F;how this is better?<p>If your building PG for an embedded, light weight, or under powered system then this would make sense for verification testing before real E2E testing that would be much slower. (a use case I have)<p>Other than that its just a cool project and if you ever need a PG shim it&#x27;s there.</div><br/><div id="39966348" class="c"><input type="checkbox" id="c-39966348" checked=""/><div class="controls bullet"><span class="by">wpietri</span><span>|</span><a href="#39962634">root</a><span>|</span><a href="#39964566">parent</a><span>|</span><a href="#39965345">next</a><span>|</span><label class="collapse" for="c-39966348">[-]</label><label class="expand" for="c-39966348">[1 more]</label></div><br/><div class="children"><div class="content">I think you&#x27;re being a little absolutist about this. Swapping out a possibly equivalent database engine does not turn anything into a unit test, which is defined by testing individual <i>units</i> of code in relative isolation. You can argue that it&#x27;s not <i>true</i> end to end testing. But almost every E2E test I&#x27;ve seen involves some compromises compared with the true production environment to save money, time, or effort.</div><br/></div></div><div id="39965345" class="c"><input type="checkbox" id="c-39965345" checked=""/><div class="controls bullet"><span class="by">peter_l_downs</span><span>|</span><a href="#39962634">root</a><span>|</span><a href="#39964566">parent</a><span>|</span><a href="#39966348">prev</a><span>|</span><a href="#39966804">next</a><span>|</span><label class="collapse" for="c-39965345">[-]</label><label class="expand" for="c-39965345">[3 more]</label></div><br/><div class="children"><div class="content">&gt; If your building PG for an embedded, light weight, or under powered system then this would make sense for verification testing before real E2E testing that would be much slower. (a use case I have)<p>If this is actually just Postgres running in an x86 emulator (*edit: originally this said &quot;compiled to wasm&quot;), then how could this be faster than Postgres in any given environment? I don&#x27;t understand â if it were faster, wouldn&#x27;t you just want to deploy this in prod in your weird environment rather than Postgres? Why limit this to mocking?</div><br/><div id="39965834" class="c"><input type="checkbox" id="c-39965834" checked=""/><div class="controls bullet"><span class="by">RussianCow</span><span>|</span><a href="#39962634">root</a><span>|</span><a href="#39965345">parent</a><span>|</span><a href="#39966804">next</a><span>|</span><label class="collapse" for="c-39965834">[-]</label><label class="expand" for="c-39965834">[2 more]</label></div><br/><div class="children"><div class="content">Presumably, it&#x27;s faster to boot and for tests because it doesn&#x27;t need to access an actual file system; everything is in memory. That doesn&#x27;t mean it would be any faster in production, and in fact, it wouldn&#x27;t be useful in that environment even if it was.</div><br/><div id="39966027" class="c"><input type="checkbox" id="c-39966027" checked=""/><div class="controls bullet"><span class="by">peter_l_downs</span><span>|</span><a href="#39962634">root</a><span>|</span><a href="#39965834">parent</a><span>|</span><a href="#39966804">next</a><span>|</span><label class="collapse" for="c-39966027">[-]</label><label class="expand" for="c-39966027">[1 more]</label></div><br/><div class="children"><div class="content">Understood, thank you.</div><br/></div></div></div></div></div></div><div id="39966804" class="c"><input type="checkbox" id="c-39966804" checked=""/><div class="controls bullet"><span class="by">majikandy</span><span>|</span><a href="#39962634">root</a><span>|</span><a href="#39964566">parent</a><span>|</span><a href="#39965345">prev</a><span>|</span><a href="#39965888">next</a><span>|</span><label class="collapse" for="c-39966804">[-]</label><label class="expand" for="c-39966804">[1 more]</label></div><br/><div class="children"><div class="content">Until you trust every part of the mock behaves the same as every part of the real database you useâ¦ most often the db is your boundary with nothing further downstream. At that point it really is just a faster disposable database, and totally is valid acceptance tests for the e2e system.<p>Also nothing stops you from using a mock for some tests and a real database for others. It just comes down to trust.</div><br/></div></div><div id="39965888" class="c"><input type="checkbox" id="c-39965888" checked=""/><div class="controls bullet"><span class="by">lelandbatey</span><span>|</span><a href="#39962634">root</a><span>|</span><a href="#39964566">parent</a><span>|</span><a href="#39966804">prev</a><span>|</span><a href="#39966809">next</a><span>|</span><label class="collapse" for="c-39965888">[-]</label><label class="expand" for="c-39965888">[1 more]</label></div><br/><div class="children"><div class="content">Nah, by having in-memory versions of your dependencies, in-memory versions which fulfill the same interfaces as those used in your E2E tests (or the majority of your E2E tests) you unlock running your entire E2E tests suite in milliseconds-to-seconds instead of minutes-to-seconds. And because they&#x27;re E2E tests that work with any implementation, you can still run your exact same test suite against your &quot;real&quot; E2E dependencies in a CI step to be super sure both implementations behave the same.<p>I&#x27;ve done this across multiple jobs, and it&#x27;s amazing to be able to run your &quot;mostly-E2E&quot; tests in 1-2 seconds while developing and the same suite in the full E2E env in CI. It makes developing with confidence so fast and mostly stress free (diverging behavior is admittedly annoying, but usually rare).<p>I highly recommend using these if feasible.</div><br/></div></div></div></div></div></div><div id="39966809" class="c"><input type="checkbox" id="c-39966809" checked=""/><div class="controls bullet"><span class="by">xlii</span><span>|</span><a href="#39962634">prev</a><span>|</span><a href="#39967587">next</a><span>|</span><label class="collapse" for="c-39966809">[-]</label><label class="expand" for="c-39966809">[1 more]</label></div><br/><div class="children"><div class="content">Hate to be w downer but Iâd never consider this for use.<p>For trivial applications maybe itâd work, but with more complexity like anything that has risk of deadlocking or depends on the database shape and such solution subtracts from value as even small shift in behavior can snowball into critical problems.<p>Today I lean towards resource constrained E2E environment so that local test runners have opportunity to break if someone write anything grossly underperforming.<p>Not to mention that snapshotting DB after second and distributing this snapshot to test partitions is super fast and many times shaved multiple minutes from test suites.<p>Itâs an interesting idea and definitely great learning experience but I think that target audience is limited.</div><br/></div></div><div id="39967587" class="c"><input type="checkbox" id="c-39967587" checked=""/><div class="controls bullet"><span class="by">camgunz</span><span>|</span><a href="#39966809">prev</a><span>|</span><a href="#39962894">next</a><span>|</span><label class="collapse" for="c-39967587">[-]</label><label class="expand" for="c-39967587">[1 more]</label></div><br/><div class="children"><div class="content">Wow very cool that you got to open source this, thanks!</div><br/></div></div><div id="39962894" class="c"><input type="checkbox" id="c-39962894" checked=""/><div class="controls bullet"><span class="by">rickette</span><span>|</span><a href="#39967587">prev</a><span>|</span><a href="#39964531">next</a><span>|</span><label class="collapse" for="c-39962894">[-]</label><label class="expand" for="c-39962894">[1 more]</label></div><br/><div class="children"><div class="content">I used to run all kinds of (custom) fake in-memory servers in my tests. Nowadays I just run the real thing using Testcontainers (<a href="https:&#x2F;&#x2F;testcontainers.com" rel="nofollow">https:&#x2F;&#x2F;testcontainers.com</a>)</div><br/></div></div><div id="39964531" class="c"><input type="checkbox" id="c-39964531" checked=""/><div class="controls bullet"><span class="by">tumidpandora</span><span>|</span><a href="#39962894">prev</a><span>|</span><a href="#39966759">next</a><span>|</span><label class="collapse" for="c-39964531">[-]</label><label class="expand" for="c-39964531">[3 more]</label></div><br/><div class="children"><div class="content">Off-topic, but the title confused me a bit - &quot;...I built at work.&quot; Doesn&#x27;t this imply that the intellectual property for this project belongs to your employer, assuming you used resources from work? If so, are you technically allowed to open-source it?</div><br/><div id="39965107" class="c"><input type="checkbox" id="c-39965107" checked=""/><div class="controls bullet"><span class="by">n2d4</span><span>|</span><a href="#39964531">parent</a><span>|</span><a href="#39964697">next</a><span>|</span><label class="collapse" for="c-39965107">[-]</label><label class="expand" for="c-39965107">[1 more]</label></div><br/><div class="children"><div class="content">We&#x27;re a startup, open-sourcing was as easy as getting the rest of the team&#x27;s approval.</div><br/></div></div><div id="39964697" class="c"><input type="checkbox" id="c-39964697" checked=""/><div class="controls bullet"><span class="by">Gracana</span><span>|</span><a href="#39964531">parent</a><span>|</span><a href="#39965107">prev</a><span>|</span><a href="#39966759">next</a><span>|</span><label class="collapse" for="c-39964697">[-]</label><label class="expand" for="c-39964697">[1 more]</label></div><br/><div class="children"><div class="content">Stackframe owns the repo and the LICENSE file says &quot;Copyright 2024 Stackframe.&quot; I think the author works at Stackframe.</div><br/></div></div></div></div><div id="39966759" class="c"><input type="checkbox" id="c-39966759" checked=""/><div class="controls bullet"><span class="by">andy_ppp</span><span>|</span><a href="#39964531">prev</a><span>|</span><a href="#39965352">next</a><span>|</span><label class="collapse" for="c-39966759">[-]</label><label class="expand" for="c-39966759">[1 more]</label></div><br/><div class="children"><div class="content">Why not just use Docker and have a different testing database? Elixir does this, and the testing framework wraps each test into a transaction that is rolled back for isolation. Be interesting to know the advantages of this approach!</div><br/></div></div><div id="39965352" class="c"><input type="checkbox" id="c-39965352" checked=""/><div class="controls bullet"><span class="by">crakhamster01</span><span>|</span><a href="#39966759">prev</a><span>|</span><a href="#39966912">next</a><span>|</span><label class="collapse" for="c-39965352">[-]</label><label class="expand" for="c-39965352">[1 more]</label></div><br/><div class="children"><div class="content">This is pretty neat! Some questions, if you&#x27;re able to answer:<p>* What was the inspiration for developing this project at work? Was running Postgres in a Docker container too slow?<p>* What did your CI setup for E2E tests look like before and after integrating pgmock into the flow?<p>* Was migrating over to this solution difficult?<p>Thanks!</div><br/></div></div><div id="39966912" class="c"><input type="checkbox" id="c-39966912" checked=""/><div class="controls bullet"><span class="by">davvid</span><span>|</span><a href="#39965352">prev</a><span>|</span><a href="#39964371">next</a><span>|</span><label class="collapse" for="c-39966912">[-]</label><label class="expand" for="c-39966912">[1 more]</label></div><br/><div class="children"><div class="content">If you&#x27;re into this kinda thing and are in python land you might also appreciate my friend&#x27;s project in a similar vein<p><a href="https:&#x2F;&#x2F;github.com&#x2F;ugtar&#x2F;pg_temp">https:&#x2F;&#x2F;github.com&#x2F;ugtar&#x2F;pg_temp</a></div><br/></div></div><div id="39964371" class="c"><input type="checkbox" id="c-39964371" checked=""/><div class="controls bullet"><span class="by">drzaiusx11</span><span>|</span><a href="#39966912">prev</a><span>|</span><a href="#39966980">next</a><span>|</span><label class="collapse" for="c-39964371">[-]</label><label class="expand" for="c-39964371">[1 more]</label></div><br/><div class="children"><div class="content">How does this compare to H2 in postgres compatibility mode?</div><br/></div></div><div id="39966980" class="c"><input type="checkbox" id="c-39966980" checked=""/><div class="controls bullet"><span class="by">KingOfCoders</span><span>|</span><a href="#39964371">prev</a><span>|</span><a href="#39965500">next</a><span>|</span><label class="collapse" for="c-39966980">[-]</label><label class="expand" for="c-39966980">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been using template databases in the past, to copy a new database for each test.<p>Trying out some in-memory ideas, there was not too much difference to a fast SSD.</div><br/></div></div><div id="39965500" class="c"><input type="checkbox" id="c-39965500" checked=""/><div class="controls bullet"><span class="by">segmondy</span><span>|</span><a href="#39966980">prev</a><span>|</span><a href="#39965313">next</a><span>|</span><label class="collapse" for="c-39965500">[-]</label><label class="expand" for="c-39965500">[1 more]</label></div><br/><div class="children"><div class="content">Dump your prod data, scrub all the sensitive data,  truncate all the unneeded tables like your log tables.  You have a good dev copy, replicate for dev ,qa, e2e, etc. Those extensions,  triggers,  functions,  views, indexes, data are what you need for e2e.</div><br/></div></div><div id="39965313" class="c"><input type="checkbox" id="c-39965313" checked=""/><div class="controls bullet"><span class="by">geuis</span><span>|</span><a href="#39965500">prev</a><span>|</span><a href="#39967324">next</a><span>|</span><label class="collapse" for="c-39965313">[-]</label><label class="expand" for="c-39965313">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve used pgmem <a href="https:&#x2F;&#x2F;github.com&#x2F;oguimbal&#x2F;pg-mem">https:&#x2F;&#x2F;github.com&#x2F;oguimbal&#x2F;pg-mem</a> for the last couple of years for the same thing.</div><br/></div></div><div id="39967324" class="c"><input type="checkbox" id="c-39967324" checked=""/><div class="controls bullet"><span class="by">fullstackchris</span><span>|</span><a href="#39965313">prev</a><span>|</span><a href="#39964385">next</a><span>|</span><label class="collapse" for="c-39967324">[-]</label><label class="expand" for="c-39967324">[1 more]</label></div><br/><div class="children"><div class="content">This is amazing! I&#x27;ve been looking for an in-memory postgres mock for integration tests for ages!</div><br/></div></div><div id="39964385" class="c"><input type="checkbox" id="c-39964385" checked=""/><div class="controls bullet"><span class="by">herpdyderp</span><span>|</span><a href="#39967324">prev</a><span>|</span><a href="#39962679">next</a><span>|</span><label class="collapse" for="c-39964385">[-]</label><label class="expand" for="c-39964385">[1 more]</label></div><br/><div class="children"><div class="content">This might be a stupid question, but do you know how this might be used with a Prisma client?</div><br/></div></div><div id="39962679" class="c"><input type="checkbox" id="c-39962679" checked=""/><div class="controls bullet"><span class="by">andrelaszlo</span><span>|</span><a href="#39964385">prev</a><span>|</span><a href="#39965739">next</a><span>|</span><label class="collapse" for="c-39962679">[-]</label><label class="expand" for="c-39962679">[2 more]</label></div><br/><div class="children"><div class="content">Cool! Which pg version is this based on?</div><br/><div id="39963726" class="c"><input type="checkbox" id="c-39963726" checked=""/><div class="controls bullet"><span class="by">justinclift</span><span>|</span><a href="#39962679">parent</a><span>|</span><a href="#39965739">next</a><span>|</span><label class="collapse" for="c-39963726">[-]</label><label class="expand" for="c-39963726">[1 more]</label></div><br/><div class="children"><div class="content">The online demo seems to be PG 14.5.  Output from &quot;SELECT version()&quot; is:<p><pre><code>    &quot;version&quot;: &quot;PostgreSQL 14.5 on i686-buildroot-linux-musl, compiled by i686-buildroot-linux-musl-gcc.br_real (Buildroot 2022.08) 12.1.0, 32-bit&quot;</code></pre></div><br/></div></div></div></div><div id="39965739" class="c"><input type="checkbox" id="c-39965739" checked=""/><div class="controls bullet"><span class="by">vivzkestrel</span><span>|</span><a href="#39962679">prev</a><span>|</span><a href="#39966106">next</a><span>|</span><label class="collapse" for="c-39965739">[-]</label><label class="expand" for="c-39965739">[1 more]</label></div><br/><div class="children"><div class="content">support for orms like sequelize, prisma, drizzle for testing?</div><br/></div></div><div id="39966106" class="c"><input type="checkbox" id="c-39966106" checked=""/><div class="controls bullet"><span class="by">revskill</span><span>|</span><a href="#39965739">prev</a><span>|</span><label class="collapse" for="c-39966106">[-]</label><label class="expand" for="c-39966106">[1 more]</label></div><br/><div class="children"><div class="content">Just use docker.</div><br/></div></div></div></div></div></div></div></body></html>