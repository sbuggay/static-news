<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1726822877095" as="style"/><link rel="stylesheet" href="styles.css?v=1726822877095"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/MightyMoud/sidekick">Show HN: A CLI tool I made to self-host any app with two commands on a VPS</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>mightymoud</span> | <span>104 comments</span></div><br/><div><div id="41595810" class="c"><input type="checkbox" id="c-41595810" checked=""/><div class="controls bullet"><span class="by">dewey</span><span>|</span><a href="#41592636">next</a><span>|</span><label class="collapse" for="c-41595810">[-]</label><label class="expand" for="c-41595810">[19 more]</label></div><br/><div class="children"><div class="content">I&#x27;d also suggest people to take a look at Dokku, it&#x27;s a very mature project with a similar scope and was discussed here a few weeks ago:<p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41358020">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41358020</a><p>I wrote up my own experiences too (<a href="https:&#x2F;&#x2F;blog.notmyhostna.me&#x2F;posts&#x2F;selfhosting-with-dokku-and-docker-compose" rel="nofollow">https:&#x2F;&#x2F;blog.notmyhostna.me&#x2F;posts&#x2F;selfhosting-with-dokku-and...</a>) and I can only recommend it. It is ~3 commands to set up an app, and one push to deploy after that.</div><br/><div id="41596045" class="c"><input type="checkbox" id="c-41596045" checked=""/><div class="controls bullet"><span class="by">mimischi</span><span>|</span><a href="#41595810">parent</a><span>|</span><a href="#41596297">next</a><span>|</span><label class="collapse" for="c-41596045">[-]</label><label class="expand" for="c-41596045">[1 more]</label></div><br/><div class="children"><div class="content">Been using dokku for probably 8 years now?  (or something close to that; it used to be written entirely in bash!) Hosting private stuff on it, and an application at $oldplace probably also still runs on this solid setup. Highly recommended, and the devs are a great sport!</div><br/></div></div><div id="41596297" class="c"><input type="checkbox" id="c-41596297" checked=""/><div class="controls bullet"><span class="by">FloatArtifact</span><span>|</span><a href="#41595810">parent</a><span>|</span><a href="#41596045">prev</a><span>|</span><a href="#41595938">next</a><span>|</span><label class="collapse" for="c-41596297">[-]</label><label class="expand" for="c-41596297">[10 more]</label></div><br/><div class="children"><div class="content">Part of me dies every time I see projects not integrating robust restoring and backup systems.</div><br/><div id="41596872" class="c"><input type="checkbox" id="c-41596872" checked=""/><div class="controls bullet"><span class="by">dewey</span><span>|</span><a href="#41595810">root</a><span>|</span><a href="#41596297">parent</a><span>|</span><a href="#41597013">next</a><span>|</span><label class="collapse" for="c-41596872">[-]</label><label class="expand" for="c-41596872">[6 more]</label></div><br/><div class="children"><div class="content">Providing robust restoring and backup systems for a system that allows to run any kind of workload is almost impossible. You&#x27;d have to provide database backups for all versions of all databases, correct file backup for the volumes etc.<p>It feels much more dangerous to have such a system instead in place and provide false sense of security. Users know best what kind of data they need to backup, where they want to back it up, if it needs to be encrypted or not, if it needs to be daily or weekly etc.</div><br/><div id="41600049" class="c"><input type="checkbox" id="c-41600049" checked=""/><div class="controls bullet"><span class="by">sally_glance</span><span>|</span><a href="#41595810">root</a><span>|</span><a href="#41596872">parent</a><span>|</span><a href="#41597163">next</a><span>|</span><label class="collapse" for="c-41600049">[-]</label><label class="expand" for="c-41600049">[1 more]</label></div><br/><div class="children"><div class="content">A viable strategy, but requires an experienced Linux&#x2F;Unix admin and quite some planning &amp; setup effort.<p>There are a lot of non-obvious gotchas with ZFS, and a lot of knobs to turn to make it do what you want. Anecdotally, a coworker of mine set it up on his development machine back when Ubuntu was heavily promoting it for default installs. It worked well until one day his machine started randomly freezing for minutes multiple times a day... He traced the issue back to some improper snapshotting setup, then spend a couple of days trying to fix it before going back to ext4.<p>For the Postgres data use case in particular, I would be wary of interactions and probably require a lot of testing if we were to introduce it... Though it seems at least some people are having success with it (not exactly plug and play or cheap setup though): <a href="https:&#x2F;&#x2F;lackofimagination.org&#x2F;2022&#x2F;04&#x2F;our-experience-with-postgresql-on-zfs&#x2F;" rel="nofollow">https:&#x2F;&#x2F;lackofimagination.org&#x2F;2022&#x2F;04&#x2F;our-experience-with-po...</a></div><br/></div></div><div id="41597163" class="c"><input type="checkbox" id="c-41597163" checked=""/><div class="controls bullet"><span class="by">sgarland</span><span>|</span><a href="#41595810">root</a><span>|</span><a href="#41596872">parent</a><span>|</span><a href="#41600049">prev</a><span>|</span><a href="#41597013">next</a><span>|</span><label class="collapse" for="c-41597163">[-]</label><label class="expand" for="c-41597163">[4 more]</label></div><br/><div class="children"><div class="content">ZFS. Snapshot the entire filesystem, ship it off somewhere. Done. At worst, Postgres is slow to startup from the snapshot because it thinks it’s recovering from a crash.</div><br/><div id="41599118" class="c"><input type="checkbox" id="c-41599118" checked=""/><div class="controls bullet"><span class="by">prmoustache</span><span>|</span><a href="#41595810">root</a><span>|</span><a href="#41597163">parent</a><span>|</span><a href="#41599257">next</a><span>|</span><label class="collapse" for="c-41599118">[-]</label><label class="expand" for="c-41599118">[1 more]</label></div><br/><div class="children"><div class="content">Most projects&#x2F;products can survive a few seconds of downtime to have a clean snapshot.</div><br/></div></div><div id="41599257" class="c"><input type="checkbox" id="c-41599257" checked=""/><div class="controls bullet"><span class="by">dewey</span><span>|</span><a href="#41595810">root</a><span>|</span><a href="#41597163">parent</a><span>|</span><a href="#41599118">prev</a><span>|</span><a href="#41597288">next</a><span>|</span><label class="collapse" for="c-41599257">[-]</label><label class="expand" for="c-41599257">[1 more]</label></div><br/><div class="children"><div class="content">Classic HN reply that’s very disconnected from reality. Most people don’t run ZFS, most people using these tools are using this to self host their apps as it’s cheaper than managed cloud server. Usually on a dedicated or VPS server where by default you run stock Ubuntu and no niche file system.</div><br/></div></div><div id="41597288" class="c"><input type="checkbox" id="c-41597288" checked=""/><div class="controls bullet"><span class="by">GauntletWizard</span><span>|</span><a href="#41595810">root</a><span>|</span><a href="#41597163">parent</a><span>|</span><a href="#41599257">prev</a><span>|</span><a href="#41597013">next</a><span>|</span><label class="collapse" for="c-41597288">[-]</label><label class="expand" for="c-41597288">[1 more]</label></div><br/><div class="children"><div class="content">Postgres is recovering from a crash if it&#x27;s reading from a ZFS snapshot. It probably did have several of it&#x27;s database writes succeed that it wasn&#x27;t certain of, and others fail that it also wasn&#x27;t certain of, and those might not have been &quot;in order&quot;. That&#x27;s why WAL files exist, and it needs to fully replay them.</div><br/></div></div></div></div></div></div><div id="41597013" class="c"><input type="checkbox" id="c-41597013" checked=""/><div class="controls bullet"><span class="by">trog</span><span>|</span><a href="#41595810">root</a><span>|</span><a href="#41596297">parent</a><span>|</span><a href="#41596872">prev</a><span>|</span><a href="#41599105">next</a><span>|</span><label class="collapse" for="c-41597013">[-]</label><label class="expand" for="c-41597013">[1 more]</label></div><br/><div class="children"><div class="content">My VPS provider just lets me take image snapshots of the whole machine so I can roll back to a point in time. It&#x27;s a little slower and less flexible than application or component level but overall I don&#x27;t even think about backup and restore now because I know it&#x27;s handled there.</div><br/></div></div><div id="41599105" class="c"><input type="checkbox" id="c-41599105" checked=""/><div class="controls bullet"><span class="by">prmoustache</span><span>|</span><a href="#41595810">root</a><span>|</span><a href="#41596297">parent</a><span>|</span><a href="#41597013">prev</a><span>|</span><a href="#41596768">next</a><span>|</span><label class="collapse" for="c-41599105">[-]</label><label class="expand" for="c-41599105">[1 more]</label></div><br/><div class="children"><div class="content">FWIW, backup can be ran from a separate docker container mounting same volume as main app and connecting to the db if any so it is not like backup can&#x27;t be taken care of. That&#x27;s it how it is often done in the kubernetes world.</div><br/></div></div><div id="41596768" class="c"><input type="checkbox" id="c-41596768" checked=""/><div class="controls bullet"><span class="by">Aeolun</span><span>|</span><a href="#41595810">root</a><span>|</span><a href="#41596297">parent</a><span>|</span><a href="#41599105">prev</a><span>|</span><a href="#41595938">next</a><span>|</span><label class="collapse" for="c-41596768">[-]</label><label class="expand" for="c-41596768">[1 more]</label></div><br/><div class="children"><div class="content">None of my hobby projects across 15 years or so have ever needed backups or restoring. I can agree it would be nice to have, but it’s a far cry from necessary.</div><br/></div></div></div></div><div id="41595938" class="c"><input type="checkbox" id="c-41595938" checked=""/><div class="controls bullet"><span class="by">rgrieselhuber</span><span>|</span><a href="#41595810">parent</a><span>|</span><a href="#41596297">prev</a><span>|</span><a href="#41596641">next</a><span>|</span><label class="collapse" for="c-41595938">[-]</label><label class="expand" for="c-41595938">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve kept a list of these tools that I&#x27;ve been meaning to check out. In scope, do they cover securing the instance? Is there any automation for creating networks of instances?</div><br/><div id="41595962" class="c"><input type="checkbox" id="c-41595962" checked=""/><div class="controls bullet"><span class="by">dewey</span><span>|</span><a href="#41595810">root</a><span>|</span><a href="#41595938">parent</a><span>|</span><a href="#41596641">next</a><span>|</span><label class="collapse" for="c-41595962">[-]</label><label class="expand" for="c-41595962">[1 more]</label></div><br/><div class="children"><div class="content">&gt;  In scope, do they cover securing the instance?<p>Most of these I checked don&#x27;t, but a recent Ubuntu version is perfectly fine to use as-is.<p>&gt; Is there any automation for creating networks of instances?<p>Not that I&#x27;m aware, it would also defeat the purpose of these tools a bit that are supposed to be simple. (Dokku is &quot;just&quot; a shell script).</div><br/></div></div></div></div><div id="41596641" class="c"><input type="checkbox" id="c-41596641" checked=""/><div class="controls bullet"><span class="by">oulipo</span><span>|</span><a href="#41595810">parent</a><span>|</span><a href="#41595938">prev</a><span>|</span><a href="#41598338">next</a><span>|</span><label class="collapse" for="c-41596641">[-]</label><label class="expand" for="c-41596641">[4 more]</label></div><br/><div class="children"><div class="content">What would be the best between Dokku &#x2F; Dokploy &#x2F; Coolify?</div><br/><div id="41596706" class="c"><input type="checkbox" id="c-41596706" checked=""/><div class="controls bullet"><span class="by">dewey</span><span>|</span><a href="#41595810">root</a><span>|</span><a href="#41596641">parent</a><span>|</span><a href="#41599509">next</a><span>|</span><label class="collapse" for="c-41596706">[-]</label><label class="expand" for="c-41596706">[1 more]</label></div><br/><div class="children"><div class="content">Depends on what you prefer. I went with Dokku as for me it was important that I could run docker-compose based apps along side with my &quot;Dokku managed&quot; apps. I didn&#x27;t want to convert my existing apps (Sonarr, Radarr etc.) into Dokku apps and only use Dokku for my web projects.<p>I also wanted to be able to remove Dokku if needed and everything would continue to run as before. Both of these work very well with Dokku.</div><br/></div></div><div id="41599509" class="c"><input type="checkbox" id="c-41599509" checked=""/><div class="controls bullet"><span class="by">vickodin</span><span>|</span><a href="#41595810">root</a><span>|</span><a href="#41596641">parent</a><span>|</span><a href="#41596706">prev</a><span>|</span><a href="#41597513">next</a><span>|</span><label class="collapse" for="c-41599509">[-]</label><label class="expand" for="c-41599509">[1 more]</label></div><br/><div class="children"><div class="content">Also: Kamal, CapRover</div><br/></div></div><div id="41597513" class="c"><input type="checkbox" id="c-41597513" checked=""/><div class="controls bullet"><span class="by">Aeolun</span><span>|</span><a href="#41595810">root</a><span>|</span><a href="#41596641">parent</a><span>|</span><a href="#41599509">prev</a><span>|</span><a href="#41598338">next</a><span>|</span><label class="collapse" for="c-41597513">[-]</label><label class="expand" for="c-41597513">[1 more]</label></div><br/><div class="children"><div class="content">I tried many, but eventually kept running on Portainer.<p>Best part is that I can just dump whole docker-compose.yml files in and it just works.</div><br/></div></div></div></div></div></div><div id="41592636" class="c"><input type="checkbox" id="c-41592636" checked=""/><div class="controls bullet"><span class="by">pqdbr</span><span>|</span><a href="#41595810">prev</a><span>|</span><a href="#41592750">next</a><span>|</span><label class="collapse" for="c-41592636">[-]</label><label class="expand" for="c-41592636">[6 more]</label></div><br/><div class="children"><div class="content">This looks really nice, congrats!<p>1) I see Kamal was an inspiration; care to explain what differs from it? I&#x27;m still rocking custom Ansible playbooks, but I was planning on checking out Kamal after version 2 is released soon (I think alongside Rails 8).<p>2) I see databases are in your roadmap, and that&#x27;s great.<p>One feature that IMHO would be game changer for tools like this (and are lacking even in paid services like Hatchbox.io, which is overall great) is streaming replication of databases.<p>Even for side projects, a periodic SQL dump stored in S3 is generally not enough nowadays, and any project that gains traction will need to implement some sort of streaming backup, like Litestream (for SQLite) or Barman with streaming backup (for Postgres).<p>If I may suggest this feature, having this tool to provision a Barman server in a different VPS, and automate the process of having Postgres stream to it would be game changer.<p>One barman server can actually accommodate multiple database backups, so N projects could do streaming backup to one single barman server.<p>Of course, there would need to be a way to monitor if the streaming is working correctly, and maybe even help the user with the restoration process. But that effectively brings RTO down to near 0 (so no data loss) and can even allow point in time restoration.</div><br/><div id="41594579" class="c"><input type="checkbox" id="c-41594579" checked=""/><div class="controls bullet"><span class="by">mightymoud</span><span>|</span><a href="#41592636">parent</a><span>|</span><a href="#41593672">next</a><span>|</span><label class="collapse" for="c-41594579">[-]</label><label class="expand" for="c-41594579">[1 more]</label></div><br/><div class="children"><div class="content">1) Kamal is more geared towards having one VPS for project - it&#x27; made for big projects really. They also show on the demo that even the db is hosted on its own VPS. Which is great! But not for me or Sidekick target audience. Kamal V2 will support multi-projects on a single VPS afaik<p>2) yes yes yes! I really like litestream. Also backup is one of those critical but annoying thing that Sidekick is meant to take care of for you. I&#x27;ll look into Bearman. My vision is like we would have one command for most popular db types and it would use stubs to configure everything the right way. Need to sort out docker-compose support first though...</div><br/></div></div><div id="41593672" class="c"><input type="checkbox" id="c-41593672" checked=""/><div class="controls bullet"><span class="by">indigodaddy</span><span>|</span><a href="#41592636">parent</a><span>|</span><a href="#41594579">prev</a><span>|</span><a href="#41592750">next</a><span>|</span><label class="collapse" for="c-41593672">[-]</label><label class="expand" for="c-41593672">[4 more]</label></div><br/><div class="children"><div class="content">Pretty sure that fly.io for example supports litestream as I remember seeing some fly doc related to litestream when I was looking a few days ago for my own project.  Would also make sense that they do given Litestream’s creator is currently Fly’s VP of Product (I believe).</div><br/><div id="41595764" class="c"><input type="checkbox" id="c-41595764" checked=""/><div class="controls bullet"><span class="by">ctvo</span><span>|</span><a href="#41592636">root</a><span>|</span><a href="#41593672">parent</a><span>|</span><a href="#41592750">next</a><span>|</span><label class="collapse" for="c-41595764">[-]</label><label class="expand" for="c-41595764">[3 more]</label></div><br/><div class="children"><div class="content">Yes, fly.io is associated with Litestream, but... how is that related to the above thread or this tool?</div><br/><div id="41599274" class="c"><input type="checkbox" id="c-41599274" checked=""/><div class="controls bullet"><span class="by">russelg</span><span>|</span><a href="#41592636">root</a><span>|</span><a href="#41595764">parent</a><span>|</span><a href="#41596461">next</a><span>|</span><label class="collapse" for="c-41599274">[-]</label><label class="expand" for="c-41599274">[1 more]</label></div><br/><div class="children"><div class="content">The repo has the following sub title: &quot;Bare metal to production ready in mins; imagine fly.io on your VPS&quot;</div><br/></div></div><div id="41596461" class="c"><input type="checkbox" id="c-41596461" checked=""/><div class="controls bullet"><span class="by">indigodaddy</span><span>|</span><a href="#41592636">root</a><span>|</span><a href="#41595764">parent</a><span>|</span><a href="#41599274">prev</a><span>|</span><a href="#41592750">next</a><span>|</span><label class="collapse" for="c-41596461">[-]</label><label class="expand" for="c-41596461">[1 more]</label></div><br/><div class="children"><div class="content">Quoted from the parent comment:<p>“One feature that IMHO would be game changer for tools like this (and are lacking even in paid services like Hatchbox.io, which is overall great) is streaming replication of databases.”<p>And then I mentioned that I believe fly.io has litestream support.  I think it’s fairly relevant to the comment&#x2F;thread.</div><br/></div></div></div></div></div></div></div></div><div id="41592750" class="c"><input type="checkbox" id="c-41592750" checked=""/><div class="controls bullet"><span class="by">4star3star</span><span>|</span><a href="#41592636">prev</a><span>|</span><a href="#41592727">next</a><span>|</span><label class="collapse" for="c-41592750">[-]</label><label class="expand" for="c-41592750">[16 more]</label></div><br/><div class="children"><div class="content">I like what I&#x27;m seeing, though I&#x27;m not sure I have a use case. On a VPS, I&#x27;ll typically run a cloudflared container and configure a Cloudflare tunnel to that VPS. Then, I can expose any port and point it to a subdomain I configure in the CF dashboard. This gives https for free. I can expose services in containers or anything else running on the VPS.<p>I&#x27;ll concede there&#x27;s probably a little more hands on work doing things this way, but I do like having a good grip on how things are working rather than leaning on a convenient tool. Maybe you could convince me Sidekick has more advantages?</div><br/><div id="41594560" class="c"><input type="checkbox" id="c-41594560" checked=""/><div class="controls bullet"><span class="by">skinner927</span><span>|</span><a href="#41592750">parent</a><span>|</span><a href="#41594997">next</a><span>|</span><label class="collapse" for="c-41594560">[-]</label><label class="expand" for="c-41594560">[5 more]</label></div><br/><div class="children"><div class="content">I must be an old simpleton, but why get cloudflare involved? You can get https for free with nginx and letsencrypt.</div><br/><div id="41594644" class="c"><input type="checkbox" id="c-41594644" checked=""/><div class="controls bullet"><span class="by">mightymoud</span><span>|</span><a href="#41592750">root</a><span>|</span><a href="#41594560">parent</a><span>|</span><a href="#41594997">next</a><span>|</span><label class="collapse" for="c-41594644">[-]</label><label class="expand" for="c-41594644">[4 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a tunnel. So VPS can only be reached through cloudflare. It&#x27;s not only for https, but more for security and lockdown</div><br/><div id="41595596" class="c"><input type="checkbox" id="c-41595596" checked=""/><div class="controls bullet"><span class="by">mediumsmart</span><span>|</span><a href="#41592750">root</a><span>|</span><a href="#41594644">parent</a><span>|</span><a href="#41594997">next</a><span>|</span><label class="collapse" for="c-41595596">[-]</label><label class="expand" for="c-41595596">[3 more]</label></div><br/><div class="children"><div class="content">excellent and if cloudflare thinks your IP is iranian its going to get a really secure lockdown.</div><br/><div id="41596327" class="c"><input type="checkbox" id="c-41596327" checked=""/><div class="controls bullet"><span class="by">nine_k</span><span>|</span><a href="#41592750">root</a><span>|</span><a href="#41595596">parent</a><span>|</span><a href="#41594997">next</a><span>|</span><label class="collapse" for="c-41596327">[-]</label><label class="expand" for="c-41596327">[2 more]</label></div><br/><div class="children"><div class="content">More seriously, it also helps when you&#x27;re a target of a DDoS.<p>It&#x27;s always a balancing act between outsourcing your heavy lifting, and having to trust that party and depend on them.</div><br/><div id="41599282" class="c"><input type="checkbox" id="c-41599282" checked=""/><div class="controls bullet"><span class="by">newaccount74</span><span>|</span><a href="#41592750">root</a><span>|</span><a href="#41596327">parent</a><span>|</span><a href="#41594997">next</a><span>|</span><label class="collapse" for="c-41599282">[-]</label><label class="expand" for="c-41599282">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been running my business on VPS from Linode and Hetzner for the last 13 years and have never had an issue with DoS.<p>I think the benefits of Cloudflares DoS protection are vastly oversold and absolutely unnecessary for 99% of businesses.<p>(I think the false positives where some users randomly get captchas are actually bad for business)</div><br/></div></div></div></div></div></div></div></div></div></div><div id="41594997" class="c"><input type="checkbox" id="c-41594997" checked=""/><div class="controls bullet"><span class="by">hu3</span><span>|</span><a href="#41592750">parent</a><span>|</span><a href="#41594560">prev</a><span>|</span><a href="#41595379">next</a><span>|</span><label class="collapse" for="c-41594997">[-]</label><label class="expand" for="c-41594997">[2 more]</label></div><br/><div class="children"><div class="content">Nice setup.<p>But isn&#x27;t this a little too tied to Cloudflare?<p>Caddy as a reverse proxy on that VPS would also give us free HTTPS. The downside is less security because no CF tunneling.</div><br/><div id="41595548" class="c"><input type="checkbox" id="c-41595548" checked=""/><div class="controls bullet"><span class="by">aborsy</span><span>|</span><a href="#41592750">root</a><span>|</span><a href="#41594997">parent</a><span>|</span><a href="#41595379">next</a><span>|</span><label class="collapse" for="c-41595548">[-]</label><label class="expand" for="c-41595548">[1 more]</label></div><br/><div class="children"><div class="content">You could put Authentik in front. It does Cloudflare stuff on VPS.</div><br/></div></div></div></div><div id="41595379" class="c"><input type="checkbox" id="c-41595379" checked=""/><div class="controls bullet"><span class="by">SahAssar</span><span>|</span><a href="#41592750">parent</a><span>|</span><a href="#41594997">prev</a><span>|</span><a href="#41594633">next</a><span>|</span><label class="collapse" for="c-41595379">[-]</label><label class="expand" for="c-41595379">[1 more]</label></div><br/><div class="children"><div class="content">Are you also making sure that nothing on the VPS is actually listening on outside ports? A classic mistake is to setup something similar to what you are describing but not validating that the services are not listening on 0.0.0.0.<p>I&#x27;d also not want to have cloudflare as an extra company to trust, point of failure and configuration to manage.</div><br/></div></div><div id="41594633" class="c"><input type="checkbox" id="c-41594633" checked=""/><div class="controls bullet"><span class="by">mightymoud</span><span>|</span><a href="#41592750">parent</a><span>|</span><a href="#41595379">prev</a><span>|</span><a href="#41594731">next</a><span>|</span><label class="collapse" for="c-41594633">[-]</label><label class="expand" for="c-41594633">[1 more]</label></div><br/><div class="children"><div class="content">Interesting setup....<p>How do you run the containers on your VPS tho? You could still use Sidekick for that!<p>I think your setup is one step up in security from Sidekick nonetheless. A lot more work it seems too</div><br/></div></div><div id="41594731" class="c"><input type="checkbox" id="c-41594731" checked=""/><div class="controls bullet"><span class="by">tacone</span><span>|</span><a href="#41592750">parent</a><span>|</span><a href="#41594633">prev</a><span>|</span><a href="#41595355">next</a><span>|</span><label class="collapse" for="c-41594731">[-]</label><label class="expand" for="c-41594731">[2 more]</label></div><br/><div class="children"><div class="content">Interesting! How do you  connect via ssh? Do you just leave the port open or is there any trick you&#x27;d like to share?</div><br/></div></div><div id="41595355" class="c"><input type="checkbox" id="c-41595355" checked=""/><div class="controls bullet"><span class="by">vineyardmike</span><span>|</span><a href="#41592750">parent</a><span>|</span><a href="#41594731">prev</a><span>|</span><a href="#41596510">next</a><span>|</span><label class="collapse" for="c-41595355">[-]</label><label class="expand" for="c-41595355">[1 more]</label></div><br/><div class="children"><div class="content">I do this for “internal” apps but with Tailscale.</div><br/></div></div><div id="41596510" class="c"><input type="checkbox" id="c-41596510" checked=""/><div class="controls bullet"><span class="by">renewiltord</span><span>|</span><a href="#41592750">parent</a><span>|</span><a href="#41595355">prev</a><span>|</span><a href="#41592727">next</a><span>|</span><label class="collapse" for="c-41596510">[-]</label><label class="expand" for="c-41596510">[3 more]</label></div><br/><div class="children"><div class="content">This is pretty cool. I did not know I could do this. Currently, I have:<p>1. nginx + letsencrypt<p>2. forward based on host + path to the appropriate local docker<p>3. run each thing in the docker container<p>4. put Cloudflare in front in proxy DNS mode and with caching enabled<p>Your thing is obviously better! Thank you.</div><br/><div id="41596566" class="c"><input type="checkbox" id="c-41596566" checked=""/><div class="controls bullet"><span class="by">jmpavlec</span><span>|</span><a href="#41592750">root</a><span>|</span><a href="#41596510">parent</a><span>|</span><a href="#41592727">next</a><span>|</span><label class="collapse" for="c-41596566">[-]</label><label class="expand" for="c-41596566">[2 more]</label></div><br/><div class="children"><div class="content">I used to run it the cloudflared way as the other user described but the tunnel often went offline without explanation for short periods of time and the latency was so so in my testing. I run it more similar to you now and haven&#x27;t had any stability problems since dropping the cloudflared setup. I use cloudflared for a less critical app on my own hardware and that also goes up and down from time to time.</div><br/><div id="41596589" class="c"><input type="checkbox" id="c-41596589" checked=""/><div class="controls bullet"><span class="by">renewiltord</span><span>|</span><a href="#41592750">root</a><span>|</span><a href="#41596566">parent</a><span>|</span><a href="#41592727">next</a><span>|</span><label class="collapse" for="c-41596589">[-]</label><label class="expand" for="c-41596589">[1 more]</label></div><br/><div class="children"><div class="content">Oh thank you for that experience. This way has been entirely fire and forget (except for application layer issues) so I wouldn&#x27;t want to change things then. The infra layer is pretty simple this way. I lost a 10 year server to bitrot (Hetzner wanted to sunset it and I had such a bespoke config I forgot how to admin it over the 10 years) so I&#x27;m trying to keep things simple so it will survive decades.</div><br/></div></div></div></div></div></div></div></div><div id="41592727" class="c"><input type="checkbox" id="c-41592727" checked=""/><div class="controls bullet"><span class="by">LVB</span><span>|</span><a href="#41592750">prev</a><span>|</span><a href="#41599623">next</a><span>|</span><label class="collapse" for="c-41592727">[-]</label><label class="expand" for="c-41592727">[16 more]</label></div><br/><div class="children"><div class="content">This looks good, and I’m a target user in this space.<p>One thing I’ve noticed is the prevalence of Docker for this type of tool, or the larger self-managed PaaS tools. I totally get it, and it makes sense. I’m just slow to adapt. I’ve been so used to Go binary deployments for so long. But I also don’t really like tweaking Caddyfiles and futzing with systemd unit files, even though the pattern is familiar to me now. Been waffling on this for quite a while…</div><br/><div id="41593002" class="c"><input type="checkbox" id="c-41593002" checked=""/><div class="controls bullet"><span class="by">kokanee</span><span>|</span><a href="#41592727">parent</a><span>|</span><a href="#41594070">next</a><span>|</span><label class="collapse" for="c-41593002">[-]</label><label class="expand" for="c-41593002">[10 more]</label></div><br/><div class="children"><div class="content">I&#x27;m a waffler on this as well, increasingly leaning away from containers lately. I can recall one time in my pre-Docker career when I was affected by a bug related to the fact that software developed on Mac OS ran differently than software running on CentOS in production. But I have spent untold countless hours trying to figure out various Docker-related quirks.<p>If you legitimately need to run your software on multiple OSes in production, by all means, containerize it. But in 15 years I have never had a need to do that. I have a rock solid bash script that deploys and daemonizes an executable on a linux box, takes like 2 seconds to run, and saves me hours and hours of Dockery.</div><br/><div id="41593156" class="c"><input type="checkbox" id="c-41593156" checked=""/><div class="controls bullet"><span class="by">bantunes</span><span>|</span><a href="#41592727">root</a><span>|</span><a href="#41593002">parent</a><span>|</span><a href="#41598101">next</a><span>|</span><label class="collapse" for="c-41593156">[-]</label><label class="expand" for="c-41593156">[8 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t understand how running a single command to start either a single container or a stack of them with compose, that then gets all the requirements in a tarball similar and just runs is seen as more complicated than running random binaries, setting values on php.ini, setting up mysql or postgres, demonizing said binaries and making sure libraries and the like are in order.</div><br/><div id="41594099" class="c"><input type="checkbox" id="c-41594099" checked=""/><div class="controls bullet"><span class="by">hiAndrewQuinn</span><span>|</span><a href="#41592727">root</a><span>|</span><a href="#41593156">parent</a><span>|</span><a href="#41593210">next</a><span>|</span><label class="collapse" for="c-41594099">[-]</label><label class="expand" for="c-41594099">[2 more]</label></div><br/><div class="children"><div class="content">You&#x27;re going to be setting all that stuff up either way, though. It&#x27;ll either be in a Dockerfile, or in a Vagrantfile (or an Ansible playbook, or a shell script, ...). But past a certain point you can&#x27;t really get away from all that.<p>So I think it comes down to personal preference. This is going to sound a bit silly, but to me, running things in VMs feels like living in an apartment. Containers feel more like living out of a hotel room.<p>I know how to maintain an apartment, more or less. I&#x27;ve been living in them my whole life. I know what kinds of things I generally should and should not mess with. I&#x27;m not averse to hotels by any means, but if I&#x27;m going to spend a <i>lot</i> of time in a place, I will pick the apartment, where I can put all of my cumulative apartment-dwelling hours to good use.</div><br/><div id="41595151" class="c"><input type="checkbox" id="c-41595151" checked=""/><div class="controls bullet"><span class="by">kokanee</span><span>|</span><a href="#41592727">root</a><span>|</span><a href="#41594099">parent</a><span>|</span><a href="#41593210">next</a><span>|</span><label class="collapse" for="c-41595151">[-]</label><label class="expand" for="c-41595151">[1 more]</label></div><br/><div class="children"><div class="content">Yes, thank you for answering on my behalf. To underscore this, the decision is whether to set up all of your dependencies and configurations with a tool like bash, or to set it all up within Docker, which involves setting up Docker itself, which sometimes involves setting up (and paying for) things like registries and orchestration tools.<p>I might tweak the apartment metaphor because I think it&#x27;s generous to imply that, like a hotel, Docker does everything for you. Maybe Dockerless development is like living in an apartment and working on a boat, while using Docker is like living and working on a houseboat.<p>There is one thing I definitely prefer Docker for, and that&#x27;s running images that were created by someone else, when little to no configuration is required. For example, running Postgres locally can be nicer with Docker than without, especially if you need multiple Postgres versions. I use this workflow for proofs of concepts, trials, and the like.</div><br/></div></div></div></div><div id="41593210" class="c"><input type="checkbox" id="c-41593210" checked=""/><div class="controls bullet"><span class="by">bluehatbrit</span><span>|</span><a href="#41592727">root</a><span>|</span><a href="#41593156">parent</a><span>|</span><a href="#41594099">prev</a><span>|</span><a href="#41598101">next</a><span>|</span><label class="collapse" for="c-41593210">[-]</label><label class="expand" for="c-41593210">[5 more]</label></div><br/><div class="children"><div class="content">I suppose like anything, it&#x27;s a preference based on where the majority of your experience is, and what you&#x27;re using it for. If you&#x27;re running things you&#x27;ve written and it&#x27;s all done the same way, docker probably is just an extra step.<p>I personally run a bunch of software I&#x27;ve written, as well as open source things. So for me docker makes everything significantly easier, and saves me installing a lot of rubbish I don&#x27;t understand well.</div><br/><div id="41593794" class="c"><input type="checkbox" id="c-41593794" checked=""/><div class="controls bullet"><span class="by">oarsinsync</span><span>|</span><a href="#41592727">root</a><span>|</span><a href="#41593210">parent</a><span>|</span><a href="#41593417">next</a><span>|</span><label class="collapse" for="c-41593794">[-]</label><label class="expand" for="c-41593794">[3 more]</label></div><br/><div class="children"><div class="content">After 20 years of various things breaking on my (admittedly franken) debian installs after each dist-upgrade, and spending days troubleshooting each time, I recently took the plunge and switched all services to docker-compose.<p>I then booted into a new fresh clean debian environment, mounted my disks, and:<p><pre><code>  cd &#x2F;opt&#x2F;docker&#x2F;configs; for i in *; do cd $i; docker-compose up -d; cd ..; done
</code></pre>
voila, everything was up and working, and no longer tied to my underlying OS. Now at least I can keep my distro and kernel etc all up to date without worrying about anything else breaking.<p>Sure, I have a new set of problems, but they feel smaller.</div><br/><div id="41596019" class="c"><input type="checkbox" id="c-41596019" checked=""/><div class="controls bullet"><span class="by">dijksterhuis</span><span>|</span><a href="#41592727">root</a><span>|</span><a href="#41593794">parent</a><span>|</span><a href="#41595564">next</a><span>|</span><label class="collapse" for="c-41596019">[-]</label><label class="expand" for="c-41596019">[1 more]</label></div><br/><div class="children"><div class="content">Thou hast discovered docker&#x27;s truest use case.<p>Like, legit, this is the whole point of docker. Application&#x2F;service dependencies are no longer tied to the server it is running on, mitigating the worst parts of dependency hell.<p>Although, in your case, I suppose your tolerance for dependency hell has been quite high ;)</div><br/></div></div><div id="41595564" class="c"><input type="checkbox" id="c-41595564" checked=""/><div class="controls bullet"><span class="by">Ringz</span><span>|</span><a href="#41592727">root</a><span>|</span><a href="#41593794">parent</a><span>|</span><a href="#41596019">prev</a><span>|</span><a href="#41593417">next</a><span>|</span><label class="collapse" for="c-41595564">[-]</label><label class="expand" for="c-41595564">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m doing exactly the same thing. I started to do everything on Synology with Doctor Compose and got rid of most Synology apps: through open source applications.<p>At some point I moved individual containers to other machines and they work perfectly. VPS, NUC no matter what.</div><br/></div></div></div></div><div id="41593417" class="c"><input type="checkbox" id="c-41593417" checked=""/><div class="controls bullet"><span class="by">stackskipton</span><span>|</span><a href="#41592727">root</a><span>|</span><a href="#41593210">parent</a><span>|</span><a href="#41593794">prev</a><span>|</span><a href="#41598101">next</a><span>|</span><label class="collapse" for="c-41593417">[-]</label><label class="expand" for="c-41593417">[1 more]</label></div><br/><div class="children"><div class="content">Yea, in same boat and I&#x27;m wondering if there is big contingent of devs out there that bristle at Docker. Biggest issue I run into writing my lab software is finding decent enough container registry but now I just endorse free tier of Vultr CR.</div><br/></div></div></div></div></div></div><div id="41598101" class="c"><input type="checkbox" id="c-41598101" checked=""/><div class="controls bullet"><span class="by">codiogo</span><span>|</span><a href="#41592727">root</a><span>|</span><a href="#41593002">parent</a><span>|</span><a href="#41593156">prev</a><span>|</span><a href="#41594070">next</a><span>|</span><label class="collapse" for="c-41598101">[-]</label><label class="expand" for="c-41598101">[1 more]</label></div><br/><div class="children"><div class="content">I did the same, created a thing that is supposed to be a collection of scripts to set up a vps without any container. You can check it out at <a href="https:&#x2F;&#x2F;github.com&#x2F;diogocasado&#x2F;coderaft">https:&#x2F;&#x2F;github.com&#x2F;diogocasado&#x2F;coderaft</a></div><br/></div></div></div></div><div id="41594070" class="c"><input type="checkbox" id="c-41594070" checked=""/><div class="controls bullet"><span class="by">faangguyindia</span><span>|</span><a href="#41592727">parent</a><span>|</span><a href="#41593002">prev</a><span>|</span><a href="#41593538">next</a><span>|</span><label class="collapse" for="c-41594070">[-]</label><label class="expand" for="c-41594070">[2 more]</label></div><br/><div class="children"><div class="content">Here&#x27;s the thing, we&#x27;ve code running on VPS in cloud for a decade with any problem<p>When we ran it on kubernets, without touching it, it broke itself in 3 years.<p>Docker is fantastic developement tool, I do see real value in it.<p>But kubernets and whole ecosystem? You must apply updates or your stuff will break one day.<p>Currently I am using docker with docker compose and GCR, it does make things very simply and easy to develop and it&#x27;s also self documenting.</div><br/><div id="41599176" class="c"><input type="checkbox" id="c-41599176" checked=""/><div class="controls bullet"><span class="by">prmoustache</span><span>|</span><a href="#41592727">root</a><span>|</span><a href="#41594070">parent</a><span>|</span><a href="#41593538">next</a><span>|</span><label class="collapse" for="c-41599176">[-]</label><label class="expand" for="c-41599176">[1 more]</label></div><br/><div class="children"><div class="content">Kubernetes doesn&#x27;t break on itself.  This is totally untrue. The only thing that is a timebomb are the ssl certificates it is using but they can easily be checked and renewed.</div><br/></div></div></div></div><div id="41593538" class="c"><input type="checkbox" id="c-41593538" checked=""/><div class="controls bullet"><span class="by">mikkelam</span><span>|</span><a href="#41592727">parent</a><span>|</span><a href="#41594070">prev</a><span>|</span><a href="#41599623">next</a><span>|</span><label class="collapse" for="c-41593538">[-]</label><label class="expand" for="c-41593538">[3 more]</label></div><br/><div class="children"><div class="content">There are tools like firecracker that significantly reduces docker overhead <a href="https:&#x2F;&#x2F;firecracker-microvm.github.io&#x2F;" rel="nofollow">https:&#x2F;&#x2F;firecracker-microvm.github.io&#x2F;</a><p>I believe fly.io uses that. Not sure if OP’s tool does that</div><br/><div id="41594701" class="c"><input type="checkbox" id="c-41594701" checked=""/><div class="controls bullet"><span class="by">mightymoud</span><span>|</span><a href="#41592727">root</a><span>|</span><a href="#41593538">parent</a><span>|</span><a href="#41593603">next</a><span>|</span><label class="collapse" for="c-41594701">[-]</label><label class="expand" for="c-41594701">[1 more]</label></div><br/><div class="children"><div class="content">No Sidekick doesn&#x27;t use firecracker. I know fly.io is built around it yes. They do that so they can put your app to sleep - basically shutting it down - then spin it up real quick when it gets a request. No place for this in Sidekick vision</div><br/></div></div><div id="41593603" class="c"><input type="checkbox" id="c-41593603" checked=""/><div class="controls bullet"><span class="by">indigodaddy</span><span>|</span><a href="#41592727">root</a><span>|</span><a href="#41593538">parent</a><span>|</span><a href="#41594701">prev</a><span>|</span><a href="#41599623">next</a><span>|</span><label class="collapse" for="c-41593603">[-]</label><label class="expand" for="c-41593603">[1 more]</label></div><br/><div class="children"><div class="content">Was wondering the same— didn’t see any mention of it in the GH page though, nor even in roadmap</div><br/></div></div></div></div></div></div><div id="41599623" class="c"><input type="checkbox" id="c-41599623" checked=""/><div class="controls bullet"><span class="by">strzibny</span><span>|</span><a href="#41592727">prev</a><span>|</span><a href="#41597523">next</a><span>|</span><label class="collapse" for="c-41599623">[-]</label><label class="expand" for="c-41599623">[1 more]</label></div><br/><div class="children"><div class="content">Given the choice of Docker and Traefik I would love to know what&#x27;s the exact difference to Kamal? And btw Kamal will soon have a new improved version with a custom proxy.</div><br/></div></div><div id="41597523" class="c"><input type="checkbox" id="c-41597523" checked=""/><div class="controls bullet"><span class="by">Humphrey</span><span>|</span><a href="#41599623">prev</a><span>|</span><a href="#41598052">next</a><span>|</span><label class="collapse" for="c-41597523">[-]</label><label class="expand" for="c-41597523">[1 more]</label></div><br/><div class="children"><div class="content">Love this! That said, I achieve the same thing manually using Docker Compose &amp; some shell scripts.  It takes a bike longer, but it has forced me to learn the lower level tools that helpers like Sidekick use.<p>Also, all of these tools have great documentation on getting up and running, but SIGNIFICANTLY LESS INFO ON HOW TO MAINTAIN OVER THE LONG TERM.  If I was going to start using a tool like Sidekick, Kamal, or Dokku I would want clear answers to the following:<p>- How do I keep my VPS host up and running with latest security updates?
- How do I update to more recent versions of Docker?
- How do I update services that maintain state (eg. update to a new Postgres version)
- How do I seamlessly migrate to a new host (perhaps as a way to solve the above)?
- How should I manage and serve static resources &amp; user media? (store on host or use cloud storage?)
- How do I manage database migrations during an update, and how do I control that process to avoid downtime during an update?<p>I just spent an entire evening transferring a side project to a new VPS because I needed to update Postgres.  The ideal self-hosting solution would make that a 20 min task.</div><br/></div></div><div id="41598052" class="c"><input type="checkbox" id="c-41598052" checked=""/><div class="controls bullet"><span class="by">interstice</span><span>|</span><a href="#41597523">prev</a><span>|</span><a href="#41592480">next</a><span>|</span><label class="collapse" for="c-41598052">[-]</label><label class="expand" for="c-41598052">[2 more]</label></div><br/><div class="children"><div class="content">Really like this! Funnily enough I was just rabbit holing into terraform + ansible in an effort to do essentially this but with an anycast network. The thinking was to mirror apps across locations with a single deploy. I don&#x27;t suppose you&#x27;re plannning something similar with this one?</div><br/><div id="41598680" class="c"><input type="checkbox" id="c-41598680" checked=""/><div class="controls bullet"><span class="by">apitman</span><span>|</span><a href="#41598052">parent</a><span>|</span><a href="#41592480">next</a><span>|</span><label class="collapse" for="c-41598680">[-]</label><label class="expand" for="c-41598680">[1 more]</label></div><br/><div class="children"><div class="content">Anycast is a really underrated feature and I&#x27;m surprised no major VPS providers offer it. It&#x27;s one of my favorite things about fly.io</div><br/></div></div></div></div><div id="41592480" class="c"><input type="checkbox" id="c-41592480" checked=""/><div class="controls bullet"><span class="by">silasb</span><span>|</span><a href="#41598052">prev</a><span>|</span><a href="#41599498">next</a><span>|</span><label class="collapse" for="c-41592480">[-]</label><label class="expand" for="c-41592480">[2 more]</label></div><br/><div class="children"><div class="content">Nice, I&#x27;m working in the same space as you (not opensource, personal project).  We landed on the same solution, encoding the commands inside Golang and distributing those via SSH.<p>I&#x27;m somewhat surprised not to see this more often.  I&#x27;m guessing supporting multiple linux versions could get unwieldy, I focused on Ubuntu as my target.<p>Differences that I see.<p>* I modeled mine on-top of docker-plugins (these get installed during the bootstrapping process)<p>* I built a custom plugin for deploying which leveraged <a href="https:&#x2F;&#x2F;github.com&#x2F;Wowu&#x2F;docker-rollout">https:&#x2F;&#x2F;github.com&#x2F;Wowu&#x2F;docker-rollout</a> for zero-downtime deployments<p>Your solution looks much simpler than mine. I started off modeling mine off fly.io CLI, which is much more verbose Go code.  I&#x27;ll likely continue to use mine, but for any future VPS I&#x27;ll have to give this a try.</div><br/><div id="41594498" class="c"><input type="checkbox" id="c-41594498" checked=""/><div class="controls bullet"><span class="by">mightymoud</span><span>|</span><a href="#41592480">parent</a><span>|</span><a href="#41599498">next</a><span>|</span><label class="collapse" for="c-41594498">[-]</label><label class="expand" for="c-41594498">[1 more]</label></div><br/><div class="children"><div class="content">hahah seems like we went down the same rabbit hole. I also considered `docker-rollout` but decided to write my own script. Heavily inspired by the docker-rollout source code btw. 
Just curious, why did you decide to go with docker plugins?</div><br/></div></div></div></div><div id="41599498" class="c"><input type="checkbox" id="c-41599498" checked=""/><div class="controls bullet"><span class="by">vickodin</span><span>|</span><a href="#41592480">prev</a><span>|</span><a href="#41595917">next</a><span>|</span><label class="collapse" for="c-41599498">[-]</label><label class="expand" for="c-41599498">[1 more]</label></div><br/><div class="children"><div class="content">Very interesting. The similarity to the sidekiq is a bit confusing, but it doesn&#x27;t really matter.</div><br/></div></div><div id="41595917" class="c"><input type="checkbox" id="c-41595917" checked=""/><div class="controls bullet"><span class="by">nhatcher</span><span>|</span><a href="#41599498">prev</a><span>|</span><a href="#41592875">next</a><span>|</span><label class="collapse" for="c-41595917">[-]</label><label class="expand" for="c-41595917">[1 more]</label></div><br/><div class="children"><div class="content">This looks fantastic TBH! Can&#x27;t wait to give it a go. Congratulations. I&#x27;ve long thought something like this should be possible. The only thing I&#x27;ve done is document carefully my own steps:<p><a href="https:&#x2F;&#x2F;www.nhatcher.com&#x2F;post&#x2F;a-cto-on-a-shoestring&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.nhatcher.com&#x2F;post&#x2F;a-cto-on-a-shoestring&#x2F;</a></div><br/></div></div><div id="41592875" class="c"><input type="checkbox" id="c-41592875" checked=""/><div class="controls bullet"><span class="by">bluehatbrit</span><span>|</span><a href="#41595917">prev</a><span>|</span><a href="#41597573">next</a><span>|</span><label class="collapse" for="c-41592875">[-]</label><label class="expand" for="c-41592875">[2 more]</label></div><br/><div class="children"><div class="content">This is super nice, and I&#x27;m a big fan of the detailed readme with screenshots.<p>I&#x27;ll definitely be trying it out, although I do have a pretty nice setup now which will be hard to pull away from. It&#x27;s ansible driven, lets me dump a compose file in a directory, along with a backup and restore shell script, and deploys it out to my server (hetzner dedicated via server auction).<p>It&#x27;s really nice that this handles TLS&#x2F;SSL, that was a real pain for me as I&#x27;ve been using nginx and automating cerbot wasn&#x27;t the most fun in the world. This looks a lot easier on that front!</div><br/><div id="41594458" class="c"><input type="checkbox" id="c-41594458" checked=""/><div class="controls bullet"><span class="by">mightymoud</span><span>|</span><a href="#41592875">parent</a><span>|</span><a href="#41597573">next</a><span>|</span><label class="collapse" for="c-41594458">[-]</label><label class="expand" for="c-41594458">[1 more]</label></div><br/><div class="children"><div class="content">Sounds like you have a great setup. My vision is to make a setup like yours more accessible really w&#x2F;o having to play with low level config like ansible.
I think you should try to replace nginx with Traefik - it handles certs out of the box!</div><br/></div></div></div></div><div id="41597573" class="c"><input type="checkbox" id="c-41597573" checked=""/><div class="controls bullet"><span class="by">jfdi</span><span>|</span><a href="#41592875">prev</a><span>|</span><a href="#41595181">next</a><span>|</span><label class="collapse" for="c-41597573">[-]</label><label class="expand" for="c-41597573">[1 more]</label></div><br/><div class="children"><div class="content">These are great. Having tooling to get stuff out fast and as safely as possible to get to iterating openly.<p>Here’s a bash script I posted a while back on a different thread that does similar thing if of interest for anyone. It’s probably less nice than op’s for ex it only works with digitalocean (which is great!) - but it’s simple small and mostly readable. also assumes docker - but all via compose, with some samples like nginx w auto-ssl via le.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;thomaswilley&#x2F;tide.sh">https:&#x2F;&#x2F;github.com&#x2F;thomaswilley&#x2F;tide.sh</a></div><br/></div></div><div id="41595181" class="c"><input type="checkbox" id="c-41595181" checked=""/><div class="controls bullet"><span class="by">johnklos</span><span>|</span><a href="#41597573">prev</a><span>|</span><a href="#41592453">next</a><span>|</span><label class="collapse" for="c-41595181">[-]</label><label class="expand" for="c-41595181">[2 more]</label></div><br/><div class="children"><div class="content">&quot;to self-host any app&quot;<p>Docker != app. Perhaps it&#x27;d be more accurate to say, &quot;to host any Docker container&quot;?</div><br/><div id="41599195" class="c"><input type="checkbox" id="c-41599195" checked=""/><div class="controls bullet"><span class="by">prmoustache</span><span>|</span><a href="#41595181">parent</a><span>|</span><a href="#41592453">next</a><span>|</span><label class="collapse" for="c-41599195">[-]</label><label class="expand" for="c-41599195">[1 more]</label></div><br/><div class="children"><div class="content">I am not saying docker is the best way to run any app, but could you share a kind of app can&#x27;t you host in a docker?<p>I mean on rootless containers, yes, a lot of apps that need access to the underlying system might not work, but they are usually system stuff, not the kind you want to host on a VPS anyway. But when running as root I can&#x27;t think of many.</div><br/></div></div></div></div><div id="41592453" class="c"><input type="checkbox" id="c-41592453" checked=""/><div class="controls bullet"><span class="by">Hexigonz</span><span>|</span><a href="#41595181">prev</a><span>|</span><a href="#41595619">next</a><span>|</span><label class="collapse" for="c-41592453">[-]</label><label class="expand" for="c-41592453">[1 more]</label></div><br/><div class="children"><div class="content">Ohhhh I like this. I really enjoy the flyctl CLI tools from Fly.io, which simplifies in a similar manner, but it&#x27;s platform specific. Good work</div><br/></div></div><div id="41595619" class="c"><input type="checkbox" id="c-41595619" checked=""/><div class="controls bullet"><span class="by">tegiddrone</span><span>|</span><a href="#41592453">prev</a><span>|</span><a href="#41599151">next</a><span>|</span><label class="collapse" for="c-41595619">[-]</label><label class="expand" for="c-41595619">[1 more]</label></div><br/><div class="children"><div class="content">Looks nice! Something I&#x27;d want in front is some sort of basic app firewall like fail2ban or CrowdSec to ban vuln scanners and other intrusion attempts. It is a nice thing about Cloudflare since they provide some of this protection.</div><br/></div></div><div id="41599151" class="c"><input type="checkbox" id="c-41599151" checked=""/><div class="controls bullet"><span class="by">vander_elst</span><span>|</span><a href="#41595619">prev</a><span>|</span><a href="#41593635">next</a><span>|</span><label class="collapse" for="c-41599151">[-]</label><label class="expand" for="c-41599151">[1 more]</label></div><br/><div class="children"><div class="content">How does it compare to ansible? I didn&#x27;t immediately find a link</div><br/></div></div><div id="41593635" class="c"><input type="checkbox" id="c-41593635" checked=""/><div class="controls bullet"><span class="by">AndrewCopeland</span><span>|</span><a href="#41599151">prev</a><span>|</span><a href="#41593027">next</a><span>|</span><label class="collapse" for="c-41593635">[-]</label><label class="expand" for="c-41593635">[2 more]</label></div><br/><div class="children"><div class="content">Its a simple cli in go
 It uses docker
 There is no k8s
 Handles certs
 Zero down time<p>I would love for it to support docker-compose as some of my side projects needs a library in python but I like having my service be in go, so I will wrap the python library in a super simple service.<p>Overall this is awesome and I love the simplicity, with the world just full of serverless, AI and a bunch of other &quot;stuff&quot;. Paralysis through analysis is really an issue and when you are just trying to create a service for yourself or an MVP, it can be a real hinderance.<p>I have been gravitating towards Taskfile to perform similar tasks to this. God speed to you and keep up the great work.</div><br/><div id="41594484" class="c"><input type="checkbox" id="c-41594484" checked=""/><div class="controls bullet"><span class="by">mightymoud</span><span>|</span><a href="#41593635">parent</a><span>|</span><a href="#41593027">next</a><span>|</span><label class="collapse" for="c-41594484">[-]</label><label class="expand" for="c-41594484">[1 more]</label></div><br/><div class="children"><div class="content">Thanks man! I&#x27;m working on the docker-compose support. I got it working locally, but the ergonomics are really hard to get right, cus compose files are so flexible. I was even considering using the `sidekick.yaml` file as the main config and then turn that into docker compose - similar to what fly.io does with fly.toml. But I wanna keep this docker centric... so yeah I am still doing more thinking around this</div><br/></div></div></div></div><div id="41593027" class="c"><input type="checkbox" id="c-41593027" checked=""/><div class="controls bullet"><span class="by">Sn0wCoder</span><span>|</span><a href="#41593635">prev</a><span>|</span><a href="#41595807">next</a><span>|</span><label class="collapse" for="c-41593027">[-]</label><label class="expand" for="c-41593027">[3 more]</label></div><br/><div class="children"><div class="content">This looks great.  Just bookmarked and then had to double check that I did not just bookmark it a few weeks ago.  Turns out I had bookmarked Caddy which is similar but does not deploy the app and don’t think supports Docker.  It was the auto CERT that was what I was interested in and what had stuck out in my mind.  Have certbot setup and never think about it again, until my server needed to be rebuilt, and I started researching.  Good to go for a few months, but my hosting will be up here in a year and going to switch providers and upgrade my setup to 2+ gig so I can run docker reliably.   Thanks for posting this one just moved to the top of the list.</div><br/><div id="41593726" class="c"><input type="checkbox" id="c-41593726" checked=""/><div class="controls bullet"><span class="by">indigodaddy</span><span>|</span><a href="#41593027">parent</a><span>|</span><a href="#41595807">next</a><span>|</span><label class="collapse" for="c-41593726">[-]</label><label class="expand" for="c-41593726">[2 more]</label></div><br/><div class="children"><div class="content">In what sense would Caddy not support Docker?  You can use caddy on the host itself to proxy to a docker container, and you could also have Caddy as a Docker container to proxy to other Docker containers (would just need an initial incoming iptables rule to the caddy container for the latter scenario— although caddy might have instructions somewhere on a more elegant way than iptables to get  the connections to the Docker caddy container not sure)</div><br/><div id="41598113" class="c"><input type="checkbox" id="c-41598113" checked=""/><div class="controls bullet"><span class="by">Sn0wCoder</span><span>|</span><a href="#41593027">root</a><span>|</span><a href="#41593726">parent</a><span>|</span><a href="#41595807">next</a><span>|</span><label class="collapse" for="c-41598113">[-]</label><label class="expand" for="c-41598113">[1 more]</label></div><br/><div class="children"><div class="content">Hey indigo,<p>Thank you for pointing this out.  When I was looking to install caddy, I was specifically looking for something without using docker since my VPS is 1g &#x2F; 1cpu and that is what I based my comment off.  When was reading the sidekick docs seemed by running one command that it would first install sidekick and then install the cert&#x2F;app all with one docker file but now I am not even sure about that.<p>Appreciate you pointing that out, now I am back into analysis paralysis on which one I should use</div><br/></div></div></div></div></div></div><div id="41595807" class="c"><input type="checkbox" id="c-41595807" checked=""/><div class="controls bullet"><span class="by">turtlebits</span><span>|</span><a href="#41593027">prev</a><span>|</span><a href="#41597217">next</a><span>|</span><label class="collapse" for="c-41595807">[-]</label><label class="expand" for="c-41595807">[3 more]</label></div><br/><div class="children"><div class="content">What about this is highly available?  On a single VPS?<p>Does this only support a single app?<p>Nice project but the claims (production ready? Load balance on a single server?) are a bit ridiculous.</div><br/><div id="41595988" class="c"><input type="checkbox" id="c-41595988" checked=""/><div class="controls bullet"><span class="by">closewith</span><span>|</span><a href="#41595807">parent</a><span>|</span><a href="#41595822">next</a><span>|</span><label class="collapse" for="c-41595988">[-]</label><label class="expand" for="c-41595988">[1 more]</label></div><br/><div class="children"><div class="content">In my experience, single apps on VPSes have far higher availability in practice than the majority of convoluted deployments.</div><br/></div></div><div id="41595822" class="c"><input type="checkbox" id="c-41595822" checked=""/><div class="controls bullet"><span class="by">dewey</span><span>|</span><a href="#41595807">parent</a><span>|</span><a href="#41595988">prev</a><span>|</span><a href="#41597217">next</a><span>|</span><label class="collapse" for="c-41595822">[-]</label><label class="expand" for="c-41595822">[1 more]</label></div><br/><div class="children"><div class="content">Highly available is overrated for most use cases, especially for any side projects.</div><br/></div></div></div></div><div id="41597217" class="c"><input type="checkbox" id="c-41597217" checked=""/><div class="controls bullet"><span class="by">singhrac</span><span>|</span><a href="#41595807">prev</a><span>|</span><a href="#41595590">next</a><span>|</span><label class="collapse" for="c-41597217">[-]</label><label class="expand" for="c-41597217">[2 more]</label></div><br/><div class="children"><div class="content">Any possibility you’d add support for a Mac Mini deployment? I think the extra complexity would be from changing the Docker images, but of course the devil is in the details. I just have a Mac Mini and it would be great to self-host some stuff.</div><br/><div id="41597368" class="c"><input type="checkbox" id="c-41597368" checked=""/><div class="controls bullet"><span class="by">brirec</span><span>|</span><a href="#41597217">parent</a><span>|</span><a href="#41595590">next</a><span>|</span><label class="collapse" for="c-41597368">[-]</label><label class="expand" for="c-41597368">[1 more]</label></div><br/><div class="children"><div class="content">As someone who used to love hosting things on a Mac mini, have you tried installing Linux on it to use as a dedicated server? If you do, it should handle this just like any other platform you could install it on.</div><br/></div></div></div></div><div id="41595590" class="c"><input type="checkbox" id="c-41595590" checked=""/><div class="controls bullet"><span class="by">funshed</span><span>|</span><a href="#41597217">prev</a><span>|</span><a href="#41594960">next</a><span>|</span><label class="collapse" for="c-41595590">[-]</label><label class="expand" for="c-41595590">[1 more]</label></div><br/><div class="children"><div class="content">Nice, you should probably explain what traefik, sops and age will do. First time I&#x27;ve heard of sops, very handy!</div><br/></div></div><div id="41594960" class="c"><input type="checkbox" id="c-41594960" checked=""/><div class="controls bullet"><span class="by">joseferben</span><span>|</span><a href="#41595590">prev</a><span>|</span><a href="#41594282">next</a><span>|</span><label class="collapse" for="c-41594960">[-]</label><label class="expand" for="c-41594960">[2 more]</label></div><br/><div class="children"><div class="content">this looks amazing!<p>i’m building <a href="https:&#x2F;&#x2F;www.plainweb.dev" rel="nofollow">https:&#x2F;&#x2F;www.plainweb.dev</a> and i’m looking for the simplest way to deploy a plainweb&#x2F;plainstack project.<p>looks like sidekick has the same spirit when it comes to simplicity.<p>in the plainstack docs i’ve been embracing fly.io, but reliability is an issue. and sqlite web apps (which is the core of plainstack) can’t have real zero downtime deployments, unless you count the proxy holding the pending request for 30 seconds while the fly machine is deployed.<p>i tried kamal but it felt like non-ruby and non-rails projects are second class citizens.<p>i was about to document deploying plainstack to dokku, but provisioning isn’t built-in.<p>my dream deployment tool would be dokku + provisioning &amp; setup, sidekick looks very close to that.<p>definitely going to try this and maybe even have it in the blessed deploy path for plainstack if it works well!</div><br/></div></div><div id="41594282" class="c"><input type="checkbox" id="c-41594282" checked=""/><div class="controls bullet"><span class="by">aag</span><span>|</span><a href="#41594960">prev</a><span>|</span><a href="#41596171">next</a><span>|</span><label class="collapse" for="c-41594282">[-]</label><label class="expand" for="c-41594282">[5 more]</label></div><br/><div class="children"><div class="content">This could be great for my projects, but I&#x27;m confused about one thing: why does it need to push to a Docker registry?  The Dockerfile is local, and each image is built locally.  Can&#x27;t the images be stored purely locally?  Perhaps I&#x27;m missing something obvious.  Not using a registry would reduce the number of moving parts.</div><br/><div id="41595643" class="c"><input type="checkbox" id="c-41595643" checked=""/><div class="controls bullet"><span class="by">3np</span><span>|</span><a href="#41594282">parent</a><span>|</span><a href="#41594513">next</a><span>|</span><label class="collapse" for="c-41595643">[-]</label><label class="expand" for="c-41595643">[1 more]</label></div><br/><div class="children"><div class="content">You can easily set up a Docker&#x2F;CNCF registry[0] container running locally. It can be run either as a caching pull-through mirror for a public registry (allowing you to easily run public containers in an environment without internet access) or as a private registry for your own image (this use-case). So if you want both features, you currently need two instances. Securing it for public use is a bit less trivial but for local use it&#x27;s literally a &#x27;run&#x27; or two.<p>So you can do &#x27;docker build -t localhost&#x2F;whatever&#x27; and then &#x27;docker run localhost&#x2F;whatever&#x27;. Also worth checking out podman to more easily run everything rootless.<p>If all you need is to move images between hosts like you would files, you don&#x27;t even need a registry (docker save&#x2F;load).<p>[0]: <a href="https:&#x2F;&#x2F;distribution.github.io&#x2F;distribution&#x2F;" rel="nofollow">https:&#x2F;&#x2F;distribution.github.io&#x2F;distribution&#x2F;</a></div><br/></div></div><div id="41594513" class="c"><input type="checkbox" id="c-41594513" checked=""/><div class="controls bullet"><span class="by">mightymoud</span><span>|</span><a href="#41594282">parent</a><span>|</span><a href="#41595643">prev</a><span>|</span><a href="#41596171">next</a><span>|</span><label class="collapse" for="c-41594513">[-]</label><label class="expand" for="c-41594513">[3 more]</label></div><br/><div class="children"><div class="content">Locally here means the locally on your laptop locally, not locally on your VPS. Contrary to popular opinion, I believe your source code shouldn&#x27;t be on your prod machine - a docker image is all you need. Lots of other projects push your code to VPS to build the image there then use it. I see no point in doing that...</div><br/><div id="41595513" class="c"><input type="checkbox" id="c-41595513" checked=""/><div class="controls bullet"><span class="by">sdf4j</span><span>|</span><a href="#41594282">root</a><span>|</span><a href="#41594513">parent</a><span>|</span><a href="#41596171">next</a><span>|</span><label class="collapse" for="c-41595513">[-]</label><label class="expand" for="c-41595513">[2 more]</label></div><br/><div class="children"><div class="content">The docker registry can be avoided by exporting&#x2F;importing the docker image over ssh.</div><br/></div></div></div></div></div></div><div id="41596171" class="c"><input type="checkbox" id="c-41596171" checked=""/><div class="controls bullet"><span class="by">gf297</span><span>|</span><a href="#41594282">prev</a><span>|</span><a href="#41592954">next</a><span>|</span><label class="collapse" for="c-41596171">[-]</label><label class="expand" for="c-41596171">[2 more]</label></div><br/><div class="children"><div class="content">What&#x27;s the purpose of encrypting the env file with sops, when the age secret key is stored on the VPS? If someone has access to the encrypted env file, they will also have access to the secret key, and can decrypt it.</div><br/></div></div><div id="41592954" class="c"><input type="checkbox" id="c-41592954" checked=""/><div class="controls bullet"><span class="by">achempion</span><span>|</span><a href="#41596171">prev</a><span>|</span><a href="#41593117">next</a><span>|</span><label class="collapse" for="c-41592954">[-]</label><label class="expand" for="c-41592954">[4 more]</label></div><br/><div class="children"><div class="content">This looks amazing, congrats on the release! Really looking forward for the database hosting feature as well (and probably networking and mounting data dirs).<p>As a side note, any reason why you decided against using docker in swarm mode as it should have all these features already built it?</div><br/><div id="41594434" class="c"><input type="checkbox" id="c-41594434" checked=""/><div class="controls bullet"><span class="by">mightymoud</span><span>|</span><a href="#41592954">parent</a><span>|</span><a href="#41593117">next</a><span>|</span><label class="collapse" for="c-41594434">[-]</label><label class="expand" for="c-41594434">[3 more]</label></div><br/><div class="children"><div class="content">Correct me if I&#x27;m wrong, Docker Swarm mode is made to manage multi node clusters. This is meant for only one single VPS.</div><br/><div id="41595206" class="c"><input type="checkbox" id="c-41595206" checked=""/><div class="controls bullet"><span class="by">achempion</span><span>|</span><a href="#41592954">root</a><span>|</span><a href="#41594434">parent</a><span>|</span><a href="#41593117">next</a><span>|</span><label class="collapse" for="c-41595206">[-]</label><label class="expand" for="c-41595206">[2 more]</label></div><br/><div class="children"><div class="content">You can use docker swarm just for single VPS.<p><pre><code>  - install docker 
  - run docker swarm init
  - create yaml that describes your stack (similar to docker-compose)
  - run docker stack deploy
</code></pre>
That&#x27;s basically it. My go-to solution when I need to run some service on single VPS.<p>If you want to just run a single container, you can also do this with `docker service create image:tag`</div><br/><div id="41595738" class="c"><input type="checkbox" id="c-41595738" checked=""/><div class="controls bullet"><span class="by">3np</span><span>|</span><a href="#41592954">root</a><span>|</span><a href="#41595206">parent</a><span>|</span><a href="#41593117">next</a><span>|</span><label class="collapse" for="c-41595738">[-]</label><label class="expand" for="c-41595738">[1 more]</label></div><br/><div class="children"><div class="content">I thought docker-swarm had been considered neglected to the point of dead and without a future for a few years now. Is this impression incorrect&#x2F;outdated?<p>EDIT: So apparently what used to be known as &quot;Docker Swarm&quot; has been posthumously renamed to &quot;Swarm Classic&quot;&#x2F;&quot;Classic Swarm&quot; and is indeed dead, abandoned, and deprecated. The project currently known as &quot;Docker Swarm&quot; is a younger completely different project which appears actively maintained. &quot;Classic&quot; still has roughly twice the GH stars and forks compared to the new one. I can&#x27;t be the only one who&#x27;s dismissed the latter, assuming it to be the former. Very confusing naming and branding, they would probably have more way more users if they had not repurposed the name like this.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;docker-archive&#x2F;classicswarm">https:&#x2F;&#x2F;github.com&#x2F;docker-archive&#x2F;classicswarm</a><p>&gt; Swarm Classic: a container clustering system. Not to be confused with Docker Swarm which is at <a href="https:&#x2F;&#x2F;github.com&#x2F;docker&#x2F;swarmkit">https:&#x2F;&#x2F;github.com&#x2F;docker&#x2F;swarmkit</a></div><br/></div></div></div></div></div></div></div></div><div id="41593117" class="c"><input type="checkbox" id="c-41593117" checked=""/><div class="controls bullet"><span class="by">spelunker</span><span>|</span><a href="#41592954">prev</a><span>|</span><a href="#41596702">next</a><span>|</span><label class="collapse" for="c-41593117">[-]</label><label class="expand" for="c-41593117">[1 more]</label></div><br/><div class="children"><div class="content">Looks great! I similarly got frustrated about the complexity of doing side-project ops stuff and messed around with Kamal, but this goes the extra mile by automatically setting up TLS as well. I&#x27;ll give it a try!</div><br/></div></div><div id="41596702" class="c"><input type="checkbox" id="c-41596702" checked=""/><div class="controls bullet"><span class="by">trey-jones</span><span>|</span><a href="#41593117">prev</a><span>|</span><a href="#41595389">next</a><span>|</span><label class="collapse" for="c-41596702">[-]</label><label class="expand" for="c-41596702">[1 more]</label></div><br/><div class="children"><div class="content">&quot;Wow, this really looks significantly better than my own CLI tools&quot;<p>I&#x27;m going to have to look into this pterm thing.</div><br/></div></div><div id="41595389" class="c"><input type="checkbox" id="c-41595389" checked=""/><div class="controls bullet"><span class="by">sigmonsays</span><span>|</span><a href="#41596702">prev</a><span>|</span><a href="#41593034">next</a><span>|</span><label class="collapse" for="c-41595389">[-]</label><label class="expand" for="c-41595389">[1 more]</label></div><br/><div class="children"><div class="content">tools like this are pretty sweet but I would rather just run it myself.<p>docker-compose with a load balancer (traefik) is fairly straightforward and awesome. the TLS setup is nice but I wildcard that and just run certgen myself.<p>The main thing I think that&#x27;s missing is some sort of authentication or zero trust system, maybe vpn tunnel provisioner. Most services I self host I do not want to be made public due to security concerns.</div><br/></div></div><div id="41593034" class="c"><input type="checkbox" id="c-41593034" checked=""/><div class="controls bullet"><span class="by">dvaun</span><span>|</span><a href="#41595389">prev</a><span>|</span><a href="#41595268">next</a><span>|</span><label class="collapse" for="c-41593034">[-]</label><label class="expand" for="c-41593034">[1 more]</label></div><br/><div class="children"><div class="content">Awesome! Love that it&#x27;s written in Go—I&#x27;ve recently tested the language for some use cases at work and find it great. I&#x27;ll dive into your repo to see if I can learn anything new :)</div><br/></div></div><div id="41595268" class="c"><input type="checkbox" id="c-41595268" checked=""/><div class="controls bullet"><span class="by">InvOfSmallC</span><span>|</span><a href="#41593034">prev</a><span>|</span><label class="collapse" for="c-41595268">[-]</label><label class="expand" for="c-41595268">[2 more]</label></div><br/><div class="children"><div class="content">Can I run more than one app on the same VPS with this solution?<p>I now run more than one app into one single VPS.</div><br/></div></div></div></div></div></div></div></body></html>