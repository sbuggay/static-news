<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1697360454267" as="style"/><link rel="stylesheet" href="styles.css?v=1697360454267"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://dmitry.gr/?r=05.Projects&amp;proj=07.%20Linux%20on%208bit">Linux on an 8bit Microcontroller</a> <span class="domain">(<a href="https://dmitry.gr">dmitry.gr</a>)</span></div><div class="subtext"><span>exar0815</span> | <span>20 comments</span></div><br/><div><div id="37885786" class="c"><input type="checkbox" id="c-37885786" checked=""/><div class="controls bullet"><span class="by">ostenning</span><span>|</span><a href="#37887323">next</a><span>|</span><label class="collapse" for="c-37885786">[-]</label><label class="expand" for="c-37885786">[6 more]</label></div><br/><div class="children"><div class="content">“It takes about 2 hours to boot to bash prompt (&quot;init=&#x2F;bin&#x2F;bash&quot; kernel command line). Then 4 more hours to boot up the entire Ubuntu (&quot;exec init&quot; and then login). Starting X takes a lot longer.”<p>I laughed at this - amazing work once again.</div><br/><div id="37885835" class="c"><input type="checkbox" id="c-37885835" checked=""/><div class="controls bullet"><span class="by">PumpkinSpice</span><span>|</span><a href="#37885786">parent</a><span>|</span><a href="#37887323">next</a><span>|</span><label class="collapse" for="c-37885835">[-]</label><label class="expand" for="c-37885835">[5 more]</label></div><br/><div class="children"><div class="content">It&#x27;s this slow not because of the MCU, though, but because the author is emulating another architecture in software. It would be fairly sluggish on a PC too.<p>This is both very impressive in terms of the sheer amount of work that went into that, but also a tiny bit disappointing because it&#x27;s not really Linux running natively on an 8-bit chip.<p>I <i>suspect</i> that native Linux is technically doable and would be a lot faster, but would require a lot of fiddling with the kernel, to the point where you&#x27;d be rewriting as much as you&#x27;re keeping. A lot of assembly shims to port, gotta get rid of all the MMU code, etc. AVR chips in particular also also a bit weird because they follow the Harvard architecture - separate addressing for code and data, which is not something the Linux kernel is made for.<p>FWIW, modern 8-bit MCUs are actually pretty darn fast. They have clocks all the way to 50 MHz or so, single-cycle execution for most opcodes, some have DMA and other cool gizmos on the die. They are orders of magnitude faster than the 8-bit tech we had back in the 1980s.</div><br/><div id="37887136" class="c"><input type="checkbox" id="c-37887136" checked=""/><div class="controls bullet"><span class="by">jdblair</span><span>|</span><a href="#37885786">root</a><span>|</span><a href="#37885835">parent</a><span>|</span><a href="#37886147">next</a><span>|</span><label class="collapse" for="c-37887136">[-]</label><label class="expand" for="c-37887136">[3 more]</label></div><br/><div class="children"><div class="content">You could make a multi-tasking os with no memory protection (kind of like AmigaOS), and with a partially posix api. Is that still Linux?</div><br/><div id="37888016" class="c"><input type="checkbox" id="c-37888016" checked=""/><div class="controls bullet"><span class="by">bestouff</span><span>|</span><a href="#37885786">root</a><span>|</span><a href="#37887136">parent</a><span>|</span><a href="#37887298">next</a><span>|</span><label class="collapse" for="c-37888016">[-]</label><label class="expand" for="c-37888016">[1 more]</label></div><br/><div class="children"><div class="content">Yes, that&#x27;s called uCLinux - linux without an MMU.</div><br/></div></div><div id="37887298" class="c"><input type="checkbox" id="c-37887298" checked=""/><div class="controls bullet"><span class="by">AlotOfReading</span><span>|</span><a href="#37885786">root</a><span>|</span><a href="#37887136">parent</a><span>|</span><a href="#37888016">prev</a><span>|</span><a href="#37886147">next</a><span>|</span><label class="collapse" for="c-37887298">[-]</label><label class="expand" for="c-37887298">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s basically just NuttX. Along similar lines is Zephyr, which is actually managed by the Linux foundation and broadly follows kernel conventions where reasonable.</div><br/></div></div></div></div><div id="37886147" class="c"><input type="checkbox" id="c-37886147" checked=""/><div class="controls bullet"><span class="by">DougMerritt</span><span>|</span><a href="#37885786">root</a><span>|</span><a href="#37885835">parent</a><span>|</span><a href="#37887136">prev</a><span>|</span><a href="#37887323">next</a><span>|</span><label class="collapse" for="c-37886147">[-]</label><label class="expand" for="c-37886147">[1 more]</label></div><br/><div class="children"><div class="content">Yep. IIRC the ubiquitous 8051 originally took 10-20 clocks just to execute a NOP, and everything else was even slower. For example.</div><br/></div></div></div></div></div></div><div id="37887323" class="c"><input type="checkbox" id="c-37887323" checked=""/><div class="controls bullet"><span class="by">rapnie</span><span>|</span><a href="#37885786">prev</a><span>|</span><a href="#37886687">next</a><span>|</span><label class="collapse" for="c-37887323">[-]</label><label class="expand" for="c-37887323">[1 more]</label></div><br/><div class="children"><div class="content">Do people know about new RISC-V based boards to experiment with? The other day I found Milk-V Duo [0], a $9 computer that runs Linux, and watched a cool video demonstration [1]. Another interesting board is the BeagleV®-Ahead [2], but there must be many more such open source HW&#x2F;SW projects.<p>[0] <a href="https:&#x2F;&#x2F;milkv.io&#x2F;duo" rel="nofollow noreferrer">https:&#x2F;&#x2F;milkv.io&#x2F;duo</a><p>[1] <a href="https:&#x2F;&#x2F;yewtu.be&#x2F;watch?v=z-GoLDQHYsE" rel="nofollow noreferrer">https:&#x2F;&#x2F;yewtu.be&#x2F;watch?v=z-GoLDQHYsE</a><p>[2] <a href="https:&#x2F;&#x2F;www.beagleboard.org&#x2F;boards&#x2F;beaglev-ahead" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.beagleboard.org&#x2F;boards&#x2F;beaglev-ahead</a><p><i>Update</i>: Found this discussion on the Milk-V of 3 months ago: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=36377439">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=36377439</a></div><br/></div></div><div id="37887949" class="c"><input type="checkbox" id="c-37887949" checked=""/><div class="controls bullet"><span class="by">mihaigalos</span><span>|</span><a href="#37886687">prev</a><span>|</span><a href="#37887025">next</a><span>|</span><label class="collapse" for="c-37887949">[-]</label><label class="expand" for="c-37887949">[1 more]</label></div><br/><div class="children"><div class="content">Amazing. Congrats.</div><br/></div></div><div id="37887025" class="c"><input type="checkbox" id="c-37887025" checked=""/><div class="controls bullet"><span class="by">fsiefken</span><span>|</span><a href="#37887949">prev</a><span>|</span><a href="#37886647">next</a><span>|</span><label class="collapse" for="c-37887025">[-]</label><label class="expand" for="c-37887025">[1 more]</label></div><br/><div class="children"><div class="content">I wonder if fuzix could be run on it and would result in a nore performant OS environment</div><br/></div></div><div id="37886647" class="c"><input type="checkbox" id="c-37886647" checked=""/><div class="controls bullet"><span class="by">ddtaylor</span><span>|</span><a href="#37887025">prev</a><span>|</span><a href="#37887556">next</a><span>|</span><label class="collapse" for="c-37886647">[-]</label><label class="expand" for="c-37886647">[1 more]</label></div><br/><div class="children"><div class="content">Obviously now we run Doom on it.</div><br/></div></div><div id="37887556" class="c"><input type="checkbox" id="c-37887556" checked=""/><div class="controls bullet"><span class="by">roschdal</span><span>|</span><a href="#37886647">prev</a><span>|</span><a href="#37886261">next</a><span>|</span><label class="collapse" for="c-37887556">[-]</label><label class="expand" for="c-37887556">[1 more]</label></div><br/><div class="children"><div class="content">Linux on an Arduino, that&#x27;s one of my dreams.</div><br/></div></div><div id="37886261" class="c"><input type="checkbox" id="c-37886261" checked=""/><div class="controls bullet"><span class="by">cdelsolar</span><span>|</span><a href="#37887556">prev</a><span>|</span><a href="#37886501">next</a><span>|</span><label class="collapse" for="c-37886261">[-]</label><label class="expand" for="c-37886261">[1 more]</label></div><br/><div class="children"><div class="content">this is amazing lmao</div><br/></div></div><div id="37886501" class="c"><input type="checkbox" id="c-37886501" checked=""/><div class="controls bullet"><span class="by">KingLancelot</span><span>|</span><a href="#37886261">prev</a><span>|</span><label class="collapse" for="c-37886501">[-]</label><label class="expand" for="c-37886501">[6 more]</label></div><br/><div class="children"><div class="content">Why are 8bit microcontrollers still a thing?</div><br/><div id="37886707" class="c"><input type="checkbox" id="c-37886707" checked=""/><div class="controls bullet"><span class="by">PumpkinSpice</span><span>|</span><a href="#37886501">parent</a><span>|</span><a href="#37887134">next</a><span>|</span><label class="collapse" for="c-37886707">[-]</label><label class="expand" for="c-37886707">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a pretty interesting question, even if a bit tangential to the article!<p>Their main advantage is the comparatively low transistor count. The chips can be made cheaply and don&#x27;t need cutting-edge fabs. This also makes them exceptionally power-efficient and tolerant of a wide range of supply voltages, so they&#x27;re easier to integrate into many designs.<p>Just as important, they are far easier to master. Single-cycle instruction execution, single chip-wide clock, simple interfaces to all peripherals. If you don&#x27;t have an OS to abstract it all away, most of the contemporary 32-bit platforms are a serious pain. Adjusting clock speed on a typical Cortex-M chip requires following a carefully-choreographed sequence of steps, possibly fiddling with flash wait states, various bus clocks, PLLs, and so on. On an 8-bit MCU, you just flip a bit or two.<p>It&#x27;s a weird misconception that &quot;8-bit&quot; means antiquated or slow. Modern 8-bit MCUs run at high speeds, have plenty of fast memory, and integrate all kinds of cool on-die peripherals - DACs, ADCs, op-amps, DMA controllers, USB controllers, and so on. And in a good majority of embedded applications, they are enough.<p>Of course, there&#x27;s nothing sacred about 8-bit ALUs, so I wouldn&#x27;t be surprised if 32-bit ALUs eventually take hold in this market segment. But the replacements would need to preserve that &quot;I can learn this in a weekend&quot; property that isn&#x27;t preserved in most of the high-performance 32-bit chips available today.</div><br/><div id="37887787" class="c"><input type="checkbox" id="c-37887787" checked=""/><div class="controls bullet"><span class="by">sweetjuly</span><span>|</span><a href="#37886501">root</a><span>|</span><a href="#37886707">parent</a><span>|</span><a href="#37887134">next</a><span>|</span><label class="collapse" for="c-37887787">[-]</label><label class="expand" for="c-37887787">[1 more]</label></div><br/><div class="children"><div class="content">&gt; This also makes them exceptionally power-efficient ...<p>&gt; Single-cycle instruction execution<p>For what it&#x27;s worth, single cycle execution is really a detriment to power efficiency. There is an optimal logic level per pipeline stage for CMOS processes which will minimize power (and it&#x27;s usually quite small!). Extremely deep pipelining lets you hit a higher Fmax, but if you don&#x27;t crank up the frequency you will often save quite a bit of power.</div><br/></div></div></div></div><div id="37887134" class="c"><input type="checkbox" id="c-37887134" checked=""/><div class="controls bullet"><span class="by">coder543</span><span>|</span><a href="#37886501">parent</a><span>|</span><a href="#37886707">prev</a><span>|</span><a href="#37887248">next</a><span>|</span><label class="collapse" for="c-37887134">[-]</label><label class="expand" for="c-37887134">[1 more]</label></div><br/><div class="children"><div class="content">It’s worth mentioning that the linked article was written over a decade ago.<p>- Even today, 8-bit MCUs can be significantly cheaper than 32-bit MCUs. A lot of microcontrollers are used for very simple tasks that simply don’t need anything more than what an 8-bit MCU can do. Although, these days it looks like 16-bit MCUs are comparable or sometimes cheaper when looking at Mouser and DigiKey? RL78-S1 may or may not count as 16-bit. I’m not familiar with it, and seeing some conflicting info.<p>- Plenty of legacy designs certainly continue to get manufactured, since updating the design and software to support a more advanced&#x2F;cheaper processor would both require requalification of the product and require engineering time.<p>- If you need the absolute lowest power consumption, a simpler, smaller, slower core can be helpful.<p>- Existing expertise&#x2F;familiarity</div><br/></div></div><div id="37887248" class="c"><input type="checkbox" id="c-37887248" checked=""/><div class="controls bullet"><span class="by">squarefoot</span><span>|</span><a href="#37886501">parent</a><span>|</span><a href="#37887134">prev</a><span>|</span><a href="#37887333">next</a><span>|</span><label class="collapse" for="c-37887248">[-]</label><label class="expand" for="c-37887248">[1 more]</label></div><br/><div class="children"><div class="content">They&#x27;re smaller (as in transistor count) and draw much less current than more powerful ones, which in some context (embedded&#x2F;industrial, etc) is quite important. For simple tasks such as &quot;read a sensor and if value isn&#x27; between values X and Y send this message over serial port and turn on relay on GPIO4&quot; anything more than a smallish 8bit (sometimes even less) uC would be a huge waste of resources and potential source of problems since every piece of hardware or line of code added could hide a potential bug, therefore one adds only what is absolutely necessary, and that includes an OS and the beefier hardware required to run it.</div><br/></div></div><div id="37887333" class="c"><input type="checkbox" id="c-37887333" checked=""/><div class="controls bullet"><span class="by">unsated</span><span>|</span><a href="#37886501">parent</a><span>|</span><a href="#37887248">prev</a><span>|</span><label class="collapse" for="c-37887333">[-]</label><label class="expand" for="c-37887333">[1 more]</label></div><br/><div class="children"><div class="content">In addition to low power and unparalleled reliability, the microcontroller make it possible to build a realtime system.</div><br/></div></div></div></div></div></div></div></div></div></body></html>