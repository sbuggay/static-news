<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1735981259235" as="style"/><link rel="stylesheet" href="styles.css?v=1735981259235"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/caoccao/swc4j">Swc4j: SWC for Java</a>Â <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>stefankuehnel</span> | <span>14 comments</span></div><br/><div><div id="42592146" class="c"><input type="checkbox" id="c-42592146" checked=""/><div class="controls bullet"><span class="by">lemming</span><span>|</span><a href="#42592000">next</a><span>|</span><label class="collapse" for="c-42592146">[-]</label><label class="expand" for="c-42592146">[12 more]</label></div><br/><div class="children"><div class="content">Oh my word, there may finally be a Typescript parser for the JVM? I have wanted this for the longest time, and it&#x27;s been on my radar to take on as a project in the near future. If this is a reasonably complete parser, this will save me a ton of time. My use case is parsing Typescript type definitions.<p>Edit: unfortunately, this seems to be a JNI bridge to the Rust code in SWC, I was hoping for a JVM-native solution.</div><br/><div id="42592265" class="c"><input type="checkbox" id="c-42592265" checked=""/><div class="controls bullet"><span class="by">AdieuToLogic</span><span>|</span><a href="#42592146">parent</a><span>|</span><a href="#42592739">next</a><span>|</span><label class="collapse" for="c-42592265">[-]</label><label class="expand" for="c-42592265">[7 more]</label></div><br/><div class="children"><div class="content">&gt; My use case is parsing Typescript type definitions.<p>&gt; Edit: unfortunately, this seems to be a JNI bridge to the Rust code in SWC, I was hoping for a JVM-native solution.<p>Maybe tree-sitter[0] TypeScript support[1] could do the trick?<p><pre><code>  Tree-sitter is a parser generator tool and an incremental 
  parsing library. It can build a concrete syntax tree for a 
  source file and efficiently update the syntax tree as the 
  source file is edited.
</code></pre>
HTH<p>0 - <a href="https:&#x2F;&#x2F;tree-sitter.github.io&#x2F;tree-sitter&#x2F;" rel="nofollow">https:&#x2F;&#x2F;tree-sitter.github.io&#x2F;tree-sitter&#x2F;</a><p>1 - <a href="https:&#x2F;&#x2F;github.com&#x2F;tree-sitter&#x2F;tree-sitter-typescript">https:&#x2F;&#x2F;github.com&#x2F;tree-sitter&#x2F;tree-sitter-typescript</a></div><br/><div id="42592276" class="c"><input type="checkbox" id="c-42592276" checked=""/><div class="controls bullet"><span class="by">zamalek</span><span>|</span><a href="#42592146">root</a><span>|</span><a href="#42592265">parent</a><span>|</span><a href="#42592739">next</a><span>|</span><label class="collapse" for="c-42592276">[-]</label><label class="expand" for="c-42592276">[6 more]</label></div><br/><div class="children"><div class="content">Tree sitter has a C runtime, and often a C scanner.</div><br/><div id="42592609" class="c"><input type="checkbox" id="c-42592609" checked=""/><div class="controls bullet"><span class="by">AdieuToLogic</span><span>|</span><a href="#42592146">root</a><span>|</span><a href="#42592276">parent</a><span>|</span><a href="#42592527">next</a><span>|</span><label class="collapse" for="c-42592609">[-]</label><label class="expand" for="c-42592609">[3 more]</label></div><br/><div class="children"><div class="content">If the tree-sitter runtime requirements are prohibitive and a pure JVM solution (IOW, no JNI) mandatory, then I&#x27;d recommend using antlr[0] with its representative grammar[1] as a starting point.  See here[2] for more details.<p>0 - <a href="https:&#x2F;&#x2F;www.antlr.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.antlr.org&#x2F;</a><p>1 - <a href="https:&#x2F;&#x2F;github.com&#x2F;antlr&#x2F;grammars-v4&#x2F;blob&#x2F;master&#x2F;javascript&#x2F;typescript&#x2F;README.md">https:&#x2F;&#x2F;github.com&#x2F;antlr&#x2F;grammars-v4&#x2F;blob&#x2F;master&#x2F;javascript&#x2F;...</a><p>2 - <a href="https:&#x2F;&#x2F;github.com&#x2F;antlr&#x2F;grammars-v4&#x2F;wiki">https:&#x2F;&#x2F;github.com&#x2F;antlr&#x2F;grammars-v4&#x2F;wiki</a></div><br/><div id="42593144" class="c"><input type="checkbox" id="c-42593144" checked=""/><div class="controls bullet"><span class="by">lemming</span><span>|</span><a href="#42592146">root</a><span>|</span><a href="#42592609">parent</a><span>|</span><a href="#42592679">next</a><span>|</span><label class="collapse" for="c-42593144">[-]</label><label class="expand" for="c-42593144">[1 more]</label></div><br/><div class="children"><div class="content">I agree that the Antlr Typescript grammar is underwhelming, and I also agree with the difficulty of not having a well defined owner of the project to interact with. My main use case is parsing TS type definitions, and the grammar from the grammars-v4 repo doesn&#x27;t parse anything starting with &#x27;declare&#x27;, which is pretty fundamental.</div><br/></div></div><div id="42592679" class="c"><input type="checkbox" id="c-42592679" checked=""/><div class="controls bullet"><span class="by">sjtucaocao</span><span>|</span><a href="#42592146">root</a><span>|</span><a href="#42592609">parent</a><span>|</span><a href="#42593144">prev</a><span>|</span><a href="#42592527">next</a><span>|</span><label class="collapse" for="c-42592679">[-]</label><label class="expand" for="c-42592679">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m the maintainer of swc4j. I had been using Antlr for many years, but was deeply disappointed by Antlr. So I created swc4j.<p>Why Antlr is not the one? Hope the following blog I wrote may explain.<p><a href="https:&#x2F;&#x2F;blog.caoccao.com&#x2F;hello-swc4j-goodbye-antlr-f9a63e45a3d4" rel="nofollow">https:&#x2F;&#x2F;blog.caoccao.com&#x2F;hello-swc4j-goodbye-antlr-f9a63e45a...</a></div><br/></div></div></div></div><div id="42592527" class="c"><input type="checkbox" id="c-42592527" checked=""/><div class="controls bullet"><span class="by">lemming</span><span>|</span><a href="#42592146">root</a><span>|</span><a href="#42592276">parent</a><span>|</span><a href="#42592609">prev</a><span>|</span><a href="#42592739">next</a><span>|</span><label class="collapse" for="c-42592527">[-]</label><label class="expand" for="c-42592527">[2 more]</label></div><br/><div class="children"><div class="content">Right, that would be another native bridge solution.</div><br/><div id="42592614" class="c"><input type="checkbox" id="c-42592614" checked=""/><div class="controls bullet"><span class="by">AdieuToLogic</span><span>|</span><a href="#42592146">root</a><span>|</span><a href="#42592527">parent</a><span>|</span><a href="#42592739">next</a><span>|</span><label class="collapse" for="c-42592614">[-]</label><label class="expand" for="c-42592614">[1 more]</label></div><br/><div class="children"><div class="content">See my peer comment for another option.  :-)</div><br/></div></div></div></div></div></div></div></div><div id="42592739" class="c"><input type="checkbox" id="c-42592739" checked=""/><div class="controls bullet"><span class="by">sjtucaocao</span><span>|</span><a href="#42592146">parent</a><span>|</span><a href="#42592265">prev</a><span>|</span><a href="#42592306">next</a><span>|</span><label class="collapse" for="c-42592739">[-]</label><label class="expand" for="c-42592739">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;m the maintainer of swc4j. I&#x27;d like to share some of my thoughts for your reference.<p>Before swc4j was born,<p>1. I was deeply disappointed by Antlr. My blog <a href="https:&#x2F;&#x2F;blog.caoccao.com&#x2F;hello-swc4j-goodbye-antlr-f9a63e45a3d4" rel="nofollow">https:&#x2F;&#x2F;blog.caoccao.com&#x2F;hello-swc4j-goodbye-antlr-f9a63e45a...</a> explains why.
2. I could use Babel in Node.js on JVM (using another project Javet created by me) to meet the business requirements, but Babel&#x27;s performance is 10x-100x worse than swc&#x27;s.
3. There was nothing else better.
4. swc is one of the best solutions in front-end toolchain. It&#x27;s well maintained. Its community is healty. It is being used by Node.js and Deno.<p>So I decided to try to embed swc in JVM. After a month of intensive development from scratch, swc4j was alive. In my opinion, its design has to be a genuine swc library bridged by JNI or other native interop mechanisms on JVM for the following reasons.<p>1. The dev cost of reinventing the wheels on JVM is unbearable to me. Tracking the JS &#x2F; TS &#x2F; JSX &#x2F; TSX &#x2F; ... specs from time to time requires a dedicated team.
2. The performance overhead is subtle.
3. The behavior is identical to the genuine swc. That brings confidence to the swc4j users.<p>Hope these make sense.</div><br/><div id="42593159" class="c"><input type="checkbox" id="c-42593159" checked=""/><div class="controls bullet"><span class="by">lemming</span><span>|</span><a href="#42592146">root</a><span>|</span><a href="#42592739">parent</a><span>|</span><a href="#42592306">next</a><span>|</span><label class="collapse" for="c-42593159">[-]</label><label class="expand" for="c-42593159">[1 more]</label></div><br/><div class="children"><div class="content">Thanks for the reply, I think your reasons make total sense for your use case and I was also underwhelmed by Antlr, or at least the TS grammar for it. But I don&#x27;t need the vast majority of what SWC offers, I just need a type declaration parser - that seems like it should be much more tractable to keep up to date, especially since there&#x27;s a massive test suite in DefinitelyTyped.</div><br/></div></div></div></div><div id="42592306" class="c"><input type="checkbox" id="c-42592306" checked=""/><div class="controls bullet"><span class="by">aclatuts</span><span>|</span><a href="#42592146">parent</a><span>|</span><a href="#42592739">prev</a><span>|</span><a href="#42592000">next</a><span>|</span><label class="collapse" for="c-42592306">[-]</label><label class="expand" for="c-42592306">[2 more]</label></div><br/><div class="children"><div class="content">Just curious as to why you would want that?</div><br/><div id="42592524" class="c"><input type="checkbox" id="c-42592524" checked=""/><div class="controls bullet"><span class="by">lemming</span><span>|</span><a href="#42592146">root</a><span>|</span><a href="#42592306">parent</a><span>|</span><a href="#42592000">next</a><span>|</span><label class="collapse" for="c-42592524">[-]</label><label class="expand" for="c-42592524">[1 more]</label></div><br/><div class="children"><div class="content">I want to use Typescript types to improve IDE support for a compile-to-JS language (ClojureScript).</div><br/></div></div></div></div></div></div><div id="42592000" class="c"><input type="checkbox" id="c-42592000" checked=""/><div class="controls bullet"><span class="by">timcobb</span><span>|</span><a href="#42592146">prev</a><span>|</span><label class="collapse" for="c-42592000">[-]</label><label class="expand" for="c-42592000">[1 more]</label></div><br/><div class="children"><div class="content">What are some use cases for this?</div><br/></div></div></div></div></div></div></div></body></html>