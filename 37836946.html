<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1697014864179" as="style"/><link rel="stylesheet" href="styles.css?v=1697014864179"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://quuxplusone.github.io/blog/2020/04/18/default-function-arguments-are-the-devil/">Problems with default function arguments (2020)</a>Â <span class="domain">(<a href="https://quuxplusone.github.io">quuxplusone.github.io</a>)</span></div><div class="subtext"><span>flipchart</span> | <span>8 comments</span></div><br/><div><div id="37841575" class="c"><input type="checkbox" id="c-37841575" checked=""/><div class="controls bullet"><span class="by">Veserv</span><span>|</span><a href="#37841350">next</a><span>|</span><label class="collapse" for="c-37841575">[-]</label><label class="expand" for="c-37841575">[3 more]</label></div><br/><div class="children"><div class="content">As someone who does not do modern C++ development, the problems they bring up seem to largely be of the flavor that positional parameters work poorly with default values in C++. The reason being that all default values do is give you the ability to elide the last N arguments. This is much worse than automatic selection of the correct overload based on the supplied arguments.<p>However, it seems to me that you could entirely resolve this problem by having true keyword arguments and default arguments <i>must</i> be keyword arguments; they can not be supplied positionally. If you then want some syntactic sugar in your API, you can then do what the author suggests as a solution to default values and supply variants that explicitly pass &quot;defaults&quot; to the master function.<p>Keyword arguments allows defaults while still allowing exact control over the arguments, exact control over the &quot;overload selected&quot; without explicit variants, and the ability to supply explicit variants if you want API ergonomics. The only downside I can see (relative to the solutions presented by the author) is that you have to write some extra argument names when passing non-default values to any variants that do not trivially pass them through, but that is a pretty minor cost especially with a IDE that can autocomplete the keywords, and it provides extra useful documentation to the maintainer and client, so it is not even all bad.</div><br/><div id="37842299" class="c"><input type="checkbox" id="c-37842299" checked=""/><div class="controls bullet"><span class="by">jiggawatts</span><span>|</span><a href="#37841575">parent</a><span>|</span><a href="#37842029">next</a><span>|</span><label class="collapse" for="c-37842299">[-]</label><label class="expand" for="c-37842299">[1 more]</label></div><br/><div class="children"><div class="content">This is what C# does, for example.</div><br/></div></div><div id="37842029" class="c"><input type="checkbox" id="c-37842029" checked=""/><div class="controls bullet"><span class="by">boxed</span><span>|</span><a href="#37841575">parent</a><span>|</span><a href="#37842299">prev</a><span>|</span><a href="#37841350">next</a><span>|</span><label class="collapse" for="c-37842029">[-]</label><label class="expand" for="c-37842029">[1 more]</label></div><br/><div class="children"><div class="content">Keyword&#x2F;labeled arguments are also much more robust against API changes breaking silently.</div><br/></div></div></div></div><div id="37841350" class="c"><input type="checkbox" id="c-37841350" checked=""/><div class="controls bullet"><span class="by">dataflow</span><span>|</span><a href="#37841575">prev</a><span>|</span><a href="#37842235">next</a><span>|</span><label class="collapse" for="c-37841350">[-]</label><label class="expand" for="c-37841350">[1 more]</label></div><br/><div class="children"><div class="content">Sure, the pitfalls are real. But they have benefits too. A fair assessment should examine both sides before coming to a decision, not just one. Off the top of my head, these come to mind:<p>- Defaults avoid having to duplicate the rest of the function (everything outside the body braces) just for the sake of an additional parameter. It might not be a big deal for reset() which is simple and only takes one argument anyway, but for other functions it can be a lot of boilerplate to keep in sync with the main overload: everything from the documentation, templates, parameter names, parameter types, etc. needs to be duplicated and kept in sync.<p>- Without default arguments, you lose the ability to capture parameters by-value with guaranteed move&#x2F;copy elision. You have to capture by reference and then construct at least one instance that you otherwise be able to elide. Sure, you don&#x27;t need that performance all the time, but that&#x27;s not the point. The point is there are times when you do.<p>- &quot;Go to definition&quot; in your IDE goes directly to the place you care about; &quot;find all references&quot; finds all references directly.<p>- Optionals are just way easier to read. Otherwise every reader or maintainer must read every other parameter and ensure they&#x27;re all forwarded 1:1 without side effects to understand if the semantics of the call are identical with the optional parameter supplied explicitly.</div><br/></div></div><div id="37842235" class="c"><input type="checkbox" id="c-37842235" checked=""/><div class="controls bullet"><span class="by">qwerty456127</span><span>|</span><a href="#37841350">prev</a><span>|</span><a href="#37841506">next</a><span>|</span><label class="collapse" for="c-37842235">[-]</label><label class="expand" for="c-37842235">[1 more]</label></div><br/><div class="children"><div class="content">Default arguments are used for sake of the DRY principle. Whenever it is highly likely that the majority of cases of application of a specific function are going to use the same parameter value it can be considered reasonable to imply this parameter value as a default while allowing it to be specified explicitly whenever it make sense to tweak it. Using overloading to implement this pattern would be way more verbose, introduce unnecessary complexity and actually repeat some code.</div><br/></div></div><div id="37841506" class="c"><input type="checkbox" id="c-37841506" checked=""/><div class="controls bullet"><span class="by">theteapot</span><span>|</span><a href="#37842235">prev</a><span>|</span><label class="collapse" for="c-37841506">[-]</label><label class="expand" for="c-37841506">[2 more]</label></div><br/><div class="children"><div class="content">All C++ specific though right? Trying to imagine the insanity that would be Numpy (or xyz other Scipy lib) without default function args ...</div><br/><div id="37842048" class="c"><input type="checkbox" id="c-37842048" checked=""/><div class="controls bullet"><span class="by">boxed</span><span>|</span><a href="#37841506">parent</a><span>|</span><label class="collapse" for="c-37842048">[-]</label><label class="expand" for="c-37842048">[1 more]</label></div><br/><div class="children"><div class="content">Yea. And there&#x27;s even pitfalls the author didn&#x27;t list. My biggest pet peeve about C++ default arguments it that they are compile time inserted based on the header file. So imagine:<p>void foo(int a = 1) {}<p>Now you ship this in a DLL, but realize the default was bad, so you change it to 2 and ship the new DLL. Well, the 1&#x2F;2 isn&#x27;t in the DLL <i>at all</i>. It&#x27;s only in the header file. So everyone must recompile. Fun times.</div><br/></div></div></div></div></div></div></div></div></div></body></html>