<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1708938059326" as="style"/><link rel="stylesheet" href="styles.css?v=1708938059326"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/epogrebnyak/justpath">Show HN: Justpath – a simple utility to explore the PATH environment variable</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>epogrebnyak</span> | <span>15 comments</span></div><br/><div><div id="39507044" class="c"><input type="checkbox" id="c-39507044" checked=""/><div class="controls bullet"><span class="by">arp242</span><span>|</span><a href="#39508599">next</a><span>|</span><label class="collapse" for="c-39507044">[-]</label><label class="expand" for="c-39507044">[3 more]</label></div><br/><div class="children"><div class="content">For zsh I use this to setup $PATH, which seems to address most of the use cases of this tool:<p><pre><code>  ### Setup PATH
  dirs=(
      &#x2F;usr&#x2F;lib&#x2F;ccache&#x2F;bin                   # ccache
      ~&#x2F;.local&#x2F;script ~&#x2F;.local&#x2F;bin          # My local scripts.
      ~&#x2F;.local&#x2F;gobin                        # GOBIN
      &#x2F;usr&#x2F;local&#x2F;bin &#x2F;usr&#x2F;local&#x2F;sbin        # local takes precedence
      &#x2F;bin &#x2F;sbin &#x2F;usr&#x2F;bin &#x2F;usr&#x2F;sbin         # Standard Unix
      &#x2F;usr&#x2F;pkg&#x2F;bin   &#x2F;usr&#x2F;pkg&#x2F;sbin          # NetBSD
      &#x2F;usr&#x2F;X11R6&#x2F;bin &#x2F;usr&#x2F;X11R6&#x2F;sbin        # OpenBSD
      &#x2F;opt&#x2F;ooce&#x2F;bin                         # illumos
      ~&#x2F;.local&#x2F;share&#x2F;gem&#x2F;ruby&#x2F;*&#x2F;bin(N[-1])  # Ruby
      ~&#x2F;.luarocks&#x2F;bin(N[-1])                # Lua
      ~&#x2F;.local&#x2F;dotnet&#x2F;root ~&#x2F;.local&#x2F;dotnet&#x2F;tools  # .NET
      &#x2F;usr&#x2F;lib&#x2F;plan9&#x2F;bin                    # Plan 9 from userspace
      ~&#x2F;code&#x2F;Vim&#x2F;gopher.vim&#x2F;tools&#x2F;bin       # gopher.vim
      ~&#x2F;.nimble&#x2F;bin                         # Nim
      ~&#x2F;.cargo&#x2F;bin                          # Rust
      ~&#x2F;.ghcup&#x2F;bin                          # Haskell
  )
  typeset -U path=()                        # No duplicates
  # Use full path so &#x2F;bin and &#x2F;usr&#x2F;bin aren&#x27;t duplicated if it&#x27;s a symlink.
  for d in $dirs:A; [[ -d $d ]] &amp;&amp; path+=($d)
  unset dirs d
</code></pre>
typeset -U makes the $path array &quot;unique&quot;, and :A ensures the full path is always used (in case of symlinks).<p>You can probably do something similar with bash, but idk.<p>$path is tied to $PATH and an array, so you can use it as such for some of the other things:<p><pre><code>  print ${(F)path} | grep &#x2F;bin  # (F) to print one array per line
  print ${(F)path} | sort       # can also use (o) to print ordered</code></pre></div><br/><div id="39508889" class="c"><input type="checkbox" id="c-39508889" checked=""/><div class="controls bullet"><span class="by">adriangrigore</span><span>|</span><a href="#39507044">parent</a><span>|</span><a href="#39507169">next</a><span>|</span><label class="collapse" for="c-39508889">[-]</label><label class="expand" for="c-39508889">[1 more]</label></div><br/><div class="children"><div class="content">Plan 9 from User Space binaries are on &#x2F;usr&#x2F;local&#x2F;plan9&#x2F;bin&#x2F; on OpenBSD.</div><br/></div></div><div id="39507169" class="c"><input type="checkbox" id="c-39507169" checked=""/><div class="controls bullet"><span class="by">throwaway84846</span><span>|</span><a href="#39507044">parent</a><span>|</span><a href="#39508889">prev</a><span>|</span><a href="#39508599">next</a><span>|</span><label class="collapse" for="c-39507169">[-]</label><label class="expand" for="c-39507169">[1 more]</label></div><br/><div class="children"><div class="content">I use &#x27;path=( ${(u)^path:A}(N-&#x2F;) )&#x27; instead of that for loop</div><br/></div></div></div></div><div id="39508599" class="c"><input type="checkbox" id="c-39508599" checked=""/><div class="controls bullet"><span class="by">vim-guru</span><span>|</span><a href="#39507044">prev</a><span>|</span><a href="#39508726">next</a><span>|</span><label class="collapse" for="c-39508599">[-]</label><label class="expand" for="c-39508599">[2 more]</label></div><br/><div class="children"><div class="content">I think for most of its use-cases, you could replace it with a one-liner:
    alias path=&#x27;echo -e ${PATH&#x2F;&#x2F;:&#x2F;\\n} &#x27;
and work with it via sort and uniq. I&#x27;ve had this alias in my configuration for a couple of decades now, so I&#x27;m not bashing on its usefulness though.</div><br/><div id="39508734" class="c"><input type="checkbox" id="c-39508734" checked=""/><div class="controls bullet"><span class="by">nmz</span><span>|</span><a href="#39508599">parent</a><span>|</span><a href="#39508726">next</a><span>|</span><label class="collapse" for="c-39508734">[-]</label><label class="expand" for="c-39508734">[1 more]</label></div><br/><div class="children"><div class="content">or you could just check env for a special variable and load a file once if the env var exists.</div><br/></div></div></div></div><div id="39508726" class="c"><input type="checkbox" id="c-39508726" checked=""/><div class="controls bullet"><span class="by">nmz</span><span>|</span><a href="#39508599">prev</a><span>|</span><a href="#39507007">next</a><span>|</span><label class="collapse" for="c-39508726">[-]</label><label class="expand" for="c-39508726">[1 more]</label></div><br/><div class="children"><div class="content">Kinda pointless</div><br/></div></div><div id="39507007" class="c"><input type="checkbox" id="c-39507007" checked=""/><div class="controls bullet"><span class="by">nolongerthere</span><span>|</span><a href="#39508726">prev</a><span>|</span><a href="#39507500">next</a><span>|</span><label class="collapse" for="c-39507007">[-]</label><label class="expand" for="c-39507007">[3 more]</label></div><br/><div class="children"><div class="content">I’m struggling to understand the use case for this aside from just checking if your own directory is on the path.</div><br/><div id="39508443" class="c"><input type="checkbox" id="c-39508443" checked=""/><div class="controls bullet"><span class="by">OccamsMirror</span><span>|</span><a href="#39507007">parent</a><span>|</span><a href="#39507130">next</a><span>|</span><label class="collapse" for="c-39508443">[-]</label><label class="expand" for="c-39508443">[1 more]</label></div><br/><div class="children"><div class="content">Not bad for a security check.<p><a href="https:&#x2F;&#x2F;systemweakness.com&#x2F;linux-privilege-escalation-using-path-variable-manipulation-64325ab05469" rel="nofollow">https:&#x2F;&#x2F;systemweakness.com&#x2F;linux-privilege-escalation-using-...</a></div><br/></div></div></div></div><div id="39507500" class="c"><input type="checkbox" id="c-39507500" checked=""/><div class="controls bullet"><span class="by">DanielKehoe</span><span>|</span><a href="#39507007">prev</a><span>|</span><a href="#39506832">next</a><span>|</span><label class="collapse" for="c-39507500">[-]</label><label class="expand" for="c-39507500">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;d like to hear viewpoints on using `~&#x2F;.zprofile` versus `~&#x2F;.zshrc` for setting `$PATH` on macOS. I was bothered for years that I didn&#x27;t know the difference so I dived down the rabbit hole and wrote a guide [1]. In the end, I concluded:<p>- Use `~&#x2F;.zprofile`  to set the PATH and EDITOR environment variables.
- Use `~&#x2F;.zshrc`  for aliases and a custom prompt, or anything tweaking the appearance and behavior of the terminal.<p>It seems the advantage of the `~&#x2F;.zprofile` file versus `~&#x2F;.zshenv` is that it sets environment variables such as `$PATH` without override from macOS. It seems the  `~&#x2F;.zshrc` file could be used for `$PATH` but, by convention and design, is intended for customizing the look and feel of the interactive terminal.<p>Frankly, saying  `~&#x2F;.zprofile` is better than `~&#x2F;.zshrc` for setting `$PATH` only &quot;by convention and design&quot; feels like a cop-out. Wondering if anyone knows better.<p>[1] <a href="https:&#x2F;&#x2F;mac.install.guide&#x2F;terminal&#x2F;zshrc-zprofile" rel="nofollow">https:&#x2F;&#x2F;mac.install.guide&#x2F;terminal&#x2F;zshrc-zprofile</a></div><br/><div id="39508793" class="c"><input type="checkbox" id="c-39508793" checked=""/><div class="controls bullet"><span class="by">sidneythekidney</span><span>|</span><a href="#39507500">parent</a><span>|</span><a href="#39508748">next</a><span>|</span><label class="collapse" for="c-39508793">[-]</label><label class="expand" for="c-39508793">[1 more]</label></div><br/><div class="children"><div class="content">I set $PATH in ~&#x2F;.zshenv. If you don&#x27;t, you can&#x27;t use any of your &quot;extra stuff&quot; in your zsh-scripts, as they do not use login or interactive sessions. And then I unset GLOBAL_RCS so the system configfiles don&#x27;t override my settings.<p>In your guide, under ~&#x2F;.zshenv, you mention that &quot;macOS overrides this for PATH settings for interactive shells&quot;, without mentioning why or how. What&#x27;s happening is that macOS sets your path in &#x2F;etc&#x2F;zprofile.<p>It seems your guide is missing a few global configfiles :) This is the order for an interactive login shell [1]:<p><pre><code>  &#x2F;etc&#x2F;zshenv
  ${ZDOTDIR:-$HOME}&#x2F;.zshenv
  &#x2F;etc&#x2F;zprofile                 (login)
  ${ZDOTDIR:-$HOME}&#x2F;.zprofile   (login)
  &#x2F;etc&#x2F;zshrc                    (interactive)
  ${ZDOTDIR:-$HOME}&#x2F;.zshrc      (interactive)
  &#x2F;etc&#x2F;zlogin                   (login)
  ${ZDOTDIR:-$HOME}&#x2F;.zlogin     (login)
  &#x2F;etc&#x2F;zlogout                  (login - loaded on logout)
  ${ZDOTDIR:-$HOME}&#x2F;.zlogout    (login - loaded on logout)
</code></pre>
In fact, the configfiles you mention are only loaded the way you&#x27;ve mentioned them, if the option GLOBAL_RCS is unset. And if GLOBAL_RCS is unset, macOS does not override your PATH, because&#x2F;etc&#x2F;zprofile is not loaded :)<p>1: &lt;<a href="https:&#x2F;&#x2F;zsh.sourceforge.io&#x2F;Doc&#x2F;Release&#x2F;Files.html" rel="nofollow">https:&#x2F;&#x2F;zsh.sourceforge.io&#x2F;Doc&#x2F;Release&#x2F;Files.html</a>&gt;</div><br/></div></div><div id="39508748" class="c"><input type="checkbox" id="c-39508748" checked=""/><div class="controls bullet"><span class="by">vim-guru</span><span>|</span><a href="#39507500">parent</a><span>|</span><a href="#39508793">prev</a><span>|</span><a href="#39506832">next</a><span>|</span><label class="collapse" for="c-39508748">[-]</label><label class="expand" for="c-39508748">[1 more]</label></div><br/><div class="children"><div class="content">Your assessment is correct.  But it really comes down to what type of shell that&#x27;s running.  For an interactive shell (one you open yourself in a terminal), the run-com file (.zshrc) will be loaded, so anywhere you put it, things will seemingly work.  But if you start doing some task scheduling etc, that would fail if you have set your PATH in a run-com.</div><br/></div></div></div></div><div id="39506832" class="c"><input type="checkbox" id="c-39506832" checked=""/><div class="controls bullet"><span class="by">agumonkey</span><span>|</span><a href="#39507500">prev</a><span>|</span><a href="#39504251">next</a><span>|</span><label class="collapse" for="c-39506832">[-]</label><label class="expand" for="c-39506832">[1 more]</label></div><br/><div class="children"><div class="content">the original ~unionfs :)</div><br/></div></div><div id="39504251" class="c"><input type="checkbox" id="c-39504251" checked=""/><div class="controls bullet"><span class="by">dang</span><span>|</span><a href="#39506832">prev</a><span>|</span><label class="collapse" for="c-39504251">[-]</label><label class="expand" for="c-39504251">[1 more]</label></div><br/><div class="children"><div class="content">Url changed from <a href="https:&#x2F;&#x2F;polar.sh&#x2F;epogrebnyak&#x2F;posts&#x2F;justpath-to-explore-path-quickly" rel="nofollow">https:&#x2F;&#x2F;polar.sh&#x2F;epogrebnyak&#x2F;posts&#x2F;justpath-to-explore-path-...</a>, which points to this.</div><br/></div></div></div></div></div></div></div></body></html>