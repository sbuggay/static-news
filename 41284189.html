<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1724230876544" as="style"/><link rel="stylesheet" href="styles.css?v=1724230876544"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/baalimago/wd-40">Show HN: Wd-40, a static webserver with automatic hot-reloads</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>baalimago</span> | <span>34 comments</span></div><br/><div><div id="41306509" class="c"><input type="checkbox" id="c-41306509" checked=""/><div class="controls bullet"><span class="by">Brajeshwar</span><span>|</span><a href="#41284248">next</a><span>|</span><label class="collapse" for="c-41306509">[-]</label><label class="expand" for="c-41306509">[5 more]</label></div><br/><div class="children"><div class="content">I thought the name was inspired by a cheap, easily available lubricant that comes in handy for every home.<p>I&#x27;ve tried many simple servers for experimenting with simple static websites (HTML, CSS, JS). I&#x27;m currently settled on LiveReload[1] and BrowserSync[2]. LiveReload attaches to other tooling and is more straightforward, while Brower-Sync when looking across a few multiple browsers (out of habit). I&#x27;m not particularly fond of tooling that attaches to an IDE, but I like more of the ones that I can pipe with arguments. But then again, I do straightforward stuff these days.<p>LiveReload should also be easily attachable to a simple `python -m SimpleHTTPServer 8000`.<p>1. <a href="https:&#x2F;&#x2F;github.com&#x2F;livereload">https:&#x2F;&#x2F;github.com&#x2F;livereload</a><p>2. <a href="https:&#x2F;&#x2F;browsersync.io" rel="nofollow">https:&#x2F;&#x2F;browsersync.io</a></div><br/><div id="41307385" class="c"><input type="checkbox" id="c-41307385" checked=""/><div class="controls bullet"><span class="by">antman</span><span>|</span><a href="#41306509">parent</a><span>|</span><a href="#41306782">next</a><span>|</span><label class="collapse" for="c-41307385">[-]</label><label class="expand" for="c-41307385">[3 more]</label></div><br/><div class="children"><div class="content">It would be self defeating if written in Rust</div><br/><div id="41307441" class="c"><input type="checkbox" id="c-41307441" checked=""/><div class="controls bullet"><span class="by">seanthemon</span><span>|</span><a href="#41306509">root</a><span>|</span><a href="#41307385">parent</a><span>|</span><a href="#41306782">next</a><span>|</span><label class="collapse" for="c-41307441">[-]</label><label class="expand" for="c-41307441">[2 more]</label></div><br/><div class="children"><div class="content">Except &quot;rust&quot; in rust isn&#x27;t about iron oxidation, but rather a fungi [0]<p>[0] <a href="https:&#x2F;&#x2F;www.reddit.com&#x2F;r&#x2F;rust&#x2F;comments&#x2F;27jvdt&#x2F;internet_archaeology_the_definitive_endall_source&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.reddit.com&#x2F;r&#x2F;rust&#x2F;comments&#x2F;27jvdt&#x2F;internet_archa...</a></div><br/><div id="41307954" class="c"><input type="checkbox" id="c-41307954" checked=""/><div class="controls bullet"><span class="by">sgu999</span><span>|</span><a href="#41306509">root</a><span>|</span><a href="#41307441">parent</a><span>|</span><a href="#41306782">next</a><span>|</span><label class="collapse" for="c-41307954">[-]</label><label class="expand" for="c-41307954">[1 more]</label></div><br/><div class="children"><div class="content">Doesn&#x27;t seem that final in that extract.<p>&gt; &lt;graydon&gt; &gt; A little. Also big metallic things. And rusts and smuts, fungi. And it&#x27;s a
&gt; &lt;graydon&gt; &gt; nice substring of &quot;robust&quot;.<p>&gt; &lt;graydon&gt; IOW I don&#x27;t have a really good explanation. it seemed like a good name. (also a substring of &quot;trust&quot;, &quot;frustrating&quot;, &quot;rustic&quot; and ... &quot;thrust&quot;?)<p>&gt; &lt;graydon&gt; but then everyone thinks it&#x27;s a pun on &quot;chrome&quot; so maybe we should stick with that<p>And given that now all the lore around it is about oxidation, I guess that&#x27;s what stuck?<p>These old IRC dumps make me nostalgic instantaneously. There was a time not that long ago when we were still mostly fine with plain text for complex communications.</div><br/></div></div></div></div></div></div><div id="41306782" class="c"><input type="checkbox" id="c-41306782" checked=""/><div class="controls bullet"><span class="by">baalimago</span><span>|</span><a href="#41306509">parent</a><span>|</span><a href="#41307385">prev</a><span>|</span><a href="#41284248">next</a><span>|</span><label class="collapse" for="c-41306782">[-]</label><label class="expand" for="c-41306782">[1 more]</label></div><br/><div class="children"><div class="content">&gt;I thought the name was inspired by a cheap, easily available lubricant that comes in handy for every home.<p>It is, especially it&#x27;s rust-repellent properties. The only &#x27;plug-and-play&#x27; static webserver I found was, well... <a href="https:&#x2F;&#x2F;github.com&#x2F;static-web-server&#x2F;static-web-server&#x2F;">https:&#x2F;&#x2F;github.com&#x2F;static-web-server&#x2F;static-web-server&#x2F;</a> which is written in Rust (I didn&#x27;t look around super hard). But, being a gopher, and since it lacked live reload, I wrote my own.</div><br/></div></div></div></div><div id="41284248" class="c"><input type="checkbox" id="c-41284248" checked=""/><div class="controls bullet"><span class="by">pwg</span><span>|</span><a href="#41306509">prev</a><span>|</span><a href="#41307113">next</a><span>|</span><label class="collapse" for="c-41284248">[-]</label><label class="expand" for="c-41284248">[11 more]</label></div><br/><div class="children"><div class="content">My only comment is: &quot;be prepared for a cease and desist from the lawyer&#x27;s for the real WD-40 company&quot; over the name choice.<p>The fact that they make spray lubricants and you have a website re-loader will likely not make any difference to them.</div><br/><div id="41297996" class="c"><input type="checkbox" id="c-41297996" checked=""/><div class="controls bullet"><span class="by">bankcust08385</span><span>|</span><a href="#41284248">parent</a><span>|</span><a href="#41306908">next</a><span>|</span><label class="collapse" for="c-41297996">[-]</label><label class="expand" for="c-41297996">[6 more]</label></div><br/><div class="children"><div class="content">I also hate WD-40 as a product because it&#x27;s marginally useless as a lubricant or as a penetrating oil when there are far better products for each use.</div><br/><div id="41306553" class="c"><input type="checkbox" id="c-41306553" checked=""/><div class="controls bullet"><span class="by">written-beyond</span><span>|</span><a href="#41284248">root</a><span>|</span><a href="#41297996">parent</a><span>|</span><a href="#41306657">next</a><span>|</span><label class="collapse" for="c-41306553">[-]</label><label class="expand" for="c-41306553">[3 more]</label></div><br/><div class="children"><div class="content">I sprayed it near my squeaky bike brake hinge thinking it would remove the squeak. I now know I was an idiot and completely ruined the bike&#x27;s brakes.</div><br/><div id="41307056" class="c"><input type="checkbox" id="c-41307056" checked=""/><div class="controls bullet"><span class="by">TomK32</span><span>|</span><a href="#41284248">root</a><span>|</span><a href="#41306553">parent</a><span>|</span><a href="#41307403">next</a><span>|</span><label class="collapse" for="c-41307056">[-]</label><label class="expand" for="c-41307056">[1 more]</label></div><br/><div class="children"><div class="content">Brake cleaner for diskbrakes unless it&#x27;s a sound of metal on metal and you have to replace the brake pads. And for rim brakes if there&#x27;s a metal sound a stone is stuck in the rubber part of the brakes, either get it out or replace as well if it&#x27;s already worn down a fair bit.</div><br/></div></div><div id="41307403" class="c"><input type="checkbox" id="c-41307403" checked=""/><div class="controls bullet"><span class="by">Lionga</span><span>|</span><a href="#41284248">root</a><span>|</span><a href="#41306553">parent</a><span>|</span><a href="#41307056">prev</a><span>|</span><a href="#41306657">next</a><span>|</span><label class="collapse" for="c-41307403">[-]</label><label class="expand" for="c-41307403">[1 more]</label></div><br/><div class="children"><div class="content">Just be happy you learned that lesson on a bike and not on a car</div><br/></div></div></div></div><div id="41306657" class="c"><input type="checkbox" id="c-41306657" checked=""/><div class="controls bullet"><span class="by">fnord77</span><span>|</span><a href="#41284248">root</a><span>|</span><a href="#41297996">parent</a><span>|</span><a href="#41306553">prev</a><span>|</span><a href="#41306908">next</a><span>|</span><label class="collapse" for="c-41306657">[-]</label><label class="expand" for="c-41306657">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s excellent for Water Displacement, which is what its purpose actually is.<p>Such as if you have ignition wires soaked with water and shorted, it will get you going again.</div><br/><div id="41307068" class="c"><input type="checkbox" id="c-41307068" checked=""/><div class="controls bullet"><span class="by">rzzzt</span><span>|</span><a href="#41284248">root</a><span>|</span><a href="#41306657">parent</a><span>|</span><a href="#41306908">next</a><span>|</span><label class="collapse" for="c-41307068">[-]</label><label class="expand" for="c-41307068">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a brand name now, they also sell grease.</div><br/></div></div></div></div></div></div><div id="41306908" class="c"><input type="checkbox" id="c-41306908" checked=""/><div class="controls bullet"><span class="by">mikkom</span><span>|</span><a href="#41284248">parent</a><span>|</span><a href="#41297996">prev</a><span>|</span><a href="#41284384">next</a><span>|</span><label class="collapse" for="c-41306908">[-]</label><label class="expand" for="c-41306908">[1 more]</label></div><br/><div class="children"><div class="content">Using the same name also will make searching anything related to this much more difficult (as will using 2 letter 2 number name)</div><br/></div></div><div id="41284384" class="c"><input type="checkbox" id="c-41284384" checked=""/><div class="controls bullet"><span class="by">baalimago</span><span>|</span><a href="#41284248">parent</a><span>|</span><a href="#41306908">prev</a><span>|</span><a href="#41307057">next</a><span>|</span><label class="collapse" for="c-41284384">[-]</label><label class="expand" for="c-41284384">[2 more]</label></div><br/><div class="children"><div class="content">Hmm.. That&#x27;s a good point, thank you. I&#x27;ll change the name</div><br/><div id="41284614" class="c"><input type="checkbox" id="c-41284614" checked=""/><div class="controls bullet"><span class="by">SvenL</span><span>|</span><a href="#41284248">root</a><span>|</span><a href="#41284384">parent</a><span>|</span><a href="#41307057">next</a><span>|</span><label class="collapse" for="c-41284614">[-]</label><label class="expand" for="c-41284614">[1 more]</label></div><br/><div class="children"><div class="content">Good job with the renaming - WD-42 could have been also a good choice.</div><br/></div></div></div></div><div id="41307057" class="c"><input type="checkbox" id="c-41307057" checked=""/><div class="controls bullet"><span class="by">alpb</span><span>|</span><a href="#41284248">parent</a><span>|</span><a href="#41284384">prev</a><span>|</span><a href="#41307113">next</a><span>|</span><label class="collapse" for="c-41307057">[-]</label><label class="expand" for="c-41307057">[1 more]</label></div><br/><div class="children"><div class="content">It’s wd-41 now lol</div><br/></div></div></div></div><div id="41307113" class="c"><input type="checkbox" id="c-41307113" checked=""/><div class="controls bullet"><span class="by">onetom</span><span>|</span><a href="#41284248">prev</a><span>|</span><a href="#41306899">next</a><span>|</span><label class="collapse" for="c-41307113">[-]</label><label class="expand" for="c-41307113">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve settled on devd (modd) for the past few years.
<a href="https:&#x2F;&#x2F;github.com&#x2F;cortesi&#x2F;devd">https:&#x2F;&#x2F;github.com&#x2F;cortesi&#x2F;devd</a><p>It&#x27;s a single file go executable.
Supports CORS too.
I use it via direnv &amp; nix-shell.</div><br/></div></div><div id="41306899" class="c"><input type="checkbox" id="c-41306899" checked=""/><div class="controls bullet"><span class="by">winter_blue</span><span>|</span><a href="#41307113">prev</a><span>|</span><a href="#41307326">next</a><span>|</span><label class="collapse" for="c-41306899">[-]</label><label class="expand" for="c-41306899">[2 more]</label></div><br/><div class="children"><div class="content">This is pretty cool. I have two questions, regarding the mirroring:<p>1. For the mirroring, are you using something like rsync (with modifications for the web socket script injection) underneath? Also, will the mirroring reflect destructive changes (like rsync&#x27;s --delete flag), like if a directory or file is deleted in the original content directory?<p>2. Could you avoid mirroring the content directory, and just directly serve the original content directory, by just simply on-the-fly injecting the relevant script tag in text&#x2F;html files? (Or, only mirroring those text&#x2F;html files, and serving the remaining files from the original content directory.)</div><br/><div id="41307112" class="c"><input type="checkbox" id="c-41307112" checked=""/><div class="controls bullet"><span class="by">baalimago</span><span>|</span><a href="#41306899">parent</a><span>|</span><a href="#41307326">next</a><span>|</span><label class="collapse" for="c-41307112">[-]</label><label class="expand" for="c-41307112">[1 more]</label></div><br/><div class="children"><div class="content">1. No, it doesn&#x27;t react to file additions&#x2F;deletions at the moment, but as there&#x27;s support for this in fnotify which is handling file change notifications [1] I&#x27;ll add this shortly. wd-41 is still quite early in development.<p>2. This was my initial idea as well: to simply inject the ws-load script tag on the fly. But it would require basically writing a static file server from scratch, which I didn&#x27;t feel like doing (I have a blog to write, not static file servers!). 
Currently the solution is based on the go standard library fileserver handler [2] which makes the solution simple and effective. So i decided on the mirrored approach with the idea that the result for the end user should be the same, apart for the temporary directory where the mirrored files lives. I haven&#x27;t yet detected any speed-issues in the mirroring process or the file-watch process, which I think is the only downside (please correct me if I&#x27;m wrong).<p>[1]: <a href="https:&#x2F;&#x2F;pkg.go.dev&#x2F;github.com&#x2F;fsnotify&#x2F;fsnotify#hdr-Watching_directories" rel="nofollow">https:&#x2F;&#x2F;pkg.go.dev&#x2F;github.com&#x2F;fsnotify&#x2F;fsnotify#hdr-Watching...</a><p>[2]: <a href="https:&#x2F;&#x2F;github.com&#x2F;baalimago&#x2F;wd-41&#x2F;blob&#x2F;main&#x2F;cmd&#x2F;serve&#x2F;serve.go#L68">https:&#x2F;&#x2F;github.com&#x2F;baalimago&#x2F;wd-41&#x2F;blob&#x2F;main&#x2F;cmd&#x2F;serve&#x2F;serve...</a></div><br/></div></div></div></div><div id="41307326" class="c"><input type="checkbox" id="c-41307326" checked=""/><div class="controls bullet"><span class="by">password4321</span><span>|</span><a href="#41306899">prev</a><span>|</span><a href="#41287547">next</a><span>|</span><label class="collapse" for="c-41307326">[-]</label><label class="expand" for="c-41307326">[1 more]</label></div><br/><div class="children"><div class="content">I am the self-appointed HN sales pitch for <a href="https:&#x2F;&#x2F;github.com&#x2F;sigoden&#x2F;dufs">https:&#x2F;&#x2F;github.com&#x2F;sigoden&#x2F;dufs</a>, a fileserver including webdav.</div><br/></div></div><div id="41287547" class="c"><input type="checkbox" id="c-41287547" checked=""/><div class="controls bullet"><span class="by">dufzh</span><span>|</span><a href="#41307326">prev</a><span>|</span><a href="#41292203">next</a><span>|</span><label class="collapse" for="c-41287547">[-]</label><label class="expand" for="c-41287547">[1 more]</label></div><br/><div class="children"><div class="content">Sounds similar to the &#x27;live server&#x27; plugin in vscode</div><br/></div></div><div id="41292203" class="c"><input type="checkbox" id="c-41292203" checked=""/><div class="controls bullet"><span class="by">Alifatisk</span><span>|</span><a href="#41287547">prev</a><span>|</span><a href="#41307478">next</a><span>|</span><label class="collapse" for="c-41292203">[-]</label><label class="expand" for="c-41292203">[3 more]</label></div><br/><div class="children"><div class="content">Does it support SSI?</div><br/><div id="41292789" class="c"><input type="checkbox" id="c-41292789" checked=""/><div class="controls bullet"><span class="by">baalimago</span><span>|</span><a href="#41292203">parent</a><span>|</span><a href="#41307478">next</a><span>|</span><label class="collapse" for="c-41292789">[-]</label><label class="expand" for="c-41292789">[2 more]</label></div><br/><div class="children"><div class="content">No. Didn&#x27;t even know what SSI was until I googled around. Seems cool, but the as I host my personal website on s3 + cloudfront (the usecase of which I made wd-41), which doesn&#x27;t support SSI, I don&#x27;t think I&#x27;ll add it.</div><br/><div id="41294503" class="c"><input type="checkbox" id="c-41294503" checked=""/><div class="controls bullet"><span class="by">Alifatisk</span><span>|</span><a href="#41292203">root</a><span>|</span><a href="#41292789">parent</a><span>|</span><a href="#41307478">next</a><span>|</span><label class="collapse" for="c-41294503">[-]</label><label class="expand" for="c-41294503">[1 more]</label></div><br/><div class="children"><div class="content">I understand</div><br/></div></div></div></div></div></div><div id="41307478" class="c"><input type="checkbox" id="c-41307478" checked=""/><div class="controls bullet"><span class="by">mixmastamyk</span><span>|</span><a href="#41292203">prev</a><span>|</span><a href="#41307054">next</a><span>|</span><label class="collapse" for="c-41307478">[-]</label><label class="expand" for="c-41307478">[1 more]</label></div><br/><div class="children"><div class="content">You can do this with inotify-tools and a wrapper script.  Needs a little something on the browser side to make it seamless however.</div><br/></div></div><div id="41307054" class="c"><input type="checkbox" id="c-41307054" checked=""/><div class="controls bullet"><span class="by">wannacboatmovie</span><span>|</span><a href="#41307478">prev</a><span>|</span><a href="#41306771">next</a><span>|</span><label class="collapse" for="c-41307054">[-]</label><label class="expand" for="c-41307054">[7 more]</label></div><br/><div class="children"><div class="content">Static web servers have been a solved technical problem for going on 25 years.</div><br/><div id="41307429" class="c"><input type="checkbox" id="c-41307429" checked=""/><div class="controls bullet"><span class="by">mrweasel</span><span>|</span><a href="#41307054">parent</a><span>|</span><a href="#41307140">next</a><span>|</span><label class="collapse" for="c-41307429">[-]</label><label class="expand" for="c-41307429">[3 more]</label></div><br/><div class="children"><div class="content">Yeah, but this one actually refreshes the browser when a file is modified on disk (of the server). I don&#x27;t recall seeing that in any other webserver, at least not out of the box.<p>It is pretty clever, not sure how much need I have for it, but it&#x27;s an interesting idea.</div><br/><div id="41307532" class="c"><input type="checkbox" id="c-41307532" checked=""/><div class="controls bullet"><span class="by">wannacboatmovie</span><span>|</span><a href="#41307054">root</a><span>|</span><a href="#41307429">parent</a><span>|</span><a href="#41307140">next</a><span>|</span><label class="collapse" for="c-41307532">[-]</label><label class="expand" for="c-41307532">[2 more]</label></div><br/><div class="children"><div class="content">Extremely large beverage holder...bubble dome...a horn that plays &quot;La Cucaracha&quot;...</div><br/><div id="41308195" class="c"><input type="checkbox" id="c-41308195" checked=""/><div class="controls bullet"><span class="by">mrweasel</span><span>|</span><a href="#41307054">root</a><span>|</span><a href="#41307532">parent</a><span>|</span><a href="#41307140">next</a><span>|</span><label class="collapse" for="c-41308195">[-]</label><label class="expand" for="c-41308195">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Extremely large beverage holder.<p>You joke, but the only thermo mug that I&#x27;ve been able to find that fits into my car is an off-brand one my mother-in-law picked up from a bargain bin in Lidl. None of my five mugs or bottles fit.</div><br/></div></div></div></div></div></div><div id="41307140" class="c"><input type="checkbox" id="c-41307140" checked=""/><div class="controls bullet"><span class="by">whiterknight</span><span>|</span><a href="#41307054">parent</a><span>|</span><a href="#41307429">prev</a><span>|</span><a href="#41306771">next</a><span>|</span><label class="collapse" for="c-41307140">[-]</label><label class="expand" for="c-41307140">[3 more]</label></div><br/><div class="children"><div class="content">Is there a small and portable one you recommend?</div><br/><div id="41307469" class="c"><input type="checkbox" id="c-41307469" checked=""/><div class="controls bullet"><span class="by">wannacboatmovie</span><span>|</span><a href="#41307054">root</a><span>|</span><a href="#41307140">parent</a><span>|</span><a href="#41307276">next</a><span>|</span><label class="collapse" for="c-41307469">[-]</label><label class="expand" for="c-41307469">[1 more]</label></div><br/><div class="children"><div class="content">mini_httpd, merecat, [a-z]httpd (choose one), OpenBSD httpd is nice but not portable. Your OS likely has a a built-in web server. Hell, Microsoft shipped something called Personal Web Server with Windows 95&#x2F;98 nearly 30 years ago.<p>Stop inventing new static web servers. Contribute patches to an existing project if you feel so inclined but this has been a solved problem for decades by very intelligent people who understand how the Internet works. We&#x27;ve gone full circle from bloated behemoths like Netscape, to serving from kernel mode (http.sys, Tux Web Server, etc.) and back again.</div><br/></div></div><div id="41307276" class="c"><input type="checkbox" id="c-41307276" checked=""/><div class="controls bullet"><span class="by">hawski</span><span>|</span><a href="#41307054">root</a><span>|</span><a href="#41307140">parent</a><span>|</span><a href="#41307469">prev</a><span>|</span><a href="#41306771">next</a><span>|</span><label class="collapse" for="c-41307276">[-]</label><label class="expand" for="c-41307276">[1 more]</label></div><br/><div class="children"><div class="content">I personally like busybox httpd, because sometimes it already is there.</div><br/></div></div></div></div></div></div><div id="41306771" class="c"><input type="checkbox" id="c-41306771" checked=""/><div class="controls bullet"><span class="by">AbraKdabra</span><span>|</span><a href="#41307054">prev</a><span>|</span><label class="collapse" for="c-41306771">[-]</label><label class="expand" for="c-41306771">[1 more]</label></div><br/><div class="children"><div class="content">I really don&#x27;t know how you didn&#x27;t think of the &quot;dodging potential lawsuit&quot; before posting it here, I mean, you didn&#x27;t know that using actual product names is wrong? It&#x27;s a shame though, I liked the word play.</div><br/></div></div></div></div></div></div></div></body></html>