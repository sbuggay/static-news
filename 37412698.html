<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1694077262812" as="style"/><link rel="stylesheet" href="styles.css?v=1694077262812"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/jqlang/jq/releases/tag/jq-1.7">jq 1.7</a>Â <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>wwader</span> | <span>119 comments</span></div><br/><div><div id="37413354" class="c"><input type="checkbox" id="c-37413354" checked=""/><div class="controls bullet"><span class="by">d_t_w</span><span>|</span><a href="#37415532">next</a><span>|</span><label class="collapse" for="c-37413354">[-]</label><label class="expand" for="c-37413354">[59 more]</label></div><br/><div class="children"><div class="content">This is great, JQ is brilliant.<p>I love JQ so much we implemented a subset of JQ in Clojure so that our users could use it to munge&#x2F;filter data in our product (JVM and browser based Kafka tooling). One of the most fun coding pieces I&#x27;ve done, though I am a bit odd and I love writing grammars (big shoutout to Instaparse![1]).<p>I learned through my implementation that JQ is a LISP-2[2] which surprised me as it didn&#x27;t feel obvious from the grammar.<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;Engelberg&#x2F;instaparse">https:&#x2F;&#x2F;github.com&#x2F;Engelberg&#x2F;instaparse</a><p>[2] <a href="https:&#x2F;&#x2F;github.com&#x2F;jqlang&#x2F;jq&#x2F;wiki&#x2F;jq-Language-Description#:~:text=The%20jq%20language%20is%20a,their%20use%20after%20being%20deallocated">https:&#x2F;&#x2F;github.com&#x2F;jqlang&#x2F;jq&#x2F;wiki&#x2F;jq-Language-Description#:~...</a>.</div><br/><div id="37413704" class="c"><input type="checkbox" id="c-37413704" checked=""/><div class="controls bullet"><span class="by">chatmasta</span><span>|</span><a href="#37413354">parent</a><span>|</span><a href="#37414564">next</a><span>|</span><label class="collapse" for="c-37413704">[-]</label><label class="expand" for="c-37413704">[57 more]</label></div><br/><div class="children"><div class="content">I can&#x27;t stand jq. I realize this is an unpopular opinion, and our codebase at work has plenty of jq in the bash scripts, some of it even code that I wrote. I begrudgingly use it when it&#x27;s the best option for me. But something about it rubs me the wrong way - I think it&#x27;s the unintuitive query syntax and the need to search for every minute step of what I&#x27;m trying to do, and the frequency with which that leads to cryptic answers that I can only decipher if I am some sort of jq expert. But I have this instinctive reaction to all DSL languages that embed themselves into strings, like htmx and tailwind (both embedded in attribute string values). I realize some people like it, and it&#x27;s a well-made piece of software, and I will even admit that sometimes there is no better choice. But I guess I just hate that it&#x27;s necessary? I guess I could also admit it&#x27;s the least-bad option, in the sense that it&#x27;s a vast improvement over various sed&#x2F;awk&#x2F;cut monstrosities when it comes to parsing JSON in bash. Certainly once you find the right incantation, it&#x27;s perfect - it transforms some raw stdin into parsed JSON that you can manipulate into exactly what you need. But for me, it ranks right next to regex in terms of &quot;things I (don&#x27;t) want to see in my code.&quot; I hate that the jq command is always some indecipherable string in the middle of the script. The only real alternative I&#x27;ve ever used is piping to a Python program that I define inline in a heredoc, but that ends up being at least as nasty as the JQ script.</div><br/><div id="37414337" class="c"><input type="checkbox" id="c-37414337" checked=""/><div class="controls bullet"><span class="by">hn92726819</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37413704">parent</a><span>|</span><a href="#37416100">next</a><span>|</span><label class="collapse" for="c-37414337">[-]</label><label class="expand" for="c-37414337">[11 more]</label></div><br/><div class="children"><div class="content">&gt; I hate that the jq command is always some indecipherable string in the middle of the script<p>It might be worthwhile to just learn how jq works. At the end of the day, you need to learn <i>some</i> language to parse json. I hate DSLs too, but I cannot think of anything as useful and concise as jq.<p>&gt; but that ends up being at least as nasty as the JQ script<p>That&#x27;s exaxtly why jq is so nice. Nice alternatives just don&#x27;t exist</div><br/><div id="37415383" class="c"><input type="checkbox" id="c-37415383" checked=""/><div class="controls bullet"><span class="by">p-e-w</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414337">parent</a><span>|</span><a href="#37414507">next</a><span>|</span><label class="collapse" for="c-37415383">[-]</label><label class="expand" for="c-37415383">[8 more]</label></div><br/><div class="children"><div class="content">&gt; That&#x27;s exaxtly why jq is so nice. Nice alternatives just don&#x27;t exist<p>Write a simple Python script, parse JSON into native objects, manipulate those objects as desired with standard Python code, then serialize back into JSON if necessary. Voila, you have a readable, maintainable, straightforward solution, and the only dependency (the Python interpreter) is already preinstalled on almost every modern system.<p>Sure, you may need a few more lines of code than what would be possible with a tailor-made DSL like jq, but this isn&#x27;t code golf. Good code targets humans, not &quot;least possible number of bytes, arranged in the cleverest possible way&quot;.</div><br/><div id="37415809" class="c"><input type="checkbox" id="c-37415809" checked=""/><div class="controls bullet"><span class="by">darkwater</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37415383">parent</a><span>|</span><a href="#37415652">next</a><span>|</span><label class="collapse" for="c-37415809">[-]</label><label class="expand" for="c-37415809">[1 more]</label></div><br/><div class="children"><div class="content">The simple existence of DSL tools like jq is the testament to the fact that people don&#x27;t want to go to a generic language to solve every kind of problem.
I&#x27;m also convinced that a big subset of &quot;use generic language for everything&quot; do it because they want to use their shiny hammer on that nail as well.</div><br/></div></div><div id="37415652" class="c"><input type="checkbox" id="c-37415652" checked=""/><div class="controls bullet"><span class="by">hnben</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37415383">parent</a><span>|</span><a href="#37415809">prev</a><span>|</span><a href="#37415795">next</a><span>|</span><label class="collapse" for="c-37415652">[-]</label><label class="expand" for="c-37415652">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Sure, you may need a few more lines of code than ...<p>jQ integrates very nicely into bash script. Especially in between pipes a short&amp;simple jq-snippet can work wonders for readability of the overall script.<p>On the other hand, if the bash script becomes too complex it may be a good idea to replace the entire bash script with python (instead of just the json-parsing-part)</div><br/><div id="37415701" class="c"><input type="checkbox" id="c-37415701" checked=""/><div class="controls bullet"><span class="by">viraptor</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37415652">parent</a><span>|</span><a href="#37415903">next</a><span>|</span><label class="collapse" for="c-37415701">[-]</label><label class="expand" for="c-37415701">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Especially in between pipes a short&amp;simple jq-snippet<p>Many of them are not short and simple though. And each time you do a some transformation, you pretty much need to go in&#x2F;out of jq at each step of it want to make some decisions or get multiple types of results without processing the original multiple times.</div><br/></div></div><div id="37415903" class="c"><input type="checkbox" id="c-37415903" checked=""/><div class="controls bullet"><span class="by">p-e-w</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37415652">parent</a><span>|</span><a href="#37415701">prev</a><span>|</span><a href="#37415795">next</a><span>|</span><label class="collapse" for="c-37415903">[-]</label><label class="expand" for="c-37415903">[1 more]</label></div><br/><div class="children"><div class="content">&gt; a short&amp;simple jq-snippet can work wonders for readability of the overall script.<p>... if the reader happens to be familiar with the niche language &quot;jq&quot;.<p>Otherwise, you may as well have put some Akkadian cuneiform in there.</div><br/></div></div></div></div><div id="37415795" class="c"><input type="checkbox" id="c-37415795" checked=""/><div class="controls bullet"><span class="by">ianleeclark</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37415383">parent</a><span>|</span><a href="#37415652">prev</a><span>|</span><a href="#37415931">next</a><span>|</span><label class="collapse" for="c-37415795">[-]</label><label class="expand" for="c-37415795">[1 more]</label></div><br/><div class="children"><div class="content">The point in my career at which I used jq the most was when I was doing a lot of work with Elasticsearch doing exploratory work on indexed data and search results. Doing things such as trying to figure out what sort of values `key` might have, grabbing ids returned, etc.<p>Second to this, I&#x27;ve mostly used jq to look at OpenAPI&#x2F;swagger files, again just doing one-off tasks, such as listing all api routes, listing similarly named schemas, etc.<p>From what I&#x27;ve seen in the companies I&#x27;ve worked for, this is fairly consistent, but naturally I can&#x27;t speak for everyone&#x27;s use-cases. At the end of the day, I don&#x27;t think most people use jq in places where readable or maintainable would be most appropriate.</div><br/></div></div><div id="37415931" class="c"><input type="checkbox" id="c-37415931" checked=""/><div class="controls bullet"><span class="by">rwmj</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37415383">parent</a><span>|</span><a href="#37415795">prev</a><span>|</span><a href="#37416197">next</a><span>|</span><label class="collapse" for="c-37415931">[-]</label><label class="expand" for="c-37415931">[1 more]</label></div><br/><div class="children"><div class="content">jq is very practical compared to writing python programs.  It is the workhorse of many of our tests, eg:<p><a href="https:&#x2F;&#x2F;gitlab.com&#x2F;nbdkit&#x2F;libnbd&#x2F;-&#x2F;blob&#x2F;master&#x2F;info&#x2F;info-json.sh" rel="nofollow noreferrer">https:&#x2F;&#x2F;gitlab.com&#x2F;nbdkit&#x2F;libnbd&#x2F;-&#x2F;blob&#x2F;master&#x2F;info&#x2F;info-jso...</a>
<a href="https:&#x2F;&#x2F;gitlab.com&#x2F;nbdkit&#x2F;libnbd&#x2F;-&#x2F;blob&#x2F;master&#x2F;info&#x2F;info-map-totals-json.sh" rel="nofollow noreferrer">https:&#x2F;&#x2F;gitlab.com&#x2F;nbdkit&#x2F;libnbd&#x2F;-&#x2F;blob&#x2F;master&#x2F;info&#x2F;info-map...</a>
<a href="https:&#x2F;&#x2F;gitlab.com&#x2F;nbdkit&#x2F;nbdkit&#x2F;-&#x2F;blob&#x2F;master&#x2F;tests&#x2F;test-extentlist.sh" rel="nofollow noreferrer">https:&#x2F;&#x2F;gitlab.com&#x2F;nbdkit&#x2F;nbdkit&#x2F;-&#x2F;blob&#x2F;master&#x2F;tests&#x2F;test-ex...</a>
<a href="https:&#x2F;&#x2F;gitlab.com&#x2F;nbdkit&#x2F;nbdkit&#x2F;-&#x2F;blob&#x2F;master&#x2F;tests&#x2F;test-tar-info-xz.sh" rel="nofollow noreferrer">https:&#x2F;&#x2F;gitlab.com&#x2F;nbdkit&#x2F;nbdkit&#x2F;-&#x2F;blob&#x2F;master&#x2F;tests&#x2F;test-ta...</a><p>(I picked a few completely at random from dozens and dozens)</div><br/></div></div><div id="37416197" class="c"><input type="checkbox" id="c-37416197" checked=""/><div class="controls bullet"><span class="by">comprev</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37415383">parent</a><span>|</span><a href="#37415931">prev</a><span>|</span><a href="#37414507">next</a><span>|</span><label class="collapse" for="c-37416197">[-]</label><label class="expand" for="c-37416197">[1 more]</label></div><br/><div class="children"><div class="content">jq can be easily downloaded, unpacked, executed and deleted in one line of bash.<p>It&#x27;s beauty is the simplicity and portability.</div><br/></div></div></div></div><div id="37414507" class="c"><input type="checkbox" id="c-37414507" checked=""/><div class="controls bullet"><span class="by">speed_spread</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414337">parent</a><span>|</span><a href="#37415383">prev</a><span>|</span><a href="#37416100">next</a><span>|</span><label class="collapse" for="c-37414507">[-]</label><label class="expand" for="c-37414507">[2 more]</label></div><br/><div class="children"><div class="content">Something not having alternatives doesn&#x27;t make it necessarily nice. It&#x27;s okay to wish for better even if you have something that works.</div><br/><div id="37415294" class="c"><input type="checkbox" id="c-37415294" checked=""/><div class="controls bullet"><span class="by">ustolemyname</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414507">parent</a><span>|</span><a href="#37416100">next</a><span>|</span><label class="collapse" for="c-37415294">[-]</label><label class="expand" for="c-37415294">[1 more]</label></div><br/><div class="children"><div class="content">I think in this case &quot;better&quot; reduces to convincing the upstream data source to not use json.<p>Putting that frustration on jq seems like a case of transference.</div><br/></div></div></div></div></div></div><div id="37416100" class="c"><input type="checkbox" id="c-37416100" checked=""/><div class="controls bullet"><span class="by">larodi</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37413704">parent</a><span>|</span><a href="#37414337">prev</a><span>|</span><a href="#37414211">next</a><span>|</span><label class="collapse" for="c-37416100">[-]</label><label class="expand" for="c-37416100">[1 more]</label></div><br/><div class="children"><div class="content">In my opinion (potentially nor popular) JQ has this appeal to nerds the same way that stuff like Perl does. I say this as someone who did Perl for 20years but now prefers python or JSâ¦<p>For many people regexes are as bad as the jq queriesâ¦ and vice versa. I would not recommend to write python script instead of regexp, but indeed it may work the same for small data and be more readable.<p>I love rÃ©gex and been mastering it since 1999. So much that in 2013 I used it in production to parse binary protocol with dynamic sized fields. I believe the project is still talking 10k plus devices. Google mustâve just released protocol buffersâ¦ I would love to finally see regexes which can work over custom flow of objects and also on trees.<p>I also loved XPath which is very powerful and very comprehensible, then there is CSS1&#x2F;2&#x2F;3 which are again for queries to structures tree like data.<p>The prospect of now learning jq does not appeal me that much even though I appreciate its ingenuity. I may recommend it to dev&#x2F;ops colleagues now and then, but for me this syntax is a lot of additional cognitive pressure which does not necessarily pay up. Of course if there is large amount of JSON data - it is the Swiss knife.<p>But nowadays Iâll likely use some LLm to generate the jq query for me. Also would joke with my bash-diehard colleagues who would love one more DSLâ¦</div><br/></div></div><div id="37414211" class="c"><input type="checkbox" id="c-37414211" checked=""/><div class="controls bullet"><span class="by">matthewtse</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37413704">parent</a><span>|</span><a href="#37416100">prev</a><span>|</span><a href="#37414056">next</a><span>|</span><label class="collapse" for="c-37414211">[-]</label><label class="expand" for="c-37414211">[5 more]</label></div><br/><div class="children"><div class="content">I love and hate it.<p>For simple things like navigating down one key, or one array entry, I know by heart, and it&#x27;s incredibly useful. But anything more complicated, and I&#x27;m too lazy to lookup the documentation.<p>jq will fall into the bucket along with sed&#x2F;awk of &quot;tools I once wished to become an expert on, but will never do so because ChatGPT came along&quot;.<p>Would also put regex into that bucket, but they&#x27;re so ubiquitous that I&#x27;ve already learned regexes. I wonder if the new wave of coders learning coding via ChatGPT will think of regexes the same way I think of sed&#x2F;awk.</div><br/><div id="37414292" class="c"><input type="checkbox" id="c-37414292" checked=""/><div class="controls bullet"><span class="by">slaymaker1907</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414211">parent</a><span>|</span><a href="#37414634">next</a><span>|</span><label class="collapse" for="c-37414292">[-]</label><label class="expand" for="c-37414292">[3 more]</label></div><br/><div class="children"><div class="content">I think these very terse languages are precisely the ones you shouldn&#x27;t unleash ChatGPT on. It needs to be really exact and if it is wrong, you can easily end up with something that is an infinite loop or takes exponential time with respect to the input.</div><br/><div id="37415901" class="c"><input type="checkbox" id="c-37415901" checked=""/><div class="controls bullet"><span class="by">FredrikMeyer</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414292">parent</a><span>|</span><a href="#37414634">next</a><span>|</span><label class="collapse" for="c-37415901">[-]</label><label class="expand" for="c-37415901">[2 more]</label></div><br/><div class="children"><div class="content">My way of using ChatGPT is just to ask it to give me some complicated sed&#x2F;awk command, and then I can usually understand easily if the command is correct, or easily look it up. So it is very good for learning.</div><br/><div id="37416311" class="c"><input type="checkbox" id="c-37416311" checked=""/><div class="controls bullet"><span class="by">zimpenfish</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37415901">parent</a><span>|</span><a href="#37414634">next</a><span>|</span><label class="collapse" for="c-37416311">[-]</label><label class="expand" for="c-37416311">[1 more]</label></div><br/><div class="children"><div class="content">Ok but if &quot;[you] can usually understand easily if the command is correct&quot; or &quot;easily look it up&quot;, what do you even need the ChatGPT step for there?</div><br/></div></div></div></div></div></div><div id="37414634" class="c"><input type="checkbox" id="c-37414634" checked=""/><div class="controls bullet"><span class="by">magarnicle</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414211">parent</a><span>|</span><a href="#37414292">prev</a><span>|</span><a href="#37414056">next</a><span>|</span><label class="collapse" for="c-37414634">[-]</label><label class="expand" for="c-37414634">[1 more]</label></div><br/><div class="children"><div class="content">sed became easy for me when I realised it&#x27;s essentially the the :s[ubstitute] command in Vim.</div><br/></div></div></div></div><div id="37414056" class="c"><input type="checkbox" id="c-37414056" checked=""/><div class="controls bullet"><span class="by">bfung</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37413704">parent</a><span>|</span><a href="#37414211">prev</a><span>|</span><a href="#37415535">next</a><span>|</span><label class="collapse" for="c-37414056">[-]</label><label class="expand" for="c-37414056">[1 more]</label></div><br/><div class="children"><div class="content">Agree - by the time I need more than grep and reach for json parsing, itâs already complicated enough for a Python script. stdin pipped to json.loads ainât that bad.<p>Def. seen jq thrown into sed&#x2F;awk scripts where a readable programming language was the right move. People spend hrs finding the right syntax to these things ~ not always well spent.</div><br/></div></div><div id="37415535" class="c"><input type="checkbox" id="c-37415535" checked=""/><div class="controls bullet"><span class="by">dygd</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37413704">parent</a><span>|</span><a href="#37414056">prev</a><span>|</span><a href="#37415682">next</a><span>|</span><label class="collapse" for="c-37415535">[-]</label><label class="expand" for="c-37415535">[3 more]</label></div><br/><div class="children"><div class="content">Also not a big fan, but I hate it for a very specific reason:<p><pre><code>  echo 12345678901234567890|jq
  12345678901234567000</code></pre></div><br/><div id="37415570" class="c"><input type="checkbox" id="c-37415570" checked=""/><div class="controls bullet"><span class="by">L3viathan</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37415535">parent</a><span>|</span><a href="#37415682">next</a><span>|</span><label class="collapse" for="c-37415570">[-]</label><label class="expand" for="c-37415570">[2 more]</label></div><br/><div class="children"><div class="content">Sounds like this is fixed in 1.7</div><br/><div id="37415648" class="c"><input type="checkbox" id="c-37415648" checked=""/><div class="controls bullet"><span class="by">dygd</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37415570">parent</a><span>|</span><a href="#37415682">next</a><span>|</span><label class="collapse" for="c-37415648">[-]</label><label class="expand" for="c-37415648">[1 more]</label></div><br/><div class="children"><div class="content">Indeed, just tested it and it is fixed. Thanks!</div><br/></div></div></div></div></div></div><div id="37415682" class="c"><input type="checkbox" id="c-37415682" checked=""/><div class="controls bullet"><span class="by">viraptor</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37413704">parent</a><span>|</span><a href="#37415535">prev</a><span>|</span><a href="#37413712">next</a><span>|</span><label class="collapse" for="c-37415682">[-]</label><label class="expand" for="c-37415682">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve got similar feelings about it and recently I started experimenting with writing scripts in Nushell rather than bash + jq. I get the json object as a proper type in the script, get reasonable operations available on it and don&#x27;t have to think of weird escaping for either the contents or the jq script. It cuts down the size my scripts by about a half and I&#x27;m very happy with the results.</div><br/></div></div><div id="37413712" class="c"><input type="checkbox" id="c-37413712" checked=""/><div class="controls bullet"><span class="by">cryptonector</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37413704">parent</a><span>|</span><a href="#37415682">prev</a><span>|</span><a href="#37415502">next</a><span>|</span><label class="collapse" for="c-37413712">[-]</label><label class="expand" for="c-37413712">[14 more]</label></div><br/><div class="children"><div class="content">Python is so much harder to process JSON data in than jq, that that is how I got into working with and on jq almost a decade ago.</div><br/><div id="37413721" class="c"><input type="checkbox" id="c-37413721" checked=""/><div class="controls bullet"><span class="by">chatmasta</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37413712">parent</a><span>|</span><a href="#37415502">next</a><span>|</span><label class="collapse" for="c-37413721">[-]</label><label class="expand" for="c-37413721">[13 more]</label></div><br/><div class="children"><div class="content">Yeah, Python is like 10-20x the number of lines required to do the same thing as jq (especially with the boilerplate of consuming stdin), but that&#x27;s also why it&#x27;s more readable. But generally I agree - I would choose jq over some weird bash&#x2F;python hybrid most of the time. I just wish it was more immediately readable.</div><br/><div id="37413971" class="c"><input type="checkbox" id="c-37413971" checked=""/><div class="controls bullet"><span class="by">cryptonector</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37413721">parent</a><span>|</span><a href="#37413762">next</a><span>|</span><label class="collapse" for="c-37413971">[-]</label><label class="expand" for="c-37413971">[11 more]</label></div><br/><div class="children"><div class="content">Simple jq programs are easy to read because simple jq programs are just path expressions, and the jq language is optimized to make path expressions easy to read.  Path expressions like<p><pre><code>  .[].commit | select(.author == &quot;Tom Hudson&quot;)
</code></pre>
which basically says &quot;find all commits by Tom Hudson&quot; in the input.<p>`.[]` iterates all the values in its input (whether the input be an array or an object).  `.commit` gets the value of the &quot;commit&quot; key in the input object.  You concatenate path expressions with `|`, and array&#x2F;object index expressions you can just concatenate w&#x2F;o `|`, so `.[]` and `.commit` can be `.[] | .commit` and also `.[].commit`.  Calls to functions like `select()` whose bodies are path expressions are.. also path expressions.<p>Perhaps the most brilliant thing about jq is that you can assign to arbitrarily complex path expressions, so you can:<p><pre><code>  (.[].commit | select(.author == &quot;Tom Hudson&quot;)) = &quot;Anon&quot;
</code></pre>
The syntax is strange probably <i>because</i> of this trying to make <i>path expressions</i> so trivial and readable.<p>jq programs get hard to read mainly when you go beyond path expressions, especially when you start doing reductions.  The problem is that it resembles point free programming in Haskell, which is really not for everyone.<p>The other thing is that jq is very much a functional programming language, and that takes getting used to.</div><br/><div id="37414104" class="c"><input type="checkbox" id="c-37414104" checked=""/><div class="controls bullet"><span class="by">wrs</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37413971">parent</a><span>|</span><a href="#37414242">next</a><span>|</span><label class="collapse" for="c-37414104">[-]</label><label class="expand" for="c-37414104">[3 more]</label></div><br/><div class="children"><div class="content">Also, hereâs something that seems not widely appreciated: You can write super clever unreadable one-long-line jq programs embedded in bash scripts (I hear you on the point-free thing), <i>or</i> you can write jq programs that live in their own files, with multiple lines, indentation, comments, and intermediate assignments to variables with readable names. I recommend the latter!</div><br/><div id="37414206" class="c"><input type="checkbox" id="c-37414206" checked=""/><div class="controls bullet"><span class="by">flakes</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414104">parent</a><span>|</span><a href="#37414242">next</a><span>|</span><label class="collapse" for="c-37414206">[-]</label><label class="expand" for="c-37414206">[2 more]</label></div><br/><div class="children"><div class="content">Wait, really? I had no idea you could do that. Might have to try that next time Im tempted to break out python or node for a bash script.</div><br/><div id="37414325" class="c"><input type="checkbox" id="c-37414325" checked=""/><div class="controls bullet"><span class="by">wrs</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414206">parent</a><span>|</span><a href="#37414242">next</a><span>|</span><label class="collapse" for="c-37414325">[-]</label><label class="expand" for="c-37414325">[1 more]</label></div><br/><div class="children"><div class="content">I found a random example on GitHub for you. Search `path:jq$` for more.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;flox&#x2F;flox&#x2F;blob&#x2F;019095f8bc40e49abc8e5cd0b1094e4c89a74f38&#x2F;flox-bash&#x2F;lib&#x2F;diff-catalogs.jq#L1">https:&#x2F;&#x2F;github.com&#x2F;flox&#x2F;flox&#x2F;blob&#x2F;019095f8bc40e49abc8e5cd0b1...</a></div><br/></div></div></div></div></div></div><div id="37414242" class="c"><input type="checkbox" id="c-37414242" checked=""/><div class="controls bullet"><span class="by">rtpg</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37413971">parent</a><span>|</span><a href="#37414104">prev</a><span>|</span><a href="#37413762">next</a><span>|</span><label class="collapse" for="c-37414242">[-]</label><label class="expand" for="c-37414242">[7 more]</label></div><br/><div class="children"><div class="content">data = json.load(sys.stdin)<p>commits = [elt.commit for elt in data if elt.commit.author = &quot;Tom Hudson&quot;]<p>json.dump(commits, sys.stdout)<p>Definitely not as straightforward... would be nice to have a bit more affordances for path expressions in Python.</div><br/><div id="37414315" class="c"><input type="checkbox" id="c-37414315" checked=""/><div class="controls bullet"><span class="by">dragonwriter</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414242">parent</a><span>|</span><a href="#37414662">next</a><span>|</span><label class="collapse" for="c-37414315">[-]</label><label class="expand" for="c-37414315">[3 more]</label></div><br/><div class="children"><div class="content">That doesnât quite work, because JSON objects are parsed to Python dicts, not Python objects with properties, so it would be:<p><pre><code>  data = json.load(sys.stdin)
  commits = [
    e[&quot;commit&quot;] 
    for e in data 
    if e[&quot;commit&quot;][&quot;author&quot;] == &quot;Tom Hudson&quot;
  ]
  json.dump(commits, sys.stdout)</code></pre></div><br/><div id="37415563" class="c"><input type="checkbox" id="c-37415563" checked=""/><div class="controls bullet"><span class="by">fodkodrasz</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414315">parent</a><span>|</span><a href="#37414339">next</a><span>|</span><label class="collapse" for="c-37415563">[-]</label><label class="expand" for="c-37415563">[1 more]</label></div><br/><div class="children"><div class="content">This is a non-problem solved by the jq example. Clearly nobody sane writes (or consumes) APIs which sometimes produce array of object, sometimes produce singular objects of the same shape... Or maybe I&#x27;m spoiled from using typed languages and cannot see the ingenuity of the python&#x2F;javascript&#x2F;other-untyped-hyped-lang api authors that it solves?</div><br/></div></div><div id="37414339" class="c"><input type="checkbox" id="c-37414339" checked=""/><div class="controls bullet"><span class="by">rtpg</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414315">parent</a><span>|</span><a href="#37415563">prev</a><span>|</span><a href="#37414662">next</a><span>|</span><label class="collapse" for="c-37414339">[-]</label><label class="expand" for="c-37414339">[1 more]</label></div><br/><div class="children"><div class="content">Oops, yep totally. Even more futzy! Think if I was doing this a lot I&#x27;d totally pull out one of those &quot;dict wrappers that allow for attr-based access&quot; that lots of projects end up writing for whatever reason</div><br/></div></div></div></div><div id="37414662" class="c"><input type="checkbox" id="c-37414662" checked=""/><div class="controls bullet"><span class="by">Spivak</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414242">parent</a><span>|</span><a href="#37414315">prev</a><span>|</span><a href="#37413762">next</a><span>|</span><label class="collapse" for="c-37414662">[-]</label><label class="expand" for="c-37414662">[3 more]</label></div><br/><div class="children"><div class="content">jmespath is your friend for this<p><pre><code>    import jmespath
    import json

    doc = json.load(sys.stdin)
    print(jmespath.search(&quot;[?commit.author == `Tom Hudson`].commit&quot;, doc))
</code></pre>
I wish it had won over jq because JMESPath is a spec with multiple implementations and a test suite where jq is... well jq and languages have bindings not independent implementations.</div><br/><div id="37414751" class="c"><input type="checkbox" id="c-37414751" checked=""/><div class="controls bullet"><span class="by">cryptonector</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414662">parent</a><span>|</span><a href="#37415237">next</a><span>|</span><label class="collapse" for="c-37414751">[-]</label><label class="expand" for="c-37414751">[1 more]</label></div><br/><div class="children"><div class="content">`import jmespath` is a lot like importing jq...<p>&gt; I wish it had won over jq because JMESPath is a spec with multiple implementations and a test suite where jq is... well jq and languages have bindings not independent implementations.<p>jq has multiple implementations too!  In Go, Rust, Java, and... in jq itself.</div><br/></div></div><div id="37415237" class="c"><input type="checkbox" id="c-37415237" checked=""/><div class="controls bullet"><span class="by">rtpg</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414662">parent</a><span>|</span><a href="#37414751">prev</a><span>|</span><a href="#37413762">next</a><span>|</span><label class="collapse" for="c-37415237">[-]</label><label class="expand" for="c-37415237">[1 more]</label></div><br/><div class="children"><div class="content">jmespath does look like an interesting thing. Wish it weren&#x27;t stringly-typed but that is a bit unavoidable.</div><br/></div></div></div></div></div></div></div></div><div id="37413762" class="c"><input type="checkbox" id="c-37413762" checked=""/><div class="controls bullet"><span class="by">lathiat</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37413721">parent</a><span>|</span><a href="#37413971">prev</a><span>|</span><a href="#37415502">next</a><span>|</span><label class="collapse" for="c-37413762">[-]</label><label class="expand" for="c-37413762">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve found Ruby much nicer for writing dirty parsing logic like this in a &quot;real&quot; language, it lets you be more terse and &quot;DRY&quot; than Python. Which in bigger software projects doesn&#x27;t hurt me as much but when I&#x27;m primarily trying to write something that otherwise would be well handled by SQL or JQ I found Ruby the better middleground for me.</div><br/></div></div></div></div></div></div><div id="37415502" class="c"><input type="checkbox" id="c-37415502" checked=""/><div class="controls bullet"><span class="by">irjustin</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37413704">parent</a><span>|</span><a href="#37413712">prev</a><span>|</span><a href="#37414067">next</a><span>|</span><label class="collapse" for="c-37415502">[-]</label><label class="expand" for="c-37415502">[1 more]</label></div><br/><div class="children"><div class="content">&gt; But for me, it ranks right next to regex in terms of &quot;things I (don&#x27;t) want to see in my code.&quot;<p>Yeah if you don&#x27;t like jq you likely won&#x27;t like Regex, xpath, etc. Any syntax that is incredibly terse and complex.<p>Like Regex though, jq is too powerful to ignore and many times the best tool to use.</div><br/></div></div><div id="37414067" class="c"><input type="checkbox" id="c-37414067" checked=""/><div class="controls bullet"><span class="by">nikau</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37413704">parent</a><span>|</span><a href="#37415502">prev</a><span>|</span><a href="#37413751">next</a><span>|</span><label class="collapse" for="c-37414067">[-]</label><label class="expand" for="c-37414067">[2 more]</label></div><br/><div class="children"><div class="content">Use gron for adhoc, then jq to script once you know what you need to do.</div><br/><div id="37414779" class="c"><input type="checkbox" id="c-37414779" checked=""/><div class="controls bullet"><span class="by">goku12</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414067">parent</a><span>|</span><a href="#37413751">next</a><span>|</span><label class="collapse" for="c-37414779">[-]</label><label class="expand" for="c-37414779">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m going to leave a mention of jless [1] as well here. The purpose should be obvious from the name.<p>[1] <a href="https:&#x2F;&#x2F;jless.io&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;jless.io&#x2F;</a></div><br/></div></div></div></div><div id="37414014" class="c"><input type="checkbox" id="c-37414014" checked=""/><div class="controls bullet"><span class="by">papichulo2023</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37413704">parent</a><span>|</span><a href="#37413751">prev</a><span>|</span><a href="#37414847">next</a><span>|</span><label class="collapse" for="c-37414014">[-]</label><label class="expand" for="c-37414014">[14 more]</label></div><br/><div class="children"><div class="content">Community refuses to admit that powershell is much better alternative to bash&#x2F;python combo and here we are stuck in this mess.CI&#x2F;CD scripts spaguetti is usually the most unstable piece of code in a company.</div><br/><div id="37414236" class="c"><input type="checkbox" id="c-37414236" checked=""/><div class="controls bullet"><span class="by">dragonwriter</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414014">parent</a><span>|</span><a href="#37415844">next</a><span>|</span><label class="collapse" for="c-37414236">[-]</label><label class="expand" for="c-37414236">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Community refuses to admit that powershell is much better alternative to bash&#x2F;python combo<p>Because its not.<p>Powershell is very nice as a glue language for .NET components, and its better as a general purpose shell&#x2F;scripting language than the old DOS-inspired Windows Command Prompt, for sure.</div><br/></div></div><div id="37415844" class="c"><input type="checkbox" id="c-37415844" checked=""/><div class="controls bullet"><span class="by">majkinetor</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414014">parent</a><span>|</span><a href="#37414236">prev</a><span>|</span><a href="#37414204">next</a><span>|</span><label class="collapse" for="c-37415844">[-]</label><label class="expand" for="c-37415844">[1 more]</label></div><br/><div class="children"><div class="content">Apparently, the old community need to literary die with their old habits for new to take place. There is no amount of good argumentation that can be fruitful here. And there is tone of it, pwsh is simply on another level then existing combos.</div><br/></div></div><div id="37414204" class="c"><input type="checkbox" id="c-37414204" checked=""/><div class="controls bullet"><span class="by">chrnola</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414014">parent</a><span>|</span><a href="#37415844">prev</a><span>|</span><a href="#37414109">next</a><span>|</span><label class="collapse" for="c-37414204">[-]</label><label class="expand" for="c-37414204">[1 more]</label></div><br/><div class="children"><div class="content">Yeah agreed, especially now that PowerShell is available cross-platform.<p>Nushell[1] also seems like a promising alternative, but I havenât had a chance to play with it yet.<p>[1]: <a href="https:&#x2F;&#x2F;www.nushell.sh&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.nushell.sh&#x2F;</a></div><br/></div></div><div id="37414109" class="c"><input type="checkbox" id="c-37414109" checked=""/><div class="controls bullet"><span class="by">MassiveBonk51</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414014">parent</a><span>|</span><a href="#37414204">prev</a><span>|</span><a href="#37414318">next</a><span>|</span><label class="collapse" for="c-37414109">[-]</label><label class="expand" for="c-37414109">[6 more]</label></div><br/><div class="children"><div class="content">Why does it have to be bash+python? I&#x27;m finding myself using node.js scripts glued together by bash ones these days unless I&#x27;m working on a lot of data. Doing that means you can work with json natively.</div><br/><div id="37414193" class="c"><input type="checkbox" id="c-37414193" checked=""/><div class="controls bullet"><span class="by">rtpg</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414109">parent</a><span>|</span><a href="#37414333">next</a><span>|</span><label class="collapse" for="c-37414193">[-]</label><label class="expand" for="c-37414193">[1 more]</label></div><br/><div class="children"><div class="content">`json.loads` in Python exists, and Python does the intuitive thing when you do `{&quot;a&quot;: 1} == {&quot;a&quot;: 1}`, at least for most purposes (you want the other option? `is` is right there!). Stuff like argparse is not the easiest thing to use but it&#x27;s in the standard library and relatively easy to use as well.<p>Not going to outright say that node.js scripts are the worst thing ever (they&#x27;re not), but out-of-the-box Python is totally underrated (except on MacOS where `urllib` fails with some opaque errors untill you run some random script to deal with certs)</div><br/></div></div><div id="37414333" class="c"><input type="checkbox" id="c-37414333" checked=""/><div class="controls bullet"><span class="by">claytongulick</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414109">parent</a><span>|</span><a href="#37414193">prev</a><span>|</span><a href="#37414318">next</a><span>|</span><label class="collapse" for="c-37414333">[-]</label><label class="expand" for="c-37414333">[4 more]</label></div><br/><div class="children"><div class="content">I love nodejs, it&#x27;s my go-to language for server side stuff.<p>Even with that bias though, I have to admit that it&#x27;s awful for typical command line script stuff.<p>Dealing with async and streams and stuff for parsing csv files is miserable (I just wrote some stuff to parse and process hundreds of gigs of files in node, and it wasn&#x27;t fun).<p>Python is the right tool for that job IMHO.<p>Also, weirdly, maybe golang? I just came across this [1] and it has one of my eyebrows cocked.<p>[1] <a href="https:&#x2F;&#x2F;bitfieldconsulting.com&#x2F;golang&#x2F;scripting" rel="nofollow noreferrer">https:&#x2F;&#x2F;bitfieldconsulting.com&#x2F;golang&#x2F;scripting</a></div><br/><div id="37415862" class="c"><input type="checkbox" id="c-37415862" checked=""/><div class="controls bullet"><span class="by">majkinetor</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414333">parent</a><span>|</span><a href="#37415654">next</a><span>|</span><label class="collapse" for="c-37415862">[-]</label><label class="expand" for="c-37415862">[1 more]</label></div><br/><div class="children"><div class="content">Any not-designed-specifically-for-shell language will suck for shell, more or less. Ruby, python, node, whatever, they all have the same problem - you write stuff too much and care about stuff you shouldn&#x27;t care while in shell.</div><br/></div></div><div id="37415654" class="c"><input type="checkbox" id="c-37415654" checked=""/><div class="controls bullet"><span class="by">avarun</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414333">parent</a><span>|</span><a href="#37415862">prev</a><span>|</span><a href="#37414522">next</a><span>|</span><label class="collapse" for="c-37415654">[-]</label><label class="expand" for="c-37415654">[1 more]</label></div><br/><div class="children"><div class="content">Ruby is the clear answer here. The fact that more people don&#x27;t use it for this purpose (its intended purpose!) is a travesty.</div><br/></div></div><div id="37414522" class="c"><input type="checkbox" id="c-37414522" checked=""/><div class="controls bullet"><span class="by">MassiveBonk51</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414333">parent</a><span>|</span><a href="#37415654">prev</a><span>|</span><a href="#37414318">next</a><span>|</span><label class="collapse" for="c-37414522">[-]</label><label class="expand" for="c-37414522">[1 more]</label></div><br/><div class="children"><div class="content">You&#x27;re probably right. I just wish there was an easier way to handle json on the command line that didn&#x27;t turn into its own dsl. The golang scripting seems interesting, might be what motivates me to learn the language.</div><br/></div></div></div></div></div></div><div id="37414318" class="c"><input type="checkbox" id="c-37414318" checked=""/><div class="controls bullet"><span class="by">claytongulick</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414014">parent</a><span>|</span><a href="#37414109">prev</a><span>|</span><a href="#37414847">next</a><span>|</span><label class="collapse" for="c-37414318">[-]</label><label class="expand" for="c-37414318">[4 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not going to defend my opinion on powershell, because it&#x27;s indefensible and arbitrary.<p>I just can&#x27;t stand title case, and Microsoft&#x2F;.net absolutely love it. Everything in power shell is DoSomethingLikeThis.<p>Powershell is a great piece of tech that I just can&#x27;t use because I&#x27;m old and grumpy and like snake or kebob casing.<p>I&#x27;ve never tried it on Linux though, so maybe it&#x27;s different there?</div><br/><div id="37415117" class="c"><input type="checkbox" id="c-37415117" checked=""/><div class="controls bullet"><span class="by">haltcase</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414318">parent</a><span>|</span><a href="#37414847">next</a><span>|</span><label class="collapse" for="c-37415117">[-]</label><label class="expand" for="c-37415117">[3 more]</label></div><br/><div class="children"><div class="content">In this case, you might be glad to learn that PowerShell is case-insensitive, even for CLR methods.</div><br/><div id="37415525" class="c"><input type="checkbox" id="c-37415525" checked=""/><div class="controls bullet"><span class="by">cwalv</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37415117">parent</a><span>|</span><a href="#37414847">next</a><span>|</span><label class="collapse" for="c-37415525">[-]</label><label class="expand" for="c-37415525">[2 more]</label></div><br/><div class="children"><div class="content">Are underscores&#x2F;dashes coalesced out too?</div><br/><div id="37415863" class="c"><input type="checkbox" id="c-37415863" checked=""/><div class="controls bullet"><span class="by">majkinetor</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37415525">parent</a><span>|</span><a href="#37414847">next</a><span>|</span><label class="collapse" for="c-37415863">[-]</label><label class="expand" for="c-37415863">[1 more]</label></div><br/><div class="children"><div class="content">There are aliases, you can name things with a letter if you want. There are even good ones OTB.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="37414847" class="c"><input type="checkbox" id="c-37414847" checked=""/><div class="controls bullet"><span class="by">alexvitkov</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37413704">parent</a><span>|</span><a href="#37414014">prev</a><span>|</span><a href="#37414564">next</a><span>|</span><label class="collapse" for="c-37414847">[-]</label><label class="expand" for="c-37414847">[2 more]</label></div><br/><div class="children"><div class="content">The fact that you have to learn a new language to parse JSON is frankly insulting. If you&#x27;ve gotten to the point you&#x27;re parsing JSON with a shell script, you should&#x27;ve switched to a real language a week ago.<p>Some people are weird and awe at the ellegance of piping 8 obscure commands, but if I&#x27;m given this shit and have to keep it working, I&#x27;m rewriting it on the spot.</div><br/><div id="37415576" class="c"><input type="checkbox" id="c-37415576" checked=""/><div class="controls bullet"><span class="by">cwalv</span><span>|</span><a href="#37413354">root</a><span>|</span><a href="#37414847">parent</a><span>|</span><a href="#37414564">next</a><span>|</span><label class="collapse" for="c-37415576">[-]</label><label class="expand" for="c-37415576">[1 more]</label></div><br/><div class="children"><div class="content">Are you rewriting it in the first language you learned?<p>Sometimes less general tools are nice. If they fit the problem space well, they can be very expressive without feeling unwieldy. And in some contexts reducing the power&#x2F;expressivity is actually a good thing (e.g. not using a C interpreter to make your program and your config file use the same &#x27;language&#x27;)</div><br/></div></div></div></div></div></div><div id="37414564" class="c"><input type="checkbox" id="c-37414564" checked=""/><div class="controls bullet"><span class="by">dekelpilli</span><span>|</span><a href="#37413354">parent</a><span>|</span><a href="#37413704">prev</a><span>|</span><a href="#37415532">next</a><span>|</span><label class="collapse" for="c-37414564">[-]</label><label class="expand" for="c-37414564">[1 more]</label></div><br/><div class="children"><div class="content">Just adding that a JQ implementation already exists on the JVM[1], although it&#x27;s not 100% complete.<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;eiiches&#x2F;jackson-jq">https:&#x2F;&#x2F;github.com&#x2F;eiiches&#x2F;jackson-jq</a></div><br/></div></div></div></div><div id="37415532" class="c"><input type="checkbox" id="c-37415532" checked=""/><div class="controls bullet"><span class="by">ithkuil</span><span>|</span><a href="#37413354">prev</a><span>|</span><a href="#37413134">next</a><span>|</span><label class="collapse" for="c-37415532">[-]</label><label class="expand" for="c-37415532">[10 more]</label></div><br/><div class="children"><div class="content">One of the reasons I like&#x2F;tolerate jq is that it&#x27;s stable, i.e scripts written for it a few years ago still work the same today.<p>I have some code around for yq instead that keep breaking because yq keeps improving in non backward compatible ways (I didn&#x27;t investigate how often yq introduced backwards incompatible changes, but the issue affected me several times in unrelated places, CI scripts or whatnot, that by their nature end up running with different versions of base tooling and update them at various pace)<p>I was always thus grateful to the great wisdom of the jq maintainers for their understanding of the importance of backwards compatibility.<p>I hope this announcement doesn&#x27;t mean that this stability was just an accidental side product of stagnation and that once stagnation is &quot;fixed&quot; it will be done at the expense of stability.</div><br/><div id="37416225" class="c"><input type="checkbox" id="c-37416225" checked=""/><div class="controls bullet"><span class="by">wwader</span><span>|</span><a href="#37415532">parent</a><span>|</span><a href="#37415717">next</a><span>|</span><label class="collapse" for="c-37416225">[-]</label><label class="expand" for="c-37416225">[3 more]</label></div><br/><div class="children"><div class="content">Hey! as one of the maintainers i can safely say that we take backwards compatibility very seriously</div><br/><div id="37416337" class="c"><input type="checkbox" id="c-37416337" checked=""/><div class="controls bullet"><span class="by">ithkuil</span><span>|</span><a href="#37415532">root</a><span>|</span><a href="#37416225">parent</a><span>|</span><a href="#37415717">next</a><span>|</span><label class="collapse" for="c-37416337">[-]</label><label class="expand" for="c-37416337">[2 more]</label></div><br/><div class="children"><div class="content">awesome! Any plans for jq to get native support for YAML?</div><br/><div id="37416368" class="c"><input type="checkbox" id="c-37416368" checked=""/><div class="controls bullet"><span class="by">wwader</span><span>|</span><a href="#37415532">root</a><span>|</span><a href="#37416337">parent</a><span>|</span><a href="#37415717">next</a><span>|</span><label class="collapse" for="c-37416368">[-]</label><label class="expand" for="c-37416368">[1 more]</label></div><br/><div class="children"><div class="content">Nothing planned but there has been some talks about it. <a href="https:&#x2F;&#x2F;github.com&#x2F;jqlang&#x2F;jq&#x2F;issues&#x2F;2855">https:&#x2F;&#x2F;github.com&#x2F;jqlang&#x2F;jq&#x2F;issues&#x2F;2855</a> is probably the lastest issue mentioning it</div><br/></div></div></div></div></div></div><div id="37415717" class="c"><input type="checkbox" id="c-37415717" checked=""/><div class="controls bullet"><span class="by">El_RIDO</span><span>|</span><a href="#37415532">parent</a><span>|</span><a href="#37416225">prev</a><span>|</span><a href="#37416150">next</a><span>|</span><label class="collapse" for="c-37415717">[-]</label><label class="expand" for="c-37415717">[1 more]</label></div><br/><div class="children"><div class="content">Reg. yq&#x2F;jq incompatibility - unsurprisingly there are many projects that provide yq functionality as wrappers around jq. To list but a few:<p>- <a href="https:&#x2F;&#x2F;kislyuk.github.io&#x2F;yq&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;kislyuk.github.io&#x2F;yq&#x2F;</a><p>- <a href="https:&#x2F;&#x2F;github.com&#x2F;kyle-long&#x2F;yq#yq">https:&#x2F;&#x2F;github.com&#x2F;kyle-long&#x2F;yq#yq</a><p>- <a href="https:&#x2F;&#x2F;github.com&#x2F;up1&#x2F;yq-1#yq-command-line-yamlxml-processor---jq-wrapper-for-yaml-and-xml-documents">https:&#x2F;&#x2F;github.com&#x2F;up1&#x2F;yq-1#yq-command-line-yamlxml-processo...</a><p>- <a href="https:&#x2F;&#x2F;github.com&#x2F;onixspot&#x2F;yq-2#yq-command-line-yamlxmltoml-processor---jq-wrapper-for-yaml-xml-toml-documents">https:&#x2F;&#x2F;github.com&#x2F;onixspot&#x2F;yq-2#yq-command-line-yamlxmltoml...</a><p>- <a href="https:&#x2F;&#x2F;github.com&#x2F;simonrupf&#x2F;convert2json#convert2json">https:&#x2F;&#x2F;github.com&#x2F;simonrupf&#x2F;convert2json#convert2json</a></div><br/></div></div><div id="37416150" class="c"><input type="checkbox" id="c-37416150" checked=""/><div class="controls bullet"><span class="by">sumek83</span><span>|</span><a href="#37415532">parent</a><span>|</span><a href="#37415717">prev</a><span>|</span><a href="#37415823">next</a><span>|</span><label class="collapse" for="c-37416150">[-]</label><label class="expand" for="c-37416150">[3 more]</label></div><br/><div class="children"><div class="content">&quot;Improving in non backwards compatible way&quot; sounds like &quot;deteriorate&quot;</div><br/><div id="37416299" class="c"><input type="checkbox" id="c-37416299" checked=""/><div class="controls bullet"><span class="by">dividedbyzero</span><span>|</span><a href="#37415532">root</a><span>|</span><a href="#37416150">parent</a><span>|</span><a href="#37416334">next</a><span>|</span><label class="collapse" for="c-37416299">[-]</label><label class="expand" for="c-37416299">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s a very negative view. If Excel were to fix their 1900-is-a-leap-year bug, I&#x27;d call that a clear improvement, even though it would break some spreadsheets that work around the bug. Seen through that lens every major version of almost all programming languages would be a deterioration.</div><br/></div></div><div id="37416334" class="c"><input type="checkbox" id="c-37416334" checked=""/><div class="controls bullet"><span class="by">ithkuil</span><span>|</span><a href="#37415532">root</a><span>|</span><a href="#37416150">parent</a><span>|</span><a href="#37416299">prev</a><span>|</span><a href="#37415823">next</a><span>|</span><label class="collapse" for="c-37416334">[-]</label><label class="expand" for="c-37416334">[1 more]</label></div><br/><div class="children"><div class="content">yes I tried to not be too aggressive towards yq&#x27;s authors who surely don&#x27;t deserve bad words, but at the same time I wanted to express how painful is even the smallest backwards incompatible change to a tool that may end up being used in many tiny dark corners of your automation that everybody forgets to maintain.</div><br/></div></div></div></div><div id="37415823" class="c"><input type="checkbox" id="c-37415823" checked=""/><div class="controls bullet"><span class="by">ainar-g</span><span>|</span><a href="#37415532">parent</a><span>|</span><a href="#37416150">prev</a><span>|</span><a href="#37413134">next</a><span>|</span><label class="collapse" for="c-37415823">[-]</label><label class="expand" for="c-37415823">[2 more]</label></div><br/><div class="children"><div class="content">What are you using yq for?  Unless you use YAML-only features (e.g. integers, arrays, and objects as object keys), it seems like it would be easier to just pipe-convert your YAML to JSON and process it with jq.</div><br/><div id="37416321" class="c"><input type="checkbox" id="c-37416321" checked=""/><div class="controls bullet"><span class="by">dividedbyzero</span><span>|</span><a href="#37415532">root</a><span>|</span><a href="#37415823">parent</a><span>|</span><a href="#37413134">next</a><span>|</span><label class="collapse" for="c-37416321">[-]</label><label class="expand" for="c-37416321">[1 more]</label></div><br/><div class="children"><div class="content">Not them but I use it in a few places to make automated edits to yaml files.</div><br/></div></div></div></div></div></div><div id="37413134" class="c"><input type="checkbox" id="c-37413134" checked=""/><div class="controls bullet"><span class="by">nikolay</span><span>|</span><a href="#37415532">prev</a><span>|</span><a href="#37413422">next</a><span>|</span><label class="collapse" for="c-37413134">[-]</label><label class="expand" for="c-37413134">[15 more]</label></div><br/><div class="children"><div class="content">I love jq, but I also use JMESPath (especially with AWS CLI), yq (bundled with tomlq and xq as well), and dasel [2]. I also wish hclq [3] wasn&#x27;t so dead!<p>[0]: <a href="https:&#x2F;&#x2F;jmespath.org&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;jmespath.org&#x2F;</a><p>[1]: <a href="https:&#x2F;&#x2F;kislyuk.github.io&#x2F;yq&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;kislyuk.github.io&#x2F;yq&#x2F;</a><p>[2]: <a href="https:&#x2F;&#x2F;github.com&#x2F;TomWright&#x2F;dasel">https:&#x2F;&#x2F;github.com&#x2F;TomWright&#x2F;dasel</a><p>[3]: <a href="https:&#x2F;&#x2F;hclq.sh&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;hclq.sh&#x2F;</a></div><br/><div id="37413342" class="c"><input type="checkbox" id="c-37413342" checked=""/><div class="controls bullet"><span class="by">js2</span><span>|</span><a href="#37413134">parent</a><span>|</span><a href="#37413234">next</a><span>|</span><label class="collapse" for="c-37413342">[-]</label><label class="expand" for="c-37413342">[10 more]</label></div><br/><div class="children"><div class="content">Make JSON greppable!<p><a href="https:&#x2F;&#x2F;github.com&#x2F;tomnomnom&#x2F;gron">https:&#x2F;&#x2F;github.com&#x2F;tomnomnom&#x2F;gron</a><p>I&#x27;ve been using `jq` for years and I&#x27;m always able to cobble together what I need, but I have yet to find it intuitive and I&#x27;m rarely able to arrive at a solution of any complexity without spending a lot of time reading its documentation. I wish I found it easier to use. :-(</div><br/><div id="37413651" class="c"><input type="checkbox" id="c-37413651" checked=""/><div class="controls bullet"><span class="by">lathiat</span><span>|</span><a href="#37413134">root</a><span>|</span><a href="#37413342">parent</a><span>|</span><a href="#37413688">next</a><span>|</span><label class="collapse" for="c-37413651">[-]</label><label class="expand" for="c-37413651">[4 more]</label></div><br/><div class="children"><div class="content">I also love gron, if nothing else to find the paths I need to use with jq later.<p>But ChatGPT has genuinely solved my suffering writing jq, it does a pretty good job. It even almost replaces gron, if you feed it an exmaple json and ask for jq, it gives you something. It usually needs a little adjusting but it gets me 90% of the way there and saves me a bit of time.<p>I rarely use it for much else but its a jq winner :)</div><br/><div id="37413884" class="c"><input type="checkbox" id="c-37413884" checked=""/><div class="controls bullet"><span class="by">cryptonector</span><span>|</span><a href="#37413134">root</a><span>|</span><a href="#37413651">parent</a><span>|</span><a href="#37413688">next</a><span>|</span><label class="collapse" for="c-37413884">[-]</label><label class="expand" for="c-37413884">[3 more]</label></div><br/><div class="children"><div class="content">jq can be used trivially to approach gron-like output:<p><pre><code>  jq -r &#x27;paths(scalars) as $p | getpath($p) | &quot;\($p|join(&quot;.&quot;)) = \(.)&quot;&#x27;
</code></pre>
See elsewhere in this subthread for a full gron implementation in jq.</div><br/><div id="37414075" class="c"><input type="checkbox" id="c-37414075" checked=""/><div class="controls bullet"><span class="by">nikau</span><span>|</span><a href="#37413134">root</a><span>|</span><a href="#37413884">parent</a><span>|</span><a href="#37413688">next</a><span>|</span><label class="collapse" for="c-37414075">[-]</label><label class="expand" for="c-37414075">[2 more]</label></div><br/><div class="children"><div class="content">&#x27;Trivially&#x27;</div><br/><div id="37414747" class="c"><input type="checkbox" id="c-37414747" checked=""/><div class="controls bullet"><span class="by">cryptonector</span><span>|</span><a href="#37413134">root</a><span>|</span><a href="#37414075">parent</a><span>|</span><a href="#37413688">next</a><span>|</span><label class="collapse" for="c-37414747">[-]</label><label class="expand" for="c-37414747">[1 more]</label></div><br/><div class="children"><div class="content">Start with `jq -c &#x27;paths(scalars)` -- that&#x27;s pretty trivial.</div><br/></div></div></div></div></div></div></div></div><div id="37413688" class="c"><input type="checkbox" id="c-37413688" checked=""/><div class="controls bullet"><span class="by">akoboldfrying</span><span>|</span><a href="#37413134">root</a><span>|</span><a href="#37413342">parent</a><span>|</span><a href="#37413651">prev</a><span>|</span><a href="#37413871">next</a><span>|</span><label class="collapse" for="c-37413688">[-]</label><label class="expand" for="c-37413688">[3 more]</label></div><br/><div class="children"><div class="content">Looks handy, but I&#x27;d rather go the other way and extend grep (and diff, etc.) to also work on things that aren&#x27;t restricted to be lines in a text file. The number of times I&#x27;ve needed to go through contortions for things that should be easy solved problems (e.g., grepping for patterns of line <i>pairs</i>, grepping for records that use a different delimiter when the record data itself could contain linefeed, etc.)...</div><br/><div id="37413735" class="c"><input type="checkbox" id="c-37413735" checked=""/><div class="controls bullet"><span class="by">js2</span><span>|</span><a href="#37413134">root</a><span>|</span><a href="#37413688">parent</a><span>|</span><a href="#37413871">next</a><span>|</span><label class="collapse" for="c-37413735">[-]</label><label class="expand" for="c-37413735">[2 more]</label></div><br/><div class="children"><div class="content">Tip for pairs of lines. Use grep -A, -B, or -C to emit lines surrounding the first line to match, then pipe that into a second grep (also with -A, -B or -C). e.g.<p><pre><code>  grep -A1 foo | grep -B1 bar
</code></pre>
Will find a line with &quot;foo&quot; followed by a line with &quot;bar&quot; and emit both. Of course, it will also find a single line with both &quot;foo&quot; and &quot;bar&quot;, so it&#x27;s not perfect. This is a quick and dirty solution. Beyond that, break out sed and awk, or maybe the Practical Extraction and Report Language... it&#x27;s really good at that stuff.</div><br/><div id="37414389" class="c"><input type="checkbox" id="c-37414389" checked=""/><div class="controls bullet"><span class="by">akoboldfrying</span><span>|</span><a href="#37413134">root</a><span>|</span><a href="#37413735">parent</a><span>|</span><a href="#37413871">next</a><span>|</span><label class="collapse" for="c-37414389">[-]</label><label class="expand" for="c-37414389">[1 more]</label></div><br/><div class="children"><div class="content">Thanks, it&#x27;s a brittle hack as you acknowledge but at least there won&#x27;t be false negatives. Funny how often I wind up crawling back to Perl.<p>The problem here is literally that someone hardcoded &quot;IT&#x27;S ALWAYS LINEFEED&quot; into an algorithm that could work equally well with <i>any</i> record separator character -- in fact probably with any record separator <i>regex</i>. I notice there&#x27;s now `grep -z` which is one small step towards sanity... but the fully general problem is <i>so easy and so useful to solve</i> it&#x27;s exasperating.<p>I guess I should stop complaining and submit a patch to grep to add a `--dont-use-linefeed-instead-use &lt;arg&gt;` option already.</div><br/></div></div></div></div></div></div><div id="37413871" class="c"><input type="checkbox" id="c-37413871" checked=""/><div class="controls bullet"><span class="by">cryptonector</span><span>|</span><a href="#37413134">root</a><span>|</span><a href="#37413342">parent</a><span>|</span><a href="#37413688">prev</a><span>|</span><a href="#37413234">next</a><span>|</span><label class="collapse" for="c-37413871">[-]</label><label class="expand" for="c-37413871">[2 more]</label></div><br/><div class="children"><div class="content">You can trivially approximate gron with jq, and you there are jq implementations of gron too, like <a href="https:&#x2F;&#x2F;gist.github.com&#x2F;mkfmnn&#x2F;7b637aa0ec9b0422b3b75ec181a132fc" rel="nofollow noreferrer">https:&#x2F;&#x2F;gist.github.com&#x2F;mkfmnn&#x2F;7b637aa0ec9b0422b3b75ec181a13...</a><p>E.g.,<p><pre><code>  # gron
  gron &quot;https:&#x2F;&#x2F;api.github.com&#x2F;repos&#x2F;tomnomnom&#x2F;gron&#x2F;commits?per_page=1&quot; |
  fgrep commit.author
  json[0].commit.author = {};
  json[0].commit.author.date = &quot;2016-07-02T10:51:21Z&quot;;
  json[0].commit.author.email = &quot;mail@tomnomnom.com&quot;;
  json[0].commit.author.name = &quot;Tom Hudson&quot;;

  # jq
  curl -L &quot;https:&#x2F;&#x2F;api.github.com&#x2F;repos&#x2F;tomnomnom&#x2F;gron&#x2F;commits?per_page=1&quot; |
  jq -r &#x27;paths(scalars) as $p | getpath($p) | &quot;\($p|join(&quot;.&quot;)|select(contains(&quot;commit.author&quot;))) = \(.)&quot;&#x27;
  0.commit.author.name = Tom Hudson
  0.commit.author.email = mail@tomnomnom.com
  0.commit.author.date = 2022-04-13T14:23:37Z

  # jq with grep outside jq
  curl -L &quot;https:&#x2F;&#x2F;api.github.com&#x2F;repos&#x2F;tomnomnom&#x2F;gron&#x2F;commits?per_page=1&quot; |
  jq -r &#x27;paths(scalars) as $p | getpath($p) | &quot;\($p|join(&quot;.&quot;)) = \(.)&quot;&#x27; |
  fgrep commit.author
  0.commit.author.name = Tom Hudson
  0.commit.author.email = mail@tomnomnom.com
  0.commit.author.date = 2022-04-13T14:23:37Z
</code></pre>
With just a bit more work you can get it to output valid gron, and even to parse valid gron.</div><br/></div></div></div></div><div id="37413234" class="c"><input type="checkbox" id="c-37413234" checked=""/><div class="controls bullet"><span class="by">rmwaite</span><span>|</span><a href="#37413134">parent</a><span>|</span><a href="#37413342">prev</a><span>|</span><a href="#37413462">next</a><span>|</span><label class="collapse" for="c-37413234">[-]</label><label class="expand" for="c-37413234">[1 more]</label></div><br/><div class="children"><div class="content">I really like the JMESPath interactive tutorial page (<a href="https:&#x2F;&#x2F;jmespath.org&#x2F;tutorial.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;jmespath.org&#x2F;tutorial.html</a>). It helped me when I was first learning the syntax and I still go to it if I run into a particularly weird syntax that throws me off.</div><br/></div></div><div id="37413462" class="c"><input type="checkbox" id="c-37413462" checked=""/><div class="controls bullet"><span class="by">AndyKluger</span><span>|</span><a href="#37413134">parent</a><span>|</span><a href="#37413234">prev</a><span>|</span><a href="#37413530">next</a><span>|</span><label class="collapse" for="c-37413462">[-]</label><label class="expand" for="c-37413462">[1 more]</label></div><br/><div class="children"><div class="content">A couple more alternatives:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;kellyjonbrazil&#x2F;jello">https:&#x2F;&#x2F;github.com&#x2F;kellyjonbrazil&#x2F;jello</a><p><a href="https:&#x2F;&#x2F;github.com&#x2F;wwkimball&#x2F;yamlpath">https:&#x2F;&#x2F;github.com&#x2F;wwkimball&#x2F;yamlpath</a></div><br/></div></div><div id="37413530" class="c"><input type="checkbox" id="c-37413530" checked=""/><div class="controls bullet"><span class="by">commotionfever</span><span>|</span><a href="#37413134">parent</a><span>|</span><a href="#37413462">prev</a><span>|</span><a href="#37413422">next</a><span>|</span><label class="collapse" for="c-37413530">[-]</label><label class="expand" for="c-37413530">[2 more]</label></div><br/><div class="children"><div class="content">on a similar note I wrote little tool to convert from many formats to many formats<p>the biggest usecase for me is taking some csv, toml, xml, whatever and converting that to json so I can pipe to jq<p><a href="https:&#x2F;&#x2F;github.com&#x2F;sentriz&#x2F;rsl">https:&#x2F;&#x2F;github.com&#x2F;sentriz&#x2F;rsl</a></div><br/><div id="37413886" class="c"><input type="checkbox" id="c-37413886" checked=""/><div class="controls bullet"><span class="by">cryptonector</span><span>|</span><a href="#37413134">root</a><span>|</span><a href="#37413530">parent</a><span>|</span><a href="#37413422">next</a><span>|</span><label class="collapse" for="c-37413886">[-]</label><label class="expand" for="c-37413886">[1 more]</label></div><br/><div class="children"><div class="content">Nice!!</div><br/></div></div></div></div></div></div><div id="37413422" class="c"><input type="checkbox" id="c-37413422" checked=""/><div class="controls bullet"><span class="by">tambourine_man</span><span>|</span><a href="#37413134">prev</a><span>|</span><a href="#37413707">next</a><span>|</span><label class="collapse" for="c-37413422">[-]</label><label class="expand" for="c-37413422">[5 more]</label></div><br/><div class="children"><div class="content">If youâre like me and use jq infrequently enough that you have to consult the documentation every time, try gron. Itâs greppable json<p><a href="https:&#x2F;&#x2F;github.com&#x2F;tomnomnom&#x2F;gron">https:&#x2F;&#x2F;github.com&#x2F;tomnomnom&#x2F;gron</a></div><br/><div id="37414640" class="c"><input type="checkbox" id="c-37414640" checked=""/><div class="controls bullet"><span class="by">preommr</span><span>|</span><a href="#37413422">parent</a><span>|</span><a href="#37413516">next</a><span>|</span><label class="collapse" for="c-37414640">[-]</label><label class="expand" for="c-37414640">[2 more]</label></div><br/><div class="children"><div class="content">Wow, that&#x27;s a pretty cool - so simple but so useful.<p>I&#x27;ll also share that I&#x27;ve been using `curl cheat.sh&#x2F;jq` (cheat.sh in general is a great resource) for years.<p>Although now I&#x27;d probably use something like chatgpt.</div><br/><div id="37415128" class="c"><input type="checkbox" id="c-37415128" checked=""/><div class="controls bullet"><span class="by">jkrubin</span><span>|</span><a href="#37413422">root</a><span>|</span><a href="#37414640">parent</a><span>|</span><a href="#37413516">next</a><span>|</span><label class="collapse" for="c-37415128">[-]</label><label class="expand" for="c-37415128">[1 more]</label></div><br/><div class="children"><div class="content">Chad is super helpful with jq!</div><br/></div></div></div></div><div id="37413516" class="c"><input type="checkbox" id="c-37413516" checked=""/><div class="controls bullet"><span class="by">Galanwe</span><span>|</span><a href="#37413422">parent</a><span>|</span><a href="#37414640">prev</a><span>|</span><a href="#37413707">next</a><span>|</span><label class="collapse" for="c-37413516">[-]</label><label class="expand" for="c-37413516">[2 more]</label></div><br/><div class="children"><div class="content">Damn thats incredibly well thought!<p>You can even `gron | grep | sed | gron -u`.<p>Awesome tool thanks for sharing.</div><br/><div id="37416386" class="c"><input type="checkbox" id="c-37416386" checked=""/><div class="controls bullet"><span class="by">zimpenfish</span><span>|</span><a href="#37413422">root</a><span>|</span><a href="#37413516">parent</a><span>|</span><a href="#37413707">next</a><span>|</span><label class="collapse" for="c-37416386">[-]</label><label class="expand" for="c-37416386">[1 more]</label></div><br/><div class="children"><div class="content">I do this for archiving my YouTube watchlist into git - all the video&#x2F;thumbnail&#x2F;subtitle URLs are dynamic with expiry which makes them pointless to keep around.  A quick `gron | sed | gron -u` replaces them all with &quot;URL&quot; and my diffs are much smaller and happier now.</div><br/></div></div></div></div></div></div><div id="37413707" class="c"><input type="checkbox" id="c-37413707" checked=""/><div class="controls bullet"><span class="by">nikolay</span><span>|</span><a href="#37413422">prev</a><span>|</span><a href="#37412943">next</a><span>|</span><label class="collapse" for="c-37413707">[-]</label><label class="expand" for="c-37413707">[2 more]</label></div><br/><div class="children"><div class="content">In addition to my previous comment about jq-like tools, I want to share a couple other interesting tools, which I use alongside jq are jo [0] and jc [1].<p>[0]: <a href="https:&#x2F;&#x2F;github.com&#x2F;jpmens&#x2F;jo">https:&#x2F;&#x2F;github.com&#x2F;jpmens&#x2F;jo</a><p>[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;kellyjonbrazil&#x2F;jc">https:&#x2F;&#x2F;github.com&#x2F;kellyjonbrazil&#x2F;jc</a></div><br/><div id="37414827" class="c"><input type="checkbox" id="c-37414827" checked=""/><div class="controls bullet"><span class="by">goku12</span><span>|</span><a href="#37413707">parent</a><span>|</span><a href="#37412943">next</a><span>|</span><label class="collapse" for="c-37414827">[-]</label><label class="expand" for="c-37414827">[1 more]</label></div><br/><div class="children"><div class="content">And jless [1] and gron [2].<p>This is the first I&#x27;m hearing of gron, but adding here for completeness sake. Meanwhile, JSON seems to be becoming a standard for CLI tools. Ideal scenario would be if every CLI tool has a --json flag or something similar, so that jc is not needed anymore.<p>[1] <a href="https:&#x2F;&#x2F;jless.io&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;jless.io&#x2F;</a><p>[2] <a href="https:&#x2F;&#x2F;github.com&#x2F;tomnomnom&#x2F;gron">https:&#x2F;&#x2F;github.com&#x2F;tomnomnom&#x2F;gron</a></div><br/></div></div></div></div><div id="37412943" class="c"><input type="checkbox" id="c-37412943" checked=""/><div class="controls bullet"><span class="by">mtmail</span><span>|</span><a href="#37413707">prev</a><span>|</span><a href="#37414864">next</a><span>|</span><label class="collapse" for="c-37412943">[-]</label><label class="expand" for="c-37412943">[1 more]</label></div><br/><div class="children"><div class="content">Related last month &quot;First release of jq in 5 years&quot; <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=36951830">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=36951830</a><p>Huge fan, I use it all the time.</div><br/></div></div><div id="37414864" class="c"><input type="checkbox" id="c-37414864" checked=""/><div class="controls bullet"><span class="by">lwhsiao</span><span>|</span><a href="#37412943">prev</a><span>|</span><a href="#37412752">next</a><span>|</span><label class="collapse" for="c-37414864">[-]</label><label class="expand" for="c-37414864">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ll give a plug for jaq [0], a clone focused on correctness, speed, and simplicity. It only implements a subset of jq, but I&#x27;ve been enjoying it so far.<p>[0]: <a href="https:&#x2F;&#x2F;github.com&#x2F;01mf02&#x2F;jaq">https:&#x2F;&#x2F;github.com&#x2F;01mf02&#x2F;jaq</a></div><br/></div></div><div id="37412752" class="c"><input type="checkbox" id="c-37412752" checked=""/><div class="controls bullet"><span class="by">cryptonector</span><span>|</span><a href="#37414864">prev</a><span>|</span><a href="#37413491">next</a><span>|</span><label class="collapse" for="c-37412752">[-]</label><label class="expand" for="c-37412752">[1 more]</label></div><br/><div class="children"><div class="content">Woohoo!!  Finally!<p>It&#x27;s really awesome how the community pulled together and helped us recruit new maintainers to revive the project.  Special thanks to, well, all involved, but especially @stedolan, @itchyny, and @owenthereal (all GitHub usernames).</div><br/></div></div><div id="37413491" class="c"><input type="checkbox" id="c-37413491" checked=""/><div class="controls bullet"><span class="by">paradox460</span><span>|</span><a href="#37412752">prev</a><span>|</span><a href="#37414017">next</a><span>|</span><label class="collapse" for="c-37413491">[-]</label><label class="expand" for="c-37413491">[2 more]</label></div><br/><div class="children"><div class="content">jq and miller[1] are essential parts of my toolbelt, right up there with awk and vim.<p>[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;johnkerl&#x2F;miller">https:&#x2F;&#x2F;github.com&#x2F;johnkerl&#x2F;miller</a></div><br/><div id="37413825" class="c"><input type="checkbox" id="c-37413825" checked=""/><div class="controls bullet"><span class="by">porridgeraisin</span><span>|</span><a href="#37413491">parent</a><span>|</span><a href="#37414017">next</a><span>|</span><label class="collapse" for="c-37413825">[-]</label><label class="expand" for="c-37413825">[1 more]</label></div><br/><div class="children"><div class="content">Thanks for pointing me to miller. Too good.</div><br/></div></div></div></div><div id="37414017" class="c"><input type="checkbox" id="c-37414017" checked=""/><div class="controls bullet"><span class="by">black_puppydog</span><span>|</span><a href="#37413491">prev</a><span>|</span><a href="#37413616">next</a><span>|</span><label class="collapse" for="c-37414017">[-]</label><label class="expand" for="c-37414017">[4 more]</label></div><br/><div class="children"><div class="content">&gt; Adds new builtin pick(stream) to emit a projection of the input object or array.<p>&gt; jq -n &#x27;{&quot;a&quot;: 1, &quot;b&quot;: {&quot;c&quot;: 2, &quot;d&quot;: 3}, &quot;e&quot;: 4} | pick(.a, .b.c, .x)&#x27;<p>This is a godsend! Thanks to the contributors! &lt;3</div><br/><div id="37416305" class="c"><input type="checkbox" id="c-37416305" checked=""/><div class="controls bullet"><span class="by">wwader</span><span>|</span><a href="#37414017">parent</a><span>|</span><a href="#37414097">next</a><span>|</span><label class="collapse" for="c-37416305">[-]</label><label class="expand" for="c-37416305">[1 more]</label></div><br/><div class="children"><div class="content">If you don&#x27;t need to digg deep it&#x27;s also possible to do:<p><pre><code>  $ jq -n &#x27;{&quot;a&quot;: 1, &quot;b&quot;: {&quot;c&quot;: 2, &quot;d&quot;: 3}, &quot;e&quot;: 4} | {a, e}&#x27;  
  {
    &quot;a&quot;: 1,
    &quot;e&quot;: 4
  }</code></pre></div><br/></div></div><div id="37414097" class="c"><input type="checkbox" id="c-37414097" checked=""/><div class="controls bullet"><span class="by">nnutter</span><span>|</span><a href="#37414017">parent</a><span>|</span><a href="#37416305">prev</a><span>|</span><a href="#37414093">next</a><span>|</span><label class="collapse" for="c-37414097">[-]</label><label class="expand" for="c-37414097">[1 more]</label></div><br/><div class="children"><div class="content">I just installed from Git the other day to use this feature. Itâs very useful!</div><br/></div></div><div id="37414093" class="c"><input type="checkbox" id="c-37414093" checked=""/><div class="controls bullet"><span class="by">nivekastoreth</span><span>|</span><a href="#37414017">parent</a><span>|</span><a href="#37414097">prev</a><span>|</span><a href="#37413616">next</a><span>|</span><label class="collapse" for="c-37414093">[-]</label><label class="expand" for="c-37414093">[1 more]</label></div><br/><div class="children"><div class="content">This is a fantastic new feature. I would also love a version of âpickâ that works on streaming data, since that doesnât seem to be possible currently without reassembling the stream first</div><br/></div></div></div></div><div id="37413616" class="c"><input type="checkbox" id="c-37413616" checked=""/><div class="controls bullet"><span class="by">pyrolistical</span><span>|</span><a href="#37414017">prev</a><span>|</span><a href="#37414906">next</a><span>|</span><label class="collapse" for="c-37413616">[-]</label><label class="expand" for="c-37413616">[2 more]</label></div><br/><div class="children"><div class="content">Love jq. Solved many problems<p>But at one point I started write long jq modules and while it was pretty straightforward, there are less people familiar with jq.<p>So I declared jq bankruptcy and rewrote it as a nodejs script. The rest of the team was relived</div><br/><div id="37414019" class="c"><input type="checkbox" id="c-37414019" checked=""/><div class="controls bullet"><span class="by">cryptonector</span><span>|</span><a href="#37413616">parent</a><span>|</span><a href="#37414906">next</a><span>|</span><label class="collapse" for="c-37414019">[-]</label><label class="expand" for="c-37414019">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I started write long jq modules<p>If you&#x27;re writing long jq modules, you probably do want a different (faster, better) language.</div><br/></div></div></div></div><div id="37414906" class="c"><input type="checkbox" id="c-37414906" checked=""/><div class="controls bullet"><span class="by">faizshah</span><span>|</span><a href="#37413616">prev</a><span>|</span><a href="#37413816">next</a><span>|</span><label class="collapse" for="c-37414906">[-]</label><label class="expand" for="c-37414906">[2 more]</label></div><br/><div class="children"><div class="content">I wish there was a faster version of jq, I was only able to get a few mb&#x2F;s throughput out of jq vs few hundred mb&#x2F;s throughput out of ripgrep.<p>I often use ripgrep to setup quick bash pipelines for rapid data analysis, would love to be able to use jq for that purpose. These days I am setting up scripts with simdjson but the cost of writing a script vs quickly setting up jq or ripgrep in a bash pipeline are orders of magnitude different.</div><br/><div id="37414947" class="c"><input type="checkbox" id="c-37414947" checked=""/><div class="controls bullet"><span class="by">cryptonector</span><span>|</span><a href="#37414906">parent</a><span>|</span><a href="#37413816">next</a><span>|</span><label class="collapse" for="c-37414947">[-]</label><label class="expand" for="c-37414947">[1 more]</label></div><br/><div class="children"><div class="content">Did you try gojq or jaq?</div><br/></div></div></div></div><div id="37413816" class="c"><input type="checkbox" id="c-37413816" checked=""/><div class="controls bullet"><span class="by">wanderingmind</span><span>|</span><a href="#37414906">prev</a><span>|</span><a href="#37413736">next</a><span>|</span><label class="collapse" for="c-37413816">[-]</label><label class="expand" for="c-37413816">[2 more]</label></div><br/><div class="children"><div class="content">A slight tangential question. I use ripgrep-all along with fzf to interactively search through files from cli. Is it possible to integrate jq (or some equivalent) into this search ecosystem to search through json files?</div><br/><div id="37415680" class="c"><input type="checkbox" id="c-37415680" checked=""/><div class="controls bullet"><span class="by">lordgrenville</span><span>|</span><a href="#37413816">parent</a><span>|</span><a href="#37413736">next</a><span>|</span><label class="collapse" for="c-37415680">[-]</label><label class="expand" for="c-37415680">[1 more]</label></div><br/><div class="children"><div class="content">Yes <a href="https:&#x2F;&#x2F;gist.github.com&#x2F;reegnz&#x2F;b9e40993d410b75c2d866441add2cb55" rel="nofollow noreferrer">https:&#x2F;&#x2F;gist.github.com&#x2F;reegnz&#x2F;b9e40993d410b75c2d866441add2c...</a></div><br/></div></div></div></div><div id="37413736" class="c"><input type="checkbox" id="c-37413736" checked=""/><div class="controls bullet"><span class="by">dang</span><span>|</span><a href="#37413816">prev</a><span>|</span><a href="#37415926">next</a><span>|</span><label class="collapse" for="c-37413736">[-]</label><label class="expand" for="c-37413736">[1 more]</label></div><br/><div class="children"><div class="content">Recent and related:<p><i>First release of jq in 5 years</i> - <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=36951830">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=36951830</a> - Aug 2023 (27 comments)</div><br/></div></div><div id="37415926" class="c"><input type="checkbox" id="c-37415926" checked=""/><div class="controls bullet"><span class="by">kouru225</span><span>|</span><a href="#37413736">prev</a><span>|</span><a href="#37415847">next</a><span>|</span><label class="collapse" for="c-37415926">[-]</label><label class="expand" for="c-37415926">[1 more]</label></div><br/><div class="children"><div class="content">Reading âJQâ in this context makes me realize how terminally online Iâve been all these years</div><br/></div></div><div id="37415847" class="c"><input type="checkbox" id="c-37415847" checked=""/><div class="controls bullet"><span class="by">donatj</span><span>|</span><a href="#37415926">prev</a><span>|</span><a href="#37413263">next</a><span>|</span><label class="collapse" for="c-37415847">[-]</label><label class="expand" for="c-37415847">[1 more]</label></div><br/><div class="children"><div class="content">jq is a tool that is so powerful and useful it really should be made part of the POSIX standard. It should come with everything preinstalled. Itâs an amazing tool like that of an earlier more refined age.</div><br/></div></div><div id="37413263" class="c"><input type="checkbox" id="c-37413263" checked=""/><div class="controls bullet"><span class="by">jfoutz</span><span>|</span><a href="#37415847">prev</a><span>|</span><a href="#37413173">next</a><span>|</span><label class="collapse" for="c-37413263">[-]</label><label class="expand" for="c-37413263">[1 more]</label></div><br/><div class="children"><div class="content">jq is great. I don&#x27;t know how many times I&#x27;ve had to explain to engineers the invalid numeric literal error means your json is bad. no really, don&#x27;t trust me, copy it into the ide. it&#x27;s not jq. your message is malformed.<p>Strangely, I also have ECMA-404 and RFC8259 open in other tabs. mostly annoyance with the occasional flashes of anger over number formats and duplicate keys.</div><br/></div></div><div id="37413173" class="c"><input type="checkbox" id="c-37413173" checked=""/><div class="controls bullet"><span class="by">gobdovan</span><span>|</span><a href="#37413263">prev</a><span>|</span><a href="#37412777">next</a><span>|</span><label class="collapse" for="c-37413173">[-]</label><label class="expand" for="c-37413173">[2 more]</label></div><br/><div class="children"><div class="content">Thought this is an array programming language considering the name&#x27;s made out of J and Q. Nice util</div><br/><div id="37413645" class="c"><input type="checkbox" id="c-37413645" checked=""/><div class="controls bullet"><span class="by">fiddlerwoaroof</span><span>|</span><a href="#37413173">parent</a><span>|</span><a href="#37412777">next</a><span>|</span><label class="collapse" for="c-37413645">[-]</label><label class="expand" for="c-37413645">[1 more]</label></div><br/><div class="children"><div class="content">The way it works is sort of reminiscent of array programming.</div><br/></div></div></div></div><div id="37412777" class="c"><input type="checkbox" id="c-37412777" checked=""/><div class="controls bullet"><span class="by">saziba</span><span>|</span><a href="#37413173">prev</a><span>|</span><a href="#37414478">next</a><span>|</span><label class="collapse" for="c-37412777">[-]</label><label class="expand" for="c-37412777">[1 more]</label></div><br/><div class="children"><div class="content">I can&#x27;t stress enough how I love jq. It saved my life countless times as data engineer. Good job guys!</div><br/></div></div><div id="37414478" class="c"><input type="checkbox" id="c-37414478" checked=""/><div class="controls bullet"><span class="by">arwineap</span><span>|</span><a href="#37412777">prev</a><span>|</span><a href="#37414619">next</a><span>|</span><label class="collapse" for="c-37414478">[-]</label><label class="expand" for="c-37414478">[3 more]</label></div><br/><div class="children"><div class="content">The next killer feature for postman alternatives is integrated jq support for your json output.<p>Postman handles this especially poorly...</div><br/><div id="37414631" class="c"><input type="checkbox" id="c-37414631" checked=""/><div class="controls bullet"><span class="by">cryptonector</span><span>|</span><a href="#37414478">parent</a><span>|</span><a href="#37414619">next</a><span>|</span><label class="collapse" for="c-37414631">[-]</label><label class="expand" for="c-37414631">[2 more]</label></div><br/><div class="children"><div class="content">What is postman?</div><br/><div id="37415883" class="c"><input type="checkbox" id="c-37415883" checked=""/><div class="controls bullet"><span class="by">Omatic810</span><span>|</span><a href="#37414478">root</a><span>|</span><a href="#37414631">parent</a><span>|</span><a href="#37414619">next</a><span>|</span><label class="collapse" for="c-37415883">[-]</label><label class="expand" for="c-37415883">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s an API tool:
<a href="https:&#x2F;&#x2F;www.postman.com&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.postman.com&#x2F;</a></div><br/></div></div></div></div></div></div><div id="37414619" class="c"><input type="checkbox" id="c-37414619" checked=""/><div class="controls bullet"><span class="by">kenrose</span><span>|</span><a href="#37414478">prev</a><span>|</span><a href="#37415291">next</a><span>|</span><label class="collapse" for="c-37414619">[-]</label><label class="expand" for="c-37414619">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s great to see jq get some releases again.<p>It&#x27;s a big part of our check evaluation infra at OpsLevel.</div><br/></div></div><div id="37415291" class="c"><input type="checkbox" id="c-37415291" checked=""/><div class="controls bullet"><span class="by">thiht</span><span>|</span><a href="#37414619">prev</a><span>|</span><label class="collapse" for="c-37415291">[-]</label><label class="expand" for="c-37415291">[1 more]</label></div><br/><div class="children"><div class="content">These are great release notes. Looks like the project is in good hands</div><br/></div></div></div></div></div></div></div></body></html>