<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1707901257900" as="style"/><link rel="stylesheet" href="styles.css?v=1707901257900"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://pola.rs/posts/polars_birds_eye_view/">A bird&#x27;s eye view of Polars</a> <span class="domain">(<a href="https://pola.rs">pola.rs</a>)</span></div><div class="subtext"><span>rbanffy</span> | <span>64 comments</span></div><br/><div><div id="39367701" class="c"><input type="checkbox" id="c-39367701" checked=""/><div class="controls bullet"><span class="by">finalfire</span><span>|</span><a href="#39365119">next</a><span>|</span><label class="collapse" for="c-39367701">[-]</label><label class="expand" for="c-39367701">[1 more]</label></div><br/><div class="children"><div class="content">I do love Polars, and I constantly use it (I&#x27;m a network scientist and usually work with a lot of data). However, it is beyond me why I cannot use it on a M1 Mac. As soon as I import it in python, the latter gets killed with &quot;illegal hardware instruction&quot;.</div><br/></div></div><div id="39365119" class="c"><input type="checkbox" id="c-39365119" checked=""/><div class="controls bullet"><span class="by">nonethewiser</span><span>|</span><a href="#39367701">prev</a><span>|</span><a href="#39365391">next</a><span>|</span><label class="collapse" for="c-39365119">[-]</label><label class="expand" for="c-39365119">[10 more]</label></div><br/><div class="children"><div class="content">Do people actual use Rust for datascience? I mean this literally and not as a snarky retort. I dabble in data science in personal projects but I have little concept of the field in general. Polars seems cool I just haven&#x27;t seen Rust used as a general purpose datascience language like R or Python which is what an dataframe library seems like it&#x27;s about. As opposed to running some demanding calculations in C or C++ for performance. It seems like Rust might fit better in the latter, but again, that&#x27;s not what a dataframe lib suggests to me.</div><br/><div id="39365149" class="c"><input type="checkbox" id="c-39365149" checked=""/><div class="controls bullet"><span class="by">josh-sematic</span><span>|</span><a href="#39365119">parent</a><span>|</span><a href="#39367920">next</a><span>|</span><label class="collapse" for="c-39365149">[-]</label><label class="expand" for="c-39365149">[5 more]</label></div><br/><div class="children"><div class="content">Polars has a python front end, which I have used. All the work happens in Rust but the queries can be specified in python. The data is stored using Apache Arrow format so there is no copy required for the same data to be accessible in both Rust and python.</div><br/><div id="39365205" class="c"><input type="checkbox" id="c-39365205" checked=""/><div class="controls bullet"><span class="by">nonethewiser</span><span>|</span><a href="#39365119">root</a><span>|</span><a href="#39365149">parent</a><span>|</span><a href="#39367920">next</a><span>|</span><label class="collapse" for="c-39365205">[-]</label><label class="expand" for="c-39365205">[4 more]</label></div><br/><div class="children"><div class="content">Oh, that&#x27;s cool. I did not realize this. I realize this isn&#x27;t novel but I do not really understand how a library written in one language is used by another - some sort of bindings that the library handles I guess.</div><br/><div id="39367764" class="c"><input type="checkbox" id="c-39367764" checked=""/><div class="controls bullet"><span class="by">movpasd</span><span>|</span><a href="#39365119">root</a><span>|</span><a href="#39365205">parent</a><span>|</span><a href="#39367708">next</a><span>|</span><label class="collapse" for="c-39367764">[-]</label><label class="expand" for="c-39367764">[1 more]</label></div><br/><div class="children"><div class="content">It looks like polars is using PyO3, which are Rust bindings for Python. Python&#x27;s reference implementation is in C, so I imagine it&#x27;s interacting with that API [0] through FFI. Common Python extension modules (as these are called) are compiled as dynamically linked libraries and binaries (or compilation instructions) are included in Python wheels.<p>[0] <a href="https:&#x2F;&#x2F;docs.python.org&#x2F;3&#x2F;extending&#x2F;extending.html" rel="nofollow">https:&#x2F;&#x2F;docs.python.org&#x2F;3&#x2F;extending&#x2F;extending.html</a></div><br/></div></div><div id="39367708" class="c"><input type="checkbox" id="c-39367708" checked=""/><div class="controls bullet"><span class="by">wodenokoto</span><span>|</span><a href="#39365119">root</a><span>|</span><a href="#39365205">parent</a><span>|</span><a href="#39367764">prev</a><span>|</span><a href="#39365244">next</a><span>|</span><label class="collapse" for="c-39367708">[-]</label><label class="expand" for="c-39367708">[1 more]</label></div><br/><div class="children"><div class="content">Both R and pythons pandas uses code written in C and Fortran to do the actual calculations when you ask them to manipulate data.</div><br/></div></div><div id="39365244" class="c"><input type="checkbox" id="c-39365244" checked=""/><div class="controls bullet"><span class="by">dleeftink</span><span>|</span><a href="#39365119">root</a><span>|</span><a href="#39365205">parent</a><span>|</span><a href="#39367708">prev</a><span>|</span><a href="#39367920">next</a><span>|</span><label class="collapse" for="c-39365244">[-]</label><label class="expand" for="c-39365244">[1 more]</label></div><br/><div class="children"><div class="content">The magic of well-defined APIs! If you&#x27;re interested in mixing different DS backends and kernels in a single notebook, check out Quarto:<p>[1]: <a href="https:&#x2F;&#x2F;quarto.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;quarto.org&#x2F;</a></div><br/></div></div></div></div></div></div><div id="39367920" class="c"><input type="checkbox" id="c-39367920" checked=""/><div class="controls bullet"><span class="by">sa-code</span><span>|</span><a href="#39365119">parent</a><span>|</span><a href="#39365149">prev</a><span>|</span><a href="#39367700">next</a><span>|</span><label class="collapse" for="c-39367920">[-]</label><label class="expand" for="c-39367920">[1 more]</label></div><br/><div class="children"><div class="content">The first code snippet in the provided link is actually Python</div><br/></div></div><div id="39367700" class="c"><input type="checkbox" id="c-39367700" checked=""/><div class="controls bullet"><span class="by">wodenokoto</span><span>|</span><a href="#39365119">parent</a><span>|</span><a href="#39367920">prev</a><span>|</span><a href="#39365145">next</a><span>|</span><label class="collapse" for="c-39367700">[-]</label><label class="expand" for="c-39367700">[1 more]</label></div><br/><div class="children"><div class="content">I don’t think anyone is doing any explorative analytics using rust.<p>But I do imagine someone out there has a data engineer hat they put on, and starts rewriting Python calls to polars into pure rust code, compiling and then deploying.</div><br/></div></div><div id="39365145" class="c"><input type="checkbox" id="c-39365145" checked=""/><div class="controls bullet"><span class="by">mirashii</span><span>|</span><a href="#39365119">parent</a><span>|</span><a href="#39367700">prev</a><span>|</span><a href="#39367089">next</a><span>|</span><label class="collapse" for="c-39365145">[-]</label><label class="expand" for="c-39365145">[1 more]</label></div><br/><div class="children"><div class="content">Polars is a Python library as well as a Rust library, and most of its use comes through the Python library.</div><br/></div></div><div id="39367089" class="c"><input type="checkbox" id="c-39367089" checked=""/><div class="controls bullet"><span class="by">jochem9</span><span>|</span><a href="#39365119">parent</a><span>|</span><a href="#39365145">prev</a><span>|</span><a href="#39365391">next</a><span>|</span><label class="collapse" for="c-39367089">[-]</label><label class="expand" for="c-39367089">[1 more]</label></div><br/><div class="children"><div class="content">Rust bindings for Python: <a href="https:&#x2F;&#x2F;github.com&#x2F;PyO3&#x2F;pyo3">https:&#x2F;&#x2F;github.com&#x2F;PyO3&#x2F;pyo3</a></div><br/></div></div></div></div><div id="39365391" class="c"><input type="checkbox" id="c-39365391" checked=""/><div class="controls bullet"><span class="by">p4ul</span><span>|</span><a href="#39365119">prev</a><span>|</span><a href="#39363826">next</a><span>|</span><label class="collapse" for="c-39365391">[-]</label><label class="expand" for="c-39365391">[5 more]</label></div><br/><div class="children"><div class="content">I absolutely love Polars, and I use the Rust crate all the time!<p>I think my only gripe is that the Rust API seems (to me at least) to be less well documented than the Python API. I guess Python is the de facto data science language, so maybe that explains it.</div><br/><div id="39367605" class="c"><input type="checkbox" id="c-39367605" checked=""/><div class="controls bullet"><span class="by">jkrubin</span><span>|</span><a href="#39365391">parent</a><span>|</span><a href="#39365534">next</a><span>|</span><label class="collapse" for="c-39367605">[-]</label><label class="expand" for="c-39367605">[1 more]</label></div><br/><div class="children"><div class="content">I have written several rust&#x2F;python apis now and I think what you’re feeling is the result of the api being designed for Python as well as being primarily tested in Python.<p>No matter the target, I test rust things using python. idk. Food for thought.</div><br/></div></div><div id="39365534" class="c"><input type="checkbox" id="c-39365534" checked=""/><div class="controls bullet"><span class="by">TunaNandos</span><span>|</span><a href="#39365391">parent</a><span>|</span><a href="#39367605">prev</a><span>|</span><a href="#39366146">next</a><span>|</span><label class="collapse" for="c-39365534">[-]</label><label class="expand" for="c-39365534">[1 more]</label></div><br/><div class="children"><div class="content">Likewise, I would prefer to stay in Rust when developing command line apps that might do DataFrame thingies and would love more examples of how to transform DataFrames in pure Rust.</div><br/></div></div><div id="39366146" class="c"><input type="checkbox" id="c-39366146" checked=""/><div class="controls bullet"><span class="by">laborcontract</span><span>|</span><a href="#39365391">parent</a><span>|</span><a href="#39365534">prev</a><span>|</span><a href="#39363826">next</a><span>|</span><label class="collapse" for="c-39366146">[-]</label><label class="expand" for="c-39366146">[2 more]</label></div><br/><div class="children"><div class="content">With GPT4 helping with the refactor, there&#x27;s no reason to start migrating code away from Pandas imo. A lot of people say they think Pandas is fast enough for their needs, but you&#x27;re literally getting a 95% speed improvement for free.<p>This is a huge difference in productivity, especially when running code and doing a lot of slicing in notebooks.</div><br/><div id="39366683" class="c"><input type="checkbox" id="c-39366683" checked=""/><div class="controls bullet"><span class="by">twelvechairs</span><span>|</span><a href="#39365391">root</a><span>|</span><a href="#39366146">parent</a><span>|</span><a href="#39363826">next</a><span>|</span><label class="collapse" for="c-39366683">[-]</label><label class="expand" for="c-39366683">[1 more]</label></div><br/><div class="children"><div class="content">Where ive seen resistance to polars in Python land its been either &quot;Pandas is already used&#x2F;standard and people understand&#x2F;know it&quot; or &quot;If you really need speed, you can probably do it in numpy which should be faster again&quot;.</div><br/></div></div></div></div></div></div><div id="39363826" class="c"><input type="checkbox" id="c-39363826" checked=""/><div class="controls bullet"><span class="by">369548684892826</span><span>|</span><a href="#39365391">prev</a><span>|</span><a href="#39365875">next</a><span>|</span><label class="collapse" for="c-39363826">[-]</label><label class="expand" for="c-39363826">[26 more]</label></div><br/><div class="children"><div class="content">&gt; So, what is Polars? A short description would be “a query engine with a DataFrame frontend”.<p>Guess that would help if I already knew what a dataframe is!</div><br/><div id="39363918" class="c"><input type="checkbox" id="c-39363918" checked=""/><div class="controls bullet"><span class="by">softwaredoug</span><span>|</span><a href="#39363826">parent</a><span>|</span><a href="#39364541">next</a><span>|</span><label class="collapse" for="c-39363918">[-]</label><label class="expand" for="c-39363918">[1 more]</label></div><br/><div class="children"><div class="content">Logically its a SQL table or spreadsheet. Where each column can be of different types.  A column of usernames (strings), their age (integers) etc.<p>Every row is a distinct entity. Every column is usually stored &#x2F; treated as its own distinct array.</div><br/></div></div><div id="39364541" class="c"><input type="checkbox" id="c-39364541" checked=""/><div class="controls bullet"><span class="by">green0wl</span><span>|</span><a href="#39363826">parent</a><span>|</span><a href="#39363918">prev</a><span>|</span><a href="#39365186">next</a><span>|</span><label class="collapse" for="c-39364541">[-]</label><label class="expand" for="c-39364541">[1 more]</label></div><br/><div class="children"><div class="content">An earlier thread on Polars had this as the #1 thread (so the same complaint) - <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=38920043">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=38920043</a></div><br/></div></div><div id="39365186" class="c"><input type="checkbox" id="c-39365186" checked=""/><div class="controls bullet"><span class="by">__MatrixMan__</span><span>|</span><a href="#39363826">parent</a><span>|</span><a href="#39364541">prev</a><span>|</span><a href="#39364337">next</a><span>|</span><label class="collapse" for="c-39365186">[-]</label><label class="expand" for="c-39365186">[1 more]</label></div><br/><div class="children"><div class="content">Another bit of context: it&#x27;s &quot;polars&quot; (like polar bears) because the popular python dataframe library is &quot;pandas&quot;.<p>My first assumption was that it was somehow related to polar coordinates.</div><br/></div></div><div id="39364337" class="c"><input type="checkbox" id="c-39364337" checked=""/><div class="controls bullet"><span class="by">esafak</span><span>|</span><a href="#39363826">parent</a><span>|</span><a href="#39365186">prev</a><span>|</span><a href="#39363916">next</a><span>|</span><label class="collapse" for="c-39364337">[-]</label><label class="expand" for="c-39364337">[1 more]</label></div><br/><div class="children"><div class="content">It is a data structure used by data scientists. Polars is API compatible with the previous solution, but faster. If you don&#x27;t analyze data, you can ignore it.</div><br/></div></div><div id="39363916" class="c"><input type="checkbox" id="c-39363916" checked=""/><div class="controls bullet"><span class="by">jbverschoor</span><span>|</span><a href="#39363826">parent</a><span>|</span><a href="#39364337">prev</a><span>|</span><a href="#39363895">next</a><span>|</span><label class="collapse" for="c-39363916">[-]</label><label class="expand" for="c-39363916">[2 more]</label></div><br/><div class="children"><div class="content">Python framework for tables (arrays with column names).<p>You can query&#x2F;filter&#x2F;sort and pick &#x2F;transform data on multiple directions (row&#x2F;column)<p>It’s used for data mining, ML etc.<p>It’s basically like working with a spreadsheet&#x2F;sql table</div><br/><div id="39364756" class="c"><input type="checkbox" id="c-39364756" checked=""/><div class="controls bullet"><span class="by">goku12</span><span>|</span><a href="#39363826">root</a><span>|</span><a href="#39363916">parent</a><span>|</span><a href="#39363895">next</a><span>|</span><label class="collapse" for="c-39364756">[-]</label><label class="expand" for="c-39364756">[1 more]</label></div><br/><div class="children"><div class="content">Note that dataframes aren&#x27;t Python specific. R has it too, and is an inspiration for Pandas.</div><br/></div></div></div></div><div id="39363895" class="c"><input type="checkbox" id="c-39363895" checked=""/><div class="controls bullet"><span class="by">dist-epoch</span><span>|</span><a href="#39363826">parent</a><span>|</span><a href="#39363916">prev</a><span>|</span><a href="#39364889">next</a><span>|</span><label class="collapse" for="c-39363895">[-]</label><label class="expand" for="c-39363895">[18 more]</label></div><br/><div class="children"><div class="content">If you don&#x27;t know what a dataframe is, it doesn&#x27;t matter what Polars is then, not for you.</div><br/><div id="39364786" class="c"><input type="checkbox" id="c-39364786" checked=""/><div class="controls bullet"><span class="by">goku12</span><span>|</span><a href="#39363826">root</a><span>|</span><a href="#39363895">parent</a><span>|</span><a href="#39363982">next</a><span>|</span><label class="collapse" for="c-39364786">[-]</label><label class="expand" for="c-39364786">[1 more]</label></div><br/><div class="children"><div class="content">Dataframe is a potentially useful concept to even those who haven&#x27;t heard about it. And Polars can be a reasonable introduction to it too.</div><br/></div></div><div id="39363982" class="c"><input type="checkbox" id="c-39363982" checked=""/><div class="controls bullet"><span class="by">369548684892826</span><span>|</span><a href="#39363826">root</a><span>|</span><a href="#39363895">parent</a><span>|</span><a href="#39364786">prev</a><span>|</span><a href="#39364112">next</a><span>|</span><label class="collapse" for="c-39363982">[-]</label><label class="expand" for="c-39363982">[4 more]</label></div><br/><div class="children"><div class="content">With that attitude I&#x27;d never learn anything new</div><br/><div id="39364025" class="c"><input type="checkbox" id="c-39364025" checked=""/><div class="controls bullet"><span class="by">lopatin</span><span>|</span><a href="#39363826">root</a><span>|</span><a href="#39363982">parent</a><span>|</span><a href="#39365034">next</a><span>|</span><label class="collapse" for="c-39364025">[-]</label><label class="expand" for="c-39364025">[1 more]</label></div><br/><div class="children"><div class="content">Go learn about Dataframes then. There&#x27;s no reason an article like this should start with a Dataframes 101.</div><br/></div></div><div id="39365034" class="c"><input type="checkbox" id="c-39365034" checked=""/><div class="controls bullet"><span class="by">amanzi</span><span>|</span><a href="#39363826">root</a><span>|</span><a href="#39363982">parent</a><span>|</span><a href="#39364025">prev</a><span>|</span><a href="#39364112">next</a><span>|</span><label class="collapse" for="c-39365034">[-]</label><label class="expand" for="c-39365034">[2 more]</label></div><br/><div class="children"><div class="content">Would be quicker for you to just search for the word &quot;dataframe&quot; than to post on Hacker News that you don&#x27;t know what a dataframe is.</div><br/><div id="39367550" class="c"><input type="checkbox" id="c-39367550" checked=""/><div class="controls bullet"><span class="by">stavros</span><span>|</span><a href="#39363826">root</a><span>|</span><a href="#39365034">parent</a><span>|</span><a href="#39364112">next</a><span>|</span><label class="collapse" for="c-39367550">[-]</label><label class="expand" for="c-39367550">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s useful feedback for whoever wrote the article, that there are terms they need to not take for granted.</div><br/></div></div></div></div></div></div><div id="39364112" class="c"><input type="checkbox" id="c-39364112" checked=""/><div class="controls bullet"><span class="by">vundercind</span><span>|</span><a href="#39363826">root</a><span>|</span><a href="#39363895">parent</a><span>|</span><a href="#39363982">prev</a><span>|</span><a href="#39363959">next</a><span>|</span><label class="collapse" for="c-39364112">[-]</label><label class="expand" for="c-39364112">[9 more]</label></div><br/><div class="children"><div class="content">“Fancy array-of-associative-arrays with their own set of non-Python-native field data types and a lot of helper methods for sorting and import and export and such, but weirdly always missing any helpers that would be both hard to write and <i>very</i> useful”<p>“SQLite but only for Python and worse. Kind of.”<p>“That annoying transitional step you have no direct need for but that you have to do anyway, because all data-wrangling tools in Python assume a dataframe”<p>(I use this stuff daily)<p>[edit] “Imagine if you could read in from a database or CSV and then work with the returned rows directly and as if they were still a table&#x2F;spreadsheet. Except by ‘directly’ I mean ‘after turning it into a dataframe and discarding&#x2F;fucking-up all your data type information’. And then with another fucking-everything-up step if you want to write it out so you can do real stuff with it elsewhere.”</div><br/><div id="39365304" class="c"><input type="checkbox" id="c-39365304" checked=""/><div class="controls bullet"><span class="by">ericjmorey</span><span>|</span><a href="#39363826">root</a><span>|</span><a href="#39364112">parent</a><span>|</span><a href="#39364805">next</a><span>|</span><label class="collapse" for="c-39365304">[-]</label><label class="expand" for="c-39365304">[1 more]</label></div><br/><div class="children"><div class="content">Is DuckDB a better tool for your purposes?<p>Dataframes are popular among people who are trying to use the data in a way that they don&#x27;t intend to do anything more with the processed data after they&#x27;ve reported their findings.</div><br/></div></div><div id="39364805" class="c"><input type="checkbox" id="c-39364805" checked=""/><div class="controls bullet"><span class="by">dajt</span><span>|</span><a href="#39363826">root</a><span>|</span><a href="#39364112">parent</a><span>|</span><a href="#39365304">prev</a><span>|</span><a href="#39365406">next</a><span>|</span><label class="collapse" for="c-39364805">[-]</label><label class="expand" for="c-39364805">[6 more]</label></div><br/><div class="children"><div class="content">LOL.<p>I have been programming for over 30 years on all sorts of systems and the Pandas DataFrame API is completely beyond me. Just trying to get a cell value seems way more difficult than it should be.<p>Same with xarray datasets.<p>I just loaded the same CSV into Pandas and Polars and Polars did a much better job of it.</div><br/><div id="39365509" class="c"><input type="checkbox" id="c-39365509" checked=""/><div class="controls bullet"><span class="by">mmmmpancakes</span><span>|</span><a href="#39363826">root</a><span>|</span><a href="#39364805">parent</a><span>|</span><a href="#39364967">next</a><span>|</span><label class="collapse" for="c-39365509">[-]</label><label class="expand" for="c-39365509">[1 more]</label></div><br/><div class="children"><div class="content">To me, Polars feels like almost exactly how I would want to redesign Pandas interfaces for small - medium sized data processing, given my previous experience with Pandas and PySpark. Throw out all the custom multi index nonsense, throw out numpy and handle types properly, memory map arrow, focus on method chaining interface, do standard stuff like groupby and window functions in the standard way, and implement all the query optimizations under the hood that we know make stuff way faster.<p>To be fair, Polars has the benefit of hindsight and designing their interfaces and syntax from scratch. The poor choices in Pandas were made long ago, and its adoption and evolution into the most popular dataframe library for python feels like mostly about timing the market than having the best software product.</div><br/></div></div><div id="39364967" class="c"><input type="checkbox" id="c-39364967" checked=""/><div class="controls bullet"><span class="by">vundercind</span><span>|</span><a href="#39363826">root</a><span>|</span><a href="#39364805">parent</a><span>|</span><a href="#39365509">prev</a><span>|</span><a href="#39364901">next</a><span>|</span><label class="collapse" for="c-39364967">[-]</label><label class="expand" for="c-39364967">[1 more]</label></div><br/><div class="children"><div class="content">Polars is at least more consistent &amp; sensible.<p>The whole thing though is just shockingly unhelpful and half-baked for something that taken over so completely in its niche. I guess my perspective is that of someone trying to build reliable automation, though—it’s probably really nice if you’re just noodlin’ in notebooks or the repl or whatever.</div><br/></div></div><div id="39364901" class="c"><input type="checkbox" id="c-39364901" checked=""/><div class="controls bullet"><span class="by">tomrod</span><span>|</span><a href="#39363826">root</a><span>|</span><a href="#39364805">parent</a><span>|</span><a href="#39364967">prev</a><span>|</span><a href="#39366585">next</a><span>|</span><label class="collapse" for="c-39364901">[-]</label><label class="expand" for="c-39364901">[2 more]</label></div><br/><div class="children"><div class="content">What part of df.loc[index_val, column_val] is hard here?<p>Oh you meant multiindex... yeah, slicing multiindexes sucks :)</div><br/><div id="39365971" class="c"><input type="checkbox" id="c-39365971" checked=""/><div class="controls bullet"><span class="by">ok_computer</span><span>|</span><a href="#39363826">root</a><span>|</span><a href="#39364901">parent</a><span>|</span><a href="#39366585">next</a><span>|</span><label class="collapse" for="c-39365971">[-]</label><label class="expand" for="c-39365971">[1 more]</label></div><br/><div class="children"><div class="content">Multi indexes is baking my data into the horrible pandas object model into weird tuples. Every gripe I’ve had with pandas starts with trying to do something “simple” then following the pandas object model to achieve it and over complicating things. Polars is awesome, it fits my numpy understanding of dataframes as dict labeled arrays. I even like the immutability aspect.</div><br/></div></div></div></div><div id="39366585" class="c"><input type="checkbox" id="c-39366585" checked=""/><div class="controls bullet"><span class="by">fbdab103</span><span>|</span><a href="#39363826">root</a><span>|</span><a href="#39364805">parent</a><span>|</span><a href="#39364901">prev</a><span>|</span><a href="#39365406">next</a><span>|</span><label class="collapse" for="c-39366585">[-]</label><label class="expand" for="c-39366585">[1 more]</label></div><br/><div class="children"><div class="content">Accessing an individual cell value is slightly clunky, but that&#x27;s not really where you use a DataFrame. A DataFrame is an object for where the entirety of the dataset is under study. Where you are typically interested in the broad distributions contained within the data.<p>After you have highlighted trends (the majority of the work), then you might go spelunking at individual examples to see why something is funny.</div><br/></div></div></div></div><div id="39365406" class="c"><input type="checkbox" id="c-39365406" checked=""/><div class="controls bullet"><span class="by">mmmmpancakes</span><span>|</span><a href="#39363826">root</a><span>|</span><a href="#39364112">parent</a><span>|</span><a href="#39364805">prev</a><span>|</span><a href="#39363959">next</a><span>|</span><label class="collapse" for="c-39365406">[-]</label><label class="expand" for="c-39365406">[1 more]</label></div><br/><div class="children"><div class="content">i mean, if you are reading and writing csv then yeah, you&#x27;ve already fucked up.</div><br/></div></div></div></div><div id="39363959" class="c"><input type="checkbox" id="c-39363959" checked=""/><div class="controls bullet"><span class="by">appplication</span><span>|</span><a href="#39363826">root</a><span>|</span><a href="#39363895">parent</a><span>|</span><a href="#39364112">prev</a><span>|</span><a href="#39364305">next</a><span>|</span><label class="collapse" for="c-39363959">[-]</label><label class="expand" for="c-39363959">[1 more]</label></div><br/><div class="children"><div class="content">Eh, plenty of SQL-first analysts could find it helpful. Not just for people coming from pandas&#x2F;r.</div><br/></div></div><div id="39364305" class="c"><input type="checkbox" id="c-39364305" checked=""/><div class="controls bullet"><span class="by">riku_iki</span><span>|</span><a href="#39363826">root</a><span>|</span><a href="#39363895">parent</a><span>|</span><a href="#39363959">prev</a><span>|</span><a href="#39365346">next</a><span>|</span><label class="collapse" for="c-39364305">[-]</label><label class="expand" for="c-39364305">[1 more]</label></div><br/><div class="children"><div class="content">Polars allows to use SQL I think?</div><br/></div></div><div id="39365346" class="c"><input type="checkbox" id="c-39365346" checked=""/><div class="controls bullet"><span class="by">dylan604</span><span>|</span><a href="#39363826">root</a><span>|</span><a href="#39363895">parent</a><span>|</span><a href="#39364305">prev</a><span>|</span><a href="#39364889">next</a><span>|</span><label class="collapse" for="c-39365346">[-]</label><label class="expand" for="c-39365346">[1 more]</label></div><br/><div class="children"><div class="content">But it is such a shame that us plebes can&#x27;t learn about it to maybe find the hammer to this nail that is sticking up in our projects because the product can&#x27;t tell people what it is. And it&#x27;s only made worse by arrogant responses like yours.</div><br/></div></div></div></div><div id="39364889" class="c"><input type="checkbox" id="c-39364889" checked=""/><div class="controls bullet"><span class="by">tomrod</span><span>|</span><a href="#39363826">parent</a><span>|</span><a href="#39363895">prev</a><span>|</span><a href="#39365875">next</a><span>|</span><label class="collapse" for="c-39364889">[-]</label><label class="expand" for="c-39364889">[1 more]</label></div><br/><div class="children"><div class="content">Wide-form data structure, often with an index or partition framework in place able to apply column- and row-transformations quickly</div><br/></div></div></div></div><div id="39365875" class="c"><input type="checkbox" id="c-39365875" checked=""/><div class="controls bullet"><span class="by">0thgen</span><span>|</span><a href="#39363826">prev</a><span>|</span><a href="#39367274">next</a><span>|</span><label class="collapse" for="c-39365875">[-]</label><label class="expand" for="c-39365875">[4 more]</label></div><br/><div class="children"><div class="content">Ive found polars quite intuitive, though for python, I lean more towards [ibis](<a href="https:&#x2F;&#x2F;ibis-project.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;ibis-project.org&#x2F;</a>). The interface is nearly identical, but ibis has the benefit if building sql queries before pulling any actual data (like dbplyr) — whereas polars requires the data to be in-memory (at least for rdb’s, though correct me if Im wrong)<p>this to me seems like a good argument for only using ibis, but Im happy to be convinced otherwise</div><br/><div id="39366076" class="c"><input type="checkbox" id="c-39366076" checked=""/><div class="controls bullet"><span class="by">quadrature</span><span>|</span><a href="#39365875">parent</a><span>|</span><a href="#39365903">next</a><span>|</span><label class="collapse" for="c-39366076">[-]</label><label class="expand" for="c-39366076">[1 more]</label></div><br/><div class="children"><div class="content">I haven&#x27;t used it but polars has a lazy api <a href="https:&#x2F;&#x2F;docs.pola.rs&#x2F;user-guide&#x2F;lazy&#x2F;using&#x2F;#using-the-lazy-api-from-a-dataframe" rel="nofollow">https:&#x2F;&#x2F;docs.pola.rs&#x2F;user-guide&#x2F;lazy&#x2F;using&#x2F;#using-the-lazy-a...</a></div><br/></div></div><div id="39365903" class="c"><input type="checkbox" id="c-39365903" checked=""/><div class="controls bullet"><span class="by">oofbey</span><span>|</span><a href="#39365875">parent</a><span>|</span><a href="#39366076">prev</a><span>|</span><a href="#39367274">next</a><span>|</span><label class="collapse" for="c-39365903">[-]</label><label class="expand" for="c-39365903">[2 more]</label></div><br/><div class="children"><div class="content">If it all fits in memory, isn&#x27;t it simpler to just load it first?  Sure, you&#x27;re kinda painting yourself into a corner, but it can be a big corner.  e.g. I know that until recently Amazon still ran a bunch of key recommendation algorithms on a single big machine each night, because it&#x27;s just simpler to load everything into memory and crank on it.</div><br/><div id="39366643" class="c"><input type="checkbox" id="c-39366643" checked=""/><div class="controls bullet"><span class="by">hn72774</span><span>|</span><a href="#39365875">root</a><span>|</span><a href="#39365903">parent</a><span>|</span><a href="#39367274">next</a><span>|</span><label class="collapse" for="c-39366643">[-]</label><label class="expand" for="c-39366643">[1 more]</label></div><br/><div class="children"><div class="content">When reading from the dataframe, depending on the columns, filters, and aggregates you want returned, most query engines can skip data that is irrelevant, making the query run much faster.<p>In your amazon example the data is  probably optimized for fast lookups on a small number of records, like an in-memory cache.</div><br/></div></div></div></div></div></div><div id="39367274" class="c"><input type="checkbox" id="c-39367274" checked=""/><div class="controls bullet"><span class="by">willvarfar</span><span>|</span><a href="#39365875">prev</a><span>|</span><a href="#39364543">next</a><span>|</span><label class="collapse" for="c-39367274">[-]</label><label class="expand" for="c-39367274">[2 more]</label></div><br/><div class="children"><div class="content">A tangent, from someone still doing most of their mangling the old fashioned way in sql used to extract stuff into old fashioned pandas df in a notebook, ... but I&#x27;m wondering and HN is a wonderful place to ask :)<p>How does polars sql context stack up against alternatives e.g. perhaps duckdb?  If I&#x27;m in a notebook and I want to suck in and process a lot of data, which has the least boilerplate, the strongest support and the most efficiency (both RAM usage and speed)?</div><br/><div id="39367434" class="c"><input type="checkbox" id="c-39367434" checked=""/><div class="controls bullet"><span class="by">lordgrenville</span><span>|</span><a href="#39367274">parent</a><span>|</span><a href="#39364543">next</a><span>|</span><label class="collapse" for="c-39367434">[-]</label><label class="expand" for="c-39367434">[1 more]</label></div><br/><div class="children"><div class="content">Here is a head-to-head comparison about efficiency: <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=wKH0-zs2g_U" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=wKH0-zs2g_U</a><p>&quot;Strongest support&quot; is probably Pandas, in that it is very widely used and easy to get help with. DuckDB lets you write SQL and is very fast.</div><br/></div></div></div></div><div id="39364543" class="c"><input type="checkbox" id="c-39364543" checked=""/><div class="controls bullet"><span class="by">sirfz</span><span>|</span><a href="#39367274">prev</a><span>|</span><a href="#39367323">next</a><span>|</span><label class="collapse" for="c-39364543">[-]</label><label class="expand" for="c-39364543">[4 more]</label></div><br/><div class="children"><div class="content">Nowadays I&#x27;m mostly using duckdb&#x2F;chdb to process&#x2F;transform data. I use polars mainly to view results output by duckdb&#x2F;chdb. I like polars and I always use it over pandas but I must say that pandas slicing is certainly missed (or just ability to utilize slicing, not necessarily like pandas)</div><br/><div id="39365556" class="c"><input type="checkbox" id="c-39365556" checked=""/><div class="controls bullet"><span class="by">ericjmorey</span><span>|</span><a href="#39364543">parent</a><span>|</span><a href="#39365302">next</a><span>|</span><label class="collapse" for="c-39365556">[-]</label><label class="expand" for="c-39365556">[2 more]</label></div><br/><div class="children"><div class="content">Are you thinks about something else or is this what you want to do in polars?:<p><a href="https:&#x2F;&#x2F;docs.pola.rs&#x2F;py-polars&#x2F;html&#x2F;reference&#x2F;dataframe&#x2F;api&#x2F;polars.DataFrame.slice.html" rel="nofollow">https:&#x2F;&#x2F;docs.pola.rs&#x2F;py-polars&#x2F;html&#x2F;reference&#x2F;dataframe&#x2F;api&#x2F;...</a></div><br/><div id="39367687" class="c"><input type="checkbox" id="c-39367687" checked=""/><div class="controls bullet"><span class="by">sirfz</span><span>|</span><a href="#39364543">root</a><span>|</span><a href="#39365556">parent</a><span>|</span><a href="#39365302">next</a><span>|</span><label class="collapse" for="c-39367687">[-]</label><label class="expand" for="c-39367687">[1 more]</label></div><br/><div class="children"><div class="content">That just slices rows but something like df[cols] for example would be nice (and is more intuitive), the __slice__ api in python is quiet powerful and I wish polars would take more advantage of it</div><br/></div></div></div></div><div id="39365302" class="c"><input type="checkbox" id="c-39365302" checked=""/><div class="controls bullet"><span class="by">elforce002</span><span>|</span><a href="#39364543">parent</a><span>|</span><a href="#39365556">prev</a><span>|</span><a href="#39367323">next</a><span>|</span><label class="collapse" for="c-39365302">[-]</label><label class="expand" for="c-39365302">[1 more]</label></div><br/><div class="children"><div class="content">I haven&#x27;t heard of chdb. Thanks for sharing it.</div><br/></div></div></div></div><div id="39367323" class="c"><input type="checkbox" id="c-39367323" checked=""/><div class="controls bullet"><span class="by">Lucasoato</span><span>|</span><a href="#39364543">prev</a><span>|</span><a href="#39366436">next</a><span>|</span><label class="collapse" for="c-39367323">[-]</label><label class="expand" for="c-39367323">[1 more]</label></div><br/><div class="children"><div class="content">That lazily evaluated API is very similar to Spark. Probably data engineers will tend to move to polars for smaller workloads, while keeping spark for multi-machine computing.</div><br/></div></div><div id="39366436" class="c"><input type="checkbox" id="c-39366436" checked=""/><div class="controls bullet"><span class="by">anigbrowl</span><span>|</span><a href="#39367323">prev</a><span>|</span><a href="#39364135">next</a><span>|</span><label class="collapse" for="c-39366436">[-]</label><label class="expand" for="c-39366436">[1 more]</label></div><br/><div class="children"><div class="content">I grumbled previously about the lack of a document like this, so well done everyone.</div><br/></div></div><div id="39364135" class="c"><input type="checkbox" id="c-39364135" checked=""/><div class="controls bullet"><span class="by">Vaslo</span><span>|</span><a href="#39366436">prev</a><span>|</span><a href="#39365885">next</a><span>|</span><label class="collapse" for="c-39364135">[-]</label><label class="expand" for="c-39364135">[5 more]</label></div><br/><div class="children"><div class="content">I’ve been moving over to use polars more often for my data work.  It’s much faster than pandas at things like imputing millions of lines.  It’s also a little more intuitive and you don’t waste time pissing around with indexes everytime you transform a dataframe.<p>Polars biggest downfall is that pandas&#x2F;matplotlib are so ubiquitous in data science and polars just plays so differently than pandas including using hvplot as its default plotting package, etc.  It really is trying to do much of its ecosystem exactly how it wants to maximize productivity, speed, etc.  This may slow down the adoption of it, but hopefully it will push others in the better direction.</div><br/><div id="39365416" class="c"><input type="checkbox" id="c-39365416" checked=""/><div class="controls bullet"><span class="by">mmmmpancakes</span><span>|</span><a href="#39364135">parent</a><span>|</span><a href="#39366091">next</a><span>|</span><label class="collapse" for="c-39365416">[-]</label><label class="expand" for="c-39365416">[1 more]</label></div><br/><div class="children"><div class="content">Suggest the following pattern:<p>1. load and process &#x2F; aggregate in polars to get the smaller dataset that goes into your plot.
2. df.to_pandas()
3. apply your favourite vis library that works with pandas.<p>There&#x27;s no use case i can think of where building a data viz interface more specific to polars than this is beneficial or necessary.</div><br/></div></div><div id="39366091" class="c"><input type="checkbox" id="c-39366091" checked=""/><div class="controls bullet"><span class="by">__mharrison__</span><span>|</span><a href="#39364135">parent</a><span>|</span><a href="#39365416">prev</a><span>|</span><a href="#39365185">next</a><span>|</span><label class="collapse" for="c-39366091">[-]</label><label class="expand" for="c-39366091">[1 more]</label></div><br/><div class="children"><div class="content">Pandas is the best interface for putting with matplotlib (better than matplotlib itself).<p>What issues are you running into with the Python ecosystem?<p>I ask because I&#x27;m in the middle of writing Effective Polars, and my experience is that many things like Xgboost, matplotlib, etc work fine with Polars. 
(Sadly&#x2F;oddly&#x2F;ironically some libraries now have issues with Pandas 2 pyarrow types but work with Polars.)</div><br/></div></div><div id="39365185" class="c"><input type="checkbox" id="c-39365185" checked=""/><div class="controls bullet"><span class="by">mirashii</span><span>|</span><a href="#39364135">parent</a><span>|</span><a href="#39366091">prev</a><span>|</span><a href="#39365885">next</a><span>|</span><label class="collapse" for="c-39365185">[-]</label><label class="expand" for="c-39365185">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Polars biggest downfall is that pandas&#x2F;matplotlib are so ubiquitous in data science and polars just plays so differently than pandas including using hvplot as its default plotting package, etc.<p>huh? Polars doesn&#x27;t have a default plotting package, it&#x27;s always something you add. matplotlib supports polars out of the box through the dataframe exchange protocol, which is ubiquitous enough due to the proliferation of other dataframe libraries (dask, vaex, modin&#x2F;ray) that you really get about every other tool in the ecosystem with polars for free.</div><br/><div id="39365940" class="c"><input type="checkbox" id="c-39365940" checked=""/><div class="controls bullet"><span class="by">nojito</span><span>|</span><a href="#39364135">root</a><span>|</span><a href="#39365185">parent</a><span>|</span><a href="#39365885">next</a><span>|</span><label class="collapse" for="c-39365940">[-]</label><label class="expand" for="c-39365940">[1 more]</label></div><br/><div class="children"><div class="content">Polars can now leverage hvplot directly.<p><a href="https:&#x2F;&#x2F;docs.pola.rs&#x2F;user-guide&#x2F;misc&#x2F;visualization&#x2F;" rel="nofollow">https:&#x2F;&#x2F;docs.pola.rs&#x2F;user-guide&#x2F;misc&#x2F;visualization&#x2F;</a></div><br/></div></div></div></div></div></div><div id="39365885" class="c"><input type="checkbox" id="c-39365885" checked=""/><div class="controls bullet"><span class="by">oofbey</span><span>|</span><a href="#39364135">prev</a><span>|</span><label class="collapse" for="c-39365885">[-]</label><label class="expand" for="c-39365885">[4 more]</label></div><br/><div class="children"><div class="content">How difficult is it to port pandas code to use polars instead?  I use pandas a bunch, but sometimes it can be quite slow, especially with file I&#x2F;O.  Anybody have benchmarks?</div><br/><div id="39366958" class="c"><input type="checkbox" id="c-39366958" checked=""/><div class="controls bullet"><span class="by">vundercind</span><span>|</span><a href="#39365885">parent</a><span>|</span><a href="#39366061">next</a><span>|</span><label class="collapse" for="c-39366958">[-]</label><label class="expand" for="c-39366958">[1 more]</label></div><br/><div class="children"><div class="content">Mostly minor API differences. Methods with slightly different (usually better) names, sometimes slightly different behavior. Usually easy to wrap in a little function to handle the transition. Sometimes a property becomes a method. That kind of thing. A handful of nice-to-have utility things in Pandas aren’t in Polars. Some basic objects or datastructures are pretty different (print a dataframe’s dtypes property in both for an example)</div><br/></div></div><div id="39366061" class="c"><input type="checkbox" id="c-39366061" checked=""/><div class="controls bullet"><span class="by">__mharrison__</span><span>|</span><a href="#39365885">parent</a><span>|</span><a href="#39366958">prev</a><span>|</span><a href="#39365925">next</a><span>|</span><label class="collapse" for="c-39366061">[-]</label><label class="expand" for="c-39366061">[1 more]</label></div><br/><div class="children"><div class="content">Generally requires requiring the code.<p>Sadly, AI is quite poor at Polars right now. (It is ok but not great with Pandas).<p>However, getting pandas data into Polars is easy. If you already have the code and it is not a bottleneck, I would just wrap it.<p>(Disclosure: currently writing a book on Polars and have a big chapter on porting hairy pandas code to Polars.)</div><br/></div></div><div id="39365925" class="c"><input type="checkbox" id="c-39365925" checked=""/><div class="controls bullet"><span class="by">nojito</span><span>|</span><a href="#39365885">parent</a><span>|</span><a href="#39366061">prev</a><span>|</span><label class="collapse" for="c-39365925">[-]</label><label class="expand" for="c-39365925">[1 more]</label></div><br/><div class="children"><div class="content">there are some here.<p><a href="https:&#x2F;&#x2F;duckdblabs.github.io&#x2F;db-benchmark&#x2F;" rel="nofollow">https:&#x2F;&#x2F;duckdblabs.github.io&#x2F;db-benchmark&#x2F;</a></div><br/></div></div></div></div></div></div></div></div></div></body></html>