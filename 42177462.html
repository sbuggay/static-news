<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1732006876076" as="style"/><link rel="stylesheet" href="styles.css?v=1732006876076"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/sharkdp/hyperfine">Hyperfine: A command-line benchmarking tool</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>hundredwatt</span> | <span>13 comments</span></div><br/><div><div id="42181277" class="c"><input type="checkbox" id="c-42181277" checked=""/><div class="controls bullet"><span class="by">usrme</span><span>|</span><a href="#42179600">next</a><span>|</span><label class="collapse" for="c-42181277">[-]</label><label class="expand" for="c-42181277">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve also had a good experience using the &#x27;perf&#x27;[^1] tools for when I don&#x27;t want to install &#x27;hyperfine&#x27;. Shameless plug for a small blog post about it as I don&#x27;t think it is that well known: <a href="https:&#x2F;&#x2F;usrme.xyz&#x2F;tils&#x2F;perf-is-more-robust-for-repeated-timings-than-time&#x2F;" rel="nofollow">https:&#x2F;&#x2F;usrme.xyz&#x2F;tils&#x2F;perf-is-more-robust-for-repeated-timi...</a>.<p>---<p>[^1]: <a href="https:&#x2F;&#x2F;www.mankier.com&#x2F;1&#x2F;perf" rel="nofollow">https:&#x2F;&#x2F;www.mankier.com&#x2F;1&#x2F;perf</a></div><br/></div></div><div id="42179600" class="c"><input type="checkbox" id="c-42179600" checked=""/><div class="controls bullet"><span class="by">mmastrac</span><span>|</span><a href="#42181277">prev</a><span>|</span><a href="#42180052">next</a><span>|</span><label class="collapse" for="c-42179600">[-]</label><label class="expand" for="c-42179600">[3 more]</label></div><br/><div class="children"><div class="content">Hyperfine is a great tool but when I was using it at Deno to benchmark startup time there was a lot of weirdness around the operating system apparently caching inodes of executables.<p>If you are looking at shaving sub 20ms numbers, be aware you may need to pull tricks on macos especially to get real numbers.</div><br/><div id="42180391" class="c"><input type="checkbox" id="c-42180391" checked=""/><div class="controls bullet"><span class="by">JackYoustra</span><span>|</span><a href="#42179600">parent</a><span>|</span><a href="#42180052">next</a><span>|</span><label class="collapse" for="c-42180391">[-]</label><label class="expand" for="c-42180391">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve found pretty good results with the System Trace template in xcode instruments. You can also stack instruments, for example combining the file inspector with a virtual memory inspector.<p>I&#x27;ve run into some memory corruption with it sometimes, though, so be wary of that. Emerge tools has an alternative for iOS at least, maybe one day they&#x27;ll port it to mac.</div><br/><div id="42181235" class="c"><input type="checkbox" id="c-42181235" checked=""/><div class="controls bullet"><span class="by">art049</span><span>|</span><a href="#42179600">root</a><span>|</span><a href="#42180391">parent</a><span>|</span><a href="#42180052">next</a><span>|</span><label class="collapse" for="c-42181235">[-]</label><label class="expand" for="c-42181235">[1 more]</label></div><br/><div class="children"><div class="content">I never tried xcode instruments. Is the UX good for this kind of tool?</div><br/></div></div></div></div></div></div><div id="42180052" class="c"><input type="checkbox" id="c-42180052" checked=""/><div class="controls bullet"><span class="by">7e</span><span>|</span><a href="#42179600">prev</a><span>|</span><a href="#42180588">next</a><span>|</span><label class="collapse" for="c-42180052">[-]</label><label class="expand" for="c-42180052">[1 more]</label></div><br/><div class="children"><div class="content">What database product does the community commonly send benchmark results to? This tool is great, but I&#x27;d love to analyze results relationally.</div><br/></div></div><div id="42180588" class="c"><input type="checkbox" id="c-42180588" checked=""/><div class="controls bullet"><span class="by">forrestthewoods</span><span>|</span><a href="#42180052">prev</a><span>|</span><label class="collapse" for="c-42180588">[-]</label><label class="expand" for="c-42180588">[7 more]</label></div><br/><div class="children"><div class="content">Hyperfine is hyper frustrating because it only works with really really fine microsecond level benchmarks. Once you get into the millisecond range it’s worthless.</div><br/><div id="42180660" class="c"><input type="checkbox" id="c-42180660" checked=""/><div class="controls bullet"><span class="by">anotherhue</span><span>|</span><a href="#42180588">parent</a><span>|</span><label class="collapse" for="c-42180660">[-]</label><label class="expand" for="c-42180660">[6 more]</label></div><br/><div class="children"><div class="content">It spawns a new process each time right? I would think that would but a cap on how accurate it can get.<p>For my purposes I use it all the time though, quick and easy sanity-check.</div><br/><div id="42180749" class="c"><input type="checkbox" id="c-42180749" checked=""/><div class="controls bullet"><span class="by">oguz-ismail</span><span>|</span><a href="#42180588">root</a><span>|</span><a href="#42180660">parent</a><span>|</span><a href="#42180722">next</a><span>|</span><label class="collapse" for="c-42180749">[-]</label><label class="expand" for="c-42180749">[2 more]</label></div><br/><div class="children"><div class="content">It spawns a new <i>shell</i> for each run and subtracts the average shell startup time from final results. Too much noise</div><br/><div id="42180880" class="c"><input type="checkbox" id="c-42180880" checked=""/><div class="controls bullet"><span class="by">PhilipRoman</span><span>|</span><a href="#42180588">root</a><span>|</span><a href="#42180749">parent</a><span>|</span><a href="#42180722">next</a><span>|</span><label class="collapse" for="c-42180880">[-]</label><label class="expand" for="c-42180880">[1 more]</label></div><br/><div class="children"><div class="content">The shell can be disabled, leaving just fork+exec</div><br/></div></div></div></div><div id="42180722" class="c"><input type="checkbox" id="c-42180722" checked=""/><div class="controls bullet"><span class="by">forrestthewoods</span><span>|</span><a href="#42180588">root</a><span>|</span><a href="#42180660">parent</a><span>|</span><a href="#42180749">prev</a><span>|</span><label class="collapse" for="c-42180722">[-]</label><label class="expand" for="c-42180722">[3 more]</label></div><br/><div class="children"><div class="content">The issue is it runs a kajillion tests to try and be “statistical”. But there’s no good way to say “just run it for 5 seconds and give me the best answer you can”. It’s very much designed for nanosecond to low microsecond benchmarks. Trying to fight this is trying to smash a square peg through a round hole.</div><br/><div id="42180891" class="c"><input type="checkbox" id="c-42180891" checked=""/><div class="controls bullet"><span class="by">PhilipRoman</span><span>|</span><a href="#42180588">root</a><span>|</span><a href="#42180722">parent</a><span>|</span><a href="#42180876">next</a><span>|</span><label class="collapse" for="c-42180891">[-]</label><label class="expand" for="c-42180891">[1 more]</label></div><br/><div class="children"><div class="content">I disagree that it is designed for nano&#x2F;micro benchmarks. If you want that level of detail, you need to stay within a single process, pinned to a core which is isolated from scheduler. At least I found it almost impossible to benchmark assembly routines with it.</div><br/></div></div><div id="42180876" class="c"><input type="checkbox" id="c-42180876" checked=""/><div class="controls bullet"><span class="by">gforce_de</span><span>|</span><a href="#42180588">root</a><span>|</span><a href="#42180722">parent</a><span>|</span><a href="#42180891">prev</a><span>|</span><label class="collapse" for="c-42180876">[-]</label><label class="expand" for="c-42180876">[1 more]</label></div><br/><div class="children"><div class="content">At least it gives some numbers and point in a direction:<p><pre><code>  $ hyperfine --warmup 3 &#x27;.&#x2F;hello-world-bin-sh.sh&#x27; &#x27;.&#x2F;hello-world-env-python3.py&#x27;
  Benchmark 1: .&#x2F;hello-world-bin-sh.sh
    Time (mean ± σ):       1.3 ms ±   0.4 ms    [User: 1.0 ms, System: 0.5 ms]
  ...
  Benchmark 2: .&#x2F;hello-world-env-python3.py
    Time (mean ± σ):      43.1 ms ±   1.4 ms    [User: 33.6 ms, System: 8.4 ms]
  ...</code></pre></div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>