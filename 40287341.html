<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1715245271374" as="style"/><link rel="stylesheet" href="styles.css?v=1715245271374"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://temporal.io/blog/durable-distributed-asyncio-event-loop">Temporal Python – A durable, distributed asyncio event loop (2023)</a> <span class="domain">(<a href="https://temporal.io">temporal.io</a>)</span></div><div class="subtext"><span>metadat</span> | <span>10 comments</span></div><br/><div><div id="40306409" class="c"><input type="checkbox" id="c-40306409" checked=""/><div class="controls bullet"><span class="by">KaiserPro</span><span>|</span><a href="#40306260">next</a><span>|</span><label class="collapse" for="c-40306409">[-]</label><label class="expand" for="c-40306409">[1 more]</label></div><br/><div class="children"><div class="content">Isn&#x27;t this just threads but with more surprise gotos?</div><br/></div></div><div id="40306260" class="c"><input type="checkbox" id="c-40306260" checked=""/><div class="controls bullet"><span class="by">avi_vallarapu</span><span>|</span><a href="#40306409">prev</a><span>|</span><a href="#40305895">next</a><span>|</span><label class="collapse" for="c-40306260">[-]</label><label class="expand" for="c-40306260">[1 more]</label></div><br/><div class="children"><div class="content">Relying on external APIs or databases within activities might lead to variability in workflow execution.<p>Also, on handling HTTP errors in activities by raising an &quot;ApplicationError&quot; based on the status code, might simplifies error handling but might need to see how it accounts for more complex scenarios where errors are transient or where a retry could be successful even for some client errors like rate limiting or temporary unavailability etc.<p>As the asyncio library itself does have a steep learning curve, integration of asyncio with workflow systems like Temporal that also uses Pythons native asynchronous features, developers should be careful about indirect or subtle bugs, especially in error handling and task management.</div><br/></div></div><div id="40305895" class="c"><input type="checkbox" id="c-40305895" checked=""/><div class="controls bullet"><span class="by">bmitc</span><span>|</span><a href="#40306260">prev</a><span>|</span><a href="#40287354">next</a><span>|</span><label class="collapse" for="c-40305895">[-]</label><label class="expand" for="c-40305895">[6 more]</label></div><br/><div class="children"><div class="content">As someone familiar with asyncio, I don&#x27;t understand what this is or what it&#x27;s for. What&#x27;s an activity, workflow, or worker?<p>&gt; See the asyncio.sleep in there? That’s no normal local-process sleep; that’s a durable timer backed by Temporal.<p>That&#x27;s the normal asyncio.sleep. What does backed by Temporal mean? Reading further, it appears that Temporal is replacing the default asyncio event loop. I don&#x27;t understand why every third party async Python library&#x2F;framework feels the need to take over the default event loop instead of just building on top of it.</div><br/><div id="40306112" class="c"><input type="checkbox" id="c-40306112" checked=""/><div class="controls bullet"><span class="by">storyinmemo</span><span>|</span><a href="#40305895">parent</a><span>|</span><a href="#40306127">next</a><span>|</span><label class="collapse" for="c-40306112">[-]</label><label class="expand" for="c-40306112">[1 more]</label></div><br/><div class="children"><div class="content">Temporal is completely above and beyond Asyncio. It&#x27;s a full scheduling of work and queues that&#x27;s cross-machine, cross-language, and very transparent.<p>A workflow is the code that handles only deterministic actions and calls activities.<p>Activities are functions that do anything you want, typically affecting other systems with network or file calls.<p>A worker is the running process connected to Temporal with registered workflows &amp; activities for it to pass work to.<p>I&#x27;m doing a lot of work with alert handling and provisioning systems using Temporal. Temporal in two minutes is a great video explanation: <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=f-18XztyN6c" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=f-18XztyN6c</a></div><br/></div></div><div id="40306127" class="c"><input type="checkbox" id="c-40306127" checked=""/><div class="controls bullet"><span class="by">uniqueuid</span><span>|</span><a href="#40305895">parent</a><span>|</span><a href="#40306112">prev</a><span>|</span><a href="#40305997">next</a><span>|</span><label class="collapse" for="c-40306127">[-]</label><label class="expand" for="c-40306127">[2 more]</label></div><br/><div class="children"><div class="content">The thing with event loops in python is that they are not a single, all-governing scheduler (as e.g. in the BEAM).<p>ev loops instead are a mid-layer concept that sits below other infrastructure such as threads and processes. And (perhaps somewhat frustratingly) it is not too uncommon to have multiple ev loops in parallel. See for example the proxy.py project, which offers to run one async loop per process for a speedup.<p>As a result, there are some incentives to swap out the loop itself, e.g. for faster implementations like uvloop, because they are somewhat pluggable anyways.</div><br/><div id="40306269" class="c"><input type="checkbox" id="c-40306269" checked=""/><div class="controls bullet"><span class="by">mapcars</span><span>|</span><a href="#40305895">root</a><span>|</span><a href="#40306127">parent</a><span>|</span><a href="#40305997">next</a><span>|</span><label class="collapse" for="c-40306269">[-]</label><label class="expand" for="c-40306269">[1 more]</label></div><br/><div class="children"><div class="content">&gt; all-governing scheduler (as e.g. in the BEAM).<p>Does this also mean they have preemptive multitasking like in BEAM?</div><br/></div></div></div></div><div id="40305997" class="c"><input type="checkbox" id="c-40305997" checked=""/><div class="controls bullet"><span class="by">adhamsalama</span><span>|</span><a href="#40305895">parent</a><span>|</span><a href="#40306127">prev</a><span>|</span><a href="#40306353">next</a><span>|</span><label class="collapse" for="c-40305997">[-]</label><label class="expand" for="c-40305997">[1 more]</label></div><br/><div class="children"><div class="content">I think it means that your code could be resumed on a different machine.</div><br/></div></div></div></div><div id="40287354" class="c"><input type="checkbox" id="c-40287354" checked=""/><div class="controls bullet"><span class="by">metadat</span><span>|</span><a href="#40305895">prev</a><span>|</span><label class="collapse" for="c-40287354">[-]</label><label class="expand" for="c-40287354">[1 more]</label></div><br/><div class="children"><div class="content">Credit: @kodablah and @chippiewill, thanks for turning me into this!<p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=40282650">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=40282650</a></div><br/></div></div></div></div></div></div></div></body></html>