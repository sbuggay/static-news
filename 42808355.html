<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1737968469769" as="style"/><link rel="stylesheet" href="styles.css?v=1737968469769"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://gab-menezes.github.io/2025/01/13/using-the-most-unhinged-avx-512-instruction-to-make-the-fastest-phrase-search-algo.html">Using the most unhinged AVX-512 instruction to make fastest phrase search algo</a> <span class="domain">(<a href="https://gab-menezes.github.io">gab-menezes.github.io</a>)</span></div><div class="subtext"><span>cmcollier</span> | <span>38 comments</span></div><br/><div><div id="42833509" class="c"><input type="checkbox" id="c-42833509" checked=""/><div class="controls bullet"><span class="by">iamnotagenius</span><span>|</span><a href="#42835568">next</a><span>|</span><label class="collapse" for="c-42833509">[-]</label><label class="expand" for="c-42833509">[15 more]</label></div><br/><div class="children"><div class="content">Imo the most &quot;unhinged&quot; cpus for AVX-512 are early batches of Alder Lakes which is the only cpu family that has nearly full coverage of all existing avx-512 subsets.</div><br/><div id="42834579" class="c"><input type="checkbox" id="c-42834579" checked=""/><div class="controls bullet"><span class="by">Namidairo</span><span>|</span><a href="#42833509">parent</a><span>|</span><a href="#42834228">next</a><span>|</span><label class="collapse" for="c-42834579">[-]</label><label class="expand" for="c-42834579">[8 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a shame that Intel seemed to really not want people to use it, given they started disabling the ability to use it in future microcode, and fused it off in later parts.</div><br/><div id="42834919" class="c"><input type="checkbox" id="c-42834919" checked=""/><div class="controls bullet"><span class="by">Aurornis</span><span>|</span><a href="#42833509">root</a><span>|</span><a href="#42834579">parent</a><span>|</span><a href="#42834228">next</a><span>|</span><label class="collapse" for="c-42834919">[-]</label><label class="expand" for="c-42834919">[7 more]</label></div><br/><div class="children"><div class="content">&gt; It&#x27;s a shame that Intel seemed to really not want people to use it<p>AVX-512 was never part of the specification for those CPUs. It was never advertised as a feature or selling point. You had to disable the E cores to enable AVX-512, assuming your motherboard even supported it.<p>Alder Lake AVX-512 has reached mythical status, but I think the number of people angry about it is far higher than the number of people who ever could have taken advantage of it and benefitted from it. For general purpose workloads, having the E cores enabled (and therefore AVX-512 disabled) was faster. You had to have an extremely specific workload that didn&#x27;t scale well with additional cores and also had hot loops that benefitted from AVX-512, which was not very common.<p>So you&#x27;re right: They never wanted people to use it. It wasn&#x27;t advertised and wasn&#x27;t usable without sacrificing all of the E cores and doing a lot of manual configuration work. I suspect they didn&#x27;t want people using it because they never validated it. AVX-512 mode increased the voltages, which would impact things like failure rate and warranty returns. They probably meant to turn it off but forgot in the first versions.</div><br/><div id="42836486" class="c"><input type="checkbox" id="c-42836486" checked=""/><div class="controls bullet"><span class="by">adrian_b</span><span>|</span><a href="#42833509">root</a><span>|</span><a href="#42834919">parent</a><span>|</span><a href="#42835411">next</a><span>|</span><label class="collapse" for="c-42836486">[-]</label><label class="expand" for="c-42836486">[3 more]</label></div><br/><div class="children"><div class="content">They had to disable AVX-512 only because Microsoft was too lazy to rewrite their thread scheduler to handle heterogeneous CPU cores.<p>The Intel-AMD x86-64 architecture is full of horrible things, starting with the System Management Mode added in 1990, which have been added by Intel only because every time Microsoft has refused to update Windows, expecting that the hardware vendors must do the work instead of Microsoft for enabling Windows to continue to work on newer hardware, even when that causes various disadvantages for the customers.<p>Moreover, even if Intel had not said that Alder Lake will support AVX-512, they also had not said that the P-cores of Alder Lake will not support AVX-512.<p>Therefore everybody had expected that Intel will continue to provide backward compatibility, as always before that, so the P-cores of Alder Lake will continue to support any instruction subset that had been supported by Rocket Lake and Tiger Lake and Ice Lake and Cannon Lake.<p>The failure to be compatible with their previous products has been a surprise for everybody.</div><br/><div id="42837078" class="c"><input type="checkbox" id="c-42837078" checked=""/><div class="controls bullet"><span class="by">kccqzy</span><span>|</span><a href="#42833509">root</a><span>|</span><a href="#42836486">parent</a><span>|</span><a href="#42836609">next</a><span>|</span><label class="collapse" for="c-42837078">[-]</label><label class="expand" for="c-42837078">[1 more]</label></div><br/><div class="children"><div class="content">&gt; the P-cores of Alder Lake will continue to support any instruction subset that had been supported by Rocket Lake and Tiger Lake and Ice Lake and Cannon Lake<p>Wait. I thought the article says only Tiger Lake supports the vp2intersect instruction. Is that not true then?</div><br/></div></div><div id="42836609" class="c"><input type="checkbox" id="c-42836609" checked=""/><div class="controls bullet"><span class="by">p_l</span><span>|</span><a href="#42833509">root</a><span>|</span><a href="#42836486">parent</a><span>|</span><a href="#42837078">prev</a><span>|</span><a href="#42835411">next</a><span>|</span><label class="collapse" for="c-42836609">[-]</label><label class="expand" for="c-42836609">[1 more]</label></div><br/><div class="children"><div class="content">Windows can work without SMM, especially NT - the problem is that SMM was created for a world where majority used DOS and the idea of using OS services instead of every possibly quirk of IBM PC was anathema to developers.<p>Thus, SMM, because there was no other way to hook power management on a 386 laptop running &quot; normal&quot; DOS</div><br/></div></div></div></div><div id="42835411" class="c"><input type="checkbox" id="c-42835411" checked=""/><div class="controls bullet"><span class="by">Dylan16807</span><span>|</span><a href="#42833509">root</a><span>|</span><a href="#42834919">parent</a><span>|</span><a href="#42836486">prev</a><span>|</span><a href="#42837995">next</a><span>|</span><label class="collapse" for="c-42835411">[-]</label><label class="expand" for="c-42835411">[1 more]</label></div><br/><div class="children"><div class="content">The reason you had to disable the E cores was... also an artificial barrier imposed by Intel.  Enabling AVX-512 only looks like a problem when inside that false dichotomy.  You can have both with a bit of scheduler awareness.</div><br/></div></div><div id="42837995" class="c"><input type="checkbox" id="c-42837995" checked=""/><div class="controls bullet"><span class="by">ack_complete</span><span>|</span><a href="#42833509">root</a><span>|</span><a href="#42834919">parent</a><span>|</span><a href="#42835411">prev</a><span>|</span><a href="#42835942">next</a><span>|</span><label class="collapse" for="c-42837995">[-]</label><label class="expand" for="c-42837995">[1 more]</label></div><br/><div class="children"><div class="content">The problem with the validation argument is that the P-cores were advertising AVX-512 via CPUID with the E-cores disabled. If the AVX-512 support was not validated and meant to be used, it would not have been a good idea to set that CPUID bit, or even allow the instructions to be executed without faulting. It&#x27;s strange that it launched with any AVX-512 support at all and there were rumors that the decision to drop AVX-512 support officially was made at the last minute.<p>As for the downsides of disabling the E-cores, there were Alder Lake SKUs that were P-core only and had no E-cores.<p>Not all workloads are widely parallelizable and AVX-512 has features that are also useful for highly serialized workloads such as decompression, even at narrower than 512-bit width. Part of the reason that AVX-512 has limited usage is that Intel has set back widespread adoption of AVX-512 by half a decade by dropping it again from their consumer SKUs, with AVX10&#x2F;256 only to return starting in ~2026.</div><br/></div></div><div id="42835942" class="c"><input type="checkbox" id="c-42835942" checked=""/><div class="controls bullet"><span class="by">867-5309</span><span>|</span><a href="#42833509">root</a><span>|</span><a href="#42834919">parent</a><span>|</span><a href="#42837995">prev</a><span>|</span><a href="#42834228">next</a><span>|</span><label class="collapse" for="c-42835942">[-]</label><label class="expand" for="c-42835942">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;www.reddit.com&#x2F;r&#x2F;rpcs3&#x2F;comments&#x2F;tqt1ko&#x2F;clearing_up_some_avx512_misinformation_and_how_to&#x2F;#t3_tqt1ko-post-rtjson-content" rel="nofollow">https:&#x2F;&#x2F;www.reddit.com&#x2F;r&#x2F;rpcs3&#x2F;comments&#x2F;tqt1ko&#x2F;clearing_up_s...</a></div><br/></div></div></div></div></div></div><div id="42834228" class="c"><input type="checkbox" id="c-42834228" checked=""/><div class="controls bullet"><span class="by">fuhsnn</span><span>|</span><a href="#42833509">parent</a><span>|</span><a href="#42834579">prev</a><span>|</span><a href="#42835177">next</a><span>|</span><label class="collapse" for="c-42834228">[-]</label><label class="expand" for="c-42834228">[5 more]</label></div><br/><div class="children"><div class="content">Do they cover anything Sapphire Rapids Xeon&#x27;s don&#x27;t? I thought they share the same arch (Golden Cove).</div><br/><div id="42834355" class="c"><input type="checkbox" id="c-42834355" checked=""/><div class="controls bullet"><span class="by">suzumer</span><span>|</span><a href="#42833509">root</a><span>|</span><a href="#42834228">parent</a><span>|</span><a href="#42834332">next</a><span>|</span><label class="collapse" for="c-42834355">[-]</label><label class="expand" for="c-42834355">[3 more]</label></div><br/><div class="children"><div class="content">According to this [1] wikipedia article, the only feature Sapphire Rapids doesn&#x27;t support is VP2INTERSECT.<p>[1]:<a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Advanced_Vector_Extensions" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Advanced_Vector_Extensions</a></div><br/><div id="42834534" class="c"><input type="checkbox" id="c-42834534" checked=""/><div class="controls bullet"><span class="by">nextaccountic</span><span>|</span><a href="#42833509">root</a><span>|</span><a href="#42834355">parent</a><span>|</span><a href="#42834332">next</a><span>|</span><label class="collapse" for="c-42834534">[-]</label><label class="expand" for="c-42834534">[2 more]</label></div><br/><div class="children"><div class="content">It seems that there are faster alternatives to it<p><a href="https:&#x2F;&#x2F;arxiv.org&#x2F;abs&#x2F;2112.06342" rel="nofollow">https:&#x2F;&#x2F;arxiv.org&#x2F;abs&#x2F;2112.06342</a><p><a href="https:&#x2F;&#x2F;www.reddit.com&#x2F;r&#x2F;asm&#x2F;comments&#x2F;110pld0&#x2F;fasterthannative_alternatives_for_x86&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.reddit.com&#x2F;r&#x2F;asm&#x2F;comments&#x2F;110pld0&#x2F;fasterthannati...</a></div><br/><div id="42834838" class="c"><input type="checkbox" id="c-42834838" checked=""/><div class="controls bullet"><span class="by">hogwarts2025</span><span>|</span><a href="#42833509">root</a><span>|</span><a href="#42834534">parent</a><span>|</span><a href="#42834332">next</a><span>|</span><label class="collapse" for="c-42834838">[-]</label><label class="expand" for="c-42834838">[1 more]</label></div><br/><div class="children"><div class="content">Or Zen 5.  :-p</div><br/></div></div></div></div></div></div><div id="42834332" class="c"><input type="checkbox" id="c-42834332" checked=""/><div class="controls bullet"><span class="by">iamnotagenius</span><span>|</span><a href="#42833509">root</a><span>|</span><a href="#42834228">parent</a><span>|</span><a href="#42834355">prev</a><span>|</span><a href="#42835177">next</a><span>|</span><label class="collapse" for="c-42834332">[-]</label><label class="expand" for="c-42834332">[1 more]</label></div><br/><div class="children"><div class="content">Yes, you are right; I meant &quot;consumer grade cpu&quot;.</div><br/></div></div></div></div><div id="42835177" class="c"><input type="checkbox" id="c-42835177" checked=""/><div class="controls bullet"><span class="by">adgjlsfhk1</span><span>|</span><a href="#42833509">parent</a><span>|</span><a href="#42834228">prev</a><span>|</span><a href="#42835568">next</a><span>|</span><label class="collapse" for="c-42835177">[-]</label><label class="expand" for="c-42835177">[1 more]</label></div><br/><div class="children"><div class="content">What about Zen5?</div><br/></div></div></div></div><div id="42835568" class="c"><input type="checkbox" id="c-42835568" checked=""/><div class="controls bullet"><span class="by">nine_k</span><span>|</span><a href="#42833509">prev</a><span>|</span><a href="#42832643">next</a><span>|</span><label class="collapse" for="c-42835568">[-]</label><label class="expand" for="c-42835568">[3 more]</label></div><br/><div class="children"><div class="content">What a post. It should have taken a week just to write it, never mind the amount of time it took to actually come up with all this stuff and overcome all the obstacles mentioned. What a dedication to improving the performance of phrase search.</div><br/><div id="42838287" class="c"><input type="checkbox" id="c-42838287" checked=""/><div class="controls bullet"><span class="by">LoganDark</span><span>|</span><a href="#42835568">parent</a><span>|</span><a href="#42832643">next</a><span>|</span><label class="collapse" for="c-42838287">[-]</label><label class="expand" for="c-42838287">[2 more]</label></div><br/><div class="children"><div class="content">I think you meant to write &quot;it must have&quot; rather than &quot;it should have&quot;?</div><br/><div id="42838463" class="c"><input type="checkbox" id="c-42838463" checked=""/><div class="controls bullet"><span class="by">nine_k</span><span>|</span><a href="#42835568">root</a><span>|</span><a href="#42838287">parent</a><span>|</span><a href="#42832643">next</a><span>|</span><label class="collapse" for="c-42838463">[-]</label><label class="expand" for="c-42838463">[1 more]</label></div><br/><div class="children"><div class="content">Let&#x27;s agree on &quot;It likely has&quot;.</div><br/></div></div></div></div></div></div><div id="42832643" class="c"><input type="checkbox" id="c-42832643" checked=""/><div class="controls bullet"><span class="by">nxobject</span><span>|</span><a href="#42835568">prev</a><span>|</span><a href="#42835838">next</a><span>|</span><label class="collapse" for="c-42832643">[-]</label><label class="expand" for="c-42832643">[4 more]</label></div><br/><div class="children"><div class="content">Spoiler if you don’t want to read through the (wonder but many) paragraphs of exposition: the instruction is `vp2intersectq k, zmm, zmm`.</div><br/><div id="42834208" class="c"><input type="checkbox" id="c-42834208" checked=""/><div class="controls bullet"><span class="by">bri3d</span><span>|</span><a href="#42832643">parent</a><span>|</span><a href="#42835545">next</a><span>|</span><label class="collapse" for="c-42834208">[-]</label><label class="expand" for="c-42834208">[2 more]</label></div><br/><div class="children"><div class="content">And, as noted in the article, that&#x27;s an instruction which only works on two desktop CPU architectures (Tiger Lake and Zen 5), including one where it&#x27;s arguably slower than not using it (Tiger Lake).<p>Meaning... this entire effort was for something that&#x27;s faster on only a single kind of CPU (Zen 5).<p>This article is honestly one of the best I&#x27;ve read in a long time. It&#x27;s esoteric and the result is 99.5% pointless objectively, but in reality it&#x27;s incredibly useful and a wonderful guide to low-level x86 optimization end to end. The sections on cache alignment and uiCA + analysis notes are a perfect illustration of &quot;how it&#x27;s done.&quot;</div><br/><div id="42838728" class="c"><input type="checkbox" id="c-42838728" checked=""/><div class="controls bullet"><span class="by">tpm</span><span>|</span><a href="#42832643">root</a><span>|</span><a href="#42834208">parent</a><span>|</span><a href="#42835545">next</a><span>|</span><label class="collapse" for="c-42838728">[-]</label><label class="expand" for="c-42838728">[1 more]</label></div><br/><div class="children"><div class="content">Presumably Zen 5 cores will also get used in Threadripper and EPYC processors.</div><br/></div></div></div></div><div id="42835545" class="c"><input type="checkbox" id="c-42835545" checked=""/><div class="controls bullet"><span class="by">nine_k</span><span>|</span><a href="#42832643">parent</a><span>|</span><a href="#42834208">prev</a><span>|</span><a href="#42835838">next</a><span>|</span><label class="collapse" for="c-42835545">[-]</label><label class="expand" for="c-42835545">[1 more]</label></div><br/><div class="children"><div class="content">Not just that, but the fact that Intel CPUs execute it 20-30 times slower than AMD Zen 5 CPUs.<p>Also, the fact that it&#x27;s deprecated by Intel.</div><br/></div></div></div></div><div id="42835838" class="c"><input type="checkbox" id="c-42835838" checked=""/><div class="controls bullet"><span class="by">rkagerer</span><span>|</span><a href="#42832643">prev</a><span>|</span><a href="#42833576">next</a><span>|</span><label class="collapse" for="c-42835838">[-]</label><label class="expand" for="c-42835838">[2 more]</label></div><br/><div class="children"><div class="content">Is the first example under <i>The genius idea</i> heading missing entry #3 below?<p><pre><code>  mary:
     docs:
       - 0:
           posns: [0, 8]
       - 1:
           posns: [2]
       - 3:
           posns: [1]</code></pre></div><br/><div id="42836305" class="c"><input type="checkbox" id="c-42836305" checked=""/><div class="controls bullet"><span class="by">rstuart4133</span><span>|</span><a href="#42835838">parent</a><span>|</span><a href="#42833576">next</a><span>|</span><label class="collapse" for="c-42836305">[-]</label><label class="expand" for="c-42836305">[1 more]</label></div><br/><div class="children"><div class="content">I thought it&#x27;s missing.  However, he does introduce it with:<p>&gt; The inverted index will look something like this:<p>He isn&#x27;t wrong.  It is indeed &quot;something like&quot;.</div><br/></div></div></div></div><div id="42833576" class="c"><input type="checkbox" id="c-42833576" checked=""/><div class="controls bullet"><span class="by">jonstewart</span><span>|</span><a href="#42835838">prev</a><span>|</span><label class="collapse" for="c-42833576">[-]</label><label class="expand" for="c-42833576">[13 more]</label></div><br/><div class="children"><div class="content">The most unhinged AVX-512 instruction is GF2P8AFFINEQB.</div><br/><div id="42834042" class="c"><input type="checkbox" id="c-42834042" checked=""/><div class="controls bullet"><span class="by">bri3d</span><span>|</span><a href="#42833576">parent</a><span>|</span><a href="#42834044">next</a><span>|</span><label class="collapse" for="c-42834042">[-]</label><label class="expand" for="c-42834042">[2 more]</label></div><br/><div class="children"><div class="content">There&#x27;s a pretty good list of weird off-label uses for the Galois Field instructions here: <a href="https:&#x2F;&#x2F;gist.github.com&#x2F;animetosho&#x2F;d3ca95da2131b5813e16b5bb1b137ca0" rel="nofollow">https:&#x2F;&#x2F;gist.github.com&#x2F;animetosho&#x2F;d3ca95da2131b5813e16b5bb1...</a></div><br/><div id="42835596" class="c"><input type="checkbox" id="c-42835596" checked=""/><div class="controls bullet"><span class="by">genewitch</span><span>|</span><a href="#42833576">root</a><span>|</span><a href="#42834042">parent</a><span>|</span><a href="#42834044">next</a><span>|</span><label class="collapse" for="c-42835596">[-]</label><label class="expand" for="c-42835596">[1 more]</label></div><br/><div class="children"><div class="content">I think I actually need that instruction and have a use case for it, and it does something with a matrix transpose so I might finally find a real world useful demonstration of a matrix operation I can cite to people who don&#x27;t know what those mean.</div><br/></div></div></div></div><div id="42834044" class="c"><input type="checkbox" id="c-42834044" checked=""/><div class="controls bullet"><span class="by">mrandish</span><span>|</span><a href="#42833576">parent</a><span>|</span><a href="#42834042">prev</a><span>|</span><a href="#42836830">next</a><span>|</span><label class="collapse" for="c-42834044">[-]</label><label class="expand" for="c-42834044">[4 more]</label></div><br/><div class="children"><div class="content">From my 1980s 8-bit CPU perspective, the instruction is unhinged based solely on the number of letters. Compared to LDA, STA, RTS, that&#x27;s not an assembler mnemonic, it&#x27;s a novel. :-)</div><br/><div id="42835821" class="c"><input type="checkbox" id="c-42835821" checked=""/><div class="controls bullet"><span class="by">pclmulqdq</span><span>|</span><a href="#42833576">root</a><span>|</span><a href="#42834044">parent</a><span>|</span><a href="#42836830">next</a><span>|</span><label class="collapse" for="c-42835821">[-]</label><label class="expand" for="c-42835821">[3 more]</label></div><br/><div class="children"><div class="content">&quot;Load accumulator&quot; (LDA)<p>vs<p>&quot;Galois Field 2^8 affine transform on quad binary words&quot; (GF2P8AFFINEQB)<p>The compression factor isn&#x27;t quite the same on character count, but it&#x27;s still abbreviated. :)</div><br/><div id="42837344" class="c"><input type="checkbox" id="c-42837344" checked=""/><div class="controls bullet"><span class="by">mananaysiempre</span><span>|</span><a href="#42833576">root</a><span>|</span><a href="#42835821">parent</a><span>|</span><a href="#42836830">next</a><span>|</span><label class="collapse" for="c-42837344">[-]</label><label class="expand" for="c-42837344">[2 more]</label></div><br/><div class="children"><div class="content">Incidentally, how is it a GF(2^8) affine transform? As best as I can tell, it’s a GF(2)^8 affine transform, i.e. an affine transform of vectors of bits with normal XOR addition and AND multiplication, and the polynomial defining GF(2^8) just does not enter anywhere. It does enter into GF2P8AFFINEINVQB, but I’m having difficulties finding a geometric description for that one at all.</div><br/><div id="42837572" class="c"><input type="checkbox" id="c-42837572" checked=""/><div class="controls bullet"><span class="by">pclmulqdq</span><span>|</span><a href="#42833576">root</a><span>|</span><a href="#42837344">parent</a><span>|</span><a href="#42836830">next</a><span>|</span><label class="collapse" for="c-42837572">[-]</label><label class="expand" for="c-42837572">[1 more]</label></div><br/><div class="children"><div class="content">I believe that the polynomial for GF2P8AFFINEQB is user-defined. One argument is an 8x8 matrix in GF(2) and the result is [A.x + b] in GF(2)^8 for each 8-bit section. Don&#x27;t quote me on this, but I believe that matrix multiply in GF(2)^8 gets you a transform in GF(2^8).</div><br/></div></div></div></div></div></div></div></div><div id="42836830" class="c"><input type="checkbox" id="c-42836830" checked=""/><div class="controls bullet"><span class="by">inopinatus</span><span>|</span><a href="#42833576">parent</a><span>|</span><a href="#42834044">prev</a><span>|</span><a href="#42833893">next</a><span>|</span><label class="collapse" for="c-42836830">[-]</label><label class="expand" for="c-42836830">[1 more]</label></div><br/><div class="children"><div class="content">Sometimes I read through the instrinsics guide just to play the game of spotting instructions defined primarily because certain cryptologic agencies asked for it.</div><br/></div></div><div id="42833893" class="c"><input type="checkbox" id="c-42833893" checked=""/><div class="controls bullet"><span class="by">pclmulqdq</span><span>|</span><a href="#42833576">parent</a><span>|</span><a href="#42836830">prev</a><span>|</span><label class="collapse" for="c-42833893">[-]</label><label class="expand" for="c-42833893">[5 more]</label></div><br/><div class="children"><div class="content">What about GF2P8AFFINEINVQB?</div><br/><div id="42836721" class="c"><input type="checkbox" id="c-42836721" checked=""/><div class="controls bullet"><span class="by">LarsKrimi</span><span>|</span><a href="#42833576">root</a><span>|</span><a href="#42833893">parent</a><span>|</span><a href="#42834257">next</a><span>|</span><label class="collapse" for="c-42836721">[-]</label><label class="expand" for="c-42836721">[3 more]</label></div><br/><div class="children"><div class="content">It has a fixed polynomial, so not really that useful for anything but AES<p>The only case where I&#x27;ve had use of GF(2^8) inverses is in FEC algorithms (Forney&#x27;s algorithm) and then you need some kind of weird polynomial. But all of those needs are rarely in the hot-path, and the FEC algo&#x27;s are way outdated</div><br/><div id="42836795" class="c"><input type="checkbox" id="c-42836795" checked=""/><div class="controls bullet"><span class="by">pclmulqdq</span><span>|</span><a href="#42833576">root</a><span>|</span><a href="#42836721">parent</a><span>|</span><a href="#42834257">next</a><span>|</span><label class="collapse" for="c-42836795">[-]</label><label class="expand" for="c-42836795">[2 more]</label></div><br/><div class="children"><div class="content">I think the AFFINE and AFFINEINV instructions are specifically for FEC and maybe compression algorithms. I also think they smell like something requested by one of the big customers of Intel (e.g. the government).</div><br/><div id="42837238" class="c"><input type="checkbox" id="c-42837238" checked=""/><div class="controls bullet"><span class="by">LarsKrimi</span><span>|</span><a href="#42833576">root</a><span>|</span><a href="#42836795">parent</a><span>|</span><a href="#42834257">next</a><span>|</span><label class="collapse" for="c-42837238">[-]</label><label class="expand" for="c-42837238">[1 more]</label></div><br/><div class="children"><div class="content">Hmm of course erasure codes would always need to solve these problems. Not sure what modern applications need that in the X86 world<p>I really think it&#x27;s only AES since thats the only place I&#x27;ve seen that polynomial used. But of course maybe there&#x27;s an obscure tape backup FEC algo used somewhere in datacenters?</div><br/></div></div></div></div></div></div><div id="42834257" class="c"><input type="checkbox" id="c-42834257" checked=""/><div class="controls bullet"><span class="by">jonstewart</span><span>|</span><a href="#42833576">root</a><span>|</span><a href="#42833893">parent</a><span>|</span><a href="#42836721">prev</a><span>|</span><label class="collapse" for="c-42834257">[-]</label><label class="expand" for="c-42834257">[1 more]</label></div><br/><div class="children"><div class="content">potato, potato, tomato, tomato</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>