<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1719306050237" as="style"/><link rel="stylesheet" href="styles.css?v=1719306050237"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/dojoe/Twonkie">Twonkie: A USB-PD sniffer/injector/sink based on Google&#x27;s Twinkie open hardware</a>Â <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>transpute</span> | <span>13 comments</span></div><br/><div><div id="40784418" class="c"><input type="checkbox" id="c-40784418" checked=""/><div class="controls bullet"><span class="by">normie3000</span><span>|</span><a href="#40784512">next</a><span>|</span><label class="collapse" for="c-40784418">[-]</label><label class="expand" for="c-40784418">[8 more]</label></div><br/><div class="children"><div class="content">&gt; This one &quot;sniffs&quot; the link just for the Power Delivery negotiations that happen at the lowest electrical levels. If a device or cable is misbehaving, a knowledgeable person should be able to replicate the problem and see it happening with the sniffer. They could see which component was not following spec, and most importantly, exactly what it was doing wrong.
&gt; 
&gt; Even if your computer is participating in Power Delivery, it can&#x27;t see its own PD traffic because all that is handled at a low level by ASIC chips in your USB port. Hence the need for a separate physical device to see the signals that are actually being sent on the wire.<p><a href="https:&#x2F;&#x2F;www.reddit.com&#x2F;r&#x2F;UsbCHardware&#x2F;comments&#x2F;qmz9uz&#x2F;twonkie_homeassembled_googleinspired_usbpd&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.reddit.com&#x2F;r&#x2F;UsbCHardware&#x2F;comments&#x2F;qmz9uz&#x2F;twonki...</a></div><br/><div id="40784527" class="c"><input type="checkbox" id="c-40784527" checked=""/><div class="controls bullet"><span class="by">transpute</span><span>|</span><a href="#40784418">parent</a><span>|</span><a href="#40784512">next</a><span>|</span><label class="collapse" for="c-40784527">[-]</label><label class="expand" for="c-40784527">[7 more]</label></div><br/><div class="children"><div class="content">Equivalent commercial PD analyer is ~$200, <a href="https:&#x2F;&#x2F;www.infineon.com&#x2F;cms&#x2F;en&#x2F;product&#x2F;evaluation-boards&#x2F;cy4500&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.infineon.com&#x2F;cms&#x2F;en&#x2F;product&#x2F;evaluation-boards&#x2F;cy...</a><p><i>&gt; records traffic passively on the Configuration Channel (CC) and allows users to analyze and debug USB Power Delivery communication.. acts as a pass-through for VBUS, VCONN, USB 3.1, USB 2.0 and USB-PD traffic</i><p>Total Phase &#x2F; Google Twinkie device with Sigrok Pulseview software, <a href="https:&#x2F;&#x2F;www.totalphase.com&#x2F;blog&#x2F;2015&#x2F;10&#x2F;usb-power-delivery-analyzer-summary-resources-2&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.totalphase.com&#x2F;blog&#x2F;2015&#x2F;10&#x2F;usb-power-delivery-a...</a></div><br/><div id="40784575" class="c"><input type="checkbox" id="c-40784575" checked=""/><div class="controls bullet"><span class="by">nimish</span><span>|</span><a href="#40784418">root</a><span>|</span><a href="#40784527">parent</a><span>|</span><a href="#40784553">next</a><span>|</span><label class="collapse" for="c-40784575">[-]</label><label class="expand" for="c-40784575">[5 more]</label></div><br/><div class="children"><div class="content">More like $60, or charger lab has a nicer one for about the same price.
 <a href="https:&#x2F;&#x2F;estore.st.com&#x2F;en&#x2F;products&#x2F;evaluation-tools&#x2F;product-evaluation-tools&#x2F;mcu-mpu-eval-tools&#x2F;stm32-mcu-mpu-eval-tools&#x2F;stm32-discovery-kits&#x2F;stm32g071b-disco.html" rel="nofollow">https:&#x2F;&#x2F;estore.st.com&#x2F;en&#x2F;products&#x2F;evaluation-tools&#x2F;product-e...</a></div><br/><div id="40784829" class="c"><input type="checkbox" id="c-40784829" checked=""/><div class="controls bullet"><span class="by">crote</span><span>|</span><a href="#40784418">root</a><span>|</span><a href="#40784575">parent</a><span>|</span><a href="#40784799">next</a><span>|</span><label class="collapse" for="c-40784829">[-]</label><label class="expand" for="c-40784829">[2 more]</label></div><br/><div class="children"><div class="content">The big question is how it performs with high-speed data. Google&#x27;s Twinkie and this Twonkie clone use a design which messes with the data lines as little as possible so they&#x27;ll probably still work with USB4 if you&#x27;re lucky, but the linked ST device is routing those traces all over the board. No issue with USB2, might work with 10Gbps USB3, but anything more? I wouldn&#x27;t want to bet on it.</div><br/><div id="40785073" class="c"><input type="checkbox" id="c-40785073" checked=""/><div class="controls bullet"><span class="by">rx_tx</span><span>|</span><a href="#40784418">root</a><span>|</span><a href="#40784829">parent</a><span>|</span><a href="#40784799">next</a><span>|</span><label class="collapse" for="c-40785073">[-]</label><label class="expand" for="c-40785073">[1 more]</label></div><br/><div class="children"><div class="content">ChargerLab&#x27;s KM003C passes in Thunderbolt 4 correctly at least.<p>(source: I have one and can have it between my macbook pro and a TB4 dock and two displays work correctly)</div><br/></div></div></div></div><div id="40784799" class="c"><input type="checkbox" id="c-40784799" checked=""/><div class="controls bullet"><span class="by">transpute</span><span>|</span><a href="#40784418">root</a><span>|</span><a href="#40784575">parent</a><span>|</span><a href="#40784829">prev</a><span>|</span><a href="#40784756">next</a><span>|</span><label class="collapse" for="c-40784799">[-]</label><label class="expand" for="c-40784799">[1 more]</label></div><br/><div class="children"><div class="content"><i>&gt; charger lab has a nicer one</i><p>Power-Z KM003C? <a href="https:&#x2F;&#x2F;www.amazon.com&#x2F;ChargerLAB-KM003C-Portable-Charging-Voltmeter&#x2F;dp&#x2F;B0BJ24PVNJ&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.amazon.com&#x2F;ChargerLAB-KM003C-Portable-Charging-V...</a></div><br/></div></div><div id="40784756" class="c"><input type="checkbox" id="c-40784756" checked=""/><div class="controls bullet"><span class="by">Panzer04</span><span>|</span><a href="#40784418">root</a><span>|</span><a href="#40784575">parent</a><span>|</span><a href="#40784799">prev</a><span>|</span><a href="#40784553">next</a><span>|</span><label class="collapse" for="c-40784756">[-]</label><label class="expand" for="c-40784756">[1 more]</label></div><br/><div class="children"><div class="content">Nicer in what way? I&#x27;ve used the one referenced in the first comment (CY4500) and it worked quite well. I&#x27;m not entirely sure what could be done better.<p>Nice to know that cheaper ones exist though - is the supporting SW any good (reading out packets, recording etc)</div><br/></div></div></div></div></div></div></div></div><div id="40784512" class="c"><input type="checkbox" id="c-40784512" checked=""/><div class="controls bullet"><span class="by">transpute</span><span>|</span><a href="#40784418">prev</a><span>|</span><label class="collapse" for="c-40784512">[-]</label><label class="expand" for="c-40784512">[4 more]</label></div><br/><div class="children"><div class="content">$6 USB-C breakout for selectable voltage, <a href="https:&#x2F;&#x2F;learn.adafruit.com&#x2F;adafruit-husb238-usb-type-c-power-delivery-breakout&#x2F;overview" rel="nofollow">https:&#x2F;&#x2F;learn.adafruit.com&#x2F;adafruit-husb238-usb-type-c-power...</a><p><i>&gt; The HUSB238 USB PD sink chip is neat in that you can either use jumpers (really, resistor selection) to set the desired power delivery voltage and current or you can use I2C for dynamic querying and setting.</i></div><br/><div id="40784556" class="c"><input type="checkbox" id="c-40784556" checked=""/><div class="controls bullet"><span class="by">btgeekboy</span><span>|</span><a href="#40784512">parent</a><span>|</span><label class="collapse" for="c-40784556">[-]</label><label class="expand" for="c-40784556">[3 more]</label></div><br/><div class="children"><div class="content">I combined one of those cheap breakouts with this variable voltage power supply - <a href="https:&#x2F;&#x2F;www.amazon.com&#x2F;gp&#x2F;product&#x2F;B0861LGM15" rel="nofollow">https:&#x2F;&#x2F;www.amazon.com&#x2F;gp&#x2F;product&#x2F;B0861LGM15</a> - and a 3d printed enclosure to make a benchtop power supply pretty affordably. Just use your laptop&#x27;s power supply and now you can have any voltage and limited amperage.</div><br/><div id="40785706" class="c"><input type="checkbox" id="c-40785706" checked=""/><div class="controls bullet"><span class="by">jwildeboer</span><span>|</span><a href="#40784512">root</a><span>|</span><a href="#40784556">parent</a><span>|</span><a href="#40784569">next</a><span>|</span><label class="collapse" for="c-40785706">[-]</label><label class="expand" for="c-40785706">[1 more]</label></div><br/><div class="children"><div class="content">I am waiting for an updated version that does PD 3.1, so it can go to 48V&#x2F;5A.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>