<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1726736465026" as="style"/><link rel="stylesheet" href="styles.css?v=1726736465026"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://forums.developer.apple.com/forums/thread/756626">iOS 18 breaks IMAPS self-signed certs</a> <span class="domain">(<a href="https://forums.developer.apple.com">forums.developer.apple.com</a>)</span></div><div class="subtext"><span>mmd45</span> | <span>109 comments</span></div><br/><div><div id="41584650" class="c"><input type="checkbox" id="c-41584650" checked=""/><div class="controls bullet"><span class="by">Arnt</span><span>|</span><a href="#41589318">next</a><span>|</span><label class="collapse" for="c-41584650">[-]</label><label class="expand" for="c-41584650">[34 more]</label></div><br/><div class="children"><div class="content">I switched to letsencrypt certs for my imap server. Works well, IMO better than the self-signed ones I used before.</div><br/><div id="41587845" class="c"><input type="checkbox" id="c-41587845" checked=""/><div class="controls bullet"><span class="by">hedora</span><span>|</span><a href="#41584650">parent</a><span>|</span><a href="#41587095">next</a><span>|</span><label class="collapse" for="c-41587845">[-]</label><label class="expand" for="c-41587845">[16 more]</label></div><br/><div class="children"><div class="content">That adds a lot of attack surface vs. issuing a self-signed cert and confirming it was securely verified by your imap client.<p>Not only could let’s encrypt issue a mitm cert for your imap connections, so could other CAs, and any cloud providers &#x2F; dns providers you use.</div><br/><div id="41589884" class="c"><input type="checkbox" id="c-41589884" checked=""/><div class="controls bullet"><span class="by">ehhthing</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41587845">parent</a><span>|</span><a href="#41588948">next</a><span>|</span><label class="collapse" for="c-41589884">[-]</label><label class="expand" for="c-41589884">[1 more]</label></div><br/><div class="children"><div class="content">iOS never supported this configuration regardless, a change in SSL certificate does not cause any kind of notification to the user.<p>Also, you&#x27;re basically objecting to the entire idea of PKI for use in IMAP which is incredibly hard to justify. Perhaps you wish to use a different model for your own personal reasons but the default being PKI should not be controversial, and if you want to use your own model you should use a different mail client.</div><br/></div></div><div id="41588948" class="c"><input type="checkbox" id="c-41588948" checked=""/><div class="controls bullet"><span class="by">kelnos</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41587845">parent</a><span>|</span><a href="#41589884">prev</a><span>|</span><a href="#41588028">next</a><span>|</span><label class="collapse" for="c-41588948">[-]</label><label class="expand" for="c-41588948">[4 more]</label></div><br/><div class="children"><div class="content">Pretty sure most people&#x27;s threat model doesn&#x27;t really care about the scenarios you mention.  And for most people, that&#x27;s fine.</div><br/><div id="41589250" class="c"><input type="checkbox" id="c-41589250" checked=""/><div class="controls bullet"><span class="by">ho_schi</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41588948">parent</a><span>|</span><a href="#41588028">next</a><span>|</span><label class="collapse" for="c-41589250">[-]</label><label class="expand" for="c-41589250">[3 more]</label></div><br/><div class="children"><div class="content">A threat model which people using <i>self-signed certificates</i> especially care about.<p>The idea of certificate authorities, certificate chains and intermediary certificates is common - and   based on top down security. That is the reason why it is so dangerous. There is a “lock” and people believe everything is “good” but actually DigiNotar, TurkTrust or the bad government issued a certificate. Google tried more than once to improve the situation but I think they just told Chrome only to accept their actual certificates for their services?<p>Messenger apps like <i>Signal</i> show how it should be done, the user itself checks and accept. Cameras and QR-codes made it easy. SSHs ASCII fingerprints are a nice thing, too.<p>PS: Yep. You <i>shall</i> look at the fingerprint of your chat partners in any messenger app.</div><br/><div id="41589792" class="c"><input type="checkbox" id="c-41589792" checked=""/><div class="controls bullet"><span class="by">actionfromafar</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41589250">parent</a><span>|</span><a href="#41589512">next</a><span>|</span><label class="collapse" for="c-41589792">[-]</label><label class="expand" for="c-41589792">[1 more]</label></div><br/><div class="children"><div class="content">There are or were two kinds of people using self-signed certificates. The vast majority used to be &quot;I don&#x27;t know how or can&#x27;t afford to get a certificate chain cert.&quot;<p>Now, with letsencrypt, what&#x27;s left of the &quot;can&#x27;t afford group&quot; is &quot;I can&#x27;t be arsed to update my config yet&quot;.</div><br/></div></div><div id="41589512" class="c"><input type="checkbox" id="c-41589512" checked=""/><div class="controls bullet"><span class="by">compsciphd</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41589250">parent</a><span>|</span><a href="#41589792">prev</a><span>|</span><a href="#41588028">next</a><span>|</span><label class="collapse" for="c-41589512">[-]</label><label class="expand" for="c-41589512">[1 more]</label></div><br/><div class="children"><div class="content">why use a self signed certificate, why not create your own signer cert install that into IOS and then its no longer a &quot;self signed&quot; cert, but just a private cert org.<p>IOS does allow you to install private signer certs, right? (right?)</div><br/></div></div></div></div></div></div><div id="41588028" class="c"><input type="checkbox" id="c-41588028" checked=""/><div class="controls bullet"><span class="by">commandersaki</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41587845">parent</a><span>|</span><a href="#41588948">prev</a><span>|</span><a href="#41587095">next</a><span>|</span><label class="collapse" for="c-41588028">[-]</label><label class="expand" for="c-41588028">[10 more]</label></div><br/><div class="children"><div class="content">Uh what is a mitm cert? You&#x27;re the custodian of the private key associated with the certificate, not LetsEncrypt.<p>And any CA can generate a certificate to MITM anything. That&#x27;s why it&#x27;s pretty much a requirement to submit all certs issued to Certificate Transparency, and if you&#x27;re found to be misbehaving expect to receive ire from CA&#x2F;B.</div><br/><div id="41588489" class="c"><input type="checkbox" id="c-41588489" checked=""/><div class="controls bullet"><span class="by">beeflet</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41588028">parent</a><span>|</span><a href="#41588809">next</a><span>|</span><label class="collapse" for="c-41588489">[-]</label><label class="expand" for="c-41588489">[7 more]</label></div><br/><div class="children"><div class="content">why should I require some third party&#x27;s permission to do encryption between one of my computers and another one of my computers?</div><br/><div id="41588850" class="c"><input type="checkbox" id="c-41588850" checked=""/><div class="controls bullet"><span class="by">jchw</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41588489">parent</a><span>|</span><a href="#41588955">next</a><span>|</span><label class="collapse" for="c-41588850">[-]</label><label class="expand" for="c-41588850">[1 more]</label></div><br/><div class="children"><div class="content">The whole system and everything built on it that underlies trust in encryption on the modern Internet is designed in a way that requires parties called certificate authorities. That&#x27;s just the design, since it was largely designed for two unrelated people to establish secure communication.<p>Clearly, it is not <i>required</i> to use a third party. First of all, you <i>can</i> sign your own cert using itself, then verify it manually. However, this is not the trust model that most Internet software uses. That model is closer to what SSH does, sometimes called TOFU (Trust On First Use). The model that is intended is for the certificate chain to be verified back to a trust root (ignoring other wrinkles.) There&#x27;s really no particular reason why self-signed certificates <i>must</i> be supported.<p>Note that I don&#x27;t think this makes the bug report invalid. It seems like a regression that is not intentional. However, the important point is that a third party <i>still</i> isn&#x27;t needed to use the system as intended. You can, in fact, issue your own CA certificates, trust them on your devices, and then use those to sign your own certificates, making yourself the authority. This will work even on iOS as far as I know, and it follows the typical trust model so software should handle it as expected (though apps that use certificate pinning or bundle the Mozilla CA certificates statically instead of using the operating system&#x27;s trust store may not work, but by and large it works.)<p>Personally, I just use Let&#x27;s Encrypt. That way other people can establish a &quot;secure&quot; connection to my devices, too.</div><br/></div></div><div id="41588955" class="c"><input type="checkbox" id="c-41588955" checked=""/><div class="controls bullet"><span class="by">kelnos</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41588489">parent</a><span>|</span><a href="#41588850">prev</a><span>|</span><a href="#41589303">next</a><span>|</span><label class="collapse" for="c-41588955">[-]</label><label class="expand" for="c-41588955">[1 more]</label></div><br/><div class="children"><div class="content">You shouldn&#x27;t, and (this iOS bug aside) you don&#x27;t, in general.  But you&#x27;re going to run into less friction if you do it the &quot;blessed&quot; way.  That&#x27;s just life.</div><br/></div></div><div id="41589303" class="c"><input type="checkbox" id="c-41589303" checked=""/><div class="controls bullet"><span class="by">darkhorn</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41588489">parent</a><span>|</span><a href="#41588955">prev</a><span>|</span><a href="#41588728">next</a><span>|</span><label class="collapse" for="c-41589303">[-]</label><label class="expand" for="c-41589303">[1 more]</label></div><br/><div class="children"><div class="content">There are many other questions to ask until you come to this question. One of them is; why iOS doesn&#x27;t let me play my own mp3s?</div><br/></div></div><div id="41588728" class="c"><input type="checkbox" id="c-41588728" checked=""/><div class="controls bullet"><span class="by">fragmede</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41588489">parent</a><span>|</span><a href="#41589303">prev</a><span>|</span><a href="#41588670">next</a><span>|</span><label class="collapse" for="c-41588728">[-]</label><label class="expand" for="c-41588728">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not being required. just that the thread is about Let&#x27;s Encrypt which ostensibly easier than setting up your own CA and distributing the root certificates to your devices. Which isn&#x27;t too difficult but given how many people apparently use self-signed certificates, it&#x27;s a bit high a bar.</div><br/></div></div><div id="41588670" class="c"><input type="checkbox" id="c-41588670" checked=""/><div class="controls bullet"><span class="by">kijin</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41588489">parent</a><span>|</span><a href="#41588728">prev</a><span>|</span><a href="#41588809">next</a><span>|</span><label class="collapse" for="c-41588670">[-]</label><label class="expand" for="c-41588670">[2 more]</label></div><br/><div class="children"><div class="content">Because you chose to use a program that doesn&#x27;t accept self-signed certificates. Use a different program or a different computer that actually respects your freedom to tinker with it. Problem solved.</div><br/><div id="41589257" class="c"><input type="checkbox" id="c-41589257" checked=""/><div class="controls bullet"><span class="by">DidYaWipe</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41588670">parent</a><span>|</span><a href="#41588809">next</a><span>|</span><label class="collapse" for="c-41589257">[-]</label><label class="expand" for="c-41589257">[1 more]</label></div><br/><div class="children"><div class="content">No. He noted that it&#x27;s a REGRESSION. So he chose one that DID accept them.<p>Running away from defects doesn&#x27;t get them fixed.</div><br/></div></div></div></div></div></div><div id="41588809" class="c"><input type="checkbox" id="c-41588809" checked=""/><div class="controls bullet"><span class="by">kortilla</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41588028">parent</a><span>|</span><a href="#41588489">prev</a><span>|</span><a href="#41587095">next</a><span>|</span><label class="collapse" for="c-41588809">[-]</label><label class="expand" for="c-41588809">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Uh what is a mitm cert? You&#x27;re the custodian of the private key associated with the certificate, not LetsEncrypt.<p>Don’t be obtuse. Letsencrypt and every other trusted CA has the ability to issue new certs for any domain at any time without you knowing.<p>There is absolutely no requirement to submit these to Certificate Transparency. That’s a thing some browsers do, but not most mail clients.<p>If you don’t trust the root CAs at all and only trust your self signed cert or only trust another signing cert you control, then a mitm isn’t possible without getting your private signing cert keys.</div><br/><div id="41588856" class="c"><input type="checkbox" id="c-41588856" checked=""/><div class="controls bullet"><span class="by">commandersaki</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41588809">parent</a><span>|</span><a href="#41587095">next</a><span>|</span><label class="collapse" for="c-41588856">[-]</label><label class="expand" for="c-41588856">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Don’t be obtuse. Letsencrypt and every other trusted CA has the ability to issue new certs for any domain at any time without you knowing.<p>You shouldn&#x27;t use words you don&#x27;t understand. I already pointed this out.<p>&gt; There is absolutely no requirement to submit these to Certificate Transparency. That’s a thing some browsers do, but not most mail clients.<p>If you want to be in Chrome bundle or Safari&#x2F;Mac bundle you need to submit to at least one approved CT log. If you&#x27;re found misbehaving or issuing non compliant certificates, expect ire from CA&#x2F;B and potential ejection from certificate trust stores. This has happened quite a number of times, and CAs in the WebPKI trust are highly unlikely to issue a MITM certificate.</div><br/></div></div></div></div></div></div></div></div><div id="41587095" class="c"><input type="checkbox" id="c-41587095" checked=""/><div class="controls bullet"><span class="by">ytch</span><span>|</span><a href="#41584650">parent</a><span>|</span><a href="#41587845">prev</a><span>|</span><a href="#41584826">next</a><span>|</span><label class="collapse" for="c-41587095">[-]</label><label class="expand" for="c-41587095">[1 more]</label></div><br/><div class="children"><div class="content">ACME DNS-01 Challenge doesn&#x27;t need a public resolvable and reachable host, it just sets a temporary DNS record to verify.</div><br/></div></div><div id="41584826" class="c"><input type="checkbox" id="c-41584826" checked=""/><div class="controls bullet"><span class="by">mmd45</span><span>|</span><a href="#41584650">parent</a><span>|</span><a href="#41587095">prev</a><span>|</span><a href="#41589318">next</a><span>|</span><label class="collapse" for="c-41584826">[-]</label><label class="expand" for="c-41584826">[16 more]</label></div><br/><div class="children"><div class="content">I&#x27;m using a private ip over a vpn so I don&#x27;t think that workaround will work for me.  I don&#x27;t really want a public dns record.</div><br/><div id="41585325" class="c"><input type="checkbox" id="c-41585325" checked=""/><div class="controls bullet"><span class="by">cpach</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41584826">parent</a><span>|</span><a href="#41584944">next</a><span>|</span><label class="collapse" for="c-41585325">[-]</label><label class="expand" for="c-41585325">[1 more]</label></div><br/><div class="children"><div class="content">If so, then you might want to mint your own root certificate and then import it to your iPhone.</div><br/></div></div><div id="41584944" class="c"><input type="checkbox" id="c-41584944" checked=""/><div class="controls bullet"><span class="by">Arnt</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41584826">parent</a><span>|</span><a href="#41585325">prev</a><span>|</span><a href="#41589318">next</a><span>|</span><label class="collapse" for="c-41584944">[-]</label><label class="expand" for="c-41584944">[14 more]</label></div><br/><div class="children"><div class="content">LE will issue you a wildcard certificate and it&#x27;s usable for mail.</div><br/><div id="41584988" class="c"><input type="checkbox" id="c-41584988" checked=""/><div class="controls bullet"><span class="by">mmd45</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41584944">parent</a><span>|</span><a href="#41589318">next</a><span>|</span><label class="collapse" for="c-41584988">[-]</label><label class="expand" for="c-41584988">[13 more]</label></div><br/><div class="children"><div class="content">i&#x27;m just using a hardcoded private ip to connect to the imap server.  are you saying i can get a certificate with a hostname of &quot;*&quot; that will match ANY ip address?</div><br/><div id="41585059" class="c"><input type="checkbox" id="c-41585059" checked=""/><div class="controls bullet"><span class="by">oneplane</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41584988">parent</a><span>|</span><a href="#41589318">next</a><span>|</span><label class="collapse" for="c-41585059">[-]</label><label class="expand" for="c-41585059">[12 more]</label></div><br/><div class="children"><div class="content">No, but you could use DNS for that internal IP. And then you&#x27;d have a hostname. Since your IMAP server likely has some way of getting external mail, it is likely that you have a DNS zone and MX records, so adding an A record for your internal IMAP access isn&#x27;t that much of an effort compared to what you already would have.<p>If you have mmd45.com as a domain and have MX records pointing to your mail server, adding imap.mmd45.com pointing to your IMAP server should be fairly simple. Getting a Let&#x27;s Encrypt certificate for *.mmd45.com is all that remains for the TLS part with a valid CA chain. As a bonus you can then also use encrypted SMTP.</div><br/><div id="41585127" class="c"><input type="checkbox" id="c-41585127" checked=""/><div class="controls bullet"><span class="by">mmd45</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41585059">parent</a><span>|</span><a href="#41589318">next</a><span>|</span><label class="collapse" for="c-41585127">[-]</label><label class="expand" for="c-41585127">[11 more]</label></div><br/><div class="children"><div class="content">unfortunately none of that applies to my setup.  my imap server lives in a dmz and doesn&#x27;t have all that other jazz.</div><br/><div id="41587481" class="c"><input type="checkbox" id="c-41587481" checked=""/><div class="controls bullet"><span class="by">nucleardog</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41585127">parent</a><span>|</span><a href="#41585335">next</a><span>|</span><label class="collapse" for="c-41587481">[-]</label><label class="expand" for="c-41587481">[1 more]</label></div><br/><div class="children"><div class="content">Mine too. It does apply.<p>Seems to be a safe assumption you have a domain since you&#x27;re receiving mail.<p>Go run something like certbot[0] on your mail server. It has plugins to integrate with various DNS providers. (This is who is hosting the zone where you map domains to IPs, not necessarily where you registered the domain.) If they don&#x27;t have a plugin for your host, you could look at moving the zone (e.g., CloudFlare is free for something like this, Route53 is &lt;$1&#x2F;mo) or finding another tool that does support it[1].<p>No external IPs involved anywhere and you can get valid, trusted SSL certificates for your domain. Set up the auto-renewal (in essentially all cases, add something to crontab), and it&#x27;ll periodically dump new certificates to disk for you so you never need to think about the certificates again.<p>If you don&#x27;t even want anyone to know that there&#x27;s a &quot;imap.mmd45.com&quot; in existence _somewhere_ in the world, you can issue a certificate for `*.mmd45.com` and it will cover any direct subdomains.<p>Now you actually need to _connect_ to your mailserver with some sort of hostname rather than IP. For desktop devices and stuff, you could just throw this in &#x2F;etc&#x2F;hosts if you wanted. Some VPN&#x2F;VPN-adjacent tools have ways to push mappings like that. Basically all of them have a way to override the DNS server in use if you were willing to run your own DNS server on the same host that has your mailserver. You can also just create a public record mapping imap.mmd45.com to 10.1.2.3.<p>[0] <a href="https:&#x2F;&#x2F;eff-certbot.readthedocs.io&#x2F;en&#x2F;latest&#x2F;" rel="nofollow">https:&#x2F;&#x2F;eff-certbot.readthedocs.io&#x2F;en&#x2F;latest&#x2F;</a>
[1] <a href="https:&#x2F;&#x2F;letsencrypt.org&#x2F;docs&#x2F;client-options&#x2F;" rel="nofollow">https:&#x2F;&#x2F;letsencrypt.org&#x2F;docs&#x2F;client-options&#x2F;</a></div><br/></div></div><div id="41585335" class="c"><input type="checkbox" id="c-41585335" checked=""/><div class="controls bullet"><span class="by">0x457</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41585127">parent</a><span>|</span><a href="#41587481">prev</a><span>|</span><a href="#41585352">next</a><span>|</span><label class="collapse" for="c-41585335">[-]</label><label class="expand" for="c-41585335">[6 more]</label></div><br/><div class="children"><div class="content">Only thing required for this setup to work: client needs to be able to resolve domain to internal ip.<p>I have wireguard mesh with a bunch of services that use LE for TLS that have no access to interwebs and not accessible from interwebs.</div><br/><div id="41585460" class="c"><input type="checkbox" id="c-41585460" checked=""/><div class="controls bullet"><span class="by">mmd45</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41585335">parent</a><span>|</span><a href="#41585352">next</a><span>|</span><label class="collapse" for="c-41585460">[-]</label><label class="expand" for="c-41585460">[5 more]</label></div><br/><div class="children"><div class="content">how are you renewing the LE certificate if the domain is resolving to an internal ip?  this seems like a big hoop to jump through.</div><br/><div id="41587883" class="c"><input type="checkbox" id="c-41587883" checked=""/><div class="controls bullet"><span class="by">ninkendo</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41585460">parent</a><span>|</span><a href="#41585831">next</a><span>|</span><label class="collapse" for="c-41587883">[-]</label><label class="expand" for="c-41587883">[1 more]</label></div><br/><div class="children"><div class="content">LE can use DNS itself as the challenge. It works something like:<p>- You manage the mmd45.me domain (through a dns provider, say dnsimple)<p>- You ask LE for a cert for imap.lan.mmd45.me (an address that doesn’t exist, but you use in &#x2F;etc&#x2F;hosts or something internally. Or maybe an internal dns server like a pihole or something. The rest of the internet doesn’t see this address)<p>- LE says “prove you own lan.mmd45.me by creating a TXT record containing &lt;random-nonce&gt; inside _acme-challenge.lan.mmd45.me”<p>- Certbot integrates with your DNS provider to create said TXT record<p>- LE sees the TXT record and determines you are the owner, and signs your cert. At this point certbot can just delete _acme-challenge.lan.mmd45.me because it did its job.<p>At no point does mail.lan.mmd45.me need to be externally resolvable to any address for this to work.</div><br/></div></div><div id="41585831" class="c"><input type="checkbox" id="c-41585831" checked=""/><div class="controls bullet"><span class="by">Arnt</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41585460">parent</a><span>|</span><a href="#41587883">prev</a><span>|</span><a href="#41585476">next</a><span>|</span><label class="collapse" for="c-41585831">[-]</label><label class="expand" for="c-41585831">[2 more]</label></div><br/><div class="children"><div class="content">LE doesn&#x27;t need any A or AAAA record. The domain must exist in the DNS and you must be able to create records in the domain.<p>If you&#x27;re using internet mail you have a domain, so you can do this. The time for self-signed certificates has passed.</div><br/><div id="41588841" class="c"><input type="checkbox" id="c-41588841" checked=""/><div class="controls bullet"><span class="by">kortilla</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41585831">parent</a><span>|</span><a href="#41585476">next</a><span>|</span><label class="collapse" for="c-41588841">[-]</label><label class="expand" for="c-41588841">[1 more]</label></div><br/><div class="children"><div class="content">A pinned self cert is still more secure than this because you don’t have to trust any CAs.<p>&gt; The time for self-signed certificates has passed.<p>This is bad blanket advice and very much depends on use-case.</div><br/></div></div></div></div><div id="41585476" class="c"><input type="checkbox" id="c-41585476" checked=""/><div class="controls bullet"><span class="by">greyface-</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41585460">parent</a><span>|</span><a href="#41585831">prev</a><span>|</span><a href="#41585352">next</a><span>|</span><label class="collapse" for="c-41585476">[-]</label><label class="expand" for="c-41585476">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;letsencrypt.org&#x2F;docs&#x2F;challenge-types&#x2F;#dns-01-challenge" rel="nofollow">https:&#x2F;&#x2F;letsencrypt.org&#x2F;docs&#x2F;challenge-types&#x2F;#dns-01-challen...</a></div><br/></div></div></div></div></div></div><div id="41585352" class="c"><input type="checkbox" id="c-41585352" checked=""/><div class="controls bullet"><span class="by">Spivak</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41585127">parent</a><span>|</span><a href="#41585335">prev</a><span>|</span><a href="#41589318">next</a><span>|</span><label class="collapse" for="c-41585352">[-]</label><label class="expand" for="c-41585352">[3 more]</label></div><br/><div class="children"><div class="content">This can still work imap.mydomain.com resolving to your hardcoded private ip, put the cert on your imap server, connect by name, done.</div><br/><div id="41585923" class="c"><input type="checkbox" id="c-41585923" checked=""/><div class="controls bullet"><span class="by">lxgr</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41585352">parent</a><span>|</span><a href="#41589318">next</a><span>|</span><label class="collapse" for="c-41585923">[-]</label><label class="expand" for="c-41585923">[2 more]</label></div><br/><div class="children"><div class="content">This won&#x27;t work on many home routers that filter out private&#x2F;local IP A&#x2F;AAAA records from DNS responses to protect against DNS rebinding.</div><br/><div id="41588158" class="c"><input type="checkbox" id="c-41588158" checked=""/><div class="controls bullet"><span class="by">wolrah</span><span>|</span><a href="#41584650">root</a><span>|</span><a href="#41585923">parent</a><span>|</span><a href="#41589318">next</a><span>|</span><label class="collapse" for="c-41588158">[-]</label><label class="expand" for="c-41588158">[1 more]</label></div><br/><div class="children"><div class="content">How many people care about setting up secure connectivity to an internal server but are unable to either disable this behavior or configure their own internal DNS service?<p>My internal DNS names are served <i>from</i> my router and I&#x27;d imagine a lot of the people who would care about this in a home environment are running either open-source or business-class commercial devices that can do the same.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="41589318" class="c"><input type="checkbox" id="c-41589318" checked=""/><div class="controls bullet"><span class="by">sgt</span><span>|</span><a href="#41584650">prev</a><span>|</span><a href="#41585444">next</a><span>|</span><label class="collapse" for="c-41589318">[-]</label><label class="expand" for="c-41589318">[1 more]</label></div><br/><div class="children"><div class="content">I think I&#x27;ve seen this before, in previous versions of iOS. You used to be able to just force a trust, but it would ask you again sometimes. I ended up just using LetsEncrypt certs, the one I use on the main website. Then I have a hook that also copies it to mailu.</div><br/></div></div><div id="41585444" class="c"><input type="checkbox" id="c-41585444" checked=""/><div class="controls bullet"><span class="by">punnerud</span><span>|</span><a href="#41589318">prev</a><span>|</span><a href="#41585295">next</a><span>|</span><label class="collapse" for="c-41585444">[-]</label><label class="expand" for="c-41585444">[16 more]</label></div><br/><div class="children"><div class="content">I wish they could break Snapchat, Facebook etcs ‘s self-signed certs. I own the device, why can’t I see the traffic to and from all of these apps if I add my self-signed cert and approve to use a MITM-proxy.<p>Most apps work, but not everyone.<p>Often called certificate pinning.</div><br/><div id="41589555" class="c"><input type="checkbox" id="c-41589555" checked=""/><div class="controls bullet"><span class="by">hummusFiend</span><span>|</span><a href="#41585444">parent</a><span>|</span><a href="#41585556">next</a><span>|</span><label class="collapse" for="c-41589555">[-]</label><label class="expand" for="c-41589555">[1 more]</label></div><br/><div class="children"><div class="content">Ownership philosophy aside, it&#x27;s funny that you pick those two companies as examples.<p>The former enabled cert pinning (partially) as a response to a MITM[1] from the latter.<p>[1]: <a href="https:&#x2F;&#x2F;arstechnica.com&#x2F;tech-policy&#x2F;2024&#x2F;03&#x2F;facebook-secretly-spied-on-snapchat-usage-to-confuse-advertisers-court-docs-say&#x2F;" rel="nofollow">https:&#x2F;&#x2F;arstechnica.com&#x2F;tech-policy&#x2F;2024&#x2F;03&#x2F;facebook-secretl...</a></div><br/></div></div><div id="41585556" class="c"><input type="checkbox" id="c-41585556" checked=""/><div class="controls bullet"><span class="by">tadfisher</span><span>|</span><a href="#41585444">parent</a><span>|</span><a href="#41589555">prev</a><span>|</span><a href="#41586339">next</a><span>|</span><label class="collapse" for="c-41585556">[-]</label><label class="expand" for="c-41585556">[10 more]</label></div><br/><div class="children"><div class="content">Apple isn&#x27;t doing certificate pinning, it&#x27;s the apps verifying the certificate chain themselves by baking in public keys (or hashes&#x2F;fingerprints). So there&#x27;s not really a way for Apple to break this.</div><br/><div id="41585591" class="c"><input type="checkbox" id="c-41585591" checked=""/><div class="controls bullet"><span class="by">londons_explore</span><span>|</span><a href="#41585444">root</a><span>|</span><a href="#41585556">parent</a><span>|</span><a href="#41585593">next</a><span>|</span><label class="collapse" for="c-41585591">[-]</label><label class="expand" for="c-41585591">[6 more]</label></div><br/><div class="children"><div class="content">Apple could say &quot;If you wanna talk HTTPS, you have to use our HTTPSClient class, and that only supports using the system certificate store and does not support pinning&quot;.<p>Or they could say &quot;All apps that don&#x27;t support custom certificates for https will be denied app store approval&quot;.</div><br/><div id="41585825" class="c"><input type="checkbox" id="c-41585825" checked=""/><div class="controls bullet"><span class="by">lxgr</span><span>|</span><a href="#41585444">root</a><span>|</span><a href="#41585591">parent</a><span>|</span><a href="#41587794">next</a><span>|</span><label class="collapse" for="c-41585825">[-]</label><label class="expand" for="c-41585825">[3 more]</label></div><br/><div class="children"><div class="content">While you&#x27;re at it, make sure to have them prohibit any encryption on top of HTTPS, or apps might just be hiding things in application-level encryption schemes!<p>Banning certificate pinning... Do we really need <i>mandated</i> insecurity by prohibiting apps from doing better than trusting all Apple-trusted CAs around the world?</div><br/><div id="41589713" class="c"><input type="checkbox" id="c-41589713" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#41585444">root</a><span>|</span><a href="#41585825">parent</a><span>|</span><a href="#41586344">next</a><span>|</span><label class="collapse" for="c-41589713">[-]</label><label class="expand" for="c-41589713">[1 more]</label></div><br/><div class="children"><div class="content">They already do that to some extent, actually. Not as you mention, but because of US export compliance laws.</div><br/></div></div><div id="41586344" class="c"><input type="checkbox" id="c-41586344" checked=""/><div class="controls bullet"><span class="by">londons_explore</span><span>|</span><a href="#41585444">root</a><span>|</span><a href="#41585825">parent</a><span>|</span><a href="#41589713">prev</a><span>|</span><a href="#41587794">next</a><span>|</span><label class="collapse" for="c-41586344">[-]</label><label class="expand" for="c-41586344">[1 more]</label></div><br/><div class="children"><div class="content">A better rule might be &quot;You must use our HTTPSClient class, and it either uses the system+user trust stores, or optionally it uses an application supplied certificate authority+the user trust store&quot;.</div><br/></div></div></div></div><div id="41587794" class="c"><input type="checkbox" id="c-41587794" checked=""/><div class="controls bullet"><span class="by">derefr</span><span>|</span><a href="#41585444">root</a><span>|</span><a href="#41585591">parent</a><span>|</span><a href="#41585825">prev</a><span>|</span><a href="#41588803">next</a><span>|</span><label class="collapse" for="c-41587794">[-]</label><label class="expand" for="c-41587794">[1 more]</label></div><br/><div class="children"><div class="content">Or you could ignore the self-signed aspect altogether, and instead give the OS VPN framework (where all network introspection stuff lives on iOS) a hook into the forced-choice HTTPS client — a hook that allows the active system VPN to say either “show me that before you encrypt it &#x2F; after you decrypt it” or “don’t bother encrypting&#x2F;decrypting that; I’ll handle it.”<p>Where, in the latter case, the TLS establishment is opaque, but then the VPN is handed the data that would be going through the TLS logic, plus an (also-opaque) handle to the established TLS-session RSA key, that it can use to finish the encryption&#x2F;decryption process of each stream-chunk on behalf of the app, after doing whatever filtering &#x2F; transformation &#x2F; etc. it wants to do.<p>(Anyone remember Privoxy, the “MITM that works for you” that presaged most of the in-client features of Tor Browser? Same idea; just now with OS support.)</div><br/></div></div><div id="41588803" class="c"><input type="checkbox" id="c-41588803" checked=""/><div class="controls bullet"><span class="by">jesterson</span><span>|</span><a href="#41585444">root</a><span>|</span><a href="#41585591">parent</a><span>|</span><a href="#41587794">prev</a><span>|</span><a href="#41585593">next</a><span>|</span><label class="collapse" for="c-41588803">[-]</label><label class="expand" for="c-41588803">[1 more]</label></div><br/><div class="children"><div class="content">Why they would do that? They can&#x27;t care less about what end user want, particularly in context we are discussing</div><br/></div></div></div></div><div id="41585593" class="c"><input type="checkbox" id="c-41585593" checked=""/><div class="controls bullet"><span class="by">qingcharles</span><span>|</span><a href="#41585444">root</a><span>|</span><a href="#41585556">parent</a><span>|</span><a href="#41585591">prev</a><span>|</span><a href="#41586339">next</a><span>|</span><label class="collapse" for="c-41585593">[-]</label><label class="expand" for="c-41585593">[3 more]</label></div><br/><div class="children"><div class="content">Can you not extract the key from the apps? They are only signed against modification, surely? Can you not read the data they have stored on the handset?</div><br/><div id="41585730" class="c"><input type="checkbox" id="c-41585730" checked=""/><div class="controls bullet"><span class="by">kstrauser</span><span>|</span><a href="#41585444">root</a><span>|</span><a href="#41585593">parent</a><span>|</span><a href="#41585711">next</a><span>|</span><label class="collapse" for="c-41585730">[-]</label><label class="expand" for="c-41585730">[1 more]</label></div><br/><div class="children"><div class="content">No, the idea is that the app has the server&#x27;s public key embedded in them, and they use that to verify that they&#x27;re connecting only to the server with the corresponding private key.</div><br/></div></div><div id="41585711" class="c"><input type="checkbox" id="c-41585711" checked=""/><div class="controls bullet"><span class="by">darknavi</span><span>|</span><a href="#41585444">root</a><span>|</span><a href="#41585593">parent</a><span>|</span><a href="#41585730">prev</a><span>|</span><a href="#41586339">next</a><span>|</span><label class="collapse" for="c-41585711">[-]</label><label class="expand" for="c-41585711">[1 more]</label></div><br/><div class="children"><div class="content">Generally apps like Fiddler generate their own cert which you load onto the device and accept.  My understanding is this allows it intercept and re-write requests.  When you do this, apps using cert. pinning will sniff out your &quot;wrong&quot; cert. and stop working.</div><br/></div></div></div></div></div></div><div id="41586339" class="c"><input type="checkbox" id="c-41586339" checked=""/><div class="controls bullet"><span class="by">benmmurphy</span><span>|</span><a href="#41585444">parent</a><span>|</span><a href="#41585556">prev</a><span>|</span><a href="#41585632">next</a><span>|</span><label class="collapse" for="c-41586339">[-]</label><label class="expand" for="c-41586339">[2 more]</label></div><br/><div class="children"><div class="content">If you jailbreak your phone then you are able to remove certificate pinning. If you just want to do this for research purposes then you can buy an old iPhone6s, iPhone8 or iPhoneX and use checkra1n which uses a bug early in the bootchain in order to jailbreak the phone. I think palera1n is based on checkra1n and might have better support for newer iOS versions: <a href="https:&#x2F;&#x2F;palera.in&#x2F;" rel="nofollow">https:&#x2F;&#x2F;palera.in&#x2F;</a></div><br/><div id="41589717" class="c"><input type="checkbox" id="c-41589717" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#41585444">root</a><span>|</span><a href="#41586339">parent</a><span>|</span><a href="#41585632">next</a><span>|</span><label class="collapse" for="c-41589717">[-]</label><label class="expand" for="c-41589717">[1 more]</label></div><br/><div class="children"><div class="content">No need to jailbreak to remove pinning; you just need to patch the app itself (for example, by replacing the certificate it verifies against or the code that does the verification).</div><br/></div></div></div></div><div id="41585632" class="c"><input type="checkbox" id="c-41585632" checked=""/><div class="controls bullet"><span class="by">mmd45</span><span>|</span><a href="#41585444">parent</a><span>|</span><a href="#41586339">prev</a><span>|</span><a href="#41585295">next</a><span>|</span><label class="collapse" for="c-41585632">[-]</label><label class="expand" for="c-41585632">[2 more]</label></div><br/><div class="children"><div class="content">i saw a video on youtube where a guy intercepted https app traffic from an android app for a smart scale where the app used certificate pinning.  there was some very automated tool for defeating the cert pinning.  unfortunately i can&#x27;t find the video link.</div><br/><div id="41587662" class="c"><input type="checkbox" id="c-41587662" checked=""/><div class="controls bullet"><span class="by">captn3m0</span><span>|</span><a href="#41585444">root</a><span>|</span><a href="#41585632">parent</a><span>|</span><a href="#41585295">next</a><span>|</span><label class="collapse" for="c-41587662">[-]</label><label class="expand" for="c-41587662">[1 more]</label></div><br/><div class="children"><div class="content">Probably objection, which uses Frida internally. Unfortunately, it depends on the implementation. It patches Java X509 classes, but some apps don’t use that.<p>The biggest pain is Flutter apps, which come with their own native TLS stack.</div><br/></div></div></div></div></div></div><div id="41585295" class="c"><input type="checkbox" id="c-41585295" checked=""/><div class="controls bullet"><span class="by">stephenmac98</span><span>|</span><a href="#41585444">prev</a><span>|</span><a href="#41587840">next</a><span>|</span><label class="collapse" for="c-41585295">[-]</label><label class="expand" for="c-41585295">[32 more]</label></div><br/><div class="children"><div class="content">It&#x27;s 2024, PKI best practices are well known and well documented, anybody still using a self-signed certs on their mail server (or anywhere) is either lazy or stupid.<p>Plenty of existing applications will refuse to connect to a self-signed certificate on the belief that allowing the end-user to confirm a certificate offers basically 0 protection against malicious actors.</div><br/><div id="41588855" class="c"><input type="checkbox" id="c-41588855" checked=""/><div class="controls bullet"><span class="by">kortilla</span><span>|</span><a href="#41585295">parent</a><span>|</span><a href="#41585333">next</a><span>|</span><label class="collapse" for="c-41588855">[-]</label><label class="expand" for="c-41588855">[1 more]</label></div><br/><div class="children"><div class="content">It’s 2024, we’ve seen countless examples of sophisticated hackers getting into all kinds of systems. Anybody who makes a blanket statement that you have to trust the public PKI is either lazy or stupid.<p>SSH has TOFU and it works very well if you don’t want a key infrastructure.</div><br/></div></div><div id="41585333" class="c"><input type="checkbox" id="c-41585333" checked=""/><div class="controls bullet"><span class="by">shakow</span><span>|</span><a href="#41585295">parent</a><span>|</span><a href="#41588855">prev</a><span>|</span><a href="#41585306">next</a><span>|</span><label class="collapse" for="c-41585333">[-]</label><label class="expand" for="c-41585333">[9 more]</label></div><br/><div class="children"><div class="content">There is no security hole if I am singing my own certificate for my own mails on my own server; it would mean that I do not trust... myself?<p>Now if I were to provide this as a commercial service, sure, my customers may be worried.</div><br/><div id="41585672" class="c"><input type="checkbox" id="c-41585672" checked=""/><div class="controls bullet"><span class="by">stephenmac98</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41585333">parent</a><span>|</span><a href="#41585678">next</a><span>|</span><label class="collapse" for="c-41585672">[-]</label><label class="expand" for="c-41585672">[4 more]</label></div><br/><div class="children"><div class="content">&quot;This is good enough because I don&#x27;t expect anyone other than me will use it&quot; is lazy<p>What would happen if you connected to your mail client today and you got prompted &quot;Trust this certificate?&quot; showing a certificate with the same subject as the one you generated? Most people would click trust and get MITM&#x27;ed<p>Allowing self signed certificates significantly lowers the bar when it comes to generating a new certificate which can closely resemble an existing certificate<p>Beyond that, the management of multiple trusted certificates creates all sorts of room for confusion in an environment. Presumably most services that you run, run over TLS, do you really maintain every certificate both on it&#x27;s application and on everything which needs to connect to it? That&#x27;s a huge amount more effort than signing all your PKI with an internal CA, the configuring your connecting applications to trust that CA</div><br/><div id="41588461" class="c"><input type="checkbox" id="c-41588461" checked=""/><div class="controls bullet"><span class="by">akira2501</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41585672">parent</a><span>|</span><a href="#41588413">next</a><span>|</span><label class="collapse" for="c-41588461">[-]</label><label class="expand" for="c-41588461">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Most people would click trust and get MITM&#x27;ed<p>So accept self signed on first connection with a detailed panel showing the certificate fingerprint.  Then after that require a more involved process to accept a new certificate.<p>&gt; do you really maintain every certificate both on it&#x27;s application and on everything which needs to connect to it?<p>These are client certificates,  and in some cases,  they&#x27;re actually pretty awesome.<p>&gt; than signing all your PKI with an internal CA<p>That&#x27;s a single layer of abstraction away from a self signed certificate,  because,  your CA _is_ a self signed certificate in this scenario.  You&#x27;ve taken any defense in depth and thrown it right out the window.<p>The purpose of software is to make things possible not enforce random pedantry.</div><br/></div></div><div id="41588413" class="c"><input type="checkbox" id="c-41588413" checked=""/><div class="controls bullet"><span class="by">denkmoon</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41585672">parent</a><span>|</span><a href="#41588461">prev</a><span>|</span><a href="#41588364">next</a><span>|</span><label class="collapse" for="c-41588413">[-]</label><label class="expand" for="c-41588413">[1 more]</label></div><br/><div class="children"><div class="content">&gt;&quot;This is good enough because I don&#x27;t expect anyone other than me will use it&quot; is lazy<p>is both a mischaracterisation of the argument, and wrong. It&#x27;s not lazy, it&#x27;s a choice with pros and cons. Just because you don&#x27;t like it does not mean it is lazy. Again, issuing your own certificates is a choice.<p>Allowing self signed certificates does not &quot;significant lower the bar&quot;. Did you know that all root certificates are self signed?<p>The management of multiple trusted certificates is basic administration for large private networks. Yes, TLS and certificate management can be complex, but that is not a good argument for disallowing it, and the idea that managing your own certificate trust is against &quot;best practices&quot; is ludicrous.</div><br/></div></div></div></div><div id="41585678" class="c"><input type="checkbox" id="c-41585678" checked=""/><div class="controls bullet"><span class="by">anamexis</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41585333">parent</a><span>|</span><a href="#41585672">prev</a><span>|</span><a href="#41585306">next</a><span>|</span><label class="collapse" for="c-41585678">[-]</label><label class="expand" for="c-41585678">[4 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not that you&#x27;re trusting your own certificate, it&#x27;s that you&#x27;re trusting <i>any</i> self-signed certificate, leaving you open to getting MITM&#x27;ed.</div><br/><div id="41588369" class="c"><input type="checkbox" id="c-41588369" checked=""/><div class="controls bullet"><span class="by">denkmoon</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41585678">parent</a><span>|</span><a href="#41585721">next</a><span>|</span><label class="collapse" for="c-41588369">[-]</label><label class="expand" for="c-41588369">[1 more]</label></div><br/><div class="children"><div class="content">Why would this oblige the client to trust any self-signed cert as opposed to trusting all certificates whose chain of trust can be established using the system&#x27;s trust store? The reporter isn&#x27;t asking for mail to automatically trust untrusted certificates, they have added them to the trust store.</div><br/></div></div><div id="41585721" class="c"><input type="checkbox" id="c-41585721" checked=""/><div class="controls bullet"><span class="by">darknavi</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41585678">parent</a><span>|</span><a href="#41588369">prev</a><span>|</span><a href="#41585306">next</a><span>|</span><label class="collapse" for="c-41585721">[-]</label><label class="expand" for="c-41585721">[2 more]</label></div><br/><div class="children"><div class="content">Can&#x27;t you install trusted certificates by hand on iOS?</div><br/><div id="41585901" class="c"><input type="checkbox" id="c-41585901" checked=""/><div class="controls bullet"><span class="by">anamexis</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41585721">parent</a><span>|</span><a href="#41585306">next</a><span>|</span><label class="collapse" for="c-41585901">[-]</label><label class="expand" for="c-41585901">[1 more]</label></div><br/><div class="children"><div class="content">Yes, and you still can. That&#x27;s not broken.</div><br/></div></div></div></div></div></div></div></div><div id="41585306" class="c"><input type="checkbox" id="c-41585306" checked=""/><div class="controls bullet"><span class="by">mmd45</span><span>|</span><a href="#41585295">parent</a><span>|</span><a href="#41585333">prev</a><span>|</span><a href="#41585864">next</a><span>|</span><label class="collapse" for="c-41585306">[-]</label><label class="expand" for="c-41585306">[13 more]</label></div><br/><div class="children"><div class="content">explain how a pinned self signed cert is insecure.  i don&#x27;t see it.  it would seem to be more secure than one signed by a public CA that&#x27;s not pinned.</div><br/><div id="41585868" class="c"><input type="checkbox" id="c-41585868" checked=""/><div class="controls bullet"><span class="by">stephenmac98</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41585306">parent</a><span>|</span><a href="#41585900">next</a><span>|</span><label class="collapse" for="c-41585868">[-]</label><label class="expand" for="c-41585868">[4 more]</label></div><br/><div class="children"><div class="content">I didn&#x27;t say a &quot;pinned self signed cert is insecure&quot;<p>I said that self-signed certs are a lazy choice<p>I also said &quot;allowing the end-user to confirm a certificate offers basically 0 protection&quot;
If an average user get&#x27;s prompted to trust a certificate they will do so blindly
At most, someone might look at the subject, but it&#x27;s 0 effort for a malicious actor to generate a self-signed cert with the same subject, which will be sufficient to fool a decent chunk of users<p>Pinned certificates do relieve the above issue, but it is still a lazy choice that creates increased long term complexity in the configuration of multi-system environments
Presumably most services that you run, run over TLS, do you really maintain every certificate both on it&#x27;s application and on everything which needs to connect to it? That&#x27;s a huge amount more effort than signing all your PKI with an internal CA, the configuring your connecting applications to trust that CA
Using a CA also allows for use of CRLs or OCPS.
If you have 20 devices configured to trust a given self-signed certificate, and that certificate leaks, you now have to update all 20 devices to remove that trust. If you used a CA and implemented either a CRL or OCSP, then you only have to update the respective impelmentation and all of yoru clients will immediately stop trusting that certificate.<p>In Summary:
Using an internal CA offers all the potential protections of pinned certificate, with a number of additional useful security options like OCSP or CRLs
Using Self signed certificates creates more work when handling certificate leaks or certificate rotation
Using a CA is the industry standard practice, I highly doubt there is a single outward facing project by a major company using a directly self-signed certificate.
BUT
A self signed certificate is lower effort on the initial setup<p>Lazy</div><br/><div id="41588876" class="c"><input type="checkbox" id="c-41588876" checked=""/><div class="controls bullet"><span class="by">kortilla</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41585868">parent</a><span>|</span><a href="#41586365">next</a><span>|</span><label class="collapse" for="c-41588876">[-]</label><label class="expand" for="c-41588876">[1 more]</label></div><br/><div class="children"><div class="content">You need to calm down and take a step back to realize not everyone needs to support 20 devices or even 2. What you’ve suggested is a ridiculous blanket statement assuming everyone is setting up things for a fleet of clients.</div><br/></div></div><div id="41586365" class="c"><input type="checkbox" id="c-41586365" checked=""/><div class="controls bullet"><span class="by">mmd45</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41585868">parent</a><span>|</span><a href="#41588876">prev</a><span>|</span><a href="#41585900">next</a><span>|</span><label class="collapse" for="c-41586365">[-]</label><label class="expand" for="c-41586365">[2 more]</label></div><br/><div class="children"><div class="content">for the use case of a single user IMAP server this is all way, way, too complicated and buys you nothing in terms of security.  it&#x27;s completely analogous to why we dont use CAs to validate openssh host certificates.</div><br/><div id="41588659" class="c"><input type="checkbox" id="c-41588659" checked=""/><div class="controls bullet"><span class="by">Twisell</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41586365">parent</a><span>|</span><a href="#41585900">next</a><span>|</span><label class="collapse" for="c-41588659">[-]</label><label class="expand" for="c-41588659">[1 more]</label></div><br/><div class="children"><div class="content">Yes it&#x27;s a analogous using CA is still a higher bar, but it would arguably be better to also use CA to validate openssh host certificates for all the reasons he listed above.<p>So maybe we should ask ourselves why can&#x27;t we just figure out a way to improve handling of CA? Thanks to Let&#x27;s Encrypt https coverage dramatically improved, now is maybe the time for more people to switch to self CA.<p>I agree though that promoting adoption through good tooling and pedagogy would be a nicer approach than Apple slap on the wrist.</div><br/></div></div></div></div></div></div><div id="41585900" class="c"><input type="checkbox" id="c-41585900" checked=""/><div class="controls bullet"><span class="by">lxgr</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41585306">parent</a><span>|</span><a href="#41585868">prev</a><span>|</span><a href="#41585864">next</a><span>|</span><label class="collapse" for="c-41585900">[-]</label><label class="expand" for="c-41585900">[8 more]</label></div><br/><div class="children"><div class="content">It really only is for bad practical reasons, that all coincidentally make it harder and harder to self-host stuff locally without paying a few dollars a month or year here and there to various rent seekers.<p>&quot;Just use Letsencrypt&quot; really is the correct answer for 99% of use cases, but good luck if you find yourself with one from the 1%. You&#x27;ll get an army of people mindlessly parroting &quot;best practices&quot; and will assume you&#x27;re incompetent&#x2F;lazy if you can&#x27;t find a way to make them work for you.</div><br/><div id="41586054" class="c"><input type="checkbox" id="c-41586054" checked=""/><div class="controls bullet"><span class="by">User11110</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41585900">parent</a><span>|</span><a href="#41585864">next</a><span>|</span><label class="collapse" for="c-41586054">[-]</label><label class="expand" for="c-41586054">[7 more]</label></div><br/><div class="children"><div class="content">Internal CAs and self signed certificates are different. You can still generate a CA, sign your certificates, import your own CA into your phone and have that verify your certificates. You don&#x27;t need Letsencrypt. But you&#x27;ll learn in time.</div><br/><div id="41586124" class="c"><input type="checkbox" id="c-41586124" checked=""/><div class="controls bullet"><span class="by">lxgr</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41586054">parent</a><span>|</span><a href="#41585864">next</a><span>|</span><label class="collapse" for="c-41586124">[-]</label><label class="expand" for="c-41586124">[6 more]</label></div><br/><div class="children"><div class="content">Thanks for the condescension, but I know how to do all of this. I&#x27;ve done it before. And because of that, I can first hand attest that it&#x27;s <i>way too complicated</i>.<p>No non-sophisticated user is able to run their own local CA, and that&#x27;s why their NAS, IoT setup etc. all run over HTTP only, which in turn has implications for available web APIs (thanks to &quot;secure origin only&quot; policies and no exemption for local IPs&#x2F;zeroconf domains) and many other things.<p>It also doesn&#x27;t work for at least modern Android apps, since Android no longer makes user-provided CA certificates available to (non-browser) apps anymore, I believe, unless they&#x27;re compiled with a special debugging parameter. On iOS it&#x27;s still possible, but I&#x27;m not sure how long it&#x27;s going to stay that way.</div><br/><div id="41586228" class="c"><input type="checkbox" id="c-41586228" checked=""/><div class="controls bullet"><span class="by">stephenmac98</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41586124">parent</a><span>|</span><a href="#41585864">next</a><span>|</span><label class="collapse" for="c-41586228">[-]</label><label class="expand" for="c-41586228">[5 more]</label></div><br/><div class="children"><div class="content">If a user set up a NAS they should be capable of googling<p>&quot;Openssl how to set up a CA&quot;
&gt; First link fully explains it
<a href="https:&#x2F;&#x2F;arminreiter.com&#x2F;2022&#x2F;01&#x2F;create-your-own-certificate-authority-ca-using-openssl&#x2F;" rel="nofollow">https:&#x2F;&#x2F;arminreiter.com&#x2F;2022&#x2F;01&#x2F;create-your-own-certificate-...</a><p>&quot;How to import CA into iPhone&quot;
&gt; First link fully explains it
<a href="https:&#x2F;&#x2F;www.ibm.com&#x2F;docs&#x2F;en&#x2F;mpf&#x2F;7.1.0?topic=certificates-installing-root-ca-ios" rel="nofollow">https:&#x2F;&#x2F;www.ibm.com&#x2F;docs&#x2F;en&#x2F;mpf&#x2F;7.1.0?topic=certificates-ins...</a><p>&quot;Android app customize trusted CAs&quot;
&gt; First link fully explains it
<a href="https:&#x2F;&#x2F;developer.android.com&#x2F;privacy-and-security&#x2F;security-config" rel="nofollow">https:&#x2F;&#x2F;developer.android.com&#x2F;privacy-and-security&#x2F;security-...</a><p>The barrier to entry on PKI isn&#x27;t that it&#x27;s hard, it seems to be that people just can&#x27;t be bothered, PKI is among the most google-able tech processes out there</div><br/><div id="41586244" class="c"><input type="checkbox" id="c-41586244" checked=""/><div class="controls bullet"><span class="by">lxgr</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41586228">parent</a><span>|</span><a href="#41585864">next</a><span>|</span><label class="collapse" for="c-41586244">[-]</label><label class="expand" for="c-41586244">[4 more]</label></div><br/><div class="children"><div class="content">Setting up a NAS means buying one on Amazon and plugging it in.<p>You&#x27;re completely out of touch with the majority of the userbase of these products if you think even one in 10 NAS users will set up their own CA using OpenSSL (in a secure way that doesn&#x27;t expose themselves to being MITMed even on public sites such as that of their bank down the road).</div><br/><div id="41586479" class="c"><input type="checkbox" id="c-41586479" checked=""/><div class="controls bullet"><span class="by">stephenmac98</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41586244">parent</a><span>|</span><a href="#41585864">next</a><span>|</span><label class="collapse" for="c-41586479">[-]</label><label class="expand" for="c-41586479">[3 more]</label></div><br/><div class="children"><div class="content">In that case the NAS company should, at a minimum, be loading their NAS with a certificate signed by a CA owned by the NAS company, where the trust chain for their NAS&#x27;s certificates are easily available for users to grab and install.<p>In an ideal world they would load a letencrypt certificate and set up the tooling required to automatically pull down a new one when required.<p>A NAS company owned CA doesn&#x27;t offer much of a benefit directly for the plug-n-play users, but it&#x27;s still better than just a self signed cert, and for people who care about their security even a little bit it can significantly protection.<p>Most Plug-n-Play NAS solutions will integrate with a web api and&#x2F;or an app, and it&#x27;s more common than it should be that NAS&#x27;es are exposed to the internet.<p>Once you control both the NAS and it&#x27;s clients, there&#x27;s absolutely no reason not to preload a complete PKI implementation. Even just an installation app which loaded the chain onto any device you wanted to interact with the NAS would be sufficient.<p>If NAS&#x27;es are intended for non-technical people, then any NAS sold should be secure by default.</div><br/><div id="41586497" class="c"><input type="checkbox" id="c-41586497" checked=""/><div class="controls bullet"><span class="by">lxgr</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41586479">parent</a><span>|</span><a href="#41587756">next</a><span>|</span><label class="collapse" for="c-41586497">[-]</label><label class="expand" for="c-41586497">[1 more]</label></div><br/><div class="children"><div class="content">My point is precisely that current browsers and OSes make it impossible to ship a secure-by-default device running a local web server, NAS or otherwise.<p>Requiring users to install a globally trusted CA is a disaster from a security point of view (now my NAS vendor or anyone that hacks them can pose as google.com!), and for this reason doesn’t even work with modern Android apps anymore, for example.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="41585864" class="c"><input type="checkbox" id="c-41585864" checked=""/><div class="controls bullet"><span class="by">lxgr</span><span>|</span><a href="#41585295">parent</a><span>|</span><a href="#41585306">prev</a><span>|</span><a href="#41587840">next</a><span>|</span><label class="collapse" for="c-41585864">[-]</label><label class="expand" for="c-41585864">[8 more]</label></div><br/><div class="children"><div class="content">Or is operating a local-only mailserver not connected to the larger internet? I guess that&#x27;s a lazy or stupid thing too, these days...<p>I&#x27;m a fan of having TLS on by default for everything on the Internet, but I&#x27;m seriously annoyed by the collateral damage to local self-hosted services the implementation of that has caused.<p>It shouldn&#x27;t be this hard to e.g. host web server on my local network that browsers grace with &quot;trusted website APIs&quot;, but it really is. Why on earth do I need to set up Letsencrypt (and by extension at least DNS) on a local website if I want to be able to use a game pad on it, for example!? <a href="https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;Security&#x2F;Secure_Contexts&#x2F;features_restricted_to_secure_contexts" rel="nofollow">https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;Security&#x2F;Secure...</a><p>We absolutely need a localhost and local domain exemption for both TLS&#x2F;X.509 certificate validation and web APIs. For example, TOFU seems like a much better model for that use case than trying to bend the &quot;public Internet&quot; model until it fits. SSH has had considerable success in that model, for example.</div><br/><div id="41586137" class="c"><input type="checkbox" id="c-41586137" checked=""/><div class="controls bullet"><span class="by">stephenmac98</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41585864">parent</a><span>|</span><a href="#41586306">next</a><span>|</span><label class="collapse" for="c-41586137">[-]</label><label class="expand" for="c-41586137">[5 more]</label></div><br/><div class="children"><div class="content">You have to consider the rarity of your use case vs the use case they&#x27;re defending against.<p>How often do you think someone tries to connect their gamepad to a local server? Not never, but the total amount of users doing it is probably high tens or low hundreds at most<p>Compare that to how often gamepad users try to connect to a malicious website - probably hundreds or ever thousands of times a day.<p>Loosening certificate validation further expose the many less than competent users to risk, and the potential impact both on the customer base and on the product&#x27;s reputation are significantly higher than the risks of making it cost a couple bucks a year to allow your gamepad to connect to a local server.<p>For something like a computer, there is a legitimate argument for allowing the user to bypass SSL&#x2F;TLS restrictions (after some resistance) because laptops are used for development.<p>I can almost guarantee that the gamepad developers had an options for certificate validation bypass in it&#x27;s developer options, but they&#x27;re not gonna expose that needlessly when it offers no benefit, but exposes their customers to additional risk. Your gamepad is likely not a development device after all</div><br/><div id="41586183" class="c"><input type="checkbox" id="c-41586183" checked=""/><div class="controls bullet"><span class="by">lxgr</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41586137">parent</a><span>|</span><a href="#41586306">next</a><span>|</span><label class="collapse" for="c-41586183">[-]</label><label class="expand" for="c-41586183">[4 more]</label></div><br/><div class="children"><div class="content">Any malicious website can access my gamepad, since it can trivially get a Letsencrypt certificate – the only requirement for getting &quot;secure origin&quot; API access.<p>What exactly is this restriction preventing me from, then? (And what does a malicious website do with my gamepad data anyway?)<p>&gt; Not never, but the total amount of users doing it is probably high tens or low hundreds at most<p>Yes, I&#x27;m fully aware that local hosting is rare in the grand scheme of things, but I think you&#x27;re vastly underestimating the potential. It&#x27;s currently not even possible to do much better even as a commercial NAS provider, and these are somewhat popular.<p>A big part of that also seems like a chicken and egg problem: Fewer and fewer users do it because it&#x27;s getting harder and harder, thanks to browser standards and OS defaults being largely driven by stakeholders that have no interest in it becoming easier.<p>Yes, none of this is an evil conspiracy; it&#x27;s just a question of incentives and priorities in the end. I just find it so sad how willingly even a &quot;hacker&quot; audience here embraces the move towards more and more centralization, on more than one dimension. (Peer-to-peer vs. client-to-server, &quot;trusted CA only&quot; vs. trust on first use, cloud vs. self-hosting etc.)</div><br/><div id="41586373" class="c"><input type="checkbox" id="c-41586373" checked=""/><div class="controls bullet"><span class="by">stephenmac98</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41586183">parent</a><span>|</span><a href="#41586306">next</a><span>|</span><label class="collapse" for="c-41586373">[-]</label><label class="expand" for="c-41586373">[3 more]</label></div><br/><div class="children"><div class="content">Allowing self-signed certificates creates a higher risk for MITM attacks.
Sure you can trivially get a letsencrypt certificate once you register a DNS entry, but you can&#x27;t trivially get a letsencrypt certificate which validates google.com<p>If you control the local network it&#x27;s trivial to redirect traffic intended for elsewhere, like &quot;google.com&quot;, and trivial to have the server it redirects to present a certificate with &quot;google.com&quot; in it&#x27;s subject or SAN.<p>What would happen on a laptop is you would be hit with a certificate validation error because it was self signed, and on the laptop you have the ability to bypass it, but that ability to bypass is very dangerous. Most users will not properly check a certificate before clicking to trust it.<p>As far as what could be done, &quot;this is a low value device to an attacker&quot; is not a security measure, but beyond that I&#x27;m sure that people have bought games on a gamepad, and anything which involves financial transactions has the potential for malicious behavior with severe consequences</div><br/><div id="41586461" class="c"><input type="checkbox" id="c-41586461" checked=""/><div class="controls bullet"><span class="by">lxgr</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41586373">parent</a><span>|</span><a href="#41586306">next</a><span>|</span><label class="collapse" for="c-41586461">[-]</label><label class="expand" for="c-41586461">[2 more]</label></div><br/><div class="children"><div class="content">Then only allow self-signed certificates for literal IPs or those on .local (and other private&#x2F;reserved TLDs).<p>Right now, .local is completely impossible to encrypt, as well as impossible to use “secure origin” APIs on, which is a shame.</div><br/><div id="41588404" class="c"><input type="checkbox" id="c-41588404" checked=""/><div class="controls bullet"><span class="by">stackskipton</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41586461">parent</a><span>|</span><a href="#41586306">next</a><span>|</span><label class="collapse" for="c-41588404">[-]</label><label class="expand" for="c-41588404">[1 more]</label></div><br/><div class="children"><div class="content">.local also hasn&#x27;t been best practice since 2005. Current recommendation, because of Certificates is to use internal only subdomain of domain you have control over.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="41586306" class="c"><input type="checkbox" id="c-41586306" checked=""/><div class="controls bullet"><span class="by">diogocp</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41585864">parent</a><span>|</span><a href="#41586137">prev</a><span>|</span><a href="#41587840">next</a><span>|</span><label class="collapse" for="c-41586306">[-]</label><label class="expand" for="c-41586306">[2 more]</label></div><br/><div class="children"><div class="content">&gt; We absolutely need a localhost and local domain exemption for both TLS&#x2F;X.509 certificate validation and web APIs.<p>localhost is already considered a secure origin.<p>Local networks are horribly insecure; easily the most likely place for a MITM attack.</div><br/><div id="41586400" class="c"><input type="checkbox" id="c-41586400" checked=""/><div class="controls bullet"><span class="by">lxgr</span><span>|</span><a href="#41585295">root</a><span>|</span><a href="#41586306">parent</a><span>|</span><a href="#41587840">next</a><span>|</span><label class="collapse" for="c-41586400">[-]</label><label class="expand" for="c-41586400">[1 more]</label></div><br/><div class="children"><div class="content">Ah, that’s good – it’s been a while since I last had to work around that.<p>And I generally agree on local networks being insecure. So how about making them more secure instead of marginalizing them even more?<p>TOFU for TLS certs on .local (for Zeroconf, and maybe something else&#x2F;new for local DNS) would be a huge step forward from unencrypted and unauthenticated HTTP. Such sites could even still be displayed with a broken padlock or whatever HTTP gets these days to not create any false expectations by users.</div><br/></div></div></div></div></div></div></div></div><div id="41587840" class="c"><input type="checkbox" id="c-41587840" checked=""/><div class="controls bullet"><span class="by">techbrovanguard</span><span>|</span><a href="#41585295">prev</a><span>|</span><a href="#41585061">next</a><span>|</span><label class="collapse" for="c-41587840">[-]</label><label class="expand" for="c-41587840">[3 more]</label></div><br/><div class="children"><div class="content">tangent, but you can’t send mail on ios with an idn because “the sender address was invalid”, despite it working in macos. i’ve read this is caused by a broken regex check. if any apple employees are reading please take a look</div><br/><div id="41587965" class="c"><input type="checkbox" id="c-41587965" checked=""/><div class="controls bullet"><span class="by">schoen</span><span>|</span><a href="#41587840">parent</a><span>|</span><a href="#41587933">next</a><span>|</span><label class="collapse" for="c-41587965">[-]</label><label class="expand" for="c-41587965">[1 more]</label></div><br/><div class="children"><div class="content">Does some other software (like the MUA) need to convert the IDN to punycode before submitting it to the OS?</div><br/></div></div><div id="41587933" class="c"><input type="checkbox" id="c-41587933" checked=""/><div class="controls bullet"><span class="by">snapetom</span><span>|</span><a href="#41587840">parent</a><span>|</span><a href="#41587965">prev</a><span>|</span><a href="#41585061">next</a><span>|</span><label class="collapse" for="c-41587933">[-]</label><label class="expand" for="c-41587933">[1 more]</label></div><br/><div class="children"><div class="content">There are so many quirks between the way Mail behaves on iOS vs Mac, its infuriating.  At the core of it, if you are manually adding IMAP&#x2F;SMTP&#x2F;POP, both just need to get out of the way and stop trying to help.  Very typical of Apple to think it knows better than you.</div><br/></div></div></div></div><div id="41585061" class="c"><input type="checkbox" id="c-41585061" checked=""/><div class="controls bullet"><span class="by">m463</span><span>|</span><a href="#41587840">prev</a><span>|</span><a href="#41585829">next</a><span>|</span><label class="collapse" for="c-41585061">[-]</label><label class="expand" for="c-41585061">[8 more]</label></div><br/><div class="children"><div class="content">Can you add your own CA cert to your device?</div><br/><div id="41585167" class="c"><input type="checkbox" id="c-41585167" checked=""/><div class="controls bullet"><span class="by">urda</span><span>|</span><a href="#41585061">parent</a><span>|</span><a href="#41585915">next</a><span>|</span><label class="collapse" for="c-41585167">[-]</label><label class="expand" for="c-41585167">[3 more]</label></div><br/><div class="children"><div class="content">Yes, I have a private CA I install on all my Apple devices for my self-signed certs. After I have the root CA on the device, it looks like any other valid SSL to iOS &#x2F; macOS.</div><br/><div id="41585349" class="c"><input type="checkbox" id="c-41585349" checked=""/><div class="controls bullet"><span class="by">cpach</span><span>|</span><a href="#41585061">root</a><span>|</span><a href="#41585167">parent</a><span>|</span><a href="#41585915">next</a><span>|</span><label class="collapse" for="c-41585349">[-]</label><label class="expand" for="c-41585349">[2 more]</label></div><br/><div class="children"><div class="content">Nit-pick: In that case the certs aren’t self-signed, they are regular leaf certs, chained to a “non-standard” CA.</div><br/><div id="41586201" class="c"><input type="checkbox" id="c-41586201" checked=""/><div class="controls bullet"><span class="by">urda</span><span>|</span><a href="#41585061">root</a><span>|</span><a href="#41585349">parent</a><span>|</span><a href="#41585915">next</a><span>|</span><label class="collapse" for="c-41586201">[-]</label><label class="expand" for="c-41586201">[1 more]</label></div><br/><div class="children"><div class="content">This is true, the user I replied to was asking about root CA&#x27;s so I tried to address that.</div><br/></div></div></div></div></div></div><div id="41585915" class="c"><input type="checkbox" id="c-41585915" checked=""/><div class="controls bullet"><span class="by">lxgr</span><span>|</span><a href="#41585061">parent</a><span>|</span><a href="#41585167">prev</a><span>|</span><a href="#41585303">next</a><span>|</span><label class="collapse" for="c-41585915">[-]</label><label class="expand" for="c-41585915">[2 more]</label></div><br/><div class="children"><div class="content">You can, but I find that much less secure than being able to TOFU a self-signed certificate:<p>I once did this, and besides being incredibly unergonomic, now I have to either securely destroy or safely store the signing key for the self-signed CA, or risk malware from performing an MITM against <i>any</i> app on my device, and not just e.g. the email client.</div><br/><div id="41586402" class="c"><input type="checkbox" id="c-41586402" checked=""/><div class="controls bullet"><span class="by">benmmurphy</span><span>|</span><a href="#41585061">root</a><span>|</span><a href="#41585915">parent</a><span>|</span><a href="#41585303">next</a><span>|</span><label class="collapse" for="c-41586402">[-]</label><label class="expand" for="c-41586402">[1 more]</label></div><br/><div class="children"><div class="content">does iphone support name constraints on CA certificates? (<a href="https:&#x2F;&#x2F;systemoverlord.com&#x2F;2020&#x2F;06&#x2F;14&#x2F;private-ca-with-x-509-name-constraints.html" rel="nofollow">https:&#x2F;&#x2F;systemoverlord.com&#x2F;2020&#x2F;06&#x2F;14&#x2F;private-ca-with-x-509-...</a>)</div><br/></div></div></div></div><div id="41585303" class="c"><input type="checkbox" id="c-41585303" checked=""/><div class="controls bullet"><span class="by">mysteria</span><span>|</span><a href="#41585061">parent</a><span>|</span><a href="#41585915">prev</a><span>|</span><a href="#41585133">next</a><span>|</span><label class="collapse" for="c-41585303">[-]</label><label class="expand" for="c-41585303">[1 more]</label></div><br/><div class="children"><div class="content">At least with Safari all my internal SSL web services work properly on iOS with the root cert installed. Not sure about IMAP.</div><br/></div></div><div id="41585133" class="c"><input type="checkbox" id="c-41585133" checked=""/><div class="controls bullet"><span class="by">telgareith</span><span>|</span><a href="#41585061">parent</a><span>|</span><a href="#41585303">prev</a><span>|</span><a href="#41585829">next</a><span>|</span><label class="collapse" for="c-41585133">[-]</label><label class="expand" for="c-41585133">[1 more]</label></div><br/><div class="children"><div class="content">Yes.</div><br/></div></div></div></div><div id="41585829" class="c"><input type="checkbox" id="c-41585829" checked=""/><div class="controls bullet"><span class="by">walrus01</span><span>|</span><a href="#41585061">prev</a><span>|</span><a href="#41585348">next</a><span>|</span><label class="collapse" for="c-41585829">[-]</label><label class="expand" for="c-41585829">[1 more]</label></div><br/><div class="children"><div class="content">I think the solution to this is to:<p>a) run your own private root CA<p>b) install the public part of the root CA on your device and trust it (basically the same as many major enterprise end users of android and ios devices need to do already, so this functionality is extremely unlikely to be removed from the operating system)<p>c) use the root CA to sign a cert for your mail server<p>Yes it&#x27;s a bit more hassle than just trying to tell the mail client to trust your self-signed cert that was generated on the mail server and signed by nothing, but I can understand why apple (given the population of hundreds of millions of NON TECHNICAL end users) doesn&#x27;t want people just blindly clicking through &quot;yes&#x2F;I accept&#x2F;trust this server&quot; self signed cert warnings.</div><br/></div></div><div id="41585348" class="c"><input type="checkbox" id="c-41585348" checked=""/><div class="controls bullet"><span class="by">tiberious726</span><span>|</span><a href="#41585829">prev</a><span>|</span><a href="#41587722">next</a><span>|</span><label class="collapse" for="c-41585348">[-]</label><label class="expand" for="c-41585348">[1 more]</label></div><br/><div class="children"><div class="content">Does anyone know if there is any way to get iOS&#x27;s mail client to present a client cert? Or, barring that, any form of self-hosted MFA.</div><br/></div></div><div id="41583690" class="c"><input type="checkbox" id="c-41583690" checked=""/><div class="controls bullet"><span class="by">mmd45</span><span>|</span><a href="#41587722">prev</a><span>|</span><a href="#41588174">next</a><span>|</span><label class="collapse" for="c-41583690">[-]</label><label class="expand" for="c-41583690">[4 more]</label></div><br/><div class="children"><div class="content">:-(<p>hey lurking apple devs- can someone please escalate this?</div><br/><div id="41585361" class="c"><input type="checkbox" id="c-41585361" checked=""/><div class="controls bullet"><span class="by">cpach</span><span>|</span><a href="#41583690">parent</a><span>|</span><a href="#41588174">next</a><span>|</span><label class="collapse" for="c-41585361">[-]</label><label class="expand" for="c-41585361">[3 more]</label></div><br/><div class="children"><div class="content">I would not bet money that Apple is willing to change their mind regarding this question.</div><br/><div id="41585415" class="c"><input type="checkbox" id="c-41585415" checked=""/><div class="controls bullet"><span class="by">mmd45</span><span>|</span><a href="#41583690">root</a><span>|</span><a href="#41585361">parent</a><span>|</span><a href="#41585418">next</a><span>|</span><label class="collapse" for="c-41585415">[-]</label><label class="expand" for="c-41585415">[1 more]</label></div><br/><div class="children"><div class="content">per apple dev forums it seems like they have a history of breaking this and then fixing it.  additionally, while IMAP is broken, calendars and notes seem to work just fine so hopefully it&#x27;s not deliberate.</div><br/></div></div></div></div></div></div><div id="41588174" class="c"><input type="checkbox" id="c-41588174" checked=""/><div class="controls bullet"><span class="by">yieldcrv</span><span>|</span><a href="#41583690">prev</a><span>|</span><a href="#41584862">next</a><span>|</span><label class="collapse" for="c-41588174">[-]</label><label class="expand" for="c-41588174">[1 more]</label></div><br/><div class="children"><div class="content">I feel like this going to happen to the permissionless side of crypto assets just like whats happened to most of the web 1.0 stuff<p>Walled garden things will take over and something is going to happen to EOAs that make them nerfed or rare<p>but at the same time, that might take 40 years just like these web 1.0 problems so its fine for now</div><br/></div></div><div id="41584862" class="c"><input type="checkbox" id="c-41584862" checked=""/><div class="controls bullet"><span class="by">mmd45</span><span>|</span><a href="#41588174">prev</a><span>|</span><a href="#41585643">next</a><span>|</span><label class="collapse" for="c-41584862">[-]</label><label class="expand" for="c-41584862">[3 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;developer.apple.com&#x2F;forums&#x2F;thread&#x2F;732409" rel="nofollow">https:&#x2F;&#x2F;developer.apple.com&#x2F;forums&#x2F;thread&#x2F;732409</a> (fixed url)<p>seems like the issue is specifically with IMAP- I can confirm that calendar syncing works fine with the self signed cert.<p>this is really disappointing.</div><br/></div></div><div id="41585643" class="c"><input type="checkbox" id="c-41585643" checked=""/><div class="controls bullet"><span class="by">nerdile</span><span>|</span><a href="#41584862">prev</a><span>|</span><label class="collapse" for="c-41585643">[-]</label><label class="expand" for="c-41585643">[3 more]</label></div><br/><div class="children"><div class="content">So in summary: iOS used to accept untrusted certificates, yikes! Now, it validates the server cert, and people are upset? This blatantly insecure thing is broken now and the posters don&#x27;t want to set it up securely?<p>It seems like these people are just struggling with how to properly set up their email server and clients when using a private CA. If you&#x27;re going to use your own CA, then configure your client to trust it. The rest of us should be able to enjoy secure defaults and not have to worry about our less informed family members being tricked into bypassing basic security protections like TLS validation.</div><br/><div id="41585676" class="c"><input type="checkbox" id="c-41585676" checked=""/><div class="controls bullet"><span class="by">mmd45</span><span>|</span><a href="#41585643">parent</a><span>|</span><label class="collapse" for="c-41585676">[-]</label><label class="expand" for="c-41585676">[2 more]</label></div><br/><div class="children"><div class="content">bad summary. it prompted you to accept the certificate upon first use and then pinned it which is far different than what you are describing in terms of security implications.</div><br/><div id="41588756" class="c"><input type="checkbox" id="c-41588756" checked=""/><div class="controls bullet"><span class="by">nerdile</span><span>|</span><a href="#41585643">root</a><span>|</span><a href="#41585676">parent</a><span>|</span><label class="collapse" for="c-41588756">[-]</label><label class="expand" for="c-41588756">[1 more]</label></div><br/><div class="children"><div class="content">TOFU for invalid&#x2F;untrusted certificates is the equivalent of &quot;go there anyway&quot; in a browser  Very different than explicitly trusting a Private CA.  It means that skilled attackers can rely on unskilled users clicking the &quot;trust me, it&#x27;s fine&quot; button.  All so that someone skilled enough to set up their own email server and certificates doesn&#x27;t have to configure their system securely?<p>This is about making bad things harder for unskilled users at the cost of raising the standard for service providers.  If you can set up an email server, you can use easyrsa or step-ca or some manual openssl to create your own root CA. Or, register your self-signed email server as a trusted root CA.<p>Personally, I use easyrsa for my internal CA (with domain path constraints because I&#x27;m paranoid) and letsencrypt for my mail server, but I require VPN access to the user ports on the mail server.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>