<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1727254868408" as="style"/><link rel="stylesheet" href="styles.css?v=1727254868408"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.usevelvet.com">Show HN: Velvet – Store OpenAI requests in your own DB</a> <span class="domain">(<a href="https://www.usevelvet.com">www.usevelvet.com</a>)</span></div><div class="subtext"><span>elawler24</span> | <span>33 comments</span></div><br/><div><div id="41645241" class="c"><input type="checkbox" id="c-41645241" checked=""/><div class="controls bullet"><span class="by">simple10</span><span>|</span><a href="#41641869">next</a><span>|</span><label class="collapse" for="c-41645241">[-]</label><label class="expand" for="c-41645241">[1 more]</label></div><br/><div class="children"><div class="content">Looks cool. Just out of curiosity, how does this compare to other OpenLLMetry-type observation tools like Arize, Traceloop, LangSmith, LlamaTrace, etc.?<p>From personal experience, they&#x27;re all pretty simple to install and use. Then mileage varies in analyzing and taking action on the logs. Does Velvet offer something the others do not?<p>For my client projects, I&#x27;ve been leaning towards open source platforms like Arize so clients have the option of pulling it inhouse if needed. Most often for HIPAA requirements.<p>RAG support would be great to add to Velvet. Specifically pgvector and pinecone traces. But maybe Velvet already supports it and I missed it in the quick read of the docs.</div><br/></div></div><div id="41641869" class="c"><input type="checkbox" id="c-41641869" checked=""/><div class="controls bullet"><span class="by">DeveloperErrata</span><span>|</span><a href="#41645241">prev</a><span>|</span><a href="#41641658">next</a><span>|</span><label class="collapse" for="c-41641869">[-]</label><label class="expand" for="c-41641869">[10 more]</label></div><br/><div class="children"><div class="content">Seems neat - I&#x27;m not sure if you do anything like this but one thing that would be useful with RAG apps (esp at big scales) is vector based search over cache contents. What I mean is that, users can phrase the same question (which has the same answer) in tons of different ways. If I could pass a raw user query into your cache and get back the end result for a previously computed query (even if the current phrasing is a bit different than the current phrasing) then not only would I avoid having to submit a new OpenAI call, but I could also avoid having to run my entire RAG pipeline. So kind of like a &quot;meta-RAG&quot; system that avoids having to run the actual RAG system for queries that are sufficiently similar to a cached query, or like a &quot;approximate&quot; cache.</div><br/><div id="41642276" class="c"><input type="checkbox" id="c-41642276" checked=""/><div class="controls bullet"><span class="by">davidbarker</span><span>|</span><a href="#41641869">parent</a><span>|</span><a href="#41642261">next</a><span>|</span><label class="collapse" for="c-41642276">[-]</label><label class="expand" for="c-41642276">[4 more]</label></div><br/><div class="children"><div class="content">I was impressed by Upstash&#x27;s approach to something similar with their &quot;Semantic Cache&quot;.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;upstash&#x2F;semantic-cache">https:&#x2F;&#x2F;github.com&#x2F;upstash&#x2F;semantic-cache</a><p><pre><code>  &quot;Semantic Cache is a tool for caching natural text based on semantic similarity. It&#x27;s ideal for any task that involves querying or retrieving information based on meaning, such as natural language classification or caching AI responses. Two pieces of text can be similar but not identical (e.g., &quot;great places to check out in Spain&quot; vs. &quot;best places to visit in Spain&quot;). Traditional caching doesn&#x27;t recognize this semantic similarity and misses opportunities for reuse.&quot;</code></pre></div><br/><div id="41642592" class="c"><input type="checkbox" id="c-41642592" checked=""/><div class="controls bullet"><span class="by">OutOfHere</span><span>|</span><a href="#41641869">root</a><span>|</span><a href="#41642276">parent</a><span>|</span><a href="#41642261">next</a><span>|</span><label class="collapse" for="c-41642592">[-]</label><label class="expand" for="c-41642592">[3 more]</label></div><br/><div class="children"><div class="content">I strongly advise <i>not</i> relying on embedding distance alone for it because it&#x27;ll match these two:<p>1. great places to check out in Spain<p>2. great places to check out in northern Spain<p>Logically the two are not the same, and they could in fact be very different despite their semantic similarity. Your users will be frustrated and will hate you for it. If an LLM validates the two as being the same, then it&#x27;s fine, but not otherwise.</div><br/><div id="41642723" class="c"><input type="checkbox" id="c-41642723" checked=""/><div class="controls bullet"><span class="by">DeveloperErrata</span><span>|</span><a href="#41641869">root</a><span>|</span><a href="#41642592">parent</a><span>|</span><a href="#41642261">next</a><span>|</span><label class="collapse" for="c-41642723">[-]</label><label class="expand" for="c-41642723">[2 more]</label></div><br/><div class="children"><div class="content">I agree, a naive approach to approximate caching would probably not work for most use cases.<p>I&#x27;m speculating here, but I wonder if you could use a two stage pipeline for cache retrieval (kinda like the distance search + reranker model technique used by lots of RAG pipelines). Maybe it would be possible to fine-tune a custom reranker model to only output True if 2 queries are semantically <i>equivalent</i> rather than just similar. So the hypothetical model would output True for &quot;how to change the oil&quot; vs. &quot;how to replace the oil&quot; but would output False in your Spain example. In this case you&#x27;d do distance based retrieval first using the normal vector DB techniques, and then use your custom reranker to validate that the potential cache hits are actual hits</div><br/><div id="41644917" class="c"><input type="checkbox" id="c-41644917" checked=""/><div class="controls bullet"><span class="by">OutOfHere</span><span>|</span><a href="#41641869">root</a><span>|</span><a href="#41642723">parent</a><span>|</span><a href="#41642261">next</a><span>|</span><label class="collapse" for="c-41644917">[-]</label><label class="expand" for="c-41644917">[1 more]</label></div><br/><div class="children"><div class="content">Any LLM can output it, but yes, a tuned LLM can benefit with a shorter prompt.</div><br/></div></div></div></div></div></div></div></div><div id="41642261" class="c"><input type="checkbox" id="c-41642261" checked=""/><div class="controls bullet"><span class="by">OutOfHere</span><span>|</span><a href="#41641869">parent</a><span>|</span><a href="#41642276">prev</a><span>|</span><a href="#41642421">next</a><span>|</span><label class="collapse" for="c-41642261">[-]</label><label class="expand" for="c-41642261">[4 more]</label></div><br/><div class="children"><div class="content">That would totally destroy the user experience. Users change their query so they can get a refined result, not so they get the same tired result.</div><br/><div id="41643180" class="c"><input type="checkbox" id="c-41643180" checked=""/><div class="controls bullet"><span class="by">pedrosorio</span><span>|</span><a href="#41641869">root</a><span>|</span><a href="#41642261">parent</a><span>|</span><a href="#41642456">next</a><span>|</span><label class="collapse" for="c-41643180">[-]</label><label class="expand" for="c-41643180">[1 more]</label></div><br/><div class="children"><div class="content">Even across users it’s a terrible idea.<p>Even in the simplest of applications where all you’re doing is passing “last user query” + “retrieved articles” into openAI (and nothing else that is different between users, like previous queries or user data that may be necessary to answer), this will be a bad experience in many cases.<p>Queries A and B may have similar embeddings (similar topic) and it may be correct to retrieve the same articles for context (which you could cache), but they can still be different questions with different correct answers.</div><br/></div></div><div id="41642456" class="c"><input type="checkbox" id="c-41642456" checked=""/><div class="controls bullet"><span class="by">elawler24</span><span>|</span><a href="#41641869">root</a><span>|</span><a href="#41642261">parent</a><span>|</span><a href="#41643180">prev</a><span>|</span><a href="#41642421">next</a><span>|</span><label class="collapse" for="c-41642456">[-]</label><label class="expand" for="c-41642456">[2 more]</label></div><br/><div class="children"><div class="content">Depends on the scenario. In a threaded query, or multiple queries from the same user - you’d want different outputs. If 20 different users are looking for the same result - a cache would return the right answer immediately for no marginal cost.</div><br/><div id="41642569" class="c"><input type="checkbox" id="c-41642569" checked=""/><div class="controls bullet"><span class="by">OutOfHere</span><span>|</span><a href="#41641869">root</a><span>|</span><a href="#41642456">parent</a><span>|</span><a href="#41642421">next</a><span>|</span><label class="collapse" for="c-41642569">[-]</label><label class="expand" for="c-41642569">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s not the use case of the parent comment:<p>&gt; for queries that are sufficiently similar</div><br/></div></div></div></div></div></div><div id="41642421" class="c"><input type="checkbox" id="c-41642421" checked=""/><div class="controls bullet"><span class="by">elawler24</span><span>|</span><a href="#41641869">parent</a><span>|</span><a href="#41642261">prev</a><span>|</span><a href="#41641658">next</a><span>|</span><label class="collapse" for="c-41642421">[-]</label><label class="expand" for="c-41642421">[1 more]</label></div><br/><div class="children"><div class="content">Thanks for the detail! This is a use case we plan to support, and it will be configurable (for when you don’t want it). Some of our customers run into this when different users ask a similar query - “NY-based consumer founders” vs “consumer founders in NY”.</div><br/></div></div></div></div><div id="41641658" class="c"><input type="checkbox" id="c-41641658" checked=""/><div class="controls bullet"><span class="by">OutOfHere</span><span>|</span><a href="#41641869">prev</a><span>|</span><a href="#41642107">next</a><span>|</span><label class="collapse" for="c-41641658">[-]</label><label class="expand" for="c-41641658">[6 more]</label></div><br/><div class="children"><div class="content">A cache is better when it&#x27;s local rather than on the web. And I certainly don&#x27;t need to pay anyone to cache local request responses.</div><br/><div id="41644413" class="c"><input type="checkbox" id="c-41644413" checked=""/><div class="controls bullet"><span class="by">nemothekid</span><span>|</span><a href="#41641658">parent</a><span>|</span><a href="#41643776">next</a><span>|</span><label class="collapse" for="c-41644413">[-]</label><label class="expand" for="c-41644413">[1 more]</label></div><br/><div class="children"><div class="content">As I understand it, your data remains local, as it leverages your own database.</div><br/></div></div><div id="41643776" class="c"><input type="checkbox" id="c-41643776" checked=""/><div class="controls bullet"><span class="by">knowaveragejoe</span><span>|</span><a href="#41641658">parent</a><span>|</span><a href="#41644413">prev</a><span>|</span><a href="#41642107">next</a><span>|</span><label class="collapse" for="c-41643776">[-]</label><label class="expand" for="c-41643776">[4 more]</label></div><br/><div class="children"><div class="content">How would one achieve something similarly locally, short of just running a proxy and stuffing the request&#x2F;response pairs into a DB? I&#x27;m sure it wouldn&#x27;t be too terribly hard to write something, but I figure something open source already exists for OpenAI-compatible APIs.</div><br/><div id="41644936" class="c"><input type="checkbox" id="c-41644936" checked=""/><div class="controls bullet"><span class="by">OutOfHere</span><span>|</span><a href="#41641658">root</a><span>|</span><a href="#41643776">parent</a><span>|</span><a href="#41643825">next</a><span>|</span><label class="collapse" for="c-41644936">[-]</label><label class="expand" for="c-41644936">[1 more]</label></div><br/><div class="children"><div class="content">There are any number of databases and language-specific caching libraries. A custom solution or the use of a proxy isn&#x27;t necessary.</div><br/></div></div><div id="41643825" class="c"><input type="checkbox" id="c-41643825" checked=""/><div class="controls bullet"><span class="by">w-ll</span><span>|</span><a href="#41641658">root</a><span>|</span><a href="#41643776">parent</a><span>|</span><a href="#41644936">prev</a><span>|</span><a href="#41642107">next</a><span>|</span><label class="collapse" for="c-41643825">[-]</label><label class="expand" for="c-41643825">[2 more]</label></div><br/><div class="children"><div class="content">Recently did this workflow.<p>Started with nginx proxy with rules to cache base on url&#x2F;params.  Wanted more control over it and explored lua&#x2F;redis apis, and opted to build a app to do be a little more smart for what i wanted.  Extra ec2 cost is negligible compared to cache savings.</div><br/><div id="41643975" class="c"><input type="checkbox" id="c-41643975" checked=""/><div class="controls bullet"><span class="by">doubleorseven</span><span>|</span><a href="#41641658">root</a><span>|</span><a href="#41643825">parent</a><span>|</span><a href="#41642107">next</a><span>|</span><label class="collapse" for="c-41643975">[-]</label><label class="expand" for="c-41643975">[1 more]</label></div><br/><div class="children"><div class="content">Yes!
It&#x27;s amazing how many things you can do with lua in nginx.
I had a server that served static websites where the files and the certificates for each website were stored in a bucket.
Over 20k websites with 220ms overhead if the certificate wasn&#x27;t cached.</div><br/></div></div></div></div></div></div></div></div><div id="41642107" class="c"><input type="checkbox" id="c-41642107" checked=""/><div class="controls bullet"><span class="by">phillipcarter</span><span>|</span><a href="#41641658">prev</a><span>|</span><a href="#41643973">next</a><span>|</span><label class="collapse" for="c-41642107">[-]</label><label class="expand" for="c-41642107">[2 more]</label></div><br/><div class="children"><div class="content">Congrats on the launch! I love the devex here and things you&#x27;re focusing on.<p>Have you had thoughts on how to you might integrate data from an upstream RAG pipeline, say as a part of a distributed trace, to aid in debugging the core &quot;am I talking to the LLM the right way&quot; use case?</div><br/><div id="41642550" class="c"><input type="checkbox" id="c-41642550" checked=""/><div class="controls bullet"><span class="by">elawler24</span><span>|</span><a href="#41642107">parent</a><span>|</span><a href="#41643973">next</a><span>|</span><label class="collapse" for="c-41642550">[-]</label><label class="expand" for="c-41642550">[1 more]</label></div><br/><div class="children"><div class="content">Thanks! You can layer on as much detail as you need by including meta tags in the header, which is useful for tracing RAG and agent pipelines. But would love to understand your particular RAG setup and whether that gives you enough granularity. Feel free to email me too - emma@usevelvet.com</div><br/></div></div></div></div><div id="41643973" class="c"><input type="checkbox" id="c-41643973" checked=""/><div class="controls bullet"><span class="by">codegladiator</span><span>|</span><a href="#41642107">prev</a><span>|</span><a href="#41643370">next</a><span>|</span><label class="collapse" for="c-41643973">[-]</label><label class="expand" for="c-41643973">[1 more]</label></div><br/><div class="children"><div class="content">Error: Forbidden<p>403: Forbidden ID: bom1::k5dng-1727242244208-0aa02a53f334</div><br/></div></div><div id="41643370" class="c"><input type="checkbox" id="c-41643370" checked=""/><div class="controls bullet"><span class="by">ji_zai</span><span>|</span><a href="#41643973">prev</a><span>|</span><a href="#41644289">next</a><span>|</span><label class="collapse" for="c-41643370">[-]</label><label class="expand" for="c-41643370">[2 more]</label></div><br/><div class="children"><div class="content">Neat! I&#x27;d love to play with this, but site doesn&#x27;t open (403: Forbidden).</div><br/><div id="41643393" class="c"><input type="checkbox" id="c-41643393" checked=""/><div class="controls bullet"><span class="by">elawler24</span><span>|</span><a href="#41643370">parent</a><span>|</span><a href="#41644289">next</a><span>|</span><label class="collapse" for="c-41643393">[-]</label><label class="expand" for="c-41643393">[1 more]</label></div><br/><div class="children"><div class="content">Might be a Cloudflare flag. Can you email me your IP address and we&#x27;ll look into it? emma@usevelvet.com.</div><br/></div></div></div></div><div id="41644289" class="c"><input type="checkbox" id="c-41644289" checked=""/><div class="controls bullet"><span class="by">bachback</span><span>|</span><a href="#41643370">prev</a><span>|</span><a href="#41641514">next</a><span>|</span><label class="collapse" for="c-41644289">[-]</label><label class="expand" for="c-41644289">[1 more]</label></div><br/><div class="children"><div class="content">interesting, seems more of an enterprise offering. its OpenAI only for and you plan to expand to other vendors? anything opensource?</div><br/></div></div><div id="41641514" class="c"><input type="checkbox" id="c-41641514" checked=""/><div class="controls bullet"><span class="by">ramon156</span><span>|</span><a href="#41644289">prev</a><span>|</span><a href="#41641939">next</a><span>|</span><label class="collapse" for="c-41641514">[-]</label><label class="expand" for="c-41641514">[2 more]</label></div><br/><div class="children"><div class="content">&gt; we were frustrated by the lack of LLM infrastructure<p>May I ask what you specifically were frustrated about? Seems like there are more than enough solutions</div><br/><div id="41641698" class="c"><input type="checkbox" id="c-41641698" checked=""/><div class="controls bullet"><span class="by">elawler24</span><span>|</span><a href="#41641514">parent</a><span>|</span><a href="#41641939">next</a><span>|</span><label class="collapse" for="c-41641698">[-]</label><label class="expand" for="c-41641698">[1 more]</label></div><br/><div class="children"><div class="content">There were plenty of UI-based low code platforms. But they required that we adopt new abstractions, use their UI, and log into 5 different tools (logging, observability, analytics, evals, fine-tuning) just to run basic software infra. We didn’t feel these would be long-term solutions, and just wanted the data in our own DB.</div><br/></div></div></div></div><div id="41641939" class="c"><input type="checkbox" id="c-41641939" checked=""/><div class="controls bullet"><span class="by">turnsout</span><span>|</span><a href="#41641514">prev</a><span>|</span><a href="#41641315">next</a><span>|</span><label class="collapse" for="c-41641939">[-]</label><label class="expand" for="c-41641939">[2 more]</label></div><br/><div class="children"><div class="content">Nice! Sort of like Langsmith without the Langchain, which will be an attractive value proposition to many developers.</div><br/><div id="41642324" class="c"><input type="checkbox" id="c-41642324" checked=""/><div class="controls bullet"><span class="by">efriis</span><span>|</span><a href="#41641939">parent</a><span>|</span><a href="#41641315">next</a><span>|</span><label class="collapse" for="c-41642324">[-]</label><label class="expand" for="c-41642324">[1 more]</label></div><br/><div class="children"><div class="content">Howdy Erick from LangChain here! Just a quick clarification that LangSmith is designed to work great for folks not using LangChain as well :)<p>Check out our quickstart for an example of what that looks like! <a href="https:&#x2F;&#x2F;docs.smith.langchain.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;docs.smith.langchain.com&#x2F;</a></div><br/></div></div></div></div><div id="41641315" class="c"><input type="checkbox" id="c-41641315" checked=""/><div class="controls bullet"><span class="by">hiatus</span><span>|</span><a href="#41641939">prev</a><span>|</span><a href="#41641636">next</a><span>|</span><label class="collapse" for="c-41641315">[-]</label><label class="expand" for="c-41641315">[3 more]</label></div><br/><div class="children"><div class="content">This seems to require sharing our data we provide to OpenAI with yet another party. I don&#x27;t see any zero-retention offering.</div><br/><div id="41641679" class="c"><input type="checkbox" id="c-41641679" checked=""/><div class="controls bullet"><span class="by">elawler24</span><span>|</span><a href="#41641315">parent</a><span>|</span><a href="#41641636">next</a><span>|</span><label class="collapse" for="c-41641679">[-]</label><label class="expand" for="c-41641679">[2 more]</label></div><br/><div class="children"><div class="content">The self-serve version is hosted (it’s easy to try locally), but we offer managed deployments where you bring your own DB. In this case your data is 100% yours, in your PostgreSQL. That’s how Find AI uses Velvet.</div><br/><div id="41643793" class="c"><input type="checkbox" id="c-41643793" checked=""/><div class="controls bullet"><span class="by">knowaveragejoe</span><span>|</span><a href="#41641315">root</a><span>|</span><a href="#41641679">parent</a><span>|</span><a href="#41641636">next</a><span>|</span><label class="collapse" for="c-41643793">[-]</label><label class="expand" for="c-41643793">[1 more]</label></div><br/><div class="children"><div class="content">Where is this mentioned? Is there a github(etc) somewhere that someone can use this without using the hosted version?</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>