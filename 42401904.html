<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1734080459057" as="style"/><link rel="stylesheet" href="styles.css?v=1734080459057"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://blog.invisiblethings.org/2013/02/21/converting-untrusted-pdfs-into-trusted.html">Converting untrusted PDFs into trusted ones: The Qubes Way (2013)</a> <span class="domain">(<a href="https://blog.invisiblethings.org">blog.invisiblethings.org</a>)</span></div><div class="subtext"><span>transpute</span> | <span>35 comments</span></div><br/><div><div id="42402176" class="c"><input type="checkbox" id="c-42402176" checked=""/><div class="controls bullet"><span class="by">aspenmayer</span><span>|</span><a href="#42402613">next</a><span>|</span><label class="collapse" for="c-42402176">[-]</label><label class="expand" for="c-42402176">[7 more]</label></div><br/><div class="children"><div class="content">Related:<p><a href="https:&#x2F;&#x2F;dangerzone.rocks&#x2F;" rel="nofollow">https:&#x2F;&#x2F;dangerzone.rocks&#x2F;</a><p><a href="https:&#x2F;&#x2F;github.com&#x2F;freedomofpress&#x2F;dangerzone">https:&#x2F;&#x2F;github.com&#x2F;freedomofpress&#x2F;dangerzone</a><p>&gt; Take potentially dangerous PDFs, office documents, or images and convert them to safe PDFs.<p>From the learn more about page:<p>&gt; Dangerzone was inspired by TrustedPDF but it works in non-Qubes operating systems, which is important, because most of the journalists I know use Macs and probably won’t be jumping to Qubes for some time.<p>&gt; It uses gVisor sandboxes running in Linux containers to open dangerous documents, instead of virtual machines. And it also adds some features that TrustedPDF doesn’t have: it works with any office documents, not just PDFs; it uses optical character recognition (OCR) to make the safe PDF have a searchable text layer; and it compresses the final safe PDF.<p>Previously (announcement and details of gVisor sandboxing etc):<p><i>Safe Ride into the Dangerzone: Reducing Attack Surface with GVisor</i><p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41630076">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41630076</a></div><br/><div id="42402533" class="c"><input type="checkbox" id="c-42402533" checked=""/><div class="controls bullet"><span class="by">prophesi</span><span>|</span><a href="#42402176">parent</a><span>|</span><a href="#42402749">next</a><span>|</span><label class="collapse" for="c-42402533">[-]</label><label class="expand" for="c-42402533">[1 more]</label></div><br/><div class="children"><div class="content">I appreciate this! It would add another attack vector, but I could see the utility in SaaS&#x27;ifying this for servers to convert user-uploaded content on-the-fly.</div><br/></div></div><div id="42402749" class="c"><input type="checkbox" id="c-42402749" checked=""/><div class="controls bullet"><span class="by">mjevans</span><span>|</span><a href="#42402176">parent</a><span>|</span><a href="#42402533">prev</a><span>|</span><a href="#42402613">next</a><span>|</span><label class="collapse" for="c-42402749">[-]</label><label class="expand" for="c-42402749">[5 more]</label></div><br/><div class="children"><div class="content">This looks better than q(ubes)-pdf, but still not ideal.<p>Seems that PyMuPDF is used with a fixed (single pathname) &quot;&#x2F;tmp&#x2F;input_file&quot; ?  <a href="https:&#x2F;&#x2F;github.com&#x2F;freedomofpress&#x2F;dangerzone&#x2F;blob&#x2F;main&#x2F;dangerzone&#x2F;conversion&#x2F;doc_to_pixels.py#L183">https:&#x2F;&#x2F;github.com&#x2F;freedomofpress&#x2F;dangerzone&#x2F;blob&#x2F;main&#x2F;dange...</a><p>Everything else is tossed through LibreOffice.<p>Meanwhile what I&#x27;d prefer for PDFs is some allow-listed set of &#x27;safe&#x27; PDF operations (layout image, layout text) to be used with sanitized inputs (no underflows, overflows, corruption, etc), and the results of any at snapshot-runtime code evaluated and then flattened out to a safe element.  Image OCR could be run atop that.<p>Similarly it&#x27;d be nice if a filter like that existed for the other documents, but as an individual contributor I don&#x27;t have the human power to keep up with that goal and would take the same low hanging fruit worse but secure output route.</div><br/><div id="42403149" class="c"><input type="checkbox" id="c-42403149" checked=""/><div class="controls bullet"><span class="by">kccqzy</span><span>|</span><a href="#42402176">root</a><span>|</span><a href="#42402749">parent</a><span>|</span><a href="#42403621">next</a><span>|</span><label class="collapse" for="c-42403149">[-]</label><label class="expand" for="c-42403149">[2 more]</label></div><br/><div class="children"><div class="content">&gt; allow-listed set of &#x27;safe&#x27; PDF operations (layout image<p>That&#x27;s the problem right there. PDF supports many image formats, including ones that are useful but you may have never heard of like JBIG2 for scanned documents. And the parser for those image formats needed to be secure as well. One very famous exploit is just exploiting JBIG2 (among other things): <a href="https:&#x2F;&#x2F;googleprojectzero.blogspot.com&#x2F;2021&#x2F;12&#x2F;a-deep-dive-into-nso-zero-click.html" rel="nofollow">https:&#x2F;&#x2F;googleprojectzero.blogspot.com&#x2F;2021&#x2F;12&#x2F;a-deep-dive-i...</a></div><br/><div id="42405632" class="c"><input type="checkbox" id="c-42405632" checked=""/><div class="controls bullet"><span class="by">eviks</span><span>|</span><a href="#42402176">root</a><span>|</span><a href="#42403149">parent</a><span>|</span><a href="#42403621">next</a><span>|</span><label class="collapse" for="c-42405632">[-]</label><label class="expand" for="c-42405632">[1 more]</label></div><br/><div class="children"><div class="content">You could simply not support those obscure image formats?</div><br/></div></div></div></div><div id="42403621" class="c"><input type="checkbox" id="c-42403621" checked=""/><div class="controls bullet"><span class="by">lima</span><span>|</span><a href="#42402176">root</a><span>|</span><a href="#42402749">parent</a><span>|</span><a href="#42403149">prev</a><span>|</span><a href="#42402613">next</a><span>|</span><label class="collapse" for="c-42403621">[-]</label><label class="expand" for="c-42403621">[2 more]</label></div><br/><div class="children"><div class="content">In terms of threat model, what is the problem with MuPDF in gVisor (a very tight sandbox)? Obviously, a memory-safe language would be ideal, but there&#x27;s nothing fundamentally wrong with the approach.</div><br/><div id="42404418" class="c"><input type="checkbox" id="c-42404418" checked=""/><div class="controls bullet"><span class="by">mjevans</span><span>|</span><a href="#42402176">root</a><span>|</span><a href="#42403621">parent</a><span>|</span><a href="#42402613">next</a><span>|</span><label class="collapse" for="c-42404418">[-]</label><label class="expand" for="c-42404418">[1 more]</label></div><br/><div class="children"><div class="content">Someone could potentially use the underlying tools directly in their own needs workflow, or an expert in those tools could mention if there&#x27;s a vulnerability &#x2F; common mistake pattern.<p>A single fixed path for the temporary input file means only one copy of the converter can run at a time (unless it&#x27;s in a sandbox, which wasn&#x27;t clear from the context).  A PID specific tempfile or, better, use a standard &#x27;make a new temp file name so there&#x27;s not a collision&#x27; utility, would allow parallel conversions.</div><br/></div></div></div></div></div></div></div></div><div id="42402613" class="c"><input type="checkbox" id="c-42402613" checked=""/><div class="controls bullet"><span class="by">mjevans</span><span>|</span><a href="#42402176">prev</a><span>|</span><a href="#42405913">next</a><span>|</span><label class="collapse" for="c-42402613">[-]</label><label class="expand" for="c-42402613">[2 more]</label></div><br/><div class="children"><div class="content">It looks like the qpdf-converter source, along with everything else, is now on Github according to the Developer &#x2F; Source Code links on the site.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;QubesOS&#x2F;qubes-app-linux-pdf-converter">https:&#x2F;&#x2F;github.com&#x2F;QubesOS&#x2F;qubes-app-linux-pdf-converter</a><p>Their source code seems to take the most obvious path... flatten it to an image printout then possibly do more? <a href="https:&#x2F;&#x2F;github.com&#x2F;QubesOS&#x2F;qubes-app-linux-pdf-converter&#x2F;blob&#x2F;main&#x2F;qubespdfconverter&#x2F;client.py">https:&#x2F;&#x2F;github.com&#x2F;QubesOS&#x2F;qubes-app-linux-pdf-converter&#x2F;blo...</a>  <a href="https:&#x2F;&#x2F;github.com&#x2F;QubesOS&#x2F;qubes-app-linux-pdf-converter&#x2F;blob&#x2F;main&#x2F;qubespdfconverter&#x2F;server.py">https:&#x2F;&#x2F;github.com&#x2F;QubesOS&#x2F;qubes-app-linux-pdf-converter&#x2F;blo...</a><p>Though at a quick skim I can&#x27;t see any OCR steps.</div><br/><div id="42402681" class="c"><input type="checkbox" id="c-42402681" checked=""/><div class="controls bullet"><span class="by">mannykannot</span><span>|</span><a href="#42402613">parent</a><span>|</span><a href="#42405913">next</a><span>|</span><label class="collapse" for="c-42402681">[-]</label><label class="expand" for="c-42402681">[1 more]</label></div><br/><div class="children"><div class="content">I was wondering that myself, but one of the downsides mentioned is that you lose text search, which seems to suggest that OCR is not being used.</div><br/></div></div></div></div><div id="42405913" class="c"><input type="checkbox" id="c-42405913" checked=""/><div class="controls bullet"><span class="by">trollbridge</span><span>|</span><a href="#42402613">prev</a><span>|</span><a href="#42403570">next</a><span>|</span><label class="collapse" for="c-42405913">[-]</label><label class="expand" for="c-42405913">[3 more]</label></div><br/><div class="children"><div class="content">PDFs are essentially a representation of PostScript. PostScript itself is expected to be run in a VM and relativepy straightforward to be isolated&#x2F;sandboxed.<p>So there is a certain sense of absurdity of needing to spin up an entire VM just to render a PDF. Running a standard PostScript renderer in a user executable (perhaps in a chroot jail to be a little bit paranoid) should be enough for safety. Or just stick it inside a Docker.<p>Restrict the permissions on the user process to “read my static data files like fonts” and “write output to this 1 file, or a parsing error to this other 1 file”.</div><br/><div id="42406481" class="c"><input type="checkbox" id="c-42406481" checked=""/><div class="controls bullet"><span class="by">SideQuark</span><span>|</span><a href="#42405913">parent</a><span>|</span><a href="#42406203">next</a><span>|</span><label class="collapse" for="c-42406481">[-]</label><label class="expand" for="c-42406481">[1 more]</label></div><br/><div class="children"><div class="content">PDFs are not simply a representation of postscript. Over the years Adobe has added all sorts of scripting and code execution environments, which are regularly exploited. It supports a lot of image formats, opening yet more attack vectors. It allows plugin integration with every major business app, another wide set of attack surfaces.<p>Here, for example, is but one of the scripting engines <a href="https:&#x2F;&#x2F;helpx.adobe.com&#x2F;acrobat&#x2F;using&#x2F;applying-actions-scripts-pdfs.html" rel="nofollow">https:&#x2F;&#x2F;helpx.adobe.com&#x2F;acrobat&#x2F;using&#x2F;applying-actions-scrip...</a><p>Here’s its JavaScript execution engine for embedding JavaScript in a pdf: <a href="https:&#x2F;&#x2F;opensource.adobe.com&#x2F;dc-acrobat-sdk-docs&#x2F;library&#x2F;jsapiref&#x2F;index.html" rel="nofollow">https:&#x2F;&#x2F;opensource.adobe.com&#x2F;dc-acrobat-sdk-docs&#x2F;library&#x2F;jsa...</a><p>Your belief is what makes them an excellent exploit deployment format. “What can go wrong? I know tech and they cannot be harmful.” Click.</div><br/></div></div><div id="42406203" class="c"><input type="checkbox" id="c-42406203" checked=""/><div class="controls bullet"><span class="by">Terr_</span><span>|</span><a href="#42405913">parent</a><span>|</span><a href="#42406481">prev</a><span>|</span><a href="#42403570">next</a><span>|</span><label class="collapse" for="c-42406203">[-]</label><label class="expand" for="c-42406203">[1 more]</label></div><br/><div class="children"><div class="content">&gt; PostScript itself is expected to be run in a VM and relativepy straightforward to be isolated&#x2F;sandboxed.<p>Expected by who? It&#x27;s been associated with security bugs for decades.</div><br/></div></div></div></div><div id="42403570" class="c"><input type="checkbox" id="c-42403570" checked=""/><div class="controls bullet"><span class="by">dang</span><span>|</span><a href="#42405913">prev</a><span>|</span><a href="#42405894">next</a><span>|</span><label class="collapse" for="c-42403570">[-]</label><label class="expand" for="c-42403570">[1 more]</label></div><br/><div class="children"><div class="content">Related:<p><i>Converting untrusted PDFs into trusted ones: The Qubes Way (2013)</i> - <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=10538888">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=10538888</a> - Nov 2015 (5 comments)</div><br/></div></div><div id="42405894" class="c"><input type="checkbox" id="c-42405894" checked=""/><div class="controls bullet"><span class="by">ngneer</span><span>|</span><a href="#42403570">prev</a><span>|</span><a href="#42404850">next</a><span>|</span><label class="collapse" for="c-42405894">[-]</label><label class="expand" for="c-42405894">[1 more]</label></div><br/><div class="children"><div class="content">Cute idea. Reminds me of the format conversions typically used to lessen the risk of steganography. But boy, the article took forever to get to the PDF -&gt; RGB idea, talking about Simple Representation and everything in between. RGB has less complex parsing, ergo less attack surface.</div><br/></div></div><div id="42404850" class="c"><input type="checkbox" id="c-42404850" checked=""/><div class="controls bullet"><span class="by">ddtaylor</span><span>|</span><a href="#42405894">prev</a><span>|</span><a href="#42403946">next</a><span>|</span><label class="collapse" for="c-42404850">[-]</label><label class="expand" for="c-42404850">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m curious, we use many PDF parsing and formatting tools as part of an ML ingest pipeline. Our goal is to keep the document as close as possible to the original in meaning, but remove unwanted junk and simplify the document by removing everything non-content related or converting it to text the ML can work with.<p>Surely you can do that instead? Parse the PDFs and format them in basic ways without support for &quot;extensions&quot; or anything. Let the user read that before using the &quot;real&quot; document with extensions potentially enabled.</div><br/></div></div><div id="42403946" class="c"><input type="checkbox" id="c-42403946" checked=""/><div class="controls bullet"><span class="by">lysace</span><span>|</span><a href="#42404850">prev</a><span>|</span><a href="#42404771">next</a><span>|</span><label class="collapse" for="c-42403946">[-]</label><label class="expand" for="c-42403946">[12 more]</label></div><br/><div class="children"><div class="content">I wonder how Google handles this. Thousands of their software people will need to read PDFs from all over the web from work machines.</div><br/><div id="42406895" class="c"><input type="checkbox" id="c-42406895" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#42403946">parent</a><span>|</span><a href="#42404220">next</a><span>|</span><label class="collapse" for="c-42406895">[-]</label><label class="expand" for="c-42406895">[1 more]</label></div><br/><div class="children"><div class="content">Chrome</div><br/></div></div><div id="42404220" class="c"><input type="checkbox" id="c-42404220" checked=""/><div class="controls bullet"><span class="by">bangaladore</span><span>|</span><a href="#42403946">parent</a><span>|</span><a href="#42406895">prev</a><span>|</span><a href="#42405519">next</a><span>|</span><label class="collapse" for="c-42404220">[-]</label><label class="expand" for="c-42404220">[9 more]</label></div><br/><div class="children"><div class="content">Are PDF parsers really so bad nowadays (this article is over 10 years old), that opening a PDF opens you up to vulnerabilities?<p>The author made this seem like such a fundamental issue. Is that because PDFs natively have support for say executing code (i doubt) or accessing the filesystem (i doubt), etc...</div><br/><div id="42404345" class="c"><input type="checkbox" id="c-42404345" checked=""/><div class="controls bullet"><span class="by">minitech</span><span>|</span><a href="#42403946">root</a><span>|</span><a href="#42404220">parent</a><span>|</span><a href="#42404276">next</a><span>|</span><label class="collapse" for="c-42404345">[-]</label><label class="expand" for="c-42404345">[5 more]</label></div><br/><div class="children"><div class="content">&gt; Are PDF parsers really so bad nowadays (this article is over 10 years old), that opening a PDF opens you up to vulnerabilities?<p>Yep, here’s an Acrobat Reader release from two days ago that fixes two arbitrary code execution vulnerabilities since the previous one two months ago: <a href="https:&#x2F;&#x2F;helpx.adobe.com&#x2F;security&#x2F;products&#x2F;acrobat&#x2F;apsb24-92.html" rel="nofollow">https:&#x2F;&#x2F;helpx.adobe.com&#x2F;security&#x2F;products&#x2F;acrobat&#x2F;apsb24-92....</a><p>I haven’t looked into browser-embedded PDF viewers enough to know how they compare to other software – they’re definitely much safer than Acrobat and still not completely safe (e.g. CVE-2023-1530 in Chrome wasn’t that long ago) – but I would expect them to be at least as safe as other browser functionality.<p>&gt; Is that because PDFs natively have support for say executing code (i doubt)<p>They do (<a href="https:&#x2F;&#x2F;helpx.adobe.com&#x2F;ca&#x2F;acrobat&#x2F;using&#x2F;applying-actions-scripts-pdfs.html#action_types" rel="nofollow">https:&#x2F;&#x2F;helpx.adobe.com&#x2F;ca&#x2F;acrobat&#x2F;using&#x2F;applying-actions-sc...</a>, including “Run a JavaScript”, although that has to be enabled), but indeed that’s not <i>the</i> one fundamental issue; it’s usually just standard vulnerabilities of memory unsafety or terrible design (XML).</div><br/><div id="42404453" class="c"><input type="checkbox" id="c-42404453" checked=""/><div class="controls bullet"><span class="by">lysace</span><span>|</span><a href="#42403946">root</a><span>|</span><a href="#42404345">parent</a><span>|</span><a href="#42404276">next</a><span>|</span><label class="collapse" for="c-42404453">[-]</label><label class="expand" for="c-42404453">[4 more]</label></div><br/><div class="children"><div class="content">Yeah, avoiding Adobe software is probably a mandatory first step in this context.<p>If I remember correctly Google bought a source code license from some Aussie company (?) for rendering PDFs in Chrome. That was like a decade ago though. I wonder what happened since. Probably lots.</div><br/><div id="42404892" class="c"><input type="checkbox" id="c-42404892" checked=""/><div class="controls bullet"><span class="by">AlotOfReading</span><span>|</span><a href="#42403946">root</a><span>|</span><a href="#42404453">parent</a><span>|</span><a href="#42404276">next</a><span>|</span><label class="collapse" for="c-42404892">[-]</label><label class="expand" for="c-42404892">[3 more]</label></div><br/><div class="children"><div class="content">Google bought a license from Foxit, a Chinese company. They&#x27;ve open sourced it since. Mozilla wrote their own and also open sourced it, PDF.js</div><br/><div id="42404977" class="c"><input type="checkbox" id="c-42404977" checked=""/><div class="controls bullet"><span class="by">lysace</span><span>|</span><a href="#42403946">root</a><span>|</span><a href="#42404892">parent</a><span>|</span><a href="#42404276">next</a><span>|</span><label class="collapse" for="c-42404977">[-]</label><label class="expand" for="c-42404977">[2 more]</label></div><br/><div class="children"><div class="content">I do believe Foxit didn&#x27;t present itself as a Chinese company at the time. Not sure where I got the Aussie thing from. They do and&#x2F;or did have a Melbourne office. Perhaps its address was used for marketing purposes at the time.<p><a href="https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20140529210328&#x2F;http:&#x2F;&#x2F;www.foxitsoftware.com&#x2F;company&#x2F;" rel="nofollow">https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20140529210328&#x2F;http:&#x2F;&#x2F;www.foxits...</a><p>&gt; Founded in 2001, Foxit is a leading software provider of solutions for reading, editing, creating, organizing, and securing PDF documents. Headquartered in Fremont, CA, USA, Foxit has operations worldwide in China, Belgium, Japan, and Taiwan</div><br/><div id="42405037" class="c"><input type="checkbox" id="c-42405037" checked=""/><div class="controls bullet"><span class="by">gruez</span><span>|</span><a href="#42403946">root</a><span>|</span><a href="#42404977">parent</a><span>|</span><a href="#42404276">next</a><span>|</span><label class="collapse" for="c-42405037">[-]</label><label class="expand" for="c-42405037">[1 more]</label></div><br/><div class="children"><div class="content">There&#x27;s more details in the wikipedia talk page: <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Talk:Foxit_Software" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Talk:Foxit_Software</a><p>seems like most of their presence was in china, and was domiciled in china, but they had sales &quot;offices&quot; in other countries and so they emphasized that part for better PR.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="42404276" class="c"><input type="checkbox" id="c-42404276" checked=""/><div class="controls bullet"><span class="by">machinestops</span><span>|</span><a href="#42403946">root</a><span>|</span><a href="#42404220">parent</a><span>|</span><a href="#42404345">prev</a><span>|</span><a href="#42405519">next</a><span>|</span><label class="collapse" for="c-42404276">[-]</label><label class="expand" for="c-42404276">[3 more]</label></div><br/><div class="children"><div class="content">PDFs support JavaScript. Here&#x27;s Adobe&#x27;s guide on how to add JS to your PDFs: <a href="https:&#x2F;&#x2F;helpx.adobe.com&#x2F;uk&#x2F;acrobat&#x2F;using&#x2F;applying-actions-scripts-pdfs.html" rel="nofollow">https:&#x2F;&#x2F;helpx.adobe.com&#x2F;uk&#x2F;acrobat&#x2F;using&#x2F;applying-actions-sc...</a></div><br/><div id="42404667" class="c"><input type="checkbox" id="c-42404667" checked=""/><div class="controls bullet"><span class="by">Gigachad</span><span>|</span><a href="#42403946">root</a><span>|</span><a href="#42404276">parent</a><span>|</span><a href="#42405519">next</a><span>|</span><label class="collapse" for="c-42404667">[-]</label><label class="expand" for="c-42404667">[2 more]</label></div><br/><div class="children"><div class="content">It might be in the PDF spec, but most viewers won&#x27;t run JS.</div><br/><div id="42406516" class="c"><input type="checkbox" id="c-42406516" checked=""/><div class="controls bullet"><span class="by">SideQuark</span><span>|</span><a href="#42403946">root</a><span>|</span><a href="#42404667">parent</a><span>|</span><a href="#42405519">next</a><span>|</span><label class="collapse" for="c-42406516">[-]</label><label class="expand" for="c-42406516">[1 more]</label></div><br/><div class="children"><div class="content">The most widely ones run JS. And the majority of pdf exploits are not js, but a wide mix over all the things a pdf reader supports.<p><a href="https:&#x2F;&#x2F;cve.mitre.org&#x2F;cgi-bin&#x2F;cvekey.cgi?keyword=Acrobat" rel="nofollow">https:&#x2F;&#x2F;cve.mitre.org&#x2F;cgi-bin&#x2F;cvekey.cgi?keyword=Acrobat</a></div><br/></div></div></div></div></div></div></div></div><div id="42405519" class="c"><input type="checkbox" id="c-42405519" checked=""/><div class="controls bullet"><span class="by">o11c</span><span>|</span><a href="#42403946">parent</a><span>|</span><a href="#42404220">prev</a><span>|</span><a href="#42404771">next</a><span>|</span><label class="collapse" for="c-42405519">[-]</label><label class="expand" for="c-42405519">[1 more]</label></div><br/><div class="children"><div class="content">On non-Qubes systems, it doesn&#x27;t take 5 seconds to launch a sandbox.</div><br/></div></div></div></div><div id="42404771" class="c"><input type="checkbox" id="c-42404771" checked=""/><div class="controls bullet"><span class="by">brian-armstrong</span><span>|</span><a href="#42403946">prev</a><span>|</span><a href="#42404675">next</a><span>|</span><label class="collapse" for="c-42404771">[-]</label><label class="expand" for="c-42404771">[5 more]</label></div><br/><div class="children"><div class="content">This seems like a lot of work. Surely you can just rewrite the PDF parser in Rust?</div><br/><div id="42405618" class="c"><input type="checkbox" id="c-42405618" checked=""/><div class="controls bullet"><span class="by">antegamisou</span><span>|</span><a href="#42404771">parent</a><span>|</span><a href="#42404969">next</a><span>|</span><label class="collapse" for="c-42405618">[-]</label><label class="expand" for="c-42405618">[1 more]</label></div><br/><div class="children"><div class="content">Many thanks for this <i>HN moment</i> comment.</div><br/></div></div><div id="42404969" class="c"><input type="checkbox" id="c-42404969" checked=""/><div class="controls bullet"><span class="by">random3</span><span>|</span><a href="#42404771">parent</a><span>|</span><a href="#42405618">prev</a><span>|</span><a href="#42405301">next</a><span>|</span><label class="collapse" for="c-42404969">[-]</label><label class="expand" for="c-42404969">[1 more]</label></div><br/><div class="children"><div class="content">because that&#x27;s less work? 
there are PDF parsers and renderers in Rust, but unclear what&#x27;s the goal? There are alos PDF parsers and renderers in JS&#x2F;TS, etc.</div><br/></div></div><div id="42405301" class="c"><input type="checkbox" id="c-42405301" checked=""/><div class="controls bullet"><span class="by">binarymax</span><span>|</span><a href="#42404771">parent</a><span>|</span><a href="#42404969">prev</a><span>|</span><a href="#42404675">next</a><span>|</span><label class="collapse" for="c-42405301">[-]</label><label class="expand" for="c-42405301">[2 more]</label></div><br/><div class="children"><div class="content">I honestly can’t tell if you’re serious or not.</div><br/><div id="42405352" class="c"><input type="checkbox" id="c-42405352" checked=""/><div class="controls bullet"><span class="by">brian-armstrong</span><span>|</span><a href="#42404771">root</a><span>|</span><a href="#42405301">parent</a><span>|</span><a href="#42404675">next</a><span>|</span><label class="collapse" for="c-42405352">[-]</label><label class="expand" for="c-42405352">[1 more]</label></div><br/><div class="children"><div class="content">I can&#x27;t either</div><br/></div></div></div></div></div></div><div id="42404675" class="c"><input type="checkbox" id="c-42404675" checked=""/><div class="controls bullet"><span class="by">random3</span><span>|</span><a href="#42404771">prev</a><span>|</span><a href="#42403254">next</a><span>|</span><label class="collapse" for="c-42404675">[-]</label><label class="expand" for="c-42404675">[1 more]</label></div><br/><div class="children"><div class="content">isn&#x27;t it possible to scan PDFs for unsafe code? Having a tool that makes docs safe from &quot;now on&quot; is semi useful, if you don&#x27;t know whether you were already compromised.</div><br/></div></div><div id="42403254" class="c"><input type="checkbox" id="c-42403254" checked=""/><div class="controls bullet"><span class="by">nickpsecurity</span><span>|</span><a href="#42404675">prev</a><span>|</span><label class="collapse" for="c-42403254">[-]</label><label class="expand" for="c-42403254">[1 more]</label></div><br/><div class="children"><div class="content">This is a good approach. It’s an old, design pattern in high-assurance systems where a gateway converts things into usable, safer form. Another concept, often called LANGSEC, is generating parsers from simple grammars that are hopefully bulletproof. These ideas can be combined.<p>Two more things can happen.<p>The increasing volume of memory-safe utilities means they can be used on one or both sides of this. That might prevent the exploit entirely. If a memory-safe CPU, it can still help to isolate in case of hardware failures (esp bitflips).<p>It can also be used to boost performance in non-Qubes systems where a secure (or OSS) processor is in use. They’re often slower than commodity CPU’s. So, one can use the disposable VM’s on commodity CPU’s to filter data (block most attacks), transform it, and send it over simple, wire protocol. Commodity VM’s might also present it back to the user in dressed up form.<p>Outside of security, a long time ago, they were doing similar things to decrease latency and boost bandwidth on Beowulf clusters. A team made Fast (or Active?) Messages to eliminate TCP&#x2F;IP as a bottleneck. So, sometimes a security technique can also be a performance booster.</div><br/></div></div></div></div></div></div></div></body></html>