<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1684141261381" as="style"/><link rel="stylesheet" href="styles.css?v=1684141261381"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://xstate.js.org/docs/">JavaScript state machines and statecharts</a> <span class="domain">(<a href="https://xstate.js.org">xstate.js.org</a>)</span></div><div class="subtext"><span>stefankuehnel</span> | <span>52 comments</span></div><br/><div><div id="35942427" class="c"><input type="checkbox" id="c-35942427" checked=""/><div class="controls bullet"><span class="by">rektide</span><span>|</span><a href="#35942393">next</a><span>|</span><label class="collapse" for="c-35942427">[-]</label><label class="expand" for="c-35942427">[18 more]</label></div><br/><div class="children"><div class="content">What&#x27;s the quote about &quot;those who do not do X end up with an unintensional half built reimplementation of X&quot;?<p>My personal recent example is a wizard in a web app built as a single major component, with some subcomponents, that goes forward and backwards through 3 different major flows depending on use case. It&#x27;s been somewhat tamed over time, but we still find cases where an error on step X gets us into an unrecoverable state, sometimes with actual longstanding data impact or where closing &amp; reopening the modal doesnt get the user back on course. With a state machine, I feel, things would be far more predictable.<p>Having some actual Computer Science in your coding can be a huge boon.</div><br/><div id="35944188" class="c"><input type="checkbox" id="c-35944188" checked=""/><div class="controls bullet"><span class="by">qwtel</span><span>|</span><a href="#35942427">parent</a><span>|</span><a href="#35945318">next</a><span>|</span><label class="collapse" for="c-35944188">[-]</label><label class="expand" for="c-35944188">[3 more]</label></div><br/><div class="children"><div class="content">In my view it&#x27;s the other way around. If you stick to a state machine for your app logic, you&#x27;ll end up with an unintentional half built reimplementation of a general purpose programming language.<p>The fact these state machines aren&#x27;t the mathematical constructs from CS, but &quot;extended&quot; versions with &quot;context&quot; (this is where all the actual app state goes), should be the giveaway that they aren&#x27;t a sufficiently capable model for the demands of UI programming. After you add extensions for every possible need, what do you end up with?<p>I understand the appeal though. UI development is a complicated mess, and people want a formula to make sense of it all. I&#x27;ve went through several iterations of these cookie cutter patterns form MVC to MVVMC++ to flux to redux to redux-saga to immutable.js to Recoil and so on. At best these marginally improve the situation, at worst they end up adding complexity on top of the inherent mess.<p>At the risk of missing out on the One True Way of doing UI development, I&#x27;ll pass on this latest installment. I keep open the possibility that state machines &quot;marginally improve the situation&quot; though.</div><br/><div id="35944951" class="c"><input type="checkbox" id="c-35944951" checked=""/><div class="controls bullet"><span class="by">oblak</span><span>|</span><a href="#35942427">root</a><span>|</span><a href="#35944188">parent</a><span>|</span><a href="#35944519">next</a><span>|</span><label class="collapse" for="c-35944951">[-]</label><label class="expand" for="c-35944951">[1 more]</label></div><br/><div class="children"><div class="content">With Vue and Pinia, one doesn&#x27;t even have to bother with patterns. Frankly, I think Redux does more harm than good. Their borderline incomprehensible documentation is a testament to that.</div><br/></div></div><div id="35944519" class="c"><input type="checkbox" id="c-35944519" checked=""/><div class="controls bullet"><span class="by">samsquire</span><span>|</span><a href="#35942427">root</a><span>|</span><a href="#35944188">parent</a><span>|</span><a href="#35944951">prev</a><span>|</span><a href="#35945318">next</a><span>|</span><label class="collapse" for="c-35944519">[-]</label><label class="expand" for="c-35944519">[1 more]</label></div><br/><div class="children"><div class="content">I am too looking for a solution to make UI development easier to understand and less complicated. I am working on a state machine formulation too.<p>I&#x27;ve worked on MVVM and redux. GUIs end up complicated and difficult to understand if you&#x27;re not familiar with the codebase.</div><br/></div></div></div></div><div id="35945318" class="c"><input type="checkbox" id="c-35945318" checked=""/><div class="controls bullet"><span class="by">marginalia_nu</span><span>|</span><a href="#35942427">parent</a><span>|</span><a href="#35944188">prev</a><span>|</span><a href="#35942527">next</a><span>|</span><label class="collapse" for="c-35945318">[-]</label><label class="expand" for="c-35945318">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve always sort of thought of explicit state machines as a sort of failure state when it comes to finding a good abstraction for some logic.  Explicit state machines are the sledgehammer that lets you bludgeon through the problem space regardless.<p>I get that they&#x27;re an useful intermediate state for parsers and so, but still. I&#x27;m no fan.</div><br/></div></div><div id="35942527" class="c"><input type="checkbox" id="c-35942527" checked=""/><div class="controls bullet"><span class="by">tshaddox</span><span>|</span><a href="#35942427">parent</a><span>|</span><a href="#35945318">prev</a><span>|</span><a href="#35944278">next</a><span>|</span><label class="collapse" for="c-35942527">[-]</label><label class="expand" for="c-35942527">[6 more]</label></div><br/><div class="children"><div class="content">I think you’re looking for this:<p><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Greenspun%27s_tenth_rule" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Greenspun%27s_tenth_rule</a><p>&gt; Any sufficiently complicated C or Fortran program contains an ad hoc, informally-specified, bug-ridden, slow implementation of half of Common Lisp.</div><br/><div id="35943869" class="c"><input type="checkbox" id="c-35943869" checked=""/><div class="controls bullet"><span class="by">btown</span><span>|</span><a href="#35942427">root</a><span>|</span><a href="#35942527">parent</a><span>|</span><a href="#35943419">next</a><span>|</span><label class="collapse" for="c-35943869">[-]</label><label class="expand" for="c-35943869">[2 more]</label></div><br/><div class="children"><div class="content">My favorite iteration on this, linked there, is <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Jamie_Zawinski#Zawinski&#x27;s_Law" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Jamie_Zawinski#Zawinski&#x27;s_Law</a> :<p>&gt; Every program attempts to expand until it can read mail. Those programs which cannot so expand are replaced by ones which can.<p>And my own take:<p>&gt; Every program attempts to expand until it can (a) interpret half of Common Lisp; (b) read and write mail; AND (c) implement a nontrivial subset of Quickbooks Online, including double-entry accounting. Those programs which cannot so expand are eventually forced to thus expand by the mythical force known as the Stakeholder.<p>One must embrace the inevitability of the &quot;rule.trigger_logic&quot; column, of the &quot;how do we make this work like gmail&quot; question, and of the dreaded interplay between &quot;balance due&quot; and &quot;transaction&#x2F;account adjustments.&quot;<p>Only then can one find inner peace.</div><br/><div id="35945283" class="c"><input type="checkbox" id="c-35945283" checked=""/><div class="controls bullet"><span class="by">FridgeSeal</span><span>|</span><a href="#35942427">root</a><span>|</span><a href="#35943869">parent</a><span>|</span><a href="#35943419">next</a><span>|</span><label class="collapse" for="c-35945283">[-]</label><label class="expand" for="c-35945283">[1 more]</label></div><br/><div class="children"><div class="content">I feel like this should be increased to include “read and generate pdf’s”.<p>I’ve worked at a concerning number of places now where needing to do waaaay too much with PDF’s has inevitably become a core part of the product.</div><br/></div></div></div></div><div id="35943419" class="c"><input type="checkbox" id="c-35943419" checked=""/><div class="controls bullet"><span class="by">lowq</span><span>|</span><a href="#35942427">root</a><span>|</span><a href="#35942527">parent</a><span>|</span><a href="#35943869">prev</a><span>|</span><a href="#35942694">next</a><span>|</span><label class="collapse" for="c-35943419">[-]</label><label class="expand" for="c-35943419">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s a good one. I&#x27;ve been trying to find a source for: &quot;If you try to write your own TCP, you&#x27;ll end up with TCP, but slow.&quot;<p>Cannot for the life of me figure out where I read this.</div><br/></div></div><div id="35942694" class="c"><input type="checkbox" id="c-35942694" checked=""/><div class="controls bullet"><span class="by">quink</span><span>|</span><a href="#35942427">root</a><span>|</span><a href="#35942527">parent</a><span>|</span><a href="#35943419">prev</a><span>|</span><a href="#35944278">next</a><span>|</span><label class="collapse" for="c-35942694">[-]</label><label class="expand" for="c-35942694">[2 more]</label></div><br/><div class="children"><div class="content">Half that quote and half Henry Spencer&#x27;s &quot;Those who do not understand Unix are condemned to reinvent it, poorly.&quot;</div><br/><div id="35942937" class="c"><input type="checkbox" id="c-35942937" checked=""/><div class="controls bullet"><span class="by">rektide</span><span>|</span><a href="#35942427">root</a><span>|</span><a href="#35942694">parent</a><span>|</span><a href="#35944278">next</a><span>|</span><label class="collapse" for="c-35942937">[-]</label><label class="expand" for="c-35942937">[1 more]</label></div><br/><div class="children"><div class="content">This is an excellent additional contribution which I did not think of. Thank you all. Both feel real here.</div><br/></div></div></div></div></div></div><div id="35944278" class="c"><input type="checkbox" id="c-35944278" checked=""/><div class="controls bullet"><span class="by">keeganpoppen</span><span>|</span><a href="#35942427">parent</a><span>|</span><a href="#35942527">prev</a><span>|</span><a href="#35942520">next</a><span>|</span><label class="collapse" for="c-35944278">[-]</label><label class="expand" for="c-35944278">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Having some actual Computer Science in your coding can be a huge boon.<p>this is so, so underrated... i could get pretty flame-y in defense of this point, but a lot of said flame, admittedly, &quot;doth protest too much&quot;, as someone trained to (allegedly) be a computer &quot;scientist&quot;. but what i will say is that if i had a dollar for every time that software i rely on breaks and&#x2F;or sucks because there is not enough &quot;science&quot;... there would be a lot more software that actually &quot;<i>works</i>&quot; (tm) in the world (xD).</div><br/></div></div><div id="35942520" class="c"><input type="checkbox" id="c-35942520" checked=""/><div class="controls bullet"><span class="by">mathgladiator</span><span>|</span><a href="#35942427">parent</a><span>|</span><a href="#35944278">prev</a><span>|</span><a href="#35943980">next</a><span>|</span><label class="collapse" for="c-35942520">[-]</label><label class="expand" for="c-35942520">[1 more]</label></div><br/><div class="children"><div class="content">Greenspun&#x27;s tenth rule?<p>&gt; Any sufficiently complicated C or Fortran program contains an ad hoc, informally-specified, bug-ridden, slow implementation of half of Common Lisp.<p><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Greenspun%27s_tenth_rule" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Greenspun%27s_tenth_rule</a></div><br/></div></div><div id="35943980" class="c"><input type="checkbox" id="c-35943980" checked=""/><div class="controls bullet"><span class="by">tlarkworthy</span><span>|</span><a href="#35942427">parent</a><span>|</span><a href="#35942520">prev</a><span>|</span><a href="#35943895">next</a><span>|</span><label class="collapse" for="c-35943980">[-]</label><label class="expand" for="c-35943980">[3 more]</label></div><br/><div class="children"><div class="content">I find I got the same issues even with state machines. If the problem is complex, you have to consider every edge case with or without state machines. The essential complexity is the same.</div><br/><div id="35944052" class="c"><input type="checkbox" id="c-35944052" checked=""/><div class="controls bullet"><span class="by">nailer</span><span>|</span><a href="#35942427">root</a><span>|</span><a href="#35943980">parent</a><span>|</span><a href="#35943895">next</a><span>|</span><label class="collapse" for="c-35944052">[-]</label><label class="expand" for="c-35944052">[2 more]</label></div><br/><div class="children"><div class="content">I think the idea is the state machine makes you consider every possibility.<p>For example, what happens when an enemy gets shot when they are in the ‘dead’ state?</div><br/><div id="35945365" class="c"><input type="checkbox" id="c-35945365" checked=""/><div class="controls bullet"><span class="by">tlarkworthy</span><span>|</span><a href="#35942427">root</a><span>|</span><a href="#35944052">parent</a><span>|</span><a href="#35943895">next</a><span>|</span><label class="collapse" for="c-35945365">[-]</label><label class="expand" for="c-35945365">[1 more]</label></div><br/><div class="children"><div class="content">They still go into trap states. If you try to remove default transitions your source code complexity explodes.</div><br/></div></div></div></div></div></div><div id="35943895" class="c"><input type="checkbox" id="c-35943895" checked=""/><div class="controls bullet"><span class="by">8note</span><span>|</span><a href="#35942427">parent</a><span>|</span><a href="#35943980">prev</a><span>|</span><a href="#35942393">next</a><span>|</span><label class="collapse" for="c-35943895">[-]</label><label class="expand" for="c-35943895">[2 more]</label></div><br/><div class="children"><div class="content">Ha, I&#x27;ve been working on something similar recently and the big question is, do you want that state machine on the front end or the backend?</div><br/><div id="35944356" class="c"><input type="checkbox" id="c-35944356" checked=""/><div class="controls bullet"><span class="by">code_biologist</span><span>|</span><a href="#35942427">root</a><span>|</span><a href="#35943895">parent</a><span>|</span><a href="#35942393">next</a><span>|</span><label class="collapse" for="c-35944356">[-]</label><label class="expand" for="c-35944356">[1 more]</label></div><br/><div class="children"><div class="content">I think both are necessary in different circumstances. I use a simple litmus test: where does the state live to provide the best UX for my app if a user moves from their phone to a laptop and back again?<p>If the state needs to persist across devices it it server side (though a frontend cache can make sense), eg: onboarding flow or &quot;task wizard&quot; state.<p>Some UI interactions are much easier with state machines, but persisting state isn&#x27;t a concern even across page refreshes, eg: complex animations or complex form validation states (especially validation that involves time or websockety things).</div><br/></div></div></div></div></div></div><div id="35942393" class="c"><input type="checkbox" id="c-35942393" checked=""/><div class="controls bullet"><span class="by">aarpmcgee</span><span>|</span><a href="#35942427">prev</a><span>|</span><a href="#35942524">next</a><span>|</span><label class="collapse" for="c-35942393">[-]</label><label class="expand" for="c-35942393">[10 more]</label></div><br/><div class="children"><div class="content">All I know is, the parts of my app that I implemented with state machines are by far the most stable, least buggy.<p>fwiw, if xstate feels like too much for whatever reason, <a href="https:&#x2F;&#x2F;thisrobot.life" rel="nofollow">https:&#x2F;&#x2F;thisrobot.life</a> has seemed like a decent alternative to me.</div><br/><div id="35945410" class="c"><input type="checkbox" id="c-35945410" checked=""/><div class="controls bullet"><span class="by">chombier</span><span>|</span><a href="#35942393">parent</a><span>|</span><a href="#35942802">next</a><span>|</span><label class="collapse" for="c-35945410">[-]</label><label class="expand" for="c-35945410">[1 more]</label></div><br/><div class="children"><div class="content">* * *</div><br/></div></div><div id="35942802" class="c"><input type="checkbox" id="c-35942802" checked=""/><div class="controls bullet"><span class="by">hashbig</span><span>|</span><a href="#35942393">parent</a><span>|</span><a href="#35945410">prev</a><span>|</span><a href="#35942898">next</a><span>|</span><label class="collapse" for="c-35942802">[-]</label><label class="expand" for="c-35942802">[5 more]</label></div><br/><div class="children"><div class="content">Same here, state machines are fantastic to extend state driven UIs without worrying about breaking existing behavior. If you find XState too verbose consider using a DSL that compiles down to JS like Lucy: <a href="https:&#x2F;&#x2F;lucylang.org" rel="nofollow">https:&#x2F;&#x2F;lucylang.org</a></div><br/><div id="35942848" class="c"><input type="checkbox" id="c-35942848" checked=""/><div class="controls bullet"><span class="by">simlevesque</span><span>|</span><a href="#35942393">root</a><span>|</span><a href="#35942802">parent</a><span>|</span><a href="#35942898">next</a><span>|</span><label class="collapse" for="c-35942848">[-]</label><label class="expand" for="c-35942848">[4 more]</label></div><br/><div class="children"><div class="content">It seems like both of your links are projects from the same person, he must be passionated about state machines.</div><br/><div id="35942910" class="c"><input type="checkbox" id="c-35942910" checked=""/><div class="controls bullet"><span class="by">MatthewPhillips</span><span>|</span><a href="#35942393">root</a><span>|</span><a href="#35942848">parent</a><span>|</span><a href="#35943744">next</a><span>|</span><label class="collapse" for="c-35942910">[-]</label><label class="expand" for="c-35942910">[2 more]</label></div><br/><div class="children"><div class="content">I am, thank you. : - )</div><br/><div id="35943773" class="c"><input type="checkbox" id="c-35943773" checked=""/><div class="controls bullet"><span class="by">aarpmcgee</span><span>|</span><a href="#35942393">root</a><span>|</span><a href="#35942910">parent</a><span>|</span><a href="#35943744">next</a><span>|</span><label class="collapse" for="c-35943773">[-]</label><label class="expand" for="c-35943773">[1 more]</label></div><br/><div class="children"><div class="content">Thanks for all your valuable contributions to this space! I have been curious if development on Lucy is continuing? I might like to port some of my existing machines over if the project is still active.</div><br/></div></div></div></div><div id="35943744" class="c"><input type="checkbox" id="c-35943744" checked=""/><div class="controls bullet"><span class="by">_heimdall</span><span>|</span><a href="#35942393">root</a><span>|</span><a href="#35942848">parent</a><span>|</span><a href="#35942910">prev</a><span>|</span><a href="#35942898">next</a><span>|</span><label class="collapse" for="c-35943744">[-]</label><label class="expand" for="c-35943744">[1 more]</label></div><br/><div class="children"><div class="content">Can confirm.</div><br/></div></div></div></div></div></div><div id="35942898" class="c"><input type="checkbox" id="c-35942898" checked=""/><div class="controls bullet"><span class="by">cardamomo</span><span>|</span><a href="#35942393">parent</a><span>|</span><a href="#35942802">prev</a><span>|</span><a href="#35944061">next</a><span>|</span><label class="collapse" for="c-35942898">[-]</label><label class="expand" for="c-35942898">[2 more]</label></div><br/><div class="children"><div class="content">There&#x27;s also a pared down, minimal version of xstate: <a href="https:&#x2F;&#x2F;github.com&#x2F;statelyai&#x2F;xstate&#x2F;tree&#x2F;main&#x2F;packages&#x2F;xstate-fsm">https:&#x2F;&#x2F;github.com&#x2F;statelyai&#x2F;xstate&#x2F;tree&#x2F;main&#x2F;packages&#x2F;xstat...</a></div><br/><div id="35943792" class="c"><input type="checkbox" id="c-35943792" checked=""/><div class="controls bullet"><span class="by">aarpmcgee</span><span>|</span><a href="#35942393">root</a><span>|</span><a href="#35942898">parent</a><span>|</span><a href="#35944061">next</a><span>|</span><label class="collapse" for="c-35943792">[-]</label><label class="expand" for="c-35943792">[1 more]</label></div><br/><div class="children"><div class="content">I didn&#x27;t know about this. Thanks a bunch.</div><br/></div></div></div></div><div id="35944061" class="c"><input type="checkbox" id="c-35944061" checked=""/><div class="controls bullet"><span class="by">nailer</span><span>|</span><a href="#35942393">parent</a><span>|</span><a href="#35942898">prev</a><span>|</span><a href="#35942524">next</a><span>|</span><label class="collapse" for="c-35944061">[-]</label><label class="expand" for="c-35944061">[1 more]</label></div><br/><div class="children"><div class="content">You could also just make a very simple State machine. They don’t take a huge amount of code. you have a variable with the current state, you have a function that takes the previous state and the new State as arguments, now implement whatever logic you need. Not everything needs a library.<p>Pardon the unnecessary caps, I am using voice dictation.</div><br/></div></div></div></div><div id="35942524" class="c"><input type="checkbox" id="c-35942524" checked=""/><div class="controls bullet"><span class="by">qdot76367</span><span>|</span><a href="#35942393">prev</a><span>|</span><a href="#35944033">next</a><span>|</span><label class="collapse" for="c-35942524">[-]</label><label class="expand" for="c-35942524">[2 more]</label></div><br/><div class="children"><div class="content">I use xstate in a major project, having moved from python&#x27;s transitions library to this when the project became web focused. XState is fantastic once you get used to it, but the ramp-up is similar to a fairly complex framework.<p>Onboarding new engineers to it can be quite a chore, especially if they&#x27;re not used to thinking about different execution paradigms. That said, the ability to autogenerate visualizations of the state graph is super near, and there&#x27;s so many nice utilities inside of it that make life easy once you get going.</div><br/><div id="35942601" class="c"><input type="checkbox" id="c-35942601" checked=""/><div class="controls bullet"><span class="by">ramesh31</span><span>|</span><a href="#35942524">parent</a><span>|</span><a href="#35944033">next</a><span>|</span><label class="collapse" for="c-35942601">[-]</label><label class="expand" for="c-35942601">[1 more]</label></div><br/><div class="children"><div class="content">&gt;Onboarding new engineers to it can be quite a chore, especially if they&#x27;re not used to thinking about different execution paradigms.<p>Sadly this is what I&#x27;ve run into as well. Having built a serious application from the ground up with XState at the core of the architecture, it&#x27;s the closest thing to code nirvana I&#x27;ve ever reached. But getting buy-in across the org was an impossible task due to the overhead and boilerplate.</div><br/></div></div></div></div><div id="35944033" class="c"><input type="checkbox" id="c-35944033" checked=""/><div class="controls bullet"><span class="by">tuzemec</span><span>|</span><a href="#35942524">prev</a><span>|</span><a href="#35944782">next</a><span>|</span><label class="collapse" for="c-35944033">[-]</label><label class="expand" for="c-35944033">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve stumbled upon this post about building simple state machines [1] a while ago. I was working on a small game and it helped a lot with the &quot;enemy&#x27; behavior.<p>[1] - <a href="https:&#x2F;&#x2F;kentcdodds.com&#x2F;blog&#x2F;implementing-a-simple-state-machine-library-in-javascript" rel="nofollow">https:&#x2F;&#x2F;kentcdodds.com&#x2F;blog&#x2F;implementing-a-simple-state-mach...</a></div><br/></div></div><div id="35944782" class="c"><input type="checkbox" id="c-35944782" checked=""/><div class="controls bullet"><span class="by">fabianlindfors</span><span>|</span><a href="#35944033">prev</a><span>|</span><a href="#35942169">next</a><span>|</span><label class="collapse" for="c-35944782">[-]</label><label class="expand" for="c-35944782">[1 more]</label></div><br/><div class="children"><div class="content">One quality about state machines that I find overlooked is debuggability. Limiting state updates to transitions makes it so easy to debug weird edge cases and race conditions. This upside is perhaps more relevant on the backend though where state is more long-lived, which is why I&#x27;ve been experimenting with a project for building backends with state machines: <a href="https:&#x2F;&#x2F;github.com&#x2F;fabianlindfors&#x2F;restate">https:&#x2F;&#x2F;github.com&#x2F;fabianlindfors&#x2F;restate</a>.</div><br/></div></div><div id="35942169" class="c"><input type="checkbox" id="c-35942169" checked=""/><div class="controls bullet"><span class="by">westurner</span><span>|</span><a href="#35944782">prev</a><span>|</span><a href="#35943623">next</a><span>|</span><label class="collapse" for="c-35942169">[-]</label><label class="expand" for="c-35942169">[2 more]</label></div><br/><div class="children"><div class="content">State machine: <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Finite-state_machine" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Finite-state_machine</a><p><a href="https:&#x2F;&#x2F;docs.viewflow.io&#x2F;bpmn&#x2F;index.html" rel="nofollow">https:&#x2F;&#x2F;docs.viewflow.io&#x2F;bpmn&#x2F;index.html</a> :<p>&gt; <i>Unlike Finite state machine based workflow, BPMN allows parallel task execution, and suitable to model real person collaboration patterns.</i><p>BPMN: Business Process Model and Notation: <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Business_Process_Model_and_Notation" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Business_Process_Model_and_Not...</a><p>On the difference between the map and the territory.<p>&gt; <i>- Can TLA+ find side-channels (which bypass all software memory protection features other than encryption-in-RAM)?</i><p>From <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=31617335" rel="nofollow">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=31617335</a> :<p>&gt;&gt; <i>Can there still be side channel attacks in formally verified systems? Can e.g. TLA+ help with that at all?</i><p>From <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=33563857" rel="nofollow">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=33563857</a> :<p>&gt; <i>- TLA+ Model checker <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;TLA%2B#Model_checker" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;TLA%2B#Model_checker</a> </i>:<p>&gt;&gt; <i>The TLC model checker builds a finite state model of TLA+ specifications for checking invariance properties</i></div><br/><div id="35942700" class="c"><input type="checkbox" id="c-35942700" checked=""/><div class="controls bullet"><span class="by">tadfisher</span><span>|</span><a href="#35942169">parent</a><span>|</span><a href="#35943623">next</a><span>|</span><label class="collapse" for="c-35942700">[-]</label><label class="expand" for="c-35942700">[1 more]</label></div><br/><div class="children"><div class="content">This library implements Harel state charts, which are a superset of FSMs that allow for parallel and nested states.<p>Not sure what TLA+ has to do with either.</div><br/></div></div></div></div><div id="35943623" class="c"><input type="checkbox" id="c-35943623" checked=""/><div class="controls bullet"><span class="by">jdougan</span><span>|</span><a href="#35942169">prev</a><span>|</span><a href="#35943478">next</a><span>|</span><label class="collapse" for="c-35943623">[-]</label><label class="expand" for="c-35943623">[1 more]</label></div><br/><div class="children"><div class="content">Implementing State Machines in Smalltalk, Trevor P. Hopkins, Technical Report UMCS-93-3-1, March 1993
[PDF]  <a href="http:&#x2F;&#x2F;trevor-hopkins.com&#x2F;downloads&#x2F;UMCS-93-3-1.pdf" rel="nofollow">http:&#x2F;&#x2F;trevor-hopkins.com&#x2F;downloads&#x2F;UMCS-93-3-1.pdf</a></div><br/></div></div><div id="35943478" class="c"><input type="checkbox" id="c-35943478" checked=""/><div class="controls bullet"><span class="by">tlrobinson</span><span>|</span><a href="#35943623">prev</a><span>|</span><a href="#35942746">next</a><span>|</span><label class="collapse" for="c-35943478">[-]</label><label class="expand" for="c-35943478">[1 more]</label></div><br/><div class="children"><div class="content">State charts are great for the right use cases. I used XState to help build a graphical editor (think Figma) with fairly complex interactions involving mouse and keyboard events, etc.<p>I’m curious if others have found it worthwhile for more typical web apps too. My instinct is it’s usually overkill.</div><br/></div></div><div id="35942746" class="c"><input type="checkbox" id="c-35942746" checked=""/><div class="controls bullet"><span class="by">h0l0cube</span><span>|</span><a href="#35943478">prev</a><span>|</span><a href="#35944881">next</a><span>|</span><label class="collapse" for="c-35942746">[-]</label><label class="expand" for="c-35942746">[3 more]</label></div><br/><div class="children"><div class="content">I’m wondering how this would work alongside the History API for web apps. SPAs have complicated flows, but is often good practice to use URLs for routing in case the user hits refresh, restarts the browser, shares the link etc. As long as XState can be coaxed to keep the history sane, this could be a way to make web apps less buggy, with excellent visual documentation of the expected app behaviour to boot</div><br/><div id="35943157" class="c"><input type="checkbox" id="c-35943157" checked=""/><div class="controls bullet"><span class="by">z3t4</span><span>|</span><a href="#35942746">parent</a><span>|</span><a href="#35944881">next</a><span>|</span><label class="collapse" for="c-35943157">[-]</label><label class="expand" for="c-35943157">[2 more]</label></div><br/><div class="children"><div class="content">Yes, you can make your web app stateless by moving the state to the query string.</div><br/><div id="35943294" class="c"><input type="checkbox" id="c-35943294" checked=""/><div class="controls bullet"><span class="by">h0l0cube</span><span>|</span><a href="#35942746">root</a><span>|</span><a href="#35943157">parent</a><span>|</span><a href="#35944881">next</a><span>|</span><label class="collapse" for="c-35943294">[-]</label><label class="expand" for="c-35943294">[1 more]</label></div><br/><div class="children"><div class="content">Yes, and also the fragment. But what I’m referring to is that the state machine needs to manage burning the stack (e.g., clicking a ‘Done’ button on wizard would take you back several pages). When the user hits back they should be able to naturally affect the state machine and also to eventually leave the page to its referrer if they go back far enough</div><br/></div></div></div></div></div></div><div id="35944881" class="c"><input type="checkbox" id="c-35944881" checked=""/><div class="controls bullet"><span class="by">revskill</span><span>|</span><a href="#35942746">prev</a><span>|</span><a href="#35942344">next</a><span>|</span><label class="collapse" for="c-35944881">[-]</label><label class="expand" for="c-35944881">[1 more]</label></div><br/><div class="children"><div class="content">This is the State Design GoF pattern.</div><br/></div></div><div id="35942344" class="c"><input type="checkbox" id="c-35942344" checked=""/><div class="controls bullet"><span class="by">komali2</span><span>|</span><a href="#35944881">prev</a><span>|</span><label class="collapse" for="c-35942344">[-]</label><label class="expand" for="c-35942344">[11 more]</label></div><br/><div class="children"><div class="content">I recently had a conversation about joining a startup with a really interesting, but complicated, product mostly actualized in a complex JavaScript spa (react).<p>They wanted a more senior engineer to join so as to help untangle some of the complications and lead the juniors (that built the thing already? Unclear) out of some kind of rats nest they&#x27;d been coded into. I never saw the code so I&#x27;m not exactly sure what this meant.<p>Anyway the founder asked me to look into this xstate platform before our call and asked a lot of questions about my understanding of state machines. The founder had this idea that if the team built out a bunch of state charts using this product and like, diagrammed their entire app, that was their ticket out of whatever sticky situation they were in.<p>I was pretty skeptical at the time and remain so now. This seems like an interesting analysis method, and implementing SPAs in a state machine way (each component being a state machine) is alright I guess, but, especially for a startup, building out these charts feels like a waste of time. To me it seems like fielding early customer feedback and driving features is more important.<p>My guess is that the engineers had a pretty good idea what was going on but were struggling to explain it in a way the founder understood, or maybe were slowing down on feature implementation, I don&#x27;t really know, but I&#x27;m always so skeptical of slapping more tools and plugins and diagrams onto the stack of things the engineering team has to worry about.<p>I&#x27;m curious if anyone has been on a team in a situation as I&#x27;ve vaguely described here and found state charts useful in getting them out of a hole?</div><br/><div id="35942763" class="c"><input type="checkbox" id="c-35942763" checked=""/><div class="controls bullet"><span class="by">migf</span><span>|</span><a href="#35942344">parent</a><span>|</span><a href="#35944561">next</a><span>|</span><label class="collapse" for="c-35942763">[-]</label><label class="expand" for="c-35942763">[4 more]</label></div><br/><div class="children"><div class="content">I have actually just started a process like this in a personal react project.<p>The project uses password auth and websockets, and I was starting to get bugs around refreshing things that I couldn&#x27;t easily fix.<p>I had implemented this originally using a singleton pattern for an AuthService and a MessageBus for the websockets. I created those at app start and put them in a React Context.<p>Converting things to xstate is working great, but it&#x27;s nearly a rewrite. The approach I had stashed state in a couple different places and had a bunch of callbacks passed around. Now all that state is just in the state machine&#x27;s context, and what were methods turn into pure functions.<p>One thing that&#x27;s a little non obvious is that if you have async operations (ie waiting for a new token) you probably want a state for waiting for that, where you invoke the async method followed by transitions on success and failure. The docs reflect this, but it&#x27;s not narratively obvious.<p>Anyway, liking it so far. Changing to a state machine is going to hurt if your code already sucks.</div><br/><div id="35942823" class="c"><input type="checkbox" id="c-35942823" checked=""/><div class="controls bullet"><span class="by">komali2</span><span>|</span><a href="#35942344">root</a><span>|</span><a href="#35942763">parent</a><span>|</span><a href="#35944561">next</a><span>|</span><label class="collapse" for="c-35942823">[-]</label><label class="expand" for="c-35942823">[3 more]</label></div><br/><div class="children"><div class="content">Interesting use case, because for a react project with lots of state management, were you not using redux? And if so, were you using Redux Toolkit? <a href="https:&#x2F;&#x2F;redux-toolkit.js.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;redux-toolkit.js.org&#x2F;</a><p>The last major react project I worked on I found that RTK kinda functioned as a state machine definition for the project, and let us work on requests states in our components, i.e. if loading do this, if not yet loaded do that, etc.<p>I guess with this state machine framework you&#x27;d also be managing DOM state in one spot which could be kind of nice. In the big project we had to consider Formik managed input fields, buttons, modals, etc.</div><br/><div id="35942897" class="c"><input type="checkbox" id="c-35942897" checked=""/><div class="controls bullet"><span class="by">acemarke</span><span>|</span><a href="#35942344">root</a><span>|</span><a href="#35942823">parent</a><span>|</span><a href="#35944561">next</a><span>|</span><label class="collapse" for="c-35942897">[-]</label><label class="expand" for="c-35942897">[2 more]</label></div><br/><div class="children"><div class="content">Hi, I maintain Redux and created RTK.<p>I&#x27;m going to do my best @davidkpiano impression and point out that &quot;Redux, as typically used, is _half_ a state machine&quot; [0] , in that a typical reducer responds to actions regardless of what the current state value might be, whereas a true Finite State Machine always checks the current state first before deciding if the current event is relevant.<p>You _can_ absolutely write Redux reducers as true state machines.  With `createSlice`, you&#x27;d generally need to have a field in the slice that&#x27;s some kind of enum, and check that first inside of a reducer:<p><pre><code>    const someSlice = createSlice({
      name,
      initialState: {status: &quot;x&quot;, someData},
      reducers: {
        somethingHappened(state, action) {
          if(state.status === &quot;x&quot;) {
            &#x2F;&#x2F; _now_ consider if the &quot;somethingHappened&quot; action is relevant
          }
        }
      }
    })
</code></pre>
Very doable, but not the most ideal syntax, since `createSlice` is focused on &quot;here&#x27;s an action &#x2F; thing that happened, here&#x27;s the reducer that handles that&quot;.<p>On the flip side, you can also use XState state machines as Redux reducers.  A state machine is, after all, a function that takes a current state value + some event, and returns a new state.... exactly the same as a reducer function!<p>David and I have been saying for a while that we&#x27;d like to have a more official integration between XState and Redux.  A while back, Matt Pocock put together an proof of concept for what a `createXStateSlice` might look like [1]. I actually sat down with David a couple weeks ago and we did some further design discussions about the possibility of using the `@xstate&#x2F;fsm` package (a smaller version of XState&#x27;s logic) as a starting point, and generating RTK actions based on that.  No code yet, but it seems feasible.<p>[0] <a href="https:&#x2F;&#x2F;dev.to&#x2F;davidkpiano&#x2F;redux-is-half-of-a-pattern-1-2-1hd7" rel="nofollow">https:&#x2F;&#x2F;dev.to&#x2F;davidkpiano&#x2F;redux-is-half-of-a-pattern-1-2-1h...</a><p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;mattpocock&#x2F;redux-xstate-poc">https:&#x2F;&#x2F;github.com&#x2F;mattpocock&#x2F;redux-xstate-poc</a></div><br/><div id="35943085" class="c"><input type="checkbox" id="c-35943085" checked=""/><div class="controls bullet"><span class="by">komali2</span><span>|</span><a href="#35942344">root</a><span>|</span><a href="#35942897">parent</a><span>|</span><a href="#35944561">next</a><span>|</span><label class="collapse" for="c-35943085">[-]</label><label class="expand" for="c-35943085">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s pretty awesome news regarding your conversations.<p>I hadn&#x27;t even thought of the `reducers` slice property. I meant more all the thunky features around the `endpoints` property and the hooks that are autogenerated as a result. In our components this meant we could have for example a form that takes an api model as input and can modify that model on submit. So like,<p><pre><code>    ...component boilerplate
        const {
            data,
            isLoading,
            isFetching,
            isError,
            isSuccess,
        } = useGetSomeDataQuery();
        const [updateData, { 
            isLoading, 
            isUninitialized, 
            isSuccess, 
            isError
        }] = useSomeDataMutation();

</code></pre>
And then right there is all the state we really need to worry about for a given form as we interact with the API. Though again the missing bits are the stuff managed by Formik, like changed but unsubmitted inputs and etc, but those definitions would also be up top near the RTK stuff and so at least while editing it&#x27;s visually available. Like you said doesn&#x27;t necessarily pass muster as an actual state machine unless you have lots of checks in your useEffects or wherever else you&#x27;re reacting to state changes about the entire state of the component.</div><br/></div></div></div></div></div></div></div></div><div id="35944561" class="c"><input type="checkbox" id="c-35944561" checked=""/><div class="controls bullet"><span class="by">cloverich</span><span>|</span><a href="#35942344">parent</a><span>|</span><a href="#35942763">prev</a><span>|</span><a href="#35943932">next</a><span>|</span><label class="collapse" for="c-35944561">[-]</label><label class="expand" for="c-35944561">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been in these situations many times at various levels. Your analysis feels very spot on... imho you should trust your instincts, you seem very well grounded.<p>I have in practice found state machines to be best at adding foundations and a mental model for everyone to share. They are bad at making people think they can get simple flow charts of their business processes. The reality has always been, the real world is complex and regular code is already the best abstraction for dealing with it, especially when someone (founder) wants it to be more simple than it actually is.</div><br/></div></div><div id="35943932" class="c"><input type="checkbox" id="c-35943932" checked=""/><div class="controls bullet"><span class="by">aetherspawn</span><span>|</span><a href="#35942344">parent</a><span>|</span><a href="#35944561">prev</a><span>|</span><a href="#35942824">next</a><span>|</span><label class="collapse" for="c-35943932">[-]</label><label class="expand" for="c-35943932">[1 more]</label></div><br/><div class="children"><div class="content">In automotive applications you have to use a State chart tool (i.e. Simulink Stateflow) for logic, or you more-or-less can&#x27;t pass any modern software certifications.<p>So if you are asking &quot;will state charts make my software more reliable&quot; =&gt; then the industry response is a large renouncing yes. The unanimous opinion is that they are the foundation of systems analysis and reliability.<p>I think it would be a good day when someone builds a React front-end for Simulink Stateflow that exports JS the same way we export C for automotive.</div><br/></div></div><div id="35942824" class="c"><input type="checkbox" id="c-35942824" checked=""/><div class="controls bullet"><span class="by">eyelidlessness</span><span>|</span><a href="#35942344">parent</a><span>|</span><a href="#35943932">prev</a><span>|</span><a href="#35943619">next</a><span>|</span><label class="collapse" for="c-35942824">[-]</label><label class="expand" for="c-35942824">[1 more]</label></div><br/><div class="children"><div class="content">Producing visual charts is kind of just a neat side effect of state machines. The real benefit is formalizing a process’s possible state flows in a generally consistent and traceable way. You don’t actually need any tool to do this, disciplined convention can accomplish the same (but a tool is a great forcing function to be sure you’re actually doing it, and a well defined static type system can be useful too).</div><br/></div></div><div id="35943619" class="c"><input type="checkbox" id="c-35943619" checked=""/><div class="controls bullet"><span class="by">neilv</span><span>|</span><a href="#35942344">parent</a><span>|</span><a href="#35942824">prev</a><span>|</span><a href="#35942887">next</a><span>|</span><label class="collapse" for="c-35943619">[-]</label><label class="expand" for="c-35943619">[1 more]</label></div><br/><div class="children"><div class="content">A few thoughts:<p>1. If you go and reverse-engineer an accurate Statecharts model of the current behavior, it will probably be weird, and not exactly what you would&#x27;ve done if you&#x27;d been workig form the model.  You might also discover problems, but fixing the model might be tricky.<p>2. You really need buy-in by the engineers (not only the managers), and for them invest enough in learning how how to model systems well this way.  (Example from UML, not Statecharts: it seemed almost everyone using UML tools was only visualizing their class inheritance hierarchy, and only in a management-slides kind of way.  Which I&#x27;d say is at most 1% of the benefit.)<p>3. If you start working from models, the code and model had better agree.<p>(Background: I made a pretty complete Statecharts DSL compiler for Java, circa &#x27;97, and previously worked on various tools and methods for purposes like you describe.)</div><br/></div></div><div id="35942887" class="c"><input type="checkbox" id="c-35942887" checked=""/><div class="controls bullet"><span class="by">Jailbird</span><span>|</span><a href="#35942344">parent</a><span>|</span><a href="#35943619">prev</a><span>|</span><a href="#35942397">next</a><span>|</span><label class="collapse" for="c-35942887">[-]</label><label class="expand" for="c-35942887">[1 more]</label></div><br/><div class="children"><div class="content">You probably correctly noted the gap between the founder&#x27;s understanding and the ability of the engineering team to articulate ongoing concerns.<p>Stepping past that, which they shouldn&#x27;t, maybe in that gap, the founder picked a tool, perhaps prematurely. They also sought out a more experienced engineer to bridge the gap.  Who knows if the engineering team even noticed the gap and attempted to improve communications somehow.</div><br/></div></div><div id="35942397" class="c"><input type="checkbox" id="c-35942397" checked=""/><div class="controls bullet"><span class="by">robopsychology</span><span>|</span><a href="#35942344">parent</a><span>|</span><a href="#35942887">prev</a><span>|</span><label class="collapse" for="c-35942397">[-]</label><label class="expand" for="c-35942397">[1 more]</label></div><br/><div class="children"><div class="content">If you follow a proper state machine design then it should be exportable as a diagram, I’d assume.<p>I worked in a team that modeled with state machines and it was useful but I was the most junior member at 7 years experience</div><br/></div></div></div></div></div></div></div></div></div></body></html>