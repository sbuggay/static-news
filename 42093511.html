<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1731229252712" as="style"/><link rel="stylesheet" href="styles.css?v=1731229252712"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/JohannesKaufmann/html-to-markdown">Show HN: HTML-to-Markdown – convert entire websites to Markdown with Golang/CLI</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>JohannesKauf</span> | <span>46 comments</span></div><br/><div><div id="42099181" class="c"><input type="checkbox" id="c-42099181" checked=""/><div class="controls bullet"><span class="by">linhns</span><span>|</span><a href="#42094064">next</a><span>|</span><label class="collapse" for="c-42099181">[-]</label><label class="expand" for="c-42099181">[1 more]</label></div><br/><div class="children"><div class="content">Very neat tool. Well done!</div><br/></div></div><div id="42094064" class="c"><input type="checkbox" id="c-42094064" checked=""/><div class="controls bullet"><span class="by">miki123211</span><span>|</span><a href="#42099181">prev</a><span>|</span><a href="#42094474">next</a><span>|</span><label class="collapse" for="c-42094064">[-]</label><label class="expand" for="c-42094064">[9 more]</label></div><br/><div class="children"><div class="content">If you need this sort of thing in any other language, there&#x27;s a free, no-auth, no-api-key-required, no-strings-attached API that can do this at <a href="https:&#x2F;&#x2F;jina.ai&#x2F;reader&#x2F;" rel="nofollow">https:&#x2F;&#x2F;jina.ai&#x2F;reader&#x2F;</a><p>You just fetch a URL like `<a href="https:&#x2F;&#x2F;r.jina.ai&#x2F;https:&#x2F;&#x2F;www.asimov.press&#x2F;p&#x2F;mitochondria" rel="nofollow">https:&#x2F;&#x2F;r.jina.ai&#x2F;https:&#x2F;&#x2F;www.asimov.press&#x2F;p&#x2F;mitochondria</a>`, and get a markdown document for the &quot;inner&quot; URL.<p>I&#x27;ve actually used this and it&#x27;s not perfect, there are websites (mostly those behind Cloudflare and other such proxies) that it can&#x27;t handle, but it does 90% of the job, and is an one-liner in most languages with a decent HTTP requests library.</div><br/><div id="42095606" class="c"><input type="checkbox" id="c-42095606" checked=""/><div class="controls bullet"><span class="by">petercooper</span><span>|</span><a href="#42094064">parent</a><span>|</span><a href="#42094296">next</a><span>|</span><label class="collapse" for="c-42095606">[-]</label><label class="expand" for="c-42095606">[1 more]</label></div><br/><div class="children"><div class="content">I use this too and, not to detract from your enthusiasm, it&#x27;s not exactly no-strings-attached. There&#x27;s a token limit on free use and you can&#x27;t use it for any commercial purposes. Luckily the pricing for unrestricted use is reasonable though at 2 cents per million tokens.<p>People will also want to note that it&#x27;s LLM-powered which has pros and cons. One pro being that you can download and run their model yourself for non commercial use cases: <a href="https:&#x2F;&#x2F;huggingface.co&#x2F;jinaai&#x2F;reader-lm-1.5b" rel="nofollow">https:&#x2F;&#x2F;huggingface.co&#x2F;jinaai&#x2F;reader-lm-1.5b</a></div><br/></div></div><div id="42094296" class="c"><input type="checkbox" id="c-42094296" checked=""/><div class="controls bullet"><span class="by">JohannesKauf</span><span>|</span><a href="#42094064">parent</a><span>|</span><a href="#42095606">prev</a><span>|</span><a href="#42094348">next</a><span>|</span><label class="collapse" for="c-42094296">[-]</label><label class="expand" for="c-42094296">[6 more]</label></div><br/><div class="children"><div class="content">Thanks, Jina actually looks quite nice for use in LLMs.<p>I also provide a REST API [1] that you can use for free (within limits). However you have get an API Key by registering with Github (see reason below).<p>---<p>The demo was previously hosted on Vercel. Someone misused the demo and send ~5 million requests per day. And would not stop — which quickly brought me over the bandwidth limits of Vercel. And bandwidth is really really expensive!<p>So that is the reason for requiring API Keys and hosting it on a VPS… Lessons learned!<p>[1] <a href="https:&#x2F;&#x2F;html-to-markdown.com&#x2F;api" rel="nofollow">https:&#x2F;&#x2F;html-to-markdown.com&#x2F;api</a></div><br/><div id="42095574" class="c"><input type="checkbox" id="c-42095574" checked=""/><div class="controls bullet"><span class="by">emptiestplace</span><span>|</span><a href="#42094064">root</a><span>|</span><a href="#42094296">parent</a><span>|</span><a href="#42094348">next</a><span>|</span><label class="collapse" for="c-42095574">[-]</label><label class="expand" for="c-42095574">[5 more]</label></div><br/><div class="children"><div class="content">Seems pretty risky to not implement rate limits either way.</div><br/><div id="42095731" class="c"><input type="checkbox" id="c-42095731" checked=""/><div class="controls bullet"><span class="by">JohannesKauf</span><span>|</span><a href="#42094064">root</a><span>|</span><a href="#42095574">parent</a><span>|</span><a href="#42094348">next</a><span>|</span><label class="collapse" for="c-42095731">[-]</label><label class="expand" for="c-42095731">[4 more]</label></div><br/><div class="children"><div class="content">The problem was: Doing rate limiting on the application level was not enough. Once the request hit my backend the <i>incoming bandwidth</i> was <i>already</i> consumed — and I was charged for it.<p>I contacted Vercel&#x27;s Support to block that specific IP address but unfortunately they weren&#x27;t helpful.</div><br/><div id="42095765" class="c"><input type="checkbox" id="c-42095765" checked=""/><div class="controls bullet"><span class="by">emptiestplace</span><span>|</span><a href="#42094064">root</a><span>|</span><a href="#42095731">parent</a><span>|</span><a href="#42094348">next</a><span>|</span><label class="collapse" for="c-42095765">[-]</label><label class="expand" for="c-42095765">[3 more]</label></div><br/><div class="children"><div class="content">So you&#x27;re probably still vulnerable to this even with the key requirement, but they stopped once you removed the incentive? Did you notice what they were scraping?</div><br/><div id="42096666" class="c"><input type="checkbox" id="c-42096666" checked=""/><div class="controls bullet"><span class="by">JohannesKauf</span><span>|</span><a href="#42094064">root</a><span>|</span><a href="#42095765">parent</a><span>|</span><a href="#42094348">next</a><span>|</span><label class="collapse" for="c-42096666">[-]</label><label class="expand" for="c-42096666">[2 more]</label></div><br/><div class="children"><div class="content">Sorry, I mixed up a few topics here:<p>- Moved everything to a VPS - way better value for money. Extra TB of traffic only costs €1-10 with Hetzner&#x2F;DigitalOcean compared to 400€ with Vercel&#x27;s old pricing.<p>- Put Cloudflare in front - gives me an extra layer of control (if I ever need it)<p>- Built a proper REST API - now there&#x27;s an <i>official</i> way to use the converter programmatically<p>- Made email registration mandatory for API keys - lets me reach out before having to block anyone<p>That other server was probably running a scraper and then converting the html-websites to markdown. After about 2 weeks they noticed that I was just returning garbage and it stopped :)</div><br/><div id="42097159" class="c"><input type="checkbox" id="c-42097159" checked=""/><div class="controls bullet"><span class="by">emptiestplace</span><span>|</span><a href="#42094064">root</a><span>|</span><a href="#42096666">parent</a><span>|</span><a href="#42094348">next</a><span>|</span><label class="collapse" for="c-42097159">[-]</label><label class="expand" for="c-42097159">[1 more]</label></div><br/><div class="children"><div class="content">Ah! Makes sense now, thanks for sharing.<p>I&#x27;ve had good success with Cloudflare&#x27;s free-tier features for rate limiting. If you haven&#x27;t tried it, it only takes a couple minutes to enable and should be pretty set-and-forget for your API.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="42094474" class="c"><input type="checkbox" id="c-42094474" checked=""/><div class="controls bullet"><span class="by">NotACracker</span><span>|</span><a href="#42094064">prev</a><span>|</span><a href="#42093964">next</a><span>|</span><label class="collapse" for="c-42094474">[-]</label><label class="expand" for="c-42094474">[2 more]</label></div><br/><div class="children"><div class="content">Pandoc<p><a href="http:&#x2F;&#x2F;www.cantoni.org&#x2F;2019&#x2F;01&#x2F;27&#x2F;converting-html-markdown-using-pandoc" rel="nofollow">http:&#x2F;&#x2F;www.cantoni.org&#x2F;2019&#x2F;01&#x2F;27&#x2F;converting-html-markdown-u...</a></div><br/><div id="42095402" class="c"><input type="checkbox" id="c-42095402" checked=""/><div class="controls bullet"><span class="by">bbor</span><span>|</span><a href="#42094474">parent</a><span>|</span><a href="#42093964">next</a><span>|</span><label class="collapse" for="c-42095402">[-]</label><label class="expand" for="c-42095402">[1 more]</label></div><br/><div class="children"><div class="content">For clarity: I&#x27;m a pandoc diehard (especially because it&#x27;s written by a philosopher!) but it intentionally doesn&#x27;t approach this level of functionality, AFAIK.</div><br/></div></div></div></div><div id="42093964" class="c"><input type="checkbox" id="c-42093964" checked=""/><div class="controls bullet"><span class="by">rty32</span><span>|</span><a href="#42094474">prev</a><span>|</span><a href="#42093845">next</a><span>|</span><label class="collapse" for="c-42093964">[-]</label><label class="expand" for="c-42093964">[3 more]</label></div><br/><div class="children"><div class="content">Nice! And glad to see it&#x27;s MIT licensed.<p>I wonder if it is feasible to use this as a replacement for p2k, instapaper etc for the purpose of reading on Kindle. One annoyance with these services is that the rendering is way off -- h elements not showing up as headers, elements missing randomly, source code incorrectly rendered in 10 different ways. Some are better than others, but generally they are disappointing. (Yet they expect you to pay a subscription fee.) If this is an actively maintained project that welcomes contribution, I could test it out with various articles and report&#x2F;fix issues. Although I wonder how much work there will be for handling edge cases of all the websites out there.</div><br/><div id="42094494" class="c"><input type="checkbox" id="c-42094494" checked=""/><div class="controls bullet"><span class="by">JohannesKauf</span><span>|</span><a href="#42093964">parent</a><span>|</span><a href="#42093845">next</a><span>|</span><label class="collapse" for="c-42094494">[-]</label><label class="expand" for="c-42094494">[2 more]</label></div><br/><div class="children"><div class="content">There are two parts to it:<p>1) convert html to markdown<p>This is what my library specifically addresses, and I believe it handles this task robustly. There was a lot of testing involved. For example, I used the CommonCrawl Dataset to automatically catch edge cases.<p>2) Identify article content<p>This is the more challenging aspect. You need to identify and extract the main content while removing peripheral elements (navigation bars, sidebars, ads, etc.)<p>For example, the top of the markdown document will have lots of links from the navbar otherwise.<p>Mozilla&#x27;s &quot;Readability&quot; project (and its various ports) is the most used solution in this space. However, it relies on heuristic rules that need adjustments to work on every website.<p>---<p>The html-to-markdown project in combination with some heuristic would be great match! There is actually a comment below [1] about this topic. Feel free to contact me if you start this project, would be happy to help!<p>[1] <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=42094012">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=42094012</a></div><br/><div id="42095678" class="c"><input type="checkbox" id="c-42095678" checked=""/><div class="controls bullet"><span class="by">dleeftink</span><span>|</span><a href="#42093964">root</a><span>|</span><a href="#42094494">parent</a><span>|</span><a href="#42093845">next</a><span>|</span><label class="collapse" for="c-42095678">[-]</label><label class="expand" for="c-42095678">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m working on a Textify API that collates elements based on the visible&#x2F;running flow of text elements. It&#x27;s not quite there yet, but is able to get  the running content of HTML pages quite consistently. You can check it out here:<p>[0]: <a href="https:&#x2F;&#x2F;github.com&#x2F;dleeftink&#x2F;plainmark">https:&#x2F;&#x2F;github.com&#x2F;dleeftink&#x2F;plainmark</a></div><br/></div></div></div></div></div></div><div id="42093845" class="c"><input type="checkbox" id="c-42093845" checked=""/><div class="controls bullet"><span class="by">plaidwombat</span><span>|</span><a href="#42093964">prev</a><span>|</span><a href="#42093645">next</a><span>|</span><label class="collapse" for="c-42093845">[-]</label><label class="expand" for="c-42093845">[2 more]</label></div><br/><div class="children"><div class="content">Great work. I thank you for it. I&#x27;ve used your library for a few years in a Lambda function which takes a URL and converts it to Markdown for storage in S3. I hooked it into every &quot;bookmark&quot; app I use as a webhook so I save a Markdown copy of everything I bookmark, which makes it very handy for importing into Obsidian.</div><br/><div id="42093958" class="c"><input type="checkbox" id="c-42093958" checked=""/><div class="controls bullet"><span class="by">JohannesKauf</span><span>|</span><a href="#42093845">parent</a><span>|</span><a href="#42093645">next</a><span>|</span><label class="collapse" for="c-42093958">[-]</label><label class="expand" for="c-42093958">[1 more]</label></div><br/><div class="children"><div class="content">Oh very nice to hear, thank you very much!<p>That’s actually a great idea!<p>I personally use Raindrop for bookmarking articles. But I can’t find stuff in the search.<p>The other day “Embeddings are underrated” was on HN. That would actually be a good approach for finding stuff later on. Using webhooks, converting to markdown, generating embedding and then enjoying a better search. You just gave me the idea for my next weekend project :-)</div><br/></div></div></div></div><div id="42093645" class="c"><input type="checkbox" id="c-42093645" checked=""/><div class="controls bullet"><span class="by">cpursley</span><span>|</span><a href="#42093845">prev</a><span>|</span><a href="#42094012">next</a><span>|</span><label class="collapse" for="c-42093645">[-]</label><label class="expand" for="c-42093645">[7 more]</label></div><br/><div class="children"><div class="content">This is really nice, especially for feeding LLMs web page data (they generally understand markdown well).<p>I built something similar for the Elixir world but it’s much more limited (I might borrow some of your ideas):<p><a href="https:&#x2F;&#x2F;github.com&#x2F;agoodway&#x2F;html2markdown">https:&#x2F;&#x2F;github.com&#x2F;agoodway&#x2F;html2markdown</a></div><br/><div id="42093906" class="c"><input type="checkbox" id="c-42093906" checked=""/><div class="controls bullet"><span class="by">JohannesKauf</span><span>|</span><a href="#42093645">parent</a><span>|</span><a href="#42093820">next</a><span>|</span><label class="collapse" for="c-42093906">[-]</label><label class="expand" for="c-42093906">[1 more]</label></div><br/><div class="children"><div class="content">&gt; built something similar for the Elixir<p>We interact with the web so much that it’s worth having such a library in every language... Great that you took the time and wrote one for the Elixir community!<p>Feel free to contact me if you want to ping-pong some ideas!<p>&gt; feeding LLMs web page data<p>Exactly, that one use case that got quite popular. There is also the feature of keeping specific HTML tags (e.g. &lt;article&gt; and &lt;footer&gt;) to give the LLM a bit more context about the page.</div><br/></div></div><div id="42093820" class="c"><input type="checkbox" id="c-42093820" checked=""/><div class="controls bullet"><span class="by">jaggirs</span><span>|</span><a href="#42093645">parent</a><span>|</span><a href="#42093906">prev</a><span>|</span><a href="#42094012">next</a><span>|</span><label class="collapse" for="c-42093820">[-]</label><label class="expand" for="c-42093820">[5 more]</label></div><br/><div class="children"><div class="content">Why not just give the html to the llm?</div><br/><div id="42093929" class="c"><input type="checkbox" id="c-42093929" checked=""/><div class="controls bullet"><span class="by">zexodus</span><span>|</span><a href="#42093645">root</a><span>|</span><a href="#42093820">parent</a><span>|</span><a href="#42094283">next</a><span>|</span><label class="collapse" for="c-42093929">[-]</label><label class="expand" for="c-42093929">[1 more]</label></div><br/><div class="children"><div class="content">Context size limits are usually the reason. Most websites I want to scrape end up being over 200K tokens. Tokenization for HTML isn&#x27;t optimal because symbols like &#x27;&lt;&#x27;, &#x27;&gt;&#x27;, &#x27;&#x2F;&#x27;, etc. end up being separate tokens, whereas whole words can be one token if we&#x27;re talking about plain text.<p>Possible approaches include transforming the text to MD or minimizing the HTML (e.g., removing script tags, comments, etc.).</div><br/></div></div><div id="42094283" class="c"><input type="checkbox" id="c-42094283" checked=""/><div class="controls bullet"><span class="by">dtjohnnyb</span><span>|</span><a href="#42093645">root</a><span>|</span><a href="#42093820">parent</a><span>|</span><a href="#42093929">prev</a><span>|</span><a href="#42093852">next</a><span>|</span><label class="collapse" for="c-42094283">[-]</label><label class="expand" for="c-42094283">[1 more]</label></div><br/><div class="children"><div class="content">I was trying to do this recently for Web page summarization. As said below the token sizes would end up over the context length, so I trimmed the html to fit just to see what would happen. 
I found that the LLM was able to extract information, but it very commonly would start trying to continue the html blocks that had been left open in the trimmed input. Presumably this is due to instruction tuning on coding tasks<p>I&#x27;d love to figure out a way to do it though, it seems to me that there&#x27;s a bunch of rich description of the website in the html</div><br/></div></div><div id="42093852" class="c"><input type="checkbox" id="c-42093852" checked=""/><div class="controls bullet"><span class="by">kgeist</span><span>|</span><a href="#42093645">root</a><span>|</span><a href="#42093820">parent</a><span>|</span><a href="#42094283">prev</a><span>|</span><a href="#42094012">next</a><span>|</span><label class="collapse" for="c-42093852">[-]</label><label class="expand" for="c-42093852">[2 more]</label></div><br/><div class="children"><div class="content">I remember there was a paper which found that LLMs understand HTML pretty well, you don&#x27;t need additional preprocessing.
The downside is that HTML produces more tokens than Markdown.</div><br/><div id="42093909" class="c"><input type="checkbox" id="c-42093909" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#42093645">root</a><span>|</span><a href="#42093852">parent</a><span>|</span><a href="#42094012">next</a><span>|</span><label class="collapse" for="c-42093909">[-]</label><label class="expand" for="c-42093909">[1 more]</label></div><br/><div class="children"><div class="content">Right: the token savings can be enormous here.<p>Use <a href="https:&#x2F;&#x2F;tools.simonwillison.net&#x2F;jina-reader" rel="nofollow">https:&#x2F;&#x2F;tools.simonwillison.net&#x2F;jina-reader</a> to fetch the <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;</a> homepage as Markdown and paste it into <a href="https:&#x2F;&#x2F;tools.simonwillison.net&#x2F;claude-token-counter" rel="nofollow">https:&#x2F;&#x2F;tools.simonwillison.net&#x2F;claude-token-counter</a> - 1550 tokens.<p>Same thing as HTML: 13367 tokens.</div><br/></div></div></div></div></div></div></div></div><div id="42094012" class="c"><input type="checkbox" id="c-42094012" checked=""/><div class="controls bullet"><span class="by">throwup238</span><span>|</span><a href="#42093645">prev</a><span>|</span><a href="#42094626">next</a><span>|</span><label class="collapse" for="c-42094012">[-]</label><label class="expand" for="c-42094012">[2 more]</label></div><br/><div class="children"><div class="content">This is probably out of scope for your tool but it’d be nice to have built in n-gram deduplication where the tool strips any identical content from the header and footer, like navigation, when pointed at a few of these markdown files.</div><br/><div id="42094564" class="c"><input type="checkbox" id="c-42094564" checked=""/><div class="controls bullet"><span class="by">JohannesKauf</span><span>|</span><a href="#42094012">parent</a><span>|</span><a href="#42094626">next</a><span>|</span><label class="collapse" for="c-42094564">[-]</label><label class="expand" for="c-42094564">[1 more]</label></div><br/><div class="children"><div class="content">My final university project was about a clean-up-approach on the HTML nodes <i>before</i> sending it to the html-to-markdown converter. But that was extremely difficult and dependent on some heuristics that had to be tweaked.<p>Your idea of comparing multiple pages would be a great approach. It would be amazing if you build something like this! This would enable so many more use cases... For example a better “send to kindle” (see other comment from rty32 [1]).<p>[1] <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=42093964">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=42093964</a></div><br/></div></div></div></div><div id="42094626" class="c"><input type="checkbox" id="c-42094626" checked=""/><div class="controls bullet"><span class="by">jot</span><span>|</span><a href="#42094012">prev</a><span>|</span><a href="#42093769">next</a><span>|</span><label class="collapse" for="c-42094626">[-]</label><label class="expand" for="c-42094626">[1 more]</label></div><br/><div class="children"><div class="content">This is great!<p>If you also want to grab an accurate screenshot with the markdown of a webpage you can get both with Urlbox.<p>We have a couple of free tools that use this feature:<p><a href="https:&#x2F;&#x2F;screenshotof.com" rel="nofollow">https:&#x2F;&#x2F;screenshotof.com</a>
<a href="https:&#x2F;&#x2F;url2text.com" rel="nofollow">https:&#x2F;&#x2F;url2text.com</a></div><br/></div></div><div id="42093769" class="c"><input type="checkbox" id="c-42093769" checked=""/><div class="controls bullet"><span class="by">paradite</span><span>|</span><a href="#42094626">prev</a><span>|</span><a href="#42094642">next</a><span>|</span><label class="collapse" for="c-42093769">[-]</label><label class="expand" for="c-42093769">[1 more]</label></div><br/><div class="children"><div class="content">I have been using these two:<p><a href="https:&#x2F;&#x2F;farnots.github.io&#x2F;RedditToMarkdown&#x2F;" rel="nofollow">https:&#x2F;&#x2F;farnots.github.io&#x2F;RedditToMarkdown&#x2F;</a><p><a href="https:&#x2F;&#x2F;urltomarkdown.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;urltomarkdown.com&#x2F;</a><p>Incredibly useful for leveraging LLMs and building AI apps.</div><br/></div></div><div id="42094642" class="c"><input type="checkbox" id="c-42094642" checked=""/><div class="controls bullet"><span class="by">ssousa666</span><span>|</span><a href="#42093769">prev</a><span>|</span><a href="#42095426">next</a><span>|</span><label class="collapse" for="c-42094642">[-]</label><label class="expand" for="c-42094642">[1 more]</label></div><br/><div class="children"><div class="content">I have been looking for a similar lib to use in a Kotlin&#x2F;Spring app - any recommendations? My specific use-case does not need to support sanitizing during the HTML -&gt; MD conversion, as the HTML doc strings that I will be converting are sanitized during the extraction phase (using JSoup).</div><br/></div></div><div id="42095426" class="c"><input type="checkbox" id="c-42095426" checked=""/><div class="controls bullet"><span class="by">juliuskiesian</span><span>|</span><a href="#42094642">prev</a><span>|</span><a href="#42093644">next</a><span>|</span><label class="collapse" for="c-42095426">[-]</label><label class="expand" for="c-42095426">[2 more]</label></div><br/><div class="children"><div class="content">One of the pain points of using this kind of tools is handling syntax highlighted code blocks. How does html-to-markdown perform in such scenarios?</div><br/><div id="42095562" class="c"><input type="checkbox" id="c-42095562" checked=""/><div class="controls bullet"><span class="by">JohannesKauf</span><span>|</span><a href="#42095426">parent</a><span>|</span><a href="#42093644">next</a><span>|</span><label class="collapse" for="c-42095562">[-]</label><label class="expand" for="c-42095562">[1 more]</label></div><br/><div class="children"><div class="content">Yeah good point, that&#x27;s actually difficult. They use many `&lt;span&gt;` html tags to color individual words and syntax.<p>But I wrote logic to handle that. It probably needs to be adapted at some point, but works surprisingly well. Have a look at the testdata files (&quot;code.in.html&quot; and &quot;code.out.md&quot; files [1]).<p>Feel free to give it a try &amp; let me know if you notice any edge cases!<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;JohannesKaufmann&#x2F;html-to-markdown&#x2F;blob&#x2F;main&#x2F;plugin&#x2F;commonmark&#x2F;testdata&#x2F;GoldenFiles&#x2F;code.out.md">https:&#x2F;&#x2F;github.com&#x2F;JohannesKaufmann&#x2F;html-to-markdown&#x2F;blob&#x2F;ma...</a></div><br/></div></div></div></div><div id="42093644" class="c"><input type="checkbox" id="c-42093644" checked=""/><div class="controls bullet"><span class="by">sureglymop</span><span>|</span><a href="#42095426">prev</a><span>|</span><a href="#42093672">next</a><span>|</span><label class="collapse" for="c-42093644">[-]</label><label class="expand" for="c-42093644">[2 more]</label></div><br/><div class="children"><div class="content">Reminds me of Aaron Swartz&#x27; html2text that I think serves the same purpose: <a href="http:&#x2F;&#x2F;www.aaronsw.com&#x2F;2002&#x2F;html2text&#x2F;" rel="nofollow">http:&#x2F;&#x2F;www.aaronsw.com&#x2F;2002&#x2F;html2text&#x2F;</a></div><br/><div id="42093968" class="c"><input type="checkbox" id="c-42093968" checked=""/><div class="controls bullet"><span class="by">stevekemp</span><span>|</span><a href="#42093644">parent</a><span>|</span><a href="#42093672">next</a><span>|</span><label class="collapse" for="c-42093968">[-]</label><label class="expand" for="c-42093968">[1 more]</label></div><br/><div class="children"><div class="content">Same idea I guess, but it&#x27;s Aaron&#x27;s has been broken for years - and probably for the best because it didn&#x27;t stop people specifying things like &quot;file:&#x2F;&#x2F;&#x2F;&#x2F;etc&#x2F;passwd&quot; as the URL to export to markdown.</div><br/></div></div></div></div><div id="42093672" class="c"><input type="checkbox" id="c-42093672" checked=""/><div class="controls bullet"><span class="by">Savageman</span><span>|</span><a href="#42093644">prev</a><span>|</span><a href="#42094740">next</a><span>|</span><label class="collapse" for="c-42093672">[-]</label><label class="expand" for="c-42093672">[2 more]</label></div><br/><div class="children"><div class="content">I remember a long time ago I used Pandoc for this.<p>Fresh tools and more choice is  very welcome, thanks for your work!</div><br/><div id="42094037" class="c"><input type="checkbox" id="c-42094037" checked=""/><div class="controls bullet"><span class="by">JohannesKauf</span><span>|</span><a href="#42093672">parent</a><span>|</span><a href="#42094740">next</a><span>|</span><label class="collapse" for="c-42094037">[-]</label><label class="expand" for="c-42094037">[1 more]</label></div><br/><div class="children"><div class="content">Pandoc is amazing. Especially because they support so many formats.<p>And their html to markdown converter is (in my opinion) still the best right now.<p>But html-to-markdown is getting close. My goal is to cover more edge cases than pandoc...</div><br/></div></div></div></div><div id="42094740" class="c"><input type="checkbox" id="c-42094740" checked=""/><div class="controls bullet"><span class="by">inhumantsar</span><span>|</span><a href="#42093672">prev</a><span>|</span><a href="#42093778">next</a><span>|</span><label class="collapse" for="c-42094740">[-]</label><label class="expand" for="c-42094740">[2 more]</label></div><br/><div class="children"><div class="content">i&#x27;ve made some modest contributions to Mozilla&#x27;s Readability library and didn&#x27;t see anything like their heuristics in this.<p>are you using a separate library for that or did I miss something in this?</div><br/><div id="42094756" class="c"><input type="checkbox" id="c-42094756" checked=""/><div class="controls bullet"><span class="by">inhumantsar</span><span>|</span><a href="#42094740">parent</a><span>|</span><a href="#42093778">next</a><span>|</span><label class="collapse" for="c-42094756">[-]</label><label class="expand" for="c-42094756">[1 more]</label></div><br/><div class="children"><div class="content">oops, refreshed the page and saw other comments addressing this! nevermind!</div><br/></div></div></div></div><div id="42093778" class="c"><input type="checkbox" id="c-42093778" checked=""/><div class="controls bullet"><span class="by">oezi</span><span>|</span><a href="#42094740">prev</a><span>|</span><a href="#42096373">next</a><span>|</span><label class="collapse" for="c-42093778">[-]</label><label class="expand" for="c-42093778">[5 more]</label></div><br/><div class="children"><div class="content">Does it also include logic to download JS-driven sites properly or is this out of scope?</div><br/><div id="42093924" class="c"><input type="checkbox" id="c-42093924" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#42093778">parent</a><span>|</span><a href="#42094649">next</a><span>|</span><label class="collapse" for="c-42093924">[-]</label><label class="expand" for="c-42093924">[1 more]</label></div><br/><div class="children"><div class="content">It doesn&#x27;t. For that you would need to execute a full headless browser first, extract the HTML (document.body.innerHTML after the page has finished loading can work) and process the result.<p>If you&#x27;re already running a headless browser you may as well run the conversion in JavaScript though - I use this recipe pretty often with my shot-scraper tool: <a href="https:&#x2F;&#x2F;shot-scraper.datasette.io&#x2F;en&#x2F;stable&#x2F;javascript.html#example-extracting-page-content-with-readability-js" rel="nofollow">https:&#x2F;&#x2F;shot-scraper.datasette.io&#x2F;en&#x2F;stable&#x2F;javascript.html#...</a> - adding <a href="https:&#x2F;&#x2F;github.com&#x2F;mixmark-io&#x2F;turndown">https:&#x2F;&#x2F;github.com&#x2F;mixmark-io&#x2F;turndown</a> to the mix will get you Markdown conversion as well.</div><br/></div></div><div id="42094649" class="c"><input type="checkbox" id="c-42094649" checked=""/><div class="controls bullet"><span class="by">jot</span><span>|</span><a href="#42093778">parent</a><span>|</span><a href="#42093924">prev</a><span>|</span><a href="#42094883">next</a><span>|</span><label class="collapse" for="c-42094649">[-]</label><label class="expand" for="c-42094649">[1 more]</label></div><br/><div class="children"><div class="content">We do that with Urlbox’s markdown feature: <a href="https:&#x2F;&#x2F;urlbox.com&#x2F;extracting-text" rel="nofollow">https:&#x2F;&#x2F;urlbox.com&#x2F;extracting-text</a></div><br/></div></div><div id="42094883" class="c"><input type="checkbox" id="c-42094883" checked=""/><div class="controls bullet"><span class="by">bni</span><span>|</span><a href="#42093778">parent</a><span>|</span><a href="#42094649">prev</a><span>|</span><a href="#42093925">next</a><span>|</span><label class="collapse" for="c-42094883">[-]</label><label class="expand" for="c-42094883">[1 more]</label></div><br/><div class="children"><div class="content">I used <a href="https:&#x2F;&#x2F;github.com&#x2F;mozilla&#x2F;readability">https:&#x2F;&#x2F;github.com&#x2F;mozilla&#x2F;readability</a> for this</div><br/></div></div><div id="42093925" class="c"><input type="checkbox" id="c-42093925" checked=""/><div class="controls bullet"><span class="by">JohannesKauf</span><span>|</span><a href="#42093778">parent</a><span>|</span><a href="#42094883">prev</a><span>|</span><a href="#42096373">next</a><span>|</span><label class="collapse" for="c-42093925">[-]</label><label class="expand" for="c-42093925">[1 more]</label></div><br/><div class="children"><div class="content">That is unfortunately out of scope. I like the philosophy of doing one thing really well.<p>But nowadays—with Playwright and Puppeteer—there are great choices for Browser automation.</div><br/></div></div></div></div><div id="42096373" class="c"><input type="checkbox" id="c-42096373" checked=""/><div class="controls bullet"><span class="by">lollobomb</span><span>|</span><a href="#42093778">prev</a><span>|</span><a href="#42093920">next</a><span>|</span><label class="collapse" for="c-42096373">[-]</label><label class="expand" for="c-42096373">[1 more]</label></div><br/><div class="children"><div class="content">This is nice, I tried a plugin for pandoc in the past but didn&#x27;t really work well.</div><br/></div></div><div id="42093920" class="c"><input type="checkbox" id="c-42093920" checked=""/><div class="controls bullet"><span class="by">yayoohooyahoo</span><span>|</span><a href="#42096373">prev</a><span>|</span><a href="#42097246">next</a><span>|</span><label class="collapse" for="c-42093920">[-]</label><label class="expand" for="c-42093920">[1 more]</label></div><br/><div class="children"><div class="content">Turndown works quite well too: <a href="https:&#x2F;&#x2F;github.com&#x2F;mixmark-io&#x2F;turndown">https:&#x2F;&#x2F;github.com&#x2F;mixmark-io&#x2F;turndown</a></div><br/></div></div><div id="42097246" class="c"><input type="checkbox" id="c-42097246" checked=""/><div class="controls bullet"><span class="by">hello_computer</span><span>|</span><a href="#42093920">prev</a><span>|</span><label class="collapse" for="c-42097246">[-]</label><label class="expand" for="c-42097246">[1 more]</label></div><br/><div class="children"><div class="content">This is honorable work.  Thank you.</div><br/></div></div></div></div></div></div></div></body></html>