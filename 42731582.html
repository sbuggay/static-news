<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1737104455656" as="style"/><link rel="stylesheet" href="styles.css?v=1737104455656"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://learn.yjs.dev/">Learn Yjs Interactively</a> <span class="domain">(<a href="https://learn.yjs.dev">learn.yjs.dev</a>)</span></div><div class="subtext"><span>paulgb</span> | <span>31 comments</span></div><br/><div><div id="42731601" class="c"><input type="checkbox" id="c-42731601" checked=""/><div class="controls bullet"><span class="by">jakelazaroff</span><span>|</span><a href="#42734827">next</a><span>|</span><label class="collapse" for="c-42731601">[-]</label><label class="expand" for="c-42731601">[8 more]</label></div><br/><div class="children"><div class="content">Hey HN! I&#x27;m the developer at Jamsocket who made this. In case you&#x27;re not familiar with Yjs, it&#x27;s a CRDT library for building collaborative and local-first apps.<p>The thing is, if you&#x27;re not used to working with distributed state there&#x27;s definitely a learning curve. Even simple things like incrementing a counter — the &quot;hello world&quot; of JavaScript framework demos — get tricky when dealing with multiple clients. Worse, a lot of tutorials are just like &quot;install this library and text editor integration and boom you have an app&quot;, which doesn&#x27;t give you a good mental model for what&#x27;s actually happening.<p>So we made Learn Yjs! It&#x27;s an interactive Yjs tutorial. I wanted it to be really intuitive for people just getting their feet wet with local-first development, so there are lots of explorable demos and coding exercises. The idea is to use interactive examples to build an understanding from the ground up.<p>Hope you like it :)</div><br/><div id="42734940" class="c"><input type="checkbox" id="c-42734940" checked=""/><div class="controls bullet"><span class="by">KaiMagnus</span><span>|</span><a href="#42731601">parent</a><span>|</span><a href="#42734849">next</a><span>|</span><label class="collapse" for="c-42734940">[-]</label><label class="expand" for="c-42734940">[1 more]</label></div><br/><div class="children"><div class="content">&gt; &quot;install this library and text editor integration and boom you have an app&quot;, which doesn&#x27;t give you a good mental model for what&#x27;s actually happening.<p>I was interested in working with CRDTs and collaboration in general for a while now and this has been the biggest issue whenever I tried to get into it. Websockets also seem a bit harder to find (free) hosting for.<p>Btw, your other tutorials on CRDTs were also a great help.</div><br/></div></div><div id="42734849" class="c"><input type="checkbox" id="c-42734849" checked=""/><div class="controls bullet"><span class="by">adeptima</span><span>|</span><a href="#42731601">parent</a><span>|</span><a href="#42734940">prev</a><span>|</span><a href="#42733533">next</a><span>|</span><label class="collapse" for="c-42734849">[-]</label><label class="expand" for="c-42734849">[1 more]</label></div><br/><div class="children"><div class="content">Thank you. Keep going. Very good topic to expand</div><br/></div></div><div id="42733533" class="c"><input type="checkbox" id="c-42733533" checked=""/><div class="controls bullet"><span class="by">santa_boy</span><span>|</span><a href="#42731601">parent</a><span>|</span><a href="#42734849">prev</a><span>|</span><a href="#42732669">next</a><span>|</span><label class="collapse" for="c-42733533">[-]</label><label class="expand" for="c-42733533">[4 more]</label></div><br/><div class="children"><div class="content">I am just looking at this but quick question. Is there an example for building a local-first app? Also, I working with plain vanilla HTML &amp; JS and Alpine. Can this be used in my apps?</div><br/><div id="42734517" class="c"><input type="checkbox" id="c-42734517" checked=""/><div class="controls bullet"><span class="by">paulgb</span><span>|</span><a href="#42731601">root</a><span>|</span><a href="#42733533">parent</a><span>|</span><a href="#42734366">next</a><span>|</span><label class="collapse" for="c-42734517">[-]</label><label class="expand" for="c-42734517">[2 more]</label></div><br/><div class="children"><div class="content">Y-sweet (which this is built with) allows you to make a Yjs app local-first by passing “offlineSupport” to the provider when constructing.<p>There’s a demo of this here:
<a href="https:&#x2F;&#x2F;demos.y-sweet.dev&#x2F;color-grid" rel="nofollow">https:&#x2F;&#x2F;demos.y-sweet.dev&#x2F;color-grid</a><p>The source for that demo is here: <a href="https:&#x2F;&#x2F;github.com&#x2F;jamsocket&#x2F;y-sweet&#x2F;blob&#x2F;5fa6941cf5568f4a3fba9047da59a69c10d68167&#x2F;examples&#x2F;nextjs&#x2F;src&#x2F;app&#x2F;(demos)&#x2F;color-grid&#x2F;page.tsx#L9">https:&#x2F;&#x2F;github.com&#x2F;jamsocket&#x2F;y-sweet&#x2F;blob&#x2F;5fa6941cf5568f4a3f...</a><p>That demo uses react, but there is a vanilla js version of the same demo here:
<a href="https:&#x2F;&#x2F;github.com&#x2F;jamsocket&#x2F;y-sweet&#x2F;tree&#x2F;main&#x2F;examples&#x2F;vanilla">https:&#x2F;&#x2F;github.com&#x2F;jamsocket&#x2F;y-sweet&#x2F;tree&#x2F;main&#x2F;examples&#x2F;vani...</a><p>(The vanilla js version is not local first, but it would just be a matter of passing the same offlineSupport flag to make it so.)</div><br/><div id="42734608" class="c"><input type="checkbox" id="c-42734608" checked=""/><div class="controls bullet"><span class="by">santa_boy</span><span>|</span><a href="#42731601">root</a><span>|</span><a href="#42734517">parent</a><span>|</span><a href="#42734366">next</a><span>|</span><label class="collapse" for="c-42734608">[-]</label><label class="expand" for="c-42734608">[1 more]</label></div><br/><div class="children"><div class="content">Thank you. This is the direction I needed. Will try out</div><br/></div></div></div></div></div></div><div id="42732669" class="c"><input type="checkbox" id="c-42732669" checked=""/><div class="controls bullet"><span class="by">nhatcher</span><span>|</span><a href="#42731601">parent</a><span>|</span><a href="#42733533">prev</a><span>|</span><a href="#42734827">next</a><span>|</span><label class="collapse" for="c-42732669">[-]</label><label class="expand" for="c-42732669">[1 more]</label></div><br/><div class="children"><div class="content">Woah! Beautifully done! I wonder if I will finally understand CRDT with this.
Will go through it over the weekend.<p>Congratulations!</div><br/></div></div></div></div><div id="42734827" class="c"><input type="checkbox" id="c-42734827" checked=""/><div class="controls bullet"><span class="by">adeptima</span><span>|</span><a href="#42731601">prev</a><span>|</span><a href="#42734949">next</a><span>|</span><label class="collapse" for="c-42734827">[-]</label><label class="expand" for="c-42734827">[5 more]</label></div><br/><div class="children"><div class="content">Yjs is nice. Easy to get p2p results.<p>Yjs backend, its persistence, eventual conflict resolution (one of editors stayed too long offline), history rewind seems like a tough engineering challenge to crack.<p>Always wanted to have a nice experience with block editor like Platejs <a href="https:&#x2F;&#x2F;platejs.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;platejs.org&#x2F;</a><p>There are nice attempts simplify dev experience with solutions like Liveblocks <a href="https:&#x2F;&#x2F;liveblocks.io&#x2F;text-editor" rel="nofollow">https:&#x2F;&#x2F;liveblocks.io&#x2F;text-editor</a> However most options come at the expense of controlling your data.<p>CRDT keyword search on HN bring consistently good results and interest in the topic, but no good options on open source backend side. Checked it many times in the past. Please correct me if I missed something.<p><a href="https:&#x2F;&#x2F;hn.algolia.com&#x2F;?dateRange=pastYear&amp;page=0&amp;prefix=true&amp;query=CRDT&amp;sort=byPopularity&amp;type=story" rel="nofollow">https:&#x2F;&#x2F;hn.algolia.com&#x2F;?dateRange=pastYear&amp;page=0&amp;prefix=tru...</a><p>Most people expectations it should work at least as in Google Docs or Notion, and on the dev side it should be store privately in Postgres JSONB like format without going deep into details.</div><br/><div id="42734910" class="c"><input type="checkbox" id="c-42734910" checked=""/><div class="controls bullet"><span class="by">blixt</span><span>|</span><a href="#42734827">parent</a><span>|</span><a href="#42734949">next</a><span>|</span><label class="collapse" for="c-42734910">[-]</label><label class="expand" for="c-42734910">[4 more]</label></div><br/><div class="children"><div class="content">I agree. In theory you need to just distribute serialized patches but in a real world backend scenario you may need to integrate with knowledge of current document state, user identity, and possibly even some level of access control.<p>I’ve wanted to use Y.js with a Go backend multiple times but gave up each time due to time constraints as it’s hard to find simple reference implementations.<p>I’ve been checking back over the years but it still seems hard to do this outside of Node.js.</div><br/><div id="42735159" class="c"><input type="checkbox" id="c-42735159" checked=""/><div class="controls bullet"><span class="by">adeptima</span><span>|</span><a href="#42734827">root</a><span>|</span><a href="#42734910">parent</a><span>|</span><a href="#42735191">next</a><span>|</span><label class="collapse" for="c-42735159">[-]</label><label class="expand" for="c-42735159">[1 more]</label></div><br/><div class="children"><div class="content">Same experience. Go is my default choice for backend too<p>It can easily be a full time job<p>You need to mirror all logic and encoding&#x2F;decoding part<p><a href="https:&#x2F;&#x2F;github.com&#x2F;yjs&#x2F;yjs&#x2F;blob&#x2F;main&#x2F;src&#x2F;utils&#x2F;encoding.js">https:&#x2F;&#x2F;github.com&#x2F;yjs&#x2F;yjs&#x2F;blob&#x2F;main&#x2F;src&#x2F;utils&#x2F;encoding.js</a><p><a href="https:&#x2F;&#x2F;github.com&#x2F;yjs&#x2F;yjs&#x2F;commits&#x2F;main&#x2F;src&#x2F;utils&#x2F;encoding.js">https:&#x2F;&#x2F;github.com&#x2F;yjs&#x2F;yjs&#x2F;commits&#x2F;main&#x2F;src&#x2F;utils&#x2F;encoding.j...</a><p>I was thinking about spining off nodejs instance just for persistence and syncing with postgres</div><br/></div></div><div id="42735191" class="c"><input type="checkbox" id="c-42735191" checked=""/><div class="controls bullet"><span class="by">5Qn8mNbc2FNCiVV</span><span>|</span><a href="#42734827">root</a><span>|</span><a href="#42734910">parent</a><span>|</span><a href="#42735159">prev</a><span>|</span><a href="#42734949">next</a><span>|</span><label class="collapse" for="c-42735191">[-]</label><label class="expand" for="c-42735191">[2 more]</label></div><br/><div class="children"><div class="content">Fyi, building a collaborative editor right now and it&#x27;s still hard to do outside of Node</div><br/><div id="42735238" class="c"><input type="checkbox" id="c-42735238" checked=""/><div class="controls bullet"><span class="by">adeptima</span><span>|</span><a href="#42734827">root</a><span>|</span><a href="#42735191">parent</a><span>|</span><a href="#42734949">next</a><span>|</span><label class="collapse" for="c-42735238">[-]</label><label class="expand" for="c-42735238">[1 more]</label></div><br/><div class="children"><div class="content">Still better time spend than doing leetcode.<p>It&#x27;s my go-to argument against leetcode style interviews.<p>I would rather ask a candidate to spend 30 mins and do research together on collaborative editing, or visualizing distances used in pgvector or similar vector database.<p>Imagine how far the whole colabarative editing space moved forward if 1% of leetcode grinding were rerouted</div><br/></div></div></div></div></div></div></div></div><div id="42734949" class="c"><input type="checkbox" id="c-42734949" checked=""/><div class="controls bullet"><span class="by">danielEM</span><span>|</span><a href="#42734827">prev</a><span>|</span><a href="#42732890">next</a><span>|</span><label class="collapse" for="c-42734949">[-]</label><label class="expand" for="c-42734949">[3 more]</label></div><br/><div class="children"><div class="content">&gt; The trick is a technique called fractional indexing, in which indices are fractions rather than integers.<p>How many times you can use fractional indexing before it stops working?</div><br/><div id="42735005" class="c"><input type="checkbox" id="c-42735005" checked=""/><div class="controls bullet"><span class="by">danielEM</span><span>|</span><a href="#42734949">parent</a><span>|</span><a href="#42732890">next</a><span>|</span><label class="collapse" for="c-42735005">[-]</label><label class="expand" for="c-42735005">[2 more]</label></div><br/><div class="children"><div class="content">Sorry, just did that test - it is 1075, not massive, I would risk saying that may be major issue of this lib.<p>Here is the code:<p>let left = 0, right = 1<p>let rightPrevious = 2<p>let counter = 0;<p>while (right &gt; left &amp;&amp; right &lt; rightPrevious) {<p><pre><code>    rightPrevious = right;

    right &#x2F;= 2;

    counter++
</code></pre>
}<p>console.log(counter)<p>Did look very briefly into repo, but didn&#x27;t find a place where it is handled and don&#x27;t have time to dig it, but if that issue is true I may help with resolving it. LMK</div><br/><div id="42735103" class="c"><input type="checkbox" id="c-42735103" checked=""/><div class="controls bullet"><span class="by">paulgb</span><span>|</span><a href="#42734949">root</a><span>|</span><a href="#42735005">parent</a><span>|</span><a href="#42732890">next</a><span>|</span><label class="collapse" for="c-42735103">[-]</label><label class="expand" for="c-42735103">[1 more]</label></div><br/><div class="children"><div class="content">Good point. Usually fractional indexing is done with arbitrary-precision numbers to avoid exactly this issue. We landed on using JS floats to teach the technique because it makes it more intuitive to understand what’s going on, but you make a good point and I’ll make sure we add that caveat and link out to an arbitrary-precision fractional index library.</div><br/></div></div></div></div></div></div><div id="42732890" class="c"><input type="checkbox" id="c-42732890" checked=""/><div class="controls bullet"><span class="by">oefrha</span><span>|</span><a href="#42734949">prev</a><span>|</span><a href="#42734009">next</a><span>|</span><label class="collapse" for="c-42732890">[-]</label><label class="expand" for="c-42732890">[3 more]</label></div><br/><div class="children"><div class="content">I used Yjs in a small side project a while ago. The client side was fairly easy to learn and use. On the server side though, I wanted to deploy a single binary, but examples in languages other than Node (e.g. for the Rust port Yrs) seemed close to nonexistent, so I ended up slightly adapting <a href="https:&#x2F;&#x2F;github.com&#x2F;yjs&#x2F;y-websocket">https:&#x2F;&#x2F;github.com&#x2F;yjs&#x2F;y-websocket</a> (Node) with persistence based on LevelDB. That&#x27;s suboptimal for me. I wonder if there are good resources for implementing the server-side with persistence in, say, Rust.<p>Btw, IIRC existing resources for the client side are heavily focused on text editor integrations, so this is really helpful. I had to fumble a bit myself because I wasn&#x27;t using a text editor integration.</div><br/><div id="42732983" class="c"><input type="checkbox" id="c-42732983" checked=""/><div class="controls bullet"><span class="by">paulgb</span><span>|</span><a href="#42732890">parent</a><span>|</span><a href="#42734009">next</a><span>|</span><label class="collapse" for="c-42732983">[-]</label><label class="expand" for="c-42732983">[2 more]</label></div><br/><div class="children"><div class="content">You might like Y-Sweet[1], an open-source Rust server that powers the banner on Learn Yjs. It uses S3 or the local filesystem for storage, and it compiles down to a musl-linked binary that weighs a few megabytes.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;jamsocket&#x2F;y-sweet">https:&#x2F;&#x2F;github.com&#x2F;jamsocket&#x2F;y-sweet</a></div><br/><div id="42733044" class="c"><input type="checkbox" id="c-42733044" checked=""/><div class="controls bullet"><span class="by">oefrha</span><span>|</span><a href="#42732890">root</a><span>|</span><a href="#42732983">parent</a><span>|</span><a href="#42734009">next</a><span>|</span><label class="collapse" for="c-42733044">[-]</label><label class="expand" for="c-42733044">[1 more]</label></div><br/><div class="children"><div class="content">Thanks, I&#x27;ll look into it. It&#x27;s pretty low on the list of search results for Yjs server, I somehow missed it the last time.</div><br/></div></div></div></div></div></div><div id="42734009" class="c"><input type="checkbox" id="c-42734009" checked=""/><div class="controls bullet"><span class="by">__MatrixMan__</span><span>|</span><a href="#42732890">prev</a><span>|</span><a href="#42732336">next</a><span>|</span><label class="collapse" for="c-42734009">[-]</label><label class="expand" for="c-42734009">[2 more]</label></div><br/><div class="children"><div class="content">I finally got a four leaf clover and somebody ruined it after like 2m.<p>Edit: Wait, where did everybody go?  I think we broke it, or maybe I got banned.  Kudos to the creator just the same.  Neat stuff.</div><br/><div id="42734278" class="c"><input type="checkbox" id="c-42734278" checked=""/><div class="controls bullet"><span class="by">jakelazaroff</span><span>|</span><a href="#42734009">parent</a><span>|</span><a href="#42732336">next</a><span>|</span><label class="collapse" for="c-42734278">[-]</label><label class="expand" for="c-42734278">[1 more]</label></div><br/><div class="children"><div class="content">You definitely aren’t banned! Maybe people just tapered off for a bit — I see a bunch of cursors now.<p>There are two more secret emojis, by the way :)</div><br/></div></div></div></div><div id="42732336" class="c"><input type="checkbox" id="c-42732336" checked=""/><div class="controls bullet"><span class="by">stopachka</span><span>|</span><a href="#42734009">prev</a><span>|</span><a href="#42732595">next</a><span>|</span><label class="collapse" for="c-42732336">[-]</label><label class="expand" for="c-42732336">[3 more]</label></div><br/><div class="children"><div class="content">The interactive demos are beautiful! Is there a library you used to build it?</div><br/><div id="42732542" class="c"><input type="checkbox" id="c-42732542" checked=""/><div class="controls bullet"><span class="by">jakelazaroff</span><span>|</span><a href="#42732336">parent</a><span>|</span><a href="#42732595">next</a><span>|</span><label class="collapse" for="c-42732542">[-]</label><label class="expand" for="c-42732542">[2 more]</label></div><br/><div class="children"><div class="content">Thank you! The site as a whole is built with Astro and the demos are “islands of interactivity” built with React.<p>The demos are really running Yjs under the hood — each “client” has its own document, and when the user clicks I set a timeout to simulate the latency and then manually merge the documents into each other. (There’s a third document too for the timeline in the center.)<p>Other than that, I’m using dnd kit [1] for the drag and drop functionality in the todos demo, Motion [2] for the animations and CodeMirror [3] for the text editor.<p>[1] <a href="https:&#x2F;&#x2F;dndkit.com" rel="nofollow">https:&#x2F;&#x2F;dndkit.com</a><p>[2] <a href="https:&#x2F;&#x2F;motion.dev" rel="nofollow">https:&#x2F;&#x2F;motion.dev</a><p>[3] <a href="https:&#x2F;&#x2F;codemirror.net" rel="nofollow">https:&#x2F;&#x2F;codemirror.net</a></div><br/><div id="42734809" class="c"><input type="checkbox" id="c-42734809" checked=""/><div class="controls bullet"><span class="by">stopachka</span><span>|</span><a href="#42732336">root</a><span>|</span><a href="#42732542">parent</a><span>|</span><a href="#42732595">next</a><span>|</span><label class="collapse" for="c-42734809">[-]</label><label class="expand" for="c-42734809">[1 more]</label></div><br/><div class="children"><div class="content">Thank you Jake! I just played with the motion website and loved it. I am going to try to use it sometime</div><br/></div></div></div></div></div></div><div id="42732595" class="c"><input type="checkbox" id="c-42732595" checked=""/><div class="controls bullet"><span class="by">downrightmike</span><span>|</span><a href="#42732336">prev</a><span>|</span><a href="#42733600">next</a><span>|</span><label class="collapse" for="c-42732595">[-]</label><label class="expand" for="c-42732595">[1 more]</label></div><br/><div class="children"><div class="content">The banner image game is silly but fun</div><br/></div></div><div id="42733600" class="c"><input type="checkbox" id="c-42733600" checked=""/><div class="controls bullet"><span class="by">dangoodmanUT</span><span>|</span><a href="#42732595">prev</a><span>|</span><a href="#42732623">next</a><span>|</span><label class="collapse" for="c-42733600">[-]</label><label class="expand" for="c-42733600">[1 more]</label></div><br/><div class="children"><div class="content">another banger from the jamsocket team</div><br/></div></div><div id="42732623" class="c"><input type="checkbox" id="c-42732623" checked=""/><div class="controls bullet"><span class="by">sergiotapia</span><span>|</span><a href="#42733600">prev</a><span>|</span><label class="collapse" for="c-42732623">[-]</label><label class="expand" for="c-42732623">[4 more]</label></div><br/><div class="children"><div class="content">is Yjs a platform like Convex? are they competing? would love a comparison page potentially! :pray:</div><br/><div id="42732713" class="c"><input type="checkbox" id="c-42732713" checked=""/><div class="controls bullet"><span class="by">paulgb</span><span>|</span><a href="#42732623">parent</a><span>|</span><label class="collapse" for="c-42732713">[-]</label><label class="expand" for="c-42732713">[3 more]</label></div><br/><div class="children"><div class="content">You can think of Yjs as a protocol for data synchronization. It gives you a way to describe a JSON-like data structure (i.e. nested lists and maps), and keep them in sync across multiple devices.<p>Yjs itself doesn&#x27;t provide a platform, but it&#x27;s an open protocol so there there are service providers (like ourselves[1]) that offer Yjs backends as a service (other notable providers are TipTap&#x2F;Hocusocus and Liveblocks).<p>[1] <a href="https:&#x2F;&#x2F;jamsocket.com&#x2F;y-sweet">https:&#x2F;&#x2F;jamsocket.com&#x2F;y-sweet</a></div><br/><div id="42734441" class="c"><input type="checkbox" id="c-42734441" checked=""/><div class="controls bullet"><span class="by">showdown</span><span>|</span><a href="#42732623">root</a><span>|</span><a href="#42732713">parent</a><span>|</span><label class="collapse" for="c-42734441">[-]</label><label class="expand" for="c-42734441">[2 more]</label></div><br/><div class="children"><div class="content">what&#x27;s the main differences in your opinion between y-sweet and Hocuspocus?</div><br/><div id="42734612" class="c"><input type="checkbox" id="c-42734612" checked=""/><div class="controls bullet"><span class="by">paulgb</span><span>|</span><a href="#42732623">root</a><span>|</span><a href="#42734441">parent</a><span>|</span><label class="collapse" for="c-42734612">[-]</label><label class="expand" for="c-42734612">[1 more]</label></div><br/><div class="children"><div class="content">The biggest difference is that Y-Sweet is built around object storage (i.e. S3 and friends) rather than a database.<p>This allows writes to scale horizontally without a central database being the bottleneck. It’s also a much cheaper way to store lots of documents accumulating over time on S3 than in a database. This is because compute scales with how much data you <i>actually access</i>, not how much data you store.<p>I wrote about why object storage is a good fit for this here: <a href="https:&#x2F;&#x2F;digest.browsertech.com&#x2F;archive&#x2F;browsertech-digest-figma-is-a-file-editor&#x2F;#:~:text=The%20design%20tool%20Figma%20is,that%20runs%20in%20the%20browser" rel="nofollow">https:&#x2F;&#x2F;digest.browsertech.com&#x2F;archive&#x2F;browsertech-digest-fi...</a>.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>