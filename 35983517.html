<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1684400451676" as="style"/><link rel="stylesheet" href="styles.css?v=1684400451676"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://duckdb.org/2023/05/17/announcing-duckdb-080.html">DuckDB 0.8</a> <span class="domain">(<a href="https://duckdb.org">duckdb.org</a>)</span></div><div class="subtext"><span>nnx</span> | <span>58 comments</span></div><br/><div><div id="35983908" class="c"><input type="checkbox" id="c-35983908" checked=""/><div class="controls bullet"><span class="by">TACIXAT</span><span>|</span><a href="#35984542">next</a><span>|</span><label class="collapse" for="c-35983908">[-]</label><label class="expand" for="c-35983908">[14 more]</label></div><br/><div class="children"><div class="content">I recently pulled DuckDB out of a project after hitting a memory corruption issue in regular usage. Upon investigating, they had an extremely long list of fuzzer-found issues. I just don&#x27;t understand why someone would start something in a memory unsafe language these days. I cannot in good conscience put that on a customer&#x27;s machine.<p>We ended up rewriting a component to drop support for Parquet and to just use SQLite instead. I love the idea of being able to query Parquet files locally and then just ship them up to S3 and continue to use them with something like Athena.<p>The other thing that rubbed me the wrong way was that rather than fix the issue, they just removed functionality. DuckDB (unironically) needs a rewrite in Rust or a lot more fuzzing hours before I come back to it. While SQLite is not written in a memory safe language, it is probably one of the most fuzzed targets in the world.</div><br/><div id="35983960" class="c"><input type="checkbox" id="c-35983960" checked=""/><div class="controls bullet"><span class="by">1egg0myegg0</span><span>|</span><a href="#35983908">parent</a><span>|</span><a href="#35984931">next</a><span>|</span><label class="collapse" for="c-35983960">[-]</label><label class="expand" for="c-35983960">[2 more]</label></div><br/><div class="children"><div class="content">Sorry to hear that!<p>(I work on docs for the DuckDB Foundation)<p>Starting in this release, the DuckDB team invested significantly in adding memory safety throughout catalog operations. There is more on the roadmap, but I would expect this release and all following to have improved stability!<p>That said, at my primary company, we have used it in production for years now with great success!</div><br/><div id="35984306" class="c"><input type="checkbox" id="c-35984306" checked=""/><div class="controls bullet"><span class="by">TACIXAT</span><span>|</span><a href="#35983908">root</a><span>|</span><a href="#35983960">parent</a><span>|</span><a href="#35984931">next</a><span>|</span><label class="collapse" for="c-35984306">[-]</label><label class="expand" for="c-35984306">[1 more]</label></div><br/><div class="children"><div class="content">Yea, legit a cool project and if it wasn&#x27;t on customer machines and being passed user-defined SQL it would have just been worked around.</div><br/></div></div></div></div><div id="35984931" class="c"><input type="checkbox" id="c-35984931" checked=""/><div class="controls bullet"><span class="by">mm007emko</span><span>|</span><a href="#35983908">parent</a><span>|</span><a href="#35983960">prev</a><span>|</span><a href="#35983951">next</a><span>|</span><label class="collapse" for="c-35984931">[-]</label><label class="expand" for="c-35984931">[1 more]</label></div><br/><div class="children"><div class="content">I remember chasing memory bugs in C# and Java projects at work. These are usually considered memory-safe languages yet their sophisticated garbage collectors are not panacea. There is a reason things like this <a href="https:&#x2F;&#x2F;docs.oracle.com&#x2F;javase&#x2F;8&#x2F;docs&#x2F;api&#x2F;java&#x2F;lang&#x2F;ref&#x2F;WeakReference.html" rel="nofollow">https:&#x2F;&#x2F;docs.oracle.com&#x2F;javase&#x2F;8&#x2F;docs&#x2F;api&#x2F;java&#x2F;lang&#x2F;ref&#x2F;Weak...</a> exist. Or why you might re-use existing objects in certain situations <a href="https:&#x2F;&#x2F;www.oreilly.com&#x2F;library&#x2F;view&#x2F;java-performance-tuning&#x2F;0596000154&#x2F;ch04s02.html" rel="nofollow">https:&#x2F;&#x2F;www.oreilly.com&#x2F;library&#x2F;view&#x2F;java-performance-tuning...</a> .<p>On the other hand, there are garbage collectors available for C and C++ programs (they are not part of their standard libraries so you have to choose whether you use them or not). C++ standard library has had smart pointers for some time, they existed in Boost library beforehand and RAII pattern is even older.<p>Don&#x27;t put all the blame for memory bugs to languages. C and C++ programs are more prone to memory leaks than programs written in &quot;memory-safe&quot; languages but these are not safe from memory bugs either.<p>Disclaimer: I like C (plain C, not C++, though that&#x27;s not that as bad as many people claim) and I hate soydevs.</div><br/></div></div><div id="35983951" class="c"><input type="checkbox" id="c-35983951" checked=""/><div class="controls bullet"><span class="by">fbdab103</span><span>|</span><a href="#35983908">parent</a><span>|</span><a href="#35984931">prev</a><span>|</span><a href="#35983996">next</a><span>|</span><label class="collapse" for="c-35983951">[-]</label><label class="expand" for="c-35983951">[1 more]</label></div><br/><div class="children"><div class="content">&gt;The other thing that rubbed me the wrong way was that rather than fix the issue, they just removed functionality.<p>It is a limited team size. If they feel a feature is causing too much grief, I would rather they drop it than post a, &quot;Here be dragons&quot; sign and let users pick up the pieces.<p>Edit: missed an obvious opportunity to take a shot at MySQL</div><br/></div></div><div id="35983996" class="c"><input type="checkbox" id="c-35983996" checked=""/><div class="controls bullet"><span class="by">de6u99er</span><span>|</span><a href="#35983908">parent</a><span>|</span><a href="#35983951">prev</a><span>|</span><a href="#35984032">next</a><span>|</span><label class="collapse" for="c-35983996">[-]</label><label class="expand" for="c-35983996">[5 more]</label></div><br/><div class="children"><div class="content">- DuckDB is written in C++<p><pre><code>  - SQLite is written in C
</code></pre>
I wouldn&#x27;t consider any of those written in a memory safe language. Although SQLite has been battle hardened over many years, while DuckDB is a relatively new project.<p>That being said, has been efforts of reimplementing SQLite in a more memory safe language like Rust.<p>e.g. <a href="https:&#x2F;&#x2F;github.com&#x2F;epilys&#x2F;rsqlite3">https:&#x2F;&#x2F;github.com&#x2F;epilys&#x2F;rsqlite3</a></div><br/><div id="35984115" class="c"><input type="checkbox" id="c-35984115" checked=""/><div class="controls bullet"><span class="by">kristjansson</span><span>|</span><a href="#35983908">root</a><span>|</span><a href="#35983996">parent</a><span>|</span><a href="#35984289">next</a><span>|</span><label class="collapse" for="c-35984115">[-]</label><label class="expand" for="c-35984115">[2 more]</label></div><br/><div class="children"><div class="content">At the level of engineering of SQLite, the choice of language is almost immaterial. Suggesting a low effort transpilation is a competitive peer seems unserious and vaguely disrespectful.</div><br/><div id="35985378" class="c"><input type="checkbox" id="c-35985378" checked=""/><div class="controls bullet"><span class="by">forgotpwd16</span><span>|</span><a href="#35983908">root</a><span>|</span><a href="#35984115">parent</a><span>|</span><a href="#35984289">next</a><span>|</span><label class="collapse" for="c-35985378">[-]</label><label class="expand" for="c-35985378">[1 more]</label></div><br/><div class="children"><div class="content">&gt;Finally, one of the best written software paired with one of the best writable programming language‽ Fearless and memory safe, since the uncountable amount of unsafe {} blocks makes you not care anymore.<p>Plus it seems project is a parody of the RiiR trend.</div><br/></div></div></div></div><div id="35984289" class="c"><input type="checkbox" id="c-35984289" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#35983908">root</a><span>|</span><a href="#35983996">parent</a><span>|</span><a href="#35984115">prev</a><span>|</span><a href="#35984106">next</a><span>|</span><label class="collapse" for="c-35984289">[-]</label><label class="expand" for="c-35984289">[1 more]</label></div><br/><div class="children"><div class="content">to be clear, OP said<p>&gt; I just don&#x27;t understand why someone would <i>start</i> something in a memory unsafe language these days.<p>It takes a lot of time and testing to iron out all the bugs. Not impossible. Just takes a lot of time and testing.</div><br/></div></div></div></div><div id="35984032" class="c"><input type="checkbox" id="c-35984032" checked=""/><div class="controls bullet"><span class="by">vamega</span><span>|</span><a href="#35983908">parent</a><span>|</span><a href="#35983996">prev</a><span>|</span><a href="#35984629">next</a><span>|</span><label class="collapse" for="c-35984032">[-]</label><label class="expand" for="c-35984032">[3 more]</label></div><br/><div class="children"><div class="content">What feature was removed? I&#x27;m pretty fine with a project deciding to remove a feature with known footguns, but curious what it was.</div><br/><div id="35984294" class="c"><input type="checkbox" id="c-35984294" checked=""/><div class="controls bullet"><span class="by">TACIXAT</span><span>|</span><a href="#35983908">root</a><span>|</span><a href="#35984032">parent</a><span>|</span><a href="#35984629">next</a><span>|</span><label class="collapse" for="c-35984294">[-]</label><label class="expand" for="c-35984294">[2 more]</label></div><br/><div class="children"><div class="content">Blob to bitstring type casting for Parquet. They were doing a straight reinterpret cast on it which was causing an allocation of 18446744073709551503 bytes.<p>I was wanting to take a blob from Parquet and bitwise-and it against a bitstring in memory.</div><br/><div id="35985001" class="c"><input type="checkbox" id="c-35985001" checked=""/><div class="controls bullet"><span class="by">datadeft</span><span>|</span><a href="#35983908">root</a><span>|</span><a href="#35984294">parent</a><span>|</span><a href="#35984629">next</a><span>|</span><label class="collapse" for="c-35985001">[-]</label><label class="expand" for="c-35985001">[1 more]</label></div><br/><div class="children"><div class="content">Is blob an efficient type?</div><br/></div></div></div></div></div></div><div id="35984629" class="c"><input type="checkbox" id="c-35984629" checked=""/><div class="controls bullet"><span class="by">gigatexal</span><span>|</span><a href="#35983908">parent</a><span>|</span><a href="#35984032">prev</a><span>|</span><a href="#35984542">next</a><span>|</span><label class="collapse" for="c-35984629">[-]</label><label class="expand" for="c-35984629">[1 more]</label></div><br/><div class="children"><div class="content">This would be a good blog post to read. And I’m sure the team behind the project would like to see it, too.</div><br/></div></div></div></div><div id="35984542" class="c"><input type="checkbox" id="c-35984542" checked=""/><div class="controls bullet"><span class="by">meitham</span><span>|</span><a href="#35983908">prev</a><span>|</span><a href="#35983700">next</a><span>|</span><label class="collapse" for="c-35984542">[-]</label><label class="expand" for="c-35984542">[7 more]</label></div><br/><div class="children"><div class="content">I used duckdb successfully in prod to replace SQL Server.  We have a micro batch that generates around 5 billion rows of very wide tables every 3 minutes.  These data used to go into SQL server, only to be replaced by the new batch of 5 billions and gets marked for deletion.  SQL Server was struggling with all these purge activities. Replacing with DuckDB made things much lighter and faster.  The only issue I faced is the case sensitivity, where in DuckDB if you ask for your queries to be case insensitive, your results lose their original casing and returned all lowercased.</div><br/><div id="35984772" class="c"><input type="checkbox" id="c-35984772" checked=""/><div class="controls bullet"><span class="by">porker</span><span>|</span><a href="#35984542">parent</a><span>|</span><a href="#35984586">next</a><span>|</span><label class="collapse" for="c-35984772">[-]</label><label class="expand" for="c-35984772">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;m curious, what kind of problem needs 5 billion rows every 3 minutes to replace the previous 5 billion rows?<p>By &quot;micro batch&quot; I understand batch processing of some kind?</div><br/><div id="35985079" class="c"><input type="checkbox" id="c-35985079" checked=""/><div class="controls bullet"><span class="by">meitham</span><span>|</span><a href="#35984542">root</a><span>|</span><a href="#35984772">parent</a><span>|</span><a href="#35984586">next</a><span>|</span><label class="collapse" for="c-35985079">[-]</label><label class="expand" for="c-35985079">[1 more]</label></div><br/><div class="children"><div class="content">financial risk calculations with many sensitivities</div><br/></div></div></div></div><div id="35984586" class="c"><input type="checkbox" id="c-35984586" checked=""/><div class="controls bullet"><span class="by">hawk_</span><span>|</span><a href="#35984542">parent</a><span>|</span><a href="#35984772">prev</a><span>|</span><a href="#35984588">next</a><span>|</span><label class="collapse" for="c-35984586">[-]</label><label class="expand" for="c-35984586">[2 more]</label></div><br/><div class="children"><div class="content">&gt; results lose their original casing and returned all lowercased.<p>That&#x27;s a shame. Have you reported this bug on their repo?</div><br/><div id="35984806" class="c"><input type="checkbox" id="c-35984806" checked=""/><div class="controls bullet"><span class="by">meitham</span><span>|</span><a href="#35984542">root</a><span>|</span><a href="#35984586">parent</a><span>|</span><a href="#35984588">next</a><span>|</span><label class="collapse" for="c-35984806">[-]</label><label class="expand" for="c-35984806">[1 more]</label></div><br/><div class="children"><div class="content">Someone else beat me to it <a href="https:&#x2F;&#x2F;github.com&#x2F;duckdb&#x2F;duckdb&#x2F;issues&#x2F;3821">https:&#x2F;&#x2F;github.com&#x2F;duckdb&#x2F;duckdb&#x2F;issues&#x2F;3821</a></div><br/></div></div></div></div><div id="35984588" class="c"><input type="checkbox" id="c-35984588" checked=""/><div class="controls bullet"><span class="by">boomskats</span><span>|</span><a href="#35984542">parent</a><span>|</span><a href="#35984586">prev</a><span>|</span><a href="#35983700">next</a><span>|</span><label class="collapse" for="c-35984588">[-]</label><label class="expand" for="c-35984588">[2 more]</label></div><br/><div class="children"><div class="content">I know this is irrelevant, and I&#x27;m really no a fan of SQL Server either, but I&#x27;m curious - did you try partitioning those tables on the batch ID, and then truncating partitions instead of deleting old rows?</div><br/><div id="35984777" class="c"><input type="checkbox" id="c-35984777" checked=""/><div class="controls bullet"><span class="by">meitham</span><span>|</span><a href="#35984542">root</a><span>|</span><a href="#35984588">parent</a><span>|</span><a href="#35983700">next</a><span>|</span><label class="collapse" for="c-35984777">[-]</label><label class="expand" for="c-35984777">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a bit more complicated than I put it above.  The schema is quite normalised in SQL Server and represents financial risk, with several views on it.  The schema makes sense for EOD data but not for live data.  The whole performance of EOD was impacted by these live insertions.  Moving to another DB (on another server) would incur licence fees and costs.  DuckDB simple files are cost free.  Many of these files are deleted even before anyone can be bothered to read them.</div><br/></div></div></div></div></div></div><div id="35983700" class="c"><input type="checkbox" id="c-35983700" checked=""/><div class="controls bullet"><span class="by">rektide</span><span>|</span><a href="#35984542">prev</a><span>|</span><a href="#35984387">next</a><span>|</span><label class="collapse" for="c-35983700">[-]</label><label class="expand" for="c-35983700">[2 more]</label></div><br/><div class="children"><div class="content">Damn. This database quacks. Huge list of awesome super helpful tools.<p>Tons of great features &amp; speed for everyone. Also love the stuff from the edge, such as Arrow DataBase Connector support,<p>&gt; <i>From this release, DuckDB natively supports ADBC. We’re happy to be one of the first systems to offer native support, and DuckDB’s in-process design fits nicely with ADBC.</i></div><br/><div id="35985426" class="c"><input type="checkbox" id="c-35985426" checked=""/><div class="controls bullet"><span class="by">jamesblonde</span><span>|</span><a href="#35983700">parent</a><span>|</span><a href="#35984387">next</a><span>|</span><label class="collapse" for="c-35985426">[-]</label><label class="expand" for="c-35985426">[1 more]</label></div><br/><div class="children"><div class="content">ADBC is going to be huge for BI tooling. Right now, most of them go through ODBC&#x2F;JDBC which are row-oriented formats. So your columnar data is always reshaped from column-oriented (in your data warehouse &#x2F; lakehouse) to row-oriented and often back again. The data is also serialized, deserialized on top of that.<p>We got 8-20X speed-up replacing JDBC with Arrow Flight Service, which is a more limited version of ADBC - <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=nCxIpMXvCp0">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=nCxIpMXvCp0</a></div><br/></div></div></div></div><div id="35984387" class="c"><input type="checkbox" id="c-35984387" checked=""/><div class="controls bullet"><span class="by">noobcoder</span><span>|</span><a href="#35983700">prev</a><span>|</span><a href="#35984269">next</a><span>|</span><label class="collapse" for="c-35984387">[-]</label><label class="expand" for="c-35984387">[2 more]</label></div><br/><div class="children"><div class="content">The feature to  register arbitrary Python functions as scalar functions within SQL queries is pretty insane. Writing custom functions to manipulate data in ways that aren&#x27;t possible with SQL, basically without fetching all of it at once in memory and then applying. I hope thats the case</div><br/><div id="35985080" class="c"><input type="checkbox" id="c-35985080" checked=""/><div class="controls bullet"><span class="by">tored</span><span>|</span><a href="#35984387">parent</a><span>|</span><a href="#35984269">next</a><span>|</span><label class="collapse" for="c-35985080">[-]</label><label class="expand" for="c-35985080">[1 more]</label></div><br/><div class="children"><div class="content">SQLite has similar functionality.<p>e.g PHP<p><a href="https:&#x2F;&#x2F;www.php.net&#x2F;manual&#x2F;en&#x2F;sqlite3.createfunction.php" rel="nofollow">https:&#x2F;&#x2F;www.php.net&#x2F;manual&#x2F;en&#x2F;sqlite3.createfunction.php</a><p><a href="https:&#x2F;&#x2F;www.sqlite.org&#x2F;appfunc.html" rel="nofollow">https:&#x2F;&#x2F;www.sqlite.org&#x2F;appfunc.html</a></div><br/></div></div></div></div><div id="35984269" class="c"><input type="checkbox" id="c-35984269" checked=""/><div class="controls bullet"><span class="by">AbuAssar</span><span>|</span><a href="#35984387">prev</a><span>|</span><a href="#35983962">next</a><span>|</span><label class="collapse" for="c-35984269">[-]</label><label class="expand" for="c-35984269">[1 more]</label></div><br/><div class="children"><div class="content">&gt; DuckDB is an in-process SQL OLAP databasemanagement system<p>&gt; In-process, serverless
C++11, no dependencies, single file build
APIs for Python&#x2F;R&#x2F;Java&#x2F;…<p>&gt; Transactions, persistence
Extensive SQL support
Direct Parquet &amp; CSV querying<p>&gt; Vectorized engine Optimized for analytics, Parallel query processing<p>&gt; Free &amp; Open Source Permissive MIT License</div><br/></div></div><div id="35983962" class="c"><input type="checkbox" id="c-35983962" checked=""/><div class="controls bullet"><span class="by">emmanueloga_</span><span>|</span><a href="#35984269">prev</a><span>|</span><a href="#35983875">next</a><span>|</span><label class="collapse" for="c-35983962">[-]</label><label class="expand" for="c-35983962">[11 more]</label></div><br/><div class="children"><div class="content">Setting up SQL, creating a well-designed schema, and optimizing queries can be a complex, multi-step process. Databases often feel like black boxes, requiring significant training and engineering to get right. One needs to tweak both queries, schema and database configuration to get best results.<p>So why do we need SQL? I know NoSQL came and went (was it nosql or no-relations? not sure...) but honestly I can&#x27;t think of many things I can do with SQL that i CANNOT do easier in any programming language with a good library for indexing and retrieving data.<p>Any good industrial strength key-value database like rocksdb, lmdb and others would provide these APIs with lots of bindings for multiple programming languages.<p>Maybe we need a second coming of NoSQL (relational no-sql?) focused in providing good cross-language APIs so instead of compiling SQL into efficient programs that use the right indexes, we could just write our queries manually in code. Bad queries would be a lot easier to debug and fix this way, and it seems like this would require a lot less machinery.</div><br/><div id="35984070" class="c"><input type="checkbox" id="c-35984070" checked=""/><div class="controls bullet"><span class="by">nine_k</span><span>|</span><a href="#35983962">parent</a><span>|</span><a href="#35984010">next</a><span>|</span><label class="collapse" for="c-35984070">[-]</label><label class="expand" for="c-35984070">[1 more]</label></div><br/><div class="children"><div class="content">OK, you got a good KV store, and a good indexing library in your favorite language. You now write special-case procedural code for each retrieval and each update. Eventually you get tired of copy-pasting such code with slight modifications; you factor things out. You make them generic. You end up with a poorly specified &quot;language&quot; for making queried, joins, projections. You notice how sometimes performance requires different approaches, and bake the logic tp choose them into your library. Then you realise that there are cases when you need two related updates either succeed or fail together, not halfway. Transactions.<p>This all has been tried many times in 1990s when RDBMSes were pricey or otherwise unattainable. Paradox engine, various stuff on top of Berkeley DB, etc. MySQL is) or at least was) an SQL engine on top of a KV storage engine.<p>Now we have Postgres that fills most small- and median-scale needs out of the box.<p>A modern RDBMS is one of the most powerful and versatile tools in developer&#x27;s hands, and usually works amazingly well even with stock settings. Usually it by far outperforms makeshift replacements to it. Learn to operate an RDBMS, learn to wield this power. It&#x27;s very much humanly possible, and is much nicer experience than learning, say, C++. Then maybe you will have less of a desire to replace it with manually written  imperative code.</div><br/></div></div><div id="35984010" class="c"><input type="checkbox" id="c-35984010" checked=""/><div class="controls bullet"><span class="by">Icathian</span><span>|</span><a href="#35983962">parent</a><span>|</span><a href="#35984070">prev</a><span>|</span><a href="#35985055">next</a><span>|</span><label class="collapse" for="c-35984010">[-]</label><label class="expand" for="c-35984010">[2 more]</label></div><br/><div class="children"><div class="content">I think you are drastically overestimating the ability of most devs to write performant code.  Do you really think you&#x27;re going to get better results asking devs who, by your measure cannot write good declarative SQL schemas and queries, to roll their own data storage and retrieval raw?<p>RDBMS software is complicated in large part due to it needing to serve a wide range of use cases, so a custom-built version might end up simpler to use, but you can&#x27;t sell me that Joe Backend-Dev is going to outperform however many million dev-hours have gone into Postgres.</div><br/><div id="35984122" class="c"><input type="checkbox" id="c-35984122" checked=""/><div class="controls bullet"><span class="by">fiddlerwoaroof</span><span>|</span><a href="#35983962">root</a><span>|</span><a href="#35984010">parent</a><span>|</span><a href="#35985055">next</a><span>|</span><label class="collapse" for="c-35984122">[-]</label><label class="expand" for="c-35984122">[1 more]</label></div><br/><div class="children"><div class="content">I generally agree, but I think there’s a mistake here comparing something like Postgres to hand-rolled code: Postgres has to implement generally safe optimizations and so cannot take advantage of invariants that cannot be expressed in a way it understands. For a specific task, with well-understood data, I’d expect a typical programmer should be able to outperform Postgres with a bit of effort.<p>The trade-off here is maintenance cost and a lack of flexibility due to specialization.  So, IMO, one ought to reach for an SQL database first and then something else to optimize hot paths as determined by a profiler.</div><br/></div></div></div></div><div id="35985055" class="c"><input type="checkbox" id="c-35985055" checked=""/><div class="controls bullet"><span class="by">RobinL</span><span>|</span><a href="#35983962">parent</a><span>|</span><a href="#35984010">prev</a><span>|</span><a href="#35984303">next</a><span>|</span><label class="collapse" for="c-35985055">[-]</label><label class="expand" for="c-35985055">[1 more]</label></div><br/><div class="children"><div class="content">I found this comment in a previous discussion insightful (<a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=34580448" rel="nofollow">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=34580448</a>)<p>This simple command `UPDATE users SET preference = &#x27;blue&#x27; WHERE id = 123` virtually contains:<p>* concurrency control<p>* statistics, which will help:<p>* execution plans evaluation, which will reduce IO cost with the help of:<p>* (several categories of) indexes<p>* type checking<p>* data invariants checking<p>* point in time recovery<p>* enables dataset-wide backup strategies<p>* ISO standard way of structuring data<p>* an interface that empowers business people<p>And that&#x27;s just a few items off the top of my mind.</div><br/></div></div><div id="35984303" class="c"><input type="checkbox" id="c-35984303" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#35983962">parent</a><span>|</span><a href="#35985055">prev</a><span>|</span><a href="#35984265">next</a><span>|</span><label class="collapse" for="c-35984303">[-]</label><label class="expand" for="c-35984303">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Setting up SQL<p>You&#x27;ll have to set up something.<p>&gt; creating a well-designed schema<p>You&#x27;ll have to design your schema well. (Or else.)<p>&gt; optimizing queries can be a complex, multi-step process.<p>You&#x27;ll have to optimize your queries. (Or else.)<p>---<p>I don&#x27;t see why SQL is more owrk than the alternative.</div><br/></div></div><div id="35984265" class="c"><input type="checkbox" id="c-35984265" checked=""/><div class="controls bullet"><span class="by">theLiminator</span><span>|</span><a href="#35983962">parent</a><span>|</span><a href="#35984303">prev</a><span>|</span><a href="#35984593">next</a><span>|</span><label class="collapse" for="c-35984265">[-]</label><label class="expand" for="c-35984265">[1 more]</label></div><br/><div class="children"><div class="content">Imo lazy dataframe libraries (like polars or datafusion) give you most of what you need in OLAP SQL but without the pain.</div><br/></div></div><div id="35984593" class="c"><input type="checkbox" id="c-35984593" checked=""/><div class="controls bullet"><span class="by">iddan</span><span>|</span><a href="#35983962">parent</a><span>|</span><a href="#35984265">prev</a><span>|</span><a href="#35984002">next</a><span>|</span><label class="collapse" for="c-35984593">[-]</label><label class="expand" for="c-35984593">[1 more]</label></div><br/><div class="children"><div class="content">I thought like this until I discovered Prisma and EdgeDB. They provide all the niceties of a NoSQL &#x2F; graph databases with the robustness of battle tested SQL databases</div><br/></div></div><div id="35984002" class="c"><input type="checkbox" id="c-35984002" checked=""/><div class="controls bullet"><span class="by">beoberha</span><span>|</span><a href="#35983962">parent</a><span>|</span><a href="#35984593">prev</a><span>|</span><a href="#35984025">next</a><span>|</span><label class="collapse" for="c-35984002">[-]</label><label class="expand" for="c-35984002">[2 more]</label></div><br/><div class="children"><div class="content">The simple answer to this is that not only engineers write database queries.<p>Personally, I’d be interested to see a system like the one you describe. Part of me thinks that SQL would still be simpler to reason about (though probably not to maintain).</div><br/><div id="35984139" class="c"><input type="checkbox" id="c-35984139" checked=""/><div class="controls bullet"><span class="by">bobbylarrybobby</span><span>|</span><a href="#35983962">root</a><span>|</span><a href="#35984002">parent</a><span>|</span><a href="#35984025">next</a><span>|</span><label class="collapse" for="c-35984139">[-]</label><label class="expand" for="c-35984139">[1 more]</label></div><br/><div class="children"><div class="content">Polars is an interesting library in this space. A rust DataFrame with bindings in other languages, most notably python</div><br/></div></div></div></div><div id="35984025" class="c"><input type="checkbox" id="c-35984025" checked=""/><div class="controls bullet"><span class="by">Vt71fcAqt7</span><span>|</span><a href="#35983962">parent</a><span>|</span><a href="#35984002">prev</a><span>|</span><a href="#35983875">next</a><span>|</span><label class="collapse" for="c-35984025">[-]</label><label class="expand" for="c-35984025">[1 more]</label></div><br/><div class="children"><div class="content">&gt;relational no-sql<p>Do you mean something like edgeDB?[0]<p>Or do you mean some non-declarative language completely? I don&#x27;t see the latter making much sense. The issue with SQL for me is the &quot;natural language&quot; which quickly loses all intended readabilty when you have SELECT col1, col2 FROM (SELECT * FROM ... WHERE 1=0 AND ... which is what edgeDB is trying to solve.<p>[0]<a href="https:&#x2F;&#x2F;edgedb.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;edgedb.com&#x2F;</a></div><br/></div></div></div></div><div id="35983875" class="c"><input type="checkbox" id="c-35983875" checked=""/><div class="controls bullet"><span class="by">zxexz</span><span>|</span><a href="#35983962">prev</a><span>|</span><a href="#35984078">next</a><span>|</span><label class="collapse" for="c-35983875">[-]</label><label class="expand" for="c-35983875">[1 more]</label></div><br/><div class="children"><div class="content">Lack of order-preserving parallel parquet writing was my biggest gripe with DuckDB. Glad to see they implemented it! Between this duckdb release, DataFusion and Apache Arrow (yes, I know that helps power the other projects I listed), I’m hoping I won’t have to touch a spark cluster for a long time.</div><br/></div></div><div id="35984078" class="c"><input type="checkbox" id="c-35984078" checked=""/><div class="controls bullet"><span class="by">mkhattab</span><span>|</span><a href="#35983875">prev</a><span>|</span><a href="#35984175">next</a><span>|</span><label class="collapse" for="c-35984078">[-]</label><label class="expand" for="c-35984078">[6 more]</label></div><br/><div class="children"><div class="content">Minor annoyance:<p>Yesterday I was reading the docs and one of the first things I tried is the following, copy and pasted, which didn&#x27;t work, using version 0.71:<p><pre><code>  COPY (SELECT 42 AS a, &#x27;hello&#x27; AS b) TO &#x27;query.json&#x27; (FORMAT JSON, ARRAY TRUE);

  &gt;&gt;&gt; Error: Binder Error: Unrecognized option CSV writer &quot;array&quot;
</code></pre>
Just tried the above again with this release and it&#x27;s fixed now.<p>Ideally, all commands listed in the documentation <i>should be tested or verified</i> to work.<p>Aside from that, nice work on the release! And I&#x27;m learning more and find it pretty cool, especially WASM support.</div><br/><div id="35984085" class="c"><input type="checkbox" id="c-35984085" checked=""/><div class="controls bullet"><span class="by">1egg0myegg0</span><span>|</span><a href="#35984078">parent</a><span>|</span><a href="#35984175">next</a><span>|</span><label class="collapse" for="c-35984085">[-]</label><label class="expand" for="c-35984085">[5 more]</label></div><br/><div class="children"><div class="content">Howdy! The docs reflect the latest dev branch. For a specific release, you can pick it from the version dropdown in the top right!</div><br/><div id="35984163" class="c"><input type="checkbox" id="c-35984163" checked=""/><div class="controls bullet"><span class="by">porker</span><span>|</span><a href="#35984078">root</a><span>|</span><a href="#35984085">parent</a><span>|</span><a href="#35984166">next</a><span>|</span><label class="collapse" for="c-35984163">[-]</label><label class="expand" for="c-35984163">[1 more]</label></div><br/><div class="children"><div class="content">I think it would be a better choice to default to showing the current stable release&#x27;s docs rather than the dev branch?<p>That way users who download it see the docs they expect, and those who build from the dev branch or download preview builds have to go through an extra step.</div><br/></div></div><div id="35984166" class="c"><input type="checkbox" id="c-35984166" checked=""/><div class="controls bullet"><span class="by">rendaw</span><span>|</span><a href="#35984078">root</a><span>|</span><a href="#35984085">parent</a><span>|</span><a href="#35984163">prev</a><span>|</span><a href="#35984095">next</a><span>|</span><label class="collapse" for="c-35984166">[-]</label><label class="expand" for="c-35984166">[1 more]</label></div><br/><div class="children"><div class="content">Why not show the latest stable release docs by default? I assume that&#x27;s what most people would use.</div><br/></div></div><div id="35984095" class="c"><input type="checkbox" id="c-35984095" checked=""/><div class="controls bullet"><span class="by">mkhattab</span><span>|</span><a href="#35984078">root</a><span>|</span><a href="#35984085">parent</a><span>|</span><a href="#35984166">prev</a><span>|</span><a href="#35984175">next</a><span>|</span><label class="collapse" for="c-35984095">[-]</label><label class="expand" for="c-35984095">[2 more]</label></div><br/><div class="children"><div class="content">Sorry! Just realized that when I checked the docs again. My bad.</div><br/><div id="35984102" class="c"><input type="checkbox" id="c-35984102" checked=""/><div class="controls bullet"><span class="by">1egg0myegg0</span><span>|</span><a href="#35984078">root</a><span>|</span><a href="#35984095">parent</a><span>|</span><a href="#35984175">next</a><span>|</span><label class="collapse" for="c-35984102">[-]</label><label class="expand" for="c-35984102">[1 more]</label></div><br/><div class="children"><div class="content">No worries! Thanks for reading the docs!</div><br/></div></div></div></div></div></div></div></div><div id="35984175" class="c"><input type="checkbox" id="c-35984175" checked=""/><div class="controls bullet"><span class="by">whoopdeepoo</span><span>|</span><a href="#35984078">prev</a><span>|</span><a href="#35983795">next</a><span>|</span><label class="collapse" for="c-35984175">[-]</label><label class="expand" for="c-35984175">[2 more]</label></div><br/><div class="children"><div class="content">Such an amazing project.  Once the geospatial extension lands I&#x27;m going to seriously consider switching our geoparquet workflows over.</div><br/><div id="35985159" class="c"><input type="checkbox" id="c-35985159" checked=""/><div class="controls bullet"><span class="by">wiredfool</span><span>|</span><a href="#35984175">parent</a><span>|</span><a href="#35983795">next</a><span>|</span><label class="collapse" for="c-35985159">[-]</label><label class="expand" for="c-35985159">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m just minorly annoyed that they&#x27;re not calling it GeoDuck.</div><br/></div></div></div></div><div id="35983795" class="c"><input type="checkbox" id="c-35983795" checked=""/><div class="controls bullet"><span class="by">tibudiyanto</span><span>|</span><a href="#35984175">prev</a><span>|</span><a href="#35983940">next</a><span>|</span><label class="collapse" for="c-35983795">[-]</label><label class="expand" for="c-35983795">[1 more]</label></div><br/><div class="children"><div class="content">What a great database.<p>This and sqlite-utils are my go to tools for ad hoc data wrangling.</div><br/></div></div><div id="35983940" class="c"><input type="checkbox" id="c-35983940" checked=""/><div class="controls bullet"><span class="by">ChrisCinelli</span><span>|</span><a href="#35983795">prev</a><span>|</span><a href="#35983902">next</a><span>|</span><label class="collapse" for="c-35983940">[-]</label><label class="expand" for="c-35983940">[7 more]</label></div><br/><div class="children"><div class="content">This is the first time I heard about DuckDB. Why someone would use that instead of a mature engine like SQLite?</div><br/><div id="35983972" class="c"><input type="checkbox" id="c-35983972" checked=""/><div class="controls bullet"><span class="by">1egg0myegg0</span><span>|</span><a href="#35983940">parent</a><span>|</span><a href="#35983943">next</a><span>|</span><label class="collapse" for="c-35983972">[-]</label><label class="expand" for="c-35983972">[4 more]</label></div><br/><div class="children"><div class="content">Great question! For analytical queries, DuckDB is ~100x faster than SQLite. It also has great connectivity with Parquet, Pandas, Arrow, Postgres, and more! Plus, the syntax follows Postgres closely, so you have strong data typing and true timestamps, etc.<p>All that said - SQLite is still faster for transactions. Now DuckDB can actually read and write from&#x2F;to SQLite, so you can use SQLite for OLTP and DuckDB for OLAP.<p><a href="https:&#x2F;&#x2F;duckdb.org&#x2F;docs&#x2F;sql&#x2F;statements&#x2F;attach" rel="nofollow">https:&#x2F;&#x2F;duckdb.org&#x2F;docs&#x2F;sql&#x2F;statements&#x2F;attach</a></div><br/><div id="35984015" class="c"><input type="checkbox" id="c-35984015" checked=""/><div class="controls bullet"><span class="by">fbdab103</span><span>|</span><a href="#35983940">root</a><span>|</span><a href="#35983972">parent</a><span>|</span><a href="#35983943">next</a><span>|</span><label class="collapse" for="c-35984015">[-]</label><label class="expand" for="c-35984015">[3 more]</label></div><br/><div class="children"><div class="content">&gt;Now DuckDB can actually read and write from&#x2F;to SQLite<p>This feels like it opens up some possibilities, but I am struggling to figure out where. Are you aware of any interesting use cases this has enabled? Does all of the Duck syntax then work against the SQLite database? For example, could I now run a pivot without a bunch of hoops?</div><br/><div id="35984059" class="c"><input type="checkbox" id="c-35984059" checked=""/><div class="controls bullet"><span class="by">1egg0myegg0</span><span>|</span><a href="#35983940">root</a><span>|</span><a href="#35984015">parent</a><span>|</span><a href="#35983943">next</a><span>|</span><label class="collapse" for="c-35984059">[-]</label><label class="expand" for="c-35984059">[2 more]</label></div><br/><div class="children"><div class="content">You could definitely run a pivot with the SQLite attach! All of the DuckDB syntax works!</div><br/><div id="35984092" class="c"><input type="checkbox" id="c-35984092" checked=""/><div class="controls bullet"><span class="by">fbdab103</span><span>|</span><a href="#35983940">root</a><span>|</span><a href="#35984059">parent</a><span>|</span><a href="#35983943">next</a><span>|</span><label class="collapse" for="c-35984092">[-]</label><label class="expand" for="c-35984092">[1 more]</label></div><br/><div class="children"><div class="content">Well that is just amazingly interesting. The documentation is failing to do this feature justice! Definitely going to be on my todo list to explore this bridge in the near future.</div><br/></div></div></div></div></div></div></div></div><div id="35983943" class="c"><input type="checkbox" id="c-35983943" checked=""/><div class="controls bullet"><span class="by">fbdab103</span><span>|</span><a href="#35983940">parent</a><span>|</span><a href="#35983972">prev</a><span>|</span><a href="#35985037">next</a><span>|</span><label class="collapse" for="c-35983943">[-]</label><label class="expand" for="c-35983943">[1 more]</label></div><br/><div class="children"><div class="content">Columnar database not row based. More appropriate for analytical workloads, and not as a transactional backend.</div><br/></div></div><div id="35985037" class="c"><input type="checkbox" id="c-35985037" checked=""/><div class="controls bullet"><span class="by">bjornasm</span><span>|</span><a href="#35983940">parent</a><span>|</span><a href="#35983943">prev</a><span>|</span><a href="#35983902">next</a><span>|</span><label class="collapse" for="c-35985037">[-]</label><label class="expand" for="c-35985037">[1 more]</label></div><br/><div class="children"><div class="content">Speed and better connectivity.</div><br/></div></div></div></div><div id="35983902" class="c"><input type="checkbox" id="c-35983902" checked=""/><div class="controls bullet"><span class="by">winrid</span><span>|</span><a href="#35983940">prev</a><span>|</span><a href="#35984573">next</a><span>|</span><label class="collapse" for="c-35983902">[-]</label><label class="expand" for="c-35983902">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been thinking about rebuilding the website analytics service I have, to be around sharded duckdb and just giving people raw SQL access.<p>ClickHouse is the alternative, but this approach has some interesting advantages, like simplicity.</div><br/><div id="35985151" class="c"><input type="checkbox" id="c-35985151" checked=""/><div class="controls bullet"><span class="by">higeorge13</span><span>|</span><a href="#35983902">parent</a><span>|</span><a href="#35984573">next</a><span>|</span><label class="collapse" for="c-35985151">[-]</label><label class="expand" for="c-35985151">[1 more]</label></div><br/><div class="children"><div class="content">I find clickhouse equally simple. One command to install and then you can either read from local&#x2F;remote files, create tables, etc</div><br/></div></div></div></div><div id="35984573" class="c"><input type="checkbox" id="c-35984573" checked=""/><div class="controls bullet"><span class="by">pknerd</span><span>|</span><a href="#35983902">prev</a><span>|</span><label class="collapse" for="c-35984573">[-]</label><label class="expand" for="c-35984573">[1 more]</label></div><br/><div class="children"><div class="content">Can you share some use cases with details where I can learn more how DuckDB is doing better?</div><br/></div></div></div></div></div></div></div></body></html>