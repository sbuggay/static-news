<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1722589273002" as="style"/><link rel="stylesheet" href="styles.css?v=1722589273002"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/miekg/gitopper">GitOpper: GitOps Without Kubernetes</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>fanf2</span> | <span>24 comments</span></div><br/><div><div id="41135900" class="c"><input type="checkbox" id="c-41135900" checked=""/><div class="controls bullet"><span class="by">arjvik</span><span>|</span><a href="#41137075">next</a><span>|</span><label class="collapse" for="c-41135900">[-]</label><label class="expand" for="c-41135900">[1 more]</label></div><br/><div class="children"><div class="content">One of my favorite GitOps tricks is adding a post-recieve.hook with the contents:<p><pre><code>    #!&#x2F;bin&#x2F;bash
    
    echo -e &quot;\e[1;31mUpdating worktree and fetching remotes\e[m&quot;
    git --git-dir=&quot;$GIT_DIR&quot; --work-tree=&quot;$GIT_DIR&#x2F;..&quot; reset --hard
    git --git-dir=&quot;$GIT_DIR&quot; fetch origin master
    while read oldref newref refname; do
        echo -e &quot;\e[1;32mPushed ${refname##refs&#x2F;heads&#x2F;}\t${oldref::7} -&gt; ${newref::7}\e[m&quot;
    done
    
    echo -e &quot;\e[1;31mRestarting service\e[m&quot;
    # Run whatever command is needed to restart the service
</code></pre>
So that I can Heroku-style `git push` to my server (an ssh remote named &quot;deploy&quot;) in order to deploy code!</div><br/></div></div><div id="41137075" class="c"><input type="checkbox" id="c-41137075" checked=""/><div class="controls bullet"><span class="by">fariszr</span><span>|</span><a href="#41135900">prev</a><span>|</span><a href="#41135928">next</a><span>|</span><label class="collapse" for="c-41137075">[-]</label><label class="expand" for="c-41137075">[1 more]</label></div><br/><div class="children"><div class="content">I built something similar, a github action for doing gitops with docker compose (or swarm):
<a href="https:&#x2F;&#x2F;github.com&#x2F;FarisZR&#x2F;docker-compose-gitops-action">https:&#x2F;&#x2F;github.com&#x2F;FarisZR&#x2F;docker-compose-gitops-action</a><p>For other stuff I just use another version of the action to deploy files using Tailscale SSH:
<a href="https:&#x2F;&#x2F;github.com&#x2F;FarisZR&#x2F;tailscale-ssh-deploy">https:&#x2F;&#x2F;github.com&#x2F;FarisZR&#x2F;tailscale-ssh-deploy</a></div><br/></div></div><div id="41135928" class="c"><input type="checkbox" id="c-41135928" checked=""/><div class="controls bullet"><span class="by">cyrnel</span><span>|</span><a href="#41137075">prev</a><span>|</span><a href="#41134143">next</a><span>|</span><label class="collapse" for="c-41135928">[-]</label><label class="expand" for="c-41135928">[1 more]</label></div><br/><div class="children"><div class="content">Glad to see something like this, if only to point out that even without containers and Kubernetes, a proper deployment tool is a lot more complex than whatever shell script or Makefile you cooked up on your own. Error handling, timeouts, deployment state management, rollback logic, authentication, and a pause feature are the irreducible complexity of a robust deployment method.</div><br/></div></div><div id="41134143" class="c"><input type="checkbox" id="c-41134143" checked=""/><div class="controls bullet"><span class="by">someguy101010</span><span>|</span><a href="#41135928">prev</a><span>|</span><a href="#41136037">next</a><span>|</span><label class="collapse" for="c-41134143">[-]</label><label class="expand" for="c-41134143">[6 more]</label></div><br/><div class="children"><div class="content">If you use nixos there&#x27;s also <a href="https:&#x2F;&#x2F;github.com&#x2F;nlewo&#x2F;comin">https:&#x2F;&#x2F;github.com&#x2F;nlewo&#x2F;comin</a></div><br/><div id="41135243" class="c"><input type="checkbox" id="c-41135243" checked=""/><div class="controls bullet"><span class="by">zdw</span><span>|</span><a href="#41134143">parent</a><span>|</span><a href="#41134349">next</a><span>|</span><label class="collapse" for="c-41135243">[-]</label><label class="expand" for="c-41135243">[2 more]</label></div><br/><div class="children"><div class="content">Is this named from the overweight cat meme?</div><br/><div id="41136559" class="c"><input type="checkbox" id="c-41136559" checked=""/><div class="controls bullet"><span class="by">lewo</span><span>|</span><a href="#41134143">root</a><span>|</span><a href="#41135243">parent</a><span>|</span><a href="#41134349">next</a><span>|</span><label class="collapse" for="c-41136559">[-]</label><label class="expand" for="c-41136559">[1 more]</label></div><br/><div class="children"><div class="content">No, it has been initially developed to manage a &quot;COMmunity INfrastructure&quot; and it sounds like the word &quot;coming&quot;. I didn&#x27;t know this meme but it&#x27;s a nice coincidence because this infrastructure is actually a kind of &quot;CHATONS&quot; [1] (kitten in french)!
Thx for the ref which could be useful for a future logo!<p>[1] <a href="https:&#x2F;&#x2F;www.chatons.org&#x2F;en" rel="nofollow">https:&#x2F;&#x2F;www.chatons.org&#x2F;en</a></div><br/></div></div></div></div><div id="41134349" class="c"><input type="checkbox" id="c-41134349" checked=""/><div class="controls bullet"><span class="by">jeppesen-io</span><span>|</span><a href="#41134143">parent</a><span>|</span><a href="#41135243">prev</a><span>|</span><a href="#41136037">next</a><span>|</span><label class="collapse" for="c-41134349">[-]</label><label class="expand" for="c-41134349">[3 more]</label></div><br/><div class="children"><div class="content">This is interesting - maybe it&#x27;s time I use flakes...</div><br/><div id="41136851" class="c"><input type="checkbox" id="c-41136851" checked=""/><div class="controls bullet"><span class="by">nothrabannosir</span><span>|</span><a href="#41134143">root</a><span>|</span><a href="#41134349">parent</a><span>|</span><a href="#41136803">next</a><span>|</span><label class="collapse" for="c-41136851">[-]</label><label class="expand" for="c-41136851">[1 more]</label></div><br/><div class="children"><div class="content">If you want a basic version of this you can just use the built-in<p><pre><code>  system.autoUpgrade = {
    enable = true;
    flake = &quot;github:you&#x2F;dotfiles&quot;;
  };</code></pre></div><br/></div></div><div id="41136803" class="c"><input type="checkbox" id="c-41136803" checked=""/><div class="controls bullet"><span class="by">lewo</span><span>|</span><a href="#41134143">root</a><span>|</span><a href="#41134349">parent</a><span>|</span><a href="#41136851">prev</a><span>|</span><a href="#41136037">next</a><span>|</span><label class="collapse" for="c-41136803">[-]</label><label class="expand" for="c-41136803">[1 more]</label></div><br/><div class="children"><div class="content">We have an issue to support non flake deployments: <a href="https:&#x2F;&#x2F;github.com&#x2F;nlewo&#x2F;comin&#x2F;issues&#x2F;30">https:&#x2F;&#x2F;github.com&#x2F;nlewo&#x2F;comin&#x2F;issues&#x2F;30</a></div><br/></div></div></div></div></div></div><div id="41136037" class="c"><input type="checkbox" id="c-41136037" checked=""/><div class="controls bullet"><span class="by">jyufnlwfnzvbm</span><span>|</span><a href="#41134143">prev</a><span>|</span><a href="#41136904">next</a><span>|</span><label class="collapse" for="c-41136037">[-]</label><label class="expand" for="c-41136037">[4 more]</label></div><br/><div class="children"><div class="content">Is this when you don&#x27;t require availability</div><br/><div id="41136961" class="c"><input type="checkbox" id="c-41136961" checked=""/><div class="controls bullet"><span class="by">politelemon</span><span>|</span><a href="#41136037">parent</a><span>|</span><a href="#41136904">next</a><span>|</span><label class="collapse" for="c-41136961">[-]</label><label class="expand" for="c-41136961">[3 more]</label></div><br/><div class="children"><div class="content">You may or may not be joking, but gitops has been the cause of outages for us in quite a few instances. I have been unable to stress what a terrible idea arbitrarily pulling and applying from git is. I am unable to stress it because that&#x27;s the overwhelming way that many k8s setups are done, so clearly they cannot be wrong.</div><br/><div id="41137136" class="c"><input type="checkbox" id="c-41137136" checked=""/><div class="controls bullet"><span class="by">ramon156</span><span>|</span><a href="#41136037">root</a><span>|</span><a href="#41136961">parent</a><span>|</span><a href="#41136999">next</a><span>|</span><label class="collapse" for="c-41137136">[-]</label><label class="expand" for="c-41137136">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m unsure what the alternative is. Even without gitops people do the same hand labour with the commandline, so why is GitOps specifically bad?</div><br/></div></div><div id="41136999" class="c"><input type="checkbox" id="c-41136999" checked=""/><div class="controls bullet"><span class="by">jspdown</span><span>|</span><a href="#41136037">root</a><span>|</span><a href="#41136961">parent</a><span>|</span><a href="#41137136">prev</a><span>|</span><a href="#41136904">next</a><span>|</span><label class="collapse" for="c-41136999">[-]</label><label class="expand" for="c-41136999">[1 more]</label></div><br/><div class="children"><div class="content">Could you elaborate on this? Why do you think it&#x27;s a bad idea?</div><br/></div></div></div></div></div></div><div id="41136904" class="c"><input type="checkbox" id="c-41136904" checked=""/><div class="controls bullet"><span class="by">MongoTheMad</span><span>|</span><a href="#41136037">prev</a><span>|</span><a href="#41135800">next</a><span>|</span><label class="collapse" for="c-41136904">[-]</label><label class="expand" for="c-41136904">[1 more]</label></div><br/><div class="children"><div class="content">Is this barebones puppet&#x2F;salt&#x2F;Ansible?</div><br/></div></div><div id="41135800" class="c"><input type="checkbox" id="c-41135800" checked=""/><div class="controls bullet"><span class="by">habosa</span><span>|</span><a href="#41136904">prev</a><span>|</span><a href="#41134284">next</a><span>|</span><label class="collapse" for="c-41135800">[-]</label><label class="expand" for="c-41135800">[1 more]</label></div><br/><div class="children"><div class="content">Maybe this should be GitOps without Docker? Which is something that’s pretty attractive to me for personal projects.</div><br/></div></div><div id="41134284" class="c"><input type="checkbox" id="c-41134284" checked=""/><div class="controls bullet"><span class="by">Spivak</span><span>|</span><a href="#41135800">prev</a><span>|</span><a href="#41135638">next</a><span>|</span><label class="collapse" for="c-41134284">[-]</label><label class="expand" for="c-41134284">[2 more]</label></div><br/><div class="children"><div class="content">Highly recommend ansible-pull [1] as well for this job. Not because Ansible is amazing or anything but because every use-case you can think of likely already has a module.<p>[1] <a href="https:&#x2F;&#x2F;docs.ansible.com&#x2F;ansible&#x2F;latest&#x2F;cli&#x2F;ansible-pull.html" rel="nofollow">https:&#x2F;&#x2F;docs.ansible.com&#x2F;ansible&#x2F;latest&#x2F;cli&#x2F;ansible-pull.htm...</a></div><br/><div id="41134423" class="c"><input type="checkbox" id="c-41134423" checked=""/><div class="controls bullet"><span class="by">hhh</span><span>|</span><a href="#41134284">parent</a><span>|</span><a href="#41135638">next</a><span>|</span><label class="collapse" for="c-41134423">[-]</label><label class="expand" for="c-41134423">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been using ansible-pull for like 3-5(?) years now, and it&#x27;s been pretty awesome. We use it to do bare-metal device management.</div><br/></div></div></div></div><div id="41135638" class="c"><input type="checkbox" id="c-41135638" checked=""/><div class="controls bullet"><span class="by">btreecat</span><span>|</span><a href="#41134284">prev</a><span>|</span><a href="#41135061">next</a><span>|</span><label class="collapse" for="c-41135638">[-]</label><label class="expand" for="c-41135638">[1 more]</label></div><br/><div class="children"><div class="content">Curious when I might use this over GH Actions or GL Runners?</div><br/></div></div><div id="41135061" class="c"><input type="checkbox" id="c-41135061" checked=""/><div class="controls bullet"><span class="by">starttoaster</span><span>|</span><a href="#41135638">prev</a><span>|</span><label class="collapse" for="c-41135061">[-]</label><label class="expand" for="c-41135061">[5 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not clear to me what Kubernetes has to do with this project at all. GitOps isn&#x27;t really synonymous with Kubernetes anyway, so this comes across as throwing the word Kubernetes into something for recognition potentially? But mentioning Kubernetes and conflating GitOps with Kubernetes has me more confused on what this actually solves for me.<p>Seems like the ArgoCD of non-containerized deployments. Which, ArgoCD has something to do with Kubernetes. So I guess I can sort of link in my head the thought process in branding here. But that requires me to know about ArgoCD and similar continuous deployment tools and link that in between GitOpper, GitOps, and Kubernetes somewhere. A bit too much mental gymnastics for the target audience: someone that doesn&#x27;t use Kubernetes anyway.<p>In my opinion, consider changing your branding to something like &quot;GitOps-style continuous deployments to non-containerized environments.&quot; A bit less show-y but at least that&#x27;s more decipherable, just in my opinion.</div><br/><div id="41135893" class="c"><input type="checkbox" id="c-41135893" checked=""/><div class="controls bullet"><span class="by">cyrnel</span><span>|</span><a href="#41135061">parent</a><span>|</span><a href="#41135538">next</a><span>|</span><label class="collapse" for="c-41135893">[-]</label><label class="expand" for="c-41135893">[3 more]</label></div><br/><div class="children"><div class="content">The term is pretty synonymous with Kubernetes since it was coined in a Kubernetes context: <a href="https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20200104172859&#x2F;https:&#x2F;&#x2F;www.weave.works&#x2F;blog&#x2F;gitops-operations-by-pull-request" rel="nofollow">https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20200104172859&#x2F;https:&#x2F;&#x2F;www.weave...</a></div><br/><div id="41135999" class="c"><input type="checkbox" id="c-41135999" checked=""/><div class="controls bullet"><span class="by">starttoaster</span><span>|</span><a href="#41135061">root</a><span>|</span><a href="#41135893">parent</a><span>|</span><a href="#41136002">next</a><span>|</span><label class="collapse" for="c-41135999">[-]</label><label class="expand" for="c-41135999">[1 more]</label></div><br/><div class="children"><div class="content">A Kubernetes tool coined the term but it’s always been about using git to store your manifests for your infrastructure, with some method of synchronization between the current state and what is in the git repo. With that in mind, it makes no sense to call them synonymous, GitOps transcends the concept of a particular tool or ecosystem.</div><br/></div></div><div id="41136002" class="c"><input type="checkbox" id="c-41136002" checked=""/><div class="controls bullet"><span class="by">kelnos</span><span>|</span><a href="#41135061">root</a><span>|</span><a href="#41135893">parent</a><span>|</span><a href="#41135999">prev</a><span>|</span><a href="#41135538">next</a><span>|</span><label class="collapse" for="c-41136002">[-]</label><label class="expand" for="c-41136002">[1 more]</label></div><br/><div class="children"><div class="content">Regardless of the term used, GitOps has been a thing longer than Kubernetes has existed.</div><br/></div></div></div></div><div id="41135538" class="c"><input type="checkbox" id="c-41135538" checked=""/><div class="controls bullet"><span class="by">danmur</span><span>|</span><a href="#41135061">parent</a><span>|</span><a href="#41135893">prev</a><span>|</span><label class="collapse" for="c-41135538">[-]</label><label class="expand" for="c-41135538">[1 more]</label></div><br/><div class="children"><div class="content">I found this odd too. It reminded me of a book I read ages ago, sci-fi fantasy where there is a species that is very long-lived but they have a finite memory. Maybe if your memory is a year or two long then GitOps would seem to mean k8s deployments automatically out of git, rather than all the other things.<p>(I think it was by C.S Friedman but I don&#x27;t remember which one)</div><br/></div></div></div></div></div></div></div></div></div></body></html>