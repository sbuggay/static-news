<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1687251655311" as="style"/><link rel="stylesheet" href="styles.css?v=1687251655311"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://dwheeler.com/essays/filenames-in-shell.html">Filenames and pathnames in shell: How to do it correctly (2020)</a>Â <span class="domain">(<a href="https://dwheeler.com">dwheeler.com</a>)</span></div><div class="subtext"><span>ingve</span> | <span>56 comments</span></div><br/><div><div id="36398372" class="c"><input type="checkbox" id="c-36398372" checked=""/><div class="controls bullet"><span class="by">js2</span><span>|</span><a href="#36399049">next</a><span>|</span><label class="collapse" for="c-36398372">[-]</label><label class="expand" for="c-36398372">[12 more]</label></div><br/><div class="children"><div class="content">This is an excellent resource. I&#x27;d like to re-iterate the author&#x27;s recommendation to use shellcheck:<p><a href="https:&#x2F;&#x2F;www.shellcheck.net&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.shellcheck.net&#x2F;</a><p>I also like using shfmt on top of that.<p>(I run them via pre-commit[1] hooks[2,3].)<p>FWIW, I find writing POSIX-compliant shell rarely necessary. In my 25 years of writing shell scripts, they&#x27;ve nearly always been for automation on a specific OS where portability is not a concern. Arrays are really nice to have. One place I like to use them is for making long commands easier to read. e.g.<p><pre><code>    cmd=(
        some-command
        --some-long-option
        --another-long-option
        --an-option-with-a-value=&quot;$value&quot;
    )
    &quot;${cmd[@]}&quot;
</code></pre>
This avoids having to use backslashes so you can comment in-between lines or at the end of any line.<p>I also almost always prefer the self-documenting long-option to single-letter switches when writing shell scripts. Those single-letter options are to save you typing on the command-line. There&#x27;s no reason to use them in a script.<p>When I do write a script for more than one OS (typically macOS and Linux), I have bash on both systems, so I use &quot;#!&#x2F;usr&#x2F;bin&#x2F;env bash&quot; and take care to use only the features that the older version of bash that macOS ships with supports.<p>Where I have to be more careful is in utilities like find, sed, etc which can differ quite a bit between BSD and Linux.<p>1. <a href="https:&#x2F;&#x2F;pre-commit.com&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;pre-commit.com&#x2F;</a><p>2. <a href="https:&#x2F;&#x2F;github.com&#x2F;shellcheck-py&#x2F;shellcheck-py">https:&#x2F;&#x2F;github.com&#x2F;shellcheck-py&#x2F;shellcheck-py</a><p>3. <a href="https:&#x2F;&#x2F;github.com&#x2F;maxwinterstein&#x2F;shfmt-py">https:&#x2F;&#x2F;github.com&#x2F;maxwinterstein&#x2F;shfmt-py</a></div><br/><div id="36399899" class="c"><input type="checkbox" id="c-36399899" checked=""/><div class="controls bullet"><span class="by">doctorpangloss</span><span>|</span><a href="#36398372">parent</a><span>|</span><a href="#36398621">next</a><span>|</span><label class="collapse" for="c-36399899">[-]</label><label class="expand" for="c-36399899">[2 more]</label></div><br/><div class="children"><div class="content">&gt; In my 25 years of writing shell scripts, they&#x27;ve nearly always been for automation on a specific OS where portability is not a concern.<p>I&#x27;ve written hundreds of scripts for Busybox for Windows (<a href="https:&#x2F;&#x2F;github.com&#x2F;rmyorston&#x2F;busybox-w32">https:&#x2F;&#x2F;github.com&#x2F;rmyorston&#x2F;busybox-w32</a>), Linux bash and macOS zsh. POSIX compatibility means a lot.<p>WRT the specific concerns of arguments: if you are doing something complicated, use Python. ChatGPT writes it better anyway.<p>In my experience, more complex scripting is reinventing Gradle, Ansible, Terraform, YAML &amp; similar.</div><br/><div id="36400280" class="c"><input type="checkbox" id="c-36400280" checked=""/><div class="controls bullet"><span class="by">js2</span><span>|</span><a href="#36398372">root</a><span>|</span><a href="#36399899">parent</a><span>|</span><a href="#36398621">next</a><span>|</span><label class="collapse" for="c-36400280">[-]</label><label class="expand" for="c-36400280">[1 more]</label></div><br/><div class="children"><div class="content">I write a lot of Python too. I&#x27;ve written whole systems in it. Been using it since 1.5.2 days. And before that Perl. I know my way pretty well around sed and awk too and pretty much the entire Unix environment.<p>These are all just tools. They each have their strengths and weaknesses.<p>There are times when shell is the best tool for the job and when it is, I prefer to use bash.<p>If I have to write POSIX shell because it&#x27;s a constrained environment, sure, I can do it. It&#x27;s just been something that&#x27;s rarely been a requirement.</div><br/></div></div></div></div><div id="36398621" class="c"><input type="checkbox" id="c-36398621" checked=""/><div class="controls bullet"><span class="by">dreamcompiler</span><span>|</span><a href="#36398372">parent</a><span>|</span><a href="#36399899">prev</a><span>|</span><a href="#36398583">next</a><span>|</span><label class="collapse" for="c-36398621">[-]</label><label class="expand" for="c-36398621">[7 more]</label></div><br/><div class="children"><div class="content">I write lots of scripts that need to work on both Linux and MacOS. Although both are POSIX, filenames in MacOS are case-insensitive and often contain spaces. This stuff plays havoc with bash scripts written by naive Linux programmers. Following TFA&#x27;s recommendations ensures that your scripts will work on both.*<p>* well, except for the fact that MacOS defaults to zsh now.</div><br/><div id="36400512" class="c"><input type="checkbox" id="c-36400512" checked=""/><div class="controls bullet"><span class="by">drbaba</span><span>|</span><a href="#36398372">root</a><span>|</span><a href="#36398621">parent</a><span>|</span><a href="#36399730">next</a><span>|</span><label class="collapse" for="c-36400512">[-]</label><label class="expand" for="c-36400512">[2 more]</label></div><br/><div class="children"><div class="content">&gt; well, except for the fact that MacOS defaults to zsh now.<p>But Zsh is also POSIX sh compatible, is it not?</div><br/><div id="36400925" class="c"><input type="checkbox" id="c-36400925" checked=""/><div class="controls bullet"><span class="by">meinheld111</span><span>|</span><a href="#36398372">root</a><span>|</span><a href="#36400512">parent</a><span>|</span><a href="#36399730">next</a><span>|</span><label class="collapse" for="c-36400925">[-]</label><label class="expand" for="c-36400925">[1 more]</label></div><br/><div class="children"><div class="content">No.<p>Afaik it can be thou</div><br/></div></div></div></div><div id="36399730" class="c"><input type="checkbox" id="c-36399730" checked=""/><div class="controls bullet"><span class="by">ethanpil</span><span>|</span><a href="#36398372">root</a><span>|</span><a href="#36398621">parent</a><span>|</span><a href="#36400512">prev</a><span>|</span><a href="#36398692">next</a><span>|</span><label class="collapse" for="c-36399730">[-]</label><label class="expand" for="c-36399730">[3 more]</label></div><br/><div class="children"><div class="content">Sorry to be so naive.. who is TFA?</div><br/><div id="36399868" class="c"><input type="checkbox" id="c-36399868" checked=""/><div class="controls bullet"><span class="by">js2</span><span>|</span><a href="#36398372">root</a><span>|</span><a href="#36399730">parent</a><span>|</span><a href="#36398692">next</a><span>|</span><label class="collapse" for="c-36399868">[-]</label><label class="expand" for="c-36399868">[2 more]</label></div><br/><div class="children"><div class="content">The fine[1] article.<p>1. Originally from RTFM -&gt; RTFA -&gt; TFA, so feel free to use your own substitution for F, but in this case it&#x27;s a fine article.</div><br/><div id="36400584" class="c"><input type="checkbox" id="c-36400584" checked=""/><div class="controls bullet"><span class="by">LanternLight83</span><span>|</span><a href="#36398372">root</a><span>|</span><a href="#36399868">parent</a><span>|</span><a href="#36398692">next</a><span>|</span><label class="collapse" for="c-36400584">[-]</label><label class="expand" for="c-36400584">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve always thought of it as &quot;the full article&quot;, having not made the connection :p<p>I think it&#x27;s more broadly applicable</div><br/></div></div></div></div></div></div><div id="36398692" class="c"><input type="checkbox" id="c-36398692" checked=""/><div class="controls bullet"><span class="by">js2</span><span>|</span><a href="#36398372">root</a><span>|</span><a href="#36398621">parent</a><span>|</span><a href="#36399730">prev</a><span>|</span><a href="#36398583">next</a><span>|</span><label class="collapse" for="c-36398692">[-]</label><label class="expand" for="c-36398692">[1 more]</label></div><br/><div class="children"><div class="content">To be clear: I agree with every recommendation in this article. I just find that writing POSIX-compliant shell is rarely needed. I&#x27;ve clarified my comment.</div><br/></div></div></div></div><div id="36398583" class="c"><input type="checkbox" id="c-36398583" checked=""/><div class="controls bullet"><span class="by">dreamcompiler</span><span>|</span><a href="#36398372">parent</a><span>|</span><a href="#36398621">prev</a><span>|</span><a href="#36399049">next</a><span>|</span><label class="collapse" for="c-36398583">[-]</label><label class="expand" for="c-36398583">[2 more]</label></div><br/><div class="children"><div class="content">The author suggests using shellcheck in addition to his recommendations.</div><br/><div id="36398700" class="c"><input type="checkbox" id="c-36398700" checked=""/><div class="controls bullet"><span class="by">js2</span><span>|</span><a href="#36398372">root</a><span>|</span><a href="#36398583">parent</a><span>|</span><a href="#36399049">next</a><span>|</span><label class="collapse" for="c-36398700">[-]</label><label class="expand" for="c-36398700">[1 more]</label></div><br/><div class="children"><div class="content">You&#x27;re right! I totally missed that. I&#x27;ve updated my comment.</div><br/></div></div></div></div></div></div><div id="36399049" class="c"><input type="checkbox" id="c-36399049" checked=""/><div class="controls bullet"><span class="by">metadat</span><span>|</span><a href="#36398372">prev</a><span>|</span><a href="#36400441">next</a><span>|</span><label class="collapse" for="c-36399049">[-]</label><label class="expand" for="c-36399049">[6 more]</label></div><br/><div class="children"><div class="content">This would be a significantly better resource if it explained the underlying &quot;why&#x27;s&quot; inline.  In it&#x27;s current form, it comes off as cargo culting &#x2F; magic spell recital.<p>For example, why &quot;.&#x2F;*&quot; rather than &quot;*&quot;.  Not helpful to understand the core principal and reality.<p>Personally I don&#x27;t tend to fuck about with &quot;*&quot; and instead use `find . -print0 | xargs -0 -n1&#x27;.  Hasn&#x27;t bitten me yet, across a few thousand shell scripts (!).<p>Why should I prefer this magic incantation compared to my own battle-tested proven one?<p>And this is why, IMHO, the explanations should be inline.</div><br/><div id="36401112" class="c"><input type="checkbox" id="c-36401112" checked=""/><div class="controls bullet"><span class="by">unixhero</span><span>|</span><a href="#36399049">parent</a><span>|</span><a href="#36399224">next</a><span>|</span><label class="collapse" for="c-36401112">[-]</label><label class="expand" for="c-36401112">[1 more]</label></div><br/><div class="children"><div class="content">Can you elaborate?<p>Do you prefix the find line there eith a backtick?<p>It looks robust, and I am interested in using this technique</div><br/></div></div><div id="36399224" class="c"><input type="checkbox" id="c-36399224" checked=""/><div class="controls bullet"><span class="by">dwheeler</span><span>|</span><a href="#36399049">parent</a><span>|</span><a href="#36401112">prev</a><span>|</span><a href="#36399266">next</a><span>|</span><label class="collapse" for="c-36399224">[-]</label><label class="expand" for="c-36399224">[3 more]</label></div><br/><div class="children"><div class="content">Sadly you can&#x27;t please everyone :-).<p>The explanation <i>is</i> further down on the page. If I wrote in that recommended order, many other developers would complain &quot;I don&#x27;t want all the details, just tell me what to do&quot;.<p>I wrote it this way because some developers just want the tl;dr version, that is, they &quot;just want the answer&quot;</div><br/><div id="36399636" class="c"><input type="checkbox" id="c-36399636" checked=""/><div class="controls bullet"><span class="by">eviks</span><span>|</span><a href="#36399049">root</a><span>|</span><a href="#36399224">parent</a><span>|</span><a href="#36399266">next</a><span>|</span><label class="collapse" for="c-36399636">[-]</label><label class="expand" for="c-36399636">[2 more]</label></div><br/><div class="children"><div class="content">What do you think the chances are of removing the bag of bytes filename design bug in another decade?</div><br/><div id="36399691" class="c"><input type="checkbox" id="c-36399691" checked=""/><div class="controls bullet"><span class="by">dwheeler</span><span>|</span><a href="#36399049">root</a><span>|</span><a href="#36399636">parent</a><span>|</span><a href="#36399266">next</a><span>|</span><label class="collapse" for="c-36399691">[-]</label><label class="expand" for="c-36399691">[1 more]</label></div><br/><div class="children"><div class="content">Low. It wouldn&#x27;t be hard to create an LSM for Linux to reject file creation of certain filenames, though. Then at least sone security-minded people could enable it.<p>The POSIX folks are finally adding formal support for null terminated filenames in filename lists (which is what a lot of people are doing). So that&#x27;s something.</div><br/></div></div></div></div></div></div><div id="36399266" class="c"><input type="checkbox" id="c-36399266" checked=""/><div class="controls bullet"><span class="by">semiquaver</span><span>|</span><a href="#36399049">parent</a><span>|</span><a href="#36399224">prev</a><span>|</span><a href="#36400441">next</a><span>|</span><label class="collapse" for="c-36399266">[-]</label><label class="expand" for="c-36399266">[1 more]</label></div><br/><div class="children"><div class="content">I found it to be quite thorough and lucid in its explanation of the rationales behind each suggestion, including the one you mentioned.<p>Perhaps you are referring to the first section which is introduced as being a brief tl;dr:<p><pre><code>  &gt; Hereâs a quick summary about how to do it correctly, for the impatient who âjust want the answerâ.
</code></pre>
The full document below that tldr includes for example this explanation of the reason for using .&#x2F;* over *. Namely, flag injection:<p><pre><code>  &gt; This is important because almost all commands will interpret a string beginning with dash as an option, not as a filename, until they see something that does not begin with dash. Globs are expanded by the shell into a list of filenames, and dash is earlier in the sort order compared to before alphanumerics, so it is easy for attackers to make this happen.</code></pre></div><br/></div></div></div></div><div id="36400441" class="c"><input type="checkbox" id="c-36400441" checked=""/><div class="controls bullet"><span class="by">lenkite</span><span>|</span><a href="#36399049">prev</a><span>|</span><a href="#36398188">next</a><span>|</span><label class="collapse" for="c-36400441">[-]</label><label class="expand" for="c-36400441">[7 more]</label></div><br/><div class="children"><div class="content">This is the reason its better to use a &quot;Real Programming Language&quot; leveraging libraries to do this job instead of a shell script. A ludicrous number of things to keep in mind for simple filenames and pathnames.</div><br/><div id="36400661" class="c"><input type="checkbox" id="c-36400661" checked=""/><div class="controls bullet"><span class="by">diegocg</span><span>|</span><a href="#36400441">parent</a><span>|</span><a href="#36400475">next</a><span>|</span><label class="collapse" for="c-36400661">[-]</label><label class="expand" for="c-36400661">[4 more]</label></div><br/><div class="children"><div class="content">Or just use a sane shell (eg. the oil shell <a href="https:&#x2F;&#x2F;www.oilshell.org&#x2F;blog&#x2F;2020&#x2F;10&#x2F;osh-features.html#eliminate-quoting-hell-the-qefs-problem" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.oilshell.org&#x2F;blog&#x2F;2020&#x2F;10&#x2F;osh-features.html#elim...</a>, fish) where handling pathnames with spaces, etc. is not a problem and doesn&#x27;t require arcane quoting knowledge or linters.<p>The only reason why this is an issue is that people insists in using bash in the name of backwards compatibility. It&#x27;s about time people start considering moving away from bash - its design is broken and the efforts and time it takes to write safe bash shells might not be worth it.</div><br/><div id="36401304" class="c"><input type="checkbox" id="c-36401304" checked=""/><div class="controls bullet"><span class="by">planede</span><span>|</span><a href="#36400441">root</a><span>|</span><a href="#36400661">parent</a><span>|</span><a href="#36401394">next</a><span>|</span><label class="collapse" for="c-36401304">[-]</label><label class="expand" for="c-36401304">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t disagree, but only some of the rules are really about the shell itself. A significant part of the problem is the stringly-typed interface of exec. Avoiding passing filenames starting with &quot;-&quot; has little to do with shells.</div><br/></div></div><div id="36401394" class="c"><input type="checkbox" id="c-36401394" checked=""/><div class="controls bullet"><span class="by">IshKebab</span><span>|</span><a href="#36400441">root</a><span>|</span><a href="#36400661">parent</a><span>|</span><a href="#36401304">prev</a><span>|</span><a href="#36400948">next</a><span>|</span><label class="collapse" for="c-36401394">[-]</label><label class="expand" for="c-36401394">[1 more]</label></div><br/><div class="children"><div class="content">The only real reason to use Bash in the first place is that people will probably have it installed already (assuming you don&#x27;t care about the most popular desktop OS in the world).<p>If you&#x27;re going to add a dependency you may as well just use a &quot;real&quot; language at that point.<p>I&#x27;ve been using Deno for &quot;shell scripts&quot; for a while and it&#x27;s great. My only complaint is that `deno run` prints annoying &quot;a new version of Demo is available&quot; messages which it very clearly shouldn&#x27;t. Hopefully they&#x27;ll fix that.</div><br/></div></div><div id="36400948" class="c"><input type="checkbox" id="c-36400948" checked=""/><div class="controls bullet"><span class="by">meinheld111</span><span>|</span><a href="#36400441">root</a><span>|</span><a href="#36400661">parent</a><span>|</span><a href="#36401394">prev</a><span>|</span><a href="#36400475">next</a><span>|</span><label class="collapse" for="c-36400948">[-]</label><label class="expand" for="c-36400948">[1 more]</label></div><br/><div class="children"><div class="content">Brokenness is really a tradeof.<p>Imho using oil&#x2F;fish&#x2F;etc trades unfavorable because of network effects but it is perfectly acceptable choice in many circumstances</div><br/></div></div></div></div><div id="36400475" class="c"><input type="checkbox" id="c-36400475" checked=""/><div class="controls bullet"><span class="by">atoav</span><span>|</span><a href="#36400441">parent</a><span>|</span><a href="#36400661">prev</a><span>|</span><a href="#36398188">next</a><span>|</span><label class="collapse" for="c-36400475">[-]</label><label class="expand" for="c-36400475">[2 more]</label></div><br/><div class="children"><div class="content">IMO someone made the wrong trade-offs there. Shell scrips mainly deal with text output of different programs, so escaping and quoting <i>should</i> be as simple as possible.</div><br/><div id="36400953" class="c"><input type="checkbox" id="c-36400953" checked=""/><div class="controls bullet"><span class="by">meinheld111</span><span>|</span><a href="#36400441">root</a><span>|</span><a href="#36400475">parent</a><span>|</span><a href="#36398188">next</a><span>|</span><label class="collapse" for="c-36400953">[-]</label><label class="expand" for="c-36400953">[1 more]</label></div><br/><div class="children"><div class="content">Messing with IFS can also solve a lot of problems</div><br/></div></div></div></div></div></div><div id="36398188" class="c"><input type="checkbox" id="c-36398188" checked=""/><div class="controls bullet"><span class="by">znxster</span><span>|</span><a href="#36400441">prev</a><span>|</span><a href="#36398314">next</a><span>|</span><label class="collapse" for="c-36398188">[-]</label><label class="expand" for="c-36398188">[16 more]</label></div><br/><div class="children"><div class="content">This is interesting, he also provided commentary on Fixing Unix&#x2F;Linux&#x2F;POSIX Filenames[1]<p>[1] <a href="https:&#x2F;&#x2F;dwheeler.com&#x2F;essays&#x2F;fixing-unix-linux-filenames.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;dwheeler.com&#x2F;essays&#x2F;fixing-unix-linux-filenames.html</a></div><br/><div id="36398248" class="c"><input type="checkbox" id="c-36398248" checked=""/><div class="controls bullet"><span class="by">tredre3</span><span>|</span><a href="#36398188">parent</a><span>|</span><a href="#36398314">next</a><span>|</span><label class="collapse" for="c-36398248">[-]</label><label class="expand" for="c-36398248">[15 more]</label></div><br/><div class="children"><div class="content">Your link was an interesting read, he does make good points along with clear examples.<p>I&#x27;m one of those who believes that linux paths should have more limitations. I also believe they should be case insensitive. Both opinions are highly controversial, unfortunately<p>I guess it comes down to whether you believe paths are there to serve humans or machines. If you believe it should serve humans, then you understand why allowing a - prefix or case sensitivity causes unnecessary problems.<p>On the other hand if you believe that paths are there to serve the machine, then the fewer &quot;arbitrary&quot; limitations the better. The devs know best, after all.</div><br/><div id="36400096" class="c"><input type="checkbox" id="c-36400096" checked=""/><div class="controls bullet"><span class="by">scbrg</span><span>|</span><a href="#36398188">root</a><span>|</span><a href="#36398248">parent</a><span>|</span><a href="#36398444">next</a><span>|</span><label class="collapse" for="c-36400096">[-]</label><label class="expand" for="c-36400096">[3 more]</label></div><br/><div class="children"><div class="content">Every time I see someone argue for case insensitivity I remember this excellent Hacker News comment on the issue: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=29755865">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=29755865</a><p>It&#x27;s <i>definitely</i> more complex than you&#x27;d naively think it is.</div><br/><div id="36400306" class="c"><input type="checkbox" id="c-36400306" checked=""/><div class="controls bullet"><span class="by">arp242</span><span>|</span><a href="#36398188">root</a><span>|</span><a href="#36400096">parent</a><span>|</span><a href="#36400363">next</a><span>|</span><label class="collapse" for="c-36400306">[-]</label><label class="expand" for="c-36400306">[1 more]</label></div><br/><div class="children"><div class="content">People are making things more complex than they are. No one said you need to convert between scripts or muck about with fullwidth variants or stuff like that; &quot;semantically identical&quot; is not the same as &quot;case insensitive&quot;. That post is going of on a &quot;if you want case-insensitivity then you must also treat color and colour as identical!&quot; tangent, which is just silly and not what anyone has ever argued for.<p>The scripts with case translations that are more complex than a simple 1-to-1 mapping are the exception, not the rule (German, Greek, Turkish, Lithuanian). These can be dealt with.<p>It&#x27;s certainly not the case that it &quot;will only work for English and a few European languages&quot;; it will work for much of the world.<p>The fact of the matter is, two out of the three most used systems today are case-insensitive, and Linux&#x2F;POSIX being the exception is rather painful.</div><br/></div></div><div id="36400363" class="c"><input type="checkbox" id="c-36400363" checked=""/><div class="controls bullet"><span class="by">kergonath</span><span>|</span><a href="#36398188">root</a><span>|</span><a href="#36400096">parent</a><span>|</span><a href="#36400306">prev</a><span>|</span><a href="#36398444">next</a><span>|</span><label class="collapse" for="c-36400363">[-]</label><label class="expand" for="c-36400363">[1 more]</label></div><br/><div class="children"><div class="content">&gt; It&#x27;s definitely more complex than you&#x27;d naively think it is.<p>It has been working just fine on macOS for more than 20 years now.</div><br/></div></div></div></div><div id="36398444" class="c"><input type="checkbox" id="c-36398444" checked=""/><div class="controls bullet"><span class="by">jackthetab</span><span>|</span><a href="#36398188">root</a><span>|</span><a href="#36398248">parent</a><span>|</span><a href="#36400096">prev</a><span>|</span><a href="#36398389">next</a><span>|</span><label class="collapse" for="c-36398444">[-]</label><label class="expand" for="c-36398444">[7 more]</label></div><br/><div class="children"><div class="content">&gt; The devs know best, after all.<p>Which may be why they gave us these options to put in our ~&#x2F;.inputrc<p>```
set completion-ignore-case on
set completion-prefix-display-length 2
set completion-map-case on
```<p>Technically filenames and paths are still case-sensitive, but with these settings they practically aren&#x27;t.</div><br/><div id="36398452" class="c"><input type="checkbox" id="c-36398452" checked=""/><div class="controls bullet"><span class="by">jackthetab</span><span>|</span><a href="#36398188">root</a><span>|</span><a href="#36398444">parent</a><span>|</span><a href="#36398389">next</a><span>|</span><label class="collapse" for="c-36398452">[-]</label><label class="expand" for="c-36398452">[6 more]</label></div><br/><div class="children"><div class="content">ARGH! How does one do code on this site?<p>I meant:
set completion-ignore-case on<p>set completion-prefix-display-length 2<p>set completion-map-case on</div><br/><div id="36398853" class="c"><input type="checkbox" id="c-36398853" checked=""/><div class="controls bullet"><span class="by">chasil</span><span>|</span><a href="#36398188">root</a><span>|</span><a href="#36398452">parent</a><span>|</span><a href="#36398559">prev</a><span>|</span><a href="#36398794">next</a><span>|</span><label class="collapse" for="c-36398853">[-]</label><label class="expand" for="c-36398853">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;formatdoc">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;formatdoc</a></div><br/></div></div><div id="36398830" class="c"><input type="checkbox" id="c-36398830" checked=""/><div class="controls bullet"><span class="by">js2</span><span>|</span><a href="#36398188">root</a><span>|</span><a href="#36398452">parent</a><span>|</span><a href="#36398794">prev</a><span>|</span><a href="#36398389">next</a><span>|</span><label class="collapse" for="c-36398830">[-]</label><label class="expand" for="c-36398830">[2 more]</label></div><br/><div class="children"><div class="content">Indent by 4 spaces.<p><pre><code>    like this</code></pre></div><br/><div id="36400259" class="c"><input type="checkbox" id="c-36400259" checked=""/><div class="controls bullet"><span class="by">tsimionescu</span><span>|</span><a href="#36398188">root</a><span>|</span><a href="#36398830">parent</a><span>|</span><a href="#36398389">next</a><span>|</span><label class="collapse" for="c-36400259">[-]</label><label class="expand" for="c-36400259">[1 more]</label></div><br/><div class="children"><div class="content">You actually indent by 2 spaces, not 4:<p><pre><code>  Like this
</code></pre>
4 spaces is a Markdown thing.</div><br/></div></div></div></div></div></div></div></div><div id="36398389" class="c"><input type="checkbox" id="c-36398389" checked=""/><div class="controls bullet"><span class="by">fbdab103</span><span>|</span><a href="#36398188">root</a><span>|</span><a href="#36398248">parent</a><span>|</span><a href="#36398444">prev</a><span>|</span><a href="#36398314">next</a><span>|</span><label class="collapse" for="c-36398389">[-]</label><label class="expand" for="c-36398389">[4 more]</label></div><br/><div class="children"><div class="content">&gt;If you believe it should serve humans, then you understand why allowing a - prefix or case sensitivity causes unnecessary problems.<p>Serving humans feels like it should take whatever garbage I shove down its throat and be happy to receive. Similarly, I think many humans would like to differentiate between, &quot;resumefinal.docx&quot; and &quot;resumeFINAL.docx&quot;</div><br/><div id="36399508" class="c"><input type="checkbox" id="c-36399508" checked=""/><div class="controls bullet"><span class="by">lmm</span><span>|</span><a href="#36398188">root</a><span>|</span><a href="#36398389">parent</a><span>|</span><a href="#36399661">next</a><span>|</span><label class="collapse" for="c-36399508">[-]</label><label class="expand" for="c-36399508">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Similarly, I think many humans would like to differentiate between, &quot;resumefinal.docx&quot; and &quot;resumeFINAL.docx&quot;<p>I strongly disagree. Those sound exactly the same. If you had a physical filing cabinet and asked someone to get a document from the final folder (which is supposed to be the human-friendly metaphor we&#x27;re using here), they would happily open a folder labeled FINAL, and be quite confused if you had distinct final and FINAL folders.</div><br/><div id="36400060" class="c"><input type="checkbox" id="c-36400060" checked=""/><div class="controls bullet"><span class="by">smackeyacky</span><span>|</span><a href="#36398188">root</a><span>|</span><a href="#36399508">parent</a><span>|</span><a href="#36399661">next</a><span>|</span><label class="collapse" for="c-36400060">[-]</label><label class="expand" for="c-36400060">[1 more]</label></div><br/><div class="children"><div class="content">If they shout the name, you know to look for the upper case version :-)</div><br/></div></div></div></div><div id="36399661" class="c"><input type="checkbox" id="c-36399661" checked=""/><div class="controls bullet"><span class="by">eviks</span><span>|</span><a href="#36398188">root</a><span>|</span><a href="#36398389">parent</a><span>|</span><a href="#36399508">prev</a><span>|</span><a href="#36398314">next</a><span>|</span><label class="collapse" for="c-36399661">[-]</label><label class="expand" for="c-36399661">[1 more]</label></div><br/><div class="children"><div class="content">Humans don&#x27;t speak binary garbage, so it&#x27;s a disservice to them to happily swallow&#x2F;spit it out<p>Cap sensitivity is a much lesser mistake</div><br/></div></div></div></div></div></div></div></div><div id="36398314" class="c"><input type="checkbox" id="c-36398314" checked=""/><div class="controls bullet"><span class="by">dang</span><span>|</span><a href="#36398188">prev</a><span>|</span><a href="#36399439">next</a><span>|</span><label class="collapse" for="c-36398314">[-]</label><label class="expand" for="c-36398314">[1 more]</label></div><br/><div class="children"><div class="content">Related:<p><i>Filenames and Pathnames in Shell: How to Do It Correctly (2010)</i> - <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=9021786">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=9021786</a> - Feb 2015 (20 comments)<p><i>Filenames and Pathnames in Shell: How to Do It Correctly</i> - <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=8337296">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=8337296</a> - Sept 2014 (2 comments)</div><br/></div></div><div id="36399439" class="c"><input type="checkbox" id="c-36399439" checked=""/><div class="controls bullet"><span class="by">joveian</span><span>|</span><a href="#36398314">prev</a><span>|</span><a href="#36398757">next</a><span>|</span><label class="collapse" for="c-36399439">[-]</label><label class="expand" for="c-36399439">[1 more]</label></div><br/><div class="children"><div class="content">A nice collection of issues, although I&#x27;d disagree a bit with some of the solutions, particularly around prefixing.  You first need to check if you have an absolute path and it doesn&#x27;t work with input that isn&#x27;t a path.  So for me it seems best to focus on -- as the primary measure and prefixing as an additional measure if possible when needing to be extra careful.  Most software uses some getopt variant so it should be quite rare that -- doesn&#x27;t work.<p>One nice thing about bash is the ${var@Q} syntax that is great for printing stuff and deals with the potential for stuff that affects the terminal in a much nicer way than piping through tr.  IMO, it should always be used for pathnames so that you can always just copy and paste the output, which I do quite a bit.  I wish it was in POSIX.</div><br/></div></div><div id="36398757" class="c"><input type="checkbox" id="c-36398757" checked=""/><div class="controls bullet"><span class="by">themk</span><span>|</span><a href="#36399439">prev</a><span>|</span><a href="#36399356">next</a><span>|</span><label class="collapse" for="c-36398757">[-]</label><label class="expand" for="c-36398757">[4 more]</label></div><br/><div class="children"><div class="content">Am I the only one that thinks setting -e is a huge footgun given that it only works in certain contexts? I&#x27;d much rather see explicit error handling.</div><br/><div id="36398826" class="c"><input type="checkbox" id="c-36398826" checked=""/><div class="controls bullet"><span class="by">js2</span><span>|</span><a href="#36398757">parent</a><span>|</span><a href="#36398785">next</a><span>|</span><label class="collapse" for="c-36398826">[-]</label><label class="expand" for="c-36398826">[1 more]</label></div><br/><div class="children"><div class="content">The biggest issue with &quot;set -e&quot; is that it&#x27;s inconsistent. It doesn&#x27;t always cause the shell to exit where you&#x27;d expect it to, and in some cases, it causes the shell to exit where you would NOT expect it to. This is the most surprising:<p><pre><code>    set -e
    i=0
    (( i++ ))  # shell will exit here
</code></pre>
Still, I tend to use it because even though it doesn&#x27;t handle every case, I&#x27;d still usually rather my scripts exit when a command fails.</div><br/></div></div><div id="36398785" class="c"><input type="checkbox" id="c-36398785" checked=""/><div class="controls bullet"><span class="by">chungy</span><span>|</span><a href="#36398757">parent</a><span>|</span><a href="#36398826">prev</a><span>|</span><a href="#36399356">next</a><span>|</span><label class="collapse" for="c-36398785">[-]</label><label class="expand" for="c-36398785">[2 more]</label></div><br/><div class="children"><div class="content">Given that it makes a script terminate for any unhandled errors, I don&#x27;t think your goal contradicts with setting -e. Rather, it makes the script author explicitly handle errors or the script dies.</div><br/><div id="36399721" class="c"><input type="checkbox" id="c-36399721" checked=""/><div class="controls bullet"><span class="by">fbdab103</span><span>|</span><a href="#36398757">root</a><span>|</span><a href="#36398785">parent</a><span>|</span><a href="#36399356">next</a><span>|</span><label class="collapse" for="c-36399721">[-]</label><label class="expand" for="c-36399721">[1 more]</label></div><br/><div class="children"><div class="content">Handle errors in bash? More power to you, but if my script cannot just fail in place, then it will be written in Python. Even with shellcheck, I do not trust myself to write more than a handful of lines in bash.</div><br/></div></div></div></div></div></div><div id="36399356" class="c"><input type="checkbox" id="c-36399356" checked=""/><div class="controls bullet"><span class="by">mmphosis</span><span>|</span><a href="#36398757">prev</a><span>|</span><a href="#36399511">next</a><span>|</span><label class="collapse" for="c-36399356">[-]</label><label class="expand" for="c-36399356">[4 more]</label></div><br/><div class="children"><div class="content">Ooh, I can put slashes in filenames!<p><pre><code>    touch 2023â06â19
</code></pre>
Or, maybe not.<p><pre><code>    ls 2023&#x2F;06&#x2F;19</code></pre>
&#x2F;usr&#x2F;bin&#x2F;ls: cannot access &#x27;2023&#x2F;06&#x2F;19&#x27;: No such file or directory<p>Or, maybe I can.<p><pre><code>    ls 2023â06â19</code></pre>
2023â06â19</div><br/><div id="36399663" class="c"><input type="checkbox" id="c-36399663" checked=""/><div class="controls bullet"><span class="by">rascul</span><span>|</span><a href="#36399356">parent</a><span>|</span><a href="#36399511">next</a><span>|</span><label class="collapse" for="c-36399663">[-]</label><label class="expand" for="c-36399663">[3 more]</label></div><br/><div class="children"><div class="content">&gt;     touch 2023â06â19<p>Won&#x27;t work if the directory 2023&#x2F;06 doesn&#x27;t exist. The filename is 19, the relative path is 2023&#x2F;06&#x2F;19.</div><br/><div id="36399726" class="c"><input type="checkbox" id="c-36399726" checked=""/><div class="controls bullet"><span class="by">mmphosis</span><span>|</span><a href="#36399356">root</a><span>|</span><a href="#36399663">parent</a><span>|</span><a href="#36399511">next</a><span>|</span><label class="collapse" for="c-36399726">[-]</label><label class="expand" for="c-36399726">[2 more]</label></div><br/><div class="children"><div class="content">2023â06â19 is a filename. 2023&#x2F;06&#x2F;19 is a directory.<p>UTF-8 &amp;#8725; division slash</div><br/><div id="36400991" class="c"><input type="checkbox" id="c-36400991" checked=""/><div class="controls bullet"><span class="by">meinheld111</span><span>|</span><a href="#36399356">root</a><span>|</span><a href="#36399726">parent</a><span>|</span><a href="#36399511">next</a><span>|</span><label class="collapse" for="c-36400991">[-]</label><label class="expand" for="c-36400991">[1 more]</label></div><br/><div class="children"><div class="content">Lol<p>Unescaped non-asci was a mistake</div><br/></div></div></div></div></div></div></div></div><div id="36399511" class="c"><input type="checkbox" id="c-36399511" checked=""/><div class="controls bullet"><span class="by">emmelaich</span><span>|</span><a href="#36399356">prev</a><span>|</span><a href="#36399020">next</a><span>|</span><label class="collapse" for="c-36399511">[-]</label><label class="expand" for="c-36399511">[3 more]</label></div><br/><div class="children"><div class="content">Does this work as desired?<p><pre><code>    &quot;$(dirname &quot;$file&quot;)&quot;
</code></pre>
Is $file not actually quoted here?  Since the quoted bits are<p><pre><code>    &quot;$(dirname &quot;
    &quot;)&quot;</code></pre></div><br/><div id="36400816" class="c"><input type="checkbox" id="c-36400816" checked=""/><div class="controls bullet"><span class="by">gpvos</span><span>|</span><a href="#36399511">parent</a><span>|</span><a href="#36399571">next</a><span>|</span><label class="collapse" for="c-36400816">[-]</label><label class="expand" for="c-36400816">[1 more]</label></div><br/><div class="children"><div class="content">$() is a quote, like ``, and the &quot;$file&quot; is entirely within it, so it should work.</div><br/></div></div><div id="36399571" class="c"><input type="checkbox" id="c-36399571" checked=""/><div class="controls bullet"><span class="by">two_handfuls</span><span>|</span><a href="#36399511">parent</a><span>|</span><a href="#36400816">prev</a><span>|</span><a href="#36399020">next</a><span>|</span><label class="collapse" for="c-36399571">[-]</label><label class="expand" for="c-36399571">[1 more]</label></div><br/><div class="children"><div class="content">This will correctly nest the quotes, yes. Itâs somewhat counter-intuitive, but it works.</div><br/></div></div></div></div></div></div></div></div></div></body></html>