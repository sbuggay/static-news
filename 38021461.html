<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1698310857959" as="style"/><link rel="stylesheet" href="styles.css?v=1698310857959"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/instant-dev/api">Show HN: Instant API – Build type-safe web APIs with JavaScript</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>keithwhor</span> | <span>51 comments</span></div><br/><div><div id="38023152" class="c"><input type="checkbox" id="c-38023152" checked=""/><div class="controls bullet"><span class="by">codemusings</span><span>|</span><a href="#38022688">next</a><span>|</span><label class="collapse" for="c-38023152">[-]</label><label class="expand" for="c-38023152">[3 more]</label></div><br/><div class="children"><div class="content">Seems like you put a lot of work into this and as such I&#x27;m hesitant to criticize. But what in the world made you think this is superior to using an actual type-safe language like TypeScript?<p><pre><code>  &#x2F;**
   * Streams results for our lovable assistant
   * @param {string} query The question for our assistant
   * @stream {object}   chunk
   * @stream {string}   chunk.id
   * @stream {string}   chunk.object
   * @stream {integer}  chunk.created
   * @stream {string}   chunk.model
   * @stream {object[]} chunk.choices
   * @stream {integer}  chunk.choices[].index
   * @stream {object}   chunk.choices[].delta
   * @stream {?string}  chunk.choices[].delta.role
   * @stream {?string}  chunk.choices[].delta.content
   * @returns {object} message
   * @returns {string} message.content
   *&#x2F;
</code></pre>
Is a developer supposed to type that out for every single endpoint that uses the chunk type?<p>Also do I understand it correctly that you need to use Instant API everywhere in order to get this &quot;type safety&quot; and as such any consumer implementation would be basically limited to JavaScript?</div><br/><div id="38023197" class="c"><input type="checkbox" id="c-38023197" checked=""/><div class="controls bullet"><span class="by">keithwhor</span><span>|</span><a href="#38023152">parent</a><span>|</span><a href="#38022688">next</a><span>|</span><label class="collapse" for="c-38023197">[-]</label><label class="expand" for="c-38023197">[2 more]</label></div><br/><div class="children"><div class="content">No not necessarily! I just haven’t written type import support yet; though you’re welcome to help.<p>And no — type safety is applied at the HTTP interface. API consumers need no special library to get all the benefits.</div><br/><div id="38023260" class="c"><input type="checkbox" id="c-38023260" checked=""/><div class="controls bullet"><span class="by">codemusings</span><span>|</span><a href="#38023152">root</a><span>|</span><a href="#38023197">parent</a><span>|</span><a href="#38022688">next</a><span>|</span><label class="collapse" for="c-38023260">[-]</label><label class="expand" for="c-38023260">[1 more]</label></div><br/><div class="children"><div class="content">&gt; And no — type safety is applied at the HTTP interface.<p>So it&#x27;s basically validation middleware. The HTTP protocol does not define any such thing.</div><br/></div></div></div></div></div></div><div id="38022688" class="c"><input type="checkbox" id="c-38022688" checked=""/><div class="controls bullet"><span class="by">mstade</span><span>|</span><a href="#38023152">prev</a><span>|</span><a href="#38021749">next</a><span>|</span><label class="collapse" for="c-38022688">[-]</label><label class="expand" for="c-38022688">[4 more]</label></div><br/><div class="children"><div class="content">Neat! Does this framework have any tools for content negotiation? I get that you could do this in the handlers themselves, but in my experience different representations are often so different in implementation that aside from maybe a tiny bit of shared code to produce some underlying dataset, the actual rendering of that data shares very little.<p>As an example: `application&#x2F;json` and `text&#x2F;html` respresentations of a single resource may render some of the same bits of data, but the actual rendering process is entirely different. Even if the content type is the same, you may render completely different output based on other parameters, like a header used to select between different profiles of said content type, or even just something simple as `accept-language`.<p>If it&#x27;s not possible right now, is there any plans to support routing based not just on method and URL, but on headers as well?</div><br/><div id="38022701" class="c"><input type="checkbox" id="c-38022701" checked=""/><div class="controls bullet"><span class="by">keithwhor</span><span>|</span><a href="#38022688">parent</a><span>|</span><a href="#38021749">next</a><span>|</span><label class="collapse" for="c-38022701">[-]</label><label class="expand" for="c-38022701">[3 more]</label></div><br/><div class="children"><div class="content">I’m not quite sure I grok the use case, can you give a more precise example? Either way, if you’re interested in the approach I *very welcome* issues, PRs and contributors. I think it would be pretty straightforward to create tests for whatever you’re looking for.</div><br/><div id="38022797" class="c"><input type="checkbox" id="c-38022797" checked=""/><div class="controls bullet"><span class="by">mstade</span><span>|</span><a href="#38022688">root</a><span>|</span><a href="#38022701">parent</a><span>|</span><a href="#38021749">next</a><span>|</span><label class="collapse" for="c-38022797">[-]</label><label class="expand" for="c-38022797">[2 more]</label></div><br/><div class="children"><div class="content">Here&#x27;s a simple use case: human friendly and machine friendly representations at the same path.<p>For example, let&#x27;s say I have an api at `&#x2F;weather` which when requested with the header `accept: application&#x2F;json` returns something like:<p><pre><code>    { &quot;temperature&quot;: 25, &quot;unit&quot;: &quot;c&quot; }
</code></pre>
Now if I open that same path in a browser, I get an html page displaying the day&#x27;s temperature in a nicely formatted way for humans to read.<p>Or another case, I want to version an API, such that I can provide different representations based on the version requested. So I look for `accept-version` and if it&#x27;s `v1` for example I get the `v1` version. GitHub does this, as a real world example: <a href="https:&#x2F;&#x2F;docs.github.com&#x2F;en&#x2F;rest&#x2F;overview&#x2F;api-versions?apiVersion=2022-11-28" rel="nofollow noreferrer">https:&#x2F;&#x2F;docs.github.com&#x2F;en&#x2F;rest&#x2F;overview&#x2F;api-versions?apiVer...</a></div><br/><div id="38022828" class="c"><input type="checkbox" id="c-38022828" checked=""/><div class="controls bullet"><span class="by">keithwhor</span><span>|</span><a href="#38022688">root</a><span>|</span><a href="#38022797">parent</a><span>|</span><a href="#38021749">next</a><span>|</span><label class="collapse" for="c-38022828">[-]</label><label class="expand" for="c-38022828">[1 more]</label></div><br/><div class="children"><div class="content">Entirely possible! I mean right now we restrict endpoint definitions to HTTP methods but in theory you could define unique endpoints for any combination of parameters. What I would want to find is the most effective &#x2F; used combinations as opposed to unlimited flexibility.</div><br/></div></div></div></div></div></div></div></div><div id="38021749" class="c"><input type="checkbox" id="c-38021749" checked=""/><div class="controls bullet"><span class="by">mlmilleratmit</span><span>|</span><a href="#38022688">prev</a><span>|</span><a href="#38023011">next</a><span>|</span><label class="collapse" for="c-38021749">[-]</label><label class="expand" for="c-38021749">[2 more]</label></div><br/><div class="children"><div class="content">Neat. I like the fresh take on validation. It’s not necessarily unique, but it may be cleaner &#x2F; more efficient than previous attempts. The mixing of backend processing and the http layer reminds me of my CouchDB days. @stream seems potentially tricky to implement at scale but very useful. And a few nits here and there (eg maybe return a 202 instead of a 200 on accept), but overall pretty slick. Any numbers on performance and&#x2F;or scalability in production?</div><br/><div id="38021835" class="c"><input type="checkbox" id="c-38021835" checked=""/><div class="controls bullet"><span class="by">keithwhor</span><span>|</span><a href="#38021749">parent</a><span>|</span><a href="#38023011">next</a><span>|</span><label class="collapse" for="c-38021835">[-]</label><label class="expand" for="c-38021835">[1 more]</label></div><br/><div class="children"><div class="content">@stream is actually straightforward in Node; it’s just part of the http request. Typically Instant API waits until the full request is processed to return headers and body as the endpoint implementation could modify headers; but with streaming headers are sent immediately and then the rest of the response streamed with .stream() injecting text.<p>In serverless environments — where we have used the framework as a gateway with endpoints being executed inside of Lambdas — streaming is accomplished using Redis broadcasting and channels are managed via UUIDs. We may open source this at some point but an enterprising engineer could fork and implement this.<p>Re; scaling. As mentioned in README we’ve scaled horizontally to 100M requests &#x2F; day or about 1,157 RPS without issue on older, proprietary versions. Candidly this early release is designed for usability over performance but I wouldn’t be surprised in either direction. :)</div><br/></div></div></div></div><div id="38023011" class="c"><input type="checkbox" id="c-38023011" checked=""/><div class="controls bullet"><span class="by">TheFragenTaken</span><span>|</span><a href="#38021749">prev</a><span>|</span><a href="#38022337">next</a><span>|</span><label class="collapse" for="c-38023011">[-]</label><label class="expand" for="c-38023011">[2 more]</label></div><br/><div class="children"><div class="content">Happy to see more projects embrace OpenAPI.</div><br/><div id="38023068" class="c"><input type="checkbox" id="c-38023068" checked=""/><div class="controls bullet"><span class="by">keithwhor</span><span>|</span><a href="#38023011">parent</a><span>|</span><a href="#38022337">next</a><span>|</span><label class="collapse" for="c-38023068">[-]</label><label class="expand" for="c-38023068">[1 more]</label></div><br/><div class="children"><div class="content">&lt;3</div><br/></div></div></div></div><div id="38022337" class="c"><input type="checkbox" id="c-38022337" checked=""/><div class="controls bullet"><span class="by">devjab</span><span>|</span><a href="#38023011">prev</a><span>|</span><a href="#38021895">next</a><span>|</span><label class="collapse" for="c-38022337">[-]</label><label class="expand" for="c-38022337">[2 more]</label></div><br/><div class="children"><div class="content">I think it’s very cool. We went a similar, yet different route into the realm of code-generation rather than building our own api framework. Basically we have something which can generate, types, SQLscripts, data and type conversion and security and an express API service&#x2F;controller based on a mermaid table input.<p>I think your way is better, but we’re very reliant on express because of our heavy Azure integration and how that’s just easier with express because Microsoft has a lot of tools for it.</div><br/><div id="38022391" class="c"><input type="checkbox" id="c-38022391" checked=""/><div class="controls bullet"><span class="by">keithwhor</span><span>|</span><a href="#38022337">parent</a><span>|</span><a href="#38021895">next</a><span>|</span><label class="collapse" for="c-38022391">[-]</label><label class="expand" for="c-38022391">[1 more]</label></div><br/><div class="children"><div class="content">When you say “we” who are you referring to? Would love to learn more about what you’ve built. I haven’t built easy deployment rails for Azure but if you’re interested in playing with our solution I’d be down for a call! email keith@instant.dev</div><br/></div></div></div></div><div id="38021895" class="c"><input type="checkbox" id="c-38021895" checked=""/><div class="controls bullet"><span class="by">tppiotrowski</span><span>|</span><a href="#38022337">prev</a><span>|</span><a href="#38022997">next</a><span>|</span><label class="collapse" for="c-38021895">[-]</label><label class="expand" for="c-38021895">[8 more]</label></div><br/><div class="children"><div class="content">I was looking at ChatGPT plugins today and they use the OpenAPI convention. Is it called OpenAPI because it was created by &quot;Open&quot;AI or it&#x27;s something completely independent of OpenAI that they chose to adopt?</div><br/><div id="38021911" class="c"><input type="checkbox" id="c-38021911" checked=""/><div class="controls bullet"><span class="by">keithwhor</span><span>|</span><a href="#38021895">parent</a><span>|</span><a href="#38021947">next</a><span>|</span><label class="collapse" for="c-38021911">[-]</label><label class="expand" for="c-38021911">[2 more]</label></div><br/><div class="children"><div class="content">The naming is completely coincidental and probably a little confusing &#x2F; unfortunate. OpenAPI is a rebranding of Swagger, a really popular open source API specification. Incidentally the OpenAPI initiative only predates OpenAI by a month so I don’t think Sam, Greg &amp; co could have known better at the time.<p>But OpenAPI is the “gold standard” machine readable API specification format so it makes sense that OpenAI would rely on it!</div><br/><div id="38023077" class="c"><input type="checkbox" id="c-38023077" checked=""/><div class="controls bullet"><span class="by">KronisLV</span><span>|</span><a href="#38021895">root</a><span>|</span><a href="#38021911">parent</a><span>|</span><a href="#38021947">next</a><span>|</span><label class="collapse" for="c-38023077">[-]</label><label class="expand" for="c-38023077">[1 more]</label></div><br/><div class="children"><div class="content">&gt; But OpenAPI is the “gold standard” machine readable API specification format<p>I remember when that would have been WSDL, with something like SoapUI - where you&#x27;d feed in the service description file from whatever service you want to interact with and would get a functional API client. It also had codegen that let you end up with full client stubs in Java or another language, or are able to generate the WSDL file from your server code as well: <a href="https:&#x2F;&#x2F;www.soapui.org&#x2F;docs&#x2F;soap-and-wsdl&#x2F;working-with-wsdls&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.soapui.org&#x2F;docs&#x2F;soap-and-wsdl&#x2F;working-with-wsdls...</a><p>It&#x27;s nice to see OpenAPI&#x2F;Swagger finally catching up, because to me the codegen aspects felt insufficient there for the longest time - if your server code determines what responses to requests it will return, why on earth would you ever want to write the OpenAPI specs manually? It&#x27;s the same as with ORMs - if you already have a database schema setup on a server somewhere (with SQL migrations, say with dbmate), all of your local entity mappings should be easily generated in a schema-first approach, you shouldn&#x27;t have to write a single line of code for that.<p>The latest service I&#x27;m building is in .NET and they actually have that covered really nicely: <a href="https:&#x2F;&#x2F;learn.microsoft.com&#x2F;en-us&#x2F;aspnet&#x2F;core&#x2F;tutorials&#x2F;getting-started-with-swashbuckle?view=aspnetcore-7.0&amp;tabs=visual-studio" rel="nofollow noreferrer">https:&#x2F;&#x2F;learn.microsoft.com&#x2F;en-us&#x2F;aspnet&#x2F;core&#x2F;tutorials&#x2F;gett...</a><p>And the Rider IDE there also has nice schema-first tooling, even if a bit niche: <a href="https:&#x2F;&#x2F;blog.jetbrains.com&#x2F;dotnet&#x2F;2022&#x2F;01&#x2F;31&#x2F;entity-framework-core-inside-rider-ui-way&#x2F;#existing-database-scaffolding" rel="nofollow noreferrer">https:&#x2F;&#x2F;blog.jetbrains.com&#x2F;dotnet&#x2F;2022&#x2F;01&#x2F;31&#x2F;entity-framewor...</a><p>Model driven development and codegen feel like they definitely belong for boilerplate heavy uses cases like this, where you can also almost perfectly describe the end result that you need based on what you have!</div><br/></div></div></div></div><div id="38021923" class="c"><input type="checkbox" id="c-38021923" checked=""/><div class="controls bullet"><span class="by">mstibbard</span><span>|</span><a href="#38021895">parent</a><span>|</span><a href="#38021947">prev</a><span>|</span><a href="#38022997">next</a><span>|</span><label class="collapse" for="c-38021923">[-]</label><label class="expand" for="c-38021923">[4 more]</label></div><br/><div class="children"><div class="content">OpenAPI predates OpenAI by quite some time. OpenAI has adopted usage of OpenAPI.<p>I do find myself accidentally saying one and meaning the other, in both directions too!</div><br/><div id="38021932" class="c"><input type="checkbox" id="c-38021932" checked=""/><div class="controls bullet"><span class="by">keithwhor</span><span>|</span><a href="#38021895">root</a><span>|</span><a href="#38021923">parent</a><span>|</span><a href="#38022997">next</a><span>|</span><label class="collapse" for="c-38021932">[-]</label><label class="expand" for="c-38021932">[3 more]</label></div><br/><div class="children"><div class="content">Actually only a month! I just looked it up and was surprised myself.</div><br/><div id="38021984" class="c"><input type="checkbox" id="c-38021984" checked=""/><div class="controls bullet"><span class="by">mstibbard</span><span>|</span><a href="#38021895">root</a><span>|</span><a href="#38021932">parent</a><span>|</span><a href="#38022997">next</a><span>|</span><label class="collapse" for="c-38021984">[-]</label><label class="expand" for="c-38021984">[2 more]</label></div><br/><div class="children"><div class="content">According to Wikipedia[1] it looks like the rebranding effort from Swagger -&gt; OpenAPI was in November 2015, but the OpenAPI Specification was only officially renamed on 1st January 2016. OpenAI was founded on 10th December 2015. So it depends how pedantic we are being -- technically on branding, OpenAI predates OpenAPI by 21 days. In terms of the spec itself (as in, the thing they adopted), Swagger v1 was released August 2011.<p>[1] <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;OpenAPI_Specification" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;OpenAPI_Specification</a></div><br/><div id="38022002" class="c"><input type="checkbox" id="c-38022002" checked=""/><div class="controls bullet"><span class="by">keithwhor</span><span>|</span><a href="#38021895">root</a><span>|</span><a href="#38021984">parent</a><span>|</span><a href="#38022997">next</a><span>|</span><label class="collapse" for="c-38022002">[-]</label><label class="expand" for="c-38022002">[1 more]</label></div><br/><div class="children"><div class="content">Worry not, this is Hacker News. Pedantry is more valuable as currency than H100s here.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="38022997" class="c"><input type="checkbox" id="c-38022997" checked=""/><div class="controls bullet"><span class="by">sandGorgon</span><span>|</span><a href="#38021895">prev</a><span>|</span><a href="#38022420">next</a><span>|</span><label class="collapse" for="c-38022997">[-]</label><label class="expand" for="c-38022997">[2 more]</label></div><br/><div class="children"><div class="content">would this be &quot;pydantic-for-javascript&quot; ?</div><br/><div id="38023010" class="c"><input type="checkbox" id="c-38023010" checked=""/><div class="controls bullet"><span class="by">keithwhor</span><span>|</span><a href="#38022997">parent</a><span>|</span><a href="#38022420">next</a><span>|</span><label class="collapse" for="c-38023010">[-]</label><label class="expand" for="c-38023010">[1 more]</label></div><br/><div class="children"><div class="content">Good call! Do you think Python developers would feel more comfortable venturing into JavaScript with this framing?</div><br/></div></div></div></div><div id="38022420" class="c"><input type="checkbox" id="c-38022420" checked=""/><div class="controls bullet"><span class="by">firechickenbird</span><span>|</span><a href="#38022997">prev</a><span>|</span><a href="#38022346">next</a><span>|</span><label class="collapse" for="c-38022420">[-]</label><label class="expand" for="c-38022420">[2 more]</label></div><br/><div class="children"><div class="content">Please don’t call this mess “type-safe”</div><br/><div id="38022436" class="c"><input type="checkbox" id="c-38022436" checked=""/><div class="controls bullet"><span class="by">keithwhor</span><span>|</span><a href="#38022420">parent</a><span>|</span><a href="#38022346">next</a><span>|</span><label class="collapse" for="c-38022436">[-]</label><label class="expand" for="c-38022436">[1 more]</label></div><br/><div class="children"><div class="content">I’d never suggest this is “mess type” safe. In fact I strongly discourage mess types.<p>Edit: Parent added quotation marks and hyphens after my comment. I stand proudly by my cutesy remark.</div><br/></div></div></div></div><div id="38022346" class="c"><input type="checkbox" id="c-38022346" checked=""/><div class="controls bullet"><span class="by">stagas</span><span>|</span><a href="#38022420">prev</a><span>|</span><a href="#38022761">next</a><span>|</span><label class="collapse" for="c-38022346">[-]</label><label class="expand" for="c-38022346">[14 more]</label></div><br/><div class="children"><div class="content">Type Safety != Runtime Type Validation. Something being Type Safe means that I, the programmer, am Safe from making type mistakes while developing and maintaining the software. For that to be possible, you need a type system that is embedded in the language and the editor and can continously analyze all of your code types to be correct. Type safe means that any breaking change to any interface will immediately error and point me to all the locations I need to visit, and therefore I am safe from making any type errors.<p>While this is a neat project, it&#x27;s not Type safe, as nothing in the pipeline will inform you about a breaking type error prior to running it and seeing the validation fail. That usually means <i>in production</i>. To catch those errors early before they hit production, you use a type system, and one that exists for JavaScript and works really well, is TypeScript, and I find it mind-boggling that there is no mention of it in this entire document discussing &quot;type safety&quot;.</div><br/><div id="38022379" class="c"><input type="checkbox" id="c-38022379" checked=""/><div class="controls bullet"><span class="by">keithwhor</span><span>|</span><a href="#38022346">parent</a><span>|</span><a href="#38022565">next</a><span>|</span><label class="collapse" for="c-38022379">[-]</label><label class="expand" for="c-38022379">[11 more]</label></div><br/><div class="children"><div class="content">My claim is only type-safety at the HTTP layer. This claim is intentionally specific! As per another comment in this thread, pedantry is the most valuable currency on HN, so this sort of feedback is not only expected but welcome.</div><br/><div id="38022457" class="c"><input type="checkbox" id="c-38022457" checked=""/><div class="controls bullet"><span class="by">stagas</span><span>|</span><a href="#38022346">root</a><span>|</span><a href="#38022379">parent</a><span>|</span><a href="#38022565">next</a><span>|</span><label class="collapse" for="c-38022457">[-]</label><label class="expand" for="c-38022457">[10 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not pedantry, you&#x27;re using the term wrong. I understand why it can be confusing if you are just using JavaScript and you haven&#x27;t had the experience of type-safe codebases. Type-safe does not refer to runtime anything, it refers to the developer being able to refactor their interfaces safely, meaning that the type system informs you of any errors across the entire codebase and all of the dependants of that software. Type safety really means &quot;developing with type safety&quot;. Type validation on the other hand, can mean runtime type validation, which is what this software is doing, runtime type validation at the HTTP layer, which is a cool project I admit, very useful stuff, but the term type-safe here is misleading.</div><br/><div id="38022617" class="c"><input type="checkbox" id="c-38022617" checked=""/><div class="controls bullet"><span class="by">deredede</span><span>|</span><a href="#38022346">root</a><span>|</span><a href="#38022457">parent</a><span>|</span><a href="#38022475">next</a><span>|</span><label class="collapse" for="c-38022617">[-]</label><label class="expand" for="c-38022617">[4 more]</label></div><br/><div class="children"><div class="content">Type safety originates from academia, where it refers to the fact that unexpected (ill-typed) operations are prevented. It does not necessarily require any sort of static checking, even though the two are often associated.<p>Type safety means that no operation receives &quot;unexpected&quot; inputs, but the definition of &quot;unexpected&quot; is not fixed in stone and can vary depending on the context, which makes it a fuzzy concept. If I only define + on integers, and allow `&quot;a&quot;+&quot;b&quot;`, then that&#x27;s unexpected and must be prevented somehow to be type safe. If I define + on integers or strings, it is fine.<p>Here using &quot;type safe&quot; is warranted, because the system prevents you from making HTTP calls with unexpected arguments - even though the validation occurs at runtime and the result may be an exception.<p>(Edit: well to be strictly fair it&#x27;s not really type-safe because nothing prevents the HTTP endpoint&#x27;s expected arguments to change under your feet)</div><br/><div id="38022651" class="c"><input type="checkbox" id="c-38022651" checked=""/><div class="controls bullet"><span class="by">stagas</span><span>|</span><a href="#38022346">root</a><span>|</span><a href="#38022617">parent</a><span>|</span><a href="#38023005">next</a><span>|</span><label class="collapse" for="c-38022651">[-]</label><label class="expand" for="c-38022651">[2 more]</label></div><br/><div class="children"><div class="content">I have to stretch my imagination a lot to see how &quot;type-safe&quot; can mean &quot;it throws at runtime&quot;.</div><br/><div id="38022776" class="c"><input type="checkbox" id="c-38022776" checked=""/><div class="controls bullet"><span class="by">deredede</span><span>|</span><a href="#38022346">root</a><span>|</span><a href="#38022651">parent</a><span>|</span><a href="#38023005">next</a><span>|</span><label class="collapse" for="c-38022776">[-]</label><label class="expand" for="c-38022776">[1 more]</label></div><br/><div class="children"><div class="content">The term &quot;type safety&quot; was coined in a context where &quot;does random things then ultimately segfaults (if you are lucky)&quot; is a possible alternative.</div><br/></div></div></div></div></div></div><div id="38022475" class="c"><input type="checkbox" id="c-38022475" checked=""/><div class="controls bullet"><span class="by">keithwhor</span><span>|</span><a href="#38022346">root</a><span>|</span><a href="#38022457">parent</a><span>|</span><a href="#38022617">prev</a><span>|</span><a href="#38022565">next</a><span>|</span><label class="collapse" for="c-38022475">[-]</label><label class="expand" for="c-38022475">[5 more]</label></div><br/><div class="children"><div class="content">Fair enough; if I were to change the qualifiers associated with the project, what’s cool about what exists here and how would you describe it in a way that’s maximally appealing? Is “type-safe” an acceptable generalization given an audience less sophisticated than you or can I use a different framing to the same effect?</div><br/><div id="38022609" class="c"><input type="checkbox" id="c-38022609" checked=""/><div class="controls bullet"><span class="by">stagas</span><span>|</span><a href="#38022346">root</a><span>|</span><a href="#38022475">parent</a><span>|</span><a href="#38022565">next</a><span>|</span><label class="collapse" for="c-38022609">[-]</label><label class="expand" for="c-38022609">[4 more]</label></div><br/><div class="children"><div class="content">For this software to be appealing it would need to really be type-safe, meaning you&#x27;d need to use TypeScript. Type-safe means I can change an interface in project B and project A that depends on B now shows me errors in the editor exactly where I need to visit to fix it. If that isn&#x27;t happening, it can&#x27;t be called type-safe or generalized to that term. Currently it&#x27;s a type-unsafe HTTP endpoint runtime type validator.</div><br/><div id="38022637" class="c"><input type="checkbox" id="c-38022637" checked=""/><div class="controls bullet"><span class="by">keithwhor</span><span>|</span><a href="#38022346">root</a><span>|</span><a href="#38022609">parent</a><span>|</span><a href="#38022565">next</a><span>|</span><label class="collapse" for="c-38022637">[-]</label><label class="expand" for="c-38022637">[3 more]</label></div><br/><div class="children"><div class="content">That’s good feedback! We can probably do both; if you think it’s cool would you be interested in contributing to TypeScript support to circle the square?</div><br/><div id="38022700" class="c"><input type="checkbox" id="c-38022700" checked=""/><div class="controls bullet"><span class="by">stagas</span><span>|</span><a href="#38022346">root</a><span>|</span><a href="#38022637">parent</a><span>|</span><a href="#38022565">next</a><span>|</span><label class="collapse" for="c-38022700">[-]</label><label class="expand" for="c-38022700">[2 more]</label></div><br/><div class="children"><div class="content">For sure! Do you pay money $$$? :)</div><br/><div id="38022892" class="c"><input type="checkbox" id="c-38022892" checked=""/><div class="controls bullet"><span class="by">keithwhor</span><span>|</span><a href="#38022346">root</a><span>|</span><a href="#38022700">parent</a><span>|</span><a href="#38022565">next</a><span>|</span><label class="collapse" for="c-38022892">[-]</label><label class="expand" for="c-38022892">[1 more]</label></div><br/><div class="children"><div class="content">Feel free to email keith@instant.dev if you’re legitimately interested :)</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="38022565" class="c"><input type="checkbox" id="c-38022565" checked=""/><div class="controls bullet"><span class="by">PDSCodes</span><span>|</span><a href="#38022346">parent</a><span>|</span><a href="#38022379">prev</a><span>|</span><a href="#38022760">next</a><span>|</span><label class="collapse" for="c-38022565">[-]</label><label class="expand" for="c-38022565">[1 more]</label></div><br/><div class="children"><div class="content">Whilst nowhere near as robust as typescript, JSDoc offers a level of type checking through an editor such as vs code or intellj.</div><br/></div></div></div></div><div id="38022761" class="c"><input type="checkbox" id="c-38022761" checked=""/><div class="controls bullet"><span class="by">tsergiu</span><span>|</span><a href="#38022346">prev</a><span>|</span><a href="#38022601">next</a><span>|</span><label class="collapse" for="c-38022761">[-]</label><label class="expand" for="c-38022761">[3 more]</label></div><br/><div class="children"><div class="content">We tried for years to do things like this, and in the end an approach using typescript is way, way better than anything else I&#x27;ve seen attempted.<p>In my latest project[1], we set up the types for the API. The server and client are both bound by those types, meaning that one cannot change without the other. This fixes an entire class of bugs where backend code gets updated without the corresponding front-end code changing or vice-versa. It also has the nice side-effect that all of the possible return values (including errors) are nicely documented in one file, and that the errors are very consistent. On the frontend we have a &quot;typed fetch&quot; which returns typed results from the API.<p>We are also using this for typed access to localStorage, another source of many bugs in past projects, where random keys end up being scattered and causing nondeterministic behavior on different devices.<p>You can see how our API type system is implemented here:<p>- common types for both client and server: <a href="https:&#x2F;&#x2F;github.com&#x2F;stoarca&#x2F;presupplied&#x2F;blob&#x2F;master&#x2F;images&#x2F;psapp&#x2F;common&#x2F;apitypes.ts">https:&#x2F;&#x2F;github.com&#x2F;stoarca&#x2F;presupplied&#x2F;blob&#x2F;master&#x2F;images&#x2F;ps...</a><p>- client&#x27;s typed fetch: <a href="https:&#x2F;&#x2F;github.com&#x2F;stoarca&#x2F;presupplied&#x2F;blob&#x2F;master&#x2F;images&#x2F;psapp&#x2F;client&#x2F;src&#x2F;typedFetch.ts">https:&#x2F;&#x2F;github.com&#x2F;stoarca&#x2F;presupplied&#x2F;blob&#x2F;master&#x2F;images&#x2F;ps...</a><p>- server&#x27;s typed endpoint definitions: <a href="https:&#x2F;&#x2F;github.com&#x2F;stoarca&#x2F;presupplied&#x2F;blob&#x2F;master&#x2F;images&#x2F;psapp&#x2F;server&#x2F;src&#x2F;index.ts">https:&#x2F;&#x2F;github.com&#x2F;stoarca&#x2F;presupplied&#x2F;blob&#x2F;master&#x2F;images&#x2F;ps...</a><p>[1]: We are working on <a href="https:&#x2F;&#x2F;app.presupplied.com" rel="nofollow noreferrer">https:&#x2F;&#x2F;app.presupplied.com</a>, a digital home-schooling curriculum to teach 3-year-olds to read. Planning to expand to math, writing, and programming.</div><br/><div id="38022788" class="c"><input type="checkbox" id="c-38022788" checked=""/><div class="controls bullet"><span class="by">keithwhor</span><span>|</span><a href="#38022761">parent</a><span>|</span><a href="#38022849">next</a><span>|</span><label class="collapse" for="c-38022788">[-]</label><label class="expand" for="c-38022788">[1 more]</label></div><br/><div class="children"><div class="content">Our approach doesn’t preclude TypeScript! In fact I think it would integrate well with it. If you’re interested in a TS approach could you email me at keith@instant.dev ?</div><br/></div></div></div></div><div id="38022601" class="c"><input type="checkbox" id="c-38022601" checked=""/><div class="controls bullet"><span class="by">whinvik</span><span>|</span><a href="#38022761">prev</a><span>|</span><a href="#38022919">next</a><span>|</span><label class="collapse" for="c-38022601">[-]</label><label class="expand" for="c-38022601">[3 more]</label></div><br/><div class="children"><div class="content">Both the name and intent seem highly inspired from FastAPI!</div><br/><div id="38022664" class="c"><input type="checkbox" id="c-38022664" checked=""/><div class="controls bullet"><span class="by">keithwhor</span><span>|</span><a href="#38022601">parent</a><span>|</span><a href="#38022856">next</a><span>|</span><label class="collapse" for="c-38022664">[-]</label><label class="expand" for="c-38022664">[1 more]</label></div><br/><div class="children"><div class="content">Interestingly I published a Ruby framework called FastAPI before Python’s FastAPI existed ;) — been thinking about this stuff for a long time.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;thestorefront&#x2F;FastAPI">https:&#x2F;&#x2F;github.com&#x2F;thestorefront&#x2F;FastAPI</a></div><br/></div></div></div></div></div></div></div></div></div></body></html>