<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1712739667824" as="style"/><link rel="stylesheet" href="styles.css?v=1712739667824"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://thetshaped.dev/p/demystifying-the-shadow-dom">Demystifying the Shadow DOM</a> <span class="domain">(<a href="https://thetshaped.dev">thetshaped.dev</a>)</span></div><div class="subtext"><span>thunderbong</span> | <span>24 comments</span></div><br/><div><div id="39988019" class="c"><input type="checkbox" id="c-39988019" checked=""/><div class="controls bullet"><span class="by">k__</span><span>|</span><a href="#39987396">next</a><span>|</span><label class="collapse" for="c-39988019">[-]</label><label class="expand" for="c-39988019">[2 more]</label></div><br/><div class="children"><div class="content">I think, entangling slots with Shadow DOM was a mistake.<p>My guess is, most devs just want to use web components with global styles in their page, to make the reusable between frameworks.<p>However, the moment you want nestable components, you need slots, which are part of the Shadow DOM, which prevents you from using global styles.</div><br/><div id="39988470" class="c"><input type="checkbox" id="c-39988470" checked=""/><div class="controls bullet"><span class="by">mejutoco</span><span>|</span><a href="#39988019">parent</a><span>|</span><a href="#39987396">next</a><span>|</span><label class="collapse" for="c-39988470">[-]</label><label class="expand" for="c-39988470">[1 more]</label></div><br/><div class="children"><div class="content">From components I expect some level of style independence, but I agree it could have been done better.<p>You can pass css variables, or full link urls to the stylesheets to the inside of the components. If all your components support that, then effectively you can override any style.</div><br/></div></div></div></div><div id="39987396" class="c"><input type="checkbox" id="c-39987396" checked=""/><div class="controls bullet"><span class="by">ehnto</span><span>|</span><a href="#39988019">prev</a><span>|</span><a href="#39987555">next</a><span>|</span><label class="collapse" for="c-39987396">[-]</label><label class="expand" for="c-39987396">[7 more]</label></div><br/><div class="children"><div class="content">Sorry for the tangential question, but do people working in frontend feel that knowledge of the web fundamentals is not present in newer developers? Like the fundamentals of HTML, HTTP, CSS and vanilla JS?<p>I am no longer very exposed to the frontend landscape but I am curious if those who gained intimate knowledge of those technologies back when it was all that was present might have a niche lucrative role in the future of web tech. I know they are quick to learn, but the idiosyncrasies were always an arcane art.</div><br/><div id="39988486" class="c"><input type="checkbox" id="c-39988486" checked=""/><div class="controls bullet"><span class="by">throwaway42762</span><span>|</span><a href="#39987396">parent</a><span>|</span><a href="#39988274">next</a><span>|</span><label class="collapse" for="c-39988486">[-]</label><label class="expand" for="c-39988486">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been a full stack developer for a long time and I focused more on the front-end recently. I had to build a large team, so I attended a lot of interviews (a LOT, we are talking three digit numbers, for a remote position with global availability) as an evaluator. There is this very-well-paid 10% top coders who can do everything and do it well, 30% who are very good in their area of expertise but lack quite some general knowledge, 40% who can do things with a very specific choice of technologies and tools, and the rest 20% are clueless enough to give answers like &quot;I can&#x27;t solve fizzbuzz as I&#x27;m not a backend developer&quot; (quote from an actual interview).<p>I&#x27;m not sure how it compares to the backend world, but here everybody is fighting to hire the top 10%, while the lower tiers keep applying to many positions to get hired eventually.<p>Obviously throwaway acc to not break any hearts.</div><br/></div></div><div id="39988274" class="c"><input type="checkbox" id="c-39988274" checked=""/><div class="controls bullet"><span class="by">moistness</span><span>|</span><a href="#39987396">parent</a><span>|</span><a href="#39988486">prev</a><span>|</span><a href="#39987523">next</a><span>|</span><label class="collapse" for="c-39988274">[-]</label><label class="expand" for="c-39988274">[1 more]</label></div><br/><div class="children"><div class="content">Judging by people who make links via click listener on DIV, the answer is no.<p>On one side it’s understandable that people work more on abstractions and are more productive (e.g. learn React first, then maybe understand how P is different from DIV), on the other side it’s incredibly frustrating to see links that aren’t real links even on Google’s websites.</div><br/></div></div><div id="39987523" class="c"><input type="checkbox" id="c-39987523" checked=""/><div class="controls bullet"><span class="by">zilti</span><span>|</span><a href="#39987396">parent</a><span>|</span><a href="#39988274">prev</a><span>|</span><a href="#39987574">next</a><span>|</span><label class="collapse" for="c-39987523">[-]</label><label class="expand" for="c-39987523">[1 more]</label></div><br/><div class="children"><div class="content">I recently saw a blog post from a front end dev who was completely amazed about finding out that you can send an HTML form without JS, followed by equally amazed comments.
So, yes.</div><br/></div></div><div id="39987574" class="c"><input type="checkbox" id="c-39987574" checked=""/><div class="controls bullet"><span class="by">eric-burel</span><span>|</span><a href="#39987396">parent</a><span>|</span><a href="#39987523">prev</a><span>|</span><a href="#39988317">next</a><span>|</span><label class="collapse" for="c-39987574">[-]</label><label class="expand" for="c-39987574">[1 more]</label></div><br/><div class="children"><div class="content">I am not sure this is related to being a newer developer, the thing is that sources of truth regarding frontend languages are not obvious to find, contrary to say the official Golang tutorial
I am amazed at the quality of the Mozilla Developer documentation though it&#x27;s a good place to learn</div><br/></div></div><div id="39988317" class="c"><input type="checkbox" id="c-39988317" checked=""/><div class="controls bullet"><span class="by">JimDabell</span><span>|</span><a href="#39987396">parent</a><span>|</span><a href="#39987574">prev</a><span>|</span><a href="#39987555">next</a><span>|</span><label class="collapse" for="c-39988317">[-]</label><label class="expand" for="c-39988317">[2 more]</label></div><br/><div class="children"><div class="content">From the point of view of somebody who has been writing front-end code on and off from the late 90s through to present day:<p>There isn’t much understanding of the architecture of the web these days.<p>People commonly think of web development as a combination of two things: a browser environment in which their JavaScript application runs, and a backend that can provide an API for it to use.<p>HTML is seen as something that is constructed by JavaScript in the browser. HTTP is just the way you get JSON from the API. URLs are unimportant beyond the desire to make what appears in the browser’s location bar look nice.  There’s little understanding of how hypertext is supposed to work.<p>Tailwind is popular for CSS. People construct their layouts and styles by adding numerous very finely-grained classes to every element in a way that resembles inline styles. There’s very little understanding of how to organise CSS – the most common argument I hear for Tailwind is that it’s impossible to keep CSS organised without it, as if the alternative is to just write one big stylesheet with everything in a mess. “Coming up with names for classes is hard” is something I’ve heard loads.<p>Graceful degradation &#x2F; progressive enhancement is now niche. Unobtrusive JavaScript is pretty dead. Fortunately, server-side rendering is making a comeback, but unfortunately most of it relies upon running front-end things on the server with JavaScript as a speedup to bootstrapping the JavaScript running in the browser.<p>Front-end code is now written in the context of front-end JavaScript frameworks instead of what the browser natively provides. Browsers natively support web components these days, but they were devised by architecture astronauts and are not pleasant or easy to use. Instead people write components with React, Vue, Lit, etc., which have varying degrees of interoperability with web components, which very few people care about. If you want to use a third-party component, you look for one that is written specifically for your framework.<p>The web platform itself has come a long way though. Browsers almost completely agree on how to render things; CSS layouts are a lot easier and more capable; you don’t need CSS hacks to target workarounds for specific browsers any more; people upgrade their browsers frequently; and even when there are backwards compatibility issues, there are a lot of tools that will transcode it to more compatible older code at build time or polyfill at run time.<p>If you’re an old-school web developer, you’d probably enjoy writing code with all of the new options available to you. But you’ll probably be quite frustrated when working with newer developers who view the web more like a deployment target for an executable than a real platform with unique strengths.</div><br/><div id="39988428" class="c"><input type="checkbox" id="c-39988428" checked=""/><div class="controls bullet"><span class="by">Capricorn2481</span><span>|</span><a href="#39987396">root</a><span>|</span><a href="#39988317">parent</a><span>|</span><a href="#39987555">next</a><span>|</span><label class="collapse" for="c-39988428">[-]</label><label class="expand" for="c-39988428">[1 more]</label></div><br/><div class="children"><div class="content">&gt; There’s very little understanding of how to organise CSS<p>Was there ever? It seems everyone thinks they have the best way to organize CSS. But it&#x27;s always just a system that makes sense to them and only them. I&#x27;m not convinced there&#x27;s some enlightened way to organize CSS</div><br/></div></div></div></div></div></div><div id="39987555" class="c"><input type="checkbox" id="c-39987555" checked=""/><div class="controls bullet"><span class="by">knallfrosch</span><span>|</span><a href="#39987396">prev</a><span>|</span><a href="#39987520">next</a><span>|</span><label class="collapse" for="c-39987555">[-]</label><label class="expand" for="c-39987555">[2 more]</label></div><br/><div class="children"><div class="content">After reading the article, I was more confused than before.<p>The &#x27;shadow&#x27; DOM is a &#x27;hidden&#x27; space? But it is displayed to the user!<p>And what about this?<p>&gt; Use case and examples: 2. The &lt;video&gt; HTML element where there’re default controls exposed by the browser. We see just a video element in the DOM, but it contains buttons and some other stuff inside its Shadow DOM.<p>Why do we use Shadow DOM for this? It sounds like something HTML and CSS can do just fine.</div><br/><div id="39987671" class="c"><input type="checkbox" id="c-39987671" checked=""/><div class="controls bullet"><span class="by">skrebbel</span><span>|</span><a href="#39987555">parent</a><span>|</span><a href="#39987520">next</a><span>|</span><label class="collapse" for="c-39987671">[-]</label><label class="expand" for="c-39987671">[1 more]</label></div><br/><div class="children"><div class="content">Sure but if you make a video tag, it’s nice that the controls are just there, without having to code them yourself.<p>Shadow DOM is how browser vendors implemented that. They could’ve also said “this is internal magic” but instead they made it a standard so other people can use it too.</div><br/></div></div></div></div><div id="39987520" class="c"><input type="checkbox" id="c-39987520" checked=""/><div class="controls bullet"><span class="by">dlevine</span><span>|</span><a href="#39987555">prev</a><span>|</span><a href="#39987356">next</a><span>|</span><label class="collapse" for="c-39987520">[-]</label><label class="expand" for="c-39987520">[2 more]</label></div><br/><div class="children"><div class="content">I fairly recently used Shadow DOM for a project. We built a widget that was embedded in a web page, and that page could be arbitrarily styled. The outside page was typically a Wordpress theme, which in most cases did all kind of nasty things with CSS.<p>Even though there is CSS encapsulation, styles can still leak (cascade?) from the parent element into the Shadow DOM. You therefore need to put a style tag on the root that resets all styles.<p>Even then, there are some things like CSS transformations that will still affect elements within a Shadow DOM.<p>Another weirdness is that React modals are usually going to break unless you pass them a reference to the Shadow Root. Most popular libraries have been modified to take such a reference.</div><br/><div id="39987556" class="c"><input type="checkbox" id="c-39987556" checked=""/><div class="controls bullet"><span class="by">eric-burel</span><span>|</span><a href="#39987520">parent</a><span>|</span><a href="#39987356">next</a><span>|</span><label class="collapse" for="c-39987556">[-]</label><label class="expand" for="c-39987556">[1 more]</label></div><br/><div class="children"><div class="content">Yes but it doesn&#x27;t leak CSS when you want it to, I&#x27;ve never figured how to setup a CSS only dark theme using a top-level classname like Tailwind does for instance</div><br/></div></div></div></div><div id="39987356" class="c"><input type="checkbox" id="c-39987356" checked=""/><div class="controls bullet"><span class="by">lifthrasiir</span><span>|</span><a href="#39987520">prev</a><span>|</span><a href="#39987617">next</a><span>|</span><label class="collapse" for="c-39987356">[-]</label><label class="expand" for="c-39987356">[3 more]</label></div><br/><div class="children"><div class="content">One of the unexpected use of shadow DOMs for me was a document generated for image resource URLs [1], because the HTML standard apparently specifies the exact DOM structure of the generated document except for the `&lt;head&gt;` element [2].<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;chromium&#x2F;chromium&#x2F;blob&#x2F;f02ca734bf0&#x2F;third_party&#x2F;blink&#x2F;renderer&#x2F;core&#x2F;html&#x2F;image_document.cc#L279-L284">https:&#x2F;&#x2F;github.com&#x2F;chromium&#x2F;chromium&#x2F;blob&#x2F;f02ca734bf0&#x2F;third_...</a><p>[2] <a href="https:&#x2F;&#x2F;html.spec.whatwg.org&#x2F;multipage&#x2F;document-lifecycle.html#read-media" rel="nofollow">https:&#x2F;&#x2F;html.spec.whatwg.org&#x2F;multipage&#x2F;document-lifecycle.ht...</a></div><br/><div id="39987694" class="c"><input type="checkbox" id="c-39987694" checked=""/><div class="controls bullet"><span class="by">unlog</span><span>|</span><a href="#39987356">parent</a><span>|</span><a href="#39987617">next</a><span>|</span><label class="collapse" for="c-39987694">[-]</label><label class="expand" for="c-39987694">[2 more]</label></div><br/><div class="children"><div class="content">The first link is broken, can you please fix it, thanks!</div><br/><div id="39988013" class="c"><input type="checkbox" id="c-39988013" checked=""/><div class="controls bullet"><span class="by">lifthrasiir</span><span>|</span><a href="#39987356">root</a><span>|</span><a href="#39987694">parent</a><span>|</span><a href="#39987617">next</a><span>|</span><label class="collapse" for="c-39988013">[-]</label><label class="expand" for="c-39988013">[1 more]</label></div><br/><div class="children"><div class="content">Oh, thank you for pointing that out! I shortened the commit hash to 7 letters (as I often did) but that was not enough to disambiguate them, a new link should work.</div><br/></div></div></div></div></div></div><div id="39987617" class="c"><input type="checkbox" id="c-39987617" checked=""/><div class="controls bullet"><span class="by">hexage1814</span><span>|</span><a href="#39987356">prev</a><span>|</span><a href="#39987434">next</a><span>|</span><label class="collapse" for="c-39987617">[-]</label><label class="expand" for="c-39987617">[3 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t want to be that old man yelling &quot;oh, in my days!!!&quot;, but honestly, a lot, if not most, of the web &quot;innovations&quot; seem to make things considerably worse, and shadow DOM is a great example of this.<p>For instance, I used to be able to style archive.org old site and implement a dark mode, but then they had the brilliant idea of starting to use shadow DOM and for some reason extensions like stylus&#x2F;dark reader simply don&#x27;t work on shadow DOM yet, you can&#x27;t change those elements, so dark mode does&#x27;t work. And all for what? The funny part is that the old site front-end was just okay, no problem, it just worked.<p>Honestly, I just don&#x27;t get why web developers – especially the ones in internet archive foundation, which really should focus on things such as accessibility – keep changing things that simply didn&#x27;t need to be change.</div><br/><div id="39988312" class="c"><input type="checkbox" id="c-39988312" checked=""/><div class="controls bullet"><span class="by">moistness</span><span>|</span><a href="#39987617">parent</a><span>|</span><a href="#39987434">next</a><span>|</span><label class="collapse" for="c-39988312">[-]</label><label class="expand" for="c-39988312">[2 more]</label></div><br/><div class="children"><div class="content">The use case seems to be very obviously isolation (archived site can’t affect archive.org’s header), although I think iframes would have been a much better solution to this)</div><br/><div id="39988515" class="c"><input type="checkbox" id="c-39988515" checked=""/><div class="controls bullet"><span class="by">hexage1814</span><span>|</span><a href="#39987617">root</a><span>|</span><a href="#39988312">parent</a><span>|</span><a href="#39987434">next</a><span>|</span><label class="collapse" for="c-39988515">[-]</label><label class="expand" for="c-39988515">[1 more]</label></div><br/><div class="children"><div class="content">Here&#x27;s an example:
<a href="https:&#x2F;&#x2F;archive.org&#x2F;search?query=bach" rel="nofollow">https:&#x2F;&#x2F;archive.org&#x2F;search?query=bach</a><p>It&#x27;s on the search inside archive collections. All that &quot;collection-browser&quot; tag is inside a shadow-root. It didn&#x27;t used to be like that.</div><br/></div></div></div></div></div></div><div id="39987434" class="c"><input type="checkbox" id="c-39987434" checked=""/><div class="controls bullet"><span class="by">troupo</span><span>|</span><a href="#39987617">prev</a><span>|</span><label class="collapse" for="c-39987434">[-]</label><label class="expand" for="c-39987434">[4 more]</label></div><br/><div class="children"><div class="content">There are significantly more drawbacks to Shadow DOM than this stub of an article suggests.<p>To the point that even the people working on Web Components finally admitted that in 2022: <a href="https:&#x2F;&#x2F;w3c.github.io&#x2F;webcomponents-cg&#x2F;2022.html" rel="nofollow">https:&#x2F;&#x2F;w3c.github.io&#x2F;webcomponents-cg&#x2F;2022.html</a><p>--- start quote ---<p>It&#x27;s worth noting that many of these pain points are directly related to Shadow DOM&#x27;s encapsulation. While there are many benefits to some types of widely shared components to strong encapsulation, the friction of strong encapsulation has prevented most developers from adopting Shadow DOM, to the point of there being alternate proposals for style scoping that don&#x27;t use Shadow DOM. We urge browser vendors to recognize these barriers and work to make Shadow DOM more usable by more developers.<p>--- end quote ---</div><br/><div id="39987586" class="c"><input type="checkbox" id="c-39987586" checked=""/><div class="controls bullet"><span class="by">eric-burel</span><span>|</span><a href="#39987434">parent</a><span>|</span><a href="#39987611">next</a><span>|</span><label class="collapse" for="c-39987586">[-]</label><label class="expand" for="c-39987586">[1 more]</label></div><br/><div class="children"><div class="content">Also it ties strong encapsulation with composition (slots) so it prevents easily replacing framework components like React by native components</div><br/></div></div><div id="39987611" class="c"><input type="checkbox" id="c-39987611" checked=""/><div class="controls bullet"><span class="by">cudder</span><span>|</span><a href="#39987434">parent</a><span>|</span><a href="#39987586">prev</a><span>|</span><label class="collapse" for="c-39987611">[-]</label><label class="expand" for="c-39987611">[2 more]</label></div><br/><div class="children"><div class="content">Yeah, Shadow DOM was definitely introduced as an immature technology with lots of problems. Nowadays there&#x27;s also Declarative Shadow DOM[1] which allows you to create Shadow DOMs without JS. It alleviates some of these problems at the cost of introducing a few more of its own. It&#x27;s like a drunken stumble with two steps forward and one back.<p>[1]: <a href="https:&#x2F;&#x2F;developer.chrome.com&#x2F;docs&#x2F;css-ui&#x2F;declarative-shadow-dom" rel="nofollow">https:&#x2F;&#x2F;developer.chrome.com&#x2F;docs&#x2F;css-ui&#x2F;declarative-shadow-...</a></div><br/><div id="39988303" class="c"><input type="checkbox" id="c-39988303" checked=""/><div class="controls bullet"><span class="by">JodieBenitez</span><span>|</span><a href="#39987434">root</a><span>|</span><a href="#39987611">parent</a><span>|</span><label class="collapse" for="c-39988303">[-]</label><label class="expand" for="c-39988303">[1 more]</label></div><br/><div class="children"><div class="content">More like Dune&#x27;s sandwalk, many steps aside and little foot rounds for nothing.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>