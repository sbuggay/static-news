<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1727686865557" as="style"/><link rel="stylesheet" href="styles.css?v=1727686865557"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/pijng/prep">Prep: Golang Comptime</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>Seb-C</span> | <span>20 comments</span></div><br/><div><div id="41694716" class="c"><input type="checkbox" id="c-41694716" checked=""/><div class="controls bullet"><span class="by">gwd</span><span>|</span><a href="#41694272">next</a><span>|</span><label class="collapse" for="c-41694716">[-]</label><label class="expand" for="c-41694716">[1 more]</label></div><br/><div class="children"><div class="content">Adding &quot;-a&quot; is probably going to slow down your compile times by quite a bit.  If I were going to use something like this, I&#x27;d try to ensure the results only depended on things in the same file.  I wonder if there&#x27;s a way for `prep` to warn when the result depends on something outside the file.<p>If there were language support for this sort of thing, it could track the dependencies itself.</div><br/></div></div><div id="41694272" class="c"><input type="checkbox" id="c-41694272" checked=""/><div class="controls bullet"><span class="by">sluongng</span><span>|</span><a href="#41694716">prev</a><span>|</span><a href="#41692931">next</a><span>|</span><label class="collapse" for="c-41694272">[-]</label><label class="expand" for="c-41694272">[1 more]</label></div><br/><div class="children"><div class="content">This is just integrated codegen into the build tool, right? Datadog has a similar project here <a href="https:&#x2F;&#x2F;github.com&#x2F;DataDog&#x2F;orchestrion">https:&#x2F;&#x2F;github.com&#x2F;DataDog&#x2F;orchestrion</a> that does the same thing.<p>I think this kind of code gen is very wonky, and hard to debug unless there is some official API support for it. Using a sufficiently advanced build tool to handle this in a separate build step would help as well. But that usually causes problems with IDE support.</div><br/></div></div><div id="41692931" class="c"><input type="checkbox" id="c-41692931" checked=""/><div class="controls bullet"><span class="by">binwiederhier</span><span>|</span><a href="#41694272">prev</a><span>|</span><a href="#41691490">next</a><span>|</span><label class="collapse" for="c-41692931">[-]</label><label class="expand" for="c-41692931">[1 more]</label></div><br/><div class="children"><div class="content">Fascinating.<p>There are some other interesting repos from the same author, namely <a href="https:&#x2F;&#x2F;github.com&#x2F;pijng&#x2F;goinject">https:&#x2F;&#x2F;github.com&#x2F;pijng&#x2F;goinject</a>, which lets you inject code as part of preprocessing. Feels a lot like Java’s annotation magic.<p>Thanks for sharing. I wasn’t even aware Go had pre-processors, or that modifying the AST like that is even possible.</div><br/></div></div><div id="41691490" class="c"><input type="checkbox" id="c-41691490" checked=""/><div class="controls bullet"><span class="by">andyferris</span><span>|</span><a href="#41692931">prev</a><span>|</span><a href="#41692539">next</a><span>|</span><label class="collapse" for="c-41691490">[-]</label><label class="expand" for="c-41691490">[1 more]</label></div><br/><div class="children"><div class="content">The cool thing that zig comptime does is that it interacts with the type system. This seems geared around computations, more than e.g. defining structs.</div><br/></div></div><div id="41692539" class="c"><input type="checkbox" id="c-41692539" checked=""/><div class="controls bullet"><span class="by">SPascareli13</span><span>|</span><a href="#41691490">prev</a><span>|</span><a href="#41692148">next</a><span>|</span><label class="collapse" for="c-41692539">[-]</label><label class="expand" for="c-41692539">[6 more]</label></div><br/><div class="children"><div class="content">I was thinking about that just the other day, who it would be really cool if Go had compile time code execution. I think Jai is making that a very prominent feature of the language.</div><br/><div id="41694238" class="c"><input type="checkbox" id="c-41694238" checked=""/><div class="controls bullet"><span class="by">lenkite</span><span>|</span><a href="#41692539">parent</a><span>|</span><a href="#41692610">next</a><span>|</span><label class="collapse" for="c-41694238">[-]</label><label class="expand" for="c-41694238">[1 more]</label></div><br/><div class="children"><div class="content">Isn&#x27;t Jai still vapourware after a decade ? How does one even get the compiler and build programs ?</div><br/></div></div><div id="41692610" class="c"><input type="checkbox" id="c-41692610" checked=""/><div class="controls bullet"><span class="by">latenightcoding</span><span>|</span><a href="#41692539">parent</a><span>|</span><a href="#41694238">prev</a><span>|</span><a href="#41692148">next</a><span>|</span><label class="collapse" for="c-41692610">[-]</label><label class="expand" for="c-41692610">[4 more]</label></div><br/><div class="children"><div class="content">re: Jai.
I have never seen a language that is not even available get so much love and benefit of doubt.</div><br/><div id="41693456" class="c"><input type="checkbox" id="c-41693456" checked=""/><div class="controls bullet"><span class="by">SPascareli13</span><span>|</span><a href="#41692539">root</a><span>|</span><a href="#41692610">parent</a><span>|</span><a href="#41692727">next</a><span>|</span><label class="collapse" for="c-41693456">[-]</label><label class="expand" for="c-41693456">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t know if there&#x27;s ever been a language that was announced 10 years before its first closed beta. I don&#x27;t even know if having a &quot;closed beta&quot; for a language is something that really happens.<p>So there&#x27;s a lot that is different with Jai, it&#x27;s more like a highly anticipated game than a language.</div><br/></div></div><div id="41692727" class="c"><input type="checkbox" id="c-41692727" checked=""/><div class="controls bullet"><span class="by">whateveracct</span><span>|</span><a href="#41692539">root</a><span>|</span><a href="#41692610">parent</a><span>|</span><a href="#41693456">prev</a><span>|</span><a href="#41692148">next</a><span>|</span><label class="collapse" for="c-41692727">[-]</label><label class="expand" for="c-41692727">[2 more]</label></div><br/><div class="children"><div class="content">cult of personality</div><br/><div id="41694887" class="c"><input type="checkbox" id="c-41694887" checked=""/><div class="controls bullet"><span class="by">jonathrg</span><span>|</span><a href="#41692539">root</a><span>|</span><a href="#41692727">parent</a><span>|</span><a href="#41692148">next</a><span>|</span><label class="collapse" for="c-41694887">[-]</label><label class="expand" for="c-41694887">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s pretty much it. Jonathan Blow&#x27;s strongly worded negative opinions on most things attracts a certain kind of person who will go on to evangelize.</div><br/></div></div></div></div></div></div></div></div><div id="41692148" class="c"><input type="checkbox" id="c-41692148" checked=""/><div class="controls bullet"><span class="by">Groxx</span><span>|</span><a href="#41692539">prev</a><span>|</span><a href="#41691566">next</a><span>|</span><label class="collapse" for="c-41692148">[-]</label><label class="expand" for="c-41692148">[1 more]</label></div><br/><div class="children"><div class="content">TIL `go build -toolexec`.  That... seems like it&#x27;d enable a lot of interesting shenanigans...<p>I&#x27;m somewhat surprised by how little I see online about it.</div><br/></div></div><div id="41691566" class="c"><input type="checkbox" id="c-41691566" checked=""/><div class="controls bullet"><span class="by">pa7ch</span><span>|</span><a href="#41692148">prev</a><span>|</span><a href="#41693272">next</a><span>|</span><label class="collapse" for="c-41691566">[-]</label><label class="expand" for="c-41691566">[4 more]</label></div><br/><div class="children"><div class="content">I wonder what Go would look like if it had generics removed but something like comptime added.</div><br/><div id="41694250" class="c"><input type="checkbox" id="c-41694250" checked=""/><div class="controls bullet"><span class="by">lenkite</span><span>|</span><a href="#41691566">parent</a><span>|</span><a href="#41692155">next</a><span>|</span><label class="collapse" for="c-41694250">[-]</label><label class="expand" for="c-41694250">[1 more]</label></div><br/><div class="children"><div class="content">comptime really should have been the approach to Generics taken by Golang instead of trying to blindly follow Java&#x2F;C++ . It would have also fit into Go&#x27;s philosophy of keeping it standard and simple - no separate mini language for generics . Wish the language designers had looked at Zig before rolling out generics.</div><br/></div></div><div id="41692155" class="c"><input type="checkbox" id="c-41692155" checked=""/><div class="controls bullet"><span class="by">fjasdddwsfasd</span><span>|</span><a href="#41691566">parent</a><span>|</span><a href="#41694250">prev</a><span>|</span><a href="#41693272">next</a><span>|</span><label class="collapse" for="c-41692155">[-]</label><label class="expand" for="c-41692155">[2 more]</label></div><br/><div class="children"><div class="content">I always felt like if and when Go chose to implement Generics it would be like what Zig did today.</div><br/></div></div></div></div><div id="41693272" class="c"><input type="checkbox" id="c-41693272" checked=""/><div class="controls bullet"><span class="by">tzury</span><span>|</span><a href="#41691566">prev</a><span>|</span><a href="#41693435">next</a><span>|</span><label class="collapse" for="c-41693272">[-]</label><label class="expand" for="c-41693272">[1 more]</label></div><br/><div class="children"><div class="content">In an older project I have had a code file generated with constants to get same results.<p>That is nice.
Makes coding and build flow simple, clean and easier to maintain.</div><br/></div></div><div id="41693435" class="c"><input type="checkbox" id="c-41693435" checked=""/><div class="controls bullet"><span class="by">chriscbr</span><span>|</span><a href="#41693272">prev</a><span>|</span><a href="#41693161">next</a><span>|</span><label class="collapse" for="c-41693435">[-]</label><label class="expand" for="c-41693435">[1 more]</label></div><br/><div class="children"><div class="content">Neat concept.<p>I had a similar idea a few months ago about whether it&#x27;s possible to achieve some form of comptime with TypeScript. I didn&#x27;t get too far unfortunately, but I think the implementation would need to interact with the TypeScript compiler API in some way.</div><br/></div></div><div id="41693627" class="c"><input type="checkbox" id="c-41693627" checked=""/><div class="controls bullet"><span class="by">sammy2255</span><span>|</span><a href="#41693161">prev</a><span>|</span><label class="collapse" for="c-41693627">[-]</label><label class="expand" for="c-41693627">[1 more]</label></div><br/><div class="children"><div class="content">Prep is a drug u take before gay sex</div><br/></div></div></div></div></div></div></div></body></html>