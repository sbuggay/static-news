<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1724922069026" as="style"/><link rel="stylesheet" href="styles.css?v=1724922069026"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/newsnowlabs/runcvm">RunCVM: An open-source Docker runtime for launching container images in VMs</a>Â <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>newstechfounder</span> | <span>6 comments</span></div><br/><div><div id="41388664" class="c"><input type="checkbox" id="c-41388664" checked=""/><div class="controls bullet"><span class="by">mobiuscog</span><span>|</span><a href="#41385206">next</a><span>|</span><label class="collapse" for="c-41388664">[-]</label><label class="expand" for="c-41388664">[1 more]</label></div><br/><div class="children"><div class="content">Although it&#x27;s currently Linux-only, it seems this would be useful on Mac&#x2F;Windows, as they already jury-rig containers within a VM and this would override that by default.<p>Unless I&#x27;m missing something (quite likely) ?</div><br/></div></div><div id="41385206" class="c"><input type="checkbox" id="c-41385206" checked=""/><div class="controls bullet"><span class="by">newstechfounder</span><span>|</span><a href="#41388664">prev</a><span>|</span><label class="collapse" for="c-41385206">[-]</label><label class="expand" for="c-41385206">[4 more]</label></div><br/><div class="children"><div class="content">RunCVM (Run Container Virtual Machine) is an experimental open-source Docker container runtime for Linux, that makes launching containerised workloads in virtual machines (VMs) as easy as launching them in containers, using docker run, e.g.:<p>Launch nginx VM publishing VM port 80 on host port 8080:<p>`docker run --runtime=runcvm --name nginx1 --rm -p 8080:80 nginx`<p>Launch an interactive terminal on an Ubuntu VM:<p>`docker run --runtime=runcvm --name ubuntu1 --rm -it ubuntu`<p>RunCVM runs standard container workloads (like nginx or mariadb) as well as system workloads (like Systemd, Docker, stock or bespoke Linux kernels, even OpenWrt).<p>RunCVM:<p><pre><code>   - Provides stronger workload isolation than standard containers.
   - Allows running and testing applications like Systemd, Docker, and Kubernetes that won&#x27;t easily run (or run securely) in standard containers.
   - Supports tools and apps like iptables, ipvsadm or openvpn, or Docker Swarm ingress routing, that require a running kernel (or a kernel version or modules not available on the host).
   - Supports both stock kernels of major Linux distributions and custom kernels.
   - Makes it easy to create arrays of networked VMs for testing complex multi-machine setups like Docker Swarms.
   - Supports many standard `docker run` options including custom docker networks with docker internal DNS (`--network`), multiple network interfaces (with `docker network connect`), published ports (`-p`), plus volume, tmpfs and bind mounts
   - Uses virtiofs for fast booting and supports prepopulated KVM virtual disks on almost any regular disk filepath (except &#x2F;) for improved I&#x2F;O performance.
   - Can be easily customised to emulate specific hardware e.g. disks, network cards, and graphics displays.
   - Useful as a playground for some bare-metal training and testing use-cases.
</code></pre>
BACKGROUND:<p>RunCVM was born out of difficulties experienced using the Docker and Podman CLIs to launch Kata Containers v2, and a belief that launching containerised workloads in VMs using Docker needn&#x27;t be so complicated.<p>Like Kata, RunCVM aims to be a secure container runtime with lightweight virtual machines that feel and perform like containers, but provide stronger workload isolation using hardware virtualisation technology.<p>However, while Kata aims to launch standard container images inside a restricted-privileges namespace inside a VM running a single fixed and heavily customised kernel and Linux distribution optimised for this purpose, RunCVM intentionally aims to launch container or VM images as the VM&#x27;s root filesystem using stock or bespoke Linux kernels, the upshot being RunCVM&#x27;s can run VM workloads that Kata&#x27;s security and kernel model would explicitly prevent.<p>FURTHER DETAILS:<p><pre><code>   - Uses a lightweight &#x27;wrapper-runtime&#x27; technology that subverts the behaviour of the standard container runtime runc to cause a VM to be launched within the container (making its code footprint and external dependencies extremely small, and its internals extremely simple and easy to understand and tailor for specific purposes).
   - Highly portable among Linux distributions and development platforms providing KVM. Can be installed on Google Cloud or on GitHub Codespaces.
   - Experimental support for podman run.
   - RunCVM can even be used to launch VMs nested inside a RunCVM VM - i.e. an &#x27;inner&#x27; RunCVM Container&#x2F;VM guest can be launched by Docker running within an &#x27;outer&#x27; RunCVM Container&#x2F;VM guest (assuming the host supports nested VMs) - in this sense, RunCVM is &#x27;reentrant&#x27;.
</code></pre>
RunCVM was first released under the Apache license in April 2023 and its latest release, v1.4.0, is the culmination of an extensive amount of R&amp;D over roughly two years.<p>Questions, suggestions and feedback are most welcome.</div><br/><div id="41387813" class="c"><input type="checkbox" id="c-41387813" checked=""/><div class="controls bullet"><span class="by">jensneuse</span><span>|</span><a href="#41385206">parent</a><span>|</span><a href="#41388218">next</a><span>|</span><label class="collapse" for="c-41387813">[-]</label><label class="expand" for="c-41387813">[2 more]</label></div><br/><div class="children"><div class="content">Looks cool and I understand what it does. Can you explain the production use case for this solution? It&#x27;s not clear to me how this would be used in real life.</div><br/><div id="41387881" class="c"><input type="checkbox" id="c-41387881" checked=""/><div class="controls bullet"><span class="by">sofixa</span><span>|</span><a href="#41385206">root</a><span>|</span><a href="#41387813">parent</a><span>|</span><a href="#41388218">next</a><span>|</span><label class="collapse" for="c-41387881">[-]</label><label class="expand" for="c-41387881">[1 more]</label></div><br/><div class="children"><div class="content">Not OP and not at all related to the project, but I imagine in production you would just replace the container runtime of your Kubernetes&#x2F;Nomad&#x2F;Swarm&#x2F;homemade orchestrator, and run Docker container as usual (but each one is a separate VM). The advantages would be that you have actual isolation between the containers, so it&#x27;s great for higher security contexts (e.g. banks) or multi tenant setups.</div><br/></div></div></div></div><div id="41388218" class="c"><input type="checkbox" id="c-41388218" checked=""/><div class="controls bullet"><span class="by">mkesper</span><span>|</span><a href="#41385206">parent</a><span>|</span><a href="#41387813">prev</a><span>|</span><label class="collapse" for="c-41388218">[-]</label><label class="expand" for="c-41388218">[1 more]</label></div><br/><div class="children"><div class="content">This should be changed into show HN?</div><br/></div></div></div></div></div></div></div></div></div></body></html>