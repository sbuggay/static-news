<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1729328451863" as="style"/><link rel="stylesheet" href="styles.css?v=1729328451863"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://pehringer.info/go_plan9_memo.html">Show HN: Go Plan9 Memo</a> <span class="domain">(<a href="https://pehringer.info">pehringer.info</a>)</span></div><div class="subtext"><span>pehringer</span> | <span>98 comments</span></div><br/><div><div id="41882386" class="c"><input type="checkbox" id="c-41882386" checked=""/><div class="controls bullet"><span class="by">sedatk</span><span>|</span><a href="#41885950">next</a><span>|</span><label class="collapse" for="c-41882386">[-]</label><label class="expand" for="c-41882386">[1 more]</label></div><br/><div class="children"><div class="content">&gt;  4 represents “NOSPLIT” which we need for some reason<p>For those who are curious: &quot;In the general case, the frame size [the parameter after NOSPLIT] is followed by an argument size, separated by a minus sign. (It&#x27;s not a subtraction, just idiosyncratic syntax.) The frame size $24-8 states that the function has a 24-byte frame and is called with 8 bytes of argument, which live on the caller&#x27;s frame. If NOSPLIT is not specified for the TEXT, the argument size must be provided. For assembly functions with Go prototypes, go vet will check that the argument size is correct.&quot;<p>Source: <a href="https:&#x2F;&#x2F;go.dev&#x2F;doc&#x2F;asm" rel="nofollow">https:&#x2F;&#x2F;go.dev&#x2F;doc&#x2F;asm</a></div><br/></div></div><div id="41885950" class="c"><input type="checkbox" id="c-41885950" checked=""/><div class="controls bullet"><span class="by">endofreach</span><span>|</span><a href="#41882386">prev</a><span>|</span><a href="#41880731">next</a><span>|</span><label class="collapse" for="c-41885950">[-]</label><label class="expand" for="c-41885950">[1 more]</label></div><br/><div class="children"><div class="content">I was gonna say this it seems like an LLMisinterpretation of the code. I can&#x27;t think of any other way how one would know the term plan9 and how to dive into assembly while not knowing what waters he is in. And then i read others had the same thought.<p>If this is true, i kindly ask the author to not feel embarrassed or &quot;exposed&quot;, but be honest, so we can learn from this. I&#x27;d like to gain confidence in these type of &quot;LLM exposed&quot; things, but it never seems like people would admit, no matter how obvious. And of course, here it is not obvious, this is of course a wild, very judgemental guess.</div><br/></div></div><div id="41880731" class="c"><input type="checkbox" id="c-41880731" checked=""/><div class="controls bullet"><span class="by">mxey</span><span>|</span><a href="#41885950">prev</a><span>|</span><a href="#41880998">next</a><span>|</span><label class="collapse" for="c-41880731">[-]</label><label class="expand" for="c-41880731">[11 more]</label></div><br/><div class="children"><div class="content">&gt; After doing some preliminary research I discovered that Go uses its own internal assembly language called Plan9.<p>Is the language actually called that?</div><br/><div id="41882801" class="c"><input type="checkbox" id="c-41882801" checked=""/><div class="controls bullet"><span class="by">rsc</span><span>|</span><a href="#41880731">parent</a><span>|</span><a href="#41880883">next</a><span>|</span><label class="collapse" for="c-41882801">[-]</label><label class="expand" for="c-41882801">[3 more]</label></div><br/><div class="children"><div class="content">No. It&#x27;s just Go assembly.
(It happens to be a Plan 9-derived syntax, but we call it Go assembly.)
See <a href="https:&#x2F;&#x2F;go.dev&#x2F;doc&#x2F;asm" rel="nofollow">https:&#x2F;&#x2F;go.dev&#x2F;doc&#x2F;asm</a>.</div><br/><div id="41884495" class="c"><input type="checkbox" id="c-41884495" checked=""/><div class="controls bullet"><span class="by">KyleSanderson</span><span>|</span><a href="#41880731">root</a><span>|</span><a href="#41882801">parent</a><span>|</span><a href="#41880883">next</a><span>|</span><label class="collapse" for="c-41884495">[-]</label><label class="expand" for="c-41884495">[2 more]</label></div><br/><div class="children"><div class="content">nice to see you around still :)</div><br/></div></div></div></div><div id="41880883" class="c"><input type="checkbox" id="c-41880883" checked=""/><div class="controls bullet"><span class="by">nzach</span><span>|</span><a href="#41880731">parent</a><span>|</span><a href="#41882801">prev</a><span>|</span><a href="#41881786">next</a><span>|</span><label class="collapse" for="c-41880883">[-]</label><label class="expand" for="c-41880883">[1 more]</label></div><br/><div class="children"><div class="content">This is a fair question. Initially I just assumed this was true. Because someone who did research on this topic would not get something like this wrong. And besides that, if you know a little about the project this name could make some sense.<p>But the more I look into it, the more I think this is just a LLM hallucination.<p>The doc about the &#x27;assembly&#x27; format doesn&#x27;t give a proper name. It just calls &#x27;go assembler&#x27;.<p>And I think the source of this hallucination was this first paragraph:<p>&gt; The assembler is based on the input style of the Plan 9 assemblers, which is documented in detail elsewhere. If you plan to write assembly language, you should read that document although much of it is Plan 9-specific. The current document provides a summary of the syntax and the differences with what is explained in that document, and describes the peculiarities that apply when writing assembly code to interact with Go.</div><br/></div></div><div id="41881786" class="c"><input type="checkbox" id="c-41881786" checked=""/><div class="controls bullet"><span class="by">mseepgood</span><span>|</span><a href="#41880731">parent</a><span>|</span><a href="#41880883">prev</a><span>|</span><a href="#41881960">next</a><span>|</span><label class="collapse" for="c-41881786">[-]</label><label class="expand" for="c-41881786">[5 more]</label></div><br/><div class="children"><div class="content">No, it doesn&#x27;t have a name. Plan 9 is an operating system, and this style of assembly language syntax originates from the assembler used on this operating system. Its like saying &quot;The GNU Compiler Collection uses its own internal assembly language called Unix.&quot;</div><br/><div id="41882016" class="c"><input type="checkbox" id="c-41882016" checked=""/><div class="controls bullet"><span class="by">dekhn</span><span>|</span><a href="#41880731">root</a><span>|</span><a href="#41881786">parent</a><span>|</span><a href="#41881960">next</a><span>|</span><label class="collapse" for="c-41882016">[-]</label><label class="expand" for="c-41882016">[4 more]</label></div><br/><div class="children"><div class="content">Well, linux is just a mechanism to make more copies of GCC, so that tracks.</div><br/><div id="41886589" class="c"><input type="checkbox" id="c-41886589" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#41880731">root</a><span>|</span><a href="#41882016">parent</a><span>|</span><a href="#41882153">next</a><span>|</span><label class="collapse" for="c-41886589">[-]</label><label class="expand" for="c-41886589">[1 more]</label></div><br/><div class="children"><div class="content">Not when packaged in Android and ChromeOS.</div><br/></div></div><div id="41882153" class="c"><input type="checkbox" id="c-41882153" checked=""/><div class="controls bullet"><span class="by">anthk</span><span>|</span><a href="#41880731">root</a><span>|</span><a href="#41882016">parent</a><span>|</span><a href="#41886589">prev</a><span>|</span><a href="#41881960">next</a><span>|</span><label class="collapse" for="c-41882153">[-]</label><label class="expand" for="c-41882153">[2 more]</label></div><br/><div class="children"><div class="content">Kinda like GNU (Unix reimplementation) was a fancy platform to run Emacs on top.</div><br/><div id="41882522" class="c"><input type="checkbox" id="c-41882522" checked=""/><div class="controls bullet"><span class="by">dekhn</span><span>|</span><a href="#41880731">root</a><span>|</span><a href="#41882153">parent</a><span>|</span><a href="#41881960">next</a><span>|</span><label class="collapse" for="c-41882522">[-]</label><label class="expand" for="c-41882522">[1 more]</label></div><br/><div class="children"><div class="content">basically: <a href="https:&#x2F;&#x2F;www.gnu.org&#x2F;gnu&#x2F;rms-lisp.en.html" rel="nofollow">https:&#x2F;&#x2F;www.gnu.org&#x2F;gnu&#x2F;rms-lisp.en.html</a></div><br/></div></div></div></div></div></div></div></div></div></div><div id="41880998" class="c"><input type="checkbox" id="c-41880998" checked=""/><div class="controls bullet"><span class="by">joeegan2202</span><span>|</span><a href="#41880731">prev</a><span>|</span><a href="#41880371">next</a><span>|</span><label class="collapse" for="c-41880998">[-]</label><label class="expand" for="c-41880998">[2 more]</label></div><br/><div class="children"><div class="content">A couple points on Go assembly:<p>1. On amd64 those ints are actually 64bit. If you used int32 then they would be be word aligned in the parameter list. However, there is a gotcha with that. The return values will always start at a dword aligned offset on 64bit system.<p>2. NOSPLIT is defined in &quot;textflag.h&quot; which Go&#x27;s compiler automatically provides. However, NOSPLIT is, from everything I&#x27;ve read, only respected on runtime.XX functions, so it&#x27;s not doing anything there, and it&#x27;s also not necessary. NOSPLIT tells the compiler not to insert code to check if the stack needs to split because it&#x27;s going to overflow, which is technically unnecessary if the function doesn&#x27;t need any stack space. It&#x27;s basically only there on the function that checks for stack splits, to prevent that code from being injected into itself.</div><br/><div id="41881052" class="c"><input type="checkbox" id="c-41881052" checked=""/><div class="controls bullet"><span class="by">pehringer</span><span>|</span><a href="#41880998">parent</a><span>|</span><a href="#41880371">next</a><span>|</span><label class="collapse" for="c-41881052">[-]</label><label class="expand" for="c-41881052">[1 more]</label></div><br/><div class="children"><div class="content">Thank you for the explanation! That makes a lot more sense :)</div><br/></div></div></div></div><div id="41880371" class="c"><input type="checkbox" id="c-41880371" checked=""/><div class="controls bullet"><span class="by">saclark11</span><span>|</span><a href="#41880998">prev</a><span>|</span><a href="#41880902">next</a><span>|</span><label class="collapse" for="c-41880371">[-]</label><label class="expand" for="c-41880371">[32 more]</label></div><br/><div class="children"><div class="content">&gt; Overall, pretty weird stuff. I am not sure why the Go team went down this route. Maybe it simplifies the compiler by having this bespoke assembly format?<p>Rob Pike spoke on the design of Go&#x27;s assembler at a talk in 2016 [1][2]. I think it basically came down to the observation that most assembly language is roughly the same, so why not build a common assembly language that &quot;lets you talk to the machine at the lowest level and yet not have to learn a new syntax.&quot; It also enables them to automatically generate a working assembler given an instruction manual PDF for a new architecture as input.<p>[1]: <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=KINIAgRpkDA" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=KINIAgRpkDA</a>
[2]: <a href="https:&#x2F;&#x2F;go.dev&#x2F;talks&#x2F;2016&#x2F;asm.slide#1" rel="nofollow">https:&#x2F;&#x2F;go.dev&#x2F;talks&#x2F;2016&#x2F;asm.slide#1</a></div><br/><div id="41880468" class="c"><input type="checkbox" id="c-41880468" checked=""/><div class="controls bullet"><span class="by">alphazard</span><span>|</span><a href="#41880371">parent</a><span>|</span><a href="#41886094">next</a><span>|</span><label class="collapse" for="c-41880468">[-]</label><label class="expand" for="c-41880468">[28 more]</label></div><br/><div class="children"><div class="content">And it worked.  Go established cross-compilation as table-stakes for new programming languages, at a time when very few were doing it well, if at all.</div><br/><div id="41884968" class="c"><input type="checkbox" id="c-41884968" checked=""/><div class="controls bullet"><span class="by">lifthrasiir</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41880468">parent</a><span>|</span><a href="#41880798">next</a><span>|</span><label class="collapse" for="c-41884968">[-]</label><label class="expand" for="c-41884968">[1 more]</label></div><br/><div class="children"><div class="content">While good cross-compilation is one of Go&#x27;s strengths... I don&#x27;t really think a unified assembly language contributed to that? Any assembly code can&#x27;t be shared across multiple architectures in general, so the only potential benefit would be the easiness of parser development, which doesn&#x27;t sound like a big thing. Rob Pike himself even noted that it can be offputting to outsiders but considered it&#x27;s a worthy trade-off nevertheless [1], the conclusion I don&#x27;t really think justified.<p>[1] <a href="https:&#x2F;&#x2F;go.dev&#x2F;talks&#x2F;2016&#x2F;asm.slide#32" rel="nofollow">https:&#x2F;&#x2F;go.dev&#x2F;talks&#x2F;2016&#x2F;asm.slide#32</a></div><br/></div></div><div id="41880798" class="c"><input type="checkbox" id="c-41880798" checked=""/><div class="controls bullet"><span class="by">cloudfudge</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41880468">parent</a><span>|</span><a href="#41884968">prev</a><span>|</span><a href="#41880634">next</a><span>|</span><label class="collapse" for="c-41880798">[-]</label><label class="expand" for="c-41880798">[14 more]</label></div><br/><div class="children"><div class="content">Yes, this is a great leap forward in my opinion.  I had to do a project at a previous job where I wrote an agent that ran on x86, MIPS and ARM, and doing it in Go was a no-brainer.  The other teams who had a bunch of C code that was a nightmare to cross-compile were so jealous they eventually moved a lot of things to Go.<p>I&#x27;ve been doing this for 35 years and cross compiling anything nontrivial was always a toolchain nightmare.  Discovering a world where all I had to do was set GOARCH=mips64 (and possibly GOOS=darwin if I wanted mac binaries) before invoking the compiler is so magical I was extremely skeptical when I first read about it.</div><br/><div id="41886387" class="c"><input type="checkbox" id="c-41886387" checked=""/><div class="controls bullet"><span class="by">samus</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41880798">parent</a><span>|</span><a href="#41881898">next</a><span>|</span><label class="collapse" for="c-41886387">[-]</label><label class="expand" for="c-41886387">[1 more]</label></div><br/><div class="children"><div class="content">Cross-platform languages have existed for decades, no?</div><br/></div></div><div id="41881898" class="c"><input type="checkbox" id="c-41881898" checked=""/><div class="controls bullet"><span class="by">bombela</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41880798">parent</a><span>|</span><a href="#41886387">prev</a><span>|</span><a href="#41882917">next</a><span>|</span><label class="collapse" for="c-41881898">[-]</label><label class="expand" for="c-41881898">[4 more]</label></div><br/><div class="children"><div class="content">As long as you don&#x27;t have C libraries to cross compile &#x2F; link against of course ;)</div><br/><div id="41882993" class="c"><input type="checkbox" id="c-41882993" checked=""/><div class="controls bullet"><span class="by">akira2501</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41881898">parent</a><span>|</span><a href="#41882917">next</a><span>|</span><label class="collapse" for="c-41882993">[-]</label><label class="expand" for="c-41882993">[3 more]</label></div><br/><div class="children"><div class="content">sqlite is the only thing that makes me sad I have CGO_ENABLED=0.</div><br/><div id="41883963" class="c"><input type="checkbox" id="c-41883963" checked=""/><div class="controls bullet"><span class="by">thombles</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41882993">parent</a><span>|</span><a href="#41882917">next</a><span>|</span><label class="collapse" for="c-41883963">[-]</label><label class="expand" for="c-41883963">[2 more]</label></div><br/><div class="children"><div class="content">This non-cgo port might help - I started using it recently and it&#x27;s fine but I&#x27;m not exactly a demanding user <a href="https:&#x2F;&#x2F;pkg.go.dev&#x2F;modernc.org&#x2F;sqlite" rel="nofollow">https:&#x2F;&#x2F;pkg.go.dev&#x2F;modernc.org&#x2F;sqlite</a></div><br/><div id="41884507" class="c"><input type="checkbox" id="c-41884507" checked=""/><div class="controls bullet"><span class="by">KyleSanderson</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41883963">parent</a><span>|</span><a href="#41882917">next</a><span>|</span><label class="collapse" for="c-41884507">[-]</label><label class="expand" for="c-41884507">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s still pretty slow, but overall correct. There&#x27;s tricks, like reader connections and a single writer connection to reduce contention. There was a blog post on here detailing some speedups in general.</div><br/></div></div></div></div></div></div></div></div><div id="41882917" class="c"><input type="checkbox" id="c-41882917" checked=""/><div class="controls bullet"><span class="by">somat</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41880798">parent</a><span>|</span><a href="#41881898">prev</a><span>|</span><a href="#41883141">next</a><span>|</span><label class="collapse" for="c-41882917">[-]</label><label class="expand" for="c-41882917">[3 more]</label></div><br/><div class="children"><div class="content">A fair enough assessment, it be that way, however I will note that a large reason that C exists in the first place was to have a machine independent language to write programs in.</div><br/><div id="41884135" class="c"><input type="checkbox" id="c-41884135" checked=""/><div class="controls bullet"><span class="by">kloop</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41882917">parent</a><span>|</span><a href="#41883238">next</a><span>|</span><label class="collapse" for="c-41884135">[-]</label><label class="expand" for="c-41884135">[1 more]</label></div><br/><div class="children"><div class="content">&gt; however I will note that a large reason that C exists in the first place was to have a machine independent language to write programs in.<p>That&#x27;s fair, but what we call a monstrosity by modern standards is much simpler than porting the assembly<p>There were cross plaform languages before C, but they never really took off for system development the wat C did (OSs, for example were commonly written in pure assembly)</div><br/></div></div><div id="41883238" class="c"><input type="checkbox" id="c-41883238" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41882917">parent</a><span>|</span><a href="#41884135">prev</a><span>|</span><a href="#41883141">next</a><span>|</span><label class="collapse" for="c-41883238">[-]</label><label class="expand" for="c-41883238">[1 more]</label></div><br/><div class="children"><div class="content">For the UNIX authors, that was already possible a decade before.</div><br/></div></div></div></div><div id="41883141" class="c"><input type="checkbox" id="c-41883141" checked=""/><div class="controls bullet"><span class="by">dsv3099i</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41880798">parent</a><span>|</span><a href="#41882917">prev</a><span>|</span><a href="#41880634">next</a><span>|</span><label class="collapse" for="c-41883141">[-]</label><label class="expand" for="c-41883141">[5 more]</label></div><br/><div class="children"><div class="content">mips64!?  That&#x27;s a blast from the past.  It must be some kind of legacy hw that&#x27;s getting current software updates in some kind of really niche use case. Or academia. :)<p>Like previous you, I have to admit I&#x27;m skeptical but would be happy to be wrong.</div><br/><div id="41883246" class="c"><input type="checkbox" id="c-41883246" checked=""/><div class="controls bullet"><span class="by">cloudfudge</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41883141">parent</a><span>|</span><a href="#41883230">next</a><span>|</span><label class="collapse" for="c-41883246">[-]</label><label class="expand" for="c-41883246">[2 more]</label></div><br/><div class="children"><div class="content">&gt; mips64 .. must be some kind of legacy hw that&#x27;s getting current software updates<p>Hundreds of thousands of linux-based smartnic cards, actually.  Fun stuff.  Those particular ones were EOLd and have been replaced with ARM but the MIPS based ones will live on in the datacenters until they die, I&#x27;m sure.<p>&gt; Like previous you, I have to admit I&#x27;m skeptical but would be happy to be wrong<p>Seriously, you are going to be delighted to be wrong.  On your linux machine, go write a go program and write &quot;GOOS=darwin GOARCH=arm64 go build ...&quot; and you will have yourself an ARM mac binary.  Or for going the other way, use GOOS=linux GOARCH=amd64.  It really is that simple.</div><br/><div id="41885834" class="c"><input type="checkbox" id="c-41885834" checked=""/><div class="controls bullet"><span class="by">ncruces</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41883246">parent</a><span>|</span><a href="#41883230">next</a><span>|</span><label class="collapse" for="c-41885834">[-]</label><label class="expand" for="c-41885834">[1 more]</label></div><br/><div class="children"><div class="content">It gets even more amazing than that. Look at this bit from my GitHub Actions: <a href="https:&#x2F;&#x2F;github.com&#x2F;ncruces&#x2F;go-sqlite3&#x2F;blob&#x2F;fefee692dbfad39f6365f35f58888cc7cddb8b39&#x2F;.github&#x2F;workflows&#x2F;test.yml#L143-L164">https:&#x2F;&#x2F;github.com&#x2F;ncruces&#x2F;go-sqlite3&#x2F;blob&#x2F;fefee692dbfad39f6...</a><p>I install QEMU (I have the same setup locally), then it&#x27;s one line each to run unit tests for: Linux 386, arm64, riscv64, ppc64le and s390x.<p>With QEMU installed, <i>all</i> you have to do is:<p><pre><code>    GOARCH=bla go test .&#x2F;...</code></pre></div><br/></div></div></div></div><div id="41883230" class="c"><input type="checkbox" id="c-41883230" checked=""/><div class="controls bullet"><span class="by">wahern</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41883141">parent</a><span>|</span><a href="#41883246">prev</a><span>|</span><a href="#41883355">next</a><span>|</span><label class="collapse" for="c-41883230">[-]</label><label class="expand" for="c-41883230">[1 more]</label></div><br/><div class="children"><div class="content">MIPS64 is still very much alive: <a href="https:&#x2F;&#x2F;store.ui.com&#x2F;us&#x2F;en&#x2F;products&#x2F;er-4" rel="nofollow">https:&#x2F;&#x2F;store.ui.com&#x2F;us&#x2F;en&#x2F;products&#x2F;er-4</a><p>&quot;EdgeOS&quot; is based on Linux, and people run vanilla Linux distributions on those boxes, as well as OpenBSD and NetBSD.<p>I wonder how long Marvell will continue selling those Octeon MIPS64 chips, though. Marvell (then Cavium) switched to ARM nearly a decade ago (2016) for newer chips in the Octeon series. I think Loongson sells more modern MIPS64 (or at least MIPS64-like) chips, but they don&#x27;t seem to be commercially available outside China.</div><br/></div></div></div></div></div></div><div id="41880634" class="c"><input type="checkbox" id="c-41880634" checked=""/><div class="controls bullet"><span class="by">p_l</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41880468">parent</a><span>|</span><a href="#41880798">prev</a><span>|</span><a href="#41883225">next</a><span>|</span><label class="collapse" for="c-41880634">[-]</label><label class="expand" for="c-41880634">[7 more]</label></div><br/><div class="children"><div class="content">Go essentially copied the design from Plan9 compilers, which it was originally based on. It&#x27;s one of the many things it inherited from Plan9 environment.</div><br/><div id="41880900" class="c"><input type="checkbox" id="c-41880900" checked=""/><div class="controls bullet"><span class="by">kjksf</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41880634">parent</a><span>|</span><a href="#41883225">next</a><span>|</span><label class="collapse" for="c-41880900">[-]</label><label class="expand" for="c-41880900">[6 more]</label></div><br/><div class="children"><div class="content">It&#x27;s more &quot;reused&quot; because Plan9 compilers were designed &#x2F; co-implemented by Pike &#x2F; Thomson, 2 out of 3 original designers of Go.<p>For those interested, here&#x27;s Thomson&#x27;s paper about Plan9 C compilers: <a href="https:&#x2F;&#x2F;9p.io&#x2F;sys&#x2F;doc&#x2F;compiler.html" rel="nofollow">https:&#x2F;&#x2F;9p.io&#x2F;sys&#x2F;doc&#x2F;compiler.html</a> and <a href="https:&#x2F;&#x2F;doc.cat-v.org&#x2F;bell_labs&#x2F;new_c_compilers&#x2F;" rel="nofollow">https:&#x2F;&#x2F;doc.cat-v.org&#x2F;bell_labs&#x2F;new_c_compilers&#x2F;</a></div><br/><div id="41881241" class="c"><input type="checkbox" id="c-41881241" checked=""/><div class="controls bullet"><span class="by">derefr</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41880900">parent</a><span>|</span><a href="#41883225">next</a><span>|</span><label class="collapse" for="c-41881241">[-]</label><label class="expand" for="c-41881241">[5 more]</label></div><br/><div class="children"><div class="content">I would love to see a deep dive on what features &#x2F; architectural paradigms the Golang runtime shares with Plan9. Has anything like that been written?<p>One that always sticks out to me personally is the use in Go of the term &quot;dial&quot; instead of &quot;connect&quot; for network connection establishment. This is, AFAICT, another Pike+Thompson-ism, as it can be seen previously in the form of the Plan9 dial(3) syscall — <a href="https:&#x2F;&#x2F;9fans.github.io&#x2F;plan9port&#x2F;man&#x2F;man3&#x2F;dial.html" rel="nofollow">https:&#x2F;&#x2F;9fans.github.io&#x2F;plan9port&#x2F;man&#x2F;man3&#x2F;dial.html</a> .<p>---<p>A tangent: I have wondered before whether Pike and Thompson drafted the design for the language that would become Golang long before working at Google, initially to replace C specifically in the context of being the lingua-franca for systems programming <i>on Plan 9</i>. And that, therefore — at least in the designer&#x27;s minds — Golang would have always had Plan9 as its secret &quot;flagship target&quot; that it should have a 1:1 zero-impedance abstraction mapping onto. Even if they never bothered to actually make a Plan9 Golang runtime.<p>You could test this hypothesis by implementing an actual Golang runtime for Plan9†, and then comparing it to the Golang runtimes for other OSes — if Plan9 were the &quot;intended home&quot; for Golang programs, then you&#x27;d expect the Golang runtime to be very &quot;thin&quot; on Plan9.<p>(To put that another way: imagine the Golang runtime as something like WINE — a virtualization layer that implements things that <i>could</i> be syscalls &#x2F; OS library code, in the form of client-side runtime shim code. A &quot;WINE implementation for Windows&quot; would be an extremely thin shim, as every shim call would just point to a 1:1-API-matched piece of OS-provided code. My hypothesis here is that &quot;Golang for Plan9&quot; is the same kind of thing as &quot;WINE for Windows.&quot;)<p>† I was saying this as a thought experiment, not thinking there would actually be a Plan9 implementation of the Golang runtime... but there is! (<a href="https:&#x2F;&#x2F;go.dev&#x2F;wiki&#x2F;Plan9" rel="nofollow">https:&#x2F;&#x2F;go.dev&#x2F;wiki&#x2F;Plan9</a>) So someone can actually check this :)</div><br/><div id="41881641" class="c"><input type="checkbox" id="c-41881641" checked=""/><div class="controls bullet"><span class="by">mbivert</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41881241">parent</a><span>|</span><a href="#41882050">next</a><span>|</span><label class="collapse" for="c-41881641">[-]</label><label class="expand" for="c-41881641">[2 more]</label></div><br/><div class="children"><div class="content">&gt; I would love to see a deep dive on what features &#x2F; architectural paradigms the Golang runtime shares with Plan9. Has anything like that been written?<p>If it has, then it&#x27;s most likely available on <a href="https:&#x2F;&#x2F;cat-v.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;cat-v.org&#x2F;</a>. Even if it hasn&#x27;t, cat-v.org is a great starting point.<p>Besides, close to your line of thought, and assuming you didn&#x27;t knew about this already, Pike &amp; al previously worked on Limbo[0], a &quot;predecessor&quot; of Go, used to wrote Inferno[1], a Plan9-like OS, which could be hosted on arbitrary OSes via a bespoke virtual machine called &quot;Dis&quot;.<p>So there were indeed a few previous &quot;drafts&quot; for Go. I&#x27;d doubt that Go has been designed &quot;for&quot; Plan9 though.<p>[0]: <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Limbo_(programming_language)" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Limbo_(programming_language)</a><p>[1]: <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Inferno_(operating_system)" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Inferno_(operating_system)</a></div><br/><div id="41882143" class="c"><input type="checkbox" id="c-41882143" checked=""/><div class="controls bullet"><span class="by">exitb</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41881641">parent</a><span>|</span><a href="#41882050">next</a><span>|</span><label class="collapse" for="c-41882143">[-]</label><label class="expand" for="c-41882143">[1 more]</label></div><br/><div class="children"><div class="content">There’s also libthread[1] which implements concurrency model similar to goroutines (at least earlier, as they appear to be no longer just cooperatively scheduled?). That manual also mentions Alef and Newsqueak as influential predecessors.<p>[1] <a href="http:&#x2F;&#x2F;man.9front.org&#x2F;2&#x2F;thread" rel="nofollow">http:&#x2F;&#x2F;man.9front.org&#x2F;2&#x2F;thread</a></div><br/></div></div></div></div><div id="41882050" class="c"><input type="checkbox" id="c-41882050" checked=""/><div class="controls bullet"><span class="by">gavindean90</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41881241">parent</a><span>|</span><a href="#41881641">prev</a><span>|</span><a href="#41882466">next</a><span>|</span><label class="collapse" for="c-41882050">[-]</label><label class="expand" for="c-41882050">[1 more]</label></div><br/><div class="children"><div class="content">It sort of was and Rob blogged about it. It is based really on Newsqueak and plan9 C which is very different from Unix C</div><br/></div></div><div id="41882466" class="c"><input type="checkbox" id="c-41882466" checked=""/><div class="controls bullet"><span class="by">pram</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41881241">parent</a><span>|</span><a href="#41882050">prev</a><span>|</span><a href="#41883225">next</a><span>|</span><label class="collapse" for="c-41882466">[-]</label><label class="expand" for="c-41882466">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;d guess dial is probably a Bell Labs-ism</div><br/></div></div></div></div></div></div></div></div><div id="41883225" class="c"><input type="checkbox" id="c-41883225" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41880468">parent</a><span>|</span><a href="#41880634">prev</a><span>|</span><a href="#41883804">next</a><span>|</span><label class="collapse" for="c-41883225">[-]</label><label class="expand" for="c-41883225">[4 more]</label></div><br/><div class="children"><div class="content">The idea isn&#x27;t new, for example Amsterdam Compiler Kit from 1980&#x27;s.</div><br/><div id="41884459" class="c"><input type="checkbox" id="c-41884459" checked=""/><div class="controls bullet"><span class="by">mech422</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41883225">parent</a><span>|</span><a href="#41883804">next</a><span>|</span><label class="collapse" for="c-41884459">[-]</label><label class="expand" for="c-41884459">[3 more]</label></div><br/><div class="children"><div class="content">Ohh...thats a name I haven&#x27;t heard in a while...
along with the purdue compiler construction kit<p>funny how CLang basically blew right by them in terms of option as a &#x27;base&#x27; to build languages on.</div><br/><div id="41886050" class="c"><input type="checkbox" id="c-41886050" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41884459">parent</a><span>|</span><a href="#41885911">next</a><span>|</span><label class="collapse" for="c-41886050">[-]</label><label class="expand" for="c-41886050">[1 more]</label></div><br/><div class="children"><div class="content">It was basically dead by the time LLVM became a thing, in this industry we tend to reinvent a lot, pretending it is something utterly new.<p>Latest example, application servers in WebAssembly.</div><br/></div></div><div id="41885911" class="c"><input type="checkbox" id="c-41885911" checked=""/><div class="controls bullet"><span class="by">arcticbull</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41884459">parent</a><span>|</span><a href="#41886050">prev</a><span>|</span><a href="#41883804">next</a><span>|</span><label class="collapse" for="c-41885911">[-]</label><label class="expand" for="c-41885911">[1 more]</label></div><br/><div class="children"><div class="content">LLVM -- clang is the C language family front-end to LLVM.</div><br/></div></div></div></div></div></div><div id="41883804" class="c"><input type="checkbox" id="c-41883804" checked=""/><div class="controls bullet"><span class="by">sweeter</span><span>|</span><a href="#41880371">root</a><span>|</span><a href="#41880468">parent</a><span>|</span><a href="#41883225">prev</a><span>|</span><a href="#41886094">next</a><span>|</span><label class="collapse" for="c-41883804">[-]</label><label class="expand" for="c-41883804">[1 more]</label></div><br/><div class="children"><div class="content">This is by far one of the best parts of Go. Its all around simple and painless to use. anyone designing a language should study what Go did well and what they didn&#x27;t.</div><br/></div></div></div></div><div id="41884035" class="c"><input type="checkbox" id="c-41884035" checked=""/><div class="controls bullet"><span class="by">Yoric</span><span>|</span><a href="#41880371">parent</a><span>|</span><a href="#41886094">prev</a><span>|</span><a href="#41881654">next</a><span>|</span><label class="collapse" for="c-41884035">[-]</label><label class="expand" for="c-41884035">[1 more]</label></div><br/><div class="children"><div class="content">FWIW, that&#x27;s also more or less what SpiderMonkey has been doing for ~25 years (and I presume other JavaScript VMs).</div><br/></div></div></div></div><div id="41880902" class="c"><input type="checkbox" id="c-41880902" checked=""/><div class="controls bullet"><span class="by">umvi</span><span>|</span><a href="#41880371">prev</a><span>|</span><a href="#41885807">next</a><span>|</span><label class="collapse" for="c-41880902">[-]</label><label class="expand" for="c-41880902">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Basically, I wanted a set of functions that would allow me to perform simd operations on slices.<p>How is this actually used though? I searched the whole article, and no where are any operations being performed on slices.<p>Edit: I found what I was looking for in the linked docs: <a href="https:&#x2F;&#x2F;pkg.go.dev&#x2F;github.com&#x2F;pehringer&#x2F;simd#pkg-index" rel="nofollow">https:&#x2F;&#x2F;pkg.go.dev&#x2F;github.com&#x2F;pehringer&#x2F;simd#pkg-index</a><p>So basically if you have 2 slices you want to add together, instead of a for loop you could do it in parallel with simd using:<p><pre><code>    simd.AddInt32(slice1, slice2, result)</code></pre></div><br/><div id="41881079" class="c"><input type="checkbox" id="c-41881079" checked=""/><div class="controls bullet"><span class="by">pehringer</span><span>|</span><a href="#41880902">parent</a><span>|</span><a href="#41885807">next</a><span>|</span><label class="collapse" for="c-41881079">[-]</label><label class="expand" for="c-41881079">[1 more]</label></div><br/><div class="children"><div class="content">I should have added some examples in the docs &#x2F; repo :( checkout the benchmark code at the bottom of this file for an example:
<a href="https:&#x2F;&#x2F;github.com&#x2F;pehringer&#x2F;simd&#x2F;blob&#x2F;main&#x2F;simd_test.go">https:&#x2F;&#x2F;github.com&#x2F;pehringer&#x2F;simd&#x2F;blob&#x2F;main&#x2F;simd_test.go</a></div><br/></div></div></div></div><div id="41885807" class="c"><input type="checkbox" id="c-41885807" checked=""/><div class="controls bullet"><span class="by">crtc</span><span>|</span><a href="#41880902">prev</a><span>|</span><a href="#41883941">next</a><span>|</span><label class="collapse" for="c-41885807">[-]</label><label class="expand" for="c-41885807">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Plan_9_from_Bell_Labs" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Plan_9_from_Bell_Labs</a> since the author seems to be confused in this regard.</div><br/></div></div><div id="41883941" class="c"><input type="checkbox" id="c-41883941" checked=""/><div class="controls bullet"><span class="by">kristianp</span><span>|</span><a href="#41885807">prev</a><span>|</span><a href="#41880231">next</a><span>|</span><label class="collapse" for="c-41883941">[-]</label><label class="expand" for="c-41883941">[2 more]</label></div><br/><div class="children"><div class="content">Relevant to which processors go supports, is this section (1).  Base x64 support includes SSE and SSE2.  I don&#x27;t know if the go compiler produces it, though. Unlike extremely complex compilers like gcc, where performance is the top priority, the go compiler favours simplicity in a Wirthian(2) fashion favouring a simple, fast compiler.<p>(1) <a href="https:&#x2F;&#x2F;go.dev&#x2F;wiki&#x2F;MinimumRequirements#amd64" rel="nofollow">https:&#x2F;&#x2F;go.dev&#x2F;wiki&#x2F;MinimumRequirements#amd64</a><p>(2) <a href="https:&#x2F;&#x2F;irreal.org&#x2F;blog&#x2F;?p=7075" rel="nofollow">https:&#x2F;&#x2F;irreal.org&#x2F;blog&#x2F;?p=7075</a><p><a href="https:&#x2F;&#x2F;smartgo.blog&#x2F;2024&#x2F;01&#x2F;06&#x2F;niklaus-wirth&#x2F;" rel="nofollow">https:&#x2F;&#x2F;smartgo.blog&#x2F;2024&#x2F;01&#x2F;06&#x2F;niklaus-wirth&#x2F;</a></div><br/><div id="41885863" class="c"><input type="checkbox" id="c-41885863" checked=""/><div class="controls bullet"><span class="by">physicsguy</span><span>|</span><a href="#41883941">parent</a><span>|</span><a href="#41880231">next</a><span>|</span><label class="collapse" for="c-41885863">[-]</label><label class="expand" for="c-41885863">[1 more]</label></div><br/><div class="children"><div class="content">I think in practice every chip since about 2008 or so has supported SSE4.1</div><br/></div></div></div></div><div id="41880231" class="c"><input type="checkbox" id="c-41880231" checked=""/><div class="controls bullet"><span class="by">lexh</span><span>|</span><a href="#41883941">prev</a><span>|</span><a href="#41884353">next</a><span>|</span><label class="collapse" for="c-41880231">[-]</label><label class="expand" for="c-41880231">[4 more]</label></div><br/><div class="children"><div class="content">A bit over my head, but I enjoyed the way the writing brings us along for the ride.<p>This can’t be the first pass someone has made at something like this, right? There must be literal dozens of SIMD thirsty Gophers around. Would a more common pattern be to use CGO?</div><br/><div id="41881167" class="c"><input type="checkbox" id="c-41881167" checked=""/><div class="controls bullet"><span class="by">chrchang523</span><span>|</span><a href="#41880231">parent</a><span>|</span><a href="#41881773">next</a><span>|</span><label class="collapse" for="c-41881167">[-]</label><label class="expand" for="c-41881167">[1 more]</label></div><br/><div class="children"><div class="content">The problem with cgo is the high function-call overhead; you only want to use it for fairly big chunks of work.  Calling an assembly function from Go is a lot cheaper.<p><a href="https:&#x2F;&#x2F;pkg.go.dev&#x2F;github.com&#x2F;grailbio&#x2F;base&#x2F;simd" rel="nofollow">https:&#x2F;&#x2F;pkg.go.dev&#x2F;github.com&#x2F;grailbio&#x2F;base&#x2F;simd</a> has some work I’ve done in this vein.</div><br/></div></div><div id="41881773" class="c"><input type="checkbox" id="c-41881773" checked=""/><div class="controls bullet"><span class="by">Andoryuuta</span><span>|</span><a href="#41880231">parent</a><span>|</span><a href="#41881167">prev</a><span>|</span><a href="#41881085">next</a><span>|</span><label class="collapse" for="c-41881773">[-]</label><label class="expand" for="c-41881773">[1 more]</label></div><br/><div class="children"><div class="content">I think people certainly have been trying for a while. In fact, I recall being on a (Skype?) call with my brother almost a decade ago while he was trying to write an SIMD library in Go. If I remember correctly, at that time, a bunch of the AVX instructions weren&#x27;t even encodable in Go&#x27;s Plan9 assembler - so we had to manually encode them as bytes [0].<p>The most complete library I&#x27;ve seen (though admittedly never used) uses CGO _partially_, with a neat hack to avoid the overhead that it comes with [1].<p>[0]: <a href="https:&#x2F;&#x2F;github.com&#x2F;slimsag&#x2F;rand&#x2F;blob&#x2F;f1e8d464c0021a391d5cd646d1565a71c7fd80cc&#x2F;simd&#x2F;vec32.s#L6-L8">https:&#x2F;&#x2F;github.com&#x2F;slimsag&#x2F;rand&#x2F;blob&#x2F;f1e8d464c0021a391d5cd64...</a><p>[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;alivanz&#x2F;go-simd&#x2F;">https:&#x2F;&#x2F;github.com&#x2F;alivanz&#x2F;go-simd&#x2F;</a></div><br/></div></div><div id="41881085" class="c"><input type="checkbox" id="c-41881085" checked=""/><div class="controls bullet"><span class="by">dpifke</span><span>|</span><a href="#41880231">parent</a><span>|</span><a href="#41881773">prev</a><span>|</span><a href="#41884353">next</a><span>|</span><label class="collapse" for="c-41881085">[-]</label><label class="expand" for="c-41881085">[1 more]</label></div><br/><div class="children"><div class="content">(Rejected) proposal to add something like this to the standard library gives some context: <a href="https:&#x2F;&#x2F;github.com&#x2F;golang&#x2F;go&#x2F;issues&#x2F;53171">https:&#x2F;&#x2F;github.com&#x2F;golang&#x2F;go&#x2F;issues&#x2F;53171</a></div><br/></div></div></div></div><div id="41884353" class="c"><input type="checkbox" id="c-41884353" checked=""/><div class="controls bullet"><span class="by">imiric</span><span>|</span><a href="#41880231">prev</a><span>|</span><a href="#41886249">next</a><span>|</span><label class="collapse" for="c-41884353">[-]</label><label class="expand" for="c-41884353">[2 more]</label></div><br/><div class="children"><div class="content">This is neat, and it&#x27;s great that Go provides such simple access to low-level primitives.<p>But for the particular case of SIMD operations, wouldn&#x27;t it make more sense to use the GPU instead of the CPU? GPUs excel at parallelism and matrix operations, so the performance difference would be even greater. I suppose the lack of well maintained GPU packages and community around it don&#x27;t make Go particularly well suited for this.</div><br/><div id="41885841" class="c"><input type="checkbox" id="c-41885841" checked=""/><div class="controls bullet"><span class="by">physicles</span><span>|</span><a href="#41884353">parent</a><span>|</span><a href="#41886249">next</a><span>|</span><label class="collapse" for="c-41885841">[-]</label><label class="expand" for="c-41885841">[1 more]</label></div><br/><div class="children"><div class="content">For a tool you run locally, a GPU could be an easy win. But most Go code is probably run on cloud servers. Adding requirements to your runtime environment isn&#x27;t something to do lightly.<p>- SIMD: up to 400% speed boost, most likely on the same VMs you were already using<p>- GPU: orders of magnitude faster, but now you need to make sure your cloud servers have compatible GPUs attached<p>If you really do need crazy performance then it&#x27;s worth it. If you&#x27;re already stable and right-scaled and SIMD allows you to reduce your VM spend by 25%, then you probably just take the savings and move on.</div><br/></div></div></div></div><div id="41886249" class="c"><input type="checkbox" id="c-41886249" checked=""/><div class="controls bullet"><span class="by">sfc32</span><span>|</span><a href="#41884353">prev</a><span>|</span><a href="#41881696">next</a><span>|</span><label class="collapse" for="c-41886249">[-]</label><label class="expand" for="c-41886249">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Performace And The Future<p>There&#x27;s a typo on &quot;Performance&quot;</div><br/></div></div><div id="41881696" class="c"><input type="checkbox" id="c-41881696" checked=""/><div class="controls bullet"><span class="by">pixelesque</span><span>|</span><a href="#41886249">prev</a><span>|</span><a href="#41880346">next</a><span>|</span><label class="collapse" for="c-41881696">[-]</label><label class="expand" for="c-41881696">[2 more]</label></div><br/><div class="children"><div class="content">Very minor nit, doesn&#x27;t change anything about the article otherwise, but the SIMD acronym stands for *Single* Instruction, Multiple Data conventionally.</div><br/></div></div><div id="41880346" class="c"><input type="checkbox" id="c-41880346" checked=""/><div class="controls bullet"><span class="by">pehringer</span><span>|</span><a href="#41881696">prev</a><span>|</span><a href="#41880773">next</a><span>|</span><label class="collapse" for="c-41880346">[-]</label><label class="expand" for="c-41880346">[2 more]</label></div><br/><div class="children"><div class="content">If you want to see some Plan9 in the std library check out the math package!<p><a href="https:&#x2F;&#x2F;github.com&#x2F;golang&#x2F;go&#x2F;tree&#x2F;master&#x2F;src&#x2F;math">https:&#x2F;&#x2F;github.com&#x2F;golang&#x2F;go&#x2F;tree&#x2F;master&#x2F;src&#x2F;math</a></div><br/><div id="41883213" class="c"><input type="checkbox" id="c-41883213" checked=""/><div class="controls bullet"><span class="by">sph</span><span>|</span><a href="#41880346">parent</a><span>|</span><a href="#41880773">next</a><span>|</span><label class="collapse" for="c-41883213">[-]</label><label class="expand" for="c-41883213">[1 more]</label></div><br/><div class="children"><div class="content">Plan 9 has nothing to do with assembly language nor the variant Go uses. See other comments in this thread.<p>It would be like calling the AT&amp;T style of assembly used by GNU binutils a &quot;Linux&quot;</div><br/></div></div></div></div><div id="41880773" class="c"><input type="checkbox" id="c-41880773" checked=""/><div class="controls bullet"><span class="by">spiffistan</span><span>|</span><a href="#41880346">prev</a><span>|</span><a href="#41883597">next</a><span>|</span><label class="collapse" for="c-41880773">[-]</label><label class="expand" for="c-41880773">[3 more]</label></div><br/><div class="children"><div class="content">There was a controversy when Go came out about the naming due to another language also being called Go, and the top voted alternative name was Plan9, and as an homage they may have used that internally instead.</div><br/><div id="41881199" class="c"><input type="checkbox" id="c-41881199" checked=""/><div class="controls bullet"><span class="by">stonogo</span><span>|</span><a href="#41880773">parent</a><span>|</span><a href="#41883597">next</a><span>|</span><label class="collapse" for="c-41881199">[-]</label><label class="expand" for="c-41881199">[2 more]</label></div><br/><div class="children"><div class="content">The top voted alternative was &quot;Issue 9&quot; which served as a reference to Plan 9 and happened to be the actual issue number in the Go project on Google Code opened by the guy who&#x27;s programming language (named &quot;Go!&quot;) was already out there.</div><br/><div id="41881352" class="c"><input type="checkbox" id="c-41881352" checked=""/><div class="controls bullet"><span class="by">spiffistan</span><span>|</span><a href="#41880773">root</a><span>|</span><a href="#41881199">parent</a><span>|</span><a href="#41883597">next</a><span>|</span><label class="collapse" for="c-41881352">[-]</label><label class="expand" for="c-41881352">[1 more]</label></div><br/><div class="children"><div class="content">You&#x27;re right, my bad</div><br/></div></div></div></div></div></div><div id="41883597" class="c"><input type="checkbox" id="c-41883597" checked=""/><div class="controls bullet"><span class="by">cmovq</span><span>|</span><a href="#41880773">prev</a><span>|</span><a href="#41879970">next</a><span>|</span><label class="collapse" for="c-41883597">[-]</label><label class="expand" for="c-41883597">[2 more]</label></div><br/><div class="children"><div class="content">&gt; However, (as far as I can tell) Go’s compiler does not utilizes simd<p>Can someone confirm this? Not even for straightforward copies?</div><br/><div id="41884747" class="c"><input type="checkbox" id="c-41884747" checked=""/><div class="controls bullet"><span class="by">znkr</span><span>|</span><a href="#41883597">parent</a><span>|</span><a href="#41879970">next</a><span>|</span><label class="collapse" for="c-41884747">[-]</label><label class="expand" for="c-41884747">[1 more]</label></div><br/><div class="children"><div class="content">Go has a couple of SIMD uses. Copies is one of them.</div><br/></div></div></div></div><div id="41880245" class="c"><input type="checkbox" id="c-41880245" checked=""/><div class="controls bullet"><span class="by">tempfile</span><span>|</span><a href="#41879970">prev</a><span>|</span><a href="#41880292">next</a><span>|</span><label class="collapse" for="c-41880245">[-]</label><label class="expand" for="c-41880245">[7 more]</label></div><br/><div class="children"><div class="content">Is Plan9 in this context related at all to Bell Labs&#x27;s Plan9? Seems too similar to be coincidence.</div><br/><div id="41880449" class="c"><input type="checkbox" id="c-41880449" checked=""/><div class="controls bullet"><span class="by">201984</span><span>|</span><a href="#41880245">parent</a><span>|</span><a href="#41880325">next</a><span>|</span><label class="collapse" for="c-41880449">[-]</label><label class="expand" for="c-41880449">[1 more]</label></div><br/><div class="children"><div class="content">From <a href="https:&#x2F;&#x2F;go.dev&#x2F;doc&#x2F;asm" rel="nofollow">https:&#x2F;&#x2F;go.dev&#x2F;doc&#x2F;asm</a>:<p>&gt; The assembler is based on the input style of the Plan 9 assemblers, which is documented in detail elsewhere. If you plan to write assembly language, you should read that document although much of it is Plan 9-specific.<p>That first sentence links to <a href="https:&#x2F;&#x2F;9p.io&#x2F;sys&#x2F;doc&#x2F;asm.html" rel="nofollow">https:&#x2F;&#x2F;9p.io&#x2F;sys&#x2F;doc&#x2F;asm.html</a>. So yes, definitely not a coincidence.</div><br/></div></div><div id="41880325" class="c"><input type="checkbox" id="c-41880325" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#41880245">parent</a><span>|</span><a href="#41880449">prev</a><span>|</span><a href="#41880288">next</a><span>|</span><label class="collapse" for="c-41880325">[-]</label><label class="expand" for="c-41880325">[1 more]</label></div><br/><div class="children"><div class="content">Go is the evolution of Limbo from Inferno, which was designed based on the failure of Alef on Plan 9, combined with a minor set of Oberon-2 influences.</div><br/></div></div><div id="41880288" class="c"><input type="checkbox" id="c-41880288" checked=""/><div class="controls bullet"><span class="by">kibwen</span><span>|</span><a href="#41880245">parent</a><span>|</span><a href="#41880325">prev</a><span>|</span><a href="#41880281">next</a><span>|</span><label class="collapse" for="c-41880288">[-]</label><label class="expand" for="c-41880288">[1 more]</label></div><br/><div class="children"><div class="content">Go itself is from the same people who worked on Plan9 (which is why I find the choice of name in the OP particularly confusing).</div><br/></div></div><div id="41880281" class="c"><input type="checkbox" id="c-41880281" checked=""/><div class="controls bullet"><span class="by">saclark11</span><span>|</span><a href="#41880245">parent</a><span>|</span><a href="#41880288">prev</a><span>|</span><a href="#41880297">next</a><span>|</span><label class="collapse" for="c-41880281">[-]</label><label class="expand" for="c-41880281">[1 more]</label></div><br/><div class="children"><div class="content">Yes. Two of Go&#x27;s creators, Rob Pike and Ken Thompson, were also authors of Plan 9 at Bell Labs.</div><br/></div></div><div id="41880266" class="c"><input type="checkbox" id="c-41880266" checked=""/><div class="controls bullet"><span class="by">wrs</span><span>|</span><a href="#41880245">parent</a><span>|</span><a href="#41880297">prev</a><span>|</span><a href="#41880292">next</a><span>|</span><label class="collapse" for="c-41880266">[-]</label><label class="expand" for="c-41880266">[1 more]</label></div><br/><div class="children"><div class="content">Yes, some of the same people created Go.</div><br/></div></div></div></div><div id="41880292" class="c"><input type="checkbox" id="c-41880292" checked=""/><div class="controls bullet"><span class="by">nzach</span><span>|</span><a href="#41880245">prev</a><span>|</span><a href="#41886208">next</a><span>|</span><label class="collapse" for="c-41880292">[-]</label><label class="expand" for="c-41880292">[2 more]</label></div><br/><div class="children"><div class="content">&gt; I am not sure why the Go team went down this route. Maybe it simplifies the compiler by having this bespoke assembly format?<p>This was to allow for easy cross-compilation.<p>You should probably clarify that you are talking about &#x27;golang plan9 assembly format&#x27;, and not about the plan9 OS. This confused me a lot. (<a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Plan_9_from_Bell_Labs" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Plan_9_from_Bell_Labs</a>)<p>I didn&#x27;t know you could easily hand write &#x27;golang assembly&#x27; for your functions. This seems really useful in some cases.<p>But I do wonder, why the std lib doesn&#x27;t offer this ?<p>EDIT: I found the anwser: <a href="https:&#x2F;&#x2F;github.com&#x2F;golang&#x2F;go&#x2F;issues&#x2F;53171">https:&#x2F;&#x2F;github.com&#x2F;golang&#x2F;go&#x2F;issues&#x2F;53171</a><p>Here is a good explanation provided by Ian Lance Taylor:<p>&gt; This proposal is focused on code generation rather than language, and the details of how it changes the language are difficult to understand. Go is intended to be a simple language that it is easy to understand. Introducing complex semantics for performance reasons is not a direction that the language is going to take.</div><br/></div></div><div id="41886208" class="c"><input type="checkbox" id="c-41886208" checked=""/><div class="controls bullet"><span class="by">indulona</span><span>|</span><a href="#41880292">prev</a><span>|</span><a href="#41880278">next</a><span>|</span><label class="collapse" for="c-41886208">[-]</label><label class="expand" for="c-41886208">[1 more]</label></div><br/><div class="children"><div class="content">yet another example of Go std performance being stuck in 2010s.</div><br/></div></div><div id="41880278" class="c"><input type="checkbox" id="c-41880278" checked=""/><div class="controls bullet"><span class="by">rob74</span><span>|</span><a href="#41886208">prev</a><span>|</span><a href="#41880175">next</a><span>|</span><label class="collapse" for="c-41880278">[-]</label><label class="expand" for="c-41880278">[15 more]</label></div><br/><div class="children"><div class="content">In case it&#x27;s not obvious, the &quot;Plan 9&quot; in the Go Assembler&#x27;s name comes from <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Plan_9_from_Bell_Labs" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Plan_9_from_Bell_Labs</a>, and the reason for that is of course that two of the &quot;Go founders&quot; (Rob Pike and Ken Thompson) are Bell Labs alumni. Some more background on the Go assembler: <a href="https:&#x2F;&#x2F;go.dev&#x2F;doc&#x2F;asm" rel="nofollow">https:&#x2F;&#x2F;go.dev&#x2F;doc&#x2F;asm</a></div><br/><div id="41880650" class="c"><input type="checkbox" id="c-41880650" checked=""/><div class="controls bullet"><span class="by">p_l</span><span>|</span><a href="#41880278">parent</a><span>|</span><a href="#41880349">next</a><span>|</span><label class="collapse" for="c-41880650">[-]</label><label class="expand" for="c-41880650">[1 more]</label></div><br/><div class="children"><div class="content">The reason for that is not just being alumni, but also that Go implementation started on top of Plan 9&#x27;s compiler infrastructure that was later rewritten in pure Go</div><br/></div></div><div id="41880349" class="c"><input type="checkbox" id="c-41880349" checked=""/><div class="controls bullet"><span class="by">colechristensen</span><span>|</span><a href="#41880278">parent</a><span>|</span><a href="#41880650">prev</a><span>|</span><a href="#41881656">next</a><span>|</span><label class="collapse" for="c-41880349">[-]</label><label class="expand" for="c-41880349">[12 more]</label></div><br/><div class="children"><div class="content">The same people used the same name for two computer related projects.<p>That&#x27;s certainly an ... interesting choice.</div><br/><div id="41880498" class="c"><input type="checkbox" id="c-41880498" checked=""/><div class="controls bullet"><span class="by">lloeki</span><span>|</span><a href="#41880278">root</a><span>|</span><a href="#41880349">parent</a><span>|</span><a href="#41880376">next</a><span>|</span><label class="collapse" for="c-41880498">[-]</label><label class="expand" for="c-41880498">[9 more]</label></div><br/><div class="children"><div class="content">It is, essentially, the same project. Plan9 is the umbrella term for the whole operating system.<p><a href="https:&#x2F;&#x2F;plan9.io&#x2F;sys&#x2F;doc&#x2F;comp.html" rel="nofollow">https:&#x2F;&#x2F;plan9.io&#x2F;sys&#x2F;doc&#x2F;comp.html</a><p>IIRC before Go was self compiling, it was compiled using 9c, and its architecture inherits from 9c.<p>EDIT: some nearby threads got the details better!</div><br/><div id="41880609" class="c"><input type="checkbox" id="c-41880609" checked=""/><div class="controls bullet"><span class="by">floren</span><span>|</span><a href="#41880278">root</a><span>|</span><a href="#41880498">parent</a><span>|</span><a href="#41880619">next</a><span>|</span><label class="collapse" for="c-41880609">[-]</label><label class="expand" for="c-41880609">[3 more]</label></div><br/><div class="children"><div class="content">&gt; IIRC before Go was self compiling, it was compiled using 9c, and its architecture inherits from 9c.<p>Back in those days I actually found that, with a few small tweaks, I could compile the Plan 9 operating system using Go&#x27;s C suite. We didn&#x27;t pursue it further but this was one of the options we looked into for cross-compiling Plan 9 from other operating systems.</div><br/><div id="41881173" class="c"><input type="checkbox" id="c-41881173" checked=""/><div class="controls bullet"><span class="by">stonogo</span><span>|</span><a href="#41880278">root</a><span>|</span><a href="#41880609">parent</a><span>|</span><a href="#41880619">next</a><span>|</span><label class="collapse" for="c-41881173">[-]</label><label class="expand" for="c-41881173">[2 more]</label></div><br/><div class="children"><div class="content">Since to Go C suite was ported Plan 9 compilers, I&#x27;m not sure why this would be a surprise.  Since I&#x27;m obviously missing something would you share your thoughts on what challenges you expected?</div><br/><div id="41881498" class="c"><input type="checkbox" id="c-41881498" checked=""/><div class="controls bullet"><span class="by">floren</span><span>|</span><a href="#41880278">root</a><span>|</span><a href="#41881173">parent</a><span>|</span><a href="#41880619">next</a><span>|</span><label class="collapse" for="c-41881498">[-]</label><label class="expand" for="c-41881498">[1 more]</label></div><br/><div class="children"><div class="content">It wasn&#x27;t any surprise, nor did I intend to imply it was surprising, just relaying an anecdote. There were a few differences that required small tweaks to the source, but we got the Plan 9 kernel compiled with the Go C compilers in a day.</div><br/></div></div></div></div></div></div><div id="41880619" class="c"><input type="checkbox" id="c-41880619" checked=""/><div class="controls bullet"><span class="by">colechristensen</span><span>|</span><a href="#41880278">root</a><span>|</span><a href="#41880498">parent</a><span>|</span><a href="#41880609">prev</a><span>|</span><a href="#41880376">next</a><span>|</span><label class="collapse" for="c-41880619">[-]</label><label class="expand" for="c-41880619">[5 more]</label></div><br/><div class="children"><div class="content">Interesting trivia about the connection to plan9 the operating system.<p>&gt;Go uses its own internal assembly language called Plan9.<p>Plan9 is the name of the OS.  You wouldn&#x27;t name a programming language &quot;Linux&quot;, even if Linus created it and it was super related or not at all related.</div><br/><div id="41880972" class="c"><input type="checkbox" id="c-41880972" checked=""/><div class="controls bullet"><span class="by">seryoiupfurds</span><span>|</span><a href="#41880278">root</a><span>|</span><a href="#41880619">parent</a><span>|</span><a href="#41880376">next</a><span>|</span><label class="collapse" for="c-41880972">[-]</label><label class="expand" for="c-41880972">[4 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not &quot;plan9 assembly language&quot; as in &quot;the assembly language named plan9&quot;.  Read it as &quot;the otherwise unnamed custom assembly language used in the plan9 operating system&quot;.<p>The article simply misspoke by saying that the assembly language is &quot;called plan9&quot;.</div><br/><div id="41882052" class="c"><input type="checkbox" id="c-41882052" checked=""/><div class="controls bullet"><span class="by">debugnik</span><span>|</span><a href="#41880278">root</a><span>|</span><a href="#41880972">parent</a><span>|</span><a href="#41880376">next</a><span>|</span><label class="collapse" for="c-41882052">[-]</label><label class="expand" for="c-41882052">[3 more]</label></div><br/><div class="children"><div class="content">No way, the article consistently refers to the assembler syntax as &quot;Plan9&quot; throughout the text and title and they talk about &quot;x86 Plan9&quot; and &quot;arm Plan9&quot;.<p>Considering there is no introduction at all to this beyond &quot;I discovered it&#x27;s called Plan9&quot;, I&#x27;m assuming the author really thinks this is a language widely named &quot;Plan9&quot;.</div><br/><div id="41882147" class="c"><input type="checkbox" id="c-41882147" checked=""/><div class="controls bullet"><span class="by">KerrAvon</span><span>|</span><a href="#41880278">root</a><span>|</span><a href="#41882052">parent</a><span>|</span><a href="#41880376">next</a><span>|</span><label class="collapse" for="c-41882147">[-]</label><label class="expand" for="c-41882147">[2 more]</label></div><br/><div class="children"><div class="content">They seem to be badly mistaken</div><br/><div id="41883226" class="c"><input type="checkbox" id="c-41883226" checked=""/><div class="controls bullet"><span class="by">sph</span><span>|</span><a href="#41880278">root</a><span>|</span><a href="#41882147">parent</a><span>|</span><a href="#41880376">next</a><span>|</span><label class="collapse" for="c-41883226">[-]</label><label class="expand" for="c-41883226">[1 more]</label></div><br/><div class="children"><div class="content">That seems to be the case: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41880346">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41880346</a></div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="41880376" class="c"><input type="checkbox" id="c-41880376" checked=""/><div class="controls bullet"><span class="by">lagniappe</span><span>|</span><a href="#41880278">root</a><span>|</span><a href="#41880349">parent</a><span>|</span><a href="#41880498">prev</a><span>|</span><a href="#41883038">next</a><span>|</span><label class="collapse" for="c-41880376">[-]</label><label class="expand" for="c-41880376">[1 more]</label></div><br/><div class="children"><div class="content">Definitely don&#x27;t look into Nix then</div><br/></div></div><div id="41883038" class="c"><input type="checkbox" id="c-41883038" checked=""/><div class="controls bullet"><span class="by">colechristensen</span><span>|</span><a href="#41880278">root</a><span>|</span><a href="#41880349">parent</a><span>|</span><a href="#41880376">prev</a><span>|</span><a href="#41881656">next</a><span>|</span><label class="collapse" for="c-41883038">[-]</label><label class="expand" for="c-41883038">[1 more]</label></div><br/><div class="children"><div class="content">EDIT: it seems the author is just mistaken, the Go assembler is just referred to by everyone else as &quot;Go Assembler&quot; and nothing to do with plan9, other than the various connections to its origin.</div><br/></div></div></div></div></div></div><div id="41880175" class="c"><input type="checkbox" id="c-41880175" checked=""/><div class="controls bullet"><span class="by">pphysch</span><span>|</span><a href="#41880278">prev</a><span>|</span><label class="collapse" for="c-41880175">[-]</label><label class="expand" for="c-41880175">[3 more]</label></div><br/><div class="children"><div class="content">This is neat. Why do you think this is not already part of the standard library?</div><br/><div id="41881109" class="c"><input type="checkbox" id="c-41881109" checked=""/><div class="controls bullet"><span class="by">twoodfin</span><span>|</span><a href="#41880175">parent</a><span>|</span><a href="#41880358">next</a><span>|</span><label class="collapse" for="c-41881109">[-]</label><label class="expand" for="c-41881109">[1 more]</label></div><br/><div class="children"><div class="content">I think the more interesting architecture &#x2F; priorities question is why the Go compiler can&#x27;t yet(?) auto-vectorize?</div><br/></div></div><div id="41880358" class="c"><input type="checkbox" id="c-41880358" checked=""/><div class="controls bullet"><span class="by">pehringer</span><span>|</span><a href="#41880175">parent</a><span>|</span><a href="#41881109">prev</a><span>|</span><label class="collapse" for="c-41880358">[-]</label><label class="expand" for="c-41880358">[1 more]</label></div><br/><div class="children"><div class="content">I think the Go std lib is focused on portability over raw performance</div><br/></div></div></div></div></div></div></div></div></div></body></html>