<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1706778072749" as="style"/><link rel="stylesheet" href="styles.css?v=1706778072749"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://slack.engineering/executing-cron-scripts-reliably-at-scale/">Executing Cron Scripts Reliably at Scale</a> <span class="domain">(<a href="https://slack.engineering">slack.engineering</a>)</span></div><div class="subtext"><span>kiyanwang</span> | <span>74 comments</span></div><br/><div><div id="39213873" class="c"><input type="checkbox" id="c-39213873" checked=""/><div class="controls bullet"><span class="by">roydivision</span><span>|</span><a href="#39210825">next</a><span>|</span><label class="collapse" for="c-39213873">[-]</label><label class="expand" for="c-39213873">[1 more]</label></div><br/><div class="children"><div class="content">Reading this I realise an unconscious rule I&#x27;ve followed for years - Cron is for running jobs pertaining to that box, and that box alone. It _can_ be used to schedule anything, but that doesn&#x27;t mean it should, especially business logic.<p>&quot;I wrote a CRM system in ksh script, it works great!&quot;</div><br/></div></div><div id="39210825" class="c"><input type="checkbox" id="c-39210825" checked=""/><div class="controls bullet"><span class="by">xyzzy123</span><span>|</span><a href="#39213873">prev</a><span>|</span><a href="#39212352">next</a><span>|</span><label class="collapse" for="c-39210825">[-]</label><label class="expand" for="c-39210825">[15 more]</label></div><br/><div class="children"><div class="content">Interesting they went straight from &quot;1 box running shell scripts with flock&quot; to &quot;mega custom thing&quot; w&#x2F;out going thru something like kube crob jobs or an off-the-shelf scheduler in between.<p>I find jumps like this hint at &quot;political stiction&quot;,  sometimes it&#x27;s hard to get permission to do incremental updates to things, you have to wait until the smoke from the burning tires is unmissable, then get big political consensus and a &quot;visible project&quot; to allocate budget and time for what would otherwise be unsexy maintenance work.</div><br/><div id="39213563" class="c"><input type="checkbox" id="c-39213563" checked=""/><div class="controls bullet"><span class="by">josephg</span><span>|</span><a href="#39210825">parent</a><span>|</span><a href="#39212240">next</a><span>|</span><label class="collapse" for="c-39213563">[-]</label><label class="expand" for="c-39213563">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Interesting they went straight from &quot;1 box running shell scripts with flock&quot; to &quot;mega custom thing&quot;<p>I’ve ended up building a custom job scheduler at a couple companies I’ve worked at. It’s a fun little problem. I don’t think it’s fair to characterise the problem as a “mega” thing at all - you can build a custom task scheduler on top of a database or Kafka that’ll be way more reliable than cron in a few hundred lines of code, in just about any language.<p>Are those lines of code wasted? Maybe. But the trade off is that you’re the world expert in that little thing you made. It’ll be easy to connect it to your dashboards for observability, and add the exact set of features you need in your org.<p>I don’t think everyone should roll their own task runner. But it’s not the mega engineering problem you’re imagining. A week or two of one engineer’s time is peanuts at a company like slack.</div><br/></div></div><div id="39212240" class="c"><input type="checkbox" id="c-39212240" checked=""/><div class="controls bullet"><span class="by">spiffytech</span><span>|</span><a href="#39210825">parent</a><span>|</span><a href="#39213563">prev</a><span>|</span><a href="#39211225">next</a><span>|</span><label class="collapse" for="c-39212240">[-]</label><label class="expand" for="c-39212240">[3 more]</label></div><br/><div class="children"><div class="content">This line from the k8s CronJob docs has always made me nervous about adopting them:<p>&gt; The scheduling is approximate because there are certain circumstances where two Jobs might be created, or no Job might be created. Kubernetes tries to avoid those situations, but does not completely prevent them.</div><br/><div id="39212363" class="c"><input type="checkbox" id="c-39212363" checked=""/><div class="controls bullet"><span class="by">ants_everywhere</span><span>|</span><a href="#39210825">root</a><span>|</span><a href="#39212240">parent</a><span>|</span><a href="#39211225">next</a><span>|</span><label class="collapse" for="c-39212363">[-]</label><label class="expand" for="c-39212363">[2 more]</label></div><br/><div class="children"><div class="content">This Stack Overflow [0] answer makes it sound like that&#x27;s just stating a triviality about distributed systems.<p>For example, if the task that runs your cron is down when your cron is supposed to run, then it won&#x27;t run.<p>The slack blog says they did some tinkering like preventing nodes from going down at the top of a minute because that&#x27;s when they think cron jobs are most likely to run. But at scale things are going to break when they break, and you have to weigh the pros and cons of designing the jobs to be robust to failure vs trying to organize failures to correspond to the needs of your jobs.<p>So I think there is space for solutions that make different tradeoffs. But it does seem vastly easier to tune an existing solution that someone else is maintaining than to build your own solution on top of Kafka.<p>[0] <a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;47691278&#x2F;why-in-kubernetes-cron-job-two-jobs-might-be-created-or-no-job-might-be-created" rel="nofollow">https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;47691278&#x2F;why-in-kubernet...</a></div><br/><div id="39213603" class="c"><input type="checkbox" id="c-39213603" checked=""/><div class="controls bullet"><span class="by">josephg</span><span>|</span><a href="#39210825">root</a><span>|</span><a href="#39212363">parent</a><span>|</span><a href="#39211225">next</a><span>|</span><label class="collapse" for="c-39213603">[-]</label><label class="expand" for="c-39213603">[1 more]</label></div><br/><div class="children"><div class="content">Most distributed systems at least promise they do something at least once or at most once. You can often achieve exactly once in practice with a combination of idempotent APIs and a shared database.<p>For a task runner, there are a lot of different behaviours you might want if the system crashes. Maybe the runner should “catch up” after coming back online. That’s easy enough to achieve if you move away from cron and track which tasks have been run in a small data store somewhere.</div><br/></div></div></div></div></div></div><div id="39211225" class="c"><input type="checkbox" id="c-39211225" checked=""/><div class="controls bullet"><span class="by">lijok</span><span>|</span><a href="#39210825">parent</a><span>|</span><a href="#39212240">prev</a><span>|</span><a href="#39211283">next</a><span>|</span><label class="collapse" for="c-39211225">[-]</label><label class="expand" for="c-39211225">[3 more]</label></div><br/><div class="children"><div class="content">Is that not what HN at large keeps on talking about doing more - stretch the thing you use to its absolute limits before you upgrade</div><br/><div id="39211394" class="c"><input type="checkbox" id="c-39211394" checked=""/><div class="controls bullet"><span class="by">xyzzy123</span><span>|</span><a href="#39210825">root</a><span>|</span><a href="#39211225">parent</a><span>|</span><a href="#39211283">next</a><span>|</span><label class="collapse" for="c-39211394">[-]</label><label class="expand" for="c-39211394">[2 more]</label></div><br/><div class="children"><div class="content">Fair, tho a load bearing cronjob pet at the beating heart of a $20bn company with 30m+ users is further than I would dare take this advice if I had to carry the pager. It&#x27;s very common though and I guess the blog is more evidence that simple things (greased by some tears and toil) can take you much further than you might think.</div><br/><div id="39213379" class="c"><input type="checkbox" id="c-39213379" checked=""/><div class="controls bullet"><span class="by">JohnMakin</span><span>|</span><a href="#39210825">root</a><span>|</span><a href="#39211394">parent</a><span>|</span><a href="#39211283">next</a><span>|</span><label class="collapse" for="c-39213379">[-]</label><label class="expand" for="c-39213379">[1 more]</label></div><br/><div class="children"><div class="content">This is because simplicity in a complex system allows easy problem solving and tooling built around it. Knowledge silos and haunted forests are much easier to avoid this way. Any complex distributed system to be comprehensible to a team let alone a single person has to have individually simple components with obvious design. There’s way too many rube goldberg machines out there.</div><br/></div></div></div></div></div></div><div id="39211283" class="c"><input type="checkbox" id="c-39211283" checked=""/><div class="controls bullet"><span class="by">noptd</span><span>|</span><a href="#39210825">parent</a><span>|</span><a href="#39211225">prev</a><span>|</span><a href="#39211741">next</a><span>|</span><label class="collapse" for="c-39211283">[-]</label><label class="expand" for="c-39211283">[2 more]</label></div><br/><div class="children"><div class="content">Yeah, either that or &quot;architecting something new looks better on my resume than using an existing solution.&quot;</div><br/><div id="39211719" class="c"><input type="checkbox" id="c-39211719" checked=""/><div class="controls bullet"><span class="by">hparadiz</span><span>|</span><a href="#39210825">root</a><span>|</span><a href="#39211283">parent</a><span>|</span><a href="#39211741">next</a><span>|</span><label class="collapse" for="c-39211719">[-]</label><label class="expand" for="c-39211719">[1 more]</label></div><br/><div class="children"><div class="content">The value of total control and flexibility sometimes has no price</div><br/></div></div></div></div><div id="39211741" class="c"><input type="checkbox" id="c-39211741" checked=""/><div class="controls bullet"><span class="by">teeray</span><span>|</span><a href="#39210825">parent</a><span>|</span><a href="#39211283">prev</a><span>|</span><a href="#39211960">next</a><span>|</span><label class="collapse" for="c-39211741">[-]</label><label class="expand" for="c-39211741">[4 more]</label></div><br/><div class="children"><div class="content">“Why are we doing this refactor in this PR along with the feature? Let’s do the feature first and then do the refactor later (read: never)”</div><br/><div id="39212579" class="c"><input type="checkbox" id="c-39212579" checked=""/><div class="controls bullet"><span class="by">Spivak</span><span>|</span><a href="#39210825">root</a><span>|</span><a href="#39211741">parent</a><span>|</span><a href="#39211960">next</a><span>|</span><label class="collapse" for="c-39212579">[-]</label><label class="expand" for="c-39212579">[3 more]</label></div><br/><div class="children"><div class="content">The bet your making is you never need to do the refactor. The amount of absolutely garbage code that has never needed to change ever is easily worth a wait-and-see attitude.</div><br/><div id="39213050" class="c"><input type="checkbox" id="c-39213050" checked=""/><div class="controls bullet"><span class="by">teeray</span><span>|</span><a href="#39210825">root</a><span>|</span><a href="#39212579">parent</a><span>|</span><a href="#39211960">next</a><span>|</span><label class="collapse" for="c-39213050">[-]</label><label class="expand" for="c-39213050">[2 more]</label></div><br/><div class="children"><div class="content">It’s worth it until you need to. Then you have a nightmare on your hands because you’re never allowed to rewrite it.</div><br/><div id="39213389" class="c"><input type="checkbox" id="c-39213389" checked=""/><div class="controls bullet"><span class="by">lghh</span><span>|</span><a href="#39210825">root</a><span>|</span><a href="#39213050">parent</a><span>|</span><a href="#39211960">next</a><span>|</span><label class="collapse" for="c-39213389">[-]</label><label class="expand" for="c-39213389">[1 more]</label></div><br/><div class="children"><div class="content">Waiting until you need to rewrite it sounds like the perfect time to rewrite it.</div><br/></div></div></div></div></div></div></div></div><div id="39211960" class="c"><input type="checkbox" id="c-39211960" checked=""/><div class="controls bullet"><span class="by">VWWHFSfQ</span><span>|</span><a href="#39210825">parent</a><span>|</span><a href="#39211741">prev</a><span>|</span><a href="#39212352">next</a><span>|</span><label class="collapse" for="c-39211960">[-]</label><label class="expand" for="c-39211960">[1 more]</label></div><br/><div class="children"><div class="content">&gt; &quot;1 box running shell scripts with flock&quot; to &quot;mega custom thing&quot;<p>Literally went from a working &quot;tidy little house&quot; to building a massive sky-scraper.<p>Obviously Slack operates at a much larger scale than I do...but holy moly.<p>hey, good luck to them with that!</div><br/></div></div></div></div><div id="39212352" class="c"><input type="checkbox" id="c-39212352" checked=""/><div class="controls bullet"><span class="by">paxys</span><span>|</span><a href="#39210825">prev</a><span>|</span><a href="#39211574">next</a><span>|</span><label class="collapse" for="c-39212352">[-]</label><label class="expand" for="c-39212352">[1 more]</label></div><br/><div class="children"><div class="content">Slack running all their scheduled tasks on a single box using linux cron all the way up till now is an amazing point in favor of every &quot;you don&#x27;t need overly complex system architecture at your company&quot; argument anyone has ever made.</div><br/></div></div><div id="39211574" class="c"><input type="checkbox" id="c-39211574" checked=""/><div class="controls bullet"><span class="by">Scubabear68</span><span>|</span><a href="#39212352">prev</a><span>|</span><a href="#39212863">next</a><span>|</span><label class="collapse" for="c-39211574">[-]</label><label class="expand" for="c-39211574">[25 more]</label></div><br/><div class="children"><div class="content">I can’t believe an org of Slack’s size relied on cron scripts for anything critical. It is the worst possible way to schedule jobs at scale. Serious problems with discoverability, single points of failure, and failure mode options.<p>Also surprised they didn’t just use an open source scheduler or product. There are a gazillion of them.</div><br/><div id="39211713" class="c"><input type="checkbox" id="c-39211713" checked=""/><div class="controls bullet"><span class="by">dimgl</span><span>|</span><a href="#39211574">parent</a><span>|</span><a href="#39213434">next</a><span>|</span><label class="collapse" for="c-39211713">[-]</label><label class="expand" for="c-39211713">[14 more]</label></div><br/><div class="children"><div class="content">Why is this so hard to believe? This is proof that simple software can scale very well. Your takeaway, IMO, should be that a lot of solutions are over-engineered relative to the businesses they serve. Not every company handles Slack&#x27;s scale.</div><br/><div id="39212180" class="c"><input type="checkbox" id="c-39212180" checked=""/><div class="controls bullet"><span class="by">reactordev</span><span>|</span><a href="#39211574">root</a><span>|</span><a href="#39211713">parent</a><span>|</span><a href="#39211754">next</a><span>|</span><label class="collapse" for="c-39212180">[-]</label><label class="expand" for="c-39212180">[2 more]</label></div><br/><div class="children"><div class="content">It’s no longer simple when you have platform code to prevent nodes from disappearing or dying on the minute on a kubernetes cluster the size of slack. A triggered pulse event stream would have done the trick to invoke a lambda or call code for every “thing” that needed a beat. Kubernetes comes with a scheduler…</div><br/><div id="39212676" class="c"><input type="checkbox" id="c-39212676" checked=""/><div class="controls bullet"><span class="by">zerbinxx</span><span>|</span><a href="#39211574">root</a><span>|</span><a href="#39212180">parent</a><span>|</span><a href="#39211754">next</a><span>|</span><label class="collapse" for="c-39212676">[-]</label><label class="expand" for="c-39212676">[1 more]</label></div><br/><div class="children"><div class="content">This is my take as well, just because you can get away with something doesn’t necessarily make it desirable to maintain or extend, and I honestly cannot imagine the effort in terms of labor hours that you’d have to go through to develop something like this compared to just plugging in an off-the-shelf scheduler to something slightly more sophisticated like k8s or even just a worker-and-queue system. When you’re talking about platform engineering to solve a problem that a relatively extensible Celery service could do (and have tests and such), I have no idea how the former could be “less work” or cheaper in the long haul.</div><br/></div></div></div></div><div id="39211754" class="c"><input type="checkbox" id="c-39211754" checked=""/><div class="controls bullet"><span class="by">Scubabear68</span><span>|</span><a href="#39211574">root</a><span>|</span><a href="#39211713">parent</a><span>|</span><a href="#39212180">prev</a><span>|</span><a href="#39212370">next</a><span>|</span><label class="collapse" for="c-39211754">[-]</label><label class="expand" for="c-39211754">[8 more]</label></div><br/><div class="children"><div class="content">Hard to believe because I have seen the cron dumpster fire at so many companies. Random cronjobs running on random boxes ends up with mystery jobs whose existence often goes unnoticed as people leave the org and docs are out of date. Random accounts with different cron jobs, with no visibility from one account to another. Box failure leads to mystery jobs failing with no way to figure out what happened. No “advanced” features like retry and retry with exponential back off. No database with job history. No parallelism.<p>Every place I have worked cron turned into a dumpster fire.</div><br/><div id="39212410" class="c"><input type="checkbox" id="c-39212410" checked=""/><div class="controls bullet"><span class="by">doubloon</span><span>|</span><a href="#39211574">root</a><span>|</span><a href="#39211754">parent</a><span>|</span><a href="#39212042">next</a><span>|</span><label class="collapse" for="c-39212410">[-]</label><label class="expand" for="c-39212410">[3 more]</label></div><br/><div class="children"><div class="content">i will see your rando cron box and raise you Excel VBA macros run on Windows Task Scheduler on a spare machine in a cubicle.</div><br/><div id="39212507" class="c"><input type="checkbox" id="c-39212507" checked=""/><div class="controls bullet"><span class="by">mkarrmann</span><span>|</span><a href="#39211574">root</a><span>|</span><a href="#39212410">parent</a><span>|</span><a href="#39212042">next</a><span>|</span><label class="collapse" for="c-39212507">[-]</label><label class="expand" for="c-39212507">[2 more]</label></div><br/><div class="children"><div class="content">Never forget that the world economy is probably being held together by a handful of these.</div><br/><div id="39213376" class="c"><input type="checkbox" id="c-39213376" checked=""/><div class="controls bullet"><span class="by">baq</span><span>|</span><a href="#39211574">root</a><span>|</span><a href="#39212507">parent</a><span>|</span><a href="#39212042">next</a><span>|</span><label class="collapse" for="c-39213376">[-]</label><label class="expand" for="c-39213376">[1 more]</label></div><br/><div class="children"><div class="content">A boatload. Couple. Panamax or bigger. Otherwise agreed.</div><br/></div></div></div></div></div></div><div id="39212042" class="c"><input type="checkbox" id="c-39212042" checked=""/><div class="controls bullet"><span class="by">teaearlgraycold</span><span>|</span><a href="#39211574">root</a><span>|</span><a href="#39211754">parent</a><span>|</span><a href="#39212410">prev</a><span>|</span><a href="#39213382">next</a><span>|</span><label class="collapse" for="c-39212042">[-]</label><label class="expand" for="c-39212042">[3 more]</label></div><br/><div class="children"><div class="content">Or you could have a canonical cron box.</div><br/><div id="39212105" class="c"><input type="checkbox" id="c-39212105" checked=""/><div class="controls bullet"><span class="by">djbusby</span><span>|</span><a href="#39211574">root</a><span>|</span><a href="#39212042">parent</a><span>|</span><a href="#39213382">next</a><span>|</span><label class="collapse" for="c-39212105">[-]</label><label class="expand" for="c-39212105">[2 more]</label></div><br/><div class="children"><div class="content">Or a fleet? Some of the problems up-thread feel organizational rather than tooling.</div><br/><div id="39213381" class="c"><input type="checkbox" id="c-39213381" checked=""/><div class="controls bullet"><span class="by">baq</span><span>|</span><a href="#39211574">root</a><span>|</span><a href="#39212105">parent</a><span>|</span><a href="#39213382">next</a><span>|</span><label class="collapse" for="c-39213381">[-]</label><label class="expand" for="c-39213381">[1 more]</label></div><br/><div class="children"><div class="content">No matter what they tell you, it’s a people problem.</div><br/></div></div></div></div></div></div><div id="39213382" class="c"><input type="checkbox" id="c-39213382" checked=""/><div class="controls bullet"><span class="by">mdekkers</span><span>|</span><a href="#39211574">root</a><span>|</span><a href="#39211754">parent</a><span>|</span><a href="#39212042">prev</a><span>|</span><a href="#39212370">next</a><span>|</span><label class="collapse" for="c-39213382">[-]</label><label class="expand" for="c-39213382">[1 more]</label></div><br/><div class="children"><div class="content">Sure, but those are organisational failures, not technical failures. If you need better technology because the org sucks at planning, the tech isn’t the issue and you are just sweeping issues under the carpet.</div><br/></div></div></div></div><div id="39212370" class="c"><input type="checkbox" id="c-39212370" checked=""/><div class="controls bullet"><span class="by">Scubabear68</span><span>|</span><a href="#39211574">root</a><span>|</span><a href="#39211713">parent</a><span>|</span><a href="#39211754">prev</a><span>|</span><a href="#39213434">next</a><span>|</span><label class="collapse" for="c-39212370">[-]</label><label class="expand" for="c-39212370">[3 more]</label></div><br/><div class="children"><div class="content">Cron scaling? Seriously?<p>By definition cron does not scale, it is account by account per VM&#x2F;machine with no rhyme or reason.</div><br/><div id="39213393" class="c"><input type="checkbox" id="c-39213393" checked=""/><div class="controls bullet"><span class="by">baq</span><span>|</span><a href="#39211574">root</a><span>|</span><a href="#39212370">parent</a><span>|</span><a href="#39212589">next</a><span>|</span><label class="collapse" for="c-39213393">[-]</label><label class="expand" for="c-39213393">[1 more]</label></div><br/><div class="children"><div class="content">Yeah that’s the point. If managed properly, turns out it can handle a $20B tech company.</div><br/></div></div><div id="39212589" class="c"><input type="checkbox" id="c-39212589" checked=""/><div class="controls bullet"><span class="by">Supermancho</span><span>|</span><a href="#39211574">root</a><span>|</span><a href="#39212370">parent</a><span>|</span><a href="#39213393">prev</a><span>|</span><a href="#39213434">next</a><span>|</span><label class="collapse" for="c-39212589">[-]</label><label class="expand" for="c-39212589">[1 more]</label></div><br/><div class="children"><div class="content">Alternately, if you define cron as a starting&#x2F;startup point, an expectation when scaling, then simple format for a job queue, the context of the post is understood.</div><br/></div></div></div></div></div></div><div id="39213434" class="c"><input type="checkbox" id="c-39213434" checked=""/><div class="controls bullet"><span class="by">mdekkers</span><span>|</span><a href="#39211574">parent</a><span>|</span><a href="#39211713">prev</a><span>|</span><a href="#39213345">next</a><span>|</span><label class="collapse" for="c-39213434">[-]</label><label class="expand" for="c-39213434">[2 more]</label></div><br/><div class="children"><div class="content">&gt; It is the worst possible way to schedule jobs at scale.<p>The literal evidence proves that this approach is absolutely workable at scale, so “the worst possible way” clearly doesn’t apply.<p>The interesting question here is “how did they make this work?” The answer to which is immensely valuable to the technical community at large. “What are they building next?”, whilst interesting, is less immediately valuable as they will be building something Slack-scale, and most orgs are not Slack or Slack-scale</div><br/><div id="39213916" class="c"><input type="checkbox" id="c-39213916" checked=""/><div class="controls bullet"><span class="by">krisoft</span><span>|</span><a href="#39211574">root</a><span>|</span><a href="#39213434">parent</a><span>|</span><a href="#39213345">next</a><span>|</span><label class="collapse" for="c-39213916">[-]</label><label class="expand" for="c-39213916">[1 more]</label></div><br/><div class="children"><div class="content">&gt; The literal evidence proves that this approach is absolutely workable at scale, so “the worst possible way” clearly doesn’t apply.<p>The “worst possible” to me implies that it is possible.<p>Think about trying to solve the same problem by hurling engineers into an erupting vulcano. It is expensive, hurts the morale, causes staff retention issues, but also fundamentally does not solve the task of scheduled task running. I would not describe that as “worst possible” because it lacks the second factor by not being a possible solution.</div><br/></div></div></div></div><div id="39213345" class="c"><input type="checkbox" id="c-39213345" checked=""/><div class="controls bullet"><span class="by">otabdeveloper4</span><span>|</span><a href="#39211574">parent</a><span>|</span><a href="#39213434">prev</a><span>|</span><a href="#39211858">next</a><span>|</span><label class="collapse" for="c-39213345">[-]</label><label class="expand" for="c-39213345">[1 more]</label></div><br/><div class="children"><div class="content">&gt; There are a gazillion of them.<p>Such as?</div><br/></div></div><div id="39211858" class="c"><input type="checkbox" id="c-39211858" checked=""/><div class="controls bullet"><span class="by">ohnoesjmr</span><span>|</span><a href="#39211574">parent</a><span>|</span><a href="#39213345">prev</a><span>|</span><a href="#39212863">next</a><span>|</span><label class="collapse" for="c-39211858">[-]</label><label class="expand" for="c-39211858">[7 more]</label></div><br/><div class="children"><div class="content">Can you name some?<p>I&#x27;ve been looking for software in that space, a thing that runs cronjobs, with ability to kick off adhoc runs from some UI, see what is running, and if possible parameterise the custom runs (i.e., run an ad-hoc report for a different client than usual cron does)</div><br/><div id="39213405" class="c"><input type="checkbox" id="c-39213405" checked=""/><div class="controls bullet"><span class="by">baq</span><span>|</span><a href="#39211574">root</a><span>|</span><a href="#39211858">parent</a><span>|</span><a href="#39212807">next</a><span>|</span><label class="collapse" for="c-39213405">[-]</label><label class="expand" for="c-39213405">[1 more]</label></div><br/><div class="children"><div class="content">GitHub actions.<p>I almost suffocated from all the yaml typing this, but unfortunately it’s the baseline.</div><br/></div></div><div id="39212807" class="c"><input type="checkbox" id="c-39212807" checked=""/><div class="controls bullet"><span class="by">8organicbits</span><span>|</span><a href="#39211574">root</a><span>|</span><a href="#39211858">parent</a><span>|</span><a href="#39213405">prev</a><span>|</span><a href="#39212118">next</a><span>|</span><label class="collapse" for="c-39212807">[-]</label><label class="expand" for="c-39212807">[1 more]</label></div><br/><div class="children"><div class="content">There&#x27;s a lot to expore here. First, I&#x27;d suggest that cron and shell scripts may not be what you want. Cron has a complex format for scheduling and can lack features like sub-minute level scheduling, maintenance windows, and other task cadences. Shell scripts are OK for small things, but often I find I move to a different language if I keep something around long enough. Do the people writing jobs know shell?<p>For jobs run by data analysts, airflow and python work great. For devops jobs, begrudgingly, Jenkins or GitHub Actions. But there&#x27;s so many varieties.</div><br/></div></div><div id="39212118" class="c"><input type="checkbox" id="c-39212118" checked=""/><div class="controls bullet"><span class="by">djbusby</span><span>|</span><a href="#39211574">root</a><span>|</span><a href="#39211858">parent</a><span>|</span><a href="#39212807">prev</a><span>|</span><a href="#39212376">next</a><span>|</span><label class="collapse" for="c-39212118">[-]</label><label class="expand" for="c-39212118">[1 more]</label></div><br/><div class="children"><div class="content">Build the UI or API for the report, so you can ad-hoc from there. Cron uses that interface. You don&#x27;t custom the cron, you cron the custom.</div><br/></div></div><div id="39212376" class="c"><input type="checkbox" id="c-39212376" checked=""/><div class="controls bullet"><span class="by">sciurus</span><span>|</span><a href="#39211574">root</a><span>|</span><a href="#39211858">parent</a><span>|</span><a href="#39212118">prev</a><span>|</span><a href="#39212715">next</a><span>|</span><label class="collapse" for="c-39212376">[-]</label><label class="expand" for="c-39212376">[2 more]</label></div><br/><div class="children"><div class="content">I almost hate to say it, but Jenkins.</div><br/><div id="39212679" class="c"><input type="checkbox" id="c-39212679" checked=""/><div class="controls bullet"><span class="by">magarnicle</span><span>|</span><a href="#39211574">root</a><span>|</span><a href="#39212376">parent</a><span>|</span><a href="#39212715">next</a><span>|</span><label class="collapse" for="c-39212679">[-]</label><label class="expand" for="c-39212679">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s what I did. I know it was the right solution because I happily keep adding more and more scripts to run. I didn&#x27;t do that when I was using cron jobs.<p>Plus, Jenkins has a few nice extensions to the crontab, including setting a timezone and using &quot;H&quot; to spread job execution load.</div><br/></div></div></div></div><div id="39212715" class="c"><input type="checkbox" id="c-39212715" checked=""/><div class="controls bullet"><span class="by">fukawi2</span><span>|</span><a href="#39211574">root</a><span>|</span><a href="#39211858">parent</a><span>|</span><a href="#39212376">prev</a><span>|</span><a href="#39212863">next</a><span>|</span><label class="collapse" for="c-39212715">[-]</label><label class="expand" for="c-39212715">[1 more]</label></div><br/><div class="children"><div class="content">Rundeck fits this space.</div><br/></div></div></div></div></div></div><div id="39212863" class="c"><input type="checkbox" id="c-39212863" checked=""/><div class="controls bullet"><span class="by">latchkey</span><span>|</span><a href="#39211574">prev</a><span>|</span><a href="#39211166">next</a><span>|</span><label class="collapse" for="c-39212863">[-]</label><label class="expand" for="c-39212863">[1 more]</label></div><br/><div class="children"><div class="content">Probably the simplest scheduling service I&#x27;ve ever used was Google Cloud Scheduler.<p>You give it a schedule and an endpoint (HTTP or a Cloud Task) and then it hits that endpoint on a schedule.<p>I go with Scheduler-&gt;Cloud Tasks-&gt;Cloud Functions, which gives you reliability and near infinite scalability.<p>Very easy to reason about and full monitoring of the whole stack.</div><br/></div></div><div id="39211166" class="c"><input type="checkbox" id="c-39211166" checked=""/><div class="controls bullet"><span class="by">djboz</span><span>|</span><a href="#39212863">prev</a><span>|</span><a href="#39211870">next</a><span>|</span><label class="collapse" for="c-39211166">[-]</label><label class="expand" for="c-39211166">[1 more]</label></div><br/><div class="children"><div class="content">What&#x27;s the workflow for job registration look like? Does an engineer upload a single script&#x2F;binary to some storage service(e.g., EFS&#x2F;S3&#x2F;whatever) or builds and uploads a container with script&#x2F;binary, registers the rate in the conductor UI and then the job queue just pulls the script or container and runs it? Is registration through an IaC of sorts, or just through some UI&#x2F;CLI?</div><br/></div></div><div id="39211870" class="c"><input type="checkbox" id="c-39211870" checked=""/><div class="controls bullet"><span class="by">progbits</span><span>|</span><a href="#39211166">prev</a><span>|</span><a href="#39211567">next</a><span>|</span><label class="collapse" for="c-39211870">[-]</label><label class="expand" for="c-39211870">[1 more]</label></div><br/><div class="children"><div class="content">&gt; To make this transition between pods seamless, we implemented logic to prevent the node from going down at the top of a minute when possible since — given the nature of cron — that is when it is likely that scripts will need to be scheduled to run.<p>Crons with precisely specified time where everyone just uses whole minutes&#x2F;hours are not great practice. Very unlikely you actually need such precision in a cron job and you get spiky load.<p>Usual approach is to set the minute to a hash of the cron config name or something, modulo 60. Hourly jobs still run hourly, but each one on random minute.<p>(Setting aside how fragile that setup of avoiding pod downtime sounds)</div><br/></div></div><div id="39211567" class="c"><input type="checkbox" id="c-39211567" checked=""/><div class="controls bullet"><span class="by">whorleater</span><span>|</span><a href="#39211870">prev</a><span>|</span><a href="#39210666">next</a><span>|</span><label class="collapse" for="c-39211567">[-]</label><label class="expand" for="c-39211567">[4 more]</label></div><br/><div class="children"><div class="content">I would be curious why kube cron jobs didn&#x27;t seem to fit the bill, my favorite part of these posts are when they have a section hinting that they explored other options picked specific tradeoffs</div><br/><div id="39211778" class="c"><input type="checkbox" id="c-39211778" checked=""/><div class="controls bullet"><span class="by">gtirloni</span><span>|</span><a href="#39211567">parent</a><span>|</span><a href="#39212647">next</a><span>|</span><label class="collapse" for="c-39211778">[-]</label><label class="expand" for="c-39211778">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, the article raises more questions than it answers them.<p><i>&gt; When designing this new, more reliable service, we decided to leverage many existing services to decrease the amount we had to build</i><p>This might explain building from scratch. Maybe the existing solutions had dependencies they didn&#x27;t want to maintain and they opted for using the existing internal systems. It feels like that influenced all the rest.</div><br/></div></div><div id="39212647" class="c"><input type="checkbox" id="c-39212647" checked=""/><div class="controls bullet"><span class="by">paxys</span><span>|</span><a href="#39211567">parent</a><span>|</span><a href="#39211778">prev</a><span>|</span><a href="#39210666">next</a><span>|</span><label class="collapse" for="c-39212647">[-]</label><label class="expand" for="c-39212647">[2 more]</label></div><br/><div class="children"><div class="content">Spinning up a new Kubernetes pod for every single job run is a very expensive and wasteful operation, starting at least in the order of seconds (usually more) vs just milliseconds for a new process in an already hot environment.</div><br/><div id="39212693" class="c"><input type="checkbox" id="c-39212693" checked=""/><div class="controls bullet"><span class="by">zerbinxx</span><span>|</span><a href="#39211567">root</a><span>|</span><a href="#39212647">parent</a><span>|</span><a href="#39210666">next</a><span>|</span><label class="collapse" for="c-39212693">[-]</label><label class="expand" for="c-39212693">[1 more]</label></div><br/><div class="children"><div class="content">Sure, but if you need that thing to run every hour for a few seconds, then seconds aren’t really the limiting factor. I don’t doubt that the resource management side of k8s would make it dicey at a certain volume of these things running, though, especially if they eat a lot of compute.</div><br/></div></div></div></div></div></div><div id="39210666" class="c"><input type="checkbox" id="c-39210666" checked=""/><div class="controls bullet"><span class="by">djbusby</span><span>|</span><a href="#39211567">prev</a><span>|</span><a href="#39212089">next</a><span>|</span><label class="collapse" for="c-39210666">[-]</label><label class="expand" for="c-39210666">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m still over here loving cron, not at this large of a scale for sure but I love getting all these tools to email me key information, in plain text, at the right times.</div><br/></div></div><div id="39212089" class="c"><input type="checkbox" id="c-39212089" checked=""/><div class="controls bullet"><span class="by">brown9-2</span><span>|</span><a href="#39210666">prev</a><span>|</span><a href="#39210715">next</a><span>|</span><label class="collapse" for="c-39212089">[-]</label><label class="expand" for="c-39212089">[2 more]</label></div><br/><div class="children"><div class="content">&gt; we implemented logic to prevent the node from going down at the top of a minute when possible since — given the nature of cron — that is when it is likely that scripts will need to be scheduled to run<p>Why not smear the start time of the jobs across seconds of that minute to avoid any thundering herd problems? How much functionality relies on a script being invoked at exactly the :00 mark? And if the functionality depends on that exact timing, doesn’t it suggest something is fragile and could be redesigned to be more resilient?</div><br/><div id="39212121" class="c"><input type="checkbox" id="c-39212121" checked=""/><div class="controls bullet"><span class="by">wutwutwat</span><span>|</span><a href="#39212089">parent</a><span>|</span><a href="#39210715">next</a><span>|</span><label class="collapse" for="c-39212121">[-]</label><label class="expand" for="c-39212121">[1 more]</label></div><br/><div class="children"><div class="content">At their scale, staggering script start times over a 60 second window likely wouldn’t have much of an impact if they are experiencing a thundering herd, imo. If it did help, it would be a bandaid and ticking time bomb before someone has to actually solve the load problem that staggering start times kicked down the road</div><br/></div></div></div></div><div id="39210715" class="c"><input type="checkbox" id="c-39210715" checked=""/><div class="controls bullet"><span class="by">swyx</span><span>|</span><a href="#39212089">prev</a><span>|</span><a href="#39212883">next</a><span>|</span><label class="collapse" for="c-39210715">[-]</label><label class="expand" for="c-39210715">[9 more]</label></div><br/><div class="children"><div class="content">this is a pretty simple cron system. curious if the authors investigated temporal and other similar workflow engines for the advanced cron feature set (<a href="https:&#x2F;&#x2F;docs.temporal.io&#x2F;workflows#spec" rel="nofollow">https:&#x2F;&#x2F;docs.temporal.io&#x2F;workflows#spec</a> disclaimer: i used to work there)</div><br/><div id="39211371" class="c"><input type="checkbox" id="c-39211371" checked=""/><div class="controls bullet"><span class="by">nicksaroha</span><span>|</span><a href="#39210715">parent</a><span>|</span><a href="#39210795">next</a><span>|</span><label class="collapse" for="c-39211371">[-]</label><label class="expand" for="c-39211371">[2 more]</label></div><br/><div class="children"><div class="content">Wouldn’t it be a huge overkill to run your own temporal or airflow instances just to run your cron jobs? Just curious.</div><br/><div id="39212555" class="c"><input type="checkbox" id="c-39212555" checked=""/><div class="controls bullet"><span class="by">storyinmemo</span><span>|</span><a href="#39210715">root</a><span>|</span><a href="#39211371">parent</a><span>|</span><a href="#39210795">next</a><span>|</span><label class="collapse" for="c-39212555">[-]</label><label class="expand" for="c-39212555">[1 more]</label></div><br/><div class="children"><div class="content">More overkill than writing your own system? Temporal is just plain quick to setup.</div><br/></div></div></div></div><div id="39210757" class="c"><input type="checkbox" id="c-39210757" checked=""/><div class="controls bullet"><span class="by">jaydeegee</span><span>|</span><a href="#39210715">parent</a><span>|</span><a href="#39210795">prev</a><span>|</span><a href="#39212883">next</a><span>|</span><label class="collapse" for="c-39210757">[-]</label><label class="expand" for="c-39210757">[5 more]</label></div><br/><div class="children"><div class="content">100% agree this is a perfect use case for Cadence or Temporal.</div><br/><div id="39211186" class="c"><input type="checkbox" id="c-39211186" checked=""/><div class="controls bullet"><span class="by">nerdponx</span><span>|</span><a href="#39210715">root</a><span>|</span><a href="#39210757">parent</a><span>|</span><a href="#39212883">next</a><span>|</span><label class="collapse" for="c-39211186">[-]</label><label class="expand" for="c-39211186">[4 more]</label></div><br/><div class="children"><div class="content">Coming from the &quot;data world&quot;, how does a tool like Airflow&#x2F;Dagster&#x2F;Prefect differ from these?</div><br/><div id="39212159" class="c"><input type="checkbox" id="c-39212159" checked=""/><div class="controls bullet"><span class="by">jtmarmon</span><span>|</span><a href="#39210715">root</a><span>|</span><a href="#39211186">parent</a><span>|</span><a href="#39212059">next</a><span>|</span><label class="collapse" for="c-39212159">[-]</label><label class="expand" for="c-39212159">[1 more]</label></div><br/><div class="children"><div class="content">I recently evaluated Dagster, Prefect, and Flyte for a data pipeliney workflow and ended up going with Temporal.<p>The shared feature between Temporal and those three is the workflow orchestration piece. All 3 can manage a dependency graph of jobs, handle retries, start from checkpoints, etc.<p>At a high level the big reason they’re different is Temporal is entirely focused on the orchestration piece, and the others are much more focused on the data piece, which comes out in a lot of the different features. Temporal has SDKs in most languages, and has a queuing system that allows you to run different workflows or even activities (tasks within a workflow) in different workers, manage concurrency, etc. You can write a parent workflow that orchestrates sub-workflows that could live in 5 other services. It’s just really composable and fits much more nicely into the critical path of your app.<p>Prefect is probably the closest of your list to temporal, in that it’s less opinionated than others about the workflows being “data oriented”, but it’s still only in python, and it deosn&#x27;t have queueing. In short this means that your workflows are kinda supposed to run in one box running python somewhere. Temporal will let you define a 10 part workflow where two parts run on a python service running with a GPU, and the remaining parts are running in the same node.js process as your main server.<p>Dagster’s feature set is even more focused on data-workflows, as your workflows are meant to produce data “assets” which can be materialized&#x2F;cached, etc.<p>They’re pretty much all designed for a data engineering team to manage many individual pipelines that are external from your application code, whereas temporal is designed to be a system that manages workflow complexity for code that (more often) runs in your application.</div><br/></div></div><div id="39212059" class="c"><input type="checkbox" id="c-39212059" checked=""/><div class="controls bullet"><span class="by">mianos</span><span>|</span><a href="#39210715">root</a><span>|</span><a href="#39211186">parent</a><span>|</span><a href="#39212159">prev</a><span>|</span><a href="#39212540">next</a><span>|</span><label class="collapse" for="c-39212059">[-]</label><label class="expand" for="c-39212059">[1 more]</label></div><br/><div class="children"><div class="content">It doesn&#x27;t. They didn&#x27;t look for it.
This is exactly what DAG based workflow systems to, in a modern professional manner. Crons don&#x27;t do a DAG.</div><br/></div></div><div id="39212540" class="c"><input type="checkbox" id="c-39212540" checked=""/><div class="controls bullet"><span class="by">jaydeegee</span><span>|</span><a href="#39210715">root</a><span>|</span><a href="#39211186">parent</a><span>|</span><a href="#39212059">prev</a><span>|</span><a href="#39212883">next</a><span>|</span><label class="collapse" for="c-39212540">[-]</label><label class="expand" for="c-39212540">[1 more]</label></div><br/><div class="children"><div class="content">They definitely are similar and can be used for similar functions but Cadence&#x2F;Temporal are focused on code orchestration side rather than data orchestration.</div><br/></div></div></div></div></div></div></div></div><div id="39212883" class="c"><input type="checkbox" id="c-39212883" checked=""/><div class="controls bullet"><span class="by">fdefilippo</span><span>|</span><a href="#39210715">prev</a><span>|</span><a href="#39211004">next</a><span>|</span><label class="collapse" for="c-39212883">[-]</label><label class="expand" for="c-39212883">[1 more]</label></div><br/><div class="children"><div class="content">Wasn&#x27;t it simpler to use Cronicle (<a href="https:&#x2F;&#x2F;github.com&#x2F;jhuckaby&#x2F;Cronicle">https:&#x2F;&#x2F;github.com&#x2F;jhuckaby&#x2F;Cronicle</a>)?</div><br/></div></div><div id="39210752" class="c"><input type="checkbox" id="c-39210752" checked=""/><div class="controls bullet"><span class="by">jaydeegee</span><span>|</span><a href="#39211004">prev</a><span>|</span><a href="#39210768">next</a><span>|</span><label class="collapse" for="c-39210752">[-]</label><label class="expand" for="c-39210752">[1 more]</label></div><br/><div class="children"><div class="content">Interesting to see how different teams approaches to the same issue. Often when reading this sort of thing I&#x27;m in PR mode and question why they did certain things the way they did. Then I realise that has probably been asked and answered a dozen times before it got released.</div><br/></div></div><div id="39210768" class="c"><input type="checkbox" id="c-39210768" checked=""/><div class="controls bullet"><span class="by">WatchDog</span><span>|</span><a href="#39210752">prev</a><span>|</span><a href="#39211656">next</a><span>|</span><label class="collapse" for="c-39210768">[-]</label><label class="expand" for="c-39210768">[3 more]</label></div><br/><div class="children"><div class="content">We have a slack reminder that executes on the hour, I’ve noticed that it take about 30 seconds to a minute past the hour for the reminder to actually fire.</div><br/><div id="39211907" class="c"><input type="checkbox" id="c-39211907" checked=""/><div class="controls bullet"><span class="by">AtlasBarfed</span><span>|</span><a href="#39210768">parent</a><span>|</span><a href="#39211656">next</a><span>|</span><label class="collapse" for="c-39211907">[-]</label><label class="expand" for="c-39211907">[2 more]</label></div><br/><div class="children"><div class="content">jitter on top of the hour for massively scaled notifications is typical.<p>OF COURSE everyone wants reminders at the even points, but what, do you scale up your system for every half-hour&#x2F;hourly peak? Or just put in the TOS that the activation will jitter by a bit.</div><br/><div id="39213570" class="c"><input type="checkbox" id="c-39213570" checked=""/><div class="controls bullet"><span class="by">wodenokoto</span><span>|</span><a href="#39210768">root</a><span>|</span><a href="#39211907">parent</a><span>|</span><a href="#39211656">next</a><span>|</span><label class="collapse" for="c-39213570">[-]</label><label class="expand" for="c-39213570">[1 more]</label></div><br/><div class="children"><div class="content">Doesn&#x27;t the client actually ring the bell for the notification? They client could be told &quot;ring on the top of the oncoming minute&quot;.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>