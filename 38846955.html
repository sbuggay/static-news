<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1704272454178" as="style"/><link rel="stylesheet" href="styles.css?v=1704272454178"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://juiced.gs/emulators/">Apple II Emulation Evaluation (2022)</a> <span class="domain">(<a href="https://juiced.gs">juiced.gs</a>)</span></div><div class="subtext"><span>mmphosis</span> | <span>17 comments</span></div><br/><div><div id="38847767" class="c"><input type="checkbox" id="c-38847767" checked=""/><div class="controls bullet"><span class="by">retrac</span><span>|</span><a href="#38851056">next</a><span>|</span><label class="collapse" for="c-38847767">[-]</label><label class="expand" for="c-38847767">[2 more]</label></div><br/><div class="children"><div class="content">The Apple II is rather hard to emulate correctly.  While most Apple II software is relatively easily supported, some corner cases are absolutely brutal to get right.<p>For example, you can mostly treat the video system as a dumb framebuffer.  But there are cases where this fails.   It is possible to detect the vertical blanking period on an Apple II.  [1]  This relies on capacitance on the Apple II bus and very strict timing.   On a real Apple II the value read from a non-existent memory address is not always 0, sometimes it&#x27;s the last value read, which is sometimes the last value read by the video system which is overlapped with the CPU.  To emulate this right, you need to emulate the whole video system lock-step and cycle accurate with the CPU.<p>The disk system is another major pain point.  All of the timing and track movement is handled in software.  Arbitrary disk formats can be created in software.  One single spiral track was used by some games as copy protection.  To support the Disk II completely requires emulating at a much lower level than that of 256 byte sectors.  Some emulators going all the way for accuracy, use a structure, that is basically a map of the flux transitions on disk.<p>[1] <a href="http:&#x2F;&#x2F;deater.net&#x2F;weave&#x2F;vmwprod&#x2F;megademo&#x2F;vapor_lock.html" rel="nofollow">http:&#x2F;&#x2F;deater.net&#x2F;weave&#x2F;vmwprod&#x2F;megademo&#x2F;vapor_lock.html</a></div><br/><div id="38848902" class="c"><input type="checkbox" id="c-38848902" checked=""/><div class="controls bullet"><span class="by">djmips</span><span>|</span><a href="#38847767">parent</a><span>|</span><a href="#38851056">next</a><span>|</span><label class="collapse" for="c-38848902">[-]</label><label class="expand" for="c-38848902">[1 more]</label></div><br/><div class="children"><div class="content">IIRC the vertical blanking detection can fail depending on what cards you have plugged in as they may load down the bus.</div><br/></div></div></div></div><div id="38851056" class="c"><input type="checkbox" id="c-38851056" checked=""/><div class="controls bullet"><span class="by">buserror</span><span>|</span><a href="#38847767">prev</a><span>|</span><a href="#38847669">next</a><span>|</span><label class="collapse" for="c-38851056">[-]</label><label class="expand" for="c-38851056">[1 more]</label></div><br/><div class="children"><div class="content">I wrote my own pet Apple IIe emulator for linux fairly recently [0]. It works fairly well, even if it doesn&#x27;t try to emulate an <i>exact</i> cycle accurate &#x27;pixel&#x27; video modes, instead, it &#x27;cheats&#x27; and do it line by line. I think it is a good tradeoff between quality of emulation and CPU spent doing it... Only some demos will fail to display properly (mostly the ones changing video mode during line displays!), all the games and tools and applications I tried works just fine.<p>I mostly did my emu due to the rather poor quality I found for linux emulators I&#x27;ve seen, the &#x27;goto&#x27; one is linapple, but the codebase is rather crusty.. I wanted a cleaner base to hack on, without the baggage -- more in the style of my own AVR emulator [1].<p>I&#x27;ve got a very big patchset to push &#x27;soon&#x27; with a new UI library (that will be a topic of its own!) and a bunch of new features and improvements...<p>[0]: <a href="https:&#x2F;&#x2F;github.com&#x2F;buserror&#x2F;mii_emu">https:&#x2F;&#x2F;github.com&#x2F;buserror&#x2F;mii_emu</a>
[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;buserror&#x2F;simavr">https:&#x2F;&#x2F;github.com&#x2F;buserror&#x2F;simavr</a></div><br/></div></div><div id="38847669" class="c"><input type="checkbox" id="c-38847669" checked=""/><div class="controls bullet"><span class="by">zellyn</span><span>|</span><a href="#38851056">prev</a><span>|</span><a href="#38848733">next</a><span>|</span><label class="collapse" for="c-38847669">[-]</label><label class="expand" for="c-38847669">[1 more]</label></div><br/><div class="children"><div class="content">If you&#x27;re interested in Apple II emulators, the #emulators channel on the Apple2Infinitum Slack is a great place to ask questions or chat. Invites available here: <a href="http:&#x2F;&#x2F;apple2.gs:3000&#x2F;" rel="nofollow">http:&#x2F;&#x2F;apple2.gs:3000&#x2F;</a></div><br/></div></div><div id="38848733" class="c"><input type="checkbox" id="c-38848733" checked=""/><div class="controls bullet"><span class="by">rahen</span><span>|</span><a href="#38847669">prev</a><span>|</span><a href="#38851276">next</a><span>|</span><label class="collapse" for="c-38848733">[-]</label><label class="expand" for="c-38848733">[2 more]</label></div><br/><div class="children"><div class="content">Virtual II is overall the best Apple II emulator across all platforms, and the article doesn&#x27;t even mention how stellar its debugger is.<p>My only gripe with it is that it&#x27;s not as accurate as AppleWin, despite excelling in every other aspect. This means that writing a cycle-accurate demo won&#x27;t work as smoothly with AppleWin as it would with AppleWin and AMPLE. Several cycle-counting demos fail to run on Virtual II, a shame for an otherwise perfect emulator. Hopefully the author addresses and resolves this issue in the future.</div><br/><div id="38849183" class="c"><input type="checkbox" id="c-38849183" checked=""/><div class="controls bullet"><span class="by">Narishma</span><span>|</span><a href="#38848733">parent</a><span>|</span><a href="#38851276">next</a><span>|</span><label class="collapse" for="c-38849183">[-]</label><label class="expand" for="c-38849183">[1 more]</label></div><br/><div class="children"><div class="content">Two other issues are that it is commercial&#x2F;proprietary and only available on MacOS.</div><br/></div></div></div></div><div id="38851276" class="c"><input type="checkbox" id="c-38851276" checked=""/><div class="controls bullet"><span class="by">rbanffy</span><span>|</span><a href="#38848733">prev</a><span>|</span><a href="#38849556">next</a><span>|</span><label class="collapse" for="c-38851276">[-]</label><label class="expand" for="c-38851276">[1 more]</label></div><br/><div class="children"><div class="content">What I really like about MAME is that the code in the high-level machine drives almost looks like enough to derive hardware descriptions in an HDL (provided you have files for the lower level logic implemented down the stack).</div><br/></div></div><div id="38849556" class="c"><input type="checkbox" id="c-38849556" checked=""/><div class="controls bullet"><span class="by">nevster</span><span>|</span><a href="#38851276">prev</a><span>|</span><a href="#38848815">next</a><span>|</span><label class="collapse" for="c-38849556">[-]</label><label class="expand" for="c-38849556">[3 more]</label></div><br/><div class="children"><div class="content">OpenEmulator has fantastic monitor emulation if you want to get as close an experience as possible to the feel of the time.</div><br/><div id="38849812" class="c"><input type="checkbox" id="c-38849812" checked=""/><div class="controls bullet"><span class="by">zellyn</span><span>|</span><a href="#38849556">parent</a><span>|</span><a href="#38848815">next</a><span>|</span><label class="collapse" for="c-38849812">[-]</label><label class="expand" for="c-38849812">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve ported the GPU code that OpenEmulator uses to WebGL. You can view a demo here: <a href="https:&#x2F;&#x2F;zellyn.com&#x2F;apple2shader&#x2F;" rel="nofollow">https:&#x2F;&#x2F;zellyn.com&#x2F;apple2shader&#x2F;</a> (source is on github).<p>I also ported it to Javascript, in an Observable notebook, with some attempt at explaining what was going on, here: <a href="https:&#x2F;&#x2F;observablehq.com&#x2F;@zellyn&#x2F;apple-ii-ntsc-emulation-openemulator-explainer" rel="nofollow">https:&#x2F;&#x2F;observablehq.com&#x2F;@zellyn&#x2F;apple-ii-ntsc-emulation-ope...</a><p>This was my attempt to understand what the code was doing, but I went down the “I should learn signal processing” rabbit hole for a while and eventually got distracted.</div><br/><div id="38850378" class="c"><input type="checkbox" id="c-38850378" checked=""/><div class="controls bullet"><span class="by">robterrell</span><span>|</span><a href="#38849556">root</a><span>|</span><a href="#38849812">parent</a><span>|</span><a href="#38848815">next</a><span>|</span><label class="collapse" for="c-38850378">[-]</label><label class="expand" for="c-38850378">[1 more]</label></div><br/><div class="children"><div class="content">This notebook is great, kudos for sort of &quot;thinking out loud&quot; as you figured it out. I&#x27;d forgotten about Observable notebooks and makes me want to try them again.</div><br/></div></div></div></div></div></div><div id="38848815" class="c"><input type="checkbox" id="c-38848815" checked=""/><div class="controls bullet"><span class="by">Scramblejams</span><span>|</span><a href="#38849556">prev</a><span>|</span><a href="#38848162">next</a><span>|</span><label class="collapse" for="c-38848815">[-]</label><label class="expand" for="c-38848815">[1 more]</label></div><br/><div class="children"><div class="content">Satisfied Virtual II customer here, it&#x27;s a beautiful piece of software, and I&#x27;m happy to pay for great work like that... but I really wish it ran on Linux.</div><br/></div></div><div id="38848162" class="c"><input type="checkbox" id="c-38848162" checked=""/><div class="controls bullet"><span class="by">joshu</span><span>|</span><a href="#38848815">prev</a><span>|</span><a href="#38847766">next</a><span>|</span><label class="collapse" for="c-38848162">[-]</label><label class="expand" for="c-38848162">[2 more]</label></div><br/><div class="children"><div class="content">I had some issues with Virtual II and the author quickly helped.</div><br/></div></div><div id="38850933" class="c"><input type="checkbox" id="c-38850933" checked=""/><div class="controls bullet"><span class="by">AtlasBarfed</span><span>|</span><a href="#38847766">prev</a><span>|</span><a href="#38849792">next</a><span>|</span><label class="collapse" for="c-38850933">[-]</label><label class="expand" for="c-38850933">[1 more]</label></div><br/><div class="children"><div class="content">I thought mame is the only one doing IIc emulation</div><br/></div></div></div></div></div></div></div></body></html>