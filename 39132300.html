<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1706259658538" as="style"/><link rel="stylesheet" href="styles.css?v=1706259658538"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/rhboot/shim/commit/0226b56513b2b8bd5fd281bce77c40c9bf07c66d">CVE-2023-40547 – avoid incorrectly trusting HTTP headers</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>DyslexicAtheist</span> | <span>99 comments</span></div><br/><div><div id="39133356" class="c"><input type="checkbox" id="c-39133356" checked=""/><div class="controls bullet"><span class="by">Arnavion</span><span>|</span><a href="#39135406">next</a><span>|</span><label class="collapse" for="c-39133356">[-]</label><label class="expand" for="c-39133356">[57 more]</label></div><br/><div class="children"><div class="content">shim is an EFI bootloader commonly used by Linux distros that want to enable Secure Boot. Distros want an easy path to enabling Secure Boot using the default preloaded Microsoft signing key, rather than require users to enroll their own key. But Microsoft refuses to sign GPL bootloaders like grub in general, so shim was made to be able to be signed by the Microsoft key. (shim then implements its own separate signature verification of what it boots, based on a different key called the Machine Owner Key, MOK.)<p>When you tell shim what EFI binary to boot, you can specify it as an HTTP URL. If you do this and the HTTP server is malicious, it can trigger an out-of-bounds write.<p>However, usually you use it to boot a local second-stage bootloader like grub (hence the name &quot;shim&quot;), so it&#x27;s unlikely to be a problem for most installs.<p>Regardless, Secure Boot was built from the start to allow previously-signed binaries to be revoked via the DBX list - a list of signatures that can be loaded into the UEFI to make it reject binaries even if they have a valid signature. When (If) the signatures of old shim binaries with this bug are added to the list, you can update the list in your own machines. Updates may be distributed as capsule updates (via LVFS etc), or if you manage your SB keys and vars you can download and enroll the list from <a href="https:&#x2F;&#x2F;uefi.org&#x2F;revocationlistfile" rel="nofollow">https:&#x2F;&#x2F;uefi.org&#x2F;revocationlistfile</a></div><br/><div id="39135275" class="c"><input type="checkbox" id="c-39135275" checked=""/><div class="controls bullet"><span class="by">BillDemirkapi</span><span>|</span><a href="#39133356">parent</a><span>|</span><a href="#39133414">next</a><span>|</span><label class="collapse" for="c-39135275">[-]</label><label class="expand" for="c-39135275">[9 more]</label></div><br/><div class="children"><div class="content">OP&#x2F;bug finder here with some clarifying information. It&#x27;s a common misconception that this issue can only be abused if you use HTTP boot. That is not the case at all, otherwise it wouldn&#x27;t be Critical. This bug can be abused locally (privileged malware can overwrite the EFI partition), from an adjacent network if PXE boot is enabled (w&#x2F; MiTM), or remotely if HTTP boot is used (w&#x2F; MiTM).<p>More details on these scenarios:<p>1. A remote attacker with no privileges in a man-in-the-middle (MitM) position could leverage the issue against a victim machine that uses HTTP boot. No direct access to the victim machine is required.<p>2. A remote attacker <i>with</i> privileges and code execution on the victim machine could leverage the issue to bypass Secure Boot, <i>even if the victim does not already use HTTP boot</i> (as long as firmware has HTTP support). How? Several ways:<p><pre><code>    - An attacker can edit the boot order variable to specify a controlled attacker server.

    - An attacker can chain shim-&gt;GRUB2-&gt;shim (via HTTP). For this technique, an attacker would overwrite the boot loader in the EFI partition to a legitimate shim and GRUB2 image. The attacker would create a grub.cfg that chainloads a new shim via HTTP. This is possible because GRUB2&#x27;s device syntax allows you to specify any supported device, including HTTP (if available).
</code></pre>
3. An adjacent attacker with no privileges in a man-in-the-middle (MitM) position could leverage the issue against a victim machine that uses PXE boot. PXE is separate from HTTP boot, but similar to the local vector, an attacker can chain together shim (via PXE)-&gt;GRUB2 (via PXE)-&gt;shim (via HTTP).</div><br/><div id="39135428" class="c"><input type="checkbox" id="c-39135428" checked=""/><div class="controls bullet"><span class="by">Arnavion</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39135275">parent</a><span>|</span><a href="#39133414">next</a><span>|</span><label class="collapse" for="c-39135428">[-]</label><label class="expand" for="c-39135428">[8 more]</label></div><br/><div class="children"><div class="content">Yes, if the attacker can edit the the victim machine&#x27;s EFI vars or the contents of its ESP, then they can make the victim machine use HTTP boot even if the victim machine didn&#x27;t use HTTP boot originally. However at that point they can also wreak more havoc without involving HTTP boot.<p>For the case where the default configuration has been set up to just chainload grub (ie what distros use shim for), and where an attacker editing EFI vars &#x2F; ESP is not in the threat model, there is no concern. Yes that is just &quot;It&#x27;s not a concern because you defined it to not be.&quot; but that is the reality for most users of Secure Boot on Linux.<p>Also note that the reason I wrote that paragraph is because the HN submission was originally submitted with a title along the lines of &quot;Every install of shim is affected&quot;.</div><br/><div id="39135648" class="c"><input type="checkbox" id="c-39135648" checked=""/><div class="controls bullet"><span class="by">lmm</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39135428">parent</a><span>|</span><a href="#39133414">next</a><span>|</span><label class="collapse" for="c-39135648">[-]</label><label class="expand" for="c-39135648">[7 more]</label></div><br/><div class="children"><div class="content">&gt; Yes, if the attacker can edit the the victim machine&#x27;s EFI vars or the contents of its ESP, then they can make the victim machine use HTTP boot even if the victim machine didn&#x27;t use HTTP boot originally. However at that point they can also wreak more havoc without involving HTTP boot.<p>How? The whole point of secure boot is that an attacker with even that level of access can&#x27;t boot the machine in an authenticated way (and e.g. make the disk encryption key available).</div><br/><div id="39136207" class="c"><input type="checkbox" id="c-39136207" checked=""/><div class="controls bullet"><span class="by">Arnavion</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39135648">parent</a><span>|</span><a href="#39133414">next</a><span>|</span><label class="collapse" for="c-39136207">[-]</label><label class="expand" for="c-39136207">[6 more]</label></div><br/><div class="children"><div class="content">&gt;How?<p>Someone with enough privileged access to write to the ESP (ie root) can also add their own MOK to the ESP that the user might blindly accept next time they boot. Especially if they time it for when there is a legitimate new MOK in the ESP waiting to be accepted on next boot, so that the user is predisposed to accepting a new key.<p>They can also replace shim with other binaries with other vulnerabilities that were signed by the MS key in the past, in case DBX hasn&#x27;t been updated with their hashes.<p>&gt;The whole point of secure boot is that an attacker with even that level of access can&#x27;t boot the machine in an authenticated way (and e.g. make the disk encryption key available).<p>Someone with enough privileged access to write to the ESP (ie root) can also just exfiltrate your disk contents at that point.</div><br/><div id="39136547" class="c"><input type="checkbox" id="c-39136547" checked=""/><div class="controls bullet"><span class="by">lmm</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39136207">parent</a><span>|</span><a href="#39133414">next</a><span>|</span><label class="collapse" for="c-39136547">[-]</label><label class="expand" for="c-39136547">[5 more]</label></div><br/><div class="children"><div class="content">&gt; Someone with enough privileged access to write to the ESP (ie root) can also add their own MOK to the ESP that the user might blindly accept next time they boot. Especially if they time it for when there is a legitimate new MOK in the ESP waiting to be accepted on next boot, so that the user is predisposed to accepting a new key.<p>&gt; They can also replace shim with other binaries with other vulnerabilities that were signed by the MS key in the past, in case DBX hasn&#x27;t been updated with their hashes.<p>Neither of those sounds like a sure thing. The first relies on the user not checking the key, and is exposing the attacker to a lot of risk if they do. The second relies on DBX not being updated, for which the remedy is &quot;don&#x27;t do that&quot;.<p>&gt; Someone with enough privileged access to write to the ESP (ie root) can also just exfiltrate your disk contents at that point.<p>The idea is that your main data partition is encrypted with a key held in a secure enclave and can only be retrieved after a secure boot. (Or, y&#x27;know, any of the other things people would use secure boot for). Your boot partition has to be unencrypted so you can boot from it, but there&#x27;s no sensitive data on there, and an attacker with write access can&#x27;t &quot;rootkit&quot; it because if they replace the bootloader with a different one then it will be unsigned and break the chain of trust. Again if this stuff didn&#x27;t work then there would be no point in secure boot at all.</div><br/><div id="39136664" class="c"><input type="checkbox" id="c-39136664" checked=""/><div class="controls bullet"><span class="by">Arnavion</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39136547">parent</a><span>|</span><a href="#39133414">next</a><span>|</span><label class="collapse" for="c-39136664">[-]</label><label class="expand" for="c-39136664">[4 more]</label></div><br/><div class="children"><div class="content">&gt;The second relies on DBX not being updated, for which the remedy is &quot;don&#x27;t do that&quot;.<p>Not updating DBX is the default state. Updating it is what requires effort.<p>How many devices actually have up-to-date DBX? I know I mentioned LVFS in my first comment, but I have to wonder how many Linux devices with SB enabled actually use it. The ones that don&#x27;t will not have updated their DBX since they were manufactured.<p>&gt;The idea is that your main data partition is encrypted with a key held in a secure enclave [...]<p>You&#x27;re missing the point. An attacker that can write to the ESP is root on the live system <i>right now</i>. It can exfiltrate the contents of `&#x2F;` <i>right now</i>. Or if it can&#x27;t exfiltrate right now, it can install an OS service to do that on future boots.</div><br/><div id="39136838" class="c"><input type="checkbox" id="c-39136838" checked=""/><div class="controls bullet"><span class="by">lilyball</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39136664">parent</a><span>|</span><a href="#39137306">next</a><span>|</span><label class="collapse" for="c-39136838">[-]</label><label class="expand" for="c-39136838">[1 more]</label></div><br/><div class="children"><div class="content">If the boot partition isn&#x27;t encrypted, doesn&#x27;t this mean an attacker with physical access to the machine can remove the drive, plug it into their own machine, overwrite the boot partition, then restore the drive back in the original machine? In that scenario they don&#x27;t have access to the unencrypted root filesystem.</div><br/></div></div><div id="39137306" class="c"><input type="checkbox" id="c-39137306" checked=""/><div class="controls bullet"><span class="by">lmm</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39136664">parent</a><span>|</span><a href="#39136838">prev</a><span>|</span><a href="#39133414">next</a><span>|</span><label class="collapse" for="c-39137306">[-]</label><label class="expand" for="c-39137306">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Not updating DBX is the default state. Updating it is what requires effort.<p>Up to a point, but that&#x27;s true for almost everything in software. Not updating your OS etc. is the default state, and if it&#x27;s not up to date it will be full of holes. That&#x27;s life.<p>&gt; You&#x27;re missing the point. An attacker that can write to the ESP is root on the live system right now. It can exfiltrate the contents of `&#x2F;` right now. Or if it can&#x27;t exfiltrate right now, it can install an OS service to do that on future boots.<p>If they have root on the live system then they don&#x27;t need to mess around attacking secure boot at all. The point is &quot;evil maid&quot; style attacks where someone messes with the boot partition (and&#x2F;or firmware) by booting off another device. Again, <i>this is the whole point of Secure Boot</i>; if you don&#x27;t care about that kind of scenario then why would you ever be using secure boot at all?</div><br/><div id="39138051" class="c"><input type="checkbox" id="c-39138051" checked=""/><div class="controls bullet"><span class="by">Arnavion</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39137306">parent</a><span>|</span><a href="#39133414">next</a><span>|</span><label class="collapse" for="c-39138051">[-]</label><label class="expand" for="c-39138051">[1 more]</label></div><br/><div class="children"><div class="content">&gt;The point is &quot;evil maid&quot; style attacks where someone messes with the boot partition (and&#x2F;or firmware) by booting off another device.<p>This subthread is descended from <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=39135275">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=39135275</a> which talks about &quot;remote attackers&quot;. Nobody&#x27;s talking about evil maid attacks.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="39133414" class="c"><input type="checkbox" id="c-39133414" checked=""/><div class="controls bullet"><span class="by">rany_</span><span>|</span><a href="#39133356">parent</a><span>|</span><a href="#39135275">prev</a><span>|</span><a href="#39133538">next</a><span>|</span><label class="collapse" for="c-39133414">[-]</label><label class="expand" for="c-39133414">[35 more]</label></div><br/><div class="children"><div class="content">&gt; because MS refuses to sign GPL bootloaders like grub in general<p>This is because MSFT lawyers think that if you sign a GPLv3 licensed bootloader like GRUB, you might have a right to compel the developer into handing over their signing keys.<p>Source: <a href="https:&#x2F;&#x2F;techcommunity.microsoft.com&#x2F;t5&#x2F;hardware-dev-center&#x2F;updated-uefi-signing-requirements&#x2F;ba-p&#x2F;1062916" rel="nofollow">https:&#x2F;&#x2F;techcommunity.microsoft.com&#x2F;t5&#x2F;hardware-dev-center&#x2F;u...</a></div><br/><div id="39134072" class="c"><input type="checkbox" id="c-39134072" checked=""/><div class="controls bullet"><span class="by">gorkish</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39133414">parent</a><span>|</span><a href="#39133972">next</a><span>|</span><label class="collapse" for="c-39134072">[-]</label><label class="expand" for="c-39134072">[13 more]</label></div><br/><div class="children"><div class="content">I&#x27;m a strong advocate of open source who also happens to agree with microsoft&#x27;s lawyers on this. Whether you believe this consequence of GPLv3 is intentional or unintentional, it is a consequence. The idea of somehow putting blame back on Microsoft for this is similarly twisted.<p>Vendors shipping absolute shit implementation of SecureBoot that don&#x27;t give the users authority over their own systems are the problem.<p>Let&#x27;s revisit this topic in the future to see how many systems actually get patched to revoke these signatures. My guess is that nearly 100% of shipping systems 1 year from now will still have these keys and still boot these vulnerable signed binaries right out of the box.<p>One might hope that this issue thrusts the theater of Secure Boot into the public discourse, but like most other forms of irrelevant DRM, it will simply remain a hurdle that everyone has to keep jumping over until the end of time.</div><br/><div id="39134378" class="c"><input type="checkbox" id="c-39134378" checked=""/><div class="controls bullet"><span class="by">AshamedCaptain</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39134072">parent</a><span>|</span><a href="#39139750">next</a><span>|</span><label class="collapse" for="c-39134378">[-]</label><label class="expand" for="c-39134378">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Vendors shipping absolute shit implementation of SecureBoot that don&#x27;t give the users authority over their own systems are the problem.<p>Microsoft itself has been the _first_ vendor who shipped systems where SecureBoot could neither be disabled nor the whitelist of signatures&#x2F;keys replaced with your own. This would be _the only_ scenario where the GPLv3 would have anything to say ... if Microsoft were to be also shipping GRUB in that system, which they weren&#x27;t .<p>And such scenario is precisely one of those the GPLv3 was designed to impede.  So it is most definitely intentional.<p>There is no one to blame other than Microsoft.</div><br/><div id="39137560" class="c"><input type="checkbox" id="c-39137560" checked=""/><div class="controls bullet"><span class="by">smileybarry</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39134378">parent</a><span>|</span><a href="#39139750">next</a><span>|</span><label class="collapse" for="c-39137560">[-]</label><label class="expand" for="c-39137560">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Microsoft itself has been the _first_ vendor who shipped systems where SecureBoot could neither be disabled nor the whitelist of signatures&#x2F;keys replaced with your own.<p>It’s misleading to mention that but not say that you’re referring to Surface RT tablets, which were Microsoft’s equivalent of an iPad ecosystem — only Store apps, OEM OS only, etc. It’s also running a different flavor of Windows on an ARM processor.<p>Surface Pro devices have always had toggleable &amp; configurable Secure Boot.</div><br/><div id="39140189" class="c"><input type="checkbox" id="c-39140189" checked=""/><div class="controls bullet"><span class="by">AshamedCaptain</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39137560">parent</a><span>|</span><a href="#39139750">next</a><span>|</span><label class="collapse" for="c-39140189">[-]</label><label class="expand" for="c-39140189">[1 more]</label></div><br/><div class="children"><div class="content">Why misleading? It shows exactly what the long-term MS strategy was, what SecureBoot was designed for, and it also shows exactly who shipped the first &quot;shitty&quot; SecureBoot implementation. People had to resort to cracks in order to run plain Win32 apps! Except, of course, Office. That one is the only Win32 app which was allowed. Good ol&#x27;, classy Microsoft.<p>&gt; Surface Pro devices have always had toggleable &amp; configurable Secure Boot.<p>Not at all. While it is true that Secure Boot has been deactivable in the &quot;Pro&quot; family, disabling Secure Boot results in Scary Boot Prompts (TM) (a _permanent_,  literal red screen warning during the boot process that would drive most users away). _To this day_, there is no way to install your own Secure Boot keys in the Surface UEFI setup. Again, one of the &quot;shitty&quot; implementations, and comes from Microsoft!<p>It&#x27;s actually worse than that. At least the first two Surface Pro iterations didn&#x27;t even ship with the UEFI CA key, meaning you could not even install MS-signed Linux distros! The only way would be to disable Secure Boot, and thus  have to suffer the red Scary Boot Prompts (TM) on every boot prompt. Again, MS leading the way for the other OEMs in terms of shittiness.<p>Almost two years afterwards, MS started shipping a WMI-based method that would allow you to install the MS UEFI CA. So  you had to install Windows and run a Windows program in order to be able to install an OS signed with your own keys. This is _still true_ even in the latest iteration of Surface Pro devices. This is the example that MS sets for other OEMs.<p>And almost 10 years later, Lenovo starts disabling the UEFI MS CA key by default....</div><br/></div></div></div></div></div></div><div id="39139750" class="c"><input type="checkbox" id="c-39139750" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39134072">parent</a><span>|</span><a href="#39134378">prev</a><span>|</span><a href="#39139726">next</a><span>|</span><label class="collapse" for="c-39139750">[-]</label><label class="expand" for="c-39139750">[1 more]</label></div><br/><div class="children"><div class="content">Even on Azure, GNU&#x2F;Linux runs on top of Windows based hypervisor (Cloud Host[0]), and WSL is a VM anyway.<p>Thus from Microsoft&#x27;s point of view all is well.<p>[0] - <a href="https:&#x2F;&#x2F;techcommunity.microsoft.com&#x2F;t5&#x2F;windows-os-platform-blog&#x2F;azure-host-os-cloud-host&#x2F;ba-p&#x2F;3709528" rel="nofollow">https:&#x2F;&#x2F;techcommunity.microsoft.com&#x2F;t5&#x2F;windows-os-platform-b...</a></div><br/></div></div><div id="39139726" class="c"><input type="checkbox" id="c-39139726" checked=""/><div class="controls bullet"><span class="by">ogurechny</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39134072">parent</a><span>|</span><a href="#39139750">prev</a><span>|</span><a href="#39134241">next</a><span>|</span><label class="collapse" for="c-39139726">[-]</label><label class="expand" for="c-39139726">[1 more]</label></div><br/><div class="children"><div class="content">You seem to still have an impression that “secure” here is somehow related to “security” of the users or their “authority over their own systems”, when in fact it only means “securing” the position of the company that gets to control the thing. Even if Microsoft fires everyone tomorrow and closes, Secure Boot key infrastructure and agreements will still cost a lot. Just like patent pools of former industrial giants that don&#x27;t just disappear.<p>In the same manner, insane DRM schemes are not made to be solid and unbreakable, or because sellers are worried about home copies (made by people who won&#x27;t buy the product anyway otherwise). DRM is just a convoluted enough mesaure to protect corporations from their fellow corporations who would gladly make the same thing, but more convenient, or cheaper, or more profitable, and ride the “piracy” wave. In the same manner, Google didn&#x27;t shove HTTPS into everything because it was worried about the users, but because it was worried about other companies with massive traffic spying abilities grabbing the data Google collected for itself. Et cetera, et cetera.</div><br/></div></div><div id="39134241" class="c"><input type="checkbox" id="c-39134241" checked=""/><div class="controls bullet"><span class="by">SahAssar</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39134072">parent</a><span>|</span><a href="#39139726">prev</a><span>|</span><a href="#39133972">next</a><span>|</span><label class="collapse" for="c-39134241">[-]</label><label class="expand" for="c-39134241">[7 more]</label></div><br/><div class="children"><div class="content">Wouldn&#x27;t it be the same scenario as if I sign a release binary with a GPG key, or even sign a commit with GPL code with a GPG key?<p>I don&#x27;t get what is different between signing workflows that OSS has used for decades and this?</div><br/><div id="39134394" class="c"><input type="checkbox" id="c-39134394" checked=""/><div class="controls bullet"><span class="by">AshamedCaptain</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39134241">parent</a><span>|</span><a href="#39133972">next</a><span>|</span><label class="collapse" for="c-39134394">[-]</label><label class="expand" for="c-39134394">[6 more]</label></div><br/><div class="children"><div class="content">The difference starts when the _right_ signature is required to continue using the software, preventing you from effectively modifying the software.</div><br/><div id="39135267" class="c"><input type="checkbox" id="c-39135267" checked=""/><div class="controls bullet"><span class="by">taeric</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39134394">parent</a><span>|</span><a href="#39133972">next</a><span>|</span><label class="collapse" for="c-39135267">[-]</label><label class="expand" for="c-39135267">[5 more]</label></div><br/><div class="children"><div class="content">Couldn&#x27;t they release a signature separate from the thing they signed?  Leaving it as work that the open source world has to do to combine them into the derivative work?  Surely an attestation&#x2F;signature would be a fair use derivative work?</div><br/><div id="39136656" class="c"><input type="checkbox" id="c-39136656" checked=""/><div class="controls bullet"><span class="by">amluto</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39135267">parent</a><span>|</span><a href="#39133972">next</a><span>|</span><label class="collapse" for="c-39136656">[-]</label><label class="expand" for="c-39136656">[4 more]</label></div><br/><div class="children"><div class="content">Would it?<p>Suppose I write some GPLv3 code. You incorporate that code into a program called shim-gpl3 and release the result under the GPLv3.  You also release a binary. Microsoft signs that binary and releases the signature but does not redistribute the binary. Microsoft says that they don’t think that the signature is a copyrightable work but that, to the extent that it is, it is permissively licensed (CC0, MIT, whatever).  A Linux distribution builds an installer that contains, shim-gpl3 and Microsoft’s signature.  The recipient of the distribution asks the distributor for source to the GPL v3 parts of their distro.<p>The problem (as I see it) is that the distributor cannot comply.  This is as intended!  The media, as is, runs on an effectively TiVo-ized machine, and neither the distributor nor the end-user can build it from source such that the result works if modifications are applied.</div><br/><div id="39136927" class="c"><input type="checkbox" id="c-39136927" checked=""/><div class="controls bullet"><span class="by">taeric</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39136656">parent</a><span>|</span><a href="#39133972">next</a><span>|</span><label class="collapse" for="c-39136927">[-]</label><label class="expand" for="c-39136927">[3 more]</label></div><br/><div class="children"><div class="content">If I publicly attest to something, and provide cryptographic proof that you can verify the version you are looking at is the one that I attest to, then I do not see how that is meaningfully a derivative work of what we are attesting.  It is not substantial enough in size or form for it to be a derivative work.  So, from that end, it seems we agree that the signature itself is not a problem.<p>Now, it seems what you are implying is that they need a new signature that must be created at build time.  I&#x27;m asking for a much more restrictive bootloader that would have to be buildable with a repeatable process so that someone else can create the same one down to the bit level.  Is this as useful as one that is not as restricted?  No, but it would be a way past the legal problem?</div><br/><div id="39137639" class="c"><input type="checkbox" id="c-39137639" checked=""/><div class="controls bullet"><span class="by">amluto</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39136927">parent</a><span>|</span><a href="#39133972">next</a><span>|</span><label class="collapse" for="c-39137639">[-]</label><label class="expand" for="c-39137639">[2 more]</label></div><br/><div class="children"><div class="content">&gt; I&#x27;m asking for a much more restrictive bootloader that would have to be buildable with a repeatable process so that someone else can create the same one down to the bit level.<p>Reproducible builds are fantastic. But I doubt that, in this instance, it would be a valid way around the GPL.<p>Maybe if one, as an art project, made a project that, when compiled, had a particularly aesthetically pleasing binary representation, it would be okay. But we’re talking specifically about a signature needed to run the software, which appears to fit the definition of “Installation Information” in section 6 of the GPLv3.</div><br/><div id="39138736" class="c"><input type="checkbox" id="c-39138736" checked=""/><div class="controls bullet"><span class="by">taeric</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39137639">parent</a><span>|</span><a href="#39133972">next</a><span>|</span><label class="collapse" for="c-39138736">[-]</label><label class="expand" for="c-39138736">[1 more]</label></div><br/><div class="children"><div class="content">My point is the signature can be combined after the fact.  Basically, I can give you a binary that is the signature for another binary that is the boot loader, built to certain specifications.  You build that, and combine with this signature, and you are good to go.  If the build doesn&#x27;t build exactly the same, signature will be invalid and you can&#x27;t use it.<p>Note that this is VERY limited in how much it could possibly help.  But I don&#x27;t see why it wouldn&#x27;t be permissible by all licenses involved.  It doesn&#x27;t require the signing key, but a valid signature.  For that device, it is locked down enough that the only installer that can work is the one that matches this signature.  If installing somewhere else, you don&#x27;t need the signature anymore, and can make your own or use an unsigned loader.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="39133972" class="c"><input type="checkbox" id="c-39133972" checked=""/><div class="controls bullet"><span class="by">kmeisthax</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39133414">parent</a><span>|</span><a href="#39134072">prev</a><span>|</span><a href="#39134441">next</a><span>|</span><label class="collapse" for="c-39133972">[-]</label><label class="expand" for="c-39133972">[4 more]</label></div><br/><div class="children"><div class="content">If this were true, it probably applies to both GPLv2 <i>and</i> v3, since they both require installation instructions.<p>v3 adds an additional requirement that if you mere-aggregate GPL software and other software, and put the aggregate into a consumer product, you can&#x27;t disable the other software because the GPL software was modified. I don&#x27;t believe this would apply in the situation that these shims are intended for - i.e. installing an OS onto a desktop machine, as those are supposed to allow you to enroll new Secure Boot keys anyway.<p>I also don&#x27;t understand why a signature from Microsoft would actually trip <i>any</i> of the above-mentioned requirements. Microsoft is not distributing the software, they&#x27;re just signing it - i.e. distributing a message saying &quot;this shim with this hash can run&quot;. That&#x27;s not a copyright violation, so the GPL doesn&#x27;t come into play at all.<p>Perhaps there&#x27;s something else Microsoft does with their signatures that might trip GPL...</div><br/><div id="39134050" class="c"><input type="checkbox" id="c-39134050" checked=""/><div class="controls bullet"><span class="by">bee_rider</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39133972">parent</a><span>|</span><a href="#39134014">next</a><span>|</span><label class="collapse" for="c-39134050">[-]</label><label class="expand" for="c-39134050">[1 more]</label></div><br/><div class="children"><div class="content">Maybe Microsoft just doesn’t want to sign a GPL bootloader and so they had their lawyers come up with nebulous concerns as a fig leaf. Microsoft &lt;3 Open Source after all, can’t be seen as reluctant for business reasons.</div><br/></div></div><div id="39134014" class="c"><input type="checkbox" id="c-39134014" checked=""/><div class="controls bullet"><span class="by">rany_</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39133972">parent</a><span>|</span><a href="#39134050">prev</a><span>|</span><a href="#39134441">next</a><span>|</span><label class="collapse" for="c-39134014">[-]</label><label class="expand" for="c-39134014">[2 more]</label></div><br/><div class="children"><div class="content">To my knowledge, they aren&#x27;t the ones signing the software. Microsoft runs a UEFI CA and just bless the developer&#x27;s sub-CA. The developer is fully in control of their own CA and could sign whatever they want.</div><br/><div id="39134226" class="c"><input type="checkbox" id="c-39134226" checked=""/><div class="controls bullet"><span class="by">AshamedCaptain</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39134014">parent</a><span>|</span><a href="#39134441">next</a><span>|</span><label class="collapse" for="c-39134226">[-]</label><label class="expand" for="c-39134226">[1 more]</label></div><br/><div class="children"><div class="content">No. I don&#x27;t know if Microsoft &quot;partners&quot; have some special privilege, but for 3rd parties Microsoft will _never_ sign your CA. They sign individual binaries.</div><br/></div></div></div></div></div></div><div id="39134441" class="c"><input type="checkbox" id="c-39134441" checked=""/><div class="controls bullet"><span class="by">riedel</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39133414">parent</a><span>|</span><a href="#39133972">prev</a><span>|</span><a href="#39134059">next</a><span>|</span><label class="collapse" for="c-39134441">[-]</label><label class="expand" for="c-39134441">[1 more]</label></div><br/><div class="children"><div class="content">I wonder if this is a consequence of the judicial system in the US. In Europe there is something called promesse de porte-fort (contract at the expense of third parties)  as Microsoft is not party in the licence agreement I would say.  Some effects of the GPL ( or rather interpretations) are just plain ineffective. I say this while not questioning the copy left in general.</div><br/></div></div><div id="39134059" class="c"><input type="checkbox" id="c-39134059" checked=""/><div class="controls bullet"><span class="by">AshamedCaptain</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39133414">parent</a><span>|</span><a href="#39134441">prev</a><span>|</span><a href="#39133444">next</a><span>|</span><label class="collapse" for="c-39134059">[-]</label><label class="expand" for="c-39134059">[1 more]</label></div><br/><div class="children"><div class="content">Note that under no circumstances can it &quot;compel&quot; you to hand over the signing keys. It can compel you to _stop infringing_, though. Which you may do by either stop redistributing GRUB , or by allowing your customers to install their own signatures, or if you are really stupid, by giving out your private keys. But you cannot be forced to do the later.<p>As usual it&#x27;s just FUD.</div><br/></div></div><div id="39133444" class="c"><input type="checkbox" id="c-39133444" checked=""/><div class="controls bullet"><span class="by">nailer</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39133414">parent</a><span>|</span><a href="#39134059">prev</a><span>|</span><a href="#39133538">next</a><span>|</span><label class="collapse" for="c-39133444">[-]</label><label class="expand" for="c-39133444">[15 more]</label></div><br/><div class="children"><div class="content">&gt; FYI the reason is that the GPL would require you to hand over the signing keys. If you sign a GPLv3 licensed bootloader like GRUB, you&#x27;re forced to also make public the signing key... which defeats the purpose.<p>That seems to be a ridiculous interpretation of the GPL (no personal offense meant, I&#x27;m sure you&#x27;re a fine person but this idea is genuinely very silly).<p>Signatures on binaries are not part of the source code, and therefore the GPL isn&#x27;t concerned with them.<p>Think of:<p>- every signed binary for an open source app on a Linux distro or Windows install<p>- Every open source web app delivered over a TLS cert<p>Nobody has ever considered that the private keys used to sign the package, executable or web site cert to be required by the GPL.</div><br/><div id="39133649" class="c"><input type="checkbox" id="c-39133649" checked=""/><div class="controls bullet"><span class="by">snthd</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39133444">parent</a><span>|</span><a href="#39133462">next</a><span>|</span><label class="collapse" for="c-39133649">[-]</label><label class="expand" for="c-39133649">[1 more]</label></div><br/><div class="children"><div class="content">&gt;are not part of the source code, and therefore the GPL isn&#x27;t concerned with them.<p>IIRC the GPL concerns itself with buildscripts etc. and GPLv3 was written with the tivoization of v2 in mind.<p><a href="https:&#x2F;&#x2F;www.gnu.org&#x2F;licenses&#x2F;quick-guide-gplv3.html" rel="nofollow">https:&#x2F;&#x2F;www.gnu.org&#x2F;licenses&#x2F;quick-guide-gplv3.html</a><p>&gt;Protecting Your Right to Tinker<p>&gt;Tivoization is a dangerous attempt to curtail users&#x27; freedom: the right to modify your software will become meaningless if none of your computers let you do it. GPLv3 stops tivoization by requiring the distributor to provide you with whatever information or data is necessary to install modified software on the device. This may be as simple as a set of instructions, or it may include special data such as cryptographic keys or information about how to bypass an integrity check in the hardware. It will depend on how the hardware was designed—but no matter what information you need, you must be able to get it.<p>&gt;This requirement is limited in scope. Distributors are still allowed to use cryptographic keys for any purpose, and they&#x27;ll only be required to disclose a key if you need it to modify GPLed software on the device they gave you.</div><br/></div></div><div id="39133462" class="c"><input type="checkbox" id="c-39133462" checked=""/><div class="controls bullet"><span class="by">rany_</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39133444">parent</a><span>|</span><a href="#39133649">prev</a><span>|</span><a href="#39133803">next</a><span>|</span><label class="collapse" for="c-39133462">[-]</label><label class="expand" for="c-39133462">[9 more]</label></div><br/><div class="children"><div class="content">&gt; Code submitted for UEFI signing must not be subject to GPLv3 or any license that purports to give someone the right to demand authorization keys to be able to install modified forms of the code on a device. Code that is subject to such a license that has already been signed might have that signature revoked. For example, GRUB 2 is licensed under GPLv3 and will not be signed.<p>It does according to MSFT lawyers: <a href="https:&#x2F;&#x2F;techcommunity.microsoft.com&#x2F;t5&#x2F;hardware-dev-center&#x2F;updated-uefi-signing-requirements&#x2F;ba-p&#x2F;1062916" rel="nofollow">https:&#x2F;&#x2F;techcommunity.microsoft.com&#x2F;t5&#x2F;hardware-dev-center&#x2F;u...</a></div><br/><div id="39133595" class="c"><input type="checkbox" id="c-39133595" checked=""/><div class="controls bullet"><span class="by">nailer</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39133462">parent</a><span>|</span><a href="#39133803">next</a><span>|</span><label class="collapse" for="c-39133595">[-]</label><label class="expand" for="c-39133595">[8 more]</label></div><br/><div class="children"><div class="content">&gt; any license that purports to give someone the right to demand authorization keys to be able to install modified forms of the code on a device<p>There&#x27;s nowhere in the GPLv3 that says that (then again, that sentence doesn&#x27;t imply there is). Anyone can download and modify the grub source code, and compile it. It doesn&#x27;t mean Microsoft is obliged to sign their fork. I wonder if there&#x27;s something that confused (or was bad faith interpreted) by Microsoft&#x27;s lawyers?<p>Maybe someone can just use another open source license? Ie, anything not called &#x27;GPLv3&#x27; which, like every other OSS license, does not purport to give someone the right to demand authorization keys to be able to install modified forms of the code on a device.</div><br/><div id="39140259" class="c"><input type="checkbox" id="c-39140259" checked=""/><div class="controls bullet"><span class="by">tsimionescu</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39133595">parent</a><span>|</span><a href="#39133790">next</a><span>|</span><label class="collapse" for="c-39140259">[-]</label><label class="expand" for="c-39140259">[1 more]</label></div><br/><div class="children"><div class="content">Actually, if you ask the Software Freedom Conservancy, not only is this a requirement of the GPLv3, it is in fact also required by the GPLv2 [0]:<p>&gt; GPLv2 assures, to the purchaser of an embedded product, their absolute right to receive the information necessary to install a modified version of the GPLv2&#x27;d works. [...] installation of the GPL&#x27;d works must succeed and operate in a useful and functional fashion on the device.<p>I believe the FSF position is different, but it&#x27;s unclear. At least one member of the SFC who was a member of the FSF in the past (Bradley Kuhn) [1] believes that the FSF has the same position - that both GPLv2 software and GPLv3 software must be accompanied by full instructions (and ability) for a user to install their own modified versions on any hardware containing this software. He believes that the only difference with GPLv3 is that, in addition to this requirement, other proprietary software on the device must continue to operate just as before; whereas, with the GPLv2, it&#x27;s fine for other proprietary software to say &quot;you&#x27;re running an unsigned version of Linux, failing to start&quot;.  Linus Torvalds&#x27; public statements about the GPLv3, as well as the FSF page on Tivoization [2], seem to suggest otherwise.<p>Either way, this is not some invention of MS lawyers meant to make the GPL look scarier, it is very much how the free software community sees the GPL working.<p>[0] <a href="https:&#x2F;&#x2F;sfconservancy.org&#x2F;blog&#x2F;2021&#x2F;mar&#x2F;25&#x2F;install-gplv2&#x2F;" rel="nofollow">https:&#x2F;&#x2F;sfconservancy.org&#x2F;blog&#x2F;2021&#x2F;mar&#x2F;25&#x2F;install-gplv2&#x2F;</a><p>[1] <a href="https:&#x2F;&#x2F;sfconservancy.org&#x2F;blog&#x2F;2021&#x2F;jul&#x2F;23&#x2F;tivoization-and-the-gpl-right-to-install&#x2F;" rel="nofollow">https:&#x2F;&#x2F;sfconservancy.org&#x2F;blog&#x2F;2021&#x2F;jul&#x2F;23&#x2F;tivoization-and-t...</a><p>[2] <a href="https:&#x2F;&#x2F;www.gnu.org&#x2F;philosophy&#x2F;tivoization.en.html" rel="nofollow">https:&#x2F;&#x2F;www.gnu.org&#x2F;philosophy&#x2F;tivoization.en.html</a></div><br/></div></div><div id="39133790" class="c"><input type="checkbox" id="c-39133790" checked=""/><div class="controls bullet"><span class="by">roblabla</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39133595">parent</a><span>|</span><a href="#39140259">prev</a><span>|</span><a href="#39133692">next</a><span>|</span><label class="collapse" for="c-39133790">[-]</label><label class="expand" for="c-39133790">[3 more]</label></div><br/><div class="children"><div class="content">&gt; There&#x27;s nowhere in the GPLv3 that says that (then again, that sentence doesn&#x27;t imply there is)<p>It does, commonly called the anti-tivoization clause. Here&#x27;s the text:<p>&gt; “Installation Information” for a User Product means any methods, procedures, authorization keys, or other information required to install and execute modified versions of a covered work in that User Product from a modified version of its Corresponding Source. The information must suffice to ensure that the continued functioning of the modified object code is in no case prevented or interfered with solely because modification has been made.<p>&gt; If you convey an object code work under this section in, or with, or specifically for use in, a User Product, and the conveying occurs as part of a transaction in which the right of possession and use of the User Product is transferred to the recipient in perpetuity or for a fixed term (regardless of how the transaction is characterized), the Corresponding Source conveyed under this section must be accompanied by the Installation Information. But this requirement does not apply if neither you nor any third party retains the ability to install modified object code on the User Product (for example, the work has been installed in ROM).<p>&gt; The requirement to provide Installation Information does not include a requirement to continue to provide support service, warranty, or updates for a work that has been modified or installed by the recipient, or for the User Product in which it has been modified or installed. Access to a network may be denied when the modification itself materially and adversely affects the operation of the network or violates the rules and protocols for communication across the network.<p>&gt; Corresponding Source conveyed, and Installation Information provided, in accord with this section must be in a format that is publicly documented (and with an implementation available to the public in source code form), and must require no special password or key for unpacking, reading or copying.<p>From GPLv3, section 6. Conveying Non-Source Forms.</div><br/><div id="39134740" class="c"><input type="checkbox" id="c-39134740" checked=""/><div class="controls bullet"><span class="by">cesarb</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39133790">parent</a><span>|</span><a href="#39133929">next</a><span>|</span><label class="collapse" for="c-39134740">[-]</label><label class="expand" for="c-39134740">[1 more]</label></div><br/><div class="children"><div class="content">&gt; [...] any methods, procedures, authorization keys, or other information required to install and execute modified versions of a covered work [...]<p>From what I understand, allowing the user to install their own trusted keys is enough; there&#x27;s no need to allow users to sign with the &quot;official&quot; trusted key as long as that alternative exists.<p>I suspect that Microsoft&#x27;s worry is that they don&#x27;t control the firmware (the motherboard manufacturers do), and some UEFI firmware might be broken and not allow installing alternative trusted keys. I believe shim solves this by adding an intermediate layer which also allows the user to manually install their own trusted keys, even if the firmware doesn&#x27;t.</div><br/></div></div><div id="39133929" class="c"><input type="checkbox" id="c-39133929" checked=""/><div class="controls bullet"><span class="by">nailer</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39133790">parent</a><span>|</span><a href="#39134740">prev</a><span>|</span><a href="#39133692">next</a><span>|</span><label class="collapse" for="c-39133929">[-]</label><label class="expand" for="c-39133929">[1 more]</label></div><br/><div class="children"><div class="content">You&#x27;re correct. See my response to the other poster. <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=39133890">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=39133890</a></div><br/></div></div></div></div><div id="39133692" class="c"><input type="checkbox" id="c-39133692" checked=""/><div class="controls bullet"><span class="by">rany_</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39133595">parent</a><span>|</span><a href="#39133790">prev</a><span>|</span><a href="#39133803">next</a><span>|</span><label class="collapse" for="c-39133692">[-]</label><label class="expand" for="c-39133692">[3 more]</label></div><br/><div class="children"><div class="content">They&#x27;re probably referring to this part of the GPLv3 license:<p>&gt; “Installation Information” for a User Product means any methods, procedures, authorization keys, or other information required to install and execute modified versions of a covered work in that User Product from a modified version of its Corresponding Source. The information must suffice to ensure that the continued functioning of the modified object code is in no case prevented or interfered with solely because modification has been made.<p>&gt; If you convey an object code work under this section in, or with, or specifically for use in, a User Product, and the conveying occurs as part of a transaction in which the right of possession and use of the User Product is transferred to the recipient in perpetuity or for a fixed term (regardless of how the transaction is characterized), the Corresponding Source conveyed under this section must be accompanied by the Installation Information. But this requirement does not apply if neither you nor any third party retains the ability to install modified object code on the User Product (for example, the work has been installed in ROM).<p>I believe the MSFT lawyers are right here, but obviously I&#x27;m not a lawyer.</div><br/><div id="39133890" class="c"><input type="checkbox" id="c-39133890" checked=""/><div class="controls bullet"><span class="by">nailer</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39133692">parent</a><span>|</span><a href="#39133803">next</a><span>|</span><label class="collapse" for="c-39133890">[-]</label><label class="expand" for="c-39133890">[2 more]</label></div><br/><div class="children"><div class="content">Thanks! I was looking for the word &#x27;sign&#x27; and couldn&#x27;t find it.<p>I now think I was wrong earlier.<p>Summarizing <a href="https:&#x2F;&#x2F;www.gnu.org&#x2F;licenses&#x2F;gpl-3.0.html" rel="nofollow">https:&#x2F;&#x2F;www.gnu.org&#x2F;licenses&#x2F;gpl-3.0.html</a>:<p>&gt; The information (ie &#x27;methods, procedures, authorization keys, or other information required to install and execute modified versions of a covered work&#x27;) must suffice to ensure that the continued functioning of the modified object code is in no case prevented or interfered with solely because modification has been made.<p>The purpose of allowing signing is exactly to ensure modified code does not function in that environment.<p>Yes MS (and you) would be right. GPLv2, BSD or MIT would be fine but GPLv3 would not.<p>-----------------------------------<p>Edit reply to baobun (rate limit means I can&#x27;t post)<p>I did think about that, but:<p>&gt; continued functioning of the modified object code<p>is vague. Does it mean a new firmware binary should continue working <i>on the same device</i> as the unmodified predecessor or using is a <i>new device</i> (that allows arbitrary entities to sign) considered to be &quot;continued functioning&quot;?</div><br/><div id="39134555" class="c"><input type="checkbox" id="c-39134555" checked=""/><div class="controls bullet"><span class="by">baobun</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39133890">parent</a><span>|</span><a href="#39133803">next</a><span>|</span><label class="collapse" for="c-39134555">[-]</label><label class="expand" for="c-39134555">[1 more]</label></div><br/><div class="children"><div class="content">Not exactly. AshamedCaptain gets it. If the device can be configured to trust a user-supplied key instead of or in addition to Microsoft&#x27;s, there is no need to provide any keys. This is up to the hardware supplier.<p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=39134059">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=39134059</a><p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=39133999">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=39133999</a></div><br/></div></div></div></div></div></div></div></div></div></div><div id="39133803" class="c"><input type="checkbox" id="c-39133803" checked=""/><div class="controls bullet"><span class="by">ajross</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39133444">parent</a><span>|</span><a href="#39133462">prev</a><span>|</span><a href="#39133538">next</a><span>|</span><label class="collapse" for="c-39133803">[-]</label><label class="expand" for="c-39133803">[4 more]</label></div><br/><div class="children"><div class="content">So... really no.  The overall spirit of the GPLv3 text is that the license demands preservation of the ability of an end user to modify and run the software they receive, see all the discussion at the time it was being drafted about &quot;TiVoization&quot;.  It does not specifically speak to encryption and signatures being used by the loader environment, but it&#x27;s absolutely reasonable to interpret it that way.<p>If I buy a laptop from Lenovo, and it uses a signed GPLv3 bootloader, and I want to modify and run a new version of that bootloader, I&#x27;m prevented by the lack of a signature.  That action is exactly what the license demands Lenovo permit.<p>Now, obviously this collides badly with the security requirements of the system.  So it&#x27;s likewise totally reasonable to imagine a court flipping the other way and refusing to literally enforce the GPLv3 because of the potential damage to the market.  But if that happens, then what gives Lenovo any right to ship that GPLv3 software at all?  Now they&#x27;re subject to the bootloader authors demanding they stop shipment of the infringing product.<p>No, the permissively-licensed shim compromise was the right choice.</div><br/><div id="39133999" class="c"><input type="checkbox" id="c-39133999" checked=""/><div class="controls bullet"><span class="by">AshamedCaptain</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39133803">parent</a><span>|</span><a href="#39133538">next</a><span>|</span><label class="collapse" for="c-39133999">[-]</label><label class="expand" for="c-39133999">[3 more]</label></div><br/><div class="children"><div class="content">&gt; No, the permissively-licensed shim compromise was the right choice.<p>Why? Why on earth?<p>IF Lenovo wanted to really ship a GPLv3 bootloader, all it imposes on Lenovo is they ship a method to install your own bootloader keys. Do you really disagree with that?<p>Lenovo has already shipped hardware which requires magical incantations to install anything other than Windows (see Secured Core hardware). Why on earth anyone shipping FLOSS software would drop their pants to allow precisely this shitshow is over me.</div><br/><div id="39134124" class="c"><input type="checkbox" id="c-39134124" checked=""/><div class="controls bullet"><span class="by">ajross</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39133999">parent</a><span>|</span><a href="#39133538">next</a><span>|</span><label class="collapse" for="c-39134124">[-]</label><label class="expand" for="c-39134124">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not the person you should be arguing with.   I didn&#x27;t write the license and I&#x27;m not the judge that would have to make the decision.  I was explaining why the collision between software freedom and end user security requirements (which is a very real thing!) is seen as a risk to the people shipping and supporting actual hardware.</div><br/><div id="39134136" class="c"><input type="checkbox" id="c-39134136" checked=""/><div class="controls bullet"><span class="by">AshamedCaptain</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39134124">parent</a><span>|</span><a href="#39133538">next</a><span>|</span><label class="collapse" for="c-39134136">[-]</label><label class="expand" for="c-39134136">[1 more]</label></div><br/><div class="children"><div class="content">There is no collision _whatsoever_ between software freedom and security requirements. It&#x27;s an illusion which happens to be highly convenient to those who want to promote an artificially controlled market and sell that as snake-oil security.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="39133538" class="c"><input type="checkbox" id="c-39133538" checked=""/><div class="controls bullet"><span class="by">JohnFen</span><span>|</span><a href="#39133356">parent</a><span>|</span><a href="#39133414">prev</a><span>|</span><a href="#39135259">next</a><span>|</span><label class="collapse" for="c-39133538">[-]</label><label class="expand" for="c-39133538">[4 more]</label></div><br/><div class="children"><div class="content">&gt; When you tell shim what EFI binary to boot, you can specify it as an HTTP URL.<p>Thank you for explaining this. I was seriously curious as to why a boot loader would be doing any network communications at all.</div><br/><div id="39134742" class="c"><input type="checkbox" id="c-39134742" checked=""/><div class="controls bullet"><span class="by">dharmab</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39133538">parent</a><span>|</span><a href="#39135259">next</a><span>|</span><label class="collapse" for="c-39134742">[-]</label><label class="expand" for="c-39134742">[3 more]</label></div><br/><div class="children"><div class="content">As a junior IT person long ago we used remote image booting in our lab to quickly test new software builds on real hardware. Back then it involved janky TFTP.</div><br/><div id="39135482" class="c"><input type="checkbox" id="c-39135482" checked=""/><div class="controls bullet"><span class="by">fullspectrumdev</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39134742">parent</a><span>|</span><a href="#39135259">next</a><span>|</span><label class="collapse" for="c-39135482">[-]</label><label class="expand" for="c-39135482">[2 more]</label></div><br/><div class="children"><div class="content">The horrors of PXE? Where you end up with a clusterfuck of DHCP and TFTP to load the correct image?</div><br/><div id="39138004" class="c"><input type="checkbox" id="c-39138004" checked=""/><div class="controls bullet"><span class="by">dharmab</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39135482">parent</a><span>|</span><a href="#39135259">next</a><span>|</span><label class="collapse" for="c-39138004">[-]</label><label class="expand" for="c-39138004">[1 more]</label></div><br/><div class="children"><div class="content">Exactly!</div><br/></div></div></div></div></div></div></div></div><div id="39133877" class="c"><input type="checkbox" id="c-39133877" checked=""/><div class="controls bullet"><span class="by">eurleif</span><span>|</span><a href="#39133356">parent</a><span>|</span><a href="#39135259">prev</a><span>|</span><a href="#39139788">next</a><span>|</span><label class="collapse" for="c-39133877">[-]</label><label class="expand" for="c-39133877">[4 more]</label></div><br/><div class="children"><div class="content">I&#x27;m curious how shim avoids the issue Microsoft is concerned about. Presumably if the anti-Tivoization clause of GPLv3 would require a Secure Boot signing key to be provided on request, it also requires a MOK signing key to be provided on request. The net result, then, seems to be that any arbitrary party can obtain signing keys which allow them to sign arbitrary code which will be booted (indirectly) via Secure Boot. How is that a meaningfully different outcome from the one we would have if Microsoft simply issued signing keys for GPLv3 projects like grub?</div><br/><div id="39133940" class="c"><input type="checkbox" id="c-39133940" checked=""/><div class="controls bullet"><span class="by">Arnavion</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39133877">parent</a><span>|</span><a href="#39134300">next</a><span>|</span><label class="collapse" for="c-39133940">[-]</label><label class="expand" for="c-39133940">[1 more]</label></div><br/><div class="children"><div class="content">MS doesn&#x27;t &quot;issue&quot; signing keys. MS <i>has</i> a signing key that it uses to sign bootloaders, and which is the default key in every UEFI that wants to be able to boot Windows with Secure Boot enabled. (*)<p>Their argument is that if they signed a particular distro&#x27;s GPL-licensed binary, then the user of that binary can ask for the source to be able to regenerate that binary, and that would require the signing key for completeness to be able to boot that binary.<p>shim is MIT-licensed so that requirement does not apply.<p>(*) To be precise, the key used to sign Windows and the key used to sign the rest are different, but both are enabled by default. That said, in 2022 there was talk about some UEFIs disabling that latter key by default: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=32066919">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=32066919</a></div><br/></div></div><div id="39134300" class="c"><input type="checkbox" id="c-39134300" checked=""/><div class="controls bullet"><span class="by">cesarb</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39133877">parent</a><span>|</span><a href="#39133940">prev</a><span>|</span><a href="#39139788">next</a><span>|</span><label class="collapse" for="c-39134300">[-]</label><label class="expand" for="c-39134300">[2 more]</label></div><br/><div class="children"><div class="content">&gt; I&#x27;m curious how shim avoids the issue Microsoft is concerned about.<p>IIRC, shim has a way to allow someone physically present to add additional keys which will also by trusted by that instance of shim. That&#x27;s enough to satisfy the GPL requirements.</div><br/><div id="39134369" class="c"><input type="checkbox" id="c-39134369" checked=""/><div class="controls bullet"><span class="by">Arnavion</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39134300">parent</a><span>|</span><a href="#39139788">next</a><span>|</span><label class="collapse" for="c-39134369">[-]</label><label class="expand" for="c-39134369">[1 more]</label></div><br/><div class="children"><div class="content">Yes, that is how the MOK enrolment process works. The distro drops its MOK (the one it used to sign the kernel into the distro kernel package) into the ESP. On next boot shim notices the new key and asks the user if they want to enroll it. Similarly if the user wants to enroll additional keys for kernel modules they built themselves or got from somewhere else, they can do the same process.</div><br/></div></div></div></div></div></div><div id="39139788" class="c"><input type="checkbox" id="c-39139788" checked=""/><div class="controls bullet"><span class="by">Dalewyn</span><span>|</span><a href="#39133356">parent</a><span>|</span><a href="#39133877">prev</a><span>|</span><a href="#39135129">next</a><span>|</span><label class="collapse" for="c-39139788">[-]</label><label class="expand" for="c-39139788">[1 more]</label></div><br/><div class="children"><div class="content">&gt;However, usually you use it to boot a local second-stage bootloader like grub (hence the name &quot;shim&quot;)<p>Would Windows Boot Manager not serve that purpose also? I have WBM chainloading into GRUB on one of my older BIOS machines, but I never got around to doing that on a UEFI machine so I&#x27;m not aware of any showstoppers.</div><br/></div></div><div id="39135129" class="c"><input type="checkbox" id="c-39135129" checked=""/><div class="controls bullet"><span class="by">RcouF1uZ4gsC</span><span>|</span><a href="#39133356">parent</a><span>|</span><a href="#39139788">prev</a><span>|</span><a href="#39135406">next</a><span>|</span><label class="collapse" for="c-39135129">[-]</label><label class="expand" for="c-39135129">[2 more]</label></div><br/><div class="children"><div class="content">&gt; When you tell shim what EFI binary to boot, you can specify it as an HTTP URL. If you do this and the HTTP server is malicious, it can trigger an out-of-bounds write.<p>Can a malicious server just send a compromised binary directly?</div><br/><div id="39137605" class="c"><input type="checkbox" id="c-39137605" checked=""/><div class="controls bullet"><span class="by">smileybarry</span><span>|</span><a href="#39133356">root</a><span>|</span><a href="#39135129">parent</a><span>|</span><a href="#39135406">next</a><span>|</span><label class="collapse" for="c-39137605">[-]</label><label class="expand" for="c-39137605">[1 more]</label></div><br/><div class="children"><div class="content">No, because that binary is still sigchecked against the locally-accepted keys (MOK). But an out-of-bounds write can be abused to bypass that.</div><br/></div></div></div></div></div></div><div id="39135406" class="c"><input type="checkbox" id="c-39135406" checked=""/><div class="controls bullet"><span class="by">Arch-TK</span><span>|</span><a href="#39133356">prev</a><span>|</span><a href="#39133363">next</a><span>|</span><label class="collapse" for="c-39135406">[-]</label><label class="expand" for="c-39135406">[1 more]</label></div><br/><div class="children"><div class="content">For anyone wondering &quot;Why would you boot from an untrusted&#x2F;compromised server?&quot; or &quot;Isn&#x27;t this moot? If the server is compromised, it can just send a malicious binary.&quot; the short answer is:<p>The binary that the shim ends up booting has to be signed by the MOK. So it should continue to provide the same security guarantees whether you&#x27;re booting from within a compromised network, over HTTP, or if you&#x27;re booting from a compromised server (even if it&#x27;s over HTTPS).<p>It&#x27;s also important to note that secure boot doesn&#x27;t prevent downgrades, so the fact that a compromised server could be utilised in a downgrade attack is not relevant. You would need to implement downgrade attack prevention in a more robust way regardless.<p>That being said, I don&#x27;t know _why_ the shim needs to support http boot (after all, nothing stops this from being implemented as second local EFI binary which handles it and is signed by the MOK), aside from maybe that it was thought to be a relatively simple feature to implement.</div><br/></div></div><div id="39133363" class="c"><input type="checkbox" id="c-39133363" checked=""/><div class="controls bullet"><span class="by">1970-01-01</span><span>|</span><a href="#39135406">prev</a><span>|</span><a href="#39136134">next</a><span>|</span><label class="collapse" for="c-39133363">[-]</label><label class="expand" for="c-39133363">[11 more]</label></div><br/><div class="children"><div class="content">The S in HTTP is to be used when important things are happening. This includes booting your device. HTTPS headers have always been encrypted. Still a good catch.</div><br/><div id="39133656" class="c"><input type="checkbox" id="c-39133656" checked=""/><div class="controls bullet"><span class="by">oconnore</span><span>|</span><a href="#39133363">parent</a><span>|</span><a href="#39133986">next</a><span>|</span><label class="collapse" for="c-39133656">[-]</label><label class="expand" for="c-39133656">[6 more]</label></div><br/><div class="children"><div class="content">HTTPS is irrelevant here. You can send incorrect headers in either.</div><br/><div id="39140307" class="c"><input type="checkbox" id="c-39140307" checked=""/><div class="controls bullet"><span class="by">tsimionescu</span><span>|</span><a href="#39133363">root</a><span>|</span><a href="#39133656">parent</a><span>|</span><a href="#39133683">next</a><span>|</span><label class="collapse" for="c-39140307">[-]</label><label class="expand" for="c-39140307">[1 more]</label></div><br/><div class="children"><div class="content">The flaw here is only exploitable by (1) a malicious server, which could anyway just send a malicious binary, no need for header shenanigans, or (2) a MITM. Case 1 is moot, case 2 would be prevented by properly implemented HTTPS.</div><br/></div></div><div id="39133683" class="c"><input type="checkbox" id="c-39133683" checked=""/><div class="controls bullet"><span class="by">1970-01-01</span><span>|</span><a href="#39133363">root</a><span>|</span><a href="#39133656">parent</a><span>|</span><a href="#39140307">prev</a><span>|</span><a href="#39133986">next</a><span>|</span><label class="collapse" for="c-39133683">[-]</label><label class="expand" for="c-39133683">[4 more]</label></div><br/><div class="children"><div class="content">MITM scenarios say it isn&#x27;t :P</div><br/><div id="39136793" class="c"><input type="checkbox" id="c-39136793" checked=""/><div class="controls bullet"><span class="by">38</span><span>|</span><a href="#39133363">root</a><span>|</span><a href="#39133683">parent</a><span>|</span><a href="#39133986">next</a><span>|</span><label class="collapse" for="c-39136793">[-]</label><label class="expand" for="c-39136793">[3 more]</label></div><br/><div class="children"><div class="content">you cant MITM HTTPS unless you&#x27;re are doing it to yourself for testing.</div><br/><div id="39139409" class="c"><input type="checkbox" id="c-39139409" checked=""/><div class="controls bullet"><span class="by">8organicbits</span><span>|</span><a href="#39133363">root</a><span>|</span><a href="#39136793">parent</a><span>|</span><a href="#39137223">next</a><span>|</span><label class="collapse" for="c-39139409">[-]</label><label class="expand" for="c-39139409">[1 more]</label></div><br/><div class="children"><div class="content">Are you sure? It&#x27;s pretty common for small tools like this to skip HTTPS certificate verification because of space constraints (typical CA trust root collections are around 100 KB in size). Since this is doing certificate verification of the downloaded file, HTTPS verification is usually redundant. If the HTTPS certificate verification is skipped then MITM of the HTTPS connection is trivial.<p>I took a quick look at the code and I&#x27;m not seeing the usual steps for certificate management, although I may have missed it.</div><br/></div></div><div id="39137223" class="c"><input type="checkbox" id="c-39137223" checked=""/><div class="controls bullet"><span class="by">hiddencost</span><span>|</span><a href="#39133363">root</a><span>|</span><a href="#39136793">parent</a><span>|</span><a href="#39139409">prev</a><span>|</span><a href="#39133986">next</a><span>|</span><label class="collapse" for="c-39137223">[-]</label><label class="expand" for="c-39137223">[1 more]</label></div><br/><div class="children"><div class="content">Secure boot.</div><br/></div></div></div></div></div></div></div></div><div id="39133986" class="c"><input type="checkbox" id="c-39133986" checked=""/><div class="controls bullet"><span class="by">skottenborg</span><span>|</span><a href="#39133363">parent</a><span>|</span><a href="#39133656">prev</a><span>|</span><a href="#39136513">next</a><span>|</span><label class="collapse" for="c-39133986">[-]</label><label class="expand" for="c-39133986">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not sure HTTPS is an option for this as it requires accurate time&#x2F;date for encryption. Maybe the RTC could be valid, but I&#x27;m not sure it handles different time zones well and it might have lost time anyways.</div><br/><div id="39134112" class="c"><input type="checkbox" id="c-39134112" checked=""/><div class="controls bullet"><span class="by">1970-01-01</span><span>|</span><a href="#39133363">root</a><span>|</span><a href="#39133986">parent</a><span>|</span><a href="#39134455">next</a><span>|</span><label class="collapse" for="c-39134112">[-]</label><label class="expand" for="c-39134112">[1 more]</label></div><br/><div class="children"><div class="content">I would classify something that doesn&#x27;t care what century it&#x27;s booting into as an unimportant device. If the clock is off by a lot, it still should not boot over network.</div><br/></div></div><div id="39134455" class="c"><input type="checkbox" id="c-39134455" checked=""/><div class="controls bullet"><span class="by">Arnavion</span><span>|</span><a href="#39133363">root</a><span>|</span><a href="#39133986">parent</a><span>|</span><a href="#39134112">prev</a><span>|</span><a href="#39136513">next</a><span>|</span><label class="collapse" for="c-39134455">[-]</label><label class="expand" for="c-39134455">[1 more]</label></div><br/><div class="children"><div class="content">HTTP support is implemented by an EFI driver, so it&#x27;s up to the UEFI to provide it in a way that works. The UEFI spec allows both HTTP and HTTPS URLs.</div><br/></div></div></div></div><div id="39136513" class="c"><input type="checkbox" id="c-39136513" checked=""/><div class="controls bullet"><span class="by">halayli</span><span>|</span><a href="#39133363">parent</a><span>|</span><a href="#39133986">prev</a><span>|</span><a href="#39136134">next</a><span>|</span><label class="collapse" for="c-39136513">[-]</label><label class="expand" for="c-39136513">[1 more]</label></div><br/><div class="children"><div class="content">it has nothing to do with whether the S is present or not. Not sure you understood the problem.</div><br/></div></div></div></div><div id="39136134" class="c"><input type="checkbox" id="c-39136134" checked=""/><div class="controls bullet"><span class="by">pwdisswordfishc</span><span>|</span><a href="#39133363">prev</a><span>|</span><a href="#39133306">next</a><span>|</span><label class="collapse" for="c-39136134">[-]</label><label class="expand" for="c-39136134">[1 more]</label></div><br/><div class="children"><div class="content">Except that Content-length is not the length of the actual body, it is the length after Content-encoding...</div><br/></div></div><div id="39133306" class="c"><input type="checkbox" id="c-39133306" checked=""/><div class="controls bullet"><span class="by">rany_</span><span>|</span><a href="#39136134">prev</a><span>|</span><a href="#39139720">next</a><span>|</span><label class="collapse" for="c-39133306">[-]</label><label class="expand" for="c-39133306">[1 more]</label></div><br/><div class="children"><div class="content">But do these builds of shim include httpboot? AFAIK shim is just there to execute another EFI binary on the disk. I don&#x27;t think I&#x27;ve ever seen the netboot functionality of shim get used.</div><br/></div></div><div id="39139720" class="c"><input type="checkbox" id="c-39139720" checked=""/><div class="controls bullet"><span class="by">guytv</span><span>|</span><a href="#39133306">prev</a><span>|</span><a href="#39135772">next</a><span>|</span><label class="collapse" for="c-39139720">[-]</label><label class="expand" for="c-39139720">[1 more]</label></div><br/><div class="children"><div class="content">Using the &#x27;goto&#x27; keyword brings back lots of memories after all these years.</div><br/></div></div><div id="39135772" class="c"><input type="checkbox" id="c-39135772" checked=""/><div class="controls bullet"><span class="by">barbazoo</span><span>|</span><a href="#39139720">prev</a><span>|</span><a href="#39134837">next</a><span>|</span><label class="collapse" for="c-39135772">[-]</label><label class="expand" for="c-39135772">[3 more]</label></div><br/><div class="children"><div class="content">Can someone explain to me please why reading <i>less</i> than the actual length of the body is dangerous? I’d have expected the opposite to be case.</div><br/><div id="39135822" class="c"><input type="checkbox" id="c-39135822" checked=""/><div class="controls bullet"><span class="by">lcnPylGDnU4H9OF</span><span>|</span><a href="#39135772">parent</a><span>|</span><a href="#39135793">next</a><span>|</span><label class="collapse" for="c-39135822">[-]</label><label class="expand" for="c-39135822">[1 more]</label></div><br/><div class="children"><div class="content">&gt; When retrieving files via HTTP or related protocols, shim attempts to
allocate a buffer to store the received data.  Unfortunately, this means
getting the size from an HTTP header, which can be manipulated to
specify a size that&#x27;s smaller than the received data.  In this case, the
code accidentally uses the header for the allocation but the protocol
metadata to copy it from the rx buffer, resulting in an out-of-bounds
write.</div><br/></div></div><div id="39135793" class="c"><input type="checkbox" id="c-39135793" checked=""/><div class="controls bullet"><span class="by">dwattttt</span><span>|</span><a href="#39135772">parent</a><span>|</span><a href="#39135822">prev</a><span>|</span><a href="#39134837">next</a><span>|</span><label class="collapse" for="c-39135793">[-]</label><label class="expand" for="c-39135793">[1 more]</label></div><br/><div class="children"><div class="content">From the description, it allocates a buffer based on Content-Length, but copies the size of the buffer it received, thus writing out of bounds of the allocation.</div><br/></div></div></div></div><div id="39134837" class="c"><input type="checkbox" id="c-39134837" checked=""/><div class="controls bullet"><span class="by">silisili</span><span>|</span><a href="#39135772">prev</a><span>|</span><a href="#39133631">next</a><span>|</span><label class="collapse" for="c-39134837">[-]</label><label class="expand" for="c-39134837">[2 more]</label></div><br/><div class="children"><div class="content">Maybe I&#x27;m not well versed enough, but I thought most http clients read at most content-length specified, and consider it an error if read bytes &lt; content-length.</div><br/><div id="39135064" class="c"><input type="checkbox" id="c-39135064" checked=""/><div class="controls bullet"><span class="by">Arnavion</span><span>|</span><a href="#39134837">parent</a><span>|</span><a href="#39133631">next</a><span>|</span><label class="collapse" for="c-39135064">[-]</label><label class="expand" for="c-39135064">[1 more]</label></div><br/><div class="children"><div class="content">The HTTP client is provided as an EFI driver by the UEFI. AFAICT the UEFI spec doesn&#x27;t specifically say what the behavior should be if the content-length header doesn&#x27;t match the response body length, so it might very well be possible that some implementations just make `connection:close` requests and don&#x27;t check the content length.<p>The vulnerability was reported by MSRC and none of the text about the CVE mentions an actual exploit. It might be revealed later, or it might just be theoretical.</div><br/></div></div></div></div><div id="39137660" class="c"><input type="checkbox" id="c-39137660" checked=""/><div class="controls bullet"><span class="by">userbinator</span><span>|</span><a href="#39133631">prev</a><span>|</span><a href="#39138577">next</a><span>|</span><label class="collapse" for="c-39137660">[-]</label><label class="expand" for="c-39137660">[1 more]</label></div><br/><div class="children"><div class="content">Fuck &quot;secure&quot; boot. The fact that it&#x27;s given one megacorp a monopoly over &quot;security&quot; should make you think twice about who actually benefits.<p>The apologists will always say &quot;but you can turn it off&quot; &quot;use your own keys&quot; etc., yet M$ lost an antitrust suit over merely having IE bundled with the OS.<p>It&#x27;s sad to see the once-open PC platform slowly turn into a walled garden.<p>I pray that there are more &quot;bugs&quot; which remain undiscovered.</div><br/></div></div><div id="39138577" class="c"><input type="checkbox" id="c-39138577" checked=""/><div class="controls bullet"><span class="by">Andrex</span><span>|</span><a href="#39137660">prev</a><span>|</span><a href="#39133404">next</a><span>|</span><label class="collapse" for="c-39138577">[-]</label><label class="expand" for="c-39138577">[1 more]</label></div><br/><div class="children"><div class="content">PXE&#x2F;HTTP boot just sound like bad ideas with worse implementations.<p>My own smell test just screams &quot;security nightmare.&quot;</div><br/></div></div><div id="39133404" class="c"><input type="checkbox" id="c-39133404" checked=""/><div class="controls bullet"><span class="by">stonogo</span><span>|</span><a href="#39138577">prev</a><span>|</span><a href="#39133888">next</a><span>|</span><label class="collapse" for="c-39133404">[-]</label><label class="expand" for="c-39133404">[7 more]</label></div><br/><div class="children"><div class="content">I have to say this is definitely a bug and I&#x27;m glad it&#x27;s fixed ... but what kind of psycho boots their machine from an untrusted host?  If the attacker controls the http service tightly enough to send malicious headers, avoiding this overflow is the least of your problems, since they have compromised your certs and also can just send a compliant payload with more malware on it.<p>Bug?  absolutely.  Critical?  not so sure.</div><br/><div id="39135029" class="c"><input type="checkbox" id="c-39135029" checked=""/><div class="controls bullet"><span class="by">AshamedCaptain</span><span>|</span><a href="#39133404">parent</a><span>|</span><a href="#39133748">next</a><span>|</span><label class="collapse" for="c-39135029">[-]</label><label class="expand" for="c-39135029">[1 more]</label></div><br/><div class="children"><div class="content">The same kinds of psycho who promote Secure Boot. They _really_ believe in a security strategy which _requires_ everything that could be potentially be compromised to not be signed by Secure Boot. The moment you have something signed which has a vulnerability, you can use it to decrypt everyone&#x27;s SecureBoot+TPM encrypted hard drives.<p>Why that ever was considered a valid security approach is over me, as there is an entire gallery of vulnerabilities like this one.  It also completely ignores the elephant in the room called Windows.<p>Example of this type of thinking: <a href="https:&#x2F;&#x2F;lkml.org&#x2F;lkml&#x2F;2018&#x2F;4&#x2F;3&#x2F;767" rel="nofollow">https:&#x2F;&#x2F;lkml.org&#x2F;lkml&#x2F;2018&#x2F;4&#x2F;3&#x2F;767</a><p>Note that despite Linus&#x27; reticences, in a lot of distros integrity mode is indeed enabled when you boot with Secure Boot on. Likely because of MS politics and distros wanting an MS UEFI signature being forced to &quot;go through the hoops&quot; as explained in that thread. As a result enabling Secure Boot usually cripples your distro, preventing you from e.g. hibernating.</div><br/></div></div><div id="39133748" class="c"><input type="checkbox" id="c-39133748" checked=""/><div class="controls bullet"><span class="by">TheSoftwareGuy</span><span>|</span><a href="#39133404">parent</a><span>|</span><a href="#39135029">prev</a><span>|</span><a href="#39133514">next</a><span>|</span><label class="collapse" for="c-39133748">[-]</label><label class="expand" for="c-39133748">[1 more]</label></div><br/><div class="children"><div class="content">The only good form of defense, is defense in depth, or forming layers of defense. This bug puts a hole in one of those layers</div><br/></div></div><div id="39133514" class="c"><input type="checkbox" id="c-39133514" checked=""/><div class="controls bullet"><span class="by">hackernudes</span><span>|</span><a href="#39133404">parent</a><span>|</span><a href="#39133748">prev</a><span>|</span><a href="#39133665">next</a><span>|</span><label class="collapse" for="c-39133514">[-]</label><label class="expand" for="c-39133514">[1 more]</label></div><br/><div class="children"><div class="content">Perhaps it could be used to break in to some locked devices.</div><br/></div></div><div id="39137294" class="c"><input type="checkbox" id="c-39137294" checked=""/><div class="controls bullet"><span class="by">stonogo</span><span>|</span><a href="#39133404">parent</a><span>|</span><a href="#39133447">prev</a><span>|</span><a href="#39133888">next</a><span>|</span><label class="collapse" for="c-39137294">[-]</label><label class="expand" for="c-39137294">[1 more]</label></div><br/><div class="children"><div class="content">replying to myself to point out an excellent explanation in another thread:  <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=39135275">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=39135275</a><p>in sum, it&#x27;s critical, because the attack vector is beyond just http.</div><br/></div></div></div></div><div id="39133888" class="c"><input type="checkbox" id="c-39133888" checked=""/><div class="controls bullet"><span class="by">jiripospisil</span><span>|</span><a href="#39133404">prev</a><span>|</span><a href="#39134197">next</a><span>|</span><label class="collapse" for="c-39133888">[-]</label><label class="expand" for="c-39133888">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Critical bug that exists in every Linux boot loader signed in the past decade<p>Huh? This is a bug in a single bootloader. It has nothing to do with other bootloaders. And while on the subject, consider whether you actually need a bootloader at all.</div><br/><div id="39133931" class="c"><input type="checkbox" id="c-39133931" checked=""/><div class="controls bullet"><span class="by">ixtli</span><span>|</span><a href="#39133888">parent</a><span>|</span><a href="#39134197">next</a><span>|</span><label class="collapse" for="c-39133931">[-]</label><label class="expand" for="c-39133931">[1 more]</label></div><br/><div class="children"><div class="content">Also worth noting the commit which introduced this was made 8 years ago so not quite a decade.</div><br/></div></div></div></div><div id="39134197" class="c"><input type="checkbox" id="c-39134197" checked=""/><div class="controls bullet"><span class="by">merb</span><span>|</span><a href="#39133888">prev</a><span>|</span><a href="#39133738">next</a><span>|</span><label class="collapse" for="c-39134197">[-]</label><label class="expand" for="c-39134197">[1 more]</label></div><br/><div class="children"><div class="content">uf. I think a lot of frameworks had these issues. but nowadays its either rejection of the request or handlded like chunked encoding</div><br/></div></div><div id="39133738" class="c"><input type="checkbox" id="c-39133738" checked=""/><div class="controls bullet"><span class="by">pizzalife</span><span>|</span><a href="#39134197">prev</a><span>|</span><a href="#39133305">next</a><span>|</span><label class="collapse" for="c-39133738">[-]</label><label class="expand" for="c-39133738">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Content-Lenght</div><br/><div id="39134309" class="c"><input type="checkbox" id="c-39134309" checked=""/><div class="controls bullet"><span class="by">hypeatei</span><span>|</span><a href="#39133738">parent</a><span>|</span><a href="#39133305">next</a><span>|</span><label class="collapse" for="c-39134309">[-]</label><label class="expand" for="c-39134309">[1 more]</label></div><br/><div class="children"><div class="content">Very embarrassing and unacceptable. &#x2F;s</div><br/></div></div></div></div><div id="39133305" class="c"><input type="checkbox" id="c-39133305" checked=""/><div class="controls bullet"><span class="by">nightowl_games</span><span>|</span><a href="#39133738">prev</a><span>|</span><a href="#39137153">next</a><span>|</span><label class="collapse" for="c-39133305">[-]</label><label class="expand" for="c-39133305">[3 more]</label></div><br/><div class="children"><div class="content">WOW<p>It seems so obvious!</div><br/><div id="39134172" class="c"><input type="checkbox" id="c-39134172" checked=""/><div class="controls bullet"><span class="by">mlhpdx</span><span>|</span><a href="#39133305">parent</a><span>|</span><a href="#39138154">next</a><span>|</span><label class="collapse" for="c-39134172">[-]</label><label class="expand" for="c-39134172">[1 more]</label></div><br/><div class="children"><div class="content">Indeed. The header reads to me as “the server says this content length will be…” so I have always taken precautions with it. Servers can be wrong as well as malicious.</div><br/></div></div><div id="39138154" class="c"><input type="checkbox" id="c-39138154" checked=""/><div class="controls bullet"><span class="by">zadokshi</span><span>|</span><a href="#39133305">parent</a><span>|</span><a href="#39134172">prev</a><span>|</span><a href="#39137153">next</a><span>|</span><label class="collapse" for="c-39138154">[-]</label><label class="expand" for="c-39138154">[1 more]</label></div><br/><div class="children"><div class="content">Yep I’m surprised this made it through even basic code review. It makes it seem like this code was written by a junior dev without any code review.  Accidents happen; it’s human and understandable; but wowzer this one seems like a beginner level mistake.</div><br/></div></div></div></div><div id="39137153" class="c"><input type="checkbox" id="c-39137153" checked=""/><div class="controls bullet"><span class="by">hiddencost</span><span>|</span><a href="#39133305">prev</a><span>|</span><a href="#39133277">next</a><span>|</span><label class="collapse" for="c-39137153">[-]</label><label class="expand" for="c-39137153">[1 more]</label></div><br/><div class="children"><div class="content">The typo fix warms my cold dead corporate heart.</div><br/></div></div><div id="39133277" class="c"><input type="checkbox" id="c-39133277" checked=""/><div class="controls bullet"><span class="by">ImJamal</span><span>|</span><a href="#39137153">prev</a><span>|</span><label class="collapse" for="c-39133277">[-]</label><label class="expand" for="c-39133277">[2 more]</label></div><br/><div class="children"><div class="content">Is this only a problem if you are doing some sort of network boot or do boot loaders connect to a network for another reason?</div><br/><div id="39133618" class="c"><input type="checkbox" id="c-39133618" checked=""/><div class="controls bullet"><span class="by">nailer</span><span>|</span><a href="#39133277">parent</a><span>|</span><label class="collapse" for="c-39133618">[-]</label><label class="expand" for="c-39133618">[1 more]</label></div><br/><div class="children"><div class="content">Network boot. If you have physical (or lights out) access to a box you can own it though.</div><br/></div></div></div></div></div></div></div></div></div></body></html>