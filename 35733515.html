<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1682672452493" as="style"/><link rel="stylesheet" href="styles.css?v=1682672452493"/><link rel="apple-touch-startup-image" href="https://png.pngtree.com/png-clipart/20210309/original/pngtree-a-squatting-tabby-cat-png-image_5803660.jpg"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.xtdb.com/v2">XTDB 2.x Early Access</a>Â <span class="domain">(<a href="https://www.xtdb.com">www.xtdb.com</a>)</span></div><div class="subtext"><span>gemstones</span> | <span>17 comments</span></div><br/><div><div id="35735810" class="c"><input type="checkbox" id="c-35735810" checked=""/><div class="controls bullet"><span class="by">lgessler</span><span>|</span><a href="#35734018">next</a><span>|</span><label class="collapse" for="c-35735810">[-]</label><label class="expand" for="c-35735810">[3 more]</label></div><br/><div class="children"><div class="content">I used XTDB on a side project (written in Clojure) a couple years ago and was blown away by something that I think isn&#x27;t even really stressed as a headliner feature for XTDB. That was the ability to treat queries as first-class data. XTDB&#x27;s datalog queries can be provided as just native Clojure data structures, and that allows you to build complex queries using code. What this means is that it&#x27;s much more DRY than copy-pasting and editing SQL templates, there&#x27;s no ORM gumming up your performance and expressivity as your queries get more complex, and there&#x27;s no half-baked implementation of an API for query composition: the _programming language_ is your tool for query composition. I couldn&#x27;t tell you if there are other ways of getting this, as I&#x27;m not really a software engineer anymore, but it was a jaw-dropping experience for me to see how easy it could be to write a database layer, and far and away the best experience I&#x27;ve ever had writing one in any programming language.<p>I suppose what&#x27;s at the heart of this, more than anything, is that Datalog has a near-trivial syntax that can transparently be accommodated by two simple data structures: lists and hash tables. Not so with SQL, whose COBOL-y nature obscures its syntax and makes it less straightforward to represent in everyday data structures.</div><br/><div id="35738260" class="c"><input type="checkbox" id="c-35738260" checked=""/><div class="controls bullet"><span class="by">orestis</span><span>|</span><a href="#35735810">parent</a><span>|</span><a href="#35737902">next</a><span>|</span><label class="collapse" for="c-35738260">[-]</label><label class="expand" for="c-35738260">[1 more]</label></div><br/><div class="children"><div class="content">In Clojure-land, we are also using HoneySQL [1] which has similar characteristics. You are still working within SQL semantics so it&#x27;s a bit more complicated, but we are doing great complicated things with just maps, no API necessary.<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;seancorfield&#x2F;honeysql">https:&#x2F;&#x2F;github.com&#x2F;seancorfield&#x2F;honeysql</a></div><br/></div></div><div id="35737902" class="c"><input type="checkbox" id="c-35737902" checked=""/><div class="controls bullet"><span class="by">agumonkey</span><span>|</span><a href="#35735810">parent</a><span>|</span><a href="#35738260">prev</a><span>|</span><a href="#35734018">next</a><span>|</span><label class="collapse" for="c-35737902">[-]</label><label class="expand" for="c-35737902">[1 more]</label></div><br/><div class="children"><div class="content">lisps legacy</div><br/></div></div></div></div><div id="35734018" class="c"><input type="checkbox" id="c-35734018" checked=""/><div class="controls bullet"><span class="by">kevinmershon</span><span>|</span><a href="#35735810">prev</a><span>|</span><a href="#35734859">next</a><span>|</span><label class="collapse" for="c-35734018">[-]</label><label class="expand" for="c-35734018">[3 more]</label></div><br/><div class="children"><div class="content">We use XTDB 1 and have a multi replica production instance with about 600GB of data at ~100 million transactions. The biggest problem we have is with minor versions bumping the underlying RocksDB i dex version, requiring a full reindex of the main &quot;golden&quot; data store taking days to weeks.<p>AFAIK this is not solved in XTDB 1. I&#x27;m hoping XTDB 2 provides a better upgrade path for modestly sized databases like ours.</div><br/><div id="35734270" class="c"><input type="checkbox" id="c-35734270" checked=""/><div class="controls bullet"><span class="by">refset</span><span>|</span><a href="#35734018">parent</a><span>|</span><a href="#35734859">next</a><span>|</span><label class="collapse" for="c-35734270">[-]</label><label class="expand" for="c-35734270">[2 more]</label></div><br/><div class="children"><div class="content">XTDB 2 will compute and maintain incremental indexes on-the-fly based on the raw data, so index updates will present far less operational impact. This also means the transaction log is now ~ephemeral in the new architecture (no more event-sourcing-style replays required, ever).</div><br/><div id="35734594" class="c"><input type="checkbox" id="c-35734594" checked=""/><div class="controls bullet"><span class="by">kevinmershon</span><span>|</span><a href="#35734018">root</a><span>|</span><a href="#35734270">parent</a><span>|</span><a href="#35734859">next</a><span>|</span><label class="collapse" for="c-35734594">[-]</label><label class="expand" for="c-35734594">[1 more]</label></div><br/><div class="children"><div class="content">That is incredibly exciting! Glad to hear it.</div><br/></div></div></div></div></div></div><div id="35734859" class="c"><input type="checkbox" id="c-35734859" checked=""/><div class="controls bullet"><span class="by">baq</span><span>|</span><a href="#35734018">prev</a><span>|</span><a href="#35734241">next</a><span>|</span><label class="collapse" for="c-35734859">[-]</label><label class="expand" for="c-35734859">[1 more]</label></div><br/><div class="children"><div class="content">&gt; XTDB is a bitemporal and dynamic relational database for SQL<p>You have my attention. I actually raised an eyebrow reading that, last time this happened was when ChatGPT was released.<p>Temporal is a world of pain in SQL, bitemporal... nice.<p>edit: for those who haven&#x27;t heard what bitemporal is, Wikipedia has an example: <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Temporal_database#Using_two_axes:_valid_time_and_transaction_time" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Temporal_database#Using_two_ax...</a></div><br/></div></div><div id="35734241" class="c"><input type="checkbox" id="c-35734241" checked=""/><div class="controls bullet"><span class="by">seabass-labrax</span><span>|</span><a href="#35734859">prev</a><span>|</span><a href="#35736607">next</a><span>|</span><label class="collapse" for="c-35734241">[-]</label><label class="expand" for="c-35734241">[1 more]</label></div><br/><div class="children"><div class="content">XTDB is a very interesting database to me. Not only is it distributed, but the &#x27;bi-temporality&#x27; which is mentioned on this page means that it has essentially a built-in audit trail mechanism. I&#x27;m working on writing an RDF library for Clojure, and am looking forward to seeing whether XTDB really is as good as an RDF datastore as I suspect it is!</div><br/></div></div><div id="35734562" class="c"><input type="checkbox" id="c-35734562" checked=""/><div class="controls bullet"><span class="by">vosper</span><span>|</span><a href="#35736607">prev</a><span>|</span><a href="#35736980">next</a><span>|</span><label class="collapse" for="c-35734562">[-]</label><label class="expand" for="c-35734562">[3 more]</label></div><br/><div class="children"><div class="content">My understanding is the XTDB is either a fork of Datomic, or was inspired by it? I suppose it&#x27;s timely, given the top story on HN right now is &quot;Datomic is Free&quot; [0]<p>Is there anyone who&#x27;s familiar with both and would like to share their thoughts on the two?<p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=35727967" rel="nofollow">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=35727967</a></div><br/><div id="35735011" class="c"><input type="checkbox" id="c-35735011" checked=""/><div class="controls bullet"><span class="by">refset</span><span>|</span><a href="#35734562">parent</a><span>|</span><a href="#35735115">next</a><span>|</span><label class="collapse" for="c-35735011">[-]</label><label class="expand" for="c-35735011">[1 more]</label></div><br/><div class="children"><div class="content">Datomic&#x27;s &quot;immutable database + Datalog&quot; was definitely the biggest source of inspiration but XTDB has a lot of differences - I wrote this FAQ entry up a few years back: <a href="https:&#x2F;&#x2F;docs.xtdb.com&#x2F;resources&#x2F;faq&#x2F;#comparisons" rel="nofollow">https:&#x2F;&#x2F;docs.xtdb.com&#x2F;resources&#x2F;faq&#x2F;#comparisons</a> (note this comparison is for XTDB 1.x and Datomic On-Prem only, so needs revisiting!)<p>Arguably the biggest difference is that XTDB has a schemaless, dynamic core. Having a sane schema is of course important when building complex things, but we believe that the flexibility to experiment with schema (fully) in userspace is essential for moving the state of the art forwards. For instance a lots Clojure users these days prefer relying on <a href="https:&#x2F;&#x2F;github.com&#x2F;metosin&#x2F;malli">https:&#x2F;&#x2F;github.com&#x2F;metosin&#x2F;malli</a> for _all_ their schema needs.</div><br/></div></div><div id="35735115" class="c"><input type="checkbox" id="c-35735115" checked=""/><div class="controls bullet"><span class="by">newlisp</span><span>|</span><a href="#35734562">parent</a><span>|</span><a href="#35735011">prev</a><span>|</span><a href="#35736980">next</a><span>|</span><label class="collapse" for="c-35735115">[-]</label><label class="expand" for="c-35735115">[1 more]</label></div><br/><div class="children"><div class="content">They have completely different data models though, XTDB is a schemaless document data store, think mongodb but with SQL&#x2F;Datalog querying and bi-temporality.<p>Datomic&#x27;s data model is something they call the &#x27;universal schema&#x27; where you just specify the attributes and then create entities however you like from them. Datomic aligns more with how you structure data in Clojure, avoiding the impedance mismatch.</div><br/></div></div></div></div><div id="35736980" class="c"><input type="checkbox" id="c-35736980" checked=""/><div class="controls bullet"><span class="by">avinassh</span><span>|</span><a href="#35734562">prev</a><span>|</span><a href="#35736353">next</a><span>|</span><label class="collapse" for="c-35736980">[-]</label><label class="expand" for="c-35736980">[3 more]</label></div><br/><div class="children"><div class="content">What is a datalog?</div><br/><div id="35737186" class="c"><input type="checkbox" id="c-35737186" checked=""/><div class="controls bullet"><span class="by">robertfw</span><span>|</span><a href="#35736980">parent</a><span>|</span><a href="#35736353">next</a><span>|</span><label class="collapse" for="c-35737186">[-]</label><label class="expand" for="c-35737186">[2 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Datalog" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Datalog</a></div><br/><div id="35737487" class="c"><input type="checkbox" id="c-35737487" checked=""/><div class="controls bullet"><span class="by">avinassh</span><span>|</span><a href="#35736980">root</a><span>|</span><a href="#35737186">parent</a><span>|</span><a href="#35736353">next</a><span>|</span><label class="collapse" for="c-35737487">[-]</label><label class="expand" for="c-35737487">[1 more]</label></div><br/><div class="children"><div class="content">hey I did check the wiki, but I didn&#x27;t clearly understand and how it connects with a relational database, hence I asked here.<p>one more benefit of asking here, is people also share their practical experiences and how it is out there in the wild. Such stuff is usually missing from the wiki.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>