<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1718614868161" as="style"/><link rel="stylesheet" href="styles.css?v=1718614868161"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://numpy.org/devdocs/release/2.0.0-notes.html">NumPy 2.0</a> <span class="domain">(<a href="https://numpy.org">numpy.org</a>)</span></div><div class="subtext"><span>scoresmoke</span> | <span>56 comments</span></div><br/><div><div id="40700948" class="c"><input type="checkbox" id="c-40700948" checked=""/><div class="controls bullet"><span class="by">dahart</span><span>|</span><a href="#40701034">next</a><span>|</span><label class="collapse" for="c-40700948">[-]</label><label class="expand" for="c-40700948">[17 more]</label></div><br/><div class="children"><div class="content">The thing I want most is a more sane and more memorable way to compose non-element-wise operations. There are so many different ways to build views and multiply arrays that I can’t remember them and never know which to use, and have to relearn them every time I use numpy… broadcasting, padding, repeating, slicing, stacking, transposing, outers, inners, dots of all sorts, and half the stack overflow answers lead to the most confusing pickaxe of all: einsum. Am I alone? I love numpy, but every time I reach for it I somehow get stuck for hours on what ought to be really simple indexing problems.</div><br/><div id="40701313" class="c"><input type="checkbox" id="c-40701313" checked=""/><div class="controls bullet"><span class="by">salamo</span><span>|</span><a href="#40700948">parent</a><span>|</span><a href="#40703618">next</a><span>|</span><label class="collapse" for="c-40701313">[-]</label><label class="expand" for="c-40701313">[4 more]</label></div><br/><div class="children"><div class="content">When I started out I was basically stumbling around for code that worked. Things got a lot easier for me once I sat down and actually understood broadcasting.<p>The rules are: 1) scalars always broadcast, 2) if one vector has fewer dimensions, left pad it with 1s and 3) starting from the right, check dimension compatibility, where compatibility means the dimensions are equal or one of them is 1. Example: np.ones((2,3,1)) * np.ones((1,4)) = np.ones((2,3,4))<p>Once your dimensions are correct, it&#x27;s a lot easier to reason your way through a problem, similar to how basic dimensional analysis in physics can verify your answer makes some sense.<p>(I would disable broadcasting if I could, since it has caused way too many silent bugs in my experience. JAX can, but I don&#x27;t feel like learning another library to do this.)<p>Once I understood broadcasting, it was a lot easier to practice vectorizing basic algorithms.</div><br/><div id="40701838" class="c"><input type="checkbox" id="c-40701838" checked=""/><div class="controls bullet"><span class="by">nerdponx</span><span>|</span><a href="#40700948">root</a><span>|</span><a href="#40701313">parent</a><span>|</span><a href="#40702238">next</a><span>|</span><label class="collapse" for="c-40701838">[-]</label><label class="expand" for="c-40701838">[1 more]</label></div><br/><div class="children"><div class="content">The broadcasting doc is surprisingly readable and easy to follow. And the rules are surprisingly simple. The diagrams and examples are excellent. <a href="https:&#x2F;&#x2F;numpy.org&#x2F;doc&#x2F;stable&#x2F;user&#x2F;basics.broadcasting.html" rel="nofollow">https:&#x2F;&#x2F;numpy.org&#x2F;doc&#x2F;stable&#x2F;user&#x2F;basics.broadcasting.html</a><p>After taking the time to work through that doc and ponder some real-world examples, I went from being very confused by broadcasting to employing intermediate broadcasting techniques in a matter of weeks. Writing out your array dimensions in the same style of their examples (either in a text file or on a notepad) is the key technique IMO:<p><pre><code>  Image  (3d array): 256 x 256 x 3
  Scale  (1d array):             3
  Result (3d array): 256 x 256 x 3
</code></pre>
And of course with practice you can do it in your head.</div><br/></div></div><div id="40702238" class="c"><input type="checkbox" id="c-40702238" checked=""/><div class="controls bullet"><span class="by">o11c</span><span>|</span><a href="#40700948">root</a><span>|</span><a href="#40701313">parent</a><span>|</span><a href="#40701838">prev</a><span>|</span><a href="#40703618">next</a><span>|</span><label class="collapse" for="c-40702238">[-]</label><label class="expand" for="c-40702238">[2 more]</label></div><br/><div class="children"><div class="content">Explicit internal broadcasting (by adding an axis with an explicit `indefinite` size instead of `1`) would be so much simpler to reason about.<p>Unfortunately there is far too much existing code and python is not type-safe.</div><br/><div id="40702955" class="c"><input type="checkbox" id="c-40702955" checked=""/><div class="controls bullet"><span class="by">bramblerose</span><span>|</span><a href="#40700948">root</a><span>|</span><a href="#40702238">parent</a><span>|</span><a href="#40703618">next</a><span>|</span><label class="collapse" for="c-40702955">[-]</label><label class="expand" for="c-40702955">[1 more]</label></div><br/><div class="children"><div class="content">You can do this with `np.newaxis` - in the NumPy course I wrote as TA we required students to always be explicit about the axes (also in e.g. sums). It would be nice if you could disable the implicit broadcasting, but as you mention that would break so much code</div><br/></div></div></div></div></div></div><div id="40703618" class="c"><input type="checkbox" id="c-40703618" checked=""/><div class="controls bullet"><span class="by">begueradj</span><span>|</span><a href="#40700948">parent</a><span>|</span><a href="#40701313">prev</a><span>|</span><a href="#40700985">next</a><span>|</span><label class="collapse" for="c-40703618">[-]</label><label class="expand" for="c-40703618">[1 more]</label></div><br/><div class="children"><div class="content">What do you mean by: &quot;more memorable way to ...&quot; ?</div><br/></div></div><div id="40700985" class="c"><input type="checkbox" id="c-40700985" checked=""/><div class="controls bullet"><span class="by">akasakahakada</span><span>|</span><a href="#40700948">parent</a><span>|</span><a href="#40703618">prev</a><span>|</span><a href="#40702325">next</a><span>|</span><label class="collapse" for="c-40700985">[-]</label><label class="expand" for="c-40700985">[2 more]</label></div><br/><div class="children"><div class="content">To be honest einsum is the easiest one. You get fine control on which axis matmul to which. But I wish it can do more than matmul.<p>The others are just messy shit. Like you got np.abs but no arr.abs, np.unique but no arr.unique. But now you have arr.mean.<p>Sometimes you got argument name index, sometimes indices, sometimes accept (list, tuple), sometime only tuple.</div><br/><div id="40701144" class="c"><input type="checkbox" id="c-40701144" checked=""/><div class="controls bullet"><span class="by">samsartor</span><span>|</span><a href="#40700948">root</a><span>|</span><a href="#40700985">parent</a><span>|</span><a href="#40702325">next</a><span>|</span><label class="collapse" for="c-40701144">[-]</label><label class="expand" for="c-40701144">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;github.com&#x2F;mcabbott&#x2F;Tullio.jl">https:&#x2F;&#x2F;github.com&#x2F;mcabbott&#x2F;Tullio.jl</a> is my favorite idea for extending einsum notation to more stuff. Really hope numpy&#x2F;torch get something comparable!</div><br/></div></div></div></div><div id="40702325" class="c"><input type="checkbox" id="c-40702325" checked=""/><div class="controls bullet"><span class="by">hansvm</span><span>|</span><a href="#40700948">parent</a><span>|</span><a href="#40700985">prev</a><span>|</span><a href="#40702471">next</a><span>|</span><label class="collapse" for="c-40702325">[-]</label><label class="expand" for="c-40702325">[2 more]</label></div><br/><div class="children"><div class="content">It gets more comfortable over time, but I remember feeling that way for the first year or three. My wishlist now is for most of numpy to just be a really great einsum implementation, along with a few analogous operations for the rest of the map-reduces numpy accelerates.<p>I&#x27;ve been writing my own low-level numeric routines lately, so I&#x27;m not up-to-date on the latest news, but there have been a few ideas floating around over the last few years about naming your axes and defining operations in terms of those names [0,1,2,3]. That sort of thing looks promising to me, and one of those projects might be a better conceptual fit for you.<p>[0] <a href="https:&#x2F;&#x2F;nlp.seas.harvard.edu&#x2F;NamedTensor" rel="nofollow">https:&#x2F;&#x2F;nlp.seas.harvard.edu&#x2F;NamedTensor</a><p>[1] <a href="https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;named-arrays&#x2F;" rel="nofollow">https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;named-arrays&#x2F;</a><p>[2] <a href="https:&#x2F;&#x2F;pytorch.org&#x2F;docs&#x2F;stable&#x2F;named_tensor.html" rel="nofollow">https:&#x2F;&#x2F;pytorch.org&#x2F;docs&#x2F;stable&#x2F;named_tensor.html</a><p>[3] <a href="https:&#x2F;&#x2F;docs.xarray.dev&#x2F;en&#x2F;stable&#x2F;" rel="nofollow">https:&#x2F;&#x2F;docs.xarray.dev&#x2F;en&#x2F;stable&#x2F;</a></div><br/><div id="40703326" class="c"><input type="checkbox" id="c-40703326" checked=""/><div class="controls bullet"><span class="by">mgunyho</span><span>|</span><a href="#40700948">root</a><span>|</span><a href="#40702325">parent</a><span>|</span><a href="#40702471">next</a><span>|</span><label class="collapse" for="c-40703326">[-]</label><label class="expand" for="c-40703326">[1 more]</label></div><br/><div class="children"><div class="content">I want to second the idea of broadcasting based on named axes&#x2F;dimensions. I think it&#x27;s a logical next step in the evolution of the array programming paradigm.<p>I particularly recommend checking out xarray. It has made my numpy-ish code like 90% shorter and it makes it trivial to juggle six+ dimensional arrays. If your data is on a grid (not shaped like a table&#x2F;dataframe), I see no downsides to using xarray instead of bare numpy.</div><br/></div></div></div></div><div id="40702471" class="c"><input type="checkbox" id="c-40702471" checked=""/><div class="controls bullet"><span class="by">nl</span><span>|</span><a href="#40700948">parent</a><span>|</span><a href="#40702325">prev</a><span>|</span><a href="#40701754">next</a><span>|</span><label class="collapse" for="c-40702471">[-]</label><label class="expand" for="c-40702471">[2 more]</label></div><br/><div class="children"><div class="content">ChatGPT is <i>really</i> good at this. Using it to solve numpy and matplotlib problems is worth the cost of the subscription.</div><br/><div id="40702716" class="c"><input type="checkbox" id="c-40702716" checked=""/><div class="controls bullet"><span class="by">esafak</span><span>|</span><a href="#40700948">root</a><span>|</span><a href="#40702471">parent</a><span>|</span><a href="#40701754">next</a><span>|</span><label class="collapse" for="c-40702716">[-]</label><label class="expand" for="c-40702716">[1 more]</label></div><br/><div class="children"><div class="content">What a waste of electricity. All because numpy and pandas did not get their APIs right. My hot take.</div><br/></div></div></div></div><div id="40701754" class="c"><input type="checkbox" id="c-40701754" checked=""/><div class="controls bullet"><span class="by">chpatrick</span><span>|</span><a href="#40700948">parent</a><span>|</span><a href="#40702471">prev</a><span>|</span><a href="#40701419">next</a><span>|</span><label class="collapse" for="c-40701754">[-]</label><label class="expand" for="c-40701754">[3 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;einops.rocks&#x2F;#why-use-einops-notation" rel="nofollow">https:&#x2F;&#x2F;einops.rocks&#x2F;#why-use-einops-notation</a></div><br/><div id="40701780" class="c"><input type="checkbox" id="c-40701780" checked=""/><div class="controls bullet"><span class="by">pizza</span><span>|</span><a href="#40700948">root</a><span>|</span><a href="#40701754">parent</a><span>|</span><a href="#40701419">next</a><span>|</span><label class="collapse" for="c-40701780">[-]</label><label class="expand" for="c-40701780">[2 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;einx.readthedocs.io&#x2F;" rel="nofollow">https:&#x2F;&#x2F;einx.readthedocs.io&#x2F;</a> :)</div><br/><div id="40703442" class="c"><input type="checkbox" id="c-40703442" checked=""/><div class="controls bullet"><span class="by">notrealyme123</span><span>|</span><a href="#40700948">root</a><span>|</span><a href="#40701780">parent</a><span>|</span><a href="#40701419">next</a><span>|</span><label class="collapse" for="c-40703442">[-]</label><label class="expand" for="c-40703442">[1 more]</label></div><br/><div class="children"><div class="content">+1 been at your talk presenting it at a Retreat. Happy User</div><br/></div></div></div></div></div></div><div id="40701419" class="c"><input type="checkbox" id="c-40701419" checked=""/><div class="controls bullet"><span class="by">SubiculumCode</span><span>|</span><a href="#40700948">parent</a><span>|</span><a href="#40701754">prev</a><span>|</span><a href="#40701034">next</a><span>|</span><label class="collapse" for="c-40701419">[-]</label><label class="expand" for="c-40701419">[2 more]</label></div><br/><div class="children"><div class="content">Is this the dplyR use case in R?
Is there dplyPython for Numpy?</div><br/><div id="40701658" class="c"><input type="checkbox" id="c-40701658" checked=""/><div class="controls bullet"><span class="by">nerdponx</span><span>|</span><a href="#40700948">root</a><span>|</span><a href="#40701419">parent</a><span>|</span><a href="#40701034">next</a><span>|</span><label class="collapse" for="c-40701658">[-]</label><label class="expand" for="c-40701658">[1 more]</label></div><br/><div class="children"><div class="content">You mean the pipe operator from Magrittr %&gt;%, and the R 4.0 built-in operator |&gt;?<p>Pandas has a .pipe(fn) method, but without the lazy evaluation to enable the R symbol capturing magic, the syntax is pretty clunky and not particularly useful. The closest approximation is method chaining, which at least is more consistently available in Pandas than in Numpy.<p>If you&#x27;re talking about Dplyr &quot;verbs&quot; then no, there&#x27;s nothing quite like that in Python, but it&#x27;s much less necessary in Pandas or Polars than in R, because the set of standard tools for working with data frames in the bear libraries is much richer than in the R standard library.</div><br/></div></div></div></div></div></div><div id="40701034" class="c"><input type="checkbox" id="c-40701034" checked=""/><div class="controls bullet"><span class="by">ayhanfuat</span><span>|</span><a href="#40700948">prev</a><span>|</span><a href="#40699961">next</a><span>|</span><label class="collapse" for="c-40701034">[-]</label><label class="expand" for="c-40701034">[1 more]</label></div><br/><div class="children"><div class="content">&gt; The default integer type on Windows is now int64 rather than int32, matching the behavior on other platforms<p>This was a footgun due to C long being int32 in win64. Glad that they changed it.</div><br/></div></div><div id="40699961" class="c"><input type="checkbox" id="c-40699961" checked=""/><div class="controls bullet"><span class="by">fbdab103</span><span>|</span><a href="#40701034">prev</a><span>|</span><a href="#40700927">next</a><span>|</span><label class="collapse" for="c-40699961">[-]</label><label class="expand" for="c-40699961">[17 more]</label></div><br/><div class="children"><div class="content">Any notable highlights for a consumer of Numpy who rarely interfaces directly with it? Most of my work is pandas+scipy, with occasionally dropping into the specific numpy algorithm when required.<p>I am much more of an &quot;upgrade when there is a X.1&quot; release kind of guy, so my hat off to those who will bravely be testing the version on my behalf.</div><br/><div id="40700079" class="c"><input type="checkbox" id="c-40700079" checked=""/><div class="controls bullet"><span class="by">scoresmoke</span><span>|</span><a href="#40699961">parent</a><span>|</span><a href="#40701871">next</a><span>|</span><label class="collapse" for="c-40700079">[-]</label><label class="expand" for="c-40700079">[14 more]</label></div><br/><div class="children"><div class="content">The most important changes are deprecations of certain public APIs: <a href="https:&#x2F;&#x2F;numpy.org&#x2F;devdocs&#x2F;release&#x2F;2.0.0-notes.html#deprecations" rel="nofollow">https:&#x2F;&#x2F;numpy.org&#x2F;devdocs&#x2F;release&#x2F;2.0.0-notes.html#deprecati...</a><p>One new interesting feature, though, is the support for string routines: <a href="https:&#x2F;&#x2F;numpy.org&#x2F;devdocs&#x2F;reference&#x2F;routines.strings.html#module-numpy.strings" rel="nofollow">https:&#x2F;&#x2F;numpy.org&#x2F;devdocs&#x2F;reference&#x2F;routines.strings.html#mo...</a></div><br/><div id="40700377" class="c"><input type="checkbox" id="c-40700377" checked=""/><div class="controls bullet"><span class="by">amelius</span><span>|</span><a href="#40699961">root</a><span>|</span><a href="#40700079">parent</a><span>|</span><a href="#40701612">next</a><span>|</span><label class="collapse" for="c-40700377">[-]</label><label class="expand" for="c-40700377">[9 more]</label></div><br/><div class="children"><div class="content">&gt; One new interesting feature, though, is the support for string routines<p>Sounds almost like they&#x27;re building a language inside a language.</div><br/><div id="40700528" class="c"><input type="checkbox" id="c-40700528" checked=""/><div class="controls bullet"><span class="by">ssahoo</span><span>|</span><a href="#40699961">root</a><span>|</span><a href="#40700377">parent</a><span>|</span><a href="#40701826">next</a><span>|</span><label class="collapse" for="c-40700528">[-]</label><label class="expand" for="c-40700528">[7 more]</label></div><br/><div class="children"><div class="content">No. Native python ops in string suck in performance. String support is absolutely interesting and will enable abstractions for many NLP and LLM use cases without writing native C extensions.</div><br/><div id="40700940" class="c"><input type="checkbox" id="c-40700940" checked=""/><div class="controls bullet"><span class="by">ayhanfuat</span><span>|</span><a href="#40699961">root</a><span>|</span><a href="#40700528">parent</a><span>|</span><a href="#40700806">next</a><span>|</span><label class="collapse" for="c-40700940">[-]</label><label class="expand" for="c-40700940">[5 more]</label></div><br/><div class="children"><div class="content">&gt; Native python ops in string suck in performance.<p>That’s not true? Python string implementation is very optimized, probably have similar performance to C.</div><br/><div id="40702241" class="c"><input type="checkbox" id="c-40702241" checked=""/><div class="controls bullet"><span class="by">mirashii</span><span>|</span><a href="#40699961">root</a><span>|</span><a href="#40700940">parent</a><span>|</span><a href="#40703581">next</a><span>|</span><label class="collapse" for="c-40702241">[-]</label><label class="expand" for="c-40702241">[2 more]</label></div><br/><div class="children"><div class="content">It is absolutely true that there is massive amounts of room for performance improvements for Python strings and that performance is generally subpar due to implementation decisions&#x2F;restrictions.<p>Strings are immutable, so no efficient truncation, concatenation, or modifications of any time, you&#x27;re always reallocating.<p>There&#x27;s no native support for a view of string, so operations like iteration over windows or ranges have to allocate or throw away all the string abstractions.<p>By nature of how the interpreter stores objects, Strings are always going to have an extra level of indirection compared to what you can do with a language like C.<p>Python strings have multiple potential underlying representations, and thus have some overhead for managing and dealing with those multiple representations without exposing those details to user code</div><br/><div id="40702424" class="c"><input type="checkbox" id="c-40702424" checked=""/><div class="controls bullet"><span class="by">Too</span><span>|</span><a href="#40699961">root</a><span>|</span><a href="#40702241">parent</a><span>|</span><a href="#40703581">next</a><span>|</span><label class="collapse" for="c-40702424">[-]</label><label class="expand" for="c-40702424">[1 more]</label></div><br/><div class="children"><div class="content">There is a built in memoryview. But it only works on bytes or other objects supporting the buffer protocol, not on strings.</div><br/></div></div></div></div><div id="40703581" class="c"><input type="checkbox" id="c-40703581" checked=""/><div class="controls bullet"><span class="by">bvrmn</span><span>|</span><a href="#40699961">root</a><span>|</span><a href="#40700940">parent</a><span>|</span><a href="#40702241">prev</a><span>|</span><a href="#40701170">next</a><span>|</span><label class="collapse" for="c-40703581">[-]</label><label class="expand" for="c-40703581">[1 more]</label></div><br/><div class="children"><div class="content">For numpy applications you have to always box a value to get a new python string.   It quite far from fast.</div><br/></div></div><div id="40701170" class="c"><input type="checkbox" id="c-40701170" checked=""/><div class="controls bullet"><span class="by">csjh</span><span>|</span><a href="#40699961">root</a><span>|</span><a href="#40700940">parent</a><span>|</span><a href="#40703581">prev</a><span>|</span><a href="#40700806">next</a><span>|</span><label class="collapse" for="c-40701170">[-]</label><label class="expand" for="c-40701170">[1 more]</label></div><br/><div class="children"><div class="content">stringzilla[1] has 10x perf on some string operations - maybe they don&#x27;t suck, but there&#x27;s definitely room for improvement<p>[1] - <a href="https:&#x2F;&#x2F;github.com&#x2F;ashvardanian&#x2F;StringZilla?tab=readme-ov-file#performance">https:&#x2F;&#x2F;github.com&#x2F;ashvardanian&#x2F;StringZilla?tab=readme-ov-fi...</a></div><br/></div></div></div></div><div id="40700806" class="c"><input type="checkbox" id="c-40700806" checked=""/><div class="controls bullet"><span class="by">topper-123</span><span>|</span><a href="#40699961">root</a><span>|</span><a href="#40700528">parent</a><span>|</span><a href="#40700940">prev</a><span>|</span><a href="#40701826">next</a><span>|</span><label class="collapse" for="c-40700806">[-]</label><label class="expand" for="c-40700806">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, operating on strings has historically been a major weak point of Numpy&#x27;s. I&#x27;m looking forward seeing benchmarks for the new implementation.</div><br/></div></div></div></div><div id="40701826" class="c"><input type="checkbox" id="c-40701826" checked=""/><div class="controls bullet"><span class="by">nerdponx</span><span>|</span><a href="#40699961">root</a><span>|</span><a href="#40700377">parent</a><span>|</span><a href="#40700528">prev</a><span>|</span><a href="#40701612">next</a><span>|</span><label class="collapse" for="c-40701826">[-]</label><label class="expand" for="c-40701826">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s already very much a DSL, and has been for the decade-ish that I&#x27;ve used it.<p>They&#x27;re not building a language. They&#x27;re carefully adding a newly-in-demand feature to a mature, already-built language.</div><br/></div></div></div></div><div id="40701612" class="c"><input type="checkbox" id="c-40701612" checked=""/><div class="controls bullet"><span class="by">etbebl</span><span>|</span><a href="#40699961">root</a><span>|</span><a href="#40700079">parent</a><span>|</span><a href="#40700377">prev</a><span>|</span><a href="#40700941">next</a><span>|</span><label class="collapse" for="c-40701612">[-]</label><label class="expand" for="c-40701612">[1 more]</label></div><br/><div class="children"><div class="content">Interesting that the new string library mirrors the introduction of variable-length string arrays in Matlab in 2016 (<a href="https:&#x2F;&#x2F;www.mathworks.com&#x2F;help&#x2F;matlab&#x2F;ref&#x2F;string.html" rel="nofollow">https:&#x2F;&#x2F;www.mathworks.com&#x2F;help&#x2F;matlab&#x2F;ref&#x2F;string.html</a>).</div><br/></div></div><div id="40700941" class="c"><input type="checkbox" id="c-40700941" checked=""/><div class="controls bullet"><span class="by">ahurmazda</span><span>|</span><a href="#40699961">root</a><span>|</span><a href="#40700079">parent</a><span>|</span><a href="#40701612">prev</a><span>|</span><a href="#40700851">next</a><span>|</span><label class="collapse" for="c-40700941">[-]</label><label class="expand" for="c-40700941">[1 more]</label></div><br/><div class="children"><div class="content">This one will be rough :|<p>&gt; arange’s start argument is positional-only</div><br/></div></div><div id="40700851" class="c"><input type="checkbox" id="c-40700851" checked=""/><div class="controls bullet"><span class="by">brcmthrowaway</span><span>|</span><a href="#40699961">root</a><span>|</span><a href="#40700079">parent</a><span>|</span><a href="#40700941">prev</a><span>|</span><a href="#40701871">next</a><span>|</span><label class="collapse" for="c-40700851">[-]</label><label class="expand" for="c-40700851">[2 more]</label></div><br/><div class="children"><div class="content">Does numpy use GPU?</div><br/><div id="40700935" class="c"><input type="checkbox" id="c-40700935" checked=""/><div class="controls bullet"><span class="by">ahurmazda</span><span>|</span><a href="#40699961">root</a><span>|</span><a href="#40700851">parent</a><span>|</span><a href="#40701871">next</a><span>|</span><label class="collapse" for="c-40700935">[-]</label><label class="expand" for="c-40700935">[1 more]</label></div><br/><div class="children"><div class="content">No.<p>You may want to check out cupy<p><a href="https:&#x2F;&#x2F;cupy.dev&#x2F;" rel="nofollow">https:&#x2F;&#x2F;cupy.dev&#x2F;</a></div><br/></div></div></div></div></div></div><div id="40701871" class="c"><input type="checkbox" id="c-40701871" checked=""/><div class="controls bullet"><span class="by">nerdponx</span><span>|</span><a href="#40699961">parent</a><span>|</span><a href="#40700079">prev</a><span>|</span><a href="#40700927">next</a><span>|</span><label class="collapse" for="c-40701871">[-]</label><label class="expand" for="c-40701871">[2 more]</label></div><br/><div class="children"><div class="content">As a more or less daily user, I was surprised at how not-breaking the 2.0 changes will be for 90% of Numpy users. Unless their dependencies&#x2F;environments break, I expect that casual users won&#x27;t even notice the upgrade.<p>Even the new string dtype I expect would go unnoticed by half of users or more, because they won&#x27;t be using it (because Numpy historically only had fixed-length strings and generally poor support for them) and so won&#x27;t even think to try it. Pandas meanwhile has had a proper string dtype for a while, so anyone interested in doing serious work on strings in data frames &#x2F; arrays would presumably be using Pandas anyway.<p>Most of the breaking changes are in long-deprecated oddball functions that I literally have never seen used in the wild, and in the internal parts that will be a headache for library developers.<p>The only change that a casual user might actually notice is the change in repr(np.float64(3.0)), from &quot;3.0&quot; to &quot;np.float64(3.0)&quot;.</div><br/><div id="40702240" class="c"><input type="checkbox" id="c-40702240" checked=""/><div class="controls bullet"><span class="by">cozzyd</span><span>|</span><a href="#40699961">root</a><span>|</span><a href="#40701871">parent</a><span>|</span><a href="#40700927">next</a><span>|</span><label class="collapse" for="c-40702240">[-]</label><label class="expand" for="c-40702240">[1 more]</label></div><br/><div class="children"><div class="content">I suspect the C ABI break to be the biggest issue, though maybe fewer packages than I imagine compile against the numpy C ABI...</div><br/></div></div></div></div></div></div><div id="40700927" class="c"><input type="checkbox" id="c-40700927" checked=""/><div class="controls bullet"><span class="by">notatoad</span><span>|</span><a href="#40699961">prev</a><span>|</span><a href="#40702313">next</a><span>|</span><label class="collapse" for="c-40700927">[-]</label><label class="expand" for="c-40700927">[12 more]</label></div><br/><div class="children"><div class="content">it feels like the first major release in 18 years which introduces lots of breaking changes should just be a fork rather than a version.<p>let me do `pip install numpy2` and not have to worry about whether or not some other library in my project requires numpy&lt;2.</div><br/><div id="40701533" class="c"><input type="checkbox" id="c-40701533" checked=""/><div class="controls bullet"><span class="by">vessenes</span><span>|</span><a href="#40700927">parent</a><span>|</span><a href="#40702977">next</a><span>|</span><label class="collapse" for="c-40701533">[-]</label><label class="expand" for="c-40701533">[5 more]</label></div><br/><div class="children"><div class="content">From a consumer (developer consumer) point of view, I hear you.<p>From a project point of view, there are some pretty strong contra-indicators in the last 20 years of language development that make this plan suspect, or at least pretty scary — both Perl and Python had extremely rocky transitions around major versions; Perl’s ultimately failing and Python’s ultimately taking like 10 years. At least. I think the last time I needed Python 2 for something was a few months ago, and before that it had been a year or so. I’ve never needed Perl 6, but if I did I would be forced to read a lot of history while I downloaded and figured out which, if any, Perl 5 modules I’m looking for got ported.<p>I’d imagine the numpy devs probably don’t have the resources to support what would certainly become two competing forks that each have communities with their own needs.</div><br/><div id="40703363" class="c"><input type="checkbox" id="c-40703363" checked=""/><div class="controls bullet"><span class="by">librasteve</span><span>|</span><a href="#40700927">root</a><span>|</span><a href="#40701533">parent</a><span>|</span><a href="#40702060">next</a><span>|</span><label class="collapse" for="c-40703363">[-]</label><label class="expand" for="c-40703363">[1 more]</label></div><br/><div class="children"><div class="content">i think it’s fair to say that perl6 has been an “extremely rocky transition” ultimately it was renamed raku to reflect this and avoid camping on the perl5 version numbering<p>raku has good package compatibility via Inline::Perl5 and Inline::Python and FFI to languages like Rust and Zig<p>among the many downsides of the transition, one upside is that raku is a clean sheet of paper and has some interesting new work for example in LLM support<p>I have started work on a new raku module called Dan::Polars and would welcome contributions from Numpy&#x2F;Pandas folks with a vision of how to improve the APIs and abstractions … it’s a good place to make a real contribution, help make something new and better and get to grips with some raku and some rust.<p>just connect via <a href="https:&#x2F;&#x2F;github.com&#x2F;librasteve&#x2F;raku-Dan-Polars">https:&#x2F;&#x2F;github.com&#x2F;librasteve&#x2F;raku-Dan-Polars</a> if you are interested and would like to know more</div><br/></div></div><div id="40702060" class="c"><input type="checkbox" id="c-40702060" checked=""/><div class="controls bullet"><span class="by">sestep</span><span>|</span><a href="#40700927">root</a><span>|</span><a href="#40701533">parent</a><span>|</span><a href="#40703363">prev</a><span>|</span><a href="#40702977">next</a><span>|</span><label class="collapse" for="c-40702060">[-]</label><label class="expand" for="c-40702060">[3 more]</label></div><br/><div class="children"><div class="content">Could you elaborate further on this? Is it not the case that they&#x27;ll still need to support numpy 1.x for at least the near-term future? My understanding was the parent comment was specifically talking about the technical difficulty of multiple versions for the same Python package, not the social problem of project and community management across breaking changes.</div><br/><div id="40702685" class="c"><input type="checkbox" id="c-40702685" checked=""/><div class="controls bullet"><span class="by">vessenes</span><span>|</span><a href="#40700927">root</a><span>|</span><a href="#40702060">parent</a><span>|</span><a href="#40702448">next</a><span>|</span><label class="collapse" for="c-40702685">[-]</label><label class="expand" for="c-40702685">[1 more]</label></div><br/><div class="children"><div class="content">Yes, agreed they’ll need to support 1.x for (probably) quite a while, depending on API and interface changes between major versions.<p>My point, or at least the point I had in mind, was that the social and technical go together in a lot of subtle and sometimes surprising ways; in this case, I’d bet the idea of a second package name a) is a bad one because it’s likely to create differing community expectations about whether or not it’s okay to keep using the 1.0 package, and b) would let people feel okay not upgrading for a while &#x2F; demanding security and bug fix point releases on 1.x longer than if the package itself just updates its major version.</div><br/></div></div><div id="40702448" class="c"><input type="checkbox" id="c-40702448" checked=""/><div class="controls bullet"><span class="by">rovr138</span><span>|</span><a href="#40700927">root</a><span>|</span><a href="#40702060">parent</a><span>|</span><a href="#40702685">prev</a><span>|</span><a href="#40702977">next</a><span>|</span><label class="collapse" for="c-40702448">[-]</label><label class="expand" for="c-40702448">[1 more]</label></div><br/><div class="children"><div class="content">For the near term future, they can use the latest 1 version</div><br/></div></div></div></div></div></div><div id="40702977" class="c"><input type="checkbox" id="c-40702977" checked=""/><div class="controls bullet"><span class="by">aphexairlines</span><span>|</span><a href="#40700927">parent</a><span>|</span><a href="#40701533">prev</a><span>|</span><a href="#40702318">next</a><span>|</span><label class="collapse" for="c-40702977">[-]</label><label class="expand" for="c-40702977">[1 more]</label></div><br/><div class="children"><div class="content">If your requirements.in referenced numpy before this release, then doesn&#x27;t your requirements.txt already reference a specific 1.x version?</div><br/></div></div><div id="40702318" class="c"><input type="checkbox" id="c-40702318" checked=""/><div class="controls bullet"><span class="by">patrick451</span><span>|</span><a href="#40700927">parent</a><span>|</span><a href="#40702977">prev</a><span>|</span><a href="#40700969">next</a><span>|</span><label class="collapse" for="c-40702318">[-]</label><label class="expand" for="c-40702318">[1 more]</label></div><br/><div class="children"><div class="content">A project with both numpy arrays and numpy2 arrays getting mixed together sounds like a disaster to me.</div><br/></div></div><div id="40700969" class="c"><input type="checkbox" id="c-40700969" checked=""/><div class="controls bullet"><span class="by">make3</span><span>|</span><a href="#40700927">parent</a><span>|</span><a href="#40702318">prev</a><span>|</span><a href="#40702313">next</a><span>|</span><label class="collapse" for="c-40700969">[-]</label><label class="expand" for="c-40700969">[4 more]</label></div><br/><div class="children"><div class="content">knowing how careful the NumPy devs are, this was likely a very well pondered decision &amp; all of these deprecations likely have been announced for a long time. Seeing knee jerk reactions like this is annoying.</div><br/><div id="40701250" class="c"><input type="checkbox" id="c-40701250" checked=""/><div class="controls bullet"><span class="by">kaashif</span><span>|</span><a href="#40700927">root</a><span>|</span><a href="#40700969">parent</a><span>|</span><a href="#40701199">next</a><span>|</span><label class="collapse" for="c-40701250">[-]</label><label class="expand" for="c-40701250">[2 more]</label></div><br/><div class="children"><div class="content">Do you have a link to the discussion where this was very well pondered? I can&#x27;t find anything, but I&#x27;m very interested in that kind of discussion.</div><br/><div id="40701593" class="c"><input type="checkbox" id="c-40701593" checked=""/><div class="controls bullet"><span class="by">ngoldbaum</span><span>|</span><a href="#40700927">root</a><span>|</span><a href="#40701250">parent</a><span>|</span><a href="#40701199">next</a><span>|</span><label class="collapse" for="c-40701593">[-]</label><label class="expand" for="c-40701593">[1 more]</label></div><br/><div class="children"><div class="content">We had a developer meeting to discuss what should go into 2.0 in April 2023: <a href="https:&#x2F;&#x2F;github.com&#x2F;numpy&#x2F;archive&#x2F;tree&#x2F;main&#x2F;2.0_developer_meeting">https:&#x2F;&#x2F;github.com&#x2F;numpy&#x2F;archive&#x2F;tree&#x2F;main&#x2F;2.0_developer_mee...</a></div><br/></div></div></div></div></div></div></div></div><div id="40702313" class="c"><input type="checkbox" id="c-40702313" checked=""/><div class="controls bullet"><span class="by">RandomBK</span><span>|</span><a href="#40700927">prev</a><span>|</span><a href="#40702639">next</a><span>|</span><label class="collapse" for="c-40702313">[-]</label><label class="expand" for="c-40702313">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;m starting to see some packages break due to not pinning 1.x in their dependencies. `pip install numpy==1.*` is a quick and hacky way to work around those issues until the ecosystem catches up.</div><br/><div id="40703222" class="c"><input type="checkbox" id="c-40703222" checked=""/><div class="controls bullet"><span class="by">globular-toast</span><span>|</span><a href="#40702313">parent</a><span>|</span><a href="#40702639">next</a><span>|</span><label class="collapse" for="c-40703222">[-]</label><label class="expand" for="c-40703222">[1 more]</label></div><br/><div class="children"><div class="content">&quot;numpy~=1.0”<p>Is this not common knowledge? Also, pip install? Or do you mean some requirements file?</div><br/></div></div></div></div><div id="40702639" class="c"><input type="checkbox" id="c-40702639" checked=""/><div class="controls bullet"><span class="by">antonoo</span><span>|</span><a href="#40702313">prev</a><span>|</span><a href="#40699685">next</a><span>|</span><label class="collapse" for="c-40702639">[-]</label><label class="expand" for="c-40702639">[1 more]</label></div><br/><div class="children"><div class="content">&gt; X months of work by Y contributors?<p>Makes it look like they pressed publish before filling in their template, or is this on purpose?</div><br/></div></div><div id="40699685" class="c"><input type="checkbox" id="c-40699685" checked=""/><div class="controls bullet"><span class="by">ck45</span><span>|</span><a href="#40702639">prev</a><span>|</span><label class="collapse" for="c-40699685">[-]</label><label class="expand" for="c-40699685">[5 more]</label></div><br/><div class="children"><div class="content">Here&#x27;s a link to the release notes: <a href="https:&#x2F;&#x2F;numpy.org&#x2F;devdocs&#x2F;release&#x2F;2.0.0-notes.html" rel="nofollow">https:&#x2F;&#x2F;numpy.org&#x2F;devdocs&#x2F;release&#x2F;2.0.0-notes.html</a></div><br/><div id="40700722" class="c"><input type="checkbox" id="c-40700722" checked=""/><div class="controls bullet"><span class="by">dang</span><span>|</span><a href="#40699685">parent</a><span>|</span><a href="#40700638">next</a><span>|</span><label class="collapse" for="c-40700722">[-]</label><label class="expand" for="c-40700722">[1 more]</label></div><br/><div class="children"><div class="content">Changed to that from <a href="https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;numpy&#x2F;" rel="nofollow">https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;numpy&#x2F;</a> above. Thanks!</div><br/></div></div><div id="40700638" class="c"><input type="checkbox" id="c-40700638" checked=""/><div class="controls bullet"><span class="by">Kortaggio</span><span>|</span><a href="#40699685">parent</a><span>|</span><a href="#40700722">prev</a><span>|</span><a href="#40700401">next</a><span>|</span><label class="collapse" for="c-40700638">[-]</label><label class="expand" for="c-40700638">[1 more]</label></div><br/><div class="children"><div class="content">Duplicate HN thread: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=40700259">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=40700259</a></div><br/></div></div><div id="40700401" class="c"><input type="checkbox" id="c-40700401" checked=""/><div class="controls bullet"><span class="by">chmaynard</span><span>|</span><a href="#40699685">parent</a><span>|</span><a href="#40700638">prev</a><span>|</span><label class="collapse" for="c-40700401">[-]</label><label class="expand" for="c-40700401">[2 more]</label></div><br/><div class="children"><div class="content">This is a draft. No release notes yet.</div><br/><div id="40701154" class="c"><input type="checkbox" id="c-40701154" checked=""/><div class="controls bullet"><span class="by">wartijn_</span><span>|</span><a href="#40699685">root</a><span>|</span><a href="#40700401">parent</a><span>|</span><label class="collapse" for="c-40701154">[-]</label><label class="expand" for="c-40701154">[1 more]</label></div><br/><div class="children"><div class="content">The GitHub release seems to have the final notes. It has at least the placeholder texts replaced:<p>&gt; It is the result of 11 months of development since the last feature release and is the work of 212 contributors spread over 1078 pull requests<p>instead of:<p>&gt; It is the result of X months of development since the last feature release by Y contributors<p><a href="https:&#x2F;&#x2F;github.com&#x2F;numpy&#x2F;numpy&#x2F;releases&#x2F;tag&#x2F;v2.0.0">https:&#x2F;&#x2F;github.com&#x2F;numpy&#x2F;numpy&#x2F;releases&#x2F;tag&#x2F;v2.0.0</a></div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>