<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1726304449836" as="style"/><link rel="stylesheet" href="styles.css?v=1726304449836"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://reader.tymoon.eu/article/437">Porting SBCL to the Nintendo Switch</a> <span class="domain">(<a href="https://reader.tymoon.eu">reader.tymoon.eu</a>)</span></div><div class="subtext"><span>todsacerdoti</span> | <span>63 comments</span></div><br/><div><div id="41531149" class="c"><input type="checkbox" id="c-41531149" checked=""/><div class="controls bullet"><span class="by">colingw</span><span>|</span><a href="#41531711">next</a><span>|</span><label class="collapse" for="c-41531149">[-]</label><label class="expand" for="c-41531149">[14 more]</label></div><br/><div class="children"><div class="content">I have being using Trial[1] for the past few weeks to test out game development in Common Lisp, and have been having a great time. Being able to alter (almost) all aspects of your game while it&#x27;s running is a blessing.<p>I hope this port succeeds.<p>[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;Shirakumo&#x2F;trial">https:&#x2F;&#x2F;github.com&#x2F;Shirakumo&#x2F;trial</a></div><br/><div id="41532410" class="c"><input type="checkbox" id="c-41532410" checked=""/><div class="controls bullet"><span class="by">sinker</span><span>|</span><a href="#41531149">parent</a><span>|</span><a href="#41531711">next</a><span>|</span><label class="collapse" for="c-41532410">[-]</label><label class="expand" for="c-41532410">[13 more]</label></div><br/><div class="children"><div class="content">Lisp languages seem well-suited for building games. The ability to evaluate code interactively without recompilation is a huge deal for feature building, incremental development, and bug-fixing. Retaining application state between code changes seems like it would be incredibly useful. Common Lisp also appears to be a much faster language than I would have blindly assumed.<p>The main downside for me (in general, not just for game programming) is the clunkiness in using data structures - maps especially. But the tradeoff seems worth it.</div><br/><div id="41532717" class="c"><input type="checkbox" id="c-41532717" checked=""/><div class="controls bullet"><span class="by">lispm</span><span>|</span><a href="#41531149">root</a><span>|</span><a href="#41532410">parent</a><span>|</span><a href="#41534266">next</a><span>|</span><label class="collapse" for="c-41532717">[-]</label><label class="expand" for="c-41532717">[1 more]</label></div><br/><div class="children"><div class="content">One of the downsides is that implementations like SBCL have a deep integration and need things like a well performing GC implementation - to get this running on specialized game hardware is challenging. The article describes that. Getting over the hurdle of the low-level integration is difficult. The reward comes, when one gets to the point, where  the rapid incremental development cycles of Common Lisp, even with connected devices, kicks in.<p>For the old historic Naughty Dog use case, it was a development system written in Common Lisp on an SGI and a C++ runtime with low-level Scheme code on the Playstation.<p>&gt; Common Lisp also appears to be a much faster language than I would have blindly assumed.<p>There are two modes:<p>1) fast optimized code which allows for some low-level stuff to stay with Common Lisp<p>2) unoptimized, but natively compiled code, which enables safe (-&gt; the runtime does not crash) interactive and incremental development -&gt; this mode is where much of the software can run nowadays and which is still &quot;fast enough&quot; for many use cases</div><br/></div></div><div id="41534266" class="c"><input type="checkbox" id="c-41534266" checked=""/><div class="controls bullet"><span class="by">Jach</span><span>|</span><a href="#41531149">root</a><span>|</span><a href="#41532410">parent</a><span>|</span><a href="#41532717">prev</a><span>|</span><a href="#41533036">next</a><span>|</span><label class="collapse" for="c-41534266">[-]</label><label class="expand" for="c-41534266">[1 more]</label></div><br/><div class="children"><div class="content">If that&#x27;s your main downside, that&#x27;s pretty good, since clunkiness is in many ways fixable. Personally with standard CL I like to use property lists with keywords, so a &quot;map literal&quot; is just (list :a 3 :b &#x27;other). It&#x27;s fine when the map is small. The getter is just getf, setting is the usual setf around the getter. There&#x27;s a cute way to loop by #&#x27;cddr for a key-and-value loop, though Alexandria (a very common utility library) has some useful utils for looping&#x2F;removing&#x2F;converting plists as well.<p>If typing out &quot;(list ...)&quot; is annoying, it&#x27;s a few lines of code to let you type {:a 3 :b 4} instead, like Clojure. And the result of that can be a plist, or a hash table, or again like Clojure one of the handful of immutable map structures available. You can also easily make the native hash tables print themselves out with the curly bracket syntax.<p>(On the speed front, you might be amused by <a href="https:&#x2F;&#x2F;renato.athaydes.com&#x2F;posts&#x2F;how-to-write-slow-rust-code.html" rel="nofollow">https:&#x2F;&#x2F;renato.athaydes.com&#x2F;posts&#x2F;how-to-write-slow-rust-cod...</a> But separately, when you want to speed up Lisp (with SBCL) even more than default, it&#x27;s rather fun to be able to run disassemble on your function and see what it&#x27;s doing at the assembly level, and turn up optimization hints and have the compiler start telling you (even on the individual function level) about where it has to use e.g. generic addition instead of a faster assembly instruction because it can&#x27;t prove type info and you&#x27;ll have to tell it&#x2F;fix your code. It can tell you about dead code it removed. You can define stack-allocation if needed. Simple benchmarking that also includes processor cycles and memory allocated is available immediately with the built-in time macro...)</div><br/></div></div><div id="41533036" class="c"><input type="checkbox" id="c-41533036" checked=""/><div class="controls bullet"><span class="by">koito17</span><span>|</span><a href="#41531149">root</a><span>|</span><a href="#41532410">parent</a><span>|</span><a href="#41534266">prev</a><span>|</span><a href="#41532673">next</a><span>|</span><label class="collapse" for="c-41533036">[-]</label><label class="expand" for="c-41533036">[6 more]</label></div><br/><div class="children"><div class="content">&gt; The ability to evaluate code interactively without recompilation<p>SBCL and other implementations compile code to machine code <i>then</i> execute it. That is to say, when a form is submitted to the REPL, the form is not interpreted, but first compiled then executed. The reason execution finishes quickly is because compilation finishes quickly.<p>There are some implementations, like CCL, with a special interpreter mode exclusively for REPL-usage.[1] However, at least SBCL and ECL will compile code, not interpret.<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;Clozure&#x2F;ccl&#x2F;blob&#x2F;v1.13&#x2F;level-1&#x2F;l1-readloop.lisp#L710">https:&#x2F;&#x2F;github.com&#x2F;Clozure&#x2F;ccl&#x2F;blob&#x2F;v1.13&#x2F;level-1&#x2F;l1-readloo...</a></div><br/><div id="41534206" class="c"><input type="checkbox" id="c-41534206" checked=""/><div class="controls bullet"><span class="by">taeric</span><span>|</span><a href="#41531149">root</a><span>|</span><a href="#41533036">parent</a><span>|</span><a href="#41533096">next</a><span>|</span><label class="collapse" for="c-41534206">[-]</label><label class="expand" for="c-41534206">[1 more]</label></div><br/><div class="children"><div class="content">I think a lot of this is confusion between online versus batch compilation?  Most of us have only ever seen&#x2F;used batch compilation.  To that end, many people assume that JIT in an interpreter is how online compilation is done.<p>I probably am more guilty of that than I should be.</div><br/></div></div><div id="41533096" class="c"><input type="checkbox" id="c-41533096" checked=""/><div class="controls bullet"><span class="by">Shinmera</span><span>|</span><a href="#41531149">root</a><span>|</span><a href="#41533036">parent</a><span>|</span><a href="#41534206">prev</a><span>|</span><a href="#41535788">next</a><span>|</span><label class="collapse" for="c-41533096">[-]</label><label class="expand" for="c-41533096">[1 more]</label></div><br/><div class="children"><div class="content">I specifically talk about the fast evaluator for SBCL. But even without that contrib, SBCL does have another evaluator as well that&#x27;s used in very specific circumstances.</div><br/></div></div><div id="41535788" class="c"><input type="checkbox" id="c-41535788" checked=""/><div class="controls bullet"><span class="by">darby_nine</span><span>|</span><a href="#41531149">root</a><span>|</span><a href="#41533036">parent</a><span>|</span><a href="#41533096">prev</a><span>|</span><a href="#41534454">next</a><span>|</span><label class="collapse" for="c-41535788">[-]</label><label class="expand" for="c-41535788">[1 more]</label></div><br/><div class="children"><div class="content">Do either CCL or SBCL have any kind of partial evaluation or tracing compilation?</div><br/></div></div><div id="41534454" class="c"><input type="checkbox" id="c-41534454" checked=""/><div class="controls bullet"><span class="by">akira2501</span><span>|</span><a href="#41531149">root</a><span>|</span><a href="#41533036">parent</a><span>|</span><a href="#41535788">prev</a><span>|</span><a href="#41532673">next</a><span>|</span><label class="collapse" for="c-41534454">[-]</label><label class="expand" for="c-41534454">[2 more]</label></div><br/><div class="children"><div class="content">&gt; the form is not interpreted, but first compiled then executed<p>That&#x27;s TempleOS technology right there.</div><br/><div id="41535388" class="c"><input type="checkbox" id="c-41535388" checked=""/><div class="controls bullet"><span class="by">Filligree</span><span>|</span><a href="#41531149">root</a><span>|</span><a href="#41534454">parent</a><span>|</span><a href="#41532673">next</a><span>|</span><label class="collapse" for="c-41535388">[-]</label><label class="expand" for="c-41535388">[1 more]</label></div><br/><div class="children"><div class="content">Other way around.</div><br/></div></div></div></div></div></div><div id="41532673" class="c"><input type="checkbox" id="c-41532673" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#41531149">root</a><span>|</span><a href="#41532410">parent</a><span>|</span><a href="#41533036">prev</a><span>|</span><a href="#41533399">next</a><span>|</span><label class="collapse" for="c-41532673">[-]</label><label class="expand" for="c-41532673">[3 more]</label></div><br/><div class="children"><div class="content">There are 1980&#x27;s papers about Lisp compilers competing with Fortran compilers, unfortunately with the AI Winter, and the high costs of such systems, people lost sight of it.</div><br/><div id="41535508" class="c"><input type="checkbox" id="c-41535508" checked=""/><div class="controls bullet"><span class="by">coliveira</span><span>|</span><a href="#41531149">root</a><span>|</span><a href="#41532673">parent</a><span>|</span><a href="#41533399">next</a><span>|</span><label class="collapse" for="c-41535508">[-]</label><label class="expand" for="c-41535508">[2 more]</label></div><br/><div class="children"><div class="content">Well, I imagine at the time they had some LISP implementations that were very well tuned for specific high end machines, which essentially duplicated Fortran functionality. This is difficult to do for general purpose Lisps like SBCL. It was also probably very expensive.</div><br/><div id="41537548" class="c"><input type="checkbox" id="c-41537548" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#41531149">root</a><span>|</span><a href="#41535508">parent</a><span>|</span><a href="#41533399">next</a><span>|</span><label class="collapse" for="c-41537548">[-]</label><label class="expand" for="c-41537548">[1 more]</label></div><br/><div class="children"><div class="content">What is difficult is having Apple, Google, IBM, Microsoft, Intel, NVidia, AMD,....  compiler teams budget.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="41531711" class="c"><input type="checkbox" id="c-41531711" checked=""/><div class="controls bullet"><span class="by">fouric</span><span>|</span><a href="#41531149">prev</a><span>|</span><a href="#41531487">next</a><span>|</span><label class="collapse" for="c-41531711">[-]</label><label class="expand" for="c-41531711">[7 more]</label></div><br/><div class="children"><div class="content">This is super neat - SBCL is an awesome language implementation, and I&#x27;ve always wanted to do CL development for a &quot;real&quot; game console.<p>I&#x27;m also surprised (in a good way) that Shinmera is working on this - I&#x27;ve seen him a few times before on #lispgames and in the Lisp Discord, and I didn&#x27;t know that he was into this kind of low-level development. I&#x27;ve looked at the guts of SBCL briefly and was frightened away, so kudos to him.<p>I wonder if SBCL (+ threading&#x2F;SDL2) works on the Raspberry Pi now...</div><br/><div id="41532125" class="c"><input type="checkbox" id="c-41532125" checked=""/><div class="controls bullet"><span class="by">Shinmera</span><span>|</span><a href="#41531711">parent</a><span>|</span><a href="#41531825">next</a><span>|</span><label class="collapse" for="c-41532125">[-]</label><label class="expand" for="c-41532125">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not doing the SBCL parts, that&#x27;s all Charles&#x27; work that I hired him for. My work is  the portability bits that Trial relies on to do whatever and the general build architecture for this, along with the initial runtime stubbing.<p>And, as mentioned, *her :)</div><br/><div id="41532282" class="c"><input type="checkbox" id="c-41532282" checked=""/><div class="controls bullet"><span class="by">cellularmitosis</span><span>|</span><a href="#41531711">root</a><span>|</span><a href="#41532125">parent</a><span>|</span><a href="#41531825">next</a><span>|</span><label class="collapse" for="c-41532282">[-]</label><label class="expand" for="c-41532282">[2 more]</label></div><br/><div class="children"><div class="content">Holy cow, Kandria looks amazing.  Is it also developed using Trial?  <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=usc0Znm-gbA" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=usc0Znm-gbA</a></div><br/><div id="41532859" class="c"><input type="checkbox" id="c-41532859" checked=""/><div class="controls bullet"><span class="by">Shinmera</span><span>|</span><a href="#41531711">root</a><span>|</span><a href="#41532282">parent</a><span>|</span><a href="#41531825">next</a><span>|</span><label class="collapse" for="c-41532859">[-]</label><label class="expand" for="c-41532859">[1 more]</label></div><br/><div class="children"><div class="content">Yes, it&#x27;s also open source: <a href="https:&#x2F;&#x2F;github.com&#x2F;shirakumo&#x2F;kandria">https:&#x2F;&#x2F;github.com&#x2F;shirakumo&#x2F;kandria</a><p>My current unannounced project is a lot more ambitious still, being a 3D hack &amp; slash action game. I post updates about that on the Patreon if you&#x27;re interested.</div><br/></div></div></div></div></div></div><div id="41531825" class="c"><input type="checkbox" id="c-41531825" checked=""/><div class="controls bullet"><span class="by">f1shy</span><span>|</span><a href="#41531711">parent</a><span>|</span><a href="#41532125">prev</a><span>|</span><a href="#41531487">next</a><span>|</span><label class="collapse" for="c-41531825">[-]</label><label class="expand" for="c-41531825">[3 more]</label></div><br/><div class="children"><div class="content">- Is it not her?</div><br/><div id="41532642" class="c"><input type="checkbox" id="c-41532642" checked=""/><div class="controls bullet"><span class="by">anisoco</span><span>|</span><a href="#41531711">root</a><span>|</span><a href="#41531825">parent</a><span>|</span><a href="#41531487">next</a><span>|</span><label class="collapse" for="c-41532642">[-]</label><label class="expand" for="c-41532642">[2 more]</label></div><br/><div class="children"><div class="content">It is<p><a href="https:&#x2F;&#x2F;reader.tymoon.eu&#x2F;article&#x2F;436" rel="nofollow">https:&#x2F;&#x2F;reader.tymoon.eu&#x2F;article&#x2F;436</a></div><br/><div id="41533358" class="c"><input type="checkbox" id="c-41533358" checked=""/><div class="controls bullet"><span class="by">f1shy</span><span>|</span><a href="#41531711">root</a><span>|</span><a href="#41532642">parent</a><span>|</span><a href="#41531487">next</a><span>|</span><label class="collapse" for="c-41533358">[-]</label><label class="expand" for="c-41533358">[1 more]</label></div><br/><div class="children"><div class="content">Oh I did not know that she transitioned. I just remebered it was the author of portacle, that was a woman.<p>What a world of pain must be to have to go through it.<p>Kudos to her. Also what she does for lisp is amazing.</div><br/></div></div></div></div></div></div></div></div><div id="41531487" class="c"><input type="checkbox" id="c-41531487" checked=""/><div class="controls bullet"><span class="by">spsesk117</span><span>|</span><a href="#41531711">prev</a><span>|</span><a href="#41531923">next</a><span>|</span><label class="collapse" for="c-41531487">[-]</label><label class="expand" for="c-41531487">[3 more]</label></div><br/><div class="children"><div class="content">Thanks to the author for the fascinating and detailed write up. It feels like a lot of the time this level of detail around the specifics of &#x27;blessed&#x27; (not homebrew) console porting are only revealed years after the end of the consoles lifetime.<p>As an aside, reading about this kind of deeply interesting work always makes me envious when I think about the rote software I spend all day writing :)</div><br/><div id="41531543" class="c"><input type="checkbox" id="c-41531543" checked=""/><div class="controls bullet"><span class="by">whizzter</span><span>|</span><a href="#41531487">parent</a><span>|</span><a href="#41531527">next</a><span>|</span><label class="collapse" for="c-41531543">[-]</label><label class="expand" for="c-41531543">[1 more]</label></div><br/><div class="children"><div class="content">At least back when I was working these &quot;blessed&quot; tools were usually a tad hacked together, modern homebrew toolchains for many older platforms are better except for debugging support (since the devkits for the machines usually had better hooks available but also avoiding the entire GDB focus).<p>Having been in both worlds, i&#x27;m not entirely sure there&#x27;s that much to be envious of.</div><br/></div></div><div id="41531527" class="c"><input type="checkbox" id="c-41531527" checked=""/><div class="controls bullet"><span class="by">cschep</span><span>|</span><a href="#41531487">parent</a><span>|</span><a href="#41531543">prev</a><span>|</span><a href="#41531923">next</a><span>|</span><label class="collapse" for="c-41531527">[-]</label><label class="expand" for="c-41531527">[1 more]</label></div><br/><div class="children"><div class="content">well said!<p>as I was just sitting down to another day of ruby on rails (that I am grateful for!) I was thinking.. I wonder what hobby&#x2F;open source projects could use some of my attention later..<p>.. what projects my attention could use later .. :D</div><br/></div></div></div></div><div id="41531923" class="c"><input type="checkbox" id="c-41531923" checked=""/><div class="controls bullet"><span class="by">Retr0id</span><span>|</span><a href="#41531487">prev</a><span>|</span><a href="#41537613">next</a><span>|</span><label class="collapse" for="c-41531923">[-]</label><label class="expand" for="c-41531923">[11 more]</label></div><br/><div class="children"><div class="content">&gt; The answer to that is that while I would desperately like to share it all publicly, the NDA prevents us from doing so.<p>I&#x27;m curious what the rationale here was for using the official SDK, rather than the unencumbered &quot;homebrew&quot; ones[0].<p>As a complete guess, maybe Nintendo doesn&#x27;t let you officially publish games built using 3rd party SDKs?<p>[0] <a href="https:&#x2F;&#x2F;switchbrew.org&#x2F;wiki&#x2F;Setting_up_Development_Environment" rel="nofollow">https:&#x2F;&#x2F;switchbrew.org&#x2F;wiki&#x2F;Setting_up_Development_Environme...</a></div><br/><div id="41532131" class="c"><input type="checkbox" id="c-41532131" checked=""/><div class="controls bullet"><span class="by">Shinmera</span><span>|</span><a href="#41531923">parent</a><span>|</span><a href="#41537613">next</a><span>|</span><label class="collapse" for="c-41532131">[-]</label><label class="expand" for="c-41532131">[10 more]</label></div><br/><div class="children"><div class="content">You cannot publish games with homebrew, it has to use the official SDK. Besides that, almost nobody has a jailbroken Switch, so it would make it extremely hard to play any games on anything but an emulator.</div><br/><div id="41535161" class="c"><input type="checkbox" id="c-41535161" checked=""/><div class="controls bullet"><span class="by">favorited</span><span>|</span><a href="#41531923">root</a><span>|</span><a href="#41532131">parent</a><span>|</span><a href="#41535567">next</a><span>|</span><label class="collapse" for="c-41535161">[-]</label><label class="expand" for="c-41535161">[1 more]</label></div><br/><div class="children"><div class="content">&gt; almost nobody has a jailbroken Switch<p>This isn&#x27;t really my scene so I don&#x27;t know the details, but I remember reading that the first 10+ million Switches produced have an unpatchable bootloader exploit.  I&#x27;m sure you&#x27;re correct that almost nobody actually has a hacked console, but my understanding is that they&#x27;re readily available for people who want one.</div><br/></div></div><div id="41535567" class="c"><input type="checkbox" id="c-41535567" checked=""/><div class="controls bullet"><span class="by">ArneBab</span><span>|</span><a href="#41531923">root</a><span>|</span><a href="#41532131">parent</a><span>|</span><a href="#41535161">prev</a><span>|</span><a href="#41532358">next</a><span>|</span><label class="collapse" for="c-41535567">[-]</label><label class="expand" for="c-41535567">[2 more]</label></div><br/><div class="children"><div class="content">You don’t let your kids jailbreak their Switch. Because it’s a damn online system, so any leaked info and Nintendo can brick the Switch. And their game states are far too valuable for the kids for that.</div><br/><div id="41537191" class="c"><input type="checkbox" id="c-41537191" checked=""/><div class="controls bullet"><span class="by">opan</span><span>|</span><a href="#41531923">root</a><span>|</span><a href="#41535567">parent</a><span>|</span><a href="#41532358">next</a><span>|</span><label class="collapse" for="c-41537191">[-]</label><label class="expand" for="c-41537191">[1 more]</label></div><br/><div class="children"><div class="content">Trey can ban the Switch, but offline games will continue to work. Also the account doesn&#x27;t get banned, so you can buy a new one. (Speaking from experience, unfortunately) You can still play the new Zelda, just can&#x27;t play Splatoon, Mario Kart, or Smash online then on the banned Switch. It&#x27;s possible but arduous to rescue the saves off the banned Switch if you have access to a second modded Switch that is not banned (also speaking from experience) and use homebrew to back up and restore your saves, then launch them all from sysMMC with legitimately owned versions of those games and let the cloud save feature kick in. Animal Crossing has a separate dedicated save tool.<p>Block Nintendo servers, disable auto updates, use separate sysMMC and emuMMC with no unauthorized games or DLC run on the sysMMC. If you follow the main guide everyone uses now, it&#x27;s pretty safe. But updating becomes a more difficult and manual process. Have to grab a zip of the new firmware from the &#x27;net on your PC and copy it to the SD card to be installed via a homebrew method. Installing games, game updates, and DLC is similarly manual. It&#x27;s not like the PS3, Vita, and 3DS(?) where you can pull it all off of official servers easily.<p>Oh yeah, and we&#x27;re stuck with a &quot;tethered jailbreak&quot;, that&#x27;s perhaps the worst part. Any time you turn off the hacked Switch it needs to be sent a payload from your PC or phone to boot up again then.<p>Whether it&#x27;s all worth it depends on your needs I suppose. You could get a bunch of tournament setups going with Smash (or another fighting game) + all DLC for your LAN party and save a bit of money. You can try out new singleplayer games before buying them physically. You can mod games and run emulators. Honestly the Switch scene seems largely less cool than what we had with the 3DS or Wii (Wii U was a little disappointing as well). I barely touch my Switch(es) since getting a Steam Deck.</div><br/></div></div></div></div><div id="41532358" class="c"><input type="checkbox" id="c-41532358" checked=""/><div class="controls bullet"><span class="by">Retr0id</span><span>|</span><a href="#41531923">root</a><span>|</span><a href="#41532131">parent</a><span>|</span><a href="#41535567">prev</a><span>|</span><a href="#41537613">next</a><span>|</span><label class="collapse" for="c-41532358">[-]</label><label class="expand" for="c-41532358">[6 more]</label></div><br/><div class="children"><div class="content">&gt; You cannot publish games with homebrew, it has to use the official SDK<p>This doesn&#x27;t surprise me much, but does Nintendo state this explicitly anywhere public?<p>If Nintendo chose to sign an application developed using a 3rd party toolchain, there&#x27;s no <i>technical</i> reason why it couldn&#x27;t run on retail consoles.</div><br/><div id="41532756" class="c"><input type="checkbox" id="c-41532756" checked=""/><div class="controls bullet"><span class="by">Arelius</span><span>|</span><a href="#41531923">root</a><span>|</span><a href="#41532358">parent</a><span>|</span><a href="#41537613">next</a><span>|</span><label class="collapse" for="c-41532756">[-]</label><label class="expand" for="c-41532756">[5 more]</label></div><br/><div class="children"><div class="content">Yeah, maybe. But also the official SDKs are pretty good and you get support from Nintendo. It seems like a pretty big risk to use an unsupported SDK... for what benefit?</div><br/><div id="41532803" class="c"><input type="checkbox" id="c-41532803" checked=""/><div class="controls bullet"><span class="by">Retr0id</span><span>|</span><a href="#41531923">root</a><span>|</span><a href="#41532756">parent</a><span>|</span><a href="#41537613">next</a><span>|</span><label class="collapse" for="c-41532803">[-]</label><label class="expand" for="c-41532803">[4 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t have access to Nintendo&#x27;s SDK so I can&#x27;t compare directly, but the article cites an inability to map executable pages. libnx supports this (but of course, this is moot if Nintendo wouldn&#x27;t let you ship it). But the main benefit is being able to talk about and share your work without worrying about violating an NDA.<p><a href="https:&#x2F;&#x2F;switchbrew.github.io&#x2F;libnx&#x2F;jit_8h.html" rel="nofollow">https:&#x2F;&#x2F;switchbrew.github.io&#x2F;libnx&#x2F;jit_8h.html</a><p><a href="https:&#x2F;&#x2F;switchbrew.org&#x2F;wiki&#x2F;JIT_services" rel="nofollow">https:&#x2F;&#x2F;switchbrew.org&#x2F;wiki&#x2F;JIT_services</a></div><br/><div id="41532872" class="c"><input type="checkbox" id="c-41532872" checked=""/><div class="controls bullet"><span class="by">Shinmera</span><span>|</span><a href="#41531923">root</a><span>|</span><a href="#41532803">parent</a><span>|</span><a href="#41537613">next</a><span>|</span><label class="collapse" for="c-41532872">[-]</label><label class="expand" for="c-41532872">[3 more]</label></div><br/><div class="children"><div class="content">The OS can do it, and some Nintendo titles on the Switch do use this capability, but I have talked to Nintendo directly about using it, and it&#x27;s a hard No. I can&#x27;t even use the JIT feature purely for dev.</div><br/><div id="41533760" class="c"><input type="checkbox" id="c-41533760" checked=""/><div class="controls bullet"><span class="by">nightpool</span><span>|</span><a href="#41531923">root</a><span>|</span><a href="#41532872">parent</a><span>|</span><a href="#41537613">next</a><span>|</span><label class="collapse" for="c-41533760">[-]</label><label class="expand" for="c-41533760">[2 more]</label></div><br/><div class="children"><div class="content">Really? What is the justification for allowing Nintendo titles to use it but not third parties? Security concerns?</div><br/><div id="41533778" class="c"><input type="checkbox" id="c-41533778" checked=""/><div class="controls bullet"><span class="by">Shinmera</span><span>|</span><a href="#41531923">root</a><span>|</span><a href="#41533760">parent</a><span>|</span><a href="#41537613">next</a><span>|</span><label class="collapse" for="c-41533778">[-]</label><label class="expand" for="c-41533778">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s what they claim, but ultimately it&#x27;s their thing, so they do with it whatever they like.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="41537613" class="c"><input type="checkbox" id="c-41537613" checked=""/><div class="controls bullet"><span class="by">dasyatidprime</span><span>|</span><a href="#41531923">prev</a><span>|</span><a href="#41533645">next</a><span>|</span><label class="collapse" for="c-41537613">[-]</label><label class="expand" for="c-41537613">[2 more]</label></div><br/><div class="children"><div class="content">How&#x27;s CL&#x27;s GC performance for games nowadays? I&#x27;ve been slightly eyeing the upcoming Autumn Lisp Game Jam myself, but last I checked all the major libre CL impls, including SBCL, still used a full stop-the-world collector, which feels like a recipe for latency spikes. I saw flashes of stuff on sbcl-devel about someone working on a lower-latency one, but I don&#x27;t know whether it got anywhere.</div><br/><div id="41538166" class="c"><input type="checkbox" id="c-41538166" checked=""/><div class="controls bullet"><span class="by">vindarel</span><span>|</span><a href="#41537613">parent</a><span>|</span><a href="#41533645">next</a><span>|</span><label class="collapse" for="c-41538166">[-]</label><label class="expand" for="c-41538166">[1 more]</label></div><br/><div class="children"><div class="content">see this detailed report: <a href="https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;Shinmera&#x2F;talks&#x2F;master&#x2F;els2023-kandria&#x2F;paper.pdf" rel="nofollow">https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;Shinmera&#x2F;talks&#x2F;master&#x2F;els2...</a><p>&gt; Overall we have needed to do surprisingly little actual performance analysis and optimisation work to make Kandria run well.</div><br/></div></div></div></div><div id="41533645" class="c"><input type="checkbox" id="c-41533645" checked=""/><div class="controls bullet"><span class="by">nanna</span><span>|</span><a href="#41537613">prev</a><span>|</span><a href="#41537704">next</a><span>|</span><label class="collapse" for="c-41533645">[-]</label><label class="expand" for="c-41533645">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve just bought Kandria. I&#x27;m not much of a game player so I probably won&#x27;t get much play out of it, but Shinmera is clearly pushing the bounds of the Lisp world, and that&#x27;s something to support.</div><br/></div></div><div id="41537704" class="c"><input type="checkbox" id="c-41537704" checked=""/><div class="controls bullet"><span class="by">superdisk</span><span>|</span><a href="#41533645">prev</a><span>|</span><a href="#41532809">next</a><span>|</span><label class="collapse" for="c-41537704">[-]</label><label class="expand" for="c-41537704">[2 more]</label></div><br/><div class="children"><div class="content">Great article. One question I had, not to diminish this hard work, is why not use a different implementation like ECL which is pretty portable already and can compile to static C code which can just be compiled traditionally for the target? I&#x27;ve been doing that for a Wasm + SDL2 game in Lisp and it&#x27;s been (relatively) straightforward. I suppose performance might be a issue.</div><br/><div id="41538196" class="c"><input type="checkbox" id="c-41538196" checked=""/><div class="controls bullet"><span class="by">Shinmera</span><span>|</span><a href="#41537704">parent</a><span>|</span><a href="#41532809">next</a><span>|</span><label class="collapse" for="c-41538196">[-]</label><label class="expand" for="c-41538196">[1 more]</label></div><br/><div class="children"><div class="content">Because, as you guessed, no implementation other than SBCL comes close to the performance needed.</div><br/></div></div></div></div><div id="41532809" class="c"><input type="checkbox" id="c-41532809" checked=""/><div class="controls bullet"><span class="by">sleepycatgirl</span><span>|</span><a href="#41537704">prev</a><span>|</span><a href="#41531918">next</a><span>|</span><label class="collapse" for="c-41532809">[-]</label><label class="expand" for="c-41532809">[2 more]</label></div><br/><div class="children"><div class="content">Her work is just amazing. And makes me incredibly happy, as I like to write some CL here and there.</div><br/><div id="41532909" class="c"><input type="checkbox" id="c-41532909" checked=""/><div class="controls bullet"><span class="by">Shinmera</span><span>|</span><a href="#41532809">parent</a><span>|</span><a href="#41531918">next</a><span>|</span><label class="collapse" for="c-41532909">[-]</label><label class="expand" for="c-41532909">[1 more]</label></div><br/><div class="children"><div class="content">Aw, thank you. Happy hacking!</div><br/></div></div></div></div><div id="41531918" class="c"><input type="checkbox" id="c-41531918" checked=""/><div class="controls bullet"><span class="by">ducktective</span><span>|</span><a href="#41532809">prev</a><span>|</span><a href="#41532680">next</a><span>|</span><label class="collapse" for="c-41531918">[-]</label><label class="expand" for="c-41531918">[5 more]</label></div><br/><div class="children"><div class="content">I wish the likes of Nintendo and Sony themselves finance such efforts. I mean it&#x27;s one another way to create games (IP) for your console, what possibly could be the downside of starting something similar to Github Accelerator for your platform?</div><br/><div id="41531953" class="c"><input type="checkbox" id="c-41531953" checked=""/><div class="controls bullet"><span class="by">jsheard</span><span>|</span><a href="#41531918">parent</a><span>|</span><a href="#41537846">next</a><span>|</span><label class="collapse" for="c-41531953">[-]</label><label class="expand" for="c-41531953">[3 more]</label></div><br/><div class="children"><div class="content">Because it&#x27;s well established that game developers can and will jump through whatever hoops the platform holder demands at their own expense, they don&#x27;t have the leverage to be picky about the technical details when deciding which platforms to ship on. Nintendo doesn&#x27;t need to create new incentives to release on the Switch when they already have the biggest incentive of all: 140+ million units sold, and a high attach rate.<p>At least there isn&#x27;t as much hoop jumping as there used to be, since the systems have all converged on using commodity CPU and GPU architectures with at most minor embellishments.</div><br/><div id="41532810" class="c"><input type="checkbox" id="c-41532810" checked=""/><div class="controls bullet"><span class="by">Arelius</span><span>|</span><a href="#41531918">root</a><span>|</span><a href="#41531953">parent</a><span>|</span><a href="#41537846">next</a><span>|</span><label class="collapse" for="c-41532810">[-]</label><label class="expand" for="c-41532810">[2 more]</label></div><br/><div class="children"><div class="content">Yeah, also whatever they would build, the other platform vendors won&#x27;t choose the same thing, and it wont be the exact variant of lisp or w&#x2F;e that even the few nice developers would want.<p>I wish vendors would be just more supportive of different llvm tool chains. Rust isn&#x27;t even well supported.</div><br/><div id="41537877" class="c"><input type="checkbox" id="c-41537877" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#41531918">root</a><span>|</span><a href="#41532810">parent</a><span>|</span><a href="#41537846">next</a><span>|</span><label class="collapse" for="c-41537877">[-]</label><label class="expand" for="c-41537877">[1 more]</label></div><br/><div class="children"><div class="content">Rust isn&#x27;t even available on Android NDK, even though is now used on Android.<p>Same applies to Rust on Windows, and whatever Microsoft is doing, windows-rs isn&#x27;t that great, and after what the team did with C++&#x2F;WinRT I don&#x27;t have high expectations.<p>So consoles have even less reasons to support Rust.</div><br/></div></div></div></div></div></div><div id="41537846" class="c"><input type="checkbox" id="c-41537846" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#41531918">parent</a><span>|</span><a href="#41531953">prev</a><span>|</span><a href="#41532680">next</a><span>|</span><label class="collapse" for="c-41537846">[-]</label><label class="expand" for="c-41537846">[1 more]</label></div><br/><div class="children"><div class="content">They did in the past and the only thing people did was to port MAME and other emulators, or copies from old 8 and 16 bit days.<p>That is why we cannot have nice things.</div><br/></div></div></div></div><div id="41532680" class="c"><input type="checkbox" id="c-41532680" checked=""/><div class="controls bullet"><span class="by">not_your_vase</span><span>|</span><a href="#41531918">prev</a><span>|</span><a href="#41531952">next</a><span>|</span><label class="collapse" for="c-41532680">[-]</label><label class="expand" for="c-41532680">[4 more]</label></div><br/><div class="children"><div class="content">Somewhat offtopic, just flashed through my mind: you know what would be amazing and absolutely useless at the same time?<p>Porting Yuzu to Nintendo Switch</div><br/><div id="41532719" class="c"><input type="checkbox" id="c-41532719" checked=""/><div class="controls bullet"><span class="by">laidoffamazon</span><span>|</span><a href="#41532680">parent</a><span>|</span><a href="#41532734">next</a><span>|</span><label class="collapse" for="c-41532719">[-]</label><label class="expand" for="c-41532719">[2 more]</label></div><br/><div class="children"><div class="content">This has been done, and it’s been possible to run Switch on Switch for several months [0] (about 39 minutes into the video).<p>[0] <a href="https:&#x2F;&#x2F;youtu.be&#x2F;H1gveQUBIKk" rel="nofollow">https:&#x2F;&#x2F;youtu.be&#x2F;H1gveQUBIKk</a></div><br/><div id="41532741" class="c"><input type="checkbox" id="c-41532741" checked=""/><div class="controls bullet"><span class="by">not_your_vase</span><span>|</span><a href="#41532680">root</a><span>|</span><a href="#41532719">parent</a><span>|</span><a href="#41532734">next</a><span>|</span><label class="collapse" for="c-41532741">[-]</label><label class="expand" for="c-41532741">[1 more]</label></div><br/><div class="children"><div class="content">Shoot, it was a suspiciously genius idea* for a Friday 13th.<p>*: Compared to my usual ideas</div><br/></div></div></div></div><div id="41532734" class="c"><input type="checkbox" id="c-41532734" checked=""/><div class="controls bullet"><span class="by">jfim</span><span>|</span><a href="#41532680">parent</a><span>|</span><a href="#41532719">prev</a><span>|</span><a href="#41531952">next</a><span>|</span><label class="collapse" for="c-41532734">[-]</label><label class="expand" for="c-41532734">[1 more]</label></div><br/><div class="children"><div class="content">Since I had to look it up, Yuzu is a Nintendo switch emulator.</div><br/></div></div></div></div><div id="41531952" class="c"><input type="checkbox" id="c-41531952" checked=""/><div class="controls bullet"><span class="by">noobermin</span><span>|</span><a href="#41532680">prev</a><span>|</span><a href="#41533583">next</a><span>|</span><label class="collapse" for="c-41531952">[-]</label><label class="expand" for="c-41531952">[1 more]</label></div><br/><div class="children"><div class="content">This is what I come to HN for. Kudos to OP and their colleague. I know it&#x27;s impossible but what a blessing it would be if Nintendo could be a little more open about their system.</div><br/></div></div><div id="41533583" class="c"><input type="checkbox" id="c-41533583" checked=""/><div class="controls bullet"><span class="by">trenchgun</span><span>|</span><a href="#41531952">prev</a><span>|</span><a href="#41534189">next</a><span>|</span><label class="collapse" for="c-41533583">[-]</label><label class="expand" for="c-41533583">[1 more]</label></div><br/><div class="children"><div class="content">Does anybody know what is the status of Trial on Mac OS? Specifically Apple Silicon</div><br/></div></div><div id="41534189" class="c"><input type="checkbox" id="c-41534189" checked=""/><div class="controls bullet"><span class="by">hoten</span><span>|</span><a href="#41533583">prev</a><span>|</span><a href="#41534379">next</a><span>|</span><label class="collapse" for="c-41534189">[-]</label><label class="expand" for="c-41534189">[3 more]</label></div><br/><div class="children"><div class="content">b&#x2F;c it isn&#x27;t described anywhere...<p>SBCL - &quot;Steel Bank Common Lisp&quot;<p>&gt; Steel Bank Common Lisp (SBCL) is a high performance Common Lisp compiler. It is open source &#x2F; free software, with a permissive license. In addition to the compiler and runtime system for ANSI Common Lisp, it provides an interactive environment including a debugger, a statistical profiler, a code coverage tool, and many other extensions.<p><a href="https:&#x2F;&#x2F;www.sbcl.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.sbcl.org&#x2F;</a></div><br/><div id="41534228" class="c"><input type="checkbox" id="c-41534228" checked=""/><div class="controls bullet"><span class="by">varjag</span><span>|</span><a href="#41534189">parent</a><span>|</span><a href="#41535593">next</a><span>|</span><label class="collapse" for="c-41534228">[-]</label><label class="expand" for="c-41534228">[1 more]</label></div><br/><div class="children"><div class="content">&quot;Steel Bank&quot; in turn is a homage to &quot;Carnegie Mellon&quot; of CMUCL.</div><br/></div></div><div id="41535593" class="c"><input type="checkbox" id="c-41535593" checked=""/><div class="controls bullet"><span class="by">ArneBab</span><span>|</span><a href="#41534189">parent</a><span>|</span><a href="#41534228">prev</a><span>|</span><a href="#41534379">next</a><span>|</span><label class="collapse" for="c-41535593">[-]</label><label class="expand" for="c-41535593">[1 more]</label></div><br/><div class="children"><div class="content">According to the Benchmarks Game, SBCL is roughly as fast as Node.<p><a href="https:&#x2F;&#x2F;benchmarksgame-team.pages.debian.net&#x2F;benchmarksgame&#x2F;box-plot-summary-charts.html" rel="nofollow">https:&#x2F;&#x2F;benchmarksgame-team.pages.debian.net&#x2F;benchmarksgame&#x2F;...</a></div><br/></div></div></div></div><div id="41534379" class="c"><input type="checkbox" id="c-41534379" checked=""/><div class="controls bullet"><span class="by">drmeister</span><span>|</span><a href="#41534189">prev</a><span>|</span><a href="#41532542">next</a><span>|</span><label class="collapse" for="c-41534379">[-]</label><label class="expand" for="c-41534379">[1 more]</label></div><br/><div class="children"><div class="content">Awe-inspiring work Shinmera and Charles.</div><br/></div></div><div id="41532542" class="c"><input type="checkbox" id="c-41532542" checked=""/><div class="controls bullet"><span class="by">whitten</span><span>|</span><a href="#41534379">prev</a><span>|</span><a href="#41532264">next</a><span>|</span><label class="collapse" for="c-41532542">[-]</label><label class="expand" for="c-41532542">[4 more]</label></div><br/><div class="children"><div class="content">I probably missed it, but since the switch doesn’t have a keyboard how do you handle text input ?</div><br/><div id="41532622" class="c"><input type="checkbox" id="c-41532622" checked=""/><div class="controls bullet"><span class="by">jsheard</span><span>|</span><a href="#41532542">parent</a><span>|</span><a href="#41532885">next</a><span>|</span><label class="collapse" for="c-41532622">[-]</label><label class="expand" for="c-41532622">[1 more]</label></div><br/><div class="children"><div class="content">The Switch can support a USB keyboard, which would be the nice way to do it. There&#x27;s already a fair number of officially published games with keyboard and&#x2F;or mouse support, including a couple of programming ones. It has an on-screen keyboard too of course but you wouldn&#x27;t want to rely on that more than absolutely necessary.</div><br/></div></div><div id="41532885" class="c"><input type="checkbox" id="c-41532885" checked=""/><div class="controls bullet"><span class="by">Shinmera</span><span>|</span><a href="#41532542">parent</a><span>|</span><a href="#41532622">prev</a><span>|</span><a href="#41532781">next</a><span>|</span><label class="collapse" for="c-41532885">[-]</label><label class="expand" for="c-41532885">[1 more]</label></div><br/><div class="children"><div class="content">It does have a HID keyboard API, but typically you&#x27;re expected to present an on-screen keyboard.</div><br/></div></div><div id="41532781" class="c"><input type="checkbox" id="c-41532781" checked=""/><div class="controls bullet"><span class="by">Arelius</span><span>|</span><a href="#41532542">parent</a><span>|</span><a href="#41532885">prev</a><span>|</span><a href="#41532264">next</a><span>|</span><label class="collapse" for="c-41532781">[-]</label><label class="expand" for="c-41532781">[1 more]</label></div><br/><div class="children"><div class="content">Over the network most likely?</div><br/></div></div></div></div></div></div></div></div></div></body></html>