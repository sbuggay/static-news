<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1683450053292" as="style"/><link rel="stylesheet" href="styles.css?v=1683450053292"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/svpv/qsort">Qsort.h – Quicksort as a C macro (2019)</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>olitech</span> | <span>34 comments</span></div><br/><div><div id="35847408" class="c"><input type="checkbox" id="c-35847408" checked=""/><div class="controls bullet"><span class="by">kazinator</span><span>|</span><a href="#35848786">next</a><span>|</span><label class="collapse" for="c-35847408">[-]</label><label class="expand" for="c-35847408">[3 more]</label></div><br/><div class="children"><div class="content">This is very good: it uses the original Hoare partitioning algorithm which moves two indices at opposite ends of the array partition toward each other, rather than the ill-considered Lomuto partitioning:<p><pre><code>    while (1) {                              \
      do q_i++; while (Q_LESS(q_i, q_l));    \
      do q_j--; while (Q_LESS(q_l, q_j));    \
     if (q_i &gt;= q_j) break; &#x2F;* Sedgewick says &quot;until j &lt; i&quot; *&#x2F; \
     Q_SWAP(q_i, q_j);                       \
    }                                        \
</code></pre>
Lomuto is that algorithm that moves one index, swapping lower-than-pivot elements into a growing lower partition.<p>Lomuto ends up performing more comparisons.<p>What&#x27;s more, Lomuto has quadratic behavior for sequences that are just repetitions of a value: every partitioning and sub-partitioning is a degenerate case.   Hoare&#x27;s algorithm deftly avoids this problem. You can explain that using the above snippet. If all elements are the same, then Q_LESS(q_i, q_l) is always false. Thus each of the two do&#x2F;while loops executes one unconditional iteration, so that the two indices q_i and q_j march toward each other and meet in the middle. The repeating sequence thus nicely cut in half, and recursively so, ensuring O(N log N) behavior.<p>You can&#x27;t easily banish the worst case from Quicksort, but implementations should not exhibit worst case behavior on inputs that have some obvious pattern, like a repeated value.</div><br/><div id="35848741" class="c"><input type="checkbox" id="c-35848741" checked=""/><div class="controls bullet"><span class="by">nwallin</span><span>|</span><a href="#35847408">parent</a><span>|</span><a href="#35848786">next</a><span>|</span><label class="collapse" for="c-35848741">[-]</label><label class="expand" for="c-35848741">[2 more]</label></div><br/><div class="children"><div class="content">Lomuto partitioning has one major advantage over Hoare: Lomuto can be implemented in such that the inner loop is branchless, while the inner loops in Hoare are branchy and wreck the branch predictor.<p>Lomuto typically fixes the Dutch National Flag problem by keeping two &#x27;midpoints&#x27;; left of the left midpoint is less than the pivot, right of the right midpoint is greater than the pivot, between the two midpoints is equal to the pivot. This makes most data inputs that result in the O(n^2) worst case of quicksort give O(n) performance instead.<p>Unfortunately the code is horrific looking. It&#x27;s not something I&#x27;d ever want to do in a C macro.</div><br/><div id="35849341" class="c"><input type="checkbox" id="c-35849341" checked=""/><div class="controls bullet"><span class="by">orlp</span><span>|</span><a href="#35847408">root</a><span>|</span><a href="#35848741">parent</a><span>|</span><a href="#35848786">next</a><span>|</span><label class="collapse" for="c-35849341">[-]</label><label class="expand" for="c-35849341">[1 more]</label></div><br/><div class="children"><div class="content">And my algorithm pdqsort uses Hoare-style partitioning, is branchless, and properly solves the Dutch National Flag problem by being 0(n log k) for k unique values on average using only a single extra comparison per partitioning.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;orlp&#x2F;pdqsort">https:&#x2F;&#x2F;github.com&#x2F;orlp&#x2F;pdqsort</a></div><br/></div></div></div></div></div></div><div id="35848786" class="c"><input type="checkbox" id="c-35848786" checked=""/><div class="controls bullet"><span class="by">syockit</span><span>|</span><a href="#35847408">prev</a><span>|</span><a href="#35847321">next</a><span>|</span><label class="collapse" for="c-35848786">[-]</label><label class="expand" for="c-35848786">[1 more]</label></div><br/><div class="children"><div class="content">Today I learned that for modern processors, quicksort code is small enough that the compiler can inline them if the definition is visible during compilation. See here for comparison of isort function implemented using plain static functions vs the macro in TFA: <a href="https:&#x2F;&#x2F;godbolt.org&#x2F;z&#x2F;arGjPGhKE" rel="nofollow">https:&#x2F;&#x2F;godbolt.org&#x2F;z&#x2F;arGjPGhKE</a> . It&#x27;s not as flexible as the macro form (not being able to pass two arrays at once like the sortByAge example in TFA), but I figure it should be friendlier to debuggers (though with all the inlining the experience is not going to be that great either).<p>IIRC, if LTO is enabled the calls to the less and swap functions can also be inlined even if the generic function is compiled to a separate translation unit. Haven&#x27;t tried it for the quick sort code above, but I found that out for some other thing I experimented with.</div><br/></div></div><div id="35847321" class="c"><input type="checkbox" id="c-35847321" checked=""/><div class="controls bullet"><span class="by">greenyoda</span><span>|</span><a href="#35848786">prev</a><span>|</span><a href="#35847788">next</a><span>|</span><label class="collapse" for="c-35847321">[-]</label><label class="expand" for="c-35847321">[3 more]</label></div><br/><div class="children"><div class="content">The link to Sedgewick&#x27;s 1978 paper no longer works, but an archive of it can be found here: <a href="http:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20190713031319&#x2F;http:&#x2F;&#x2F;penguin.ewu.edu&#x2F;cscd300&#x2F;Topic&#x2F;AdvSorting&#x2F;Sedgewick.pdf" rel="nofollow">http:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20190713031319&#x2F;http:&#x2F;&#x2F;penguin.ewu...</a></div><br/><div id="35847486" class="c"><input type="checkbox" id="c-35847486" checked=""/><div class="controls bullet"><span class="by">kazinator</span><span>|</span><a href="#35847321">parent</a><span>|</span><a href="#35847788">next</a><span>|</span><label class="collapse" for="c-35847486">[-]</label><label class="expand" for="c-35847486">[2 more]</label></div><br/><div class="children"><div class="content">The paper says that more detailed discussion of partition methods is given in [15]. That looks like Sedwicks&#x27;s Ph. D thesis which was on Quicksort?<p>I found this: <a href="https:&#x2F;&#x2F;sedgewick.io&#x2F;wp-content&#x2F;themes&#x2F;sedgewick&#x2F;papers&#x2F;1975Quicksort.pdf" rel="nofollow">https:&#x2F;&#x2F;sedgewick.io&#x2F;wp-content&#x2F;themes&#x2F;sedgewick&#x2F;papers&#x2F;1975...</a><p>Basically a longer book on Quicksort with a lot more analysis.<p>He doesn&#x27;t discuss any partitioning methods that do not move two indices toward each other from opposite ends of the subarray. It&#x27;s not even on the table.</div><br/><div id="35847654" class="c"><input type="checkbox" id="c-35847654" checked=""/><div class="controls bullet"><span class="by">metadat</span><span>|</span><a href="#35847321">root</a><span>|</span><a href="#35847486">parent</a><span>|</span><a href="#35847788">next</a><span>|</span><label class="collapse" for="c-35847654">[-]</label><label class="expand" for="c-35847654">[1 more]</label></div><br/><div class="children"><div class="content">Of course the logo on the paper title page is a sequence of 8 lines with each doubling on thickness.<p>Though it&#x27;d be more visually and intuitively accurate if the lines started large and cut in half each step. :P</div><br/></div></div></div></div></div></div><div id="35847788" class="c"><input type="checkbox" id="c-35847788" checked=""/><div class="controls bullet"><span class="by">WalterBright</span><span>|</span><a href="#35847321">prev</a><span>|</span><a href="#35848005">next</a><span>|</span><label class="collapse" for="c-35847788">[-]</label><label class="expand" for="c-35847788">[24 more]</label></div><br/><div class="children"><div class="content">If you&#x27;re doing metaprogramming using the C preprocessor, it&#x27;s time to move to a more advanced language.</div><br/><div id="35848867" class="c"><input type="checkbox" id="c-35848867" checked=""/><div class="controls bullet"><span class="by">flohofwoe</span><span>|</span><a href="#35847788">parent</a><span>|</span><a href="#35848619">next</a><span>|</span><label class="collapse" for="c-35848867">[-]</label><label class="expand" for="c-35848867">[5 more]</label></div><br/><div class="children"><div class="content">In many cases it&#x27;s also enough to just enable LTO to give the compiler enough information for stamping out a specialized version.<p>But TBH I&#x27;m a bit tired of people shitting on the C preprocessor. It&#x27;s a relatively simple text replacement tool, and provides an incredible amount of bang for the buck (e.g. many problems can be solved without having to add more specialized bells and whistles to the language). It&#x27;s a trade-off like anything else in computing.</div><br/><div id="35848951" class="c"><input type="checkbox" id="c-35848951" checked=""/><div class="controls bullet"><span class="by">WalterBright</span><span>|</span><a href="#35847788">root</a><span>|</span><a href="#35848867">parent</a><span>|</span><a href="#35848891">next</a><span>|</span><label class="collapse" for="c-35848951">[-]</label><label class="expand" for="c-35848951">[3 more]</label></div><br/><div class="children"><div class="content">The C preprocessor was an easy and compact way to extend C back when memory was really really tight. You can&#x27;t even fit a C++98 compiler into DOS&#x27;s memory space, but you can fit a C compiler in 64K. (Well, an earlier version of C.)<p>C has been adding generics anyway, like _Generic.</div><br/><div id="35848983" class="c"><input type="checkbox" id="c-35848983" checked=""/><div class="controls bullet"><span class="by">alphaglosined</span><span>|</span><a href="#35847788">root</a><span>|</span><a href="#35848951">parent</a><span>|</span><a href="#35848891">next</a><span>|</span><label class="collapse" for="c-35848983">[-]</label><label class="expand" for="c-35848983">[2 more]</label></div><br/><div class="children"><div class="content">About a year ago I had a look at a C compiler for 16bit computers, featured in disk form on I think Adrian&#x27;s digital basement YT channel.<p>The compiler was very basic, nothing like you&#x27;d expect from a compiler even from the dragon book.<p>So simple and it was a production compiler too!<p>Sadly I can&#x27;t remember the name of it to reference here.</div><br/><div id="35849044" class="c"><input type="checkbox" id="c-35849044" checked=""/><div class="controls bullet"><span class="by">WalterBright</span><span>|</span><a href="#35847788">root</a><span>|</span><a href="#35848983">parent</a><span>|</span><a href="#35848891">next</a><span>|</span><label class="collapse" for="c-35849044">[-]</label><label class="expand" for="c-35849044">[1 more]</label></div><br/><div class="children"><div class="content">I wrote one back in 1983 or so for 16 bit DOS, too!<p>A few years later, I was at a C++ conference where they asked me to sit on an &quot;Ask us anything&quot; panel. I was there along with the developers of Microsoft C, Borland C, etc.<p>The first question was &quot;do you still ship a version of your compiler that will run on a floppy disk system?&quot;<p>Vendor 1 said sure, and launched into a long description of how the files could be shuffled about on the floppy to make it work.<p>Vendor 2 said sure, and launched into ...<p>My turn. I said sure, and said the floppy disk version costs $200 and comes with a hard disk drive. (That was the price of a hard disk in those days.)<p>That was the end of that, I never heard that question again from anybody.<p>Progress...</div><br/></div></div></div></div></div></div><div id="35848891" class="c"><input type="checkbox" id="c-35848891" checked=""/><div class="controls bullet"><span class="by">jaridivak</span><span>|</span><a href="#35847788">root</a><span>|</span><a href="#35848867">parent</a><span>|</span><a href="#35848951">prev</a><span>|</span><a href="#35848619">next</a><span>|</span><label class="collapse" for="c-35848891">[-]</label><label class="expand" for="c-35848891">[1 more]</label></div><br/><div class="children"><div class="content">&gt; many problems can be solved without having to invent new language features<p>You mean something like a type checker?</div><br/></div></div></div></div><div id="35848619" class="c"><input type="checkbox" id="c-35848619" checked=""/><div class="controls bullet"><span class="by">AbsoluteCabbage</span><span>|</span><a href="#35847788">parent</a><span>|</span><a href="#35848867">prev</a><span>|</span><a href="#35847955">next</a><span>|</span><label class="collapse" for="c-35848619">[-]</label><label class="expand" for="c-35848619">[1 more]</label></div><br/><div class="children"><div class="content">C is still the King of languages.</div><br/></div></div><div id="35847955" class="c"><input type="checkbox" id="c-35847955" checked=""/><div class="controls bullet"><span class="by">taneq</span><span>|</span><a href="#35847788">parent</a><span>|</span><a href="#35848619">prev</a><span>|</span><a href="#35847819">next</a><span>|</span><label class="collapse" for="c-35847955">[-]</label><label class="expand" for="c-35847955">[4 more]</label></div><br/><div class="children"><div class="content">Maybe they don&#x27;t <i>want</i> to move to a more advanced language, maybe they want to mess around with the C preprocessor. :)</div><br/><div id="35848002" class="c"><input type="checkbox" id="c-35848002" checked=""/><div class="controls bullet"><span class="by">WalterBright</span><span>|</span><a href="#35847788">root</a><span>|</span><a href="#35847955">parent</a><span>|</span><a href="#35847819">next</a><span>|</span><label class="collapse" for="c-35848002">[-]</label><label class="expand" for="c-35848002">[3 more]</label></div><br/><div class="children"><div class="content">If you want to show cleverness, by all means!<p>I still use some primitive tools, and know there are better alternatives, but I&#x27;m not going to defend sticking with them.<p>BTW, I did win the Obfuscated C contest one year, and (naturally) used the preprocessor:<p><a href="https:&#x2F;&#x2F;www.ioccc.org&#x2F;1986&#x2F;bright&#x2F;bright.c" rel="nofollow">https:&#x2F;&#x2F;www.ioccc.org&#x2F;1986&#x2F;bright&#x2F;bright.c</a></div><br/><div id="35848308" class="c"><input type="checkbox" id="c-35848308" checked=""/><div class="controls bullet"><span class="by">rootw0rm</span><span>|</span><a href="#35847788">root</a><span>|</span><a href="#35848002">parent</a><span>|</span><a href="#35847819">next</a><span>|</span><label class="collapse" for="c-35848308">[-]</label><label class="expand" for="c-35848308">[2 more]</label></div><br/><div class="children"><div class="content">just last night i was thinking how cool it would be for an IDE plugin that expands rust macros for easier grokking.  now i need one for your #defines, lol</div><br/><div id="35848585" class="c"><input type="checkbox" id="c-35848585" checked=""/><div class="controls bullet"><span class="by">gdprrrr</span><span>|</span><a href="#35847788">root</a><span>|</span><a href="#35848308">parent</a><span>|</span><a href="#35847819">next</a><span>|</span><label class="collapse" for="c-35848585">[-]</label><label class="expand" for="c-35848585">[1 more]</label></div><br/><div class="children"><div class="content">cargo expand?</div><br/></div></div></div></div></div></div></div></div><div id="35847819" class="c"><input type="checkbox" id="c-35847819" checked=""/><div class="controls bullet"><span class="by">FpUser</span><span>|</span><a href="#35847788">parent</a><span>|</span><a href="#35847955">prev</a><span>|</span><a href="#35848005">next</a><span>|</span><label class="collapse" for="c-35847819">[-]</label><label class="expand" for="c-35847819">[13 more]</label></div><br/><div class="children"><div class="content">I knew someone would come up with this kind of &quot;wisdom&quot;. For starters you do not know what other languages they might be using for development. And whatever they do they definitely do not need patronizing.</div><br/><div id="35847891" class="c"><input type="checkbox" id="c-35847891" checked=""/><div class="controls bullet"><span class="by">WalterBright</span><span>|</span><a href="#35847788">root</a><span>|</span><a href="#35847819">parent</a><span>|</span><a href="#35848005">next</a><span>|</span><label class="collapse" for="c-35847891">[-]</label><label class="expand" for="c-35847891">[12 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve done a share of C metaprogramming with the preprocessor myself, and have dealt a lot with other peoples&#x27; C metaprogramming.<p>I&#x27;ve also seen people use pages of algrebra as a substitute for a couple lines of calculus.<p>I struggled for years with a soldering iron, always frustrated by bad solder joints. Then, I discovered a Weller thermostat controlled iron, and get a perfect joint every time.<p>Not everyone knows there are better ways to do things.</div><br/><div id="35847936" class="c"><input type="checkbox" id="c-35847936" checked=""/><div class="controls bullet"><span class="by">webstrand</span><span>|</span><a href="#35847788">root</a><span>|</span><a href="#35847891">parent</a><span>|</span><a href="#35848584">next</a><span>|</span><label class="collapse" for="c-35847936">[-]</label><label class="expand" for="c-35847936">[10 more]</label></div><br/><div class="children"><div class="content">Your experience soldering is a much better response. You present a concrete suggestion for use a weller thermostat controlled iron. But you did not present a concrete suggestion for an alternative to the C pre-processor.<p>You could do this with C++ templates, for instance. But the LESS and SWAP operations may or may not get inlined. With the C pre-processor you can be certain that the operations get inlined, since no other alternative interpretation is available to the compiler.</div><br/><div id="35848040" class="c"><input type="checkbox" id="c-35848040" checked=""/><div class="controls bullet"><span class="by">WalterBright</span><span>|</span><a href="#35847788">root</a><span>|</span><a href="#35847936">parent</a><span>|</span><a href="#35847973">next</a><span>|</span><label class="collapse" for="c-35848040">[-]</label><label class="expand" for="c-35848040">[6 more]</label></div><br/><div class="children"><div class="content">&gt; But the LESS and SWAP operations may or may not get inlined.<p>True. But modern inliners are pretty good, and if they can&#x27;t inline it due to its complexity, it&#x27;s pretty unlikely it&#x27;ll be faster.<p>Note the performance comparison in the article.<p>Low level hand-optimizations paid off handsomely in the 1980s, but are usually best left to the compiler&#x27;s optimizer these days.</div><br/><div id="35848407" class="c"><input type="checkbox" id="c-35848407" checked=""/><div class="controls bullet"><span class="by">freedom-fries</span><span>|</span><a href="#35847788">root</a><span>|</span><a href="#35848040">parent</a><span>|</span><a href="#35848335">next</a><span>|</span><label class="collapse" for="c-35848407">[-]</label><label class="expand" for="c-35848407">[3 more]</label></div><br/><div class="children"><div class="content">The article is talking code and demonstrating results.<p>Talk is cheap, show the code!</div><br/><div id="35848909" class="c"><input type="checkbox" id="c-35848909" checked=""/><div class="controls bullet"><span class="by">WalterBright</span><span>|</span><a href="#35847788">root</a><span>|</span><a href="#35848407">parent</a><span>|</span><a href="#35848447">next</a><span>|</span><label class="collapse" for="c-35848909">[-]</label><label class="expand" for="c-35848909">[1 more]</label></div><br/><div class="children"><div class="content">A rote translation of Q_SORT3 would look like:<p><pre><code>    &#x2F;* Sort 3 elements. *&#x2F;
    void Q_SORT3(alias Q_LESS, alias Q_SWAP, Q_UINT) (Q_UINT q_a1, Q_UINT q_a2, Q_UINT q_a3)
    {
        if (Q_LESS(q_a2, q_a1)) {
            if (Q_LESS(q_a3, q_a2))
                Q_SWAP(q_a1, q_a3);
            else {
                Q_SWAP(q_a1, q_a2);
                if (Q_LESS(q_a3, q_a2))
                    Q_SWAP(q_a2, q_a3);
            }
        }
        else if (Q_LESS(q_a3, q_a2)) {
            Q_SWAP(q_a2, q_a3);
            if (Q_LESS(q_a2, q_a1))
                Q_SWAP(q_a1, q_a2);
        }
    }
</code></pre>
A D template function is distinguished by having two parameter lists, the compile time parameter list and the runtime parameter list. Q_UINT would be a type parameter with its type inferred from the function arguments. Q_LESS and Q_SWAP are alias parameters, which can be an alias to any symbol or type. This is often used to pass lambdas.<p>Note that D allows the following ways to pass a parameter:<p>1. by value<p>2. by reference<p>3. by name<p>4. by type<p>The alias parameters are &quot;by name&quot;. C++ has by name parameters in the form of template template parameters, along with the restriction that such a parameter can only be a template. D allows any symbol or type to be passed by name.<p>Passing the lambdas by name means a direct function call&#x2F;inlining rather than an indirect call through a function pointer.<p>Anyhow, with this example you can see how the rest can be fairly easily translated.<p>So, you might ask, what&#x27;s the advantage?<p>1. name hygiene<p>2. your debugger will see the symbols<p>3. no ugly \ line splicing<p>4. no wacky do-while(0) kludge<p>5. the names are actual symbols rather than transitory apparitions seen only by the preprocessor<p>6. color syntax highlighting in your editor works<p>7. the compiler will check the syntax and give error messages in terms of the symbols, not generated preprocessor text<p>8. It&#x27;s not going to conflict with another symbol named Q_SORT</div><br/></div></div><div id="35848447" class="c"><input type="checkbox" id="c-35848447" checked=""/><div class="controls bullet"><span class="by">ivalm</span><span>|</span><a href="#35847788">root</a><span>|</span><a href="#35848407">parent</a><span>|</span><a href="#35848909">prev</a><span>|</span><a href="#35848335">next</a><span>|</span><label class="collapse" for="c-35848447">[-]</label><label class="expand" for="c-35848447">[1 more]</label></div><br/><div class="children"><div class="content">Parent comment is by the inventor of D, among other things…</div><br/></div></div></div></div><div id="35848335" class="c"><input type="checkbox" id="c-35848335" checked=""/><div class="controls bullet"><span class="by">rootw0rm</span><span>|</span><a href="#35847788">root</a><span>|</span><a href="#35848040">parent</a><span>|</span><a href="#35848407">prev</a><span>|</span><a href="#35847973">next</a><span>|</span><label class="collapse" for="c-35848335">[-]</label><label class="expand" for="c-35848335">[2 more]</label></div><br/><div class="children"><div class="content">SIMD being an exception still (unless maybe Intel compiler + C&#x2F;C++ + proper annotations)</div><br/><div id="35849045" class="c"><input type="checkbox" id="c-35849045" checked=""/><div class="controls bullet"><span class="by">alphaglosined</span><span>|</span><a href="#35847788">root</a><span>|</span><a href="#35848335">parent</a><span>|</span><a href="#35847973">next</a><span>|</span><label class="collapse" for="c-35849045">[-]</label><label class="expand" for="c-35849045">[1 more]</label></div><br/><div class="children"><div class="content">LLVM can do an awful lot with SIMD that isn&#x27;t visible in clang.<p>We have experienced this with LDC in D.<p>What I&#x27;ve been told is that LDC produces better IR than clang (I haven&#x27;t compared, I only know that LDC is practically magical from both mine and other peoples experiments).<p>About the only thing I&#x27;ve seen that has problems with inlining is inline assembly. Intrinsics are fine (which you don&#x27;t need thanks to vectorization being practically magical as long as you do some annotations like assert and get the memory layout right).</div><br/></div></div></div></div></div></div><div id="35847973" class="c"><input type="checkbox" id="c-35847973" checked=""/><div class="controls bullet"><span class="by">WalterBright</span><span>|</span><a href="#35847788">root</a><span>|</span><a href="#35847936">parent</a><span>|</span><a href="#35848040">prev</a><span>|</span><a href="#35847981">next</a><span>|</span><label class="collapse" for="c-35847973">[-]</label><label class="expand" for="c-35847973">[2 more]</label></div><br/><div class="children"><div class="content">&gt; But you did not present a concrete suggestion for an alternative to the C pre-processor.<p>If someone asked, I would. But since I do have a dog in that hunt, I felt it would be more appropriate for others to make a suggestion, as there are several.</div><br/><div id="35848478" class="c"><input type="checkbox" id="c-35848478" checked=""/><div class="controls bullet"><span class="by">Dalton9</span><span>|</span><a href="#35847788">root</a><span>|</span><a href="#35847973">parent</a><span>|</span><a href="#35847981">next</a><span>|</span><label class="collapse" for="c-35848478">[-]</label><label class="expand" for="c-35848478">[1 more]</label></div><br/><div class="children"><div class="content">Oh come on, Walter, don&#x27;t make us beg... Show us how you&#x27;d do it in D to achieve the exact same result.</div><br/></div></div></div></div></div></div><div id="35848584" class="c"><input type="checkbox" id="c-35848584" checked=""/><div class="controls bullet"><span class="by">FpUser</span><span>|</span><a href="#35847788">root</a><span>|</span><a href="#35847891">parent</a><span>|</span><a href="#35847936">prev</a><span>|</span><a href="#35848005">next</a><span>|</span><label class="collapse" for="c-35848584">[-]</label><label class="expand" for="c-35848584">[1 more]</label></div><br/><div class="children"><div class="content">&gt;&quot;Not everyone knows there are better ways to do things.&quot;<p>In theory you might be right but I doubt it is applicable in this particular case.</div><br/></div></div></div></div></div></div></div></div><div id="35848005" class="c"><input type="checkbox" id="c-35848005" checked=""/><div class="controls bullet"><span class="by">eesmith</span><span>|</span><a href="#35847788">prev</a><span>|</span><a href="#35849220">next</a><span>|</span><label class="collapse" for="c-35848005">[-]</label><label class="expand" for="c-35848005">[1 more]</label></div><br/><div class="children"><div class="content">Along the same lines, I use Christopher Swenson&#x27;s sort.h at <a href="https:&#x2F;&#x2F;github.com&#x2F;swenson&#x2F;sort&#x2F;">https:&#x2F;&#x2F;github.com&#x2F;swenson&#x2F;sort&#x2F;</a><p><pre><code>  You get the choice of many sorting routines, including:

    Timsort (stable)
    Quicksort
    Merge sort (stable)
    In-place merge sort (not stable)
    Shellsort
    Binary insertion sort
    Heapsort
    Selection sort (this is really only here for comparison)
    Grail sort (stable)
    Sqrt Sort (stable, based on Grail sort, also by Andrey Astrelin).</code></pre></div><br/></div></div></div></div></div></div></div></body></html>