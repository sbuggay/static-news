<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1726736465026" as="style"/><link rel="stylesheet" href="styles.css?v=1726736465026"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/line/ts-remove-unused">Show HN: ts-remove-unused – Remove unused code from your TypeScript project</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>kazushisan</span> | <span>14 comments</span></div><br/><div><div id="41589648" class="c"><input type="checkbox" id="c-41589648" checked=""/><div class="controls bullet"><span class="by">joseferben</span><span>|</span><a href="#41589313">next</a><span>|</span><label class="collapse" for="c-41589648">[-]</label><label class="expand" for="c-41589648">[2 more]</label></div><br/><div class="children"><div class="content">really nice that you&#x27;re tool focuses on removing. i&#x27;ve been using <a href="https:&#x2F;&#x2F;knip.dev&#x2F;" rel="nofollow">https:&#x2F;&#x2F;knip.dev&#x2F;</a> for detection in monorepos, but it&#x27;s cumbersome to remove manually.</div><br/><div id="41589913" class="c"><input type="checkbox" id="c-41589913" checked=""/><div class="controls bullet"><span class="by">Cannabat</span><span>|</span><a href="#41589648">parent</a><span>|</span><a href="#41589313">next</a><span>|</span><label class="collapse" for="c-41589913">[-]</label><label class="expand" for="c-41589913">[1 more]</label></div><br/><div class="children"><div class="content">Knip does have some auto fix capabilities but it’s not perfect yet. The detection is great, though. I use it with `dpdm` to keep things tidy. With these (plus eslint, prettier and typescript) in CI, I feel all warm and fuzzy.<p>OP, can you describe differences from knip?</div><br/></div></div></div></div><div id="41589313" class="c"><input type="checkbox" id="c-41589313" checked=""/><div class="controls bullet"><span class="by">zlies</span><span>|</span><a href="#41589648">prev</a><span>|</span><a href="#41589150">next</a><span>|</span><label class="collapse" for="c-41589313">[-]</label><label class="expand" for="c-41589313">[4 more]</label></div><br/><div class="children"><div class="content">You should switch the default to not delete any files and modify&#x2F;remove the files only with some flag (--dry-run=false, --rm, --delete, etc).
I just deleted all files accidentally in a monorepo :D
Luckily I didn&#x27;t had any uncommitted changes and could recover using git</div><br/><div id="41589404" class="c"><input type="checkbox" id="c-41589404" checked=""/><div class="controls bullet"><span class="by">jamil7</span><span>|</span><a href="#41589313">parent</a><span>|</span><a href="#41589150">next</a><span>|</span><label class="collapse" for="c-41589404">[-]</label><label class="expand" for="c-41589404">[3 more]</label></div><br/><div class="children"><div class="content">It&#x27;s maybe reasonable to change the defaults, but I think you should also be mindful of running any random cli program in your codebase, the top of the Github readme does indicate that the --check mode runs it without deleting files.</div><br/><div id="41589425" class="c"><input type="checkbox" id="c-41589425" checked=""/><div class="controls bullet"><span class="by">zlies</span><span>|</span><a href="#41589313">root</a><span>|</span><a href="#41589404">parent</a><span>|</span><a href="#41589150">next</a><span>|</span><label class="collapse" for="c-41589425">[-]</label><label class="expand" for="c-41589425">[2 more]</label></div><br/><div class="children"><div class="content">You&#x27;re totally right. I just quickly scanned the readme and had expected a tool that only check the files. But yes, it&#x27;s a bad idea in general to run random cli programs without checking them in detail</div><br/><div id="41589472" class="c"><input type="checkbox" id="c-41589472" checked=""/><div class="controls bullet"><span class="by">kazushisan</span><span>|</span><a href="#41589313">root</a><span>|</span><a href="#41589425">parent</a><span>|</span><a href="#41589150">next</a><span>|</span><label class="collapse" for="c-41589472">[-]</label><label class="expand" for="c-41589472">[1 more]</label></div><br/><div class="children"><div class="content">I’m sorry that it may have been unclear that the tool will make modifications without the check flag. I’m glad you didn’t loose any unstated changes :)<p>I will add a cautionary note to README to make it clear!</div><br/></div></div></div></div></div></div></div></div><div id="41589150" class="c"><input type="checkbox" id="c-41589150" checked=""/><div class="controls bullet"><span class="by">devjab</span><span>|</span><a href="#41589313">prev</a><span>|</span><a href="#41583894">next</a><span>|</span><label class="collapse" for="c-41589150">[-]</label><label class="expand" for="c-41589150">[2 more]</label></div><br/><div class="children"><div class="content">This is cool, as a place which uses Typescript for a lot of things, including back-end services we handle it differently. Basically we have a rather strict linting process setup which will warn developers of unused code in development environments and outright refuse it for staging deployment and forward. I’m not sure we would “dare” to automatically remove it, because for the most part there is a reason it is there. Maybe it’s something that needs to be deleted, but it’s almost always something which needs to be handled in some way.<p>Unused imports is perhaps the one area where I would be comfortable removing unused imports. I would never personally allow a third party package into our environment for something like this. I really don’t want to be rude about it, but it’s too “trivial” to rely on an external import for. Not because your code couldn’t be better than ours, it probably will be, but because it’s an unnecessary risk.<p>For smaller or personal projects I think many people will rely on something like prettier to do the same.</div><br/><div id="41589607" class="c"><input type="checkbox" id="c-41589607" checked=""/><div class="controls bullet"><span class="by">kazushisan</span><span>|</span><a href="#41589150">parent</a><span>|</span><a href="#41583894">next</a><span>|</span><label class="collapse" for="c-41589607">[-]</label><label class="expand" for="c-41589607">[1 more]</label></div><br/><div class="children"><div class="content">Thanks for the input! I think there may be a misunderstanding about what this does. Existing linters work great for detecting unused code within a file but once you add `export` to it, you can’t detect unused code with linters even if it’s not referenced from any file.<p>You’re right that this tool may not be useful for some codebases. If your modules are more like “scripts” that include side effects, deleting modules just because it’s not referenced may break things. That should not be the case for react projects that are based on components.<p>In our development process, we don’t allow the changes made by this tool to be deployed automatically. Instead we make sure the changes are okay by creating a pull request and reviewing. We treat it more like an assistant that does all the cumbersome clean up work in no time.</div><br/></div></div></div></div><div id="41583894" class="c"><input type="checkbox" id="c-41583894" checked=""/><div class="controls bullet"><span class="by">cdaringe</span><span>|</span><a href="#41589150">prev</a><span>|</span><a href="#41589612">next</a><span>|</span><label class="collapse" for="c-41583894">[-]</label><label class="expand" for="c-41583894">[1 more]</label></div><br/><div class="children"><div class="content">Cool. A prettier plugin does this too. Cant remember which, but maybe <a href="https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;prettier-plugin-organize-imports" rel="nofollow">https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;prettier-plugin-organize-impor...</a>?</div><br/></div></div><div id="41589612" class="c"><input type="checkbox" id="c-41589612" checked=""/><div class="controls bullet"><span class="by">aiibe</span><span>|</span><a href="#41583894">prev</a><span>|</span><a href="#41589494">next</a><span>|</span><label class="collapse" for="c-41589612">[-]</label><label class="expand" for="c-41589612">[2 more]</label></div><br/><div class="children"><div class="content">Another good alternative. Archived but still in used at work.
<a href="https:&#x2F;&#x2F;github.com&#x2F;nadeesha&#x2F;ts-prune">https:&#x2F;&#x2F;github.com&#x2F;nadeesha&#x2F;ts-prune</a></div><br/><div id="41589667" class="c"><input type="checkbox" id="c-41589667" checked=""/><div class="controls bullet"><span class="by">kazushisan</span><span>|</span><a href="#41589612">parent</a><span>|</span><a href="#41589494">next</a><span>|</span><label class="collapse" for="c-41589667">[-]</label><label class="expand" for="c-41589667">[1 more]</label></div><br/><div class="children"><div class="content">I was initially using it but decided to write my own tool because I was too lazy to go through the result of ts-prune and delete the code myself :P</div><br/></div></div></div></div><div id="41589494" class="c"><input type="checkbox" id="c-41589494" checked=""/><div class="controls bullet"><span class="by">_aqua</span><span>|</span><a href="#41589612">prev</a><span>|</span><label class="collapse" for="c-41589494">[-]</label><label class="expand" for="c-41589494">[2 more]</label></div><br/><div class="children"><div class="content">Does not work quite well with monorepos, just tried but overall a good idea</div><br/><div id="41589698" class="c"><input type="checkbox" id="c-41589698" checked=""/><div class="controls bullet"><span class="by">kazushisan</span><span>|</span><a href="#41589494">parent</a><span>|</span><label class="collapse" for="c-41589698">[-]</label><label class="expand" for="c-41589698">[1 more]</label></div><br/><div class="children"><div class="content">Perhaps you need to specify skip option for the entry point file?</div><br/></div></div></div></div></div></div></div></div></div></body></html>