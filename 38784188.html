<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1703754056152" as="style"/><link rel="stylesheet" href="styles.css?v=1703754056152"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://pluto-lang.org/">Pluto, a Modern Lua Dialect</a> <span class="domain">(<a href="https://pluto-lang.org">pluto-lang.org</a>)</span></div><div class="subtext"><span>todsacerdoti</span> | <span>60 comments</span></div><br/><div><div id="38787812" class="c"><input type="checkbox" id="c-38787812" checked=""/><div class="controls bullet"><span class="by">cardanome</span><span>|</span><a href="#38791134">next</a><span>|</span><label class="collapse" for="c-38787812">[-]</label><label class="expand" for="c-38787812">[23 more]</label></div><br/><div class="children"><div class="content">The Nil-Coalescing Operator they add is actually redundant.<p>Instead of their new fancy syntax:<p><pre><code>  print(message ?? &quot;The message was nil.&quot;)
</code></pre>
The idiomatic way would be:<p><pre><code>  print(message or &quot;The message was nil.&quot;)
</code></pre>
The <i>or</i> operator works just fine. (Edit: Note that this works because empty strings, lists and the number 0 are all truthy in Lua)<p>Generally not a big fan of adding additional syntax and operators for minimal gain.<p>I feel like most changes are nice to have but not really worth the disadvantage of not being able to use LuaJIT.<p>Honestly, the most interesting goal for me is is having a beefier Python-style standard library. Now, if we had that <i>together</i> with LuaJIT levels of performance that would be an absolute Python killer.<p>The only actual problem with Lua (that can&#x27;t be fixed without forking) is that new variables are global by default but you can cope with that. Just have your linter check that you are always using the &quot;local&quot; keyword. Couldn&#x27;t find if Pluto is fixing that.<p>Edit: Oh they provide a &quot;let&quot; alias for &quot;local&quot;, case in point, little changes with not much value.</div><br/><div id="38787965" class="c"><input type="checkbox" id="c-38787965" checked=""/><div class="controls bullet"><span class="by">wk_end</span><span>|</span><a href="#38787812">parent</a><span>|</span><a href="#38787958">next</a><span>|</span><label class="collapse" for="c-38787965">[-]</label><label class="expand" for="c-38787965">[5 more]</label></div><br/><div class="children"><div class="content">It’s been too long since I’ve played with Lua to recall whether this would also be the case, but in JS the nullish coalescing operator is useful over logical OR because it prevents false-y values (0, empty string, false) from being treated as nullish ones, a frequent source of bugs.</div><br/><div id="38788123" class="c"><input type="checkbox" id="c-38788123" checked=""/><div class="controls bullet"><span class="by">cardanome</span><span>|</span><a href="#38787812">root</a><span>|</span><a href="#38787965">parent</a><span>|</span><a href="#38789241">next</a><span>|</span><label class="collapse" for="c-38788123">[-]</label><label class="expand" for="c-38788123">[1 more]</label></div><br/><div class="children"><div class="content">The number 0 and empty strings are considered truthy, so it isn&#x27;t that bad.<p><pre><code>  return 0 or 42

  &gt; 0
</code></pre>
Obviously the pattern doesn&#x27;t work for checking for the existence of booleans as both nil and false are falsy but you are less likely to confuse that. So yes, the ?? would help a little bit but then again, you could just explicitly check for nil.</div><br/></div></div><div id="38789241" class="c"><input type="checkbox" id="c-38789241" checked=""/><div class="controls bullet"><span class="by">smegsicle</span><span>|</span><a href="#38787812">root</a><span>|</span><a href="#38787965">parent</a><span>|</span><a href="#38788123">prev</a><span>|</span><a href="#38787958">next</a><span>|</span><label class="collapse" for="c-38789241">[-]</label><label class="expand" for="c-38789241">[3 more]</label></div><br/><div class="children"><div class="content">false-y values in dynamically typed languages is a mistake</div><br/><div id="38789556" class="c"><input type="checkbox" id="c-38789556" checked=""/><div class="controls bullet"><span class="by">nine_k</span><span>|</span><a href="#38787812">root</a><span>|</span><a href="#38789241">parent</a><span>|</span><a href="#38787958">next</a><span>|</span><label class="collapse" for="c-38789556">[-]</label><label class="expand" for="c-38789556">[2 more]</label></div><br/><div class="children"><div class="content">Coming from Python, I find empty collections being falsey very convenient.</div><br/><div id="38790182" class="c"><input type="checkbox" id="c-38790182" checked=""/><div class="controls bullet"><span class="by">durumu</span><span>|</span><a href="#38787812">root</a><span>|</span><a href="#38789556">parent</a><span>|</span><a href="#38787958">next</a><span>|</span><label class="collapse" for="c-38790182">[-]</label><label class="expand" for="c-38790182">[1 more]</label></div><br/><div class="children"><div class="content">I feel like typing len(...) is not that bad, compared to how verbose &quot;default if var_to_test is None else var_to_test&quot; is (compared to &quot;var_to_test or default&quot;). But I agree it is nice -- I wish Python had the ?? operator.</div><br/></div></div></div></div></div></div></div></div><div id="38787958" class="c"><input type="checkbox" id="c-38787958" checked=""/><div class="controls bullet"><span class="by">DemocracyFTW2</span><span>|</span><a href="#38787812">parent</a><span>|</span><a href="#38787965">prev</a><span>|</span><a href="#38788582">next</a><span>|</span><label class="collapse" for="c-38787958">[-]</label><label class="expand" for="c-38787958">[12 more]</label></div><br/><div class="children"><div class="content">No it&#x27;s not the same; `x ?? &#x27;foo&#x27;` evaluates to `x` when `x` is not `nil` and to `&#x27;foo&#x27;` otherwise; `x or &#x27;foo&#x27;` evaluates to `x` when `x` is not one of `nil` or `false`, and to `&#x27;foo&#x27;` otherwise.<p>This idiom seems to have been made widely popular by Perl folks, and while it has always been a good trick up your sleeve when you&#x27;re 16 and want to impress the other kids, it&#x27;s never been a good, correct way of doing things seriously, especially not across different scripting languages when every single one has its own Byzantine rules of what counts as truthy and what as falsey (like empty strings or empty lists). It is an especially pernicious idiom because of the widespread clout with which it tends to be transmitted; turns out it&#x27;s one of the Falsehoods Clever Programmers Think They Know Better About. They don&#x27;t.</div><br/><div id="38788184" class="c"><input type="checkbox" id="c-38788184" checked=""/><div class="controls bullet"><span class="by">cardanome</span><span>|</span><a href="#38787812">root</a><span>|</span><a href="#38787958">parent</a><span>|</span><a href="#38787976">next</a><span>|</span><label class="collapse" for="c-38788184">[-]</label><label class="expand" for="c-38788184">[2 more]</label></div><br/><div class="children"><div class="content">Empty strings, lists and the number 0 are all truthy in Lua so this isn&#x27;t an issue.<p>Different languages have different semantics. Yes, using the <i>or</i> operator like that is not a good idea in many languages but in Lua it is idiomatic.</div><br/><div id="38790278" class="c"><input type="checkbox" id="c-38790278" checked=""/><div class="controls bullet"><span class="by">DemocracyFTW2</span><span>|</span><a href="#38787812">root</a><span>|</span><a href="#38788184">parent</a><span>|</span><a href="#38787976">next</a><span>|</span><label class="collapse" for="c-38790278">[-]</label><label class="expand" for="c-38790278">[1 more]</label></div><br/><div class="children"><div class="content">pls see my other comment(s)</div><br/></div></div></div></div><div id="38787976" class="c"><input type="checkbox" id="c-38787976" checked=""/><div class="controls bullet"><span class="by">ledauphin</span><span>|</span><a href="#38787812">root</a><span>|</span><a href="#38787958">parent</a><span>|</span><a href="#38788184">prev</a><span>|</span><a href="#38788108">next</a><span>|</span><label class="collapse" for="c-38787976">[-]</label><label class="expand" for="c-38787976">[2 more]</label></div><br/><div class="children"><div class="content">i can see you are probably a polyglot, working in several languages with regularity.<p>it would certainly be frustrating to have to juggle these semantics as you switched back and forth.<p>however, languages are just that - they have their own meanings, and unfortunately they can&#x27;t all be the same across languages (or they&#x27;d all be the same language).</div><br/><div id="38790319" class="c"><input type="checkbox" id="c-38790319" checked=""/><div class="controls bullet"><span class="by">DemocracyFTW2</span><span>|</span><a href="#38787812">root</a><span>|</span><a href="#38787976">parent</a><span>|</span><a href="#38788108">next</a><span>|</span><label class="collapse" for="c-38790319">[-]</label><label class="expand" for="c-38790319">[1 more]</label></div><br/><div class="children"><div class="content">different languages are different, and they have every right to be different, and I have every right to point out in whichever ways they differ. Personal tastes differ, too, and as far as I&#x27;m concerned I think that using &#x27;shorthand Boolean coalescence&#x27; (I just made up that term) is a false convenience; when I write a condition that relies on a list being empty, ideally that should look like `if is_empty a then ...` <i>according to my taste</i>—explicit is better than implicit, and this is still concise.<p>Be that as it may but shrugging and sighing, like, &quot;ah well, different languages will be different&quot; and using that as an argument against a discussion of the merits and demerits of certain aspects of certain languages is not constructive, is it?</div><br/></div></div></div></div><div id="38788108" class="c"><input type="checkbox" id="c-38788108" checked=""/><div class="controls bullet"><span class="by">naniwaduni</span><span>|</span><a href="#38787812">root</a><span>|</span><a href="#38787958">parent</a><span>|</span><a href="#38787976">prev</a><span>|</span><a href="#38789841">next</a><span>|</span><label class="collapse" for="c-38788108">[-]</label><label class="expand" for="c-38788108">[5 more]</label></div><br/><div class="children"><div class="content">You want to learn the specifics of ?? means in this language, but <i>not</i> the boolean projections? It&#x27;s one thing to be peeved that empty strings or lists are falsy when it&#x27;s useful for them not to be, but this seems like barking up the wrong tree.</div><br/><div id="38790365" class="c"><input type="checkbox" id="c-38790365" checked=""/><div class="controls bullet"><span class="by">DemocracyFTW2</span><span>|</span><a href="#38787812">root</a><span>|</span><a href="#38788108">parent</a><span>|</span><a href="#38788499">next</a><span>|</span><label class="collapse" for="c-38790365">[-]</label><label class="expand" for="c-38790365">[1 more]</label></div><br/><div class="children"><div class="content">You almost <i>never</i> want to exploit, in a scripting language, the subtleties of the Boolean projections when writing the (un-) idiom `b = b or b_default`; it is more commonly a mistake made by script kiddies and hand-waving mavericks (i.e. People Who Finish First, a.k.a. People Who Never Write Proper Tests) that has become deeply ingrained due to the <i>Look Ma How Clever</i> effect. If `b` should be a Boolean with a default of `true` then `b = b or true` will quite obviously never allow it to be `false`. Rewrite that and put it in a row of such assignments as in `a = a or a_default; b = b or b_default`; c or c or c_default;` and it looses its fishy smell enough to pass as &quot;OK, trivially no problem here&quot;.<p>I&#x27;ve indeed gotten tired by the entire idea of Boolean projections, yes, but that&#x27;s not the point here, at least not almost always in practice.</div><br/></div></div><div id="38788499" class="c"><input type="checkbox" id="c-38788499" checked=""/><div class="controls bullet"><span class="by">fieldcny</span><span>|</span><a href="#38787812">root</a><span>|</span><a href="#38788108">parent</a><span>|</span><a href="#38790365">prev</a><span>|</span><a href="#38789841">next</a><span>|</span><label class="collapse" for="c-38788499">[-]</label><label class="expand" for="c-38788499">[3 more]</label></div><br/><div class="children"><div class="content">I’m not clear on what the point of your response is, the comment you responded to is making an often overlooked point that certain subtleties in how languages implement constructs can create sharp edges, one of those being the null coalescing operator.</div><br/><div id="38789283" class="c"><input type="checkbox" id="c-38789283" checked=""/><div class="controls bullet"><span class="by">smegsicle</span><span>|</span><a href="#38787812">root</a><span>|</span><a href="#38788499">parent</a><span>|</span><a href="#38789841">next</a><span>|</span><label class="collapse" for="c-38789283">[-]</label><label class="expand" for="c-38789283">[2 more]</label></div><br/><div class="children"><div class="content">the point is that lua didn&#x27;t make the mistake of false &#x27;empty&#x27; values, so that particular sharp edge is absent</div><br/><div id="38790274" class="c"><input type="checkbox" id="c-38790274" checked=""/><div class="controls bullet"><span class="by">DemocracyFTW2</span><span>|</span><a href="#38787812">root</a><span>|</span><a href="#38789283">parent</a><span>|</span><a href="#38789841">next</a><span>|</span><label class="collapse" for="c-38790274">[-]</label><label class="expand" for="c-38790274">[1 more]</label></div><br/><div class="children"><div class="content">The edge of &quot;false &#x27;empty&#x27; values&quot; is absent in Lua, indeed, but the `a = b or c`, more often used in the form `b = b or c`, has, in Lua, still the problem that it will evaluate to `c` if `b` is `nil` and when b is `false` which may or may not be what one wants—and often one wants it not. The idiom is commonly used to assign a proper value to a variable that has not been set to an explicit value, i.e. a variable that is `nil`. The assignment `b = b or true` will set `b` to `true` if it was `nil` or `false`; assuming allowable values for `b` are `true` and `false` and the default is `true`, `b` will then never keep the value of `false` and always be set to `true`.</div><br/></div></div></div></div></div></div></div></div><div id="38789841" class="c"><input type="checkbox" id="c-38789841" checked=""/><div class="controls bullet"><span class="by">awwaiid</span><span>|</span><a href="#38787812">root</a><span>|</span><a href="#38787958">parent</a><span>|</span><a href="#38788108">prev</a><span>|</span><a href="#38788582">next</a><span>|</span><label class="collapse" for="c-38789841">[-]</label><label class="expand" for="c-38789841">[2 more]</label></div><br/><div class="children"><div class="content">Well the Perl people also invented the defined-or operator (&#x2F;&#x2F;), so there is that.</div><br/><div id="38790396" class="c"><input type="checkbox" id="c-38790396" checked=""/><div class="controls bullet"><span class="by">DemocracyFTW2</span><span>|</span><a href="#38787812">root</a><span>|</span><a href="#38789841">parent</a><span>|</span><a href="#38788582">next</a><span>|</span><label class="collapse" for="c-38790396">[-]</label><label class="expand" for="c-38790396">[1 more]</label></div><br/><div class="children"><div class="content">I was just guessing here and didn&#x27;t know about `&#x2F;&#x2F;`; this in turn comes transparently from C as an enhancement of the C idiom `b = b || c`; it may have been a later introduction though (me learning Perl was way back in the (early?) 90s) or I missed it (not unlikely)</div><br/></div></div></div></div></div></div><div id="38788582" class="c"><input type="checkbox" id="c-38788582" checked=""/><div class="controls bullet"><span class="by">tvb12</span><span>|</span><a href="#38787812">parent</a><span>|</span><a href="#38787958">prev</a><span>|</span><a href="#38790416">next</a><span>|</span><label class="collapse" for="c-38788582">[-]</label><label class="expand" for="c-38788582">[2 more]</label></div><br/><div class="children"><div class="content">Even though it would make the language a little more verbose, I would love if Lua had a &#x27;global&#x27; keyword and declaring global&#x2F;local was required. With that one change, I think Lua would have the best implementation of scope out of any language I&#x27;ve used.</div><br/><div id="38790288" class="c"><input type="checkbox" id="c-38790288" checked=""/><div class="controls bullet"><span class="by">thefaux</span><span>|</span><a href="#38787812">root</a><span>|</span><a href="#38788582">parent</a><span>|</span><a href="#38790416">next</a><span>|</span><label class="collapse" for="c-38790288">[-]</label><label class="expand" for="c-38790288">[1 more]</label></div><br/><div class="children"><div class="content">Yes. My solution though is to just pretend that naked assignment isn&#x27;t supported and don&#x27;t use global variables.</div><br/></div></div></div></div><div id="38790416" class="c"><input type="checkbox" id="c-38790416" checked=""/><div class="controls bullet"><span class="by">nmz</span><span>|</span><a href="#38787812">parent</a><span>|</span><a href="#38788582">prev</a><span>|</span><a href="#38790466">next</a><span>|</span><label class="collapse" for="c-38790416">[-]</label><label class="expand" for="c-38790416">[1 more]</label></div><br/><div class="children"><div class="content">Penlight[1] was supposed to offer python like batteries. It&#x27;s kind of been abandoned by now, as has most of lua IMV. To me you still need luastd and a couple of other things (posix, lfs, socket, luasec) you can just fetch with luarocks and you&#x27;re semi set.<p>[1]: <a href="https:&#x2F;&#x2F;lunarmodules.github.io&#x2F;Penlight&#x2F;" rel="nofollow">https:&#x2F;&#x2F;lunarmodules.github.io&#x2F;Penlight&#x2F;</a></div><br/></div></div><div id="38790466" class="c"><input type="checkbox" id="c-38790466" checked=""/><div class="controls bullet"><span class="by">trynumber9</span><span>|</span><a href="#38787812">parent</a><span>|</span><a href="#38790416">prev</a><span>|</span><a href="#38787964">next</a><span>|</span><label class="collapse" for="c-38790466">[-]</label><label class="expand" for="c-38790466">[1 more]</label></div><br/><div class="children"><div class="content">It is actually not redundant. I have run into this problem at least once in real Lua code.<p><pre><code>    local x = false
    print(x ?? &quot;message was nil&quot;)
    print(x or &quot;message was nil&quot;)
</code></pre>
which results in<p>&gt;false<p>&gt;message was nil</div><br/></div></div></div></div><div id="38791134" class="c"><input type="checkbox" id="c-38791134" checked=""/><div class="controls bullet"><span class="by">vodou</span><span>|</span><a href="#38787812">prev</a><span>|</span><a href="#38788664">next</a><span>|</span><label class="collapse" for="c-38791134">[-]</label><label class="expand" for="c-38791134">[1 more]</label></div><br/><div class="children"><div class="content">PLUTO is already a reference language for test and operations procedures for satellites and spacecrafts.<p><a href="https:&#x2F;&#x2F;ecss.nl&#x2F;standard&#x2F;ecss-e-st-70-32c-test-and-operations-procedure-language&#x2F;" rel="nofollow">https:&#x2F;&#x2F;ecss.nl&#x2F;standard&#x2F;ecss-e-st-70-32c-test-and-operation...</a></div><br/></div></div><div id="38788664" class="c"><input type="checkbox" id="c-38788664" checked=""/><div class="controls bullet"><span class="by">teamonkey</span><span>|</span><a href="#38791134">prev</a><span>|</span><a href="#38787203">next</a><span>|</span><label class="collapse" for="c-38788664">[-]</label><label class="expand" for="c-38788664">[2 more]</label></div><br/><div class="children"><div class="content">Alternatively, Luau is a well-supported Lua variant with type checking and performance improvements, aimed more towards being a sandboxed embedded scripting environment.<p><a href="https:&#x2F;&#x2F;luau-lang.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;luau-lang.org&#x2F;</a></div><br/><div id="38789468" class="c"><input type="checkbox" id="c-38789468" checked=""/><div class="controls bullet"><span class="by">nikolay</span><span>|</span><a href="#38788664">parent</a><span>|</span><a href="#38787203">next</a><span>|</span><label class="collapse" for="c-38789468">[-]</label><label class="expand" for="c-38789468">[1 more]</label></div><br/><div class="children"><div class="content">Plus, it&#x27;s widely used, thanks to Roblox!</div><br/></div></div></div></div><div id="38787203" class="c"><input type="checkbox" id="c-38787203" checked=""/><div class="controls bullet"><span class="by">haberman</span><span>|</span><a href="#38788664">prev</a><span>|</span><a href="#38789337">next</a><span>|</span><label class="collapse" for="c-38787203">[-]</label><label class="expand" for="c-38787203">[1 more]</label></div><br/><div class="children"><div class="content">Ideally a new Lua dialect would be capable of compiling to both Lua and LuaJIT.  The language is effectively forked, with the fastest implementation (LuaJIT) and the official implementation (Lua) living in seemingly irreconcilable worlds.</div><br/></div></div><div id="38789337" class="c"><input type="checkbox" id="c-38789337" checked=""/><div class="controls bullet"><span class="by">kragen</span><span>|</span><a href="#38787203">prev</a><span>|</span><a href="#38790507">next</a><span>|</span><label class="collapse" for="c-38789337">[-]</label><label class="expand" for="c-38789337">[3 more]</label></div><br/><div class="children"><div class="content">i haven&#x27;t tried it, but here&#x27;s my possibly erroneous impression from looking at the web pages<p>the good:<p>- string interpolation<p>- a continue statement<p>- conditional expressions<p>- augmented assignment<p>- frozen tables<p>- some kind of static typing?<p>the bad:<p>- much worse documentation<p>- no luajit<p>- you can&#x27;t compile without c++‽  that&#x27;s the opposite extreme from &#x27;retains the easy embeddability of Lua&#x27;<p>- and wtf, a build system in php?  the nope level is rising rapidly<p>- you still index from 1<p>- variables are still global by default<p>- misspelling a variable or property still gives you nil instead of throwing an exception<p>- aping c++&#x2F;java syntax and semantics for classes and class instantiation<p>- redundant aliases for operators<p>- a redundant mechanism for private fields<p>- dwim for for-in on a table<p>it seems like a c++ or perl programmer didn&#x27;t understand what was good about lua and decided to make it look like perl</div><br/><div id="38790542" class="c"><input type="checkbox" id="c-38790542" checked=""/><div class="controls bullet"><span class="by">nmz</span><span>|</span><a href="#38789337">parent</a><span>|</span><a href="#38790507">next</a><span>|</span><label class="collapse" for="c-38790542">[-]</label><label class="expand" for="c-38790542">[2 more]</label></div><br/><div class="children"><div class="content">At least for continues and frozen tables, lua already semi offered them via goto and setting __newindex in a metatable.<p>Conditional expression which I imagine is ternaries can be done with a constructor and the condition in the field a la {nil,&quot;b&quot;}[cond and 1 or 2]</div><br/><div id="38790644" class="c"><input type="checkbox" id="c-38790644" checked=""/><div class="controls bullet"><span class="by">kragen</span><span>|</span><a href="#38789337">root</a><span>|</span><a href="#38790542">parent</a><span>|</span><a href="#38790507">next</a><span>|</span><label class="collapse" for="c-38790644">[-]</label><label class="expand" for="c-38790644">[1 more]</label></div><br/><div class="children"><div class="content">oh thanks!  i generally use lua 5.1, because that&#x27;s what minetest and luajit use, and lua 5.1 doesn&#x27;t have goto.  though i see luajit has added it!</div><br/></div></div></div></div></div></div><div id="38790507" class="c"><input type="checkbox" id="c-38790507" checked=""/><div class="controls bullet"><span class="by">bawolff</span><span>|</span><a href="#38789337">prev</a><span>|</span><a href="#38785921">next</a><span>|</span><label class="collapse" for="c-38790507">[-]</label><label class="expand" for="c-38790507">[1 more]</label></div><br/><div class="children"><div class="content">One thing i like about lua, is that it is a very intentionally designed language with what it does or does not support. Many of the things pluto adss seem to be things that lua intentionally omitted as a design choice.</div><br/></div></div><div id="38785921" class="c"><input type="checkbox" id="c-38785921" checked=""/><div class="controls bullet"><span class="by">kwertyoowiyop</span><span>|</span><a href="#38790507">prev</a><span>|</span><a href="#38786014">next</a><span>|</span><label class="collapse" for="c-38785921">[-]</label><label class="expand" for="c-38785921">[3 more]</label></div><br/><div class="children"><div class="content">The landing page ought to show some examples of the differences between Lua and Pluto.</div><br/><div id="38789605" class="c"><input type="checkbox" id="c-38789605" checked=""/><div class="controls bullet"><span class="by">nine_k</span><span>|</span><a href="#38785921">parent</a><span>|</span><a href="#38785975">next</a><span>|</span><label class="collapse" for="c-38789605">[-]</label><label class="expand" for="c-38789605">[1 more]</label></div><br/><div class="children"><div class="content">This should have been the idea of the landing page: <a href="https:&#x2F;&#x2F;pluto-lang.org&#x2F;docs&#x2F;category&#x2F;new-features" rel="nofollow">https:&#x2F;&#x2F;pluto-lang.org&#x2F;docs&#x2F;category&#x2F;new-features</a></div><br/></div></div><div id="38785975" class="c"><input type="checkbox" id="c-38785975" checked=""/><div class="controls bullet"><span class="by">cglong</span><span>|</span><a href="#38785921">parent</a><span>|</span><a href="#38789605">prev</a><span>|</span><a href="#38786014">next</a><span>|</span><label class="collapse" for="c-38785975">[-]</label><label class="expand" for="c-38785975">[1 more]</label></div><br/><div class="children"><div class="content">Agreed, and even browsing the docs, it&#x27;s hard for someone not intimately familiar with Lua to discern the differences.</div><br/></div></div></div></div><div id="38786014" class="c"><input type="checkbox" id="c-38786014" checked=""/><div class="controls bullet"><span class="by">jadodev</span><span>|</span><a href="#38785921">prev</a><span>|</span><a href="#38789634">next</a><span>|</span><label class="collapse" for="c-38786014">[-]</label><label class="expand" for="c-38786014">[1 more]</label></div><br/><div class="children"><div class="content">Direct link to all the new features: <a href="https:&#x2F;&#x2F;pluto-lang.org&#x2F;docs&#x2F;category&#x2F;new-features" rel="nofollow">https:&#x2F;&#x2F;pluto-lang.org&#x2F;docs&#x2F;category&#x2F;new-features</a></div><br/></div></div><div id="38789634" class="c"><input type="checkbox" id="c-38789634" checked=""/><div class="controls bullet"><span class="by">celeritascelery</span><span>|</span><a href="#38786014">prev</a><span>|</span><a href="#38787454">next</a><span>|</span><label class="collapse" for="c-38789634">[-]</label><label class="expand" for="c-38789634">[1 more]</label></div><br/><div class="children"><div class="content">I looked into the jump table optimization. The normal Lua version is here[1] and it uses the opcode as a index into a static array to jump to the label. The “faster” Pluto version is here[2] and it just uses a switch statement on the labels. I would naively assume that these would compile to the same code because the lua version is just manually creating the jump table and the pluto version is leaving it to the compiler. How could the compiler optimize the switch so that would outperform the manual jump table (by a decent margin)?<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;PlutoLang&#x2F;Pluto&#x2F;blob&#x2F;main&#x2F;src&#x2F;ljumptabgcc.h">https:&#x2F;&#x2F;github.com&#x2F;PlutoLang&#x2F;Pluto&#x2F;blob&#x2F;main&#x2F;src&#x2F;ljumptabgcc...</a><p>[2] <a href="https:&#x2F;&#x2F;github.com&#x2F;PlutoLang&#x2F;Pluto&#x2F;blob&#x2F;main&#x2F;src&#x2F;ljumptab.h">https:&#x2F;&#x2F;github.com&#x2F;PlutoLang&#x2F;Pluto&#x2F;blob&#x2F;main&#x2F;src&#x2F;ljumptab.h</a></div><br/></div></div><div id="38787454" class="c"><input type="checkbox" id="c-38787454" checked=""/><div class="controls bullet"><span class="by">PsyNyde</span><span>|</span><a href="#38789634">prev</a><span>|</span><a href="#38789511">next</a><span>|</span><label class="collapse" for="c-38787454">[-]</label><label class="expand" for="c-38787454">[1 more]</label></div><br/><div class="children"><div class="content">i don&#x27;t think this maintains the simplicity that lua offers.</div><br/></div></div><div id="38789511" class="c"><input type="checkbox" id="c-38789511" checked=""/><div class="controls bullet"><span class="by">harpiaharpyja</span><span>|</span><a href="#38787454">prev</a><span>|</span><a href="#38790539">next</a><span>|</span><label class="collapse" for="c-38789511">[-]</label><label class="expand" for="c-38789511">[2 more]</label></div><br/><div class="children"><div class="content">Odd syntax choices. The ones that stand out for me are &quot;enum class&quot; for scoped enums, and &quot;:&quot; as the delimiter in switch statements. It doesn&#x27;t seem really well thought out.</div><br/><div id="38789594" class="c"><input type="checkbox" id="c-38789594" checked=""/><div class="controls bullet"><span class="by">nine_k</span><span>|</span><a href="#38789511">parent</a><span>|</span><a href="#38790539">next</a><span>|</span><label class="collapse" for="c-38789594">[-]</label><label class="expand" for="c-38789594">[1 more]</label></div><br/><div class="children"><div class="content">I frankly find the whole idea of the switch statement unfortunate. The switch statement in C has a really understandable compiled representation: linear code where you can jump into in the middle. It was fine in 1970. But in 2023 I&#x27;d expect introduction of pattern matching instead, which generalizes the idea much better. Python pulled this off successfully. Java pulled it off successfully. Lua could, too.</div><br/></div></div></div></div><div id="38790539" class="c"><input type="checkbox" id="c-38790539" checked=""/><div class="controls bullet"><span class="by">npage97</span><span>|</span><a href="#38789511">prev</a><span>|</span><a href="#38788503">next</a><span>|</span><label class="collapse" for="c-38790539">[-]</label><label class="expand" for="c-38790539">[1 more]</label></div><br/><div class="children"><div class="content">Requiring c++17 seems like a big change from standard lua.</div><br/></div></div><div id="38788503" class="c"><input type="checkbox" id="c-38788503" checked=""/><div class="controls bullet"><span class="by">omoikane</span><span>|</span><a href="#38790539">prev</a><span>|</span><a href="#38786446">next</a><span>|</span><label class="collapse" for="c-38788503">[-]</label><label class="expand" for="c-38788503">[1 more]</label></div><br/><div class="children"><div class="content">The compound operators[1] are also in Playdate&#x27;s variant of Lua[2].<p>The &quot;continue&quot; statement[3] is the one I really wish was available everywhere.<p>[1] <a href="https:&#x2F;&#x2F;pluto-lang.org&#x2F;docs&#x2F;New%20Operators#compound-operators" rel="nofollow">https:&#x2F;&#x2F;pluto-lang.org&#x2F;docs&#x2F;New%20Operators#compound-operato...</a><p>[2] <a href="https:&#x2F;&#x2F;sdk.play.date&#x2F;2.1.1&#x2F;Inside%20Playdate.html#_lua_enhancements" rel="nofollow">https:&#x2F;&#x2F;sdk.play.date&#x2F;2.1.1&#x2F;Inside%20Playdate.html#_lua_enha...</a><p>[3] <a href="https:&#x2F;&#x2F;pluto-lang.org&#x2F;docs&#x2F;New%20Features&#x2F;Continue%20Statement" rel="nofollow">https:&#x2F;&#x2F;pluto-lang.org&#x2F;docs&#x2F;New%20Features&#x2F;Continue%20Statem...</a></div><br/></div></div><div id="38786446" class="c"><input type="checkbox" id="c-38786446" checked=""/><div class="controls bullet"><span class="by">whalesalad</span><span>|</span><a href="#38788503">prev</a><span>|</span><a href="#38787686">next</a><span>|</span><label class="collapse" for="c-38786446">[-]</label><label class="expand" for="c-38786446">[4 more]</label></div><br/><div class="children"><div class="content">Interesting that it contains a PHP-based build system <a href="https:&#x2F;&#x2F;pluto-lang.org&#x2F;docs&#x2F;Getting%20Started#php-scripts" rel="nofollow">https:&#x2F;&#x2F;pluto-lang.org&#x2F;docs&#x2F;Getting%20Started#php-scripts</a></div><br/><div id="38787644" class="c"><input type="checkbox" id="c-38787644" checked=""/><div class="controls bullet"><span class="by">mdaniel</span><span>|</span><a href="#38786446">parent</a><span>|</span><a href="#38787686">next</a><span>|</span><label class="collapse" for="c-38787644">[-]</label><label class="expand" for="c-38787644">[3 more]</label></div><br/><div class="children"><div class="content">&quot;Interesting&quot; is not the word I would use for that<p>Where does `$file` come from in `for_each_obj` &lt;<a href="https:&#x2F;&#x2F;github.com&#x2F;PlutoLang&#x2F;Pluto&#x2F;blob&#x2F;0.8.0&#x2F;scripts&#x2F;compile.php#L7-L11">https:&#x2F;&#x2F;github.com&#x2F;PlutoLang&#x2F;Pluto&#x2F;blob&#x2F;0.8.0&#x2F;scripts&#x2F;compil...</a>&gt; ... from `scandir` of &quot;src&quot; of course: <a href="https:&#x2F;&#x2F;github.com&#x2F;PlutoLang&#x2F;Pluto&#x2F;blob&#x2F;0.8.0&#x2F;scripts&#x2F;common.php#L56-L65">https:&#x2F;&#x2F;github.com&#x2F;PlutoLang&#x2F;Pluto&#x2F;blob&#x2F;0.8.0&#x2F;scripts&#x2F;common...</a><p>Here&#x27;s hoping you didn&#x27;t want to alter the intermediate output directory away from &quot;int&quot; or change the CPPFLAGS for your own setup<p>I&#x27;m certainly no php ninja, but I&#x27;d put good money that a similarly homegrown bash build system would be about an equal number of lines of code but 1&#x2F;10000th the WTF and not require an apt-get install before trying to contribute to the project</div><br/><div id="38788054" class="c"><input type="checkbox" id="c-38788054" checked=""/><div class="controls bullet"><span class="by">cardanome</span><span>|</span><a href="#38786446">root</a><span>|</span><a href="#38787644">parent</a><span>|</span><a href="#38787686">next</a><span>|</span><label class="collapse" for="c-38788054">[-]</label><label class="expand" for="c-38788054">[2 more]</label></div><br/><div class="children"><div class="content">As a PHP dev, even I am perplexed by this. I normally just use Bash.<p>Then again, writing maintainable Bash is a pain so I don&#x27;t totally hate it. Definitely have wrestled with a fair share of write-only Bash scripts where I was tempted to rewrite them in PHP.</div><br/><div id="38790678" class="c"><input type="checkbox" id="c-38790678" checked=""/><div class="controls bullet"><span class="by">winrid</span><span>|</span><a href="#38786446">root</a><span>|</span><a href="#38788054">parent</a><span>|</span><a href="#38787686">next</a><span>|</span><label class="collapse" for="c-38790678">[-]</label><label class="expand" for="c-38790678">[1 more]</label></div><br/><div class="children"><div class="content">Good Python or even PHP is eons better to work with than Bash.</div><br/></div></div></div></div></div></div></div></div><div id="38787686" class="c"><input type="checkbox" id="c-38787686" checked=""/><div class="controls bullet"><span class="by">marwis</span><span>|</span><a href="#38786446">prev</a><span>|</span><a href="#38786909">next</a><span>|</span><label class="collapse" for="c-38787686">[-]</label><label class="expand" for="c-38787686">[1 more]</label></div><br/><div class="children"><div class="content">Needs compiled binary size comparison somewhere on the website</div><br/></div></div><div id="38786909" class="c"><input type="checkbox" id="c-38786909" checked=""/><div class="controls bullet"><span class="by">srhtftw</span><span>|</span><a href="#38787686">prev</a><span>|</span><a href="#38788500">next</a><span>|</span><label class="collapse" for="c-38786909">[-]</label><label class="expand" for="c-38786909">[4 more]</label></div><br/><div class="children"><div class="content">Just tried it online¹ to see how it deals with a long standing problem² I have with Lua and I&#x27;m pleased to see actual improvement in the form of a warning:<p><pre><code>    script.pluto:1: warning: function was hinted to return string
    but actually returns nil [type-mismatch]
        1 | function foo(x: number): string 
          | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ here
</code></pre>
Unfortunately the underlying table was corrupted when the code ran and only<p><pre><code>    1 foo
</code></pre>
was generated in the output.  I would have preferred it to have refused to run at all (will need to look in the docs to see if there&#x27;s a way to get that behavior with configuration).  The purist in me wants more but the practical side of me appreciates that this is definitely an improvement over current Lua.<p>¹: <a href="https:&#x2F;&#x2F;pluto-lang.org&#x2F;web&#x2F;#code=function%20foo(x%3A%20number)%3A%20string%20%0A%20%20if%20x%20%3D%3D%202%20then%20return%20nil%20else%20return%20%22foo%22%20end%0Aend%0A%0Ax%20%3D%20%7B%20foo(1)%2C%20foo(2)%2C%20foo(3)%20%7D%0A%0Afor%20i%2Cv%20in%20ipairs(x)%20do%0A%20print(i%2Cv)%0Aend" rel="nofollow">https:&#x2F;&#x2F;pluto-lang.org&#x2F;web&#x2F;#code=function%20foo(x%3A%20numbe...</a><p>²: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=38030778">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=38030778</a></div><br/><div id="38787333" class="c"><input type="checkbox" id="c-38787333" checked=""/><div class="controls bullet"><span class="by">djur</span><span>|</span><a href="#38786909">parent</a><span>|</span><a href="#38788066">next</a><span>|</span><label class="collapse" for="c-38787333">[-]</label><label class="expand" for="c-38787333">[1 more]</label></div><br/><div class="children"><div class="content">It looks like you can set any warning to cause an error with a pragma:<p><a href="https:&#x2F;&#x2F;pluto-lang.org&#x2F;docs&#x2F;New%20Features&#x2F;Compiler%20Warnings#changing-warning-states" rel="nofollow">https:&#x2F;&#x2F;pluto-lang.org&#x2F;docs&#x2F;New%20Features&#x2F;Compiler%20Warnin...</a></div><br/></div></div><div id="38788066" class="c"><input type="checkbox" id="c-38788066" checked=""/><div class="controls bullet"><span class="by">naniwaduni</span><span>|</span><a href="#38786909">parent</a><span>|</span><a href="#38787333">prev</a><span>|</span><a href="#38788500">next</a><span>|</span><label class="collapse" for="c-38788066">[-]</label><label class="expand" for="c-38788066">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not &quot;corruption&quot; when you don&#x27;t understand the semantics of the functions you&#x27;re calling—ipairs stops at the smallest integer index that doesn&#x27;t have a value. You can still find that the key 3 exists with pairs; you can&#x27;t find the key 2, because it&#x27;s <i>not</i> in the table.<p>The language just doesn&#x27;t distinguish &quot;key present with no value&quot; in a table, which is frankly a bizarre thing to want with typechecking in the same breath.</div><br/><div id="38789409" class="c"><input type="checkbox" id="c-38789409" checked=""/><div class="controls bullet"><span class="by">srhtftw</span><span>|</span><a href="#38786909">root</a><span>|</span><a href="#38788066">parent</a><span>|</span><a href="#38788500">next</a><span>|</span><label class="collapse" for="c-38789409">[-]</label><label class="expand" for="c-38789409">[1 more]</label></div><br/><div class="children"><div class="content">You make a good point: since &quot;pairs&quot; returns all the values as it should, calling the table &quot;corrupted&quot; may be too harsh.  It&#x27;s been so long now I can&#x27;t recall why the original code I found this problem in used &quot;ipairs&quot; instead of &quot;pairs&quot;.  It&#x27;s simply not safe to use &quot;ipairs&quot; on a table containing a nil and the code that did that was wrong.<p>I think working with newer languages like Typescript have made me unsatisfied with languages like Lua which provide no clear way to prevent this sort of mistake, so I like that dialects like Pluto are showing ways Lua could be improved.</div><br/></div></div></div></div></div></div><div id="38788500" class="c"><input type="checkbox" id="c-38788500" checked=""/><div class="controls bullet"><span class="by">user8501</span><span>|</span><a href="#38786909">prev</a><span>|</span><a href="#38790389">next</a><span>|</span><label class="collapse" for="c-38788500">[-]</label><label class="expand" for="c-38788500">[3 more]</label></div><br/><div class="children"><div class="content">Testes? Do you mean tests?</div><br/><div id="38788760" class="c"><input type="checkbox" id="c-38788760" checked=""/><div class="controls bullet"><span class="by">cmovq</span><span>|</span><a href="#38788500">parent</a><span>|</span><a href="#38790389">next</a><span>|</span><label class="collapse" for="c-38788760">[-]</label><label class="expand" for="c-38788760">[2 more]</label></div><br/><div class="children"><div class="content">It’s Portuguese. It’s the same in the Lua codebase [1].<p>[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;lua&#x2F;lua">https:&#x2F;&#x2F;github.com&#x2F;lua&#x2F;lua</a></div><br/><div id="38789932" class="c"><input type="checkbox" id="c-38789932" checked=""/><div class="controls bullet"><span class="by">user8501</span><span>|</span><a href="#38788500">root</a><span>|</span><a href="#38788760">parent</a><span>|</span><a href="#38790389">next</a><span>|</span><label class="collapse" for="c-38789932">[-]</label><label class="expand" for="c-38789932">[1 more]</label></div><br/><div class="children"><div class="content">Thank you for informing me. I feel dumb for having chuckled.</div><br/></div></div></div></div></div></div><div id="38790389" class="c"><input type="checkbox" id="c-38790389" checked=""/><div class="controls bullet"><span class="by">imbnwa</span><span>|</span><a href="#38788500">prev</a><span>|</span><a href="#38786338">next</a><span>|</span><label class="collapse" for="c-38790389">[-]</label><label class="expand" for="c-38790389">[1 more]</label></div><br/><div class="children"><div class="content">Yuescript<p><a href="https:&#x2F;&#x2F;yuescript.org" rel="nofollow">https:&#x2F;&#x2F;yuescript.org</a></div><br/></div></div><div id="38786338" class="c"><input type="checkbox" id="c-38786338" checked=""/><div class="controls bullet"><span class="by">trynumber9</span><span>|</span><a href="#38790389">prev</a><span>|</span><a href="#38790184">next</a><span>|</span><label class="collapse" for="c-38786338">[-]</label><label class="expand" for="c-38786338">[3 more]</label></div><br/><div class="children"><div class="content">I genuinely think adding &quot;classes, class inheritance&quot; to Lua is a downgrade. There are many different systems, which you&#x27;ll still encounter when using other Lua libraries anyway. Why add another?<p>Requiring C++17 to build is also a downgrade.<p>The lambda shorthand looks fine. Typing might be useful. But it says that&#x27;s WIP so I&#x27;ll have to try it out more than the examples. Default arguments, named arguments, the added general operators and safe navigation operators are generally useful and positive changes.</div><br/><div id="38788213" class="c"><input type="checkbox" id="c-38788213" checked=""/><div class="controls bullet"><span class="by">nine_k</span><span>|</span><a href="#38786338">parent</a><span>|</span><a href="#38788434">next</a><span>|</span><label class="collapse" for="c-38788213">[-]</label><label class="expand" for="c-38788213">[1 more]</label></div><br/><div class="children"><div class="content">I would say that nearly every Pluto feature not marked as special on the <a href="https:&#x2F;&#x2F;pluto-lang.org&#x2F;docs&#x2F;Compatibility" rel="nofollow">https:&#x2F;&#x2F;pluto-lang.org&#x2F;docs&#x2F;Compatibility</a> page would be a fine addition to mainline Lua. These are small quality-of-life improvements, battle-tested in other languages, with nearly zero new conceptual load.<p>Compiler message improvements would be great to port, too.<p>I see Pluto as a research project of sorts, trying new things. Trying incompatible and controversial things in such a project is the point.</div><br/></div></div></div></div><div id="38788927" class="c"><input type="checkbox" id="c-38788927" checked=""/><div class="controls bullet"><span class="by">m0llusk</span><span>|</span><a href="#38790184">prev</a><span>|</span><label class="collapse" for="c-38788927">[-]</label><label class="expand" for="c-38788927">[1 more]</label></div><br/><div class="children"><div class="content">Not a planet!</div><br/></div></div></div></div></div></div></div></body></html>