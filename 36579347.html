<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1688461260284" as="style"/><link rel="stylesheet" href="styles.css?v=1688461260284"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.joseferben.com/posts/3-things-that-surprised-me-while-running-sqlite-in-production/">Things that surprised me while running SQLite in production</a> <span class="domain">(<a href="https://www.joseferben.com">www.joseferben.com</a>)</span></div><div class="subtext"><span>joseferben</span> | <span>48 comments</span></div><br/><div><div id="36583317" class="c"><input type="checkbox" id="c-36583317" checked=""/><div class="controls bullet"><span class="by">mrkeen</span><span>|</span><a href="#36582061">next</a><span>|</span><label class="collapse" for="c-36583317">[-]</label><label class="expand" for="c-36583317">[2 more]</label></div><br/><div class="children"><div class="content">One thing missing from this:<p>There are massive performance gains to be had by using transactions.  In <i>other</i> RDBMSs transactions are about atomicity&#x2F;consistency.  But in SQLite, transactions are about batching inserts for awesome speed gains.  Use them!</div><br/><div id="36583438" class="c"><input type="checkbox" id="c-36583438" checked=""/><div class="controls bullet"><span class="by">joseferben</span><span>|</span><a href="#36583317">parent</a><span>|</span><a href="#36582061">next</a><span>|</span><label class="collapse" for="c-36583438">[-]</label><label class="expand" for="c-36583438">[1 more]</label></div><br/><div class="children"><div class="content">Cool!<p>This example from the better-sqlite3 docs makes more sense now:<p>const insert = db.prepare(&#x27;INSERT INTO cats (name, age) VALUES (@name, @age)&#x27;);<p>const insertMany = db.transaction((cats) =&gt; {
  for (const cat of cats) insert.run(cat);
});<p>insertMany([
  { name: &#x27;Joey&#x27;, age: 2 },
  { name: &#x27;Sally&#x27;, age: 4 },
  { name: &#x27;Junior&#x27;, age: 1 },
]);</div><br/></div></div></div></div><div id="36582061" class="c"><input type="checkbox" id="c-36582061" checked=""/><div class="controls bullet"><span class="by">sbierwagen</span><span>|</span><a href="#36583317">prev</a><span>|</span><a href="#36582226">next</a><span>|</span><label class="collapse" for="c-36582061">[-]</label><label class="expand" for="c-36582061">[12 more]</label></div><br/><div class="children"><div class="content">&gt;The first thing I&#x27;ve come to appreciate about SQLite is its documentation<p>I&#x27;ve told this story before, but the first time I used sqlite, years ago, I needed to store a floating point value, so I read the documentation: <a href="https:&#x2F;&#x2F;www.sqlite.org&#x2F;datatype3.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.sqlite.org&#x2F;datatype3.html</a><p>&gt;REAL. The value is a floating point value, stored as an 8-byte IEEE floating point number.<p>I parsed this as &quot;an 8-<i>bit</i> floating point number&quot;. Wow, I thought. That&#x27;s weird as hell. Oh well, I guess it&#x27;s sql lite, ha ha. I went on to implement storing numeric values as text strings, which worked exactly as well as you&#x27;d expect. Only months later did I find out that it&#x27;s a normal regular IEEE double, <i>64</i> bits long.</div><br/><div id="36582371" class="c"><input type="checkbox" id="c-36582371" checked=""/><div class="controls bullet"><span class="by">sverhagen</span><span>|</span><a href="#36582061">parent</a><span>|</span><a href="#36583744">next</a><span>|</span><label class="collapse" for="c-36582371">[-]</label><label class="expand" for="c-36582371">[5 more]</label></div><br/><div class="children"><div class="content">Is the point of the story that no matter how good the documentation is, we don&#x27;t read well anyhow? Else, I don&#x27;t get the point.</div><br/><div id="36582481" class="c"><input type="checkbox" id="c-36582481" checked=""/><div class="controls bullet"><span class="by">seanw444</span><span>|</span><a href="#36582061">root</a><span>|</span><a href="#36582371">parent</a><span>|</span><a href="#36583926">next</a><span>|</span><label class="collapse" for="c-36582481">[-]</label><label class="expand" for="c-36582481">[3 more]</label></div><br/><div class="children"><div class="content">Just a funny anecdote. There&#x27;s not always a point.</div><br/><div id="36583055" class="c"><input type="checkbox" id="c-36583055" checked=""/><div class="controls bullet"><span class="by">kaoD</span><span>|</span><a href="#36582061">root</a><span>|</span><a href="#36582481">parent</a><span>|</span><a href="#36583712">next</a><span>|</span><label class="collapse" for="c-36583055">[-]</label><label class="expand" for="c-36583055">[1 more]</label></div><br/><div class="children"><div class="content">I was confused as well. How you phrased it, it seemed that your funny story was about how cool the docs were and saved your ass or something like that :)</div><br/></div></div><div id="36583712" class="c"><input type="checkbox" id="c-36583712" checked=""/><div class="controls bullet"><span class="by">Gordonjcp</span><span>|</span><a href="#36582061">root</a><span>|</span><a href="#36582481">parent</a><span>|</span><a href="#36583055">prev</a><span>|</span><a href="#36583926">next</a><span>|</span><label class="collapse" for="c-36583712">[-]</label><label class="expand" for="c-36583712">[1 more]</label></div><br/><div class="children"><div class="content">Well, I thought it was funny, but I read and understood all of the words.</div><br/></div></div></div></div><div id="36583926" class="c"><input type="checkbox" id="c-36583926" checked=""/><div class="controls bullet"><span class="by">scotty79</span><span>|</span><a href="#36582061">root</a><span>|</span><a href="#36582371">parent</a><span>|</span><a href="#36582481">prev</a><span>|</span><a href="#36583744">next</a><span>|</span><label class="collapse" for="c-36583926">[-]</label><label class="expand" for="c-36583926">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s a very salient point. And reading well all the time is super hard. I think that&#x27;s one of the reasons why people don&#x27;t write documentation. First of all, who&#x27;s gonna read all that? Second of all, who&#x27;s gonna read all of that correctly?</div><br/></div></div></div></div><div id="36583744" class="c"><input type="checkbox" id="c-36583744" checked=""/><div class="controls bullet"><span class="by">efxhoy</span><span>|</span><a href="#36582061">parent</a><span>|</span><a href="#36582371">prev</a><span>|</span><a href="#36582819">next</a><span>|</span><label class="collapse" for="c-36583744">[-]</label><label class="expand" for="c-36583744">[1 more]</label></div><br/><div class="children"><div class="content">My dad knows very little about computers but he likes joking with me whenever i’m struggling with some technical problem: “8 bits is a byte! That’s all you need to know! How hard could it be?”</div><br/></div></div><div id="36582819" class="c"><input type="checkbox" id="c-36582819" checked=""/><div class="controls bullet"><span class="by">joseferben</span><span>|</span><a href="#36582061">parent</a><span>|</span><a href="#36583744">prev</a><span>|</span><a href="#36582913">next</a><span>|</span><label class="collapse" for="c-36582819">[-]</label><label class="expand" for="c-36582819">[3 more]</label></div><br/><div class="children"><div class="content">Finding out that there are just 5 datatypes and that BIGINT, VARCHAR, BLOB, etc. are just mapped onto those was actually a breath of fresh air.</div><br/><div id="36583739" class="c"><input type="checkbox" id="c-36583739" checked=""/><div class="controls bullet"><span class="by">cm2187</span><span>|</span><a href="#36582061">root</a><span>|</span><a href="#36582819">parent</a><span>|</span><a href="#36582913">next</a><span>|</span><label class="collapse" for="c-36583739">[-]</label><label class="expand" for="c-36583739">[2 more]</label></div><br/><div class="children"><div class="content">Which I think is fine (though you could make a case for a proper datetime type). What I am a lot less of a fan is the dynamic typing, ie that if you have an int column, sqlite will happy store a string in there. I am not sure why they do that but to me, it lets some bugs go unnoticed.</div><br/><div id="36583827" class="c"><input type="checkbox" id="c-36583827" checked=""/><div class="controls bullet"><span class="by">config_yml</span><span>|</span><a href="#36582061">root</a><span>|</span><a href="#36583739">parent</a><span>|</span><a href="#36582913">next</a><span>|</span><label class="collapse" for="c-36583827">[-]</label><label class="expand" for="c-36583827">[1 more]</label></div><br/><div class="children"><div class="content">There are STRICT tables in newer versions of Sqlite</div><br/></div></div></div></div></div></div><div id="36582913" class="c"><input type="checkbox" id="c-36582913" checked=""/><div class="controls bullet"><span class="by">plugin-baby</span><span>|</span><a href="#36582061">parent</a><span>|</span><a href="#36582819">prev</a><span>|</span><a href="#36582670">next</a><span>|</span><label class="collapse" for="c-36582913">[-]</label><label class="expand" for="c-36582913">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I went on to implement storing numeric values as text strings, which worked exactly as well as you&#x27;d expect.<p>I imagine it went went ok!</div><br/></div></div><div id="36582670" class="c"><input type="checkbox" id="c-36582670" checked=""/><div class="controls bullet"><span class="by">wahahah</span><span>|</span><a href="#36582061">parent</a><span>|</span><a href="#36582913">prev</a><span>|</span><a href="#36582226">next</a><span>|</span><label class="collapse" for="c-36582670">[-]</label><label class="expand" for="c-36582670">[1 more]</label></div><br/><div class="children"><div class="content">They&#x27;re real, fwiw
<a href="https:&#x2F;&#x2F;www.johndcook.com&#x2F;blog&#x2F;2018&#x2F;04&#x2F;15&#x2F;eight-bit-floating-point&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.johndcook.com&#x2F;blog&#x2F;2018&#x2F;04&#x2F;15&#x2F;eight-bit-floating...</a></div><br/></div></div></div></div><div id="36582226" class="c"><input type="checkbox" id="c-36582226" checked=""/><div class="controls bullet"><span class="by">yuliyp</span><span>|</span><a href="#36582061">prev</a><span>|</span><a href="#36583737">next</a><span>|</span><label class="collapse" for="c-36582226">[-]</label><label class="expand" for="c-36582226">[3 more]</label></div><br/><div class="children"><div class="content">The comment about concurrency was strange. They have 24 x 5 + 2 x 2 * 60 = 360 writes per minute, or about 6 writes per second. They&#x27;re not seeing concurrency issues because the amount of time that&#x27;s spent doing writes is like 1%. Naturally retrying a couple milliseconds later should succeed almost all the time.</div><br/><div id="36583597" class="c"><input type="checkbox" id="c-36583597" checked=""/><div class="controls bullet"><span class="by">Kiro</span><span>|</span><a href="#36582226">parent</a><span>|</span><a href="#36582876">next</a><span>|</span><label class="collapse" for="c-36583597">[-]</label><label class="expand" for="c-36583597">[1 more]</label></div><br/><div class="children"><div class="content">Why do you need to manually retry at all? Doesn&#x27;t it end up in a queue and gets executed as soon as it can? I thought this stuff was handled by the database automatically.</div><br/></div></div><div id="36582876" class="c"><input type="checkbox" id="c-36582876" checked=""/><div class="controls bullet"><span class="by">joseferben</span><span>|</span><a href="#36582226">parent</a><span>|</span><a href="#36583597">prev</a><span>|</span><a href="#36583737">next</a><span>|</span><label class="collapse" for="c-36582876">[-]</label><label class="expand" for="c-36582876">[1 more]</label></div><br/><div class="children"><div class="content">True, on their own those numbers are not that impressive. To give some more context: That load is average, there are bursts. I use ATOMIC_REQUESTS=True which ties the transaction to the Django POST request. Given that it&#x27;s quite easy to run into N+1 queries using the ORM, I somehow expected to see &quot;database is locked&quot; issue more often.</div><br/></div></div></div></div><div id="36583737" class="c"><input type="checkbox" id="c-36583737" checked=""/><div class="controls bullet"><span class="by">bvrmn</span><span>|</span><a href="#36582226">prev</a><span>|</span><a href="#36579561">next</a><span>|</span><label class="collapse" for="c-36583737">[-]</label><label class="expand" for="c-36583737">[1 more]</label></div><br/><div class="children"><div class="content">AFAIK SQLite has weird locks, half year ago they weren&#x27;t fair and writers could
get timeout easily. For workaround we implemented external lock and it have been worked quite smoothly since.<p>SQLite&#x27;s locking code looks like:<p><pre><code>    while lock_is_still_held_by_somebody():
        sleep(3)  # 3 seconds</code></pre></div><br/></div></div><div id="36579561" class="c"><input type="checkbox" id="c-36579561" checked=""/><div class="controls bullet"><span class="by">taeric</span><span>|</span><a href="#36583737">prev</a><span>|</span><a href="#36582483">next</a><span>|</span><label class="collapse" for="c-36579561">[-]</label><label class="expand" for="c-36579561">[6 more]</label></div><br/><div class="children"><div class="content">Fun article.  Would be interesting to see any benchmarks folks have on a variety of devices and computer sizes.  I&#x27;d expect most developer machines to be quite beefy compared to, say, my kids Chromebooks.  Those are still far stronger than anything I grew up with, of course.  In ways that make any intuition I have basically worthless on performance.</div><br/><div id="36582121" class="c"><input type="checkbox" id="c-36582121" checked=""/><div class="controls bullet"><span class="by">bawolff</span><span>|</span><a href="#36579561">parent</a><span>|</span><a href="#36579656">next</a><span>|</span><label class="collapse" for="c-36582121">[-]</label><label class="expand" for="c-36582121">[1 more]</label></div><br/><div class="children"><div class="content">The author tested only 100k rows. That almost certainly fits in your kids chromebook&#x27;s memory just as much as it would a beefy computer. It would probably fit in memory even on a raspberry pi or a computer from the 90s.</div><br/></div></div><div id="36579656" class="c"><input type="checkbox" id="c-36579656" checked=""/><div class="controls bullet"><span class="by">joseferben</span><span>|</span><a href="#36579561">parent</a><span>|</span><a href="#36582121">prev</a><span>|</span><a href="#36582483">next</a><span>|</span><label class="collapse" for="c-36579656">[-]</label><label class="expand" for="c-36579656">[4 more]</label></div><br/><div class="children"><div class="content">I came to the same conclusion. I find it hard to extrapolate from benchmarks that I run locally on my dev machine.</div><br/><div id="36581963" class="c"><input type="checkbox" id="c-36581963" checked=""/><div class="controls bullet"><span class="by">bearjaws</span><span>|</span><a href="#36579561">root</a><span>|</span><a href="#36579656">parent</a><span>|</span><a href="#36582483">next</a><span>|</span><label class="collapse" for="c-36581963">[-]</label><label class="expand" for="c-36581963">[3 more]</label></div><br/><div class="children"><div class="content">Its pretty sad given how most cloud providers price out IOPS.<p>I&#x27;ve had to explain numerous times to our engineers that their laptop is running around 10x the IOPS of our database (~40,000). Table scans are actually more performant on a dev laptop than a replica.</div><br/><div id="36582205" class="c"><input type="checkbox" id="c-36582205" checked=""/><div class="controls bullet"><span class="by">adrianN</span><span>|</span><a href="#36579561">root</a><span>|</span><a href="#36581963">parent</a><span>|</span><a href="#36582483">next</a><span>|</span><label class="collapse" for="c-36582205">[-]</label><label class="expand" for="c-36582205">[2 more]</label></div><br/><div class="children"><div class="content">Have you considered shipping your dev laptops to the cloud? That would make deploying easier too.</div><br/><div id="36582532" class="c"><input type="checkbox" id="c-36582532" checked=""/><div class="controls bullet"><span class="by">antod</span><span>|</span><a href="#36579561">root</a><span>|</span><a href="#36582205">parent</a><span>|</span><a href="#36582483">next</a><span>|</span><label class="collapse" for="c-36582532">[-]</label><label class="expand" for="c-36582532">[1 more]</label></div><br/><div class="children"><div class="content">Now I&#x27;m imagining an alternate reality where a Docker Container is like a caddy for laptops lining up the thunderbolt ports for hotswapping. And the delivery manager is the courier driver.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="36582483" class="c"><input type="checkbox" id="c-36582483" checked=""/><div class="controls bullet"><span class="by">anonzzzies</span><span>|</span><a href="#36579561">prev</a><span>|</span><a href="#36581989">next</a><span>|</span><label class="collapse" for="c-36582483">[-]</label><label class="expand" for="c-36582483">[2 more]</label></div><br/><div class="children"><div class="content">Is there a nodejs SQLite driver wrapper than does that hides the one writer concurrency issue for you without having to think about it? I never used SQLite on a server because of it (many times on desktop and other clients), but I do have reasons to do so, especially with them being so easy to snapshot and move around.</div><br/><div id="36582898" class="c"><input type="checkbox" id="c-36582898" checked=""/><div class="controls bullet"><span class="by">plugin-baby</span><span>|</span><a href="#36582483">parent</a><span>|</span><a href="#36581989">next</a><span>|</span><label class="collapse" for="c-36582898">[-]</label><label class="expand" for="c-36582898">[1 more]</label></div><br/><div class="children"><div class="content">Maybe <a href="https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;better-sqlite3" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;better-sqlite3</a>? Hide concurrency issues by blocking!?</div><br/></div></div></div></div><div id="36581989" class="c"><input type="checkbox" id="c-36581989" checked=""/><div class="controls bullet"><span class="by">rch</span><span>|</span><a href="#36582483">prev</a><span>|</span><a href="#36582676">next</a><span>|</span><label class="collapse" for="c-36581989">[-]</label><label class="expand" for="c-36581989">[9 more]</label></div><br/><div class="children"><div class="content">I&#x27;d like to see a fork of SQLite that &quot;supports the PostgreSQL wire protocol and the majority of PostgreSQL syntax&quot; (to quote another popular db).</div><br/><div id="36582079" class="c"><input type="checkbox" id="c-36582079" checked=""/><div class="controls bullet"><span class="by">bawolff</span><span>|</span><a href="#36581989">parent</a><span>|</span><a href="#36582766">next</a><span>|</span><label class="collapse" for="c-36582079">[-]</label><label class="expand" for="c-36582079">[2 more]</label></div><br/><div class="children"><div class="content">I dont get why you would want this. Most of sqlite&#x27;s unique benefits come from its unique design choice of being in process. If you did queries over the wire you&#x27;d just get worst of both worlds.</div><br/><div id="36584024" class="c"><input type="checkbox" id="c-36584024" checked=""/><div class="controls bullet"><span class="by">williamdclt</span><span>|</span><a href="#36581989">root</a><span>|</span><a href="#36582079">parent</a><span>|</span><a href="#36582766">next</a><span>|</span><label class="collapse" for="c-36584024">[-]</label><label class="expand" for="c-36584024">[1 more]</label></div><br/><div class="children"><div class="content">They&#x27;re not suggesting to go over the wire I don&#x27;t think. They&#x27;re suggesting to make SQLite support Postgres linguo</div><br/></div></div></div></div><div id="36582766" class="c"><input type="checkbox" id="c-36582766" checked=""/><div class="controls bullet"><span class="by">gonzus</span><span>|</span><a href="#36581989">parent</a><span>|</span><a href="#36582079">prev</a><span>|</span><a href="#36582260">next</a><span>|</span><label class="collapse" for="c-36582766">[-]</label><label class="expand" for="c-36582766">[1 more]</label></div><br/><div class="children"><div class="content">I implemented once the MySQL network protocol (in TypeScript) to talk to a local SQLite DB. We used that for our CI environment, since our apps only did very vanilla SQL operations. It worked like a charm. So I can totally see some uses for such a beast -- but probably all of them are pre-production.</div><br/></div></div><div id="36582260" class="c"><input type="checkbox" id="c-36582260" checked=""/><div class="controls bullet"><span class="by">thunderbong</span><span>|</span><a href="#36581989">parent</a><span>|</span><a href="#36582766">prev</a><span>|</span><a href="#36582197">next</a><span>|</span><label class="collapse" for="c-36582260">[-]</label><label class="expand" for="c-36582260">[1 more]</label></div><br/><div class="children"><div class="content">This blog post might be of interest to you -<p><a href="https:&#x2F;&#x2F;blog.turso.tech&#x2F;sqlite-based-databases-on-the-postgres-protocol-yes-we-can-358e61171d65" rel="nofollow noreferrer">https:&#x2F;&#x2F;blog.turso.tech&#x2F;sqlite-based-databases-on-the-postgr...</a></div><br/></div></div><div id="36582197" class="c"><input type="checkbox" id="c-36582197" checked=""/><div class="controls bullet"><span class="by">voganmother42</span><span>|</span><a href="#36581989">parent</a><span>|</span><a href="#36582260">prev</a><span>|</span><a href="#36582525">next</a><span>|</span><label class="collapse" for="c-36582197">[-]</label><label class="expand" for="c-36582197">[2 more]</label></div><br/><div class="children"><div class="content">Postgres has foreign data wrappers which can kinda achieve this(see also: <a href="https:&#x2F;&#x2F;github.com&#x2F;pgspider&#x2F;sqlite_fdw">https:&#x2F;&#x2F;github.com&#x2F;pgspider&#x2F;sqlite_fdw</a> ), but ive been surprised by how well sqlite is already supported by many tools : sometimes it comes for free as its used in testing - hooking up stuff like litestream can work really wel l too</div><br/><div id="36582361" class="c"><input type="checkbox" id="c-36582361" checked=""/><div class="controls bullet"><span class="by">linux2647</span><span>|</span><a href="#36581989">root</a><span>|</span><a href="#36582197">parent</a><span>|</span><a href="#36582525">next</a><span>|</span><label class="collapse" for="c-36582361">[-]</label><label class="expand" for="c-36582361">[1 more]</label></div><br/><div class="children"><div class="content">FDWs still requires an instance of Postgres to be running.  With implementing the Postgres wire protocol, you could theoretically use any Postgres driver to talk to a SQLite database with no client changes and no instance of Postgres</div><br/></div></div></div></div><div id="36582525" class="c"><input type="checkbox" id="c-36582525" checked=""/><div class="controls bullet"><span class="by">0cf8612b2e1e</span><span>|</span><a href="#36581989">parent</a><span>|</span><a href="#36582197">prev</a><span>|</span><a href="#36582676">next</a><span>|</span><label class="collapse" for="c-36582525">[-]</label><label class="expand" for="c-36582525">[2 more]</label></div><br/><div class="children"><div class="content">DuckDb supports reading&#x2F;writing to a SQLite database, while using the improved DuckDB syntax. Sounds too good to be true, but I keep meaning to explore if there are any obvious gotchas.</div><br/><div id="36582637" class="c"><input type="checkbox" id="c-36582637" checked=""/><div class="controls bullet"><span class="by">samwillis</span><span>|</span><a href="#36581989">root</a><span>|</span><a href="#36582525">parent</a><span>|</span><a href="#36582676">next</a><span>|</span><label class="collapse" for="c-36582637">[-]</label><label class="expand" for="c-36582637">[1 more]</label></div><br/><div class="children"><div class="content">DuckDBs concurrency model is not ideal for every use case. It&#x27;s <i>either</i> single read&#x2F;write process <i>or</i> multi read process (no write).<p>Other than that it&#x27;s awesome. I&#x27;ve stuck to its native file format though as scanning SQLite is slower.</div><br/></div></div></div></div></div></div><div id="36582676" class="c"><input type="checkbox" id="c-36582676" checked=""/><div class="controls bullet"><span class="by">jokoon</span><span>|</span><a href="#36581989">prev</a><span>|</span><a href="#36582131">next</a><span>|</span><label class="collapse" for="c-36582676">[-]</label><label class="expand" for="c-36582676">[4 more]</label></div><br/><div class="children"><div class="content">I&#x27;m a bit bummed out that in memory didn&#x27;t increase performance, any idea why?</div><br/><div id="36582763" class="c"><input type="checkbox" id="c-36582763" checked=""/><div class="controls bullet"><span class="by">joseferben</span><span>|</span><a href="#36582676">parent</a><span>|</span><a href="#36582775">next</a><span>|</span><label class="collapse" for="c-36582763">[-]</label><label class="expand" for="c-36582763">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve got a hunch that the data was too small to make a difference: <a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;a&#x2F;764743" rel="nofollow noreferrer">https:&#x2F;&#x2F;stackoverflow.com&#x2F;a&#x2F;764743</a></div><br/></div></div><div id="36582775" class="c"><input type="checkbox" id="c-36582775" checked=""/><div class="controls bullet"><span class="by">justinclift</span><span>|</span><a href="#36582676">parent</a><span>|</span><a href="#36582763">prev</a><span>|</span><a href="#36582760">next</a><span>|</span><label class="collapse" for="c-36582775">[-]</label><label class="expand" for="c-36582775">[1 more]</label></div><br/><div class="children"><div class="content">A rough guess without knowing any better, would be that their SQLite configuration isn&#x27;t flushing to disk after every write or similar.<p>Maybe they ran their entire benchmark in a single transaction or something?</div><br/></div></div><div id="36582760" class="c"><input type="checkbox" id="c-36582760" checked=""/><div class="controls bullet"><span class="by">Khoth</span><span>|</span><a href="#36582676">parent</a><span>|</span><a href="#36582775">prev</a><span>|</span><a href="#36582131">next</a><span>|</span><label class="collapse" for="c-36582760">[-]</label><label class="expand" for="c-36582760">[1 more]</label></div><br/><div class="children"><div class="content">Sounds like they were testing it with a small enough amount of data that the disk version could just work from cache and didn&#x27;t actually have to go to the disk</div><br/></div></div></div></div><div id="36582131" class="c"><input type="checkbox" id="c-36582131" checked=""/><div class="controls bullet"><span class="by">GauntletWizard</span><span>|</span><a href="#36582676">prev</a><span>|</span><a href="#36579508">next</a><span>|</span><label class="collapse" for="c-36582131">[-]</label><label class="expand" for="c-36582131">[3 more]</label></div><br/><div class="children"><div class="content">Fly.io has inspired me for one-human scaled production. There&#x27;s a ton you can do at 100% uptime... When the user is looking. Which is not often! You&#x27;ve got a ton of time for maintenance and reshuffling your infrastructure around. You&#x27;ve got tons of downtime if you do it in five minute intervals in the evening, and plenty of concurrency if you&#x27;ve got just one user. Serving from a file at a time is great. You can snapshot and replicate every five seconds and never miss more than one or two actions if you have to fail over if you&#x27;re doing so for a single user&#x27;s data, and for a single user.<p>That&#x27;s a tradeoff you make if you&#x27;re a user, and it&#x27;s pretty worthwhile. There&#x27;s something to play with</div><br/><div id="36582707" class="c"><input type="checkbox" id="c-36582707" checked=""/><div class="controls bullet"><span class="by">unshavedyak</span><span>|</span><a href="#36582131">parent</a><span>|</span><a href="#36582597">next</a><span>|</span><label class="collapse" for="c-36582707">[-]</label><label class="expand" for="c-36582707">[1 more]</label></div><br/><div class="children"><div class="content">Can you link more concrete details about this? It kinda sounds like you&#x27;re referring to the design of sharding databases by user, which i almost forgot about (relevant to me now, so i appreciate it). Though i&#x27;m super curious in how synchronizing data between users would work.. ie notifications, single producer multi consumer data, etc.<p>Time for some researching :)</div><br/></div></div></div></div><div id="36582887" class="c"><input type="checkbox" id="c-36582887" checked=""/><div class="controls bullet"><span class="by">jujube3</span><span>|</span><a href="#36579508">prev</a><span>|</span><a href="#36579878">next</a><span>|</span><label class="collapse" for="c-36582887">[-]</label><label class="expand" for="c-36582887">[2 more]</label></div><br/><div class="children"><div class="content">TL;DR Using a slow thing is fine if you use it in conjunction with an even slower thing.</div><br/><div id="36583364" class="c"><input type="checkbox" id="c-36583364" checked=""/><div class="controls bullet"><span class="by">blarnopre</span><span>|</span><a href="#36582887">parent</a><span>|</span><a href="#36579878">next</a><span>|</span><label class="collapse" for="c-36583364">[-]</label><label class="expand" for="c-36583364">[1 more]</label></div><br/><div class="children"><div class="content">Can&#x27;t tell if you&#x27;re missing the point on purpose or just did no research, maybe due to the lack of evidence you cite</div><br/></div></div></div></div><div id="36579878" class="c"><input type="checkbox" id="c-36579878" checked=""/><div class="controls bullet"><span class="by">pestatije</span><span>|</span><a href="#36582887">prev</a><span>|</span><label class="collapse" for="c-36579878">[-]</label><label class="expand" for="c-36579878">[2 more]</label></div><br/><div class="children"><div class="content">can you really test the speed of a db with django?</div><br/><div id="36582265" class="c"><input type="checkbox" id="c-36582265" checked=""/><div class="controls bullet"><span class="by">klysm</span><span>|</span><a href="#36579878">parent</a><span>|</span><label class="collapse" for="c-36582265">[-]</label><label class="expand" for="c-36582265">[1 more]</label></div><br/><div class="children"><div class="content">if it&#x27;s end goal is to be used by django, isn&#x27;t that the only thing that matters? Django may very well be the bottleneck though</div><br/></div></div></div></div></div></div></div></div></div></body></html>