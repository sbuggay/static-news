<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1723539678927" as="style"/><link rel="stylesheet" href="styles.css?v=1723539678927"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://pglite.dev/">Show HN: PGlite – in-browser WASM Postgres with pgvector and live sync</a> <span class="domain">(<a href="https://pglite.dev">pglite.dev</a>)</span></div><div class="subtext"><span>samwillis</span> | <span>93 comments</span></div><br/><div><div id="41225323" class="c"><input type="checkbox" id="c-41225323" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#41225080">next</a><span>|</span><label class="collapse" for="c-41225323">[-]</label><label class="expand" for="c-41225323">[10 more]</label></div><br/><div class="children"><div class="content">I&#x27;d seen this running in a browser before (the ~3MB download is really impressive for that), but I hadn&#x27;t clocked that it runs server-side with Node.js and Bun as well: <a href="https:&#x2F;&#x2F;pglite.dev&#x2F;docs&#x2F;" rel="nofollow">https:&#x2F;&#x2F;pglite.dev&#x2F;docs&#x2F;</a><p>Since that&#x27;s still not spinning up an actual network server, that feels like it&#x27;s an alternative to SQLite - you can spin up a full in-process PostgreSQL implementation, that persists to disk, as part of an existing Node.js&#x2F;Bun application.<p>That&#x27;s really interesting!<p>I&#x27;d love to use this from Python, via something like <a href="https:&#x2F;&#x2F;github.com&#x2F;wasmerio&#x2F;wasmer-python">https:&#x2F;&#x2F;github.com&#x2F;wasmerio&#x2F;wasmer-python</a> or <a href="https:&#x2F;&#x2F;github.com&#x2F;bytecodealliance&#x2F;wasmtime-py">https:&#x2F;&#x2F;github.com&#x2F;bytecodealliance&#x2F;wasmtime-py</a> - has anyone run PGlite via one of those wrappers yet?</div><br/><div id="41225520" class="c"><input type="checkbox" id="c-41225520" checked=""/><div class="controls bullet"><span class="by">samwillis</span><span>|</span><a href="#41225323">parent</a><span>|</span><a href="#41228367">next</a><span>|</span><label class="collapse" for="c-41225520">[-]</label><label class="expand" for="c-41225520">[4 more]</label></div><br/><div class="children"><div class="content">Getting PGlite working with other languages is very high on my list. We are working on two approaches:<p>- a WASI build with a lower level api that users can wrap with a higher level api.<p>- a &quot;libpglite&quot; that can be linked to by any native language. The WASI build is likely a WASM build of this.<p>Most languages already have a Postgres wire protocol implementation and so wrapping a low level API that reads&#x2F;emits this is relatively easy - it&#x27;s what the JS side of PGlite does.</div><br/><div id="41232911" class="c"><input type="checkbox" id="c-41232911" checked=""/><div class="controls bullet"><span class="by">rubenfiszel</span><span>|</span><a href="#41225323">root</a><span>|</span><a href="#41225520">parent</a><span>|</span><a href="#41228073">next</a><span>|</span><label class="collapse" for="c-41232911">[-]</label><label class="expand" for="c-41232911">[1 more]</label></div><br/><div class="children"><div class="content">If you can make it work with Rust, and compatible with wasm targets as well, it opens a huge field of possibilities.<p>Windmill.dev is a workflow engine based fully on postgresql. This would be the missing piece to offer a local development workflow that doesn&#x27;t require spinning a full pg.</div><br/></div></div><div id="41228073" class="c"><input type="checkbox" id="c-41228073" checked=""/><div class="controls bullet"><span class="by">sitkack</span><span>|</span><a href="#41225323">root</a><span>|</span><a href="#41225520">parent</a><span>|</span><a href="#41232911">prev</a><span>|</span><a href="#41228367">next</a><span>|</span><label class="collapse" for="c-41228073">[-]</label><label class="expand" for="c-41228073">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;d love to see this for SQLite and DuckDB at the same time. I could see them using a common wasi filesystem shim so they can transparently do range requests over http blobs.<p>Do you have a branch for this work?</div><br/><div id="41228729" class="c"><input type="checkbox" id="c-41228729" checked=""/><div class="controls bullet"><span class="by">samwillis</span><span>|</span><a href="#41225323">root</a><span>|</span><a href="#41228073">parent</a><span>|</span><a href="#41228367">next</a><span>|</span><label class="collapse" for="c-41228729">[-]</label><label class="expand" for="c-41228729">[1 more]</label></div><br/><div class="children"><div class="content">No branch yet, we&#x27;re still in the early research and experimental stage.</div><br/></div></div></div></div></div></div><div id="41228367" class="c"><input type="checkbox" id="c-41228367" checked=""/><div class="controls bullet"><span class="by">networked</span><span>|</span><a href="#41225323">parent</a><span>|</span><a href="#41225520">prev</a><span>|</span><a href="#41226800">next</a><span>|</span><label class="collapse" for="c-41228367">[-]</label><label class="expand" for="c-41228367">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;d also love to try PGlite in Python.<p>While reading this thread, I realized that you could already access PGlite in Pyodide.
Pyodide is a Wasm port of CPython.
It can work with JavaScript objects through proxies.<p>Here is a demo.
I have run the code in current Node.js 18, Deno 1, and Bun 1.<p><pre><code>  import { PGlite } from &quot;@electric-sql&#x2F;pglite&quot;;
  import { loadPyodide } from &quot;pyodide&quot;;

  globalThis.db = new PGlite();
  let pyodide = await loadPyodide();

  console.log(
    await pyodide.runPythonAsync(`
      import js

      ret = await js.db.query(&quot;&quot;&quot;
          SELECT &#x27;Hello, world!&#x27;
          AS &quot;greeting&quot;;
      &quot;&quot;&quot;)

      ret.rows[0].greeting
    `),
  );
</code></pre>
It works on my machine:<p><pre><code>  &gt; npm init -y
  &gt; npm install &#x27;@electric-sql&#x2F;pglite@==0.2.0&#x27;
  &gt; npm install &#x27;pyodide@==0.26.2&#x27;
  &gt; node index.mjs
  prerun(C-node) worker= false
  Running in main thread, faking onCustomMessage
  Hello, world!</code></pre></div><br/></div></div><div id="41226800" class="c"><input type="checkbox" id="c-41226800" checked=""/><div class="controls bullet"><span class="by">abrichr</span><span>|</span><a href="#41225323">parent</a><span>|</span><a href="#41228367">prev</a><span>|</span><a href="#41226494">next</a><span>|</span><label class="collapse" for="c-41226800">[-]</label><label class="expand" for="c-41226800">[3 more]</label></div><br/><div class="children"><div class="content">As a workaround, maybe something like this could work:<p>db.js:<p><pre><code>    const { PGlite } = require(&#x27;@electric-sql&#x2F;pglite&#x27;);
    const db = new PGlite();

    async function execSQL(sql) {
        await db.exec(sql);
        return { success: true };
    }

    async function querySQL(sql, params) {
        const ret = await db.query(sql, params);
        return ret.rows;
    }

    &#x2F;&#x2F; Command-line interface logic
    const action = process.argv[2];
    const sql = process.argv[3];
    const params = process.argv.slice(4);

    if (action === &#x27;exec&#x27;) {
        execSQL(sql).then(result =&gt; {
            console.log(JSON.stringify(result));
            process.exit();
        });
    } else if (action === &#x27;query&#x27;) {
        querySQL(sql, params).then(result =&gt; {
            console.log(JSON.stringify(result));
            process.exit();
        });
    }

</code></pre>
main.py:<p><pre><code>    import subprocess
    import json

    def execute_sql(sql: str) -&gt; dict:
        result = subprocess.run(
            [&#x27;node&#x27;, &#x27;db.js&#x27;, &#x27;exec&#x27;, sql],
            stdout=subprocess.PIPE,
            text=True
        )
        return json.loads(result.stdout)

    def query_sql(sql: str, params: list) -&gt; list:
        result = subprocess.run(
            [&#x27;node&#x27;, &#x27;db.js&#x27;, &#x27;query&#x27;, sql] + params,
            stdout=subprocess.PIPE,
            text=True
        )
        return json.loads(result.stdout)

    # Example Usage
    create_table_sql = &quot;&quot;&quot;
    CREATE TABLE IF NOT EXISTS todo (
        id SERIAL PRIMARY KEY,
        task TEXT,
        done BOOLEAN DEFAULT false
    );
    &quot;&quot;&quot;
    execute_sql(create_table_sql)

    query_result = query_sql(&quot;SELECT * FROM todo WHERE id = $1&quot;, [&quot;1&quot;])
    print(query_result)</code></pre></div><br/><div id="41226862" class="c"><input type="checkbox" id="c-41226862" checked=""/><div class="controls bullet"><span class="by">samwillis</span><span>|</span><a href="#41225323">root</a><span>|</span><a href="#41226800">parent</a><span>|</span><a href="#41228343">next</a><span>|</span><label class="collapse" for="c-41226862">[-]</label><label class="expand" for="c-41226862">[1 more]</label></div><br/><div class="children"><div class="content">We have the (accidentally undocumented) execProtocolRaw api that lets you execute Postgres wire protocol messages. If you use that you can then use a Python Postgres wire protocol lib to get all the type support.</div><br/></div></div></div></div><div id="41226494" class="c"><input type="checkbox" id="c-41226494" checked=""/><div class="controls bullet"><span class="by">tracker1</span><span>|</span><a href="#41225323">parent</a><span>|</span><a href="#41226800">prev</a><span>|</span><a href="#41225080">next</a><span>|</span><label class="collapse" for="c-41226494">[-]</label><label class="expand" for="c-41226494">[1 more]</label></div><br/><div class="children"><div class="content">Definitely interesting... maybe someone more familiar with the licenses involved can chime in on how this might impact a project&#x2F;solution and compare&#x2F;contrast to something like embedded FirebirdSQL.<p>For example, can you use this in&#x2F;with a commercial project without releasing source?  If you embed this, will you need to change your license to match pg&#x2F;fb?<p>aside: Mostly asking out of curiosity if anyone knows already, if I actually had an immediate need, would be reviewing this of my own accord.  I often dislike a lot of the simplicity behind SQLite in very similar ways as to things I don&#x27;t care for with MySQL&#x2F;MariaDB.</div><br/></div></div></div></div><div id="41225080" class="c"><input type="checkbox" id="c-41225080" checked=""/><div class="controls bullet"><span class="by">creativedg</span><span>|</span><a href="#41225323">prev</a><span>|</span><a href="#41225011">next</a><span>|</span><label class="collapse" for="c-41225080">[-]</label><label class="expand" for="c-41225080">[8 more]</label></div><br/><div class="children"><div class="content">Huge fan of PGlite.<p>It&#x27;s the perfect solution to have Postgres without the need of Docker. With just `npm install`, you can have a Postgres instance on your computer. So, it&#x27;s extremely easy to onboard a new developer in your team.<p>And, the good news, PGlite works perfectly with Next.js.<p>I&#x27;m using PGlite in local and development environment with Next.js Boilerplate: <a href="https:&#x2F;&#x2F;github.com&#x2F;ixartz&#x2F;Next-js-Boilerplate">https:&#x2F;&#x2F;github.com&#x2F;ixartz&#x2F;Next-js-Boilerplate</a><p>With only one command `npm install`, you can have a full-stack application, which also includes the database (a working Postgres). And, no need to have&#x2F;install external tools.</div><br/><div id="41226518" class="c"><input type="checkbox" id="c-41226518" checked=""/><div class="controls bullet"><span class="by">tracker1</span><span>|</span><a href="#41225080">parent</a><span>|</span><a href="#41225011">next</a><span>|</span><label class="collapse" for="c-41226518">[-]</label><label class="expand" for="c-41226518">[7 more]</label></div><br/><div class="children"><div class="content">Definitely interesting, though I often just use docker compose for dev dependencies, this is definitely a cool alternative.</div><br/><div id="41226981" class="c"><input type="checkbox" id="c-41226981" checked=""/><div class="controls bullet"><span class="by">creativedg</span><span>|</span><a href="#41225080">root</a><span>|</span><a href="#41226518">parent</a><span>|</span><a href="#41225011">next</a><span>|</span><label class="collapse" for="c-41226981">[-]</label><label class="expand" for="c-41226981">[6 more]</label></div><br/><div class="children"><div class="content">Yes, it&#x27;s very cool alternative and it removes the need for docker compose for dev environment.<p>On top of it, PGlite also perfect for CI and testing.</div><br/><div id="41227075" class="c"><input type="checkbox" id="c-41227075" checked=""/><div class="controls bullet"><span class="by">ggregoire</span><span>|</span><a href="#41225080">root</a><span>|</span><a href="#41226981">parent</a><span>|</span><a href="#41225011">next</a><span>|</span><label class="collapse" for="c-41227075">[-]</label><label class="expand" for="c-41227075">[5 more]</label></div><br/><div class="children"><div class="content">Wouldn&#x27;t be easier to have a shared dev database? So that each developer doesn&#x27;t have to apply the migrations and import the dumps in their local db, and figure out why the local db for dev A is different than the local db for dev B.</div><br/><div id="41232802" class="c"><input type="checkbox" id="c-41232802" checked=""/><div class="controls bullet"><span class="by">vekker</span><span>|</span><a href="#41225080">root</a><span>|</span><a href="#41227075">parent</a><span>|</span><a href="#41227622">next</a><span>|</span><label class="collapse" for="c-41232802">[-]</label><label class="expand" for="c-41232802">[1 more]</label></div><br/><div class="children"><div class="content">I get frustrated when I join a project that doesn&#x27;t allow running the full stack locally, but forces sharing parts, which always comes with limitations (not being able to work offline for starters).<p>It already is quite easy to spin up a local PG instance with Docker, but this probably makes it even simpler. Importing mock data and running migrations should just be 1 `npm run` command with a properly set up codebase.</div><br/></div></div><div id="41227622" class="c"><input type="checkbox" id="c-41227622" checked=""/><div class="controls bullet"><span class="by">motolov</span><span>|</span><a href="#41225080">root</a><span>|</span><a href="#41227075">parent</a><span>|</span><a href="#41232802">prev</a><span>|</span><a href="#41227899">next</a><span>|</span><label class="collapse" for="c-41227622">[-]</label><label class="expand" for="c-41227622">[1 more]</label></div><br/><div class="children"><div class="content">IME, creating scaffolding to allow for a known, reproducible and clean state (of both DDL and DML) are wild systematic (eg across the team and the estate) productivity and stability boosts. Not having to be &quot;connected to the shared dev DB frees engineers of latency (every ms counts) and also of mutulple pollutants to that database (eg Sally was writing protractor&#x2F;cypresss tests and now the foo table has 3m rows, george was doing data exploration and manually entered records to the DB that now causes a runtime exception fot the team, etc)<p>If a shared dev DB is really what everyone wants, then at least having the scaffolding mentioned above to fix the DB state when pollution happens (it will) will help heal foot shots.
In industrialized practice, what you are mentioning (a shared dev&#x2F;env) is really the &quot;QA&quot;&#x2F;pre-prod environment.
Ideologically and personally (putting on down vote helmet) if you can&#x27;t run the whole stack locally you&#x27;re in for a world of trouble down the road.. local first, test extensively there, then promote changes.</div><br/></div></div><div id="41227899" class="c"><input type="checkbox" id="c-41227899" checked=""/><div class="controls bullet"><span class="by">tracker1</span><span>|</span><a href="#41225080">root</a><span>|</span><a href="#41227075">parent</a><span>|</span><a href="#41227622">prev</a><span>|</span><a href="#41227305">next</a><span>|</span><label class="collapse" for="c-41227899">[-]</label><label class="expand" for="c-41227899">[1 more]</label></div><br/><div class="children"><div class="content">A shared dev database can be okay for application dev.  Locally deployable database is better imo.  By nature of migration scripts running for every dev locally, it helps to better ensure the stability of said scripts.  This can&#x2F;should be combined with snapshot runs that represent your production environments.<p>More critical still if you have more than one &quot;production&quot; environment, where in different customers&#x2F;clients may be at different application and db versions from one-another.  This is often the case for large business and govt work.  With shared environments it&#x27;s often too easy to have a poorly adapted set of migration scripts.</div><br/></div></div><div id="41227305" class="c"><input type="checkbox" id="c-41227305" checked=""/><div class="controls bullet"><span class="by">andruby</span><span>|</span><a href="#41225080">root</a><span>|</span><a href="#41227075">parent</a><span>|</span><a href="#41227899">prev</a><span>|</span><a href="#41225011">next</a><span>|</span><label class="collapse" for="c-41227305">[-]</label><label class="expand" for="c-41227305">[1 more]</label></div><br/><div class="children"><div class="content">That sounds cumbersome when devs are working in their respective branches and changing the schema (adding migrations)</div><br/></div></div></div></div></div></div></div></div></div></div><div id="41225011" class="c"><input type="checkbox" id="c-41225011" checked=""/><div class="controls bullet"><span class="by">sgbeal</span><span>|</span><a href="#41225080">prev</a><span>|</span><a href="#41226890">next</a><span>|</span><label class="collapse" for="c-41225011">[-]</label><label class="expand" for="c-41225011">[3 more]</label></div><br/><div class="children"><div class="content">To keep the next person from having to look (or ask without looking): it supports browser-side persistence via IndexedDB and OPFS: &lt;<a href="https:&#x2F;&#x2F;pglite.dev&#x2F;docs&#x2F;filesystems" rel="nofollow">https:&#x2F;&#x2F;pglite.dev&#x2F;docs&#x2F;filesystems</a>&gt;</div><br/><div id="41225028" class="c"><input type="checkbox" id="c-41225028" checked=""/><div class="controls bullet"><span class="by">samwillis</span><span>|</span><a href="#41225011">parent</a><span>|</span><a href="#41226890">next</a><span>|</span><label class="collapse" for="c-41225028">[-]</label><label class="expand" for="c-41225028">[2 more]</label></div><br/><div class="children"><div class="content">Yours and Roys work on WASM SQLite VFSs has directly influenced my work on this. Thank you!</div><br/><div id="41225055" class="c"><input type="checkbox" id="c-41225055" checked=""/><div class="controls bullet"><span class="by">sgbeal</span><span>|</span><a href="#41225011">root</a><span>|</span><a href="#41225028">parent</a><span>|</span><a href="#41226890">next</a><span>|</span><label class="collapse" for="c-41225055">[-]</label><label class="expand" for="c-41225055">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Yours and Roys work on ...<p>(<i>blush</i>) But to be 100% clear: the AHP-based VFS in the SQLite project is a direct port of Roy&#x27;s, so all of the credit for that one truly goes to him!</div><br/></div></div></div></div></div></div><div id="41226890" class="c"><input type="checkbox" id="c-41226890" checked=""/><div class="controls bullet"><span class="by">Cu3PO42</span><span>|</span><a href="#41225011">prev</a><span>|</span><a href="#41226450">next</a><span>|</span><label class="collapse" for="c-41226890">[-]</label><label class="expand" for="c-41226890">[1 more]</label></div><br/><div class="children"><div class="content">When I saw the headline, I immediately thought &quot;I bet this would go really well with ElectricSQL&quot;, so it&#x27;s great to see this coming from you!<p>The immediate DX is incredible and I&#x27;m itching to use PGLite (and ElectricSQL) in a production project, I expect it would remove quite a few pain points I&#x27;m currently experiencing. (Also, I just like working with CRDTs.)<p>I don&#x27;t have any constructive criticism to offer right this moment, but I just wanted to congratulate you on the launch and an incredible looking product!</div><br/></div></div><div id="41226450" class="c"><input type="checkbox" id="c-41226450" checked=""/><div class="controls bullet"><span class="by">Retr0id</span><span>|</span><a href="#41226890">prev</a><span>|</span><a href="#41225523">next</a><span>|</span><label class="collapse" for="c-41226450">[-]</label><label class="expand" for="c-41226450">[3 more]</label></div><br/><div class="children"><div class="content">Normally I&#x27;d say the main difference between postgres and SQLite is that the latter is in-process. Now that they can <i>both</i> be in-process, is there a more detailed comparison of the two? When might I prefer one over the other?</div><br/><div id="41231637" class="c"><input type="checkbox" id="c-41231637" checked=""/><div class="controls bullet"><span class="by">nbbaier</span><span>|</span><a href="#41226450">parent</a><span>|</span><a href="#41226514">next</a><span>|</span><label class="collapse" for="c-41231637">[-]</label><label class="expand" for="c-41231637">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;d also love to know this!</div><br/></div></div></div></div><div id="41225523" class="c"><input type="checkbox" id="c-41225523" checked=""/><div class="controls bullet"><span class="by">bezbac</span><span>|</span><a href="#41226450">prev</a><span>|</span><a href="#41226651">next</a><span>|</span><label class="collapse" for="c-41225523">[-]</label><label class="expand" for="c-41225523">[6 more]</label></div><br/><div class="children"><div class="content">I recently experimented with using pglite for API integration tests in one of my side projects. It worked pretty well and has much better DX than using something like testcontainers[0] to spin up postgres running in docker.<p>[0]: <a href="https:&#x2F;&#x2F;testcontainers.com" rel="nofollow">https:&#x2F;&#x2F;testcontainers.com</a></div><br/><div id="41226107" class="c"><input type="checkbox" id="c-41226107" checked=""/><div class="controls bullet"><span class="by">samwillis</span><span>|</span><a href="#41225523">parent</a><span>|</span><a href="#41225840">next</a><span>|</span><label class="collapse" for="c-41226107">[-]</label><label class="expand" for="c-41226107">[1 more]</label></div><br/><div class="children"><div class="content">I see unit and integration testing as a massive opportunity for PGlite. I know of projects (such as Drizzle ORM) that are already making good use of it.<p>The team at Supabase have built pg-gateway (<a href="https:&#x2F;&#x2F;github.com&#x2F;supabase-community&#x2F;pg-gateway">https:&#x2F;&#x2F;github.com&#x2F;supabase-community&#x2F;pg-gateway</a>) that lets you connect to PGlite from any Postgres client. That&#x27;s absolutely a way you could use it for CI.<p>One thing I would love to explore (or maybe commenting on it here will inspire someone else ;-) ) is a copy on write page level VFS for PGLite. I could imagine starting and loading a PGlite with a dataset and then <i>instantly forking</i> a database for each test. Not complexities with devcontainers or using Postgres template databases. Sub ms forks of a database for each test.</div><br/></div></div><div id="41225840" class="c"><input type="checkbox" id="c-41225840" checked=""/><div class="controls bullet"><span class="by">riverdroid</span><span>|</span><a href="#41225523">parent</a><span>|</span><a href="#41226107">prev</a><span>|</span><a href="#41226651">next</a><span>|</span><label class="collapse" for="c-41225840">[-]</label><label class="expand" for="c-41225840">[4 more]</label></div><br/><div class="children"><div class="content">I would also love to use it this way in Go. Currently we dump SQLite compatible schema to use for SQLite powered integration tests even though we use postgres when live. It allows us to have zero dependency sub-second integration tests using a real database. Being able to use postgres would be even better, allowing us to test functionality requiring PG specific functionality like full text search.</div><br/><div id="41226025" class="c"><input type="checkbox" id="c-41226025" checked=""/><div class="controls bullet"><span class="by">FlyingSnake</span><span>|</span><a href="#41225523">root</a><span>|</span><a href="#41225840">parent</a><span>|</span><a href="#41226012">next</a><span>|</span><label class="collapse" for="c-41226025">[-]</label><label class="expand" for="c-41226025">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;m bothering the PGLite team a lot to help us enable this :-)<p>We have different options like embedded-postgres or integreSQL, but none match the simplicity of PGLite. I hope this wish comes true soon.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;fergusstrange&#x2F;embedded-postgres&#x2F;tree&#x2F;master">https:&#x2F;&#x2F;github.com&#x2F;fergusstrange&#x2F;embedded-postgres&#x2F;tree&#x2F;mast...</a><p><a href="https:&#x2F;&#x2F;github.com&#x2F;allaboutapps&#x2F;integresql">https:&#x2F;&#x2F;github.com&#x2F;allaboutapps&#x2F;integresql</a></div><br/><div id="41227363" class="c"><input type="checkbox" id="c-41227363" checked=""/><div class="controls bullet"><span class="by">koeng</span><span>|</span><a href="#41225523">root</a><span>|</span><a href="#41226025">parent</a><span>|</span><a href="#41226012">next</a><span>|</span><label class="collapse" for="c-41227363">[-]</label><label class="expand" for="c-41227363">[1 more]</label></div><br/><div class="children"><div class="content">What is the problem with <a href="https:&#x2F;&#x2F;github.com&#x2F;fergusstrange&#x2F;embedded-postgres&#x2F;tree&#x2F;master?tab=readme-ov-file">https:&#x2F;&#x2F;github.com&#x2F;fergusstrange&#x2F;embedded-postgres&#x2F;tree&#x2F;mast...</a> ?</div><br/></div></div></div></div><div id="41226012" class="c"><input type="checkbox" id="c-41226012" checked=""/><div class="controls bullet"><span class="by">koeng</span><span>|</span><a href="#41225523">root</a><span>|</span><a href="#41225840">parent</a><span>|</span><a href="#41226025">prev</a><span>|</span><a href="#41226651">next</a><span>|</span><label class="collapse" for="c-41226012">[-]</label><label class="expand" for="c-41226012">[1 more]</label></div><br/><div class="children"><div class="content">I do exactly the same thing. I’m even running SQLite in wasm so I don’t have any C dependencies. Switching out for Postgres would be awesome</div><br/></div></div></div></div></div></div><div id="41226651" class="c"><input type="checkbox" id="c-41226651" checked=""/><div class="controls bullet"><span class="by">satvikpendem</span><span>|</span><a href="#41225523">prev</a><span>|</span><a href="#41225134">next</a><span>|</span><label class="collapse" for="c-41226651">[-]</label><label class="expand" for="c-41226651">[3 more]</label></div><br/><div class="children"><div class="content">Congrats on the Show HN. I follow the ElectricSQL Discord server and I was distinctly interested in this but for other languages than TypeScript, so it&#x27;s nice to see that making it language independent is high on your list. I also saw that ElectricSQL is being rewritten due to architectural changes, does that impact PGlite at all or are they separate projects now? What is the relationship between PGlite and ElectricSQL as well, just curious?<p>Also, fun etymological thing, SQLite is actually SQL-ite, as in, urbanite, not SQ-Lite, but due to rebracketing [0] and libfixing [1], now people seem to use the -lite suffix rather than the -ite one, presumably because <i>lite</i> actually implies something whereas <i>ite</i> would not, as much. It&#x27;s like how helicopter is actually <i>helic</i> and <i>opter</i>, a helical wing that spins, but now people think of it as <i>heli</i> and <i>copter</i>, calling other things related to it like helipad, or quadcopter, as Wikipedia states.<p>[0] <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Rebracketing" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Rebracketing</a><p>[1] <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Libfix" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Libfix</a></div><br/><div id="41226698" class="c"><input type="checkbox" id="c-41226698" checked=""/><div class="controls bullet"><span class="by">samwillis</span><span>|</span><a href="#41226651">parent</a><span>|</span><a href="#41225134">next</a><span>|</span><label class="collapse" for="c-41226698">[-]</label><label class="expand" for="c-41226698">[2 more]</label></div><br/><div class="children"><div class="content">Hey, yes, PGlite and Electric sync are separate projects, but we are very much building PGlite as a sync target for Electric.<p>The changes we are making with Electric is towards a more loosely coupled stack, rather than the tightly integrated stack we had before. PGlite is one possible client store for Electric sync, and fulfils the use case where you want to have a full SQL database on the client along with (potentially) the same schema on client and server.<p>The name is (obviously) a nod to SQLite, which goes without saying is an incredible database. We went with the small &quot;l&quot; in the name to add a slight differentiator and a nod towards &quot;light&quot;, and we are a light weight Postgres.</div><br/><div id="41226801" class="c"><input type="checkbox" id="c-41226801" checked=""/><div class="controls bullet"><span class="by">zooq_ai</span><span>|</span><a href="#41226651">root</a><span>|</span><a href="#41226698">parent</a><span>|</span><a href="#41225134">next</a><span>|</span><label class="collapse" for="c-41226801">[-]</label><label class="expand" for="c-41226801">[1 more]</label></div><br/><div class="children"><div class="content">what kind of data load are we talking here? I know it gets stored locally. So, is it limited by my local disk size.<p>How will it perform if I have 1TB of data?</div><br/></div></div></div></div></div></div><div id="41225134" class="c"><input type="checkbox" id="c-41225134" checked=""/><div class="controls bullet"><span class="by">saurik</span><span>|</span><a href="#41226651">prev</a><span>|</span><a href="#41227079">next</a><span>|</span><label class="collapse" for="c-41225134">[-]</label><label class="expand" for="c-41225134">[3 more]</label></div><br/><div class="children"><div class="content">Does there happen to be a native analog to this? So like, if I eventually want some kind of native app, I wouldn&#x27;t have to throw away the architecture entirely and start over? I only see mention of the WASM version of this in the website&#x2F;docs.</div><br/><div id="41225185" class="c"><input type="checkbox" id="c-41225185" checked=""/><div class="controls bullet"><span class="by">samwillis</span><span>|</span><a href="#41225134">parent</a><span>|</span><a href="#41227079">next</a><span>|</span><label class="collapse" for="c-41225185">[-]</label><label class="expand" for="c-41225185">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s planned.<p>We want to extract the core changes to Postgres that we had to make and create a &quot;libpglite&quot; C lib that can be linked to from any language&#x2F;platform.<p>Support important for React Native, as it doesn&#x27;t have WASM support.</div><br/><div id="41227084" class="c"><input type="checkbox" id="c-41227084" checked=""/><div class="controls bullet"><span class="by">nikki93</span><span>|</span><a href="#41225134">root</a><span>|</span><a href="#41225185">parent</a><span>|</span><a href="#41227079">next</a><span>|</span><label class="collapse" for="c-41227084">[-]</label><label class="expand" for="c-41227084">[1 more]</label></div><br/><div class="children"><div class="content">This would be nice also to have an API that&#x27;s usable from C&#x2F;C++ code running in Wasm. I see libraries often do this where they expose a C&#x2F;C++ library like Postgres to Wasm and the main &#x2F; documented API is JS and you have to dig a bit to find the C&#x2F;C++ API if it&#x27;s possible to access it that way.</div><br/></div></div></div></div></div></div><div id="41227079" class="c"><input type="checkbox" id="c-41227079" checked=""/><div class="controls bullet"><span class="by">herpdyderp</span><span>|</span><a href="#41225134">prev</a><span>|</span><a href="#41225416">next</a><span>|</span><label class="collapse" for="c-41227079">[-]</label><label class="expand" for="c-41227079">[3 more]</label></div><br/><div class="children"><div class="content">What&#x27;s the equivalent Postgres version? Meaning, if I wanted to make sure my app that is currently using a Postgres Docker image is compatible with PGlite before switching, which version of Postgres should my Docker image be on?<p>I see &quot;PostgreSQL 15devel&quot; in a screenshot so I&#x27;m assuming that means v15 but explicit documentation on current and future Postgres version usage would be very nice. For example, how will I know when (if) you update to v16?</div><br/><div id="41227138" class="c"><input type="checkbox" id="c-41227138" checked=""/><div class="controls bullet"><span class="by">samwillis</span><span>|</span><a href="#41227079">parent</a><span>|</span><a href="#41225416">next</a><span>|</span><label class="collapse" for="c-41227138">[-]</label><label class="expand" for="c-41227138">[2 more]</label></div><br/><div class="children"><div class="content">Ah, screen shot is out of date. We are on v16.3.</div><br/><div id="41227219" class="c"><input type="checkbox" id="c-41227219" checked=""/><div class="controls bullet"><span class="by">herpdyderp</span><span>|</span><a href="#41227079">root</a><span>|</span><a href="#41227138">parent</a><span>|</span><a href="#41225416">next</a><span>|</span><label class="collapse" for="c-41227219">[-]</label><label class="expand" for="c-41227219">[1 more]</label></div><br/><div class="children"><div class="content">Thanks for the quick response! I&#x27;d love to see a list of PGlite version vs Postgres version somewhere. Regardless though, congrats on launch! For small projects where I won&#x27;t care much which Postgres version I&#x27;m on, I&#x27;ll totally give this a shot.</div><br/></div></div></div></div></div></div><div id="41225416" class="c"><input type="checkbox" id="c-41225416" checked=""/><div class="controls bullet"><span class="by">drzaiusx11</span><span>|</span><a href="#41227079">prev</a><span>|</span><a href="#41225963">next</a><span>|</span><label class="collapse" for="c-41225416">[-]</label><label class="expand" for="c-41225416">[1 more]</label></div><br/><div class="children"><div class="content">Anyone know if something similar is available for MySQL&#x2F;Maria? This is very cool, especially given the tiny size of it</div><br/></div></div><div id="41225963" class="c"><input type="checkbox" id="c-41225963" checked=""/><div class="controls bullet"><span class="by">cpursley</span><span>|</span><a href="#41225416">prev</a><span>|</span><a href="#41225423">next</a><span>|</span><label class="collapse" for="c-41225963">[-]</label><label class="expand" for="c-41225963">[1 more]</label></div><br/><div class="children"><div class="content">Woah, this is neat - insane that it can handle extensions.<p>Just added a new section to my &quot;Postgres Is Enough&quot; gist:<p><a href="https:&#x2F;&#x2F;gist.github.com&#x2F;cpursley&#x2F;c8fb81fe8a7e5df038158bdfe0f06dbb#in-browser--wasm" rel="nofollow">https:&#x2F;&#x2F;gist.github.com&#x2F;cpursley&#x2F;c8fb81fe8a7e5df038158bdfe0f...</a></div><br/></div></div><div id="41225423" class="c"><input type="checkbox" id="c-41225423" checked=""/><div class="controls bullet"><span class="by">metadat</span><span>|</span><a href="#41225963">prev</a><span>|</span><a href="#41225793">next</a><span>|</span><label class="collapse" for="c-41225423">[-]</label><label class="expand" for="c-41225423">[2 more]</label></div><br/><div class="children"><div class="content">How did they manage to fit Postgres in 3MB?</div><br/><div id="41226009" class="c"><input type="checkbox" id="c-41226009" checked=""/><div class="controls bullet"><span class="by">AlexErrant</span><span>|</span><a href="#41225423">parent</a><span>|</span><a href="#41225793">next</a><span>|</span><label class="collapse" for="c-41226009">[-]</label><label class="expand" for="c-41226009">[1 more]</label></div><br/><div class="children"><div class="content">Answered here <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41224295">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41224295</a><p>&gt; You might remember an earlier WASM build[1] that was around ~30MB. The Electric team [2] have gone one step further and created a complete build of Postgres that’s under 3MB.<p>&gt; Their implementation is technically interesting. Postgres is normally multi-process - each client connection is handed to a child process by the postmaster process. In WASM there’s limited&#x2F;no support for process forking and threads. Fortunately, Postgres has a relatively unknown built-in “single user mode” [3] primarily designed for bootstrapping a new database and disaster recovery. Single-user mode only supports a minimal cancel REPL, so PGlite adds wire-protocol support which enables parametrised queries etc.</div><br/></div></div></div></div><div id="41225793" class="c"><input type="checkbox" id="c-41225793" checked=""/><div class="controls bullet"><span class="by">bearjaws</span><span>|</span><a href="#41225423">prev</a><span>|</span><a href="#41227542">next</a><span>|</span><label class="collapse" for="c-41225793">[-]</label><label class="expand" for="c-41225793">[3 more]</label></div><br/><div class="children"><div class="content">PGlite &#x2F; ElectricSQL is definitely something I want to use in a future job.<p>The ability to replicate and subscribe to the changes, all within the browser seems incredibly powerful.<p>Having worked on medical software that runs a 2,000,000+ patient workload that perform refills for chemotherapy&#x2F;HIV&#x2F;immuno drugs, where it was common for people to trample each others work as they ran insurance, called patients etc...<p>We had to roll our own locking system that relied on interval functions (yay IE7) and websockets... This meant when you called the patient, someone running financial assistance would be unable to work on the same profile.<p>I can envision other uses for FTS or even vector search locally, since they are insanely expensive at scale.</div><br/><div id="41227387" class="c"><input type="checkbox" id="c-41227387" checked=""/><div class="controls bullet"><span class="by">TeeWEE</span><span>|</span><a href="#41225793">parent</a><span>|</span><a href="#41227542">next</a><span>|</span><label class="collapse" for="c-41227387">[-]</label><label class="expand" for="c-41227387">[2 more]</label></div><br/><div class="children"><div class="content">That means getting those 2 million patients on every device... Really bad choice for medical software.</div><br/><div id="41229713" class="c"><input type="checkbox" id="c-41229713" checked=""/><div class="controls bullet"><span class="by">thruflo</span><span>|</span><a href="#41225793">root</a><span>|</span><a href="#41227387">parent</a><span>|</span><a href="#41227542">next</a><span>|</span><label class="collapse" for="c-41229713">[-]</label><label class="expand" for="c-41229713">[1 more]</label></div><br/><div class="children"><div class="content">Electric does partial replication. It’s specifically a system for syncing a different subset of data onto each local device.</div><br/></div></div></div></div></div></div><div id="41227542" class="c"><input type="checkbox" id="c-41227542" checked=""/><div class="controls bullet"><span class="by">ZitchDog</span><span>|</span><a href="#41225793">prev</a><span>|</span><a href="#41226052">next</a><span>|</span><label class="collapse" for="c-41227542">[-]</label><label class="expand" for="c-41227542">[5 more]</label></div><br/><div class="children"><div class="content">&gt; it has a reactive &quot;live query&quot; API<p>Very cool! Most of the examples for reactive queries are very basic (only single tables). Do live queries support joins &#x2F; aggregations?</div><br/><div id="41227584" class="c"><input type="checkbox" id="c-41227584" checked=""/><div class="controls bullet"><span class="by">samwillis</span><span>|</span><a href="#41227542">parent</a><span>|</span><a href="#41226052">next</a><span>|</span><label class="collapse" for="c-41227584">[-]</label><label class="expand" for="c-41227584">[4 more]</label></div><br/><div class="children"><div class="content">Yes, they should all work.<p>We save the query as a view and then introspect it to see what tables it depends on. It then uses pg_notify to watch for changes.<p>The plan is to integrate pg_ivm (<a href="https:&#x2F;&#x2F;github.com&#x2F;sraoss&#x2F;pg_ivm">https:&#x2F;&#x2F;github.com&#x2F;sraoss&#x2F;pg_ivm</a>) to make it even more efficient.</div><br/><div id="41232373" class="c"><input type="checkbox" id="c-41232373" checked=""/><div class="controls bullet"><span class="by">netghost</span><span>|</span><a href="#41227542">root</a><span>|</span><a href="#41227584">parent</a><span>|</span><a href="#41230828">next</a><span>|</span><label class="collapse" for="c-41232373">[-]</label><label class="expand" for="c-41232373">[1 more]</label></div><br/><div class="children"><div class="content">Oh! That&#x27;s really clever.
The live queries make this a very compelling tool for some form of local first development.</div><br/></div></div><div id="41230828" class="c"><input type="checkbox" id="c-41230828" checked=""/><div class="controls bullet"><span class="by">ZitchDog</span><span>|</span><a href="#41227542">root</a><span>|</span><a href="#41227584">parent</a><span>|</span><a href="#41232373">prev</a><span>|</span><a href="#41227937">next</a><span>|</span><label class="collapse" for="c-41230828">[-]</label><label class="expand" for="c-41230828">[1 more]</label></div><br/><div class="children"><div class="content">Cool!! Is this available outside of pglite or does it require it for some reason? I could see this being very widely useful.</div><br/></div></div><div id="41227937" class="c"><input type="checkbox" id="c-41227937" checked=""/><div class="controls bullet"><span class="by">cheema33</span><span>|</span><a href="#41227542">root</a><span>|</span><a href="#41227584">parent</a><span>|</span><a href="#41230828">prev</a><span>|</span><a href="#41226052">next</a><span>|</span><label class="collapse" for="c-41227937">[-]</label><label class="expand" for="c-41227937">[1 more]</label></div><br/><div class="children"><div class="content">The existing list of extensions is already quite impressive.  But addition of pg_ivm would really take it to the next level.</div><br/></div></div></div></div></div></div><div id="41226052" class="c"><input type="checkbox" id="c-41226052" checked=""/><div class="controls bullet"><span class="by">FlyingSnake</span><span>|</span><a href="#41227542">prev</a><span>|</span><a href="#41228018">next</a><span>|</span><label class="collapse" for="c-41226052">[-]</label><label class="expand" for="c-41226052">[1 more]</label></div><br/><div class="children"><div class="content">PGLite is a wonderful achievement and I&#x27;ve a fan of it since it&#x27;s early days.<p>If they get it to a stage where other languages apart from JS can use it, it could be revolutionary. The possibilities are limitless.</div><br/></div></div><div id="41228018" class="c"><input type="checkbox" id="c-41228018" checked=""/><div class="controls bullet"><span class="by">cheema33</span><span>|</span><a href="#41226052">prev</a><span>|</span><a href="#41225702">next</a><span>|</span><label class="collapse" for="c-41228018">[-]</label><label class="expand" for="c-41228018">[2 more]</label></div><br/><div class="children"><div class="content">The filesystems page at <a href="https:&#x2F;&#x2F;pglite.dev&#x2F;docs&#x2F;filesystems" rel="nofollow">https:&#x2F;&#x2F;pglite.dev&#x2F;docs&#x2F;filesystems</a> says the following:<p>&gt; &quot;We would recommend using the IndexedDB VFS in the browser at the current time as the OPFS VFS is not supported by Safari.&quot;<p>Is it possible to configure PGLite to use IndexedDB on Safari and OPFS on Chrome &amp; Firefox?</div><br/><div id="41232355" class="c"><input type="checkbox" id="c-41232355" checked=""/><div class="controls bullet"><span class="by">netghost</span><span>|</span><a href="#41228018">parent</a><span>|</span><a href="#41225702">next</a><span>|</span><label class="collapse" for="c-41232355">[-]</label><label class="expand" for="c-41232355">[1 more]</label></div><br/><div class="children"><div class="content">Looks like you configure it with the connection string, so assuming you can just detect whether OPFS is available or swap based on the browser you should be fine.</div><br/></div></div></div></div><div id="41225702" class="c"><input type="checkbox" id="c-41225702" checked=""/><div class="controls bullet"><span class="by">AlexErrant</span><span>|</span><a href="#41228018">prev</a><span>|</span><a href="#41226445">next</a><span>|</span><label class="collapse" for="c-41225702">[-]</label><label class="expand" for="c-41225702">[3 more]</label></div><br/><div class="children"><div class="content">Bug report? On <a href="https:&#x2F;&#x2F;pglite.dev&#x2F;repl&#x2F;" rel="nofollow">https:&#x2F;&#x2F;pglite.dev&#x2F;repl&#x2F;</a> running `SELECT &#x27;a fat cat sat on a mat and ate a fat rat&#x27;::tsvector @@ &#x27;cat &amp; rat&#x27;::tsquery;` works, which is cool.<p>However, running `SELECT to_tsvector(&#x27;fat cats ate fat rats&#x27;) @@ to_tsquery(&#x27;fat &amp; rat&#x27;);` fails with `y is not a function`. Then trying to run the first query yields `null`, which is weird. I can open an issue if you want :)</div><br/><div id="41225813" class="c"><input type="checkbox" id="c-41225813" checked=""/><div class="controls bullet"><span class="by">kylemathews</span><span>|</span><a href="#41225702">parent</a><span>|</span><a href="#41226445">next</a><span>|</span><label class="collapse" for="c-41225813">[-]</label><label class="expand" for="c-41225813">[2 more]</label></div><br/><div class="children"><div class="content">Posting the issue to GitHub would be great!</div><br/><div id="41226117" class="c"><input type="checkbox" id="c-41226117" checked=""/><div class="controls bullet"><span class="by">AlexErrant</span><span>|</span><a href="#41225702">root</a><span>|</span><a href="#41225813">parent</a><span>|</span><a href="#41226445">next</a><span>|</span><label class="collapse" for="c-41226117">[-]</label><label class="expand" for="c-41226117">[1 more]</label></div><br/><div class="children"><div class="content">ack</div><br/></div></div></div></div></div></div><div id="41226445" class="c"><input type="checkbox" id="c-41226445" checked=""/><div class="controls bullet"><span class="by">NetOpWibby</span><span>|</span><a href="#41225702">prev</a><span>|</span><a href="#41229108">next</a><span>|</span><label class="collapse" for="c-41226445">[-]</label><label class="expand" for="c-41226445">[1 more]</label></div><br/><div class="children"><div class="content">This is exciting. My database of choice is EdgeDB, which uses Postgres under the hood. It&#x27;s not so far-fetched to imagine EdgeDB in the browser now!</div><br/></div></div><div id="41229108" class="c"><input type="checkbox" id="c-41229108" checked=""/><div class="controls bullet"><span class="by">ChrisArchitect</span><span>|</span><a href="#41226445">prev</a><span>|</span><a href="#41225935">next</a><span>|</span><label class="collapse" for="c-41229108">[-]</label><label class="expand" for="c-41229108">[1 more]</label></div><br/><div class="children"><div class="content">Related:<p>Subabase announcement post<p><i>Postgres.new: In-browser Postgres with an AI interface</i><p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41224286">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41224286</a></div><br/></div></div><div id="41225935" class="c"><input type="checkbox" id="c-41225935" checked=""/><div class="controls bullet"><span class="by">srameshc</span><span>|</span><a href="#41229108">prev</a><span>|</span><a href="#41227029">next</a><span>|</span><label class="collapse" for="c-41225935">[-]</label><label class="expand" for="c-41225935">[2 more]</label></div><br/><div class="children"><div class="content">If I understand correctly, this is like SQLite, but Postgres. I love SQLite, but sometimes I need a little more. So, no more saving Date as text and we have arrays, jsonb etc and all the good stuff from Postgres. Am I right ?</div><br/><div id="41226016" class="c"><input type="checkbox" id="c-41226016" checked=""/><div class="controls bullet"><span class="by">samwillis</span><span>|</span><a href="#41225935">parent</a><span>|</span><a href="#41227029">next</a><span>|</span><label class="collapse" for="c-41226016">[-]</label><label class="expand" for="c-41226016">[1 more]</label></div><br/><div class="children"><div class="content">Exactly, all your favourite PG types, plus any that come with extensions such as vectors with pgvector.<p>We are working on PostGIS to, which will bring the geo types to PGlite.</div><br/></div></div></div></div><div id="41227029" class="c"><input type="checkbox" id="c-41227029" checked=""/><div class="controls bullet"><span class="by">ggregoire</span><span>|</span><a href="#41225935">prev</a><span>|</span><a href="#41227860">next</a><span>|</span><label class="collapse" for="c-41227029">[-]</label><label class="expand" for="c-41227029">[1 more]</label></div><br/><div class="children"><div class="content">I was gonna ask what do people use to sync their local pg with their remote pg, but turns out, that&#x27;s exactly what the authors are building. Cool stuff, and gratz on pglite!</div><br/></div></div><div id="41227860" class="c"><input type="checkbox" id="c-41227860" checked=""/><div class="controls bullet"><span class="by">sam_perez</span><span>|</span><a href="#41227029">prev</a><span>|</span><a href="#41225833">next</a><span>|</span><label class="collapse" for="c-41227860">[-]</label><label class="expand" for="c-41227860">[1 more]</label></div><br/><div class="children"><div class="content">Oh cool, how would you compare this to DuckDB?</div><br/></div></div><div id="41225833" class="c"><input type="checkbox" id="c-41225833" checked=""/><div class="controls bullet"><span class="by">isoprophlex</span><span>|</span><a href="#41227860">prev</a><span>|</span><a href="#41225340">next</a><span>|</span><label class="collapse" for="c-41225833">[-]</label><label class="expand" for="c-41225833">[8 more]</label></div><br/><div class="children"><div class="content">That&#x27;s great! Corpo beancounters want us to move off docker on EC2 onto bare metal, making both dev and deploy experience terrible. This will help ease pain!</div><br/><div id="41227965" class="c"><input type="checkbox" id="c-41227965" checked=""/><div class="controls bullet"><span class="by">cheema33</span><span>|</span><a href="#41225833">parent</a><span>|</span><a href="#41228296">next</a><span>|</span><label class="collapse" for="c-41227965">[-]</label><label class="expand" for="c-41227965">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Corpo beancounters want us to move off docker on EC2 onto bare metal<p>There is a very good reason for it.  EC2 is way way overpriced.</div><br/></div></div><div id="41228296" class="c"><input type="checkbox" id="c-41228296" checked=""/><div class="controls bullet"><span class="by">postalrat</span><span>|</span><a href="#41225833">parent</a><span>|</span><a href="#41227965">prev</a><span>|</span><a href="#41226425">next</a><span>|</span><label class="collapse" for="c-41228296">[-]</label><label class="expand" for="c-41228296">[1 more]</label></div><br/><div class="children"><div class="content">And you can&#x27;t have your own docker on bare metal?</div><br/></div></div><div id="41226425" class="c"><input type="checkbox" id="c-41226425" checked=""/><div class="controls bullet"><span class="by">samstave</span><span>|</span><a href="#41225833">parent</a><span>|</span><a href="#41228296">prev</a><span>|</span><a href="#41225340">next</a><span>|</span><label class="collapse" for="c-41226425">[-]</label><label class="expand" for="c-41226425">[5 more]</label></div><br/><div class="children"><div class="content">Weird question: Since you mention &#x27;bare-metal&#x27; and this is &quot;enables you to run Postgres in the browser&quot;<p>UH, could you do:<p>bare_metal --&gt; HeadlessGPU-Chrome --&gt; PGLite with whatever orchesrtration and you have a an automatable &#x27;browser&#x27; that can scrape&#x2F;store&#x2F;logic&#x2F;log&#x2F;be-config&#x27;d from&#x2F;lookup directly to your browserDB<p>and maybe run a fastAPI ontop of such that you have a full stack, baremetal, headless, browserDB&#x2F;fastAPI&#x2F;endpoint processing doohicky?<p>Or does this sound dumb?<p>Because this is exactly what I actually need and am attempting to create - but its beyond my capabilities in any functional&#x2F;elegant implementation...<p><a href="https:&#x2F;&#x2F;www.browserless.io&#x2F;blog&#x2F;browserless-gpu-instances" rel="nofollow">https:&#x2F;&#x2F;www.browserless.io&#x2F;blog&#x2F;browserless-gpu-instances</a><p><a href="https:&#x2F;&#x2F;github.com&#x2F;dhamaniasad&#x2F;HeadlessBrowsers">https:&#x2F;&#x2F;github.com&#x2F;dhamaniasad&#x2F;HeadlessBrowsers</a></div><br/><div id="41227023" class="c"><input type="checkbox" id="c-41227023" checked=""/><div class="controls bullet"><span class="by">isoprophlex</span><span>|</span><a href="#41225833">root</a><span>|</span><a href="#41226425">parent</a><span>|</span><a href="#41226448">next</a><span>|</span><label class="collapse" for="c-41227023">[-]</label><label class="expand" for="c-41227023">[1 more]</label></div><br/><div class="children"><div class="content">It doesn&#x27;t need so many moving parts imo. I was thinking to just grab the npm package and slap a tiny TS  interface on top of that to mock my bespoke vector db. In the vein of  <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41225080">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41225080</a></div><br/></div></div><div id="41226448" class="c"><input type="checkbox" id="c-41226448" checked=""/><div class="controls bullet"><span class="by">samwillis</span><span>|</span><a href="#41225833">root</a><span>|</span><a href="#41226425">parent</a><span>|</span><a href="#41227023">prev</a><span>|</span><a href="#41225340">next</a><span>|</span><label class="collapse" for="c-41226448">[-]</label><label class="expand" for="c-41226448">[3 more]</label></div><br/><div class="children"><div class="content">PGlite also runs in Node and Bun, so you can easily run it on backend servers. (couldn&#x27;t fit that in the HN headline)</div><br/><div id="41226547" class="c"><input type="checkbox" id="c-41226547" checked=""/><div class="controls bullet"><span class="by">samstave</span><span>|</span><a href="#41225833">root</a><span>|</span><a href="#41226448">parent</a><span>|</span><a href="#41225340">next</a><span>|</span><label class="collapse" for="c-41226547">[-]</label><label class="expand" for="c-41226547">[2 more]</label></div><br/><div class="children"><div class="content">Sorry if this is in the RTFM;<p>So, you can basically use this to deploy a portable fully enclosed little webapp.<p>Basically any little web-app that has a bunch of backend DB:<p>A sales USB drive that loads a page that then has the pglite of all your product stuff on there. and you can just provide custom buttons to slurp data either way.<p>Utils to yank a [data] from a postgress server, onto your little sneaker-DB-USB -- then carry it over and to a DB function...<p>A little util USB that you already have it setup such that you can curl a bunch of data directly into tables on your little headless-browser-pglite minion?<p>Full Kisok DB USB (SSD) upgrades.<p>Basically - running a pico headless postgress DB with a webUI?<p>---
aside:<p>samwillis March 2008<p>samstave March 2009<p>:-)<p>---<p>WOW:<p><a href="https:&#x2F;&#x2F;i.imgur.com&#x2F;6YLwEuj.png" rel="nofollow">https:&#x2F;&#x2F;i.imgur.com&#x2F;6YLwEuj.png</a><p>--<p>Yeah this is pretty dopes.</div><br/><div id="41226782" class="c"><input type="checkbox" id="c-41226782" checked=""/><div class="controls bullet"><span class="by">samwillis</span><span>|</span><a href="#41225833">root</a><span>|</span><a href="#41226547">parent</a><span>|</span><a href="#41225340">next</a><span>|</span><label class="collapse" for="c-41226782">[-]</label><label class="expand" for="c-41226782">[1 more]</label></div><br/><div class="children"><div class="content">Yep exactly, either in the browser, or using something like Electron to package it as a desktop app.<p>:-)</div><br/></div></div></div></div></div></div></div></div></div></div><div id="41225340" class="c"><input type="checkbox" id="c-41225340" checked=""/><div class="controls bullet"><span class="by">batmansmk</span><span>|</span><a href="#41225833">prev</a><span>|</span><a href="#41226199">next</a><span>|</span><label class="collapse" for="c-41225340">[-]</label><label class="expand" for="c-41225340">[4 more]</label></div><br/><div class="children"><div class="content">Pretty awesome. Would love to use it in CI and locally for our PG product.
We use Prisma, so I guess we have to wait for the connector that looks like pg to plug it in.</div><br/><div id="41225386" class="c"><input type="checkbox" id="c-41225386" checked=""/><div class="controls bullet"><span class="by">creativedg</span><span>|</span><a href="#41225340">parent</a><span>|</span><a href="#41226243">next</a><span>|</span><label class="collapse" for="c-41225386">[-]</label><label class="expand" for="c-41225386">[1 more]</label></div><br/><div class="children"><div class="content">I confirm it works perfectly in CI and locally. I&#x27;m using it in CI and locally.<p>Not sure about Prisma but it works with Drizzle ORM.</div><br/></div></div><div id="41226243" class="c"><input type="checkbox" id="c-41226243" checked=""/><div class="controls bullet"><span class="by">samwillis</span><span>|</span><a href="#41225340">parent</a><span>|</span><a href="#41225386">prev</a><span>|</span><a href="#41225356">next</a><span>|</span><label class="collapse" for="c-41226243">[-]</label><label class="expand" for="c-41226243">[1 more]</label></div><br/><div class="children"><div class="content">pg-gateway from Supabase does exactly this, you can start a PGlite and then connect to it from any standard PG client: <a href="https:&#x2F;&#x2F;github.com&#x2F;supabase-community&#x2F;pg-gateway">https:&#x2F;&#x2F;github.com&#x2F;supabase-community&#x2F;pg-gateway</a></div><br/></div></div><div id="41225356" class="c"><input type="checkbox" id="c-41225356" checked=""/><div class="controls bullet"><span class="by">dboreham</span><span>|</span><a href="#41225340">parent</a><span>|</span><a href="#41226243">prev</a><span>|</span><a href="#41226199">next</a><span>|</span><label class="collapse" for="c-41225356">[-]</label><label class="expand" for="c-41225356">[1 more]</label></div><br/><div class="children"><div class="content">Curious, what&#x27;s the benefit vs running real PG in a container for this specific use case?</div><br/></div></div></div></div><div id="41226199" class="c"><input type="checkbox" id="c-41226199" checked=""/><div class="controls bullet"><span class="by">loevborg</span><span>|</span><a href="#41225340">prev</a><span>|</span><a href="#41226276">next</a><span>|</span><label class="collapse" for="c-41226199">[-]</label><label class="expand" for="c-41226199">[2 more]</label></div><br/><div class="children"><div class="content">PGLite is amazing for integration testing of queries against a real in-memory db.<p>Is it possible to use PGLite for that purpose in non-JS environments, like e.g. golang?</div><br/><div id="41226268" class="c"><input type="checkbox" id="c-41226268" checked=""/><div class="controls bullet"><span class="by">samwillis</span><span>|</span><a href="#41226199">parent</a><span>|</span><a href="#41226276">next</a><span>|</span><label class="collapse" for="c-41226268">[-]</label><label class="expand" for="c-41226268">[1 more]</label></div><br/><div class="children"><div class="content">You can use pg-gateway from supabase (<a href="https:&#x2F;&#x2F;github.com&#x2F;supabase-community&#x2F;pg-gateway">https:&#x2F;&#x2F;github.com&#x2F;supabase-community&#x2F;pg-gateway</a>) to start a PGlite and connect form any standard PG client.<p>Support for other languages is high on my list, the plan is to build a &quot;libpglite&quot; as a native C lib and a WASI build that can run in any WASM runtime.</div><br/></div></div></div></div><div id="41226276" class="c"><input type="checkbox" id="c-41226276" checked=""/><div class="controls bullet"><span class="by">Kinrany</span><span>|</span><a href="#41226199">prev</a><span>|</span><a href="#41228094">next</a><span>|</span><label class="collapse" for="c-41226276">[-]</label><label class="expand" for="c-41226276">[2 more]</label></div><br/><div class="children"><div class="content">Can it run in Node while still persisting data to disk?</div><br/><div id="41226312" class="c"><input type="checkbox" id="c-41226312" checked=""/><div class="controls bullet"><span class="by">samwillis</span><span>|</span><a href="#41226276">parent</a><span>|</span><a href="#41228094">next</a><span>|</span><label class="collapse" for="c-41226312">[-]</label><label class="expand" for="c-41226312">[1 more]</label></div><br/><div class="children"><div class="content">Yes, we can persistent to the normal filesystem with Node and Bun, and to IndexedDB and OPFS in the browser: <a href="https:&#x2F;&#x2F;pglite.dev&#x2F;docs&#x2F;filesystems" rel="nofollow">https:&#x2F;&#x2F;pglite.dev&#x2F;docs&#x2F;filesystems</a></div><br/></div></div></div></div><div id="41228094" class="c"><input type="checkbox" id="c-41228094" checked=""/><div class="controls bullet"><span class="by">sabr</span><span>|</span><a href="#41226276">prev</a><span>|</span><a href="#41225552">next</a><span>|</span><label class="collapse" for="c-41228094">[-]</label><label class="expand" for="c-41228094">[1 more]</label></div><br/><div class="children"><div class="content">This is amazing! Will there be something like Litestream&#x2F;rqlite for PGlite?</div><br/></div></div><div id="41225552" class="c"><input type="checkbox" id="c-41225552" checked=""/><div class="controls bullet"><span class="by">makkesk8</span><span>|</span><a href="#41228094">prev</a><span>|</span><a href="#41225519">next</a><span>|</span><label class="collapse" for="c-41225552">[-]</label><label class="expand" for="c-41225552">[5 more]</label></div><br/><div class="children"><div class="content">Awesome work! A killer feature of sqlite that I would love to see in pglite would be javascript window functions.</div><br/><div id="41226159" class="c"><input type="checkbox" id="c-41226159" checked=""/><div class="controls bullet"><span class="by">isoprophlex</span><span>|</span><a href="#41225552">parent</a><span>|</span><a href="#41225519">next</a><span>|</span><label class="collapse" for="c-41226159">[-]</label><label class="expand" for="c-41226159">[4 more]</label></div><br/><div class="children"><div class="content">Huh, can you do that? I can&#x27;t google anything just now, got a link to some docs about js window functions in sqlite?! Sounds very powerful</div><br/><div id="41226858" class="c"><input type="checkbox" id="c-41226858" checked=""/><div class="controls bullet"><span class="by">AlexErrant</span><span>|</span><a href="#41225552">root</a><span>|</span><a href="#41226159">parent</a><span>|</span><a href="#41225519">next</a><span>|</span><label class="collapse" for="c-41226858">[-]</label><label class="expand" for="c-41226858">[3 more]</label></div><br/><div class="children"><div class="content">Maybe they&#x27;re talking about <a href="https:&#x2F;&#x2F;www.sqlite.org&#x2F;appfunc.html" rel="nofollow">https:&#x2F;&#x2F;www.sqlite.org&#x2F;appfunc.html</a> where you can define a window fn in the (perhaps JS) app via `sqlite3_create_window_function()`.</div><br/><div id="41226940" class="c"><input type="checkbox" id="c-41226940" checked=""/><div class="controls bullet"><span class="by">samwillis</span><span>|</span><a href="#41225552">root</a><span>|</span><a href="#41226858">parent</a><span>|</span><a href="#41225519">next</a><span>|</span><label class="collapse" for="c-41226940">[-]</label><label class="expand" for="c-41226940">[2 more]</label></div><br/><div class="children"><div class="content">This is high on my list, I have a few ideas how to do it, one being a &quot;PL&#x2F;JS&quot; extension that calls out to the host JS environment to run JS functions.</div><br/><div id="41227059" class="c"><input type="checkbox" id="c-41227059" checked=""/><div class="controls bullet"><span class="by">isoprophlex</span><span>|</span><a href="#41225552">root</a><span>|</span><a href="#41226940">parent</a><span>|</span><a href="#41225519">next</a><span>|</span><label class="collapse" for="c-41227059">[-]</label><label class="expand" for="c-41227059">[1 more]</label></div><br/><div class="children"><div class="content">I think PG is relatively ideal for that. In a classical data warehousing&#x2F;ETL context, I&#x27;ve called python directly from inside PG, which has its quirks but is pretty doable, all in all...<p><a href="https:&#x2F;&#x2F;www.postgresql.org&#x2F;docs&#x2F;current&#x2F;plpython.html" rel="nofollow">https:&#x2F;&#x2F;www.postgresql.org&#x2F;docs&#x2F;current&#x2F;plpython.html</a></div><br/></div></div></div></div></div></div></div></div></div></div><div id="41225519" class="c"><input type="checkbox" id="c-41225519" checked=""/><div class="controls bullet"><span class="by">namanyayg</span><span>|</span><a href="#41225552">prev</a><span>|</span><a href="#41226554">next</a><span>|</span><label class="collapse" for="c-41225519">[-]</label><label class="expand" for="c-41225519">[4 more]</label></div><br/><div class="children"><div class="content">How does the performance compare to actual postgres?</div><br/><div id="41226152" class="c"><input type="checkbox" id="c-41226152" checked=""/><div class="controls bullet"><span class="by">samwillis</span><span>|</span><a href="#41225519">parent</a><span>|</span><a href="#41226554">next</a><span>|</span><label class="collapse" for="c-41226152">[-]</label><label class="expand" for="c-41226152">[3 more]</label></div><br/><div class="children"><div class="content">WASM is inherently slower than native, but it does very well!<p>We have some micro-benchmarks here that have some baseline native numbers to compare to: <a href="https:&#x2F;&#x2F;pglite.dev&#x2F;benchmarks" rel="nofollow">https:&#x2F;&#x2F;pglite.dev&#x2F;benchmarks</a><p>Much of the complexity with WASM in the browser actually comes down to the performance of the underlying VFS for storage. When running in-memory or using the OPFS VFSs both PGlite and the WASM SQLite builds are very performant, absolutely capable of handing the embedded use case.</div><br/><div id="41229412" class="c"><input type="checkbox" id="c-41229412" checked=""/><div class="controls bullet"><span class="by">jfeiwell</span><span>|</span><a href="#41225519">root</a><span>|</span><a href="#41226152">parent</a><span>|</span><a href="#41226554">next</a><span>|</span><label class="collapse" for="c-41229412">[-]</label><label class="expand" for="c-41229412">[2 more]</label></div><br/><div class="children"><div class="content">Any benchmarks against redis?</div><br/><div id="41229646" class="c"><input type="checkbox" id="c-41229646" checked=""/><div class="controls bullet"><span class="by">samwillis</span><span>|</span><a href="#41225519">root</a><span>|</span><a href="#41229412">parent</a><span>|</span><a href="#41226554">next</a><span>|</span><label class="collapse" for="c-41229646">[-]</label><label class="expand" for="c-41229646">[1 more]</label></div><br/><div class="children"><div class="content">Redis is a very different database, I&#x27;m not sure you could do a comparison that was meaningful in any way.</div><br/></div></div></div></div></div></div></div></div><div id="41226554" class="c"><input type="checkbox" id="c-41226554" checked=""/><div class="controls bullet"><span class="by">non-</span><span>|</span><a href="#41225519">prev</a><span>|</span><label class="collapse" for="c-41226554">[-]</label><label class="expand" for="c-41226554">[2 more]</label></div><br/><div class="children"><div class="content">Would really like to see a benchmarking analysis vs SQLite. How do they compare on memory usage and overhead?<p>I already default to SQLite for new side projects with the idea that &quot;eventually I&#x27;ll migrate to Postgres if this project gets legs&quot;, so switching to PGlite feels like a no-brainer as long as it&#x27;s not going to weigh my apps down or force me to upgrade out of whatever entry-level server solution I&#x27;m using is for a given project.<p>EDIT: Found the benchmarks here <a href="https:&#x2F;&#x2F;pglite.dev&#x2F;benchmarks" rel="nofollow">https:&#x2F;&#x2F;pglite.dev&#x2F;benchmarks</a></div><br/><div id="41226652" class="c"><input type="checkbox" id="c-41226652" checked=""/><div class="controls bullet"><span class="by">samwillis</span><span>|</span><a href="#41226554">parent</a><span>|</span><label class="collapse" for="c-41226652">[-]</label><label class="expand" for="c-41226652">[1 more]</label></div><br/><div class="children"><div class="content">Ah, you beat me to it, yes those benchmarks give you a good overview of baseline performance. But it&#x27;a a little nuanced as the underlying VFS performance is very significant.<p>Both PGlite and SQLite in the browser is incredible. The latter is a little lighter weight and more mature, but PGlite brings with it all the type support and extensions that you love with Postgres. It comes down to what works best for your project.</div><br/></div></div></div></div></div></div></div></div></div></body></html>