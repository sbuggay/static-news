<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1684054842543" as="style"/><link rel="stylesheet" href="styles.css?v=1684054842543"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/ryanmcgrath/cacao">macOS Apps in Rust</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>debdut</span> | <span>25 comments</span></div><br/><div><div id="35935384" class="c"><input type="checkbox" id="c-35935384" checked=""/><div class="controls bullet"><span class="by">apatheticonion</span><span>|</span><a href="#35935357">next</a><span>|</span><label class="collapse" for="c-35935384">[-]</label><label class="expand" for="c-35935384">[8 more]</label></div><br/><div class="children"><div class="content">Pretty cool project, seems like it&#x27;s becoming more realistic to write cross platform native desktop applications with OS-specific GUIs in Rust.<p>It&#x27;s not too far from the write-once-run-everywhere philosophy of React native, Electron and similar. One could write their UI state and application logic once while maintaining 3 entry points using the various platform GUI bindings (gtk-rs, cacao, win32?) to represent the UI state.<p>This has the advantage of a project feeling natural to the platform while still allowing for code reuse between platforms - though you would still need to rewrite widgets&#x2F;components for each platform independently.<p>Something that isn&#x27;t talked about much in the GUI world (outside of mobile development) is how essential multi-threading is to a great application experience. After all, you can&#x27;t horizontally scale a client device so it&#x27;s important that an application is able to maximize its use of the available hardware. Rust&#x27;s borrow checker&#x2F;ownership model eliminates dangerous multi-threaded code which makes it practical to write highly efficient GUI applications.<p>Could be good for projects like cross-platform terminal emulators or code editors.</div><br/><div id="35935692" class="c"><input type="checkbox" id="c-35935692" checked=""/><div class="controls bullet"><span class="by">riceart</span><span>|</span><a href="#35935384">parent</a><span>|</span><a href="#35935394">next</a><span>|</span><label class="collapse" for="c-35935692">[-]</label><label class="expand" for="c-35935692">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Something that isn&#x27;t talked about much in the GUI world (outside of mobile development) is how essential multi-threading is to a great application experience.<p>Yes it is. Heavyweight desktop GUI applications like DAWs or CAD or image&#x2F;video editing are old established technology.<p>&gt; This has the advantage of a project feeling natural to the platform while still allowing for code reuse between platforms<p>Having written cross platform native applications: This is a pain in the ass to do well - and there isn’t a particular reason this hasn’t been doable in C&#x2F;C++ since forever - Rust isn’t some silver bullet. “Abstracting” away the native GUI&#x2F;UX seems to be a common pitfall for junior devs - how hard can it be they think - then they learn why Qt exists.<p>&gt; It&#x27;s not too far from the write-once-run-everywhere philosophy of React native, Electron and similar.<p>Electron is about as far removed from the philosophy of targeting platform native toolkits as one can get.</div><br/></div></div><div id="35935394" class="c"><input type="checkbox" id="c-35935394" checked=""/><div class="controls bullet"><span class="by">hot_gril</span><span>|</span><a href="#35935384">parent</a><span>|</span><a href="#35935692">prev</a><span>|</span><a href="#35936037">next</a><span>|</span><label class="collapse" for="c-35935394">[-]</label><label class="expand" for="c-35935394">[5 more]</label></div><br/><div class="children"><div class="content">The GUI bindings are usually the hard part.</div><br/><div id="35935524" class="c"><input type="checkbox" id="c-35935524" checked=""/><div class="controls bullet"><span class="by">heavyset_go</span><span>|</span><a href="#35935384">root</a><span>|</span><a href="#35935394">parent</a><span>|</span><a href="#35936037">next</a><span>|</span><label class="collapse" for="c-35935524">[-]</label><label class="expand" for="c-35935524">[4 more]</label></div><br/><div class="children"><div class="content">Speaking of, does anyone know how Qt bindings for Rust are these days? Last time I looked, there were several awkward Rust APIs for Qt, suffering in part from the fact that Qt&#x27;s API is inheritance-based.</div><br/><div id="35936380" class="c"><input type="checkbox" id="c-35936380" checked=""/><div class="controls bullet"><span class="by">sbt567</span><span>|</span><a href="#35935384">root</a><span>|</span><a href="#35935524">parent</a><span>|</span><a href="#35935745">next</a><span>|</span><label class="collapse" for="c-35936380">[-]</label><label class="expand" for="c-35936380">[1 more]</label></div><br/><div class="children"><div class="content">There is a recent article about this on r&#x2F;rust <a href="https:&#x2F;&#x2F;blog.logrocket.com&#x2F;build-desktop-app-qt-rust&#x2F;" rel="nofollow">https:&#x2F;&#x2F;blog.logrocket.com&#x2F;build-desktop-app-qt-rust&#x2F;</a></div><br/></div></div><div id="35935745" class="c"><input type="checkbox" id="c-35935745" checked=""/><div class="controls bullet"><span class="by">ThePhysicist</span><span>|</span><a href="#35935384">root</a><span>|</span><a href="#35935524">parent</a><span>|</span><a href="#35936380">prev</a><span>|</span><a href="#35936037">next</a><span>|</span><label class="collapse" for="c-35935745">[-]</label><label class="expand" for="c-35935745">[2 more]</label></div><br/><div class="children"><div class="content">I think it&#x27;s pretty difficult mapping the Qt memory management model to Rust, for the same reason we haven&#x27;t seen working Golang bindings for Qt either. I have some experience with the Python bindings (PySide or PyQt) and both of them use pretty extensive wrapper generator frameworks specially developed for the task (SIP in the case of PyQt, Shiboken in the case of PySide), coming up with something like that is not an easy task at all. And Python is a language that was pretty much intended to act as a foreign function wrapper around low-level languages, while Rust &amp; Golang are not primarily intended to be wrappers for other languages.</div><br/><div id="35936437" class="c"><input type="checkbox" id="c-35936437" checked=""/><div class="controls bullet"><span class="by">foldr</span><span>|</span><a href="#35935384">root</a><span>|</span><a href="#35935745">parent</a><span>|</span><a href="#35936037">next</a><span>|</span><label class="collapse" for="c-35936437">[-]</label><label class="expand" for="c-35936437">[1 more]</label></div><br/><div class="children"><div class="content">&gt; <a href="https:&#x2F;&#x2F;github.com&#x2F;therecipe&#x2F;qt">https:&#x2F;&#x2F;github.com&#x2F;therecipe&#x2F;qt</a><p>Do these not work? (Not a rhetorical question - I haven’t tried them.)</div><br/></div></div></div></div></div></div></div></div><div id="35936037" class="c"><input type="checkbox" id="c-35936037" checked=""/><div class="controls bullet"><span class="by">olliej</span><span>|</span><a href="#35935384">parent</a><span>|</span><a href="#35935394">prev</a><span>|</span><a href="#35935357">next</a><span>|</span><label class="collapse" for="c-35936037">[-]</label><label class="expand" for="c-35936037">[1 more]</label></div><br/><div class="children"><div class="content">You can&#x27;t write good UI apps with cross platform code. The basic idioms of each platform are different.<p>You can write your core application logic once and share it, but you need to have the interaction with the actual UI&#x2F;window manager be per-platform. The reason electron apps are so bad on Mac is not that the core application logic is bad, it&#x27;s that a whole bunch of basic Mac platform behaviors are broken.<p>&quot;modern&quot; cross platform UI toolkits are no better than Java. To paraphrase Ford: &quot;you can do any platform you like, as long as it&#x27;s windows&quot;.<p>[edit: to be very clear, I include &quot;catalyst&quot; in the cross platform toolkits that make noticeably worse apps on Mac. Trying to share a single interface &quot;language&quot; for different platforms just leads to what is at best mediocre UI.]</div><br/></div></div></div></div><div id="35935357" class="c"><input type="checkbox" id="c-35935357" checked=""/><div class="controls bullet"><span class="by">kennywinker</span><span>|</span><a href="#35935384">prev</a><span>|</span><a href="#35935306">next</a><span>|</span><label class="collapse" for="c-35935357">[-]</label><label class="expand" for="c-35935357">[3 more]</label></div><br/><div class="children"><div class="content">&gt; I would be surprised if we didn&#x27;t have another ~5+ years of support<p>Five years would shock me. I’d say more like ten. It’s gonna take a huge concerted effort to get rid of objc in macos, and idk if it’s worth it</div><br/><div id="35935420" class="c"><input type="checkbox" id="c-35935420" checked=""/><div class="controls bullet"><span class="by">jb1991</span><span>|</span><a href="#35935357">parent</a><span>|</span><a href="#35935306">next</a><span>|</span><label class="collapse" for="c-35935420">[-]</label><label class="expand" for="c-35935420">[2 more]</label></div><br/><div class="children"><div class="content">There’s a proposal to allow C++ and Swift to interact in the same way that objc and C++ interact, and if that were to eventually become part of swift then objc’s days are numbered. Right now, one of the most significant reasons to continue using objc is that you don’t have to wrap everything in a C API.</div><br/><div id="35936250" class="c"><input type="checkbox" id="c-35936250" checked=""/><div class="controls bullet"><span class="by">jb1991</span><span>|</span><a href="#35935357">root</a><span>|</span><a href="#35935420">parent</a><span>|</span><a href="#35935306">next</a><span>|</span><label class="collapse" for="c-35936250">[-]</label><label class="expand" for="c-35936250">[1 more]</label></div><br/><div class="children"><div class="content">Forgot the link: <a href="https:&#x2F;&#x2F;www.swift.org&#x2F;cxx-interop-workgroup&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.swift.org&#x2F;cxx-interop-workgroup&#x2F;</a></div><br/></div></div></div></div></div></div><div id="35935306" class="c"><input type="checkbox" id="c-35935306" checked=""/><div class="controls bullet"><span class="by">kitsunesoba</span><span>|</span><a href="#35935357">prev</a><span>|</span><a href="#35935850">next</a><span>|</span><label class="collapse" for="c-35935306">[-]</label><label class="expand" for="c-35935306">[3 more]</label></div><br/><div class="children"><div class="content">Interesting to see that AppKit is fully supported before UIKit, usually it&#x27;s the reverse (if AppKit is supported at all). I suppose it kind of makes sense… the case for sharing a Rust core across platforms is stronger on macOS, because on iOS the optimizations you&#x27;re trading away (such as the native network stack scheduling  requests from apps to fire while the antenna is already awake) have a bigger impact on iDevices.<p>Tangentially related, I&#x27;d to dabble in Rust at some point but the syntax and memory management leave me trepidatious, and I&#x27;m not sure that it&#x27;d be the tool I reach for when developing apps with UIs… from a distance it feels better suited for CLI tools, back ends, and the nuts&#x27;n&#x27;bolts parts under the hood of UI apps. In comparison it makes some tradeoffs but I really enjoy writing UI apps in Swift (albeit in UIKit&#x2F;AppKit — SwiftUI needs more time in the oven).</div><br/><div id="35935706" class="c"><input type="checkbox" id="c-35935706" checked=""/><div class="controls bullet"><span class="by">59nadir</span><span>|</span><a href="#35935306">parent</a><span>|</span><a href="#35935482">next</a><span>|</span><label class="collapse" for="c-35935706">[-]</label><label class="expand" for="c-35935706">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Tangentially related, I&#x27;d to dabble in Rust at some point but the syntax and memory management leave me trepidatious [...]<p>Assuming your trepidation is because memory management is somehow more manual in Rust I would argue that it&#x27;s actually not. This isn&#x27;t something I&#x27;m saying because I want to convince you to use Rust; I&#x27;m actually of the opinion that Rust doesn&#x27;t give you enough direct control of memory allocation and has iffy support for custom allocators on top.<p>Rust&#x27;s memory management is much more like a garbage collected language in practice, hence why I consider it too indirect.</div><br/></div></div><div id="35935482" class="c"><input type="checkbox" id="c-35935482" checked=""/><div class="controls bullet"><span class="by">imbnwa</span><span>|</span><a href="#35935306">parent</a><span>|</span><a href="#35935706">prev</a><span>|</span><a href="#35935850">next</a><span>|</span><label class="collapse" for="c-35935482">[-]</label><label class="expand" for="c-35935482">[1 more]</label></div><br/><div class="children"><div class="content">More tangential, is there a good, in-depth resource for learning how to build an app in AppKit w&#x2F; Swift?</div><br/></div></div></div></div><div id="35935850" class="c"><input type="checkbox" id="c-35935850" checked=""/><div class="controls bullet"><span class="by">tempodox</span><span>|</span><a href="#35935306">prev</a><span>|</span><a href="#35935434">next</a><span>|</span><label class="collapse" for="c-35935850">[-]</label><label class="expand" for="c-35935850">[3 more]</label></div><br/><div class="children"><div class="content">If you use the Cocoa API with ObjC or Swift, you get Automatic Reference Counting (ARC), generated by the compiler.  I guess with this you&#x27;d have to retain &#x2F; release your objects manually again?</div><br/><div id="35936372" class="c"><input type="checkbox" id="c-35936372" checked=""/><div class="controls bullet"><span class="by">xanathar</span><span>|</span><a href="#35935850">parent</a><span>|</span><a href="#35935915">next</a><span>|</span><label class="collapse" for="c-35936372">[-]</label><label class="expand" for="c-35936372">[1 more]</label></div><br/><div class="children"><div class="content">No.
Rust has RAII so you can have retain on &#x27;clone&#x27; operations and release on drops, just like the native Rc&#x2F;Arc types do.<p>This is, incidentally, how the servo bindings to core-foundation work (I prefer those bindings where there is overlap).<p>Servo bindings: <a href="https:&#x2F;&#x2F;github.com&#x2F;servo&#x2F;core-foundation-rs">https:&#x2F;&#x2F;github.com&#x2F;servo&#x2F;core-foundation-rs</a><p>Other crates of interest on this topic: 
- <a href="https:&#x2F;&#x2F;crates.io&#x2F;crates&#x2F;objc" rel="nofollow">https:&#x2F;&#x2F;crates.io&#x2F;crates&#x2F;objc</a>
- <a href="https:&#x2F;&#x2F;crates.io&#x2F;crates&#x2F;block" rel="nofollow">https:&#x2F;&#x2F;crates.io&#x2F;crates&#x2F;block</a></div><br/></div></div><div id="35935915" class="c"><input type="checkbox" id="c-35935915" checked=""/><div class="controls bullet"><span class="by">IshKebab</span><span>|</span><a href="#35935850">parent</a><span>|</span><a href="#35936372">prev</a><span>|</span><a href="#35935434">next</a><span>|</span><label class="collapse" for="c-35935915">[-]</label><label class="expand" for="c-35935915">[1 more]</label></div><br/><div class="children"><div class="content">Rust has ARC too so I very much doubt it.</div><br/></div></div></div></div><div id="35935434" class="c"><input type="checkbox" id="c-35935434" checked=""/><div class="controls bullet"><span class="by">meatjuice</span><span>|</span><a href="#35935850">prev</a><span>|</span><a href="#35935515">next</a><span>|</span><label class="collapse" for="c-35935434">[-]</label><label class="expand" for="c-35935434">[2 more]</label></div><br/><div class="children"><div class="content">Is it a backend library for Slint?</div><br/><div id="35936217" class="c"><input type="checkbox" id="c-35936217" checked=""/><div class="controls bullet"><span class="by">josephg</span><span>|</span><a href="#35935434">parent</a><span>|</span><a href="#35935515">next</a><span>|</span><label class="collapse" for="c-35936217">[-]</label><label class="expand" for="c-35936217">[1 more]</label></div><br/><div class="children"><div class="content">No. This is rust bindings to the native apple UI toolkits, UIKit and AppKit (on iOS and macos respectively). Using a library like this, your software will have a fully native look and feel. The result should be indistinguishable from the equivalent Swift or Obj-C app from the point of view of a user. Including all accessibility hooks, fully native widgets and things like that.<p>The downside is that code written against this api will not work on any other platform.</div><br/></div></div></div></div><div id="35935515" class="c"><input type="checkbox" id="c-35935515" checked=""/><div class="controls bullet"><span class="by">brundolf</span><span>|</span><a href="#35935434">prev</a><span>|</span><label class="collapse" for="c-35935515">[-]</label><label class="expand" for="c-35935515">[5 more]</label></div><br/><div class="children"><div class="content">Is... the name a Portlandia reference?</div><br/><div id="35935859" class="c"><input type="checkbox" id="c-35935859" checked=""/><div class="controls bullet"><span class="by">tempodox</span><span>|</span><a href="#35935515">parent</a><span>|</span><a href="#35935653">next</a><span>|</span><label class="collapse" for="c-35935859">[-]</label><label class="expand" for="c-35935859">[1 more]</label></div><br/><div class="children"><div class="content">I take the name as a pun on the Cocoa API.</div><br/></div></div><div id="35935653" class="c"><input type="checkbox" id="c-35935653" checked=""/><div class="controls bullet"><span class="by">tobinfricke</span><span>|</span><a href="#35935515">parent</a><span>|</span><a href="#35935859">prev</a><span>|</span><a href="#35935548">next</a><span>|</span><label class="collapse" for="c-35935653">[-]</label><label class="expand" for="c-35935653">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Cacao" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Cacao</a></div><br/></div></div><div id="35935548" class="c"><input type="checkbox" id="c-35935548" checked=""/><div class="controls bullet"><span class="by">bitwize</span><span>|</span><a href="#35935515">parent</a><span>|</span><a href="#35935653">prev</a><span>|</span><label class="collapse" for="c-35935548">[-]</label><label class="expand" for="c-35935548">[2 more]</label></div><br/><div class="children"><div class="content">It could be a <i>Portland</i> reference. The city had a gourmet chocolate shop called Cacao that served &quot;drinking chocolate&quot; from 2005 until 2020. I know because I went in there after getting lost and drenched in a Portland February, and the staff there were kind enough to bring me towels and let me wait out the downpour while I sipped chocolate.<p>But more than likely it&#x27;s just a reference to Apple&#x27;s Cocoa api.</div><br/><div id="35935589" class="c"><input type="checkbox" id="c-35935589" checked=""/><div class="controls bullet"><span class="by">sk0g</span><span>|</span><a href="#35935515">root</a><span>|</span><a href="#35935548">parent</a><span>|</span><label class="collapse" for="c-35935589">[-]</label><label class="expand" for="c-35935589">[1 more]</label></div><br/><div class="children"><div class="content">Am I missing something, is the name&#x2F;reference just &quot;cacao&quot;? 
Many languages spell cocoa that way, so I would take the name as cocoa-but-exotic or cocoa-but-foreign.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>