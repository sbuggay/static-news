<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1720342856172" as="style"/><link rel="stylesheet" href="styles.css?v=1720342856172"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="http://www.softwarelitigationconsulting.com/wp-content/uploads/2020/08/schulman_blast_from_the_past_disassembling_dos.html">A blast from the past: Disassembling DOS (2020)</a> <span class="domain">(<a href="http://www.softwarelitigationconsulting.com">www.softwarelitigationconsulting.com</a>)</span></div><div class="subtext"><span>userbinator</span> | <span>13 comments</span></div><br/><div><div id="40894227" class="c"><input type="checkbox" id="c-40894227" checked=""/><div class="controls bullet"><span class="by">dfox</span><span>|</span><a href="#40895869">next</a><span>|</span><label class="collapse" for="c-40894227">[-]</label><label class="expand" for="c-40894227">[4 more]</label></div><br/><div class="children"><div class="content">I always wondered how it is possible that MSCDEX is not an actual driver but mere TSR and now I know: CDs look like network shares to DOS. I suspect that there is some reasoning behind this “design” (different filename conventions on ISO-9660?), but it stills seems like one giant kludge.</div><br/><div id="40895525" class="c"><input type="checkbox" id="c-40895525" checked=""/><div class="controls bullet"><span class="by">bonzini</span><span>|</span><a href="#40894227">parent</a><span>|</span><a href="#40894869">next</a><span>|</span><label class="collapse" for="c-40895525">[-]</label><label class="expand" for="c-40895525">[2 more]</label></div><br/><div class="children"><div class="content">DOS only supports two kinds of device drivers: character devices and block devices. It does not have any kind of support for custom file system device drivers, as block device drivers will only use FAT. So in order to support ISO9660, sectors that aren&#x27;t 512 bytes, device sizes larger than 32MB (65536 * 512), the device driver (for example ATAPI.SYS) is actually a dummy character device and MSCDEX talks to it to expose the filesystem as a network drive.</div><br/><div id="40895627" class="c"><input type="checkbox" id="c-40895627" checked=""/><div class="controls bullet"><span class="by">userbinator</span><span>|</span><a href="#40894227">root</a><span>|</span><a href="#40895525">parent</a><span>|</span><a href="#40894869">next</a><span>|</span><label class="collapse" for="c-40895627">[-]</label><label class="expand" for="c-40895627">[1 more]</label></div><br/><div class="children"><div class="content">Alternatively, the abstraction of a network drive just happens to be the right one for local filesystem drivers too. There&#x27;s some more interesting details on the redirector API development here: <a href="http:&#x2F;&#x2F;www.os2museum.com&#x2F;wp&#x2F;redirectors-and-dos-3-0&#x2F;" rel="nofollow">http:&#x2F;&#x2F;www.os2museum.com&#x2F;wp&#x2F;redirectors-and-dos-3-0&#x2F;</a></div><br/></div></div></div></div><div id="40894869" class="c"><input type="checkbox" id="c-40894869" checked=""/><div class="controls bullet"><span class="by">trollbridge</span><span>|</span><a href="#40894227">parent</a><span>|</span><a href="#40895525">prev</a><span>|</span><a href="#40895869">next</a><span>|</span><label class="collapse" for="c-40894869">[-]</label><label class="expand" for="c-40894869">[1 more]</label></div><br/><div class="children"><div class="content">Starting with DOS 3.0, the way to do installable file systems was identical to adding a network drive. (DOS 4.0 had explicit IFSes; nobody used them to my knowledge and it chewed up RAM, and the code was removed in 5.0.)<p>A “network redirector” basically hooks every possible file I&#x2F;O operation; DOS simply dispatches to it for any operations on that drive letter.</div><br/></div></div></div></div><div id="40895869" class="c"><input type="checkbox" id="c-40895869" checked=""/><div class="controls bullet"><span class="by">fourthark</span><span>|</span><a href="#40894227">prev</a><span>|</span><a href="#40894797">next</a><span>|</span><label class="collapse" for="c-40895869">[-]</label><label class="expand" for="c-40895869">[1 more]</label></div><br/><div class="children"><div class="content">I saw Schulman present how, using similar techniques, they discovered the dirty tricks Microsoft used to hobble Windows betas on Novell DOS, at Ralph Nader&#x27;s Appraising Microsoft conference in 1997.<p>It&#x27;s covered in another of his books, Undocumented Windows.<p>Impressive work, and very brave at the time.</div><br/></div></div><div id="40894797" class="c"><input type="checkbox" id="c-40894797" checked=""/><div class="controls bullet"><span class="by">ForOldHack</span><span>|</span><a href="#40895869">prev</a><span>|</span><a href="#40894012">next</a><span>|</span><label class="collapse" for="c-40894797">[-]</label><label class="expand" for="c-40894797">[1 more]</label></div><br/><div class="children"><div class="content">This is some brilliant interpretation. Wish he would take a look at both the origin of task switching and the Xenix boot loader.</div><br/></div></div><div id="40894012" class="c"><input type="checkbox" id="c-40894012" checked=""/><div class="controls bullet"><span class="by">msla</span><span>|</span><a href="#40894797">prev</a><span>|</span><a href="#40864929">next</a><span>|</span><label class="collapse" for="c-40894012">[-]</label><label class="expand" for="c-40894012">[2 more]</label></div><br/><div class="children"><div class="content">&gt; The &quot;what&quot; part is difficult to answer, except to note that DOS is in many ways what textbooks on operating systems call a microkernel. DOS provides a small bare minimum of services, on top of which other, more sophisticated, services can be built.<p>I think I heard Tanenbaum twitch.</div><br/><div id="40894338" class="c"><input type="checkbox" id="c-40894338" checked=""/><div class="controls bullet"><span class="by">userbinator</span><span>|</span><a href="#40894012">parent</a><span>|</span><a href="#40864929">next</a><span>|</span><label class="collapse" for="c-40894338">[-]</label><label class="expand" for="c-40894338">[1 more]</label></div><br/><div class="children"><div class="content">I think DOS is closer to a &quot;library OS&quot; or unikernel.<p><a href="https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Unikernel" rel="nofollow">https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Unikernel</a><p><i>OS virtualization can overcome some of these drawbacks on commodity hardware.</i><p>...and that&#x27;s exactly what Windows&#x2F;386 and later did.</div><br/></div></div></div></div><div id="40864929" class="c"><input type="checkbox" id="c-40864929" checked=""/><div class="controls bullet"><span class="by">navjack27</span><span>|</span><a href="#40894012">prev</a><span>|</span><label class="collapse" for="c-40864929">[-]</label><label class="expand" for="c-40864929">[4 more]</label></div><br/><div class="children"><div class="content">Why does this have so many layout errors or typographical errors or something going on? There are just a lot of repeated paragraphs or sentences for seemingly no reason.</div><br/><div id="40893467" class="c"><input type="checkbox" id="c-40893467" checked=""/><div class="controls bullet"><span class="by">trollbridge</span><span>|</span><a href="#40864929">parent</a><span>|</span><a href="#40893400">next</a><span>|</span><label class="collapse" for="c-40893467">[-]</label><label class="expand" for="c-40893467">[2 more]</label></div><br/><div class="children"><div class="content">This is from a book that was formerly intended for print only. From the bottom of the page:<p>&quot;[Many thanks to Samuel Okei from Texas Tech Univ. for his skilled conversion and reformatting of what was a complex 25-year-old file with obscure and obsolete typesetting codes, into HTML.]&quot;</div><br/><div id="40893947" class="c"><input type="checkbox" id="c-40893947" checked=""/><div class="controls bullet"><span class="by">unixhero</span><span>|</span><a href="#40864929">root</a><span>|</span><a href="#40893467">parent</a><span>|</span><a href="#40893400">next</a><span>|</span><label class="collapse" for="c-40893947">[-]</label><label class="expand" for="c-40893947">[1 more]</label></div><br/><div class="children"><div class="content">Probably troff o nroff<p>No tan dificil hombre</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>