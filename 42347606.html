<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1733562053692" as="style"/><link rel="stylesheet" href="styles.css?v=1733562053692"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/Olshansk/postgres_for_everything">Postgres for everything (e/Postgres)</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>Olshansky</span> | <span>36 comments</span></div><br/><div><div id="42348265" class="c"><input type="checkbox" id="c-42348265" checked=""/><div class="controls bullet"><span class="by">ianpurton</span><span>|</span><a href="#42347852">next</a><span>|</span><label class="collapse" for="c-42348265">[-]</label><label class="expand" for="c-42348265">[1 more]</label></div><br/><div class="children"><div class="content">I can see a lot of benefits of having 1 API to access a lot of functionality.<p>For example instead of integrating with a message queue I can just do an INSERT this is great. It lowers the friction.<p>Vector search is a no brainer too. Why would I have 2 databases when 1 can do it all.<p>Using Postgres to generate HTML is questionable though. I haven&#x27;t tried it but I can&#x27;t image its a viable way to create user interfaces.</div><br/></div></div><div id="42347852" class="c"><input type="checkbox" id="c-42347852" checked=""/><div class="controls bullet"><span class="by">whateveracct</span><span>|</span><a href="#42348265">prev</a><span>|</span><a href="#42348079">next</a><span>|</span><label class="collapse" for="c-42347852">[-]</label><label class="expand" for="c-42347852">[12 more]</label></div><br/><div class="children"><div class="content">Just don&#x27;t use a single Postgres DB for everything as you scale up to 100+ engineers. You&#x27;ll inevitably get database-as-the-API.<p>Now if you have the actual technical leadership [1] to scale your systems by drawing logical and physical boundaries so that each unit has its own Postgres? Yeah Postgres for everything is solid.<p>[1] Surprisingly rare I&#x27;ve found. Lots of &quot;successful&quot; CTOs who don&#x27;t do this hard part.</div><br/><div id="42348017" class="c"><input type="checkbox" id="c-42348017" checked=""/><div class="controls bullet"><span class="by">underdeserver</span><span>|</span><a href="#42347852">parent</a><span>|</span><a href="#42348109">next</a><span>|</span><label class="collapse" for="c-42348017">[-]</label><label class="expand" for="c-42348017">[2 more]</label></div><br/><div class="children"><div class="content">Drop the scare quotes from &quot;successful&quot;. These guys shipped products. The migration to multiple databases, syncing user information etc. is a milestone, not a necessity at every step.</div><br/><div id="42348137" class="c"><input type="checkbox" id="c-42348137" checked=""/><div class="controls bullet"><span class="by">szundi</span><span>|</span><a href="#42347852">root</a><span>|</span><a href="#42348017">parent</a><span>|</span><a href="#42348109">next</a><span>|</span><label class="collapse" for="c-42348137">[-]</label><label class="expand" for="c-42348137">[1 more]</label></div><br/><div class="children"><div class="content">Thank you</div><br/></div></div></div></div><div id="42348109" class="c"><input type="checkbox" id="c-42348109" checked=""/><div class="controls bullet"><span class="by">anonzzzies</span><span>|</span><a href="#42347852">parent</a><span>|</span><a href="#42348017">prev</a><span>|</span><a href="#42347947">next</a><span>|</span><label class="collapse" for="c-42348109">[-]</label><label class="expand" for="c-42348109">[2 more]</label></div><br/><div class="children"><div class="content">You don&#x27;t have to plan this very early; most companies won&#x27;t get to 100+ engineers. Let&#x27;s ship first and worry about this, much much much much later. Overarchitecting stuff makes life hard; coming into companies that have 40 servers running with everything architected for 1000000 engineers and billions of visitors while in reality there aren&#x27;t even 2 users and there is 1 overworked engineer. Stop doing that and stop people telling to do that.</div><br/><div id="42348146" class="c"><input type="checkbox" id="c-42348146" checked=""/><div class="controls bullet"><span class="by">szundi</span><span>|</span><a href="#42347852">root</a><span>|</span><a href="#42348109">parent</a><span>|</span><a href="#42347947">next</a><span>|</span><label class="collapse" for="c-42348146">[-]</label><label class="expand" for="c-42348146">[1 more]</label></div><br/><div class="children"><div class="content">If you die before that, it was the market, not engineers being slow. Of course. Or sales.</div><br/></div></div></div></div><div id="42347947" class="c"><input type="checkbox" id="c-42347947" checked=""/><div class="controls bullet"><span class="by">RedShift1</span><span>|</span><a href="#42347852">parent</a><span>|</span><a href="#42348109">prev</a><span>|</span><a href="#42348174">next</a><span>|</span><label class="collapse" for="c-42347947">[-]</label><label class="expand" for="c-42347947">[2 more]</label></div><br/><div class="children"><div class="content">&gt; You&#x27;ll inevitably get database-as-the-API<p>I think that&#x27;s actually the point of &quot;postgres for everything&quot;?</div><br/><div id="42347958" class="c"><input type="checkbox" id="c-42347958" checked=""/><div class="controls bullet"><span class="by">whateveracct</span><span>|</span><a href="#42347852">root</a><span>|</span><a href="#42347947">parent</a><span>|</span><a href="#42348174">next</a><span>|</span><label class="collapse" for="c-42347958">[-]</label><label class="expand" for="c-42347958">[1 more]</label></div><br/><div class="children"><div class="content">If you don&#x27;t have any discipline it becomes hell.<p>Not to mention that a random team writing a migration that locks a key shared table (or otherwise chokes resources) now causes outages for <i>everyone</i>.</div><br/></div></div></div></div><div id="42348174" class="c"><input type="checkbox" id="c-42348174" checked=""/><div class="controls bullet"><span class="by">qaq</span><span>|</span><a href="#42347852">parent</a><span>|</span><a href="#42347947">prev</a><span>|</span><a href="#42348028">next</a><span>|</span><label class="collapse" for="c-42348174">[-]</label><label class="expand" for="c-42348174">[1 more]</label></div><br/><div class="children"><div class="content">database as API works fine if you have properly abstracted things with sprocs and views. It will be also far less brittle than 100 services exposed as GraphQL</div><br/></div></div><div id="42348028" class="c"><input type="checkbox" id="c-42348028" checked=""/><div class="controls bullet"><span class="by">CalRobert</span><span>|</span><a href="#42347852">parent</a><span>|</span><a href="#42348174">prev</a><span>|</span><a href="#42348079">next</a><span>|</span><label class="collapse" for="c-42348028">[-]</label><label class="expand" for="c-42348028">[4 more]</label></div><br/><div class="children"><div class="content">You could go whole hog with postgrest I suppose</div><br/><div id="42348053" class="c"><input type="checkbox" id="c-42348053" checked=""/><div class="controls bullet"><span class="by">jjallen</span><span>|</span><a href="#42347852">root</a><span>|</span><a href="#42348028">parent</a><span>|</span><a href="#42348079">next</a><span>|</span><label class="collapse" for="c-42348053">[-]</label><label class="expand" for="c-42348053">[3 more]</label></div><br/><div class="children"><div class="content">I always wonder if postgrest works well after growing quite a bit. I really should google the largest companies using it.</div><br/><div id="42348100" class="c"><input type="checkbox" id="c-42348100" checked=""/><div class="controls bullet"><span class="by">feverzsj</span><span>|</span><a href="#42347852">root</a><span>|</span><a href="#42348053">parent</a><span>|</span><a href="#42348079">next</a><span>|</span><label class="collapse" for="c-42348100">[-]</label><label class="expand" for="c-42348100">[2 more]</label></div><br/><div class="children"><div class="content">In my experience, without careful tunning, postgres performance starts dropping significantly around 10 million rows.</div><br/><div id="42348153" class="c"><input type="checkbox" id="c-42348153" checked=""/><div class="controls bullet"><span class="by">szundi</span><span>|</span><a href="#42347852">root</a><span>|</span><a href="#42348100">parent</a><span>|</span><a href="#42348079">next</a><span>|</span><label class="collapse" for="c-42348153">[-]</label><label class="expand" for="c-42348153">[1 more]</label></div><br/><div class="children"><div class="content">We have billions of rows with clustering on one instance, perfect, half a rack almost.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="42348079" class="c"><input type="checkbox" id="c-42348079" checked=""/><div class="controls bullet"><span class="by">jensneuse</span><span>|</span><a href="#42347852">prev</a><span>|</span><a href="#42348238">next</a><span>|</span><label class="collapse" for="c-42348079">[-]</label><label class="expand" for="c-42348079">[7 more]</label></div><br/><div class="children"><div class="content">I absolutely love Postgres, but please allow me to say that you absolutely don&#x27;t want to expose an API generated from a database to people outside of your team. This limits you a lot in changing the way you store your data.<p>I wrote about this topic before and haven&#x27;t changed my opinion much. You don&#x27;t want to have that tight coupling: <a href="https:&#x2F;&#x2F;wundergraph.com&#x2F;blog&#x2F;six-year-graphql-recap#generated-graphql-apis:-tight-coupling-as-a-service" rel="nofollow">https:&#x2F;&#x2F;wundergraph.com&#x2F;blog&#x2F;six-year-graphql-recap#generate...</a></div><br/><div id="42348138" class="c"><input type="checkbox" id="c-42348138" checked=""/><div class="controls bullet"><span class="by">RedShift1</span><span>|</span><a href="#42348079">parent</a><span>|</span><a href="#42348102">next</a><span>|</span><label class="collapse" for="c-42348138">[-]</label><label class="expand" for="c-42348138">[5 more]</label></div><br/><div class="children"><div class="content">What exactly is the problem with tight coupling? You&#x27;re going to insert an entire layer that basically translates format A to format B, just so you can later change a column name in the database and not have to change it in the API or something?</div><br/><div id="42348205" class="c"><input type="checkbox" id="c-42348205" checked=""/><div class="controls bullet"><span class="by">grey-area</span><span>|</span><a href="#42348079">root</a><span>|</span><a href="#42348138">parent</a><span>|</span><a href="#42348201">next</a><span>|</span><label class="collapse" for="c-42348205">[-]</label><label class="expand" for="c-42348205">[1 more]</label></div><br/><div class="children"><div class="content">1. You don’t want or need to expose lots of implementation details. Many of your data structures should be private, and many should be partly private.<p>2. Your data structures should not dictate the shape of your api, usage patterns should (e.g. the user always needs records a,b,c together or they have a and want c but don’t care about b)<p>3. It stops you changing any implementation details later and&#x2F;or means any change is definitely a breaking change for someone.</div><br/></div></div><div id="42348201" class="c"><input type="checkbox" id="c-42348201" checked=""/><div class="controls bullet"><span class="by">vineyardmike</span><span>|</span><a href="#42348079">root</a><span>|</span><a href="#42348138">parent</a><span>|</span><a href="#42348205">prev</a><span>|</span><a href="#42348210">next</a><span>|</span><label class="collapse" for="c-42348201">[-]</label><label class="expand" for="c-42348201">[1 more]</label></div><br/><div class="children"><div class="content">Yes.<p>But actually, yes. Sometimes the format changes, sometimes you want to store an extra bit of data that should only be exposed internally. Sometimes you realize that storing a timestamp as a unix-time int no longer cuts it, and you have to migrate to an ISO 8601 time, or whatever, or you add a flag to your records for some A&#x2F;B test feature, that is intentionally not going to last forever, and should only be internal.<p>You probably want that layer anyways, for things like AuthN&#x2F;Z.<p>If you&#x27;re going to publicly expose an API, it&#x27;s got to be stable for a while - that&#x27;s a commitment you&#x27;re implicitly making. That&#x27;s hard enough to maintain without now also committing to stability in your internal representation of data.</div><br/></div></div><div id="42348210" class="c"><input type="checkbox" id="c-42348210" checked=""/><div class="controls bullet"><span class="by">hmottestad</span><span>|</span><a href="#42348079">root</a><span>|</span><a href="#42348138">parent</a><span>|</span><a href="#42348201">prev</a><span>|</span><a href="#42348187">next</a><span>|</span><label class="collapse" for="c-42348210">[-]</label><label class="expand" for="c-42348210">[1 more]</label></div><br/><div class="children"><div class="content">Normalization is one of those typical issues where you might be fine with having everything normalized when you start off, but then once performance gets bad you end up denormalizing tables that are typically joined.</div><br/></div></div><div id="42348187" class="c"><input type="checkbox" id="c-42348187" checked=""/><div class="controls bullet"><span class="by">haileys</span><span>|</span><a href="#42348079">root</a><span>|</span><a href="#42348138">parent</a><span>|</span><a href="#42348210">prev</a><span>|</span><a href="#42348102">next</a><span>|</span><label class="collapse" for="c-42348187">[-]</label><label class="expand" for="c-42348187">[1 more]</label></div><br/><div class="children"><div class="content">Yes. A lot of the work I&#x27;ve done through my career is essentially this, once you boil away the rest of the details.</div><br/></div></div></div></div><div id="42348102" class="c"><input type="checkbox" id="c-42348102" checked=""/><div class="controls bullet"><span class="by">dunwaldo</span><span>|</span><a href="#42348079">parent</a><span>|</span><a href="#42348138">prev</a><span>|</span><a href="#42348238">next</a><span>|</span><label class="collapse" for="c-42348102">[-]</label><label class="expand" for="c-42348102">[1 more]</label></div><br/><div class="children"><div class="content">you could use views as a layer in between?</div><br/></div></div></div></div><div id="42348238" class="c"><input type="checkbox" id="c-42348238" checked=""/><div class="controls bullet"><span class="by">jascha_eng</span><span>|</span><a href="#42348079">prev</a><span>|</span><a href="#42347835">next</a><span>|</span><label class="collapse" for="c-42348238">[-]</label><label class="expand" for="c-42348238">[1 more]</label></div><br/><div class="children"><div class="content">The markdown is a bit broken. But I agree with the message.<p>Created a PR to update some of the vectordb links and also fixed the markdown:
<a href="https:&#x2F;&#x2F;github.com&#x2F;Olshansk&#x2F;postgres_for_everything&#x2F;pull&#x2F;1">https:&#x2F;&#x2F;github.com&#x2F;Olshansk&#x2F;postgres_for_everything&#x2F;pull&#x2F;1</a></div><br/></div></div><div id="42347835" class="c"><input type="checkbox" id="c-42347835" checked=""/><div class="controls bullet"><span class="by">KingOfCoders</span><span>|</span><a href="#42348238">prev</a><span>|</span><a href="#42348248">next</a><span>|</span><label class="collapse" for="c-42347835">[-]</label><label class="expand" for="c-42347835">[1 more]</label></div><br/><div class="children"><div class="content">&quot;It&#x27;s inspired by this article from the Amazing CTO [0]&quot;<p>Getting up in the morning, seeing an article that references you, bliss!<p>[0]: <a href="https:&#x2F;&#x2F;www.amazingcto.com&#x2F;postgres-for-everything&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.amazingcto.com&#x2F;postgres-for-everything&#x2F;</a></div><br/></div></div><div id="42348248" class="c"><input type="checkbox" id="c-42348248" checked=""/><div class="controls bullet"><span class="by">rozenmd</span><span>|</span><a href="#42347835">prev</a><span>|</span><a href="#42348251">next</a><span>|</span><label class="collapse" for="c-42348248">[-]</label><label class="expand" for="c-42348248">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been running my project as a business for almost four years now and I think my Postgres DB is the only thing that I haven&#x27;t changed.<p>Easily the most stable part of the stack (100% uptime on RDS since 2021&#x2F;02&#x2F;01).</div><br/></div></div><div id="42348251" class="c"><input type="checkbox" id="c-42348251" checked=""/><div class="controls bullet"><span class="by">joeevans1000</span><span>|</span><a href="#42348248">prev</a><span>|</span><a href="#42348035">next</a><span>|</span><label class="collapse" for="c-42348251">[-]</label><label class="expand" for="c-42348251">[2 more]</label></div><br/><div class="children"><div class="content">Great repo! Thanks!<p>I&#x27;m wondering, any approach for bitemporal dbs, like xtdb?</div><br/><div id="42348338" class="c"><input type="checkbox" id="c-42348338" checked=""/><div class="controls bullet"><span class="by">seanhunter</span><span>|</span><a href="#42348251">parent</a><span>|</span><a href="#42348035">next</a><span>|</span><label class="collapse" for="c-42348338">[-]</label><label class="expand" for="c-42348338">[1 more]</label></div><br/><div class="children"><div class="content">You definitely don’t need a special database for bitemporal data. Just a datetime and as of data time column, your value column and whatever metadata you want (or a j onb col for metadata)</div><br/></div></div></div></div><div id="42348035" class="c"><input type="checkbox" id="c-42348035" checked=""/><div class="controls bullet"><span class="by">lokimedes</span><span>|</span><a href="#42348251">prev</a><span>|</span><a href="#42347722">next</a><span>|</span><label class="collapse" for="c-42348035">[-]</label><label class="expand" for="c-42348035">[2 more]</label></div><br/><div class="children"><div class="content">Having just spent the better part of two weeks integrating Apache Age for Graph data, just to realize the project is stale and a mess, don’t take this list on face value.<p>Now hoping for better results with DGraph, but it seems that graph databases are living a precarious existence.</div><br/><div id="42348190" class="c"><input type="checkbox" id="c-42348190" checked=""/><div class="controls bullet"><span class="by">anon3459</span><span>|</span><a href="#42348035">parent</a><span>|</span><a href="#42347722">next</a><span>|</span><label class="collapse" for="c-42348190">[-]</label><label class="expand" for="c-42348190">[1 more]</label></div><br/><div class="children"><div class="content">Haaaa same here for apache age. Can you elaborate a little please</div><br/></div></div></div></div><div id="42347722" class="c"><input type="checkbox" id="c-42347722" checked=""/><div class="controls bullet"><span class="by">rcleveng</span><span>|</span><a href="#42348035">prev</a><span>|</span><a href="#42347898">next</a><span>|</span><label class="collapse" for="c-42347722">[-]</label><label class="expand" for="c-42347722">[1 more]</label></div><br/><div class="children"><div class="content">I like this.<p>I strongly believe that picking some tech stack you know when you are starting out is always the right decision, until it&#x27;s not.  Only then do you pick a different solution.<p>Better to move fast leveraging what you know, until you need something else.</div><br/></div></div><div id="42347898" class="c"><input type="checkbox" id="c-42347898" checked=""/><div class="controls bullet"><span class="by">feverzsj</span><span>|</span><a href="#42347722">prev</a><span>|</span><a href="#42347784">next</a><span>|</span><label class="collapse" for="c-42347898">[-]</label><label class="expand" for="c-42347898">[1 more]</label></div><br/><div class="children"><div class="content">Postgres administration is such a PITA. I&#x27;d rather use sqlite for everything.</div><br/></div></div><div id="42347784" class="c"><input type="checkbox" id="c-42347784" checked=""/><div class="controls bullet"><span class="by">adamcharnock</span><span>|</span><a href="#42347898">prev</a><span>|</span><a href="#42348116">next</a><span>|</span><label class="collapse" for="c-42347784">[-]</label><label class="expand" for="c-42347784">[1 more]</label></div><br/><div class="children"><div class="content">If anyone has seen a steams implementation in Postgres please let me know. Not just pub&#x2F;sub, but full implementation of streams with consumer groups would be very interesting to me.<p>Second best, how would you implement this in Postgres? I’m tempted to give it a go but I haven’t a fully-baked plan yet.</div><br/></div></div><div id="42348116" class="c"><input type="checkbox" id="c-42348116" checked=""/><div class="controls bullet"><span class="by">anonzzzies</span><span>|</span><a href="#42347784">prev</a><span>|</span><a href="#42348068">next</a><span>|</span><label class="collapse" for="c-42348116">[-]</label><label class="expand" for="c-42348116">[2 more]</label></div><br/><div class="children"><div class="content">Is there a local-first postgres solution?</div><br/><div id="42348266" class="c"><input type="checkbox" id="c-42348266" checked=""/><div class="controls bullet"><span class="by">malux85</span><span>|</span><a href="#42348116">parent</a><span>|</span><a href="#42348068">next</a><span>|</span><label class="collapse" for="c-42348266">[-]</label><label class="expand" for="c-42348266">[1 more]</label></div><br/><div class="children"><div class="content">What do you mean local first? Postgres is an executable that you can run on your machine if you wish</div><br/></div></div></div></div><div id="42348068" class="c"><input type="checkbox" id="c-42348068" checked=""/><div class="controls bullet"><span class="by">cynicalsecurity</span><span>|</span><a href="#42348116">prev</a><span>|</span><a href="#42347843">next</a><span>|</span><label class="collapse" for="c-42348068">[-]</label><label class="expand" for="c-42348068">[1 more]</label></div><br/><div class="children"><div class="content">Postgres cult strikes back.</div><br/></div></div><div id="42347843" class="c"><input type="checkbox" id="c-42347843" checked=""/><div class="controls bullet"><span class="by">29athrowaway</span><span>|</span><a href="#42348068">prev</a><span>|</span><a href="#42347803">next</a><span>|</span><label class="collapse" for="c-42347843">[-]</label><label class="expand" for="c-42347843">[1 more]</label></div><br/><div class="children"><div class="content">Broken markdown.<p>- the entire repository is 1 file<p>- the file is titled &quot;read me&quot;<p>- but you didn&#x27;t read it (it&#x27;s not proofread)<p>why do you want me to read something you did not read?</div><br/></div></div><div id="42347803" class="c"><input type="checkbox" id="c-42347803" checked=""/><div class="controls bullet"><span class="by">foobarkey</span><span>|</span><a href="#42347843">prev</a><span>|</span><label class="collapse" for="c-42347803">[-]</label><label class="expand" for="c-42347803">[1 more]</label></div><br/><div class="children"><div class="content">Oh hi you dont have HA so stop this meme</div><br/></div></div></div></div></div></div></div></body></html>