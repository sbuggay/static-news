<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1723021276192" as="style"/><link rel="stylesheet" href="styles.css?v=1723021276192"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://blog.phylum.io/the-great-npm-garbage-patch/">70% of new NPM packages in last 6 months were spam</a>Â <span class="domain">(<a href="https://blog.phylum.io">blog.phylum.io</a>)</span></div><div class="subtext"><span>louislang</span> | <span>14 comments</span></div><br/><div><div id="41179315" class="c"><input type="checkbox" id="c-41179315" checked=""/><div class="controls bullet"><span class="by">mkl</span><span>|</span><a href="#41179286">next</a><span>|</span><label class="collapse" for="c-41179315">[-]</label><label class="expand" for="c-41179315">[1 more]</label></div><br/><div class="children"><div class="content">How about removing the incentive?  Take down every package with tea.yaml in it, after say 1 month&#x27;s warning, so legitimate packages trying to use it don&#x27;t leave their users in the lurch.  The tea protocol is clearly not going to accomplish what it set out to (see below), and is instead incentivising malicious behaviour and damaging the system it set out to support.<p>From <a href="https:&#x2F;&#x2F;docs.tea.xyz&#x2F;tea&#x2F;i-want-to...&#x2F;faqs" rel="nofollow">https:&#x2F;&#x2F;docs.tea.xyz&#x2F;tea&#x2F;i-want-to...&#x2F;faqs</a>: &quot;tea is a decentralized protocol secured by reputation and incentives. tea enhances the sustainability and integrity of the software supply chain by allowing open-source developers to capture the value they create in a trustless manner.&quot;</div><br/></div></div><div id="41179286" class="c"><input type="checkbox" id="c-41179286" checked=""/><div class="controls bullet"><span class="by">forcha</span><span>|</span><a href="#41179315">prev</a><span>|</span><a href="#41178773">next</a><span>|</span><label class="collapse" for="c-41179286">[-]</label><label class="expand" for="c-41179286">[1 more]</label></div><br/><div class="children"><div class="content">The Tea protocol&#x27;s flawed incentive model is a disaster, effectively encouraging developers to pollute npm with spam. It&#x27;s a prime example of what happens when protocols prioritize quantity over quality, compromising the entire ecosystem.</div><br/></div></div><div id="41178773" class="c"><input type="checkbox" id="c-41178773" checked=""/><div class="controls bullet"><span class="by">NikxDa</span><span>|</span><a href="#41179286">prev</a><span>|</span><a href="#41179408">next</a><span>|</span><label class="collapse" for="c-41178773">[-]</label><label class="expand" for="c-41178773">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Contrary to what npm states, this package actually depends on one of our aforementioned spam packages. This is a by-product of how npm handles and displays dependencies to users on its website.<p>For me personally, this is the biggest surprise and takeaway here. By simply having a key inside package.json&#x27;s dependencies reference an existing NPM package, the NPM website links it up and counts it as a dependency, regardless of the actual value that the package references (which can be a URL to an entirely different package!). I think this puts an additional strain on an already fragile dependency ecosystem, and is quite avoidable with some checks and a little bit of UI work on NPM&#x27;s side.</div><br/></div></div><div id="41179408" class="c"><input type="checkbox" id="c-41179408" checked=""/><div class="controls bullet"><span class="by">n_ary</span><span>|</span><a href="#41178773">prev</a><span>|</span><a href="#41178871">next</a><span>|</span><label class="collapse" for="c-41179408">[-]</label><label class="expand" for="c-41179408">[1 more]</label></div><br/><div class="children"><div class="content">Why are these spam accounts not perma banned and removed?<p>For example, this[1] account mentioned in the article has 1781 packages of gibberish.<p>Also, the whole reporting process is onerous, there is a large form. Of course, gatekeeping on reporting is good, but there should be a possibility to report an entire profile of package publisher.<p>[1] <a href="https:&#x2F;&#x2F;www.npmjs.com&#x2F;~eleanorecrockets" rel="nofollow">https:&#x2F;&#x2F;www.npmjs.com&#x2F;~eleanorecrockets</a></div><br/></div></div><div id="41178871" class="c"><input type="checkbox" id="c-41178871" checked=""/><div class="controls bullet"><span class="by">daotoad</span><span>|</span><a href="#41179408">prev</a><span>|</span><a href="#41179184">next</a><span>|</span><label class="collapse" for="c-41178871">[-]</label><label class="expand" for="c-41178871">[4 more]</label></div><br/><div class="children"><div class="content">TLDR:<p>1. a cryptocurrency scheme for funding OSS development[1] is incentivizing spammers to try and monetize NPM spam<p>2. it&#x27;s easy to spoof your dependencies with package.json[2]<p><pre><code>  &quot;dependencies&quot;: {
    &quot;axios&quot;: &quot;https:&#x2F;&#x2F;registry.npmjs.org&#x2F;@putrifransiska&#x2F;kwonthol36&#x2F;-&#x2F;kwonthol36-1.1.4.tgz&quot;
  }

</code></pre>
[1]: <a href="https:&#x2F;&#x2F;tea.xyz&#x2F;blog&#x2F;the-tea-protocol-tokenomics" rel="nofollow">https:&#x2F;&#x2F;tea.xyz&#x2F;blog&#x2F;the-tea-protocol-tokenomics</a><p>[2]: <a href="https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;sournoise?activeTab=code" rel="nofollow">https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;sournoise?activeTab=code</a></div><br/><div id="41179260" class="c"><input type="checkbox" id="c-41179260" checked=""/><div class="controls bullet"><span class="by">vorticalbox</span><span>|</span><a href="#41178871">parent</a><span>|</span><a href="#41179389">next</a><span>|</span><label class="collapse" for="c-41179260">[-]</label><label class="expand" for="c-41179260">[2 more]</label></div><br/><div class="children"><div class="content">A &quot;better&quot; way is to modify the package-lock.json. You can still spoof the package but almost no one actually reviews it as npm will usually modify 1000s of lines.<p>for example take mongoose<p><pre><code>      &quot;resolved&quot;: &quot;https:&#x2F;&#x2F;registry.npmjs.org&#x2F;mongoose&#x2F;-&#x2F;mongoose-8.4.4.tgz&quot;,
      &quot;integrity&quot;: &quot;sha512-Nya808odIJoHP4JuJKbWA2eIaerXieu59kE8pQlvJpUBoSKWUyhLji0g1WMVaYXWmzPYXP2Jd6XdR4KJE8RELw==&quot;,

</code></pre>
so long as the integrity check passes for the resolve url npm will happily install it.</div><br/><div id="41179397" class="c"><input type="checkbox" id="c-41179397" checked=""/><div class="controls bullet"><span class="by">arp242</span><span>|</span><a href="#41178871">root</a><span>|</span><a href="#41179260">parent</a><span>|</span><a href="#41179389">next</a><span>|</span><label class="collapse" for="c-41179397">[-]</label><label class="expand" for="c-41179397">[1 more]</label></div><br/><div class="children"><div class="content">Hugely surprising that package.json and package-lock.json don&#x27;t have to match. The way I would expect it to work is something like:<p><pre><code>  for d in dependencies_from_package_json()
    get_package(d)
    if hash_package(d) != package_lock_hash(d)
      error()
    end
  end
</code></pre>
And not:<p><pre><code>  use_package_lock_and_ignore_package_json_lol_fuck_you_haha_kthxbye()
</code></pre>
I also discovered that npm doesn&#x27;t actually verify what&#x27;s in node_modules when using &quot;npm install&quot;. I found this out a few ago after I had some corrupted files due to a flake internet connection. Hugely confusing. Also doesn&#x27;t seem to be a straightforward way to check this (as near I could find in a few minutes).<p>But luckily &quot;npm audit&quot; will warn us about 30 &quot;high severity&quot; ReDos &quot;high impact&quot; &quot;vulnerabilities&quot; that can never realistically be triggered and are not really a &quot;vulnerability&quot; in the first place, let alone a &quot;high impact&quot; one.</div><br/></div></div></div></div><div id="41179389" class="c"><input type="checkbox" id="c-41179389" checked=""/><div class="controls bullet"><span class="by">3np</span><span>|</span><a href="#41178871">parent</a><span>|</span><a href="#41179260">prev</a><span>|</span><a href="#41179184">next</a><span>|</span><label class="collapse" for="c-41179389">[-]</label><label class="expand" for="c-41179389">[1 more]</label></div><br/><div class="children"><div class="content">Re 2: How is that &quot;spoofing&quot;..?<p>You just demonstrated the uglier package-manager-independent overrides(npm)&#x2F;resolutions(yarn) aliternative method. Because for whatever reason they couldn&#x27;t play nice with each other.<p><a href="https:&#x2F;&#x2F;docs.npmjs.com&#x2F;cli&#x2F;v9&#x2F;configuring-npm&#x2F;package-json#overrides" rel="nofollow">https:&#x2F;&#x2F;docs.npmjs.com&#x2F;cli&#x2F;v9&#x2F;configuring-npm&#x2F;package-json#o...</a><p><a href="https:&#x2F;&#x2F;classic.yarnpkg.com&#x2F;lang&#x2F;en&#x2F;docs&#x2F;selective-version-resolutions&#x2F;" rel="nofollow">https:&#x2F;&#x2F;classic.yarnpkg.com&#x2F;lang&#x2F;en&#x2F;docs&#x2F;selective-version-r...</a></div><br/></div></div></div></div><div id="41179184" class="c"><input type="checkbox" id="c-41179184" checked=""/><div class="controls bullet"><span class="by">vb-8448</span><span>|</span><a href="#41178871">prev</a><span>|</span><a href="#41179177">next</a><span>|</span><label class="collapse" for="c-41179184">[-]</label><label class="expand" for="c-41179184">[3 more]</label></div><br/><div class="children"><div class="content">I wonder what is the long term plan.<p>Maybe the next step is to sell the control of all these packages to a rogue entity to be used for a supply chain attack?</div><br/><div id="41179376" class="c"><input type="checkbox" id="c-41179376" checked=""/><div class="controls bullet"><span class="by">Cthulhu_</span><span>|</span><a href="#41179184">parent</a><span>|</span><a href="#41179469">next</a><span>|</span><label class="collapse" for="c-41179376">[-]</label><label class="expand" for="c-41179376">[1 more]</label></div><br/><div class="children"><div class="content">Would you be at all surprised? I&#x27;m fairly confident that like with browser addons, NPM package maintainers get offers from randoms to &#x27;buy&#x27; their package in order to get backdoor access.<p>A secured registry is long overdue, where every release gets an audit report verifying the code and authorship of a new release. It won&#x27;t be nearly as fast as regular NPM package development but that&#x27;s a good thing, this is intended for LTS versions for use in long-term software. It&#x27;d be a path to monetization as well, as the entities using a service like this is enterprise softare and both the author(s) of the package as the party doing the audit report would get a share.</div><br/></div></div><div id="41179469" class="c"><input type="checkbox" id="c-41179469" checked=""/><div class="controls bullet"><span class="by">throwaway290</span><span>|</span><a href="#41179184">parent</a><span>|</span><a href="#41179376">prev</a><span>|</span><a href="#41179177">next</a><span>|</span><label class="collapse" for="c-41179469">[-]</label><label class="expand" for="c-41179469">[1 more]</label></div><br/><div class="children"><div class="content">Ban the root cause (crypto). While incentive exists it will find a way.</div><br/></div></div></div></div><div id="41179177" class="c"><input type="checkbox" id="c-41179177" checked=""/><div class="controls bullet"><span class="by">EVa5I7bHFq9mnYK</span><span>|</span><a href="#41179184">prev</a><span>|</span><label class="collapse" for="c-41179177">[-]</label><label class="expand" for="c-41179177">[2 more]</label></div><br/><div class="children"><div class="content">Spam is the least of the worries.</div><br/><div id="41179368" class="c"><input type="checkbox" id="c-41179368" checked=""/><div class="controls bullet"><span class="by">minkles</span><span>|</span><a href="#41179177">parent</a><span>|</span><label class="collapse" for="c-41179368">[-]</label><label class="expand" for="c-41179368">[1 more]</label></div><br/><div class="children"><div class="content">Yeah this when I see one of our pipelines pull in 300 npm packages I wonder how much we really know about what our systems do.</div><br/></div></div></div></div></div></div></div></div></div></body></html>