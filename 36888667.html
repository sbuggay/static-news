<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1690448460743" as="style"/><link rel="stylesheet" href="styles.css?v=1690448460743"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://blog.marcua.net/2022/02/20/data-diffs-algorithms-for-explaining-what-changed-in-a-dataset.html">Data diffs: Algorithms for explaining what changed in a dataset (2022)</a> <span class="domain">(<a href="https://blog.marcua.net">blog.marcua.net</a>)</span></div><div class="subtext"><span>winkywooster</span> | <span>8 comments</span></div><br/><div><div id="36890486" class="c"><input type="checkbox" id="c-36890486" checked=""/><div class="controls bullet"><span class="by">TACIXAT</span><span>|</span><a href="#36890117">next</a><span>|</span><label class="collapse" for="c-36890486">[-]</label><label class="expand" for="c-36890486">[2 more]</label></div><br/><div class="children"><div class="content">I am working on this for a different definition of term dataset. I started learning deep learning which led me to start building datasets.<p>Wanting to store versions of the datasets efficiently I started building a version control system for them. It tracks objects and annotations and can roll back to any point in time. It helps answer questions like what has changed since the last release and which user made which changes.<p>Still working on the core library but I&#x27;m excited for it.</div><br/><div id="36890650" class="c"><input type="checkbox" id="c-36890650" checked=""/><div class="controls bullet"><span class="by">angrais</span><span>|</span><a href="#36890486">parent</a><span>|</span><a href="#36890117">next</a><span>|</span><label class="collapse" for="c-36890650">[-]</label><label class="expand" for="c-36890650">[1 more]</label></div><br/><div class="children"><div class="content">Have you looked into existing version control systems for data, such as DVC?</div><br/></div></div></div></div><div id="36890117" class="c"><input type="checkbox" id="c-36890117" checked=""/><div class="controls bullet"><span class="by">0cf8612b2e1e</span><span>|</span><a href="#36890486">prev</a><span>|</span><a href="#36889790">next</a><span>|</span><label class="collapse" for="c-36890117">[-]</label><label class="expand" for="c-36890117">[2 more]</label></div><br/><div class="children"><div class="content">This looks very interesting. Having not read the paper or the author’s library, I am curious how well it scales to more features. I would naively assume it is doing an exponential number of column comparisons.<p>Keeping in mind the strong correlation between divorces and margarine (<a href="https:&#x2F;&#x2F;tylervigen.com&#x2F;spurious-correlations" rel="nofollow noreferrer">https:&#x2F;&#x2F;tylervigen.com&#x2F;spurious-correlations</a>) I am still tempted to wire this up to automatically generate reports when data falls outside of a certain threshold.</div><br/><div id="36890458" class="c"><input type="checkbox" id="c-36890458" checked=""/><div class="controls bullet"><span class="by">opportune</span><span>|</span><a href="#36890117">parent</a><span>|</span><a href="#36889790">next</a><span>|</span><label class="collapse" for="c-36890458">[-]</label><label class="expand" for="c-36890458">[1 more]</label></div><br/><div class="children"><div class="content">I read the paper. It’s fundamentally I think an exponential problem but they apply some constraints to reduce it: only considering tuples of size n &lt;= 3, pruning.<p>Personally I think the case where you’re doing this on one column is not that interesting: for each column, get all values with &gt;= support frequency, group by it on old and new, include in results is risk_ratio over threshold. List results in order of risk_ratio. Going from that to just two columns is much much more computationally demanding and where pruning and such really matters.</div><br/></div></div></div></div><div id="36889790" class="c"><input type="checkbox" id="c-36889790" checked=""/><div class="controls bullet"><span class="by">gieksosz</span><span>|</span><a href="#36890117">prev</a><span>|</span><a href="#36890119">next</a><span>|</span><label class="collapse" for="c-36889790">[-]</label><label class="expand" for="c-36889790">[1 more]</label></div><br/><div class="children"><div class="content">some years ago when I was digging into DIFF and Macrobase (the one from Ballis lab) I made a simple reproduction of DIFF algo <a href="https:&#x2F;&#x2F;github.com&#x2F;PiotrZakrzewski&#x2F;macrobase-diff">https:&#x2F;&#x2F;github.com&#x2F;PiotrZakrzewski&#x2F;macrobase-diff</a></div><br/></div></div><div id="36890119" class="c"><input type="checkbox" id="c-36890119" checked=""/><div class="controls bullet"><span class="by">opportune</span><span>|</span><a href="#36889790">prev</a><span>|</span><a href="#36889645">next</a><span>|</span><label class="collapse" for="c-36890119">[-]</label><label class="expand" for="c-36890119">[1 more]</label></div><br/><div class="children"><div class="content">The author of this blog didn’t handle minimality or max_order &gt; 1 which basically works around all the benefits of DIFF and instead can just  brute force across all column values with support over the threshold. It turns an exponential or polynomial (on cardinality of columns and number of columns) problem into a problem linear in number of column values across columns. But even DIFF has a problem:<p>From the example, because I updated my application from v2 to v3, the initial set has 90% of (Galaxy, 11.0) records with v2 and 4% v3. After the update v2 is at 10% and now v3 is 80% of records with (Galaxy, 11.0). And at the time of both slices (Galaxy, 11.0) represents 80% of records.<p>Let’s say the total crash rate increased 25% and I call DIFF on (version, client, os). DIFF highlights the (v3, Galaxy, 11.0) slice first even if the crash rate was the <i>same</i> for v2 because there was an organic shift in proportions of v2 and v3 records: the contribution is 20x and support is 75%. But actually, some combo in the slices outside of (Galaxy, 11.0) contributed most of the diff - it gets ranked second, with less contribution and less support. The “explanation” that v3 introduced a bug is wrong: we simply caught that v3 replaced most usage of v2.<p>DIFF does roll ups, but DIFF applies a minimality and risk ratio threshold to results so the fact that the (Galaxy, 11.0) crash rate  across v2 and v3 didn’t actually change may even cover up the true story from the result. But, the minimality threshold is what makes their implementation performant.<p>If you disable minimality and directly compute all roll ups, you have to group by as many permutations as the power set of the column cardinalities, instead of the product of their cardinalities, which on k columns with cardinality ~n takes you from O(n^k) to O(2^(n^k)) (I think, please check the math). Note that in the experimental run with minimality disabled they performed worse than their comparison software, and that most datasets don’t have any mention of cardinalities. But, with minimality enabled, IIUC you don’t catch “shift within X^Y from X^Y^Z to X^Y^~Z that doesn’t explain overall shift because XY risk_ratio is 0” which is a problem.<p>DIFF also mitigates the operate issue by limiting the number of total columns combined to produce answer. It’s a nice way to prevent long runtimes but it imposes additional constraints on real world utility - how often is it <i>just</i> version+client+os that’s a problem and not version+client+os+uses_feature+migrated_from_legacy_table? My post is getting too long but many state of the art experimentation tools work around this by controlling for distribution shifts between sets - doesn’t work well with a table of just crashes but works fine once you have a denominator like “usage time”</div><br/></div></div><div id="36889645" class="c"><input type="checkbox" id="c-36889645" checked=""/><div class="controls bullet"><span class="by">aaronblohowiak</span><span>|</span><a href="#36890119">prev</a><span>|</span><label class="collapse" for="c-36889645">[-]</label><label class="expand" for="c-36889645">[1 more]</label></div><br/><div class="children"><div class="content">i wonder if someone has extended postgres to add this yet. googling diff is hard as there are so many other uses of that term.</div><br/></div></div></div></div></div></div></div></body></html>