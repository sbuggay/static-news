<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1686992467816" as="style"/><link rel="stylesheet" href="styles.css?v=1686992467816"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://susam.net/blog/control-escape-meta-tricks.html">Control, escape, and meta tricks</a> <span class="domain">(<a href="https://susam.net">susam.net</a>)</span></div><div class="subtext"><span>susam</span> | <span>14 comments</span></div><br/><div><div id="36365571" class="c"><input type="checkbox" id="c-36365571" checked=""/><div class="controls bullet"><span class="by">kps</span><span>|</span><a href="#36368180">next</a><span>|</span><label class="collapse" for="c-36365571">[-]</label><label class="expand" for="c-36365571">[5 more]</label></div><br/><div class="children"><div class="content">Some of this is not quite right, or right by accident of a particular virtual terminal&#x27;s features and configuration.<p>Having the Alt&#x2F;Option modifier send a prefix ESC is usually a terminal configuration option, though often the default. The most common alternative (other than doing nothing) is to set the 8th bit, which was useful in the ISO8859 days but not so much with UTF-8.<p>The vim section of this article depends on the prefix-ESC behaviour, but vim and neovim (and probably other non-ancient editors) will put a capable terminal into modifyOtherKeys mode. In this state the terminal sends a more detailed escape sequence for modifier key combinations, which permits binding combinations that are not distinguishable in the default ‘plain ASCII’ mode. For example, Control-D will send ESC [ 27 ; 5 ; 100 ~ while Control-Shift-D will send ESC [ 27 ; 6 ; 68 ~ (rather than EOT for both) and Alt-D will send ESC [ 27 ; 6 ; 68 ~ rather than ESC D.<p>(Oddly, the author seems to use vim as an editor but emacs editing mode rather than vi editing mode in the shell.)<p>The ‘special case’ control combinations are explained by the <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Bit-paired_keyboard" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Bit-paired_keyboard</a> where Control does merely flip a bit, originally electromechanically.</div><br/><div id="36368371" class="c"><input type="checkbox" id="c-36368371" checked=""/><div class="controls bullet"><span class="by">susam</span><span>|</span><a href="#36365571">parent</a><span>|</span><a href="#36368128">next</a><span>|</span><label class="collapse" for="c-36368371">[-]</label><label class="expand" for="c-36368371">[1 more]</label></div><br/><div class="children"><div class="content">&gt; or right by accident of a particular virtual terminal&#x27;s features and configuration<p>This is a fair point. Indeed different terminal configurations can produce different results. I have added a little note to my post to clarify this. Thanks for the feedback.<p>&gt; Oddly, the author seems to use vim as an editor<p>I use Emacs.<p>&gt; The ‘special case’ control combinations are explained by the <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Bit-paired_keyboard" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Bit-paired_keyboard</a> where Control does merely flip a bit, originally electromechanically.<p>I don&#x27;t think this explains the special cases in a general sense. Firstly, the Wikipedia article discusses shifted keys, not control codes. Secondly, the special cases still need to be explained on a case-by-case basis. It is clear that the control modifier flips a bit but which bit? In case of ctrl+@, ctrl+g, ctrl+h, etc. the 7th LSB is flipped. In case of ctrl+space, the 6th LSB is flipped. A more general rule that covers most of the cases is that the ctrl modifier resets the 6th and 7th LSBs.</div><br/></div></div><div id="36366093" class="c"><input type="checkbox" id="c-36366093" checked=""/><div class="controls bullet"><span class="by">jmholla</span><span>|</span><a href="#36365571">parent</a><span>|</span><a href="#36368128">prev</a><span>|</span><a href="#36368180">next</a><span>|</span><label class="collapse" for="c-36366093">[-]</label><label class="expand" for="c-36366093">[2 more]</label></div><br/><div class="children"><div class="content">&gt; (Oddly, the author seems to use vim as an editor but emacs editing mode rather than vi editing mode in the shell.)<p>I do the same. I gave vim bindings a try in my shell, but I just couldn&#x27;t get the hang of it. I think vim excels when you are editing multiple lines. And, I can always get to vim to edit the commands if things are getting nuts with Ctrl+X Ctrl+E.</div><br/><div id="36366204" class="c"><input type="checkbox" id="c-36366204" checked=""/><div class="controls bullet"><span class="by">mangamadaiyan</span><span>|</span><a href="#36365571">root</a><span>|</span><a href="#36366093">parent</a><span>|</span><a href="#36368180">next</a><span>|</span><label class="collapse" for="c-36366204">[-]</label><label class="expand" for="c-36366204">[1 more]</label></div><br/><div class="children"><div class="content">Funnily, these days the first thing I do when I start typing at someone else&#x27;s terminal is &quot;set -o vi&quot;. I cannot function effectively without Vi mode in my shell :)</div><br/></div></div></div></div></div></div><div id="36368180" class="c"><input type="checkbox" id="c-36368180" checked=""/><div class="controls bullet"><span class="by">svilen_dobrev</span><span>|</span><a href="#36365571">prev</a><span>|</span><a href="#36364917">next</a><span>|</span><label class="collapse" for="c-36368180">[-]</label><label class="expand" for="c-36368180">[1 more]</label></div><br/><div class="children"><div class="content">that&#x27;s all rather, heavily dependent on lucky combination of at least 2-3 mappings - what 1) X-server&#x2F;graphical-env converts your keyboard into, then what 2) console&#x2F;terminal converts that into, and then what 3) app (vim or bash or whatever) running inside terminal, decides to map (and there maybe more layers before, inside, after or instead of these - e.g. hoping 0) kernel transparently passing stuff to 1). e.g. If running without X&#x2F;graphics, then first is replaced by kernel&#x27;s keyboard processing ; or if running graphical Vim, then 2+3 are replaced..
(ah, and the dual&#x2F;multi mode-ness of vim adds extra layer inside it - making say ctrl-U to do undo <i>always</i> isn&#x27;t that easy)<p>Each of those layers can vary, in different distro&#x27;s, terminals, versions of same thing, etc. Especialy each and every (X-)terminal-thingie having different idea of how to map (or not) ctrl-F2. Some of them going back to the 197x ..<p>i have tried to make myself a one-mapping-fits-all (say, pressing F2 does ls -alF in terminal+shell, and saves-the-buffer in vim, <i>no matter what&#x2F;where&#x2F;when</i>), collecting variants and combinations for last ~25+ years -  incl. linux-console and even dos mapping.. and it works mostly.. but still, no silver bullet.<p>see the qini&#x2F; folder in<p><a href="https:&#x2F;&#x2F;github.com&#x2F;svilendobrev&#x2F;svd_bin">https:&#x2F;&#x2F;github.com&#x2F;svilendobrev&#x2F;svd_bin</a><p>everything may be remapped to your liking.. eventually. YMMV.<p>ciao &amp; have fun</div><br/></div></div><div id="36364917" class="c"><input type="checkbox" id="c-36364917" checked=""/><div class="controls bullet"><span class="by">dietr1ch</span><span>|</span><a href="#36368180">prev</a><span>|</span><label class="collapse" for="c-36364917">[-]</label><label class="expand" for="c-36364917">[7 more]</label></div><br/><div class="children"><div class="content">Interesting to know, but the very notion of control characters seems very odd to me, there&#x27;s no typewriter or printer with a bell around anymore. Will we ever get rid of this?</div><br/><div id="36365003" class="c"><input type="checkbox" id="c-36365003" checked=""/><div class="controls bullet"><span class="by">gumby</span><span>|</span><a href="#36364917">parent</a><span>|</span><a href="#36365070">next</a><span>|</span><label class="collapse" for="c-36365003">[-]</label><label class="expand" for="c-36365003">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s nice to have in-band signalling in addition to out of band.</div><br/></div></div><div id="36365070" class="c"><input type="checkbox" id="c-36365070" checked=""/><div class="controls bullet"><span class="by">13of40</span><span>|</span><a href="#36364917">parent</a><span>|</span><a href="#36365003">prev</a><span>|</span><label class="collapse" for="c-36365070">[-]</label><label class="expand" for="c-36365070">[5 more]</label></div><br/><div class="children"><div class="content">Ctrl-G still beeps your console doesn&#x27;t it?</div><br/><div id="36366120" class="c"><input type="checkbox" id="c-36366120" checked=""/><div class="controls bullet"><span class="by">jmholla</span><span>|</span><a href="#36364917">root</a><span>|</span><a href="#36365070">parent</a><span>|</span><label class="collapse" for="c-36366120">[-]</label><label class="expand" for="c-36366120">[4 more]</label></div><br/><div class="children"><div class="content">It doesn&#x27;t on mine and I&#x27;m not sure why.</div><br/><div id="36366769" class="c"><input type="checkbox" id="c-36366769" checked=""/><div class="controls bullet"><span class="by">quesera</span><span>|</span><a href="#36364917">root</a><span>|</span><a href="#36366120">parent</a><span>|</span><label class="collapse" for="c-36366769">[-]</label><label class="expand" for="c-36366769">[3 more]</label></div><br/><div class="children"><div class="content">Many terminal emulators have a config option to disable audible bell.<p>Some have the option to replace it with a &quot;visual bell&quot;.</div><br/><div id="36367165" class="c"><input type="checkbox" id="c-36367165" checked=""/><div class="controls bullet"><span class="by">toast0</span><span>|</span><a href="#36364917">root</a><span>|</span><a href="#36366769">parent</a><span>|</span><a href="#36368232">next</a><span>|</span><label class="collapse" for="c-36367165">[-]</label><label class="expand" for="c-36367165">[1 more]</label></div><br/><div class="children"><div class="content">Some terminal emulators on PCs beep the PC speaker, rather than play a sound through the (high fidelity) audio device. But many PCs no longer have a PC speaker; one way to get a visual bell if the PC speaker output is used, is to connect the power LED to the speaker pins. Makes the power LED a lot more useful too.</div><br/></div></div><div id="36368232" class="c"><input type="checkbox" id="c-36368232" checked=""/><div class="controls bullet"><span class="by">jmholla</span><span>|</span><a href="#36364917">root</a><span>|</span><a href="#36366769">parent</a><span>|</span><a href="#36367165">prev</a><span>|</span><label class="collapse" for="c-36368232">[-]</label><label class="expand" for="c-36368232">[1 more]</label></div><br/><div class="children"><div class="content">Sadly I checked that and it still doesn&#x27;t work. I&#x27;m using guake on mint.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>