<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1730278864118" as="style"/><link rel="stylesheet" href="styles.css?v=1730278864118"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/kelindar/search">Go library for in-process vector search and embeddings with llama.cpp</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>kelindar</span> | <span>16 comments</span></div><br/><div><div id="41992506" class="c"><input type="checkbox" id="c-41992506" checked=""/><div class="controls bullet"><span class="by">PhilippGille</span><span>|</span><a href="#41968174">next</a><span>|</span><label class="collapse" for="c-41992506">[-]</label><label class="expand" for="c-41992506">[1 more]</label></div><br/><div class="children"><div class="content">Interesting choice to call llama.cpp directly, instead of relying on a server like Ollama. Nice!<p>I wrote a similar library which calls Ollama (or OpenAI, Vertex AI, Cohere, ...), with one benefit being zero library dependencies: <a href="https:&#x2F;&#x2F;github.com&#x2F;philippgille&#x2F;chromem-go">https:&#x2F;&#x2F;github.com&#x2F;philippgille&#x2F;chromem-go</a></div><br/></div></div><div id="41968174" class="c"><input type="checkbox" id="c-41968174" checked=""/><div class="controls bullet"><span class="by">kelindar</span><span>|</span><a href="#41992506">prev</a><span>|</span><a href="#41991349">next</a><span>|</span><label class="collapse" for="c-41968174">[-]</label><label class="expand" for="c-41968174">[5 more]</label></div><br/><div class="children"><div class="content">This library was created to provide an easy and efficient solution for embeddings and vector search, making it perfect for small to medium-scale projects that still need some vector search. It&#x27;s built around a simple idea: if your dataset is small enough, you can achieve accurate results with brute-force techniques, and with some optimizations like SIMD, you can keep things fast and lean.</div><br/><div id="41990182" class="c"><input type="checkbox" id="c-41990182" checked=""/><div class="controls bullet"><span class="by">biomcgary</span><span>|</span><a href="#41968174">parent</a><span>|</span><a href="#41991210">next</a><span>|</span><label class="collapse" for="c-41990182">[-]</label><label class="expand" for="c-41990182">[3 more]</label></div><br/><div class="children"><div class="content">I love that you chose to wrap the C++ with purego instead of requiring CGO! I wrapped Microsoft&#x27;s Lightgbm library and found purego delightful. (To make deployment easier, I embed the compiled library into the Go binary and extract it to a temp directory at runtime. YMMV.)</div><br/><div id="41990964" class="c"><input type="checkbox" id="c-41990964" checked=""/><div class="controls bullet"><span class="by">cyberax</span><span>|</span><a href="#41968174">root</a><span>|</span><a href="#41990182">parent</a><span>|</span><a href="#41991210">next</a><span>|</span><label class="collapse" for="c-41990964">[-]</label><label class="expand" for="c-41990964">[2 more]</label></div><br/><div class="children"><div class="content">This post led me to purego, and I&#x27;ve just finished moving my toy project that uses PKCS#11 libraries from cgo to it. It&#x27;s so much better now! No need to jump through hoops for cross-compilation.</div><br/><div id="41991207" class="c"><input type="checkbox" id="c-41991207" checked=""/><div class="controls bullet"><span class="by">mappu</span><span>|</span><a href="#41968174">root</a><span>|</span><a href="#41990964">parent</a><span>|</span><a href="#41991210">next</a><span>|</span><label class="collapse" for="c-41991207">[-]</label><label class="expand" for="c-41991207">[1 more]</label></div><br/><div class="children"><div class="content">IME Linux and macOS users usually have a compiler available so CGO is mostly only a hassle for Windows, but on Windows this capability is built into the Go stdlib, e.g. `syscall.NewLazyDLL(&quot;msvcrt.dll&quot;).MustFindProc(...)`</div><br/></div></div></div></div></div></div><div id="41991210" class="c"><input type="checkbox" id="c-41991210" checked=""/><div class="controls bullet"><span class="by">jerrygenser</span><span>|</span><a href="#41968174">parent</a><span>|</span><a href="#41990182">prev</a><span>|</span><a href="#41991349">next</a><span>|</span><label class="collapse" for="c-41991210">[-]</label><label class="expand" for="c-41991210">[1 more]</label></div><br/><div class="children"><div class="content">Have you considered using HNSW instead of brute force?</div><br/></div></div></div></div><div id="41991349" class="c"><input type="checkbox" id="c-41991349" checked=""/><div class="controls bullet"><span class="by">huac</span><span>|</span><a href="#41968174">prev</a><span>|</span><a href="#41991380">next</a><span>|</span><label class="collapse" for="c-41991349">[-]</label><label class="expand" for="c-41991349">[2 more]</label></div><br/><div class="children"><div class="content">nice work! I wrote a similar library (<a href="https:&#x2F;&#x2F;github.com&#x2F;stillmatic&#x2F;gollum&#x2F;blob&#x2F;main&#x2F;packages&#x2F;vectorstore&#x2F;vectorstore.go">https:&#x2F;&#x2F;github.com&#x2F;stillmatic&#x2F;gollum&#x2F;blob&#x2F;main&#x2F;packages&#x2F;vect...</a>) and similarly found that exact search (w&#x2F;the same simple heap + SIMD optimizations) is quite fast. with 100k objects, retrieval queries complete in &lt;200ms on an M1 Mac. no need for a fancy vector DB :)<p>that library used `viterin&#x2F;vek` for SIMD math: <a href="https:&#x2F;&#x2F;github.com&#x2F;viterin&#x2F;vek&#x2F;">https:&#x2F;&#x2F;github.com&#x2F;viterin&#x2F;vek&#x2F;</a></div><br/><div id="41992701" class="c"><input type="checkbox" id="c-41992701" checked=""/><div class="controls bullet"><span class="by">neonsunset</span><span>|</span><a href="#41991349">parent</a><span>|</span><a href="#41991380">next</a><span>|</span><label class="collapse" for="c-41992701">[-]</label><label class="expand" for="c-41992701">[1 more]</label></div><br/><div class="children"><div class="content">Look what Go needs to mimic even a fraction of .NET’s SIMD power… ;)</div><br/></div></div></div></div><div id="41991380" class="c"><input type="checkbox" id="c-41991380" checked=""/><div class="controls bullet"><span class="by">ausbah</span><span>|</span><a href="#41991349">prev</a><span>|</span><a href="#41991296">next</a><span>|</span><label class="collapse" for="c-41991380">[-]</label><label class="expand" for="c-41991380">[2 more]</label></div><br/><div class="children"><div class="content">could anyone recommend a similar library for python?</div><br/><div id="41991579" class="c"><input type="checkbox" id="c-41991579" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#41991380">parent</a><span>|</span><a href="#41991296">next</a><span>|</span><label class="collapse" for="c-41991579">[-]</label><label class="expand" for="c-41991579">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve used the Sentence Transformers Python library successfully for this: <a href="https:&#x2F;&#x2F;www.sbert.net&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.sbert.net&#x2F;</a><p>My own LLM CLI tool and Python library includes plugin-based support for embeddings (or you can use API-based embeddings like those from Jina or OpenAI) - here&#x27;s my list of plugins that enable new embeddings models:  <a href="https:&#x2F;&#x2F;llm.datasette.io&#x2F;en&#x2F;stable&#x2F;plugins&#x2F;directory.html#embedding-models" rel="nofollow">https:&#x2F;&#x2F;llm.datasette.io&#x2F;en&#x2F;stable&#x2F;plugins&#x2F;directory.html#em...</a><p>More about that in my embeddings talk from last year: <a href="https:&#x2F;&#x2F;simonwillison.net&#x2F;2023&#x2F;Oct&#x2F;23&#x2F;embeddings&#x2F;" rel="nofollow">https:&#x2F;&#x2F;simonwillison.net&#x2F;2023&#x2F;Oct&#x2F;23&#x2F;embeddings&#x2F;</a></div><br/></div></div></div></div><div id="41991296" class="c"><input type="checkbox" id="c-41991296" checked=""/><div class="controls bullet"><span class="by">fjuafhwasd</span><span>|</span><a href="#41991380">prev</a><span>|</span><a href="#41990894">next</a><span>|</span><label class="collapse" for="c-41991296">[-]</label><label class="expand" for="c-41991296">[1 more]</label></div><br/><div class="children"><div class="content">Do these queries complete within 10ms?</div><br/></div></div><div id="41990894" class="c"><input type="checkbox" id="c-41990894" checked=""/><div class="controls bullet"><span class="by">38</span><span>|</span><a href="#41991296">prev</a><span>|</span><label class="collapse" for="c-41990894">[-]</label><label class="expand" for="c-41990894">[4 more]</label></div><br/><div class="children"><div class="content">&gt; git submodule update --init --recursive<p>nope. this looks cool, but Git submodules are cursed</div><br/><div id="41992769" class="c"><input type="checkbox" id="c-41992769" checked=""/><div class="controls bullet"><span class="by">snovv_crash</span><span>|</span><a href="#41990894">parent</a><span>|</span><a href="#41991136">next</a><span>|</span><label class="collapse" for="c-41992769">[-]</label><label class="expand" for="c-41992769">[1 more]</label></div><br/><div class="children"><div class="content">What&#x27;s a better option for linking 3rd party code?</div><br/></div></div><div id="41991136" class="c"><input type="checkbox" id="c-41991136" checked=""/><div class="controls bullet"><span class="by">IncreasePosts</span><span>|</span><a href="#41990894">parent</a><span>|</span><a href="#41992769">prev</a><span>|</span><a href="#41991477">next</a><span>|</span><label class="collapse" for="c-41991136">[-]</label><label class="expand" for="c-41991136">[1 more]</label></div><br/><div class="children"><div class="content">I think you mean recursed</div><br/></div></div><div id="41991477" class="c"><input type="checkbox" id="c-41991477" checked=""/><div class="controls bullet"><span class="by">o11c</span><span>|</span><a href="#41990894">parent</a><span>|</span><a href="#41991136">prev</a><span>|</span><label class="collapse" for="c-41991477">[-]</label><label class="expand" for="c-41991477">[1 more]</label></div><br/><div class="children"><div class="content">Dip it in a blessed clear potion.</div><br/></div></div></div></div></div></div></div></div></div></body></html>