<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1712566861305" as="style"/><link rel="stylesheet" href="styles.css?v=1712566861305"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/AmrDeveloper/ClangQL">ClangQL: A tool to run SQL-like query on C/C++ Code</a>Â <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>bubblehack3r</span> | <span>25 comments</span></div><br/><div><div id="39962115" class="c"><input type="checkbox" id="c-39962115" checked=""/><div class="controls bullet"><span class="by">frabert</span><span>|</span><a href="#39963707">next</a><span>|</span><label class="collapse" for="c-39962115">[-]</label><label class="expand" for="c-39962115">[3 more]</label></div><br/><div class="children"><div class="content">I made a similar tool with the same name a couple of years ago :D <a href="https:&#x2F;&#x2F;github.com&#x2F;frabert&#x2F;ClangQL">https:&#x2F;&#x2F;github.com&#x2F;frabert&#x2F;ClangQL</a></div><br/><div id="39966970" class="c"><input type="checkbox" id="c-39966970" checked=""/><div class="controls bullet"><span class="by">wizzledonker</span><span>|</span><a href="#39962115">parent</a><span>|</span><a href="#39963718">next</a><span>|</span><label class="collapse" for="c-39966970">[-]</label><label class="expand" for="c-39966970">[1 more]</label></div><br/><div class="children"><div class="content">Yours actually looks useful for my use case (remote debugging wrappers)<p>The schema of the linked post doesn&#x27;t look useful to me at all haha</div><br/></div></div><div id="39963718" class="c"><input type="checkbox" id="c-39963718" checked=""/><div class="controls bullet"><span class="by">mgaunard</span><span>|</span><a href="#39962115">parent</a><span>|</span><a href="#39966970">prev</a><span>|</span><a href="#39963707">next</a><span>|</span><label class="collapse" for="c-39963718">[-]</label><label class="expand" for="c-39963718">[1 more]</label></div><br/><div class="children"><div class="content">Yours looks much better to be honest.</div><br/></div></div></div></div><div id="39963707" class="c"><input type="checkbox" id="c-39963707" checked=""/><div class="controls bullet"><span class="by">mgaunard</span><span>|</span><a href="#39962115">prev</a><span>|</span><a href="#39966158">next</a><span>|</span><label class="collapse" for="c-39963707">[-]</label><label class="expand" for="c-39963707">[7 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not too familiar with Rust, but took a look at the Cargo.lock file of this project.<p>It depends on half the universe for some reason, sometimes multiple versions of the same library. And that doesn&#x27;t even include the main dependency which is libclang.<p>Is the Rust ecosystem just dependency hell?</div><br/><div id="39965530" class="c"><input type="checkbox" id="c-39965530" checked=""/><div class="controls bullet"><span class="by">epage</span><span>|</span><a href="#39963707">parent</a><span>|</span><a href="#39965389">next</a><span>|</span><label class="collapse" for="c-39965530">[-]</label><label class="expand" for="c-39965530">[1 more]</label></div><br/><div class="children"><div class="content">There are a couple of aspects that can make lockfiles deceptive to look at<p>- Lockfiles include dependencies for all platforms, not just the ones you build with, including wasm and Hermit kernel<p>- Due to some quirks, lockfiles include more dependencies than will ever be used (related to a feature called &quot;weak dependency features&quot;).<p>For a more accurate picture, look at `cargo tree` and `cargo tree --target=all`.<p>In this case, a lot of it is that the GitQL SDK depends on gix (gitoxide), a Rust re-implementation of git &#x2F; libgit, which is made up of a lot of crates and depends on a lot of crates.  This dependency should likely not be there and should be fixed.  Even with `default-features = false`, gix pulls in a lot.  Gix should not be relevant to a more generic SDK.<p>The other thing that stood out to me as unnecessary is that comfy-tables pulls in cross-term which has way too large of a dependency for what it is doing.<p>I am surprised at how much `chrono` pulls in but almost all of that is for specific platforms and `chrono` shrinks dramatically when looking only at the native platform.<p>I do see some stray dependencies that have built-in equivalents (lazy_static -&gt; OnceCell, atty -&gt; IsTerminal).  Some of that is due to compatibility with old Rust versions.  There were only a couple of these.</div><br/></div></div><div id="39965389" class="c"><input type="checkbox" id="c-39965389" checked=""/><div class="controls bullet"><span class="by">bastawhiz</span><span>|</span><a href="#39963707">parent</a><span>|</span><a href="#39965530">prev</a><span>|</span><a href="#39964000">next</a><span>|</span><label class="collapse" for="c-39965389">[-]</label><label class="expand" for="c-39965389">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Is the Rust ecosystem just dependency hell?<p>Dependency hell is a consequence of the developer&#x27;s choices, not the ecosystem. The most foundational packages in any ecosystem for any language almost always have a trivial number of dependencies, and not because those packages have no needs.</div><br/></div></div><div id="39964000" class="c"><input type="checkbox" id="c-39964000" checked=""/><div class="controls bullet"><span class="by">lpribis</span><span>|</span><a href="#39963707">parent</a><span>|</span><a href="#39965389">prev</a><span>|</span><a href="#39964843">next</a><span>|</span><label class="collapse" for="c-39964000">[-]</label><label class="expand" for="c-39964000">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Is the Rust ecosystem just dependency hell?<p>Not quite to the extent of the js ecosystem, but yes. Especially for a purported systems language there&#x27;s a lefpad-esque problem of people making tiny and somewhat useless libraries to learn or pad their resume which then get depended on by the world.</div><br/></div></div><div id="39964843" class="c"><input type="checkbox" id="c-39964843" checked=""/><div class="controls bullet"><span class="by">tialaramex</span><span>|</span><a href="#39963707">parent</a><span>|</span><a href="#39964000">prev</a><span>|</span><a href="#39964100">next</a><span>|</span><label class="collapse" for="c-39964843">[-]</label><label class="expand" for="c-39964843">[1 more]</label></div><br/><div class="children"><div class="content">My understanding is that a &quot;dependency hell&quot; first has to be a hell.</div><br/></div></div><div id="39964100" class="c"><input type="checkbox" id="c-39964100" checked=""/><div class="controls bullet"><span class="by">plasticeagle</span><span>|</span><a href="#39963707">parent</a><span>|</span><a href="#39964843">prev</a><span>|</span><a href="#39966158">next</a><span>|</span><label class="collapse" for="c-39964100">[-]</label><label class="expand" for="c-39964100">[2 more]</label></div><br/><div class="children"><div class="content">I think it&#x27;s an inevitable outcome of a build system that makes it so easy to pull in packages - and so easy to create and publish them.<p>This is why C++&#x27;s weakness - difficulty of consuming third party libraries - is actually a strength. If you have to work hard to get third party code in there, you tend to make much better choices and keep your dependencies to a minimum.<p>In Rust, like JS and to a lesser extent Python also, there is no pressure to reduce dependencies. So you end up with this kind of a problem. Good luck upgrading one of those packages when its found to contain a bug.</div><br/></div></div></div></div><div id="39966158" class="c"><input type="checkbox" id="c-39966158" checked=""/><div class="controls bullet"><span class="by">owlstuffing</span><span>|</span><a href="#39963707">prev</a><span>|</span><a href="#39962364">next</a><span>|</span><label class="collapse" for="c-39966158">[-]</label><label class="expand" for="c-39966158">[2 more]</label></div><br/><div class="children"><div class="content">Bit of a tangent, but if we commonly stored source in a standard, fully attributed AST instead of caveman text, caching&#x2F;indexing and deterministic search would be a breeze. So would a million other useful applications such as every other IDE feature and source control.<p>As the decades go by it confounds me that we are still messing with plain text, and with virtually no resistance to it. Maybe it&#x27;s to keep the tabs vs. spaces flame war alive. _shrug_</div><br/><div id="39967630" class="c"><input type="checkbox" id="c-39967630" checked=""/><div class="controls bullet"><span class="by">zokier</span><span>|</span><a href="#39966158">parent</a><span>|</span><a href="#39962364">next</a><span>|</span><label class="collapse" for="c-39967630">[-]</label><label class="expand" for="c-39967630">[1 more]</label></div><br/><div class="children"><div class="content">tbh the on-disk storage format is pretty irrelevant, its all just bits and bytes on disk anyways. for many cases you can consider source text a serialization of ast; no matter how you store it you still need to parse the data somehow. Sure some formats are easier to parse than others (hello sexprs), but that is just minor perf aspect, conceptually its all the same.<p>this closely relates to the missing type discussion, there is no universal &quot;tree&quot; type, and as such it is also difficult to construct any universal &quot;ast&quot; type; different uses need trees structured in different ways: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=39592444">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=39592444</a></div><br/></div></div></div></div><div id="39962364" class="c"><input type="checkbox" id="c-39962364" checked=""/><div class="controls bullet"><span class="by">morgante</span><span>|</span><a href="#39966158">prev</a><span>|</span><a href="#39961958">next</a><span>|</span><label class="collapse" for="c-39962364">[-]</label><label class="expand" for="c-39962364">[1 more]</label></div><br/><div class="children"><div class="content">Cool to see another query language for source code! Yours is definitely closer to SQL than GritQL is.[0] I particularly like the count semantics.<p>[0] <a href="https:&#x2F;&#x2F;github.com&#x2F;getgrit&#x2F;gritql">https:&#x2F;&#x2F;github.com&#x2F;getgrit&#x2F;gritql</a></div><br/></div></div><div id="39961958" class="c"><input type="checkbox" id="c-39961958" checked=""/><div class="controls bullet"><span class="by">giancarlostoro</span><span>|</span><a href="#39962364">prev</a><span>|</span><a href="#39964897">next</a><span>|</span><label class="collapse" for="c-39961958">[-]</label><label class="expand" for="c-39961958">[7 more]</label></div><br/><div class="children"><div class="content">As cool as it looks, I have to ask: why?</div><br/><div id="39965402" class="c"><input type="checkbox" id="c-39965402" checked=""/><div class="controls bullet"><span class="by">bastawhiz</span><span>|</span><a href="#39961958">parent</a><span>|</span><a href="#39962044">next</a><span>|</span><label class="collapse" for="c-39965402">[-]</label><label class="expand" for="c-39965402">[1 more]</label></div><br/><div class="children"><div class="content">How else are you supposed to fluff up your performance self review with real numbers when you can&#x27;t use lines of code?</div><br/></div></div><div id="39962044" class="c"><input type="checkbox" id="c-39962044" checked=""/><div class="controls bullet"><span class="by">Hendrikto</span><span>|</span><a href="#39961958">parent</a><span>|</span><a href="#39965402">prev</a><span>|</span><a href="#39962079">next</a><span>|</span><label class="collapse" for="c-39962044">[-]</label><label class="expand" for="c-39962044">[4 more]</label></div><br/><div class="children"><div class="content">One obvious example would be refactoring. Many patterns are not (easily) expressible as regexes.</div><br/><div id="39962065" class="c"><input type="checkbox" id="c-39962065" checked=""/><div class="controls bullet"><span class="by">eddd-ddde</span><span>|</span><a href="#39961958">root</a><span>|</span><a href="#39962044">parent</a><span>|</span><a href="#39964381">next</a><span>|</span><label class="collapse" for="c-39962065">[-]</label><label class="expand" for="c-39962065">[1 more]</label></div><br/><div class="children"><div class="content">There is also ast grep [0]<p>0: <a href="https:&#x2F;&#x2F;ast-grep.github.io&#x2F;guide&#x2F;introduction.html" rel="nofollow">https:&#x2F;&#x2F;ast-grep.github.io&#x2F;guide&#x2F;introduction.html</a></div><br/></div></div><div id="39964381" class="c"><input type="checkbox" id="c-39964381" checked=""/><div class="controls bullet"><span class="by">yodsanklai</span><span>|</span><a href="#39961958">root</a><span>|</span><a href="#39962044">parent</a><span>|</span><a href="#39962065">prev</a><span>|</span><a href="#39963100">next</a><span>|</span><label class="collapse" for="c-39964381">[-]</label><label class="expand" for="c-39964381">[1 more]</label></div><br/><div class="children"><div class="content">Wouldn&#x27;t you use tools like clang-tidy for that use case? wouldn&#x27;t it be more flexible and general? Also does this project let you rewrite code or only run queries?</div><br/></div></div><div id="39963100" class="c"><input type="checkbox" id="c-39963100" checked=""/><div class="controls bullet"><span class="by">giancarlostoro</span><span>|</span><a href="#39961958">root</a><span>|</span><a href="#39962044">parent</a><span>|</span><a href="#39964381">prev</a><span>|</span><a href="#39962079">next</a><span>|</span><label class="collapse" for="c-39963100">[-]</label><label class="expand" for="c-39963100">[1 more]</label></div><br/><div class="children"><div class="content">Ah so this is useful for IDE tooling and I guess someone grokking to see how much impact a change has, yeah makes sense.</div><br/></div></div></div></div></div></div><div id="39964897" class="c"><input type="checkbox" id="c-39964897" checked=""/><div class="controls bullet"><span class="by">rodrigobellusci</span><span>|</span><a href="#39961958">prev</a><span>|</span><a href="#39963251">next</a><span>|</span><label class="collapse" for="c-39964897">[-]</label><label class="expand" for="c-39964897">[1 more]</label></div><br/><div class="children"><div class="content">Maaaan I&#x27;ve wanted this for a while for Java and Dart (for flutter apps). Nice job!</div><br/></div></div><div id="39963251" class="c"><input type="checkbox" id="c-39963251" checked=""/><div class="controls bullet"><span class="by">wruza</span><span>|</span><a href="#39964897">prev</a><span>|</span><a href="#39962272">next</a><span>|</span><label class="collapse" for="c-39963251">[-]</label><label class="expand" for="c-39963251">[1 more]</label></div><br/><div class="children"><div class="content">Why no line:col info?</div><br/></div></div><div id="39962272" class="c"><input type="checkbox" id="c-39962272" checked=""/><div class="controls bullet"><span class="by">cozzyd</span><span>|</span><a href="#39963251">prev</a><span>|</span><a href="#39962460">next</a><span>|</span><label class="collapse" for="c-39962272">[-]</label><label class="expand" for="c-39962272">[1 more]</label></div><br/><div class="children"><div class="content">Wonder how it deals with templates</div><br/></div></div><div id="39962460" class="c"><input type="checkbox" id="c-39962460" checked=""/><div class="controls bullet"><span class="by">ranger_danger</span><span>|</span><a href="#39962272">prev</a><span>|</span><label class="collapse" for="c-39962460">[-]</label><label class="expand" for="c-39962460">[1 more]</label></div><br/><div class="children"><div class="content">Do you have any binaries? Stock ubuntu 22.04 does not have new enough versions of things to build this.</div><br/></div></div></div></div></div></div></div></body></html>