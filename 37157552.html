<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1692262859981" as="style"/><link rel="stylesheet" href="styles.css?v=1692262859981"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://wingolog.org/archives/2023/03/20/a-world-to-win-webassembly-for-the-rest-of-us">A world to win: WebAssembly for the rest of us</a> <span class="domain">(<a href="https://wingolog.org">wingolog.org</a>)</span></div><div class="subtext"><span>fulafel</span> | <span>14 comments</span></div><br/><div><div id="37158821" class="c"><input type="checkbox" id="c-37158821" checked=""/><div class="controls bullet"><span class="by">katspaugh</span><span>|</span><a href="#37158681">next</a><span>|</span><label class="collapse" for="c-37158821">[-]</label><label class="expand" for="c-37158821">[1 more]</label></div><br/><div class="children"><div class="content">Here&#x27;s a youtube video of this talk: <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=lUCegCa7A08">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=lUCegCa7A08</a><p>Really excited about Scheme compiling to WebAssembly. A whole world of possibilities indeed!</div><br/></div></div><div id="37158681" class="c"><input type="checkbox" id="c-37158681" checked=""/><div class="controls bullet"><span class="by">flohofwoe</span><span>|</span><a href="#37158821">prev</a><span>|</span><a href="#37158139">next</a><span>|</span><label class="collapse" for="c-37158681">[-]</label><label class="expand" for="c-37158681">[1 more]</label></div><br/><div class="children"><div class="content">Apparently &quot;the rest of us&quot; is people interested in using garbage-collected languages with WASM, because the post is mostly about the new-ish GC support in WASM.</div><br/></div></div><div id="37158139" class="c"><input type="checkbox" id="c-37158139" checked=""/><div class="controls bullet"><span class="by">JenrHywy</span><span>|</span><a href="#37158681">prev</a><span>|</span><a href="#37158536">next</a><span>|</span><label class="collapse" for="c-37158139">[-]</label><label class="expand" for="c-37158139">[9 more]</label></div><br/><div class="children"><div class="content">Admittedly I only scanned the article, but I didn&#x27;t see any mention of C# or Blazor. I&#x27;ve only fiddled with it, but it seems that (when targeting WASM) Blazor loads a (partial) .NET runtime in WASM and then happily lets your execute C# code - which seems in stark contrast to the article&#x27;s claims about GC.</div><br/><div id="37158480" class="c"><input type="checkbox" id="c-37158480" checked=""/><div class="controls bullet"><span class="by">jillesvangurp</span><span>|</span><a href="#37158139">parent</a><span>|</span><a href="#37158703">next</a><span>|</span><label class="collapse" for="c-37158480">[-]</label><label class="expand" for="c-37158480">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s so far the strategy. There are all sorts of garbage collected and interpreted things that run fine in wasm. But at the price of having to include a heavy runtime; which bloats the binaries. Not a showstopper for some things; like enterprise applications running in a fast network. But a bit of a blocker for normal websites.<p>Firefox and Chrome actually have support for the new GC and threading support in wasm. That&#x27;s behind a few feature flags. But e.g. Kotlin&#x27;s new wasm compiler depends on that and manages to ship binaries that are quite small. That compiler is also being used for a new experimental target for compose multiplatform, which is based on Google&#x27;s Android Jetpack Compose and extends it to other platforms (IOS, Desktop, and Web). Web now comes in two variants: html &amp; kotlin&#x2F;js and canvas + wasm. The latter renders using the same graphics libraries used on Android and IOS but compiled to wasm. None of this stuff is ready yet because the tooling and frameworks are pre-alpha quality and it requires feature flags to be set by the user. But, this is starting to look like a nice alternative stack to things like flutter and react native for cross mobile, desktop, and web development.<p>The feature flags are likely coming off fairly soon. Safari is a bit behind. 2024 is going to be interesting. I&#x27;m guessing there will be a whole lot of activity around this in most commonly used languages and stacks.</div><br/></div></div><div id="37158703" class="c"><input type="checkbox" id="c-37158703" checked=""/><div class="controls bullet"><span class="by">flohofwoe</span><span>|</span><a href="#37158139">parent</a><span>|</span><a href="#37158480">prev</a><span>|</span><a href="#37158175">next</a><span>|</span><label class="collapse" for="c-37158703">[-]</label><label class="expand" for="c-37158703">[1 more]</label></div><br/><div class="children"><div class="content">Before WASM&#x27;s GC feature was ready, it was basically &quot;bring your own GC&quot; which had to run entirely within the WASM context. With the new GC support in WASM, it&#x27;s now possible to delegate this job to the WASM runtime by exposing garbage-collected-references to the outside world (for instance in browsers that would be the JS engine garbage collector).</div><br/></div></div><div id="37158175" class="c"><input type="checkbox" id="c-37158175" checked=""/><div class="controls bullet"><span class="by">fulafel</span><span>|</span><a href="#37158139">parent</a><span>|</span><a href="#37158703">prev</a><span>|</span><a href="#37158269">next</a><span>|</span><label class="collapse" for="c-37158175">[-]</label><label class="expand" for="c-37158175">[2 more]</label></div><br/><div class="children"><div class="content">It doesn&#x27;t claim DIY GC is impossible:<p>The article first talks about difficulties a ship-your-own-GC faces, and enumerates workarounds for them (slide &quot;GC and WebAssembly 1.0 (3)&quot; and coupe of next ones).<p>Then it starts talking about the planned GC support extension in WebAssembly and decides to go with that.</div><br/><div id="37158452" class="c"><input type="checkbox" id="c-37158452" checked=""/><div class="controls bullet"><span class="by">JenrHywy</span><span>|</span><a href="#37158139">root</a><span>|</span><a href="#37158175">parent</a><span>|</span><a href="#37158269">next</a><span>|</span><label class="collapse" for="c-37158452">[-]</label><label class="expand" for="c-37158452">[1 more]</label></div><br/><div class="children"><div class="content">Sure, but I thought that a successfully implemented CG&#x27;d language running on WASM would have been something worth noting.</div><br/></div></div></div></div><div id="37158269" class="c"><input type="checkbox" id="c-37158269" checked=""/><div class="controls bullet"><span class="by">baq</span><span>|</span><a href="#37158139">parent</a><span>|</span><a href="#37158175">prev</a><span>|</span><a href="#37158389">next</a><span>|</span><label class="collapse" for="c-37158269">[-]</label><label class="expand" for="c-37158269">[3 more]</label></div><br/><div class="children"><div class="content">The article references browsers and JavaScript, so that’s the context. Nevertheless I found it quite interesting.</div><br/><div id="37158418" class="c"><input type="checkbox" id="c-37158418" checked=""/><div class="controls bullet"><span class="by">JenrHywy</span><span>|</span><a href="#37158139">root</a><span>|</span><a href="#37158269">parent</a><span>|</span><a href="#37158389">next</a><span>|</span><label class="collapse" for="c-37158418">[-]</label><label class="expand" for="c-37158418">[2 more]</label></div><br/><div class="children"><div class="content">Maybe we read different articles? I thought the context was how it was hard to do GC in WASM currently, which is why we don&#x27;t have many language choices. With <i>that</i> context, C# running on top of WASM seems pretty relevant?</div><br/><div id="37158739" class="c"><input type="checkbox" id="c-37158739" checked=""/><div class="controls bullet"><span class="by">flohofwoe</span><span>|</span><a href="#37158139">root</a><span>|</span><a href="#37158418">parent</a><span>|</span><a href="#37158389">next</a><span>|</span><label class="collapse" for="c-37158739">[-]</label><label class="expand" for="c-37158739">[1 more]</label></div><br/><div class="children"><div class="content">Garbage collected languages have been running in WASM for a long time already, but they had to &quot;bring their own garbage collector&quot; to run in WASM, which increases the size of the WASM blob.<p>Garbage collection can now be delegated to the WASM runtime instead (e.g. see the short description here: <a href="https:&#x2F;&#x2F;chromestatus.com&#x2F;feature&#x2F;6062715726462976" rel="nofollow noreferrer">https:&#x2F;&#x2F;chromestatus.com&#x2F;feature&#x2F;6062715726462976</a>)</div><br/></div></div></div></div></div></div><div id="37158389" class="c"><input type="checkbox" id="c-37158389" checked=""/><div class="controls bullet"><span class="by">kevingadd</span><span>|</span><a href="#37158139">parent</a><span>|</span><a href="#37158269">prev</a><span>|</span><a href="#37158536">next</a><span>|</span><label class="collapse" for="c-37158389">[-]</label><label class="expand" for="c-37158389">[1 more]</label></div><br/><div class="children"><div class="content">DIY GC is definitely harder in WebAssembly than on most targets due to, among other problems, the lack of stack-walking</div><br/></div></div></div></div><div id="37158536" class="c"><input type="checkbox" id="c-37158536" checked=""/><div class="controls bullet"><span class="by">bentobean</span><span>|</span><a href="#37158139">prev</a><span>|</span><label class="collapse" for="c-37158536">[-]</label><label class="expand" for="c-37158536">[2 more]</label></div><br/><div class="children"><div class="content">&gt; “Good day, <i>comrades</i>.”<p>No. Next. I have such a strong aversion to this word that I immediately checked out.</div><br/><div id="37158757" class="c"><input type="checkbox" id="c-37158757" checked=""/><div class="controls bullet"><span class="by">DC-3</span><span>|</span><a href="#37158536">parent</a><span>|</span><label class="collapse" for="c-37158757">[-]</label><label class="expand" for="c-37158757">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a joke. The whole presentation is riffing on the Communist Manifesto.</div><br/></div></div></div></div></div></div></div></div></div></body></html>