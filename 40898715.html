<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1720602064561" as="style"/><link rel="stylesheet" href="styles.css?v=1720602064561"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://garrettdbates.com/2024/07/07/why-use-onion-layering.html">Why Use Onion Layering?</a> <span class="domain">(<a href="https://garrettdbates.com">garrettdbates.com</a>)</span></div><div class="subtext"><span>thunderbong</span> | <span>12 comments</span></div><br/><div><div id="40923343" class="c"><input type="checkbox" id="c-40923343" checked=""/><div class="controls bullet"><span class="by">theamk</span><span>|</span><a href="#40924491">next</a><span>|</span><label class="collapse" for="c-40923343">[-]</label><label class="expand" for="c-40923343">[3 more]</label></div><br/><div class="children"><div class="content">Reads like a middle part of the post... What exactly does author mean by &quot;onion layering&quot; and what are they being opposed to?<p>The author supplies some examples (new API field, new microservice dependency, new library dependency) but their fixes seem to apply to any well-organized code - I don&#x27;t see why you&#x27;d need to use some mysterious &quot;onion layering&quot; to create a wrapper around insane dependency and isolate it from the rest of the code.<p>(Google searches show only a few results and they all seem slightly different, so I am guessing this variant of &quot;onion layering&quot; is something author made up but didn&#x27;t share with anyone - their blog has only one post)</div><br/><div id="40923554" class="c"><input type="checkbox" id="c-40923554" checked=""/><div class="controls bullet"><span class="by">8note</span><span>|</span><a href="#40923343">parent</a><span>|</span><a href="#40923994">next</a><span>|</span><label class="collapse" for="c-40923554">[-]</label><label class="expand" for="c-40923554">[1 more]</label></div><br/><div class="children"><div class="content">I think you&#x27;re looking for <a href="https:&#x2F;&#x2F;jeffreypalermo.com&#x2F;2008&#x2F;07&#x2F;the-onion-architecture-part-1&#x2F;" rel="nofollow">https:&#x2F;&#x2F;jeffreypalermo.com&#x2F;2008&#x2F;07&#x2F;the-onion-architecture-pa...</a></div><br/></div></div><div id="40923994" class="c"><input type="checkbox" id="c-40923994" checked=""/><div class="controls bullet"><span class="by">cjohnson318</span><span>|</span><a href="#40923343">parent</a><span>|</span><a href="#40923554">prev</a><span>|</span><a href="#40924491">next</a><span>|</span><label class="collapse" for="c-40923994">[-]</label><label class="expand" for="c-40923994">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, I was confused. This is basically just, &quot;have well defined interfaces, and pass simple data through them&quot;, but with no concrete examples.</div><br/></div></div></div></div><div id="40924491" class="c"><input type="checkbox" id="c-40924491" checked=""/><div class="controls bullet"><span class="by">pyinstallwoes</span><span>|</span><a href="#40923343">prev</a><span>|</span><a href="#40923708">next</a><span>|</span><label class="collapse" for="c-40924491">[-]</label><label class="expand" for="c-40924491">[1 more]</label></div><br/><div class="children"><div class="content">Indirection?</div><br/></div></div><div id="40923708" class="c"><input type="checkbox" id="c-40923708" checked=""/><div class="controls bullet"><span class="by">DrMiaow</span><span>|</span><a href="#40924491">prev</a><span>|</span><label class="collapse" for="c-40923708">[-]</label><label class="expand" for="c-40923708">[7 more]</label></div><br/><div class="children"><div class="content">Isn&#x27;t this how everyone (competent) designs systems?</div><br/><div id="40924587" class="c"><input type="checkbox" id="c-40924587" checked=""/><div class="controls bullet"><span class="by">tomck</span><span>|</span><a href="#40923708">parent</a><span>|</span><a href="#40924249">next</a><span>|</span><label class="collapse" for="c-40924587">[-]</label><label class="expand" for="c-40924587">[2 more]</label></div><br/><div class="children"><div class="content">No, this is how everyone incompetent designs systems<p>Layers of generic APIs required to be 1000x more complex than would be required if they were just coupled to the layer above<p>Changing requirements means tunneling data through many layers<p>Layers are generic, which means either you tightly couple your APIs for the above-layer&#x27;s use case, or your API will limit the performance of your system<p>Everyone who <i>thinks</i> they can design systems does it this way, then they end up managing a system that runs 10x slower than it should + complaining about managers changing requirements &#x27;at the last minute&#x27;</div><br/><div id="40924856" class="c"><input type="checkbox" id="c-40924856" checked=""/><div class="controls bullet"><span class="by">vbezhenar</span><span>|</span><a href="#40923708">root</a><span>|</span><a href="#40924587">parent</a><span>|</span><a href="#40924249">next</a><span>|</span><label class="collapse" for="c-40924856">[-]</label><label class="expand" for="c-40924856">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t follow your reasoning.<p>The point of abstraction is to limit blast radius of requirement changes.<p>Someone decides to rename field in API? You don&#x27;t need to change your database schema and 100500 microservices on top of it. You just change DTO object and keep old name in the other places. May be you&#x27;ll change old name some day, but you can do it in small steps.<p>If your layer repeats another layer, why is it a layer in the first place? The point of layer is to introduce abstraction and redirection. There&#x27;s cost and there&#x27;s gain.<p>Every problem can be solved by introducing another layer of indirection. Except the problem of having too many layers of indirection.</div><br/></div></div></div></div><div id="40924249" class="c"><input type="checkbox" id="c-40924249" checked=""/><div class="controls bullet"><span class="by">whstl</span><span>|</span><a href="#40923708">parent</a><span>|</span><a href="#40924587">prev</a><span>|</span><a href="#40924198">next</a><span>|</span><label class="collapse" for="c-40924249">[-]</label><label class="expand" for="c-40924249">[1 more]</label></div><br/><div class="children"><div class="content">I feel like systems design is a bit like the Anna Karenina quote, every good software is alike, but the bad ones are different in their own way.<p>The Gary Bernhardt talk &quot;Boundaries&quot; shows an end result that is very close to The Onion Architecture presented here. And Onion is of course very close to the also popular Clean Architecture and Hexagonal Architecture. Which at the end are very close to applications built using the principles that cjohnson318 mentioned: &quot;have well defined interfaces, and pass simple data through them&quot;.<p>This is all very close to some of the principles Bertrand Meyer teaches. For example, having different modules that make decisions and different modules that perform actions. Which is close to Event Sourcing and CQRS. Which once again is close to BASIC having SUBs and FUNs.<p>Sure, under a microscope you will have different terminologies, and even apply different techniques and patterns, but the principles in the end are very similar. You might not have anti-corruption layers anywhere, as the sibling commenter mentioned, but that&#x27;s missing the forest for the trees: the end goal and end result are virtually the same, even if the implementation is different.<p>In the end happy families have different socioeconomic backgrounds, different ethnicities and religions, but they&#x27;re still alike. It&#x27;s the bad ones that have lots of special cases and exceptions everywhere in their design or whatever it is.</div><br/></div></div><div id="40924198" class="c"><input type="checkbox" id="c-40924198" checked=""/><div class="controls bullet"><span class="by">Sankozi</span><span>|</span><a href="#40923708">parent</a><span>|</span><a href="#40924249">prev</a><span>|</span><a href="#40923883">next</a><span>|</span><label class="collapse" for="c-40924198">[-]</label><label class="expand" for="c-40924198">[1 more]</label></div><br/><div class="children"><div class="content">No, you do not need to design system like that. Just because there is a chance that something might change (domain logic, library&#x2F;REST API), does not mean you need to create anti corruption layers everywhere. They limit problems during the (possible but not certain) change but they make code less readable, less performant and harder to test.<p>Always analyze and decide if it is worth it.</div><br/></div></div><div id="40923883" class="c"><input type="checkbox" id="c-40923883" checked=""/><div class="controls bullet"><span class="by">efnx</span><span>|</span><a href="#40923708">parent</a><span>|</span><a href="#40924198">prev</a><span>|</span><label class="collapse" for="c-40923883">[-]</label><label class="expand" for="c-40923883">[2 more]</label></div><br/><div class="children"><div class="content">You would hope, but some folks don’t have a background in APIs and don’t really know when life could be better.</div><br/><div id="40924102" class="c"><input type="checkbox" id="c-40924102" checked=""/><div class="controls bullet"><span class="by">barbariangrunge</span><span>|</span><a href="#40923708">root</a><span>|</span><a href="#40923883">parent</a><span>|</span><label class="collapse" for="c-40924102">[-]</label><label class="expand" for="c-40924102">[1 more]</label></div><br/><div class="children"><div class="content">What do you mean by background in apis? You mean experience working with them?</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>