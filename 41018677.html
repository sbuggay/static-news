<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1721552453418" as="style"/><link rel="stylesheet" href="styles.css?v=1721552453418"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://radanskoric.com/experiments/minesweeper-100-lines-of-clean-ruby">Exercise: Minesweeper in 100 lines of Ruby</a> <span class="domain">(<a href="https://radanskoric.com">radanskoric.com</a>)</span></div><div class="subtext"><span>damir</span> | <span>20 comments</span></div><br/><div><div id="41022723" class="c"><input type="checkbox" id="c-41022723" checked=""/><div class="controls bullet"><span class="by">waf</span><span>|</span><a href="#41021327">next</a><span>|</span><label class="collapse" for="c-41022723">[-]</label><label class="expand" for="c-41022723">[1 more]</label></div><br/><div class="children"><div class="content">Fun exercise! I found that the Ruby in this post resembles modern C# (probably because Ruby is a gold standard in readability, and in the last 5 years or so C# has been making big strides in readability). I&#x27;ve recreated the Ruby code mostly line-for-line in C# and posted it here: <a href="https:&#x2F;&#x2F;gist.github.com&#x2F;waf&#x2F;5c6a04899e8250cb9a89406b978c9bcc" rel="nofollow">https:&#x2F;&#x2F;gist.github.com&#x2F;waf&#x2F;5c6a04899e8250cb9a89406b978c9bcc</a><p>It mapped from Ruby to C# really well. The only concept I had to add was a `BoardCell` base type for the `Mine` and `Empty` types so we could return either `Mine` or `Empty` in a typesafe way. Everything else matched conceptually 1-1.<p>It&#x27;s 118 lines total, with 18 lines of whitespace, so 100 lines exactly. I figure the original Ruby code was also not counting whitespace so it&#x27;s a fair comparison. I tried to not use any &quot;code golf tricks&quot; that would minimize line count. It&#x27;s a full program; it could be copy&#x2F;pasted into a modern .NET 8 project and run without any additional setup.<p>Note, I posted this same comment on the original blog post, but I&#x27;ve posted it here too as it might be interesting for HN folks.</div><br/></div></div><div id="41021327" class="c"><input type="checkbox" id="c-41021327" checked=""/><div class="controls bullet"><span class="by">akdfax</span><span>|</span><a href="#41022723">prev</a><span>|</span><a href="#41021336">next</a><span>|</span><label class="collapse" for="c-41021327">[-]</label><label class="expand" for="c-41021327">[1 more]</label></div><br/><div class="children"><div class="content">Very nice syntax. Ruby is definitely underappreciated at the moment.</div><br/></div></div><div id="41021336" class="c"><input type="checkbox" id="c-41021336" checked=""/><div class="controls bullet"><span class="by">pooriar</span><span>|</span><a href="#41021327">prev</a><span>|</span><a href="#41021820">next</a><span>|</span><label class="collapse" for="c-41021336">[-]</label><label class="expand" for="c-41021336">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m currently implementing my favorite 2 player board game - Raptor - in Ruby, and this article is giving me great ideas for how to structure it better. Thanks so much to the author for writing this up!</div><br/></div></div><div id="41021820" class="c"><input type="checkbox" id="c-41021820" checked=""/><div class="controls bullet"><span class="by">raymond_goo</span><span>|</span><a href="#41021336">prev</a><span>|</span><a href="#41021409">next</a><span>|</span><label class="collapse" for="c-41021820">[-]</label><label class="expand" for="c-41021820">[2 more]</label></div><br/><div class="children"><div class="content">I raise you 49 lines of typescript<p><a href="https:&#x2F;&#x2F;stackblitz.com&#x2F;edit&#x2F;gridgame-minesweeper?file=index.ts" rel="nofollow">https:&#x2F;&#x2F;stackblitz.com&#x2F;edit&#x2F;gridgame-minesweeper?file=index....</a></div><br/><div id="41022046" class="c"><input type="checkbox" id="c-41022046" checked=""/><div class="controls bullet"><span class="by">fuzzy_biscuit</span><span>|</span><a href="#41021820">parent</a><span>|</span><a href="#41021409">next</a><span>|</span><label class="collapse" for="c-41022046">[-]</label><label class="expand" for="c-41022046">[1 more]</label></div><br/><div class="children"><div class="content">Not a great analog since the gridgame dependency being pulled in is already over 200 lines.</div><br/></div></div></div></div><div id="41021409" class="c"><input type="checkbox" id="c-41021409" checked=""/><div class="controls bullet"><span class="by">RodgerTheGreat</span><span>|</span><a href="#41021820">prev</a><span>|</span><a href="#41019927">next</a><span>|</span><label class="collapse" for="c-41021409">[-]</label><label class="expand" for="c-41021409">[2 more]</label></div><br/><div class="children"><div class="content">I had a go at an implementation of my own in Lil, using an imperative style rather than OOP. I tried to loosely follow the organization as shown here, but opted for a very different board representation, and I included some niceties like displaying board legends to aid in choosing the proper coordinates.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;JohnEarnest&#x2F;Decker&#x2F;blob&#x2F;main&#x2F;examples&#x2F;lilt&#x2F;mines.lil">https:&#x2F;&#x2F;github.com&#x2F;JohnEarnest&#x2F;Decker&#x2F;blob&#x2F;main&#x2F;examples&#x2F;lil...</a><p>I&#x27;m really not convinced that OOP simplifies or clarifies this type of program.</div><br/><div id="41022618" class="c"><input type="checkbox" id="c-41022618" checked=""/><div class="controls bullet"><span class="by">codesnik</span><span>|</span><a href="#41021409">parent</a><span>|</span><a href="#41019927">next</a><span>|</span><label class="collapse" for="c-41022618">[-]</label><label class="expand" for="c-41022618">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;d too probably write it in Ruby using classes basically just as modules and not much else. It&#x27;s totally fine using simple arrays and hashes in Ruby for data structures. For example, unlike in many other languages, board could be just a hash of booleans addressed by &quot;tuples&quot;, like @board = {[x1, y1] =&gt; true, [x2, y2] =&gt; true}, which makes neighbours check trivial, while board will be sufficiently compact.</div><br/></div></div></div></div><div id="41019927" class="c"><input type="checkbox" id="c-41019927" checked=""/><div class="controls bullet"><span class="by">igor47</span><span>|</span><a href="#41021409">prev</a><span>|</span><a href="#41021277">next</a><span>|</span><label class="collapse" for="c-41019927">[-]</label><label class="expand" for="c-41019927">[3 more]</label></div><br/><div class="children"><div class="content">Cool! Mine sweeper is a really fun easy game to implement. I did a version in Python a few years ago: <a href="https:&#x2F;&#x2F;github.com&#x2F;igor47&#x2F;sweeper">https:&#x2F;&#x2F;github.com&#x2F;igor47&#x2F;sweeper</a> but mine is closer to 500 lines</div><br/><div id="41020791" class="c"><input type="checkbox" id="c-41020791" checked=""/><div class="controls bullet"><span class="by">darthg0d</span><span>|</span><a href="#41019927">parent</a><span>|</span><a href="#41021277">next</a><span>|</span><label class="collapse" for="c-41020791">[-]</label><label class="expand" for="c-41020791">[2 more]</label></div><br/><div class="children"><div class="content">Ditto. I did the same with GoLang a couple of years back, but didn&#x27;t aim for clean&#x2F;terse code: <a href="https:&#x2F;&#x2F;github.com&#x2F;jedib0t&#x2F;go-mines">https:&#x2F;&#x2F;github.com&#x2F;jedib0t&#x2F;go-mines</a></div><br/><div id="41023437" class="c"><input type="checkbox" id="c-41023437" checked=""/><div class="controls bullet"><span class="by">BogdanOlar</span><span>|</span><a href="#41019927">root</a><span>|</span><a href="#41020791">parent</a><span>|</span><a href="#41021277">next</a><span>|</span><label class="collapse" for="c-41023437">[-]</label><label class="expand" for="c-41023437">[1 more]</label></div><br/><div class="children"><div class="content">Same, in Rust, just as an exercise to get familiar with GUIs. So I ended implementing it twice, once with `iced`: <a href="https:&#x2F;&#x2F;github.com&#x2F;BogdanOlar&#x2F;iced-minesweep-rs">https:&#x2F;&#x2F;github.com&#x2F;BogdanOlar&#x2F;iced-minesweep-rs</a> , and with `egui`: <a href="https:&#x2F;&#x2F;github.com&#x2F;BogdanOlar&#x2F;egui-minesweep-rs">https:&#x2F;&#x2F;github.com&#x2F;BogdanOlar&#x2F;egui-minesweep-rs</a> , using the common `minefield-rs` library: <a href="https:&#x2F;&#x2F;github.com&#x2F;BogdanOlar&#x2F;minefield-rs">https:&#x2F;&#x2F;github.com&#x2F;BogdanOlar&#x2F;minefield-rs</a><p>It&#x27;s a really fun exercise, and a good way to practice new skills. Highly recommend it.</div><br/></div></div></div></div></div></div><div id="41021277" class="c"><input type="checkbox" id="c-41021277" checked=""/><div class="controls bullet"><span class="by">twobitshifter</span><span>|</span><a href="#41019927">prev</a><span>|</span><a href="#41020758">next</a><span>|</span><label class="collapse" for="c-41021277">[-]</label><label class="expand" for="c-41021277">[4 more]</label></div><br/><div class="children"><div class="content">don’t you have to be able to flag the mines?</div><br/><div id="41021470" class="c"><input type="checkbox" id="c-41021470" checked=""/><div class="controls bullet"><span class="by">RodgerTheGreat</span><span>|</span><a href="#41021277">parent</a><span>|</span><a href="#41021904">next</a><span>|</span><label class="collapse" for="c-41021470">[-]</label><label class="expand" for="c-41021470">[1 more]</label></div><br/><div class="children"><div class="content">Flagging mines is a nice convenience&#x2F;usability feature, but if you&#x27;re aiming for minimalism, the game can be considered complete when mine locations are the only un-revealed tiles.</div><br/></div></div><div id="41021904" class="c"><input type="checkbox" id="c-41021904" checked=""/><div class="controls bullet"><span class="by">IncreasePosts</span><span>|</span><a href="#41021277">parent</a><span>|</span><a href="#41021470">prev</a><span>|</span><a href="#41021437">next</a><span>|</span><label class="collapse" for="c-41021904">[-]</label><label class="expand" for="c-41021904">[1 more]</label></div><br/><div class="children"><div class="content">If you&#x27;re a beginner you do.</div><br/></div></div><div id="41021437" class="c"><input type="checkbox" id="c-41021437" checked=""/><div class="controls bullet"><span class="by">msephton</span><span>|</span><a href="#41021277">parent</a><span>|</span><a href="#41021904">prev</a><span>|</span><a href="#41020758">next</a><span>|</span><label class="collapse" for="c-41021437">[-]</label><label class="expand" for="c-41021437">[1 more]</label></div><br/><div class="children"><div class="content">Indeed, it&#x27;s an important omission.</div><br/></div></div></div></div><div id="41020758" class="c"><input type="checkbox" id="c-41020758" checked=""/><div class="controls bullet"><span class="by">henning</span><span>|</span><a href="#41021277">prev</a><span>|</span><label class="collapse" for="c-41020758">[-]</label><label class="expand" for="c-41020758">[5 more]</label></div><br/><div class="children"><div class="content">The stupid thing about object-oriented programming and modern software is that code like this would never make it through code review on an &quot;agile&quot; team.<p>- &quot;Oh, why are you doing procedural case statements? that&#x27;s a SOLID anti-pattern, please refactor to polymorphism&quot;<p>- &quot;Oh, why is the Ascii Renderer class meddling in cell mine logic? `cell.neighbour_mines.zero? ? &quot;_&quot; : cell.neighbour_mines` should be its own method in a `Mine` class that is properly tested&quot;<p>You&#x27;re never allowed to just write code that solves a problem. It never ends. Your team has unlimited authority to slow you down with completely useless &quot;feedback&quot; that does not help anyone.</div><br/><div id="41021384" class="c"><input type="checkbox" id="c-41021384" checked=""/><div class="controls bullet"><span class="by">breckenedge</span><span>|</span><a href="#41020758">parent</a><span>|</span><a href="#41021119">next</a><span>|</span><label class="collapse" for="c-41021384">[-]</label><label class="expand" for="c-41021384">[1 more]</label></div><br/><div class="children"><div class="content">Sounds like a pretty dysfunctional team, not due to code review or agile.<p>When I’ve found myself on teams like this, as a junior engineer I just did what was asked to get along and get experience. As a senior engineer, I often looked for a new job. As a staff engineer, I push back with as much politeness as I can.<p>Many engineers out there have traded getting it done for perfection. That’s not good judgement.</div><br/></div></div><div id="41021119" class="c"><input type="checkbox" id="c-41021119" checked=""/><div class="controls bullet"><span class="by">episteme</span><span>|</span><a href="#41020758">parent</a><span>|</span><a href="#41021384">prev</a><span>|</span><a href="#41022667">next</a><span>|</span><label class="collapse" for="c-41021119">[-]</label><label class="expand" for="c-41021119">[1 more]</label></div><br/><div class="children"><div class="content">And those would be valid comments within a production system maintained by a team. If you think code written as a play exercise and as part of professional software environments should be the same then you need to start listening to your team.</div><br/></div></div><div id="41022667" class="c"><input type="checkbox" id="c-41022667" checked=""/><div class="controls bullet"><span class="by">wagthedog</span><span>|</span><a href="#41020758">parent</a><span>|</span><a href="#41021119">prev</a><span>|</span><a href="#41020935">next</a><span>|</span><label class="collapse" for="c-41022667">[-]</label><label class="expand" for="c-41022667">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m a senior, worked with Ruby for a long time. There&#x27;s nothing wrong with this code, it&#x27;s just Ruby, using some of its new features (which all look pretty organic, style-wise). It&#x27;s been obvious to me for a while: good languages have a fair balance of paradigms. While Ruby is more OOP than others (everything is an object) it also has some fairly nice functional features that are, in the context of the language, are actually fairly easy to comprehend even by junior devs.<p>I&#x27;m beginning to think that the true reason for Ruby losing popularity is because some find it somewhat difficult to wrap their heads around it, but I don&#x27;t know why -- some people maybe have a completely different mental model and processes in their heads? For me, from day one I got my hands on the language it seemed perfectly natural. Now I program in several languages with various features and properties (compiled&#x2F;interpreted, strong&#x2F;weak types, procedural vs OOP vs functional) -- all I can say is it is joy to write programs in Ruby. About the only things I dislike about it are the following: 1) they could&#x27;ve come up with better ways to signal code-block boundaries (keyword `end` is used with way too many different constructions) and, recently, 2) Type implementation where types are declared in separate files, which is probably sub-optimal. For (2), however, I do understand why it is the way it is: they needed something that would not break an already more or less complex argument definition rules (named arguments, default values for named arguments, etc.) and also something that was a layer on top of the language and not so much part of the language itself -- so maybe it&#x27;s better this way?<p>Btw, anyone used types in Ruby? Any tips? I&#x27;m still avoiding this, wondering if it&#x27;d be a boilerplate and a constant annoyance and waste of time. But does anyone think there is a legitimate way to use it and benefit from it in Ruby (language being interpreted and not compiled)?</div><br/></div></div></div></div></div></div></div></div></div></body></html>