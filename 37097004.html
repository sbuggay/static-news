<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1691830860179" as="style"/><link rel="stylesheet" href="styles.css?v=1691830860179"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://modelz.ai/blog/pgvector">Do we really need a specialized vector database?</a> <span class="domain">(<a href="https://modelz.ai">modelz.ai</a>)</span></div><div class="subtext"><span>gaocegege</span> | <span>15 comments</span></div><br/><div><div id="37097924" class="c"><input type="checkbox" id="c-37097924" checked=""/><div class="controls bullet"><span class="by">weinzierl</span><span>|</span><a href="#37097911">next</a><span>|</span><label class="collapse" for="c-37097924">[-]</label><label class="expand" for="c-37097924">[7 more]</label></div><br/><div class="children"><div class="content">It feels like Postgres is eating the world. In a thread a couple of days ago many argued that with the capability of efficiently storing and processing JSON we can do without MongoDB et al. Now we also replace vector databases. 
There are extensions that provide columnar storage and to be honest I never completely understood the need for specialized time series databases.<p>It is a bit as if Postgres has become what Oracle wanted to be - a one-stop solution for all your data storage needs.</div><br/><div id="37098201" class="c"><input type="checkbox" id="c-37098201" checked=""/><div class="controls bullet"><span class="by">quickthrower2</span><span>|</span><a href="#37097924">parent</a><span>|</span><a href="#37098250">next</a><span>|</span><label class="collapse" for="c-37098201">[-]</label><label class="expand" for="c-37098201">[3 more]</label></div><br/><div class="children"><div class="content">I am glad open software is eating the world. GNU&#x2F;Linux, Python, JS, Postgres</div><br/><div id="37098230" class="c"><input type="checkbox" id="c-37098230" checked=""/><div class="controls bullet"><span class="by">Roark66</span><span>|</span><a href="#37097924">root</a><span>|</span><a href="#37098201">parent</a><span>|</span><a href="#37098250">next</a><span>|</span><label class="collapse" for="c-37098230">[-]</label><label class="expand" for="c-37098230">[2 more]</label></div><br/><div class="children"><div class="content">Me too. You know what&#x27;s another good sign times are changing? A fortune 500 company gave me a Linux laptop to WFH. Even a decade ago this would be extremely improbable.</div><br/><div id="37098331" class="c"><input type="checkbox" id="c-37098331" checked=""/><div class="controls bullet"><span class="by">vkazanov</span><span>|</span><a href="#37097924">root</a><span>|</span><a href="#37098230">parent</a><span>|</span><a href="#37098250">next</a><span>|</span><label class="collapse" for="c-37098331">[-]</label><label class="expand" for="c-37098331">[1 more]</label></div><br/><div class="children"><div class="content">Surprisingly, even though a relatively at a relatively big public company  my teams and eng managers get some pressure to get macs instead of linux machines. And at some point I thought we&#x27;re  past that...</div><br/></div></div></div></div></div></div><div id="37098250" class="c"><input type="checkbox" id="c-37098250" checked=""/><div class="controls bullet"><span class="by">devjab</span><span>|</span><a href="#37097924">parent</a><span>|</span><a href="#37098201">prev</a><span>|</span><a href="#37098085">next</a><span>|</span><label class="collapse" for="c-37098250">[-]</label><label class="expand" for="c-37098250">[1 more]</label></div><br/><div class="children"><div class="content">I think it’s the natural evolution of software development in an age where decoupled architectures make more and more sense. I’ve been around long enough to see a few pendulum swings, but I’m not sure we’re ever going back to a world where the monolith makes sense again. I know some people will disagree with me, but I think there is a fundamental issue with the OOP line of thought, to no fault of the philosophy itself. It’s simply that people don’t handle complexity well in the real world. The way I see it, you have two modes of operating. The right way and whatever the heck you’re doing when it’s Thursday afternoon and you’ve slept poorly all week. Sure there are ways around this, but in most cases your code-reviewer and quality control isn’t going to be allocated enough time (and neither are you for that matter) to actually deny things that work. Which is how you end up with 9000 different tables, views, stored procedures and what not in your giant mess of a database.<p>Which was sort of fine in a world where nobody cared about data security. But it’s almost impossible to build a “monolith” database that lives up to the modern legislation requirements, at least within the EU. So we’re basically living in a world where the way we’ve done databases for the past 50 years, doesn’t work for the business. Unless you separate everything into business related domains in small kingdoms with total sovereignty over who comes and goes. Which is basically what micro services are.<p>At the same time we’re also living in a world where it’s often cheaper (and performant enough) to put 95% of what you do in a container using volumes for persistence. If SQLite was ready for it, or maybe, if all the ORMs were ready for SQLite, you could probably do 90% or your database needs in it. Since that’s not the case, Postgres reigns supreme because it’s the next best thing (yes, you’re allowed to think it’s better). I view Vector DBs sort of similarity to this. We operate almost all of our databases in containers, the one exception is for the one services everyone calls where the performance loss of the container is too much. Well, that’s not entirely true, our dataware house isn’t operated in containers, at least not by us, but I rarely interact with the BI side of things except for data architecture so I’m actually not sure how their external partners do Ops. Anyway, I think Postgres will do 90% or (y)our vector needs and then we will need dedicated vector databases for those last bits that won’t fit into the “everything” box. I don’t think this is bad either, maybe Oracle wanted it to be theirs, but then Oracle should not have Oracles governance. I’m sure they didn’t foresee this future when they bought MySQL though, I know I didn’t. Because who could’ve foreseen that that way we used to do Databases would become sort of obsolete because of containers and EU legislation… and other things?</div><br/></div></div><div id="37098085" class="c"><input type="checkbox" id="c-37098085" checked=""/><div class="controls bullet"><span class="by">rewmie</span><span>|</span><a href="#37097924">parent</a><span>|</span><a href="#37098250">prev</a><span>|</span><a href="#37097911">next</a><span>|</span><label class="collapse" for="c-37098085">[-]</label><label class="expand" for="c-37098085">[2 more]</label></div><br/><div class="children"><div class="content">&gt; (...) and to be honest I never completely understood the need for specialized time series databases.<p>The need for specialized time series databases is explained by the basis of any software development process: reuse ready-made high-level abstractions instead of having to reinvent the wheel, poorly.<p>There are a few key features of time series databases that you either go without (i.e., data compression) or have to reinvent the wheel (querying, resolution-based retention periods, statistical summary of time periods,etc).<p>You might live without those features,but in some applications there&#x27;s a hefty price tag tied to not having them. If you adopt a time series database, you benefit from all those features without having to implement a single one of them.<p>Perhaps that has no value to you, but it does have for the world.</div><br/><div id="37098235" class="c"><input type="checkbox" id="c-37098235" checked=""/><div class="controls bullet"><span class="by">starfallg</span><span>|</span><a href="#37097924">root</a><span>|</span><a href="#37098085">parent</a><span>|</span><a href="#37097911">next</a><span>|</span><label class="collapse" for="c-37098235">[-]</label><label class="expand" for="c-37098235">[1 more]</label></div><br/><div class="children"><div class="content">I think what OP was getting at is why it has to be specialized. Time-series features can be implemented in a general purpose DB engine like postgres or mongo.</div><br/></div></div></div></div></div></div><div id="37097911" class="c"><input type="checkbox" id="c-37097911" checked=""/><div class="controls bullet"><span class="by">danielbln</span><span>|</span><a href="#37097924">prev</a><span>|</span><a href="#37098203">next</a><span>|</span><label class="collapse" for="c-37097911">[-]</label><label class="expand" for="c-37097911">[1 more]</label></div><br/><div class="children"><div class="content">We&#x27;ve gone with Postgres and pg_vector which works really well thus far, especially since we know and like the existing Postgres tooling and vector functionality there is just a (widely supported) pg_vector extension away. Since it now also supports HNSW indices it should perform well on large amounts of vectorized data as well (though we haven&#x27;t tested this yet).<p>From a consultant perspective, Postgres as a requirement is a much easier sell then some new, hot but unknown dedicated vector DB.</div><br/></div></div><div id="37098203" class="c"><input type="checkbox" id="c-37098203" checked=""/><div class="controls bullet"><span class="by">Roark66</span><span>|</span><a href="#37097911">prev</a><span>|</span><a href="#37097874">next</a><span>|</span><label class="collapse" for="c-37098203">[-]</label><label class="expand" for="c-37098203">[2 more]</label></div><br/><div class="children"><div class="content">Is there a better article explaining how vector DBs are used with LLMs exactly? This 4 point description raises more questions than it answers for me.<p>For example what is the difference between a &quot;chunk vector&quot; and a &quot;prompt vector&quot;? Aren&#x27;t they essentially the same thing (a vector representation of text)?<p>How do we &quot;search the prompt vector for the most similar chunk vector&quot;? A short code snippet is shown that queries the DB, but it&#x27;s not shown what is done with what comes back. What format is the output in?<p>I suspect this works by essentially replacing chunks of input text by shorter chunks of &quot;roughly equivalent&quot; text found in the vector DB and sending that as the prompt instead, but based on this description I can&#x27;t be sure.</div><br/><div id="37098341" class="c"><input type="checkbox" id="c-37098341" checked=""/><div class="controls bullet"><span class="by">dylanjcastillo</span><span>|</span><a href="#37098203">parent</a><span>|</span><a href="#37097874">next</a><span>|</span><label class="collapse" for="c-37098341">[-]</label><label class="expand" for="c-37098341">[1 more]</label></div><br/><div class="children"><div class="content">The article is referring to the problem of having a limited context length in LLMs. That is you can only pass X tokens in the prompt.<p>For example, let’s say you have a prompt that lets you answer questions about a book. If the book is long enough, you won’t be able to include it as is in the prompt, so you have to figure out what are the most relevant passages you must include to answer a given question. What you usually do is find the passages that are the most semantically similar to your question.<p>Chunk vectors are the vectorized passages of the book (i.e., a numerical vector that represents a passage), and the prompt vector is usually the vectorized question.<p>To find the most similar vectors you need a distance measure, cosine similarity being the most popular.<p>The output of finding the most similar vectors is the vectors + it’s metadata (chunk, page, chapter, etc)</div><br/></div></div></div></div><div id="37097874" class="c"><input type="checkbox" id="c-37097874" checked=""/><div class="controls bullet"><span class="by">rvba</span><span>|</span><a href="#37098203">prev</a><span>|</span><a href="#37097591">next</a><span>|</span><label class="collapse" for="c-37097874">[-]</label><label class="expand" for="c-37097874">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Search the prompt vector to find the most similar chunk vector.<p>Does this mean that a question is changed to a similar question?
Doesnt it decrease the quality of answers significantly?<p>If someone asks &quot;who is the best student in California?&quot; will the question be changed to &quot;what is the best school in California?&quot;.<p>This would explain the terrible drops in quality of amswers that we saw. The underlying technology is changed for easier scaling, but is much worse.<p>It&#x27;s like the current google (what has multiple problems), where it also sometimes doesnt search your keywords - even when they are in quotation marks - because it knows &quot;better&quot;..</div><br/><div id="37097901" class="c"><input type="checkbox" id="c-37097901" checked=""/><div class="controls bullet"><span class="by">_pdp_</span><span>|</span><a href="#37097874">parent</a><span>|</span><a href="#37098078">next</a><span>|</span><label class="collapse" for="c-37097901">[-]</label><label class="expand" for="c-37097901">[1 more]</label></div><br/><div class="children"><div class="content">Without exception, LLM frontends out there that use vector search simply do a query and hope for the best. The reality is that the answer may not be in the result. It is a hard problem to solve. We are at least 1-2 stepping stones away from having a solution that actually works!</div><br/></div></div><div id="37098078" class="c"><input type="checkbox" id="c-37098078" checked=""/><div class="controls bullet"><span class="by">charcircuit</span><span>|</span><a href="#37097874">parent</a><span>|</span><a href="#37097901">prev</a><span>|</span><a href="#37097591">next</a><span>|</span><label class="collapse" for="c-37098078">[-]</label><label class="expand" for="c-37098078">[1 more]</label></div><br/><div class="children"><div class="content">&gt;Does this mean that a question is changed to a similar question?<p>No. It is retrieving the most semantically similar document(s) to work with. For a question about students information about students will be more semantically similar than information about schools.<p>&gt;It&#x27;s like the current google<p>Google has used vector search for years. It&#x27;s why you can just type questions in and Google will understand what you are talking about.<p>&gt;doesnt search your keywords - even when they are in quotation marks<p>This isn&#x27;t true. If there are no results it will show results without the quotes. The mobile site doesn&#x27;t make this clear when it happens though.</div><br/></div></div></div></div><div id="37097591" class="c"><input type="checkbox" id="c-37097591" checked=""/><div class="controls bullet"><span class="by">charcircuit</span><span>|</span><a href="#37097874">prev</a><span>|</span><label class="collapse" for="c-37097591">[-]</label><label class="expand" for="c-37097591">[1 more]</label></div><br/><div class="children"><div class="content">What if your main data is in mysql?<p>Lack of consistency is not a big deal and you often don&#x27;t have it at scale anyways.</div><br/></div></div></div></div></div></div></div></body></html>