<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1734771666194" as="style"/><link rel="stylesheet" href="styles.css?v=1734771666194"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/izabera/pseudo3d">A Raycaster in Bash</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>izabera</span> | <span>19 comments</span></div><br/><div><div id="42477998" class="c"><input type="checkbox" id="c-42477998" checked=""/><div class="controls bullet"><span class="by">purplesyringa</span><span>|</span><a href="#42476002">next</a><span>|</span><label class="collapse" for="c-42477998">[-]</label><label class="expand" for="c-42477998">[1 more]</label></div><br/><div class="children"><div class="content">I <i>love</i> this. I&#x27;ve been wondering how the picture is drawn with less than one `echo` per pixel, and it&#x27;s very clever: the game is &quot;not really&quot; 3D, so you can run raytracing just once per column, and then you only need to draw a couple of lines (for sky, grass, and the actual object) -- this is done by outputting the &quot;draw this pixel and move down by one&quot; string to the terminal as many times as necessary using string repetition.<p>I&#x27;ve been considering working on a voxel render engine (not for Bash, but for another computationally limited environment). This is a treasure, I&#x27;m certain I&#x27;ll find something useful here.</div><br/></div></div><div id="42476002" class="c"><input type="checkbox" id="c-42476002" checked=""/><div class="controls bullet"><span class="by">Arch-TK</span><span>|</span><a href="#42477998">prev</a><span>|</span><a href="#42476795">next</a><span>|</span><label class="collapse" for="c-42476002">[-]</label><label class="expand" for="c-42476002">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s unfortunate that stty requires forking. Maybe the next project will be to use bash and rowhammer to call the necessary ioctls to do it without forking.</div><br/></div></div><div id="42476795" class="c"><input type="checkbox" id="c-42476795" checked=""/><div class="controls bullet"><span class="by">alsetmusic</span><span>|</span><a href="#42476002">prev</a><span>|</span><a href="#42478062">next</a><span>|</span><label class="collapse" for="c-42476795">[-]</label><label class="expand" for="c-42476795">[1 more]</label></div><br/><div class="children"><div class="content">I had no idea this was possible with Bash. I’ve considered myself proficient with Bash at a pretty advanced level at times and this just blows me away. I don’t have the math chops to understand how it’s implemented, but it’s a pleasure to see.</div><br/></div></div><div id="42478062" class="c"><input type="checkbox" id="c-42478062" checked=""/><div class="controls bullet"><span class="by">8n4vidtmkvmk</span><span>|</span><a href="#42476795">prev</a><span>|</span><a href="#42477237">next</a><span>|</span><label class="collapse" for="c-42478062">[-]</label><label class="expand" for="c-42478062">[2 more]</label></div><br/><div class="children"><div class="content">I never ceases to baffle me how we&#x27;re still stuck with these mind bogglingly slow shells. Pure madness. I can maybe understand that some apps require all the vt100 weirdness or whatever, but probably 90% of apps just write to stdout and err. Surely we can blit some text to the screen a bit quicker and put the other 10% into some compat mode.</div><br/><div id="42478262" class="c"><input type="checkbox" id="c-42478262" checked=""/><div class="controls bullet"><span class="by">PhilipRoman</span><span>|</span><a href="#42478062">parent</a><span>|</span><a href="#42477237">next</a><span>|</span><label class="collapse" for="c-42478262">[-]</label><label class="expand" for="c-42478262">[1 more]</label></div><br/><div class="children"><div class="content">Shells are slow (particularly bash), sure, but I&#x27;m not sure how the rest of your comment follows from that. The shell is not involved in interpreting terminal escape sequences in any way, and modern terminals are quite fast - I can render animations in a 350-column terminal and they are as smooth as can be, given the constraints.
Besides, the whole premise of this post is that bash is the wrong language for raycasting, kind of like writing bubblesort in CSS.<p>&gt;put the other 10% into some compat mode<p>There is nothing preventing that, just test if the string contains sane characters only and use a fast path for that. The problem is that there is no actual fast path for software text rendering, you still need to process ligatures, etc.</div><br/></div></div></div></div><div id="42477237" class="c"><input type="checkbox" id="c-42477237" checked=""/><div class="controls bullet"><span class="by">tdeck</span><span>|</span><a href="#42478062">prev</a><span>|</span><a href="#42476032">next</a><span>|</span><label class="collapse" for="c-42477237">[-]</label><label class="expand" for="c-42477237">[2 more]</label></div><br/><div class="children"><div class="content">In case you wondered if there is a raycaster written in MS Batch:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;nTh0rn&#x2F;batch-raycaster">https:&#x2F;&#x2F;github.com&#x2F;nTh0rn&#x2F;batch-raycaster</a></div><br/><div id="42477853" class="c"><input type="checkbox" id="c-42477853" checked=""/><div class="controls bullet"><span class="by">izabera</span><span>|</span><a href="#42477237">parent</a><span>|</span><a href="#42476032">next</a><span>|</span><label class="collapse" for="c-42477853">[-]</label><label class="expand" for="c-42477853">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s really cool! The explanation on their blog is great!</div><br/></div></div></div></div><div id="42476032" class="c"><input type="checkbox" id="c-42476032" checked=""/><div class="controls bullet"><span class="by">markeroon</span><span>|</span><a href="#42477237">prev</a><span>|</span><a href="#42475985">next</a><span>|</span><label class="collapse" for="c-42476032">[-]</label><label class="expand" for="c-42476032">[1 more]</label></div><br/><div class="children"><div class="content">Only 300 lines of code, impressive! I love this.</div><br/></div></div><div id="42475985" class="c"><input type="checkbox" id="c-42475985" checked=""/><div class="controls bullet"><span class="by">Teongot</span><span>|</span><a href="#42476032">prev</a><span>|</span><a href="#42476549">next</a><span>|</span><label class="collapse" for="c-42475985">[-]</label><label class="expand" for="c-42475985">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;d love to see this combined with the author&#x27;s fork()-less implementation of ps to make a (almost) fork()-free implementation of psDoom.<p>Seriously though, this is really cool</div><br/></div></div><div id="42476549" class="c"><input type="checkbox" id="c-42476549" checked=""/><div class="controls bullet"><span class="by">einpoklum</span><span>|</span><a href="#42475985">prev</a><span>|</span><a href="#42476561">next</a><span>|</span><label class="collapse" for="c-42476549">[-]</label><label class="expand" for="c-42476549">[1 more]</label></div><br/><div class="children"><div class="content">And to think, that my own bash scripts spend 300 lines just parsing various command-line options, while instead I could be showing this game... :-P</div><br/></div></div><div id="42476561" class="c"><input type="checkbox" id="c-42476561" checked=""/><div class="controls bullet"><span class="by">shric</span><span>|</span><a href="#42476549">prev</a><span>|</span><a href="#42476718">next</a><span>|</span><label class="collapse" for="c-42476561">[-]</label><label class="expand" for="c-42476561">[2 more]</label></div><br/><div class="children"><div class="content">Beautiful. Correct me if I&#x27;m wrong, but this looks like a bash version of <a href="https:&#x2F;&#x2F;lodev.org&#x2F;cgtutor&#x2F;raycasting.html" rel="nofollow">https:&#x2F;&#x2F;lodev.org&#x2F;cgtutor&#x2F;raycasting.html</a><p>Edit: ah, just noticed this is in the readme :(</div><br/><div id="42476571" class="c"><input type="checkbox" id="c-42476571" checked=""/><div class="controls bullet"><span class="by">izabera</span><span>|</span><a href="#42476561">parent</a><span>|</span><a href="#42476718">next</a><span>|</span><label class="collapse" for="c-42476571">[-]</label><label class="expand" for="c-42476571">[1 more]</label></div><br/><div class="children"><div class="content">yeah i really liked that tutorial</div><br/></div></div></div></div><div id="42476718" class="c"><input type="checkbox" id="c-42476718" checked=""/><div class="controls bullet"><span class="by">CaesarA</span><span>|</span><a href="#42476561">prev</a><span>|</span><a href="#42476738">next</a><span>|</span><label class="collapse" for="c-42476718">[-]</label><label class="expand" for="c-42476718">[2 more]</label></div><br/><div class="children"><div class="content">I wonder if texture mapping this would look good.</div><br/><div id="42476741" class="c"><input type="checkbox" id="c-42476741" checked=""/><div class="controls bullet"><span class="by">Arch-TK</span><span>|</span><a href="#42476718">parent</a><span>|</span><a href="#42476738">next</a><span>|</span><label class="collapse" for="c-42476741">[-]</label><label class="expand" for="c-42476741">[1 more]</label></div><br/><div class="children"><div class="content">She has been brainstorming how to handle texture mapping within the performance constraints of doing it in bash for a week now (long before she actually got this working) and so far we&#x27;ve come up with some hypothetical ideas but she has not tried any of them yet. Maybe tomorrow...</div><br/></div></div></div></div><div id="42476738" class="c"><input type="checkbox" id="c-42476738" checked=""/><div class="controls bullet"><span class="by">corytheboyd</span><span>|</span><a href="#42476718">prev</a><span>|</span><a href="#42477703">next</a><span>|</span><label class="collapse" for="c-42476738">[-]</label><label class="expand" for="c-42476738">[3 more]</label></div><br/><div class="children"><div class="content">Imagine a TUI where you need to navigate a literal maze of options</div><br/><div id="42476745" class="c"><input type="checkbox" id="c-42476745" checked=""/><div class="controls bullet"><span class="by">Arch-TK</span><span>|</span><a href="#42476738">parent</a><span>|</span><a href="#42476777">next</a><span>|</span><label class="collapse" for="c-42476745">[-]</label><label class="expand" for="c-42476745">[1 more]</label></div><br/><div class="children"><div class="content">Many CLI programs which take option have already managed to do this (in the text-based adventure game style).</div><br/></div></div><div id="42476777" class="c"><input type="checkbox" id="c-42476777" checked=""/><div class="controls bullet"><span class="by">krapp</span><span>|</span><a href="#42476738">parent</a><span>|</span><a href="#42476745">prev</a><span>|</span><a href="#42477703">next</a><span>|</span><label class="collapse" for="c-42476777">[-]</label><label class="expand" for="c-42476777">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s the kind of &quot;futuristic interface&quot; you&#x27;d see in a cyberpunk movie, and it would be incredibly annoying in real life.</div><br/></div></div></div></div></div></div></div></div></div></body></html>