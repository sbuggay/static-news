<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1692349258435" as="style"/><link rel="stylesheet" href="styles.css?v=1692349258435"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://vermaden.wordpress.com/2023/08/18/freebsd-bhyve-virtualization/">FreeBSD Bhyve Virtualization</a> <span class="domain">(<a href="https://vermaden.wordpress.com">vermaden.wordpress.com</a>)</span></div><div class="subtext"><span>vermaden</span> | <span>11 comments</span></div><br/><div><div id="37172896" class="c"><input type="checkbox" id="c-37172896" checked=""/><div class="controls bullet"><span class="by">avhception</span><span>|</span><a href="#37172889">next</a><span>|</span><label class="collapse" for="c-37172896">[-]</label><label class="expand" for="c-37172896">[1 more]</label></div><br/><div class="children"><div class="content">Great article! As a FreeBSD user (albeit server-side only), I always enjoy reading articles like this. Keep up the good work vermaden, your blog is a real treat!<p>Bhyve virtualization is of special interest to me, as I&#x27;m in the process of writing my own little (small-time, amateur-use only) wrapper for bhyve.
Essentially a re-implementation of a subset of churchers&#x2F;vm-bhyve in python.<p>I was under the impression that virtio-blk + zvols were the best option for storage (although I didn&#x27;t do any tests so far, just a naive assumption)!
Will definitely explore the nvme + raw-file route now.</div><br/></div></div><div id="37172889" class="c"><input type="checkbox" id="c-37172889" checked=""/><div class="controls bullet"><span class="by">replete</span><span>|</span><a href="#37172896">prev</a><span>|</span><a href="#37171490">next</a><span>|</span><label class="collapse" for="c-37172889">[-]</label><label class="expand" for="c-37172889">[3 more]</label></div><br/><div class="children"><div class="content">I check every now and then to see if there is MacOS guest support, I would really like to use BSD as a host and completely drop Apple hardware since they started soldering SSDs. I have the last Intel MBP, and sure ARM is powerful, but in 5 years of heavy use it will be a brick in need of a new mainboard and that makes no sense to me.<p>I guess the reality is in a year or two I&#x27;ll land on fedora and proxmox or something. I have seen plenty of interesting content on proxmox and PCIE passthrough, but very little showing actual pro users with this kind of set up so the MacOS workstation VM idea might not be as practical as I&#x27;m hoping.</div><br/><div id="37172998" class="c"><input type="checkbox" id="c-37172998" checked=""/><div class="controls bullet"><span class="by">terminalcommand</span><span>|</span><a href="#37172889">parent</a><span>|</span><a href="#37172969">next</a><span>|</span><label class="collapse" for="c-37172998">[-]</label><label class="expand" for="c-37172998">[1 more]</label></div><br/><div class="children"><div class="content">I just researched a bit, mac os x guest vm with pcie passthrough seems possible on linux.<p>Dropping the links below:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;kholia&#x2F;OSX-KVM">https:&#x2F;&#x2F;github.com&#x2F;kholia&#x2F;OSX-KVM</a><p><a href="https:&#x2F;&#x2F;github.com&#x2F;yoonsikp&#x2F;macOS-KVM-PCI-Passthrough">https:&#x2F;&#x2F;github.com&#x2F;yoonsikp&#x2F;macOS-KVM-PCI-Passthrough</a></div><br/></div></div><div id="37172969" class="c"><input type="checkbox" id="c-37172969" checked=""/><div class="controls bullet"><span class="by">sofixa</span><span>|</span><a href="#37172889">parent</a><span>|</span><a href="#37172998">prev</a><span>|</span><a href="#37171490">next</a><span>|</span><label class="collapse" for="c-37172969">[-]</label><label class="expand" for="c-37172969">[1 more]</label></div><br/><div class="children"><div class="content">Why do you need macOS guest support? IIRC none of the official reasons (like the forced developing&#x2F;releasing of App Store apps only from macOS) would work in a non-supported virtualised environment due to Apple shenanigans with the hardware and software checks thereof.</div><br/></div></div></div></div><div id="37171490" class="c"><input type="checkbox" id="c-37171490" checked=""/><div class="controls bullet"><span class="by">jonhermansen</span><span>|</span><a href="#37172889">prev</a><span>|</span><a href="#37172569">next</a><span>|</span><label class="collapse" for="c-37171490">[-]</label><label class="expand" for="c-37171490">[1 more]</label></div><br/><div class="children"><div class="content">Hey vermaden, great article! I saw you had some problems with virt-manager, and I did too! There is a solution your problem:<p>&gt; I was able to start FreeBSD 13.2 installation … but it got frozen at the kernel messages and nothing more happened.<p>If you notice at the bootloader screen, it says something like &quot;5. Cons: Dual (Serial primary)&quot;<p>Pressing the 5 key at the bootloader screen will toggle the output from &quot;Serial primary&quot; to &quot;Video primary&quot; or something to that effect. Once you toggle this setting, it should fix the output hanging and you should get a login prompt.<p>The other way to fix this problem, is through the virt-manager menu, you can simply switch the view from Graphical Console, to the Serial Console. Under View -&gt; Consoles -&gt; Serial 1<p>Hope this helps make your experience a little better under virt-manager.</div><br/></div></div><div id="37172569" class="c"><input type="checkbox" id="c-37172569" checked=""/><div class="controls bullet"><span class="by">liendolucas</span><span>|</span><a href="#37171490">prev</a><span>|</span><a href="#37171547">next</a><span>|</span><label class="collapse" for="c-37172569">[-]</label><label class="expand" for="c-37172569">[1 more]</label></div><br/><div class="children"><div class="content">vermaden&#x27;s site is a must stop for all FreeBSD users. A lot of information and great articles! I&#x27;ll take a look at bhyve at some point. Thanks for the article, it does seem to be a comprehensive guide to bhyve!</div><br/></div></div><div id="37171547" class="c"><input type="checkbox" id="c-37171547" checked=""/><div class="controls bullet"><span class="by">notthetup</span><span>|</span><a href="#37172569">prev</a><span>|</span><a href="#37171372">next</a><span>|</span><label class="collapse" for="c-37171547">[-]</label><label class="expand" for="c-37171547">[1 more]</label></div><br/><div class="children"><div class="content">There was a bunch of discussion about the live migration features of bhyve on a recent episode of “Oxide and Friends”<p><a href="https:&#x2F;&#x2F;m.youtube.com&#x2F;watch?v=eQR98smFYTc">https:&#x2F;&#x2F;m.youtube.com&#x2F;watch?v=eQR98smFYTc</a></div><br/></div></div><div id="37171372" class="c"><input type="checkbox" id="c-37171372" checked=""/><div class="controls bullet"><span class="by">ggm</span><span>|</span><a href="#37171547">prev</a><span>|</span><label class="collapse" for="c-37171372">[-]</label><label class="expand" for="c-37171372">[3 more]</label></div><br/><div class="children"><div class="content">The only thing missing is migration from old iohyve saved zfs images to vm-bhyve or libvirt<p>Otherwise, a super and very complete guide. Well worth bookmarking if you want to do virtualised os on FreeBSD.</div><br/><div id="37171903" class="c"><input type="checkbox" id="c-37171903" checked=""/><div class="controls bullet"><span class="by">moondev</span><span>|</span><a href="#37171372">parent</a><span>|</span><label class="collapse" for="c-37171903">[-]</label><label class="expand" for="c-37171903">[2 more]</label></div><br/><div class="children"><div class="content">Nested virtualization?</div><br/><div id="37172169" class="c"><input type="checkbox" id="c-37172169" checked=""/><div class="controls bullet"><span class="by">ggm</span><span>|</span><a href="#37171372">root</a><span>|</span><a href="#37171903">parent</a><span>|</span><label class="collapse" for="c-37172169">[-]</label><label class="expand" for="c-37172169">[1 more]</label></div><br/><div class="children"><div class="content">True it would be interesting to know how well WSL works.<p>And some of the complex multiple network device configurations, I had iohyve administered virtuals with a backend filestore network as well as a front door.<p>Iohyve used zfs environment vars embedded in the FS to hold configuration which was clever, arguably too clever.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>