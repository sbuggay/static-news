<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1686646858271" as="style"/><link rel="stylesheet" href="styles.css?v=1686646858271"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/mackyle/sqlite/blob/18cf47156abe94255ae1495ba2da84517dce6081/src/os.h">Why sqlite3 temp files were renamed &#x27;etilqs_*&#x27; (2006)</a>Â <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>bsmith89</span> | <span>88 comments</span></div><br/><div><div id="36303789" class="c"><input type="checkbox" id="c-36303789" checked=""/><div class="controls bullet"><span class="by">cwillu</span><span>|</span><a href="#36304906">next</a><span>|</span><label class="collapse" for="c-36303789">[-]</label><label class="expand" for="c-36303789">[5 more]</label></div><br/><div class="children"><div class="content">The relevant snippet:<p><pre><code>   &#x2F;*
   ** Temporary files are named starting with this prefix followed by 16 random
   ** alphanumeric characters, and no file extension. They are stored in the
   ** OS&#x27;s standard temporary file directory, and are deleted prior to exit.
   ** If sqlite is being embedded in another program, you may wish to change the
   ** prefix to reflect your program&#x27;s name, so that if your program exits
   ** prematurely, old temporary files can be easily identified. This can be done
   ** using -DSQLITE_TEMP_FILE_PREFIX=myprefix_ on the compiler command line.
   **
   ** 2006-10-31:  The default prefix used to be &quot;sqlite_&quot;.  But then
   ** Mcafee started using SQLite in their anti-virus product and it
   ** started putting files with the &quot;sqlite&quot; name in the c:&#x2F;temp folder.
   ** This annoyed many windows users.  Those users would then do a 
   ** Google search for &quot;sqlite&quot;, find the telephone numbers of the
   ** developers and call to wake them up at night and complain.
   ** For this reason, the default name prefix is changed to be &quot;sqlite&quot; 
   ** spelled backwards.  So the temp files are still identified, but
   ** anybody smart enough to figure out the code is also likely smart
   ** enough to know that calling the developer will not help get rid
   ** of the file.
   *&#x2F;</code></pre></div><br/><div id="36307155" class="c"><input type="checkbox" id="c-36307155" checked=""/><div class="controls bullet"><span class="by">pyeri</span><span>|</span><a href="#36303789">parent</a><span>|</span><a href="#36305978">next</a><span>|</span><label class="collapse" for="c-36307155">[-]</label><label class="expand" for="c-36307155">[2 more]</label></div><br/><div class="children"><div class="content">&gt;&gt; So the temp files are still identified, but
anybody smart enough to figure out the code is also likely smart
enough to know that calling the developer will not help get rid
of the file.<p>Building illuminati lairs now, are we!</div><br/><div id="36307462" class="c"><input type="checkbox" id="c-36307462" checked=""/><div class="controls bullet"><span class="by">noduerme</span><span>|</span><a href="#36303789">root</a><span>|</span><a href="#36307155">parent</a><span>|</span><a href="#36305978">next</a><span>|</span><label class="collapse" for="c-36307462">[-]</label><label class="expand" for="c-36307462">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s called barrier to entry. The world was better when there was a higher barrier to do things like, e.g., buying a plane ticket or getting on the internet. The word for how people who had the means and&#x2F;or knowledge to do these things and comport themselves appropriately under the circumstances they encountered was &quot;class&quot;.</div><br/></div></div></div></div><div id="36305978" class="c"><input type="checkbox" id="c-36305978" checked=""/><div class="controls bullet"><span class="by">penguin_booze</span><span>|</span><a href="#36303789">parent</a><span>|</span><a href="#36307155">prev</a><span>|</span><a href="#36304906">next</a><span>|</span><label class="collapse" for="c-36305978">[-]</label><label class="expand" for="c-36305978">[2 more]</label></div><br/><div class="children"><div class="content">Or the direct link thither: <a href="https:&#x2F;&#x2F;github.com&#x2F;mackyle&#x2F;sqlite&#x2F;blob&#x2F;18cf47156abe94255ae1495ba2da84517dce6081&#x2F;src&#x2F;os.h#L56-L75">https:&#x2F;&#x2F;github.com&#x2F;mackyle&#x2F;sqlite&#x2F;blob&#x2F;18cf47156abe94255ae14...</a>.</div><br/><div id="36307023" class="c"><input type="checkbox" id="c-36307023" checked=""/><div class="controls bullet"><span class="by">bondant</span><span>|</span><a href="#36303789">root</a><span>|</span><a href="#36305978">parent</a><span>|</span><a href="#36304906">next</a><span>|</span><label class="collapse" for="c-36307023">[-]</label><label class="expand" for="c-36307023">[1 more]</label></div><br/><div class="children"><div class="content">Or the link to the official repository: <a href="https:&#x2F;&#x2F;www.sqlite.org&#x2F;src&#x2F;file?ci=trunk&amp;name=src&#x2F;os.h&amp;ln=57" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.sqlite.org&#x2F;src&#x2F;file?ci=trunk&amp;name=src&#x2F;os.h&amp;ln=57</a></div><br/></div></div></div></div></div></div><div id="36304906" class="c"><input type="checkbox" id="c-36304906" checked=""/><div class="controls bullet"><span class="by">throwaway09223</span><span>|</span><a href="#36303789">prev</a><span>|</span><a href="#36303070">next</a><span>|</span><label class="collapse" for="c-36304906">[-]</label><label class="expand" for="c-36304906">[3 more]</label></div><br/><div class="children"><div class="content">I have a related story:<p>Around the year 2000 I was working operations in the NOC for WebTV (then owned by Microsoft). For those who don&#x27;t know, WebTV was a little set-top box with a modem which would dial up on demand and provide a very basic web&#x2F;chat&#x2F;email experience on the TV. The box would call a 1800 number to figure out its own phone number, then re-dial on a local toll-free number with a local sub-contracted ISP.<p>One of the services we had would periodically send a UDP datagram out to online clients to let them know they had new email. The settop box would then light up a little indicator light.<p>Of course, sometimes the client would hang up. The IP might get allocated to a PC dialup user. And sometimes, that PC dialup user might be running a firewall that was popular back then, called BLACK ICE DEFENDER.<p>BLACK ICE DEFENDER had all these (not so) cool features, the kind that semi-technical people love. For example, it would log ATTACKS. What are ATTACKS? Unrecognized traffic, of course.<p>Sometimes the little UDP datagram for our &quot;you have mail&quot; service would be delivered to a PC user running BLACK ICE DEFENDER, which would register it as an ATTACK. It would then ever so helpfully look up the ARIN contact information to see who sent the errant datagram -- which had the NOC phone number. It would then tell the user &quot;THIS ENTITY IS HACKING YOU&quot; and imply that contacting them would be productive. Yes, you could pick up a phone and call the Microsoft NOC. Back then, the internet was a smaller place.<p>My job was to check the NOC voicemail, which was reliably filled with very angry people. Often they would threaten that they&#x27;ve reported us to the FBI or somesuch, or that it confirmed some conspiracy theory or another. We played the good ones on speakerphone for entertainment.<p>Good times. Doesn&#x27;t happen anymore.</div><br/><div id="36305583" class="c"><input type="checkbox" id="c-36305583" checked=""/><div class="controls bullet"><span class="by">qingcharles</span><span>|</span><a href="#36304906">parent</a><span>|</span><a href="#36306076">next</a><span>|</span><label class="collapse" for="c-36305583">[-]</label><label class="expand" for="c-36305583">[1 more]</label></div><br/><div class="children"><div class="content">Great story :)<p>The same year I was working on various online music stores using Microsoft&#x27;s Windows Media DRM. This would cause a licensing window to pop up in Media Player all the time when the license was missing or expired for someone&#x27;s music. We would get various complaints emailed to us, and being head developer sometimes the thornier ones would end up in my inbox, and my friendly ass would be kind enough to reply and try to figure them out.<p>One time one of the senior execs was walking past my screen and peered over my shoulder to read a new email which said &quot;EVERY MORNING YOU ARE ON MY COMPUTER GET OFF MY COMPUTER!!!&quot;. The exec leaned over, typed &quot;GO FUCK YOURSELF&quot; and hit reply.<p>The benefits of being the boss...</div><br/></div></div><div id="36306076" class="c"><input type="checkbox" id="c-36306076" checked=""/><div class="controls bullet"><span class="by">hoten</span><span>|</span><a href="#36304906">parent</a><span>|</span><a href="#36305583">prev</a><span>|</span><a href="#36303070">next</a><span>|</span><label class="collapse" for="c-36306076">[-]</label><label class="expand" for="c-36306076">[1 more]</label></div><br/><div class="children"><div class="content">The people who left those voicemails are now the ones leaving very odd and paranoid posts on GitHub issue trackers. There&#x27;s a few unfortunate souls out there convinced that something called Lighthouse is trying to hack them.</div><br/></div></div></div></div><div id="36303070" class="c"><input type="checkbox" id="c-36303070" checked=""/><div class="controls bullet"><span class="by">pronoiac</span><span>|</span><a href="#36304906">prev</a><span>|</span><a href="#36306726">next</a><span>|</span><label class="collapse" for="c-36303070">[-]</label><label class="expand" for="c-36303070">[22 more]</label></div><br/><div class="children"><div class="content">Looks like the line numbers were lost: <a href="https:&#x2F;&#x2F;github.com&#x2F;mackyle&#x2F;sqlite&#x2F;blob&#x2F;18cf47156abe94255ae1495ba2da84517dce6081&#x2F;src&#x2F;os.h#L65-L75">https:&#x2F;&#x2F;github.com&#x2F;mackyle&#x2F;sqlite&#x2F;blob&#x2F;18cf47156abe94255ae14...</a><p>It&#x27;s because McAfee started using SQLite, angry users would stumble upon the files, do a minimum of searching or thinking, and be furious at SQLite developers.</div><br/><div id="36303580" class="c"><input type="checkbox" id="c-36303580" checked=""/><div class="controls bullet"><span class="by">arp242</span><span>|</span><a href="#36303070">parent</a><span>|</span><a href="#36303263">next</a><span>|</span><label class="collapse" for="c-36303580">[-]</label><label class="expand" for="c-36303580">[6 more]</label></div><br/><div class="children"><div class="content">Daniel Stenberg has also gotten some ... interesting ... emails because people found the curl license somewhere and assumed he was responsible for $stuff.<p><a href="https:&#x2F;&#x2F;daniel.haxx.se&#x2F;blog&#x2F;2016&#x2F;01&#x2F;11&#x2F;tales-from-my-inbox-part&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;daniel.haxx.se&#x2F;blog&#x2F;2016&#x2F;01&#x2F;11&#x2F;tales-from-my-inbox-p...</a><p><a href="https:&#x2F;&#x2F;daniel.haxx.se&#x2F;blog&#x2F;2016&#x2F;01&#x2F;19&#x2F;subject-urgent-warning&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;daniel.haxx.se&#x2F;blog&#x2F;2016&#x2F;01&#x2F;19&#x2F;subject-urgent-warnin...</a><p><a href="https:&#x2F;&#x2F;daniel.haxx.se&#x2F;blog&#x2F;2018&#x2F;02&#x2F;16&#x2F;why-is-your-email-in-my-car&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;daniel.haxx.se&#x2F;blog&#x2F;2018&#x2F;02&#x2F;16&#x2F;why-is-your-email-in-...</a><p><a href="https:&#x2F;&#x2F;daniel.haxx.se&#x2F;blog&#x2F;2021&#x2F;02&#x2F;19&#x2F;i-will-slaughter-you&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;daniel.haxx.se&#x2F;blog&#x2F;2021&#x2F;02&#x2F;19&#x2F;i-will-slaughter-you&#x2F;</a></div><br/><div id="36304384" class="c"><input type="checkbox" id="c-36304384" checked=""/><div class="controls bullet"><span class="by">bennettnate5</span><span>|</span><a href="#36303070">root</a><span>|</span><a href="#36303580">parent</a><span>|</span><a href="#36305386">next</a><span>|</span><label class="collapse" for="c-36304384">[-]</label><label class="expand" for="c-36304384">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve always wondered if Daniel gets a particular amount of email of this sort because his address includes &quot;haxx&quot;--for someone without tech savvy, it&#x27;s not all that much of a jump to assume an email that includes something sounding like hacking is the email of the hacker that has attacked them.</div><br/><div id="36304839" class="c"><input type="checkbox" id="c-36304839" checked=""/><div class="controls bullet"><span class="by">pavlov</span><span>|</span><a href="#36303070">root</a><span>|</span><a href="#36304384">parent</a><span>|</span><a href="#36305386">next</a><span>|</span><label class="collapse" for="c-36304839">[-]</label><label class="expand" for="c-36304839">[1 more]</label></div><br/><div class="children"><div class="content">Yes, that seems to be the likely explanation at least for the second linked email which closes with:<p><i>âPlease see attached screen dump for a screen shot of your contact info included in Spotify (or what more likely seems to be a hacked Spotify developed illegally by a third party).â</i></div><br/></div></div></div></div><div id="36305386" class="c"><input type="checkbox" id="c-36305386" checked=""/><div class="controls bullet"><span class="by">anilakar</span><span>|</span><a href="#36303070">root</a><span>|</span><a href="#36303580">parent</a><span>|</span><a href="#36304384">prev</a><span>|</span><a href="#36303263">next</a><span>|</span><label class="collapse" for="c-36305386">[-]</label><label class="expand" for="c-36305386">[3 more]</label></div><br/><div class="children"><div class="content">The last one has to be an elaborate troll. Only a 4chan user would type &quot;RIP Terry A. Davis&quot; anywhere.</div><br/><div id="36306988" class="c"><input type="checkbox" id="c-36306988" checked=""/><div class="controls bullet"><span class="by">Greed</span><span>|</span><a href="#36303070">root</a><span>|</span><a href="#36305386">parent</a><span>|</span><a href="#36306415">next</a><span>|</span><label class="collapse" for="c-36306988">[-]</label><label class="expand" for="c-36306988">[1 more]</label></div><br/><div class="children"><div class="content">What makes it so that only 4chan users would have empathy for the death of other programmers? Terry&#x27;s death was quite tragic and his work was often discussed in technical circles for it&#x27;s novelty...despite his eccentricities. Love him or hate him, no human being deserved the circumstances of his life or of his death.<p>RIP Terry. A. Davis</div><br/></div></div><div id="36306415" class="c"><input type="checkbox" id="c-36306415" checked=""/><div class="controls bullet"><span class="by">lcrz</span><span>|</span><a href="#36303070">root</a><span>|</span><a href="#36305386">parent</a><span>|</span><a href="#36306988">prev</a><span>|</span><a href="#36303263">next</a><span>|</span><label class="collapse" for="c-36306415">[-]</label><label class="expand" for="c-36306415">[1 more]</label></div><br/><div class="children"><div class="content">Check the âapologyâ follow up. The person claims to be schizophrenic. Even the apology mail makes no sense and is full of paranoia and read like a group stalking delusion.</div><br/></div></div></div></div></div></div><div id="36303263" class="c"><input type="checkbox" id="c-36303263" checked=""/><div class="controls bullet"><span class="by">sedatk</span><span>|</span><a href="#36303070">parent</a><span>|</span><a href="#36303580">prev</a><span>|</span><a href="#36306726">next</a><span>|</span><label class="collapse" for="c-36303263">[-]</label><label class="expand" for="c-36303263">[15 more]</label></div><br/><div class="children"><div class="content">I wonder why users were angry about some files in their temp folder. Did McAfee fail to cleanup those files, or were they too big?<p>Edit: more information here: <a href="https:&#x2F;&#x2F;www2.sqlite.org&#x2F;cvstrac&#x2F;wiki?p=McafeeProblem" rel="nofollow noreferrer">https:&#x2F;&#x2F;www2.sqlite.org&#x2F;cvstrac&#x2F;wiki?p=McafeeProblem</a> Apparently, McAfee kept those files locked when it was using them, so the files couldn&#x27;t be deleted and people got angry that they couldn&#x27;t clean them up. Sounds like a loud minority to me.</div><br/><div id="36303326" class="c"><input type="checkbox" id="c-36303326" checked=""/><div class="controls bullet"><span class="by">banana_giraffe</span><span>|</span><a href="#36303070">root</a><span>|</span><a href="#36303263">parent</a><span>|</span><a href="#36303557">next</a><span>|</span><label class="collapse" for="c-36303326">[-]</label><label class="expand" for="c-36303326">[2 more]</label></div><br/><div class="children"><div class="content">There&#x27;s some level of power user that will try to fix things, not understand what&#x27;s going on, and yell at the world when they break things further.<p>I used to have a popular freely available 3rd party DLL that was included in lots of software packages.  Because I was silly, it had my email address in the metadata that&#x27;d show up if you clicked &quot;Properties&quot; in Explorer.  I&#x27;d get plenty of emails from random people asking for and sometimes _demanding_ help with software I&#x27;ve never heard of.  I&#x27;m sure if I had an easy to find website with my name and a forum on it, it&#x27;d be full of such angry comments.</div><br/><div id="36303727" class="c"><input type="checkbox" id="c-36303727" checked=""/><div class="controls bullet"><span class="by">thakoppno</span><span>|</span><a href="#36303070">root</a><span>|</span><a href="#36303326">parent</a><span>|</span><a href="#36303557">next</a><span>|</span><label class="collapse" for="c-36303727">[-]</label><label class="expand" for="c-36303727">[1 more]</label></div><br/><div class="children"><div class="content">&gt; There&#x27;s some level of power user that will try to fix things, not understand what&#x27;s going on, and yell at the world when they break things further.<p>That appears to me to be quite like a Chesterton fence. Everyone encounters these eventually.<p><a href="https:&#x2F;&#x2F;en.m.wiktionary.org&#x2F;wiki&#x2F;Chesterton%27s_fence" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.m.wiktionary.org&#x2F;wiki&#x2F;Chesterton%27s_fence</a></div><br/></div></div></div></div><div id="36303557" class="c"><input type="checkbox" id="c-36303557" checked=""/><div class="controls bullet"><span class="by">ajsnigrutin</span><span>|</span><a href="#36303070">root</a><span>|</span><a href="#36303263">parent</a><span>|</span><a href="#36303326">prev</a><span>|</span><a href="#36303964">next</a><span>|</span><label class="collapse" for="c-36303557">[-]</label><label class="expand" for="c-36303557">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a good thing, that there&#x27;s a clear instructional video on how to remove McAffee antivirus from your computer then:<p><a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=bKgf5PaBzyg">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=bKgf5PaBzyg</a><p>(yes, it&#x27;s the funny one)</div><br/></div></div><div id="36303964" class="c"><input type="checkbox" id="c-36303964" checked=""/><div class="controls bullet"><span class="by">chasil</span><span>|</span><a href="#36303070">root</a><span>|</span><a href="#36303263">parent</a><span>|</span><a href="#36303557">prev</a><span>|</span><a href="#36303399">next</a><span>|</span><label class="collapse" for="c-36303964">[-]</label><label class="expand" for="c-36303964">[8 more]</label></div><br/><div class="children"><div class="content">In Linux, these files are unlinked, so they are invisible in the filesystem. It is legal to unlink an active file descriptor, but continue reads&#x2F;writes to it.<p>I think that lsof can still see these temporary files; I&#x27;m not sure how I first noticed it.<p>Windows implements a POSIX kernel layer, so perhaps this functionality could be coaxed out of it.</div><br/><div id="36304461" class="c"><input type="checkbox" id="c-36304461" checked=""/><div class="controls bullet"><span class="by">hinkley</span><span>|</span><a href="#36303070">root</a><span>|</span><a href="#36303964">parent</a><span>|</span><a href="#36304289">next</a><span>|</span><label class="collapse" for="c-36304461">[-]</label><label class="expand" for="c-36304461">[3 more]</label></div><br/><div class="children"><div class="content">I knew two guys long long ago that used to circumvent the per user disk quota on shared machines, which was tiny and not conducive to power users. One found a deep dark corner of the file system, and used it to hold binaries the rest of us used. I think his idea was that if it wasnât for personal gain it was easier to answer difficult questions, which at some point came up and he got a pass, since it would take more disk space if we had private copies.<p>The other was keeping file handles open to deleted files, as you describe. I donât recall how this worked, but I suspect it involved uncompressing data into a file descriptor, then reading it back. I guess as long as his terminal window was open it was more stable than tmp (he may have also been using screen).</div><br/><div id="36305037" class="c"><input type="checkbox" id="c-36305037" checked=""/><div class="controls bullet"><span class="by">giantrobot</span><span>|</span><a href="#36303070">root</a><span>|</span><a href="#36304461">parent</a><span>|</span><a href="#36304289">next</a><span>|</span><label class="collapse" for="c-36305037">[-]</label><label class="expand" for="c-36305037">[2 more]</label></div><br/><div class="children"><div class="content">&gt; I donât recall how this worked<p>Unlinking files reduces their reference count. Once the reference count reaches zero the file is considered deleted and the space can be reclaimed. Every open file descriptor and hard link increases a file&#x27;s reference count. So if you&#x27;ve got a file descriptor open on a file in a background task (daemon, nohup, screen, etc) and unlink it with rm or something the file&#x27;s reference count will decrement but not go to zero. Only when that program closes the file descriptor will the reference count go to zero and the file actually be deleted.</div><br/><div id="36306082" class="c"><input type="checkbox" id="c-36306082" checked=""/><div class="controls bullet"><span class="by">xgbi</span><span>|</span><a href="#36303070">root</a><span>|</span><a href="#36305037">parent</a><span>|</span><a href="#36304289">next</a><span>|</span><label class="collapse" for="c-36306082">[-]</label><label class="expand" for="c-36306082">[1 more]</label></div><br/><div class="children"><div class="content">I had an interesting issue with that the other day:<p>Someone on my company thought it good to launch background process from within a cron, and start it with `&amp;Ë at the end, so that it detached from the cron and goes as child to init .<p>Right, but the program opens std out and dumps its output in it. Guess what, the fd handling the std out ends up in a temp file which is deleted by cron, but still held by the program.<p>I ended up with a full &#x2F; in all production servers, with no culprit when running Ëdu`. Only running Ëlsof |grep deleted` did I find these huge temporary files.<p>Killing the process and switching to a saner systemd service was the savior.</div><br/></div></div></div></div></div></div><div id="36304289" class="c"><input type="checkbox" id="c-36304289" checked=""/><div class="controls bullet"><span class="by">Arnavion</span><span>|</span><a href="#36303070">root</a><span>|</span><a href="#36303964">parent</a><span>|</span><a href="#36304461">prev</a><span>|</span><a href="#36305363">next</a><span>|</span><label class="collapse" for="c-36304289">[-]</label><label class="expand" for="c-36304289">[1 more]</label></div><br/><div class="children"><div class="content">If a file is opened with `FILE_SHARE_DELETE` then it can be deleted while held open. This flag has existed since forever. It&#x27;s just that unlike Linux this isn&#x27;t the default, and no developer would think of setting it. I think the only common software I saw using it when I still used Windows was the media player mpv.</div><br/></div></div><div id="36305363" class="c"><input type="checkbox" id="c-36305363" checked=""/><div class="controls bullet"><span class="by">somat</span><span>|</span><a href="#36303070">root</a><span>|</span><a href="#36303964">parent</a><span>|</span><a href="#36304289">prev</a><span>|</span><a href="#36304083">next</a><span>|</span><label class="collapse" for="c-36305363">[-]</label><label class="expand" for="c-36305363">[1 more]</label></div><br/><div class="children"><div class="content">When youtube was flash based that is how flash would save it&#x27;s cache file for the stream. to save a video you would go looking for what file descriptors were in use and yank them out of I believe &#x2F;dev&#x2F;fd and back into the filesystem. On windows the file was visible but locked behind the normal windows file locking shenanigans. To copy locked files on windows I used a program called hobocopy that utilized volume shadow tricks to work around the locks.</div><br/></div></div><div id="36304083" class="c"><input type="checkbox" id="c-36304083" checked=""/><div class="controls bullet"><span class="by">eurleif</span><span>|</span><a href="#36303070">root</a><span>|</span><a href="#36303964">parent</a><span>|</span><a href="#36305363">prev</a><span>|</span><a href="#36304025">next</a><span>|</span><label class="collapse" for="c-36304083">[-]</label><label class="expand" for="c-36304083">[1 more]</label></div><br/><div class="children"><div class="content">Apparently, recent Windows uses POSIX semantics by default: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=23745019">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=23745019</a></div><br/></div></div><div id="36304025" class="c"><input type="checkbox" id="c-36304025" checked=""/><div class="controls bullet"><span class="by">bombcar</span><span>|</span><a href="#36303070">root</a><span>|</span><a href="#36303964">parent</a><span>|</span><a href="#36304083">prev</a><span>|</span><a href="#36303399">next</a><span>|</span><label class="collapse" for="c-36304025">[-]</label><label class="expand" for="c-36304025">[1 more]</label></div><br/><div class="children"><div class="content">lsof shows âopen file handlesâ which can include deleted files. Can be useful when you have a disk showing tons of usage but you canât find any big files.</div><br/></div></div></div></div><div id="36303399" class="c"><input type="checkbox" id="c-36303399" checked=""/><div class="controls bullet"><span class="by">giantrobot</span><span>|</span><a href="#36303070">root</a><span>|</span><a href="#36303263">parent</a><span>|</span><a href="#36303964">prev</a><span>|</span><a href="#36306726">next</a><span>|</span><label class="collapse" for="c-36303399">[-]</label><label class="expand" for="c-36303399">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Sounds like a loud minority to me.<p>Imagine for a moment the cross section of Windows users that 1) have McAfee running 2) poke around the Windows temp folders and&#x2F;or run some sort of &quot;cleaner&quot; to &quot;optimize&quot; their system and 3) <i>don&#x27;t</i> recognize the name &quot;sqlite&quot;. I can imagine the exact type of user, peak Dunning-Kruger and utterly insufferable. Even just <i>seeing</i> their e-mails before deleting them would be maddening. I think most people on HN can vividly imagine the sort or remember back when <i>they</i> were that insufferable twat.</div><br/><div id="36304704" class="c"><input type="checkbox" id="c-36304704" checked=""/><div class="controls bullet"><span class="by">rootw0rm</span><span>|</span><a href="#36303070">root</a><span>|</span><a href="#36303399">parent</a><span>|</span><a href="#36306726">next</a><span>|</span><label class="collapse" for="c-36304704">[-]</label><label class="expand" for="c-36304704">[2 more]</label></div><br/><div class="children"><div class="content">I was that person once.  I was 12 and couldn&#x27;t understand why MS-DOS disk maintenance tools shouldn&#x27;t be used on PC-DOS because obviously repair tools can only fix things</div><br/><div id="36306497" class="c"><input type="checkbox" id="c-36306497" checked=""/><div class="controls bullet"><span class="by">tempestn</span><span>|</span><a href="#36303070">root</a><span>|</span><a href="#36304704">parent</a><span>|</span><a href="#36306726">next</a><span>|</span><label class="collapse" for="c-36306497">[-]</label><label class="expand" for="c-36306497">[1 more]</label></div><br/><div class="children"><div class="content">Children really are peak Dunning-Kruger.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="36306726" class="c"><input type="checkbox" id="c-36306726" checked=""/><div class="controls bullet"><span class="by">withinrafael</span><span>|</span><a href="#36303070">prev</a><span>|</span><a href="#36303052">next</a><span>|</span><label class="collapse" for="c-36306726">[-]</label><label class="expand" for="c-36306726">[1 more]</label></div><br/><div class="children"><div class="content">Similar story: Friend and I put out a kernel driver (uxstyle.sys) that would patch Microsoft&#x27;s theming digital signature checks. It was free, buggy, and bugchecked the OS on upgrade. It was unsurprisingly added to compatibility blocks in Windows. I fixed the bug and asked Microsoft to loosen the block (version X and below). Microsoft refused citing a EULA violation. Valid or not, I renamed the driver to elytsxu.sys to circumvent their check and the app worked well enough until third-party theming fell out of favor.</div><br/></div></div><div id="36303052" class="c"><input type="checkbox" id="c-36303052" checked=""/><div class="controls bullet"><span class="by">kapp_in_life</span><span>|</span><a href="#36306726">prev</a><span>|</span><a href="#36305782">next</a><span>|</span><label class="collapse" for="c-36303052">[-]</label><label class="expand" for="c-36303052">[1 more]</label></div><br/><div class="children"><div class="content">Link directly to the reason comment:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;mackyle&#x2F;sqlite&#x2F;blob&#x2F;18cf47156abe94255ae1495ba2da84517dce6081&#x2F;src&#x2F;os.h#L65">https:&#x2F;&#x2F;github.com&#x2F;mackyle&#x2F;sqlite&#x2F;blob&#x2F;18cf47156abe94255ae14...</a></div><br/></div></div><div id="36305782" class="c"><input type="checkbox" id="c-36305782" checked=""/><div class="controls bullet"><span class="by">qalmakka</span><span>|</span><a href="#36303052">prev</a><span>|</span><a href="#36304014">next</a><span>|</span><label class="collapse" for="c-36305782">[-]</label><label class="expand" for="c-36305782">[4 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t know, the more time passes the more I convince myself that the net benefits of antivirus software do not (an maybe never) exceed their downsides. In decades I&#x27;ve heard so many stories about AV software behaving suspiciously, using borderline shady tricks to monitor user activity, causing severe performance degradation, etc</div><br/><div id="36306540" class="c"><input type="checkbox" id="c-36306540" checked=""/><div class="controls bullet"><span class="by">runlevel1</span><span>|</span><a href="#36305782">parent</a><span>|</span><a href="#36306513">next</a><span>|</span><label class="collapse" for="c-36306540">[-]</label><label class="expand" for="c-36306540">[1 more]</label></div><br/><div class="children"><div class="content">How about that time Avast gave you RCE by simply adding HTML to the CN field of an invalid certificate?[^1] Or when TrendMicro added an unauthenticated listener that would exec anything you sent it?[^2]<p>[1]: <a href="https:&#x2F;&#x2F;www.theregister.com&#x2F;2015&#x2F;10&#x2F;06&#x2F;google_zero_hacker_reports_remote_exec_hole_in_avast_antivirus&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.theregister.com&#x2F;2015&#x2F;10&#x2F;06&#x2F;google_zero_hacker_re...</a>
[2]: <a href="https:&#x2F;&#x2F;bugs.chromium.org&#x2F;p&#x2F;project-zero&#x2F;issues&#x2F;detail?id=693&amp;q=mitm&amp;can=1" rel="nofollow noreferrer">https:&#x2F;&#x2F;bugs.chromium.org&#x2F;p&#x2F;project-zero&#x2F;issues&#x2F;detail?id=69...</a></div><br/></div></div><div id="36306513" class="c"><input type="checkbox" id="c-36306513" checked=""/><div class="controls bullet"><span class="by">tempestn</span><span>|</span><a href="#36305782">parent</a><span>|</span><a href="#36306540">prev</a><span>|</span><a href="#36306746">next</a><span>|</span><label class="collapse" for="c-36306513">[-]</label><label class="expand" for="c-36306513">[1 more]</label></div><br/><div class="children"><div class="content">There was a time when they made sense, but it&#x27;s been many years since the benefits of running a third party antivirus program outweighed the drawbacks.</div><br/></div></div><div id="36306746" class="c"><input type="checkbox" id="c-36306746" checked=""/><div class="controls bullet"><span class="by">ilyt</span><span>|</span><a href="#36305782">parent</a><span>|</span><a href="#36306513">prev</a><span>|</span><a href="#36304014">next</a><span>|</span><label class="collapse" for="c-36306746">[-]</label><label class="expand" for="c-36306746">[1 more]</label></div><br/><div class="children"><div class="content">I remember our Java developers being very unhappy with ESET requirement that made the Linux boxes compile performance literally halve</div><br/></div></div></div></div><div id="36304014" class="c"><input type="checkbox" id="c-36304014" checked=""/><div class="controls bullet"><span class="by">thrdbndndn</span><span>|</span><a href="#36305782">prev</a><span>|</span><a href="#36303092">next</a><span>|</span><label class="collapse" for="c-36304014">[-]</label><label class="expand" for="c-36304014">[2 more]</label></div><br/><div class="children"><div class="content">I often search for weird files in my %userprofile% (there are a lot random ones) just out of curiosity, despite I know they&#x27;re not malicious.<p>It doesn&#x27;t help that if you Google any filenames, or even any semi-obscure file extensions, there would always be plenty of blogspam articles saying they&#x27;re &quot;possible virus&quot;. And oftentimes, there is <i>no</i> legit article to say what they really are even if you try, if they&#x27;re from some relatively less popular software.</div><br/><div id="36306369" class="c"><input type="checkbox" id="c-36306369" checked=""/><div class="controls bullet"><span class="by">lionkor</span><span>|</span><a href="#36304014">parent</a><span>|</span><a href="#36303092">next</a><span>|</span><label class="collapse" for="c-36306369">[-]</label><label class="expand" for="c-36306369">[1 more]</label></div><br/><div class="children"><div class="content">Could put the file(s) on a linux machine and run `file` on them</div><br/></div></div></div></div><div id="36303092" class="c"><input type="checkbox" id="c-36303092" checked=""/><div class="controls bullet"><span class="by">ShadowBanThis01</span><span>|</span><a href="#36304014">prev</a><span>|</span><a href="#36303053">next</a><span>|</span><label class="collapse" for="c-36303092">[-]</label><label class="expand" for="c-36303092">[13 more]</label></div><br/><div class="children"><div class="content">Love it.<p>Too bad there aren&#x27;t enough Mac users to prompt a similar backlash against Macs littering every computer they visit on the network with .DS_Store and other turds.</div><br/><div id="36303238" class="c"><input type="checkbox" id="c-36303238" checked=""/><div class="controls bullet"><span class="by">sltkr</span><span>|</span><a href="#36303092">parent</a><span>|</span><a href="#36303276">next</a><span>|</span><label class="collapse" for="c-36303238">[-]</label><label class="expand" for="c-36303238">[8 more]</label></div><br/><div class="children"><div class="content">This isn&#x27;t remotely comparable. Those .DS_Store files are created in arbitrary directories by the Apple file manager or something. The SQLite temp files are created in the OS-specific temporary directory (e.g. C:&#x2F;Users&#x2F;username&#x2F;AppData&#x2F;Local&#x2F;Temp or whatever on Windows) which is specifically intended for that purpose. SQLite isn&#x27;t doing anything wrong; that&#x27;s where it&#x27;s supposed to store temporary data that doesn&#x27;t fit into memory.<p>The problem is that virus scanners sometimes misclassify those temp files as belonging to malware apps, or sometimes they might be written by real malware apps, but even in the latter case, that only happens because the malware uses sqlite as a library. The malware isn&#x27;t written by the SQLite authors, so complaining to them is pointless.</div><br/><div id="36306392" class="c"><input type="checkbox" id="c-36306392" checked=""/><div class="controls bullet"><span class="by">thrdbndndn</span><span>|</span><a href="#36303092">root</a><span>|</span><a href="#36303238">parent</a><span>|</span><a href="#36307189">next</a><span>|</span><label class="collapse" for="c-36306392">[-]</label><label class="expand" for="c-36306392">[1 more]</label></div><br/><div class="children"><div class="content">You misunderstood what the comment in the code was saying.<p>Firstly, it not that anti-virus software was misclassifying it -- it&#x27;s that a particular one, Mcafee, was <i>USING</i> sqlite. And more importantly, it didn&#x27;t put the file(s) in the proper %temp% folder. Instead, it created it as `C:\temp\{name}.sqlite_`. This is why users found them suspicious and complained to devs.<p>Also keep in mind putting random files or folders under root of C:\ was, while never recommended, a common practice in 2000s (some still do so even today). So what Mcafee was doing is hardly unheard of. But people still freak out when they see these in their C:\ (TBH, understandable).<p>&gt; %userprofile%</div><br/></div></div><div id="36307189" class="c"><input type="checkbox" id="c-36307189" checked=""/><div class="controls bullet"><span class="by">ShadowBanThis01</span><span>|</span><a href="#36303092">root</a><span>|</span><a href="#36303238">parent</a><span>|</span><a href="#36306392">prev</a><span>|</span><a href="#36303611">next</a><span>|</span><label class="collapse" for="c-36307189">[-]</label><label class="expand" for="c-36307189">[1 more]</label></div><br/><div class="children"><div class="content">They&#x27;re not arbitrary at all. They&#x27;re in directories visited by Finder, storing the open&#x2F;closed state of subdirectories, and apparently other view data.<p>Apple, in its arrogance and backwardness, doesn&#x27;t store those choices on the BROWSING user&#x27;s computer; it stores them in the directories on the computer being browsed... where, by the way, they&#x27;ll be trounced by the next Finder user who comes along.</div><br/></div></div><div id="36303611" class="c"><input type="checkbox" id="c-36303611" checked=""/><div class="controls bullet"><span class="by">deaddodo</span><span>|</span><a href="#36303092">root</a><span>|</span><a href="#36303238">parent</a><span>|</span><a href="#36307189">prev</a><span>|</span><a href="#36303276">next</a><span>|</span><label class="collapse" for="c-36303611">[-]</label><label class="expand" for="c-36303611">[5 more]</label></div><br/><div class="children"><div class="content">&gt; Those .DS_Store files are created in arbitrary directories by the Apple file manager or something.<p>.DS_Store files come from Apple&#x27;s file systems containing a separate data and resource fork. APFS can natively store the contents, but for foreign file systems&#x2F;network shares, a .DS_Store file is created to store those attributes.</div><br/><div id="36304195" class="c"><input type="checkbox" id="c-36304195" checked=""/><div class="controls bullet"><span class="by">YetAnotherNick</span><span>|</span><a href="#36303092">root</a><span>|</span><a href="#36303611">parent</a><span>|</span><a href="#36303831">next</a><span>|</span><label class="collapse" for="c-36304195">[-]</label><label class="expand" for="c-36304195">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t have OCD but the casing of .DS_Store annoys me a lot for some reason. I have turned on option to display dot files in finder and I see this god awful name everywhere. It could be .DSStore, .ds_store, .DS Store or even .DS_STORE, current one is the worst.</div><br/></div></div><div id="36303831" class="c"><input type="checkbox" id="c-36303831" checked=""/><div class="controls bullet"><span class="by">remram</span><span>|</span><a href="#36303092">root</a><span>|</span><a href="#36303611">parent</a><span>|</span><a href="#36304195">prev</a><span>|</span><a href="#36303276">next</a><span>|</span><label class="collapse" for="c-36303831">[-]</label><label class="expand" for="c-36303831">[3 more]</label></div><br/><div class="children"><div class="content">I never knew that. How come they end up in Git repositories then? They shouldn&#x27;t be visible to Git running on a native Mac filesystem?</div><br/><div id="36306323" class="c"><input type="checkbox" id="c-36306323" checked=""/><div class="controls bullet"><span class="by">ckolkey</span><span>|</span><a href="#36303092">root</a><span>|</span><a href="#36303831">parent</a><span>|</span><a href="#36305637">next</a><span>|</span><label class="collapse" for="c-36306323">[-]</label><label class="expand" for="c-36306323">[1 more]</label></div><br/><div class="children"><div class="content">They&#x27;re just a file, so git can see it. Good habit would be to add it to the project&#x27;s gitignore, or your global gitignore (or both)</div><br/></div></div><div id="36305637" class="c"><input type="checkbox" id="c-36305637" checked=""/><div class="controls bullet"><span class="by">Ndymium</span><span>|</span><a href="#36303092">root</a><span>|</span><a href="#36303831">parent</a><span>|</span><a href="#36306323">prev</a><span>|</span><a href="#36303276">next</a><span>|</span><label class="collapse" for="c-36305637">[-]</label><label class="expand" for="c-36305637">[1 more]</label></div><br/><div class="children"><div class="content">They are visible to programs, for example if you run `ls -a` you will see them on macOS too. I reckon they&#x27;re only transparent to Finder (where you can&#x27;t see them even if you&#x27;re showing hidden files).</div><br/></div></div></div></div></div></div></div></div><div id="36303276" class="c"><input type="checkbox" id="c-36303276" checked=""/><div class="controls bullet"><span class="by">sedatk</span><span>|</span><a href="#36303092">parent</a><span>|</span><a href="#36303238">prev</a><span>|</span><a href="#36303775">next</a><span>|</span><label class="collapse" for="c-36303276">[-]</label><label class="expand" for="c-36303276">[1 more]</label></div><br/><div class="children"><div class="content">.DS_Store files are totally out of control: <a href="https:&#x2F;&#x2F;twitter.com&#x2F;rdohms&#x2F;status&#x2F;1667554818603245570" rel="nofollow noreferrer">https:&#x2F;&#x2F;twitter.com&#x2F;rdohms&#x2F;status&#x2F;1667554818603245570</a></div><br/></div></div><div id="36303775" class="c"><input type="checkbox" id="c-36303775" checked=""/><div class="controls bullet"><span class="by">gumby</span><span>|</span><a href="#36303092">parent</a><span>|</span><a href="#36303276">prev</a><span>|</span><a href="#36303053">next</a><span>|</span><label class="collapse" for="c-36303775">[-]</label><label class="expand" for="c-36303775">[3 more]</label></div><br/><div class="children"><div class="content">You mean like those thumbs.db files windows leaves on every computer they visit on the network?</div><br/><div id="36306657" class="c"><input type="checkbox" id="c-36306657" checked=""/><div class="controls bullet"><span class="by">joemelonyeah</span><span>|</span><a href="#36303092">root</a><span>|</span><a href="#36303775">parent</a><span>|</span><a href="#36303053">next</a><span>|</span><label class="collapse" for="c-36306657">[-]</label><label class="expand" for="c-36306657">[2 more]</label></div><br/><div class="children"><div class="content">Windows XP is the last Windows version that does this.</div><br/><div id="36307202" class="c"><input type="checkbox" id="c-36307202" checked=""/><div class="controls bullet"><span class="by">ShadowBanThis01</span><span>|</span><a href="#36303092">root</a><span>|</span><a href="#36306657">parent</a><span>|</span><a href="#36303053">next</a><span>|</span><label class="collapse" for="c-36307202">[-]</label><label class="expand" for="c-36307202">[1 more]</label></div><br/><div class="children"><div class="content">Not to mention that I think you&#x27;d have to be browsing in some non-list view for it to even be generated.</div><br/></div></div></div></div></div></div></div></div><div id="36303999" class="c"><input type="checkbox" id="c-36303999" checked=""/><div class="controls bullet"><span class="by">shadowgovt</span><span>|</span><a href="#36303053">prev</a><span>|</span><a href="#36304395">next</a><span>|</span><label class="collapse" for="c-36303999">[-]</label><label class="expand" for="c-36303999">[1 more]</label></div><br/><div class="children"><div class="content">Software is at least a much social as technology.</div><br/></div></div><div id="36304395" class="c"><input type="checkbox" id="c-36304395" checked=""/><div class="controls bullet"><span class="by">2h</span><span>|</span><a href="#36303999">prev</a><span>|</span><a href="#36303064">next</a><span>|</span><label class="collapse" for="c-36304395">[-]</label><label class="expand" for="c-36304395">[1 more]</label></div><br/><div class="children"><div class="content">correct URL is:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;sqlite&#x2F;sqlite&#x2F;blob&#x2F;master&#x2F;src&#x2F;os.h">https:&#x2F;&#x2F;github.com&#x2F;sqlite&#x2F;sqlite&#x2F;blob&#x2F;master&#x2F;src&#x2F;os.h</a></div><br/></div></div><div id="36303064" class="c"><input type="checkbox" id="c-36303064" checked=""/><div class="controls bullet"><span class="by">endisneigh</span><span>|</span><a href="#36304395">prev</a><span>|</span><a href="#36303648">next</a><span>|</span><label class="collapse" for="c-36303064">[-]</label><label class="expand" for="c-36303064">[26 more]</label></div><br/><div class="children"><div class="content">Somewhat related - Iâm very very curious to hear a detailed account of someone who uses SQLite for a production app with high traffic.<p>For the embedded use case I think itâs a slam dunk, but there are many interesting use cases for server side but they all seem to be toyish.<p>The locking behavior of SQLite is somewhat problematic unless you use WAL and even then not perfect</div><br/><div id="36303411" class="c"><input type="checkbox" id="c-36303411" checked=""/><div class="controls bullet"><span class="by">bob1029</span><span>|</span><a href="#36303064">parent</a><span>|</span><a href="#36303777">next</a><span>|</span><label class="collapse" for="c-36303411">[-]</label><label class="expand" for="c-36303411">[7 more]</label></div><br/><div class="children"><div class="content">&gt; there are many interesting use cases for server side but they all seem to be toyish.<p>&gt; The locking behavior of SQLite is somewhat problematic unless you use WAL and even then not perfect<p>SQLite with WAL and synchronous configured appropriately will insert a row in ~50uS on NVMe hardware. This is completely serialized throughput (i.e. the highest isolation level available in SQL Server, et. al.). At scale, this can be reasonably described as &quot;inserting a billion rows per day&quot;.<p>I have yet to witness a database engine with latency that can touch SQLite. For some applications, this is a go&#x2F;no-go difference. Why eschew the majesty of SQL because you can&#x27;t wait for a network hop? Bring that engine in process to help solve your tricky data problems. I&#x27;d much rather write SQL than LINQ if I have to join more than 2 tables.<p>We&#x27;ve been exclusively using SQLite in production for a long time. Big, multi-user databases. Looking at migrating to SQL Server Hyperscale, but not because SQLite is slow or causing any technical troubles. We want to consolidate our installs into one physical place so we can keep a better eye on them as we grow.<p>Fun fact: SQL Server &quot;Hyperscale&quot; is capped at 100MB&#x2F;s on its transaction log. I have written to SQLite databases at rates far exceeding this.</div><br/><div id="36303899" class="c"><input type="checkbox" id="c-36303899" checked=""/><div class="controls bullet"><span class="by">endisneigh</span><span>|</span><a href="#36303064">root</a><span>|</span><a href="#36303411">parent</a><span>|</span><a href="#36303777">next</a><span>|</span><label class="collapse" for="c-36303899">[-]</label><label class="expand" for="c-36303899">[6 more]</label></div><br/><div class="children"><div class="content">Is your application a networked one?</div><br/><div id="36303962" class="c"><input type="checkbox" id="c-36303962" checked=""/><div class="controls bullet"><span class="by">bob1029</span><span>|</span><a href="#36303064">root</a><span>|</span><a href="#36303899">parent</a><span>|</span><a href="#36303777">next</a><span>|</span><label class="collapse" for="c-36303962">[-]</label><label class="expand" for="c-36303962">[5 more]</label></div><br/><div class="children"><div class="content">It is a web app that has exclusive ownership over its SQLite databases. Exactly one SQLiteConnection instance per for the lifetime of the application.</div><br/><div id="36304403" class="c"><input type="checkbox" id="c-36304403" checked=""/><div class="controls bullet"><span class="by">belinder</span><span>|</span><a href="#36303064">root</a><span>|</span><a href="#36303962">parent</a><span>|</span><a href="#36304032">next</a><span>|</span><label class="collapse" for="c-36304403">[-]</label><label class="expand" for="c-36304403">[3 more]</label></div><br/><div class="children"><div class="content">Does that mean you have to bring the whole app down if you need to manually insert something in sql?</div><br/><div id="36306444" class="c"><input type="checkbox" id="c-36306444" checked=""/><div class="controls bullet"><span class="by">yjftsjthsd-h</span><span>|</span><a href="#36303064">root</a><span>|</span><a href="#36304403">parent</a><span>|</span><a href="#36306949">next</a><span>|</span><label class="collapse" for="c-36306444">[-]</label><label class="expand" for="c-36306444">[1 more]</label></div><br/><div class="children"><div class="content">I am not an expert, but if I had written an app that was designed like that, the app would have a &#x2F;debug url that let me log in[0] and then do all kinds of fun things[1], including running raw SQL from the app&#x27;s context.<p>[0] And I would be very careful about the security angle, because this is effectively a very dangerous back door into the whole system. Useful, but something to be careful about.<p>[1] Dump live activity stats, performance info, ability to run arbitrary queries against any database(s), ability to run arbitrary code in the app itself if available in a reasonable way (ex. if the app is in a dynamic language, just an eval(), possibly embed tcl&#x2F;lua if not).</div><br/></div></div><div id="36306949" class="c"><input type="checkbox" id="c-36306949" checked=""/><div class="controls bullet"><span class="by">krab</span><span>|</span><a href="#36303064">root</a><span>|</span><a href="#36304403">parent</a><span>|</span><a href="#36306444">prev</a><span>|</span><a href="#36304032">next</a><span>|</span><label class="collapse" for="c-36306949">[-]</label><label class="expand" for="c-36306949">[1 more]</label></div><br/><div class="children"><div class="content">More SQLite processes can open the same file at a same time.</div><br/></div></div></div></div><div id="36304032" class="c"><input type="checkbox" id="c-36304032" checked=""/><div class="controls bullet"><span class="by">endisneigh</span><span>|</span><a href="#36303064">root</a><span>|</span><a href="#36303962">parent</a><span>|</span><a href="#36304403">prev</a><span>|</span><a href="#36303777">next</a><span>|</span><label class="collapse" for="c-36304032">[-]</label><label class="expand" for="c-36304032">[1 more]</label></div><br/><div class="children"><div class="content">Interesting. Any more info or link?</div><br/></div></div></div></div></div></div></div></div><div id="36303777" class="c"><input type="checkbox" id="c-36303777" checked=""/><div class="controls bullet"><span class="by">belthesar</span><span>|</span><a href="#36303064">parent</a><span>|</span><a href="#36303411">prev</a><span>|</span><a href="#36303159">next</a><span>|</span><label class="collapse" for="c-36303777">[-]</label><label class="expand" for="c-36303777">[1 more]</label></div><br/><div class="children"><div class="content">A super smart guy on my team at a previous job replaced around $100,000 of server and SAN hardware used for a(n) (admittedly incredibly absurdly designed, well before our time) analytics system built using MySQL filtered replication triggering stored procedures in this magical Rube Goldberg-ian dystopia with a 3 node Flask app running with 2 cores and 4 GB of RAM each performing the analytics work JIT. The app would use in-memory SQLite3 tables to perform the same work as the stored procedure operations, and cost about 50ms of extra time per request for a feature of the app that was rarely used.<p>Admittedly, not high traffic like you asked, but one of my favorite uses of SQLite hands down.</div><br/></div></div><div id="36303159" class="c"><input type="checkbox" id="c-36303159" checked=""/><div class="controls bullet"><span class="by">ripley12</span><span>|</span><a href="#36303064">parent</a><span>|</span><a href="#36303777">prev</a><span>|</span><a href="#36303309">next</a><span>|</span><label class="collapse" for="c-36303159">[-]</label><label class="expand" for="c-36303159">[1 more]</label></div><br/><div class="children"><div class="content">Not a <i>ton</i> of detail, but Tailscale uses it: <a href="https:&#x2F;&#x2F;tailscale.com&#x2F;blog&#x2F;database-for-2022&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;tailscale.com&#x2F;blog&#x2F;database-for-2022&#x2F;</a></div><br/></div></div><div id="36303309" class="c"><input type="checkbox" id="c-36303309" checked=""/><div class="controls bullet"><span class="by">MatthiasPortzel</span><span>|</span><a href="#36303064">parent</a><span>|</span><a href="#36303159">prev</a><span>|</span><a href="#36303532">next</a><span>|</span><label class="collapse" for="c-36303309">[-]</label><label class="expand" for="c-36303309">[2 more]</label></div><br/><div class="children"><div class="content">Apps arenât divided into âhigh-trafficâ and âtoys.â There are plenty of use cases where you have a low-write server in a production environment, and SQLite would work fine there.<p>If you need high write volume, then yes, the locking behavior means SQLite is not a good fit.</div><br/><div id="36304034" class="c"><input type="checkbox" id="c-36304034" checked=""/><div class="controls bullet"><span class="by">chasil</span><span>|</span><a href="#36303064">root</a><span>|</span><a href="#36303309">parent</a><span>|</span><a href="#36303532">next</a><span>|</span><label class="collapse" for="c-36304034">[-]</label><label class="expand" for="c-36304034">[1 more]</label></div><br/><div class="children"><div class="content">SQLite can easily hit 15k INSERTs per minute or more (setting processor affinity to a single core helps drive the max rate up). However, if a process begins a transaction and then stalls, it halts all dml.<p>I think performance can be good, as long as a competent schema design is in place. Allowing ad-hoc queries from less trusted users will surely tank performance.</div><br/></div></div></div></div><div id="36303532" class="c"><input type="checkbox" id="c-36303532" checked=""/><div class="controls bullet"><span class="by">deaddodo</span><span>|</span><a href="#36303064">parent</a><span>|</span><a href="#36303309">prev</a><span>|</span><a href="#36305465">next</a><span>|</span><label class="collapse" for="c-36303532">[-]</label><label class="expand" for="c-36303532">[1 more]</label></div><br/><div class="children"><div class="content">There are plenty of use cases of SQLite being used in production servers, usually for cache locality of small datasets (think more complex read-focused Redis use cases) or for direct data operations (transforms, for instance).<p>That being said; even if it weren&#x27;t usable in a web service space, does that make it any less reasonable of a database? That whole mentality sounds like a web developer centric one. Berkeley DB was used for decades for application and system databases, a field that SQLite largely replaced it in. And one that MySQL, Postgres, Oracle, etc are generally completely unsuited for. It&#x27;s the same reason Microsoft offered MS Access for so long alongside MSSQL, until MSSQL had it&#x27;s own decent embeddable option to deprecate it.</div><br/></div></div><div id="36305465" class="c"><input type="checkbox" id="c-36305465" checked=""/><div class="controls bullet"><span class="by">vimda</span><span>|</span><a href="#36303064">parent</a><span>|</span><a href="#36303532">prev</a><span>|</span><a href="#36303584">next</a><span>|</span><label class="collapse" for="c-36305465">[-]</label><label class="expand" for="c-36305465">[1 more]</label></div><br/><div class="children"><div class="content">Cloudflare&#x27;s D1 is built on top of it <a href="https:&#x2F;&#x2F;blog.cloudflare.com&#x2F;introducing-d1&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;blog.cloudflare.com&#x2F;introducing-d1&#x2F;</a></div><br/></div></div><div id="36303584" class="c"><input type="checkbox" id="c-36303584" checked=""/><div class="controls bullet"><span class="by">hakfoo</span><span>|</span><a href="#36303064">parent</a><span>|</span><a href="#36305465">prev</a><span>|</span><a href="#36304877">next</a><span>|</span><label class="collapse" for="c-36303584">[-]</label><label class="expand" for="c-36303584">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been pushing to try SQLite as a &quot;sacrificial memozation.&quot;  Basically we have two tasks separated by 5-10 days.  When we do the first task, we calculate a bunch of information as a &quot;side effect&quot;.  At the second task, we don&#x27;t have that information and trying to reconstruct it without the original context is very slow, because a lot of it is dependent on temporal state-- what was happening 5-10 days ago.<p>The other use case I&#x27;m eager to explore is as persistence of status data in a long-running process.  Occasionally the task blows up halfway and although we can recover the functional changes, we lose the reporting data for the original run.  If we save it in a SQLite database instead of just in-script data structures, we don&#x27;t have to try to reverse engineer it anymore.<p>In both cases, I like the idea of &quot;everything&#x27;s one file and we nuke it when we&#x27;re done&quot; rather than &quot;deal with the hostile operations team to spin up MySQL infrastructure.&quot;</div><br/><div id="36305766" class="c"><input type="checkbox" id="c-36305766" checked=""/><div class="controls bullet"><span class="by">rootw0rm</span><span>|</span><a href="#36303064">root</a><span>|</span><a href="#36303584">parent</a><span>|</span><a href="#36303799">next</a><span>|</span><label class="collapse" for="c-36305766">[-]</label><label class="expand" for="c-36305766">[1 more]</label></div><br/><div class="children"><div class="content">redis could possibly work, too, depending on how you actually plan to do it</div><br/></div></div><div id="36303799" class="c"><input type="checkbox" id="c-36303799" checked=""/><div class="controls bullet"><span class="by">storyinmemo</span><span>|</span><a href="#36303064">root</a><span>|</span><a href="#36303584">parent</a><span>|</span><a href="#36305766">prev</a><span>|</span><a href="#36304877">next</a><span>|</span><label class="collapse" for="c-36303799">[-]</label><label class="expand" for="c-36303799">[1 more]</label></div><br/><div class="children"><div class="content">You should look into temporal.io. Your workflow problem is highly suited to it.</div><br/></div></div></div></div><div id="36304877" class="c"><input type="checkbox" id="c-36304877" checked=""/><div class="controls bullet"><span class="by">aseipp</span><span>|</span><a href="#36303064">parent</a><span>|</span><a href="#36303584">prev</a><span>|</span><a href="#36303294">next</a><span>|</span><label class="collapse" for="c-36304877">[-]</label><label class="expand" for="c-36304877">[1 more]</label></div><br/><div class="children"><div class="content">High-volume single-writer + WAL mode is perfectly doable for a lot of applications, but you have to keep the concurrency model in mind. I think of it more like a really advanced data structure library than a &quot;database&quot; in that sense.<p>An old product I worked on (which is still around) used (still uses?) SQLite for storing filesystem blocks that came from the paired backup software. A single database only contained the blocks backed up from a single disk (based on its disk UUID.) So, this is a perfect scenario since there&#x27;s only one writer at a time because there&#x27;s only one device and one backup on that device at a time. We could write blocks to SQLite fast enough to saturate the IOPS of the underlying device and filesystem containing the database. This was over 10 years ago. Very practical and durable and way better than anything we could do in house.<p>Today, you can definitely do GB&#x2F;s on NVMe class hardware with the right pragma settings and the right workload. So for certain classes of multi-tenant solutions I think it&#x27;s not so bad, you can just naturally have a single writer to a single data store (or can otherwise linearize writes) and the raw performance will be excellent and more than enough.</div><br/></div></div><div id="36303294" class="c"><input type="checkbox" id="c-36303294" checked=""/><div class="controls bullet"><span class="by">eyegor</span><span>|</span><a href="#36303064">parent</a><span>|</span><a href="#36304877">prev</a><span>|</span><a href="#36303079">next</a><span>|</span><label class="collapse" for="c-36303294">[-]</label><label class="expand" for="c-36303294">[3 more]</label></div><br/><div class="children"><div class="content">Yes, the sqlite defaults are quite terrible out of the box. I&#x27;m not sure why they never changed them, it will start choking at 5k inserts where other dbs can do 100x that (and so will sqlite in wal and a few other settings). Getting it to perform well in high traffic scenarios would be a lot of effort. I struggle to get it to be vaguely performant in embedded use cases and often roll my own poor man&#x27;s version unless I really care about data integrity (which is rare).</div><br/><div id="36304006" class="c"><input type="checkbox" id="c-36304006" checked=""/><div class="controls bullet"><span class="by">arp242</span><span>|</span><a href="#36303064">root</a><span>|</span><a href="#36303294">parent</a><span>|</span><a href="#36304316">next</a><span>|</span><label class="collapse" for="c-36304006">[-]</label><label class="expand" for="c-36304006">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I&#x27;m not sure why they never changed them<p>Because SQLite is run in many different environments and scenarios, and what&#x27;s terrible in one scenario is perfect for another. There are no defaults that will work for everyone. This <i>also</i> applies to MySQL, PostgreSQL, etc. but the range of scenarios for those is more limited (no embedded for example) so the defaults are a bit more tuned to what&#x27;s suitable for your scenario.</div><br/></div></div><div id="36304316" class="c"><input type="checkbox" id="c-36304316" checked=""/><div class="controls bullet"><span class="by">vore</span><span>|</span><a href="#36303064">root</a><span>|</span><a href="#36303294">parent</a><span>|</span><a href="#36304006">prev</a><span>|</span><a href="#36303079">next</a><span>|</span><label class="collapse" for="c-36304316">[-]</label><label class="expand" for="c-36304316">[1 more]</label></div><br/><div class="children"><div class="content">Isn&#x27;t it more rare to <i>not</i> care about data integrity? Being unsure what state your data is at any point in time does not seem like a safe scenario.</div><br/></div></div></div></div><div id="36303079" class="c"><input type="checkbox" id="c-36303079" checked=""/><div class="controls bullet"><span class="by">nickstinemates</span><span>|</span><a href="#36303064">parent</a><span>|</span><a href="#36303294">prev</a><span>|</span><a href="#36303083">next</a><span>|</span><label class="collapse" for="c-36303079">[-]</label><label class="expand" for="c-36303079">[3 more]</label></div><br/><div class="children"><div class="content">Fly[1] uses it<p>1: <a href="https:&#x2F;&#x2F;fly.io&#x2F;blog&#x2F;introducing-litefs&#x2F;">https:&#x2F;&#x2F;fly.io&#x2F;blog&#x2F;introducing-litefs&#x2F;</a></div><br/><div id="36303173" class="c"><input type="checkbox" id="c-36303173" checked=""/><div class="controls bullet"><span class="by">8organicbits</span><span>|</span><a href="#36303064">root</a><span>|</span><a href="#36303079">parent</a><span>|</span><a href="#36303215">next</a><span>|</span><label class="collapse" for="c-36303173">[-]</label><label class="expand" for="c-36303173">[1 more]</label></div><br/><div class="children"><div class="content">Do they have any customer success stories about sqlite? I&#x27;ve mostly seen (compelling and well written) marketing posts. Details from someone using the product are much more interesting.</div><br/></div></div><div id="36303215" class="c"><input type="checkbox" id="c-36303215" checked=""/><div class="controls bullet"><span class="by">endisneigh</span><span>|</span><a href="#36303064">root</a><span>|</span><a href="#36303079">parent</a><span>|</span><a href="#36303173">prev</a><span>|</span><a href="#36303083">next</a><span>|</span><label class="collapse" for="c-36303215">[-]</label><label class="expand" for="c-36303215">[1 more]</label></div><br/><div class="children"><div class="content">From what I can tell I havenât seen anything on their end customers using it much</div><br/></div></div></div></div><div id="36303083" class="c"><input type="checkbox" id="c-36303083" checked=""/><div class="controls bullet"><span class="by">ShadowBanThis01</span><span>|</span><a href="#36303064">parent</a><span>|</span><a href="#36303079">prev</a><span>|</span><a href="#36303648">next</a><span>|</span><label class="collapse" for="c-36303083">[-]</label><label class="expand" for="c-36303083">[2 more]</label></div><br/><div class="children"><div class="content">Wasn&#x27;t there an article on here within the last week saying how SQLite is &quot;perfect for the &#x27;edge&#x27;?&quot;</div><br/><div id="36303210" class="c"><input type="checkbox" id="c-36303210" checked=""/><div class="controls bullet"><span class="by">endisneigh</span><span>|</span><a href="#36303064">root</a><span>|</span><a href="#36303083">parent</a><span>|</span><a href="#36303648">next</a><span>|</span><label class="collapse" for="c-36303210">[-]</label><label class="expand" for="c-36303210">[1 more]</label></div><br/><div class="children"><div class="content">That was more of the vein of toy example&#x2F;hypothetically</div><br/></div></div></div></div></div></div><div id="36303648" class="c"><input type="checkbox" id="c-36303648" checked=""/><div class="controls bullet"><span class="by">codedokode</span><span>|</span><a href="#36303064">prev</a><span>|</span><label class="collapse" for="c-36303648">[-]</label><label class="expand" for="c-36303648">[7 more]</label></div><br/><div class="children"><div class="content">This is a bad choice, I wouldn&#x27;t understand that it needs to be read backwards. Why not use process&#x27;s executable name instead?</div><br/><div id="36303691" class="c"><input type="checkbox" id="c-36303691" checked=""/><div class="controls bullet"><span class="by">lopkeny12ko</span><span>|</span><a href="#36303648">parent</a><span>|</span><label class="collapse" for="c-36303691">[-]</label><label class="expand" for="c-36303691">[6 more]</label></div><br/><div class="children"><div class="content">Did you even open the link?<p>Human readability was not a goal, in fact quite the opposite.</div><br/><div id="36304104" class="c"><input type="checkbox" id="c-36304104" checked=""/><div class="controls bullet"><span class="by">anon-3988</span><span>|</span><a href="#36303648">root</a><span>|</span><a href="#36303691">parent</a><span>|</span><a href="#36303764">next</a><span>|</span><label class="collapse" for="c-36304104">[-]</label><label class="expand" for="c-36304104">[1 more]</label></div><br/><div class="children"><div class="content">Its a horrible link. It points to a specific commit...Okay, so  it must have something to do with the commit? Nope, the commit is putting a limit on the number of symlinks to resolve for whatever reason. Then you also notice that the link is simply a link to the file, not a specific line (something like <a href="https:&#x2F;&#x2F;github.com&#x2F;mackyle&#x2F;sqlite&#x2F;blob&#x2F;18cf47156abe94255ae1495ba2da84517dce6081&#x2F;src&#x2F;os.h#L57-L79">https:&#x2F;&#x2F;github.com&#x2F;mackyle&#x2F;sqlite&#x2F;blob&#x2F;18cf47156abe94255ae14...</a>), so you are expected to read the whole C file to figure out why.</div><br/></div></div><div id="36303764" class="c"><input type="checkbox" id="c-36303764" checked=""/><div class="controls bullet"><span class="by">codedokode</span><span>|</span><a href="#36303648">root</a><span>|</span><a href="#36303691">parent</a><span>|</span><a href="#36304104">prev</a><span>|</span><label class="collapse" for="c-36303764">[-]</label><label class="expand" for="c-36303764">[4 more]</label></div><br/><div class="children"><div class="content">I meant use the name of the program that embeds SQLite, for example, McAfee, Google Chrome etc. This way the user could easily understand which program has created the files.</div><br/><div id="36303781" class="c"><input type="checkbox" id="c-36303781" checked=""/><div class="controls bullet"><span class="by">djbusby</span><span>|</span><a href="#36303648">root</a><span>|</span><a href="#36303764">parent</a><span>|</span><a href="#36304023">next</a><span>|</span><label class="collapse" for="c-36303781">[-]</label><label class="expand" for="c-36303781">[1 more]</label></div><br/><div class="children"><div class="content">How does it get that in a cross platform way? Or want if the program name has exotic characters?</div><br/></div></div><div id="36304023" class="c"><input type="checkbox" id="c-36304023" checked=""/><div class="controls bullet"><span class="by">arp242</span><span>|</span><a href="#36303648">root</a><span>|</span><a href="#36303764">parent</a><span>|</span><a href="#36303781">prev</a><span>|</span><label class="collapse" for="c-36304023">[-]</label><label class="expand" for="c-36304023">[2 more]</label></div><br/><div class="children"><div class="content">Why spend time and effort on all of that when applications can just configure it themselves if they want to?</div><br/><div id="36306486" class="c"><input type="checkbox" id="c-36306486" checked=""/><div class="controls bullet"><span class="by">yjftsjthsd-h</span><span>|</span><a href="#36303648">root</a><span>|</span><a href="#36304023">parent</a><span>|</span><label class="collapse" for="c-36306486">[-]</label><label class="expand" for="c-36306486">[1 more]</label></div><br/><div class="children"><div class="content">If it were possible to determine the program name in a way that was portable and not too painful, it would be a nice feature for the library to automatically set a better default, both to save work for devs using it and to save sqlite devs the hassle of their library getting blamed for things that aren&#x27;t its fault. Now, I don&#x27;t think those conditions are likely to be met, but that doesn&#x27;t mean it wouldn&#x27;t be nice if it <i>were</i> practical.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>