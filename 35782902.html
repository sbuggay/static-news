<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1683040924099" as="style"/><link rel="stylesheet" href="styles.css?v=1683040924099"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://alexanderell.is/posts/rpc-from-scratch/">Writing an RPC from Scratch (2021)</a> <span class="domain">(<a href="https://alexanderell.is">alexanderell.is</a>)</span></div><div class="subtext"><span>otras</span> | <span>14 comments</span></div><br/><div><div id="35785937" class="c"><input type="checkbox" id="c-35785937" checked=""/><div class="controls bullet"><span class="by">eska</span><span>|</span><a href="#35785638">next</a><span>|</span><label class="collapse" for="c-35785937">[-]</label><label class="expand" for="c-35785937">[2 more]</label></div><br/><div class="children"><div class="content">This looks more like a socket tutorial than rpc. It leaves out most aspects about implementing rpc that are actually interesting.</div><br/><div id="35786649" class="c"><input type="checkbox" id="c-35786649" checked=""/><div class="controls bullet"><span class="by">lytedev</span><span>|</span><a href="#35785937">parent</a><span>|</span><a href="#35785638">next</a><span>|</span><label class="collapse" for="c-35786649">[-]</label><label class="expand" for="c-35786649">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m writing a networked rpc &quot;framework&quot;[0], too! Can you summarize or point me to some resources that outline the aspects you find interesting? I&#x27;d like to be aware of them as I&#x27;m building and designing!<p>[0]: <a href="https:&#x2F;&#x2F;github.com&#x2F;lytedev&#x2F;saurpc">https:&#x2F;&#x2F;github.com&#x2F;lytedev&#x2F;saurpc</a></div><br/></div></div></div></div><div id="35785638" class="c"><input type="checkbox" id="c-35785638" checked=""/><div class="controls bullet"><span class="by">butterisgood</span><span>|</span><a href="#35785937">prev</a><span>|</span><a href="#35784010">next</a><span>|</span><label class="collapse" for="c-35785638">[-]</label><label class="expand" for="c-35785638">[2 more]</label></div><br/><div class="children"><div class="content">The whole “network order” of bytes thing is not a given. There’s little endian “network orderings”.<p>And now it seems most CPUs are little endian anyway, so why do this conversion anymore to “network order” if you are designing a new protocol?</div><br/><div id="35785754" class="c"><input type="checkbox" id="c-35785754" checked=""/><div class="controls bullet"><span class="by">actionfromafar</span><span>|</span><a href="#35785638">parent</a><span>|</span><a href="#35784010">next</a><span>|</span><label class="collapse" for="c-35785754">[-]</label><label class="expand" for="c-35785754">[1 more]</label></div><br/><div class="children"><div class="content">As much as I am a big endian fanboy by nurture, the important thing is that the order is <i>documented</i>.<p>Also, I don&#x27;t know if this is apocryphal, but as a wee lad I was told the tale that network routers worked faster because they could do coarse addressing faster thanks to seeing IPv4 addresses in big-endian, when the bytes trickled in one-by-one.</div><br/></div></div></div></div><div id="35784010" class="c"><input type="checkbox" id="c-35784010" checked=""/><div class="controls bullet"><span class="by">JonChesterfield</span><span>|</span><a href="#35785638">prev</a><span>|</span><a href="#35785869">next</a><span>|</span><label class="collapse" for="c-35784010">[-]</label><label class="expand" for="c-35784010">[8 more]</label></div><br/><div class="children"><div class="content">Ignores failure modes. The is_prime example takes an integer to a bool, and is put on the far side of a network call, but there&#x27;s no change to the interface to indicate network failures and no fallback path to compute it locally if things go wrong.<p>(strictly it calls exit on anything going wrong, but as the whole problem with rpc is the extra failure modes that&#x27;s not compelling)</div><br/><div id="35785602" class="c"><input type="checkbox" id="c-35785602" checked=""/><div class="controls bullet"><span class="by">rsecora</span><span>|</span><a href="#35784010">parent</a><span>|</span><a href="#35785175">next</a><span>|</span><label class="collapse" for="c-35785602">[-]</label><label class="expand" for="c-35785602">[2 more]</label></div><br/><div class="children"><div class="content">the article is didactic, focusing on overall architecture, furthermore it says it clearly on the subtitle.<p><pre><code>     &quot;...so you can appreciate the libraries that do it for you &quot;</code></pre></div><br/><div id="35786302" class="c"><input type="checkbox" id="c-35786302" checked=""/><div class="controls bullet"><span class="by">JonChesterfield</span><span>|</span><a href="#35784010">root</a><span>|</span><a href="#35785602">parent</a><span>|</span><a href="#35785175">next</a><span>|</span><label class="collapse" for="c-35786302">[-]</label><label class="expand" for="c-35786302">[1 more]</label></div><br/><div class="children"><div class="content">Do you know of any rpc libraries that hide the failure modes of the network from the application?</div><br/></div></div></div></div><div id="35785175" class="c"><input type="checkbox" id="c-35785175" checked=""/><div class="controls bullet"><span class="by">stevekemp</span><span>|</span><a href="#35784010">parent</a><span>|</span><a href="#35785602">prev</a><span>|</span><a href="#35784553">next</a><span>|</span><label class="collapse" for="c-35785175">[-]</label><label class="expand" for="c-35785175">[3 more]</label></div><br/><div class="children"><div class="content">I notice that the comment refers to sqrt(number), but never does that either.  So it tests way more numbers than it needs to.</div><br/><div id="35786066" class="c"><input type="checkbox" id="c-35786066" checked=""/><div class="controls bullet"><span class="by">rwwiv</span><span>|</span><a href="#35784010">root</a><span>|</span><a href="#35785175">parent</a><span>|</span><a href="#35784553">next</a><span>|</span><label class="collapse" for="c-35786066">[-]</label><label class="expand" for="c-35786066">[2 more]</label></div><br/><div class="children"><div class="content">It does use sqrt(number), just not directly. Instead of taking sqrt(number), it just calculates i*i which is much faster.</div><br/><div id="35786323" class="c"><input type="checkbox" id="c-35786323" checked=""/><div class="controls bullet"><span class="by">stevekemp</span><span>|</span><a href="#35784010">root</a><span>|</span><a href="#35786066">parent</a><span>|</span><a href="#35784553">next</a><span>|</span><label class="collapse" for="c-35786323">[-]</label><label class="expand" for="c-35786323">[1 more]</label></div><br/><div class="children"><div class="content">D&#x27;oh, you&#x27;re 100% correct!</div><br/></div></div></div></div></div></div><div id="35784553" class="c"><input type="checkbox" id="c-35784553" checked=""/><div class="controls bullet"><span class="by">cnity</span><span>|</span><a href="#35784010">parent</a><span>|</span><a href="#35785175">prev</a><span>|</span><a href="#35785869">next</a><span>|</span><label class="collapse" for="c-35784553">[-]</label><label class="expand" for="c-35784553">[2 more]</label></div><br/><div class="children"><div class="content">The article covers all the shortcomings in the final section.</div><br/><div id="35784990" class="c"><input type="checkbox" id="c-35784990" checked=""/><div class="controls bullet"><span class="by">simplotek</span><span>|</span><a href="#35784010">root</a><span>|</span><a href="#35784553">parent</a><span>|</span><a href="#35785869">next</a><span>|</span><label class="collapse" for="c-35784990">[-]</label><label class="expand" for="c-35784990">[1 more]</label></div><br/><div class="children"><div class="content">By &quot;covers&quot; you mean &quot;glances over&quot;. It means nothing if you just add a footnote mentioning the existence of failure modes.</div><br/></div></div></div></div></div></div><div id="35785869" class="c"><input type="checkbox" id="c-35785869" checked=""/><div class="controls bullet"><span class="by">segfaltnh</span><span>|</span><a href="#35784010">prev</a><span>|</span><label class="collapse" for="c-35785869">[-]</label><label class="expand" for="c-35785869">[1 more]</label></div><br/><div class="children"><div class="content">Great intro for more junior devs learning how it all comes together. It&#x27;s incredibly easy to use these things without understanding what they are doing for you under the hood.</div><br/></div></div></div></div></div></div></div></body></html>