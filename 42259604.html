<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1732784458451" as="style"/><link rel="stylesheet" href="styles.css?v=1732784458451"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://trunkver.org/">TrunkVer</a> <span class="domain">(<a href="https://trunkver.org">trunkver.org</a>)</span></div><div class="subtext"><span>todsacerdoti</span> | <span>59 comments</span></div><br/><div><div id="42260988" class="c"><input type="checkbox" id="c-42260988" checked=""/><div class="controls bullet"><span class="by">fishtoaster</span><span>|</span><a href="#42263478">next</a><span>|</span><label class="collapse" for="c-42260988">[-]</label><label class="expand" for="c-42260988">[2 more]</label></div><br/><div class="children"><div class="content">I think this is a nice way to clarify the different use cases for version numbers:<p>- SemVer is a communication tool for when an author needs to tell a potential user what to expect from a new version.<p>- TrunkVer is an auditing&#x2F;engineering tool for when you need to give a unique identifier to a version for technical reasons.<p>I think this page is a nice codification of a useful practice, but it does itself a disservice by positioning itself against SemVar and claiming to be a &quot;drop-in&quot; replacement.</div><br/><div id="42263290" class="c"><input type="checkbox" id="c-42263290" checked=""/><div class="controls bullet"><span class="by">nine_k</span><span>|</span><a href="#42260988">parent</a><span>|</span><a href="#42263478">next</a><span>|</span><label class="collapse" for="c-42263290">[-]</label><label class="expand" for="c-42263290">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a &quot;drop-in&quot; replacement in the sense that it&#x27;s compatible with the format and with the <i>rough</i> semantics of SemVer. That is, if your libraries &#x2F; packages all use SemVer, but the final executable &#x2F; image uses TrunkVer, the latter does not need to be special-cased. TrunkVer gives a stream of &quot;major versions&quot; that&#x27;s strictly increasing and all incompatible, and uses non-version fields to convey useful info. All SemVer-based tools will accept a TrunkVer value and do the right thing (that is, always prefer the newest build).</div><br/></div></div></div></div><div id="42263478" class="c"><input type="checkbox" id="c-42263478" checked=""/><div class="controls bullet"><span class="by">rswail</span><span>|</span><a href="#42260988">prev</a><span>|</span><a href="#42261564">next</a><span>|</span><label class="collapse" for="c-42263478">[-]</label><label class="expand" for="c-42263478">[2 more]</label></div><br/><div class="children"><div class="content">The funny thing about trunkver being &quot;compatible&quot; with semver is that it is not <i>semantically</i> compatible, only <i>format</i> compatible.<p>You <i>could</i> (but not necessarily <i>should</i>) combine them by making the trunkver the &quot;patch&quot; part of semver.<p>In our work, the semver is kept separate from the build version. We use a build versioning of vYYYY-MM-DD[.hhh] where hhh is for a &quot;hotfix&quot; of a previously released version.<p>The version of the &quot;next&quot; release can be set (either in advance, or based on a sprint or just the current date).</div><br/><div id="42263566" class="c"><input type="checkbox" id="c-42263566" checked=""/><div class="controls bullet"><span class="by">nickez</span><span>|</span><a href="#42263478">parent</a><span>|</span><a href="#42261564">next</a><span>|</span><label class="collapse" for="c-42263566">[-]</label><label class="expand" for="c-42263566">[1 more]</label></div><br/><div class="children"><div class="content">It would be semver compatible if they used 0.DATE.0 or 0.0.DATE instead.<p>from semver spec:<p>4) Major version zero (0.y.z) is for initial development. Anything MAY change at any time. The public API SHOULD NOT be considered stable.</div><br/></div></div></div></div><div id="42261564" class="c"><input type="checkbox" id="c-42261564" checked=""/><div class="controls bullet"><span class="by">travisgriggs</span><span>|</span><a href="#42263478">prev</a><span>|</span><a href="#42260925">next</a><span>|</span><label class="collapse" for="c-42261564">[-]</label><label class="expand" for="c-42261564">[3 more]</label></div><br/><div class="children"><div class="content">I’ve been happily using date base version numbers in any user facing product (e.g apps) for a while now. It’s been great.<p>While semver makes great sense on paper, and even allows nifty little algebras in dependency declarations, it is been my experience that the delineations are not always as easy to decode and different team members can quibble over the exact realization of the boundaries.<p>Furthermore, it’s very much been my experience that semver changes, like all code comments, only communicate the intent of the developer and not always the reality. A minor roll may be anticipated as backwards compatible, until an unrealized use case pops up and makes the minor change very breaking.</div><br/><div id="42262077" class="c"><input type="checkbox" id="c-42262077" checked=""/><div class="controls bullet"><span class="by">BugsJustFindMe</span><span>|</span><a href="#42261564">parent</a><span>|</span><a href="#42260925">next</a><span>|</span><label class="collapse" for="c-42262077">[-]</label><label class="expand" for="c-42262077">[2 more]</label></div><br/><div class="children"><div class="content">&gt; <i>Furthermore, it’s very much been my experience that semver changes, like all code comments, only communicate the intent of the developer and not always the reality.</i><p>This is the truth and the reason why SemVer is fundamentally wrong for almost all cases that people use it for. Fools with keyboards and big salaries hallucinate a contractual certainty where none exists.</div><br/><div id="42263494" class="c"><input type="checkbox" id="c-42263494" checked=""/><div class="controls bullet"><span class="by">rswail</span><span>|</span><a href="#42261564">root</a><span>|</span><a href="#42262077">parent</a><span>|</span><a href="#42260925">next</a><span>|</span><label class="collapse" for="c-42263494">[-]</label><label class="expand" for="c-42263494">[1 more]</label></div><br/><div class="children"><div class="content">If you understand that the &quot;sem&quot; in semver is specifically about <i>semantics</i> and not about anything else, and that an API <i>includes</i> its current semantics in the semver, then it makes sense.<p>The issues I&#x27;ve struck with other developers:<p>1. Defining the boundaries of the API<p>2. Defining the semantics of the API <i>from the perspective of the user</i></div><br/></div></div></div></div></div></div><div id="42260925" class="c"><input type="checkbox" id="c-42260925" checked=""/><div class="controls bullet"><span class="by">echoangle</span><span>|</span><a href="#42261564">prev</a><span>|</span><a href="#42261200">next</a><span>|</span><label class="collapse" for="c-42260925">[-]</label><label class="expand" for="c-42260925">[17 more]</label></div><br/><div class="children"><div class="content">In what way is this „SemVer-compatible“ when you just ignore the „Major increment &lt;=&gt; breaking changes“ convention? It has 3 numbers separated by dots? This just increments major version every time a build is started, even though there might not be breaking changes.<p>Edit: When looking at the SemVer page: <a href="https:&#x2F;&#x2F;semver.org&#x2F;#if-even-the-tiniest-backward-incompatible-changes-to-the-public-api-require-a-major-version-bump-wont-i-end-up-at-version-4200-very-rapidly" rel="nofollow">https:&#x2F;&#x2F;semver.org&#x2F;#if-even-the-tiniest-backward-incompatibl...</a><p>The formal spec technically only tells you that you MUST increment Major for breaking changes, and not that you can’t do it every time, but the FAQ makes it clear what the spirit of the rule is. I can’t see how TrunkVer can be called SemVer compatible with this construction method.</div><br/><div id="42260963" class="c"><input type="checkbox" id="c-42260963" checked=""/><div class="controls bullet"><span class="by">idle_zealot</span><span>|</span><a href="#42260925">parent</a><span>|</span><a href="#42263460">next</a><span>|</span><label class="collapse" for="c-42260963">[-]</label><label class="expand" for="c-42260963">[3 more]</label></div><br/><div class="children"><div class="content">In semver terms, I believe this translates to &quot;every change might be breaking&quot;, which sounds right for trunk-based deployments.</div><br/><div id="42261239" class="c"><input type="checkbox" id="c-42261239" checked=""/><div class="controls bullet"><span class="by">wakawaka28</span><span>|</span><a href="#42260925">root</a><span>|</span><a href="#42260963">parent</a><span>|</span><a href="#42263460">next</a><span>|</span><label class="collapse" for="c-42261239">[-]</label><label class="expand" for="c-42261239">[2 more]</label></div><br/><div class="children"><div class="content">It sounds like a disaster. Trunk-based deployment does not imply such an extreme degree of instability, because all development may happen on other branches. I see what you&#x27;re trying to say though. I think the real keyword is &quot;continuous integration.&quot;</div><br/><div id="42263391" class="c"><input type="checkbox" id="c-42263391" checked=""/><div class="controls bullet"><span class="by">ahtihn</span><span>|</span><a href="#42260925">root</a><span>|</span><a href="#42261239">parent</a><span>|</span><a href="#42263460">next</a><span>|</span><label class="collapse" for="c-42263391">[-]</label><label class="expand" for="c-42263391">[1 more]</label></div><br/><div class="children"><div class="content">&gt; It sounds like a disaster.<p>Why do you think so? It shouldn&#x27;t be used for something like a library or an external API that other people rely on where communicating about breaking changes is actually important.<p>For something like a web application, I don&#x27;t think it matters much. Do you know which version of Google Docs you&#x27;re using? Do you care?<p>Saying it&#x27;s semver compatible mostly means that you can use existing tools that work with semver and make assumptions about how version numbers can be sorted.</div><br/></div></div></div></div></div></div><div id="42263460" class="c"><input type="checkbox" id="c-42263460" checked=""/><div class="controls bullet"><span class="by">kbouck</span><span>|</span><a href="#42260925">parent</a><span>|</span><a href="#42260963">prev</a><span>|</span><a href="#42260967">next</a><span>|</span><label class="collapse" for="c-42263460">[-]</label><label class="expand" for="c-42263460">[1 more]</label></div><br/><div class="children"><div class="content">It would be somewhat more &quot;compatible&quot; with semver if it placed the timestamp in the MINOR or PATCH segment, rather than in the MAJOR:<p><pre><code>    0.20241127214906.0

    0.0.20241127214906</code></pre></div><br/></div></div><div id="42260967" class="c"><input type="checkbox" id="c-42260967" checked=""/><div class="controls bullet"><span class="by">orf</span><span>|</span><a href="#42260925">parent</a><span>|</span><a href="#42263460">prev</a><span>|</span><a href="#42261200">next</a><span>|</span><label class="collapse" for="c-42260967">[-]</label><label class="expand" for="c-42260967">[12 more]</label></div><br/><div class="children"><div class="content">It’s semver compatible because it can be parsed, accepted and compared by any system that expects or requires a semver formatted version?<p>The whole <i>point</i> of this is that in trunk-based releases the version isn’t significant, so why not call each one breaking.</div><br/><div id="42261008" class="c"><input type="checkbox" id="c-42261008" checked=""/><div class="controls bullet"><span class="by">chungy</span><span>|</span><a href="#42260925">root</a><span>|</span><a href="#42260967">parent</a><span>|</span><a href="#42261200">next</a><span>|</span><label class="collapse" for="c-42261008">[-]</label><label class="expand" for="c-42261008">[11 more]</label></div><br/><div class="children"><div class="content">20241127214906.0.0 will be marked as incompatible with 20241127214907.0.0 by any such system that parses them.</div><br/><div id="42263569" class="c"><input type="checkbox" id="c-42263569" checked=""/><div class="controls bullet"><span class="by">theamk</span><span>|</span><a href="#42260925">root</a><span>|</span><a href="#42261008">parent</a><span>|</span><a href="#42261162">next</a><span>|</span><label class="collapse" for="c-42263569">[-]</label><label class="expand" for="c-42263569">[1 more]</label></div><br/><div class="children"><div class="content">well, yes, this is the only safe thing to do. The build system has no information what has changed since last build - maybe it was a complete interface rewrite - so it does the safe thing.</div><br/></div></div><div id="42261162" class="c"><input type="checkbox" id="c-42261162" checked=""/><div class="controls bullet"><span class="by">Kinrany</span><span>|</span><a href="#42260925">root</a><span>|</span><a href="#42261008">parent</a><span>|</span><a href="#42263569">prev</a><span>|</span><a href="#42262119">next</a><span>|</span><label class="collapse" for="c-42261162">[-]</label><label class="expand" for="c-42261162">[5 more]</label></div><br/><div class="children"><div class="content">That&#x27;s (in-)compatibility between versions, not compatibility between versioning schemes.</div><br/><div id="42261258" class="c"><input type="checkbox" id="c-42261258" checked=""/><div class="controls bullet"><span class="by">wakawaka28</span><span>|</span><a href="#42260925">root</a><span>|</span><a href="#42261162">parent</a><span>|</span><a href="#42262119">next</a><span>|</span><label class="collapse" for="c-42261258">[-]</label><label class="expand" for="c-42261258">[4 more]</label></div><br/><div class="children"><div class="content">You&#x27;re not technically wrong but using the 3 numbers this way is in fact going to create problems for people trying to use this info. It means that you can never know if any version is compatible with others, and even if they were you could not easily link it.</div><br/><div id="42261927" class="c"><input type="checkbox" id="c-42261927" checked=""/><div class="controls bullet"><span class="by">harrall</span><span>|</span><a href="#42260925">root</a><span>|</span><a href="#42261258">parent</a><span>|</span><a href="#42262119">next</a><span>|</span><label class="collapse" for="c-42261927">[-]</label><label class="expand" for="c-42261927">[3 more]</label></div><br/><div class="children"><div class="content">It’s not creating a new problem that didn’t already exist.<p>In many situations at work, trying to follow SemVer would be a technical solution to a non-technical problem.<p>You know who your users are. Before you make any breaking change, you already have cross-product team meetings with possible executive buy in.<p>In those scenarios, by time you assign a version number, everyone is already on the same page. The actual version number is meaningless and conveys no useful information. Spending any time on deciding the version creates unnecessary toil.</div><br/><div id="42262733" class="c"><input type="checkbox" id="c-42262733" checked=""/><div class="controls bullet"><span class="by">wakawaka28</span><span>|</span><a href="#42260925">root</a><span>|</span><a href="#42261927">parent</a><span>|</span><a href="#42262119">next</a><span>|</span><label class="collapse" for="c-42262733">[-]</label><label class="expand" for="c-42262733">[2 more]</label></div><br/><div class="children"><div class="content">It is creating a problem that didn&#x27;t exist because using this instead of SemVer eliminates the option to communicate meaningful compatibility information.<p>&gt;You know who your users are. Before you make any breaking change, you already have cross-product team meetings with possible executive buy in.<p>Generally none of these things are true. You don&#x27;t know your users or how they intend to use your product. The executives certainly don&#x27;t care about version numbers.<p>There are some cases where nobody cares about version numbers, which mainly occur when there is one or a handful of consumers of a product and they are likewise committed to very frequent releases. This is not how most distributable libraries work. Furthermore, people care less about version numbers when the numbers are not correctly assigned in the first place. If you aren&#x27;t using SemVer then it&#x27;s just an increasing sequence for the most part.</div><br/><div id="42263707" class="c"><input type="checkbox" id="c-42263707" checked=""/><div class="controls bullet"><span class="by">orf</span><span>|</span><a href="#42260925">root</a><span>|</span><a href="#42262733">parent</a><span>|</span><a href="#42262119">next</a><span>|</span><label class="collapse" for="c-42263707">[-]</label><label class="expand" for="c-42263707">[1 more]</label></div><br/><div class="children"><div class="content">This is not for libraries. This is for <i>internal</i> services that are continually released from the main branch of a repository.<p>I think you’ve deeply misunderstood the problem this is solving.<p>In short: What specific version tag is GitHub.com running right now? Even if you knew, is that version information meaningful?</div><br/></div></div></div></div></div></div></div></div></div></div><div id="42262119" class="c"><input type="checkbox" id="c-42262119" checked=""/><div class="controls bullet"><span class="by">jhanschoo</span><span>|</span><a href="#42260925">root</a><span>|</span><a href="#42261008">parent</a><span>|</span><a href="#42261162">prev</a><span>|</span><a href="#42261016">next</a><span>|</span><label class="collapse" for="c-42262119">[-]</label><label class="expand" for="c-42262119">[1 more]</label></div><br/><div class="children"><div class="content">&gt; A TrunkVer is syntactically compatible with SemVer, although it does not respect its semantic interpretation of the version number.<p>The document specifically disclaims semantic compatibility.</div><br/></div></div><div id="42261016" class="c"><input type="checkbox" id="c-42261016" checked=""/><div class="controls bullet"><span class="by">orf</span><span>|</span><a href="#42260925">root</a><span>|</span><a href="#42261008">parent</a><span>|</span><a href="#42262119">prev</a><span>|</span><a href="#42261200">next</a><span>|</span><label class="collapse" for="c-42261016">[-]</label><label class="expand" for="c-42261016">[3 more]</label></div><br/><div class="children"><div class="content">Sure, but it <i>does</i> parse them and it <i>does</i> rightly understand that one is an newer version.<p>That’s… compatibility.</div><br/><div id="42261280" class="c"><input type="checkbox" id="c-42261280" checked=""/><div class="controls bullet"><span class="by">wakawaka28</span><span>|</span><a href="#42260925">root</a><span>|</span><a href="#42261016">parent</a><span>|</span><a href="#42261200">next</a><span>|</span><label class="collapse" for="c-42261280">[-]</label><label class="expand" for="c-42261280">[2 more]</label></div><br/><div class="children"><div class="content">Newer is not always compatible. That&#x27;s why SemVer looks like work to authors. They don&#x27;t like to think about compatibility.</div><br/><div id="42263691" class="c"><input type="checkbox" id="c-42263691" checked=""/><div class="controls bullet"><span class="by">orf</span><span>|</span><a href="#42260925">root</a><span>|</span><a href="#42261280">parent</a><span>|</span><a href="#42261200">next</a><span>|</span><label class="collapse" for="c-42263691">[-]</label><label class="expand" for="c-42263691">[1 more]</label></div><br/><div class="children"><div class="content">You’re misunderstanding, try re-reading the thread or other comments in the chain.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="42261200" class="c"><input type="checkbox" id="c-42261200" checked=""/><div class="controls bullet"><span class="by">zvr</span><span>|</span><a href="#42260925">prev</a><span>|</span><a href="#42263454">next</a><span>|</span><label class="collapse" for="c-42261200">[-]</label><label class="expand" for="c-42261200">[3 more]</label></div><br/><div class="children"><div class="content">The EBNF in the page does not match the textual description:<p><pre><code>    - &quot;ALPHANUMERIC&quot; is only letters, not numbers
    - &quot;BUILD_REF&quot; can contain dashes&#x2F;hyphens &quot;-&quot;
    - &quot;GIT_COMMIT_REF&quot; is the letter &quot;g&quot; and a single hex character
    - &quot;BUILD_REF&quot; and &quot;SOURCE_REF&quot; may be empty, since they are 0 or more repetitions
    - &quot;TIMESTAMP&quot; is arbitrary numbers, so month or hour may be &quot;99&quot; for example</code></pre></div><br/><div id="42262786" class="c"><input type="checkbox" id="c-42262786" checked=""/><div class="controls bullet"><span class="by">saghm</span><span>|</span><a href="#42261200">parent</a><span>|</span><a href="#42263454">next</a><span>|</span><label class="collapse" for="c-42262786">[-]</label><label class="expand" for="c-42262786">[2 more]</label></div><br/><div class="children"><div class="content">While I understand the point you&#x27;re making, some of these don&#x27;t seem like they should _technically_ be an issue in terms of whether a parser following the textual descriptions would work on the actual thing. Any parser written to accept an alphanumeric string should presumably accept a purely alphabetic one, and I&#x27;m pretty sure a &quot;ref&quot; in git doesn&#x27;t just mean a hash but also refers to branches and tags, either of which could have a name in the format you describe. Given that the point of EBNF is to define grammar to a degree of precision and conciseness that textual descriptions can&#x27;t match, I don&#x27;t think it&#x27;s a super big deal. From the perspective of building a parser from EBNF, the names of the tokens don&#x27;t matter.</div><br/><div id="42263332" class="c"><input type="checkbox" id="c-42263332" checked=""/><div class="controls bullet"><span class="by">viraptor</span><span>|</span><a href="#42261200">root</a><span>|</span><a href="#42262786">parent</a><span>|</span><a href="#42263454">next</a><span>|</span><label class="collapse" for="c-42263332">[-]</label><label class="expand" for="c-42263332">[1 more]</label></div><br/><div class="children"><div class="content">&gt; don&#x27;t seem like they should _technically_ be an issue<p>Sure, people can ignore the EBNF. But if you expect that, then why publish it at all? EBNF is specifically used to describe formats and get rid of ambiguities present in text description. Not being careful with it just undermines whole idea.</div><br/></div></div></div></div></div></div><div id="42263454" class="c"><input type="checkbox" id="c-42263454" checked=""/><div class="controls bullet"><span class="by">rswail</span><span>|</span><a href="#42261200">prev</a><span>|</span><a href="#42261354">next</a><span>|</span><label class="collapse" for="c-42263454">[-]</label><label class="expand" for="c-42263454">[1 more]</label></div><br/><div class="children"><div class="content">This is needed because people misunderstand the purpose of semver (IMNSHO).<p>Semver is about the <i>semantics</i> of the software (it&#x27;s in the name), so it&#x27;s entirely about that software&#x27;s <i>interface</i> (whether to the programmer via API, other software, users).<p>It&#x27;s <i>not</i> about the <i>implementation</i> (except perhaps the &quot;patch&quot; component). If you fix a bug that doesn&#x27;t change the interface, then there&#x27;s no bump to the semver.<p>&quot;Trunkver&quot; is about the <i>implementation</i>, but in a semver compatible format.</div><br/></div></div><div id="42261354" class="c"><input type="checkbox" id="c-42261354" checked=""/><div class="controls bullet"><span class="by">montroser</span><span>|</span><a href="#42263454">prev</a><span>|</span><a href="#42263322">next</a><span>|</span><label class="collapse" for="c-42261354">[-]</label><label class="expand" for="c-42261354">[7 more]</label></div><br/><div class="children"><div class="content">A sequential build&#x2F;release number would suffice in many cases.<p>If the thing you&#x27;re shipping isn&#x27;t meant to be a dependency for other projects, then semantic versioning doesn&#x27;t really fit.<p>In trunkver though, using the timestamp of the build time is a little weird, since you could inadvertently end up building an earlier version of trunk at a later time.<p>Putting an identifier of the job that built the release in the version number also seems heavy for what could just be an entry in a log file for when you need those forensics.</div><br/><div id="42263484" class="c"><input type="checkbox" id="c-42263484" checked=""/><div class="controls bullet"><span class="by">jillesvangurp</span><span>|</span><a href="#42261354">parent</a><span>|</span><a href="#42263183">next</a><span>|</span><label class="collapse" for="c-42263484">[-]</label><label class="expand" for="c-42263484">[3 more]</label></div><br/><div class="children"><div class="content">Time is sequential. Otherwise, sequential build numbers are kind of hard to orchestrate in a distributed architecture. Not impossible. But it introduces complexities if you have many build machines.<p>I don&#x27;t think semver compatibility is that relevant&#x2F;meaningful here. Normally I&#x27;d also want the branch name as part of the version tag. We do that with our docker containers. Adding the timestamp at the beginning is a good idea as it helps sort things by recency. I might copy that. The CI build id is nice, but I typically don&#x27;t archive these anyway. All this concatenated gets a bit long.</div><br/><div id="42263523" class="c"><input type="checkbox" id="c-42263523" checked=""/><div class="controls bullet"><span class="by">rswail</span><span>|</span><a href="#42261354">root</a><span>|</span><a href="#42263484">parent</a><span>|</span><a href="#42263183">next</a><span>|</span><label class="collapse" for="c-42263523">[-]</label><label class="expand" for="c-42263523">[2 more]</label></div><br/><div class="children"><div class="content">git describe gives you what you want.<p>It gives you the nearest tag, the number of commits from that tag and the git commit ID.</div><br/><div id="42263706" class="c"><input type="checkbox" id="c-42263706" checked=""/><div class="controls bullet"><span class="by">jillesvangurp</span><span>|</span><a href="#42261354">root</a><span>|</span><a href="#42263523">parent</a><span>|</span><a href="#42263183">next</a><span>|</span><label class="collapse" for="c-42263706">[-]</label><label class="expand" for="c-42263706">[1 more]</label></div><br/><div class="children"><div class="content">We don&#x27;t use git tags for ordinary deploys. Every push to production gets deployed. And a timestamp is useful for sorting lists of container images.</div><br/></div></div></div></div></div></div><div id="42263183" class="c"><input type="checkbox" id="c-42263183" checked=""/><div class="controls bullet"><span class="by">guytv</span><span>|</span><a href="#42261354">parent</a><span>|</span><a href="#42263484">prev</a><span>|</span><a href="#42261481">next</a><span>|</span><label class="collapse" for="c-42263183">[-]</label><label class="expand" for="c-42263183">[1 more]</label></div><br/><div class="children"><div class="content">The problem with sequential build&#x2F;release number is that you have to keep it in git (so you could increment), which results in a number of complications and annoyances.</div><br/></div></div><div id="42261481" class="c"><input type="checkbox" id="c-42261481" checked=""/><div class="controls bullet"><span class="by">PaulKeeble</span><span>|</span><a href="#42261354">parent</a><span>|</span><a href="#42263183">prev</a><span>|</span><a href="#42261532">next</a><span>|</span><label class="collapse" for="c-42261481">[-]</label><label class="expand" for="c-42261481">[1 more]</label></div><br/><div class="children"><div class="content">What happens with build number is you end up going back to the CI system and looking up what change it actually built and when it happened. I can see the advantage of having all 3 in the build name, I have done similar in the past for continuously released server software where there is no need for versioning numbers although typically I too have shortened it to just the build number because we have the CI system to go into if we need to.</div><br/></div></div><div id="42261532" class="c"><input type="checkbox" id="c-42261532" checked=""/><div class="controls bullet"><span class="by">status_quo69</span><span>|</span><a href="#42261354">parent</a><span>|</span><a href="#42261481">prev</a><span>|</span><a href="#42263322">next</a><span>|</span><label class="collapse" for="c-42261532">[-]</label><label class="expand" for="c-42261532">[1 more]</label></div><br/><div class="children"><div class="content">Generally agree with your points about how semver isn&#x27;t really necessary. I suppose the benefit here would be that dep management tools like dependabot could automatically raise pull requests when a new version is released, which would be pretty cool. If only my peer engineers actually paid attention to dependency updates.<p>As an aside, instead of an auto incrementing build number I&#x27;d suggest the git sha since it&#x27;s:
1. Already there and points to a specific version of the code in the repo
2. Globally unique
3. Can assist with reproducible builds (i.e. 6afed54 was acting weird, let&#x27;s build it locally and take a look)
4. Gives you an easy diff target to dump &quot;release notes&quot;. Just diff to the previous and dump the merge commit messages.</div><br/></div></div></div></div><div id="42263322" class="c"><input type="checkbox" id="c-42263322" checked=""/><div class="controls bullet"><span class="by">weinzierl</span><span>|</span><a href="#42261354">prev</a><span>|</span><a href="#42262999">next</a><span>|</span><label class="collapse" for="c-42263322">[-]</label><label class="expand" for="c-42263322">[1 more]</label></div><br/><div class="children"><div class="content">Often the version string is baked somehow into the artifact. If it contains volatile data that is not functionally dependent on the source (the when and how) it prevents the build from being reproducible.<p>My opinion is that the pure semver should be part of the source and be baked in the artifact. Date and build metadata should be recorded close but separate from the artifact.</div><br/></div></div><div id="42262999" class="c"><input type="checkbox" id="c-42262999" checked=""/><div class="controls bullet"><span class="by">JTyQZSnP3cQGa8B</span><span>|</span><a href="#42263322">prev</a><span>|</span><a href="#42263683">next</a><span>|</span><label class="collapse" for="c-42262999">[-]</label><label class="expand" for="c-42262999">[2 more]</label></div><br/><div class="children"><div class="content">I’m still bitter that PEP 440 didn’t win: <a href="https:&#x2F;&#x2F;peps.python.org&#x2F;pep-0440&#x2F;" rel="nofollow">https:&#x2F;&#x2F;peps.python.org&#x2F;pep-0440&#x2F;</a><p>It’s way better than semver and has all the metadata you may want.</div><br/><div id="42263311" class="c"><input type="checkbox" id="c-42263311" checked=""/><div class="controls bullet"><span class="by">Aeolun</span><span>|</span><a href="#42262999">parent</a><span>|</span><a href="#42263683">next</a><span>|</span><label class="collapse" for="c-42263311">[-]</label><label class="expand" for="c-42263311">[1 more]</label></div><br/><div class="children"><div class="content">Undoubtedly because semver has a nice website that immediately makes sense to everyone that reads it.</div><br/></div></div></div></div><div id="42263683" class="c"><input type="checkbox" id="c-42263683" checked=""/><div class="controls bullet"><span class="by">cies</span><span>|</span><a href="#42262999">prev</a><span>|</span><a href="#42262114">next</a><span>|</span><label class="collapse" for="c-42263683">[-]</label><label class="expand" for="c-42263683">[1 more]</label></div><br/><div class="children"><div class="content">This is pretty much what we do already. Every docker image we push to the registry has a version like trunkVer (with only the first 2 components). The version is also put inside the image (in a file named &#x2F;TAG) and is put in:<p>* first log line<p>* last log line<p>* response headers<p>* on some about page of the web app<p>Difference with trunkVer: we do not have the last component (the CI bit), the first bit we use a more semVer-like scheme (major is bumped for marketing reasons, minor is bumped when it requires a new db schema, tiny is bumped for releases that are db schema compatible).</div><br/></div></div><div id="42262114" class="c"><input type="checkbox" id="c-42262114" checked=""/><div class="controls bullet"><span class="by">CGamesPlay</span><span>|</span><a href="#42263683">prev</a><span>|</span><a href="#42260853">next</a><span>|</span><label class="collapse" for="c-42262114">[-]</label><label class="expand" for="c-42262114">[1 more]</label></div><br/><div class="children"><div class="content">Another (simpler) versioning &quot;standard&quot; using calendar-based versioning: <a href="https:&#x2F;&#x2F;calver.org" rel="nofollow">https:&#x2F;&#x2F;calver.org</a></div><br/></div></div><div id="42260853" class="c"><input type="checkbox" id="c-42260853" checked=""/><div class="controls bullet"><span class="by">makifoxgirl</span><span>|</span><a href="#42262114">prev</a><span>|</span><a href="#42260898">next</a><span>|</span><label class="collapse" for="c-42260853">[-]</label><label class="expand" for="c-42260853">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been using something like this for the Unity game I&#x27;m working on where I need regular updates. However, I don&#x27;t think it let me use 14 numbers in the major field. So I&#x27;ve stuck with something along the lines of &lt;year&gt;.&lt;month&gt;.&lt;date&gt;-&lt;hours*60+minutes&gt; to better saturate. It&#x27;s nice to know there&#x27;s a standard for this though.</div><br/></div></div><div id="42261534" class="c"><input type="checkbox" id="c-42261534" checked=""/><div class="controls bullet"><span class="by">benatkin</span><span>|</span><a href="#42260898">prev</a><span>|</span><a href="#42261190">next</a><span>|</span><label class="collapse" for="c-42261534">[-]</label><label class="expand" for="c-42261534">[1 more]</label></div><br/><div class="children"><div class="content">What if the CI vendor decides to use the same for its ids? Then you have even longer version numbers.<p>And if CI vendors aren&#x27;t expected to adopt this, why expect a lot of devs to?<p>On my computer, the CI version ID wraps, because between the other parts of the version and the padding, there isn&#x27;t enough space. I think that says something about the length of the version identifier.</div><br/></div></div><div id="42261190" class="c"><input type="checkbox" id="c-42261190" checked=""/><div class="controls bullet"><span class="by">1shooner</span><span>|</span><a href="#42261534">prev</a><span>|</span><a href="#42261033">next</a><span>|</span><label class="collapse" for="c-42261190">[-]</label><label class="expand" for="c-42261190">[2 more]</label></div><br/><div class="children"><div class="content">I can see using this if what you&#x27;re building is at the end of the supply chain, and there is really less need to make the claims that SemVer does. Conversely, if you have downstream consumers, I can&#x27;t imagine taking away the compatibility statements in SemVer.</div><br/><div id="42263595" class="c"><input type="checkbox" id="c-42263595" checked=""/><div class="controls bullet"><span class="by">regularfry</span><span>|</span><a href="#42261190">parent</a><span>|</span><a href="#42261033">next</a><span>|</span><label class="collapse" for="c-42263595">[-]</label><label class="expand" for="c-42263595">[1 more]</label></div><br/><div class="children"><div class="content">It depends whether the consumers have any choice about whether to receive the update. If what you&#x27;re versioning is a web app, they&#x27;re getting the update no matter whether they think current and next are compatible or not.  And if they aren&#x27;t compatible in a way that&#x27;s going to cause problems, you need to be communicating richer information to them than a change in a version number anyway.</div><br/></div></div></div></div><div id="42261033" class="c"><input type="checkbox" id="c-42261033" checked=""/><div class="controls bullet"><span class="by">codethief</span><span>|</span><a href="#42261190">prev</a><span>|</span><a href="#42260953">next</a><span>|</span><label class="collapse" for="c-42261033">[-]</label><label class="expand" for="c-42261033">[1 more]</label></div><br/><div class="children"><div class="content">&gt; If the source reference is a git commit checksum, it may be truncated to 7 characters (--short)<p>Doesn&#x27;t the length of shortened git hashes depend on the size of the repo (whether or not shortened hashes of a given length collide)?</div><br/></div></div><div id="42260953" class="c"><input type="checkbox" id="c-42260953" checked=""/><div class="controls bullet"><span class="by">0xbadcafebee</span><span>|</span><a href="#42261033">prev</a><span>|</span><a href="#42261167">next</a><span>|</span><label class="collapse" for="c-42260953">[-]</label><label class="expand" for="c-42260953">[1 more]</label></div><br/><div class="children"><div class="content">Here&#x27;s the thing about versions: they are never &quot;complete&quot;, Because you never have just one version.<p>Whatever you are looking at is most likely an amalgam of many different things, which all have their own versions. Your one perfect holy version number does not tell you those versions, so you have to look them up at some point (you did save the versions of all your dependencies and pack them into a BOM, right?).<p>This trunk version similarly does not encode all the information you need. And what is it going to be used for? A python package? Every python package? A docker container? What about all the versions of stuff in that container? What about the helm chart that will ship this container, what&#x27;s it&#x27;s version? What about the version of all your helm charts that have been tested as working in stage before shipping them to prod?<p>If you&#x27;re going to have a &quot;generic incremented trunk version&quot;, just make it a plain-old continuously incrementing integer (or hex, or whatever) with no semver. Because you&#x27;re going to have to look up more information about what&#x27;s inside it later anyway, and everything&#x27;s going to have its own version as you modify individual items.<p>Packing all this extra information in is actually counter-productive, because it&#x27;s now much longer and more complex (which makes it harder to just compare a list side by side), yet it doesn&#x27;t give you enough info. Ok, datestamp; where&#x27;s the timezone? Ok, git sha; which repo (and has history been rewritten, or the files moved to a different repo)? Ok, CI build number; which build system (if you have multiple, or you moved from one to another)?<p>Maybe some of it you can intuit, but eventually you&#x27;ll wish it was different again. Might as well just make it a plain integer you can pass to a script that dumps out everything related to it.<p>Semver&#x27;s primary use case is not identifying what&#x27;s inside or where it came from.  The numbers are little more than a simple incrementor, and the use case is just a user who wants to know how afraid they should be. It&#x27;s intended solely to communicate how likely this thing is to <i>fuck your shit up</i>. If it&#x27;s a major version change, here be dragons. If it&#x27;s minor, be cautious. If it&#x27;s a patch, it should be harmless. Semver is a threat indicator. And it&#x27;s easy to work with <i>because</i> it&#x27;s so simple; comparing versions is easy. Comparing a wall of these TrunkVers will be like staring at The Matrix code.<p>(SemVer&#x27;s supposed to tell you what dependencies it can work with (&gt;major, &gt;major.minor, etc), but you still need the entire dependency DAG to have a <i>pair</i> of package name and version in order to make sense of it; you could do the exact same thing with a list of names and simple integers (foo &gt;= 23456, foo&lt;1234); now imagine with this TrunkVer (foo &gt;= 20241127214906.0.0-g1f8292a-12058740477-1)...)</div><br/></div></div><div id="42261167" class="c"><input type="checkbox" id="c-42261167" checked=""/><div class="controls bullet"><span class="by">thrance</span><span>|</span><a href="#42260953">prev</a><span>|</span><a href="#42261965">next</a><span>|</span><label class="collapse" for="c-42261167">[-]</label><label class="expand" for="c-42261167">[1 more]</label></div><br/><div class="children"><div class="content">This breaks efficient dependencies resolution. SemVer is called that because versions carry semantic meaning, TrunkVer appears no better than using UUIDs for each version name. You know nothing of the relation between two versions in this scheme, other than which came first.</div><br/></div></div><div id="42261965" class="c"><input type="checkbox" id="c-42261965" checked=""/><div class="controls bullet"><span class="by">llIIllIIllIIl</span><span>|</span><a href="#42261167">prev</a><span>|</span><a href="#42261586">next</a><span>|</span><label class="collapse" for="c-42261965">[-]</label><label class="expand" for="c-42261965">[2 more]</label></div><br/><div class="children"><div class="content">Git commit sha produces a good enough version for most software.</div><br/><div id="42263429" class="c"><input type="checkbox" id="c-42263429" checked=""/><div class="controls bullet"><span class="by">globular-toast</span><span>|</span><a href="#42261965">parent</a><span>|</span><a href="#42261586">next</a><span>|</span><label class="collapse" for="c-42263429">[-]</label><label class="expand" for="c-42263429">[1 more]</label></div><br/><div class="children"><div class="content">Main problem is it&#x27;s not ordered. It works if your software is deployed imperatively in a CI pipeline, but doesn&#x27;t work if some other system is going to pull it later.</div><br/></div></div></div></div><div id="42261586" class="c"><input type="checkbox" id="c-42261586" checked=""/><div class="controls bullet"><span class="by">jiggawatts</span><span>|</span><a href="#42261965">prev</a><span>|</span><a href="#42262451">next</a><span>|</span><label class="collapse" for="c-42261586">[-]</label><label class="expand" for="c-42261586">[3 more]</label></div><br/><div class="children"><div class="content">I much prefer Nerdbank Git Versioning (NBGV): <a href="https:&#x2F;&#x2F;github.com&#x2F;dotnet&#x2F;Nerdbank.GitVersioning">https:&#x2F;&#x2F;github.com&#x2F;dotnet&#x2F;Nerdbank.GitVersioning</a><p>It allows repeatable builds because it uses the &quot;git height&quot; as the increment source.<p>This is an implicitly updated value that is <i>centrally coordinated</i>, but isn&#x27;t a separate system. If you have Git, you have a Git commit history, and hence an incrementing counter.<p>NBGV can stamp binary outputs such as .NET EXEs and DLLs, generates compile-time sources with version strings, works with Node.js projects as well, and integrates with Azure DevOps pipelines automatically.</div><br/><div id="42261923" class="c"><input type="checkbox" id="c-42261923" checked=""/><div class="controls bullet"><span class="by">fuzzzerd</span><span>|</span><a href="#42261586">parent</a><span>|</span><a href="#42263455">next</a><span>|</span><label class="collapse" for="c-42261923">[-]</label><label class="expand" for="c-42261923">[1 more]</label></div><br/><div class="children"><div class="content">I have been using MinVer for dotnet projects, which is similar but a little easier (IMO) to work with since its all based on tags.</div><br/></div></div><div id="42263455" class="c"><input type="checkbox" id="c-42263455" checked=""/><div class="controls bullet"><span class="by">globular-toast</span><span>|</span><a href="#42261586">parent</a><span>|</span><a href="#42261923">prev</a><span>|</span><a href="#42262451">next</a><span>|</span><label class="collapse" for="c-42263455">[-]</label><label class="expand" for="c-42263455">[1 more]</label></div><br/><div class="children"><div class="content">What if you rebase&#x2F;force push? Seems dangerous to rely on &quot;protected branches&quot; and the like to avoid version clashes.</div><br/></div></div></div></div><div id="42262451" class="c"><input type="checkbox" id="c-42262451" checked=""/><div class="controls bullet"><span class="by">zaps</span><span>|</span><a href="#42261586">prev</a><span>|</span><a href="#42261961">next</a><span>|</span><label class="collapse" for="c-42262451">[-]</label><label class="expand" for="c-42262451">[1 more]</label></div><br/><div class="children"><div class="content">Great, now sell this to your marketing department</div><br/></div></div><div id="42261961" class="c"><input type="checkbox" id="c-42261961" checked=""/><div class="controls bullet"><span class="by">MrLeap</span><span>|</span><a href="#42262451">prev</a><span>|</span><a href="#42263546">next</a><span>|</span><label class="collapse" for="c-42261961">[-]</label><label class="expand" for="c-42261961">[1 more]</label></div><br/><div class="children"><div class="content">Add a metalayer to turn version names into memorable word phrases imo lol.</div><br/></div></div><div id="42262034" class="c"><input type="checkbox" id="c-42262034" checked=""/><div class="controls bullet"><span class="by">peterkelly</span><span>|</span><a href="#42263546">prev</a><span>|</span><a href="#42261231">next</a><span>|</span><label class="collapse" for="c-42262034">[-]</label><label class="expand" for="c-42262034">[1 more]</label></div><br/><div class="children"><div class="content">And the best part is you can completely disregard the need to maintain backwards compatibility, because every build implies a breaking change! &#x2F;s</div><br/></div></div><div id="42261231" class="c"><input type="checkbox" id="c-42261231" checked=""/><div class="controls bullet"><span class="by">DidYaWipe</span><span>|</span><a href="#42262034">prev</a><span>|</span><label class="collapse" for="c-42261231">[-]</label><label class="expand" for="c-42261231">[1 more]</label></div><br/><div class="children"><div class="content">Is what?</div><br/></div></div></div></div></div></div></div></body></html>