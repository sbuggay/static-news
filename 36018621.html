<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1684659656329" as="style"/><link rel="stylesheet" href="styles.css?v=1684659656329"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://kobzol.github.io/rust/python/2023/05/20/writing-python-like-its-rust.html">Writing Python like it&#x27;s Rust</a>Â <span class="domain">(<a href="https://kobzol.github.io">kobzol.github.io</a>)</span></div><div class="subtext"><span>thunderbong</span> | <span>43 comments</span></div><br/><div><div id="36018964" class="c"><input type="checkbox" id="c-36018964" checked=""/><div class="controls bullet"><span class="by">quietbritishjim</span><span>|</span><a href="#36019084">next</a><span>|</span><label class="collapse" for="c-36018964">[-]</label><label class="expand" for="c-36018964">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Dataclasses instead of tuples or dictionaries<p>The point is good in general, but it&#x27;s still perfectly possible to use tuples and get all the field name and typing benefits: just use typed banned tuples [1].<p>Unfortunately this is buried in the typing module. I couldn&#x27;t even find it in the table if contents, and I knew what I was specifically looking for.<p><a href="https:&#x2F;&#x2F;docs.python.org&#x2F;3&#x2F;library&#x2F;typing.html#typing.NamedTuple" rel="nofollow">https:&#x2F;&#x2F;docs.python.org&#x2F;3&#x2F;library&#x2F;typing.html#typing.NamedTu...</a></div><br/><div id="36018973" class="c"><input type="checkbox" id="c-36018973" checked=""/><div class="controls bullet"><span class="by">raverbashing</span><span>|</span><a href="#36018964">parent</a><span>|</span><a href="#36018998">next</a><span>|</span><label class="collapse" for="c-36018973">[-]</label><label class="expand" for="c-36018973">[1 more]</label></div><br/><div class="children"><div class="content">&gt; typed banned tuples<p>I think you mean typed <i>named</i> tuples</div><br/></div></div></div></div><div id="36019084" class="c"><input type="checkbox" id="c-36019084" checked=""/><div class="controls bullet"><span class="by">hakanderyal</span><span>|</span><a href="#36018964">prev</a><span>|</span><a href="#36019042">next</a><span>|</span><label class="collapse" for="c-36019084">[-]</label><label class="expand" for="c-36019084">[1 more]</label></div><br/><div class="children"><div class="content">I went through a similar journey, without the Rust part. Started using type hints, data classes, pydantic to get the benefit of static typing after dealing with the pain of refactoring dynamically typed projects.<p>It was better, but it _feels_ like lipstick on a pig. I love Python, but types are not what it&#x27;s best at. It&#x27;s missing features that makes typing easier.<p>I&#x27;ve realized if was going to write typed Python, I might as well switch to one that has better support for that and switched to .NET.<p>I can do almost all the dynamics things that I can do in Python with C#, but in a type safe way. Expressions and extension methods, reflection with `nameOf` opens up a lot of possibilities.<p>One thing that kept me using Python was SqlAlchemy, an ORM, a damn good one. Entity Framework Core, after V6 is a better one, especially with LINQ.<p>If you have the opportunity, give it a try. You might be surprised.</div><br/></div></div><div id="36019042" class="c"><input type="checkbox" id="c-36019042" checked=""/><div class="controls bullet"><span class="by">extr</span><span>|</span><a href="#36019084">prev</a><span>|</span><a href="#36018865">next</a><span>|</span><label class="collapse" for="c-36019042">[-]</label><label class="expand" for="c-36019042">[1 more]</label></div><br/><div class="children"><div class="content">What is the smart money doing for type checking in Python? I&#x27;ve used mypy which seems to work well but is incredibly slow (3-4s to update linting after I change code). I&#x27;ve tried pylance type checking in VS Code, which seems to work well + fast but is less clear and comprehensive than mypy. I&#x27;ve also seen projects like pytype [1] and pyre [2] used by Google&#x2F;Meta, but people say those tools don&#x27;t really make sense to use unless you&#x27;re an engineer for those companies.<p>Am just curious if mypy is really the best option right now?<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;google&#x2F;pytype">https:&#x2F;&#x2F;github.com&#x2F;google&#x2F;pytype</a>
[2] <a href="https:&#x2F;&#x2F;pyre-check.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;pyre-check.org&#x2F;</a></div><br/></div></div><div id="36018865" class="c"><input type="checkbox" id="c-36018865" checked=""/><div class="controls bullet"><span class="by">AdityaSanthosh</span><span>|</span><a href="#36019042">prev</a><span>|</span><a href="#36019035">next</a><span>|</span><label class="collapse" for="c-36018865">[-]</label><label class="expand" for="c-36018865">[7 more]</label></div><br/><div class="children"><div class="content">So cool. I love rust and my day job is in Python.<p>But I have a question. I&#x27;m a junior dev(gimme some leeway here).<p>I don&#x27;t really understand how important these design patterns are because in the programs I write, I usually write the classes and call them in runtime myself. I think usually we write the servers and client ourselves.<p>Let&#x27;s take the different client types example. You are making an assumption that users can call close on a closed client. Is it so hard to just follow the sequence<p>`
 client = Client()<p>client.connect()<p>client.authenticate()<p>client.send_message()<p>client.close()
`<p>Aren&#x27;t they overengineering? Perhaps I have not worked in a large code bases to understand the problems TypeState Pattern or more generally these design patterns solves.<p>I understand that these patterns are elegant and make the future modifications or enhancements easier but I have never seen the tangible value enough in real life</div><br/><div id="36018992" class="c"><input type="checkbox" id="c-36018992" checked=""/><div class="controls bullet"><span class="by">lordnacho</span><span>|</span><a href="#36018865">parent</a><span>|</span><a href="#36019058">next</a><span>|</span><label class="collapse" for="c-36018992">[-]</label><label class="expand" for="c-36018992">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I don&#x27;t really understand how important these design patterns are because in the programs I write, I usually write the classes and call them in runtime myself.<p>One of the biggest learning moments in my work has been collaborating my past self. You need to have stepped away from some piece of code for a while to get this. If the code is not well organized you will think an alien wrote it.<p>It&#x27;s only over time you realize that &quot;it works because I know how to use it&quot; is actually a problem. Over time you also figure out how to write the code in a way where you aren&#x27;t surprised at your own decisions.</div><br/></div></div><div id="36019058" class="c"><input type="checkbox" id="c-36019058" checked=""/><div class="controls bullet"><span class="by">puika</span><span>|</span><a href="#36018865">parent</a><span>|</span><a href="#36018992">prev</a><span>|</span><a href="#36018959">next</a><span>|</span><label class="collapse" for="c-36019058">[-]</label><label class="expand" for="c-36019058">[1 more]</label></div><br/><div class="children"><div class="content">I have limited development experience but I would say this is taking shared libraries into consideration, where you want your public API as comprehensible and failproof as possible. Now put yourself in the shoes of the library user in both scenarios, you will clearly see which code is more prone to errors. The code presented in the article looks like something I&#x27;d feel comfortable working with.<p>It is also more convenient for your own private libraries, but makes not so much of a difference for one-off scripts you maintain alone (unless you are also the type that forgets what you were even doing in that script a few months from now, in which case you could benefit like me). It&#x27;s about lowering cognitive overhead  and chance of development errors in the long run if everything is nicely abstracted.</div><br/></div></div><div id="36018959" class="c"><input type="checkbox" id="c-36018959" checked=""/><div class="controls bullet"><span class="by">biorach</span><span>|</span><a href="#36018865">parent</a><span>|</span><a href="#36019058">prev</a><span>|</span><a href="#36018975">next</a><span>|</span><label class="collapse" for="c-36018959">[-]</label><label class="expand" for="c-36018959">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Perhaps I have not worked in a large code bases to understand the problems<p>Basically,  yes.<p>In a large codebase the steps in your example could well be separated by thousands of lines of code,  with much branching,  or perhaps complicated inheritance hierarchies.<p>In that case leveraging type hints to avoid logic errors can avoid a lot of hats-to-spot bugs</div><br/></div></div><div id="36018975" class="c"><input type="checkbox" id="c-36018975" checked=""/><div class="controls bullet"><span class="by">pmontra</span><span>|</span><a href="#36018865">parent</a><span>|</span><a href="#36018959">prev</a><span>|</span><a href="#36018971">next</a><span>|</span><label class="collapse" for="c-36018975">[-]</label><label class="expand" for="c-36018975">[1 more]</label></div><br/><div class="children"><div class="content">The idea is that you&#x27;ll come back to this code years from now. You&#x27;ll have your head full of other projects and code bases by then. You will have only a faint idea of what that old code of yours is doing and you won&#x27;t remember how and why. Anything that can help you to understand your code is good.<p>The same reasoning applies to other developers working on your code next month. However if your Python turns out to be very far from idiomatic Python you&#x27;re not helping them the slightest. You&#x27;re doing harm to the team and to your career, unless everybody agree to make it the company standard and you have your back covered.</div><br/></div></div><div id="36018971" class="c"><input type="checkbox" id="c-36018971" checked=""/><div class="controls bullet"><span class="by">dalai</span><span>|</span><a href="#36018865">parent</a><span>|</span><a href="#36018975">prev</a><span>|</span><a href="#36018939">next</a><span>|</span><label class="collapse" for="c-36018971">[-]</label><label class="expand" for="c-36018971">[1 more]</label></div><br/><div class="children"><div class="content">Depends on what you do with the Client. If you have a complicated application and pass the Client around between different functions then maybe you would need to check every time whether the client is connected and authenticated before sending a message. If the function only accepts an authenticated client, then the type checker will complain. You could also notice the problem in a unit test, but it may be hard to represent all possible states.<p>In simpler situations where every time you just do the sequence you probably would want to combine some of these calls anyway.</div><br/></div></div><div id="36018939" class="c"><input type="checkbox" id="c-36018939" checked=""/><div class="controls bullet"><span class="by">atoav</span><span>|</span><a href="#36018865">parent</a><span>|</span><a href="#36018971">prev</a><span>|</span><a href="#36019035">next</a><span>|</span><label class="collapse" for="c-36018939">[-]</label><label class="expand" for="c-36018939">[1 more]</label></div><br/><div class="children"><div class="content">I think it dependsâ¢ â when you know for sure there will just be one place to call this from, your approach is totally okay and wrapping it in seperate types would be overkill.<p>The seperate types will come in handy, once you end up using that client object throughout the codebase and you are not sure anymore who is connected, who is authenticated and so on. By pushing that onto the type system you can make less mistakes.</div><br/></div></div></div></div><div id="36019035" class="c"><input type="checkbox" id="c-36019035" checked=""/><div class="controls bullet"><span class="by">dcferreira</span><span>|</span><a href="#36018865">prev</a><span>|</span><a href="#36018841">next</a><span>|</span><label class="collapse" for="c-36019035">[-]</label><label class="expand" for="c-36019035">[2 more]</label></div><br/><div class="children"><div class="content">Cool post, I&#x27;ve also been using more and more type hints and it really makes writing python more enjoyable.
Although unfortunately it&#x27;s still quite common for libraries to not have type stubs.<p>On the section of construction functions, I&#x27;ve always used&#x2F;seen `@classmethod` instead of `@staticmethod`.
I just had a quick look at some big python libraries (pandas, transformers), and they do use class methods.
Is there any particular reason you&#x27;d want to use static methods instead?</div><br/><div id="36019076" class="c"><input type="checkbox" id="c-36019076" checked=""/><div class="controls bullet"><span class="by">extr</span><span>|</span><a href="#36019035">parent</a><span>|</span><a href="#36018841">next</a><span>|</span><label class="collapse" for="c-36019076">[-]</label><label class="expand" for="c-36019076">[1 more]</label></div><br/><div class="children"><div class="content">FWIW personally I use @staticmethod when I have small-ish &quot;utility&quot; methods that are only ever used in-class. Basically just a convenient way of organizing code and making the intended context clear.</div><br/></div></div></div></div><div id="36018841" class="c"><input type="checkbox" id="c-36018841" checked=""/><div class="controls bullet"><span class="by">SOLAR_FIELDS</span><span>|</span><a href="#36019035">prev</a><span>|</span><a href="#36018930">next</a><span>|</span><label class="collapse" for="c-36018841">[-]</label><label class="expand" for="c-36018841">[4 more]</label></div><br/><div class="children"><div class="content">Tooling has come a long way in the past few years to help support better Python. Nowadays I can just throw on Pydantic V2 (still in Alpha, but stable to code against for basic use cases), ruff and mypy. Turn strict mode on in mypy and install the relevant vscode extensions and you get an experience that rivals a compiled language in both speed and usability.</div><br/><div id="36018901" class="c"><input type="checkbox" id="c-36018901" checked=""/><div class="controls bullet"><span class="by">fayalalebrun</span><span>|</span><a href="#36018841">parent</a><span>|</span><a href="#36018927">next</a><span>|</span><label class="collapse" for="c-36018901">[-]</label><label class="expand" for="c-36018901">[2 more]</label></div><br/><div class="children"><div class="content">What do you do when your dependencies don&#x27;t have types? Also, with speed do you mean compilation or runtime?</div><br/><div id="36018933" class="c"><input type="checkbox" id="c-36018933" checked=""/><div class="controls bullet"><span class="by">LtWorf</span><span>|</span><a href="#36018841">root</a><span>|</span><a href="#36018901">parent</a><span>|</span><a href="#36018927">next</a><span>|</span><label class="collapse" for="c-36018933">[-]</label><label class="expand" for="c-36018933">[1 more]</label></div><br/><div class="children"><div class="content">He means he didn&#x27;t benchmark it against a compiled language :D :D :D</div><br/></div></div></div></div><div id="36018927" class="c"><input type="checkbox" id="c-36018927" checked=""/><div class="controls bullet"><span class="by">LtWorf</span><span>|</span><a href="#36018841">parent</a><span>|</span><a href="#36018901">prev</a><span>|</span><a href="#36018930">next</a><span>|</span><label class="collapse" for="c-36018927">[-]</label><label class="expand" for="c-36018927">[1 more]</label></div><br/><div class="children"><div class="content">In my experience, due to not needing a plugin (and not having the completely not checked BaseSettings), typedload is better in respect to runtime type safety and using mypy.<p>I designed it keeping mypy in mind from the beginning.</div><br/></div></div></div></div><div id="36018930" class="c"><input type="checkbox" id="c-36018930" checked=""/><div class="controls bullet"><span class="by">mgaunard</span><span>|</span><a href="#36018841">prev</a><span>|</span><a href="#36019061">next</a><span>|</span><label class="collapse" for="c-36018930">[-]</label><label class="expand" for="c-36018930">[14 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve seen a bunch of code like this, usually written by juniors once they get a bit of experience and discover the concept of types.<p>A surefire way to make your Python code terrible. The whole point of Python is the duck typing. If you&#x27;re not going to use that then you might as well use a real programming language.</div><br/><div id="36019019" class="c"><input type="checkbox" id="c-36019019" checked=""/><div class="controls bullet"><span class="by">8589934591</span><span>|</span><a href="#36018930">parent</a><span>|</span><a href="#36018982">next</a><span>|</span><label class="collapse" for="c-36019019">[-]</label><label class="expand" for="c-36019019">[1 more]</label></div><br/><div class="children"><div class="content">Typically, the selection of a programming language is predetermined in brownfield projects, leaving little room for choosing the &quot;ideal&quot; programming language for migration unless it is absolutely necessary (go can be a suitable option for migrations).<p>Code, like the one provided by the OP, should be valued and encouraged to prevent future bugs. Incorporating tools like Mypy during pre-commit and pyright during code editing can make a significant difference. This approach helps eliminate the need for writing unnecessary unit tests that check for None type.<p>In my opinion, as a mid-senior developer, I always appreciate the use of types in Python. If you are confident about having predictable inputs, you can rely on duck typing and use it primarily for scripting purposes.</div><br/></div></div><div id="36018982" class="c"><input type="checkbox" id="c-36018982" checked=""/><div class="controls bullet"><span class="by">raincole</span><span>|</span><a href="#36018930">parent</a><span>|</span><a href="#36019019">prev</a><span>|</span><a href="#36018951">next</a><span>|</span><label class="collapse" for="c-36018982">[-]</label><label class="expand" for="c-36018982">[1 more]</label></div><br/><div class="children"><div class="content">The whole point of Python is to interoperate with existing Python code, which is unfortunately already everywhere and won&#x27;t go away.</div><br/></div></div><div id="36018951" class="c"><input type="checkbox" id="c-36018951" checked=""/><div class="controls bullet"><span class="by">silviot</span><span>|</span><a href="#36018930">parent</a><span>|</span><a href="#36018982">prev</a><span>|</span><a href="#36018968">next</a><span>|</span><label class="collapse" for="c-36018951">[-]</label><label class="expand" for="c-36018951">[5 more]</label></div><br/><div class="children"><div class="content">Can you enumerate the languages that you deem &quot;real&quot; and those you don&#x27;t? I have a very hard time understanding what meaning you give to that word.</div><br/><div id="36019009" class="c"><input type="checkbox" id="c-36019009" checked=""/><div class="controls bullet"><span class="by">mgaunard</span><span>|</span><a href="#36018930">root</a><span>|</span><a href="#36018951">parent</a><span>|</span><a href="#36018968">next</a><span>|</span><label class="collapse" for="c-36019009">[-]</label><label class="expand" for="c-36019009">[4 more]</label></div><br/><div class="children"><div class="content">Languages that you would build serious production software in, rather than some script.<p>C, C++ are the main ones.</div><br/><div id="36019033" class="c"><input type="checkbox" id="c-36019033" checked=""/><div class="controls bullet"><span class="by">hmry</span><span>|</span><a href="#36018930">root</a><span>|</span><a href="#36019009">parent</a><span>|</span><a href="#36019044">next</a><span>|</span><label class="collapse" for="c-36019033">[-]</label><label class="expand" for="c-36019033">[1 more]</label></div><br/><div class="children"><div class="content">Lots of production software is written in Python, for better or for worse. In fact, production software gets written in every language eventually, no matter the intent of its designers. Maybe <i>you</i> only write your production software in C and C++, in which case good for you.</div><br/></div></div><div id="36019044" class="c"><input type="checkbox" id="c-36019044" checked=""/><div class="controls bullet"><span class="by">8589934591</span><span>|</span><a href="#36018930">root</a><span>|</span><a href="#36019009">parent</a><span>|</span><a href="#36019033">prev</a><span>|</span><a href="#36019026">next</a><span>|</span><label class="collapse" for="c-36019044">[-]</label><label class="expand" for="c-36019044">[1 more]</label></div><br/><div class="children"><div class="content">Out of genuine curiousity, what do you consider as serious production software? C C++ would probably help in embedded but I highly doubt they are used in every other domains.</div><br/></div></div><div id="36019026" class="c"><input type="checkbox" id="c-36019026" checked=""/><div class="controls bullet"><span class="by">linkdd</span><span>|</span><a href="#36018930">root</a><span>|</span><a href="#36019009">parent</a><span>|</span><a href="#36019044">prev</a><span>|</span><a href="#36018968">next</a><span>|</span><label class="collapse" for="c-36019026">[-]</label><label class="expand" for="c-36019026">[1 more]</label></div><br/><div class="children"><div class="content">So you deny that the industry used Python to build serious production softwares?<p>Understood, no need to argue then, I don&#x27;t think any amount of proof would change your mind...</div><br/></div></div></div></div></div></div><div id="36018968" class="c"><input type="checkbox" id="c-36018968" checked=""/><div class="controls bullet"><span class="by">twelvechairs</span><span>|</span><a href="#36018930">parent</a><span>|</span><a href="#36018951">prev</a><span>|</span><a href="#36019011">next</a><span>|</span><label class="collapse" for="c-36018968">[-]</label><label class="expand" for="c-36018968">[1 more]</label></div><br/><div class="children"><div class="content">A senior Python Dev knows the real answer is to stick &#x27;assert&#x27;s around the place sporadically and start using optional arguments like &#x27;failonerror=False&#x27;<p>Realistically I think it depends what you are doing. For some code type hinting is useful. Some code it is not.</div><br/></div></div><div id="36019011" class="c"><input type="checkbox" id="c-36019011" checked=""/><div class="controls bullet"><span class="by">linkdd</span><span>|</span><a href="#36018930">parent</a><span>|</span><a href="#36018968">prev</a><span>|</span><a href="#36018990">next</a><span>|</span><label class="collapse" for="c-36019011">[-]</label><label class="expand" for="c-36019011">[1 more]</label></div><br/><div class="children"><div class="content">Type hints communicate intents. They can be used for many things.<p>Django-Ninja use them to do dependency injection and generate schemas for your API (using pydantic).
autodoc use them to generate the documentation of your function.
etc...<p>It does not replace duck typing, proof here: <a href="https:&#x2F;&#x2F;peps.python.org&#x2F;pep-0544&#x2F;" rel="nofollow">https:&#x2F;&#x2F;peps.python.org&#x2F;pep-0544&#x2F;</a></div><br/></div></div><div id="36018990" class="c"><input type="checkbox" id="c-36018990" checked=""/><div class="controls bullet"><span class="by">otabdeveloper4</span><span>|</span><a href="#36018930">parent</a><span>|</span><a href="#36019011">prev</a><span>|</span><a href="#36018958">next</a><span>|</span><label class="collapse" for="c-36018990">[-]</label><label class="expand" for="c-36018990">[1 more]</label></div><br/><div class="children"><div class="content">Most people don&#x27;t know a real programming language. (And using types in Python&#x2F;PHP is a good way to start.)</div><br/></div></div><div id="36018958" class="c"><input type="checkbox" id="c-36018958" checked=""/><div class="controls bullet"><span class="by">pmontra</span><span>|</span><a href="#36018930">parent</a><span>|</span><a href="#36018990">prev</a><span>|</span><a href="#36018979">next</a><span>|</span><label class="collapse" for="c-36018958">[-]</label><label class="expand" for="c-36018958">[1 more]</label></div><br/><div class="children"><div class="content">Replace real with different and I&#x27;ll fully agree with you.</div><br/></div></div><div id="36018979" class="c"><input type="checkbox" id="c-36018979" checked=""/><div class="controls bullet"><span class="by">hmry</span><span>|</span><a href="#36018930">parent</a><span>|</span><a href="#36018958">prev</a><span>|</span><a href="#36018994">next</a><span>|</span><label class="collapse" for="c-36018979">[-]</label><label class="expand" for="c-36018979">[1 more]</label></div><br/><div class="children"><div class="content">Hmm, could you explain what makes it terrible?</div><br/></div></div><div id="36018994" class="c"><input type="checkbox" id="c-36018994" checked=""/><div class="controls bullet"><span class="by">raverbashing</span><span>|</span><a href="#36018930">parent</a><span>|</span><a href="#36018979">prev</a><span>|</span><a href="#36019061">next</a><span>|</span><label class="collapse" for="c-36018994">[-]</label><label class="expand" for="c-36018994">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I&#x27;ve seen a bunch of code like this, usually written by juniors<p>Yes and I&#x27;m going to be honest, my first worry when type hints came around is that the language would be inundated by the java drones where they would enforce this 100% of the time.<p>Instead it seems people are mostly using it where it makes sense (APIs, etc)<p>Type hints are a great asset. You don&#x27;t have to use it everywhere. And it should remain that way</div><br/></div></div></div></div><div id="36019061" class="c"><input type="checkbox" id="c-36019061" checked=""/><div class="controls bullet"><span class="by">livinglist</span><span>|</span><a href="#36018930">prev</a><span>|</span><a href="#36018882">next</a><span>|</span><label class="collapse" for="c-36019061">[-]</label><label class="expand" for="c-36019061">[1 more]</label></div><br/><div class="children"><div class="content">I started my programming journey with C# which is a statically typed language, and when I later was introduced to Python when I was in college, I really liked how convenient it is but the lack of typing made me really uncomfortable.</div><br/></div></div><div id="36018882" class="c"><input type="checkbox" id="c-36018882" checked=""/><div class="controls bullet"><span class="by">okl</span><span>|</span><a href="#36019061">prev</a><span>|</span><a href="#36018853">next</a><span>|</span><label class="collapse" for="c-36018882">[-]</label><label class="expand" for="c-36018882">[1 more]</label></div><br/><div class="children"><div class="content">Type hints are a great feature in Python to enhance readability and to catch programming errors when refactoring or learning a new library.<p>A lot of the features presented here are helpful for programming in the large, i.e., once the program exceeds mental capacity.<p>As a general goal I think that programmers should reduce complexity even of simple stretches of code so that, adding all its context, a larger chunk of code fits into their brain at once and errors become more visible. Part of that is unloading tasks onto the tools.<p>Unfortunately, its still common  practice to create write-only code, often justified by an &quot;it works&quot; (usually not true).</div><br/></div></div><div id="36018853" class="c"><input type="checkbox" id="c-36018853" checked=""/><div class="controls bullet"><span class="by">nailer</span><span>|</span><a href="#36018882">prev</a><span>|</span><a href="#36018981">next</a><span>|</span><label class="collapse" for="c-36018853">[-]</label><label class="expand" for="c-36018853">[5 more]</label></div><br/><div class="children"><div class="content">&gt; Is records a list, a dict or a database connection?<p>Records is a list of record items. Itâs a plural. If it was a dict, it would be recordByID. If it was a database connection it would be called connection.<p>Strict typing is good, and you should definitely use it, but you should still have good names.</div><br/><div id="36019004" class="c"><input type="checkbox" id="c-36019004" checked=""/><div class="controls bullet"><span class="by">imron</span><span>|</span><a href="#36018853">parent</a><span>|</span><a href="#36018910">next</a><span>|</span><label class="collapse" for="c-36019004">[-]</label><label class="expand" for="c-36019004">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Strict typing is good, and you should definitely use it, but you should still have good names.<p>Linters and type checkers will understand type hints. They wonât understand your naming conventions.</div><br/></div></div><div id="36018910" class="c"><input type="checkbox" id="c-36018910" checked=""/><div class="controls bullet"><span class="by">vsnf</span><span>|</span><a href="#36018853">parent</a><span>|</span><a href="#36019004">prev</a><span>|</span><a href="#36018967">next</a><span>|</span><label class="collapse" for="c-36018910">[-]</label><label class="expand" for="c-36018910">[2 more]</label></div><br/><div class="children"><div class="content">&gt;If it was a dict, it would be recordByID.<p>Never have I ever encountered any codebase where dictionaries were so named.</div><br/><div id="36019083" class="c"><input type="checkbox" id="c-36019083" checked=""/><div class="controls bullet"><span class="by">paganel</span><span>|</span><a href="#36018853">root</a><span>|</span><a href="#36018910">parent</a><span>|</span><a href="#36018967">next</a><span>|</span><label class="collapse" for="c-36019083">[-]</label><label class="expand" for="c-36019083">[1 more]</label></div><br/><div class="children"><div class="content">I usually add a â_dictâ to the variable name.</div><br/></div></div></div></div><div id="36018967" class="c"><input type="checkbox" id="c-36018967" checked=""/><div class="controls bullet"><span class="by">mgaunard</span><span>|</span><a href="#36018853">parent</a><span>|</span><a href="#36018910">prev</a><span>|</span><a href="#36018981">next</a><span>|</span><label class="collapse" for="c-36018967">[-]</label><label class="expand" for="c-36018967">[1 more]</label></div><br/><div class="children"><div class="content">Most good databases actually store data per column.<p>So you&#x27;d have a list of batches, each batch being a dict of string to list of T.</div><br/></div></div></div></div><div id="36018981" class="c"><input type="checkbox" id="c-36018981" checked=""/><div class="controls bullet"><span class="by">throwaway290</span><span>|</span><a href="#36018853">prev</a><span>|</span><label class="collapse" for="c-36018981">[-]</label><label class="expand" for="c-36018981">[3 more]</label></div><br/><div class="children"><div class="content">The thing with type hints in Python is that it&#x27;s not enforced unless you make and maintain checking it as part of your workflow. And it comes with a bunch of things, at least: make sure to configure mypy, make sure you run mypy after push (experienced pythonists will forget to run it before), make sure everyone&#x27;s IDE has it integrated, make sure to be super clear on which version of mypy you run (so errors people see in their IDE are the exact same as on CI). And don&#x27;t forget to update all this when new version comes out.</div><br/><div id="36019066" class="c"><input type="checkbox" id="c-36019066" checked=""/><div class="controls bullet"><span class="by">jstx1</span><span>|</span><a href="#36018981">parent</a><span>|</span><a href="#36019065">next</a><span>|</span><label class="collapse" for="c-36019066">[-]</label><label class="expand" for="c-36019066">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not that many steps. You already have CI - adding mypy is one extra line, you should already have a way to keep track of versions in your project - keeping track of the mypy version isn&#x27;t any additional overhead.<p>If your team uses VSCode, you can have a devcontainer for the project (<a href="https:&#x2F;&#x2F;code.visualstudio.com&#x2F;docs&#x2F;devcontainers&#x2F;containers" rel="nofollow">https:&#x2F;&#x2F;code.visualstudio.com&#x2F;docs&#x2F;devcontainers&#x2F;containers</a>) to make sure that it&#x27;s in everyone&#x27;s IDE along with your other linters, formatters etc and you can also have pre-commit hooks.</div><br/></div></div><div id="36019065" class="c"><input type="checkbox" id="c-36019065" checked=""/><div class="controls bullet"><span class="by">crosser</span><span>|</span><a href="#36018981">parent</a><span>|</span><a href="#36019066">prev</a><span>|</span><label class="collapse" for="c-36019065">[-]</label><label class="expand" for="c-36019065">[1 more]</label></div><br/><div class="children"><div class="content">Having mypy in the pre-commit hook helps a lot! (But I agree that difference between mypy versions is a pain.)</div><br/></div></div></div></div></div></div></div></div></div></body></html>