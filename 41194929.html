<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1723280461035" as="style"/><link rel="stylesheet" href="styles.css?v=1723280461035"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://rya.nc/vpp-hack.html">Hacking a Virtual Power Plant</a> <span class="domain">(<a href="https://rya.nc">rya.nc</a>)</span></div><div class="subtext"><span>bo0tzz</span> | <span>24 comments</span></div><br/><div><div id="41206023" class="c"><input type="checkbox" id="c-41206023" checked=""/><div class="controls bullet"><span class="by">ok_dad</span><span>|</span><a href="#41206913">next</a><span>|</span><label class="collapse" for="c-41206023">[-]</label><label class="expand" for="c-41206023">[1 more]</label></div><br/><div class="children"><div class="content">&gt; A major selling point for me was that they have a local network API which can be used to monitor and control everything without relying on their cloud services.<p>That would be a MAJOR selling point for me, too! Especially because most of the companies that do this for residential are getting a huge portion of the profits using YOUR batteries, rather than getting that profit yourself. Unfortunately, where I live, that is mostly because energy utilities are hostile to anyone except large middlemen installers and their VPPs. It would be simple for them to also allow individuals to sign up for dispatch if they were half-competent. I can&#x27;t find any companies providing battery systems plus solar that are able to be fully local in my area of the USA, either, even if I wanted to try and go &quot;off grid&quot; using massively overbuilt batteries linked to solar.</div><br/></div></div><div id="41206913" class="c"><input type="checkbox" id="c-41206913" checked=""/><div class="controls bullet"><span class="by">kmoser</span><span>|</span><a href="#41206023">prev</a><span>|</span><a href="#41205415">next</a><span>|</span><label class="collapse" for="c-41206913">[-]</label><label class="expand" for="c-41206913">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Expecting developers to know that 512 bit RSA is insecure clearly doesn’t work. They’re not cryptographers. This is not their job. The failure wasn’t that someone used 512 bit RSA. It was that a library they were relying on let them.<p>I disagree. Anyone using a library should have enough knowledge to use it properly, else they shouldn&#x27;t be writing serious software. The flip side is that the library should be documented clearly enough to prevent a competent professional developer from making that mistake by accident.<p>I don&#x27;t have an issue with a library supporting outdated standards since that can be useful for writing (hopefully temporary) code to interface with legacy systems. Again, as long as it&#x27;s documented properly, and the devs understand the potential ramifications.</div><br/><div id="41207741" class="c"><input type="checkbox" id="c-41207741" checked=""/><div class="controls bullet"><span class="by">jahewson</span><span>|</span><a href="#41206913">parent</a><span>|</span><a href="#41205415">next</a><span>|</span><label class="collapse" for="c-41207741">[-]</label><label class="expand" for="c-41207741">[2 more]</label></div><br/><div class="children"><div class="content">This is a great opportunity for me to cite my new favorite thing: the OHSA Hierarchy of Controls. In the physical workplace, documenting a hazard would be seen as an inadequate control if it can simply be removed.<p><a href="https:&#x2F;&#x2F;makesafetools.com&#x2F;osha-hierarchy-of-controls&#x2F;" rel="nofollow">https:&#x2F;&#x2F;makesafetools.com&#x2F;osha-hierarchy-of-controls&#x2F;</a><p>If software as an industry wants to improve then its practices need to improve. We can do so much better than “be less dumb”.</div><br/><div id="41208093" class="c"><input type="checkbox" id="c-41208093" checked=""/><div class="controls bullet"><span class="by">the8472</span><span>|</span><a href="#41206913">root</a><span>|</span><a href="#41207741">parent</a><span>|</span><a href="#41205415">next</a><span>|</span><label class="collapse" for="c-41208093">[-]</label><label class="expand" for="c-41208093">[1 more]</label></div><br/><div class="children"><div class="content">Old crypto profiles often can&#x27;t be removed because there&#x27;s still ancient hardware that needs to be interacted with. Exhibit A: the SSH server in my modem only speaks diffie-hellman-group1-sha1 and 3des-cbc.<p>So putting it in separate legacy modules, removing them from automatic negotiation and putting warnings on them is usually the best option.<p>&gt;  We can do so much better than “be less dumb”.<p>Yes. But in the end &quot;we only had junior engineers working on this piece of infrastructure&quot; would not fly for Boeing either.</div><br/></div></div></div></div></div></div><div id="41205415" class="c"><input type="checkbox" id="c-41205415" checked=""/><div class="controls bullet"><span class="by">ckwalsh</span><span>|</span><a href="#41206913">prev</a><span>|</span><a href="#41206032">next</a><span>|</span><label class="collapse" for="c-41205415">[-]</label><label class="expand" for="c-41205415">[5 more]</label></div><br/><div class="children"><div class="content">&gt; the legitimate ones I’d initially generated still worked<p>This spooks me. I take this to mean either:<p>- They are still using the compromised key for validation, meaning if you have access to any old token, you can still mutate that, maybe needing to play around with the issuing times<p>- They built an allowlist of all permitted tokens, and check that list first. In which case, might as well use random session ids instead of JWTs, and at the same point where the allowlist is being checked, mutate the request to inject a JWT that the backend can use.<p>Also, kind of curious why the switch to RSA4096 instead of elliptic curves, since they are generally faster &#x2F; smaller.</div><br/><div id="41205556" class="c"><input type="checkbox" id="c-41205556" checked=""/><div class="controls bullet"><span class="by">ryan-c</span><span>|</span><a href="#41205415">parent</a><span>|</span><a href="#41205580">next</a><span>|</span><label class="collapse" for="c-41205556">[-]</label><label class="expand" for="c-41205556">[2 more]</label></div><br/><div class="children"><div class="content">I think very few customers had ever generated API keys, and as best I can tell they made an allowlist for them.<p>One of my suggestions to them was to switch to elliptic curve, but I imagine RSA 4096 &quot;just worked&quot;.<p>I suspect they&#x27;ll rework it later now that it&#x27;s not &quot;on fire&quot;.</div><br/><div id="41205730" class="c"><input type="checkbox" id="c-41205730" checked=""/><div class="controls bullet"><span class="by">ckwalsh</span><span>|</span><a href="#41205415">root</a><span>|</span><a href="#41205556">parent</a><span>|</span><a href="#41205580">next</a><span>|</span><label class="collapse" for="c-41205730">[-]</label><label class="expand" for="c-41205730">[1 more]</label></div><br/><div class="children"><div class="content">Ah that makes sense. For sufficiently small values of N, a hardcoded allowlist isn&#x27;t a problem.<p>You&#x27;re probably right that RSA 4096 &quot;just worked&quot;, and some library in their stack doesn&#x27;t have elliptic curve support. And again, if N is small, the verification performance doesn&#x27;t matter that much.<p>Nice find and writeup!</div><br/></div></div></div></div><div id="41205580" class="c"><input type="checkbox" id="c-41205580" checked=""/><div class="controls bullet"><span class="by">selecsosi</span><span>|</span><a href="#41205415">parent</a><span>|</span><a href="#41205556">prev</a><span>|</span><a href="#41206032">next</a><span>|</span><label class="collapse" for="c-41205580">[-]</label><label class="expand" for="c-41205580">[2 more]</label></div><br/><div class="children"><div class="content">My guess is they are still accepting keys signed with the old 512 key but are currently generating new tokens with a 4096 key.</div><br/><div id="41207911" class="c"><input type="checkbox" id="c-41207911" checked=""/><div class="controls bullet"><span class="by">rahkiin</span><span>|</span><a href="#41205415">root</a><span>|</span><a href="#41205580">parent</a><span>|</span><a href="#41206032">next</a><span>|</span><label class="collapse" for="c-41207911">[-]</label><label class="expand" for="c-41207911">[1 more]</label></div><br/><div class="children"><div class="content">No because Ryan says he is not able to create his own tokens anymore. And he has the same private key as the supplier.</div><br/></div></div></div></div></div></div><div id="41206032" class="c"><input type="checkbox" id="c-41206032" checked=""/><div class="controls bullet"><span class="by">ryan-c</span><span>|</span><a href="#41205415">prev</a><span>|</span><a href="#41205536">next</a><span>|</span><label class="collapse" for="c-41206032">[-]</label><label class="expand" for="c-41206032">[1 more]</label></div><br/><div class="children"><div class="content">The Ars Technica article may also be of interest - it has a statement from the company.<p><a href="https:&#x2F;&#x2F;arstechnica.com&#x2F;security&#x2F;2024&#x2F;08&#x2F;home-energy-system-gives-researcher-control-of-virtual-power-plant&#x2F;" rel="nofollow">https:&#x2F;&#x2F;arstechnica.com&#x2F;security&#x2F;2024&#x2F;08&#x2F;home-energy-system-...</a></div><br/></div></div><div id="41205536" class="c"><input type="checkbox" id="c-41205536" checked=""/><div class="controls bullet"><span class="by">reboot81</span><span>|</span><a href="#41206032">prev</a><span>|</span><a href="#41205560">next</a><span>|</span><label class="collapse" for="c-41205536">[-]</label><label class="expand" for="c-41205536">[5 more]</label></div><br/><div class="children"><div class="content">I do wonder how you got in contact with them?
No security.txt or other obvious ways to report a security issue.</div><br/><div id="41205569" class="c"><input type="checkbox" id="c-41205569" checked=""/><div class="controls bullet"><span class="by">ryan-c</span><span>|</span><a href="#41205536">parent</a><span>|</span><a href="#41206002">next</a><span>|</span><label class="collapse" for="c-41205569">[-]</label><label class="expand" for="c-41205569">[3 more]</label></div><br/><div class="children"><div class="content">In the footnotes:<p>&gt; Someone once asked me, as commentary on my ability to figure out email addresses, “Are you a Hacker or in sales?”<p>Just a bit of OSINT and educated guessing.</div><br/><div id="41205993" class="c"><input type="checkbox" id="c-41205993" checked=""/><div class="controls bullet"><span class="by">markovs_gun</span><span>|</span><a href="#41205536">root</a><span>|</span><a href="#41205569">parent</a><span>|</span><a href="#41206002">next</a><span>|</span><label class="collapse" for="c-41205993">[-]</label><label class="expand" for="c-41205993">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s pretty easy to get in contact with someone most of the time if you search for relevant roles on google with site:linkedin.com, or if you want to reach execs, on their business pages. I usually include several combinations of first and last names @company.com so like I will email to JSmith@company.com and JohnSmith@company.com and others. This is useful for escalating customer service complaints if you&#x27;re just hitting a brick wall with the low level customer service staff.</div><br/><div id="41206015" class="c"><input type="checkbox" id="c-41206015" checked=""/><div class="controls bullet"><span class="by">ryan-c</span><span>|</span><a href="#41205536">root</a><span>|</span><a href="#41205993">parent</a><span>|</span><a href="#41206002">next</a><span>|</span><label class="collapse" for="c-41206015">[-]</label><label class="expand" for="c-41206015">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, this is pretty much what I did, except the demo account had an employee&#x27;s email address in the details so I knew the format.</div><br/></div></div></div></div></div></div><div id="41206002" class="c"><input type="checkbox" id="c-41206002" checked=""/><div class="controls bullet"><span class="by">ryan-c</span><span>|</span><a href="#41205536">parent</a><span>|</span><a href="#41205569">prev</a><span>|</span><a href="#41205560">next</a><span>|</span><label class="collapse" for="c-41206002">[-]</label><label class="expand" for="c-41206002">[1 more]</label></div><br/><div class="children"><div class="content">They do have a vulnerability policy page, but that was harder to find than figuring out an email address. I did suggest they implement security.txt, as it would have made things easier.</div><br/></div></div></div></div><div id="41205560" class="c"><input type="checkbox" id="c-41205560" checked=""/><div class="controls bullet"><span class="by">kkfx</span><span>|</span><a href="#41205536">prev</a><span>|</span><a href="#41195356">next</a><span>|</span><label class="collapse" for="c-41205560">[-]</label><label class="expand" for="c-41205560">[1 more]</label></div><br/><div class="children"><div class="content">Now imaging the amplitude of a deliberate attack not to personal domestic p.v. productions but en-masse against the grid: most hybrid systems also can inject, p.v. and eventual batteries can inject all together, eventually ignoring grid frequency burst. So far probably those systems are not so common do generate widespread damage, but once they&#x27;ll be spread it would be easy to generate a large scale blackouts.<p>Just to say that no proprietary devices should be ever allowed to have remote connections, FLOSS must be mandatory from the early stage of a project to allow third party inspect the codebase not starting with a gazillion SLoC, being de facto unable to understand them, instead of starting from the first SLoC following at the project evolutionary speed.<p>Nowadays it start to be again damn easy to plan any kind of &quot;unexpected logic&quot; in gazillion of devices, potentially at State intelligence level, from cars to energy systems, TLCs active devices, ... not a new thing at all, but easy enough to be dangerous enough to MANDATE FLOSS if those who care of a nation security have at least an idea of the current role of IT in a society and it&#x27;s enormous mean attack surface.</div><br/></div></div><div id="41195356" class="c"><input type="checkbox" id="c-41195356" checked=""/><div class="controls bullet"><span class="by">uyzstvqs</span><span>|</span><a href="#41205560">prev</a><span>|</span><label class="collapse" for="c-41195356">[-]</label><label class="expand" for="c-41195356">[7 more]</label></div><br/><div class="children"><div class="content">Great blog post. The company response was really great, but there was no mention of a bug bounty. This would be a perfect example if he got paid for his findings.</div><br/><div id="41205524" class="c"><input type="checkbox" id="c-41205524" checked=""/><div class="controls bullet"><span class="by">ryan-c</span><span>|</span><a href="#41195356">parent</a><span>|</span><a href="#41205951">next</a><span>|</span><label class="collapse" for="c-41205524">[-]</label><label class="expand" for="c-41205524">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not male and I use gender neutral pronouns.<p>The bugs I find are usually just ones I stumble across, I don&#x27;t go looking for them.<p>Bug bounty programs generally aren&#x27;t worth the trouble for me anyway - I have to file taxes in both the US and the UK so the paperwork gets really annoying.</div><br/><div id="41206454" class="c"><input type="checkbox" id="c-41206454" checked=""/><div class="controls bullet"><span class="by">saulpw</span><span>|</span><a href="#41195356">root</a><span>|</span><a href="#41205524">parent</a><span>|</span><a href="#41205951">next</a><span>|</span><label class="collapse" for="c-41206454">[-]</label><label class="expand" for="c-41206454">[2 more]</label></div><br/><div class="children"><div class="content">I wanted to see your talk on Hacking Gender, but the link on your about page is broken, it seems to have been taken down :(</div><br/><div id="41208060" class="c"><input type="checkbox" id="c-41208060" checked=""/><div class="controls bullet"><span class="by">ryan-c</span><span>|</span><a href="#41195356">root</a><span>|</span><a href="#41206454">parent</a><span>|</span><a href="#41205951">next</a><span>|</span><label class="collapse" for="c-41208060">[-]</label><label class="expand" for="c-41208060">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve fixed the link.</div><br/></div></div></div></div></div></div><div id="41205951" class="c"><input type="checkbox" id="c-41205951" checked=""/><div class="controls bullet"><span class="by">mjg59</span><span>|</span><a href="#41195356">parent</a><span>|</span><a href="#41205524">prev</a><span>|</span><a href="#41205140">next</a><span>|</span><label class="collapse" for="c-41205951">[-]</label><label class="expand" for="c-41205951">[2 more]</label></div><br/><div class="children"><div class="content">Adding to Ryan&#x27;s concerns, submitting to a bug bounty program often means accepting terms and conditions that constrain your ability to publicly disclose the issue if the vendor decides to be a dick about it. Depending on how you think your career potentially benefits from freedom to discuss an issue, the long-term financial benefit is potentially greater from not going down the bug bounty path.</div><br/><div id="41205987" class="c"><input type="checkbox" id="c-41205987" checked=""/><div class="controls bullet"><span class="by">ryan-c</span><span>|</span><a href="#41195356">root</a><span>|</span><a href="#41205951">parent</a><span>|</span><a href="#41205140">next</a><span>|</span><label class="collapse" for="c-41205987">[-]</label><label class="expand" for="c-41205987">[1 more]</label></div><br/><div class="children"><div class="content">Oh, yeah, I&#x27;d forgotten about the NDAs, those are a big NOPE for me.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>