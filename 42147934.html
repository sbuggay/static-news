<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1731747659969" as="style"/><link rel="stylesheet" href="styles.css?v=1731747659969"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/noneback/go-taskflow">Go-taskflow: A taskflow-like General-purpose Task-parallel Programming Framework</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>noneback</span> | <span>15 comments</span></div><br/><div><div id="42153932" class="c"><input type="checkbox" id="c-42153932" checked=""/><div class="controls bullet"><span class="by">grogenaut</span><span>|</span><a href="#42154851">next</a><span>|</span><label class="collapse" for="c-42153932">[-]</label><label class="expand" for="c-42153932">[5 more]</label></div><br/><div class="children"><div class="content">Shameless plug for a similar but totally different system that I&#x27;ve used to pretty good effect lately: <a href="https:&#x2F;&#x2F;github.com&#x2F;gaffo&#x2F;jorb">https:&#x2F;&#x2F;github.com&#x2F;gaffo&#x2F;jorb</a> meant for just trying to run batches of items with many steps in a simple way.<p>A major benefit of my tool is that it ends up being pretty easy to re-wire the flows of tasks through the state tree. I tried for a ipynb type workflow as much as possible where I&#x27;m storing state on every state change, this lets me kill and restart the processing easily and often only losing the work that was in process on the in flight state changes. I find myself wiring up the first few steps of the state diagram and making the ones I haven&#x27;t figured out yet temporariliy terminal. Then my computer is crunching away on pre-work and I let one item through at a time in the debugger, figure out that state, and move to the next state, and restart the flow. New items now start processing through the newly non-terminal state. I set breakpoints at all of the exceptional states and let it run working on the next step in the flow. I handle the exceptions and then open the flood gates with parallelism on the state, while also coding up the new state transitions. This lets my computer do a lot of work against things that have concurrency limits or rate limits while working, lowering the totally wall clock time of the large batch job.<p>What do I use it for for reals? I&#x27;ve been using it to check out and modify large swaths of code bases and build them against a build fleet where I&#x27;m rate limited on the build submissions and the ability to pull the code down and modify it. Or where I need to do walking of a large number of expensive apis over time to do complex calculations on small (1-5k sets of data).<p>I&#x27;ve always thought of building a dag renderer for the graph but I&#x27;m changing the graph during execution a lot, what I actually want is to render the state changes of a given task</div><br/><div id="42154801" class="c"><input type="checkbox" id="c-42154801" checked=""/><div class="controls bullet"><span class="by">noneback</span><span>|</span><a href="#42153932">parent</a><span>|</span><a href="#42154851">next</a><span>|</span><label class="collapse" for="c-42154801">[-]</label><label class="expand" for="c-42154801">[4 more]</label></div><br/><div class="children"><div class="content">Yep. Rendering dynamic graphs is complicated, cuz dependencies change all the time.</div><br/><div id="42155236" class="c"><input type="checkbox" id="c-42155236" checked=""/><div class="controls bullet"><span class="by">xlii</span><span>|</span><a href="#42153932">root</a><span>|</span><a href="#42154801">parent</a><span>|</span><a href="#42154812">next</a><span>|</span><label class="collapse" for="c-42155236">[-]</label><label class="expand" for="c-42155236">[1 more]</label></div><br/><div class="children"><div class="content">This is a pitfall. I’m working on something similar (internal solution) and dynamic task graph bites back hard very quickly.<p>Domain I’m working on is very prone to a failure so having simple visualization&#x2F;interaction (e.g. click to inspect&#x2F;retry) is an important feature.<p>For that task graph needs to be resolved and static before actual execution phase. Nothing prevents multi-loop resolution (i.e. task graph which result is a task graph). Just make sure artifact sits in-between.</div><br/></div></div><div id="42154812" class="c"><input type="checkbox" id="c-42154812" checked=""/><div class="controls bullet"><span class="by">noneback</span><span>|</span><a href="#42153932">root</a><span>|</span><a href="#42154801">parent</a><span>|</span><a href="#42155236">prev</a><span>|</span><a href="#42154851">next</a><span>|</span><label class="collapse" for="c-42154812">[-]</label><label class="expand" for="c-42154812">[2 more]</label></div><br/><div class="children"><div class="content">That&#x27;s why I decided to support static graphs in the first place. After all, in most cases, static graph programming is enough, and being a user-friendly really matters.</div><br/><div id="42154843" class="c"><input type="checkbox" id="c-42154843" checked=""/><div class="controls bullet"><span class="by">noneback</span><span>|</span><a href="#42153932">root</a><span>|</span><a href="#42154812">parent</a><span>|</span><a href="#42154851">next</a><span>|</span><label class="collapse" for="c-42154843">[-]</label><label class="expand" for="c-42154843">[1 more]</label></div><br/><div class="children"><div class="content">Visualizer and Profiler for graph-based task execution are crucial to improve user experience.</div><br/></div></div></div></div></div></div></div></div><div id="42154851" class="c"><input type="checkbox" id="c-42154851" checked=""/><div class="controls bullet"><span class="by">noneback</span><span>|</span><a href="#42153932">prev</a><span>|</span><a href="#42152154">next</a><span>|</span><label class="collapse" for="c-42154851">[-]</label><label class="expand" for="c-42154851">[1 more]</label></div><br/><div class="children"><div class="content">Most credit to taskflow: <a href="https:&#x2F;&#x2F;github.com&#x2F;taskflow&#x2F;taskflow">https:&#x2F;&#x2F;github.com&#x2F;taskflow&#x2F;taskflow</a></div><br/></div></div><div id="42152154" class="c"><input type="checkbox" id="c-42152154" checked=""/><div class="controls bullet"><span class="by">haitch</span><span>|</span><a href="#42154851">prev</a><span>|</span><a href="#42147935">next</a><span>|</span><label class="collapse" for="c-42152154">[-]</label><label class="expand" for="c-42152154">[4 more]</label></div><br/><div class="children"><div class="content">I have this <a href="https:&#x2F;&#x2F;github.com&#x2F;Azure&#x2F;go-asyncjob">https:&#x2F;&#x2F;github.com&#x2F;Azure&#x2F;go-asyncjob</a> library as well, with generic strongType connecting each step input&#x2F;output.</div><br/><div id="42153578" class="c"><input type="checkbox" id="c-42153578" checked=""/><div class="controls bullet"><span class="by">verdverm</span><span>|</span><a href="#42152154">parent</a><span>|</span><a href="#42147935">next</a><span>|</span><label class="collapse" for="c-42153578">[-]</label><label class="expand" for="c-42153578">[3 more]</label></div><br/><div class="children"><div class="content">CUE has a package (cue&#x2F;flow) that has a default implementation but also allows you to build custom tasks on top of the engine &amp; evaluator. The nice thing about this setup is that it infers the dependencies between tasks based on the references to inputs&#x2F;outputs between them. The main drawback of most of these things is that they don&#x27;t scale beyond a single machine. That&#x27;s why people choose tools like Airflow.<p><a href="https:&#x2F;&#x2F;pkg.go.dev&#x2F;cuelang.org&#x2F;go@v0.10.1&#x2F;tools&#x2F;flow" rel="nofollow">https:&#x2F;&#x2F;pkg.go.dev&#x2F;cuelang.org&#x2F;go@v0.10.1&#x2F;tools&#x2F;flow</a> (cue cmd is the default implementation of this)<p><a href="https:&#x2F;&#x2F;docs.hofstadter.io&#x2F;getting-started&#x2F;task-engine&#x2F;" rel="nofollow">https:&#x2F;&#x2F;docs.hofstadter.io&#x2F;getting-started&#x2F;task-engine&#x2F;</a> (custom example)</div><br/><div id="42155269" class="c"><input type="checkbox" id="c-42155269" checked=""/><div class="controls bullet"><span class="by">xlii</span><span>|</span><a href="#42152154">root</a><span>|</span><a href="#42153578">parent</a><span>|</span><a href="#42154792">next</a><span>|</span><label class="collapse" for="c-42155269">[-]</label><label class="expand" for="c-42155269">[1 more]</label></div><br/><div class="children"><div class="content">For what is worth I spent couple weeks evaluating Cue and I don’t think it’s mature enough for production use in context of task runner.<p>There are undocumented quirks (and documentation gaps) requiring hours of experimentation, some subtle bugs and ergonomy paper cuts.<p>For solution integration solution has to be approachable, and as much as I have sympathy for Cue it just isn’t one. It feels like one needs PhD in software engineering to use it.<p>This is IMO reason why people go for things like Airflow - popularity and ease of entry. Using Cue in distributed environment isn’t that hard. It can be used directly from Go or wrapped in Erlang&#x2F;Elixir port.</div><br/></div></div><div id="42154792" class="c"><input type="checkbox" id="c-42154792" checked=""/><div class="controls bullet"><span class="by">noneback</span><span>|</span><a href="#42152154">root</a><span>|</span><a href="#42153578">parent</a><span>|</span><a href="#42155269">prev</a><span>|</span><a href="#42147935">next</a><span>|</span><label class="collapse" for="c-42154792">[-]</label><label class="expand" for="c-42154792">[1 more]</label></div><br/><div class="children"><div class="content">Agree. lightweight embedded libs like go-taskflow are used in a much different way compared to distributed workflow systems. Coders should be aware of the pros and cons of those repos or systems.</div><br/></div></div></div></div></div></div><div id="42147935" class="c"><input type="checkbox" id="c-42147935" checked=""/><div class="controls bullet"><span class="by">noneback</span><span>|</span><a href="#42152154">prev</a><span>|</span><a href="#42151798">next</a><span>|</span><label class="collapse" for="c-42147935">[-]</label><label class="expand" for="c-42147935">[1 more]</label></div><br/><div class="children"><div class="content">A taskflow-like General-purpose Task-parallel Programming Framework with an integrated visualizer and profiler for Go, inspired by taskflow-cpp, with Go&#x27;s native capabilities and simplicity, suitable for complex dependency management in concurrent tasks.</div><br/></div></div><div id="42151798" class="c"><input type="checkbox" id="c-42151798" checked=""/><div class="controls bullet"><span class="by">kosolam</span><span>|</span><a href="#42147935">prev</a><span>|</span><a href="#42154723">next</a><span>|</span><label class="collapse" for="c-42151798">[-]</label><label class="expand" for="c-42151798">[2 more]</label></div><br/><div class="children"><div class="content">Is it like Temporal?</div><br/><div id="42154750" class="c"><input type="checkbox" id="c-42154750" checked=""/><div class="controls bullet"><span class="by">noneback</span><span>|</span><a href="#42151798">parent</a><span>|</span><a href="#42154723">next</a><span>|</span><label class="collapse" for="c-42154750">[-]</label><label class="expand" for="c-42154750">[1 more]</label></div><br/><div class="children"><div class="content">Not quite like although they may share some same concepts while using. go-taskflow is more like a lib or an embedded framework to organize task dependency and execute tasks in parallel rather than a platform.</div><br/></div></div></div></div></div></div></div></div></div></body></html>