<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1712739667824" as="style"/><link rel="stylesheet" href="styles.css?v=1712739667824"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.juicebox.xyz/blog/key-to-simplicity-squeezing-the-hassle-out-of-encryption-key-recovery">Juicebox: Squeezing the hassle out of encryption key recovery</a> <span class="domain">(<a href="https://www.juicebox.xyz">www.juicebox.xyz</a>)</span></div><div class="subtext"><span>inmygarage</span> | <span>17 comments</span></div><br/><div><div id="39988472" class="c"><input type="checkbox" id="c-39988472" checked=""/><div class="controls bullet"><span class="by">franky47</span><span>|</span><a href="#39981511">next</a><span>|</span><label class="collapse" for="c-39988472">[-]</label><label class="expand" for="c-39988472">[1 more]</label></div><br/><div class="children"><div class="content">One of my first blog posts was about a similar system, though much simpler&#x2F;naive and based on trusting an email address to distribute shards.<p>Its failure point boiled down to letting the user save the other shard. Maybe a 3-shard scheme could help redundancy and loss tolerance.<p><a href="https:&#x2F;&#x2F;francoisbest.com&#x2F;posts&#x2F;2020&#x2F;password-reset-for-e2ee-apps" rel="nofollow">https:&#x2F;&#x2F;francoisbest.com&#x2F;posts&#x2F;2020&#x2F;password-reset-for-e2ee-...</a></div><br/></div></div><div id="39981511" class="c"><input type="checkbox" id="c-39981511" checked=""/><div class="controls bullet"><span class="by">imperiopolis</span><span>|</span><a href="#39988472">prev</a><span>|</span><a href="#39987536">next</a><span>|</span><label class="collapse" for="c-39981511">[-]</label><label class="expand" for="c-39981511">[10 more]</label></div><br/><div class="children"><div class="content">Author here, happy to answer any questions!<p>TL;DR we&#x27;re sharing an open-source encryption key recovery protocol that provides high security coupled with a user-friendly design, to make encryption further accessible to larger numbers of people. What we&#x27;ve built leverages programmable HSMs, distributed cryptography, and a user-friendly PIN-based recovery process to simplify key recovery without compromising security.</div><br/><div id="39986178" class="c"><input type="checkbox" id="c-39986178" checked=""/><div class="controls bullet"><span class="by">XMPPwocky</span><span>|</span><a href="#39981511">parent</a><span>|</span><a href="#39986264">next</a><span>|</span><label class="collapse" for="c-39986178">[-]</label><label class="expand" for="c-39986178">[6 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not a cryptographer- what&#x27;s the attack&#x2F;failure mode of &quot;standard HSM key recovery, but the &#x27;PIN&#x27; sent to each realm is actually HMAC(some_identifier_for_each_realm, PIN), and each realm stores just one share of the secret&quot;- i.e. what motivates the use of OPRF here instead of just HMAC to prevent a realm from basically pass-the-hash-ing the user&#x27;s PIN to get shares from other realms?</div><br/><div id="39986286" class="c"><input type="checkbox" id="c-39986286" checked=""/><div class="controls bullet"><span class="by">ongardie</span><span>|</span><a href="#39981511">root</a><span>|</span><a href="#39986178">parent</a><span>|</span><a href="#39986264">next</a><span>|</span><label class="collapse" for="c-39986286">[-]</label><label class="expand" for="c-39986286">[5 more]</label></div><br/><div class="children"><div class="content">The issue if realms stored HMAC(realm_id + PIN), where PINs are presumed to be low-entropy, then an individual realm could brute-force the PIN. Specifically, an adversary with access to a single realm&#x27;s database could enumerate PINs, run them through the HMAC along with the realm ID, and test locally whether that&#x27;s the correct PIN. That would already be bad because users might reuse PINs across services. Then, if the adversary had valid auth tokens for other realms, they would be able to use that PIN to recover the secret shares from other realms and reconstruct the secret.<p>The Juicebox protocol is designed to prevent this. A realm can&#x27;t individually test whether or not a PIN is correct.<p>Note: I&#x27;m a former employee of&#x2F;contributor to Juicebox.</div><br/><div id="39987524" class="c"><input type="checkbox" id="c-39987524" checked=""/><div class="controls bullet"><span class="by">themoonisachees</span><span>|</span><a href="#39981511">root</a><span>|</span><a href="#39986286">parent</a><span>|</span><a href="#39986319">next</a><span>|</span><label class="collapse" for="c-39987524">[-]</label><label class="expand" for="c-39987524">[3 more]</label></div><br/><div class="children"><div class="content">What work does &quot;individually&quot; do in this last sentence? Can 2 evil services collaborate (or more realistically 2 non-evil services get breached) to extract part of the secret? What is the mechanism keeping me from setting up n realms and extracting secrets from their shared info?</div><br/><div id="39987665" class="c"><input type="checkbox" id="c-39987665" checked=""/><div class="controls bullet"><span class="by">imperiopolis</span><span>|</span><a href="#39981511">root</a><span>|</span><a href="#39987524">parent</a><span>|</span><a href="#39986319">next</a><span>|</span><label class="collapse" for="c-39987665">[-]</label><label class="expand" for="c-39987665">[2 more]</label></div><br/><div class="children"><div class="content">Yes, that is the work &quot;individually&quot; is doing here – multiple realms (services) could collude to combine shards and attempt to extract secrets.<p>However, programmable HSMs, with verifiable software (e.g. via a key ceremony), minimize this form of collusion. The shards they hold can&#x27;t be extracted by a malicious operator, at least without substantial effort (requiring HSM hardware vulnerabilities).</div><br/><div id="39988442" class="c"><input type="checkbox" id="c-39988442" checked=""/><div class="controls bullet"><span class="by">themoonisachees</span><span>|</span><a href="#39981511">root</a><span>|</span><a href="#39987665">parent</a><span>|</span><a href="#39986319">next</a><span>|</span><label class="collapse" for="c-39988442">[-]</label><label class="expand" for="c-39988442">[1 more]</label></div><br/><div class="children"><div class="content">Interesting. Thanks for the explanations!</div><br/></div></div></div></div></div></div><div id="39986319" class="c"><input type="checkbox" id="c-39986319" checked=""/><div class="controls bullet"><span class="by">XMPPwocky</span><span>|</span><a href="#39981511">root</a><span>|</span><a href="#39986286">parent</a><span>|</span><a href="#39987524">prev</a><span>|</span><a href="#39986264">next</a><span>|</span><label class="collapse" for="c-39986319">[-]</label><label class="expand" for="c-39986319">[1 more]</label></div><br/><div class="children"><div class="content">Ah, of course, that makes sense- thanks for the answer!</div><br/></div></div></div></div></div></div><div id="39986264" class="c"><input type="checkbox" id="c-39986264" checked=""/><div class="controls bullet"><span class="by">parhamn</span><span>|</span><a href="#39981511">parent</a><span>|</span><a href="#39986178">prev</a><span>|</span><a href="#39987536">next</a><span>|</span><label class="collapse" for="c-39986264">[-]</label><label class="expand" for="c-39986264">[3 more]</label></div><br/><div class="children"><div class="content">Besides &quot;how do we use this&quot; any word on the authors of this project? I did a very cursory search of the two contributors and there was very little I could find that would reassure me in using such a sensitive tool. Could well be my heightened paranoia after recent events.</div><br/><div id="39986399" class="c"><input type="checkbox" id="c-39986399" checked=""/><div class="controls bullet"><span class="by">imperiopolis</span><span>|</span><a href="#39981511">root</a><span>|</span><a href="#39986264">parent</a><span>|</span><a href="#39986359">next</a><span>|</span><label class="collapse" for="c-39986399">[-]</label><label class="expand" for="c-39986399">[1 more]</label></div><br/><div class="children"><div class="content">Ideally you don&#x27;t have to trust us! Code is open source on GitHub, protocol is published in the whitepaper, and all has been independently audited.<p>If you have specific concerns, happy to talk them through!</div><br/></div></div><div id="39986359" class="c"><input type="checkbox" id="c-39986359" checked=""/><div class="controls bullet"><span class="by">daniper</span><span>|</span><a href="#39981511">root</a><span>|</span><a href="#39986264">parent</a><span>|</span><a href="#39986399">prev</a><span>|</span><a href="#39987536">next</a><span>|</span><label class="collapse" for="c-39986359">[-]</label><label class="expand" for="c-39986359">[1 more]</label></div><br/><div class="children"><div class="content">The team is here, includes creator of Signal, among others: <a href="https:&#x2F;&#x2F;www.juicebox.xyz&#x2F;contributors" rel="nofollow">https:&#x2F;&#x2F;www.juicebox.xyz&#x2F;contributors</a></div><br/></div></div></div></div></div></div><div id="39987536" class="c"><input type="checkbox" id="c-39987536" checked=""/><div class="controls bullet"><span class="by">_factor</span><span>|</span><a href="#39981511">prev</a><span>|</span><a href="#39986184">next</a><span>|</span><label class="collapse" for="c-39987536">[-]</label><label class="expand" for="c-39987536">[2 more]</label></div><br/><div class="children"><div class="content">Interesting idea, but the logging aspect still leaves it up to the shard holder to perform.<p>This essentially reduces counting to a promise.</div><br/><div id="39987700" class="c"><input type="checkbox" id="c-39987700" checked=""/><div class="controls bullet"><span class="by">imperiopolis</span><span>|</span><a href="#39987536">parent</a><span>|</span><a href="#39986184">next</a><span>|</span><label class="collapse" for="c-39987700">[-]</label><label class="expand" for="c-39987700">[1 more]</label></div><br/><div class="children"><div class="content">Programmable HSMs, with verifiable software (e.g. via a key ceremony), removes the need to trust a shard holder to do counting correctly. You know what software they&#x27;re running, so you can verify it works as designed.</div><br/></div></div></div></div><div id="39986184" class="c"><input type="checkbox" id="c-39986184" checked=""/><div class="controls bullet"><span class="by">ggm</span><span>|</span><a href="#39987536">prev</a><span>|</span><label class="collapse" for="c-39986184">[-]</label><label class="expand" for="c-39986184">[3 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a shame key escrow has become a tainted concept, mired in &quot;government has my keys&quot; because a mechanism to store offline a cold copy of keying material and recover it is a good thing to have available.</div><br/><div id="39987121" class="c"><input type="checkbox" id="c-39987121" checked=""/><div class="controls bullet"><span class="by">throwiforgtnlzy</span><span>|</span><a href="#39986184">parent</a><span>|</span><a href="#39986511">next</a><span>|</span><label class="collapse" for="c-39987121">[-]</label><label class="expand" for="c-39987121">[1 more]</label></div><br/><div class="children"><div class="content">&quot;Key escrow&quot; by encrypting secrets yourself with trusted tools and storing the result in various object stores. Problem solved.<p>Also solved by on-prem secrets and password managers without cloud features or dial-home.<p>Trusting a new third-party with their new and likely unproven construction is a recipe that has failed spectacularly over and over again.<p>It&#x27;s possible, but it&#x27;s very, very difficult and, like email or DNS, becomes a kind of commoditized utility that rarely&#x2F;never changes.</div><br/></div></div><div id="39986511" class="c"><input type="checkbox" id="c-39986511" checked=""/><div class="controls bullet"><span class="by">imperiopolis</span><span>|</span><a href="#39986184">parent</a><span>|</span><a href="#39987121">prev</a><span>|</span><label class="collapse" for="c-39986511">[-]</label><label class="expand" for="c-39986511">[1 more]</label></div><br/><div class="children"><div class="content">Making encryption more convenient for everyone is definitely a good thing. Some people will always have that paranoia around letting keys out of their hand, but for the rest of us this protocol aims to reduce the need to trust any one service with your key material by distributing it across independent distrusting services.</div><br/></div></div></div></div></div></div></div></div></div></body></html>