<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1728723674136" as="style"/><link rel="stylesheet" href="styles.css?v=1728723674136"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://gwolf.org/2024/10/started-a-guide-to-writing-fuse-filesystems-in-python.html">Started a guide to writing FUSE filesystems in Python</a> <span class="domain">(<a href="https://gwolf.org">gwolf.org</a>)</span></div><div class="subtext"><span>levlaz</span> | <span>52 comments</span></div><br/><div><div id="41817656" class="c"><input type="checkbox" id="c-41817656" checked=""/><div class="controls bullet"><span class="by">marmaduke</span><span>|</span><a href="#41813527">next</a><span>|</span><label class="collapse" for="c-41817656">[-]</label><label class="expand" for="c-41817656">[1 more]</label></div><br/><div class="children"><div class="content">I like to think of fuse as a way of allowing Makefiles to specify DAGs over arbitrary resources.  For instance, a fuse fs exposing the state of a k8s cluster might ease writing operators accessible for simpler minds like mine.<p>Or email, why not expose imap through a file system, so your RAG app (like gpt4all) can just access everything directly ?</div><br/></div></div><div id="41813527" class="c"><input type="checkbox" id="c-41813527" checked=""/><div class="controls bullet"><span class="by">dsp_person</span><span>|</span><a href="#41817656">prev</a><span>|</span><a href="#41813473">next</a><span>|</span><label class="collapse" for="c-41813527">[-]</label><label class="expand" for="c-41813527">[6 more]</label></div><br/><div class="children"><div class="content">The libfuse github has some good examples for C&#x2F;C++ in [0] of increasing complexity:<p>- passthrough.c mirrors existing filesystem, &quot;Its performance is terrible.&quot;<p>- passthrough_fh.c &quot;performance is not quite as bad.&quot;<p>- passthrough_ll.c implemented with low level api and &quot;the least bad among the three&quot;<p>- passthrough_hp.cc high performance version written in C++<p>Some interesting fuse projects in my notes: [1] splitting large files into segments; [2] show ZFS incremental snapshots as files; [3] transparent filesystem compression; [4] and [5] options for mounting archives as filesytems.<p>- [0] <a href="https:&#x2F;&#x2F;github.com&#x2F;libfuse&#x2F;libfuse&#x2F;tree&#x2F;master&#x2F;example">https:&#x2F;&#x2F;github.com&#x2F;libfuse&#x2F;libfuse&#x2F;tree&#x2F;master&#x2F;example</a><p>- [1] <a href="https:&#x2F;&#x2F;github.com&#x2F;seiferma&#x2F;splitviewfuse">https:&#x2F;&#x2F;github.com&#x2F;seiferma&#x2F;splitviewfuse</a><p>- [2] <a href="https:&#x2F;&#x2F;github.com&#x2F;UNFmontreal&#x2F;zfs_fuse_snapshot">https:&#x2F;&#x2F;github.com&#x2F;UNFmontreal&#x2F;zfs_fuse_snapshot</a><p>- [3] <a href="https:&#x2F;&#x2F;github.com&#x2F;FS-make-simple&#x2F;fusecompress">https:&#x2F;&#x2F;github.com&#x2F;FS-make-simple&#x2F;fusecompress</a><p>- [4] <a href="https:&#x2F;&#x2F;github.com&#x2F;google&#x2F;fuse-archive">https:&#x2F;&#x2F;github.com&#x2F;google&#x2F;fuse-archive</a><p>- [5] <a href="https:&#x2F;&#x2F;github.com&#x2F;mxmlnkn&#x2F;ratarmount">https:&#x2F;&#x2F;github.com&#x2F;mxmlnkn&#x2F;ratarmount</a></div><br/><div id="41815240" class="c"><input type="checkbox" id="c-41815240" checked=""/><div class="controls bullet"><span class="by">craftkiller</span><span>|</span><a href="#41813527">parent</a><span>|</span><a href="#41816230">next</a><span>|</span><label class="collapse" for="c-41815240">[-]</label><label class="expand" for="c-41815240">[2 more]</label></div><br/><div class="children"><div class="content">While [2] might be a good code example, this functionality is already built into ZFS. At the mountpoint of every dataset is a hidden &quot;.zfs&quot; folder that doesn&#x27;t show up, even on a `ls -A`. You just have to believe its there and cd into it. Under that is a &quot;snapshot&quot; folder, and inside that is a folder for each snapshot of that dataset. Those folders contain the files in the snapshot.<p>So for example, &#x2F;etc&#x2F;hosts from my snapshot zrepl_20241011_010143_000 would be at &#x2F;.zfs&#x2F;snapshot&#x2F;zrepl_20241011_010143_000&#x2F;etc&#x2F;hosts<p>If you don&#x27;t like the magic hidden nature of it, you can even configure it to behave like a normal folder with `zfs set snapdir=visible &lt;dataset&gt;`</div><br/><div id="41816603" class="c"><input type="checkbox" id="c-41816603" checked=""/><div class="controls bullet"><span class="by">dsp_person</span><span>|</span><a href="#41813527">root</a><span>|</span><a href="#41815240">parent</a><span>|</span><a href="#41816230">next</a><span>|</span><label class="collapse" for="c-41816603">[-]</label><label class="expand" for="c-41816603">[1 more]</label></div><br/><div class="children"><div class="content">What [2] is doing is exposing the raw send stream as a file, not what the contents of the hidden .zfs folder contains.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;UNFmontreal&#x2F;zfs_fuse_snapshot&#x2F;blob&#x2F;64b17be54601a775be17c99fcfe20fcac91a6567&#x2F;zfs_fuse_snapshot.py#L65">https:&#x2F;&#x2F;github.com&#x2F;UNFmontreal&#x2F;zfs_fuse_snapshot&#x2F;blob&#x2F;64b17b...</a></div><br/></div></div></div></div><div id="41816230" class="c"><input type="checkbox" id="c-41816230" checked=""/><div class="controls bullet"><span class="by">j45</span><span>|</span><a href="#41813527">parent</a><span>|</span><a href="#41815240">prev</a><span>|</span><a href="#41813473">next</a><span>|</span><label class="collapse" for="c-41816230">[-]</label><label class="expand" for="c-41816230">[3 more]</label></div><br/><div class="children"><div class="content">I was just thinking about Fuse the other day for a project to get around case sensitivity in linux for a use case.<p>Appreciate these links.  I&#x27;m a little rusty on it, if anyone has any Fuse tutorials or guides they found helpful, happy to receive.</div><br/><div id="41816396" class="c"><input type="checkbox" id="c-41816396" checked=""/><div class="controls bullet"><span class="by">giis</span><span>|</span><a href="#41813527">root</a><span>|</span><a href="#41816230">parent</a><span>|</span><a href="#41816568">next</a><span>|</span><label class="collapse" for="c-41816396">[-]</label><label class="expand" for="c-41816396">[1 more]</label></div><br/><div class="children"><div class="content">If you have recent kernel version and using ext4, case insensitivity for specific directory can be enabled using casefold feature. See <a href="https:&#x2F;&#x2F;unix.stackexchange.com&#x2F;questions&#x2F;558977&#x2F;how-to-enable-new-in-kernel-5-2-case-insensitivity-for-ext4-on-a-given-directory" rel="nofollow">https:&#x2F;&#x2F;unix.stackexchange.com&#x2F;questions&#x2F;558977&#x2F;how-to-enabl...</a></div><br/></div></div><div id="41816568" class="c"><input type="checkbox" id="c-41816568" checked=""/><div class="controls bullet"><span class="by">RunningDroid</span><span>|</span><a href="#41813527">root</a><span>|</span><a href="#41816230">parent</a><span>|</span><a href="#41816396">prev</a><span>|</span><a href="#41813473">next</a><span>|</span><label class="collapse" for="c-41816568">[-]</label><label class="expand" for="c-41816568">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I was just thinking about Fuse the other day for a project to get around case sensitivity in linux for a use case.<p>You should give ciopfs* a shot, it&#x27;s worked well enough for my use case (playing games indirectly based on nwjs)<p>*<a href="https:&#x2F;&#x2F;www.brain-dump.org&#x2F;projects&#x2F;ciopfs&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.brain-dump.org&#x2F;projects&#x2F;ciopfs&#x2F;</a></div><br/></div></div></div></div></div></div><div id="41813473" class="c"><input type="checkbox" id="c-41813473" checked=""/><div class="controls bullet"><span class="by">aargh_aargh</span><span>|</span><a href="#41813527">prev</a><span>|</span><a href="#41812623">next</a><span>|</span><label class="collapse" for="c-41813473">[-]</label><label class="expand" for="c-41813473">[8 more]</label></div><br/><div class="children"><div class="content">Just wanted to throw out there that although I&#x27;m a fan of FUSE, it&#x27;s not the only option. I&#x27;ve had fun implementing a virtual filesystem via the 9p protocol not too long ago.<p>IIRC, I used py9p and the python experience was much nicer than fuse-python. You can mount a 9p service via FUSE (9pfuse) if you want. I just used the kernel v9fs client. If you&#x27;re just looking to pass a filesystem through the network, I think I used the diod 9p server.<p>Overall, it&#x27;s a nice little ecosystem to explore.</div><br/><div id="41814610" class="c"><input type="checkbox" id="c-41814610" checked=""/><div class="controls bullet"><span class="by">packetlost</span><span>|</span><a href="#41813473">parent</a><span>|</span><a href="#41816173">next</a><span>|</span><label class="collapse" for="c-41814610">[-]</label><label class="expand" for="c-41814610">[4 more]</label></div><br/><div class="children"><div class="content">9p is such a great little protocol. diod[0] has a good amount of documentation on the protocol itself, but it&#x27;s pretty simple.<p>I have some notes here [1], but it&#x27;s mostly just linking to primary sources. FUSE is great, but 9P is more general and has high quality implementations all over the place, even in Windows!<p>One thing I&#x27;m not so sure about is the performance properties of 9p. I&#x27;ve seen some places indicate it&#x27;s rather slow, but nothing definitive. Does anyone have any benchmarks or info on that?<p>[0]: <a href="https:&#x2F;&#x2F;github.com&#x2F;chaos&#x2F;diod&#x2F;blob&#x2F;master&#x2F;protocol.md">https:&#x2F;&#x2F;github.com&#x2F;chaos&#x2F;diod&#x2F;blob&#x2F;master&#x2F;protocol.md</a>
[1]: <a href="https:&#x2F;&#x2F;athenaeum.wiki&#x2F;Zettelkasten&#x2F;9p" rel="nofollow">https:&#x2F;&#x2F;athenaeum.wiki&#x2F;Zettelkasten&#x2F;9p</a></div><br/><div id="41817245" class="c"><input type="checkbox" id="c-41817245" checked=""/><div class="controls bullet"><span class="by">magicalhippo</span><span>|</span><a href="#41813473">root</a><span>|</span><a href="#41814610">parent</a><span>|</span><a href="#41814681">next</a><span>|</span><label class="collapse" for="c-41817245">[-]</label><label class="expand" for="c-41817245">[1 more]</label></div><br/><div class="children"><div class="content">I looked at 9p as a NFS&#x2F;SMB replacement some time ago for a project, and benchmarks seems scarce. I did find this[1] set of benchmarks but it&#x27;s from 2005.<p>I also found this[2] from 2016 which points out some performance barriers, and it doesn&#x27;t sound like an easy fix without some new extensions.<p>However there&#x27;s also this[3] post from 2022 about some patches suggesting a 10x improvement in Linux 9p performance.<p>Would be interesting to see how things are these days.<p>[1]: <a href="https:&#x2F;&#x2F;www.usenix.org&#x2F;legacy&#x2F;events&#x2F;usenix05&#x2F;tech&#x2F;freenix&#x2F;full_papers&#x2F;hensbergen&#x2F;hensbergen_html&#x2F;index.html" rel="nofollow">https:&#x2F;&#x2F;www.usenix.org&#x2F;legacy&#x2F;events&#x2F;usenix05&#x2F;tech&#x2F;freenix&#x2F;f...</a><p>[2]: <a href="https:&#x2F;&#x2F;github.com&#x2F;Harvey-OS&#x2F;harvey&#x2F;issues&#x2F;18">https:&#x2F;&#x2F;github.com&#x2F;Harvey-OS&#x2F;harvey&#x2F;issues&#x2F;18</a><p>[3]: <a href="https:&#x2F;&#x2F;www.phoronix.com&#x2F;news&#x2F;Linux-9p-10x-Performance" rel="nofollow">https:&#x2F;&#x2F;www.phoronix.com&#x2F;news&#x2F;Linux-9p-10x-Performance</a></div><br/></div></div><div id="41814681" class="c"><input type="checkbox" id="c-41814681" checked=""/><div class="controls bullet"><span class="by">mananaysiempre</span><span>|</span><a href="#41813473">root</a><span>|</span><a href="#41814610">parent</a><span>|</span><a href="#41817245">prev</a><span>|</span><a href="#41816173">next</a><span>|</span><label class="collapse" for="c-41814681">[-]</label><label class="expand" for="c-41814681">[2 more]</label></div><br/><div class="children"><div class="content">&gt; 9P [...] has high quality implementation[...] in Windows<p>Do you know if it’s possible to mount one’s own 9P servers under Windows? I seem to remember a comment from a Microsoft employee on GitHub something-or-other that said that capability is private to WSL2, but I can’t find it right now.</div><br/><div id="41815426" class="c"><input type="checkbox" id="c-41815426" checked=""/><div class="controls bullet"><span class="by">packetlost</span><span>|</span><a href="#41813473">root</a><span>|</span><a href="#41814681">parent</a><span>|</span><a href="#41816173">next</a><span>|</span><label class="collapse" for="c-41815426">[-]</label><label class="expand" for="c-41815426">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not sure if you can mount a 9P filesystem from windows normally, I&#x27;ll try. I&#x27;m not seeing any resources online about it either.</div><br/></div></div></div></div></div></div><div id="41816173" class="c"><input type="checkbox" id="c-41816173" checked=""/><div class="controls bullet"><span class="by">Twirrim</span><span>|</span><a href="#41813473">parent</a><span>|</span><a href="#41814610">prev</a><span>|</span><a href="#41814311">next</a><span>|</span><label class="collapse" for="c-41816173">[-]</label><label class="expand" for="c-41816173">[1 more]</label></div><br/><div class="children"><div class="content">I was experimenting about 18 months ago with FUSE in front of an HTTPS URL, essentially a large file I wanted to be able to random read as if it was local, without downloading it first.<p>One of the things I ran in to that made it painful, was that the block sizes for FUSE were really small, it made for a lot of latency and churn of HTTP calls to the back end that ended up needing some fairly complicated caching&#x2F;pre-reading logic to handle.  Kernel read-ahead logic never seemed to kick in (and I didn&#x27;t do any investigation in to that at the time, other than not finding any particular way to induce it)</div><br/></div></div><div id="41814311" class="c"><input type="checkbox" id="c-41814311" checked=""/><div class="controls bullet"><span class="by">hathawsh</span><span>|</span><a href="#41813473">parent</a><span>|</span><a href="#41816173">prev</a><span>|</span><a href="#41816397">next</a><span>|</span><label class="collapse" for="c-41814311">[-]</label><label class="expand" for="c-41814311">[1 more]</label></div><br/><div class="children"><div class="content">It looks like py9p was last released in 2013 and it&#x27;s still marked as &quot;beta&quot;. Cool project though!</div><br/></div></div><div id="41816397" class="c"><input type="checkbox" id="c-41816397" checked=""/><div class="controls bullet"><span class="by">VMtest</span><span>|</span><a href="#41813473">parent</a><span>|</span><a href="#41814311">prev</a><span>|</span><a href="#41812623">next</a><span>|</span><label class="collapse" for="c-41816397">[-]</label><label class="expand" for="c-41816397">[1 more]</label></div><br/><div class="children"><div class="content">to note here is that fuse(virtiofs) can be used for better performance in qemu than 9p(virtio-9p)<p>can read the faq in <a href="https:&#x2F;&#x2F;virtio-fs.gitlab.io" rel="nofollow">https:&#x2F;&#x2F;virtio-fs.gitlab.io</a></div><br/></div></div></div></div><div id="41812623" class="c"><input type="checkbox" id="c-41812623" checked=""/><div class="controls bullet"><span class="by">iamjackg</span><span>|</span><a href="#41813473">prev</a><span>|</span><a href="#41817223">next</a><span>|</span><label class="collapse" for="c-41812623">[-]</label><label class="expand" for="c-41812623">[11 more]</label></div><br/><div class="children"><div class="content">I wish I had known about this a month ago, when I had to go through the exact same process!<p>In a desperate attempt to find a less frustrating way to interact with Jira, I had the silly idea of starting a jira-as-filesystem project that uses our internal issue categorization to build a tree: directories represent issues, with files representing issue fields and subdirectories for linked issues. I ended up choosing fuse-python.<p>I haven&#x27;t worked on it in a minute, but I was already bumping into issues (pun not intended) with the abstraction: using just the issue ID as directory name makes automation easier, but it makes it hard for humans to browse the tree, since a `ls` would just show you a bunch of inscrutable IDs. I ended up adding a parallel `&lt;issue-type&gt;-with-summary` directory type where the slugified summary is appended to each issue ID.</div><br/><div id="41813127" class="c"><input type="checkbox" id="c-41813127" checked=""/><div class="controls bullet"><span class="by">maicro</span><span>|</span><a href="#41812623">parent</a><span>|</span><a href="#41814209">next</a><span>|</span><label class="collapse" for="c-41813127">[-]</label><label class="expand" for="c-41813127">[5 more]</label></div><br/><div class="children"><div class="content">Hmm, I&#x27;m not saying it&#x27;s a good idea, but what about a daemon that keeps a symlinked version of the entire jira environment up to date?  So you have one jira-as-filesystem that&#x27;s the raw files, but then for human consumption&#x2F;interaction, you have a tree of symlinks, including multiple links to the same file wherever it&#x27;s relevant.  Might be adding more layers than needed, based on my lack of understanding, but might technically solve the (current&#x2F;stated) abstraction issue.</div><br/><div id="41813206" class="c"><input type="checkbox" id="c-41813206" checked=""/><div class="controls bullet"><span class="by">iamjackg</span><span>|</span><a href="#41812623">root</a><span>|</span><a href="#41813127">parent</a><span>|</span><a href="#41813912">next</a><span>|</span><label class="collapse" for="c-41813206">[-]</label><label class="expand" for="c-41813206">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s <i>sort of</i> what I&#x27;m doing behind the scenes, because I keep one global list of downloaded issues (they&#x27;re lazily loaded when you access them) and then the folders are really only &quot;views&quot; into the downloaded issues. Representing identical ones across trees as symlinks is a fantastic idea though, I can&#x27;t believe I didn&#x27;t think of that! Thanks for the inspiration.</div><br/></div></div><div id="41813912" class="c"><input type="checkbox" id="c-41813912" checked=""/><div class="controls bullet"><span class="by">xg15</span><span>|</span><a href="#41812623">root</a><span>|</span><a href="#41813127">parent</a><span>|</span><a href="#41813206">prev</a><span>|</span><a href="#41813353">next</a><span>|</span><label class="collapse" for="c-41813912">[-]</label><label class="expand" for="c-41813912">[1 more]</label></div><br/><div class="children"><div class="content">Would you even need a daemon for that? That sounds as if the FS could just generate the symlinks on-the-fly in the same way that it generates the folders.<p>(Unless symlinks are somehow special - but at least both &#x2F;dev and &#x2F;proc also provide symlinks and to my knowledge they don&#x27;t have any actual storage behind them, so it should be possible, I think)</div><br/></div></div><div id="41813353" class="c"><input type="checkbox" id="c-41813353" checked=""/><div class="controls bullet"><span class="by">inferiorhuman</span><span>|</span><a href="#41812623">root</a><span>|</span><a href="#41813127">parent</a><span>|</span><a href="#41813912">prev</a><span>|</span><a href="#41814076">next</a><span>|</span><label class="collapse" for="c-41813353">[-]</label><label class="expand" for="c-41813353">[1 more]</label></div><br/><div class="children"><div class="content">May as well just implement that in the FUSE driver.</div><br/></div></div><div id="41814076" class="c"><input type="checkbox" id="c-41814076" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#41812623">root</a><span>|</span><a href="#41813127">parent</a><span>|</span><a href="#41813353">prev</a><span>|</span><a href="#41814209">next</a><span>|</span><label class="collapse" for="c-41814076">[-]</label><label class="expand" for="c-41814076">[1 more]</label></div><br/><div class="children"><div class="content">State syncing is always harder than state reading</div><br/></div></div></div></div><div id="41814209" class="c"><input type="checkbox" id="c-41814209" checked=""/><div class="controls bullet"><span class="by">jrms</span><span>|</span><a href="#41812623">parent</a><span>|</span><a href="#41813127">prev</a><span>|</span><a href="#41813367">next</a><span>|</span><label class="collapse" for="c-41814209">[-]</label><label class="expand" for="c-41814209">[2 more]</label></div><br/><div class="children"><div class="content">Why not just 1234-human-sense? You have both type of info there and it&#x27;s easy to parse too I think.</div><br/><div id="41815622" class="c"><input type="checkbox" id="c-41815622" checked=""/><div class="controls bullet"><span class="by">iamjackg</span><span>|</span><a href="#41812623">root</a><span>|</span><a href="#41814209">parent</a><span>|</span><a href="#41813367">next</a><span>|</span><label class="collapse" for="c-41815622">[-]</label><label class="expand" for="c-41815622">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, sorry, I think I was a bit confusing: that&#x27;s exactly what I&#x27;m doing. For example, an Epic folder is laid out like this:<p><pre><code>    EPIC-123
    ├─── user-stories
    │    └─── STORY-234
    └─── user-stories-with-summary
         └─── STORY-234-add-support-for-feature-a</code></pre></div><br/></div></div></div></div><div id="41813367" class="c"><input type="checkbox" id="c-41813367" checked=""/><div class="controls bullet"><span class="by">renewiltord</span><span>|</span><a href="#41812623">parent</a><span>|</span><a href="#41814209">prev</a><span>|</span><a href="#41817223">next</a><span>|</span><label class="collapse" for="c-41813367">[-]</label><label class="expand" for="c-41813367">[3 more]</label></div><br/><div class="children"><div class="content">Referencing the same two ways is normal in Unix fs. On a modern Linux you will see disks referenced by block device and UUID. I think your approach is good and consistent with expectations.<p>Though I, personally, would not use it as JIRA is complicated enough for me.</div><br/><div id="41815595" class="c"><input type="checkbox" id="c-41815595" checked=""/><div class="controls bullet"><span class="by">iamjackg</span><span>|</span><a href="#41812623">root</a><span>|</span><a href="#41813367">parent</a><span>|</span><a href="#41814532">next</a><span>|</span><label class="collapse" for="c-41815595">[-]</label><label class="expand" for="c-41815595">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, the &#x2F;dev&#x2F;disk&#x2F;by-uuid paradigm was actually the inspiration for adding the second folder!</div><br/></div></div></div></div></div></div><div id="41817223" class="c"><input type="checkbox" id="c-41817223" checked=""/><div class="controls bullet"><span class="by">JelteF</span><span>|</span><a href="#41812623">prev</a><span>|</span><a href="#41815078">next</a><span>|</span><label class="collapse" for="c-41817223">[-]</label><label class="expand" for="c-41817223">[2 more]</label></div><br/><div class="children"><div class="content">Quite some years ago I created a Python FUSE filesystem[1] to to interact with dokuwiki (a wiki system).<p>It&#x27;s built on hde llfuse[2]. But that required implementing a bunch of low level APIs that were not really related to dokuwiki. So I created easyfuse[3][4] as a wrapper, which implemented the things that were unrelated the dokuwiki implementation. If you&#x27;re interested it in building a FUSE system it might be worth looking at.<p>[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;JelteF&#x2F;dokuwikifuse">https:&#x2F;&#x2F;github.com&#x2F;JelteF&#x2F;dokuwikifuse</a>
[2]: <a href="https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;llfuse&#x2F;" rel="nofollow">https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;llfuse&#x2F;</a>
[3]: <a href="https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;easyfuse&#x2F;" rel="nofollow">https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;easyfuse&#x2F;</a>
[4]: <a href="https:&#x2F;&#x2F;github.com&#x2F;JelteF&#x2F;easyfuse">https:&#x2F;&#x2F;github.com&#x2F;JelteF&#x2F;easyfuse</a></div><br/><div id="41817366" class="c"><input type="checkbox" id="c-41817366" checked=""/><div class="controls bullet"><span class="by">virgoerns</span><span>|</span><a href="#41817223">parent</a><span>|</span><a href="#41815078">next</a><span>|</span><label class="collapse" for="c-41817366">[-]</label><label class="expand" for="c-41817366">[1 more]</label></div><br/><div class="children"><div class="content">Can you tell what&#x27;s the usecase for creating FUSE for dokuwiki? Basically, dokuwiki is just a bunch of text files so wouldn&#x27;t it be simpler and more efficient to e.g. mount them as NFS or share via Dropbox&#x2F;Syncthing?</div><br/></div></div></div></div><div id="41815078" class="c"><input type="checkbox" id="c-41815078" checked=""/><div class="controls bullet"><span class="by">mcoliver</span><span>|</span><a href="#41817223">prev</a><span>|</span><a href="#41813001">next</a><span>|</span><label class="collapse" for="c-41815078">[-]</label><label class="expand" for="c-41815078">[1 more]</label></div><br/><div class="children"><div class="content">So many fuse mount options out there with varying tradeoffs, performance, and features (s3fs, goofys, seaweed, minio, Google drive, etc..).  JuiceFS is pretty interesting for doing things like mounting an object store and accessing it via posix with all the metadata you would expect on a traditional filesystem. 
 <a href="https:&#x2F;&#x2F;juicefs.com" rel="nofollow">https:&#x2F;&#x2F;juicefs.com</a></div><br/></div></div><div id="41813001" class="c"><input type="checkbox" id="c-41813001" checked=""/><div class="controls bullet"><span class="by">memset</span><span>|</span><a href="#41815078">prev</a><span>|</span><a href="#41815565">next</a><span>|</span><label class="collapse" for="c-41813001">[-]</label><label class="expand" for="c-41813001">[4 more]</label></div><br/><div class="children"><div class="content">Nice!<p>Adjacent question: lately I’ve been seeing people implement NFS base filesystems since that is a more widely supported protocol. I think rclone does this for Mac. Is there a guide, or even a comparison, for this approach?</div><br/><div id="41815537" class="c"><input type="checkbox" id="c-41815537" checked=""/><div class="controls bullet"><span class="by">mbirth</span><span>|</span><a href="#41813001">parent</a><span>|</span><a href="#41813153">next</a><span>|</span><label class="collapse" for="c-41815537">[-]</label><label class="expand" for="c-41815537">[1 more]</label></div><br/><div class="children"><div class="content">Fun fact: Now that recent macOS versions require you to disable security features to install macFUSE, there’s the awesome fuse-t. It works as a drop-in replacement, doesn’t need the kext and will open up an NFS server in the background and mount that using macOS features. Performance is pretty good, too.</div><br/></div></div><div id="41813153" class="c"><input type="checkbox" id="c-41813153" checked=""/><div class="controls bullet"><span class="by">formerly_proven</span><span>|</span><a href="#41813001">parent</a><span>|</span><a href="#41815537">prev</a><span>|</span><a href="#41815565">next</a><span>|</span><label class="collapse" for="c-41813153">[-]</label><label class="expand" for="c-41813153">[2 more]</label></div><br/><div class="children"><div class="content">Rust sample: <a href="https:&#x2F;&#x2F;github.com&#x2F;xetdata&#x2F;nfsserve">https:&#x2F;&#x2F;github.com&#x2F;xetdata&#x2F;nfsserve</a></div><br/><div id="41813365" class="c"><input type="checkbox" id="c-41813365" checked=""/><div class="controls bullet"><span class="by">inferiorhuman</span><span>|</span><a href="#41813001">root</a><span>|</span><a href="#41813153">parent</a><span>|</span><a href="#41815565">next</a><span>|</span><label class="collapse" for="c-41813365">[-]</label><label class="expand" for="c-41813365">[1 more]</label></div><br/><div class="children"><div class="content">At least as far as Rust is concerned I preferred dealing with FUSE because I didn&#x27;t have to wrestle with async (or NFS mounts).<p><a href="https:&#x2F;&#x2F;crates.io&#x2F;crates&#x2F;fuser" rel="nofollow">https:&#x2F;&#x2F;crates.io&#x2F;crates&#x2F;fuser</a></div><br/></div></div></div></div></div></div><div id="41815565" class="c"><input type="checkbox" id="c-41815565" checked=""/><div class="controls bullet"><span class="by">peterldowns</span><span>|</span><a href="#41813001">prev</a><span>|</span><a href="#41816067">next</a><span>|</span><label class="collapse" for="c-41815565">[-]</label><label class="expand" for="c-41815565">[1 more]</label></div><br/><div class="children"><div class="content">If you&#x27;re interested in seeing what a finished product looks like, check out azuline&#x2F;rosé — a music manager with a virtual filesystem. Really good codebase with a lot of comments and explanations and types and tests, which should make it easy to learn from.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;azuline&#x2F;rose">https:&#x2F;&#x2F;github.com&#x2F;azuline&#x2F;rose</a></div><br/></div></div><div id="41816067" class="c"><input type="checkbox" id="c-41816067" checked=""/><div class="controls bullet"><span class="by">kapnap</span><span>|</span><a href="#41815565">prev</a><span>|</span><a href="#41812796">next</a><span>|</span><label class="collapse" for="c-41816067">[-]</label><label class="expand" for="c-41816067">[1 more]</label></div><br/><div class="children"><div class="content">Off topic but whenever I see a blog with some 90s&#x2F;2000s vibes, I always go to their first page of posts.  Never disappoints to sneak a peak into that time capsule - including gwolf.org!</div><br/></div></div><div id="41812796" class="c"><input type="checkbox" id="c-41812796" checked=""/><div class="controls bullet"><span class="by">alkh</span><span>|</span><a href="#41816067">prev</a><span>|</span><a href="#41816574">next</a><span>|</span><label class="collapse" for="c-41812796">[-]</label><label class="expand" for="c-41812796">[5 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve recently discovered sshfs and learned about needing to have FUSE as a dependency for OS X, which spiked by interest. The code looks very clean and easy to understand, so thanks for that!
Is there any guide&#x2F;course you would recommend for the introduction to FUSE? It looks like all you have is to provide implementations to certains functions your filesystem will use but it&#x27;s hard without knowing the details(ex. I wouldn&#x27;t know I had to implement readdir without your code, and so on)</div><br/><div id="41817642" class="c"><input type="checkbox" id="c-41817642" checked=""/><div class="controls bullet"><span class="by">jiggunjer</span><span>|</span><a href="#41812796">parent</a><span>|</span><a href="#41813002">next</a><span>|</span><label class="collapse" for="c-41817642">[-]</label><label class="expand" for="c-41817642">[1 more]</label></div><br/><div class="children"><div class="content">The API documentation can be referenced at <a href="https:&#x2F;&#x2F;github.com&#x2F;libfuse&#x2F;python-fuse">https:&#x2F;&#x2F;github.com&#x2F;libfuse&#x2F;python-fuse</a><p>It doesn&#x27;t seem to be a complex interfac</div><br/></div></div><div id="41813002" class="c"><input type="checkbox" id="c-41813002" checked=""/><div class="controls bullet"><span class="by">pkaye</span><span>|</span><a href="#41812796">parent</a><span>|</span><a href="#41817642">prev</a><span>|</span><a href="#41816574">next</a><span>|</span><label class="collapse" for="c-41813002">[-]</label><label class="expand" for="c-41813002">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve used sshfs in the past and I know the original authors stopped maintaining it though others took over. I did find the network error handling wasn&#x27;t the greatest. Like it would unmount the fuse mount due to network error and I&#x27;d be writing files to the local mount directory silently until space filled up. Perhaps its a Linux specific issue or I&#x27;ve used the wrong options though.</div><br/><div id="41813279" class="c"><input type="checkbox" id="c-41813279" checked=""/><div class="controls bullet"><span class="by">alkh</span><span>|</span><a href="#41812796">root</a><span>|</span><a href="#41813002">parent</a><span>|</span><a href="#41815214">next</a><span>|</span><label class="collapse" for="c-41813279">[-]</label><label class="expand" for="c-41813279">[1 more]</label></div><br/><div class="children"><div class="content">To be honest, I knew about the speed limitations of sshfs already, so I typically use rsync to work with large files. This way, I wouldn&#x27;t write the data locally even if the connection fails. I&#x27;ve checked the github repo and it looks like there are a number of issues related to network timeout that hasn&#x27;t been addressed for a long time[1]. However, I mostly used it on OS X, so my experience might be different from yours
Thanks for the info as well, I was under the impression sshfs was under active development (: 
[1]<a href="https:&#x2F;&#x2F;github.com&#x2F;libfuse&#x2F;sshfs&#x2F;issues&#x2F;77">https:&#x2F;&#x2F;github.com&#x2F;libfuse&#x2F;sshfs&#x2F;issues&#x2F;77</a></div><br/></div></div><div id="41815214" class="c"><input type="checkbox" id="c-41815214" checked=""/><div class="controls bullet"><span class="by">beeboobaa3</span><span>|</span><a href="#41812796">root</a><span>|</span><a href="#41813002">parent</a><span>|</span><a href="#41813279">prev</a><span>|</span><a href="#41816574">next</a><span>|</span><label class="collapse" for="c-41815214">[-]</label><label class="expand" for="c-41815214">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I&#x27;d be writing files to the local mount directory silently until space filled up<p>that&#x27;s why you `chattr +i` the mountpoint</div><br/></div></div></div></div></div></div><div id="41816574" class="c"><input type="checkbox" id="c-41816574" checked=""/><div class="controls bullet"><span class="by">sweeter</span><span>|</span><a href="#41812796">prev</a><span>|</span><a href="#41814825">next</a><span>|</span><label class="collapse" for="c-41816574">[-]</label><label class="expand" for="c-41816574">[1 more]</label></div><br/><div class="children"><div class="content">I did something similar and it was a really fun project! You can easily make a Google Drive FUSE fs, or something simple like an in-memory fs, an encrypted fs, etc... Its very interesting and a lot simpler than one would imagine. You basically fulfill an interface and FUSE isn&#x27;t really aware of the implementation. Its more of a &quot;contract&quot; that X function returns a given result. You can implement a FUSE fs for a ton of cool stuff.</div><br/></div></div><div id="41814825" class="c"><input type="checkbox" id="c-41814825" checked=""/><div class="controls bullet"><span class="by">rnd0</span><span>|</span><a href="#41816574">prev</a><span>|</span><a href="#41812556">next</a><span>|</span><label class="collapse" for="c-41814825">[-]</label><label class="expand" for="c-41814825">[5 more]</label></div><br/><div class="children"><div class="content">An user-space filesystem running in an interpreted language? Is that as bad as I think it is?</div><br/><div id="41815208" class="c"><input type="checkbox" id="c-41815208" checked=""/><div class="controls bullet"><span class="by">dsp_person</span><span>|</span><a href="#41814825">parent</a><span>|</span><a href="#41814894">next</a><span>|</span><label class="collapse" for="c-41815208">[-]</label><label class="expand" for="c-41815208">[1 more]</label></div><br/><div class="children"><div class="content">Imagine you want to glue together something to use with a syncing tool. ~100 lines of python can turn data from one format into a presented set of files. The application doesn&#x27;t have to be a general purpose filesystem.<p>e.g. <a href="https:&#x2F;&#x2F;github.com&#x2F;UNFmontreal&#x2F;zfs_fuse_snapshot&#x2F;blob&#x2F;master&#x2F;zfs_fuse_snapshot.py">https:&#x2F;&#x2F;github.com&#x2F;UNFmontreal&#x2F;zfs_fuse_snapshot&#x2F;blob&#x2F;master...</a></div><br/></div></div><div id="41814894" class="c"><input type="checkbox" id="c-41814894" checked=""/><div class="controls bullet"><span class="by">vineyardmike</span><span>|</span><a href="#41814825">parent</a><span>|</span><a href="#41815208">prev</a><span>|</span><a href="#41815328">next</a><span>|</span><label class="collapse" for="c-41814894">[-]</label><label class="expand" for="c-41814894">[2 more]</label></div><br/><div class="children"><div class="content">They’re a teacher. It’s learning material.</div><br/><div id="41816434" class="c"><input type="checkbox" id="c-41816434" checked=""/><div class="controls bullet"><span class="by">askvictor</span><span>|</span><a href="#41814825">root</a><span>|</span><a href="#41814894">parent</a><span>|</span><a href="#41815328">next</a><span>|</span><label class="collapse" for="c-41816434">[-]</label><label class="expand" for="c-41816434">[1 more]</label></div><br/><div class="children"><div class="content">A operating systems class I was once a lab assistant for, we implemented the key parts of an operating system in Python. Scheduler, Filesystem, Memory Management. I think it ended up being more confusing than not, but I appreciated where it could go.</div><br/></div></div></div></div><div id="41815328" class="c"><input type="checkbox" id="c-41815328" checked=""/><div class="controls bullet"><span class="by">heavyset_go</span><span>|</span><a href="#41814825">parent</a><span>|</span><a href="#41814894">prev</a><span>|</span><a href="#41812556">next</a><span>|</span><label class="collapse" for="c-41815328">[-]</label><label class="expand" for="c-41815328">[1 more]</label></div><br/><div class="children"><div class="content">No, you will spend the majority of your time waiting on IO.</div><br/></div></div></div></div></div></div></div></div></div></body></html>