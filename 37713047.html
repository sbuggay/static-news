<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1696064459061" as="style"/><link rel="stylesheet" href="styles.css?v=1696064459061"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://mariusbancila.ro/blog/2023/08/17/how-to-convert-an-enum-to-string-in-cpp/">How to convert an enum to string in C++</a> <span class="domain">(<a href="https://mariusbancila.ro">mariusbancila.ro</a>)</span></div><div class="subtext"><span>todsacerdoti</span> | <span>14 comments</span></div><br/><div><div id="37713765" class="c"><input type="checkbox" id="c-37713765" checked=""/><div class="controls bullet"><span class="by">wiseowise</span><span>|</span><a href="#37713725">next</a><span>|</span><label class="collapse" for="c-37713765">[-]</label><label class="expand" for="c-37713765">[1 more]</label></div><br/><div class="children"><div class="content">It is astonishing that such simple and essential feature is still not part of the language.</div><br/></div></div><div id="37713725" class="c"><input type="checkbox" id="c-37713725" checked=""/><div class="controls bullet"><span class="by">ogoffart</span><span>|</span><a href="#37713765">prev</a><span>|</span><a href="#37713560">next</a><span>|</span><label class="collapse" for="c-37713725">[-]</label><label class="expand" for="c-37713725">[1 more]</label></div><br/><div class="children"><div class="content">This basically parse (at compile time) the __PRETTY_FUNCTION__ or equivalent in a function like<p><pre><code>    template &lt;typename Enum, Enum V&gt; constexpr constexpr_string enum_name() {...}
</code></pre>
For all possible value of V from 0 to 256.<p>This is very compiler-specific as the actual value of __PRETTY_FUNCTION__ is different for each compiler, and even then, not really specified<p>(__PRETTY_FUNCTION__ is a builtin macro that expand to a string literal representing the function, for example &quot;the_namespace::enum_name&lt;day, day::Monday&gt;()&quot;)</div><br/></div></div><div id="37713560" class="c"><input type="checkbox" id="c-37713560" checked=""/><div class="controls bullet"><span class="by">gituliar</span><span>|</span><a href="#37713725">prev</a><span>|</span><a href="#37713524">next</a><span>|</span><label class="collapse" for="c-37713560">[-]</label><label class="expand" for="c-37713560">[1 more]</label></div><br/><div class="children"><div class="content">So far, I&#x27;m happy with this simple solution:<p><pre><code>  enum _ : u8 {
    kMonday,
    kTuesday,
    ...
    kSize
  };

  const std::string toString[kSize] = {
    &quot;Monday&quot;,
    &quot;Tuesday&quot;,
    ...
  }

  auto day = toString[kTuesday];</code></pre></div><br/></div></div><div id="37713524" class="c"><input type="checkbox" id="c-37713524" checked=""/><div class="controls bullet"><span class="by">eclectic29</span><span>|</span><a href="#37713560">prev</a><span>|</span><a href="#37713672">next</a><span>|</span><label class="collapse" for="c-37713524">[-]</label><label class="expand" for="c-37713524">[1 more]</label></div><br/><div class="children"><div class="content">Nit: use &quot;enum class&quot;. See <a href="https:&#x2F;&#x2F;isocpp.org&#x2F;wiki&#x2F;faq&#x2F;cpp11-language-types#enum-class" rel="nofollow noreferrer">https:&#x2F;&#x2F;isocpp.org&#x2F;wiki&#x2F;faq&#x2F;cpp11-language-types#enum-class</a>.</div><br/></div></div><div id="37713672" class="c"><input type="checkbox" id="c-37713672" checked=""/><div class="controls bullet"><span class="by">signa11</span><span>|</span><a href="#37713524">prev</a><span>|</span><a href="#37713668">next</a><span>|</span><label class="collapse" for="c-37713672">[-]</label><label class="expand" for="c-37713672">[6 more]</label></div><br/><div class="children"><div class="content">how about this trivial thing ?<p><pre><code>   enum class days {
           MONDAY = 1,
           TUESDAY = 2,
           ...
   };

   constexpr const char* str_day(days d) {
           switch (d) {
                   case days::MONDAY: return &quot;MONDAY&quot;;
                   case days::TUESDAY: return &quot;TUESDAY&quot;;
                   ...
           }
   }
</code></pre>
maybe just throw in a &#x27;noexcept&#x27; for good measure as well.</div><br/><div id="37713715" class="c"><input type="checkbox" id="c-37713715" checked=""/><div class="controls bullet"><span class="by">cjfd</span><span>|</span><a href="#37713672">parent</a><span>|</span><a href="#37713687">next</a><span>|</span><label class="collapse" for="c-37713715">[-]</label><label class="expand" for="c-37713715">[3 more]</label></div><br/><div class="children"><div class="content">Sure, if you have a few enums with each a few possible values, by all means do this. However, as soon as you get to have, let us say, some more enums that each have a hundred values or so, not only need to serialize them but also need to deserialize, them, also want to loop over all possible enum values and some such requirements one should start thinking about a smarter solution.</div><br/><div id="37713759" class="c"><input type="checkbox" id="c-37713759" checked=""/><div class="controls bullet"><span class="by">signa11</span><span>|</span><a href="#37713672">root</a><span>|</span><a href="#37713715">parent</a><span>|</span><a href="#37713749">next</a><span>|</span><label class="collapse" for="c-37713759">[-]</label><label class="expand" for="c-37713759">[1 more]</label></div><br/><div class="children"><div class="content">language does not really offer a &#x27;loop over all enums&#x27; construct. you can push values into a vector&#x2F;initializer_list&#x2F;...<p>serialization || deserialization of enum values is a different concern.<p>it all depends on your need though, and you can spend as little or as much time as you deem necessary.</div><br/></div></div><div id="37713749" class="c"><input type="checkbox" id="c-37713749" checked=""/><div class="controls bullet"><span class="by">jackieooh</span><span>|</span><a href="#37713672">root</a><span>|</span><a href="#37713715">parent</a><span>|</span><a href="#37713759">prev</a><span>|</span><a href="#37713687">next</a><span>|</span><label class="collapse" for="c-37713749">[-]</label><label class="expand" for="c-37713749">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;d probably write a quick python script to generate a function&#x2F;string table in that case (or I could even do it with a vim macro).</div><br/></div></div></div></div><div id="37713687" class="c"><input type="checkbox" id="c-37713687" checked=""/><div class="controls bullet"><span class="by">mock-possum</span><span>|</span><a href="#37713672">parent</a><span>|</span><a href="#37713715">prev</a><span>|</span><a href="#37713668">next</a><span>|</span><label class="collapse" for="c-37713687">[-]</label><label class="expand" for="c-37713687">[2 more]</label></div><br/><div class="children"><div class="content">That’s hardly DRY though.</div><br/><div id="37713743" class="c"><input type="checkbox" id="c-37713743" checked=""/><div class="controls bullet"><span class="by">signa11</span><span>|</span><a href="#37713672">root</a><span>|</span><a href="#37713687">parent</a><span>|</span><a href="#37713668">next</a><span>|</span><label class="collapse" for="c-37713743">[-]</label><label class="expand" for="c-37713743">[1 more]</label></div><br/><div class="children"><div class="content">sure, can you propose an alternate approach ?</div><br/></div></div></div></div></div></div><div id="37713668" class="c"><input type="checkbox" id="c-37713668" checked=""/><div class="controls bullet"><span class="by">kajaktum</span><span>|</span><a href="#37713672">prev</a><span>|</span><a href="#37713518">next</a><span>|</span><label class="collapse" for="c-37713668">[-]</label><label class="expand" for="c-37713668">[2 more]</label></div><br/><div class="children"><div class="content">Just ... write... the function. What is so bad about that? Sure, if you day job is to literally write enums all day then automating that process is worthwhile. But how often do you do this? How much harder is it to just verify the stupid simple function version going through macros hell? Why is this so commonplace in software? I don&#x27;t see a &#x2F;s at the end of the blog so the author is unironically advocating for this practice. Am I wrong?</div><br/></div></div></div></div></div></div></div></body></html>