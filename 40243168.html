<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1714726863964" as="style"/><link rel="stylesheet" href="styles.css?v=1714726863964"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://alexgarcia.xyz/blog/2024/building-new-vector-search-sqlite/index.html">I&#x27;m writing a new vector search SQLite Extension</a> <span class="domain">(<a href="https://alexgarcia.xyz">alexgarcia.xyz</a>)</span></div><div class="subtext"><span>sebg</span> | <span>44 comments</span></div><br/><div><div id="40244002" class="c"><input type="checkbox" id="c-40244002" checked=""/><div class="controls bullet"><span class="by">alexgarcia-xyz</span><span>|</span><a href="#40243906">next</a><span>|</span><label class="collapse" for="c-40244002">[-]</label><label class="expand" for="c-40244002">[16 more]</label></div><br/><div class="children"><div class="content">Author here — happy to answer any questions! This is more of a &quot;I&#x27;m working on a new project&quot; rather than an official release, the extension itself is still a work-in-progress. A link to the project: <a href="https:&#x2F;&#x2F;github.com&#x2F;asg017&#x2F;sqlite-vec">https:&#x2F;&#x2F;github.com&#x2F;asg017&#x2F;sqlite-vec</a><p>I have a pretty specific vision of what v0.1.0 of this extension will look like, but it&#x27;ll take a few more weeks to get there. This blog post was more for letting users of sqlite-vss (a previous vector search SQLite extension I wrote) know what will be coming next. There will be a much bigger release when that is ready.<p>But in general, I&#x27;m super excited to have an easy embeddable vector search alternative! Especially one that runs on all operating system, in WASM, mobile devices, Raspberry Pis, etc. I personally I&#x27;m trying to run a lil&#x27; semantic search app on my Beepy[0], which is a ton of fun to play with.<p>[0] <a href="https:&#x2F;&#x2F;beepy.sqfmi.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;beepy.sqfmi.com&#x2F;</a></div><br/><div id="40245505" class="c"><input type="checkbox" id="c-40245505" checked=""/><div class="controls bullet"><span class="by">CGamesPlay</span><span>|</span><a href="#40244002">parent</a><span>|</span><a href="#40244090">next</a><span>|</span><label class="collapse" for="c-40245505">[-]</label><label class="expand" for="c-40245505">[1 more]</label></div><br/><div class="children"><div class="content">Very exciting and I can’t wait to try it. Dependency issues are the reason I am currently not using sqlite-vss (i.e. not using an index for my vector searches), but man do I wish for better performance.<p>At the risk of fulfilling a HN stereotype, may I ask why you ditched Rust for this extension?</div><br/></div></div><div id="40244090" class="c"><input type="checkbox" id="c-40244090" checked=""/><div class="controls bullet"><span class="by">lsb</span><span>|</span><a href="#40244002">parent</a><span>|</span><a href="#40245505">prev</a><span>|</span><a href="#40244689">next</a><span>|</span><label class="collapse" for="c-40244090">[-]</label><label class="expand" for="c-40244090">[5 more]</label></div><br/><div class="children"><div class="content">Would this implement indexing strategies like HNSW? Linear scan is obviously great to start out with, and can definitely be performant, especially if your data is in a reasonable order and under (say) 10MB, so this shouldn&#x27;t block a beta release.<p>Also do you build with sqlite-httpvfs? This would go together great <a href="https:&#x2F;&#x2F;github.com&#x2F;phiresky&#x2F;sql.js-httpvfs">https:&#x2F;&#x2F;github.com&#x2F;phiresky&#x2F;sql.js-httpvfs</a></div><br/><div id="40244148" class="c"><input type="checkbox" id="c-40244148" checked=""/><div class="controls bullet"><span class="by">alexgarcia-xyz</span><span>|</span><a href="#40244002">root</a><span>|</span><a href="#40244090">parent</a><span>|</span><a href="#40244689">next</a><span>|</span><label class="collapse" for="c-40244148">[-]</label><label class="expand" for="c-40244148">[4 more]</label></div><br/><div class="children"><div class="content">The initial v0.1.0 release will only have linear scans, but I want to support ANN indexes like IVF&#x2F;HNSW in the future! Wanted to focus on fullscans first to make things easier.<p>In my experiments you can get pretty far with linear scans using sqlite-vec. Depends on the number of dimensions of course, but I&#x27;d expect it can handle searching 100&#x27;s of thousands of vectors to maybe a million with sub-second searches, especially if you tweak some settings (page_size, mmap_size, etc.). And if you quantize your vectors (int8 reduces size 4x, binary 32x) you can get even faster, at the expense of quality. Or use Matryoshka embeddings[0] to shave down dimensions even more.<p>Building sql.js-httpvfs would be cool! Though I&#x27;m using the &quot;official&quot; SQLite WASM builds which came out after sql.js, so I don&#x27;t think it&#x27;ll be compatible out of the box. Would be very curious to see how much effort it would be to make a new HTTP VFS for SQLite&#x27;s new WASM builds<p>[0] <a href="https:&#x2F;&#x2F;huggingface.co&#x2F;blog&#x2F;matryoshka" rel="nofollow">https:&#x2F;&#x2F;huggingface.co&#x2F;blog&#x2F;matryoshka</a></div><br/><div id="40244678" class="c"><input type="checkbox" id="c-40244678" checked=""/><div class="controls bullet"><span class="by">mkesper</span><span>|</span><a href="#40244002">root</a><span>|</span><a href="#40244148">parent</a><span>|</span><a href="#40244232">next</a><span>|</span><label class="collapse" for="c-40244678">[-]</label><label class="expand" for="c-40244678">[1 more]</label></div><br/><div class="children"><div class="content">Have a look at <a href="https:&#x2F;&#x2F;jkatz05.com&#x2F;post&#x2F;postgres&#x2F;pgvector-performance-150x-speedup&#x2F;" rel="nofollow">https:&#x2F;&#x2F;jkatz05.com&#x2F;post&#x2F;postgres&#x2F;pgvector-performance-150x-...</a> fp16 for indices seems to give a nice size compression without reducing quality with HNSW.</div><br/></div></div><div id="40244232" class="c"><input type="checkbox" id="c-40244232" checked=""/><div class="controls bullet"><span class="by">sroussey</span><span>|</span><a href="#40244002">root</a><span>|</span><a href="#40244148">parent</a><span>|</span><a href="#40244678">prev</a><span>|</span><a href="#40244689">next</a><span>|</span><label class="collapse" for="c-40244232">[-]</label><label class="expand" for="c-40244232">[2 more]</label></div><br/><div class="children"><div class="content">Might have a look at this library:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;unum-cloud&#x2F;usearch">https:&#x2F;&#x2F;github.com&#x2F;unum-cloud&#x2F;usearch</a><p>It does HNSW and there is a SQLite related project, though not quite the same thing.</div><br/><div id="40244277" class="c"><input type="checkbox" id="c-40244277" checked=""/><div class="controls bullet"><span class="by">alexgarcia-xyz</span><span>|</span><a href="#40244002">root</a><span>|</span><a href="#40244232">parent</a><span>|</span><a href="#40244689">next</a><span>|</span><label class="collapse" for="c-40244277">[-]</label><label class="expand" for="c-40244277">[1 more]</label></div><br/><div class="children"><div class="content">Thanks for sharing! I&#x27;ve looked into usearch before, it&#x27;s really sleek, especially all their language bindings. Though I want sqlite-vec to have total control over what stays in-memory vs on-disk during searches, and most vector search libraries like usearch&#x2F;hnswlib&#x2F;faiss&#x2F;annoy either always store in-memory or don&#x27;t offer hooks for other storage systems.<p>Additionally, sqlite-vec takes advantage of some SQLite specific APIs, like BLOB I&#x2F;O [0], which I hope would speed things up a ton. It&#x27;s a ton more work, coming up with new storage solutions that are backed by SQLite shadow tables, but I think it&#x27;ll be work it!<p>And I also like how sqlite-vec is just a single sqlite-vec.c file. It makes linking + cross-compiling super easy, and since I got burned relying on heavy C++ dependencies with sqlite-vss, a no-dependency rule feels good. Mostly inspired by SQLite single-file sqlite3.c amalgamation, and Josh Baker&#x27;s single file C projects like tg[1].<p>[0] <a href="https:&#x2F;&#x2F;www.sqlite.org&#x2F;c3ref&#x2F;blob_open.html" rel="nofollow">https:&#x2F;&#x2F;www.sqlite.org&#x2F;c3ref&#x2F;blob_open.html</a><p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;tidwall&#x2F;tg">https:&#x2F;&#x2F;github.com&#x2F;tidwall&#x2F;tg</a></div><br/></div></div></div></div></div></div></div></div><div id="40244689" class="c"><input type="checkbox" id="c-40244689" checked=""/><div class="controls bullet"><span class="by">TachyonicBytes</span><span>|</span><a href="#40244002">parent</a><span>|</span><a href="#40244090">prev</a><span>|</span><a href="#40245091">next</a><span>|</span><label class="collapse" for="c-40244689">[-]</label><label class="expand" for="c-40244689">[2 more]</label></div><br/><div class="children"><div class="content">Really nice to see Wasm there, usually vector search in sqlite wasn&#x27;t available in the browser.<p>Did you ever consider making it syntax compatible with pgvector, in order to have a common SQL vector DSL? I am sure the benefits are much smaller than the disadvantages, but I&#x27;m curious if it&#x27;s possible.</div><br/><div id="40244839" class="c"><input type="checkbox" id="c-40244839" checked=""/><div class="controls bullet"><span class="by">alexgarcia-xyz</span><span>|</span><a href="#40244002">root</a><span>|</span><a href="#40244689">parent</a><span>|</span><a href="#40245091">next</a><span>|</span><label class="collapse" for="c-40244839">[-]</label><label class="expand" for="c-40244839">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not possible to match pgvector&#x27;s syntax with SQLite. SQLite doesn&#x27;t have custom indexes, and since I want to have full control of how vectors are stored on disk, the only real way to do that in SQLite is with virtual tables[0]. And there&#x27;s a few other smaller details that don&#x27;t match (postgres operators like &lt;-&gt;&#x2F;&lt;=&gt;, SQLite&#x27;s limited virtual table constraints, etc.), so matching pgvector wasn&#x27;t a priority.<p>I instead tried to match SQLite&#x27;s FTS5 full text search[1] extension where possible. It solves a similar problem: storing data in its own optimized format with a virtual table, so offering a similar API seemed appropriate.<p>Plus, there&#x27;s a few quirks with the pgvector API that I don&#x27;t quite like (like vector column definitions), so starting from scratch is nice!<p>[0] <a href="https:&#x2F;&#x2F;www.sqlite.org&#x2F;vtab.html" rel="nofollow">https:&#x2F;&#x2F;www.sqlite.org&#x2F;vtab.html</a><p>[1] <a href="https:&#x2F;&#x2F;www.sqlite.org&#x2F;fts5.html" rel="nofollow">https:&#x2F;&#x2F;www.sqlite.org&#x2F;fts5.html</a></div><br/></div></div></div></div><div id="40245091" class="c"><input type="checkbox" id="c-40245091" checked=""/><div class="controls bullet"><span class="by">jeanloolz</span><span>|</span><a href="#40244002">parent</a><span>|</span><a href="#40244689">prev</a><span>|</span><a href="#40245266">next</a><span>|</span><label class="collapse" for="c-40245091">[-]</label><label class="expand" for="c-40245091">[1 more]</label></div><br/><div class="children"><div class="content">I originally added sqlite-vss (your original vector search implementation) on Langchain as a vectorstore. Do you think this one is mature enough to add on Langchain, or should I wait a bit?<p>Love your work by the way, I have been using sqlite-vss on a few projects already.</div><br/></div></div><div id="40245266" class="c"><input type="checkbox" id="c-40245266" checked=""/><div class="controls bullet"><span class="by">tipsytoad</span><span>|</span><a href="#40244002">parent</a><span>|</span><a href="#40245091">prev</a><span>|</span><a href="#40244625">next</a><span>|</span><label class="collapse" for="c-40245266">[-]</label><label class="expand" for="c-40245266">[1 more]</label></div><br/><div class="children"><div class="content">Looks really nice, but the only concern I had — how does the perf compare to more mature libraries like faiss?</div><br/></div></div><div id="40244625" class="c"><input type="checkbox" id="c-40244625" checked=""/><div class="controls bullet"><span class="by">nnx</span><span>|</span><a href="#40244002">parent</a><span>|</span><a href="#40245266">prev</a><span>|</span><a href="#40244217">next</a><span>|</span><label class="collapse" for="c-40244625">[-]</label><label class="expand" for="c-40244625">[2 more]</label></div><br/><div class="children"><div class="content">Interesting idea.<p>Do you intend to compress the vector storage in any way and do you intend to implement your own vector search algorithms or reuse some already optimized libraries like usearch?</div><br/><div id="40244862" class="c"><input type="checkbox" id="c-40244862" checked=""/><div class="controls bullet"><span class="by">alexgarcia-xyz</span><span>|</span><a href="#40244002">root</a><span>|</span><a href="#40244625">parent</a><span>|</span><a href="#40244217">next</a><span>|</span><label class="collapse" for="c-40244862">[-]</label><label class="expand" for="c-40244862">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t have plans for compressed vector storage. There is support for int8&#x2F;binary quantization, which can reduce the size of stored vectors drastically, but impacts performance quite a lot. I&#x27;d like to support something like product quantization[0] in the future, though!<p>No plans for using usearch or another vector search library, either. I want to keep dependencies low to make compilingeasy, and I want full control for how vectors are stored on-disk and in-memory.<p>[0] <a href="https:&#x2F;&#x2F;www.pinecone.io&#x2F;learn&#x2F;series&#x2F;faiss&#x2F;product-quantization&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.pinecone.io&#x2F;learn&#x2F;series&#x2F;faiss&#x2F;product-quantizat...</a></div><br/></div></div></div></div><div id="40244217" class="c"><input type="checkbox" id="c-40244217" checked=""/><div class="controls bullet"><span class="by">xyc</span><span>|</span><a href="#40244002">parent</a><span>|</span><a href="#40244625">prev</a><span>|</span><a href="#40243906">next</a><span>|</span><label class="collapse" for="c-40244217">[-]</label><label class="expand" for="c-40244217">[3 more]</label></div><br/><div class="children"><div class="content">This is awesome! We used Qdrant vector DB for a local AI RAG app <a href="https:&#x2F;&#x2F;recurse.chat&#x2F;blog&#x2F;posts&#x2F;local-docs#vector-database" rel="nofollow">https:&#x2F;&#x2F;recurse.chat&#x2F;blog&#x2F;posts&#x2F;local-docs#vector-database</a>, but was eyeing up sqlite-vss as a lightweight embedded solution. Excited to see you are making a successor. Would be interested to learn about latency and scalability benchmarks.</div><br/><div id="40244292" class="c"><input type="checkbox" id="c-40244292" checked=""/><div class="controls bullet"><span class="by">alexgarcia-xyz</span><span>|</span><a href="#40244002">root</a><span>|</span><a href="#40244217">parent</a><span>|</span><a href="#40243906">next</a><span>|</span><label class="collapse" for="c-40244292">[-]</label><label class="expand" for="c-40244292">[2 more]</label></div><br/><div class="children"><div class="content">That&#x27;s great to hear, thanks for sharing! Will definitely have benchmarks to share later<p>Would love to hear about the scale of the vector data you&#x27;re working with in your local app. Do you actually find yourself with &gt; 1 million vectors? Do you get away with just storing it all in-memory?</div><br/><div id="40244399" class="c"><input type="checkbox" id="c-40244399" checked=""/><div class="controls bullet"><span class="by">xyc</span><span>|</span><a href="#40244002">root</a><span>|</span><a href="#40244292">parent</a><span>|</span><a href="#40243906">next</a><span>|</span><label class="collapse" for="c-40244399">[-]</label><label class="expand" for="c-40244399">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t think we need &gt; 1 million vector yet. But we plan to target folder of local document such as obsidian vault or store web search results which could rack up a large number of vectors. Persistence on disk is also a desired feature when looking at the choices because we don&#x27;t want to reindex existing files.<p>Benchmark is also not everything, easiness to embed and integrate with existing sqlite apps could make sqlite-vec stand out and help with adoption.</div><br/></div></div></div></div></div></div></div></div><div id="40243906" class="c"><input type="checkbox" id="c-40243906" checked=""/><div class="controls bullet"><span class="by">barakm</span><span>|</span><a href="#40244002">prev</a><span>|</span><a href="#40245186">next</a><span>|</span><label class="collapse" for="c-40243906">[-]</label><label class="expand" for="c-40243906">[6 more]</label></div><br/><div class="children"><div class="content">&gt; Thy are binary vectors with 768 dimensions, which takes up 96 bytes (768 &#x2F; 8 = 96).<p>I guess I’m confused. This is honestly the problem that most vector storage faces (“curse of dimensionality”) let alone the indexing.<p>I assume that you meant 768 dimensions * 8 bytes (for a f64) which is 6144 bytes.  Usually, these get shrunk with some (hopefully minor) loss, so like a f32 or f16 (or smaller!).<p>If you can post how you fit 768 dimensions in 96 bytes, even with compression or trie-equivalent amortization, or whatever… I’d love to hear more about that for another post.<p>Ninja edit: Unless you’re treating each dimension as one-bit? But then I still have questions around retrieval quality</div><br/><div id="40243952" class="c"><input type="checkbox" id="c-40243952" checked=""/><div class="controls bullet"><span class="by">alexgarcia-xyz</span><span>|</span><a href="#40243906">parent</a><span>|</span><a href="#40243924">next</a><span>|</span><label class="collapse" for="c-40243952">[-]</label><label class="expand" for="c-40243952">[2 more]</label></div><br/><div class="children"><div class="content">Author here - ya &quot;binary vectors&quot; means quantizing to one bit per dimension. Normally it would be 4 * dimensions bytes of space per vector (where 4=sizeof(float)).  Some embedding models, like nomic v1.5[0] and mixedbread&#x27;s new model[1] are specifically trained to retain quality after binary quantization. Not all models do tho, so results may vary. I think in general for really large vectors, like OpenAI&#x27;s large embeddings model with 3072 dimensions, it kindof works, even if they didn&#x27;t specifically train for it.<p>[0] <a href="https:&#x2F;&#x2F;twitter.com&#x2F;nomic_ai&#x2F;status&#x2F;1769837800793243687" rel="nofollow">https:&#x2F;&#x2F;twitter.com&#x2F;nomic_ai&#x2F;status&#x2F;1769837800793243687</a><p>[1] <a href="https:&#x2F;&#x2F;www.mixedbread.ai&#x2F;blog&#x2F;binary-mrl" rel="nofollow">https:&#x2F;&#x2F;www.mixedbread.ai&#x2F;blog&#x2F;binary-mrl</a></div><br/><div id="40243978" class="c"><input type="checkbox" id="c-40243978" checked=""/><div class="controls bullet"><span class="by">barakm</span><span>|</span><a href="#40243906">root</a><span>|</span><a href="#40243952">parent</a><span>|</span><a href="#40243924">next</a><span>|</span><label class="collapse" for="c-40243978">[-]</label><label class="expand" for="c-40243978">[1 more]</label></div><br/><div class="children"><div class="content">Thank you! As you keep posting your progress, and I hope you do, adding these references would probably help warding off crusty fuddy-duddys like me (or at least give them more to research either way) ;)</div><br/></div></div></div></div><div id="40243924" class="c"><input type="checkbox" id="c-40243924" checked=""/><div class="controls bullet"><span class="by">lsb</span><span>|</span><a href="#40243906">parent</a><span>|</span><a href="#40243952">prev</a><span>|</span><a href="#40245186">next</a><span>|</span><label class="collapse" for="c-40243924">[-]</label><label class="expand" for="c-40243924">[3 more]</label></div><br/><div class="children"><div class="content">Binary, quantize each dimension to +1 or -1<p>You can try out binary vectors, in comparison to quantize every pair of vectors to one of four values, and a lot more, by using a FAISS index on your data, and using Product Quantization (like PQ768x1 for binary features in this case) <a href="https:&#x2F;&#x2F;github.com&#x2F;facebookresearch&#x2F;faiss&#x2F;wiki&#x2F;The-index-factory">https:&#x2F;&#x2F;github.com&#x2F;facebookresearch&#x2F;faiss&#x2F;wiki&#x2F;The-index-fac...</a></div><br/><div id="40243954" class="c"><input type="checkbox" id="c-40243954" checked=""/><div class="controls bullet"><span class="by">barakm</span><span>|</span><a href="#40243906">root</a><span>|</span><a href="#40243924">parent</a><span>|</span><a href="#40245186">next</a><span>|</span><label class="collapse" for="c-40243954">[-]</label><label class="expand" for="c-40243954">[2 more]</label></div><br/><div class="children"><div class="content">Appreciate the link; but would still like to know how well it works.<p>If you have a link for that, I’d be much obliged</div><br/><div id="40243990" class="c"><input type="checkbox" id="c-40243990" checked=""/><div class="controls bullet"><span class="by">lsb</span><span>|</span><a href="#40243906">root</a><span>|</span><a href="#40243954">parent</a><span>|</span><a href="#40245186">next</a><span>|</span><label class="collapse" for="c-40243990">[-]</label><label class="expand" for="c-40243990">[1 more]</label></div><br/><div class="children"><div class="content">It depends on your data and your embedding model. For example, I was able to quantize embeddings of English Wikipedia from 384-dimensions down to 48 7-bit dimensions, and the search works great: <a href="https:&#x2F;&#x2F;www.leebutterman.com&#x2F;2023&#x2F;06&#x2F;01&#x2F;offline-realtime-embedding-search.html" rel="nofollow">https:&#x2F;&#x2F;www.leebutterman.com&#x2F;2023&#x2F;06&#x2F;01&#x2F;offline-realtime-emb...</a></div><br/></div></div></div></div></div></div></div></div><div id="40245186" class="c"><input type="checkbox" id="c-40245186" checked=""/><div class="controls bullet"><span class="by">TheAnkurTyagi</span><span>|</span><a href="#40243906">prev</a><span>|</span><a href="#40245085">next</a><span>|</span><label class="collapse" for="c-40245186">[-]</label><label class="expand" for="c-40245186">[1 more]</label></div><br/><div class="children"><div class="content">This is great. we used Qdrant vector DB for an end to end automation for our AI RAG app at <a href="https:&#x2F;&#x2F;github.com&#x2F;rnadigital&#x2F;agentcloud">https:&#x2F;&#x2F;github.com&#x2F;rnadigital&#x2F;agentcloud</a>, but very excited to see you are making a successor. any ETA when it would be ready to use and any quickstart guide? Maybe I can help in writing a blog as well.</div><br/></div></div><div id="40245085" class="c"><input type="checkbox" id="c-40245085" checked=""/><div class="controls bullet"><span class="by">usgroup</span><span>|</span><a href="#40245186">prev</a><span>|</span><a href="#40243851">next</a><span>|</span><label class="collapse" for="c-40245085">[-]</label><label class="expand" for="c-40245085">[1 more]</label></div><br/><div class="children"><div class="content">Shallow insight, but separating the algorithmic&#x2F;representational and sqlite operational parts into own C projects, is possibly a good idea.<p>I&#x27;d expect the rate of evolution to be significantly different between the two parts, and if you are using an algorithm library adopted by others, you may get progress &quot;for free&quot;.</div><br/></div></div><div id="40243851" class="c"><input type="checkbox" id="c-40243851" checked=""/><div class="controls bullet"><span class="by">Trufa</span><span>|</span><a href="#40245085">prev</a><span>|</span><a href="#40245576">next</a><span>|</span><label class="collapse" for="c-40243851">[-]</label><label class="expand" for="c-40243851">[1 more]</label></div><br/><div class="children"><div class="content">I love this style of projects, OSS project for a very particular issue.<p>I keep thinking what can I do in the Typescript&#x2F;Next.js&#x2F;React ecosystem that&#x27;s very useful to a technical niche but I haven&#x27;t had the inspiration yet.</div><br/></div></div><div id="40245576" class="c"><input type="checkbox" id="c-40245576" checked=""/><div class="controls bullet"><span class="by">babox</span><span>|</span><a href="#40243851">prev</a><span>|</span><a href="#40245364">next</a><span>|</span><label class="collapse" for="c-40245576">[-]</label><label class="expand" for="c-40245576">[1 more]</label></div><br/><div class="children"><div class="content">very cool i like so much sqlite</div><br/></div></div><div id="40245364" class="c"><input type="checkbox" id="c-40245364" checked=""/><div class="controls bullet"><span class="by">blizzardman</span><span>|</span><a href="#40245576">prev</a><span>|</span><a href="#40244568">next</a><span>|</span><label class="collapse" for="c-40245364">[-]</label><label class="expand" for="c-40245364">[1 more]</label></div><br/><div class="children"><div class="content">Are you looking for contributor by any chance?</div><br/></div></div><div id="40244568" class="c"><input type="checkbox" id="c-40244568" checked=""/><div class="controls bullet"><span class="by">ComputerGuru</span><span>|</span><a href="#40245364">prev</a><span>|</span><a href="#40245171">next</a><span>|</span><label class="collapse" for="c-40244568">[-]</label><label class="expand" for="c-40244568">[2 more]</label></div><br/><div class="children"><div class="content">I guess this is an answer (not <i>in answer</i>, mind!) to the GitHub issue I opened against SQLite-vss a couple of months ago?<p><a href="https:&#x2F;&#x2F;github.com&#x2F;asg017&#x2F;sqlite-vss&#x2F;issues&#x2F;124">https:&#x2F;&#x2F;github.com&#x2F;asg017&#x2F;sqlite-vss&#x2F;issues&#x2F;124</a></div><br/><div id="40244895" class="c"><input type="checkbox" id="c-40244895" checked=""/><div class="controls bullet"><span class="by">alexgarcia-xyz</span><span>|</span><a href="#40244568">parent</a><span>|</span><a href="#40245171">next</a><span>|</span><label class="collapse" for="c-40244895">[-]</label><label class="expand" for="c-40244895">[1 more]</label></div><br/><div class="children"><div class="content">Yes it is! Sorry for not following up there. Actually, when I first read that ticket, it started me down the rabbit-hole of &quot;how can I make sqlite-vss&quot; better, which eventually turned into &quot;I should make sqlite-vec.&quot; So thanks for helping me go down this path!<p>With sqlite-vec&#x27;s builtin binary quantization, you should be able to do something like:<p><pre><code>  CREATE VIRTUAL TABLE vec_files USING vec0 (
    contents_embedding bit[1536]
  );

  INSERT INTO vec_files(rowid,contents_embedding) 
    VALUES (
      (1, vec_quantize_binary( &#x2F;* 1536-dimension float vector here*&#x2F;))
    )</code></pre></div><br/></div></div></div></div><div id="40245171" class="c"><input type="checkbox" id="c-40245171" checked=""/><div class="controls bullet"><span class="by">elitan</span><span>|</span><a href="#40244568">prev</a><span>|</span><a href="#40244410">next</a><span>|</span><label class="collapse" for="c-40245171">[-]</label><label class="expand" for="c-40245171">[1 more]</label></div><br/><div class="children"><div class="content">Vector search in SQLite is what&#x27;s keeping me from switching from Postgres.</div><br/></div></div><div id="40244410" class="c"><input type="checkbox" id="c-40244410" checked=""/><div class="controls bullet"><span class="by">xrd</span><span>|</span><a href="#40245171">prev</a><span>|</span><a href="#40243740">next</a><span>|</span><label class="collapse" for="c-40244410">[-]</label><label class="expand" for="c-40244410">[3 more]</label></div><br/><div class="children"><div class="content">Very excited about this.<p>When running inside the browser, is sqlite-vec able to persist data into the browser-native indexdb? Or, is this part left to the user? If you can share the thinking there I would appreciate it, even if that is, &quot;no thinking yet!&quot;</div><br/><div id="40244498" class="c"><input type="checkbox" id="c-40244498" checked=""/><div class="controls bullet"><span class="by">alexgarcia-xyz</span><span>|</span><a href="#40244410">parent</a><span>|</span><a href="#40243740">next</a><span>|</span><label class="collapse" for="c-40244498">[-]</label><label class="expand" for="c-40244498">[2 more]</label></div><br/><div class="children"><div class="content">It could! It&#x27;s based on the official  SQLite WASM build, so you can use the same persistent options[0] that are offered there. Not sure if IndexedDB is specifically supported, but localStorage&#x2F;OPFS VFS is available.<p>[0] <a href="https:&#x2F;&#x2F;sqlite.org&#x2F;wasm&#x2F;doc&#x2F;trunk&#x2F;persistence.md#kvvfs" rel="nofollow">https:&#x2F;&#x2F;sqlite.org&#x2F;wasm&#x2F;doc&#x2F;trunk&#x2F;persistence.md#kvvfs</a></div><br/><div id="40244875" class="c"><input type="checkbox" id="c-40244875" checked=""/><div class="controls bullet"><span class="by">samwillis</span><span>|</span><a href="#40244410">root</a><span>|</span><a href="#40244498">parent</a><span>|</span><a href="#40243740">next</a><span>|</span><label class="collapse" for="c-40244875">[-]</label><label class="expand" for="c-40244875">[1 more]</label></div><br/><div class="children"><div class="content">OP is correct, the official WASM SQLite build is a sync only build and doesn&#x27;t support async VFSs (which a IndexedDB VFS needs to be as it&#x27;s an async api, unless you load the whole file into memory).<p>The best option for IndexedDB backed WASM SQLite is wa-sqlite, it offered both a sync and async build and a bunch of different VFSs, including an IndexedDB one. Note however that the async builds add significant overhead and reduce performance.<p>The most performant VFS is the &quot;OPFS access handle pool&quot; VFS that Roy developed for wa-SQLite and the official build also adopted as an option. That would be my recommendation for now.</div><br/></div></div></div></div></div></div><div id="40243740" class="c"><input type="checkbox" id="c-40243740" checked=""/><div class="controls bullet"><span class="by">codazoda</span><span>|</span><a href="#40244410">prev</a><span>|</span><a href="#40244182">next</a><span>|</span><label class="collapse" for="c-40243740">[-]</label><label class="expand" for="c-40243740">[3 more]</label></div><br/><div class="children"><div class="content">This is a lot like I imagine “readme driven development” to look like. I’m curious if the author started with docs first.</div><br/><div id="40243975" class="c"><input type="checkbox" id="c-40243975" checked=""/><div class="controls bullet"><span class="by">alexgarcia-xyz</span><span>|</span><a href="#40243740">parent</a><span>|</span><a href="#40244182">next</a><span>|</span><label class="collapse" for="c-40243975">[-]</label><label class="expand" for="c-40243975">[2 more]</label></div><br/><div class="children"><div class="content">Thanks for the kind words!<p>I started with code first — the extension itself is already mostly written[0]. But it&#x27;s one of those &quot;20% effort for 80% of the work,&quot; where the last 20% I need to write (error handling, fuzzy tests, correctness testing) will take 80% of the time. But people already have questions about the current status of `sqlite-vss`, so I figured this &quot;work-in-progress&quot; blog post could answer some questions.<p>Though I do like the idea of starting with docs first! Especially with SQLite extensions, where it all really matters what the SQL API looks like (scalar functions, virtual tables, etc.). I definitely did a lot of sketching of what the SQL part of sqlite-vec should look like before writing most of the code.<p>[0] <a href="https:&#x2F;&#x2F;github.com&#x2F;asg017&#x2F;sqlite-vec&#x2F;blob&#x2F;main&#x2F;sqlite-vec.c">https:&#x2F;&#x2F;github.com&#x2F;asg017&#x2F;sqlite-vec&#x2F;blob&#x2F;main&#x2F;sqlite-vec.c</a></div><br/><div id="40244101" class="c"><input type="checkbox" id="c-40244101" checked=""/><div class="controls bullet"><span class="by">peter_l_downs</span><span>|</span><a href="#40243740">root</a><span>|</span><a href="#40243975">parent</a><span>|</span><a href="#40244182">next</a><span>|</span><label class="collapse" for="c-40244101">[-]</label><label class="expand" for="c-40244101">[1 more]</label></div><br/><div class="children"><div class="content">You’ve done a great job communicating the project, in every aspect. Nice work. I’m excited to try this out!</div><br/></div></div></div></div></div></div><div id="40244182" class="c"><input type="checkbox" id="c-40244182" checked=""/><div class="controls bullet"><span class="by">auraham</span><span>|</span><a href="#40243740">prev</a><span>|</span><a href="#40245074">next</a><span>|</span><label class="collapse" for="c-40244182">[-]</label><label class="expand" for="c-40244182">[2 more]</label></div><br/><div class="children"><div class="content">Awesome work! It would be great if you can share a post of how you developed that extension. I am not familiar with SQLite extensions, so I am not sure how to dig into the github repo.</div><br/><div id="40244207" class="c"><input type="checkbox" id="c-40244207" checked=""/><div class="controls bullet"><span class="by">alexgarcia-xyz</span><span>|</span><a href="#40244182">parent</a><span>|</span><a href="#40245074">next</a><span>|</span><label class="collapse" for="c-40244207">[-]</label><label class="expand" for="c-40244207">[1 more]</label></div><br/><div class="children"><div class="content">I definitely plan to! I have a much larger list of SQLite extensions I&#x27;ve built here: <a href="https:&#x2F;&#x2F;github.com&#x2F;asg017&#x2F;sqlite-ecosystem">https:&#x2F;&#x2F;github.com&#x2F;asg017&#x2F;sqlite-ecosystem</a><p>Here&#x27;s a few other references you may enjoy if you wanna learn more about SQLite extensions:<p>- The single source file for sqlite-vec: <a href="https:&#x2F;&#x2F;github.com&#x2F;asg017&#x2F;sqlite-vec&#x2F;blob&#x2F;main&#x2F;sqlite-vec.c">https:&#x2F;&#x2F;github.com&#x2F;asg017&#x2F;sqlite-vec&#x2F;blob&#x2F;main&#x2F;sqlite-vec.c</a><p>- sqlean, a project from Anton Zhiyanov which is good base of great SQLite extensions: <a href="https:&#x2F;&#x2F;github.com&#x2F;nalgeon&#x2F;sqlean">https:&#x2F;&#x2F;github.com&#x2F;nalgeon&#x2F;sqlean</a><p>- The official SQLite docs: <a href="https:&#x2F;&#x2F;www.sqlite.org&#x2F;loadext.html" rel="nofollow">https:&#x2F;&#x2F;www.sqlite.org&#x2F;loadext.html</a><p>- The &quot;hello world&quot; SQLite extension example: <a href="https:&#x2F;&#x2F;www.sqlite.org&#x2F;src&#x2F;file&#x2F;ext&#x2F;misc&#x2F;rot13.c" rel="nofollow">https:&#x2F;&#x2F;www.sqlite.org&#x2F;src&#x2F;file&#x2F;ext&#x2F;misc&#x2F;rot13.c</a></div><br/></div></div></div></div><div id="40245074" class="c"><input type="checkbox" id="c-40245074" checked=""/><div class="controls bullet"><span class="by">zaeger</span><span>|</span><a href="#40244182">prev</a><span>|</span><a href="#40245027">next</a><span>|</span><label class="collapse" for="c-40245074">[-]</label><label class="expand" for="c-40245074">[1 more]</label></div><br/><div class="children"><div class="content">very good</div><br/></div></div><div id="40245027" class="c"><input type="checkbox" id="c-40245027" checked=""/><div class="controls bullet"><span class="by">goprams</span><span>|</span><a href="#40245074">prev</a><span>|</span><label class="collapse" for="c-40245027">[-]</label><label class="expand" for="c-40245027">[4 more]</label></div><br/><div class="children"><div class="content">&gt; KNN style query goes brrrr<p>Why do devs write comments like this? What does &quot;goes brrrr&quot; add to anyone&#x27;s understanding of the code? It&#x27;s so annoying. Is it supposed to be amusing or cute? It&#x27;s not.<p>The rest of the article is great but it&#x27;s so jarring to see this sort of nonsense in amongst a solid piece of work.<p>It&#x27;s like when you go to a conference and the presentations are peppered with unfunny &quot;meme&quot; pictures. Grow up, people.</div><br/><div id="40245453" class="c"><input type="checkbox" id="c-40245453" checked=""/><div class="controls bullet"><span class="by">efdee</span><span>|</span><a href="#40245027">parent</a><span>|</span><a href="#40245043">next</a><span>|</span><label class="collapse" for="c-40245453">[-]</label><label class="expand" for="c-40245453">[1 more]</label></div><br/><div class="children"><div class="content">Why do people write comments like this? What does &quot;grow up, people&quot; add to anyone&#x27;s understanding of the topic? It&#x27;s so annoying. Is it supposed to make you look better? It doesn&#x27;t.</div><br/></div></div><div id="40245043" class="c"><input type="checkbox" id="c-40245043" checked=""/><div class="controls bullet"><span class="by">dayjaby</span><span>|</span><a href="#40245027">parent</a><span>|</span><a href="#40245453">prev</a><span>|</span><a href="#40245191">next</a><span>|</span><label class="collapse" for="c-40245043">[-]</label><label class="expand" for="c-40245043">[1 more]</label></div><br/><div class="children"><div class="content">Language evolves. Grow up yourself.</div><br/></div></div><div id="40245191" class="c"><input type="checkbox" id="c-40245191" checked=""/><div class="controls bullet"><span class="by">timmy777</span><span>|</span><a href="#40245027">parent</a><span>|</span><a href="#40245043">prev</a><span>|</span><label class="collapse" for="c-40245191">[-]</label><label class="expand" for="c-40245191">[1 more]</label></div><br/><div class="children"><div class="content">Keep in mind, a presentation (text, or otherwise) is an art. Culture, background, experiences and ideologies influences art.<p>... and to address your tone, did you know, you can give feedback with empathy?</div><br/></div></div></div></div></div></div></div></div></div></body></html>