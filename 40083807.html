<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1713517254413" as="style"/><link rel="stylesheet" href="styles.css?v=1713517254413"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://supabase.com/blog/s3-compatible-storage">Supabase Storage: now supports the S3 protocol</a> <span class="domain">(<a href="https://supabase.com">supabase.com</a>)</span></div><div class="subtext"><span>inian</span> | <span>33 comments</span></div><br/><div><div id="40083852" class="c"><input type="checkbox" id="c-40083852" checked=""/><div class="controls bullet"><span class="by">kiwicopple</span><span>|</span><a href="#40084263">next</a><span>|</span><label class="collapse" for="c-40083852">[-]</label><label class="expand" for="c-40083852">[25 more]</label></div><br/><div class="children"><div class="content">hey hn, supabase ceo here<p>For background: we have a storage product for large files (like photos, videos, etc). The storage paths are mapped into your Postgres database so that you can create per-user access rules (using Postgres RLS)<p>This update adds S3 compatibility, which means that you can use it with thousands of tools that already support the protocol.<p>I&#x27;m also pretty excited about the possibilities for data scientists&#x2F;engineers. We can do neat things like dump postgres tables in to Storage (parquet) and you can connect DuckDB&#x2F;Clickhouse directly to them. We have a few ideas that we&#x27;ll experiment with to make this easy<p>Let us know if you have any questions - the engineers will also monitor the discussion</div><br/><div id="40084539" class="c"><input type="checkbox" id="c-40084539" checked=""/><div class="controls bullet"><span class="by">avodonosov</span><span>|</span><a href="#40083852">parent</a><span>|</span><a href="#40084587">next</a><span>|</span><label class="collapse" for="c-40084539">[-]</label><label class="expand" for="c-40084539">[3 more]</label></div><br/><div class="children"><div class="content">The article does not mention: do you support pre-signed URLs?<p><a href="https:&#x2F;&#x2F;docs.aws.amazon.com&#x2F;AmazonS3&#x2F;latest&#x2F;userguide&#x2F;using-presigned-url.html" rel="nofollow">https:&#x2F;&#x2F;docs.aws.amazon.com&#x2F;AmazonS3&#x2F;latest&#x2F;userguide&#x2F;using-...</a></div><br/><div id="40084596" class="c"><input type="checkbox" id="c-40084596" checked=""/><div class="controls bullet"><span class="by">fenos</span><span>|</span><a href="#40083852">root</a><span>|</span><a href="#40084539">parent</a><span>|</span><a href="#40084587">next</a><span>|</span><label class="collapse" for="c-40084596">[-]</label><label class="expand" for="c-40084596">[2 more]</label></div><br/><div class="children"><div class="content">Thanks for asking this, we do not support signed URLs just yet, but it will be added in the next iteration</div><br/><div id="40084640" class="c"><input type="checkbox" id="c-40084640" checked=""/><div class="controls bullet"><span class="by">avodonosov</span><span>|</span><a href="#40083852">root</a><span>|</span><a href="#40084596">parent</a><span>|</span><a href="#40084587">next</a><span>|</span><label class="collapse" for="c-40084640">[-]</label><label class="expand" for="c-40084640">[1 more]</label></div><br/><div class="children"><div class="content">Presigned URLs are useful because client app can upload&#x2F;download directly from S3, saving the app server from this traffic. Does Roe-Level Security achieve the same benefit?</div><br/></div></div></div></div></div></div><div id="40084587" class="c"><input type="checkbox" id="c-40084587" checked=""/><div class="controls bullet"><span class="by">filleokus</span><span>|</span><a href="#40083852">parent</a><span>|</span><a href="#40084539">prev</a><span>|</span><a href="#40084051">next</a><span>|</span><label class="collapse" for="c-40084587">[-]</label><label class="expand" for="c-40084587">[2 more]</label></div><br/><div class="children"><div class="content">Do you think Supabase Storage (now or in the future) could be an attractive standalone S3 provider as an alternative to e.g MinIO?</div><br/><div id="40084630" class="c"><input type="checkbox" id="c-40084630" checked=""/><div class="controls bullet"><span class="by">kiwicopple</span><span>|</span><a href="#40083852">root</a><span>|</span><a href="#40084587">parent</a><span>|</span><a href="#40084051">next</a><span>|</span><label class="collapse" for="c-40084630">[-]</label><label class="expand" for="c-40084630">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s more of a &quot;accessibility layer&quot; on top of S3 or any other s3-compatible backend (which means that it also works with MinIO out-of-the-box [0])<p>I don&#x27;t think we&#x27;ll ever build the underlying storage layer. I&#x27;m a big fan of what the Tigris[1] team have built if you&#x27;re looking for other good s3 alternatives<p>[0] <a href="https:&#x2F;&#x2F;github.com&#x2F;supabase&#x2F;storage&#x2F;blob&#x2F;master&#x2F;docker-compose.yml#L59">https:&#x2F;&#x2F;github.com&#x2F;supabase&#x2F;storage&#x2F;blob&#x2F;master&#x2F;docker-compo...</a><p>[1] Tigris: <a href="https:&#x2F;&#x2F;tigrisdata.com" rel="nofollow">https:&#x2F;&#x2F;tigrisdata.com</a></div><br/></div></div></div></div><div id="40084051" class="c"><input type="checkbox" id="c-40084051" checked=""/><div class="controls bullet"><span class="by">jonplackett</span><span>|</span><a href="#40083852">parent</a><span>|</span><a href="#40084587">prev</a><span>|</span><a href="#40083998">next</a><span>|</span><label class="collapse" for="c-40084051">[-]</label><label class="expand" for="c-40084051">[4 more]</label></div><br/><div class="children"><div class="content">Dear supabase. Please don’t get bought out by anyone and ruined. I’ve built too many websites with a supabase backend now to go back.</div><br/><div id="40084140" class="c"><input type="checkbox" id="c-40084140" checked=""/><div class="controls bullet"><span class="by">kiwicopple</span><span>|</span><a href="#40083852">root</a><span>|</span><a href="#40084051">parent</a><span>|</span><a href="#40083998">next</a><span>|</span><label class="collapse" for="c-40084140">[-]</label><label class="expand" for="c-40084140">[3 more]</label></div><br/><div class="children"><div class="content">we don&#x27;t have any plans to get bought.<p>we only have plans to keep pushing open standards&#x2F;tools - hopefully we have enough of a track record here that it doesn&#x27;t feel like lip service</div><br/><div id="40084649" class="c"><input type="checkbox" id="c-40084649" checked=""/><div class="controls bullet"><span class="by">jonplackett</span><span>|</span><a href="#40083852">root</a><span>|</span><a href="#40084140">parent</a><span>|</span><a href="#40084371">next</a><span>|</span><label class="collapse" for="c-40084649">[-]</label><label class="expand" for="c-40084649">[1 more]</label></div><br/><div class="children"><div class="content">Absolutely. I am so impressed with SB. It’s like you read my mind and then make what I’ll need before I realise.<p>(This is not a paid promotion)</div><br/></div></div><div id="40084371" class="c"><input type="checkbox" id="c-40084371" checked=""/><div class="controls bullet"><span class="by">robertlagrant</span><span>|</span><a href="#40083852">root</a><span>|</span><a href="#40084140">parent</a><span>|</span><a href="#40084649">prev</a><span>|</span><a href="#40083998">next</a><span>|</span><label class="collapse" for="c-40084371">[-]</label><label class="expand" for="c-40084371">[1 more]</label></div><br/><div class="children"><div class="content">As long as you make it so if you do get bought a team of you can always fork and move on, it&#x27;s about the best anyone can hope for.</div><br/></div></div></div></div></div></div><div id="40083998" class="c"><input type="checkbox" id="c-40083998" checked=""/><div class="controls bullet"><span class="by">inian</span><span>|</span><a href="#40083852">parent</a><span>|</span><a href="#40084051">prev</a><span>|</span><a href="#40084418">next</a><span>|</span><label class="collapse" for="c-40083998">[-]</label><label class="expand" for="c-40083998">[1 more]</label></div><br/><div class="children"><div class="content">Here is the example of the DuckDB querying parquet files directly from Storage because it supports the S3 protocol now - <a href="https:&#x2F;&#x2F;github.com&#x2F;TylerHillery&#x2F;supabase-storage-duckdb-demo">https:&#x2F;&#x2F;github.com&#x2F;TylerHillery&#x2F;supabase-storage-duckdb-demo</a><p><a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=diL00ZZ-q50" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=diL00ZZ-q50</a></div><br/></div></div><div id="40084418" class="c"><input type="checkbox" id="c-40084418" checked=""/><div class="controls bullet"><span class="by">JoshTriplett</span><span>|</span><a href="#40083852">parent</a><span>|</span><a href="#40083998">prev</a><span>|</span><a href="#40084178">next</a><span>|</span><label class="collapse" for="c-40084418">[-]</label><label class="expand" for="c-40084418">[3 more]</label></div><br/><div class="children"><div class="content">You specifically say &quot;for large files&quot;. What&#x27;s your bandwidth and latency like for small files (e.g. 20-20480 bytes), and how does it compare to raw S3&#x27;s bandwidth and latency for small files?</div><br/><div id="40084485" class="c"><input type="checkbox" id="c-40084485" checked=""/><div class="controls bullet"><span class="by">egorr</span><span>|</span><a href="#40083852">root</a><span>|</span><a href="#40084418">parent</a><span>|</span><a href="#40084479">next</a><span>|</span><label class="collapse" for="c-40084485">[-]</label><label class="expand" for="c-40084485">[1 more]</label></div><br/><div class="children"><div class="content">hey, supabase engineer here; we didn’t check that out with files that small, but thanks for the idea, i will try it out<p>the only thing i can say related to the topic is that s3 multipart outperforms other methods for files larger than 50mb significantly, but tends to have similar or slightly slower speeds compared to s3 regular upload via supabase or simplest supabase storage upload for files with size about and less than 50mb.<p>s3-multipart is indeed the fastest way to upload file to supabase with speeds up to 100mb&#x2F;s(115 even) for files&gt;500mb. But for files about 5mb or less you are not going to need to change anything in your upload logic just for performance cause you won’t notice any difference probably<p>everything mentioned here is for upload only</div><br/></div></div><div id="40084479" class="c"><input type="checkbox" id="c-40084479" checked=""/><div class="controls bullet"><span class="by">fenos</span><span>|</span><a href="#40083852">root</a><span>|</span><a href="#40084418">parent</a><span>|</span><a href="#40084485">prev</a><span>|</span><a href="#40084178">next</a><span>|</span><label class="collapse" for="c-40084479">[-]</label><label class="expand" for="c-40084479">[1 more]</label></div><br/><div class="children"><div class="content">You can think of the Storage product as an upload server that sits in front of S3.<p>Generally, you would want to place an upload server to accept uploads from your customers, that is because you want to do some sort of file validation, access control or anything else once the file is uploaded. The nice thing is that we run Storage within the same AWS network, so the upload latency is as small as it can be.<p>In terms of serving files, we provide a CDN out-of-the-box for any files that you upload to Storage, minimising latencies geographically</div><br/></div></div></div></div><div id="40084178" class="c"><input type="checkbox" id="c-40084178" checked=""/><div class="controls bullet"><span class="by">nextaccountic</span><span>|</span><a href="#40083852">parent</a><span>|</span><a href="#40084418">prev</a><span>|</span><a href="#40084084">next</a><span>|</span><label class="collapse" for="c-40084178">[-]</label><label class="expand" for="c-40084178">[4 more]</label></div><br/><div class="children"><div class="content">A question about implementation, is the data really stored in a Postgres database? Do you support transactional updates like atomically updating two files at once?<p>Is there a Postgres storage backend optimized for storing large files?</div><br/><div id="40084228" class="c"><input type="checkbox" id="c-40084228" checked=""/><div class="controls bullet"><span class="by">fenos</span><span>|</span><a href="#40083852">root</a><span>|</span><a href="#40084178">parent</a><span>|</span><a href="#40084208">next</a><span>|</span><label class="collapse" for="c-40084228">[-]</label><label class="expand" for="c-40084228">[2 more]</label></div><br/><div class="children"><div class="content">We do not store the files in Postgres, the files are stored in a managed S3 bucket.<p>We store the metadata of the objects and buckets in Postgres so that you can easily query it with SQL. You can also implement access control with RLS to allow access to certain resources.<p>It is not currently possible to guarantee atomicity on 2 different file uploads since each file is uploaded on a single request, this seems a more high-level functionality that could be implemented at the application level</div><br/><div id="40084572" class="c"><input type="checkbox" id="c-40084572" checked=""/><div class="controls bullet"><span class="by">nextaccountic</span><span>|</span><a href="#40083852">root</a><span>|</span><a href="#40084228">parent</a><span>|</span><a href="#40084208">next</a><span>|</span><label class="collapse" for="c-40084572">[-]</label><label class="expand" for="c-40084572">[1 more]</label></div><br/><div class="children"><div class="content">Oh.<p>So this is like, S3 on top of S3? That&#x27;s interesting.</div><br/></div></div></div></div></div></div><div id="40084084" class="c"><input type="checkbox" id="c-40084084" checked=""/><div class="controls bullet"><span class="by">gime_tree_fiddy</span><span>|</span><a href="#40083852">parent</a><span>|</span><a href="#40084178">prev</a><span>|</span><a href="#40084268">next</a><span>|</span><label class="collapse" for="c-40084084">[-]</label><label class="expand" for="c-40084084">[3 more]</label></div><br/><div class="children"><div class="content">Shouldn&#x27;t it be API rather than protocol?<p>Also my sympathies for having to support the so-called &quot;S3 standard&#x2F;protocol&quot;.</div><br/><div id="40084180" class="c"><input type="checkbox" id="c-40084180" checked=""/><div class="controls bullet"><span class="by">fenos</span><span>|</span><a href="#40083852">root</a><span>|</span><a href="#40084084">parent</a><span>|</span><a href="#40084197">next</a><span>|</span><label class="collapse" for="c-40084180">[-]</label><label class="expand" for="c-40084180">[1 more]</label></div><br/><div class="children"><div class="content">Yes, both can be fine :) after all, a Protocol can be interpreted as a Standardised API which the client and server interact with, it can be low-level or high-level.<p>I hope you like the addition and we have the implementation all open-source on the Supabase Storage server</div><br/></div></div><div id="40084197" class="c"><input type="checkbox" id="c-40084197" checked=""/><div class="controls bullet"><span class="by">preommr</span><span>|</span><a href="#40083852">root</a><span>|</span><a href="#40084084">parent</a><span>|</span><a href="#40084180">prev</a><span>|</span><a href="#40084268">next</a><span>|</span><label class="collapse" for="c-40084197">[-]</label><label class="expand" for="c-40084197">[1 more]</label></div><br/><div class="children"><div class="content">I think that protocol is appropriate here since s3 resources are often represented by a s3:&#x2F;&#x2F; url where the scheme part of the url is often used to represent the protocol.</div><br/></div></div></div></div><div id="40084268" class="c"><input type="checkbox" id="c-40084268" checked=""/><div class="controls bullet"><span class="by">ntry01</span><span>|</span><a href="#40083852">parent</a><span>|</span><a href="#40084084">prev</a><span>|</span><a href="#40084061">next</a><span>|</span><label class="collapse" for="c-40084268">[-]</label><label class="expand" for="c-40084268">[2 more]</label></div><br/><div class="children"><div class="content">This is great news, and I agree with everyone in the thread - Supabase is a great product.<p>Does this mean that Supabase (via S3 protocol) supports file download streaming using an API now?<p>As far as I know, it was not achievable before and the only solution was to create a signed URL and stream using HTTP.</div><br/><div id="40084324" class="c"><input type="checkbox" id="c-40084324" checked=""/><div class="controls bullet"><span class="by">fenos</span><span>|</span><a href="#40083852">root</a><span>|</span><a href="#40084268">parent</a><span>|</span><a href="#40084061">next</a><span>|</span><label class="collapse" for="c-40084324">[-]</label><label class="expand" for="c-40084324">[1 more]</label></div><br/><div class="children"><div class="content">Yes, absolutely! You can download files as streams and make use of Range requests too.<p>The good news is that the Standard API is also supporting stream!</div><br/></div></div></div></div><div id="40084061" class="c"><input type="checkbox" id="c-40084061" checked=""/><div class="controls bullet"><span class="by">kaliqt</span><span>|</span><a href="#40083852">parent</a><span>|</span><a href="#40084268">prev</a><span>|</span><a href="#40084263">next</a><span>|</span><label class="collapse" for="c-40084061">[-]</label><label class="expand" for="c-40084061">[2 more]</label></div><br/><div class="children"><div class="content">I tried to migrate from Firebase once and it wasn&#x27;t really straightforward and decided against doing it, I think you guys (if you haven&#x27;t already) should make migration plugins a first class priority that &quot;just works&quot; as the amount of real revenue generating production projects on Firebase and similar are of a much higher number. It&#x27;s a no-brainer that many of them may want to switch if it were safe and simple to do so.</div><br/><div id="40084156" class="c"><input type="checkbox" id="c-40084156" checked=""/><div class="controls bullet"><span class="by">kiwicopple</span><span>|</span><a href="#40083852">root</a><span>|</span><a href="#40084061">parent</a><span>|</span><a href="#40084263">next</a><span>|</span><label class="collapse" for="c-40084156">[-]</label><label class="expand" for="c-40084156">[1 more]</label></div><br/><div class="children"><div class="content">we have some guides (eg: <a href="https:&#x2F;&#x2F;supabase.com&#x2F;docs&#x2F;guides&#x2F;resources&#x2F;migrating-to-supabase&#x2F;firebase-storage">https:&#x2F;&#x2F;supabase.com&#x2F;docs&#x2F;guides&#x2F;resources&#x2F;migrating-to-supa...</a>)<p>also some community tools: <a href="https:&#x2F;&#x2F;github.com&#x2F;supabase-community&#x2F;firebase-to-supabase">https:&#x2F;&#x2F;github.com&#x2F;supabase-community&#x2F;firebase-to-supabase</a><p>we often help companies migrating from firebase to supabase - usually they want to take advantage of Postgres with similar tooling.</div><br/></div></div></div></div></div></div><div id="40084263" class="c"><input type="checkbox" id="c-40084263" checked=""/><div class="controls bullet"><span class="by">madsbuch</span><span>|</span><a href="#40083852">prev</a><span>|</span><a href="#40084355">next</a><span>|</span><label class="collapse" for="c-40084263">[-]</label><label class="expand" for="c-40084263">[1 more]</label></div><br/><div class="children"><div class="content">This is really nice to see! I asked about that feature almost 2 years ago as we wanted to use Supabase for everything. Unfortunately there were no plans back then to support it, so we had to use another provider for object storage.<p>Congrats on the release!</div><br/></div></div><div id="40084355" class="c"><input type="checkbox" id="c-40084355" checked=""/><div class="controls bullet"><span class="by">withinboredom</span><span>|</span><a href="#40084263">prev</a><span>|</span><a href="#40084166">next</a><span>|</span><label class="collapse" for="c-40084355">[-]</label><label class="expand" for="c-40084355">[2 more]</label></div><br/><div class="children"><div class="content">Now we just need flutterflow to get off the firebase bandwagon.</div><br/><div id="40084513" class="c"><input type="checkbox" id="c-40084513" checked=""/><div class="controls bullet"><span class="by">kiwicopple</span><span>|</span><a href="#40084355">parent</a><span>|</span><a href="#40084166">next</a><span>|</span><label class="collapse" for="c-40084513">[-]</label><label class="expand" for="c-40084513">[1 more]</label></div><br/><div class="children"><div class="content">(supabase team member) Firebase is an amazing tool for building fast. I want Supabase to be a &quot;tool for everyone&quot;, but ultimately giving developers choices between various technologies is a good thing for developers. I think it&#x27;s great that Flutterflow support both Firebase &amp; Supabase.<p>I know Flutterflow&#x27;s Firebase integration is a bit more polished so hopefully we can work closer with the FF team to make our integration more seamless</div><br/></div></div></div></div><div id="40084166" class="c"><input type="checkbox" id="c-40084166" checked=""/><div class="controls bullet"><span class="by">denysvitali</span><span>|</span><a href="#40084355">prev</a><span>|</span><label class="collapse" for="c-40084166">[-]</label><label class="expand" for="c-40084166">[4 more]</label></div><br/><div class="children"><div class="content">Friendly reminder that Supabase is really cool, and if you haven&#x27;t tried it out you should do it (everything can be self hosted and they have generous free tiers!)</div><br/><div id="40084195" class="c"><input type="checkbox" id="c-40084195" checked=""/><div class="controls bullet"><span class="by">isoprophlex</span><span>|</span><a href="#40084166">parent</a><span>|</span><a href="#40084187">next</a><span>|</span><label class="collapse" for="c-40084195">[-]</label><label class="expand" for="c-40084195">[2 more]</label></div><br/><div class="children"><div class="content">Plus, with all the inflated vc money fueled hype on vector databases, they seem to have the only offering in this space that actually makes sense to me. With them you can store your embeddings close to all the rest of your data, in a single postgres db.</div><br/><div id="40084357" class="c"><input type="checkbox" id="c-40084357" checked=""/><div class="controls bullet"><span class="by">BoorishBears</span><span>|</span><a href="#40084166">root</a><span>|</span><a href="#40084195">parent</a><span>|</span><a href="#40084187">next</a><span>|</span><label class="collapse" for="c-40084357">[-]</label><label class="expand" for="c-40084357">[1 more]</label></div><br/><div class="children"><div class="content">pgVector is literally everywhere: <a href="https:&#x2F;&#x2F;github.com&#x2F;pgvector&#x2F;pgvector&#x2F;issues&#x2F;54">https:&#x2F;&#x2F;github.com&#x2F;pgvector&#x2F;pgvector&#x2F;issues&#x2F;54</a></div><br/></div></div></div></div><div id="40084187" class="c"><input type="checkbox" id="c-40084187" checked=""/><div class="controls bullet"><span class="by">kiwicopple</span><span>|</span><a href="#40084166">parent</a><span>|</span><a href="#40084195">prev</a><span>|</span><label class="collapse" for="c-40084187">[-]</label><label class="expand" for="c-40084187">[1 more]</label></div><br/><div class="children"><div class="content">thanks for taking time to make a comment. it&#x27;s nice to get some kind words between the feedback (which we also like)</div><br/></div></div></div></div></div></div></div></div></div></body></html>