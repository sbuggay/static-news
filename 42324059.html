<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1733389256624" as="style"/><link rel="stylesheet" href="styles.css?v=1733389256624"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://blog.pgvecto.rs/vectorchord-store-400k-vectors-for-1-in-postgresql">VectorChord: Store 400k Vectors for $1 in PostgreSQL</a> <span class="domain">(<a href="https://blog.pgvecto.rs">blog.pgvecto.rs</a>)</span></div><div class="subtext"><span>gaocegege</span> | <span>15 comments</span></div><br/><div><div id="42326263" class="c"><input type="checkbox" id="c-42326263" checked=""/><div class="controls bullet"><span class="by">tarasglek</span><span>|</span><a href="#42325908">next</a><span>|</span><label class="collapse" for="c-42326263">[-]</label><label class="expand" for="c-42326263">[2 more]</label></div><br/><div class="children"><div class="content">I am still waiting for a good pattern for using multivector embeddings like ColBert and ColPali in postgres. I get that its fun to optimize single vector stuff, but multivector is that happy middleground between single vector and reranker that seems to be only validated in specialized exotic search dbs like Vespa</div><br/><div id="42326296" class="c"><input type="checkbox" id="c-42326296" checked=""/><div class="controls bullet"><span class="by">tarasglek</span><span>|</span><a href="#42326263">parent</a><span>|</span><a href="#42325908">next</a><span>|</span><label class="collapse" for="c-42326296">[-]</label><label class="expand" for="c-42326296">[1 more]</label></div><br/><div class="children"><div class="content">Looks like that there is recent work to make a pgvector example for this <a href="https:&#x2F;&#x2F;github.com&#x2F;pgvector&#x2F;pgvector-python&#x2F;blob&#x2F;master&#x2F;examples&#x2F;colpali&#x2F;exact.py">https:&#x2F;&#x2F;github.com&#x2F;pgvector&#x2F;pgvector-python&#x2F;blob&#x2F;master&#x2F;exam...</a></div><br/></div></div></div></div><div id="42325908" class="c"><input type="checkbox" id="c-42325908" checked=""/><div class="controls bullet"><span class="by">marcyb5st</span><span>|</span><a href="#42326263">prev</a><span>|</span><a href="#42325639">next</a><span>|</span><label class="collapse" for="c-42325908">[-]</label><label class="expand" for="c-42325908">[1 more]</label></div><br/><div class="children"><div class="content">Awesome work! But aren&#x27;t the comparisons missing ScaNN [1, 2]? I think it&#x27;s the overall SOTA [3] at the moment regarding vector indexing.<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;google-research&#x2F;google-research&#x2F;tree&#x2F;master&#x2F;scann">https:&#x2F;&#x2F;github.com&#x2F;google-research&#x2F;google-research&#x2F;tree&#x2F;mast...</a><p>[2] Also available on something like AlloyDB on GCP: <a href="https:&#x2F;&#x2F;cloud.google.com&#x2F;alloydb&#x2F;docs&#x2F;ai&#x2F;store-index-query-vectors?resource=scann" rel="nofollow">https:&#x2F;&#x2F;cloud.google.com&#x2F;alloydb&#x2F;docs&#x2F;ai&#x2F;store-index-query-v...</a><p>[3] <a href="https:&#x2F;&#x2F;ann-benchmarks.com&#x2F;glove-100-angular_10_angular.html" rel="nofollow">https:&#x2F;&#x2F;ann-benchmarks.com&#x2F;glove-100-angular_10_angular.html</a><p>Disclaimer: Working for Google, but nowhere close to Databases.</div><br/></div></div><div id="42325639" class="c"><input type="checkbox" id="c-42325639" checked=""/><div class="controls bullet"><span class="by">jasonkester</span><span>|</span><a href="#42325908">prev</a><span>|</span><a href="#42325136">next</a><span>|</span><label class="collapse" for="c-42325639">[-]</label><label class="expand" for="c-42325639">[4 more]</label></div><br/><div class="children"><div class="content">In five pages of text, we never get to learn what a Vector is (in this context), why we’d want to store one in pgsql, or why it costs so much to store them compared to anything else you’d store there.<p>For an example of how you can communicate with domain experts, while still giving everyone else some form of clue as to what this hell you’re talking about, check out the link to the product that this thing claims to be a successor to:<p><a href="https:&#x2F;&#x2F;pgvecto.rs&#x2F;" rel="nofollow">https:&#x2F;&#x2F;pgvecto.rs&#x2F;</a><p>That starts off by telling us what it is and what it does.</div><br/><div id="42326195" class="c"><input type="checkbox" id="c-42326195" checked=""/><div class="controls bullet"><span class="by">lja</span><span>|</span><a href="#42325639">parent</a><span>|</span><a href="#42326225">next</a><span>|</span><label class="collapse" for="c-42326195">[-]</label><label class="expand" for="c-42326195">[2 more]</label></div><br/><div class="children"><div class="content">That&#x27;s because this product isn&#x27;t for you then. My team has been evaluating vector databases for years and everything on the VectorChord page resonated with me. We run one of the world&#x27;s largest vector databases and we&#x27;ll likely benchmark vectorchord to see if it lives up to its promises here.</div><br/><div id="42326236" class="c"><input type="checkbox" id="c-42326236" checked=""/><div class="controls bullet"><span class="by">gaocegege</span><span>|</span><a href="#42325639">root</a><span>|</span><a href="#42326195">parent</a><span>|</span><a href="#42326225">next</a><span>|</span><label class="collapse" for="c-42326236">[-]</label><label class="expand" for="c-42326236">[1 more]</label></div><br/><div class="children"><div class="content">Hi, we’re here to help if you need assistance (via GitHub issue, Discord, or email). Could you let us know the scale of your vectors—are they 1B or 10B?</div><br/></div></div></div></div><div id="42326225" class="c"><input type="checkbox" id="c-42326225" checked=""/><div class="controls bullet"><span class="by">curl-up</span><span>|</span><a href="#42325639">parent</a><span>|</span><a href="#42326195">prev</a><span>|</span><a href="#42325136">next</a><span>|</span><label class="collapse" for="c-42326225">[-]</label><label class="expand" for="c-42326225">[1 more]</label></div><br/><div class="children"><div class="content">So they should start every one of their posts, on that same site, with a summary of what is available on the homepage?</div><br/></div></div></div></div><div id="42325136" class="c"><input type="checkbox" id="c-42325136" checked=""/><div class="controls bullet"><span class="by">7qW24A</span><span>|</span><a href="#42325639">prev</a><span>|</span><a href="#42325847">next</a><span>|</span><label class="collapse" for="c-42325136">[-]</label><label class="expand" for="c-42325136">[2 more]</label></div><br/><div class="children"><div class="content">The “external index build” idea seems pretty interesting. How does it work with updates to the underlying data (e.g., new embeddings being added)? For that matter, I guess, how do incremental updates to pgvector’s HNSW indexes work?</div><br/><div id="42325172" class="c"><input type="checkbox" id="c-42325172" checked=""/><div class="controls bullet"><span class="by">VoVAllen</span><span>|</span><a href="#42325136">parent</a><span>|</span><a href="#42325847">next</a><span>|</span><label class="collapse" for="c-42325172">[-]</label><label class="expand" for="c-42325172">[1 more]</label></div><br/><div class="children"><div class="content">The IVF indexing can be considered into two phases, computing the centroids (KMeans), and assigning each point to the centroids as the inverted lists. The most time-consuming part is at the KMeans stage, and can be greatly accelerated with GPU. 1M 960dim vec can be clustered in less than 10s.
We did the KMeans phase externally, and the assignment phase inside postgres. The KMeans part depends only on the data distribution, not on any specific data. So we can do sampling on the data, and inserting&#x2F;deleting the data won&#x27;t affect the KMeans result significantly.
For the update, it&#x27;s just a matter of assigning the new vector to a specific cluster and appending it to the corresponding list. It&#x27;s very light compared to inserting in hnsw</div><br/></div></div></div></div><div id="42325847" class="c"><input type="checkbox" id="c-42325847" checked=""/><div class="controls bullet"><span class="by">curl-up</span><span>|</span><a href="#42325136">prev</a><span>|</span><a href="#42324060">next</a><span>|</span><label class="collapse" for="c-42325847">[-]</label><label class="expand" for="c-42325847">[2 more]</label></div><br/><div class="children"><div class="content">Does this mean you won&#x27;t support pgvecto.rs anymore?</div><br/><div id="42326326" class="c"><input type="checkbox" id="c-42326326" checked=""/><div class="controls bullet"><span class="by">VoVAllen</span><span>|</span><a href="#42325847">parent</a><span>|</span><a href="#42324060">next</a><span>|</span><label class="collapse" for="c-42326326">[-]</label><label class="expand" for="c-42326326">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m the project lead for both projects. We&#x27;re still in the process of supporting all the function from pgvecto.rs in VectorChord (int8, more than 2000 dim vec, etc.). We&#x27;ll provide the migration docs for pgvecto.rs users to VectorChord. User will have better experience with VectorChord due to better integration with postgres storage system.
We will stop supporting pgvecto.rs early next year when everything on VectorChord is ready.</div><br/></div></div></div></div><div id="42324060" class="c"><input type="checkbox" id="c-42324060" checked=""/><div class="controls bullet"><span class="by">gaocegege</span><span>|</span><a href="#42325847">prev</a><span>|</span><a href="#42325432">next</a><span>|</span><label class="collapse" for="c-42324060">[-]</label><label class="expand" for="c-42324060">[1 more]</label></div><br/><div class="children"><div class="content">Hey everyone! We’ve developed a new PostgreSQL extension that supports 400k vectors for just $1. Check it out!</div><br/></div></div><div id="42325432" class="c"><input type="checkbox" id="c-42325432" checked=""/><div class="controls bullet"><span class="by">nextworddev</span><span>|</span><a href="#42324060">prev</a><span>|</span><label class="collapse" for="c-42325432">[-]</label><label class="expand" for="c-42325432">[2 more]</label></div><br/><div class="children"><div class="content">What dimension vectors are we talking here</div><br/><div id="42325483" class="c"><input type="checkbox" id="c-42325483" checked=""/><div class="controls bullet"><span class="by">jesperwe</span><span>|</span><a href="#42325432">parent</a><span>|</span><label class="collapse" for="c-42325483">[-]</label><label class="expand" for="c-42325483">[1 more]</label></div><br/><div class="children"><div class="content">First paragraph of tfa mentions &quot;768-dimensional vectors&quot;</div><br/></div></div></div></div></div></div></div></div></div></body></html>