<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1726304449836" as="style"/><link rel="stylesheet" href="styles.css?v=1726304449836"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/ed-o-saurus/PLHaskell">Haskell Postgres Stored Procedures</a>Â <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>runeks</span> | <span>6 comments</span></div><br/><div><div id="41537248" class="c"><input type="checkbox" id="c-41537248" checked=""/><div class="controls bullet"><span class="by">solidsnack9000</span><span>|</span><a href="#41537306">next</a><span>|</span><label class="collapse" for="c-41537248">[-]</label><label class="expand" for="c-41537248">[1 more]</label></div><br/><div class="children"><div class="content">The developer notes:<p><i>As such, unprivileged users are permitted to write and execute functions without the possibility that they will be able to access information or resources that are not allowed to access. This is accomplished by enforcing Haskell&#x27;s strong type system.</i><p>Further on, it says:<p><i>Trusted functions must return type PGm (Maybe result) where result is the appropriate Haskell type as determined by the return type of function while untrusted functions must return type IO (Maybe result). The PGm monad type can be imported from the PGutils module.</i><p>This makes some sense intuitively, but it would be good to see the details worked out. There is always `unsafePerformIO`, after all...</div><br/></div></div><div id="41537306" class="c"><input type="checkbox" id="c-41537306" checked=""/><div class="controls bullet"><span class="by">smilliken</span><span>|</span><a href="#41537248">prev</a><span>|</span><label class="collapse" for="c-41537306">[-]</label><label class="expand" for="c-41537306">[4 more]</label></div><br/><div class="children"><div class="content">My dream would be a database where Haskell is the query language. It&#x27;s more expressive than SQL and more composable. Every time I see a new SQL feature that would be trivial in a modern language it feels like we&#x27;re working harder instead of smarter.</div><br/><div id="41537521" class="c"><input type="checkbox" id="c-41537521" checked=""/><div class="controls bullet"><span class="by">tehlike</span><span>|</span><a href="#41537306">parent</a><span>|</span><a href="#41537404">next</a><span>|</span><label class="collapse" for="c-41537521">[-]</label><label class="expand" for="c-41537521">[1 more]</label></div><br/><div class="children"><div class="content">As far as query languages go, you may want to look into prql, kusto or google&#x27;s alternative (i forgot its name). They are composable, and more natural.</div><br/></div></div><div id="41537404" class="c"><input type="checkbox" id="c-41537404" checked=""/><div class="controls bullet"><span class="by">whateveracct</span><span>|</span><a href="#41537306">parent</a><span>|</span><a href="#41537521">prev</a><span>|</span><label class="collapse" for="c-41537404">[-]</label><label class="expand" for="c-41537404">[2 more]</label></div><br/><div class="children"><div class="content">Sooooo if you use a SQL database and a Haskell access library, you kind of get this.<p>Like esqueleto for instance. With it, you basically use Haskell as a meta-programming language for SQL. It&#x27;s really nice when it works.<p>But yeah..makes me think that a more first-class thing would be even better.<p>Tbh, maybe Haskell compiled to a lower-level query language would be better. A language that is about tables and btrees etc. Where there&#x27;s no planner because the low-level language <i>is</i> the plan.</div><br/><div id="41538423" class="c"><input type="checkbox" id="c-41538423" checked=""/><div class="controls bullet"><span class="by">lmz</span><span>|</span><a href="#41537306">root</a><span>|</span><a href="#41537404">parent</a><span>|</span><label class="collapse" for="c-41538423">[-]</label><label class="expand" for="c-41538423">[1 more]</label></div><br/><div class="children"><div class="content">Most planners use statistics. A fixed plan may not be optimal (and at the same time, statistics may be out of date).</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>