<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1720429276708" as="style"/><link rel="stylesheet" href="styles.css?v=1720429276708"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/event-driven-io/Pongo">Mongo but on Postgres and with strong consistency benefits</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>oskar_dudycz</span> | <span>152 comments</span></div><br/><div><div id="40903767" class="c"><input type="checkbox" id="c-40903767" checked=""/><div class="controls bullet"><span class="by">sberder</span><span>|</span><a href="#40899093">next</a><span>|</span><label class="collapse" for="c-40903767">[-]</label><label class="expand" for="c-40903767">[1 more]</label></div><br/><div class="children"><div class="content">This looks great, I&#x27;ll definitely give it a try. 
As many mentioned already, having classic columns and a JSON(B) column seems to be a common solution.
How do you handle data validation for the JSON documents?
My current project uses Django for metadata. I&#x27;ve been thinking about creating a layer similar to model fields in Django. You would declare a JSON &quot;model&quot; through those fields and assign it to the actual model JSON field.</div><br/></div></div><div id="40899093" class="c"><input type="checkbox" id="c-40899093" checked=""/><div class="controls bullet"><span class="by">cpursley</span><span>|</span><a href="#40903767">prev</a><span>|</span><a href="#40902564">next</a><span>|</span><label class="collapse" for="c-40899093">[-]</label><label class="expand" for="c-40899093">[4 more]</label></div><br/><div class="children"><div class="content">Thanks, just added Pongo to the NoSQL section of my &quot;Postgres Is Enough&quot; gist:<p><a href="https:&#x2F;&#x2F;gist.github.com&#x2F;cpursley&#x2F;c8fb81fe8a7e5df038158bdfe0f06dbb#nosql" rel="nofollow">https:&#x2F;&#x2F;gist.github.com&#x2F;cpursley&#x2F;c8fb81fe8a7e5df038158bdfe0f...</a></div><br/><div id="40902759" class="c"><input type="checkbox" id="c-40902759" checked=""/><div class="controls bullet"><span class="by">czechdeveloper</span><span>|</span><a href="#40899093">parent</a><span>|</span><a href="#40902121">next</a><span>|</span><label class="collapse" for="c-40902759">[-]</label><label class="expand" for="c-40902759">[1 more]</label></div><br/><div class="children"><div class="content">I suggest you add <a href="https:&#x2F;&#x2F;github.com&#x2F;tensorchord&#x2F;pgvecto.rs">https:&#x2F;&#x2F;github.com&#x2F;tensorchord&#x2F;pgvecto.rs</a> for vector search as well</div><br/></div></div><div id="40902121" class="c"><input type="checkbox" id="c-40902121" checked=""/><div class="controls bullet"><span class="by">pmarreck</span><span>|</span><a href="#40899093">parent</a><span>|</span><a href="#40902759">prev</a><span>|</span><a href="#40899872">next</a><span>|</span><label class="collapse" for="c-40902121">[-]</label><label class="expand" for="c-40902121">[1 more]</label></div><br/><div class="children"><div class="content">“Scalling” should say “Scaling”<p>Nice list!</div><br/></div></div><div id="40899872" class="c"><input type="checkbox" id="c-40899872" checked=""/><div class="controls bullet"><span class="by">oskar_dudycz</span><span>|</span><a href="#40899093">parent</a><span>|</span><a href="#40902121">prev</a><span>|</span><a href="#40902564">next</a><span>|</span><label class="collapse" for="c-40899872">[-]</label><label class="expand" for="c-40899872">[1 more]</label></div><br/><div class="children"><div class="content">Thank you!</div><br/></div></div></div></div><div id="40902564" class="c"><input type="checkbox" id="c-40902564" checked=""/><div class="controls bullet"><span class="by">marcus_holmes</span><span>|</span><a href="#40899093">prev</a><span>|</span><a href="#40903074">next</a><span>|</span><label class="collapse" for="c-40902564">[-]</label><label class="expand" for="c-40902564">[8 more]</label></div><br/><div class="children"><div class="content">I tried a similar approach in a previous startup - treat data as documents and store in a JSONB field.<p>Postgres was awesome and handled this brilliantly, but the lack of schema and typing killed it. We just ended up fighting data quality the whole time. We couldn&#x27;t assume that any document had all the required fields, or that they were in a format that made sense e.g. the Price column sometimes had currency symbols, and sometimes commas-and-periods in UK&#x2F;US format and sometimes in Euro format - sorting by Price involved some complicated parsing of all the records first.<p>We moved back to relational tables.<p>I won&#x27;t say I&#x27;d never do this again, but I would definitely not just throw JSON documents to a database and expect good things to happen.</div><br/><div id="40903486" class="c"><input type="checkbox" id="c-40903486" checked=""/><div class="controls bullet"><span class="by">winternewt</span><span>|</span><a href="#40902564">parent</a><span>|</span><a href="#40902836">next</a><span>|</span><label class="collapse" for="c-40903486">[-]</label><label class="expand" for="c-40903486">[1 more]</label></div><br/><div class="children"><div class="content">If you have schema requirements, why _not_ do it with tables and columns instead? The point of the jsonb column would be precisely to store arbitrary stuff that has no schema.</div><br/></div></div><div id="40902836" class="c"><input type="checkbox" id="c-40902836" checked=""/><div class="controls bullet"><span class="by">jamil7</span><span>|</span><a href="#40902564">parent</a><span>|</span><a href="#40903486">prev</a><span>|</span><a href="#40902953">next</a><span>|</span><label class="collapse" for="c-40902836">[-]</label><label class="expand" for="c-40902836">[1 more]</label></div><br/><div class="children"><div class="content">I don’t do much backend work at the moment but I found using JSONB fields for prototyping endpoints to be quite handy. Once I had a feature figured out and working, I’d create a proper schema.</div><br/></div></div><div id="40902953" class="c"><input type="checkbox" id="c-40902953" checked=""/><div class="controls bullet"><span class="by">goosejuice</span><span>|</span><a href="#40902564">parent</a><span>|</span><a href="#40902836">prev</a><span>|</span><a href="#40902596">next</a><span>|</span><label class="collapse" for="c-40902953">[-]</label><label class="expand" for="c-40902953">[2 more]</label></div><br/><div class="children"><div class="content">Sounds like most&#x2F;all of these issues would be solved by validation at the app layer.</div><br/><div id="40903067" class="c"><input type="checkbox" id="c-40903067" checked=""/><div class="controls bullet"><span class="by">ivandenysov</span><span>|</span><a href="#40902564">root</a><span>|</span><a href="#40902953">parent</a><span>|</span><a href="#40902596">next</a><span>|</span><label class="collapse" for="c-40903067">[-]</label><label class="expand" for="c-40903067">[1 more]</label></div><br/><div class="children"><div class="content">True, but for example with db-level validations I don’t have to worry that a new developer ships a batch job that runs raw inserts for performance reasons and bypasses app layer validations.</div><br/></div></div></div></div><div id="40902596" class="c"><input type="checkbox" id="c-40902596" checked=""/><div class="controls bullet"><span class="by">jimmyl02</span><span>|</span><a href="#40902564">parent</a><span>|</span><a href="#40902953">prev</a><span>|</span><a href="#40903074">next</a><span>|</span><label class="collapse" for="c-40902596">[-]</label><label class="expand" for="c-40902596">[3 more]</label></div><br/><div class="children"><div class="content">the view I now have is that for a relational table, yes you have to suffer through migrations but at least they are in sql. for document based stores, you still have to have migrations, but they are just implemented in code<p>json documents sound great, especially initially, but end up being a maintenance nightmare</div><br/><div id="40902715" class="c"><input type="checkbox" id="c-40902715" checked=""/><div class="controls bullet"><span class="by">hans_castorp</span><span>|</span><a href="#40902564">root</a><span>|</span><a href="#40902596">parent</a><span>|</span><a href="#40903321">next</a><span>|</span><label class="collapse" for="c-40902715">[-]</label><label class="expand" for="c-40902715">[1 more]</label></div><br/><div class="children"><div class="content">&gt; for document based stores, you still have to have migrations, but they are just implemented in code<p>The problem with that - in my experience - is that migrating the structure for thousands (if not millions) of documents is way slower than running a DDL command (as it means reading each document, parsing it, modifying it and writing it back). Many DDL commands are just metadata update to the system catalogs so they are quite fast (e.g. adding a new column with a default value). With documents you wind up with millions of single row updates.<p>This can be mitigated by doing a &quot;lazy&quot; migration when a document with the old structure is first read. But that makes the code much more complicated.</div><br/></div></div><div id="40903321" class="c"><input type="checkbox" id="c-40903321" checked=""/><div class="controls bullet"><span class="by">globular-toast</span><span>|</span><a href="#40902564">root</a><span>|</span><a href="#40902596">parent</a><span>|</span><a href="#40902715">prev</a><span>|</span><a href="#40903074">next</a><span>|</span><label class="collapse" for="c-40903321">[-]</label><label class="expand" for="c-40903321">[1 more]</label></div><br/><div class="children"><div class="content">Or, to put it another way, yes you have to write and maintain an upfront schema, but a document-based system has a schema too, it&#x27;s just distributed amongst 50 codebase and 10 people&#x27;s heads.</div><br/></div></div></div></div></div></div><div id="40903074" class="c"><input type="checkbox" id="c-40903074" checked=""/><div class="controls bullet"><span class="by">ilius2</span><span>|</span><a href="#40902564">prev</a><span>|</span><a href="#40898240">next</a><span>|</span><label class="collapse" for="c-40903074">[-]</label><label class="expand" for="c-40903074">[3 more]</label></div><br/><div class="children"><div class="content">If I were to start a new project, I would directly use postgres, and possibly add a JSONB column ONLY FOR OPTIONAL fields that you don&#x27;t query frequently. Throwing everything in a document is just fermenting chaos and pain. That being said, I do love the syntax and structure of Mongo pipelines over SQL.</div><br/><div id="40903546" class="c"><input type="checkbox" id="c-40903546" checked=""/><div class="controls bullet"><span class="by">throwaway76324</span><span>|</span><a href="#40903074">parent</a><span>|</span><a href="#40903160">next</a><span>|</span><label class="collapse" for="c-40903546">[-]</label><label class="expand" for="c-40903546">[1 more]</label></div><br/><div class="children"><div class="content">At $WORK, we use the same approach for integrations with 3rd party systems.<p>The data that is common for all integrations are stored as columns in a relational table. Data that are specific for each integration are stored in JSONB. This is typically meta data used to manage each integration that varies.<p>It works great and you get the combination of relational safety and no-schema flexibility where it matters.</div><br/></div></div><div id="40903160" class="c"><input type="checkbox" id="c-40903160" checked=""/><div class="controls bullet"><span class="by">stanislavb</span><span>|</span><a href="#40903074">parent</a><span>|</span><a href="#40903546">prev</a><span>|</span><a href="#40898240">next</a><span>|</span><label class="collapse" for="c-40903160">[-]</label><label class="expand" for="c-40903160">[1 more]</label></div><br/><div class="children"><div class="content">&quot;Throwing everything in a document is just fermenting chaos and pain.&quot; - I LOVE THIS.</div><br/></div></div></div></div><div id="40898240" class="c"><input type="checkbox" id="c-40898240" checked=""/><div class="controls bullet"><span class="by">zulban</span><span>|</span><a href="#40903074">prev</a><span>|</span><a href="#40900659">next</a><span>|</span><label class="collapse" for="c-40898240">[-]</label><label class="expand" for="c-40898240">[7 more]</label></div><br/><div class="children"><div class="content">Neat. When I migrated a project from mongo to postgres I took a similar approach, except I only implemented the mongo feel I needed within my own project instead of building a proper library as done here. I was surprised how much performance improved despite using a hacky wrapper.<p><a href="https:&#x2F;&#x2F;blog.stuartspence.ca&#x2F;2023-05-goodbye-mongo.html" rel="nofollow">https:&#x2F;&#x2F;blog.stuartspence.ca&#x2F;2023-05-goodbye-mongo.html</a><p>Personally tho, I plan to just drop all similarity to mongo in future projects.</div><br/><div id="40902476" class="c"><input type="checkbox" id="c-40902476" checked=""/><div class="controls bullet"><span class="by">throwaway2037</span><span>|</span><a href="#40898240">parent</a><span>|</span><a href="#40901356">next</a><span>|</span><label class="collapse" for="c-40902476">[-]</label><label class="expand" for="c-40902476">[2 more]</label></div><br/><div class="children"><div class="content">Cripes, this is a good blog post.  Did it get posted to HN for discussion?  If not, it should have been.  I especially like this part:<p><pre><code>    &gt; I&#x27;m trying to stay humble. Mongo must be an incredibly big project with lots of nuance. I&#x27;m just a solo developer and absolutely not a database engineer. I&#x27;ve also never had the opportunity to work closely with a good database engineer. However I shouldn&#x27;t be seeing improvements like this with default out of the box PostgreSQL compared to all the things I tried over the years to fix and tune Mongo.
</code></pre>
Humbleness: That is rare to see around here.  It is impressive that you go such speed-ups for your use case.  Congrats and thank you to share with the blog post.<p>EDIT<p>The Morgan Freeman meme at the end gave me a real laugh.  I would say the same about my experience with GridGain (&quot;GridPain&quot;).</div><br/><div id="40902984" class="c"><input type="checkbox" id="c-40902984" checked=""/><div class="controls bullet"><span class="by">dayjaby</span><span>|</span><a href="#40898240">root</a><span>|</span><a href="#40902476">parent</a><span>|</span><a href="#40901356">next</a><span>|</span><label class="collapse" for="c-40902984">[-]</label><label class="expand" for="c-40902984">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I knew it was time to migrate when my non-programmer wife was becoming familiar with Mongo shortcomings<p>That part was so relatable</div><br/></div></div></div></div><div id="40901356" class="c"><input type="checkbox" id="c-40901356" checked=""/><div class="controls bullet"><span class="by">jrochkind1</span><span>|</span><a href="#40898240">parent</a><span>|</span><a href="#40902476">prev</a><span>|</span><a href="#40899880">next</a><span>|</span><label class="collapse" for="c-40901356">[-]</label><label class="expand" for="c-40901356">[2 more]</label></div><br/><div class="children"><div class="content">&gt;  I was surprised how much performance improved<p>Are you saying you got better performance from postgres jsonb than from mongodb itself?</div><br/><div id="40903483" class="c"><input type="checkbox" id="c-40903483" checked=""/><div class="controls bullet"><span class="by">zo1</span><span>|</span><a href="#40898240">root</a><span>|</span><a href="#40901356">parent</a><span>|</span><a href="#40899880">next</a><span>|</span><label class="collapse" for="c-40903483">[-]</label><label class="expand" for="c-40903483">[1 more]</label></div><br/><div class="children"><div class="content">From the article, they mention this alongside a neat graph: &quot;API calls generally take 8 ms now, not 150 ms.&quot;<p>His endpoints went from 150ms (with Mongo) to 8ms after moving to Postgres.</div><br/></div></div></div></div><div id="40899880" class="c"><input type="checkbox" id="c-40899880" checked=""/><div class="controls bullet"><span class="by">oskar_dudycz</span><span>|</span><a href="#40898240">parent</a><span>|</span><a href="#40901356">prev</a><span>|</span><a href="#40901428">next</a><span>|</span><label class="collapse" for="c-40899880">[-]</label><label class="expand" for="c-40899880">[1 more]</label></div><br/><div class="children"><div class="content">Yup, I might not reach full compliance, but I will try to follow the Pareto principle. Thanks for the link and kind feedback!</div><br/></div></div><div id="40901428" class="c"><input type="checkbox" id="c-40901428" checked=""/><div class="controls bullet"><span class="by">Thaxll</span><span>|</span><a href="#40898240">parent</a><span>|</span><a href="#40899880">prev</a><span>|</span><a href="#40900659">next</a><span>|</span><label class="collapse" for="c-40901428">[-]</label><label class="expand" for="c-40901428">[1 more]</label></div><br/><div class="children"><div class="content">I remember your post back then and it did not made sense at all, many pointed out it was lacking information and you probably did something wrong with mongo.<p>All the stuff under Mongo Problems is garbage, sorry.</div><br/></div></div></div></div><div id="40900659" class="c"><input type="checkbox" id="c-40900659" checked=""/><div class="controls bullet"><span class="by">harel</span><span>|</span><a href="#40898240">prev</a><span>|</span><a href="#40901124">next</a><span>|</span><label class="collapse" for="c-40900659">[-]</label><label class="expand" for="c-40900659">[6 more]</label></div><br/><div class="children"><div class="content">I regularly find the hybrid model is a sweet spot. I keep core fields as regular columns and dynamic data structures as JSONB. It brings the best of both worlds together.</div><br/><div id="40902108" class="c"><input type="checkbox" id="c-40902108" checked=""/><div class="controls bullet"><span class="by">webprofusion</span><span>|</span><a href="#40900659">parent</a><span>|</span><a href="#40901042">next</a><span>|</span><label class="collapse" for="c-40902108">[-]</label><label class="expand" for="c-40902108">[1 more]</label></div><br/><div class="children"><div class="content">Yeah we do this as well. Have previously been a heavy MongoDB user but when we migrated to Postgres (using some relational schema with some JSONB for nested objects etc) it just made querying so much easier and reliability has been great.</div><br/></div></div><div id="40901042" class="c"><input type="checkbox" id="c-40901042" checked=""/><div class="controls bullet"><span class="by">Waterluvian</span><span>|</span><a href="#40900659">parent</a><span>|</span><a href="#40902108">prev</a><span>|</span><a href="#40901262">next</a><span>|</span><label class="collapse" for="c-40901042">[-]</label><label class="expand" for="c-40901042">[3 more]</label></div><br/><div class="children"><div class="content">I do this too with Postgres and it is just the best of both.<p>A robot is a record.  A sensor calibration is a record. A warehouse robot map with tens of thousands of geojson objects is a single record.<p>If I made every map entity its own record, my database would be 10_000x more records and I’d get no value out of it. We’re not doing spatial relational queries.</div><br/><div id="40902124" class="c"><input type="checkbox" id="c-40902124" checked=""/><div class="controls bullet"><span class="by">hobs</span><span>|</span><a href="#40900659">root</a><span>|</span><a href="#40901042">parent</a><span>|</span><a href="#40901262">next</a><span>|</span><label class="collapse" for="c-40902124">[-]</label><label class="expand" for="c-40902124">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s great when you have no reason EVER to decompose the data.<p>That being said, when you start going &quot;wait why is one record like this? oh no we have a bug and have to fix one of the records that looks like this across all data&quot; and now you get to update 10,000x the data to make one change.</div><br/><div id="40903717" class="c"><input type="checkbox" id="c-40903717" checked=""/><div class="controls bullet"><span class="by">harel</span><span>|</span><a href="#40900659">root</a><span>|</span><a href="#40902124">parent</a><span>|</span><a href="#40901262">next</a><span>|</span><label class="collapse" for="c-40903717">[-]</label><label class="expand" for="c-40903717">[1 more]</label></div><br/><div class="children"><div class="content">Small price to pay in my opinion. How often will that happen vs how often the database is used. Migrations like that can be done incrementally over time. It&#x27;s a solved problem.</div><br/></div></div></div></div></div></div></div></div><div id="40901124" class="c"><input type="checkbox" id="c-40901124" checked=""/><div class="controls bullet"><span class="by">willsmith72</span><span>|</span><a href="#40900659">prev</a><span>|</span><a href="#40902335">next</a><span>|</span><label class="collapse" for="c-40901124">[-]</label><label class="expand" for="c-40901124">[4 more]</label></div><br/><div class="children"><div class="content">It&#x27;s technologically cool, but I would love a &quot;why&quot; section in the README. Is the idea you&#x27;re a mongo Dev&#x2F;love the mongo api and want to use it rather than switch to pg apis? Or want to copy some code over from an old project?<p>I&#x27;m sure there are use cases, I&#x27;m just struggling to grasp them. Especially if it&#x27;s about reusing queries from other projects, AI is pretty good at that</div><br/><div id="40903432" class="c"><input type="checkbox" id="c-40903432" checked=""/><div class="controls bullet"><span class="by">oskar_dudycz</span><span>|</span><a href="#40901124">parent</a><span>|</span><a href="#40902051">next</a><span>|</span><label class="collapse" for="c-40903432">[-]</label><label class="expand" for="c-40903432">[1 more]</label></div><br/><div class="children"><div class="content">Good call! I added such a section: <a href="https:&#x2F;&#x2F;github.com&#x2F;event-driven-io&#x2F;Pongo?tab=readme-ov-file#why-pongo">https:&#x2F;&#x2F;github.com&#x2F;event-driven-io&#x2F;Pongo?tab=readme-ov-file#...</a>. I&#x27;d be interested in your thoughts on it.</div><br/></div></div><div id="40902051" class="c"><input type="checkbox" id="c-40902051" checked=""/><div class="controls bullet"><span class="by">megadal</span><span>|</span><a href="#40901124">parent</a><span>|</span><a href="#40903432">prev</a><span>|</span><a href="#40902335">next</a><span>|</span><label class="collapse" for="c-40902051">[-]</label><label class="expand" for="c-40902051">[2 more]</label></div><br/><div class="children"><div class="content">&gt; AI is pretty good at that<p>Good at what? Rewriting the queries?<p>I think the point of Pongo is you can use the exact same queries for the most part and just change backends.<p>I&#x27;ve worked a job in the past where this would have been useful (they chose Mongo and regretted it).</div><br/><div id="40902924" class="c"><input type="checkbox" id="c-40902924" checked=""/><div class="controls bullet"><span class="by">willsmith72</span><span>|</span><a href="#40901124">root</a><span>|</span><a href="#40902051">parent</a><span>|</span><a href="#40902335">next</a><span>|</span><label class="collapse" for="c-40902924">[-]</label><label class="expand" for="c-40902924">[1 more]</label></div><br/><div class="children"><div class="content">For sure, but it feels really risky. If it&#x27;s a small codebase, I would be more confident knowing what queries I was using and just switch them. If it&#x27;s a large codebase, I&#x27;d want some really comprehensive test coverage, including performance tests</div><br/></div></div></div></div></div></div><div id="40902335" class="c"><input type="checkbox" id="c-40902335" checked=""/><div class="controls bullet"><span class="by">frithsun</span><span>|</span><a href="#40901124">prev</a><span>|</span><a href="#40899385">next</a><span>|</span><label class="collapse" for="c-40902335">[-]</label><label class="expand" for="c-40902335">[2 more]</label></div><br/><div class="children"><div class="content">Programmers would be better served by learning nothing except SQL instead of their current strategy of trying to learn everything except SQL.</div><br/><div id="40903045" class="c"><input type="checkbox" id="c-40903045" checked=""/><div class="controls bullet"><span class="by">dudeinjapan</span><span>|</span><a href="#40902335">parent</a><span>|</span><a href="#40899385">next</a><span>|</span><label class="collapse" for="c-40903045">[-]</label><label class="expand" for="c-40903045">[1 more]</label></div><br/><div class="children"><div class="content">While I’d agree that understanding SQL basics is an important fundamental for novices to learn, I started using MongoDB 11 years ago and haven’t looked back.</div><br/></div></div></div></div><div id="40899385" class="c"><input type="checkbox" id="c-40899385" checked=""/><div class="controls bullet"><span class="by">hdhshdhshdjd</span><span>|</span><a href="#40902335">prev</a><span>|</span><a href="#40903298">next</a><span>|</span><label class="collapse" for="c-40899385">[-]</label><label class="expand" for="c-40899385">[16 more]</label></div><br/><div class="children"><div class="content">I use JSONB columns a lot, it has its place.  It can fit certain applications, but it does introduce a lot of extra query complexity and you lose out on some ways to speed up query performance that you could get from a relational approach.<p>Which is to say JSONB is useful, but I wouldn’t throw the relational baby out with the bath water.</div><br/><div id="40899885" class="c"><input type="checkbox" id="c-40899885" checked=""/><div class="controls bullet"><span class="by">oskar_dudycz</span><span>|</span><a href="#40899385">parent</a><span>|</span><a href="#40902351">next</a><span>|</span><label class="collapse" for="c-40899885">[-]</label><label class="expand" for="c-40899885">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;m planning to add possibility to use Generated Columns in the future <a href="https:&#x2F;&#x2F;www.postgresql.org&#x2F;docs&#x2F;current&#x2F;ddl-generated-columns.html" rel="nofollow">https:&#x2F;&#x2F;www.postgresql.org&#x2F;docs&#x2F;current&#x2F;ddl-generated-column...</a> to allow more optimisations.</div><br/><div id="40902455" class="c"><input type="checkbox" id="c-40902455" checked=""/><div class="controls bullet"><span class="by">cypherpunks01</span><span>|</span><a href="#40899385">root</a><span>|</span><a href="#40899885">parent</a><span>|</span><a href="#40902351">next</a><span>|</span><label class="collapse" for="c-40902455">[-]</label><label class="expand" for="c-40902455">[2 more]</label></div><br/><div class="children"><div class="content">Can a Generated Column read data from a JSONB column? That&#x27;d be really cool, but I&#x27;m not familiar enough with generated columns to know.</div><br/><div id="40902818" class="c"><input type="checkbox" id="c-40902818" checked=""/><div class="controls bullet"><span class="by">jamescrowley</span><span>|</span><a href="#40899385">root</a><span>|</span><a href="#40902455">parent</a><span>|</span><a href="#40902351">next</a><span>|</span><label class="collapse" for="c-40902818">[-]</label><label class="expand" for="c-40902818">[1 more]</label></div><br/><div class="children"><div class="content">Yep!</div><br/></div></div></div></div></div></div><div id="40902351" class="c"><input type="checkbox" id="c-40902351" checked=""/><div class="controls bullet"><span class="by">noisy_boy</span><span>|</span><a href="#40899385">parent</a><span>|</span><a href="#40899885">prev</a><span>|</span><a href="#40901349">next</a><span>|</span><label class="collapse" for="c-40902351">[-]</label><label class="expand" for="c-40902351">[2 more]</label></div><br/><div class="children"><div class="content">I think if a field in a JSONB column is used frequently in the most common query patterns, it might be time to &quot;surface&quot; it up among other non-JSONB relational columns. There will be some additional overhead e.g. it should be made a read-only column for consistency&#x27;s sake; if you update the value of this field in the JSONB column, this surfaced column should also be updated.<p>However, a bit of duplication is not a terrible trade-off for significantly improved query performance.</div><br/></div></div><div id="40901349" class="c"><input type="checkbox" id="c-40901349" checked=""/><div class="controls bullet"><span class="by">martinald</span><span>|</span><a href="#40899385">parent</a><span>|</span><a href="#40902351">prev</a><span>|</span><a href="#40900597">next</a><span>|</span><label class="collapse" for="c-40901349">[-]</label><label class="expand" for="c-40901349">[4 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve had extremely disappointing performance with postgres JSONB columns. I&#x27;ve used it a lot for MVPs and betas where it&#x27;s much easier to use JSONB and lock in your exact relational schema lately.<p>I&#x27;ve now decided this path is a mistake because the performance is so bad. Even with low thousands&#x2F;tens of thousands of rows it becomes a huge problem, queries that would take &lt;1ms on relational stuff quickly start taking hundreds of ms.<p>Optimizing these with hand rolled queries is painful (I do not like the syntax it uses for jsonb querying) and for some doesn&#x27;t really fix anything much, and indexes often don&#x27;t help.<p>It seems that jsonb is just many many order of magnitudes slower, but I could be doing something wrong. Take for example storing a dictionary of string and int (number?) in a jsonb column. Adding the ints up in jsonb takes thousands of times longer rather than having these as string and int in a standard table.<p>Perhaps I am doing something wrong; and I&#x27;d love to know it if I am!</div><br/><div id="40902913" class="c"><input type="checkbox" id="c-40902913" checked=""/><div class="controls bullet"><span class="by">phamilton</span><span>|</span><a href="#40899385">root</a><span>|</span><a href="#40901349">parent</a><span>|</span><a href="#40902061">next</a><span>|</span><label class="collapse" for="c-40902913">[-]</label><label class="expand" for="c-40902913">[1 more]</label></div><br/><div class="children"><div class="content">&gt; indexes often don&#x27;t help.<p>An &quot;index on expression&quot; should perform the same regardless of the input column types. All that matters is the output of the expression. Were you just indexing the whole jsonb column or were you indexing a specific expression?<p>For example, an index on `foo(user_id)` vs  `foo(data-&gt;&#x27;user_id&#x27;)` should perform the same.</div><br/></div></div><div id="40902061" class="c"><input type="checkbox" id="c-40902061" checked=""/><div class="controls bullet"><span class="by">ak217</span><span>|</span><a href="#40899385">root</a><span>|</span><a href="#40901349">parent</a><span>|</span><a href="#40902913">prev</a><span>|</span><a href="#40900597">next</a><span>|</span><label class="collapse" for="c-40902061">[-]</label><label class="expand" for="c-40902061">[2 more]</label></div><br/><div class="children"><div class="content">Did you have arrays in your jsonb data? I don&#x27;t currently use jsonb for production performance sensitive queries, but in the past what I learned was that it&#x27;s great at automatically indexing everything except arrays. You have to manually declare indexes on your arrays.<p>When jsonb works, it&#x27;s incredible. I&#x27;ve had many... suboptimal experiences with mongo, and jsonb is just superior in my experience (although like I said, I haven&#x27;t used it for performance critical stuff in production). For a long time, it kinda flew under the radar, and still remains an underappreciated feature of Postgres.</div><br/><div id="40903468" class="c"><input type="checkbox" id="c-40903468" checked=""/><div class="controls bullet"><span class="by">oskar_dudycz</span><span>|</span><a href="#40899385">root</a><span>|</span><a href="#40902061">parent</a><span>|</span><a href="#40900597">next</a><span>|</span><label class="collapse" for="c-40903468">[-]</label><label class="expand" for="c-40903468">[1 more]</label></div><br/><div class="children"><div class="content">There are, but indeed they&#x27;re a bit painful to index correctly. I&#x27;m planning to add in the future Generated Columns <a href="https:&#x2F;&#x2F;www.postgresql.org&#x2F;docs&#x2F;current&#x2F;ddl-generated-columns.html" rel="nofollow">https:&#x2F;&#x2F;www.postgresql.org&#x2F;docs&#x2F;current&#x2F;ddl-generated-column...</a> to give option to extract part of the json as regular column.</div><br/></div></div></div></div></div></div><div id="40900597" class="c"><input type="checkbox" id="c-40900597" checked=""/><div class="controls bullet"><span class="by">doctor_eval</span><span>|</span><a href="#40899385">parent</a><span>|</span><a href="#40901349">prev</a><span>|</span><a href="#40903298">next</a><span>|</span><label class="collapse" for="c-40900597">[-]</label><label class="expand" for="c-40900597">[6 more]</label></div><br/><div class="children"><div class="content">I’ve been doing some reasonably serious playing with the idea of using jsonb columns as a kind of front end to relational tables. So basically, external interactions with the database are done using JSON, which gives end users some flexibility, but internally we effectively create a realtime materialised view of just those properties we need from the json.<p>Anyone else tried this approach? Anything I should know about it?</div><br/><div id="40900800" class="c"><input type="checkbox" id="c-40900800" checked=""/><div class="controls bullet"><span class="by">hdhshdhshdjd</span><span>|</span><a href="#40899385">root</a><span>|</span><a href="#40900597">parent</a><span>|</span><a href="#40900953">next</a><span>|</span><label class="collapse" for="c-40900800">[-]</label><label class="expand" for="c-40900800">[1 more]</label></div><br/><div class="children"><div class="content">I do something similar, building a lightweight search index over very large relational datasets.<p>So the tables are much simpler to manage, much more portable, so I can serve search off scalable hardware without disturbing the underlying source of truth.<p>The downside is queries are more complex and slower.</div><br/></div></div><div id="40900953" class="c"><input type="checkbox" id="c-40900953" checked=""/><div class="controls bullet"><span class="by">Zenzero</span><span>|</span><a href="#40899385">root</a><span>|</span><a href="#40900597">parent</a><span>|</span><a href="#40900800">prev</a><span>|</span><a href="#40903298">next</a><span>|</span><label class="collapse" for="c-40900953">[-]</label><label class="expand" for="c-40900953">[4 more]</label></div><br/><div class="children"><div class="content">My mental model has always been to only use JSONB for column types where the relations within the json object are of no importance to the DB. An example might be text editor markup. I imagine if you start wanting to query within the json object you should consider a more relational model.</div><br/><div id="40902120" class="c"><input type="checkbox" id="c-40902120" checked=""/><div class="controls bullet"><span class="by">mbesto</span><span>|</span><a href="#40899385">root</a><span>|</span><a href="#40900953">parent</a><span>|</span><a href="#40901870">next</a><span>|</span><label class="collapse" for="c-40902120">[-]</label><label class="expand" for="c-40902120">[2 more]</label></div><br/><div class="children"><div class="content">I always thought JSONB is a great use case for client-specific customizations. For example - a CRM application where you have structured DB tables like &quot;account&quot;, &quot;opportunity&quot;, etc. but then a client-specific table might be &quot;cohort&quot;  that is linked to &quot;account&quot; and has fields &quot;cohort size&quot;, &quot;cohort name&quot;, etc. You just chuck the cohort table in JSONB and now the company who uses the CRM that has the custom cohort table can change that table without creating&#x2F;migrating your RDMS table structure.<p>Curious what other people think here?</div><br/><div id="40902175" class="c"><input type="checkbox" id="c-40902175" checked=""/><div class="controls bullet"><span class="by">Zenzero</span><span>|</span><a href="#40899385">root</a><span>|</span><a href="#40902120">parent</a><span>|</span><a href="#40901870">next</a><span>|</span><label class="collapse" for="c-40902175">[-]</label><label class="expand" for="c-40902175">[1 more]</label></div><br/><div class="children"><div class="content">That sounds like something that would be better tailored to well normalized tables and custom row entries. The question I&#x27;d ask is if something you&#x27;re concerned about being a column could instead be a row in a different table.</div><br/></div></div></div></div><div id="40901870" class="c"><input type="checkbox" id="c-40901870" checked=""/><div class="controls bullet"><span class="by">doctor_eval</span><span>|</span><a href="#40899385">root</a><span>|</span><a href="#40900953">parent</a><span>|</span><a href="#40902120">prev</a><span>|</span><a href="#40903298">next</a><span>|</span><label class="collapse" for="c-40901870">[-]</label><label class="expand" for="c-40901870">[1 more]</label></div><br/><div class="children"><div class="content">My experience has been that users like to include a lot of information that&#x27;s not relevant to the application I&#x27;m working on.<p>My application couldn&#x27;t really care less about customer names, for example. But the people who buy my software naturally do care - and what&#x27;s worse, each of my potential customers has some legacy system which stores their customer names in a different way. So one problem I want to address is, how do I maintain fidelity with the old system, for example during the data migration, while enabling me to move forward quickly?<p>My solution has been to keep non-functional data such as customer names in JSON, and extract only the two or three fields that are relevant to my application, and put them into a regular SQL database table.<p>So far this has given me the best of both worlds: a simple and highly customisable JSON API for these user-facing objects with mutable shapes, but a compact SQL backend for the actual work.</div><br/></div></div></div></div></div></div></div></div><div id="40903298" class="c"><input type="checkbox" id="c-40903298" checked=""/><div class="controls bullet"><span class="by">vmfunction</span><span>|</span><a href="#40899385">prev</a><span>|</span><a href="#40898283">next</a><span>|</span><label class="collapse" for="c-40903298">[-]</label><label class="expand" for="c-40903298">[1 more]</label></div><br/><div class="children"><div class="content">Hmmm how does this compare to <a href="https:&#x2F;&#x2F;www.ferretdb.com" rel="nofollow">https:&#x2F;&#x2F;www.ferretdb.com</a> ?<p>How does this handle large files? Is it enough to replace GridFS? One of main attraction for MongoDb is it&#x27;s handling of large files.</div><br/></div></div><div id="40898283" class="c"><input type="checkbox" id="c-40898283" checked=""/><div class="controls bullet"><span class="by">Squarex</span><span>|</span><a href="#40903298">prev</a><span>|</span><a href="#40901479">next</a><span>|</span><label class="collapse" for="c-40898283">[-]</label><label class="expand" for="c-40898283">[9 more]</label></div><br/><div class="children"><div class="content">How does it compare with FerretDB[0]?<p>[0] <a href="https:&#x2F;&#x2F;www.ferretdb.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.ferretdb.com&#x2F;</a></div><br/><div id="40898372" class="c"><input type="checkbox" id="c-40898372" checked=""/><div class="controls bullet"><span class="by">aleksi</span><span>|</span><a href="#40898283">parent</a><span>|</span><a href="#40898394">next</a><span>|</span><label class="collapse" for="c-40898372">[-]</label><label class="expand" for="c-40898372">[4 more]</label></div><br/><div class="children"><div class="content">(I&#x27;m FerretDB co-founder)<p>As far as I can tell, Pongo provides an API similar to the MongoDB driver for Node that uses PostgreSQL under the hood.
FerretDB operates on a different layer – it implements MongoDB network protocol, allowing it to work with any drivers and applications that use MongoDB without modifications.</div><br/><div id="40902430" class="c"><input type="checkbox" id="c-40902430" checked=""/><div class="controls bullet"><span class="by">Sytten</span><span>|</span><a href="#40898283">root</a><span>|</span><a href="#40898372">parent</a><span>|</span><a href="#40899423">next</a><span>|</span><label class="collapse" for="c-40902430">[-]</label><label class="expand" for="c-40902430">[1 more]</label></div><br/><div class="children"><div class="content">I dont want to sound rude, but as a bootstrap founder it kinda boggles my mind how much money people can raise for a product like ferretdb. I just don&#x27;t see how it can make VC level return without at the very least changing licenses which seems to ne the premise behind creating this MongoDB proxy. I am sure there is a narrative for it though so best of luck!<p>Also check you managed service links on GitHub, half are dead.</div><br/></div></div><div id="40899423" class="c"><input type="checkbox" id="c-40899423" checked=""/><div class="controls bullet"><span class="by">Keyframe</span><span>|</span><a href="#40898283">root</a><span>|</span><a href="#40898372">parent</a><span>|</span><a href="#40902430">prev</a><span>|</span><a href="#40898394">next</a><span>|</span><label class="collapse" for="c-40899423">[-]</label><label class="expand" for="c-40899423">[2 more]</label></div><br/><div class="children"><div class="content">Even monstache?</div><br/><div id="40901148" class="c"><input type="checkbox" id="c-40901148" checked=""/><div class="controls bullet"><span class="by">aleksi</span><span>|</span><a href="#40898283">root</a><span>|</span><a href="#40899423">parent</a><span>|</span><a href="#40898394">next</a><span>|</span><label class="collapse" for="c-40901148">[-]</label><label class="expand" for="c-40901148">[1 more]</label></div><br/><div class="children"><div class="content">That was the first time I heard about that project. Someone could check it using our guide: <a href="https:&#x2F;&#x2F;docs.ferretdb.io&#x2F;migration&#x2F;premigration-testing&#x2F;" rel="nofollow">https:&#x2F;&#x2F;docs.ferretdb.io&#x2F;migration&#x2F;premigration-testing&#x2F;</a> Or we will check it ourselves later: <a href="https:&#x2F;&#x2F;github.com&#x2F;FerretDB&#x2F;FerretDB&#x2F;issues&#x2F;4429">https:&#x2F;&#x2F;github.com&#x2F;FerretDB&#x2F;FerretDB&#x2F;issues&#x2F;4429</a></div><br/></div></div></div></div></div></div><div id="40898394" class="c"><input type="checkbox" id="c-40898394" checked=""/><div class="controls bullet"><span class="by">Zambyte</span><span>|</span><a href="#40898283">parent</a><span>|</span><a href="#40898372">prev</a><span>|</span><a href="#40899026">next</a><span>|</span><label class="collapse" for="c-40898394">[-]</label><label class="expand" for="c-40898394">[1 more]</label></div><br/><div class="children"><div class="content">The posted project looks like a client that connects to pg but behaves like Mongo, where Ferret is a server that accepts Mongo client connections and uses pg as backend storage.</div><br/></div></div><div id="40899026" class="c"><input type="checkbox" id="c-40899026" checked=""/><div class="controls bullet"><span class="by">oskar_dudycz</span><span>|</span><a href="#40898283">parent</a><span>|</span><a href="#40898394">prev</a><span>|</span><a href="#40901479">next</a><span>|</span><label class="collapse" for="c-40899026">[-]</label><label class="expand" for="c-40899026">[3 more]</label></div><br/><div class="children"><div class="content">Yes, I&#x27;m using MongoDB API in Pongo to keep the muscle memory. So, it&#x27;s a library that translates the MongoDB syntax to native PostgreSQL JSONB queries.</div><br/><div id="40901561" class="c"><input type="checkbox" id="c-40901561" checked=""/><div class="controls bullet"><span class="by">remram</span><span>|</span><a href="#40898283">root</a><span>|</span><a href="#40899026">parent</a><span>|</span><a href="#40901479">next</a><span>|</span><label class="collapse" for="c-40901561">[-]</label><label class="expand" for="c-40901561">[2 more]</label></div><br/><div class="children"><div class="content">&quot;how does it compare?&quot; &quot;yes&quot;<p>Are you sure you replied to the right comment?</div><br/><div id="40903161" class="c"><input type="checkbox" id="c-40903161" checked=""/><div class="controls bullet"><span class="by">oskar_dudycz</span><span>|</span><a href="#40898283">root</a><span>|</span><a href="#40901561">parent</a><span>|</span><a href="#40901479">next</a><span>|</span><label class="collapse" for="c-40903161">[-]</label><label class="expand" for="c-40903161">[1 more]</label></div><br/><div class="children"><div class="content">Yes to &quot;The posted project looks like a client that connects to pg but behaves like Mongo, where Ferret is a server that accepts Mongo client connections and uses pg as backend storage.&quot;</div><br/></div></div></div></div></div></div></div></div><div id="40901479" class="c"><input type="checkbox" id="c-40901479" checked=""/><div class="controls bullet"><span class="by">navbryce</span><span>|</span><a href="#40898283">prev</a><span>|</span><a href="#40901732">next</a><span>|</span><label class="collapse" for="c-40901479">[-]</label><label class="expand" for="c-40901479">[2 more]</label></div><br/><div class="children"><div class="content">I made a joke tweet about this in Nov 2023 (even called it &quot;Pongo&quot;). This is definitely a just a funny coincidence, but I&#x27;m going to pretend like I can see into the future:
<a href="https:&#x2F;&#x2F;x.com&#x2F;navbryce&#x2F;status&#x2F;1720580136737894661" rel="nofollow">https:&#x2F;&#x2F;x.com&#x2F;navbryce&#x2F;status&#x2F;1720580136737894661</a></div><br/><div id="40903563" class="c"><input type="checkbox" id="c-40903563" checked=""/><div class="controls bullet"><span class="by">oskar_dudycz</span><span>|</span><a href="#40901479">parent</a><span>|</span><a href="#40901732">next</a><span>|</span><label class="collapse" for="c-40903563">[-]</label><label class="expand" for="c-40903563">[1 more]</label></div><br/><div class="children"><div class="content">&quot;Great mind think likewise&quot; B-)</div><br/></div></div></div></div><div id="40901732" class="c"><input type="checkbox" id="c-40901732" checked=""/><div class="controls bullet"><span class="by">aussieguy1234</span><span>|</span><a href="#40901479">prev</a><span>|</span><a href="#40898230">next</a><span>|</span><label class="collapse" for="c-40901732">[-]</label><label class="expand" for="c-40901732">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;d like to know why AWS went with Aurora DB for their DocumentDB backend. Did the Mongo license change trigger a rush to build something Mongo compatible, but not quite MongoDB?</div><br/></div></div><div id="40898230" class="c"><input type="checkbox" id="c-40898230" checked=""/><div class="controls bullet"><span class="by">salomonk_mur</span><span>|</span><a href="#40901732">prev</a><span>|</span><a href="#40899629">next</a><span>|</span><label class="collapse" for="c-40898230">[-]</label><label class="expand" for="c-40898230">[8 more]</label></div><br/><div class="children"><div class="content">What would be the advantage of using this instead of simple jsonb columns?</div><br/><div id="40898311" class="c"><input type="checkbox" id="c-40898311" checked=""/><div class="controls bullet"><span class="by">joshmanders</span><span>|</span><a href="#40898230">parent</a><span>|</span><a href="#40898789">next</a><span>|</span><label class="collapse" for="c-40898311">[-]</label><label class="expand" for="c-40898311">[4 more]</label></div><br/><div class="children"><div class="content">It uses JSONb under the hood. Just gives you a very &quot;mongo&quot; feel to using PostgreSQL. Not sure how I feel about it.<p><pre><code>    CREATE TABLE IF NOT EXISTS %I (_id UUID PRIMARY KEY, data JSONB)</code></pre></div><br/><div id="40898331" class="c"><input type="checkbox" id="c-40898331" checked=""/><div class="controls bullet"><span class="by">wood_spirit</span><span>|</span><a href="#40898230">root</a><span>|</span><a href="#40898311">parent</a><span>|</span><a href="#40898789">next</a><span>|</span><label class="collapse" for="c-40898331">[-]</label><label class="expand" for="c-40898331">[3 more]</label></div><br/><div class="children"><div class="content">Can they make it use uuid7 for ids for better insert_becomes_append performance?</div><br/><div id="40898649" class="c"><input type="checkbox" id="c-40898649" checked=""/><div class="controls bullet"><span class="by">lgas</span><span>|</span><a href="#40898230">root</a><span>|</span><a href="#40898331">parent</a><span>|</span><a href="#40898789">next</a><span>|</span><label class="collapse" for="c-40898649">[-]</label><label class="expand" for="c-40898649">[2 more]</label></div><br/><div class="children"><div class="content">Yes</div><br/><div id="40899042" class="c"><input type="checkbox" id="c-40899042" checked=""/><div class="controls bullet"><span class="by">oskar_dudycz</span><span>|</span><a href="#40898230">root</a><span>|</span><a href="#40898649">parent</a><span>|</span><a href="#40898789">next</a><span>|</span><label class="collapse" for="c-40899042">[-]</label><label class="expand" for="c-40899042">[1 more]</label></div><br/><div class="children"><div class="content">Yes, I&#x27;m using JSONB underneath and translating the MongoDB syntax to native queries. As they&#x27;re not super pleasant to deal with, then I thought that it&#x27;d be nice to use some familiar to many MongoDB API.<p>Regarding IDs, you can use any UUID-compliant format.</div><br/></div></div></div></div></div></div></div></div><div id="40898789" class="c"><input type="checkbox" id="c-40898789" checked=""/><div class="controls bullet"><span class="by">lopatin</span><span>|</span><a href="#40898230">parent</a><span>|</span><a href="#40898311">prev</a><span>|</span><a href="#40898250">next</a><span>|</span><label class="collapse" for="c-40898789">[-]</label><label class="expand" for="c-40898789">[2 more]</label></div><br/><div class="children"><div class="content">jsonb isn&#x27;t web scale. Mongo is web scale.</div><br/><div id="40899103" class="c"><input type="checkbox" id="c-40899103" checked=""/><div class="controls bullet"><span class="by">digger495</span><span>|</span><a href="#40898230">root</a><span>|</span><a href="#40898789">parent</a><span>|</span><a href="#40898250">next</a><span>|</span><label class="collapse" for="c-40899103">[-]</label><label class="expand" for="c-40899103">[1 more]</label></div><br/><div class="children"><div class="content">I see what you did there</div><br/></div></div></div></div><div id="40898250" class="c"><input type="checkbox" id="c-40898250" checked=""/><div class="controls bullet"><span class="by">imnotjames</span><span>|</span><a href="#40898230">parent</a><span>|</span><a href="#40898789">prev</a><span>|</span><a href="#40899629">next</a><span>|</span><label class="collapse" for="c-40898250">[-]</label><label class="expand" for="c-40898250">[1 more]</label></div><br/><div class="children"><div class="content">Looks like it natches the mongo node API</div><br/></div></div></div></div><div id="40899629" class="c"><input type="checkbox" id="c-40899629" checked=""/><div class="controls bullet"><span class="by">314156</span><span>|</span><a href="#40898230">prev</a><span>|</span><a href="#40901546">next</a><span>|</span><label class="collapse" for="c-40899629">[-]</label><label class="expand" for="c-40899629">[5 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;docs.oracle.com&#x2F;en&#x2F;database&#x2F;oracle&#x2F;mongodb-api&#x2F;mgapi&#x2F;overview-oracle-database-api-mongodb.html#GUID-1CF44843-6294-45F0-8065-B9E8034D6CB1" rel="nofollow">https:&#x2F;&#x2F;docs.oracle.com&#x2F;en&#x2F;database&#x2F;oracle&#x2F;mongodb-api&#x2F;mgapi...</a><p>Oracle database has had a MongoDB compatible API for a few years now.</div><br/><div id="40899836" class="c"><input type="checkbox" id="c-40899836" checked=""/><div class="controls bullet"><span class="by">cyberpunk</span><span>|</span><a href="#40899629">parent</a><span>|</span><a href="#40901546">next</a><span>|</span><label class="collapse" for="c-40899836">[-]</label><label class="expand" for="c-40899836">[4 more]</label></div><br/><div class="children"><div class="content">And it only costs 75k a seat per year per developer, with free bi yearly license compliance audits, a million in ops and hardware to get near prod and all the docu is paywalled. What a deal!</div><br/><div id="40900496" class="c"><input type="checkbox" id="c-40900496" checked=""/><div class="controls bullet"><span class="by">slau</span><span>|</span><a href="#40899629">root</a><span>|</span><a href="#40899836">parent</a><span>|</span><a href="#40900763">next</a><span>|</span><label class="collapse" for="c-40900496">[-]</label><label class="expand" for="c-40900496">[2 more]</label></div><br/><div class="children"><div class="content">A client had a DB hosted by Oracle. The client was doing most of their compute on AWS, and wanted to have a synchronised copy made available to them on AWS. Oracle quoted them a cool $600k&#x2F;year to operate that copy,  with a 3 year contract.<p>DMS + Postgres did it for $5k&#x2F;year.</div><br/><div id="40902926" class="c"><input type="checkbox" id="c-40902926" checked=""/><div class="controls bullet"><span class="by">cyberpunk</span><span>|</span><a href="#40899629">root</a><span>|</span><a href="#40900496">parent</a><span>|</span><a href="#40900763">next</a><span>|</span><label class="collapse" for="c-40902926">[-]</label><label class="expand" for="c-40902926">[1 more]</label></div><br/><div class="children"><div class="content">Client of mine wanted to shift a rac cluster from some aging sparc gear into a VMware or openstack or whatever farm they had on premise; oracle demanded they pay CPU licenses for every single CPU in the cluster as each one could “potentially” run the oracle database, quoted them seven figures.<p>They rewrote the app instead.</div><br/></div></div></div></div><div id="40900763" class="c"><input type="checkbox" id="c-40900763" checked=""/><div class="controls bullet"><span class="by">314156</span><span>|</span><a href="#40899629">root</a><span>|</span><a href="#40899836">parent</a><span>|</span><a href="#40900496">prev</a><span>|</span><a href="#40901546">next</a><span>|</span><label class="collapse" for="c-40900763">[-]</label><label class="expand" for="c-40900763">[1 more]</label></div><br/><div class="children"><div class="content">Maybe you are unaware of this? <a href="https:&#x2F;&#x2F;www.oracle.com&#x2F;cloud&#x2F;free&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.oracle.com&#x2F;cloud&#x2F;free&#x2F;</a></div><br/></div></div></div></div></div></div><div id="40901546" class="c"><input type="checkbox" id="c-40901546" checked=""/><div class="controls bullet"><span class="by">a13n</span><span>|</span><a href="#40899629">prev</a><span>|</span><a href="#40898479">next</a><span>|</span><label class="collapse" for="c-40901546">[-]</label><label class="expand" for="c-40901546">[2 more]</label></div><br/><div class="children"><div class="content">Does Pongo work with mongoose? I would guess most mongo users are using mongoose and supporting that library would drive more adoption.</div><br/><div id="40903580" class="c"><input type="checkbox" id="c-40903580" checked=""/><div class="controls bullet"><span class="by">oskar_dudycz</span><span>|</span><a href="#40901546">parent</a><span>|</span><a href="#40898479">next</a><span>|</span><label class="collapse" for="c-40903580">[-]</label><label class="expand" for="c-40903580">[1 more]</label></div><br/><div class="children"><div class="content">Not yet, but it&#x27;s a nice idea. I added GH issue to track that: <a href="https:&#x2F;&#x2F;github.com&#x2F;event-driven-io&#x2F;Pongo&#x2F;issues&#x2F;13">https:&#x2F;&#x2F;github.com&#x2F;event-driven-io&#x2F;Pongo&#x2F;issues&#x2F;13</a></div><br/></div></div></div></div><div id="40898479" class="c"><input type="checkbox" id="c-40898479" checked=""/><div class="controls bullet"><span class="by">karmakaze</span><span>|</span><a href="#40901546">prev</a><span>|</span><a href="#40898447">next</a><span>|</span><label class="collapse" for="c-40898479">[-]</label><label class="expand" for="c-40898479">[27 more]</label></div><br/><div class="children"><div class="content">What makes mongo mongo is its distibruted nature, without it you could just store json(b) in an RDBMS.</div><br/><div id="40898686" class="c"><input type="checkbox" id="c-40898686" checked=""/><div class="controls bullet"><span class="by">anonzzzies</span><span>|</span><a href="#40898479">parent</a><span>|</span><a href="#40899844">next</a><span>|</span><label class="collapse" for="c-40898686">[-]</label><label class="expand" for="c-40898686">[8 more]</label></div><br/><div class="children"><div class="content">So how easy is it to distribute it? I don’t have experience with it but the tutorials look terrible compared to, say, Scylla, Yuga, Cockroach, TiDB etc. Again, honest question?</div><br/><div id="40902850" class="c"><input type="checkbox" id="c-40902850" checked=""/><div class="controls bullet"><span class="by">Too</span><span>|</span><a href="#40898479">root</a><span>|</span><a href="#40898686">parent</a><span>|</span><a href="#40898847">next</a><span>|</span><label class="collapse" for="c-40902850">[-]</label><label class="expand" for="c-40902850">[2 more]</label></div><br/><div class="children"><div class="content">It couldn’t be simpler. Just configure all clients and servers to be aware of each other and go.<p>Say what you want about the rest of mongo. This is an area where it actually shines.</div><br/><div id="40903351" class="c"><input type="checkbox" id="c-40903351" checked=""/><div class="controls bullet"><span class="by">anonzzzies</span><span>|</span><a href="#40898479">root</a><span>|</span><a href="#40902850">parent</a><span>|</span><a href="#40898847">next</a><span>|</span><label class="collapse" for="c-40903351">[-]</label><label class="expand" for="c-40903351">[1 more]</label></div><br/><div class="children"><div class="content">Alright, I&#x27;ll try it. Maybe I had the wrong tutorials or maybe these were old.</div><br/></div></div></div></div><div id="40898847" class="c"><input type="checkbox" id="c-40898847" checked=""/><div class="controls bullet"><span class="by">rad_gruchalski</span><span>|</span><a href="#40898479">root</a><span>|</span><a href="#40898686">parent</a><span>|</span><a href="#40902850">prev</a><span>|</span><a href="#40899449">next</a><span>|</span><label class="collapse" for="c-40898847">[-]</label><label class="expand" for="c-40898847">[3 more]</label></div><br/><div class="children"><div class="content">Pongo seems to be a middleware between your app and Postgres. So it will most certainly work absolutely fine on YugabyteDB, if one’s okay with occasional latency issues.<p>One could optimise it more for a distributed sql by implementing key partition awareness and connecting directly to a tserver storing the data one’s after.</div><br/><div id="40899061" class="c"><input type="checkbox" id="c-40899061" checked=""/><div class="controls bullet"><span class="by">oskar_dudycz</span><span>|</span><a href="#40898479">root</a><span>|</span><a href="#40898847">parent</a><span>|</span><a href="#40899449">next</a><span>|</span><label class="collapse" for="c-40899061">[-]</label><label class="expand" for="c-40899061">[2 more]</label></div><br/><div class="children"><div class="content">Yes, as long as database has support to JSONB and JSON path syntax (so PG 12 &gt;= compliant) you should be good to go :)</div><br/><div id="40899628" class="c"><input type="checkbox" id="c-40899628" checked=""/><div class="controls bullet"><span class="by">rad_gruchalski</span><span>|</span><a href="#40898479">root</a><span>|</span><a href="#40899061">parent</a><span>|</span><a href="#40899449">next</a><span>|</span><label class="collapse" for="c-40899628">[-]</label><label class="expand" for="c-40899628">[1 more]</label></div><br/><div class="children"><div class="content">It could work: <a href="https:&#x2F;&#x2F;docs.yugabyte.com&#x2F;preview&#x2F;explore&#x2F;ysql-language-features&#x2F;jsonb-ysql&#x2F;" rel="nofollow">https:&#x2F;&#x2F;docs.yugabyte.com&#x2F;preview&#x2F;explore&#x2F;ysql-language-feat...</a>.</div><br/></div></div></div></div></div></div><div id="40899449" class="c"><input type="checkbox" id="c-40899449" checked=""/><div class="controls bullet"><span class="by">theteapot</span><span>|</span><a href="#40898479">root</a><span>|</span><a href="#40898686">parent</a><span>|</span><a href="#40898847">prev</a><span>|</span><a href="#40899844">next</a><span>|</span><label class="collapse" for="c-40899449">[-]</label><label class="expand" for="c-40899449">[2 more]</label></div><br/><div class="children"><div class="content">Does &quot;distributed&quot; mean sharded or just replicated? In either case it&#x27;s a bit quirky but easy enough.<p>&gt; Scylla, Yuga, Cockroach, TiDB etc.<p>You have experience &quot;distributing&quot; all these DBs? That&#x27;s impressive.</div><br/><div id="40902640" class="c"><input type="checkbox" id="c-40902640" checked=""/><div class="controls bullet"><span class="by">anonzzzies</span><span>|</span><a href="#40898479">root</a><span>|</span><a href="#40899449">parent</a><span>|</span><a href="#40899844">next</a><span>|</span><label class="collapse" for="c-40902640">[-]</label><label class="expand" for="c-40902640">[1 more]</label></div><br/><div class="children"><div class="content">We evaluated these over the years for different purposes&#x2F;clients. And  I don’t expect the ‘quirky’ part in 2024 I guess; it gets hard of course when the loads get specific;  but in general I expect things to be automatic (multi master, sharding and replication) and simple to set up. Point out other nodes and done.</div><br/></div></div></div></div></div></div><div id="40899844" class="c"><input type="checkbox" id="c-40899844" checked=""/><div class="controls bullet"><span class="by">rework</span><span>|</span><a href="#40898479">parent</a><span>|</span><a href="#40898686">prev</a><span>|</span><a href="#40898505">next</a><span>|</span><label class="collapse" for="c-40899844">[-]</label><label class="expand" for="c-40899844">[4 more]</label></div><br/><div class="children"><div class="content">&gt; What makes mongo mongo is its distibruted nature<p>Since when? Mongo was popular because it gave the false perception it was insanely fast until people found out it was only fast if you didn&#x27;t care about your data, and the moment you ensure write happened it ended up being slower than an RDB....</div><br/><div id="40900389" class="c"><input type="checkbox" id="c-40900389" checked=""/><div class="controls bullet"><span class="by">jokethrowaway</span><span>|</span><a href="#40898479">root</a><span>|</span><a href="#40899844">parent</a><span>|</span><a href="#40898505">next</a><span>|</span><label class="collapse" for="c-40900389">[-]</label><label class="expand" for="c-40900389">[3 more]</label></div><br/><div class="children"><div class="content">Since forever, sharding,  distributing postgres &#x2F; mysql was not easy. There were a few proprietary extensions. Nowadays it&#x27;s more accessible.<p>This was typical crap you had to say to pass fang style interview &quot;oh of course I&#x27;d use mongo because this use case doesn&#x27;t have relations and because it&#x27;s easy to scale&quot;, while you know postgres will give you way less problems and allow you to make charts and analytics in 30m when finance comes around.<p>I made the mistake of picking mongo for my own startup, because of propaganda coming from interviewing materials and I regretted it for the entire duration of the company.</div><br/><div id="40901480" class="c"><input type="checkbox" id="c-40901480" checked=""/><div class="controls bullet"><span class="by">threeseed</span><span>|</span><a href="#40898479">root</a><span>|</span><a href="#40900389">parent</a><span>|</span><a href="#40898505">next</a><span>|</span><label class="collapse" for="c-40901480">[-]</label><label class="expand" for="c-40901480">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Nowadays it&#x27;s more accessible<p>Distributing PostgreSQL still requires proprietary extensions.<p>With the most popular being Citus which is owned by Microsoft and so questions should definitely remain about how long they support that instead of pushing users to Azure.<p>People like to bash MongoDB but at least they have a built-in, supported and usable HA&#x2F;Clustering solution. It&#x27;s ridiculous to not have this in 2024.</div><br/></div></div></div></div></div></div><div id="40898505" class="c"><input type="checkbox" id="c-40898505" checked=""/><div class="controls bullet"><span class="by">darby_nine</span><span>|</span><a href="#40898479">parent</a><span>|</span><a href="#40899844">prev</a><span>|</span><a href="#40898501">next</a><span>|</span><label class="collapse" for="c-40898505">[-]</label><label class="expand" for="c-40898505">[1 more]</label></div><br/><div class="children"><div class="content">but then you wouldn&#x27;t have the joy of using the most awkward query language invented by mankind</div><br/></div></div><div id="40898501" class="c"><input type="checkbox" id="c-40898501" checked=""/><div class="controls bullet"><span class="by">richwater</span><span>|</span><a href="#40898479">parent</a><span>|</span><a href="#40898505">prev</a><span>|</span><a href="#40898578">next</a><span>|</span><label class="collapse" for="c-40898501">[-]</label><label class="expand" for="c-40898501">[3 more]</label></div><br/><div class="children"><div class="content">&gt; store json(b) in an RDBMS<p>I actually did this for as small HR application and it worked incredible well.jsonb gin indexes are pretty nice once you get the hang of the syntax.<p>And then, you also have all the features of Postgres as a freebie.</div><br/><div id="40898733" class="c"><input type="checkbox" id="c-40898733" checked=""/><div class="controls bullet"><span class="by">eddd-ddde</span><span>|</span><a href="#40898479">root</a><span>|</span><a href="#40898501">parent</a><span>|</span><a href="#40898578">next</a><span>|</span><label class="collapse" for="c-40898733">[-]</label><label class="expand" for="c-40898733">[2 more]</label></div><br/><div class="children"><div class="content">Personally, I much better like postgres json syntax than whatever mongo invented.<p>Big fan of jsonb columns.</div><br/><div id="40899906" class="c"><input type="checkbox" id="c-40899906" checked=""/><div class="controls bullet"><span class="by">oskar_dudycz</span><span>|</span><a href="#40898479">root</a><span>|</span><a href="#40898733">parent</a><span>|</span><a href="#40898578">next</a><span>|</span><label class="collapse" for="c-40899906">[-]</label><label class="expand" for="c-40899906">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m planning to add methods for raw JSON path or, in general, raw SQL syntax to enable such fine-tuning and not need to always use MongoDB API. I agree that for many people, this would be better.</div><br/></div></div></div></div></div></div><div id="40898578" class="c"><input type="checkbox" id="c-40898578" checked=""/><div class="controls bullet"><span class="by">zihotki</span><span>|</span><a href="#40898479">parent</a><span>|</span><a href="#40898501">prev</a><span>|</span><a href="#40898542">next</a><span>|</span><label class="collapse" for="c-40898578">[-]</label><label class="expand" for="c-40898578">[6 more]</label></div><br/><div class="children"><div class="content">But RDBMS&#x27;es are often also distributed. So what is mongo now?</div><br/><div id="40898607" class="c"><input type="checkbox" id="c-40898607" checked=""/><div class="controls bullet"><span class="by">marcosdumay</span><span>|</span><a href="#40898479">root</a><span>|</span><a href="#40898578">parent</a><span>|</span><a href="#40898818">next</a><span>|</span><label class="collapse" for="c-40898607">[-]</label><label class="expand" for="c-40898607">[4 more]</label></div><br/><div class="children"><div class="content">People don&#x27;t usually distribute Postgres (unless you count read replicas and cold HA replicas). But well, people don&#x27;t usually distribute MongoDB either, so no difference.<p>In principle, a cluster of something like Mongo can scale much further than Postgres. In practice, Mongo is full of issues even before you replicate it, and you are better with something that abstracts a set if incoherent Postgres (or sqlite) instances.</div><br/><div id="40899889" class="c"><input type="checkbox" id="c-40899889" checked=""/><div class="controls bullet"><span class="by">hibikir</span><span>|</span><a href="#40898479">root</a><span>|</span><a href="#40898607">parent</a><span>|</span><a href="#40899372">next</a><span>|</span><label class="collapse" for="c-40899889">[-]</label><label class="expand" for="c-40899889">[1 more]</label></div><br/><div class="children"><div class="content">I think of the Stripe Mongo install, as it was a decade or so ago. It really was sharded quite wide, and relied on all shards having multiple replicas, as to tolerate cycling through them on a regular basis. It worked well enough to run as a source of truth for a financial company, but the database team wasn&#x27;t small, dedicated to keeping all that machinery working well.<p>Ultimately anyone doing things at that scale is going to run a small priesthood doing custom things to keep the persistence payer humming, regardless of what the underlying database is. I recall a project abstracting over the Mongo API, as to allow for swapping the storage layer if they ever needed to</div><br/></div></div><div id="40899372" class="c"><input type="checkbox" id="c-40899372" checked=""/><div class="controls bullet"><span class="by">zozbot234</span><span>|</span><a href="#40898479">root</a><span>|</span><a href="#40898607">parent</a><span>|</span><a href="#40899889">prev</a><span>|</span><a href="#40898818">next</a><span>|</span><label class="collapse" for="c-40899372">[-]</label><label class="expand" for="c-40899372">[2 more]</label></div><br/><div class="children"><div class="content">Postgres supports foreign data wrapper (FDW), which is the basic building block for a distributed DB. It doesn&#x27;t support strong consistency in distributed settings as of yet, although it does provide two-phase commit which could be used for such.</div><br/><div id="40899569" class="c"><input type="checkbox" id="c-40899569" checked=""/><div class="controls bullet"><span class="by">williamdclt</span><span>|</span><a href="#40898479">root</a><span>|</span><a href="#40899372">parent</a><span>|</span><a href="#40898818">next</a><span>|</span><label class="collapse" for="c-40899569">[-]</label><label class="expand" for="c-40899569">[1 more]</label></div><br/><div class="children"><div class="content">&gt; strong consistency in distributed settings<p>I doubt it ever will. The point of distributing a data store is latency and availability, both of which would go down the drain with distributed strong consistency</div><br/></div></div></div></div></div></div><div id="40898818" class="c"><input type="checkbox" id="c-40898818" checked=""/><div class="controls bullet"><span class="by">brabel</span><span>|</span><a href="#40898479">root</a><span>|</span><a href="#40898578">parent</a><span>|</span><a href="#40898607">prev</a><span>|</span><a href="#40898542">next</a><span>|</span><label class="collapse" for="c-40898818">[-]</label><label class="expand" for="c-40898818">[1 more]</label></div><br/><div class="children"><div class="content">Often?? In my experience it&#x27;s really hard to do it and still maintain similar performance, which kind of voids any benefit you may be looking for.</div><br/></div></div></div></div><div id="40898542" class="c"><input type="checkbox" id="c-40898542" checked=""/><div class="controls bullet"><span class="by">lkdfjlkdfjlg</span><span>|</span><a href="#40898479">parent</a><span>|</span><a href="#40898578">prev</a><span>|</span><a href="#40898447">next</a><span>|</span><label class="collapse" for="c-40898542">[-]</label><label class="expand" for="c-40898542">[4 more]</label></div><br/><div class="children"><div class="content">&gt; What makes mongo mongo is its distibruted nature, without it you could just store json(b) in an RDBMS.<p>Welllllllll I think that&#x27;s moving the goalposts. Being distributed might be a thing _now_ but I still remember when it was marketed as the thing to have if you wanted to store unstructured documents.<p>Now that Postgres also does that, you&#x27;re marketing Mongo as having a different unique feature. Moving the goalposts.</div><br/><div id="40898642" class="c"><input type="checkbox" id="c-40898642" checked=""/><div class="controls bullet"><span class="by">thfuran</span><span>|</span><a href="#40898479">root</a><span>|</span><a href="#40898542">parent</a><span>|</span><a href="#40898447">next</a><span>|</span><label class="collapse" for="c-40898642">[-]</label><label class="expand" for="c-40898642">[3 more]</label></div><br/><div class="children"><div class="content">It doesn&#x27;t really seem reasonable to accuse someone of moving goalposts that you&#x27;ve just brought into the conversation, especially when they were allegedly set by a third party.</div><br/><div id="40898940" class="c"><input type="checkbox" id="c-40898940" checked=""/><div class="controls bullet"><span class="by">coldtea</span><span>|</span><a href="#40898479">root</a><span>|</span><a href="#40898642">parent</a><span>|</span><a href="#40898447">next</a><span>|</span><label class="collapse" for="c-40898940">[-]</label><label class="expand" for="c-40898940">[2 more]</label></div><br/><div class="children"><div class="content">Parent didn&#x27;t &quot;just brought them&quot;, they merely referrenced the pre-existing goalposts used to advocate for Mongo and reasons devs adopted it.</div><br/><div id="40900249" class="c"><input type="checkbox" id="c-40900249" checked=""/><div class="controls bullet"><span class="by">lkdfjlkdfjlg</span><span>|</span><a href="#40898479">root</a><span>|</span><a href="#40898940">parent</a><span>|</span><a href="#40898447">next</a><span>|</span><label class="collapse" for="c-40900249">[-]</label><label class="expand" for="c-40900249">[1 more]</label></div><br/><div class="children"><div class="content">Exactly this, very eloquent, thank you.<p>Yes, I&#x27;m still bitter because I was one of those tricked into it.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="40898447" class="c"><input type="checkbox" id="c-40898447" checked=""/><div class="controls bullet"><span class="by">pipe_connector</span><span>|</span><a href="#40898479">prev</a><span>|</span><a href="#40898381">next</a><span>|</span><label class="collapse" for="c-40898447">[-]</label><label class="expand" for="c-40898447">[23 more]</label></div><br/><div class="children"><div class="content">MongoDB has supported the equivalent of Postgres&#x27; serializable isolation for many years now. I&#x27;m not sure what &quot;with strong consistency benefits&quot; means.</div><br/><div id="40898558" class="c"><input type="checkbox" id="c-40898558" checked=""/><div class="controls bullet"><span class="by">zihotki</span><span>|</span><a href="#40898447">parent</a><span>|</span><a href="#40901573">next</a><span>|</span><label class="collapse" for="c-40898558">[-]</label><label class="expand" for="c-40898558">[6 more]</label></div><br/><div class="children"><div class="content">Or is it? Jepsen reported a number of issues like &quot;read skew, cyclic information flow, duplicate writes, and internal consistency violations. Weak defaults meant that transactions could lose writes and allow dirty reads, even downgrading requested safety levels at the database and collection level. Moreover, the snapshot read concern did not guarantee snapshot unless paired with write concern majority—even for read-only transactions.&quot;<p>That report (1) is 4 years old, many things could have changed. But so far any reviewed version was faulty in regards to consistency.<p>1 - <a href="https:&#x2F;&#x2F;jepsen.io&#x2F;analyses&#x2F;mongodb-4.2.6" rel="nofollow">https:&#x2F;&#x2F;jepsen.io&#x2F;analyses&#x2F;mongodb-4.2.6</a></div><br/><div id="40900004" class="c"><input type="checkbox" id="c-40900004" checked=""/><div class="controls bullet"><span class="by">pipe_connector</span><span>|</span><a href="#40898447">root</a><span>|</span><a href="#40898558">parent</a><span>|</span><a href="#40898631">next</a><span>|</span><label class="collapse" for="c-40900004">[-]</label><label class="expand" for="c-40900004">[1 more]</label></div><br/><div class="children"><div class="content">Jepsen found a more concerning consistency bug than the above results when Postgres 12 was evaluated [1]. Relevant text:<p>We [...] found that transactions executed with serializable isolation on a single PostgreSQL instance were not, in fact, serializable<p>I have run Postgres and MongoDB at petabyte scale. Both of them are solid databases that occasionally have bugs in their transaction logic. Any distributed database that is receiving significant development will have bugs like this. Yes, even FoundationDB.<p>I wouldn&#x27;t not use Postgres because of this problem, just like I wouldn&#x27;t not use MongoDB because they had bugs in a new feature. In fact, I&#x27;m more likely to trust a company that is paying to consistently have their work reviewed in public.<p>1. <a href="https:&#x2F;&#x2F;jepsen.io&#x2F;analyses&#x2F;postgresql-12.3" rel="nofollow">https:&#x2F;&#x2F;jepsen.io&#x2F;analyses&#x2F;postgresql-12.3</a></div><br/></div></div><div id="40898631" class="c"><input type="checkbox" id="c-40898631" checked=""/><div class="controls bullet"><span class="by">endisneigh</span><span>|</span><a href="#40898447">root</a><span>|</span><a href="#40898558">parent</a><span>|</span><a href="#40900004">prev</a><span>|</span><a href="#40899407">next</a><span>|</span><label class="collapse" for="c-40898631">[-]</label><label class="expand" for="c-40898631">[2 more]</label></div><br/><div class="children"><div class="content">That’s been resolved for a long time now (not to say that MongoDB is perfect, though).</div><br/><div id="40899658" class="c"><input type="checkbox" id="c-40899658" checked=""/><div class="controls bullet"><span class="by">nick_</span><span>|</span><a href="#40898447">root</a><span>|</span><a href="#40898631">parent</a><span>|</span><a href="#40899407">next</a><span>|</span><label class="collapse" for="c-40899658">[-]</label><label class="expand" for="c-40899658">[1 more]</label></div><br/><div class="children"><div class="content">I just want to point out that 4 years is not a long time in the context of consistency guarantees of a database engine.<p>I have listened to Mongo evangelists a few times despite my skepticism and been burned every time. Mongo is way oversold, IMO.</div><br/></div></div></div></div><div id="40899407" class="c"><input type="checkbox" id="c-40899407" checked=""/><div class="controls bullet"><span class="by">vorticalbox</span><span>|</span><a href="#40898447">root</a><span>|</span><a href="#40898558">parent</a><span>|</span><a href="#40898631">prev</a><span>|</span><a href="#40901573">next</a><span>|</span><label class="collapse" for="c-40899407">[-]</label><label class="expand" for="c-40899407">[2 more]</label></div><br/><div class="children"><div class="content">That is for mongo 4.x but latest stable is 6.0.7 which has note
More resilient operations and Additional data security.<p><a href="https:&#x2F;&#x2F;www.mongodb.com&#x2F;blog&#x2F;post&#x2F;big-reasons-upgrade-mongodb-6-0" rel="nofollow">https:&#x2F;&#x2F;www.mongodb.com&#x2F;blog&#x2F;post&#x2F;big-reasons-upgrade-mongod...</a></div><br/><div id="40901919" class="c"><input type="checkbox" id="c-40901919" checked=""/><div class="controls bullet"><span class="by">mmcclimon</span><span>|</span><a href="#40898447">root</a><span>|</span><a href="#40899407">parent</a><span>|</span><a href="#40901573">next</a><span>|</span><label class="collapse" for="c-40901919">[-]</label><label class="expand" for="c-40901919">[1 more]</label></div><br/><div class="children"><div class="content">FWIW, the latest stable release is 7.0.12, released a week or so ago: <a href="https:&#x2F;&#x2F;www.mongodb.com&#x2F;docs&#x2F;upcoming&#x2F;release-notes&#x2F;7.0&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.mongodb.com&#x2F;docs&#x2F;upcoming&#x2F;release-notes&#x2F;7.0&#x2F;</a>. (I&#x27;m not sure why the URL has &#x2F;upcoming&#x2F; in it, actually: 7.0 is definitely the stable release.)</div><br/></div></div></div></div></div></div><div id="40901573" class="c"><input type="checkbox" id="c-40901573" checked=""/><div class="controls bullet"><span class="by">danpalmer</span><span>|</span><a href="#40898447">parent</a><span>|</span><a href="#40898558">prev</a><span>|</span><a href="#40898532">next</a><span>|</span><label class="collapse" for="c-40901573">[-]</label><label class="expand" for="c-40901573">[6 more]</label></div><br/><div class="children"><div class="content">MongoDB had &quot;strong consistency&quot; back in 2013 when I studied it for my thesis. The problem is that consistency is a lot bigger space than being on or off, and MongoDB inhabited the lower classes of consistency for a long time <i>while calling it strong consistency</i> which lost a lot of developer trust. Postgres has a range of options, but the default is typically consistent enough to make most use-cases safe, whereas Mongo&#x27;s default wasn&#x27;t anywhere close.<p>They also had a big problem trading performance and consistency, to the point that for a long time (v1-2?) they ran in default-inconsistent mode to meet the numbers marketing was putting out. Postgres has never done this, partly because it doesn&#x27;t have a marketing team, but again this lost a lot trust.<p>Lastly, even with the stronger end of their consistency guarantees, and as they have increased their guarantees, problems have been found again and again. It&#x27;s common knowledge that it&#x27;s better to find your own bugs than have your customers tell you about them, but in database consistency this is more true than normal. This is why FoundationDB are famous for having built a database testing setup before a database (somewhat true). It&#x27;s clear from history that MongoDB don&#x27;t have a sufficiently rigorous testing procedure.<p>All of these factors come down to trust: the community lacks trust in MongoDB because of repeated issues across a number of areas. As a result, just shipping &quot;strong consistency&quot; or something doesn&#x27;t actually solve the root problem, that people don&#x27;t want to use the product.</div><br/><div id="40902127" class="c"><input type="checkbox" id="c-40902127" checked=""/><div class="controls bullet"><span class="by">pipe_connector</span><span>|</span><a href="#40898447">root</a><span>|</span><a href="#40901573">parent</a><span>|</span><a href="#40902458">next</a><span>|</span><label class="collapse" for="c-40902127">[-]</label><label class="expand" for="c-40902127">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s fair to distrust something because you were burned by using it in the past. However, both the examples you named -- Postgres and FoundationDB -- have had similar concurrency and&#x2F;or data loss bugs. I have personally seen FoundationDB lose a committed write. Writing databases is hard and it&#x27;s easy to buy into marketing hype around safety.<p>I think you should reconsider your last paragraph. MongoDB has a massive community, and many large companies opt to use it for new applications every day. Many more people want to use that product than FoundationDB.</div><br/><div id="40902287" class="c"><input type="checkbox" id="c-40902287" checked=""/><div class="controls bullet"><span class="by">daniel-grigg</span><span>|</span><a href="#40898447">root</a><span>|</span><a href="#40902127">parent</a><span>|</span><a href="#40902458">next</a><span>|</span><label class="collapse" for="c-40902287">[-]</label><label class="expand" for="c-40902287">[1 more]</label></div><br/><div class="children"><div class="content">Can you elaborate on why ‘many large companies’ are choosing MongoDB over alternatives and what their use cases are? I’ve been using Mdb for a decade and with how rich the DB landscape is for optimising particular workloads I just don’t see what the value proposition is for Mdb is compared to most of them. I certainly wouldn’t use it for any data intensive application when there’s other fantastic OLAP dbs, nor some battle hardened distributed nodes use case, so that leaves a ‘general purpose db with very specific queries and limited indexes’. But then why not just use as PG as others say?</div><br/></div></div></div></div><div id="40902458" class="c"><input type="checkbox" id="c-40902458" checked=""/><div class="controls bullet"><span class="by">throwaway2037</span><span>|</span><a href="#40898447">root</a><span>|</span><a href="#40901573">parent</a><span>|</span><a href="#40902127">prev</a><span>|</span><a href="#40901891">next</a><span>|</span><label class="collapse" for="c-40902458">[-]</label><label class="expand" for="c-40902458">[1 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>    &gt; my thesis
</code></pre>
Can you share a link?  I would like to read your research.</div><br/></div></div><div id="40901891" class="c"><input type="checkbox" id="c-40901891" checked=""/><div class="controls bullet"><span class="by">nijave</span><span>|</span><a href="#40898447">root</a><span>|</span><a href="#40901573">parent</a><span>|</span><a href="#40902458">prev</a><span>|</span><a href="#40898532">next</a><span>|</span><label class="collapse" for="c-40901891">[-]</label><label class="expand" for="c-40901891">[2 more]</label></div><br/><div class="children"><div class="content">Have you looked at versions in the last couple years to see if they&#x27;ve made progress?</div><br/><div id="40902000" class="c"><input type="checkbox" id="c-40902000" checked=""/><div class="controls bullet"><span class="by">danpalmer</span><span>|</span><a href="#40898447">root</a><span>|</span><a href="#40901891">parent</a><span>|</span><a href="#40898532">next</a><span>|</span><label class="collapse" for="c-40902000">[-]</label><label class="expand" for="c-40902000">[1 more]</label></div><br/><div class="children"><div class="content">This kinda misses my point. By having poor defaults in the past, marketing claims at-odds with reality, and being repeatedly found to have bugs that reduce consistency, the result is that customer have no reason to trust current claims.<p>They may have fixed everything, but the only way to know that is to use it and see (because the issue was trusting marketing&#x2F;docs&#x2F;promises), and why should people put that time in when they&#x27;ve repeatedly got it wrong, especially when there are options that are just better now.</div><br/></div></div></div></div></div></div><div id="40898532" class="c"><input type="checkbox" id="c-40898532" checked=""/><div class="controls bullet"><span class="by">throwup238</span><span>|</span><a href="#40898447">parent</a><span>|</span><a href="#40901573">prev</a><span>|</span><a href="#40898524">next</a><span>|</span><label class="collapse" for="c-40898532">[-]</label><label class="expand" for="c-40898532">[2 more]</label></div><br/><div class="children"><div class="content"><i>&gt; I&#x27;m not sure what &quot;with strong consistency benefits&quot; means.</i><p>&quot;Doesn&#x27;t use MongoDB&quot; was my first thought.</div><br/></div></div><div id="40898524" class="c"><input type="checkbox" id="c-40898524" checked=""/><div class="controls bullet"><span class="by">Izkata</span><span>|</span><a href="#40898447">parent</a><span>|</span><a href="#40898532">prev</a><span>|</span><a href="#40898526">next</a><span>|</span><label class="collapse" for="c-40898524">[-]</label><label class="expand" for="c-40898524">[1 more]</label></div><br/><div class="children"><div class="content">&gt; MongoDB has supported the equivalent of Postgres&#x27; serializable isolation for many years now.<p>That would be the &quot;I&quot; in ACID<p>&gt; I&#x27;m not sure what &quot;with strong consistency benefits&quot; means.<p>Probably the &quot;C&quot; in ACID:  Data integrity, such as constraints and foreign keys.<p><a href="https:&#x2F;&#x2F;www.bmc.com&#x2F;blogs&#x2F;acid-atomic-consistent-isolated-durable&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.bmc.com&#x2F;blogs&#x2F;acid-atomic-consistent-isolated-du...</a></div><br/></div></div><div id="40898526" class="c"><input type="checkbox" id="c-40898526" checked=""/><div class="controls bullet"><span class="by">lkdfjlkdfjlg</span><span>|</span><a href="#40898447">parent</a><span>|</span><a href="#40898524">prev</a><span>|</span><a href="#40900348">next</a><span>|</span><label class="collapse" for="c-40898526">[-]</label><label class="expand" for="c-40898526">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Pongo - Mongo but on Postgres and with strong consistency benefits.<p>I don&#x27;t read this as saying it&#x27;s &quot;MongoDB but with...&quot;. I read it as saying that it&#x27;s Postgres.</div><br/></div></div><div id="40900348" class="c"><input type="checkbox" id="c-40900348" checked=""/><div class="controls bullet"><span class="by">jokethrowaway</span><span>|</span><a href="#40898447">parent</a><span>|</span><a href="#40898526">prev</a><span>|</span><a href="#40898381">next</a><span>|</span><label class="collapse" for="c-40900348">[-]</label><label class="expand" for="c-40900348">[6 more]</label></div><br/><div class="children"><div class="content">Have you tried it in production? 
It&#x27;s absolute mayhem.<p>Deadlocks were common; it uses a system of retries if the transaction fails; we had to disable transactions completely.<p>Next step is either writing a writer queue manually or migrating to postgres.<p>For now we fly without transaction and fix the occasional concurrency issues.</div><br/><div id="40900463" class="c"><input type="checkbox" id="c-40900463" checked=""/><div class="controls bullet"><span class="by">pipe_connector</span><span>|</span><a href="#40898447">root</a><span>|</span><a href="#40900348">parent</a><span>|</span><a href="#40901459">next</a><span>|</span><label class="collapse" for="c-40900463">[-]</label><label class="expand" for="c-40900463">[4 more]</label></div><br/><div class="children"><div class="content">Yes, I have worked on an application that pushed enormous volumes of data through MongoDB&#x27;s transactions.<p>Deadlocks are an application issue. If you built your application the same way with Postgres you would have the same problem. Automatic retries of failed transactions with specific error codes are a driver feature you can tune or turn off if you&#x27;d like. The same is true for some Postgres drivers.<p>If you&#x27;re seeing frequent deadlocks, your transactions are too large. If you model your data differently, deadlocks can be eliminated completely (and this advice applies regardless of the database you&#x27;re using). I would recommend you engage a third party to review your data access patterns before you migrate and experience the same issues with Postgres.</div><br/><div id="40900835" class="c"><input type="checkbox" id="c-40900835" checked=""/><div class="controls bullet"><span class="by">akoboldfrying</span><span>|</span><a href="#40898447">root</a><span>|</span><a href="#40900463">parent</a><span>|</span><a href="#40901459">next</a><span>|</span><label class="collapse" for="c-40900835">[-]</label><label class="expand" for="c-40900835">[3 more]</label></div><br/><div class="children"><div class="content">&gt;Deadlocks are an application issue.<p>Not necessarily, and not in the very common single-writer-many-reader case. In that case, PostreSQL&#x27;s MVCC allows all readers to see consistent snapshots of the data without blocking each other or the writer. TTBOMK, any other mechanism providing this guarantee requires locking (making deadlocks possible).<p>So: Does Mongo now also implement MVCC? (Last time I checked, it didn&#x27;t.) If not, how does it guarantee that reads see consistent snapshots without blocking a writer?</div><br/><div id="40902022" class="c"><input type="checkbox" id="c-40902022" checked=""/><div class="controls bullet"><span class="by">devit</span><span>|</span><a href="#40898447">root</a><span>|</span><a href="#40900835">parent</a><span>|</span><a href="#40901255">next</a><span>|</span><label class="collapse" for="c-40902022">[-]</label><label class="expand" for="c-40902022">[1 more]</label></div><br/><div class="children"><div class="content">Locking doesn&#x27;t result in deadlocks, assuming that it&#x27;s implemented properly.<p>If you know the set of locks ahead of time, just sort them by address and take them, which will always succeed with no deadlocks.<p>If the set of locks isn&#x27;t known, then assign each transaction an increasing ID.<p>When trying to take a lock that is taken, then if the lock owner has higher ID signal it to terminate and retry after waiting for this transaction to terminate, and sleep waiting for it to release the lock.<p>Otherwise if it has lower ID abort the transaction, wait for the conflicting transaction to finish and then retry the transaction.<p>This guarantees that all transactions will terminate as long as each would terminate in isolation and that a transaction will retry at most once for each preceding running transaction.<p>It&#x27;s also possible to detect deadlocks by keeping track of which thread every thread is waiting for and signaling the either the highest transaction ID in the cycle or the one the lowest ID is waiting for to abort, wait for ID it was waiting for terminate and retry.</div><br/></div></div><div id="40901255" class="c"><input type="checkbox" id="c-40901255" checked=""/><div class="controls bullet"><span class="by">pipe_connector</span><span>|</span><a href="#40898447">root</a><span>|</span><a href="#40900835">parent</a><span>|</span><a href="#40902022">prev</a><span>|</span><a href="#40901459">next</a><span>|</span><label class="collapse" for="c-40901255">[-]</label><label class="expand" for="c-40901255">[1 more]</label></div><br/><div class="children"><div class="content">MongoDB (via WiredTiger) has used MVCC to solve this problem since transactions were introduced.</div><br/></div></div></div></div></div></div><div id="40901459" class="c"><input type="checkbox" id="c-40901459" checked=""/><div class="controls bullet"><span class="by">threeseed</span><span>|</span><a href="#40898447">root</a><span>|</span><a href="#40900348">parent</a><span>|</span><a href="#40900463">prev</a><span>|</span><a href="#40898381">next</a><span>|</span><label class="collapse" for="c-40901459">[-]</label><label class="expand" for="c-40901459">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Next step is either writing a writer queue manually<p>You can just use a connection pool and limit writer threads.<p>You should be using one to manage your database connections regardless of which database you are using.</div><br/></div></div></div></div></div></div><div id="40898381" class="c"><input type="checkbox" id="c-40898381" checked=""/><div class="controls bullet"><span class="by">ramchip</span><span>|</span><a href="#40898447">prev</a><span>|</span><a href="#40898248">next</a><span>|</span><label class="collapse" for="c-40898381">[-]</label><label class="expand" for="c-40898381">[2 more]</label></div><br/><div class="children"><div class="content">Have you tried it with CockroachDB?</div><br/><div id="40899050" class="c"><input type="checkbox" id="c-40899050" checked=""/><div class="controls bullet"><span class="by">oskar_dudycz</span><span>|</span><a href="#40898381">parent</a><span>|</span><a href="#40898248">next</a><span>|</span><label class="collapse" for="c-40899050">[-]</label><label class="expand" for="c-40899050">[1 more]</label></div><br/><div class="children"><div class="content">I did not, but I&#x27;m not using any fancy syntax so far besides JSONB operators. If it won&#x27;t work, then I&#x27;m happy to adjust it to make it compliant.</div><br/></div></div></div></div><div id="40898248" class="c"><input type="checkbox" id="c-40898248" checked=""/><div class="controls bullet"><span class="by">joeyagreco</span><span>|</span><a href="#40898381">prev</a><span>|</span><a href="#40899840">next</a><span>|</span><label class="collapse" for="c-40898248">[-]</label><label class="expand" for="c-40898248">[2 more]</label></div><br/><div class="children"><div class="content">Good work! I would like to see a section on the README outlining the benefits of Pongo</div><br/><div id="40899053" class="c"><input type="checkbox" id="c-40899053" checked=""/><div class="controls bullet"><span class="by">oskar_dudycz</span><span>|</span><a href="#40898248">parent</a><span>|</span><a href="#40899840">next</a><span>|</span><label class="collapse" for="c-40899053">[-]</label><label class="expand" for="c-40899053">[1 more]</label></div><br/><div class="children"><div class="content">Thanks, I&#x27;ll try to cover that, good call!</div><br/></div></div></div></div><div id="40899840" class="c"><input type="checkbox" id="c-40899840" checked=""/><div class="controls bullet"><span class="by">rework</span><span>|</span><a href="#40898248">prev</a><span>|</span><a href="#40902250">next</a><span>|</span><label class="collapse" for="c-40899840">[-]</label><label class="expand" for="c-40899840">[5 more]</label></div><br/><div class="children"><div class="content">Looks sort of like MartenDB but trying to minic mongo api, unsure why anyone would want to do that... mongo api is horrible...</div><br/><div id="40899847" class="c"><input type="checkbox" id="c-40899847" checked=""/><div class="controls bullet"><span class="by">JanSt</span><span>|</span><a href="#40899840">parent</a><span>|</span><a href="#40902250">next</a><span>|</span><label class="collapse" for="c-40899847">[-]</label><label class="expand" for="c-40899847">[4 more]</label></div><br/><div class="children"><div class="content">Wouldn&#x27;t that allow to switch from Mongo to Postgres without having to rewrite all of your app?</div><br/><div id="40899868" class="c"><input type="checkbox" id="c-40899868" checked=""/><div class="controls bullet"><span class="by">oskar_dudycz</span><span>|</span><a href="#40899840">root</a><span>|</span><a href="#40899847">parent</a><span>|</span><a href="#40902250">next</a><span>|</span><label class="collapse" for="c-40899868">[-]</label><label class="expand" for="c-40899868">[3 more]</label></div><br/><div class="children"><div class="content">Hint: I&#x27;m an ex-Marten maintainer, so the similarity is not accidental ;)<p>As Op said, not needing to rewrite applications or using the muscle memory from using Mongo is beneficial. I&#x27;m not planning to be strict and support only MongoDB API; I will extend it when needed (e.g. to support raw SQL or JSON Path). But I plan to keep shim with compliant API for the above reasons.<p>MongoDB API has its quirks but is also pretty powerful and widely used.</div><br/><div id="40900014" class="c"><input type="checkbox" id="c-40900014" checked=""/><div class="controls bullet"><span class="by">rework</span><span>|</span><a href="#40899840">root</a><span>|</span><a href="#40899868">parent</a><span>|</span><a href="#40902250">next</a><span>|</span><label class="collapse" for="c-40900014">[-]</label><label class="expand" for="c-40900014">[2 more]</label></div><br/><div class="children"><div class="content">Oh, so you are, then we can rest assured this will end up being a solid project!<p>I personally can&#x27;t stand mongodb, its given me alot of headaches, joined a company and the same week I joined we lost a ton of data and the twat who set it up resigned in the middle of the outage. Got it back online and spend 6m moving to postgresql.</div><br/><div id="40903451" class="c"><input type="checkbox" id="c-40903451" checked=""/><div class="controls bullet"><span class="by">oskar_dudycz</span><span>|</span><a href="#40899840">root</a><span>|</span><a href="#40900014">parent</a><span>|</span><a href="#40902250">next</a><span>|</span><label class="collapse" for="c-40903451">[-]</label><label class="expand" for="c-40903451">[1 more]</label></div><br/><div class="children"><div class="content">Thanks, that&#x27;s the goal: to bring the solid and verified approach in Marten to Node.js land. The concept is similar, but the feature set will be different.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="40902250" class="c"><input type="checkbox" id="c-40902250" checked=""/><div class="controls bullet"><span class="by">DonnyV</span><span>|</span><a href="#40899840">prev</a><span>|</span><a href="#40900151">next</a><span>|</span><label class="collapse" for="c-40902250">[-]</label><label class="expand" for="c-40902250">[2 more]</label></div><br/><div class="children"><div class="content">Would love a C# version of this. I usually use Mongodb for all of our projects. But we need to use Postgres for a project. This would come in very handy.</div><br/><div id="40903172" class="c"><input type="checkbox" id="c-40903172" checked=""/><div class="controls bullet"><span class="by">oskar_dudycz</span><span>|</span><a href="#40902250">parent</a><span>|</span><a href="#40900151">next</a><span>|</span><label class="collapse" for="c-40903172">[-]</label><label class="expand" for="c-40903172">[1 more]</label></div><br/><div class="children"><div class="content">You can check Marten, that I was co-maintaining: <a href="https:&#x2F;&#x2F;martendb.io&#x2F;" rel="nofollow">https:&#x2F;&#x2F;martendb.io&#x2F;</a>. It doesn&#x27;t have MongoDB-compliant API, but it&#x27;s mature, stable and efficient.</div><br/></div></div></div></div><div id="40900151" class="c"><input type="checkbox" id="c-40900151" checked=""/><div class="controls bullet"><span class="by">Tao3300</span><span>|</span><a href="#40902250">prev</a><span>|</span><a href="#40901638">next</a><span>|</span><label class="collapse" for="c-40900151">[-]</label><label class="expand" for="c-40900151">[2 more]</label></div><br/><div class="children"><div class="content">Ditch the dalmatian before Disney rips your face off.</div><br/><div id="40903437" class="c"><input type="checkbox" id="c-40903437" checked=""/><div class="controls bullet"><span class="by">oskar_dudycz</span><span>|</span><a href="#40900151">parent</a><span>|</span><a href="#40901638">next</a><span>|</span><label class="collapse" for="c-40903437">[-]</label><label class="expand" for="c-40903437">[1 more]</label></div><br/><div class="children"><div class="content">Fair, I&#x27;ll redraw it ;)</div><br/></div></div></div></div><div id="40901638" class="c"><input type="checkbox" id="c-40901638" checked=""/><div class="controls bullet"><span class="by">deanCommie</span><span>|</span><a href="#40900151">prev</a><span>|</span><a href="#40899000">next</a><span>|</span><label class="collapse" for="c-40901638">[-]</label><label class="expand" for="c-40901638">[2 more]</label></div><br/><div class="children"><div class="content">So DocumentDB? <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=18870397">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=18870397</a></div><br/><div id="40903455" class="c"><input type="checkbox" id="c-40903455" checked=""/><div class="controls bullet"><span class="by">oskar_dudycz</span><span>|</span><a href="#40901638">parent</a><span>|</span><a href="#40899000">next</a><span>|</span><label class="collapse" for="c-40903455">[-]</label><label class="expand" for="c-40903455">[1 more]</label></div><br/><div class="children"><div class="content">Yes, a similar idea, but I don&#x27;t aim to be 100% MongoDB compliant or full replacement. My goal is to use as many of PostgreSQL features as possible. Having the library level as translation will allow more scenarios like, e.g. sharing connection and using PostgreSQL hosting.</div><br/></div></div></div></div><div id="40899000" class="c"><input type="checkbox" id="c-40899000" checked=""/><div class="controls bullet"><span class="by">posix_monad</span><span>|</span><a href="#40901638">prev</a><span>|</span><a href="#40898363">next</a><span>|</span><label class="collapse" for="c-40899000">[-]</label><label class="expand" for="c-40899000">[3 more]</label></div><br/><div class="children"><div class="content">Does MongoDB have serious market share compared to DynamoDB (and similar clones from Azure, GCP) at this point?</div><br/><div id="40901539" class="c"><input type="checkbox" id="c-40901539" checked=""/><div class="controls bullet"><span class="by">maxdo</span><span>|</span><a href="#40899000">parent</a><span>|</span><a href="#40899561">next</a><span>|</span><label class="collapse" for="c-40901539">[-]</label><label class="expand" for="c-40901539">[1 more]</label></div><br/><div class="children"><div class="content">Mongodb and dynamodb are completely different dbs. One is unlimited scale KV but very expensive , another is document nosql db that sells you idea “it just works” for lots of features , indexes on anything , aggregation , time series . Vector DB, sharding , replicas etc . It’s a very powerful db for sure.</div><br/></div></div><div id="40899561" class="c"><input type="checkbox" id="c-40899561" checked=""/><div class="controls bullet"><span class="by">dudeinjapan</span><span>|</span><a href="#40899000">parent</a><span>|</span><a href="#40901539">prev</a><span>|</span><a href="#40898363">next</a><span>|</span><label class="collapse" for="c-40899561">[-]</label><label class="expand" for="c-40899561">[1 more]</label></div><br/><div class="children"><div class="content">Totally. Many of the biggest tech companies are using for core use cases. Stripe uses a modified version:
<a href="https:&#x2F;&#x2F;stripe.com&#x2F;blog&#x2F;how-stripes-document-databases-supported-99.999-uptime-with-zero-downtime-data-migrations" rel="nofollow">https:&#x2F;&#x2F;stripe.com&#x2F;blog&#x2F;how-stripes-document-databases-suppo...</a><p>We use MongoDB’s cloud offering called Atlas as our core DB at TableCheck.</div><br/></div></div></div></div><div id="40899294" class="c"><input type="checkbox" id="c-40899294" checked=""/><div class="controls bullet"><span class="by">revskill</span><span>|</span><a href="#40898363">prev</a><span>|</span><label class="collapse" for="c-40899294">[-]</label><label class="expand" for="c-40899294">[2 more]</label></div><br/><div class="children"><div class="content">Genius.</div><br/><div id="40899891" class="c"><input type="checkbox" id="c-40899891" checked=""/><div class="controls bullet"><span class="by">oskar_dudycz</span><span>|</span><a href="#40899294">parent</a><span>|</span><label class="collapse" for="c-40899891">[-]</label><label class="expand" for="c-40899891">[1 more]</label></div><br/><div class="children"><div class="content">&lt;3</div><br/></div></div></div></div></div></div></div></div></div></body></html>