<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1721638876449" as="style"/><link rel="stylesheet" href="styles.css?v=1721638876449"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://lexi-lambda.github.io/blog/2019/11/05/parse-don-t-validate/">Parse, Don&#x27;t Validate</a>Â <span class="domain">(<a href="https://lexi-lambda.github.io">lexi-lambda.github.io</a>)</span></div><div class="subtext"><span>revskill</span> | <span>15 comments</span></div><br/><div><div id="41031878" class="c"><input type="checkbox" id="c-41031878" checked=""/><div class="controls bullet"><span class="by">dgb23</span><span>|</span><a href="#41032208">next</a><span>|</span><label class="collapse" for="c-41031878">[-]</label><label class="expand" for="c-41031878">[5 more]</label></div><br/><div class="children"><div class="content">This is very good advice and a great article. It comes up on this site now and then because of it.<p>For those who don&#x27;t necessarily program in statically typed functional languages:<p>The idea transcends paradigms.<p>You&#x27;ll find very similar notions in 80&#x27;s&#x2F;90&#x27;s OO literature, for example in Design by Contract. I&#x27;m sure one can dig deeper and find papers, discussions and specifications that go further back.<p>I think TypeScript is often written in such a way where you refine the types at runtime. I assume Design by Contract has influenced Clojure&#x27;s spec (Clojure is a dynamic language).<p>Fundamentally this is about assumptions and guarantees (or requiring and providing). Once an assumption is checked and guarantees can be made, then other parts of the program don&#x27;t need to check overlapping assumptions again.<p>In fact I think one of the most confusing things when you read code is seeing already guaranteed properties being checked again somewhere else. It makes code harder to reason about and improve.</div><br/><div id="41032213" class="c"><input type="checkbox" id="c-41032213" checked=""/><div class="controls bullet"><span class="by">paganel</span><span>|</span><a href="#41031878">parent</a><span>|</span><a href="#41032094">next</a><span>|</span><label class="collapse" for="c-41032213">[-]</label><label class="expand" for="c-41032213">[1 more]</label></div><br/><div class="children"><div class="content">&gt;  is seeing already guaranteed properties being checked again somewhere else<p>Because at some point those &quot;already guaranteed properties&quot; might &quot;disappear&quot;, to be more exact, the process&#x2F;procedure that implements and runs them might not do its thing anymore for one reason or another.<p>When that happens, because statistically speaking it will happen, then all the other processes&#x2F;scripts&#x2F;pieces of code depending on that &quot;original&quot; validating process would be in a very rough place.</div><br/></div></div><div id="41032094" class="c"><input type="checkbox" id="c-41032094" checked=""/><div class="controls bullet"><span class="by">atoav</span><span>|</span><a href="#41031878">parent</a><span>|</span><a href="#41032213">prev</a><span>|</span><a href="#41031986">next</a><span>|</span><label class="collapse" for="c-41032094">[-]</label><label class="expand" for="c-41032094">[1 more]</label></div><br/><div class="children"><div class="content">When you have a language with a strong type system, this is one of the practical things that ultimately gives you freedom as your program gets bigger and more complex.<p>But you have to use it. E.g. by having a Class UncheckedEmail, a Class ValidEmail and a Class VerifiedEmail and ensuring that the conversion from one to the other has to involve your email-verification process.<p>That way you never have to guess whether the email adress is unchecked, valid or verified and there is no need for &quot;is_email_verified&quot; booleans that you may or may not forget to update&#x2F;check. If you use the wrong thing in the wrong place your type checker yells at you, while you can focus on actually important stuff.</div><br/></div></div><div id="41031986" class="c"><input type="checkbox" id="c-41031986" checked=""/><div class="controls bullet"><span class="by">Sakos</span><span>|</span><a href="#41031878">parent</a><span>|</span><a href="#41032094">prev</a><span>|</span><a href="#41032208">next</a><span>|</span><label class="collapse" for="c-41031986">[-]</label><label class="expand" for="c-41031986">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been going through the comments on previous posts. I think one of the biggest issues with the article is the title. It seems to act as an anchor for a lot of people to the point where they&#x27;ll argue against things that aren&#x27;t in the article, just implied by the title (without context). So there&#x27;ll be people arguing that she doesn&#x27;t want to validate at all and just wants to parse, when really the article is about where you validate your data (and what you do with the result). It is <i>not</i> about getting rid of all validation.</div><br/><div id="41032054" class="c"><input type="checkbox" id="c-41032054" checked=""/><div class="controls bullet"><span class="by">blowski</span><span>|</span><a href="#41031878">root</a><span>|</span><a href="#41031986">parent</a><span>|</span><a href="#41032208">next</a><span>|</span><label class="collapse" for="c-41032054">[-]</label><label class="expand" for="c-41032054">[1 more]</label></div><br/><div class="children"><div class="content">This is true of all famous essays. People remove the nuance included in the body and over-apply the title without really understanding it.<p>For example &quot;Goto considered harmful&quot;. I remember working with a very good programmer who&#x27;d used a &quot;goto&quot;, and a much less senior one[1] rejected their PR by linking to the article.<p>[1] I&#x27;m ashamed to say it was me, a long time ago.</div><br/></div></div></div></div></div></div><div id="41032208" class="c"><input type="checkbox" id="c-41032208" checked=""/><div class="controls bullet"><span class="by">vladssw</span><span>|</span><a href="#41031878">prev</a><span>|</span><a href="#41031861">next</a><span>|</span><label class="collapse" for="c-41032208">[-]</label><label class="expand" for="c-41032208">[1 more]</label></div><br/><div class="children"><div class="content">Related: &quot;Making Impossible States Impossible&quot; by Richard Feldman<p><a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=IcgmSRJHu_8" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=IcgmSRJHu_8</a></div><br/></div></div><div id="41031861" class="c"><input type="checkbox" id="c-41031861" checked=""/><div class="controls bullet"><span class="by">PreInternet01</span><span>|</span><a href="#41032208">prev</a><span>|</span><a href="#41032068">next</a><span>|</span><label class="collapse" for="c-41031861">[-]</label><label class="expand" for="c-41031861">[1 more]</label></div><br/><div class="children"><div class="content">(2019), but still good-ish advice. The pattern works like a charm in modern C# as well, and has nice space-saving effects too by allowing you to omit the explicit variable declaration:<p><pre><code>    if(!Whatever.TryParse&lt;Thingy&gt;(input, out var output)) output = some-sane-default;
</code></pre>
or:<p><pre><code>    if(!Whatever.TryParse&lt;Thingy&gt;(input, out var output)) throw new ApplicationException($&quot;Not a valid Thingy: {input}&quot;);
</code></pre>
Protip: <i>don&#x27;t</i> do the latter in your kernel-mode driver.</div><br/></div></div><div id="41032068" class="c"><input type="checkbox" id="c-41032068" checked=""/><div class="controls bullet"><span class="by">knallfrosch</span><span>|</span><a href="#41031861">prev</a><span>|</span><a href="#41032024">next</a><span>|</span><label class="collapse" for="c-41032068">[-]</label><label class="expand" for="c-41032068">[2 more]</label></div><br/><div class="children"><div class="content">Great advice and works well in TypeScript as well. See <a href="https:&#x2F;&#x2F;www.typescriptlang.org&#x2F;docs&#x2F;handbook&#x2F;advanced-types.html#using-type-predicates" rel="nofollow">https:&#x2F;&#x2F;www.typescriptlang.org&#x2F;docs&#x2F;handbook&#x2F;advanced-types....</a><p>More than merely catching compiler errors, this also makes writing code faster by offering better auto-completion for new code.</div><br/><div id="41032093" class="c"><input type="checkbox" id="c-41032093" checked=""/><div class="controls bullet"><span class="by">tossandthrow</span><span>|</span><a href="#41032068">parent</a><span>|</span><a href="#41032024">next</a><span>|</span><label class="collapse" for="c-41032093">[-]</label><label class="expand" for="c-41032093">[1 more]</label></div><br/><div class="children"><div class="content">This is a super tool! But it still requires one to write good gates.<p>For all projects of some. Size I would advice people to use Zod or the like (unless there are special circumstances such that external deps can not be used).</div><br/></div></div></div></div><div id="41032024" class="c"><input type="checkbox" id="c-41032024" checked=""/><div class="controls bullet"><span class="by">blowski</span><span>|</span><a href="#41032068">prev</a><span>|</span><a href="#41031987">next</a><span>|</span><label class="collapse" for="c-41032024">[-]</label><label class="expand" for="c-41032024">[1 more]</label></div><br/><div class="children"><div class="content">Some good previous discussions on this:<p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=35053118">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=35053118</a><p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=21476261">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=21476261</a></div><br/></div></div><div id="41031987" class="c"><input type="checkbox" id="c-41031987" checked=""/><div class="controls bullet"><span class="by">WiSaGaN</span><span>|</span><a href="#41032024">prev</a><span>|</span><a href="#41031864">next</a><span>|</span><label class="collapse" for="c-41031987">[-]</label><label class="expand" for="c-41031987">[1 more]</label></div><br/><div class="children"><div class="content">Utilize strong type system to make the error case unrepresentable. This is great advice to reduce bugs in software in general. It takes more time to think about the problem and to make a design following this. However, a lot of times it is worth the time.</div><br/></div></div><div id="41031864" class="c"><input type="checkbox" id="c-41031864" checked=""/><div class="controls bullet"><span class="by">teeheelol</span><span>|</span><a href="#41031987">prev</a><span>|</span><a href="#41031782">next</a><span>|</span><label class="collapse" for="c-41031864">[-]</label><label class="expand" for="c-41031864">[1 more]</label></div><br/><div class="children"><div class="content">Forwarded to crowdstrike.</div><br/></div></div><div id="41031782" class="c"><input type="checkbox" id="c-41031782" checked=""/><div class="controls bullet"><span class="by">brunooliv</span><span>|</span><a href="#41031864">prev</a><span>|</span><a href="#41032019">next</a><span>|</span><label class="collapse" for="c-41031782">[-]</label><label class="expand" for="c-41031782">[1 more]</label></div><br/><div class="children"><div class="content">This post is bookmarked for me since this first time I read it and I occasionally come back to it, itâs a great one</div><br/></div></div><div id="41032019" class="c"><input type="checkbox" id="c-41032019" checked=""/><div class="controls bullet"><span class="by">zendist</span><span>|</span><a href="#41031782">prev</a><span>|</span><label class="collapse" for="c-41032019">[-]</label><label class="expand" for="c-41032019">[1 more]</label></div><br/><div class="children"><div class="content">It seems that CloudStrike only parsed and didn&#x27;t validate, to great effect :-) &#x2F;s<p>Not saying that this advice isn&#x27;t solid, just thought it&#x27;s funny given the news of this week.</div><br/></div></div></div></div></div></div></div></body></html>