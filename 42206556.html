<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1732266086309" as="style"/><link rel="stylesheet" href="styles.css?v=1732266086309"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://grayduck.mn/2024/11/21/handling-cookies-is-a-minefield/">Handling cookies is a minefield</a> <span class="domain">(<a href="https://grayduck.mn">grayduck.mn</a>)</span></div><div class="subtext"><span>todsacerdoti</span> | <span>198 comments</span></div><br/><div><div id="42209168" class="c"><input type="checkbox" id="c-42209168" checked=""/><div class="controls bullet"><span class="by">maxwellg</span><span>|</span><a href="#42206849">next</a><span>|</span><label class="collapse" for="c-42209168">[-]</label><label class="expand" for="c-42209168">[30 more]</label></div><br/><div class="children"><div class="content">Cookies are filled with weird gotchas and uncomfortable behavior that works 99.95% of the time. My favorite cookie minefield is cookie shadowing - if you set cookies with the same name but different key properties (domain, path, etc.) you can get multiple near-identical cookies set at once - with no ability for the backend or JS to tell which is which.<p>Try going to <a href="https:&#x2F;&#x2F;example.com&#x2F;somepath" rel="nofollow">https:&#x2F;&#x2F;example.com&#x2F;somepath</a> and entering the following into the browser console:<p><pre><code>  document.cookie = &quot;foo=a&quot;; 
  document.cookie = &quot;foo=b; domain=.example.com&quot;;
  document.cookie = &quot;foo=c; path=&#x2F;somepath&quot;;
  document.cookie
</code></pre>
I get<p><pre><code>  &#x27;foo=c; foo=a; foo=b&#x27;</code></pre></div><br/><div id="42210168" class="c"><input type="checkbox" id="c-42210168" checked=""/><div class="controls bullet"><span class="by">treflop</span><span>|</span><a href="#42209168">parent</a><span>|</span><a href="#42211537">next</a><span>|</span><label class="collapse" for="c-42210168">[-]</label><label class="expand" for="c-42210168">[10 more]</label></div><br/><div class="children"><div class="content">At work, whoever designed our setup put the staging and dev environments on the same domain and the entire massive company has adopted this pattern.<p>What a colossal mistake.</div><br/><div id="42210942" class="c"><input type="checkbox" id="c-42210942" checked=""/><div class="controls bullet"><span class="by">NavinF</span><span>|</span><a href="#42209168">root</a><span>|</span><a href="#42210168">parent</a><span>|</span><a href="#42211057">next</a><span>|</span><label class="collapse" for="c-42210942">[-]</label><label class="expand" for="c-42210942">[1 more]</label></div><br/><div class="children"><div class="content">Yep. Even within the prod environment it&#x27;s ideal to have a separate domain (as defined by the Public Suffix List) for sketchy stuff like files uploaded by users. Eliminates a whole class of security issues and general fuckery</div><br/></div></div><div id="42211057" class="c"><input type="checkbox" id="c-42211057" checked=""/><div class="controls bullet"><span class="by">jamesfinlayson</span><span>|</span><a href="#42209168">root</a><span>|</span><a href="#42210168">parent</a><span>|</span><a href="#42210942">prev</a><span>|</span><a href="#42210908">next</a><span>|</span><label class="collapse" for="c-42211057">[-]</label><label class="expand" for="c-42211057">[1 more]</label></div><br/><div class="children"><div class="content">I had the option to re-use the prod domain for non-prod a few years ago (the company&#x27;s other two projects use the prod domain for all non-prod environments).<p>I didn&#x27;t really think about cookies back then but it just felt like a generally bad idea because disastrously messing up a URL in some config or related service would be much easier.</div><br/></div></div><div id="42210908" class="c"><input type="checkbox" id="c-42210908" checked=""/><div class="controls bullet"><span class="by">teaearlgraycold</span><span>|</span><a href="#42209168">root</a><span>|</span><a href="#42210168">parent</a><span>|</span><a href="#42211057">prev</a><span>|</span><a href="#42210467">next</a><span>|</span><label class="collapse" for="c-42210908">[-]</label><label class="expand" for="c-42210908">[6 more]</label></div><br/><div class="children"><div class="content">For the juniors reading this, here&#x27;s what you do:<p>Buy a second domain, ideally using the same TLD as your production domain (some firewalls and filters will be prejudiced against specific TLDs). Mimic the subdomains <i>exactly</i> as they are in production for staging&#x2F;dev.</div><br/><div id="42211593" class="c"><input type="checkbox" id="c-42211593" checked=""/><div class="controls bullet"><span class="by">anonfordays</span><span>|</span><a href="#42209168">root</a><span>|</span><a href="#42210908">parent</a><span>|</span><a href="#42210467">next</a><span>|</span><label class="collapse" for="c-42211593">[-]</label><label class="expand" for="c-42211593">[5 more]</label></div><br/><div class="children"><div class="content">Just use subdomains such as *.dev.example.com, *.test.example.com, *.prod.example.com, etc., no?</div><br/><div id="42211777" class="c"><input type="checkbox" id="c-42211777" checked=""/><div class="controls bullet"><span class="by">mcfedr</span><span>|</span><a href="#42209168">root</a><span>|</span><a href="#42211593">parent</a><span>|</span><a href="#42211809">next</a><span>|</span><label class="collapse" for="c-42211777">[-]</label><label class="expand" for="c-42211777">[1 more]</label></div><br/><div class="children"><div class="content">The reason not to do that is that dev.example.com can set cookies on example.com and other envs can see them.</div><br/></div></div><div id="42211809" class="c"><input type="checkbox" id="c-42211809" checked=""/><div class="controls bullet"><span class="by">thayne</span><span>|</span><a href="#42209168">root</a><span>|</span><a href="#42211593">parent</a><span>|</span><a href="#42211777">prev</a><span>|</span><a href="#42211846">next</a><span>|</span><label class="collapse" for="c-42211809">[-]</label><label class="expand" for="c-42211809">[1 more]</label></div><br/><div class="children"><div class="content">That only works if you (and any third party code that might run on such a domain) are completely consistent about always specifying the domain as one of your subdomains whenever you set a cookie.<p>And if your marketing&#x2F;SEO&#x2F;business people are ok with having something like &quot;prod&quot; as a subdomain for all your production web pages.</div><br/></div></div><div id="42211846" class="c"><input type="checkbox" id="c-42211846" checked=""/><div class="controls bullet"><span class="by">jan_g</span><span>|</span><a href="#42209168">root</a><span>|</span><a href="#42211593">parent</a><span>|</span><a href="#42211809">prev</a><span>|</span><a href="#42211737">next</a><span>|</span><label class="collapse" for="c-42211846">[-]</label><label class="expand" for="c-42211846">[1 more]</label></div><br/><div class="children"><div class="content">We have *.example.dev, *.example.qa, *.example.com for development, staging&#x2F;qa and production. Works well and we haven&#x27;t had any issues with cookies.</div><br/></div></div><div id="42211737" class="c"><input type="checkbox" id="c-42211737" checked=""/><div class="controls bullet"><span class="by">teaearlgraycold</span><span>|</span><a href="#42209168">root</a><span>|</span><a href="#42211593">parent</a><span>|</span><a href="#42211846">prev</a><span>|</span><a href="#42210467">next</a><span>|</span><label class="collapse" for="c-42211737">[-]</label><label class="expand" for="c-42211737">[1 more]</label></div><br/><div class="children"><div class="content">Ah yes if you use a CNAME that would work. You know better than me.</div><br/></div></div></div></div></div></div><div id="42210467" class="c"><input type="checkbox" id="c-42210467" checked=""/><div class="controls bullet"><span class="by">anal_reactor</span><span>|</span><a href="#42209168">root</a><span>|</span><a href="#42210168">parent</a><span>|</span><a href="#42210908">prev</a><span>|</span><a href="#42211537">next</a><span>|</span><label class="collapse" for="c-42210467">[-]</label><label class="expand" for="c-42210467">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m sure this will be replicated in future projects because it&#x27;s much easier to argue &quot;we&#x27;re already following this pattern so let&#x27;s be consistent&quot; than &quot;this pattern is bad and let&#x27;s not have two ruined projects&quot;</div><br/></div></div></div></div><div id="42211537" class="c"><input type="checkbox" id="c-42211537" checked=""/><div class="controls bullet"><span class="by">sureIy</span><span>|</span><a href="#42209168">parent</a><span>|</span><a href="#42210168">prev</a><span>|</span><a href="#42209912">next</a><span>|</span><label class="collapse" for="c-42211537">[-]</label><label class="expand" for="c-42211537">[1 more]</label></div><br/><div class="children"><div class="content">Seems perfectly reasonable to me?<p>If you are on &#x2F;somepath I&#x27;d expect to get C as is the most specific value out of all three. All the values are still returned, ordered, which to me is the best of both worlds (path-specific values + knowing the globals)<p>The only thing I don&#x27;t like is the magic `document.cookie` setter, but alas that&#x27;s nearly 30 years old.</div><br/></div></div><div id="42209912" class="c"><input type="checkbox" id="c-42209912" checked=""/><div class="controls bullet"><span class="by">spacebanana7</span><span>|</span><a href="#42209168">parent</a><span>|</span><a href="#42211537">prev</a><span>|</span><a href="#42210157">next</a><span>|</span><label class="collapse" for="c-42209912">[-]</label><label class="expand" for="c-42209912">[1 more]</label></div><br/><div class="children"><div class="content">I wonder if this explains a lot of the unusual behaviour that happens when you use multiple accounts on a website in the same browser.</div><br/></div></div><div id="42210157" class="c"><input type="checkbox" id="c-42210157" checked=""/><div class="controls bullet"><span class="by">teaearlgraycold</span><span>|</span><a href="#42209168">parent</a><span>|</span><a href="#42209912">prev</a><span>|</span><a href="#42209435">next</a><span>|</span><label class="collapse" for="c-42210157">[-]</label><label class="expand" for="c-42210157">[11 more]</label></div><br/><div class="children"><div class="content">Using the path field is a code smell</div><br/><div id="42210183" class="c"><input type="checkbox" id="c-42210183" checked=""/><div class="controls bullet"><span class="by">NBJack</span><span>|</span><a href="#42209168">root</a><span>|</span><a href="#42210157">parent</a><span>|</span><a href="#42209435">next</a><span>|</span><label class="collapse" for="c-42210183">[-]</label><label class="expand" for="c-42210183">[10 more]</label></div><br/><div class="children"><div class="content">Can you elaborate? I&#x27;m having a tough time finding references to that. (Disclaimer: I&#x27;m not an avid JS developer)</div><br/><div id="42211210" class="c"><input type="checkbox" id="c-42211210" checked=""/><div class="controls bullet"><span class="by">kijin</span><span>|</span><a href="#42209168">root</a><span>|</span><a href="#42210183">parent</a><span>|</span><a href="#42210301">next</a><span>|</span><label class="collapse" for="c-42211210">[-]</label><label class="expand" for="c-42211210">[1 more]</label></div><br/><div class="children"><div class="content">It means that you are setting cookies on whatever page you&#x27;re on, without considering whether the cookie will be consistently accessible on other pages.<p>For example, you set the currency to EUR in &#x2F;product&#x2F;123, but when you navigate to &#x2F;cart and refresh, it&#x27;s back to USD. You change it again to EUR, only to realize in &#x2F;cart&#x2F;checkout that the USD pricing is actually better. So you try to set it back to USD, but now the cookie at &#x2F;cart conflicts with the one at &#x2F;cart&#x2F;checkout because each page has its own cookie.</div><br/></div></div><div id="42210301" class="c"><input type="checkbox" id="c-42210301" checked=""/><div class="controls bullet"><span class="by">teaearlgraycold</span><span>|</span><a href="#42209168">root</a><span>|</span><a href="#42210183">parent</a><span>|</span><a href="#42211210">prev</a><span>|</span><a href="#42209435">next</a><span>|</span><label class="collapse" for="c-42210301">[-]</label><label class="expand" for="c-42210301">[8 more]</label></div><br/><div class="children"><div class="content">For modern applications you’ll have better ways to maintain state. As shown they cause trouble in practice. Cookies should be used sparingly.</div><br/><div id="42210642" class="c"><input type="checkbox" id="c-42210642" checked=""/><div class="controls bullet"><span class="by">prokopton</span><span>|</span><a href="#42209168">root</a><span>|</span><a href="#42210301">parent</a><span>|</span><a href="#42209435">next</a><span>|</span><label class="collapse" for="c-42210642">[-]</label><label class="expand" for="c-42210642">[7 more]</label></div><br/><div class="children"><div class="content">If you want to maintain state across navigations and share that state with a server it’s the best we’ve got.</div><br/><div id="42210674" class="c"><input type="checkbox" id="c-42210674" checked=""/><div class="controls bullet"><span class="by">bpicolo</span><span>|</span><a href="#42209168">root</a><span>|</span><a href="#42210642">parent</a><span>|</span><a href="#42209435">next</a><span>|</span><label class="collapse" for="c-42210674">[-]</label><label class="expand" for="c-42210674">[6 more]</label></div><br/><div class="children"><div class="content">Server can store session state</div><br/><div id="42210793" class="c"><input type="checkbox" id="c-42210793" checked=""/><div class="controls bullet"><span class="by">telgareith</span><span>|</span><a href="#42209168">root</a><span>|</span><a href="#42210674">parent</a><span>|</span><a href="#42209435">next</a><span>|</span><label class="collapse" for="c-42210793">[-]</label><label class="expand" for="c-42210793">[5 more]</label></div><br/><div class="children"><div class="content">Server side session state for more than authentication is way worse than &quot;code smell.&quot;<p>It requires a ping to a shared data source on every request. And, the same one for all of them. No sharding, No split domains... That gets expensive fast!</div><br/><div id="42211065" class="c"><input type="checkbox" id="c-42211065" checked=""/><div class="controls bullet"><span class="by">naasking</span><span>|</span><a href="#42209168">root</a><span>|</span><a href="#42210793">parent</a><span>|</span><a href="#42212027">next</a><span>|</span><label class="collapse" for="c-42211065">[-]</label><label class="expand" for="c-42211065">[3 more]</label></div><br/><div class="children"><div class="content">You just described how the whole web operates. It works just fine.</div><br/><div id="42211146" class="c"><input type="checkbox" id="c-42211146" checked=""/><div class="controls bullet"><span class="by">MBCook</span><span>|</span><a href="#42209168">root</a><span>|</span><a href="#42211065">parent</a><span>|</span><a href="#42212027">next</a><span>|</span><label class="collapse" for="c-42211146">[-]</label><label class="expand" for="c-42211146">[2 more]</label></div><br/><div class="children"><div class="content">Even if you want client side, we have better ways now than cookies.</div><br/><div id="42212066" class="c"><input type="checkbox" id="c-42212066" checked=""/><div class="controls bullet"><span class="by">inopinatus</span><span>|</span><a href="#42209168">root</a><span>|</span><a href="#42211146">parent</a><span>|</span><a href="#42212027">next</a><span>|</span><label class="collapse" for="c-42212066">[-]</label><label class="expand" for="c-42212066">[1 more]</label></div><br/><div class="children"><div class="content">We do, but only cookies are universally available. Plenty of unusual user-agents in the world, or people like me that browse with JS off by default.</div><br/></div></div></div></div></div></div><div id="42212027" class="c"><input type="checkbox" id="c-42212027" checked=""/><div class="controls bullet"><span class="by">CrimsonRain</span><span>|</span><a href="#42209168">root</a><span>|</span><a href="#42210793">parent</a><span>|</span><a href="#42211065">prev</a><span>|</span><a href="#42209435">next</a><span>|</span><label class="collapse" for="c-42212027">[-]</label><label class="expand" for="c-42212027">[1 more]</label></div><br/><div class="children"><div class="content">I add some products in phone. Then I login to desktop later for modification and order. Cart is empty. That&#x27;s engineering smell. A really bad one.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="42209435" class="c"><input type="checkbox" id="c-42209435" checked=""/><div class="controls bullet"><span class="by">draw_down</span><span>|</span><a href="#42209168">parent</a><span>|</span><a href="#42210157">prev</a><span>|</span><a href="#42206849">next</a><span>|</span><label class="collapse" for="c-42209435">[-]</label><label class="expand" for="c-42209435">[6 more]</label></div><br/><div class="children"><div class="content">Yeah, isn’t that how you represent a list of values? (Or maybe better to say a collection, not sure if ordering is preserved)</div><br/><div id="42209658" class="c"><input type="checkbox" id="c-42209658" checked=""/><div class="controls bullet"><span class="by">kevincox</span><span>|</span><a href="#42209168">root</a><span>|</span><a href="#42209435">parent</a><span>|</span><a href="#42206849">next</a><span>|</span><label class="collapse" for="c-42209658">[-]</label><label class="expand" for="c-42209658">[5 more]</label></div><br/><div class="children"><div class="content">But if the attributes are exactly the same then the cookies replace each other. So this isn&#x27;t a general mechanism for representing a list.<p>Not to mention that the way to delete a cookie is sending a replacement cookie that expires in the past. How are you supposed to delete the right cookie here?</div><br/><div id="42210238" class="c"><input type="checkbox" id="c-42210238" checked=""/><div class="controls bullet"><span class="by">maxwellg</span><span>|</span><a href="#42209168">root</a><span>|</span><a href="#42209658">parent</a><span>|</span><a href="#42210220">next</a><span>|</span><label class="collapse" for="c-42210238">[-]</label><label class="expand" for="c-42210238">[1 more]</label></div><br/><div class="children"><div class="content">And the worst is that you need to exactly match the domain and path semantics in order to delete the cookie! Domain is easy enough because there are only two options - available to subdomain and not available to subdomain. But if you have a cookie with the `&#x2F;path` set and you don&#x27;t know what value was used, you literally cannot delete that cookie from JS or the backend. You need to either pop open devtools and look at the path or ask the end user to clear all cookies.</div><br/></div></div><div id="42210220" class="c"><input type="checkbox" id="c-42210220" checked=""/><div class="controls bullet"><span class="by">HappMacDonald</span><span>|</span><a href="#42209168">root</a><span>|</span><a href="#42209658">parent</a><span>|</span><a href="#42210238">prev</a><span>|</span><a href="#42209980">next</a><span>|</span><label class="collapse" for="c-42210220">[-]</label><label class="expand" for="c-42210220">[2 more]</label></div><br/><div class="children"><div class="content">Is there a way for JS to see the attributes for each value?
Because presumably setting an expire time in the past and iterating over every used set of attributes would get the job done to delete the cookie.
Iterating over all possible (plausible?) attributes may also work, but knowing the specific attributes set would narrow that list of erasing writes to issue.</div><br/><div id="42211261" class="c"><input type="checkbox" id="c-42211261" checked=""/><div class="controls bullet"><span class="by">kijin</span><span>|</span><a href="#42209168">root</a><span>|</span><a href="#42210220">parent</a><span>|</span><a href="#42209980">next</a><span>|</span><label class="collapse" for="c-42211261">[-]</label><label class="expand" for="c-42211261">[1 more]</label></div><br/><div class="children"><div class="content">No, there isn&#x27;t. All you get a list of values that are valid for the current page. Same on the server side.<p>If you&#x27;re ever in a situation where you need to invalidate all possible instances of a cookie, it&#x27;s easier to just use a different name.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="42206849" class="c"><input type="checkbox" id="c-42206849" checked=""/><div class="controls bullet"><span class="by">kibwen</span><span>|</span><a href="#42209168">prev</a><span>|</span><a href="#42207996">next</a><span>|</span><label class="collapse" for="c-42206849">[-]</label><label class="expand" for="c-42206849">[26 more]</label></div><br/><div class="children"><div class="content">The article mentions Rust&#x27;s approach, but note that (unlike the other mentioned languages) Rust doesn&#x27;t ship any cookie handling facilities in the standard library, so it&#x27;s actually looking at the behavior of the third-party &quot;cookie&quot; crate (which includes the option to percent-encode as Ruby does): <a href="https:&#x2F;&#x2F;docs.rs&#x2F;cookie&#x2F;0.18.1&#x2F;cookie&#x2F;" rel="nofollow">https:&#x2F;&#x2F;docs.rs&#x2F;cookie&#x2F;0.18.1&#x2F;cookie&#x2F;</a></div><br/><div id="42207036" class="c"><input type="checkbox" id="c-42207036" checked=""/><div class="controls bullet"><span class="by">marumari</span><span>|</span><a href="#42206849">parent</a><span>|</span><a href="#42206946">next</a><span>|</span><label class="collapse" for="c-42207036">[-]</label><label class="expand" for="c-42207036">[1 more]</label></div><br/><div class="children"><div class="content">Thanks for pointing that out -- I&#x27;ve updated the article and given you credit down at the bottom. Let me know if you&#x27;d prefer something other than &quot;kibwen.&quot;</div><br/></div></div><div id="42206946" class="c"><input type="checkbox" id="c-42206946" checked=""/><div class="controls bullet"><span class="by">juped</span><span>|</span><a href="#42206849">parent</a><span>|</span><a href="#42207036">prev</a><span>|</span><a href="#42207996">next</a><span>|</span><label class="collapse" for="c-42206946">[-]</label><label class="expand" for="c-42206946">[24 more]</label></div><br/><div class="children"><div class="content">De facto standardization by snapping up good names early!</div><br/><div id="42207550" class="c"><input type="checkbox" id="c-42207550" checked=""/><div class="controls bullet"><span class="by">echelon</span><span>|</span><a href="#42206849">root</a><span>|</span><a href="#42206946">parent</a><span>|</span><a href="#42207996">next</a><span>|</span><label class="collapse" for="c-42207550">[-]</label><label class="expand" for="c-42207550">[23 more]</label></div><br/><div class="children"><div class="content">Not really. A lot of essential third party Rust crates and projects have &quot;weird&quot; names, eg. &quot;nom&quot;, &quot;tokio&quot;, etc. You can see that from the list of most downloaded crates [1].<p>This one just happens to have been owned and maintained by core Rust folks and used in a lot of larger libraries. This is more the exception than the rule.<p>It&#x27;s a given that you should do due diligence on crates and not just use the first name that matches your use case. There&#x27;s a lot of crate name squatting and abandonware.<p>Rust crates need namespacing to avoid this and similar problems going forward.<p>[1] <a href="https:&#x2F;&#x2F;crates.io&#x2F;crates?sort=downloads" rel="nofollow">https:&#x2F;&#x2F;crates.io&#x2F;crates?sort=downloads</a></div><br/><div id="42208280" class="c"><input type="checkbox" id="c-42208280" checked=""/><div class="controls bullet"><span class="by">codetrotter</span><span>|</span><a href="#42206849">root</a><span>|</span><a href="#42207550">parent</a><span>|</span><a href="#42208371">next</a><span>|</span><label class="collapse" for="c-42208280">[-]</label><label class="expand" for="c-42208280">[9 more]</label></div><br/><div class="children"><div class="content">A sibling comment talked about “UwU names”. Not sure exactly if they are referring to “tokio” or something else. But if it’s tokio, they might find this informative:<p>&gt; I enjoyed visiting Tokio (Tokyo) the city and I liked the &quot;io&quot; suffix and how it plays w&#x2F; Mio as well. I don&#x27;t know... naming is hard so I didn&#x27;t spend too much time thinking about it.<p><a href="https:&#x2F;&#x2F;www.reddit.com&#x2F;r&#x2F;rust&#x2F;comments&#x2F;d3ld9z&#x2F;comment&#x2F;f03lnm8&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.reddit.com&#x2F;r&#x2F;rust&#x2F;comments&#x2F;d3ld9z&#x2F;comment&#x2F;f03lnm...</a><p>From the original release announcement of tokio on r&#x2F;rust on Reddit.<p>And also to the sibling commenter, if tokio is a problematic name to you:<p>Would either of the following names be equally problematic or not?<p>- Chicago. Code name for Windows 95, and also the name of a city in the USA. <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Development_of_Windows_95" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Development_of_Windows_95</a> <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Chicago" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Chicago</a><p>- Oslo. Name of a team working on OpenStack, and also appears in their package names. Oslo is the capital of Norway. <a href="https:&#x2F;&#x2F;wiki.openstack.org&#x2F;wiki&#x2F;Oslo" rel="nofollow">https:&#x2F;&#x2F;wiki.openstack.org&#x2F;wiki&#x2F;Oslo</a> <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Oslo" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Oslo</a><p>If yes, why? If no, also why?</div><br/><div id="42208758" class="c"><input type="checkbox" id="c-42208758" checked=""/><div class="controls bullet"><span class="by">mardef</span><span>|</span><a href="#42206849">root</a><span>|</span><a href="#42208280">parent</a><span>|</span><a href="#42208731">next</a><span>|</span><label class="collapse" for="c-42208758">[-]</label><label class="expand" for="c-42208758">[7 more]</label></div><br/><div class="children"><div class="content">Just want to point out that location names are used for codenames because they cannot be trademarked<p>Big tech uses them instead of wasting legal time and money having to clear a new name that&#x27;s temporary or non-public.<p>Changing the name to Tokio removes this benefit and still leaves it disconnected from its purpose.</div><br/><div id="42209410" class="c"><input type="checkbox" id="c-42209410" checked=""/><div class="controls bullet"><span class="by">qingcharles</span><span>|</span><a href="#42206849">root</a><span>|</span><a href="#42208758">parent</a><span>|</span><a href="#42211931">next</a><span>|</span><label class="collapse" for="c-42209410">[-]</label><label class="expand" for="c-42209410">[5 more]</label></div><br/><div class="children"><div class="content">The name of the city is 東京 -- anything in Latin characters is a rough transliteration. Tokio was the common spelling in European texts until some time last century, and is still used regularly in continental Europe.<p><i>see also, e.g. Tokio Hotel</i></div><br/><div id="42209449" class="c"><input type="checkbox" id="c-42209449" checked=""/><div class="controls bullet"><span class="by">Dilettante_</span><span>|</span><a href="#42206849">root</a><span>|</span><a href="#42209410">parent</a><span>|</span><a href="#42210054">next</a><span>|</span><label class="collapse" for="c-42209449">[-]</label><label class="expand" for="c-42209449">[2 more]</label></div><br/><div class="children"><div class="content">A reference to Tokio Hotel was not on my HN bingo card</div><br/><div id="42209688" class="c"><input type="checkbox" id="c-42209688" checked=""/><div class="controls bullet"><span class="by">echelon</span><span>|</span><a href="#42206849">root</a><span>|</span><a href="#42209449">parent</a><span>|</span><a href="#42210054">next</a><span>|</span><label class="collapse" for="c-42209688">[-]</label><label class="expand" for="c-42209688">[1 more]</label></div><br/><div class="children"><div class="content">This is the first time Tokio Hotel has been mentioned on HN in over ten years.<p><a href="https:&#x2F;&#x2F;hn.algolia.com&#x2F;?dateRange=all&amp;page=0&amp;prefix=false&amp;query=%22tokio%20hotel%22&amp;sort=byDate&amp;type=comment" rel="nofollow">https:&#x2F;&#x2F;hn.algolia.com&#x2F;?dateRange=all&amp;page=0&amp;prefix=false&amp;qu...</a><p>That has me thinking of Neutral Milk Hotel. Totally different vibes.</div><br/></div></div></div></div><div id="42210054" class="c"><input type="checkbox" id="c-42210054" checked=""/><div class="controls bullet"><span class="by">labster</span><span>|</span><a href="#42206849">root</a><span>|</span><a href="#42209410">parent</a><span>|</span><a href="#42209449">prev</a><span>|</span><a href="#42211931">next</a><span>|</span><label class="collapse" for="c-42210054">[-]</label><label class="expand" for="c-42210054">[2 more]</label></div><br/><div class="children"><div class="content">Tokio is a different (masculine) name in Japanese, pronounced quite differently. &#x2F;tokʲio&#x2F; vs. &#x2F;to̞ːkʲo̞ː&#x2F;.<p><a href="https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Tokio_(given_name)" rel="nofollow">https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Tokio_(given_name)</a></div><br/><div id="42210773" class="c"><input type="checkbox" id="c-42210773" checked=""/><div class="controls bullet"><span class="by">j16sdiz</span><span>|</span><a href="#42206849">root</a><span>|</span><a href="#42210054">parent</a><span>|</span><a href="#42211931">next</a><span>|</span><label class="collapse" for="c-42210773">[-]</label><label class="expand" for="c-42210773">[1 more]</label></div><br/><div class="children"><div class="content">We are talking about the spelling centuries ago, when the romanisation were less standardised</div><br/></div></div></div></div></div></div><div id="42211931" class="c"><input type="checkbox" id="c-42211931" checked=""/><div class="controls bullet"><span class="by">buzer</span><span>|</span><a href="#42206849">root</a><span>|</span><a href="#42208758">parent</a><span>|</span><a href="#42209410">prev</a><span>|</span><a href="#42208731">next</a><span>|</span><label class="collapse" for="c-42211931">[-]</label><label class="expand" for="c-42211931">[1 more]</label></div><br/><div class="children"><div class="content">&gt; location names are used for codenames because they cannot be trademarked<p>I don&#x27;t think that&#x27;s the case. Amazon, Nokia as some counterexamples.</div><br/></div></div></div></div></div></div><div id="42208371" class="c"><input type="checkbox" id="c-42208371" checked=""/><div class="controls bullet"><span class="by">littlestymaar</span><span>|</span><a href="#42206849">root</a><span>|</span><a href="#42207550">parent</a><span>|</span><a href="#42208280">prev</a><span>|</span><a href="#42207667">next</a><span>|</span><label class="collapse" for="c-42208371">[-]</label><label class="expand" for="c-42208371">[12 more]</label></div><br/><div class="children"><div class="content">&gt; Rust crates need namespacing to avoid this and similar problems going forward.<p>It hasn&#x27;t been implemented despite crowd demanding it on HN for years because it won&#x27;t solve the problem (namespace squatting is going to replace name squatting and tada! you&#x27;re back to square one with an extra step).</div><br/><div id="42208490" class="c"><input type="checkbox" id="c-42208490" checked=""/><div class="controls bullet"><span class="by">Macha</span><span>|</span><a href="#42206849">root</a><span>|</span><a href="#42208371">parent</a><span>|</span><a href="#42208611">next</a><span>|</span><label class="collapse" for="c-42208490">[-]</label><label class="expand" for="c-42208490">[2 more]</label></div><br/><div class="children"><div class="content">I do agree that people will assume xyz&#x2F;xyz is more authoriative than some-org&#x2F;xyz, but I think there is benefit to knowing that everything under xyz&#x2F;* has a single owner. The current approach is to name companion crates like xyz_abc but someone else could come along with xyz_def and it&#x27;s not immediately obvious that xyz_abc has the same owner as xyz but xyz_def does not.</div><br/><div id="42211952" class="c"><input type="checkbox" id="c-42211952" checked=""/><div class="controls bullet"><span class="by">littlestymaar</span><span>|</span><a href="#42206849">root</a><span>|</span><a href="#42208490">parent</a><span>|</span><a href="#42208611">next</a><span>|</span><label class="collapse" for="c-42211952">[-]</label><label class="expand" for="c-42211952">[1 more]</label></div><br/><div class="children"><div class="content">This is a completely different topic though, and I think there&#x27;s interest in shipping something like that.<p>That&#x27;s the main problem with “just add namespace FFS” discussions that come every other week: everyone has its own vision of what namespace should look like and what they are meant for, but nobody has ever taken the time to write an RFC with supporting arguments. In fact, people bring this mostly in ways that are related to name squatting (like right here) even though that&#x27;s not a problem namespace can solve in the first place. It&#x27;s magical thinking at its finest.</div><br/></div></div></div></div><div id="42208611" class="c"><input type="checkbox" id="c-42208611" checked=""/><div class="controls bullet"><span class="by">Illniyar</span><span>|</span><a href="#42206849">root</a><span>|</span><a href="#42208371">parent</a><span>|</span><a href="#42208490">prev</a><span>|</span><a href="#42209973">next</a><span>|</span><label class="collapse" for="c-42208611">[-]</label><label class="expand" for="c-42208611">[2 more]</label></div><br/><div class="children"><div class="content">Solved the problem almost completely in npm. Sure you can&#x27;t search for a name of a company or a project and expect it to be related to the company or project.
But there&#x27;s no way to solve that.<p>But once you know a namespace is owned by a company or project, you can know that everything under it is legit.
Which solves the vast majority of squatting and impersonation problems.<p>Also you know that everything under &quot;node&quot; for example is part of the language.</div><br/><div id="42210409" class="c"><input type="checkbox" id="c-42210409" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#42206849">root</a><span>|</span><a href="#42208611">parent</a><span>|</span><a href="#42209973">next</a><span>|</span><label class="collapse" for="c-42210409">[-]</label><label class="expand" for="c-42210409">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Sure you can&#x27;t search for a name of a company or a project and expect it to be related to the company or project. But there&#x27;s no way to solve that.<p>There&#x27;s a way to solve it partially: you can have a special part of your namespace tied to domains and require that eg com.google.some-package be signed by a certificate that can also sign some-package.google.com<p>Of course, there&#x27;s no guarantee that <a href="https:&#x2F;&#x2F;company.com" rel="nofollow">https:&#x2F;&#x2F;company.com</a> belongs to the company, but the public has already developed ways of coping with that.<p>(I specifically suggest doing that only to part of your namespace, because you still want people to be able to upload packages without having to register a domain first.)</div><br/></div></div></div></div><div id="42209973" class="c"><input type="checkbox" id="c-42209973" checked=""/><div class="controls bullet"><span class="by">rapind</span><span>|</span><a href="#42206849">root</a><span>|</span><a href="#42208371">parent</a><span>|</span><a href="#42208611">prev</a><span>|</span><a href="#42208684">next</a><span>|</span><label class="collapse" for="c-42209973">[-]</label><label class="expand" for="c-42209973">[2 more]</label></div><br/><div class="children"><div class="content">There are problems it does solve though. It’s incomprehensible that we get so many new package managers that fail to learn from the bajillion that came before.</div><br/><div id="42211965" class="c"><input type="checkbox" id="c-42211965" checked=""/><div class="controls bullet"><span class="by">littlestymaar</span><span>|</span><a href="#42206849">root</a><span>|</span><a href="#42209973">parent</a><span>|</span><a href="#42208684">next</a><span>|</span><label class="collapse" for="c-42211965">[-]</label><label class="expand" for="c-42211965">[1 more]</label></div><br/><div class="children"><div class="content">It actually learned and that&#x27;s what makes cargo as good as it is (arguably the best of all that came before, and a source of inspiration for the ones that came after).<p>But its authors rightly concluded that it&#x27;s useless to expect to prevent name squatting by any technical mean!</div><br/></div></div></div></div><div id="42208684" class="c"><input type="checkbox" id="c-42208684" checked=""/><div class="controls bullet"><span class="by">dpcx</span><span>|</span><a href="#42206849">root</a><span>|</span><a href="#42208371">parent</a><span>|</span><a href="#42209973">prev</a><span>|</span><a href="#42210198">next</a><span>|</span><label class="collapse" for="c-42208684">[-]</label><label class="expand" for="c-42208684">[1 more]</label></div><br/><div class="children"><div class="content">php deals with this by using the username&#x2F;organization name of a repository as the namespace name of packages. At least then you&#x27;re having to squat something further up the food chain.</div><br/></div></div><div id="42210198" class="c"><input type="checkbox" id="c-42210198" checked=""/><div class="controls bullet"><span class="by">preisschild</span><span>|</span><a href="#42206849">root</a><span>|</span><a href="#42208371">parent</a><span>|</span><a href="#42208684">prev</a><span>|</span><a href="#42207667">next</a><span>|</span><label class="collapse" for="c-42210198">[-]</label><label class="expand" for="c-42210198">[4 more]</label></div><br/><div class="children"><div class="content">Why not do it like go does and use the git hosting domain as a prefix (like github.com&#x2F;org&#x2F;project)?</div><br/><div id="42210233" class="c"><input type="checkbox" id="c-42210233" checked=""/><div class="controls bullet"><span class="by">HappMacDonald</span><span>|</span><a href="#42206849">root</a><span>|</span><a href="#42210198">parent</a><span>|</span><a href="#42210269">next</a><span>|</span><label class="collapse" for="c-42210233">[-]</label><label class="expand" for="c-42210233">[1 more]</label></div><br/><div class="children"><div class="content">I recall in the Elm community there was a lot of hooplah around the package system aligning too much with a single repo provider (github) so that might be one disincentive there.</div><br/></div></div><div id="42210269" class="c"><input type="checkbox" id="c-42210269" checked=""/><div class="controls bullet"><span class="by">azornathogron</span><span>|</span><a href="#42206849">root</a><span>|</span><a href="#42210198">parent</a><span>|</span><a href="#42210233">prev</a><span>|</span><a href="#42211925">next</a><span>|</span><label class="collapse" for="c-42210269">[-]</label><label class="expand" for="c-42210269">[1 more]</label></div><br/><div class="children"><div class="content">It doesn&#x27;t have to be git either - a few version control systems are supported. See <a href="https:&#x2F;&#x2F;go.dev&#x2F;ref&#x2F;mod#vcs" rel="nofollow">https:&#x2F;&#x2F;go.dev&#x2F;ref&#x2F;mod#vcs</a><p>And it doesn&#x27;t have to be the direct domain+path of the repository, it can be some URL where you put a metadata file that points to the source repo.</div><br/></div></div><div id="42211925" class="c"><input type="checkbox" id="c-42211925" checked=""/><div class="controls bullet"><span class="by">littlestymaar</span><span>|</span><a href="#42206849">root</a><span>|</span><a href="#42210198">parent</a><span>|</span><a href="#42210269">prev</a><span>|</span><a href="#42207667">next</a><span>|</span><label class="collapse" for="c-42211925">[-]</label><label class="expand" for="c-42211925">[1 more]</label></div><br/><div class="children"><div class="content">How does it prevent squatting in any way?</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="42207996" class="c"><input type="checkbox" id="c-42207996" checked=""/><div class="controls bullet"><span class="by">0xbadcafebee</span><span>|</span><a href="#42206849">prev</a><span>|</span><a href="#42207754">next</a><span>|</span><label class="collapse" for="c-42207996">[-]</label><label class="expand" for="c-42207996">[6 more]</label></div><br/><div class="children"><div class="content">Did anyone else notice that the HTTP protocol embeds within it ten-thousand different protocols? Browsers and web servers both &quot;add-on&quot; a ton of functionality, which all have specifications and de-facto specifications, and all of it is delivered through the umbrella of basically one generic &quot;HTTP&quot; protocol. You can&#x27;t have the client specify what version of these ten-thousand non-specifications it is compatible with, and the server can&#x27;t either. We can&#x27;t upgrade the &quot;specs&quot; because none of the rest of the clients will understand, and there won&#x27;t be backwards-compatibility. So we just have this morass of random shit that nobody can agree on and can&#x27;t fix. And there is no planned obsolescence, so we have to carry forward whatever bad decisions we made in the past.</div><br/><div id="42208355" class="c"><input type="checkbox" id="c-42208355" checked=""/><div class="controls bullet"><span class="by">tyleo</span><span>|</span><a href="#42207996">parent</a><span>|</span><a href="#42209051">next</a><span>|</span><label class="collapse" for="c-42208355">[-]</label><label class="expand" for="c-42208355">[2 more]</label></div><br/><div class="children"><div class="content">Tbh I’ve made peace with this world and I might even enjoy it more than the planned obsolescence one.</div><br/><div id="42210413" class="c"><input type="checkbox" id="c-42210413" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#42207996">root</a><span>|</span><a href="#42208355">parent</a><span>|</span><a href="#42209051">next</a><span>|</span><label class="collapse" for="c-42210413">[-]</label><label class="expand" for="c-42210413">[1 more]</label></div><br/><div class="children"><div class="content">That was the model that Microsoft used at the height of their power and dominance in the 1990s and 2000s.</div><br/></div></div></div></div><div id="42209051" class="c"><input type="checkbox" id="c-42209051" checked=""/><div class="controls bullet"><span class="by">Analemma_</span><span>|</span><a href="#42207996">parent</a><span>|</span><a href="#42208355">prev</a><span>|</span><a href="#42207754">next</a><span>|</span><label class="collapse" for="c-42209051">[-]</label><label class="expand" for="c-42209051">[3 more]</label></div><br/><div class="children"><div class="content">This is also the fault of shit-tastic middleware boxes which block any protocol they don&#x27;t understand-- because, hey, it&#x27;s &quot;more secure&quot; to default-fail, right?-- so every new type of application traffic until the end of time has to be tunneled over HTTP if it wants to work over the real Internet.</div><br/><div id="42211301" class="c"><input type="checkbox" id="c-42211301" checked=""/><div class="controls bullet"><span class="by">dumpsterdiver</span><span>|</span><a href="#42207996">root</a><span>|</span><a href="#42209051">parent</a><span>|</span><a href="#42209554">next</a><span>|</span><label class="collapse" for="c-42211301">[-]</label><label class="expand" for="c-42211301">[1 more]</label></div><br/><div class="children"><div class="content">&gt; middleware boxes which block any protocol they don&#x27;t understand-- because, hey, it&#x27;s &quot;more secure&quot; to default-fail, right?<p>If the intent is to secure something then failing-open will indeed be at odds with that goal. I suspect you’re not implying otherwise, but rather expressing frustration that such providers simply can’t be bothered to put in the work and use security as an excuse.</div><br/></div></div></div></div></div></div><div id="42207754" class="c"><input type="checkbox" id="c-42207754" checked=""/><div class="controls bullet"><span class="by">jeffreyrogers</span><span>|</span><a href="#42207996">prev</a><span>|</span><a href="#42210037">next</a><span>|</span><label class="collapse" for="c-42207754">[-]</label><label class="expand" for="c-42207754">[3 more]</label></div><br/><div class="children"><div class="content">About 10 years ago I implemented cookie based sessions for a project I was working on. I had a terrible time debugging why auth was working in Safari but not Chrome (or vice-versa, can&#x27;t remember). Turned out that one of the browsers just wouldn&#x27;t set cookies if they didn&#x27;t have the right format, and I wasn&#x27;t doing anything particularly weird, it was a difference of &#x27;-&#x27; vs &#x27;_&#x27; if I recall correctly.</div><br/><div id="42208304" class="c"><input type="checkbox" id="c-42208304" checked=""/><div class="controls bullet"><span class="by">hombre_fatal</span><span>|</span><a href="#42207754">parent</a><span>|</span><a href="#42208261">next</a><span>|</span><label class="collapse" for="c-42208304">[-]</label><label class="expand" for="c-42208304">[1 more]</label></div><br/><div class="children"><div class="content">IIRC there is (or was?) a difference in case-sensitivity between Safari and Chrome, maybe with the Set-Cookie header? I&#x27;ve run into something before which stopped me from using camelCase as cookie keys.<p>Can&#x27;t seem to find the exact issue from googling it.</div><br/></div></div></div></div><div id="42210037" class="c"><input type="checkbox" id="c-42210037" checked=""/><div class="controls bullet"><span class="by">gweinberg</span><span>|</span><a href="#42207754">prev</a><span>|</span><a href="#42207075">next</a><span>|</span><label class="collapse" for="c-42210037">[-]</label><label class="expand" for="c-42210037">[4 more]</label></div><br/><div class="children"><div class="content">I got the impression that almost as soon as they were introduced people thought the only sensible use of cookies is to set an opaque token so the server can recognize the client when it sees it again, and store everything else server side.<p>I don;t understand why it&#x27;s a problem that the client (in principle) can handle values that the server will never send. Just don&#x27;t send them, and you don;t have to worry about perplexing riddles like &quot;but what would happen if I did?&quot;</div><br/><div id="42211285" class="c"><input type="checkbox" id="c-42211285" checked=""/><div class="controls bullet"><span class="by">mu53</span><span>|</span><a href="#42210037">parent</a><span>|</span><a href="#42207075">next</a><span>|</span><label class="collapse" for="c-42211285">[-]</label><label class="expand" for="c-42211285">[3 more]</label></div><br/><div class="children"><div class="content">Cookies are an antiquated technology. One of the first introduced while the web was still young in the 90s, and they have had a few iterations of bad ideas.<p>They are the only place to store opaque tokens, so you gotta use them for auth.</div><br/><div id="42211780" class="c"><input type="checkbox" id="c-42211780" checked=""/><div class="controls bullet"><span class="by">vbezhenar</span><span>|</span><a href="#42210037">root</a><span>|</span><a href="#42211285">parent</a><span>|</span><a href="#42207075">next</a><span>|</span><label class="collapse" for="c-42211780">[-]</label><label class="expand" for="c-42211780">[2 more]</label></div><br/><div class="children"><div class="content">They are not the only place to store tokens. You can store tokens with localStorage for JS-heavy website, in fact plenty of websites do that. It&#x27;s not as secure, but acceptable. Another alternative is to &quot;store&quot; token in URL, it was widely used in Java for some reason (jsessionid parameter).</div><br/><div id="42211936" class="c"><input type="checkbox" id="c-42211936" checked=""/><div class="controls bullet"><span class="by">lknuth</span><span>|</span><a href="#42210037">root</a><span>|</span><a href="#42211780">parent</a><span>|</span><a href="#42207075">next</a><span>|</span><label class="collapse" for="c-42211936">[-]</label><label class="expand" for="c-42211936">[1 more]</label></div><br/><div class="children"><div class="content">To expand on the &quot;not as secure&quot; comment: local storage is accessible to every JS that runs in the context of the page. This includes anything loaded into the page via &lt;script src=&quot;&quot;&#x2F;&gt; like tracking or cookie consent services.</div><br/></div></div></div></div></div></div></div></div><div id="42207075" class="c"><input type="checkbox" id="c-42207075" checked=""/><div class="controls bullet"><span class="by">AshleysBrain</span><span>|</span><a href="#42210037">prev</a><span>|</span><a href="#42211791">next</a><span>|</span><label class="collapse" for="c-42207075">[-]</label><label class="expand" for="c-42207075">[32 more]</label></div><br/><div class="children"><div class="content">Cookies seem to be a big complicated mess, and meanwhile are almost impossible to change for backwards-compatibility reasons. Is this a case to create a new separate mechanism? For example a NewCookie mechanism could be specified instead, and redesigned from the ground-up to work consistently. It could have all the modern security measures built-in, a stricter specification, proper support for unicode, etc.</div><br/><div id="42207223" class="c"><input type="checkbox" id="c-42207223" checked=""/><div class="controls bullet"><span class="by">flotwig</span><span>|</span><a href="#42207075">parent</a><span>|</span><a href="#42207151">next</a><span>|</span><label class="collapse" for="c-42207223">[-]</label><label class="expand" for="c-42207223">[3 more]</label></div><br/><div class="children"><div class="content">It&#x27;s funny that you mention NewCookie, there is actually a deprecated Set-Cookie2 header already: <a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;q&#x2F;9462180&#x2F;3474615" rel="nofollow">https:&#x2F;&#x2F;stackoverflow.com&#x2F;q&#x2F;9462180&#x2F;3474615</a></div><br/><div id="42209506" class="c"><input type="checkbox" id="c-42209506" checked=""/><div class="controls bullet"><span class="by">h4ck_th3_pl4n3t</span><span>|</span><a href="#42207075">root</a><span>|</span><a href="#42207223">parent</a><span>|</span><a href="#42207925">next</a><span>|</span><label class="collapse" for="c-42209506">[-]</label><label class="expand" for="c-42209506">[1 more]</label></div><br/><div class="children"><div class="content">Imagine pwning a frontend server or proxy, spawning an http&#x2F;s server on another port, and being able to intercept all cookies and sessions of all users, even when you couldn&#x27;t pwn the (fortified) database.<p>This could have a huge advantage, because if you leave the original service untouched on port 80&#x2F;443, there is no alert popping up on the defending blueteam side.<p>This gives me an idea for a project...</div><br/></div></div><div id="42207925" class="c"><input type="checkbox" id="c-42207925" checked=""/><div class="controls bullet"><span class="by">nghia999</span><span>|</span><a href="#42207075">root</a><span>|</span><a href="#42207223">parent</a><span>|</span><a href="#42209506">prev</a><span>|</span><a href="#42207151">next</a><span>|</span><label class="collapse" for="c-42207925">[-]</label><label class="expand" for="c-42207925">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;q&#x2F;9462180&#x2F;3474615" rel="nofollow">https:&#x2F;&#x2F;stackoverflow.com&#x2F;q&#x2F;9462180&#x2F;3474615</a></div><br/></div></div></div></div><div id="42207151" class="c"><input type="checkbox" id="c-42207151" checked=""/><div class="controls bullet"><span class="by">RadiozRadioz</span><span>|</span><a href="#42207075">parent</a><span>|</span><a href="#42207223">prev</a><span>|</span><a href="#42207260">next</a><span>|</span><label class="collapse" for="c-42207151">[-]</label><label class="expand" for="c-42207151">[8 more]</label></div><br/><div class="children"><div class="content">NewCookie is, roughly, what browser Local Storage is.<p>At least for some use cases. Of course, it doesn&#x27;t directly integrate with headers.</div><br/><div id="42207211" class="c"><input type="checkbox" id="c-42207211" checked=""/><div class="controls bullet"><span class="by">graypegg</span><span>|</span><a href="#42207075">root</a><span>|</span><a href="#42207151">parent</a><span>|</span><a href="#42207260">next</a><span>|</span><label class="collapse" for="c-42207211">[-]</label><label class="expand" for="c-42207211">[7 more]</label></div><br/><div class="children"><div class="content">I think one important use case we have for cookies is &quot;Secure; HttpOnly&quot; cookies. Making a token totally inaccessible from JS, but still letting the client handle the session is a use case that localStorage can&#x27;t help with. (Even if there&#x27;s a lot of JWTs in localStorage out there.)</div><br/><div id="42208037" class="c"><input type="checkbox" id="c-42208037" checked=""/><div class="controls bullet"><span class="by">emn13</span><span>|</span><a href="#42207075">root</a><span>|</span><a href="#42207211">parent</a><span>|</span><a href="#42207260">next</a><span>|</span><label class="collapse" for="c-42208037">[-]</label><label class="expand" for="c-42208037">[6 more]</label></div><br/><div class="children"><div class="content">However, potentially a localStorage (and sessionStorage!) compatible cookie-replacement api might allow for annotating keys with secure and&#x2F;or HttpOnly bits?  Keeping cookies and localStorage  in sync is a hassle anyhow when necessary, so having the apis align a little better would be nice. Not to mention that that would have the advantage of partially heading off an inevitable criticism - that users don&#x27;t want yet another tracking mechanism.  After all, we already have localStorage and sessionStorage, and they&#x27;re server-readable too now, just indirectly.<p>On the other hand; the size constraints on storage will be less severe than those on tags in each http request, so perhaps this is being overly clever with risks of accidentally huge payloads suddenly being sent along with each request.</div><br/><div id="42208521" class="c"><input type="checkbox" id="c-42208521" checked=""/><div class="controls bullet"><span class="by">xp84</span><span>|</span><a href="#42207075">root</a><span>|</span><a href="#42208037">parent</a><span>|</span><a href="#42208253">next</a><span>|</span><label class="collapse" for="c-42208521">[-]</label><label class="expand" for="c-42208521">[1 more]</label></div><br/><div class="children"><div class="content">I think if I were implementing a webapp from scratch today I&#x27;d use one single Session ID cookie, store sessions in Redis (etc) indefinitely (they really aren&#x27;t that big), and for things meant to be stored&#x2F;accessed on the frontend (e.g. &quot;has dismissed some dumb popup&quot;) just use local storage. Dealing with anything to do with cookies is indeed incredibly painful.</div><br/></div></div><div id="42208253" class="c"><input type="checkbox" id="c-42208253" checked=""/><div class="controls bullet"><span class="by">mdaniel</span><span>|</span><a href="#42207075">root</a><span>|</span><a href="#42208037">parent</a><span>|</span><a href="#42208521">prev</a><span>|</span><a href="#42207260">next</a><span>|</span><label class="collapse" for="c-42208253">[-]</label><label class="expand" for="c-42208253">[4 more]</label></div><br/><div class="children"><div class="content">&gt; and they&#x27;re server-readable too now, just indirectly.<p>Could you point me to more reading about this? It&#x27;s the first time I&#x27;ve heard of it</div><br/><div id="42208501" class="c"><input type="checkbox" id="c-42208501" checked=""/><div class="controls bullet"><span class="by">graypegg</span><span>|</span><a href="#42207075">root</a><span>|</span><a href="#42208253">parent</a><span>|</span><a href="#42207260">next</a><span>|</span><label class="collapse" for="c-42208501">[-]</label><label class="expand" for="c-42208501">[3 more]</label></div><br/><div class="children"><div class="content">I think they mean that you can always send back the content of a localstorage property with javascript grabbing the value and sending another request back with it in the body. Since the front end is going to run any javascript the server sends it (disregarding adblockers at least), it&#x27;s sort of a more indirect version of Set-Cookie.</div><br/><div id="42208632" class="c"><input type="checkbox" id="c-42208632" checked=""/><div class="controls bullet"><span class="by">emn13</span><span>|</span><a href="#42207075">root</a><span>|</span><a href="#42208501">parent</a><span>|</span><a href="#42207260">next</a><span>|</span><label class="collapse" for="c-42208632">[-]</label><label class="expand" for="c-42208632">[2 more]</label></div><br/><div class="children"><div class="content">Yeah, that&#x27;s what I meant.  There&#x27;s no built in support; but it&#x27;s indirectly readable since client-side JS can read it.</div><br/><div id="42210794" class="c"><input type="checkbox" id="c-42210794" checked=""/><div class="controls bullet"><span class="by">j16sdiz</span><span>|</span><a href="#42207075">root</a><span>|</span><a href="#42208632">parent</a><span>|</span><a href="#42207260">next</a><span>|</span><label class="collapse" for="c-42210794">[-]</label><label class="expand" for="c-42210794">[1 more]</label></div><br/><div class="children"><div class="content">This miss the &quot;HttpOnly&quot; part, which prevents javascript (think script injection vulnerability) from touching this part of the storage</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="42207260" class="c"><input type="checkbox" id="c-42207260" checked=""/><div class="controls bullet"><span class="by">notatoad</span><span>|</span><a href="#42207075">parent</a><span>|</span><a href="#42207151">prev</a><span>|</span><a href="#42207464">next</a><span>|</span><label class="collapse" for="c-42207260">[-]</label><label class="expand" for="c-42207260">[2 more]</label></div><br/><div class="children"><div class="content">i think the main problem there is that cookies are so intractibly tied up with tracking, any attempt to create better cookies now will get shut down by privacy advocates who simply don&#x27;t want the whole concept to exist.<p>we&#x27;re stuck with cookies because they exist.</div><br/><div id="42207879" class="c"><input type="checkbox" id="c-42207879" checked=""/><div class="controls bullet"><span class="by">doctorpangloss</span><span>|</span><a href="#42207075">root</a><span>|</span><a href="#42207260">parent</a><span>|</span><a href="#42207464">next</a><span>|</span><label class="collapse" for="c-42207879">[-]</label><label class="expand" for="c-42207879">[1 more]</label></div><br/><div class="children"><div class="content">Every privacy advocate I know hands over exquisitely detailed private and personal information to Google and&#x2F;or Apple. It seems unfair to generalize as “privacy advocates” so much as it is people who are anti-ads.<p>Being anti-ads is a valid opinion. It has less intellectual cover than pro “privacy” though.</div><br/></div></div></div></div><div id="42207464" class="c"><input type="checkbox" id="c-42207464" checked=""/><div class="controls bullet"><span class="by">bob1029</span><span>|</span><a href="#42207075">parent</a><span>|</span><a href="#42207260">prev</a><span>|</span><a href="#42210791">next</a><span>|</span><label class="collapse" for="c-42207464">[-]</label><label class="expand" for="c-42207464">[3 more]</label></div><br/><div class="children"><div class="content">The DOM &amp; URL are the safest places to store client-side state. This doesn&#x27;t cover all use cases, but it does cover the space of clicking pre-authorized links in emails, etc.<p>I spend a solid month chasing ghosts around iOS Safari arbitrarily eating cookies from domains controlled by our customers. I&#x27;ve never seen Google&#x2F;Twitter&#x2F;Facebook&#x2F;etc domains lose session state like this.</div><br/><div id="42208752" class="c"><input type="checkbox" id="c-42208752" checked=""/><div class="controls bullet"><span class="by">marumari</span><span>|</span><a href="#42207075">root</a><span>|</span><a href="#42207464">parent</a><span>|</span><a href="#42210809">next</a><span>|</span><label class="collapse" for="c-42208752">[-]</label><label class="expand" for="c-42208752">[1 more]</label></div><br/><div class="children"><div class="content">Safari is a lot more strict about cookies than Chromium or Firefox, it will straight up drop or ignore (or, occasionally, truncate) cookies that the other two will happily accept.<p>I had hoped when writing this article that Google would look at Safari and see that it was always strict about feel comfortable about changing to be the same. But doing so now would unfortunately break too many things for too many users.</div><br/></div></div><div id="42210809" class="c"><input type="checkbox" id="c-42210809" checked=""/><div class="controls bullet"><span class="by">nox101</span><span>|</span><a href="#42207075">root</a><span>|</span><a href="#42207464">parent</a><span>|</span><a href="#42208752">prev</a><span>|</span><a href="#42210791">next</a><span>|</span><label class="collapse" for="c-42210809">[-]</label><label class="expand" for="c-42210809">[1 more]</label></div><br/><div class="children"><div class="content">If I open a second window or tab I expect when I go to &#x27;myemail.com&#x27; that it knows who I am and shows me my account even though the url in the 2nd tab doesn&#x27;t have any extra info in the URL</div><br/></div></div></div></div><div id="42210791" class="c"><input type="checkbox" id="c-42210791" checked=""/><div class="controls bullet"><span class="by">nox101</span><span>|</span><a href="#42207075">parent</a><span>|</span><a href="#42207464">prev</a><span>|</span><a href="#42207117">next</a><span>|</span><label class="collapse" for="c-42210791">[-]</label><label class="expand" for="c-42210791">[2 more]</label></div><br/><div class="children"><div class="content">the new thing should be called &quot;cupcakes&quot; or &quot;candies&quot; or &quot;snacks&quot; or &quot;munchies&quot;</div><br/><div id="42212225" class="c"><input type="checkbox" id="c-42212225" checked=""/><div class="controls bullet"><span class="by">zwp</span><span>|</span><a href="#42207075">root</a><span>|</span><a href="#42210791">parent</a><span>|</span><a href="#42207117">next</a><span>|</span><label class="collapse" for="c-42212225">[-]</label><label class="expand" for="c-42212225">[1 more]</label></div><br/><div class="children"><div class="content">We already have Macaroons<p><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Macaroons_(computer_science)" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Macaroons_(computer_science)</a><p><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Macaroon" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Macaroon</a></div><br/></div></div></div></div><div id="42207117" class="c"><input type="checkbox" id="c-42207117" checked=""/><div class="controls bullet"><span class="by">pavel_lishin</span><span>|</span><a href="#42207075">parent</a><span>|</span><a href="#42210791">prev</a><span>|</span><a href="#42207112">next</a><span>|</span><label class="collapse" for="c-42207117">[-]</label><label class="expand" for="c-42207117">[2 more]</label></div><br/><div class="children"><div class="content">That feels like that XKCD comic about now there being 15 standards.</div><br/><div id="42207375" class="c"><input type="checkbox" id="c-42207375" checked=""/><div class="controls bullet"><span class="by">latexr</span><span>|</span><a href="#42207075">root</a><span>|</span><a href="#42207117">parent</a><span>|</span><a href="#42207112">next</a><span>|</span><label class="collapse" for="c-42207375">[-]</label><label class="expand" for="c-42207375">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;xkcd.com&#x2F;927&#x2F;" rel="nofollow">https:&#x2F;&#x2F;xkcd.com&#x2F;927&#x2F;</a></div><br/></div></div></div></div><div id="42207112" class="c"><input type="checkbox" id="c-42207112" checked=""/><div class="controls bullet"><span class="by">cruffle_duffle</span><span>|</span><a href="#42207075">parent</a><span>|</span><a href="#42207117">prev</a><span>|</span><a href="#42211791">next</a><span>|</span><label class="collapse" for="c-42207112">[-]</label><label class="expand" for="c-42207112">[11 more]</label></div><br/><div class="children"><div class="content">Needs a better name than NewCookie though. Suggestions include SuperCookie, UltraCookie or BetterCookie<p>Or to be slightly more serious avoid calling it a cookie and call it something else. Too much baggage surrounding the word cookie.</div><br/><div id="42208270" class="c"><input type="checkbox" id="c-42208270" checked=""/><div class="controls bullet"><span class="by">mdaniel</span><span>|</span><a href="#42207075">root</a><span>|</span><a href="#42207112">parent</a><span>|</span><a href="#42207468">next</a><span>|</span><label class="collapse" for="c-42208270">[-]</label><label class="expand" for="c-42208270">[1 more]</label></div><br/><div class="children"><div class="content">Definitely don&#x27;t use &quot;SuperCookie&quot; as that&#x27;s a thing: <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;HTTP_cookie#Supercookie" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;HTTP_cookie#Supercookie</a></div><br/></div></div><div id="42207468" class="c"><input type="checkbox" id="c-42207468" checked=""/><div class="controls bullet"><span class="by">bell-cot</span><span>|</span><a href="#42207075">root</a><span>|</span><a href="#42207112">parent</a><span>|</span><a href="#42208270">prev</a><span>|</span><a href="#42207297">next</a><span>|</span><label class="collapse" for="c-42207468">[-]</label><label class="expand" for="c-42207468">[7 more]</label></div><br/><div class="children"><div class="content">His Majesty&#x27;s English might suggest &quot;biscuit&quot;.</div><br/><div id="42207706" class="c"><input type="checkbox" id="c-42207706" checked=""/><div class="controls bullet"><span class="by">hehehheh</span><span>|</span><a href="#42207075">root</a><span>|</span><a href="#42207468">parent</a><span>|</span><a href="#42209904">next</a><span>|</span><label class="collapse" for="c-42207706">[-]</label><label class="expand" for="c-42207706">[2 more]</label></div><br/><div class="children"><div class="content">Limp Biscuit it is then.</div><br/><div id="42209507" class="c"><input type="checkbox" id="c-42209507" checked=""/><div class="controls bullet"><span class="by">Dilettante_</span><span>|</span><a href="#42207075">root</a><span>|</span><a href="#42207706">parent</a><span>|</span><a href="#42209904">next</a><span>|</span><label class="collapse" for="c-42209507">[-]</label><label class="expand" for="c-42209507">[1 more]</label></div><br/><div class="children"><div class="content">Everyone will surely be rushing to be the first one to disseminate this new technology!</div><br/></div></div></div></div><div id="42209904" class="c"><input type="checkbox" id="c-42209904" checked=""/><div class="controls bullet"><span class="by">thaumasiotes</span><span>|</span><a href="#42207075">root</a><span>|</span><a href="#42207468">parent</a><span>|</span><a href="#42207706">prev</a><span>|</span><a href="#42207297">next</a><span>|</span><label class="collapse" for="c-42209904">[-]</label><label class="expand" for="c-42209904">[4 more]</label></div><br/><div class="children"><div class="content">What do the British call biscuits?<p><a href="https:&#x2F;&#x2F;chefjar.com&#x2F;wp-content&#x2F;uploads&#x2F;2021&#x2F;05&#x2F;popeyes-biscuits-011.jpg" rel="nofollow">https:&#x2F;&#x2F;chefjar.com&#x2F;wp-content&#x2F;uploads&#x2F;2021&#x2F;05&#x2F;popeyes-biscu...</a></div><br/><div id="42210558" class="c"><input type="checkbox" id="c-42210558" checked=""/><div class="controls bullet"><span class="by">michaeljsmith</span><span>|</span><a href="#42207075">root</a><span>|</span><a href="#42209904">parent</a><span>|</span><a href="#42207297">next</a><span>|</span><label class="collapse" for="c-42210558">[-]</label><label class="expand" for="c-42210558">[3 more]</label></div><br/><div class="children"><div class="content">The closest thing is <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Scone" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Scone</a>.</div><br/><div id="42211255" class="c"><input type="checkbox" id="c-42211255" checked=""/><div class="controls bullet"><span class="by">thaumasiotes</span><span>|</span><a href="#42207075">root</a><span>|</span><a href="#42210558">parent</a><span>|</span><a href="#42207297">next</a><span>|</span><label class="collapse" for="c-42211255">[-]</label><label class="expand" for="c-42211255">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve had something (in the US) that was called a &quot;scone&quot;, and it was rigid, which disqualifies it from being similar to a biscuit in my mind.<p>Is that generally true of scones?</div><br/><div id="42212153" class="c"><input type="checkbox" id="c-42212153" checked=""/><div class="controls bullet"><span class="by">lmm</span><span>|</span><a href="#42207075">root</a><span>|</span><a href="#42211255">parent</a><span>|</span><a href="#42207297">next</a><span>|</span><label class="collapse" for="c-42212153">[-]</label><label class="expand" for="c-42212153">[1 more]</label></div><br/><div class="children"><div class="content">The thing the US call scones is different from the thing the UK calls &quot;scone&quot;.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="42207297" class="c"><input type="checkbox" id="c-42207297" checked=""/><div class="controls bullet"><span class="by">jjkaczor</span><span>|</span><a href="#42207075">root</a><span>|</span><a href="#42207112">parent</a><span>|</span><a href="#42207468">prev</a><span>|</span><a href="#42207454">next</a><span>|</span><label class="collapse" for="c-42207297">[-]</label><label class="expand" for="c-42207297">[1 more]</label></div><br/><div class="children"><div class="content">Muffin?  Cake?<p>You graduate from consuming cookies to eating...</div><br/></div></div><div id="42207454" class="c"><input type="checkbox" id="c-42207454" checked=""/><div class="controls bullet"><span class="by">layer8</span><span>|</span><a href="#42207075">root</a><span>|</span><a href="#42207112">parent</a><span>|</span><a href="#42207297">prev</a><span>|</span><a href="#42211791">next</a><span>|</span><label class="collapse" for="c-42207454">[-]</label><label class="expand" for="c-42207454">[1 more]</label></div><br/><div class="children"><div class="content">TrickOrTreat would seem appropriate.</div><br/></div></div></div></div></div></div><div id="42211791" class="c"><input type="checkbox" id="c-42211791" checked=""/><div class="controls bullet"><span class="by">NegativeLatency</span><span>|</span><a href="#42207075">prev</a><span>|</span><a href="#42209789">next</a><span>|</span><label class="collapse" for="c-42211791">[-]</label><label class="expand" for="c-42211791">[1 more]</label></div><br/><div class="children"><div class="content">There’s a nasty bug in the python cookie parser, cookies after a cookie with quotes will be dropped: <a href="https:&#x2F;&#x2F;github.com&#x2F;python&#x2F;cpython&#x2F;pull&#x2F;113663">https:&#x2F;&#x2F;github.com&#x2F;python&#x2F;cpython&#x2F;pull&#x2F;113663</a><p>Zoom or some other website our customers use was writing a cookie with quotes that would break the site. Amazingly hard to reproduce and debug.</div><br/></div></div><div id="42209789" class="c"><input type="checkbox" id="c-42209789" checked=""/><div class="controls bullet"><span class="by">burntcaramel</span><span>|</span><a href="#42211791">prev</a><span>|</span><a href="#42206816">next</a><span>|</span><label class="collapse" for="c-42209789">[-]</label><label class="expand" for="c-42209789">[1 more]</label></div><br/><div class="children"><div class="content">Re Safari’s networking code being closed source, a good substitute might be the Swift port of Foundation. You can see checks for control and delete characters here: <a href="https:&#x2F;&#x2F;github.com&#x2F;swiftlang&#x2F;swift-corelibs-foundation&#x2F;blob&#x2F;c28bf23e18e217709dddd5c2c1b3ee1f2a4151cb&#x2F;Sources&#x2F;FoundationNetworking&#x2F;HTTPCookie.swift#L790">https:&#x2F;&#x2F;github.com&#x2F;swiftlang&#x2F;swift-corelibs-foundation&#x2F;blob&#x2F;...</a></div><br/></div></div><div id="42206816" class="c"><input type="checkbox" id="c-42206816" checked=""/><div class="controls bullet"><span class="by">paol</span><span>|</span><a href="#42209789">prev</a><span>|</span><a href="#42208750">next</a><span>|</span><label class="collapse" for="c-42206816">[-]</label><label class="expand" for="c-42206816">[1 more]</label></div><br/><div class="children"><div class="content">Cookie header parsing is a shitshow. The &quot;standards&quot; don&#x27;t represent what actually exists in the wild, each back-end server and&#x2F;or library and&#x2F;or framework accepts something different, and browsers do something else yet.<p>If you are in complete control of front-end and back-end it&#x27;s not a big problem, but as soon as you have to get different stuff to interoperate it gets very stupid very fast.</div><br/></div></div><div id="42208750" class="c"><input type="checkbox" id="c-42208750" checked=""/><div class="controls bullet"><span class="by">deathanatos</span><span>|</span><a href="#42206816">prev</a><span>|</span><a href="#42209258">next</a><span>|</span><label class="collapse" for="c-42208750">[-]</label><label class="expand" for="c-42208750">[6 more]</label></div><br/><div class="children"><div class="content">That is a bit of a minefield, I agree…<p>The way around this, as a developer, is URL-safe-base64 encode the value. Then you have a bytes primitive &amp; you can use whatever inner representation your heart desires. But the article does also note that you&#x27;re not 100% in control, either. (Nor should you be, it is a <i>user</i> agent, after all.)<p>I do wish more UAs opted for &quot;obey the standard&quot; over &quot;bytes and an prayer on the wire&quot;. Those 400 responses in the screenshots … they&#x27;re a conforming response. This would have been better if headers had been either UTF-8 from the start (but there are causality problems with that) or ASCII and then permitted to be UTF-8 later (but that could still cause issues since you&#x27;re making values that were illegal, legal).</div><br/><div id="42212132" class="c"><input type="checkbox" id="c-42212132" checked=""/><div class="controls bullet"><span class="by">ndusart</span><span>|</span><a href="#42208750">parent</a><span>|</span><a href="#42208829">next</a><span>|</span><label class="collapse" for="c-42212132">[-]</label><label class="expand" for="c-42212132">[1 more]</label></div><br/><div class="children"><div class="content">Cookie value can contain `=`, `&#x2F;` and `+` characters so standard base64 encoding can be used as well :)</div><br/></div></div><div id="42208829" class="c"><input type="checkbox" id="c-42208829" checked=""/><div class="controls bullet"><span class="by">johnp_</span><span>|</span><a href="#42208750">parent</a><span>|</span><a href="#42212132">prev</a><span>|</span><a href="#42209258">next</a><span>|</span><label class="collapse" for="c-42208829">[-]</label><label class="expand" for="c-42208829">[4 more]</label></div><br/><div class="children"><div class="content">&gt; URL-safe-base64<p>And make sure to specify what exactly you mean by that. base64url-encoding is incompatible with base64+urlencoding in ~3% of cases, which is easily missed during development, but will surely happen in production.</div><br/><div id="42209264" class="c"><input type="checkbox" id="c-42209264" checked=""/><div class="controls bullet"><span class="by">Retr0id</span><span>|</span><a href="#42208750">root</a><span>|</span><a href="#42208829">parent</a><span>|</span><a href="#42210684">next</a><span>|</span><label class="collapse" for="c-42209264">[-]</label><label class="expand" for="c-42209264">[2 more]</label></div><br/><div class="children"><div class="content">Isn&#x27;t it a lot more than 3%? I don&#x27;t think I&#x27;ve heard anyone say url-safe-base64 and actually mean urlencode(base64(x))</div><br/><div id="42210692" class="c"><input type="checkbox" id="c-42210692" checked=""/><div class="controls bullet"><span class="by">deathanatos</span><span>|</span><a href="#42208750">root</a><span>|</span><a href="#42209264">parent</a><span>|</span><a href="#42210684">next</a><span>|</span><label class="collapse" for="c-42210692">[-]</label><label class="expand" for="c-42210692">[1 more]</label></div><br/><div class="children"><div class="content">… yeah. I assume they&#x27;re getting that from doing 3&#x2F;64, but for uniform bytes, you&#x27;re rolling that 3&#x2F;64 chance every base64-output-character. (And bytes are hardly uniform, either … TFA&#x27;s example input of JSON is going to skew towards that format&#x27;s character set.)</div><br/></div></div></div></div><div id="42210684" class="c"><input type="checkbox" id="c-42210684" checked=""/><div class="controls bullet"><span class="by">deathanatos</span><span>|</span><a href="#42208750">root</a><span>|</span><a href="#42208829">parent</a><span>|</span><a href="#42209264">prev</a><span>|</span><a href="#42209258">next</a><span>|</span><label class="collapse" for="c-42210684">[-]</label><label class="expand" for="c-42210684">[1 more]</label></div><br/><div class="children"><div class="content">oh, geez. No, just base64, using the URL safe alphabet. (The obvious 62 characters, and &quot;-_&quot; for the last two.<p>It&#x27;s called &quot;urlsafe base64&quot;, or some variant, in the languages I work in.<p>&gt; <i>This encoding may be referred to as &quot;base64url&quot;.</i><p><a href="https:&#x2F;&#x2F;datatracker.ietf.org&#x2F;doc&#x2F;html&#x2F;rfc4648#section-5" rel="nofollow">https:&#x2F;&#x2F;datatracker.ietf.org&#x2F;doc&#x2F;html&#x2F;rfc4648#section-5</a><p>But yeah, it&#x27;s not base64 followed by a urlencode. It&#x27;s &quot;just&quot; base64-with-a-different-alphabet.</div><br/></div></div></div></div></div></div><div id="42209258" class="c"><input type="checkbox" id="c-42209258" checked=""/><div class="controls bullet"><span class="by">trevor-e</span><span>|</span><a href="#42208750">prev</a><span>|</span><a href="#42212034">next</a><span>|</span><label class="collapse" for="c-42209258">[-]</label><label class="expand" for="c-42209258">[1 more]</label></div><br/><div class="children"><div class="content">I came across a similar issue when experimenting with the Crystal language. I thought it would be fun to build a simple web scraper to test it out, only to find the default HTTP client fails to parse many cookies set by the response and aborts.</div><br/></div></div><div id="42212034" class="c"><input type="checkbox" id="c-42212034" checked=""/><div class="controls bullet"><span class="by">replacecookies</span><span>|</span><a href="#42209258">prev</a><span>|</span><a href="#42211743">next</a><span>|</span><label class="collapse" for="c-42212034">[-]</label><label class="expand" for="c-42212034">[1 more]</label></div><br/><div class="children"><div class="content">I got a trick.<p>Just dont make them, and dont accept them.</div><br/></div></div><div id="42211743" class="c"><input type="checkbox" id="c-42211743" checked=""/><div class="controls bullet"><span class="by">bvrmn</span><span>|</span><a href="#42212034">prev</a><span>|</span><a href="#42210221">next</a><span>|</span><label class="collapse" for="c-42211743">[-]</label><label class="expand" for="c-42211743">[1 more]</label></div><br/><div class="children"><div class="content">Almost nobody uses SimpleCookie.load for python. Flask, FastAPI, Django have own more relaxed parsers which doesn&#x27;t break on invalid byte.</div><br/></div></div><div id="42210221" class="c"><input type="checkbox" id="c-42210221" checked=""/><div class="controls bullet"><span class="by">IgorPartola</span><span>|</span><a href="#42211743">prev</a><span>|</span><a href="#42207199">next</a><span>|</span><label class="collapse" for="c-42210221">[-]</label><label class="expand" for="c-42210221">[13 more]</label></div><br/><div class="children"><div class="content">Cookies need to die. Their only legitimate use is with for which we have the Authentication header. Having a standard way to authenticate into a website in a browser would be amazing, just too bad that Basic and Digest auth wasn’t good enough at the time.<p>As a bonus we could get Persona-style passwordless future.</div><br/><div id="42210815" class="c"><input type="checkbox" id="c-42210815" checked=""/><div class="controls bullet"><span class="by">j16sdiz</span><span>|</span><a href="#42210221">parent</a><span>|</span><a href="#42210305">next</a><span>|</span><label class="collapse" for="c-42210815">[-]</label><label class="expand" for="c-42210815">[3 more]</label></div><br/><div class="children"><div class="content">How about user preference without logging in?
Are you suggesting create a trillion throwaway accounts?</div><br/><div id="42211161" class="c"><input type="checkbox" id="c-42211161" checked=""/><div class="controls bullet"><span class="by">MBCook</span><span>|</span><a href="#42210221">root</a><span>|</span><a href="#42210815">parent</a><span>|</span><a href="#42210305">next</a><span>|</span><label class="collapse" for="c-42211161">[-]</label><label class="expand" for="c-42211161">[2 more]</label></div><br/><div class="children"><div class="content">What about things like local storage?</div><br/><div id="42211555" class="c"><input type="checkbox" id="c-42211555" checked=""/><div class="controls bullet"><span class="by">hahn-kev</span><span>|</span><a href="#42210221">root</a><span>|</span><a href="#42211161">parent</a><span>|</span><a href="#42210305">next</a><span>|</span><label class="collapse" for="c-42211555">[-]</label><label class="expand" for="c-42211555">[1 more]</label></div><br/><div class="children"><div class="content">If you want to store language preferences then that means you only know client side and you can&#x27;t serve html in their language</div><br/></div></div></div></div></div></div><div id="42210305" class="c"><input type="checkbox" id="c-42210305" checked=""/><div class="controls bullet"><span class="by">wdr1</span><span>|</span><a href="#42210221">parent</a><span>|</span><a href="#42210815">prev</a><span>|</span><a href="#42207199">next</a><span>|</span><label class="collapse" for="c-42210305">[-]</label><label class="expand" for="c-42210305">[9 more]</label></div><br/><div class="children"><div class="content">Why are first-party cookies bad?</div><br/><div id="42210410" class="c"><input type="checkbox" id="c-42210410" checked=""/><div class="controls bullet"><span class="by">IgorPartola</span><span>|</span><a href="#42210221">root</a><span>|</span><a href="#42210305">parent</a><span>|</span><a href="#42207199">next</a><span>|</span><label class="collapse" for="c-42210410">[-]</label><label class="expand" for="c-42210410">[8 more]</label></div><br/><div class="children"><div class="content">They are not bad they just are unnecessary. If your application uses local state, use local storage. If you store session data on the server, identify the user using the Authorization header. Why send arbitrary strings back and forth often with requests that don’t need them. Plus the technology is clearly rotten. They never got namespacing snd expiration right so you can just do weird stuff with them. Also, CSRF wouldn’t be a thing if cookies weren’t. This is like saying “why is finger&#x2F;gopher&#x2F;etc. bad?” They are not exactly bad but they are obsolete.</div><br/><div id="42211772" class="c"><input type="checkbox" id="c-42211772" checked=""/><div class="controls bullet"><span class="by">bvrmn</span><span>|</span><a href="#42210221">root</a><span>|</span><a href="#42210410">parent</a><span>|</span><a href="#42210423">next</a><span>|</span><label class="collapse" for="c-42211772">[-]</label><label class="expand" for="c-42211772">[1 more]</label></div><br/><div class="children"><div class="content">&gt; if you store session data on the server, identify the user using the Authorization header.<p>And by what miracle browser would send Authorization header? Who sets it? For which domain it could be set?</div><br/></div></div><div id="42210423" class="c"><input type="checkbox" id="c-42210423" checked=""/><div class="controls bullet"><span class="by">baggy_trough</span><span>|</span><a href="#42210221">root</a><span>|</span><a href="#42210410">parent</a><span>|</span><a href="#42211772">prev</a><span>|</span><a href="#42207199">next</a><span>|</span><label class="collapse" for="c-42210423">[-]</label><label class="expand" for="c-42210423">[6 more]</label></div><br/><div class="children"><div class="content">How would you use the Authorization header to implement server side session data?</div><br/><div id="42211470" class="c"><input type="checkbox" id="c-42211470" checked=""/><div class="controls bullet"><span class="by">magicalhippo</span><span>|</span><a href="#42210221">root</a><span>|</span><a href="#42210423">parent</a><span>|</span><a href="#42211030">next</a><span>|</span><label class="collapse" for="c-42211470">[-]</label><label class="expand" for="c-42211470">[1 more]</label></div><br/><div class="children"><div class="content">Not a web dev. So do I understand it correctly that it&#x27;s not so much the server side of this that&#x27;s the issue, after all the Authorization header contains a nice token, but rather how to safely store the token client side <i>without</i> using cookies?</div><br/></div></div><div id="42211030" class="c"><input type="checkbox" id="c-42211030" checked=""/><div class="controls bullet"><span class="by">seandoe</span><span>|</span><a href="#42210221">root</a><span>|</span><a href="#42210423">parent</a><span>|</span><a href="#42211470">prev</a><span>|</span><a href="#42207199">next</a><span>|</span><label class="collapse" for="c-42211030">[-]</label><label class="expand" for="c-42211030">[4 more]</label></div><br/><div class="children"><div class="content">I think they mean storing an identifier in local or session storage and then sending it in the header.</div><br/><div id="42211784" class="c"><input type="checkbox" id="c-42211784" checked=""/><div class="controls bullet"><span class="by">bvrmn</span><span>|</span><a href="#42210221">root</a><span>|</span><a href="#42211030">parent</a><span>|</span><a href="#42211150">next</a><span>|</span><label class="collapse" for="c-42211784">[-]</label><label class="expand" for="c-42211784">[1 more]</label></div><br/><div class="children"><div class="content">Identifier in local storage could be stolen by 3rd party JavaScript. Anybody who wants to use local storage for sensitive information should read why there is a httpOnly cookie attribute.</div><br/></div></div><div id="42211150" class="c"><input type="checkbox" id="c-42211150" checked=""/><div class="controls bullet"><span class="by">baggy_trough</span><span>|</span><a href="#42210221">root</a><span>|</span><a href="#42211030">parent</a><span>|</span><a href="#42211784">prev</a><span>|</span><a href="#42207199">next</a><span>|</span><label class="collapse" for="c-42211150">[-]</label><label class="expand" for="c-42211150">[2 more]</label></div><br/><div class="children"><div class="content">It doesn&#x27;t work with basic multi page sites though.</div><br/><div id="42211419" class="c"><input type="checkbox" id="c-42211419" checked=""/><div class="controls bullet"><span class="by">seandoe</span><span>|</span><a href="#42210221">root</a><span>|</span><a href="#42211150">parent</a><span>|</span><a href="#42207199">next</a><span>|</span><label class="collapse" for="c-42211419">[-]</label><label class="expand" for="c-42211419">[1 more]</label></div><br/><div class="children"><div class="content">Oh right, strictly for spas.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="42207199" class="c"><input type="checkbox" id="c-42207199" checked=""/><div class="controls bullet"><span class="by">0x073</span><span>|</span><a href="#42210221">prev</a><span>|</span><a href="#42206795">next</a><span>|</span><label class="collapse" for="c-42207199">[-]</label><label class="expand" for="c-42207199">[22 more]</label></div><br/><div class="children"><div class="content">IT IS a mess, but I never saw json inside a cookie. For json I use local storage or indexeddb.</div><br/><div id="42207574" class="c"><input type="checkbox" id="c-42207574" checked=""/><div class="controls bullet"><span class="by">robgibbons</span><span>|</span><a href="#42207199">parent</a><span>|</span><a href="#42207955">next</a><span>|</span><label class="collapse" for="c-42207574">[-]</label><label class="expand" for="c-42207574">[9 more]</label></div><br/><div class="children"><div class="content">In both cases (cookie vs localStorage) you&#x27;re really just storing your data as a string value, not truly a JSON object, so  whether you use a cookie or localStorage is more dependent on the use case.<p>If you only ever need the stored data on the client, localStorage is your pick. If you need to pass it back to the server with each request, cookies.</div><br/><div id="42207830" class="c"><input type="checkbox" id="c-42207830" checked=""/><div class="controls bullet"><span class="by">recursive</span><span>|</span><a href="#42207199">root</a><span>|</span><a href="#42207574">parent</a><span>|</span><a href="#42208125">next</a><span>|</span><label class="collapse" for="c-42207830">[-]</label><label class="expand" for="c-42207830">[5 more]</label></div><br/><div class="children"><div class="content">JSON is explicitly a string serialization format.</div><br/><div id="42207992" class="c"><input type="checkbox" id="c-42207992" checked=""/><div class="controls bullet"><span class="by">robgibbons</span><span>|</span><a href="#42207199">root</a><span>|</span><a href="#42207830">parent</a><span>|</span><a href="#42208091">next</a><span>|</span><label class="collapse" for="c-42207992">[-]</label><label class="expand" for="c-42207992">[3 more]</label></div><br/><div class="children"><div class="content">Right, I meant it&#x27;s not a JavaScript object. It&#x27;s serialized into a string in any case, no matter which API you&#x27;re stuffing it into. So it&#x27;s a bit of a non-sequitur for the parent to suggest that it&#x27;s somehow weird to store JSON in a cookie, but not in localStorage. It&#x27;s all just strings.</div><br/><div id="42211180" class="c"><input type="checkbox" id="c-42211180" checked=""/><div class="controls bullet"><span class="by">MBCook</span><span>|</span><a href="#42207199">root</a><span>|</span><a href="#42207992">parent</a><span>|</span><a href="#42208971">next</a><span>|</span><label class="collapse" for="c-42211180">[-]</label><label class="expand" for="c-42211180">[1 more]</label></div><br/><div class="children"><div class="content">I find it weird too. I’ve always considered cookies like very stupid key value stores.<p>It would never occur to me to put something more than a simple token in a cookie. A username, and email address, some opaque thing.<p>The idea of trying to use it for arbitrary strings just seems weird to my intuition, but I don’t really know why. Maybe just because when I was learning about them long ago I don’t remember seeing that in any of the examples.</div><br/></div></div><div id="42208971" class="c"><input type="checkbox" id="c-42208971" checked=""/><div class="controls bullet"><span class="by">recursive</span><span>|</span><a href="#42207199">root</a><span>|</span><a href="#42207992">parent</a><span>|</span><a href="#42211180">prev</a><span>|</span><a href="#42208091">next</a><span>|</span><label class="collapse" for="c-42208971">[-]</label><label class="expand" for="c-42208971">[1 more]</label></div><br/><div class="children"><div class="content">My point is that there really is no such thing as &quot;truly a JSON object&quot;.</div><br/></div></div></div></div></div></div><div id="42208125" class="c"><input type="checkbox" id="c-42208125" checked=""/><div class="controls bullet"><span class="by">0x073</span><span>|</span><a href="#42207199">root</a><span>|</span><a href="#42207574">parent</a><span>|</span><a href="#42207830">prev</a><span>|</span><a href="#42207955">next</a><span>|</span><label class="collapse" for="c-42208125">[-]</label><label class="expand" for="c-42208125">[3 more]</label></div><br/><div class="children"><div class="content">Combine local storage with service worker, so you pass the data to the server if needed. Completely without setting cookies.</div><br/><div id="42208769" class="c"><input type="checkbox" id="c-42208769" checked=""/><div class="controls bullet"><span class="by">withinboredom</span><span>|</span><a href="#42207199">root</a><span>|</span><a href="#42208125">parent</a><span>|</span><a href="#42207955">next</a><span>|</span><label class="collapse" for="c-42208769">[-]</label><label class="expand" for="c-42208769">[2 more]</label></div><br/><div class="children"><div class="content">And if I don&#x27;t want any javascript to see my values, ever? Or how do you handle CSRF?</div><br/><div id="42211305" class="c"><input type="checkbox" id="c-42211305" checked=""/><div class="controls bullet"><span class="by">0x073</span><span>|</span><a href="#42207199">root</a><span>|</span><a href="#42208769">parent</a><span>|</span><a href="#42207955">next</a><span>|</span><label class="collapse" for="c-42211305">[-]</label><label class="expand" for="c-42211305">[1 more]</label></div><br/><div class="children"><div class="content">Httponly cookie is the way, but then you just don&#x27;t use json as cookie value that is send on every request.<p>Csrf is no problem as the data from service worker is only active on the site itself.
If you speak about csrf with a website where you can&#x27;t trust js, you&#x27;re site is broken as xhr&#x2F;fetch use the same httponly cookies and is affected as well.</div><br/></div></div></div></div></div></div></div></div><div id="42207955" class="c"><input type="checkbox" id="c-42207955" checked=""/><div class="controls bullet"><span class="by">hinkley</span><span>|</span><a href="#42207199">parent</a><span>|</span><a href="#42207574">prev</a><span>|</span><a href="#42208107">next</a><span>|</span><label class="collapse" for="c-42207955">[-]</label><label class="expand" for="c-42207955">[5 more]</label></div><br/><div class="children"><div class="content">Good way to hit max header length issues. Ask me how I know.</div><br/><div id="42208081" class="c"><input type="checkbox" id="c-42208081" checked=""/><div class="controls bullet"><span class="by">osrec</span><span>|</span><a href="#42207199">root</a><span>|</span><a href="#42207955">parent</a><span>|</span><a href="#42208107">next</a><span>|</span><label class="collapse" for="c-42208081">[-]</label><label class="expand" for="c-42208081">[4 more]</label></div><br/><div class="children"><div class="content">How?</div><br/><div id="42208563" class="c"><input type="checkbox" id="c-42208563" checked=""/><div class="controls bullet"><span class="by">hinkley</span><span>|</span><a href="#42207199">root</a><span>|</span><a href="#42208081">parent</a><span>|</span><a href="#42211331">next</a><span>|</span><label class="collapse" for="c-42208563">[-]</label><label class="expand" for="c-42208563">[1 more]</label></div><br/><div class="children"><div class="content">Well you see when a front end developer and a backend developer hate each other very much, they do a special hug and nine days later a 400 request header or cookie too large error is born.<p>(Seriously though, someone trying to implement breadcrumbs fe-only)</div><br/></div></div><div id="42211331" class="c"><input type="checkbox" id="c-42211331" checked=""/><div class="controls bullet"><span class="by">0x073</span><span>|</span><a href="#42207199">root</a><span>|</span><a href="#42208081">parent</a><span>|</span><a href="#42208563">prev</a><span>|</span><a href="#42208306">next</a><span>|</span><label class="collapse" for="c-42211331">[-]</label><label class="expand" for="c-42211331">[1 more]</label></div><br/><div class="children"><div class="content">I used chromelogger years ago that 
created often a too big http header over time
<a href="https:&#x2F;&#x2F;craig.is&#x2F;writing&#x2F;chrome-logger" rel="nofollow">https:&#x2F;&#x2F;craig.is&#x2F;writing&#x2F;chrome-logger</a></div><br/></div></div><div id="42208306" class="c"><input type="checkbox" id="c-42208306" checked=""/><div class="controls bullet"><span class="by">mdaniel</span><span>|</span><a href="#42207199">root</a><span>|</span><a href="#42208081">parent</a><span>|</span><a href="#42211331">prev</a><span>|</span><a href="#42208107">next</a><span>|</span><label class="collapse" for="c-42208306">[-]</label><label class="expand" for="c-42208306">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not them, but that 419 pattern in the logs is burned into my adrenaline response: <a href="https:&#x2F;&#x2F;duckduckgo.com&#x2F;?t=ffab&amp;q=nginx+419+cookie+header&amp;ia=web" rel="nofollow">https:&#x2F;&#x2F;duckduckgo.com&#x2F;?t=ffab&amp;q=nginx+419+cookie+header&amp;ia=...</a></div><br/></div></div></div></div></div></div><div id="42208107" class="c"><input type="checkbox" id="c-42208107" checked=""/><div class="controls bullet"><span class="by">lambdaone</span><span>|</span><a href="#42207199">parent</a><span>|</span><a href="#42207955">prev</a><span>|</span><a href="#42207761">next</a><span>|</span><label class="collapse" for="c-42208107">[-]</label><label class="expand" for="c-42208107">[3 more]</label></div><br/><div class="children"><div class="content">You&#x27;re really going to hate it when you learn about JSON Web Tokens, which exist exactly to hack past this sort of problem.</div><br/><div id="42212231" class="c"><input type="checkbox" id="c-42212231" checked=""/><div class="controls bullet"><span class="by">0x073</span><span>|</span><a href="#42207199">root</a><span>|</span><a href="#42208107">parent</a><span>|</span><a href="#42211184">next</a><span>|</span><label class="collapse" for="c-42212231">[-]</label><label class="expand" for="c-42212231">[1 more]</label></div><br/><div class="children"><div class="content">Jwt is encoded and it is used for data without a server session.<p>I&#x27;m not a fan for jwt and it used more often than it should, but sometimes it makes sense.</div><br/></div></div><div id="42211184" class="c"><input type="checkbox" id="c-42211184" checked=""/><div class="controls bullet"><span class="by">MBCook</span><span>|</span><a href="#42207199">root</a><span>|</span><a href="#42208107">parent</a><span>|</span><a href="#42212231">prev</a><span>|</span><a href="#42207761">next</a><span>|</span><label class="collapse" for="c-42211184">[-]</label><label class="expand" for="c-42211184">[1 more]</label></div><br/><div class="children"><div class="content">But at least they’re base 64 encoded so you don’t have to worry about the special characters</div><br/></div></div></div></div><div id="42207761" class="c"><input type="checkbox" id="c-42207761" checked=""/><div class="controls bullet"><span class="by">ricardo81</span><span>|</span><a href="#42207199">parent</a><span>|</span><a href="#42208107">prev</a><span>|</span><a href="#42207634">next</a><span>|</span><label class="collapse" for="c-42207761">[-]</label><label class="expand" for="c-42207761">[3 more]</label></div><br/><div class="children"><div class="content">Are they ubiquitous? I&#x27;m no client side guru, I know I could look at makeuseof etc, but why not ask some professionals instead.</div><br/><div id="42209099" class="c"><input type="checkbox" id="c-42209099" checked=""/><div class="controls bullet"><span class="by">loa_in_</span><span>|</span><a href="#42207199">root</a><span>|</span><a href="#42207761">parent</a><span>|</span><a href="#42207634">next</a><span>|</span><label class="collapse" for="c-42209099">[-]</label><label class="expand" for="c-42209099">[2 more]</label></div><br/><div class="children"><div class="content">At the very least localstorage is supported across the board</div><br/><div id="42210844" class="c"><input type="checkbox" id="c-42210844" checked=""/><div class="controls bullet"><span class="by">j16sdiz</span><span>|</span><a href="#42207199">root</a><span>|</span><a href="#42209099">parent</a><span>|</span><a href="#42207634">next</a><span>|</span><label class="collapse" for="c-42210844">[-]</label><label class="expand" for="c-42210844">[1 more]</label></div><br/><div class="children"><div class="content">No.
It is disabled in many browsers when opened in private mode. Where you can have session cookies</div><br/></div></div></div></div></div></div></div></div><div id="42206795" class="c"><input type="checkbox" id="c-42206795" checked=""/><div class="controls bullet"><span class="by">jerf</span><span>|</span><a href="#42207199">prev</a><span>|</span><a href="#42206847">next</a><span>|</span><label class="collapse" for="c-42206795">[-]</label><label class="expand" for="c-42206795">[6 more]</label></div><br/><div class="children"><div class="content">And the article isn&#x27;t even about the proliferation of attributes cookies have, that browsers honor, and in some cases are just mandatory. I was trying to explain SameSite to a coworker, and scrolled down a bit... <a href="https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;HTTP&#x2F;Cookies#cookie_prefixes" rel="nofollow">https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;HTTP&#x2F;Cookies#co...</a> wait, cookie <i>prefixes</i>? What the heck are those? The draft appears to date to 2016, but I&#x27;ve been <i>trying</i> to write secure cookie code for longer than that, hadn&#x27;t heard of it until recently, and I can&#x27;t really find when they went in to browsers (because there&#x27;s a lot more drafts than there are implemented drafts and the date doesn&#x27;t mean much necessarily), replies explaining that welcome.<p>Seems like every time I look at cookies they&#x27;ve grown a new wrinkle. They&#x27;re just a nightmare to keep up with.</div><br/><div id="42207203" class="c"><input type="checkbox" id="c-42207203" checked=""/><div class="controls bullet"><span class="by">marcosdumay</span><span>|</span><a href="#42206795">parent</a><span>|</span><a href="#42206980">next</a><span>|</span><label class="collapse" for="c-42207203">[-]</label><label class="expand" for="c-42207203">[1 more]</label></div><br/><div class="children"><div class="content">Well, prefixes are opt-in. You don&#x27;t have to keep-up with them.<p>The only recent large problem with cookies were to changes to avoid CSRF, those were opt-out, but they were also extremely overdue.<p>All of the web standards are always gaining new random features. You don&#x27;t have to keep-up with most of them. They do look like bad abstractions, but maybe it&#x27;s just the problem that is hard.</div><br/></div></div><div id="42206980" class="c"><input type="checkbox" id="c-42206980" checked=""/><div class="controls bullet"><span class="by">minitech</span><span>|</span><a href="#42206795">parent</a><span>|</span><a href="#42207203">prev</a><span>|</span><a href="#42206847">next</a><span>|</span><label class="collapse" for="c-42206980">[-]</label><label class="expand" for="c-42206980">[4 more]</label></div><br/><div class="children"><div class="content">&gt; <a href="https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;HTTP&#x2F;Cookies#cookie_prefixes" rel="nofollow">https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;HTTP&#x2F;Cookies#co...</a> wait, cookie prefixes? What the heck are those?<p><a href="https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;HTTP&#x2F;Cookies#cookie_prefixes" rel="nofollow">https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;HTTP&#x2F;Cookies#co...</a><p>&gt; For more information about cookie prefixes and the current state of browser support, see the Prefixes section of the Set-Cookie reference article.<p><a href="https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;HTTP&#x2F;Headers&#x2F;Set-Cookie#browser_compatibility" rel="nofollow">https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;HTTP&#x2F;Headers&#x2F;Se...</a><p>(Cookie prefixes have been widely supported since 2016 and more or less globally supported since 2019.)<p>They’re backwards-compatible, so if your cookie need meets the requirements for the `__Host-` prefix, you should use `__Host-`.</div><br/></div></div></div></div><div id="42206847" class="c"><input type="checkbox" id="c-42206847" checked=""/><div class="controls bullet"><span class="by">hinkley</span><span>|</span><a href="#42206795">prev</a><span>|</span><a href="#42211345">next</a><span>|</span><label class="collapse" for="c-42206847">[-]</label><label class="expand" for="c-42206847">[9 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>    Firefox accepts five characters which RFC recommends that servers not send:

    0x09 (horizontal tab)
    0x20 (spaces)
    0x22 (double quotes)
    0x2C (commas)
    0x5C (backslashes)
</code></pre>
I agree with at least some of these. Cookies without commas? Quotes?</div><br/><div id="42206954" class="c"><input type="checkbox" id="c-42206954" checked=""/><div class="controls bullet"><span class="by">remram</span><span>|</span><a href="#42206847">parent</a><span>|</span><a href="#42207988">next</a><span>|</span><label class="collapse" for="c-42206954">[-]</label><label class="expand" for="c-42206954">[7 more]</label></div><br/><div class="children"><div class="content">Quotes in the value when quotes delimit the value? Yeah that seems dangerous to me.</div><br/><div id="42207393" class="c"><input type="checkbox" id="c-42207393" checked=""/><div class="controls bullet"><span class="by">anamexis</span><span>|</span><a href="#42206847">root</a><span>|</span><a href="#42206954">parent</a><span>|</span><a href="#42207988">next</a><span>|</span><label class="collapse" for="c-42207393">[-]</label><label class="expand" for="c-42207393">[6 more]</label></div><br/><div class="children"><div class="content">Quotes don&#x27;t delimit the value.</div><br/><div id="42207455" class="c"><input type="checkbox" id="c-42207455" checked=""/><div class="controls bullet"><span class="by">pimlottc</span><span>|</span><a href="#42206847">root</a><span>|</span><a href="#42207393">parent</a><span>|</span><a href="#42207988">next</a><span>|</span><label class="collapse" for="c-42207455">[-]</label><label class="expand" for="c-42207455">[5 more]</label></div><br/><div class="children"><div class="content">Per the section 4.1.1 rules quoted in the article, cookie values can be optionally quoted:<p>&gt; cookie-value      = <i>cookie-octet &#x2F; ( DQUOTE </i>cookie-octet DQUOTE )</div><br/><div id="42207666" class="c"><input type="checkbox" id="c-42207666" checked=""/><div class="controls bullet"><span class="by">anamexis</span><span>|</span><a href="#42206847">root</a><span>|</span><a href="#42207455">parent</a><span>|</span><a href="#42207988">next</a><span>|</span><label class="collapse" for="c-42207666">[-]</label><label class="expand" for="c-42207666">[4 more]</label></div><br/><div class="children"><div class="content">That is true, but in that case they are part of the value itself, they&#x27;re not doing anything special:<p>&gt; Per the grammar above, the cookie-value MAY be wrapped in DQUOTE characters. Note that in this case, the initial and trailing DQUOTE characters are not stripped. They are part of the cookie-value, and will be included in Cookie header fields sent to the server.</div><br/><div id="42209555" class="c"><input type="checkbox" id="c-42209555" checked=""/><div class="controls bullet"><span class="by">kangalioo</span><span>|</span><a href="#42206847">root</a><span>|</span><a href="#42207666">parent</a><span>|</span><a href="#42207912">next</a><span>|</span><label class="collapse" for="c-42209555">[-]</label><label class="expand" for="c-42209555">[2 more]</label></div><br/><div class="children"><div class="content">Why does the specification specifically mention them, then?</div><br/><div id="42209647" class="c"><input type="checkbox" id="c-42209647" checked=""/><div class="controls bullet"><span class="by">anamexis</span><span>|</span><a href="#42206847">root</a><span>|</span><a href="#42209555">parent</a><span>|</span><a href="#42207912">next</a><span>|</span><label class="collapse" for="c-42209647">[-]</label><label class="expand" for="c-42209647">[1 more]</label></div><br/><div class="children"><div class="content">To clarify that <i>by the spec</i>, double quotes <i>are</i> allowed in the cookie value, but only at the beginning and end.<p>As for why that is, I have no idea.</div><br/></div></div></div></div><div id="42207912" class="c"><input type="checkbox" id="c-42207912" checked=""/><div class="controls bullet"><span class="by">pimlottc</span><span>|</span><a href="#42206847">root</a><span>|</span><a href="#42207666">parent</a><span>|</span><a href="#42209555">prev</a><span>|</span><a href="#42207988">next</a><span>|</span><label class="collapse" for="c-42207912">[-]</label><label class="expand" for="c-42207912">[1 more]</label></div><br/><div class="children"><div class="content">Ah, thanks for the clarification!</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="42211345" class="c"><input type="checkbox" id="c-42211345" checked=""/><div class="controls bullet"><span class="by">tigerlily</span><span>|</span><a href="#42206847">prev</a><span>|</span><a href="#42207934">next</a><span>|</span><label class="collapse" for="c-42211345">[-]</label><label class="expand" for="c-42211345">[1 more]</label></div><br/><div class="children"><div class="content">That reminds me of the Frog and Toad story about willpower vs eating cookies. Yes, handling cookies is a mine field!<p>I read the collected stories with my two year old, though I made sure we skipped the scary ones with the Dark Frog. I think the cookies ending was a little over his head, but we had fun taking turns acting out Toad pulling his blankets over his head when Frog tells him it&#x27;s spring.</div><br/></div></div><div id="42207934" class="c"><input type="checkbox" id="c-42207934" checked=""/><div class="controls bullet"><span class="by">hinkley</span><span>|</span><a href="#42211345">prev</a><span>|</span><a href="#42207620">next</a><span>|</span><label class="collapse" for="c-42207934">[-]</label><label class="expand" for="c-42207934">[3 more]</label></div><br/><div class="children"><div class="content">One of the things I’ve always found frustrating about cookies is that you have to do your own encoding instead of the API doing it for you. I’m sure someone somewhere does but too often I’m doing my own urlencode calls.</div><br/><div id="42208285" class="c"><input type="checkbox" id="c-42208285" checked=""/><div class="controls bullet"><span class="by">mdaniel</span><span>|</span><a href="#42207934">parent</a><span>|</span><a href="#42207620">next</a><span>|</span><label class="collapse" for="c-42208285">[-]</label><label class="expand" for="c-42208285">[2 more]</label></div><br/><div class="children"><div class="content">Encoding is at least solvable, but every browser having their own cookie <i>length</i> versus some standard value makes that some nonsense. Kong actually has a plugin to split (and, of course, recombine) cookies just to work around this</div><br/><div id="42208984" class="c"><input type="checkbox" id="c-42208984" checked=""/><div class="controls bullet"><span class="by">hinkley</span><span>|</span><a href="#42207934">root</a><span>|</span><a href="#42208285">parent</a><span>|</span><a href="#42207620">next</a><span>|</span><label class="collapse" for="c-42208984">[-]</label><label class="expand" for="c-42208984">[1 more]</label></div><br/><div class="children"><div class="content">But it&#x27;s so solvable that <i>I shouldn&#x27;t have to solve it</i></div><br/></div></div></div></div></div></div><div id="42207620" class="c"><input type="checkbox" id="c-42207620" checked=""/><div class="controls bullet"><span class="by">AlienRobot</span><span>|</span><a href="#42207934">prev</a><span>|</span><a href="#42208506">next</a><span>|</span><label class="collapse" for="c-42207620">[-]</label><label class="expand" for="c-42207620">[2 more]</label></div><br/><div class="children"><div class="content">&gt;everything behaves differently, and it&#x27;s a miracle that [it] work at all.<p>The web in a nutshell.</div><br/><div id="42208336" class="c"><input type="checkbox" id="c-42208336" checked=""/><div class="controls bullet"><span class="by">mdaniel</span><span>|</span><a href="#42207620">parent</a><span>|</span><a href="#42208506">next</a><span>|</span><label class="collapse" for="c-42208336">[-]</label><label class="expand" for="c-42208336">[1 more]</label></div><br/><div class="children"><div class="content">Browsers: what it would look like if Postel&#x27;s Law were somehow made manifest in C++ and also essential to modern life</div><br/></div></div></div></div><div id="42208506" class="c"><input type="checkbox" id="c-42208506" checked=""/><div class="controls bullet"><span class="by">dekhn</span><span>|</span><a href="#42207620">prev</a><span>|</span><a href="#42211668">next</a><span>|</span><label class="collapse" for="c-42208506">[-]</label><label class="expand" for="c-42208506">[6 more]</label></div><br/><div class="children"><div class="content">Everything about the web is a minefield.  It&#x27;s an exercise in &quot;how many unnecessary layers can we put between users and their content&quot;?</div><br/><div id="42208593" class="c"><input type="checkbox" id="c-42208593" checked=""/><div class="controls bullet"><span class="by">whatever1</span><span>|</span><a href="#42208506">parent</a><span>|</span><a href="#42208969">next</a><span>|</span><label class="collapse" for="c-42208593">[-]</label><label class="expand" for="c-42208593">[1 more]</label></div><br/><div class="children"><div class="content">I have a solution! I just made one more framework!</div><br/></div></div><div id="42208969" class="c"><input type="checkbox" id="c-42208969" checked=""/><div class="controls bullet"><span class="by">flockonus</span><span>|</span><a href="#42208506">parent</a><span>|</span><a href="#42208593">prev</a><span>|</span><a href="#42211668">next</a><span>|</span><label class="collapse" for="c-42208969">[-]</label><label class="expand" for="c-42208969">[4 more]</label></div><br/><div class="children"><div class="content">What are you implicitly comparing it against?</div><br/><div id="42209007" class="c"><input type="checkbox" id="c-42209007" checked=""/><div class="controls bullet"><span class="by">dekhn</span><span>|</span><a href="#42208506">root</a><span>|</span><a href="#42208969">parent</a><span>|</span><a href="#42211668">next</a><span>|</span><label class="collapse" for="c-42209007">[-]</label><label class="expand" for="c-42209007">[3 more]</label></div><br/><div class="children"><div class="content">Native desktop development.</div><br/><div id="42211854" class="c"><input type="checkbox" id="c-42211854" checked=""/><div class="controls bullet"><span class="by">bvrmn</span><span>|</span><a href="#42208506">root</a><span>|</span><a href="#42209007">parent</a><span>|</span><a href="#42211850">next</a><span>|</span><label class="collapse" for="c-42211854">[-]</label><label class="expand" for="c-42211854">[1 more]</label></div><br/><div class="children"><div class="content">Aka unindexable, unsearchable, violation access error mess.</div><br/></div></div><div id="42211850" class="c"><input type="checkbox" id="c-42211850" checked=""/><div class="controls bullet"><span class="by">tobyhinloopen</span><span>|</span><a href="#42208506">root</a><span>|</span><a href="#42209007">parent</a><span>|</span><a href="#42211854">prev</a><span>|</span><a href="#42211668">next</a><span>|</span><label class="collapse" for="c-42211850">[-]</label><label class="expand" for="c-42211850">[1 more]</label></div><br/><div class="children"><div class="content">Electron: Eyes Emoji</div><br/></div></div></div></div></div></div></div></div><div id="42211668" class="c"><input type="checkbox" id="c-42211668" checked=""/><div class="controls bullet"><span class="by">matsemann</span><span>|</span><a href="#42208506">prev</a><span>|</span><a href="#42207089">next</a><span>|</span><label class="collapse" for="c-42211668">[-]</label><label class="expand" for="c-42211668">[1 more]</label></div><br/><div class="children"><div class="content">Go and failing to parse http headers correctly should become a meme at some point.<p>One issue we had was the reverse proxy inserting headers about the origin of the request to the server behind. Like ip, ip city lookup etc. And that parsed through a service written in go that just crashed whenever the city had a Norwegians letter in it, took ages to understand why some of our (luckily only internal) services didn&#x27;t work for coworkers working from Røros for instance. And that was again not the fault of the Go software, but how the stdlib handled it.</div><br/></div></div><div id="42207089" class="c"><input type="checkbox" id="c-42207089" checked=""/><div class="controls bullet"><span class="by">jeffrallen</span><span>|</span><a href="#42211668">prev</a><span>|</span><a href="#42206760">next</a><span>|</span><label class="collapse" for="c-42207089">[-]</label><label class="expand" for="c-42207089">[12 more]</label></div><br/><div class="children"><div class="content">The article mocks Postel&#x27;s law, but if the setter of the cookie had been conservative in what they sent, there would have been no need for the article...</div><br/><div id="42207326" class="c"><input type="checkbox" id="c-42207326" checked=""/><div class="controls bullet"><span class="by">Sohcahtoa82</span><span>|</span><a href="#42207089">parent</a><span>|</span><a href="#42207210">next</a><span>|</span><label class="collapse" for="c-42207326">[-]</label><label class="expand" for="c-42207326">[7 more]</label></div><br/><div class="children"><div class="content">&gt; The article mocks Postel&#x27;s law<p>As they should.  Postel&#x27;s Law was a <i>terrible</i> idea and has created minefields all over the place.<p>Sometimes, those mines aren&#x27;t just bugs, but create gaping security holes.<p>If your client is sending data that doesn&#x27;t conform to spec, you have a bug, and you need to fix it.  It should never be up to the server to figure out what you meant and accept it.</div><br/><div id="42212210" class="c"><input type="checkbox" id="c-42212210" checked=""/><div class="controls bullet"><span class="by">ndusart</span><span>|</span><a href="#42207089">root</a><span>|</span><a href="#42207326">parent</a><span>|</span><a href="#42208108">next</a><span>|</span><label class="collapse" for="c-42212210">[-]</label><label class="expand" for="c-42212210">[1 more]</label></div><br/><div class="children"><div class="content">Following Postel&#x27;s law does not mean to accept anything. The received data should still be unambiguous.<p>You can see that in the case where ASN.1 data need to be exchanged. You could decide to always send them in the DER form (conservative) but accept BER (liberal) if it does make any problem. BER still allow to unambiguously encode ASN.1 data but allow several representations for the same data.<p>The problem with BER mainly lies with cryptographic signature as the signature will only match a specific encoding so that&#x27;s why DER is used in certificates. But you can still apply Postel&#x27;s law, you may still accept BER fields when parsing file. If the field has been incorrectly encoded in a varied form which is incompatible with the signature, you will just reject it as you would reject it because it is not standard with DER. But still, you lessen the burden to make sure all parts follow exactly the standards the same way and things tend to work more reliably across server&#x2F;clients combinations.</div><br/></div></div><div id="42208108" class="c"><input type="checkbox" id="c-42208108" checked=""/><div class="controls bullet"><span class="by">emn13</span><span>|</span><a href="#42207089">root</a><span>|</span><a href="#42207326">parent</a><span>|</span><a href="#42212210">prev</a><span>|</span><a href="#42207482">next</a><span>|</span><label class="collapse" for="c-42208108">[-]</label><label class="expand" for="c-42208108">[3 more]</label></div><br/><div class="children"><div class="content">And yet the html5 syntax variation survived (with all it&#x27;s weird now-codified quirks), and the simpler, stricter xhtml died out. I&#x27;m not disagreeing with out; it&#x27;s just that being flexible, even if it&#x27;s bad for the ecosystem is <i>good</i> for surviving in the ecosystem.</div><br/><div id="42208373" class="c"><input type="checkbox" id="c-42208373" checked=""/><div class="controls bullet"><span class="by">plorkyeran</span><span>|</span><a href="#42207089">root</a><span>|</span><a href="#42208108">parent</a><span>|</span><a href="#42207482">next</a><span>|</span><label class="collapse" for="c-42208373">[-]</label><label class="expand" for="c-42208373">[2 more]</label></div><br/><div class="children"><div class="content">There was a lot of pain and suffering along the way to html5, and html5 is the logical end state of postel&#x27;s law: every possible sequence of bytes is a valid html5 document with a well-defined parsing, so there is no longer any room to be more liberal in what you accept than what the standard permits (at least so far as parsing the document).</div><br/><div id="42208616" class="c"><input type="checkbox" id="c-42208616" checked=""/><div class="controls bullet"><span class="by">emn13</span><span>|</span><a href="#42207089">root</a><span>|</span><a href="#42208373">parent</a><span>|</span><a href="#42207482">next</a><span>|</span><label class="collapse" for="c-42208616">[-]</label><label class="expand" for="c-42208616">[1 more]</label></div><br/><div class="children"><div class="content">Getting slightly off topic, but I think it&#x27;s hard to find the right terminology to talk about html&#x27;s complexities.  As you point out, it isn&#x27;t really a syntax anymore now that literally every sequence is valid. Yet the parsing rules are obviously not as simple as a .* regex.  It&#x27;s syntactically simple, but structurally complex? What&#x27;s the right term for the complexity represented by how the stack of open elements interacts with self-closing or otherwise special elements?<p>Anyhow, I can&#x27;t say I&#x27;m thrilled that some deeply nested subtree of divs for instance might be closed by a open-button tag just because they were themselves part of a button, except when... well, lots of exceptions.  It&#x27;s what we have, I guess.<p>It&#x27;s also not a (fully) solved problem; just earlier this year I had to work around an issue in the chromium html parser that caused IIRC quadratic parsing behavior in select items with many options. That&#x27;s probably the most widely used parser in the world, and a really inanely simple repro. I wonder whether stuff like that would slip through as often were the parsing rules at all sane. And of course encapsulation of a document-fragment is tricky due to the context-sensitivity of the parsing rules; many valid DOM trees don&#x27;t have an HTML serialization.</div><br/></div></div></div></div></div></div><div id="42207482" class="c"><input type="checkbox" id="c-42207482" checked=""/><div class="controls bullet"><span class="by">SilasX</span><span>|</span><a href="#42207089">root</a><span>|</span><a href="#42207326">parent</a><span>|</span><a href="#42208108">prev</a><span>|</span><a href="#42207405">next</a><span>|</span><label class="collapse" for="c-42207482">[-]</label><label class="expand" for="c-42207482">[1 more]</label></div><br/><div class="children"><div class="content">You could split the difference with a 397 TOLERATING response, which lets you say &quot;okay I&#x27;ll handle that for now, but here&#x27;s what you were supposed to do, and I&#x27;ll expect that in the future&quot;. (j&#x2F;k it&#x27;s an April Fool&#x27;s parody)<p><a href="https:&#x2F;&#x2F;pastebin.com&#x2F;TPj9RwuZ" rel="nofollow">https:&#x2F;&#x2F;pastebin.com&#x2F;TPj9RwuZ</a></div><br/></div></div><div id="42207405" class="c"><input type="checkbox" id="c-42207405" checked=""/><div class="controls bullet"><span class="by">rendall</span><span>|</span><a href="#42207089">root</a><span>|</span><a href="#42207326">parent</a><span>|</span><a href="#42207482">prev</a><span>|</span><a href="#42207210">next</a><span>|</span><label class="collapse" for="c-42207405">[-]</label><label class="expand" for="c-42207405">[1 more]</label></div><br/><div class="children"><div class="content">I interpret the &quot;liberal&quot; part Postel&#x27;s Law to mean &quot;do your best to understand it, but that less important than accepting it, possibly returning a helpful error message&quot; and thus <i>&quot;The Go standard library couldn&#x27;t parse the cookie, leading to cascading failures all the way up the stack&quot;</i> should never be a thing that happens.</div><br/></div></div></div></div><div id="42207210" class="c"><input type="checkbox" id="c-42207210" checked=""/><div class="controls bullet"><span class="by">marcosdumay</span><span>|</span><a href="#42207089">parent</a><span>|</span><a href="#42207326">prev</a><span>|</span><a href="#42206760">next</a><span>|</span><label class="collapse" for="c-42207210">[-]</label><label class="expand" for="c-42207210">[4 more]</label></div><br/><div class="children"><div class="content">The problem with Postel&#x27;s law is exactly that the sender is never conservative, and will tend to use any detail that most receivers accept.</div><br/><div id="42210136" class="c"><input type="checkbox" id="c-42210136" checked=""/><div class="controls bullet"><span class="by">somat</span><span>|</span><a href="#42207089">root</a><span>|</span><a href="#42207210">parent</a><span>|</span><a href="#42206760">next</a><span>|</span><label class="collapse" for="c-42210136">[-]</label><label class="expand" for="c-42210136">[3 more]</label></div><br/><div class="children"><div class="content">So the problem with Postel&#x27;s law is that people don&#x27;t follow Postel&#x27;s law?</div><br/><div id="42211201" class="c"><input type="checkbox" id="c-42211201" checked=""/><div class="controls bullet"><span class="by">marcosdumay</span><span>|</span><a href="#42207089">root</a><span>|</span><a href="#42210136">parent</a><span>|</span><a href="#42206760">next</a><span>|</span><label class="collapse" for="c-42211201">[-]</label><label class="expand" for="c-42211201">[2 more]</label></div><br/><div class="children"><div class="content">The problem is that it&#x27;s a prisoner&#x27;s dilemma. And you can&#x27;t cooperate on a prisoner&#x27;s dilemma against the entire world.</div><br/><div id="42212072" class="c"><input type="checkbox" id="c-42212072" checked=""/><div class="controls bullet"><span class="by">ndusart</span><span>|</span><a href="#42207089">root</a><span>|</span><a href="#42211201">parent</a><span>|</span><a href="#42206760">next</a><span>|</span><label class="collapse" for="c-42212072">[-]</label><label class="expand" for="c-42212072">[1 more]</label></div><br/><div class="children"><div class="content">So, just be as conservative as possible when you produce data and as liberal as possible when you receive something. Your code will then require the least cooperation from *any* other code to be compatible with.<p>Doing otherwise will require cooperation to adjust on the specificities clients expect, and you fall into the trap of the prisoner dilemna.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="42212078" class="c"><input type="checkbox" id="c-42212078" checked=""/><div class="controls bullet"><span class="by">indulona</span><span>|</span><a href="#42206760">prev</a><span>|</span><a href="#42207725">next</a><span>|</span><label class="collapse" for="c-42212078">[-]</label><label class="expand" for="c-42212078">[1 more]</label></div><br/><div class="children"><div class="content">Literally everything in IT runs on decades old principles and technologies. The world simply refuses to fix things because &quot;if ain&#x27;t broken, don&#x27;t fix it&quot; philosophy. Look at TCP, HTML, JSON, SMTP..all good tech but insanely old and outdated and overtaxed for that it was invented for. When people joke that the entire banking industry runs on excel sheets, they are really not far from truth. Things will be shitty until they completely break down and people are forced to fix them. Look at JavaScript, this horribly stinking steaming pile of green diarrhea that rules over the entire front-end is still being worked on and developed and billions of money and countless work-hours have been wasted in order to make it somewhat usable, instead of just coming up with entirely new tech suitable for the 21st century. This is the entire internet and tech in general.</div><br/></div></div><div id="42207725" class="c"><input type="checkbox" id="c-42207725" checked=""/><div class="controls bullet"><span class="by">ralmidani</span><span>|</span><a href="#42212078">prev</a><span>|</span><a href="#42208041">next</a><span>|</span><label class="collapse" for="c-42207725">[-]</label><label class="expand" for="c-42207725">[1 more]</label></div><br/><div class="children"><div class="content">Wait til you have a legacy system and a newer system and need to, among other things:<p>- Implement redirects from the old login screen to the new one
- Keep sessions in sync
- Make sure all internal and external users know how to clear cookies
- Remind everyone to update bookmarks on all devices
- Troubleshoot edge cases</div><br/></div></div><div id="42208041" class="c"><input type="checkbox" id="c-42208041" checked=""/><div class="controls bullet"><span class="by">joshstrange</span><span>|</span><a href="#42207725">prev</a><span>|</span><a href="#42207459">next</a><span>|</span><label class="collapse" for="c-42208041">[-]</label><label class="expand" for="c-42208041">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Apple Support<p>Are we sure the website wasn&#x27;t just broken normally? I kid, a bit, but good lord does Apple _suck_ at websites. Apple Developer and, more often, App Store Connect is broken for no good reason with zero or a confusing error message.<p>Note: I&#x27;m typing this on a M3 Max MBP (via a Magic Keyboard and Magic Mouse) with an iPhone 16 Pro and iPad Mini (N-1 version) on the desk next to me with an Apple Watch Series 10 on my wrist and AirPods Pro in my pocket. I&#x27;m a huge Apple fanboy, but their websites are hot garbage.</div><br/><div id="42208378" class="c"><input type="checkbox" id="c-42208378" checked=""/><div class="controls bullet"><span class="by">mdaniel</span><span>|</span><a href="#42208041">parent</a><span>|</span><a href="#42207459">next</a><span>|</span><label class="collapse" for="c-42208378">[-]</label><label class="expand" for="c-42208378">[2 more]</label></div><br/><div class="children"><div class="content">But why <i>wouldn&#x27;t</i> web pages written in ObjC be just awesome and easy to manage?!<p><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;WebObjects" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;WebObjects</a><p>I can still remember when they&#x27;d purposefully take down their store page for some godforsaken reason. The mind reels</div><br/><div id="42209996" class="c"><input type="checkbox" id="c-42209996" checked=""/><div class="controls bullet"><span class="by">russelg</span><span>|</span><a href="#42208041">root</a><span>|</span><a href="#42208378">parent</a><span>|</span><a href="#42207459">next</a><span>|</span><label class="collapse" for="c-42209996">[-]</label><label class="expand" for="c-42209996">[1 more]</label></div><br/><div class="children"><div class="content">They still do take the store page offline in the leading hours and during a keynote.</div><br/></div></div></div></div></div></div><div id="42207459" class="c"><input type="checkbox" id="c-42207459" checked=""/><div class="controls bullet"><span class="by">rendall</span><span>|</span><a href="#42208041">prev</a><span>|</span><a href="#42208902">next</a><span>|</span><label class="collapse" for="c-42207459">[-]</label><label class="expand" for="c-42207459">[1 more]</label></div><br/><div class="children"><div class="content">&gt; <i>What servers SHOULD send and what browsers MUST accept are not aligned, a classic example of the tragedy of following Postel&#x27;s Law.</i><p>&quot;Be liberal in what you accept, and conservative in what you send&quot; is precisely the <i>opposite</i> of &quot;SHOULD send MUST accept&quot;. This would be an example of the tragedy of <i>not</i> following Postel&#x27;s Law.<p>If the specs followed Postel&#x27;s guidance, it would then have read &quot;Servers MUST send x and browsers SHOULD accept y&quot;.</div><br/></div></div></div></div></div></div></div></body></html>