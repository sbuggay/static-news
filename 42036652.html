<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1730710881540" as="style"/><link rel="stylesheet" href="styles.css?v=1730710881540"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://hardenedbsd.org/content/easy-feature-comparison">HardenedBSD Feature Comparison with OpenBSD, FreeBSD, NetBSD</a>Â <span class="domain">(<a href="https://hardenedbsd.org">hardenedbsd.org</a>)</span></div><div class="subtext"><span>transpute</span> | <span>45 comments</span></div><br/><div><div id="42037958" class="c"><input type="checkbox" id="c-42037958" checked=""/><div class="controls bullet"><span class="by">brynet</span><span>|</span><a href="#42037208">next</a><span>|</span><label class="collapse" for="c-42037958">[-]</label><label class="expand" for="c-42037958">[5 more]</label></div><br/><div class="children"><div class="content">It&#x27;s easy to invent a chart that only you can get a nearly perfect score on.<p>This does nothing to explain what any of these features are, what are &quot;Boot hardening&quot; and &quot;sysctl hardening&quot;?<p>At least OpenBSD&#x27;s innovations page makes an attempt to explain new concepts and features that have been developed over the years, and people can make any comparisons for themselves.<p><a href="https:&#x2F;&#x2F;www.openbsd.org&#x2F;innovations.html" rel="nofollow">https:&#x2F;&#x2F;www.openbsd.org&#x2F;innovations.html</a></div><br/><div id="42039298" class="c"><input type="checkbox" id="c-42039298" checked=""/><div class="controls bullet"><span class="by">JdeBP</span><span>|</span><a href="#42037958">parent</a><span>|</span><a href="#42038491">next</a><span>|</span><label class="collapse" for="c-42039298">[-]</label><label class="expand" for="c-42039298">[1 more]</label></div><br/><div class="children"><div class="content">It says &quot;Please note that this page is out-of-date. For a more detailed and up-to-date guide to HardenedBSD&#x27;s features, please visit our wiki.&quot; at the bottom.  So I tried that.<p>I&#x27;m guessing that &quot;sysctl hardening&quot; is <a href="https:&#x2F;&#x2F;git.hardenedbsd.org&#x2F;hardenedbsd&#x2F;HardenedBSD&#x2F;-&#x2F;wikis&#x2F;home#modified-sysctl-nodes" rel="nofollow">https:&#x2F;&#x2F;git.hardenedbsd.org&#x2F;hardenedbsd&#x2F;HardenedBSD&#x2F;-&#x2F;wikis&#x2F;...</a><p>There&#x27;s no clue on the wiki what &quot;boot hardening&quot; is, though.</div><br/></div></div><div id="42038491" class="c"><input type="checkbox" id="c-42038491" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#42037958">parent</a><span>|</span><a href="#42039298">prev</a><span>|</span><a href="#42037208">next</a><span>|</span><label class="collapse" for="c-42038491">[-]</label><label class="expand" for="c-42038491">[3 more]</label></div><br/><div class="children"><div class="content">I mean, both of these are really just lists of mitigations. What would really be useful is why each of these has been developed, what attacks it tries to stop, why that was chosen as something worth protecting against, and what is out of scope for each of them.</div><br/><div id="42039070" class="c"><input type="checkbox" id="c-42039070" checked=""/><div class="controls bullet"><span class="by">transpute</span><span>|</span><a href="#42037958">root</a><span>|</span><a href="#42038491">parent</a><span>|</span><a href="#42037208">next</a><span>|</span><label class="collapse" for="c-42039070">[-]</label><label class="expand" for="c-42039070">[2 more]</label></div><br/><div class="children"><div class="content">Good LLM prompt seed :)</div><br/><div id="42039562" class="c"><input type="checkbox" id="c-42039562" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#42037958">root</a><span>|</span><a href="#42039070">parent</a><span>|</span><a href="#42037208">next</a><span>|</span><label class="collapse" for="c-42039562">[-]</label><label class="expand" for="c-42039562">[1 more]</label></div><br/><div class="children"><div class="content">I doubt it. Most humans do a pretty poor job at this already, and LLMs train on things other humans have written. If you have examples to the contrary for a novel mitigation I&#x27;d love to see it, but I will also only believe it when I see it.</div><br/></div></div></div></div></div></div></div></div><div id="42037208" class="c"><input type="checkbox" id="c-42037208" checked=""/><div class="controls bullet"><span class="by">loeg</span><span>|</span><a href="#42037958">prev</a><span>|</span><a href="#42038864">next</a><span>|</span><label class="collapse" for="c-42037208">[-]</label><label class="expand" for="c-42037208">[10 more]</label></div><br/><div class="children"><div class="content">Read these claims with a pretty big asterisk.  Implementation quality of HBSD features is often poor or very poor.  <a href="https:&#x2F;&#x2F;www.fabiankeil.de&#x2F;gehacktes&#x2F;hardenedbsd&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.fabiankeil.de&#x2F;gehacktes&#x2F;hardenedbsd&#x2F;</a> is just one example.  Specifically some of the changes made to &quot;harden&quot; the system are pretty dubious and introduce new bugs, possibly security relevant, that did not previously exist.  No one runs or pen tests HBSD.  It&#x27;s even more niche than OpenBSD.</div><br/><div id="42037403" class="c"><input type="checkbox" id="c-42037403" checked=""/><div class="controls bullet"><span class="by">coretx</span><span>|</span><a href="#42037208">parent</a><span>|</span><a href="#42037427">next</a><span>|</span><label class="collapse" for="c-42037403">[-]</label><label class="expand" for="c-42037403">[3 more]</label></div><br/><div class="children"><div class="content">Self promotion &#x2F; advertisement should always be read with a _big_ *.
What should probably not be read with a _big_ * is their roadmap end: 2021...<p><a href="https:&#x2F;&#x2F;hardenedbsd.org&#x2F;content&#x2F;roadmap" rel="nofollow">https:&#x2F;&#x2F;hardenedbsd.org&#x2F;content&#x2F;roadmap</a></div><br/><div id="42037513" class="c"><input type="checkbox" id="c-42037513" checked=""/><div class="controls bullet"><span class="by">ori_b</span><span>|</span><a href="#42037208">root</a><span>|</span><a href="#42037403">parent</a><span>|</span><a href="#42037427">next</a><span>|</span><label class="collapse" for="c-42037513">[-]</label><label class="expand" for="c-42037513">[2 more]</label></div><br/><div class="children"><div class="content">With small projects, websites tend to be updated infrequently. On the other hand, there seem to have been 11 commits to the main project repo today: <a href="https:&#x2F;&#x2F;groups.google.com&#x2F;a&#x2F;hardenedbsd.org&#x2F;g&#x2F;src-commits-all" rel="nofollow">https:&#x2F;&#x2F;groups.google.com&#x2F;a&#x2F;hardenedbsd.org&#x2F;g&#x2F;src-commits-al...</a></div><br/><div id="42037568" class="c"><input type="checkbox" id="c-42037568" checked=""/><div class="controls bullet"><span class="by">loeg</span><span>|</span><a href="#42037208">root</a><span>|</span><a href="#42037513">parent</a><span>|</span><a href="#42037427">next</a><span>|</span><label class="collapse" for="c-42037568">[-]</label><label class="expand" for="c-42037568">[1 more]</label></div><br/><div class="children"><div class="content">These are all or mostly all just automated sync from upstream FreeBSD.</div><br/></div></div></div></div></div></div><div id="42037427" class="c"><input type="checkbox" id="c-42037427" checked=""/><div class="controls bullet"><span class="by">transpute</span><span>|</span><a href="#42037208">parent</a><span>|</span><a href="#42037403">prev</a><span>|</span><a href="#42037512">next</a><span>|</span><label class="collapse" for="c-42037427">[-]</label><label class="expand" for="c-42037427">[2 more]</label></div><br/><div class="children"><div class="content">A positive scenario for forks is when the original project incorporates downstream changes that were positive.<p>Could FreeBSD implement some of the security features identified by HardenedBSD?</div><br/><div id="42037555" class="c"><input type="checkbox" id="c-42037555" checked=""/><div class="controls bullet"><span class="by">loeg</span><span>|</span><a href="#42037208">root</a><span>|</span><a href="#42037427">parent</a><span>|</span><a href="#42037512">next</a><span>|</span><label class="collapse" for="c-42037555">[-]</label><label class="expand" for="c-42037555">[1 more]</label></div><br/><div class="children"><div class="content">Could implement some of the features (even if off by default), but probably not by using the HBSD diffs.</div><br/></div></div></div></div><div id="42037512" class="c"><input type="checkbox" id="c-42037512" checked=""/><div class="controls bullet"><span class="by">MuffinFlavored</span><span>|</span><a href="#42037208">parent</a><span>|</span><a href="#42037427">prev</a><span>|</span><a href="#42038864">next</a><span>|</span><label class="collapse" for="c-42037512">[-]</label><label class="expand" for="c-42037512">[4 more]</label></div><br/><div class="children"><div class="content">I can just think of so many better things to do than to write online arguing which BSD implementations of features is better.</div><br/><div id="42037542" class="c"><input type="checkbox" id="c-42037542" checked=""/><div class="controls bullet"><span class="by">doublerabbit</span><span>|</span><a href="#42037208">root</a><span>|</span><a href="#42037512">parent</a><span>|</span><a href="#42038864">next</a><span>|</span><label class="collapse" for="c-42037542">[-]</label><label class="expand" for="c-42037542">[3 more]</label></div><br/><div class="children"><div class="content">Write online how Linux distributions of features are better?</div><br/><div id="42037864" class="c"><input type="checkbox" id="c-42037864" checked=""/><div class="controls bullet"><span class="by">t-3</span><span>|</span><a href="#42037208">root</a><span>|</span><a href="#42037542">parent</a><span>|</span><a href="#42038864">next</a><span>|</span><label class="collapse" for="c-42037864">[-]</label><label class="expand" for="c-42037864">[2 more]</label></div><br/><div class="children"><div class="content">If anything, that&#x27;s much more pointless. The biggest difference between linux distros is what package manager and init systems they use by default. BSDs develop and maintain their own kernels and userspace, so there are actual non-cosmetic differences between them.</div><br/></div></div></div></div></div></div></div></div><div id="42038864" class="c"><input type="checkbox" id="c-42038864" checked=""/><div class="controls bullet"><span class="by">Panino</span><span>|</span><a href="#42037208">prev</a><span>|</span><a href="#42039073">next</a><span>|</span><label class="collapse" for="c-42038864">[-]</label><label class="expand" for="c-42038864">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Executable file integrity enforcement<p>I assume but don&#x27;t know for sure that this refers to Veriexec in NetBSD, and I&#x27;m not sure what in HardenedBSD. Anyone know?<p><a href="https:&#x2F;&#x2F;man.netbsd.org&#x2F;veriexec.8" rel="nofollow">https:&#x2F;&#x2F;man.netbsd.org&#x2F;veriexec.8</a><p>My understanding is that Veriexec isn&#x27;t enabled by default - the manpage says only that &quot;[s]ome kernels already enable Veriexec by default.&quot; If you have this enabled, how do you upgrade binaries? The manpage says that in strict mode 1, write access to monitored binaries is allowed but then <i>access</i> is denied. So I assume that after file modification, root then runs veriexecgen and veriexecctl load as mentioned in the manual to update the signatures list. So it seems that strict level 1 isn&#x27;t functionally different from a read-only &#x2F;usr or even just root-owned binaries. In either case, you just need root to update targeted binaries. Surely I&#x27;m missing something and would appreciate some insight.<p>At a glance as an outsider, stricter modes appear <i>somewhat</i> functionally similar to &quot;chflags schg&quot; on BSD systems, where more work is needed to get around restrictions. In the case of schg, you have to reboot into single user mode, remove the schg flag, then modify the binary, and continue booting into multi-user mode. You could do this as a remote attacker (as in not having console access) depending on what boot files are or aren&#x27;t protected with schg, but modifying all the necessary files can be a source of new problems.</div><br/><div id="42039186" class="c"><input type="checkbox" id="c-42039186" checked=""/><div class="controls bullet"><span class="by">yjftsjthsd-h</span><span>|</span><a href="#42038864">parent</a><span>|</span><a href="#42039073">next</a><span>|</span><label class="collapse" for="c-42039186">[-]</label><label class="expand" for="c-42039186">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not familiar enough to know if this is particularly well adopted with NetBSD, but the obvious way to do it that I could see is A&#x2F;B roots, where the active system can only update the inactive root.<p>I suspect the actual most likely case is that it&#x27;s meant for appliances where the running system <i>doesn&#x27;t</i> update itself, and updates are accomplished via actions like &quot;go physically replace the SD card with the new one&quot;.</div><br/></div></div></div></div><div id="42039073" class="c"><input type="checkbox" id="c-42039073" checked=""/><div class="controls bullet"><span class="by">h4ck_th3_pl4n3t</span><span>|</span><a href="#42038864">prev</a><span>|</span><a href="#42039257">next</a><span>|</span><label class="collapse" for="c-42039073">[-]</label><label class="expand" for="c-42039073">[1 more]</label></div><br/><div class="children"><div class="content">Can somebody explain to me how anybody could verify or reproduce working address randomization and position independent executables?<p>This is basically what muslc does, but with the kernel itself offering a memset &#x2F; malloc with randomized padding, right?<p>Also, what does ASLR brute force detection (SEGVGUARD) do? To me this sounds like malloc has a hook that maps process ids and tries to find heuristics of the allocated offsets?<p>Anybody know where those features are documented do someone can try to bypass&#x2F;exploit it?</div><br/></div></div><div id="42039257" class="c"><input type="checkbox" id="c-42039257" checked=""/><div class="controls bullet"><span class="by">prmoustache</span><span>|</span><a href="#42039073">prev</a><span>|</span><a href="#42039069">next</a><span>|</span><label class="collapse" for="c-42039257">[-]</label><label class="expand" for="c-42039257">[1 more]</label></div><br/><div class="children"><div class="content">&quot;hardening&quot; doesn&#x27;t mean anything without details. I see that word used several times in the list.</div><br/></div></div><div id="42039069" class="c"><input type="checkbox" id="c-42039069" checked=""/><div class="controls bullet"><span class="by">udev4096</span><span>|</span><a href="#42039257">prev</a><span>|</span><a href="#42037109">next</a><span>|</span><label class="collapse" for="c-42039069">[-]</label><label class="expand" for="c-42039069">[2 more]</label></div><br/><div class="children"><div class="content">For a hardened linux distro, take a look at kicksecure [0], which uses debian as base image<p>[0] - <a href="https:&#x2F;&#x2F;www.kicksecure.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.kicksecure.com&#x2F;</a></div><br/><div id="42039150" class="c"><input type="checkbox" id="c-42039150" checked=""/><div class="controls bullet"><span class="by">transpute</span><span>|</span><a href="#42039069">parent</a><span>|</span><a href="#42037109">next</a><span>|</span><label class="collapse" for="c-42039150">[-]</label><label class="expand" for="c-42039150">[1 more]</label></div><br/><div class="children"><div class="content">The list of disclaimers does impute confidence in their claims:<p><pre><code>  most of the topics.. are still in development and are not yet used by default
  .. Kicksecure has adopted a best-effort, but admittedly quite weak approach
  CFI, SafeStack, automatic stack variable init..unlikely..due to.. resourcing
  kernel security issues.. are rooted deep within its design
  upstream developers are not very focused on serious security enhancements</code></pre></div><br/></div></div></div></div><div id="42037109" class="c"><input type="checkbox" id="c-42037109" checked=""/><div class="controls bullet"><span class="by">unit149</span><span>|</span><a href="#42039069">prev</a><span>|</span><a href="#42038231">next</a><span>|</span><label class="collapse" for="c-42037109">[-]</label><label class="expand" for="c-42037109">[1 more]</label></div><br/><div class="children"><div class="content">Hand in glove, the only distro with stack zero-initialized by default. As of yet, still no SSL integration in crypto library.</div><br/></div></div><div id="42038231" class="c"><input type="checkbox" id="c-42038231" checked=""/><div class="controls bullet"><span class="by">mmooss</span><span>|</span><a href="#42037109">prev</a><span>|</span><a href="#42037697">next</a><span>|</span><label class="collapse" for="c-42038231">[-]</label><label class="expand" for="c-42038231">[1 more]</label></div><br/><div class="children"><div class="content">&quot;Please note that this page is out-of-date. For a more detailed and up-to-date guide to HardenedBSD&#x27;s features, please visit our wiki.&quot;<p>I don&#x27;t see a comparison in the wiki.<p><a href="https:&#x2F;&#x2F;git.hardenedbsd.org&#x2F;hardenedbsd&#x2F;HardenedBSD&#x2F;-&#x2F;wikis&#x2F;home" rel="nofollow">https:&#x2F;&#x2F;git.hardenedbsd.org&#x2F;hardenedbsd&#x2F;HardenedBSD&#x2F;-&#x2F;wikis&#x2F;...</a></div><br/></div></div><div id="42037697" class="c"><input type="checkbox" id="c-42037697" checked=""/><div class="controls bullet"><span class="by">ruthmarx</span><span>|</span><a href="#42038231">prev</a><span>|</span><a href="#42039578">next</a><span>|</span><label class="collapse" for="c-42037697">[-]</label><label class="expand" for="c-42037697">[18 more]</label></div><br/><div class="children"><div class="content">That checklist is interesting. In what sense does OpenBSD have most of the base OS sandboxed? I&#x27;m kind of skeptical of that, but wondering if I missed something.<p>What any BSD needs to have a merit to a claim to security, in 2024, is some form of MAC. As long as there is no way to take away from having an all powerful root user (and pledge and unveil ain&#x27;t it), then they have a long ways to go.</div><br/><div id="42037735" class="c"><input type="checkbox" id="c-42037735" checked=""/><div class="controls bullet"><span class="by">loeg</span><span>|</span><a href="#42037697">parent</a><span>|</span><a href="#42039578">next</a><span>|</span><label class="collapse" for="c-42037735">[-]</label><label class="expand" for="c-42037735">[17 more]</label></div><br/><div class="children"><div class="content">&gt;  In what sense does OpenBSD have most of the base OS sandboxed?<p>They&#x27;re talking about pledge.  <a href="https:&#x2F;&#x2F;man.openbsd.org&#x2F;pledge.2" rel="nofollow">https:&#x2F;&#x2F;man.openbsd.org&#x2F;pledge.2</a></div><br/><div id="42037978" class="c"><input type="checkbox" id="c-42037978" checked=""/><div class="controls bullet"><span class="by">ruthmarx</span><span>|</span><a href="#42037697">root</a><span>|</span><a href="#42037735">parent</a><span>|</span><a href="#42039578">next</a><span>|</span><label class="collapse" for="c-42037978">[-]</label><label class="expand" for="c-42037978">[16 more]</label></div><br/><div class="children"><div class="content">I thought that might be the case. So not actually sandboxing at all.</div><br/><div id="42038065" class="c"><input type="checkbox" id="c-42038065" checked=""/><div class="controls bullet"><span class="by">yjftsjthsd-h</span><span>|</span><a href="#42037697">root</a><span>|</span><a href="#42037978">parent</a><span>|</span><a href="#42039578">next</a><span>|</span><label class="collapse" for="c-42038065">[-]</label><label class="expand" for="c-42038065">[15 more]</label></div><br/><div class="children"><div class="content">What does Sandboxingâ¢ give you that pledge+unveil doesn&#x27;t?</div><br/><div id="42038303" class="c"><input type="checkbox" id="c-42038303" checked=""/><div class="controls bullet"><span class="by">ruthmarx</span><span>|</span><a href="#42037697">root</a><span>|</span><a href="#42038065">parent</a><span>|</span><a href="#42039578">next</a><span>|</span><label class="collapse" for="c-42038303">[-]</label><label class="expand" for="c-42038303">[14 more]</label></div><br/><div class="children"><div class="content">&gt; Sandboxingâ¢<p>Writing it like this is kind of funny, hoenstly, but not for the reasons you probably think.<p>&gt; give you that pledge+unveil doesn&#x27;t?<p>Not requiring the cooperation of developers to opt-in, for starters.<p>You really think pledge and unveil are equivalent to sandboxing? Can you refer to any sandboxing solution or technologies that limit themselves to restricting syscalls and hiding file paths? Unveil is a lot more useful as a component in sandboxing, I&#x27;ll give you that.<p>Something like linux namespaces or even capabilities would be a hell of a lot better though.</div><br/><div id="42038510" class="c"><input type="checkbox" id="c-42038510" checked=""/><div class="controls bullet"><span class="by">ori_b</span><span>|</span><a href="#42037697">root</a><span>|</span><a href="#42038303">parent</a><span>|</span><a href="#42039174">next</a><span>|</span><label class="collapse" for="c-42038510">[-]</label><label class="expand" for="c-42038510">[6 more]</label></div><br/><div class="children"><div class="content">Most programs require a setup phase, where they want a great deal of access to the environment to set up the resources they use, and a steady state phase, where they need very little access beyond pre-opened file descriptors.<p>An externally imposed sandboxing feature can be useful for namespacing, but is necessarily less restrictive than pledge and unveil. For example, in steady state on OpenBSD, most programs can&#x27;t even their own configs.</div><br/><div id="42038649" class="c"><input type="checkbox" id="c-42038649" checked=""/><div class="controls bullet"><span class="by">ruthmarx</span><span>|</span><a href="#42037697">root</a><span>|</span><a href="#42038510">parent</a><span>|</span><a href="#42039174">next</a><span>|</span><label class="collapse" for="c-42038649">[-]</label><label class="expand" for="c-42038649">[5 more]</label></div><br/><div class="children"><div class="content">&gt; An externally imposed sandboxing feature can be useful for namespacing, but is necessarily less restrictive than pledge and unveil.<p>An externally imposed sandboxing feature isn&#x27;t necessarily less restrictive than pledge and unveil at all, although I&#x27;m curious why you think that is the case.<p>To say nothing of the fact that pledge and unveil are wholly dependent on developer opt-in.<p>A good sandboxing solution should be robust and not require the cooperation of the programs that require sandboxing.</div><br/><div id="42038897" class="c"><input type="checkbox" id="c-42038897" checked=""/><div class="controls bullet"><span class="by">0x457</span><span>|</span><a href="#42037697">root</a><span>|</span><a href="#42038649">parent</a><span>|</span><a href="#42039166">next</a><span>|</span><label class="collapse" for="c-42038897">[-]</label><label class="expand" for="c-42038897">[2 more]</label></div><br/><div class="children"><div class="content">Those are two different kinds of sandboxing. One protects application from itself - &quot;here is what I use, if I try anything else, then it&#x27;s a bug&quot;.<p>Sandboxing you&#x27;re talking about protects system from the application. You really need both.<p>re: restrictiveness<p>With external sandboxing, you need to restrict to a common denominator of all application states you see youself observing that application. Internal sandbox can adjust itself as it goes.</div><br/><div id="42039207" class="c"><input type="checkbox" id="c-42039207" checked=""/><div class="controls bullet"><span class="by">ruthmarx</span><span>|</span><a href="#42037697">root</a><span>|</span><a href="#42038897">parent</a><span>|</span><a href="#42039166">next</a><span>|</span><label class="collapse" for="c-42039207">[-]</label><label class="expand" for="c-42039207">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Those are two different kinds of sandboxing.<p>I&#x27;m arguing that only one example is sandboxing, the other is imposing limitations but doesn&#x27;t meet the definition of sandboxing.</div><br/></div></div></div></div><div id="42039166" class="c"><input type="checkbox" id="c-42039166" checked=""/><div class="controls bullet"><span class="by">yjftsjthsd-h</span><span>|</span><a href="#42037697">root</a><span>|</span><a href="#42038649">parent</a><span>|</span><a href="#42038897">prev</a><span>|</span><a href="#42039174">next</a><span>|</span><label class="collapse" for="c-42039166">[-]</label><label class="expand" for="c-42039166">[2 more]</label></div><br/><div class="children"><div class="content">&gt; An externally imposed sandboxing feature isn&#x27;t necessarily less restrictive than pledge and unveil at all, although I&#x27;m curious why you think that is the case.<p>With pledge, you can read config files, open a file handle to your logs, and then completely drop the ability to open() files at all for the remaining lifetime of the program. How would you do that from outside the program?</div><br/><div id="42039213" class="c"><input type="checkbox" id="c-42039213" checked=""/><div class="controls bullet"><span class="by">ruthmarx</span><span>|</span><a href="#42037697">root</a><span>|</span><a href="#42039166">parent</a><span>|</span><a href="#42039174">next</a><span>|</span><label class="collapse" for="c-42039213">[-]</label><label class="expand" for="c-42039213">[1 more]</label></div><br/><div class="children"><div class="content">By monitoring and intercepting what the program is doing?</div><br/></div></div></div></div></div></div></div></div><div id="42039174" class="c"><input type="checkbox" id="c-42039174" checked=""/><div class="controls bullet"><span class="by">shiomiru</span><span>|</span><a href="#42037697">root</a><span>|</span><a href="#42038303">parent</a><span>|</span><a href="#42038510">prev</a><span>|</span><a href="#42039155">next</a><span>|</span><label class="collapse" for="c-42039174">[-]</label><label class="expand" for="c-42039174">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Can you refer to any sandboxing solution or technologies that limit themselves to restricting syscalls and hiding file paths?<p>FreeBSD has capsicum and Linux has seccomp-bpf &amp; landlock. Of the three, pledge and unveil are the least horrible execution of the same idea (though capsicum is alright, too).<p>Obviously it&#x27;s not a &quot;run any random machine code on my system safely&quot; type of sandbox, rather it&#x27;s used by e.g. browsers as defense in depth so that attackers can&#x27;t just outright call execl.</div><br/><div id="42039544" class="c"><input type="checkbox" id="c-42039544" checked=""/><div class="controls bullet"><span class="by">ruthmarx</span><span>|</span><a href="#42037697">root</a><span>|</span><a href="#42039174">parent</a><span>|</span><a href="#42039155">next</a><span>|</span><label class="collapse" for="c-42039544">[-]</label><label class="expand" for="c-42039544">[1 more]</label></div><br/><div class="children"><div class="content">&gt;  Of the three, pledge and unveil are the least horrible execution of the same idea<p>I don&#x27;t think they <i>are</i> the same idea though. pledge and unveil are significantly more limited in scope.<p>&gt; Obviously it&#x27;s not a &quot;run any random machine code on my system safely&quot; type of sandbox<p>That&#x27;s pretty much what a sandbox <i>is</i> though. Not every limitation or security augmentation is a sandbox, nor does it have to be.</div><br/></div></div></div></div><div id="42039155" class="c"><input type="checkbox" id="c-42039155" checked=""/><div class="controls bullet"><span class="by">yjftsjthsd-h</span><span>|</span><a href="#42037697">root</a><span>|</span><a href="#42038303">parent</a><span>|</span><a href="#42039174">prev</a><span>|</span><a href="#42038823">next</a><span>|</span><label class="collapse" for="c-42039155">[-]</label><label class="expand" for="c-42039155">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Not requiring the cooperation of developers to opt-in, for starters.<p>True, meaningful in the general case, and completely irrelevant in this particular case, which started with specifically the question of OpenBSD applying the protection in question to its own base system. I actually agree that being able to externally impose a sandbox is super useful, but self-imposed restrictions are perfectly applicable in this usecase.<p>&gt; You really think pledge and unveil are equivalent to sandboxing? Can you refer to any sandboxing solution or technologies that limit themselves to restricting syscalls and hiding file paths? Unveil is a lot more useful as a component in sandboxing, I&#x27;ll give you that.<p>I think that pledge and unveil are a <i>type</i> of sandboxing, certainly. And... I&#x27;m struggling to think of any sandboxing tech that does anything <i>but</i> limit syscalls and filesystem access. After rereading <a href="https:&#x2F;&#x2F;github.com&#x2F;containers&#x2F;bubblewrap?tab=readme-ov-file#sandboxing">https:&#x2F;&#x2F;github.com&#x2F;containers&#x2F;bubblewrap?tab=readme-ov-file#...</a> a bit, I suppose there&#x27;s a case for being able to <i>change</i> what a sandboxed process can see rather than only masking (ex. PID 1 is a different process inside and outside the sandbox), but that strikes me as a slight variation rather than a fundamental difference in what is or isn&#x27;t a &quot;sandbox&quot; per se. Likewise, I could see an argument that OpenBSD&#x27;s approach is coarser than it could be; ex. I think you could restrict a Linux process to keep your real user and be able to read files but not write them even though they&#x27;re owned by your user and are 644, but that&#x27;s more of a convenience thing than a true fundamental difference - an OpenBSD process could open files in read mode, keep the socket open, and then pledge away open() altogether which gives you the same outcome with more legwork.</div><br/><div id="42039249" class="c"><input type="checkbox" id="c-42039249" checked=""/><div class="controls bullet"><span class="by">ruthmarx</span><span>|</span><a href="#42037697">root</a><span>|</span><a href="#42039155">parent</a><span>|</span><a href="#42038823">next</a><span>|</span><label class="collapse" for="c-42039249">[-]</label><label class="expand" for="c-42039249">[1 more]</label></div><br/><div class="children"><div class="content">&gt; which started with specifically the question of OpenBSD applying the protection in question to its own base system.<p>Agreed, my answers did quickly go beyond the original point being claimed.<p>&gt; I think that pledge and unveil are a type of sandboxing, certainly.<p>I think they are limitations and that&#x27;s about it. They don&#x27;t fit the metaphor of a sandbox IMO.<p>&gt;  but that strikes me as a slight variation rather than a fundamental difference in what is or isn&#x27;t a &quot;sandbox&quot; per se.<p>Fundamentally I see a sandbox as something that is hard for the sandboxed application to escape, or even communicate out from except via limited well defined channels.<p>I don&#x27;t think limiting syscalls alone satisfies that.<p>As a test, I think a robust sandbox should be able to apply to <i>any</i> program, no matter what it is doing.<p>Do you think pledge satisfies that? What about a complex piece of software that needs to use a number of syscalls that could be leveraged for an attack frequently, and so can&#x27;t be meaningfully limited with pledge.<p>If that software has a vulnerability, the attacker now has access to the host system at least to the extent of the user the program was running under. That attacker certainly isn&#x27;t sandboxed, they don&#x27;t even have to escape a sandbox because there wasn&#x27;t really one there, just &#x27;concepts of a sandbox&#x27;.<p>Appreciating this discussion by the way!</div><br/></div></div></div></div><div id="42038823" class="c"><input type="checkbox" id="c-42038823" checked=""/><div class="controls bullet"><span class="by">tightbookkeeper</span><span>|</span><a href="#42037697">root</a><span>|</span><a href="#42038303">parent</a><span>|</span><a href="#42039155">prev</a><span>|</span><a href="#42039578">next</a><span>|</span><label class="collapse" for="c-42038823">[-]</label><label class="expand" for="c-42038823">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Not requiring the cooperation of developers to opt-in, for starters.<p>This is a good point. My initial thought is that the developers would know best what features their application needs? Furthermore, it&#x27;s work that every user benefits from, rather than requiring an IT professional to reconfigure for each use case.<p>What do you see as the downsides?</div><br/><div id="42039661" class="c"><input type="checkbox" id="c-42039661" checked=""/><div class="controls bullet"><span class="by">mrweasel</span><span>|</span><a href="#42037697">root</a><span>|</span><a href="#42038823">parent</a><span>|</span><a href="#42039222">next</a><span>|</span><label class="collapse" for="c-42039661">[-]</label><label class="expand" for="c-42039661">[1 more]</label></div><br/><div class="children"><div class="content">&gt; What do you see as the downsides?<p>Legacy software, new security issues which has not yet been patched. As the operator you have no way to isolate the application, you just have to wait for the developer for both mitigation and bug-fixes.<p>In the real world I don&#x27;t see that making much of a difference. Many sandbox solutions aren&#x27;t really being used anyway, legacy software can go on it&#x27;s own VM and network. Micro-segmentation of networks are in style for those types of companies anyway.<p>Pledge and Unveil seems like more pragmatic solutions to me, but they do require a certain level of care and engagement from the developers. If you don&#x27;t have that, then things like SELinux, AppArmor or some type of sandbox that can be applied by the operator can help prevent an attacker from getting a foothold on a server or VM.</div><br/></div></div><div id="42039222" class="c"><input type="checkbox" id="c-42039222" checked=""/><div class="controls bullet"><span class="by">yjftsjthsd-h</span><span>|</span><a href="#42037697">root</a><span>|</span><a href="#42038823">parent</a><span>|</span><a href="#42039661">prev</a><span>|</span><a href="#42039578">next</a><span>|</span><label class="collapse" for="c-42039222">[-]</label><label class="expand" for="c-42039222">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t think it applies in this exact case (the base OS locking itself down), but in general:<p>&gt; Furthermore, it&#x27;s work that every user benefits from, rather than requiring an IT professional to reconfigure for each use case.<p>A distro could distribute, say, bubblewrap configs that automatically sandbox packages and every user could likewise benefit from that.<p>&gt; What do you see as the downsides?<p>I think you&#x27;re right that devs are best placed to lock down their own code, but if you don&#x27;t have developer buy-in (or if they just don&#x27;t want to make the effort or aren&#x27;t available) then externally-imposed sandboxes are a lot easier for distro maintainers or end users to add after the fact than trying to patch the actual program source to do pledge+unveil or such.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="42039578" class="c"><input type="checkbox" id="c-42039578" checked=""/><div class="controls bullet"><span class="by">snvzz</span><span>|</span><a href="#42037697">prev</a><span>|</span><a href="#42036986">next</a><span>|</span><label class="collapse" for="c-42039578">[-]</label><label class="expand" for="c-42039578">[1 more]</label></div><br/><div class="children"><div class="content">It is cute that it only lists security features HardenedBSD has.<p>While e.g. ignoring many security features openbsd has and HardenedBSD has not.</div><br/></div></div><div id="42036986" class="c"><input type="checkbox" id="c-42036986" checked=""/><div class="controls bullet"><span class="by">yjftsjthsd-h</span><span>|</span><a href="#42039578">prev</a><span>|</span><label class="collapse" for="c-42036986">[-]</label><label class="expand" for="c-42036986">[2 more]</label></div><br/><div class="children"><div class="content"><i>Security</i> feature comparison, is should be said. Though I would guess it otherwise matches FreeBSD?</div><br/><div id="42037025" class="c"><input type="checkbox" id="c-42037025" checked=""/><div class="controls bullet"><span class="by">bell-cot</span><span>|</span><a href="#42036986">parent</a><span>|</span><label class="collapse" for="c-42037025">[-]</label><label class="expand" for="c-42037025">[1 more]</label></div><br/><div class="children"><div class="content">Pretty much yes? -<p>&gt; Introduction<p>&gt; Founded in 2014 by Oliver Pinter and Shawn Webb, HardenedBSD is a security-enhanced fork of FreeBSD. The HardenedBSD Project is implementing many exploit mitigation and security technologies on top of FreeBSD. The project started with Address Space Layout Randomization (ASLR) as an initial focal point and is now implementing further exploit mitigation techniques.<p>&gt; Why Fork FreeBSD?<p>&gt; HardenedBSD forked the FreeBSD codebase for ease of development. Prior to ...</div><br/></div></div></div></div></div></div></div></div></div></body></html>