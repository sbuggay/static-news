<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1724403664680" as="style"/><link rel="stylesheet" href="styles.css?v=1724403664680"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://kardinal.dev/">Show HN: Kardinal – Building light-weight Kubernetes dev ephemeral environments</a> <span class="domain">(<a href="https://kardinal.dev">kardinal.dev</a>)</span></div><div class="subtext"><span>TCR19</span> | <span>13 comments</span></div><br/><div><div id="41325944" class="c"><input type="checkbox" id="c-41325944" checked=""/><div class="controls bullet"><span class="by">clvx</span><span>|</span><a href="#41327051">next</a><span>|</span><label class="collapse" for="c-41325944">[-]</label><label class="expand" for="c-41325944">[1 more]</label></div><br/><div class="children"><div class="content">Not gonna lie. I designed a system that looks exactly like this. However, the plugin system was an operator instead of annotating a service which is kinda cleaner but it still felt dirty. A better approach is having a service registry to track the versions, values and clusters where this has been pushed but that means you needed a different API or extend the k8s API and deal with the whole auth&#x2F;authz system.<p>I think the biggest hurdle to implement a solution like this is your application MUST be a 12 factor app which sadly is not the case from what I&#x27;ve seen. Many devs hardcode values when shipping their code and containers which make it really difficult to add nodes to a DAG. Had this change, SDLC testing would be waaay easier.<p>In the same space, labeling of all services is a thing. As you are annotating it can be tracked but if you had different gateways or destination routes or other things that need to be tweaked at the mesh level, it could be daunting to track it. In my case, I ensure the whole mesh representation of a version could be tracked by a label so if you had a app=vote1,version=release-4,feature=shiny you could track the shiny components across the whole cluster.<p>Another hurdle is you are tied to a service mesh implementation. Istio is ok but it can be a beast. It also constraints your org to implement other networking alternatives which is something we wanted to explore.<p>I do like the project uses Nix =).</div><br/></div></div><div id="41327051" class="c"><input type="checkbox" id="c-41327051" checked=""/><div class="controls bullet"><span class="by">AeZ1E</span><span>|</span><a href="#41325944">prev</a><span>|</span><a href="#41325930">next</a><span>|</span><label class="collapse" for="c-41327051">[-]</label><label class="expand" for="c-41327051">[1 more]</label></div><br/><div class="children"><div class="content">wow, kardinal sounds cool for consolidating pre-production clusters! let&#x27;s stop duplicating and start simplifying our kubernetes environments. who else is all in for the hyper-lightweight multitenancy framework trend? let&#x27;s discuss!</div><br/></div></div><div id="41325930" class="c"><input type="checkbox" id="c-41325930" checked=""/><div class="controls bullet"><span class="by">marvin-hansen</span><span>|</span><a href="#41327051">prev</a><span>|</span><a href="#41326010">next</a><span>|</span><label class="collapse" for="c-41325930">[-]</label><label class="expand" for="c-41325930">[3 more]</label></div><br/><div class="children"><div class="content">Man this brilliant and goes straight to test it with my development workflow. Namespace isolation was always PITA,but full isolation would require a dedicated clusters so having a best of both solution really changes the game for lean and cost effective continues delivery.<p>As for value prop, maybe emphasize multi tenancy a bit more as this has the most cost saving potential at scale.</div><br/><div id="41325953" class="c"><input type="checkbox" id="c-41325953" checked=""/><div class="controls bullet"><span class="by">TCR19</span><span>|</span><a href="#41325930">parent</a><span>|</span><a href="#41326010">next</a><span>|</span><label class="collapse" for="c-41325953">[-]</label><label class="expand" for="c-41325953">[2 more]</label></div><br/><div class="children"><div class="content">Thanks for the kind words marvin-hansen, if you get a chance to test it out--would love to hear what you think or if you have any questions!</div><br/><div id="41326137" class="c"><input type="checkbox" id="c-41326137" checked=""/><div class="controls bullet"><span class="by">marvin-hansen</span><span>|</span><a href="#41325930">root</a><span>|</span><a href="#41325953">parent</a><span>|</span><a href="#41326010">next</a><span>|</span><label class="collapse" for="c-41326137">[-]</label><label class="expand" for="c-41326137">[1 more]</label></div><br/><div class="children"><div class="content">For sure, probably test it over the weekend. I&#x27;ve dealt with k8s virtualization before and as a result, my current system uses contextual auto configuration for all it&#x27;s services which makes it very easy to lift it from one kubernetes context to another, or even a docker only environment as it&#x27;s often the case with CI.<p>However my primary challenge is chronic cluster under utilization after having rewriten the bulk of the system in Rust. Therefore virtualizating the cluster makes the most sense. I think Google Cloud conducted a study that found that the bulk, like 75%,  of their K8s customer over provision by a wide margin. So there is definitely a market for cluster virtualization and even more so for multi tenancy.</div><br/></div></div></div></div></div></div><div id="41326010" class="c"><input type="checkbox" id="c-41326010" checked=""/><div class="controls bullet"><span class="by">juansebastianl</span><span>|</span><a href="#41325930">prev</a><span>|</span><a href="#41326861">next</a><span>|</span><label class="collapse" for="c-41326010">[-]</label><label class="expand" for="c-41326010">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m kind of new to the k8 world, can I ask how this compares to the approach taken by Tilt?</div><br/></div></div><div id="41326861" class="c"><input type="checkbox" id="c-41326861" checked=""/><div class="controls bullet"><span class="by">amne</span><span>|</span><a href="#41326010">prev</a><span>|</span><a href="#41326503">next</a><span>|</span><label class="collapse" for="c-41326861">[-]</label><label class="expand" for="c-41326861">[1 more]</label></div><br/><div class="children"><div class="content">unfortunately, this tool assumes full coverage with k8. but let&#x27;s say you have an external pub&#x2F;sub solution and your services are decoupled. that&#x27;s a pretty low bar.<p>sidenote: I noticed Istio (envoy actually) has some weird non-deterministic behavior when you hit pod resource limits (504 bad gateway, 0DC)</div><br/></div></div><div id="41326503" class="c"><input type="checkbox" id="c-41326503" checked=""/><div class="controls bullet"><span class="by">aliasxneo</span><span>|</span><a href="#41326861">prev</a><span>|</span><a href="#41326866">next</a><span>|</span><label class="collapse" for="c-41326503">[-]</label><label class="expand" for="c-41326503">[2 more]</label></div><br/><div class="children"><div class="content">Looks great. Unfortunately, I have no desire to manage Istio in my clusters. Would be interested one alternative methods are available.</div><br/><div id="41326531" class="c"><input type="checkbox" id="c-41326531" checked=""/><div class="controls bullet"><span class="by">ofrzeta</span><span>|</span><a href="#41326503">parent</a><span>|</span><a href="#41326866">next</a><span>|</span><label class="collapse" for="c-41326531">[-]</label><label class="expand" for="c-41326531">[1 more]</label></div><br/><div class="children"><div class="content">As far as I understand Kardinal manages Istio for you.</div><br/></div></div></div></div><div id="41326866" class="c"><input type="checkbox" id="c-41326866" checked=""/><div class="controls bullet"><span class="by">globular-toast</span><span>|</span><a href="#41326503">prev</a><span>|</span><a href="#41325701">next</a><span>|</span><label class="collapse" for="c-41326866">[-]</label><label class="expand" for="c-41326866">[1 more]</label></div><br/><div class="children"><div class="content">Looks interesting. I currently deploy dev instances as a single pod with everything in it, basically exactly the same as what devs get if they run docker compose locally. It works but pretty wasteful for many cases that don&#x27;t need their own db etc. Is this supposed to make that less wasteful? Is it any different in the &quot;full app&quot;&#x2F;end to end mode?</div><br/></div></div><div id="41325701" class="c"><input type="checkbox" id="c-41325701" checked=""/><div class="controls bullet"><span class="by">siliconc0w</span><span>|</span><a href="#41326866">prev</a><span>|</span><label class="collapse" for="c-41325701">[-]</label><label class="expand" for="c-41325701">[2 more]</label></div><br/><div class="children"><div class="content">Maybe I am misunderstanding the value prop but how does this compare to namespaces?</div><br/><div id="41325717" class="c"><input type="checkbox" id="c-41325717" checked=""/><div class="controls bullet"><span class="by">teal1987</span><span>|</span><a href="#41325701">parent</a><span>|</span><label class="collapse" for="c-41325717">[-]</label><label class="expand" for="c-41325717">[1 more]</label></div><br/><div class="children"><div class="content">Hey siliconc0w,<p>namespace-based deploys (or telepresence too) is equally &quot;lightweight&quot; to Kardinal. it&#x27;s just that (at least in our phrasing), those don&#x27;t quite constitute a separate &quot;environment&quot; as state is shared between any developers working at the same time<p>Kardinal matches those approaches in terms of light-weightedness, but offers state isolation guarantees too (like isolation for your dbs, queues, caches, managed services, etc). so in comparison to &quot;ephemeral environment&quot; approaches that give state isolation, we do believe we&#x27;re doing this in the most lightweight way possible by implementing that isolation at the layer of the network request rather than by duplicating deployed resources</div><br/></div></div></div></div></div></div></div></div></div></body></html>