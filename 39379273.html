<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1707987667563" as="style"/><link rel="stylesheet" href="styles.css?v=1707987667563"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.writesoftwarewell.com/anonymous-block-forwarding-in-ruby/">Anonymous Block Forwarding in Ruby</a> <span class="domain">(<a href="https://www.writesoftwarewell.com">www.writesoftwarewell.com</a>)</span></div><div class="subtext"><span>thunderbong</span> | <span>10 comments</span></div><br/><div><div id="39380216" class="c"><input type="checkbox" id="c-39380216" checked=""/><div class="controls bullet"><span class="by">ciconia</span><span>|</span><a href="#39380429">next</a><span>|</span><label class="collapse" for="c-39380216">[-]</label><label class="expand" for="c-39380216">[1 more]</label></div><br/><div class="children"><div class="content">Personally, I welcome our new anonymous block overlords. As a developer who writes more library code than app code, I think this is a good addition. Doing a cursory check on my code, in about 80% (gross estimation) of cases where a method captures a block, it just passes it on to another method call. The new style of anonymous block helps signify that the block is not directly manipulated or stored, but is just forwarded to another method. LGTM.</div><br/></div></div><div id="39380429" class="c"><input type="checkbox" id="c-39380429" checked=""/><div class="controls bullet"><span class="by">bruce343434</span><span>|</span><a href="#39380216">prev</a><span>|</span><a href="#39379622">next</a><span>|</span><label class="collapse" for="c-39380429">[-]</label><label class="expand" for="c-39380429">[2 more]</label></div><br/><div class="children"><div class="content">As a non ruby dev... This &quot;block&quot; malarkey has always seen slightly deranged to me. You know what would be even nicer syntax? Proper higher order functions!<p>Haskellish syntax example:<p><pre><code>    execute f = f &quot;test response&quot;

    perform = execute

    perform print</code></pre></div><br/><div id="39380504" class="c"><input type="checkbox" id="c-39380504" checked=""/><div class="controls bullet"><span class="by">justjust</span><span>|</span><a href="#39380429">parent</a><span>|</span><a href="#39379622">next</a><span>|</span><label class="collapse" for="c-39380504">[-]</label><label class="expand" for="c-39380504">[1 more]</label></div><br/><div class="children"><div class="content">Your code is very limited. Blocks allow you to return any type of object or to have any kind of side effects, the result is not limited to be an IO monad. Also in Haskell you can&#x27;t use variable number of arguments and the syntax is very different (curry by default of first argument), so no way to translate haskell style to ruby.</div><br/></div></div></div></div><div id="39379622" class="c"><input type="checkbox" id="c-39379622" checked=""/><div class="controls bullet"><span class="by">htatche</span><span>|</span><a href="#39380429">prev</a><span>|</span><a href="#39380148">next</a><span>|</span><label class="collapse" for="c-39379622">[-]</label><label class="expand" for="c-39379622">[2 more]</label></div><br/><div class="children"><div class="content">As a +10years Ruby dev, I don&#x27;t see anything looking &quot;pretty nice&quot; about this, just yet another a new confusing way of achieving the same result, but differently.</div><br/><div id="39380473" class="c"><input type="checkbox" id="c-39380473" checked=""/><div class="controls bullet"><span class="by">berkes</span><span>|</span><a href="#39379622">parent</a><span>|</span><a href="#39380148">next</a><span>|</span><label class="collapse" for="c-39380473">[-]</label><label class="expand" for="c-39380473">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been doing Ruby for some 15 years now and the major thing that puts me off is the community&#x27;s love for implicitness.<p>This is another case: we had a way that requires a programmer to explicitly define what she is forwarding and where she is forwarding it to.
And now we have a way that requires the reader of software to know the intricacies of the language in order to understand how the &quot;magic&quot; works.<p>I truly fail to see how this makes a language better.</div><br/></div></div></div></div><div id="39380148" class="c"><input type="checkbox" id="c-39380148" checked=""/><div class="controls bullet"><span class="by">lloeki</span><span>|</span><a href="#39379622">prev</a><span>|</span><a href="#39379560">next</a><span>|</span><label class="collapse" for="c-39380148">[-]</label><label class="expand" for="c-39380148">[1 more]</label></div><br/><div class="children"><div class="content">The use case for this would be that it doesn&#x27;t reify the block IOW doesn&#x27;t allocate a proc to wrap the block.<p>... but that optimisation has already been made† (and IIRC it is too for *args and **kwargs that just get forwarded to calls), so it mostly exists for consistency with anonymous * and ** and valueless keys, as well as documentation (making it explicit that the method accepts a block right from the signature). Here&#x27;s the discussion: <a href="https:&#x2F;&#x2F;bugs.ruby-lang.org&#x2F;issues&#x2F;11256" rel="nofollow">https:&#x2F;&#x2F;bugs.ruby-lang.org&#x2F;issues&#x2F;11256</a><p>I don&#x27;t particularly like it given the style I like to use, but I can see how people using a certain different style would as their style would be more consistent and carry better intent.<p>Anyway the post linked from the OP has a more detailed rundown: <a href="https:&#x2F;&#x2F;zverok.space&#x2F;blog&#x2F;2023-11-24-syntax-sugar4-argument-forwarding.html" rel="nofollow">https:&#x2F;&#x2F;zverok.space&#x2F;blog&#x2F;2023-11-24-syntax-sugar4-argument-...</a><p>† <a href="https:&#x2F;&#x2F;bugs.ruby-lang.org&#x2F;issues&#x2F;14045" rel="nofollow">https:&#x2F;&#x2F;bugs.ruby-lang.org&#x2F;issues&#x2F;14045</a></div><br/></div></div><div id="39379515" class="c"><input type="checkbox" id="c-39379515" checked=""/><div class="controls bullet"><span class="by">thunkle</span><span>|</span><a href="#39379560">prev</a><span>|</span><label class="collapse" for="c-39379515">[-]</label><label class="expand" for="c-39379515">[2 more]</label></div><br/><div class="children"><div class="content">&quot;Looks pretty nice&quot;... Looks confusing to me. Seeing this code for the first time I think it would be hard to figure out what it means.</div><br/><div id="39379611" class="c"><input type="checkbox" id="c-39379611" checked=""/><div class="controls bullet"><span class="by">WirelessGigabit</span><span>|</span><a href="#39379515">parent</a><span>|</span><label class="collapse" for="c-39379611">[-]</label><label class="expand" for="c-39379611">[1 more]</label></div><br/><div class="children"><div class="content">It is confusing every time you look at it.<p>It&#x27;s nothing more than a piece of code that is defined somewhere but pasted in in another location.<p>It&#x27;s a mess to debug.</div><br/></div></div></div></div></div></div></div></div></div></body></html>