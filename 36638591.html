<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1688806856383" as="style"/><link rel="stylesheet" href="styles.css?v=1688806856383"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://zamfofex.neocities.org/mimimi/">Show HN: My platforming game written in C 89</a>Â <span class="domain">(<a href="https://zamfofex.neocities.org">zamfofex.neocities.org</a>)</span></div><div class="subtext"><span>zamfofex</span> | <span>27 comments</span></div><br/><div><div id="36638997" class="c"><input type="checkbox" id="c-36638997" checked=""/><div class="controls bullet"><span class="by">Minor49er</span><span>|</span><a href="#36641072">next</a><span>|</span><label class="collapse" for="c-36638997">[-]</label><label class="expand" for="c-36638997">[3 more]</label></div><br/><div class="children"><div class="content">While the scrolling and animation is smooth, why not have a dedicated jump button? With the current controls, the character would jump when I was just trying to walk around normally. It&#x27;s also really difficult to gauge how much of a runway is needed to make the jumps with double tapping</div><br/><div id="36639290" class="c"><input type="checkbox" id="c-36639290" checked=""/><div class="controls bullet"><span class="by">virtue3</span><span>|</span><a href="#36638997">parent</a><span>|</span><a href="#36641072">next</a><span>|</span><label class="collapse" for="c-36639290">[-]</label><label class="expand" for="c-36639290">[2 more]</label></div><br/><div class="children"><div class="content">I find this incredibly challenging to play with the current control scheme.  Either up or space would be nice to jump with.  Heck even if a single mouse click was jump it would be easier.<p>Having to time holding down left and then double taping it is an exercise in frustration.<p>Other than that it looks interesting, I enjoyed the moving platforms.</div><br/><div id="36642510" class="c"><input type="checkbox" id="c-36642510" checked=""/><div class="controls bullet"><span class="by">casey2</span><span>|</span><a href="#36638997">root</a><span>|</span><a href="#36639290">parent</a><span>|</span><a href="#36641072">next</a><span>|</span><label class="collapse" for="c-36642510">[-]</label><label class="expand" for="c-36642510">[1 more]</label></div><br/><div class="children"><div class="content">Skill issue</div><br/></div></div></div></div></div></div><div id="36641072" class="c"><input type="checkbox" id="c-36641072" checked=""/><div class="controls bullet"><span class="by">Solvency</span><span>|</span><a href="#36638997">prev</a><span>|</span><a href="#36640095">next</a><span>|</span><label class="collapse" for="c-36641072">[-]</label><label class="expand" for="c-36641072">[1 more]</label></div><br/><div class="children"><div class="content">You got this far into writing a game...why would you ever make double tapping A&#x2F;D be jump? It&#x27;s like some kind of weird Andy Kaufman prank on your desired audience.</div><br/></div></div><div id="36640095" class="c"><input type="checkbox" id="c-36640095" checked=""/><div class="controls bullet"><span class="by">gnramires</span><span>|</span><a href="#36641072">prev</a><span>|</span><a href="#36639007">next</a><span>|</span><label class="collapse" for="c-36640095">[-]</label><label class="expand" for="c-36640095">[1 more]</label></div><br/><div class="children"><div class="content">This is going to be a very personal opinion, so please don&#x27;t hear too much into it, and keep doing what you think is best, what you&#x27;re doing is awesome :)<p>That said, I absolutely love the pixel art, characters and animation. I think you should leave aside platforming for interactive pixel art rich environments. Kind of like an adventure game but extremely interactive? Say maybe you could pick up flasks and mix potions to do things, and the environment could be reactive as well. I think that would be much more interesting and unique (I&#x27;d love to play it anyways :) ).</div><br/></div></div><div id="36639007" class="c"><input type="checkbox" id="c-36639007" checked=""/><div class="controls bullet"><span class="by">suprjami</span><span>|</span><a href="#36640095">prev</a><span>|</span><a href="#36641223">next</a><span>|</span><label class="collapse" for="c-36639007">[-]</label><label class="expand" for="c-36639007">[2 more]</label></div><br/><div class="children"><div class="content">Can we have a few screenshots?</div><br/><div id="36642574" class="c"><input type="checkbox" id="c-36642574" checked=""/><div class="controls bullet"><span class="by">sgt</span><span>|</span><a href="#36639007">parent</a><span>|</span><a href="#36641223">next</a><span>|</span><label class="collapse" for="c-36642574">[-]</label><label class="expand" for="c-36642574">[1 more]</label></div><br/><div class="children"><div class="content">You just click on &quot;Play&quot;, then you take a screenshot as the game opens in your browser. The screenshot is yours to do with as you please.</div><br/></div></div></div></div><div id="36641223" class="c"><input type="checkbox" id="c-36641223" checked=""/><div class="controls bullet"><span class="by">syntheweave</span><span>|</span><a href="#36639007">prev</a><span>|</span><a href="#36639094">next</a><span>|</span><label class="collapse" for="c-36641223">[-]</label><label class="expand" for="c-36641223">[2 more]</label></div><br/><div class="children"><div class="content">I wasn&#x27;t sure I would be able to play on mobile but I was pleasantly surprised by the simple controls and managed to reach the third scene of chapter 1 before getting stuck, so, good job.<p>I don&#x27;t think anything needs to change with the controls, the people saying that aren&#x27;t the audience and don&#x27;t have the genre literacy to know what this type of control setup  is doing(for those watching: Jump King, Getting Over It both have the same kind of ruthless difficulty).<p>Regarding the technology, it&#x27;s healthy to simplify the architecture - I&#x27;ve played a lot with the same  kinds of thought processes of adding a lot of abstraction and gradually moved towards simpler answers. You already have a lot of answers that work, but my own take is that games of this type and scale need, roughly, these pieces:<p>* A &quot;god object&quot; entity model(every entity is one struct containing all necessary state for all possible behaviors). Going beyond that adds memory savings that you don&#x27;t need for modern machines, or modularity that will introduce more to debug.<p>* State machine formalisms to describe what screen to draw, how to transition between them, what animations to play, and other behaviors. All control flow logic encompasses the behavior of a state machine, so you have to decide which formalism is best to use for the context and will aid debugging. That&#x27;s why people sometimes gravitate towards coroutines and other high-level abstractions. Simple &quot;scripting languages&quot; that just describe a sequence of opcodes are something that frequently appear in old games.<p>* A simple constraint solver for the platforming physics. The problem that all physics systems have to solve is &quot;there are multiple possible solutions that will resolve this motion: which one is the best?&quot; This tends to be obfuscated in platforming physics by a convention of throwing away information about potential solutions early(e.g. moving on the x axis and resolving collision there, then doing the same on the y axis). Instead I recommend breaking down the motion into multiple permutations of &quot;x then y&quot; vs &quot;y then x&quot;, then sorting and ranking the outcomes relative to a heuristic of unimpeded free movement. It&#x27;s a more expensive check that also gives a better-feeling result.<p>* A pipeline to load the graphics, collision and scene assets. Although you can hard-code a lot of these things in a simple game, it can be convenient to export them from a spreadsheet and make it data-driven. Things like describing what &quot;chapter 1&quot; is are basically asset problems. I noticed that you have dialogue boxes described with a tileset and code to draw the tiles. This is how I would have done things once, since it is &quot;how they used to do it&quot; - today I would be likely to turn everything at runtime into an image, and to build the text itself, compile pre-baked images of text in the build process using tools like imagemagick. That makes the runtime simpler and reduces the kinds of assets it tracks, while allowing total freedom with the content of dialogues.<p>Sometimes with these projects, the engine development is being used to avoid content work. I suggest a physical graph paper notebook to create a location for that content to be designed, and to engage in some blind contour sketching to warm up to doing anything visually-oriented. When you have a whole storyboard for the game it becomes easier to conceptualize what code is necessary to get the effect, and do exactly that instead of generalizing it.<p>Two commercial &quot;back in the day&quot; games I would also look at for more inspiration: Xargon, Little Big Adventure 1. Both written in C, original source code is available. Studying those will give you a sense of where you are relative to finished work.</div><br/><div id="36641548" class="c"><input type="checkbox" id="c-36641548" checked=""/><div class="controls bullet"><span class="by">zamfofex</span><span>|</span><a href="#36641223">parent</a><span>|</span><a href="#36639094">next</a><span>|</span><label class="collapse" for="c-36641548">[-]</label><label class="expand" for="c-36641548">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Jump King, Getting Over It both have the same kind of ruthless difficulty<p>Yes, thatâs exactly the kind of thing I was going for! Though I will say: I feel like my controls, although difficult at first, are easier to get used to than either of those two, or at least they were to me. After a while playing with the game, you âget the hang of itâ so to say, and it starts feeling more natural.<p>Also, thank you for your advice! I have some thoughts&#x2F;questions about some of it:<p>&gt; Things like describing what &quot;chapter 1&quot; is are basically asset problems.<p>Well, my current solution is to encode the different âassetsâ (chapters, characters, images) as source code, and link them with the rest of the game at compile time. The biggest benefit is that I end up with a single executable that is easy to run, and donât need to bother loading assets at runtime. To me, it doesnât seem to matter ultimately whether I store information about how a chapter should play out as plain data or as code, and making it code seems simpler insofar.<p>Though a lot of the assets the game uses (e.g. the dialogue boxes you mentioned) are generated during intialisation, and then just displayed as a set of images during gameplay. Effectively, it shifts some âduring buildâ work to âwhen the game startsâ. The benefits include a simpler build system and fewer required build dependencies, besides being more straightâforward to work with.<p>&gt; A simple constraint solver for the platforming physics.<p>I donât think I fully understand what you mean by this. Are you saying you feel like it would be better to avoid performing collision checks in order of axis? I.e. that it would make more sense to perform the checks in conjunction somehow?</div><br/></div></div></div></div><div id="36639094" class="c"><input type="checkbox" id="c-36639094" checked=""/><div class="controls bullet"><span class="by">krapp</span><span>|</span><a href="#36641223">prev</a><span>|</span><a href="#36640015">next</a><span>|</span><label class="collapse" for="c-36639094">[-]</label><label class="expand" for="c-36639094">[1 more]</label></div><br/><div class="children"><div class="content">Please change your jump controls. Having the same keys for walking also jump when double-pressed makes twitchy platforming really difficult (especially given how loose the friction seems to be) and not in a good way.<p>Typically I&#x27;ve seen the spacebar, up button or W used for this. In terms of mechanics It&#x27;s just adding y (or -y, whichever is up) to the player&#x27;s velocity vector after a ground check.<p>Otherwise, good job.</div><br/></div></div><div id="36640015" class="c"><input type="checkbox" id="c-36640015" checked=""/><div class="controls bullet"><span class="by">User23</span><span>|</span><a href="#36639094">prev</a><span>|</span><a href="#36641141">next</a><span>|</span><label class="collapse" for="c-36640015">[-]</label><label class="expand" for="c-36640015">[8 more]</label></div><br/><div class="children"><div class="content">ANSI C aka C89 is a lovely language. It&#x27;s sad that the standards committee and implementors abandoned the guiding philosophy for the language in favor of the principle of most surprise. Go is probably the most old school C like language philosophically speaking, but on account of its primary purpose being pushing ads data to data centers around the world instead of writing Unix it leaves a bit to be desired for those of us who like low level programming.</div><br/><div id="36640068" class="c"><input type="checkbox" id="c-36640068" checked=""/><div class="controls bullet"><span class="by">pengaru</span><span>|</span><a href="#36640015">parent</a><span>|</span><a href="#36640832">next</a><span>|</span><label class="collapse" for="c-36640068">[-]</label><label class="expand" for="c-36640068">[6 more]</label></div><br/><div class="children"><div class="content">Once I started using designated initializers and compound literals it was C99 bare minimum for me.<p>Not sure what dead weight comes with as I&#x27;m not a C standards pedant, but there&#x27;s clearly some welcome niceties that don&#x27;t seem to ruin the language in my experience.</div><br/><div id="36640378" class="c"><input type="checkbox" id="c-36640378" checked=""/><div class="controls bullet"><span class="by">rcme</span><span>|</span><a href="#36640015">root</a><span>|</span><a href="#36640068">parent</a><span>|</span><a href="#36641088">next</a><span>|</span><label class="collapse" for="c-36640378">[-]</label><label class="expand" for="c-36640378">[2 more]</label></div><br/><div class="children"><div class="content">Yea I definitely need variable length arrays.</div><br/><div id="36642072" class="c"><input type="checkbox" id="c-36642072" checked=""/><div class="controls bullet"><span class="by">PhilipRoman</span><span>|</span><a href="#36640015">root</a><span>|</span><a href="#36640378">parent</a><span>|</span><a href="#36641088">next</a><span>|</span><label class="collapse" for="c-36642072">[-]</label><label class="expand" for="c-36642072">[1 more]</label></div><br/><div class="children"><div class="content">First of all - I&#x27;m about 50% sure whether this is sarcastic or not. If it&#x27;s not, then this comment is addressed to you. If it&#x27;s sarcasm, then consider it as an explanation for everyone else.<p>Variable modified <i>types</i> are cool - you can use them to cast a raw pointer to a N times N matrix and the math works out - you can just do m[i][j] instead of m[i*N+j].<p>But the evil part is when you declare variable length arrays on the stack. There are exactly two possible scenarios - either you have an upper bound on the allocated size or you don&#x27;t.<p>If you have an upper bound and it is reasonably small, use a fixed length array on the stack - there is no point in saving a few bytes on the stack.<p>If you don&#x27;t have an upper bound, VLAs will blow your stack, given the right inputs.<p>If you need a way to allocate unbounded arrays in a LIFO pattern, which 99% of the time are tiny, use a dedicated index-incrementing allocator, falling back on malloc when necessary. You can even cast the resulting pointer to a variably modified type, so that sizeof math works out</div><br/></div></div></div></div><div id="36641088" class="c"><input type="checkbox" id="c-36641088" checked=""/><div class="controls bullet"><span class="by">User23</span><span>|</span><a href="#36640015">root</a><span>|</span><a href="#36640068">parent</a><span>|</span><a href="#36640378">prev</a><span>|</span><a href="#36640832">next</a><span>|</span><label class="collapse" for="c-36641088">[-]</label><label class="expand" for="c-36641088">[3 more]</label></div><br/><div class="children"><div class="content">I think ANSI C struct initialization is considerably more readable really. If there are enough members that it gets confusing then tab formatting the values along with a field name comment at the top works great. As for arrays, I don&#x27;t see how designated initializers really offer anything interesting. Sparse array literals aren&#x27;t really a pragmatically useful thing in my experience.<p>I&#x27;ll allow of course that they don&#x27;t &quot;ruin the language&quot; they just increase the cognitive burden of reading code.</div><br/><div id="36641900" class="c"><input type="checkbox" id="c-36641900" checked=""/><div class="controls bullet"><span class="by">pengaru</span><span>|</span><a href="#36640015">root</a><span>|</span><a href="#36641088">parent</a><span>|</span><a href="#36640832">next</a><span>|</span><label class="collapse" for="c-36641900">[-]</label><label class="expand" for="c-36641900">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a substantial quality of life improvement to be able to express things like:<p><pre><code>  vv = 3f_add(&amp;v, &amp;(3f_t){.x = .1, .y = .2, .z = .3 });
</code></pre>
vs. having to declare and name the literal 3f_t beforehand, wasting my time and cluttering up the code with noise.</div><br/><div id="36642374" class="c"><input type="checkbox" id="c-36642374" checked=""/><div class="controls bullet"><span class="by">thesnide</span><span>|</span><a href="#36640015">root</a><span>|</span><a href="#36641900">parent</a><span>|</span><a href="#36640832">next</a><span>|</span><label class="collapse" for="c-36642374">[-]</label><label class="expand" for="c-36642374">[1 more]</label></div><br/><div class="children"><div class="content">I actually was also thinking that way.<p>But then, after looking back at my old code, I struggled and crafted my 1SLOC guiding principle. I never looked back.<p>Wasting time when writing code is actually an investment into future read speed.<p>I even wrote some time ago about my rationale for 1SLOC <a href="https:&#x2F;&#x2F;blog.pwkf.org&#x2F;2022&#x2F;09&#x2F;18&#x2F;always-optimize-for-dummies.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;blog.pwkf.org&#x2F;2022&#x2F;09&#x2F;18&#x2F;always-optimize-for-dummies...</a></div><br/></div></div></div></div></div></div></div></div><div id="36640832" class="c"><input type="checkbox" id="c-36640832" checked=""/><div class="controls bullet"><span class="by">Dwedit</span><span>|</span><a href="#36640015">parent</a><span>|</span><a href="#36640068">prev</a><span>|</span><a href="#36641141">next</a><span>|</span><label class="collapse" for="c-36640832">[-]</label><label class="expand" for="c-36640832">[1 more]</label></div><br/><div class="children"><div class="content">Hope you don&#x27;t need single line comments or even declaring variables in the middle of your code.</div><br/></div></div></div></div><div id="36641141" class="c"><input type="checkbox" id="c-36641141" checked=""/><div class="controls bullet"><span class="by">seba_dos1</span><span>|</span><a href="#36640015">prev</a><span>|</span><a href="#36639658">next</a><span>|</span><label class="collapse" for="c-36641141">[-]</label><label class="expand" for="c-36641141">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Over time, the gameâs code became complicated, and I decided to use advanced features such as coroutines and higher order procedures, besides general overly engineered abstractions.<p>&gt; But then, over time I grew to feel like a lot of those abstractions didnât really add anything to it, and just made it more complicated (and oftentimes more buggy) than it really needed to be, so a few weeks ago, I made a significant refactoring to it to remove all of those abstractions without removing almost any features from the game.<p>Abstractions, while incredibly useful, can be overrated.<p>When I started writing my first C game about a decade ago, I used C89 too. However, after some time I realized that C89&#x27;s limitations don&#x27;t make my code cleaner at all and just make it more annoying to write. Since most of those games are game jam projects written under extreme time pressure, it made absolutely no sense for the language to pester me with pointless things like variable declarations outside of for loops or lack of designated initializers, so my toolkit uses C99 now. Initially I also made some use of nested functions, but I disable GNU extensions these days too.<p>Now I have about 40 games written on top of that codebase, a few of them being bigger projects. I&#x27;ve ended up with an &quot;engine&quot; of sorts that I have never really written - I&#x27;ve been always writing games, not an engine, and only then abstracted things away that actually begged to be abstracted. It did grew some fancy features and abstractions over years of using it, but not every game benefits from using them, so they&#x27;re completely optional. In its essence it&#x27;s mostly just a toolbox with handy things <i>I</i> find useful when writing the sort of games <i>I</i> usually write. Writing a game is essentially just filling up functions that update its state based on input and passing time, and that render an image based on that state. The engine can then maintain a state machine between various &quot;stages&quot; implemented that way. For many simple games, that&#x27;s exactly the abstraction level they need.<p>I&#x27;ve often seen people making big eyes after being told that I use C to write games in under 48h at game jams - and yet I never really felt disadvantaged when compared to other teams that used big and fancy ready-made engines. Sure, there are kinds of games where I&#x27;d use a big engine like Godot too, but... most of those games aren&#x27;t that kind :) Keeping things simple actually helps, especially where what you need is being able to jump straight into implementation instead of having to think about how to fit your ideas into whatever abstractions you ended up with due to your framework of choice.<p>(although one thing where using a ready-made engine helps a lot is collaborations with random programmers on your team - however, I usually either work alone or with a single artist, so I can enjoy programming on my own terms :))</div><br/><div id="36641588" class="c"><input type="checkbox" id="c-36641588" checked=""/><div class="controls bullet"><span class="by">zamfofex</span><span>|</span><a href="#36641141">parent</a><span>|</span><a href="#36639658">next</a><span>|</span><label class="collapse" for="c-36641588">[-]</label><label class="expand" for="c-36641588">[1 more]</label></div><br/><div class="children"><div class="content">That sounds awesome! This is the most advanced game I have ever made, so I donât feel like I have as much experience as you. Iâm glad you seem to have liked what I came up with in some way or another!<p>I feel like designated initialisers can be circumvented by simply assigning the fields individually. Itâs a bit more verbose, but I feel like it works almost as well, the biggest downside being that the compiler wonât warn you if you miss some.<p>Regarding loops and variables, I opted for just declaring all variables at the top of each function definiton (only using an initialiser for âstaticâ variables), which I find almost reminds me of how Python handles variables, except with a chunk of declarations at the start of each function.<p>Of course, this is all subjective, but I find this style looks neat, and I donât think it gets in my way at all, personally.</div><br/></div></div></div></div><div id="36639658" class="c"><input type="checkbox" id="c-36639658" checked=""/><div class="controls bullet"><span class="by">RaoulP</span><span>|</span><a href="#36641141">prev</a><span>|</span><a href="#36638953">next</a><span>|</span><label class="collapse" for="c-36639658">[-]</label><label class="expand" for="c-36639658">[1 more]</label></div><br/><div class="children"><div class="content">Nice job! How does the drawing work?<p>I enjoyed trying to reach the very top of the test level. Spotted your greeting :)</div><br/></div></div><div id="36638953" class="c"><input type="checkbox" id="c-36638953" checked=""/><div class="controls bullet"><span class="by">disqard</span><span>|</span><a href="#36639658">prev</a><span>|</span><a href="#36639379">next</a><span>|</span><label class="collapse" for="c-36638953">[-]</label><label class="expand" for="c-36638953">[2 more]</label></div><br/><div class="children"><div class="content">The character sometimes passes (horizontally and vertically) through walls&#x2F;ceilings, and I can&#x27;t seem to control when this behavior occurs.<p>Is there a special game mechanic in this platformer?</div><br/><div id="36641456" class="c"><input type="checkbox" id="c-36641456" checked=""/><div class="controls bullet"><span class="by">zamfofex</span><span>|</span><a href="#36638953">parent</a><span>|</span><a href="#36639379">next</a><span>|</span><label class="collapse" for="c-36641456">[-]</label><label class="expand" for="c-36641456">[1 more]</label></div><br/><div class="children"><div class="content">If a platform is one tile tall, it will act as a semiâsolid that you can jump up through. If thatâs not what you mean, then any kind of evidence (like a video or a screenshot) or some description about what you were doing that caused it would be very helpful!</div><br/></div></div></div></div><div id="36639379" class="c"><input type="checkbox" id="c-36639379" checked=""/><div class="controls bullet"><span class="by">pengaru</span><span>|</span><a href="#36638953">prev</a><span>|</span><a href="#36638597">next</a><span>|</span><label class="collapse" for="c-36639379">[-]</label><label class="expand" for="c-36639379">[1 more]</label></div><br/><div class="children"><div class="content">There is something very wrong with the controls for jumping, as others have pointed out.</div><br/></div></div></div></div></div></div></div></body></html>