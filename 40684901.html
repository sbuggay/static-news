<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1718442057583" as="style"/><link rel="stylesheet" href="styles.css?v=1718442057583"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="http://thenumb.at/Exponential-Rotations/">Exponentially Better Rotations</a> <span class="domain">(<a href="http://thenumb.at">thenumb.at</a>)</span></div><div class="subtext"><span>fanf2</span> | <span>36 comments</span></div><br/><div><div id="40687146" class="c"><input type="checkbox" id="c-40687146" checked=""/><div class="controls bullet"><span class="by">6gvONxR4sf7o</span><span>|</span><a href="#40685827">next</a><span>|</span><label class="collapse" for="c-40687146">[-]</label><label class="expand" for="c-40687146">[1 more]</label></div><br/><div class="children"><div class="content">The lie group&#x2F;lie algebra correspondence is one of the coolest things i wish i’d been taught in school. It’s the exponential and log map in the article, but in a super reusable setting.<p>You take some totally abstract thing you want to work with[0], say 3D rotations, but totally avoiding any details of specific coordinates that might get you into trouble. That’s the lie group.<p>Then you can derive representations of it in coordinates that behave nicely. This is called the corresponding lie algebra. Then for free you get a way to go back and forth between the coordinates and the abstract thing[1], and ways to compose them and stuff. Turns out that this is the exponential map and the log map talked about in the article. What’s even cooler is that you can then compose them on either side, the abstract side or the coordinate side in a way that plays nicely. You get interpolation and averaging and all that in a fairly sensible way too in most cases you’ll deal with as an engineer. And best of all, when you can phrase your problem as a combination of lie groups, you can just google for what their algebras are and get lots of work for free that would be tons of time to do yourself.<p>[0] the thing has to be something with a notion of smooth change, plus a bit more structure it probably has.<p>[1] going back and forth has some ‘connected components’ issues sometimes, but that’s just another reason it’s great to piggyback on known results.</div><br/></div></div><div id="40685827" class="c"><input type="checkbox" id="c-40685827" checked=""/><div class="controls bullet"><span class="by">tmiku</span><span>|</span><a href="#40687146">prev</a><span>|</span><a href="#40686362">next</a><span>|</span><label class="collapse" for="c-40685827">[-]</label><label class="expand" for="c-40685827">[5 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve had a long work week and it&#x27;s almost over and using the sliders to rotate this cow is exactly what I needed. I feel serene. Thank you.</div><br/><div id="40687030" class="c"><input type="checkbox" id="c-40687030" checked=""/><div class="controls bullet"><span class="by">beardbandit</span><span>|</span><a href="#40685827">parent</a><span>|</span><a href="#40686992">next</a><span>|</span><label class="collapse" for="c-40687030">[-]</label><label class="expand" for="c-40687030">[1 more]</label></div><br/><div class="children"><div class="content">I can&#x27;t describe how fast my eyes glazed over seeing all those numbers. The cow was very cute.</div><br/></div></div><div id="40686992" class="c"><input type="checkbox" id="c-40686992" checked=""/><div class="controls bullet"><span class="by">totetsu</span><span>|</span><a href="#40685827">parent</a><span>|</span><a href="#40687030">prev</a><span>|</span><a href="#40686363">next</a><span>|</span><label class="collapse" for="c-40686992">[-]</label><label class="expand" for="c-40686992">[1 more]</label></div><br/><div class="children"><div class="content">I feel a low effort ios cashcow game is begging to be made</div><br/></div></div><div id="40686363" class="c"><input type="checkbox" id="c-40686363" checked=""/><div class="controls bullet"><span class="by">normcoreashore</span><span>|</span><a href="#40685827">parent</a><span>|</span><a href="#40686992">prev</a><span>|</span><a href="#40686362">next</a><span>|</span><label class="collapse" for="c-40686363">[-]</label><label class="expand" for="c-40686363">[2 more]</label></div><br/><div class="children"><div class="content">Lol yeah same. Glossed right over that wall of numbers</div><br/><div id="40686565" class="c"><input type="checkbox" id="c-40686565" checked=""/><div class="controls bullet"><span class="by">romwell</span><span>|</span><a href="#40685827">root</a><span>|</span><a href="#40686363">parent</a><span>|</span><a href="#40686362">next</a><span>|</span><label class="collapse" for="c-40686565">[-]</label><label class="expand" for="c-40686565">[1 more]</label></div><br/><div class="children"><div class="content">Then you may like playing with this too (if you&#x27;re on the desktop):<p>Press 1-6 on the keyboard for cubes to go all spinny<p><a href="https:&#x2F;&#x2F;romankogan.net&#x2F;math&#x2F;arcball_js&#x2F;index.html" rel="nofollow">https:&#x2F;&#x2F;romankogan.net&#x2F;math&#x2F;arcball_js&#x2F;index.html</a></div><br/></div></div></div></div></div></div><div id="40686362" class="c"><input type="checkbox" id="c-40686362" checked=""/><div class="controls bullet"><span class="by">nine_k</span><span>|</span><a href="#40685827">prev</a><span>|</span><a href="#40687945">next</a><span>|</span><label class="collapse" for="c-40686362">[-]</label><label class="expand" for="c-40686362">[2 more]</label></div><br/><div class="children"><div class="content">This is great. (Not only the cow part.).<p>What I additionally appreciated is the fact that the methods end up computing a standard rotation matrix. If you need to rotate a million vectors, all you need to do is to apply these interesting calculations once, and then run your highly optimized matrix multiplication pipeline.</div><br/></div></div><div id="40687945" class="c"><input type="checkbox" id="c-40687945" checked=""/><div class="controls bullet"><span class="by">deutschepost</span><span>|</span><a href="#40686362">prev</a><span>|</span><a href="#40686314">next</a><span>|</span><label class="collapse" for="c-40687945">[-]</label><label class="expand" for="c-40687945">[1 more]</label></div><br/><div class="children"><div class="content">One of the coolest things I learned in university was that you can just put rotation matrices inside the state of a Kalman filter if you just override the + operator to take a matrix and a change in vector space and the — operator to take two matrices. This allows you to estimate rotations without the fear of gimbal lock.<p><a href="https:&#x2F;&#x2F;openslam-org.github.io&#x2F;MTK" rel="nofollow">https:&#x2F;&#x2F;openslam-org.github.io&#x2F;MTK</a></div><br/></div></div><div id="40686314" class="c"><input type="checkbox" id="c-40686314" checked=""/><div class="controls bullet"><span class="by">GreedCtrl</span><span>|</span><a href="#40687945">prev</a><span>|</span><a href="#40688346">next</a><span>|</span><label class="collapse" for="c-40686314">[-]</label><label class="expand" for="c-40686314">[12 more]</label></div><br/><div class="children"><div class="content">This is awesome. I was looking for a solution for averaging multiple rotations, and I found <a href="https:&#x2F;&#x2F;mathweb.ucsd.edu&#x2F;~sbuss&#x2F;ResearchWeb&#x2F;spheremean&#x2F;paper.pdf" rel="nofollow">https:&#x2F;&#x2F;mathweb.ucsd.edu&#x2F;~sbuss&#x2F;ResearchWeb&#x2F;spheremean&#x2F;paper...</a><p>This method looks a lot easier than that paper, at least at my level of math.</div><br/><div id="40686557" class="c"><input type="checkbox" id="c-40686557" checked=""/><div class="controls bullet"><span class="by">romwell</span><span>|</span><a href="#40686314">parent</a><span>|</span><a href="#40688346">next</a><span>|</span><label class="collapse" for="c-40686557">[-]</label><label class="expand" for="c-40686557">[11 more]</label></div><br/><div class="children"><div class="content">What&#x27;s your context for <i>averaging</i> multiple rotations?<p>Averages are something that you can do with sums, where order of composition doesn&#x27;t matter.<p>Rotations don&#x27;t commute, so the concept of <i>average</i> as we understand it doesn&#x27;t normally apply to them.<p>If you&#x27;re holding a phone: rotate the screen <i>away</i> from you 180° (so you&#x27;d be seeing the back), then clockwise 90° relative to the ground (around vertical axis).<p>Your camera will be facing your left.<p>Now hold the phone normally, and do the same rotations in the opposite order. Your camera will now be facing your right.<p><i>Question</i>: where should the camera be facing in the &quot;average&quot; of these two rotations?<p>There&#x27;s no single answer — it depends on what you need from the average.</div><br/><div id="40686914" class="c"><input type="checkbox" id="c-40686914" checked=""/><div class="controls bullet"><span class="by">jonlong</span><span>|</span><a href="#40686314">root</a><span>|</span><a href="#40686557">parent</a><span>|</span><a href="#40688057">next</a><span>|</span><label class="collapse" for="c-40686914">[-]</label><label class="expand" for="c-40686914">[3 more]</label></div><br/><div class="children"><div class="content">The most widely-used concept of &quot;average&quot; is surely a point that minimizes the sum of squared distances to each of a list of input points. Distances are canonically defined in the space of rotations, and so are averages in this sense (not always uniquely).<p>Commutativity has nothing to do with this; do not confuse the typical formula for averaging with the reason for doing so! Of course, there are other senses of &quot;average&quot; (which generally do continue to apply to the space of rotations as well).<p>The application for this given by GreedCtrl&#x27;s reference is to spline interpolation. Another is in robotics, when combining multiple noisy observations of the orientation of an object.</div><br/><div id="40687354" class="c"><input type="checkbox" id="c-40687354" checked=""/><div class="controls bullet"><span class="by">romwell</span><span>|</span><a href="#40686314">root</a><span>|</span><a href="#40686914">parent</a><span>|</span><a href="#40688057">next</a><span>|</span><label class="collapse" for="c-40687354">[-]</label><label class="expand" for="c-40687354">[2 more]</label></div><br/><div class="children"><div class="content"><i>&gt;Distances are canonically defined in the space of rotations</i><p>I am sorry, but this is simply not true.<p>There are many distance&#x2F;metric definitions that are applicable to the space of rotations, and the best <i>choice</i> of metric is defined by the application, which is why I asked that question.<p>None of them is any more &quot;canonical&quot; than the other. See [1][2][3] for an introduction and comparison.<p>[1] <a href="https:&#x2F;&#x2F;www.cs.cmu.edu&#x2F;~cga&#x2F;dynopt&#x2F;readings&#x2F;Rmetric.pdf" rel="nofollow">https:&#x2F;&#x2F;www.cs.cmu.edu&#x2F;~cga&#x2F;dynopt&#x2F;readings&#x2F;Rmetric.pdf</a><p>[2] <a href="https:&#x2F;&#x2F;rotations.berkeley.edu&#x2F;geodesics-of-the-rotation-group-so3&#x2F;" rel="nofollow">https:&#x2F;&#x2F;rotations.berkeley.edu&#x2F;geodesics-of-the-rotation-gro...</a><p>[3] <a href="https:&#x2F;&#x2F;lucaballan.altervista.org&#x2F;pdfs&#x2F;IK.pdf" rel="nofollow">https:&#x2F;&#x2F;lucaballan.altervista.org&#x2F;pdfs&#x2F;IK.pdf</a><p>One will find there at least four &quot;canonical&quot; distance definitions, and applications ranging from optometry to computer graphics to IK (which is what you referred to).<p><i>&gt;The most widely-used concept of &quot;average&quot; is surely a point that minimizes the sum of squared distances...Of course, there are other senses of &quot;average&quot; (which generally do continue to apply to the space of rotations as well).</i><p>I know this, not all of the readers may.<p>What I don&#x27;t know is what context the parent is coming from.<p>Maybe all they need is interpolating between two camera positions - which is a much simpler problem than the paper they found (and what we&#x27;re discussing) is addressing.<p><i>&gt;The application for this given by GreedCtrl&#x27;s reference is to spline interpolation. </i><p>It is not clear that the reference that they have found is actually the best for their application - they only said it was <i>something they found</i>, and that the article we&#x27;re discussing looks &quot;simpler&quot; for their level of mathematics.<p>The article we are discussing does <i>not</i> provide any means of &quot;averaging&quot; any more than two rotations, though, which motivated my question.</div><br/><div id="40688077" class="c"><input type="checkbox" id="c-40688077" checked=""/><div class="controls bullet"><span class="by">chombier</span><span>|</span><a href="#40686314">root</a><span>|</span><a href="#40687354">parent</a><span>|</span><a href="#40688057">next</a><span>|</span><label class="collapse" for="c-40688077">[-]</label><label class="expand" for="c-40688077">[1 more]</label></div><br/><div class="children"><div class="content">&gt; &gt;Distances are canonically defined in the space of rotations<p>&gt; I am sorry, but this is simply not true.<p>It is true, there <i>is</i> a canonical choice given by the bi-invariant Riemannian metric on compact Lie groups, such as rotations (in this case the shortest angle between rotations)<p>Whether or not you want this metric in practice is another problem, of course.<p>&gt; The article we are discussing does not provide any means of &quot;averaging&quot; any more than two rotations,<p>The Karcher&#x2F;Fréchet mean described in the original article does average more than two rotations</div><br/></div></div></div></div></div></div><div id="40688057" class="c"><input type="checkbox" id="c-40688057" checked=""/><div class="controls bullet"><span class="by">chombier</span><span>|</span><a href="#40686314">root</a><span>|</span><a href="#40686557">parent</a><span>|</span><a href="#40686914">prev</a><span>|</span><a href="#40687972">next</a><span>|</span><label class="collapse" for="c-40688057">[-]</label><label class="expand" for="c-40688057">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Rotations don&#x27;t commute, so the concept of average as we understand it doesn&#x27;t normally apply to them.<p>It does apply, considering that the Euclidean mean minimizes the sum of squared lengths to samples there&#x27;s a fairly obvious generalization to Riemannian manifolds using geodesic distance.<p>There are some reasonable assumptions to be made on the manifold and&#x2F;or sample distribution to ensure convergence but in practice it works pretty well.</div><br/></div></div><div id="40687972" class="c"><input type="checkbox" id="c-40687972" checked=""/><div class="controls bullet"><span class="by">GreedCtrl</span><span>|</span><a href="#40686314">root</a><span>|</span><a href="#40686557">parent</a><span>|</span><a href="#40688057">prev</a><span>|</span><a href="#40688122">next</a><span>|</span><label class="collapse" for="c-40687972">[-]</label><label class="expand" for="c-40687972">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m making a video game, and I want to map a joystick position to a rotation (of a sword). I have a set of keyframes for certain joystick positions, and I want to interpolate between the three nearest ones to create a continuous function from joystick position to sword rotation.</div><br/></div></div><div id="40688122" class="c"><input type="checkbox" id="c-40688122" checked=""/><div class="controls bullet"><span class="by">lihaoyi</span><span>|</span><a href="#40686314">root</a><span>|</span><a href="#40686557">parent</a><span>|</span><a href="#40687972">prev</a><span>|</span><a href="#40686756">next</a><span>|</span><label class="collapse" for="c-40688122">[-]</label><label class="expand" for="c-40688122">[1 more]</label></div><br/><div class="children"><div class="content">The technique you are looking for is SLERP</div><br/></div></div><div id="40686756" class="c"><input type="checkbox" id="c-40686756" checked=""/><div class="controls bullet"><span class="by">stirfish</span><span>|</span><a href="#40686314">root</a><span>|</span><a href="#40686557">parent</a><span>|</span><a href="#40688122">prev</a><span>|</span><a href="#40688346">next</a><span>|</span><label class="collapse" for="c-40686756">[-]</label><label class="expand" for="c-40686756">[4 more]</label></div><br/><div class="children"><div class="content">Maybe it&#x27;s Friday and my brain is cooked, but my camera keeps facing left in both cases.</div><br/><div id="40687207" class="c"><input type="checkbox" id="c-40687207" checked=""/><div class="controls bullet"><span class="by">crote</span><span>|</span><a href="#40686314">root</a><span>|</span><a href="#40686756">parent</a><span>|</span><a href="#40686979">next</a><span>|</span><label class="collapse" for="c-40687207">[-]</label><label class="expand" for="c-40687207">[1 more]</label></div><br/><div class="children"><div class="content">Draw a line on the screen from top to bottom. You interpreted &quot;rotate away&quot; as turning it around this axis, which is the <i>same</i> axis you used for the 90-degree clockwise turn. You end up with the screen right-side-up, just facing away from you. It&#x27;s the same thing I intuitively did.<p>Now draw a line on the screen from left to right. &quot;Rotate away&quot; by turning the phone around this new axis - so the top of the phone moves away from you, and the bottom of the phone moves closer to you. You end up with the screen upside-down, and also facing away from you.</div><br/></div></div><div id="40686979" class="c"><input type="checkbox" id="c-40686979" checked=""/><div class="controls bullet"><span class="by">jonlong</span><span>|</span><a href="#40686314">root</a><span>|</span><a href="#40686756">parent</a><span>|</span><a href="#40687207">prev</a><span>|</span><a href="#40687622">next</a><span>|</span><label class="collapse" for="c-40686979">[-]</label><label class="expand" for="c-40686979">[1 more]</label></div><br/><div class="children"><div class="content">If you start with the phone <i>upright</i> and rotate the screen away from you by turning the phone around the vertical axis, then both rotations are around the same axis and of course they do commute.<p>My <i>guess</i> is that romwell is holding the phone <i>flat</i>, so that the rotation away from you is about a horizontal axis; then you should experience the noncommutativity.<p>(The resulting orientations are 180 degrees apart, which indeed makes it difficult to say that any one orientation should be the unique average. But this is due to the geodesic structure of the space of rotations, not the noncommutative product that happened to construct these points, see above.)</div><br/></div></div><div id="40687622" class="c"><input type="checkbox" id="c-40687622" checked=""/><div class="controls bullet"><span class="by">TeMPOraL</span><span>|</span><a href="#40686314">root</a><span>|</span><a href="#40686756">parent</a><span>|</span><a href="#40686979">prev</a><span>|</span><a href="#40688346">next</a><span>|</span><label class="collapse" for="c-40687622">[-]</label><label class="expand" for="c-40687622">[1 more]</label></div><br/><div class="children"><div class="content">Can confirm. Followed instructions, got the camera facing the same in both cases (left, with phone upside down). I interpreted the 180 part as flipping the phone around the horizontal axis.</div><br/></div></div></div></div></div></div></div></div><div id="40688346" class="c"><input type="checkbox" id="c-40688346" checked=""/><div class="controls bullet"><span class="by">vendiddy</span><span>|</span><a href="#40686314">prev</a><span>|</span><a href="#40686492">next</a><span>|</span><label class="collapse" for="c-40688346">[-]</label><label class="expand" for="c-40688346">[1 more]</label></div><br/><div class="children"><div class="content">It took me a long time to realize that, in the field of math, people come up with abstractions in the same way you might think of an abstraction in software engineering.<p>I was confused as a kid. Why create imaginary numbers? What is the point of matrixes?<p>It wasn&#x27;t until later I realized that these representations were designed. If you make up this thing called an imaginary number, these calculations become easier. If you write linear equations like a matrix, it&#x27;s a lot easier to reason about than writing out the full thing.<p>It sounds obvious but nobody ever told me this!<p>Just me?</div><br/></div></div><div id="40686492" class="c"><input type="checkbox" id="c-40686492" checked=""/><div class="controls bullet"><span class="by">romwell</span><span>|</span><a href="#40688346">prev</a><span>|</span><a href="#40687620">next</a><span>|</span><label class="collapse" for="c-40686492">[-]</label><label class="expand" for="c-40686492">[10 more]</label></div><br/><div class="children"><div class="content">This talks about one of my pet peeves with a lot of 3D software: they don&#x27;t use Arcball[1] interface for rotation.<p>Autodesk products do (3DSmax, Maya), but Blender and OpenSCAD don&#x27;t. And when I worked at Roblox, I couldn&#x27;t convince the PM to let me implement it, because the users got by with whatever was there — and if they wanted more, they could use <i>something else</i> (...which they did, and Roblox stock reflected that in 2022).<p>Arcball is based on quaternions[2] (using exp for interpolation).<p>It&#x27;s the <i>only</i> interface with these properties:<p>1. <i>Any</i> rotation can be accomplished with a <i>single drag</i><p>2. No gimbal locks<p>3. Tracing a closed loop with a sequence of drags results in coming back to where you started<p>Once you formalize this, you can prove it mathematically (ultimately, this comes from unit quaternions giving a 2-cover of SO(3) in the same way unit complex numbers giving exactly the rotations of a circle).<p>For anyone interested, here is my reference implementation of Quaternions &#x2F; Arcball that you can play with on the page:<p><a href="https:&#x2F;&#x2F;romankogan.net&#x2F;math&#x2F;arcball_js&#x2F;index.html" rel="nofollow">https:&#x2F;&#x2F;romankogan.net&#x2F;math&#x2F;arcball_js&#x2F;index.html</a><p>The code is very-commented Java (Processing library, running in JavaScript by the magic of ProcessingJS).<p>It&#x27;s one way you can <i>feel</i> the fancy math.<p>Your hands and body will understand quaternions before your brain does.<p>If you ever work on 3D software, <i>please</i> use this, and thanks in advance &lt;3<p>[1] Arcball: <a href="http:&#x2F;&#x2F;courses.cms.caltech.edu&#x2F;cs171&#x2F;assignments&#x2F;hw3&#x2F;hw3-notes&#x2F;notes-hw3.html" rel="nofollow">http:&#x2F;&#x2F;courses.cms.caltech.edu&#x2F;cs171&#x2F;assignments&#x2F;hw3&#x2F;hw3-not...</a><p>[2] Quaternions for rotations: <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Quaternions_and_spatial_rotation" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Quaternions_and_spatial_rotati...</a><p>[3] Arcball in Processing: <a href="https:&#x2F;&#x2F;romankogan.net&#x2F;math&#x2F;arcball_js&#x2F;index.html" rel="nofollow">https:&#x2F;&#x2F;romankogan.net&#x2F;math&#x2F;arcball_js&#x2F;index.html</a></div><br/><div id="40686561" class="c"><input type="checkbox" id="c-40686561" checked=""/><div class="controls bullet"><span class="by">Nathanba</span><span>|</span><a href="#40686492">parent</a><span>|</span><a href="#40686830">next</a><span>|</span><label class="collapse" for="c-40686561">[-]</label><label class="expand" for="c-40686561">[6 more]</label></div><br/><div class="children"><div class="content">why does it feel so much worse when you don&#x27;t drag from the middle and instead from the e.g right side? It feels stuck and sometimes it snaps. If the point from which rotations are calculated changes then I think it should somehow be visually obvious what this means for the rotation and be shown on the screen</div><br/><div id="40687316" class="c"><input type="checkbox" id="c-40687316" checked=""/><div class="controls bullet"><span class="by">edflsafoiewq</span><span>|</span><a href="#40686492">root</a><span>|</span><a href="#40686561">parent</a><span>|</span><a href="#40687259">next</a><span>|</span><label class="collapse" for="c-40687316">[-]</label><label class="expand" for="c-40687316">[1 more]</label></div><br/><div class="children"><div class="content">You probably clicked outside the ball. You can&#x27;t see it, but the radius is 1&#x2F;4 of the canvas width.</div><br/></div></div><div id="40687259" class="c"><input type="checkbox" id="c-40687259" checked=""/><div class="controls bullet"><span class="by">crote</span><span>|</span><a href="#40686492">root</a><span>|</span><a href="#40686561">parent</a><span>|</span><a href="#40687316">prev</a><span>|</span><a href="#40686600">next</a><span>|</span><label class="collapse" for="c-40687259">[-]</label><label class="expand" for="c-40687259">[2 more]</label></div><br/><div class="children"><div class="content">Oooh, yeah. This really bothered me too! Its behaviour is really intuitive when you strat with a drag from the middle, but even starting on the edge of the pink cube really makes it freak out.<p>This essentially forces you to start from the middle, but then you don&#x27;t seem to be able to do any rotation around the axis pointing out of the screen. To do that rotation your best bet is to click and drag around an inscribed circle - but that in turn means you can&#x27;t rotate around any <i>other</i> axis in the same movement without running into freak-out behaviour. And anything between those two extremes doesn&#x27;t really behave intuitively.</div><br/><div id="40688020" class="c"><input type="checkbox" id="c-40688020" checked=""/><div class="controls bullet"><span class="by">romwell</span><span>|</span><a href="#40686492">root</a><span>|</span><a href="#40687259">parent</a><span>|</span><a href="#40686600">next</a><span>|</span><label class="collapse" for="c-40688020">[-]</label><label class="expand" for="c-40688020">[1 more]</label></div><br/><div class="children"><div class="content">Well, FWIW I increased the radius of the gizmo to 1&#x2F;3 from 1&#x2F;4, and made it visible.<p>I&#x27;m still not handling drags outside the canvas area - those will cause jumps, but everything else should feel better.</div><br/></div></div></div></div><div id="40686600" class="c"><input type="checkbox" id="c-40686600" checked=""/><div class="controls bullet"><span class="by">romwell</span><span>|</span><a href="#40686492">root</a><span>|</span><a href="#40686561">parent</a><span>|</span><a href="#40687259">prev</a><span>|</span><a href="#40686830">next</a><span>|</span><label class="collapse" for="c-40686600">[-]</label><label class="expand" for="c-40686600">[2 more]</label></div><br/><div class="children"><div class="content">Thanks for the feedback!<p>Imagine you&#x27;re spinning a globe with your finger. Obviously not much would happen if you poked <i>outside</i> the globe.<p>And while your finger is <i>on</i> the globe, you can&#x27;t point at the sky (unless you finger is, well, stuck to the globe while you&#x27;re rotating it - pointing to the sky would let go of the globe).<p>This is what you&#x27;re doing here, and absolutely, I should add a visual representation for the globe and where you&#x27;re poking it when you hold the mouse button down.<p>You feel &quot;stuck&quot; when the cursor attempts to leave the globe. And moving the cursor around that boundary is how you rotate around the axis facing poking from the screen.<p>This behavior can be changed&#x2F;customized to an extent, I picked what felt good to me here.</div><br/><div id="40687683" class="c"><input type="checkbox" id="c-40687683" checked=""/><div class="controls bullet"><span class="by">nox101</span><span>|</span><a href="#40686492">root</a><span>|</span><a href="#40686600">parent</a><span>|</span><a href="#40686830">next</a><span>|</span><label class="collapse" for="c-40687683">[-]</label><label class="expand" for="c-40687683">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Imagine you&#x27;re spinning a globe with your finger. Obviously not much would happen if you poked outside the globe.<p>And this is why arcball is not a good solution. I&#x27;m not putting my finger on a global. I&#x27;m spinning a world, terrain, airplane, etc. There&#x27;s no &quot;ball&quot; so arc&quot;ball&quot; doesn&#x27;t fit.<p>It gets worse. What if there is a ball but it&#x27;s say 4 cm across on my screen. When I rotate with &quot;arcball&quot; am I touch that ball or some imaginary ball much larger than the visible ball. This problem exists all over depending on the thing I&#x27;m trying to rotate, arcball won&#x27;t match.</div><br/></div></div></div></div></div></div><div id="40686830" class="c"><input type="checkbox" id="c-40686830" checked=""/><div class="controls bullet"><span class="by">Eduard</span><span>|</span><a href="#40686492">parent</a><span>|</span><a href="#40686561">prev</a><span>|</span><a href="#40686569">next</a><span>|</span><label class="collapse" for="c-40686830">[-]</label><label class="expand" for="c-40686830">[2 more]</label></div><br/><div class="children"><div class="content">any chance to make this work on mobile?<p>I&#x27;m on mobile right now; <a href="https:&#x2F;&#x2F;asliceofrendering.com&#x2F;camera&#x2F;2019&#x2F;11&#x2F;30&#x2F;ArcballCamera&#x2F;" rel="nofollow">https:&#x2F;&#x2F;asliceofrendering.com&#x2F;camera&#x2F;2019&#x2F;11&#x2F;30&#x2F;ArcballCamer...</a> helped me understand what arkball is about</div><br/><div id="40688023" class="c"><input type="checkbox" id="c-40688023" checked=""/><div class="controls bullet"><span class="by">romwell</span><span>|</span><a href="#40686492">root</a><span>|</span><a href="#40686830">parent</a><span>|</span><a href="#40686569">next</a><span>|</span><label class="collapse" for="c-40688023">[-]</label><label class="expand" for="c-40688023">[1 more]</label></div><br/><div class="children"><div class="content">&gt;any chance to make this work on mobile?<p>I wrote it a while ago with ProcessingJS, whose support for touch events was lacking.<p>Will try to fix it and&#x2F;or rewrite in P5JS, stay tuned :)</div><br/></div></div></div></div><div id="40686569" class="c"><input type="checkbox" id="c-40686569" checked=""/><div class="controls bullet"><span class="by">kragen</span><span>|</span><a href="#40686492">parent</a><span>|</span><a href="#40686830">prev</a><span>|</span><a href="#40687620">next</a><span>|</span><label class="collapse" for="c-40686569">[-]</label><label class="expand" for="c-40686569">[1 more]</label></div><br/><div class="children"><div class="content">thank you for the arcball information! i didn&#x27;t know about this</div><br/></div></div></div></div><div id="40687620" class="c"><input type="checkbox" id="c-40687620" checked=""/><div class="controls bullet"><span class="by">wyager</span><span>|</span><a href="#40686492">prev</a><span>|</span><label class="collapse" for="c-40687620">[-]</label><label class="expand" for="c-40687620">[3 more]</label></div><br/><div class="children"><div class="content">&gt; unit quaternions also don’t form a vector space<p>Unit quaternions are the lie group. If you want something you can add willy-nilly, you want the lie algebra of all quaternions, which represent rotational velocities, just as axis-angle represents rotational velocities.<p>Comparing unit quaternions to axis-angle is a bit of a category error - it would be more appropriate to compare unit quaternions to rotation matrices, and all quaternions to axis-angle.<p>&gt; One advantage of using quaternions is how easy the exponential map is to compute—if you don’t need a rotation matrix, it’s a good option.<p>You rarely need a rotation matrix at all when using quaternions. As mentioned in the article, you can compute rotations using `pqp^-1`.<p>I think the easiest way to understand quaternions is just to read about geometric algebra. It took hundreds of years to invent quaternions, but once you understand geometric algebra (which is shockingly simple), you can invent quaternions in just a few minutes. I found this article to be a good intro several years ago: <a href="https:&#x2F;&#x2F;crypto.stanford.edu&#x2F;~blynn&#x2F;haskell&#x2F;ga.html" rel="nofollow">https:&#x2F;&#x2F;crypto.stanford.edu&#x2F;~blynn&#x2F;haskell&#x2F;ga.html</a></div><br/><div id="40688131" class="c"><input type="checkbox" id="c-40688131" checked=""/><div class="controls bullet"><span class="by">cyber_kinetist</span><span>|</span><a href="#40687620">parent</a><span>|</span><a href="#40688038">next</a><span>|</span><label class="collapse" for="c-40688131">[-]</label><label class="expand" for="c-40688131">[1 more]</label></div><br/><div class="children"><div class="content">I think the exponential map is still the most robust way to think about rotations, since it gives you tools to deal with the Lie group of SO(3) in the most straightforward way (switching between coordinates, dealing with differentiation and tangent spaces, etc.)<p>Even when going through all the formulations with geometric algebra, you still land on using rotors (isomorphic to quaternions) and motors (isomorphic to dual quaternions) to represent SO(3) &#x2F; SE(3) spaces - but I think for that purpose 3x3 rotation matrices &#x2F; 4x4 transformation matrices with exponential maps are still much more useful. (Quaternions do have an advantage that it stores up less space and also faster to multiply with each other - but when you want to transform points with it then matrices are still faster. In overall in terms of efficiency it really depends on the situation.)</div><br/></div></div><div id="40688038" class="c"><input type="checkbox" id="c-40688038" checked=""/><div class="controls bullet"><span class="by">blt</span><span>|</span><a href="#40687620">parent</a><span>|</span><a href="#40688131">prev</a><span>|</span><label class="collapse" for="c-40688038">[-]</label><label class="expand" for="c-40688038">[1 more]</label></div><br/><div class="children"><div class="content">When you say &quot;all quaternions&quot; did you mean &quot;pure imaginary quaternions&quot;?</div><br/></div></div></div></div></div></div></div></div></div></body></html>