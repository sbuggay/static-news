<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1714726863964" as="style"/><link rel="stylesheet" href="styles.css?v=1714726863964"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.jakelow.com/blog/hobby-curves">Hobby&#x27;s algorithm for aesthetic Bézier splines</a> <span class="domain">(<a href="https://www.jakelow.com">www.jakelow.com</a>)</span></div><div class="subtext"><span>abetusk</span> | <span>17 comments</span></div><br/><div><div id="40242377" class="c"><input type="checkbox" id="c-40242377" checked=""/><div class="controls bullet"><span class="by">Etherlord87</span><span>|</span><a href="#40243830">next</a><span>|</span><label class="collapse" for="c-40242377">[-]</label><label class="expand" for="c-40242377">[7 more]</label></div><br/><div class="children"><div class="content">In many tiled video games, roads, tracks and other paths tend to be designed without the knowledge on 2nd derivative continuity (or ignoring it for aesthetic reasons). So it would consist of straight segments, and rounded segments (and maybe some intersections). The rounded segments will be simply quarters of a circle. The problem with this is that while the path is continuous (no teleportation), and the velocity is continuous (no sudden direction change), the acceleration isn&#x27;t continuous - there&#x27;s no acceleration on the straight segments, and then suddenly there is acceleration on the rounded segment, and that acceleration, for an arc, is constant. In real life there&#x27;s an easing added to the paths of e.g. railways, so that the sudden acceleration doesn&#x27;t surprise passengers. In tiles you could also design the turns to be C² continuous, but it  might be aesthetically displeasing by looking like being handdrawn rather than mathematically constructed.<p>I&#x27;m saying all this, because it seems Hobby&#x27;s algorithm is something designed precisely to construct splines that maximize this aesthetically pleasing C¹ continuity... However it tends to explode splines by favoring arc connections, so I think some optimization is needed to limit that behavior: <a href="https:&#x2F;&#x2F;i.imgur.com&#x2F;W9ssWTu.png" rel="nofollow">https:&#x2F;&#x2F;i.imgur.com&#x2F;W9ssWTu.png</a></div><br/><div id="40243679" class="c"><input type="checkbox" id="c-40243679" checked=""/><div class="controls bullet"><span class="by">alejohausner</span><span>|</span><a href="#40242377">parent</a><span>|</span><a href="#40243892">next</a><span>|</span><label class="collapse" for="c-40243679">[-]</label><label class="expand" for="c-40243679">[3 more]</label></div><br/><div class="children"><div class="content">Apple used straight segments and circular arcs on its icons upto iOS 6, and switched to 2nd-order continuous shapes on version 7.  Here is a side-by-side comparison :<p><a href="https:&#x2F;&#x2F;blog.mikeswanson.com&#x2F;photoshop-script-for-ios-7-rounded-rectangles&#x2F;" rel="nofollow">https:&#x2F;&#x2F;blog.mikeswanson.com&#x2F;photoshop-script-for-ios-7-roun...</a><p>Your visual system can actually see those discontinuities.</div><br/><div id="40245118" class="c"><input type="checkbox" id="c-40245118" checked=""/><div class="controls bullet"><span class="by">Etherlord87</span><span>|</span><a href="#40242377">root</a><span>|</span><a href="#40243679">parent</a><span>|</span><a href="#40243958">next</a><span>|</span><label class="collapse" for="c-40245118">[-]</label><label class="expand" for="c-40245118">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s actually much more prominent in 3D reflections, because this 2nd derivative (&quot;acceleration&quot;) affects the &quot;flow&quot; of the reflection: <a href="https:&#x2F;&#x2F;i.stack.imgur.com&#x2F;pctnj.png" rel="nofollow">https:&#x2F;&#x2F;i.stack.imgur.com&#x2F;pctnj.png</a><p>I wrote a post about this on Blender Stack Exchange: <a href="https:&#x2F;&#x2F;blender.stackexchange.com&#x2F;a&#x2F;306616&#x2F;60486" rel="nofollow">https:&#x2F;&#x2F;blender.stackexchange.com&#x2F;a&#x2F;306616&#x2F;60486</a></div><br/></div></div><div id="40243958" class="c"><input type="checkbox" id="c-40243958" checked=""/><div class="controls bullet"><span class="by">ReleaseCandidat</span><span>|</span><a href="#40242377">root</a><span>|</span><a href="#40243679">parent</a><span>|</span><a href="#40245118">prev</a><span>|</span><a href="#40243892">next</a><span>|</span><label class="collapse" for="c-40243958">[-]</label><label class="expand" for="c-40243958">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Your visual system can actually see those discontinuities.<p>Because it&#x27;s also the biggest difference of curvature (actually the radius of curvature, the inverse of the curvature value, which is what is geometrically significant, &quot;what we see&quot;) possible, the one between infinity (a line is a circle with an infinite radius) and a &quot;normal&quot; (finite) value.</div><br/></div></div></div></div><div id="40243892" class="c"><input type="checkbox" id="c-40243892" checked=""/><div class="controls bullet"><span class="by">ReleaseCandidat</span><span>|</span><a href="#40242377">parent</a><span>|</span><a href="#40243679">prev</a><span>|</span><a href="#40242821">next</a><span>|</span><label class="collapse" for="c-40243892">[-]</label><label class="expand" for="c-40243892">[1 more]</label></div><br/><div class="children"><div class="content">&gt; knowledge on 2nd derivative continuity<p>Which means that the radius of curvature of the &quot;seams&quot; of the spline is the same for both curves in the common point - the spline is &quot;smoother&quot;, there is no jump in the curvature. Like C1 means, that each point (except for start and end) of the spline has a tangent (the samé tangent from the left and the right side), no spikes.
And C3 is about the torsion of (3D, as in &quot;not contained in a plane&quot;) curves.</div><br/></div></div><div id="40242821" class="c"><input type="checkbox" id="c-40242821" checked=""/><div class="controls bullet"><span class="by">mdswanson</span><span>|</span><a href="#40242377">parent</a><span>|</span><a href="#40243892">prev</a><span>|</span><a href="#40243830">next</a><span>|</span><label class="collapse" for="c-40242821">[-]</label><label class="expand" for="c-40242821">[2 more]</label></div><br/><div class="children"><div class="content">Indeed. And this is where arc-length parameterization would help by linearizing t so you can then overlay it with various timing and easing functions.</div><br/><div id="40243905" class="c"><input type="checkbox" id="c-40243905" checked=""/><div class="controls bullet"><span class="by">ReleaseCandidat</span><span>|</span><a href="#40242377">root</a><span>|</span><a href="#40242821">parent</a><span>|</span><a href="#40243830">next</a><span>|</span><label class="collapse" for="c-40243905">[-]</label><label class="expand" for="c-40243905">[1 more]</label></div><br/><div class="children"><div class="content">Exactly, differential geometry is the easiest when using arc lengths as parameters.</div><br/></div></div></div></div></div></div><div id="40243830" class="c"><input type="checkbox" id="c-40243830" checked=""/><div class="controls bullet"><span class="by">raphlinus</span><span>|</span><a href="#40242377">prev</a><span>|</span><a href="#40242459">next</a><span>|</span><label class="collapse" for="c-40243830">[-]</label><label class="expand" for="c-40243830">[5 more]</label></div><br/><div class="children"><div class="content">Most of the applications of Hobby&#x27;s spline would be better served by using Euler spirals instead. These are G2 continuous and have less curvature varation (in fact, Euler spirals are solutions of the Minimum Variation Curvature problem). I think it&#x27;s fair to characterize Hobby&#x27;s spline as an approximation to Euler spiral splines, just less expensive to compute.<p>I think there&#x27;s even more to be done on this topic. In particular, I think the tension should increase as angles go up, which can solve the &quot;flipping&quot; behavior you see with both Hobby and Euler spiral splines. This is true for the Adobe κ-curves paper (which considerably overstates the extent to which it&#x27;s the basis for the &quot;curvature&quot; tool in Adobe Illustrator; the latter has not to my knowledge been adequately documented).</div><br/><div id="40244186" class="c"><input type="checkbox" id="c-40244186" checked=""/><div class="controls bullet"><span class="by">levocardia</span><span>|</span><a href="#40243830">parent</a><span>|</span><a href="#40242459">next</a><span>|</span><label class="collapse" for="c-40244186">[-]</label><label class="expand" for="c-40244186">[4 more]</label></div><br/><div class="children"><div class="content">I was just going to comment to ask if Hobby spines were the minimal solution to any mathematical loss. Natural cubic splines are the solution to minimum L2 penalty on &quot;roughness&quot; (integrated squared second derivative).</div><br/><div id="40244363" class="c"><input type="checkbox" id="c-40244363" checked=""/><div class="controls bullet"><span class="by">raphlinus</span><span>|</span><a href="#40243830">root</a><span>|</span><a href="#40244186">parent</a><span>|</span><a href="#40244482">next</a><span>|</span><label class="collapse" for="c-40244363">[-]</label><label class="expand" for="c-40244363">[2 more]</label></div><br/><div class="children"><div class="content">No. Among other things, they&#x27;d have a higher degree of continuity if they were.<p>I personally find this a fascinating topic, so much so that I did a PhD on it. The most natural loss function to optimize for is minimizing bending energy, and there are solutions to that going back about 300 years. However, in practice that&#x27;s unlikely to be what you want - the problem with it is that its scaling properties give an advantage to curves with a longer arclength even if they have more curvature variation. Intuitively, the smoothest curve through a set of co-circular points should be a circular arc, but that&#x27;s not what you get from the minimum energy curve, at least unless you impose an additional arc length constraint.<p>The long story is of course much more complicated, but the short version is that the Euler spiral fixes these scaling issues and has some other really nice properties. If your problem is &quot;what is the smoothest curve that goes through this sequence of points&quot; then arguably the piecewise Euler spiral G2 continuous spline is the distinguished answer.</div><br/><div id="40244649" class="c"><input type="checkbox" id="c-40244649" checked=""/><div class="controls bullet"><span class="by">ReleaseCandidat</span><span>|</span><a href="#40243830">root</a><span>|</span><a href="#40244363">parent</a><span>|</span><a href="#40244482">next</a><span>|</span><label class="collapse" for="c-40244649">[-]</label><label class="expand" for="c-40244649">[1 more]</label></div><br/><div class="children"><div class="content">&gt; then arguably the piecewise Euler spiral spline [...] is the answer<p>It is the easiest &quot;not wrong&quot; answer, as it doesn&#x27;t for example work with points on a circle either, where the (not only &quot;intuitive&quot;) solution would be a circle.
An Euler spiral is the answer on how to (&quot;easily&quot;) &quot;sufficient smoothly&quot; connect 2 points with a given radius of curvature (and therefore tangent) at both points, and no constraints between those two points.</div><br/></div></div></div></div><div id="40244482" class="c"><input type="checkbox" id="c-40244482" checked=""/><div class="controls bullet"><span class="by">hansvm</span><span>|</span><a href="#40243830">root</a><span>|</span><a href="#40244186">parent</a><span>|</span><a href="#40244363">prev</a><span>|</span><a href="#40242459">next</a><span>|</span><label class="collapse" for="c-40244482">[-]</label><label class="expand" for="c-40244482">[1 more]</label></div><br/><div class="children"><div class="content">Sure. Hobby splines minimize the supremal difference between your favorite curve and a Hobby spline.</div><br/></div></div></div></div></div></div><div id="40242459" class="c"><input type="checkbox" id="c-40242459" checked=""/><div class="controls bullet"><span class="by">xaellison</span><span>|</span><a href="#40243830">prev</a><span>|</span><a href="#40243171">next</a><span>|</span><label class="collapse" for="c-40242459">[-]</label><label class="expand" for="c-40242459">[1 more]</label></div><br/><div class="children"><div class="content">As the article mentions, the curves are unstable. This is delightfully apparent when you drag one control point in a circle around another. Interestingly, it can also make fairly sharp corners if the control points approach each other.</div><br/></div></div><div id="40243171" class="c"><input type="checkbox" id="c-40243171" checked=""/><div class="controls bullet"><span class="by">nrjames</span><span>|</span><a href="#40242459">prev</a><span>|</span><a href="#40242635">next</a><span>|</span><label class="collapse" for="c-40243171">[-]</label><label class="expand" for="c-40243171">[1 more]</label></div><br/><div class="children"><div class="content">I saw this p5.js usage of Hobby’s algorithm yesterday:<p><a href="https:&#x2F;&#x2F;openprocessing.org&#x2F;sketch&#x2F;2257597&#x2F;" rel="nofollow">https:&#x2F;&#x2F;openprocessing.org&#x2F;sketch&#x2F;2257597&#x2F;</a></div><br/></div></div><div id="40242635" class="c"><input type="checkbox" id="c-40242635" checked=""/><div class="controls bullet"><span class="by">jfk13</span><span>|</span><a href="#40243171">prev</a><span>|</span><label class="collapse" for="c-40242635">[-]</label><label class="expand" for="c-40242635">[2 more]</label></div><br/><div class="children"><div class="content">Seems to me that a post about this algorithm really should have included a mention of Metafont.</div><br/><div id="40242679" class="c"><input type="checkbox" id="c-40242679" checked=""/><div class="controls bullet"><span class="by">jimhefferon</span><span>|</span><a href="#40242635">parent</a><span>|</span><label class="collapse" for="c-40242679">[-]</label><label class="expand" for="c-40242679">[1 more]</label></div><br/><div class="children"><div class="content">And also Asymptote, which extends to 3D.</div><br/></div></div></div></div></div></div></div></div></div></body></html>