<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1729155666290" as="style"/><link rel="stylesheet" href="styles.css?v=1729155666290"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://klimer.eu/2024/07/06/migrating-from-create-react-app-to-vite/">Migrating from Create React App to Vite</a> <span class="domain">(<a href="https://klimer.eu">klimer.eu</a>)</span></div><div class="subtext"><span>luu</span> | <span>21 comments</span></div><br/><div><div id="41867698" class="c"><input type="checkbox" id="c-41867698" checked=""/><div class="controls bullet"><span class="by">art0rz</span><span>|</span><a href="#41867471">next</a><span>|</span><label class="collapse" for="c-41867698">[-]</label><label class="expand" for="c-41867698">[1 more]</label></div><br/><div class="children"><div class="content">We maintain a fairly large and complex CRA application, which has been migrated to Vite, but not fully.<p>Since a lot of changes would be needed, we decided to do it piecemeal by first configuring Vite to behave exactly (or as close to as possible) like CRA and later remove these Vite configurations one by one (and make necessary code changes).<p>Currently our production builds are done through CRA while dev runs Vite. It works really well and minimal code changes were needed.<p>I&#x27;ve been wanting to release this config publicly to help others migrate to Vite, but have unfortunately not had time to.</div><br/></div></div><div id="41867471" class="c"><input type="checkbox" id="c-41867471" checked=""/><div class="controls bullet"><span class="by">auggierose</span><span>|</span><a href="#41867698">prev</a><span>|</span><a href="#41867597">next</a><span>|</span><label class="collapse" for="c-41867471">[-]</label><label class="expand" for="c-41867471">[9 more]</label></div><br/><div class="children"><div class="content">Both CRA and Vite seem to be a mess, I don&#x27;t know how people work with that.<p>My recommended stack: node, npm, typescript and esbuild.</div><br/><div id="41867647" class="c"><input type="checkbox" id="c-41867647" checked=""/><div class="controls bullet"><span class="by">JoeyJoJoJr</span><span>|</span><a href="#41867471">parent</a><span>|</span><a href="#41867557">next</a><span>|</span><label class="collapse" for="c-41867647">[-]</label><label class="expand" for="c-41867647">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Both CRA and Vite seem to be a mess<p>CRA, yes. Vite, not in my experience. Vite does what it says it does, gets out of your way, is configurable enough when you need it to be, and has great testing tools. I don’t think I’ve ever had an issue with Vite.</div><br/></div></div><div id="41867557" class="c"><input type="checkbox" id="c-41867557" checked=""/><div class="controls bullet"><span class="by">arbol</span><span>|</span><a href="#41867471">parent</a><span>|</span><a href="#41867647">prev</a><span>|</span><a href="#41867570">next</a><span>|</span><label class="collapse" for="c-41867557">[-]</label><label class="expand" for="c-41867557">[2 more]</label></div><br/><div class="children"><div class="content">Vite uses esbuild under the hood. It can also create bundles with all your deps, which is essential when you don&#x27;t want an npm i step involved during deployment (lambdas&#x2F;containers).</div><br/><div id="41867632" class="c"><input type="checkbox" id="c-41867632" checked=""/><div class="controls bullet"><span class="by">Aldipower</span><span>|</span><a href="#41867471">root</a><span>|</span><a href="#41867557">parent</a><span>|</span><a href="#41867570">next</a><span>|</span><label class="collapse" for="c-41867632">[-]</label><label class="expand" for="c-41867632">[1 more]</label></div><br/><div class="children"><div class="content">To be clear, it is esbuild that bundles not vite.<p>esbuild index.js  --bundle --outfile=build.cjs --format=cjs --platform=node<p>You can use pkg then to make this bundle executable.<p>pkg build.cjs<p>This is not vite. :-)</div><br/></div></div></div></div><div id="41867570" class="c"><input type="checkbox" id="c-41867570" checked=""/><div class="controls bullet"><span class="by">o_m</span><span>|</span><a href="#41867471">parent</a><span>|</span><a href="#41867557">prev</a><span>|</span><a href="#41867479">next</a><span>|</span><label class="collapse" for="c-41867570">[-]</label><label class="expand" for="c-41867570">[1 more]</label></div><br/><div class="children"><div class="content">It can be simplified even more if you just use Deno and don&#x27;t bundle.</div><br/></div></div><div id="41867479" class="c"><input type="checkbox" id="c-41867479" checked=""/><div class="controls bullet"><span class="by">mattmanser</span><span>|</span><a href="#41867471">parent</a><span>|</span><a href="#41867570">prev</a><span>|</span><a href="#41867597">next</a><span>|</span><label class="collapse" for="c-41867479">[-]</label><label class="expand" for="c-41867479">[4 more]</label></div><br/><div class="children"><div class="content">Vite is great, don&#x27;t know why you&#x27;d make your own life hard like that.</div><br/><div id="41867510" class="c"><input type="checkbox" id="c-41867510" checked=""/><div class="controls bullet"><span class="by">auggierose</span><span>|</span><a href="#41867471">root</a><span>|</span><a href="#41867479">parent</a><span>|</span><a href="#41867597">next</a><span>|</span><label class="collapse" for="c-41867510">[-]</label><label class="expand" for="c-41867510">[3 more]</label></div><br/><div class="children"><div class="content">On the contrary, this stack makes my life as comfortable as possible.<p>I do understand esbuild, I don&#x27;t understand whatever it is that Vite does.</div><br/><div id="41867550" class="c"><input type="checkbox" id="c-41867550" checked=""/><div class="controls bullet"><span class="by">lyxell</span><span>|</span><a href="#41867471">root</a><span>|</span><a href="#41867510">parent</a><span>|</span><a href="#41867597">next</a><span>|</span><label class="collapse" for="c-41867550">[-]</label><label class="expand" for="c-41867550">[2 more]</label></div><br/><div class="children"><div class="content">With Vite you do not have to hack together Hot Module Reloading yourself.</div><br/><div id="41867641" class="c"><input type="checkbox" id="c-41867641" checked=""/><div class="controls bullet"><span class="by">Aldipower</span><span>|</span><a href="#41867471">root</a><span>|</span><a href="#41867550">parent</a><span>|</span><a href="#41867597">next</a><span>|</span><label class="collapse" for="c-41867641">[-]</label><label class="expand" for="c-41867641">[1 more]</label></div><br/><div class="children"><div class="content">Thanks, so I won&#x27;t use vite. Hot Module Realoading never worked reliable to me.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="41867597" class="c"><input type="checkbox" id="c-41867597" checked=""/><div class="controls bullet"><span class="by">globalise83</span><span>|</span><a href="#41867471">prev</a><span>|</span><a href="#41867259">next</a><span>|</span><label class="collapse" for="c-41867597">[-]</label><label class="expand" for="c-41867597">[1 more]</label></div><br/><div class="children"><div class="content">Preact with Vite works very fast and Preact seems like a good long-term solution for projects which will use the single-page application approach (React seems to move ever-closer to the server rendering approach).</div><br/></div></div><div id="41867259" class="c"><input type="checkbox" id="c-41867259" checked=""/><div class="controls bullet"><span class="by">danielhep</span><span>|</span><a href="#41867597">prev</a><span>|</span><a href="#41867504">next</a><span>|</span><label class="collapse" for="c-41867259">[-]</label><label class="expand" for="c-41867259">[5 more]</label></div><br/><div class="children"><div class="content">Good read! I have a huge CRA app I maintain at work, and we&#x27;ve been wanting to migrate to something else for years now. will have to check this out.</div><br/><div id="41867351" class="c"><input type="checkbox" id="c-41867351" checked=""/><div class="controls bullet"><span class="by">tuyiown</span><span>|</span><a href="#41867259">parent</a><span>|</span><a href="#41867461">next</a><span>|</span><label class="collapse" for="c-41867351">[-]</label><label class="expand" for="c-41867351">[2 more]</label></div><br/><div class="children"><div class="content">beware for large apps, if you don&#x27;t have heavily splitted your app with dynamic imports, vitejs is frustratingly slow by loading each ESM module separately. Seems that rspac has others interesting tradeoffs.<p>Works great once loaded though.</div><br/><div id="41867583" class="c"><input type="checkbox" id="c-41867583" checked=""/><div class="controls bullet"><span class="by">iliaznk</span><span>|</span><a href="#41867259">root</a><span>|</span><a href="#41867351">parent</a><span>|</span><a href="#41867461">next</a><span>|</span><label class="collapse" for="c-41867583">[-]</label><label class="expand" for="c-41867583">[1 more]</label></div><br/><div class="children"><div class="content">We have encountered that problem too. As far as I learnt from various sources that is caused by circular imports in some cases, and by using index files that re-export your modules in other.</div><br/></div></div></div></div><div id="41867461" class="c"><input type="checkbox" id="c-41867461" checked=""/><div class="controls bullet"><span class="by">dangsux</span><span>|</span><a href="#41867259">parent</a><span>|</span><a href="#41867351">prev</a><span>|</span><a href="#41867504">next</a><span>|</span><label class="collapse" for="c-41867461">[-]</label><label class="expand" for="c-41867461">[2 more]</label></div><br/><div class="children"><div class="content">Why have you wanted to migrate away? What are it’s shortcomings?</div><br/><div id="41867693" class="c"><input type="checkbox" id="c-41867693" checked=""/><div class="controls bullet"><span class="by">Vinnl</span><span>|</span><a href="#41867259">root</a><span>|</span><a href="#41867461">parent</a><span>|</span><a href="#41867504">next</a><span>|</span><label class="collapse" for="c-41867693">[-]</label><label class="expand" for="c-41867693">[1 more]</label></div><br/><div class="children"><div class="content">It hasn&#x27;t been maintained for ages, so at some point you&#x27;ll want to use some new dependency and find out that you can&#x27;t. And it&#x27;s very slow, too, if I recall correctly.</div><br/></div></div></div></div></div></div><div id="41867504" class="c"><input type="checkbox" id="c-41867504" checked=""/><div class="controls bullet"><span class="by">mkhalil</span><span>|</span><a href="#41867259">prev</a><span>|</span><a href="#41867553">next</a><span>|</span><label class="collapse" for="c-41867504">[-]</label><label class="expand" for="c-41867504">[2 more]</label></div><br/><div class="children"><div class="content">CRA is meant as a starter application. IMO for anything serious, an app should either &quot;eject&quot; or use a framework.</div><br/><div id="41867555" class="c"><input type="checkbox" id="c-41867555" checked=""/><div class="controls bullet"><span class="by">nayroclade</span><span>|</span><a href="#41867504">parent</a><span>|</span><a href="#41867553">next</a><span>|</span><label class="collapse" for="c-41867555">[-]</label><label class="expand" for="c-41867555">[1 more]</label></div><br/><div class="children"><div class="content">CRA seems pretty much abandoned. I wouldn’t recommend it for anything nowadays. There are much better options for both starter and serious apps.</div><br/></div></div></div></div><div id="41867553" class="c"><input type="checkbox" id="c-41867553" checked=""/><div class="controls bullet"><span class="by">mattmanser</span><span>|</span><a href="#41867504">prev</a><span>|</span><label class="collapse" for="c-41867553">[-]</label><label class="expand" for="c-41867553">[2 more]</label></div><br/><div class="children"><div class="content">When I switched from CRA&#x2F;webpack to Vite I saw an order of magnitude speed-up, from minutes to a few seconds to compile. My laptop is old, needs replacing and starting to struggle but really shows how bloated webpack is.<p>It&#x27;s fairly trivial to switch too, though means you need to start understanding how webpack&#x2F;vite&#x2F;package.json&#x2F;tsconfig actually work. I did the same as the author and just made a new vite app and then copied stuff over and moved things as required.<p>The only complication I could really see where the environment variable names, which we only used two anyway.<p>By the way, I don&#x27;t know why the author changed to using import &#x27;components&#x2F;blah&#x27; to &#x27;~&#x2F;components&#x2F;blah&#x27; as there&#x27;s no real explanation in the blog post. The link for their commit is broken so can&#x27;t see what the author has done.<p>You actually don&#x27;t need to do that, all you have to do is set &#x27;baseUrl&#x27; in your tsconfig (e.g. &quot;baseUrl&quot;: &quot;.&#x2F;src&quot;). That tells typescript where to look for imports. Then Rollup via Vite handles the rest in compilation.</div><br/><div id="41867587" class="c"><input type="checkbox" id="c-41867587" checked=""/><div class="controls bullet"><span class="by">arbol</span><span>|</span><a href="#41867553">parent</a><span>|</span><label class="collapse" for="c-41867587">[-]</label><label class="expand" for="c-41867587">[1 more]</label></div><br/><div class="children"><div class="content">Webpack is much slower because it&#x27;s written in JS. Vite uses esbuild to compile, which is written in Go. That&#x27;s probably why you saw the speed up.</div><br/></div></div></div></div></div></div></div></div></div></body></html>