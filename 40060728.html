<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1713344471025" as="style"/><link rel="stylesheet" href="styles.css?v=1713344471025"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://csvbase.com/blog/8">Caching secrets of the HTTP elders, part 1</a>Â <span class="domain">(<a href="https://csvbase.com">csvbase.com</a>)</span></div><div class="subtext"><span>calpaterson</span> | <span>6 comments</span></div><br/><div><div id="40062064" class="c"><input type="checkbox" id="c-40062064" checked=""/><div class="controls bullet"><span class="by">repelsteeltje</span><span>|</span><a href="#40061713">next</a><span>|</span><label class="collapse" for="c-40062064">[-]</label><label class="expand" for="c-40062064">[1 more]</label></div><br/><div class="children"><div class="content">ETags are brilliant at reducing bandwidth and work especially well if the origin webserver is close to the client. Unfortunately, there isn&#x27;t a lot it can do about round trip latency. Even if the payload resides on a proxy cache close to the client, that proxy cannot instantly answer 304 Not changed because it needs to revalidate <i>its</i> cache with its upstream as well (using If-None-Match).<p>So, serving a (relatively small) cvsbase Bay Area to Australia will still be slow unless you&#x27;re willing to accept stale data (Ie. Cache-Control: max-age &#x2F; Expires headers).</div><br/></div></div><div id="40061713" class="c"><input type="checkbox" id="c-40061713" checked=""/><div class="controls bullet"><span class="by">zer00eyz</span><span>|</span><a href="#40062064">prev</a><span>|</span><a href="#40062045">next</a><span>|</span><label class="collapse" for="c-40061713">[-]</label><label class="expand" for="c-40061713">[3 more]</label></div><br/><div class="children"><div class="content">This makes me feel old.<p>IM amused by some of the JS community acting like server side rendering and hydration is akin to discovering fire when they just brought back progressive enhancement from circa 2009.<p>Next week we&#x27;re going to have a lesson on semaphores.<p>On a more serious note, there are a lot of places where we could take some lessons from the past to heart. (read stop reinventing the wheel). Permissions systems spring to mind... Something unix&#x2F;ldap like would fit a lot of use cases and be much more clear that some of the awful things I have seen. Good database design needs to make a come back (and people need to stop being afraid of sql). Being able to let go of data, why do some people have so much trouble purging old logs.<p>I could go on but... dam you kids get off my lawn!</div><br/><div id="40061789" class="c"><input type="checkbox" id="c-40061789" checked=""/><div class="controls bullet"><span class="by">calpaterson</span><span>|</span><a href="#40061713">parent</a><span>|</span><a href="#40062045">next</a><span>|</span><label class="collapse" for="c-40061789">[-]</label><label class="expand" for="c-40061789">[2 more]</label></div><br/><div class="children"><div class="content">One of the things I really need to sort on csvbase is permissions.  Currently it has something very basic: you own your table and it&#x27;s either public (meaning everyone has read) or private (meaning only you have read).<p>I really don&#x27;t want to implement, eg RBAC, by myself but equally the state-of-the-art seems to be integration against pretty complicated external stuff (&#x2F;cloud services) which is also undesirable when it&#x27;s your side-project.<p>Advice appreciated.  I suspect LDAP is not a fit but I will investigate it...</div><br/><div id="40062052" class="c"><input type="checkbox" id="c-40062052" checked=""/><div class="controls bullet"><span class="by">zer00eyz</span><span>|</span><a href="#40061713">root</a><span>|</span><a href="#40061789">parent</a><span>|</span><a href="#40062045">next</a><span>|</span><label class="collapse" for="c-40062052">[-]</label><label class="expand" for="c-40062052">[1 more]</label></div><br/><div class="children"><div class="content">Funny where talking about this: I have spent the last two weeks deep into Postgres roles. The whole system is, to say the least, convoluted. I think I need to write &quot;Postgres roles for dummies&quot;... because I feel like one.<p>Ldap would be a great fit. And go go read here: <a href="https:&#x2F;&#x2F;www.zytrax.com&#x2F;books&#x2F;ldap&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.zytrax.com&#x2F;books&#x2F;ldap&#x2F;</a> if you want a dive that you can wrap your head around.<p>Candidly I would NOT go for ldap or RBAC now. The two things I would try to bite off are shared ownership, and then revokable tokens at the table level. It&#x27;s up to the token creator what permissions to give them (read&#x2F;write), how long they should last, and if they want to just publish them or create one per &quot;user&quot;.</div><br/></div></div></div></div></div></div><div id="40062045" class="c"><input type="checkbox" id="c-40062045" checked=""/><div class="controls bullet"><span class="by">vvoyer</span><span>|</span><a href="#40061713">prev</a><span>|</span><label class="collapse" for="c-40062045">[-]</label><label class="expand" for="c-40062045">[1 more]</label></div><br/><div class="children"><div class="content">I am surprised this doesn&#x27;t list two major resources for learning how caching works:<p>- <a href="https:&#x2F;&#x2F;www.mnot.net&#x2F;cache_docs&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.mnot.net&#x2F;cache_docs&#x2F;</a> for a long time this was the best online resource<p>- <a href="https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;HTTP&#x2F;Caching" rel="nofollow">https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;HTTP&#x2F;Caching</a> is extremely detailed, and based on the previous link too from what I can tell</div><br/></div></div></div></div></div></div></div></body></html>