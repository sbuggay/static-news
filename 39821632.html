<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1711443656754" as="style"/><link rel="stylesheet" href="styles.css?v=1711443656754"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://invertornot.com">Show HN: Invertornot.com – API to enhance your images in dark-mode</a> <span class="domain">(<a href="https://invertornot.com">invertornot.com</a>)</span></div><div class="subtext"><span>mattismegevand</span> | <span>29 comments</span></div><br/><div><div id="39825363" class="c"><input type="checkbox" id="c-39825363" checked=""/><div class="controls bullet"><span class="by">rockwotj</span><span>|</span><a href="#39822344">next</a><span>|</span><label class="collapse" for="c-39825363">[-]</label><label class="expand" for="c-39825363">[1 more]</label></div><br/><div class="children"><div class="content">I built dark mode for an email client’s (shortwave.com) HTML emails and this was the last major hurdle to solve. I wish that had existed then :)<p>Generally making emails dark mode is a non trivial problem, there is an hope source library that is a good start from Tempo: <a href="https:&#x2F;&#x2F;github.com&#x2F;yourtempo&#x2F;tempo-message-dark-mode">https:&#x2F;&#x2F;github.com&#x2F;yourtempo&#x2F;tempo-message-dark-mode</a><p>However there are plenty of edge cases that plugin doesn’t handle that we had to fix at Shortwave. Examples include legacy HTML4 attributes, better support for emails that are half dark mode, emails that have background images of #fff (looking at you google play reciepts), the list goes on. It’s honestly pretty solid now</div><br/></div></div><div id="39822344" class="c"><input type="checkbox" id="c-39822344" checked=""/><div class="controls bullet"><span class="by">madeofpalk</span><span>|</span><a href="#39825363">prev</a><span>|</span><a href="#39825137">next</a><span>|</span><label class="collapse" for="c-39822344">[-]</label><label class="expand" for="c-39822344">[4 more]</label></div><br/><div class="children"><div class="content">Semi-related - I saw this on <a href="https:&#x2F;&#x2F;v8.dev" rel="nofollow">https:&#x2F;&#x2F;v8.dev</a> a while back, but `filter: hue-rotate(180deg) invert();` can be a neat CSS trick to &#x27;dark mode&#x27; some kinds of graphics, while not screwing with the colours so much.  The `hue-rotate` help a bit to keep &#x27;blues blue&#x27; etc.<p>It&#x27;s far from perfect, but it&#x27;s a neat one to have in your back pocket.</div><br/><div id="39822754" class="c"><input type="checkbox" id="c-39822754" checked=""/><div class="controls bullet"><span class="by">therein</span><span>|</span><a href="#39822344">parent</a><span>|</span><a href="#39825137">next</a><span>|</span><label class="collapse" for="c-39822754">[-]</label><label class="expand" for="c-39822754">[3 more]</label></div><br/><div class="children"><div class="content">Anyone who thought Retool should have a dark mode has come across this. Definitely a useful trick.</div><br/><div id="39823677" class="c"><input type="checkbox" id="c-39823677" checked=""/><div class="controls bullet"><span class="by">kinj28</span><span>|</span><a href="#39822344">root</a><span>|</span><a href="#39822754">parent</a><span>|</span><a href="#39825137">next</a><span>|</span><label class="collapse" for="c-39823677">[-]</label><label class="expand" for="c-39823677">[2 more]</label></div><br/><div class="children"><div class="content">Hey This is cofounder of a retool alternative here.<p>We did introduce dark mode in a manner where a creator can even make it dynamic for end user to choose a different theme.<p>While I was loggerheads with my CTO cofounder on this - I am glad someone finds this useful in the community of users.<p>I am curious what kind of use case you have for retool&#x2F; alternate tools where you see dark mode as a need</div><br/><div id="39824084" class="c"><input type="checkbox" id="c-39824084" checked=""/><div class="controls bullet"><span class="by">therein</span><span>|</span><a href="#39822344">root</a><span>|</span><a href="#39823677">parent</a><span>|</span><a href="#39825137">next</a><span>|</span><label class="collapse" for="c-39824084">[-]</label><label class="expand" for="c-39824084">[1 more]</label></div><br/><div class="children"><div class="content">There is simply no situation in which I&#x27;d not want for something to have dark mode.</div><br/></div></div></div></div></div></div></div></div><div id="39825137" class="c"><input type="checkbox" id="c-39825137" checked=""/><div class="controls bullet"><span class="by">singularity2001</span><span>|</span><a href="#39822344">prev</a><span>|</span><a href="#39822011">next</a><span>|</span><label class="collapse" for="c-39825137">[-]</label><label class="expand" for="c-39825137">[1 more]</label></div><br/><div class="children"><div class="content">not exactly the same but for colored pictures GPT recently suggested inverting of the image and then turning the color space by 180° so that the original colors are restored... pretty genius</div><br/></div></div><div id="39822011" class="c"><input type="checkbox" id="c-39822011" checked=""/><div class="controls bullet"><span class="by">alanbernstein</span><span>|</span><a href="#39825137">prev</a><span>|</span><a href="#39823605">next</a><span>|</span><label class="collapse" for="c-39822011">[-]</label><label class="expand" for="c-39822011">[3 more]</label></div><br/><div class="children"><div class="content">Neat, as a reader, I&#x27;ve absolutely wanted this exact behavior many times. Do you have any examples of incorrectly classified images? As you say, the model seems quite simple, but I wonder if there are some pathological kinds of photographs that result in inversion.</div><br/><div id="39822122" class="c"><input type="checkbox" id="c-39822122" checked=""/><div class="controls bullet"><span class="by">mattismegevand</span><span>|</span><a href="#39822011">parent</a><span>|</span><a href="#39823452">next</a><span>|</span><label class="collapse" for="c-39822122">[-]</label><label class="expand" for="c-39822122">[1 more]</label></div><br/><div class="children"><div class="content">Some graphs with lots of colors can be difficult for models to handle. In these cases, the model often chooses not to flip the graph to avoid making it hard to read, based on past problems with similar graphs. The model generally does a good job at deciding when to flip something. Although I haven&#x27;t seen it flip photos, it&#x27;s possible that there are examples out there.</div><br/></div></div><div id="39823452" class="c"><input type="checkbox" id="c-39823452" checked=""/><div class="controls bullet"><span class="by">gwern</span><span>|</span><a href="#39822011">parent</a><span>|</span><a href="#39822122">prev</a><span>|</span><a href="#39823605">next</a><span>|</span><label class="collapse" for="c-39823452">[-]</label><label class="expand" for="c-39823452">[1 more]</label></div><br/><div class="children"><div class="content">Some recently-added datapoints I think the current model mis-classifies:<p><a href="https:&#x2F;&#x2F;upload.wikimedia.org&#x2F;wikipedia&#x2F;commons&#x2F;thumb&#x2F;6&#x2F;69&#x2F;Proctor_Richard_Anthony_Other_Worlds_Mars_Chart_1896.jpg&#x2F;800px-Proctor_Richard_Anthony_Other_Worlds_Mars_Chart_1896.jpg" rel="nofollow">https:&#x2F;&#x2F;upload.wikimedia.org&#x2F;wikipedia&#x2F;commons&#x2F;thumb&#x2F;6&#x2F;69&#x2F;Pr...</a> <a href="https:&#x2F;&#x2F;upload.wikimedia.org&#x2F;wikipedia&#x2F;commons&#x2F;thumb&#x2F;f&#x2F;f7&#x2F;US_Presidential_elections_popular_vote_graph_since_1900.png&#x2F;800px-US_Presidential_elections_popular_vote_graph_since_1900.png" rel="nofollow">https:&#x2F;&#x2F;upload.wikimedia.org&#x2F;wikipedia&#x2F;commons&#x2F;thumb&#x2F;f&#x2F;f7&#x2F;US...</a> <a href="https:&#x2F;&#x2F;upload.wikimedia.org&#x2F;wikipedia&#x2F;commons&#x2F;thumb&#x2F;d&#x2F;d4&#x2F;Nature_Study_Club_of_Indiana_yearbook%2C_1927_-_DPLA_-_d833818284c065dc8e607873a24507d6_%28page_3%29.jpg&#x2F;800px-Nature_Study_Club_of_Indiana_yearbook%2C_1927_-_DPLA_-_d833818284c065dc8e607873a24507d6_%28page_3%29.jpg" rel="nofollow">https:&#x2F;&#x2F;upload.wikimedia.org&#x2F;wikipedia&#x2F;commons&#x2F;thumb&#x2F;d&#x2F;d4&#x2F;Na...</a> <a href="https:&#x2F;&#x2F;upload.wikimedia.org&#x2F;wikipedia&#x2F;commons&#x2F;thumb&#x2F;b&#x2F;bb&#x2F;Life_expectancy_in_some_European_countries.png&#x2F;800px-Life_expectancy_in_some_European_countries.png" rel="nofollow">https:&#x2F;&#x2F;upload.wikimedia.org&#x2F;wikipedia&#x2F;commons&#x2F;thumb&#x2F;b&#x2F;bb&#x2F;Li...</a> <a href="https:&#x2F;&#x2F;upload.wikimedia.org&#x2F;wikipedia&#x2F;commons&#x2F;thumb&#x2F;a&#x2F;a7&#x2F;Pie_chart_of_stomach_cancer_types_by_relative_incidence.png&#x2F;800px-Pie_chart_of_stomach_cancer_types_by_relative_incidence.png" rel="nofollow">https:&#x2F;&#x2F;upload.wikimedia.org&#x2F;wikipedia&#x2F;commons&#x2F;thumb&#x2F;a&#x2F;a7&#x2F;Pi...</a></div><br/></div></div></div></div><div id="39823605" class="c"><input type="checkbox" id="c-39823605" checked=""/><div class="controls bullet"><span class="by">noduerme</span><span>|</span><a href="#39822011">prev</a><span>|</span><a href="#39823573">next</a><span>|</span><label class="collapse" for="c-39823605">[-]</label><label class="expand" for="c-39823605">[1 more]</label></div><br/><div class="children"><div class="content">Huh. This is neat.<p>As a side, I have a great frustration balancing dark mode with other things. I use flux on my Mac, not for color temp but strictly for the &quot;darkroom&quot; mode which inverts everything and makes the (inverted) brightness values into red. I only do this when coding at night, to help with my sleep... but the trouble is it&#x27;s made for people who use light mode during the day. I use dark mode all day. So I have to get <i>out</i> of dark mode and change my vscode theme to light in order for it to work. Not a huge deal, but then I open up some web page with a black background and go blind from all the red.</div><br/></div></div><div id="39823573" class="c"><input type="checkbox" id="c-39823573" checked=""/><div class="controls bullet"><span class="by">hunter2_</span><span>|</span><a href="#39823605">prev</a><span>|</span><a href="#39822557">next</a><span>|</span><label class="collapse" for="c-39823573">[-]</label><label class="expand" for="c-39823573">[1 more]</label></div><br/><div class="children"><div class="content">Does this distinguish white backgrounds from transparent backgrounds? For example, a graph consisting of anything-on-white should probably be inverted, while a graph consisting of pure red on transparent should probably not be inverted. For the latter, increasing the luminance (i.e. make it pink on transparent) might be best, followed by leaving it as-is, followed by inverting.<p>But I guess with ML reinforced by human feedback, trends like this manifest without having to explicitly handle them as special cases at all...</div><br/></div></div><div id="39822557" class="c"><input type="checkbox" id="c-39822557" checked=""/><div class="controls bullet"><span class="by">a2code</span><span>|</span><a href="#39823573">prev</a><span>|</span><a href="#39823782">next</a><span>|</span><label class="collapse" for="c-39822557">[-]</label><label class="expand" for="c-39822557">[3 more]</label></div><br/><div class="children"><div class="content">How can you use or create this model for conventional non-API projects? Like to embed it within some C code?</div><br/><div id="39822771" class="c"><input type="checkbox" id="c-39822771" checked=""/><div class="controls bullet"><span class="by">lights0123</span><span>|</span><a href="#39822557">parent</a><span>|</span><a href="#39823782">next</a><span>|</span><label class="collapse" for="c-39822771">[-]</label><label class="expand" for="c-39822771">[2 more]</label></div><br/><div class="children"><div class="content">They&#x27;re using ONNX Runtime to run the model, which has a C API: <a href="https:&#x2F;&#x2F;onnxruntime.ai&#x2F;docs&#x2F;get-started&#x2F;with-c.html" rel="nofollow">https:&#x2F;&#x2F;onnxruntime.ai&#x2F;docs&#x2F;get-started&#x2F;with-c.html</a>. You could also use any other ML inference library that supports the ONNX format.<p>You&#x27;d need to look at this project&#x27;s code to see how it converts input data to the expected matrix format, though.</div><br/><div id="39825285" class="c"><input type="checkbox" id="c-39825285" checked=""/><div class="controls bullet"><span class="by">mattismegevand</span><span>|</span><a href="#39822557">root</a><span>|</span><a href="#39822771">parent</a><span>|</span><a href="#39823782">next</a><span>|</span><label class="collapse" for="c-39825285">[-]</label><label class="expand" for="c-39825285">[1 more]</label></div><br/><div class="children"><div class="content">Exactly, the transformation done for inference are located here: <a href="https:&#x2F;&#x2F;github.com&#x2F;mattismegevand&#x2F;invertornot&#x2F;blob&#x2F;main&#x2F;api&#x2F;nn.py">https:&#x2F;&#x2F;github.com&#x2F;mattismegevand&#x2F;invertornot&#x2F;blob&#x2F;main&#x2F;api&#x2F;...</a></div><br/></div></div></div></div></div></div><div id="39823782" class="c"><input type="checkbox" id="c-39823782" checked=""/><div class="controls bullet"><span class="by">pimlottc</span><span>|</span><a href="#39822557">prev</a><span>|</span><a href="#39822120">next</a><span>|</span><label class="collapse" for="c-39823782">[-]</label><label class="expand" for="c-39823782">[2 more]</label></div><br/><div class="children"><div class="content">I would be interested to see more samples.  Naively it seems like you could just say &quot;isPhoto ? REDUCE_BRIGHTNESS : INVERT&quot;</div><br/><div id="39825313" class="c"><input type="checkbox" id="c-39825313" checked=""/><div class="controls bullet"><span class="by">mattismegevand</span><span>|</span><a href="#39823782">parent</a><span>|</span><a href="#39822120">next</a><span>|</span><label class="collapse" for="c-39825313">[-]</label><label class="expand" for="c-39825313">[1 more]</label></div><br/><div class="children"><div class="content">The two big cluster are indeed photo and charts. However chart or meme are not all invertible, charts with lots of color can for example be degraded by inversion. Also some chart are already done for dark theme, for those images the model will understand that it doesn’t need to invert them.</div><br/></div></div></div></div><div id="39822120" class="c"><input type="checkbox" id="c-39822120" checked=""/><div class="controls bullet"><span class="by">SCUSKU</span><span>|</span><a href="#39823782">prev</a><span>|</span><a href="#39824337">next</a><span>|</span><label class="collapse" for="c-39822120">[-]</label><label class="expand" for="c-39822120">[2 more]</label></div><br/><div class="children"><div class="content">Very cool! Nice job! Out of curiosity, how much CPU&#x2F;GPU&#x2F;RAM resources do you need to allocate to run something like this? Like you mention you&#x27;re using small models. For example, could this run on a t2.micro on EC2? (1 vCPU + 1GB RAM)</div><br/><div id="39822168" class="c"><input type="checkbox" id="c-39822168" checked=""/><div class="controls bullet"><span class="by">mattismegevand</span><span>|</span><a href="#39822120">parent</a><span>|</span><a href="#39824337">next</a><span>|</span><label class="collapse" for="c-39822168">[-]</label><label class="expand" for="c-39822168">[1 more]</label></div><br/><div class="children"><div class="content">Thank you! Very little resources are needed to run it, gwern is using the API and at first I was using a 6$ Droplet (exact same specs as the t2.micro) and it was running well.</div><br/></div></div></div></div><div id="39824337" class="c"><input type="checkbox" id="c-39824337" checked=""/><div class="controls bullet"><span class="by">Labo333</span><span>|</span><a href="#39822120">prev</a><span>|</span><a href="#39822861">next</a><span>|</span><label class="collapse" for="c-39824337">[-]</label><label class="expand" for="c-39824337">[2 more]</label></div><br/><div class="children"><div class="content">Pretty cool! A nice addition would be an in-browser runtime!</div><br/><div id="39824866" class="c"><input type="checkbox" id="c-39824866" checked=""/><div class="controls bullet"><span class="by">rvnx</span><span>|</span><a href="#39824337">parent</a><span>|</span><a href="#39822861">next</a><span>|</span><label class="collapse" for="c-39824866">[-]</label><label class="expand" for="c-39824866">[1 more]</label></div><br/><div class="children"><div class="content">It used to be implemented in Chrome, it was part of the feature called &quot;Force Dark Mode Web Contents&quot; and it had a runtime tflite model that determines if the lightness should be inverted (and a simpler heuristics that just counts the number of colored pixels).</div><br/></div></div></div></div><div id="39822861" class="c"><input type="checkbox" id="c-39822861" checked=""/><div class="controls bullet"><span class="by">noisy_boy</span><span>|</span><a href="#39824337">prev</a><span>|</span><a href="#39822400">next</a><span>|</span><label class="collapse" for="c-39822861">[-]</label><label class="expand" for="c-39822861">[3 more]</label></div><br/><div class="children"><div class="content">What I am interested in is a plugin&#x2F;extension for Firefox&#x2F;Chrome that can invert a video running on a page (darkreader is not doing that).</div><br/><div id="39823456" class="c"><input type="checkbox" id="c-39823456" checked=""/><div class="controls bullet"><span class="by">gwern</span><span>|</span><a href="#39822861">parent</a><span>|</span><a href="#39823528">next</a><span>|</span><label class="collapse" for="c-39823456">[-]</label><label class="expand" for="c-39823456">[1 more]</label></div><br/><div class="children"><div class="content">Does that really make sense? Unlike a single static image, a video is not one thing. It might go rapidly between invertible and non-invertible. Would you expect it to switch strategies potentially every scene or second...?</div><br/></div></div><div id="39823528" class="c"><input type="checkbox" id="c-39823528" checked=""/><div class="controls bullet"><span class="by">Dibby053</span><span>|</span><a href="#39822861">parent</a><span>|</span><a href="#39823456">prev</a><span>|</span><a href="#39822400">next</a><span>|</span><label class="collapse" for="c-39823528">[-]</label><label class="expand" for="c-39823528">[1 more]</label></div><br/><div class="children"><div class="content">As a one-off solution you could switch to light mode and invert the display.</div><br/></div></div></div></div><div id="39822400" class="c"><input type="checkbox" id="c-39822400" checked=""/><div class="controls bullet"><span class="by">klntsky</span><span>|</span><a href="#39822861">prev</a><span>|</span><a href="#39822028">next</a><span>|</span><label class="collapse" for="c-39822400">[-]</label><label class="expand" for="c-39822400">[2 more]</label></div><br/><div class="children"><div class="content">What&#x27;s your accuracy?</div><br/><div id="39825321" class="c"><input type="checkbox" id="c-39825321" checked=""/><div class="controls bullet"><span class="by">mattismegevand</span><span>|</span><a href="#39822400">parent</a><span>|</span><a href="#39822028">next</a><span>|</span><label class="collapse" for="c-39825321">[-]</label><label class="expand" for="c-39825321">[1 more]</label></div><br/><div class="children"><div class="content">Close to 100%, this problem seem to be easily solved by the model. I plan to do cross validation and also to explore the use of a smaller model.</div><br/></div></div></div></div><div id="39822028" class="c"><input type="checkbox" id="c-39822028" checked=""/><div class="controls bullet"><span class="by">hansihe</span><span>|</span><a href="#39822400">prev</a><span>|</span><a href="#39822568">next</a><span>|</span><label class="collapse" for="c-39822028">[-]</label><label class="expand" for="c-39822028">[2 more]</label></div><br/><div class="children"><div class="content">This is really cool! Do you have some more example images somewhere?</div><br/><div id="39822054" class="c"><input type="checkbox" id="c-39822054" checked=""/><div class="controls bullet"><span class="by">mattismegevand</span><span>|</span><a href="#39822028">parent</a><span>|</span><a href="#39822568">next</a><span>|</span><label class="collapse" for="c-39822054">[-]</label><label class="expand" for="c-39822054">[1 more]</label></div><br/><div class="children"><div class="content">Thank you, yes you can try it directly (<a href="https:&#x2F;&#x2F;invertornot.com&#x2F;docs" rel="nofollow">https:&#x2F;&#x2F;invertornot.com&#x2F;docs</a>) or you can either upload an images or spam the button to get random images and see their prediction.</div><br/></div></div></div></div><div id="39822568" class="c"><input type="checkbox" id="c-39822568" checked=""/><div class="controls bullet"><span class="by">block_dagger</span><span>|</span><a href="#39822028">prev</a><span>|</span><label class="collapse" for="c-39822568">[-]</label><label class="expand" for="c-39822568">[1 more]</label></div><br/><div class="children"><div class="content">Dark Reader needs this! Nice work.</div><br/></div></div></div></div></div></div></div></body></html>