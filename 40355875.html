<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1715763670889" as="style"/><link rel="stylesheet" href="styles.css?v=1715763670889"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.highlight.io/blog/lw5-clickhouse-performance-optimization">Optimizing ClickHouse: Tactics that worked for us</a>Â <span class="domain">(<a href="https://www.highlight.io">www.highlight.io</a>)</span></div><div class="subtext"><span>podoman</span> | <span>13 comments</span></div><br/><div><div id="40364484" class="c"><input type="checkbox" id="c-40364484" checked=""/><div class="controls bullet"><span class="by">Dachande663</span><span>|</span><a href="#40361294">next</a><span>|</span><label class="collapse" for="c-40364484">[-]</label><label class="expand" for="c-40364484">[1 more]</label></div><br/><div class="children"><div class="content">We found the &quot;lots of small inserts&quot; issue, and fixed it by just using the Buffered table engine[0]. Can create it as a replica of the destination table, and it stores inserts in memory until they cross a threshold and are written. Super simple and took 5 minutes.<p>[0] <a href="https:&#x2F;&#x2F;clickhouse.com&#x2F;docs&#x2F;en&#x2F;engines&#x2F;table-engines&#x2F;special&#x2F;buffer" rel="nofollow">https:&#x2F;&#x2F;clickhouse.com&#x2F;docs&#x2F;en&#x2F;engines&#x2F;table-engines&#x2F;special...</a></div><br/></div></div><div id="40361294" class="c"><input type="checkbox" id="c-40361294" checked=""/><div class="controls bullet"><span class="by">Syntaf</span><span>|</span><a href="#40364484">prev</a><span>|</span><a href="#40364111">next</a><span>|</span><label class="collapse" for="c-40361294">[-]</label><label class="expand" for="c-40361294">[4 more]</label></div><br/><div class="children"><div class="content">We&#x27;ve been using highlight for our bootstrapped member management platform[1] and I gotta say I&#x27;m super impressed with the session replay feature, it&#x27;s really helpful for understanding user behavior at a fraction of the price of competitors.<p>I remember wanting to use Heap&#x27;s session replay only to release they want hundreds of dollars per _month_, my last bill with highlight was $2.38 I recall.<p>That&#x27;s all to say that I&#x27;m glad Highlight is figuring out how to scale while still offering their features to the small players of the world.<p>[1] <a href="https:&#x2F;&#x2F;embolt.app" rel="nofollow">https:&#x2F;&#x2F;embolt.app</a></div><br/><div id="40361590" class="c"><input type="checkbox" id="c-40361590" checked=""/><div class="controls bullet"><span class="by">tmzt</span><span>|</span><a href="#40361294">parent</a><span>|</span><a href="#40361312">next</a><span>|</span><label class="collapse" for="c-40361590">[-]</label><label class="expand" for="c-40361590">[1 more]</label></div><br/><div class="children"><div class="content">Very nice and very inspirational for someone bootstrapping a startup.<p>The pages clearly defined what you are building and how to use it.<p>The explanation of platform fees makes sense, though it could more clear if the pricing examples are only based on those fees or are account limits to number of members or dues.<p>You might want to check your terms of service, they do not list a jurisdiction and have the placeholder [jurisdiction] instead.<p>Best of luck with it!</div><br/></div></div><div id="40361312" class="c"><input type="checkbox" id="c-40361312" checked=""/><div class="controls bullet"><span class="by">podoman</span><span>|</span><a href="#40361294">parent</a><span>|</span><a href="#40361590">prev</a><span>|</span><a href="#40364111">next</a><span>|</span><label class="collapse" for="c-40361312">[-]</label><label class="expand" for="c-40361312">[2 more]</label></div><br/><div class="children"><div class="content">Highlight.io cofounder here. Thanks for the shout out. Glad to hear you like the product; continue to share feedback as you use it!</div><br/><div id="40364257" class="c"><input type="checkbox" id="c-40364257" checked=""/><div class="controls bullet"><span class="by">cpursley</span><span>|</span><a href="#40361294">root</a><span>|</span><a href="#40361312">parent</a><span>|</span><a href="#40364111">next</a><span>|</span><label class="collapse" for="c-40364257">[-]</label><label class="expand" for="c-40364257">[1 more]</label></div><br/><div class="children"><div class="content">Highlight looks great. Does it support Elixir LiveView?</div><br/></div></div></div></div></div></div><div id="40364111" class="c"><input type="checkbox" id="c-40364111" checked=""/><div class="controls bullet"><span class="by">ople</span><span>|</span><a href="#40361294">prev</a><span>|</span><a href="#40362497">next</a><span>|</span><label class="collapse" for="c-40364111">[-]</label><label class="expand" for="c-40364111">[1 more]</label></div><br/><div class="children"><div class="content">Very interesting observations! Merge performance tuning seems often overlooked even though it&#x27;s a key aspect of sustained ClickHouse performance.<p>I also like that the blog is quite compact and gets the points across without getting too much into the weeds.<p>One thing I&#x27;ve noticed also that bloom filter index types can be quite costly to merge. In many cases that&#x27;s acceptable though due to the massive benefit they provide for text queries. One just has to be mindful of the overhead when adding them.</div><br/></div></div><div id="40362497" class="c"><input type="checkbox" id="c-40362497" checked=""/><div class="controls bullet"><span class="by">banditelol</span><span>|</span><a href="#40364111">prev</a><span>|</span><a href="#40362535">next</a><span>|</span><label class="collapse" for="c-40362497">[-]</label><label class="expand" for="c-40362497">[4 more]</label></div><br/><div class="children"><div class="content">&gt; We opted to use the ClickHouse Kafka Connect Sink that implements batched writes and exactly-once semantics achieved through ClickHouse Keeper.<p>Just a heads up, You&#x27;ve got repeated line there</div><br/><div id="40362775" class="c"><input type="checkbox" id="c-40362775" checked=""/><div class="controls bullet"><span class="by">YZF</span><span>|</span><a href="#40362497">parent</a><span>|</span><a href="#40362625">next</a><span>|</span><label class="collapse" for="c-40362775">[-]</label><label class="expand" for="c-40362775">[2 more]</label></div><br/><div class="children"><div class="content">Might have been a joke on &quot;exactly once&quot; ;)</div><br/><div id="40363184" class="c"><input type="checkbox" id="c-40363184" checked=""/><div class="controls bullet"><span class="by">vadman97</span><span>|</span><a href="#40362497">root</a><span>|</span><a href="#40362775">parent</a><span>|</span><a href="#40362625">next</a><span>|</span><label class="collapse" for="c-40363184">[-]</label><label class="expand" for="c-40363184">[1 more]</label></div><br/><div class="children"><div class="content">I see what you did there.</div><br/></div></div></div></div><div id="40362625" class="c"><input type="checkbox" id="c-40362625" checked=""/><div class="controls bullet"><span class="by">podoman</span><span>|</span><a href="#40362497">parent</a><span>|</span><a href="#40362775">prev</a><span>|</span><a href="#40362535">next</a><span>|</span><label class="collapse" for="c-40362625">[-]</label><label class="expand" for="c-40362625">[1 more]</label></div><br/><div class="children"><div class="content">Put up a fix, thanks: <a href="https:&#x2F;&#x2F;github.com&#x2F;highlight&#x2F;highlight&#x2F;pull&#x2F;8571">https:&#x2F;&#x2F;github.com&#x2F;highlight&#x2F;highlight&#x2F;pull&#x2F;8571</a></div><br/></div></div></div></div><div id="40362535" class="c"><input type="checkbox" id="c-40362535" checked=""/><div class="controls bullet"><span class="by">jkercher</span><span>|</span><a href="#40362497">prev</a><span>|</span><label class="collapse" for="c-40362535">[-]</label><label class="expand" for="c-40362535">[2 more]</label></div><br/><div class="children"><div class="content">clickhouse-local is pretty slick as well. You can operate directly on text files as if they were tables.  I made my own toy text file database thing and thought I was cool because I could outrun similar programs like q, textql, sqlite, etc. But clickhouse-local had me by a factor of 10 easy in every kind of query with every type of data. Those guys know stuff.</div><br/><div id="40362614" class="c"><input type="checkbox" id="c-40362614" checked=""/><div class="controls bullet"><span class="by">podoman</span><span>|</span><a href="#40362535">parent</a><span>|</span><label class="collapse" for="c-40362614">[-]</label><label class="expand" for="c-40362614">[1 more]</label></div><br/><div class="children"><div class="content">Have heard good things about local. Clickhouse more broadly is an awesome project and they&#x27;re always on standby to help our eng team team as well.</div><br/></div></div></div></div></div></div></div></div></div></body></html>