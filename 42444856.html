<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1734512460715" as="style"/><link rel="stylesheet" href="styles.css?v=1734512460715"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.cerbos.dev/blog/crdts-and-collaborative-playground">CRDTs and Collaborative Playground</a> <span class="domain">(<a href="https://www.cerbos.dev">www.cerbos.dev</a>)</span></div><div class="subtext"><span>emreb</span> | <span>6 comments</span></div><br/><div><div id="42448791" class="c"><input type="checkbox" id="c-42448791" checked=""/><div class="controls bullet"><span class="by">thoughtlede</span><span>|</span><a href="#42447642">next</a><span>|</span><label class="collapse" for="c-42448791">[-]</label><label class="expand" for="c-42448791">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Beyond this, if you want to determine causality, e.g. whether events are &quot;causally related&quot; (happened before or after each other) or are &quot;concurrent&quot; (entirely independent of), you can look at Vector Clocks—I won&#x27;t go down that rabbit-hole here, though.<p>If anyone want to go down that rabbit hole: <a href="https:&#x2F;&#x2F;www.exhypothesi.com&#x2F;clocks-and-causality&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.exhypothesi.com&#x2F;clocks-and-causality&#x2F;</a></div><br/></div></div><div id="42447642" class="c"><input type="checkbox" id="c-42447642" checked=""/><div class="controls bullet"><span class="by">paulgb</span><span>|</span><a href="#42448791">prev</a><span>|</span><a href="#42444992">next</a><span>|</span><label class="collapse" for="c-42447642">[-]</label><label class="expand" for="c-42447642">[2 more]</label></div><br/><div class="children"><div class="content">Great write-up!<p>&gt; If we extend it further with a fairly simple distributed mutex mechanism, we can now persist and share state across any service which can access the Redis instance!<p>I’m curious to hear more about the approach you took here. Does the first server to open the document hold the mutex, or do servers only hold the mutex when briefly while they persist data?<p>(I’ll also shamelessly plug Y-Sweet, an open source Yjs server with persistence that I contribute to <a href="https:&#x2F;&#x2F;github.com&#x2F;jamsocket&#x2F;y-sweet">https:&#x2F;&#x2F;github.com&#x2F;jamsocket&#x2F;y-sweet</a>)</div><br/><div id="42448725" class="c"><input type="checkbox" id="c-42448725" checked=""/><div class="controls bullet"><span class="by">sambigeara</span><span>|</span><a href="#42447642">parent</a><span>|</span><a href="#42444992">next</a><span>|</span><label class="collapse" for="c-42448725">[-]</label><label class="expand" for="c-42448725">[1 more]</label></div><br/><div class="children"><div class="content">Blog author here!<p>&gt; or do servers only hold the mutex when briefly while they persist data?<p>This: it&#x27;s only held during document updates, which in itself is an operation we debounce to avoid unnecessarily hammering the DB. Eventual consistency is our friend here, so this isn&#x27;t a high frequency requirement (as I&#x27;m sure you&#x27;re aware!).<p>If you can nail the &quot;sync-on-close&quot; mechanism in browsers, then you&#x27;re golden :-)<p>How do you handle it within y-sweet (cool project, BTW!)?</div><br/></div></div></div></div></div></div></div></div></div></body></html>