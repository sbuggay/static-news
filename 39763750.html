<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1710925267191" as="style"/><link rel="stylesheet" href="styles.css?v=1710925267191"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://sethmlarson.dev/regex-$-matches-end-of-string-or-newline">Regex character &quot;$&quot; doesn&#x27;t mean &quot;end-of-string&quot;</a> <span class="domain">(<a href="https://sethmlarson.dev">sethmlarson.dev</a>)</span></div><div class="subtext"><span>BerislavLopac</span> | <span>12 comments</span></div><br/><div><div id="39764130" class="c"><input type="checkbox" id="c-39764130" checked=""/><div class="controls bullet"><span class="by">beardyw</span><span>|</span><a href="#39764110">next</a><span>|</span><label class="collapse" for="c-39764130">[-]</label><label class="expand" for="c-39764130">[1 more]</label></div><br/><div class="children"><div class="content">Does anyone consider RegEx to be standardised? Moving to a new context is always a relearning exercise in my experience.</div><br/></div></div><div id="39764110" class="c"><input type="checkbox" id="c-39764110" checked=""/><div class="controls bullet"><span class="by">xlii</span><span>|</span><a href="#39764130">prev</a><span>|</span><a href="#39764109">next</a><span>|</span><label class="collapse" for="c-39764110">[-]</label><label class="expand" for="c-39764110">[1 more]</label></div><br/><div class="children"><div class="content">Regexp was one of the first things I truly internalized years ago when I was discovering Perl (which still lives in a cozy place in my heart due to a lovely “Camel” book).<p>Today most important bit of information is knowledge that implementations differ and I made a habit of pulling reference sheet for a thing I work with.<p>E.g. Emacs Regexp annoyingly doesn’t have word in form of “\w” but uses “\s_-“ (or something no reference sheet on screen) as character class (but Emacs has the best documentation and discoverability - a hill I’m willing to die on)<p>Some utilities require parenthesis escaping and some not. Sometimes this behavior is configurable and sometimes it’s not.<p>I lived through whole confusion, annoyance, denial phase and now I just accept it. Concept is the same everywhere but flavor changes.</div><br/></div></div><div id="39764109" class="c"><input type="checkbox" id="c-39764109" checked=""/><div class="controls bullet"><span class="by">somat</span><span>|</span><a href="#39764110">prev</a><span>|</span><a href="#39764057">next</a><span>|</span><label class="collapse" for="c-39764109">[-]</label><label class="expand" for="c-39764109">[1 more]</label></div><br/><div class="children"><div class="content">Structural regexes as found in the sam editor are an obscure but well engineered regex engine. I am far from an expert but my main takeaway from them is that most regex engines have an implied structure built around &quot;lines&quot; of text. While you can work around this, it is awkward. Structural regexes allow you to explicitly define the structure of a match, that is, you get to tell the engine what a &quot;line&quot; is.<p><a href="http:&#x2F;&#x2F;man.cat-v.org&#x2F;plan_9&#x2F;1&#x2F;sam" rel="nofollow">http:&#x2F;&#x2F;man.cat-v.org&#x2F;plan_9&#x2F;1&#x2F;sam</a></div><br/></div></div><div id="39764057" class="c"><input type="checkbox" id="c-39764057" checked=""/><div class="controls bullet"><span class="by">Izmaki</span><span>|</span><a href="#39764109">prev</a><span>|</span><a href="#39763999">next</a><span>|</span><label class="collapse" for="c-39764057">[-]</label><label class="expand" for="c-39764057">[3 more]</label></div><br/><div class="children"><div class="content">The new-line character is an actual character &quot;at the end&quot; of the string though so it makes sense that $ would include the new-line character in multi-line matching.</div><br/><div id="39764116" class="c"><input type="checkbox" id="c-39764116" checked=""/><div class="controls bullet"><span class="by">mnw21cam</span><span>|</span><a href="#39764057">parent</a><span>|</span><a href="#39764113">next</a><span>|</span><label class="collapse" for="c-39764116">[-]</label><label class="expand" for="c-39764116">[1 more]</label></div><br/><div class="children"><div class="content">The article is about when multi-line is <i>disabled</i>.</div><br/></div></div><div id="39764113" class="c"><input type="checkbox" id="c-39764113" checked=""/><div class="controls bullet"><span class="by">IshKebab</span><span>|</span><a href="#39764057">parent</a><span>|</span><a href="#39764116">prev</a><span>|</span><a href="#39763999">next</a><span>|</span><label class="collapse" for="c-39764113">[-]</label><label class="expand" for="c-39764113">[1 more]</label></div><br/><div class="children"><div class="content">Yes and every implementation gets that right. The point was when multi-line matching is <i>disabled</i> and only Javascript, Go and Rust get that right.<p>I&#x27;m not too surprised by PHP and Python getting it wrong. Java and C# is a slight surprise though.</div><br/></div></div></div></div><div id="39763999" class="c"><input type="checkbox" id="c-39763999" checked=""/><div class="controls bullet"><span class="by">ikiris</span><span>|</span><a href="#39764057">prev</a><span>|</span><a href="#39764073">next</a><span>|</span><label class="collapse" for="c-39763999">[-]</label><label class="expand" for="c-39763999">[3 more]</label></div><br/><div class="children"><div class="content">this is mostly due to the different types of regex and less about it being platform dependent. $ was end of string in pcre which is the &quot;old&quot; perl compatible regex. python has its own which has quirks as mentioned, re2 is another option in go for example, and i think rust has its own version as well iirc.</div><br/><div id="39764121" class="c"><input type="checkbox" id="c-39764121" checked=""/><div class="controls bullet"><span class="by">wolletd</span><span>|</span><a href="#39763999">parent</a><span>|</span><a href="#39764046">next</a><span>|</span><label class="collapse" for="c-39764121">[-]</label><label class="expand" for="c-39764121">[1 more]</label></div><br/><div class="children"><div class="content">The differences of the various regex &quot;dialects&quot; came to me over the years of using regular expressions for all kinds of stuff.<p>Matching EOL feels natural for every line-based process.<p>What I find way more annoying is escaping characters and writing character groups. Why can&#x27;t all regex engines support &#x27;\d&#x27; and &#x27;\w&#x27; and such?
Why, in sed, is an unescaped &#x27;.&#x27; a regex-dot matching any character, but an unescaped &#x27;(&#x27; is just a regular bracket?</div><br/></div></div><div id="39764046" class="c"><input type="checkbox" id="c-39764046" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#39763999">parent</a><span>|</span><a href="#39764121">prev</a><span>|</span><a href="#39764073">next</a><span>|</span><label class="collapse" for="c-39764046">[-]</label><label class="expand" for="c-39764046">[1 more]</label></div><br/><div class="children"><div class="content">Indeed, there isn&#x27;t any kind of universal regexp standard.</div><br/></div></div></div></div><div id="39764073" class="c"><input type="checkbox" id="c-39764073" checked=""/><div class="controls bullet"><span class="by">user2342</span><span>|</span><a href="#39763999">prev</a><span>|</span><label class="collapse" for="c-39764073">[-]</label><label class="expand" for="c-39764073">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;m confused by this blog-post. In the table: what is the reg-ex pattern tested and against which input?</div><br/><div id="39764103" class="c"><input type="checkbox" id="c-39764103" checked=""/><div class="controls bullet"><span class="by">mnw21cam</span><span>|</span><a href="#39764073">parent</a><span>|</span><label class="collapse" for="c-39764103">[-]</label><label class="expand" for="c-39764103">[1 more]</label></div><br/><div class="children"><div class="content">The input being matched is &quot;cat\n&quot; and the regex pattern is one of:<p><pre><code>  &quot;cat$&quot; with multiline enabled
  &quot;cat$&quot; with multiline disabled
  &quot;cat\z&quot;
  &quot;cat\Z&quot;</code></pre></div><br/></div></div></div></div></div></div></div></div></div></body></html>