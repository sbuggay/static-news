<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1713089488691" as="style"/><link rel="stylesheet" href="styles.css?v=1713089488691"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://kaveland.no/careful-with-that-lock-eugene.html">Careful with That Lock, Eugene</a> <span class="domain">(<a href="https://kaveland.no">kaveland.no</a>)</span></div><div class="subtext"><span>alflervag</span> | <span>16 comments</span></div><br/><div><div id="40029158" class="c"><input type="checkbox" id="c-40029158" checked=""/><div class="controls bullet"><span class="by">charettes</span><span>|</span><a href="#40027024">next</a><span>|</span><label class="collapse" for="c-40029158">[-]</label><label class="expand" for="c-40029158">[2 more]</label></div><br/><div class="children"><div class="content">It doesn&#x27;t make the article less interesting but this statement is wrong most of the time<p>&gt; This scenario is essentially identical to one in which there&#x27;s a single migration statement that requires an `AccessExclusiveLock` and performs a table rewrite, such as adding a NOT NULL column with a DEFAULT value.<p>Unless the `DEFAULT` value is `VOLATILE` (this is rarely the case as usually default values are at least `STABLE`) no table rewrite is necessary since Postgres 11.<p><a href="https:&#x2F;&#x2F;www.postgresql.org&#x2F;docs&#x2F;devel&#x2F;sql-altertable.html" rel="nofollow">https:&#x2F;&#x2F;www.postgresql.org&#x2F;docs&#x2F;devel&#x2F;sql-altertable.html</a><p>&gt; Many other useful performance improvements, including the ability to avoid a table rewrite for ALTER TABLE ... ADD COLUMN with a non-null column default<p><a href="https:&#x2F;&#x2F;www.postgresql.org&#x2F;docs&#x2F;release&#x2F;11.0&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.postgresql.org&#x2F;docs&#x2F;release&#x2F;11.0&#x2F;</a></div><br/><div id="40029997" class="c"><input type="checkbox" id="c-40029997" checked=""/><div class="controls bullet"><span class="by">rkaveland</span><span>|</span><a href="#40029158">parent</a><span>|</span><a href="#40027024">next</a><span>|</span><label class="collapse" for="c-40029997">[-]</label><label class="expand" for="c-40029997">[1 more]</label></div><br/><div class="children"><div class="content">Thanks, I will fix this part. As far as I can tell, it is only the example of what can cause the table rewrite that&#x27;s wrong, so it would be correct if the example was to make a varchar shorter? Although I guess that&#x27;s not a table rewrite, only a long validation...</div><br/></div></div></div></div><div id="40027024" class="c"><input type="checkbox" id="c-40027024" checked=""/><div class="controls bullet"><span class="by">Empact</span><span>|</span><a href="#40029158">prev</a><span>|</span><a href="#40025149">next</a><span>|</span><label class="collapse" for="c-40027024">[-]</label><label class="expand" for="c-40027024">[5 more]</label></div><br/><div class="children"><div class="content">In the Rails world, the gem strong_migrations can be used to detect these: <a href="https:&#x2F;&#x2F;github.com&#x2F;ankane&#x2F;strong_migrations">https:&#x2F;&#x2F;github.com&#x2F;ankane&#x2F;strong_migrations</a><p>The docs include a handy articulation of fixes.</div><br/><div id="40030007" class="c"><input type="checkbox" id="c-40030007" checked=""/><div class="controls bullet"><span class="by">rkaveland</span><span>|</span><a href="#40027024">parent</a><span>|</span><a href="#40027496">next</a><span>|</span><label class="collapse" for="c-40030007">[-]</label><label class="expand" for="c-40030007">[1 more]</label></div><br/><div class="children"><div class="content">This is super cool, I love how it suggests safer ways to achieve the same goal for many common risky migrations. Definitely going to sit down and study these.</div><br/></div></div><div id="40027496" class="c"><input type="checkbox" id="c-40027496" checked=""/><div class="controls bullet"><span class="by">tnmom</span><span>|</span><a href="#40027024">parent</a><span>|</span><a href="#40030007">prev</a><span>|</span><a href="#40029473">next</a><span>|</span><label class="collapse" for="c-40027496">[-]</label><label class="expand" for="c-40027496">[2 more]</label></div><br/><div class="children"><div class="content">ankane is some kind of superhuman cyborg. Seems like about 25% of the really useful gems I use have that name in the URL...</div><br/><div id="40029818" class="c"><input type="checkbox" id="c-40029818" checked=""/><div class="controls bullet"><span class="by">hamilyon2</span><span>|</span><a href="#40027024">root</a><span>|</span><a href="#40027496">parent</a><span>|</span><a href="#40029473">next</a><span>|</span><label class="collapse" for="c-40029818">[-]</label><label class="expand" for="c-40029818">[1 more]</label></div><br/><div class="children"><div class="content">Pghero is kind of gem</div><br/></div></div></div></div><div id="40029473" class="c"><input type="checkbox" id="c-40029473" checked=""/><div class="controls bullet"><span class="by">alflervag</span><span>|</span><a href="#40027024">parent</a><span>|</span><a href="#40027496">prev</a><span>|</span><a href="#40025149">next</a><span>|</span><label class="collapse" for="c-40029473">[-]</label><label class="expand" for="c-40029473">[1 more]</label></div><br/><div class="children"><div class="content">Nice, I wasn’t aware of this one.</div><br/></div></div></div></div><div id="40025149" class="c"><input type="checkbox" id="c-40025149" checked=""/><div class="controls bullet"><span class="by">alflervag</span><span>|</span><a href="#40027024">prev</a><span>|</span><a href="#40028627">next</a><span>|</span><label class="collapse" for="c-40025149">[-]</label><label class="expand" for="c-40025149">[1 more]</label></div><br/><div class="children"><div class="content">A really interesting idea. Checking what locks a database migrations holds in CI so you can automatically add warnings to pull requests that are likely to cause downtime.</div><br/></div></div><div id="40028627" class="c"><input type="checkbox" id="c-40028627" checked=""/><div class="controls bullet"><span class="by">noncoml</span><span>|</span><a href="#40025149">prev</a><span>|</span><a href="#40027009">next</a><span>|</span><label class="collapse" for="c-40028627">[-]</label><label class="expand" for="c-40028627">[1 more]</label></div><br/><div class="children"><div class="content">A reference to “Careful with that axe, Eugene”<p>Another appear of an ax in a Pink Floyd song is the “ Run to the bedroom, in the suitcase on the left, you&#x27;ll find my favorite axe,” from “One Of My Turns”</div><br/></div></div><div id="40027009" class="c"><input type="checkbox" id="c-40027009" checked=""/><div class="controls bullet"><span class="by">tomcam</span><span>|</span><a href="#40028627">prev</a><span>|</span><a href="#40027010">next</a><span>|</span><label class="collapse" for="c-40027009">[-]</label><label class="expand" for="c-40027009">[4 more]</label></div><br/><div class="children"><div class="content">For you young whippersnappers (are there any old whippersnappers?), the title refers to a Pink Floyd song called &quot;Careful With That Axe, Eugene&quot;.</div><br/><div id="40029031" class="c"><input type="checkbox" id="c-40029031" checked=""/><div class="controls bullet"><span class="by">jeffreygoesto</span><span>|</span><a href="#40027009">parent</a><span>|</span><a href="#40027413">next</a><span>|</span><label class="collapse" for="c-40029031">[-]</label><label class="expand" for="c-40029031">[2 more]</label></div><br/><div class="children"><div class="content">That primal scream fitted perfectly into the final scene of Zabriskie Point...<p><a href="https:&#x2F;&#x2F;youtu.be&#x2F;dcSMv44jgls?t=4m08s" rel="nofollow">https:&#x2F;&#x2F;youtu.be&#x2F;dcSMv44jgls?t=4m08s</a></div><br/><div id="40029892" class="c"><input type="checkbox" id="c-40029892" checked=""/><div class="controls bullet"><span class="by">tomcam</span><span>|</span><a href="#40027009">root</a><span>|</span><a href="#40029031">parent</a><span>|</span><a href="#40027413">next</a><span>|</span><label class="collapse" for="c-40029892">[-]</label><label class="expand" for="c-40029892">[1 more]</label></div><br/><div class="children"><div class="content">Stunning. You have to imagine it was right there in the script.</div><br/></div></div></div></div></div></div><div id="40027010" class="c"><input type="checkbox" id="c-40027010" checked=""/><div class="controls bullet"><span class="by">neosavvy</span><span>|</span><a href="#40027009">prev</a><span>|</span><a href="#40028819">next</a><span>|</span><label class="collapse" for="c-40027010">[-]</label><label class="expand" for="c-40027010">[1 more]</label></div><br/><div class="children"><div class="content">Clearly a Pink Floyd fan!</div><br/></div></div><div id="40028819" class="c"><input type="checkbox" id="c-40028819" checked=""/><div class="controls bullet"><span class="by">vivzkestrel</span><span>|</span><a href="#40027010">prev</a><span>|</span><label class="collapse" for="c-40028819">[-]</label><label class="expand" for="c-40028819">[1 more]</label></div><br/><div class="children"><div class="content">Made your page much more readable on large screens <a href="https:&#x2F;&#x2F;imgur.com&#x2F;a&#x2F;KJbsCOr" rel="nofollow">https:&#x2F;&#x2F;imgur.com&#x2F;a&#x2F;KJbsCOr</a> 
Remove the aside bar, remove the 25vw padding on the left, increase font size to 2em and remove the margin 0 8% 2%. Increase your line-height to 2.0 which I havent done in my image</div><br/></div></div></div></div></div></div></div></body></html>