<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1707210060341" as="style"/><link rel="stylesheet" href="styles.css?v=1707210060341"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/cfahlgren1/natural-sql">Show HN: Natural-SQL-7B, a strong text-to-SQL model</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>thecalebf</span> | <span>158 comments</span></div><br/><div><div id="39262450" class="c"><input type="checkbox" id="c-39262450" checked=""/><div class="controls bullet"><span class="by">rgbrgb</span><span>|</span><a href="#39266224">next</a><span>|</span><label class="collapse" for="c-39262450">[-]</label><label class="expand" for="c-39262450">[91 more]</label></div><br/><div class="children"><div class="content">So it looks like it scores 76.5% on SQL-Eval [0], a bit behind GPT-4 at 83% and sqlcoder-15b at 78%.<p>What kind of applications would this be useful for? What can you build with an AI  data science intern that&#x27;s right 75% of the time?<p>As a programmer who always has to look stuff up when I SQL, I could definitely see asking something like this for a first draft of a query but it seems like I&#x27;m slightly better off asking the bigger models in these one-off cases (and I can run a 15b easily on my 64GB m1). If I&#x27;m in a corporate setting I&#x27;m not going to leak my schema into OpenAI&#x27;s training data and there are definitely times when I&#x27;d want to run queries offline. Small&#x2F;local models are great when you want to do a ton of queries (save $$).<p>A mini data scientist that could be queried by non-technical folks would be awesome but I wonder if there&#x27;s a way to determine whether the query is falling in the 25% &quot;incorrect&quot; case... maybe there&#x27;s a RAID-like consensus algorithm where you have multiple interrogate each other&#x27;s answers to get a higher overall success rate.<p>Mostly thinking out loud :) but maybe ya&#x27;ll have more ideas. Congrats on the release, OP!<p>[0]: <a href="https:&#x2F;&#x2F;github.com&#x2F;defog-ai&#x2F;sql-eval">https:&#x2F;&#x2F;github.com&#x2F;defog-ai&#x2F;sql-eval</a></div><br/><div id="39262921" class="c"><input type="checkbox" id="c-39262921" checked=""/><div class="controls bullet"><span class="by">fifilura</span><span>|</span><a href="#39262450">parent</a><span>|</span><a href="#39265782">next</a><span>|</span><label class="collapse" for="c-39262921">[-]</label><label class="expand" for="c-39262921">[55 more]</label></div><br/><div class="children"><div class="content">1. If you are a a programmer I think you should learn SQL. It will give you a different perspective on programming that I think is invaluable. (I.e. programming without for loops)<p>2. Combining and slicing data is a craft, and doing it subtly wrong in one step can lead to fatal errors in the outcome.<p>And most importantly, it can be very difficult to notice. Numbers don&#x27;t smell.<p>That is why I would be very hesitant to give a slightly more than trivial task to an engine that fails 25% of the time.<p>But I guess that is the same as any other programming task. Just that other programming tasks require a lot of boilerplate where an AI can help. SQL is much more straight to it.<p>Maybe it could be useful to ask questions that are similar to writing testcases &quot;how can I verify that my query is doing the right thing&quot;?</div><br/><div id="39264327" class="c"><input type="checkbox" id="c-39264327" checked=""/><div class="controls bullet"><span class="by">brightball</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39262921">parent</a><span>|</span><a href="#39263145">next</a><span>|</span><label class="collapse" for="c-39264327">[-]</label><label class="expand" for="c-39264327">[14 more]</label></div><br/><div class="children"><div class="content">I’ve been working in this industry professionally for close to 25 years now. By far the most valuable and useful language I have learned is SQL.</div><br/><div id="39267743" class="c"><input type="checkbox" id="c-39267743" checked=""/><div class="controls bullet"><span class="by">panarky</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39264327">parent</a><span>|</span><a href="#39268302">next</a><span>|</span><label class="collapse" for="c-39267743">[-]</label><label class="expand" for="c-39267743">[1 more]</label></div><br/><div class="children"><div class="content"><i>&gt; the most valuable and useful language ...</i><p>Programmers think the most valuable language is a programming language. Therefore, an LLM that can generate quality code in that language should also be extremely valuable.<p>I&#x27;d argue that the most valuable language is the natural language of the organization you&#x27;re writing code for.<p>That language is vague and ambiguous, and encapsulates many hidden assumptions about how that organization works.<p>For example, if the organization is a retailer or a wholesaler, you might ask the LLM to generate SQL to return last month&#x27;s sales and inventory for each site and product category.<p>The LLM can query the database system tables and guess which tables have sales transactions and inventory transactions. The LLM can look at foreign key definitions to make a good guess how to join these tables with metadata about items, sites, categories and the calendar.<p>But will the LLM know that inventory is a stock, and sales is a flow? Will it know it should sum the sales transactions but average the inventory balances, or take just the beginning or ending inventory balance?<p>Many human engineers struggle to translate ambiguous requests in natural language into code which reflects the assumptions and mechanics of the organization.<p>An LLM that generates consistently useful code needs a world model of how things work, not just how to write code.</div><br/></div></div><div id="39268302" class="c"><input type="checkbox" id="c-39268302" checked=""/><div class="controls bullet"><span class="by">miohtama</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39264327">parent</a><span>|</span><a href="#39267743">prev</a><span>|</span><a href="#39267491">next</a><span>|</span><label class="collapse" for="c-39268302">[-]</label><label class="expand" for="c-39268302">[6 more]</label></div><br/><div class="children"><div class="content">I have been working in this industry for 30 years now. SQL is one of the most ugliest programming language I have ever working with. Like Perl, it&#x27;s write once, hope you never need to read, language.<p>SQL was created in 60s. It has not really kept up with the pace of modern programming language ergonomics. It was made for a single person executing a batch job query pulling data from the database.<p>On the other hand, I kind of agree SQL is good to learn. It&#x27;s an counter example on how not to design a programming language.</div><br/><div id="39269596" class="c"><input type="checkbox" id="c-39269596" checked=""/><div class="controls bullet"><span class="by">tomnipotent</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39268302">parent</a><span>|</span><a href="#39268666">next</a><span>|</span><label class="collapse" for="c-39269596">[-]</label><label class="expand" for="c-39269596">[1 more]</label></div><br/><div class="children"><div class="content">&gt; SQL was created in 60s<p>The IBM System R and SEQUEL paper was 1974, while Oracle 2 was the first commercial database which added it in 1979.</div><br/></div></div><div id="39268666" class="c"><input type="checkbox" id="c-39268666" checked=""/><div class="controls bullet"><span class="by">HideousKojima</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39268302">parent</a><span>|</span><a href="#39269596">prev</a><span>|</span><a href="#39267491">next</a><span>|</span><label class="collapse" for="c-39268666">[-]</label><label class="expand" for="c-39268666">[4 more]</label></div><br/><div class="children"><div class="content">There are preprocessors like PRQL that help with some (far from all) of the pain points of SQL as a language</div><br/><div id="39268952" class="c"><input type="checkbox" id="c-39268952" checked=""/><div class="controls bullet"><span class="by">miohtama</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39268666">parent</a><span>|</span><a href="#39267491">next</a><span>|</span><label class="collapse" for="c-39268952">[-]</label><label class="expand" for="c-39268952">[3 more]</label></div><br/><div class="children"><div class="content">Hopefully we get over the fact that we still need to transpile something to the ugly SQL and databases themselves start to speak a better language.<p>Despite all the hate MongoDb deserves, it solved the problem how application developers can easily get data in and out of a database.</div><br/><div id="39269091" class="c"><input type="checkbox" id="c-39269091" checked=""/><div class="controls bullet"><span class="by">munk-a</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39268952">parent</a><span>|</span><a href="#39271608">next</a><span>|</span><label class="collapse" for="c-39269091">[-]</label><label class="expand" for="c-39269091">[1 more]</label></div><br/><div class="children"><div class="content">There are certainly valid syntatical criticisms you can have of SQL[1] but on the whole SQL is expressive and rather concise while being solid enough to remain the default expression language of choice for fifty years.<p>1. The order of the phrases, the lack of trailing commas, the fact that an awful organization controls the standards and gatekeeps them to a bizarre extent.</div><br/></div></div><div id="39271608" class="c"><input type="checkbox" id="c-39271608" checked=""/><div class="controls bullet"><span class="by">ako</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39268952">parent</a><span>|</span><a href="#39269091">prev</a><span>|</span><a href="#39267491">next</a><span>|</span><label class="collapse" for="c-39271608">[-]</label><label class="expand" for="c-39271608">[1 more]</label></div><br/><div class="children"><div class="content">Seriously? I just had a Quick Look at the mongodb docs, but when I see that I’m glad to use SQL. All the brackets and dollar prefixed expressions make mongodb queries hard to read.</div><br/></div></div></div></div></div></div></div></div><div id="39267491" class="c"><input type="checkbox" id="c-39267491" checked=""/><div class="controls bullet"><span class="by">threeseed</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39264327">parent</a><span>|</span><a href="#39268302">prev</a><span>|</span><a href="#39267379">next</a><span>|</span><label class="collapse" for="c-39267491">[-]</label><label class="expand" for="c-39267491">[4 more]</label></div><br/><div class="children"><div class="content">I actually work in the Data&#x2F;AI space and SQL has been of limited use to me.<p>Whilst Snowflake is pretty popular the days of elaborately modelled EDWs are long gone.<p>And so typically I find I am doing queries, transformations etc in some abstraction layer e.g. Spark on a data lake, ORM for web applications etc.</div><br/><div id="39269632" class="c"><input type="checkbox" id="c-39269632" checked=""/><div class="controls bullet"><span class="by">tomnipotent</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39267491">parent</a><span>|</span><a href="#39267379">next</a><span>|</span><label class="collapse" for="c-39269632">[-]</label><label class="expand" for="c-39269632">[3 more]</label></div><br/><div class="children"><div class="content">&gt; the days of elaborately modelled EDWs are long gone<p>They&#x27;re more prevalent than ever in my experience. Consider the popularity of dbt.</div><br/><div id="39270329" class="c"><input type="checkbox" id="c-39270329" checked=""/><div class="controls bullet"><span class="by">hobs</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39269632">parent</a><span>|</span><a href="#39267379">next</a><span>|</span><label class="collapse" for="c-39270329">[-]</label><label class="expand" for="c-39270329">[2 more]</label></div><br/><div class="children"><div class="content">dbt is not elaborately modeled at all, it eschews all the up front work of data modeling with ... well basically a lot of code and poorly maintained balls of mud.<p>Don&#x27;t forget the models other&#x27;s create for you - often hilariously slow code to present a set of facets that often barely align with your business delivery needs; and don&#x27;t forget to sync it even more slowly with Fivetran, the DE platform of the future!</div><br/><div id="39270615" class="c"><input type="checkbox" id="c-39270615" checked=""/><div class="controls bullet"><span class="by">tomnipotent</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39270329">parent</a><span>|</span><a href="#39267379">next</a><span>|</span><label class="collapse" for="c-39270615">[-]</label><label class="expand" for="c-39270615">[1 more]</label></div><br/><div class="children"><div class="content">&gt; dbt is not elaborately modeled at all<p>This doesn&#x27;t make any sense, or I&#x27;m guessing you&#x27;ve never actually used it. Modeling is something you can do with dbt, not what dbt does (or is, or can be?). I&#x27;ve used it to create data marts and EDW&#x27;s with hundreds of tables, no differently than I would have created a decade ago with other tools.</div><br/></div></div></div></div></div></div></div></div><div id="39267379" class="c"><input type="checkbox" id="c-39267379" checked=""/><div class="controls bullet"><span class="by">pavlov</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39264327">parent</a><span>|</span><a href="#39267491">prev</a><span>|</span><a href="#39263145">next</a><span>|</span><label class="collapse" for="c-39267379">[-]</label><label class="expand" for="c-39267379">[2 more]</label></div><br/><div class="children"><div class="content">As a counterpoint, I’ve also worked in this industry for 25 years, and SQL has had no relevance to my career. I write it very occasionally, and if I didn’t, it wouldn’t make any difference.<p>The C for loop on the other hand…</div><br/><div id="39268318" class="c"><input type="checkbox" id="c-39268318" checked=""/><div class="controls bullet"><span class="by">fifilura</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39267379">parent</a><span>|</span><a href="#39263145">next</a><span>|</span><label class="collapse" for="c-39268318">[-]</label><label class="expand" for="c-39268318">[1 more]</label></div><br/><div class="children"><div class="content">I am happy for you, you seem to have reached your local optimum!</div><br/></div></div></div></div></div></div><div id="39263145" class="c"><input type="checkbox" id="c-39263145" checked=""/><div class="controls bullet"><span class="by">gavinray</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39262921">parent</a><span>|</span><a href="#39264327">prev</a><span>|</span><a href="#39263184">next</a><span>|</span><label class="collapse" for="c-39263145">[-]</label><label class="expand" for="c-39263145">[23 more]</label></div><br/><div class="children"><div class="content">What makes you think that SQL doesn&#x27;t have &quot;for loops&quot;?<p>Ever heard of LATERAL joins&#x2F;CROSS APPLY?<p><pre><code>  SELECT loop.value, x.squared
  FROM generate_series(1,5) AS loop(value)
  CROSS JOIN LATERAL (SELECT loop.value * loop.value AS squared) AS x;</code></pre></div><br/><div id="39265812" class="c"><input type="checkbox" id="c-39265812" checked=""/><div class="controls bullet"><span class="by">beefield</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39263145">parent</a><span>|</span><a href="#39263310">next</a><span>|</span><label class="collapse" for="c-39265812">[-]</label><label class="expand" for="c-39265812">[4 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t think that the point was that there are no for loops in SQL. I think the point was that <i>almost</i> always using for loops is wrong and super inefficient and there is a much more efficient way to just use joins instead.</div><br/><div id="39269251" class="c"><input type="checkbox" id="c-39269251" checked=""/><div class="controls bullet"><span class="by">fijiaarone</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39265812">parent</a><span>|</span><a href="#39263310">next</a><span>|</span><label class="collapse" for="c-39269251">[-]</label><label class="expand" for="c-39269251">[3 more]</label></div><br/><div class="children"><div class="content">I wonder if anyone realizes that selects and joins in every database are implemented literally with for loops written in c.<p>The reason people use a relational database is because it has loops that are faster, safer, and more efficient than anything you can write.</div><br/><div id="39271550" class="c"><input type="checkbox" id="c-39271550" checked=""/><div class="controls bullet"><span class="by">fifilura</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39269251">parent</a><span>|</span><a href="#39271647">next</a><span>|</span><label class="collapse" for="c-39271550">[-]</label><label class="expand" for="c-39271550">[1 more]</label></div><br/><div class="children"><div class="content">What does it matter? Yeah, at the very bottom of it all there will be a loop. I wouldn&#x27;t attribute that to C but to the von Neumann architecture.<p>The point is that by getting rid of loops you remove one way of telling the computer &quot;How&quot; to do it. Start here, do it in this order, combine the data this way.<p>When &quot;How&quot; is a solved problem, it is a waste of your brain to think about that again. &quot;What&quot; is a better use of your brain cycles.</div><br/></div></div><div id="39271647" class="c"><input type="checkbox" id="c-39271647" checked=""/><div class="controls bullet"><span class="by">ako</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39269251">parent</a><span>|</span><a href="#39271550">prev</a><span>|</span><a href="#39263310">next</a><span>|</span><label class="collapse" for="c-39271647">[-]</label><label class="expand" for="c-39271647">[1 more]</label></div><br/><div class="children"><div class="content">Exactly, SQL is like a very specific natural language used to tell a database what data you need. The database contains AI (the query optimizer) that will use statistics to determine the fastest way to retrieve the data requested. Depending on your query and the data you have the fastest way to get your data will change. It’s hard to manually write this yourself.</div><br/></div></div></div></div></div></div><div id="39263310" class="c"><input type="checkbox" id="c-39263310" checked=""/><div class="controls bullet"><span class="by">fifilura</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39263145">parent</a><span>|</span><a href="#39265812">prev</a><span>|</span><a href="#39264360">next</a><span>|</span><label class="collapse" for="c-39263310">[-]</label><label class="expand" for="c-39263310">[1 more]</label></div><br/><div class="children"><div class="content">This is not what I call a for loop but more akin to a list comprehension.<p>And this is the point I was trying to make.<p>Instead of start with the &quot;how&quot;, learn to do the &quot;what&quot;.</div><br/></div></div><div id="39264360" class="c"><input type="checkbox" id="c-39264360" checked=""/><div class="controls bullet"><span class="by">3rd3</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39263145">parent</a><span>|</span><a href="#39263310">prev</a><span>|</span><a href="#39265904">next</a><span>|</span><label class="collapse" for="c-39264360">[-]</label><label class="expand" for="c-39264360">[6 more]</label></div><br/><div class="children"><div class="content">What is the point of the cross join? This would work as well:<p><pre><code>   SELECT loop.value, loop.value * loop.value
   FROM generate_series(1,5) AS loop(value)</code></pre></div><br/><div id="39265926" class="c"><input type="checkbox" id="c-39265926" checked=""/><div class="controls bullet"><span class="by">ComputerGuru</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39264360">parent</a><span>|</span><a href="#39265904">next</a><span>|</span><label class="collapse" for="c-39265926">[-]</label><label class="expand" for="c-39265926">[5 more]</label></div><br/><div class="children"><div class="content">For this example, nothing. It would be useful where neither of the two SELECT queries is a subset&#x2F;superset of the other. (Not saying you didn&#x27;t know that.)</div><br/><div id="39266026" class="c"><input type="checkbox" id="c-39266026" checked=""/><div class="controls bullet"><span class="by">3rd3</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39265926">parent</a><span>|</span><a href="#39265904">next</a><span>|</span><label class="collapse" for="c-39266026">[-]</label><label class="expand" for="c-39266026">[4 more]</label></div><br/><div class="children"><div class="content">Could you give an example?</div><br/><div id="39266464" class="c"><input type="checkbox" id="c-39266464" checked=""/><div class="controls bullet"><span class="by">ako</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39266026">parent</a><span>|</span><a href="#39265904">next</a><span>|</span><label class="collapse" for="c-39266464">[-]</label><label class="expand" for="c-39266464">[3 more]</label></div><br/><div class="children"><div class="content">This will be useful if you have a table with some related history records, e.g., products with product price history, and you want to get the latest price. The lateral join would get all prices for the current product, sort them by date and then pick the top row.</div><br/><div id="39270113" class="c"><input type="checkbox" id="c-39270113" checked=""/><div class="controls bullet"><span class="by">ses1984</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39266464">parent</a><span>|</span><a href="#39266790">next</a><span>|</span><label class="collapse" for="c-39270113">[-]</label><label class="expand" for="c-39270113">[1 more]</label></div><br/><div class="children"><div class="content">Is a lateral join more efficient than just saying where product = current sort by date desc ?</div><br/></div></div><div id="39266790" class="c"><input type="checkbox" id="c-39266790" checked=""/><div class="controls bullet"><span class="by">3rd3</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39266464">parent</a><span>|</span><a href="#39270113">prev</a><span>|</span><a href="#39265904">next</a><span>|</span><label class="collapse" for="c-39266790">[-]</label><label class="expand" for="c-39266790">[1 more]</label></div><br/><div class="children"><div class="content">How does a lateral (cross) join compare to a window function in your example?</div><br/></div></div></div></div></div></div></div></div></div></div><div id="39265904" class="c"><input type="checkbox" id="c-39265904" checked=""/><div class="controls bullet"><span class="by">ComputerGuru</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39263145">parent</a><span>|</span><a href="#39264360">prev</a><span>|</span><a href="#39263201">next</a><span>|</span><label class="collapse" for="c-39265904">[-]</label><label class="expand" for="c-39265904">[3 more]</label></div><br/><div class="children"><div class="content">LATERAL first available in PostgreSQL 9.3 (2013), but still not available in SQLite.</div><br/><div id="39265998" class="c"><input type="checkbox" id="c-39265998" checked=""/><div class="controls bullet"><span class="by">fifilura</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39265904">parent</a><span>|</span><a href="#39263201">next</a><span>|</span><label class="collapse" for="c-39265998">[-]</label><label class="expand" for="c-39265998">[2 more]</label></div><br/><div class="children"><div class="content">SQLite has RECURSIVE, so you can generate a table with all numbers using something like:<p>WITH RECURSIVE
  cnt(x) AS (
     SELECT 1
     UNION ALL
     SELECT x+1 FROM cnt
      LIMIT 5
  )
SELECT x FROM cnt;<p>And then do a regular CROSS JOIN on that table.</div><br/><div id="39266278" class="c"><input type="checkbox" id="c-39266278" checked=""/><div class="controls bullet"><span class="by">ComputerGuru</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39265998">parent</a><span>|</span><a href="#39263201">next</a><span>|</span><label class="collapse" for="c-39266278">[-]</label><label class="expand" for="c-39266278">[1 more]</label></div><br/><div class="children"><div class="content">But generating a table with all numbers was just a throwaway example of the LATERAL JOIN syntax&#x2F;use, and (hopefully) not what you&#x27;d actually use it for in the real world.<p>It&#x27;s not clear to me that (mathematically) a lateral join can be reduced to a recursive cte (and if the performance of a recursive cte would be acceptable for the cases where it does work as a substitute).</div><br/></div></div></div></div></div></div><div id="39263201" class="c"><input type="checkbox" id="c-39263201" checked=""/><div class="controls bullet"><span class="by">neuronexmachina</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39263145">parent</a><span>|</span><a href="#39265904">prev</a><span>|</span><a href="#39263184">next</a><span>|</span><label class="collapse" for="c-39263201">[-]</label><label class="expand" for="c-39263201">[8 more]</label></div><br/><div class="children"><div class="content">TIL</div><br/><div id="39263305" class="c"><input type="checkbox" id="c-39263305" checked=""/><div class="controls bullet"><span class="by">gavinray</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39263201">parent</a><span>|</span><a href="#39263184">next</a><span>|</span><label class="collapse" for="c-39263305">[-]</label><label class="expand" for="c-39263305">[7 more]</label></div><br/><div class="children"><div class="content">They&#x27;re incredibly useful -- any time that you want to both:<p>- Reference data from the previous part of the query (the &quot;left-hand side&quot;)<p>- Return multiple columns<p>The only way you can achieve it is with LATERAL&#x2F;CROSS APPLY.<p>Regular correlated subqueries can only return a single column, so something like this doesn&#x27;t work:<p><pre><code>  SELECT
    loop.val, (SELECT loop.val * loop.val, &#x27;second column&#x27;) AS squared
  FROM
    (SELECT loop.val FROM generate_series(1,5) AS loop(val)) as loop
</code></pre>
You&#x27;d get:<p><pre><code>   error: subquery must return only one column</code></pre></div><br/><div id="39263445" class="c"><input type="checkbox" id="c-39263445" checked=""/><div class="controls bullet"><span class="by">ttfkam</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39263305">parent</a><span>|</span><a href="#39263455">next</a><span>|</span><label class="collapse" for="c-39263445">[-]</label><label class="expand" for="c-39263445">[5 more]</label></div><br/><div class="children"><div class="content">I love LATERALs, but this still fits within set theory and a bulk application rather than an iterative for-loop. It may even be implemented as a for-loop within the engine, but SQL being declarative abstracts that away from the query interface.<p>It&#x27;s sets all the way down. A set of f(x) is still a set.</div><br/><div id="39263559" class="c"><input type="checkbox" id="c-39263559" checked=""/><div class="controls bullet"><span class="by">gavinray</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39263445">parent</a><span>|</span><a href="#39263455">next</a><span>|</span><label class="collapse" for="c-39263559">[-]</label><label class="expand" for="c-39263559">[4 more]</label></div><br/><div class="children"><div class="content">Lets get even more cursed then:<p><pre><code>    CREATE TEMP TABLE temp_results(value int, value_squared int);

    DO $$
    DECLARE
        r int;
    BEGIN
        FOR r IN SELECT generate_series FROM generate_series(1,5)
        LOOP
            INSERT INTO temp_results VALUES (r, r * r);
        END LOOP;
    END$$;

    SELECT * FROM temp_results;</code></pre></div><br/><div id="39263805" class="c"><input type="checkbox" id="c-39263805" checked=""/><div class="controls bullet"><span class="by">fifilura</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39263559">parent</a><span>|</span><a href="#39266361">next</a><span>|</span><label class="collapse" for="c-39263805">[-]</label><label class="expand" for="c-39263805">[2 more]</label></div><br/><div class="children"><div class="content">Uw you win, I guess. Already started to think what I would write in that code review comment ;)</div><br/><div id="39266452" class="c"><input type="checkbox" id="c-39266452" checked=""/><div class="controls bullet"><span class="by">koolba</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39263805">parent</a><span>|</span><a href="#39266361">next</a><span>|</span><label class="collapse" for="c-39266452">[-]</label><label class="expand" for="c-39266452">[1 more]</label></div><br/><div class="children"><div class="content">At the very least mention that re-running the SELECT in the same connection would include the prior results as well because they are preserved across commands within the same connection.</div><br/></div></div></div></div><div id="39266361" class="c"><input type="checkbox" id="c-39266361" checked=""/><div class="controls bullet"><span class="by">ttfkam</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39263559">parent</a><span>|</span><a href="#39263805">prev</a><span>|</span><a href="#39263455">next</a><span>|</span><label class="collapse" for="c-39266361">[-]</label><label class="expand" for="c-39266361">[1 more]</label></div><br/><div class="children"><div class="content">Ha! plpgsql&#x27;s seemingly sole purpose is to inject imperative code into a set-based environment. Probably does it more smoothly than most pl languages, but that&#x27;s at the cost of imperative clarity.<p>But you&#x27;re right. Postgres does allow for-loops like this. (They&#x27;re also slower than the equivalent set-oriented approach.)</div><br/></div></div></div></div></div></div><div id="39263455" class="c"><input type="checkbox" id="c-39263455" checked=""/><div class="controls bullet"><span class="by">samstave</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39263305">parent</a><span>|</span><a href="#39263445">prev</a><span>|</span><a href="#39263184">next</a><span>|</span><label class="collapse" for="c-39263455">[-]</label><label class="expand" for="c-39263455">[1 more]</label></div><br/><div class="children"><div class="content">If anyone is interested, I had gpt explain this SQL to me - and it was really helpful, as I couldnt parse that with my level of SQL...<p><a href="https:&#x2F;&#x2F;chat.openai.com&#x2F;share&#x2F;931b1778-6393-4e86-94b4-b3b5a594917e" rel="nofollow">https:&#x2F;&#x2F;chat.openai.com&#x2F;share&#x2F;931b1778-6393-4e86-94b4-b3b5a5...</a></div><br/></div></div></div></div></div></div></div></div><div id="39263184" class="c"><input type="checkbox" id="c-39263184" checked=""/><div class="controls bullet"><span class="by">rgbrgb</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39262921">parent</a><span>|</span><a href="#39263145">prev</a><span>|</span><a href="#39268704">next</a><span>|</span><label class="collapse" for="c-39263184">[-]</label><label class="expand" for="c-39263184">[1 more]</label></div><br/><div class="children"><div class="content">everyone (not just programmers) should learn SQL, and I have many times! For me, programming languages are pretty different from bikes in that I have very little &quot;muscle memory&quot; for syntax when staring at a blank page, especially when the bikes I ride more often feel totally different. Having my intern instantly write an almost correct draft of a function&#x2F;query helps a lot.<p>&gt; Maybe it could be useful to ask questions that are similar to writing testcases &quot;how can I verify that my query is doing the right thing&quot;?<p>that seems like a good thread to pull on!</div><br/></div></div><div id="39268704" class="c"><input type="checkbox" id="c-39268704" checked=""/><div class="controls bullet"><span class="by">aussieguy1234</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39262921">parent</a><span>|</span><a href="#39263184">prev</a><span>|</span><a href="#39263686">next</a><span>|</span><label class="collapse" for="c-39268704">[-]</label><label class="expand" for="c-39268704">[3 more]</label></div><br/><div class="children"><div class="content">For those people who would rather use an ORM, its worth mentioning that ORMs write very bad, un-performant SQL under the hood.<p>They may save you a bit of time initially but when your company gets bigger, the ORMs will become a bottleneck.</div><br/><div id="39269027" class="c"><input type="checkbox" id="c-39269027" checked=""/><div class="controls bullet"><span class="by">abhibeckert</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39268704">parent</a><span>|</span><a href="#39263686">next</a><span>|</span><label class="collapse" for="c-39269027">[-]</label><label class="expand" for="c-39269027">[2 more]</label></div><br/><div class="children"><div class="content">&quot;Bad&quot; and &quot;un-performant&quot; are relative terms and as your company gets bigger, you&#x27;re increasingly more and more likely to have colleagues who write even worse queries than an ORM would.<p>For example I&#x27;ve encountered queries that are not only slow, but they generate several hundred megabytes of output all of which is sent to the user&#x27;s web browser where JavaScript selects the relevant two kilobytes of data to show the user.<p>The worst I&#x27;ve ever seen was a system where <i>every single write</i> to the database would be sent to every single web browser viewing certain webpages. 99.999999% of the writes were completely irrelevant and javascript in the browser would simply disregard them. The server load was immense... and eventually our Sysadmin brought it to someone&#x27;s attention. Where we found out it was leaking sensitive data.</div><br/><div id="39269975" class="c"><input type="checkbox" id="c-39269975" checked=""/><div class="controls bullet"><span class="by">aussieguy1234</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39269027">parent</a><span>|</span><a href="#39263686">next</a><span>|</span><label class="collapse" for="c-39269975">[-]</label><label class="expand" for="c-39269975">[1 more]</label></div><br/><div class="children"><div class="content">I guess once you get to a certain point, you need to hire engineers that have strong SQL skills in order to scale.</div><br/></div></div></div></div></div></div><div id="39263686" class="c"><input type="checkbox" id="c-39263686" checked=""/><div class="controls bullet"><span class="by">calvinmorrison</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39262921">parent</a><span>|</span><a href="#39268704">prev</a><span>|</span><a href="#39265782">next</a><span>|</span><label class="collapse" for="c-39263686">[-]</label><label class="expand" for="c-39263686">[13 more]</label></div><br/><div class="children"><div class="content">Honestly I would rather write stuff in code thats inefficient than deal with one more stored procedure. Its like a black box</div><br/><div id="39263908" class="c"><input type="checkbox" id="c-39263908" checked=""/><div class="controls bullet"><span class="by">fifilura</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39263686">parent</a><span>|</span><a href="#39264635">next</a><span>|</span><label class="collapse" for="c-39263908">[-]</label><label class="expand" for="c-39263908">[9 more]</label></div><br/><div class="children"><div class="content">Just that deeply inside that forest of functions you just wrote is the inner join that the SQL query would do in a couple of lines of code embedded.</div><br/><div id="39265186" class="c"><input type="checkbox" id="c-39265186" checked=""/><div class="controls bullet"><span class="by">calvinmorrison</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39263908">parent</a><span>|</span><a href="#39264635">next</a><span>|</span><label class="collapse" for="c-39265186">[-]</label><label class="expand" for="c-39265186">[8 more]</label></div><br/><div class="children"><div class="content">more like, when it comes to complex data structures and logic, i will do that outside of sql. I&#x27;ll do a join with sql no problem, by the time we&#x27;re doing multiple inner joins I usually prefer to just do multiple sql queries. I don&#x27;t care about performance that badly.</div><br/><div id="39266590" class="c"><input type="checkbox" id="c-39266590" checked=""/><div class="controls bullet"><span class="by">ako</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39265186">parent</a><span>|</span><a href="#39265859">next</a><span>|</span><label class="collapse" for="c-39266590">[-]</label><label class="expand" for="c-39266590">[6 more]</label></div><br/><div class="children"><div class="content">That’ll often not scale to millions of records. Letting the database optimizer find the optimal execution path instead of doing it procedurally elsewhere might result in “finishes in 5 minutes”, versus “doesn’t fit in a night”.</div><br/><div id="39267643" class="c"><input type="checkbox" id="c-39267643" checked=""/><div class="controls bullet"><span class="by">threeseed</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39266590">parent</a><span>|</span><a href="#39265859">next</a><span>|</span><label class="collapse" for="c-39267643">[-]</label><label class="expand" for="c-39267643">[5 more]</label></div><br/><div class="children"><div class="content">This isn’t the 90s. Most hardware is way over-specced for the data sizes most people are dealing with.<p>The number of use cases which are too heavy to finish in hours but small enough to fit in a single instance is pretty limited.</div><br/><div id="39271574" class="c"><input type="checkbox" id="c-39271574" checked=""/><div class="controls bullet"><span class="by">ako</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39267643">parent</a><span>|</span><a href="#39267907">next</a><span>|</span><label class="collapse" for="c-39271574">[-]</label><label class="expand" for="c-39271574">[1 more]</label></div><br/><div class="children"><div class="content">Costs are another reason to optimize queries, long running, inefficient queries will be a lot more expensive on things like snowflake than more efficient queries.</div><br/></div></div><div id="39267907" class="c"><input type="checkbox" id="c-39267907" checked=""/><div class="controls bullet"><span class="by">fifilura</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39267643">parent</a><span>|</span><a href="#39271574">prev</a><span>|</span><a href="#39265859">next</a><span>|</span><label class="collapse" for="c-39267907">[-]</label><label class="expand" for="c-39267907">[3 more]</label></div><br/><div class="children"><div class="content">SQL is popular because it can be run on a map&#x2F;reduce backend. So once you have written your code it can run on any number of machines.</div><br/><div id="39268231" class="c"><input type="checkbox" id="c-39268231" checked=""/><div class="controls bullet"><span class="by">threeseed</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39267907">parent</a><span>|</span><a href="#39265859">next</a><span>|</span><label class="collapse" for="c-39268231">[-]</label><label class="expand" for="c-39268231">[2 more]</label></div><br/><div class="children"><div class="content">a) SQL is not that popular on map&#x2F;reduce backends. Most people are doing it in code.<p>b) Only basic SQL works on any database and even then there are major differences in how they treat things like nulls, type coercion etc.</div><br/><div id="39271169" class="c"><input type="checkbox" id="c-39271169" checked=""/><div class="controls bullet"><span class="by">fifilura</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39268231">parent</a><span>|</span><a href="#39265859">next</a><span>|</span><label class="collapse" for="c-39271169">[-]</label><label class="expand" for="c-39271169">[1 more]</label></div><br/><div class="children"><div class="content">BigQuery? Athena&#x2F;Redshift?</div><br/></div></div></div></div></div></div></div></div></div></div><div id="39265859" class="c"><input type="checkbox" id="c-39265859" checked=""/><div class="controls bullet"><span class="by">fifilura</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39265186">parent</a><span>|</span><a href="#39266590">prev</a><span>|</span><a href="#39264635">next</a><span>|</span><label class="collapse" for="c-39265859">[-]</label><label class="expand" for="c-39265859">[1 more]</label></div><br/><div class="children"><div class="content">I usually only do one join at a time. But I separate them with CTEs (&quot;WITH&quot;). I can agree that many joins at once can make you grow grey hair.</div><br/></div></div></div></div></div></div><div id="39264635" class="c"><input type="checkbox" id="c-39264635" checked=""/><div class="controls bullet"><span class="by">ako</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39263686">parent</a><span>|</span><a href="#39263908">prev</a><span>|</span><a href="#39265782">next</a><span>|</span><label class="collapse" for="c-39264635">[-]</label><label class="expand" for="c-39264635">[3 more]</label></div><br/><div class="children"><div class="content">That will be interesting soon when 80% of your code will be ai-generated black boxes…</div><br/><div id="39272043" class="c"><input type="checkbox" id="c-39272043" checked=""/><div class="controls bullet"><span class="by">ako</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39264635">parent</a><span>|</span><a href="#39265174">next</a><span>|</span><label class="collapse" for="c-39272043">[-]</label><label class="expand" for="c-39272043">[1 more]</label></div><br/><div class="children"><div class="content">Also good to note that unlike many other forms of AI, the SQL query optimizer AI is not a black box. It will tell you exactly how it thinks your data can be retrieved in the fastest way if you ask it to explain its plan for your query.</div><br/></div></div><div id="39265174" class="c"><input type="checkbox" id="c-39265174" checked=""/><div class="controls bullet"><span class="by">brian_reardon</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39264635">parent</a><span>|</span><a href="#39272043">prev</a><span>|</span><a href="#39265782">next</a><span>|</span><label class="collapse" for="c-39265174">[-]</label><label class="expand" for="c-39265174">[1 more]</label></div><br/><div class="children"><div class="content">Ian Malcom gif</div><br/></div></div></div></div></div></div></div></div><div id="39265782" class="c"><input type="checkbox" id="c-39265782" checked=""/><div class="controls bullet"><span class="by">beefield</span><span>|</span><a href="#39262450">parent</a><span>|</span><a href="#39262921">prev</a><span>|</span><a href="#39263822">next</a><span>|</span><label class="collapse" for="c-39265782">[-]</label><label class="expand" for="c-39265782">[1 more]</label></div><br/><div class="children"><div class="content">&gt; What kind of applications would this be useful for? What can you build with an AI data science intern that&#x27;s right 75% of the time?<p>I have written a bunch of more or less complicated SQL during my career. And I am pretty sure that if I need to write a SQL statement that&#x27;s anything but select * from table, my output won&#x27;t work 75% of time.<p>I may be special case, but typically if I work on a hard problem, it is not a single hard problem but a sh*tload of connected simple problems. If I can get someone to solve the simple problems 75% of the time correctly so that I can spend my time figuring out how those simple problems are to be connected, I&#x27;m ore than happy. And that&#x27;s exactly how I use chatgpt. I have learned not to ask too complex questions from it. But the simple ones, it mostly aces and when it does not , they are easy to spot, as it is not that I could not have solved them myself, I just did not want to spend time for that. Now, if only the chatgpt was  not almost as lazy as me to produce long simple stuff, that would be awesome.</div><br/></div></div><div id="39263822" class="c"><input type="checkbox" id="c-39263822" checked=""/><div class="controls bullet"><span class="by">internet101010</span><span>|</span><a href="#39262450">parent</a><span>|</span><a href="#39265782">prev</a><span>|</span><a href="#39263371">next</a><span>|</span><label class="collapse" for="c-39263822">[-]</label><label class="expand" for="c-39263822">[3 more]</label></div><br/><div class="children"><div class="content">&gt; What kind of applications would this be useful for? What can you build with an AI data science intern that&#x27;s right 75% of the time?<p>Yeah this is the issue I have with all of the SQL generation stuff. Not only should the SQL be valid, a prompt like &quot;generate a query that pulls sales for the last quarter&quot; should generate the same output for everyone without fail. Vanna&#x27;s business logic embedding is a good first step but even then it is only correct like 90% of the time with GPT-4.<p>Even then, it will only work if there are strong standards and data governance structures in place that everyone within an organization is aligned on. For example, &quot;sales&quot; can mean different things to different people and all of that needs to be buttoned up as well.</div><br/><div id="39263982" class="c"><input type="checkbox" id="c-39263982" checked=""/><div class="controls bullet"><span class="by">Closi</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39263822">parent</a><span>|</span><a href="#39264131">next</a><span>|</span><label class="collapse" for="c-39263982">[-]</label><label class="expand" for="c-39263982">[1 more]</label></div><br/><div class="children"><div class="content">As someone who works with lots of analysts, I can guarantee that they also don&#x27;t make the correct interpretations all the time, and that you have to sense-check the results back against reality.<p>In either case, validation is the key step - you can&#x27;t just trust that your SQL query is correct regardless of if you have manually written it, you still have to go through the data and check it.<p>That&#x27;s where the SQL generation stuff can save time - if 50% of the time you can get to an answer in half the time, then it&#x27;s great! Normally in my experience with current-gen LLM&#x27;s when they fail they fail quickly, so the other 50% of queries don&#x27;t take twice as long to write manually.<p>Then there is the other use case - if you aren&#x27;t sure why a particular SQL query is erroring, these LLM&#x27;s are great at telling you why and fixing your code.</div><br/></div></div><div id="39264131" class="c"><input type="checkbox" id="c-39264131" checked=""/><div class="controls bullet"><span class="by">tillvz</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39263822">parent</a><span>|</span><a href="#39263982">prev</a><span>|</span><a href="#39263371">next</a><span>|</span><label class="collapse" for="c-39264131">[-]</label><label class="expand" for="c-39264131">[1 more]</label></div><br/><div class="children"><div class="content">Having an LLM be in charge of business logic is madness.<p>There cannot be any AI involved when processing the definition of a KPI. Otherwise you&#x27;ll never be able to roll it out to thousands of users when there&#x27;s always a 90% (or even 99%) chance that the business logic might not get applied correctly.<p>Check out what we do at Veezoo (<a href="https:&#x2F;&#x2F;www.veezoo.com" rel="nofollow">https:&#x2F;&#x2F;www.veezoo.com</a>) with the Knowledge Graph &#x2F; Semantic Layer to mitigate that.</div><br/></div></div></div></div><div id="39263371" class="c"><input type="checkbox" id="c-39263371" checked=""/><div class="controls bullet"><span class="by">wg0</span><span>|</span><a href="#39262450">parent</a><span>|</span><a href="#39263822">prev</a><span>|</span><a href="#39263865">next</a><span>|</span><label class="collapse" for="c-39263371">[-]</label><label class="expand" for="c-39263371">[1 more]</label></div><br/><div class="children"><div class="content">As an end consumer, you should be well versed in SQL (or whatever subject) yourself and should proof read twice all the queries generated before you make a decision based on the data that&#x27;s pulled from the generated queries.<p>That&#x27;s the story of the LLMs in general.<p>The hype is free. Startup ecosystem are a bonus.</div><br/></div></div><div id="39263865" class="c"><input type="checkbox" id="c-39263865" checked=""/><div class="controls bullet"><span class="by">Closi</span><span>|</span><a href="#39262450">parent</a><span>|</span><a href="#39263371">prev</a><span>|</span><a href="#39265148">next</a><span>|</span><label class="collapse" for="c-39263865">[-]</label><label class="expand" for="c-39263865">[1 more]</label></div><br/><div class="children"><div class="content">&gt; What kind of applications would this be useful for? What can you build with an AI data science intern that&#x27;s right 75% of the time?<p>The kind of stuff that it is very easy to validate if it works or not :)<p>I am building a warehouse management system at the moment, and it&#x27;s great to quickly churn out lots of SQL views (particularly as the schema is changing&#x2F;evolving slightly as I am writing it, so being able to go back to GPT4 to churn through the changes to some of the &#x27;views&#x27; of my pages helps, even if it requires a little testing&#x2F;validation).</div><br/></div></div><div id="39265148" class="c"><input type="checkbox" id="c-39265148" checked=""/><div class="controls bullet"><span class="by">brian_reardon</span><span>|</span><a href="#39262450">parent</a><span>|</span><a href="#39263865">prev</a><span>|</span><a href="#39262512">next</a><span>|</span><label class="collapse" for="c-39265148">[-]</label><label class="expand" for="c-39265148">[1 more]</label></div><br/><div class="children"><div class="content">I would wonder how many of the 25% are actually dangerous to run, considering the target audience might be someone who is rusty at SQL and etc.</div><br/></div></div><div id="39262512" class="c"><input type="checkbox" id="c-39262512" checked=""/><div class="controls bullet"><span class="by">whimsicalism</span><span>|</span><a href="#39262450">parent</a><span>|</span><a href="#39265148">prev</a><span>|</span><a href="#39265674">next</a><span>|</span><label class="collapse" for="c-39262512">[-]</label><label class="expand" for="c-39262512">[22 more]</label></div><br/><div class="children"><div class="content">do you not trust the setting OAI provides to exclude your conversation from training data?</div><br/><div id="39262729" class="c"><input type="checkbox" id="c-39262729" checked=""/><div class="controls bullet"><span class="by">tempusalaria</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39262512">parent</a><span>|</span><a href="#39262767">next</a><span>|</span><label class="collapse" for="c-39262729">[-]</label><label class="expand" for="c-39262729">[15 more]</label></div><br/><div class="children"><div class="content">1) OpenAI has consistently gone back on commitments it has made<p>2) Sam Altman has a shady track record publicly, and if you believe the things people say privately he has consistently done business very dishonestly throughout his career. He is the CEO, and virtually the entire executive team are people he brought in from his network. It’s his company.<p>3) To give one example of many, OpenAI recently changed the terms of ChatGPT so that web users conversations can now be trained on (and if you want to save any chats you must opt in). Presumably this also applies to all conversations you had under the old policy despite saying they would never train on those conversations.<p>I could go on at length…</div><br/><div id="39262866" class="c"><input type="checkbox" id="c-39262866" checked=""/><div class="controls bullet"><span class="by">anonylizard</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39262729">parent</a><span>|</span><a href="#39262875">next</a><span>|</span><label class="collapse" for="c-39262866">[-]</label><label class="expand" for="c-39262866">[8 more]</label></div><br/><div class="children"><div class="content">If you don&#x27;t trust OpenAI, you can choose to trust Microsoft. Azure OpenAI is  3-months behind OpenAI that costs 3x as much, but you get more &#x27;security&#x27; and better performance.</div><br/><div id="39263431" class="c"><input type="checkbox" id="c-39263431" checked=""/><div class="controls bullet"><span class="by">tempusalaria</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39262866">parent</a><span>|</span><a href="#39263551">next</a><span>|</span><label class="collapse" for="c-39263431">[-]</label><label class="expand" for="c-39263431">[2 more]</label></div><br/><div class="children"><div class="content">Yes and I recommend that people interested in GPT-4 use this service as it’s isolated from OpenAI and it is the absolute best model right now.<p>That said, there are 3 quite worrying future possibilities, both stemming from the level of investment and commitment by Microsoft in OpenAI - a huge percentage of Azure’s value is bet on an exclusive partnership with them. That gives OpenAI a lot of leverage. And customer data is a very tempting cookie jar to build a long term moat for these companies<p>Possibility 1: someone overtakes OpenAI models and you’re stuck on Azure who won’t offer that model<p>Possibility 2: OpenAI decides to break with Microsoft and you’re stuck with a useless application. AWS Bedrock is far less likely to leave an AI application obsolete.<p>Possibility 3: OpenAI put pressure on Microsoft to loosen the data protections around the service, or go around them entirely. This is a particular  concern as the systems in the service become more complex and agentic and more difficult for Microsoft to audit. Model weights are highly opaque and Microsoft cannot trace the exact possible behaviour of these systems. What if GPT-6 changes its own weights during inference for example? How can Microsoft ever understand if that’s a true critical piece of functionality or a proxy method to access customer data etc.</div><br/><div id="39263590" class="c"><input type="checkbox" id="c-39263590" checked=""/><div class="controls bullet"><span class="by">whimsicalism</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39263431">parent</a><span>|</span><a href="#39263551">next</a><span>|</span><label class="collapse" for="c-39263590">[-]</label><label class="expand" for="c-39263590">[1 more]</label></div><br/><div class="children"><div class="content">Good luck to OAI breaking with Microsoft when they have a 49% ownership share in your company and own all of your GPUs.</div><br/></div></div></div></div><div id="39263551" class="c"><input type="checkbox" id="c-39263551" checked=""/><div class="controls bullet"><span class="by">ParetoOptimal</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39262866">parent</a><span>|</span><a href="#39263431">prev</a><span>|</span><a href="#39262928">next</a><span>|</span><label class="collapse" for="c-39263551">[-]</label><label class="expand" for="c-39263551">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t see how anyone could trust Microsoft or openai given their track records.</div><br/></div></div><div id="39262928" class="c"><input type="checkbox" id="c-39262928" checked=""/><div class="controls bullet"><span class="by">CharlesW</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39262866">parent</a><span>|</span><a href="#39263551">prev</a><span>|</span><a href="#39262875">next</a><span>|</span><label class="collapse" for="c-39262928">[-]</label><label class="expand" for="c-39262928">[4 more]</label></div><br/><div class="children"><div class="content">&gt; <i>Azure OpenAI is 3-months behind OpenAI…</i><p>How is it 3 months behind if you get access to current OpenAI models?</div><br/><div id="39263491" class="c"><input type="checkbox" id="c-39263491" checked=""/><div class="controls bullet"><span class="by">anonylizard</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39262928">parent</a><span>|</span><a href="#39262875">next</a><span>|</span><label class="collapse" for="c-39263491">[-]</label><label class="expand" for="c-39263491">[3 more]</label></div><br/><div class="children"><div class="content">You don&#x27;t.<p>It took like 2 extra months for Azure OpenAI to get GPT-4 turbo. There&#x27;s a noticeable time delay between OpenAI deploying their latest model and when Microsoft manages to shove it in Azure.</div><br/><div id="39268350" class="c"><input type="checkbox" id="c-39268350" checked=""/><div class="controls bullet"><span class="by">drittich</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39263491">parent</a><span>|</span><a href="#39263600">next</a><span>|</span><label class="collapse" for="c-39268350">[-]</label><label class="expand" for="c-39268350">[1 more]</label></div><br/><div class="children"><div class="content">And it&#x27;s not just the models. E.g., the Assistants API is not available yet in Azure, and there is no expected ship date for it. But I&#x27;m confident it&#x27;s coming.</div><br/></div></div><div id="39263600" class="c"><input type="checkbox" id="c-39263600" checked=""/><div class="controls bullet"><span class="by">CharlesW</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39263491">parent</a><span>|</span><a href="#39268350">prev</a><span>|</span><a href="#39262875">next</a><span>|</span><label class="collapse" for="c-39263600">[-]</label><label class="expand" for="c-39263600">[1 more]</label></div><br/><div class="children"><div class="content">Great to know, thank you.</div><br/></div></div></div></div></div></div></div></div><div id="39262875" class="c"><input type="checkbox" id="c-39262875" checked=""/><div class="controls bullet"><span class="by">whimsicalism</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39262729">parent</a><span>|</span><a href="#39262866">prev</a><span>|</span><a href="#39262767">next</a><span>|</span><label class="collapse" for="c-39262875">[-]</label><label class="expand" for="c-39262875">[6 more]</label></div><br/><div class="children"><div class="content">Hm. I disagree that executive level shenanigans translate to real world non-compliance with privacy law when there is an explicit request to delete&#x2F;not store data.</div><br/><div id="39263291" class="c"><input type="checkbox" id="c-39263291" checked=""/><div class="controls bullet"><span class="by">Nevermark</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39262875">parent</a><span>|</span><a href="#39263076">next</a><span>|</span><label class="collapse" for="c-39263291">[-]</label><label class="expand" for="c-39263291">[3 more]</label></div><br/><div class="children"><div class="content">&gt; I disagree that executive level shenanigans translate to real world non-compliance with ________ law<p>Uber<p>Airbnb<p>Facebook<p>The entire financial industry<p>also, every huge corporation that paid a vast (but relative to their market cap, insignificant) settlement, long after incidents in question, without admitting guilt.<p>Corporations have essentially culled vast numbers of humans until forced to stop. What’s a little lucrative nosiness in that context?<p>The massive tide of legally gray (including very dark gray) media hoovered up by training data vacuums isn’t exactly an industry secret. Whether any known player is more serious about protecting data source interests over their own ambitions remains to be verifiably demonstrated.<p>Someone once said, “it is easier to ask forgiveness than permission”. Someone might add, “if ever, or only performatively for congressional testimony theatre purposes, and definitely only after requiring a more punitive legal&#x2F;regulatory moat to lock in the benefits of your non-compliance”.<p>ANY sketchiness should be taken seriously. Not making accusations. But sooner or later, somebody is going to say, “it’s a lot easier to cry and complain than claw back information someone took from you, who has billions to spend on lawyers”.</div><br/><div id="39263359" class="c"><input type="checkbox" id="c-39263359" checked=""/><div class="controls bullet"><span class="by">whimsicalism</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39263291">parent</a><span>|</span><a href="#39263076">next</a><span>|</span><label class="collapse" for="c-39263359">[-]</label><label class="expand" for="c-39263359">[2 more]</label></div><br/><div class="children"><div class="content">None of these cases involve unambiguously claiming that you will delete data and then not doing it.<p>Closer would be FTX which unambiguously claimed one thing and did the opposite, but I do not think OAI has FTX level of dysfunction.</div><br/><div id="39263583" class="c"><input type="checkbox" id="c-39263583" checked=""/><div class="controls bullet"><span class="by">Nevermark</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39263359">parent</a><span>|</span><a href="#39263076">next</a><span>|</span><label class="collapse" for="c-39263583">[-]</label><label class="expand" for="c-39263583">[1 more]</label></div><br/><div class="children"><div class="content">Lots of companies have interpreted “deleting data” in creative ways, or just declared “oopsie” when caught. [0][1][2]<p>[0] Google: lied about deleting data (Google as a verb)<p>[1] Google: lied about deleting data (Google as a noun) <a href="https:&#x2F;&#x2F;arstechnica.com&#x2F;tech-policy&#x2F;2023&#x2F;02&#x2F;us-says-google-routinely-destroyed-evidence-and-lied-about-use-of-auto-delete&#x2F;" rel="nofollow">https:&#x2F;&#x2F;arstechnica.com&#x2F;tech-policy&#x2F;2023&#x2F;02&#x2F;us-says-google-r...</a><p>[2] Google: lied about deleting data (Google as a definition in Webster’s dictionary -&gt; Rickroll)</div><br/></div></div></div></div></div></div><div id="39270424" class="c"><input type="checkbox" id="c-39270424" checked=""/><div class="controls bullet"><span class="by">hackerlight</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39262875">parent</a><span>|</span><a href="#39263076">prev</a><span>|</span><a href="#39262767">next</a><span>|</span><label class="collapse" for="c-39270424">[-]</label><label class="expand" for="c-39270424">[1 more]</label></div><br/><div class="children"><div class="content">Even if there weren&#x27;t shenanigans, it&#x27;s valid to be concerned. Incentives lead to outcomes. Companies do a cost-benefit analysis, if the legal&#x2F;reputational costs are less than what they stand to gain, history shows that they&#x27;ll do the thing and then lie about it. Sam might be uniquely resistant to this due to a personal ethical code, but it&#x27;s impossible to know for sure given that I can&#x27;t read his mind.</div><br/></div></div></div></div></div></div><div id="39262767" class="c"><input type="checkbox" id="c-39262767" checked=""/><div class="controls bullet"><span class="by">rgbrgb</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39262512">parent</a><span>|</span><a href="#39262729">prev</a><span>|</span><a href="#39264276">next</a><span>|</span><label class="collapse" for="c-39262767">[-]</label><label class="expand" for="c-39262767">[2 more]</label></div><br/><div class="children"><div class="content">about as much as I trust 23andme to keep my genetic data private<p>i give their intent the benefit of the doubt but I’ve been on the other side of too many data collection systems to trust that theirs is foolproof and more secure than my local machine.</div><br/><div id="39262907" class="c"><input type="checkbox" id="c-39262907" checked=""/><div class="controls bullet"><span class="by">whimsicalism</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39262767">parent</a><span>|</span><a href="#39264276">next</a><span>|</span><label class="collapse" for="c-39262907">[-]</label><label class="expand" for="c-39262907">[1 more]</label></div><br/><div class="children"><div class="content">To me there is a significant difference between permanent storing and “keeping private” (23andme is legally prohibited from deleting your genetic data) and not using and deleting after 30 days.<p>fwiw 23andme <i>genetic data</i> (distinct from summary ancestry data) has not leaked afaik</div><br/></div></div></div></div><div id="39264276" class="c"><input type="checkbox" id="c-39264276" checked=""/><div class="controls bullet"><span class="by">ren_engineer</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39262512">parent</a><span>|</span><a href="#39262767">prev</a><span>|</span><a href="#39262739">next</a><span>|</span><label class="collapse" for="c-39264276">[-]</label><label class="expand" for="c-39264276">[1 more]</label></div><br/><div class="children"><div class="content">it&#x27;s not about trust, they will always be indirectly controlled by the US government who could force them to leak&#x2F;release your data. OpenAI is already working with the US military and removed their restrictions on allowing their AI to be used for military purposes<p><a href="https:&#x2F;&#x2F;time.com&#x2F;6556827&#x2F;openai-us-military-cybersecurity&#x2F;" rel="nofollow">https:&#x2F;&#x2F;time.com&#x2F;6556827&#x2F;openai-us-military-cybersecurity&#x2F;</a></div><br/></div></div><div id="39262739" class="c"><input type="checkbox" id="c-39262739" checked=""/><div class="controls bullet"><span class="by">anonylizard</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39262512">parent</a><span>|</span><a href="#39264276">prev</a><span>|</span><a href="#39265674">next</a><span>|</span><label class="collapse" for="c-39262739">[-]</label><label class="expand" for="c-39262739">[3 more]</label></div><br/><div class="children"><div class="content">Your average SQL query is worthless, there no special sauce in SQL queries, their value comes from the dataset they run on.<p>These small SQL LLMs are indeed worthless, since LLM performance on SQL queries is quite limited right now, every % of accuracy matters.</div><br/><div id="39263054" class="c"><input type="checkbox" id="c-39263054" checked=""/><div class="controls bullet"><span class="by">rgbrgb</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39262739">parent</a><span>|</span><a href="#39262846">next</a><span>|</span><label class="collapse" for="c-39263054">[-]</label><label class="expand" for="c-39263054">[1 more]</label></div><br/><div class="children"><div class="content">with data privacy decisions I like to think about how the policy&#x2F;reasoning would sound in a NYT headline or congress testimony. your stance does not imbue trust for me.<p>0 employment contracts or user facing ToS I&#x27;ve read make a distinction between sharing schema vs data with unvetted third parties. In my opinion, schemas reveal pretty valuable info about an application (and they&#x27;re absolutely valuable in aggregate because you can use them to train AI data scientists).<p>Maybe I sound like a curmudgeon but since I have the option of running the AI locally with a 5 percentage point accuracy loss, I absolutely will. If GPT-4 was 100% that would be different because you could build totally different things, but 83% has most of the same design problems as 78%.</div><br/></div></div><div id="39262846" class="c"><input type="checkbox" id="c-39262846" checked=""/><div class="controls bullet"><span class="by">whimsicalism</span><span>|</span><a href="#39262450">root</a><span>|</span><a href="#39262739">parent</a><span>|</span><a href="#39263054">prev</a><span>|</span><a href="#39265674">next</a><span>|</span><label class="collapse" for="c-39262846">[-]</label><label class="expand" for="c-39262846">[1 more]</label></div><br/><div class="children"><div class="content">Did you mean to reply to a different comment?</div><br/></div></div></div></div></div></div><div id="39265674" class="c"><input type="checkbox" id="c-39265674" checked=""/><div class="controls bullet"><span class="by">dimask</span><span>|</span><a href="#39262450">parent</a><span>|</span><a href="#39262512">prev</a><span>|</span><a href="#39266513">next</a><span>|</span><label class="collapse" for="c-39265674">[-]</label><label class="expand" for="c-39265674">[1 more]</label></div><br/><div class="children"><div class="content">Imo stuff like this can have applications in a narrower set of problems, where you can also further finetune or simple prompt engineer a model to have a much higher accuracy. I do not think that they can become the bases in which database work is gonna take place in general, but it could be used to automate certain types of tasks that would be too hard&#x2F;complicated to automate in a classical programmatic way, but not too hard&#x2F;complicated a real intelligence to be needed to solve.</div><br/></div></div><div id="39266513" class="c"><input type="checkbox" id="c-39266513" checked=""/><div class="controls bullet"><span class="by">bagels</span><span>|</span><a href="#39262450">parent</a><span>|</span><a href="#39265674">prev</a><span>|</span><a href="#39263820">next</a><span>|</span><label class="collapse" for="c-39266513">[-]</label><label class="expand" for="c-39266513">[1 more]</label></div><br/><div class="children"><div class="content">I know sql pretty well, but every once in a while doing things like percentiles come up where I don&#x27;t remember the exact incantations to get the window syntax right. Things like this can save some googling and documentation reading. I can read it to see if it makes sense, and execute it. I can create tests for the output to verify. Can save a lot of time. If it&#x27;s wrong, I use the fallback of googling for examples.</div><br/></div></div><div id="39263820" class="c"><input type="checkbox" id="c-39263820" checked=""/><div class="controls bullet"><span class="by">bongodongobob</span><span>|</span><a href="#39262450">parent</a><span>|</span><a href="#39266513">prev</a><span>|</span><a href="#39264405">next</a><span>|</span><label class="collapse" for="c-39263820">[-]</label><label class="expand" for="c-39263820">[1 more]</label></div><br/><div class="children"><div class="content">I can definitely appreciate security concerns but I don&#x27;t see how providing your schema is of any concern whatsoever.</div><br/></div></div><div id="39264405" class="c"><input type="checkbox" id="c-39264405" checked=""/><div class="controls bullet"><span class="by">davidy123</span><span>|</span><a href="#39262450">parent</a><span>|</span><a href="#39263820">prev</a><span>|</span><a href="#39269483">next</a><span>|</span><label class="collapse" for="c-39264405">[-]</label><label class="expand" for="c-39264405">[1 more]</label></div><br/><div class="children"><div class="content">This kind of approach could be a way to make these models reliable. Encode your business restrictions in the database, if they are rigorous enough, if the query passes then it&#x27;s valid in your business world.</div><br/></div></div><div id="39269483" class="c"><input type="checkbox" id="c-39269483" checked=""/><div class="controls bullet"><span class="by">lawxls</span><span>|</span><a href="#39262450">parent</a><span>|</span><a href="#39264405">prev</a><span>|</span><a href="#39269279">next</a><span>|</span><label class="collapse" for="c-39269483">[-]</label><label class="expand" for="c-39269483">[1 more]</label></div><br/><div class="children"><div class="content">Yep, just use GPT-4</div><br/></div></div><div id="39269279" class="c"><input type="checkbox" id="c-39269279" checked=""/><div class="controls bullet"><span class="by">fijiaarone</span><span>|</span><a href="#39262450">parent</a><span>|</span><a href="#39269483">prev</a><span>|</span><a href="#39266224">next</a><span>|</span><label class="collapse" for="c-39269279">[-]</label><label class="expand" for="c-39269279">[1 more]</label></div><br/><div class="children"><div class="content">The 25% of SQL that covers everything in 99% of applications is a subset of the 76.5% of SQL that the LLM got right.</div><br/></div></div></div></div><div id="39266224" class="c"><input type="checkbox" id="c-39266224" checked=""/><div class="controls bullet"><span class="by">lolpanda</span><span>|</span><a href="#39262450">prev</a><span>|</span><a href="#39270932">next</a><span>|</span><label class="collapse" for="c-39266224">[-]</label><label class="expand" for="c-39266224">[8 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t think any of those text-to-sql models are solving the right problems. The hard part is not syntax or I don&#x27;t know how to write a group by query. Most data scientists and engineers spend more time on understanding the meaning of the data. One cannot simply look at a 50 columns table in Snowflake and guess what columns are by their names. For example, we have 10 columns in one tables, all named ...price. We have to go to wiki to find the actual meaning or read the DBT definitions. I cannot trust any queries that models produce because they don&#x27;t understand the data; they only understand the query syntax.</div><br/><div id="39268114" class="c"><input type="checkbox" id="c-39268114" checked=""/><div class="controls bullet"><span class="by">l5870uoo9y</span><span>|</span><a href="#39266224">parent</a><span>|</span><a href="#39270136">next</a><span>|</span><label class="collapse" for="c-39268114">[-]</label><label class="expand" for="c-39268114">[1 more]</label></div><br/><div class="children"><div class="content">You are right but you can use RAG to “teach” AI about your schema. I did a write up on my implementation [1].<p>[1]: <a href="https:&#x2F;&#x2F;www.sqlai.ai&#x2F;posts&#x2F;enhancing-ai-accuracy-for-sql-generations-using-retrieval-augmented-generation" rel="nofollow">https:&#x2F;&#x2F;www.sqlai.ai&#x2F;posts&#x2F;enhancing-ai-accuracy-for-sql-gen...</a></div><br/></div></div><div id="39270136" class="c"><input type="checkbox" id="c-39270136" checked=""/><div class="controls bullet"><span class="by">edmundsauto</span><span>|</span><a href="#39266224">parent</a><span>|</span><a href="#39268114">prev</a><span>|</span><a href="#39266704">next</a><span>|</span><label class="collapse" for="c-39270136">[-]</label><label class="expand" for="c-39270136">[1 more]</label></div><br/><div class="children"><div class="content">I totally agree that the value is in understanding the data. However, as a tool, do you see value in being able to quickly skeleton out the query? Autocomplete in code is a reasonable analogy to me.</div><br/></div></div><div id="39266704" class="c"><input type="checkbox" id="c-39266704" checked=""/><div class="controls bullet"><span class="by">mritchie712</span><span>|</span><a href="#39266224">parent</a><span>|</span><a href="#39270136">prev</a><span>|</span><a href="#39266374">next</a><span>|</span><label class="collapse" for="c-39266704">[-]</label><label class="expand" for="c-39266704">[2 more]</label></div><br/><div class="children"><div class="content">Yeah, we&#x27;ve been working on this problem a good bit and I think text-to-sql is a dead-end for analytical questions.<p>We (<a href="https:&#x2F;&#x2F;www.definite.app&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.definite.app&#x2F;</a>) ended up abandoning text-to-sql in favor of answering questions with a semantic layer (which LLM&#x27;s are far more effective against).<p><a href="https:&#x2F;&#x2F;www.loom.com&#x2F;share&#x2F;a0d3c0e273004d7982b2aed24628ef40" rel="nofollow">https:&#x2F;&#x2F;www.loom.com&#x2F;share&#x2F;a0d3c0e273004d7982b2aed24628ef40</a></div><br/><div id="39268207" class="c"><input type="checkbox" id="c-39268207" checked=""/><div class="controls bullet"><span class="by">l5870uoo9y</span><span>|</span><a href="#39266224">root</a><span>|</span><a href="#39266704">parent</a><span>|</span><a href="#39266374">next</a><span>|</span><label class="collapse" for="c-39268207">[-]</label><label class="expand" for="c-39268207">[1 more]</label></div><br/><div class="children"><div class="content">So you don’t use AI to generate SQL to retrieve data? As you say on the web site?</div><br/></div></div></div></div><div id="39266374" class="c"><input type="checkbox" id="c-39266374" checked=""/><div class="controls bullet"><span class="by">joshhart</span><span>|</span><a href="#39266224">parent</a><span>|</span><a href="#39266704">prev</a><span>|</span><a href="#39266987">next</a><span>|</span><label class="collapse" for="c-39266374">[-]</label><label class="expand" for="c-39266374">[2 more]</label></div><br/><div class="children"><div class="content">At Databricks we have an LLM that is fine-tuned to do the problem you raise -<p><a href="https:&#x2F;&#x2F;www.databricks.com&#x2F;blog&#x2F;announcing-public-preview-ai-generated-documentation-databricks-unity-catalog" rel="nofollow">https:&#x2F;&#x2F;www.databricks.com&#x2F;blog&#x2F;announcing-public-preview-ai...</a><p>Many customers like it a lot. Although perhaps in your case if there are many pricing details it may not be quite accurate.</div><br/><div id="39268233" class="c"><input type="checkbox" id="c-39268233" checked=""/><div class="controls bullet"><span class="by">l5870uoo9y</span><span>|</span><a href="#39266224">root</a><span>|</span><a href="#39266374">parent</a><span>|</span><a href="#39266987">next</a><span>|</span><label class="collapse" for="c-39268233">[-]</label><label class="expand" for="c-39268233">[1 more]</label></div><br/><div class="children"><div class="content">Can I ask how you fine-tune or if you can be a bit more specific?</div><br/></div></div></div></div><div id="39266987" class="c"><input type="checkbox" id="c-39266987" checked=""/><div class="controls bullet"><span class="by">danielmarkbruce</span><span>|</span><a href="#39266224">parent</a><span>|</span><a href="#39266374">prev</a><span>|</span><a href="#39270932">next</a><span>|</span><label class="collapse" for="c-39266987">[-]</label><label class="expand" for="c-39266987">[1 more]</label></div><br/><div class="children"><div class="content">It seems like fine tuning on queries using the underlying schema would work, people are doing this.</div><br/></div></div></div></div><div id="39270932" class="c"><input type="checkbox" id="c-39270932" checked=""/><div class="controls bullet"><span class="by">zeroq</span><span>|</span><a href="#39266224">prev</a><span>|</span><a href="#39262180">next</a><span>|</span><label class="collapse" for="c-39270932">[-]</label><label class="expand" for="c-39270932">[1 more]</label></div><br/><div class="children"><div class="content">For anyone who says it&#x27;s useless because it&#x27;s only 75% correct, please consider these two points:<p>(1) this is the first instalment, and it&#x27;s already close to be a thousand times more useful for product owners and analytics than any airtable you can imagine.<p>(2) as much as I love being on point on every challenge, we&#x27;re leaving in &quot;good enough&quot; economics for quite some time, and if this will be close enough that will be good enough for business.</div><br/></div></div><div id="39262180" class="c"><input type="checkbox" id="c-39262180" checked=""/><div class="controls bullet"><span class="by">satvikpendem</span><span>|</span><a href="#39270932">prev</a><span>|</span><a href="#39262231">next</a><span>|</span><label class="collapse" for="c-39262180">[-]</label><label class="expand" for="c-39262180">[7 more]</label></div><br/><div class="children"><div class="content">This is not open source, because you have use-based restrictions. Call it what it is, source available.</div><br/><div id="39262289" class="c"><input type="checkbox" id="c-39262289" checked=""/><div class="controls bullet"><span class="by">thecalebf</span><span>|</span><a href="#39262180">parent</a><span>|</span><a href="#39262942">next</a><span>|</span><label class="collapse" for="c-39262289">[-]</label><label class="expand" for="c-39262289">[1 more]</label></div><br/><div class="children"><div class="content">Updated the title since it may have been confusing, appreciate the feedback!</div><br/></div></div><div id="39262942" class="c"><input type="checkbox" id="c-39262942" checked=""/><div class="controls bullet"><span class="by">CharlesW</span><span>|</span><a href="#39262180">parent</a><span>|</span><a href="#39262289">prev</a><span>|</span><a href="#39262231">next</a><span>|</span><label class="collapse" for="c-39262942">[-]</label><label class="expand" for="c-39262942">[5 more]</label></div><br/><div class="children"><div class="content">&gt; <i>Call it what it is, source available.</i><p>Also, it&#x27;s only weights AFAICT — no source training data&#x2F;code is available.</div><br/><div id="39266862" class="c"><input type="checkbox" id="c-39266862" checked=""/><div class="controls bullet"><span class="by">gwd</span><span>|</span><a href="#39262180">root</a><span>|</span><a href="#39262942">parent</a><span>|</span><a href="#39262971">next</a><span>|</span><label class="collapse" for="c-39266862">[-]</label><label class="expand" for="c-39266862">[1 more]</label></div><br/><div class="children"><div class="content">Share-able weights are an interesting one, because although you can&#x27;t re-generate it from scratch, you <i>can</i> modify it and share it.  They&#x27;re sort of halfway in between source code (which allows you to regenerate a binary from scratch and also inspect everything that went into the binary) and a free-as-in-beer binary (which you typically can&#x27;t change at all).  We sort of need a new term for this kind of thing.<p>I feel like we should try to reserve &quot;open&quot; for something that has all of the &quot;four freedoms&quot;.  The key thing about this is that it&#x27;s not inspect-able, but it is derivable.  Derivable-weight license?<p>EDIT: Looking at the &quot;four freedoms&quot; [1], &quot;freedom 1&quot; is:<p>&gt; The freedom to study how the program works, and change it so it does your computing as you wish (freedom 1). Access to the source code is a precondition for this.<p>Essentially the thing about weights is that you can superficially retrain bits of it to adapt it to your use case without needing to do a full re-train.  But of course, without access to the training set, you can&#x27;t <i>really</i> be sure what&#x27;s in those weights, nor make more fundamental changes that would require adding or removing data.<p>[1] <a href="https:&#x2F;&#x2F;www.gnu.org&#x2F;philosophy&#x2F;free-sw.en.html#four-freedoms" rel="nofollow">https:&#x2F;&#x2F;www.gnu.org&#x2F;philosophy&#x2F;free-sw.en.html#four-freedoms</a></div><br/></div></div><div id="39262971" class="c"><input type="checkbox" id="c-39262971" checked=""/><div class="controls bullet"><span class="by">Keyframe</span><span>|</span><a href="#39262180">root</a><span>|</span><a href="#39262942">parent</a><span>|</span><a href="#39266862">prev</a><span>|</span><a href="#39262231">next</a><span>|</span><label class="collapse" for="c-39262971">[-]</label><label class="expand" for="c-39262971">[3 more]</label></div><br/><div class="children"><div class="content">Shareware?</div><br/><div id="39266300" class="c"><input type="checkbox" id="c-39266300" checked=""/><div class="controls bullet"><span class="by">klabb3</span><span>|</span><a href="#39262180">root</a><span>|</span><a href="#39262971">parent</a><span>|</span><a href="#39262231">next</a><span>|</span><label class="collapse" for="c-39266300">[-]</label><label class="expand" for="c-39266300">[2 more]</label></div><br/><div class="children"><div class="content">Yep. Open source means you can build and modify it. If not, it’s not open source.<p>You know it’s a bad timeline when releasing the equivalent of a binary is considered “open”.</div><br/><div id="39266841" class="c"><input type="checkbox" id="c-39266841" checked=""/><div class="controls bullet"><span class="by">Keyframe</span><span>|</span><a href="#39262180">root</a><span>|</span><a href="#39266300">parent</a><span>|</span><a href="#39262231">next</a><span>|</span><label class="collapse" for="c-39266841">[-]</label><label class="expand" for="c-39266841">[1 more]</label></div><br/><div class="children"><div class="content">What is old is new again!</div><br/></div></div></div></div></div></div></div></div></div></div><div id="39262231" class="c"><input type="checkbox" id="c-39262231" checked=""/><div class="controls bullet"><span class="by">itsoktocry</span><span>|</span><a href="#39262180">prev</a><span>|</span><a href="#39264423">next</a><span>|</span><label class="collapse" for="c-39262231">[-]</label><label class="expand" for="c-39262231">[4 more]</label></div><br/><div class="children"><div class="content">&gt;<i>complex questions like above.</i><p>This is cool, and up my alley.  But that&#x27;s not a complex question, it&#x27;s a basic analytics question. Most analysts will be able to write something like that in their sleep.<p>I&#x27;ve been using ChatGPT for writing SQL, and it&#x27;s mediocre.  But it&#x27;ll get better, I&#x27;m sure.</div><br/><div id="39262260" class="c"><input type="checkbox" id="c-39262260" checked=""/><div class="controls bullet"><span class="by">thecalebf</span><span>|</span><a href="#39262231">parent</a><span>|</span><a href="#39266163">next</a><span>|</span><label class="collapse" for="c-39262260">[-]</label><label class="expand" for="c-39262260">[2 more]</label></div><br/><div class="children"><div class="content">Sure, there is a blog post with some other examples of the first model iteration with more complex, multipart questions.
<a href="https:&#x2F;&#x2F;www.chatdb.ai&#x2F;post&#x2F;naturalsql-vs-sqlcoder-for-text-to-sql" rel="nofollow">https:&#x2F;&#x2F;www.chatdb.ai&#x2F;post&#x2F;naturalsql-vs-sqlcoder-for-text-t...</a><p>I will update that to be a more truly difficult question. Appreciate the feedback!</div><br/><div id="39262934" class="c"><input type="checkbox" id="c-39262934" checked=""/><div class="controls bullet"><span class="by">itsoktocry</span><span>|</span><a href="#39262231">root</a><span>|</span><a href="#39262260">parent</a><span>|</span><a href="#39266163">next</a><span>|</span><label class="collapse" for="c-39262934">[-]</label><label class="expand" for="c-39262934">[1 more]</label></div><br/><div class="children"><div class="content">Thank you, this is great work! I&#x27;ll check it out.</div><br/></div></div></div></div><div id="39266163" class="c"><input type="checkbox" id="c-39266163" checked=""/><div class="controls bullet"><span class="by">int_19h</span><span>|</span><a href="#39262231">parent</a><span>|</span><a href="#39262260">prev</a><span>|</span><a href="#39264423">next</a><span>|</span><label class="collapse" for="c-39266163">[-]</label><label class="expand" for="c-39266163">[1 more]</label></div><br/><div class="children"><div class="content">Even GPT-4 often writes queries with redundant subqueries, excessive nesting or joins etc. I don&#x27;t think that&#x27;s particularly valuable.<p>On the other hand, telling GPT to generate SQL to query a data store as part of solving some task that requires inference from facts captured in that data store works surprisingly well - better than &quot;function calls&quot; with JSON, in my opinion. While such generated queries are also suboptimal, they still capture the intent correctly, and GPT is surprisingly adept at using nested subqueries to get the answer it needs in a single query. And when such generated SQL is wrong, it usually fails to parse (e.g. due to typos in field names), at which point you can just feed the error message back to the model and have it correct that.</div><br/></div></div></div></div><div id="39264423" class="c"><input type="checkbox" id="c-39264423" checked=""/><div class="controls bullet"><span class="by">buzzm</span><span>|</span><a href="#39262231">prev</a><span>|</span><a href="#39262493">next</a><span>|</span><label class="collapse" for="c-39264423">[-]</label><label class="expand" for="c-39264423">[2 more]</label></div><br/><div class="children"><div class="content">Like many uses of AI, very good as a &quot;seed&quot; especially if it comes up with nuggets like grouping on a range instead of a single value.   But as with almost <i>any</i> database, devil is in details.   Different products have different interp of &quot;quantity&quot; (e.g. box vs. unit), coupons and discounts are modeled in weird ways, weights are assumed to be pounds&#x2F;kg and are mixed without assigning units, etc. etc.</div><br/><div id="39264861" class="c"><input type="checkbox" id="c-39264861" checked=""/><div class="controls bullet"><span class="by">owlstuffing</span><span>|</span><a href="#39264423">parent</a><span>|</span><a href="#39262493">next</a><span>|</span><label class="collapse" for="c-39264861">[-]</label><label class="expand" for="c-39264861">[1 more]</label></div><br/><div class="children"><div class="content">Good point. However, AI may also train on the database metadata, including DDL comments, locale, etc. and perform data sampling to glean the nuances that are &quot;understood&quot;.</div><br/></div></div></div></div><div id="39262493" class="c"><input type="checkbox" id="c-39262493" checked=""/><div class="controls bullet"><span class="by">CastFX</span><span>|</span><a href="#39264423">prev</a><span>|</span><a href="#39263342">next</a><span>|</span><label class="collapse" for="c-39262493">[-]</label><label class="expand" for="c-39262493">[1 more]</label></div><br/><div class="children"><div class="content">I was wondering how it performs in a more complex (and realistic) benchmark like Bird?<p><a href="https:&#x2F;&#x2F;bird-bench.github.io&#x2F;" rel="nofollow">https:&#x2F;&#x2F;bird-bench.github.io&#x2F;</a></div><br/></div></div><div id="39263342" class="c"><input type="checkbox" id="c-39263342" checked=""/><div class="controls bullet"><span class="by">jimmytucson</span><span>|</span><a href="#39262493">prev</a><span>|</span><a href="#39263199">next</a><span>|</span><label class="collapse" for="c-39263342">[-]</label><label class="expand" for="c-39263342">[2 more]</label></div><br/><div class="children"><div class="content">In the data world I&#x27;ve worked with tons of folks whose responsibilities include getting questions from execs, knowing their way around the data warehouse enough to write SQL to answer those questions, and delivering the answers back (sometimes formatted nicely).  Sometimes they have to predict what followup questions the exec will ask, like &quot;why is that number so low, it obviously shouldn&#x27;t be that low&quot; so they can press the data engineers for bugs.<p>Like all things LLM, I don&#x27;t know if this is about to make those responsibilities a lot easier, or just eliminate them altogether.</div><br/><div id="39264231" class="c"><input type="checkbox" id="c-39264231" checked=""/><div class="controls bullet"><span class="by">fwip</span><span>|</span><a href="#39263342">parent</a><span>|</span><a href="#39263199">next</a><span>|</span><label class="collapse" for="c-39264231">[-]</label><label class="expand" for="c-39264231">[1 more]</label></div><br/><div class="children"><div class="content">My money is on &quot;overpaid execs will use this to get wrong information, and get mad at their subordinates for correcting them.&quot;</div><br/></div></div></div></div><div id="39263199" class="c"><input type="checkbox" id="c-39263199" checked=""/><div class="controls bullet"><span class="by">zainhoda</span><span>|</span><a href="#39263342">prev</a><span>|</span><a href="#39262130">next</a><span>|</span><label class="collapse" for="c-39263199">[-]</label><label class="expand" for="c-39263199">[3 more]</label></div><br/><div class="children"><div class="content">Very cool. Would the license allow for use with Vanna? <a href="https:&#x2F;&#x2F;github.com&#x2F;vanna-ai&#x2F;vanna">https:&#x2F;&#x2F;github.com&#x2F;vanna-ai&#x2F;vanna</a></div><br/><div id="39263527" class="c"><input type="checkbox" id="c-39263527" checked=""/><div class="controls bullet"><span class="by">thecalebf</span><span>|</span><a href="#39263199">parent</a><span>|</span><a href="#39262130">next</a><span>|</span><label class="collapse" for="c-39263527">[-]</label><label class="expand" for="c-39263527">[2 more]</label></div><br/><div class="children"><div class="content">Yes please do! Looks awesome, would love to help any way I can as well.</div><br/><div id="39264027" class="c"><input type="checkbox" id="c-39264027" checked=""/><div class="controls bullet"><span class="by">pama</span><span>|</span><a href="#39263199">root</a><span>|</span><a href="#39263527">parent</a><span>|</span><a href="#39262130">next</a><span>|</span><label class="collapse" for="c-39264027">[-]</label><label class="expand" for="c-39264027">[1 more]</label></div><br/><div class="children"><div class="content">Not OP, but would it be possible to use a standardized license? Every time a special purpose license is used for a software that gains adaptation, the lawyers of hundreds to thousands of different companies must spend a lot of time and iterations with the team to figure out if they can actually use this model.  There is something magical in the GPL, MIT, Apache, etc licenses because these lawyers have already opined on them once and no longer create a bottleneck.</div><br/></div></div></div></div></div></div><div id="39262130" class="c"><input type="checkbox" id="c-39262130" checked=""/><div class="controls bullet"><span class="by">zurfer</span><span>|</span><a href="#39263199">prev</a><span>|</span><a href="#39268665">next</a><span>|</span><label class="collapse" for="c-39262130">[-]</label><label class="expand" for="c-39262130">[4 more]</label></div><br/><div class="children"><div class="content">really cool, the license is not really standard, but seems open source.
The actual model can be found here: <a href="https:&#x2F;&#x2F;huggingface.co&#x2F;cfahlgren1&#x2F;NaturalSQL-6.7B-v0" rel="nofollow">https:&#x2F;&#x2F;huggingface.co&#x2F;cfahlgren1&#x2F;NaturalSQL-6.7B-v0</a><p>This seems like a great base model, although I wonder if text-to-sql is good use case for small models. 
We are also building a tool in the space and I regularly wish gpt-4 to be even more knowledgable when answering. Even gpt 3.5 is not good enough for production.</div><br/><div id="39262164" class="c"><input type="checkbox" id="c-39262164" checked=""/><div class="controls bullet"><span class="by">thecalebf</span><span>|</span><a href="#39262130">parent</a><span>|</span><a href="#39268665">next</a><span>|</span><label class="collapse" for="c-39262164">[-]</label><label class="expand" for="c-39262164">[3 more]</label></div><br/><div class="children"><div class="content">Thanks! Yes, that was an earlier iteration. The v1 is here <a href="https:&#x2F;&#x2F;huggingface.co&#x2F;chatdb&#x2F;natural-sql-7b" rel="nofollow">https:&#x2F;&#x2F;huggingface.co&#x2F;chatdb&#x2F;natural-sql-7b</a>. Plan to push to Ollama soon and build an open source free tool around it.<p>Would love to hear about what you are building!</div><br/><div id="39262368" class="c"><input type="checkbox" id="c-39262368" checked=""/><div class="controls bullet"><span class="by">zurfer</span><span>|</span><a href="#39262130">root</a><span>|</span><a href="#39262164">parent</a><span>|</span><a href="#39268665">next</a><span>|</span><label class="collapse" for="c-39262368">[-]</label><label class="expand" for="c-39262368">[2 more]</label></div><br/><div class="children"><div class="content">We are building Dot (<a href="https:&#x2F;&#x2F;www.getdot.ai&#x2F;">https:&#x2F;&#x2F;www.getdot.ai&#x2F;</a>). We mostly focus on good conversation design and data governance to ensure a great end user experience.<p>Here is an example conversation about HN data <a href="https:&#x2F;&#x2F;eu.getdot.ai&#x2F;share&#x2F;c80139c9-13f4-4db4-88f6-6e058ba31ad4?org_id=getdot.ai">https:&#x2F;&#x2F;eu.getdot.ai&#x2F;share&#x2F;c80139c9-13f4-4db4-88f6-6e058ba31...</a></div><br/><div id="39262935" class="c"><input type="checkbox" id="c-39262935" checked=""/><div class="controls bullet"><span class="by">eurekin</span><span>|</span><a href="#39262130">root</a><span>|</span><a href="#39262368">parent</a><span>|</span><a href="#39268665">next</a><span>|</span><label class="collapse" for="c-39262935">[-]</label><label class="expand" for="c-39262935">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s impressive</div><br/></div></div></div></div></div></div></div></div><div id="39268665" class="c"><input type="checkbox" id="c-39268665" checked=""/><div class="controls bullet"><span class="by">aussieguy1234</span><span>|</span><a href="#39262130">prev</a><span>|</span><a href="#39270985">next</a><span>|</span><label class="collapse" for="c-39268665">[-]</label><label class="expand" for="c-39268665">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been using GPT-4 to write SQL to get a bunch of insights. Its very good at writing up queries for all kinds of metrics. These queries answer questions that would have previously required an actual data squad.</div><br/></div></div><div id="39270985" class="c"><input type="checkbox" id="c-39270985" checked=""/><div class="controls bullet"><span class="by">Too</span><span>|</span><a href="#39268665">prev</a><span>|</span><a href="#39263148">next</a><span>|</span><label class="collapse" for="c-39270985">[-]</label><label class="expand" for="c-39270985">[1 more]</label></div><br/><div class="children"><div class="content">Heh. Then there are those that say SQL already reads like natural language.<p>What happens if you feed the model with sql as input?</div><br/></div></div><div id="39263148" class="c"><input type="checkbox" id="c-39263148" checked=""/><div class="controls bullet"><span class="by">Tycho</span><span>|</span><a href="#39270985">prev</a><span>|</span><a href="#39264351">next</a><span>|</span><label class="collapse" for="c-39263148">[-]</label><label class="expand" for="c-39263148">[1 more]</label></div><br/><div class="children"><div class="content">At university I studied &#x27;natural language interfaces to databases&#x27; (NLIDBs). I recall that very early, I think in the 60, NASA and other organisations were trying to build things like this for their scientists. Of course, there was no SQL in those days. Once SQL rose to prominence, my impression is that NLIDB interest faded, especially with the lack of NLP breakthroughs. My project was to create an analog to SQL in more plain, naturalistic English (a bit like what AppleScript is to other programming languages), and then let the user construct the queries by using a GUI rather than free-typing. The GUI would constrain the query text to permissible syntax, letting the user click to add new clauses and select columns etc, while maintaining a &#x27;layman intelligible&#x27; sentence. Anyway, maybe now we can get NLIDBs with true NLP.</div><br/></div></div><div id="39264351" class="c"><input type="checkbox" id="c-39264351" checked=""/><div class="controls bullet"><span class="by">K0IN</span><span>|</span><a href="#39263148">prev</a><span>|</span><a href="#39264569">next</a><span>|</span><label class="collapse" for="c-39264351">[-]</label><label class="expand" for="c-39264351">[2 more]</label></div><br/><div class="children"><div class="content">One Problem I always see in such apps is that the ai can&#x27;t see in to the database or into all entries, so queries without stating data EXACTLY as in the database run into issues.<p>example: give me the revenue for all logistics firms<p>but in the database these might not be called &quot;logistics&quot; and may be called &quot;transport&quot; (or anything)<p>maybe there are some counters to this like finding unique values per column or even better use a grammar based approach, wich will select only valid entries.<p>but the simple text to SQL is at this point not the &quot;hard thing to solve&quot;</div><br/><div id="39265295" class="c"><input type="checkbox" id="c-39265295" checked=""/><div class="controls bullet"><span class="by">bm-rf</span><span>|</span><a href="#39264351">parent</a><span>|</span><a href="#39264569">next</a><span>|</span><label class="collapse" for="c-39265295">[-]</label><label class="expand" for="c-39265295">[1 more]</label></div><br/><div class="children"><div class="content">Usually you include the database schema in the context, usually by showing the CREATE statement for the tables you want to query. I&#x27;ve also found that including comments in the CREATE sql can guide the model somewhat. The best approach is probably to finetune one of these models using curated questions for your database.</div><br/></div></div></div></div><div id="39264569" class="c"><input type="checkbox" id="c-39264569" checked=""/><div class="controls bullet"><span class="by">owlstuffing</span><span>|</span><a href="#39264351">prev</a><span>|</span><a href="#39262312">next</a><span>|</span><label class="collapse" for="c-39264569">[-]</label><label class="expand" for="c-39264569">[1 more]</label></div><br/><div class="children"><div class="content">Natural language-derived SQL will be useful for programming language integration involving type-safe SQL. I&#x27;m currently using manifold-sql[1] for this, and having the ability to transform English directly to SQL type-safely is amazing.<p>1. <a href="https:&#x2F;&#x2F;github.com&#x2F;manifold-systems&#x2F;manifold&#x2F;blob&#x2F;master&#x2F;manifold-deps-parent&#x2F;manifold-sql&#x2F;readme.md">https:&#x2F;&#x2F;github.com&#x2F;manifold-systems&#x2F;manifold&#x2F;blob&#x2F;master&#x2F;man...</a></div><br/></div></div><div id="39262312" class="c"><input type="checkbox" id="c-39262312" checked=""/><div class="controls bullet"><span class="by">xfalcox</span><span>|</span><a href="#39264569">prev</a><span>|</span><a href="#39262432">next</a><span>|</span><label class="collapse" for="c-39262312">[-]</label><label class="expand" for="c-39262312">[2 more]</label></div><br/><div class="children"><div class="content">Context is 4096? My app db DDL is 19877 tokens (using Llama2 tokenizer) long, so that means we need to do a RAG for handling the DDL prompt injection.<p>A model like this with a 32k long seq_len, like Mixtral, would be a killer for me.</div><br/><div id="39262364" class="c"><input type="checkbox" id="c-39262364" checked=""/><div class="controls bullet"><span class="by">thecalebf</span><span>|</span><a href="#39262312">parent</a><span>|</span><a href="#39262432">next</a><span>|</span><label class="collapse" for="c-39262364">[-]</label><label class="expand" for="c-39262364">[1 more]</label></div><br/><div class="children"><div class="content">Great call out. Will definitely focus on that in the next iteration!</div><br/></div></div></div></div><div id="39262432" class="c"><input type="checkbox" id="c-39262432" checked=""/><div class="controls bullet"><span class="by">cuuupid</span><span>|</span><a href="#39262312">prev</a><span>|</span><a href="#39262186">next</a><span>|</span><label class="collapse" for="c-39262432">[-]</label><label class="expand" for="c-39262432">[3 more]</label></div><br/><div class="children"><div class="content">This is a big improvement, but I&#x27;m not a believer that SQL is the most appropriate query lang here. Personally am more bullish on language models being trained with ORMs, as those normally capture much more information about the fields.<p>e.g. Passing in some of my more complex table schemas related to flight data and asking about overflights, the model struggles to resolve out information related to aviation. However, GitHub Copilot writes me a perfect call to Prisma with the same single line instruction + information spanning the rest of my codebase.</div><br/><div id="39263109" class="c"><input type="checkbox" id="c-39263109" checked=""/><div class="controls bullet"><span class="by">tillvz</span><span>|</span><a href="#39262432">parent</a><span>|</span><a href="#39262465">next</a><span>|</span><label class="collapse" for="c-39263109">[-]</label><label class="expand" for="c-39263109">[1 more]</label></div><br/><div class="children"><div class="content">Agree that an approach that more semantically models the data is better,
especially when you want to eventually let the non-technical users ask questions.<p>When you&#x27;re on a higher abstraction level, it also allows you to make clear definitions (e.g. for certain KPIs) and define business logic that always needs to be applied to get the correct results.<p>There you don&#x27;t want to leave it up to chance that a filter gets hallucinated in or out when you ask e.g. about your company&#x27;s revenue.<p>At Veezoo (<a href="https:&#x2F;&#x2F;www.veezoo.com" rel="nofollow">https:&#x2F;&#x2F;www.veezoo.com</a>) we have taken the approach that instead of going directly to SQL. So when a user asks a question, Veezoo translates it first into a query against the Knowledge Graph (which represents the business objects, their relationship etc.). From there we compile it into a SQL query depending on the target database (they all have slight differences) without any AI involvement. In this compilation step we also make sure that the business logic is properly applied.</div><br/></div></div><div id="39262465" class="c"><input type="checkbox" id="c-39262465" checked=""/><div class="controls bullet"><span class="by">thecalebf</span><span>|</span><a href="#39262432">parent</a><span>|</span><a href="#39263109">prev</a><span>|</span><a href="#39262186">next</a><span>|</span><label class="collapse" for="c-39262465">[-]</label><label class="expand" for="c-39262465">[1 more]</label></div><br/><div class="children"><div class="content">Neat, would you ever use a local model for that if it could work with ORMs?</div><br/></div></div></div></div><div id="39262186" class="c"><input type="checkbox" id="c-39262186" checked=""/><div class="controls bullet"><span class="by">delichon</span><span>|</span><a href="#39262432">prev</a><span>|</span><a href="#39269514">next</a><span>|</span><label class="collapse" for="c-39262186">[-]</label><label class="expand" for="c-39262186">[2 more]</label></div><br/><div class="children"><div class="content">So you feed it the whole DDL with the prompt. I wonder how it performs on a task like schema normalization or optimization? Say, also include the slow queries log and ask it for the SQL commands to modify the indexes to speed up those queries. Allow it to normalize&#x2F;denormalize&#x2F;materialize as options. Give it a way to run the resulting DDL against a test suite and iterate toward some fitness goal.<p>This would save gobs of compute.</div><br/><div id="39262389" class="c"><input type="checkbox" id="c-39262389" checked=""/><div class="controls bullet"><span class="by">thecalebf</span><span>|</span><a href="#39262186">parent</a><span>|</span><a href="#39269514">next</a><span>|</span><label class="collapse" for="c-39262389">[-]</label><label class="expand" for="c-39262389">[1 more]</label></div><br/><div class="children"><div class="content">That is really interesting. I took note of this. That would be really cool!</div><br/></div></div></div></div><div id="39269514" class="c"><input type="checkbox" id="c-39269514" checked=""/><div class="controls bullet"><span class="by">ainesh93</span><span>|</span><a href="#39262186">prev</a><span>|</span><a href="#39270475">next</a><span>|</span><label class="collapse" for="c-39269514">[-]</label><label class="expand" for="c-39269514">[1 more]</label></div><br/><div class="children"><div class="content">Hard to claim success with &quot;complex&quot; questions if you don&#x27;t account for business context and organizational nuances. For example, &quot;active&quot; listings on Redfin may be a combination of days on market, last open house, last update, etc instead of a Boolean flag called &quot;is_active&quot;. How can we expect models to generate correct SQL at the enterprise level without providing a support structure of business context? The model can only be so good.</div><br/></div></div><div id="39270475" class="c"><input type="checkbox" id="c-39270475" checked=""/><div class="controls bullet"><span class="by">brendongeils</span><span>|</span><a href="#39269514">prev</a><span>|</span><a href="#39262329">next</a><span>|</span><label class="collapse" for="c-39270475">[-]</label><label class="expand" for="c-39270475">[1 more]</label></div><br/><div class="children"><div class="content">previous palantir &amp; scale ai engineer w&#x2F; an ai data science startup here. we found that RAG on a large corpus was the best outcome, not just RAG on queries, but RAG across any data the org uploaded to our system, athena intelligence. semantic search on documents, slack, and other sources provided better outcomes w&#x2F; on-prem models too. this has allowed us to unlock some novel analytics workflows including multi-modal, figma style, etc. we also just opened up our platform for public access. currently working with enterprises like anheuser-busch.<p><a href="https:&#x2F;&#x2F;app.athenaintelligence.ai&#x2F;" rel="nofollow">https:&#x2F;&#x2F;app.athenaintelligence.ai&#x2F;</a></div><br/></div></div><div id="39262329" class="c"><input type="checkbox" id="c-39262329" checked=""/><div class="controls bullet"><span class="by">bottlepalm</span><span>|</span><a href="#39270475">prev</a><span>|</span><a href="#39262883">next</a><span>|</span><label class="collapse" for="c-39262329">[-]</label><label class="expand" for="c-39262329">[4 more]</label></div><br/><div class="children"><div class="content">Is this the data that was used for fine tuning?<p><a href="https:&#x2F;&#x2F;github.com&#x2F;defog-ai&#x2F;sql-eval&#x2F;blob&#x2F;main&#x2F;data&#x2F;questions_gen_postgres.csv">https:&#x2F;&#x2F;github.com&#x2F;defog-ai&#x2F;sql-eval&#x2F;blob&#x2F;main&#x2F;data&#x2F;question...</a></div><br/><div id="39262351" class="c"><input type="checkbox" id="c-39262351" checked=""/><div class="controls bullet"><span class="by">thecalebf</span><span>|</span><a href="#39262329">parent</a><span>|</span><a href="#39262883">next</a><span>|</span><label class="collapse" for="c-39262351">[-]</label><label class="expand" for="c-39262351">[3 more]</label></div><br/><div class="children"><div class="content">No, those are benchmark, evaluation questions. The fine tune dataset was a custom, synthetically generated dataset of ~20k PostgreSQL Text to SQL pairs covering different SQL categories and question types.<p>I mention a little more about it here <a href="https:&#x2F;&#x2F;x.com&#x2F;calebfahlgren&#x2F;status&#x2F;1754247740291207198?s=20" rel="nofollow">https:&#x2F;&#x2F;x.com&#x2F;calebfahlgren&#x2F;status&#x2F;1754247740291207198?s=20</a></div><br/><div id="39262441" class="c"><input type="checkbox" id="c-39262441" checked=""/><div class="controls bullet"><span class="by">Semaphor</span><span>|</span><a href="#39262329">root</a><span>|</span><a href="#39262351">parent</a><span>|</span><a href="#39262883">next</a><span>|</span><label class="collapse" for="c-39262441">[-]</label><label class="expand" for="c-39262441">[2 more]</label></div><br/><div class="children"><div class="content">So this is essentially postgres only? Or how will it handle e.g. MS SQL Schemas and output?</div><br/><div id="39262496" class="c"><input type="checkbox" id="c-39262496" checked=""/><div class="controls bullet"><span class="by">thecalebf</span><span>|</span><a href="#39262329">root</a><span>|</span><a href="#39262441">parent</a><span>|</span><a href="#39262883">next</a><span>|</span><label class="collapse" for="c-39262496">[-]</label><label class="expand" for="c-39262496">[1 more]</label></div><br/><div class="children"><div class="content">Currently Postgres yes, already working on a dataset with more DDLs like MySQL, DuckDB, MSSQL, etc for a second iteration.</div><br/></div></div></div></div></div></div></div></div><div id="39262883" class="c"><input type="checkbox" id="c-39262883" checked=""/><div class="controls bullet"><span class="by">croes</span><span>|</span><a href="#39262329">prev</a><span>|</span><a href="#39262110">next</a><span>|</span><label class="collapse" for="c-39262883">[-]</label><label class="expand" for="c-39262883">[4 more]</label></div><br/><div class="children"><div class="content">I doubt it&#x27;s useful for complex queries or databases without proper relation info in the database schemes.<p>So it&#x27;s limited to rather simple queries for users without SQL knowledge. But I doubt they should have direct access to the database tables.</div><br/><div id="39262992" class="c"><input type="checkbox" id="c-39262992" checked=""/><div class="controls bullet"><span class="by">lofties</span><span>|</span><a href="#39262883">parent</a><span>|</span><a href="#39262979">next</a><span>|</span><label class="collapse" for="c-39262992">[-]</label><label class="expand" for="c-39262992">[2 more]</label></div><br/><div class="children"><div class="content">Usually what you do with these type of LLMs is pass on most if not all of the schema in your query.<p>And you’re right in that the end user wouldn’t have access to the schema, although perhaps via prompt injection they could.</div><br/><div id="39269458" class="c"><input type="checkbox" id="c-39269458" checked=""/><div class="controls bullet"><span class="by">croes</span><span>|</span><a href="#39262883">root</a><span>|</span><a href="#39262992">parent</a><span>|</span><a href="#39262979">next</a><span>|</span><label class="collapse" for="c-39269458">[-]</label><label class="expand" for="c-39269458">[1 more]</label></div><br/><div class="children"><div class="content">The problem is there are programs where the schemes don&#x27;t show the necessary links between the programs data tables like foreign keys for instance.</div><br/></div></div></div></div><div id="39262979" class="c"><input type="checkbox" id="c-39262979" checked=""/><div class="controls bullet"><span class="by">thecalebf</span><span>|</span><a href="#39262883">parent</a><span>|</span><a href="#39262992">prev</a><span>|</span><a href="#39262110">next</a><span>|</span><label class="collapse" for="c-39262979">[-]</label><label class="expand" for="c-39262979">[1 more]</label></div><br/><div class="children"><div class="content">Yes it is designed for users without SQL knowledge, however, it can still perform fairly well with questions on the difficult side (for non technical users) with queries having multiple joins, aggregations, ratios, and subqueries.<p>Next step is fine tuning and leveraging larger models that can handle very complex questions, reasoning, and data schemas since this is only a 7B.</div><br/></div></div></div></div><div id="39262110" class="c"><input type="checkbox" id="c-39262110" checked=""/><div class="controls bullet"><span class="by">mrgaro</span><span>|</span><a href="#39262883">prev</a><span>|</span><a href="#39268311">next</a><span>|</span><label class="collapse" for="c-39262110">[-]</label><label class="expand" for="c-39262110">[1 more]</label></div><br/><div class="children"><div class="content">Would love to get an ollama Modelfile showing an imaginary database schema as an example!</div><br/></div></div><div id="39268311" class="c"><input type="checkbox" id="c-39268311" checked=""/><div class="controls bullet"><span class="by">floridageorgia</span><span>|</span><a href="#39262110">prev</a><span>|</span><a href="#39264140">next</a><span>|</span><label class="collapse" for="c-39268311">[-]</label><label class="expand" for="c-39268311">[1 more]</label></div><br/><div class="children"><div class="content">I would 100% use this if you had a text -&gt; Big Query SQL feature. Please add.</div><br/></div></div><div id="39264140" class="c"><input type="checkbox" id="c-39264140" checked=""/><div class="controls bullet"><span class="by">htrp</span><span>|</span><a href="#39268311">prev</a><span>|</span><a href="#39263375">next</a><span>|</span><label class="collapse" for="c-39264140">[-]</label><label class="expand" for="c-39264140">[1 more]</label></div><br/><div class="children"><div class="content">Would be very interesting if you wrote a bit about what you did to actually do the finetuning</div><br/></div></div><div id="39263375" class="c"><input type="checkbox" id="c-39263375" checked=""/><div class="controls bullet"><span class="by">wantsanagent</span><span>|</span><a href="#39264140">prev</a><span>|</span><a href="#39262213">next</a><span>|</span><label class="collapse" for="c-39263375">[-]</label><label class="expand" for="c-39263375">[2 more]</label></div><br/><div class="children"><div class="content">So I need to ask my lawyer to review a custom license before I can consider using this? No thanks.</div><br/><div id="39263511" class="c"><input type="checkbox" id="c-39263511" checked=""/><div class="controls bullet"><span class="by">thecalebf</span><span>|</span><a href="#39263375">parent</a><span>|</span><a href="#39262213">next</a><span>|</span><label class="collapse" for="c-39263511">[-]</label><label class="expand" for="c-39263511">[1 more]</label></div><br/><div class="children"><div class="content">Sorry, it seems complicated. Since it is a finetune of Deepseek-Coder, I had to include their license.<p>Deepseek is pretty open, just says not to use it for:
- military purposes
- exploiting vulnerabilities etc.<p>Just trying to include as much information as possible from the initial base model.</div><br/></div></div></div></div><div id="39262213" class="c"><input type="checkbox" id="c-39262213" checked=""/><div class="controls bullet"><span class="by">swalsh</span><span>|</span><a href="#39263375">prev</a><span>|</span><a href="#39269199">next</a><span>|</span><label class="collapse" for="c-39262213">[-]</label><label class="expand" for="c-39262213">[2 more]</label></div><br/><div class="children"><div class="content">Is there a DSPy module, where I can give a schema, and can start asking sql questions in a structured way?</div><br/><div id="39262270" class="c"><input type="checkbox" id="c-39262270" checked=""/><div class="controls bullet"><span class="by">thecalebf</span><span>|</span><a href="#39262213">parent</a><span>|</span><a href="#39269199">next</a><span>|</span><label class="collapse" for="c-39262270">[-]</label><label class="expand" for="c-39262270">[1 more]</label></div><br/><div class="children"><div class="content">Not yet, planning to build an open source, local, CLI tool that utilizes natural-sql though!</div><br/></div></div></div></div><div id="39269199" class="c"><input type="checkbox" id="c-39269199" checked=""/><div class="controls bullet"><span class="by">fijiaarone</span><span>|</span><a href="#39262213">prev</a><span>|</span><a href="#39267028">next</a><span>|</span><label class="collapse" for="c-39269199">[-]</label><label class="expand" for="c-39269199">[1 more]</label></div><br/><div class="children"><div class="content">We’re calling anyone who can write SQL a data scientist now?</div><br/></div></div><div id="39267028" class="c"><input type="checkbox" id="c-39267028" checked=""/><div class="controls bullet"><span class="by">Uptrenda</span><span>|</span><a href="#39269199">prev</a><span>|</span><a href="#39262057">next</a><span>|</span><label class="collapse" for="c-39267028">[-]</label><label class="expand" for="c-39267028">[2 more]</label></div><br/><div class="children"><div class="content">Next generation of &#x27;software engineers&#x27; are going to be brain dead: &#x27;duhhh gpt how 2 do x... duh...&#x27;</div><br/><div id="39271037" class="c"><input type="checkbox" id="c-39271037" checked=""/><div class="controls bullet"><span class="by">jamil7</span><span>|</span><a href="#39267028">parent</a><span>|</span><a href="#39262057">next</a><span>|</span><label class="collapse" for="c-39271037">[-]</label><label class="expand" for="c-39271037">[1 more]</label></div><br/><div class="children"><div class="content">Maybe? Or the bar will just be a lot higher for them since there will be less work at the entry level. Either way I think previous generations of SWEs will be at an advantage going forward.</div><br/></div></div></div></div></div></div></div></div></div></body></html>