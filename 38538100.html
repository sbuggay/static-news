<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1701853256376" as="style"/><link rel="stylesheet" href="styles.css?v=1701853256376"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://android-developers.googleblog.com/2023/12/virtual-machines-as-core-android-primitive.html">Virtual Machine as a core Android Primitive</a> <span class="domain">(<a href="https://android-developers.googleblog.com">android-developers.googleblog.com</a>)</span></div><div class="subtext"><span>r00tbeer</span> | <span>98 comments</span></div><br/><div><div id="38541531" class="c"><input type="checkbox" id="c-38541531" checked=""/><div class="controls bullet"><span class="by">usrusr</span><span>|</span><a href="#38541301">next</a><span>|</span><label class="collapse" for="c-38541531">[-]</label><label class="expand" for="c-38541531">[1 more]</label></div><br/><div class="children"><div class="content">Back at university one lecture included an infographic about how CPU and operating system features like MMU, increasing register width and the like all started at mainframe-scale installations and trickled down to desktop scale systems and later to handheld devices at a surprisingly consistent pace. It was the time w2k was trying to make NT features mainstream and J2ME arrived on phones. I extrapolated a little and made a joke about multi-user concepts arriving on phones and a few years later Android was right on schedule (when that happened, repurposing Linux users as units of app isolation was the headline feature in tech news).<p>By that measure, virtualization is long overdue, but I really can&#x27;t claim that I&#x27;m not surprised.</div><br/></div></div><div id="38541301" class="c"><input type="checkbox" id="c-38541301" checked=""/><div class="controls bullet"><span class="by">Animats</span><span>|</span><a href="#38541531">prev</a><span>|</span><a href="#38540096">next</a><span>|</span><label class="collapse" for="c-38541301">[-]</label><label class="expand" for="c-38541301">[3 more]</label></div><br/><div class="children"><div class="content">So what is something running in this virtual machine allowed to do? Talk to the Internet? Talk to the screen? Talk only to whatever started it?<p>How much of this is closed source?</div><br/><div id="38541691" class="c"><input type="checkbox" id="c-38541691" checked=""/><div class="controls bullet"><span class="by">keepamovin</span><span>|</span><a href="#38541301">parent</a><span>|</span><a href="#38541403">next</a><span>|</span><label class="collapse" for="c-38541691">[-]</label><label class="expand" for="c-38541691">[1 more]</label></div><br/><div class="children"><div class="content">Possibly one cybersecurity-related thing you could do is run a headless browser inside this VM, and bridge the network requests to the host network (a little bit like Docker).<p>Using my open-source BrowserBox^0 project then you could have a &quot;bit more isolated&quot; Browser running on your Android device that would add &quot;VM escape&quot; to any zero-day exploit chain that might be a risk.<p>This is speculation tho, I don&#x27;t know if it&#x27;s actually feasible based on the Android reality right now, but assuming the capabilities that are provided are like a regular headless VM, then it should be. :)<p>0: <a href="https:&#x2F;&#x2F;github.com&#x2F;BrowserBox&#x2F;BrowserBox">https:&#x2F;&#x2F;github.com&#x2F;BrowserBox&#x2F;BrowserBox</a></div><br/></div></div><div id="38541403" class="c"><input type="checkbox" id="c-38541403" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#38541301">parent</a><span>|</span><a href="#38541691">prev</a><span>|</span><a href="#38540096">next</a><span>|</span><label class="collapse" for="c-38541403">[-]</label><label class="expand" for="c-38541403">[1 more]</label></div><br/><div class="children"><div class="content">I think the design is intended so that you mostly only get to do the last one.</div><br/></div></div></div></div><div id="38540096" class="c"><input type="checkbox" id="c-38540096" checked=""/><div class="controls bullet"><span class="by">Shoop</span><span>|</span><a href="#38541301">prev</a><span>|</span><a href="#38540084">next</a><span>|</span><label class="collapse" for="c-38540096">[-]</label><label class="expand" for="c-38540096">[17 more]</label></div><br/><div class="children"><div class="content">How does two way isolation work? How do you prevent the host kernel (which presumably has full control of the hardware?) from inspecting the guest VM?</div><br/><div id="38540430" class="c"><input type="checkbox" id="c-38540430" checked=""/><div class="controls bullet"><span class="by">jbott</span><span>|</span><a href="#38540096">parent</a><span>|</span><a href="#38540496">next</a><span>|</span><label class="collapse" for="c-38540430">[-]</label><label class="expand" for="c-38540430">[10 more]</label></div><br/><div class="children"><div class="content">It looks like the host kernel is not in full control – there is a EL2-level hypervisor, pKVM [1] that is actually the highest-privilege domain. This is pretty similar to the Xen architecture [1] where the dom0 linux os in charge of managing the machine is running as a guest of the hypervisor.<p>1. <a href="https:&#x2F;&#x2F;source.android.com&#x2F;docs&#x2F;core&#x2F;virtualization&#x2F;architecture#hypervisor" rel="nofollow noreferrer">https:&#x2F;&#x2F;source.android.com&#x2F;docs&#x2F;core&#x2F;virtualization&#x2F;architec...</a>
2. <a href="https:&#x2F;&#x2F;wiki.xenproject.org&#x2F;wiki&#x2F;Xen_Project_Software_Overview" rel="nofollow noreferrer">https:&#x2F;&#x2F;wiki.xenproject.org&#x2F;wiki&#x2F;Xen_Project_Software_Overvi...</a></div><br/><div id="38540962" class="c"><input type="checkbox" id="c-38540962" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#38540096">root</a><span>|</span><a href="#38540430">parent</a><span>|</span><a href="#38540496">next</a><span>|</span><label class="collapse" for="c-38540962">[-]</label><label class="expand" for="c-38540962">[9 more]</label></div><br/><div class="children"><div class="content">Commonly known as type 1 hypervisor architecture, by opposition to type 2 hypervisor, which run as OS services.<p>Ironically the revenge of microkernels, as most cloud workloads run on type 1 hypervisors.</div><br/><div id="38541060" class="c"><input type="checkbox" id="c-38541060" checked=""/><div class="controls bullet"><span class="by">bonzini</span><span>|</span><a href="#38540096">root</a><span>|</span><a href="#38540962">parent</a><span>|</span><a href="#38540496">next</a><span>|</span><label class="collapse" for="c-38541060">[-]</label><label class="expand" for="c-38541060">[8 more]</label></div><br/><div class="children"><div class="content">No, KVM is also a type 1 hypervisor but it doesn&#x27;t attempt (with the exception of pKVM and of hardware protection features like SEV, neither of which is routinely used by cloud workloads) to protect the guest from a malicious host.</div><br/><div id="38541303" class="c"><input type="checkbox" id="c-38541303" checked=""/><div class="controls bullet"><span class="by">Vogtinator</span><span>|</span><a href="#38540096">root</a><span>|</span><a href="#38541060">parent</a><span>|</span><a href="#38541298">next</a><span>|</span><label class="collapse" for="c-38541303">[-]</label><label class="expand" for="c-38541303">[2 more]</label></div><br/><div class="children"><div class="content">KVM is a type 2 hypervisor as the &quot;Dom 0&quot; kernel has full HW access. Other guests are obviously isolated as configured and are like special processes to userspace.<p>It gets a bit blurry on AArch64 without and with VHE (Virtual Host Extensions) as without VHE (&lt; ARMv8.1) the kernel runs in EL1 (&quot;kernel mode&quot;) most of the time and escalates to EL2 (&quot;hypervisor mode&quot;) only when needed, but with VHE it runs at EL2 all the time. (ref. <a href="https:&#x2F;&#x2F;lwn.net&#x2F;Articles&#x2F;650524&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;lwn.net&#x2F;Articles&#x2F;650524&#x2F;</a>)</div><br/><div id="38541503" class="c"><input type="checkbox" id="c-38541503" checked=""/><div class="controls bullet"><span class="by">bonzini</span><span>|</span><a href="#38540096">root</a><span>|</span><a href="#38541303">parent</a><span>|</span><a href="#38541298">next</a><span>|</span><label class="collapse" for="c-38541503">[-]</label><label class="expand" for="c-38541503">[1 more]</label></div><br/><div class="children"><div class="content">No, &quot;type 2&quot; is defined by Goldberg&#x27;s thesis as &quot;The VMM runs on an extended host [53,75], under the host operating system&quot;, where:<p>* VMM is treated as synonymous with hypervisor<p>* &quot;Extended host&quot; is defined as &quot;A pseudo-machine [99], also called an extended machine [53] or a user machine [75], is a composite machine produced through a combination of hardware and software, in which the machine&#x27;s apparent architecture has been changed slightly to make the machine more convenient to use. Typically these architectural changes have taken the form of removing I&#x2F;O channels and devices, and adding system calls to perform I&#x2F;O and and other operations&quot;<p>In other words, type 1 (&quot;bare machine hypervisor&quot;) runs in supervisor mode and type 2 runs in user mode. QEMU running in dynamic binary translation mode is a type 2 VMM.<p>KVM runs on a bare machine, but it
delegates some services to a less privileged component such as QEMU or crosvm or Firecracker.  This is not a type 2 hypervisor, it is a type 1 hypervisor that follows security principles such as privilege separation.</div><br/></div></div></div></div><div id="38541298" class="c"><input type="checkbox" id="c-38541298" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#38540096">root</a><span>|</span><a href="#38541060">parent</a><span>|</span><a href="#38541303">prev</a><span>|</span><a href="#38540496">next</a><span>|</span><label class="collapse" for="c-38541298">[-]</label><label class="expand" for="c-38541298">[5 more]</label></div><br/><div class="children"><div class="content">Where in my comment did I refer explicitly to KVM feature set, or that it is used by cloud vendors?</div><br/><div id="38541458" class="c"><input type="checkbox" id="c-38541458" checked=""/><div class="controls bullet"><span class="by">bonzini</span><span>|</span><a href="#38540096">root</a><span>|</span><a href="#38541298">parent</a><span>|</span><a href="#38540496">next</a><span>|</span><label class="collapse" for="c-38541458">[-]</label><label class="expand" for="c-38541458">[4 more]</label></div><br/><div class="children"><div class="content">KVM is pretty much the only hypervisor that cloud vendors use these days.<p>So it&#x27;s true that &quot;most cloud workloads run on type 1 hypervisors&quot; (KVM is one) but not that most cloud vendors&#x2F;workloads run on microkernel-like hypervisors, with the exception of Azure.</div><br/><div id="38541570" class="c"><input type="checkbox" id="c-38541570" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#38540096">root</a><span>|</span><a href="#38541458">parent</a><span>|</span><a href="#38540496">next</a><span>|</span><label class="collapse" for="c-38541570">[-]</label><label class="expand" for="c-38541570">[3 more]</label></div><br/><div class="children"><div class="content">You definitly didn&#x27;t understood my commment.</div><br/><div id="38541678" class="c"><input type="checkbox" id="c-38541678" checked=""/><div class="controls bullet"><span class="by">bonzini</span><span>|</span><a href="#38540096">root</a><span>|</span><a href="#38541570">parent</a><span>|</span><a href="#38540496">next</a><span>|</span><label class="collapse" for="c-38541678">[-]</label><label class="expand" for="c-38541678">[2 more]</label></div><br/><div class="children"><div class="content">Then can you explain how cloud workloads is the revenge of the microkernel, since there is exactly 1 major cloud provider that uses a microkernel-like hypervisor?</div><br/><div id="38541706" class="c"><input type="checkbox" id="c-38541706" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#38540096">root</a><span>|</span><a href="#38541678">parent</a><span>|</span><a href="#38540496">next</a><span>|</span><label class="collapse" for="c-38541706">[-]</label><label class="expand" for="c-38541706">[1 more]</label></div><br/><div class="children"><div class="content">By not running monolithic kernels on top of bare metal, rather virtualized, or even better with nested virtualization, thus throwing out the door all the supposedly performance advantages in the usual monolithic vs microkernel flamewar discussions, regarding context switching.<p>Additionally to make it to the next level, they run endless amount of container workloads.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="38540496" class="c"><input type="checkbox" id="c-38540496" checked=""/><div class="controls bullet"><span class="by">transpute</span><span>|</span><a href="#38540096">parent</a><span>|</span><a href="#38540430">prev</a><span>|</span><a href="#38540529">next</a><span>|</span><label class="collapse" for="c-38540496">[-]</label><label class="expand" for="c-38540496">[1 more]</label></div><br/><div class="children"><div class="content">The architecture pattern is similar to Bromium&#x2F;HP AX + Type 2 μXen on x86, <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=bNVe2y34dnM" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=bNVe2y34dnM</a> (2018), which ships on HP business PCs.<p>Bare metal runs a tiny L0 hypervisor making use of hardware support for nested virtualization.  In turn, the L0 can run an L1 hypervisor, e.g. KVM or &quot;host&quot; OS, or minimal L1 VMs that are peers to the L1 &quot;host&quot;-guest of L0.<p>Google pKVM-for-Arm tech talk (2022), hopefully x86 will follow, <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=9npebeVFbFw" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=9npebeVFbFw</a></div><br/></div></div><div id="38540529" class="c"><input type="checkbox" id="c-38540529" checked=""/><div class="controls bullet"><span class="by">anonuser123456</span><span>|</span><a href="#38540096">parent</a><span>|</span><a href="#38540496">prev</a><span>|</span><a href="#38540201">next</a><span>|</span><label class="collapse" for="c-38540529">[-]</label><label class="expand" for="c-38540529">[1 more]</label></div><br/><div class="children"><div class="content">You make the various hardware modules security context aware.  You then give the host a separate security context from guests.  You need a trusted hypervisor to bootstrap it.</div><br/></div></div><div id="38540201" class="c"><input type="checkbox" id="c-38540201" checked=""/><div class="controls bullet"><span class="by">haltist</span><span>|</span><a href="#38540096">parent</a><span>|</span><a href="#38540529">prev</a><span>|</span><a href="#38540161">next</a><span>|</span><label class="collapse" for="c-38540201">[-]</label><label class="expand" for="c-38540201">[1 more]</label></div><br/><div class="children"><div class="content">You can inspect their hypervisor code and verify the host kernel can not access the VM after creation but if you are running as root then you can obviously inspect whatever process is under host&#x2F;hypervisor control.</div><br/></div></div><div id="38540161" class="c"><input type="checkbox" id="c-38540161" checked=""/><div class="controls bullet"><span class="by">ReactiveJelly</span><span>|</span><a href="#38540096">parent</a><span>|</span><a href="#38540201">prev</a><span>|</span><a href="#38540159">next</a><span>|</span><label class="collapse" for="c-38540161">[-]</label><label class="expand" for="c-38540161">[2 more]</label></div><br/><div class="children"><div class="content">It must be relying on a TPM somehow, right? That isn&#x27;t possible with any normal software VM</div><br/><div id="38540561" class="c"><input type="checkbox" id="c-38540561" checked=""/><div class="controls bullet"><span class="by">transpute</span><span>|</span><a href="#38540096">root</a><span>|</span><a href="#38540161">parent</a><span>|</span><a href="#38540159">next</a><span>|</span><label class="collapse" for="c-38540561">[-]</label><label class="expand" for="c-38540561">[1 more]</label></div><br/><div class="children"><div class="content">This eschews hardware-based TEE (like TrustZone or TPM) in favor of hardware support for nested virtualization, plus open-source L0 hypervisor code.<p>In the best case future, this will offer security properties based on a small OSS attack surface, rather than black box TEE firmware.</div><br/></div></div></div></div></div></div><div id="38540084" class="c"><input type="checkbox" id="c-38540084" checked=""/><div class="controls bullet"><span class="by">rstat1</span><span>|</span><a href="#38540096">prev</a><span>|</span><a href="#38540500">next</a><span>|</span><label class="collapse" for="c-38540084">[-]</label><label class="expand" for="c-38540084">[1 more]</label></div><br/><div class="children"><div class="content">Its annoying that I can&#x27;t use this without greater-than-normal-user access.</div><br/></div></div><div id="38540500" class="c"><input type="checkbox" id="c-38540500" checked=""/><div class="controls bullet"><span class="by">kmeisthax</span><span>|</span><a href="#38540084">prev</a><span>|</span><a href="#38541278">next</a><span>|</span><label class="collapse" for="c-38540500">[-]</label><label class="expand" for="c-38540500">[2 more]</label></div><br/><div class="children"><div class="content">The use of the word &quot;privileged&quot; seems to imply that only system apps will be able to use this - i.e. no installing virtual machines off Google Play anytime soon. Bleh.</div><br/><div id="38540518" class="c"><input type="checkbox" id="c-38540518" checked=""/><div class="controls bullet"><span class="by">transpute</span><span>|</span><a href="#38540500">parent</a><span>|</span><a href="#38541278">next</a><span>|</span><label class="collapse" for="c-38540518">[-]</label><label class="expand" for="c-38540518">[1 more]</label></div><br/><div class="children"><div class="content">Hopefully standard tooling will appear in time. Patreon PoC of unprivileged VMs, <a href="https:&#x2F;&#x2F;www.xda-developers.com&#x2F;nestbox-hands-on&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.xda-developers.com&#x2F;nestbox-hands-on&#x2F;</a><p><i>&gt; On the Pixel 7, the most configuration you&#x27;ll need to do is similar to Shizuku. You connect to your own phone over wireless adb, configure the maximum container size, and then choose your Linux distribution. It&#x27;ll download, configure, and then execute the virtual machine.</i></div><br/></div></div></div></div><div id="38541278" class="c"><input type="checkbox" id="c-38541278" checked=""/><div class="controls bullet"><span class="by">robertwt7</span><span>|</span><a href="#38540500">prev</a><span>|</span><a href="#38538542">next</a><span>|</span><label class="collapse" for="c-38541278">[-]</label><label class="expand" for="c-38541278">[3 more]</label></div><br/><div class="children"><div class="content">Although this is very exciting. Surely performance is not the benefit here? It won’t perform better than android app built not on top of the virtualisation tdchnology?</div><br/><div id="38541374" class="c"><input type="checkbox" id="c-38541374" checked=""/><div class="controls bullet"><span class="by">omeid2</span><span>|</span><a href="#38541278">parent</a><span>|</span><a href="#38541360">next</a><span>|</span><label class="collapse" for="c-38541374">[-]</label><label class="expand" for="c-38541374">[1 more]</label></div><br/><div class="children"><div class="content">Android apps are already running on top of a Virtualisation Technology&quot;, both current ART (Android Runtime) and the previous one, Delvik, runtimes are virtual machines, process level virtual machines, but they do bytecode translation&#x2F;JIT nonetheless.<p>If AVF allows running native code, it might actually be cheaper than the current arrangement.</div><br/></div></div><div id="38541360" class="c"><input type="checkbox" id="c-38541360" checked=""/><div class="controls bullet"><span class="by">ips1512</span><span>|</span><a href="#38541278">parent</a><span>|</span><a href="#38541374">prev</a><span>|</span><a href="#38538542">next</a><span>|</span><label class="collapse" for="c-38541360">[-]</label><label class="expand" for="c-38541360">[1 more]</label></div><br/><div class="children"><div class="content">Android apps performs better if built natively, Google might take some steps to enhance its performance.</div><br/></div></div></div></div><div id="38538542" class="c"><input type="checkbox" id="c-38538542" checked=""/><div class="controls bullet"><span class="by">awoimbee</span><span>|</span><a href="#38541278">prev</a><span>|</span><a href="#38539559">next</a><span>|</span><label class="collapse" for="c-38538542">[-]</label><label class="expand" for="c-38538542">[6 more]</label></div><br/><div class="children"><div class="content">Will this allow running linux VMs on any Android device ?
Via something like  nestbox: <a href="https:&#x2F;&#x2F;www.patreon.com&#x2F;posts&#x2F;74333551" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.patreon.com&#x2F;posts&#x2F;74333551</a> ?</div><br/><div id="38538882" class="c"><input type="checkbox" id="c-38538882" checked=""/><div class="controls bullet"><span class="by">heavyset_go</span><span>|</span><a href="#38538542">parent</a><span>|</span><a href="#38539315">next</a><span>|</span><label class="collapse" for="c-38538882">[-]</label><label class="expand" for="c-38538882">[1 more]</label></div><br/><div class="children"><div class="content">This is already possible if your phones ship with the KVM kernel module, like on some Pixel devices, but reading the article suggests that KVM will become standard on all Android devices to enable this.<p>edit: according to this[1], yes, the pKVM functionality that&#x27;s standard in Android exposes KVM functionality so that you can run VMs on Android.<p>[1] <a href="https:&#x2F;&#x2F;www.xda-developers.com&#x2F;android-13-dp1-google-pixel-6-kvm-virtual-machine&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.xda-developers.com&#x2F;android-13-dp1-google-pixel-6...</a></div><br/></div></div><div id="38539315" class="c"><input type="checkbox" id="c-38539315" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#38538542">parent</a><span>|</span><a href="#38538882">prev</a><span>|</span><a href="#38541262">next</a><span>|</span><label class="collapse" for="c-38539315">[-]</label><label class="expand" for="c-38539315">[1 more]</label></div><br/><div class="children"><div class="content">AVF supports this, people have used it to boot Linux and Windows. See for example <a href="https:&#x2F;&#x2F;twitter.com&#x2F;kdrag0n&#x2F;status&#x2F;1493089098944237568" rel="nofollow noreferrer">https:&#x2F;&#x2F;twitter.com&#x2F;kdrag0n&#x2F;status&#x2F;1493089098944237568</a></div><br/></div></div><div id="38541262" class="c"><input type="checkbox" id="c-38541262" checked=""/><div class="controls bullet"><span class="by">KRAKRISMOTT</span><span>|</span><a href="#38538542">parent</a><span>|</span><a href="#38539315">prev</a><span>|</span><a href="#38540078">next</a><span>|</span><label class="collapse" for="c-38541262">[-]</label><label class="expand" for="c-38541262">[2 more]</label></div><br/><div class="children"><div class="content">Are the VMs hardware accelerated?</div><br/><div id="38541408" class="c"><input type="checkbox" id="c-38541408" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#38538542">root</a><span>|</span><a href="#38541262">parent</a><span>|</span><a href="#38540078">next</a><span>|</span><label class="collapse" for="c-38541408">[-]</label><label class="expand" for="c-38541408">[1 more]</label></div><br/><div class="children"><div class="content">Yes.</div><br/></div></div></div></div><div id="38540078" class="c"><input type="checkbox" id="c-38540078" checked=""/><div class="controls bullet"><span class="by">jsight</span><span>|</span><a href="#38538542">parent</a><span>|</span><a href="#38541262">prev</a><span>|</span><a href="#38539559">next</a><span>|</span><label class="collapse" for="c-38540078">[-]</label><label class="expand" for="c-38540078">[1 more]</label></div><br/><div class="children"><div class="content">It sounds like it will become common eventually. I just wish that there were a more supported pathway to running full VMs like that. These devices are powerful enough to do it pretty well now.</div><br/></div></div></div></div><div id="38538771" class="c"><input type="checkbox" id="c-38538771" checked=""/><div class="controls bullet"><span class="by">ForkMeOnTinder</span><span>|</span><a href="#38539559">prev</a><span>|</span><a href="#38539122">next</a><span>|</span><label class="collapse" for="c-38538771">[-]</label><label class="expand" for="c-38538771">[19 more]</label></div><br/><div class="children"><div class="content">So on desktop, if I spin up a VM with networking disabled I feel pretty confident I can run anything safely, even malware is not going to escape.<p>What&#x27;s the current state of the art for Android virtualization? Let&#x27;s assume we&#x27;re talking about the newest Pixel and newest Android version. Is there any way to safely run malware or the Facebook app in some sort of air-gapped container and throw it away when you&#x27;re done?</div><br/><div id="38539151" class="c"><input type="checkbox" id="c-38539151" checked=""/><div class="controls bullet"><span class="by">fleventynine</span><span>|</span><a href="#38538771">parent</a><span>|</span><a href="#38540313">next</a><span>|</span><label class="collapse" for="c-38539151">[-]</label><label class="expand" for="c-38539151">[12 more]</label></div><br/><div class="children"><div class="content">&gt; if I spin up a VM with networking disabled I feel pretty confident I can run anything safely, even malware is not going to escape.<p>You are putting too much faith in your VM monitor to keep you safe. There&#x27;s a lot of attack surface in (for example) QEMU peripherals, and there&#x27;s plenty of examples of VM escape [1]. CrosVM is probably the only publicly available VMM I&#x27;d be willing to trust, and even then I&#x27;d be nervous running state-sponsored malware on a machine with important data.<p>[1] <a href="https:&#x2F;&#x2F;www.google.com&#x2F;search?q=qemu+vm+escape" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.google.com&#x2F;search?q=qemu+vm+escape</a></div><br/><div id="38539641" class="c"><input type="checkbox" id="c-38539641" checked=""/><div class="controls bullet"><span class="by">bonzini</span><span>|</span><a href="#38538771">root</a><span>|</span><a href="#38539151">parent</a><span>|</span><a href="#38539550">next</a><span>|</span><label class="collapse" for="c-38539641">[-]</label><label class="expand" for="c-38539641">[3 more]</label></div><br/><div class="children"><div class="content">While QEMU uses C, which is not great, it has on its side 15+ years of hardening by the KVM developers. The problem with QEMU is not so much insecurity, it&#x27;s that it contains the kitchen sink.<p>However, most of the exploits you&#x27;ll find in QEMU are against configurations that are never used in real world virtualization scenarios where guests are untrusted. You can recognize them because hardware not commonly used with untrusted guests does not get a CVE.<p>For a while, slirp was the remaining major issue because it was used way beyond the original intention. But now it&#x27;s been tamed and there&#x27;s also passt, a much higher performance and much more secure implementation of user-mode networking.</div><br/><div id="38541097" class="c"><input type="checkbox" id="c-38541097" checked=""/><div class="controls bullet"><span class="by">ungamedplayer</span><span>|</span><a href="#38538771">root</a><span>|</span><a href="#38539641">parent</a><span>|</span><a href="#38539550">next</a><span>|</span><label class="collapse" for="c-38541097">[-]</label><label class="expand" for="c-38541097">[2 more]</label></div><br/><div class="children"><div class="content">&gt; You can recognize them because hardware not commonly used with untrusted guests does not get a CVE.<p>This is not true. Even non default configuration of any software or hardware that contains a security vulnerability can get a CVE.  It has in the past and will again in the future.<p>Source: I have assigned over 2000 cves for the kernel.</div><br/><div id="38541521" class="c"><input type="checkbox" id="c-38541521" checked=""/><div class="controls bullet"><span class="by">bonzini</span><span>|</span><a href="#38538771">root</a><span>|</span><a href="#38541097">parent</a><span>|</span><a href="#38539550">next</a><span>|</span><label class="collapse" for="c-38541521">[-]</label><label class="expand" for="c-38541521">[1 more]</label></div><br/><div class="children"><div class="content">Yes, and the policy of QEMU is to not assign CVEs for bugs that would generally be hit only when QEMU is used as a development platform, as opposed to using it to offer virtualization services.<p><a href="https:&#x2F;&#x2F;www.qemu.org&#x2F;contribute&#x2F;security-process&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.qemu.org&#x2F;contribute&#x2F;security-process&#x2F;</a><p>We are colleagues by the way. :)</div><br/></div></div></div></div></div></div><div id="38539550" class="c"><input type="checkbox" id="c-38539550" checked=""/><div class="controls bullet"><span class="by">monocasa</span><span>|</span><a href="#38538771">root</a><span>|</span><a href="#38539151">parent</a><span>|</span><a href="#38539641">prev</a><span>|</span><a href="#38539685">next</a><span>|</span><label class="collapse" for="c-38539550">[-]</label><label class="expand" for="c-38539550">[7 more]</label></div><br/><div class="children"><div class="content">I&#x27;d probably trust firecracker too since it was designed specifically to avoid qemu&#x27;s attack surface and runs in production for Amazon.</div><br/><div id="38540294" class="c"><input type="checkbox" id="c-38540294" checked=""/><div class="controls bullet"><span class="by">my123</span><span>|</span><a href="#38538771">root</a><span>|</span><a href="#38539550">parent</a><span>|</span><a href="#38539692">next</a><span>|</span><label class="collapse" for="c-38540294">[-]</label><label class="expand" for="c-38540294">[2 more]</label></div><br/><div class="children"><div class="content">Qemu also runs in production darn near everywhere, especially on Xen.</div><br/></div></div><div id="38539692" class="c"><input type="checkbox" id="c-38539692" checked=""/><div class="controls bullet"><span class="by">surajrmal</span><span>|</span><a href="#38538771">root</a><span>|</span><a href="#38539550">parent</a><span>|</span><a href="#38540294">prev</a><span>|</span><a href="#38540273">next</a><span>|</span><label class="collapse" for="c-38539692">[-]</label><label class="expand" for="c-38539692">[3 more]</label></div><br/><div class="children"><div class="content">It also happens to be a fork of crosvm</div><br/><div id="38540044" class="c"><input type="checkbox" id="c-38540044" checked=""/><div class="controls bullet"><span class="by">monocasa</span><span>|</span><a href="#38538771">root</a><span>|</span><a href="#38539692">parent</a><span>|</span><a href="#38540273">next</a><span>|</span><label class="collapse" for="c-38540044">[-]</label><label class="expand" for="c-38540044">[2 more]</label></div><br/><div class="children"><div class="content">It is not, but they do share some code.</div><br/><div id="38541201" class="c"><input type="checkbox" id="c-38541201" checked=""/><div class="controls bullet"><span class="by">surajrmal</span><span>|</span><a href="#38538771">root</a><span>|</span><a href="#38540044">parent</a><span>|</span><a href="#38540273">next</a><span>|</span><label class="collapse" for="c-38541201">[-]</label><label class="expand" for="c-38541201">[1 more]</label></div><br/><div class="children"><div class="content">According to their own FAQ it is indeed: <a href="https:&#x2F;&#x2F;github.com&#x2F;firecracker-microvm&#x2F;firecracker&#x2F;blob&#x2F;main&#x2F;FAQ.md#who-developed-firecracker">https:&#x2F;&#x2F;github.com&#x2F;firecracker-microvm&#x2F;firecracker&#x2F;blob&#x2F;main...</a></div><br/></div></div></div></div></div></div></div></div><div id="38539685" class="c"><input type="checkbox" id="c-38539685" checked=""/><div class="controls bullet"><span class="by">surajrmal</span><span>|</span><a href="#38538771">root</a><span>|</span><a href="#38539151">parent</a><span>|</span><a href="#38539550">prev</a><span>|</span><a href="#38540313">next</a><span>|</span><label class="collapse" for="c-38539685">[-]</label><label class="expand" for="c-38539685">[1 more]</label></div><br/><div class="children"><div class="content">Luckily android is using crosvm</div><br/></div></div></div></div><div id="38540313" class="c"><input type="checkbox" id="c-38540313" checked=""/><div class="controls bullet"><span class="by">jmprspret</span><span>|</span><a href="#38538771">parent</a><span>|</span><a href="#38539151">prev</a><span>|</span><a href="#38539622">next</a><span>|</span><label class="collapse" for="c-38540313">[-]</label><label class="expand" for="c-38540313">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Is there any way to safely run malware or the Facebook app in some sort of air-gapped container and throw it away when you&#x27;re done?<p>User profiles can be used in this exact way. Guest user if you intend to install+wipe it right away (though this will prove cumbersome eventually due to having to reinstall the app every time, etc). There is a significant isolation benefit to them, though not currently virtualized. With the isolation can come usability issues. Like transferring files from one profile to another.<p>They can very slow however (slow to load+setup, and switch between, I mean. when you&#x27;re inside its effectively a separate, fresh, OS install).</div><br/></div></div><div id="38539622" class="c"><input type="checkbox" id="c-38539622" checked=""/><div class="controls bullet"><span class="by">ClassyJacket</span><span>|</span><a href="#38538771">parent</a><span>|</span><a href="#38540313">prev</a><span>|</span><a href="#38538804">next</a><span>|</span><label class="collapse" for="c-38539622">[-]</label><label class="expand" for="c-38539622">[1 more]</label></div><br/><div class="children"><div class="content">*malware like the Facebook app</div><br/></div></div><div id="38538804" class="c"><input type="checkbox" id="c-38538804" checked=""/><div class="controls bullet"><span class="by">heavyset_go</span><span>|</span><a href="#38538771">parent</a><span>|</span><a href="#38539622">prev</a><span>|</span><a href="#38539122">next</a><span>|</span><label class="collapse" for="c-38538804">[-]</label><label class="expand" for="c-38538804">[4 more]</label></div><br/><div class="children"><div class="content">Pretty sure Android already uses Linux containers&#x2F;namespaces for app isolation.</div><br/><div id="38539841" class="c"><input type="checkbox" id="c-38539841" checked=""/><div class="controls bullet"><span class="by">seabrookmx</span><span>|</span><a href="#38538771">root</a><span>|</span><a href="#38538804">parent</a><span>|</span><a href="#38539326">next</a><span>|</span><label class="collapse" for="c-38539841">[-]</label><label class="expand" for="c-38539841">[1 more]</label></div><br/><div class="children"><div class="content">You&#x27;re thinking of ChromeOS I think, which uses a combination of containers and virtualization (via the same VMM in this article) for Linux and Android apps..</div><br/></div></div><div id="38539326" class="c"><input type="checkbox" id="c-38539326" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#38538771">root</a><span>|</span><a href="#38538804">parent</a><span>|</span><a href="#38539841">prev</a><span>|</span><a href="#38539122">next</a><span>|</span><label class="collapse" for="c-38539326">[-]</label><label class="expand" for="c-38539326">[2 more]</label></div><br/><div class="children"><div class="content">It uses separate UIDs mostly.</div><br/><div id="38539405" class="c"><input type="checkbox" id="c-38539405" checked=""/><div class="controls bullet"><span class="by">phone8675309</span><span>|</span><a href="#38538771">root</a><span>|</span><a href="#38539326">parent</a><span>|</span><a href="#38539122">next</a><span>|</span><label class="collapse" for="c-38539405">[-]</label><label class="expand" for="c-38539405">[1 more]</label></div><br/><div class="children"><div class="content">Along with SELinux</div><br/></div></div></div></div></div></div></div></div><div id="38539122" class="c"><input type="checkbox" id="c-38539122" checked=""/><div class="controls bullet"><span class="by">tripdout</span><span>|</span><a href="#38538771">prev</a><span>|</span><a href="#38540958">next</a><span>|</span><label class="collapse" for="c-38539122">[-]</label><label class="expand" for="c-38539122">[2 more]</label></div><br/><div class="children"><div class="content">Why does the tutorial for creating a demo app, <a href="https:&#x2F;&#x2F;source.android.com&#x2F;docs&#x2F;core&#x2F;virtualization&#x2F;writeavfapp" rel="nofollow noreferrer">https:&#x2F;&#x2F;source.android.com&#x2F;docs&#x2F;core&#x2F;virtualization&#x2F;writeavf...</a>, only work on Cuttlefish (emulator)?<p>Nevermind, only the demo app, not the tutorial, so who knows what its doing.</div><br/><div id="38539274" class="c"><input type="checkbox" id="c-38539274" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#38539122">parent</a><span>|</span><a href="#38540958">next</a><span>|</span><label class="collapse" for="c-38539274">[-]</label><label class="expand" for="c-38539274">[1 more]</label></div><br/><div class="children"><div class="content">Maybe because it requires a platform signature to use?</div><br/></div></div></div></div><div id="38540958" class="c"><input type="checkbox" id="c-38540958" checked=""/><div class="controls bullet"><span class="by">jeffrallen</span><span>|</span><a href="#38539122">prev</a><span>|</span><a href="#38538404">next</a><span>|</span><label class="collapse" for="c-38540958">[-]</label><label class="expand" for="c-38540958">[4 more]</label></div><br/><div class="children"><div class="content">Another salvo in the war on general purpose computing.(<a href="https:&#x2F;&#x2F;lwn.net&#x2F;Articles&#x2F;473794&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;lwn.net&#x2F;Articles&#x2F;473794&#x2F;</a>)</div><br/><div id="38541080" class="c"><input type="checkbox" id="c-38541080" checked=""/><div class="controls bullet"><span class="by">transpute</span><span>|</span><a href="#38540958">parent</a><span>|</span><a href="#38538404">next</a><span>|</span><label class="collapse" for="c-38541080">[-]</label><label class="expand" for="c-38541080">[3 more]</label></div><br/><div class="children"><div class="content">If Android phones can run non-Android VMs of the user&#x27;s choice, the phones will gain new purpose.</div><br/><div id="38541229" class="c"><input type="checkbox" id="c-38541229" checked=""/><div class="controls bullet"><span class="by">jeffrallen</span><span>|</span><a href="#38540958">root</a><span>|</span><a href="#38541080">parent</a><span>|</span><a href="#38538404">next</a><span>|</span><label class="collapse" for="c-38541229">[-]</label><label class="expand" for="c-38541229">[2 more]</label></div><br/><div class="children"><div class="content">Ok cool.<p>But you and I both know that this feature was designed for the DMCA-lovin&#x27; Hollywood types and the control-freak enterprise IT BOFHs, not for your cool hack.<p>Let&#x27;s use their tools of oppression against them! (fist emoji)</div><br/><div id="38541592" class="c"><input type="checkbox" id="c-38541592" checked=""/><div class="controls bullet"><span class="by">transpute</span><span>|</span><a href="#38540958">root</a><span>|</span><a href="#38541229">parent</a><span>|</span><a href="#38538404">next</a><span>|</span><label class="collapse" for="c-38541592">[-]</label><label class="expand" for="c-38541592">[1 more]</label></div><br/><div class="children"><div class="content">Media and Enterprise already have TrustZone, Knox, Intune, etc. which work &quot;enough&quot;.<p>Newer markets include cashless (CBDC) payments and digital identity anchored in human biology, demanding more security than legacy content.<p><i>&gt; Biometrics: By deploying biometric trusted applets in an isolated virtual machine, developers will have the isolation guarantee, access to more compute power for biometric algorithms, easy updatability regardless of the Trustzone operating system, and a more streamlined deployment.</i><p>Fortunately, OSS can enable N-party transaction transparency, we don&#x27;t have to settle for one-way mirrors and WeChat clones.</div><br/></div></div></div></div></div></div></div></div><div id="38538404" class="c"><input type="checkbox" id="c-38538404" checked=""/><div class="controls bullet"><span class="by">josephcsible</span><span>|</span><a href="#38540958">prev</a><span>|</span><a href="#38538562">next</a><span>|</span><label class="collapse" for="c-38538404">[-]</label><label class="expand" for="c-38538404">[37 more]</label></div><br/><div class="children"><div class="content">Two-way isolation seems like it&#x27;d only be useful for DRM and Treacherous Computing.</div><br/><div id="38538931" class="c"><input type="checkbox" id="c-38538931" checked=""/><div class="controls bullet"><span class="by">nl</span><span>|</span><a href="#38538404">parent</a><span>|</span><a href="#38538593">next</a><span>|</span><label class="collapse" for="c-38538931">[-]</label><label class="expand" for="c-38538931">[21 more]</label></div><br/><div class="children"><div class="content">This is such a bad take.<p>I&#x27;d love the easy ability to run confidential computing loads with fine grained control over the data it gets access to. You can do this now on the desktop using SGX (etc) but on mobile it&#x27;s really hard.<p>As a specific example of this, it&#x27;d be great to be able to run Whisper continually and have strong, system level guarantees about what can read the data.</div><br/><div id="38539301" class="c"><input type="checkbox" id="c-38539301" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38538931">parent</a><span>|</span><a href="#38539593">next</a><span>|</span><label class="collapse" for="c-38539301">[-]</label><label class="expand" for="c-38539301">[11 more]</label></div><br/><div class="children"><div class="content">The threat model you have in your head seems to imply that you don&#x27;t trust your OS to not peek into what Whisper is doing? There are very few workloads that need or can operate under that model.</div><br/><div id="38539353" class="c"><input type="checkbox" id="c-38539353" checked=""/><div class="controls bullet"><span class="by">somanytta</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38539301">parent</a><span>|</span><a href="#38540099">next</a><span>|</span><label class="collapse" for="c-38539353">[-]</label><label class="expand" for="c-38539353">[8 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not really a matter of need, more a matter of good hygiene.<p>Do you trust any modern OS not to accidently include sensitive information when it generates a crash report for an app and sends it off the some remote server in the background?<p>Isolation is a useful tool. In an ideal world it can be done perfectly at the OS level, but we don&#x27;t live in that world.</div><br/><div id="38539410" class="c"><input type="checkbox" id="c-38539410" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38539353">parent</a><span>|</span><a href="#38540099">next</a><span>|</span><label class="collapse" for="c-38539410">[-]</label><label class="expand" for="c-38539410">[7 more]</label></div><br/><div class="children"><div class="content">I agree that being able to isolate things that have different security domains is a useful tool. That said, I am not really seeing how pKVM provides useful primitives for much other than DRM, which has historically been the primary usecase for trusted execution that isolated VMs seem to provide.</div><br/><div id="38539659" class="c"><input type="checkbox" id="c-38539659" checked=""/><div class="controls bullet"><span class="by">somanytta</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38539410">parent</a><span>|</span><a href="#38540124">next</a><span>|</span><label class="collapse" for="c-38539659">[-]</label><label class="expand" for="c-38539659">[2 more]</label></div><br/><div class="children"><div class="content">Consider that, I want to be able to use a regular android OS, but I don&#x27;t completely trust it, either its purposely malicious or just accidently going to leak info. So isolation is good in this case, its much easier to audit the mechanism of isolation rather than the whole OS.<p>The problem with DRM and &quot;trusted computing&quot; part is that it&#x27;s under someone else&#x27;s control, some central authority etc. From my reading of the docs on this, this is not the case with pVM, from <a href="https:&#x2F;&#x2F;source.android.com&#x2F;docs&#x2F;core&#x2F;virtualization&#x2F;security" rel="nofollow noreferrer">https:&#x2F;&#x2F;source.android.com&#x2F;docs&#x2F;core&#x2F;virtualization&#x2F;security</a><p>&gt; Data is tied to instances of a pVM, and secure boot ensures that access to an instance’s data can be controlled<p>&gt; When a device is unlocked with fastboot oem unlock, user data is wiped.<p>&gt; Once unlocked, the owner of the device is free to reflash partitions that are usually protected by verified boot, including partitions containing the pKVM implementation. Therefore, pKVM on an unlocked device won&#x27;t be trusted to uphold the security model.<p>So my reading of this is that that it is under the users control, as long as they have the ability to unlock the bootloader, and reflash the device with their own images.<p>I&#x27;d love someone who is more knowledgeable to weigh in, but this tech, to me, doesn&#x27;t seem that close to TPM&#x2F;DRM type chips where there is no possibility of user control.</div><br/><div id="38541420" class="c"><input type="checkbox" id="c-38541420" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38539659">parent</a><span>|</span><a href="#38540124">next</a><span>|</span><label class="collapse" for="c-38541420">[-]</label><label class="expand" for="c-38541420">[1 more]</label></div><br/><div class="children"><div class="content">It is control in the sense that you can run your own applets I guess, but it is not control in the sense that you can necessarily inspect what the programs are doing, because once you reflash the device I&#x27;m sure the DRM programs will refuse to run.</div><br/></div></div></div></div><div id="38540124" class="c"><input type="checkbox" id="c-38540124" checked=""/><div class="controls bullet"><span class="by">nl</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38539410">parent</a><span>|</span><a href="#38539659">prev</a><span>|</span><a href="#38539768">next</a><span>|</span><label class="collapse" for="c-38540124">[-]</label><label class="expand" for="c-38540124">[2 more]</label></div><br/><div class="children"><div class="content">As I said in my other response, I make heavy use of trusted (confidential) VMs for machine learning in cloud environments.<p>There are also vendors that are doing smart contract execution in trusted computing devices so you can get the benefits of trusted execution without the overhead of everyone executing the same code.</div><br/><div id="38541452" class="c"><input type="checkbox" id="c-38541452" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38540124">parent</a><span>|</span><a href="#38539768">next</a><span>|</span><label class="collapse" for="c-38541452">[-]</label><label class="expand" for="c-38541452">[1 more]</label></div><br/><div class="children"><div class="content">There are a handful of potential uses for confidential VMs, but not many of them really seem to make sense on phones?</div><br/></div></div></div></div><div id="38539768" class="c"><input type="checkbox" id="c-38539768" checked=""/><div class="controls bullet"><span class="by">sangnoir</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38539410">parent</a><span>|</span><a href="#38540124">prev</a><span>|</span><a href="#38540099">next</a><span>|</span><label class="collapse" for="c-38539768">[-]</label><label class="expand" for="c-38539768">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;d love for my banking app to be completely isolated from the rest of my phone OS, in case I get malware. I&#x27;m sure journalists at risk of targeting by NSO and its ilk would appreciate isolation or their messaging apps</div><br/><div id="38541444" class="c"><input type="checkbox" id="c-38541444" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38539768">parent</a><span>|</span><a href="#38540099">next</a><span>|</span><label class="collapse" for="c-38541444">[-]</label><label class="expand" for="c-38541444">[1 more]</label></div><br/><div class="children"><div class="content">This is an interesting usecase (basically Qubes) but it has high overhead and I don&#x27;t really see the framework as being designed to support this, at least yet. You&#x27;d need to move all sorts of services into the VM to support the app (like, for example, someone needs to pass touch input and network traffic into the VM) and at this begins to look like an entire OS running in there.</div><br/></div></div></div></div></div></div></div></div><div id="38540099" class="c"><input type="checkbox" id="c-38540099" checked=""/><div class="controls bullet"><span class="by">nl</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38539301">parent</a><span>|</span><a href="#38539353">prev</a><span>|</span><a href="#38539593">next</a><span>|</span><label class="collapse" for="c-38540099">[-]</label><label class="expand" for="c-38540099">[2 more]</label></div><br/><div class="children"><div class="content">So I&#x27;m most familiar with using this in cases like machine learning on private data in cloud environments where you want to make it impossible for the cloud operator to see the data you are using.<p>I think there are usecases like this outside the mobile _phone_ that are interesting. For example on-device learning for edge devices where the device is not under your control.</div><br/><div id="38541463" class="c"><input type="checkbox" id="c-38541463" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38540099">parent</a><span>|</span><a href="#38539593">next</a><span>|</span><label class="collapse" for="c-38541463">[-]</label><label class="expand" for="c-38541463">[1 more]</label></div><br/><div class="children"><div class="content">See the thing here is that if the device is not under &quot;your&quot; control (&quot;you&quot; being a company or something, and the device being owned by a user) I don&#x27;t think they will really appreciate you using their hardware to train your model in a way they don&#x27;t get to see. Why would I want to support this on my own phone?</div><br/></div></div></div></div></div></div><div id="38539593" class="c"><input type="checkbox" id="c-38539593" checked=""/><div class="controls bullet"><span class="by">fuomag9</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38538931">parent</a><span>|</span><a href="#38539301">prev</a><span>|</span><a href="#38539053">next</a><span>|</span><label class="collapse" for="c-38539593">[-]</label><label class="expand" for="c-38539593">[1 more]</label></div><br/><div class="children"><div class="content">Btw SGX has been removed from 11th gen desktop CPUs and onwards <a href="https:&#x2F;&#x2F;www.bleepingcomputer.com&#x2F;news&#x2F;security&#x2F;new-intel-chips-wont-play-blu-ray-disks-due-to-sgx-deprecation&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.bleepingcomputer.com&#x2F;news&#x2F;security&#x2F;new-intel-chi...</a></div><br/></div></div><div id="38539053" class="c"><input type="checkbox" id="c-38539053" checked=""/><div class="controls bullet"><span class="by">zeusk</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38538931">parent</a><span>|</span><a href="#38539593">prev</a><span>|</span><a href="#38538945">next</a><span>|</span><label class="collapse" for="c-38539053">[-]</label><label class="expand" for="c-38539053">[4 more]</label></div><br/><div class="children"><div class="content">is it really? wasn&#x27;t that the whole point of ARM TZ&#x2F;SEP?</div><br/><div id="38539298" class="c"><input type="checkbox" id="c-38539298" checked=""/><div class="controls bullet"><span class="by">nl</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38539053">parent</a><span>|</span><a href="#38539279">next</a><span>|</span><label class="collapse" for="c-38539298">[-]</label><label class="expand" for="c-38539298">[1 more]</label></div><br/><div class="children"><div class="content">Trusted computing <i>can</i> be used for DRM. I&#x27;m much more interested in it as a privacy <i>enhancing</i> technology: the fact that you can have strong guarantees about what can be done with data in the enclave is useful for a lot of applications where you have sensitive data.<p>(Putting aside the fact for the moment that most - if not all - trusted computing platforms have some security vulnerabilities. Obviously this is bad, but doesn&#x27;t preclude their utility)</div><br/></div></div><div id="38539279" class="c"><input type="checkbox" id="c-38539279" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38539053">parent</a><span>|</span><a href="#38539298">prev</a><span>|</span><a href="#38539196">next</a><span>|</span><label class="collapse" for="c-38539279">[-]</label><label class="expand" for="c-38539279">[1 more]</label></div><br/><div class="children"><div class="content">This is supposed to be a replacement to TrustZone applets.</div><br/></div></div><div id="38539196" class="c"><input type="checkbox" id="c-38539196" checked=""/><div class="controls bullet"><span class="by">gjsman-1000</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38539053">parent</a><span>|</span><a href="#38539279">prev</a><span>|</span><a href="#38538945">next</a><span>|</span><label class="collapse" for="c-38539196">[-]</label><label class="expand" for="c-38539196">[1 more]</label></div><br/><div class="children"><div class="content">Not really. ARM TZ has been repeatedly blown open, in part because it’s not really a separate core or virtualized workload, but a different “mode of operation” that the standard CPU cores switch into temporarily. Basically going back-and-forth between TZ and your OS if I understand correctly. Turns out that’s a side-channel attack nightmare.</div><br/></div></div></div></div><div id="38538945" class="c"><input type="checkbox" id="c-38538945" checked=""/><div class="controls bullet"><span class="by">refulgentis</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38538931">parent</a><span>|</span><a href="#38539053">prev</a><span>|</span><a href="#38538593">next</a><span>|</span><label class="collapse" for="c-38538945">[-]</label><label class="expand" for="c-38538945">[4 more]</label></div><br/><div class="children"><div class="content">I used to work at Google adjacent to this stuff and A) you wouldn&#x27;t boot up a whole VM for this, on a phone, that&#x27;d be very wasteful B) there&#x27;s much simpler ways to provide the same guarantee.<p>So in general, just would avoid labeling the quality of other people&#x27;s takes. You never know who is reading yours</div><br/><div id="38539265" class="c"><input type="checkbox" id="c-38539265" checked=""/><div class="controls bullet"><span class="by">nl</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38538945">parent</a><span>|</span><a href="#38539105">next</a><span>|</span><label class="collapse" for="c-38539265">[-]</label><label class="expand" for="c-38539265">[2 more]</label></div><br/><div class="children"><div class="content">I agree there are <i>currently</i> better ways of doing this (because as you mention the resource&#x2F;protection trade off for this technology on this application is sub-optimal), but the context here is as an example on HN where the data privacy is obvious so I didn&#x27;t have to write a whole paper explaining it.</div><br/><div id="38540199" class="c"><input type="checkbox" id="c-38540199" checked=""/><div class="controls bullet"><span class="by">refulgentis</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38539265">parent</a><span>|</span><a href="#38539105">next</a><span>|</span><label class="collapse" for="c-38540199">[-]</label><label class="expand" for="c-38540199">[1 more]</label></div><br/><div class="children"><div class="content">Its &quot;not even wrong&quot;, if you had a million monkeys on a million typewriters with a million trillion millenia, still, none would come up with a paper long enough to explain how that&#x27;d help anything (ex. trivially, microphone)</div><br/></div></div></div></div></div></div></div></div><div id="38538593" class="c"><input type="checkbox" id="c-38538593" checked=""/><div class="controls bullet"><span class="by">jeroenhd</span><span>|</span><a href="#38538404">parent</a><span>|</span><a href="#38538931">prev</a><span>|</span><a href="#38538447">next</a><span>|</span><label class="collapse" for="c-38538593">[-]</label><label class="expand" for="c-38538593">[5 more]</label></div><br/><div class="children"><div class="content">This seems like an excellent tool for digital ID cards, banks, government authentication apps, maybe 2FA apps, cryptocurrency wallets, you name it. Anything that&#x27;s more important than a calculator.<p>DRM and remote attestation already use a separate secure environment, so I don&#x27;t see what would change by adding virtualisation.</div><br/><div id="38538691" class="c"><input type="checkbox" id="c-38538691" checked=""/><div class="controls bullet"><span class="by">heavyset_go</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38538593">parent</a><span>|</span><a href="#38538447">next</a><span>|</span><label class="collapse" for="c-38538691">[-]</label><label class="expand" for="c-38538691">[4 more]</label></div><br/><div class="children"><div class="content">Websites will require digital ID just to use them, along with remote attestation. They will also be able to ban or block you in an actually effective and comprehensive way.<p>There will be a chilling effect because people won&#x27;t want to upset their Google&#x2F;Microsoft&#x2F;Apple&#x2F;Meta etc overlords by saying or doing the wrong thing, and then get locked out of services they need to exist in society, do their job, spend money, etc.</div><br/><div id="38538848" class="c"><input type="checkbox" id="c-38538848" checked=""/><div class="controls bullet"><span class="by">jeroenhd</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38538691">parent</a><span>|</span><a href="#38538447">next</a><span>|</span><label class="collapse" for="c-38538848">[-]</label><label class="expand" for="c-38538848">[3 more]</label></div><br/><div class="children"><div class="content">Digital ID exists and is widely used, yet I only need to use my digital ID to authenticate with government services. Remote attestation is the norm for many types of apps already yet I can use my bank app on my rooted phone just fine, or use my phone to authenticate with my government&#x27;s SSO system.<p>I&#x27;m no fan of the modern dependence on Play Services or Google&#x27;s attempts to kill adblockers through remote attestation, but none of these technologies are inherently bad. Business devices authenticating to business websites should allow remote attestation to verify that their hardware has not been tempered with just as an extra security measure.<p>Maybe your government is more evil or incompetent than mine, but bad governments aren&#x27;t going to he limited by technological concepts like these.</div><br/><div id="38541763" class="c"><input type="checkbox" id="c-38541763" checked=""/><div class="controls bullet"><span class="by">usrusr</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38538848">parent</a><span>|</span><a href="#38539152">next</a><span>|</span><label class="collapse" for="c-38541763">[-]</label><label class="expand" for="c-38541763">[1 more]</label></div><br/><div class="children"><div class="content">Digital ID is safe from abuse by our ad overlords as long as it only happens in insular implementations for markets smaller than California. Things would look wildly different if digital ID was a thing in the USA (I find it rather amusing how they claim to have no ID at all, yet a decade in Europe seems to involve less presenting of ID than a month in the US involves presenting their driver&#x27;s license ID substitute)<p>But I don&#x27;t disagree, I&#x27;d rather have a rooted phone with a few islands out of my (and the software that I run!) control for sensitive authentication use cases than a phone where I&#x27;m not in control at all. Or than two phones, because only one of them can be rooted.</div><br/></div></div><div id="38539152" class="c"><input type="checkbox" id="c-38539152" checked=""/><div class="controls bullet"><span class="by">heavyset_go</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38538848">parent</a><span>|</span><a href="#38541763">prev</a><span>|</span><a href="#38538447">next</a><span>|</span><label class="collapse" for="c-38539152">[-]</label><label class="expand" for="c-38539152">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not worried about the government, I&#x27;m more worried about inscrutable decisions made by companies like Google, where their automated systems decide that you&#x27;re an anomaly, and thus malicious, and choose to ban you.<p>Instead of just losing your account, <i>you</i> (or at least both your machine and your digital ID) are banned for good. This already happens with phones, where the entire device gets banned by apps for good, adding a layer of digital ID on top of it worsens the consequences of such decisions by platform owners against users.<p>&gt; <i>Remote attestation is the norm for many types of apps already yet I can use my bank app on my rooted phone just fine,</i><p>Many people can&#x27;t on their rooted phones, and this cat-and-mouse game will eventually be won by the parties with million&#x2F;billions to throw at it.</div><br/></div></div></div></div></div></div></div></div><div id="38538447" class="c"><input type="checkbox" id="c-38538447" checked=""/><div class="controls bullet"><span class="by">wlesieutre</span><span>|</span><a href="#38538404">parent</a><span>|</span><a href="#38538593">prev</a><span>|</span><a href="#38538482">next</a><span>|</span><label class="collapse" for="c-38538447">[-]</label><label class="expand" for="c-38538447">[6 more]</label></div><br/><div class="children"><div class="content">Maybe banking apps would let you run them on rooted phones if they were in an isolated VM</div><br/><div id="38538707" class="c"><input type="checkbox" id="c-38538707" checked=""/><div class="controls bullet"><span class="by">heavyset_go</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38538447">parent</a><span>|</span><a href="#38538597">next</a><span>|</span><label class="collapse" for="c-38538707">[-]</label><label class="expand" for="c-38538707">[1 more]</label></div><br/><div class="children"><div class="content">Every app will want to run in isolated VMs and rooting will mean nothing.<p>It&#x27;s like SafetyNet today, you can&#x27;t run a good amount of apps on unapproved platforms already, even apps that don&#x27;t handle confidential data.</div><br/></div></div><div id="38538597" class="c"><input type="checkbox" id="c-38538597" checked=""/><div class="controls bullet"><span class="by">treyd</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38538447">parent</a><span>|</span><a href="#38538707">prev</a><span>|</span><a href="#38538482">next</a><span>|</span><label class="collapse" for="c-38538597">[-]</label><label class="expand" for="c-38538597">[4 more]</label></div><br/><div class="children"><div class="content">This nonsense means I just use them in the browser.  There is no functionality the apps would provide me that makes it worth fighting with their superstitious nonsense.</div><br/><div id="38538725" class="c"><input type="checkbox" id="c-38538725" checked=""/><div class="controls bullet"><span class="by">heavyset_go</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38538597">parent</a><span>|</span><a href="#38538482">next</a><span>|</span><label class="collapse" for="c-38538725">[-]</label><label class="expand" for="c-38538725">[3 more]</label></div><br/><div class="children"><div class="content">Some banks already require you to install and use apps to approve of transactions made outside of the app.<p>When I traveled, this is how I was able to spend money without having to call my bank every time I tried to use my card in person.</div><br/><div id="38540075" class="c"><input type="checkbox" id="c-38540075" checked=""/><div class="controls bullet"><span class="by">clnq</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38538725">parent</a><span>|</span><a href="#38539485">next</a><span>|</span><label class="collapse" for="c-38540075">[-]</label><label class="expand" for="c-38540075">[1 more]</label></div><br/><div class="children"><div class="content">Why do US banks do that? I’ve never had a UK or EU bank call me to verify a transaction.<p>Do you have the IdentityCheck&#x2F;SecureCode&#x2F;3-D Secure stuff (2FA for online transactions and at certain terminals)? Are these calls for transactions without chip + PIN?<p>I’ve had some transactions declined while travelling but maybe about 1&#x2F;1000, and still no call, and nothing the bank support could do to allow them if I called. I’d just have to use a different bank with a vendor. It’s very much a “computer says no” situation then. Otherwise, the payment just goes through in the 99.9% of all cases.<p>But the banks in central EU, the Nordics, and the UK don’t seem to monitor the transactions I make while travelling to the point that there would be an actual person involved (calling me or reaching out in some other way).<p>I’m mostly curious about what problem these bank calls are solving. Is it for credit card fraud? In that case, I wonder why this seems to not be a practice in Europe. Is it because we do chip &amp; PIN in physical payments, and 2FA for online&#x2F;some kiosks?</div><br/></div></div><div id="38539485" class="c"><input type="checkbox" id="c-38539485" checked=""/><div class="controls bullet"><span class="by">treyd</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38538725">parent</a><span>|</span><a href="#38540075">prev</a><span>|</span><a href="#38538482">next</a><span>|</span><label class="collapse" for="c-38539485">[-]</label><label class="expand" for="c-38539485">[1 more]</label></div><br/><div class="children"><div class="content">What are you supposed to do if you don&#x27;t have a smartphone?  My bank simply texts me if there&#x27;s suspicious purposes and you reply &quot;YES&quot;.</div><br/></div></div></div></div></div></div></div></div><div id="38538482" class="c"><input type="checkbox" id="c-38538482" checked=""/><div class="controls bullet"><span class="by">candiddevmike</span><span>|</span><a href="#38538404">parent</a><span>|</span><a href="#38538447">prev</a><span>|</span><a href="#38539039">next</a><span>|</span><label class="collapse" for="c-38538482">[-]</label><label class="expand" for="c-38538482">[1 more]</label></div><br/><div class="children"><div class="content">See for example the Xbox, where everything runs as a VM.</div><br/></div></div><div id="38539039" class="c"><input type="checkbox" id="c-38539039" checked=""/><div class="controls bullet"><span class="by">kiririn</span><span>|</span><a href="#38538404">parent</a><span>|</span><a href="#38538482">prev</a><span>|</span><a href="#38539583">next</a><span>|</span><label class="collapse" for="c-38539039">[-]</label><label class="expand" for="c-38539039">[2 more]</label></div><br/><div class="children"><div class="content">Yep, you need only look at the number of server providers offering confidential computing (pretty much only the big 3) and the premium they charge for it (10x, except AWS “trust me bro” Nitro)<p>Confidential computing is cool and useful when you’re the one controlling the VM, but scary when you’re the one blindly running it on your hardware<p>Hopefully this gets (publicly!) backdoored like SEV, SGX, etc</div><br/><div id="38539527" class="c"><input type="checkbox" id="c-38539527" checked=""/><div class="controls bullet"><span class="by">somanytta</span><span>|</span><a href="#38538404">root</a><span>|</span><a href="#38539039">parent</a><span>|</span><a href="#38539583">next</a><span>|</span><label class="collapse" for="c-38539527">[-]</label><label class="expand" for="c-38539527">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Confidential computing is cool and useful when you’re the one controlling the VM, but scary when you’re the one blindly running it on your hardware<p>Important point.<p>&gt; Hopefully this gets (publicly!) backdoored like SEV, SGX, etc<p>From my reading this doesn&#x27;t need to be backdoored, if you have the ability to unlock the bootloader, you are not reliant on googles root of trust to be able to use this feature, you can go ahead and become your own &quot;vendor&quot;, by signing your own images, or use your choice of vendor, then relock the bootloader and have the same security guarantees.<p>I&#x27;ll admit this only from a cursory glance over the documentation and a vague understanding, happy to be corrected, but seems a lot of the arguments in this thread are about your first point, who has control over the OS.<p>I&#x27;ll also add that the EU is being quite proactive in people having control over their own device, and who is their &#x27;choice of vendor&#x27; so while I understand concerns people bring up, I&#x27;m a bit more optimistic that it can be a more useful tool than not.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>