<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1689152467644" as="style"/><link rel="stylesheet" href="styles.css?v=1689152467644"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://verdagon.dev/blog/first-regions-prototype">Vale&#x27;s First Prototype for Immutable Region Borrowing</a> <span class="domain">(<a href="https://verdagon.dev">verdagon.dev</a>)</span></div><div class="subtext"><span>modernerd</span> | <span>32 comments</span></div><br/><div><div id="36691633" class="c"><input type="checkbox" id="c-36691633" checked=""/><div class="controls bullet"><span class="by">modernerd</span><span>|</span><a href="#36690859">next</a><span>|</span><label class="collapse" for="c-36691633">[-]</label><label class="expand" for="c-36691633">[1 more]</label></div><br/><div class="children"><div class="content">Vale needs more sponsors!<p><a href="https:&#x2F;&#x2F;github.com&#x2F;sponsors&#x2F;ValeLang">https:&#x2F;&#x2F;github.com&#x2F;sponsors&#x2F;ValeLang</a><p>Let&#x27;s use this post&#x27;s time on the front page to help the project meet its $3,000&#x2F;month goal.<p>I&#x27;d love to help Evan work on this full time (I&#x27;m a sponsor). A fast and safe language that&#x27;s also fun to prototype with is worth supporting.</div><br/></div></div><div id="36690859" class="c"><input type="checkbox" id="c-36690859" checked=""/><div class="controls bullet"><span class="by">hu3</span><span>|</span><a href="#36691633">prev</a><span>|</span><a href="#36690907">next</a><span>|</span><label class="collapse" for="c-36690859">[-]</label><label class="expand" for="c-36690859">[2 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>   ...more predictable latency than tracing garbage collection.
   ...better performance and cache friendliness than reference counting.
   ...prototype and iterate more easily than with borrow checking.
</code></pre>
Ok, you had my curiosity, but now you have my attention.<p>Just started following your RSS feed: <a href="https:&#x2F;&#x2F;verdagon.dev&#x2F;rss.xml" rel="nofollow noreferrer">https:&#x2F;&#x2F;verdagon.dev&#x2F;rss.xml</a></div><br/><div id="36691290" class="c"><input type="checkbox" id="c-36691290" checked=""/><div class="controls bullet"><span class="by">iopq</span><span>|</span><a href="#36690859">parent</a><span>|</span><a href="#36690907">next</a><span>|</span><label class="collapse" for="c-36691290">[-]</label><label class="expand" for="c-36691290">[1 more]</label></div><br/><div class="children"><div class="content">Finally some new ideas for AOT compiled languages that don&#x27;t devolve to &quot;what if we just have memory bugs some of the time?&quot;</div><br/></div></div></div></div><div id="36690907" class="c"><input type="checkbox" id="c-36690907" checked=""/><div class="controls bullet"><span class="by">bluejekyll</span><span>|</span><a href="#36690859">prev</a><span>|</span><a href="#36690749">next</a><span>|</span><label class="collapse" for="c-36690907">[-]</label><label class="expand" for="c-36690907">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Vale-specific pre-optimizer, similar to Rust&#x27;s Cranelift<p>I think this might instead be MIR, mid-level IR, there’s a good blog post here: <a href="https:&#x2F;&#x2F;blog.rust-lang.org&#x2F;2016&#x2F;04&#x2F;19&#x2F;MIR.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;blog.rust-lang.org&#x2F;2016&#x2F;04&#x2F;19&#x2F;MIR.html</a><p>Cranelift is a compiler backend, mainly focused on JIT, but theoretically could replace LLVM, there’s an alternative backend being worked on but has limitations: <a href="https:&#x2F;&#x2F;github.com&#x2F;bjorn3&#x2F;rustc_codegen_cranelift">https:&#x2F;&#x2F;github.com&#x2F;bjorn3&#x2F;rustc_codegen_cranelift</a></div><br/></div></div><div id="36690749" class="c"><input type="checkbox" id="c-36690749" checked=""/><div class="controls bullet"><span class="by">cantaloupe</span><span>|</span><a href="#36690907">prev</a><span>|</span><a href="#36690853">next</a><span>|</span><label class="collapse" for="c-36690749">[-]</label><label class="expand" for="c-36690749">[8 more]</label></div><br/><div class="children"><div class="content">Congrats to Evan on the milestone! I enjoy reading the Vale articles even though I have no programming language design or compilers experience.</div><br/><div id="36690982" class="c"><input type="checkbox" id="c-36690982" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#36690749">parent</a><span>|</span><a href="#36691616">next</a><span>|</span><label class="collapse" for="c-36690982">[-]</label><label class="expand" for="c-36690982">[5 more]</label></div><br/><div class="children"><div class="content">Same here, I just wished there was another name for it.<p>Now we have Evan with Vale, and  Adobe’s Software Technology Lab wit Val, it will be great searching for related stuff.<p><a href="https:&#x2F;&#x2F;www.val-lang.dev" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.val-lang.dev</a></div><br/><div id="36691046" class="c"><input type="checkbox" id="c-36691046" checked=""/><div class="controls bullet"><span class="by">hobo_mark</span><span>|</span><a href="#36690749">root</a><span>|</span><a href="#36690982">parent</a><span>|</span><a href="#36691616">next</a><span>|</span><label class="collapse" for="c-36691046">[-]</label><label class="expand" for="c-36691046">[4 more]</label></div><br/><div class="children"><div class="content">There&#x27;s also been a language called Vala, active since 2006!<p><a href="https:&#x2F;&#x2F;vala.dev" rel="nofollow noreferrer">https:&#x2F;&#x2F;vala.dev</a></div><br/><div id="36691225" class="c"><input type="checkbox" id="c-36691225" checked=""/><div class="controls bullet"><span class="by">solarkraft</span><span>|</span><a href="#36690749">root</a><span>|</span><a href="#36691046">parent</a><span>|</span><a href="#36691257">next</a><span>|</span><label class="collapse" for="c-36691225">[-]</label><label class="expand" for="c-36691225">[1 more]</label></div><br/><div class="children"><div class="content">And there&#x27;s the game company actively developing low-level open source software Valve, which my mind first sprung to.</div><br/></div></div><div id="36691257" class="c"><input type="checkbox" id="c-36691257" checked=""/><div class="controls bullet"><span class="by">promiseofbeans</span><span>|</span><a href="#36690749">root</a><span>|</span><a href="#36691046">parent</a><span>|</span><a href="#36691225">prev</a><span>|</span><a href="#36691081">next</a><span>|</span><label class="collapse" for="c-36691257">[-]</label><label class="expand" for="c-36691257">[1 more]</label></div><br/><div class="children"><div class="content">Not to forget <a href="https:&#x2F;&#x2F;www.val.town" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.val.town</a>, which call their lambda functions &#x27;vals&#x27;</div><br/></div></div><div id="36691081" class="c"><input type="checkbox" id="c-36691081" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#36690749">root</a><span>|</span><a href="#36691046">parent</a><span>|</span><a href="#36691257">prev</a><span>|</span><a href="#36691616">next</a><span>|</span><label class="collapse" for="c-36691081">[-]</label><label class="expand" for="c-36691081">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, that one as well.</div><br/></div></div></div></div></div></div><div id="36691616" class="c"><input type="checkbox" id="c-36691616" checked=""/><div class="controls bullet"><span class="by">NeutralForest</span><span>|</span><a href="#36690749">parent</a><span>|</span><a href="#36690982">prev</a><span>|</span><a href="#36690854">next</a><span>|</span><label class="collapse" for="c-36691616">[-]</label><label class="expand" for="c-36691616">[1 more]</label></div><br/><div class="children"><div class="content">Same, I don&#x27;t have the background to understand the articles in most cases but it&#x27;s interesting nonetheless.</div><br/></div></div><div id="36690854" class="c"><input type="checkbox" id="c-36690854" checked=""/><div class="controls bullet"><span class="by">davidkunz</span><span>|</span><a href="#36690749">parent</a><span>|</span><a href="#36691616">prev</a><span>|</span><a href="#36690853">next</a><span>|</span><label class="collapse" for="c-36690854">[-]</label><label class="expand" for="c-36690854">[1 more]</label></div><br/><div class="children"><div class="content">Me too, the articles are great and I&#x27;m excited about the future of Vale.</div><br/></div></div></div></div><div id="36690853" class="c"><input type="checkbox" id="c-36690853" checked=""/><div class="controls bullet"><span class="by">jupp0r</span><span>|</span><a href="#36690749">prev</a><span>|</span><a href="#36691628">next</a><span>|</span><label class="collapse" for="c-36690853">[-]</label><label class="expand" for="c-36690853">[8 more]</label></div><br/><div class="children"><div class="content">The approach of having options to optimize hot code paths with zero cost abstractions while still not having to worry about memory management in the vast majority of the rest of your code sounds like the best of both worlds to me (given that we only trade performance, not safety for convenience).</div><br/><div id="36691260" class="c"><input type="checkbox" id="c-36691260" checked=""/><div class="controls bullet"><span class="by">mgaunard</span><span>|</span><a href="#36690853">parent</a><span>|</span><a href="#36691628">next</a><span>|</span><label class="collapse" for="c-36691260">[-]</label><label class="expand" for="c-36691260">[7 more]</label></div><br/><div class="children"><div class="content">I write C++ exclusively and never worry about memory management.<p>I don&#x27;t use smart pointers since shared ownership is a bad concept.<p>The problem of memory management is largely trivial.</div><br/><div id="36691319" class="c"><input type="checkbox" id="c-36691319" checked=""/><div class="controls bullet"><span class="by">willvarfar</span><span>|</span><a href="#36690853">root</a><span>|</span><a href="#36691260">parent</a><span>|</span><a href="#36691396">next</a><span>|</span><label class="collapse" for="c-36691319">[-]</label><label class="expand" for="c-36691319">[3 more]</label></div><br/><div class="children"><div class="content">The problem of memory management is largely trivial _if_ you are in a small clean opinionated private codebase without cruft, collaborators, third party code, ...? :)<p>Google et al have been working on sanitisers etc because, even in well kept codebases with strict coding standards that are rigorously applied in reviews, memory bugs do actually creep in.</div><br/><div id="36691910" class="c"><input type="checkbox" id="c-36691910" checked=""/><div class="controls bullet"><span class="by">mgaunard</span><span>|</span><a href="#36690853">root</a><span>|</span><a href="#36691319">parent</a><span>|</span><a href="#36691565">next</a><span>|</span><label class="collapse" for="c-36691910">[-]</label><label class="expand" for="c-36691910">[1 more]</label></div><br/><div class="children"><div class="content">Third party code is a risk and should always be carefully managed and properly isolated.<p>This applies regardless of programming language.<p>Of course the web people and their &quot;frameworks&quot; is just another demonstration of how bad relying on third party code is.</div><br/></div></div><div id="36691565" class="c"><input type="checkbox" id="c-36691565" checked=""/><div class="controls bullet"><span class="by">zelphirkalt</span><span>|</span><a href="#36690853">root</a><span>|</span><a href="#36691319">parent</a><span>|</span><a href="#36691910">prev</a><span>|</span><a href="#36691396">next</a><span>|</span><label class="collapse" for="c-36691565">[-]</label><label class="expand" for="c-36691565">[1 more]</label></div><br/><div class="children"><div class="content">Not disagreeing with your first paragraph and will add, that memory management mistakes happen to the best. But it is also probably true, that Google and others do this, because they know there will always be someone committing shit, no matter, whether they are at Google or another big company. So they want guarantees, not blind trust.</div><br/></div></div></div></div><div id="36691396" class="c"><input type="checkbox" id="c-36691396" checked=""/><div class="controls bullet"><span class="by">dataflow</span><span>|</span><a href="#36690853">root</a><span>|</span><a href="#36691260">parent</a><span>|</span><a href="#36691319">prev</a><span>|</span><a href="#36691628">next</a><span>|</span><label class="collapse" for="c-36691396">[-]</label><label class="expand" for="c-36691396">[3 more]</label></div><br/><div class="children"><div class="content">&gt; I don&#x27;t use smart pointers since shared ownership is a bad concept.<p>I think you mean you don&#x27;t use <i>shared</i> smart pointers? Or do you avoid unique_ptr too?</div><br/><div id="36691919" class="c"><input type="checkbox" id="c-36691919" checked=""/><div class="controls bullet"><span class="by">mgaunard</span><span>|</span><a href="#36690853">root</a><span>|</span><a href="#36691396">parent</a><span>|</span><a href="#36691628">next</a><span>|</span><label class="collapse" for="c-36691919">[-]</label><label class="expand" for="c-36691919">[2 more]</label></div><br/><div class="children"><div class="content">I use values.</div><br/><div id="36691938" class="c"><input type="checkbox" id="c-36691938" checked=""/><div class="controls bullet"><span class="by">dataflow</span><span>|</span><a href="#36690853">root</a><span>|</span><a href="#36691919">parent</a><span>|</span><a href="#36691628">next</a><span>|</span><label class="collapse" for="c-36691938">[-]</label><label class="expand" for="c-36691938">[1 more]</label></div><br/><div class="children"><div class="content">You never use the heap?</div><br/></div></div></div></div></div></div></div></div></div></div><div id="36691628" class="c"><input type="checkbox" id="c-36691628" checked=""/><div class="controls bullet"><span class="by">garganzol</span><span>|</span><a href="#36690853">prev</a><span>|</span><a href="#36690827">next</a><span>|</span><label class="collapse" for="c-36691628">[-]</label><label class="expand" for="c-36691628">[2 more]</label></div><br/><div class="children"><div class="content">A distinguishing feature of Vale is: a) natively-compiled safe language b) that still has a sane syntax.<p>I remember seeing Vale many years ago (~10). Back then, it was something revolving around Gnome project, but now it still has a pre-prelease version 0.2-alpha. This means that the project&#x27;s progress is relatively slow, but the language is very interesting to me.<p>Update: I confused Vale with Vala! Vale is the new project, Vala is 10+ years old, but they have an intersection of syntax, goals and ideas. That&#x27;s why I was misled by seeing a similar name. Val-vale is almost the same!</div><br/><div id="36691675" class="c"><input type="checkbox" id="c-36691675" checked=""/><div class="controls bullet"><span class="by">asabil</span><span>|</span><a href="#36691628">parent</a><span>|</span><a href="#36690827">next</a><span>|</span><label class="collapse" for="c-36691675">[-]</label><label class="expand" for="c-36691675">[1 more]</label></div><br/><div class="children"><div class="content">I think you are confusing Vale with Vala[1] :)<p>[1]: <a href="https:&#x2F;&#x2F;vala.dev&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;vala.dev&#x2F;</a></div><br/></div></div></div></div><div id="36690827" class="c"><input type="checkbox" id="c-36690827" checked=""/><div class="controls bullet"><span class="by">cpeterso</span><span>|</span><a href="#36691628">prev</a><span>|</span><a href="#36691658">next</a><span>|</span><label class="collapse" for="c-36690827">[-]</label><label class="expand" for="c-36690827">[1 more]</label></div><br/><div class="children"><div class="content">“Vale is Fast: Vale is AOT compiled to LLVM, statically-typed, and uses the new generational references technique for memory safety with speed and flexibility, and will soon have region borrow checking to make it even faster.”<p><a href="https:&#x2F;&#x2F;vale.dev&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;vale.dev&#x2F;</a></div><br/></div></div><div id="36691658" class="c"><input type="checkbox" id="c-36691658" checked=""/><div class="controls bullet"><span class="by">cbsmith</span><span>|</span><a href="#36690827">prev</a><span>|</span><a href="#36691700">next</a><span>|</span><label class="collapse" for="c-36691658">[-]</label><label class="expand" for="c-36691658">[1 more]</label></div><br/><div class="children"><div class="content">Just acknowledging the Nils Olav Easter Egg.</div><br/></div></div><div id="36691700" class="c"><input type="checkbox" id="c-36691700" checked=""/><div class="controls bullet"><span class="by">megamorf</span><span>|</span><a href="#36691658">prev</a><span>|</span><a href="#36691564">next</a><span>|</span><label class="collapse" for="c-36691700">[-]</label><label class="expand" for="c-36691700">[1 more]</label></div><br/><div class="children"><div class="content">I was confused by the title because when my bubble talks about Vale they mean this:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;errata-ai&#x2F;vale">https:&#x2F;&#x2F;github.com&#x2F;errata-ai&#x2F;vale</a></div><br/></div></div><div id="36691564" class="c"><input type="checkbox" id="c-36691564" checked=""/><div class="controls bullet"><span class="by">lovich</span><span>|</span><a href="#36691700">prev</a><span>|</span><a href="#36691737">next</a><span>|</span><label class="collapse" for="c-36691564">[-]</label><label class="expand" for="c-36691564">[1 more]</label></div><br/><div class="children"><div class="content">The callout to the Easter egg was a nice social hack to see how many people read the article in detail</div><br/></div></div><div id="36691737" class="c"><input type="checkbox" id="c-36691737" checked=""/><div class="controls bullet"><span class="by">leksak</span><span>|</span><a href="#36691564">prev</a><span>|</span><a href="#36691824">next</a><span>|</span><label class="collapse" for="c-36691737">[-]</label><label class="expand" for="c-36691737">[1 more]</label></div><br/><div class="children"><div class="content">Nice &quot;first&quot;-type of Easter Egg! Would love to be a penguin. Keeping it would make for a good TFA though!</div><br/></div></div><div id="36691824" class="c"><input type="checkbox" id="c-36691824" checked=""/><div class="controls bullet"><span class="by">cultureulterior</span><span>|</span><a href="#36691737">prev</a><span>|</span><a href="#36691870">next</a><span>|</span><label class="collapse" for="c-36691824">[-]</label><label class="expand" for="c-36691824">[1 more]</label></div><br/><div class="children"><div class="content">That algorithm would be infinitely much faster if you were to use bitboards</div><br/></div></div><div id="36691870" class="c"><input type="checkbox" id="c-36691870" checked=""/><div class="controls bullet"><span class="by">revskill</span><span>|</span><a href="#36691824">prev</a><span>|</span><a href="#36691328">next</a><span>|</span><label class="collapse" for="c-36691870">[-]</label><label class="expand" for="c-36691870">[1 more]</label></div><br/><div class="children"><div class="content">Thanks. At least i don&#x27;t have to write Rust.</div><br/></div></div><div id="36691328" class="c"><input type="checkbox" id="c-36691328" checked=""/><div class="controls bullet"><span class="by">3cats-in-a-coat</span><span>|</span><a href="#36691870">prev</a><span>|</span><label class="collapse" for="c-36691328">[-]</label><label class="expand" for="c-36691328">[2 more]</label></div><br/><div class="children"><div class="content">Correct me if I’m wrong, but I believe this is an alternative way to describe a system that is equivalent to copy on write, but with ahead of time analysis on reference counting, which means we can eliminate most of reference counting. We have this kind of analysis is already done in reference counted languages like Swift which also do copy on write.</div><br/><div id="36691952" class="c"><input type="checkbox" id="c-36691952" checked=""/><div class="controls bullet"><span class="by">GolDDranks</span><span>|</span><a href="#36691328">parent</a><span>|</span><label class="collapse" for="c-36691952">[-]</label><label class="expand" for="c-36691952">[1 more]</label></div><br/><div class="children"><div class="content">This is not a reference counted system, but you manually free the memory. However, the references are safe to use in the sense that they can detect when the object they are referring to, is deleted.</div><br/></div></div></div></div></div></div></div></div></div></body></html>