<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1716368468768" as="style"/><link rel="stylesheet" href="styles.css?v=1716368468768"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://tjaart.substack.com/p/the-curious-case-of-the-missing-period">The curious case of the missing period</a> <span class="domain">(<a href="https://tjaart.substack.com">tjaart.substack.com</a>)</span></div><div class="subtext"><span>the_real_tjaart</span> | <span>103 comments</span></div><br/><div><div id="40432486" class="c"><input type="checkbox" id="c-40432486" checked=""/><div class="controls bullet"><span class="by">evmar</span><span>|</span><a href="#40437515">next</a><span>|</span><label class="collapse" for="c-40432486">[-]</label><label class="expand" for="c-40432486">[19 more]</label></div><br/><div class="children"><div class="content">&gt; A portion of this code implemented a SMTP client.<p>If I wanted to root cause this, the real problem is right there.  Implementing protocols correctly is hard and bugs like in the post are common.  A properly implemented SMTP client library, like one you would pull off the shelf, would accept text and encode it properly per the SMTP protocol, regardless of where the periods were in the input.  The templating layer shouldn&#x27;t be worrying about SMTP.</div><br/><div id="40438847" class="c"><input type="checkbox" id="c-40438847" checked=""/><div class="controls bullet"><span class="by">TeMPOraL</span><span>|</span><a href="#40432486">parent</a><span>|</span><a href="#40437136">next</a><span>|</span><label class="collapse" for="c-40438847">[-]</label><label class="expand" for="c-40438847">[1 more]</label></div><br/><div class="children"><div class="content">The real problem isn&#x27;t the protocol, but the cowboy approach to interacting with it. It&#x27;s not hard to &quot;accept text and encode it properly per the SMTP protocol&quot;, you just need to realize you need to do it in the first place.<p>There is a multitude of classes of errors and security vulnerabilities, including &quot;SQL injection&quot;, XSS, and similar, that are all caused by the same mistake that this case of missing period was[0]: gluing strings together. For example, with SQL queries, the operation of binding values to a query template should happen in &quot;SQL space&quot;, not in untyped string space. &quot;SELECT * FROM foo WHERE foo.bar = &quot; + $userData; is doing the dumb thing and writing directly to SQL&#x27;s serialized format. In correct code (and correct thinking), &quot;SELECT * FROM...&quot; bit is <i>not a string</i>, it just looks like one. Same with HTML templating[1] - work with the document tree instead of its string representation, and you&#x27;ll avoid dumb vulnerabilities.<p>So, if you want to avoid missing dots in your e-mails, <i>don&#x27;t inject unstructured text into the middle of SMTP pipeline</i>. Respect the abstraction level at which you work.<p>See also: langsec.<p>--<p>[0] - And therefore should be considered as a single class of errors, IMO.<p>[1] - <i>Templating systems themselves</i> are thus a mistake belonging to this class, too - they&#x27;re all about gluing string representations together, where the correct way is to work at the level of language&#x2F;data structures represented by the text.</div><br/></div></div><div id="40437136" class="c"><input type="checkbox" id="c-40437136" checked=""/><div class="controls bullet"><span class="by">throw10920</span><span>|</span><a href="#40432486">parent</a><span>|</span><a href="#40438847">prev</a><span>|</span><a href="#40438088">next</a><span>|</span><label class="collapse" for="c-40437136">[-]</label><label class="expand" for="c-40437136">[3 more]</label></div><br/><div class="children"><div class="content">The real problem is that <i>SMTP is a &quot;plain-text&quot; protocol that includes in-band signaling.</i> It literally happened because SMTP defined &quot;a line that only contains a single period in it&quot; as a control sequence and not a literal line that only contains a single period in it.<p>SMTP is an example of an unnecessarily complex design, and the implementation bugs reflect it. SMTP <i>shouldn&#x27;t</i> be hard for someone to correctly implement by themselves (even though I agree that people shouldn&#x27;t be re-inventing the wheel).</div><br/><div id="40437447" class="c"><input type="checkbox" id="c-40437447" checked=""/><div class="controls bullet"><span class="by">eviks</span><span>|</span><a href="#40432486">root</a><span>|</span><a href="#40437136">parent</a><span>|</span><a href="#40438088">next</a><span>|</span><label class="collapse" for="c-40437447">[-]</label><label class="expand" for="c-40437447">[2 more]</label></div><br/><div class="children"><div class="content">Why didn&#x27;t they use actual control sequences instead of text chars, ASCII had plenty of those?</div><br/><div id="40437608" class="c"><input type="checkbox" id="c-40437608" checked=""/><div class="controls bullet"><span class="by">inejge</span><span>|</span><a href="#40432486">root</a><span>|</span><a href="#40437447">parent</a><span>|</span><a href="#40438088">next</a><span>|</span><label class="collapse" for="c-40437608">[-]</label><label class="expand" for="c-40437608">[1 more]</label></div><br/><div class="children"><div class="content">When your debugger is telnet circa 1980, non-printable characters are a liability. (You pay for it later, when people who&#x27;ve never seen &quot;...end with &lt;CRLF&gt;.&lt;CRLF&gt;&quot; botch the implementation.)</div><br/></div></div></div></div></div></div><div id="40438088" class="c"><input type="checkbox" id="c-40438088" checked=""/><div class="controls bullet"><span class="by">xg15</span><span>|</span><a href="#40432486">parent</a><span>|</span><a href="#40437136">prev</a><span>|</span><a href="#40436956">next</a><span>|</span><label class="collapse" for="c-40438088">[-]</label><label class="expand" for="c-40438088">[1 more]</label></div><br/><div class="children"><div class="content">Sounds like a great idea, until you find that your SMTP library pulls in 5 other libraries as its own dependencies and those each pull in 3 transitive dependencies of their own, one being some kitchen sink&#x2F;toolbox project where only 1% of its code is actually relevant to the dependant and the rest is dead weight - but which pulls in 20 <i>more</i> dependencies for functions that are literally never called in your project - and before you know it, your codebase bloats up by several MB and you get CVE warnings for libraries that you didn&#x27;t even know existed, let alone that you&#x27;re using them.</div><br/></div></div><div id="40436956" class="c"><input type="checkbox" id="c-40436956" checked=""/><div class="controls bullet"><span class="by">burkaman</span><span>|</span><a href="#40432486">parent</a><span>|</span><a href="#40438088">prev</a><span>|</span><a href="#40432571">next</a><span>|</span><label class="collapse" for="c-40436956">[-]</label><label class="expand" for="c-40436956">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Jamie_Zawinski#Zawinski&#x27;s_Law" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Jamie_Zawinski#Zawinski&#x27;s_Law</a></div><br/></div></div><div id="40432571" class="c"><input type="checkbox" id="c-40432571" checked=""/><div class="controls bullet"><span class="by">the_real_tjaart</span><span>|</span><a href="#40432486">parent</a><span>|</span><a href="#40436956">prev</a><span>|</span><a href="#40435913">next</a><span>|</span><label class="collapse" for="c-40432571">[-]</label><label class="expand" for="c-40432571">[1 more]</label></div><br/><div class="children"><div class="content">I agree 100%.</div><br/></div></div><div id="40435913" class="c"><input type="checkbox" id="c-40435913" checked=""/><div class="controls bullet"><span class="by">om8</span><span>|</span><a href="#40432486">parent</a><span>|</span><a href="#40432571">prev</a><span>|</span><a href="#40432561">next</a><span>|</span><label class="collapse" for="c-40435913">[-]</label><label class="expand" for="c-40435913">[1 more]</label></div><br/><div class="children"><div class="content">Single responsibility principle in its finest.</div><br/></div></div><div id="40432561" class="c"><input type="checkbox" id="c-40432561" checked=""/><div class="controls bullet"><span class="by">quotemstr</span><span>|</span><a href="#40432486">parent</a><span>|</span><a href="#40435913">prev</a><span>|</span><a href="#40437515">next</a><span>|</span><label class="collapse" for="c-40432561">[-]</label><label class="expand" for="c-40432561">[10 more]</label></div><br/><div class="children"><div class="content">&gt; Implementing protocols correctly is hard<p>That&#x27;s why it&#x27;s a best practice to specify protocols at a very high level (e.g. using cap&#x27;n&#x27;proto) instead of expecting every random sleep-deprived SDE2 to correctly implement a network exchange in terms of read() and write().</div><br/><div id="40432748" class="c"><input type="checkbox" id="c-40432748" checked=""/><div class="controls bullet"><span class="by">blueflow</span><span>|</span><a href="#40432486">root</a><span>|</span><a href="#40432561">parent</a><span>|</span><a href="#40433423">next</a><span>|</span><label class="collapse" for="c-40432748">[-]</label><label class="expand" for="c-40432748">[8 more]</label></div><br/><div class="children"><div class="content">That why you have to read the specs of the protocol you want to implement. Its a matter of engineering rigorousness. Brute-forcing until &quot;it works&quot; doesn&#x27;t cut it.</div><br/><div id="40434470" class="c"><input type="checkbox" id="c-40434470" checked=""/><div class="controls bullet"><span class="by">vlovich123</span><span>|</span><a href="#40432486">root</a><span>|</span><a href="#40432748">parent</a><span>|</span><a href="#40433936">next</a><span>|</span><label class="collapse" for="c-40434470">[-]</label><label class="expand" for="c-40434470">[6 more]</label></div><br/><div class="children"><div class="content">I think you&#x27;re missing the fact that experience has taught us repeatedly that separating the protocol definition from the wire format is a good idea. But sure, feel free to ignore the many lessons and blame it on individuals as if anything could be implemented free from human laziness, error, &amp; economic demands (which btw is ironically a lack of engineering rigour which I was always taught as you assume that humans will be lazy, corrupt, make mistakes &amp; that economics of making things as cheap as possible are a real part of engineering &amp; not something to handwave away as &quot;they&#x27;re not doing real engineering&quot;).</div><br/><div id="40434993" class="c"><input type="checkbox" id="c-40434993" checked=""/><div class="controls bullet"><span class="by">robryk</span><span>|</span><a href="#40432486">root</a><span>|</span><a href="#40434470">parent</a><span>|</span><a href="#40435350">next</a><span>|</span><label class="collapse" for="c-40434993">[-]</label><label class="expand" for="c-40434993">[3 more]</label></div><br/><div class="children"><div class="content">To steelman the GP&#x27;s POV: there are other parts of solutions to problems where similar levels of rigour are required and cannot be filled in by using a preexisting library (state machines for distributed business logic come to mind as an example). Eliminating the need for that here doesn&#x27;t help that much in general, and might even make things worse, because it gives people less experience with tasks demanding rigour before they tackle ones that are both subtler and harder.</div><br/><div id="40435240" class="c"><input type="checkbox" id="c-40435240" checked=""/><div class="controls bullet"><span class="by">vlovich123</span><span>|</span><a href="#40432486">root</a><span>|</span><a href="#40434993">parent</a><span>|</span><a href="#40435350">next</a><span>|</span><label class="collapse" for="c-40435240">[-]</label><label class="expand" for="c-40435240">[2 more]</label></div><br/><div class="children"><div class="content">Learning to blindly follow a spec for the purposes of parsing the SMTP wire protocol doesn&#x27;t give you extra ability to follow the state machine or distributed business logic specs better. It just adds to the overall opportunities for you to make a mistake. This also ignores the fact that SMTP specs is split across multiple RFCs with no single normative version which further complicates the probability that you implement the spec correctly in the first place.<p>Engineers get better faster because they leverage better tools and build tools to overcome their own shortcomings and leverage their strengths, not by constantly being beat into shape by unforgiving systems.<p>To be fair, what you and OP said is not an uncommon mentality. It&#x27;s even shared in a way by Torvalds:<p>&gt; [easier to do development with a debugger] And quite frankly, I don&#x27;t care. I don&#x27;t think kernel development should be &quot;easy&quot;. I do not condone single-stepping through code to find the bug.
I do not think that extra visibility into the system is necessarily a good thing.<p>&gt; Quite frankly, I&#x27;d rather weed out the people who don&#x27;t start being careful early rather than late. That sounds callous, and by God, it _is_ callous. But it&#x27;s not the kind of &quot;if you can&#x27;t stand the heat, get out the the kitchen&quot; kind of remark that some people take it for. No, it&#x27;s
something much more deeper: I&#x27;d rather not work with people who aren&#x27;t careful. It&#x27;s darwinism in software development. It&#x27;s a cold, callous argument that says that there are two kinds of
people, and I&#x27;d rather not work with the second kind. Live with it.<p>He has similar views about unit tests btw.<p>I personally would prefer to work with people who are smart &amp; understand systems and have machines take care of subtle details rather than needing to always be 100% careful at all times. No one writing an SMTP parser is at Torvald&#x27;s level.<p>I&#x27;m not arguing that this excuses you from being careful or failing to understand things. I&#x27;m saying that defensively covering your flank against common classes of mistakes leads to better software than the alternative.</div><br/><div id="40435936" class="c"><input type="checkbox" id="c-40435936" checked=""/><div class="controls bullet"><span class="by">im3w1l</span><span>|</span><a href="#40432486">root</a><span>|</span><a href="#40435240">parent</a><span>|</span><a href="#40435350">next</a><span>|</span><label class="collapse" for="c-40435936">[-]</label><label class="expand" for="c-40435936">[1 more]</label></div><br/><div class="children"><div class="content">&gt; This also ignores the fact that SMTP specs is split across multiple RFCs with no single normative version which further complicates the probability that you implement the spec correctly in the first place.<p>This is a point I agree with and the fact I see it mentioned so rarely, that standards are split across multiple RFC&#x27;s makes me suspect that people don&#x27;t mention it because they don&#x27;t know because they never read them in the first place, and rather try to follow the implementation of some existing program.</div><br/></div></div></div></div></div></div><div id="40435350" class="c"><input type="checkbox" id="c-40435350" checked=""/><div class="controls bullet"><span class="by">blueflow</span><span>|</span><a href="#40432486">root</a><span>|</span><a href="#40434470">parent</a><span>|</span><a href="#40434993">prev</a><span>|</span><a href="#40436909">next</a><span>|</span><label class="collapse" for="c-40435350">[-]</label><label class="expand" for="c-40435350">[1 more]</label></div><br/><div class="children"><div class="content">Research is also a real part of engineering. One should not omit it and end up with a SMTP implementation like in the article.</div><br/></div></div><div id="40436909" class="c"><input type="checkbox" id="c-40436909" checked=""/><div class="controls bullet"><span class="by">ninkendo</span><span>|</span><a href="#40432486">root</a><span>|</span><a href="#40434470">parent</a><span>|</span><a href="#40435350">prev</a><span>|</span><a href="#40433936">next</a><span>|</span><label class="collapse" for="c-40436909">[-]</label><label class="expand" for="c-40436909">[1 more]</label></div><br/><div class="children"><div class="content">Yeah someone should get in their Time Machine and tell those idiot SMTP RFC authors in the 1980s that they should have used a wire format that wouldn’t be invented for another 30 years.</div><br/></div></div></div></div><div id="40433936" class="c"><input type="checkbox" id="c-40433936" checked=""/><div class="controls bullet"><span class="by">Joker_vD</span><span>|</span><a href="#40432486">root</a><span>|</span><a href="#40432748">parent</a><span>|</span><a href="#40434470">prev</a><span>|</span><a href="#40433423">next</a><span>|</span><label class="collapse" for="c-40433936">[-]</label><label class="expand" for="c-40433936">[1 more]</label></div><br/><div class="children"><div class="content">Reading is for nerds. Real programmers™ <i>write</i>. And they write <i>code</i>, for the machine, not docs or specs or any other silly stuff intended for interhuman communication.</div><br/></div></div></div></div></div></div></div></div><div id="40437515" class="c"><input type="checkbox" id="c-40437515" checked=""/><div class="controls bullet"><span class="by">userbinator</span><span>|</span><a href="#40432486">prev</a><span>|</span><a href="#40434756">next</a><span>|</span><label class="collapse" for="c-40437515">[-]</label><label class="expand" for="c-40437515">[2 more]</label></div><br/><div class="children"><div class="content">I suspect a lot of people are no longer being taught these fundamental protocols by manual interaction with a terminal, since that&#x27;s what SMTP seems to have been originally intended for; and as someone who actually made use of that for a nontrivial amount of time, the &quot;single dot on a line&quot; to end a message has been permanently etched into my memory.<p>Relatedly, <i>escaping</i> somehow seems to be a foreign concept for a lot of programmers, who wouldn&#x27;t ever see the above situation and ask themselves &quot;but what if I want to send an email with a line containing a single dot?&quot; yet another large group of them finds it perfectly logical and easy to understand.</div><br/><div id="40438803" class="c"><input type="checkbox" id="c-40438803" checked=""/><div class="controls bullet"><span class="by">edanm</span><span>|</span><a href="#40437515">parent</a><span>|</span><a href="#40434756">next</a><span>|</span><label class="collapse" for="c-40438803">[-]</label><label class="expand" for="c-40438803">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I suspect a lot of people are no longer being taught these fundamental protocols by manual interaction with a terminal,<p>I&#x27;d be surprised if any significant portion of software developers learned anything like that in the last 30 years, at least.</div><br/></div></div></div></div><div id="40434756" class="c"><input type="checkbox" id="c-40434756" checked=""/><div class="controls bullet"><span class="by">aftoprokrustes</span><span>|</span><a href="#40437515">prev</a><span>|</span><a href="#40433421">next</a><span>|</span><label class="collapse" for="c-40434756">[-]</label><label class="expand" for="c-40434756">[10 more]</label></div><br/><div class="children"><div class="content">I will not comment on the technical part, as others already did it better than I could, but it just reminded me of an anecdote that reminds of the importance of such trivial things as a period at the end of a sentence:<p>In Germany, where I work, it is usual at the end of employement to ask for a letter of recommendation (&quot;Zeugnis&quot;) that lists the tasks performed, and how good the employee was. It is an important document, as it will typcally be required when applying for jobs. Obviously, no employee would accept a document explicitly stating &quot;this guy is a lazy bastard, do not hire him&quot;, so there is a &quot;Zeugnissprache&quot;, a &quot;secret code&quot; to disguise this information as praise. One part of this code is that a missing period in the last sentence means &quot;please ignore everything said here, this guy is horrible&quot;.<p>How do I know? I let a lawyer check my Zeugnis after my last employment, and (I assume out of lack of care, as all my performance reviews were positive) the last sentence was missing the period.</div><br/><div id="40435522" class="c"><input type="checkbox" id="c-40435522" checked=""/><div class="controls bullet"><span class="by">Biganon</span><span>|</span><a href="#40434756">parent</a><span>|</span><a href="#40435077">next</a><span>|</span><label class="collapse" for="c-40435522">[-]</label><label class="expand" for="c-40435522">[5 more]</label></div><br/><div class="children"><div class="content">Secret codes being used in recommandation letters are an urban legend. HR people have no incentive to create a secret code for them and their potential rivals, let alone teach it to new HR people while also keeping it secret.<p>This legend comes from the fact that HR people cannot be too explicit about the fact that you&#x27;ve been a pain in the ass (you could probably sue if it&#x27;s too transparent), so if they have nothing positive to say they will commend your punctuality or something equally as mundane. It&#x27;s not secret codes, it&#x27;s like... &quot;bless their heart&quot;, but in HR talk. Plausible deniability if you want to sue, I guess. &quot;But it&#x27;s a good thing, your honor! They were always on time!&quot;</div><br/><div id="40435563" class="c"><input type="checkbox" id="c-40435563" checked=""/><div class="controls bullet"><span class="by">boxed</span><span>|</span><a href="#40434756">root</a><span>|</span><a href="#40435522">parent</a><span>|</span><a href="#40435077">next</a><span>|</span><label class="collapse" for="c-40435563">[-]</label><label class="expand" for="c-40435563">[4 more]</label></div><br/><div class="children"><div class="content">So.. secret codes are a myth, and here are some examples of secret codes?</div><br/><div id="40435736" class="c"><input type="checkbox" id="c-40435736" checked=""/><div class="controls bullet"><span class="by">Biganon</span><span>|</span><a href="#40434756">root</a><span>|</span><a href="#40435563">parent</a><span>|</span><a href="#40435077">next</a><span>|</span><label class="collapse" for="c-40435736">[-]</label><label class="expand" for="c-40435736">[3 more]</label></div><br/><div class="children"><div class="content">Please refrain from willingly picking the naive interpretation when you&#x27;ve understood my point perfectly fine, it&#x27;s against the rules of this website.<p>...sigh:<p>Secret codes as in &quot;watermark-level omission of characters&quot; are a myth. Lingo and jargon do however exist, and convey meaning in a particularly subtle way. They are shared and taught by culture, not by a secret handbook passed down from generation to generation. See also dogwhistling.<p>The goal is to protect the issuer, not to selflessly inform the recipient.</div><br/><div id="40438882" class="c"><input type="checkbox" id="c-40438882" checked=""/><div class="controls bullet"><span class="by">sb057</span><span>|</span><a href="#40434756">root</a><span>|</span><a href="#40435736">parent</a><span>|</span><a href="#40436778">next</a><span>|</span><label class="collapse" for="c-40438882">[-]</label><label class="expand" for="c-40438882">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Dog_whistle_(politics)" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Dog_whistle_(politics)</a><p>&quot;In politics, a dog whistle is the use of coded or suggestive language...&quot;</div><br/></div></div><div id="40436778" class="c"><input type="checkbox" id="c-40436778" checked=""/><div class="controls bullet"><span class="by">HankB99</span><span>|</span><a href="#40434756">root</a><span>|</span><a href="#40435736">parent</a><span>|</span><a href="#40438882">prev</a><span>|</span><a href="#40435077">next</a><span>|</span><label class="collapse" for="c-40436778">[-]</label><label class="expand" for="c-40436778">[1 more]</label></div><br/><div class="children"><div class="content">This reminds me of the joke whose punch line is<p>&gt; You will be lucky to have this person work for you.</div><br/></div></div></div></div></div></div></div></div><div id="40435077" class="c"><input type="checkbox" id="c-40435077" checked=""/><div class="controls bullet"><span class="by">lisper</span><span>|</span><a href="#40434756">parent</a><span>|</span><a href="#40435522">prev</a><span>|</span><a href="#40434883">next</a><span>|</span><label class="collapse" for="c-40435077">[-]</label><label class="expand" for="c-40435077">[1 more]</label></div><br/><div class="children"><div class="content">&gt; One part of this code is that a missing period in the last sentence means &quot;please ignore everything said here, this guy is horrible&quot;.<p>Gee, what could possibly go wrong?</div><br/></div></div><div id="40434883" class="c"><input type="checkbox" id="c-40434883" checked=""/><div class="controls bullet"><span class="by">mwigdahl</span><span>|</span><a href="#40434756">parent</a><span>|</span><a href="#40435077">prev</a><span>|</span><a href="#40436689">next</a><span>|</span><label class="collapse" for="c-40434883">[-]</label><label class="expand" for="c-40434883">[2 more]</label></div><br/><div class="children"><div class="content">Did you check your performance reviews to see if they were missing periods also?</div><br/><div id="40435393" class="c"><input type="checkbox" id="c-40435393" checked=""/><div class="controls bullet"><span class="by">pests</span><span>|</span><a href="#40434756">root</a><span>|</span><a href="#40434883">parent</a><span>|</span><a href="#40436689">next</a><span>|</span><label class="collapse" for="c-40435393">[-]</label><label class="expand" for="c-40435393">[1 more]</label></div><br/><div class="children"><div class="content">Why would they need to keep it secret if its a review and internal-only?</div><br/></div></div></div></div></div></div><div id="40433421" class="c"><input type="checkbox" id="c-40433421" checked=""/><div class="controls bullet"><span class="by">kazinator</span><span>|</span><a href="#40434756">prev</a><span>|</span><a href="#40432897">next</a><span>|</span><label class="collapse" for="c-40433421">[-]</label><label class="expand" for="c-40433421">[10 more]</label></div><br/><div class="children"><div class="content">Why would a cron job that sends e-mails need to implement its own SMTP client???<p>You just use the mail program from mailutils or whatever.<p>Just from a point of view of deliverability, developing bare bones SMTP interaction over a socket is a nonstarter. You can&#x27;t just connect to random mail exchange hosts directly and send mail these days. A solution has to be capable of connecting to a specific SMTP forwarding host (e.g. provided by your ISP). For that, you need to implement connections over TLS, with authentication and all.<p>Also, a slightly ironic thing is that <i>cron already knows how to send mail</i>.   The output of a cron job is mailed to the owner. Some crons let that mail address be overriden with a MAILTO variable in the crontab or some such thing.</div><br/><div id="40434911" class="c"><input type="checkbox" id="c-40434911" checked=""/><div class="controls bullet"><span class="by">partdavid</span><span>|</span><a href="#40433421">parent</a><span>|</span><a href="#40436397">next</a><span>|</span><label class="collapse" for="c-40434911">[-]</label><label class="expand" for="c-40434911">[2 more]</label></div><br/><div class="children"><div class="content">There&#x27;s actually a lot of things that embed a SMTP client for sending mail that should use a host MTA. The reason is that the user who actually wants to use &quot;the thing&quot; is often just about able to enter an SMTP server, but there&#x27;s no way &quot;the thing&quot; can trust that a properly-configured sender MTA like sendmail is configured. Companies have huge fleets of servers that can&#x27;t send system mail, and it&#x27;s often not really under the control of the author of your frobulator program or the user, either. Mail itself is a specialist configuration, often requiring prerequisites in DNS, crypto stuff, policies, etc. It&#x27;s &quot;too much&quot; for just being able to have your wallet or whatever send you mail; &quot;contact your system administrator&quot; is just often not a realistic option, in both large and small scales.<p>It&#x27;s not a good reason, no--definitely not--but it&#x27;s a real reason.</div><br/><div id="40437285" class="c"><input type="checkbox" id="c-40437285" checked=""/><div class="controls bullet"><span class="by">kazinator</span><span>|</span><a href="#40433421">root</a><span>|</span><a href="#40434911">parent</a><span>|</span><a href="#40436397">next</a><span>|</span><label class="collapse" for="c-40437285">[-]</label><label class="expand" for="c-40437285">[1 more]</label></div><br/><div class="children"><div class="content">The SMTP client needs to be configured. E.g. if there is a particular SMTP forwarding host that must be used, you have somehow get the &quot;mail&quot; utility to use that, and you must somehow any get any given SMTP library to also use it.</div><br/></div></div></div></div><div id="40436397" class="c"><input type="checkbox" id="c-40436397" checked=""/><div class="controls bullet"><span class="by">bastawhiz</span><span>|</span><a href="#40433421">parent</a><span>|</span><a href="#40434911">prev</a><span>|</span><a href="#40434134">next</a><span>|</span><label class="collapse" for="c-40436397">[-]</label><label class="expand" for="c-40436397">[3 more]</label></div><br/><div class="children"><div class="content">There&#x27;s no universe where I&#x27;d trust that there&#x27;s already some binary on the system to send mail for me, but I definitely wouldn&#x27;t roll my own. For any reasonable language, there&#x27;s a multitude of SMTP client libraries available if there&#x27;s not already one in the stdlib.</div><br/><div id="40437225" class="c"><input type="checkbox" id="c-40437225" checked=""/><div class="controls bullet"><span class="by">erhaetherth</span><span>|</span><a href="#40433421">root</a><span>|</span><a href="#40436397">parent</a><span>|</span><a href="#40437264">next</a><span>|</span><label class="collapse" for="c-40437225">[-]</label><label class="expand" for="c-40437225">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;d give up instantly and outsource it to a SaaS. I&#x27;m no expert on email but I know enough to know it&#x27;s a PITA and managing delivery is a thing, and you have to make sure your DNS is configured right out the receiver will just reject it, there&#x27;s reputations to consider, you probably want to throttle how fast you send it.. ugh.</div><br/></div></div><div id="40437264" class="c"><input type="checkbox" id="c-40437264" checked=""/><div class="controls bullet"><span class="by">kazinator</span><span>|</span><a href="#40433421">root</a><span>|</span><a href="#40436397">parent</a><span>|</span><a href="#40437225">prev</a><span>|</span><a href="#40434134">next</a><span>|</span><label class="collapse" for="c-40437264">[-]</label><label class="expand" for="c-40437264">[1 more]</label></div><br/><div class="children"><div class="content">They are relying on a cron program being there, so ...<p>You can require it and it gets provisioned.</div><br/></div></div></div></div><div id="40434134" class="c"><input type="checkbox" id="c-40434134" checked=""/><div class="controls bullet"><span class="by">ummonk</span><span>|</span><a href="#40433421">parent</a><span>|</span><a href="#40436397">prev</a><span>|</span><a href="#40432897">next</a><span>|</span><label class="collapse" for="c-40434134">[-]</label><label class="expand" for="c-40434134">[4 more]</label></div><br/><div class="children"><div class="content">Just another example of Zawinski&#x27;s law, no?</div><br/><div id="40434560" class="c"><input type="checkbox" id="c-40434560" checked=""/><div class="controls bullet"><span class="by">onlyrealcuzzo</span><span>|</span><a href="#40433421">root</a><span>|</span><a href="#40434134">parent</a><span>|</span><a href="#40432897">next</a><span>|</span><label class="collapse" for="c-40434560">[-]</label><label class="expand" for="c-40434560">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Zawinski&#x27;s Law captures common market pressure on software solutions, stating that “every program attempts to expand until it can read mail. Those programs which cannot so expand are replaced by ones which can.”</div><br/><div id="40434945" class="c"><input type="checkbox" id="c-40434945" checked=""/><div class="controls bullet"><span class="by">sjf</span><span>|</span><a href="#40433421">root</a><span>|</span><a href="#40434560">parent</a><span>|</span><a href="#40432897">next</a><span>|</span><label class="collapse" for="c-40434945">[-]</label><label class="expand" for="c-40434945">[2 more]</label></div><br/><div class="children"><div class="content">The modern version would seem to be every platform expands until it includes instant messaging.</div><br/><div id="40434990" class="c"><input type="checkbox" id="c-40434990" checked=""/><div class="controls bullet"><span class="by">tantalor</span><span>|</span><a href="#40433421">root</a><span>|</span><a href="#40434945">parent</a><span>|</span><a href="#40432897">next</a><span>|</span><label class="collapse" for="c-40434990">[-]</label><label class="expand" for="c-40434990">[1 more]</label></div><br/><div class="children"><div class="content">IM is just fancy email.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="40432897" class="c"><input type="checkbox" id="c-40432897" checked=""/><div class="controls bullet"><span class="by">teddyh</span><span>|</span><a href="#40433421">prev</a><span>|</span><a href="#40432477">next</a><span>|</span><label class="collapse" for="c-40432897">[-]</label><label class="expand" for="c-40432897">[9 more]</label></div><br/><div class="children"><div class="content">I see <i>two</i> huge bad habits here.  The first is the obvious one, as pointed out by many commenters here: Don’t implement standards haphazardly, if you even should do so yourself.  Either give the implementations the necessary care and attention, or use a pre-made library.<p>But the other thing is: Don’t vendor your dependencies.  Those libraries you use need to be updated regularly and timely, and absolutely <i>not</i> “only as necessary”.  If updates lag behind or are avoided entirely, bugs like this can be huge problems <i>even when the upstream code has been fixed</i>, for people who thought that they should update only when they, themselves, see a problem or need.</div><br/><div id="40433020" class="c"><input type="checkbox" id="c-40433020" checked=""/><div class="controls bullet"><span class="by">otterley</span><span>|</span><a href="#40432897">parent</a><span>|</span><a href="#40432915">next</a><span>|</span><label class="collapse" for="c-40433020">[-]</label><label class="expand" for="c-40433020">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Don’t vendor your dependencies.<p>The alternative seems worse: your own application&#x27;s stability is now at risk against upstream changes that could break your code. Sure, you might not get a fix immediately, but I&#x27;d rather know I&#x27;m making a change because I need a fix than introducing instability and additional risk that I don&#x27;t want to subject myself to. &quot;If it ain&#x27;t broke, don&#x27;t fix it.&quot;</div><br/><div id="40433280" class="c"><input type="checkbox" id="c-40433280" checked=""/><div class="controls bullet"><span class="by">skybrian</span><span>|</span><a href="#40432897">root</a><span>|</span><a href="#40433020">parent</a><span>|</span><a href="#40432915">next</a><span>|</span><label class="collapse" for="c-40433280">[-]</label><label class="expand" for="c-40433280">[2 more]</label></div><br/><div class="children"><div class="content">I like Go&#x27;s approach, which ensures that all upgrades happen when you choose to do some upgrades.<p>(For apps, a lock file will do it too.)</div><br/><div id="40436879" class="c"><input type="checkbox" id="c-40436879" checked=""/><div class="controls bullet"><span class="by">cpeterso</span><span>|</span><a href="#40432897">root</a><span>|</span><a href="#40433280">parent</a><span>|</span><a href="#40432915">next</a><span>|</span><label class="collapse" for="c-40436879">[-]</label><label class="expand" for="c-40436879">[1 more]</label></div><br/><div class="children"><div class="content">Taking dependency updating to the extreme, some Google projects adopt a &quot;live at head&quot; philosophy, where their projects depend on their dependencies&#x27; top-of-tree main commits, not a release branch:<p><a href="https:&#x2F;&#x2F;chromium.googlesource.com&#x2F;chromium&#x2F;src&#x2F;+&#x2F;HEAD&#x2F;third_party&#x2F;abseil-cpp&#x2F;FAQ.md#what-is-live-at-head-and-how-do-i-do-it" rel="nofollow">https:&#x2F;&#x2F;chromium.googlesource.com&#x2F;chromium&#x2F;src&#x2F;+&#x2F;HEAD&#x2F;third_...</a></div><br/></div></div></div></div></div></div><div id="40432915" class="c"><input type="checkbox" id="c-40432915" checked=""/><div class="controls bullet"><span class="by">the_real_tjaart</span><span>|</span><a href="#40432897">parent</a><span>|</span><a href="#40433020">prev</a><span>|</span><a href="#40432477">next</a><span>|</span><label class="collapse" for="c-40432915">[-]</label><label class="expand" for="c-40432915">[5 more]</label></div><br/><div class="children"><div class="content">&gt; Don’t implement standards haphazardly, if you even should do so yourself. Either give the implementations the necessary care and attention, or use a pre-made library.<p>I agree 100%.</div><br/><div id="40434135" class="c"><input type="checkbox" id="c-40434135" checked=""/><div class="controls bullet"><span class="by">ryandrake</span><span>|</span><a href="#40432897">root</a><span>|</span><a href="#40432915">parent</a><span>|</span><a href="#40432477">next</a><span>|</span><label class="collapse" for="c-40434135">[-]</label><label class="expand" for="c-40434135">[4 more]</label></div><br/><div class="children"><div class="content">Famous last words at &gt;50% of the companies I&#x27;ve worked: &quot;Just implement as much of standard X as you need to ship an MVP of feature Y!&quot;</div><br/><div id="40434551" class="c"><input type="checkbox" id="c-40434551" checked=""/><div class="controls bullet"><span class="by">rrr_oh_man</span><span>|</span><a href="#40432897">root</a><span>|</span><a href="#40434135">parent</a><span>|</span><a href="#40432477">next</a><span>|</span><label class="collapse" for="c-40434551">[-]</label><label class="expand" for="c-40434551">[3 more]</label></div><br/><div class="children"><div class="content">Can you share a story?</div><br/><div id="40434720" class="c"><input type="checkbox" id="c-40434720" checked=""/><div class="controls bullet"><span class="by">maxbond</span><span>|</span><a href="#40432897">root</a><span>|</span><a href="#40434551">parent</a><span>|</span><a href="#40434806">next</a><span>|</span><label class="collapse" for="c-40434720">[-]</label><label class="expand" for="c-40434720">[1 more]</label></div><br/><div class="children"><div class="content">I had a very difficult to track down bug that ended up losing us a very big fish client, that came down to parsing a binary file with an ad-hoc parser that looked for the index of a header. They didn&#x27;t realize that after the header was some metadata, so a small amount of metadata was interpreted as data. I fixed it by writing a proper ad-hoc parser that actually worked on a header-by-header level. But the damage was done and we had looked like buffoons to the client.<p>Was very hard for the team. There was a shouting match over it, some hard feelings. The code was written in the spirit GP alludes to by an enthusiastic executive who wanted to help lighten the load. I should&#x27;ve rejected the PR but was intimidated to reject the exec&#x27;s code (not an engineering reason for an engineering decision!). The exec was a good data scientist but not as strong a coder as me, and parsing binary files is one of my specialties.<p>Friends don&#x27;t let friends parse using &quot;indexOf()&quot;.</div><br/></div></div><div id="40434806" class="c"><input type="checkbox" id="c-40434806" checked=""/><div class="controls bullet"><span class="by">ryandrake</span><span>|</span><a href="#40432897">root</a><span>|</span><a href="#40434551">parent</a><span>|</span><a href="#40434720">prev</a><span>|</span><a href="#40432477">next</a><span>|</span><label class="collapse" for="c-40434806">[-]</label><label class="expand" for="c-40434806">[1 more]</label></div><br/><div class="children"><div class="content">As the sibling comment already mentioned, file format reading is a big one. Oh, a customer needs us to ingest CSV data. Let&#x27;s just roll our own CSV parser, the file format is simple, right? What could go wrong? Same for graphics formats. We need to read PNG files, so let&#x27;s just figure out the format and implement just enough to read the handful of files we have on hand. Even though libpng exists.<p>Another, more domain specific one: We have to talk to a GPS receiver that connects via RS-232 and outputs NMEA formatted data. This device, like all such devices, outputs a small subset of the standard. So parse just enough of it for that one device we have to get working, and ship it. Then someone attaches a different device that outputs a different subset of the standard and the software fails (sometimes gracefully, sometimes not).</div><br/></div></div></div></div></div></div></div></div></div></div><div id="40432477" class="c"><input type="checkbox" id="c-40432477" checked=""/><div class="controls bullet"><span class="by">banish-m4</span><span>|</span><a href="#40432897">prev</a><span>|</span><a href="#40433366">next</a><span>|</span><label class="collapse" for="c-40432477">[-]</label><label class="expand" for="c-40432477">[1 more]</label></div><br/><div class="children"><div class="content">Dot stuffing required<p>SMTP <a href="https:&#x2F;&#x2F;www.rfc-editor.org&#x2F;rfc&#x2F;rfc5321#section-4.5.2" rel="nofollow">https:&#x2F;&#x2F;www.rfc-editor.org&#x2F;rfc&#x2F;rfc5321#section-4.5.2</a><p>Also in POP3 <a href="https:&#x2F;&#x2F;www.rfc-editor.org&#x2F;rfc&#x2F;rfc1939#page-8" rel="nofollow">https:&#x2F;&#x2F;www.rfc-editor.org&#x2F;rfc&#x2F;rfc1939#page-8</a></div><br/></div></div><div id="40433366" class="c"><input type="checkbox" id="c-40433366" checked=""/><div class="controls bullet"><span class="by">kazinator</span><span>|</span><a href="#40432477">prev</a><span>|</span><a href="#40438201">next</a><span>|</span><label class="collapse" for="c-40433366">[-]</label><label class="expand" for="c-40433366">[5 more]</label></div><br/><div class="children"><div class="content">But the line &quot;We are happy to welcome you to our family.&quot; is not anywhere near the line limit. There is something else going on here, like perhaps the whole thing actually being an HTML MIME attachment, perhaps? IN which it is like<p><pre><code>  ... lots of text ... &lt;br&gt;We are happy to welcome you to our family.&lt;br&gt;
</code></pre>
or whatever. But if you blindly split HTML into lines, it will break tags.</div><br/><div id="40436041" class="c"><input type="checkbox" id="c-40436041" checked=""/><div class="controls bullet"><span class="by">the_real_tjaart</span><span>|</span><a href="#40433366">parent</a><span>|</span><a href="#40434329">next</a><span>|</span><label class="collapse" for="c-40436041">[-]</label><label class="expand" for="c-40436041">[1 more]</label></div><br/><div class="children"><div class="content">This was just an example, sorry for not providing a real example that had the exact character count.</div><br/></div></div><div id="40434329" class="c"><input type="checkbox" id="c-40434329" checked=""/><div class="controls bullet"><span class="by">canucker2016</span><span>|</span><a href="#40433366">parent</a><span>|</span><a href="#40436041">prev</a><span>|</span><a href="#40434857">next</a><span>|</span><label class="collapse" for="c-40434329">[-]</label><label class="expand" for="c-40434329">[2 more]</label></div><br/><div class="children"><div class="content">and probably the vast majority of the people receiving those broken HTML emails will realize there&#x27;s something wrong with the email&#x27;s formatting, chalk up the problem to a company that can&#x27;t be bothered to correctly write a legible email and lower the company&#x27;s competence rating, and go on to the next email.<p>the company is just blindly unaware to their minor problem.</div><br/><div id="40434434" class="c"><input type="checkbox" id="c-40434434" checked=""/><div class="controls bullet"><span class="by">dylan604</span><span>|</span><a href="#40433366">root</a><span>|</span><a href="#40434329">parent</a><span>|</span><a href="#40434857">next</a><span>|</span><label class="collapse" for="c-40434434">[-]</label><label class="expand" for="c-40434434">[1 more]</label></div><br/><div class="children"><div class="content">rarely do I hold the sins of an incompetent marketing department against the company itself. otherwise, there&#x27;d be no company left deemed as competent because all marketing departments are incompetent.</div><br/></div></div></div></div><div id="40434857" class="c"><input type="checkbox" id="c-40434857" checked=""/><div class="controls bullet"><span class="by">Aloisius</span><span>|</span><a href="#40433366">parent</a><span>|</span><a href="#40434329">prev</a><span>|</span><a href="#40438201">next</a><span>|</span><label class="collapse" for="c-40434857">[-]</label><label class="expand" for="c-40434857">[1 more]</label></div><br/><div class="children"><div class="content">Quoted-printable encoding with soft breaks would allow blind splitting of lines without breaking HTML tags.<p>While quoted-printable is supposed to have a max line limit of 78 characters including CRLF rather than 1000, email clients tend to be permissive.</div><br/></div></div></div></div><div id="40438201" class="c"><input type="checkbox" id="c-40438201" checked=""/><div class="controls bullet"><span class="by">croes</span><span>|</span><a href="#40433366">prev</a><span>|</span><a href="#40434783">next</a><span>|</span><label class="collapse" for="c-40438201">[-]</label><label class="expand" for="c-40438201">[2 more]</label></div><br/><div class="children"><div class="content">&gt;the first character is a period and there are other characters on the line, the first character is deleted.<p>Why is it implemented that way?<p>If a single period means end of mail then more than a period means it&#x27;s mail data.<p>Why deleting the period in the first place?
Couldn&#x27;t they store one byte to check the next?</div><br/><div id="40438533" class="c"><input type="checkbox" id="c-40438533" checked=""/><div class="controls bullet"><span class="by">wruza</span><span>|</span><a href="#40438201">parent</a><span>|</span><a href="#40434783">next</a><span>|</span><label class="collapse" for="c-40438533">[-]</label><label class="expand" for="c-40438533">[1 more]</label></div><br/><div class="children"><div class="content">Cause you have to send a line with a single period somehow.<p><pre><code>  .     Ends body
  ..    One period &lt;--
  ...   Two periods
  .A    A
  ..A   .A
  A     A
</code></pre>
Anyway that’s stupid and only helps if you compose your email right in a tcp session.</div><br/></div></div></div></div><div id="40434783" class="c"><input type="checkbox" id="c-40434783" checked=""/><div class="controls bullet"><span class="by">irrational</span><span>|</span><a href="#40438201">prev</a><span>|</span><a href="#40433797">next</a><span>|</span><label class="collapse" for="c-40434783">[-]</label><label class="expand" for="c-40434783">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Seeing that the SMTP client code was borrowed from a previous project we thought it good to let our other teams know about this bug in case they needed to patch it as well. They thanked us and we called it a day.<p>As soon as I read the above, I knew the below would be the result.<p>&gt; It seems one of our other teams haven&#x27;t gotten around to patching this bug in their code.</div><br/></div></div><div id="40433797" class="c"><input type="checkbox" id="c-40433797" checked=""/><div class="controls bullet"><span class="by">eschneider</span><span>|</span><a href="#40434783">prev</a><span>|</span><a href="#40437995">next</a><span>|</span><label class="collapse" for="c-40433797">[-]</label><label class="expand" for="c-40433797">[1 more]</label></div><br/><div class="children"><div class="content">I guessed the cause of the problem (well, &quot;leading period&quot;) from the description, but that&#x27;s because I&#x27;ve experienced a lot of pain in my life...</div><br/></div></div><div id="40437995" class="c"><input type="checkbox" id="c-40437995" checked=""/><div class="controls bullet"><span class="by">davidwritesbugs</span><span>|</span><a href="#40433797">prev</a><span>|</span><a href="#40435813">next</a><span>|</span><label class="collapse" for="c-40437995">[-]</label><label class="expand" for="c-40437995">[1 more]</label></div><br/><div class="children"><div class="content">As I&#x27;m implementing an NNTP server based on RFC specs I knew instantly what was happening here without RFA. Dot stuffing, yea 80s protocols baby.</div><br/></div></div><div id="40435813" class="c"><input type="checkbox" id="c-40435813" checked=""/><div class="controls bullet"><span class="by">carimura</span><span>|</span><a href="#40437995">prev</a><span>|</span><a href="#40438174">next</a><span>|</span><label class="collapse" for="c-40435813">[-]</label><label class="expand" for="c-40435813">[2 more]</label></div><br/><div class="children"><div class="content">Good story. Reading this reminds me of all the &quot;curious cases of.....&quot; that I&#x27;ve solved (or in some cases not solved) over my career and how that feeling of triumph is so deeply tied to why I got into computers in the first place. The pure joy of unraveling the mysteries of engineering... like forgetting a semi-colon somewhere in a 50k LOC Perl backend.</div><br/><div id="40436029" class="c"><input type="checkbox" id="c-40436029" checked=""/><div class="controls bullet"><span class="by">the_real_tjaart</span><span>|</span><a href="#40435813">parent</a><span>|</span><a href="#40438174">next</a><span>|</span><label class="collapse" for="c-40436029">[-]</label><label class="expand" for="c-40436029">[1 more]</label></div><br/><div class="children"><div class="content">&gt; how that feeling of triumph is so deeply tied to why I got into computers in the first place<p>I share your sentiment, thank you for reading.</div><br/></div></div></div></div><div id="40438174" class="c"><input type="checkbox" id="c-40438174" checked=""/><div class="controls bullet"><span class="by">edweis</span><span>|</span><a href="#40435813">prev</a><span>|</span><a href="#40433442">next</a><span>|</span><label class="collapse" for="c-40438174">[-]</label><label class="expand" for="c-40438174">[1 more]</label></div><br/><div class="children"><div class="content">I like the simplicity of the email membership price increase.</div><br/></div></div><div id="40433442" class="c"><input type="checkbox" id="c-40433442" checked=""/><div class="controls bullet"><span class="by">jayceedenton</span><span>|</span><a href="#40438174">prev</a><span>|</span><a href="#40433372">next</a><span>|</span><label class="collapse" for="c-40433442">[-]</label><label class="expand" for="c-40433442">[1 more]</label></div><br/><div class="children"><div class="content">&gt; A portion of this code implemented a SMTP client.<p>What the...</div><br/></div></div><div id="40433372" class="c"><input type="checkbox" id="c-40433372" checked=""/><div class="controls bullet"><span class="by">davidmurdoch</span><span>|</span><a href="#40433442">prev</a><span>|</span><a href="#40432366">next</a><span>|</span><label class="collapse" for="c-40433372">[-]</label><label class="expand" for="c-40433372">[6 more]</label></div><br/><div class="children"><div class="content">Loved reading this. This is now one of my new favorite bug hunt stories!</div><br/><div id="40434583" class="c"><input type="checkbox" id="c-40434583" checked=""/><div class="controls bullet"><span class="by">rrr_oh_man</span><span>|</span><a href="#40433372">parent</a><span>|</span><a href="#40436060">next</a><span>|</span><label class="collapse" for="c-40434583">[-]</label><label class="expand" for="c-40434583">[2 more]</label></div><br/><div class="children"><div class="content">I found it quite mild compared to the 500 mile email<p><a href="https:&#x2F;&#x2F;www.ibiblio.org&#x2F;harris&#x2F;500milemail.html" rel="nofollow">https:&#x2F;&#x2F;www.ibiblio.org&#x2F;harris&#x2F;500milemail.html</a></div><br/><div id="40434597" class="c"><input type="checkbox" id="c-40434597" checked=""/><div class="controls bullet"><span class="by">davidmurdoch</span><span>|</span><a href="#40433372">root</a><span>|</span><a href="#40434583">parent</a><span>|</span><a href="#40436060">next</a><span>|</span><label class="collapse" for="c-40434597">[-]</label><label class="expand" for="c-40434597">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s my favorite.</div><br/></div></div></div></div><div id="40436060" class="c"><input type="checkbox" id="c-40436060" checked=""/><div class="controls bullet"><span class="by">the_real_tjaart</span><span>|</span><a href="#40433372">parent</a><span>|</span><a href="#40434583">prev</a><span>|</span><a href="#40435438">next</a><span>|</span><label class="collapse" for="c-40436060">[-]</label><label class="expand" for="c-40436060">[1 more]</label></div><br/><div class="children"><div class="content">I am glad you enjoyed it.</div><br/></div></div></div></div><div id="40432366" class="c"><input type="checkbox" id="c-40432366" checked=""/><div class="controls bullet"><span class="by">blueflow</span><span>|</span><a href="#40433372">prev</a><span>|</span><a href="#40434701">next</a><span>|</span><label class="collapse" for="c-40432366">[-]</label><label class="expand" for="c-40432366">[6 more]</label></div><br/><div class="children"><div class="content">You can avoid this mess altogether by using the quoted-printable content encoding when generating emails.</div><br/><div id="40432850" class="c"><input type="checkbox" id="c-40432850" checked=""/><div class="controls bullet"><span class="by">unilynx</span><span>|</span><a href="#40432366">parent</a><span>|</span><a href="#40434701">next</a><span>|</span><label class="collapse" for="c-40432850">[-]</label><label class="expand" for="c-40432850">[5 more]</label></div><br/><div class="children"><div class="content">How so? Quoted printable doesn&#x27;t require the dot to be encoded.<p>Maybe you&#x27;re thinking of base64 encoding?</div><br/><div id="40432966" class="c"><input type="checkbox" id="c-40432966" checked=""/><div class="controls bullet"><span class="by">blueflow</span><span>|</span><a href="#40432366">root</a><span>|</span><a href="#40432850">parent</a><span>|</span><a href="#40434701">next</a><span>|</span><label class="collapse" for="c-40432966">[-]</label><label class="expand" for="c-40432966">[4 more]</label></div><br/><div class="children"><div class="content">Doesn&#x27;t <i>require</i>, but comfortably allows you to do.</div><br/><div id="40433687" class="c"><input type="checkbox" id="c-40433687" checked=""/><div class="controls bullet"><span class="by">unilynx</span><span>|</span><a href="#40432366">root</a><span>|</span><a href="#40432966">parent</a><span>|</span><a href="#40434701">next</a><span>|</span><label class="collapse" for="c-40433687">[-]</label><label class="expand" for="c-40433687">[3 more]</label></div><br/><div class="children"><div class="content">Agreed.<p>But this is SMTP, I have no doubt there are gateways out there that will reencode the mail and put the dot back in the wrong place, eg in the name of wrapping all URLs behind a phishing-warning-page</div><br/><div id="40434357" class="c"><input type="checkbox" id="c-40434357" checked=""/><div class="controls bullet"><span class="by">opello</span><span>|</span><a href="#40432366">root</a><span>|</span><a href="#40433687">parent</a><span>|</span><a href="#40434701">next</a><span>|</span><label class="collapse" for="c-40434357">[-]</label><label class="expand" for="c-40434357">[2 more]</label></div><br/><div class="children"><div class="content">I think the point here is that any subsequent implementation handling the message may well not be susceptible to the problem thus avoiding the erroneous behavior.</div><br/><div id="40437581" class="c"><input type="checkbox" id="c-40437581" checked=""/><div class="controls bullet"><span class="by">int_19h</span><span>|</span><a href="#40432366">root</a><span>|</span><a href="#40434357">parent</a><span>|</span><a href="#40434701">next</a><span>|</span><label class="collapse" for="c-40437581">[-]</label><label class="expand" for="c-40437581">[1 more]</label></div><br/><div class="children"><div class="content">It can handle it fine in that sense, but still unquote it before sending it over to the next node. Which might have the bug.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="40434701" class="c"><input type="checkbox" id="c-40434701" checked=""/><div class="controls bullet"><span class="by">bhaney</span><span>|</span><a href="#40432366">prev</a><span>|</span><a href="#40436080">next</a><span>|</span><label class="collapse" for="c-40434701">[-]</label><label class="expand" for="c-40434701">[1 more]</label></div><br/><div class="children"><div class="content">This made me realize I have the opposite problem. Now I have to go update the toy SMTP server that I ended up implementing in a perl script so it handles SMTP clients double-dotting a line.</div><br/></div></div><div id="40436080" class="c"><input type="checkbox" id="c-40436080" checked=""/><div class="controls bullet"><span class="by">sethammons</span><span>|</span><a href="#40434701">prev</a><span>|</span><a href="#40438228">next</a><span>|</span><label class="collapse" for="c-40436080">[-]</label><label class="expand" for="c-40436080">[2 more]</label></div><br/><div class="children"><div class="content">I recognized the problem on sight; we solved this exact issue but since it was MTA software we knew about periods being special. Unfortunately, people are often solving problems that many others have solved. Maybe AI will allow the lines to be connected or solve for known edge cases like a dot in the smtp data</div><br/><div id="40436585" class="c"><input type="checkbox" id="c-40436585" checked=""/><div class="controls bullet"><span class="by">genewitch</span><span>|</span><a href="#40436080">parent</a><span>|</span><a href="#40438228">next</a><span>|</span><label class="collapse" for="c-40436585">[-]</label><label class="expand" for="c-40436585">[1 more]</label></div><br/><div class="children"><div class="content">you know, now that you mention this, i think i <i>have</i> heard of this exact problem before, perhaps from the late 90s; the &quot;full stop on a line by itself&quot; itched a bit, probably for that reason as well.</div><br/></div></div></div></div><div id="40438228" class="c"><input type="checkbox" id="c-40438228" checked=""/><div class="controls bullet"><span class="by">layer8</span><span>|</span><a href="#40436080">prev</a><span>|</span><a href="#40437623">next</a><span>|</span><label class="collapse" for="c-40438228">[-]</label><label class="expand" for="c-40438228">[1 more]</label></div><br/><div class="children"><div class="content">SMTP = Sporadically Missing Trailing Period<p>;-)</div><br/></div></div><div id="40437623" class="c"><input type="checkbox" id="c-40437623" checked=""/><div class="controls bullet"><span class="by">Learner100</span><span>|</span><a href="#40438228">prev</a><span>|</span><a href="#40432854">next</a><span>|</span><label class="collapse" for="c-40437623">[-]</label><label class="expand" for="c-40437623">[2 more]</label></div><br/><div class="children"><div class="content">- The SMTP client they implemented could insert a newline such that a line was comprised of only a single period.<p>- The SMTP client spec says that an additional period would be added here.<p>- The SMTP server spec says that it would remove this additional period, bringing us back to one period.<p>I don’t get how this led to there being no period at all. Am I missing something?</div><br/><div id="40437640" class="c"><input type="checkbox" id="c-40437640" checked=""/><div class="controls bullet"><span class="by">roer</span><span>|</span><a href="#40437623">parent</a><span>|</span><a href="#40432854">next</a><span>|</span><label class="collapse" for="c-40437640">[-]</label><label class="expand" for="c-40437640">[1 more]</label></div><br/><div class="children"><div class="content">The spec says that an additional period should be added on the client, but their implementation did not do that.</div><br/></div></div></div></div><div id="40432854" class="c"><input type="checkbox" id="c-40432854" checked=""/><div class="controls bullet"><span class="by">jeffbee</span><span>|</span><a href="#40437623">prev</a><span>|</span><a href="#40434327">next</a><span>|</span><label class="collapse" for="c-40432854">[-]</label><label class="expand" for="c-40432854">[6 more]</label></div><br/><div class="children"><div class="content">If a person has never heard of dot stuffing they&#x27;re never going to believe what other horrors lie within the email space. Header folding, quoting in the local part, ipv6 literals, etc.</div><br/><div id="40432989" class="c"><input type="checkbox" id="c-40432989" checked=""/><div class="controls bullet"><span class="by">blueflow</span><span>|</span><a href="#40432854">parent</a><span>|</span><a href="#40434327">next</a><span>|</span><label class="collapse" for="c-40432989">[-]</label><label class="expand" for="c-40432989">[5 more]</label></div><br/><div class="children"><div class="content">Whats the issue with ipv6 literals?</div><br/><div id="40433193" class="c"><input type="checkbox" id="c-40433193" checked=""/><div class="controls bullet"><span class="by">jeffbee</span><span>|</span><a href="#40432854">root</a><span>|</span><a href="#40432989">parent</a><span>|</span><a href="#40434327">next</a><span>|</span><label class="collapse" for="c-40433193">[-]</label><label class="expand" for="c-40433193">[4 more]</label></div><br/><div class="children"><div class="content">Everything that is normally annoying with IPv6 literals, plus the fact that it&#x27;s encapsulated as [IPV6:&lt;the address&gt;] and the address could take a dumb form such as ::1.2.3.4. But I mentioned it because it might initially seem to a neophyte in this field that the thing to the right of the rightmost @ sign is a name you can pass to your resolver. It might not be.</div><br/><div id="40433447" class="c"><input type="checkbox" id="c-40433447" checked=""/><div class="controls bullet"><span class="by">jcranmer</span><span>|</span><a href="#40432854">root</a><span>|</span><a href="#40433193">parent</a><span>|</span><a href="#40433233">next</a><span>|</span><label class="collapse" for="c-40433447">[-]</label><label class="expand" for="c-40433447">[1 more]</label></div><br/><div class="children"><div class="content">Note that IPv4 address literals are encoded in square brackets (e.g., user@[127.0.0.1]), so it&#x27;s really all IP address literals that could be a problem rather than specifically IPv6 literals.</div><br/></div></div><div id="40433233" class="c"><input type="checkbox" id="c-40433233" checked=""/><div class="controls bullet"><span class="by">kazinator</span><span>|</span><a href="#40432854">root</a><span>|</span><a href="#40433193">parent</a><span>|</span><a href="#40433447">prev</a><span>|</span><a href="#40434327">next</a><span>|</span><label class="collapse" for="c-40433233">[-]</label><label class="expand" for="c-40433233">[2 more]</label></div><br/><div class="children"><div class="content">The IPv6 notation claims : for separating digits. But that&#x27;s already an established notation for port numbers: 10.1.2.3:456.  Oops!<p>The square brackets allow us to stick a port number on it: [ffff::0123:4567]:6301</div><br/><div id="40433424" class="c"><input type="checkbox" id="c-40433424" checked=""/><div class="controls bullet"><span class="by">jeffbee</span><span>|</span><a href="#40432854">root</a><span>|</span><a href="#40433233">parent</a><span>|</span><a href="#40434327">next</a><span>|</span><label class="collapse" for="c-40433424">[-]</label><label class="expand" for="c-40433424">[1 more]</label></div><br/><div class="children"><div class="content">Yes, but the RFCs permit 6v4 addresses such as ff:ee::aa:1.2.3.4</div><br/></div></div></div></div></div></div></div></div></div></div><div id="40434327" class="c"><input type="checkbox" id="c-40434327" checked=""/><div class="controls bullet"><span class="by">tuck1s</span><span>|</span><a href="#40432854">prev</a><span>|</span><a href="#40436534">next</a><span>|</span><label class="collapse" for="c-40434327">[-]</label><label class="expand" for="c-40434327">[1 more]</label></div><br/><div class="children"><div class="content">The need for dot-stuffing is a side-effect of email&#x27;s use of the period as part of the termination sequence CR LF . CR LF.
Mishandling of that sequence has led to other recently discussed bugs. <a href="https:&#x2F;&#x2F;smtpsmuggling.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;smtpsmuggling.com&#x2F;</a></div><br/></div></div><div id="40436534" class="c"><input type="checkbox" id="c-40436534" checked=""/><div class="controls bullet"><span class="by">camel_gopher</span><span>|</span><a href="#40434327">prev</a><span>|</span><a href="#40437766">next</a><span>|</span><label class="collapse" for="c-40436534">[-]</label><label class="expand" for="c-40436534">[1 more]</label></div><br/><div class="children"><div class="content">I have two kids. The case is not curious at all.</div><br/></div></div><div id="40437766" class="c"><input type="checkbox" id="c-40437766" checked=""/><div class="controls bullet"><span class="by">EVa5I7bHFq9mnYK</span><span>|</span><a href="#40436534">prev</a><span>|</span><a href="#40435605">next</a><span>|</span><label class="collapse" for="c-40437766">[-]</label><label class="expand" for="c-40437766">[1 more]</label></div><br/><div class="children"><div class="content">Given that the words Night and Club appear in the picture, the title looked mildly intriguing ..</div><br/></div></div><div id="40435605" class="c"><input type="checkbox" id="c-40435605" checked=""/><div class="controls bullet"><span class="by">readyman</span><span>|</span><a href="#40437766">prev</a><span>|</span><a href="#40435790">next</a><span>|</span><label class="collapse" for="c-40435605">[-]</label><label class="expand" for="c-40435605">[1 more]</label></div><br/><div class="children"><div class="content">The title sounds like a pregnancy scare</div><br/></div></div><div id="40435790" class="c"><input type="checkbox" id="c-40435790" checked=""/><div class="controls bullet"><span class="by">linsomniac</span><span>|</span><a href="#40435605">prev</a><span>|</span><a href="#40432410">next</a><span>|</span><label class="collapse" for="c-40435790">[-]</label><label class="expand" for="c-40435790">[2 more]</label></div><br/><div class="children"><div class="content">Show of hands: Who knew exactly where this was going as soon as &quot;SMTP&quot; was mentioned?</div><br/><div id="40436156" class="c"><input type="checkbox" id="c-40436156" checked=""/><div class="controls bullet"><span class="by">layer8</span><span>|</span><a href="#40435790">parent</a><span>|</span><a href="#40432410">next</a><span>|</span><label class="collapse" for="c-40436156">[-]</label><label class="expand" for="c-40436156">[1 more]</label></div><br/><div class="children"><div class="content">As soon as &quot;missing period&quot; was mentioned I suspected it would be about SMTP.</div><br/></div></div></div></div><div id="40432410" class="c"><input type="checkbox" id="c-40432410" checked=""/><div class="controls bullet"><span class="by">marcosdumay</span><span>|</span><a href="#40435790">prev</a><span>|</span><a href="#40435344">next</a><span>|</span><label class="collapse" for="c-40432410">[-]</label><label class="expand" for="c-40432410">[3 more]</label></div><br/><div class="children"><div class="content">So... SMTP client misses basic SMTP functionality that fits in the 20 lines summary.<p>Good luck having it handle any of the SMTP craziness that isn&#x27;t on the short introduction to the protocol.</div><br/><div id="40432516" class="c"><input type="checkbox" id="c-40432516" checked=""/><div class="controls bullet"><span class="by">banish-m4</span><span>|</span><a href="#40432410">parent</a><span>|</span><a href="#40435344">next</a><span>|</span><label class="collapse" for="c-40432516">[-]</label><label class="expand" for="c-40432516">[2 more]</label></div><br/><div class="children"><div class="content">When you roll your own library duplicating something that likely already exists, you own it all. And that doesn&#x27;t include all of the vendor-specific nonconforming edge-cases.</div><br/><div id="40436998" class="c"><input type="checkbox" id="c-40436998" checked=""/><div class="controls bullet"><span class="by">marcosdumay</span><span>|</span><a href="#40432410">root</a><span>|</span><a href="#40432516">parent</a><span>|</span><a href="#40435344">next</a><span>|</span><label class="collapse" for="c-40436998">[-]</label><label class="expand" for="c-40436998">[1 more]</label></div><br/><div class="children"><div class="content">I guess when you roll your own library, you get an obligation to read the introduction of the 10 pages long standard.<p>Or the usage example.</div><br/></div></div></div></div></div></div><div id="40435344" class="c"><input type="checkbox" id="c-40435344" checked=""/><div class="controls bullet"><span class="by">bufordtwain</span><span>|</span><a href="#40432410">prev</a><span>|</span><a href="#40434137">next</a><span>|</span><label class="collapse" for="c-40435344">[-]</label><label class="expand" for="c-40435344">[2 more]</label></div><br/><div class="children"><div class="content">What about the missing comma at the end of the first line? :)</div><br/><div id="40436051" class="c"><input type="checkbox" id="c-40436051" checked=""/><div class="controls bullet"><span class="by">the_real_tjaart</span><span>|</span><a href="#40435344">parent</a><span>|</span><a href="#40434137">next</a><span>|</span><label class="collapse" for="c-40436051">[-]</label><label class="expand" for="c-40436051">[1 more]</label></div><br/><div class="children"><div class="content">Whoops, :)</div><br/></div></div></div></div><div id="40434137" class="c"><input type="checkbox" id="c-40434137" checked=""/><div class="controls bullet"><span class="by">xmjw</span><span>|</span><a href="#40435344">prev</a><span>|</span><a href="#40435600">next</a><span>|</span><label class="collapse" for="c-40434137">[-]</label><label class="expand" for="c-40434137">[1 more]</label></div><br/><div class="children"><div class="content">Holy shit. This is one of the 2 bugs in my career I never solved. (That I knew about, and lost sleep over, etc…)</div><br/></div></div></div></div></div></div></div></body></html>