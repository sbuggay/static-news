<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1687770058094" as="style"/><link rel="stylesheet" href="styles.css?v=1687770058094"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/TeamHypersomnia/Hypersomnia">Show HN: Open-source shooter which made it to AC: Valhalla and Skydio drones</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>geneotech</span> | <span>17 comments</span></div><br/><div><div id="36476757" class="c"><input type="checkbox" id="c-36476757" checked=""/><div class="controls bullet"><span class="by">andybak</span><span>|</span><a href="#36476935">next</a><span>|</span><label class="collapse" for="c-36476757">[-]</label><label class="expand" for="c-36476757">[3 more]</label></div><br/><div class="children"><div class="content">This looks fascinating but - by god, was your post title hard to parse!</div><br/><div id="36476968" class="c"><input type="checkbox" id="c-36476968" checked=""/><div class="controls bullet"><span class="by">teamonkey</span><span>|</span><a href="#36476757">parent</a><span>|</span><a href="#36476935">next</a><span>|</span><label class="collapse" for="c-36476968">[-]</label><label class="expand" for="c-36476968">[2 more]</label></div><br/><div class="children"><div class="content">Same here. I still find it a bit misleading too.<p>The <i>game</i> didn’t make it to AC:Valhalla, a texture-packing library that was made during its creation did[1] (not wanting to downplay that achievement, it’s worthy of a post in its own right, IMO).<p>It’s also a bit of a stretch to claim it was the source of the ECS system used in Unity. I was using a game engine which used ECS prior to 2010. In the game engine world it seems to originate with Operation Flashpoint[2] (post from 2007).<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;TeamHypersomnia&#x2F;rectpack2D">https:&#x2F;&#x2F;github.com&#x2F;TeamHypersomnia&#x2F;rectpack2D</a><p>[2] <a href="https:&#x2F;&#x2F;t-machine.org&#x2F;index.php&#x2F;2007&#x2F;09&#x2F;03&#x2F;entity-systems-are-the-future-of-mmog-development-part-1&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;t-machine.org&#x2F;index.php&#x2F;2007&#x2F;09&#x2F;03&#x2F;entity-systems-ar...</a></div><br/><div id="36477080" class="c"><input type="checkbox" id="c-36477080" checked=""/><div class="controls bullet"><span class="by">geneotech</span><span>|</span><a href="#36476757">root</a><span>|</span><a href="#36476968">parent</a><span>|</span><a href="#36476935">next</a><span>|</span><label class="collapse" for="c-36477080">[-]</label><label class="expand" for="c-36477080">[1 more]</label></div><br/><div class="children"><div class="content">Hey there, a little clarification - I don&#x27;t claim that I came up with ECS itself, only a particular implementation of it that is very memory efficient, and Unity&#x27;s patent concerns a specific implementation as well - sorry if that was a bit misleading. As for the title, I just couldn&#x27;t resist making the pun, maybe you&#x27;re right though that the packer should be talked about separately.</div><br/></div></div></div></div></div></div><div id="36476935" class="c"><input type="checkbox" id="c-36476935" checked=""/><div class="controls bullet"><span class="by">baq</span><span>|</span><a href="#36476757">prev</a><span>|</span><a href="#36475095">next</a><span>|</span><label class="collapse" for="c-36476935">[-]</label><label class="expand" for="c-36476935">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Networking is based on cross-platform simulation determinism.<p>Springrts[0] has been doing all that has been described here for the same reasons in late 2000s and I guess countless RTS games also, they just weren&#x27;t open source. Not to say it isn&#x27;t an achievement because it is indeed damn hard.<p>[0] <a href="https:&#x2F;&#x2F;springrts.com&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;springrts.com&#x2F;</a></div><br/></div></div><div id="36475095" class="c"><input type="checkbox" id="c-36475095" checked=""/><div class="controls bullet"><span class="by">schemescape</span><span>|</span><a href="#36476935">prev</a><span>|</span><a href="#36473227">next</a><span>|</span><label class="collapse" for="c-36475095">[-]</label><label class="expand" for="c-36475095">[5 more]</label></div><br/><div class="children"><div class="content">I didn’t realize that getting 100% deterministic behavior for floats would require using the same compiler, even when using the same math functions.<p>Is floating point arithmetic not fully specified or something?<p>Edit: should have searched the web first: <a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;49471943&#x2F;floating-point-arithmetic-varies-between-g-and-clang" rel="nofollow noreferrer">https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;49471943&#x2F;floating-point-...</a></div><br/><div id="36475781" class="c"><input type="checkbox" id="c-36475781" checked=""/><div class="controls bullet"><span class="by">ColFrancis</span><span>|</span><a href="#36475095">parent</a><span>|</span><a href="#36476880">next</a><span>|</span><label class="collapse" for="c-36475781">[-]</label><label class="expand" for="c-36475781">[1 more]</label></div><br/><div class="children"><div class="content">As I understand it, it&#x27;s more that the mathematical functions aren&#x27;t specified by the standard.<p>There is no sqrt instruction. So you stard with a taylor approximation, then maybe do a few rounds of Newton&#x27;s method to refine the answer. But what degree is the taylor series? Where did you centre it (can&#x27;t be around 0)? How many Newton&#x27;s methods did you do? IEEE 754 might dictate what multiplication looks like, but for sqrt, sin, cos, tan you need to come up with a method of calculation, and that&#x27;s in the standard library which usually comes from the compiler. You could make your own implementations but...<p>Floats are not associative: (a+b)+c != a+(b+c). So even something like reordering fundamental operations can cause divergence.</div><br/></div></div><div id="36476880" class="c"><input type="checkbox" id="c-36476880" checked=""/><div class="controls bullet"><span class="by">virtue3</span><span>|</span><a href="#36475095">parent</a><span>|</span><a href="#36475781">prev</a><span>|</span><a href="#36475315">next</a><span>|</span><label class="collapse" for="c-36476880">[-]</label><label class="expand" for="c-36476880">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not quite sure they are guaranteed to be deterministic across architectures either.<p>I think rounding up&#x2F;down can vary across architectures.  Mixing arm&#x2F;amd&#x2F;intel here should result in non-deterministic behavior potentially.  <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;IEEE_754#Reproducibility" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;IEEE_754#Reproducibility</a><p>Ah... I see. The game is using a software implementation of floating point maths to avoid this issue :).  Smart.  That in  combination with the unified compiler should get you out of most of the trouble.</div><br/></div></div><div id="36475315" class="c"><input type="checkbox" id="c-36475315" checked=""/><div class="controls bullet"><span class="by">vlovich123</span><span>|</span><a href="#36475095">parent</a><span>|</span><a href="#36476880">prev</a><span>|</span><a href="#36473227">next</a><span>|</span><label class="collapse" for="c-36475315">[-]</label><label class="expand" for="c-36475315">[2 more]</label></div><br/><div class="children"><div class="content">I think it’s just about Intel’s intermediate 80bit precision. Anything else?</div><br/><div id="36476345" class="c"><input type="checkbox" id="c-36476345" checked=""/><div class="controls bullet"><span class="by">kevingadd</span><span>|</span><a href="#36475095">root</a><span>|</span><a href="#36475315">parent</a><span>|</span><a href="#36473227">next</a><span>|</span><label class="collapse" for="c-36476345">[-]</label><label class="expand" for="c-36476345">[1 more]</label></div><br/><div class="children"><div class="content">Any reorderings or optimizations of floating point code could potentially change the results even without 80-bit precision active.</div><br/></div></div></div></div></div></div><div id="36473227" class="c"><input type="checkbox" id="c-36473227" checked=""/><div class="controls bullet"><span class="by">harel</span><span>|</span><a href="#36475095">prev</a><span>|</span><a href="#36476453">next</a><span>|</span><label class="collapse" for="c-36473227">[-]</label><label class="expand" for="c-36473227">[1 more]</label></div><br/><div class="children"><div class="content">I just love these posts and projects and am very grateful that they are provided open sourced. I&#x27;d love to do something like that one day when I have the time (i.e., when I retire), and it&#x27;s these projects that will most likely be my schooling in this world.</div><br/></div></div><div id="36476453" class="c"><input type="checkbox" id="c-36476453" checked=""/><div class="controls bullet"><span class="by">barryp123</span><span>|</span><a href="#36473227">prev</a><span>|</span><a href="#36473978">next</a><span>|</span><label class="collapse" for="c-36476453">[-]</label><label class="expand" for="c-36476453">[1 more]</label></div><br/><div class="children"><div class="content">This looks rad! Reminds me of ARC (Attack Retrieve Capture) back in the late 90s -- now on life support as Armor Critical<p><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Attack_Retrieve_Capture" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Attack_Retrieve_Capture</a>
<a href="http:&#x2F;&#x2F;armorcritical.com" rel="nofollow noreferrer">http:&#x2F;&#x2F;armorcritical.com</a></div><br/></div></div><div id="36473978" class="c"><input type="checkbox" id="c-36473978" checked=""/><div class="controls bullet"><span class="by">numlocked</span><span>|</span><a href="#36476453">prev</a><span>|</span><a href="#36475911">next</a><span>|</span><label class="collapse" for="c-36473978">[-]</label><label class="expand" for="c-36473978">[1 more]</label></div><br/><div class="children"><div class="content">Rebuilding the physics state on client connect is a cool solution to synchronization!</div><br/></div></div><div id="36475911" class="c"><input type="checkbox" id="c-36475911" checked=""/><div class="controls bullet"><span class="by">theogravity</span><span>|</span><a href="#36473978">prev</a><span>|</span><a href="#36474067">next</a><span>|</span><label class="collapse" for="c-36475911">[-]</label><label class="expand" for="c-36475911">[1 more]</label></div><br/><div class="children"><div class="content">The gameplay reminds me of this this old top down multilayer shooter from the early 2000s called Infantry Online<p><a href="https:&#x2F;&#x2F;www.freeinfantry.com&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.freeinfantry.com&#x2F;</a><p><a href="https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Infantry_(video_game)" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Infantry_(video_game)</a></div><br/></div></div><div id="36474067" class="c"><input type="checkbox" id="c-36474067" checked=""/><div class="controls bullet"><span class="by">juancn</span><span>|</span><a href="#36475911">prev</a><span>|</span><a href="#36469298">next</a><span>|</span><label class="collapse" for="c-36474067">[-]</label><label class="expand" for="c-36474067">[2 more]</label></div><br/><div class="children"><div class="content">Heck! I just realized I&#x27;ve been following some of your posts over the years without intending to. Specially about ECS and networking.<p>It&#x27;s nice to see it so advanced. Congrats!</div><br/><div id="36474343" class="c"><input type="checkbox" id="c-36474343" checked=""/><div class="controls bullet"><span class="by">geneotech</span><span>|</span><a href="#36474067">parent</a><span>|</span><a href="#36469298">next</a><span>|</span><label class="collapse" for="c-36474343">[-]</label><label class="expand" for="c-36474343">[1 more]</label></div><br/><div class="children"><div class="content">Thank you! That&#x27;s interesting, I did write an article on SE about ECS back in 2013, but I think it&#x27;s the first I ever published a proper piece on networking - I do link to an important Glenn Fiedler&#x27;s blogpost when describing my deterministic architecture in README but just in case I&#x27;m not him, I hope I wasn&#x27;t too misleading :)</div><br/></div></div></div></div></div></div></div></div></div></body></html>