<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1703235655988" as="style"/><link rel="stylesheet" href="styles.css?v=1703235655988"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://fusionauth.io/articles/identity-basics/what-is-oidc">What Is OIDC?</a>Â <span class="domain">(<a href="https://fusionauth.io">fusionauth.io</a>)</span></div><div class="subtext"><span>mooreds</span> | <span>23 comments</span></div><br/><div><div id="38730768" class="c"><input type="checkbox" id="c-38730768" checked=""/><div class="controls bullet"><span class="by">mynameisnoone</span><span>|</span><a href="#38732303">next</a><span>|</span><label class="collapse" for="c-38730768">[-]</label><label class="expand" for="c-38730768">[15 more]</label></div><br/><div class="children"><div class="content">PSA: Don&#x27;t outsource either your authentication or authorization. Run it in-house. Don&#x27;t give away the keys to the kingdom to a third-party to fail like Okta or lose the ability to police access that becomes incredibly difficult to audit and classify. There is no panacea work or headaches alleviation by relying on SaaS when the business risks are too great.</div><br/><div id="38731484" class="c"><input type="checkbox" id="c-38731484" checked=""/><div class="controls bullet"><span class="by">solatic</span><span>|</span><a href="#38730768">parent</a><span>|</span><a href="#38731044">next</a><span>|</span><label class="collapse" for="c-38731484">[-]</label><label class="expand" for="c-38731484">[2 more]</label></div><br/><div class="children"><div class="content">&gt; the business risks are too great<p>Building authentication in-house is non-trivial to say the least. It is a dynamic service that fundamentally needs a database and is fundamentally accessible both to the wider public Internet (networking-wise) and to unauthenticated users (which attackers always start out as), which makes it incredibly difficult to secure. DoS, keeping everything patched on a moment&#x27;s notice, rate limiting clients, emailing resets, ensuring your emails continue to be deliverable, suspending accounts hit by credential stuffing, having support processes for unsuspending accounts that are not themselves susceptible to social engineering... the sheer complexity of security engineering required to do this correctly and at scale is not even remotely trivial. Not to mention very strict performance&#x2F;latency requirements because auth is overhead on <i>everything</i>, which gets to be difficult once services start to scale globally, and runs into direct internal contradictions when revocations compete against internal caching.<p>I appreciate the business risk of depending on a third-party for part of the foundation of your value offering, but the truth is, if you&#x27;re not running your own datacenter and hosting your own databases (and therefore your databases are located in some vendor&#x27;s offering, be it co-lo or cloud), you&#x27;re dependent on a vendor for part of the foundation of your value offering. In and of itself, that&#x27;s a pretty normal, expected, and acceptable business risk to take.<p>Not all businesses are the same, and I&#x27;m sure there are some where you need to run auth in-house (like if you&#x27;re selling on-prem software), but I&#x27;m mindful that most companies simply cannot run auth securely. And when their security fails, their users&#x27; data leaks, and in a modern era, that too <i>is</i> a real business risk.</div><br/><div id="38732255" class="c"><input type="checkbox" id="c-38732255" checked=""/><div class="controls bullet"><span class="by">danielEM</span><span>|</span><a href="#38730768">root</a><span>|</span><a href="#38731484">parent</a><span>|</span><a href="#38731044">next</a><span>|</span><label class="collapse" for="c-38732255">[-]</label><label class="expand" for="c-38732255">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m sorry, I&#x27;m not against using 3rd party services, but such a strong statement about so relatively not complex functionality I&#x27;ve heard 1000s of times in my 24 years career and these never stood itself for long.<p>Every then and now I hear some IT &quot;priests&quot; screaming don&#x27;t do this, do that and people follow it. But I see it always leads to something being &quot;cheap, easy and fast&quot;, being actually expensive (at scale), difficult (to adjust to specific needs, holding back the business) and slow (because of all work-arounds) :-D<p>Companies literally burn a ton of money in long run because their CTO can&#x27;t get them proper evaluation of what is really needed for their expected scale. And even large business with billion of dollars revenue may not need really an infrastructure of google scale.</div><br/></div></div></div></div><div id="38731044" class="c"><input type="checkbox" id="c-38731044" checked=""/><div class="controls bullet"><span class="by">krooj</span><span>|</span><a href="#38730768">parent</a><span>|</span><a href="#38731484">prev</a><span>|</span><a href="#38731991">next</a><span>|</span><label class="collapse" for="c-38731044">[-]</label><label class="expand" for="c-38731044">[2 more]</label></div><br/><div class="children"><div class="content">1000x this - each and every CAIM has their own &quot;interpretation&quot; of what the various constructs actually mean in the various RFCs and it leads to a lot of hodge-podge integrations that organizations outgrow. Things like Okta and Auth0 might seem shiny and easy on the face of it, and they are for very small startups, but quickly devolve into dogshit as you scale.</div><br/><div id="38731110" class="c"><input type="checkbox" id="c-38731110" checked=""/><div class="controls bullet"><span class="by">mynameisnoone</span><span>|</span><a href="#38730768">root</a><span>|</span><a href="#38731044">parent</a><span>|</span><a href="#38731991">next</a><span>|</span><label class="collapse" for="c-38731110">[-]</label><label class="expand" for="c-38731110">[1 more]</label></div><br/><div class="children"><div class="content">Ah, someone else here has probably encountered CIAM pain too. ;@]<p>For internal use, FreeIPA is neat (389ds + dogtag). Some people use AD or Azure AD (which again, is outsourcing). Shibboleth provides a FOSS SSO solution. <a href="https:&#x2F;&#x2F;www.shibboleth.net&#x2F;products&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.shibboleth.net&#x2F;products&#x2F;</a><p>For k8s IdP, there are numerous FOSS, on-prem solutions like pinniped.</div><br/></div></div></div></div><div id="38731991" class="c"><input type="checkbox" id="c-38731991" checked=""/><div class="controls bullet"><span class="by">WendyTheWillow</span><span>|</span><a href="#38730768">parent</a><span>|</span><a href="#38731044">prev</a><span>|</span><a href="#38731868">next</a><span>|</span><label class="collapse" for="c-38731991">[-]</label><label class="expand" for="c-38731991">[2 more]</label></div><br/><div class="children"><div class="content">I couldn&#x27;t disagree more strongly; you <i>will</i> screw this up if you roll your own. The <i>only</i> secure option is to push as much as possible outside of your infrastructure.  The concerns that it won&#x27;t be &quot;auditable&quot; or that you &quot;give away the keys to your kingdom&quot; are nonsense and implementation-specific.  If it&#x27;s important, then don&#x27;t build your integration with those flaws.  You will still have substantial control, so you can decide how &quot;auditable&quot; the auth actually is and what to do with users authed from one platform or another.<p>If you can avoid managing authn, you will be substantially better off.  I don&#x27;t think you can so easily do this for authz; however, it depends on what you&#x27;re building.</div><br/><div id="38732285" class="c"><input type="checkbox" id="c-38732285" checked=""/><div class="controls bullet"><span class="by">remus</span><span>|</span><a href="#38730768">root</a><span>|</span><a href="#38731991">parent</a><span>|</span><a href="#38731868">next</a><span>|</span><label class="collapse" for="c-38732285">[-]</label><label class="expand" for="c-38732285">[1 more]</label></div><br/><div class="children"><div class="content">&gt; you will screw this up if you roll your own. The only secure option is to push as much as possible outside of your infrastructure.<p>In my experience the integration with outside infra (OAuth, OIDC etc.) carries significant complications in itself, and Im not convinced that you really gain that much in terms of reducing complexity or attack surface by using these technologies. See this article that was on the front page yesterday for an example of non-obvious things that can go wrong <a href="https:&#x2F;&#x2F;trufflesecurity.com&#x2F;blog&#x2F;google-oauth-is-broken-sort-of&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;trufflesecurity.com&#x2F;blog&#x2F;google-oauth-is-broken-sort...</a></div><br/></div></div></div></div><div id="38731868" class="c"><input type="checkbox" id="c-38731868" checked=""/><div class="controls bullet"><span class="by">sebmellen</span><span>|</span><a href="#38730768">parent</a><span>|</span><a href="#38731991">prev</a><span>|</span><a href="#38730984">next</a><span>|</span><label class="collapse" for="c-38731868">[-]</label><label class="expand" for="c-38731868">[2 more]</label></div><br/><div class="children"><div class="content">I cannot recommend <a href="https:&#x2F;&#x2F;ory.sh" rel="nofollow noreferrer">https:&#x2F;&#x2F;ory.sh</a> enough. Completely open-source and self-hostable auth. Great team too.</div><br/><div id="38732286" class="c"><input type="checkbox" id="c-38732286" checked=""/><div class="controls bullet"><span class="by">vintermann</span><span>|</span><a href="#38730768">root</a><span>|</span><a href="#38731868">parent</a><span>|</span><a href="#38730984">next</a><span>|</span><label class="collapse" for="c-38732286">[-]</label><label class="expand" for="c-38732286">[1 more]</label></div><br/><div class="children"><div class="content">I wonder why this got downvoted. I looked over the alternatives a while back, and I thought Ory looked the best too, with Keycloak as a good number 2.<p>I agree with the OP that it&#x27;s good to not be dependent on SaaS for something as central as user management.<p>I do agree with the others that it&#x27;s best to write as little as possible of security critical code yourself. However, integrating with a third party OAuth thing can be hard (and leave plenty of room for security fuckups) especially if you have anything implemented at all already user-wise.</div><br/></div></div></div></div><div id="38730984" class="c"><input type="checkbox" id="c-38730984" checked=""/><div class="controls bullet"><span class="by">anon84873628</span><span>|</span><a href="#38730768">parent</a><span>|</span><a href="#38731868">prev</a><span>|</span><a href="#38731295">next</a><span>|</span><label class="collapse" for="c-38730984">[-]</label><label class="expand" for="c-38730984">[4 more]</label></div><br/><div class="children"><div class="content">Building an entire directory app is hard though. And you want it to be highly resilient, right?<p>What do you recommend?</div><br/><div id="38731366" class="c"><input type="checkbox" id="c-38731366" checked=""/><div class="controls bullet"><span class="by">smitty1110</span><span>|</span><a href="#38730768">root</a><span>|</span><a href="#38730984">parent</a><span>|</span><a href="#38731120">next</a><span>|</span><label class="collapse" for="c-38731366">[-]</label><label class="expand" for="c-38731366">[2 more]</label></div><br/><div class="children"><div class="content">Keycloak [1]. Rock solid, supports everything, trusted everywhere.<p>1: <a href="https:&#x2F;&#x2F;www.keycloak.org&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.keycloak.org&#x2F;</a></div><br/><div id="38732245" class="c"><input type="checkbox" id="c-38732245" checked=""/><div class="controls bullet"><span class="by">ExoticPearTree</span><span>|</span><a href="#38730768">root</a><span>|</span><a href="#38731366">parent</a><span>|</span><a href="#38731120">next</a><span>|</span><label class="collapse" for="c-38732245">[-]</label><label class="expand" for="c-38732245">[1 more]</label></div><br/><div class="children"><div class="content">I have to disagree with your assessment. It&#x27;s not that rock solid, &quot;supports everything&quot; is a very vague term and &quot;trusted everywhere&quot; I&#x27;m not even sure that that is supposed to mean.</div><br/></div></div></div></div><div id="38731120" class="c"><input type="checkbox" id="c-38731120" checked=""/><div class="controls bullet"><span class="by">mynameisnoone</span><span>|</span><a href="#38730768">root</a><span>|</span><a href="#38730984">parent</a><span>|</span><a href="#38731366">prev</a><span>|</span><a href="#38731295">next</a><span>|</span><label class="collapse" for="c-38731120">[-]</label><label class="expand" for="c-38731120">[1 more]</label></div><br/><div class="children"><div class="content">FreeIPA is pretty good for internal users when money is tight. It&#x27;s a FOSS almost AD but for *NIX and it does HA. For the SSO part, Shibboleth2 or CAS.</div><br/></div></div></div></div><div id="38731295" class="c"><input type="checkbox" id="c-38731295" checked=""/><div class="controls bullet"><span class="by">tomjen3</span><span>|</span><a href="#38730768">parent</a><span>|</span><a href="#38730984">prev</a><span>|</span><a href="#38732236">next</a><span>|</span><label class="collapse" for="c-38731295">[-]</label><label class="expand" for="c-38731295">[1 more]</label></div><br/><div class="children"><div class="content">Lots of companies require sso for saas.</div><br/></div></div><div id="38732236" class="c"><input type="checkbox" id="c-38732236" checked=""/><div class="controls bullet"><span class="by">ExoticPearTree</span><span>|</span><a href="#38730768">parent</a><span>|</span><a href="#38731295">prev</a><span>|</span><a href="#38732303">next</a><span>|</span><label class="collapse" for="c-38732236">[-]</label><label class="expand" for="c-38732236">[1 more]</label></div><br/><div class="children"><div class="content">This advice is wrong on some many levels. Building your own OIDC&#x2F;OAuth&#x2F;SAML infrastructure is incredibly expensive, error prone and dangerous; and not mention you need people to code it, run it securely, audit it, test it.<p>Even running something like a self-hosted Keycloak instance&#x2F;cluster is not easy either and comes with its own set of problems.</div><br/></div></div></div></div><div id="38732303" class="c"><input type="checkbox" id="c-38732303" checked=""/><div class="controls bullet"><span class="by">fabian2k</span><span>|</span><a href="#38730768">prev</a><span>|</span><a href="#38730908">next</a><span>|</span><label class="collapse" for="c-38732303">[-]</label><label class="expand" for="c-38732303">[1 more]</label></div><br/><div class="children"><div class="content">Question for everyone saying that you should always outsource authentication, how do you handle the on-premise case? Or does this only apply to pure SaaS software?</div><br/></div></div><div id="38730908" class="c"><input type="checkbox" id="c-38730908" checked=""/><div class="controls bullet"><span class="by">apitman</span><span>|</span><a href="#38732303">prev</a><span>|</span><a href="#38731116">next</a><span>|</span><label class="collapse" for="c-38730908">[-]</label><label class="expand" for="c-38730908">[3 more]</label></div><br/><div class="children"><div class="content">OIDC seemed complicated to me for a while. What helped the most was: 1) focusing on understanding why all the song and dance is necessary from a security perspective. Start with [0]. 2) Realizing you can ignore pretty much everything except the OAuth2 spec and the core OIDC spec until you need it.<p>[0]: <a href="https:&#x2F;&#x2F;datatracker.ietf.org&#x2F;doc&#x2F;html&#x2F;draft-ietf-oauth-security-topics" rel="nofollow noreferrer">https:&#x2F;&#x2F;datatracker.ietf.org&#x2F;doc&#x2F;html&#x2F;draft-ietf-oauth-secur...</a></div><br/><div id="38731070" class="c"><input type="checkbox" id="c-38731070" checked=""/><div class="controls bullet"><span class="by">krooj</span><span>|</span><a href="#38730908">parent</a><span>|</span><a href="#38731116">next</a><span>|</span><label class="collapse" for="c-38731070">[-]</label><label class="expand" for="c-38731070">[2 more]</label></div><br/><div class="children"><div class="content">Yup - OIDC can be boiled down to:<p>1. The OG OAuth2 spec never said anything about identifying principals
2. OIDC mandated an id_token to avoid the hit of POSTing the access token to an introspection endpoint
3. The shape of the id_token is a JWT<p>This doc is junk, btw - it&#x27;s suggesting the client use the id_token for the purposes of authentication? I wouldn&#x27;t trust that token beyond some basics, unless you have very strong controls over the authorization server and IdP to ensure things like email verification are propagated correctly.</div><br/><div id="38731938" class="c"><input type="checkbox" id="c-38731938" checked=""/><div class="controls bullet"><span class="by">dwaite</span><span>|</span><a href="#38730908">root</a><span>|</span><a href="#38731070">parent</a><span>|</span><a href="#38731116">next</a><span>|</span><label class="collapse" for="c-38731938">[-]</label><label class="expand" for="c-38731938">[1 more]</label></div><br/><div class="children"><div class="content">&gt; OIDC mandated an id_token to avoid the hit of POSTing the access token to an introspection endpoint<p>A bit more fundamental than that, the two tokens are meant for different purposes and different audiences.<p>The access token is meant for delegated authorization of a user against  resources. A client isn&#x27;t even meant to be able to interpret it (but often can, because they are often signed JWTs). In particular, clients aren&#x27;t supposed to use the introspection endpoint.<p>The id_token is meant for the client itself, about the user. This isn&#x27;t meant to be shared with anyone other than the client, and must be audienced (only usable by the client).<p>Moreso, access tokens may be indefinitely long-lived access to resources, such as offline reading of a calendar for group scheduling free&#x2F;busy information. An id_token is a signal at a particular point in time of state, e.g. this browser request represents this user because they bear the id_token.</div><br/></div></div></div></div></div></div><div id="38731116" class="c"><input type="checkbox" id="c-38731116" checked=""/><div class="controls bullet"><span class="by">recursive</span><span>|</span><a href="#38730908">prev</a><span>|</span><label class="collapse" for="c-38731116">[-]</label><label class="expand" for="c-38731116">[3 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t understand the diagram.  We have a browser sending a request to the identity provider.  Then sometime later, the relying party is responding.  How does the response come from a different server than the request went to?<p>Maybe it would help if each response was correlated to its corresponding request somehow.</div><br/><div id="38732092" class="c"><input type="checkbox" id="c-38732092" checked=""/><div class="controls bullet"><span class="by">magicalhippo</span><span>|</span><a href="#38731116">parent</a><span>|</span><a href="#38731521">next</a><span>|</span><label class="collapse" for="c-38732092">[-]</label><label class="expand" for="c-38732092">[1 more]</label></div><br/><div class="children"><div class="content">The app server requesting access has to be configured with the identity provider. Part of that is a redirect URL, which the identity provider redirects the client to once the authentication is ok. The URL is to an endpoint of the app server.<p>When the id provider redirects, it includes the authorization code as an URL parameter or similar, so the app server can pick it up and call the id provider to exchange the authorization code for an access token.<p>At least that&#x27;s how I remeber it off the top of my head.</div><br/></div></div><div id="38731521" class="c"><input type="checkbox" id="c-38731521" checked=""/><div class="controls bullet"><span class="by">Arcanum-XIII</span><span>|</span><a href="#38731116">parent</a><span>|</span><a href="#38732092">prev</a><span>|</span><label class="collapse" for="c-38731521">[-]</label><label class="expand" for="c-38731521">[1 more]</label></div><br/><div class="children"><div class="content">Itâs missing a step or two. Once youâve selected your identifying provider, the user is redirected to it, identify itself and select there the claims heâs willing to share (most of the time only whatâs needed for authorization). The identifying provider generate the proper token and claims, return them with the user to the third party site. Who can then authorize or not the identified user and return the user.<p>This exchange of data and redirection is the core of the oauth.</div><br/></div></div></div></div></div></div></div></div></div></body></html>