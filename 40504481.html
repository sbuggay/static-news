<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1716973278411" as="style"/><link rel="stylesheet" href="styles.css?v=1716973278411"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/brian-smith-github/ch32v003_stt">Simple Speech-to-Text on the &#x27;10 Cents&#x27; CH32V003 Microcontroller</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>victor82</span> | <span>18 comments</span></div><br/><div><div id="40506836" class="c"><input type="checkbox" id="c-40506836" checked=""/><div class="controls bullet"><span class="by">sen</span><span>|</span><a href="#40509378">next</a><span>|</span><label class="collapse" for="c-40506836">[-]</label><label class="expand" for="c-40506836">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s really cool how people are taking these tiny cheap MCUs and making them do fun things for hobbyists. There&#x27;s nothing better than a project with zero real-world use-case but that&#x27;s done just because it was a challenge.<p>Eg:<p>Making the CH32V003 programmable via USB: <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=j-QazXghkLY" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=j-QazXghkLY</a><p>CH32V003 &quot;Super-Cluster&quot;: <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=lh93FayWHqw" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=lh93FayWHqw</a><p>Powering a Nixie Tube from USB with a CH32V003: <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=-4d3PgEXhdY" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=-4d3PgEXhdY</a><p>(A good rule in life in general is to just always watch CNLohr and Bitluni if you&#x27;re into &quot;useless but amazing hardware projects&quot;)</div><br/></div></div><div id="40509378" class="c"><input type="checkbox" id="c-40509378" checked=""/><div class="controls bullet"><span class="by">jononor</span><span>|</span><a href="#40506836">prev</a><span>|</span><a href="#40509350">next</a><span>|</span><label class="collapse" for="c-40509378">[-]</label><label class="expand" for="c-40509378">[1 more]</label></div><br/><div class="children"><div class="content">Minor nitpick&#x2F;clarification. As it stands this is doing detection of a fixed, small vocabulary of words - not open ended text to speech covering entire language. Also called speech command recognition &#x2F; keyword spotting. Which is already impressive and useful. General STT on this grade hardware would be an amazing feat!</div><br/></div></div><div id="40509350" class="c"><input type="checkbox" id="c-40509350" checked=""/><div class="controls bullet"><span class="by">jononor</span><span>|</span><a href="#40509378">prev</a><span>|</span><a href="#40505947">next</a><span>|</span><label class="collapse" for="c-40509350">[-]</label><label class="expand" for="c-40509350">[1 more]</label></div><br/><div class="children"><div class="content">Really nice project! Great care is taken in optimized audio feature extraction, very cool to see. I am working on a very similar project[1], using the Puya PY32. I opted for that chip over CH32 since it has DMA (simplifies efficient ADC input at audio rates), and 1 kB more RAM. For a couple of cents more.
I have written about some of the hardware constraints on low cost audio already, and am getting to the audio DSP&#x2F;ML in the next months.<p>1. <a href="https:&#x2F;&#x2F;hackaday.io&#x2F;project&#x2F;194511-1-dollar-tinyml" rel="nofollow">https:&#x2F;&#x2F;hackaday.io&#x2F;project&#x2F;194511-1-dollar-tinyml</a></div><br/></div></div><div id="40505947" class="c"><input type="checkbox" id="c-40505947" checked=""/><div class="controls bullet"><span class="by">kragen</span><span>|</span><a href="#40509350">prev</a><span>|</span><a href="#40507882">next</a><span>|</span><label class="collapse" for="c-40505947">[-]</label><label class="expand" for="c-40505947">[4 more]</label></div><br/><div class="children"><div class="content">this is exciting!  it&#x27;s still at prototype stage: &#x27;getting about 90% accuracy [distinguishing between the spoken digits &#x27;zero&#x27; to &#x27;nine&#x27;,] with the code as it stands.&#x27;<p>i wonder if modern continuous optimization algorithms could yield a neural network that would do better than this mfcc approach at, perhaps, even lower computational cost<p>they seem to have gotten more expensive lately, though (11.83¢ in quantity 500), and lcsc is out of stock on the ch32v003.  they only have in stock ch32v203 and up, which costs 37.5¢. <a href="https:&#x2F;&#x2F;www.lcsc.com&#x2F;products&#x2F;Microcontroller-Units-MCUs-MPUs-SOCs_11329.html?keyword=ch32v" rel="nofollow">https:&#x2F;&#x2F;www.lcsc.com&#x2F;products&#x2F;Microcontroller-Units-MCUs-MPU...</a><p>digi-key, as usual, doesn&#x27;t list the part at all</div><br/><div id="40506813" class="c"><input type="checkbox" id="c-40506813" checked=""/><div class="controls bullet"><span class="by">woodson</span><span>|</span><a href="#40505947">parent</a><span>|</span><a href="#40507882">next</a><span>|</span><label class="collapse" for="c-40506813">[-]</label><label class="expand" for="c-40506813">[3 more]</label></div><br/><div class="children"><div class="content">Replacing the codebook approach with a statistical&#x2F;DNN is more likely to give higher accuracy than getting rid of mfccs as spectral representation (at least in general ASR). (Arguably, using Mel spectra was the least controversial design choice made for Whisper.)</div><br/><div id="40508599" class="c"><input type="checkbox" id="c-40508599" checked=""/><div class="controls bullet"><span class="by">kragen</span><span>|</span><a href="#40505947">root</a><span>|</span><a href="#40506813">parent</a><span>|</span><a href="#40507882">next</a><span>|</span><label class="collapse" for="c-40508599">[-]</label><label class="expand" for="c-40508599">[2 more]</label></div><br/><div class="children"><div class="content">thank you!  those are good points.  i was thinking that maybe you could get by with some relatively sparse convolutional layers over the raw sound samples and save yourself the expense of doing a real fourier transform, but maybe that&#x27;s a dumb idea</div><br/><div id="40509279" class="c"><input type="checkbox" id="c-40509279" checked=""/><div class="controls bullet"><span class="by">jononor</span><span>|</span><a href="#40505947">root</a><span>|</span><a href="#40508599">parent</a><span>|</span><a href="#40507882">next</a><span>|</span><label class="collapse" for="c-40509279">[-]</label><label class="expand" for="c-40509279">[1 more]</label></div><br/><div class="children"><div class="content">It is a good idea that is worth trying out! Like anything there are tradeoffs though, so it is not guaranteed to be better for this particular circumstance. The ability to use low bitdepth integer operations (which easy for a neural net) should be beneficial for a CPU without a floating point unit. But weights need to be stored - and it can be difficult to match FFT efficiency - depending on what resolution is actually needed&#x2F;utilized.</div><br/></div></div></div></div></div></div></div></div><div id="40507882" class="c"><input type="checkbox" id="c-40507882" checked=""/><div class="controls bullet"><span class="by">watersb</span><span>|</span><a href="#40505947">prev</a><span>|</span><a href="#40506531">next</a><span>|</span><label class="collapse" for="c-40507882">[-]</label><label class="expand" for="c-40507882">[4 more]</label></div><br/><div class="children"><div class="content">About 10 years ago, I used a basic flip phone, vendor locked to a $15&#x2F;month Verizon plan.<p>The Wal Mart page for a similar device is still up at<p><a href="https:&#x2F;&#x2F;www.walmart.com&#x2F;ip&#x2F;Verizon-Wireless-Samsung-Gusto-3-128MB-Prepaid-Smartphone-Black&#x2F;36771424" rel="nofollow">https:&#x2F;&#x2F;www.walmart.com&#x2F;ip&#x2F;Verizon-Wireless-Samsung-Gusto-3-...</a><p>Among other things, it had limited speech recognition -- you could say &quot;Call&quot; followed by a name, and it would match that against the address book on device.<p>We live in strange times.</div><br/><div id="40508913" class="c"><input type="checkbox" id="c-40508913" checked=""/><div class="controls bullet"><span class="by">kragen</span><span>|</span><a href="#40507882">parent</a><span>|</span><a href="#40508236">next</a><span>|</span><label class="collapse" for="c-40508913">[-]</label><label class="expand" for="c-40508913">[1 more]</label></div><br/><div class="children"><div class="content">i had a sprint samsung sch-6100 flip phone with a similar voice recognition feature at the end of last millennium, but it would only match the name you told it to call against names you&#x27;d previously made training voice recordings of.  that is, it wasn&#x27;t trying to do speech-to-text or text-to-speech; it was just trying to discriminate among the particular recordings you had made previously<p>i didn&#x27;t use the feature very much because to activate it, iirc, you had to either flip the phone open or press a button on a hands-free headset.  but obviously this wasn&#x27;t a bluetooth headset, and the phone couldn&#x27;t play music, so you wouldn&#x27;t walk around with it in your ears all the time; unless you&#x27;d just gotten off a different call, you&#x27;d have to get it out, put it in your ears, plug it in, and <i>then</i> you could use the speech recognition feature<p>so unless you were a secretary or something, making one phone call after another for hours (to a small number of people), you might as well just use speed dial</div><br/></div></div><div id="40508236" class="c"><input type="checkbox" id="c-40508236" checked=""/><div class="controls bullet"><span class="by">selcuka</span><span>|</span><a href="#40507882">parent</a><span>|</span><a href="#40508913">prev</a><span>|</span><a href="#40506531">next</a><span>|</span><label class="collapse" for="c-40508236">[-]</label><label class="expand" for="c-40508236">[2 more]</label></div><br/><div class="children"><div class="content">Yeah, even 24 year-old Nokia 3310 had some form of voice dialling [1].<p>OS&#x2F;2 Warp 4.0 (1996) came with speech recognition and dictation software [2]. The CPUs it supported back then weren&#x27;t much better than a 10-year old phone.<p>[1] <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Nokia_3310" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Nokia_3310</a><p>[2] <a href="https:&#x2F;&#x2F;www.os2world.com&#x2F;wiki&#x2F;index.php?title=OS&#x2F;2_Warp_4:_%22Best_on_the_Planet%22#VoiceType_Navigation_and_Dictation" rel="nofollow">https:&#x2F;&#x2F;www.os2world.com&#x2F;wiki&#x2F;index.php?title=OS&#x2F;2_Warp_4:_%...</a></div><br/><div id="40509005" class="c"><input type="checkbox" id="c-40509005" checked=""/><div class="controls bullet"><span class="by">kalleboo</span><span>|</span><a href="#40507882">root</a><span>|</span><a href="#40508236">parent</a><span>|</span><a href="#40506531">next</a><span>|</span><label class="collapse" for="c-40509005">[-]</label><label class="expand" for="c-40509005">[1 more]</label></div><br/><div class="children"><div class="content">In addition, way back in 1993, Apple released speech recognition with the original AV Macs (which were outfitted with 55 MHz AT&amp;T 3210 DSPs in addition to their 25+ MHz Motorola 68040s) which was then also supported on the PowerPC Macs released the following year (that started at 60 MHz)</div><br/></div></div></div></div></div></div><div id="40506531" class="c"><input type="checkbox" id="c-40506531" checked=""/><div class="controls bullet"><span class="by">hales</span><span>|</span><a href="#40507882">prev</a><span>|</span><a href="#40509524">next</a><span>|</span><label class="collapse" for="c-40506531">[-]</label><label class="expand" for="c-40506531">[4 more]</label></div><br/><div class="children"><div class="content">Is there a recorded demo?  Reading about speech-to-text is different from hearing it.</div><br/><div id="40506919" class="c"><input type="checkbox" id="c-40506919" checked=""/><div class="controls bullet"><span class="by">smcameron</span><span>|</span><a href="#40506531">parent</a><span>|</span><a href="#40509524">next</a><span>|</span><label class="collapse" for="c-40506919">[-]</label><label class="expand" for="c-40506919">[3 more]</label></div><br/><div class="children"><div class="content">Speech to text, not text to speech.  There&#x27;s nothing to hear but your own voice.</div><br/><div id="40507940" class="c"><input type="checkbox" id="c-40507940" checked=""/><div class="controls bullet"><span class="by">anonzzzies</span><span>|</span><a href="#40506531">root</a><span>|</span><a href="#40506919">parent</a><span>|</span><a href="#40507989">next</a><span>|</span><label class="collapse" for="c-40507940">[-]</label><label class="expand" for="c-40507940">[1 more]</label></div><br/><div class="children"><div class="content">Well, considering everything outside&#x2F;before whisper would be less than a 40% accurate on my voice (don’t know the reason and now whisper is close to 100% even with tech stuff&#x2F;abbreviations). Things like Siri, Google, Alexa, Dragon etc all never understand (I stopped trying, so it might have improved, but I did try not long ago) anything I say. When I ask for the weather, something like Siri looks on Google what the border is etc. I am not native english, however I am fluent (work in English fulltime) and humans never have any issues; also, in my own language, none of them work either, except whisper, even locally running (which, like said, might’ve improved recently).<p>So it would be interesting to hear how articulated you would need to speak and have different people with accents and such.</div><br/></div></div><div id="40507989" class="c"><input type="checkbox" id="c-40507989" checked=""/><div class="controls bullet"><span class="by">elevaet</span><span>|</span><a href="#40506531">root</a><span>|</span><a href="#40506919">parent</a><span>|</span><a href="#40507940">prev</a><span>|</span><a href="#40509524">next</a><span>|</span><label class="collapse" for="c-40507989">[-]</label><label class="expand" for="c-40507989">[1 more]</label></div><br/><div class="children"><div class="content">Could still have a demo showing how example recordings got transcribed</div><br/></div></div></div></div></div></div><div id="40509524" class="c"><input type="checkbox" id="c-40509524" checked=""/><div class="controls bullet"><span class="by">pcdoodle</span><span>|</span><a href="#40506531">prev</a><span>|</span><label class="collapse" for="c-40509524">[-]</label><label class="expand" for="c-40509524">[1 more]</label></div><br/><div class="children"><div class="content">90% accuracy on 10 digits is pretty disappointing but cool project.</div><br/></div></div></div></div></div></div></div></body></html>