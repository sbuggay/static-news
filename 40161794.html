<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1714122122619" as="style"/><link rel="stylesheet" href="styles.css?v=1714122122619"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://increase.com/articles/no-abstractions">No Abstractions: our API design principle</a> <span class="domain">(<a href="https://increase.com">increase.com</a>)</span></div><div class="subtext"><span>jackflintermann</span> | <span>105 comments</span></div><br/><div><div id="40163828" class="c"><input type="checkbox" id="c-40163828" checked=""/><div class="controls bullet"><span class="by">Karellen</span><span>|</span><a href="#40162406">next</a><span>|</span><label class="collapse" for="c-40163828">[-]</label><label class="expand" for="c-40163828">[29 more]</label></div><br/><div class="children"><div class="content">&gt; If you’re building an abstraction-heavy API, be prepared to think hard before adding new features. If you’re building an abstraction-light API, commit to it and resist the temptation to add abstractions when it comes along.<p>You could always do both.<p>Provide a low-level abstraction-light API that allows fine control but requires deep expertise, and write a higher-level abstraction-rich API on top of it that maps to fewer simple operations for the most common use cases - which some of your clients might be implementing their own half-baked versions of anyway.<p>If you maintain a clean separation between the two, having both in place might mean there is less pressure to add abstractions to the low-level API, or to add warts and special-cases to the high-level API. If a client wants one of those things, it already exists - in the other API.<p>Bonus points for providing materials to help your clients learn how to move from one to the other. You can attract clients who do not yet have deep knowledge of payment network internals, but are looking to improve in that direction.</div><br/><div id="40164446" class="c"><input type="checkbox" id="c-40164446" checked=""/><div class="controls bullet"><span class="by">jampekka</span><span>|</span><a href="#40163828">parent</a><span>|</span><a href="#40164713">next</a><span>|</span><label class="collapse" for="c-40164446">[-]</label><label class="expand" for="c-40164446">[6 more]</label></div><br/><div class="children"><div class="content">This. There should be a low level API to be able to do rarer more complicated cases, and a higher level simple API for common cases built on the lower-level API.<p>Just today I was working with the Web File System API, and e.g. just writing a string to a file requires seven function calls, most async. And this doesn&#x27;t even handle errors. And has to be done in a worker, setting up of which is similar faff in itself. Similar horrors can be seen in e.g. IndexedDB, WebRTC and even plain old vanilla DOM manipulation. And things like Vulkan and DirectX and ffmpeg are even way worse.<p>The complexity can be largely justified to be able to handle all sorts of exotic cases, but vast majority of cases aren&#x27;t these exotic ones.<p>API design should start first by sketching out how using the API looks for common cases, and those should be as simple as possible. E.g. the fetch API does this quite well. XMLHttpRequest definitely did not.<p><a href="https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;FileSystemSyncAccessHandle" rel="nofollow">https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;FileSystemS...</a><p>Edit: I&#x27;ve thought many a time that there should be some unified &quot;porcelain&quot; API for all the Web APIs. It would wrap all the (awesome) features in one coherent &quot;standard library&quot; wrapper, supporting at least the most common use cases. Modern browsers are very powerful and capable but a lot of this power and capability is largely unknown or underused because each API tends to have quite an idiosyncratic design and they are needlessly hard to learn and&#x2F;or use.<p>Something like what jQuery did for DOM (but with less magic and no extra bells and whistles). E.g. node.js has somewhat coherent, but a bit outdated APIs (e.g. Promise support is spotty and inconsistent). Something like how Python strives for &quot;pythonic&quot; APIs (with varying success).</div><br/><div id="40166226" class="c"><input type="checkbox" id="c-40166226" checked=""/><div class="controls bullet"><span class="by">cpeterso</span><span>|</span><a href="#40163828">root</a><span>|</span><a href="#40164446">parent</a><span>|</span><a href="#40165074">next</a><span>|</span><label class="collapse" for="c-40166226">[-]</label><label class="expand" for="c-40166226">[1 more]</label></div><br/><div class="children"><div class="content">My favorite quote about abstraction is from Edsger Dijkstra:<p><i>”The purpose of abstraction is not to be vague, but to create a new semantic level in which one can be absolutely precise.”</i><p>If only the “A” in API stood for “abstraction”. For many APIs, it probably stands for “accreted”. :)</div><br/></div></div><div id="40165074" class="c"><input type="checkbox" id="c-40165074" checked=""/><div class="controls bullet"><span class="by">dumbo-octopus</span><span>|</span><a href="#40163828">root</a><span>|</span><a href="#40164446">parent</a><span>|</span><a href="#40166226">prev</a><span>|</span><a href="#40164556">next</a><span>|</span><label class="collapse" for="c-40165074">[-]</label><label class="expand" for="c-40165074">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s 4 async calls, and it can be done entirely in the main thread so long as you use the async API. <a href="https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;FileSystemWritableFileStream" rel="nofollow">https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;FileSystemW...</a></div><br/><div id="40166980" class="c"><input type="checkbox" id="c-40166980" checked=""/><div class="controls bullet"><span class="by">jampekka</span><span>|</span><a href="#40163828">root</a><span>|</span><a href="#40165074">parent</a><span>|</span><a href="#40164556">next</a><span>|</span><label class="collapse" for="c-40166980">[-]</label><label class="expand" for="c-40166980">[1 more]</label></div><br/><div class="children"><div class="content">For OPFS it&#x27;s still 6 calls. And the async API doesn&#x27;t support flushing writes.<p><a href="https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;File_System_API&#x2F;Origin_private_file_system" rel="nofollow">https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;File_System...</a></div><br/></div></div></div></div><div id="40164556" class="c"><input type="checkbox" id="c-40164556" checked=""/><div class="controls bullet"><span class="by">metalspoon</span><span>|</span><a href="#40163828">root</a><span>|</span><a href="#40164446">parent</a><span>|</span><a href="#40165074">prev</a><span>|</span><a href="#40164713">next</a><span>|</span><label class="collapse" for="c-40164556">[-]</label><label class="expand" for="c-40164556">[2 more]</label></div><br/><div class="children"><div class="content">Tbf Vulkan is not intended for an endprogrammer. It is a deliberately low level standardization to allow directly control GPU hardware. The high-level approach (OpenGL) failed. The endprogrammer is supposed to use a third party middleware, not Vulkan itself.</div><br/><div id="40166525" class="c"><input type="checkbox" id="c-40166525" checked=""/><div class="controls bullet"><span class="by">withinboredom</span><span>|</span><a href="#40163828">root</a><span>|</span><a href="#40164556">parent</a><span>|</span><a href="#40164713">next</a><span>|</span><label class="collapse" for="c-40166525">[-]</label><label class="expand" for="c-40166525">[1 more]</label></div><br/><div class="children"><div class="content">Someone has to write that middleware…</div><br/></div></div></div></div></div></div><div id="40164713" class="c"><input type="checkbox" id="c-40164713" checked=""/><div class="controls bullet"><span class="by">Groxx</span><span>|</span><a href="#40163828">parent</a><span>|</span><a href="#40164446">prev</a><span>|</span><a href="#40164514">next</a><span>|</span><label class="collapse" for="c-40164713">[-]</label><label class="expand" for="c-40164713">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m particularly fond of this pattern when you can implement the high level API that you want <i>outside the library</i>, which ensures that your low level API is sufficiently flexible <i>and</i> means you&#x27;re dogfooding your own stuff as a user.  It&#x27;s far too easy to get used to the internal side of a tool you&#x27;re building, and forget how people actually use it.</div><br/></div></div><div id="40164514" class="c"><input type="checkbox" id="c-40164514" checked=""/><div class="controls bullet"><span class="by">InvisibleUp</span><span>|</span><a href="#40163828">parent</a><span>|</span><a href="#40164713">prev</a><span>|</span><a href="#40164141">next</a><span>|</span><label class="collapse" for="c-40164514">[-]</label><label class="expand" for="c-40164514">[1 more]</label></div><br/><div class="children"><div class="content">.NET also does this a lot. Here&#x27;s a recent devblog post looking at file I&#x2F;O: <a href="https:&#x2F;&#x2F;devblogs.microsoft.com&#x2F;dotnet&#x2F;the-convenience-of-system-io&#x2F;" rel="nofollow">https:&#x2F;&#x2F;devblogs.microsoft.com&#x2F;dotnet&#x2F;the-convenience-of-sys...</a></div><br/></div></div><div id="40164141" class="c"><input type="checkbox" id="c-40164141" checked=""/><div class="controls bullet"><span class="by">yen223</span><span>|</span><a href="#40163828">parent</a><span>|</span><a href="#40164514">prev</a><span>|</span><a href="#40166153">next</a><span>|</span><label class="collapse" for="c-40164141">[-]</label><label class="expand" for="c-40164141">[11 more]</label></div><br/><div class="children"><div class="content">It does double your API surface area, so that&#x27;s the tradeoff you&#x27;ll have to consider. It can be the correct decision in a lot of cases.</div><br/><div id="40164302" class="c"><input type="checkbox" id="c-40164302" checked=""/><div class="controls bullet"><span class="by">campbel</span><span>|</span><a href="#40163828">root</a><span>|</span><a href="#40164141">parent</a><span>|</span><a href="#40164264">next</a><span>|</span><label class="collapse" for="c-40164302">[-]</label><label class="expand" for="c-40164302">[3 more]</label></div><br/><div class="children"><div class="content">Unlikely to double. The low level API exposes all capabilities, the high level API exposes a subset of those capabilities under a smaller surface. The high level API will not be as large as the low level.</div><br/><div id="40166487" class="c"><input type="checkbox" id="c-40166487" checked=""/><div class="controls bullet"><span class="by">blowski</span><span>|</span><a href="#40163828">root</a><span>|</span><a href="#40164302">parent</a><span>|</span><a href="#40164949">next</a><span>|</span><label class="collapse" for="c-40166487">[-]</label><label class="expand" for="c-40166487">[1 more]</label></div><br/><div class="children"><div class="content">This reminds me of the Kubernetes API.</div><br/></div></div></div></div><div id="40164264" class="c"><input type="checkbox" id="c-40164264" checked=""/><div class="controls bullet"><span class="by">Pxtl</span><span>|</span><a href="#40163828">root</a><span>|</span><a href="#40164141">parent</a><span>|</span><a href="#40164302">prev</a><span>|</span><a href="#40166153">next</a><span>|</span><label class="collapse" for="c-40164264">[-]</label><label class="expand" for="c-40164264">[7 more]</label></div><br/><div class="children"><div class="content">It doesn&#x27;t double the security surface area if the abstracted API goes through the low-level API.  The outer one is just chrome, and so the risks of screwing something up there is far lower.<p>Unless you&#x27;re using a trash language where even simple wrappers could buffer underrun or something.</div><br/><div id="40164402" class="c"><input type="checkbox" id="c-40164402" checked=""/><div class="controls bullet"><span class="by">lmz</span><span>|</span><a href="#40163828">root</a><span>|</span><a href="#40164264">parent</a><span>|</span><a href="#40164939">prev</a><span>|</span><a href="#40166153">next</a><span>|</span><label class="collapse" for="c-40164402">[-]</label><label class="expand" for="c-40164402">[5 more]</label></div><br/><div class="children"><div class="content">Isn&#x27;t there the issue of modifying the state enough through the low-level API such that it breaks the assumptions of the high-level one?</div><br/><div id="40166554" class="c"><input type="checkbox" id="c-40166554" checked=""/><div class="controls bullet"><span class="by">withinboredom</span><span>|</span><a href="#40163828">root</a><span>|</span><a href="#40164402">parent</a><span>|</span><a href="#40166159">next</a><span>|</span><label class="collapse" for="c-40166554">[-]</label><label class="expand" for="c-40166554">[1 more]</label></div><br/><div class="children"><div class="content">The high level API shouldn’t care about state. In other words, your “readers” should merely aggregate state and your “writers” should only care about subsets of state.<p>Think about file permissions in Linux. Running ls just shows you gross file perms (current user, group, and global) but you can also grant access to other individual users, or even make a file immutable that still shows up as writable to ls. The high level api doesn’t know or care about the low level state except where it is relevant.</div><br/></div></div><div id="40166159" class="c"><input type="checkbox" id="c-40166159" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#40163828">root</a><span>|</span><a href="#40164402">parent</a><span>|</span><a href="#40166554">prev</a><span>|</span><a href="#40166153">next</a><span>|</span><label class="collapse" for="c-40166159">[-]</label><label class="expand" for="c-40166159">[3 more]</label></div><br/><div class="children"><div class="content">Just say that you don&#x27;t support mixing both APIs.</div><br/><div id="40166827" class="c"><input type="checkbox" id="c-40166827" checked=""/><div class="controls bullet"><span class="by">lazyasciiart</span><span>|</span><a href="#40163828">root</a><span>|</span><a href="#40166159">parent</a><span>|</span><a href="#40166301">next</a><span>|</span><label class="collapse" for="c-40166827">[-]</label><label class="expand" for="c-40166827">[1 more]</label></div><br/><div class="children"><div class="content">Now you’re telling users to check the source code of any tools they use with your stuff? “We recommend using ToolOne only on content you do not also manage with ToolTwo”</div><br/></div></div><div id="40166301" class="c"><input type="checkbox" id="c-40166301" checked=""/><div class="controls bullet"><span class="by">actionfromafar</span><span>|</span><a href="#40163828">root</a><span>|</span><a href="#40166159">parent</a><span>|</span><a href="#40166827">prev</a><span>|</span><a href="#40166153">next</a><span>|</span><label class="collapse" for="c-40166301">[-]</label><label class="expand" for="c-40166301">[1 more]</label></div><br/><div class="children"><div class="content">That’ll fix it.  ;-)</div><br/></div></div></div></div></div></div></div></div></div></div><div id="40166153" class="c"><input type="checkbox" id="c-40166153" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#40163828">parent</a><span>|</span><a href="#40164141">prev</a><span>|</span><a href="#40163925">next</a><span>|</span><label class="collapse" for="c-40166153">[-]</label><label class="expand" for="c-40166153">[1 more]</label></div><br/><div class="children"><div class="content">Compare also exokernels, and how they delegate abstraction to libraries, not the OS.</div><br/></div></div><div id="40163925" class="c"><input type="checkbox" id="c-40163925" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#40163828">parent</a><span>|</span><a href="#40166153">prev</a><span>|</span><a href="#40165635">next</a><span>|</span><label class="collapse" for="c-40163925">[-]</label><label class="expand" for="c-40163925">[2 more]</label></div><br/><div class="children"><div class="content">Git is an example of this. [1]<p>There are high-level &quot;porcelain&quot; commands like branch and checkout.<p>And then there are low-level &quot;plumbing&quot; commands like commit-tree and update-ref.<p>[1] <a href="https:&#x2F;&#x2F;git-scm.com&#x2F;book&#x2F;en&#x2F;v2&#x2F;Git-Internals-Plumbing-and-Porcelain" rel="nofollow">https:&#x2F;&#x2F;git-scm.com&#x2F;book&#x2F;en&#x2F;v2&#x2F;Git-Internals-Plumbing-and-Po...</a></div><br/><div id="40167035" class="c"><input type="checkbox" id="c-40167035" checked=""/><div class="controls bullet"><span class="by">mbork_pl</span><span>|</span><a href="#40163828">root</a><span>|</span><a href="#40163925">parent</a><span>|</span><a href="#40165635">next</a><span>|</span><label class="collapse" for="c-40167035">[-]</label><label class="expand" for="c-40167035">[1 more]</label></div><br/><div class="children"><div class="content">Came here to say that.<p>Also, to some extent, Emacs.  There are thousands of <i>functions</i> (actually, a bit less than 10k in stock Emacs without packages, and over 46k in <i>my</i> Emacs) performing various low-level tasks, and much fewer <i>commands</i> (~3k in stock Emacs, almost 12k in my config), i.e., interactive functions, often higher-level, designed for the user.</div><br/></div></div></div></div><div id="40165635" class="c"><input type="checkbox" id="c-40165635" checked=""/><div class="controls bullet"><span class="by">zellyn</span><span>|</span><a href="#40163828">parent</a><span>|</span><a href="#40163925">prev</a><span>|</span><a href="#40166705">next</a><span>|</span><label class="collapse" for="c-40165635">[-]</label><label class="expand" for="c-40165635">[2 more]</label></div><br/><div class="children"><div class="content">Problems can sneak in when you use the low-level API to do something to an object that can&#x27;t be cleanly represented in the higher-level API. You need some kind of escape hatch, like a list of links to or ids of low-level details or a blob (Map&lt;String,arbitrary-JSON&gt; of miscellaneous data that can hold the low-level additions.<p>Hopefully the top-level important concepts like &quot;amount_due&quot; will still reflect the correct numbers!</div><br/><div id="40166577" class="c"><input type="checkbox" id="c-40166577" checked=""/><div class="controls bullet"><span class="by">withinboredom</span><span>|</span><a href="#40163828">root</a><span>|</span><a href="#40165635">parent</a><span>|</span><a href="#40166705">next</a><span>|</span><label class="collapse" for="c-40166577">[-]</label><label class="expand" for="c-40166577">[1 more]</label></div><br/><div class="children"><div class="content">Those problems usually present themselves by people overthinking the high level api and trying to be smart.<p>As an example, you can use chattr to make a file in Linux immutable. ls still shows that you have permission to write to the file, even though it will fail.<p>When people try to overthink the api and have it determine if you really can write to a file, people will try using the high level api first (chmod) and it won’t work because it has nothing to do with permissions.<p>KISS is really needed for high level APIs.</div><br/></div></div></div></div><div id="40166705" class="c"><input type="checkbox" id="c-40166705" checked=""/><div class="controls bullet"><span class="by">devjab</span><span>|</span><a href="#40163828">parent</a><span>|</span><a href="#40165635">prev</a><span>|</span><a href="#40166575">next</a><span>|</span><label class="collapse" for="c-40166705">[-]</label><label class="expand" for="c-40166705">[1 more]</label></div><br/><div class="children"><div class="content">I’m genuinely curious as to what an abstraction-rich api would look like and why it would be useful.<p>I’ve mainly worked in enterprise organisations or in startups transitioning into enterprise which is sort of where my expertise lies. I’ve never seen an API that wasn’t similar to the examples in this case.<p>I mean… I have… but they wouldn’t be labelled as high-abstraction api’s. If they needed a label it would be terrible APIs. Like sending table headers, column types in another full length array with a line for each column, and then the actual data&#x2F;content in a third array. Even sending the html style that was used in what ever frontend, so that some data is represented as “some data” and other is represented as [“some data”, [“text-aligned”, “center”…],… . Yes, that is an actual example. Anyway I’ve never seen a high abstraction api and I feel like I’m missing out.</div><br/></div></div><div id="40166575" class="c"><input type="checkbox" id="c-40166575" checked=""/><div class="controls bullet"><span class="by">lwhi</span><span>|</span><a href="#40163828">parent</a><span>|</span><a href="#40166705">prev</a><span>|</span><a href="#40165480">next</a><span>|</span><label class="collapse" for="c-40166575">[-]</label><label class="expand" for="c-40166575">[1 more]</label></div><br/><div class="children"><div class="content">I like this idea a lot.<p>One level of API for implementation model.<p>And second level for mental model.</div><br/></div></div><div id="40165480" class="c"><input type="checkbox" id="c-40165480" checked=""/><div class="controls bullet"><span class="by">andenacitelli</span><span>|</span><a href="#40163828">parent</a><span>|</span><a href="#40166575">prev</a><span>|</span><a href="#40163968">next</a><span>|</span><label class="collapse" for="c-40165480">[-]</label><label class="expand" for="c-40165480">[1 more]</label></div><br/><div class="children"><div class="content">Another example of this is AWS CDK. There are a few “levels” of constructs - high level ones that are simpler and apply “presets” that are enough for 80% of users, but the core low level ones still exist if you have a nonstandard use case.</div><br/></div></div></div></div><div id="40162406" class="c"><input type="checkbox" id="c-40162406" checked=""/><div class="controls bullet"><span class="by">summerlight</span><span>|</span><a href="#40163828">prev</a><span>|</span><a href="#40162260">next</a><span>|</span><label class="collapse" for="c-40162406">[-]</label><label class="expand" for="c-40162406">[1 more]</label></div><br/><div class="children"><div class="content">I like the part that explains why Increase choose a different approach. Contexts matter a lot when you design something fundamental, but people usually don&#x27;t appreciate this enough.</div><br/></div></div><div id="40162260" class="c"><input type="checkbox" id="c-40162260" checked=""/><div class="controls bullet"><span class="by">spandrew</span><span>|</span><a href="#40162406">prev</a><span>|</span><a href="#40166125">next</a><span>|</span><label class="collapse" for="c-40162260">[-]</label><label class="expand" for="c-40162260">[3 more]</label></div><br/><div class="children"><div class="content">Love the article.<p>If you love Stripe (and as a designer and tech entrepreneur I do – Stripe&#x27;s simplicity and front-end skill is incredible) you might look at them and copy their ability to simplify and deliver polished experiences.<p>But the real mastery of Stripe is that they know their customers — and the simplicity they crave.<p>By this article is sounds like Increase does as well and has forged a similar laser-focus on what their customers need to build terrific design guidelines for making products. Inspiring to see.</div><br/><div id="40163839" class="c"><input type="checkbox" id="c-40163839" checked=""/><div class="controls bullet"><span class="by">esafak</span><span>|</span><a href="#40162260">parent</a><span>|</span><a href="#40163509">next</a><span>|</span><label class="collapse" for="c-40163839">[-]</label><label class="expand" for="c-40163839">[1 more]</label></div><br/><div class="children"><div class="content">How Stripe builds APIs and Teams: <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=IEe-5VOv0Js" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=IEe-5VOv0Js</a></div><br/></div></div><div id="40163509" class="c"><input type="checkbox" id="c-40163509" checked=""/><div class="controls bullet"><span class="by">rtpg</span><span>|</span><a href="#40162260">parent</a><span>|</span><a href="#40163839">prev</a><span>|</span><a href="#40166125">next</a><span>|</span><label class="collapse" for="c-40163509">[-]</label><label class="expand" for="c-40163509">[1 more]</label></div><br/><div class="children"><div class="content">Yeah I do think you can see in Stripes API places where there are differing tensions between “let’s make this potentially universal” and “let’s accept that this stuff is going to probably only apply for one payment method in one market”.<p>Personally I appreciate when the latter happens, but there’s an aesthetic decision there</div><br/></div></div></div></div><div id="40166125" class="c"><input type="checkbox" id="c-40166125" checked=""/><div class="controls bullet"><span class="by">theptip</span><span>|</span><a href="#40162260">prev</a><span>|</span><a href="#40163540">next</a><span>|</span><label class="collapse" for="c-40166125">[-]</label><label class="expand" for="c-40166125">[2 more]</label></div><br/><div class="children"><div class="content">This is a great example of the concept “ubiquitous language” from Domain Driven Design.<p>Use language that your domain experts understand. If your users know about NACHA files, using other terms would mean they need to keep a mapping in their head.<p>On the other hand, in Stripe’s case, their users are not domain experts and so it is valuable to craft an abstraction that is understandable yet hides unnecessary detail. If you have to teach your users a language, make it as simple as possible.</div><br/><div id="40166404" class="c"><input type="checkbox" id="c-40166404" checked=""/><div class="controls bullet"><span class="by">Nevermark</span><span>|</span><a href="#40166125">parent</a><span>|</span><a href="#40163540">next</a><span>|</span><label class="collapse" for="c-40166404">[-]</label><label class="expand" for="c-40166404">[1 more]</label></div><br/><div class="children"><div class="content">Or to put it another way, they are domain experts in the kinds of transactions they want to perform, not how transactions are implemented in the financial system.</div><br/></div></div></div></div><div id="40163540" class="c"><input type="checkbox" id="c-40163540" checked=""/><div class="controls bullet"><span class="by">cpeterso</span><span>|</span><a href="#40166125">prev</a><span>|</span><a href="#40167090">next</a><span>|</span><label class="collapse" for="c-40163540">[-]</label><label class="expand" for="c-40163540">[2 more]</label></div><br/><div class="children"><div class="content">This is similar to Domain-Driven Domain&#x27;s &quot;Ubiquitous Language&quot; design pattern, making your implementation use the same real-world terminology used domain experts.<p><a href="https:&#x2F;&#x2F;thedomaindrivendesign.io&#x2F;developing-the-ubiquitous-language&#x2F;" rel="nofollow">https:&#x2F;&#x2F;thedomaindrivendesign.io&#x2F;developing-the-ubiquitous-l...</a></div><br/><div id="40166093" class="c"><input type="checkbox" id="c-40166093" checked=""/><div class="controls bullet"><span class="by">hinkley</span><span>|</span><a href="#40163540">parent</a><span>|</span><a href="#40167090">next</a><span>|</span><label class="collapse" for="c-40166093">[-]</label><label class="expand" for="c-40166093">[1 more]</label></div><br/><div class="children"><div class="content">I was introduced to this concept a good while before DDD came along, when someone opined that if the nouns and verbs in your code don&#x27;t match the problem domain that&#x27;s an impedance mismatch and it&#x27;s going to get you into trouble some day.<p>It really reads like a shame response to me.  People are so pathologically allergic to saying &quot;I was wrong&quot; or &quot;we were wrong&quot; that they end up pushing their metaphors around like a kid trying to rearrange their vegetables on their plate to make it look like they ate some of them.<p>It&#x27;s also smacks of the &quot;No defects are obvious&quot; comment in Hoare&#x27;s Turing Award speech.</div><br/></div></div></div></div><div id="40167090" class="c"><input type="checkbox" id="c-40167090" checked=""/><div class="controls bullet"><span class="by">danecjensen</span><span>|</span><a href="#40163540">prev</a><span>|</span><a href="#40166249">next</a><span>|</span><label class="collapse" for="c-40167090">[-]</label><label class="expand" for="c-40167090">[1 more]</label></div><br/><div class="children"><div class="content">Strong work Jack!</div><br/></div></div><div id="40166249" class="c"><input type="checkbox" id="c-40166249" checked=""/><div class="controls bullet"><span class="by">tegling</span><span>|</span><a href="#40167090">prev</a><span>|</span><a href="#40163119">next</a><span>|</span><label class="collapse" for="c-40166249">[-]</label><label class="expand" for="c-40166249">[1 more]</label></div><br/><div class="children"><div class="content">One tricky thing to model neatly in payment APIs is that payment schemes indicate the roles of payer and payee in payment returns in different ways. E.g. for one particular scheme the payer and payee may be kept in the same position as in the initial payment (creditor of payment return is actually the one sending funds) whereas in another one they are switched (creditor is the one receiving funds in the return). I&#x27;d be curious to see how they are handling this case as it can be a real head-scratcher.</div><br/></div></div><div id="40163119" class="c"><input type="checkbox" id="c-40163119" checked=""/><div class="controls bullet"><span class="by">l5870uoo9y</span><span>|</span><a href="#40166249">prev</a><span>|</span><a href="#40163845">next</a><span>|</span><label class="collapse" for="c-40163119">[-]</label><label class="expand" for="c-40163119">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Monthly fees for users building on Increase vary by use case.<p>I am currently adding public API access to AI-powered text-to-SQL endpoint with RAG support and the my biggest issue is the pricing. Anybody have a ballpark figure what we could be talking about here? Pricing must account for OpenAI tokens (or perhaps letting them add their own OpenAI token), database usage and likely caching&#x2F;rate limiting setup down the line.</div><br/><div id="40163380" class="c"><input type="checkbox" id="c-40163380" checked=""/><div class="controls bullet"><span class="by">chaos_emergent</span><span>|</span><a href="#40163119">parent</a><span>|</span><a href="#40163845">next</a><span>|</span><label class="collapse" for="c-40163380">[-]</label><label class="expand" for="c-40163380">[1 more]</label></div><br/><div class="children"><div class="content">Foundationally, pricing should be based on <i>value</i>, not <i>cost</i>[1] so you should think about what the value is to your customer and go from there.<p>Ex: I know that Gong costs a ton of organizations over 100k&#x2F;year, and there&#x27;s no way that, accounting for storage, CPUs, and all the other OpEx, that the cost comes anywhere close to the cost of compute - it&#x27;s likely at least an order of magnitude greater. But because sales teams bring in so much revenue so directly, any leverage that they can buy in the form of a tool like Gong is immediately and obviously valuable.<p>[1]: the exception to avoiding cost-plus pricing is if you&#x27;re selling a commodity. But you&#x27;re not in that boat!</div><br/></div></div></div></div><div id="40163845" class="c"><input type="checkbox" id="c-40163845" checked=""/><div class="controls bullet"><span class="by">lwhi</span><span>|</span><a href="#40163119">prev</a><span>|</span><a href="#40162068">next</a><span>|</span><label class="collapse" for="c-40163845">[-]</label><label class="expand" for="c-40163845">[1 more]</label></div><br/><div class="children"><div class="content">So they say parts of the API structure are based 1-1 on externally controlled specifications.<p>What happens if those specifications evolve or change?<p>New API?</div><br/></div></div><div id="40162068" class="c"><input type="checkbox" id="c-40162068" checked=""/><div class="controls bullet"><span class="by">jackflintermann</span><span>|</span><a href="#40163845">prev</a><span>|</span><a href="#40163427">next</a><span>|</span><label class="collapse" for="c-40162068">[-]</label><label class="expand" for="c-40162068">[1 more]</label></div><br/><div class="children"><div class="content">Author here - this has been a useful mindset for us internally but I&#x27;m curious if it resonates externally. I&#x27;d love your feedback!</div><br/></div></div><div id="40163427" class="c"><input type="checkbox" id="c-40163427" checked=""/><div class="controls bullet"><span class="by">cratermoon</span><span>|</span><a href="#40162068">prev</a><span>|</span><a href="#40164972">next</a><span>|</span><label class="collapse" for="c-40163427">[-]</label><label class="expand" for="c-40163427">[6 more]</label></div><br/><div class="children"><div class="content">No Abstractions here really means &quot;just use terms from the underlying system&quot;, which is a good naming principle in general.<p>Problems inevitably arise over time when there&#x27;s multiple underlying systems and they have different names for the same thing, or, arguably worse, use both use a name but for different things. In this example, what if the underlying payment providers have different models?  Also, what if the Federal Reserve, deprecates Input Message Accountability Data and switches to a new thing?<p>Maybe things are a lot simpler in the payment industry than they are in transportation or networking protocol. If I built a packet-switching product based on X.25 and later wanted to also support tcp&#x2F;ip, what&#x27;s the right abstraction?</div><br/><div id="40163650" class="c"><input type="checkbox" id="c-40163650" checked=""/><div class="controls bullet"><span class="by">jackflintermann</span><span>|</span><a href="#40163427">parent</a><span>|</span><a href="#40163501">next</a><span>|</span><label class="collapse" for="c-40163650">[-]</label><label class="expand" for="c-40163650">[1 more]</label></div><br/><div class="children"><div class="content">I appreciate the thorough read!<p>For deprecations we&#x27;re lucky in that the underlying systems don&#x27;t change very much (the Input Message Accountability Data isn&#x27;t going anywhere). But we&#x27;ll run into collisions when we, for example, start issuing cards on Mastercard as well as Visa.<p>We have experimented with a couple of, um, abstractions, and may do so there. One rule we&#x27;ve stuck to, and likely would as well, is to keep the &quot;substrate objects&quot; un-abstracted but to introduce higher-level compositions for convenience. For example, there is no such thing as a &quot;Card Payment&quot; (<a href="https:&#x2F;&#x2F;increase.com&#x2F;documentation&#x2F;api#card-payments">https:&#x2F;&#x2F;increase.com&#x2F;documentation&#x2F;api#card-payments</a>) - it&#x27;s just a way to cluster related card authorization and settlement messages. But it&#x27;s <i>extremely</i> useful for users and nontrivial to do the reconciliation, so we tried it. But we think it&#x27;s essential that the underlying network messages (the &quot;substrate objects&quot;) are also accessible in the API, along with all the underlying fields etc.<p>Unfortunately 100% of the public APIs I have worked on are in payments. I wish I had another lens!</div><br/></div></div><div id="40163501" class="c"><input type="checkbox" id="c-40163501" checked=""/><div class="controls bullet"><span class="by">advisedwang</span><span>|</span><a href="#40163427">parent</a><span>|</span><a href="#40163650">prev</a><span>|</span><a href="#40164587">next</a><span>|</span><label class="collapse" for="c-40163501">[-]</label><label class="expand" for="c-40163501">[3 more]</label></div><br/><div class="children"><div class="content">&gt; No Abstractions here really means &quot;just use terms from the underlying system&quot;<p>The article clearly says it also means &quot;no unifying similar objects&quot;, which enables the naming decision.</div><br/><div id="40163853" class="c"><input type="checkbox" id="c-40163853" checked=""/><div class="controls bullet"><span class="by">cratermoon</span><span>|</span><a href="#40163427">root</a><span>|</span><a href="#40163501">parent</a><span>|</span><a href="#40164587">next</a><span>|</span><label class="collapse" for="c-40163853">[-]</label><label class="expand" for="c-40163853">[2 more]</label></div><br/><div class="children"><div class="content">How does that work if, for example, the example given of  &quot;Visa and Mastercard have subtly different reason codes for why a chargeback can be initiated, but Stripe combines those codes into a single enum so that their users don’t need to consider the two networks separately.&quot;. Unfortunately, the article doesn&#x27;t explain how Increase handles that overlap. Presumably, as the article states, their customers are the sort that <i>do</i> care about Visa reason codes vs Mastercard reason codes, so what&#x27;s the design of a &quot;no abstraction&quot; API in that case?</div><br/><div id="40164129" class="c"><input type="checkbox" id="c-40164129" checked=""/><div class="controls bullet"><span class="by">travisjungroth</span><span>|</span><a href="#40163427">root</a><span>|</span><a href="#40163853">parent</a><span>|</span><a href="#40164587">next</a><span>|</span><label class="collapse" for="c-40164129">[-]</label><label class="expand" for="c-40164129">[1 more]</label></div><br/><div class="children"><div class="content">I’m just reasoning from my limited experience and the article. Stripe unifies those reasons codes. Increase doesn’t. It might be that the Chargeback has the processor and chargeback code as attributes.<p>So rather than have a universal “goods and services not received”, it’s a 13.1 for Visa, a 4855 for MasterCard and a F30 for Amex. This matters when the boundaries are different. For example, they all split up the categories of fraud differently.</div><br/></div></div></div></div></div></div><div id="40164587" class="c"><input type="checkbox" id="c-40164587" checked=""/><div class="controls bullet"><span class="by">Terr_</span><span>|</span><a href="#40163427">parent</a><span>|</span><a href="#40163501">prev</a><span>|</span><a href="#40164972">next</a><span>|</span><label class="collapse" for="c-40164587">[-]</label><label class="expand" for="c-40164587">[1 more]</label></div><br/><div class="children"><div class="content">&gt; No Abstractions here really means &quot;just use terms from the underlying system&quot;<p>Which sounds a bit like Domain Driven Design, although the &quot;underlying system&quot; in this case may be a bit too implementation-centered to be considered a real business domain.<p>To expand on that a bit: In DDD you generally defer to the names and conceptual-models the business-domain has already created. Trying to introduce your own &quot;improved&quot; [0] model or terms creates friction&#x2F;miscommunications, adds opportunities for integration bugs, and ignores decades or even centuries of battle-tested specialized knowledge.<p>[0] <a href="https:&#x2F;&#x2F;xkcd.com&#x2F;793&#x2F;" rel="nofollow">https:&#x2F;&#x2F;xkcd.com&#x2F;793&#x2F;</a></div><br/></div></div></div></div><div id="40164972" class="c"><input type="checkbox" id="c-40164972" checked=""/><div class="controls bullet"><span class="by">west0n</span><span>|</span><a href="#40163427">prev</a><span>|</span><a href="#40162366">next</a><span>|</span><label class="collapse" for="c-40164972">[-]</label><label class="expand" for="c-40164972">[1 more]</label></div><br/><div class="children"><div class="content">If we didn&#x27;t have abstractions like POSIX, applications would need to write an adaptor for every supported file system.</div><br/></div></div><div id="40162366" class="c"><input type="checkbox" id="c-40162366" checked=""/><div class="controls bullet"><span class="by">chowells</span><span>|</span><a href="#40164972">prev</a><span>|</span><a href="#40165669">next</a><span>|</span><label class="collapse" for="c-40162366">[-]</label><label class="expand" for="c-40162366">[19 more]</label></div><br/><div class="children"><div class="content">If there&#x27;s no abstraction, what&#x27;s your value-add? I don&#x27;t care enough to read your marketing BS to see where you claim to be special, but... If your API is doing the exact same things as an underlying service is doing, you&#x27;re just a middleman extracting rents.<p>You might find it more valuable to state your position as &quot;carefully scoped abstractions&quot; to make it clear what value you add.</div><br/><div id="40162562" class="c"><input type="checkbox" id="c-40162562" checked=""/><div class="controls bullet"><span class="by">koreth1</span><span>|</span><a href="#40162366">parent</a><span>|</span><a href="#40162833">next</a><span>|</span><label class="collapse" for="c-40162562">[-]</label><label class="expand" for="c-40162562">[11 more]</label></div><br/><div class="children"><div class="content">Based on my previous experience on payment systems, there&#x27;s a surprising amount of value in not having to maintain direct business relationships with the underlying payment providers. It is much, much easier to work with a company like Stripe than to work directly with Visa and MasterCard and the ACH network, and heaven help you if you&#x27;re a small company that needs to do automated cross-border payments to a wide range of countries without a middleman. You&#x27;ll probably also get much better support from a tech-focused company when an API starts freaking out.</div><br/><div id="40162859" class="c"><input type="checkbox" id="c-40162859" checked=""/><div class="controls bullet"><span class="by">jackflintermann</span><span>|</span><a href="#40162366">root</a><span>|</span><a href="#40162562">parent</a><span>|</span><a href="#40165722">next</a><span>|</span><label class="collapse" for="c-40162859">[-]</label><label class="expand" for="c-40162859">[5 more]</label></div><br/><div class="children"><div class="content">Yes, exactly, the important thing to us is that our users don&#x27;t need to build an additional mental model between us and the networks we sit atop. If you know the network, we want you to be able to intuit how our API works. There&#x27;s a very real difference (arguably the fundamental value-add of our company) in the transport layer, though. The actual mechanics of integrating with, say, FedACH, are a bit long to get into here (we get into it a bit here if it&#x27;s of interest: <a href="https:&#x2F;&#x2F;increase.com&#x2F;documentation&#x2F;fedach">https:&#x2F;&#x2F;increase.com&#x2F;documentation&#x2F;fedach</a>) but suffice to say it doesn&#x27;t have a REST API.</div><br/><div id="40166209" class="c"><input type="checkbox" id="c-40166209" checked=""/><div class="controls bullet"><span class="by">wodenokoto</span><span>|</span><a href="#40162366">root</a><span>|</span><a href="#40162859">parent</a><span>|</span><a href="#40162972">next</a><span>|</span><label class="collapse" for="c-40166209">[-]</label><label class="expand" for="c-40166209">[1 more]</label></div><br/><div class="children"><div class="content">But it must have _some sort_ of API. Since your rest API is modelled on their API it made me really curious about how you communicate with those networks.</div><br/></div></div><div id="40162972" class="c"><input type="checkbox" id="c-40162972" checked=""/><div class="controls bullet"><span class="by">koreth1</span><span>|</span><a href="#40162366">root</a><span>|</span><a href="#40162859">parent</a><span>|</span><a href="#40166209">prev</a><span>|</span><a href="#40164886">next</a><span>|</span><label class="collapse" for="c-40162972">[-]</label><label class="expand" for="c-40162972">[2 more]</label></div><br/><div class="children"><div class="content">That&#x27;s an excellent point too. Some payment systems have abysmal technology. The product I worked on was focused on international payments and in a couple cases, the &quot;API&quot; was literally, &quot;Upload a CSV file via FTP, and at some later point, another CSV file might appear on the FTP server with some of the payment results, but if it doesn&#x27;t, call us because we probably just forgot to upload it.&quot;</div><br/><div id="40163237" class="c"><input type="checkbox" id="c-40163237" checked=""/><div class="controls bullet"><span class="by">nijave</span><span>|</span><a href="#40162366">root</a><span>|</span><a href="#40162972">parent</a><span>|</span><a href="#40164886">next</a><span>|</span><label class="collapse" for="c-40163237">[-]</label><label class="expand" for="c-40163237">[1 more]</label></div><br/><div class="children"><div class="content">Batch jobs and (S)FTP. In a bit of a weird twist, back when I worked at Chase, they were innovating on the ancient technology but it was things like &quot;better batch job management&#x2F;orchestration&quot; and SFTP proxy to route between different servers and centralize key management</div><br/></div></div></div></div><div id="40164886" class="c"><input type="checkbox" id="c-40164886" checked=""/><div class="controls bullet"><span class="by">jrochkind1</span><span>|</span><a href="#40162366">root</a><span>|</span><a href="#40162859">parent</a><span>|</span><a href="#40162972">prev</a><span>|</span><a href="#40165722">next</a><span>|</span><label class="collapse" for="c-40164886">[-]</label><label class="expand" for="c-40164886">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m curious to learn more about what your customers look like, what sorts of businesses and activities they are in. Where stripe&#x27;s customers are working on products unrelated to payments, yours are working on products related to payments? I&#x27;m having trouble conceiving of examples.</div><br/></div></div></div></div><div id="40165722" class="c"><input type="checkbox" id="c-40165722" checked=""/><div class="controls bullet"><span class="by">fendy3002</span><span>|</span><a href="#40162366">root</a><span>|</span><a href="#40162562">parent</a><span>|</span><a href="#40162859">prev</a><span>|</span><a href="#40162786">next</a><span>|</span><label class="collapse" for="c-40165722">[-]</label><label class="expand" for="c-40165722">[1 more]</label></div><br/><div class="children"><div class="content">Idk how this one works, but credit card processors need license. If you can use credit card service without requiring that license then it&#x27;ll be the best additional value.</div><br/></div></div><div id="40162786" class="c"><input type="checkbox" id="c-40162786" checked=""/><div class="controls bullet"><span class="by">exe34</span><span>|</span><a href="#40162366">root</a><span>|</span><a href="#40162562">parent</a><span>|</span><a href="#40165722">prev</a><span>|</span><a href="#40162833">next</a><span>|</span><label class="collapse" for="c-40162786">[-]</label><label class="expand" for="c-40162786">[4 more]</label></div><br/><div class="children"><div class="content">I thought I understood everything you said, but isn&#x27;t Stripe a middleperson here?<p>&gt; without a middleman.</div><br/><div id="40162851" class="c"><input type="checkbox" id="c-40162851" checked=""/><div class="controls bullet"><span class="by">koreth1</span><span>|</span><a href="#40162366">root</a><span>|</span><a href="#40162786">parent</a><span>|</span><a href="#40162884">next</a><span>|</span><label class="collapse" for="c-40162851">[-]</label><label class="expand" for="c-40162851">[2 more]</label></div><br/><div class="children"><div class="content">Right, Stripe is a middleman and part of the value they&#x27;re giving you is that you don&#x27;t have to work directly with the underlying payment companies. If you had to support the same range of payment options without a middleman, you&#x27;d need to have business relationships with a bunch of payment companies, which would be a lot more difficult and time-consuming.<p>Hope that&#x27;s clearer!</div><br/><div id="40163039" class="c"><input type="checkbox" id="c-40163039" checked=""/><div class="controls bullet"><span class="by">exe34</span><span>|</span><a href="#40162366">root</a><span>|</span><a href="#40162851">parent</a><span>|</span><a href="#40162884">next</a><span>|</span><label class="collapse" for="c-40163039">[-]</label><label class="expand" for="c-40163039">[1 more]</label></div><br/><div class="children"><div class="content">Makes sense thanks!</div><br/></div></div></div></div><div id="40162884" class="c"><input type="checkbox" id="c-40162884" checked=""/><div class="controls bullet"><span class="by">OJFord</span><span>|</span><a href="#40162366">root</a><span>|</span><a href="#40162786">parent</a><span>|</span><a href="#40162851">prev</a><span>|</span><a href="#40162833">next</a><span>|</span><label class="collapse" for="c-40162884">[-]</label><label class="expand" for="c-40162884">[1 more]</label></div><br/><div class="children"><div class="content">Yes, GP&#x27;s point is &#x27;good luck to you doing that yourself, without a middleman [such as Stripe]&#x27;.</div><br/></div></div></div></div></div></div><div id="40162833" class="c"><input type="checkbox" id="c-40162833" checked=""/><div class="controls bullet"><span class="by">conroy</span><span>|</span><a href="#40162366">parent</a><span>|</span><a href="#40162562">prev</a><span>|</span><a href="#40162797">next</a><span>|</span><label class="collapse" for="c-40162833">[-]</label><label class="expand" for="c-40162833">[4 more]</label></div><br/><div class="children"><div class="content">In this case, a HTTP API is the abstraction. Integrating with ACH and other payment rails requires a lengthy integration process. Sometime you have to send binary files using FTP!</div><br/><div id="40163174" class="c"><input type="checkbox" id="c-40163174" checked=""/><div class="controls bullet"><span class="by">jiggawatts</span><span>|</span><a href="#40162366">root</a><span>|</span><a href="#40162833">parent</a><span>|</span><a href="#40162797">next</a><span>|</span><label class="collapse" for="c-40163174">[-]</label><label class="expand" for="c-40163174">[3 more]</label></div><br/><div class="children"><div class="content">The article says “no abstractions”, but HTTP is often exactly that: an abstraction over lower-level protocols.</div><br/><div id="40163293" class="c"><input type="checkbox" id="c-40163293" checked=""/><div class="controls bullet"><span class="by">jackflintermann</span><span>|</span><a href="#40162366">root</a><span>|</span><a href="#40163174">parent</a><span>|</span><a href="#40163416">next</a><span>|</span><label class="collapse" for="c-40163293">[-]</label><label class="expand" for="c-40163293">[1 more]</label></div><br/><div class="children"><div class="content">I guess the phrase &quot;no abstractions&quot; is specifically valuable to us when designing our REST API resources - our whole stack is certainly an abstraction of sorts, but we don&#x27;t want to add yet another abstraction in that specific layer.</div><br/></div></div><div id="40163416" class="c"><input type="checkbox" id="c-40163416" checked=""/><div class="controls bullet"><span class="by">chaos_emergent</span><span>|</span><a href="#40162366">root</a><span>|</span><a href="#40163174">parent</a><span>|</span><a href="#40163293">prev</a><span>|</span><a href="#40162797">next</a><span>|</span><label class="collapse" for="c-40163416">[-]</label><label class="expand" for="c-40163416">[1 more]</label></div><br/><div class="children"><div class="content">perhaps what you&#x27;re thinking of is &quot;equal entropy abstractions&quot; - HTTP is just a way of standardizing logic, but the complexity of the shape and behavior of the API remains.</div><br/></div></div></div></div></div></div><div id="40162797" class="c"><input type="checkbox" id="c-40162797" checked=""/><div class="controls bullet"><span class="by">arrowsmith</span><span>|</span><a href="#40162366">parent</a><span>|</span><a href="#40162833">prev</a><span>|</span><a href="#40163669">next</a><span>|</span><label class="collapse" for="c-40162797">[-]</label><label class="expand" for="c-40162797">[1 more]</label></div><br/><div class="children"><div class="content">Presumably the value comes from providing a single unified platform that means you don&#x27;t have to integrate with every underlying service separately.<p>I know nothing about the lower-level details of payment networks but the mere fact that this company exists and has customers would suggest that there&#x27;s a value-add.</div><br/></div></div><div id="40163669" class="c"><input type="checkbox" id="c-40163669" checked=""/><div class="controls bullet"><span class="by">contravariant</span><span>|</span><a href="#40162366">parent</a><span>|</span><a href="#40162797">prev</a><span>|</span><a href="#40166082">next</a><span>|</span><label class="collapse" for="c-40163669">[-]</label><label class="expand" for="c-40163669">[1 more]</label></div><br/><div class="children"><div class="content">There is abstraction there&#x27;s just not an additional layer of abstractions on top of it.<p>Which to be honest is quite good, there&#x27;s lots of things you can solve with an additional layer of abstraction but not having too many layers of abstraction. It&#x27;s also rare to be able to identify an abstraction that <i>correctly</i> cuts things off at the right layer.</div><br/></div></div><div id="40166082" class="c"><input type="checkbox" id="c-40166082" checked=""/><div class="controls bullet"><span class="by">alex_lav</span><span>|</span><a href="#40162366">parent</a><span>|</span><a href="#40163669">prev</a><span>|</span><a href="#40165669">next</a><span>|</span><label class="collapse" for="c-40166082">[-]</label><label class="expand" for="c-40166082">[1 more]</label></div><br/><div class="children"><div class="content">&gt; If there&#x27;s no abstraction, what&#x27;s your value-add?<p>But then<p>&gt; I don&#x27;t care enough to read<p>Hmmmmmm.</div><br/></div></div></div></div><div id="40165669" class="c"><input type="checkbox" id="c-40165669" checked=""/><div class="controls bullet"><span class="by">dheera</span><span>|</span><a href="#40162366">prev</a><span>|</span><a href="#40164416">next</a><span>|</span><label class="collapse" for="c-40165669">[-]</label><label class="expand" for="c-40165669">[1 more]</label></div><br/><div class="children"><div class="content">Java engineers need to see this. Goddamn Proxies, Factories, and Beans. Fragments, Surfaces, Runnables.</div><br/></div></div><div id="40164416" class="c"><input type="checkbox" id="c-40164416" checked=""/><div class="controls bullet"><span class="by">bvrmn</span><span>|</span><a href="#40165669">prev</a><span>|</span><a href="#40163152">next</a><span>|</span><label class="collapse" for="c-40164416">[-]</label><label class="expand" for="c-40164416">[1 more]</label></div><br/><div class="children"><div class="content">Also it greatly helps to not overuse nouns and try to forcefully model verbs with resource entities.</div><br/></div></div><div id="40163152" class="c"><input type="checkbox" id="c-40163152" checked=""/><div class="controls bullet"><span class="by">lolpanda</span><span>|</span><a href="#40164416">prev</a><span>|</span><a href="#40162922">next</a><span>|</span><label class="collapse" for="c-40163152">[-]</label><label class="expand" for="c-40163152">[23 more]</label></div><br/><div class="children"><div class="content">for any APIs related to money, should the currency be in strings as opposed to in floats? This will prevent accidental float arithmetic in the code. I always find it tricky to work with currency in javascript.</div><br/><div id="40163207" class="c"><input type="checkbox" id="c-40163207" checked=""/><div class="controls bullet"><span class="by">benhoyt</span><span>|</span><a href="#40163152">parent</a><span>|</span><a href="#40166446">next</a><span>|</span><label class="collapse" for="c-40163207">[-]</label><label class="expand" for="c-40163207">[4 more]</label></div><br/><div class="children"><div class="content">From their docs [1] it looks like they do everything using integers: the amounts are integers in the &quot;minor unit&quot; of currency, for example cents if the currency is dollars. So 1000 means $10.00. In languages like JavaScript where everything is a float64, you can still accurately represent integers up to 2^53, which would be $90 trillion.<p>[1] <a href="https:&#x2F;&#x2F;increase.com&#x2F;documentation&#x2F;api#transactions">https:&#x2F;&#x2F;increase.com&#x2F;documentation&#x2F;api#transactions</a></div><br/><div id="40163909" class="c"><input type="checkbox" id="c-40163909" checked=""/><div class="controls bullet"><span class="by">crabmusket</span><span>|</span><a href="#40163152">root</a><span>|</span><a href="#40163207">parent</a><span>|</span><a href="#40163633">next</a><span>|</span><label class="collapse" for="c-40163909">[-]</label><label class="expand" for="c-40163909">[2 more]</label></div><br/><div class="children"><div class="content">This isn&#x27;t sufficient to represent <i>prices</i> which often include fractional amounts of cents in non-retail scenarios. Think of AWS server prices per hour.</div><br/><div id="40164095" class="c"><input type="checkbox" id="c-40164095" checked=""/><div class="controls bullet"><span class="by">krainboltgreene</span><span>|</span><a href="#40163152">root</a><span>|</span><a href="#40163909">parent</a><span>|</span><a href="#40163633">next</a><span>|</span><label class="collapse" for="c-40164095">[-]</label><label class="expand" for="c-40164095">[1 more]</label></div><br/><div class="children"><div class="content">Funny, because that&#x27;s exactly what Stripe does (<a href="https:&#x2F;&#x2F;docs.stripe.com&#x2F;billing&#x2F;subscriptions&#x2F;usage-based&#x2F;pricing-models#decimal-amounts" rel="nofollow">https:&#x2F;&#x2F;docs.stripe.com&#x2F;billing&#x2F;subscriptions&#x2F;usage-based&#x2F;pr...</a>)</div><br/></div></div></div></div></div></div><div id="40166446" class="c"><input type="checkbox" id="c-40166446" checked=""/><div class="controls bullet"><span class="by">GeneralMayhem</span><span>|</span><a href="#40163152">parent</a><span>|</span><a href="#40163207">prev</a><span>|</span><a href="#40163188">next</a><span>|</span><label class="collapse" for="c-40166446">[-]</label><label class="expand" for="c-40166446">[1 more]</label></div><br/><div class="children"><div class="content">Ideally integers, but at a large multiplier.<p>Google&#x27;s money proto [1] has units and nanos. Any competent ad-tech system will use something similar: integer number of micro-dollars, nano-dollars, etc. You want a fair amount of precision, so just tracking whole cents isn&#x27;t enough, but you want that precision to be (linearly) equally distributed across the value space so that you can make intuitive guarantees about how much error can accumulate.<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;googleapis&#x2F;googleapis&#x2F;blob&#x2F;master&#x2F;google&#x2F;type&#x2F;money.proto">https:&#x2F;&#x2F;github.com&#x2F;googleapis&#x2F;googleapis&#x2F;blob&#x2F;master&#x2F;google&#x2F;...</a></div><br/></div></div><div id="40163188" class="c"><input type="checkbox" id="c-40163188" checked=""/><div class="controls bullet"><span class="by">freedomben</span><span>|</span><a href="#40163152">parent</a><span>|</span><a href="#40166446">prev</a><span>|</span><a href="#40163491">next</a><span>|</span><label class="collapse" for="c-40163188">[-]</label><label class="expand" for="c-40163188">[1 more]</label></div><br/><div class="children"><div class="content">Yes, never use floats for currency.  I typically use integers and for USD for example, measure in &quot;cents&quot; rather than dollar.  I try to avoid the fallacy of appeal to authority, but this is what Stripe does.  You can also use the Decimal type in javascript and convert to&#x2F;from strings to cross API boundaries.</div><br/></div></div><div id="40163491" class="c"><input type="checkbox" id="c-40163491" checked=""/><div class="controls bullet"><span class="by">tadfisher</span><span>|</span><a href="#40163152">parent</a><span>|</span><a href="#40163188">prev</a><span>|</span><a href="#40163226">next</a><span>|</span><label class="collapse" for="c-40163491">[-]</label><label class="expand" for="c-40163491">[5 more]</label></div><br/><div class="children"><div class="content">I will be the contrarian: JSON numbers are not floating point values, they are strings of characters matching the format &quot;-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?&quot;. You can choose to parse them however you want, and parsing libraries should provide a mechanism to decode to an arbitrary-precision value.</div><br/><div id="40166788" class="c"><input type="checkbox" id="c-40166788" checked=""/><div class="controls bullet"><span class="by">meekaaku</span><span>|</span><a href="#40163152">root</a><span>|</span><a href="#40163491">parent</a><span>|</span><a href="#40166729">next</a><span>|</span><label class="collapse" for="c-40166788">[-]</label><label class="expand" for="c-40166788">[1 more]</label></div><br/><div class="children"><div class="content">Yes, but say in javascript if you do a JSON.parse(), it will give you a double float right?</div><br/></div></div><div id="40166729" class="c"><input type="checkbox" id="c-40166729" checked=""/><div class="controls bullet"><span class="by">int_19h</span><span>|</span><a href="#40163152">root</a><span>|</span><a href="#40163491">parent</a><span>|</span><a href="#40166788">prev</a><span>|</span><a href="#40164492">next</a><span>|</span><label class="collapse" for="c-40166729">[-]</label><label class="expand" for="c-40166729">[1 more]</label></div><br/><div class="children"><div class="content">Regardless of what the libraries <i>should</i> be doing, there is the reality of what they <i>are</i> doing.</div><br/></div></div><div id="40164492" class="c"><input type="checkbox" id="c-40164492" checked=""/><div class="controls bullet"><span class="by">lolpanda</span><span>|</span><a href="#40163152">root</a><span>|</span><a href="#40163491">parent</a><span>|</span><a href="#40166729">prev</a><span>|</span><a href="#40164080">next</a><span>|</span><label class="collapse" for="c-40164492">[-]</label><label class="expand" for="c-40164492">[1 more]</label></div><br/><div class="children"><div class="content">Good point. it&#x27;s not a problem with JSON. It&#x27;s just that most of the JSON libraries by default parse numbers into floats.</div><br/></div></div><div id="40164080" class="c"><input type="checkbox" id="c-40164080" checked=""/><div class="controls bullet"><span class="by">koreth1</span><span>|</span><a href="#40163152">root</a><span>|</span><a href="#40163491">parent</a><span>|</span><a href="#40164492">prev</a><span>|</span><a href="#40163226">next</a><span>|</span><label class="collapse" for="c-40164080">[-]</label><label class="expand" for="c-40164080">[1 more]</label></div><br/><div class="children"><div class="content">By way of example: when I worked on payment code in Java, we accepted numeric JSON values in request payloads but they were deserialized into &quot;BigDecimal&quot; fields in our payload classes, not &quot;float&quot; or &quot;double&quot;.</div><br/></div></div></div></div><div id="40163180" class="c"><input type="checkbox" id="c-40163180" checked=""/><div class="controls bullet"><span class="by">trevor-e</span><span>|</span><a href="#40163152">parent</a><span>|</span><a href="#40163226">prev</a><span>|</span><a href="#40163298">next</a><span>|</span><label class="collapse" for="c-40163180">[-]</label><label class="expand" for="c-40163180">[6 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve always seen currencies multiplied by 100 to remove the need for floating point.</div><br/><div id="40166204" class="c"><input type="checkbox" id="c-40166204" checked=""/><div class="controls bullet"><span class="by">kadoban</span><span>|</span><a href="#40163152">root</a><span>|</span><a href="#40163180">parent</a><span>|</span><a href="#40164238">next</a><span>|</span><label class="collapse" for="c-40166204">[-]</label><label class="expand" for="c-40166204">[1 more]</label></div><br/><div class="children"><div class="content">If you use a higher constant, 10000 or 1000000 or something, you give yourself a good amount of more fleixibility.</div><br/></div></div><div id="40164238" class="c"><input type="checkbox" id="c-40164238" checked=""/><div class="controls bullet"><span class="by">cateye</span><span>|</span><a href="#40163152">root</a><span>|</span><a href="#40163180">parent</a><span>|</span><a href="#40166204">prev</a><span>|</span><a href="#40163810">next</a><span>|</span><label class="collapse" for="c-40164238">[-]</label><label class="expand" for="c-40164238">[1 more]</label></div><br/><div class="children"><div class="content">Some currencies use more than 2 decimal places. For instance, the currencies of Algeria, Bahrain, Iraq, Jordan, Kuwait, Libya, and Tunisia are subdivided into 3 decimals.</div><br/></div></div><div id="40163810" class="c"><input type="checkbox" id="c-40163810" checked=""/><div class="controls bullet"><span class="by">akavi</span><span>|</span><a href="#40163152">root</a><span>|</span><a href="#40163180">parent</a><span>|</span><a href="#40164238">prev</a><span>|</span><a href="#40163215">next</a><span>|</span><label class="collapse" for="c-40163810">[-]</label><label class="expand" for="c-40163810">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s not quite a sufficient rule. Eg, 1 Bahraini Dinar is 1_000 Bahraini Fils.</div><br/></div></div><div id="40163215" class="c"><input type="checkbox" id="c-40163215" checked=""/><div class="controls bullet"><span class="by">nijave</span><span>|</span><a href="#40163152">root</a><span>|</span><a href="#40163180">parent</a><span>|</span><a href="#40163810">prev</a><span>|</span><a href="#40163298">next</a><span>|</span><label class="collapse" for="c-40163215">[-]</label><label class="expand" for="c-40163215">[2 more]</label></div><br/><div class="children"><div class="content">Yeah, this seems like a common pattern. Not sure about currency with arbitrary place values though (like Bitcoin)</div><br/><div id="40163291" class="c"><input type="checkbox" id="c-40163291" checked=""/><div class="controls bullet"><span class="by">deathanatos</span><span>|</span><a href="#40163152">root</a><span>|</span><a href="#40163215">parent</a><span>|</span><a href="#40163298">next</a><span>|</span><label class="collapse" for="c-40163291">[-]</label><label class="expand" for="c-40163291">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not sure what you mean by &quot;arbitrary place values&quot; with Bitcoin; if you are implying it&#x27;s infinitely divisible, it isn&#x27;t. You&#x27;d do the same trick with Bitcoin: represent it as an integer¹. The value 1 is 1 sat, or 0.00000001 BTC.<p>¹(where you need to; otherwise, I&#x27;d use some fixed point type if my language supports it)</div><br/></div></div></div></div></div></div><div id="40163298" class="c"><input type="checkbox" id="c-40163298" checked=""/><div class="controls bullet"><span class="by">cratermoon</span><span>|</span><a href="#40163152">parent</a><span>|</span><a href="#40163180">prev</a><span>|</span><a href="#40163262">next</a><span>|</span><label class="collapse" for="c-40163298">[-]</label><label class="expand" for="c-40163298">[1 more]</label></div><br/><div class="children"><div class="content">neither. Use rational or some other better type.</div><br/></div></div><div id="40163262" class="c"><input type="checkbox" id="c-40163262" checked=""/><div class="controls bullet"><span class="by">endofreach</span><span>|</span><a href="#40163152">parent</a><span>|</span><a href="#40163298">prev</a><span>|</span><a href="#40162922">next</a><span>|</span><label class="collapse" for="c-40163262">[-]</label><label class="expand" for="c-40163262">[3 more]</label></div><br/><div class="children"><div class="content">You should never use floats for dinero. And it has nothing to do with JS, though i find it funny that you mention JS.</div><br/><div id="40163602" class="c"><input type="checkbox" id="c-40163602" checked=""/><div class="controls bullet"><span class="by">xxgreg</span><span>|</span><a href="#40163152">root</a><span>|</span><a href="#40163262">parent</a><span>|</span><a href="#40163313">next</a><span>|</span><label class="collapse" for="c-40163602">[-]</label><label class="expand" for="c-40163602">[1 more]</label></div><br/><div class="children"><div class="content">Don&#x27;t use floats if you&#x27;re trying to represent an exact value, i.e. someones bank account. But in financial modelling you&#x27;re generally dealing in probabilistic &quot;expected values&quot;, it&#x27;s common and fine to use floats.<p>Having said that, half the world seems to run on Excel spreadsheets, which are full of money values, and Excel is basically all floats (with some funky precision logic to make it deterministic - would be curious to know more).<p><a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;2815407&#x2F;can-someone-confirm-how-microsoft-excel-2007-internally-represents-numbers" rel="nofollow">https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;2815407&#x2F;can-someone-conf...</a></div><br/></div></div></div></div></div></div><div id="40162922" class="c"><input type="checkbox" id="c-40162922" checked=""/><div class="controls bullet"><span class="by">kikimora</span><span>|</span><a href="#40163152">prev</a><span>|</span><a href="#40163485">next</a><span>|</span><label class="collapse" for="c-40162922">[-]</label><label class="expand" for="c-40162922">[3 more]</label></div><br/><div class="children"><div class="content">I think this is better than Stripe’s abstract everything approach even for people who are not into payments. Stripe has built a very leaky abstraction.</div><br/><div id="40163127" class="c"><input type="checkbox" id="c-40163127" checked=""/><div class="controls bullet"><span class="by">adelineJoOs</span><span>|</span><a href="#40162922">parent</a><span>|</span><a href="#40163485">next</a><span>|</span><label class="collapse" for="c-40163127">[-]</label><label class="expand" for="c-40163127">[2 more]</label></div><br/><div class="children"><div class="content">How is the leakage noticeable?</div><br/><div id="40164952" class="c"><input type="checkbox" id="c-40164952" checked=""/><div class="controls bullet"><span class="by">kikimora</span><span>|</span><a href="#40162922">root</a><span>|</span><a href="#40163127">parent</a><span>|</span><a href="#40163485">next</a><span>|</span><label class="collapse" for="c-40164952">[-]</label><label class="expand" for="c-40164952">[1 more]</label></div><br/><div class="children"><div class="content">I’m not saying Stripe API is bad. But there are limits to how much differences you can hide behind a generic API while keeping it consistent.<p>Off the top of my head I can think of a few cases I would qualify as a leaky abstraction. To start with - there is a payment method abstraction and there is SetupIntent that works with it. Normal use case is tokenizing a CC. But for ACH it does something different if ever works. Same setup intent would work with debit cards, but not in Brazil because of local regulations. I don’t remember if you get a decent error code when attempt to tokenize a Brazilian debit card.<p>Customers making cards payments can initiate a dispute which would cost you 15 usd + payment amount if they win. This cannot happen with some other payment methods. It became important when you implement Stripe connect because you might want to set different fees for different payment methods to account for cost of disputes. The leaky abstraction part here is as soon as you start creating certain type of payment intents you also have to subscribe to Stripe webhooks for disputes.<p>To save on refund fees you may want to authorize payments (confirm payment intent) and capture them after a period of time. During that window you can cancel the payment and pay only authorization fee instead of paying full refund fee. This strategy works only for payment methods supporting authorization and capture semantics and having favorable commission structure. Max amount of time between confirm and capture depends on the payment method as well.<p>Not specific to Stripe Terminals but still. Tapping a card gives you an anonymized payment method while dipping the same card reveals some cardholder data. This is beyond Stripe control, but puzzling at first because at the API level you deal generic PaymentMethod object.<p>With Stripe connect what happens after the payment is defined in terms of abstract transfers between Stripe accounts. In some regions transfers works across countries while not in the others. One example is Canada-USA vs Brazil and rest of the world. From one end you have abstract transfers API to move money between Stripe accounts. From another you have to implement a number of workarounds to make transfers work in all interesting scenarios because of regional and currency conversion considerations. For example in some cases you do transfers while in other you do payment intents.<p>What I’m trying to say here is you have to know specifics of payment methods, underlying technologies and regions you work with. By looking at high-level API you may think it is easy to support many payment methods when in fact many of them would require very specific code.</div><br/></div></div></div></div></div></div><div id="40164999" class="c"><input type="checkbox" id="c-40164999" checked=""/><div class="controls bullet"><span class="by">shironandonon_</span><span>|</span><a href="#40163485">prev</a><span>|</span><a href="#40163424">next</a><span>|</span><label class="collapse" for="c-40164999">[-]</label><label class="expand" for="c-40164999">[2 more]</label></div><br/><div class="children"><div class="content">TLDR: we are special and created our own standard.</div><br/><div id="40166634" class="c"><input type="checkbox" id="c-40166634" checked=""/><div class="controls bullet"><span class="by">ngrilly</span><span>|</span><a href="#40164999">parent</a><span>|</span><a href="#40163424">next</a><span>|</span><label class="collapse" for="c-40166634">[-]</label><label class="expand" for="c-40166634">[1 more]</label></div><br/><div class="children"><div class="content">They are saying the opposite: we follow existing standards as much as possible.</div><br/></div></div></div></div><div id="40163424" class="c"><input type="checkbox" id="c-40163424" checked=""/><div class="controls bullet"><span class="by">andrewstuart</span><span>|</span><a href="#40164999">prev</a><span>|</span><label class="collapse" for="c-40163424">[-]</label><label class="expand" for="c-40163424">[4 more]</label></div><br/><div class="children"><div class="content">I hate abstractions.  Program the thing as it is intended.<p>Why do programmers always need a library between them and the API?</div><br/><div id="40163689" class="c"><input type="checkbox" id="c-40163689" checked=""/><div class="controls bullet"><span class="by">Jtsummers</span><span>|</span><a href="#40163424">parent</a><span>|</span><label class="collapse" for="c-40163689">[-]</label><label class="expand" for="c-40163689">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Why do programmers always need a library between them and the API?<p>You do know that libraries present an API, right? Very few people program on Linux or other OSes without using libc or the OS&#x2F;distribution equivalent, and for good reason. Those libraries provide a degree of compatibility across hardware systems and operating systems (and even the same OS but different versions).<p>Your question is about as sensible as asking &quot;Why do programmers always need a programming language between them and the machine code?&quot; Because it improves portability, reusability, reasonability, and on and on. Though, since you hate abstractions, maybe you do only program in machine code.</div><br/><div id="40164109" class="c"><input type="checkbox" id="c-40164109" checked=""/><div class="controls bullet"><span class="by">koreth1</span><span>|</span><a href="#40163424">root</a><span>|</span><a href="#40163689">parent</a><span>|</span><label class="collapse" for="c-40164109">[-]</label><label class="expand" for="c-40164109">[2 more]</label></div><br/><div class="children"><div class="content">I kind of hate the fact that the term &quot;API&quot; has lost its generality in the minds of a huge number of practitioners, and people now assume it refers to a set of network (usually HTTP) request and response formats.<p>It&#x27;s great that we have a succinct word to describe programmatic interfaces built on top of HTTP. It&#x27;s not great that there&#x27;s no longer a universally-understood word for the original more general meaning even though, as this thread demonstrates, the original meaning is still as relevant as ever.</div><br/><div id="40164694" class="c"><input type="checkbox" id="c-40164694" checked=""/><div class="controls bullet"><span class="by">compootr</span><span>|</span><a href="#40163424">root</a><span>|</span><a href="#40164109">parent</a><span>|</span><label class="collapse" for="c-40164694">[-]</label><label class="expand" for="c-40164694">[1 more]</label></div><br/><div class="children"><div class="content">I think context has to be taken into account<p>people here are referring to some financial service on the internet, whose API is invoked over http<p>An article about some library might be viewed differently, i.e &quot;X&#x27;s API is better than Z&#x27;s&quot;...etc</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>