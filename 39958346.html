<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1712480451597" as="style"/><link rel="stylesheet" href="styles.css?v=1712480451597"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://gitlab.com/esr/autodafe">Autodafe: Tools for freeing your project from the clammy grip of autotools</a>Â <span class="domain">(<a href="https://gitlab.com">gitlab.com</a>)</span></div><div class="subtext"><span>shrubble</span> | <span>34 comments</span></div><br/><div><div id="39958512" class="c"><input type="checkbox" id="c-39958512" checked=""/><div class="controls bullet"><span class="by">buserror</span><span>|</span><a href="#39958618">next</a><span>|</span><label class="collapse" for="c-39958512">[-]</label><label class="expand" for="c-39958512">[8 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been building distros for years, and the most wasteful part of it is running zillions of auto<i>.</i> process that waste most of the build time of each projects looking for mostly the same things.<p>I always thought it was insane. Perhaps it was a good idea 30 years ago when we were actually building for dozens of &#x27;unstable&#x27; variants of UNIX with a dozen compilers, but these days?<p>And yes, MOST projects can be compiled just fine with a 2 pages Makefile, more often than not with -j for parallel build, and as a bonus, won&#x27;t keep around a dozen turd files.<p>Oh also, it is supposed to help &#x27;portability&#x27; but MOST of my time is wasted trying to fix autotools configs when it invariably break in some new interesting and arcane ways.</div><br/><div id="39958738" class="c"><input type="checkbox" id="c-39958738" checked=""/><div class="controls bullet"><span class="by">zokier</span><span>|</span><a href="#39958512">parent</a><span>|</span><a href="#39958779">next</a><span>|</span><label class="collapse" for="c-39958738">[-]</label><label class="expand" for="c-39958738">[2 more]</label></div><br/><div class="children"><div class="content">I doubt there are many new greenfield autotools using projects popping up around. So the question is not really if one should use autotools or not, but if projects should spend effort migrating away from working autotools setup which inevitably is also a breaking change for downstream consumers. And framing it like that it is suddenly much more difficult question, especially as that migration often might be quite non-trivial</div><br/><div id="39959294" class="c"><input type="checkbox" id="c-39959294" checked=""/><div class="controls bullet"><span class="by">kosolam</span><span>|</span><a href="#39958512">root</a><span>|</span><a href="#39958738">parent</a><span>|</span><a href="#39958779">next</a><span>|</span><label class="collapse" for="c-39959294">[-]</label><label class="expand" for="c-39959294">[1 more]</label></div><br/><div class="children"><div class="content">A graceful migration path should be implemented over a long period to allow downstream enough time to process the changes.</div><br/></div></div></div></div><div id="39958779" class="c"><input type="checkbox" id="c-39958779" checked=""/><div class="controls bullet"><span class="by">wewxjfq</span><span>|</span><a href="#39958512">parent</a><span>|</span><a href="#39958738">prev</a><span>|</span><a href="#39958618">next</a><span>|</span><label class="collapse" for="c-39958779">[-]</label><label class="expand" for="c-39958779">[5 more]</label></div><br/><div class="children"><div class="content">Dealing with a zillion of handwritten Makefiles sounds more hellish than dealing with autotools. These Makefiles will be more fickle, too. I&#x27;m not seeing a convenience win.</div><br/><div id="39958889" class="c"><input type="checkbox" id="c-39958889" checked=""/><div class="controls bullet"><span class="by">josephg</span><span>|</span><a href="#39958512">root</a><span>|</span><a href="#39958779">parent</a><span>|</span><a href="#39959382">next</a><span>|</span><label class="collapse" for="c-39958889">[-]</label><label class="expand" for="c-39958889">[2 more]</label></div><br/><div class="children"><div class="content">Are we talking about the same autotools? I&#x27;m getting flashbacks to running into some weird bash error in my configure file on line 3563. Where the configure script in question was generated by autoconf, automake, aclocal and all that jazz. Or autoconf mysteriously failing after automake works, or some similar nightmare. When autotools go wrong, trying to fix it feels like trying to breathe while you&#x27;re held underwater.<p>I&#x27;m sure part of the problem is I don&#x27;t understand autotools as well as I could. But when &quot;build expertise in autotools&quot; is on the table, stabbing my eyes out with a fork starts to seem like an appealing option.<p>Suffice it to say, I prefer to work with handwritten makefiles.</div><br/><div id="39959186" class="c"><input type="checkbox" id="c-39959186" checked=""/><div class="controls bullet"><span class="by">fl7305</span><span>|</span><a href="#39958512">root</a><span>|</span><a href="#39958889">parent</a><span>|</span><a href="#39959382">next</a><span>|</span><label class="collapse" for="c-39959186">[-]</label><label class="expand" for="c-39959186">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not sure what the best solution is, but I agree on the pain dealing with autotools when they fail. Shotgun debugging where you start poking at things randomly can work for some stuff, but never works here.<p>After working on many different software libraries and frameworks, my firm belief is that you really need to understand the lower layers to use and troubleshoot them effectively.<p>Best case scenario there are excellent error messages and you can easily review logfiles to understand the root cause of the problem.<p>But that is rarely the case. Instead you have to have a detailed mental model of the library&#x2F;framework you&#x27;re using, and you must be able to quickly picture what it will do internally for the inputs that you give it.<p>Once you get to that point, many bugs don&#x27;t appear in the first place because you immediately see that the input&#x2F;usage doesn&#x27;t make sense. And the bugs that do happen become much easier to figure out from the output and cryptic error messages you get.<p>All this to say that it is really unappealing to work on things like bugs in someone else&#x27;s autotool scripts. I just want to compile the program to run it. I don&#x27;t want to spend months of my life to understand the inner workings of autotools.</div><br/></div></div></div></div><div id="39959382" class="c"><input type="checkbox" id="c-39959382" checked=""/><div class="controls bullet"><span class="by">maxcoder4</span><span>|</span><a href="#39958512">root</a><span>|</span><a href="#39958779">parent</a><span>|</span><a href="#39958889">prev</a><span>|</span><a href="#39958841">next</a><span>|</span><label class="collapse" for="c-39959382">[-]</label><label class="expand" for="c-39959382">[1 more]</label></div><br/><div class="children"><div class="content">I never got the hate for Makefiles. Granted I mostly use them for simple projects, but compiling C project takes just a few lines of code (compile .c to .o, .o to executable, optionally provide some PHONY convenience utils) and is very readable and hackable. What&#x27;s not to love?<p>I&#x27;m sure I&#x27;m missing something, and it&#x27;s possible that they don&#x27;t scale well, but I prefer it to any other could system for small C projects.</div><br/></div></div><div id="39958841" class="c"><input type="checkbox" id="c-39958841" checked=""/><div class="controls bullet"><span class="by">vidarh</span><span>|</span><a href="#39958512">root</a><span>|</span><a href="#39958779">parent</a><span>|</span><a href="#39959382">prev</a><span>|</span><a href="#39958618">next</a><span>|</span><label class="collapse" for="c-39958841">[-]</label><label class="expand" for="c-39958841">[1 more]</label></div><br/><div class="children"><div class="content">You dealing with a zillion handwritten configuration files anyway, just hidden behind autotools in ways that most developers are even more clueless about than we are about makefiles.</div><br/></div></div></div></div></div></div><div id="39958618" class="c"><input type="checkbox" id="c-39958618" checked=""/><div class="controls bullet"><span class="by">nanolith</span><span>|</span><a href="#39958512">prev</a><span>|</span><a href="#39958903">next</a><span>|</span><label class="collapse" for="c-39958618">[-]</label><label class="expand" for="c-39958618">[3 more]</label></div><br/><div class="children"><div class="content">I agree that autotools is often overkill, but I don&#x27;t think the answer for most project is to force users to have to manually edit Makefiles.<p>Feature detection is a good thing, but tools like CMake or Meson do a better job at this, in my opinion.<p>I have done minimal GNU Make builds for large software projects before. In these cases, the main Makefile will depend on a file that is created after a one-time dependency check is done just to ensure that the build environment is sane. This file will exist until `make mrproper` is run, like any other build config file. I&#x27;m not personally a fan of monorepos, so instead, project dependencies that aren&#x27;t already installed on the build machine&#x2F;vm&#x2F;container or that aren&#x27;t a supported version will be automatically downloaded, configured, and installed in the build directory as part of the build process. Even with this sort of complexity, I adamantly believe that the average developer &#x2F; user should just be able to type `make` and get either a useful error message or a working build. Likewise, I believe that the build scripts should be human readable, well, assuming that one has read through the GNU Make manual at least.<p>These days, I have more or less standardized on one-shot CMake scripts for my personal projects. They will only check that the current build configuration has any dependencies already installed (e.g. via `PKG_CONFIG_PATH`), which allows for more intelligent scripting by downstream maintainers. The scripts themselves don&#x27;t have any significant surprises and largely avoid patterns that can&#x27;t be searched for using a search engine. This makes it easier for me to maintain cross-platform builds, at least across *nix. I haven&#x27;t really tested Win10 &#x2F; Win11 builds recently, but should.</div><br/><div id="39958904" class="c"><input type="checkbox" id="c-39958904" checked=""/><div class="controls bullet"><span class="by">viraptor</span><span>|</span><a href="#39958618">parent</a><span>|</span><a href="#39958699">next</a><span>|</span><label class="collapse" for="c-39958904">[-]</label><label class="expand" for="c-39958904">[1 more]</label></div><br/><div class="children"><div class="content">&gt; but tools like CMake or Meson do a better job at this, in my opinion.<p>Not much experience with Meson, but as a package maintainer, I really hate cmake. It&#x27;s got the most of my &quot;why isn&#x27;t it calling it to pkg-config properly&quot; debugging hours. Maybe it&#x27;s easier to write, but finding what a specific option does through the forest of macros and pages of &quot;this can do 10 different things&quot; documentation and how it interacts with the rest of the system is not my favourite thing...</div><br/></div></div><div id="39958699" class="c"><input type="checkbox" id="c-39958699" checked=""/><div class="controls bullet"><span class="by">cryo</span><span>|</span><a href="#39958618">parent</a><span>|</span><a href="#39958904">prev</a><span>|</span><a href="#39958903">next</a><span>|</span><label class="collapse" for="c-39958699">[-]</label><label class="expand" for="c-39958699">[1 more]</label></div><br/><div class="children"><div class="content">After a long period of rejecting CMake for &quot;simple&quot; build.sh and Makefile projects, nowadays CMake is my goto choice. Top features:<p>- supports all kinds of compilers, even Watcom for DOS and Windows &lt;all versions&gt; projects.<p>- cross platform compiliation inlc. MSVC<p>- my #1 feature wide IDE support + usage from command line.</div><br/></div></div></div></div><div id="39958903" class="c"><input type="checkbox" id="c-39958903" checked=""/><div class="controls bullet"><span class="by">jgrahamc</span><span>|</span><a href="#39958618">prev</a><span>|</span><a href="#39958539">next</a><span>|</span><label class="collapse" for="c-39958903">[-]</label><label class="expand" for="c-39958903">[2 more]</label></div><br/><div class="children"><div class="content">Autotools treats Makefiles like they are object code. We should promote Makefiles to being source code in a project and learn how to write them. The need for autotools died long, long ago when there were so many different platforms people were trying to support.</div><br/><div id="39959152" class="c"><input type="checkbox" id="c-39959152" checked=""/><div class="controls bullet"><span class="by">iforgotpassword</span><span>|</span><a href="#39958903">parent</a><span>|</span><a href="#39958539">next</a><span>|</span><label class="collapse" for="c-39959152">[-]</label><label class="expand" for="c-39959152">[1 more]</label></div><br/><div class="children"><div class="content">But but but<p>&quot;Checking whether compiler supports int... yes&quot;</div><br/></div></div></div></div><div id="39958539" class="c"><input type="checkbox" id="c-39958539" checked=""/><div class="controls bullet"><span class="by">CJefferson</span><span>|</span><a href="#39958903">prev</a><span>|</span><a href="#39958921">next</a><span>|</span><label class="collapse" for="c-39958539">[-]</label><label class="expand" for="c-39958539">[5 more]</label></div><br/><div class="children"><div class="content">I approve of the concept, but I don&#x27;t think this isn&#x27;t the answer.<p>For a start, it says if you want to install into non-standard directories, or enable&#x2F;disable options, you need to &quot;edit your makefile&quot;. That isn&#x27;t going to work for distributions, and I don&#x27;t want to go to telling people to edit the makefile to change options on my program.<p>Also, in my experience most autotools scripts do <i>something</i>, maybe dealing with inconsistent linker flags on mac vs linux, or enabling&#x2F;disabling some debug option, or saying where to find some library (and optionally allowing building without said library).<p>Coming up with some very simple format for configure scripts which are easy to read, and which do some simple search+replace substitution on a Makefile seems very sensible, and would get rid of awful autotools, is a great goal however.</div><br/><div id="39958706" class="c"><input type="checkbox" id="c-39958706" checked=""/><div class="controls bullet"><span class="by">francescovv</span><span>|</span><a href="#39958539">parent</a><span>|</span><a href="#39958878">next</a><span>|</span><label class="collapse" for="c-39958706">[-]</label><label class="expand" for="c-39958706">[3 more]</label></div><br/><div class="children"><div class="content">&gt; you need to &quot;edit your makefile&quot;. That isn&#x27;t going to work for distributions<p>Is it not? [st] requires exactly that. And it works for distros, from what I can tell - debian&#x2F;ubuntu, arch, almost everybody seem to ship it just fine.<p>[st] <a href="https:&#x2F;&#x2F;st.suckless.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;st.suckless.org&#x2F;</a></div><br/><div id="39958741" class="c"><input type="checkbox" id="c-39958741" checked=""/><div class="controls bullet"><span class="by">CJefferson</span><span>|</span><a href="#39958539">root</a><span>|</span><a href="#39958706">parent</a><span>|</span><a href="#39958878">next</a><span>|</span><label class="collapse" for="c-39958741">[-]</label><label class="expand" for="c-39958741">[2 more]</label></div><br/><div class="children"><div class="content">OK, maybe &quot;not work well for distributions&quot;?<p>Looking at Debian, they are distributing a series of patches to the Makefile. Getting away from autotools by having every distro patch your makefile might still be better than autotools, but I&#x27;d hope we might be able to do even better?</div><br/><div id="39958875" class="c"><input type="checkbox" id="c-39958875" checked=""/><div class="controls bullet"><span class="by">francescovv</span><span>|</span><a href="#39958539">root</a><span>|</span><a href="#39958741">parent</a><span>|</span><a href="#39958878">next</a><span>|</span><label class="collapse" for="c-39958875">[-]</label><label class="expand" for="c-39958875">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Debian (...) are distributing a series of patches to the Makefile.<p>Where do you see that, sorry? I&#x27;m looking at the &quot;Download Source Package&quot; section here:<p><a href="https:&#x2F;&#x2F;packages.debian.org&#x2F;sid&#x2F;stterm" rel="nofollow">https:&#x2F;&#x2F;packages.debian.org&#x2F;sid&#x2F;stterm</a><p>...and the only patch on there is debian&#x2F;patches&#x2F;0001-fix-buffer-overflow-when-handling-long-composed-inpu.patch, which doesn&#x27;t touch Makefie.</div><br/></div></div></div></div></div></div><div id="39958878" class="c"><input type="checkbox" id="c-39958878" checked=""/><div class="controls bullet"><span class="by">bonzini</span><span>|</span><a href="#39958539">parent</a><span>|</span><a href="#39958706">prev</a><span>|</span><a href="#39958921">next</a><span>|</span><label class="collapse" for="c-39958878">[-]</label><label class="expand" for="c-39958878">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Coming up with some very simple format for configure scripts which are easy to read, and which do some simple search+replace substitution on a Makefile seems very sensible, and would get rid of awful autotools, is a great goal however.<p>That&#x27;s CMake or Meson. Personally I prefer Meson because it gets rid of more cruftâat the cost of being more opinionated, but if it worked for projects as large as QEMU or PostgreSQL it probably will work for you.<p>Also, even if you don&#x27;t need to detect standard headers or features (and there are still differences between Linux, BSDs and Darwin even if they&#x27;re smaller than they used to be) you will almost surely need pkg-config support, and that makes ESR&#x27;s solution inadequate without manual work.</div><br/></div></div></div></div><div id="39958921" class="c"><input type="checkbox" id="c-39958921" checked=""/><div class="controls bullet"><span class="by">PhilipRoman</span><span>|</span><a href="#39958539">prev</a><span>|</span><a href="#39958911">next</a><span>|</span><label class="collapse" for="c-39958921">[-]</label><label class="expand" for="c-39958921">[1 more]</label></div><br/><div class="children"><div class="content">Anecdotal evidence but I work on a large number of C repositories and autotools is by far the most common cause of build related issues. Hand written makefiles are typically the easiest to debug. Note that this doesn&#x27;t include makefile-based systems like Buildroot or Linux kernel makefiles. I don&#x27;t consider them good examples due to the stateful config file management.<p>My golden standard for building a project is the &quot;empty makefile&quot; only containing definitions for CFLAGS and LDFLAGS.</div><br/></div></div><div id="39958911" class="c"><input type="checkbox" id="c-39958911" checked=""/><div class="controls bullet"><span class="by">iainmerrick</span><span>|</span><a href="#39958921">prev</a><span>|</span><a href="#39958887">next</a><span>|</span><label class="collapse" for="c-39958911">[-]</label><label class="expand" for="c-39958911">[2 more]</label></div><br/><div class="children"><div class="content">Very clever name, although I hope the tool isnât as extreme as its namesake! See <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Auto-da-fÃ©" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Auto-da-fÃ©</a></div><br/><div id="39959374" class="c"><input type="checkbox" id="c-39959374" checked=""/><div class="controls bullet"><span class="by">croisillon</span><span>|</span><a href="#39958911">parent</a><span>|</span><a href="#39958887">next</a><span>|</span><label class="collapse" for="c-39959374">[-]</label><label class="expand" for="c-39959374">[1 more]</label></div><br/><div class="children"><div class="content">Not sure if the name is so clever. For me autodafe is akin to pogrom or, at a bigger level, holocaust. Not sure i want to use tools called like that.</div><br/></div></div></div></div><div id="39958887" class="c"><input type="checkbox" id="c-39958887" checked=""/><div class="controls bullet"><span class="by">bhaak</span><span>|</span><a href="#39958911">prev</a><span>|</span><a href="#39958691">next</a><span>|</span><label class="collapse" for="c-39958887">[-]</label><label class="expand" for="c-39958887">[1 more]</label></div><br/><div class="children"><div class="content">Standards are good. Replacing standard autoconf with handedited Makefiles is going back to dark practices from the 20th century when this tool actually wants to &quot;throw away the 20th century&quot;.</div><br/></div></div><div id="39958448" class="c"><input type="checkbox" id="c-39958448" checked=""/><div class="controls bullet"><span class="by">db48x</span><span>|</span><a href="#39958691">prev</a><span>|</span><a href="#39958501">next</a><span>|</span><label class="collapse" for="c-39958448">[-]</label><label class="expand" for="c-39958448">[2 more]</label></div><br/><div class="children"><div class="content">Heh, wish I&#x27;d thought of that.</div><br/><div id="39958484" class="c"><input type="checkbox" id="c-39958484" checked=""/><div class="controls bullet"><span class="by">zoky</span><span>|</span><a href="#39958448">parent</a><span>|</span><a href="#39958501">next</a><span>|</span><label class="collapse" for="c-39958484">[-]</label><label class="expand" for="c-39958484">[1 more]</label></div><br/><div class="children"><div class="content">Itâs what you oughtnât to do, but you do anyway!</div><br/></div></div></div></div><div id="39958501" class="c"><input type="checkbox" id="c-39958501" checked=""/><div class="controls bullet"><span class="by">szundi</span><span>|</span><a href="#39958448">prev</a><span>|</span><a href="#39958537">next</a><span>|</span><label class="collapse" for="c-39958501">[-]</label><label class="expand" for="c-39958501">[1 more]</label></div><br/><div class="children"><div class="content">Feature creep will do this one too</div><br/></div></div><div id="39958537" class="c"><input type="checkbox" id="c-39958537" checked=""/><div class="controls bullet"><span class="by">rurban</span><span>|</span><a href="#39958501">prev</a><span>|</span><label class="collapse" for="c-39958537">[-]</label><label class="expand" for="c-39958537">[7 more]</label></div><br/><div class="children"><div class="content">How naive!<p>&gt; every C99&#x2F;POSIX system supports the entry points they are guarding<p>The most popular compiler, msvc, still cannot support C99&#x2F;POSIX.
And some of my Makefile only projects still probes for features stored in a config.h<p>Good luck with destroying our infrastructure.</div><br/><div id="39959342" class="c"><input type="checkbox" id="c-39959342" checked=""/><div class="controls bullet"><span class="by">camel-cdr</span><span>|</span><a href="#39958537">parent</a><span>|</span><a href="#39958567">next</a><span>|</span><label class="collapse" for="c-39959342">[-]</label><label class="expand" for="c-39959342">[1 more]</label></div><br/><div class="children"><div class="content">Almost nobody writes POSIX make, the vast majority of makefiles use GNU make extensions.</div><br/></div></div><div id="39958567" class="c"><input type="checkbox" id="c-39958567" checked=""/><div class="controls bullet"><span class="by">Too</span><span>|</span><a href="#39958537">parent</a><span>|</span><a href="#39959342">prev</a><span>|</span><a href="#39958810">next</a><span>|</span><label class="collapse" for="c-39958567">[-]</label><label class="expand" for="c-39958567">[2 more]</label></div><br/><div class="children"><div class="content">For a long time this was true but recently MS turned around and is now supposedly supporting even C17.<p><a href="https:&#x2F;&#x2F;devblogs.microsoft.com&#x2F;cppblog&#x2F;c11-and-c17-standard-support-arriving-in-msvc&#x2F;" rel="nofollow">https:&#x2F;&#x2F;devblogs.microsoft.com&#x2F;cppblog&#x2F;c11-and-c17-standard-...</a></div><br/><div id="39959330" class="c"><input type="checkbox" id="c-39959330" checked=""/><div class="controls bullet"><span class="by">camel-cdr</span><span>|</span><a href="#39958537">root</a><span>|</span><a href="#39958567">parent</a><span>|</span><a href="#39958810">next</a><span>|</span><label class="collapse" for="c-39959330">[-]</label><label class="expand" for="c-39959330">[1 more]</label></div><br/><div class="children"><div class="content">Meanwhile you still need to add a special compilation flag to get a c89 and above compatible preprocessor: <a href="https:&#x2F;&#x2F;learn.microsoft.com&#x2F;en-us&#x2F;cpp&#x2F;build&#x2F;reference&#x2F;zc-preprocessor?view=msvc-170" rel="nofollow">https:&#x2F;&#x2F;learn.microsoft.com&#x2F;en-us&#x2F;cpp&#x2F;build&#x2F;reference&#x2F;zc-pre...</a></div><br/></div></div></div></div><div id="39958810" class="c"><input type="checkbox" id="c-39958810" checked=""/><div class="controls bullet"><span class="by">MaulingMonkey</span><span>|</span><a href="#39958537">parent</a><span>|</span><a href="#39958567">prev</a><span>|</span><a href="#39958783">next</a><span>|</span><label class="collapse" for="c-39958810">[-]</label><label class="expand" for="c-39958810">[2 more]</label></div><br/><div class="children"><div class="content">&gt; entry points<p>I was curious where this was from, so I looked at <a href="https:&#x2F;&#x2F;gitlab.com&#x2F;esr&#x2F;autodafe&#x2F;-&#x2F;blob&#x2F;master&#x2F;de-autoconfiscation.adoc?ref_type=heads#user-content-deconditionalize-c99posix-features" rel="nofollow">https:&#x2F;&#x2F;gitlab.com&#x2F;esr&#x2F;autodafe&#x2F;-&#x2F;blob&#x2F;master&#x2F;de-autoconfisc...</a><p>As someone who targets clang&#x2F;gcc&#x2F;msvc&#x2F;icc, I don&#x27;t see much value in these defines.  Let&#x27;s pick on HAVE_STRDUP: what&#x27;s the point?<p>If it&#x27;s always defined on your target platforms, just use the stdlib unconditionally - the define is pointless.<p>If it&#x27;s never defined on your target platforms, you&#x27;ll have to roll an alternative of your own no matter what - the define is pointless.<p>So the presumed theoretical use case for this is if you <i>sometimes</i> want to define your own, and <i>sometimes</i> want to use the standard library.  But do I actually want that?  Rarely.  <i>Very</i> rarely.  If I care to target old systems, I&#x27;d generally rather unconditionally define my own version that doesn&#x27;t conflict with the standard library, that gets tested and used in all builds on all platforms - it&#x27;ll be less code than adding a bunch of #ifdef soup, and it&#x27;ll be less brittle - no &quot;works on my machine but fails on the build server&quot; nonsense because of a typo in sometimes-dead code.<p>That leaves one <i>even narrower</i> use case which isn&#x27;t entirely theoretical: wanting to backport a modern codebase to an &quot;ancient&quot; toolchain&#x2F;stdlib via polyfills without touching the modern codebase <i>or</i> the toolchain&#x2F;stdlib.  That approach has it&#x27;s niches, but... it <i>is</i> worth emphasizing, <i>niches</i>.</div><br/><div id="39958869" class="c"><input type="checkbox" id="c-39958869" checked=""/><div class="controls bullet"><span class="by">vidarh</span><span>|</span><a href="#39958537">root</a><span>|</span><a href="#39958810">parent</a><span>|</span><a href="#39958783">next</a><span>|</span><label class="collapse" for="c-39958869">[-]</label><label class="expand" for="c-39958869">[1 more]</label></div><br/><div class="children"><div class="content">There are <i>some</i> few cases where I&#x27;d probably prefer the &quot;standard&quot; version where available: memcpy etc. that are often extensively optimised, and that are a lot of work to write a non-naive version off that performs well. But I agree that most of the time you categorically should not use feature detection like that, and in the few cases you&#x27;re dealing with systems lacking things <i>that basic</i> you have bigger problems...</div><br/></div></div></div></div><div id="39958783" class="c"><input type="checkbox" id="c-39958783" checked=""/><div class="controls bullet"><span class="by">jraph</span><span>|</span><a href="#39958537">parent</a><span>|</span><a href="#39958810">prev</a><span>|</span><label class="collapse" for="c-39958783">[-]</label><label class="expand" for="c-39958783">[1 more]</label></div><br/><div class="children"><div class="content">Do one run .&#x2F;configure on Windows to compile with msvc?<p>(genuine question, not familiar with this)</div><br/></div></div></div></div></div></div></div></div></div></body></html>