<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1736758873826" as="style"/><link rel="stylesheet" href="styles.css?v=1736758873826"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://valatka.dev/2025/01/12/on-killer-uv-feature.html">Uv&#x27;s killer feature is making ad-hoc environments easy</a>Â <span class="domain">(<a href="https://valatka.dev">valatka.dev</a>)</span></div><div class="subtext"><span>astronautas</span> | <span>285 comments</span></div><br/><div><div id="42676837" class="c"><input type="checkbox" id="c-42676837" checked=""/><div class="controls bullet"><span class="by">nharada</span><span>|</span><a href="#42679226">next</a><span>|</span><label class="collapse" for="c-42676837">[-]</label><label class="expand" for="c-42676837">[127 more]</label></div><br/><div class="children"><div class="content">I really like uv, and it&#x27;s the first package manager for a while where I haven&#x27;t felt like it&#x27;s a minor improvement on what I&#x27;m using but ultimately something better will come out a year or two later. I&#x27;d love if we standardized on it as a community as the de facto default, especially for new folks coming in. I personally now recommend it to nearly everyone, instead of the &quot;welllll I use poetry but pyenv works or you could use conda too&quot;</div><br/><div id="42676849" class="c"><input type="checkbox" id="c-42676849" checked=""/><div class="controls bullet"><span class="by">poincaredisk</span><span>|</span><a href="#42676837">parent</a><span>|</span><a href="#42677745">next</a><span>|</span><label class="collapse" for="c-42676849">[-]</label><label class="expand" for="c-42676849">[108 more]</label></div><br/><div class="children"><div class="content">I never used anything other than pip. I never felt the need to use anything other than pip (with virtualenv). Am I missing anything?</div><br/><div id="42677048" class="c"><input type="checkbox" id="c-42677048" checked=""/><div class="controls bullet"><span class="by">NeutralCrane</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676849">parent</a><span>|</span><a href="#42676958">next</a><span>|</span><label class="collapse" for="c-42677048">[-]</label><label class="expand" for="c-42677048">[31 more]</label></div><br/><div class="children"><div class="content">Couple of things.<p>- pip doesn&#x27;t handle your Python executable, just your Python dependencies. So if you want&#x2F;need to swap between Python versions (3.11 to 3.12 for example), it doesn&#x27;t give you anything. Generally people use an additional tool such as pyenv to manage this. Tools like uv and Poetry do this as well as handling dependencies<p>- pip doesn&#x27;t resolve dependencies of dependencies. pip will only respect version pinning for dependencies you explicitly specify. So for example, say I am using pandas and I pin it to version X. If a dependency of pandas (say, numpy) isn&#x27;t pinned as well, the underlying version of numpy can still change when I reinstall dependencies. I&#x27;ve had many issues where my environment stopped working despite none of my specified dependencies changing, because underlying dependencies introduced breaking changes. To get around this with pip you would need an additional tool like pip-tools, which allows you to pin all dependencies, explicit and nested, to a lock file for true reproducibility. uv and poetry do this out of the box.<p>- Tool usage. Say there is a python package you want to use across many environments without installing in the environments themselves (such as a linting tool like ruff). With pip, you need to install another tool like pipx to install something that can be used across environments. uv can do this out of the box.<p>Plus there is a whole host of jobs that tools like uv and poetry aim to assist with that pip doesn&#x27;t, namely project creation and management. You can use uv to create a new Python project scaffolding for applications or python modules in a way that conforms with PEP standards with a single command. It also supports workspaces of multiple projects that have separate functionality but require dependencies to be in sync.<p>You can accomplish a lot&#x2F;all of this using pip with additional tooling, but its a lot more work. And not all use cases will require these.</div><br/><div id="42678209" class="c"><input type="checkbox" id="c-42678209" checked=""/><div class="controls bullet"><span class="by">driggs</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677048">parent</a><span>|</span><a href="#42677793">next</a><span>|</span><label class="collapse" for="c-42678209">[-]</label><label class="expand" for="c-42678209">[19 more]</label></div><br/><div class="children"><div class="content">Yes, generally people already use an additional tool for managing their Python executables, like their operating system&#x27;s package manager:<p><pre><code>  $&gt; sudo apt-get install python3.10 python3.11 python3.12
</code></pre>
And then it&#x27;s simple to create and use version-specific virtual environments:<p><pre><code>  $&gt; python3.11 -m venv .venv3.11
  $&gt; source .venv3.11&#x2F;bin&#x2F;activate
  $&gt; pip install -r requirements.txt
</code></pre>
You are incorrect about needing to use an additional tool to install a &quot;global&quot; tool like `ruff`; `pip` does this <i>by default</i> when you&#x27;re not using a virtual environment. In fact, this behavior is made more difficult by tools like `uv` if or `pipx` they&#x27;re trying to manage Python executables as well as dependencies.</div><br/><div id="42678362" class="c"><input type="checkbox" id="c-42678362" checked=""/><div class="controls bullet"><span class="by">athrun</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42678209">parent</a><span>|</span><a href="#42679235">next</a><span>|</span><label class="collapse" for="c-42678362">[-]</label><label class="expand" for="c-42678362">[11 more]</label></div><br/><div class="children"><div class="content">&gt; sudo apt-get install python3.10 python3.11 python3.12<p>This assumes the Python version you need is available from your package manager&#x27;s repo. This won&#x27;t work if you want a Python version either newer or older than what is available.<p>&gt; You are incorrect about needing to use an additional tool to install a &quot;global&quot; tool like `ruff`; `pip` does this by default when you&#x27;re not using a virtual environment.<p>True, but it&#x27;s not best practice to do that because while the tool gets installed globally, it is not necessarily linked to a specific python version, and so it&#x27;s extremely brittle.<p>And it gets even more complex if you need different tools that have different Python version requirements.</div><br/><div id="42678716" class="c"><input type="checkbox" id="c-42678716" checked=""/><div class="controls bullet"><span class="by">coldtea</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42678362">parent</a><span>|</span><a href="#42680391">next</a><span>|</span><label class="collapse" for="c-42678716">[-]</label><label class="expand" for="c-42678716">[4 more]</label></div><br/><div class="children"><div class="content">&gt;<i>This assumes the Python version you need is available from your package manager&#x27;s repo. This won&#x27;t work if you want a Python version either newer or older than what is available.</i><p>And of course you could be working with multiple distros and versions of the same distro, production and dev might be different environment and tons of others concerns. You need something that just works across.</div><br/><div id="42678850" class="c"><input type="checkbox" id="c-42678850" checked=""/><div class="controls bullet"><span class="by">nightpool</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42678716">parent</a><span>|</span><a href="#42680391">next</a><span>|</span><label class="collapse" for="c-42678850">[-]</label><label class="expand" for="c-42678850">[3 more]</label></div><br/><div class="children"><div class="content">Surely you just use Docker for production, right?</div><br/><div id="42680477" class="c"><input type="checkbox" id="c-42680477" checked=""/><div class="controls bullet"><span class="by">nicoburns</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42678850">parent</a><span>|</span><a href="#42680537">next</a><span>|</span><label class="collapse" for="c-42680477">[-]</label><label class="expand" for="c-42680477">[1 more]</label></div><br/><div class="children"><div class="content">You almost need to use Docker for deploying Python <i>because</i> the tooling is so bad that it&#x27;s otherwise very difficult to get a reproducible environment. For many other languages the tooling works well enough that there&#x27;s relatively little advantage to be had from Docker (although you can of course still use it).</div><br/></div></div><div id="42680537" class="c"><input type="checkbox" id="c-42680537" checked=""/><div class="controls bullet"><span class="by">wombatpm</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42678850">parent</a><span>|</span><a href="#42680477">prev</a><span>|</span><a href="#42680391">next</a><span>|</span><label class="collapse" for="c-42680537">[-]</label><label class="expand" for="c-42680537">[1 more]</label></div><br/><div class="children"><div class="content">And how do you know everything is ok when you build your new docker image?</div><br/></div></div></div></div></div></div><div id="42680391" class="c"><input type="checkbox" id="c-42680391" checked=""/><div class="controls bullet"><span class="by">mixmastamyk</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42678362">parent</a><span>|</span><a href="#42678716">prev</a><span>|</span><a href="#42679674">next</a><span>|</span><label class="collapse" for="c-42680391">[-]</label><label class="expand" for="c-42680391">[2 more]</label></div><br/><div class="children"><div class="content">&gt;&gt; You are incorrect about needing to use an additional tool to install a &quot;global&quot; tool like `ruff`; `pip` does this by default when you&#x27;re not using a virtual environment.<p>&gt;True, but it&#x27;s not best practice to do that because while the tool gets installed globally, it is not necessarily linked to a specific python version, and so it&#x27;s extremely brittle.<p>&quot;Globally&quot; means installed with sudo.  These are installed into the user folder under ~&#x2F;.local&#x2F; and called a user install by pip.<p>I wouldn&#x27;t call it &quot;extremely brittle&quot; either.  It works fine until you upgrade to a new version of python, in which case you install the package again.  Happens once a year perhaps.<p>The good part of this is that unused cruft will get left behind and then you can delete old folders in ~&#x2F;.local&#x2F;lib&#x2F;python3.? etc.  I&#x27;ve been doing this over a decade without issue.</div><br/><div id="42681298" class="c"><input type="checkbox" id="c-42681298" checked=""/><div class="controls bullet"><span class="by">lmm</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42680391">parent</a><span>|</span><a href="#42679674">next</a><span>|</span><label class="collapse" for="c-42681298">[-]</label><label class="expand" for="c-42681298">[1 more]</label></div><br/><div class="children"><div class="content">&gt; It works fine until you upgrade to a new version of python, in which case you install the package again.<p>Or you install a second global tool that depends on an incompatible version of a library.</div><br/></div></div></div></div><div id="42679674" class="c"><input type="checkbox" id="c-42679674" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42678362">parent</a><span>|</span><a href="#42680391">prev</a><span>|</span><a href="#42679235">next</a><span>|</span><label class="collapse" for="c-42679674">[-]</label><label class="expand" for="c-42679674">[4 more]</label></div><br/><div class="children"><div class="content">&gt; pip doesn&#x27;t resolve dependencies of dependencies.<p>This is simply incorrect. In fact the reason it gets stuck on resolution sometimes is <i>exactly because</i> it resolved transitive dependencies and found that they were mutually incompatible.<p>Here&#x27;s an example which will also help illustrate the rest of my reply. I make a venv for Python 3.8, and set up a new project with a deliberately poorly-thought-out pyproject.toml:<p><pre><code>  [project]
  name=&quot;example&quot;
  version=&quot;0.1.0&quot;
  dependencies=[&quot;pandas==2.0.3&quot;, &quot;numpy==1.17.3&quot;]
</code></pre>
I&#x27;ve specified the oldest version of Numpy that has a manylinux wheel for Python 3.8 and the newest version of Pandas similarly. These are both acceptable for the venv separately, but mutually incompatible on purpose.<p>When I try to `pip install -e .` in the venv, Pip happily explains (granted the first line is a bit strange):<p><pre><code>  ERROR: Cannot install example and example==0.1.0 because these package versions have conflicting dependencies.

  The conflict is caused by:
      example 0.1.0 depends on numpy==1.17.3
      pandas 2.0.3 depends on numpy&gt;=1.20.3; python_version &lt; &quot;3.10&quot;

  To fix this you could try to:
  1. loosen the range of package versions you&#x27;ve specified
  2. remove package versions to allow pip to attempt to solve the dependency conflict
</code></pre>
If I change the Numpy pin to 1.20.3, that&#x27;s the version that gets installed. (`python-dateutil`, `pytz`, `six` and `tzdata` are also installed.) If I remove the Numpy requirement completely and start over, Numpy 1.24.4 is installed instead - the latest version compatible with Pandas&#x27; transitive specification of the dependency. Similarly if I unpin Pandas and ask for any version - Pip will try to install the latest version it can, and it turns out that the latest Pandas version that declares compatibility with 3.8, indeed allows for fetching 3.8-compatible dependencies. (Good job not breaking it, Pandas maintainers! Although usually this is trivial, because your dependencies are also actively maintained.)<p>&gt; pip will only respect version pinning for dependencies you explicitly specify. So for example, say I am using pandas and I pin it to version X. If a dependency of pandas (say, numpy) isn&#x27;t pinned as well, the underlying version of numpy can still change when I reinstall dependencies.<p>Well, sure; Pip can&#x27;t respect a version pin that <i>doesn&#x27;t exist anywhere in your project</i>. If the specific version of Pandas you want says that it&#x27;s okay with a range of Numpy versions, then of course Pip has freedom to choose one of those versions. If that matters, you explicitly specify it. Other programs like uv can&#x27;t fix this. They can only choose different resolution strategies, such as &quot;don&#x27;t update the transitive dependency if the environment already contains a compatible version&quot;, versus &quot;try to use the most recent versions of everything that meet the specified compatibility requirements&quot;.<p>&gt; To get around this with pip you would need an additional tool like pip-tools, which allows you to pin all dependencies, explicit and nested, to a lock file for true reproducibility.<p>No, you just use Pip&#x27;s options to determine what&#x27;s already in the environment (`pip list`, `pip freeze` etc.) and pin everything that needs pinning (whether with a Pip requirements file or with `pyproject.toml`). Nothing prevents you from listing your transitive dependencies in e.g. the [project.dependencies] of your pyproject.toml, and if you pin them, Pip will take that constraint into consideration. Lock files are for when you need to care about alternate package sources, checking hashes etc.; or for when you want an explicit representation of your dependency graph in metadata for the sake of other tooling.<p>&gt; This assumes the Python version you need is available from your package manager&#x27;s repo. This won&#x27;t work if you want a Python version either newer or older than what is available.<p>I have built versions 3.5 through 3.13 inclusive from source and have them installed in &#x2F;opt and the binaries symlinked in &#x2F;usr&#x2F;local&#x2F;bin. It&#x27;s not difficult at all.<p>&gt; True, but it&#x27;s not best practice to do that because while the tool gets installed globally, it is not necessarily linked to a specific python version, and so it&#x27;s extremely brittle.<p>What brittleness are you talking about? There&#x27;s no reason why the tool needs to run in the same environment as the code it&#x27;s operating on. You can install it in its own virtual environment, too. Since tools generally are applications, I use Pipx for this (which really just wraps a bit of environment management around Pip). It works great; for example I always have the standard build-frontend `build` (as `pyproject-build`) and the uploader `twine` available. They run from a guaranteed-compatible Python.<p>And they would if they were installed for the system Python, too. (I just, you know, don&#x27;t want to do that because the system Python is the system package manager&#x27;s responsibility.) The separate environment don&#x27;t matter because the tool&#x27;s code and the operated-on project&#x27;s code <i>don&#x27;t even need to run at the same time</i>, let alone in the same process. In fact, it would make no sense to be running the code while actively trying to build or upload it.<p>&gt; And it gets even more complex if you need different tools that have different Python version requirements.<p>No, you just let each tool have the virtual environment it requires. And you can update them in-place in those environments, too.</div><br/><div id="42680097" class="c"><input type="checkbox" id="c-42680097" checked=""/><div class="controls bullet"><span class="by">jshen</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42679674">parent</a><span>|</span><a href="#42679235">next</a><span>|</span><label class="collapse" for="c-42680097">[-]</label><label class="expand" for="c-42680097">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Well, sure; Pip can&#x27;t respect a version pin that doesn&#x27;t exist anywhere in your project. If the specific version of Pandas you want says that it&#x27;s okay with a range of Numpy versions, then of course Pip has freedom to choose one of those versions. If that matters, you explicitly specify it<p>Nearly every other language solves this better than this. What your suggesting breaks down on large projects.</div><br/><div id="42680252" class="c"><input type="checkbox" id="c-42680252" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42680097">parent</a><span>|</span><a href="#42679235">next</a><span>|</span><label class="collapse" for="c-42680252">[-]</label><label class="expand" for="c-42680252">[2 more]</label></div><br/><div class="children"><div class="content">&gt;Nearly every other language solves this better than this.<p>&quot;Nearly every other language&quot; determines the exact version of a library to use for you, when multiple versions would work, without you providing any input with which to make the decision?<p>If you mean &quot;I have had a more pleasant UX with the equivalent tasks in several other programming languages&quot;, that&#x27;s justifiable and common, but not at all the same.<p>&gt;What your suggesting breaks down on large projects.<p>Pinned transitive dependencies are the only meaningful data in a lockfile, unless you have to explicitly protect against supply chain attacks (i.e. use a private package source and&#x2F;or verify hashes).</div><br/><div id="42681454" class="c"><input type="checkbox" id="c-42681454" checked=""/><div class="controls bullet"><span class="by">baq</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42680252">parent</a><span>|</span><a href="#42679235">next</a><span>|</span><label class="collapse" for="c-42681454">[-]</label><label class="expand" for="c-42681454">[1 more]</label></div><br/><div class="children"><div class="content">IMHO the clear separation between lockfile and deps in other package managers was a direct consequence of people being confused about what requirements.txt should be. It can be both and could be for ages (pip freeze) but the defaults were not conductive to clear separation. If we started with lockfile.txt and dependencies.txt, the world may have looked different. Alas.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="42679235" class="c"><input type="checkbox" id="c-42679235" checked=""/><div class="controls bullet"><span class="by">achileas</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42678209">parent</a><span>|</span><a href="#42678362">prev</a><span>|</span><a href="#42679506">next</a><span>|</span><label class="collapse" for="c-42679235">[-]</label><label class="expand" for="c-42679235">[2 more]</label></div><br/><div class="children"><div class="content">Itâs like a whole post of all the things youâre not supposed to do with Python, nice.</div><br/></div></div><div id="42679506" class="c"><input type="checkbox" id="c-42679506" checked=""/><div class="controls bullet"><span class="by">diath</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42678209">parent</a><span>|</span><a href="#42679235">prev</a><span>|</span><a href="#42678393">next</a><span>|</span><label class="collapse" for="c-42679506">[-]</label><label class="expand" for="c-42679506">[1 more]</label></div><br/><div class="children"><div class="content">That assumes that you are using a specific version of a specific Linux distribution that happens to ship specific versions of Python that you are currently targeting. That&#x27;s a big assumption. uv solves this.</div><br/></div></div><div id="42678393" class="c"><input type="checkbox" id="c-42678393" checked=""/><div class="controls bullet"><span class="by">EasyMark</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42678209">parent</a><span>|</span><a href="#42679506">prev</a><span>|</span><a href="#42678565">next</a><span>|</span><label class="collapse" for="c-42678393">[-]</label><label class="expand" for="c-42678393">[1 more]</label></div><br/><div class="children"><div class="content">most developers I know do not use the system version of python. We use an older version at work so that we can maximize what will work for customers and don&#x27;t try to stay on the bleeding edge. I imagine others do want newer versions for features, hence people find products like UV useful</div><br/></div></div><div id="42678565" class="c"><input type="checkbox" id="c-42678565" checked=""/><div class="controls bullet"><span class="by">Fnoord</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42678209">parent</a><span>|</span><a href="#42678393">prev</a><span>|</span><a href="#42680292">next</a><span>|</span><label class="collapse" for="c-42678565">[-]</label><label class="expand" for="c-42678565">[2 more]</label></div><br/><div class="children"><div class="content">(I&#x27;ve just learned about uv, and it looks like I have to pick it up since it performs very well.)<p>I just use pipx. Install guides suggest it, and it is only one character different from pip.<p>With Nix, it is very easy to run multiple versions of same software. The path will always be the same, meaning you can depend on versions. This is nice glue for pipx.<p>My pet peeve with Python and Vim is all these different package managers. Every once in a while a new one is out and I don&#x27;t know if it will gain momentum. For example, I use Plug now in Vim but notice documentation often refers to different alternatives these days. With Python it is pip, poetry, pip search no longer working, pipx, and now uv (I probably forgot some things).</div><br/><div id="42679742" class="c"><input type="checkbox" id="c-42679742" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42678565">parent</a><span>|</span><a href="#42680292">next</a><span>|</span><label class="collapse" for="c-42679742">[-]</label><label class="expand" for="c-42679742">[1 more]</label></div><br/><div class="children"><div class="content">Pipx is a tool for users to install finished applications. It isn&#x27;t intended for installing libraries for further development, and you have to hack around it to make that work. (This <i>does</i> gain you a <i>little bit</i> over using Pip directly.)<p>I just keep separate compiled-from-source versions of Python in a known, logical place; I can trivially create venvs from those directly and have Pip install into them, and pass `--python` to `pipx install`.<p>&gt;With Python it is pip, poetry, pip search no longer working, pipx, and now uv (I probably forgot some things).<p>Of this list, <i>only</i> Poetry and Uv are package managers. Pip is <i>by design, only</i> an installer, and Pipx only adds a bit of environment management to that. A proper package manager also helps you <i>keep track of</i> what you&#x27;ve installed, and either produces some sort of external lock file and&#x2F;or maintains dependency listings in `pyproject.toml`. But both Poetry and Uv go further beyond that as well, aiming to help with the rest of the development workflow (such as building your package for upload to PyPI).<p>If you like Pipx, you might be interested in some tips in my recent blog post (<a href="https:&#x2F;&#x2F;zahlman.github.io&#x2F;posts&#x2F;2025&#x2F;01&#x2F;07&#x2F;python-packaging-2&#x2F;" rel="nofollow">https:&#x2F;&#x2F;zahlman.github.io&#x2F;posts&#x2F;2025&#x2F;01&#x2F;07&#x2F;python-packaging-...</a>). In particular, if you do need to install libraries, you can expose Pipx&#x27;s internal copy of Pip for arbitrary use instead of just for updating the venvs that Pipx created.</div><br/></div></div></div></div></div></div><div id="42677793" class="c"><input type="checkbox" id="c-42677793" checked=""/><div class="controls bullet"><span class="by">kiddico</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677048">parent</a><span>|</span><a href="#42678209">prev</a><span>|</span><a href="#42677924">next</a><span>|</span><label class="collapse" for="c-42677793">[-]</label><label class="expand" for="c-42677793">[1 more]</label></div><br/><div class="children"><div class="content">Sometimes I feel like my up vote doesn&#x27;t adequately express my gratitude.<p>I appreciate how thorough this was.</div><br/></div></div><div id="42677924" class="c"><input type="checkbox" id="c-42677924" checked=""/><div class="controls bullet"><span class="by">stavros</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677048">parent</a><span>|</span><a href="#42677793">prev</a><span>|</span><a href="#42679117">next</a><span>|</span><label class="collapse" for="c-42677924">[-]</label><label class="expand" for="c-42677924">[9 more]</label></div><br/><div class="children"><div class="content">Oh wow, it actually <i>can</i> handle the Python executable? I didn&#x27;t know that, that&#x27;s great! Although it&#x27;s in the article as well, it didn&#x27;t click until you said it, thanks!</div><br/><div id="42680206" class="c"><input type="checkbox" id="c-42680206" checked=""/><div class="controls bullet"><span class="by">meitham</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677924">parent</a><span>|</span><a href="#42679766">next</a><span>|</span><label class="collapse" for="c-42680206">[-]</label><label class="expand" for="c-42680206">[1 more]</label></div><br/><div class="children"><div class="content">I would avoid using this feature!  It downloads a compiled portable python binary from some random github project not from PSF.  That very same github project recommends against using their binary as the compilation flags is set for portability against performance. See <a href="https:&#x2F;&#x2F;gregoryszorc.com&#x2F;docs&#x2F;python-build-standalone&#x2F;main&#x2F;" rel="nofollow">https:&#x2F;&#x2F;gregoryszorc.com&#x2F;docs&#x2F;python-build-standalone&#x2F;main&#x2F;</a></div><br/></div></div><div id="42679766" class="c"><input type="checkbox" id="c-42679766" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677924">parent</a><span>|</span><a href="#42680206">prev</a><span>|</span><a href="#42679117">next</a><span>|</span><label class="collapse" for="c-42679766">[-]</label><label class="expand" for="c-42679766">[7 more]</label></div><br/><div class="children"><div class="content">I still don&#x27;t understand why people want separate tooling to &quot;handle the Python executable&quot;. All you need to do is have one base installation of each version you want, and then make your venv by running the standard library venv for that Python (e.g. `python3.x -m venv .venv`).</div><br/><div id="42679773" class="c"><input type="checkbox" id="c-42679773" checked=""/><div class="controls bullet"><span class="by">stavros</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42679766">parent</a><span>|</span><a href="#42680491">next</a><span>|</span><label class="collapse" for="c-42679773">[-]</label><label class="expand" for="c-42679773">[4 more]</label></div><br/><div class="children"><div class="content">&gt; All you need to do is have one base installation of each version you want<p>Because of this ^</div><br/><div id="42680236" class="c"><input type="checkbox" id="c-42680236" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42679773">parent</a><span>|</span><a href="#42680491">next</a><span>|</span><label class="collapse" for="c-42680236">[-]</label><label class="expand" for="c-42680236">[3 more]</label></div><br/><div class="children"><div class="content">But any tool you use for the task would do that anyway (or set them up temporarily and throw them away). Python on Windows has a standard Windows-friendly installer, and compiling from source on Linux is the standard few calls to `.&#x2F;configure` and `make` that you&#x27;d have with anything else; it runs quite smoothly and you only have to do it once.</div><br/><div id="42680274" class="c"><input type="checkbox" id="c-42680274" checked=""/><div class="controls bullet"><span class="by">_ZeD_</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42680236">parent</a><span>|</span><a href="#42680491">next</a><span>|</span><label class="collapse" for="c-42680274">[-]</label><label class="expand" for="c-42680274">[2 more]</label></div><br/><div class="children"><div class="content">I need to tell you a secret...
I&#x27;m a long-life Linux user (since mandrake!)<p>Also, I don&#x27;t have a c compiler installed.</div><br/><div id="42680364" class="c"><input type="checkbox" id="c-42680364" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42680274">parent</a><span>|</span><a href="#42680491">next</a><span>|</span><label class="collapse" for="c-42680364">[-]</label><label class="expand" for="c-42680364">[1 more]</label></div><br/><div class="children"><div class="content">Really? I was told Mint was supposed to be the kiddie-pool version of Linux, but it gave me GCC and a bunch of common dependencies anyway.<p>(By my understanding, `pyenv install` will expect to be able to run a compiler to build a downloaded Python source tarball. Uv uses prebuilt versions from <a href="https:&#x2F;&#x2F;github.com&#x2F;astral-sh&#x2F;python-build-standalone">https:&#x2F;&#x2F;github.com&#x2F;astral-sh&#x2F;python-build-standalone</a> ; there is work being done in the Python community on a standard for packaging such builds, similarly to wheels, so that you can just use that instead of compiling it yourself. But Python comes out of an old culture where users expect to do that sort of thing.)</div><br/></div></div></div></div></div></div></div></div><div id="42680491" class="c"><input type="checkbox" id="c-42680491" checked=""/><div class="controls bullet"><span class="by">nicoburns</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42679766">parent</a><span>|</span><a href="#42679773">prev</a><span>|</span><a href="#42679854">next</a><span>|</span><label class="collapse" for="c-42680491">[-]</label><label class="expand" for="c-42680491">[1 more]</label></div><br/><div class="children"><div class="content">Having to manually install python versions and create venvs is pretty painful compared to say the Rust tooling where you install rustup once, and then it will automatically choose the correct Rust version for each project based on what that project has configured.<p>UV seems like it provides a lot of that convenience for python.</div><br/></div></div><div id="42679854" class="c"><input type="checkbox" id="c-42679854" checked=""/><div class="controls bullet"><span class="by">gtaylor</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42679766">parent</a><span>|</span><a href="#42680491">prev</a><span>|</span><a href="#42679117">next</a><span>|</span><label class="collapse" for="c-42679854">[-]</label><label class="expand" for="c-42679854">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m glad to let uv handle that for me. It does a pretty good job at it!</div><br/></div></div></div></div></div></div></div></div><div id="42676958" class="c"><input type="checkbox" id="c-42676958" checked=""/><div class="controls bullet"><span class="by">PaulHoule</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676849">parent</a><span>|</span><a href="#42677048">prev</a><span>|</span><a href="#42678894">next</a><span>|</span><label class="collapse" for="c-42676958">[-]</label><label class="expand" for="c-42676958">[20 more]</label></div><br/><div class="children"><div class="content">pip&#x27;s resolving algorithm is not sound.  If your Python projects are really simple it seems to work but as your projects get more complex the failure rate creeps up over time.  You might<p><pre><code>   pip install
</code></pre>
something and have it fail and then go back to zero and restart and have it work but at some point that will fail.  conda has a correct resolving algorithm but the packages are out of date and add about as many quality problems as they fix.<p>I worked at a place where the engineering manager was absolutely exasperated with the problems we were having with building and deploying AI&#x2F;ML software in Python.  I had figured out pretty much all the problems after about nine months and had developed a &#x27;wheelhouse&#x27; procedure for building our system reliably,  but it was too late.<p>Not long after I sketched out a system that was a lot like uv but it was written in Python and thus had problems with maintaining its own stable Python enivronment (e.g. poetry seems to trash itself every six months or so.)<p>Writing uv in Rust was genius because it eliminates that problem of the system having a stable surface to stand on instead of pipping itself into oblivion,  never mind that it is much faster than my system would have been.  (My system had the extra feature that it used http range requests to extract the metadata from wheel files before pypi started letting you download the metadata directly.)<p>I didn&#x27;t go forward with developing it because I argued with a lot of people who,  like you,  thought it was &quot;the perfect being the enemy of the good&quot; when it was really &quot;the incorrect being the enemy of the correct.&quot;  I&#x27;d worked on plenty of projects where I was right about the technology and wrong about the politics and I am so happy that uv has saved the Python community from itself.</div><br/><div id="42677049" class="c"><input type="checkbox" id="c-42677049" checked=""/><div class="controls bullet"><span class="by">MadnessASAP</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676958">parent</a><span>|</span><a href="#42680040">next</a><span>|</span><label class="collapse" for="c-42677049">[-]</label><label class="expand" for="c-42677049">[9 more]</label></div><br/><div class="children"><div class="content">May I introduce you to our lord and saviour, Nix and it&#x27;s most holy child nixpkgs! With only a small tithing of your sanity and ability to Interop with any other dependency management you can free yourself of all dependency woes forever<i>!<p>[</i>] For various broad* definitions of forever.<p>[*] Like, really, really broad**<p>[**] Maybe a week if you&#x27;re lucky</div><br/><div id="42677445" class="c"><input type="checkbox" id="c-42677445" checked=""/><div class="controls bullet"><span class="by">p_l</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677049">parent</a><span>|</span><a href="#42678728">next</a><span>|</span><label class="collapse" for="c-42677445">[-]</label><label class="expand" for="c-42677445">[4 more]</label></div><br/><div class="children"><div class="content">Except python builders in nixpkgs are really brain damaged because of the writers ways they inject search path which for example breaks if you try to execute a separate python interpreter assuming same library environment...</div><br/><div id="42677794" class="c"><input type="checkbox" id="c-42677794" checked=""/><div class="controls bullet"><span class="by">MadnessASAP</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677445">parent</a><span>|</span><a href="#42678728">next</a><span>|</span><label class="collapse" for="c-42677794">[-]</label><label class="expand" for="c-42677794">[3 more]</label></div><br/><div class="children"><div class="content">Within the holy church of Nix the sect of Python is troubled one, it can however be tamed into use via vast tomes of scripture. Sadly these times can only be written by those you have truly given their mind and body over to the almighty Nix.</div><br/><div id="42678133" class="c"><input type="checkbox" id="c-42678133" checked=""/><div class="controls bullet"><span class="by">p_l</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677794">parent</a><span>|</span><a href="#42678728">next</a><span>|</span><label class="collapse" for="c-42678133">[-]</label><label class="expand" for="c-42678133">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not as bad as Common Lisp support which stinks to high heavens of someone not learning the lessons of the Common-Lisp-Controller fiasco</div><br/><div id="42679120" class="c"><input type="checkbox" id="c-42679120" checked=""/><div class="controls bullet"><span class="by">MadnessASAP</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42678133">parent</a><span>|</span><a href="#42678728">next</a><span>|</span><label class="collapse" for="c-42679120">[-]</label><label class="expand" for="c-42679120">[1 more]</label></div><br/><div class="children"><div class="content">Lisp is of the old gods, only the most brave of Nix brethren dare tread upon their parenthesised ways.</div><br/></div></div></div></div></div></div></div></div><div id="42678728" class="c"><input type="checkbox" id="c-42678728" checked=""/><div class="controls bullet"><span class="by">coldtea</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677049">parent</a><span>|</span><a href="#42677445">prev</a><span>|</span><a href="#42677750">next</a><span>|</span><label class="collapse" for="c-42678728">[-]</label><label class="expand" for="c-42678728">[1 more]</label></div><br/><div class="children"><div class="content">&gt;<i>May I introduce you to our lord and saviour, Nix and it&#x27;s most holy child nixpkgs!</i><p>In this case, instead of working with Python, you change how you manage everything!</div><br/></div></div><div id="42677750" class="c"><input type="checkbox" id="c-42677750" checked=""/><div class="controls bullet"><span class="by">chpatrick</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677049">parent</a><span>|</span><a href="#42678728">prev</a><span>|</span><a href="#42677332">next</a><span>|</span><label class="collapse" for="c-42677750">[-]</label><label class="expand" for="c-42677750">[1 more]</label></div><br/><div class="children"><div class="content">Nix is really the best experience I&#x27;ve had with Python package management but only if all the dependencies are already in nixpkgs. If you want to quickly try something off github it&#x27;s usually a pain in the ass.</div><br/></div></div><div id="42677332" class="c"><input type="checkbox" id="c-42677332" checked=""/><div class="controls bullet"><span class="by">benatkin</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677049">parent</a><span>|</span><a href="#42677750">prev</a><span>|</span><a href="#42680040">next</a><span>|</span><label class="collapse" for="c-42677332">[-]</label><label class="expand" for="c-42677332">[2 more]</label></div><br/><div class="children"><div class="content">The Nix of Python, conda, was already mentioned.<p>&gt; add about as many quality problems as they fix</div><br/><div id="42677810" class="c"><input type="checkbox" id="c-42677810" checked=""/><div class="controls bullet"><span class="by">MadnessASAP</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677332">parent</a><span>|</span><a href="#42680040">next</a><span>|</span><label class="collapse" for="c-42677810">[-]</label><label class="expand" for="c-42677810">[1 more]</label></div><br/><div class="children"><div class="content">I used to have 1 problem, then I used Nix to fix it, now I have &#x27;Error: infinite recursion&#x27; problems.</div><br/></div></div></div></div></div></div><div id="42680040" class="c"><input type="checkbox" id="c-42680040" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676958">parent</a><span>|</span><a href="#42677049">prev</a><span>|</span><a href="#42677381">next</a><span>|</span><label class="collapse" for="c-42680040">[-]</label><label class="expand" for="c-42680040">[1 more]</label></div><br/><div class="children"><div class="content">&gt; You might `pip install` something and have it fail and then go back to zero and restart and have it work but at some point that will fail.<p>Can you give a concrete example, starting from a fresh venv, that causes a failure that shouldn&#x27;t happen?<p>&gt; but it was written in Python and thus had problems with maintaining its own stable Python enivronment<p><i>All</i> it has to do is create an environment for itself upon installation which is compatible with its own code, and be written with the capability of installing into other environments (which basically just requires knowing what version of Python it uses and the appropriate paths - the platform and ABI can be assumed to match the tool, because it&#x27;s running on the same machine).<p>This is fundamentally what uv is doing, implicitly, by not needing a Python environment to run.<p>But it&#x27;s also what the tool I&#x27;m developing, Paper, is going to do explicitly.<p>What&#x27;s more, you can simulate it just fine with Pip. Of course, that doesn&#x27;t solve the issues you had with Pip, but it demonstrates that &quot;maintaining its own stable Python environment&quot; is just not a problem.<p>&gt;Writing uv in Rust was genius because it eliminates that problem of the system having a stable surface to stand on instead of pipping itself into oblivion, never mind that it is much faster than my system would have been.<p>From what I can tell, the speed mainly comes from algorithmic issues, caching etc. Pip is just slow above and beyond anything Python forces on it.<p>An example. On my system, creating a new venv from scratch with Pip included (which loads Pip from within its own vendored wheel, which then runs in order to bootstrap itself into the venv) takes just over 3 seconds. Making a new venv <i>without</i> Pip, then asking a separate copy of Pip to install an already downloaded Pip wheel would be about 1.7 seconds. But making that venv and using the actual internal installation logic of Pip (which has been extracted by Pip developer Pradyun Gedam as <a href="https:&#x2F;&#x2F;github.com&#x2F;pypa&#x2F;installer">https:&#x2F;&#x2F;github.com&#x2F;pypa&#x2F;installer</a> ) would take about 0.25 seconds. (There&#x27;s no command-line API for this; in my test environment I just put the `installer` code side by side with a driver script, which is copied from my development work on Paper.) It presumably could be faster still.<p>I honestly have no idea what Pip is doing the rest of that time. It only needs to unzip an archive and move some files around and perform trivial edits to others.<p>&gt; (My system had the extra feature that it used http range requests to extract the metadata from wheel files before pypi started letting you download the metadata directly.)<p>Pip has had this feature for a long time (and it&#x27;s still there - I think to support legacy projects without wheels, because I think the JSON API won&#x27;t be able to provide the data since PyPI doesn&#x27;t build the source packages). It&#x27;s why the PyPI server supports range requests in the first place.<p>&gt; I&#x27;d worked on plenty of projects where I was right about the technology and wrong about the politics and I am so happy that uv has saved the Python community from itself.<p>The community&#x27;s politics are indeed awful. But Rust (or any other language outside of Python) is not needed to solve the problem.</div><br/></div></div><div id="42677381" class="c"><input type="checkbox" id="c-42677381" checked=""/><div class="controls bullet"><span class="by">morkalork</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676958">parent</a><span>|</span><a href="#42680040">prev</a><span>|</span><a href="#42678894">next</a><span>|</span><label class="collapse" for="c-42677381">[-]</label><label class="expand" for="c-42677381">[9 more]</label></div><br/><div class="children"><div class="content">Ugh, I hate writing this but that&#x27;s where docker and microservices comes to the rescue. It&#x27;s a pain in the butt and inefficient to run but if you don&#x27;t care about the overhead (and if you do care, why are you still using Python?), it works.</div><br/><div id="42677572" class="c"><input type="checkbox" id="c-42677572" checked=""/><div class="controls bullet"><span class="by">PaulHoule</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677381">parent</a><span>|</span><a href="#42678746">next</a><span>|</span><label class="collapse" for="c-42677572">[-]</label><label class="expand" for="c-42677572">[5 more]</label></div><br/><div class="children"><div class="content">My experience was that docker was a tool data scientists would use to speedrun the process of finding broken Pythons.  For instance we&#x27;d inexplicably find a Python had Hungarian as the default charset, etc.<p>The formula was<p><pre><code>   - Docker - Discipline = Chaos
   Docker - Discipline = Chaos
   Docker + Discipline = Order
</code></pre>
but<p><pre><code>   - Docker + Discipline = Order
</code></pre>
If you can write a Dockerfile to install something you can write a bash script.  Circa 2006 I was running web servers on both Linux and Windows with hundreds of web sites on them with various databases,  etc.  It really was simple then as &quot;configure a filesystem path&quot; and &quot;configure a database connection&quot; and I had scripts that could create a site in 30 seconds or so.<p>Sure today you might have five or six different databases for a site but it&#x27;s not that different in my mind.  Having way too many different versions of things installed is a vice, not a virtue.</div><br/><div id="42679285" class="c"><input type="checkbox" id="c-42679285" checked=""/><div class="controls bullet"><span class="by">macNchz</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677572">parent</a><span>|</span><a href="#42678119">next</a><span>|</span><label class="collapse" for="c-42679285">[-]</label><label class="expand" for="c-42679285">[1 more]</label></div><br/><div class="children"><div class="content">&gt; If you can write a Dockerfile to install something you can write a bash script.<p>Docker is great for making sure that magic bash script that brings the system up actually works again on someone elseâs computer or after a big upgrade on your dev machine or whatever.<p>So many custom build scripts Iâve run into over the years have some kind of unstated dependency on the initial system they were written on, or explicit dependencies on something tricky to install, and as such are <i>really annoying</i> to diagnose later on, especially if they make significant system changes.<p>Docker is strictly better than a folder full of bash scripts and a Readme.txt. I would have loved having it when I had to operate servers like that with tons of websites running on them. So much nicer to be able to manage dependency upgrades per-site rather than server-wide, invariably causing something to quietly break on one of 200 sites.</div><br/></div></div><div id="42678119" class="c"><input type="checkbox" id="c-42678119" checked=""/><div class="controls bullet"><span class="by">p_l</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677572">parent</a><span>|</span><a href="#42679285">prev</a><span>|</span><a href="#42678756">next</a><span>|</span><label class="collapse" for="c-42678119">[-]</label><label class="expand" for="c-42678119">[1 more]</label></div><br/><div class="children"><div class="content">Unfortunately sometimes you get to host things not written by you, or which exist for a long time and thus there&#x27;s a lot of history involved that prevents nice and tidy.<p>My first production use of kubernetes started out because we put in the entirety of what we had to migrate to new hosting into spreadsheet, with columns for various parts of stack used by the websites, and figured we would go insane trying to pack it up - or we would lose the contract because we would be as expensive as the last company.<p>Could we package it nicely without docker? Yes, but the effort to package it in docker was smaller than packaging it in a way where it wouldn&#x27;t conflict on a single host, because the simple script becomes way harder when you need to handle multiple versions of the same package, something that most distro do not support at all (these days I think we could have done it with NixOS, but that&#x27;s a different kettle of deranged fishes)<p>And then the complexity of managing the stack was quickly made easier by turning each site into separate artifact (docker container) handled by k8s manifests (especially when it came to dealing with about 1000 domains across those apps).<p>So, theoretically discipline is enough, practical world is much dirtier though.</div><br/></div></div><div id="42678756" class="c"><input type="checkbox" id="c-42678756" checked=""/><div class="controls bullet"><span class="by">coldtea</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677572">parent</a><span>|</span><a href="#42678119">prev</a><span>|</span><a href="#42678746">next</a><span>|</span><label class="collapse" for="c-42678756">[-]</label><label class="expand" for="c-42678756">[2 more]</label></div><br/><div class="children"><div class="content">&gt;<i>For instance we&#x27;d inexplicably find a Python had Hungarian as the default charset, etc.</i><p>Sounds quite explicable: Docker image created by Hungarian devs perhaps?</div><br/><div id="42679834" class="c"><input type="checkbox" id="c-42679834" checked=""/><div class="controls bullet"><span class="by">PaulHoule</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42678756">parent</a><span>|</span><a href="#42678746">next</a><span>|</span><label class="collapse" for="c-42679834">[-]</label><label class="expand" for="c-42679834">[1 more]</label></div><br/><div class="children"><div class="content">My understanding is that UTF-8 is the world&#x27;s charset and that reasonable Hungarians would use that (e.g. I sure don&#x27;t use us-ascii or iso-latin-1 if I can at all help it.  I mean my &quot;better half&quot; reads ä¸­æ so I don&#x27;t have to and having it all in UTF-8 makes it easy)  The other mystery is how the data sci&#x27;s found it.</div><br/></div></div></div></div></div></div><div id="42678746" class="c"><input type="checkbox" id="c-42678746" checked=""/><div class="controls bullet"><span class="by">coldtea</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677381">parent</a><span>|</span><a href="#42677572">prev</a><span>|</span><a href="#42680026">next</a><span>|</span><label class="collapse" for="c-42678746">[-]</label><label class="expand" for="c-42678746">[1 more]</label></div><br/><div class="children"><div class="content">&gt;<i>and if you do care, why are you still using Python?</i><p>Because I get other advantages of it. Giving in to overhead on one layer, doesn&#x27;t mean I&#x27;m willing to give it up everywhere.</div><br/></div></div><div id="42680026" class="c"><input type="checkbox" id="c-42680026" checked=""/><div class="controls bullet"><span class="by">kussenverboten</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677381">parent</a><span>|</span><a href="#42678746">prev</a><span>|</span><a href="#42680133">next</a><span>|</span><label class="collapse" for="c-42680026">[-]</label><label class="expand" for="c-42680026">[1 more]</label></div><br/><div class="children"><div class="content">Docker will make it work, but is a heavy solution as it will happily take up GB of your disk. uv is a more efficient and elegant option.</div><br/></div></div><div id="42680133" class="c"><input type="checkbox" id="c-42680133" checked=""/><div class="controls bullet"><span class="by">fulafel</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677381">parent</a><span>|</span><a href="#42680026">prev</a><span>|</span><a href="#42678894">next</a><span>|</span><label class="collapse" for="c-42680133">[-]</label><label class="expand" for="c-42680133">[1 more]</label></div><br/><div class="children"><div class="content">Yes, another sound reason to use microservices. &#x2F;s</div><br/></div></div></div></div></div></div><div id="42678894" class="c"><input type="checkbox" id="c-42678894" checked=""/><div class="controls bullet"><span class="by">ppierald</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676849">parent</a><span>|</span><a href="#42676958">prev</a><span>|</span><a href="#42676900">next</a><span>|</span><label class="collapse" for="c-42678894">[-]</label><label class="expand" for="c-42678894">[3 more]</label></div><br/><div class="children"><div class="content">Respectively, yes.
The ability to create venvs so fast, that it becomes a silent operation that the end user never thinks about anymore.
The dependency management and installation is lightning quick.
It deals with all of the python versioning<p>and I think a killer feature is the ability to inline dependencies in your Python source code, then use: uv tool run &lt;scriptname&gt;<p>Your script code would like:<p>#!&#x2F;usr&#x2F;bin&#x2F;env -S uv run --script
# &#x2F;&#x2F;&#x2F; script
# requires-python = &quot;&gt;=3.12&quot;
# dependencies = [
#     &quot;...&quot;,
#     &quot;...&quot;
# ]
# &#x2F;&#x2F;&#x2F;<p>Then uv will make a new venv, install the dependencies, and execute the script faster than you think. The first run is a bit slower due to downloads and etc, but the second and subsequent runs are a bunch of internal symlink shuffling.<p>It is really interesting. You should at least take a look at a YT or something. I think you will be impressed.<p>Good luck!</div><br/><div id="42680126" class="c"><input type="checkbox" id="c-42680126" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42678894">parent</a><span>|</span><a href="#42676900">next</a><span>|</span><label class="collapse" for="c-42680126">[-]</label><label class="expand" for="c-42680126">[2 more]</label></div><br/><div class="children"><div class="content">&gt;Respectively, yes. The ability to create venvs so fast, that it becomes a silent operation that the end user never thinks about anymore.<p>I might just blow your mind here:<p><pre><code>  $ time python -m venv with-pip

  real 0m3.248s
  user 0m3.016s
  sys 0m0.219s
  $ time python -m venv --without-pip without-pip

  real 0m0.054s
  user 0m0.046s
  sys 0m0.009s
</code></pre>
The thing that actually takes time is installing Pip into the venv. I already have local demonstrations that this installation can be an order of magnitude faster in native Python. But it&#x27;s also completely unnecessary to do that:<p><pre><code>  $ source without-pip&#x2F;bin&#x2F;activate
  (without-pip) $ ~&#x2F;.local&#x2F;bin&#x2F;pip --python `which python` install package-installation-test
  Collecting package-installation-test
    Using cached package_installation_test-1.0.0-py3-none-any.whl.metadata (3.1 kB)
  Using cached package_installation_test-1.0.0-py3-none-any.whl (3.1 kB)
  Installing collected packages: package-installation-test
  Successfully installed package-installation-test-1.0.0
</code></pre>
I have wrappers for this, of course (and I&#x27;m explicitly showing the path to a separate Pip that&#x27;s already on my path for demonstration purposes).<p>&gt; a killer feature is the ability to inline dependencies in your Python source code, then use: uv tool run &lt;scriptname&gt;<p>Yes, Uv implements PEP 723 &quot;Inline Script Metadata&quot; (<a href="https:&#x2F;&#x2F;peps.python.org&#x2F;pep-0723&#x2F;" rel="nofollow">https:&#x2F;&#x2F;peps.python.org&#x2F;pep-0723&#x2F;</a>) - originally the idea of Paul Moore from the Pip dev team, whose competing PEP 722 lost out (see <a href="https:&#x2F;&#x2F;discuss.python.org&#x2F;t&#x2F;_&#x2F;29905" rel="nofollow">https:&#x2F;&#x2F;discuss.python.org&#x2F;t&#x2F;_&#x2F;29905</a>). He&#x27;s been talking about a feature like this for quite a while, although I can&#x27;t easily find the older discussion. He seems to consider it out of scope for Pip, but it&#x27;s also available in Pipx as of version 1.4.2 (<a href="https:&#x2F;&#x2F;pipx.pypa.io&#x2F;stable&#x2F;CHANGELOG&#x2F;" rel="nofollow">https:&#x2F;&#x2F;pipx.pypa.io&#x2F;stable&#x2F;CHANGELOG&#x2F;</a>).<p>&gt; The first run is a bit slower due to downloads and etc, but the second and subsequent runs are a bunch of internal symlink shuffling.<p>Part of why Pip is slow at this is because it <i>insists</i> on checking PyPI for newer versions even if it has something cached, and because its internal cache is designed to simulate an Internet connection and go through all the usual metadata parsing etc. instead of just storing the wheels directly. But it&#x27;s also just slow at actually installing packages when it already has the wheel.<p>In principle, nothing prevents a Python program from doing caching sensibly and from shuffling symlinks around.</div><br/><div id="42680573" class="c"><input type="checkbox" id="c-42680573" checked=""/><div class="controls bullet"><span class="by">matsemann</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42680126">parent</a><span>|</span><a href="#42676900">next</a><span>|</span><label class="collapse" for="c-42680573">[-]</label><label class="expand" for="c-42680573">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not the &quot;runtime&quot; that&#x27;s slow for me with pip, but all the steps needed. My biggest gripe with python is you need to basically be an expert in different tools to get a random project running. Uv solves this. Just uv run the script and it works.<p>I don&#x27;t care if pip technically can do something. The fact that I explicitly have to mess around with venvs and the stuff is already enough mental overhead that I disregard it.<p>I&#x27;m a python programmer at my job, and I&#x27;ve hated the tooling for years. Uv is the first time I actually like working with python.</div><br/></div></div></div></div></div></div><div id="42676900" class="c"><input type="checkbox" id="c-42676900" checked=""/><div class="controls bullet"><span class="by">amluto</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676849">parent</a><span>|</span><a href="#42678894">prev</a><span>|</span><a href="#42676932">next</a><span>|</span><label class="collapse" for="c-42676900">[-]</label><label class="expand" for="c-42676900">[1 more]</label></div><br/><div class="children"><div class="content">If you switch to uv, youâll have fewer excuses to take coffee breaks while waiting for pip to do its thing. :)</div><br/></div></div><div id="42676932" class="c"><input type="checkbox" id="c-42676932" checked=""/><div class="controls bullet"><span class="by">mosselman</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676849">parent</a><span>|</span><a href="#42676900">prev</a><span>|</span><a href="#42680144">next</a><span>|</span><label class="collapse" for="c-42676932">[-]</label><label class="expand" for="c-42676932">[5 more]</label></div><br/><div class="children"><div class="content">I am not a python developer, but sometimes I use python projects. This puts me in a position where I need to get stuff working while knowing almost nothing about how python package management works.<p>Also I donât recognise errors and I donât know which python versions generally work well with what.<p>Iâve had it happen so often with pip that Iâd have something setup just fine. Letâs say some stable diffusion ui. Then some other month I want to experiment with something like airbyte. Canât get it working at all. Then some days later I think, letâs generate an image. Only to find out that with pip installing all sorts of stuff for airbyte, Iâve messed up my stable diffusion install somehow.<p>Uv clicked right away for me and I donât have any of these issues.<p>Was I using pip and asdf incorrectly before? Probably. Was it worth learning how to do it properly in the previous way? Nope. So uv is really great for me.</div><br/><div id="42677594" class="c"><input type="checkbox" id="c-42677594" checked=""/><div class="controls bullet"><span class="by">hyeonwho4</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676932">parent</a><span>|</span><a href="#42677673">next</a><span>|</span><label class="collapse" for="c-42677594">[-]</label><label class="expand" for="c-42677594">[3 more]</label></div><br/><div class="children"><div class="content">This is not just a pip problem. I had the problem with anaconda a few years ago where upgrading the built in editor (spyder?) pulled versions of packages which broke my ML code, or made dependencies impossible to reconsile. It was a mess, wasting hours of time. Since then I use one pip venv for each project and just never update dependencies.</div><br/><div id="42680449" class="c"><input type="checkbox" id="c-42680449" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677594">parent</a><span>|</span><a href="#42677673">next</a><span>|</span><label class="collapse" for="c-42680449">[-]</label><label class="expand" for="c-42680449">[2 more]</label></div><br/><div class="children"><div class="content">Spyder isn&#x27;t built-in; IDLE comes with Python (unless you get it via Debian, at least), but is not separately upgradable (as the underlying `idlelib` is part of the standard library).<p>If upgrading Spyder broke your environment, that&#x27;s presumably because you were using the same environment that Spyder itself was in. (Spyder is also implemented in Python, as the name suggests.) However, IDEs for Python also like to try to do environment management for you (which may conflict with other tools you want to use specifically for the purpose). That&#x27;s one of the reasons I just edit my code in Vim.<p>If updating dependencies breaks your code, it&#x27;s ultimately the fault of the dependency (and their maintainers will in turn blame you for not paying attention to their deprecation warnings).</div><br/><div id="42680594" class="c"><input type="checkbox" id="c-42680594" checked=""/><div class="controls bullet"><span class="by">matsemann</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42680449">parent</a><span>|</span><a href="#42677673">next</a><span>|</span><label class="collapse" for="c-42680594">[-]</label><label class="expand" for="c-42680594">[1 more]</label></div><br/><div class="children"><div class="content">You&#x27;re all over the thread defending the standard python tools, which is fine, it works for you. But the amount of times you&#x27;ve had to write that something is natively supported already or people is just using it wrong speaks volumes about why people prefer uv: it just works without having to learn loads of stuff.</div><br/></div></div></div></div></div></div><div id="42677673" class="c"><input type="checkbox" id="c-42677673" checked=""/><div class="controls bullet"><span class="by">loxias</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676932">parent</a><span>|</span><a href="#42677594">prev</a><span>|</span><a href="#42680144">next</a><span>|</span><label class="collapse" for="c-42677673">[-]</label><label class="expand" for="c-42677673">[1 more]</label></div><br/><div class="children"><div class="content">My life got a lot easier since I adopted the habit of making a shell script, using buildah and podman, that wrapped every python, rust, or golang project I wanted to dabble with.<p>It&#x27;s so simple!<p>Create a image with the dependencies, then `podman run` it.</div><br/></div></div></div></div><div id="42680144" class="c"><input type="checkbox" id="c-42680144" checked=""/><div class="controls bullet"><span class="by">__mharrison__</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676849">parent</a><span>|</span><a href="#42676932">prev</a><span>|</span><a href="#42676913">next</a><span>|</span><label class="collapse" for="c-42680144">[-]</label><label class="expand" for="c-42680144">[1 more]</label></div><br/><div class="children"><div class="content">I was in your boat too. Been using Python since 2000 and pretty satisfied with venv and pip.<p>However, the speed alone is reason enough to switch. Try it once and you will be sold.</div><br/></div></div><div id="42676913" class="c"><input type="checkbox" id="c-42676913" checked=""/><div class="controls bullet"><span class="by">markerz</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676849">parent</a><span>|</span><a href="#42680144">prev</a><span>|</span><a href="#42677323">next</a><span>|</span><label class="collapse" for="c-42676913">[-]</label><label class="expand" for="c-42676913">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, it unifies the whole env experience with the package installation experience.  No more forgetting to activate virtualenv first.  No more pip installing into the wrong virtual env or accidentally borrowing from the system packages.  Itâs way easier to specify which version of python to use.  Everything is version controlled including python version and variant like cpython, puppy, etc.  itâs also REALLY REALLY fast.</div><br/></div></div><div id="42677323" class="c"><input type="checkbox" id="c-42677323" checked=""/><div class="controls bullet"><span class="by">benreesman</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676849">parent</a><span>|</span><a href="#42676913">prev</a><span>|</span><a href="#42676890">next</a><span>|</span><label class="collapse" for="c-42677323">[-]</label><label class="expand" for="c-42677323">[1 more]</label></div><br/><div class="children"><div class="content">Performance and correctness mostly.</div><br/></div></div><div id="42676890" class="c"><input type="checkbox" id="c-42676890" checked=""/><div class="controls bullet"><span class="by">mplewis</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676849">parent</a><span>|</span><a href="#42677323">prev</a><span>|</span><a href="#42676917">next</a><span>|</span><label class="collapse" for="c-42676890">[-]</label><label class="expand" for="c-42676890">[25 more]</label></div><br/><div class="children"><div class="content">Pip only has requirements.txt and doesn&#x27;t have lockfiles, so you can&#x27;t guarantee that the bugs you&#x27;re seeing on your system are the same as the bugs on your production system.</div><br/><div id="42676938" class="c"><input type="checkbox" id="c-42676938" checked=""/><div class="controls bullet"><span class="by">aidos</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676890">parent</a><span>|</span><a href="#42678352">next</a><span>|</span><label class="collapse" for="c-42676938">[-]</label><label class="expand" for="c-42676938">[8 more]</label></div><br/><div class="children"><div class="content">Iâve always worked around that by having a requirements.base.txt and a requirements.txt for the locked versions. Obviously pip doesnât do that for you but itâs not hard to manage yourself.<p>Having said that, Iâm going to give uv a shot because I hear so many good things about it.</div><br/><div id="42677959" class="c"><input type="checkbox" id="c-42677959" checked=""/><div class="controls bullet"><span class="by">selcuka</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676938">parent</a><span>|</span><a href="#42678659">next</a><span>|</span><label class="collapse" for="c-42677959">[-]</label><label class="expand" for="c-42677959">[2 more]</label></div><br/><div class="children"><div class="content">With pip the best practice is to have a requirements.txt with direct requirements (strictly or loosely pinned), and a separate constraints.txt file [1] with strictly pinned versions of all direct- and sub-dependencies (basically the output of `pip freeze`). The latter works like a lock file.<p>[1] <a href="https:&#x2F;&#x2F;pip.pypa.io&#x2F;en&#x2F;stable&#x2F;user_guide&#x2F;#constraints-files" rel="nofollow">https:&#x2F;&#x2F;pip.pypa.io&#x2F;en&#x2F;stable&#x2F;user_guide&#x2F;#constraints-files</a></div><br/><div id="42680493" class="c"><input type="checkbox" id="c-42680493" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677959">parent</a><span>|</span><a href="#42678659">next</a><span>|</span><label class="collapse" for="c-42680493">[-]</label><label class="expand" for="c-42680493">[1 more]</label></div><br/><div class="children"><div class="content">For direct requirements you&#x27;re better off using the `pyproject.toml` for direct dependencies (and you <i>can</i> plausibly use it to pin everything if you&#x27;re developing an application). It&#x27;s project metadata that you&#x27;ll need anyway for building your project, and the &quot;editable wheel&quot; hack allows Pip to use that information to set up an environment for your code (via `pip install -e .`).</div><br/></div></div></div></div><div id="42678659" class="c"><input type="checkbox" id="c-42678659" checked=""/><div class="controls bullet"><span class="by">remram</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676938">parent</a><span>|</span><a href="#42677959">prev</a><span>|</span><a href="#42676985">next</a><span>|</span><label class="collapse" for="c-42678659">[-]</label><label class="expand" for="c-42678659">[2 more]</label></div><br/><div class="children"><div class="content">This works until you need to upgrade something, pip might upgrade to a broken set of dependencies. Or if you run on a different OS and the dependencies are different there (because of env markers), your requirements file won&#x27;t capture that. There are a lot of gotchas that pip can&#x27;t fix.</div><br/><div id="42680526" class="c"><input type="checkbox" id="c-42680526" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42678659">parent</a><span>|</span><a href="#42676985">next</a><span>|</span><label class="collapse" for="c-42680526">[-]</label><label class="expand" for="c-42680526">[1 more]</label></div><br/><div class="children"><div class="content">&gt; pip might upgrade to a broken set of dependencies.<p>I&#x27;m only aware of examples where it&#x27;s the fault of the packages - i.e. they specify dependency version ranges that don&#x27;t actually work for them (or stop working for them when a new version of the dependency is released). No tool can do anything about that on the user&#x27;s end.<p>&gt; Or if you run on a different OS and the dependencies are different there (because of env markers), your requirements file won&#x27;t capture that. There are a lot of gotchas that pip can&#x27;t fix.<p>The requirements.txt format is literally just command-line arguments to Pip, which means you can in fact specific the env markers you need there. They&#x27;re part of the <a href="https:&#x2F;&#x2F;peps.python.org&#x2F;pep-0508&#x2F;" rel="nofollow">https:&#x2F;&#x2F;peps.python.org&#x2F;pep-0508&#x2F;</a> syntax which you can use on the Pip command line. Demo:<p><pre><code>  $ pip install &#x27;numpy;python_version&lt;=&quot;2.7&quot;&#x27;
  Ignoring numpy: markers &#x27;python_version &lt;= &quot;2.7&quot;&#x27; don&#x27;t match your environment
</code></pre>
&gt; There are a lot of gotchas that pip can&#x27;t fix.<p>There <i>are</i> a lot of serious problems with Pip - I just don&#x27;t think these are among them.</div><br/></div></div></div></div><div id="42676985" class="c"><input type="checkbox" id="c-42676985" checked=""/><div class="controls bullet"><span class="by">mikepurvis</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676938">parent</a><span>|</span><a href="#42678659">prev</a><span>|</span><a href="#42678352">next</a><span>|</span><label class="collapse" for="c-42676985">[-]</label><label class="expand" for="c-42676985">[3 more]</label></div><br/><div class="children"><div class="content">Iâm grouchy because I finally got religion on poetry a few years ago, but the hype on uv is good enough that Iâll have to give it a shot.</div><br/><div id="42677212" class="c"><input type="checkbox" id="c-42677212" checked=""/><div class="controls bullet"><span class="by">kstrauser</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676985">parent</a><span>|</span><a href="#42678676">next</a><span>|</span><label class="collapse" for="c-42677212">[-]</label><label class="expand" for="c-42677212">[1 more]</label></div><br/><div class="children"><div class="content">I freaking love Poetry. It was a huge breath of fresh air after years of pip and a short detour with Pipenv. If uv stopped existing Iâd go back to Poetry.<p>But having tasted the sweet nectar of uv goodness, Iâm onboard the bandwagon.</div><br/></div></div><div id="42678676" class="c"><input type="checkbox" id="c-42678676" checked=""/><div class="controls bullet"><span class="by">remram</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676985">parent</a><span>|</span><a href="#42677212">prev</a><span>|</span><a href="#42678352">next</a><span>|</span><label class="collapse" for="c-42678676">[-]</label><label class="expand" for="c-42678676">[1 more]</label></div><br/><div class="children"><div class="content">With the new major release of Poetry that just came out I also feel like it might be a good time to switch to Uv rather than adapt to this new version: <a href="https:&#x2F;&#x2F;python-poetry.org&#x2F;blog&#x2F;announcing-poetry-2.0.0&#x2F;" rel="nofollow">https:&#x2F;&#x2F;python-poetry.org&#x2F;blog&#x2F;announcing-poetry-2.0.0&#x2F;</a></div><br/></div></div></div></div></div></div><div id="42678352" class="c"><input type="checkbox" id="c-42678352" checked=""/><div class="controls bullet"><span class="by">polski-g</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676890">parent</a><span>|</span><a href="#42676938">prev</a><span>|</span><a href="#42677260">next</a><span>|</span><label class="collapse" for="c-42678352">[-]</label><label class="expand" for="c-42678352">[4 more]</label></div><br/><div class="children"><div class="content">&quot;pip freeze&quot; generates a lockfile.</div><br/><div id="42678388" class="c"><input type="checkbox" id="c-42678388" checked=""/><div class="controls bullet"><span class="by">orf</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42678352">parent</a><span>|</span><a href="#42677260">next</a><span>|</span><label class="collapse" for="c-42678388">[-]</label><label class="expand" for="c-42678388">[3 more]</label></div><br/><div class="children"><div class="content">No, that generates a list of <i>currently installed packages</i>.<p>Thatâs very much not a lock file, even if it is possible to abuse it as such.</div><br/><div id="42680555" class="c"><input type="checkbox" id="c-42680555" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42678388">parent</a><span>|</span><a href="#42680306">next</a><span>|</span><label class="collapse" for="c-42680555">[-]</label><label class="expand" for="c-42680555">[1 more]</label></div><br/><div class="children"><div class="content">A list of currently installed packages <i>in the current environment</i>, with their exact versions. This is only the actually needed packages, with their transitive dependencies, unless you&#x27;ve left something behind from earlier in development. If you&#x27;re keeping abstract dependencies up to date in `pyproject.toml` (which <i>you need to do anyway to build and release the project</i>), you can straightforwardly re-create the environment from that list and freeze whatever solution you get (after testing).</div><br/></div></div></div></div></div></div><div id="42677260" class="c"><input type="checkbox" id="c-42677260" checked=""/><div class="controls bullet"><span class="by">zo1</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676890">parent</a><span>|</span><a href="#42678352">prev</a><span>|</span><a href="#42676917">next</a><span>|</span><label class="collapse" for="c-42677260">[-]</label><label class="expand" for="c-42677260">[12 more]</label></div><br/><div class="children"><div class="content">The requirements.txt file <i>is</i> the lockfile. Anyways, this whole obsession with locked deps or &quot;lockfiles&quot; is such an anti-pattern, I have no idea why we went there as an industry. Probably as a result of some of the newer stuff that is classified as &quot;hipster-tech&quot; such as docker and javascript.</div><br/><div id="42677497" class="c"><input type="checkbox" id="c-42677497" checked=""/><div class="controls bullet"><span class="by">n144q</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677260">parent</a><span>|</span><a href="#42676917">next</a><span>|</span><label class="collapse" for="c-42677497">[-]</label><label class="expand" for="c-42677497">[11 more]</label></div><br/><div class="children"><div class="content">Just because you don&#x27;t understand it, it&#x27;s ok to call it an &quot;anti-pattern&quot;?<p>Reproducibility is important in many contexts, especially CI, which is why in Node.js world you literally do &quot;npm ci&quot; that installs exact versions for you.<p>If you haven&#x27;t found it necessary, it&#x27;s because you haven&#x27;t run into situations where <i>not</i> doing this causes trouble, like a lot of trouble.</div><br/><div id="42677660" class="c"><input type="checkbox" id="c-42677660" checked=""/><div class="controls bullet"><span class="by">driggs</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677497">parent</a><span>|</span><a href="#42677868">next</a><span>|</span><label class="collapse" for="c-42677660">[-]</label><label class="expand" for="c-42677660">[9 more]</label></div><br/><div class="children"><div class="content">Just because someone has a different perspective than you doesn&#x27;t mean they don&#x27;t &quot;understand&quot;.<p>Lockfiles <i>are</i> an anti-pattern if you&#x27;re developing a library rather than an application, because you can&#x27;t push your transitive requirements onto the users of your library.</div><br/><div id="42677854" class="c"><input type="checkbox" id="c-42677854" checked=""/><div class="controls bullet"><span class="by">Uvix</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677660">parent</a><span>|</span><a href="#42678407">next</a><span>|</span><label class="collapse" for="c-42677854">[-]</label><label class="expand" for="c-42677854">[5 more]</label></div><br/><div class="children"><div class="content">If you&#x27;re developing a library, and you have a requirement for what&#x27;s normally a transitive dependency, it should be specified as a top-level dependency.</div><br/><div id="42678246" class="c"><input type="checkbox" id="c-42678246" checked=""/><div class="controls bullet"><span class="by">driggs</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677854">parent</a><span>|</span><a href="#42678407">next</a><span>|</span><label class="collapse" for="c-42678246">[-]</label><label class="expand" for="c-42678246">[4 more]</label></div><br/><div class="children"><div class="content">The point is that if I&#x27;m writing a <i>library</i> and I specify `requests == 1.2.3`, then what are you going to do in your <i>application</i> if you need both my library <i>and</i> `requests == 1.2.4`?<p>This is why libraries should not use lockfiles, they should be written to safely use as wide a range of dependencies&#x27; versions as possible.<p>It&#x27;s the developers of an <i>application</i> who should use a lockfile to lock transitive dependencies.</div><br/><div id="42679224" class="c"><input type="checkbox" id="c-42679224" checked=""/><div class="controls bullet"><span class="by">phinnaeus</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42678246">parent</a><span>|</span><a href="#42678407">next</a><span>|</span><label class="collapse" for="c-42679224">[-]</label><label class="expand" for="c-42679224">[3 more]</label></div><br/><div class="children"><div class="content">The lock file is for developers of the library, not consumers. Consumers just use the libraryâs dependency specification and then resolve their own dependency closure and then generate a lock file for that. If you, as a library developer, want to test against multiple versions of your dependencies, there are other tools for that. It doesnât make lock files a bad idea in general.</div><br/><div id="42680599" class="c"><input type="checkbox" id="c-42680599" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42679224">parent</a><span>|</span><a href="#42678407">next</a><span>|</span><label class="collapse" for="c-42680599">[-]</label><label class="expand" for="c-42680599">[2 more]</label></div><br/><div class="children"><div class="content">As another library developer, <i>of course</i> I want to test against multiple versions. Or more accurately, I <i>don&#x27;t</i> want to prevent my users from using different versions prematurely. My default expectation is that my code will work with a wide range of those versions, and if it doesn&#x27;t I&#x27;ll know - because I like to pay attention to other libraries&#x27; deprecations, just as I&#x27;d hope for my users to pay attention to mine.<p>Lockfiles aren&#x27;t helpful to me here because the entire point is <i>not</i> to be dependent upon specific versions. I <i>actively want to</i> go through the cycle of updating my development environment on a whim, finding that everything breaks, doing the research etc. - because that&#x27;s how I find out what my version requirements <i>actually are</i>, so that I can properly record them in my own project metadata. And if it turns out that my requirements are narrow, that&#x27;s a cue to rethink how I use the dependency, so that I can broaden them.<p>If I had a working environment and didn&#x27;t want to risk breaking it right at the moment, I could just not upgrade it.<p>If my requirements were complex enough to motivate explicitly testing against a matrix of dependency versions, using one of those &quot;other tools&quot;, I&#x27;d do that instead. But neither way do I see any real gain, as a library developer, from a lock file.</div><br/><div id="42680968" class="c"><input type="checkbox" id="c-42680968" checked=""/><div class="controls bullet"><span class="by">imtringued</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42680599">parent</a><span>|</span><a href="#42678407">next</a><span>|</span><label class="collapse" for="c-42680968">[-]</label><label class="expand" for="c-42680968">[1 more]</label></div><br/><div class="children"><div class="content">&gt;If I had a working environment and didn&#x27;t want to risk breaking it right at the moment, I could just not upgrade it.<p>The point of a lockfile is to only upgrade when you want to upgrade. I hope you understand that.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="42678407" class="c"><input type="checkbox" id="c-42678407" checked=""/><div class="controls bullet"><span class="by">orf</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677660">parent</a><span>|</span><a href="#42677854">prev</a><span>|</span><a href="#42678684">next</a><span>|</span><label class="collapse" for="c-42678407">[-]</label><label class="expand" for="c-42678407">[1 more]</label></div><br/><div class="children"><div class="content">Thatâs not the perspective that OP was sharing, though.</div><br/></div></div><div id="42678684" class="c"><input type="checkbox" id="c-42678684" checked=""/><div class="controls bullet"><span class="by">remram</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677660">parent</a><span>|</span><a href="#42678407">prev</a><span>|</span><a href="#42677868">next</a><span>|</span><label class="collapse" for="c-42678684">[-]</label><label class="expand" for="c-42678684">[2 more]</label></div><br/><div class="children"><div class="content">You literally phrased it as &quot;I have no idea why&quot;. You can&#x27;t be upset if someone feels you don&#x27;t understand why.</div><br/><div id="42679356" class="c"><input type="checkbox" id="c-42679356" checked=""/><div class="controls bullet"><span class="by">Pannoniae</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42678684">parent</a><span>|</span><a href="#42677868">next</a><span>|</span><label class="collapse" for="c-42679356">[-]</label><label class="expand" for="c-42679356">[1 more]</label></div><br/><div class="children"><div class="content">&quot;I have no idea why&quot; the <i>industry</i> went there. One can understand a technology or a design pattern yet think it&#x27;s completely idiotic. (low-hanging fruit: JavaScript, containers, etc.)</div><br/></div></div></div></div></div></div><div id="42677868" class="c"><input type="checkbox" id="c-42677868" checked=""/><div class="controls bullet"><span class="by">wiseowise</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677497">parent</a><span>|</span><a href="#42677660">prev</a><span>|</span><a href="#42676917">next</a><span>|</span><label class="collapse" for="c-42677868">[-]</label><label class="expand" for="c-42677868">[1 more]</label></div><br/><div class="children"><div class="content">Iâm pretty sure it was a sarcasm.</div><br/></div></div></div></div></div></div></div></div><div id="42676917" class="c"><input type="checkbox" id="c-42676917" checked=""/><div class="controls bullet"><span class="by">2wrist</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676849">parent</a><span>|</span><a href="#42676890">prev</a><span>|</span><a href="#42677025">next</a><span>|</span><label class="collapse" for="c-42676917">[-]</label><label class="expand" for="c-42676917">[1 more]</label></div><br/><div class="children"><div class="content">Also you can set the python version for that project. It will download whatever version you need and just use it.</div><br/></div></div><div id="42677025" class="c"><input type="checkbox" id="c-42677025" checked=""/><div class="controls bullet"><span class="by">whimsicalism</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676849">parent</a><span>|</span><a href="#42676917">prev</a><span>|</span><a href="#42679606">next</a><span>|</span><label class="collapse" for="c-42677025">[-]</label><label class="expand" for="c-42677025">[1 more]</label></div><br/><div class="children"><div class="content">in my view, depending on your workflow you might have been missing out on pyenv in the past but not really if you feel comfortable self-managing your venvs.<p>now though, yes unequivocally you are missing out.</div><br/></div></div><div id="42679606" class="c"><input type="checkbox" id="c-42679606" checked=""/><div class="controls bullet"><span class="by">rat87</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676849">parent</a><span>|</span><a href="#42677025">prev</a><span>|</span><a href="#42676922">next</a><span>|</span><label class="collapse" for="c-42679606">[-]</label><label class="expand" for="c-42679606">[1 more]</label></div><br/><div class="children"><div class="content">Pip is sort of broken before because it encourages confusion between requirements and lock files. In other languages with package managers you generally specify your requirements with ranges and get a lock file with exact versions of those and any transitive dependencies letting you easily recreate a known working environment. The only way to do that in pip is to make a *new* venue install then pip freeze. I think pip tools package is supposed to help but it&#x27;s a separate tool (one which I&#x27;ve also includes). 
Also putting stuff in pyproject.toml feels more solid then requirements files (and allows options to be set on requirements (like installing only one package that&#x27;s only on your company&#x27;s private python package index mirror while installing the others from the global python package index) and allows dev dependencies and other optional features dependency groups without multiple requirements files and having to update locks on those files.<p>It also automatically creates venvs if you delete them. And it automatically updates packages when you run something with uv run file.py (useful when somebody may have updated the requirements in git). It also lets you install self contained (installed in a virtualenv and linked to ~&#x2F;.local&#x2F;bin which is added to your path)python tools (replacing pipx). It installs self contained python builds letting you more easily pick python version and specify it in a .python-version file for your project (replacing pyenv and usually much nicer because pyenv compiles them locally)<p>Uv also makes it easier to explore and say start a ipython shell with 2 libraries
uv run --with ipython --with colorful --with https ipython<p>It caches downloads. Of course the http itself isn&#x27;t faster but they&#x27;re exploring things to speed that part up and since it&#x27;s written in rust local stuff (like deleting and recreating a venv with cached packages) tends to be blazing fast</div><br/></div></div><div id="42676922" class="c"><input type="checkbox" id="c-42676922" checked=""/><div class="controls bullet"><span class="by">mardifoufs</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676849">parent</a><span>|</span><a href="#42679606">prev</a><span>|</span><a href="#42677225">next</a><span>|</span><label class="collapse" for="c-42676922">[-]</label><label class="expand" for="c-42676922">[6 more]</label></div><br/><div class="children"><div class="content">Well, for one you can&#x27;t actually package or add a local requirement (for example , a vendored package) to the usual pip requirements.txt (or with pyproject.toml, or any other standard way) afaik.<p>I saw a discourse reply that cited some sort of possible security issue but that was basically it and that means that the only way to get that functionality is to not use pip. It&#x27;s really not a lot of major stuff, just a lot of little paper cuts that makes it a lot easier to just use something else once your project gets to a certain size.</div><br/><div id="42677255" class="c"><input type="checkbox" id="c-42677255" checked=""/><div class="controls bullet"><span class="by">BeefWellington</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676922">parent</a><span>|</span><a href="#42677225">next</a><span>|</span><label class="collapse" for="c-42677255">[-]</label><label class="expand" for="c-42677255">[5 more]</label></div><br/><div class="children"><div class="content">Sure you can.<p>It&#x27;s in their example for how to use requirements.txt:
<a href="https:&#x2F;&#x2F;pip.pypa.io&#x2F;en&#x2F;stable&#x2F;reference&#x2F;requirements-file-format&#x2F;" rel="nofollow">https:&#x2F;&#x2F;pip.pypa.io&#x2F;en&#x2F;stable&#x2F;reference&#x2F;requirements-file-fo...</a><p>Maybe there&#x27;s some concrete example you have in mind though?</div><br/><div id="42678092" class="c"><input type="checkbox" id="c-42678092" checked=""/><div class="controls bullet"><span class="by">mardifoufs</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677255">parent</a><span>|</span><a href="#42677225">next</a><span>|</span><label class="collapse" for="c-42678092">[-]</label><label class="expand" for="c-42678092">[4 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t think so, though maybe I didn&#x27;t explain myself correctly. You can link to a relative package wheel I think, but not to a package repo. So if you have a repo, with your main package in .&#x2F;src, and you vendor or need a package from another subfolder (let&#x27;s say .&#x2F;vendored&#x2F;freetype) , you can&#x27;t actually do it in a way that won&#x27;t break the moment you share your package. You can&#x27;t put .&#x2F;vendored&#x2F;freetype in your requirements.txt, it just fails.<p>That means you either need to use pypi or do an extremely messy hack that involves adding the vendored package as a sub package to your main source, and then do some importlib black magic to make sure that everything uses said package.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;pypa&#x2F;pip&#x2F;issues&#x2F;6658">https:&#x2F;&#x2F;github.com&#x2F;pypa&#x2F;pip&#x2F;issues&#x2F;6658</a><p><a href="https:&#x2F;&#x2F;discuss.python.org&#x2F;t&#x2F;what-is-the-correct-interpretation-of-path-based-pep-508-uri-reference&#x2F;2815&#x2F;15" rel="nofollow">https:&#x2F;&#x2F;discuss.python.org&#x2F;t&#x2F;what-is-the-correct-interpretat...</a></div><br/><div id="42679373" class="c"><input type="checkbox" id="c-42679373" checked=""/><div class="controls bullet"><span class="by">BeefWellington</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42678092">parent</a><span>|</span><a href="#42677225">next</a><span>|</span><label class="collapse" for="c-42679373">[-]</label><label class="expand" for="c-42679373">[3 more]</label></div><br/><div class="children"><div class="content">In this scenario, reading between the lines, the vendor is not providing a public &#x2F; published package but <i>does</i> provide the source as like a tarball?<p>I have yet to run into that particular case where the vendor didn&#x27;t supply their own repo in favour of just providing the source directly. However I do use what are essentially vendor-supplied packages (distant teams in the org) and in those cases I just point at their GitLab&#x2F;GitHub repo directly. Even for some components within my own team we do it this way.</div><br/><div id="42680092" class="c"><input type="checkbox" id="c-42680092" checked=""/><div class="controls bullet"><span class="by">mardifoufs</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42679373">parent</a><span>|</span><a href="#42677225">next</a><span>|</span><label class="collapse" for="c-42680092">[-]</label><label class="expand" for="c-42680092">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s more for either monorepos or in my case, to fix packages that have bugs but that I can&#x27;t fix upstream.<p>So for me, in my specific case, the freetype-py repo has a rather big issue with Unicode paths (it will crash the app if the path is in Unicode).<p>There&#x27;s a PR but it hasn&#x27;t and probably won&#x27;t get merged for dubious reasons.<p>The easy choice, the one that actually is the most viable, is to pull the repo with the patch applied, temporarily add it to my .&#x2F;vendored folder and just ideally change the requirements.txt with no further changes (or need to create a new pypi package). But it&#x27;s basically impossible since I just can&#x27;t use relative paths like that.<p>Again it&#x27;s rather niche but that&#x27;s just one of the many problems I keep encountering.  packaging anything with CUDA is still far worse, for example.</div><br/><div id="42680624" class="c"><input type="checkbox" id="c-42680624" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42680092">parent</a><span>|</span><a href="#42677225">next</a><span>|</span><label class="collapse" for="c-42680624">[-]</label><label class="expand" for="c-42680624">[1 more]</label></div><br/><div class="children"><div class="content">&gt;The easy choice, the one that actually is the most viable, is to pull the repo with the patch applied, temporarily add it to my .&#x2F;vendored folder and just ideally change the requirements.txt with no further changes (or need to create a new pypi package). But it&#x27;s basically impossible since I just can&#x27;t use relative paths like that.<p>You can use the repo&#x27;s setup to build a wheel, then tell pip to install from that wheel directly (in requirements.txt, give the actual path&#x2F;name of the wheel file instead of an abstract dependency name). You need a build frontend for this - `pip wheel` will work and that&#x27;s more or less why it exists; but it&#x27;s not really what Pip is designed for overall - <a href="https:&#x2F;&#x2F;build.pypa.io&#x2F;en&#x2F;stable&#x2F;" rel="nofollow">https:&#x2F;&#x2F;build.pypa.io&#x2F;en&#x2F;stable&#x2F;</a> is the vanilla offering.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="42677225" class="c"><input type="checkbox" id="c-42677225" checked=""/><div class="controls bullet"><span class="by">o11c</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676849">parent</a><span>|</span><a href="#42676922">prev</a><span>|</span><a href="#42678620">next</a><span>|</span><label class="collapse" for="c-42677225">[-]</label><label class="expand" for="c-42677225">[3 more]</label></div><br/><div class="children"><div class="content">Much of the Python ecosystem blatantly violates semantic versioning. Most new tooling is designed to work around the bugs introduced by this.</div><br/><div id="42677451" class="c"><input type="checkbox" id="c-42677451" checked=""/><div class="controls bullet"><span class="by">sgarland</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677225">parent</a><span>|</span><a href="#42680633">next</a><span>|</span><label class="collapse" for="c-42677451">[-]</label><label class="expand" for="c-42677451">[1 more]</label></div><br/><div class="children"><div class="content">To be fair, Python itself doesnât follow SemVer.
Not in a âthey break things they shouldnât,â but in a âthey never claim to be using SemVer.â</div><br/></div></div><div id="42680633" class="c"><input type="checkbox" id="c-42680633" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677225">parent</a><span>|</span><a href="#42677451">prev</a><span>|</span><a href="#42678620">next</a><span>|</span><label class="collapse" for="c-42680633">[-]</label><label class="expand" for="c-42680633">[1 more]</label></div><br/><div class="children"><div class="content">Relevant: <a href="https:&#x2F;&#x2F;iscinumpy.dev&#x2F;post&#x2F;bound-version-constraints&#x2F;" rel="nofollow">https:&#x2F;&#x2F;iscinumpy.dev&#x2F;post&#x2F;bound-version-constraints&#x2F;</a>
Semver is hard; you never know what will break at least one of your users (see Hyrum&#x27;s law), but on the other hand, clear backwards-compatibility breaks will often <i>not</i> affect a large fraction of users - if they preemptively declare that they won&#x27;t support your next version, they may prevent Pip from finding a set of versions that would actually work just fine.</div><br/></div></div></div></div><div id="42678620" class="c"><input type="checkbox" id="c-42678620" checked=""/><div class="controls bullet"><span class="by">coldtea</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676849">parent</a><span>|</span><a href="#42677225">prev</a><span>|</span><a href="#42676903">next</a><span>|</span><label class="collapse" for="c-42678620">[-]</label><label class="expand" for="c-42678620">[1 more]</label></div><br/><div class="children"><div class="content">Cool story bro.<p>I&#x27;ve used pip, pyenv, poetry, all are broken in one way or another, and have blind spots they don&#x27;t serve.<p>If your needs are simple (not mixing Python versions, simple dependencies, not packaging, etc) you can do it with pip, or even with tarballs and make install.</div><br/></div></div><div id="42676903" class="c"><input type="checkbox" id="c-42676903" checked=""/><div class="controls bullet"><span class="by">remus</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676849">parent</a><span>|</span><a href="#42678620">prev</a><span>|</span><a href="#42677745">next</a><span>|</span><label class="collapse" for="c-42676903">[-]</label><label class="expand" for="c-42676903">[6 more]</label></div><br/><div class="children"><div class="content">Pip doesn&#x27;t resolve dependencies for you. On small projects that can be ok, but if you&#x27;re working on something medium to large, or you&#x27;re working on it with other people you can quickly get yourself into a sticky situation where your environment isn&#x27;t easily reproducible.<p>Using uv means your project will have well defined dependencies.</div><br/><div id="42677176" class="c"><input type="checkbox" id="c-42677176" checked=""/><div class="controls bullet"><span class="by">mianos</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676903">parent</a><span>|</span><a href="#42676946">next</a><span>|</span><label class="collapse" for="c-42677176">[-]</label><label class="expand" for="c-42677176">[2 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;pip.pypa.io&#x2F;en&#x2F;stable&#x2F;topics&#x2F;dependency-resolution&#x2F;" rel="nofollow">https:&#x2F;&#x2F;pip.pypa.io&#x2F;en&#x2F;stable&#x2F;topics&#x2F;dependency-resolution&#x2F;</a></div><br/><div id="42677284" class="c"><input type="checkbox" id="c-42677284" checked=""/><div class="controls bullet"><span class="by">remus</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677176">parent</a><span>|</span><a href="#42676946">next</a><span>|</span><label class="collapse" for="c-42677284">[-]</label><label class="expand" for="c-42677284">[1 more]</label></div><br/><div class="children"><div class="content">My bad, see PaulHoule&#x27;s comment for what I was getting at.</div><br/></div></div></div></div><div id="42676946" class="c"><input type="checkbox" id="c-42676946" checked=""/><div class="controls bullet"><span class="by">mosselman</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676903">parent</a><span>|</span><a href="#42677176">prev</a><span>|</span><a href="#42677745">next</a><span>|</span><label class="collapse" for="c-42676946">[-]</label><label class="expand" for="c-42676946">[3 more]</label></div><br/><div class="children"><div class="content">Oh wow it doesnât? What DOES it do then?<p>As I commented here just now I never got pip. This explains it.</div><br/><div id="42677274" class="c"><input type="checkbox" id="c-42677274" checked=""/><div class="controls bullet"><span class="by">zo1</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676946">parent</a><span>|</span><a href="#42677182">prev</a><span>|</span><a href="#42677745">next</a><span>|</span><label class="collapse" for="c-42677274">[-]</label><label class="expand" for="c-42677274">[1 more]</label></div><br/><div class="children"><div class="content">The guy doesn&#x27;t know what he&#x27;s talking about as pip certainly has dependency resolution. Rather get your python or tech info from a non-flame-war infested thread full of anti-pip and anti-python folk.</div><br/></div></div></div></div></div></div></div></div><div id="42677745" class="c"><input type="checkbox" id="c-42677745" checked=""/><div class="controls bullet"><span class="by">benatkin</span><span>|</span><a href="#42676837">parent</a><span>|</span><a href="#42676849">prev</a><span>|</span><a href="#42677639">next</a><span>|</span><label class="collapse" for="c-42677745">[-]</label><label class="expand" for="c-42677745">[10 more]</label></div><br/><div class="children"><div class="content">This:<p>&gt; I haven&#x27;t felt like it&#x27;s a minor improvement on what I&#x27;m using<p>means that this:<p>&gt; I&#x27;d love if we standardized on it as a community as the de facto default<p>â¦probably shouldnât happen. The default and de facto standard should be something that doesnât get put on a pedestal but stays out of the way.<p>It would be like replacing the python repl with the current version of ipython. Iâd say the same thing, that it isnât a minor improvement. While I almost always use ipython now, Iâm glad itâs a separate thing.</div><br/><div id="42680283" class="c"><input type="checkbox" id="c-42680283" checked=""/><div class="controls bullet"><span class="by">comex</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677745">parent</a><span>|</span><a href="#42678953">next</a><span>|</span><label class="collapse" for="c-42680283">[-]</label><label class="expand" for="c-42680283">[2 more]</label></div><br/><div class="children"><div class="content">As it happens, the Python REPL was just replaced a few months ago!<p>â¦Not with IPython.  But with an implementation written in Python instead of C, originating from the PyPy project, that supports fancier features like multi-line editing and syntax highlighting.  See PEP 762.<p>I was apprehensive when I heard about it, but then I had the chance to use it and it was a very nice experience.</div><br/><div id="42680591" class="c"><input type="checkbox" id="c-42680591" checked=""/><div class="controls bullet"><span class="by">benatkin</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42680283">parent</a><span>|</span><a href="#42678953">next</a><span>|</span><label class="collapse" for="c-42680591">[-]</label><label class="expand" for="c-42680591">[1 more]</label></div><br/><div class="children"><div class="content">Ooh, nice. I think recently the times I&#x27;ve used the latest version of python it&#x27;s been with ipython, so I didn&#x27;t notice. Going to check it out! It might be easier to make a custom repl now.</div><br/></div></div></div></div><div id="42678953" class="c"><input type="checkbox" id="c-42678953" checked=""/><div class="controls bullet"><span class="by">lolinder</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677745">parent</a><span>|</span><a href="#42680283">prev</a><span>|</span><a href="#42678100">next</a><span>|</span><label class="collapse" for="c-42678953">[-]</label><label class="expand" for="c-42678953">[5 more]</label></div><br/><div class="children"><div class="content">&gt; The default and de facto standard should be something that doesnât get put on a pedestal but stays out of the way.<p>The problem is that in the python ecosystem there really isn&#x27;t a default de facto standard yet at all. It&#x27;s supposed to be pip, but enough people dislike pip that it&#x27;s hard as a newcomer to know if it&#x27;s actually the standard or not.<p>The nice thing about putting something like this on a pedestal is that maybe it could actually become a standard, even if the standard <i>should</i> be simple and get out of the way. Better to have a standard that&#x27;s a bit over the top than no standard at all.</div><br/><div id="42679039" class="c"><input type="checkbox" id="c-42679039" checked=""/><div class="controls bullet"><span class="by">benatkin</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42678953">parent</a><span>|</span><a href="#42678100">next</a><span>|</span><label class="collapse" for="c-42679039">[-]</label><label class="expand" for="c-42679039">[4 more]</label></div><br/><div class="children"><div class="content">It feels even more standard than it used to, with python -m pip and python -m venv making it so it can be used with a virtalenv even if only python or python3 is in your path.</div><br/><div id="42680697" class="c"><input type="checkbox" id="c-42680697" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42679039">parent</a><span>|</span><a href="#42679093">next</a><span>|</span><label class="collapse" for="c-42680697">[-]</label><label class="expand" for="c-42680697">[1 more]</label></div><br/><div class="children"><div class="content">Just for the record, `venv` has been in since Python 3.3, although it didn&#x27;t bootstrap Pip into the environment until 3.4 and wasn&#x27;t the officially blessed way of doing things until 3.5 (which was still over 9 years ago).<p>Pip isn&#x27;t part of the standard library; the standard library `ensurepip` (called from `venv`) includes a vendored wheel for Pip (<a href="https:&#x2F;&#x2F;github.com&#x2F;python&#x2F;cpython&#x2F;tree&#x2F;main&#x2F;Lib&#x2F;ensurepip&#x2F;_bundled">https:&#x2F;&#x2F;github.com&#x2F;python&#x2F;cpython&#x2F;tree&#x2F;main&#x2F;Lib&#x2F;ensurepip&#x2F;_b...</a>), and imports Pip from within that wheel to bootstrap it. (Wheels are zip files, and Python natively knows how to import code from a zip file, so this just involves some `sys.path` manipulation. The overall process is a bit complex, but it&#x27;s all in <a href="https:&#x2F;&#x2F;github.com&#x2F;python&#x2F;cpython&#x2F;blob&#x2F;main&#x2F;Lib&#x2F;ensurepip&#x2F;__init__.py">https:&#x2F;&#x2F;github.com&#x2F;python&#x2F;cpython&#x2F;blob&#x2F;main&#x2F;Lib&#x2F;ensurepip&#x2F;__...</a> .)<p>This is why you get prompted to upgrade Pip all the time in new virtual environments (unless you preempt that with `--upgrade-deps`). The core development team still wants to keep packaging at arms length. This also allows Pip to be developed, released and versioned independently.</div><br/></div></div><div id="42679093" class="c"><input type="checkbox" id="c-42679093" checked=""/><div class="controls bullet"><span class="by">lolinder</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42679039">parent</a><span>|</span><a href="#42680697">prev</a><span>|</span><a href="#42678100">next</a><span>|</span><label class="collapse" for="c-42679093">[-]</label><label class="expand" for="c-42679093">[2 more]</label></div><br/><div class="children"><div class="content">Oh, it&#x27;s certainly more standard than it used to be, and maybe it&#x27;s on the way to being fully standard. But it definitely hasn&#x27;t arrived in the spot that npm, cargo, hex, bundler, and similar have in their respective ecosystems.<p>Npm is a pretty good example of what pip <i>should</i> be. Npm has had to compete with other package managers for a long time but has remained the standard simply because it actually has all the basic features that people expect out of a package manager. So other package managers can spin up using the npm registry providing slightly better experiences in certain ways, but npm covers the basics.<p>Pip really does not even cover the basics, hence the perpetual search for a better default.</div><br/><div id="42680707" class="c"><input type="checkbox" id="c-42680707" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42679093">parent</a><span>|</span><a href="#42678100">next</a><span>|</span><label class="collapse" for="c-42680707">[-]</label><label class="expand" for="c-42680707">[1 more]</label></div><br/><div class="children"><div class="content">Pip <i>intentionally and by design</i> does not cover package management. It covers package <i>installation</i> - which is more complex for Python than for other languages because of the expectation of being able to <i>(try to) build code in other languages, at install time</i>.</div><br/></div></div></div></div></div></div></div></div><div id="42678100" class="c"><input type="checkbox" id="c-42678100" checked=""/><div class="controls bullet"><span class="by">greazy</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42677745">parent</a><span>|</span><a href="#42678953">prev</a><span>|</span><a href="#42677639">next</a><span>|</span><label class="collapse" for="c-42678100">[-]</label><label class="expand" for="c-42678100">[2 more]</label></div><br/><div class="children"><div class="content">&gt; The default and de facto standard should be something that doesnât get put on a pedestal but stays out of the way.<p>This to me is unachievable. Perfection is impossible. On the the way there if the community and developers coalesced around a single tool then maybe we can start heading down the road to perfectionism.</div><br/><div id="42678198" class="c"><input type="checkbox" id="c-42678198" checked=""/><div class="controls bullet"><span class="by">benatkin</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42678100">parent</a><span>|</span><a href="#42677639">next</a><span>|</span><label class="collapse" for="c-42678198">[-]</label><label class="expand" for="c-42678198">[1 more]</label></div><br/><div class="children"><div class="content">I mean, stays out of the way for simple uses.<p>When I first learned Python, typing python and seeing &gt;&gt;&gt; and having it evaluate what I typed as if it appeared in a file was a good experience.<p>Now that I use python a lot, ipython is more out of the way to me than the built-in python repl is, because it lets me focus on what I&#x27;m working on, than limitations of a tool.</div><br/></div></div></div></div></div></div><div id="42677639" class="c"><input type="checkbox" id="c-42677639" checked=""/><div class="controls bullet"><span class="by">mrbonner</span><span>|</span><a href="#42676837">parent</a><span>|</span><a href="#42677745">prev</a><span>|</span><a href="#42676863">next</a><span>|</span><label class="collapse" for="c-42677639">[-]</label><label class="expand" for="c-42677639">[1 more]</label></div><br/><div class="children"><div class="content">+1 uv now also supports system installation of python with the --default --preview flags. This probably allows me to replace mise (rtx) and go uv full time for python development. With other languages, I go back to mise.</div><br/></div></div><div id="42676863" class="c"><input type="checkbox" id="c-42676863" checked=""/><div class="controls bullet"><span class="by">tehjoker</span><span>|</span><a href="#42676837">parent</a><span>|</span><a href="#42677639">prev</a><span>|</span><a href="#42679317">next</a><span>|</span><label class="collapse" for="c-42676863">[-]</label><label class="expand" for="c-42676863">[3 more]</label></div><br/><div class="children"><div class="content">What is the deal with uv&#x27;s ownership policy? I heard it might be VC backed. To my mind, that means killing pip and finding some kind of subscription revenue source which makes me uneasy.<p>The only way to justify VC money is a plot to take over the ecosystem and then profit off of a dominant position. (e.g.  the Uber model)<p>I&#x27;ve heard a little bit about UV&#x27;s technical achievements, which are impressive, but technical progress isn&#x27;t the only metric.</div><br/><div id="42678614" class="c"><input type="checkbox" id="c-42678614" checked=""/><div class="controls bullet"><span class="by">feznyng</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42676863">parent</a><span>|</span><a href="#42679317">next</a><span>|</span><label class="collapse" for="c-42678614">[-]</label><label class="expand" for="c-42678614">[2 more]</label></div><br/><div class="children"><div class="content">Itâs dual MIT and Apache licensed. Worst case, if thereâs a rug pull, fork it.</div><br/><div id="42679697" class="c"><input type="checkbox" id="c-42679697" checked=""/><div class="controls bullet"><span class="by">tehjoker</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42678614">parent</a><span>|</span><a href="#42679317">next</a><span>|</span><label class="collapse" for="c-42679697">[-]</label><label class="expand" for="c-42679697">[1 more]</label></div><br/><div class="children"><div class="content">Is that the entire story? If so the VCs are pretty dumb. If they kill pip, that means the people who were maintaining it disperse and forking it won&#x27;t restore the ecosystem that was there before.</div><br/></div></div></div></div></div></div><div id="42679317" class="c"><input type="checkbox" id="c-42679317" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676837">parent</a><span>|</span><a href="#42676863">prev</a><span>|</span><a href="#42679112">next</a><span>|</span><label class="collapse" for="c-42679317">[-]</label><label class="expand" for="c-42679317">[3 more]</label></div><br/><div class="children"><div class="content">(I will likely base a blog post in my packaging series off this comment later.)<p>What people seem to miss about Pip is that it&#x27;s <i>by design, not</i> a package manager. It&#x27;s a package <i>installer</i>, only. Of course it doesn&#x27;t handle the environment setup for you; it&#x27;s not intended for that. And of course it doesn&#x27;t keep track of what you&#x27;ve installed, or make lock files, or update your `pyproject.toml`, or...<p>What it <i>does</i> do is offer a hideously complex set of options for installing everything under the sun, from everywhere under the sun. (And that complexity has led to long-standing, seemingly unfixable issues, and there are a lot of design decisions made that I think are questionable at best.)<p>Ideas like &quot;welllll I use poetry but pyenv works or you could use conda too&quot; are incoherent. They&#x27;re for different purposes and different users, with varying bits of overlap. The reason people are unsatisfied is because any given tool might be missing one of the specific things they want, unless it&#x27;s <i>really</i> all-in-one like Uv seems like it intends to be eventually.<p>But once you have a truly all-in-one tool, you notice how little of it you&#x27;re using, and how big it is, and how useless it feels to have to put the tool name at the start of <i>every</i> command, and all the specific little things you don&#x27;t like about its implementation of whatever individual parts. Not to mention the feeling of &quot;vendor lock-in&quot;. Never mind that I didn&#x27;t pay money for it; I still don&#x27;t want to feel stuck with, say, your build back-end just because I&#x27;m using your lock-file updater.<p>In short, I don&#x27;t <i>want</i> a &quot;package manager&quot;.<p>I want a solid foundation (better than Pip) that handles installing (not managing) applications and packages, into either a specified virtual environment or a new one created (not managed, except to make it easy to determine the location, so other tools can manage it) for the purpose. In other words, something that fully covers the needs of <i>users</i> (making it possible to run the code), while providing only the bare minimum on top of that for developers - so that other developer tools can cooperate with that. And then I want specialized tools for all the individual things developers need to do.<p>The specialized tools I want for my own work all exist, and the tools others want mostly exist too. Twine uploads stuff to PyPI; `build` is a fine build front-end; Setuptools would do everything I need on the back-end (despite my annoyances with it). I don&#x27;t need a lockfile-driven workflow and don&#x27;t readily think in those terms. I use pytest from the command line for testing and I don&#x27;t want a &quot;package manager&quot; nor &quot;workflow tool&quot; to wrap that for me. If I needed any wrapping there I could do a few lines of shell script myself. If anything, the problem with <i>these</i> tools is doing too much, rather than too little.<p>The base I want doesn&#x27;t exist yet, so I&#x27;ve started making it myself. Pipx is a big step in the right direction, but it has some arbitrary limitations (I discuss these and some workarounds in my recent blog post <a href="https:&#x2F;&#x2F;zahlman.github.io&#x2F;posts&#x2F;2025&#x2F;01&#x2F;07&#x2F;python-packaging-2&#x2F;" rel="nofollow">https:&#x2F;&#x2F;zahlman.github.io&#x2F;posts&#x2F;2025&#x2F;01&#x2F;07&#x2F;python-packaging-...</a> ) and it&#x27;s built on Pip so it inherits those faults and is that much bigger. Uv is even bigger still for the compiled binary, and I would only be using the installation parts.</div><br/><div id="42680955" class="c"><input type="checkbox" id="c-42680955" checked=""/><div class="controls bullet"><span class="by">botanical76</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42679317">parent</a><span>|</span><a href="#42681054">next</a><span>|</span><label class="collapse" for="c-42680955">[-]</label><label class="expand" for="c-42680955">[1 more]</label></div><br/><div class="children"><div class="content">Do you feel that Npm, mix, cargo went the wrong way, doing too much? It seems like their respective communities _love_ the standard tooling and all that it does. Or is Python fundamentally different?</div><br/></div></div><div id="42681054" class="c"><input type="checkbox" id="c-42681054" checked=""/><div class="controls bullet"><span class="by">imtringued</span><span>|</span><a href="#42676837">root</a><span>|</span><a href="#42679317">parent</a><span>|</span><a href="#42680955">prev</a><span>|</span><a href="#42679112">next</a><span>|</span><label class="collapse" for="c-42681054">[-]</label><label class="expand" for="c-42681054">[1 more]</label></div><br/><div class="children"><div class="content">Virtualenv should have never existed in the first place. So you claiming that UV or whatever tool is doing too much, sounds to me like you&#x27;re arguing based on &quot;traditionalist&quot; or &quot;conservative&quot; reasons rather than doing any technical thinking here.<p>Node.js&#x27;s replacement for virtualenv is literally just a folder named &quot;node_modules&quot;. Meanwhile python has an entire tool with strange ideosyncracies that you have to pay attention to otherwise pip does the wrong thing by default.<p>It is as if python is pretending to be a special snowflake where installing libraries into a folder is this super hyper mega overcomplicated thing that necessitates a whole dedicated tool just to manage, when in reality in other programming languages nobody is really thinking about that the fact that the libraries end up in their build folders. It just works.<p>So again you&#x27;re pretending that this is such a big deal that it needs a whole other tool, when the problem in question is so trivial that another tool is adding mental overhead with regard to the microscopic problem at hand.</div><br/></div></div></div></div></div></div><div id="42679226" class="c"><input type="checkbox" id="c-42679226" checked=""/><div class="controls bullet"><span class="by">bityard</span><span>|</span><a href="#42676837">prev</a><span>|</span><a href="#42677101">next</a><span>|</span><label class="collapse" for="c-42679226">[-]</label><label class="expand" for="c-42679226">[4 more]</label></div><br/><div class="children"><div class="content">I usually stay away far FAR from shiny new tools but I&#x27;ve been experimenting with uv and I really like it. I&#x27;m a bit bummed that it&#x27;s not written in Python but other than that, it does what it says on the tin.<p>I never liked pyenv because I really don&#x27;t see the point&#x2F;benefit building every new version of Python you want to use. There&#x27;s a reason I don&#x27;t run Gentoo or Arch anymore. I&#x27;m very happy that uv grabs pre-compiled binaries and just uses those.<p>So far I have used it to replace poetry (which is great btw) in one of my projects. It was pretty straightforward, but the project was also fairly trivial&#x2F;typical.<p>I can&#x27;t fully replace pipx with it because &#x27;uv tool&#x27; currently assumes every Python package only has one executable. Lots of things I work with have multiple, such as Ansible and Jupyterlab. There&#x27;s a bug open about it and the workarounds are not terrible, but it&#x27;d be nice if they are able to fix that soon.</div><br/><div id="42680303" class="c"><input type="checkbox" id="c-42680303" checked=""/><div class="controls bullet"><span class="by">meitham</span><span>|</span><a href="#42679226">parent</a><span>|</span><a href="#42677101">next</a><span>|</span><label class="collapse" for="c-42680303">[-]</label><label class="expand" for="c-42680303">[3 more]</label></div><br/><div class="children"><div class="content">uv is great, but downloading and installing base python interpreter is not a good feature as it doesnât fetch that from PSF but from a project on GitHub, that very same project says this is compiled for portability over performance, see <a href="https:&#x2F;&#x2F;gregoryszorc.com&#x2F;docs&#x2F;python-build-standalone&#x2F;main&#x2F;" rel="nofollow">https:&#x2F;&#x2F;gregoryszorc.com&#x2F;docs&#x2F;python-build-standalone&#x2F;main&#x2F;</a></div><br/><div id="42680815" class="c"><input type="checkbox" id="c-42680815" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42679226">root</a><span>|</span><a href="#42680303">parent</a><span>|</span><a href="#42677101">next</a><span>|</span><label class="collapse" for="c-42680815">[-]</label><label class="expand" for="c-42680815">[2 more]</label></div><br/><div class="children"><div class="content">&gt;that very same project says this is compiled for portability over performance<p>Realistically, the options on Linux are the uv way, the pyenv way (download and compile on demand, making sure users have compile-time dependencies installed as part of installing your tool), and letting users download and compile it themself (which is actually very easy for Python, at least on my distro). Compiling Python is not especially fast (around a full minute on my 4-core, 10-year-old machine), although I&#x27;ve experienced much worse in my lifetime. Maybe you can get alternate python versions directly from your distro or a PPA, but not in a way that a cross-distro tool can feasibly automate.<p>On Windows the only realistic option is the official installer.</div><br/><div id="42681167" class="c"><input type="checkbox" id="c-42681167" checked=""/><div class="controls bullet"><span class="by">globular-toast</span><span>|</span><a href="#42679226">root</a><span>|</span><a href="#42680815">parent</a><span>|</span><a href="#42677101">next</a><span>|</span><label class="collapse" for="c-42681167">[-]</label><label class="expand" for="c-42681167">[1 more]</label></div><br/><div class="children"><div class="content">Yes, which is why it&#x27;s silly to do it. Developers (not &quot;users&quot;!) need to learn how to install Python on their system. I honestly don&#x27;t know how someone can call themselves a Python developer if they can&#x27;t even install the interpreter!</div><br/></div></div></div></div></div></div></div></div><div id="42677101" class="c"><input type="checkbox" id="c-42677101" checked=""/><div class="controls bullet"><span class="by">riwsky</span><span>|</span><a href="#42679226">prev</a><span>|</span><a href="#42676926">next</a><span>|</span><label class="collapse" for="c-42677101">[-]</label><label class="expand" for="c-42677101">[24 more]</label></div><br/><div class="children"><div class="content">Heck, you can get even cleaner than that by using uvâs support for PEP 723âs inline script dependencies:<p><pre><code>  # &#x2F;&#x2F;&#x2F; script
  # requires-python = &quot;&gt;=3.12&quot;
  # dependencies = [
  #     &quot;pandas&quot;,
  # ]
  # &#x2F;&#x2F;&#x2F;
</code></pre>
h&#x2F;t <a href="https:&#x2F;&#x2F;simonwillison.net&#x2F;2024&#x2F;Dec&#x2F;19&#x2F;one-shot-python-tools&#x2F;" rel="nofollow">https:&#x2F;&#x2F;simonwillison.net&#x2F;2024&#x2F;Dec&#x2F;19&#x2F;one-shot-python-tools&#x2F;</a></div><br/><div id="42679080" class="c"><input type="checkbox" id="c-42679080" checked=""/><div class="controls bullet"><span class="by">shlomo_z</span><span>|</span><a href="#42677101">parent</a><span>|</span><a href="#42677455">next</a><span>|</span><label class="collapse" for="c-42679080">[-]</label><label class="expand" for="c-42679080">[2 more]</label></div><br/><div class="children"><div class="content">Is it possible for my IDE (vscode) to support this? Currently my IDE screams at me for using unknown packages and I have no type hinting, intellisense, etc.</div><br/></div></div><div id="42677455" class="c"><input type="checkbox" id="c-42677455" checked=""/><div class="controls bullet"><span class="by">aeurielesn</span><span>|</span><a href="#42677101">parent</a><span>|</span><a href="#42679080">prev</a><span>|</span><a href="#42677267">next</a><span>|</span><label class="collapse" for="c-42677455">[-]</label><label class="expand" for="c-42677455">[19 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t understand how things like this get approved into PEPs.</div><br/><div id="42677601" class="c"><input type="checkbox" id="c-42677601" checked=""/><div class="controls bullet"><span class="by">Karupan</span><span>|</span><a href="#42677101">root</a><span>|</span><a href="#42677455">parent</a><span>|</span><a href="#42677496">next</a><span>|</span><label class="collapse" for="c-42677601">[-]</label><label class="expand" for="c-42677601">[1 more]</label></div><br/><div class="children"><div class="content">Seems like a great way to write self documenting code which can be optionally used by your python runtime.</div><br/></div></div><div id="42677496" class="c"><input type="checkbox" id="c-42677496" checked=""/><div class="controls bullet"><span class="by">zanie</span><span>|</span><a href="#42677101">root</a><span>|</span><a href="#42677455">parent</a><span>|</span><a href="#42677601">prev</a><span>|</span><a href="#42680317">next</a><span>|</span><label class="collapse" for="c-42677496">[-]</label><label class="expand" for="c-42677496">[1 more]</label></div><br/><div class="children"><div class="content">As in, you think this shouldn&#x27;t be possible or you think it should be written differently?</div><br/></div></div><div id="42680317" class="c"><input type="checkbox" id="c-42680317" checked=""/><div class="controls bullet"><span class="by">rtpg</span><span>|</span><a href="#42677101">root</a><span>|</span><a href="#42677455">parent</a><span>|</span><a href="#42677496">prev</a><span>|</span><a href="#42677703">next</a><span>|</span><label class="collapse" for="c-42680317">[-]</label><label class="expand" for="c-42680317">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s helpful as a way to publish minimal reproductions of bugs and issues in bug reports (compared to &quot;please clone my repo&quot; which has so many layers of friction involved).<p>I would want distributed projects to do things properly, but as a way to shorthand a lot of futzing about? It&#x27;s excellent</div><br/></div></div><div id="42677703" class="c"><input type="checkbox" id="c-42677703" checked=""/><div class="controls bullet"><span class="by">epistasis</span><span>|</span><a href="#42677101">root</a><span>|</span><a href="#42677455">parent</a><span>|</span><a href="#42680317">prev</a><span>|</span><a href="#42679616">next</a><span>|</span><label class="collapse" for="c-42677703">[-]</label><label class="expand" for="c-42677703">[4 more]</label></div><br/><div class="children"><div class="content">The PEP page is really good at explaining the status of the proposal, a summary of the discussion to date, and then links to the actual detailed discussion (in Discourse) about it:<p><a href="https:&#x2F;&#x2F;peps.python.org&#x2F;pep-0723&#x2F;" rel="nofollow">https:&#x2F;&#x2F;peps.python.org&#x2F;pep-0723&#x2F;</a></div><br/><div id="42678259" class="c"><input type="checkbox" id="c-42678259" checked=""/><div class="controls bullet"><span class="by">noitpmeder</span><span>|</span><a href="#42677101">root</a><span>|</span><a href="#42677703">parent</a><span>|</span><a href="#42679616">next</a><span>|</span><label class="collapse" for="c-42678259">[-]</label><label class="expand" for="c-42678259">[3 more]</label></div><br/><div class="children"><div class="content">I see this was accepted (I think?); is the implementation available in a released python version? I don&#x27;t see an &quot;as of&quot; version on the pep page, nor do lite google searches reveal any official python docs of the feature.</div><br/><div id="42679761" class="c"><input type="checkbox" id="c-42679761" checked=""/><div class="controls bullet"><span class="by">epistasis</span><span>|</span><a href="#42677101">root</a><span>|</span><a href="#42678259">parent</a><span>|</span><a href="#42678530">next</a><span>|</span><label class="collapse" for="c-42679761">[-]</label><label class="expand" for="c-42679761">[1 more]</label></div><br/><div class="children"><div class="content">This is a specification for Python packaging, which is tooling separate from Python releases (for better or worse, IMHO worse but the BDFL disagrees).  There&#x27;s a box below the Table of Contents of the PEP that points here:<p><a href="https:&#x2F;&#x2F;packaging.python.org&#x2F;en&#x2F;latest&#x2F;specifications&#x2F;inline-script-metadata&#x2F;" rel="nofollow">https:&#x2F;&#x2F;packaging.python.org&#x2F;en&#x2F;latest&#x2F;specifications&#x2F;inline...</a></div><br/></div></div><div id="42678530" class="c"><input type="checkbox" id="c-42678530" checked=""/><div class="controls bullet"><span class="by">jonesetc</span><span>|</span><a href="#42677101">root</a><span>|</span><a href="#42678259">parent</a><span>|</span><a href="#42679761">prev</a><span>|</span><a href="#42679616">next</a><span>|</span><label class="collapse" for="c-42678530">[-]</label><label class="expand" for="c-42678530">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not a python the language feature, it&#x27;s for packaging. So no language version is relevant. It&#x27;s just there for any tool that wants to use it. uv, an IDE, or anything else that manages virtual environments would be the ones who implement it independent of python versions.</div><br/></div></div></div></div></div></div><div id="42679616" class="c"><input type="checkbox" id="c-42679616" checked=""/><div class="controls bullet"><span class="by">blibble</span><span>|</span><a href="#42677101">root</a><span>|</span><a href="#42677455">parent</a><span>|</span><a href="#42677703">prev</a><span>|</span><a href="#42677833">next</a><span>|</span><label class="collapse" for="c-42679616">[-]</label><label class="expand" for="c-42679616">[2 more]</label></div><br/><div class="children"><div class="content">with that expected use case of uv script run command it effectively makes those comments executable<p>python&#x27;s wheels are falling off at an ever faster and faster rate</div><br/><div id="42680233" class="c"><input type="checkbox" id="c-42680233" checked=""/><div class="controls bullet"><span class="by">Spivak</span><span>|</span><a href="#42677101">root</a><span>|</span><a href="#42679616">parent</a><span>|</span><a href="#42677833">next</a><span>|</span><label class="collapse" for="c-42680233">[-]</label><label class="expand" for="c-42680233">[1 more]</label></div><br/><div class="children"><div class="content">Because of a feature that solves the problem of one off scripts being difficult the moment you need a 3rd party library?<p>A more Pythonic way of doing this might be __pyproject__  bit that has the tiiiiny snag of needing to execute the file to figure out its deps. I would have loved if __name__ == &quot;pyproject&quot; but while neat and tidy it is admittedly super confusing for beginners, has a &quot;react hooks&quot; style gotcha where to can&#x27;t use any deps in that block, and you can&#x27;t use top level imports. The comment was really the easiest way.</div><br/></div></div></div></div><div id="42677922" class="c"><input type="checkbox" id="c-42677922" checked=""/><div class="controls bullet"><span class="by">misiek08</span><span>|</span><a href="#42677101">root</a><span>|</span><a href="#42677455">parent</a><span>|</span><a href="#42677833">prev</a><span>|</span><a href="#42677642">next</a><span>|</span><label class="collapse" for="c-42677922">[-]</label><label class="expand" for="c-42677922">[5 more]</label></div><br/><div class="children"><div class="content">And people were laughing at PHP comments configuring framework, right?</div><br/><div id="42678355" class="c"><input type="checkbox" id="c-42678355" checked=""/><div class="controls bullet"><span class="by">throwup238</span><span>|</span><a href="#42677101">root</a><span>|</span><a href="#42677922">parent</a><span>|</span><a href="#42677642">next</a><span>|</span><label class="collapse" for="c-42678355">[-]</label><label class="expand" for="c-42678355">[4 more]</label></div><br/><div class="children"><div class="content">Python was always the late born twin brother of PHP with better hair and teeth, but the same eyes that peered straight into the depths of the abyss.</div><br/><div id="42679046" class="c"><input type="checkbox" id="c-42679046" checked=""/><div class="controls bullet"><span class="by">franktankbank</span><span>|</span><a href="#42677101">root</a><span>|</span><a href="#42678355">parent</a><span>|</span><a href="#42677642">next</a><span>|</span><label class="collapse" for="c-42679046">[-]</label><label class="expand" for="c-42679046">[3 more]</label></div><br/><div class="children"><div class="content">Why come types?</div><br/><div id="42679344" class="c"><input type="checkbox" id="c-42679344" checked=""/><div class="controls bullet"><span class="by">throwup238</span><span>|</span><a href="#42677101">root</a><span>|</span><a href="#42679046">parent</a><span>|</span><a href="#42677642">next</a><span>|</span><label class="collapse" for="c-42679344">[-]</label><label class="expand" for="c-42679344">[2 more]</label></div><br/><div class="children"><div class="content">Thatâs when each language reached sexual maturity but one went on to get a girlfriend and the other discovered internet porn.</div><br/><div id="42680465" class="c"><input type="checkbox" id="c-42680465" checked=""/><div class="controls bullet"><span class="by">8n4vidtmkvmk</span><span>|</span><a href="#42677101">root</a><span>|</span><a href="#42679344">parent</a><span>|</span><a href="#42677642">next</a><span>|</span><label class="collapse" for="c-42680465">[-]</label><label class="expand" for="c-42680465">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t know which is which in this story.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="42677642" class="c"><input type="checkbox" id="c-42677642" checked=""/><div class="controls bullet"><span class="by">linsomniac</span><span>|</span><a href="#42677101">root</a><span>|</span><a href="#42677455">parent</a><span>|</span><a href="#42677922">prev</a><span>|</span><a href="#42677267">next</a><span>|</span><label class="collapse" for="c-42677642">[-]</label><label class="expand" for="c-42677642">[3 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t think this <i>IS</i> a PEP, I believe it is simply something the uv tool supports and as far as Python is concerned it is just a comment.</div><br/><div id="42677791" class="c"><input type="checkbox" id="c-42677791" checked=""/><div class="controls bullet"><span class="by">mkl</span><span>|</span><a href="#42677101">root</a><span>|</span><a href="#42677642">parent</a><span>|</span><a href="#42677799">next</a><span>|</span><label class="collapse" for="c-42677791">[-]</label><label class="expand" for="c-42677791">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;peps.python.org&#x2F;pep-0723&#x2F;" rel="nofollow">https:&#x2F;&#x2F;peps.python.org&#x2F;pep-0723&#x2F;</a></div><br/></div></div><div id="42677799" class="c"><input type="checkbox" id="c-42677799" checked=""/><div class="controls bullet"><span class="by">zanie</span><span>|</span><a href="#42677101">root</a><span>|</span><a href="#42677642">parent</a><span>|</span><a href="#42677791">prev</a><span>|</span><a href="#42677267">next</a><span>|</span><label class="collapse" for="c-42677799">[-]</label><label class="expand" for="c-42677799">[1 more]</label></div><br/><div class="children"><div class="content">No, this is a language standard now (see PEP 723)</div><br/></div></div></div></div></div></div><div id="42677267" class="c"><input type="checkbox" id="c-42677267" checked=""/><div class="controls bullet"><span class="by">epistasis</span><span>|</span><a href="#42677101">parent</a><span>|</span><a href="#42677455">prev</a><span>|</span><a href="#42679321">next</a><span>|</span><label class="collapse" for="c-42677267">[-]</label><label class="expand" for="c-42677267">[1 more]</label></div><br/><div class="children"><div class="content">And for the Jupyter setting, check out Trevor Manz&#x27;s juv:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;manzt&#x2F;juv">https:&#x2F;&#x2F;github.com&#x2F;manzt&#x2F;juv</a></div><br/></div></div><div id="42679321" class="c"><input type="checkbox" id="c-42679321" checked=""/><div class="controls bullet"><span class="by">__MatrixMan__</span><span>|</span><a href="#42677101">parent</a><span>|</span><a href="#42677267">prev</a><span>|</span><a href="#42676926">next</a><span>|</span><label class="collapse" for="c-42679321">[-]</label><label class="expand" for="c-42679321">[1 more]</label></div><br/><div class="children"><div class="content">So it&#x27;s like a shebang for dependencies.  Cool.</div><br/></div></div></div></div><div id="42676926" class="c"><input type="checkbox" id="c-42676926" checked=""/><div class="controls bullet"><span class="by">stevage</span><span>|</span><a href="#42677101">prev</a><span>|</span><a href="#42680387">next</a><span>|</span><label class="collapse" for="c-42676926">[-]</label><label class="expand" for="c-42676926">[50 more]</label></div><br/><div class="children"><div class="content">As a NodeJS developer it&#x27;s still kind of shocking to me that Python still hasn&#x27;t resolved this mess. Node isn&#x27;t perfect, and dealing with different versions of Node is annoying, but at least there&#x27;s none of this &quot;worry about modifying global environment&quot; stuff.</div><br/><div id="42676978" class="c"><input type="checkbox" id="c-42676978" checked=""/><div class="controls bullet"><span class="by">mdaniel</span><span>|</span><a href="#42676926">parent</a><span>|</span><a href="#42677075">next</a><span>|</span><label class="collapse" for="c-42676978">[-]</label><label class="expand" for="c-42676978">[9 more]</label></div><br/><div class="children"><div class="content">Caveat: I&#x27;m a node outsider, only <i>forced</i> to interact with it<p>But there are a shocking number of install instructions that offer $(npm i -g) and if one is using Homebrew or nvm or a similar &quot;user writable&quot; node distribution, it won&#x27;t prompt for sudo password and will cheerfully mangle the &quot;origin&quot; node_modules<p>So, it&#x27;s the same story as with python: yes, but only if the user is disciplined<p>Now <i>ruby</i> drives me fucking bananas because it doesn&#x27;t seem to have <i>either</i> concept: virtualenvs nor .&#x2F;ruby_modules</div><br/><div id="42677883" class="c"><input type="checkbox" id="c-42677883" checked=""/><div class="controls bullet"><span class="by">MrJohz</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42676978">parent</a><span>|</span><a href="#42678191">next</a><span>|</span><label class="collapse" for="c-42677883">[-]</label><label class="expand" for="c-42677883">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s worth noting that Node allows two packages to have the same dependency at different versions, which means that `npm i -g` is typically a lot safer than a global `pip install`, because each package will essentially create its own dependency tree, isolated from other packages.  In practice, NPM has a deduplication process that makes this more complicated, and so you can run into issues (although I believe other package managers can handle this better), but I rarely run into issues with this.<p>That said, I agree that `npm i -g` is a poor system package manager, and you should typically be using Homebrew or whatever package manager makes the most sense on your system.  That said, `npx` is a good alternative if you just want to run a command quickly to try it out or something like that.</div><br/><div id="42680927" class="c"><input type="checkbox" id="c-42680927" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42677883">parent</a><span>|</span><a href="#42678191">next</a><span>|</span><label class="collapse" for="c-42680927">[-]</label><label class="expand" for="c-42680927">[1 more]</label></div><br/><div class="children"><div class="content">&gt;It&#x27;s worth noting that Node allows two packages to have the same dependency at different versions<p>Yes. It does this because <i>JavaScript</i> enables it - the default import syntax uses a file path.<p>Python&#x27;s default import syntax uses symbolic names. That allows you to do fun things like split a package across the filesystem, import from a zip file, and write custom importers, but doesn&#x27;t offer a clean way to specify the version you want to import. So Pip doesn&#x27;t try to install multiple versions either (which saves it the hassle of trying to namespace them). You could set up a system to make it work, but it&#x27;d be difficult and incredibly ugly.<p>Some other language ecosystems don&#x27;t have this problem because the import is resolved at compile time instead.</div><br/></div></div></div></div><div id="42678191" class="c"><input type="checkbox" id="c-42678191" checked=""/><div class="controls bullet"><span class="by">fny</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42676978">parent</a><span>|</span><a href="#42677883">prev</a><span>|</span><a href="#42680480">next</a><span>|</span><label class="collapse" for="c-42678191">[-]</label><label class="expand" for="c-42678191">[2 more]</label></div><br/><div class="children"><div class="content">Because you donât need virtualenvs or ruby_modules. You can have however many versions of the same gem installed itâs simply referenced by a gemfile, so for Ruby version X you are guaranteed one copy of gem version Y and no duplicates.<p>This whole installing the same dependencies a million times across different projects in Python and Node land is completely insane to me. Ruby has had the only sane package manager for <i>years.</i> Cargo too, but only because they copied Ruby.<p>Node has littered my computer with useless files. Pythonâs venv eat up a lot of space unnecessarily too.</div><br/><div id="42680945" class="c"><input type="checkbox" id="c-42680945" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42678191">parent</a><span>|</span><a href="#42680480">next</a><span>|</span><label class="collapse" for="c-42680945">[-]</label><label class="expand" for="c-42680945">[1 more]</label></div><br/><div class="children"><div class="content">In principle, venvs <i>could</i> hard-link the files from a common source, as long as the filesystem supports that. I&#x27;m planning to experiment with this for Paper. It&#x27;s also possible to use .pth files (<a href="https:&#x2F;&#x2F;docs.python.org&#x2F;3&#x2F;library&#x2F;site.html" rel="nofollow">https:&#x2F;&#x2F;docs.python.org&#x2F;3&#x2F;library&#x2F;site.html</a>) to add additional folders to the current environment at startup. (I&#x27;ve heard some whispers that this causes a performance hit, but I haven&#x27;t noticed. Python module imports are cached anyway.) Symlinks should work, too. (But I&#x27;m pretty sure Windows shortcuts would not. No idea about junctions.)</div><br/></div></div></div></div><div id="42680480" class="c"><input type="checkbox" id="c-42680480" checked=""/><div class="controls bullet"><span class="by">8n4vidtmkvmk</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42676978">parent</a><span>|</span><a href="#42678191">prev</a><span>|</span><a href="#42677401">next</a><span>|</span><label class="collapse" for="c-42680480">[-]</label><label class="expand" for="c-42680480">[2 more]</label></div><br/><div class="children"><div class="content">FWIW, you can usually just drop the `-g` and it&#x27;ll install into `node_modules&#x2F;.bin` instead, so it stays local to your project. You can run it straight out of there (by typing the path) or do `npm run &lt;pkg&gt;` which I <i>think</i> temporarily modifies $PATH to make it work.</div><br/><div id="42680496" class="c"><input type="checkbox" id="c-42680496" checked=""/><div class="controls bullet"><span class="by">nicoburns</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42680480">parent</a><span>|</span><a href="#42677401">next</a><span>|</span><label class="collapse" for="c-42680496">[-]</label><label class="expand" for="c-42680496">[1 more]</label></div><br/><div class="children"><div class="content">The `npx` command (which comes bundled with any nodejs install) is the way to do that these days.</div><br/></div></div></div></div><div id="42677401" class="c"><input type="checkbox" id="c-42677401" checked=""/><div class="controls bullet"><span class="by">andrewmcdonough</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42676978">parent</a><span>|</span><a href="#42680480">prev</a><span>|</span><a href="#42677075">next</a><span>|</span><label class="collapse" for="c-42677401">[-]</label><label class="expand" for="c-42677401">[2 more]</label></div><br/><div class="children"><div class="content">Ruby has a number of solutions for this - rvm (the oldest, but less popular these days), rbenv (probably the most popular), chruby&#x2F;gem_home (lightweight) or asdf (my personal choice as I can use the same tool for lots of languages). All of those tools install to locations that shouldn&#x27;t need root.</div><br/><div id="42677677" class="c"><input type="checkbox" id="c-42677677" checked=""/><div class="controls bullet"><span class="by">mdaniel</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42677401">parent</a><span>|</span><a href="#42677075">next</a><span>|</span><label class="collapse" for="c-42677677">[-]</label><label class="expand" for="c-42677677">[1 more]</label></div><br/><div class="children"><div class="content">Yes, I am aware of all of those, although I couldn&#x27;t offhand tell anyone the difference in tradeoffs between them. But I consider having to install a fresh copy of the whole distribution a grave antipattern. I&#x27;m aware that nvm and pyenv default to it and I don&#x27;t like that<p>I did notice how Homebrew sets env GEM_HOME=&lt;Cellar&gt;&#x2F;libexec GEM_PATH=&lt;Cellar&gt;&#x2F;libexec (e.g. &lt;<a href="https:&#x2F;&#x2F;github.com&#x2F;Homebrew&#x2F;homebrew-core&#x2F;blob&#x2F;9f056db169d5f7e7cca264f406a370b3fb967ee4&#x2F;Formula&#x2F;f&#x2F;fastlane.rb#L35-L36">https:&#x2F;&#x2F;github.com&#x2F;Homebrew&#x2F;homebrew-core&#x2F;blob&#x2F;9f056db169d5f...</a>&gt;) but, similar to my node experience, since I am a ruby outsider I don&#x27;t totally grok what isolation that provides</div><br/></div></div></div></div></div></div><div id="42677075" class="c"><input type="checkbox" id="c-42677075" checked=""/><div class="controls bullet"><span class="by">PaulHoule</span><span>|</span><a href="#42676926">parent</a><span>|</span><a href="#42676978">prev</a><span>|</span><a href="#42679623">next</a><span>|</span><label class="collapse" for="c-42677075">[-]</label><label class="expand" for="c-42677075">[11 more]</label></div><br/><div class="children"><div class="content">Python has been cleaning up a number of really lethal problems like:<p>(i) wrongly configured character encodings (suppose you incorporated somebody else&#x27;s library that does a &quot;print&quot; and the input data contains some invalid characters that wind up getting printed;  that &quot;print&quot; could crash a model trainer script that runs for three days if error handling is set wrong and you couldn&#x27;t change it when the script was running,  at most you could make the script start another python with different command line arguments)<p>(ii) site-packages;  all your data scientist has to do is<p><pre><code>   pip install --user
</code></pre>
the wrong package and they&#x27;d trashed <i>all</i> of their virtualenvs,  all of their condas,  etc.  Over time the defaults have changed so pythons aren&#x27;t looking into the site-packages directories but I wasted a long time figuring out why a team of data scientists couldn&#x27;t get anything to work reliably<p>(iii) &quot;python&quot; built into Linux by default.  People expected Python to &quot;just work&quot; but it doesn&#x27;t &quot;just work&quot; when people start installing stuff with pip because you might be working on one thing that needs one package and another thing that needs another package and you could trash <i>everything</i> you&#x27;re doing with python in the process of trying to fix it.<p>Unfortunately python has attracted a lot of sloppy programmers who think virtualenv is too much work and that it&#x27;s totally normal for everything to be broken all the time.  The average data scientist doesn&#x27;t get excited when it crumbles and breaks,  but you can&#x27;t just call up some flakes to fix it. [1]<p>[1] <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=tiQPkfS2Q84" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=tiQPkfS2Q84</a></div><br/><div id="42677436" class="c"><input type="checkbox" id="c-42677436" checked=""/><div class="controls bullet"><span class="by">whatever1</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42677075">parent</a><span>|</span><a href="#42677811">next</a><span>|</span><label class="collapse" for="c-42677436">[-]</label><label class="expand" for="c-42677436">[7 more]</label></div><br/><div class="children"><div class="content">I donât exactly remember the situation but a user created a python module named error.py.<p>Then in their main code they imported the said error.py but unfortunately numpy library also has an error.py. So the user was getting very funky behavior.</div><br/><div id="42681004" class="c"><input type="checkbox" id="c-42681004" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42677436">parent</a><span>|</span><a href="#42680096">next</a><span>|</span><label class="collapse" for="c-42681004">[-]</label><label class="expand" for="c-42681004">[1 more]</label></div><br/><div class="children"><div class="content">Yep, happens all the time with the standard library. Nowadays, third-party libraries have this issue much less because they can use relative imports except for their dependencies. But the Python standard library, for historical reasons, isn&#x27;t organized into a package, so it can&#x27;t do that.<p>Here&#x27;s a fun one (this was improved in 3.11, but some other names like `traceback.py` can still reproduce a similar problem):<p><pre><code>  &#x2F;tmp$ touch token.py
  &#x2F;tmp$ py3.10
  Python 3.10.14 (main, Jun 24 2024, 03:37:47) [GCC 11.4.0] on linux
  Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
  &gt;&gt;&gt; help()
  Traceback (most recent call last):
    File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
    File &quot;&#x2F;opt&#x2F;python&#x2F;standard&#x2F;lib&#x2F;python3.10&#x2F;_sitebuiltins.py&quot;, line 102, in __call__
      import pydoc
    File &quot;&#x2F;opt&#x2F;python&#x2F;standard&#x2F;lib&#x2F;python3.10&#x2F;pydoc.py&quot;, line 62, in &lt;module&gt;
      import inspect
    File &quot;&#x2F;opt&#x2F;python&#x2F;standard&#x2F;lib&#x2F;python3.10&#x2F;inspect.py&quot;, line 43, in &lt;module&gt;
      import linecache
    File &quot;&#x2F;opt&#x2F;python&#x2F;standard&#x2F;lib&#x2F;python3.10&#x2F;linecache.py&quot;, line 11, in &lt;module&gt;
      import tokenize
    File &quot;&#x2F;opt&#x2F;python&#x2F;standard&#x2F;lib&#x2F;python3.10&#x2F;tokenize.py&quot;, line 36, in &lt;module&gt;
      from token import EXACT_TOKEN_TYPES
  ImportError: cannot import name &#x27;EXACT_TOKEN_TYPES&#x27; from &#x27;token&#x27; (&#x2F;tmp&#x2F;token.py)
</code></pre>
Related Stack Overflow Q&amp;A (featuring an answer from me): <a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;36250353" rel="nofollow">https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;36250353</a></div><br/></div></div><div id="42680096" class="c"><input type="checkbox" id="c-42680096" checked=""/><div class="controls bullet"><span class="by">hauntsaninja</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42677436">parent</a><span>|</span><a href="#42681004">prev</a><span>|</span><a href="#42677480">next</a><span>|</span><label class="collapse" for="c-42680096">[-]</label><label class="expand" for="c-42680096">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, that&#x27;s not exactly the problematic situation... but the good news is I improved the Python&#x27;s error message for this in 3.13. See <a href="https:&#x2F;&#x2F;docs.python.org&#x2F;3&#x2F;whatsnew&#x2F;3.13.html#improved-error-messages" rel="nofollow">https:&#x2F;&#x2F;docs.python.org&#x2F;3&#x2F;whatsnew&#x2F;3.13.html#improved-error-...</a></div><br/></div></div><div id="42677480" class="c"><input type="checkbox" id="c-42677480" checked=""/><div class="controls bullet"><span class="by">PaulHoule</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42677436">parent</a><span>|</span><a href="#42680096">prev</a><span>|</span><a href="#42677811">next</a><span>|</span><label class="collapse" for="c-42677480">[-]</label><label class="expand" for="c-42677480">[4 more]</label></div><br/><div class="children"><div class="content">... it&#x27;s tricky.  In Java there&#x27;s a cultural expectation that you name a package like<p><pre><code>  package organization.dns.name.this.and.that;
</code></pre>
but real scalability in a module system requires that somebody else packages things up as<p><pre><code>  package this.and.that;
</code></pre>
and you can make the system look at a particular wheel&#x2F;jar&#x2F;whatever and make it visible with a prefix you specify like<p><pre><code>  package their.this.and.that;
</code></pre>
Programmers seem to hate rigorous namespace systems though.  My first year programming Java (before JDK 1.0) the web site that properly documented how to use Java packages was at NASA and you still had people writing Java classes that were in the default package.</div><br/><div id="42677756" class="c"><input type="checkbox" id="c-42677756" checked=""/><div class="controls bullet"><span class="by">mdaniel</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42677480">parent</a><span>|</span><a href="#42678192">next</a><span>|</span><label class="collapse" for="c-42677756">[-]</label><label class="expand" for="c-42677756">[2 more]</label></div><br/><div class="children"><div class="content">But let&#x27;s all be real here: the ability of __init__.py to do FUCKING ANYTHING IT WANTS is insanity made manifest<p>I am kind of iffy on golang&#x27;s import (. &quot;some&#x2F;packge&#x2F;for&#x2F;side-effects&quot;) but at least it cannot suddenly mutate GOPATH[0]=&quot;&#x2F;home&#x2F;jimmy&#x2F;lol&#x2F;u&#x2F;fucked&quot; as one seems to be able to do on the regular with python<p>I am acutely aware that is (programmer|package|organization|culture)-dependent but the very idea that one can do that drives us rigorous people stark-raving</div><br/><div id="42681073" class="c"><input type="checkbox" id="c-42681073" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42677756">parent</a><span>|</span><a href="#42678192">next</a><span>|</span><label class="collapse" for="c-42681073">[-]</label><label class="expand" for="c-42681073">[1 more]</label></div><br/><div class="children"><div class="content">It took me a while to realize that you do mean __init__.py running when a package imports.<p>But, you know, top-level code (which can do anything) runs when you import <i>any</i> Python module (the first time), and Python code doesn&#x27;t have to be in a package to get imported. (The standard library depends on this.)</div><br/></div></div></div></div><div id="42678192" class="c"><input type="checkbox" id="c-42678192" checked=""/><div class="controls bullet"><span class="by">vlovich123</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42677480">parent</a><span>|</span><a href="#42677756">prev</a><span>|</span><a href="#42677811">next</a><span>|</span><label class="collapse" for="c-42678192">[-]</label><label class="expand" for="c-42678192">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Programmers seem to hate rigorous namespace systems though<p>Pretty much a nothing burger in Rust, so I disagree that items necessarily hate the concept. Maybe others havenât done a good job with the UX?</div><br/></div></div></div></div></div></div><div id="42677811" class="c"><input type="checkbox" id="c-42677811" checked=""/><div class="controls bullet"><span class="by">worik</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42677075">parent</a><span>|</span><a href="#42677436">prev</a><span>|</span><a href="#42679623">next</a><span>|</span><label class="collapse" for="c-42677811">[-]</label><label class="expand" for="c-42677811">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Python has been cleaning up a number of really lethal problems like<p>I wish they would stick to semantic versioning tho.<p>I have used two projects that got stuck in incompatible changes in the 3.x Python.<p>That is a fatal problem for Python.  If a change in a minor version makes things stop working, it is very hard to recommend the system.  A lot of work has gone down the drain, by this Python user, trying to work around that</div><br/><div id="42680338" class="c"><input type="checkbox" id="c-42680338" checked=""/><div class="controls bullet"><span class="by">meitham</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42677811">parent</a><span>|</span><a href="#42679623">next</a><span>|</span><label class="collapse" for="c-42680338">[-]</label><label class="expand" for="c-42680338">[2 more]</label></div><br/><div class="children"><div class="content">I assume these breaking changes are in the stdlib and not in the python interpreter (the language), right?<p>There was previous discussions about uncoupling the stdlib (python libraries) from the release and have them being released independently, but I canât remember why that died off</div><br/><div id="42681095" class="c"><input type="checkbox" id="c-42681095" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42680338">parent</a><span>|</span><a href="#42679623">next</a><span>|</span><label class="collapse" for="c-42681095">[-]</label><label class="expand" for="c-42681095">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I assume these breaking changes are in the stdlib and not in the python interpreter (the language), right?<p>That&#x27;s the usual case, but it can definitely also happen because of the language - see <a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;51337939" rel="nofollow">https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;51337939</a> .<p>&gt; There was previous discussions about uncoupling the stdlib (python libraries) from the release and have them being released independently, but I canât remember why that died off<p>This sort of thing is mainly a social problem.</div><br/></div></div></div></div></div></div></div></div><div id="42679623" class="c"><input type="checkbox" id="c-42679623" checked=""/><div class="controls bullet"><span class="by">fastball</span><span>|</span><a href="#42676926">parent</a><span>|</span><a href="#42677075">prev</a><span>|</span><a href="#42680893">next</a><span>|</span><label class="collapse" for="c-42679623">[-]</label><label class="expand" for="c-42679623">[2 more]</label></div><br/><div class="children"><div class="content">Environment and dependency management in JS-land is even worse.<p>Similar problems with runtime version management (need to use nvm for sanity, using built-in OS package managers seems to consistently result in tears).<p>More package managers and interactions (corepack, npm, pnpm, yarn, bun).<p>Bad package interop (ESM vs CJS vs UMD).<p>More runtimes (Node, Deno, Bun, Edge).<p>Then compound this all with the fact that JS doesn&#x27;t have a comprehensive stdlib so your average project has literally 1000s of dependencies.</div><br/><div id="42679946" class="c"><input type="checkbox" id="c-42679946" checked=""/><div class="controls bullet"><span class="by">nosefurhairdo</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42679623">parent</a><span>|</span><a href="#42680893">next</a><span>|</span><label class="collapse" for="c-42679946">[-]</label><label class="expand" for="c-42679946">[1 more]</label></div><br/><div class="children"><div class="content">Valid criticisms, but the &quot;standard&quot; choices all work well. Nvm is the de facto standard for node version management, npm is a totally satisfactory package manager, node is the standard runtime that those other runtimes try to be compatible with, etc.<p>Will also note that in my years of js experience I&#x27;ve hardly ever run into module incompatibilities. It&#x27;s definitely gnarly when it happens, but wouldn&#x27;t consider this to be the same category of problem as the confusion of setting up python.<p>Hopefully uv can convince me that python&#x27;s environment&#x2F;dependency management can be easier than JavaScript&#x27;s. Currently they both feel bad in their own way, and I likely prefer js out of familiarity.</div><br/></div></div></div></div><div id="42680893" class="c"><input type="checkbox" id="c-42680893" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676926">parent</a><span>|</span><a href="#42679623">prev</a><span>|</span><a href="#42679409">next</a><span>|</span><label class="collapse" for="c-42680893">[-]</label><label class="expand" for="c-42680893">[1 more]</label></div><br/><div class="children"><div class="content">When was the last time you saw a NodeJS package that expects to be able to compile Fortran code at installation time?<p>If you want Numpy (one of the most popular Python packages) on a system that doesn&#x27;t have a pre-built wheel, you&#x27;ll need to do that. Which is why there are, by my count, 54 different pre-built wheels for Numpy 2.2.1.<p>And that&#x27;s just the actual installation process. Package <i>management</i> isn&#x27;t solved because people don&#x27;t even agree on <i>what that entails</i>.<p>The only way you avoid &quot;worry about modifying the global environment&quot; is to have non-global environments. But the Python world is full of people who refuse to understand that concept. People would rather type `pip install suspicious-package --break-system-packages` than learn what a venv is. (And they&#x27;ll sometimes do it with `sudo`, too, because of a cargo-cult belief that this somehow magically fixes things - spoilers: it&#x27;s typically because the root user has different environment variables.)<p>Which is why this thread happened on the Python forums <a href="https:&#x2F;&#x2F;discuss.python.org&#x2F;t&#x2F;the-most-popular-advice-on-the-internet-for-error-externally-managed-environment-is-to-force-packages-to-be-system-installed&#x2F;56900" rel="nofollow">https:&#x2F;&#x2F;discuss.python.org&#x2F;t&#x2F;the-most-popular-advice-on-the-...</a> , and part of why the corresponding Stack Overflow question <a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;75608323" rel="nofollow">https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;75608323</a> has 1.4 million views. Even though it&#x27;s about an error message that was carefully crafted by the Debian team to <i>tell you what to do</i> instead.</div><br/></div></div><div id="42679409" class="c"><input type="checkbox" id="c-42679409" checked=""/><div class="controls bullet"><span class="by">__MatrixMan__</span><span>|</span><a href="#42676926">parent</a><span>|</span><a href="#42680893">prev</a><span>|</span><a href="#42677319">next</a><span>|</span><label class="collapse" for="c-42679409">[-]</label><label class="expand" for="c-42679409">[2 more]</label></div><br/><div class="children"><div class="content">I think it makes sense given that people using python to write applications are a minority of python users.  It&#x27;s mostly students, scientists, people with the word &quot;analyst&quot; in their title, etc.  Perhaps this goes poorly in practice, but these users ostensibly have somebody else to lean on re: setting up their environments, and <i>those</i> people aren&#x27;t developers either.<p>I have to imagine that the python maintainers listen for what the community needs and hear a thousand voices asking for a hundred different packaging strategies, and a million voices asking for the same language features.  I can forgive them for prioritizing things the way they have.</div><br/><div id="42679441" class="c"><input type="checkbox" id="c-42679441" checked=""/><div class="controls bullet"><span class="by">stevage</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42679409">parent</a><span>|</span><a href="#42677319">next</a><span>|</span><label class="collapse" for="c-42679441">[-]</label><label class="expand" for="c-42679441">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not sure I understand your point. Managing dependencies is easy in node. It seems to be harder in Python. What priority is being supported here?</div><br/></div></div></div></div><div id="42677319" class="c"><input type="checkbox" id="c-42677319" checked=""/><div class="controls bullet"><span class="by">RobinL</span><span>|</span><a href="#42676926">parent</a><span>|</span><a href="#42679409">prev</a><span>|</span><a href="#42677139">next</a><span>|</span><label class="collapse" for="c-42677319">[-]</label><label class="expand" for="c-42677319">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve only recently started with uv, but this is one thing it seems to solve nicely.  I&#x27;ve tried to get into the mindset of only using uv for python stuff - and hence I haven&#x27;t installed python using homebrew, only uv.<p>You basically need to just remember to never call python directly. Instead use uv run and uv pip install.  That ensures you&#x27;re always using the uv installed python and&#x2F;or a venv.<p>Python based tools where you may want a global install (say ruff) can be installed using uv tool</div><br/><div id="42681101" class="c"><input type="checkbox" id="c-42681101" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42677319">parent</a><span>|</span><a href="#42678084">next</a><span>|</span><label class="collapse" for="c-42681101">[-]</label><label class="expand" for="c-42681101">[1 more]</label></div><br/><div class="children"><div class="content">&gt;You basically need to just remember to never call python directly. Instead use uv run and uv pip install.<p>I don&#x27;t understand why people would rather do this part specfically, rather than activate a venv.</div><br/></div></div><div id="42678084" class="c"><input type="checkbox" id="c-42678084" checked=""/><div class="controls bullet"><span class="by">rented_mule</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42677319">parent</a><span>|</span><a href="#42681101">prev</a><span>|</span><a href="#42677139">next</a><span>|</span><label class="collapse" for="c-42678084">[-]</label><label class="expand" for="c-42678084">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Python based tools where you may want a global install (say ruff) can be installed using uv tool<p>uv itself is the only Python tool I install globally now, and it&#x27;s a self-contained binary that doesn&#x27;t rely on Python. ruff is also self-contained, but I install tools like ruff (and Python itself) into each project&#x27;s virtual environment using uv. This has nice benefits. For example, automated tests that include linting with ruff do not suddenly fail because the system-wide ruff was updated to a version that changes rules (or different versions are on different machines). Version pinning gets applied to tooling just as it does to packages. I can then upgrade tools when I know it&#x27;s a good time to deal with potentially breaking changes. And one project doesn&#x27;t hold back the rest. Once things are working, they work on all machines that use the same project repo.<p>If I want to use Python based tools outside of projects, I now do little shell scripts. For example, my &#x2F;usr&#x2F;local&#x2F;bin&#x2F;wormhole looks like this:<p><pre><code>  #!&#x2F;bin&#x2F;sh
  uvx \
      --quiet \
      --prerelease disallow \
      --python-preference only-managed \
      --from magic-wormhole \
      wormhole &quot;$@&quot;</code></pre></div><br/></div></div></div></div><div id="42677139" class="c"><input type="checkbox" id="c-42677139" checked=""/><div class="controls bullet"><span class="by">TZubiri</span><span>|</span><a href="#42676926">parent</a><span>|</span><a href="#42677319">prev</a><span>|</span><a href="#42677036">next</a><span>|</span><label class="collapse" for="c-42677139">[-]</label><label class="expand" for="c-42677139">[5 more]</label></div><br/><div class="children"><div class="content">Because node.js isn&#x27;t a dependency of the Operating system.<p>Also we don&#x27;t have a left pad scale dependency ecosystem that makes version conflicts such a pressing issue.</div><br/><div id="42677481" class="c"><input type="checkbox" id="c-42677481" checked=""/><div class="controls bullet"><span class="by">sgarland</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42677139">parent</a><span>|</span><a href="#42679196">next</a><span>|</span><label class="collapse" for="c-42677481">[-]</label><label class="expand" for="c-42677481">[1 more]</label></div><br/><div class="children"><div class="content">This. IME, JS devs rarely have much experience with an OS, let alone Linux, and forget that Python literally runs parts of the OS. You canât just break it, because people might have critical scripts that depend on the current behavior.</div><br/></div></div><div id="42679196" class="c"><input type="checkbox" id="c-42679196" checked=""/><div class="controls bullet"><span class="by">wruza</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42677139">parent</a><span>|</span><a href="#42677481">prev</a><span>|</span><a href="#42677036">next</a><span>|</span><label class="collapse" for="c-42679196">[-]</label><label class="expand" for="c-42679196">[3 more]</label></div><br/><div class="children"><div class="content">Oh, tell us OS canât venv itself a separate python root and keep itself away from what user invents to manage deps. This is non-explanation appealing to authority while itâs clearly just a mess lacking any thought. It just works like this.<p><i>we don&#x27;t have a left pad scale dependency ecosystem that makes version conflicts such a pressing issue</i><p>TensorFlow.</div><br/><div id="42681125" class="c"><input type="checkbox" id="c-42681125" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42679196">parent</a><span>|</span><a href="#42679756">next</a><span>|</span><label class="collapse" for="c-42681125">[-]</label><label class="expand" for="c-42681125">[1 more]</label></div><br/><div class="children"><div class="content">&gt;Oh, tell us OS canât venv itself a separate python root and keep itself away from what user invents to manage deps.<p>I&#x27;ve had this thought too. But it&#x27;s not without its downsides. Users would have to know about and activate that venv in order to, say, play with system-provided GTK bindings. And it doesn&#x27;t solve the problem that the user may manage dependencies for more than one project, that don&#x27;t play nice with each other. If everything has its own venv, then what is the &quot;real&quot; environment even <i>for</i>?</div><br/></div></div><div id="42679756" class="c"><input type="checkbox" id="c-42679756" checked=""/><div class="controls bullet"><span class="by">TZubiri</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42679196">parent</a><span>|</span><a href="#42681125">prev</a><span>|</span><a href="#42677036">next</a><span>|</span><label class="collapse" for="c-42679756">[-]</label><label class="expand" for="c-42679756">[1 more]</label></div><br/><div class="children"><div class="content">We have virtual envs and package isolation, it&#x27;s usually bloated, and third party and doesn&#x27;t make for a good robust OS base, it&#x27;s more an app layer. See flatpak, snapcraft.<p>&quot;Compares left pad with ml library backing the hottest AI companies of the cycle&quot;</div><br/></div></div></div></div></div></div><div id="42677036" class="c"><input type="checkbox" id="c-42677036" checked=""/><div class="controls bullet"><span class="by">cdaringe</span><span>|</span><a href="#42676926">parent</a><span>|</span><a href="#42677139">prev</a><span>|</span><a href="#42677110">next</a><span>|</span><label class="collapse" for="c-42677036">[-]</label><label class="expand" for="c-42677036">[8 more]</label></div><br/><div class="children"><div class="content">Hot take: pnpm is the best dx, of all p&#x2F;l dep toolchains, for devs who are operating regularly in many projects.<p>Get me the deps this project needs, get them fast, then them correctly, all with minimum hoops.<p>Cargo and deno toolchains are pretty good too.<p>Opam, gleam, mvn&#x2F;gradle, stack, npm&#x2F;yarn, nix even, pip&#x2F;poetry&#x2F;whatever-python-malarkey, go, composer, â¦what other stuff have i used in the past 12 monthsâ¦ c&#x2F;c++ doesnât really have a first class std other than global sys deps (so ill refer back to nix or os package managers).<p>Getting the stuff you need where you need it is always doable. Some toolchains are just above and beyond, batteries included, ready for productivity.</div><br/><div id="42677618" class="c"><input type="checkbox" id="c-42677618" checked=""/><div class="controls bullet"><span class="by">krashidov</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42677036">parent</a><span>|</span><a href="#42677188">next</a><span>|</span><label class="collapse" for="c-42677618">[-]</label><label class="expand" for="c-42677618">[1 more]</label></div><br/><div class="children"><div class="content">Have you used bun? It&#x27;s also great. Super fast</div><br/></div></div><div id="42677188" class="c"><input type="checkbox" id="c-42677188" checked=""/><div class="controls bullet"><span class="by">theogravity</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42677036">parent</a><span>|</span><a href="#42677618">prev</a><span>|</span><a href="#42677852">next</a><span>|</span><label class="collapse" for="c-42677188">[-]</label><label class="expand" for="c-42677188">[3 more]</label></div><br/><div class="children"><div class="content">pnpm is the best for monorepos. I&#x27;ve tried yarn workspaces and npm&#x27;s idea of it and nothing comes close to the DX of pnpm</div><br/><div id="42678935" class="c"><input type="checkbox" id="c-42678935" checked=""/><div class="controls bullet"><span class="by">paularmstrong</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42677188">parent</a><span>|</span><a href="#42677852">next</a><span>|</span><label class="collapse" for="c-42678935">[-]</label><label class="expand" for="c-42678935">[2 more]</label></div><br/><div class="children"><div class="content">What actually, as an end user, about pnpm is better than Yarn? I&#x27;ve never found an advantage with pnpm in all the times I&#x27;ve tried it. They seem very 1:1 to me, but Yarn edges it out thanks to it having a plugin system and its ability to automatically pull `@types&#x2F;` packages when needed.</div><br/><div id="42679215" class="c"><input type="checkbox" id="c-42679215" checked=""/><div class="controls bullet"><span class="by">wruza</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42678935">parent</a><span>|</span><a href="#42677852">next</a><span>|</span><label class="collapse" for="c-42679215">[-]</label><label class="expand" for="c-42679215">[1 more]</label></div><br/><div class="children"><div class="content"><i>automatically pull `@types&#x2F;` packages when needed</i><p>Wait, what? Since when?</div><br/></div></div></div></div></div></div><div id="42677852" class="c"><input type="checkbox" id="c-42677852" checked=""/><div class="controls bullet"><span class="by">mdaniel</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42677036">parent</a><span>|</span><a href="#42677188">prev</a><span>|</span><a href="#42677110">next</a><span>|</span><label class="collapse" for="c-42677852">[-]</label><label class="expand" for="c-42677852">[3 more]</label></div><br/><div class="children"><div class="content">I swear I&#x27;m not trolling: what do you not like about modern golang&#x27;s dep management (e.g. go.mod and go.sum)?<p>I agree that the old days of &quot;there are 15 dep managers, good luck&quot; was high chaos. And those who do cutesy shit like using &quot;replace&quot; in their go.mod[1] is sus but as far as dx $(go get) that caches by default in $XDG_CACHE_DIR and uses $GOPROXY I think is great<p>1: <a href="https:&#x2F;&#x2F;github.com&#x2F;opentofu&#x2F;opentofu&#x2F;blob&#x2F;v1.9.0&#x2F;go.mod#L271">https:&#x2F;&#x2F;github.com&#x2F;opentofu&#x2F;opentofu&#x2F;blob&#x2F;v1.9.0&#x2F;go.mod#L271</a></div><br/><div id="42679411" class="c"><input type="checkbox" id="c-42679411" checked=""/><div class="controls bullet"><span class="by">geethree</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42677852">parent</a><span>|</span><a href="#42677110">next</a><span>|</span><label class="collapse" for="c-42679411">[-]</label><label class="expand" for="c-42679411">[2 more]</label></div><br/><div class="children"><div class="content">To be fair your specific example is due toâ¦ well forking terraform due to hashicorp licensing changes.</div><br/><div id="42679527" class="c"><input type="checkbox" id="c-42679527" checked=""/><div class="controls bullet"><span class="by">mdaniel</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42679411">parent</a><span>|</span><a href="#42677110">next</a><span>|</span><label class="collapse" for="c-42679527">[-]</label><label class="expand" for="c-42679527">[1 more]</label></div><br/><div class="children"><div class="content">hcl is still MPLv2 <a href="https:&#x2F;&#x2F;github.com&#x2F;hashicorp&#x2F;hcl&#x2F;blob&#x2F;v2.23.0&#x2F;LICENSE">https:&#x2F;&#x2F;github.com&#x2F;hashicorp&#x2F;hcl&#x2F;blob&#x2F;v2.23.0&#x2F;LICENSE</a> and my complaint is that the .go file has one import path but the compiler is going to <i>secretly</i> use a fork, versus updating the import path like a sane person. The only way anyone would know to check for why the <i>complied</i> code behaves differently is to know that trickery was possible<p>And that&#x27;s not even getting into this horseshit: <a href="https:&#x2F;&#x2F;github.com&#x2F;opentofu&#x2F;hcl&#x2F;blob&#x2F;v2.20.1&#x2F;go.mod#L1">https:&#x2F;&#x2F;github.com&#x2F;opentofu&#x2F;hcl&#x2F;blob&#x2F;v2.20.1&#x2F;go.mod#L1</a> which apparently allows one to declare a repos _import_ path to be different from the url used to fetch it<p>I have a similar complaint about how in the world anyone would know how &quot;gopkg.in&#x2F;yaml.v3&quot; secretly resolved to 
view-source:<a href="https:&#x2F;&#x2F;gopkg.in&#x2F;yaml.v3?go-get=1" rel="nofollow">https:&#x2F;&#x2F;gopkg.in&#x2F;yaml.v3?go-get=1</a></div><br/></div></div></div></div></div></div></div></div><div id="42677110" class="c"><input type="checkbox" id="c-42677110" checked=""/><div class="controls bullet"><span class="by">miohtama</span><span>|</span><a href="#42676926">parent</a><span>|</span><a href="#42677036">prev</a><span>|</span><a href="#42677329">next</a><span>|</span><label class="collapse" for="c-42677110">[-]</label><label class="expand" for="c-42677110">[1 more]</label></div><br/><div class="children"><div class="content">It is kind of solved, but not default.<p>This makes a big difference. There is also the social problem of Python community with too loud opinions for making a good robust default solution.<p>But same has now happened for Node with npm, yarn and pnpm.</div><br/></div></div><div id="42677329" class="c"><input type="checkbox" id="c-42677329" checked=""/><div class="controls bullet"><span class="by">Etheryte</span><span>|</span><a href="#42676926">parent</a><span>|</span><a href="#42677110">prev</a><span>|</span><a href="#42677348">next</a><span>|</span><label class="collapse" for="c-42677329">[-]</label><label class="expand" for="c-42677329">[1 more]</label></div><br/><div class="children"><div class="content">I wouldn&#x27;t really say it&#x27;s that black and white. It was only recently that many large libraries and tools recommended starting with &quot;npm i -g ...&quot;. Of course you could avoid it if you knew better, but the same is true for Python.</div><br/></div></div><div id="42677348" class="c"><input type="checkbox" id="c-42677348" checked=""/><div class="controls bullet"><span class="by">zo1</span><span>|</span><a href="#42676926">parent</a><span>|</span><a href="#42677329">prev</a><span>|</span><a href="#42680387">next</a><span>|</span><label class="collapse" for="c-42677348">[-]</label><label class="expand" for="c-42677348">[6 more]</label></div><br/><div class="children"><div class="content">Half the time something breaks in a javascript repo or project, every single damn javascript expert in the team&#x2F;company tells me to troubleshoot using the below sequence, as if throwing spaghetti on a wall with no idea what&#x27;s wrong.<p>Run npm install<p>Delete node_modules and wait 30minutes because it takes forever to delete 500MB worth of 2 million files.<p>Do an npm install again (or yarn install or that third one that popped up recently?)<p>Uninstall&#x2F;Upgrade npm (or is it Node? No wait, npx I think. Oh well, used to be node + npm, now it&#x27;s something different.)<p>Then do steps 1 to 3 again, just in case.<p>Hmm, maybe it&#x27;s the lockfile? Delete it, one of the juniors pushed their version to the repo without compiling maybe. (Someone forgot to add it to the gitignore file?)<p>Okay, do steps 1 to 3 again, that might have fixed it.<p>If you&#x27;ve gotten here, you are royally screwed and should try the next javascript expert, he might have seen your error before.<p>So no, I&#x27;m a bit snarky here, but the JS ecosystem is a clustermess of chaos and should rather fix it&#x27;s own stuff first. I have none of the above issues with python, a proper IDE and out of the box pip.</div><br/><div id="42679241" class="c"><input type="checkbox" id="c-42679241" checked=""/><div class="controls bullet"><span class="by">wruza</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42677348">parent</a><span>|</span><a href="#42677553">next</a><span>|</span><label class="collapse" for="c-42679241">[-]</label><label class="expand" for="c-42679241">[2 more]</label></div><br/><div class="children"><div class="content">So youâre not experiencing exactly this with pip&#x2F;etc? I hit this âjust rebuild this 10GB venvâ scenario like twice a day while learning ML. Maybe itâs just ML, but then regular node projects donât have complex build-step &#x2F; version-clash deps either.</div><br/><div id="42680735" class="c"><input type="checkbox" id="c-42680735" checked=""/><div class="controls bullet"><span class="by">zo1</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42679241">parent</a><span>|</span><a href="#42677553">next</a><span>|</span><label class="collapse" for="c-42680735">[-]</label><label class="expand" for="c-42680735">[1 more]</label></div><br/><div class="children"><div class="content">I think it&#x27;s something unique to python&#x27;s ML ecosystem, to be honest. There is a lot of up-in-the-air about how to handle models, binaries and all of that in a contained package, and that results in quite a few hand-rolled solutions, some of which encroach on the package manager&#x27;s territory, plus of course drivers and windows.<p>I&#x27;ve worked on&#x2F;with some fairly large&#x2F;complex python projects, and they almost never have any packaging issues that aren&#x27;t just obvious errors by users. Yes, every once in a while we have to be explicit about a dependency because some dependent project isn&#x27;t very strict with their versioning policy and their API layers.</div><br/></div></div></div></div><div id="42677553" class="c"><input type="checkbox" id="c-42677553" checked=""/><div class="controls bullet"><span class="by">cdaringe</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42677348">parent</a><span>|</span><a href="#42679241">prev</a><span>|</span><a href="#42678002">next</a><span>|</span><label class="collapse" for="c-42677553">[-]</label><label class="expand" for="c-42677553">[1 more]</label></div><br/><div class="children"><div class="content">The pain is real. Most of the issues are navigable, but often take careful thought versus some canned recipe. npm or yarn in large projects can be a nightmare. starting with pnpm makes it a dream. Sometimes migrating to pnpm can be rough, because projects that work may rely on incorrect, transitive, undeclared deps actually resolving. Anyway, starting from pnpm generally resolves this sort of chaos.<p>Most packing managers are developed.<p>Pnpm is engineered.<p>Itâs one of the few projects I donate to on GitHub</div><br/></div></div><div id="42678002" class="c"><input type="checkbox" id="c-42678002" checked=""/><div class="controls bullet"><span class="by">wiseowise</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42677348">parent</a><span>|</span><a href="#42677553">prev</a><span>|</span><a href="#42678106">next</a><span>|</span><label class="collapse" for="c-42678002">[-]</label><label class="expand" for="c-42678002">[1 more]</label></div><br/><div class="children"><div class="content">What kind of amateurs are you working with? Iâm not a Node.js dev and even I know about npm ci command.</div><br/></div></div><div id="42678106" class="c"><input type="checkbox" id="c-42678106" checked=""/><div class="controls bullet"><span class="by">mirekrusin</span><span>|</span><a href="#42676926">root</a><span>|</span><a href="#42677348">parent</a><span>|</span><a href="#42678002">prev</a><span>|</span><a href="#42680387">next</a><span>|</span><label class="collapse" for="c-42678106">[-]</label><label class="expand" for="c-42678106">[1 more]</label></div><br/><div class="children"><div class="content">Sounds like a tale from a decade ago, people now use things like pnpm and tsx.</div><br/></div></div></div></div></div></div><div id="42680387" class="c"><input type="checkbox" id="c-42680387" checked=""/><div class="controls bullet"><span class="by">krick</span><span>|</span><a href="#42676926">prev</a><span>|</span><a href="#42681266">next</a><span>|</span><label class="collapse" for="c-42680387">[-]</label><label class="expand" for="c-42680387">[7 more]</label></div><br/><div class="children"><div class="content">Ok, this must be a dumb question answered by the manual, but I still haven&#x27;t got my hands on uv, so: but does it solve the opposite? I mean, I pretty much never want any &quot;ad-hoc&quot; environments, but I always end up with my .venv becoming an ad-hoc environment, because I install stuff while experimenting, not bothering to patch requirements.txt, pyproject.toml or anything of the sort. In fact, now I usually don&#x27;t even bother typing pip install, PyCharm does it for me.<p>This is of course bad practice. What I would like instead is what PHP&#x27;s composer does: installing stuff automatically changes pyprpject.toml (or whatever the standard will be with uv), automatically freezes the versions, and then it is on git diff to tell me what I did last night, I&#x27;ll remove a couple of lines from that file, run composer install and it will remove packages not explicitly added to my config from the environment. Does this finally get easy to achieve with uv?</div><br/><div id="42680778" class="c"><input type="checkbox" id="c-42680778" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42680387">parent</a><span>|</span><a href="#42680821">next</a><span>|</span><label class="collapse" for="c-42680778">[-]</label><label class="expand" for="c-42680778">[2 more]</label></div><br/><div class="children"><div class="content">&gt;installing stuff automatically changes pyprpject.toml (or whatever the standard will be with uv)<p>pyproject.toml represents an inter-project standard and Charlie Marsh has committed to sticking with it, along with cooperating with future Python packaging PEPs. But while you <i>can</i> list transitive dependencies, specify exact versions etc. in pyproject.toml, it&#x27;s not specifically designed as a lockfile - i.e., pyproject.toml is meant for <i>abstract</i> dependencies, where an installer figures out transitively what&#x27;s needed to support them and decides on exact versions to install.<p>The current work for specifying a lockfile standard is <a href="https:&#x2F;&#x2F;peps.python.org&#x2F;pep-0751&#x2F;" rel="nofollow">https:&#x2F;&#x2F;peps.python.org&#x2F;pep-0751&#x2F;</a> . As someone else pointed out, uv currently already uses a proprietary lockfile, but there has been community interest in trying to standardize this - it just has been hard to find agreement on exactly what it needs to contain. (In the past there have been proposals to expand the `pyproject.toml` spec to include other information that lockfiles often contain for other languages, such as hashes and supply-chain information. Some people are extremely against this, however.)<p>As far as I know, uv isn&#x27;t going to do things like analyzing your codebase to determine that you <i>no longer</i> need a certain dependency that&#x27;s currently in your environment and remove it (from the environment, lock file or `pyproject.toml`). You&#x27;ll still be on the hook for figuring out abstractly what your project needs, and this is important if you want to share your code with others.</div><br/><div id="42681091" class="c"><input type="checkbox" id="c-42681091" checked=""/><div class="controls bullet"><span class="by">krick</span><span>|</span><a href="#42680387">root</a><span>|</span><a href="#42680778">parent</a><span>|</span><a href="#42680821">next</a><span>|</span><label class="collapse" for="c-42681091">[-]</label><label class="expand" for="c-42681091">[1 more]</label></div><br/><div class="children"><div class="content">&gt; uv isn&#x27;t going to do things like analyzing your codebase<p>Sure, that&#x27;s not what I meant (unless we call pyproject.toml a part of your codebase, which it kinda is, but that&#x27;s probably not what you meant).<p>In fact, as far as I can tell from your answer, Python does move in the direction I&#x27;d like it to move, but it&#x27;s unclear by how far it will miss and if how uv handles it is ergonomical.<p>As I&#x27;ve said, I think PHP&#x27;s composer does a very good job here, and to clarify, this is how it works. There are 2 files: composer.json (âpyproject.toml) and composer.lock (â PEP751) (also json). The former is kinda editable by hand, the latter you ideally never really touch. However, for the most part composer is smart enough that it edits both files for you (with some exceptions, of course), so every time I run `composer require your&#x2F;awesomelib` it<p>1) checks the constraints in these files<p>2) finds latest appropriate version of your&#x2F;awesomelib (5.0.14) and all its dependencies<p>3) writes &quot;your&#x2F;awesomelib&quot;: &quot;^5.0&quot;<p>4) writes &quot;your&#x2F;awesomelib&quot;: &quot;5.0.14&quot; and all its dependencies to composer.lock (with hashsums, commit ids and such)<p>It is a good practice to keep both inside of version control, so when I say &quot;git diff tells me what I did last night&quot; it means that I&#x27;ll also see what I installed. If (as usual) most of it is some useless trash, I&#x27;ll manually remove &quot;your&#x2F;awesomelib&quot; from composer.json, run `composer install` and it will remove it and all its (now unneeded) dependencies. As the result, I never need to worry about bookkeeping, since composer does it for me, I just run `composer require &lt;stuff&gt;` and it does the rest (except for cases when &lt;stuff&gt; is a proprietary repo on company&#x27;s gitlab and such, then I&#x27;ll need slightly more manual work).<p>That is, what I hope to see in Python one day (10 years later than every other lang did it) is declarative package management, except I don&#x27;t want to have to modify pyproject.toml manually, I want my package manager do it for me, because it saves me 30 seconds of my life every time I install something. Which accumulates to a lot.</div><br/></div></div></div></div><div id="42680821" class="c"><input type="checkbox" id="c-42680821" checked=""/><div class="controls bullet"><span class="by">mk12345</span><span>|</span><a href="#42680387">parent</a><span>|</span><a href="#42680778">prev</a><span>|</span><a href="#42680463">next</a><span>|</span><label class="collapse" for="c-42680821">[-]</label><label class="expand" for="c-42680821">[2 more]</label></div><br/><div class="children"><div class="content">I think it does! uv add [0] adds a dependency to your pyproject.toml, as well as your environment.<p>If you change your pyproject.toml file manually, uv sync [1] will update your environment accordingly.<p>[0]: <a href="https:&#x2F;&#x2F;docs.astral.sh&#x2F;uv&#x2F;guides&#x2F;projects&#x2F;#managing-dependencies" rel="nofollow">https:&#x2F;&#x2F;docs.astral.sh&#x2F;uv&#x2F;guides&#x2F;projects&#x2F;#managing-dependen...</a>
[1]: <a href="https:&#x2F;&#x2F;docs.astral.sh&#x2F;uv&#x2F;reference&#x2F;cli&#x2F;#uv-sync" rel="nofollow">https:&#x2F;&#x2F;docs.astral.sh&#x2F;uv&#x2F;reference&#x2F;cli&#x2F;#uv-sync</a></div><br/><div id="42681137" class="c"><input type="checkbox" id="c-42681137" checked=""/><div class="controls bullet"><span class="by">krick</span><span>|</span><a href="#42680387">root</a><span>|</span><a href="#42680821">parent</a><span>|</span><a href="#42680463">next</a><span>|</span><label class="collapse" for="c-42681137">[-]</label><label class="expand" for="c-42681137">[1 more]</label></div><br/><div class="children"><div class="content">If I read [1] correctly, it seems it checks against lockfile, not pyproject.toml. So it seems like it won&#x27;t help if I change pyproject.toml manually. Which is a big inconveniece, if so.<p>Whatever, I think I&#x27;ll try it for myself later today. It&#x27;s long overdue.</div><br/></div></div></div></div><div id="42680463" class="c"><input type="checkbox" id="c-42680463" checked=""/><div class="controls bullet"><span class="by">wisty</span><span>|</span><a href="#42680387">parent</a><span>|</span><a href="#42680821">prev</a><span>|</span><a href="#42680441">next</a><span>|</span><label class="collapse" for="c-42680463">[-]</label><label class="expand" for="c-42680463">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not an expert, but as far as I can tell UV allows you to do this without feeling so guilty (it handles multiple versions of Python and libraries AFAIK quite well).</div><br/></div></div><div id="42680441" class="c"><input type="checkbox" id="c-42680441" checked=""/><div class="controls bullet"><span class="by">8n4vidtmkvmk</span><span>|</span><a href="#42680387">parent</a><span>|</span><a href="#42680463">prev</a><span>|</span><a href="#42681266">next</a><span>|</span><label class="collapse" for="c-42680441">[-]</label><label class="expand" for="c-42680441">[1 more]</label></div><br/><div class="children"><div class="content">I haven&#x27;t tried it, but I think so? <a href="https:&#x2F;&#x2F;docs.astral.sh&#x2F;uv&#x2F;concepts&#x2F;projects&#x2F;layout&#x2F;#the-lockfile" rel="nofollow">https:&#x2F;&#x2F;docs.astral.sh&#x2F;uv&#x2F;concepts&#x2F;projects&#x2F;layout&#x2F;#the-lock...</a></div><br/></div></div></div></div><div id="42681266" class="c"><input type="checkbox" id="c-42681266" checked=""/><div class="controls bullet"><span class="by">ErikBjare</span><span>|</span><a href="#42680387">prev</a><span>|</span><a href="#42676806">next</a><span>|</span><label class="collapse" for="c-42681266">[-]</label><label class="expand" for="c-42681266">[1 more]</label></div><br/><div class="children"><div class="content">I really thought this would mention uv script deps (standardized by some PEP) together with a `#!&#x2F;usr&#x2F;bin&#x2F;env -S uv run` shebang line which automatically install the deps on execution.<p>Has been super useful to write single-file tools&#x2F;scripts which LLMs can understand and run easily.</div><br/></div></div><div id="42676806" class="c"><input type="checkbox" id="c-42676806" checked=""/><div class="controls bullet"><span class="by">supakeen</span><span>|</span><a href="#42681266">prev</a><span>|</span><a href="#42676941">next</a><span>|</span><label class="collapse" for="c-42676806">[-]</label><label class="expand" for="c-42676806">[5 more]</label></div><br/><div class="children"><div class="content">The activation of the virtualenv is unnecessary (one can execute pip&#x2F;python directly from it), and the configuring of your local pyenv interpreter is also unnecessary, it can create a virtual environment with one directly:<p><pre><code>  pyenv virtualenv python3.12 .venv
  .venv&#x2F;bin&#x2F;python -m pip install pandas
  .venv&#x2F;bin&#x2F;python
</code></pre>
Not quite one command, but a bit more streamlined; I guess.</div><br/><div id="42677044" class="c"><input type="checkbox" id="c-42677044" checked=""/><div class="controls bullet"><span class="by">BeeOnRope</span><span>|</span><a href="#42676806">parent</a><span>|</span><a href="#42676817">next</a><span>|</span><label class="collapse" for="c-42677044">[-]</label><label class="expand" for="c-42677044">[3 more]</label></div><br/><div class="children"><div class="content">Note that in general calling the venv python directly vs activating the venv are not equivalent.<p>E.g. if the thing you run invokes python itself, it will use the system python, not the venv one in the first case.</div><br/><div id="42680374" class="c"><input type="checkbox" id="c-42680374" checked=""/><div class="controls bullet"><span class="by">meitham</span><span>|</span><a href="#42676806">root</a><span>|</span><a href="#42677044">parent</a><span>|</span><a href="#42676817">next</a><span>|</span><label class="collapse" for="c-42680374">[-]</label><label class="expand" for="c-42680374">[2 more]</label></div><br/><div class="children"><div class="content">Surely if you want to invoke python you call sys.executable otherwise if your subprocess doesnât inherit PATH nothing will work with uv or without uv</div><br/><div id="42681164" class="c"><input type="checkbox" id="c-42681164" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676806">root</a><span>|</span><a href="#42680374">parent</a><span>|</span><a href="#42676817">next</a><span>|</span><label class="collapse" for="c-42681164">[-]</label><label class="expand" for="c-42681164">[1 more]</label></div><br/><div class="children"><div class="content">In rare cases, programs might also care about the VIRTUAL_ENV environment variable set by the activate script, and activation may also temporarily clear out any existing PYTHONHOME (a <i>rarely</i> used override for the location of the standard library). But yes, in general you can just run the executable directly.</div><br/></div></div></div></div></div></div><div id="42676817" class="c"><input type="checkbox" id="c-42676817" checked=""/><div class="controls bullet"><span class="by">astronautas</span><span>|</span><a href="#42676806">parent</a><span>|</span><a href="#42677044">prev</a><span>|</span><a href="#42676941">next</a><span>|</span><label class="collapse" for="c-42676817">[-]</label><label class="expand" for="c-42676817">[1 more]</label></div><br/><div class="children"><div class="content">Indeed, you&#x27;re right ;).</div><br/></div></div></div></div><div id="42676941" class="c"><input type="checkbox" id="c-42676941" checked=""/><div class="controls bullet"><span class="by">emiller88</span><span>|</span><a href="#42676806">prev</a><span>|</span><a href="#42680535">next</a><span>|</span><label class="collapse" for="c-42676941">[-]</label><label class="expand" for="c-42676941">[4 more]</label></div><br/><div class="children"><div class="content">There&#x27;s so many more!<p>1. `uvx --from git+<a href="https:&#x2F;&#x2F;github.com&#x2F;httpie&#x2F;cli">https:&#x2F;&#x2F;github.com&#x2F;httpie&#x2F;cli</a> httpie`
2. <a href="https:&#x2F;&#x2F;simonwillison.net&#x2F;2024&#x2F;Aug&#x2F;21&#x2F;usrbinenv-uv-run&#x2F;" rel="nofollow">https:&#x2F;&#x2F;simonwillison.net&#x2F;2024&#x2F;Aug&#x2F;21&#x2F;usrbinenv-uv-run&#x2F;</a> uv in a shebang</div><br/><div id="42677054" class="c"><input type="checkbox" id="c-42677054" checked=""/><div class="controls bullet"><span class="by">FergusArgyll</span><span>|</span><a href="#42676941">parent</a><span>|</span><a href="#42676986">next</a><span>|</span><label class="collapse" for="c-42677054">[-]</label><label class="expand" for="c-42677054">[1 more]</label></div><br/><div class="children"><div class="content">Yes! since that Simon Willison article, I&#x27;ve slowly been easing all my scripts into just using a uv shebang, and it rocks! I&#x27;ve deleted all sorts of .venvs and whatnot. really useful</div><br/></div></div><div id="42676986" class="c"><input type="checkbox" id="c-42676986" checked=""/><div class="controls bullet"><span class="by">throwup238</span><span>|</span><a href="#42676941">parent</a><span>|</span><a href="#42677054">prev</a><span>|</span><a href="#42677953">next</a><span>|</span><label class="collapse" for="c-42676986">[-]</label><label class="expand" for="c-42676986">[1 more]</label></div><br/><div class="children"><div class="content">The uv shebang is definitely the killer feature for me, especially with so much of the AI ecosystem tied up  in Python. Before, writing Python scripts was a lot more painful requiring either a global scripts venv and shell scripts to bootstrap them, or a venv per script.<p>Iâm sure it was already possible with shebangs and venv before, but uv really brings the whole experience together for me so I can write python scripts as freely as bash ones.</div><br/></div></div><div id="42677953" class="c"><input type="checkbox" id="c-42677953" checked=""/><div class="controls bullet"><span class="by">dingdingdang</span><span>|</span><a href="#42676941">parent</a><span>|</span><a href="#42676986">prev</a><span>|</span><a href="#42680535">next</a><span>|</span><label class="collapse" for="c-42677953">[-]</label><label class="expand" for="c-42677953">[1 more]</label></div><br/><div class="children"><div class="content">Super neat re Willison article.. would something like this work under powershell though?!</div><br/></div></div></div></div><div id="42680535" class="c"><input type="checkbox" id="c-42680535" checked=""/><div class="controls bullet"><span class="by">tandav</span><span>|</span><a href="#42676941">prev</a><span>|</span><a href="#42676765">next</a><span>|</span><label class="collapse" for="c-42680535">[-]</label><label class="expand" for="c-42680535">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m waiting for this issue to be done: Add an option to store virtual environments in a centralized location outside projects <a href="https:&#x2F;&#x2F;github.com&#x2F;astral-sh&#x2F;uv&#x2F;issues&#x2F;1495">https:&#x2F;&#x2F;github.com&#x2F;astral-sh&#x2F;uv&#x2F;issues&#x2F;1495</a><p>I have used virtualenvwrapper before and it was very convenient to have all virtual environments stored in one place, like ~&#x2F;.cache&#x2F;virtualenvs.<p>The .venv in the project directory is annoying because when you copy folder somewhere you start copying gigabytes of junk. Some tools like rsync can&#x27;t handle CACHEDIR.TAG (but you can use --exclude .venv)</div><br/></div></div><div id="42676765" class="c"><input type="checkbox" id="c-42676765" checked=""/><div class="controls bullet"><span class="by">lukax</span><span>|</span><a href="#42680535">prev</a><span>|</span><a href="#42679102">next</a><span>|</span><label class="collapse" for="c-42676765">[-]</label><label class="expand" for="c-42676765">[3 more]</label></div><br/><div class="children"><div class="content">Uv also bundles uvx command so you can run Python scripts without installing them manually:<p>uvx --from &#x27;huggingface_hub[cli]&#x27; huggingface-cli</div><br/><div id="42677340" class="c"><input type="checkbox" id="c-42677340" checked=""/><div class="controls bullet"><span class="by">oulipo</span><span>|</span><a href="#42676765">parent</a><span>|</span><a href="#42676780">next</a><span>|</span><label class="collapse" for="c-42677340">[-]</label><label class="expand" for="c-42677340">[1 more]</label></div><br/><div class="children"><div class="content">And there&#x27;s also the `uv run script.py` where you can have dependencies indicated as comments in the script, see eg <a href="https:&#x2F;&#x2F;simonwillison.net&#x2F;2024&#x2F;Dec&#x2F;19&#x2F;one-shot-python-tools&#x2F;" rel="nofollow">https:&#x2F;&#x2F;simonwillison.net&#x2F;2024&#x2F;Dec&#x2F;19&#x2F;one-shot-python-tools&#x2F;</a></div><br/></div></div><div id="42676780" class="c"><input type="checkbox" id="c-42676780" checked=""/><div class="controls bullet"><span class="by">astronautas</span><span>|</span><a href="#42676765">parent</a><span>|</span><a href="#42677340">prev</a><span>|</span><a href="#42679102">next</a><span>|</span><label class="collapse" for="c-42676780">[-]</label><label class="expand" for="c-42676780">[1 more]</label></div><br/><div class="children"><div class="content">Neat!</div><br/></div></div></div></div><div id="42679102" class="c"><input type="checkbox" id="c-42679102" checked=""/><div class="controls bullet"><span class="by">wruza</span><span>|</span><a href="#42676765">prev</a><span>|</span><a href="#42678239">next</a><span>|</span><label class="collapse" for="c-42679102">[-]</label><label class="expand" for="c-42679102">[1 more]</label></div><br/><div class="children"><div class="content">Why canât python just adopt something like yarn&#x2F;pnpm +  and effing stop patch-copying its binaries into a specific path? And pick up site_packages from where it left it last time? Wtf. How hard it is to just pick python-modules directory and python-project.json and sync it into correctness by symlink&#x2F;mklink-inf missing folders from a package cache in there in a few seconds?<p>Every time when I have to reorganize or upgrade my AI repos, itâs yet another 50GB writes to my poor ssd. Half of it is torch, another half auto-downloaded models that I cannot stop because they become âdownloadedâ and you never know how to resume it back or even find where they are cause python logging culture is just barbaric.</div><br/></div></div><div id="42678239" class="c"><input type="checkbox" id="c-42678239" checked=""/><div class="controls bullet"><span class="by">greatgib</span><span>|</span><a href="#42679102">prev</a><span>|</span><a href="#42677346">next</a><span>|</span><label class="collapse" for="c-42678239">[-]</label><label class="expand" for="c-42678239">[4 more]</label></div><br/><div class="children"><div class="content">Ridiculous post:<p>The author says that a normal route would be:<p><pre><code>   - Take the proper route:

   - Create a virtual environment

   - pip install pandas

   - Activate the virtual environment

   - Run python
</code></pre>
Basically, out of the box, when you create an virtual it is immediately activated. And you would obviously need to have it activated before doing a pip install...<p>In addition, in my opinion this is the thing that would sucks about UV to have different functions being tied to a single tool execution.<p>It is a breeze to be able to activate a venv, and be done with it, being able to run multiple times your program in one go, even with crashes, being able to install more dependencies, test it in REPL, ...</div><br/><div id="42681402" class="c"><input type="checkbox" id="c-42681402" checked=""/><div class="controls bullet"><span class="by">astronautas</span><span>|</span><a href="#42678239">parent</a><span>|</span><a href="#42678896">next</a><span>|</span><label class="collapse" for="c-42681402">[-]</label><label class="expand" for="c-42681402">[1 more]</label></div><br/><div class="children"><div class="content">Hey, I actually made a silly mistake in my post, indeed you first activate the environment and then install stuff in it. Fixed!<p>I disagree though it is activated immediately, or at least to me with venv I always have to activate it explicitly.</div><br/></div></div><div id="42678896" class="c"><input type="checkbox" id="c-42678896" checked=""/><div class="controls bullet"><span class="by">hamandcheese</span><span>|</span><a href="#42678239">parent</a><span>|</span><a href="#42681402">prev</a><span>|</span><a href="#42677346">next</a><span>|</span><label class="collapse" for="c-42678896">[-]</label><label class="expand" for="c-42678896">[2 more]</label></div><br/><div class="children"><div class="content">You can still use traditional venvs with UV though, if you want.</div><br/><div id="42680311" class="c"><input type="checkbox" id="c-42680311" checked=""/><div class="controls bullet"><span class="by">krick</span><span>|</span><a href="#42678239">root</a><span>|</span><a href="#42678896">parent</a><span>|</span><a href="#42677346">next</a><span>|</span><label class="collapse" for="c-42680311">[-]</label><label class="expand" for="c-42680311">[1 more]</label></div><br/><div class="children"><div class="content">Uh, but then you don&#x27;t really need uv, right?</div><br/></div></div></div></div></div></div><div id="42677346" class="c"><input type="checkbox" id="c-42677346" checked=""/><div class="controls bullet"><span class="by">mgd020</span><span>|</span><a href="#42678239">prev</a><span>|</span><a href="#42679580">next</a><span>|</span><label class="collapse" for="c-42677346">[-]</label><label class="expand" for="c-42677346">[1 more]</label></div><br/><div class="children"><div class="content">Whats the point if you have other binary dependencies?<p>Use Nix for Python version as well as other bin deps, and virtualenv + pip-tools for correct package dependency resolution.<p>Waiting 4s for pip-tools instead of 1ms for uv doesn&#x27;t change much if you only run it once a month.</div><br/></div></div><div id="42679580" class="c"><input type="checkbox" id="c-42679580" checked=""/><div class="controls bullet"><span class="by">CGamesPlay</span><span>|</span><a href="#42677346">prev</a><span>|</span><a href="#42679094">next</a><span>|</span><label class="collapse" for="c-42679580">[-]</label><label class="expand" for="c-42679580">[2 more]</label></div><br/><div class="children"><div class="content">I want to like uv, but unfortunately there&#x27;s some kind of technical distinction between a Python &quot;package manager&quot; and a &quot;build system&quot;. Uv doesn&#x27;t include a &quot;build system&quot;, but encourages you to use some other one. The net result is that external dependencies don&#x27;t build the same as on Poetry, don&#x27;t work, and uv points the finger at some other dependency.<p>I do hope the situation changes one day. Python packaging is such a mess, but Poetry is good enough and actually works, so I&#x27;ll stick with it for now.</div><br/><div id="42681337" class="c"><input type="checkbox" id="c-42681337" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42679580">parent</a><span>|</span><a href="#42679094">next</a><span>|</span><label class="collapse" for="c-42681337">[-]</label><label class="expand" for="c-42681337">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not &quot;some sort of technical distinction&quot;. Package managers are for keeping track of which pieces of code you need in your project&#x27;s environment. Build systems are for... building the code, so that it can actually be used in an environment.<p>Usually, you can directly make a pre-built wheel, and then an installer like Pip or uv can just unpack that into the environment. If it needs to be build on the user&#x27;s machine, then you offer an sdist, which <i>specifies</i> its build backend. The installer will act as a build frontend, by downloading and setting up the specified backend and asking it to make a wheel from the sdist, then installing the wheel.<p>Poetry&#x27;s build backend (`poetry.masonry`) doesn&#x27;t build your external dependencies unless a) you obtain an sdist and b) the sdist says to use that backend. And in these cases, it doesn&#x27;t matter what tools you&#x27;re using. Your installer (which could be Pip, which is <i>not</i> a package manager in any meaningful sense) can work with `poetry.masonry` just fine.<p>If you can give a <i>much more specific, simple, reproducible</i> example of a problem you encountered with external dependencies and uv, I&#x27;ll be happy to try to help.</div><br/></div></div></div></div><div id="42679094" class="c"><input type="checkbox" id="c-42679094" checked=""/><div class="controls bullet"><span class="by">cyrialize</span><span>|</span><a href="#42679580">prev</a><span>|</span><a href="#42677064">next</a><span>|</span><label class="collapse" for="c-42679094">[-]</label><label class="expand" for="c-42679094">[2 more]</label></div><br/><div class="children"><div class="content">For anyone that used rye, it&#x27;s worth noting that the creator of rye recommends using uv. Also, rye is going to be continually updated to just interface with uv until rye can be entirely replaced by uv.</div><br/><div id="42680942" class="c"><input type="checkbox" id="c-42680942" checked=""/><div class="controls bullet"><span class="by">andelink</span><span>|</span><a href="#42679094">parent</a><span>|</span><a href="#42677064">next</a><span>|</span><label class="collapse" for="c-42680942">[-]</label><label class="expand" for="c-42680942">[1 more]</label></div><br/><div class="children"><div class="content">I believe they are from the same author, Charlie Marsh &#x2F; Astral</div><br/></div></div></div></div><div id="42677064" class="c"><input type="checkbox" id="c-42677064" checked=""/><div class="controls bullet"><span class="by">minimaxir</span><span>|</span><a href="#42679094">prev</a><span>|</span><a href="#42680101">next</a><span>|</span><label class="collapse" for="c-42677064">[-]</label><label class="expand" for="c-42677064">[2 more]</label></div><br/><div class="children"><div class="content">What would be interesting is if you could do something similar for IPython&#x2F;Jupyter Notebooks: while front-ends like JupyterLab and VS Code Notebooks do let you select a .venv if present in the workspace, it&#x27;s annoying to have to set one up and build one for every project.</div><br/><div id="42678173" class="c"><input type="checkbox" id="c-42678173" checked=""/><div class="controls bullet"><span class="by">mirekrusin</span><span>|</span><a href="#42677064">parent</a><span>|</span><a href="#42680101">next</a><span>|</span><label class="collapse" for="c-42678173">[-]</label><label class="expand" for="c-42678173">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;github.com&#x2F;manzt&#x2F;juv">https:&#x2F;&#x2F;github.com&#x2F;manzt&#x2F;juv</a></div><br/></div></div></div></div><div id="42680101" class="c"><input type="checkbox" id="c-42680101" checked=""/><div class="controls bullet"><span class="by">insane_dreamer</span><span>|</span><a href="#42677064">prev</a><span>|</span><a href="#42676779">next</a><span>|</span><label class="collapse" for="c-42680101">[-]</label><label class="expand" for="c-42680101">[2 more]</label></div><br/><div class="children"><div class="content">been using conda for years with multiple projects each of which has numerous environments (for different versions). fairly large complex environments with coda, tf, jax, etc. has always worked well, and my biggest complaint - the sluggish resolver - largely addressed with mamba resolver. packages not available on conga-forge can be installed into the conda env pip. maybe I&#x27;m missing something but it&#x27;s not clear to me what advantage uv would provide over conda.</div><br/><div id="42680674" class="c"><input type="checkbox" id="c-42680674" checked=""/><div class="controls bullet"><span class="by">claytonjy</span><span>|</span><a href="#42680101">parent</a><span>|</span><a href="#42676779">next</a><span>|</span><label class="collapse" for="c-42680674">[-]</label><label class="expand" for="c-42680674">[1 more]</label></div><br/><div class="children"><div class="content">It is very difficult for most conda users to maintain conda environments. They use the same env for nearly all their work, donât understand the hierarchical nature of conda envs, donât know which one theyâre installing into, install stuff with pip without recording it in their env file, etc. The worst local environment messes iâve ever seen always involve conda.<p>It can be used effectively, but does not make it easy to do so.<p>uv makes itself harder to misuse</div><br/></div></div></div></div><div id="42676779" class="c"><input type="checkbox" id="c-42676779" checked=""/><div class="controls bullet"><span class="by">tasn</span><span>|</span><a href="#42680101">prev</a><span>|</span><a href="#42677978">next</a><span>|</span><label class="collapse" for="c-42676779">[-]</label><label class="expand" for="c-42676779">[2 more]</label></div><br/><div class="children"><div class="content">OK, I&#x27;m convinced. I just installed uv. Thanks for sharing!</div><br/><div id="42676787" class="c"><input type="checkbox" id="c-42676787" checked=""/><div class="controls bullet"><span class="by">smallmancontrov</span><span>|</span><a href="#42676779">parent</a><span>|</span><a href="#42677978">next</a><span>|</span><label class="collapse" for="c-42676787">[-]</label><label class="expand" for="c-42676787">[1 more]</label></div><br/><div class="children"><div class="content">Ditto. This is pretty cool!</div><br/></div></div></div></div><div id="42677978" class="c"><input type="checkbox" id="c-42677978" checked=""/><div class="controls bullet"><span class="by">misiek08</span><span>|</span><a href="#42676779">prev</a><span>|</span><a href="#42677236">next</a><span>|</span><label class="collapse" for="c-42677978">[-]</label><label class="expand" for="c-42677978">[1 more]</label></div><br/><div class="children"><div class="content">Small misorder in the âright routeâ - you should first activate the virtual environment just created and then install pandas.</div><br/></div></div><div id="42677236" class="c"><input type="checkbox" id="c-42677236" checked=""/><div class="controls bullet"><span class="by">amelius</span><span>|</span><a href="#42677978">prev</a><span>|</span><a href="#42679299">next</a><span>|</span><label class="collapse" for="c-42677236">[-]</label><label class="expand" for="c-42677236">[1 more]</label></div><br/><div class="children"><div class="content">Sometimes, only a specific wheel is available (e.g. on Nvidia&#x27;s Jetson platform where versions are dictated by the vendor).<p>Can uv work with that?</div><br/></div></div><div id="42679299" class="c"><input type="checkbox" id="c-42679299" checked=""/><div class="controls bullet"><span class="by">vietvu</span><span>|</span><a href="#42677236">prev</a><span>|</span><a href="#42676804">next</a><span>|</span><label class="collapse" for="c-42679299">[-]</label><label class="expand" for="c-42679299">[1 more]</label></div><br/><div class="children"><div class="content">I used to have pyenv, asdf or mise to manage python versions (never use conda unless I need DL lib like pytorch). Now just uv is enough.</div><br/></div></div><div id="42676804" class="c"><input type="checkbox" id="c-42676804" checked=""/><div class="controls bullet"><span class="by">yangman</span><span>|</span><a href="#42679299">prev</a><span>|</span><a href="#42676864">next</a><span>|</span><label class="collapse" for="c-42676804">[-]</label><label class="expand" for="c-42676804">[1 more]</label></div><br/><div class="children"><div class="content">uv implements PEP 723.<p><a href="https:&#x2F;&#x2F;packaging.python.org&#x2F;en&#x2F;latest&#x2F;specifications&#x2F;inline-script-metadata&#x2F;" rel="nofollow">https:&#x2F;&#x2F;packaging.python.org&#x2F;en&#x2F;latest&#x2F;specifications&#x2F;inline...</a><p>Especially useful if the script has dependencies on packages in private repos.</div><br/></div></div><div id="42676864" class="c"><input type="checkbox" id="c-42676864" checked=""/><div class="controls bullet"><span class="by">faizshah</span><span>|</span><a href="#42676804">prev</a><span>|</span><a href="#42677502">next</a><span>|</span><label class="collapse" for="c-42676864">[-]</label><label class="expand" for="c-42676864">[12 more]</label></div><br/><div class="children"><div class="content">I love this, the biggest problem I have right now with python scripts is distributing my single file utility scripts (random ops scripts).<p>I wish there was a way to either shebang something like this or build a wheel that has the full venv inside.</div><br/><div id="42676896" class="c"><input type="checkbox" id="c-42676896" checked=""/><div class="controls bullet"><span class="by">easton</span><span>|</span><a href="#42676864">parent</a><span>|</span><a href="#42677230">next</a><span>|</span><label class="collapse" for="c-42676896">[-]</label><label class="expand" for="c-42676896">[7 more]</label></div><br/><div class="children"><div class="content">Thereâs a shebang now. as of PEP 722 you can declare dependencies in a comment at the top of a single file script that a package manager can choose to read and resolve.<p>uv has support for it: <a href="https:&#x2F;&#x2F;docs.astral.sh&#x2F;uv&#x2F;guides&#x2F;scripts&#x2F;#running-a-script-with-dependencies" rel="nofollow">https:&#x2F;&#x2F;docs.astral.sh&#x2F;uv&#x2F;guides&#x2F;scripts&#x2F;#running-a-script-w...</a> (which only helps if your team is all in on uv, but maybe they are)</div><br/><div id="42677178" class="c"><input type="checkbox" id="c-42677178" checked=""/><div class="controls bullet"><span class="by">amelius</span><span>|</span><a href="#42676864">root</a><span>|</span><a href="#42676896">parent</a><span>|</span><a href="#42676973">next</a><span>|</span><label class="collapse" for="c-42677178">[-]</label><label class="expand" for="c-42677178">[3 more]</label></div><br/><div class="children"><div class="content">How does that work with the shebang?</div><br/><div id="42677357" class="c"><input type="checkbox" id="c-42677357" checked=""/><div class="controls bullet"><span class="by">oulipo</span><span>|</span><a href="#42676864">root</a><span>|</span><a href="#42677178">parent</a><span>|</span><a href="#42678737">next</a><span>|</span><label class="collapse" for="c-42677357">[-]</label><label class="expand" for="c-42677357">[1 more]</label></div><br/><div class="children"><div class="content">Check eg <a href="https:&#x2F;&#x2F;simonwillison.net&#x2F;2024&#x2F;Dec&#x2F;19&#x2F;one-shot-python-tools&#x2F;" rel="nofollow">https:&#x2F;&#x2F;simonwillison.net&#x2F;2024&#x2F;Dec&#x2F;19&#x2F;one-shot-python-tools&#x2F;</a></div><br/></div></div><div id="42678737" class="c"><input type="checkbox" id="c-42678737" checked=""/><div class="controls bullet"><span class="by">wizzard0</span><span>|</span><a href="#42676864">root</a><span>|</span><a href="#42677178">parent</a><span>|</span><a href="#42677357">prev</a><span>|</span><a href="#42676973">next</a><span>|</span><label class="collapse" for="c-42678737">[-]</label><label class="expand" for="c-42678737">[1 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>  #!uv run
  # &#x2F;&#x2F;&#x2F; script
  # requires-python = &quot;&gt;=3.10&quot;
  # dependencies = [
  #     &quot;click&gt;8&quot;,
  #     &quot;rich&quot;,
  # ]
  # &#x2F;&#x2F;&#x2F;
</code></pre>
and that&#x27;s it</div><br/></div></div></div></div><div id="42676973" class="c"><input type="checkbox" id="c-42676973" checked=""/><div class="controls bullet"><span class="by">eesmith</span><span>|</span><a href="#42676864">root</a><span>|</span><a href="#42676896">parent</a><span>|</span><a href="#42677178">prev</a><span>|</span><a href="#42677006">next</a><span>|</span><label class="collapse" for="c-42676973">[-]</label><label class="expand" for="c-42676973">[1 more]</label></div><br/><div class="children"><div class="content">PEP 722 was rejected. You are thinking of PEP 723, which was very similar to 722 in goals.<p><a href="https:&#x2F;&#x2F;discuss.python.org&#x2F;t&#x2F;pep-722-723-decision&#x2F;36763" rel="nofollow">https:&#x2F;&#x2F;discuss.python.org&#x2F;t&#x2F;pep-722-723-decision&#x2F;36763</a> contains the reasoning for accepting 723 and rejecting 722.</div><br/></div></div><div id="42677006" class="c"><input type="checkbox" id="c-42677006" checked=""/><div class="controls bullet"><span class="by">miohtama</span><span>|</span><a href="#42676864">root</a><span>|</span><a href="#42676896">parent</a><span>|</span><a href="#42676973">prev</a><span>|</span><a href="#42677230">next</a><span>|</span><label class="collapse" for="c-42677006">[-]</label><label class="expand" for="c-42677006">[2 more]</label></div><br/><div class="children"><div class="content">Do other package managers support this yet?</div><br/><div id="42681349" class="c"><input type="checkbox" id="c-42681349" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676864">root</a><span>|</span><a href="#42677006">parent</a><span>|</span><a href="#42677230">next</a><span>|</span><label class="collapse" for="c-42681349">[-]</label><label class="expand" for="c-42681349">[1 more]</label></div><br/><div class="children"><div class="content">Pipx isn&#x27;t in any meaningful sense a package manager (although it can manage <i>environments</i> to a limited extent), but the `pipx run` command supports this PEP as of version 1.4.2.</div><br/></div></div></div></div></div></div><div id="42677230" class="c"><input type="checkbox" id="c-42677230" checked=""/><div class="controls bullet"><span class="by">mianos</span><span>|</span><a href="#42676864">parent</a><span>|</span><a href="#42676896">prev</a><span>|</span><a href="#42676887">next</a><span>|</span><label class="collapse" for="c-42677230">[-]</label><label class="expand" for="c-42677230">[2 more]</label></div><br/><div class="children"><div class="content">You mean like pyinstaller <a href="https:&#x2F;&#x2F;pyinstaller.org" rel="nofollow">https:&#x2F;&#x2F;pyinstaller.org</a> that takes your python and makes a standalone, self extracting or onedir archive to convert you ops script plus dependencies into something you can just distribute like a binary?</div><br/><div id="42681357" class="c"><input type="checkbox" id="c-42681357" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676864">root</a><span>|</span><a href="#42677230">parent</a><span>|</span><a href="#42676887">next</a><span>|</span><label class="collapse" for="c-42681357">[-]</label><label class="expand" for="c-42681357">[1 more]</label></div><br/><div class="children"><div class="content">This makes sense when you need to provision Python itself to the end user, not just third-party libraries.</div><br/></div></div></div></div><div id="42676887" class="c"><input type="checkbox" id="c-42676887" checked=""/><div class="controls bullet"><span class="by">delusional</span><span>|</span><a href="#42676864">parent</a><span>|</span><a href="#42677230">prev</a><span>|</span><a href="#42676954">next</a><span>|</span><label class="collapse" for="c-42676887">[-]</label><label class="expand" for="c-42676887">[1 more]</label></div><br/><div class="children"><div class="content">You are in luck <a href="https:&#x2F;&#x2F;docs.astral.sh&#x2F;uv&#x2F;guides&#x2F;scripts&#x2F;#declaring-script-dependencies" rel="nofollow">https:&#x2F;&#x2F;docs.astral.sh&#x2F;uv&#x2F;guides&#x2F;scripts&#x2F;#declaring-script-d...</a></div><br/></div></div><div id="42676954" class="c"><input type="checkbox" id="c-42676954" checked=""/><div class="controls bullet"><span class="by">eesmith</span><span>|</span><a href="#42676864">parent</a><span>|</span><a href="#42676887">prev</a><span>|</span><a href="#42677502">next</a><span>|</span><label class="collapse" for="c-42676954">[-]</label><label class="expand" for="c-42676954">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;peps.python.org&#x2F;pep-0723&#x2F;" rel="nofollow">https:&#x2F;&#x2F;peps.python.org&#x2F;pep-0723&#x2F;</a> is at the very least related. It&#x27;s a way of specifying the metadata in the script, allowing other tools to do the right thing. One of the use cases is:<p>&gt; A user facing CLI that is capable of executing scripts. If we take Hatch as an example, the interface would be simply hatch run &#x2F;path&#x2F;to&#x2F;script.py [args] and Hatch will manage the environment for that script. Such tools could be used as shebang lines on non-Windows systems e.g. #!&#x2F;usr&#x2F;bin&#x2F;env hatch run<p><a href="https:&#x2F;&#x2F;micro.webology.dev&#x2F;2024&#x2F;08&#x2F;21&#x2F;uv-updates-and.html" rel="nofollow">https:&#x2F;&#x2F;micro.webology.dev&#x2F;2024&#x2F;08&#x2F;21&#x2F;uv-updates-and.html</a> shows an example with uv:<p>&gt; With this new feature, I can now instruct users to run uv run main.py without explaining what a venv or virtualenv is, plus a long list of requirements that need to be passed to pip install.<p>That ends:<p>&gt; PEP 723 also opens the door to turning a one-file Python script into a runnable Docker image that doesnât even need Python on the machine or opens the door for Beeware and Briefcase to build standalone apps.</div><br/></div></div></div></div><div id="42677502" class="c"><input type="checkbox" id="c-42677502" checked=""/><div class="controls bullet"><span class="by">sonium</span><span>|</span><a href="#42676864">prev</a><span>|</span><a href="#42677146">next</a><span>|</span><label class="collapse" for="c-42677502">[-]</label><label class="expand" for="c-42677502">[3 more]</label></div><br/><div class="children"><div class="content">But I still need pip to install uv, right? Or download it using a one-liner alternatively.</div><br/><div id="42677678" class="c"><input type="checkbox" id="c-42677678" checked=""/><div class="controls bullet"><span class="by">philomath_mn</span><span>|</span><a href="#42677502">parent</a><span>|</span><a href="#42679677">next</a><span>|</span><label class="collapse" for="c-42677678">[-]</label><label class="expand" for="c-42677678">[1 more]</label></div><br/><div class="children"><div class="content">You can install it in several ways without pip, easiest is standalone installer (which can upgrade itself)<p><a href="https:&#x2F;&#x2F;docs.astral.sh&#x2F;uv&#x2F;getting-started&#x2F;installation&#x2F;" rel="nofollow">https:&#x2F;&#x2F;docs.astral.sh&#x2F;uv&#x2F;getting-started&#x2F;installation&#x2F;</a></div><br/></div></div><div id="42679677" class="c"><input type="checkbox" id="c-42679677" checked=""/><div class="controls bullet"><span class="by">dontdieych</span><span>|</span><a href="#42677502">parent</a><span>|</span><a href="#42677678">prev</a><span>|</span><a href="#42677146">next</a><span>|</span><label class="collapse" for="c-42679677">[-]</label><label class="expand" for="c-42679677">[1 more]</label></div><br/><div class="children"><div class="content">cargo install</div><br/></div></div></div></div><div id="42677146" class="c"><input type="checkbox" id="c-42677146" checked=""/><div class="controls bullet"><span class="by">aizk</span><span>|</span><a href="#42677502">prev</a><span>|</span><a href="#42679246">next</a><span>|</span><label class="collapse" for="c-42677146">[-]</label><label class="expand" for="c-42677146">[2 more]</label></div><br/><div class="children"><div class="content">one useful UV alias I use is 
uvsys=&#x27;uv pip install --system&#x27;<p>So I can just do uv {package} for a quick and dirty global install. I&#x27;m so used to pip install being global by default just making this shorthand makes things a bit easier.</div><br/><div id="42680731" class="c"><input type="checkbox" id="c-42680731" checked=""/><div class="controls bullet"><span class="by">claytonjy</span><span>|</span><a href="#42677146">parent</a><span>|</span><a href="#42679246">next</a><span>|</span><label class="collapse" for="c-42680731">[-]</label><label class="expand" for="c-42680731">[1 more]</label></div><br/><div class="children"><div class="content">this sounds like itâs asking for trouble! very easy to mess up your whole system<p>i would highly recommend only using â-system in a docker container or similar</div><br/></div></div></div></div><div id="42679246" class="c"><input type="checkbox" id="c-42679246" checked=""/><div class="controls bullet"><span class="by">forgingahead</span><span>|</span><a href="#42677146">prev</a><span>|</span><a href="#42677261">next</a><span>|</span><label class="collapse" for="c-42679246">[-]</label><label class="expand" for="c-42679246">[1 more]</label></div><br/><div class="children"><div class="content">Python package management has always seemed like crazyland to me. I&#x27;ve settled on Anaconda as I&#x27;ve experimented with all the ML packages over the years, so I&#x27;d be interested to learn why uv, and also what&#x2F;when are good times to use venv&#x2F;pip&#x2F;conda&#x2F;uv&#x2F;poetry&#x2F;whatever else has come up.<p>NeutralCrane has a really helpful comment below[0], would love to have a more thorough post on everything!<p>[0]<a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=42677048">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=42677048</a></div><br/></div></div><div id="42677261" class="c"><input type="checkbox" id="c-42677261" checked=""/><div class="controls bullet"><span class="by">valcron1000</span><span>|</span><a href="#42679246">prev</a><span>|</span><a href="#42677503">next</a><span>|</span><label class="collapse" for="c-42677261">[-]</label><label class="expand" for="c-42677261">[2 more]</label></div><br/><div class="children"><div class="content">Can you also specify which version of pandas to use?</div><br/><div id="42677650" class="c"><input type="checkbox" id="c-42677650" checked=""/><div class="controls bullet"><span class="by">zanie</span><span>|</span><a href="#42677261">parent</a><span>|</span><a href="#42677503">next</a><span>|</span><label class="collapse" for="c-42677650">[-]</label><label class="expand" for="c-42677650">[1 more]</label></div><br/><div class="children"><div class="content">Of course!<p>uv run -q --with pandas==2.1.4 python -c &quot;import pandas; print(pandas.__version__)&quot;
2.1.4</div><br/></div></div></div></div><div id="42677503" class="c"><input type="checkbox" id="c-42677503" checked=""/><div class="controls bullet"><span class="by">m3kw9</span><span>|</span><a href="#42677261">prev</a><span>|</span><a href="#42676963">next</a><span>|</span><label class="collapse" for="c-42677503">[-]</label><label class="expand" for="c-42677503">[1 more]</label></div><br/><div class="children"><div class="content">Thatâs like a killer app type feature.  However it says adhoc so you probably canât get back to that setup easily</div><br/></div></div><div id="42676963" class="c"><input type="checkbox" id="c-42676963" checked=""/><div class="controls bullet"><span class="by">curiousgal</span><span>|</span><a href="#42677503">prev</a><span>|</span><a href="#42677118">next</a><span>|</span><label class="collapse" for="c-42676963">[-]</label><label class="expand" for="c-42676963">[15 more]</label></div><br/><div class="children"><div class="content">uv has does not (nor do they plan to add) support for conda, and that is a deal-breaker.</div><br/><div id="42677096" class="c"><input type="checkbox" id="c-42677096" checked=""/><div class="controls bullet"><span class="by">PaulHoule</span><span>|</span><a href="#42676963">parent</a><span>|</span><a href="#42677116">next</a><span>|</span><label class="collapse" for="c-42677096">[-]</label><label class="expand" for="c-42677096">[7 more]</label></div><br/><div class="children"><div class="content">I can&#x27;t see why anyone is using Conda in 2025.  In 2018, yeah, pip (now uv) was hard and you could get a &quot;just works&quot; experience installing Tensorflow + NVIDIA on Conda.  In 2023 it was the other way around and it still is.</div><br/><div id="42677124" class="c"><input type="checkbox" id="c-42677124" checked=""/><div class="controls bullet"><span class="by">curiousgal</span><span>|</span><a href="#42676963">root</a><span>|</span><a href="#42677096">parent</a><span>|</span><a href="#42677116">next</a><span>|</span><label class="collapse" for="c-42677124">[-]</label><label class="expand" for="c-42677124">[6 more]</label></div><br/><div class="children"><div class="content">Well, when you&#x27;re building python packages that have non python dependencies and a big chunk of your users are on Windows, conda is the only option, even in 2025 :)<p>Examples include, quant libraries, in-house APIs&#x2F;tools, etc.</div><br/><div id="42677289" class="c"><input type="checkbox" id="c-42677289" checked=""/><div class="controls bullet"><span class="by">PaulHoule</span><span>|</span><a href="#42676963">root</a><span>|</span><a href="#42677124">parent</a><span>|</span><a href="#42677211">next</a><span>|</span><label class="collapse" for="c-42677289">[-]</label><label class="expand" for="c-42677289">[2 more]</label></div><br/><div class="children"><div class="content">Circa 2018, I figured out how to pack up the CUDA libraries inside conda for Windows so I could have different conda environments with different versions of CUDA which was essential back then because if you had a model that was written w&#x2F; a certain version of Tensorflow you had to have a matching CUDA and if you used NVIDIA&#x27;s we-need-your-email-address installers you could only have one version of CUDA installed at a time.<p>Worked great except for conda making the terrible mistake of compressing package files with bzip2 which took forever to decompress for huge packages.<p>I see no reason you can&#x27;t install any kind of non-Python thing that a Python system wants with uv because a wheel is just a ZIP file,  so long as it doesn&#x27;t need to be installed in a particular place you can just unpack it and go.</div><br/><div id="42681383" class="c"><input type="checkbox" id="c-42681383" checked=""/><div class="controls bullet"><span class="by">zahlman</span><span>|</span><a href="#42676963">root</a><span>|</span><a href="#42677289">parent</a><span>|</span><a href="#42677211">next</a><span>|</span><label class="collapse" for="c-42681383">[-]</label><label class="expand" for="c-42681383">[1 more]</label></div><br/><div class="children"><div class="content">For that matter, you can install arbitrary content from a wheel with Pip.<p>The problem is all the things that <i>do</i> need to be installed in a particular place. Linux seems to have a lot of those, especially if they&#x27;re build-time dependencies for something else. Hence the need for, and slow development of, <a href="https:&#x2F;&#x2F;peps.python.org&#x2F;pep-0725&#x2F;" rel="nofollow">https:&#x2F;&#x2F;peps.python.org&#x2F;pep-0725&#x2F;</a> (relevant background, though I&#x27;m sure you know this sort of stuff: <a href="https:&#x2F;&#x2F;pypackaging-native.github.io&#x2F;" rel="nofollow">https:&#x2F;&#x2F;pypackaging-native.github.io&#x2F;</a> ).</div><br/></div></div></div></div><div id="42677211" class="c"><input type="checkbox" id="c-42677211" checked=""/><div class="controls bullet"><span class="by">amelius</span><span>|</span><a href="#42676963">root</a><span>|</span><a href="#42677124">parent</a><span>|</span><a href="#42677289">prev</a><span>|</span><a href="#42677759">next</a><span>|</span><label class="collapse" for="c-42677211">[-]</label><label class="expand" for="c-42677211">[2 more]</label></div><br/><div class="children"><div class="content">Conda worked for me in the past, but at some point I was getting inexplicable segfaults from Python scripts. I switched back to just pip and everything worked fine again. And installation was much faster.</div><br/><div id="42677295" class="c"><input type="checkbox" id="c-42677295" checked=""/><div class="controls bullet"><span class="by">PaulHoule</span><span>|</span><a href="#42676963">root</a><span>|</span><a href="#42677211">parent</a><span>|</span><a href="#42677759">next</a><span>|</span><label class="collapse" for="c-42677295">[-]</label><label class="expand" for="c-42677295">[1 more]</label></div><br/><div class="children"><div class="content">That was basically my experience.  At one time conda made my life easier,  eventually it made it impossible.</div><br/></div></div></div></div><div id="42677759" class="c"><input type="checkbox" id="c-42677759" checked=""/><div class="controls bullet"><span class="by">forrestthewoods</span><span>|</span><a href="#42676963">root</a><span>|</span><a href="#42677124">parent</a><span>|</span><a href="#42677211">prev</a><span>|</span><a href="#42677116">next</a><span>|</span><label class="collapse" for="c-42677759">[-]</label><label class="expand" for="c-42677759">[1 more]</label></div><br/><div class="children"><div class="content">Iâm on Windows and I categorically refuse to install Conda. Itâs not necessary.</div><br/></div></div></div></div></div></div><div id="42677116" class="c"><input type="checkbox" id="c-42677116" checked=""/><div class="controls bullet"><span class="by">NeutralCrane</span><span>|</span><a href="#42676963">parent</a><span>|</span><a href="#42677096">prev</a><span>|</span><a href="#42677278">next</a><span>|</span><label class="collapse" for="c-42677116">[-]</label><label class="expand" for="c-42677116">[3 more]</label></div><br/><div class="children"><div class="content">Why would it be a deal breaker? uv would replace conda. And I hope it does. Conda has been such a headache for me when I&#x27;ve used it in the past. If the Python (particularly ML&#x2F;academic community) could move on from conda it would be a great thing.</div><br/><div id="42677317" class="c"><input type="checkbox" id="c-42677317" checked=""/><div class="controls bullet"><span class="by">jph00</span><span>|</span><a href="#42676963">root</a><span>|</span><a href="#42677116">parent</a><span>|</span><a href="#42677278">next</a><span>|</span><label class="collapse" for="c-42677317">[-]</label><label class="expand" for="c-42677317">[2 more]</label></div><br/><div class="children"><div class="content">uv canât replace conda, any more than it can replace apt or nix.<p>Conda packages general binary packages, not just python packages. uv is just python packages.</div><br/><div id="42677930" class="c"><input type="checkbox" id="c-42677930" checked=""/><div class="controls bullet"><span class="by">woodson</span><span>|</span><a href="#42676963">root</a><span>|</span><a href="#42677317">parent</a><span>|</span><a href="#42677278">next</a><span>|</span><label class="collapse" for="c-42677930">[-]</label><label class="expand" for="c-42677930">[1 more]</label></div><br/><div class="children"><div class="content">Python packages (distributed via the Python package index, PyPI) can also be general binary packages. Try pip install cmake, for example.</div><br/></div></div></div></div></div></div><div id="42677278" class="c"><input type="checkbox" id="c-42677278" checked=""/><div class="controls bullet"><span class="by">Zaloog</span><span>|</span><a href="#42676963">parent</a><span>|</span><a href="#42677116">prev</a><span>|</span><a href="#42677052">next</a><span>|</span><label class="collapse" for="c-42677278">[-]</label><label class="expand" for="c-42677278">[3 more]</label></div><br/><div class="children"><div class="content">Pixi might be something worth looking for, if you want a uv conda equivalent</div><br/><div id="42678519" class="c"><input type="checkbox" id="c-42678519" checked=""/><div class="controls bullet"><span class="by">emmanueloga_</span><span>|</span><a href="#42676963">root</a><span>|</span><a href="#42677278">parent</a><span>|</span><a href="#42678057">next</a><span>|</span><label class="collapse" for="c-42678519">[-]</label><label class="expand" for="c-42678519">[1 more]</label></div><br/><div class="children"><div class="content">Fun fact: pixi uses uv as a library to install pypi packages!</div><br/></div></div><div id="42678057" class="c"><input type="checkbox" id="c-42678057" checked=""/><div class="controls bullet"><span class="by">cd4plus</span><span>|</span><a href="#42676963">root</a><span>|</span><a href="#42677278">parent</a><span>|</span><a href="#42678519">prev</a><span>|</span><a href="#42677052">next</a><span>|</span><label class="collapse" for="c-42678057">[-]</label><label class="expand" for="c-42678057">[1 more]</label></div><br/><div class="children"><div class="content">pixi seems fine, but it also is just using mamba on the backend so you might as well continue to use miniforge</div><br/></div></div></div></div><div id="42677052" class="c"><input type="checkbox" id="c-42677052" checked=""/><div class="controls bullet"><span class="by">throwaway314155</span><span>|</span><a href="#42676963">parent</a><span>|</span><a href="#42677278">prev</a><span>|</span><a href="#42677118">next</a><span>|</span><label class="collapse" for="c-42677052">[-]</label><label class="expand" for="c-42677052">[1 more]</label></div><br/><div class="children"><div class="content">That doesn&#x27;t make sense, respectfully.</div><br/></div></div></div></div><div id="42677118" class="c"><input type="checkbox" id="c-42677118" checked=""/><div class="controls bullet"><span class="by">laidoffamazon</span><span>|</span><a href="#42676963">prev</a><span>|</span><label class="collapse" for="c-42677118">[-]</label><label class="expand" for="c-42677118">[2 more]</label></div><br/><div class="children"><div class="content">I honestly really hate the venv ergonomics but uv does still depend on it as the golden path if you donât use the âwith flags (in my understanding). Is there a way to do a clean break with just the new âscript inline dependencies, or is that wrong&#x2F;suboptimal?</div><br/><div id="42677560" class="c"><input type="checkbox" id="c-42677560" checked=""/><div class="controls bullet"><span class="by">zanie</span><span>|</span><a href="#42677118">parent</a><span>|</span><label class="collapse" for="c-42677560">[-]</label><label class="expand" for="c-42677560">[1 more]</label></div><br/><div class="children"><div class="content">You can definitely do that â it&#x27;s just sub-optimal when you have multiple files that share dependencies.</div><br/></div></div></div></div></div></div></div></div></div></body></html>