<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1682672452493" as="style"/><link rel="stylesheet" href="styles.css?v=1682672452493"/><link rel="apple-touch-startup-image" href="https://png.pngtree.com/png-clipart/20210309/original/pngtree-a-squatting-tabby-cat-png-image_5803660.jpg"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://blog.flipperzero.one/1-month-battery-life-with-firmware-update/">FlipperZero: 1 Month Battery Life with Firmware Update</a> <span class="domain">(<a href="https://blog.flipperzero.one">blog.flipperzero.one</a>)</span></div><div class="subtext"><span>nickthegreek</span> | <span>34 comments</span></div><br/><div><div id="35739034" class="c"><input type="checkbox" id="c-35739034" checked=""/><div class="controls bullet"><span class="by">frowin</span><span>|</span><a href="#35737032">next</a><span>|</span><label class="collapse" for="c-35739034">[-]</label><label class="expand" for="c-35739034">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s kinda strange, I tried to sell my Flipper Zero and was wondering why people name them weirdly. As it turns out, ebay doesn&#x27;t allow to sell it. If anyone has an idea where I can offer it (Germany, Europe), let me know.</div><br/></div></div><div id="35737032" class="c"><input type="checkbox" id="c-35737032" checked=""/><div class="controls bullet"><span class="by">milleramp</span><span>|</span><a href="#35739034">prev</a><span>|</span><a href="#35738584">next</a><span>|</span><label class="collapse" for="c-35737032">[-]</label><label class="expand" for="c-35737032">[7 more]</label></div><br/><div class="children"><div class="content">Very cool, it already had a impressive battery life to begin with.  I just used my son&#x27;s zero to debug a ceiling fan remote.<p>Of course he uses it to turn off TV&#x27;s and open Tesla charge doors..</div><br/><div id="35737423" class="c"><input type="checkbox" id="c-35737423" checked=""/><div class="controls bullet"><span class="by">karlgrz</span><span>|</span><a href="#35737032">parent</a><span>|</span><a href="#35738584">next</a><span>|</span><label class="collapse" for="c-35737423">[-]</label><label class="expand" for="c-35737423">[6 more]</label></div><br/><div class="children"><div class="content">Which ceiling fan remote? I&#x27;ve been fighting with our bedroom fan, we like the performance but the remote works maybe once out of every 100 presses unless I climb up on our bed and extend my arm into the middle of the fan housing.</div><br/><div id="35737549" class="c"><input type="checkbox" id="c-35737549" checked=""/><div class="controls bullet"><span class="by">riveducha</span><span>|</span><a href="#35737032">root</a><span>|</span><a href="#35737423">parent</a><span>|</span><a href="#35738584">next</a><span>|</span><label class="collapse" for="c-35737549">[-]</label><label class="expand" for="c-35737549">[5 more]</label></div><br/><div class="children"><div class="content">I went into the weeds of reverse engineering my Minka Aire ceiling fans with a USB RTL-SDR. In my case the manufacturer&#x27;s remotes worked fine, but I wanted to integrate it in with Home Assistant. If you&#x27;re interested, you can see what I did: <a href="https:&#x2F;&#x2F;www.riveducha.com&#x2F;decode-wireless-signal-with-usb-tv-tuner" rel="nofollow">https:&#x2F;&#x2F;www.riveducha.com&#x2F;decode-wireless-signal-with-usb-tv...</a><p>I used a USB RTL-SDR ($15) and a Raspberry Pi to receive and transmit, but I think the Flipper Zero can do it all-in-one.</div><br/><div id="35737630" class="c"><input type="checkbox" id="c-35737630" checked=""/><div class="controls bullet"><span class="by">margalabargala</span><span>|</span><a href="#35737032">root</a><span>|</span><a href="#35737549">parent</a><span>|</span><a href="#35738584">next</a><span>|</span><label class="collapse" for="c-35737630">[-]</label><label class="expand" for="c-35737630">[4 more]</label></div><br/><div class="children"><div class="content">What $15 USB SDR can transmit? All the ones I have only receive, and to transmit I&#x27;m seeing more like $100. At $15 I would buy one immediately.</div><br/><div id="35737657" class="c"><input type="checkbox" id="c-35737657" checked=""/><div class="controls bullet"><span class="by">cdchn</span><span>|</span><a href="#35737032">root</a><span>|</span><a href="#35737630">parent</a><span>|</span><a href="#35737916">prev</a><span>|</span><a href="#35737904">next</a><span>|</span><label class="collapse" for="c-35737657">[-]</label><label class="expand" for="c-35737657">[1 more]</label></div><br/><div class="children"><div class="content">I think people have managed to use the GPIO pins as a bit bang transmitter.</div><br/></div></div><div id="35737904" class="c"><input type="checkbox" id="c-35737904" checked=""/><div class="controls bullet"><span class="by">riveducha</span><span>|</span><a href="#35737032">root</a><span>|</span><a href="#35737630">parent</a><span>|</span><a href="#35737657">prev</a><span>|</span><a href="#35738584">next</a><span>|</span><label class="collapse" for="c-35737904">[-]</label><label class="expand" for="c-35737904">[1 more]</label></div><br/><div class="children"><div class="content">Sorry, my wording was unclear. The USB RTL-SDR was for receiving, and I did the capture and analysis on my desktop. The Raspberry Pi was for transmitting using the GPIO pins.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="35738584" class="c"><input type="checkbox" id="c-35738584" checked=""/><div class="controls bullet"><span class="by">detrites</span><span>|</span><a href="#35737032">prev</a><span>|</span><a href="#35736744">next</a><span>|</span><label class="collapse" for="c-35738584">[-]</label><label class="expand" for="c-35738584">[3 more]</label></div><br/><div class="children"><div class="content">This is a good example of a problem that&#x27;s easy to talk about but difficult to fix:  
&quot;tell CPU to sleep!&quot; versus this whole lengthy article. 
Wondering now if the issues with Linux laptop sleep are related or have similarity.</div><br/><div id="35738732" class="c"><input type="checkbox" id="c-35738732" checked=""/><div class="controls bullet"><span class="by">lloeki</span><span>|</span><a href="#35738584">parent</a><span>|</span><a href="#35738859">next</a><span>|</span><label class="collapse" for="c-35738732">[-]</label><label class="expand" for="c-35738732">[1 more]</label></div><br/><div class="children"><div class="content">Linux should generally have no problem with CPU&amp;al sleep, the problem is often devices around, waking up in weird orders or states, or not waking up at all, or not going to sleep.<p>&gt; The furi_hal_os_sleep() function performs tick suppression inside the OS domain.<p>Reminds me that many eons ago I witnessed the introduction of CONFIG_NO_HZ in Linux, is it the default now? Combined with timer coalescing this makes for big energy savings.<p><a href="https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Tickless_kernel" rel="nofollow">https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Tickless_kernel</a><p><a href="https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Timer_coalescing" rel="nofollow">https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Timer_coalescing</a></div><br/></div></div><div id="35738859" class="c"><input type="checkbox" id="c-35738859" checked=""/><div class="controls bullet"><span class="by">azubinski</span><span>|</span><a href="#35738584">parent</a><span>|</span><a href="#35738732">prev</a><span>|</span><a href="#35736744">next</a><span>|</span><label class="collapse" for="c-35738859">[-]</label><label class="expand" for="c-35738859">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a very basic task in any kind of professional embedded development.</div><br/></div></div></div></div><div id="35736744" class="c"><input type="checkbox" id="c-35736744" checked=""/><div class="controls bullet"><span class="by">tuatoru</span><span>|</span><a href="#35738584">prev</a><span>|</span><a href="#35738372">next</a><span>|</span><label class="collapse" for="c-35736744">[-]</label><label class="expand" for="c-35736744">[5 more]</label></div><br/><div class="children"><div class="content">1.5 mA still seems like a lot for &quot;deep sleep&quot;.</div><br/><div id="35737600" class="c"><input type="checkbox" id="c-35737600" checked=""/><div class="controls bullet"><span class="by">mmoskal</span><span>|</span><a href="#35736744">parent</a><span>|</span><a href="#35738252">next</a><span>|</span><label class="collapse" for="c-35737600">[-]</label><label class="expand" for="c-35737600">[1 more]</label></div><br/><div class="children"><div class="content">On STM32 you typically need to go to STOP mode (called deep sleep in places) to get significant power savings. I had F0 and G0 waking up at 100Hz plus on pin interrupts (with maybe 30us latency) consuming 50-100uA (compared to maybe 20mA without sleep). I’m pretty sure you can do better on the WB since it’s actually a low power part, but it all depends on how complicated your software stack is. For example, to get the low latency wake up required only using the low level HAL and custom clock configuration.<p>Nordic parts are easier - they actually have low power sleep that is fairly automatic.</div><br/></div></div><div id="35738252" class="c"><input type="checkbox" id="c-35738252" checked=""/><div class="controls bullet"><span class="by">blkhawk</span><span>|</span><a href="#35736744">parent</a><span>|</span><a href="#35737600">prev</a><span>|</span><a href="#35737169">next</a><span>|</span><label class="collapse" for="c-35738252">[-]</label><label class="expand" for="c-35738252">[1 more]</label></div><br/><div class="children"><div class="content">The reason for that is because in sleep states what the MCU needs is only a small part of the whole - stuff like LDOs and DCDC converters also need some current and sometimes other chips are directly connected and take some power even when disabled.<p>For instance a very cheap 3.3v LDO I was using was taking about 1mA simply for being connected.<p>I am pretty sure this is a similar situation here and you can&#x27;t go much lower with the current circuit.</div><br/></div></div><div id="35737169" class="c"><input type="checkbox" id="c-35737169" checked=""/><div class="controls bullet"><span class="by">jdiff</span><span>|</span><a href="#35736744">parent</a><span>|</span><a href="#35738252">prev</a><span>|</span><a href="#35738372">next</a><span>|</span><label class="collapse" for="c-35737169">[-]</label><label class="expand" for="c-35737169">[2 more]</label></div><br/><div class="children"><div class="content">Seems perfectly in line with what I can glance at on the MCU&#x27;s datasheet.</div><br/><div id="35737950" class="c"><input type="checkbox" id="c-35737950" checked=""/><div class="controls bullet"><span class="by">steve_adams_86</span><span>|</span><a href="#35736744">root</a><span>|</span><a href="#35737169">parent</a><span>|</span><a href="#35738372">next</a><span>|</span><label class="collapse" for="c-35737950">[-]</label><label class="expand" for="c-35737950">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s in line, I think it might seem high because there are well known microcontrollers which can deep sleep with µA-level current. For example, the ESP32 consumes 0.15mA if the the ULP processor is on, and 10µA if it&#x27;s off.<p>I&#x27;m pretty sure the STM32WB can go as low as 2µA though. If I recall correctly it has STOP and STOP2 instructions, with the former being what FlipperZero is using and the latter requiring even less power. I think it&#x27;s really complicated to manage the deeper sleep state and the radio with STOP2 though, and that might be why they stuck with STOP. (edit: whoops, they cover this and more in their write up)</div><br/></div></div></div></div></div></div><div id="35738372" class="c"><input type="checkbox" id="c-35738372" checked=""/><div class="controls bullet"><span class="by">lgats</span><span>|</span><a href="#35736744">prev</a><span>|</span><a href="#35738423">next</a><span>|</span><label class="collapse" for="c-35738372">[-]</label><label class="expand" for="c-35738372">[2 more]</label></div><br/><div class="children"><div class="content">This conclusion reads very GPT-esque<p><pre><code>  As you can see, developing and debugging with the STM32WB series microcontroller is a challenging task. That is why it took us so long to identify and resolve all the issues related to our firmware. But thanks to our team of developers, the battery life of your Flipper Zero will last up to 1 month, starting the firmware version 0.82.</code></pre></div><br/><div id="35738847" class="c"><input type="checkbox" id="c-35738847" checked=""/><div class="controls bullet"><span class="by">smcl</span><span>|</span><a href="#35738372">parent</a><span>|</span><a href="#35738423">next</a><span>|</span><label class="collapse" for="c-35738847">[-]</label><label class="expand" for="c-35738847">[1 more]</label></div><br/><div class="children"><div class="content">To me it just reads a bit like it was written by an ESL speaker - &quot;starting the firmware version 0.82 ...&quot; is a bit of a giveaway (should probably be &quot;starting from version&quot; or just &quot;from version...&quot;, unnecessary &quot;the&quot; is a common mistake made when someone&#x27;s mother tongue doesn&#x27;t have articles).<p>ChatGPT doesn&#x27;t tend to do this in my experience. But I should stress that it&#x27;s still perfectly readable and a very minor mistake.</div><br/></div></div></div></div><div id="35738423" class="c"><input type="checkbox" id="c-35738423" checked=""/><div class="controls bullet"><span class="by">Animats</span><span>|</span><a href="#35738372">prev</a><span>|</span><a href="#35737264">next</a><span>|</span><label class="collapse" for="c-35738423">[-]</label><label class="expand" for="c-35738423">[1 more]</label></div><br/><div class="children"><div class="content">This is standby time. In standby mode this thing does nothing, right? An off switch would accomplish the same result.</div><br/></div></div><div id="35737264" class="c"><input type="checkbox" id="c-35737264" checked=""/><div class="controls bullet"><span class="by">gymbeaux</span><span>|</span><a href="#35738423">prev</a><span>|</span><a href="#35737886">next</a><span>|</span><label class="collapse" for="c-35737264">[-]</label><label class="expand" for="c-35737264">[10 more]</label></div><br/><div class="children"><div class="content">Last I heard US customs was seizing these at port. Can I realistically get one of these in the US?</div><br/><div id="35737289" class="c"><input type="checkbox" id="c-35737289" checked=""/><div class="controls bullet"><span class="by">Firmwarrior</span><span>|</span><a href="#35737264">parent</a><span>|</span><a href="#35737819">next</a><span>|</span><label class="collapse" for="c-35737289">[-]</label><label class="expand" for="c-35737289">[1 more]</label></div><br/><div class="children"><div class="content">Looks like they just sell out quickly in the US<p><a href="https:&#x2F;&#x2F;forum.flipperzero.one&#x2F;t&#x2F;buying-a-flipper-in-the-us-what-is-up-with-it-selling-out&#x2F;14323&#x2F;5" rel="nofollow">https:&#x2F;&#x2F;forum.flipperzero.one&#x2F;t&#x2F;buying-a-flipper-in-the-us-w...</a><p>Do you need one?  I thought this thing was open source, so you could theoretically make your own clone just without the cool case</div><br/></div></div><div id="35737819" class="c"><input type="checkbox" id="c-35737819" checked=""/><div class="controls bullet"><span class="by">matheusmoreira</span><span>|</span><a href="#35737264">parent</a><span>|</span><a href="#35737289">prev</a><span>|</span><a href="#35737347">next</a><span>|</span><label class="collapse" for="c-35737819">[-]</label><label class="expand" for="c-35737819">[1 more]</label></div><br/><div class="children"><div class="content">Brazil is seizing them too:<p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=35109931" rel="nofollow">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=35109931</a></div><br/></div></div><div id="35737347" class="c"><input type="checkbox" id="c-35737347" checked=""/><div class="controls bullet"><span class="by">snapetom</span><span>|</span><a href="#35737264">parent</a><span>|</span><a href="#35737819">prev</a><span>|</span><a href="#35738286">next</a><span>|</span><label class="collapse" for="c-35737347">[-]</label><label class="expand" for="c-35737347">[1 more]</label></div><br/><div class="children"><div class="content">There was one batch stopped last year, but they&#x27;ve been flowing fine for a while now.</div><br/></div></div><div id="35738286" class="c"><input type="checkbox" id="c-35738286" checked=""/><div class="controls bullet"><span class="by">abdusco</span><span>|</span><a href="#35737264">parent</a><span>|</span><a href="#35737347">prev</a><span>|</span><a href="#35738493">next</a><span>|</span><label class="collapse" for="c-35738286">[-]</label><label class="expand" for="c-35738286">[2 more]</label></div><br/><div class="children"><div class="content">Can I buy one in Germany? Has anyone any experience with it?</div><br/><div id="35738502" class="c"><input type="checkbox" id="c-35738502" checked=""/><div class="controls bullet"><span class="by">ThePowerOfFuet</span><span>|</span><a href="#35737264">root</a><span>|</span><a href="#35738286">parent</a><span>|</span><a href="#35738493">next</a><span>|</span><label class="collapse" for="c-35738502">[-]</label><label class="expand" for="c-35738502">[1 more]</label></div><br/><div class="children"><div class="content">Lab401 sells them in the EU.</div><br/></div></div></div></div><div id="35738493" class="c"><input type="checkbox" id="c-35738493" checked=""/><div class="controls bullet"><span class="by">64operator</span><span>|</span><a href="#35737264">parent</a><span>|</span><a href="#35738286">prev</a><span>|</span><a href="#35737421">next</a><span>|</span><label class="collapse" for="c-35738493">[-]</label><label class="expand" for="c-35738493">[2 more]</label></div><br/><div class="children"><div class="content">NTMA but I just got mine last week.</div><br/><div id="35739023" class="c"><input type="checkbox" id="c-35739023" checked=""/><div class="controls bullet"><span class="by">festive-minsky</span><span>|</span><a href="#35737264">root</a><span>|</span><a href="#35738493">parent</a><span>|</span><a href="#35737421">next</a><span>|</span><label class="collapse" for="c-35739023">[-]</label><label class="expand" for="c-35739023">[1 more]</label></div><br/><div class="children"><div class="content">What does NTMA mean?</div><br/></div></div></div></div><div id="35737421" class="c"><input type="checkbox" id="c-35737421" checked=""/><div class="controls bullet"><span class="by">29athrowaway</span><span>|</span><a href="#35737264">parent</a><span>|</span><a href="#35738493">prev</a><span>|</span><a href="#35737886">next</a><span>|</span><label class="collapse" for="c-35737421">[-]</label><label class="expand" for="c-35737421">[2 more]</label></div><br/><div class="children"><div class="content">They&#x27;re on Amazon.</div><br/><div id="35737869" class="c"><input type="checkbox" id="c-35737869" checked=""/><div class="controls bullet"><span class="by">khedoros1</span><span>|</span><a href="#35737264">root</a><span>|</span><a href="#35737421">parent</a><span>|</span><a href="#35737886">next</a><span>|</span><label class="collapse" for="c-35737869">[-]</label><label class="expand" for="c-35737869">[1 more]</label></div><br/><div class="children"><div class="content">I heard they were banned a few weeks ago.<p><a href="https:&#x2F;&#x2F;www.bleepingcomputer.com&#x2F;news&#x2F;technology&#x2F;flipper-zero-banned-by-amazon-for-being-a-card-skimming-device-&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.bleepingcomputer.com&#x2F;news&#x2F;technology&#x2F;flipper-zer...</a></div><br/></div></div></div></div></div></div><div id="35737886" class="c"><input type="checkbox" id="c-35737886" checked=""/><div class="controls bullet"><span class="by">Szpadel</span><span>|</span><a href="#35737264">prev</a><span>|</span><a href="#35738161">next</a><span>|</span><label class="collapse" for="c-35737886">[-]</label><label class="expand" for="c-35737886">[3 more]</label></div><br/><div class="children"><div class="content">I didn&#x27;t find this in the article and I think this would be a nice context to have:<p>what was battery life before?</div><br/><div id="35737907" class="c"><input type="checkbox" id="c-35737907" checked=""/><div class="controls bullet"><span class="by">arm</span><span>|</span><a href="#35737886">parent</a><span>|</span><a href="#35737903">next</a><span>|</span><label class="collapse" for="c-35737907">[-]</label><label class="expand" for="c-35737907">[1 more]</label></div><br/><div class="children"><div class="content">It’s mentioned in the first paragraph:<p>“We are proud to announce that starting the firmware version 0.82, your Flipper Zero&#x27;s battery life will last up to 1 month! It took us 2 years to resolve all firmware issues that prevented Flipper Zero from switching to power-saving mode, resulting in the same power consumption baseline in both idle and active states. <i>As a result, Flipper Zero&#x27;s battery life was approximately 1 week instead of the intended 1 month.</i>”</div><br/></div></div><div id="35737903" class="c"><input type="checkbox" id="c-35737903" checked=""/><div class="controls bullet"><span class="by">sintezcs</span><span>|</span><a href="#35737886">parent</a><span>|</span><a href="#35737907">prev</a><span>|</span><a href="#35738161">next</a><span>|</span><label class="collapse" for="c-35737903">[-]</label><label class="expand" for="c-35737903">[1 more]</label></div><br/><div class="children"><div class="content">About a week</div><br/></div></div></div></div></div></div></div></div></div></body></html>