<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1735722057169" as="style"/><link rel="stylesheet" href="styles.css?v=1735722057169"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://dgl.cx/2024/12/ghostty-terminal-title">Déjà vu: Ghostly CVEs in my terminal title</a> <span class="domain">(<a href="https://dgl.cx">dgl.cx</a>)</span></div><div class="subtext"><span>dgl</span> | <span>24 comments</span></div><br/><div><div id="42564289" class="c"><input type="checkbox" id="c-42564289" checked=""/><div class="controls bullet"><span class="by">mitchellh</span><span>|</span><a href="#42564047">next</a><span>|</span><label class="collapse" for="c-42564289">[-]</label><label class="expand" for="c-42564289">[9 more]</label></div><br/><div class="children"><div class="content">Just cross posting my lobsters post:<p>I want to say thanks to @dgl for reporting this, and this article is also expertly written.<p>I also have to say for me personally its quite embarrassing because as I told @dgl when he reported this: I’ve studied his work before and made it a note to test Ghostty against his past discoveries prior to release. And I… quite simply forgot. I didn’t make an issue for myself so it slipped away and here I am with egg on my face. I’m sorry!<p>But, I appreciate @dgl for the security report, reviewing the fix, and continuing to be an active user of the terminal. I also shared with him some broader thoughts on terminal security in general. Addressing terminal security in a more fundamental way is one of the first proposals I want to make regarding terminal innovation.<p>My thinking is still too early and under-researched for a formal proposal. But my general feeling having built a terminal over the past 2 years is that the security surrounding escape sequences is fundamentally flawed and poking one by one at these sequences to try to make them individually safe doesn’t feel like the right long term solution.<p>The surface area is too large and the complexity of some of the newer sequences too high (i.e. Kitty Graphics) to be confident in secure implementations. DoS is far too easy with terminals (Ghostty has a handful of known DoS attacks, but so does pretty much every other terminal I know of). And some legacy sequences are just kind of shocking to have immediately available. For example, DECCOLM is available in macOS Terminal.app. If you issue a DECCOLM (CSI ? 3 h I believe), Terminal.app will physically resize the window and lock it to 132 columns. You can very easily crash Terminal.app at anytime by sending enough of these (a DoS attack). There are many more.<p>Part of my thinking is trying to design a mechanism that can effectively create something akin to either CPU protection rings or OpenBSD’s pledge() syscall. Whatever the mechanism, the general idea is: reduction of capability.<p>For example, it makes sense for a shell to be extremely powerful. It’s literally a code execution device. However, it doesn’t make much sense for cat to be able to execute arbitrary escape sequences (which it does today in any terminal). Whether it is the shell or cat itself, something should be able to tell a terminal: “hey, only execute some subset of escape sequences (or none at all).” For cat, that might be none or perhaps just SGR sequences (styles, colors, etc.). The insecurity of cat-ing or tail-ing any form of data that could contain user-generated data is hopefully well known at this point…<p>As I said before, this thinking is all still very raw and I don’t have anything concrete to proposal. I want to share this because I want folks to know that I’m thinking about it, and perhaps others may be interested in thinking about it with me… if so, please contact me. I’ve already shared this line of thinking with @dgl as well.</div><br/><div id="42564811" class="c"><input type="checkbox" id="c-42564811" checked=""/><div class="controls bullet"><span class="by">hnlmorg</span><span>|</span><a href="#42564289">parent</a><span>|</span><a href="#42564352">next</a><span>|</span><label class="collapse" for="c-42564811">[-]</label><label class="expand" for="c-42564811">[1 more]</label></div><br/><div class="children"><div class="content">I’m working on similar issues with my terminal emulator. So I’d very much like to be part of that conversation too.</div><br/></div></div><div id="42564352" class="c"><input type="checkbox" id="c-42564352" checked=""/><div class="controls bullet"><span class="by">aumerle</span><span>|</span><a href="#42564289">parent</a><span>|</span><a href="#42564811">prev</a><span>|</span><a href="#42564047">next</a><span>|</span><label class="collapse" for="c-42564352">[-]</label><label class="expand" for="c-42564352">[7 more]</label></div><br/><div class="children"><div class="content">You proposal does not address this issue since shells would still need full privileges.<p>This entire class of exploits (query responses with user controlled data leading to shells executing commands) would be removed if shells just moved to using the kitty keyboard protocol with all key events represented as escape codes and implemented a full escape code parser for data received form the terminal. You cannot embed an escape code inside another, or while technically you can, it is trivial to implement a security policy of disallowing these in both terminals and shells. Then barring implementation bugs in the escape code parser (which can easily be shipped as a standalone native code library) you dont have this entire class of issues and the associated one that the bracketed paste hack was created to address.</div><br/><div id="42564437" class="c"><input type="checkbox" id="c-42564437" checked=""/><div class="controls bullet"><span class="by">mitchellh</span><span>|</span><a href="#42564289">root</a><span>|</span><a href="#42564352">parent</a><span>|</span><a href="#42564047">next</a><span>|</span><label class="collapse" for="c-42564437">[-]</label><label class="expand" for="c-42564437">[6 more]</label></div><br/><div class="children"><div class="content">I believe it could. A shell could reduce capability by default for all executed shell scripts (file or inline on the prompt) and require opt in to not do this. Something akin to a umask of sorts. It’d break exceedingly few real scripts. (Hand waving a lot here with the “opt in” mechanism to avoid that being scripted but I have ideas)<p>Also note my thoughts (very much not even close to being a proposal) are very raw. Inviting this kind of discussion is exactly what I hope to do :)<p>Reduction of capability in general is not intended to address all class of security issue. For example you’d still want unsafe paste detection (to detect newlines or attempted bracketed paste escapes) on a prompt line.<p>But I think having a mechanism to eliminate the possibility of entire class of actions without wholesale disabling them in the terminal emulator is a desirable property. Right now a lot of these features are mostly on&#x2F;off.</div><br/><div id="42564462" class="c"><input type="checkbox" id="c-42564462" checked=""/><div class="controls bullet"><span class="by">aumerle</span><span>|</span><a href="#42564289">root</a><span>|</span><a href="#42564437">parent</a><span>|</span><a href="#42564047">next</a><span>|</span><label class="collapse" for="c-42564462">[-]</label><label class="expand" for="c-42564462">[5 more]</label></div><br/><div class="children"><div class="content">So if I am to understand your proposal more concretely it is something like implement an escape code that the shell can use to turn off all other escape codes (presumably with some kind of listing mechanism) and then have the shell do that before launching any third party script&#x2F;program&#x2F;function? How would the shell know which escape codes the program it is running needs?<p>I can, kind of, see the utility of a pledge() type system within a single program, but in a shell, whose whole job is basically running programs it knows nothing about beyond their name? How would that work?</div><br/><div id="42564482" class="c"><input type="checkbox" id="c-42564482" checked=""/><div class="controls bullet"><span class="by">mitchellh</span><span>|</span><a href="#42564289">root</a><span>|</span><a href="#42564462">parent</a><span>|</span><a href="#42564047">next</a><span>|</span><label class="collapse" for="c-42564482">[-]</label><label class="expand" for="c-42564482">[4 more]</label></div><br/><div class="children"><div class="content">Sorry to be a broken record but I have no “proposal” whatsoever. It’s more of an information sharing and seeking discussion. I don’t know what I want yet except that I think we can do better. The end result could be that it’s all a terrible idea and that’s okay, but hopefully something comes out of it eventually.<p>Id love to continue this discussion, but I think HN threads probably aren’t the right medium. If you’d like I can email you or we can schedule a call. I’m not trying to seek privacy, I’d be happy for any to be recorded or shared publicly, I just don’t find HN to be a good place if you really want to dive into this!</div><br/><div id="42564500" class="c"><input type="checkbox" id="c-42564500" checked=""/><div class="controls bullet"><span class="by">aumerle</span><span>|</span><a href="#42564289">root</a><span>|</span><a href="#42564482">parent</a><span>|</span><a href="#42564047">next</a><span>|</span><label class="collapse" for="c-42564500">[-]</label><label class="expand" for="c-42564500">[3 more]</label></div><br/><div class="children"><div class="content">Of course, I didn&#x27;t mean to put you in a spot. We can always continue this later once your thoughts have matured. Sadly I have an extremely full schedule so I dont think I have the badwidth to noodle on this at this stage but if and when you have something more concrete please do post it somewhere public and I will try to contribute to the discussion.</div><br/><div id="42564671" class="c"><input type="checkbox" id="c-42564671" checked=""/><div class="controls bullet"><span class="by">moderation</span><span>|</span><a href="#42564289">root</a><span>|</span><a href="#42564500">parent</a><span>|</span><a href="#42564509">next</a><span>|</span><label class="collapse" for="c-42564671">[-]</label><label class="expand" for="c-42564671">[1 more]</label></div><br/><div class="children"><div class="content">But strangely have a lot of time to post here</div><br/></div></div><div id="42564509" class="c"><input type="checkbox" id="c-42564509" checked=""/><div class="controls bullet"><span class="by">mitchellh</span><span>|</span><a href="#42564289">root</a><span>|</span><a href="#42564500">parent</a><span>|</span><a href="#42564671">prev</a><span>|</span><a href="#42564047">next</a><span>|</span><label class="collapse" for="c-42564509">[-]</label><label class="expand" for="c-42564509">[1 more]</label></div><br/><div class="children"><div class="content">Appreciate it! &lt;3</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="42564047" class="c"><input type="checkbox" id="c-42564047" checked=""/><div class="controls bullet"><span class="by">sevg</span><span>|</span><a href="#42564289">prev</a><span>|</span><label class="collapse" for="c-42564047">[-]</label><label class="expand" for="c-42564047">[14 more]</label></div><br/><div class="children"><div class="content">I’m impressed with how many bugs (security and otherwise) have been fixed and new features included [0] in the 1.0.1 release, considering the first public release (1.0) was only 5 days ago.<p>[0]: <a href="https:&#x2F;&#x2F;ghostty.org&#x2F;docs&#x2F;install&#x2F;release-notes&#x2F;1-0-1" rel="nofollow">https:&#x2F;&#x2F;ghostty.org&#x2F;docs&#x2F;install&#x2F;release-notes&#x2F;1-0-1</a></div><br/><div id="42564292" class="c"><input type="checkbox" id="c-42564292" checked=""/><div class="controls bullet"><span class="by">aumerle</span><span>|</span><a href="#42564047">parent</a><span>|</span><label class="collapse" for="c-42564292">[-]</label><label class="expand" for="c-42564292">[13 more]</label></div><br/><div class="children"><div class="content">If that impresses you, you will have your socks blown off by: <a href="https:&#x2F;&#x2F;sw.kovidgoyal.net&#x2F;kitty&#x2F;changelog&#x2F;#detailed-list-of-changes" rel="nofollow">https:&#x2F;&#x2F;sw.kovidgoyal.net&#x2F;kitty&#x2F;changelog&#x2F;#detailed-list-of-...</a></div><br/><div id="42564619" class="c"><input type="checkbox" id="c-42564619" checked=""/><div class="controls bullet"><span class="by">pwdisswordfishz</span><span>|</span><a href="#42564047">root</a><span>|</span><a href="#42564292">parent</a><span>|</span><a href="#42564485">next</a><span>|</span><label class="collapse" for="c-42564619">[-]</label><label class="expand" for="c-42564619">[1 more]</label></div><br/><div class="children"><div class="content">Oh, did he start actually fixing vulnerabilities instead of insisting they aren&#x27;t there while repeatedly being given PoC exploits?</div><br/></div></div><div id="42564485" class="c"><input type="checkbox" id="c-42564485" checked=""/><div class="controls bullet"><span class="by">mitchellh</span><span>|</span><a href="#42564047">root</a><span>|</span><a href="#42564292">parent</a><span>|</span><a href="#42564619">prev</a><span>|</span><a href="#42564367">next</a><span>|</span><label class="collapse" for="c-42564485">[-]</label><label class="expand" for="c-42564485">[1 more]</label></div><br/><div class="children"><div class="content">Kitty is a great terminal and Kovid does excellent work. I have a ton of respect for him. Ghostty (disclaimer: I’m the creator) could also be and I appreciate anyone who thinks so. There doesn’t have to be a winner&#x2F;loser mentality!<p>The big picture is to get more people to use the terminal more for cases it’s good for. Infighting amongst people who already like terminals is counter productive, in my opinion.</div><br/></div></div><div id="42564367" class="c"><input type="checkbox" id="c-42564367" checked=""/><div class="controls bullet"><span class="by">sevg</span><span>|</span><a href="#42564047">root</a><span>|</span><a href="#42564292">parent</a><span>|</span><a href="#42564485">prev</a><span>|</span><label class="collapse" for="c-42564367">[-]</label><label class="expand" for="c-42564367">[10 more]</label></div><br/><div class="children"><div class="content">It’s interesting how singularly passionate you are about Kitty, with almost all of your comments for the last year (or longer) being about Kitty.<p>Don’t you have something more interesting to do with your time than to find opportunities to say: nah Kitty is better ;)<p>I was just finding something to be impressed about, considering it has only just gone public and open source (as opposed to a mature project with established GitHub presence and flow of contributions).</div><br/><div id="42564380" class="c"><input type="checkbox" id="c-42564380" checked=""/><div class="controls bullet"><span class="by">aumerle</span><span>|</span><a href="#42564047">root</a><span>|</span><a href="#42564367">parent</a><span>|</span><label class="collapse" for="c-42564380">[-]</label><label class="expand" for="c-42564380">[9 more]</label></div><br/><div class="children"><div class="content">Yup kitty revolutionized my terminal experience, hence the passion. I am sorry but since you seem to be passionate enough about ghostty to try to shill it in a article about a security vulnerability in it, I don&#x27;t think you have a leg to stand on when it comes to complaining about my posts.<p>If you want to claim that ghostty is developed very rapidly it behoves you to do a little research and compare it against its peers before making that claim.</div><br/><div id="42564411" class="c"><input type="checkbox" id="c-42564411" checked=""/><div class="controls bullet"><span class="by">sevg</span><span>|</span><a href="#42564047">root</a><span>|</span><a href="#42564380">parent</a><span>|</span><label class="collapse" for="c-42564411">[-]</label><label class="expand" for="c-42564411">[8 more]</label></div><br/><div class="children"><div class="content">What a strange reply.<p>Kitty has been my terminal for years. I haven’t even used ghostty. I’m not shilling anything. Good grief. Try looking in a mirror.<p>I was making a good faith comment just adding something positive. No need to turn it into a war. It’s strange (and just wrong) that you think I need to review the development velocity of all other projects before being impressed by something. Actually, no. To be impressed by the rainbow outside my window, I need not have seen and reviewed all other rainbows.</div><br/><div id="42564440" class="c"><input type="checkbox" id="c-42564440" checked=""/><div class="controls bullet"><span class="by">aumerle</span><span>|</span><a href="#42564047">root</a><span>|</span><a href="#42564411">parent</a><span>|</span><label class="collapse" for="c-42564440">[-]</label><label class="expand" for="c-42564440">[7 more]</label></div><br/><div class="children"><div class="content">:) Interesting then that despite claiming to have used kitty for years and not even tried using ghostty you have exactly zero comments about kitty in the last few months (I didn&#x27;t bother reviewing your commenting history further than that) and yet here you are trying to say something positive about a project you claim to not even use, and that too in a handful of minutes after it was posted. Color me shocked :))<p>And on the off chance that you are actually sincere and not a shill, my apologies, but your original comment comes as very shilling and for a project that has generated a <i>lot</i> of shilling in the recent past.</div><br/><div id="42564497" class="c"><input type="checkbox" id="c-42564497" checked=""/><div class="controls bullet"><span class="by">sevg</span><span>|</span><a href="#42564047">root</a><span>|</span><a href="#42564440">parent</a><span>|</span><label class="collapse" for="c-42564497">[-]</label><label class="expand" for="c-42564497">[6 more]</label></div><br/><div class="children"><div class="content">Implying I’m a liar is a silly cheap shot.<p>I’ve made zero HN comments about Firefox, Thunderbird and Blender. But I must be lying when I say I use those every day.<p>You seem to have interpreted my original comment as a declaration of ghostty’s superiority. It wasn’t. Not every positive comment about a piece of software must also be interpreted as an attack on another piece of software, such that you have to come to its defence.<p>Though perhaps you will tell me I’m forbidden from being impressed by any terminal other than Kitty, and certainly not God-forbid actually share that thought on HN!</div><br/><div id="42564532" class="c"><input type="checkbox" id="c-42564532" checked=""/><div class="controls bullet"><span class="by">aumerle</span><span>|</span><a href="#42564047">root</a><span>|</span><a href="#42564497">parent</a><span>|</span><label class="collapse" for="c-42564532">[-]</label><label class="expand" for="c-42564532">[5 more]</label></div><br/><div class="children"><div class="content">So let me get this straight. You think you have the privilege to post your
opinion about ghostty and present it as an honest one, and I do not. Let me
remind you, you responded to my comment which was a link to a changelog, 
with a personal attack on me.<p>And no, it&#x27;s not a silly cheap shot, it&#x27;s the giant blinking neon sign in the
room that points to the insincerity of your comment. Yup you don&#x27;t comment about
Firefox, et al. but then neither do you comment on stories about say Edge or
Safari shilling them, so what relevance your not commenting about firefox has,
is, to put it politely, unclear.</div><br/><div id="42564583" class="c"><input type="checkbox" id="c-42564583" checked=""/><div class="controls bullet"><span class="by">sevg</span><span>|</span><a href="#42564047">root</a><span>|</span><a href="#42564532">parent</a><span>|</span><label class="collapse" for="c-42564583">[-]</label><label class="expand" for="c-42564583">[4 more]</label></div><br/><div class="children"><div class="content">It’s actually possible to make a positive comment about something and for it to be sincere. These are not mutually exclusive.<p>Though it seems if there’s a positive comment about a terminal that you don’t personally think deserves it, the commenter must be a shill.<p>Honestly quite bizarre how this sub-thread has turned out. What I thought was an innocent comment, you’ve turned into ghostty vs kitty. Not everything has to be turned into Vim vs Emacs, systemd vs anti-systemd, or which is objectively the best terminal. It’s possible to be impressed with ghostty’s release velocity without it being a judgment about Kitty or any other terminal or software project. But alas, in order to make a positive comment about ghostty, I must have already had a proven history of making positive comments about other terminals ;)</div><br/><div id="42564663" class="c"><input type="checkbox" id="c-42564663" checked=""/><div class="controls bullet"><span class="by">aumerle</span><span>|</span><a href="#42564047">root</a><span>|</span><a href="#42564583">parent</a><span>|</span><label class="collapse" for="c-42564663">[-]</label><label class="expand" for="c-42564663">[3 more]</label></div><br/><div class="children"><div class="content">Yeah, of course it is <i>possible</i> for it to be sincere. Your reaction, in making
a personal attack on me when I disagreed with your so called positive comment
is what makes it so clear that you are being insincere. If you were actually
just impressed by ghostty&#x27;s release velocity and someone pointed out to you
that other projects in that space have similar release velocities, you would
just have said oh cool, nice to know. Instead you decided to research my
posting history in order to make a personal attack on me so as to try and
distract attention from your shilling in the first place.<p>By the way, most projects that get traction on a significant release tend to
make a very fast subsequent release to correct issues in that release. I chose
kitty as an obvious point of comparison, that I am personally familiar with,
but here you go for wezterm: <a href="https:&#x2F;&#x2F;wezfurlong.org&#x2F;wezterm&#x2F;changelog.html" rel="nofollow">https:&#x2F;&#x2F;wezfurlong.org&#x2F;wezterm&#x2F;changelog.html</a>
So much for being impressed.<p>And cool it with the strawmen. Your previous post had firefox, this one has
systemd. Try addressing what is being said to you instead of indulging in cheap
rhetorical tricks.</div><br/><div id="42564715" class="c"><input type="checkbox" id="c-42564715" checked=""/><div class="controls bullet"><span class="by">sevg</span><span>|</span><a href="#42564047">root</a><span>|</span><a href="#42564663">parent</a><span>|</span><label class="collapse" for="c-42564715">[-]</label><label class="expand" for="c-42564715">[2 more]</label></div><br/><div class="children"><div class="content">Personal attack? I just said it was interesting you mostly only comment about Kitty. Which is factually true. (It’s also not a criticism to be singularly passionate about something.) I’m often curious about people’s previous comments, it’s not some decision I made to research your comment history.<p>I make one, single, lone comment about ghostty. You regularly (almost exclusively) seize opportunities to talk about Kitty, especially in threads that are about other terminals. And I’m the shill? Ok.<p>You’ve also successfully set the goalposts up such that, even if I did have something to prove to you (which I don’t), I can’t prove anything anyway! It’s impossible to prove what terminal I use or don’t use. And impossible to go back and change my comment history. So, well played I guess ;)</div><br/><div id="42564827" class="c"><input type="checkbox" id="c-42564827" checked=""/><div class="controls bullet"><span class="by">aumerle</span><span>|</span><a href="#42564047">root</a><span>|</span><a href="#42564715">parent</a><span>|</span><label class="collapse" for="c-42564827">[-]</label><label class="expand" for="c-42564827">[1 more]</label></div><br/><div class="children"><div class="content">I note you once again failed to address the actual point in favor of more
personal attacks. To wit, ghostty does not actually have a fast release
velocity compared to its peers.<p>As for having played well, thanks, better luck next time :)</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>