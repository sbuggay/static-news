<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1687597258424" as="style"/><link rel="stylesheet" href="styles.css?v=1687597258424"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://lupyuen.codeberg.page/articles/riscv.html">64-Bit RISC-V with Apache NuttX Real-Time Operating System</a>Â <span class="domain">(<a href="https://lupyuen.codeberg.page">lupyuen.codeberg.page</a>)</span></div><div class="subtext"><span>lupyuen</span> | <span>7 comments</span></div><br/><div><div id="36455404" class="c"><input type="checkbox" id="c-36455404" checked=""/><div class="controls bullet"><span class="by">Taniwha</span><span>|</span><a href="#36454774">next</a><span>|</span><label class="collapse" for="c-36455404">[-]</label><label class="expand" for="c-36455404">[2 more]</label></div><br/><div class="children"><div class="content">(for those who are not RISCV people a &#x27;hartid&#x27; is a cpu register unique to each core that identifies it)<p>(to the implementer) it&#x27;s worth noting that hartids are not guaranteed to be contiguous - one is guaranteed to be 0 - the rest will all be different, bot not necessarily 0,1,2,3,4,5....<p>It&#x27;s to handle things like this: Suppose I have a board with 4 CPU chips on it, each chip has N CPUs on it (N might be variable, sometimes it&#x27;s 2, 3, 4 - might depend on yield or on which chips you chose to put on the board (the cheap 2 core version or the expensive 8 core one). Each chip has some pins that indicate what some of the upper bits of the hartid, internally the various CPUs within the chip will set some low bits of their hartids. If I&#x27;m a chip designer who wants to make 256 core chips I&#x27;ll reserve 8 bits for the lower bits and route the external chip pins to bits above that.<p>My point though don&#x27;t depend on hartids being contiguous</div><br/><div id="36455682" class="c"><input type="checkbox" id="c-36455682" checked=""/><div class="controls bullet"><span class="by">lupyuen</span><span>|</span><a href="#36455404">parent</a><span>|</span><a href="#36454774">next</a><span>|</span><label class="collapse" for="c-36455682">[-]</label><label class="expand" for="c-36455682">[1 more]</label></div><br/><div class="children"><div class="content">Thanks! I&#x27;ll take note of this while I&#x27;m working on NuttX and RISC-V.</div><br/></div></div></div></div><div id="36454774" class="c"><input type="checkbox" id="c-36454774" checked=""/><div class="controls bullet"><span class="by">djbusby</span><span>|</span><a href="#36455404">prev</a><span>|</span><label class="collapse" for="c-36454774">[-]</label><label class="expand" for="c-36454774">[4 more]</label></div><br/><div class="children"><div class="content">Can one use QEMU to emulate the 8-bit RISC? What would that even be used for? Is that some embedded device things?</div><br/><div id="36454980" class="c"><input type="checkbox" id="c-36454980" checked=""/><div class="controls bullet"><span class="by">monocasa</span><span>|</span><a href="#36454774">parent</a><span>|</span><label class="collapse" for="c-36454980">[-]</label><label class="expand" for="c-36454980">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Can one use QEMU to emulate the 8-bit RISC?<p>They&#x27;re arguably not RISC cores, but the docs here are referring to NuttX&#x27;s support for avr and z80.  And, no, qemu doesn&#x27;t support those archs AFAIK.<p>&gt; What would that even be used for?  Is that some embedded device things?<p>Yes, as is NuttX usage in general.</div><br/><div id="36455337" class="c"><input type="checkbox" id="c-36455337" checked=""/><div class="controls bullet"><span class="by">ranger_danger</span><span>|</span><a href="#36454774">root</a><span>|</span><a href="#36454980">parent</a><span>|</span><label class="collapse" for="c-36455337">[-]</label><label class="expand" for="c-36455337">[2 more]</label></div><br/><div class="children"><div class="content">qemu certainly supports avr</div><br/><div id="36455461" class="c"><input type="checkbox" id="c-36455461" checked=""/><div class="controls bullet"><span class="by">monocasa</span><span>|</span><a href="#36454774">root</a><span>|</span><a href="#36455337">parent</a><span>|</span><label class="collapse" for="c-36455461">[-]</label><label class="expand" for="c-36455461">[1 more]</label></div><br/><div class="children"><div class="content">Oh nice, I missed that it was added during the pandemic.<p><a href="https:&#x2F;&#x2F;www.qemu.org&#x2F;2020&#x2F;08&#x2F;11&#x2F;qemu-5-1-0&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.qemu.org&#x2F;2020&#x2F;08&#x2F;11&#x2F;qemu-5-1-0&#x2F;</a></div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>