<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1726563668770" as="style"/><link rel="stylesheet" href="styles.css?v=1726563668770"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.howtocodeit.com/articles/master-hexagonal-architecture-rust">Master Hexagonal Architecture in Rust</a> <span class="domain">(<a href="https://www.howtocodeit.com">www.howtocodeit.com</a>)</span></div><div class="subtext"><span>milliams</span> | <span>48 comments</span></div><br/><div><div id="41565596" class="c"><input type="checkbox" id="c-41565596" checked=""/><div class="controls bullet"><span class="by">Avi-D-coder</span><span>|</span><a href="#41565352">next</a><span>|</span><label class="collapse" for="c-41565596">[-]</label><label class="expand" for="c-41565596">[3 more]</label></div><br/><div class="children"><div class="content">This is such bad advice that I honestly couldn’t tell if it was a parody or not until I read the comment section—it’s not.<p>Attempting these design patterns is a common part of getting over OOP when new to Rust.
The result: over-abstracted, verbose, unmaintainable C++&#x2F;Java written as Rust.
Every layer of indirection ossifies the underlying concrete implementations.
The abstractions inevitably leak, and project velocity declines.<p>I have seen the same types and logic literally copied into three different repositories in the name of separation of concerns.<p>Luckily people usually get over this phase of their Rust career after a couple of failures.<p>If you’d like to skip that part, here are a few rules:<p>1. Always start with concrete types.
Don’t abstract until you have at least two, preferably three, concrete implementations.<p>2. Separation of concerns is a myth.<p>3. K.I.S.S.</div><br/><div id="41565780" class="c"><input type="checkbox" id="c-41565780" checked=""/><div class="controls bullet"><span class="by">rob74</span><span>|</span><a href="#41565596">parent</a><span>|</span><a href="#41565775">next</a><span>|</span><label class="collapse" for="c-41565780">[-]</label><label class="expand" for="c-41565780">[1 more]</label></div><br/><div class="children"><div class="content">The same applies to Go too. They may be quite different languages, but trying to apply OOP patterns feels alien in both of them...</div><br/></div></div><div id="41565775" class="c"><input type="checkbox" id="c-41565775" checked=""/><div class="controls bullet"><span class="by">tcfhgj</span><span>|</span><a href="#41565596">parent</a><span>|</span><a href="#41565780">prev</a><span>|</span><a href="#41565352">next</a><span>|</span><label class="collapse" for="c-41565775">[-]</label><label class="expand" for="c-41565775">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t want to invalidate your experience, but I would like to see what your claims and conclusions are based on.</div><br/></div></div></div></div><div id="41565352" class="c"><input type="checkbox" id="c-41565352" checked=""/><div class="controls bullet"><span class="by">attheicearcade</span><span>|</span><a href="#41565596">prev</a><span>|</span><a href="#41564597">next</a><span>|</span><label class="collapse" for="c-41565352">[-]</label><label class="expand" for="c-41565352">[4 more]</label></div><br/><div class="children"><div class="content">I prefer the first example, to be honest. Much of the time your API is more or less a wrapper around the DB, so why introduce more indirection? I don’t really buy the testing argument since the interesting stuff which really needs testing is often in the queries anyway. Swapping out dependencies is not a huge issue in a language like rust, the compiler gives you a checklist of things to fix. I also don’t like that you call this function which handles transactions internally, inevitably you’ll end up with a handler calling two different functions like this resulting in two transactions when they should be atomic.<p>At $work we’re slowly ripping out a similar system in favour of handlers calling database functions directly, such that they can put transactions in the right place across more complicated sets of queries. Code is simpler, data integrity is better.</div><br/><div id="41565666" class="c"><input type="checkbox" id="c-41565666" checked=""/><div class="controls bullet"><span class="by">mrkeen</span><span>|</span><a href="#41565352">parent</a><span>|</span><a href="#41565495">next</a><span>|</span><label class="collapse" for="c-41565666">[-]</label><label class="expand" for="c-41565666">[1 more]</label></div><br/><div class="children"><div class="content">It <i>is</i> for testing, but you don&#x27;t indirect over class A because you want to test class A, you do so to test class B.<p>By all means, write a test to make sure the queries actually work on the database.  It will be slow, stateful and annoying, but still probably worth it.<p>But you don&#x27;t want to bring that slow-statefulness over to every other upstream test in the entire system: want to test if the permission system (in some outer class) is allowing&#x2F;blocking correctly? You&#x27;ll need to start up a database to do so.  Is your test making sure that an admin with permissions can create a user (without error?), well it&#x27;s going to start failing due to USER_ALREADY_EXISTS if you run the test twice.  To avoid that you&#x27;ll need to reset and configure its state for every single invocation.</div><br/></div></div><div id="41565495" class="c"><input type="checkbox" id="c-41565495" checked=""/><div class="controls bullet"><span class="by">Kinrany</span><span>|</span><a href="#41565352">parent</a><span>|</span><a href="#41565666">prev</a><span>|</span><a href="#41565695">next</a><span>|</span><label class="collapse" for="c-41565495">[-]</label><label class="expand" for="c-41565495">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Much of the time your API is more or less a wrapper around the DB, so why introduce more indirection?<p>That&#x27;s an easy scenario. General utilities should aim to make hard things possible and then minimize the overhead in easy scenarios, so the fact that this is more complex than the dumbest thing that could possibly work, is not by itself a good argument against.</div><br/></div></div><div id="41565695" class="c"><input type="checkbox" id="c-41565695" checked=""/><div class="controls bullet"><span class="by">globular-toast</span><span>|</span><a href="#41565352">parent</a><span>|</span><a href="#41565495">prev</a><span>|</span><a href="#41564597">next</a><span>|</span><label class="collapse" for="c-41565695">[-]</label><label class="expand" for="c-41565695">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not really about being able to swap out the db or something, that&#x27;s just a bonus. It&#x27;s about being able to write a proper domain model (ie. entities and business rules etc.) that is clear and testable and independent of details like persistence, serialisation, i&#x2F;o protocols etc. If your system is just CRUD, then you absolutely don&#x27;t need anything like this, but if you have business rules (high level stuff) and intermingle it with low level details then it quickly becomes a mess that is hard to reason with.<p>But you should totally do what you&#x27;re doing until it breaks. You only start looking into better architecture when things are not working. Being aware of something like this means you&#x27;ll have something to look up if&#x2F;when you run into the problems that inevitably crop up in simple &quot;db wrapper&quot; type APIs.</div><br/></div></div></div></div><div id="41564597" class="c"><input type="checkbox" id="c-41564597" checked=""/><div class="controls bullet"><span class="by">phamilton</span><span>|</span><a href="#41565352">prev</a><span>|</span><a href="#41565451">next</a><span>|</span><label class="collapse" for="c-41564597">[-]</label><label class="expand" for="c-41564597">[7 more]</label></div><br/><div class="children"><div class="content">Has anyone ever actually moved a mature application from one database to another and found that the code around calling the DB was a major painpoint?<p>I&#x27;m all for the unit testing argument, but in an active SaaS business I&#x27;ve never seen the hypothetical database change where a well architected app makes it smooth. I have certainly moved databases before, but  the performance and semantics changes dwarf the call sites that need updating. Especially in Rust, where refactoring is quite straightforward due to the type system.</div><br/><div id="41565210" class="c"><input type="checkbox" id="c-41565210" checked=""/><div class="controls bullet"><span class="by">mrkeen</span><span>|</span><a href="#41564597">parent</a><span>|</span><a href="#41564867">next</a><span>|</span><label class="collapse" for="c-41565210">[-]</label><label class="expand" for="c-41565210">[1 more]</label></div><br/><div class="children"><div class="content">I strongly believe in this principle, but I&#x27;ve also seen colleagues try to future-proof the database (via interfaces) in the wrong place.<p>If your DBUserStore happens to know directly about SQL, that class is the wrong place to try to introduce flexibility around different DBs, ORMs, SQL dialects, etc.  Just hard-code it to PostgresUserStore and be done with it.<p>Instead, put the interface one level up.  Your PostgresUserStore is just a place to store and retrieve users, so it can implement a more general UserStore interface.  Then UserStore could just be a HashMap or something for the purposes of unit tests.<p>Also, if you have some autowiring nonsense that&#x27;s configured to assume &quot;one service has one database&quot;, that&#x27;s bad.  Singletons used to be an anti-pattern and now they&#x27;ve been promoted to annotation and&#x2F;or basic building block of Java microservices.<p>When it comes time to live-migrate between databases, your service will need to stand up connections to both at once - <i>two</i> configurations, not one, so architect accordingly.</div><br/></div></div><div id="41564867" class="c"><input type="checkbox" id="c-41564867" checked=""/><div class="controls bullet"><span class="by">yuppiepuppie</span><span>|</span><a href="#41564597">parent</a><span>|</span><a href="#41565210">prev</a><span>|</span><a href="#41565436">next</a><span>|</span><label class="collapse" for="c-41564867">[-]</label><label class="expand" for="c-41564867">[1 more]</label></div><br/><div class="children"><div class="content">My anecdotal experience tells me that it never works in a high scale product environment. Having managed and lead 2 teams that maintained a legacy system with hex-arch and we had to move DBs in both. We ended up rewriting most of the application as it was not suitable for the new DB schema and requirements.</div><br/></div></div><div id="41565436" class="c"><input type="checkbox" id="c-41565436" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#41564597">parent</a><span>|</span><a href="#41564867">prev</a><span>|</span><a href="#41565451">next</a><span>|</span><label class="collapse" for="c-41565436">[-]</label><label class="expand" for="c-41565436">[4 more]</label></div><br/><div class="children"><div class="content">I have, back when we were selling a CRM product in the dotcom wave.<p>We could do AIX, HP-UX, Solaris, Windows NT&#x2F;2000, Red-Hat Linux, with Oracle, Informix, DB2, Sybase SQL Server, Microsoft SQL Server, Access (if you were feeling crazy, just for local dev).<p>It wasn&#x27;t that the customers would switch database, or OS, rather the flexibility allowed us to easily adapt the product to customer needs, regardless of their setup.</div><br/><div id="41565697" class="c"><input type="checkbox" id="c-41565697" checked=""/><div class="controls bullet"><span class="by">regularfry</span><span>|</span><a href="#41564597">root</a><span>|</span><a href="#41565436">parent</a><span>|</span><a href="#41565451">next</a><span>|</span><label class="collapse" for="c-41565697">[-]</label><label class="expand" for="c-41565697">[3 more]</label></div><br/><div class="children"><div class="content">That&#x27;s a subtly different situation, as you&#x27;ve presented it here. In that case you know up-front what the set of databases you need to support are, so you can explicitly design to them.  One promise of Hexagonal Architecture is that you should be able to get the benefits of being able to move underlying stores <i>without</i> knowing in advance the precise products that you might want to move to.<p>Depending on the early history of your product that might be the same; or it might not.  If you know from day one that you need to support two databases rather than one, that would be enough to cause design choices that you wouldn&#x27;t otherwise make.</div><br/><div id="41565771" class="c"><input type="checkbox" id="c-41565771" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#41564597">root</a><span>|</span><a href="#41565697">parent</a><span>|</span><a href="#41565784">next</a><span>|</span><label class="collapse" for="c-41565771">[-]</label><label class="expand" for="c-41565771">[1 more]</label></div><br/><div class="children"><div class="content">It was still a product, a different kind product, but still product being developed and sold in boxes (back when that was a thing).<p>Also it wasn&#x27;t like we developed all those OS and database backeds for version 1.0, and didn&#x27;t do anything else afterwards.<p>Which OSes and RDMS to support grew with the customer base and added to be plugged into the product in some way or fashion.</div><br/></div></div><div id="41565784" class="c"><input type="checkbox" id="c-41565784" checked=""/><div class="controls bullet"><span class="by">mrkeen</span><span>|</span><a href="#41564597">root</a><span>|</span><a href="#41565697">parent</a><span>|</span><a href="#41565771">prev</a><span>|</span><a href="#41565451">next</a><span>|</span><label class="collapse" for="c-41565784">[-]</label><label class="expand" for="c-41565784">[1 more]</label></div><br/><div class="children"><div class="content">&gt; If you know from day one that you need to support two databases rather than one, that would be enough to cause design choices that you wouldn&#x27;t otherwise make.<p>I disagree (strongly <i>in favour of</i> of DI &#x2F; ports-and-adapters &#x2F; hexagonal).<p>I don&#x27;t want my tax-calculation logic to know about one database, let alone two!<p>Bad design:<p><pre><code>  class TaxCalculator {
    PGConnection conn;
    TaxResult calculate(UserId userId) {..}
  }
</code></pre>
Hypothetical straw-man &quot;future-proof&quot; design:<p><pre><code>  class TaxCalculator {
    MagicalAbstractAnyDatabaseInterface conn;
    TaxResult calculate(UserId userId) {..}
  }
</code></pre>
Actual better design:<p><pre><code>  class TaxCalculator {
    UserFetcher userFetcher;
    PurchasesFetcher purchasesFetcher;
    TaxResult calculate(UserId userId) {..}
  }
</code></pre>
I think a lot of commenters are looking at this interface stuff as writing <i>more code paths</i> to support <i>more possible databases</i>, per the middle example above.  But I do the work to keep the database out of the TaxCalculator.</div><br/></div></div></div></div></div></div></div></div><div id="41565451" class="c"><input type="checkbox" id="c-41565451" checked=""/><div class="controls bullet"><span class="by">FridgeSeal</span><span>|</span><a href="#41564597">prev</a><span>|</span><a href="#41564656">next</a><span>|</span><label class="collapse" for="c-41565451">[-]</label><label class="expand" for="c-41565451">[2 more]</label></div><br/><div class="children"><div class="content">Hmmmmm.<p>Mixed feelings about this.<p>“Oh our http handler knows about the db”<p>Ok? Its job here is more or less “be a conduit to the db with some extra logic”.<p>It “knows about a lot of things” but it’s also exceedingly clear what’s going on.<p>The main function is fine. I’ll take a “fat” main function over something that obscures what it’s actually doing behind a dozen layers of “abstraction”. Nothing like trying to isolate a component when you’re fighting an outage and nobody can figure out which of the 16 abstract-adapters or service-abstracted launched the misbehaving task.<p>The original code might be “messy” but it’s at least _obvious_ what it’s doing, and it can pretty clearly be pulled apart into separate logic and IO components when we need to.<p>This all just feels a bit…over engineered, to say nothing of the insulting tone towards the other learning resource.</div><br/><div id="41565515" class="c"><input type="checkbox" id="c-41565515" checked=""/><div class="controls bullet"><span class="by">FridgeSeal</span><span>|</span><a href="#41565451">parent</a><span>|</span><a href="#41564656">next</a><span>|</span><label class="collapse" for="c-41565515">[-]</label><label class="expand" for="c-41565515">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Hard-coding your handler to manage SQL transactions will come back to bite you if you switch to Mongo<p>I uuuhh, I hate to tell you this, but uh, if you’re swapping Postgres to Mongo, and you think that hardcoded queries are going to be your migration pain points, I have some bad news for you. The difference in semantics (for any such change, not just db) will bite you first, and wil bite a <i>lot</i> harder.<p>This idea of “we can abstract over everything and then swap them out at our leisure” works less than we’d all like to imagine it does, and crucially building everything to accommodate this utopia, will leave you with mountains of code that will do nothing other than make your teammates hate you and obscure your actual logic.<p>&gt; AuthorRepository<p>Oh hello C#.
So instead of cursing everyone who has the misfortune of working on your C#-flavoured-rust codebase of having to write literal pages of boilerplate to inevitably add a new struct&#x2F;type to the codebase, I suggest leaning into idiomatic Rust a bit more.  
Personally, I’d make read&#x2F;delete&#x2F;upset traits, whose methods take a handle to a connection pool. Logic for sql then lives inside these implementations, and can be brought into scope only when necessary. Something like `my_struct.upsert(&amp;conn).await?`. We have locality of behaviour, we’ve separated IO details out, we have all the same advantages with about 50% less code-noise.</div><br/></div></div></div></div><div id="41564656" class="c"><input type="checkbox" id="c-41564656" checked=""/><div class="controls bullet"><span class="by">dvt</span><span>|</span><a href="#41565451">prev</a><span>|</span><a href="#41565702">next</a><span>|</span><label class="collapse" for="c-41564656">[-]</label><label class="expand" for="c-41564656">[3 more]</label></div><br/><div class="children"><div class="content">This is essentially one stop short of dependency injection[1] (even cited by the original &quot;hexagonal architecture&quot; author back in 2005[2]). I&#x27;ve been writing a lot of Rust this year, and even though part of me really likes it, I do miss Go&#x27;s dumb simplicity. I have a feeling that you could spend entire sessions just architecting some fancifully-elegant pattern in Rust and not really getting any actual work done (just how I used to in Java).<p>[1] <a href="https:&#x2F;&#x2F;www.martinfowler.com&#x2F;articles&#x2F;injection.html" rel="nofollow">https:&#x2F;&#x2F;www.martinfowler.com&#x2F;articles&#x2F;injection.html</a><p>[2] <a href="https:&#x2F;&#x2F;alistair.cockburn.us&#x2F;hexagonal-architecture&#x2F;" rel="nofollow">https:&#x2F;&#x2F;alistair.cockburn.us&#x2F;hexagonal-architecture&#x2F;</a></div><br/><div id="41565263" class="c"><input type="checkbox" id="c-41565263" checked=""/><div class="controls bullet"><span class="by">mrkeen</span><span>|</span><a href="#41564656">parent</a><span>|</span><a href="#41565702">next</a><span>|</span><label class="collapse" for="c-41565263">[-]</label><label class="expand" for="c-41565263">[2 more]</label></div><br/><div class="children"><div class="content">I agree that this goes hand-in-hand with DI, but are you for or against it?  E.g, Is Go simple because it <i>allows</i> switching out real DBs for hashmaps in unit tests, or because it <i>forbids</i> it?</div><br/><div id="41565722" class="c"><input type="checkbox" id="c-41565722" checked=""/><div class="controls bullet"><span class="by">regularfry</span><span>|</span><a href="#41564656">root</a><span>|</span><a href="#41565263">parent</a><span>|</span><a href="#41565702">next</a><span>|</span><label class="collapse" for="c-41565722">[-]</label><label class="expand" for="c-41565722">[1 more]</label></div><br/><div class="children"><div class="content">You absolutely can do the interface wrangling that Hexagonal wants in Go, if that&#x27;s something you want to do.  I&#x27;ve built apps that way.  When I&#x27;ve gone sort of half-way and allowed explicit dependencies in the core (like on file I&#x2F;O and so on) what I&#x27;ve regretted is those impurities, not the surrounding interface architecture.</div><br/></div></div></div></div></div></div><div id="41565702" class="c"><input type="checkbox" id="c-41565702" checked=""/><div class="controls bullet"><span class="by">pantulis</span><span>|</span><a href="#41564656">prev</a><span>|</span><a href="#41565567">next</a><span>|</span><label class="collapse" for="c-41565702">[-]</label><label class="expand" for="c-41565702">[1 more]</label></div><br/><div class="children"><div class="content">I am not exactly fond of Hexagonal Architecture although I don&#x27;t deny the merits of the idea and I think it&#x27;s useful. That said the important thing is that the article was very well written and I&#x27;ve enjoyed reading it.</div><br/></div></div><div id="41565567" class="c"><input type="checkbox" id="c-41565567" checked=""/><div class="controls bullet"><span class="by">Kinrany</span><span>|</span><a href="#41565702">prev</a><span>|</span><a href="#41565324">next</a><span>|</span><label class="collapse" for="c-41565567">[-]</label><label class="expand" for="c-41565567">[2 more]</label></div><br/><div class="children"><div class="content">I wish Rust had a good dependency injection library. More specifically, a library that solves the problem of having long chains of constructors calling each other.<p>The two main use cases are routing frameworks and tests.<p>Axum already has this, but it is married to HTTP a bit too much.</div><br/><div id="41565689" class="c"><input type="checkbox" id="c-41565689" checked=""/><div class="controls bullet"><span class="by">tcfhgj</span><span>|</span><a href="#41565567">parent</a><span>|</span><a href="#41565324">next</a><span>|</span><label class="collapse" for="c-41565689">[-]</label><label class="expand" for="c-41565689">[1 more]</label></div><br/><div class="children"><div class="content">What do you need a DI library for?<p>What&#x27;s the problem with constructor injection of the dependencies using traits?</div><br/></div></div></div></div><div id="41565324" class="c"><input type="checkbox" id="c-41565324" checked=""/><div class="controls bullet"><span class="by">pistoleer</span><span>|</span><a href="#41565567">prev</a><span>|</span><a href="#41564497">next</a><span>|</span><label class="collapse" for="c-41565324">[-]</label><label class="expand" for="c-41565324">[10 more]</label></div><br/><div class="children"><div class="content">&gt; If you ever change your HTTP server<p>Never needed to. Premature optimization.<p>&gt; We have the same issue with the database<p>What issue?? Cross that bridge when you get to it...<p>&gt; To change your database client – not even to change the kind of database, just the code that calls it – you&#x27;d have to rip out this hard dependency from every corner of your application.<p>I really doubt this is such a big deal... Bit of ctrl+f for that module and paste the new one. All database libraries have a &quot;connect()&quot; and a &quot;query()&quot;.<p>I&#x27;m so far convinced that this article is written for people who have too much time to waste on things that will probably never happen just so they get to feel smart and good about something that&#x27;s not even visible.<p>Imagine if we built bridges this way: yes, right now we have settled on a stone masonry design, but what if we want to move to steel trusses in the future???<p>Why can software engineers not accept that it is unreasonable to expect one single human creation to last forever and be amendable to all of our future needs? Cross the bridge when you get to it. Don&#x27;t try to solve future problems if you&#x27;re not 100% certain you&#x27;re going to have them. And if you _are_ certain, just do it right the first time, rather than leaving an opening for a future person to &quot;easily&quot; fix it up. And sometimes? A new bridge has to be built and the old one torn down.</div><br/><div id="41565345" class="c"><input type="checkbox" id="c-41565345" checked=""/><div class="controls bullet"><span class="by">lnxg33k1</span><span>|</span><a href="#41565324">parent</a><span>|</span><a href="#41564497">next</a><span>|</span><label class="collapse" for="c-41565345">[-]</label><label class="expand" for="c-41565345">[9 more]</label></div><br/><div class="children"><div class="content">It is much easier to change applications that are designed properly, regardless of the premature optimization, using adapters and interfaces is costless, and give you priceless peace of mind</div><br/><div id="41565381" class="c"><input type="checkbox" id="c-41565381" checked=""/><div class="controls bullet"><span class="by">choeger</span><span>|</span><a href="#41565324">root</a><span>|</span><a href="#41565345">parent</a><span>|</span><a href="#41565445">next</a><span>|</span><label class="collapse" for="c-41565381">[-]</label><label class="expand" for="c-41565381">[1 more]</label></div><br/><div class="children"><div class="content">&gt; using adapters and interfaces is costless,<p>Hah, no, they&#x27;re not. Every production app is read many, many times by several different developers, mostly to search for bugs. Reading across adapters, services, and interfaces make that much harder. Especially, if the architectural pattern was implemented slightly differently every time by various authors.<p>Abstraction <i>always</i> comes with a price. Often, it is well worth to pay (or we would still code everything in C or assembly), but sometimes it&#x27;s just a waste.</div><br/></div></div><div id="41565445" class="c"><input type="checkbox" id="c-41565445" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#41565324">root</a><span>|</span><a href="#41565345">parent</a><span>|</span><a href="#41565381">prev</a><span>|</span><a href="#41565359">next</a><span>|</span><label class="collapse" for="c-41565445">[-]</label><label class="expand" for="c-41565445">[1 more]</label></div><br/><div class="children"><div class="content">While I agree with the idea, they certainly have a development cost in complexity.</div><br/></div></div><div id="41565359" class="c"><input type="checkbox" id="c-41565359" checked=""/><div class="controls bullet"><span class="by">pistoleer</span><span>|</span><a href="#41565324">root</a><span>|</span><a href="#41565345">parent</a><span>|</span><a href="#41565445">prev</a><span>|</span><a href="#41564497">next</a><span>|</span><label class="collapse" for="c-41565359">[-]</label><label class="expand" for="c-41565359">[6 more]</label></div><br/><div class="children"><div class="content">If only we could all finally agree on the definition of &quot;proper design&quot;!</div><br/><div id="41565422" class="c"><input type="checkbox" id="c-41565422" checked=""/><div class="controls bullet"><span class="by">lnxg33k1</span><span>|</span><a href="#41565324">root</a><span>|</span><a href="#41565359">parent</a><span>|</span><a href="#41564497">next</a><span>|</span><label class="collapse" for="c-41565422">[-]</label><label class="expand" for="c-41565422">[5 more]</label></div><br/><div class="children"><div class="content">For me, one that allows the application to be extended, maintained and understood easily</div><br/><div id="41565506" class="c"><input type="checkbox" id="c-41565506" checked=""/><div class="controls bullet"><span class="by">sethammons</span><span>|</span><a href="#41565324">root</a><span>|</span><a href="#41565422">parent</a><span>|</span><a href="#41565620">next</a><span>|</span><label class="collapse" for="c-41565506">[-]</label><label class="expand" for="c-41565506">[1 more]</label></div><br/><div class="children"><div class="content">The problem word, i think, is &quot;extended.&quot; To me, that means adding functionality to the feature set, to others it may mean &quot;changing the db&quot; - and the two designs will be different.</div><br/></div></div><div id="41565620" class="c"><input type="checkbox" id="c-41565620" checked=""/><div class="controls bullet"><span class="by">onli</span><span>|</span><a href="#41565324">root</a><span>|</span><a href="#41565422">parent</a><span>|</span><a href="#41565506">prev</a><span>|</span><a href="#41564497">next</a><span>|</span><label class="collapse" for="c-41565620">[-]</label><label class="expand" for="c-41565620">[3 more]</label></div><br/><div class="children"><div class="content">So as simple as possible, without unnecessary indirections and useless abstraction like interfaces that make reading the code hard, right? ;)<p>There really are very different perspectives on what makes code easy to manage, and interfaces (especially ones used only for a single class) are a sure-fire way for me to make code unmanageable. But java enterprise coders disagree. That can clash hard.</div><br/><div id="41565738" class="c"><input type="checkbox" id="c-41565738" checked=""/><div class="controls bullet"><span class="by">lnxg33k1</span><span>|</span><a href="#41565324">root</a><span>|</span><a href="#41565620">parent</a><span>|</span><a href="#41564497">next</a><span>|</span><label class="collapse" for="c-41565738">[-]</label><label class="expand" for="c-41565738">[2 more]</label></div><br/><div class="children"><div class="content">What is about interfaces that makes reading code hard? It is a contract, for me reading just a list of operations that are available without the concrete code, is even clearer&#x2F;cleaner.<p>Not sure java is bad for indirections, java is bad for boilerplate and lack of defaults, imho. But I usually don&#x27;t use frameworks&#x2F;stlib directly, so I create my own boilerplate that is reusable</div><br/><div id="41565795" class="c"><input type="checkbox" id="c-41565795" checked=""/><div class="controls bullet"><span class="by">onli</span><span>|</span><a href="#41565324">root</a><span>|</span><a href="#41565738">parent</a><span>|</span><a href="#41564497">next</a><span>|</span><label class="collapse" for="c-41565795">[-]</label><label class="expand" for="c-41565795">[1 more]</label></div><br/><div class="children"><div class="content">[delayed]</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="41564497" class="c"><input type="checkbox" id="c-41564497" checked=""/><div class="controls bullet"><span class="by">keyle</span><span>|</span><a href="#41565324">prev</a><span>|</span><a href="#41564736">next</a><span>|</span><label class="collapse" for="c-41564497">[-]</label><label class="expand" for="c-41564497">[13 more]</label></div><br/><div class="children"><div class="content">Could someone TLDR me what Hexagonal architecture means?<p><pre><code>    Hexagonal architecture brings order to chaos and flexibility to fragile programs by making it easy to create modular applications where connections to the outside world always adhere to the most important API of all: your business domain.
</code></pre>
okay.</div><br/><div id="41565741" class="c"><input type="checkbox" id="c-41565741" checked=""/><div class="controls bullet"><span class="by">regularfry</span><span>|</span><a href="#41564497">parent</a><span>|</span><a href="#41565617">next</a><span>|</span><label class="collapse" for="c-41565741">[-]</label><label class="expand" for="c-41565741">[1 more]</label></div><br/><div class="children"><div class="content">No explicit dependencies in the core business domain, everything coordinates via interfaces defined by the needs of the core.<p>That&#x27;s pretty much it.  Everything else flows from there.</div><br/></div></div><div id="41565617" class="c"><input type="checkbox" id="c-41565617" checked=""/><div class="controls bullet"><span class="by">sethammons</span><span>|</span><a href="#41564497">parent</a><span>|</span><a href="#41565741">prev</a><span>|</span><a href="#41564555">next</a><span>|</span><label class="collapse" for="c-41565617">[-]</label><label class="expand" for="c-41565617">[1 more]</label></div><br/><div class="children"><div class="content">Step one: ignore the prefix, this has nothing to do with hex&#x2F;six. And &quot;ogon&quot; meaning sides or struggle. The sides represent interfaces.<p>This arch really means use interfaces based on business use cases &#x2F; domains. Call the User service&#x2F;module and pass user ids into a billing service&#x2F;module. Each service is over a defined interface (adaptor) that allows separation of concerns and separate data stores. You could use an in-memory port of the billing service and a real db for the user service service because both implementations leverage the same adapter code</div><br/></div></div><div id="41564555" class="c"><input type="checkbox" id="c-41564555" checked=""/><div class="controls bullet"><span class="by">n42</span><span>|</span><a href="#41564497">parent</a><span>|</span><a href="#41565617">prev</a><span>|</span><a href="#41564523">next</a><span>|</span><label class="collapse" for="c-41564555">[-]</label><label class="expand" for="c-41564555">[1 more]</label></div><br/><div class="children"><div class="content">Domain driven design with more hexagons and less Martin Fowler</div><br/></div></div><div id="41564523" class="c"><input type="checkbox" id="c-41564523" checked=""/><div class="controls bullet"><span class="by">Kostarrr</span><span>|</span><a href="#41564497">parent</a><span>|</span><a href="#41564555">prev</a><span>|</span><a href="#41564850">next</a><span>|</span><label class="collapse" for="c-41564523">[-]</label><label class="expand" for="c-41564523">[3 more]</label></div><br/><div class="children"><div class="content">Well here&#x27;s the take from the Author itself: <a href="https:&#x2F;&#x2F;alistair.cockburn.us&#x2F;hexagonal-architecture&#x2F;" rel="nofollow">https:&#x2F;&#x2F;alistair.cockburn.us&#x2F;hexagonal-architecture&#x2F;</a></div><br/><div id="41565471" class="c"><input type="checkbox" id="c-41565471" checked=""/><div class="controls bullet"><span class="by">FridgeSeal</span><span>|</span><a href="#41564497">root</a><span>|</span><a href="#41564523">parent</a><span>|</span><a href="#41564850">next</a><span>|</span><label class="collapse" for="c-41565471">[-]</label><label class="expand" for="c-41565471">[2 more]</label></div><br/><div class="children"><div class="content">That’s a mighty lot of words, to say “functional core, imperative shell”.<p>Maybe I’m being glib, but damn, a whole article, and boatloads of fancy new terminology, just to re-state what the author succinctly landed on in the _first_ paragraph:<p>&gt; Create your application to work without either a UI or a database so you can &lt;do a bunch of nice stuff and make your life easier&gt;”.</div><br/><div id="41565692" class="c"><input type="checkbox" id="c-41565692" checked=""/><div class="controls bullet"><span class="by">rapnie</span><span>|</span><a href="#41564497">root</a><span>|</span><a href="#41565471">parent</a><span>|</span><a href="#41564850">next</a><span>|</span><label class="collapse" for="c-41565692">[-]</label><label class="expand" for="c-41565692">[1 more]</label></div><br/><div class="children"><div class="content">Indeed. And some great HN discussions of a great article to get inspired on the pattern:<p>- <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=18043058">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=18043058</a> (Sep 2018, 127 comments)<p>- <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=34860164">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=34860164</a> (Feb 2023, 39 comments)</div><br/></div></div></div></div></div></div><div id="41564850" class="c"><input type="checkbox" id="c-41564850" checked=""/><div class="controls bullet"><span class="by">mmcromp</span><span>|</span><a href="#41564497">parent</a><span>|</span><a href="#41564523">prev</a><span>|</span><a href="#41565290">next</a><span>|</span><label class="collapse" for="c-41564850">[-]</label><label class="expand" for="c-41564850">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;youtu.be&#x2F;JubdZIdLQ4M?si=GkZ3tomeqIYzYyPk" rel="nofollow">https:&#x2F;&#x2F;youtu.be&#x2F;JubdZIdLQ4M?si=GkZ3tomeqIYzYyPk</a><p>Best explanation by far, worth the 5min watch</div><br/></div></div><div id="41565290" class="c"><input type="checkbox" id="c-41565290" checked=""/><div class="controls bullet"><span class="by">goodpoint</span><span>|</span><a href="#41564497">parent</a><span>|</span><a href="#41564850">prev</a><span>|</span><a href="#41565218">next</a><span>|</span><label class="collapse" for="c-41565290">[-]</label><label class="expand" for="c-41565290">[1 more]</label></div><br/><div class="children"><div class="content">Pretty much nothing.</div><br/></div></div><div id="41565218" class="c"><input type="checkbox" id="c-41565218" checked=""/><div class="controls bullet"><span class="by">itronitron</span><span>|</span><a href="#41564497">parent</a><span>|</span><a href="#41565290">prev</a><span>|</span><a href="#41564732">next</a><span>|</span><label class="collapse" for="c-41565218">[-]</label><label class="expand" for="c-41565218">[1 more]</label></div><br/><div class="children"><div class="content">The bullshit remover condenses that down to the following:<p>&gt; Bullshit.</div><br/></div></div><div id="41564732" class="c"><input type="checkbox" id="c-41564732" checked=""/><div class="controls bullet"><span class="by">andyferris</span><span>|</span><a href="#41564497">parent</a><span>|</span><a href="#41565218">prev</a><span>|</span><a href="#41564736">next</a><span>|</span><label class="collapse" for="c-41564732">[-]</label><label class="expand" for="c-41564732">[3 more]</label></div><br/><div class="children"><div class="content">Another similar&#x2F;related idea to Google is the “onion architecture”.</div><br/><div id="41564747" class="c"><input type="checkbox" id="c-41564747" checked=""/><div class="controls bullet"><span class="by">andyferris</span><span>|</span><a href="#41564497">root</a><span>|</span><a href="#41564732">parent</a><span>|</span><a href="#41564866">next</a><span>|</span><label class="collapse" for="c-41564747">[-]</label><label class="expand" for="c-41564747">[1 more]</label></div><br/><div class="children"><div class="content">(Because the diagram gives a better TLDR than than the hexagonal equivalent diagram, IMO)</div><br/></div></div><div id="41564866" class="c"><input type="checkbox" id="c-41564866" checked=""/><div class="controls bullet"><span class="by">keyle</span><span>|</span><a href="#41564497">root</a><span>|</span><a href="#41564732">parent</a><span>|</span><a href="#41564747">prev</a><span>|</span><a href="#41564736">next</a><span>|</span><label class="collapse" for="c-41564866">[-]</label><label class="expand" for="c-41564866">[1 more]</label></div><br/><div class="children"><div class="content">yeah thanks I kept looking for a reason for the 6-way or 6-layers or something.</div><br/></div></div></div></div></div></div><div id="41564736" class="c"><input type="checkbox" id="c-41564736" checked=""/><div class="controls bullet"><span class="by">hi-v-rocknroll</span><span>|</span><a href="#41564497">prev</a><span>|</span><a href="#41564509">next</a><span>|</span><label class="collapse" for="c-41564736">[-]</label><label class="expand" for="c-41564736">[1 more]</label></div><br/><div class="children"><div class="content">The sample code reminds me of PHP and Perl CGIs from 1999 where concerns are jumbled together. For a tiny hobby site that does one thing, sure, it&#x27;s fine but for scalable, maintainable patterns there must be order, separation of looser concerns, and layering.</div><br/></div></div><div id="41564509" class="c"><input type="checkbox" id="c-41564509" checked=""/><div class="controls bullet"><span class="by">Kostarrr</span><span>|</span><a href="#41564736">prev</a><span>|</span><label class="collapse" for="c-41564509">[-]</label><label class="expand" for="c-41564509">[1 more]</label></div><br/><div class="children"><div class="content">Cool article on how to abstract things in Rust. I must admit, I usually write the &quot;bad rust application&quot;.<p>Total nitpick: For `CreateAuthorError::Duplicate`, I would return a 409 Conflict, not a 422 Unprocessable Entity. When I see a 422 I think utf-8 encoding error or maybe some bad json, not a duplicate key in a database.</div><br/></div></div></div></div></div></div></div></body></html>