<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1723021276192" as="style"/><link rel="stylesheet" href="styles.css?v=1723021276192"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.sakisv.net/2024/08/tracking-supermarket-prices-playwright/">Tracking supermarket prices with Playwright</a> <span class="domain">(<a href="https://www.sakisv.net">www.sakisv.net</a>)</span></div><div class="subtext"><span>sakisv</span> | <span>105 comments</span></div><br/><div><div id="41179186" class="c"><input type="checkbox" id="c-41179186" checked=""/><div class="controls bullet"><span class="by">RasmusFromDK</span><span>|</span><a href="#41176121">next</a><span>|</span><label class="collapse" for="c-41179186">[-]</label><label class="expand" for="c-41179186">[3 more]</label></div><br/><div class="children"><div class="content">Nice writeup. I&#x27;ve been through similar problems that you have with my contact lens price comparison website <a href="https:&#x2F;&#x2F;lenspricer.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;lenspricer.com&#x2F;</a> that I run in ~30 countries. I have found, like you, that websites changing their HTML is a pain.<p>One of my biggest hurdles initially was matching products across 100+ websites. Even though you think a product has a unique name, everyone puts their own twist on it. Most can be handled with regexes, but I had to manually map many of these (I used AI for some of it, but had to manually verify all of it).<p>I&#x27;ve found that building the scrapers and infrastructure is somewhat the easy part. The hard part is maintaining all of the scrapers and figuring out if when a product disappears from a site, is that because my scraper has an error, is it my scraper being blocked, did the site make a change, was the site randomly down for maintenance when I scraped it etc.<p>A fun project, but challenging at times, and annoying problems to fix.</div><br/><div id="41179220" class="c"><input type="checkbox" id="c-41179220" checked=""/><div class="controls bullet"><span class="by">ludvigk</span><span>|</span><a href="#41179186">parent</a><span>|</span><a href="#41176121">next</a><span>|</span><label class="collapse" for="c-41179220">[-]</label><label class="expand" for="c-41179220">[2 more]</label></div><br/><div class="children"><div class="content">Isn’t this a use-case where LLMs could really help?</div><br/><div id="41179256" class="c"><input type="checkbox" id="c-41179256" checked=""/><div class="controls bullet"><span class="by">RasmusFromDK</span><span>|</span><a href="#41179186">root</a><span>|</span><a href="#41179220">parent</a><span>|</span><a href="#41176121">next</a><span>|</span><label class="collapse" for="c-41179256">[-]</label><label class="expand" for="c-41179256">[1 more]</label></div><br/><div class="children"><div class="content">Yeah it is to some degree. I tried to use it as much as possible, but there&#x27;s always those annoying edge cases that makes me not trust the results and I have to check everything, and it ended up being faster just building some simple UI where I can easily classify the name myself.<p>Part of the problem is simply due to bad data from the websites. Just as an example - there&#x27;s a 2-week contact lens called &quot;Acuvue Oasys&quot;. And there&#x27;s a completely different 1-day contact lens called &quot;Acuvue Oasys 1-Day&quot;. Some sites have been bad at writing this properly, so both variants may be called &quot;Acuvue Oasys&quot; (or close to it), and the way to distinguish them is to look at the image to see which actual lens they mean, look at the price etc.<p>It&#x27;s true that this could probably also be handled by AI, but in the end, classifying the lenses takes like 1-2% of the time it takes to make a scraper for a website so I found it was not worth trying to build a very good LLM classifier for this.</div><br/></div></div></div></div></div></div><div id="41176121" class="c"><input type="checkbox" id="c-41176121" checked=""/><div class="controls bullet"><span class="by">brikym</span><span>|</span><a href="#41179186">prev</a><span>|</span><a href="#41179013">next</a><span>|</span><label class="collapse" for="c-41176121">[-]</label><label class="expand" for="c-41176121">[18 more]</label></div><br/><div class="children"><div class="content">I have been doing something similar for New Zealand since the start of the year with Playwright&#x2F;Typescript dumping parquet files to cloud storage. I&#x27;ve just collecting the data I have not yet displayed it. Most of the work is getting around the reverse proxy services like Akamai and Cloudflare.<p>At the time I wrote it I thought nobody else was doing but now I know of at least 3 start ups doing the same in NZ. It seems the the inflation really stoked a lot of innovation here. The patterns are about what you&#x27;d expect. Supermarkets are up to the usual tricks of arbitrary making pricing as complicated as possible using &#x27;sawtooth&#x27; methods to segment time-poor people from poor people. Often they&#x27;ll segment on brand loyalty vs price sensitive people; There might be 3 popular brands of chocolate and every week only one of them will be sold at a fair price.</div><br/><div id="41179265" class="c"><input type="checkbox" id="c-41179265" checked=""/><div class="controls bullet"><span class="by">Dev102</span><span>|</span><a href="#41176121">parent</a><span>|</span><a href="#41176278">next</a><span>|</span><label class="collapse" for="c-41179265">[-]</label><label class="expand" for="c-41179265">[1 more]</label></div><br/><div class="children"><div class="content">I built one called <a href="https:&#x2F;&#x2F;bbdeals.in&#x2F;" rel="nofollow">https:&#x2F;&#x2F;bbdeals.in&#x2F;</a> for India. I mostly use it to buy just fruits and its saved me about 20% of sending. which is not bad in these hard times.<p>Building crawlers and infra to support it tool not more than 20 hours.</div><br/></div></div><div id="41176278" class="c"><input type="checkbox" id="c-41176278" checked=""/><div class="controls bullet"><span class="by">teruakohatu</span><span>|</span><a href="#41176121">parent</a><span>|</span><a href="#41179265">prev</a><span>|</span><a href="#41178834">next</a><span>|</span><label class="collapse" for="c-41176278">[-]</label><label class="expand" for="c-41176278">[2 more]</label></div><br/><div class="children"><div class="content">I was planning on doing the same in NZ. I would be keen to chat to you about it (email in HN profile). I am a data scientist<p>Did you notice anything pre and post Whittakers price increase(s)? They must have a brilliant PR firm in retainer for every major news outlet to more or less push the line that increased prices are a good thing for the consumer. I noticed more aggressive &quot;sales&quot; more recently, but unsure if I am just paying more attention.<p>My prediction is that they will decrease the size of the bars soon.</div><br/><div id="41178112" class="c"><input type="checkbox" id="c-41178112" checked=""/><div class="controls bullet"><span class="by">scubadude</span><span>|</span><a href="#41176121">root</a><span>|</span><a href="#41176278">parent</a><span>|</span><a href="#41178834">next</a><span>|</span><label class="collapse" for="c-41178112">[-]</label><label class="expand" for="c-41178112">[1 more]</label></div><br/><div class="children"><div class="content">I think Whittaker&#x27;s changed their recipe some time in the last year. Whittaker&#x27;s was what Cadbury used to be (good) but now I think they have both followed the same course. Markedly lower quality. This is the 200g blocks fwiw not sure about the wee 50g peanut slab.</div><br/></div></div></div></div><div id="41178834" class="c"><input type="checkbox" id="c-41178834" checked=""/><div class="controls bullet"><span class="by">ustad</span><span>|</span><a href="#41176121">parent</a><span>|</span><a href="#41176278">prev</a><span>|</span><a href="#41176246">next</a><span>|</span><label class="collapse" for="c-41178834">[-]</label><label class="expand" for="c-41178834">[3 more]</label></div><br/><div class="children"><div class="content">Can anyone comment how supermarkets exploit customer segmentation by updating prices? How do the time-poor and poor-poor people generally respond?<p>“Often they&#x27;ll segment on brand loyalty vs price sensitive people; There might be 3 popular brands of chocolate and every week only one of them will be sold at a fair price.”</div><br/><div id="41178907" class="c"><input type="checkbox" id="c-41178907" checked=""/><div class="controls bullet"><span class="by">brikym</span><span>|</span><a href="#41176121">root</a><span>|</span><a href="#41178834">parent</a><span>|</span><a href="#41176246">next</a><span>|</span><label class="collapse" for="c-41178907">[-]</label><label class="expand" for="c-41178907">[2 more]</label></div><br/><div class="children"><div class="content">Let&#x27;s say there are three brands of some item. Each week one of the brands is rotated to $1 while the others are $2. And let&#x27;s also suppose that the supermarket pays 80c per item.<p>The smart shopper might only buy in bulk once every three weeks when his favourite brand at a lower price, or twitch to the cheapest brand every week. A hurried or lazy shopper might always pick their favourite brand every week. If they buy one item a week the lazy shopper would have spent $5, while the smart shopper has only spent $3.<p>They&#x27;ve made 60c off the smart shopper and $2.60 off the lazy shopper. By segmenting out the lazy shoppers they&#x27;ve made $2. The whole idea of rotating the prices is nothing to do with the cost of goods sold it&#x27;s all about making shopping a pain in the ass for busy people and catching them out.</div><br/><div id="41178984" class="c"><input type="checkbox" id="c-41178984" checked=""/><div class="controls bullet"><span class="by">j45</span><span>|</span><a href="#41176121">root</a><span>|</span><a href="#41178907">parent</a><span>|</span><a href="#41176246">next</a><span>|</span><label class="collapse" for="c-41178984">[-]</label><label class="expand" for="c-41178984">[1 more]</label></div><br/><div class="children"><div class="content">Bingo, an extra 50 cents to 2 dollars per item in a grocery order adds up quick, sooner or later.<p>Also, in-store pricing can be cheaper or not advertised as a sale, but encouraging online shopping can often be a higher price, even if it&#x27;s pickup and not delivery.<p>&quot;In-Store Pricing&quot; on websites&#x2F;apps are an interesting thing to track as well, it feels the more a grocery store goes towards &quot;In-Store pricing&#x27;, the higher it is.<p>This would be great to see in other countries.</div><br/></div></div></div></div></div></div><div id="41176246" class="c"><input type="checkbox" id="c-41176246" checked=""/><div class="controls bullet"><span class="by">walterbell</span><span>|</span><a href="#41176121">parent</a><span>|</span><a href="#41178834">prev</a><span>|</span><a href="#41176235">next</a><span>|</span><label class="collapse" for="c-41176246">[-]</label><label class="expand" for="c-41176246">[4 more]</label></div><br/><div class="children"><div class="content">Those who order grocery delivery online would benefit from price comparisons, because they can order from multiple stores at the same time. In addition, there&#x27;s only one marketplace that has all the prices from different stores.</div><br/><div id="41177244" class="c"><input type="checkbox" id="c-41177244" checked=""/><div class="controls bullet"><span class="by">gruez</span><span>|</span><a href="#41176121">root</a><span>|</span><a href="#41176246">parent</a><span>|</span><a href="#41176307">next</a><span>|</span><label class="collapse" for="c-41177244">[-]</label><label class="expand" for="c-41177244">[1 more]</label></div><br/><div class="children"><div class="content">&gt;Those who order grocery delivery online would benefit from price comparisons, because they can order from multiple stores at the same time.<p>Not really, since the delivery fees&#x2F;tips that you have to pay would eat up all the savings, unless maybe if you&#x27;re buying for a family of 5 or something.</div><br/></div></div><div id="41176307" class="c"><input type="checkbox" id="c-41176307" checked=""/><div class="controls bullet"><span class="by">teruakohatu</span><span>|</span><a href="#41176121">root</a><span>|</span><a href="#41176246">parent</a><span>|</span><a href="#41177244">prev</a><span>|</span><a href="#41176235">next</a><span>|</span><label class="collapse" for="c-41176307">[-]</label><label class="expand" for="c-41176307">[2 more]</label></div><br/><div class="children"><div class="content">I think the fees they tack on for online orders would ruin ordering different products from different stores. It mostly makes sense with staples that don&#x27;t perish.<p>With fresh produce I find Pak n Save a lot more variable with quality, making online orders more risky despite the lower cost.</div><br/><div id="41177155" class="c"><input type="checkbox" id="c-41177155" checked=""/><div class="controls bullet"><span class="by">walterbell</span><span>|</span><a href="#41176121">root</a><span>|</span><a href="#41176307">parent</a><span>|</span><a href="#41176235">next</a><span>|</span><label class="collapse" for="c-41177155">[-]</label><label class="expand" for="c-41177155">[1 more]</label></div><br/><div class="children"><div class="content">For those who have to order online (e.g. elderly), they are paying the fees anyway. They can avoid minimum order fees with bulk purchases of staples. Their bot&#x2F;app can monitor prices and when a staple goes on sale, they can order multiple items to meet the threshold for a lower fee.</div><br/></div></div></div></div></div></div><div id="41176235" class="c"><input type="checkbox" id="c-41176235" checked=""/><div class="controls bullet"><span class="by">pikelet</span><span>|</span><a href="#41176121">parent</a><span>|</span><a href="#41176246">prev</a><span>|</span><a href="#41176723">next</a><span>|</span><label class="collapse" for="c-41176235">[-]</label><label class="expand" for="c-41176235">[1 more]</label></div><br/><div class="children"><div class="content">As a kiwi, are your able to make any of these (or your) projects? I&#x27;m quite interested.</div><br/></div></div><div id="41176723" class="c"><input type="checkbox" id="c-41176723" checked=""/><div class="controls bullet"><span class="by">seoulmetro</span><span>|</span><a href="#41176121">parent</a><span>|</span><a href="#41176235">prev</a><span>|</span><a href="#41179013">next</a><span>|</span><label class="collapse" for="c-41176723">[-]</label><label class="expand" for="c-41176723">[6 more]</label></div><br/><div class="children"><div class="content">Legality of this is rocky in Australia. I dare say that NZ is the same?<p>There are so many scrapers that come and go doing this in AU but are usually shut down by the big supermarkets.<p>It&#x27;s a cycle of usefulness and &quot;why doesn&#x27;t this exist&quot;, except it had existed many times before.</div><br/><div id="41176935" class="c"><input type="checkbox" id="c-41176935" checked=""/><div class="controls bullet"><span class="by">russelg</span><span>|</span><a href="#41176121">root</a><span>|</span><a href="#41176723">parent</a><span>|</span><a href="#41178694">next</a><span>|</span><label class="collapse" for="c-41176935">[-]</label><label class="expand" for="c-41176935">[2 more]</label></div><br/><div class="children"><div class="content">I think with the current climate wrt the big supermarkets in AU, now would be the time to push your luck. The court of public opinion will definitely not be on the supermarkets side, and the government may even step in.</div><br/><div id="41178589" class="c"><input type="checkbox" id="c-41178589" checked=""/><div class="controls bullet"><span class="by">timrkn</span><span>|</span><a href="#41176121">root</a><span>|</span><a href="#41176935">parent</a><span>|</span><a href="#41178694">next</a><span>|</span><label class="collapse" for="c-41178589">[-]</label><label class="expand" for="c-41178589">[1 more]</label></div><br/><div class="children"><div class="content">Agreed. Should we make something and find out?</div><br/></div></div></div></div><div id="41178694" class="c"><input type="checkbox" id="c-41178694" checked=""/><div class="controls bullet"><span class="by">jaza</span><span>|</span><a href="#41176121">root</a><span>|</span><a href="#41176723">parent</a><span>|</span><a href="#41176935">prev</a><span>|</span><a href="#41178581">next</a><span>|</span><label class="collapse" for="c-41178694">[-]</label><label class="expand" for="c-41178694">[2 more]</label></div><br/><div class="children"><div class="content">Aussie here. I hadn&#x27;t heard that price scraping is only quasi-legal here and that scrapers get shut down by the big supermarkets - but then again I&#x27;m not surprised.<p>I&#x27;m thinking of starting a little price comparison site, mainly to compare select products at Colesworths vs Aldi (I&#x27;ve just started doing more regular grocery shopping at Aldi myself). But as far as I know, Aldi don&#x27;t have any prices &#x2F; catalogues online, so my plan is to just manually enter the data myself in the short-term, and to appeal to crowdsourcing the data in the long-term. And plan is to just make it a simple SSG site (e.g. Hugo powered), data all in simple markdown &#x2F; json files, data all sourced via github pull requests.<p>Feel free to get in touch if you&#x27;d like to help out, or if you know of anything similar that already exists: greenash dot net dot au slash contact</div><br/><div id="41179366" class="c"><input type="checkbox" id="c-41179366" checked=""/><div class="controls bullet"><span class="by">jasomill</span><span>|</span><a href="#41176121">root</a><span>|</span><a href="#41178694">parent</a><span>|</span><a href="#41178581">next</a><span>|</span><label class="collapse" for="c-41179366">[-]</label><label class="expand" for="c-41179366">[1 more]</label></div><br/><div class="children"><div class="content"><i>But as far as I know, Aldi don&#x27;t have any prices &#x2F; catalogues online</i><p>There are a few here, but more along the lines of a flyer than a catalog:<p><a href="https:&#x2F;&#x2F;www.aldi.com.au&#x2F;groceries&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.aldi.com.au&#x2F;groceries&#x2F;</a><p>Aldi US has a more-or-less complete catalog online, so it might be worth crowdsourcing suggestions to the parent company to implement the same in Australia.</div><br/></div></div></div></div><div id="41178581" class="c"><input type="checkbox" id="c-41178581" checked=""/><div class="controls bullet"><span class="by">timrkn</span><span>|</span><a href="#41176121">root</a><span>|</span><a href="#41176723">parent</a><span>|</span><a href="#41178694">prev</a><span>|</span><a href="#41179013">next</a><span>|</span><label class="collapse" for="c-41178581">[-]</label><label class="expand" for="c-41178581">[1 more]</label></div><br/><div class="children"><div class="content">Agreed. Hopefully the govs price gouging mitigation strategy includes free flow of information (allowing scraping for price comparison).<p>I’ve been interested in price comparison for Australia for a while, am a Product designer&#x2F;manager with a concept prototype design, looking for others interested to work on it. My email is on my profile if you are.</div><br/></div></div></div></div></div></div><div id="41179013" class="c"><input type="checkbox" id="c-41179013" checked=""/><div class="controls bullet"><span class="by">pcblues</span><span>|</span><a href="#41176121">prev</a><span>|</span><a href="#41178235">next</a><span>|</span><label class="collapse" for="c-41179013">[-]</label><label class="expand" for="c-41179013">[2 more]</label></div><br/><div class="children"><div class="content">This is interesting because I believe the two major supermarkets in Australia can create a duopoly in anti-competitive pricing by just employing price analysis AI algorithms on each side and the algorithms will likely end up cooperating to maximise profit. This can probably be done legally through publicly obtained prices and illegally by sharing supply cost or profit per product data. The result is likely to be similar. Two trained AIs will maximise profit in weird ways using (super)multidimensional regression analysis (which is all AI is), and the consumer will pay for maximised profits to ostensible competitors. If the pricing data can be obtained like this, not much more is needed to implement a duopoly-focused pair of machine learning implementations.</div><br/><div id="41179044" class="c"><input type="checkbox" id="c-41179044" checked=""/><div class="controls bullet"><span class="by">pcblues</span><span>|</span><a href="#41179013">parent</a><span>|</span><a href="#41178235">next</a><span>|</span><label class="collapse" for="c-41179044">[-]</label><label class="expand" for="c-41179044">[1 more]</label></div><br/><div class="children"><div class="content">The word I was looking for was collusion, but done with software and without people-based collusion.</div><br/></div></div></div></div><div id="41178235" class="c"><input type="checkbox" id="c-41178235" checked=""/><div class="controls bullet"><span class="by">batata004</span><span>|</span><a href="#41179013">prev</a><span>|</span><a href="#41175465">next</a><span>|</span><label class="collapse" for="c-41178235">[-]</label><label class="expand" for="c-41178235">[7 more]</label></div><br/><div class="children"><div class="content">I created a similar website which got lots of interest in my city. I scrape even app and websites data using a single server at Linode with 2GB of RAM with 5 IPv4 and 1000 IPv6 (which is free) and every single product is scraped at most 40 minutes interval, never more than that with avg time of 25 minutes. I use curl impersonate and scrape JSON as much as possible because 90% of markets provide prices from Ajax calls and the other 10% I use regex to easily parse the HTML. You can check it at <a href="https:&#x2F;&#x2F;www.economizafloripa.com.br" rel="nofollow">https:&#x2F;&#x2F;www.economizafloripa.com.br</a></div><br/><div id="41178579" class="c"><input type="checkbox" id="c-41178579" checked=""/><div class="controls bullet"><span class="by">latexr</span><span>|</span><a href="#41178235">parent</a><span>|</span><a href="#41175465">next</a><span>|</span><label class="collapse" for="c-41178579">[-]</label><label class="expand" for="c-41178579">[6 more]</label></div><br/><div class="children"><div class="content">&gt; I scrape even app and websites data<p>And then try to sell it back to businesses, even suggesting they use the data to train AI. You also make it sound like there’s a team manually doing all the work.<p><a href="https:&#x2F;&#x2F;www.economizafloripa.com.br&#x2F;?q=parceria-comercial" rel="nofollow">https:&#x2F;&#x2F;www.economizafloripa.com.br&#x2F;?q=parceria-comercial</a><p>That whole page makes my view of the project go from “helpful tool for the people, to wrestle back control from corporations selling basic necessities” to “just another attempt to make money”. Which is your prerogative, I was just expecting something different and more ethically driven when I read the homepage.</div><br/><div id="41178632" class="c"><input type="checkbox" id="c-41178632" checked=""/><div class="controls bullet"><span class="by">mechanical_bear</span><span>|</span><a href="#41178235">root</a><span>|</span><a href="#41178579">parent</a><span>|</span><a href="#41175465">next</a><span>|</span><label class="collapse" for="c-41178632">[-]</label><label class="expand" for="c-41178632">[5 more]</label></div><br/><div class="children"><div class="content">Where does this lack ethics? It seems that they are providing a useful service, that they created with their hard work. People are allowed to make money with their work.</div><br/><div id="41178798" class="c"><input type="checkbox" id="c-41178798" checked=""/><div class="controls bullet"><span class="by">latexr</span><span>|</span><a href="#41178235">root</a><span>|</span><a href="#41178632">parent</a><span>|</span><a href="#41178718">next</a><span>|</span><label class="collapse" for="c-41178798">[-]</label><label class="expand" for="c-41178798">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Where does this lack ethics?<p>I didn’t say it lacked ethics, I said I expected it to be <i>driven by</i> ethics. There’s a world of difference. I just mean it initially sounded like this was a protest project “for the people”, done in a way to take back power from big corporations, and was saddened to see it’s another generic commercial endeavour.<p>&gt; People are allowed to make money with their work.<p>Which is why I said it’s their prerogative.<p>If you’re going to reply, please strive to address the points made, what was said, not what you imagine the other person said. Don’t default to thinking the other person is being dismissive or malicious.</div><br/><div id="41179449" class="c"><input type="checkbox" id="c-41179449" checked=""/><div class="controls bullet"><span class="by">saaaaaam</span><span>|</span><a href="#41178235">root</a><span>|</span><a href="#41178798">parent</a><span>|</span><a href="#41178718">next</a><span>|</span><label class="collapse" for="c-41179449">[-]</label><label class="expand" for="c-41179449">[1 more]</label></div><br/><div class="children"><div class="content">I’m curious to know why you thought it “sounded like this was a protest project ‘for the people’”?<p>I’ve read the parent post above and looked at the website and see nothing that would make me think it’s a “protest for the people”.<p>It just seems a little strange when you then go on to say  “strive to address… what was said, not what you imagine the other person said”.</div><br/></div></div></div></div><div id="41178718" class="c"><input type="checkbox" id="c-41178718" checked=""/><div class="controls bullet"><span class="by">crngefest</span><span>|</span><a href="#41178235">root</a><span>|</span><a href="#41178632">parent</a><span>|</span><a href="#41178798">prev</a><span>|</span><a href="#41175465">next</a><span>|</span><label class="collapse" for="c-41178718">[-]</label><label class="expand" for="c-41178718">[2 more]</label></div><br/><div class="children"><div class="content">No you are only allowed to extract value if you are already part of the moneyed class. &#x2F;s</div><br/><div id="41178810" class="c"><input type="checkbox" id="c-41178810" checked=""/><div class="controls bullet"><span class="by">latexr</span><span>|</span><a href="#41178235">root</a><span>|</span><a href="#41178718">parent</a><span>|</span><a href="#41175465">next</a><span>|</span><label class="collapse" for="c-41178810">[-]</label><label class="expand" for="c-41178810">[1 more]</label></div><br/><div class="children"><div class="content">That was not the argument at all. Please don’t strawman. From the guidelines:<p>&gt; Be kind. Don&#x27;t be snarky. Converse curiously; don&#x27;t cross-examine. Edit out swipes.<p>&gt; Comments should get more thoughtful and substantive, not less, as a topic gets more divisive.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="41175465" class="c"><input type="checkbox" id="c-41175465" checked=""/><div class="controls bullet"><span class="by">xyst</span><span>|</span><a href="#41178235">prev</a><span>|</span><a href="#41177583">next</a><span>|</span><label class="collapse" for="c-41175465">[-]</label><label class="expand" for="c-41175465">[10 more]</label></div><br/><div class="children"><div class="content">Would be nice to have a price transparency of goods. It would make processes like this much more easier to track by store, and region.<p>For example, compare the price of oat milk at different zip codes and grocery stores. Additionally track “shrinkflation” (same price but smaller portion).<p>On that note, it seems you are tracking price but are you also checking the cost per gram (or ounce)? Manufacturer or store could keep price the same but offer less to the consumer. Wonder if your tool would catch this.</div><br/><div id="41175596" class="c"><input type="checkbox" id="c-41175596" checked=""/><div class="controls bullet"><span class="by">sakisv</span><span>|</span><a href="#41175465">parent</a><span>|</span><a href="#41175595">next</a><span>|</span><label class="collapse" for="c-41175596">[-]</label><label class="expand" for="c-41175596">[1 more]</label></div><br/><div class="children"><div class="content">I do track the price per unit (kg, lt, etc) and I was a bit on the fence on whether I should show and graph that number instead of the price that someone would pay at the checkout, but I opted for the latter to keep it more &quot;familiar&quot; with the prices people see.<p>Having said that, that&#x27;s definitely something that I could add and it would show when the shrinkflation occured if any.</div><br/></div></div><div id="41175595" class="c"><input type="checkbox" id="c-41175595" checked=""/><div class="controls bullet"><span class="by">barbazoo</span><span>|</span><a href="#41175465">parent</a><span>|</span><a href="#41175596">prev</a><span>|</span><a href="#41176444">next</a><span>|</span><label class="collapse" for="c-41175595">[-]</label><label class="expand" for="c-41175595">[7 more]</label></div><br/><div class="children"><div class="content">Grocers not putting per unit prices on the label is a pet peeve of mine. I can’t imagine any purpose not rooted in customer hostility.</div><br/><div id="41176163" class="c"><input type="checkbox" id="c-41176163" checked=""/><div class="controls bullet"><span class="by">baronswindle</span><span>|</span><a href="#41175465">root</a><span>|</span><a href="#41175595">parent</a><span>|</span><a href="#41178962">next</a><span>|</span><label class="collapse" for="c-41176163">[-]</label><label class="expand" for="c-41176163">[4 more]</label></div><br/><div class="children"><div class="content">In my experience, grocers always do include unit prices…at least in the USA. I’ve lived in Florida, Indiana, California, and New York, and in 35 years of life, I can’t remember ever <i>not</i> seeing the price per oz, per pound, per fl oz, etc. right next to the total price for food&#x2F;drink and most home goods.<p>There may be some exceptions, but I’m struggling to think of any except things where weight&#x2F;volume aren’t really relevant to the value — e.g., a sponge.</div><br/><div id="41177312" class="c"><input type="checkbox" id="c-41177312" checked=""/><div class="controls bullet"><span class="by">lightbritefight</span><span>|</span><a href="#41175465">root</a><span>|</span><a href="#41176163">parent</a><span>|</span><a href="#41177293">next</a><span>|</span><label class="collapse" for="c-41177312">[-]</label><label class="expand" for="c-41177312">[2 more]</label></div><br/><div class="children"><div class="content">What they often do is put different units on the same type of good. Three chocolate bars? One will be in oz, one in lbs, one in &quot;per unit.&quot;<p>They all are labelled, but it&#x27;s still customer hostile to create comparison fatigue.</div><br/><div id="41178497" class="c"><input type="checkbox" id="c-41178497" checked=""/><div class="controls bullet"><span class="by">Rastonbury</span><span>|</span><a href="#41175465">root</a><span>|</span><a href="#41177312">parent</a><span>|</span><a href="#41177293">next</a><span>|</span><label class="collapse" for="c-41178497">[-]</label><label class="expand" for="c-41178497">[1 more]</label></div><br/><div class="children"><div class="content">This is such a shame, anywhere this is mandated they should mandate by mass and for medical&#x2F;vitamins per mass of active ingredient</div><br/></div></div></div></div><div id="41177293" class="c"><input type="checkbox" id="c-41177293" checked=""/><div class="controls bullet"><span class="by">nosecreek</span><span>|</span><a href="#41175465">root</a><span>|</span><a href="#41176163">parent</a><span>|</span><a href="#41177312">prev</a><span>|</span><a href="#41178962">next</a><span>|</span><label class="collapse" for="c-41177293">[-]</label><label class="expand" for="c-41177293">[1 more]</label></div><br/><div class="children"><div class="content">In Canada I think they are legally required to, but sometimes it can be frustrating if they don’t always compare like units - one product will be price per gram or 100 grams, and another price per kg. I’ve found with online shopping, the unit prices don’t take into account discounts and sale prices, which makes it harder to shop sales (in store seems to be better for this).</div><br/></div></div></div></div><div id="41178962" class="c"><input type="checkbox" id="c-41178962" checked=""/><div class="controls bullet"><span class="by">dawnerd</span><span>|</span><a href="#41175465">root</a><span>|</span><a href="#41175595">parent</a><span>|</span><a href="#41176163">prev</a><span>|</span><a href="#41177634">next</a><span>|</span><label class="collapse" for="c-41178962">[-]</label><label class="expand" for="c-41178962">[1 more]</label></div><br/><div class="children"><div class="content">Or when they change what unit to display so you can’t easily cross compare.</div><br/></div></div><div id="41177634" class="c"><input type="checkbox" id="c-41177634" checked=""/><div class="controls bullet"><span class="by">girvo</span><span>|</span><a href="#41175465">root</a><span>|</span><a href="#41175595">parent</a><span>|</span><a href="#41178962">prev</a><span>|</span><a href="#41176444">next</a><span>|</span><label class="collapse" for="c-41177634">[-]</label><label class="expand" for="c-41177634">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s required by law in Australia, which is nice</div><br/></div></div></div></div><div id="41176444" class="c"><input type="checkbox" id="c-41176444" checked=""/><div class="controls bullet"><span class="by">candiddevmike</span><span>|</span><a href="#41175465">parent</a><span>|</span><a href="#41175595">prev</a><span>|</span><a href="#41177583">next</a><span>|</span><label class="collapse" for="c-41176444">[-]</label><label class="expand" for="c-41176444">[1 more]</label></div><br/><div class="children"><div class="content">Imagine mandating transparent cost of goods pricing.  I&#x27;d love to see farmer was paid X, manufacturer Y, and grocer added Z.</div><br/></div></div></div></div><div id="41177583" class="c"><input type="checkbox" id="c-41177583" checked=""/><div class="controls bullet"><span class="by">odysseus</span><span>|</span><a href="#41175465">prev</a><span>|</span><a href="#41176917">next</a><span>|</span><label class="collapse" for="c-41177583">[-]</label><label class="expand" for="c-41177583">[6 more]</label></div><br/><div class="children"><div class="content">I used to price track when I moved to a new area, but now I find it way easier to just shop at 2 markets or big box stores that consistently have low prices.<p>In Europe, that would probably be Aldi&#x2F;Lidl.<p>In the U.S., maybe Costco&#x2F;Trader Joe&#x27;s.<p>For online, CamelCamelCamel&#x2F;Amazon.  (for health&#x2F;beauty&#x2F;some electronics but not food)<p>If you can buy direct from the manufacturer, sometimes that&#x27;s even better.  For example, I got a particular brand of soap I love at the soap&#x27;s wholesaler site in bulk for less than half the retail price.  For shampoo, buying the gallon size direct was way cheaper than buying from any retailer.</div><br/><div id="41177734" class="c"><input type="checkbox" id="c-41177734" checked=""/><div class="controls bullet"><span class="by">bufferoverflow</span><span>|</span><a href="#41177583">parent</a><span>|</span><a href="#41177885">next</a><span>|</span><label class="collapse" for="c-41177734">[-]</label><label class="expand" for="c-41177734">[3 more]</label></div><br/><div class="children"><div class="content">&gt; <i>In the U.S., maybe Costco&#x2F;Trader Joe&#x27;s.</i><p>Costco&#x2F;Walmart&#x2F;Aldi in my experience.<p>Trader Joe&#x27;s is higher quality, but generally more expensive.</div><br/><div id="41177828" class="c"><input type="checkbox" id="c-41177828" checked=""/><div class="controls bullet"><span class="by">DontchaKnowit</span><span>|</span><a href="#41177583">root</a><span>|</span><a href="#41177734">parent</a><span>|</span><a href="#41178143">next</a><span>|</span><label class="collapse" for="c-41177828">[-]</label><label class="expand" for="c-41177828">[1 more]</label></div><br/><div class="children"><div class="content">walmart is undisputed king of low prices and honestly in my experience the quality on their store brand stuff is pretty damn solid. and usually like half the price of comparable products. Been living off their greek yogurt for a while now. Its great</div><br/></div></div><div id="41178143" class="c"><input type="checkbox" id="c-41178143" checked=""/><div class="controls bullet"><span class="by">shiroiushi</span><span>|</span><a href="#41177583">root</a><span>|</span><a href="#41177734">parent</a><span>|</span><a href="#41177828">prev</a><span>|</span><a href="#41177885">next</a><span>|</span><label class="collapse" for="c-41178143">[-]</label><label class="expand" for="c-41178143">[1 more]</label></div><br/><div class="children"><div class="content">Trader Joe&#x27;s also only carries Trader Joe&#x27;s-branded merchandise, aside from the produce.  So if you&#x27;re looking for something in particular that isn&#x27;t a TJ item, you won&#x27;t find it there.</div><br/></div></div></div></div><div id="41177885" class="c"><input type="checkbox" id="c-41177885" checked=""/><div class="controls bullet"><span class="by">dexwiz</span><span>|</span><a href="#41177583">parent</a><span>|</span><a href="#41177734">prev</a><span>|</span><a href="#41176917">next</a><span>|</span><label class="collapse" for="c-41177885">[-]</label><label class="expand" for="c-41177885">[2 more]</label></div><br/><div class="children"><div class="content">You can find ALDIs in the USA, but they are regional. Trader Joe’s is owned by the same family as ALDIs, and until recently (past 10 years) you wouldn’t see them in the same areas.</div><br/><div id="41179473" class="c"><input type="checkbox" id="c-41179473" checked=""/><div class="controls bullet"><span class="by">jasomill</span><span>|</span><a href="#41177583">root</a><span>|</span><a href="#41177885">parent</a><span>|</span><a href="#41176917">next</a><span>|</span><label class="collapse" for="c-41179473">[-]</label><label class="expand" for="c-41179473">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;d usually associate the term &quot;regional&quot; with chains like Meijer, Giant Eagle, and Winn-Dixie.<p>With 2,392 stores in 38 states plus DC[1], I&#x27;m not sure Aldi US qualifies.<p>[1] <a href="https:&#x2F;&#x2F;stores.aldi.us" rel="nofollow">https:&#x2F;&#x2F;stores.aldi.us</a></div><br/></div></div></div></div></div></div><div id="41176917" class="c"><input type="checkbox" id="c-41176917" checked=""/><div class="controls bullet"><span class="by">seanwilson</span><span>|</span><a href="#41177583">prev</a><span>|</span><a href="#41176814">next</a><span>|</span><label class="collapse" for="c-41176917">[-]</label><label class="expand" for="c-41176917">[2 more]</label></div><br/><div class="children"><div class="content">&gt; They change things in a way that doesn&#x27;t make your scraper fail. Instead the scraping continues as before, visiting all the links and scraping all the products. However the way they write the prices has changed and now a bag of chips doesn&#x27;t cost €1.99 but €199. To catch these changes I rely on my transformation step being as strict as possible with its inputs.<p>You could probably add some automated checks to not sync changes to prices&#x2F;products if a sanity check fails e.g. each price shouldn&#x27;t change by more than 100%, and the number of active products shouldn&#x27;t change by more than 20%.</div><br/><div id="41178681" class="c"><input type="checkbox" id="c-41178681" checked=""/><div class="controls bullet"><span class="by">z3t4</span><span>|</span><a href="#41176917">parent</a><span>|</span><a href="#41176814">next</a><span>|</span><label class="collapse" for="c-41178681">[-]</label><label class="expand" for="c-41178681">[1 more]</label></div><br/><div class="children"><div class="content">[delayed]</div><br/></div></div></div></div><div id="41176814" class="c"><input type="checkbox" id="c-41176814" checked=""/><div class="controls bullet"><span class="by">langsoul-com</span><span>|</span><a href="#41176917">prev</a><span>|</span><a href="#41179102">next</a><span>|</span><label class="collapse" for="c-41176814">[-]</label><label class="expand" for="c-41176814">[6 more]</label></div><br/><div class="children"><div class="content">The hard thing is not scraping, but getting around the increasingly sophisticated blockers.<p>You&#x27;ll need to constantly rotate residential proxies (high rated) and make sure not to exhibit data scraping patterns. Some supermarkets don&#x27;t show the network requests in the network tab, so cannot just get that api response.<p>Even then, mitm attacks with mobile app (to see the network requests and data) will also get blocked without decent cover ups.<p>I tried but realised it isn&#x27;t worth it due to the costs and constant dev work required. In fact, some of the supermarket pricing comparison services just have (cheap labour) people scrape it</div><br/><div id="41179151" class="c"><input type="checkbox" id="c-41179151" checked=""/><div class="controls bullet"><span class="by">sakisv</span><span>|</span><a href="#41176814">parent</a><span>|</span><a href="#41177135">next</a><span>|</span><label class="collapse" for="c-41179151">[-]</label><label class="expand" for="c-41179151">[1 more]</label></div><br/><div class="children"><div class="content">Thankfully I&#x27;m not there yet.<p>Since this is just a side project, if it starts demanding too much of my time too often I&#x27;ll just stop it and open both the code and the data.<p>BTW, how could the network request not appear in the network tab?<p>For me the hardest part is to correlate and compare products across supermarkets</div><br/></div></div><div id="41177135" class="c"><input type="checkbox" id="c-41177135" checked=""/><div class="controls bullet"><span class="by">__MatrixMan__</span><span>|</span><a href="#41176814">parent</a><span>|</span><a href="#41179151">prev</a><span>|</span><a href="#41176832">next</a><span>|</span><label class="collapse" for="c-41177135">[-]</label><label class="expand" for="c-41177135">[2 more]</label></div><br/><div class="children"><div class="content">I wonder if we could get some legislation in place to require that they publish pricing data via an API so we don&#x27;t have to tangle with the blockers at all.</div><br/><div id="41177404" class="c"><input type="checkbox" id="c-41177404" checked=""/><div class="controls bullet"><span class="by">immibis</span><span>|</span><a href="#41176814">root</a><span>|</span><a href="#41177135">parent</a><span>|</span><a href="#41176832">next</a><span>|</span><label class="collapse" for="c-41177404">[-]</label><label class="expand" for="c-41177404">[1 more]</label></div><br/><div class="children"><div class="content">Perhaps in Europe. Anywhere else, forget about it.</div><br/></div></div></div></div><div id="41176832" class="c"><input type="checkbox" id="c-41176832" checked=""/><div class="controls bullet"><span class="by">seanthemon</span><span>|</span><a href="#41176814">parent</a><span>|</span><a href="#41177135">prev</a><span>|</span><a href="#41179102">next</a><span>|</span><label class="collapse" for="c-41176832">[-]</label><label class="expand" for="c-41176832">[2 more]</label></div><br/><div class="children"><div class="content">And you couldn&#x27;t use OCR and simply take an image of the product list? Not ideal, but difficult or impossible to track depending on your method.</div><br/><div id="41178446" class="c"><input type="checkbox" id="c-41178446" checked=""/><div class="controls bullet"><span class="by">langsoul-com</span><span>|</span><a href="#41176814">root</a><span>|</span><a href="#41176832">parent</a><span>|</span><a href="#41179102">next</a><span>|</span><label class="collapse" for="c-41178446">[-]</label><label class="expand" for="c-41178446">[1 more]</label></div><br/><div class="children"><div class="content">You&#x27;ll get blocked before even seeing the page most times.</div><br/></div></div></div></div></div></div><div id="41179102" class="c"><input type="checkbox" id="c-41179102" checked=""/><div class="controls bullet"><span class="by">grafraf</span><span>|</span><a href="#41176814">prev</a><span>|</span><a href="#41174705">next</a><span>|</span><label class="collapse" for="c-41179102">[-]</label><label class="expand" for="c-41179102">[4 more]</label></div><br/><div class="children"><div class="content">We have been doing it for the Swedish market in more than 8 years. We have a website <a href="https:&#x2F;&#x2F;www.matspar.se&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.matspar.se&#x2F;</a> , where the customer can browse all the products of all major online stores, compare the prices and add the products they want to buy in the cart. The customer can in the end of the journey compare the total price of that cart (including shipping fee) and export the cart to the store they desire to order it.<p>I&#x27;m also one of the founders and the current CTO, so there been a lot of scraping and maintaining during the years. We are scraping over 30 million prices daily.</div><br/><div id="41179120" class="c"><input type="checkbox" id="c-41179120" checked=""/><div class="controls bullet"><span class="by">showsover</span><span>|</span><a href="#41179102">parent</a><span>|</span><a href="#41174705">next</a><span>|</span><label class="collapse" for="c-41179120">[-]</label><label class="expand" for="c-41179120">[3 more]</label></div><br/><div class="children"><div class="content">Do you have a technical writeup of your scraping approach? I&#x27;d love to read more about the challenges and solutions for them.</div><br/><div id="41179270" class="c"><input type="checkbox" id="c-41179270" checked=""/><div class="controls bullet"><span class="by">grafraf</span><span>|</span><a href="#41179102">root</a><span>|</span><a href="#41179120">parent</a><span>|</span><a href="#41174705">next</a><span>|</span><label class="collapse" for="c-41179270">[-]</label><label class="expand" for="c-41179270">[2 more]</label></div><br/><div class="children"><div class="content">Unfortunately no, but i can share some insights that i hope can be of value:<p>- Tech: Everything is hosted in AWS. We are using Golang in docker containers that does the scraping. They run on ECS Fargate spots when needed using cronjob. The scraping result is stored as a parquet in S3 and processed in our RDS Postgresql. We need to be creative and have some methods to identify that a particular product A in store 1 is the same as product A in store 2 so they are mapped together. Sometimes it needs to be verified manually. The data that are of interest for the user&#x2F;site is indexed into an Elastic search.<p>Things that might be of interest:
- We always try to avoid parsing the HTML but instead calling the sites APIs directly to reduce scraping time. We also try to scrape the category listing to access multiple prices by one request, this can reduce the total requests from over 100 000 to maybe less than 1000 requests.<p>- We also try to avoid scraping the sites during peak times and respect their robots.txt. We add some delay to each request. The scrapes are often done during night&#x2F;early morning.<p>- The main challenge is that stores can redesign or modify which make our scrapers fail, so we need to be fast and adopt to the new changes.<p>- Another major hidden challenge is that the stores have different prices for the same product depending on your zip code, so we have our ways of identifying the stores different warehouses, what zip codes belong to a specific warehouse and do a scrape for that warehouse. So a store might have 5 warehouses, so we need to scrape it 5 times with different zip codes<p>There is much more but i hope that gave you some insights of challenges and some solutions!</div><br/><div id="41179414" class="c"><input type="checkbox" id="c-41179414" checked=""/><div class="controls bullet"><span class="by">showsover</span><span>|</span><a href="#41179102">root</a><span>|</span><a href="#41179270">parent</a><span>|</span><a href="#41174705">next</a><span>|</span><label class="collapse" for="c-41179414">[-]</label><label class="expand" for="c-41179414">[1 more]</label></div><br/><div class="children"><div class="content">Interesting stuff, thanks for the reply!<p>Do you run into issues where they block your scraping attempts or are they quite relaxed on this? Circumventing the bot detection often forces us to go for Puppeteer so we can fully control the browser, but that carries quite a heavy cost compared to using a simple HTTP requester.</div><br/></div></div></div></div></div></div></div></div><div id="41174705" class="c"><input type="checkbox" id="c-41174705" checked=""/><div class="controls bullet"><span class="by">andrewla</span><span>|</span><a href="#41179102">prev</a><span>|</span><a href="#41173815">next</a><span>|</span><label class="collapse" for="c-41174705">[-]</label><label class="expand" for="c-41174705">[3 more]</label></div><br/><div class="children"><div class="content">One problem that the author notes is that so much rendering is done client side via javascript.<p>The flip side to this is that very often you find that the data populating the site is in a very simple JSON format to facilitate easy rendering, ironically making the scraping process a lot more reliable.</div><br/><div id="41175440" class="c"><input type="checkbox" id="c-41175440" checked=""/><div class="controls bullet"><span class="by">sakisv</span><span>|</span><a href="#41174705">parent</a><span>|</span><a href="#41173815">next</a><span>|</span><label class="collapse" for="c-41175440">[-]</label><label class="expand" for="c-41175440">[2 more]</label></div><br/><div class="children"><div class="content">Initially that&#x27;s what I wanted to do, but the first supermarket I did is sending back HTML rendered on the server side, so I abandonded this approach for the sake of &quot;consistency&quot;.<p>Lately I&#x27;ve been thinking to bite the bullet and Just Do It, but since it&#x27;s working I&#x27;m a bit reluctant to touch it.</div><br/><div id="41175477" class="c"><input type="checkbox" id="c-41175477" checked=""/><div class="controls bullet"><span class="by">andrewla</span><span>|</span><a href="#41174705">root</a><span>|</span><a href="#41175440">parent</a><span>|</span><a href="#41173815">next</a><span>|</span><label class="collapse" for="c-41175477">[-]</label><label class="expand" for="c-41175477">[1 more]</label></div><br/><div class="children"><div class="content">For your purposes scraping the user-visible site probably makes the most sense since in the end, their users&#x27; eyes are the target.<p>I am typically doing one-off scraping and for that, an undocumented but clean JSON api makes things so much easier, so I&#x27;ve grown to enjoy sites that are unnecessarily complex in their rendering.</div><br/></div></div></div></div></div></div><div id="41173815" class="c"><input type="checkbox" id="c-41173815" checked=""/><div class="controls bullet"><span class="by">ikesau</span><span>|</span><a href="#41174705">prev</a><span>|</span><a href="#41174076">next</a><span>|</span><label class="collapse" for="c-41173815">[-]</label><label class="expand" for="c-41173815">[8 more]</label></div><br/><div class="children"><div class="content">Ah, I love this. Nice work!<p>I really wish supermarkets were mandated to post this information whenever the price of a particular SKU updated.<p>The tools that could be built with such information would do amazing things for consumers.</div><br/><div id="41174254" class="c"><input type="checkbox" id="c-41174254" checked=""/><div class="controls bullet"><span class="by">sakisv</span><span>|</span><a href="#41173815">parent</a><span>|</span><a href="#41174820">next</a><span>|</span><label class="collapse" for="c-41174254">[-]</label><label class="expand" for="c-41174254">[3 more]</label></div><br/><div class="children"><div class="content">Thanks!<p>If Greece&#x27;s case is anything to go by, I doubt they&#x27;d ever accept that as it may bring to light some... questionable practices.<p>At some point I need to deduplicate the products and plot the prices across all 3 supermarkets on the same graph as I suspect it will show some interesting trends.</div><br/><div id="41174997" class="c"><input type="checkbox" id="c-41174997" checked=""/><div class="controls bullet"><span class="by">project2501a</span><span>|</span><a href="#41173815">root</a><span>|</span><a href="#41174254">parent</a><span>|</span><a href="#41174820">next</a><span>|</span><label class="collapse" for="c-41174997">[-]</label><label class="expand" for="c-41174997">[2 more]</label></div><br/><div class="children"><div class="content">fyi, I posted this on &#x2F;r&#x2F;greece</div><br/><div id="41175098" class="c"><input type="checkbox" id="c-41175098" checked=""/><div class="controls bullet"><span class="by">sakisv</span><span>|</span><a href="#41173815">root</a><span>|</span><a href="#41174997">parent</a><span>|</span><a href="#41174820">next</a><span>|</span><label class="collapse" for="c-41175098">[-]</label><label class="expand" for="c-41175098">[1 more]</label></div><br/><div class="children"><div class="content">Thanks!</div><br/></div></div></div></div></div></div><div id="41174820" class="c"><input type="checkbox" id="c-41174820" checked=""/><div class="controls bullet"><span class="by">robotnikman</span><span>|</span><a href="#41173815">parent</a><span>|</span><a href="#41174254">prev</a><span>|</span><a href="#41174439">next</a><span>|</span><label class="collapse" for="c-41174820">[-]</label><label class="expand" for="c-41174820">[1 more]</label></div><br/><div class="children"><div class="content">As someone who actively works on these kind of systems, it&#x27;s a bit more complicated than that. The past few years we worked on migrating from some old system from the 80&#x27;s designed for LAN use only, to a cloud based item catalogue system that finally allowed us the ability to easily make pricing info more available to consumers, such as through an app.</div><br/></div></div></div></div><div id="41174076" class="c"><input type="checkbox" id="c-41174076" checked=""/><div class="controls bullet"><span class="by">xnx</span><span>|</span><a href="#41173815">prev</a><span>|</span><a href="#41178879">next</a><span>|</span><label class="collapse" for="c-41174076">[-]</label><label class="expand" for="c-41174076">[2 more]</label></div><br/><div class="children"><div class="content">Scraping tools have become more powerful than ever, but bot restrictions have become equally more strict. It&#x27;s hard to scrape reliably under any circumstance, or even consistently without residential proxies.</div><br/><div id="41174173" class="c"><input type="checkbox" id="c-41174173" checked=""/><div class="controls bullet"><span class="by">sakisv</span><span>|</span><a href="#41174076">parent</a><span>|</span><a href="#41178879">next</a><span>|</span><label class="collapse" for="c-41174173">[-]</label><label class="expand" for="c-41174173">[1 more]</label></div><br/><div class="children"><div class="content">When I first started it there was a couple of instances that my IP was blocked - despite being a residential IP behind CGNAT.<p>I then started randomising every aspect of the scraping process that I could: The order that I visited the links, the sleep duration between almost every action, etc.<p>As long as they don&#x27;t implement a strict fingerprinting technique, that seems to be enough for now</div><br/></div></div></div></div><div id="41178879" class="c"><input type="checkbox" id="c-41178879" checked=""/><div class="controls bullet"><span class="by">jonatron</span><span>|</span><a href="#41174076">prev</a><span>|</span><a href="#41174148">next</a><span>|</span><label class="collapse" for="c-41178879">[-]</label><label class="expand" for="c-41178879">[1 more]</label></div><br/><div class="children"><div class="content">If you were thinking of making a UK supermarket price comparison site, IIRC there&#x27;s a company who owns all the product photos, read more at <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=31900312">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=31900312</a></div><br/></div></div><div id="41174148" class="c"><input type="checkbox" id="c-41174148" checked=""/><div class="controls bullet"><span class="by">nosecreek</span><span>|</span><a href="#41178879">prev</a><span>|</span><a href="#41177158">next</a><span>|</span><label class="collapse" for="c-41174148">[-]</label><label class="expand" for="c-41174148">[13 more]</label></div><br/><div class="children"><div class="content">Very cool! I did something similar in Canada (<a href="https:&#x2F;&#x2F;grocerytracker.ca&#x2F;" rel="nofollow">https:&#x2F;&#x2F;grocerytracker.ca&#x2F;</a>)</div><br/><div id="41175193" class="c"><input type="checkbox" id="c-41175193" checked=""/><div class="controls bullet"><span class="by">snac</span><span>|</span><a href="#41174148">parent</a><span>|</span><a href="#41177055">next</a><span>|</span><label class="collapse" for="c-41175193">[-]</label><label class="expand" for="c-41175193">[1 more]</label></div><br/><div class="children"><div class="content">Love your site! It was a great source of inspiration with the amount of data you collect.<p>I did the same and made <a href="https:&#x2F;&#x2F;grocerygoose.ca&#x2F;" rel="nofollow">https:&#x2F;&#x2F;grocerygoose.ca&#x2F;</a><p>Published the API endpoints that I “discovered” to make the app
<a href="https:&#x2F;&#x2F;github.com&#x2F;snacsnoc&#x2F;grocery-app">https:&#x2F;&#x2F;github.com&#x2F;snacsnoc&#x2F;grocery-app</a> (see HACKING.md)<p>It’s an unfortunate state of affairs when devs like us have to go to such great lengths to track the price of a commodity (food).</div><br/></div></div><div id="41177055" class="c"><input type="checkbox" id="c-41177055" checked=""/><div class="controls bullet"><span class="by">kareemm</span><span>|</span><a href="#41174148">parent</a><span>|</span><a href="#41175193">prev</a><span>|</span><a href="#41174391">next</a><span>|</span><label class="collapse" for="c-41177055">[-]</label><label class="expand" for="c-41177055">[2 more]</label></div><br/><div class="children"><div class="content">Was looking for one in Canada.  Tried this out and it seems like some of the data is missing from where I live (halifax).  Got an email I can hit you up at?  Mine&#x27;s in my HN profile - couldn&#x27;t find yours on HN or your site.</div><br/><div id="41177273" class="c"><input type="checkbox" id="c-41177273" checked=""/><div class="controls bullet"><span class="by">nosecreek</span><span>|</span><a href="#41174148">root</a><span>|</span><a href="#41177055">parent</a><span>|</span><a href="#41174391">next</a><span>|</span><label class="collapse" for="c-41177273">[-]</label><label class="expand" for="c-41177273">[1 more]</label></div><br/><div class="children"><div class="content">For sure, just replace the first dot in the url from my profile with an @</div><br/></div></div></div></div><div id="41174391" class="c"><input type="checkbox" id="c-41174391" checked=""/><div class="controls bullet"><span class="by">odiroot</span><span>|</span><a href="#41174148">parent</a><span>|</span><a href="#41177055">prev</a><span>|</span><a href="#41178277">next</a><span>|</span><label class="collapse" for="c-41174391">[-]</label><label class="expand" for="c-41174391">[1 more]</label></div><br/><div class="children"><div class="content">Similar for Austria: <a href="https:&#x2F;&#x2F;heisse-preise.io" rel="nofollow">https:&#x2F;&#x2F;heisse-preise.io</a></div><br/></div></div><div id="41178277" class="c"><input type="checkbox" id="c-41178277" checked=""/><div class="controls bullet"><span class="by">maxglute</span><span>|</span><a href="#41174148">parent</a><span>|</span><a href="#41174391">prev</a><span>|</span><a href="#41174274">next</a><span>|</span><label class="collapse" for="c-41178277">[-]</label><label class="expand" for="c-41178277">[1 more]</label></div><br/><div class="children"><div class="content">Excellent work.</div><br/></div></div><div id="41174274" class="c"><input type="checkbox" id="c-41174274" checked=""/><div class="controls bullet"><span class="by">sakisv</span><span>|</span><a href="#41174148">parent</a><span>|</span><a href="#41178277">prev</a><span>|</span><a href="#41177158">next</a><span>|</span><label class="collapse" for="c-41174274">[-]</label><label class="expand" for="c-41174274">[7 more]</label></div><br/><div class="children"><div class="content">Oh nice!<p>A thorny problem in my case is that the same item is named in 3 different ways between the 3 supermarkets which makes it very hard and annoying to do a proper comparison.<p>Did you have a similar problem?</div><br/><div id="41176002" class="c"><input type="checkbox" id="c-41176002" checked=""/><div class="controls bullet"><span class="by">seszett</span><span>|</span><a href="#41174148">root</a><span>|</span><a href="#41174274">parent</a><span>|</span><a href="#41174365">next</a><span>|</span><label class="collapse" for="c-41176002">[-]</label><label class="expand" for="c-41176002">[1 more]</label></div><br/><div class="children"><div class="content">I have built a similar system for myself, but since it&#x27;s small scale I just have &quot;groups&quot; of similar items that I manually populate.<p>I have the additional problem that I want to compare products across France and Belgium (Dutch-speaking side) so there is no hope at all to group products automatically. My manual system allows me to put together say 250g and 500g packaging of the same butter, or of two of the butters that I like to buy, so I can always see easily which one I should get (it&#x27;s often the 250g that&#x27;s cheaper by weight these days).<p>Also the 42000 or so different packagings for Head and Shoulders shampoo. 250ml, 270ml, 285ml, 480ml, 500ml (285ml is usually cheapest). I&#x27;m pretty sure they do it on purpose so each store doesn&#x27;t have to match price with the others because it&#x27;s a &quot;different product&quot;.</div><br/></div></div><div id="41174365" class="c"><input type="checkbox" id="c-41174365" checked=""/><div class="controls bullet"><span class="by">nosecreek</span><span>|</span><a href="#41174148">root</a><span>|</span><a href="#41174274">parent</a><span>|</span><a href="#41176002">prev</a><span>|</span><a href="#41177158">next</a><span>|</span><label class="collapse" for="c-41174365">[-]</label><label class="expand" for="c-41174365">[5 more]</label></div><br/><div class="children"><div class="content">Absolutely! It’s made it difficult to implement some of the cross-retailer comparison features I would like to add. For my charts I’ve just manually selected some products, but I’ve also been trying to get a “good enough but not perfect” string comparison algorithm working.</div><br/><div id="41175027" class="c"><input type="checkbox" id="c-41175027" checked=""/><div class="controls bullet"><span class="by">project2501a</span><span>|</span><a href="#41174148">root</a><span>|</span><a href="#41174365">parent</a><span>|</span><a href="#41174454">next</a><span>|</span><label class="collapse" for="c-41175027">[-]</label><label class="expand" for="c-41175027">[1 more]</label></div><br/><div class="children"><div class="content">would maintaining a map of products  product_x[supermarket] with 2-3 values work? I don&#x27;t suspect that supermarkets would be very keen to change the name (but they might play other dirty games)<p>I am thinking of doing the same thing for linux packages in debian and fedora</div><br/></div></div><div id="41174454" class="c"><input type="checkbox" id="c-41174454" checked=""/><div class="controls bullet"><span class="by">sakisv</span><span>|</span><a href="#41174148">root</a><span>|</span><a href="#41174365">parent</a><span>|</span><a href="#41175027">prev</a><span>|</span><a href="#41177158">next</a><span>|</span><label class="collapse" for="c-41174454">[-]</label><label class="expand" for="c-41174454">[3 more]</label></div><br/><div class="children"><div class="content">Ah yes.<p>My approach so far has been to first extract the brand names (which are also not written the same way for some fcking reason!), update the strings, and then compare the remaining.<p>If they have a high similarity (e.g. &gt;95%) then they could be automatically merged, and then anything between 75%-95% can be reviewed manually.</div><br/><div id="41174947" class="c"><input type="checkbox" id="c-41174947" checked=""/><div class="controls bullet"><span class="by">victornomad</span><span>|</span><a href="#41174148">root</a><span>|</span><a href="#41174454">parent</a><span>|</span><a href="#41177158">next</a><span>|</span><label class="collapse" for="c-41174947">[-]</label><label class="expand" for="c-41174947">[2 more]</label></div><br/><div class="children"><div class="content">I am not by any mean an expert but maybe using some LLMs or a sentence transformer here could help to do the job?</div><br/><div id="41175304" class="c"><input type="checkbox" id="c-41175304" checked=""/><div class="controls bullet"><span class="by">sakisv</span><span>|</span><a href="#41174148">root</a><span>|</span><a href="#41174947">parent</a><span>|</span><a href="#41177158">next</a><span>|</span><label class="collapse" for="c-41175304">[-]</label><label class="expand" for="c-41175304">[1 more]</label></div><br/><div class="children"><div class="content">I gave it a very quick try with chatgpt, but wasn&#x27;t very impressed from the results.<p>Granted it was around January, and things may have progressed...<p>(Βut then again why take the easy approach when Ι can waste a few afternoons playing around with string comparisons)</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="41177158" class="c"><input type="checkbox" id="c-41177158" checked=""/><div class="controls bullet"><span class="by">NKosmatos</span><span>|</span><a href="#41174148">prev</a><span>|</span><a href="#41178198">next</a><span>|</span><label class="collapse" for="c-41177158">[-]</label><label class="expand" for="c-41177158">[1 more]</label></div><br/><div class="children"><div class="content">Hey, thanks for creating <a href="https:&#x2F;&#x2F;pricewatcher.gr&#x2F;en&#x2F;" rel="nofollow">https:&#x2F;&#x2F;pricewatcher.gr&#x2F;en&#x2F;</a> very much appreciated.<p>Nice blog post and very informative. Good to read that it costs you less than 70€ per year to run this and hope that the big supermarkets don’t block this somehow.<p>Have you thought of monetizing this? Perhaps with ads from the 3 big supermarkets you scrape ;-)</div><br/></div></div><div id="41178198" class="c"><input type="checkbox" id="c-41178198" checked=""/><div class="controls bullet"><span class="by">Scrapemist</span><span>|</span><a href="#41177158">prev</a><span>|</span><a href="#41175991">next</a><span>|</span><label class="collapse" for="c-41178198">[-]</label><label class="expand" for="c-41178198">[2 more]</label></div><br/><div class="children"><div class="content">What if you add all products to your shopping cart and save it as “favourites” and scrape that every other day.</div><br/><div id="41178678" class="c"><input type="checkbox" id="c-41178678" checked=""/><div class="controls bullet"><span class="by">nilsherzig</span><span>|</span><a href="#41178198">parent</a><span>|</span><a href="#41175991">next</a><span>|</span><label class="collapse" for="c-41178678">[-]</label><label class="expand" for="c-41178678">[1 more]</label></div><br/><div class="children"><div class="content">You would still need a way to add all items and to check if there are new ones</div><br/></div></div></div></div><div id="41175991" class="c"><input type="checkbox" id="c-41175991" checked=""/><div class="controls bullet"><span class="by">antman</span><span>|</span><a href="#41178198">prev</a><span>|</span><a href="#41175739">next</a><span>|</span><label class="collapse" for="c-41175991">[-]</label><label class="expand" for="c-41175991">[2 more]</label></div><br/><div class="children"><div class="content">Looks great. Perhaps more than 30 days comparisons would be interesting. Or customizable should be fast enough with a duckdb backend</div><br/><div id="41179232" class="c"><input type="checkbox" id="c-41179232" checked=""/><div class="controls bullet"><span class="by">sakisv</span><span>|</span><a href="#41175991">parent</a><span>|</span><a href="#41175739">next</a><span>|</span><label class="collapse" for="c-41179232">[-]</label><label class="expand" for="c-41179232">[1 more]</label></div><br/><div class="children"><div class="content">When you click on a product you get its full price history by default.<p>I did consider adding a 3 and 6 month button, but for some reason I decided against it, don&#x27;t remember why. It wasn&#x27;t performance because I&#x27;m heavily caching everything so it wouldn&#x27;t have made a difference. Maybe aesthetics?</div><br/></div></div></div></div><div id="41175739" class="c"><input type="checkbox" id="c-41175739" checked=""/><div class="controls bullet"><span class="by">hk1337</span><span>|</span><a href="#41175991">prev</a><span>|</span><a href="#41174401">next</a><span>|</span><label class="collapse" for="c-41175739">[-]</label><label class="expand" for="c-41175739">[3 more]</label></div><br/><div class="children"><div class="content">I would be curious if there were a price difference between what is online and physically in the store.</div><br/><div id="41178609" class="c"><input type="checkbox" id="c-41178609" checked=""/><div class="controls bullet"><span class="by">devjab</span><span>|</span><a href="#41175739">parent</a><span>|</span><a href="#41176055">next</a><span>|</span><label class="collapse" for="c-41178609">[-]</label><label class="expand" for="c-41178609">[1 more]</label></div><br/><div class="children"><div class="content">In Denmark there often is, things like localised sales the 4-8 times a year a specific store celebrates its birthday or similar. You can scan their PDF brochures but you would need image recognition for most of them, and some well trained recognitions to boot since they often alter their layouts and prices are listed differently.<p>The biggest sales come from the individual store “close to expiration” sales where items can become really cheap. These aren’t available anywhere but the stores themselves though.<p>Here I think the biggest challenge might be the monopoly supermarket chains have on the market. We basically two major corporations with various brands. They are extremely similar in their pricing, and even though there are two low price competitors, these don’t seem to affect the competition with the two major corporations at all. What is worse is that one of these two major corporations is “winning”, meaning that we’re heading more and more toward what will basically be a true monopoly.</div><br/></div></div><div id="41176055" class="c"><input type="checkbox" id="c-41176055" checked=""/><div class="controls bullet"><span class="by">flir</span><span>|</span><a href="#41175739">parent</a><span>|</span><a href="#41178609">prev</a><span>|</span><a href="#41174401">next</a><span>|</span><label class="collapse" for="c-41176055">[-]</label><label class="expand" for="c-41176055">[1 more]</label></div><br/><div class="children"><div class="content">Next step: monitoring the updates to those e-ink shelf edge labels that are                                      starting to crop up.</div><br/></div></div></div></div><div id="41174401" class="c"><input type="checkbox" id="c-41174401" checked=""/><div class="controls bullet"><span class="by">haolez</span><span>|</span><a href="#41175739">prev</a><span>|</span><a href="#41175940">next</a><span>|</span><label class="collapse" for="c-41174401">[-]</label><label class="expand" for="c-41174401">[3 more]</label></div><br/><div class="children"><div class="content">I heard that some e-commerce sites will not block scrappers, but poison the data shown to them (e.g.  subtly wrong prices). Does anyone know more about this?</div><br/><div id="41175072" class="c"><input type="checkbox" id="c-41175072" checked=""/><div class="controls bullet"><span class="by">barryrandall</span><span>|</span><a href="#41174401">parent</a><span>|</span><a href="#41177372">next</a><span>|</span><label class="collapse" for="c-41175072">[-]</label><label class="expand" for="c-41175072">[1 more]</label></div><br/><div class="children"><div class="content">I never poisoned data, but I have implemented systems where clients who made requests too quickly got served data from a snapshot that only updated every 15 minutes.</div><br/></div></div><div id="41177372" class="c"><input type="checkbox" id="c-41177372" checked=""/><div class="controls bullet"><span class="by">MathMonkeyMan</span><span>|</span><a href="#41174401">parent</a><span>|</span><a href="#41175072">prev</a><span>|</span><a href="#41175940">next</a><span>|</span><label class="collapse" for="c-41177372">[-]</label><label class="expand" for="c-41177372">[1 more]</label></div><br/><div class="children"><div class="content">This HN post had me playing around with Key Food&#x27;s website. A lot of information is wrapped up in a cookie, but it looks like there isn&#x27;t too much javascript rendering.<p>But when I hit the URLs with curl, without a cookie, I get a valid looking page, but it&#x27;s just a hundred listings for &quot;Baby Bok Choy.&quot; Maybe a test page?<p>After a little more fiddling, the server just responded with an empty response body. So, it looks like I&#x27;ll have to use browser automation.</div><br/></div></div></div></div><div id="41175940" class="c"><input type="checkbox" id="c-41175940" checked=""/><div class="controls bullet"><span class="by">moohaad</span><span>|</span><a href="#41174401">prev</a><span>|</span><a href="#41173808">next</a><span>|</span><label class="collapse" for="c-41175940">[-]</label><label class="expand" for="c-41175940">[2 more]</label></div><br/><div class="children"><div class="content">Cloudflare Worker has Browser Rendering API</div><br/><div id="41176519" class="c"><input type="checkbox" id="c-41176519" checked=""/><div class="controls bullet"><span class="by">pencilcode</span><span>|</span><a href="#41175940">parent</a><span>|</span><a href="#41173808">next</a><span>|</span><label class="collapse" for="c-41176519">[-]</label><label class="expand" for="c-41176519">[1 more]</label></div><br/><div class="children"><div class="content">It’s pretty good actually. Used in a small scraping site and worked without a hitch.</div><br/></div></div></div></div><div id="41173808" class="c"><input type="checkbox" id="c-41173808" checked=""/><div class="controls bullet"><span class="by">lotsofpulp</span><span>|</span><a href="#41175940">prev</a><span>|</span><label class="collapse" for="c-41173808">[-]</label><label class="expand" for="c-41173808">[6 more]</label></div><br/><div class="children"><div class="content">In the US, retail businesses are offering individualized and general coupons via the phone apps.  I wonder if this pricing can be tracked, as it results in significant differences.<p>For example, I recently purchased fruit and dairy at Safeway in the western US, and after I had everything I wanted, I searched each item in the Safeway app, and it had coupons I could apply for $1.5 to $5 off per item.  The other week, my wife ran into the store to buy cream cheese.  While she did that, I searched the item in the app, and “clipped” a $2.30 discount, so what would have been $5.30 to someone that didn’t use the app was $3.<p>I am looking at the receipt now, and it is showing I would have spent $70 total if I did not apply the app discounts, but with the app discounts, I spent $53.<p>These price obfuscation tactics are seen in many businesses, making price tracking very difficult.</div><br/><div id="41173939" class="c"><input type="checkbox" id="c-41173939" checked=""/><div class="controls bullet"><span class="by">mcoliver</span><span>|</span><a href="#41173808">parent</a><span>|</span><label class="collapse" for="c-41173939">[-]</label><label class="expand" for="c-41173939">[5 more]</label></div><br/><div class="children"><div class="content">I wrote a chrome extension to help with this.  Clips all the coupons so you don&#x27;t have to do individual searches. Has resulted in some wild surprise savings when shopping.  www.throwlasso.com</div><br/><div id="41174055" class="c"><input type="checkbox" id="c-41174055" checked=""/><div class="controls bullet"><span class="by">Larrikin</span><span>|</span><a href="#41173808">root</a><span>|</span><a href="#41173939">parent</a><span>|</span><a href="#41174196">next</a><span>|</span><label class="collapse" for="c-41174055">[-]</label><label class="expand" for="c-41174055">[2 more]</label></div><br/><div class="children"><div class="content">This looks amazing. Do you have plans to support Firefox and other browsers?</div><br/><div id="41176436" class="c"><input type="checkbox" id="c-41176436" checked=""/><div class="controls bullet"><span class="by">mcoliver</span><span>|</span><a href="#41173808">root</a><span>|</span><a href="#41174055">parent</a><span>|</span><a href="#41174196">next</a><span>|</span><label class="collapse" for="c-41176436">[-]</label><label class="expand" for="c-41176436">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s published as a Firefox extension and you should be able to find it by searching for Lasso but I think I need to push the latest version and update the website. Thanks for the reminder.    Which other browsers would you like?</div><br/></div></div></div></div><div id="41174196" class="c"><input type="checkbox" id="c-41174196" checked=""/><div class="controls bullet"><span class="by">koolba</span><span>|</span><a href="#41173808">root</a><span>|</span><a href="#41173939">parent</a><span>|</span><a href="#41174055">prev</a><span>|</span><a href="#41176510">next</a><span>|</span><label class="collapse" for="c-41174196">[-]</label><label class="expand" for="c-41174196">[1 more]</label></div><br/><div class="children"><div class="content">Ha! I have the same thing as a bookmarklet for specific sites. It’s fun to watch it render the clicks.</div><br/></div></div><div id="41176510" class="c"><input type="checkbox" id="c-41176510" checked=""/><div class="controls bullet"><span class="by">lotsofpulp</span><span>|</span><a href="#41173808">root</a><span>|</span><a href="#41173939">parent</a><span>|</span><a href="#41174196">prev</a><span>|</span><label class="collapse" for="c-41176510">[-]</label><label class="expand" for="c-41176510">[1 more]</label></div><br/><div class="children"><div class="content">Wow!  This is amazing, thank you.  I usually use Safari, but will give it a try.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>