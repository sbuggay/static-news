<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1703235655988" as="style"/><link rel="stylesheet" href="styles.css?v=1703235655988"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://wasmer.io/posts/introducing-the-wasmer-js-sdk">Wasmer JavaScript SDK</a>Â <span class="domain">(<a href="https://wasmer.io">wasmer.io</a>)</span></div><div class="subtext"><span>the_duke</span> | <span>39 comments</span></div><br/><div><div id="38726585" class="c"><input type="checkbox" id="c-38726585" checked=""/><div class="controls bullet"><span class="by">grose</span><span>|</span><a href="#38729419">next</a><span>|</span><label class="collapse" for="c-38726585">[-]</label><label class="expand" for="c-38726585">[3 more]</label></div><br/><div class="children"><div class="content">I use @wasmer&#x2F;wasi for my npm package `trealla` (wasm port of a Prolog interpreter). For the most part I&#x27;m pretty happy with it, but the file size is quite large[1] (taking up around half my bundle size), and it looks like @wasmer&#x2F;sdk is even larger (wasmer.sh downloads a 1.7MB gzipped wasm binary that I assume is the runtime). It&#x27;s a tough sell to the frontend folks when my package is this big... currently I have my eye on jco[2] which I hope will be much lighter.<p>No shade intended towards the Wasmer folks, I appreciate the work they&#x27;ve done.<p>[1]: <a href="https:&#x2F;&#x2F;bundlephobia.com&#x2F;package&#x2F;@wasmer&#x2F;wasi@1.2.2" rel="nofollow noreferrer">https:&#x2F;&#x2F;bundlephobia.com&#x2F;package&#x2F;@wasmer&#x2F;wasi@1.2.2</a><p>[2]: <a href="https:&#x2F;&#x2F;github.com&#x2F;bytecodealliance&#x2F;jco">https:&#x2F;&#x2F;github.com&#x2F;bytecodealliance&#x2F;jco</a></div><br/><div id="38727475" class="c"><input type="checkbox" id="c-38727475" checked=""/><div class="controls bullet"><span class="by">syrusakbary</span><span>|</span><a href="#38726585">parent</a><span>|</span><a href="#38729419">next</a><span>|</span><label class="collapse" for="c-38727475">[-]</label><label class="expand" for="c-38727475">[2 more]</label></div><br/><div class="children"><div class="content">Thanks, I&#x27;m a big fan of your work in Trealla. Is true that there&#x27;s still room to improve sizes, as right now the bundle size is not ideal.<p>Hopefully it will not take long for Wasmer to serve packages with a minimum bundle size, stay tuned for updates!</div><br/><div id="38727672" class="c"><input type="checkbox" id="c-38727672" checked=""/><div class="controls bullet"><span class="by">grose</span><span>|</span><a href="#38726585">root</a><span>|</span><a href="#38727475">parent</a><span>|</span><a href="#38729419">next</a><span>|</span><label class="collapse" for="c-38727672">[-]</label><label class="expand" for="c-38727672">[1 more]</label></div><br/><div class="children"><div class="content">Thank you as well! I am looking forward to it, will keep an eye out &amp; would be happy to test. I know it&#x27;s difficult to keep the packages small, I struggle with it for sure (e.g. currently I use Wizer to optimize my startup times, but that also takes a significant chunk of the bundle).</div><br/></div></div></div></div></div></div><div id="38729419" class="c"><input type="checkbox" id="c-38729419" checked=""/><div class="controls bullet"><span class="by">mayyue</span><span>|</span><a href="#38726585">prev</a><span>|</span><a href="#38729177">next</a><span>|</span><label class="collapse" for="c-38729419">[-]</label><label class="expand" for="c-38729419">[4 more]</label></div><br/><div class="children"><div class="content">Can anyone get the actual JavaScript example posted to work with Node or any JS runtime for that matter?<p>I tried it with Bun and I feel weird showing examples that don&#x27;t seem to run.<p>&gt; $ npm install @wasmer&#x2F;sdk<p>```js
import { Wasmer } from &quot;@wasmer&#x2F;sdk&quot;;<p>let cowsay = Wasmer.fromRegistry(&quot;cowsay&quot;);
let instance = await cowsay.entrypoint.run({
  args: &quot;\&quot;Hello world\&quot;&quot;
  });
let output = await instance.wait();
```<p>I also tried to use the &lt;script&gt; approach and I cannot get it working on a local dev server due to CORS.</div><br/><div id="38729891" class="c"><input type="checkbox" id="c-38729891" checked=""/><div class="controls bullet"><span class="by">mayyue</span><span>|</span><a href="#38729419">parent</a><span>|</span><a href="#38729608">next</a><span>|</span><label class="collapse" for="c-38729891">[-]</label><label class="expand" for="c-38729891">[1 more]</label></div><br/><div class="children"><div class="content">Finally got this working. I was unable to get this to play well with Node or Bun but I did get the &lt;script&gt; approach working.<p>For the CORS with Vite you can just set a config like so in vite.config.ts<p>import { defineConfig } from &quot;vite&quot;;<p>export default defineConfig({
  server: {
    headers: {
      &quot;Cross-Origin-Embedder-Policy&quot;: &quot;require-corp&quot;,
      &quot;Cross-Origin-Opener-Policy&quot;: &quot;same-origin&quot;,
    },
  },
});<p>I was then able to just use this code example with one caveat (<a href="https:&#x2F;&#x2F;github.com&#x2F;wasmerio&#x2F;wasmer-js?tab=readme-ov-file#use-with-a-script-tag-without-bundler">https:&#x2F;&#x2F;github.com&#x2F;wasmerio&#x2F;wasmer-js?tab=readme-ov-file#use...</a>)<p>I had to update the SDK import with crossorigin=&quot;anonymous&quot;</div><br/></div></div><div id="38729608" class="c"><input type="checkbox" id="c-38729608" checked=""/><div class="controls bullet"><span class="by">mayyue</span><span>|</span><a href="#38729419">parent</a><span>|</span><a href="#38729891">prev</a><span>|</span><a href="#38729424">next</a><span>|</span><label class="collapse" for="c-38729608">[-]</label><label class="expand" for="c-38729608">[1 more]</label></div><br/><div class="children"><div class="content">Doing some more due diligence: <a href="https:&#x2F;&#x2F;docs.wasmer.io&#x2F;javascript-sdk">https:&#x2F;&#x2F;docs.wasmer.io&#x2F;javascript-sdk</a> &lt;-- this is the one source of truth on the docs.<p>Seems like they still have to update their stuff a fair few places...<p>Now I&#x27;m just struggling to use the package registry, none of the copy and paste examples have worked for me, but I&#x27;m sure I can figure it out. Will post here if I do.</div><br/></div></div><div id="38729424" class="c"><input type="checkbox" id="c-38729424" checked=""/><div class="controls bullet"><span class="by">mayyue</span><span>|</span><a href="#38729419">parent</a><span>|</span><a href="#38729608">prev</a><span>|</span><a href="#38729177">next</a><span>|</span><label class="collapse" for="c-38729424">[-]</label><label class="expand" for="c-38729424">[1 more]</label></div><br/><div class="children"><div class="content">Note: I tried it with both Bun and Node, neither worked.</div><br/></div></div></div></div><div id="38729177" class="c"><input type="checkbox" id="c-38729177" checked=""/><div class="controls bullet"><span class="by">5-</span><span>|</span><a href="#38729419">prev</a><span>|</span><a href="#38727318">next</a><span>|</span><label class="collapse" for="c-38729177">[-]</label><label class="expand" for="c-38729177">[5 more]</label></div><br/><div class="children"><div class="content">&gt; wasmer run wasmer&#x2F;ffmpeg -- -i - -f wav - &gt; audio.wav<p>rather off-topic, but i&#x27;ve noticed quite a few &quot;modern&quot; cli apps do the &quot;--&quot; thing and make it mandatory; am i alone in finding it weird that flag parsing does not automatically stop after the positional argument for a program that expects to accept a command line?<p>e.g. it&#x27;s<p><pre><code>  sudo -E env -v
</code></pre>
not<p><pre><code>  sudo -E -- env -v</code></pre>
or<p><pre><code>  sudo -E env -- -v
</code></pre>
(sudo stops parsing its own flags after &#x27;env&#x27;, the positional argument).</div><br/><div id="38730079" class="c"><input type="checkbox" id="c-38730079" checked=""/><div class="controls bullet"><span class="by">btown</span><span>|</span><a href="#38729177">parent</a><span>|</span><a href="#38730389">next</a><span>|</span><label class="collapse" for="c-38730079">[-]</label><label class="expand" for="c-38730079">[1 more]</label></div><br/><div class="children"><div class="content">AFAIK it&#x27;s all about trying to be POSIX-but-not-quite. Via the POSIX spec <a href="https:&#x2F;&#x2F;pubs.opengroup.org&#x2F;onlinepubs&#x2F;9699919799&#x2F;basedefs&#x2F;V1_chap12.html#tag_12_02" rel="nofollow noreferrer">https:&#x2F;&#x2F;pubs.opengroup.org&#x2F;onlinepubs&#x2F;9699919799&#x2F;basedefs&#x2F;V1...</a> :<p>&gt; The first -- argument that is not an option-argument should be accepted as a delimiter indicating the end of options. Any following arguments should be treated as operands, even if they begin with the &#x27;-&#x27; character.<p>&gt; All options should precede operands on the command line.<p>&gt; If an argument can be identified according to Guidelines 3 through 10 as an option, or as a group of options without option-arguments behind one &#x27;-&#x27; delimiter, then it should be treated as such.<p>I think that the rule &quot;all options should precede operands&quot; has been broken so much in practice (particularly since any subcommand must break it) that it may as well not be a rule. And if it&#x27;s not a rule, then the only way to unambiguously distinguish options from operands-that-start-with-a-dash-but-should-be-passed-verbatim-as-operands... is to require a double-dash.</div><br/></div></div><div id="38730389" class="c"><input type="checkbox" id="c-38730389" checked=""/><div class="controls bullet"><span class="by">Groxx</span><span>|</span><a href="#38729177">parent</a><span>|</span><a href="#38730079">prev</a><span>|</span><a href="#38729338">next</a><span>|</span><label class="collapse" for="c-38730389">[-]</label><label class="expand" for="c-38730389">[1 more]</label></div><br/><div class="children"><div class="content">If they accept <i>only one</i> positional argument, and do not allow flags after it, yeah that definitely seems weird.<p>Many of these are flag-position-agnostic though, and for that the -- is a very long-time standard pattern for either &quot;end of this command, forward the rest to the wrapped command&quot; or a list of files (to make a file named --help unambiguous).<p>Many. Definitely not all. CLI interfaces are even more varied than GUIs in many ways.</div><br/></div></div><div id="38729338" class="c"><input type="checkbox" id="c-38729338" checked=""/><div class="controls bullet"><span class="by">jchw</span><span>|</span><a href="#38729177">parent</a><span>|</span><a href="#38730389">prev</a><span>|</span><a href="#38729804">next</a><span>|</span><label class="collapse" for="c-38729338">[-]</label><label class="expand" for="c-38729338">[1 more]</label></div><br/><div class="children"><div class="content">I believe this originates from GNU argument syntax and is commonly implemented by software supporting GNU-style long options. Terminating after the first argument IIRC is what software implementing BSD style argument parsing usually does. OTOH though, I am sure there is software that implements hybrids of both approaches. I don&#x27;t think any approach is particularly &quot;weird&quot; really, both of them make perfect sense in isolation.<p>edit: relevant GNU docs <a href="https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;libc&#x2F;manual&#x2F;html_node&#x2F;Argument-Syntax.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;libc&#x2F;manual&#x2F;html_node&#x2F;Argument-...</a></div><br/></div></div><div id="38729804" class="c"><input type="checkbox" id="c-38729804" checked=""/><div class="controls bullet"><span class="by">semiquaver</span><span>|</span><a href="#38729177">parent</a><span>|</span><a href="#38729338">prev</a><span>|</span><a href="#38727318">next</a><span>|</span><label class="collapse" for="c-38729804">[-]</label><label class="expand" for="c-38729804">[1 more]</label></div><br/><div class="children"><div class="content">Maybe more apps should do like git and make `--end-of-options` the official long form of `--`<p><a href="https:&#x2F;&#x2F;git-scm.com&#x2F;docs&#x2F;gitcli" rel="nofollow noreferrer">https:&#x2F;&#x2F;git-scm.com&#x2F;docs&#x2F;gitcli</a></div><br/></div></div></div></div><div id="38727318" class="c"><input type="checkbox" id="c-38727318" checked=""/><div class="controls bullet"><span class="by">solarkraft</span><span>|</span><a href="#38729177">prev</a><span>|</span><a href="#38725634">next</a><span>|</span><label class="collapse" for="c-38727318">[-]</label><label class="expand" for="c-38727318">[1 more]</label></div><br/><div class="children"><div class="content">One interesting thing their examples seem to offer is a pre-configured Vite&#x2F;Rust toolchain. This is something still lacking in official Rust&#x2F;WASM examples and something I had to put quite some trial and error into to get working (with auto-reloading and such).</div><br/></div></div><div id="38725634" class="c"><input type="checkbox" id="c-38725634" checked=""/><div class="controls bullet"><span class="by">mgomez</span><span>|</span><a href="#38727318">prev</a><span>|</span><a href="#38728077">next</a><span>|</span><label class="collapse" for="c-38725634">[-]</label><label class="expand" for="c-38725634">[10 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve yet to dip my toes into Wasm. This might push me to finally get going. Based on a quick search, Wasmer and Wasmtime appear to be the two most popular runtimes with the latter being backed by some big names (via the Bytecode Alliance). Wasmer seems to push new features first. Can someone share what their experience was like with either or why they chose one over the other?</div><br/><div id="38726060" class="c"><input type="checkbox" id="c-38726060" checked=""/><div class="controls bullet"><span class="by">Conlectus</span><span>|</span><a href="#38725634">parent</a><span>|</span><a href="#38726004">next</a><span>|</span><label class="collapse" for="c-38726060">[-]</label><label class="expand" for="c-38726060">[7 more]</label></div><br/><div class="children"><div class="content">In my experience Wasmer is generally disliked by the rest of the WASM community. Thereâs a long list of reasons for this, including attempting to copyright the term WASM and pushing their own proprietary specs and calling them âstandardsâ while not implementing  existing standards.<p>Their main benefit, from what I can tell, is their âretargetableâ compiler architecture, but Wasmtime is improving here as well. Wasmtime is also generally faster at implementing standards.</div><br/><div id="38726323" class="c"><input type="checkbox" id="c-38726323" checked=""/><div class="controls bullet"><span class="by">syrusakbary</span><span>|</span><a href="#38725634">root</a><span>|</span><a href="#38726060">parent</a><span>|</span><a href="#38726004">next</a><span>|</span><label class="collapse" for="c-38726323">[-]</label><label class="expand" for="c-38726323">[6 more]</label></div><br/><div class="children"><div class="content">I wish to live the day where we can incentivize one ecosystem without having to trash another.<p>This is not a zero-sum game.<p>If you find Wasmer useful, use it! If you donât and you prefer others, feel free to use them. There are plenty of choices.<p>Happy holidays!</div><br/><div id="38727019" class="c"><input type="checkbox" id="c-38727019" checked=""/><div class="controls bullet"><span class="by">theplatman</span><span>|</span><a href="#38725634">root</a><span>|</span><a href="#38726323">parent</a><span>|</span><a href="#38730433">next</a><span>|</span><label class="collapse" for="c-38727019">[-]</label><label class="expand" for="c-38727019">[4 more]</label></div><br/><div class="children"><div class="content">I would say that this landing page on your companyâs website is unnecessarily trashing wasmtime in the headline<p><a href="https:&#x2F;&#x2F;wasmer.io&#x2F;wasmer-vs-wasmtime">https:&#x2F;&#x2F;wasmer.io&#x2F;wasmer-vs-wasmtime</a></div><br/><div id="38727207" class="c"><input type="checkbox" id="c-38727207" checked=""/><div class="controls bullet"><span class="by">k__</span><span>|</span><a href="#38725634">root</a><span>|</span><a href="#38727019">parent</a><span>|</span><a href="#38727212">next</a><span>|</span><label class="collapse" for="c-38727207">[-]</label><label class="expand" for="c-38727207">[1 more]</label></div><br/><div class="children"><div class="content">Preaching water, drinking wine.<p>Classic.</div><br/></div></div><div id="38727212" class="c"><input type="checkbox" id="c-38727212" checked=""/><div class="controls bullet"><span class="by">syrusakbary</span><span>|</span><a href="#38725634">root</a><span>|</span><a href="#38727019">parent</a><span>|</span><a href="#38727207">prev</a><span>|</span><a href="#38727378">next</a><span>|</span><label class="collapse" for="c-38727212">[-]</label><label class="expand" for="c-38727212">[1 more]</label></div><br/><div class="children"><div class="content">No intend of trashing (in marketing pages titles tend to be more flashy).<p>In any case I just updated it. Happy holidays!</div><br/></div></div><div id="38727378" class="c"><input type="checkbox" id="c-38727378" checked=""/><div class="controls bullet"><span class="by">aleksiy123</span><span>|</span><a href="#38725634">root</a><span>|</span><a href="#38727019">parent</a><span>|</span><a href="#38727212">prev</a><span>|</span><a href="#38730433">next</a><span>|</span><label class="collapse" for="c-38727378">[-]</label><label class="expand" for="c-38727378">[1 more]</label></div><br/><div class="children"><div class="content">Is it just me or is it weird to show a faster startup speed as a bigger bar?<p>I thought it was slower until I saw the 1000x. Even 1000x seems kinda meaningless.</div><br/></div></div></div></div><div id="38730433" class="c"><input type="checkbox" id="c-38730433" checked=""/><div class="controls bullet"><span class="by">throwawaysugar</span><span>|</span><a href="#38725634">root</a><span>|</span><a href="#38726323">parent</a><span>|</span><a href="#38727019">prev</a><span>|</span><a href="#38726004">next</a><span>|</span><label class="collapse" for="c-38730433">[-]</label><label class="expand" for="c-38730433">[1 more]</label></div><br/><div class="children"><div class="content">None of those are actual answers to the criticism posted by the parent, so it&#x27;s hard to really care even if it&#x27;s wrapped around a loving tone.<p>Happy holidays to you as well!</div><br/></div></div></div></div></div></div><div id="38726004" class="c"><input type="checkbox" id="c-38726004" checked=""/><div class="controls bullet"><span class="by">JoshTriplett</span><span>|</span><a href="#38725634">parent</a><span>|</span><a href="#38726060">prev</a><span>|</span><a href="#38731216">next</a><span>|</span><label class="collapse" for="c-38726004">[-]</label><label class="expand" for="c-38726004">[1 more]</label></div><br/><div class="children"><div class="content">wasmtime is closely aligned with where active development is happening in WebAssembly, WASI, and similar standards. You can expect that as the folks working on WebAssembly itself establish support for (for instance) async, or GC, or components and linking, or other new APIs, wasmtime is where those are going to show up first and be aligned with the rest of the industry. It&#x27;s easy to embed and reasonably easy to expose your own APIs through, so that you can use it for plugins.<p>The community is also friendly and inviting for folks trying to get started.</div><br/></div></div><div id="38731216" class="c"><input type="checkbox" id="c-38731216" checked=""/><div class="controls bullet"><span class="by">marcus_holmes</span><span>|</span><a href="#38725634">parent</a><span>|</span><a href="#38726004">prev</a><span>|</span><a href="#38728077">next</a><span>|</span><label class="collapse" for="c-38731216">[-]</label><label class="expand" for="c-38731216">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m using it for my latest project - writing a cashflow calculator and graphing tool. Really cool to be able to write all the business and graphing logic in Go, then share it with the front end via WASM, so I don&#x27;t need to implement the same logic in both Go and JS separately.<p>Things I learned: TinyGo works to get the package size down. Translating values between JS and Go is straightforward (with a lot of boilerplate), but trying to do the JSON dance wasn&#x27;t worth it - too brittle. Creating SVG in Go and then using it as the innerHTML for a div actually works really well :)<p>Edit: to be clear, I&#x27;m using Go&#x27;s WASM implementation, not Wasmer</div><br/></div></div></div></div><div id="38728077" class="c"><input type="checkbox" id="c-38728077" checked=""/><div class="controls bullet"><span class="by">mattlondon</span><span>|</span><a href="#38725634">prev</a><span>|</span><a href="#38726197">next</a><span>|</span><label class="collapse" for="c-38728077">[-]</label><label class="expand" for="c-38728077">[5 more]</label></div><br/><div class="children"><div class="content">Can anyone confirm if this can do proper TCP sockets?  Not Websockets, but bonafide actual sockets?<p>That will open up a lot of use cases (at least for me)<p>It seems to say it can run <i>any</i> wasix, so yes?  But GitHub page says no networking, so no?</div><br/><div id="38728254" class="c"><input type="checkbox" id="c-38728254" checked=""/><div class="controls bullet"><span class="by">jeffparsons</span><span>|</span><a href="#38728077">parent</a><span>|</span><a href="#38728107">next</a><span>|</span><label class="collapse" for="c-38728254">[-]</label><label class="expand" for="c-38728254">[1 more]</label></div><br/><div class="children"><div class="content">One way to approach this would be to interpose all calls to the TCP interfaces (pretty straightforward with Wasm Components), and tunnel it using Websockets (or whatever) to a server that can make the actual TCP connections on your behalf. So the application running in Wasm doesn&#x27;t know any different, at least.<p>I guess that&#x27;s not quite what you wanted, but browsers don&#x27;t allow making arbitrary direct TCP connections, so in general I don&#x27;t think there _is_ a way to do what you wanted.</div><br/></div></div><div id="38728107" class="c"><input type="checkbox" id="c-38728107" checked=""/><div class="controls bullet"><span class="by">syrusakbary</span><span>|</span><a href="#38728077">parent</a><span>|</span><a href="#38728254">prev</a><span>|</span><a href="#38728929">next</a><span>|</span><label class="collapse" for="c-38728107">[-]</label><label class="expand" for="c-38728107">[2 more]</label></div><br/><div class="children"><div class="content">In the browser not yet, but support for TCP is on the roadmap! Feel free to email me at syrus@wasmer.io so I can keep you in the loop for the first trials :)</div><br/><div id="38730052" class="c"><input type="checkbox" id="c-38730052" checked=""/><div class="controls bullet"><span class="by">BHSPitMonkey</span><span>|</span><a href="#38728077">root</a><span>|</span><a href="#38728107">parent</a><span>|</span><a href="#38728929">next</a><span>|</span><label class="collapse" for="c-38730052">[-]</label><label class="expand" for="c-38730052">[1 more]</label></div><br/><div class="children"><div class="content">How could you add this if the browsers don&#x27;t support it outright? Unless you mean faking it over web sockets to allow compiled applications to just think they&#x27;re using TCP (in which case you still need a relay server)?</div><br/></div></div></div></div><div id="38728929" class="c"><input type="checkbox" id="c-38728929" checked=""/><div class="controls bullet"><span class="by">esafak</span><span>|</span><a href="#38728077">parent</a><span>|</span><a href="#38728107">prev</a><span>|</span><a href="#38726197">next</a><span>|</span><label class="collapse" for="c-38728929">[-]</label><label class="expand" for="c-38728929">[1 more]</label></div><br/><div class="children"><div class="content">Use cases like what?</div><br/></div></div></div></div><div id="38726197" class="c"><input type="checkbox" id="c-38726197" checked=""/><div class="controls bullet"><span class="by">unsupp0rted</span><span>|</span><a href="#38728077">prev</a><span>|</span><a href="#38725866">next</a><span>|</span><label class="collapse" for="c-38726197">[-]</label><label class="expand" for="c-38726197">[2 more]</label></div><br/><div class="children"><div class="content">Similar to ffmpeg, I wonder if I can have the userâs browser run a puppeteer instance in Wasmer?<p>E.g get it to generate a PDF for the user to âdownloadâ</div><br/><div id="38726386" class="c"><input type="checkbox" id="c-38726386" checked=""/><div class="controls bullet"><span class="by">syrusakbary</span><span>|</span><a href="#38726197">parent</a><span>|</span><a href="#38725866">next</a><span>|</span><label class="collapse" for="c-38726386">[-]</label><label class="expand" for="c-38726386">[1 more]</label></div><br/><div class="children"><div class="content">That would be awesome! Although there are still a few edges to resolve to be able to run a full headless browser with Wasmer.<p>It should be possible though, see: <a href="http:&#x2F;&#x2F;trevorlinton.github.io&#x2F;" rel="nofollow noreferrer">http:&#x2F;&#x2F;trevorlinton.github.io&#x2F;</a></div><br/></div></div></div></div><div id="38725866" class="c"><input type="checkbox" id="c-38725866" checked=""/><div class="controls bullet"><span class="by">noduerme</span><span>|</span><a href="#38726197">prev</a><span>|</span><a href="#38729744">next</a><span>|</span><label class="collapse" for="c-38725866">[-]</label><label class="expand" for="c-38725866">[5 more]</label></div><br/><div class="children"><div class="content">&gt;&gt; <i>we were able to allow UNIX-like threading to run via JS Workers by reusing the shared memory from the main WebAssembly process and notifying the memory upon changes (using Wasm notify&#x2F;wait syntax).</i><p>This left me scratching my head. How are JS workers sharing memory with the WASM process?</div><br/><div id="38726081" class="c"><input type="checkbox" id="c-38726081" checked=""/><div class="controls bullet"><span class="by">kevingadd</span><span>|</span><a href="#38725866">parent</a><span>|</span><a href="#38726929">next</a><span>|</span><label class="collapse" for="c-38726081">[-]</label><label class="expand" for="c-38726081">[1 more]</label></div><br/><div class="children"><div class="content">JS has an API called &quot;SharedArrayBuffer&quot; that allows sharing memory between processes or threads (with the aid of the host)</div><br/></div></div><div id="38726929" class="c"><input type="checkbox" id="c-38726929" checked=""/><div class="controls bullet"><span class="by">temp123789246</span><span>|</span><a href="#38725866">parent</a><span>|</span><a href="#38726081">prev</a><span>|</span><a href="#38729744">next</a><span>|</span><label class="collapse" for="c-38726929">[-]</label><label class="expand" for="c-38726929">[3 more]</label></div><br/><div class="children"><div class="content">I wonder how much of a perf hit a normal multithreaded Unix application would take because of this model. 
Are there any data points around the multi-threading perf here?</div><br/><div id="38727601" class="c"><input type="checkbox" id="c-38727601" checked=""/><div class="controls bullet"><span class="by">syrusakbary</span><span>|</span><a href="#38725866">root</a><span>|</span><a href="#38726929">parent</a><span>|</span><a href="#38727571">next</a><span>|</span><label class="collapse" for="c-38727601">[-]</label><label class="expand" for="c-38727601">[1 more]</label></div><br/><div class="children"><div class="content">Usually it adds an extra 10-25% of overhead when the WASIX program uses systemcalls that require unwind&#x2F;rewind functionality (this is for fork and subprocesses mainly, the multithreaded ones doesn&#x27;t require asyncify and as such should not experience a performance hit)</div><br/></div></div><div id="38727571" class="c"><input type="checkbox" id="c-38727571" checked=""/><div class="controls bullet"><span class="by">chatmasta</span><span>|</span><a href="#38725866">root</a><span>|</span><a href="#38726929">parent</a><span>|</span><a href="#38727601">prev</a><span>|</span><a href="#38729744">next</a><span>|</span><label class="collapse" for="c-38727571">[-]</label><label class="expand" for="c-38727571">[1 more]</label></div><br/><div class="children"><div class="content">I believe JS workers are actually implemented as threads, so the performance overhead might not be as bad as you&#x27;d expect.</div><br/></div></div></div></div></div></div><div id="38729744" class="c"><input type="checkbox" id="c-38729744" checked=""/><div class="controls bullet"><span class="by">lxe</span><span>|</span><a href="#38725866">prev</a><span>|</span><label class="collapse" for="c-38729744">[-]</label><label class="expand" for="c-38729744">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;m getting lost in all this.<p>So webassembly is a VM for the browser.<p>You can compile non-browsery things, like ffmpeg, into webassembly to run on the browser. You usually use emscripten compiler to do that.<p>Wasmer is a way to run webassembly outside the browser, making portable apps.<p>Now, wasmer is shipping an SDK for browsers... to bring webassembly back to the browsers?<p>So it&#x27;s an emscripten alternative, right?</div><br/><div id="38731474" class="c"><input type="checkbox" id="c-38731474" checked=""/><div class="controls bullet"><span class="by">nmfisher</span><span>|</span><a href="#38729744">parent</a><span>|</span><a href="#38730081">next</a><span>|</span><label class="collapse" for="c-38731474">[-]</label><label class="expand" for="c-38731474">[1 more]</label></div><br/><div class="children"><div class="content">I haven&#x27;t touched wasmer specifically, but as a wasm noob who&#x27;s been playing with dart2wasm&#x2F;emscripten recently, I&#x27;ll try and explain as best I can. The ecosystem is a bit messy, so it can be difficult to wrap your head around. If I&#x27;ve got anything wrong, someone please jump in and correct.<p>wasm is just a bytecode assembly format - you can compile something like &quot;int a = 1; int b = 2; return a+b&quot;, but to actually do anything interesting you usually need some kind of runtime environment where you can spawn threads, access a filesystem, print to stdout, etc etc. WASI, for example, is an interface for accessing system libraries via wasm; runtimes like wasmer&#x2F;wasmtime (for native) or v8 (Chromium) will expose their own implementations of WASI. WASIX is wasmer&#x27;s own extension for WASI (a point of some contention in the wasm community).<p>Running wasm in a browser, though, still requires some manual setup with Javascript, along with crossing your fingers that the browser runtime actually supports the system calls for whatever you&#x27;ve compiled.<p>I guess what wasmer has created here is a Javascript SDK so you can:<p>1) easily download wasm binaries from a central registry<p>2) ensure those binaries actually run as intended in a browser environment<p>3) avoid the manual setup Javascript code currently needed to run wasm modules.<p>emscripten is a (non-WASI) runtime + compiler so this isn&#x27;t an exact alternative to emscripten (I guess in theory you could compile something via emscripten, publish to the wasmer registry, then consume solely in Javascript). It does, however, replace the manual JS wiring you need to do to run emscripten-compiled binaries in the browser.</div><br/></div></div></div></div></div></div></div></div></div></body></html>