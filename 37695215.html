<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1695978061139" as="style"/><link rel="stylesheet" href="styles.css?v=1695978061139"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.arp242.net/yaml-config.html">YAML: Probably not so great after all</a> <span class="domain">(<a href="https://www.arp242.net">www.arp242.net</a>)</span></div><div class="subtext"><span>calpaterson</span> | <span>31 comments</span></div><br/><div><div id="37700688" class="c"><input type="checkbox" id="c-37700688" checked=""/><div class="controls bullet"><span class="by">eviks</span><span>|</span><a href="#37700990">next</a><span>|</span><label class="collapse" for="c-37700688">[-]</label><label class="expand" for="c-37700688">[1 more]</label></div><br/><div class="children"><div class="content">&gt; You’ll need to scroll up, but then you need to keep track of the indentation, which can be pretty hard even with indentation guides,<p>Or you can collapse all the groups in your text editor and usually easily see what level you&#x27;re at</div><br/></div></div><div id="37700990" class="c"><input type="checkbox" id="c-37700990" checked=""/><div class="controls bullet"><span class="by">luzifer42</span><span>|</span><a href="#37700688">prev</a><span>|</span><a href="#37697510">next</a><span>|</span><label class="collapse" for="c-37700990">[-]</label><label class="expand" for="c-37700990">[1 more]</label></div><br/><div class="children"><div class="content">One big issue is that if a YAML file gets truncated for some reason, parsers generally don&#x27;t complain.</div><br/></div></div><div id="37697510" class="c"><input type="checkbox" id="c-37697510" checked=""/><div class="controls bullet"><span class="by">andrei_says_</span><span>|</span><a href="#37700990">prev</a><span>|</span><a href="#37699797">next</a><span>|</span><label class="collapse" for="c-37697510">[-]</label><label class="expand" for="c-37697510">[9 more]</label></div><br/><div class="children"><div class="content">Yes, it’s not perfect.<p>Still, totally fine for pretty much everything I’ve needed it for.<p>Maybe I&#x27;m just not that ambitious and haven’t hit any of the corner cases pointed out in the article.<p>Have been using it as a html forms definition language for 7 years - with great success.<p>So, yes, maybe not so great, but also not too bad.</div><br/><div id="37700031" class="c"><input type="checkbox" id="c-37700031" checked=""/><div class="controls bullet"><span class="by">funcDropShadow</span><span>|</span><a href="#37697510">parent</a><span>|</span><a href="#37699797">next</a><span>|</span><label class="collapse" for="c-37700031">[-]</label><label class="expand" for="c-37700031">[8 more]</label></div><br/><div class="children"><div class="content">&gt; Still, totally fine for pretty much everything I’ve needed it for.<p>Try writing non-trivial multi-line bash snippets for Gitlab CI in yaml. These change your opinion very fast.</div><br/><div id="37700961" class="c"><input type="checkbox" id="c-37700961" checked=""/><div class="controls bullet"><span class="by">vb-8448</span><span>|</span><a href="#37697510">root</a><span>|</span><a href="#37700031">parent</a><span>|</span><a href="#37700892">next</a><span>|</span><label class="collapse" for="c-37700961">[-]</label><label class="expand" for="c-37700961">[1 more]</label></div><br/><div class="children"><div class="content">I wrote some non-trivial multi-line bash snippets for Gitlab CI in yaml and didn&#x27;t find anything annoying. Any example that gave you problem?</div><br/></div></div><div id="37700892" class="c"><input type="checkbox" id="c-37700892" checked=""/><div class="controls bullet"><span class="by">andreareina</span><span>|</span><a href="#37697510">root</a><span>|</span><a href="#37700031">parent</a><span>|</span><a href="#37700961">prev</a><span>|</span><a href="#37700285">next</a><span>|</span><label class="collapse" for="c-37700892">[-]</label><label class="expand" for="c-37700892">[1 more]</label></div><br/><div class="children"><div class="content">I have to look them up every. time. but YAML has a sigil for multi-line strings and lets you choose between strip&#x2F;preserve newlines&#x2F;leading whitespace.<p>I still don&#x27;t like YAML though</div><br/></div></div><div id="37700285" class="c"><input type="checkbox" id="c-37700285" checked=""/><div class="controls bullet"><span class="by">andrei_says_</span><span>|</span><a href="#37697510">root</a><span>|</span><a href="#37700031">parent</a><span>|</span><a href="#37700892">prev</a><span>|</span><a href="#37700938">next</a><span>|</span><label class="collapse" for="c-37700285">[-]</label><label class="expand" for="c-37700285">[4 more]</label></div><br/><div class="children"><div class="content">1. “ writing non-trivial multi-line bash snippets for Gitlab CI” sounds intimidating even without the “in yaml” part. I don’t want to do it.<p>2. “In yaml” could be a fun way to end all kinds of sentences describing challenging tasks ;)</div><br/><div id="37700375" class="c"><input type="checkbox" id="c-37700375" checked=""/><div class="controls bullet"><span class="by">kunley</span><span>|</span><a href="#37697510">root</a><span>|</span><a href="#37700285">parent</a><span>|</span><a href="#37700938">next</a><span>|</span><label class="collapse" for="c-37700375">[-]</label><label class="expand" for="c-37700375">[3 more]</label></div><br/><div class="children"><div class="content">You don&#x27;t want do do it, erm, but maybe people <i>need</i> to do it, because, huh, it&#x27;s not an unreasonable thing to be put in the CI, right?</div><br/><div id="37700886" class="c"><input type="checkbox" id="c-37700886" checked=""/><div class="controls bullet"><span class="by">maccard</span><span>|</span><a href="#37697510">root</a><span>|</span><a href="#37700375">parent</a><span>|</span><a href="#37700938">next</a><span>|</span><label class="collapse" for="c-37700886">[-]</label><label class="expand" for="c-37700886">[2 more]</label></div><br/><div class="children"><div class="content">Every CI project I&#x27;ve maintained in the last 10 years has dispatched the logic to a script stored in version control.</div><br/><div id="37700997" class="c"><input type="checkbox" id="c-37700997" checked=""/><div class="controls bullet"><span class="by">kunley</span><span>|</span><a href="#37697510">root</a><span>|</span><a href="#37700886">parent</a><span>|</span><a href="#37700938">next</a><span>|</span><label class="collapse" for="c-37700997">[-]</label><label class="expand" for="c-37700997">[1 more]</label></div><br/><div class="children"><div class="content">YMMV.<p>Other part of the world might not like too many levels of indirection, and would consider <i>their</i> approach a good practice.</div><br/></div></div></div></div></div></div></div></div><div id="37700938" class="c"><input type="checkbox" id="c-37700938" checked=""/><div class="controls bullet"><span class="by">npn</span><span>|</span><a href="#37697510">root</a><span>|</span><a href="#37700031">parent</a><span>|</span><a href="#37700285">prev</a><span>|</span><a href="#37699797">next</a><span>|</span><label class="collapse" for="c-37700938">[-]</label><label class="expand" for="c-37700938">[1 more]</label></div><br/><div class="children"><div class="content">because a sane people would delegate the task to a separated script instead.</div><br/></div></div></div></div></div></div><div id="37699797" class="c"><input type="checkbox" id="c-37699797" checked=""/><div class="controls bullet"><span class="by">pragmatick</span><span>|</span><a href="#37697510">prev</a><span>|</span><a href="#37697747">next</a><span>|</span><label class="collapse" for="c-37699797">[-]</label><label class="expand" for="c-37699797">[1 more]</label></div><br/><div class="children"><div class="content">Off topic but the weird ligature in &quot;especially&quot; really threw me off. Strange choice.</div><br/></div></div><div id="37697747" class="c"><input type="checkbox" id="c-37697747" checked=""/><div class="controls bullet"><span class="by">bagasme</span><span>|</span><a href="#37699797">prev</a><span>|</span><a href="#37697989">next</a><span>|</span><label class="collapse" for="c-37697747">[-]</label><label class="expand" for="c-37697747">[5 more]</label></div><br/><div class="children"><div class="content">After I digged into related articles on the link, it seems like the holy grail
to the config files dilemma is to just hard-code desired settings in the
source code. However, it also means that users (especially using binary
packages) are stuck with settings from the distro.<p>If you truly needs user-configurable setting, maybe TOML is for you.</div><br/><div id="37700931" class="c"><input type="checkbox" id="c-37700931" checked=""/><div class="controls bullet"><span class="by">atoav</span><span>|</span><a href="#37697747">parent</a><span>|</span><a href="#37697786">next</a><span>|</span><label class="collapse" for="c-37700931">[-]</label><label class="expand" for="c-37700931">[1 more]</label></div><br/><div class="children"><div class="content">I wrote a &quot;common-config&quot; module for an internal python project, that works like this:<p>1. You hardcode settings in python using a multiline TOML string<p>2. Users <i>may</i> have multiple configs at the usual config folders<p>3. The configs override the hardcoded defaults wherever fields are present<p>4. Configs override each other in order of directories (when we are talking about xdg-directories) and within them in alphabetical order wherever fields are present<p>This allows you to have good defaults, override some fields at will and add something like 99-debug.toml that you can just rename to 99-debug.toml.invalid if you don&#x27;t need it anymore. The module also provides an install&#x2F;edit cli and functions for printing the final resulting config and which configs it read on the way to that final config. At some point I have to publish it.<p>If you need anything more than TOML because your use case is so crazy, then consider either writing a domain specific language or use a scripting language like lua, python, js, ...</div><br/></div></div><div id="37697786" class="c"><input type="checkbox" id="c-37697786" checked=""/><div class="controls bullet"><span class="by">__blockcipher__</span><span>|</span><a href="#37697747">parent</a><span>|</span><a href="#37700931">prev</a><span>|</span><a href="#37700136">next</a><span>|</span><label class="collapse" for="c-37697786">[-]</label><label class="expand" for="c-37697786">[2 more]</label></div><br/><div class="children"><div class="content">&gt; it seems like the holy grail to the config files dilemma is to just hard-code desired settings in the source code<p>That is…not remotely the holy grail. You’re really throwing out the baby with the bathwater on that one. User-configurable settings are important for many, many applications.<p>In the narrow case that you’re working on, say, a monorepo for closed-source code that only runs on your own servers, maybe in source code is fine provided there’s no host-level differences that would require a config file.<p>But for any other circumstance…yeah you need some type of configurability.</div><br/><div id="37699040" class="c"><input type="checkbox" id="c-37699040" checked=""/><div class="controls bullet"><span class="by">amluto</span><span>|</span><a href="#37697747">root</a><span>|</span><a href="#37697786">parent</a><span>|</span><a href="#37700136">next</a><span>|</span><label class="collapse" for="c-37699040">[-]</label><label class="expand" for="c-37699040">[1 more]</label></div><br/><div class="children"><div class="content">Even with a single company closed source monorepo, sometimes it’s useful to change settings without a restart and redeploy. And sometimes one runs more than one instance of the same code.</div><br/></div></div></div></div><div id="37700136" class="c"><input type="checkbox" id="c-37700136" checked=""/><div class="controls bullet"><span class="by">deepsun</span><span>|</span><a href="#37697747">parent</a><span>|</span><a href="#37697786">prev</a><span>|</span><a href="#37697989">next</a><span>|</span><label class="collapse" for="c-37700136">[-]</label><label class="expand" for="c-37700136">[1 more]</label></div><br/><div class="children"><div class="content">Why not both? You can write config-looking Kotlin code so that user won&#x27;t even realize it&#x27;s Kotlin. But type-safe and with auto-completion.<p>Something like<p><pre><code>    server {
      port = 8080
      addr = &quot;127.0.0.1&quot;
      development = true
    }
    
    db {
      url = $DB_URL
      user = &quot;app&quot;
      password = include(&quot;.secrets&#x2F;dbpass.txt&quot;)
    }</code></pre></div><br/></div></div></div></div><div id="37697989" class="c"><input type="checkbox" id="c-37697989" checked=""/><div class="controls bullet"><span class="by">c7DJTLrn</span><span>|</span><a href="#37697747">prev</a><span>|</span><a href="#37700016">next</a><span>|</span><label class="collapse" for="c-37697989">[-]</label><label class="expand" for="c-37697989">[4 more]</label></div><br/><div class="children"><div class="content">90% of the people using YAML are not using 90% of the features in the spec. Somebody should make a subset of YAML with just the essentials while still remaining compatible. Maybe fix some of the type ambiguity stuff as well.</div><br/><div id="37698368" class="c"><input type="checkbox" id="c-37698368" checked=""/><div class="controls bullet"><span class="by">NortySpock</span><span>|</span><a href="#37697989">parent</a><span>|</span><a href="#37700016">next</a><span>|</span><label class="collapse" for="c-37698368">[-]</label><label class="expand" for="c-37698368">[3 more]</label></div><br/><div class="children"><div class="content">May I suggest StrictYAML?<p><a href="https:&#x2F;&#x2F;hitchdev.com&#x2F;strictyaml&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;hitchdev.com&#x2F;strictyaml&#x2F;</a></div><br/><div id="37698971" class="c"><input type="checkbox" id="c-37698971" checked=""/><div class="controls bullet"><span class="by">tipiirai</span><span>|</span><a href="#37697989">root</a><span>|</span><a href="#37698368">parent</a><span>|</span><a href="#37700016">next</a><span>|</span><label class="collapse" for="c-37698971">[-]</label><label class="expand" for="c-37698971">[2 more]</label></div><br/><div class="children"><div class="content">Strict YAML looks great! Would love to see this becoming a standard and then get implementations for other languages. Not just Python.</div><br/><div id="37701063" class="c"><input type="checkbox" id="c-37701063" checked=""/><div class="controls bullet"><span class="by">Ygg2</span><span>|</span><a href="#37697989">root</a><span>|</span><a href="#37698971">parent</a><span>|</span><a href="#37700016">next</a><span>|</span><label class="collapse" for="c-37701063">[-]</label><label class="expand" for="c-37701063">[1 more]</label></div><br/><div class="children"><div class="content">strictYAML also prohibits flow collections, which is used often.</div><br/></div></div></div></div></div></div></div></div><div id="37700016" class="c"><input type="checkbox" id="c-37700016" checked=""/><div class="controls bullet"><span class="by">deafpolygon</span><span>|</span><a href="#37697989">prev</a><span>|</span><a href="#37698510">next</a><span>|</span><label class="collapse" for="c-37700016">[-]</label><label class="expand" for="c-37700016">[1 more]</label></div><br/><div class="children"><div class="content">For simple, straightforward configs, it&#x27;s probably better to use TOML. Anything more complicated can be shunted to XML. Just define a spec (schema) for it and you&#x27;re good to go. Especially if that is going to be used as a data exchange for other applications or uses.</div><br/></div></div><div id="37698510" class="c"><input type="checkbox" id="c-37698510" checked=""/><div class="controls bullet"><span class="by">doublepg23</span><span>|</span><a href="#37700016">prev</a><span>|</span><a href="#37698475">next</a><span>|</span><label class="collapse" for="c-37698510">[-]</label><label class="expand" for="c-37698510">[2 more]</label></div><br/><div class="children"><div class="content">I think we should use X12, personally.</div><br/><div id="37700181" class="c"><input type="checkbox" id="c-37700181" checked=""/><div class="controls bullet"><span class="by">triyambakam</span><span>|</span><a href="#37698510">parent</a><span>|</span><a href="#37698475">next</a><span>|</span><label class="collapse" for="c-37700181">[-]</label><label class="expand" for="c-37700181">[1 more]</label></div><br/><div class="children"><div class="content">I wrote an not very peformant parser for X12 once, if you mean the medical data format.</div><br/></div></div></div></div><div id="37698475" class="c"><input type="checkbox" id="c-37698475" checked=""/><div class="controls bullet"><span class="by">unethical_ban</span><span>|</span><a href="#37698510">prev</a><span>|</span><a href="#37697509">next</a><span>|</span><label class="collapse" for="c-37698475">[-]</label><label class="expand" for="c-37698475">[4 more]</label></div><br/><div class="children"><div class="content">Whitespace significance is awful. After some time questioning why I have fallen out of love with python, I realized that is part of the answer.</div><br/><div id="37701016" class="c"><input type="checkbox" id="c-37701016" checked=""/><div class="controls bullet"><span class="by">ajsnigrutin</span><span>|</span><a href="#37698475">parent</a><span>|</span><a href="#37700093">next</a><span>|</span><label class="collapse" for="c-37701016">[-]</label><label class="expand" for="c-37701016">[1 more]</label></div><br/><div class="children"><div class="content">Yep, whitespace should be used to make things &quot;pretty&quot;, and some kind of &#x27;tidy&#x27; program should be able to do it automatically. Counting the spaces and&#x2F;or tabs and&#x2F;or not even knowing which one it is, really sucks. Some editors help a bit with that, but it still sucks.</div><br/></div></div><div id="37700093" class="c"><input type="checkbox" id="c-37700093" checked=""/><div class="controls bullet"><span class="by">kleene_op</span><span>|</span><a href="#37698475">parent</a><span>|</span><a href="#37701016">prev</a><span>|</span><a href="#37699044">next</a><span>|</span><label class="collapse" for="c-37700093">[-]</label><label class="expand" for="c-37700093">[1 more]</label></div><br/><div class="children"><div class="content">There&#x27;s a huge difference in desirability for white space significance depending on whether or not it is used for code or data storage.
Because the best practice is to decompose your code in functions and classes, space significance isn&#x27;t so much a problem in Python.
YAML on the other hand, is a visually atrocious way to store tree-like&#x2F;multi-layered data.</div><br/></div></div><div id="37699044" class="c"><input type="checkbox" id="c-37699044" checked=""/><div class="controls bullet"><span class="by">pphysch</span><span>|</span><a href="#37698475">parent</a><span>|</span><a href="#37700093">prev</a><span>|</span><a href="#37697509">next</a><span>|</span><label class="collapse" for="c-37699044">[-]</label><label class="expand" for="c-37699044">[1 more]</label></div><br/><div class="children"><div class="content">This is more of a tooling problem than a language problem. I haven&#x27;t thought about Python whitespace in ages (i.e. since I switched to modern code editing tools).</div><br/></div></div></div></div><div id="37697509" class="c"><input type="checkbox" id="c-37697509" checked=""/><div class="controls bullet"><span class="by">secondcoming</span><span>|</span><a href="#37698475">prev</a><span>|</span><label class="collapse" for="c-37697509">[-]</label><label class="expand" for="c-37697509">[2 more]</label></div><br/><div class="children"><div class="content">Significant whitespace is always a mistake.</div><br/><div id="37698770" class="c"><input type="checkbox" id="c-37698770" checked=""/><div class="controls bullet"><span class="by">marssaxman</span><span>|</span><a href="#37697509">parent</a><span>|</span><label class="collapse" for="c-37698770">[-]</label><label class="expand" for="c-37698770">[1 more]</label></div><br/><div class="children"><div class="content">Inconsistent formatting is a worse mistake, because people actually do read whitespace as structure, even when you wish they wouldn&#x27;t.</div><br/></div></div></div></div></div></div></div></div></div></body></html>