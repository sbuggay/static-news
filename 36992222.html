<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1691226056198" as="style"/><link rel="stylesheet" href="styles.css?v=1691226056198"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.flux.utah.edu/paper/watson-thesis">Random Testing of WebAssembly Implementations Using Semantically Valid Programs</a> <span class="domain">(<a href="https://www.flux.utah.edu">www.flux.utah.edu</a>)</span></div><div class="subtext"><span>luu</span> | <span>8 comments</span></div><br/><div><div id="37007136" class="c"><input type="checkbox" id="c-37007136" checked=""/><div class="controls bullet"><span class="by">phickey</span><span>|</span><label class="collapse" for="c-37007136">[-]</label><label class="expand" for="c-37007136">[7 more]</label></div><br/><div class="children"><div class="content">Related: one of my colleagues created [wasm-smith](<a href="https:&#x2F;&#x2F;github.com&#x2F;bytecodealliance&#x2F;wasm-tools&#x2F;tree&#x2F;main&#x2F;crates&#x2F;wasm-smith">https:&#x2F;&#x2F;github.com&#x2F;bytecodealliance&#x2F;wasm-tools&#x2F;tree&#x2F;main&#x2F;cra...</a>) for fuzzing wasmparser and Wasmtime.</div><br/><div id="37007531" class="c"><input type="checkbox" id="c-37007531" checked=""/><div class="controls bullet"><span class="by">tlively</span><span>|</span><a href="#37007136">parent</a><span>|</span><a href="#37008456">next</a><span>|</span><label class="collapse" for="c-37007531">[-]</label><label class="expand" for="c-37007531">[5 more]</label></div><br/><div class="children"><div class="content">The end of the related work section cites both wasm-smith and the Binaryen fuzzer (<a href="https:&#x2F;&#x2F;github.com&#x2F;WebAssembly&#x2F;binaryen&#x2F;wiki&#x2F;Fuzzing">https:&#x2F;&#x2F;github.com&#x2F;WebAssembly&#x2F;binaryen&#x2F;wiki&#x2F;Fuzzing</a>) and says, &quot;They both provide a fuzzer that turns a stream of bytes into a WebAssembly module in order to test implementations. Their fuzzers always generate semantically valid test cases, but lack the targeting and tuning that Xsmith provides.&quot;<p>I look forward to reading more about how they do the targeting and tuning.</div><br/><div id="37007787" class="c"><input type="checkbox" id="c-37007787" checked=""/><div class="controls bullet"><span class="by">HeliosPanoptes</span><span>|</span><a href="#37007136">root</a><span>|</span><a href="#37007531">parent</a><span>|</span><a href="#37008456">next</a><span>|</span><label class="collapse" for="c-37007787">[-]</label><label class="expand" for="c-37007787">[4 more]</label></div><br/><div class="children"><div class="content">Hi! Author here. Xsmith provides a lot of ways to tune the choices it makes during program generation.  By far the easiest, and the one used a lot in Wasmlike (the fuzzer in this thesis), is adjusting the weight of each AST node. It doesn’t just have to be a static weight though! It can be a function of any number of attributes present in the AST so far when that choice is made!<p>For example, to get a nice spread of function sizes, Wasmlike limits the AST depth of new functions based on how many were generated so far. If the maximum depth isn’t limited, program size and generation time explodes. If the depth is just a simple continuation of where the function was first called from, the resulting program will have a ridiculous number of one liner functions without any medium sized ones.</div><br/><div id="37008318" class="c"><input type="checkbox" id="c-37008318" checked=""/><div class="controls bullet"><span class="by">pfdietz</span><span>|</span><a href="#37007136">root</a><span>|</span><a href="#37007787">parent</a><span>|</span><a href="#37008456">next</a><span>|</span><label class="collapse" for="c-37008318">[-]</label><label class="expand" for="c-37008318">[3 more]</label></div><br/><div class="children"><div class="content">Do you do swarm testing, where you random disable some fraction of the kinds of choices for generating program fragments before generating the AST?  If so, how did that help?</div><br/><div id="37009159" class="c"><input type="checkbox" id="c-37009159" checked=""/><div class="controls bullet"><span class="by">HeliosPanoptes</span><span>|</span><a href="#37007136">root</a><span>|</span><a href="#37008318">parent</a><span>|</span><a href="#37008416">next</a><span>|</span><label class="collapse" for="c-37009159">[-]</label><label class="expand" for="c-37009159">[1 more]</label></div><br/><div class="children"><div class="content">Come to think of it, there is something similar that Xsmith can do with parametric randomness, where it can change just one small choice in the chain of decisions that made a random program. It’s a library developed by a previous masters student at the research lab, and it’s called Clotho: <a href="https:&#x2F;&#x2F;docs.racket-lang.org&#x2F;clotho&#x2F;index.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;docs.racket-lang.org&#x2F;clotho&#x2F;index.html</a>.<p>The idea is to enable feedback directed fuzzing for a senantically valid random program generator. I believe that adding this to the Wasm fuzzer is the ‘next step’ in the ongoing research.<p>So not quite swarm testing, but a bit closer in terms of focused fuzzing instead of a shotgun approach.</div><br/></div></div><div id="37008416" class="c"><input type="checkbox" id="c-37008416" checked=""/><div class="controls bullet"><span class="by">HeliosPanoptes</span><span>|</span><a href="#37007136">root</a><span>|</span><a href="#37008318">parent</a><span>|</span><a href="#37009159">prev</a><span>|</span><a href="#37008456">next</a><span>|</span><label class="collapse" for="c-37008416">[-]</label><label class="expand" for="c-37008416">[1 more]</label></div><br/><div class="children"><div class="content">Short answer: no. The focus was on always generating semantically valid programs. That said, there is a lot of work on avoiding nondeterministic or undefined behavior, like division by zero or negative square roots.<p>There are also a few ‘feature’ flags to enable&#x2F;disable things like floating point operations in the case that it would affect results, but that never actually came up in testing, and the tests runs we did used roughly the same configurations.</div><br/></div></div></div></div></div></div></div></div><div id="37008456" class="c"><input type="checkbox" id="c-37008456" checked=""/><div class="controls bullet"><span class="by">hardwaresofton</span><span>|</span><a href="#37007136">parent</a><span>|</span><a href="#37007531">prev</a><span>|</span><label class="collapse" for="c-37008456">[-]</label><label class="expand" for="c-37008456">[1 more]</label></div><br/><div class="children"><div class="content">The attention to detail and quality of the wasmtime tooling and runtime is amazing.<p>I don’t think I’ve ever seen standards work be so high quality.</div><br/></div></div></div></div></div></div></div></div></div></body></html>