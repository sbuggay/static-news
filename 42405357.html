<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1734080459057" as="style"/><link rel="stylesheet" href="styles.css?v=1734080459057"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://lwn.net/Articles/997784/">Rust&#x27;s Incremental Compiler Architecture</a>Â <span class="domain">(<a href="https://lwn.net">lwn.net</a>)</span></div><div class="subtext"><span>signa11</span> | <span>9 comments</span></div><br/><div><div id="42406267" class="c"><input type="checkbox" id="c-42406267" checked=""/><div class="controls bullet"><span class="by">fulafel</span><span>|</span><a href="#42406496">next</a><span>|</span><label class="collapse" for="c-42406267">[-]</label><label class="expand" for="c-42406267">[6 more]</label></div><br/><div class="children"><div class="content">It seems that in <a href="https:&#x2F;&#x2F;perf.rust-lang.org&#x2F;dashboard.html" rel="nofollow">https:&#x2F;&#x2F;perf.rust-lang.org&#x2F;dashboard.html</a> the improvements have essentially plateaued, I wonder how they decide how much work to invest there.<p>(Although as the language complexity continues to grow maybe that question is missing the opposite force of compiler slowdowns from added work?)</div><br/><div id="42406981" class="c"><input type="checkbox" id="c-42406981" checked=""/><div class="controls bullet"><span class="by">lifthrasiir</span><span>|</span><a href="#42406267">parent</a><span>|</span><a href="#42406349">next</a><span>|</span><label class="collapse" for="c-42406981">[-]</label><label class="expand" for="c-42406981">[1 more]</label></div><br/><div class="children"><div class="content">The log-scale plot hasn&#x27;t plateaued yet, so there are still rooms for improvement. (Remind that rustc was initially quite slow at the very beginning.)</div><br/></div></div><div id="42406349" class="c"><input type="checkbox" id="c-42406349" checked=""/><div class="controls bullet"><span class="by">geewee</span><span>|</span><a href="#42406267">parent</a><span>|</span><a href="#42406981">prev</a><span>|</span><a href="#42406496">next</a><span>|</span><label class="collapse" for="c-42406349">[-]</label><label class="expand" for="c-42406349">[4 more]</label></div><br/><div class="children"><div class="content">I wonder if these graphs capture the new multi-threaded frontend that&#x27;s on nightly.</div><br/><div id="42406800" class="c"><input type="checkbox" id="c-42406800" checked=""/><div class="controls bullet"><span class="by">n42</span><span>|</span><a href="#42406267">root</a><span>|</span><a href="#42406349">parent</a><span>|</span><a href="#42406496">next</a><span>|</span><label class="collapse" for="c-42406800">[-]</label><label class="expand" for="c-42406800">[3 more]</label></div><br/><div class="children"><div class="content">genuine question: how much can the frontend really impact compile times at the end of the day? I would guess most of the time spent compiling is on the backend, but IANA compiler engineer</div><br/><div id="42406863" class="c"><input type="checkbox" id="c-42406863" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#42406267">root</a><span>|</span><a href="#42406800">parent</a><span>|</span><a href="#42406496">next</a><span>|</span><label class="collapse" for="c-42406863">[-]</label><label class="expand" for="c-42406863">[2 more]</label></div><br/><div class="children"><div class="content">One obvious example of this would be C++, where a smarter frontend that doesn&#x27;t do textual inclusion of a million lines would significantly improve compile times.</div><br/><div id="42406871" class="c"><input type="checkbox" id="c-42406871" checked=""/><div class="controls bullet"><span class="by">n42</span><span>|</span><a href="#42406267">root</a><span>|</span><a href="#42406863">parent</a><span>|</span><a href="#42406496">next</a><span>|</span><label class="collapse" for="c-42406871">[-]</label><label class="expand" for="c-42406871">[1 more]</label></div><br/><div class="children"><div class="content">that makes sense. are Rust&#x27;s macros handled in the frontend? if so, I could see how multithreading could have a dramatic impact</div><br/></div></div></div></div></div></div></div></div></div></div><div id="42406496" class="c"><input type="checkbox" id="c-42406496" checked=""/><div class="controls bullet"><span class="by">sjrd</span><span>|</span><a href="#42406267">prev</a><span>|</span><a href="#42406115">next</a><span>|</span><label class="collapse" for="c-42406496">[-]</label><label class="expand" for="c-42406496">[1 more]</label></div><br/><div class="children"><div class="content">The Scala.js compiler toolchain has been using similar techniques since 2015 by default. It features parallel and incremental whole-program optimizations, so it is also used for release builds. In fact it&#x27;s so fast we run most advanced optimizations in development builds as well.<p>For those interested in more details, we published a paper about it in OOPSLA&#x27;16 [1].<p>[1] <a href="https:&#x2F;&#x2F;dl.acm.org&#x2F;doi&#x2F;10.1145&#x2F;2983990.2984013" rel="nofollow">https:&#x2F;&#x2F;dl.acm.org&#x2F;doi&#x2F;10.1145&#x2F;2983990.2984013</a></div><br/></div></div><div id="42406115" class="c"><input type="checkbox" id="c-42406115" checked=""/><div class="controls bullet"><span class="by">gdiamos</span><span>|</span><a href="#42406496">prev</a><span>|</span><label class="collapse" for="c-42406115">[-]</label><label class="expand" for="c-42406115">[1 more]</label></div><br/><div class="children"><div class="content">This pattern is used in many places.<p>Build systems.<p>Now compiler passes.<p>Container layers.<p>Also in ML systems, eg dvc.<p>Where else is it missing?</div><br/></div></div></div></div></div></div></div></body></html>