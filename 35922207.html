<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1683968448910" as="style"/><link rel="stylesheet" href="styles.css?v=1683968448910"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://sschueller.github.io/posts/ci-cd-with-kicad-and-gitlab/">CI/CD with KiCad and Gitlab</a> <span class="domain">(<a href="https://sschueller.github.io">sschueller.github.io</a>)</span></div><div class="subtext"><span>sschueller</span> | <span>11 comments</span></div><br/><div><div id="35922978" class="c"><input type="checkbox" id="c-35922978" checked=""/><div class="controls bullet"><span class="by">cushychicken</span><span>|</span><a href="#35926569">next</a><span>|</span><label class="collapse" for="c-35922978">[-]</label><label class="expand" for="c-35922978">[1 more]</label></div><br/><div class="children"><div class="content">Smashing job. I use kibot in a similar fashion locally to generate my fab packages for my kicad designs.<p>I had it set up as a CI job for a while, but I ended up disabling it for a few reasons, the main one being that I just don&#x27;t think it&#x27;s a good idea to constantly create build artifacts for circuit board designs. It has created problems when people have circulated intermediate schematics generated by CI that don&#x27;t match the hardware we built.<p>You really only need to archive fab packages (by which I mean schematic, gerbers, BOM, assembly drawing, fab notes, etc) at the points in time where you fab and assemble a board.<p>Creating more artifacts just creates the possibility for more noise. It&#x27;s not like software CI as there&#x27;s not really a way to automate hardware testing in a CI server. Very little incremental value in continuous artifact generation as a result.</div><br/></div></div><div id="35926569" class="c"><input type="checkbox" id="c-35926569" checked=""/><div class="controls bullet"><span class="by">nimish</span><span>|</span><a href="#35922978">prev</a><span>|</span><a href="#35922717">next</a><span>|</span><label class="collapse" for="c-35926569">[-]</label><label class="expand" for="c-35926569">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve ripped out chunks of KiCad to run as CI&#x2F;CD on the basic PCBs I have. KiCad&#x27;s data and code is really not geared up for this, so quite a bit had to be hacked up to make it idempotent and even just to bring it up to basic C++ coding standards.<p>I&#x27;ve been looking at upstreaming what I can and what would even make sense. Ultimately I&#x27;ve switched to mostly using non-KiCad python (dealing with the messy nature of the bundled python wasted 3 solid days, don&#x27;t use it unless you must) to generate and manage a parts DB + vector drawings that are then processed into the KiCad formats.<p>It works, but a lot of KiCad internals were simply never designed to handle this scenario. Even multiple PCBs are a pain. It uses multiple proprietary vector representations, some for rendering and some for analysis, etc. The file formats themselves are ok to deal with but aren&#x27;t well-specified so they will change on you.<p>Fortunately, the end Gerbers are well defined and it&#x27;s often easier to simply generate those directly vs going through KiCad if the DRC are guaranteed by construction to never be violated</div><br/></div></div><div id="35922717" class="c"><input type="checkbox" id="c-35922717" checked=""/><div class="controls bullet"><span class="by">hkwerf</span><span>|</span><a href="#35926569">prev</a><span>|</span><a href="#35926423">next</a><span>|</span><label class="collapse" for="c-35922717">[-]</label><label class="expand" for="c-35922717">[1 more]</label></div><br/><div class="children"><div class="content">At my previous job I, too, set up CI&#x2F;CD from Schematics&#x2F;PCB data to device documentation PDFs, 3D models for mechanical integration, and packages for several of our EMS (electronics manufacturing services, each required different data formats) and other items, such as part database management (EOL checks, availability, prices). I, too, used KiCad and Gitlab, and was honestly quite happy with it. The biggest problem was that at a professional scale, KiCad was crashing a bit more often than one would like and it was tedious to find and fix the bugs or work around them if they were already fixed upstream (which they often were).<p>Still, this heavily sped up prototyping, as anybody could always fetch the data required to release or produce stuff. Shifting left works for electronics just as well as it does for software. :)</div><br/></div></div><div id="35926423" class="c"><input type="checkbox" id="c-35926423" checked=""/><div class="controls bullet"><span class="by">iamflimflam1</span><span>|</span><a href="#35922717">prev</a><span>|</span><a href="#35925981">next</a><span>|</span><label class="collapse" for="c-35926423">[-]</label><label class="expand" for="c-35926423">[1 more]</label></div><br/><div class="children"><div class="content">Really nice. Should be reasonably easy to turn into a GitHub workflow.<p>Do you have any write ups on the blender rendering and animation? If that could be automated I know a lot of people who would love to use it.</div><br/></div></div><div id="35925981" class="c"><input type="checkbox" id="c-35925981" checked=""/><div class="controls bullet"><span class="by">stefanoco</span><span>|</span><a href="#35926423">prev</a><span>|</span><a href="#35926666">next</a><span>|</span><label class="collapse" for="c-35925981">[-]</label><label class="expand" for="c-35925981">[1 more]</label></div><br/><div class="children"><div class="content">Great!!! A big part of the value here is the clear and complete explanation, with pointers to external references. May I ask you how do you perform the part:
“All these artifacts are commited back into the master and a version is applied. I also have a CHANGELOG.md which is automatically filled from commit messages (I used conventional commits to format my commit messages)”</div><br/></div></div><div id="35926666" class="c"><input type="checkbox" id="c-35926666" checked=""/><div class="controls bullet"><span class="by">stavros</span><span>|</span><a href="#35925981">prev</a><span>|</span><a href="#35924460">next</a><span>|</span><label class="collapse" for="c-35926666">[-]</label><label class="expand" for="c-35926666">[1 more]</label></div><br/><div class="children"><div class="content">I have done something similar, and have also successfully used the outputs with JLCPCB&#x27;s assembly service, if you want something similar that&#x27;s been tested and works:<p><a href="https:&#x2F;&#x2F;gitlab.com&#x2F;stavros&#x2F;sensor-board&#x2F;" rel="nofollow">https:&#x2F;&#x2F;gitlab.com&#x2F;stavros&#x2F;sensor-board&#x2F;</a></div><br/></div></div><div id="35924460" class="c"><input type="checkbox" id="c-35924460" checked=""/><div class="controls bullet"><span class="by">imrehg</span><span>|</span><a href="#35926666">prev</a><span>|</span><a href="#35922863">next</a><span>|</span><label class="collapse" for="c-35924460">[-]</label><label class="expand" for="c-35924460">[1 more]</label></div><br/><div class="children"><div class="content">This is very cool! As person doing small scale PCBs in a previous life, might just try to make things set up with my repo similarly (though have to find it first, might be in GitHub, so the idea would be the same but the tooling somewaht different).<p>One thing that makes me wonder all the time are CI&#x2F;CD runs that commit back to the repository. That feels weird for some reason I cannot articulate very well yet, but makes me think there should be a better way. Especially if the results are artefacts like that. Any experience by others to weigh in?</div><br/></div></div><div id="35922863" class="c"><input type="checkbox" id="c-35922863" checked=""/><div class="controls bullet"><span class="by">spyremeown</span><span>|</span><a href="#35924460">prev</a><span>|</span><a href="#35923367">next</a><span>|</span><label class="collapse" for="c-35922863">[-]</label><label class="expand" for="c-35922863">[1 more]</label></div><br/><div class="children"><div class="content">Very cool!<p>Does anybody know something like a translator tool between all the different `yaml`s different CI&#x2F;CD services use? Or maybe some metalanguage specifically made for that that can run instead of whatever hell dash&#x2F;bash is.<p>I wish I could just jump ships altering a `script` tag in whatever `yaml` from whichever service.</div><br/></div></div><div id="35923367" class="c"><input type="checkbox" id="c-35923367" checked=""/><div class="controls bullet"><span class="by">bb88</span><span>|</span><a href="#35922863">prev</a><span>|</span><a href="#35925763">next</a><span>|</span><label class="collapse" for="c-35923367">[-]</label><label class="expand" for="c-35923367">[1 more]</label></div><br/><div class="children"><div class="content">@sschueller<p>Awesome job.<p>Can you make a base gitlab project so anyone can fork it easily when anyone wants to create a new project?</div><br/></div></div><div id="35925763" class="c"><input type="checkbox" id="c-35925763" checked=""/><div class="controls bullet"><span class="by">rdxle579</span><span>|</span><a href="#35923367">prev</a><span>|</span><label class="collapse" for="c-35925763">[-]</label><label class="expand" for="c-35925763">[1 more]</label></div><br/><div class="children"><div class="content">Can you help me to hack<p>[↑] Next, we adopted the vertical stroke and right angle of the interior counters, which contrast nicely against the rounded curves of the exterior stroke.</div><br/></div></div></div></div></div></div></div></body></html>