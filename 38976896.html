<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1705136466852" as="style"/><link rel="stylesheet" href="styles.css?v=1705136466852"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://rkyv.org/">Rkyv: A zero-copy deserialization framework for rust</a> <span class="domain">(<a href="https://rkyv.org">rkyv.org</a>)</span></div><div class="subtext"><span>goranmoomin</span> | <span>3 comments</span></div><br/><div><div id="38978092" class="c"><input type="checkbox" id="c-38978092" checked=""/><div class="controls bullet"><span class="by">nviennot</span><span>|</span><a href="#38978217">next</a><span>|</span><label class="collapse" for="c-38978092">[-]</label><label class="expand" for="c-38978092">[1 more]</label></div><br/><div class="children"><div class="content">After trying to like rkyv, I came to the conclusion that the serialization&#x2F;deserializarion API is not ergonomic due to the heavy use of generics in their API.<p>I think we can do better.</div><br/></div></div><div id="38978217" class="c"><input type="checkbox" id="c-38978217" checked=""/><div class="controls bullet"><span class="by">3cats-in-a-coat</span><span>|</span><a href="#38978092">prev</a><span>|</span><label class="collapse" for="c-38978217">[-]</label><label class="expand" for="c-38978217">[1 more]</label></div><br/><div class="children"><div class="content">Sorry to be pedantic, but there’s nothing “zero copy” in a computer. Every single operation copies a bunch of things around.<p>Performance in computing is about managing the copy granularity by trying to align cohesiveness of space and time (optimal batching) which also relies on end-to-end analysis not just one step in the computation (whether a specific operation is a copy, virtual copy &#x2F;cow&#x2F;, move or virtual move by reference etc.). Avoiding a copy has time costs, such as indirection and incidental coupling. You trade space for time. Sometimes that’s smart sometimes not.<p>We have countless stories about how removing poor caching and going brute force speeds up an app.<p>Specifically for serialization and storage we also have increasingly more examples of how storing something compressed and calculating it on demand from compressed storage is faster than avoiding a copy on it because of how heterogenous memory bandwidth to compute bandwidth is over time (i.e. slow IO fast compute).<p>For example it’s often better to pack data into varints or compress sequences by delta rather than naively store them inRAM as long as they’re read roughly in sequence or groups.<p>Avoiding a copy and transform feels nice, but often isn’t. It should be only applied when specific uses show compute is the bottleneck.<p>Premature optimization yadda yadda.</div><br/></div></div></div></div></div></div></div></body></html>