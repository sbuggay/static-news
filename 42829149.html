<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1738141265766" as="style"/><link rel="stylesheet" href="styles.css?v=1738141265766"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.romaglushko.com/blog/whats-aouth2/">What&#x27;s OAuth2, anyway?</a>Â <span class="domain">(<a href="https://www.romaglushko.com">www.romaglushko.com</a>)</span></div><div class="subtext"><span>roma_glushko</span> | <span>41 comments</span></div><br/><div><div id="42860408" class="c"><input type="checkbox" id="c-42860408" checked=""/><div class="controls bullet"><span class="by">matthewaveryusa</span><span>|</span><a href="#42861539">next</a><span>|</span><label class="collapse" for="c-42860408">[-]</label><label class="expand" for="c-42860408">[1 more]</label></div><br/><div class="children"><div class="content">I love reading blog posts on oauth2 and oidc. I have a mental model on how it works but every person has their own way to describe the flows. So far my favorite article has been oauth-oidc from first principles[1] and why each piece of the protocol is useful.<p>This being hackernews, any comment worthwhile cannot be devoid of criticism. Trust-on-first-use is used incorrectly here -- saving the previous authorization scopes is just caching. TOFU has a specific definition in security: it&#x27;s when you&#x27;re establishing a secure channel but you haven&#x27;t shared a secret or public key a-priori -- it makes it impossible to guarantee that the counter-party is whom they say they are. Very concretely TOFU is a diffie hellman key exchange with a shared secret that can be MitMed. Through use in time the shared secret gains integrity because the probability of a persistent MitM accross channels degrades. The most common place TOFU is encountered is when connecting via ssh to a server and the server accepts your connection because you&#x27;re in their authorized_keys but the server&#x27;s key is not in your known_hosts.<p>[1] <a href="https:&#x2F;&#x2F;stack-auth.com&#x2F;blog&#x2F;oauth-from-first-principles">https:&#x2F;&#x2F;stack-auth.com&#x2F;blog&#x2F;oauth-from-first-principles</a></div><br/></div></div><div id="42861539" class="c"><input type="checkbox" id="c-42861539" checked=""/><div class="controls bullet"><span class="by">er4hn</span><span>|</span><a href="#42860408">prev</a><span>|</span><a href="#42860147">next</a><span>|</span><label class="collapse" for="c-42861539">[-]</label><label class="expand" for="c-42861539">[6 more]</label></div><br/><div class="children"><div class="content">As an Oauth2 hater, I consider this protocol cursed, mainly due to how hard it is to read through all the specs and have a useful understanding of what one should do with it. Reading the OIDC spec, where they define authN in terms of authZ, lets me experience what a stroke must feel like.</div><br/><div id="42862952" class="c"><input type="checkbox" id="c-42862952" checked=""/><div class="controls bullet"><span class="by">unscaled</span><span>|</span><a href="#42861539">parent</a><span>|</span><a href="#42862081">next</a><span>|</span><label class="collapse" for="c-42862952">[-]</label><label class="expand" for="c-42862952">[1 more]</label></div><br/><div class="children"><div class="content">Open ID Connect is not OAuth. It is not done as part of the IETF, and the OpenID Foundation seems to have slightly lower standards for specs. For instance, specs can be updated with errata sets that go as far as as introducing significant changes in the behavior without changing the version number and then do URL is just magically switched to the new document (&quot;incorporating errata set N&quot;) without warning. And to top it off, there is no changelog to be found (or at least I couldn&#x27;t find it).<p>The original OAuth 2 RFC is a very easy read and it&#x27;s clearer than most specs out there. It&#x27;s certainly far easier to read than any W3C spec.<p>I think the main issue is that there are too many specs that have been added over the years, and you need to know the right ones to implement. Some specs should be mandatory (like Bearer Token Usage, PKCE, OAuth for Native Apps and Current Best Practice[1] and Browser-based Apps[2] when they come out of draft). Some are useful only for certain use cases (Device Authorization Grant, Token Inspection Endpoint and Token Exchange). Some specs are horrible abominations that would hopefully never be implemented (I&#x27;m looking at you RFC 9101 JWT-Secured Authorization Request).<p>The good news is that OAuth 2.1 incorporates some of the best RFCs I&#x27;ve mentioned into the core RFC. This would help make OAuth simpler by having one document to point out to. I hope it comes out soon, since at this point I still have to fight with people who think that using the Password Grant is a great idea and have no idea why they should implement PKCE or CSRF protection.<p>[1] <a href="https:&#x2F;&#x2F;oauth.net&#x2F;2&#x2F;oauth-best-practice&#x2F;" rel="nofollow">https:&#x2F;&#x2F;oauth.net&#x2F;2&#x2F;oauth-best-practice&#x2F;</a><p>[2] <a href="https:&#x2F;&#x2F;oauth.net&#x2F;2&#x2F;browser-based-apps&#x2F;" rel="nofollow">https:&#x2F;&#x2F;oauth.net&#x2F;2&#x2F;browser-based-apps&#x2F;</a></div><br/></div></div><div id="42862081" class="c"><input type="checkbox" id="c-42862081" checked=""/><div class="controls bullet"><span class="by">sebazzz</span><span>|</span><a href="#42861539">parent</a><span>|</span><a href="#42862952">prev</a><span>|</span><a href="#42862060">next</a><span>|</span><label class="collapse" for="c-42862081">[-]</label><label class="expand" for="c-42862081">[1 more]</label></div><br/><div class="children"><div class="content">I actually find it very readable. It was at least readable enough so I could implement an OAuth2 client from scratch in C# as a student.<p>However after years I still don&#x27;t understand the technical differences between OpenID Connect and OAuth2. Can a OAuth2 client connect to a OpenID Connect server?</div><br/></div></div><div id="42862060" class="c"><input type="checkbox" id="c-42862060" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#42861539">parent</a><span>|</span><a href="#42862081">prev</a><span>|</span><a href="#42860147">next</a><span>|</span><label class="collapse" for="c-42862060">[-]</label><label class="expand" for="c-42862060">[3 more]</label></div><br/><div class="children"><div class="content">Is SAML any better?</div><br/><div id="42862320" class="c"><input type="checkbox" id="c-42862320" checked=""/><div class="controls bullet"><span class="by">andrewstuart2</span><span>|</span><a href="#42861539">root</a><span>|</span><a href="#42862060">parent</a><span>|</span><a href="#42862627">next</a><span>|</span><label class="collapse" for="c-42862320">[-]</label><label class="expand" for="c-42862320">[1 more]</label></div><br/><div class="children"><div class="content">Absolutely not. Read the specs [0] there as well if you truly want to know. XML canonicalization is a special kind of hell that I&#x27;ve done once and wish to never do again. And the enveloped signatures of xmldsig are also pretty complicated to get right. And it&#x27;s a wild west as to how the specs are implemented on RPs and IDPs alike (more so, in my experience, than OIDC by a long shot).<p>[0] <a href="https:&#x2F;&#x2F;www.oasis-open.org&#x2F;standard&#x2F;saml&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.oasis-open.org&#x2F;standard&#x2F;saml&#x2F;</a> or <a href="https:&#x2F;&#x2F;saml.xml.org&#x2F;saml-specifications" rel="nofollow">https:&#x2F;&#x2F;saml.xml.org&#x2F;saml-specifications</a></div><br/></div></div><div id="42862627" class="c"><input type="checkbox" id="c-42862627" checked=""/><div class="controls bullet"><span class="by">tptacek</span><span>|</span><a href="#42861539">root</a><span>|</span><a href="#42862060">parent</a><span>|</span><a href="#42862320">prev</a><span>|</span><a href="#42860147">next</a><span>|</span><label class="collapse" for="c-42862627">[-]</label><label class="expand" for="c-42862627">[1 more]</label></div><br/><div class="children"><div class="content">SAML is much, much worse than OIDC.<p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=28080553">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=28080553</a></div><br/></div></div></div></div></div></div><div id="42860147" class="c"><input type="checkbox" id="c-42860147" checked=""/><div class="controls bullet"><span class="by">adeptima</span><span>|</span><a href="#42861539">prev</a><span>|</span><a href="#42846028">next</a><span>|</span><label class="collapse" for="c-42860147">[-]</label><label class="expand" for="c-42860147">[1 more]</label></div><br/><div class="children"><div class="content">Excellent writing and diagrams!<p>If you want to expand your knowledge beyond OAuth2 (and most probably you should if you want to design systems used by big guys from 0 to 1) , highly recommend to jump straight into OpenID Connect (OIDC) which is an identity layer built on top of OAuth 2.0.<p>Besides reading specs, Sascha Preibisch&#x27;s videos on both OIDC and OAuth2 were the most useful to solidify a bigger picture for me<p><a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;@saschazegerman&#x2F;playlists" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;@saschazegerman&#x2F;playlists</a><p>Specs are actually well written despite of all jargon and train of buzzwords used inside. The most annoying on my list are OP (OpenID Provider) and RP (Relying Party) ...<p><a href="https:&#x2F;&#x2F;openid.net&#x2F;specs&#x2F;openid-connect-core-1_0.html" rel="nofollow">https:&#x2F;&#x2F;openid.net&#x2F;specs&#x2F;openid-connect-core-1_0.html</a><p><a href="https:&#x2F;&#x2F;datatracker.ietf.org&#x2F;doc&#x2F;draft-ietf-oauth-v2-1&#x2F;" rel="nofollow">https:&#x2F;&#x2F;datatracker.ietf.org&#x2F;doc&#x2F;draft-ietf-oauth-v2-1&#x2F;</a><p>Most useful knowledge however personally gained from studying ORY Hydra mentioned in the article and Zitadel<p><a href="https:&#x2F;&#x2F;zitadel.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;zitadel.com&#x2F;</a><p>The problem with OIDC and OAuth2 space - IDP providers are too &quot;creative&quot; in their interpretation of specs starting from userinfo and token exchange endpoints.<p>Without allocating significant amount of time getting all flows and related cyberops into your brain might never happened.<p>Good news - it&#x27;s a life time investment ...<p>Oidc search on github gives good results - libraries, open source IDPs, all kind of proxies, etc<p><a href="https:&#x2F;&#x2F;github.com&#x2F;topics&#x2F;oidc">https:&#x2F;&#x2F;github.com&#x2F;topics&#x2F;oidc</a></div><br/></div></div><div id="42846028" class="c"><input type="checkbox" id="c-42846028" checked=""/><div class="controls bullet"><span class="by">yencabulator</span><span>|</span><a href="#42860147">prev</a><span>|</span><a href="#42861117">next</a><span>|</span><label class="collapse" for="c-42846028">[-]</label><label class="expand" for="c-42846028">[8 more]</label></div><br/><div class="children"><div class="content">&gt; Apart from that, OAuth2 is such a vast area that we have been able to only answer the fundamental why questions and review the most popular delegation grants in this article.<p>So, what we&#x27;ve learned is that OAuth2 is not a single thing, and that it is too  complex.</div><br/><div id="42862576" class="c"><input type="checkbox" id="c-42862576" checked=""/><div class="controls bullet"><span class="by">motorest</span><span>|</span><a href="#42846028">parent</a><span>|</span><a href="#42848664">next</a><span>|</span><label class="collapse" for="c-42862576">[-]</label><label class="expand" for="c-42862576">[2 more]</label></div><br/><div class="children"><div class="content">&gt; So, what we&#x27;ve learned is that OAuth2 is not a single thing, and that it is too complex.<p>OAuth specifies multiple authorization flows, each one including independent risk mitigation steps.<p>In my opinion OAuth2 is not &quot;too complex&quot;. It&#x27;s a subject matter that has intrinsic complexity, but one which isn&#x27;t that high to be blunt.<p>Of course people who are oblivious to the subject and just glance at it from a distance might be tempted to dismiss it entirely as too complex. This is indeed a recurring problem in software development circles, where typically developers are too quick to criticize existing work because they don&#x27;t understand requirements, are oblivious to the problem domain, and do not understand how the problems they don&#x27;t understand are solved. But this doesn&#x27;t mean the problem domain is complex or too complex.<p>There is a reason why this sort of walkthrough is very useful: those who are oblivious to the subject and just glance at it from a distance have a way to walk through the requirements and the happy flow in a easy-to-digest way. Hence the comments that now OAuth2 is actually not that complex, it&#x27;s the RFCs that specify it that are the problem.</div><br/><div id="42862908" class="c"><input type="checkbox" id="c-42862908" checked=""/><div class="controls bullet"><span class="by">Salgat</span><span>|</span><a href="#42846028">root</a><span>|</span><a href="#42862576">parent</a><span>|</span><a href="#42848664">next</a><span>|</span><label class="collapse" for="c-42862908">[-]</label><label class="expand" for="c-42862908">[1 more]</label></div><br/><div class="children"><div class="content">OAuth&#x27;s biggest issue is that unless you are regularly working with it, you&#x27;ll probably forget most of the details once you&#x27;re done implementing it. Similar story with regex for me, it&#x27;s not <i>that</i> complex, but when I&#x27;m building queries a couple times a year at most, I end up forgetting it mostly. It&#x27;s not surprising that most folks don&#x27;t understand it, even if at one point they did in the past.</div><br/></div></div></div></div><div id="42848664" class="c"><input type="checkbox" id="c-42848664" checked=""/><div class="controls bullet"><span class="by">lxgr</span><span>|</span><a href="#42846028">parent</a><span>|</span><a href="#42862576">prev</a><span>|</span><a href="#42850275">next</a><span>|</span><label class="collapse" for="c-42848664">[-]</label><label class="expand" for="c-42848664">[4 more]</label></div><br/><div class="children"><div class="content">That matches my experience, and it doesn&#x27;t help that the RFCs, in trying to explain it, have declared defeat early on.</div><br/><div id="42859751" class="c"><input type="checkbox" id="c-42859751" checked=""/><div class="controls bullet"><span class="by">chrysoprace</span><span>|</span><a href="#42846028">root</a><span>|</span><a href="#42848664">parent</a><span>|</span><a href="#42851335">next</a><span>|</span><label class="collapse" for="c-42859751">[-]</label><label class="expand" for="c-42859751">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s also hard to find the relevant RFC, because older RFCs contain grant types that are no longer recommended, but still widely in use.<p>This means that if you&#x27;re working on a legacy application that&#x27;s using something like the implicit grant, to actually learn about it, you need to read superseded RFCs.</div><br/><div id="42862617" class="c"><input type="checkbox" id="c-42862617" checked=""/><div class="controls bullet"><span class="by">motorest</span><span>|</span><a href="#42846028">root</a><span>|</span><a href="#42859751">parent</a><span>|</span><a href="#42851335">next</a><span>|</span><label class="collapse" for="c-42862617">[-]</label><label class="expand" for="c-42862617">[1 more]</label></div><br/><div class="children"><div class="content">&gt; It&#x27;s also hard to find the relevant RFC, because older RFCs contain grant types that are no longer recommended, but still widely in use.<p>Why do you think this is a problem? So old RFCs specify grant types. That&#x27;s ok, that&#x27;s the whole point of specifying authentication schemes. Some are not recommended? That&#x27;s perfectly fine, it just means there are better, safer ways to implement a flow. Are they still widely use? That&#x27;s great, you already know where they are specified. So what&#x27;s the problem?<p>&gt; This means that if you&#x27;re working on a legacy application that&#x27;s using something like the implicit grant, to actually learn about it, you need to read superseded RFCs.<p>I don&#x27;t understand. Where do you see a problem? You said you know where a specific flow is specified, and you want to learn it. You even have a implementation? What&#x27;s the problem? Does a &quot;superseded&quot; tag bother you?</div><br/></div></div></div></div><div id="42851335" class="c"><input type="checkbox" id="c-42851335" checked=""/><div class="controls bullet"><span class="by">mdhb</span><span>|</span><a href="#42846028">root</a><span>|</span><a href="#42848664">parent</a><span>|</span><a href="#42859751">prev</a><span>|</span><a href="#42850275">next</a><span>|</span><label class="collapse" for="c-42851335">[-]</label><label class="expand" for="c-42851335">[1 more]</label></div><br/><div class="children"><div class="content">The oauth 2.1 spec does a lot to bring everything together and simplify things at the same time.</div><br/></div></div></div></div><div id="42850275" class="c"><input type="checkbox" id="c-42850275" checked=""/><div class="controls bullet"><span class="by">7bit</span><span>|</span><a href="#42846028">parent</a><span>|</span><a href="#42848664">prev</a><span>|</span><a href="#42861117">next</a><span>|</span><label class="collapse" for="c-42850275">[-]</label><label class="expand" for="c-42850275">[1 more]</label></div><br/><div class="children"><div class="content">OAuth is authorization only. The part where it is vast is the different mechanics to grant&#x2F;delegate access. And that&#x27;s really needed because you need to be able to have Oauth working fo humans and machines where the accessing service can be the app on your phone, or some backend server.</div><br/></div></div></div></div><div id="42861117" class="c"><input type="checkbox" id="c-42861117" checked=""/><div class="controls bullet"><span class="by">rfarley04</span><span>|</span><a href="#42846028">prev</a><span>|</span><a href="#42860185">next</a><span>|</span><label class="collapse" for="c-42861117">[-]</label><label class="expand" for="c-42861117">[1 more]</label></div><br/><div class="children"><div class="content">This is my absolute favorite explanation of OAuth 2: <a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;4727226&#x2F;how-does-oauth-2-protect-against-things-like-replay-attacks-using-the-security-t&#x2F;32534239#32534239" rel="nofollow">https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;4727226&#x2F;how-does-oauth-2...</a></div><br/></div></div><div id="42860185" class="c"><input type="checkbox" id="c-42860185" checked=""/><div class="controls bullet"><span class="by">hd4</span><span>|</span><a href="#42861117">prev</a><span>|</span><a href="#42843464">next</a><span>|</span><label class="collapse" for="c-42860185">[-]</label><label class="expand" for="c-42860185">[2 more]</label></div><br/><div class="children"><div class="content">One thing I wish I had learnt early on when I started looking into authentication is that OIDC (ideally with SSO through Google or GitHub) is the protocol&#x2F;real-world implementation most developers will want to just be able to get started with whereas OAuth2 is more like the (boring) specification.<p>If you&#x27;re wondering what to use to get authentication working (and not doing something risky), 90% of the time the answer will be OIDC.</div><br/><div id="42860974" class="c"><input type="checkbox" id="c-42860974" checked=""/><div class="controls bullet"><span class="by">tptacek</span><span>|</span><a href="#42860185">parent</a><span>|</span><a href="#42843464">next</a><span>|</span><label class="collapse" for="c-42860974">[-]</label><label class="expand" for="c-42860974">[1 more]</label></div><br/><div class="children"><div class="content">OAuth2 is more general than OIDC, came first, and was intended to solve a smaller problem (delegated access to resources). OIDC is identity (rather than permission) implemented on top of OAuth2.</div><br/></div></div></div></div><div id="42843464" class="c"><input type="checkbox" id="c-42843464" checked=""/><div class="controls bullet"><span class="by">vivzkestrel</span><span>|</span><a href="#42860185">prev</a><span>|</span><a href="#42859900">next</a><span>|</span><label class="collapse" for="c-42843464">[-]</label><label class="expand" for="c-42843464">[7 more]</label></div><br/><div class="children"><div class="content">very comprehensive but i wanted to add. oauth is one of those things i read about and forget 6 months later. there has to be a gamified way to make people learn about oauth and enforce it deep inside their brains</div><br/><div id="42846296" class="c"><input type="checkbox" id="c-42846296" checked=""/><div class="controls bullet"><span class="by">taurath</span><span>|</span><a href="#42843464">parent</a><span>|</span><a href="#42843904">next</a><span>|</span><label class="collapse" for="c-42846296">[-]</label><label class="expand" for="c-42846296">[5 more]</label></div><br/><div class="children"><div class="content">If you implement it twice, the sequence diagram tends to get burned into the brain. Itâs tricky and youâll be able to anticipate its trickiness.</div><br/><div id="42859674" class="c"><input type="checkbox" id="c-42859674" checked=""/><div class="controls bullet"><span class="by">unshavedyak</span><span>|</span><a href="#42843464">root</a><span>|</span><a href="#42846296">parent</a><span>|</span><a href="#42843904">next</a><span>|</span><label class="collapse" for="c-42859674">[-]</label><label class="expand" for="c-42859674">[4 more]</label></div><br/><div class="children"><div class="content">My problem is what part you&#x27;re implementing can be different. Are you implementing the ability to use someone else as auth? Are you implementing the ability for others to use you as auth? Are you a client, or a server? etc<p>I don&#x27;t know oauth at all, but that was the area that always felt convoluted when i&#x27;d research it. I think i&#x27;d be much happier if they had sub spec names with very specific use cases. OAuth2 Client Redirect, OAuth2 Server Authority, or w&#x2F;e.. i&#x27;m just making stuff up for attempted clarity.</div><br/><div id="42860025" class="c"><input type="checkbox" id="c-42860025" checked=""/><div class="controls bullet"><span class="by">XorNot</span><span>|</span><a href="#42843464">root</a><span>|</span><a href="#42859674">parent</a><span>|</span><a href="#42859767">prev</a><span>|</span><a href="#42843904">next</a><span>|</span><label class="collapse" for="c-42860025">[-]</label><label class="expand" for="c-42860025">[2 more]</label></div><br/><div class="children"><div class="content">My problem is that my use case is always this: by default the application should be it&#x27;s own OAuth server, so the endpoints can use OAuth against the application and a local only database.<p>Then I want an easy story for linking that instead to LDAP for corporate deployments, or to an SSO OAuth server.<p>The problem is...well I still don&#x27;t really know how I should be including that? It&#x27;s <i>so much easier</i> just to register a session cookie from a login page.</div><br/><div id="42862663" class="c"><input type="checkbox" id="c-42862663" checked=""/><div class="controls bullet"><span class="by">jpc0</span><span>|</span><a href="#42843464">root</a><span>|</span><a href="#42860025">parent</a><span>|</span><a href="#42843904">next</a><span>|</span><label class="collapse" for="c-42862663">[-]</label><label class="expand" for="c-42862663">[1 more]</label></div><br/><div class="children"><div class="content">&gt; The problem is...well I still don&#x27;t really know how I should be including that? It&#x27;s so much easier just to register a session cookie from a login page.<p>For a webpage this makes perfect sense, where would you securely store an access &#x2F; refresh token on web that isn&#x27;t vulnerable to XSS? In a session cookie that is secure &amp; http only...<p>For native apps though that state might be more annoying to track and a auth token and refresh token is pretty easy to store securely.</div><br/></div></div></div></div></div></div></div></div><div id="42843904" class="c"><input type="checkbox" id="c-42843904" checked=""/><div class="controls bullet"><span class="by">7bit</span><span>|</span><a href="#42843464">parent</a><span>|</span><a href="#42846296">prev</a><span>|</span><a href="#42859900">next</a><span>|</span><label class="collapse" for="c-42843904">[-]</label><label class="expand" for="c-42843904">[1 more]</label></div><br/><div class="children"><div class="content">As with everything: repetition. If you forget these things you don&#x27;t use them often enough. On that level, do you really need to remember them or are you happy enough to have a good and short reference, like this article for example?<p>My personal answer is: a cheat sheet is enough.</div><br/></div></div></div></div><div id="42859900" class="c"><input type="checkbox" id="c-42859900" checked=""/><div class="controls bullet"><span class="by">derangedHorse</span><span>|</span><a href="#42843464">prev</a><span>|</span><a href="#42861615">next</a><span>|</span><label class="collapse" for="c-42859900">[-]</label><label class="expand" for="c-42859900">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Practically speaking, the state is just a random non-guessable string that is saved in the client application session<p>It doesn&#x27;t have to be completely random, the spec only makes partial randomness a requirement:<p>&quot;The binding value used for CSRF protection MUST contain a non-guessable value&quot;<p>---<p>The state <i>can</i> be used to transmit useful data as long as the data isn&#x27;t sensitive:<p>&quot;The &quot;state&quot; and &quot;scope&quot; parameters SHOULD NOT include sensitive client or resource owner information in plain text, as they can be transmitted over insecure channels or stored insecurely.&quot;<p>This can be used in place of any &#x27;Additional Client Callback URL params&#x27;.<p>---<p>Aside from that, I think this is very well written! I&#x27;ll share it with others who want to learn more about OAuth 2.0 and its extensions.</div><br/><div id="42862485" class="c"><input type="checkbox" id="c-42862485" checked=""/><div class="controls bullet"><span class="by">brabel</span><span>|</span><a href="#42859900">parent</a><span>|</span><a href="#42861615">next</a><span>|</span><label class="collapse" for="c-42862485">[-]</label><label class="expand" for="c-42862485">[1 more]</label></div><br/><div class="children"><div class="content">&gt; The state can be used to transmit useful data...<p>Which explains why it&#x27;s called &quot;state&quot;.</div><br/></div></div></div></div><div id="42861615" class="c"><input type="checkbox" id="c-42861615" checked=""/><div class="controls bullet"><span class="by">deepsun</span><span>|</span><a href="#42859900">prev</a><span>|</span><a href="#42859349">next</a><span>|</span><label class="collapse" for="c-42861615">[-]</label><label class="expand" for="c-42861615">[1 more]</label></div><br/><div class="children"><div class="content">It always says OAuth2, even though it&#x27;s all about OAuth in general.<p>OAuth v1 was doing exactly the same, just different implementation detail (e.g. v2 relies on HTTPS, while v1 forced you to sign tokens so no need to encrypt).</div><br/></div></div><div id="42859349" class="c"><input type="checkbox" id="c-42859349" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#42861615">prev</a><span>|</span><a href="#42860478">next</a><span>|</span><label class="collapse" for="c-42859349">[-]</label><label class="expand" for="c-42859349">[2 more]</label></div><br/><div class="children"><div class="content">Feature request: at one point in this guide it says:<p>&gt; However, itâs discouraged to use URL fragments as they impose potential security issues.<p>I&#x27;d love it if that linked to a footnote or similar that explained what those potential security issues are.</div><br/><div id="42861151" class="c"><input type="checkbox" id="c-42861151" checked=""/><div class="controls bullet"><span class="by">NewJazz</span><span>|</span><a href="#42859349">parent</a><span>|</span><a href="#42860478">next</a><span>|</span><label class="collapse" for="c-42861151">[-]</label><label class="expand" for="c-42861151">[1 more]</label></div><br/><div class="children"><div class="content">If the user is on a search page, the user&#x27;s query (which could be argued as private&#x2F;sensitive data) would be exposed. That&#x27;s one I can think of.</div><br/></div></div></div></div><div id="42860478" class="c"><input type="checkbox" id="c-42860478" checked=""/><div class="controls bullet"><span class="by">dadadad100</span><span>|</span><a href="#42859349">prev</a><span>|</span><a href="#42861355">next</a><span>|</span><label class="collapse" for="c-42860478">[-]</label><label class="expand" for="c-42860478">[1 more]</label></div><br/><div class="children"><div class="content">Very good presentation but I do miss any mention of the audience claim. This claim is underrated in my opinion at least. It allows the token to climb access to an api or server or whatever that can be used by gateways to do a high level authorization. Then the scopes can be used at the resource server to govern lower level authorization.</div><br/></div></div><div id="42861355" class="c"><input type="checkbox" id="c-42861355" checked=""/><div class="controls bullet"><span class="by">androiddrew</span><span>|</span><a href="#42860478">prev</a><span>|</span><a href="#42859735">next</a><span>|</span><label class="collapse" for="c-42861355">[-]</label><label class="expand" for="c-42861355">[2 more]</label></div><br/><div class="children"><div class="content">Itâs funny to see your co-worker make the front page of hacker news.</div><br/><div id="42862075" class="c"><input type="checkbox" id="c-42862075" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#42861355">parent</a><span>|</span><a href="#42859735">next</a><span>|</span><label class="collapse" for="c-42862075">[-]</label><label class="expand" for="c-42862075">[1 more]</label></div><br/><div class="children"><div class="content">What aboutâ¦a friend?</div><br/></div></div></div></div><div id="42859735" class="c"><input type="checkbox" id="c-42859735" checked=""/><div class="controls bullet"><span class="by">goalieca</span><span>|</span><a href="#42861355">prev</a><span>|</span><a href="#42843698">next</a><span>|</span><label class="collapse" for="c-42859735">[-]</label><label class="expand" for="c-42859735">[1 more]</label></div><br/><div class="children"><div class="content">Well, itâs still more approachable than SAML. Our industry is messed up and we wonder why phishing is still a thing.</div><br/></div></div><div id="42843698" class="c"><input type="checkbox" id="c-42843698" checked=""/><div class="controls bullet"><span class="by">7bit</span><span>|</span><a href="#42859735">prev</a><span>|</span><a href="#42862124">next</a><span>|</span><label class="collapse" for="c-42843698">[-]</label><label class="expand" for="c-42843698">[1 more]</label></div><br/><div class="children"><div class="content">This is an excellent article. The only thing I am missing is a short paragraph about OIDC, which is the thing that enables authentication. To most people who just get in touch with the topic OAuth is more authentication than authorization.</div><br/></div></div><div id="42862124" class="c"><input type="checkbox" id="c-42862124" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#42843698">prev</a><span>|</span><a href="#42829150">next</a><span>|</span><label class="collapse" for="c-42862124">[-]</label><label class="expand" for="c-42862124">[2 more]</label></div><br/><div class="children"><div class="content">&gt; So they generalize the discovery approach from OpenID Connect specification into RFC8414 that adds a new metadata route under .well-known subpath.
That route contains URLs of the authorization and token endpoints, supported token authentications, OpenID user URL, etc.<p>âYo I heard you like URLs so I made URLs for your URLs.â<p>But seriouslyâ¦if youâre going to have fixed URLs, why not just have fixed URLs for these endpoints? What does the indirection get you?</div><br/><div id="42862210" class="c"><input type="checkbox" id="c-42862210" checked=""/><div class="controls bullet"><span class="by">hobofan</span><span>|</span><a href="#42862124">parent</a><span>|</span><a href="#42829150">next</a><span>|</span><label class="collapse" for="c-42862210">[-]</label><label class="expand" for="c-42862210">[1 more]</label></div><br/><div class="children"><div class="content">The indirection gets you simplicity during integration, as in the optimal case the consumer only has to point to a single URL than to a handful, and rest of the URLs can be auto-discovered from there.<p>Also if you look at the typical endpoints you see listed there you&#x27;ll find that they are usually pre-existing oauth2 endpoints that predate OIDC, so by not requiring the creation &#x2F; new routing of those endpoints, OIDC adoption is easier on the OIDC provider side.<p>And lastly you&#x27;ll need the metadata endpoint anyway for all the non-URL data that is exposed by that endpoint.</div><br/></div></div></div></div><div id="42860304" class="c"><input type="checkbox" id="c-42860304" checked=""/><div class="controls bullet"><span class="by">throwaway519</span><span>|</span><a href="#42829150">prev</a><span>|</span><label class="collapse" for="c-42860304">[-]</label><label class="expand" for="c-42860304">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s the manifested fear of AOLesque internet silos to hang on to their ~prey~ users by the claw. It creates a less open, less federated web.</div><br/></div></div></div></div></div></div></div></body></html>