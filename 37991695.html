<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1698138085960" as="style"/><link rel="stylesheet" href="styles.css?v=1698138085960"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://websession.dev/">Show HN: WebSession, a Secure Replacement for Cookies</a> <span class="domain">(<a href="https://websession.dev">websession.dev</a>)</span></div><div class="subtext"><span>zacharyvoase</span> | <span>61 comments</span></div><br/><div><div id="37995801" class="c"><input type="checkbox" id="c-37995801" checked=""/><div class="controls bullet"><span class="by">janosdebugs</span><span>|</span><a href="#37994736">next</a><span>|</span><label class="collapse" for="c-37995801">[-]</label><label class="expand" for="c-37995801">[8 more]</label></div><br/><div class="children"><div class="content">&gt; Because WebSession is dedicated to session maintenance and nothing else, a client could theoretically reject all cookies on any supporting site, ideally skipping the jarring cookie banner experience.<p>This has nothing to do with cookies, the banner is required if the site is processing data that is not just technically necessary. In this case the site needs to ask the user for consent or at least inform them of processing due to legitimate interests.</div><br/><div id="37995948" class="c"><input type="checkbox" id="c-37995948" checked=""/><div class="controls bullet"><span class="by">spiderfarmer</span><span>|</span><a href="#37995801">parent</a><span>|</span><a href="#37996412">prev</a><span>|</span><a href="#37994736">next</a><span>|</span><label class="collapse" for="c-37995948">[-]</label><label class="expand" for="c-37995948">[6 more]</label></div><br/><div class="children"><div class="content">Still lots of sites have cookie banners because the legal department demands them, even though they are not needed for the cookies they use.</div><br/><div id="37996470" class="c"><input type="checkbox" id="c-37996470" checked=""/><div class="controls bullet"><span class="by">diggan</span><span>|</span><a href="#37995801">root</a><span>|</span><a href="#37995948">parent</a><span>|</span><a href="#37996344">next</a><span>|</span><label class="collapse" for="c-37996470">[-]</label><label class="expand" for="c-37996470">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, companies tend to be over-careful. They trust the legal department knows what they&#x27;re talking about but in this case they don&#x27;t, but the company decides to listen to them anyway. Especially if the legal department is a part of a US company, thinking they adhere to some EU regulation they can&#x27;t seem to quite understand fully.<p>:shrug:</div><br/></div></div><div id="37996344" class="c"><input type="checkbox" id="c-37996344" checked=""/><div class="controls bullet"><span class="by">extraduder_ire</span><span>|</span><a href="#37995801">root</a><span>|</span><a href="#37995948">parent</a><span>|</span><a href="#37996470">prev</a><span>|</span><a href="#37995999">next</a><span>|</span><label class="collapse" for="c-37996344">[-]</label><label class="expand" for="c-37996344">[1 more]</label></div><br/><div class="children"><div class="content">I recall a friend of mine worked support for some sass meeting software (oncehub-like) and got an email from a non-technical user asking if the booking invite page is missing a cookie notice.<p>He had to explain that they re-engineered the page a while back to not collect any data besides what the person puts into the form (the page explains that collection, but inline) so they wouldn&#x27;t need one. Don&#x27;t know if it was an aesthetic choice or if they AB tested it.</div><br/></div></div><div id="37995999" class="c"><input type="checkbox" id="c-37995999" checked=""/><div class="controls bullet"><span class="by">archerx</span><span>|</span><a href="#37995801">root</a><span>|</span><a href="#37995948">parent</a><span>|</span><a href="#37996344">prev</a><span>|</span><a href="#37994736">next</a><span>|</span><label class="collapse" for="c-37995999">[-]</label><label class="expand" for="c-37995999">[3 more]</label></div><br/><div class="children"><div class="content">Maybe they need better legal departments that can actually read and understand laws?</div><br/><div id="37996161" class="c"><input type="checkbox" id="c-37996161" checked=""/><div class="controls bullet"><span class="by">jampekka</span><span>|</span><a href="#37995801">root</a><span>|</span><a href="#37995999">parent</a><span>|</span><a href="#37994736">next</a><span>|</span><label class="collapse" for="c-37996161">[-]</label><label class="expand" for="c-37996161">[2 more]</label></div><br/><div class="children"><div class="content">Nobody ever got fired for joining the cargo cult.</div><br/><div id="37996415" class="c"><input type="checkbox" id="c-37996415" checked=""/><div class="controls bullet"><span class="by">latexr</span><span>|</span><a href="#37995801">root</a><span>|</span><a href="#37996161">parent</a><span>|</span><a href="#37994736">next</a><span>|</span><label class="collapse" for="c-37996415">[-]</label><label class="expand" for="c-37996415">[1 more]</label></div><br/><div class="children"><div class="content">I wouldn’t be so sure. Joining the cargo cult doesn’t make you immune to the law.<p><a href="https:&#x2F;&#x2F;noyb.eu&#x2F;en&#x2F;noyb-aims-end-cookie-banner-terror-and-issues-more-500-gdpr-complaints" rel="nofollow noreferrer">https:&#x2F;&#x2F;noyb.eu&#x2F;en&#x2F;noyb-aims-end-cookie-banner-terror-and-is...</a></div><br/></div></div></div></div></div></div></div></div></div></div><div id="37994736" class="c"><input type="checkbox" id="c-37994736" checked=""/><div class="controls bullet"><span class="by">thwarted</span><span>|</span><a href="#37995801">prev</a><span>|</span><a href="#37994074">next</a><span>|</span><label class="collapse" for="c-37994736">[-]</label><label class="expand" for="c-37994736">[5 more]</label></div><br/><div class="children"><div class="content"><i>It’s also very common that a website wants credentials to be cleared when the user is inactive for a certain amount of time. This is important for sensitive applications such as banking and healthcare. Currently there’s no way to enforce that a cookie is cleared on device lock or user inactivity, especially because security requires that such cookies not be visible to JavaScript. A native session management solution should be able to request that the browser clear a session in the case of device lock, the user navigating away, etc.</i><p>No, the correct way to do this is to use the cookie to store an opaque session identifier generated at each login, then expire the session data on the server sometime after its last touch.  This solves both forcing expiration and the copying&#x2F;hijacking of cookie values from long-saved browser state.</div><br/><div id="37995832" class="c"><input type="checkbox" id="c-37995832" checked=""/><div class="controls bullet"><span class="by">alexchamberlain</span><span>|</span><a href="#37994736">parent</a><span>|</span><a href="#37996046">next</a><span>|</span><label class="collapse" for="c-37995832">[-]</label><label class="expand" for="c-37995832">[1 more]</label></div><br/><div class="children"><div class="content">In short, you can&#x27;t rely on the client doing _anything_, especially following the protocol correctly.</div><br/></div></div><div id="37996046" class="c"><input type="checkbox" id="c-37996046" checked=""/><div class="controls bullet"><span class="by">8organicbits</span><span>|</span><a href="#37994736">parent</a><span>|</span><a href="#37995832">prev</a><span>|</span><a href="#37994969">next</a><span>|</span><label class="collapse" for="c-37996046">[-]</label><label class="expand" for="c-37996046">[2 more]</label></div><br/><div class="children"><div class="content">Surprisingly, there&#x27;s several cookie-based approaches that forget to handle any sort of server-side expiration. Here&#x27;s one:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;googleapis&#x2F;nodejs-firestore-session&#x2F;issues&#x2F;63">https:&#x2F;&#x2F;github.com&#x2F;googleapis&#x2F;nodejs-firestore-session&#x2F;issue...</a><p>I agree that WebSession would benefit from a time since last touched expiration, although I&#x27;ll point out that a time-based approach doesn&#x27;t handle the &quot;when device is locked&quot; requirement.</div><br/><div id="37996388" class="c"><input type="checkbox" id="c-37996388" checked=""/><div class="controls bullet"><span class="by">extraduder_ire</span><span>|</span><a href="#37994736">root</a><span>|</span><a href="#37996046">parent</a><span>|</span><a href="#37994969">next</a><span>|</span><label class="collapse" for="c-37996388">[-]</label><label class="expand" for="c-37996388">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve noticed reddit doesn&#x27;t invalidate your cookies even if you click the logout button. There is a button in the site settings under your list of sessions, but I haven&#x27;t tested that.<p>I noticed it because I delete site cookies often, and paste them in from a file whenever I want to comment. Occasionally click &quot;logout&quot; without thinking. Got creeped out by that year-in-review thing they do once.</div><br/></div></div></div></div><div id="37994969" class="c"><input type="checkbox" id="c-37994969" checked=""/><div class="controls bullet"><span class="by">robertlagrant</span><span>|</span><a href="#37994736">parent</a><span>|</span><a href="#37996046">prev</a><span>|</span><a href="#37994074">next</a><span>|</span><label class="collapse" for="c-37994969">[-]</label><label class="expand" for="c-37994969">[1 more]</label></div><br/><div class="children"><div class="content">Also note the apples to oranges comparison: <i>enforce</i> cookie clearance vs <i>request</i> browser clears session.</div><br/></div></div></div></div><div id="37994074" class="c"><input type="checkbox" id="c-37994074" checked=""/><div class="controls bullet"><span class="by">oefrha</span><span>|</span><a href="#37994736">prev</a><span>|</span><a href="#37995078">next</a><span>|</span><label class="collapse" for="c-37994074">[-]</label><label class="expand" for="c-37994074">[11 more]</label></div><br/><div class="children"><div class="content">The only thing in this protocol that prevents the reuse of Authorization header is keeping track of nonce:<p>&gt; Validating that the nonce has not been used already for this session. Important: at this point, the nonce should be added to the ‘seen’ set, because nonces should be invalidated whether the signature validation passes or fails. Failure to do so can allow attackers to brute-force a valid signature for a single nonce.<p>That&#x27;s one extra db row &#x2F; kv pair for every single request, including read requests, for very little benefit.<p>Request signatures incorporating timestamp and optionally path&#x2F;payload are stronger, can be statelessly validated, and are already in use today on certain sites.</div><br/><div id="37995341" class="c"><input type="checkbox" id="c-37995341" checked=""/><div class="controls bullet"><span class="by">dcow</span><span>|</span><a href="#37994074">parent</a><span>|</span><a href="#37994822">next</a><span>|</span><label class="collapse" for="c-37995341">[-]</label><label class="expand" for="c-37995341">[2 more]</label></div><br/><div class="children"><div class="content">Yeah I think the proposal should add some optional binding of the web session to http resource semantics.<p>Also re nonces if you only keep track of active nonces and have the server return a next-nonce, or use a counter like TLS, then you avoid the ugly need to keep track of seen nonces and only need to remember currently active nonces.</div><br/><div id="37995815" class="c"><input type="checkbox" id="c-37995815" checked=""/><div class="controls bullet"><span class="by">janosdebugs</span><span>|</span><a href="#37994074">root</a><span>|</span><a href="#37995341">parent</a><span>|</span><a href="#37994822">next</a><span>|</span><label class="collapse" for="c-37995815">[-]</label><label class="expand" for="c-37995815">[1 more]</label></div><br/><div class="children"><div class="content">The server returning the next nonce sounds like a huge headache when requests are run in parallel.</div><br/></div></div></div></div><div id="37994822" class="c"><input type="checkbox" id="c-37994822" checked=""/><div class="controls bullet"><span class="by">apitman</span><span>|</span><a href="#37994074">parent</a><span>|</span><a href="#37995341">prev</a><span>|</span><a href="#37994166">next</a><span>|</span><label class="collapse" for="c-37994822">[-]</label><label class="expand" for="c-37994822">[5 more]</label></div><br/><div class="children"><div class="content">Timestamps can be vulnerable to clock attacks, right? Why not just include a monotonically increasing request number along with the nonce in each request?</div><br/><div id="37995327" class="c"><input type="checkbox" id="c-37995327" checked=""/><div class="controls bullet"><span class="by">oefrha</span><span>|</span><a href="#37994074">root</a><span>|</span><a href="#37994822">parent</a><span>|</span><a href="#37994888">next</a><span>|</span><label class="collapse" for="c-37995327">[-]</label><label class="expand" for="c-37995327">[1 more]</label></div><br/><div class="children"><div class="content">What clock attack? You validate the timestamp on the server and reject if the timestamp is too far off. The same request being repeatable within say 30s isn’t a problem in 99% of cases.</div><br/></div></div><div id="37994888" class="c"><input type="checkbox" id="c-37994888" checked=""/><div class="controls bullet"><span class="by">kortex</span><span>|</span><a href="#37994074">root</a><span>|</span><a href="#37994822">parent</a><span>|</span><a href="#37995327">prev</a><span>|</span><a href="#37994166">next</a><span>|</span><label class="collapse" for="c-37994888">[-]</label><label class="expand" for="c-37994888">[3 more]</label></div><br/><div class="children"><div class="content">That interferes with the ability to send multiple requests in-flight at the same time.</div><br/><div id="37995351" class="c"><input type="checkbox" id="c-37995351" checked=""/><div class="controls bullet"><span class="by">tommiegannert</span><span>|</span><a href="#37994074">root</a><span>|</span><a href="#37994888">parent</a><span>|</span><a href="#37994166">next</a><span>|</span><label class="collapse" for="c-37995351">[-]</label><label class="expand" for="c-37995351">[2 more]</label></div><br/><div class="children"><div class="content">There could be a window: the last N sequence numbers are kept in a set, where N is higher than the number of concurrent requests.</div><br/><div id="37995609" class="c"><input type="checkbox" id="c-37995609" checked=""/><div class="controls bullet"><span class="by">willvarfar</span><span>|</span><a href="#37994074">root</a><span>|</span><a href="#37995351">parent</a><span>|</span><a href="#37994166">next</a><span>|</span><label class="collapse" for="c-37995609">[-]</label><label class="expand" for="c-37995609">[1 more]</label></div><br/><div class="children"><div class="content">Doesn&#x27;t the server discarding requests with the timestamp beyond a threshold already do windowing but statelessly?</div><br/></div></div></div></div></div></div></div></div><div id="37994166" class="c"><input type="checkbox" id="c-37994166" checked=""/><div class="controls bullet"><span class="by">tfigueroa</span><span>|</span><a href="#37994074">parent</a><span>|</span><a href="#37994822">prev</a><span>|</span><a href="#37995078">next</a><span>|</span><label class="collapse" for="c-37994166">[-]</label><label class="expand" for="c-37994166">[3 more]</label></div><br/><div class="children"><div class="content">I thought I was misreading this. It seems onerous to keep track of every nonce, even scoped to a given session. Maybe I’m missing something.</div><br/><div id="37994904" class="c"><input type="checkbox" id="c-37994904" checked=""/><div class="controls bullet"><span class="by">kortex</span><span>|</span><a href="#37994074">root</a><span>|</span><a href="#37994166">parent</a><span>|</span><a href="#37995078">next</a><span>|</span><label class="collapse" for="c-37994904">[-]</label><label class="expand" for="c-37994904">[2 more]</label></div><br/><div class="children"><div class="content">A Bloom or cuckoo filter would allow for efficient tracking of nonces (depending if the security model prefers false positives with 4xx&#x2F;resend, or false negatives)</div><br/><div id="37995905" class="c"><input type="checkbox" id="c-37995905" checked=""/><div class="controls bullet"><span class="by">cryptonym</span><span>|</span><a href="#37994074">root</a><span>|</span><a href="#37994904">parent</a><span>|</span><a href="#37995078">next</a><span>|</span><label class="collapse" for="c-37995905">[-]</label><label class="expand" for="c-37995905">[1 more]</label></div><br/><div class="children"><div class="content">Still not ideal in a distributed environment, a request may have to synchronously go around the world to hit that nonce db.</div><br/></div></div></div></div></div></div></div></div><div id="37995078" class="c"><input type="checkbox" id="c-37995078" checked=""/><div class="controls bullet"><span class="by">Beldin</span><span>|</span><a href="#37994074">prev</a><span>|</span><a href="#37996118">next</a><span>|</span><label class="collapse" for="c-37995078">[-]</label><label class="expand" for="c-37995078">[5 more]</label></div><br/><div class="children"><div class="content">From the article:<p>&gt; <i>As a result of increasingly strict privacy laws across the world, users are now beset with cookie banners across the Web</i><p>In the words of a law prof from the Radboud University, more accurate is to say &quot;as a result of an entire industry colluding to undermine legislation&quot;.</div><br/><div id="37996483" class="c"><input type="checkbox" id="c-37996483" checked=""/><div class="controls bullet"><span class="by">diggan</span><span>|</span><a href="#37995078">parent</a><span>|</span><a href="#37995270">next</a><span>|</span><label class="collapse" for="c-37996483">[-]</label><label class="expand" for="c-37996483">[1 more]</label></div><br/><div class="children"><div class="content">Seems like more companies than needed are confessing to misusing people&#x27;s data. If you only use cookies for login or other essential information (not related to tracking people), <i>you do not need to show any cookie banner</i>. Same with the GDPR stuff, if you don&#x27;t store more data about users than absolutely needed for essential functionality, GDPR isn&#x27;t affecting you.</div><br/></div></div><div id="37995270" class="c"><input type="checkbox" id="c-37995270" checked=""/><div class="controls bullet"><span class="by">unmole</span><span>|</span><a href="#37995078">parent</a><span>|</span><a href="#37996483">prev</a><span>|</span><a href="#37996118">next</a><span>|</span><label class="collapse" for="c-37995270">[-]</label><label class="expand" for="c-37995270">[3 more]</label></div><br/><div class="children"><div class="content">&gt; as a result of an entire industry colluding to undermine legislation<p>Asking for a friend: Is the the European Parliament also a part of the industry colluding to undermine legislation?<p><a href="https:&#x2F;&#x2F;www.europarl.europa.eu&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.europarl.europa.eu&#x2F;</a></div><br/><div id="37995869" class="c"><input type="checkbox" id="c-37995869" checked=""/><div class="controls bullet"><span class="by">wkat4242</span><span>|</span><a href="#37995078">root</a><span>|</span><a href="#37995270">parent</a><span>|</span><a href="#37995725">next</a><span>|</span><label class="collapse" for="c-37995869">[-]</label><label class="expand" for="c-37995869">[1 more]</label></div><br/><div class="children"><div class="content">The EP were just dumb. They let themselves be swayed by industry lobbyists to weaken the regulation and allow the cookiewalls. Now the EU gets blamed for this mess.<p>What they should have done is raise the &quot;Do Not Track&quot; flag to legal status. If the flag is enabled it <i>must</i> be obeyed without any further questions to the end-users. Making it mandatory would have solved the problem with this flag which was that everyone simply ignored it and it only added an extra bit of entropy for fingerprinting.<p>If this flag had become mandatory, the browsers that have removed it would have brought it back immediately because it actually would have become functional. Also, the onus would have been on the advertisers to stop friction for those who don&#x27;t mind to be tracked. Instead of tricking people with cookiewalls the focus would have been on making the &quot;tracked&quot; experience as frictionless as the flag itself is.<p>But I guess the industry lobbied very heavily for this flag not to become mandatory because it would have instantly cut their tracking to near-zero and therefore remove the raison d&#x27;etre of many of these adtech businesses. It would have shocked the industry more than Apple&#x27;s ID thing did to facebook. No big deal though IMO because this industry is undesirable and it would have triggered some real innovation in context-driven ads that are not privacy invasive.<p>It would have been the only good option though for the citizens. What the EU has done has only backfired on itself with everyone including the lobbyists blaming them for the cookiewall mess.</div><br/></div></div><div id="37995725" class="c"><input type="checkbox" id="c-37995725" checked=""/><div class="controls bullet"><span class="by">skrebbel</span><span>|</span><a href="#37995078">root</a><span>|</span><a href="#37995270">parent</a><span>|</span><a href="#37995869">prev</a><span>|</span><a href="#37996118">next</a><span>|</span><label class="collapse" for="c-37995725">[-]</label><label class="expand" for="c-37995725">[1 more]</label></div><br/><div class="children"><div class="content">No but some agency they hired for their website it.</div><br/></div></div></div></div></div></div><div id="37996118" class="c"><input type="checkbox" id="c-37996118" checked=""/><div class="controls bullet"><span class="by">zacharyvoase</span><span>|</span><a href="#37995078">prev</a><span>|</span><a href="#37994320">next</a><span>|</span><label class="collapse" for="c-37996118">[-]</label><label class="expand" for="c-37996118">[1 more]</label></div><br/><div class="children"><div class="content">Hi! Author of this proposal here.<p>I’m loving all the feedback and wanted to address some things:<p>* Yes, nonce tracking is expensive. HTTP request signatures could be used instead of nonces—they’re just not fully fleshed out yet, from what I can tell. And a lot of other crypto systems we rely on in Web traffic today also assume proper nonce tracking. Fortunately you only need to track distinct nonces per established session, so you could wait to allocate storage for them until the client actually tries to set up a WebSession, and use a Bloom filter to save on storage at the risk of some false positives for nonce reuse (could be risky if you’re relying on that as tamper evidence, but you could tune your filters accordingly).<p>* The stuff about the ergonomics of cookies and banners and auto-log-out as they currently are is mostly incidental. I’m just trying to paint a picture of how tighter integration of the notion of a ‘session’ into the browser itself could improve the UX we currently have today.<p>* Many people have pointed out that this is not stateless. Indeed! This is supposed to be a more secure way of establishing a stateful connection over a stateless protocol, for which there is already a demand which we’re meeting with the least secure possible method (bearer tokens sent in plaintext over the channel). Issues with scalability need to be addressed on the implementation side, but I believe the protocol is still sound and not inherently unscalable (no more than TLS in its current form).<p>I am going to look for opportunities to fold these points into the document itself, and maybe rearrange some of it so that these points get covered earlier and more clearly.</div><br/></div></div><div id="37994320" class="c"><input type="checkbox" id="c-37994320" checked=""/><div class="controls bullet"><span class="by">porridgeraisin</span><span>|</span><a href="#37996118">prev</a><span>|</span><a href="#37995845">next</a><span>|</span><label class="collapse" for="c-37994320">[-]</label><label class="expand" for="c-37994320">[3 more]</label></div><br/><div class="children"><div class="content">The only real advantage I see here is having a dedicated storage for session identifiers as opposed to clubbing it with other non-essential cookies.<p>Everything else in the proposal isn&#x27;t really required.<p>Considering this, simply choosing a standard name for session cookies suffices.<p>Browsers can give an option to the user to rejects all cookies that don&#x27;t have the name &quot;WebSession&quot;. This is already achievable using extensions like uMatrix.</div><br/><div id="37995135" class="c"><input type="checkbox" id="c-37995135" checked=""/><div class="controls bullet"><span class="by">lolinder</span><span>|</span><a href="#37994320">parent</a><span>|</span><a href="#37995845">next</a><span>|</span><label class="collapse" for="c-37995135">[-]</label><label class="expand" for="c-37995135">[2 more]</label></div><br/><div class="children"><div class="content">The instant you implement that, then everyone will just start squeezing all the tracking information they need into the WebSession cookie. Plus, this isn&#x27;t backwards compatible with all the existing servers that use custom names for the session cookie. PHPSESSID, session_id, etc.</div><br/><div id="37996432" class="c"><input type="checkbox" id="c-37996432" checked=""/><div class="controls bullet"><span class="by">extraduder_ire</span><span>|</span><a href="#37994320">root</a><span>|</span><a href="#37995135">parent</a><span>|</span><a href="#37995845">next</a><span>|</span><label class="collapse" for="c-37996432">[-]</label><label class="expand" for="c-37996432">[1 more]</label></div><br/><div class="children"><div class="content">&gt; everyone will just start squeezing all the tracking information they need into the WebSession cookie<p>Why would you need to put more information into the cookie if it&#x27;s already unique?</div><br/></div></div></div></div></div></div><div id="37995845" class="c"><input type="checkbox" id="c-37995845" checked=""/><div class="controls bullet"><span class="by">grammers</span><span>|</span><a href="#37994320">prev</a><span>|</span><a href="#37994560">next</a><span>|</span><label class="collapse" for="c-37995845">[-]</label><label class="expand" for="c-37995845">[3 more]</label></div><br/><div class="children"><div class="content">Cookies are not really about security, but privacy. Their tracking of your online habits are bad; how would that change with WebSessions?</div><br/><div id="37996324" class="c"><input type="checkbox" id="c-37996324" checked=""/><div class="controls bullet"><span class="by">denton-scratch</span><span>|</span><a href="#37995845">parent</a><span>|</span><a href="#37996341">next</a><span>|</span><label class="collapse" for="c-37996324">[-]</label><label class="expand" for="c-37996324">[1 more]</label></div><br/><div class="children"><div class="content">From my reading of the article, WebSessions specifically <i>doesn&#x27;t</i> do tracking. It&#x27;s a replacement only for session cookies, not for tracking cookies. So with WebSessions for session maintenance, you can turn of cookies completely, if you want to avoid tracking.<p>It looks pretty reasonable to me (except possibly the nonce-management bit). I can&#x27;t be bothered to try and pick it apart, and anyway I&#x27;m no expert.</div><br/></div></div><div id="37996341" class="c"><input type="checkbox" id="c-37996341" checked=""/><div class="controls bullet"><span class="by">psd1</span><span>|</span><a href="#37995845">parent</a><span>|</span><a href="#37996324">prev</a><span>|</span><a href="#37994560">next</a><span>|</span><label class="collapse" for="c-37996341">[-]</label><label class="expand" for="c-37996341">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t clear cookies because session cookies are useful. If cookies are never session cookies, then I can treat all cookies as useless.</div><br/></div></div></div></div><div id="37994560" class="c"><input type="checkbox" id="c-37994560" checked=""/><div class="controls bullet"><span class="by">josephcsible</span><span>|</span><a href="#37995845">prev</a><span>|</span><a href="#37994078">next</a><span>|</span><label class="collapse" for="c-37994560">[-]</label><label class="expand" for="c-37994560">[2 more]</label></div><br/><div class="children"><div class="content">&gt; It’s also very common that a website wants credentials to be cleared when the user is inactive for a certain amount of time. This is important for sensitive applications such as banking and healthcare. Currently there’s no way to enforce that a cookie is cleared on device lock or user inactivity, <i>especially</i> because security requires that such cookies not be visible to JavaScript. A native session management solution should be able to request that the browser clear a session in the case of device lock, the user navigating away, etc.<p>Ah, here&#x27;s the evil part. If I don&#x27;t want my browser to log me out of my bank&#x27;s website when I lock my screen, my bank shouldn&#x27;t be able to make it do so anyway.</div><br/><div id="37994667" class="c"><input type="checkbox" id="c-37994667" checked=""/><div class="controls bullet"><span class="by">paranoidrobot</span><span>|</span><a href="#37994560">parent</a><span>|</span><a href="#37994078">next</a><span>|</span><label class="collapse" for="c-37994667">[-]</label><label class="expand" for="c-37994667">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a user-agent directive, so should be controllable in your browser.</div><br/></div></div></div></div><div id="37994078" class="c"><input type="checkbox" id="c-37994078" checked=""/><div class="controls bullet"><span class="by">johncolanduoni</span><span>|</span><a href="#37994560">prev</a><span>|</span><a href="#37995617">next</a><span>|</span><label class="collapse" for="c-37994078">[-]</label><label class="expand" for="c-37994078">[2 more]</label></div><br/><div class="children"><div class="content">I’d like to understand the threat model under which this is supposed to be superior to a bearer token stored in a heavily restricted (__Host- prefixed, Secure, HttpOnly, SameSite=Lax) cookie. Neither can be exfiltrated by JavaScript so they’re in pretty much the same spot as far as XSS is concerned. Both can be captured if the user agent is compromised so there’s no difference there AFAICT. Is interception of traffic or errant logging really a big source of compromised bearer tokens?</div><br/><div id="37995126" class="c"><input type="checkbox" id="c-37995126" checked=""/><div class="controls bullet"><span class="by">butlerm</span><span>|</span><a href="#37994078">parent</a><span>|</span><a href="#37995617">next</a><span>|</span><label class="collapse" for="c-37995126">[-]</label><label class="expand" for="c-37995126">[1 more]</label></div><br/><div class="children"><div class="content">Errant logging and transfer for technical support apparently nearly lead to a security compromise at Cloudflare recently.</div><br/></div></div></div></div><div id="37995617" class="c"><input type="checkbox" id="c-37995617" checked=""/><div class="controls bullet"><span class="by">dcow</span><span>|</span><a href="#37994078">prev</a><span>|</span><a href="#37993848">next</a><span>|</span><label class="collapse" for="c-37995617">[-]</label><label class="expand" for="c-37995617">[1 more]</label></div><br/><div class="children"><div class="content">Few things commenters are missing:<p>1. If you want the protocol to be “stateless” (once the session is established, that is), use a fixed, or allow any, nonce.<p>1.5: The proposed nonce tracking scheme <i>is</i> naïve but it’s pretty easy to devise alternatives and provide options (store active instead of expired nonces, nonce pool, or counter as nonce) depending on your threat model and security requirements. And sometimes naïve is all you need: if your nonces are session scoped and sessions are short (a session could be entirely ephemeral never hitting anything beyond Redis) then why not keep track of a few hundred nonces.<p>2. The point of this over cookies is that it is purpose built for maintaining sessions and secure by default. I’d love to turn off all cookies some day and have good sites still work normally.<p>3. The DH gives you asymmetric crypto meaning session token is never sent over the wire so it improves on the fundamental idea of a session in tue first place. It’s more than just a special cookie jar called websession with sane defaults.</div><br/></div></div><div id="37993848" class="c"><input type="checkbox" id="c-37993848" checked=""/><div class="controls bullet"><span class="by">FreakLegion</span><span>|</span><a href="#37995617">prev</a><span>|</span><a href="#37994340">next</a><span>|</span><label class="collapse" for="c-37993848">[-]</label><label class="expand" for="c-37993848">[2 more]</label></div><br/><div class="children"><div class="content">DPoP[1] is on its way and already starting to see adoption by identity providers like Okta[2] (oh, the comedy). It&#x27;s unfortunately specific to OAuth, so narrower in terms of application, but will cover how most web apps work today.<p>1. <a href="https:&#x2F;&#x2F;oauth.net&#x2F;2&#x2F;dpop&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;oauth.net&#x2F;2&#x2F;dpop&#x2F;</a><p>2. <a href="https:&#x2F;&#x2F;www.okta.com&#x2F;blog&#x2F;2023&#x2F;06&#x2F;a-leap-forward-in-token-security-okta-adds-support-for-dpop&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.okta.com&#x2F;blog&#x2F;2023&#x2F;06&#x2F;a-leap-forward-in-token-se...</a></div><br/><div id="37995997" class="c"><input type="checkbox" id="c-37995997" checked=""/><div class="controls bullet"><span class="by">zacharyvoase</span><span>|</span><a href="#37993848">parent</a><span>|</span><a href="#37994340">next</a><span>|</span><label class="collapse" for="c-37995997">[-]</label><label class="expand" for="c-37995997">[1 more]</label></div><br/><div class="children"><div class="content">I see this as a complementary form of DPoP for first-party browser sessions. I took a lot of inspiration from DPoP, with the main novel construction being HMAC signatures over an interactively-negotiated shared secret vs. new elliptic curve signatures for every request.</div><br/></div></div></div></div><div id="37994340" class="c"><input type="checkbox" id="c-37994340" checked=""/><div class="controls bullet"><span class="by">X-Cubed</span><span>|</span><a href="#37993848">prev</a><span>|</span><a href="#37995413">next</a><span>|</span><label class="collapse" for="c-37994340">[-]</label><label class="expand" for="c-37994340">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t get why WebSession proposes to use authentication headers like WWW-Authenticate, when it calls out at the start that it&#x27;s not a replacement for authentication protocols. If that&#x27;s the case, surely it should just be using it&#x27;s own headers to avoid confusion.</div><br/></div></div><div id="37995413" class="c"><input type="checkbox" id="c-37995413" checked=""/><div class="controls bullet"><span class="by">paradite</span><span>|</span><a href="#37994340">prev</a><span>|</span><a href="#37993808">next</a><span>|</span><label class="collapse" for="c-37995413">[-]</label><label class="expand" for="c-37995413">[3 more]</label></div><br/><div class="children"><div class="content">I know this is a replacement for cookie, but some web apps use JS and sessionStorage on browser to store session token instead of using cookie.<p>This protocol seems to also depend on JS to do client side cryto logic and adding HTTP headers. Unless by browser&#x2F;client it means the actual browser, which would take ages to get implemented across all user agents. In which case, it would likely be polyfilled by JS first as the de facto standard of doing things.<p>I wonder how this compares to using sessionStorage.</div><br/><div id="37995631" class="c"><input type="checkbox" id="c-37995631" checked=""/><div class="controls bullet"><span class="by">nneonneo</span><span>|</span><a href="#37995413">parent</a><span>|</span><a href="#37995664">next</a><span>|</span><label class="collapse" for="c-37995631">[-]</label><label class="expand" for="c-37995631">[1 more]</label></div><br/><div class="children"><div class="content">The protocol does provide for fallback: if the client doesn’t understand the WWW-Authenticate: WebSession header, it can just choose to ignore it and send a request without Authorization, at which point the server can fall back to a traditional session mechanism.</div><br/></div></div><div id="37995664" class="c"><input type="checkbox" id="c-37995664" checked=""/><div class="controls bullet"><span class="by">zmxz</span><span>|</span><a href="#37995413">parent</a><span>|</span><a href="#37995631">prev</a><span>|</span><a href="#37993808">next</a><span>|</span><label class="collapse" for="c-37995664">[-]</label><label class="expand" for="c-37995664">[1 more]</label></div><br/><div class="children"><div class="content">&gt; This protocol seems to also depend on JS<p>It doesn&#x27;t mention any dependency on JS, there&#x27;s pseudocode in Python to demonstrate generating&#x2F;using the token.<p>&gt; but some web apps use JS and sessionStorage on browser to store session token instead of using cookie<p>This is particularly strange, I&#x27;ve seen that frontend apps do this but I can&#x27;t understand why because it&#x27;s error prone and excellent attack vector. It boils down to emulating cookies, having to have some sort of request interceptor that includes the token on every XHR&#x2F;fetch to serverside and another interceptor that saves updated token on every valid response from serverside. It seems like a misguided attempt to rectify problems that stem from CORS handling or shortsighted design where auth was bolted on as an afterthought.</div><br/></div></div></div></div><div id="37993808" class="c"><input type="checkbox" id="c-37993808" checked=""/><div class="controls bullet"><span class="by">TheGeminon</span><span>|</span><a href="#37995413">prev</a><span>|</span><a href="#37994607">next</a><span>|</span><label class="collapse" for="c-37993808">[-]</label><label class="expand" for="c-37993808">[1 more]</label></div><br/><div class="children"><div class="content">This seems like a great way to pull out session identity from cookies and sidestep a lot of the baggage there.<p>I would caution framing it as a secure replacement for cookies, it’s a secure replacement for session ID token cookies. Tons of cookies aren’t just opaque IDs.</div><br/></div></div><div id="37994607" class="c"><input type="checkbox" id="c-37994607" checked=""/><div class="controls bullet"><span class="by">bloody-crow</span><span>|</span><a href="#37993808">prev</a><span>|</span><a href="#37994957">next</a><span>|</span><label class="collapse" for="c-37994607">[-]</label><label class="expand" for="c-37994607">[1 more]</label></div><br/><div class="children"><div class="content">I feel like nonce-tracking on the server side makes it a non-viable solution for a lot if not most of applications. A nonce needs to be stored&#x2F;validated on every request, even a GET one. Seems like a recipe for DDoS.</div><br/></div></div><div id="37994957" class="c"><input type="checkbox" id="c-37994957" checked=""/><div class="controls bullet"><span class="by">patmcc</span><span>|</span><a href="#37994607">prev</a><span>|</span><a href="#37994392">next</a><span>|</span><label class="collapse" for="c-37994957">[-]</label><label class="expand" for="c-37994957">[3 more]</label></div><br/><div class="children"><div class="content">&gt;&gt;&gt;If someone steals this cookie, they can impersonate you.<p>Right; but with WebSession, if someone steals the client keypair (and generated shared secret), they can impersonate you just as easily. Why would this be any more secure against that?<p>Cookies aren&#x27;t perfect, for sure, but I don&#x27;t think this solves it.</div><br/><div id="37995399" class="c"><input type="checkbox" id="c-37995399" checked=""/><div class="controls bullet"><span class="by">dcow</span><span>|</span><a href="#37994957">parent</a><span>|</span><a href="#37995070">next</a><span>|</span><label class="collapse" for="c-37995399">[-]</label><label class="expand" for="c-37995399">[1 more]</label></div><br/><div class="children"><div class="content">You can steal a bearer token just by observing the request. You <i>can’t</i> steal a private key by observing a signed request. With a WebSession the attacker has to <i>pwn your machine</i> instead of your DNS.</div><br/></div></div></div></div><div id="37994392" class="c"><input type="checkbox" id="c-37994392" checked=""/><div class="controls bullet"><span class="by">codetrotter</span><span>|</span><a href="#37994957">prev</a><span>|</span><a href="#37993798">next</a><span>|</span><label class="collapse" for="c-37994392">[-]</label><label class="expand" for="c-37994392">[1 more]</label></div><br/><div class="children"><div class="content">It links a github repo, but that repo gives 404<p>Maybe the repo is set to private?</div><br/></div></div><div id="37993798" class="c"><input type="checkbox" id="c-37993798" checked=""/><div class="controls bullet"><span class="by">quickthrower2</span><span>|</span><a href="#37994392">prev</a><span>|</span><a href="#37994051">next</a><span>|</span><label class="collapse" for="c-37993798">[-]</label><label class="expand" for="c-37993798">[1 more]</label></div><br/><div class="children"><div class="content">Seems like a good proposal to me. Maybe there are privacy&#x2F;security holes?<p>Is it sort of like a &quot;rich mans&quot; CSRF token, but you don&#x27;t need to put it in the form, and it works on all requests GET, POST, ..., and is cryptographically secure etc.</div><br/></div></div><div id="37994051" class="c"><input type="checkbox" id="c-37994051" checked=""/><div class="controls bullet"><span class="by">pyrolistical</span><span>|</span><a href="#37993798">prev</a><span>|</span><a href="#37994049">next</a><span>|</span><label class="collapse" for="c-37994051">[-]</label><label class="expand" for="c-37994051">[1 more]</label></div><br/><div class="children"><div class="content">Seems complicated. Seems like what is desired here is some sort of shared secret. Then use it to generate a sequence of session ids.<p>Feels like there is a similar algorithm to get that than what is proposed here</div><br/></div></div><div id="37994049" class="c"><input type="checkbox" id="c-37994049" checked=""/><div class="controls bullet"><span class="by">zebomon</span><span>|</span><a href="#37994051">prev</a><span>|</span><a href="#37994350">next</a><span>|</span><label class="collapse" for="c-37994049">[-]</label><label class="expand" for="c-37994049">[1 more]</label></div><br/><div class="children"><div class="content">Great overview of cookie&#x27;s shortcomings, and thank you very much for the solution.<p>By the way, the Github link at the top of the page is 404.</div><br/></div></div><div id="37994350" class="c"><input type="checkbox" id="c-37994350" checked=""/><div class="controls bullet"><span class="by">DaiPlusPlus</span><span>|</span><a href="#37994049">prev</a><span>|</span><a href="#37993744">next</a><span>|</span><label class="collapse" for="c-37994350">[-]</label><label class="expand" for="c-37994350">[1 more]</label></div><br/><div class="children"><div class="content">TL;DR: A web-browser-based, non-JS-exposed, request authentication scheme using signed requests.<p>I see some problems:<p>1) This is a stateful protocol: Bearer-tokens are popular despite their insecurity because they allow remote-services to be entirely stateless (and thus, scalable), but this approach requires the remote-service to maintain a database of current private sesion ids (&quot;Looking up the corresponding Spriv for the session;&quot;) <i>and</i> storing the nonce of every request made (&quot;while also checking to make sure that nonce has not been used before.&quot;). This will not scale (and could even be a way to DDoS a server by hammering it with requests from distinct sessions).<p>2) The requirement of a handshake: which means the first HTTP request a browser makes can&#x27;t be pre-authenticated, which makes for a suboptimal user-experience.<p>3) Good luck getting browser-vendors to all buy-in to this; I&#x27;m sure Mozilla will be happy to accept a PR, but the other players (Google, Microsoft, and Apple) will all have their reasons to drag their feet on this, and that&#x27;s assuming it&#x27;s even in their interests to support this (e.g. look at how Google tried to kill Apple&#x27;s Storage Access API).<p>4) The hard requirement for a browser-based UI restricts the kinds of session activities you can support, e.g. consider how larger-scale web-applications don&#x27;t have simple, single-user sessions, but will support things like impersonation, delegation, multi-tenancy and tenant partitions - this can&#x27;t be reconciled with how browser-vendors will only want to display (at most) a simple yes&#x2F;no prompt or a list of known sessions.<p>When it comes to new browser-based security protocols, it&#x27;s a triangle problem:  Replay protection, Statelessness, No handshake requirement: pick any 2.<p>----<p>Request-signing can work, obviously we can&#x27;t rely on whole-request signatures (because the body-length is unbounded and can be streaming); but using a time-based nonce with a remote-service-provided preshared key (which can be derived from the existing underlying TLS session without needing a HTTP handshake). ...but what value does this add when cookies+TLS already work fine for this purpose? Thus, this is why nothing changes in this area.<p>I&#x27;d very much rather see a &quot;Cookies 2.0&quot; (&quot;WebCookies&quot; to use the current nomenclature) that provides a way for a declared JS (just like with ServiceWorkers today) to run with privileged access to the user&#x27;s cookie store (thus side-stepping XSS&#x2F;script-injection problems; the &quot;trusted JS&quot; could be declared via a HTTP header) as well as (yet another) cookie flag, but this time to designate cookie-expiration-due-to-local-user-inactivity. Oh, and a <i>proper</i> DOM API for cookies like we have with localStorage, and not the horrible stringly-typed `document.cookies` property. I don&#x27;t understand why no-one has seen fit to add simple `add(key,value)` and `get(key)` functions to it. Argh.</div><br/></div></div><div id="37993744" class="c"><input type="checkbox" id="c-37993744" checked=""/><div class="controls bullet"><span class="by">gigel82</span><span>|</span><a href="#37994350">prev</a><span>|</span><a href="#37994099">next</a><span>|</span><label class="collapse" for="c-37993744">[-]</label><label class="expand" for="c-37993744">[2 more]</label></div><br/><div class="children"><div class="content">Not going to comment on the technical merits of this proposal because it&#x27;s not my area of expertise but as a user I look at any proposal in this space with extreme caution (because most of the time &quot;the man&quot; really is out to &quot;get you&quot; - see &quot;Web Environment Integrity&quot;).<p>I&#x27;m a big fan of Firefox&#x27;s Total Cookie Protection and make extensive use of the &quot;Temporary Containers&quot; extension, so I will likely disable this feature as well if it becomes standard because it eventually boils down to making tracking easier.</div><br/><div id="37994059" class="c"><input type="checkbox" id="c-37994059" checked=""/><div class="controls bullet"><span class="by">ghayes</span><span>|</span><a href="#37993744">parent</a><span>|</span><a href="#37994099">next</a><span>|</span><label class="collapse" for="c-37994059">[-]</label><label class="expand" for="c-37994059">[1 more]</label></div><br/><div class="children"><div class="content">This would be more akin to being logged in to a specific site with a JWT than to tracking writ large. Basically, if your site has access to this secure key, then it already knows who you are (i.e. because you are logged in). This key would never be shared with third-party sites and doesn’t introduce any novel ways of doing so. You could clear the token by clearing website storage or disabling JavaScript.</div><br/></div></div></div></div><div id="37994099" class="c"><input type="checkbox" id="c-37994099" checked=""/><div class="controls bullet"><span class="by">username3</span><span>|</span><a href="#37993744">prev</a><span>|</span><label class="collapse" for="c-37994099">[-]</label><label class="expand" for="c-37994099">[1 more]</label></div><br/><div class="children"><div class="content">How does this compare to Phoenix LiveView websocket sessions?</div><br/></div></div></div></div></div></div></div></body></html>