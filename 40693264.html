<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1718614868161" as="style"/><link rel="stylesheet" href="styles.css?v=1718614868161"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://laurent.le-brun.eu/blog/the-story-of-reformatting-100k-files-at-google-in-2011">Reformatting 100k Files at Google in 2011</a> <span class="domain">(<a href="https://laurent.le-brun.eu">laurent.le-brun.eu</a>)</span></div><div class="subtext"><span>laurentlb</span> | <span>138 comments</span></div><br/><div><div id="40694293" class="c"><input type="checkbox" id="c-40694293" checked=""/><div class="controls bullet"><span class="by">rsc</span><span>|</span><a href="#40693851">next</a><span>|</span><label class="collapse" for="c-40694293">[-]</label><label class="expand" for="c-40694293">[7 more]</label></div><br/><div class="children"><div class="content">My notes say it was 193k at the start. The final dashboard when we stopped said &quot;216,626 &#x2F; 216,890 = 99.8%; 264 to go&quot;.<p>The other correction I would make is that this post does not mention Nilton Volpato, who had written an earlier Buildifier and graciously accepted replacing his implementation with a new one and then taking over ownership for that new implementation as well. (Eventually ownership moved to Laurent&#x27;s team.)<p>It looks like it was just under 2,000 commits. We did pretty extensive testing, by having Blaze load a BUILD file and its transitive closure and then dump that parsed form back out to a binary format. Any automated commit had to preserve that parsed-and-dumped binary format bit for bit. The slowest part of the testing was waiting for Blaze to do all the loads.<p>Every day I would prepare and test as many files as I could, break them into CLs (think PRs), mail Rob a shell script he could run to approve them all, and go to bed. Then I&#x27;d get up early in the morning (5am ET) to submit the changes, because there were various cached indexes that got updated when BUILD files got submitted, and it seemed better to send them when not many people would be working.<p>That scheme worked until a system did fall over and someone got paged, and then after that I agreed to only submit the large changes during business hours. :-)</div><br/><div id="40698731" class="c"><input type="checkbox" id="c-40698731" checked=""/><div class="controls bullet"><span class="by">haburka</span><span>|</span><a href="#40694293">parent</a><span>|</span><a href="#40696996">next</a><span>|</span><label class="collapse" for="c-40698731">[-]</label><label class="expand" for="c-40698731">[5 more]</label></div><br/><div class="children"><div class="content">You didn’t have Rosie to automatically split up your changes and send them out yet?? That must have been rough. LSCs are way easier now</div><br/><div id="40700320" class="c"><input type="checkbox" id="c-40700320" checked=""/><div class="controls bullet"><span class="by">ammar2</span><span>|</span><a href="#40694293">root</a><span>|</span><a href="#40698731">parent</a><span>|</span><a href="#40696996">next</a><span>|</span><label class="collapse" for="c-40700320">[-]</label><label class="expand" for="c-40700320">[4 more]</label></div><br/><div class="children"><div class="content">Yeah I&#x27;m surprised by that as well. As far as I remember, Rosie started out in 2010 and people were using in 2012. Maybe the clustering&#x2F;splitting didn&#x27;t support this use-case or it wasn&#x27;t well-known enough?</div><br/><div id="40701065" class="c"><input type="checkbox" id="c-40701065" checked=""/><div class="controls bullet"><span class="by">singron</span><span>|</span><a href="#40694293">root</a><span>|</span><a href="#40700320">parent</a><span>|</span><a href="#40696996">next</a><span>|</span><label class="collapse" for="c-40701065">[-]</label><label class="expand" for="c-40701065">[3 more]</label></div><br/><div class="children"><div class="content">From my memory, extremely large but semantically simple changes still used global approvers since it wasn&#x27;t considered worth the effort to get approval from hundreds or thousands of individual OWNERs using rosie. Also, with a change of this magnitude, especially one affecting BUILD files, it might not have been possible to create the mega-CL that rosie uses, but I don&#x27;t remember specific limitations on that.</div><br/><div id="40701602" class="c"><input type="checkbox" id="c-40701602" checked=""/><div class="controls bullet"><span class="by">jrockway</span><span>|</span><a href="#40694293">root</a><span>|</span><a href="#40701065">parent</a><span>|</span><a href="#40696996">next</a><span>|</span><label class="collapse" for="c-40701602">[-]</label><label class="expand" for="c-40701602">[2 more]</label></div><br/><div class="children"><div class="content">That&#x27;s exactly what I remember.  I did a few LSCs; one I used Rosie just to see how it worked (I recall wanting to use it for all my CLs because it submits after someone clicks approve and the tests pass), but most of the time it was easier to find a global approver and submit the whole thing atomically.</div><br/><div id="40702389" class="c"><input type="checkbox" id="c-40702389" checked=""/><div class="controls bullet"><span class="by">dartos</span><span>|</span><a href="#40694293">root</a><span>|</span><a href="#40701602">parent</a><span>|</span><a href="#40696996">next</a><span>|</span><label class="collapse" for="c-40702389">[-]</label><label class="expand" for="c-40702389">[1 more]</label></div><br/><div class="children"><div class="content">I always appreciate these googler threads talking about all the Google internal tools.<p>Reminds me of all the impenetrable jargon around me when I was new</div><br/></div></div></div></div></div></div></div></div></div></div><div id="40696996" class="c"><input type="checkbox" id="c-40696996" checked=""/><div class="controls bullet"><span class="by">laurentlb</span><span>|</span><a href="#40694293">parent</a><span>|</span><a href="#40698731">prev</a><span>|</span><a href="#40693851">next</a><span>|</span><label class="collapse" for="c-40696996">[-]</label><label class="expand" for="c-40696996">[1 more]</label></div><br/><div class="children"><div class="content">Thanks for the precisions! I&#x27;ve added some updates at the bottom of the post.</div><br/></div></div></div></div><div id="40693851" class="c"><input type="checkbox" id="c-40693851" checked=""/><div class="controls bullet"><span class="by">wonger_</span><span>|</span><a href="#40694293">prev</a><span>|</span><a href="#40702559">next</a><span>|</span><label class="collapse" for="c-40693851">[-]</label><label class="expand" for="c-40693851">[60 more]</label></div><br/><div class="children"><div class="content">Autoformatting is so nice. Crazy to think that formatters only became popular after `gofmt`.<p>I also found this related quote from Russ Cox intriguing: &quot;Most people think that we format Go code with gofmt to make code look nicer or to end debates among team members about program layout. But the most important reason for gofmt is that if an algorithm defines how Go source code is formatted, then programs, like goimports or gorename or go fix, can edit the source code more easily, without introducing spurious formatting changes when writing the code back. This helps you maintain code over time.&quot;</div><br/><div id="40694187" class="c"><input type="checkbox" id="c-40694187" checked=""/><div class="controls bullet"><span class="by">autarch</span><span>|</span><a href="#40693851">parent</a><span>|</span><a href="#40694314">next</a><span>|</span><label class="collapse" for="c-40694187">[-]</label><label class="expand" for="c-40694187">[16 more]</label></div><br/><div class="children"><div class="content">The Perl world had perltidy (first release in 2002) many years before Go was even a thing. It&#x27;s funny that Perl, a language notorious for it&#x27;s &quot;There&#x27;s More Than One Way To Do It&quot; (TMTOWTDI) philosophy had a tidier so early. Of course, perltidy is _ridiculously_ configurable.<p>One thing I really love about gofmt is that it has no configuration at all. I think that was a major &quot;innovation&quot; and I&#x27;d love to see more languages adopt this approach.</div><br/><div id="40703174" class="c"><input type="checkbox" id="c-40703174" checked=""/><div class="controls bullet"><span class="by">rurban</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40694187">parent</a><span>|</span><a href="#40701562">next</a><span>|</span><label class="collapse" for="c-40703174">[-]</label><label class="expand" for="c-40703174">[1 more]</label></div><br/><div class="children"><div class="content">I now almost always format C and C++ with clang-format -I pure, without any .clang-format overrides.<p>There&#x27;s no need for lengthy discussions with co-workers then. Just for bigger projects there&#x27;s a need for Statement Macro Declarations, but that&#x27;s arguably a bug&#x2F;limitation in clang-format</div><br/></div></div><div id="40701562" class="c"><input type="checkbox" id="c-40701562" checked=""/><div class="controls bullet"><span class="by">ravishi</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40694187">parent</a><span>|</span><a href="#40703174">prev</a><span>|</span><a href="#40701286">next</a><span>|</span><label class="collapse" for="c-40701562">[-]</label><label class="expand" for="c-40701562">[13 more]</label></div><br/><div class="children"><div class="content">The thing about configurable vs non-configurable in this case is that when its configurable then people will spend time debating how exactly they should configure it.</div><br/><div id="40701570" class="c"><input type="checkbox" id="c-40701570" checked=""/><div class="controls bullet"><span class="by">autarch</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40701562">parent</a><span>|</span><a href="#40701286">next</a><span>|</span><label class="collapse" for="c-40701570">[-]</label><label class="expand" for="c-40701570">[12 more]</label></div><br/><div class="children"><div class="content">Yes, that&#x27;s why I love gofmt. There&#x27;s nothing to debate!</div><br/><div id="40701627" class="c"><input type="checkbox" id="c-40701627" checked=""/><div class="controls bullet"><span class="by">jrockway</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40701570">parent</a><span>|</span><a href="#40702258">next</a><span>|</span><label class="collapse" for="c-40701627">[-]</label><label class="expand" for="c-40701627">[5 more]</label></div><br/><div class="children"><div class="content">Helpfully, you can debate between &quot;gofmt&quot;, &quot;gofmt -s&quot; and &quot;gofumpt&quot;.<p>I actually like how gofumpt formats stuff but ... nobody else on the team would have it, so it would make things worse.</div><br/><div id="40703107" class="c"><input type="checkbox" id="c-40703107" checked=""/><div class="controls bullet"><span class="by">dmurray</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40701627">parent</a><span>|</span><a href="#40701675">next</a><span>|</span><label class="collapse" for="c-40703107">[-]</label><label class="expand" for="c-40703107">[3 more]</label></div><br/><div class="children"><div class="content">You could always have your editor reformat files in gofumpt&#x27;s way before viewing code or diffs, and reformat with go fmt when committing.<p>I&#x27;ve never seen anyone with a workflow like this (lots of people have the second part, of course, but not the first one), nor tooling that makes it a really natural thing to do, but wouldn&#x27;t it work? There are some pain points if you ever want to pair program or if you use multiple tools to collaborate on code.</div><br/><div id="40703558" class="c"><input type="checkbox" id="c-40703558" checked=""/><div class="controls bullet"><span class="by">cmcaine</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40703107">parent</a><span>|</span><a href="#40701675">next</a><span>|</span><label class="collapse" for="c-40703558">[-]</label><label class="expand" for="c-40703558">[2 more]</label></div><br/><div class="children"><div class="content">No, you&#x27;d likely get unrelated style changes in your commits. Read the gofumpt readme to understand why.</div><br/><div id="40703640" class="c"><input type="checkbox" id="c-40703640" checked=""/><div class="controls bullet"><span class="by">dmurray</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40703558">parent</a><span>|</span><a href="#40701675">next</a><span>|</span><label class="collapse" for="c-40703640">[-]</label><label class="expand" for="c-40703640">[1 more]</label></div><br/><div class="children"><div class="content">I see! Seems like neither formatter is completely rigid, and both respect some style decisions made by the programmer, so this level of automated reformatting isn&#x27;t possible.</div><br/></div></div></div></div></div></div><div id="40701675" class="c"><input type="checkbox" id="c-40701675" checked=""/><div class="controls bullet"><span class="by">autarch</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40701627">parent</a><span>|</span><a href="#40703107">prev</a><span>|</span><a href="#40702258">next</a><span>|</span><label class="collapse" for="c-40701675">[-]</label><label class="expand" for="c-40701675">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, there&#x27;s still a few options. But try running `perltidy --help`. Even that doesn&#x27;t really give you a sense of how many options there are because many of the options are not booleans, but instead take several enum values indicating which style to choose.</div><br/></div></div></div></div><div id="40702258" class="c"><input type="checkbox" id="c-40702258" checked=""/><div class="controls bullet"><span class="by">josephg</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40701570">parent</a><span>|</span><a href="#40701627">prev</a><span>|</span><a href="#40701286">next</a><span>|</span><label class="collapse" for="c-40702258">[-]</label><label class="expand" for="c-40702258">[6 more]</label></div><br/><div class="children"><div class="content">I hate formatters like this with a passion. I realised when I tried it that there’s hundreds of tiny editorial choices I make throughout my source files. For example, I use different numbers of new lines between functions in a file to indicate similarity or to group functions together. Sometimes I’ll put a simple function on one line - like lerp or vecadd and then make a block of similar functions in my code. Stuff like that.<p>By removing the maker’s marks, these tools make my code less readable. While, in my opinion, adding practically no value. I’m more than happy for every line of code to have consistent indentation (of course, but it did already). I also don&#x27;t have a problem with silly but arbitrary formatting choices - like sorting my import lines. But these tools seem to drive so far for consistency that it costs readability.<p>That’s a nope for me. No debate.</div><br/><div id="40702457" class="c"><input type="checkbox" id="c-40702457" checked=""/><div class="controls bullet"><span class="by">stavros</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40702258">parent</a><span>|</span><a href="#40702459">next</a><span>|</span><label class="collapse" for="c-40702457">[-]</label><label class="expand" for="c-40702457">[1 more]</label></div><br/><div class="children"><div class="content">These tools, like any tool of the type, bring your code to the 90th percentile. This is good for nine out of ten people, because it improves their code. It&#x27;s also good for the tenth person, when he has to read the code of the other nine.<p>If you&#x27;re the tenth person, and you work alone, or with other fastidious people, you won&#x27;t like the formatter. That&#x27;s fine, you don&#x27;t need to use it.</div><br/></div></div><div id="40702459" class="c"><input type="checkbox" id="c-40702459" checked=""/><div class="controls bullet"><span class="by">autarch</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40702258">parent</a><span>|</span><a href="#40702457">prev</a><span>|</span><a href="#40702500">next</a><span>|</span><label class="collapse" for="c-40702459">[-]</label><label class="expand" for="c-40702459">[3 more]</label></div><br/><div class="children"><div class="content">That&#x27;s fine for your solo projects. It&#x27;s definitely not okay at work.</div><br/><div id="40702542" class="c"><input type="checkbox" id="c-40702542" checked=""/><div class="controls bullet"><span class="by">josephg</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40702459">parent</a><span>|</span><a href="#40702500">next</a><span>|</span><label class="collapse" for="c-40702542">[-]</label><label class="expand" for="c-40702542">[2 more]</label></div><br/><div class="children"><div class="content">Why not? Whats the ROI of making the number of lines that separate functions the same across our entire codebase? That sounds completely pointless.</div><br/><div id="40702707" class="c"><input type="checkbox" id="c-40702707" checked=""/><div class="controls bullet"><span class="by">autarch</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40702542">parent</a><span>|</span><a href="#40702500">next</a><span>|</span><label class="collapse" for="c-40702707">[-]</label><label class="expand" for="c-40702707">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s easier to read and refactor code when it&#x27;s all formatted the same way. Otherwise diffs end up with tons of extraneous noise. Plus it adds needless decisions. If I move a function in a file with Person A&#x27;s style to a file with Person B&#x27;s style, do I reformat it?<p>What about when someone leaves the company? Is it free game to reformat everything they wrote?<p>Why do you need to put your mark on code at work? It&#x27;s not _your_ code. It belongs to the employer. The best work is work that is useful and not an irritant long after you&#x27;re gone.</div><br/></div></div></div></div></div></div><div id="40702500" class="c"><input type="checkbox" id="c-40702500" checked=""/><div class="controls bullet"><span class="by">JyB</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40702258">parent</a><span>|</span><a href="#40702459">prev</a><span>|</span><a href="#40701286">next</a><span>|</span><label class="collapse" for="c-40702500">[-]</label><label class="expand" for="c-40702500">[1 more]</label></div><br/><div class="children"><div class="content">That’s for teams. No one care about an individual opinion.</div><br/></div></div></div></div></div></div></div></div><div id="40701286" class="c"><input type="checkbox" id="c-40701286" checked=""/><div class="controls bullet"><span class="by">XorNot</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40694187">parent</a><span>|</span><a href="#40701562">prev</a><span>|</span><a href="#40694314">next</a><span>|</span><label class="collapse" for="c-40701286">[-]</label><label class="expand" for="c-40701286">[1 more]</label></div><br/><div class="children"><div class="content">There were also various Python formatters. The problem was the zeitgeist - engineers would tell me that &quot;they didn&#x27;t want an algorithm messing with their code&quot; as though that was a serious concern, or that wading through endless pull-request changes for syntax was a good use of anyones time.</div><br/></div></div></div></div><div id="40694314" class="c"><input type="checkbox" id="c-40694314" checked=""/><div class="controls bullet"><span class="by">afavour</span><span>|</span><a href="#40693851">parent</a><span>|</span><a href="#40694187">prev</a><span>|</span><a href="#40693956">next</a><span>|</span><label class="collapse" for="c-40694314">[-]</label><label class="expand" for="c-40694314">[32 more]</label></div><br/><div class="children"><div class="content">I’ve wondered before whether the world would be well served by a programming language (or source control system, I suppose) that just stores ASTs in files rather than text code. When users open the file the editor formats to whatever their personal preference is, then saves edits back to the AST.<p>It really is dumb to be arguing over tabs vs spaces, after all.</div><br/><div id="40701686" class="c"><input type="checkbox" id="c-40701686" checked=""/><div class="controls bullet"><span class="by">arp242</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40694314">parent</a><span>|</span><a href="#40700133">next</a><span>|</span><label class="collapse" for="c-40701686">[-]</label><label class="expand" for="c-40701686">[5 more]</label></div><br/><div class="children"><div class="content">Well-formatted code is more than just an AST. Even in Go, a language with probably one of the lowest style divergences out there (for better or worse) there are tons of style choices that aren&#x27;t in an AST.<p>Blank lines is an obvious one: where do you insert them to &quot;group&quot; sections of a 30 line function? Or are there no blank lines at all?<p>Line length: just &quot;wrap at columns X&quot; (or never wrap) is not enough, because people can and do wrap at specific locations for specific reasons, because that makes more semantic sense or looks nicer than cramming as much as possible.</div><br/><div id="40702040" class="c"><input type="checkbox" id="c-40702040" checked=""/><div class="controls bullet"><span class="by">icholy</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40701686">parent</a><span>|</span><a href="#40700133">next</a><span>|</span><label class="collapse" for="c-40702040">[-]</label><label class="expand" for="c-40702040">[4 more]</label></div><br/><div class="children"><div class="content">I prefer no blank lines. If you feel like you need one, write a line comment instead describing the next section.</div><br/><div id="40702339" class="c"><input type="checkbox" id="c-40702339" checked=""/><div class="controls bullet"><span class="by">josephg</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40702040">parent</a><span>|</span><a href="#40702044">next</a><span>|</span><label class="collapse" for="c-40702339">[-]</label><label class="expand" for="c-40702339">[1 more]</label></div><br/><div class="children"><div class="content">I think that&#x27;s a terrible choice. Its like saying &quot;I don&#x27;t like whitespace in webpage design. If they need whitespace, fill it with content - like maybe some text.&quot;<p>Whitespace gives readers subtle information about the structure of a function before they read any of it. Its a powerful tool. Dismissing or - worse - deleting whitespace wholesale sounds profoundly misguided to me.<p>Why make code harder to read? Where&#x27;s the benefit to your approach? I can&#x27;t see any.</div><br/></div></div><div id="40702044" class="c"><input type="checkbox" id="c-40702044" checked=""/><div class="controls bullet"><span class="by">arp242</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40702040">parent</a><span>|</span><a href="#40702339">prev</a><span>|</span><a href="#40702509">next</a><span>|</span><label class="collapse" for="c-40702044">[-]</label><label class="expand" for="c-40702044">[1 more]</label></div><br/><div class="children"><div class="content">Well okay, but a great many people disagree and this sort of thing isn&#x27;t captured in an AST, so clearly it&#x27;s not a suitable format for storing code.</div><br/></div></div><div id="40702509" class="c"><input type="checkbox" id="c-40702509" checked=""/><div class="controls bullet"><span class="by">JyB</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40702040">parent</a><span>|</span><a href="#40702044">prev</a><span>|</span><a href="#40700133">next</a><span>|</span><label class="collapse" for="c-40702509">[-]</label><label class="expand" for="c-40702509">[1 more]</label></div><br/><div class="children"><div class="content">I mean the whole Go stdlib barely use them right?</div><br/></div></div></div></div></div></div><div id="40700133" class="c"><input type="checkbox" id="c-40700133" checked=""/><div class="controls bullet"><span class="by">duped</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40694314">parent</a><span>|</span><a href="#40701686">prev</a><span>|</span><a href="#40698067">next</a><span>|</span><label class="collapse" for="c-40700133">[-]</label><label class="expand" for="c-40700133">[1 more]</label></div><br/><div class="children"><div class="content">One very nice property of an AST is that it&#x27;s an IR that is allowed be instable even if the syntax it represents is stabilized. If the AST becomes the source of truth on the file system you lose that property.<p>On top of that, now you need to write a parser and compiler for your AST file. It&#x27;s probably very simple and does rudimentary validation, but that defeats the point of the AST - it&#x27;s a valid, canonical representation of a program by construction.<p>All in all, it seems like a good idea, and people have done it. But there&#x27;s also good reasons to be apprehensive.<p>And at the end of the day, you need to ingest text as input, and you need to do it as fast as possible. There&#x27;s not a ton of benefit to keeping an AST around on disk and in sync with the text that generated it when you are already able to compute it faster than you can read and deserialize it.</div><br/></div></div><div id="40698067" class="c"><input type="checkbox" id="c-40698067" checked=""/><div class="controls bullet"><span class="by">tengbretson</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40694314">parent</a><span>|</span><a href="#40700133">prev</a><span>|</span><a href="#40700875">next</a><span>|</span><label class="collapse" for="c-40698067">[-]</label><label class="expand" for="c-40698067">[6 more]</label></div><br/><div class="children"><div class="content">Does that mean that a file with a syntax error is not able to be saved?</div><br/><div id="40698987" class="c"><input type="checkbox" id="c-40698987" checked=""/><div class="controls bullet"><span class="by">__s</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40698067">parent</a><span>|</span><a href="#40698204">next</a><span>|</span><label class="collapse" for="c-40698987">[-]</label><label class="expand" for="c-40698987">[4 more]</label></div><br/><div class="children"><div class="content">language servers have pushed things to inspecting source code while programmer has partially written code, so having a kind of (invalid-span content=&quot;garbage&quot;) node in AST helps</div><br/><div id="40700024" class="c"><input type="checkbox" id="c-40700024" checked=""/><div class="controls bullet"><span class="by">duped</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40698987">parent</a><span>|</span><a href="#40701037">next</a><span>|</span><label class="collapse" for="c-40700024">[-]</label><label class="expand" for="c-40700024">[2 more]</label></div><br/><div class="children"><div class="content">Language servers usually are designed around full&#x2F;concrete syntax trees instead of ASTs for exactly this reason. Adding error nodes to the AST is a hack that hurts more than helps.<p>More technically, language servers usually have a CST that they use to build the AST incrementally, and the AST contains references back to the CST that generated it. This is what allows you to handle incremental text edits and compile small deltas to the AST instead of the typical batch compiler design that attempts to parse everything all at once.</div><br/><div id="40700363" class="c"><input type="checkbox" id="c-40700363" checked=""/><div class="controls bullet"><span class="by">jenadine</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40700024">parent</a><span>|</span><a href="#40701037">next</a><span>|</span><label class="collapse" for="c-40700363">[-]</label><label class="expand" for="c-40700363">[1 more]</label></div><br/><div class="children"><div class="content">What&#x27;s wrong with error node in the ast?<p>I&#x27;ve seen language server that completely ignores the parts with error, and I much prefer error nodes because then I still know there is something and these error node can still have children</div><br/></div></div></div></div></div></div><div id="40698204" class="c"><input type="checkbox" id="c-40698204" checked=""/><div class="controls bullet"><span class="by">SR2Z</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40698067">parent</a><span>|</span><a href="#40698987">prev</a><span>|</span><a href="#40700875">next</a><span>|</span><label class="collapse" for="c-40698204">[-]</label><label class="expand" for="c-40698204">[1 more]</label></div><br/><div class="children"><div class="content">Well, not as an AST at least.  Presumably it would still be ok as text.</div><br/></div></div></div></div><div id="40700875" class="c"><input type="checkbox" id="c-40700875" checked=""/><div class="controls bullet"><span class="by">lmm</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40694314">parent</a><span>|</span><a href="#40698067">prev</a><span>|</span><a href="#40694483">next</a><span>|</span><label class="collapse" for="c-40700875">[-]</label><label class="expand" for="c-40700875">[1 more]</label></div><br/><div class="children"><div class="content">No, because there are no good tools for this format. It&#x27;s a classic &quot;worse is better&quot; problem - a programming language cannot succeed unless its source code format is unix text files.</div><br/></div></div><div id="40694483" class="c"><input type="checkbox" id="c-40694483" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40694314">parent</a><span>|</span><a href="#40700875">prev</a><span>|</span><a href="#40694343">next</a><span>|</span><label class="collapse" for="c-40694483">[-]</label><label class="expand" for="c-40694483">[9 more]</label></div><br/><div class="children"><div class="content">&gt; It really is dumb to be arguing over tabs vs spaces, after all.<p>In an in-house dialect of Haskell I used to work with, we solved this problem by just making tabs a syntax error.  Never had any problems.<p>(I think tabs might be have been allowed inside strings.)</div><br/><div id="40694645" class="c"><input type="checkbox" id="c-40694645" checked=""/><div class="controls bullet"><span class="by">afavour</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40694483">parent</a><span>|</span><a href="#40694556">next</a><span>|</span><label class="collapse" for="c-40694645">[-]</label><label class="expand" for="c-40694645">[4 more]</label></div><br/><div class="children"><div class="content">Arguably it would be a problem for a coworker that wanted to use tabs.<p>“We’ll just force everyone to do things one way” kind of ignores the point I was making. It shouldn’t be necessary for you to <i>care</i> how anyone else formats their code, same as you don’t care what font their code displays in or what text editor they use. It feels like a vestigial aspect of programming that we have to concern ourselves with it in 2024.</div><br/><div id="40701680" class="c"><input type="checkbox" id="c-40701680" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40694645">parent</a><span>|</span><a href="#40701261">next</a><span>|</span><label class="collapse" for="c-40701680">[-]</label><label class="expand" for="c-40701680">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Arguably it would be a problem for a coworker that wanted to use tabs.<p>Wasn&#x27;t a problem in practice.  Just like we never had any problems with anyone wanting to use eg Pascal or so.</div><br/></div></div><div id="40701261" class="c"><input type="checkbox" id="c-40701261" checked=""/><div class="controls bullet"><span class="by">refulgentis</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40694645">parent</a><span>|</span><a href="#40701680">prev</a><span>|</span><a href="#40694556">next</a><span>|</span><label class="collapse" for="c-40701261">[-]</label><label class="expand" for="c-40701261">[2 more]</label></div><br/><div class="children"><div class="content">100%, way this felt in practice at Google was I could have <i>whatever</i> I wanted in my IDE, and it&#x27;d be transformed upon check-in into the house style, which I don&#x27;t <i>need</i> to care about<p>FWIW, just happy to have a chance to unload this thought finally: it had surprisingly little impact on code reviews, in that the &quot;personal preference I need to enforce&quot; just ascended abstraction levels.</div><br/><div id="40702246" class="c"><input type="checkbox" id="c-40702246" checked=""/><div class="controls bullet"><span class="by">ukuina</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40701261">parent</a><span>|</span><a href="#40694556">next</a><span>|</span><label class="collapse" for="c-40702246">[-]</label><label class="expand" for="c-40702246">[1 more]</label></div><br/><div class="children"><div class="content">Does the IDE transform the existing code in the repo back into your preferred style on the next checkout?</div><br/></div></div></div></div></div></div><div id="40694556" class="c"><input type="checkbox" id="c-40694556" checked=""/><div class="controls bullet"><span class="by">kccqzy</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40694483">parent</a><span>|</span><a href="#40694645">prev</a><span>|</span><a href="#40700997">next</a><span>|</span><label class="collapse" for="c-40694556">[-]</label><label class="expand" for="c-40694556">[2 more]</label></div><br/><div class="children"><div class="content">So I&#x27;m guessing you mean Mu, the dialect by Standard Chartered.</div><br/><div id="40694637" class="c"><input type="checkbox" id="c-40694637" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40694556">parent</a><span>|</span><a href="#40700997">next</a><span>|</span><label class="collapse" for="c-40694637">[-]</label><label class="expand" for="c-40694637">[1 more]</label></div><br/><div class="children"><div class="content">Yes, indeed.  In it&#x27;s circa 2014 incarnation, when I last worked there.<p>(I don&#x27;t really know what happened to it since.)</div><br/></div></div></div></div><div id="40700997" class="c"><input type="checkbox" id="c-40700997" checked=""/><div class="controls bullet"><span class="by">lupire</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40694483">parent</a><span>|</span><a href="#40694556">prev</a><span>|</span><a href="#40694343">next</a><span>|</span><label class="collapse" for="c-40700997">[-]</label><label class="expand" for="c-40700997">[2 more]</label></div><br/><div class="children"><div class="content">Simple, elegant, and wrong.</div><br/><div id="40701694" class="c"><input type="checkbox" id="c-40701694" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40700997">parent</a><span>|</span><a href="#40694343">next</a><span>|</span><label class="collapse" for="c-40701694">[-]</label><label class="expand" for="c-40701694">[1 more]</label></div><br/><div class="children"><div class="content">Tabs are particularly useless in a language like Haskell, because we don&#x27;t do a lot of block-indentation there, but we do a lot of alignment.  And your code mixes alignment and indentation.<p>In a language like C your outermost layers of leading whitespace are always indentation, and then you might have some alignment inside.<p>But in Haskell you might want to align arguments to a function, but some of the arguments can have blocks inside of them.<p>Mixing up tabs and spaces is technically possible, but it&#x27;s too much of a pain in practice to bother.</div><br/></div></div></div></div></div></div><div id="40694343" class="c"><input type="checkbox" id="c-40694343" checked=""/><div class="controls bullet"><span class="by">rsc</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40694314">parent</a><span>|</span><a href="#40694483">prev</a><span>|</span><a href="#40694379">next</a><span>|</span><label class="collapse" for="c-40694343">[-]</label><label class="expand" for="c-40694343">[4 more]</label></div><br/><div class="children"><div class="content">At that point you could even use different languages. Maybe you like programs that look like Lisp and I don&#x27;t. There was a project at Microsoft Research in the late 1990s&#x2F;early 2000s that did exactly this - storing ASTs in source control instead of code - but the name escapes me at the moment.</div><br/><div id="40701083" class="c"><input type="checkbox" id="c-40701083" checked=""/><div class="controls bullet"><span class="by">whstl</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40694343">parent</a><span>|</span><a href="#40694379">next</a><span>|</span><label class="collapse" for="c-40701083">[-]</label><label class="expand" for="c-40701083">[3 more]</label></div><br/><div class="children"><div class="content">Was it Intentional programming? I remember it being described as something similar to what you say, but the Wikipedia shows something slightly different.<p><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Intentional_programming" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Intentional_programming</a></div><br/><div id="40701294" class="c"><input type="checkbox" id="c-40701294" checked=""/><div class="controls bullet"><span class="by">refulgentis</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40701083">parent</a><span>|</span><a href="#40694379">next</a><span>|</span><label class="collapse" for="c-40701294">[-]</label><label class="expand" for="c-40701294">[2 more]</label></div><br/><div class="children"><div class="content">Quick 10 min into Googling, def. double check me:<p>You&#x27;re right, ex. <a href="https:&#x2F;&#x2F;dev.to&#x2F;jillesvangurp&#x2F;comment&#x2F;6gnb&#x2F;" rel="nofollow">https:&#x2F;&#x2F;dev.to&#x2F;jillesvangurp&#x2F;comment&#x2F;6gnb&#x2F;</a><p>Sadly there&#x27;s enough bitrot that ex. intentsoft.com is offline.<p>More here, but article is v opinionated&#x2F;judgement oriented, comments are useful, but again, bitrot :( <a href="https:&#x2F;&#x2F;wiki.c2.com&#x2F;?IntentionalProgramming" rel="nofollow">https:&#x2F;&#x2F;wiki.c2.com&#x2F;?IntentionalProgramming</a><p>It strikes me that what I am describing as &quot;bitrot&quot; may also be &quot;never really shipped, so the vagueness isn&#x27;t accidental&quot;</div><br/><div id="40702953" class="c"><input type="checkbox" id="c-40702953" checked=""/><div class="controls bullet"><span class="by">throwaway2037</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40701294">parent</a><span>|</span><a href="#40694379">next</a><span>|</span><label class="collapse" for="c-40702953">[-]</label><label class="expand" for="c-40702953">[1 more]</label></div><br/><div class="children"><div class="content">Hat tip for c2.com link!  The follow-up is savage: <a href="https:&#x2F;&#x2F;wiki.c2.com&#x2F;?CritiqueOfIntentionalProgramming" rel="nofollow">https:&#x2F;&#x2F;wiki.c2.com&#x2F;?CritiqueOfIntentionalProgramming</a></div><br/></div></div></div></div></div></div></div></div><div id="40694379" class="c"><input type="checkbox" id="c-40694379" checked=""/><div class="controls bullet"><span class="by">turtleyacht</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40694314">parent</a><span>|</span><a href="#40694343">prev</a><span>|</span><a href="#40694441">next</a><span>|</span><label class="collapse" for="c-40694379">[-]</label><label class="expand" for="c-40694379">[1 more]</label></div><br/><div class="children"><div class="content">One (naive) approach I keep thinking on is using ed(1) to write <i>transforms</i> of code, so chunks of Java are later sewn together to create the app.<p>This always sounds more difficult on paper than just wrestling dependencies till dawn, upgrading from JDK 11 to JDK 17, for example. So I usually give up the mental exercise there.<p>Plus, following a file of transforms is mind-bending: someone may follow a method definition with a pattern seek, and then start appending some more code. Context is lost. It would be literate programming only with enough empathy for comments.<p>Which is all to say, would it be easier to move between Spring versions if the app&#x27;s commit history were a series of transforms instead of changes to static files?<p>Suppose a commit establishes a framework version, and then follow a bunch of commits for domain objects, a skeleton controller, and so on. If we could play those decisions forward, but edit the <i>transform</i> instead of the source, would it be easier to dissect which next dependency to manage?<p>This loops back to ASTs: we would still edit and change files, but the history would be ed(1) macros (or something better, like ASTs). Somehow, it feels like there could be reconciliation between source control and &quot;manipulating a timeline of changes.&quot;<p>Git may already have this, or a simple while loop with some decisions about how far to play the changes, like editing a cassette tape. A list of patches to apply, with pre- and post- hooks for rules scripts.</div><br/></div></div><div id="40694441" class="c"><input type="checkbox" id="c-40694441" checked=""/><div class="controls bullet"><span class="by">striking</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40694314">parent</a><span>|</span><a href="#40694379">prev</a><span>|</span><a href="#40694605">next</a><span>|</span><label class="collapse" for="c-40694441">[-]</label><label class="expand" for="c-40694441">[1 more]</label></div><br/><div class="children"><div class="content">A sufficiently-motivated engineer could do this today by setting a different formatter in their editor than in their pre-commit hook. Then they need only activate the formatter in their editor as they edit, and ensure pre-commit hooks run as they commit.<p>This saves you the trouble of authoring a separate programming language, or finding a way to preserve all of the niceties of the original syntax and formatting that wouldn&#x27;t directly translate to an AST (like how many newlines are after a particular stanza or function).<p>Case in point: Recast (<a href="https:&#x2F;&#x2F;github.com&#x2F;benjamn&#x2F;recast">https:&#x2F;&#x2F;github.com&#x2F;benjamn&#x2F;recast</a>) is of particular interest with regards to JS&#x2F;TS in this vein, because it does preserve a lot of the spirit of the source in its conception of the AST. But also last time I used it (couple years ago now) it would explode on any code with an emoji in it. It&#x27;s genuinely not an easy problem.</div><br/></div></div><div id="40694605" class="c"><input type="checkbox" id="c-40694605" checked=""/><div class="controls bullet"><span class="by">python_pele</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40694314">parent</a><span>|</span><a href="#40694441">prev</a><span>|</span><a href="#40695711">next</a><span>|</span><label class="collapse" for="c-40694605">[-]</label><label class="expand" for="c-40694605">[1 more]</label></div><br/><div class="children"><div class="content">Unison has something similar to what you&#x27;re talking about: <a href="https:&#x2F;&#x2F;www.unison-lang.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.unison-lang.org&#x2F;</a></div><br/></div></div><div id="40695711" class="c"><input type="checkbox" id="c-40695711" checked=""/><div class="controls bullet"><span class="by">coolcoder613</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40694314">parent</a><span>|</span><a href="#40694605">prev</a><span>|</span><a href="#40694443">next</a><span>|</span><label class="collapse" for="c-40695711">[-]</label><label class="expand" for="c-40695711">[1 more]</label></div><br/><div class="children"><div class="content">Many BASIC dialects did this.</div><br/></div></div><div id="40694443" class="c"><input type="checkbox" id="c-40694443" checked=""/><div class="controls bullet"><span class="by">shawn_w</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40694314">parent</a><span>|</span><a href="#40695711">prev</a><span>|</span><a href="#40693956">next</a><span>|</span><label class="collapse" for="c-40694443">[-]</label><label class="expand" for="c-40694443">[1 more]</label></div><br/><div class="children"><div class="content">I think that&#x27;s what InterLisp did.</div><br/></div></div></div></div><div id="40693956" class="c"><input type="checkbox" id="c-40693956" checked=""/><div class="controls bullet"><span class="by">delichon</span><span>|</span><a href="#40693851">parent</a><span>|</span><a href="#40694314">prev</a><span>|</span><a href="#40700478">next</a><span>|</span><label class="collapse" for="c-40693956">[-]</label><label class="expand" for="c-40693956">[1 more]</label></div><br/><div class="children"><div class="content">It reduces cognitive load on integrations, both software and wetware. So many brain hertz are wasted on internally bikeshedding format details. Autoformat fixes a hole where the rain gets in and stops my mind from coding.</div><br/></div></div><div id="40700478" class="c"><input type="checkbox" id="c-40700478" checked=""/><div class="controls bullet"><span class="by">fweimer</span><span>|</span><a href="#40693851">parent</a><span>|</span><a href="#40693956">prev</a><span>|</span><a href="#40694440">next</a><span>|</span><label class="collapse" for="c-40700478">[-]</label><label class="expand" for="c-40700478">[2 more]</label></div><br/><div class="children"><div class="content">Java IDEs have had optional reformat on safe for a long time.<p><a href="https:&#x2F;&#x2F;help.eclipse.org&#x2F;latest&#x2F;index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fpreferences%2Fjava%2Feditor%2Fref-preferences-save-actions.htm" rel="nofollow">https:&#x2F;&#x2F;help.eclipse.org&#x2F;latest&#x2F;index.jsp?topic=%2Forg.eclip...</a></div><br/><div id="40700696" class="c"><input type="checkbox" id="c-40700696" checked=""/><div class="controls bullet"><span class="by">jakjak123</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40700478">parent</a><span>|</span><a href="#40694440">next</a><span>|</span><label class="collapse" for="c-40700696">[-]</label><label class="expand" for="c-40700696">[1 more]</label></div><br/><div class="children"><div class="content">They have, but the different IDEs do not format equivalent and are way too easy to reconfigure to personal preference.</div><br/></div></div></div></div><div id="40694440" class="c"><input type="checkbox" id="c-40694440" checked=""/><div class="controls bullet"><span class="by">omoikane</span><span>|</span><a href="#40693851">parent</a><span>|</span><a href="#40700478">prev</a><span>|</span><a href="#40694448">next</a><span>|</span><label class="collapse" for="c-40694440">[-]</label><label class="expand" for="c-40694440">[2 more]</label></div><br/><div class="children"><div class="content">Autoformatters got popular was because a lot people don&#x27;t care about formatting, and those who do care can&#x27;t win against the <i>auto</i> part of autoformatters.<p>It works for go because gofmt was there from the start, so even if you are returning a multi-dimension array and elements come out unaligned, that&#x27;s just accepted as how it is and nobody cares.  For other languages, people will have to either accept &quot;not caring&quot; as becoming the norm, or actively fight the autoformatter from steamrolling over their code.<p>For people who would give more thought to how their code would be read, autoformatters were often more frustrating than &quot;nice&quot;.</div><br/><div id="40701443" class="c"><input type="checkbox" id="c-40701443" checked=""/><div class="controls bullet"><span class="by">YZF</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40694440">parent</a><span>|</span><a href="#40694448">next</a><span>|</span><label class="collapse" for="c-40701443">[-]</label><label class="expand" for="c-40701443">[1 more]</label></div><br/><div class="children"><div class="content">Interesting enough people still find things to argue about even with gofmt and goimports. The order of imports and maximum line length are two examples. I imagine if those were done by gofmt&#x2F;goimports then people would argue about other things.<p>It&#x27;s why we can&#x27;t have nice things... Autoformatters do help though.</div><br/></div></div></div></div><div id="40694448" class="c"><input type="checkbox" id="c-40694448" checked=""/><div class="controls bullet"><span class="by">rowanG077</span><span>|</span><a href="#40693851">parent</a><span>|</span><a href="#40694440">prev</a><span>|</span><a href="#40693951">next</a><span>|</span><label class="collapse" for="c-40694448">[-]</label><label class="expand" for="c-40694448">[2 more]</label></div><br/><div class="children"><div class="content">I never thought it only got popular with go. I remember using formatters before go. What go did do is that it shows how good it is if it is ubiquitous.</div><br/><div id="40694750" class="c"><input type="checkbox" id="c-40694750" checked=""/><div class="controls bullet"><span class="by">plorkyeran</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40694448">parent</a><span>|</span><a href="#40693951">next</a><span>|</span><label class="collapse" for="c-40694750">[-]</label><label class="expand" for="c-40694750">[1 more]</label></div><br/><div class="children"><div class="content">I think <i>mandatory</i> code formatting was popularized by Go? Plenty of code formatting tools had been around for quite a while by the time Go came out, but they were the sort of thing you ran on a codebase once to clean up a mess, not something you checked on each commit. A common sentiment was that it was a good idea but was only viable because Go had it from the beginning, which fortunately turned out to be wrong.</div><br/></div></div></div></div><div id="40693951" class="c"><input type="checkbox" id="c-40693951" checked=""/><div class="controls bullet"><span class="by">DangitBobby</span><span>|</span><a href="#40693851">parent</a><span>|</span><a href="#40694448">prev</a><span>|</span><a href="#40702559">next</a><span>|</span><label class="collapse" for="c-40693951">[-]</label><label class="expand" for="c-40693951">[4 more]</label></div><br/><div class="children"><div class="content">That doesn&#x27;t really seem like a good reason. They remove all formatting control with an automated tool so it doesn&#x27;t matter when (if, big if) an automated tool later rewrites some of your source code formatted in a way you don&#x27;t control?</div><br/><div id="40694419" class="c"><input type="checkbox" id="c-40694419" checked=""/><div class="controls bullet"><span class="by">striking</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40693951">parent</a><span>|</span><a href="#40694045">next</a><span>|</span><label class="collapse" for="c-40694419">[-]</label><label class="expand" for="c-40694419">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s more common than you think! Tools like <a href="https:&#x2F;&#x2F;github.com&#x2F;facebook&#x2F;jscodeshift">https:&#x2F;&#x2F;github.com&#x2F;facebook&#x2F;jscodeshift</a>, <a href="https:&#x2F;&#x2F;ts-morph.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;ts-morph.com&#x2F;</a>, and <a href="https:&#x2F;&#x2F;ast-grep.github.io&#x2F;" rel="nofollow">https:&#x2F;&#x2F;ast-grep.github.io&#x2F;</a> are the ones I&#x27;m more familiar with (since my day-to-day is TypeScript).<p>When I led the conversion of a decently-sized codebase from Flow-typed JS to TypeScript, I ensured that a code formatting tool that we were already using on pre-commit and CI called `prettier` was executed after each step. We took a git snapshot of each step of our automated conversion pipeline, and the diff was much clearer with `prettier` in place at each of those steps.<p>We&#x27;ve since used codemods frequently to make huge changes to the codebase in an automatic, reproducible, iterable way. They&#x27;re very comfortable, very fun, and (thanks to the use of a formatter on all code) rarely produce incomprehensible diffs.</div><br/></div></div><div id="40694045" class="c"><input type="checkbox" id="c-40694045" checked=""/><div class="controls bullet"><span class="by">Nzen</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40693951">parent</a><span>|</span><a href="#40694419">prev</a><span>|</span><a href="#40702559">next</a><span>|</span><label class="collapse" for="c-40694045">[-]</label><label class="expand" for="c-40694045">[2 more]</label></div><br/><div class="children"><div class="content">Mu. Russ Cox quote indicates that <i>the maintainers</i> of goimports and gorename do not need to handle formatting at all (and hence, benefit). The go team put that wholly in the gofmt team&#x27;s court. Otherwise, the go team would likely have to handle tickets about how the formatting of goimports and gorename differ over time for edge cases (if only by paying the social capital of ignoring the tickets).</div><br/><div id="40694148" class="c"><input type="checkbox" id="c-40694148" checked=""/><div class="controls bullet"><span class="by">DangitBobby</span><span>|</span><a href="#40693851">root</a><span>|</span><a href="#40694045">parent</a><span>|</span><a href="#40702559">next</a><span>|</span><label class="collapse" for="c-40694148">[-]</label><label class="expand" for="c-40694148">[1 more]</label></div><br/><div class="children"><div class="content">That would fall under what I already assumed to be true, and also under an umbrella they specifically said it wasnt about<p>&gt; end debates among team members about program layout<p>(Except in this case of course it&#x27;s not &quot;team members&quot;)<p>I&#x27;m definitely not getting this interpretation from the quote.</div><br/></div></div></div></div></div></div></div></div><div id="40702559" class="c"><input type="checkbox" id="c-40702559" checked=""/><div class="controls bullet"><span class="by">vasco</span><span>|</span><a href="#40693851">prev</a><span>|</span><a href="#40701501">next</a><span>|</span><label class="collapse" for="c-40702559">[-]</label><label class="expand" for="c-40702559">[1 more]</label></div><br/><div class="children"><div class="content">Sounds like a quick way to get Golang installed on every Google developer machine and drive adoption.</div><br/></div></div><div id="40701501" class="c"><input type="checkbox" id="c-40701501" checked=""/><div class="controls bullet"><span class="by">jerf</span><span>|</span><a href="#40702559">prev</a><span>|</span><a href="#40694418">next</a><span>|</span><label class="collapse" for="c-40701501">[-]</label><label class="expand" for="c-40701501">[2 more]</label></div><br/><div class="children"><div class="content">The term &quot;bikeshedding&quot; comes up a lot on HN, when people spend a lot of time spinning wheels in endless debates about the things that are easy to debate while indefinitely deferring the tough conversations, but I think an underappreciated aspect of this meme is that the unimportant conversations quite frequently really are just that; unimportant, to everybody involved. Often (but not always) nobody actually cares. Caring is not necessarily represented by the amount of time or text spewed forth on a topic. A lot of things other than passion or importance factor into how much verbiage comes through and it is a mistake to overinterpret mere volume.<p>Unfortunately, the flip side of this coin is harder to deal with; sometimes truly important issues or things that people do deeply care about have disproportionately too <i>little</i> verbiage. Finding those can be very difficult.</div><br/><div id="40703395" class="c"><input type="checkbox" id="c-40703395" checked=""/><div class="controls bullet"><span class="by">fragmede</span><span>|</span><a href="#40701501">parent</a><span>|</span><a href="#40694418">next</a><span>|</span><label class="collapse" for="c-40703395">[-]</label><label class="expand" for="c-40703395">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Caring is not necessarily represented by the amount of time or text spewed forth on a topic.<p>The meta says that it is. there are only 81600 seconds most days, and you get to choose them how you want, so choose how you spend them wisely. if that&#x27;s arguing over tabs or spaces, then that&#x27;s your choice.</div><br/></div></div></div></div><div id="40694418" class="c"><input type="checkbox" id="c-40694418" checked=""/><div class="controls bullet"><span class="by">bsmith0</span><span>|</span><a href="#40701501">prev</a><span>|</span><a href="#40695386">next</a><span>|</span><label class="collapse" for="c-40694418">[-]</label><label class="expand" for="c-40694418">[7 more]</label></div><br/><div class="children"><div class="content">I&#x27;d be curious what role &quot;global approvers&quot; at Google&#x2F;Google&#x27;s scale typically have&#x2F;how many are there&#x2F;what&#x27;s the process?</div><br/><div id="40694952" class="c"><input type="checkbox" id="c-40694952" checked=""/><div class="controls bullet"><span class="by">y2mango</span><span>|</span><a href="#40694418">parent</a><span>|</span><a href="#40694574">next</a><span>|</span><label class="collapse" for="c-40694952">[-]</label><label class="expand" for="c-40694952">[4 more]</label></div><br/><div class="children"><div class="content">I was one of the global approvers (and also on the Python team until my role at Google was eliminated recently). I no longer have access to the stats, but from my memory, there are currently 50+ global approvers depending on how many are still considered active.<p>Typically, code authors would create a proposal by filling out a doc template. It&#x27;s usually light weight and also accompanied with examples or full set of the pending code changes. Then 1-3 of us will review and LGTM the proposal. As part of the review, we also determine whether the changes should be sent to local code owners, or &quot;globally approved&quot; by one of us. The default option is to use &quot;global approval&quot;, unless the changes need local code owner&#x27;s knowledge during the code review. Said in another way, when sent to local code owners, their role is not gate keeping the changes, but to provide necessary local knowledge where we as global approvers don&#x27;t have.<p>Refactoring changes, such as formatting or API migrations, shouldn&#x27;t bother local code owners because 1) it would just be a waste of their time to review and approve; 2) in practice, we find a central code reviewer for the same large set of code changes is more likely to catch bugs (with review automation tooling) than local reviewers.<p>We consider ourselves as facilitators rather than approvers or gatekeepers of the code changes. Our goal is to make these changes done more efficiently and save engineering time when possible.<p>If you like stats: over the past 5 years, I have reviewed ~300 such proposals and ~40K changelists (equivalent to PRs). One changelist&#x2F;PR typically contains 10s to 100s of files depending on the nature of the change. When I was most active, I was about ~5th-ish when ranking the number of changes we were approving. There are many global approvers who have approved more than 100K changelists, which is a milestone we celebrate with a cake. Too bad I didn&#x27;t have the chance to have my cake.</div><br/><div id="40700732" class="c"><input type="checkbox" id="c-40700732" checked=""/><div class="controls bullet"><span class="by">mudkipdev</span><span>|</span><a href="#40694418">root</a><span>|</span><a href="#40694952">parent</a><span>|</span><a href="#40694574">next</a><span>|</span><label class="collapse" for="c-40700732">[-]</label><label class="expand" for="c-40700732">[3 more]</label></div><br/><div class="children"><div class="content">Just curious, what kind of global changes do you usually make? And what is the process of becoming an approver?</div><br/><div id="40701134" class="c"><input type="checkbox" id="c-40701134" checked=""/><div class="controls bullet"><span class="by">laurentlb</span><span>|</span><a href="#40694418">root</a><span>|</span><a href="#40700732">parent</a><span>|</span><a href="#40701708">next</a><span>|</span><label class="collapse" for="c-40701134">[-]</label><label class="expand" for="c-40701134">[1 more]</label></div><br/><div class="children"><div class="content">I was also global approver.<p>Examples of global changes include:<p>- changes to Buildifier that require updating existing files<p>- rename&#x2F;refactor a function used everywhere in the repository<p>- fix the existing code before turning a lint warning into an error<p>- fix code that will break with a compiler update<p>Anyone in the company can propose this kind of change. The proposal will be reviewed by a committee (to ensure the change is worthwhile, that are mechanisms to prevent regressions, etc.) and by a domain expert (the team that owns the area).<p>Global approvers are people who often deal with this kind of changes. They usually come from the language teams (e.g. I knew the specificities that come with global changes touching BUILD&#x2F;Starlark files).</div><br/></div></div><div id="40701708" class="c"><input type="checkbox" id="c-40701708" checked=""/><div class="controls bullet"><span class="by">y2mango</span><span>|</span><a href="#40694418">root</a><span>|</span><a href="#40700732">parent</a><span>|</span><a href="#40701134">prev</a><span>|</span><a href="#40694574">next</a><span>|</span><label class="collapse" for="c-40701708">[-]</label><label class="expand" for="c-40701708">[1 more]</label></div><br/><div class="children"><div class="content">&gt; what is the process of becoming an approver?<p>New approvers are nominated by an existing member and then LGTM&#x27;ed by other three. Usually they have gained a lot of large scale change experiences on the other side, and we recognize that we could use more help on the committee side. Especially we want a good coverage on various languages, tech stacks, and time zones.</div><br/></div></div></div></div></div></div><div id="40694574" class="c"><input type="checkbox" id="c-40694574" checked=""/><div class="controls bullet"><span class="by">dmazzoni</span><span>|</span><a href="#40694418">parent</a><span>|</span><a href="#40694952">prev</a><span>|</span><a href="#40695386">next</a><span>|</span><label class="collapse" for="c-40694574">[-]</label><label class="expand" for="c-40694574">[2 more]</label></div><br/><div class="children"><div class="content">I was at Google until a few years ago.<p>The purpose of global approvers was exactly things like this. If you want to do a mechanical change to an insanely huge number of files, they can potentially approve it.<p>In my experience, global approvers were used extremely rarely, only in cases like this where the transformation was purely mechanical and it was possible to verify that there were no logic changes.<p>Most of the time rather than global approvers, you were encouraged to use a system that would automatically split your change into a bunch of smaller CLs (PRs), automatically send those to owners of each module, then automatically merge the changes if approved. It would even nag owners daily to please review. If you had trouble getting approval for some files you could escalate to owners of a parent directory, but it&#x27;d rarely be necessary to go all the way up to global approvers.<p>Basically if there was even the slightest chance that your change could break something, it&#x27;s always safer to ask individual code owners to approve the change.</div><br/><div id="40698596" class="c"><input type="checkbox" id="c-40698596" checked=""/><div class="controls bullet"><span class="by">tylerhou</span><span>|</span><a href="#40694418">root</a><span>|</span><a href="#40694574">parent</a><span>|</span><a href="#40695386">next</a><span>|</span><label class="collapse" for="c-40698596">[-]</label><label class="expand" for="c-40698596">[1 more]</label></div><br/><div class="children"><div class="content">Even if you get global approval it is still good to split CLs to avoid e.g. merge conflicts.</div><br/></div></div></div></div></div></div><div id="40695386" class="c"><input type="checkbox" id="c-40695386" checked=""/><div class="controls bullet"><span class="by">yegle</span><span>|</span><a href="#40694418">prev</a><span>|</span><a href="#40694122">next</a><span>|</span><label class="collapse" for="c-40695386">[-]</label><label class="expand" for="c-40695386">[5 more]</label></div><br/><div class="children"><div class="content">There are 3 tools that that makes maintaining BUILD files enjoyable: buildifier, buildozer and build_cleaner (internal only unfortunately).</div><br/><div id="40696359" class="c"><input type="checkbox" id="c-40696359" checked=""/><div class="controls bullet"><span class="by">lopkeny12ko</span><span>|</span><a href="#40695386">parent</a><span>|</span><a href="#40694122">next</a><span>|</span><label class="collapse" for="c-40696359">[-]</label><label class="expand" for="c-40696359">[4 more]</label></div><br/><div class="children"><div class="content">What is build_cleaner?</div><br/><div id="40697454" class="c"><input type="checkbox" id="c-40697454" checked=""/><div class="controls bullet"><span class="by">randomifcpfan</span><span>|</span><a href="#40695386">root</a><span>|</span><a href="#40696359">parent</a><span>|</span><a href="#40694122">next</a><span>|</span><label class="collapse" for="c-40697454">[-]</label><label class="expand" for="c-40697454">[3 more]</label></div><br/><div class="children"><div class="content">A tool for updating bazel build target dependencies. It inspects build files and source code, then adds&#x2F;removes dependencies from build targets as needed. It requires using global include paths in C&#x2F;C++ sources. It is not perfect, but it is pretty nice!</div><br/><div id="40698007" class="c"><input type="checkbox" id="c-40698007" checked=""/><div class="controls bullet"><span class="by">rsc</span><span>|</span><a href="#40695386">root</a><span>|</span><a href="#40697454">parent</a><span>|</span><a href="#40694122">next</a><span>|</span><label class="collapse" for="c-40698007">[-]</label><label class="expand" for="c-40698007">[2 more]</label></div><br/><div class="children"><div class="content">If you&#x27;re using Go with Bazel, gazelle is available outside Google:
<a href="https:&#x2F;&#x2F;github.com&#x2F;bazelbuild&#x2F;bazel-gazelle">https:&#x2F;&#x2F;github.com&#x2F;bazelbuild&#x2F;bazel-gazelle</a><p>Enabling tools like these was exactly the point of the enforced formatting. It worked extremely well.</div><br/><div id="40701343" class="c"><input type="checkbox" id="c-40701343" checked=""/><div class="controls bullet"><span class="by">dijit</span><span>|</span><a href="#40695386">root</a><span>|</span><a href="#40698007">parent</a><span>|</span><a href="#40694122">next</a><span>|</span><label class="collapse" for="c-40701343">[-]</label><label class="expand" for="c-40701343">[1 more]</label></div><br/><div class="children"><div class="content">I should add that it seems Gazelle is being expanded to other programming languages other than Go.<p>For example: <a href="https:&#x2F;&#x2F;github.com&#x2F;Calsign&#x2F;gazelle_rust">https:&#x2F;&#x2F;github.com&#x2F;Calsign&#x2F;gazelle_rust</a></div><br/></div></div></div></div></div></div></div></div></div></div><div id="40694122" class="c"><input type="checkbox" id="c-40694122" checked=""/><div class="controls bullet"><span class="by">vitiral</span><span>|</span><a href="#40695386">prev</a><span>|</span><a href="#40698578">next</a><span>|</span><label class="collapse" for="c-40694122">[-]</label><label class="expand" for="c-40694122">[20 more]</label></div><br/><div class="children"><div class="content">I&#x27;m going to take a contrarian view here. Code formatting is amazing in a corporate environment where nobody truly cares about their code -- it&#x27;s just a means to get a paycheck. It&#x27;s also great for beginners to a language who are still trying to get a handle of the syntax.<p>But where you are nearly the sole owner of a small library and you are crafting that library to be beautiful and understandable... there is something pleasurable about structuring concepts so you have each on a single line, or creating similar functions so the concepts are structured by column.<p>I know not everyone will hold this view and that is fine, but when you are writing your own hobby library in your favorite language for your own purposes I recommend you try it out.</div><br/><div id="40694181" class="c"><input type="checkbox" id="c-40694181" checked=""/><div class="controls bullet"><span class="by">lokar</span><span>|</span><a href="#40694122">parent</a><span>|</span><a href="#40694296">next</a><span>|</span><label class="collapse" for="c-40694181">[-]</label><label class="expand" for="c-40694181">[1 more]</label></div><br/><div class="children"><div class="content">Everywhere I’ve worked, including Google, many (probably most) people care a lot about the code and the format.  Often too much.  That was the point rsc was making.</div><br/></div></div><div id="40694296" class="c"><input type="checkbox" id="c-40694296" checked=""/><div class="controls bullet"><span class="by">neilv</span><span>|</span><a href="#40694122">parent</a><span>|</span><a href="#40694181">prev</a><span>|</span><a href="#40694170">next</a><span>|</span><label class="collapse" for="c-40694296">[-]</label><label class="expand" for="c-40694296">[2 more]</label></div><br/><div class="children"><div class="content">Also, sometimes the formatting simply makes reading something messy merely tractable, not aesthetically pleasing.<p>Once, a product launch depended on me urgently kludging a device driver in Python (long story).  And this involved a large hand-maintained mapping table.  I wrote it quickly but carefully, and found some formatting that made the table readable enough, without implementing a minilanguage in Python.<p>But the Black formatter had been rigged to run automatically on commit, so... poof! :)</div><br/><div id="40702527" class="c"><input type="checkbox" id="c-40702527" checked=""/><div class="controls bullet"><span class="by">tczMUFlmoNk</span><span>|</span><a href="#40694122">root</a><span>|</span><a href="#40694296">parent</a><span>|</span><a href="#40694170">next</a><span>|</span><label class="collapse" for="c-40702527">[-]</label><label class="expand" for="c-40702527">[1 more]</label></div><br/><div class="children"><div class="content">Black supports ignoring sections with a `# fmt: off` directive, and a hand-formatted constant table is a common use for that:<p><a href="https:&#x2F;&#x2F;black.readthedocs.io&#x2F;en&#x2F;stable&#x2F;usage_and_configuration&#x2F;the_basics.html#ignoring-sections" rel="nofollow">https:&#x2F;&#x2F;black.readthedocs.io&#x2F;en&#x2F;stable&#x2F;usage_and_configurati...</a><p>Other formatters have similar functionality; e.g.:<p>- &#x2F;* prettier-ignore *&#x2F;: <a href="https:&#x2F;&#x2F;prettier.io&#x2F;docs&#x2F;en&#x2F;ignore.html#javascript" rel="nofollow">https:&#x2F;&#x2F;prettier.io&#x2F;docs&#x2F;en&#x2F;ignore.html#javascript</a><p>- #[rustfmt::skip]: <a href="https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rustfmt?tab=readme-ov-file#tips">https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rustfmt?tab=readme-ov-file#tips</a></div><br/></div></div></div></div><div id="40694170" class="c"><input type="checkbox" id="c-40694170" checked=""/><div class="controls bullet"><span class="by">JZL003</span><span>|</span><a href="#40694122">parent</a><span>|</span><a href="#40694296">prev</a><span>|</span><a href="#40694354">next</a><span>|</span><label class="collapse" for="c-40694170">[-]</label><label class="expand" for="c-40694170">[1 more]</label></div><br/><div class="children"><div class="content">I do more research, one-off ,code and being able to align equals signs or successive lines which do similar things both makes me happy and makes it easier to skim. I think the Linux kernel does it too. Emacs has a way of aligning by common separators (=&#x2F;, as well as quick regex)<p>I guess I&#x27;ve never gotten into an actual serious debate with someone over formatting so I don&#x27;t know what I&#x27;m avoiding, but sometimes auto formatted code makes it harder to skim</div><br/></div></div><div id="40694354" class="c"><input type="checkbox" id="c-40694354" checked=""/><div class="controls bullet"><span class="by">markrages</span><span>|</span><a href="#40694122">parent</a><span>|</span><a href="#40694170">prev</a><span>|</span><a href="#40694381">next</a><span>|</span><label class="collapse" for="c-40694354">[-]</label><label class="expand" for="c-40694354">[2 more]</label></div><br/><div class="children"><div class="content">Yes!  Code is for people to read, not computers.  Beautiful code uses the full expressiveness that the language allows.</div><br/><div id="40702518" class="c"><input type="checkbox" id="c-40702518" checked=""/><div class="controls bullet"><span class="by">JyB</span><span>|</span><a href="#40694122">root</a><span>|</span><a href="#40694354">parent</a><span>|</span><a href="#40694381">next</a><span>|</span><label class="collapse" for="c-40702518">[-]</label><label class="expand" for="c-40702518">[1 more]</label></div><br/><div class="children"><div class="content">And people have, by definition, a much easier time reading code when it’s always consistent across codebases. Thanks for making the point.</div><br/></div></div></div></div><div id="40694381" class="c"><input type="checkbox" id="c-40694381" checked=""/><div class="controls bullet"><span class="by">striking</span><span>|</span><a href="#40694122">parent</a><span>|</span><a href="#40694354">prev</a><span>|</span><a href="#40697474">next</a><span>|</span><label class="collapse" for="c-40694381">[-]</label><label class="expand" for="c-40694381">[3 more]</label></div><br/><div class="children"><div class="content">I think you&#x27;re doing yourself a disservice by having to play with the formatting itself instead of being able to express what you mean with the tools the language already provides you.<p>As soon as anyone else looks at your code or wants to participate in the development process, what is meaningful to you about the arrangement simply won&#x27;t translate into their view; what is the use of a programming language if not to use its existing definitions and concepts to communicate the concepts of programming?<p>You can use fancy syntax tricks, but domain-specific languages are a much better way to handle the same problem. You can express things with them that other humans can understand while still retaining access to your existing formatting tools.</div><br/><div id="40701821" class="c"><input type="checkbox" id="c-40701821" checked=""/><div class="controls bullet"><span class="by">thfuran</span><span>|</span><a href="#40694122">root</a><span>|</span><a href="#40694381">parent</a><span>|</span><a href="#40694572">next</a><span>|</span><label class="collapse" for="c-40701821">[-]</label><label class="expand" for="c-40701821">[1 more]</label></div><br/><div class="children"><div class="content">You&#x27;d write a DSL to somehow clarify formatting a matrix literal instead of just putting some spaces as needed to get the rows and columns to line up cleanly?</div><br/></div></div><div id="40694572" class="c"><input type="checkbox" id="c-40694572" checked=""/><div class="controls bullet"><span class="by">vitiral</span><span>|</span><a href="#40694122">root</a><span>|</span><a href="#40694381">parent</a><span>|</span><a href="#40701821">prev</a><span>|</span><a href="#40697474">next</a><span>|</span><label class="collapse" for="c-40694572">[-]</label><label class="expand" for="c-40694572">[1 more]</label></div><br/><div class="children"><div class="content">I personally dislike ad-hoc DSLs that aren&#x27;t composed of the language&#x27;s existing syntax.<p>Considering I get pleasure from formatting the code beautifully I&#x27;m not sure how it&#x27;s even possible to be doing _myself_ a disservice. It&#x27;s like saying I&#x27;m doing a disservice learning guitar instead of listening to Coldplay on my speakers.<p>As far as others are concerned... I agree somewhat, but I don&#x27;t think it&#x27;s by any means proven. I think we are always better off then cobbled together code where formatting hasn&#x27;t been thought about. By well-designed hand-crafted formatting can be expressive in it&#x27;s own way IMO</div><br/></div></div></div></div><div id="40697474" class="c"><input type="checkbox" id="c-40697474" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#40694122">parent</a><span>|</span><a href="#40694381">prev</a><span>|</span><a href="#40694599">next</a><span>|</span><label class="collapse" for="c-40697474">[-]</label><label class="expand" for="c-40697474">[2 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t find the mental burden of formatting code to have a positive ROI.<p>I want to write syntacially-valid code, without worrying about the visual presentation of it. (I want a good presentation, but I don&#x27;t want to put forth the effort to create it.)</div><br/><div id="40703465" class="c"><input type="checkbox" id="c-40703465" checked=""/><div class="controls bullet"><span class="by">fragmede</span><span>|</span><a href="#40694122">root</a><span>|</span><a href="#40697474">parent</a><span>|</span><a href="#40694599">next</a><span>|</span><label class="collapse" for="c-40703465">[-]</label><label class="expand" for="c-40703465">[1 more]</label></div><br/><div class="children"><div class="content">Yeah that&#x27;s why I fight with how I feel about python so much. In other languages I can just shove the curly bracket in the right place and fix the whitespace later, but Python has whitespace as significant, so I&#x27;m forced to fix it&#x2F;get it right. But that means it&#x27;s right when I dig a &quot;temporary&quot; script up years later.</div><br/></div></div></div></div><div id="40694599" class="c"><input type="checkbox" id="c-40694599" checked=""/><div class="controls bullet"><span class="by">erik_seaberg</span><span>|</span><a href="#40694122">parent</a><span>|</span><a href="#40697474">prev</a><span>|</span><a href="#40694478">next</a><span>|</span><label class="collapse" for="c-40694599">[-]</label><label class="expand" for="c-40694599">[1 more]</label></div><br/><div class="children"><div class="content">This. Automatically doing it well (clarifying the intent of the code) is an AI-complete problem. That&#x27;s not an excuse for automatically doing it poorly and forcing everyone else to live with it.</div><br/></div></div><div id="40694478" class="c"><input type="checkbox" id="c-40694478" checked=""/><div class="controls bullet"><span class="by">rowanG077</span><span>|</span><a href="#40694122">parent</a><span>|</span><a href="#40694599">prev</a><span>|</span><a href="#40694261">next</a><span>|</span><label class="collapse" for="c-40694478">[-]</label><label class="expand" for="c-40694478">[6 more]</label></div><br/><div class="children"><div class="content">I mean you can do whatever you want in a hobby project you work on solo.<p>I do want to say that I have the opposite view. People who use formatters want their code to be consistent and go the extra mile it ensure it does. It&#x27;s like manual testing vs automated testing to me. Sure with manual testing you can test many more corner cases as they come up as an intelligent person is in the loop. But there will be mistakes made, tests forgotten etc. Just like there will always be inconsistencies when you manually format the code.</div><br/><div id="40694561" class="c"><input type="checkbox" id="c-40694561" checked=""/><div class="controls bullet"><span class="by">vitiral</span><span>|</span><a href="#40694122">root</a><span>|</span><a href="#40694478">parent</a><span>|</span><a href="#40694261">next</a><span>|</span><label class="collapse" for="c-40694561">[-]</label><label class="expand" for="c-40694561">[5 more]</label></div><br/><div class="children"><div class="content">Im not sure how it&#x27;s even remotely related to testing. I do agree that it depends on the person, just like every medium depends on both the artist creating the work and the patrons viewing it.<p>Many people who use formatters (myself included) just want consistent code and don&#x27;t want to bicker with others about it. When it is soley owned by me and I&#x27;m doing it for fun, these reasons fall away for me.</div><br/><div id="40694613" class="c"><input type="checkbox" id="c-40694613" checked=""/><div class="controls bullet"><span class="by">rowanG077</span><span>|</span><a href="#40694122">root</a><span>|</span><a href="#40694561">parent</a><span>|</span><a href="#40694261">next</a><span>|</span><label class="collapse" for="c-40694613">[-]</label><label class="expand" for="c-40694613">[4 more]</label></div><br/><div class="children"><div class="content">It meant to illustrate the same human weakness in consistency and repeatability disadvantages both manual testing and manual formatting. In essence manually formatting is a baker making every bread by hand. Some bread will be better then others. In contrast to an automated factory turning out the same quality bread every day.</div><br/><div id="40694624" class="c"><input type="checkbox" id="c-40694624" checked=""/><div class="controls bullet"><span class="by">vitiral</span><span>|</span><a href="#40694122">root</a><span>|</span><a href="#40694613">parent</a><span>|</span><a href="#40694261">next</a><span>|</span><label class="collapse" for="c-40694624">[-]</label><label class="expand" for="c-40694624">[3 more]</label></div><br/><div class="children"><div class="content">Ah, makes sense. I think there are use-cases for both, even personal hobby projects. There&#x27;s some languages with so much damn syntax that I don&#x27;t think I could even begin to write code without a formatter (I&#x27;m looking at you rust and Java) and others where it stays out of your way (python, Lua, etc)</div><br/><div id="40701846" class="c"><input type="checkbox" id="c-40701846" checked=""/><div class="controls bullet"><span class="by">thfuran</span><span>|</span><a href="#40694122">root</a><span>|</span><a href="#40694624">parent</a><span>|</span><a href="#40694261">next</a><span>|</span><label class="collapse" for="c-40701846">[-]</label><label class="expand" for="c-40701846">[2 more]</label></div><br/><div class="children"><div class="content">A language with semantic white space seems a somewhat strange choice for an example of when formatting stays out of your way.</div><br/><div id="40702025" class="c"><input type="checkbox" id="c-40702025" checked=""/><div class="controls bullet"><span class="by">vitiral</span><span>|</span><a href="#40694122">root</a><span>|</span><a href="#40701846">parent</a><span>|</span><a href="#40694261">next</a><span>|</span><label class="collapse" for="c-40702025">[-]</label><label class="expand" for="c-40702025">[1 more]</label></div><br/><div class="children"><div class="content">Fair enough! I only wrote it early in my career, it might feel more restrictive now</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="40698578" class="c"><input type="checkbox" id="c-40698578" checked=""/><div class="controls bullet"><span class="by">rapfaria</span><span>|</span><a href="#40694122">prev</a><span>|</span><a href="#40701903">next</a><span>|</span><label class="collapse" for="c-40698578">[-]</label><label class="expand" for="c-40698578">[6 more]</label></div><br/><div class="children"><div class="content">After reformatting, did git blame always pointed to those commits and the most recent author, or were they added to --ignore-rev?</div><br/><div id="40698628" class="c"><input type="checkbox" id="c-40698628" checked=""/><div class="controls bullet"><span class="by">Arainach</span><span>|</span><a href="#40698578">parent</a><span>|</span><a href="#40700251">next</a><span>|</span><label class="collapse" for="c-40698628">[-]</label><label class="expand" for="c-40698628">[3 more]</label></div><br/><div class="children"><div class="content">Google doesn&#x27;t use Git internally, and its code search and source control tools expose the concept of &quot;show blame before this change&quot;, so in practice reformats like this aren&#x27;t troublesome with regard to blame.</div><br/><div id="40700215" class="c"><input type="checkbox" id="c-40700215" checked=""/><div class="controls bullet"><span class="by">montag</span><span>|</span><a href="#40698578">root</a><span>|</span><a href="#40698628">parent</a><span>|</span><a href="#40700251">next</a><span>|</span><label class="collapse" for="c-40700215">[-]</label><label class="expand" for="c-40700215">[2 more]</label></div><br/><div class="children"><div class="content">This is true but I think it would still be nice for VCS to have a first class concept of &quot;peek through&quot; changes (whitespace, formatting, etc.) for the purpose of blame.</div><br/><div id="40702897" class="c"><input type="checkbox" id="c-40702897" checked=""/><div class="controls bullet"><span class="by">morgante</span><span>|</span><a href="#40698578">root</a><span>|</span><a href="#40700215">parent</a><span>|</span><a href="#40700251">next</a><span>|</span><label class="collapse" for="c-40702897">[-]</label><label class="expand" for="c-40702897">[1 more]</label></div><br/><div class="children"><div class="content">It does. Just put ignored commits in a file: <a href="https:&#x2F;&#x2F;docs.github.com&#x2F;en&#x2F;repositories&#x2F;working-with-files&#x2F;using-files&#x2F;viewing-a-file#ignore-commits-in-the-blame-view" rel="nofollow">https:&#x2F;&#x2F;docs.github.com&#x2F;en&#x2F;repositories&#x2F;working-with-files&#x2F;u...</a></div><br/></div></div></div></div></div></div><div id="40700251" class="c"><input type="checkbox" id="c-40700251" checked=""/><div class="controls bullet"><span class="by">tantalor</span><span>|</span><a href="#40698578">parent</a><span>|</span><a href="#40698628">prev</a><span>|</span><a href="#40701903">next</a><span>|</span><label class="collapse" for="c-40700251">[-]</label><label class="expand" for="c-40700251">[2 more]</label></div><br/><div class="children"><div class="content">Blame can be configured to ignore cleanups like this.</div><br/><div id="40700313" class="c"><input type="checkbox" id="c-40700313" checked=""/><div class="controls bullet"><span class="by">mckn1ght</span><span>|</span><a href="#40698578">root</a><span>|</span><a href="#40700251">parent</a><span>|</span><a href="#40701903">next</a><span>|</span><label class="collapse" for="c-40700313">[-]</label><label class="expand" for="c-40700313">[1 more]</label></div><br/><div class="children"><div class="content">This has always been something I use to argue against just reformatting code in isolation. TIL git provides a way to ignore that. Thanks!</div><br/></div></div></div></div></div></div><div id="40701903" class="c"><input type="checkbox" id="c-40701903" checked=""/><div class="controls bullet"><span class="by">aiuto</span><span>|</span><a href="#40698578">prev</a><span>|</span><a href="#40693957">next</a><span>|</span><label class="collapse" for="c-40701903">[-]</label><label class="expand" for="c-40701903">[5 more]</label></div><br/><div class="children"><div class="content">I want to start by saying that I do not want to diminish or disparage the work that Russ, Rob, Laurent, and others have done. It has made the Google code base better. That is an inarguable fact.  Nor do I want to pick on buildifier or gofmt or any other tool as a singleton problem. I&#x27;ll talk about buildifier because that is what I personally fight with. Others may have different demons.  (YDMV - &quot;your daemon may vary&quot;.  I&#x27;m taking the authorship of that one now, in case it ever takes off).<p>But back to the point... formatting rules without firm, incredibly strict enforcement ends up being a tax on the janitors - the people who clean the code base and do large scale changes. That makes me sad. These are the people who care a great deal about code health, and their work is hindered by the lint checks that we have imposed.<p>Let me give an example.<p>I&#x27;m trying to eliminate a constraint in the build system. It&#x27;s a &quot;small&quot; large change - only O(30K) instances. (Yeah, Google scale is different).  I have an incredible wealth of tools available to me to automate the process. For the benefit of the Googlers, I can identify Blaze targets to change, use buildozer to fix them, and ship off CLs to review. But the changes I want to make are often ones which should be reviewed by the code owners, and not globally approved. So possibly O(10K) individuals might be involved in reviews.<p>Let&#x27;s explore the problem. First, shouts to y2mango for bringing up incremental formatters. This should be the default for all tools. And another to flymasterv for raising the question of &quot;why not just format as each person touches a BUILD file&quot;. Here&#x27;s the situation.<p>1. buildozer is really good at rewriting BUILD files syntactically correctly.
2. It has an unfortunate side effect of not being incremental. It calls buildifier to rewrite the entire file.
3. We update the formatting rules to make them stricter over time. That means that a &quot;correct&quot; BUILD file on January 1, might require changes on March 1.  
4. Buildifier findings are advisory, rather than mandatory.
5. No team is staffed with repeating the monumental work this post started with.<p>The reality on the ground is that little touched BUILD files become stale, and would require a formatting update over time. It is actually worse than that, because many teams take the path of ignoring buildifier warnings and committing their working code anyway. Without continual BUILD file reformatting there is a lot of stale floating around. [Root cause: We could fix this by promoting people for doing that repeat work. But we don&#x27;t. We promote for the initial sprint.]<p>And then a janitor comes along.<p>I use bulldozer to fix a problem. It reformats an ancient BUILD file completely (not incremental). I send it to the code owner. They see changes far beyond my 2 line fix. They reject it, or ask for a change to only the two lines that actually mattered. Sure. I can hand build the change once or twice. But not for a few hundred, or thousands files. So.... I have to hack up an incremental format. Or, it turns out that users are very happy if I don&#x27;t bother with formatting at all, and just change single lines. It&#x27;s not that any individual is right or wrong. It is that they all have a choice and a preference and Google created a policy that allowed individual teams to have a choice of strict compliance or not.  That is the failure.<p>If you are going to have a policy about code formatting:
- make it hard mandatory for everything except a &quot;break glass&quot; situation
- if the policy can evolve, staff a team with enforcing it globally<p>The fact that Google, as a company, does not reward this behavior does not take away from any individual&#x27;s accomplishments.  This post may sound grumpy to an outsider, but I am constantly amazed at the tools I have available to fix things on an enormous scale. The friction is usually only where we have good intentions, without the policy teeth to enforce alignment with the intentions. That&#x27;s a management problem, not a technical one.</div><br/><div id="40703224" class="c"><input type="checkbox" id="c-40703224" checked=""/><div class="controls bullet"><span class="by">spc476</span><span>|</span><a href="#40701903">parent</a><span>|</span><a href="#40701965">next</a><span>|</span><label class="collapse" for="c-40703224">[-]</label><label class="expand" for="c-40703224">[1 more]</label></div><br/><div class="children"><div class="content">&gt; formatting rules without firm, incredibly strict enforcement ends up being a tax on the janitors<p>Wait!  I thought Google only promoted and rewarded people who do new development, not maintenance.  What gives?</div><br/></div></div><div id="40701965" class="c"><input type="checkbox" id="c-40701965" checked=""/><div class="controls bullet"><span class="by">repsilat</span><span>|</span><a href="#40701903">parent</a><span>|</span><a href="#40703224">prev</a><span>|</span><a href="#40702251">next</a><span>|</span><label class="collapse" for="c-40701965">[-]</label><label class="expand" for="c-40701965">[2 more]</label></div><br/><div class="children"><div class="content">For this sort of change I think the best strategy is &quot;two passes&quot;.<p>Auto-format those O(30k) files and get global approval. Then, separately, make your two-line semantic change and seek approval from local owners.</div><br/><div id="40702183" class="c"><input type="checkbox" id="c-40702183" checked=""/><div class="controls bullet"><span class="by">aiuto</span><span>|</span><a href="#40701903">root</a><span>|</span><a href="#40701965">parent</a><span>|</span><a href="#40702251">next</a><span>|</span><label class="collapse" for="c-40702183">[-]</label><label class="expand" for="c-40702183">[1 more]</label></div><br/><div class="children"><div class="content">That is missing the point about the misdirection of costs. Your suggestion forces the people doing meaningful semantic changes, into involuntary servants to the goal of cleaning the stylistic problems. It&#x27;s fine to have a policy that costs a little to each of the owners of their own code. It&#x27;s a tax for the overall good. It becomes a problem if the cost of compliance is shifted to &quot;the next person who looks at it.&quot; That encourages people to not look at it.</div><br/></div></div></div></div><div id="40702251" class="c"><input type="checkbox" id="c-40702251" checked=""/><div class="controls bullet"><span class="by">MBlume</span><span>|</span><a href="#40701903">parent</a><span>|</span><a href="#40701965">prev</a><span>|</span><a href="#40693957">next</a><span>|</span><label class="collapse" for="c-40702251">[-]</label><label class="expand" for="c-40702251">[1 more]</label></div><br/><div class="children"><div class="content">Seems like the solution here is to set up buildifier so that it can send out robot CLs on an ongoing basis.</div><br/></div></div></div></div><div id="40694308" class="c"><input type="checkbox" id="c-40694308" checked=""/><div class="controls bullet"><span class="by">troad</span><span>|</span><a href="#40693957">prev</a><span>|</span><a href="#40694230">next</a><span>|</span><label class="collapse" for="c-40694308">[-]</label><label class="expand" for="c-40694308">[3 more]</label></div><br/><div class="children"><div class="content">The use of light grey text on a darker grey background strains my eyes and makes this unnecessarily unpleasant to read. I&#x27;d respectfully suggest increasing the contrast dramatically.<p>I keep a quick little scriptlet in my bookmark bar for cases like this:<p><pre><code>  javascript:(function(){ $(&#x27;head&#x27;).append(&#x27;&lt;style&gt;*{color:#101010 !important; background:#f0f0f0 !important;}&lt;&#x2F;style&gt;&#x27;); }());
</code></pre>
(A ten second hack job; suggested improvements from front-end friends are welcome.)</div><br/><div id="40696960" class="c"><input type="checkbox" id="c-40696960" checked=""/><div class="controls bullet"><span class="by">laurentlb</span><span>|</span><a href="#40694308">parent</a><span>|</span><a href="#40694324">next</a><span>|</span><label class="collapse" for="c-40696960">[-]</label><label class="expand" for="c-40696960">[1 more]</label></div><br/><div class="children"><div class="content">Thanks, I&#x27;ve increased the contrast (not as much as your suggestion, but I hope it&#x27;s better).</div><br/></div></div></div></div><div id="40694230" class="c"><input type="checkbox" id="c-40694230" checked=""/><div class="controls bullet"><span class="by">flymasterv</span><span>|</span><a href="#40694308">prev</a><span>|</span><a href="#40700372">next</a><span>|</span><label class="collapse" for="c-40694230">[-]</label><label class="expand" for="c-40694230">[17 more]</label></div><br/><div class="children"><div class="content">I don’t understand why they had to format 100k files. You enforce the format with a presubmit and let the code get formatted in the next change.<p>I have long felt that Google’s strength has always been making a bad architectural choice and then executing on it flawlessly. So many systems are designed in ways that require incredible technical execution to make them workable, and they do it.</div><br/><div id="40694265" class="c"><input type="checkbox" id="c-40694265" checked=""/><div class="controls bullet"><span class="by">rsc</span><span>|</span><a href="#40694230">parent</a><span>|</span><a href="#40695007">next</a><span>|</span><label class="collapse" for="c-40694265">[-]</label><label class="expand" for="c-40694265">[6 more]</label></div><br/><div class="children"><div class="content">If you do it that way, then what should be a 1-line BUILD file change turns into something that changes every line. It distracts from the actual purpose of the future change. Many directories aren&#x27;t touched for long periods of time. A few months from now someone tries to make a 1-line change and is unpleasantly surprised they have to deal with tons of seemingly spurious formatting changes. Not good.<p>Putting the time of submitting the changes on a small team (mostly me, with approvals from Rob and help from Laurent) was absolutely the right tradeoff. It avoided the &quot;unfunded mandate&quot; and tech debt of making everyone else deal with it.<p>Update: I found the FAQ we wrote back then. It was very short. These were the last two questions:<p>Q: Who will update all the existing BUILD files?<p>A: We will. There are nearly 200,000 of them, and we’ll take care of that. We’re sending CLs out now. If you want to do it yourself, that’s fine: see go&#x2F;buildifiernow for a tool that can help.<p>Q: You’re creating a lot more work for me.<p>A: We are creating significant amounts of work for ourselves, including reformatting all 193,000 BUILD files in google3. For the rest of the engineers in the company, we intend to make the transition as smooth as possible, with integration in Eclipse, Emacs, and Vim, as well as tools like Rosie and GenJsDeps. It is an explicit goal not to create significant work for other engineers. If, as we roll this out, you find that we’ve created noticeable work in your workflow, please let us know so that we can address that.</div><br/><div id="40700180" class="c"><input type="checkbox" id="c-40700180" checked=""/><div class="controls bullet"><span class="by">diegocg</span><span>|</span><a href="#40694230">root</a><span>|</span><a href="#40694265">parent</a><span>|</span><a href="#40695007">next</a><span>|</span><label class="collapse" for="c-40700180">[-]</label><label class="expand" for="c-40700180">[5 more]</label></div><br/><div class="children"><div class="content">Make the one line change be a commit, then the reformatting be another one, review only the first one. It shouldn&#x27;t be a problem with a proper review system.</div><br/><div id="40700534" class="c"><input type="checkbox" id="c-40700534" checked=""/><div class="controls bullet"><span class="by">laurentlb</span><span>|</span><a href="#40694230">root</a><span>|</span><a href="#40700180">parent</a><span>|</span><a href="#40700217">next</a><span>|</span><label class="collapse" for="c-40700534">[-]</label><label class="expand" for="c-40700534">[1 more]</label></div><br/><div class="children"><div class="content">If every engineer needs to make two commits when they change the build file, that&#x27;s a higher cost compared to having people dedicated to the migration.</div><br/></div></div><div id="40700217" class="c"><input type="checkbox" id="c-40700217" checked=""/><div class="controls bullet"><span class="by">dilyevsky</span><span>|</span><a href="#40694230">root</a><span>|</span><a href="#40700180">parent</a><span>|</span><a href="#40700534">prev</a><span>|</span><a href="#40700265">next</a><span>|</span><label class="collapse" for="c-40700217">[-]</label><label class="expand" for="c-40700217">[1 more]</label></div><br/><div class="children"><div class="content">Googles source control system at the time (Perforce) didn’t allow for this at least easily. Not sure about now</div><br/></div></div><div id="40700265" class="c"><input type="checkbox" id="c-40700265" checked=""/><div class="controls bullet"><span class="by">tantalor</span><span>|</span><a href="#40694230">root</a><span>|</span><a href="#40700180">parent</a><span>|</span><a href="#40700217">prev</a><span>|</span><a href="#40695007">next</a><span>|</span><label class="collapse" for="c-40700265">[-]</label><label class="expand" for="c-40700265">[2 more]</label></div><br/><div class="children"><div class="content">All changes need to be reviewed. That&#x27;s the point of code reviews.<p>Your suggestion would allow people to bypass the code review by just saying &quot;oh it&#x27;s just cleanup don&#x27;t worry&quot;.</div><br/><div id="40701478" class="c"><input type="checkbox" id="c-40701478" checked=""/><div class="controls bullet"><span class="by">YZF</span><span>|</span><a href="#40694230">root</a><span>|</span><a href="#40700265">parent</a><span>|</span><a href="#40695007">next</a><span>|</span><label class="collapse" for="c-40701478">[-]</label><label class="expand" for="c-40701478">[1 more]</label></div><br/><div class="children"><div class="content">My understanding is the 100k changes files were not reviewed by a human, they did some automatic validation, so that validation could also be done on demand, e.g. a commit saying &quot;reformatted&quot; could trigger a check to make sure the files were identical and bypass a human review... but sounds like they chose a reasonable approach.<p>I&#x27;ve always been against &quot;reformat the whole code base&quot; but it&#x27;s an interesting example where it seems to have been the right choice.</div><br/></div></div></div></div></div></div></div></div><div id="40695007" class="c"><input type="checkbox" id="c-40695007" checked=""/><div class="controls bullet"><span class="by">y2mango</span><span>|</span><a href="#40694230">parent</a><span>|</span><a href="#40694265">prev</a><span>|</span><a href="#40694263">next</a><span>|</span><label class="collapse" for="c-40695007">[-]</label><label class="expand" for="c-40695007">[1 more]</label></div><br/><div class="children"><div class="content">Foremost: formatting these BUILD files was the correct decision as rsc already explained.<p>Then, there are also other formatters that support &quot;incremental formatting&quot;, meaning it only formats lines that are changed in your commit.<p>Disclaimer: I authored <a href="https:&#x2F;&#x2F;github.com&#x2F;google&#x2F;pyink">https:&#x2F;&#x2F;github.com&#x2F;google&#x2F;pyink</a> and replaced Google Python&#x27;s YAPF formatter with this Black fork and also implemented the &quot;incremental formatting&quot; feature in Pyink and upstreamed to Black.<p>When we were rolling out the formatter change, we chose to NOT format the Python files mainly because 1) not all teams at Google enforce Python formatting at presubmit time; 2) the formatter supports &quot;incremental formatting&quot; to minimize the diffs introduced by the formatter.<p>There are of course less ideal cases where even incremental formatting has to touch not-changed-lines, such as a large Python dictionary&#x2F;list&#x2F;set literal that spans across dozens or even hundreds of lines. It&#x27;s a tradeoff in the end.</div><br/></div></div><div id="40694263" class="c"><input type="checkbox" id="c-40694263" checked=""/><div class="controls bullet"><span class="by">valicord</span><span>|</span><a href="#40694230">parent</a><span>|</span><a href="#40695007">prev</a><span>|</span><a href="#40694239">next</a><span>|</span><label class="collapse" for="c-40694263">[-]</label><label class="expand" for="c-40694263">[6 more]</label></div><br/><div class="children"><div class="content">Because then every commit from now on has a ton of formatting changes that make it harder to see what was actually changed.</div><br/><div id="40694303" class="c"><input type="checkbox" id="c-40694303" checked=""/><div class="controls bullet"><span class="by">flymasterv</span><span>|</span><a href="#40694230">root</a><span>|</span><a href="#40694263">parent</a><span>|</span><a href="#40694239">next</a><span>|</span><label class="collapse" for="c-40694303">[-]</label><label class="expand" for="c-40694303">[5 more]</label></div><br/><div class="children"><div class="content">And this is a flaw of Perforce: in a Git&#x2F;Mercurial system, the presubmit can stack the changes into two commits. In P4, one CL has to contain both changes.<p>And Google uses P4(ish) because monorepo, so they build further abstractions over P4 to enable git and hg in user space which erases most of the potential benefits of either which is also all really, really good software, but it’s all effort necessitated by monorepo. CitC is a work of art, but it is also something necessitated by a stack of other choices that forced their hand into inventing something miraculous to keep hacking around a previous limitation that nobody else has.</div><br/><div id="40694345" class="c"><input type="checkbox" id="c-40694345" checked=""/><div class="controls bullet"><span class="by">valicord</span><span>|</span><a href="#40694230">root</a><span>|</span><a href="#40694303">parent</a><span>|</span><a href="#40694385">next</a><span>|</span><label class="collapse" for="c-40694345">[-]</label><label class="expand" for="c-40694345">[2 more]</label></div><br/><div class="children"><div class="content">&gt;the presubmit can stack the changes into two commits<p>That seems like way more complexity than just doing it once and for all. Now the commit log is littered by a bunch of automatic commits that format one file at a time.</div><br/><div id="40694389" class="c"><input type="checkbox" id="c-40694389" checked=""/><div class="controls bullet"><span class="by">lesuorac</span><span>|</span><a href="#40694230">root</a><span>|</span><a href="#40694345">parent</a><span>|</span><a href="#40694385">next</a><span>|</span><label class="collapse" for="c-40694389">[-]</label><label class="expand" for="c-40694389">[1 more]</label></div><br/><div class="children"><div class="content">The commit history for untouched files is mostly just cleanup CLs for reformatting or changing an import for a decade+. A lot of the history is rather useless for finding a bug but at least its generally well tagged with &#x27;CLEANUP=TRUE&#x27; so you know to ignore them.</div><br/></div></div></div></div><div id="40694385" class="c"><input type="checkbox" id="c-40694385" checked=""/><div class="controls bullet"><span class="by">lesuorac</span><span>|</span><a href="#40694230">root</a><span>|</span><a href="#40694303">parent</a><span>|</span><a href="#40694345">prev</a><span>|</span><a href="#40694433">next</a><span>|</span><label class="collapse" for="c-40694385">[-]</label><label class="expand" for="c-40694385">[1 more]</label></div><br/><div class="children"><div class="content">You can effectively submit two CLs at the same time where the first CL is just a formatting change and the second has just your changes. Although you would need approval for both CLs which really is no different than if you used Git&#x2F;Mercurial.</div><br/></div></div><div id="40694433" class="c"><input type="checkbox" id="c-40694433" checked=""/><div class="controls bullet"><span class="by">fragmede</span><span>|</span><a href="#40694230">root</a><span>|</span><a href="#40694303">parent</a><span>|</span><a href="#40694385">prev</a><span>|</span><a href="#40694239">next</a><span>|</span><label class="collapse" for="c-40694433">[-]</label><label class="expand" for="c-40694433">[1 more]</label></div><br/><div class="children"><div class="content">git5&#x27;s been depreciated. fig&#x2F;hg is well supported though.</div><br/></div></div></div></div></div></div><div id="40694239" class="c"><input type="checkbox" id="c-40694239" checked=""/><div class="controls bullet"><span class="by">ChrisAntaki</span><span>|</span><a href="#40694230">parent</a><span>|</span><a href="#40694263">prev</a><span>|</span><a href="#40694267">next</a><span>|</span><label class="collapse" for="c-40694239">[-]</label><label class="expand" for="c-40694239">[1 more]</label></div><br/><div class="children"><div class="content">Ex: Angular</div><br/></div></div><div id="40694267" class="c"><input type="checkbox" id="c-40694267" checked=""/><div class="controls bullet"><span class="by">lopkeny12ko</span><span>|</span><a href="#40694230">parent</a><span>|</span><a href="#40694239">prev</a><span>|</span><a href="#40700372">next</a><span>|</span><label class="collapse" for="c-40694267">[-]</label><label class="expand" for="c-40694267">[2 more]</label></div><br/><div class="children"><div class="content">Did you even read the article? This is literally what it said.<p>&gt; Rob and Russ shared their ambitious plan: to reformat every single Bazel BUILD file in Google’s codebase and enforce this formatting with a presubmit script.</div><br/><div id="40694282" class="c"><input type="checkbox" id="c-40694282" checked=""/><div class="controls bullet"><span class="by">refulgentis</span><span>|</span><a href="#40694230">root</a><span>|</span><a href="#40694267">parent</a><span>|</span><a href="#40700372">next</a><span>|</span><label class="collapse" for="c-40694282">[-]</label><label class="expand" for="c-40694282">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s saturday night, in spring, it&#x27;s really beautiful out. Another year alive. It gives me joy and reminds me to ease off a bit.<p>In unrelated news, OP was suggesting <i>no</i> 100K file CL, and a <i>presubmit</i>. They were <i>not</i> disputing what the article said. They were suggesting sharding out the initial formatting change to 100K individual CLs.</div><br/></div></div></div></div></div></div><div id="40700372" class="c"><input type="checkbox" id="c-40700372" checked=""/><div class="controls bullet"><span class="by">ragall</span><span>|</span><a href="#40694230">prev</a><span>|</span><label class="collapse" for="c-40700372">[-]</label><label class="expand" for="c-40700372">[3 more]</label></div><br/><div class="children"><div class="content">The real lesson here should be that source code shouldn&#x27;t be stored in a text format, but in a well-defined strict binary format that stores the parse tree directly, which completely eliminates the need for formatters.</div><br/><div id="40700423" class="c"><input type="checkbox" id="c-40700423" checked=""/><div class="controls bullet"><span class="by">mmastrac</span><span>|</span><a href="#40700372">parent</a><span>|</span><a href="#40701459">next</a><span>|</span><label class="collapse" for="c-40700423">[-]</label><label class="expand" for="c-40700423">[1 more]</label></div><br/><div class="children"><div class="content">A well-defined, unambiguous formatting standard for a text file is philosophically identically to a well-defined strict binary format. :)</div><br/></div></div><div id="40701459" class="c"><input type="checkbox" id="c-40701459" checked=""/><div class="controls bullet"><span class="by">YZF</span><span>|</span><a href="#40700372">parent</a><span>|</span><a href="#40700423">prev</a><span>|</span><label class="collapse" for="c-40701459">[-]</label><label class="expand" for="c-40701459">[1 more]</label></div><br/><div class="children"><div class="content">I agree with this sentiment. It also provides an opportunity to store other metadata with the code. It lets different people choose their formatting preference when rendering back to human readable code.<p>The source code is text thing seems like a &quot;legacy&quot; concept.<p>At the very least I think this is an interesting thing to explore. Maybe it leads nowhere...</div><br/></div></div></div></div></div></div></div></div></div></body></html>