<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1697014864179" as="style"/><link rel="stylesheet" href="styles.css?v=1697014864179"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://discourse.haskell.org/t/ghc-9-8-1-is-now-available/7832">GHC 9.8.1</a> <span class="domain">(<a href="https://discourse.haskell.org">discourse.haskell.org</a>)</span></div><div class="subtext"><span>njaremko</span> | <span>15 comments</span></div><br/><div><div id="37841782" class="c"><input type="checkbox" id="c-37841782" checked=""/><div class="controls bullet"><span class="by">WJW</span><span>|</span><a href="#37841867">next</a><span>|</span><label class="collapse" for="c-37841782">[-]</label><label class="expand" for="c-37841782">[2 more]</label></div><br/><div class="children"><div class="content">Woop! My timerfd change is finally out in the wild!<p>This will make it so that (on systems with timerfd) the runtime will no longer have to wait for the next runtime tick before exiting. This saves on average 5 ms per program run, and up to 10 ms for programs with a very short runtime. Not much for server programs with an expected lifetime of days&#x2F;weeks, but potentially quite nice for CLI programs like hledger or for programs that invoke many other Haskell programs.<p>I accidentally discovered this when trying to optimize an Advent of Code problem and couldn&#x27;t get it below 10 ms no matter what I tried. Eventually I discovered that &quot;hello world&quot; also took 10 ms so I assumed it was just runtime startup costs. Decided to look anyway and found out it was actually runtime shutdown costs, where the runtime would `join` the rts &quot;ticker&quot; thread. The ticker thread would only check for a shutdown flag once every loop, so 10 ms with the default settings. Now it can be shut down immediately, which makes small programs much faster.</div><br/><div id="37842227" class="c"><input type="checkbox" id="c-37842227" checked=""/><div class="controls bullet"><span class="by">pja</span><span>|</span><a href="#37841782">parent</a><span>|</span><a href="#37841867">next</a><span>|</span><label class="collapse" for="c-37842227">[-]</label><label class="expand" for="c-37842227">[1 more]</label></div><br/><div class="children"><div class="content">Oh wow. I’ll have to recompile some of my old AoC Code to see how fast it really runs now!<p>Like you I had assumed this was simply runtime startup &#x2F; teardown overhead.</div><br/></div></div></div></div><div id="37841867" class="c"><input type="checkbox" id="c-37841867" checked=""/><div class="controls bullet"><span class="by">trashburger</span><span>|</span><a href="#37841782">prev</a><span>|</span><a href="#37841077">next</a><span>|</span><label class="collapse" for="c-37841867">[-]</label><label class="expand" for="c-37841867">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I specified text: 2.1 (a number) instead of text: &#x27;2.1&#x27; (a string) - causing Stack to complain vigorously<p>lol, not even Haskell can escape YAML being YAML.</div><br/></div></div><div id="37841077" class="c"><input type="checkbox" id="c-37841077" checked=""/><div class="controls bullet"><span class="by">ridiculous_fish</span><span>|</span><a href="#37841867">prev</a><span>|</span><a href="#37840949">next</a><span>|</span><label class="collapse" for="c-37841077">[-]</label><label class="expand" for="c-37841077">[4 more]</label></div><br/><div class="children"><div class="content">Asking as a Haskell dabbler - why are features like `ExtendedLiterals` behind an opt-in language extension? Why not just turn it on for everyone?</div><br/><div id="37841093" class="c"><input type="checkbox" id="c-37841093" checked=""/><div class="controls bullet"><span class="by">ReleaseCandidat</span><span>|</span><a href="#37841077">parent</a><span>|</span><a href="#37841615">next</a><span>|</span><label class="collapse" for="c-37841093">[-]</label><label class="expand" for="c-37841093">[1 more]</label></div><br/><div class="children"><div class="content">This happens with the most used&quot;(?) extensions after some time. Now for example there is Ghc2021 which sets the following extensions:
<a href="https:&#x2F;&#x2F;ghc.gitlab.haskell.org&#x2F;ghc&#x2F;doc&#x2F;users_guide&#x2F;exts&#x2F;control.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;ghc.gitlab.haskell.org&#x2F;ghc&#x2F;doc&#x2F;users_guide&#x2F;exts&#x2F;cont...</a></div><br/></div></div><div id="37841615" class="c"><input type="checkbox" id="c-37841615" checked=""/><div class="controls bullet"><span class="by">Buttons840</span><span>|</span><a href="#37841077">parent</a><span>|</span><a href="#37841093">prev</a><span>|</span><a href="#37841109">next</a><span>|</span><label class="collapse" for="c-37841615">[-]</label><label class="expand" for="c-37841615">[1 more]</label></div><br/><div class="children"><div class="content">Hiding language features behind opt-in flags seems weird, but after some thought I like it. Consider if C++ had similar flags, people are always saying to choose a subset of C++ to use, and flags would make that explicit and enforceable. Also, when you see a weird bit of syntax you would have an idea what to search for.</div><br/></div></div><div id="37841109" class="c"><input type="checkbox" id="c-37841109" checked=""/><div class="controls bullet"><span class="by">sbergot</span><span>|</span><a href="#37841077">parent</a><span>|</span><a href="#37841615">prev</a><span>|</span><a href="#37840949">next</a><span>|</span><label class="collapse" for="c-37841109">[-]</label><label class="expand" for="c-37841109">[1 more]</label></div><br/><div class="children"><div class="content">One possible reason could be that haskell has specifications (latest version is haskell 2010) and multiple implementations. So GHC cannot change the default language like this.</div><br/></div></div></div></div><div id="37840949" class="c"><input type="checkbox" id="c-37840949" checked=""/><div class="controls bullet"><span class="by">endorphine</span><span>|</span><a href="#37841077">prev</a><span>|</span><a href="#37841816">next</a><span>|</span><label class="collapse" for="c-37840949">[-]</label><label class="expand" for="c-37840949">[4 more]</label></div><br/><div class="children"><div class="content">&gt; We would like to thank GitHub, IOG, the Zw3rk stake pool, Well-Typed, Tweag I&#x2F;O, Serokell, Equinix, SimSpace, the Haskell Foundation, and other anonymous contributors whose on-going financial and in-kind support has facilitated GHC maintenance and release management over the years.<p>Is GitHub sponsoring Haskell development? Or is this them providing some free services (e.g. more Runners) because it&#x27;s a large and importans OSS project?</div><br/><div id="37841011" class="c"><input type="checkbox" id="c-37841011" checked=""/><div class="controls bullet"><span class="by">ReleaseCandidat</span><span>|</span><a href="#37840949">parent</a><span>|</span><a href="#37841687">next</a><span>|</span><label class="collapse" for="c-37841011">[-]</label><label class="expand" for="c-37841011">[1 more]</label></div><br/><div class="children"><div class="content">GHC is hosted on Gitlab, the Github repo is just a mirror. So money.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;ghc&#x2F;ghc">https:&#x2F;&#x2F;github.com&#x2F;ghc&#x2F;ghc</a>
<a href="https:&#x2F;&#x2F;gitlab.haskell.org&#x2F;ghc&#x2F;ghc" rel="nofollow noreferrer">https:&#x2F;&#x2F;gitlab.haskell.org&#x2F;ghc&#x2F;ghc</a><p>Don&#x27;t forget that SPJ had been working for MS for quite some years.</div><br/></div></div><div id="37841687" class="c"><input type="checkbox" id="c-37841687" checked=""/><div class="controls bullet"><span class="by">ejlxsh</span><span>|</span><a href="#37840949">parent</a><span>|</span><a href="#37841011">prev</a><span>|</span><a href="#37841165">next</a><span>|</span><label class="collapse" for="c-37841687">[-]</label><label class="expand" for="c-37841687">[1 more]</label></div><br/><div class="children"><div class="content">I am surprised just how much Cardano is responsible for the funding of GHC and what would happen if that stopped - 4 of those supporters are directly related to Cardano and a fifth is somewhere related. I don&#x27;t know what GitHubs relation is with Haskell and wonder if that&#x27;s some hosting&#x2F;CI runners or something?</div><br/></div></div><div id="37841165" class="c"><input type="checkbox" id="c-37841165" checked=""/><div class="controls bullet"><span class="by">iso8859-1</span><span>|</span><a href="#37840949">parent</a><span>|</span><a href="#37841687">prev</a><span>|</span><a href="#37841816">next</a><span>|</span><label class="collapse" for="c-37841165">[-]</label><label class="expand" for="c-37841165">[1 more]</label></div><br/><div class="children"><div class="content">Github is using GHC to analyze source code, that might be why they&#x27;re sponsoring.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;github&#x2F;semantic">https:&#x2F;&#x2F;github.com&#x2F;github&#x2F;semantic</a></div><br/></div></div></div></div><div id="37841816" class="c"><input type="checkbox" id="c-37841816" checked=""/><div class="controls bullet"><span class="by">lynx23</span><span>|</span><a href="#37840949">prev</a><span>|</span><label class="collapse" for="c-37841816">[-]</label><label class="expand" for="c-37841816">[3 more]</label></div><br/><div class="children"><div class="content">And stack LTS is still on 9.4...</div><br/><div id="37841926" class="c"><input type="checkbox" id="c-37841926" checked=""/><div class="controls bullet"><span class="by">pyrale</span><span>|</span><a href="#37841816">parent</a><span>|</span><a href="#37842159">next</a><span>|</span><label class="collapse" for="c-37841926">[-]</label><label class="expand" for="c-37841926">[1 more]</label></div><br/><div class="children"><div class="content">The very nature of coordinated package sets makes it impossible to have LTS package sets for the last version on release day. Stackage&#x27;s policy is to use nightly for the latest release, and publish LTS versions for older compiler versions.<p>If you want to be on the cutting edge of releases and ignore packages coordination delays and package maintainers taking some time to respond because they actually have a life, you can move to the nightly. Smaller package sets but closer to GHC releases. If you want someone else to solve dependency hell for you and take the time to upstream that fix, you need to give people some time to do it.</div><br/></div></div><div id="37842159" class="c"><input type="checkbox" id="c-37842159" checked=""/><div class="controls bullet"><span class="by">lemper</span><span>|</span><a href="#37841816">parent</a><span>|</span><a href="#37841926">prev</a><span>|</span><label class="collapse" for="c-37842159">[-]</label><label class="expand" for="c-37842159">[1 more]</label></div><br/><div class="children"><div class="content">so what? you can ask your refund to snoyberg.</div><br/></div></div></div></div></div></div></div></div></div></body></html>