<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1710925267191" as="style"/><link rel="stylesheet" href="styles.css?v=1710925267191"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://benw.is/posts/how-i-improved-my-rust-compile-times-by-seventy-five-percent">I Improved My Rust Compile Times by 75%</a> <span class="domain">(<a href="https://benw.is">benw.is</a>)</span></div><div class="subtext"><span>excsn</span> | <span>59 comments</span></div><br/><div><div id="39763769" class="c"><input type="checkbox" id="c-39763769" checked=""/><div class="controls bullet"><span class="by">rob74</span><span>|</span><a href="#39763412">next</a><span>|</span><label class="collapse" for="c-39763769">[-]</label><label class="expand" for="c-39763769">[1 more]</label></div><br/><div class="children"><div class="content">I really wish people wouldn&#x27;t use AI-generated images for blog posts, it&#x27;s so distracting! I clicked the link wanting to read the article, but instead spent several minutes looking at the image to find errors: what&#x27;s shown on the screen (apparently it&#x27;s &quot;Jot Commeditin&quot;) looks like something between a hex dump, git blame, and occult incantations written in a long-forgotten alphabet. Probably you need a keyboard like the one on the desk (with keys arranged in a fractal pattern) to write something like that. And a mouse with a cable going nowhere...</div><br/></div></div><div id="39763412" class="c"><input type="checkbox" id="c-39763412" checked=""/><div class="controls bullet"><span class="by">dan_can_code</span><span>|</span><a href="#39763769">prev</a><span>|</span><a href="#39763073">next</a><span>|</span><label class="collapse" for="c-39763412">[-]</label><label class="expand" for="c-39763412">[17 more]</label></div><br/><div class="children"><div class="content">As a front-end developer dabbling with rust, the compiler being slow is not a problem for me. Whilst I appreciate the benchmark, it&#x27;s not likely I&#x27;ll have 72GB of ram laying around to speed up the process.<p>Yes, hot module reloading is nice and quick. But it reloads with errors included.<p>The primary benefit of the rust compiler, at least from my point of view, is telling me what&#x27;s wrong, where. It&#x27;s a worthwhile sacrifice for a few seconds of my time, when at the end of addressing all of the obvious errors, I have something that works. I find this miles better than HMR.</div><br/><div id="39763799" class="c"><input type="checkbox" id="c-39763799" checked=""/><div class="controls bullet"><span class="by">oefrha</span><span>|</span><a href="#39763412">parent</a><span>|</span><a href="#39763967">next</a><span>|</span><label class="collapse" for="c-39763799">[-]</label><label class="expand" for="c-39763799">[4 more]</label></div><br/><div class="children"><div class="content">You’re a front end developer but you don’t need to make small tweaks all the time? “At the end of addressing all of the obvious errors, I have something that works.” is irrelevant to large swaths of front end code, which is basically always in a “working” state (displays something without error), but needs to be continuously expanded and refined.<p>TFA talks about reload times of 20-30s before their optimization, on a powerful computer. It’s certainly not “a few seconds” especially for people on less powerful hardware. That’s a ridiculous wait time for, say, tweaking a CSS class.<p>I find this comment highly suspect.</div><br/><div id="39763851" class="c"><input type="checkbox" id="c-39763851" checked=""/><div class="controls bullet"><span class="by">dan_can_code</span><span>|</span><a href="#39763412">root</a><span>|</span><a href="#39763799">parent</a><span>|</span><a href="#39763967">next</a><span>|</span><label class="collapse" for="c-39763851">[-]</label><label class="expand" for="c-39763851">[3 more]</label></div><br/><div class="children"><div class="content">JavaScript errors only occur at runtime. It&#x27;s very common, especially in legacy codebases, for issues to just fly under the radar, even if they are obvious to the seasoned dev. There is a reason why one of the most popular JS books is called &#x27;Javascript: the good parts&#x27;.<p>With rust, it&#x27;s very refreshing in that it&#x27;s idiot proof, which JavaScript is not. 
CSS is not relevant, since it is not actual programming.</div><br/><div id="39763905" class="c"><input type="checkbox" id="c-39763905" checked=""/><div class="controls bullet"><span class="by">oefrha</span><span>|</span><a href="#39763412">root</a><span>|</span><a href="#39763851">parent</a><span>|</span><a href="#39764011">next</a><span>|</span><label class="collapse" for="c-39763905">[-]</label><label class="expand" for="c-39763905">[1 more]</label></div><br/><div class="children"><div class="content">We (at least the author and I) are talking about front end development here where most reloads are tweaking markup and stylesheets and shouldn’t introduce any error. And half a minute or longer reloads are unacceptable for those.<p>I don’t need a lecture on the history of JavaScript, thank you. Especially since JavaScript&#x2F;TypeScript has come such a long way that JavaScript the Good Parts is barely relevant anymore.<p>&gt; Rust… idiot proof<p>That’s such a… interesting statement that I’m not going to respond further.</div><br/></div></div><div id="39764011" class="c"><input type="checkbox" id="c-39764011" checked=""/><div class="controls bullet"><span class="by">spookie</span><span>|</span><a href="#39763412">root</a><span>|</span><a href="#39763851">parent</a><span>|</span><a href="#39763905">prev</a><span>|</span><a href="#39763967">next</a><span>|</span><label class="collapse" for="c-39764011">[-]</label><label class="expand" for="c-39764011">[1 more]</label></div><br/><div class="children"><div class="content">CSS is actual programming. Nevertheless, he was just stating a common case where one iteratively checks if their assumptions, even if carefully accounted for, conform to their expectations.<p>Another, very real &quot;programming&quot; situation could be the following: correctly parsing 3D mesh information in a multithreaded fashion and pass that to your preferred API of choice. Is one going to get all edge cases right the first time? Is your program&#x27;s codebase large enough? Eventually it becomes kinda yucky having to wait.<p>The compiler may know what is programmatically correct, not what your intention is. I think that&#x27;s what the other person was trying to argue.<p>I&#x27;m not too concerned about compile times myself, I&#x27;m used to them given I mostly dabble with compiled languages (I do a lot of CSS though!), but there&#x27;s a argument to be made about iteration time and being fast in solving a problem.</div><br/></div></div></div></div></div></div><div id="39763967" class="c"><input type="checkbox" id="c-39763967" checked=""/><div class="controls bullet"><span class="by">nindalf</span><span>|</span><a href="#39763412">parent</a><span>|</span><a href="#39763799">prev</a><span>|</span><a href="#39763608">next</a><span>|</span><label class="collapse" for="c-39763967">[-]</label><label class="expand" for="c-39763967">[1 more]</label></div><br/><div class="children"><div class="content">I benchmarked Rusts performance on 2, 4, 8 and 16 cores on several widely used crates (<a href="https:&#x2F;&#x2F;arewefastyet.pages.dev&#x2F;" rel="nofollow">https:&#x2F;&#x2F;arewefastyet.pages.dev&#x2F;</a>). Performance generally improved with the number of cores, but memory made no difference. All of these crates topped out at around 1GB and additional memory didn’t improve performance.<p>So no, 72GB or 128GB makes no difference.</div><br/></div></div><div id="39763608" class="c"><input type="checkbox" id="c-39763608" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#39763412">parent</a><span>|</span><a href="#39763967">prev</a><span>|</span><a href="#39763969">next</a><span>|</span><label class="collapse" for="c-39763608">[-]</label><label class="expand" for="c-39763608">[7 more]</label></div><br/><div class="children"><div class="content">I have a couple of projects where it is measured in minutes, on a dual core with 8GB and a SSD.<p>If only devs with beefy machines are able to use Rust properly, that hinders adoption.</div><br/><div id="39763644" class="c"><input type="checkbox" id="c-39763644" checked=""/><div class="controls bullet"><span class="by">guappa</span><span>|</span><a href="#39763412">root</a><span>|</span><a href="#39763608">parent</a><span>|</span><a href="#39763861">next</a><span>|</span><label class="collapse" for="c-39763644">[-]</label><label class="expand" for="c-39763644">[5 more]</label></div><br/><div class="children"><div class="content">Developers in USA: &quot;nobody in the entire world has less than 32GB of RAM!&quot;</div><br/><div id="39763709" class="c"><input type="checkbox" id="c-39763709" checked=""/><div class="controls bullet"><span class="by">rtpg</span><span>|</span><a href="#39763412">root</a><span>|</span><a href="#39763644">parent</a><span>|</span><a href="#39763861">next</a><span>|</span><label class="collapse" for="c-39763709">[-]</label><label class="expand" for="c-39763709">[4 more]</label></div><br/><div class="children"><div class="content">Laptop + 32 gigs of RAM is a recipe for destruction of your wallet. At least for desktops you can kind of scope things out, but companies aren&#x27;t really in the practice of distributing desktops anymore it seems.</div><br/><div id="39763903" class="c"><input type="checkbox" id="c-39763903" checked=""/><div class="controls bullet"><span class="by">virtualritz</span><span>|</span><a href="#39763412">root</a><span>|</span><a href="#39763709">parent</a><span>|</span><a href="#39763943">next</a><span>|</span><label class="collapse" for="c-39763903">[-]</label><label class="expand" for="c-39763903">[1 more]</label></div><br/><div class="children"><div class="content">I have the 2022 model of this machine [1] which is a macBook Pro clone from Xiaomi.<p>It&#x27;s an absolute beast, build quality is almost on par with Apple (screen is better than what Apple offered in 2022, actually) and the 32GB RAM base model from this year can be had for less than 1,000€.<p>I dunno where the &quot;destruction of your wallet&quot; threshold lies for you but for me it&#x27;s way higher.<p>The 2022 version also used Ryzen APUs and there is excellent Linux support.
It&#x27;s my daily driver for Rust development (I run Pop!_OS on it).<p>[1] <a href="https:&#x2F;&#x2F;a.aliexpress.com&#x2F;_EygTDml" rel="nofollow">https:&#x2F;&#x2F;a.aliexpress.com&#x2F;_EygTDml</a></div><br/></div></div><div id="39763943" class="c"><input type="checkbox" id="c-39763943" checked=""/><div class="controls bullet"><span class="by">speedgoose</span><span>|</span><a href="#39763412">root</a><span>|</span><a href="#39763709">parent</a><span>|</span><a href="#39763903">prev</a><span>|</span><a href="#39763867">next</a><span>|</span><label class="collapse" for="c-39763943">[-]</label><label class="expand" for="c-39763943">[1 more]</label></div><br/><div class="children"><div class="content">I recently upgraded my gaming laptop to 32GB DDR4 for very cheap. It doesn’t destroy the wallet if the ram isn’t soldered and you can easily replace it. I paid about 75€ with taxes for two sticks of 16GB. I wouldn’t recommend gaming laptops as laptops though. They are terrible laptops.</div><br/></div></div><div id="39763867" class="c"><input type="checkbox" id="c-39763867" checked=""/><div class="controls bullet"><span class="by">jakderrida</span><span>|</span><a href="#39763412">root</a><span>|</span><a href="#39763709">parent</a><span>|</span><a href="#39763943">prev</a><span>|</span><a href="#39763861">next</a><span>|</span><label class="collapse" for="c-39763867">[-]</label><label class="expand" for="c-39763867">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Laptop + 32 gigs of RAM is a recipe for destruction of your wallet.<p>While I&#x27;m not a developer of any sort, you couldn&#x27;t be more on the nose here. I waited and waited for a Surface Laptop that has 32gb on ebay. When it came, price skyrocket to almost double the 16gb model. Twice more it happened and I literally gave up and bought the 16gb. I don&#x27;t know what the retail premium from Microsoft is, but the reseller premium is truly insanity. Surely, Microsoft spent the time engineering it to fit 32gb and could reap more producing more of them.</div><br/></div></div></div></div></div></div><div id="39763861" class="c"><input type="checkbox" id="c-39763861" checked=""/><div class="controls bullet"><span class="by">enqk</span><span>|</span><a href="#39763412">root</a><span>|</span><a href="#39763608">parent</a><span>|</span><a href="#39763644">prev</a><span>|</span><a href="#39763969">next</a><span>|</span><label class="collapse" for="c-39763861">[-]</label><label class="expand" for="c-39763861">[1 more]</label></div><br/><div class="children"><div class="content">This has definitely be one big reason for me why I did not get into rust. I don’t want to have to buy a new machine just to get the compile times I’m used to</div><br/></div></div></div></div><div id="39763969" class="c"><input type="checkbox" id="c-39763969" checked=""/><div class="controls bullet"><span class="by">b33j0r</span><span>|</span><a href="#39763412">parent</a><span>|</span><a href="#39763608">prev</a><span>|</span><a href="#39763519">next</a><span>|</span><label class="collapse" for="c-39763969">[-]</label><label class="expand" for="c-39763969">[1 more]</label></div><br/><div class="children"><div class="content">Working on a couple of ideas that flip that logic on its head, but you’re more likely to be right because of finite time.<p>The thing about rust is that the overhead is all upfront.<p>Not to be sacrilegious, but bleeding at the move or &amp;wtf borrow boundary is a price one pays to have confidence, subsequently.<p>Your cms&#x2F;customer acronym probably doesn’t need it, but you’ll love the —fast option in some stacks that merely means “compile the rust extension.”<p>Plus… it’s a gainful hobby. I’m fine if other people have hobbies that don’t resemble x86 in 1998 on slackware ;)</div><br/></div></div><div id="39763519" class="c"><input type="checkbox" id="c-39763519" checked=""/><div class="controls bullet"><span class="by">boxed</span><span>|</span><a href="#39763412">parent</a><span>|</span><a href="#39763969">prev</a><span>|</span><a href="#39763775">next</a><span>|</span><label class="collapse" for="c-39763519">[-]</label><label class="expand" for="c-39763519">[1 more]</label></div><br/><div class="children"><div class="content">I use Elm at work, and the confidence from really strict compilation and typing is very worth it.<p>With that said, Elm is super fast to compile too, which is very nice.</div><br/></div></div><div id="39763775" class="c"><input type="checkbox" id="c-39763775" checked=""/><div class="controls bullet"><span class="by">Starlevel004</span><span>|</span><a href="#39763412">parent</a><span>|</span><a href="#39763519">prev</a><span>|</span><a href="#39763073">next</a><span>|</span><label class="collapse" for="c-39763775">[-]</label><label class="expand" for="c-39763775">[2 more]</label></div><br/><div class="children"><div class="content">&gt; The primary benefit of the rust compiler, at least from my point of view, is telling me what&#x27;s wrong, where.<p>Incredible! Rust developers have invented &quot;IDEs&quot;!</div><br/><div id="39763815" class="c"><input type="checkbox" id="c-39763815" checked=""/><div class="controls bullet"><span class="by">dan_can_code</span><span>|</span><a href="#39763412">root</a><span>|</span><a href="#39763775">parent</a><span>|</span><a href="#39763073">next</a><span>|</span><label class="collapse" for="c-39763815">[-]</label><label class="expand" for="c-39763815">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not sure if you&#x27;re familiar with front-end developer tooling or the development process, but my editor will not tell me what error a browser is going to throw.</div><br/></div></div></div></div></div></div><div id="39763073" class="c"><input type="checkbox" id="c-39763073" checked=""/><div class="controls bullet"><span class="by">nextaccountic</span><span>|</span><a href="#39763412">prev</a><span>|</span><a href="#39763339">next</a><span>|</span><label class="collapse" for="c-39763073">[-]</label><label class="expand" for="c-39763073">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Note: Discord User @PaulH(and a couple others) let me know about this bug that prevents the server build from using the dependencies built for the previous compilation of the server&#x2F;webassembly frontend build due to changes in the RUSTFLAGS. You can fix this by having cargo-leptos &gt; 0.2.1 and adding this to you Cargo.toml under your Leptos settings block. I did not test with this enabled.<p>&gt;    [package.metadata.leptos]<p>&gt;    separate-front-target-dir = true<p>This option is deprecated since cargo-leptos 0.2.3 (now it&#x27;s enabled unconditionally), it&#x27;s going to be removed in 0.3<p><a href="https:&#x2F;&#x2F;github.com&#x2F;leptos-rs&#x2F;cargo-leptos&#x2F;pull&#x2F;216">https:&#x2F;&#x2F;github.com&#x2F;leptos-rs&#x2F;cargo-leptos&#x2F;pull&#x2F;216</a><p><a href="https:&#x2F;&#x2F;github.com&#x2F;leptos-rs&#x2F;cargo-leptos&#x2F;issues&#x2F;217">https:&#x2F;&#x2F;github.com&#x2F;leptos-rs&#x2F;cargo-leptos&#x2F;issues&#x2F;217</a><p><a href="https:&#x2F;&#x2F;github.com&#x2F;leptos-rs&#x2F;cargo-leptos&#x2F;commit&#x2F;b0c19a87cff2e0fb9bac0d9c6d274c38069ed2b5">https:&#x2F;&#x2F;github.com&#x2F;leptos-rs&#x2F;cargo-leptos&#x2F;commit&#x2F;b0c19a87cff...</a></div><br/></div></div><div id="39763339" class="c"><input type="checkbox" id="c-39763339" checked=""/><div class="controls bullet"><span class="by">rui314</span><span>|</span><a href="#39763073">prev</a><span>|</span><a href="#39763904">next</a><span>|</span><label class="collapse" for="c-39763339">[-]</label><label class="expand" for="c-39763339">[10 more]</label></div><br/><div class="children"><div class="content">The sold linker is no longer commercial software; it&#x27;s been relicensed under the MIT license.</div><br/><div id="39763532" class="c"><input type="checkbox" id="c-39763532" checked=""/><div class="controls bullet"><span class="by">stefanos82</span><span>|</span><a href="#39763339">parent</a><span>|</span><a href="#39763405">next</a><span>|</span><label class="collapse" for="c-39763532">[-]</label><label class="expand" for="c-39763532">[2 more]</label></div><br/><div class="children"><div class="content">Rui, if I ever get rich, I will seriously give you 1 million US dollars, $100K the minimum, for everything you have done so far, with all your projects.<p>That&#x27;s the least I can do to show my appreciation for your incredible work; I can&#x27;t thank you enough brother!<p>I also wish to see that chibicc compiler plus the book completed. I want to learn everything around such topics.</div><br/><div id="39763995" class="c"><input type="checkbox" id="c-39763995" checked=""/><div class="controls bullet"><span class="by">rui314</span><span>|</span><a href="#39763339">root</a><span>|</span><a href="#39763532">parent</a><span>|</span><a href="#39763405">next</a><span>|</span><label class="collapse" for="c-39763995">[-]</label><label class="expand" for="c-39763995">[1 more]</label></div><br/><div class="children"><div class="content">Thanks, I really wish you become a billionaire :)</div><br/></div></div></div></div><div id="39763405" class="c"><input type="checkbox" id="c-39763405" checked=""/><div class="controls bullet"><span class="by">mhaehnel</span><span>|</span><a href="#39763339">parent</a><span>|</span><a href="#39763532">prev</a><span>|</span><a href="#39763904">next</a><span>|</span><label class="collapse" for="c-39763405">[-]</label><label class="expand" for="c-39763405">[7 more]</label></div><br/><div class="children"><div class="content">But it is no longer updated, is it?<p>Thanks anyway for the work on sold.</div><br/><div id="39763493" class="c"><input type="checkbox" id="c-39763493" checked=""/><div class="controls bullet"><span class="by">rui314</span><span>|</span><a href="#39763339">root</a><span>|</span><a href="#39763405">parent</a><span>|</span><a href="#39763409">next</a><span>|</span><label class="collapse" for="c-39763493">[-]</label><label class="expand" for="c-39763493">[4 more]</label></div><br/><div class="children"><div class="content">&gt; But it is no longer updated, is it?<p>Essentially, yes, but that’s because Apple’s new linker is so much faster than it was. You can use it instead.</div><br/><div id="39763748" class="c"><input type="checkbox" id="c-39763748" checked=""/><div class="controls bullet"><span class="by">nicce</span><span>|</span><a href="#39763339">root</a><span>|</span><a href="#39763493">parent</a><span>|</span><a href="#39763409">next</a><span>|</span><label class="collapse" for="c-39763748">[-]</label><label class="expand" for="c-39763748">[3 more]</label></div><br/><div class="children"><div class="content">Out of curiosity, do you know what technical choices Apple made to be so much faster?</div><br/><div id="39763981" class="c"><input type="checkbox" id="c-39763981" checked=""/><div class="controls bullet"><span class="by">rui314</span><span>|</span><a href="#39763339">root</a><span>|</span><a href="#39763748">parent</a><span>|</span><a href="#39763940">next</a><span>|</span><label class="collapse" for="c-39763981">[-]</label><label class="expand" for="c-39763981">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t know the details, but once it is proven that achieving lld&#x2F;mold&#x2F;sold-level performance is technically feasible, it shouldn&#x27;t be extremely hard to achieve similar success for macOS.</div><br/></div></div><div id="39763940" class="c"><input type="checkbox" id="c-39763940" checked=""/><div class="controls bullet"><span class="by">oefrha</span><span>|</span><a href="#39763339">root</a><span>|</span><a href="#39763748">parent</a><span>|</span><a href="#39763981">prev</a><span>|</span><a href="#39763409">next</a><span>|</span><label class="collapse" for="c-39763940">[-]</label><label class="expand" for="c-39763940">[1 more]</label></div><br/><div class="children"><div class="content">It’s parallelized. <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=36218330">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=36218330</a></div><br/></div></div></div></div></div></div><div id="39763409" class="c"><input type="checkbox" id="c-39763409" checked=""/><div class="controls bullet"><span class="by">umanwizard</span><span>|</span><a href="#39763339">root</a><span>|</span><a href="#39763405">parent</a><span>|</span><a href="#39763493">prev</a><span>|</span><a href="#39763904">next</a><span>|</span><label class="collapse" for="c-39763409">[-]</label><label class="expand" for="c-39763409">[2 more]</label></div><br/><div class="children"><div class="content">Sold was just mold under a commercial license. Mold is still maintained and now licensed permissively.</div><br/><div id="39763422" class="c"><input type="checkbox" id="c-39763422" checked=""/><div class="controls bullet"><span class="by">mhaehnel</span><span>|</span><a href="#39763339">root</a><span>|</span><a href="#39763409">parent</a><span>|</span><a href="#39763904">next</a><span>|</span><label class="collapse" for="c-39763422">[-]</label><label class="expand" for="c-39763422">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s true but mold doesn&#x27;t have MacOS support.</div><br/></div></div></div></div></div></div></div></div><div id="39763904" class="c"><input type="checkbox" id="c-39763904" checked=""/><div class="controls bullet"><span class="by">KingOfCoders</span><span>|</span><a href="#39763339">prev</a><span>|</span><a href="#39763041">next</a><span>|</span><label class="collapse" for="c-39763904">[-]</label><label class="expand" for="c-39763904">[1 more]</label></div><br/><div class="children"><div class="content">From my experience, faster SSD have a suprising strong effect for some (simple) languages (probably not Rust), like Go [0]<p>[0] <a href="https:&#x2F;&#x2F;www.octobench.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.octobench.com&#x2F;</a></div><br/></div></div><div id="39763041" class="c"><input type="checkbox" id="c-39763041" checked=""/><div class="controls bullet"><span class="by">denysvitali</span><span>|</span><a href="#39763904">prev</a><span>|</span><a href="#39763542">next</a><span>|</span><label class="collapse" for="c-39763041">[-]</label><label class="expand" for="c-39763041">[17 more]</label></div><br/><div class="children"><div class="content">Their benchmarks are based on a machine with 72GB of RAM and another with 128GB of RAM - not that it does matter, but I&#x27;m really curious if they&#x27;re outliers or if I should bump my computer specs. That&#x27;s a lot of Electron web apps running in parallel!</div><br/><div id="39763280" class="c"><input type="checkbox" id="c-39763280" checked=""/><div class="controls bullet"><span class="by">nindalf</span><span>|</span><a href="#39763041">parent</a><span>|</span><a href="#39763947">next</a><span>|</span><label class="collapse" for="c-39763280">[-]</label><label class="expand" for="c-39763280">[4 more]</label></div><br/><div class="children"><div class="content">I benchmarked Rusts performance on 2, 4, 8 and 16 cores on several widely used crates (<a href="https:&#x2F;&#x2F;arewefastyet.pages.dev&#x2F;" rel="nofollow">https:&#x2F;&#x2F;arewefastyet.pages.dev&#x2F;</a>). Performance generally improved with the number of cores, but memory made no difference. All of these crates topped out at around 1GB and additional memory didn’t improve performance.<p>So no, 72GB or 128GB makes no difference.</div><br/><div id="39763292" class="c"><input type="checkbox" id="c-39763292" checked=""/><div class="controls bullet"><span class="by">denysvitali</span><span>|</span><a href="#39763041">root</a><span>|</span><a href="#39763280">parent</a><span>|</span><a href="#39763424">next</a><span>|</span><label class="collapse" for="c-39763292">[-]</label><label class="expand" for="c-39763292">[1 more]</label></div><br/><div class="children"><div class="content">Yes, maybe I didn&#x27;t make it clear but I&#x27;m pretty sure this is not impacting for Rust. I was just wondering if it&#x27;s normal to have these specs since my computer has probably &quot;just&quot; 32GB of RAM</div><br/></div></div><div id="39763424" class="c"><input type="checkbox" id="c-39763424" checked=""/><div class="controls bullet"><span class="by">drewtato</span><span>|</span><a href="#39763041">root</a><span>|</span><a href="#39763280">parent</a><span>|</span><a href="#39763292">prev</a><span>|</span><a href="#39763947">next</a><span>|</span><label class="collapse" for="c-39763424">[-]</label><label class="expand" for="c-39763424">[2 more]</label></div><br/><div class="children"><div class="content">I agree that memory size isn&#x27;t going to matter much, but memory speed should be noticeable, especially on large projects.</div><br/></div></div></div></div><div id="39763947" class="c"><input type="checkbox" id="c-39763947" checked=""/><div class="controls bullet"><span class="by">lifthrasiir</span><span>|</span><a href="#39763041">parent</a><span>|</span><a href="#39763280">prev</a><span>|</span><a href="#39763227">next</a><span>|</span><label class="collapse" for="c-39763947">[-]</label><label class="expand" for="c-39763947">[1 more]</label></div><br/><div class="children"><div class="content">If you are like me and opening too many browser tabs (and other applications, of course), you need a lot of RAM. My desktop has <i>only</i> 48 GB of RAM right now and a typical VM usage is around 80--100 GB. I will probably go for 128 GB or possibly 192 GB of RAM for the next desktop.<p>Rust builds, in comparison, don&#x27;t actually reach that far, mainly because it is proportional to the maximum number of parallel jobs. In my experience, 48 GB was more than plenty for 8 parallel jobs if I wasn&#x27;t doing anything else.</div><br/></div></div><div id="39763227" class="c"><input type="checkbox" id="c-39763227" checked=""/><div class="controls bullet"><span class="by">lolinder</span><span>|</span><a href="#39763041">parent</a><span>|</span><a href="#39763947">prev</a><span>|</span><a href="#39763140">next</a><span>|</span><label class="collapse" for="c-39763227">[-]</label><label class="expand" for="c-39763227">[3 more]</label></div><br/><div class="children"><div class="content">Definitely outliers. The Steam hardware survey [0] is obviously not a perfect measurement, but in its February results only ~3% had 64GB and only ~0.3% had more than that.<p>I recently upgraded to 64GB to run quantized LLM models, but when I&#x27;m not using an LLM I rarely use more than 16GB, much less 32GB.<p>[0] <a href="https:&#x2F;&#x2F;store.steampowered.com&#x2F;hwsurvey" rel="nofollow">https:&#x2F;&#x2F;store.steampowered.com&#x2F;hwsurvey</a></div><br/><div id="39763673" class="c"><input type="checkbox" id="c-39763673" checked=""/><div class="controls bullet"><span class="by">IshKebab</span><span>|</span><a href="#39763041">root</a><span>|</span><a href="#39763227">parent</a><span>|</span><a href="#39763140">next</a><span>|</span><label class="collapse" for="c-39763673">[-]</label><label class="expand" for="c-39763673">[2 more]</label></div><br/><div class="children"><div class="content">I have 32GB on my Linux laptop (plus 12GB swap) and regularly run out of RAM with just a handful of VSCode&#x27;s open (it&#x27;s generally the language servers using all the RAM) and a couple of dozen Firefox tabs (Firefox seems to be much worse than Chrome RAM-wise). If I run my actual work project, which needs a few gigs then it often just completely runs out of memory and hard reboots.<p>Never have the same problem on Windows even though I only have 16GB there. Feels like Linux is just really bad at memory management. That may be skewing the Steam survey since almost everyone there will be using Windows.<p>On Linux I wish I had 64GB.</div><br/><div id="39764085" class="c"><input type="checkbox" id="c-39764085" checked=""/><div class="controls bullet"><span class="by">spookie</span><span>|</span><a href="#39763041">root</a><span>|</span><a href="#39763673">parent</a><span>|</span><a href="#39763140">next</a><span>|</span><label class="collapse" for="c-39764085">[-]</label><label class="expand" for="c-39764085">[1 more]</label></div><br/><div class="children"><div class="content">Have you tried zram for instance? There are a lot of things one can do to better utilise RAM on Linux.<p>I believe Fedora comes ootb with a lot of things to make ram management quite good. Using another distro these days, but Fedora impressed me on that front.</div><br/></div></div></div></div></div></div><div id="39763140" class="c"><input type="checkbox" id="c-39763140" checked=""/><div class="controls bullet"><span class="by">mixedCase</span><span>|</span><a href="#39763041">parent</a><span>|</span><a href="#39763227">prev</a><span>|</span><a href="#39763218">next</a><span>|</span><label class="collapse" for="c-39763140">[-]</label><label class="expand" for="c-39763140">[7 more]</label></div><br/><div class="children"><div class="content">Some people need it, some don&#x27;t. When I upgraded to a 7950X I was unable to find an excuse to buy more than 32GB. &quot;That one time a script compiled clang by default with LTO and OOMed&quot; was not a good enough reason.<p>If you use a lot of VMs, it comes in handy. If you do a lot of heavyweight compilation in parallel, same thing. But at least on Linux, popping 3 VS Code projects and 4 more browsers doesn&#x27;t even hit 50% utilization.</div><br/><div id="39764135" class="c"><input type="checkbox" id="c-39764135" checked=""/><div class="controls bullet"><span class="by">yaantc</span><span>|</span><a href="#39763041">root</a><span>|</span><a href="#39763140">parent</a><span>|</span><a href="#39763411">next</a><span>|</span><label class="collapse" for="c-39764135">[-]</label><label class="expand" for="c-39764135">[1 more]</label></div><br/><div class="children"><div class="content">You can try running tests in parallel with the memory sanitizer (MSAN) enabled. MSAN uses a lot of memory, and on a 64 GB machine I have to reduce the amount of parallelism not to trigger Linux OoM killer.<p><pre><code>    MSAN: https:&#x2F;&#x2F;github.com&#x2F;google&#x2F;sanitizers&#x2F;wiki&#x2F;MemorySanitizer</code></pre></div><br/></div></div><div id="39763411" class="c"><input type="checkbox" id="c-39763411" checked=""/><div class="controls bullet"><span class="by">db48x</span><span>|</span><a href="#39763041">root</a><span>|</span><a href="#39763140">parent</a><span>|</span><a href="#39764135">prev</a><span>|</span><a href="#39763231">next</a><span>|</span><label class="collapse" for="c-39763411">[-]</label><label class="expand" for="c-39763411">[1 more]</label></div><br/><div class="children"><div class="content">Yea, very workload dependent. Reposurgeon needed hundreds of gigabytes of ram to convert the GCC repository from SVN to Git, which was a lot of fun, but most of the time I would be fine with 32GB.</div><br/></div></div><div id="39763231" class="c"><input type="checkbox" id="c-39763231" checked=""/><div class="controls bullet"><span class="by">rakejake</span><span>|</span><a href="#39763041">root</a><span>|</span><a href="#39763140">parent</a><span>|</span><a href="#39763411">prev</a><span>|</span><a href="#39763218">next</a><span>|</span><label class="collapse" for="c-39763231">[-]</label><label class="expand" for="c-39763231">[4 more]</label></div><br/><div class="children"><div class="content">Funnily enough, RAM I find I can use no matter how much I have, especially now that you have LLMs. I can run a quantised Mixtral 8x7B on 64GB RAM.<p>But the 7950X is grossly underutilised, I don&#x27;t know what to do with it.</div><br/><div id="39763295" class="c"><input type="checkbox" id="c-39763295" checked=""/><div class="controls bullet"><span class="by">lolinder</span><span>|</span><a href="#39763041">root</a><span>|</span><a href="#39763231">parent</a><span>|</span><a href="#39763482">next</a><span>|</span><label class="collapse" for="c-39763295">[-]</label><label class="expand" for="c-39763295">[2 more]</label></div><br/><div class="children"><div class="content">Shouldn&#x27;t the quantized LLMs be using the CPU to good effect? I&#x27;d imagine your Mixtral is substantially faster than it would be on a weaker CPU.</div><br/><div id="39763614" class="c"><input type="checkbox" id="c-39763614" checked=""/><div class="controls bullet"><span class="by">rakejake</span><span>|</span><a href="#39763041">root</a><span>|</span><a href="#39763295">parent</a><span>|</span><a href="#39763482">next</a><span>|</span><label class="collapse" for="c-39763614">[-]</label><label class="expand" for="c-39763614">[1 more]</label></div><br/><div class="children"><div class="content">I have a 4080 with 16GB of VRAM. I experimented with llama.cpp by offloading layers onto GPU and doing the remaining on CPU. I found that it gives me max tokens&#x2F;sec if I set it to 8 CPU cores as opposed to the 16 available on the 7950X. I guess beyond that, the bookkeeping between the cores might be taking up more time than it is worth.</div><br/></div></div></div></div><div id="39763482" class="c"><input type="checkbox" id="c-39763482" checked=""/><div class="controls bullet"><span class="by">mischief6</span><span>|</span><a href="#39763041">root</a><span>|</span><a href="#39763231">parent</a><span>|</span><a href="#39763295">prev</a><span>|</span><a href="#39763218">next</a><span>|</span><label class="collapse" for="c-39763482">[-]</label><label class="expand" for="c-39763482">[1 more]</label></div><br/><div class="children"><div class="content">the answer i found is run gentoo and compile yocto projects.</div><br/></div></div></div></div></div></div><div id="39763218" class="c"><input type="checkbox" id="c-39763218" checked=""/><div class="controls bullet"><span class="by">pcthrowaway</span><span>|</span><a href="#39763041">parent</a><span>|</span><a href="#39763140">prev</a><span>|</span><a href="#39763542">next</a><span>|</span><label class="collapse" for="c-39763218">[-]</label><label class="expand" for="c-39763218">[1 more]</label></div><br/><div class="children"><div class="content">My understanding is that processor performance is more important for rust compilation than available memory, but ultimately the atrocious compilation times are why I struggled so much with Rust.</div><br/></div></div></div></div><div id="39763542" class="c"><input type="checkbox" id="c-39763542" checked=""/><div class="controls bullet"><span class="by">daghamm</span><span>|</span><a href="#39763041">prev</a><span>|</span><a href="#39763468">next</a><span>|</span><label class="collapse" for="c-39763542">[-]</label><label class="expand" for="c-39763542">[2 more]</label></div><br/><div class="children"><div class="content">First time I hear about mold.<p>The performance looks good, but are there any plans for any other improvements such as LTO?</div><br/><div id="39764055" class="c"><input type="checkbox" id="c-39764055" checked=""/><div class="controls bullet"><span class="by">rui314</span><span>|</span><a href="#39763542">parent</a><span>|</span><a href="#39763468">next</a><span>|</span><label class="collapse" for="c-39764055">[-]</label><label class="expand" for="c-39764055">[1 more]</label></div><br/><div class="children"><div class="content">mold supports LTO out of the box.</div><br/></div></div></div></div><div id="39763468" class="c"><input type="checkbox" id="c-39763468" checked=""/><div class="controls bullet"><span class="by">winrid</span><span>|</span><a href="#39763542">prev</a><span>|</span><a href="#39762985">next</a><span>|</span><label class="collapse" for="c-39763468">[-]</label><label class="expand" for="c-39763468">[3 more]</label></div><br/><div class="children"><div class="content">The coolest thing about this to me IMO is the comparison between the two CPUs.<p>Is there a project that publishes benchmarks compiling projects across different CPUs? I know passmark is kinda the go-to but this would be cool.<p>Someday I&#x27;ll feel the need to upgrade from a 2700x...</div><br/><div id="39763658" class="c"><input type="checkbox" id="c-39763658" checked=""/><div class="controls bullet"><span class="by">canu7</span><span>|</span><a href="#39763468">parent</a><span>|</span><a href="#39763671">next</a><span>|</span><label class="collapse" for="c-39763658">[-]</label><label class="expand" for="c-39763658">[1 more]</label></div><br/><div class="children"><div class="content">Phoronix does a lot of CPU benchmarks, including code compilation, but mostly focused on Linux. More result are also available in the OpenBenchmark page, which is also part of the same project. Take a look at the timed compilation test-suit: <a href="https:&#x2F;&#x2F;openbenchmarking.org&#x2F;suite&#x2F;pts&#x2F;compilation" rel="nofollow">https:&#x2F;&#x2F;openbenchmarking.org&#x2F;suite&#x2F;pts&#x2F;compilation</a></div><br/></div></div><div id="39763671" class="c"><input type="checkbox" id="c-39763671" checked=""/><div class="controls bullet"><span class="by">oynqr</span><span>|</span><a href="#39763468">parent</a><span>|</span><a href="#39763658">prev</a><span>|</span><a href="#39762985">next</a><span>|</span><label class="collapse" for="c-39763671">[-]</label><label class="expand" for="c-39763671">[1 more]</label></div><br/><div class="children"><div class="content">Have you looked at <a href="https:&#x2F;&#x2F;openbenchmarking.org" rel="nofollow">https:&#x2F;&#x2F;openbenchmarking.org</a>?</div><br/></div></div></div></div><div id="39762985" class="c"><input type="checkbox" id="c-39762985" checked=""/><div class="controls bullet"><span class="by">eikenberry</span><span>|</span><a href="#39763468">prev</a><span>|</span><a href="#39763507">next</a><span>|</span><label class="collapse" for="c-39762985">[-]</label><label class="expand" for="c-39762985">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20240320042828&#x2F;https:&#x2F;&#x2F;benw.is&#x2F;posts&#x2F;how-i-improved-my-rust-compile-times-by-seventy-five-percent" rel="nofollow">https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20240320042828&#x2F;https:&#x2F;&#x2F;benw.is&#x2F;p...</a></div><br/></div></div><div id="39763507" class="c"><input type="checkbox" id="c-39763507" checked=""/><div class="controls bullet"><span class="by">beeb</span><span>|</span><a href="#39762985">prev</a><span>|</span><a href="#39763035">next</a><span>|</span><label class="collapse" for="c-39763507">[-]</label><label class="expand" for="c-39763507">[1 more]</label></div><br/><div class="children"><div class="content">Super interesting! I would have loved to see included in the potential solutions the use of sccache too</div><br/></div></div><div id="39763035" class="c"><input type="checkbox" id="c-39763035" checked=""/><div class="controls bullet"><span class="by">tempaccount420</span><span>|</span><a href="#39763507">prev</a><span>|</span><a href="#39763528">next</a><span>|</span><label class="collapse" for="c-39763035">[-]</label><label class="expand" for="c-39763035">[2 more]</label></div><br/><div class="children"><div class="content">Very cool, still kind of disappointing the author was only able to get incremental compilation down to 4.5s, no matter the baseline. Hopefully Cranelift lands in stable at some point.</div><br/><div id="39763448" class="c"><input type="checkbox" id="c-39763448" checked=""/><div class="controls bullet"><span class="by">dclowd9901</span><span>|</span><a href="#39763035">parent</a><span>|</span><a href="#39763528">next</a><span>|</span><label class="collapse" for="c-39763448">[-]</label><label class="expand" for="c-39763448">[1 more]</label></div><br/><div class="children"><div class="content">That’s pretty good. Our frontend app built with TS with SWC recompiles in about that time.</div><br/></div></div></div></div><div id="39763528" class="c"><input type="checkbox" id="c-39763528" checked=""/><div class="controls bullet"><span class="by">SushiHippie</span><span>|</span><a href="#39763035">prev</a><span>|</span><a href="#39763441">next</a><span>|</span><label class="collapse" for="c-39763528">[-]</label><label class="expand" for="c-39763528">[1 more]</label></div><br/><div class="children"><div class="content">Looking at some benchmarks online and the 7900x always beat the 5950x even though the 5950x has more cores.<p>But in this article the 7900x performed worse than the 5950x, is it because of the core count, or are there some other factors?</div><br/></div></div></div></div></div></div></div></body></html>