<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1736931675383" as="style"/><link rel="stylesheet" href="styles.css?v=1736931675383"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://boehs.org/node/homomorphic-encryption">Homomorphic Encryption in iOS 18</a> <span class="domain">(<a href="https://boehs.org">boehs.org</a>)</span></div><div class="subtext"><span>surprisetalk</span> | <span>32 comments</span></div><br/><div><div id="42708770" class="c"><input type="checkbox" id="c-42708770" checked=""/><div class="controls bullet"><span class="by">chikere232</span><span>|</span><a href="#42707298">next</a><span>|</span><label class="collapse" for="c-42708770">[-]</label><label class="expand" for="c-42708770">[3 more]</label></div><br/><div class="children"><div class="content">&gt; You are Apple. You want to make search work like magic in the Photos app, so the user can find all their “dog” pictures with ease.<p>What if you&#x27;re a user and you don&#x27;t care about searching for &quot;dog&quot; in your own photos, you might not even use the Photos app, but apple still scans all your photos and sends data off device without asking you?<p>Perhaps this complicated dance works, perhaps they have made no mistakes, perhaps no one hacks or coerces the relay host providers... they could still have just asked for consent the first time you open Photos (if you ever do) before starting the scan.</div><br/><div id="42708860" class="c"><input type="checkbox" id="c-42708860" checked=""/><div class="controls bullet"><span class="by">oulipo</span><span>|</span><a href="#42708770">parent</a><span>|</span><a href="#42708816">next</a><span>|</span><label class="collapse" for="c-42708860">[-]</label><label class="expand" for="c-42708860">[1 more]</label></div><br/><div class="children"><div class="content">Well, not vouching for automated scanning or whatever, but the advantage of homomorphic encryption is that besides the power usage for the computation and the bandwidth to transmit the data, Apple doesn&#x27;t learn anything about what&#x27;s in your photos, only you can. So even if you don&#x27;t use the feature, the impact is minimal for you</div><br/></div></div><div id="42708816" class="c"><input type="checkbox" id="c-42708816" checked=""/><div class="controls bullet"><span class="by">voidUpdate</span><span>|</span><a href="#42708770">parent</a><span>|</span><a href="#42708860">prev</a><span>|</span><a href="#42707298">next</a><span>|</span><label class="collapse" for="c-42708816">[-]</label><label class="expand" for="c-42708816">[1 more]</label></div><br/><div class="children"><div class="content">Android does this too. I don&#x27;t really want all my photos indexed like that, I just want a linear timeline of photos, but I cant turn off their &quot;memories&quot; thing or all the analysis they do to them</div><br/></div></div></div></div><div id="42707298" class="c"><input type="checkbox" id="c-42707298" checked=""/><div class="controls bullet"><span class="by">j16sdiz</span><span>|</span><a href="#42708770">prev</a><span>|</span><a href="#42707173">next</a><span>|</span><label class="collapse" for="c-42707298">[-]</label><label class="expand" for="c-42707298">[2 more]</label></div><br/><div class="children"><div class="content">&gt;     The two hops, the two companies, are already acting in partnership, so what is there technically in the relay setup to stop the two companies from getting together—either voluntarily or at the secret command of some government—to compare notes, as it were, and connect the dots?<p>The OHTTP scheme does not _technically_ prevent this.
It increases the number parties need to cooperate to extract this information, hoping it would be caught somewhere in the pipeline.</div><br/><div id="42708721" class="c"><input type="checkbox" id="c-42708721" checked=""/><div class="controls bullet"><span class="by">chikere232</span><span>|</span><a href="#42707298">parent</a><span>|</span><a href="#42707173">next</a><span>|</span><label class="collapse" for="c-42708721">[-]</label><label class="expand" for="c-42708721">[1 more]</label></div><br/><div class="children"><div class="content">and if a government say already forced ISPs to collect metadata about who connects to whom and when, I imagine they don&#x27;t even need to bother getting data from the relay hosts</div><br/></div></div></div></div><div id="42707173" class="c"><input type="checkbox" id="c-42707173" checked=""/><div class="controls bullet"><span class="by">ted537</span><span>|</span><a href="#42707298">prev</a><span>|</span><a href="#42708766">next</a><span>|</span><label class="collapse" for="c-42707173">[-]</label><label class="expand" for="c-42707173">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s cool how neural networks, even convulutional ones, are one of the few applications that you can compute through homomorphic encryption without hitting a mountain of noise&#x2F;bootstrapping costs. Minimal depth hurrhah!</div><br/></div></div><div id="42708766" class="c"><input type="checkbox" id="c-42708766" checked=""/><div class="controls bullet"><span class="by">antman</span><span>|</span><a href="#42707173">prev</a><span>|</span><a href="#42707253">next</a><span>|</span><label class="collapse" for="c-42708766">[-]</label><label class="expand" for="c-42708766">[1 more]</label></div><br/><div class="children"><div class="content">Is there any library for e.g. fhm hash table lookup or similar? I have seen papers  but have not seen a consensus of what a useful implementatio is</div><br/></div></div><div id="42707253" class="c"><input type="checkbox" id="c-42707253" checked=""/><div class="controls bullet"><span class="by">timsneath</span><span>|</span><a href="#42708766">prev</a><span>|</span><a href="#42707107">next</a><span>|</span><label class="collapse" for="c-42707253">[-]</label><label class="expand" for="c-42707253">[2 more]</label></div><br/><div class="children"><div class="content">More here: <a href="https:&#x2F;&#x2F;www.swift.org&#x2F;blog&#x2F;announcing-swift-homomorphic-encryption&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.swift.org&#x2F;blog&#x2F;announcing-swift-homomorphic-encr...</a></div><br/><div id="42707840" class="c"><input type="checkbox" id="c-42707840" checked=""/><div class="controls bullet"><span class="by">GeekyBear</span><span>|</span><a href="#42707253">parent</a><span>|</span><a href="#42707107">next</a><span>|</span><label class="collapse" for="c-42707840">[-]</label><label class="expand" for="c-42707840">[1 more]</label></div><br/><div class="children"><div class="content">&gt; One example of how we’re using this implementation in iOS 18, is the new Live Caller ID Lookup feature, which provides caller ID and spam blocking services. Live Caller ID Lookup uses homomorphic encryption to send an encrypted query to a server that can provide information about a phone number without the server knowing the specific phone number in the request.<p>Privacy by design is always nice to see.</div><br/></div></div></div></div><div id="42707107" class="c"><input type="checkbox" id="c-42707107" checked=""/><div class="controls bullet"><span class="by">sillysaurusx</span><span>|</span><a href="#42707253">prev</a><span>|</span><a href="#42708148">next</a><span>|</span><label class="collapse" for="c-42707107">[-]</label><label class="expand" for="c-42707107">[10 more]</label></div><br/><div class="children"><div class="content">I was going to make my usual comment of FHE being nice in theory but too slow in practice, and then the article points out that there’s now SHE (somewhat homomorphic encryption). I wasn’t aware that the security guarantees of FHE could be relaxed without sacrificing them. That’s pretty cool.<p>Is there any concrete info about noise budgets? It seems like that’s the critical concern, and I’d like to understand at what point precisely the security breaks down if you have too little (or too much?) noise.</div><br/><div id="42707457" class="c"><input type="checkbox" id="c-42707457" checked=""/><div class="controls bullet"><span class="by">3s</span><span>|</span><a href="#42707107">parent</a><span>|</span><a href="#42707228">next</a><span>|</span><label class="collapse" for="c-42707457">[-]</label><label class="expand" for="c-42707457">[1 more]</label></div><br/><div class="children"><div class="content">SHE vs FHE has nothing to do with security. Instead, it’s about how many operations (eg homomorphic multiplications and additions) can be performed before the correctness of the scheme fails due to too much noise accumulating in the ciphertext. Indeed all FHE schemes are also SHE schemes.<p>What typically makes FHE expensive computationally is a “bootstrapping” step for removing the noise that accumulated after X operations and threatening correctness. After bootstrapping you can do another X operations. Rinse and repeat until you finish the computation to you want to perform.</div><br/></div></div><div id="42707228" class="c"><input type="checkbox" id="c-42707228" checked=""/><div class="controls bullet"><span class="by">ruined</span><span>|</span><a href="#42707107">parent</a><span>|</span><a href="#42707457">prev</a><span>|</span><a href="#42707151">next</a><span>|</span><label class="collapse" for="c-42707228">[-]</label><label class="expand" for="c-42707228">[3 more]</label></div><br/><div class="children"><div class="content">it&#x27;s incredibly algorithm-dependent. if you look into the thesis that originates the &#x27;bootstrapping&#x27; technique to transform SHE algorithms into FHE, they determine the noise limit of their specific algorithm in section 7.3 and then investigate expanding the noise limit in 8 and 10.<p>(written in 2009) <a href="http:&#x2F;&#x2F;crypto.stanford.edu&#x2F;craig&#x2F;craig-thesis.pdf" rel="nofollow">http:&#x2F;&#x2F;crypto.stanford.edu&#x2F;craig&#x2F;craig-thesis.pdf</a><p>some newer FHE don&#x27;t encounter a noise limit or don&#x27;t use the bootstrapping technique.</div><br/><div id="42707414" class="c"><input type="checkbox" id="c-42707414" checked=""/><div class="controls bullet"><span class="by">Ar-Curunir</span><span>|</span><a href="#42707107">root</a><span>|</span><a href="#42707228">parent</a><span>|</span><a href="#42707151">next</a><span>|</span><label class="collapse" for="c-42707414">[-]</label><label class="expand" for="c-42707414">[2 more]</label></div><br/><div class="children"><div class="content">All known FHE schemes use bootstrapping</div><br/><div id="42708066" class="c"><input type="checkbox" id="c-42708066" checked=""/><div class="controls bullet"><span class="by">ruined</span><span>|</span><a href="#42707107">root</a><span>|</span><a href="#42707414">parent</a><span>|</span><a href="#42707151">next</a><span>|</span><label class="collapse" for="c-42708066">[-]</label><label class="expand" for="c-42708066">[1 more]</label></div><br/><div class="children"><div class="content">i expected that, but a search turned up several things claiming to implement fhe without bootstrapping. i didn&#x27;t investigate and i can&#x27;t say i&#x27;m familiar so maybe they&#x27;re bogus</div><br/></div></div></div></div></div></div><div id="42707151" class="c"><input type="checkbox" id="c-42707151" checked=""/><div class="controls bullet"><span class="by">bawolff</span><span>|</span><a href="#42707107">parent</a><span>|</span><a href="#42707228">prev</a><span>|</span><a href="#42707398">next</a><span>|</span><label class="collapse" for="c-42707151">[-]</label><label class="expand" for="c-42707151">[4 more]</label></div><br/><div class="children"><div class="content">Im not an expert on this, but my understanding is &quot;noise&quot; is less a security breakdown and more the entire system breaksdown. That is where the &quot;somewhat&quot; comes in, unlike &quot;full&quot; where the system can do (expensive) things to get rid of noise, in somewhat the noise just accumulates until the system stops working. (Definitely talking out of my hat here)</div><br/><div id="42707177" class="c"><input type="checkbox" id="c-42707177" checked=""/><div class="controls bullet"><span class="by">sillysaurusx</span><span>|</span><a href="#42707107">root</a><span>|</span><a href="#42707151">parent</a><span>|</span><a href="#42707398">next</a><span>|</span><label class="collapse" for="c-42707177">[-]</label><label class="expand" for="c-42707177">[3 more]</label></div><br/><div class="children"><div class="content">Interesting! Are there any security concerns with SHE? If not, it <i>sounds</i> like all of the benefits of FHE with none of the downsides, other than the noise overwhelming the system. If that’s true, and SHE can run at least somewhat inexpensively, then this could be big. I was once super hyped about FHE till I realized it couldn’t be practical, and this has my old excitement stirring again.</div><br/><div id="42707576" class="c"><input type="checkbox" id="c-42707576" checked=""/><div class="controls bullet"><span class="by">bawolff</span><span>|</span><a href="#42707107">root</a><span>|</span><a href="#42707177">parent</a><span>|</span><a href="#42707411">next</a><span>|</span><label class="collapse" for="c-42707576">[-]</label><label class="expand" for="c-42707576">[1 more]</label></div><br/><div class="children"><div class="content">My impression is that SHE are still relatively expensive, not as crazy as FHE but still slow enough to preclude many usecases and the noise breakdown can happen relatively quickly making them not work for most algorithms people want to use FHE for.</div><br/></div></div><div id="42707411" class="c"><input type="checkbox" id="c-42707411" checked=""/><div class="controls bullet"><span class="by">Ar-Curunir</span><span>|</span><a href="#42707107">root</a><span>|</span><a href="#42707177">parent</a><span>|</span><a href="#42707576">prev</a><span>|</span><a href="#42707398">next</a><span>|</span><label class="collapse" for="c-42707411">[-]</label><label class="expand" for="c-42707411">[1 more]</label></div><br/><div class="children"><div class="content">Most FHE schemes are constructed out of SHE schemes. Also, there’s nothing preventing FHE from being practical, it’s just that existing constructions are not as fast we would like them to be</div><br/></div></div></div></div></div></div><div id="42707398" class="c"><input type="checkbox" id="c-42707398" checked=""/><div class="controls bullet"><span class="by">Ar-Curunir</span><span>|</span><a href="#42707107">parent</a><span>|</span><a href="#42707151">prev</a><span>|</span><a href="#42708148">next</a><span>|</span><label class="collapse" for="c-42707398">[-]</label><label class="expand" for="c-42707398">[1 more]</label></div><br/><div class="children"><div class="content">SHE doesn’t relax security guarantees, it relaxes the class of supported computations</div><br/></div></div></div></div><div id="42708148" class="c"><input type="checkbox" id="c-42708148" checked=""/><div class="controls bullet"><span class="by">vrtx0</span><span>|</span><a href="#42707107">prev</a><span>|</span><a href="#42708389">next</a><span>|</span><label class="collapse" for="c-42708148">[-]</label><label class="expand" for="c-42708148">[4 more]</label></div><br/><div class="children"><div class="content">Is the Apple Photos feature mentioned actually implemented using Wally, or is that just speculation?<p>From a cursory glance, the computation of centroids done on the client device seems to obviate the need for sending embedded vectors of potentially sensitive  photo details — is that incorrect?<p>I’d be curious to read a report of how on-device-only search (using latest hardware and software) is impacted by disabling the feature and&#x2F;or network access…</div><br/><div id="42708852" class="c"><input type="checkbox" id="c-42708852" checked=""/><div class="controls bullet"><span class="by">chikere232</span><span>|</span><a href="#42708148">parent</a><span>|</span><a href="#42708591">next</a><span>|</span><label class="collapse" for="c-42708852">[-]</label><label class="expand" for="c-42708852">[1 more]</label></div><br/><div class="children"><div class="content">You have to be quick if you want to disable the feature, as the scan starts on OS install, and disabling requires you to actively open the Photos app and turn it off.</div><br/></div></div><div id="42708591" class="c"><input type="checkbox" id="c-42708591" checked=""/><div class="controls bullet"><span class="by">aeontech</span><span>|</span><a href="#42708148">parent</a><span>|</span><a href="#42708852">prev</a><span>|</span><a href="#42708389">next</a><span>|</span><label class="collapse" for="c-42708591">[-]</label><label class="expand" for="c-42708591">[2 more]</label></div><br/><div class="children"><div class="content">According to this post on Apple&#x27;s Machine Learning blog, yes, Wally is the method used for this feature.<p><a href="https:&#x2F;&#x2F;machinelearning.apple.com&#x2F;research&#x2F;homomorphic-encryption" rel="nofollow">https:&#x2F;&#x2F;machinelearning.apple.com&#x2F;research&#x2F;homomorphic-encry...</a></div><br/><div id="42708780" class="c"><input type="checkbox" id="c-42708780" checked=""/><div class="controls bullet"><span class="by">vrtx0</span><span>|</span><a href="#42708148">root</a><span>|</span><a href="#42708591">parent</a><span>|</span><a href="#42708389">next</a><span>|</span><label class="collapse" for="c-42708780">[-]</label><label class="expand" for="c-42708780">[1 more]</label></div><br/><div class="children"><div class="content">Thank you! This is exactly the information the OP seems to have missed. It seems to confirm my suspicion that the author’s concerns about server-side privacy are unfounded — I think:<p>&gt; The client decrypts the reply to its PNNS query, which may contain multiple candidate landmarks. A specialized, lightweight on-device reranking model then predicts the best candidate…<p>[please correct me if I missed anything — this used to be my field, but I’ve been disabled for 10 years now, so grain of salt]</div><br/></div></div></div></div></div></div><div id="42708389" class="c"><input type="checkbox" id="c-42708389" checked=""/><div class="controls bullet"><span class="by">rkagerer</span><span>|</span><a href="#42708148">prev</a><span>|</span><a href="#42708063">next</a><span>|</span><label class="collapse" for="c-42708389">[-]</label><label class="expand" for="c-42708389">[1 more]</label></div><br/><div class="children"><div class="content">This would be even more exciting if there were some way to guarantee your phone, the servers, etc. are running untampered implementations, and that the proxies aren&#x27;t colluding with Apple.</div><br/></div></div><div id="42708063" class="c"><input type="checkbox" id="c-42708063" checked=""/><div class="controls bullet"><span class="by">sneak</span><span>|</span><a href="#42708389">prev</a><span>|</span><a href="#42707360">next</a><span>|</span><label class="collapse" for="c-42708063">[-]</label><label class="expand" for="c-42708063">[4 more]</label></div><br/><div class="children"><div class="content">&gt; <i>This should be fine: vectorization is a lossy operation. But then you would know that Amy takes lots of pictures of golden retrievers, and that is a political disaster.</i><p>This downplays the issue.  Knowing that Alice takes lots of screenshots of Winnie the Pooh memes means that Alice’s family gets put into Xinjiang concentration camps, not just a political disaster.<p>(This is a contrived example: iCloud Photos is already NOT e2ee and this is already possible now; but the point stands, as this would apply to people who have iCloud turned off, too.)</div><br/><div id="42708825" class="c"><input type="checkbox" id="c-42708825" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#42708063">parent</a><span>|</span><a href="#42708283">next</a><span>|</span><label class="collapse" for="c-42708825">[-]</label><label class="expand" for="c-42708825">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s the joke&#x2F;implication.</div><br/></div></div><div id="42708283" class="c"><input type="checkbox" id="c-42708283" checked=""/><div class="controls bullet"><span class="by">troad</span><span>|</span><a href="#42708063">parent</a><span>|</span><a href="#42708825">prev</a><span>|</span><a href="#42707360">next</a><span>|</span><label class="collapse" for="c-42708283">[-]</label><label class="expand" for="c-42708283">[2 more]</label></div><br/><div class="children"><div class="content">Agreed. And for a less contrived example, people may have photos of political protests that they attended (and the faces of others present), screenshots that include sensitive messages, subversive acts, etc.<p>It&#x27;s worth noting though that it&#x27;s now possible to opt in to iCloud Photo e2ee with &quot;Advanced Data Protection&quot;. [0]<p>[0] <a href="https:&#x2F;&#x2F;support.apple.com&#x2F;en-us&#x2F;102651" rel="nofollow">https:&#x2F;&#x2F;support.apple.com&#x2F;en-us&#x2F;102651</a></div><br/><div id="42708312" class="c"><input type="checkbox" id="c-42708312" checked=""/><div class="controls bullet"><span class="by">sneak</span><span>|</span><a href="#42708063">root</a><span>|</span><a href="#42708283">parent</a><span>|</span><a href="#42707360">next</a><span>|</span><label class="collapse" for="c-42708312">[-]</label><label class="expand" for="c-42708312">[1 more]</label></div><br/><div class="children"><div class="content">iCloud Photo e2ee still shares hashes of the plaintext with Apple, which means they can see the full list of everyone who has certain files, even if they all have e2ee enabled.  They can see who had it first, and who got it later, and which sets of iCloud users have which unique files.  It effectively leaks a social graph.<p>It’s also not available in China.</div><br/></div></div></div></div></div></div><div id="42707360" class="c"><input type="checkbox" id="c-42707360" checked=""/><div class="controls bullet"><span class="by">eviks</span><span>|</span><a href="#42708063">prev</a><span>|</span><label class="collapse" for="c-42707360">[-]</label><label class="expand" for="c-42707360">[3 more]</label></div><br/><div class="children"><div class="content">&gt; There is no trust me bro element.
&gt; Barring some issue being found in the math or Apple’s implementation of it<p>Yes, is you bar the &quot;trust me bro&quot; element in your definition, you&#x27;ll by definition have no such element.<p>Reality, though, doesn&#x27;t care about your definition, so in reality this is exactly the &quot;trust me bro&quot; element that exists<p>&gt; But we’re already living in a world where all our data is up there, not in our hands.<p>If that&#x27;s your real view, then why do you care about all this fancy encryption at all? It doesn&#x27;t help if everything is already lost</div><br/><div id="42707722" class="c"><input type="checkbox" id="c-42707722" checked=""/><div class="controls bullet"><span class="by">rpearl</span><span>|</span><a href="#42707360">parent</a><span>|</span><label class="collapse" for="c-42707722">[-]</label><label class="expand" for="c-42707722">[2 more]</label></div><br/><div class="children"><div class="content">I mean if you&#x27;d like, you could reimplement the necessary client on an airgapped computer, produce an encrypted value, take that value to a networked computer, send it to the server, obtain an encrypted result that the server could not possibly know how to decrypt, and see if it has done the computation in question. No trust is required.<p>You could also observe all bits leaving the device from the moment you initialize it and determine that only encrypted bits leave and that no private keys leave, which only leaves the gap of some side channel at the factory, but you could perform the calculation to see that the bits are only encrypted with the key you expect them to be encrypted with.</div><br/><div id="42707968" class="c"><input type="checkbox" id="c-42707968" checked=""/><div class="controls bullet"><span class="by">Krasnol</span><span>|</span><a href="#42707360">root</a><span>|</span><a href="#42707722">parent</a><span>|</span><label class="collapse" for="c-42707968">[-]</label><label class="expand" for="c-42707968">[1 more]</label></div><br/><div class="children"><div class="content">How is this comment useful to the OPs valid arguments?</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>