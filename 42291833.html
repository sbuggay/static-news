<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1733130057877" as="style"/><link rel="stylesheet" href="styles.css?v=1733130057877"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.cyberdemon.org/2024/03/20/submodules.html">Demystifying Git Submodules</a> <span class="domain">(<a href="https://www.cyberdemon.org">www.cyberdemon.org</a>)</span></div><div class="subtext"><span>signa11</span> | <span>50 comments</span></div><br/><div><div id="42292654" class="c"><input type="checkbox" id="c-42292654" checked=""/><div class="controls bullet"><span class="by">mmastrac</span><span>|</span><a href="#42293687">next</a><span>|</span><label class="collapse" for="c-42292654">[-]</label><label class="expand" for="c-42292654">[5 more]</label></div><br/><div class="children"><div class="content">Every time I end up using repos with submodules, I&#x27;m stuck in the submodule unwedging dance at some point. It&#x27;s just not worth it. Either it&#x27;s stuck with changes that accidentally snuck into the subtree (rm -rf and submodule init&#x2F;update), the commit is bad and git can&#x27;t update to it somehow (maybe it&#x27;s not a tag and can&#x27;t be fetched? usually gets fixed with rm -rf and submodule init&#x2F;update), or maybe it&#x27;s just when I switched branches and it&#x27;s left in a dirty state because...  reasons.<p>Git is elegant is so many ways, but submodules are the broken, ugly stepchild of the beauty that git is.<p>I suspect it&#x27;s not the idea of submodules, but the terrible, terrible command interface to them and how badly they work with the rest of the system.</div><br/><div id="42292827" class="c"><input type="checkbox" id="c-42292827" checked=""/><div class="controls bullet"><span class="by">crossroadsguy</span><span>|</span><a href="#42292654">parent</a><span>|</span><a href="#42293687">next</a><span>|</span><label class="collapse" for="c-42292827">[-]</label><label class="expand" for="c-42292827">[4 more]</label></div><br/><div class="children"><div class="content">Having used few “lesser” VCSes I am not so sure I’d call Git elegant. It just became famous and defacto VCS of the Internet - a lot of that credit must go to Github (which also was and is used a lot by comps and teams). Something like Markdown — one day everyone and their kittens were just using it which is not necessarily not a compliment.<p>I had created 2-3 char git submodule related aliases. Git submodule exists because a better  alternative isn’t available (which gives us same behaviour or close to it).</div><br/><div id="42293019" class="c"><input type="checkbox" id="c-42293019" checked=""/><div class="controls bullet"><span class="by">nine_k</span><span>|</span><a href="#42292654">root</a><span>|</span><a href="#42292827">parent</a><span>|</span><a href="#42293687">next</a><span>|</span><label class="collapse" for="c-42293019">[-]</label><label class="expand" for="c-42293019">[3 more]</label></div><br/><div class="children"><div class="content">As a side note: git won because <i>at the time</i> all other VCSes were either functionally worse (lice RCS or Subversion), or were good but required a paid license (like Perforce or BitKeeper), or were too slow to for larger projects like Linux (Mercurial).<p>More advanced things were created since then, like Fossil or Pijul. But the network effects make git predominant now.</div><br/><div id="42294326" class="c"><input type="checkbox" id="c-42294326" checked=""/><div class="controls bullet"><span class="by">cassianoleal</span><span>|</span><a href="#42292654">root</a><span>|</span><a href="#42293019">parent</a><span>|</span><a href="#42294362">next</a><span>|</span><label class="collapse" for="c-42294326">[-]</label><label class="expand" for="c-42294326">[1 more]</label></div><br/><div class="children"><div class="content">&gt; But the network effects make git predominant now.<p>That and the fact that it&#x27;s... well, it&#x27;s a good system - if perhaps not with the best UX.<p>It works well for pretty much everyone who cares to learn the basics, and then you can evolve from there with more practice. Which is probably true of any system.</div><br/></div></div><div id="42294362" class="c"><input type="checkbox" id="c-42294362" checked=""/><div class="controls bullet"><span class="by">petepete</span><span>|</span><a href="#42292654">root</a><span>|</span><a href="#42293019">parent</a><span>|</span><a href="#42294326">prev</a><span>|</span><a href="#42293687">next</a><span>|</span><label class="collapse" for="c-42294362">[-]</label><label class="expand" for="c-42294362">[1 more]</label></div><br/><div class="children"><div class="content">Git won because GitHub.</div><br/></div></div></div></div></div></div></div></div><div id="42293687" class="c"><input type="checkbox" id="c-42293687" checked=""/><div class="controls bullet"><span class="by">impure</span><span>|</span><a href="#42292654">prev</a><span>|</span><a href="#42294377">next</a><span>|</span><label class="collapse" for="c-42293687">[-]</label><label class="expand" for="c-42293687">[3 more]</label></div><br/><div class="children"><div class="content">I love submodules. It&#x27;s similar to using a package manager but allows you to modify the submodules&#x27; code much easier. And as already mentioned you need to use `git config --global submodule.recurse true`. This really should be the default.</div><br/><div id="42293955" class="c"><input type="checkbox" id="c-42293955" checked=""/><div class="controls bullet"><span class="by">IshKebab</span><span>|</span><a href="#42293687">parent</a><span>|</span><a href="#42294228">next</a><span>|</span><label class="collapse" for="c-42293955">[-]</label><label class="expand" for="c-42293955">[1 more]</label></div><br/><div class="children"><div class="content">Submodules are <i>okay</i> in theory. But in practice the actual implementation is very buggy and incomplete. It&#x27;s relatively easy to get into a state where your .git directory is completely broken. Plenty of operations are unreliable to the point that they break CI. They don&#x27;t work with worktrees.<p>On top of that they are needlessly confusing. Why is there a .gitmodules file <i>and</i> hidden state inside the .git directory? Why aren&#x27;t they cloned by default? Many of the UX issues have only been fixed if you turn non-default options on (e.g. the display of diffs can be changed from useless &quot;submodules changed from commit 123 to 456&quot; to &quot;these commits have been added&#x2F;removed&quot;).<p>Just all-round they are a mediocre idea, implemented badly.</div><br/></div></div><div id="42294228" class="c"><input type="checkbox" id="c-42294228" checked=""/><div class="controls bullet"><span class="by">silasdavis</span><span>|</span><a href="#42293687">parent</a><span>|</span><a href="#42293955">prev</a><span>|</span><a href="#42294377">next</a><span>|</span><label class="collapse" for="c-42294228">[-]</label><label class="expand" for="c-42294228">[1 more]</label></div><br/><div class="children"><div class="content">Absent mindedly moving a submodule breaks everything. It was relatively recently there was even support via git mv.</div><br/></div></div></div></div><div id="42294377" class="c"><input type="checkbox" id="c-42294377" checked=""/><div class="controls bullet"><span class="by">the_clarence</span><span>|</span><a href="#42293687">prev</a><span>|</span><a href="#42293006">next</a><span>|</span><label class="collapse" for="c-42294377">[-]</label><label class="expand" for="c-42294377">[1 more]</label></div><br/><div class="children"><div class="content">Does Meta sapling git wrapper facilitates working with submodules?</div><br/></div></div><div id="42293006" class="c"><input type="checkbox" id="c-42293006" checked=""/><div class="controls bullet"><span class="by">gorgoiler</span><span>|</span><a href="#42294377">prev</a><span>|</span><a href="#42293514">next</a><span>|</span><label class="collapse" for="c-42293006">[-]</label><label class="expand" for="c-42293006">[2 more]</label></div><br/><div class="children"><div class="content">Not only are they “a pain” but I see git submodules as the technical equivalent of a “Big Tent” political party trying to fit mutiple divergent factions into a single entity.<p>At some point someone in a submodule repo is going to go rogue and make something incompatible with the bigger picture.  Psychologically, they’ve merged to their trunk so as far as they are concerned their change is complete.  Task done, “mission accomplished”.  Yet until it’s also in the parent repo’s trunk, it might as well still be on a branch.<p>In a monorepo, the rogue coder would instead still be on a branch.  They’re done when their branch works <i>and</i> their change is merged (er, ff’d!) onto the one true main, not before.<p>None of this applies to FOSS projects.  Those <i>are</i> Big Tents where political negotiations are constantly required to keep various democratically equal projects aligned.<p>In the corporate world though I am entirely happy with a one party state running a top down, planned economy of N year plans following CEO-Thought, and with a single repository.</div><br/><div id="42293781" class="c"><input type="checkbox" id="c-42293781" checked=""/><div class="controls bullet"><span class="by">friendzis</span><span>|</span><a href="#42293006">parent</a><span>|</span><a href="#42293514">next</a><span>|</span><label class="collapse" for="c-42293781">[-]</label><label class="expand" for="c-42293781">[1 more]</label></div><br/><div class="children"><div class="content">In trunk based development libraries do break product code, yes, which is (and should be recognized this way) 100% intentional. The other alternative is leaf based development where you have dependency hell because you can&#x27;t force product code to update libraries.<p>Pick your poison - change management is not an easy topic.</div><br/></div></div></div></div><div id="42293514" class="c"><input type="checkbox" id="c-42293514" checked=""/><div class="controls bullet"><span class="by">TekMol</span><span>|</span><a href="#42293006">prev</a><span>|</span><a href="#42292690">next</a><span>|</span><label class="collapse" for="c-42293514">[-]</label><label class="expand" for="c-42293514">[4 more]</label></div><br/><div class="children"><div class="content">I like Git Submodules very much.<p>Are there any downsides to completely skip dependency managers of specific languages and just use submodules to handle dependencies?<p>I don&#x27;t mean code by 3rd parties. I mean the projects and libraries I write myself. I am tempted to try and handle my own code-reuse purely through git submodules. Would I encounter any problems?</div><br/><div id="42294139" class="c"><input type="checkbox" id="c-42294139" checked=""/><div class="controls bullet"><span class="by">leni536</span><span>|</span><a href="#42293514">parent</a><span>|</span><a href="#42293641">next</a><span>|</span><label class="collapse" for="c-42294139">[-]</label><label class="expand" for="c-42294139">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Are there any downsides to completely skip dependency managers of specific languages and just use submodules to handle dependencies?<p>Submodules suck once you encounter a diamond dependency problem.</div><br/></div></div><div id="42293641" class="c"><input type="checkbox" id="c-42293641" checked=""/><div class="controls bullet"><span class="by">skinner927</span><span>|</span><a href="#42293514">parent</a><span>|</span><a href="#42294139">prev</a><span>|</span><a href="#42294059">next</a><span>|</span><label class="collapse" for="c-42293641">[-]</label><label class="expand" for="c-42293641">[1 more]</label></div><br/><div class="children"><div class="content">We used them for years for dependencies, but have instead moved to a monorepo because of how we want to do releases. We never had any issues while using submodules.</div><br/></div></div><div id="42294059" class="c"><input type="checkbox" id="c-42294059" checked=""/><div class="controls bullet"><span class="by">imp0cat</span><span>|</span><a href="#42293514">parent</a><span>|</span><a href="#42293641">prev</a><span>|</span><a href="#42292690">next</a><span>|</span><label class="collapse" for="c-42294059">[-]</label><label class="expand" for="c-42294059">[1 more]</label></div><br/><div class="children"><div class="content">I am not sure what exactly are you trying to achieve, but take a look at Meson Wraps.</div><br/></div></div></div></div><div id="42292690" class="c"><input type="checkbox" id="c-42292690" checked=""/><div class="controls bullet"><span class="by">jimmydoe</span><span>|</span><a href="#42293514">prev</a><span>|</span><a href="#42293493">next</a><span>|</span><label class="collapse" for="c-42292690">[-]</label><label class="expand" for="c-42292690">[4 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t get the opposition to submodule. imho it&#x27;s fine, there are limited options with it, so limited chance it may go wrong.<p>some suggested package manager, which imho is another layer of dependency, e.g. in Python, it always takes me some extra seconds to figure out which package manager I&#x27;m supposed to use, and it&#x27;s constantly evolving.<p>end of day it&#x27;s up to which one you are most familiar with.</div><br/><div id="42294025" class="c"><input type="checkbox" id="c-42294025" checked=""/><div class="controls bullet"><span class="by">nobodywillobsrv</span><span>|</span><a href="#42292690">parent</a><span>|</span><a href="#42293803">next</a><span>|</span><label class="collapse" for="c-42294025">[-]</label><label class="expand" for="c-42294025">[1 more]</label></div><br/><div class="children"><div class="content">I think one problem is that submodules are kind of over-kill in situations where what you really want is to have separate repos for various reasons but one way of pulling them all in at once. You could make a script with the origins etc but then you put than in a repo and then ...<p>I use them in my personal projects and have a sprawling mass of crazy. It &quot;works&quot; but it&#x27;s a pain and I have scripts to recursively crawl through and basically do &#x27;git pull&#x27; everywhere or &#x27;git push&#x27;.<p>So if you end up using submodules when you don&#x27;t really care about <i>versioning</i> the sub-repos, I think you end up feeling a bit of an idiot like me. But it&#x27;s a pain to reverse.</div><br/></div></div><div id="42293803" class="c"><input type="checkbox" id="c-42293803" checked=""/><div class="controls bullet"><span class="by">sshine</span><span>|</span><a href="#42292690">parent</a><span>|</span><a href="#42294025">prev</a><span>|</span><a href="#42293493">next</a><span>|</span><label class="collapse" for="c-42293803">[-]</label><label class="expand" for="c-42293803">[2 more]</label></div><br/><div class="children"><div class="content">Submodules are the feature you discover someone pulled in when things don&#x27;t work, and after a bit of digging, you realize it&#x27;s because the submodule wasn&#x27;t initialized, and it didn&#x27;t say so anywhere.<p>I suspect the opposition to submodules comes from the poor (manual) integration.<p>As someone suggested in another thread, they ought to auto-recurse by default.<p>But I don&#x27;t think that&#x27;s going to happen, either.<p>Maybe something like direnv where it tells you about the unloaded submodule once you enter the repository. Except that won&#x27;t work for IDEs.</div><br/></div></div></div></div><div id="42293493" class="c"><input type="checkbox" id="c-42293493" checked=""/><div class="controls bullet"><span class="by">hakanderyal</span><span>|</span><a href="#42292690">prev</a><span>|</span><a href="#42292646">next</a><span>|</span><label class="collapse" for="c-42293493">[-]</label><label class="expand" for="c-42293493">[2 more]</label></div><br/><div class="children"><div class="content">Checkout git subrepo [0] if you also find working with submodules cumbersome.<p>It has a different set of trade offs and works without any problems or changes to your workflow if they fit. (Only thing it has problems is rebasing, under specific circumstances)<p>[0] <a href="https:&#x2F;&#x2F;github.com&#x2F;ingydotnet&#x2F;git-subrepo">https:&#x2F;&#x2F;github.com&#x2F;ingydotnet&#x2F;git-subrepo</a></div><br/><div id="42294028" class="c"><input type="checkbox" id="c-42294028" checked=""/><div class="controls bullet"><span class="by">IshKebab</span><span>|</span><a href="#42293493">parent</a><span>|</span><a href="#42292646">next</a><span>|</span><label class="collapse" for="c-42294028">[-]</label><label class="expand" for="c-42294028">[1 more]</label></div><br/><div class="children"><div class="content">It would be nice if they could say how it differs to git subtree. Any idea?</div><br/></div></div></div></div><div id="42292646" class="c"><input type="checkbox" id="c-42292646" checked=""/><div class="controls bullet"><span class="by">AceJohnny2</span><span>|</span><a href="#42293493">prev</a><span>|</span><a href="#42292242">next</a><span>|</span><label class="collapse" for="c-42292646">[-]</label><label class="expand" for="c-42292646">[2 more]</label></div><br/><div class="children"><div class="content">The very short of submodules is this:<p>Git&#x27;s data system has 3 (&amp; 1&#x2F;2) types of objects:<p>1. A blob, which is analogous to a file, and is referenced by the hash of its contents<p>2. A tree, which is analogous to a directory, which contains blobs and other trees, and maps them to names. It is referenced by the hash of its contents.<p>3. A commit, which contains One (1) tree (the top-level of your repo), a reference to one (or more, for a merge) parent commit, and miscellaneous metadata like the author and the commit message. It is referenced by, you guessed it, the hash of its contents! (annotated tags are commit objects)<p>3.5. References, which are analogous to symlinks to commits.  Branches and lightweight (non-annotated) tags are References.<p>Now, remember how a tree can contain a blobs or other trees? What if (<i>gasp</i>) you put a <i>commit</i> object in them!? That&#x27;s essentially what a submodule is.<p>That&#x27;s why a submodule is always included _at a particular commit of it_. That&#x27;s why there&#x27;s all sorts of complicated support machinery to make &quot;a commit object inside a tree object&quot; make sense.</div><br/><div id="42294057" class="c"><input type="checkbox" id="c-42294057" checked=""/><div class="controls bullet"><span class="by">IshKebab</span><span>|</span><a href="#42292646">parent</a><span>|</span><a href="#42292242">next</a><span>|</span><label class="collapse" for="c-42294057">[-]</label><label class="expand" for="c-42294057">[1 more]</label></div><br/><div class="children"><div class="content">&gt; a submodule is always included at a particular commit<p>Actually you can make a submodule track a branch instead of a specific commit. I&#x27;ve never seen anyone actually do that though and it seems like a bad idea. Though I did work for a while for a company that had written a custom tool that worked like that and we never ran into any problems due to it.</div><br/></div></div></div></div><div id="42292242" class="c"><input type="checkbox" id="c-42292242" checked=""/><div class="controls bullet"><span class="by">dboreham</span><span>|</span><a href="#42292646">prev</a><span>|</span><a href="#42293749">next</a><span>|</span><label class="collapse" for="c-42292242">[-]</label><label class="expand" for="c-42292242">[9 more]</label></div><br/><div class="children"><div class="content">imho: do not use submodules. Only need to deal with them when working on someone else&#x27;s project where they didn&#x27;t know this rule.</div><br/><div id="42292451" class="c"><input type="checkbox" id="c-42292451" checked=""/><div class="controls bullet"><span class="by">dheera</span><span>|</span><a href="#42292242">parent</a><span>|</span><a href="#42293749">next</a><span>|</span><label class="collapse" for="c-42292451">[-]</label><label class="expand" for="c-42292451">[8 more]</label></div><br/><div class="children"><div class="content">other than the command line UX of submodules being crap, i think they are actually a good system.</div><br/><div id="42292610" class="c"><input type="checkbox" id="c-42292610" checked=""/><div class="controls bullet"><span class="by">m463</span><span>|</span><a href="#42292242">root</a><span>|</span><a href="#42292451">parent</a><span>|</span><a href="#42292522">next</a><span>|</span><label class="collapse" for="c-42292610">[-]</label><label class="expand" for="c-42292610">[1 more]</label></div><br/><div class="children"><div class="content">I think that&#x27;s the nature of git.  goes double for lsf.<p>Git reminds me of C - important language, used everywhere, but has never evolved with respect to usability.<p>EDIT: hmm... actually &quot;git switch&quot; was more usable to me</div><br/></div></div><div id="42292522" class="c"><input type="checkbox" id="c-42292522" checked=""/><div class="controls bullet"><span class="by">Xelynega</span><span>|</span><a href="#42292242">root</a><span>|</span><a href="#42292451">parent</a><span>|</span><a href="#42292610">prev</a><span>|</span><a href="#42293749">next</a><span>|</span><label class="collapse" for="c-42292522">[-]</label><label class="expand" for="c-42292522">[6 more]</label></div><br/><div class="children"><div class="content">What is bad about them on the command line? If you understand git the only extra things you need are `git submodule update --init` and `git submodule add ...`</div><br/><div id="42292655" class="c"><input type="checkbox" id="c-42292655" checked=""/><div class="controls bullet"><span class="by">Izkata</span><span>|</span><a href="#42292242">root</a><span>|</span><a href="#42292522">parent</a><span>|</span><a href="#42292643">next</a><span>|</span><label class="collapse" for="c-42292655">[-]</label><label class="expand" for="c-42292655">[1 more]</label></div><br/><div class="children"><div class="content">Add in &quot;--remote --recursive&quot; to the &quot;update&quot; command and you have the same thing as unpinned svn externals.</div><br/></div></div><div id="42292643" class="c"><input type="checkbox" id="c-42292643" checked=""/><div class="controls bullet"><span class="by">GauntletWizard</span><span>|</span><a href="#42292242">root</a><span>|</span><a href="#42292522">parent</a><span>|</span><a href="#42292655">prev</a><span>|</span><a href="#42293749">next</a><span>|</span><label class="collapse" for="c-42292643">[-]</label><label class="expand" for="c-42292643">[4 more]</label></div><br/><div class="children"><div class="content">The UX that sucks is around what happens if they are unclean&#x2F;how to update them. A checkout doesn&#x27;t recursively checkout the relevant submodules. This is the biggest pain point for most orgs I&#x27;ve worked at. It&#x27;s an easy setting to set (`git config --global submodule.recurse true`) but the fact that it&#x27;s not default hurts.<p>Most engineers have a poor understanding of Git. My university had a great history of version control course right at the dawn of the git era (In 2006! RIT really speedran it, standardizing on Git by the end of the year, but also including tutorials on RCS, CVS, and SVN and a brief foray into Perforce). Still, a ton of my classmates just didn&#x27;t get it.<p>The other major blocker is what to do with an unclean submodule repo; I honestly don&#x27;t remember what git does by default, because it&#x27;s bad. And most projects get unclean real quick. Makefile hygeine is not common, and for most of time most projects became unclean from a simple `make`. It&#x27;s better now, but not great.</div><br/><div id="42294187" class="c"><input type="checkbox" id="c-42294187" checked=""/><div class="controls bullet"><span class="by">Xelynega</span><span>|</span><a href="#42292242">root</a><span>|</span><a href="#42292643">parent</a><span>|</span><a href="#42293712">next</a><span>|</span><label class="collapse" for="c-42294187">[-]</label><label class="expand" for="c-42294187">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Makefile hygeine is not common, and for most of time most projects became unclean from a simple `make`.<p>If you&#x27;re checking generated files into git, submodules aren&#x27;t the problem imo.<p>I can see the frustration of modifying submodules files and trying to commit the main repo, but if you have to do that then it wasn&#x27;t supposed to be a submodule. That&#x27;s like complaining that modifying node_modules files doesn&#x27;t apply upstream to your dependencies.</div><br/></div></div><div id="42293712" class="c"><input type="checkbox" id="c-42293712" checked=""/><div class="controls bullet"><span class="by">glandium</span><span>|</span><a href="#42292242">root</a><span>|</span><a href="#42292643">parent</a><span>|</span><a href="#42294187">prev</a><span>|</span><a href="#42293749">next</a><span>|</span><label class="collapse" for="c-42293712">[-]</label><label class="expand" for="c-42293712">[2 more]</label></div><br/><div class="children"><div class="content">There are bad interactions with rebase too.</div><br/><div id="42294052" class="c"><input type="checkbox" id="c-42294052" checked=""/><div class="controls bullet"><span class="by">usr1106</span><span>|</span><a href="#42292242">root</a><span>|</span><a href="#42293712">parent</a><span>|</span><a href="#42293749">next</a><span>|</span><label class="collapse" for="c-42294052">[-]</label><label class="expand" for="c-42294052">[1 more]</label></div><br/><div class="children"><div class="content">I have gotten rid of those by the rule: If a commit update updates a submodule, it must not update anything else. (Yes, this can violate the general rule that nothing needs to be added to a commit to be complete. But updating submodules has been worth the exception in my experience.)</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="42293749" class="c"><input type="checkbox" id="c-42293749" checked=""/><div class="controls bullet"><span class="by">megamix</span><span>|</span><a href="#42292242">prev</a><span>|</span><a href="#42293266">next</a><span>|</span><label class="collapse" for="c-42293749">[-]</label><label class="expand" for="c-42293749">[1 more]</label></div><br/><div class="children"><div class="content">Git - 100+ flags and commands when you only need 3-5.</div><br/></div></div><div id="42293266" class="c"><input type="checkbox" id="c-42293266" checked=""/><div class="controls bullet"><span class="by">abdullahkhalids</span><span>|</span><a href="#42293749">prev</a><span>|</span><a href="#42292397">next</a><span>|</span><label class="collapse" for="c-42293266">[-]</label><label class="expand" for="c-42293266">[2 more]</label></div><br/><div class="children"><div class="content">I am running simulations with a rapidly evolving codebase. I have a separate repo with all the simulation code in it. I am want to tie each simulation with the git commit (of the main repo) at which it was run. Are git submodules the correct solution to this in any way?</div><br/><div id="42293812" class="c"><input type="checkbox" id="c-42293812" checked=""/><div class="controls bullet"><span class="by">swinglock</span><span>|</span><a href="#42293266">parent</a><span>|</span><a href="#42292397">next</a><span>|</span><label class="collapse" for="c-42293812">[-]</label><label class="expand" for="c-42293812">[1 more]</label></div><br/><div class="children"><div class="content">Perhaps. Tags might be fitting instead.</div><br/></div></div></div></div><div id="42292397" class="c"><input type="checkbox" id="c-42292397" checked=""/><div class="controls bullet"><span class="by">0x69420</span><span>|</span><a href="#42293266">prev</a><span>|</span><a href="#42292092">next</a><span>|</span><label class="collapse" for="c-42292397">[-]</label><label class="expand" for="c-42292397">[1 more]</label></div><br/><div class="children"><div class="content">understanding submodules has not caused me to stop wishing that something in the vein of nix (in the sense of being able to provide a &quot;lockfile&quot; that transcends language-level package managers) becomes sufficiently commonplace that people would feel silly doing anything other than using whatever that turns out to be, or just directly vendoring if all else fails</div><br/></div></div><div id="42292092" class="c"><input type="checkbox" id="c-42292092" checked=""/><div class="controls bullet"><span class="by">vsskanth</span><span>|</span><a href="#42292397">prev</a><span>|</span><a href="#42293029">next</a><span>|</span><label class="collapse" for="c-42292092">[-]</label><label class="expand" for="c-42292092">[2 more]</label></div><br/><div class="children"><div class="content">speaking of submodules, anyone here have experience with git subrepo ?</div><br/><div id="42292583" class="c"><input type="checkbox" id="c-42292583" checked=""/><div class="controls bullet"><span class="by">metadat</span><span>|</span><a href="#42292092">parent</a><span>|</span><a href="#42293029">next</a><span>|</span><label class="collapse" for="c-42292583">[-]</label><label class="expand" for="c-42292583">[1 more]</label></div><br/><div class="children"><div class="content">Subrepos are non-standard and don&#x27;t offer any significant benefit compared to submodules.<p>Even still, submodules are also best avoided.</div><br/></div></div></div></div><div id="42293029" class="c"><input type="checkbox" id="c-42293029" checked=""/><div class="controls bullet"><span class="by">tonymet</span><span>|</span><a href="#42292092">prev</a><span>|</span><a href="#42292149">next</a><span>|</span><label class="collapse" for="c-42293029">[-]</label><label class="expand" for="c-42293029">[1 more]</label></div><br/><div class="children"><div class="content">I recommend trying subtree.  for many cases it does what you need . And the other consumers (developers,  build systems) don&#x27;t need any special tooling.</div><br/></div></div><div id="42292149" class="c"><input type="checkbox" id="c-42292149" checked=""/><div class="controls bullet"><span class="by">vermilingua</span><span>|</span><a href="#42293029">prev</a><span>|</span><a href="#42294021">next</a><span>|</span><label class="collapse" for="c-42292149">[-]</label><label class="expand" for="c-42292149">[9 more]</label></div><br/><div class="children"><div class="content">Can anyone speak to usecases for submodules that arent better served by your language’s package manager? Multi-language codebases, languages without appropriate package management perhaps?</div><br/><div id="42294226" class="c"><input type="checkbox" id="c-42294226" checked=""/><div class="controls bullet"><span class="by">cxr</span><span>|</span><a href="#42292149">parent</a><span>|</span><a href="#42293555">next</a><span>|</span><label class="collapse" for="c-42294226">[-]</label><label class="expand" for="c-42294226">[1 more]</label></div><br/><div class="children"><div class="content">Every &quot;language package manager&quot;, including the lock file format and requirements file, is an inferior, ad hoc, formally-specified, error-prone, incompatible reimplementation of half of Git.<p>Almost every use case for a package manager is better served by Git, whether you choose to use submodules or not.  If you want to do version control, use the version control system, and stop trying to do an end-run around the way it works.<p>Previously:<p>&gt; <i>I&#x27;m happy to criticize NPM the tool. The whole thing is designed as a second, crummier version control system that lives in disharmony with and on top of your base-level version control system (so it can subvert it). It&#x27;s a terrible design.</i><p>&lt;<a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=37604551">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=37604551</a>&gt;</div><br/></div></div><div id="42293555" class="c"><input type="checkbox" id="c-42293555" checked=""/><div class="controls bullet"><span class="by">nrclark</span><span>|</span><a href="#42292149">parent</a><span>|</span><a href="#42294226">prev</a><span>|</span><a href="#42292648">next</a><span>|</span><label class="collapse" for="c-42293555">[-]</label><label class="expand" for="c-42293555">[1 more]</label></div><br/><div class="children"><div class="content">Submodules are great for projects where your code depends on upstream Git repos that you don&#x27;t control and don&#x27;t want to vendor yourself.<p>I recently did an embedded Linux design that depended on 5 external repositories: one from Yocto, three from OpenEmbedded, and one from a CPU vendor. My own code just sat on the top of this set of repos.<p>Submodules made that design very simple. One repo with all of my code in it, and submodules for all external repos. All dependent repos were pinned before of how submodules work. Pins were easy to update when desired, and never move on their own.</div><br/></div></div><div id="42292648" class="c"><input type="checkbox" id="c-42292648" checked=""/><div class="controls bullet"><span class="by">ajfriend</span><span>|</span><a href="#42292149">parent</a><span>|</span><a href="#42293555">prev</a><span>|</span><a href="#42294164">next</a><span>|</span><label class="collapse" for="c-42292648">[-]</label><label class="expand" for="c-42292648">[1 more]</label></div><br/><div class="children"><div class="content">We use a submodule in <a href="https:&#x2F;&#x2F;github.com&#x2F;uber&#x2F;h3-py">https:&#x2F;&#x2F;github.com&#x2F;uber&#x2F;h3-py</a> to wrap the core H3 library, which is written in C. Submodules seemed like a reasonable way to handle the dependency, and, at least for this use case, the approach hasn&#x27;t given me any problems.</div><br/></div></div><div id="42294164" class="c"><input type="checkbox" id="c-42294164" checked=""/><div class="controls bullet"><span class="by">dirkt</span><span>|</span><a href="#42292149">parent</a><span>|</span><a href="#42292648">prev</a><span>|</span><a href="#42292175">next</a><span>|</span><label class="collapse" for="c-42294164">[-]</label><label class="expand" for="c-42294164">[1 more]</label></div><br/><div class="children"><div class="content">I have used them for OpenAPI specs shared between frontend and backend, and database schemas together with values for a test database in the pipeline.<p>Yes, you can also solve this with a monorepo...</div><br/></div></div><div id="42292175" class="c"><input type="checkbox" id="c-42292175" checked=""/><div class="controls bullet"><span class="by">c0balt</span><span>|</span><a href="#42292149">parent</a><span>|</span><a href="#42294164">prev</a><span>|</span><a href="#42292307">next</a><span>|</span><label class="collapse" for="c-42292175">[-]</label><label class="expand" for="c-42292175">[1 more]</label></div><br/><div class="children"><div class="content">The latter had been an issue for me in the past with some projects that just weren&#x27;t packaged for, e. G., python and had to be imported directly. It can also be helpful for non-packaged assets that are held in a separate git repository.</div><br/></div></div><div id="42292307" class="c"><input type="checkbox" id="c-42292307" checked=""/><div class="controls bullet"><span class="by">bschwindHN</span><span>|</span><a href="#42292149">parent</a><span>|</span><a href="#42292175">prev</a><span>|</span><a href="#42292906">next</a><span>|</span><label class="collapse" for="c-42292307">[-]</label><label class="expand" for="c-42292307">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Multi-language codebases<p>This is where I use them. I have some Rust bindings to C++ code, and that C++ code lives in my repo as a submodule. Everyone seems to hate submodules I guess because of the surprising behavior described in the post, but for my use case they&#x27;ve been completely fine.</div><br/></div></div><div id="42292906" class="c"><input type="checkbox" id="c-42292906" checked=""/><div class="controls bullet"><span class="by">foooorsyth</span><span>|</span><a href="#42292149">parent</a><span>|</span><a href="#42292307">prev</a><span>|</span><a href="#42294021">next</a><span>|</span><label class="collapse" for="c-42292906">[-]</label><label class="expand" for="c-42292906">[2 more]</label></div><br/><div class="children"><div class="content">Two of the largest tech companies in the world, Google and Meta, had to roll custom VCS for their day to day engineering operations because git and git submodule were so unsuitable. The default pack file behavior of git is completely unsuitable for a rapidly releasing company with a monorepo. You <i>don’t</i> want or need the entire history — you just want a few recent commits. You <i>do</i> want some visibility into what your coworkers are up to so you can prevent merge conflicts before they happen (centralization is good!). You <i>probably</i> only need part of the tree, not the entire thing.<p>If you go back and watch Linus’ talk at Google regarding git, he’s basically describing (unknowingly) why Google needs to <i>not</i> use git for its day to day. Even on a smaller scale, Android (AOSP) had to create a meta tool for git called git-repo to handle its source tree. Git submodule failed there.</div><br/><div id="42293797" class="c"><input type="checkbox" id="c-42293797" checked=""/><div class="controls bullet"><span class="by">jayd16</span><span>|</span><a href="#42292149">root</a><span>|</span><a href="#42292906">parent</a><span>|</span><a href="#42294021">next</a><span>|</span><label class="collapse" for="c-42293797">[-]</label><label class="expand" for="c-42293797">[1 more]</label></div><br/><div class="children"><div class="content">Don&#x27;t all your examples predate stable git-submodules?</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>