<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1695286863102" as="style"/><link rel="stylesheet" href="styles.css?v=1695286863102"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="http://peter.eisentraut.org/blog/2023/09/20/grouping-digits-in-sql">Grouping digits in SQL</a> <span class="domain">(<a href="http://peter.eisentraut.org">peter.eisentraut.org</a>)</span></div><div class="subtext"><span>ingve</span> | <span>6 comments</span></div><br/><div><div id="37593937" class="c"><input type="checkbox" id="c-37593937" checked=""/><div class="controls bullet"><span class="by">JoelJacobson</span><span>|</span><a href="#37593771">next</a><span>|</span><label class="collapse" for="c-37593937">[-]</label><label class="expand" for="c-37593937">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;m truly impressed by the tactfulness of first making the previously unintentionally legal but undocumented syntax an error in PostgreSQL 15. This is a textbook case of &quot;Virtuous Intolerance&quot; [1].<p>By taking this step, the PostgreSQL community set up an invaluable real-world litmus test that lasted an entire year. This strategic intolerance allowed them to gather critical insights into whether any existing code would break and to understand whether such cases were intentional or not.<p>The decision significantly de-risked the introduction of the new, much-welcomed syntax in SQL and PostgreSQL 16. I think this decision framework serves as a model for other projects on how to introduce changes responsibly without breaking the ecosystem.<p>Kudos to the PostgreSQL team for such thoughtful engineering and to Peter Eisentraut for leading this exemplary four-year journey!<p>[1] The Harmful Consequences of the Robustness Principle: <a href="https:&#x2F;&#x2F;www.ietf.org&#x2F;archive&#x2F;id&#x2F;draft-iab-protocol-maintenance-05.html#name-virtuous-intolerance" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.ietf.org&#x2F;archive&#x2F;id&#x2F;draft-iab-protocol-maintenan...</a></div><br/><div id="37594460" class="c"><input type="checkbox" id="c-37594460" checked=""/><div class="controls bullet"><span class="by">imrehg</span><span>|</span><a href="#37593937">parent</a><span>|</span><a href="#37593771">next</a><span>|</span><label class="collapse" for="c-37594460">[-]</label><label class="expand" for="c-37594460">[1 more]</label></div><br/><div class="children"><div class="content">Here&#x27;s a more up-to-date link to [1] as it is now published as RFC-9413: <a href="https:&#x2F;&#x2F;www.rfc-editor.org&#x2F;rfc&#x2F;rfc9413.html#name-virtuous-intolerance" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.rfc-editor.org&#x2F;rfc&#x2F;rfc9413.html#name-virtuous-in...</a></div><br/></div></div></div></div><div id="37593771" class="c"><input type="checkbox" id="c-37593771" checked=""/><div class="controls bullet"><span class="by">hans_castorp</span><span>|</span><a href="#37593937">prev</a><span>|</span><a href="#37593536">next</a><span>|</span><label class="collapse" for="c-37593771">[-]</label><label class="expand" for="c-37593771">[1 more]</label></div><br/><div class="children"><div class="content">I typically use 1e8 instead 100000000 when writing large (integer) numbers</div><br/></div></div><div id="37593536" class="c"><input type="checkbox" id="c-37593536" checked=""/><div class="controls bullet"><span class="by">fbdab103</span><span>|</span><a href="#37593771">prev</a><span>|</span><label class="collapse" for="c-37593536">[-]</label><label class="expand" for="c-37593536">[2 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>  For example, this was accepted:
   SELECT 123abc;
  This would parse the same as
   SELECT 123 abc;
</code></pre>
SQL is just not fair.</div><br/><div id="37593597" class="c"><input type="checkbox" id="c-37593597" checked=""/><div class="controls bullet"><span class="by">zoky</span><span>|</span><a href="#37593536">parent</a><span>|</span><label class="collapse" for="c-37593597">[-]</label><label class="expand" for="c-37593597">[1 more]</label></div><br/><div class="children"><div class="content">To be fair, that’s not part of the SQL standard, it was just an unintended quirk in PostgreSQL resulting from a series of historical choices. It actually kind of makes sense how that happened; once the requirement to use AS was dropped, it became necessary to find other ways to delimit parameters in a statement, and anything beginning with a number would be delimited by the first non-numeric character. So if the parser sees a token that starts with a digit, it reads until the first non-numeric digit, strips out any following whitespace, and starts the next token at the next character. Probably nobody ever thought to test for this behavior because it’s not in the SQL standard to specifically reject such input.</div><br/></div></div></div></div></div></div></div></div></div></body></html>