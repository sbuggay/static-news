<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1694768464907" as="style"/><link rel="stylesheet" href="styles.css?v=1694768464907"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/jedisct1/libsodium">Libsodium: A modern, portable, easy to use crypto library</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>randomint64</span> | <span>49 comments</span></div><br/><div><div id="37520229" class="c"><input type="checkbox" id="c-37520229" checked=""/><div class="controls bullet"><span class="by">conradludgate</span><span>|</span><a href="#37519589">next</a><span>|</span><label class="collapse" for="c-37520229">[-]</label><label class="expand" for="c-37520229">[1 more]</label></div><br/><div class="children"><div class="content">Libsodium is a great library, but as I&#x27;m in the Rust ecosystem and since we all must Rewrite it in Rust I am very interested in the RustCrypto project[0].<p>I previously used sodiumoxide[1] libsodium bindings in my projects but they are in maintenance only mode and wouldn&#x27;t accept patches to build on other platforms (we had raspberry pi users complaining they couldn&#x27;t build our software because of sodiumoxide). Maintaining cross platform C libraries which use assembly primitives is pretty tricky. The ring[2] library - which is used by rustls (a better tls library for rust) - is notoriously annoying to cross compile because of its use of C and assembly.<p>[0]: <a href="https:&#x2F;&#x2F;github.com&#x2F;rustcrypto">https:&#x2F;&#x2F;github.com&#x2F;rustcrypto</a>
[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;sodiumoxide&#x2F;sodiumoxide">https:&#x2F;&#x2F;github.com&#x2F;sodiumoxide&#x2F;sodiumoxide</a>
[2]: <a href="https:&#x2F;&#x2F;github.com&#x2F;briansmith&#x2F;ring">https:&#x2F;&#x2F;github.com&#x2F;briansmith&#x2F;ring</a></div><br/></div></div><div id="37519589" class="c"><input type="checkbox" id="c-37519589" checked=""/><div class="controls bullet"><span class="by">loup-vaillant</span><span>|</span><a href="#37520229">prev</a><span>|</span><a href="#37519439">next</a><span>|</span><label class="collapse" for="c-37519589">[-]</label><label class="expand" for="c-37519589">[2 more]</label></div><br/><div class="children"><div class="content">If I recall correctly Libsodium has an official web site: <a href="https:&#x2F;&#x2F;doc.libsodium.org&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;doc.libsodium.org&#x2F;</a><p>No need to link to the repo aggregator.</div><br/><div id="37520064" class="c"><input type="checkbox" id="c-37520064" checked=""/><div class="controls bullet"><span class="by">FrostKiwi</span><span>|</span><a href="#37519589">parent</a><span>|</span><a href="#37519439">next</a><span>|</span><label class="collapse" for="c-37520064">[-]</label><label class="expand" for="c-37520064">[1 more]</label></div><br/><div class="children"><div class="content">&gt; repo aggregator<p>Love it. Has a bit of passive aggressive pizzazz.</div><br/></div></div></div></div><div id="37519439" class="c"><input type="checkbox" id="c-37519439" checked=""/><div class="controls bullet"><span class="by">vishnumohandas</span><span>|</span><a href="#37519589">prev</a><span>|</span><a href="#37519572">next</a><span>|</span><label class="collapse" for="c-37519439">[-]</label><label class="expand" for="c-37519439">[6 more]</label></div><br/><div class="children"><div class="content">This is arguably the safest library you can use if you are adopting crypto. The documentation is a delight to read and the abstractions make it difficult to make mistakes.<p>Fun fact, the author (Frank Denis) is an incredibly talented photographer[1].<p>[1]: <a href="https:&#x2F;&#x2F;prettysimpleimages.format.com&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;prettysimpleimages.format.com&#x2F;</a></div><br/><div id="37519934" class="c"><input type="checkbox" id="c-37519934" checked=""/><div class="controls bullet"><span class="by">ignoramous</span><span>|</span><a href="#37519439">parent</a><span>|</span><a href="#37520046">next</a><span>|</span><label class="collapse" for="c-37519934">[-]</label><label class="expand" for="c-37519934">[3 more]</label></div><br/><div class="children"><div class="content">&gt; <i>This is arguably the safest library you can use if you are adopting crypto. The documentation is a delight to read and the abstractions make it difficult to make mistakes.</i><p>Its Daniel J Bernstein&#x27;s world, we merely live in it:<p>- <a href="http:&#x2F;&#x2F;www.metzdowd.com&#x2F;pipermail&#x2F;cryptography&#x2F;2016-March&#x2F;028824.html" rel="nofollow noreferrer">http:&#x2F;&#x2F;www.metzdowd.com&#x2F;pipermail&#x2F;cryptography&#x2F;2016-March&#x2F;02...</a><p>- <a href="https:&#x2F;&#x2F;cr.yp.to&#x2F;highspeed&#x2F;naclcrypto-20090310.pdf" rel="nofollow noreferrer">https:&#x2F;&#x2F;cr.yp.to&#x2F;highspeed&#x2F;naclcrypto-20090310.pdf</a></div><br/><div id="37520090" class="c"><input type="checkbox" id="c-37520090" checked=""/><div class="controls bullet"><span class="by">sillysaurusx</span><span>|</span><a href="#37519439">root</a><span>|</span><a href="#37519934">parent</a><span>|</span><a href="#37520019">next</a><span>|</span><label class="collapse" for="c-37520090">[-]</label><label class="expand" for="c-37520090">[1 more]</label></div><br/><div class="children"><div class="content">What a fantastic essay. I’ve stolen it and submitted it as a new story.<p>Poor Colin, always having to live in the shadow of the one critical Tarsnap failure due to a missing ++.<p>By the way, what does “oth” stand for in your profile? You’ve made the most extensive tagged list or HN users I’ve ever seen. Thanks for that.</div><br/></div></div><div id="37520019" class="c"><input type="checkbox" id="c-37520019" checked=""/><div class="controls bullet"><span class="by">twsted</span><span>|</span><a href="#37519439">root</a><span>|</span><a href="#37519934">parent</a><span>|</span><a href="#37520090">prev</a><span>|</span><a href="#37520046">next</a><span>|</span><label class="collapse" for="c-37520019">[-]</label><label class="expand" for="c-37520019">[1 more]</label></div><br/><div class="children"><div class="content">Very interesting, thanks for the links.</div><br/></div></div></div></div><div id="37520046" class="c"><input type="checkbox" id="c-37520046" checked=""/><div class="controls bullet"><span class="by">radicalbyte</span><span>|</span><a href="#37519439">parent</a><span>|</span><a href="#37519934">prev</a><span>|</span><a href="#37519534">next</a><span>|</span><label class="collapse" for="c-37520046">[-]</label><label class="expand" for="c-37520046">[1 more]</label></div><br/><div class="children"><div class="content">Fantastic documentation, very easy to use and it has bindings for pretty much every language you can imagine.</div><br/></div></div></div></div><div id="37519572" class="c"><input type="checkbox" id="c-37519572" checked=""/><div class="controls bullet"><span class="by">lcrz</span><span>|</span><a href="#37519439">prev</a><span>|</span><a href="#37519827">next</a><span>|</span><label class="collapse" for="c-37519572">[-]</label><label class="expand" for="c-37519572">[4 more]</label></div><br/><div class="children"><div class="content">Libsodium is an amazing crypto library.<p>At my previous job, we used libsodium as the basis for all our crypto on web, iOS and android. This after a myriad of subtle problems and inconsistencies using multiple libraries for RSA&#x2F;AES.<p>Libsodium is pretty opinionated, which is good. The only thing that actually came close in dev experience was google’s ~~Think~~ Tink library, but that isn’t mature on web and probably never will be.<p>It’s also hella fast.<p>Edit: corrected library name</div><br/><div id="37519585" class="c"><input type="checkbox" id="c-37519585" checked=""/><div class="controls bullet"><span class="by">forty</span><span>|</span><a href="#37519572">parent</a><span>|</span><a href="#37519912">next</a><span>|</span><label class="collapse" for="c-37519585">[-]</label><label class="expand" for="c-37519585">[2 more]</label></div><br/><div class="children"><div class="content">The library is Google Tink (just in case someone wants to look it up)</div><br/><div id="37520035" class="c"><input type="checkbox" id="c-37520035" checked=""/><div class="controls bullet"><span class="by">greenicon</span><span>|</span><a href="#37519572">root</a><span>|</span><a href="#37519585">parent</a><span>|</span><a href="#37519912">next</a><span>|</span><label class="collapse" for="c-37520035">[-]</label><label class="expand" for="c-37520035">[1 more]</label></div><br/><div class="children"><div class="content">I can fully recommend Tink, especially when libsodium isn’t available. Although its documentation isn’t very good, it‘s build to be hard to misuse. You still need some cryptographic knowledge though, as it isn’t that opinionated as libsodium.</div><br/></div></div></div></div></div></div><div id="37519827" class="c"><input type="checkbox" id="c-37519827" checked=""/><div class="controls bullet"><span class="by">Sjoerd</span><span>|</span><a href="#37519572">prev</a><span>|</span><a href="#37519854">next</a><span>|</span><label class="collapse" for="c-37519827">[-]</label><label class="expand" for="c-37519827">[4 more]</label></div><br/><div class="children"><div class="content">When doing symmetric encryption you usually need a nonce or IV, which is also sent to the other party along with the ciphertext and authentication tag. Why does the API for libsodium allow you to specify your own nonce and keeps it separate from the ciphertext? The function crypto_secretbox_easy includes the authentication tag in the ciphertext, but you still have to provide the nonce yourself and it is not included in the ciphertext. Wouldn&#x27;t it be easier still if the nonce was generated within this function and also added to the ciphertext?</div><br/><div id="37520164" class="c"><input type="checkbox" id="c-37520164" checked=""/><div class="controls bullet"><span class="by">conradludgate</span><span>|</span><a href="#37519827">parent</a><span>|</span><a href="#37519933">next</a><span>|</span><label class="collapse" for="c-37520164">[-]</label><label class="expand" for="c-37520164">[1 more]</label></div><br/><div class="children"><div class="content">The docs have a page on encrypting multiple messages[0]. In it they use a single random IV and then increment it for each message. Under this scheme you only need to transmit or negotiate the IV once.<p>If you use something like TLS, The key exchange is expanded to produce an IV. Then each record has an incremented number[1] and this number is mixed with the IV to form a unique IV[2] for the message.<p>[0]: <a href="https:&#x2F;&#x2F;doc.libsodium.org&#x2F;secret-key_cryptography&#x2F;encrypted-messages" rel="nofollow noreferrer">https:&#x2F;&#x2F;doc.libsodium.org&#x2F;secret-key_cryptography&#x2F;encrypted-...</a>
[1]: <a href="https:&#x2F;&#x2F;www.rfc-editor.org&#x2F;rfc&#x2F;rfc8446#section-5.3" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.rfc-editor.org&#x2F;rfc&#x2F;rfc8446#section-5.3</a>
[2]: <a href="https:&#x2F;&#x2F;www.rfc-editor.org&#x2F;rfc&#x2F;rfc8446#appendix-E.2" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.rfc-editor.org&#x2F;rfc&#x2F;rfc8446#appendix-E.2</a></div><br/></div></div><div id="37519933" class="c"><input type="checkbox" id="c-37519933" checked=""/><div class="controls bullet"><span class="by">tux3</span><span>|</span><a href="#37519827">parent</a><span>|</span><a href="#37520164">prev</a><span>|</span><a href="#37520077">next</a><span>|</span><label class="collapse" for="c-37519933">[-]</label><label class="expand" for="c-37519933">[1 more]</label></div><br/><div class="children"><div class="content">That would probably be good for the overwhelming majority of users.<p>More rarely, you want to save space&#x2F;reduce overhead by using a deterministic IV scheme. Either all 0 because you picked a random key and you _really_ care about space saving, or you&#x27;re very very sure you can safely count IVs (0, 1, 2, ..) without ever reusing a single one.<p>In those rare cases you don&#x27;t want to transmit the IV, you just know what the value is supposed to be on both sides. More complexity and danger, but a small percentage of users get to save a few bytes.</div><br/></div></div><div id="37520077" class="c"><input type="checkbox" id="c-37520077" checked=""/><div class="controls bullet"><span class="by">lcrz</span><span>|</span><a href="#37519827">parent</a><span>|</span><a href="#37519933">prev</a><span>|</span><a href="#37519854">next</a><span>|</span><label class="collapse" for="c-37520077">[-]</label><label class="expand" for="c-37520077">[1 more]</label></div><br/><div class="children"><div class="content">I agree. If you look at the Swift version of the library, it will generate and prepend the nonce for you automatically (if you use the right overloaded method). It will also strip it and use it during decryption.<p>My guess is they wanted to maintain compatibility with NaCl.</div><br/></div></div></div></div><div id="37519854" class="c"><input type="checkbox" id="c-37519854" checked=""/><div class="controls bullet"><span class="by">Alifatisk</span><span>|</span><a href="#37519827">prev</a><span>|</span><a href="#37520012">next</a><span>|</span><label class="collapse" for="c-37519854">[-]</label><label class="expand" for="c-37519854">[6 more]</label></div><br/><div class="children"><div class="content">How do C (C99) manage and use libraries from the web?<p>Do I just download the header files and use it that way, or is there a package manager for this?<p>In that case do I manage updates by removing the old header file and download the new version?</div><br/><div id="37519951" class="c"><input type="checkbox" id="c-37519951" checked=""/><div class="controls bullet"><span class="by">eddtests</span><span>|</span><a href="#37519854">parent</a><span>|</span><a href="#37520178">prev</a><span>|</span><a href="#37520045">next</a><span>|</span><label class="collapse" for="c-37519951">[-]</label><label class="expand" for="c-37519951">[1 more]</label></div><br/><div class="children"><div class="content">Someone more experienced at C can jump in and correct me but from my understanding you&#x27;re correct, you download the files. You could use git to create subrepos for dependencies in a directory in your project, too. When I&#x27;ve asked this question before those were the answers I got.</div><br/></div></div><div id="37520045" class="c"><input type="checkbox" id="c-37520045" checked=""/><div class="controls bullet"><span class="by">bandrami</span><span>|</span><a href="#37519854">parent</a><span>|</span><a href="#37519951">prev</a><span>|</span><a href="#37519957">next</a><span>|</span><label class="collapse" for="c-37520045">[-]</label><label class="expand" for="c-37520045">[1 more]</label></div><br/><div class="children"><div class="content">This reminds me of the time a younger coworker asked me if there&#x27;s a way to run a diff without putting the files in a git repo first. Some questions never even occur to us geezers to ask...<p>(Not razzing you or anything; I just genuinely found that question startling, having started programming in the 1990s.)</div><br/></div></div><div id="37519957" class="c"><input type="checkbox" id="c-37519957" checked=""/><div class="controls bullet"><span class="by">arianvanp</span><span>|</span><a href="#37519854">parent</a><span>|</span><a href="#37520045">prev</a><span>|</span><a href="#37519891">next</a><span>|</span><label class="collapse" for="c-37519957">[-]</label><label class="expand" for="c-37519957">[1 more]</label></div><br/><div class="children"><div class="content">I use Nix as a package manager for my C projects. It works very well and has out of the box support for most C build systems (make, autotools, cmake, meson)</div><br/></div></div></div></div><div id="37520012" class="c"><input type="checkbox" id="c-37520012" checked=""/><div class="controls bullet"><span class="by">datadeft</span><span>|</span><a href="#37519854">prev</a><span>|</span><a href="#37520119">next</a><span>|</span><label class="collapse" for="c-37520012">[-]</label><label class="expand" for="c-37520012">[1 more]</label></div><br/><div class="children"><div class="content">List of authors is crazy.<p><a href="https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;jedisct1&#x2F;libsodium&#x2F;master&#x2F;AUTHORS" rel="nofollow noreferrer">https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;jedisct1&#x2F;libsodium&#x2F;master&#x2F;...</a></div><br/></div></div><div id="37520119" class="c"><input type="checkbox" id="c-37520119" checked=""/><div class="controls bullet"><span class="by">olabyne</span><span>|</span><a href="#37520012">prev</a><span>|</span><a href="#37519568">next</a><span>|</span><label class="collapse" for="c-37520119">[-]</label><label class="expand" for="c-37520119">[1 more]</label></div><br/><div class="children"><div class="content">don&#x27;t forget <a href="https:&#x2F;&#x2F;github.com&#x2F;jedisct1&#x2F;libhydrogen">https:&#x2F;&#x2F;github.com&#x2F;jedisct1&#x2F;libhydrogen</a> for microcontrollers</div><br/></div></div><div id="37519568" class="c"><input type="checkbox" id="c-37519568" checked=""/><div class="controls bullet"><span class="by">brucethemoose2</span><span>|</span><a href="#37520119">prev</a><span>|</span><a href="#37519668">next</a><span>|</span><label class="collapse" for="c-37519568">[-]</label><label class="expand" for="c-37519568">[2 more]</label></div><br/><div class="children"><div class="content">Not to be confused with Sodium, the Minecraft rendering engine rewrite: <a href="https:&#x2F;&#x2F;modrinth.com&#x2F;mod&#x2F;sodium" rel="nofollow noreferrer">https:&#x2F;&#x2F;modrinth.com&#x2F;mod&#x2F;sodium</a></div><br/></div></div><div id="37519668" class="c"><input type="checkbox" id="c-37519668" checked=""/><div class="controls bullet"><span class="by">ggm</span><span>|</span><a href="#37519568">prev</a><span>|</span><a href="#37520011">next</a><span>|</span><label class="collapse" for="c-37519668">[-]</label><label class="expand" for="c-37519668">[1 more]</label></div><br/><div class="children"><div class="content">Google search suggests there are already implications of QUIC, TLS and SSH which use libsodium.<p>Given the dependency of Web and login on both, I like this.</div><br/></div></div><div id="37520049" class="c"><input type="checkbox" id="c-37520049" checked=""/><div class="controls bullet"><span class="by">deterministic</span><span>|</span><a href="#37520011">prev</a><span>|</span><a href="#37519466">next</a><span>|</span><label class="collapse" for="c-37520049">[-]</label><label class="expand" for="c-37520049">[1 more]</label></div><br/><div class="children"><div class="content">Or perhaps use a crypto library that is actually <i>formally</i> proven correct:<p><a href="https:&#x2F;&#x2F;project-everest.github.io&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;project-everest.github.io&#x2F;</a></div><br/></div></div></div></div></div></div></div></body></html>