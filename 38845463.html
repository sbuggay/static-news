<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1704445253794" as="style"/><link rel="stylesheet" href="styles.css?v=1704445253794"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://netmeister.org/blog/https-rrs.html">Use of HTTPS Resource Records</a> <span class="domain">(<a href="https://netmeister.org">netmeister.org</a>)</span></div><div class="subtext"><span>campuscodi</span> | <span>29 comments</span></div><br/><div><div id="38874502" class="c"><input type="checkbox" id="c-38874502" checked=""/><div class="controls bullet"><span class="by">woodruffw</span><span>|</span><a href="#38873879">next</a><span>|</span><label class="collapse" for="c-38874502">[-]</label><label class="expand" for="c-38874502">[3 more]</label></div><br/><div class="children"><div class="content">Very cool. It&#x27;s a bummer it only works in Firefox with DoH, though. I couldn&#x27;t find an explanation for why that is in the associated changeset[1].<p>(I would use DoH on my devices, but I run a local resolver for filtering purposes. The local resolver then connects to a global NS via DoH, but my local devices use plain old DNS.)<p>[1]: <a href="https:&#x2F;&#x2F;bugzilla.mozilla.org&#x2F;show_bug.cgi?id=1623126" rel="nofollow">https:&#x2F;&#x2F;bugzilla.mozilla.org&#x2F;show_bug.cgi?id=1623126</a></div><br/><div id="38875725" class="c"><input type="checkbox" id="c-38875725" checked=""/><div class="controls bullet"><span class="by">thayne</span><span>|</span><a href="#38874502">parent</a><span>|</span><a href="#38875614">next</a><span>|</span><label class="collapse" for="c-38875725">[-]</label><label class="expand" for="c-38875725">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s because Firefox uses its own dns resolver when it uses DoH, but if DoH is disabled it just calls getaddrinfo from libc to look up a domain. And unfortunately getaddrinfo is a very minimal API, that doesn&#x27;t have any way to resolve arbitrary record types like HTTPS or SVCB, it just returns ip addresses. There is a bug[1] for supporting HTTPS records when using the system dns, but I haven&#x27;t seen much progress on it. And sadly, it probably requires different code for each OS.<p>[1]: <a href="https:&#x2F;&#x2F;bugzilla.mozilla.org&#x2F;show_bug.cgi?id=1852752" rel="nofollow">https:&#x2F;&#x2F;bugzilla.mozilla.org&#x2F;show_bug.cgi?id=1852752</a></div><br/></div></div><div id="38875614" class="c"><input type="checkbox" id="c-38875614" checked=""/><div class="controls bullet"><span class="by">sillystuff</span><span>|</span><a href="#38874502">parent</a><span>|</span><a href="#38875725">prev</a><span>|</span><a href="#38873879">next</a><span>|</span><label class="collapse" for="c-38875614">[-]</label><label class="expand" for="c-38875614">[1 more]</label></div><br/><div class="children"><div class="content">Depending on your local resolver, you possibly can provide DoH on localhost as well?  I&#x27;m using unbound, and it was trivial to also provide DoH on localhost with a funky port, so 443 localhost remains available for other things (my motivation was that firefox also doesn&#x27;t support ESNI without a DoH resolver; I assume this is still true for ECH as well, but haven&#x27;t re-visited).<p>For firefox, you can use a self-signed cert on your resolver (firefox did not work with ed25519, it did work with NIST P-256; I wanted a small key for lower overhead [having to use TLS + HTTP encapsulation for a resolver on localhost bothered me in irrational ways, and I was determined to minimize the overhead, even if the rational part of my brain said the overhead difference was too negligible to matter]).  Add it with:<p>edit-&gt; settings -&gt; (search &quot;cert&quot; in &#x27;find in settings&#x27;) -&gt; view certificates -&gt; (server tab) -&gt; add exception -&gt; enter the url:
  <a href="https:&#x2F;&#x2F;localhost:4353&#x2F;dns-query" rel="nofollow">https:&#x2F;&#x2F;localhost:4353&#x2F;dns-query</a>
ensure &quot;permanent&quot; is checked<p>The file, &quot;cert_override.txt&quot; is created by firefox after adding the cert exception, which can be copied to other profiles for provisioning.<p>The gui DoH config will create the following in about:config which can be used for provisioning with user.js:<p><pre><code>  network.trr.uri       https:&#x2F;&#x2F;localhost:4353&#x2F;dns-query
  network.trr.bootstrapAddress  127.0.0.1
  network.trr.mode      3
  trr   true
  (network.trr.custom_uri is not used for anything but display in the gui)
  network.trr.custom_uri        https:&#x2F;&#x2F;localhost:4353&#x2F;dns-query
</code></pre>
I don&#x27;t think chromium requires DoH for ESNI &#x2F; HTTPSSVC, so it can just use plain-text localhost:53 as before.  If it does need DoH for this, I do not know the equivalent to the above config, for chromium.</div><br/></div></div></div></div><div id="38873879" class="c"><input type="checkbox" id="c-38873879" checked=""/><div class="controls bullet"><span class="by">zamadatix</span><span>|</span><a href="#38874502">prev</a><span>|</span><a href="#38875327">next</a><span>|</span><label class="collapse" for="c-38873879">[-]</label><label class="expand" for="c-38873879">[1 more]</label></div><br/><div class="children"><div class="content">This prompted me to try adding an HTTPS record for my home website. Worked fine in bind, didn&#x27;t take much work. Between A, AAAA, and HTTPS it is getting to be quite a lot to maintain vs the days of just having an A record. Of course, just having an A record is still a valid option (for now) if that&#x27;s your main concern.</div><br/></div></div><div id="38875327" class="c"><input type="checkbox" id="c-38875327" checked=""/><div class="controls bullet"><span class="by">Ayesh</span><span>|</span><a href="#38873879">prev</a><span>|</span><a href="#38874168">next</a><span>|</span><label class="collapse" for="c-38875327">[-]</label><label class="expand" for="c-38875327">[2 more]</label></div><br/><div class="children"><div class="content">I recently added HTTPS records to all of my domains, along with HTTP&#x2F;3.<p>From query statistics, I see that around 15% of the queries are for HTTPS records, 30-35% for A and AAAA records, and the rest for RR types like NS, TXT, etc. 
Browsers make HTTPS requests in addition to the A&#x2F;AAAA, so this makes sense.<p>In an ideal world, the ipv4&#x2F;ipv6hints do the job if A and AAAA records, so a browser will only need to make an HTTPS request.</div><br/><div id="38875536" class="c"><input type="checkbox" id="c-38875536" checked=""/><div class="controls bullet"><span class="by">chrismorgan</span><span>|</span><a href="#38875327">parent</a><span>|</span><a href="#38874168">next</a><span>|</span><label class="collapse" for="c-38875536">[-]</label><label class="expand" for="c-38875536">[1 more]</label></div><br/><div class="children"><div class="content">Note that ipv4hint and ipv6hint are not supposed to replace A&#x2F;AAAA &lt;<a href="https:&#x2F;&#x2F;www.rfc-editor.org&#x2F;rfc&#x2F;rfc9460#name-ipv4hint-and-ipv6hint" rel="nofollow">https:&#x2F;&#x2F;www.rfc-editor.org&#x2F;rfc&#x2F;rfc9460#name-ipv4hint-and-ipv...</a>&gt;:<p>&gt; <i>The &quot;ipv4hint&quot; and &quot;ipv6hint&quot; keys convey IP addresses that clients MAY use to reach the service. If A and AAAA records for TargetName are locally available, the client SHOULD ignore these hints. Otherwise, clients SHOULD perform A and&#x2F;or AAAA queries for TargetName per Section 3, and clients SHOULD use the IP address in those responses for future connections. Clients MAY opt to terminate any connections using the addresses in hints and instead switch to the addresses in response to the TargetName query. Failure to use A and&#x2F;or AAAA response addresses could negatively impact load balancing or other geo-aware features and thereby degrade client performance.</i><p>That is: you’re <i>allowed</i> to use the ipv4hint on this connection, but you <i>should</i> still fetch A&#x2F;AAAA and use that subsequently.</div><br/></div></div></div></div><div id="38874168" class="c"><input type="checkbox" id="c-38874168" checked=""/><div class="controls bullet"><span class="by">josephg</span><span>|</span><a href="#38875327">prev</a><span>|</span><a href="#38874979">next</a><span>|</span><label class="collapse" for="c-38874168">[-]</label><label class="expand" for="c-38874168">[20 more]</label></div><br/><div class="children"><div class="content">Cool! I had no idea this was a thing. Looks way more elegant than HSTS and all that mess.<p>Whats the status on DNSSEC? Last I checked, it was a bit of a mess as far as protocols go.</div><br/><div id="38875333" class="c"><input type="checkbox" id="c-38875333" checked=""/><div class="controls bullet"><span class="by">jeroenhd</span><span>|</span><a href="#38874168">parent</a><span>|</span><a href="#38874435">next</a><span>|</span><label class="collapse" for="c-38875333">[-]</label><label class="expand" for="c-38875333">[5 more]</label></div><br/><div class="children"><div class="content">DNSSEC is widely supported and used in some countries but practically unused in others (<a href="https:&#x2F;&#x2F;stats.labs.apnic.net&#x2F;dnssec" rel="nofollow">https:&#x2F;&#x2F;stats.labs.apnic.net&#x2F;dnssec</a>)<p>How easy it is to set up depends on where you host and bought your domain. In my experience, I needed to copy-paste two keys and it Just Worked.<p>It&#x27;s barely used in .COM though, so companies like Amazon took ages to implement even basic support for it, and their buggy services took down various websites.<p>To top it all off, mistakes by badly managed TLDs caused downtimes for various TLDs over time, of &quot;someone told the root servers to redirect .NZ to localhost for a week&quot; severity. If whoever is managing your TLD cannot be trusted to maintain a TLD, don&#x27;t enable DNSSEC.<p>The protocol is Very 90s (&quot;computers aren&#x27;t fast enough to validate RSA signatures so let&#x27;s centralise it&quot;), but modern clients take all of the 90s bullcrap out of the picture. DNSSEC is in dire need of a v2 that fixes this, but I&#x27;ve never had much trouble with it in practice, other than when websites misconfigure their DNSSEC config.</div><br/><div id="38875825" class="c"><input type="checkbox" id="c-38875825" checked=""/><div class="controls bullet"><span class="by">thayne</span><span>|</span><a href="#38874168">root</a><span>|</span><a href="#38875333">parent</a><span>|</span><a href="#38874435">next</a><span>|</span><label class="collapse" for="c-38875825">[-]</label><label class="expand" for="c-38875825">[4 more]</label></div><br/><div class="children"><div class="content">&gt; other than when websites misconfigure their DNSSEC config<p>One major problem with DNSSEC is that it is relatively easy to misconfigure it, especially in more complicated scenarios, and a misconfiguration can take you down for a long time.</div><br/><div id="38876087" class="c"><input type="checkbox" id="c-38876087" checked=""/><div class="controls bullet"><span class="by">bodgie</span><span>|</span><a href="#38874168">root</a><span>|</span><a href="#38875825">parent</a><span>|</span><a href="#38874435">next</a><span>|</span><label class="collapse" for="c-38876087">[-]</label><label class="expand" for="c-38876087">[3 more]</label></div><br/><div class="children"><div class="content">It can also be quite easy. Buggy complicated Route 53 and self-hosting with a buggy bespoke solution aren&#x27;t the only options, but they are the only kinds of DNSSEC failures I&#x27;ve seen on the HN front page.</div><br/><div id="38876510" class="c"><input type="checkbox" id="c-38876510" checked=""/><div class="controls bullet"><span class="by">tptacek</span><span>|</span><a href="#38874168">root</a><span>|</span><a href="#38876087">parent</a><span>|</span><a href="#38874435">next</a><span>|</span><label class="collapse" for="c-38876510">[-]</label><label class="expand" for="c-38876510">[2 more]</label></div><br/><div class="children"><div class="content">The only failures you see on the HN front page are the ones that occur to gigantic companies we&#x27;ve all heard of, with huge networking teams and all the advantages you can ask for in getting DNSSEC working. When random small shops fall off the Internet because they broke DNSSEC, nobody cares; it never makes any front page anywhere.</div><br/><div id="38876549" class="c"><input type="checkbox" id="c-38876549" checked=""/><div class="controls bullet"><span class="by">bodgie</span><span>|</span><a href="#38874168">root</a><span>|</span><a href="#38876510">parent</a><span>|</span><a href="#38874435">next</a><span>|</span><label class="collapse" for="c-38876549">[-]</label><label class="expand" for="c-38876549">[1 more]</label></div><br/><div class="children"><div class="content">I would dispute that the entities that make the HN homepage have all the advantages. Off the top of my head, Slack clearly did not have in-house DNS expertise though they could have if they valued it, and &#x27;.nz&#x27; seems to be run by at best a skeleton crew.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="38874435" class="c"><input type="checkbox" id="c-38874435" checked=""/><div class="controls bullet"><span class="by">tptacek</span><span>|</span><a href="#38874168">parent</a><span>|</span><a href="#38875333">prev</a><span>|</span><a href="#38874979">next</a><span>|</span><label class="collapse" for="c-38874435">[-]</label><label class="expand" for="c-38874435">[14 more]</label></div><br/><div class="children"><div class="content">It is deployed on less than 5% of .COM, and an even smaller fraction of &quot;important&quot; or &quot;popular&quot; zones (take any top 500, run it through a loop of `dig ds $domain +short`; try &quot;microsoft.com&quot; and &quot;google.com&quot;, and then &quot;uscis.dhs.gov&quot; to see what a positive response looks like).<p>IIRC, there have been recent years where the deployment count in .COM went <i>down</i>.<p>It&#x27;s pretty much a dead letter.</div><br/><div id="38874532" class="c"><input type="checkbox" id="c-38874532" checked=""/><div class="controls bullet"><span class="by">teddyh</span><span>|</span><a href="#38874168">root</a><span>|</span><a href="#38874435">parent</a><span>|</span><a href="#38874979">next</a><span>|</span><label class="collapse" for="c-38874532">[-]</label><label class="expand" for="c-38874532">[13 more]</label></div><br/><div class="children"><div class="content">Almost every time anyone mentions DNSSEC here on HN, you pop up like a jack-in-the-box to claim that nobody is using it and that it is dead. And it’s always <i>you</i>, nobody else. Whereas, from where I sit, I work at a registry and DNS server host (among other things) where about 40% of all our domains have DNSSEC (and that number is constantly climbing). Every conference I go to, and in every webinar, people seemingly always talk about DNSSEC and how usage is increasing.<p>You might have some valid criticism about the cryptography; I would not be able to judge that (except when you are basing it on wildly outdated information). I’m not an expert on the details; you could most assuredly argue circles around me when it comes to the cryptography, and possibly about the DNSSEC protocol details as well. But, from my perspective, your continuous claim that “nobody uses” DNSSEC is simply false. DNSSEC works, usage of DNSSEC is steadily increasing, and new protocols (like DANE) are starting to make use of DNSSEC for its features. Conversely, I only relatively rarely hear anything about MTA-STS.<p>(Repost of a two year old comment of mine: &lt;<a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=27837530">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=27837530</a>&gt;, but the details given have not changed substantially.)</div><br/><div id="38874946" class="c"><input type="checkbox" id="c-38874946" checked=""/><div class="controls bullet"><span class="by">tptacek</span><span>|</span><a href="#38874168">root</a><span>|</span><a href="#38874532">parent</a><span>|</span><a href="#38875907">next</a><span>|</span><label class="collapse" for="c-38874946">[-]</label><label class="expand" for="c-38874946">[5 more]</label></div><br/><div class="children"><div class="content">(I vouched this comment, because I wanted to reply to it.)<p>I&#x27;m not making the statistics up; you can just Google &quot;DNSSEC deployment statistics&quot; to see that I&#x27;m right about them, and I even provided a methodology in the comment you responded to for readers to verify for themselves.<p>Where DNSSEC signatures are climbing, it&#x27;s largely because of registrars that automatically sign domains for customers. That&#x27;s security theater. Moreover, it&#x27;s capturing the least interesting cohort of new DNS zones: random things people register. I own a bunch of them, including &quot;atmosflat.org&quot; and &quot;paulgra-ham.com&quot; (don&#x27;t ask me, I don&#x27;t remember). If I had registered them at an autosigning DNSSEC registrar, they too would count in the &quot;steadily increasing&quot; count to which you refer.</div><br/><div id="38875017" class="c"><input type="checkbox" id="c-38875017" checked=""/><div class="controls bullet"><span class="by">chrismorgan</span><span>|</span><a href="#38874168">root</a><span>|</span><a href="#38874946">parent</a><span>|</span><a href="#38875907">next</a><span>|</span><label class="collapse" for="c-38875017">[-]</label><label class="expand" for="c-38875017">[4 more]</label></div><br/><div class="children"><div class="content">Why&#x2F;how is automatic signing of domains security theatre? As one not particularly involved, I’d have thought that was the goal, and certainly the only way you’re ever going to get anything but niche usage.</div><br/><div id="38875062" class="c"><input type="checkbox" id="c-38875062" checked=""/><div class="controls bullet"><span class="by">tptacek</span><span>|</span><a href="#38874168">root</a><span>|</span><a href="#38875017">parent</a><span>|</span><a href="#38875907">next</a><span>|</span><label class="collapse" for="c-38875062">[-]</label><label class="expand" for="c-38875062">[3 more]</label></div><br/><div class="children"><div class="content">The registrar controls your keys. Further: virtually all DNS hijacking happens via registrars, not the on- and off-path network attacks on the DNS that DNSSEC attempts to defend against.<p>(I&#x27;m focused on the stats argument here, because I feel like &#x27;teddyh was trying to imply that I was making them up --- he only ever sees me relating them, to which I&#x27;d respond &quot;that&#x27;s because nobody else cares about DNSSEC&quot;. I have, an, uh, pretty expansive case to make against DNSSEC, but here I was just sort of relying on context &#x27;teddyh and I share. Sorry about that!)</div><br/><div id="38876000" class="c"><input type="checkbox" id="c-38876000" checked=""/><div class="controls bullet"><span class="by">alwillis</span><span>|</span><a href="#38874168">root</a><span>|</span><a href="#38875062">parent</a><span>|</span><a href="#38875907">next</a><span>|</span><label class="collapse" for="c-38876000">[-]</label><label class="expand" for="c-38876000">[2 more]</label></div><br/><div class="children"><div class="content">&gt; The registrar controls your keys.<p>I&#x27;ve been managing domains with DNSSEC for several years and I&#x27;ve always had control of my keys.<p>Clarification of who controls what keys [1]:<p><pre><code>    The TLD zone&#x27;s private keys are managed by the company operating
    it. For a Country Code Top-Level Domain (ccTLD), the government of
    the country will be managing the key. For popular TLDs like .COM or
   .NET, it will be the U.S. government through the operator Verisign.
   
   For popular ccTLD .IO, it is the government of British Indian Ocean
   Territory.

   The private keys for an individual domain name are managed by the
   domain owner either directly or via the DNS provider hosting their
   domain name.

   With DNSSEC, it is pretty clear who controls the private keys and
   also keeps the risks involved distributed. Which means while China
   holds private keys for .cn ccTLD, it can only sign domain names under
   it.

</code></pre>
[1]: <a href="https:&#x2F;&#x2F;blog.technitium.com&#x2F;2023&#x2F;05&#x2F;for-dnssec-and-why-dane-is-needed.html" rel="nofollow">https:&#x2F;&#x2F;blog.technitium.com&#x2F;2023&#x2F;05&#x2F;for-dnssec-and-why-dane-...</a></div><br/><div id="38876022" class="c"><input type="checkbox" id="c-38876022" checked=""/><div class="controls bullet"><span class="by">tptacek</span><span>|</span><a href="#38874168">root</a><span>|</span><a href="#38876000">parent</a><span>|</span><a href="#38875907">next</a><span>|</span><label class="collapse" for="c-38876022">[-]</label><label class="expand" for="c-38876022">[1 more]</label></div><br/><div class="children"><div class="content">You&#x27;ve misunderstood the point. I&#x27;m not claiming that DNSSEC doesn&#x27;t allow you to manage your own keys! I&#x27;m saying that the hundreds of thousands of auto-signed zones at registrars that just enable DNSSEC by default don&#x27;t have end-user managed keys.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="38875907" class="c"><input type="checkbox" id="c-38875907" checked=""/><div class="controls bullet"><span class="by">alwillis</span><span>|</span><a href="#38874168">root</a><span>|</span><a href="#38874532">parent</a><span>|</span><a href="#38874946">prev</a><span>|</span><a href="#38874979">next</a><span>|</span><label class="collapse" for="c-38875907">[-]</label><label class="expand" for="c-38875907">[7 more]</label></div><br/><div class="children"><div class="content">&gt; Almost every time anyone mentions DNSSEC here on HN, you pop up like a jack-in-the-box to claim that nobody is using it and that it is dead. And it’s always you, nobody else.<p>Yup.<p>&gt; You might have some valid criticism about the cryptography; I would not be able to judge that (except when you are basing it on wildly outdated information).<p>Yes—context matters. Unless someone knows the details of how DNSSEC works, they wouldn&#x27;t necessarily recognize how disingenuous chronic DNSSEC detractors often are.<p>In addition to DANE, I&#x27;d also add SSHFP [1], another protocol enabled by DNSSEC that addresses SSH&#x27;s default trust on first use (TOFU) issue in a pretty straightforward way.<p>Anyone new just has to read &quot;For DNSSEC And Why DANE Is Needed&quot; [2], where the author debunks the talking points that DNSSEC detractors often use. There&#x27;s often a hint of truth to these talking points but the reality is more nuanced than they would lead you to believe.<p>[1]: <a href="https:&#x2F;&#x2F;www.redpill-linpro.com&#x2F;techblog&#x2F;2019&#x2F;05&#x2F;06&#x2F;sshfp-and-dnssec.html" rel="nofollow">https:&#x2F;&#x2F;www.redpill-linpro.com&#x2F;techblog&#x2F;2019&#x2F;05&#x2F;06&#x2F;sshfp-and...</a><p>[2]: <a href="https:&#x2F;&#x2F;blog.technitium.com&#x2F;2023&#x2F;05&#x2F;for-dnssec-and-why-dane-is-needed.html" rel="nofollow">https:&#x2F;&#x2F;blog.technitium.com&#x2F;2023&#x2F;05&#x2F;for-dnssec-and-why-dane-...</a></div><br/><div id="38875989" class="c"><input type="checkbox" id="c-38875989" checked=""/><div class="controls bullet"><span class="by">tptacek</span><span>|</span><a href="#38874168">root</a><span>|</span><a href="#38875907">parent</a><span>|</span><a href="#38876135">next</a><span>|</span><label class="collapse" for="c-38875989">[-]</label><label class="expand" for="c-38875989">[2 more]</label></div><br/><div class="children"><div class="content">I can&#x27;t think of a less compelling DNSSEC use-case than enrolling your own SSH servers, which <i>strangers on the Internet never log into</i>, into a global PKI. That&#x27;s a complete mismatch of threat models. Why would you give the United States Government a say in whether you trust your own server? It&#x27;s your own server! You don&#x27;t have the problem DNSSEC tries to solve.<p>I don&#x27;t like trust-on-first-use either. Fortunately, it&#x27;s easy to solve: just use an SSH CA, which is what most shops with significant numbers of servers do (because it&#x27;s drastically easier to administer than individual keys).<p>I&#x27;ve never seen this &quot;technitium&quot; blog before. It&#x27;s very long. If you want to see me pick it apart, submit it tomorrow and see if you can get it on the front page. Very few people are reading this thread, so I&#x27;m definitely not going to close-read it just for this.</div><br/><div id="38876703" class="c"><input type="checkbox" id="c-38876703" checked=""/><div class="controls bullet"><span class="by">alwillis</span><span>|</span><a href="#38874168">root</a><span>|</span><a href="#38875989">parent</a><span>|</span><a href="#38876135">next</a><span>|</span><label class="collapse" for="c-38876703">[-]</label><label class="expand" for="c-38876703">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Fortunately, it&#x27;s easy to solve: just use an SSH CA<p>Sure, you could use SSH certificates, but that does mean deploying user certificates to your users and server certificates to your servers, etc. And for some use cases, this would be the right thing to do.<p>Yes, a 10,000 person enterprise with dozens of servers <i>should</i> use SSH certificates. On the other hand, using SSHFP is also a viable solution, depending on the use case. In general, it&#x27;s less work than creating a SSH CA, signing keys, distributing certificates, etc, especially when SSH certificates would be overkill.<p>On the other hand, with SSHFP, you run ssh-keygen -r examplehost.example.org and add the records to the server&#x27;s DNS configuration.<p>On the client side, a user adds VerifyHostKeyDNS yes to their OpenSSH configuration and they&#x27;re done.<p>&gt; Why would you give the United States Government a say in whether you trust your own server? It&#x27;s your own server!<p>SSHFP records are just the fingerprint of the server&#x27;s public keys—no 3rd party has a say in the ssh-keygen command generating the records. I just made some SSHFP records—no government involved:<p><pre><code>                 SSHFP &lt;KEY-ALGO&gt; &lt;HASH-TYPE&gt; &lt;FINGERPRINT&gt;

    localhost IN SSHFP 1 1 78aefcdf726dfd71160c8dd9e31b385174da4189
    localhost IN SSHFP 1 2 830313e0f1c70de6db7431f22f488e715f5882b7ad82a11bcb0b784fba618cfc
    localhost IN SSHFP 3 1 8140d1ed33ee45e0d078e1c0ef61df03332eac5c
    localhost IN SSHFP 3 2 748fdd9a6795626ec4c201cc41fb62c7407227db3e810e1a26d2e0b8cb82e896
    localhost IN SSHFP 4 1 c75294aa5909c2dbfcd5606005bc4f2d1ec37ff6
    localhost IN SSHFP 4 2 795480afe1777c3438f40bc269c25667cf366ef24c14f264456ff10844b818fb



    KEY-ALGO Algorithm
    0          reserved
    1          RSA
    2          DSA
    3          ECDSA
    4          ED25519
    5          unassigned
    6          ED448

    HASH-TYPE Algorithm
    0          reserved
    1          SHA1
    2          SHA256
</code></pre>
The role that DNSSEC plays is ensuring that when a SSH client does a DNS lookup, it can trust the DNS reply hasn&#x27;t been tampered with.</div><br/></div></div></div></div><div id="38876135" class="c"><input type="checkbox" id="c-38876135" checked=""/><div class="controls bullet"><span class="by">akerl_</span><span>|</span><a href="#38874168">root</a><span>|</span><a href="#38875907">parent</a><span>|</span><a href="#38875989">prev</a><span>|</span><a href="#38874979">next</a><span>|</span><label class="collapse" for="c-38876135">[-]</label><label class="expand" for="c-38876135">[4 more]</label></div><br/><div class="children"><div class="content">Didn&#x27;t both Chrome and Firefox decline to include DANE support?</div><br/><div id="38876332" class="c"><input type="checkbox" id="c-38876332" checked=""/><div class="controls bullet"><span class="by">bodgie</span><span>|</span><a href="#38874168">root</a><span>|</span><a href="#38876135">parent</a><span>|</span><a href="#38874979">next</a><span>|</span><label class="collapse" for="c-38876332">[-]</label><label class="expand" for="c-38876332">[3 more]</label></div><br/><div class="children"><div class="content">Yes however DANE is not just for web use cases.</div><br/><div id="38876363" class="c"><input type="checkbox" id="c-38876363" checked=""/><div class="controls bullet"><span class="by">akerl_</span><span>|</span><a href="#38874168">root</a><span>|</span><a href="#38876332">parent</a><span>|</span><a href="#38874979">next</a><span>|</span><label class="collapse" for="c-38876363">[-]</label><label class="expand" for="c-38876363">[2 more]</label></div><br/><div class="children"><div class="content">Is there any use case that&#x27;s actively deployed, where DANE is being used? I tried to look up use cases that exist today, and it seems like it&#x27;s &quot;people who run their own postfix&#x2F;exim servers&quot;, 2 niche email providers, and... GPG?</div><br/><div id="38876425" class="c"><input type="checkbox" id="c-38876425" checked=""/><div class="controls bullet"><span class="by">bodgie</span><span>|</span><a href="#38874168">root</a><span>|</span><a href="#38876363">parent</a><span>|</span><a href="#38874979">next</a><span>|</span><label class="collapse" for="c-38876425">[-]</label><label class="expand" for="c-38876425">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t follow DANE but I think support among the mail community is wider than you suggest unless Microsoft Exchange Online is one of the niche email providers you&#x27;re referring to.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="38874979" class="c"><input type="checkbox" id="c-38874979" checked=""/><div class="controls bullet"><span class="by">remram</span><span>|</span><a href="#38874168">prev</a><span>|</span><label class="collapse" for="c-38874979">[-]</label><label class="expand" for="c-38874979">[2 more]</label></div><br/><div class="children"><div class="content">Is there any guide for setting up ECH? Are we waiting for support in HTTPS server software?</div><br/><div id="38875358" class="c"><input type="checkbox" id="c-38875358" checked=""/><div class="controls bullet"><span class="by">Ayesh</span><span>|</span><a href="#38874979">parent</a><span>|</span><label class="collapse" for="c-38875358">[-]</label><label class="expand" for="c-38875358">[1 more]</label></div><br/><div class="children"><div class="content">OpenSSL and Go crypt&#x2F;tls has no support yet, so none of the webservers that depend on them support it. Apache, Nginx, and Caddy, they all need upstream ECH support first.<p>- <a href="https:&#x2F;&#x2F;github.com&#x2F;openssl&#x2F;openssl&#x2F;issues&#x2F;7482">https:&#x2F;&#x2F;github.com&#x2F;openssl&#x2F;openssl&#x2F;issues&#x2F;7482</a><p>- <a href="https:&#x2F;&#x2F;github.com&#x2F;openssl&#x2F;openssl&#x2F;pull&#x2F;22938">https:&#x2F;&#x2F;github.com&#x2F;openssl&#x2F;openssl&#x2F;pull&#x2F;22938</a><p>- <a href="https:&#x2F;&#x2F;github.com&#x2F;golang&#x2F;go&#x2F;issues&#x2F;63369">https:&#x2F;&#x2F;github.com&#x2F;golang&#x2F;go&#x2F;issues&#x2F;63369</a></div><br/></div></div></div></div></div></div></div></div></div></body></html>