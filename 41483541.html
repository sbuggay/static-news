<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1725872472874" as="style"/><link rel="stylesheet" href="styles.css?v=1725872472874"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://blog.razzsecurity.com/2024/09/08/exploitation-research/exploiting-ci-cd-pipelines-for-fun-and-profit/">Exploiting CI / CD Pipelines for fun and profit</a> <span class="domain">(<a href="https://blog.razzsecurity.com">blog.razzsecurity.com</a>)</span></div><div class="subtext"><span>mukesh610</span> | <span>17 comments</span></div><br/><div><div id="41484474" class="c"><input type="checkbox" id="c-41484474" checked=""/><div class="controls bullet"><span class="by">theamk</span><span>|</span><a href="#41484209">next</a><span>|</span><label class="collapse" for="c-41484474">[-]</label><label class="expand" for="c-41484474">[3 more]</label></div><br/><div class="children"><div class="content">The real problem is keeping sensetive information in .git directory. Like WTH would you put your password, in plaintext, in some general ini file? (or into a source file for that matter)?<p>When I see things like those, they look so wrong to me. But sadly it&#x27;s apparently uncommon nowadays: not only random bloggers, even my coworkers see nothing wrong with putting passwords or tokens into general config or source code files. &quot;it&#x27;s just for a quick test&quot;1 they say and then they forget about it and the password is getting checked in, or shown at screenshare meeting.<p>Maybe that&#x27;s why there are so many security problems in industry? &#x2F;rant<p>(For those curious: for git specifically, use ssh with key auth. If for some reason you don&#x27;t want this, you can set up git&#x27;s credential helper to use your OS key store; or use plaintext git-crendetials, or even just good-old .netrc. For source code, something like  &quot;PASSWORD = open(&quot;&#x2F;home&#x2F;user&#x2F;.config&#x2F;mypass.txt&quot;).read().strip()&quot; is barely longer than hardcoding it, but 100% eliminates chance of accidental secret checkin or upload)</div><br/><div id="41484527" class="c"><input type="checkbox" id="c-41484527" checked=""/><div class="controls bullet"><span class="by">voiceblue</span><span>|</span><a href="#41484474">parent</a><span>|</span><a href="#41485980">next</a><span>|</span><label class="collapse" for="c-41484527">[-]</label><label class="expand" for="c-41484527">[1 more]</label></div><br/><div class="children"><div class="content">&gt; 100% eliminates chance of accidental secret checkin or upload<p>You&#x27;ve never worked with humans, have you?</div><br/></div></div><div id="41485980" class="c"><input type="checkbox" id="c-41485980" checked=""/><div class="controls bullet"><span class="by">jbverschoor</span><span>|</span><a href="#41484474">parent</a><span>|</span><a href="#41484527">prev</a><span>|</span><a href="#41484209">next</a><span>|</span><label class="collapse" for="c-41485980">[-]</label><label class="expand" for="c-41485980">[1 more]</label></div><br/><div class="children"><div class="content">You know, Sun fixed this almost 30 years ago in the J2EE standard.</div><br/></div></div></div></div><div id="41484209" class="c"><input type="checkbox" id="c-41484209" checked=""/><div class="controls bullet"><span class="by">mlhpdx</span><span>|</span><a href="#41484474">prev</a><span>|</span><a href="#41485633">next</a><span>|</span><label class="collapse" for="c-41484209">[-]</label><label class="expand" for="c-41484209">[11 more]</label></div><br/><div class="children"><div class="content">I’ve never deployed a .git folder and wonder what systems&#x2F;approaches lead to such a thing. How does that happen?</div><br/><div id="41484242" class="c"><input type="checkbox" id="c-41484242" checked=""/><div class="controls bullet"><span class="by">mukesh610</span><span>|</span><a href="#41484209">parent</a><span>|</span><a href="#41484277">next</a><span>|</span><label class="collapse" for="c-41484242">[-]</label><label class="expand" for="c-41484242">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s pretty common in systems where the final output to be deployed is the same as the root of the source tree. More often than not, lazy developers tend to just git clone the repo and point their web server&#x27;s document root to the cloned source folder. In default configurations, .git is happily served to anyone asking for it.<p>This seems to be automatically mitigated in systems which might have a &quot;build&quot; &#x2F; &quot;compilation&quot; phase, because for the application to work in the first place, you only need the compiled output to be deployed. For instance, Apache Tomcat.</div><br/><div id="41484878" class="c"><input type="checkbox" id="c-41484878" checked=""/><div class="controls bullet"><span class="by">hinkley</span><span>|</span><a href="#41484209">root</a><span>|</span><a href="#41484242">parent</a><span>|</span><a href="#41484277">next</a><span>|</span><label class="collapse" for="c-41484878">[-]</label><label class="expand" for="c-41484878">[1 more]</label></div><br/><div class="children"><div class="content">Or you do a git clone&#x2F;docker build and that grabs it.<p>Hidden files only attract the attention of pessimists.</div><br/></div></div></div></div><div id="41484277" class="c"><input type="checkbox" id="c-41484277" checked=""/><div class="controls bullet"><span class="by">JamesSwift</span><span>|</span><a href="#41484209">parent</a><span>|</span><a href="#41484242">prev</a><span>|</span><a href="#41484725">next</a><span>|</span><label class="collapse" for="c-41484277">[-]</label><label class="expand" for="c-41484277">[5 more]</label></div><br/><div class="children"><div class="content">Its easy to miss that you need to duplicate your .gitignore into your .dockerignore</div><br/><div id="41484387" class="c"><input type="checkbox" id="c-41484387" checked=""/><div class="controls bullet"><span class="by">a99c43f2d565504</span><span>|</span><a href="#41484209">root</a><span>|</span><a href="#41484277">parent</a><span>|</span><a href="#41484591">next</a><span>|</span><label class="collapse" for="c-41484387">[-]</label><label class="expand" for="c-41484387">[3 more]</label></div><br/><div class="children"><div class="content">To not have to remember that one can not use a .dockerignore at all and instead explicitly pick the files and directories from the build context that need to be in the image.</div><br/><div id="41484937" class="c"><input type="checkbox" id="c-41484937" checked=""/><div class="controls bullet"><span class="by">__float</span><span>|</span><a href="#41484209">root</a><span>|</span><a href="#41484387">parent</a><span>|</span><a href="#41484591">next</a><span>|</span><label class="collapse" for="c-41484937">[-]</label><label class="expand" for="c-41484937">[2 more]</label></div><br/><div class="children"><div class="content">This is annoying and error prone if you use an interpreted language that relies on loading source files at runtime.<p>For a Go service? Sure, that&#x27;s easy and makes a ton of sense.</div><br/><div id="41485711" class="c"><input type="checkbox" id="c-41485711" checked=""/><div class="controls bullet"><span class="by">tstenner</span><span>|</span><a href="#41484209">root</a><span>|</span><a href="#41484937">parent</a><span>|</span><a href="#41484591">next</a><span>|</span><label class="collapse" for="c-41485711">[-]</label><label class="expand" for="c-41485711">[1 more]</label></div><br/><div class="children"><div class="content">For a go service you have a multi stage build that copies just the built executable into a clean base image.</div><br/></div></div></div></div></div></div><div id="41484591" class="c"><input type="checkbox" id="c-41484591" checked=""/><div class="controls bullet"><span class="by">blinded</span><span>|</span><a href="#41484209">root</a><span>|</span><a href="#41484277">parent</a><span>|</span><a href="#41484387">prev</a><span>|</span><a href="#41484725">next</a><span>|</span><label class="collapse" for="c-41484591">[-]</label><label class="expand" for="c-41484591">[1 more]</label></div><br/><div class="children"><div class="content">100% this!</div><br/></div></div></div></div><div id="41484725" class="c"><input type="checkbox" id="c-41484725" checked=""/><div class="controls bullet"><span class="by">faangguyindia</span><span>|</span><a href="#41484209">parent</a><span>|</span><a href="#41484277">prev</a><span>|</span><a href="#41485591">next</a><span>|</span><label class="collapse" for="c-41484725">[-]</label><label class="expand" for="c-41484725">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s because dockerignore file does not take this into consideration.</div><br/><div id="41486146" class="c"><input type="checkbox" id="c-41486146" checked=""/><div class="controls bullet"><span class="by">alkonaut</span><span>|</span><a href="#41484209">root</a><span>|</span><a href="#41484725">parent</a><span>|</span><a href="#41485591">next</a><span>|</span><label class="collapse" for="c-41486146">[-]</label><label class="expand" for="c-41486146">[1 more]</label></div><br/><div class="children"><div class="content">But in what cases would your root&#x2F;source directory be part of what you want to shove into a dockerimage? Is it like if you have a static website or php site with its root at the root of your source repo?</div><br/></div></div></div></div><div id="41485591" class="c"><input type="checkbox" id="c-41485591" checked=""/><div class="controls bullet"><span class="by">nurettin</span><span>|</span><a href="#41484209">parent</a><span>|</span><a href="#41484725">prev</a><span>|</span><a href="#41485633">next</a><span>|</span><label class="collapse" for="c-41485591">[-]</label><label class="expand" for="c-41485591">[1 more]</label></div><br/><div class="children"><div class="content">For scripting languages, I sometimes clone a readonly repo to prod. Then I use git pull &amp;&amp; systemctl --user restart srv to deploy. For compiled programs, I do it with rsync or docker pull.</div><br/></div></div></div></div><div id="41485633" class="c"><input type="checkbox" id="c-41485633" checked=""/><div class="controls bullet"><span class="by">ram_rattle</span><span>|</span><a href="#41484209">prev</a><span>|</span><label class="collapse" for="c-41485633">[-]</label><label class="expand" for="c-41485633">[2 more]</label></div><br/><div class="children"><div class="content">naive question: Doesn&#x27;t github secret scan kind of thing wont catch this?</div><br/><div id="41486235" class="c"><input type="checkbox" id="c-41486235" checked=""/><div class="controls bullet"><span class="by">zarkenfrood</span><span>|</span><a href="#41485633">parent</a><span>|</span><label class="collapse" for="c-41486235">[-]</label><label class="expand" for="c-41486235">[1 more]</label></div><br/><div class="children"><div class="content">It was deployed using a Bitbucket pipeline which does have a secret scanner available. However the scanner would need to be manually configured to be fully effective.</div><br/></div></div></div></div></div></div></div></div></div></body></html>