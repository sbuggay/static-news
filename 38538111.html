<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1701853256376" as="style"/><link rel="stylesheet" href="styles.css?v=1701853256376"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://thume.ca/2023/12/02/tracing-methods/">All my favorite tracing tools</a> <span class="domain">(<a href="https://thume.ca">thume.ca</a>)</span></div><div class="subtext"><span>trishume</span> | <span>11 comments</span></div><br/><div><div id="38541793" class="c"><input type="checkbox" id="c-38541793" checked=""/><div class="controls bullet"><span class="by">crdavidson</span><span>|</span><a href="#38541076">next</a><span>|</span><label class="collapse" for="c-38541793">[-]</label><label class="expand" for="c-38541793">[1 more]</label></div><br/><div class="children"><div class="content">I wrote Spall, one of the lightweight profilers mentioned in the post. I loved the author&#x27;s blogpost on implicit in-order forests, it was neat to see someone else&#x27;s take on trees for <i>big</i> traces, pushed me to go <i>way</i> bigger than I was originally planning!<p>Thankfully, eytzinger-ordered 4-ary trees work totally fine at 165+ fps, even at 3+ billion functions, but I like to read back through that post once in a while just in case I hit that perf wall someday.<p>Working on timestamp delta-compression at the moment to pack events into much smaller spaces, and <i>hopefully</i> get to the 10 billion in RAM mark sometime soon (at least for native builds of Spall).<p>Thanks for the kick to keep on pushing!</div><br/></div></div><div id="38541076" class="c"><input type="checkbox" id="c-38541076" checked=""/><div class="controls bullet"><span class="by">Veserv</span><span>|</span><a href="#38541793">prev</a><span>|</span><a href="#38541249">next</a><span>|</span><label class="collapse" for="c-38541076">[-]</label><label class="expand" for="c-38541076">[4 more]</label></div><br/><div class="children"><div class="content">A pretty good overview of open source solutions in the space.<p>Missing out on one of the most useful areas for tracing which is time travel debugging. There are a number of interesting solutions there taking advantage of hardware trace, instrumentation, and deterministic replay. Even better when you get full visualization integration so you can do something like zoom in from a multiple minute trace onto a suspicious 200 ns function and then double click on it which will then backstep to that exact point in your program with the full reconstruction of memory at that time so you can debug from that point.</div><br/><div id="38541117" class="c"><input type="checkbox" id="c-38541117" checked=""/><div class="controls bullet"><span class="by">trishume</span><span>|</span><a href="#38541076">parent</a><span>|</span><a href="#38541249">next</a><span>|</span><label class="collapse" for="c-38541117">[-]</label><label class="expand" for="c-38541117">[3 more]</label></div><br/><div class="children"><div class="content">Do you know of anyone who&#x27;s built that kind of time travel debugging with a trace visualization in the open outside of Javascript? I know about rr and Pernosco but don&#x27;t know of trace visualization integration for either of them, that would indeed be very cool. I definitely dream of having systems like this.</div><br/><div id="38541148" class="c"><input type="checkbox" id="c-38541148" checked=""/><div class="controls bullet"><span class="by">Veserv</span><span>|</span><a href="#38541076">root</a><span>|</span><a href="#38541117">parent</a><span>|</span><a href="#38541349">next</a><span>|</span><label class="collapse" for="c-38541148">[-]</label><label class="expand" for="c-38541148">[1 more]</label></div><br/><div class="children"><div class="content">Green Hills Software TimeMachine + History for C and C++: <a href="https:&#x2F;&#x2F;www.ghs.com&#x2F;products&#x2F;MULTI_IDE.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.ghs.com&#x2F;products&#x2F;MULTI_IDE.html</a><p>No particularly good publicly visible documentation of the functionality, but it does that and is a publicly purchasable product.<p>They also had TimeMachine + PathAnalyzer from the early 2000s which was a time travel debug with visualization solution, but they were only about as integrated as most of the solutions you see floating around today.</div><br/></div></div><div id="38541349" class="c"><input type="checkbox" id="c-38541349" checked=""/><div class="controls bullet"><span class="by">deutschepost</span><span>|</span><a href="#38541076">root</a><span>|</span><a href="#38541117">parent</a><span>|</span><a href="#38541148">prev</a><span>|</span><a href="#38541249">next</a><span>|</span><label class="collapse" for="c-38541349">[-]</label><label class="expand" for="c-38541349">[1 more]</label></div><br/><div class="children"><div class="content">Tomorrow Corp does something like this in a variant of c++. But I am not sure it’s very open.<p><a href="https:&#x2F;&#x2F;youtu.be&#x2F;72y2EC5fkcE" rel="nofollow noreferrer">https:&#x2F;&#x2F;youtu.be&#x2F;72y2EC5fkcE</a></div><br/></div></div></div></div></div></div><div id="38541249" class="c"><input type="checkbox" id="c-38541249" checked=""/><div class="controls bullet"><span class="by">jeffrallen</span><span>|</span><a href="#38541076">prev</a><span>|</span><label class="collapse" for="c-38541249">[-]</label><label class="expand" for="c-38541249">[5 more]</label></div><br/><div class="children"><div class="content">The author mentions dtrace in passing. If you&#x27;re into &quot;load bearing rants&quot;, check out bcantrill&#x27;s recent rant on bpftrace silently losing events and why dtrace won&#x27;t do that.</div><br/><div id="38541637" class="c"><input type="checkbox" id="c-38541637" checked=""/><div class="controls bullet"><span class="by">trishume</span><span>|</span><a href="#38541249">parent</a><span>|</span><a href="#38541598">next</a><span>|</span><label class="collapse" for="c-38541637">[-]</label><label class="expand" for="c-38541637">[1 more]</label></div><br/><div class="children"><div class="content">I haven&#x27;t actually used bpftrace myself, only BCC. I can totally imagine it being more janky than DTrace, BCC is pretty janky even if I also think it&#x27;s cool. In my eBPF tracing framework I had to add special handling counters to alert you if it ever lost any events, plausible bpftrace didn&#x27;t do that.</div><br/></div></div><div id="38541598" class="c"><input type="checkbox" id="c-38541598" checked=""/><div class="controls bullet"><span class="by">kristjansson</span><span>|</span><a href="#38541249">parent</a><span>|</span><a href="#38541637">prev</a><span>|</span><a href="#38541478">next</a><span>|</span><label class="collapse" for="c-38541598">[-]</label><label class="expand" for="c-38541598">[1 more]</label></div><br/><div class="children"><div class="content">The &quot;you can feel like lights flickering on&quot; one?</div><br/></div></div><div id="38541478" class="c"><input type="checkbox" id="c-38541478" checked=""/><div class="controls bullet"><span class="by">Always_Anon</span><span>|</span><a href="#38541249">parent</a><span>|</span><a href="#38541598">prev</a><span>|</span><label class="collapse" for="c-38541478">[-]</label><label class="expand" for="c-38541478">[2 more]</label></div><br/><div class="children"><div class="content">Dtrace is a generation behind eBPF.  There&#x27;s a reason why the tracing community has moved on to eBPF and is no longer interested in dtrace.</div><br/><div id="38541755" class="c"><input type="checkbox" id="c-38541755" checked=""/><div class="controls bullet"><span class="by">bcantrill</span><span>|</span><a href="#38541249">root</a><span>|</span><a href="#38541478">parent</a><span>|</span><label class="collapse" for="c-38541755">[-]</label><label class="expand" for="c-38541755">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s an absurd comment:  eBPF and DTrace exist on orthogonal systems, and most using eBPF have never even used DTrace, let alone &quot;moved on&quot; from it.  The systems are really quite different, and have different design centers; for the use case of instrumenting the system for purposes of understanding it, there are many regards in which eBPF remains behind DTrace -- one of which I elaborated on in the rant to which the parent is referring.[0]<p>[0] <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=mqvVmYhclAg#t=12m25s" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=mqvVmYhclAg#t=12m25s</a></div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>