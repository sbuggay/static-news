<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1703754056152" as="style"/><link rel="stylesheet" href="styles.css?v=1703754056152"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://andreasjhkarlsson.github.io//jekyll/update/2023/12/27/4-billion-if-statements.html">4B If Statements</a> <span class="domain">(<a href="https://andreasjhkarlsson.github.io">andreasjhkarlsson.github.io</a>)</span></div><div class="subtext"><span>r4um</span> | <span>88 comments</span></div><br/><div><div id="38791094" class="c"><input type="checkbox" id="c-38791094" checked=""/><div class="controls bullet"><span class="by">oefrha</span><span>|</span><a href="#38791000">next</a><span>|</span><label class="collapse" for="c-38791094">[-]</label><label class="expand" for="c-38791094">[5 more]</label></div><br/><div class="children"><div class="content">This approach is perfect for the is-even npm package[1], with 196,023 weekly downloads, or the is-odd npm package[2], with 285,501 weekly downloads. Wouldn&#x27;t it be cool if you type `npm install` and it starts downloading a 40GB is-even and a 40GB is-odd?<p>[1] <a href="https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;is-even" rel="nofollow">https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;is-even</a><p>[2] <a href="https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;is-odd" rel="nofollow">https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;is-odd</a></div><br/><div id="38791336" class="c"><input type="checkbox" id="c-38791336" checked=""/><div class="controls bullet"><span class="by">lvncelot</span><span>|</span><a href="#38791094">parent</a><span>|</span><a href="#38791149">next</a><span>|</span><label class="collapse" for="c-38791336">[-]</label><label class="expand" for="c-38791336">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s always worth mentioning that those packages stem from the effort of one dedicated npm spammer[1] to weasel his way into as many node_modules folders as possible. There&#x27;s also packages for ansi-colors (no, not one package for all colors, one package for <i>each</i> color) and god knows what else. These then get jammed into any cli tool or other half-way sensible looking package, all referencing each other obviously - and any &quot;real&quot; project is just a single innocuous dependency away from having dozens of jonschlinkert packages.<p>[1] <a href="https:&#x2F;&#x2F;www.npmjs.com&#x2F;~jonschlinkert" rel="nofollow">https:&#x2F;&#x2F;www.npmjs.com&#x2F;~jonschlinkert</a></div><br/></div></div><div id="38791149" class="c"><input type="checkbox" id="c-38791149" checked=""/><div class="controls bullet"><span class="by">chrisandchris</span><span>|</span><a href="#38791094">parent</a><span>|</span><a href="#38791336">prev</a><span>|</span><a href="#38791235">next</a><span>|</span><label class="collapse" for="c-38791149">[-]</label><label class="expand" for="c-38791149">[2 more]</label></div><br/><div class="children"><div class="content">The funniest (or best part) about those two packages is that is-even has a dependency to is-odd and does just negate the output of is-odd.</div><br/><div id="38791247" class="c"><input type="checkbox" id="c-38791247" checked=""/><div class="controls bullet"><span class="by">jl6</span><span>|</span><a href="#38791094">root</a><span>|</span><a href="#38791149">parent</a><span>|</span><a href="#38791235">next</a><span>|</span><label class="collapse" for="c-38791247">[-]</label><label class="expand" for="c-38791247">[1 more]</label></div><br/><div class="children"><div class="content">It’s true, the great thing about clean, reusable, modular code like this is that you can compose both of these packages to make a is-even-or-odd package.</div><br/></div></div></div></div><div id="38791235" class="c"><input type="checkbox" id="c-38791235" checked=""/><div class="controls bullet"><span class="by">chrismorgan</span><span>|</span><a href="#38791094">parent</a><span>|</span><a href="#38791149">prev</a><span>|</span><a href="#38791000">next</a><span>|</span><label class="collapse" for="c-38791235">[-]</label><label class="expand" for="c-38791235">[1 more]</label></div><br/><div class="children"><div class="content">Actually it’s not good enough there because JavaScript numbers are f64 rather than u32. Even if you only support the safe integer range (beyond which the answers become somewhat meaningless), that’s 2⁵⁴, more than four million times as large as 2³². Not sure how big the machine code would be, but I’m guessing it’ll just add 4 bytes (40%) to each case, so you’re up to something like 224 exibytes. And that’s when you’re being <i>lazy</i> and skipping the last ten bits’ worth. If you want to do it <i>properly</i>, multiply by another thousand. Or maybe a little less, I haven’t thought too deeply about NaN patterns. Or maybe just infinite if it supports bigints.</div><br/></div></div></div></div><div id="38791000" class="c"><input type="checkbox" id="c-38791000" checked=""/><div class="controls bullet"><span class="by">raegis</span><span>|</span><a href="#38791094">prev</a><span>|</span><a href="#38791165">next</a><span>|</span><label class="collapse" for="c-38791000">[-]</label><label class="expand" for="c-38791000">[1 more]</label></div><br/><div class="children"><div class="content">This is one of the most entertaining articles I&#x27;ve ever read here.  He should put the source code online so ChatGPT can &quot;learn&quot; from it.</div><br/></div></div><div id="38791165" class="c"><input type="checkbox" id="c-38791165" checked=""/><div class="controls bullet"><span class="by">faizshah</span><span>|</span><a href="#38791000">prev</a><span>|</span><a href="#38791316">next</a><span>|</span><label class="collapse" for="c-38791165">[-]</label><label class="expand" for="c-38791165">[4 more]</label></div><br/><div class="children"><div class="content">This metaprogramming reminds me of the post where they serialized data to ruby code to get around a slow XML parser: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=36311924">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=36311924</a><p>I’m curious if anyone has found a serious application for metaprogramming large amounts of data in a high level language like this?<p>So far the only application I have thought of was meta programming a series of api calls before executing them so the entire transaction can be replayed as a script.</div><br/><div id="38791365" class="c"><input type="checkbox" id="c-38791365" checked=""/><div class="controls bullet"><span class="by">Retr0id</span><span>|</span><a href="#38791165">parent</a><span>|</span><a href="#38791269">next</a><span>|</span><label class="collapse" for="c-38791365">[-]</label><label class="expand" for="c-38791365">[2 more]</label></div><br/><div class="children"><div class="content">A while back I was reverse engineering a mobile game that used a completely custom serialization format for game data, most of it in one giant &quot;config&quot; blob several megabytes in size. I&#x27;d written a parser and serializer for it in Python, using custom classes to represent the various nested object types, but I didn&#x27;t have a convenient way to explore and edit the data.<p>So, I wrote some code to parse the giant blob and emit a python source file, consisting of a whole bunch of nested class constructors (with named parameters etc. making it quite readable), and a final function call to serialize the whole lot back into a blob. Now I could edit that source file and run it, and have my source-level edits reflected in the output blob (which I could subsequently feed back into the game engine to see the results of my changes).</div><br/><div id="38791474" class="c"><input type="checkbox" id="c-38791474" checked=""/><div class="controls bullet"><span class="by">baq</span><span>|</span><a href="#38791165">root</a><span>|</span><a href="#38791365">parent</a><span>|</span><a href="#38791269">next</a><span>|</span><label class="collapse" for="c-38791474">[-]</label><label class="expand" for="c-38791474">[1 more]</label></div><br/><div class="children"><div class="content">Note: this is essentially what the AWS CDK does.<p>Yet another example that configures is code is configuration is code is…</div><br/></div></div></div></div><div id="38791269" class="c"><input type="checkbox" id="c-38791269" checked=""/><div class="controls bullet"><span class="by">SCUSKU</span><span>|</span><a href="#38791165">parent</a><span>|</span><a href="#38791365">prev</a><span>|</span><a href="#38791316">next</a><span>|</span><label class="collapse" for="c-38791269">[-]</label><label class="expand" for="c-38791269">[1 more]</label></div><br/><div class="children"><div class="content">Somewhat pedantic here, but would the authors use of python to generate C code be considered metaprogramming as opposed to code generation? I thought metaprogramming typically involved writing code that can alter&#x2F;augment itself, like new syntax.<p>Personally, I have found a lot of use in code generation, for example using RTKQuery&#x27;s codegen tool that accepts an OpenAPI schema and outputs a JS client.</div><br/></div></div></div></div><div id="38791316" class="c"><input type="checkbox" id="c-38791316" checked=""/><div class="controls bullet"><span class="by">Retr0id</span><span>|</span><a href="#38791165">prev</a><span>|</span><a href="#38790984">next</a><span>|</span><label class="collapse" for="c-38791316">[-]</label><label class="expand" for="c-38791316">[3 more]</label></div><br/><div class="children"><div class="content">&gt; for the large number close to the 2^32 limit the result is still returned in around 10 seconds.<p>This could be improved by arranging the if&#x2F;else statements in a binary tree.</div><br/><div id="38791353" class="c"><input type="checkbox" id="c-38791353" checked=""/><div class="controls bullet"><span class="by">hansjorg</span><span>|</span><a href="#38791316">parent</a><span>|</span><a href="#38791350">next</a><span>|</span><label class="collapse" for="c-38791353">[-]</label><label class="expand" for="c-38791353">[1 more]</label></div><br/><div class="children"><div class="content">Come to think of it, I&#x27;m sure there are other optimisations you could do as well.</div><br/></div></div><div id="38791350" class="c"><input type="checkbox" id="c-38791350" checked=""/><div class="controls bullet"><span class="by">elwell</span><span>|</span><a href="#38791316">parent</a><span>|</span><a href="#38791353">prev</a><span>|</span><a href="#38790984">next</a><span>|</span><label class="collapse" for="c-38791350">[-]</label><label class="expand" for="c-38791350">[1 more]</label></div><br/><div class="children"><div class="content">This is a great idea! Intuitively, I think it might make the program 3x size though?: first `if` for ==, then an `else if` for &lt;, then `else` for &gt;.</div><br/></div></div></div></div><div id="38790984" class="c"><input type="checkbox" id="c-38790984" checked=""/><div class="controls bullet"><span class="by">winwang</span><span>|</span><a href="#38791316">prev</a><span>|</span><a href="#38790754">next</a><span>|</span><label class="collapse" for="c-38790984">[-]</label><label class="expand" for="c-38790984">[6 more]</label></div><br/><div class="children"><div class="content">I&#x27;m surprised no one has chimed in on how the program is &quot;processing&quot; 40GB of instructions with only 800 MB&#x2F;s * 10s of disk read.<p>If I had to hazard a guess, there&#x27;s some kind of smart caching going on at the OS level, but that would entail the benchmark of &quot;n close to 2^32&quot; not being run correctly.<p>...Or that the CPU is smart enough to jump millions of instructions ahead.</div><br/><div id="38791038" class="c"><input type="checkbox" id="c-38791038" checked=""/><div class="controls bullet"><span class="by">treffer</span><span>|</span><a href="#38790984">parent</a><span>|</span><a href="#38791079">next</a><span>|</span><label class="collapse" for="c-38791038">[-]</label><label class="expand" for="c-38791038">[1 more]</label></div><br/><div class="children"><div class="content">&gt; my beefy gaming rig with a whopping 31.8 GB of memory<p>So a rerun of the program should only need to load ~8GB if the filesystem caching is somewhat loop&#x2F;scan resistant.<p>My first thought was &quot;probably the math is wrong&quot;, but looks like it adds up to something reasonable - especially as all numbers are rather vague &#x2F; rounded (e.g. let it be 12s) and the number was just high, not absolute maximum.</div><br/></div></div><div id="38791079" class="c"><input type="checkbox" id="c-38791079" checked=""/><div class="controls bullet"><span class="by">drewtato</span><span>|</span><a href="#38790984">parent</a><span>|</span><a href="#38791038">prev</a><span>|</span><a href="#38791073">next</a><span>|</span><label class="collapse" for="c-38791079">[-]</label><label class="expand" for="c-38791079">[2 more]</label></div><br/><div class="children"><div class="content">My guess is either compression or stuff lingering in RAM. The CPU can&#x27;t be smart here since it doesn&#x27;t know what any of the future ifs will be. It doesn&#x27;t know they&#x27;re in order, or unique, or even valid instructions. You could (theoretically; the OS probably wouldn&#x27;t let you) replace an if with an infinite loop while the program is running.</div><br/><div id="38791362" class="c"><input type="checkbox" id="c-38791362" checked=""/><div class="controls bullet"><span class="by">rocqua</span><span>|</span><a href="#38790984">root</a><span>|</span><a href="#38791079">parent</a><span>|</span><a href="#38791073">next</a><span>|</span><label class="collapse" for="c-38791362">[-]</label><label class="expand" for="c-38791362">[1 more]</label></div><br/><div class="children"><div class="content">Could it be the branch predictor of the CPU somehow catching on to this? Perhaps something like &#x27;the branch for input x is somewhere around base+10X.</div><br/></div></div></div></div><div id="38791073" class="c"><input type="checkbox" id="c-38791073" checked=""/><div class="controls bullet"><span class="by">jeffreygoesto</span><span>|</span><a href="#38790984">parent</a><span>|</span><a href="#38791079">prev</a><span>|</span><a href="#38790754">next</a><span>|</span><label class="collapse" for="c-38791073">[-]</label><label class="expand" for="c-38791073">[2 more]</label></div><br/><div class="children"><div class="content">It mmaps the program, unused pages then only take a page table entry and are not loaded. The only page actually loaded is the one he directly jumps into. Neat trick.</div><br/><div id="38791351" class="c"><input type="checkbox" id="c-38791351" checked=""/><div class="controls bullet"><span class="by">Liquid_Fire</span><span>|</span><a href="#38790984">root</a><span>|</span><a href="#38791073">parent</a><span>|</span><a href="#38790754">next</a><span>|</span><label class="collapse" for="c-38791351">[-]</label><label class="expand" for="c-38791351">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not jumping directly, it&#x27;s executing sequentially, comparing against each consecutive number in sequence.</div><br/></div></div></div></div></div></div><div id="38790754" class="c"><input type="checkbox" id="c-38790754" checked=""/><div class="controls bullet"><span class="by">Hugsun</span><span>|</span><a href="#38790984">prev</a><span>|</span><a href="#38791369">next</a><span>|</span><label class="collapse" for="c-38790754">[-]</label><label class="expand" for="c-38790754">[2 more]</label></div><br/><div class="children"><div class="content">Visionary genius Ross van der Gussom is my new favorite mythological creature.</div><br/><div id="38790856" class="c"><input type="checkbox" id="c-38790856" checked=""/><div class="controls bullet"><span class="by">punnerud</span><span>|</span><a href="#38790754">parent</a><span>|</span><a href="#38791369">next</a><span>|</span><label class="collapse" for="c-38790856">[-]</label><label class="expand" for="c-38790856">[1 more]</label></div><br/><div class="children"><div class="content">Think of Python as a way to script C, and skip most&#x2F;all compiling. If your Python is slow, you are probably doing it wrong.<p>Recommend reading this:
<a href="https:&#x2F;&#x2F;cerfacs.fr&#x2F;coop&#x2F;fortran-vs-python" rel="nofollow">https:&#x2F;&#x2F;cerfacs.fr&#x2F;coop&#x2F;fortran-vs-python</a></div><br/></div></div></div></div><div id="38791369" class="c"><input type="checkbox" id="c-38791369" checked=""/><div class="controls bullet"><span class="by">friedrich_zip</span><span>|</span><a href="#38790754">prev</a><span>|</span><a href="#38791059">next</a><span>|</span><label class="collapse" for="c-38791369">[-]</label><label class="expand" for="c-38791369">[1 more]</label></div><br/><div class="children"><div class="content">This is amazing technology. You should sell it to AWS so they can offer an Enterprise-ready AWS EvenOrOdd API for everyone who does not know how to host the 40GB executable properly. With the power of the cloud this programme would be unstoppable</div><br/></div></div><div id="38791059" class="c"><input type="checkbox" id="c-38791059" checked=""/><div class="controls bullet"><span class="by">Patient0</span><span>|</span><a href="#38791369">prev</a><span>|</span><a href="#38791294">next</a><span>|</span><label class="collapse" for="c-38791059">[-]</label><label class="expand" for="c-38791059">[3 more]</label></div><br/><div class="children"><div class="content">I feel like the whole article is an allegory of LLM development (as a critic would write it: devoting a stupendous amount of resources and &#x27;training data&#x27; to &#x27;memorize&#x27; the solution). I wonder if this was the author&#x27;s intent?</div><br/><div id="38791104" class="c"><input type="checkbox" id="c-38791104" checked=""/><div class="controls bullet"><span class="by">Semaphor</span><span>|</span><a href="#38791059">parent</a><span>|</span><a href="#38791106">next</a><span>|</span><label class="collapse" for="c-38791104">[-]</label><label class="expand" for="c-38791104">[1 more]</label></div><br/><div class="children"><div class="content">Considering I expected it to be about LLMs from the title (I thought it would be an announcement of a new 4B model), I’m going with &quot;probably&quot; ;)</div><br/></div></div><div id="38791106" class="c"><input type="checkbox" id="c-38791106" checked=""/><div class="controls bullet"><span class="by">jgilias</span><span>|</span><a href="#38791059">parent</a><span>|</span><a href="#38791104">prev</a><span>|</span><a href="#38791294">next</a><span>|</span><label class="collapse" for="c-38791106">[-]</label><label class="expand" for="c-38791106">[1 more]</label></div><br/><div class="children"><div class="content">Reading the headline I totally expected it to be about LLMs.</div><br/></div></div></div></div><div id="38791294" class="c"><input type="checkbox" id="c-38791294" checked=""/><div class="controls bullet"><span class="by">glandium</span><span>|</span><a href="#38791059">prev</a><span>|</span><a href="#38790726">next</a><span>|</span><label class="collapse" for="c-38791294">[-]</label><label class="expand" for="c-38791294">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s kind of ironic that the python generator script uses modulo. The author could have pushed it to the point of not using one.<p>I&#x27;m tempted to write a followup doing even crazier things...</div><br/></div></div><div id="38790726" class="c"><input type="checkbox" id="c-38790726" checked=""/><div class="controls bullet"><span class="by">satiric</span><span>|</span><a href="#38791294">prev</a><span>|</span><a href="#38790940">next</a><span>|</span><label class="collapse" for="c-38790726">[-]</label><label class="expand" for="c-38790726">[12 more]</label></div><br/><div class="children"><div class="content">Surely any solution that claims to be performant would use a binary search, rather than looping through every number. Would be a little trickier to generate the code though.<p>Edit: &#x2F;s of course</div><br/><div id="38790880" class="c"><input type="checkbox" id="c-38790880" checked=""/><div class="controls bullet"><span class="by">tarruda</span><span>|</span><a href="#38790726">parent</a><span>|</span><a href="#38791360">next</a><span>|</span><label class="collapse" for="c-38790880">[-]</label><label class="expand" for="c-38790880">[9 more]</label></div><br/><div class="children"><div class="content">I wouldn&#x27;t touch the generated ifs, but would generate a b-tree database which maps integers to the address of the generated code which has the desired &quot;if&quot; comparison. Then the C program starts by querying the b-tree for the address and just assigns that to &quot;isEven&quot; pointer.<p>Hmm... Nevermind. A really smart way to solve this would be to store the result of the &quot;isEven&quot; computation directly on the b-tree, so the whole problem can be solved with a simple database query!</div><br/><div id="38790911" class="c"><input type="checkbox" id="c-38790911" checked=""/><div class="controls bullet"><span class="by">neilv</span><span>|</span><a href="#38790726">root</a><span>|</span><a href="#38790880">parent</a><span>|</span><a href="#38791360">next</a><span>|</span><label class="collapse" for="c-38790911">[-]</label><label class="expand" for="c-38790911">[8 more]</label></div><br/><div class="children"><div class="content">Make it a microservice in Kubernetes so that it scales.</div><br/><div id="38790929" class="c"><input type="checkbox" id="c-38790929" checked=""/><div class="controls bullet"><span class="by">jiggawatts</span><span>|</span><a href="#38790726">root</a><span>|</span><a href="#38790911">parent</a><span>|</span><a href="#38791360">next</a><span>|</span><label class="collapse" for="c-38790929">[-]</label><label class="expand" for="c-38790929">[7 more]</label></div><br/><div class="children"><div class="content">I wouldn’t be surprised if there isn’t at least one thing this insane at some FAANG.<p>“We’ve got to scale the maths engine cluster to handle the load!”</div><br/><div id="38791020" class="c"><input type="checkbox" id="c-38791020" checked=""/><div class="controls bullet"><span class="by">rplnt</span><span>|</span><a href="#38790726">root</a><span>|</span><a href="#38790929">parent</a><span>|</span><a href="#38791360">next</a><span>|</span><label class="collapse" for="c-38791020">[-]</label><label class="expand" for="c-38791020">[6 more]</label></div><br/><div class="children"><div class="content">I mean, there&#x27;s this<p><a href="https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;is-even" rel="nofollow">https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;is-even</a></div><br/><div id="38791107" class="c"><input type="checkbox" id="c-38791107" checked=""/><div class="controls bullet"><span class="by">vegardlarsen</span><span>|</span><a href="#38790726">root</a><span>|</span><a href="#38791020">parent</a><span>|</span><a href="#38791123">next</a><span>|</span><label class="collapse" for="c-38791107">[-]</label><label class="expand" for="c-38791107">[3 more]</label></div><br/><div class="children"><div class="content">The actual implementation of this package is even better.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;i-voted-for-trump&#x2F;is-even&#x2F;blob&#x2F;master&#x2F;index.js">https:&#x2F;&#x2F;github.com&#x2F;i-voted-for-trump&#x2F;is-even&#x2F;blob&#x2F;master&#x2F;ind...</a></div><br/><div id="38791137" class="c"><input type="checkbox" id="c-38791137" checked=""/><div class="controls bullet"><span class="by">tarruda</span><span>|</span><a href="#38790726">root</a><span>|</span><a href="#38791107">parent</a><span>|</span><a href="#38791123">next</a><span>|</span><label class="collapse" for="c-38791137">[-]</label><label class="expand" for="c-38791137">[2 more]</label></div><br/><div class="children"><div class="content">What is even better is the fact that it has 200k weekly downloads. I thought this was supposed to be a troll package.</div><br/><div id="38791253" class="c"><input type="checkbox" id="c-38791253" checked=""/><div class="controls bullet"><span class="by">doikor</span><span>|</span><a href="#38790726">root</a><span>|</span><a href="#38791137">parent</a><span>|</span><a href="#38791123">next</a><span>|</span><label class="collapse" for="c-38791253">[-]</label><label class="expand" for="c-38791253">[1 more]</label></div><br/><div class="children"><div class="content">It is a troll package. Just a successful one.</div><br/></div></div></div></div></div></div><div id="38791123" class="c"><input type="checkbox" id="c-38791123" checked=""/><div class="controls bullet"><span class="by">madarcho</span><span>|</span><a href="#38790726">root</a><span>|</span><a href="#38791020">parent</a><span>|</span><a href="#38791107">prev</a><span>|</span><a href="#38791360">next</a><span>|</span><label class="collapse" for="c-38791123">[-]</label><label class="expand" for="c-38791123">[2 more]</label></div><br/><div class="children"><div class="content">Well worth a quick trip to the source to see how it&#x27;s implemented. After all, how would the author get around to packaging 4B if statements, like the OP?</div><br/><div id="38791325" class="c"><input type="checkbox" id="c-38791325" checked=""/><div class="controls bullet"><span class="by">ezconnect</span><span>|</span><a href="#38790726">root</a><span>|</span><a href="#38791123">parent</a><span>|</span><a href="#38791360">next</a><span>|</span><label class="collapse" for="c-38791325">[-]</label><label class="expand" for="c-38791325">[1 more]</label></div><br/><div class="children"><div class="content">He could package it to the size limit and range the numbers it could detect.  Add a note to download particular package if the number is out of range of the package and that package is not installed.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="38791360" class="c"><input type="checkbox" id="c-38791360" checked=""/><div class="controls bullet"><span class="by">zeroCalories</span><span>|</span><a href="#38790726">parent</a><span>|</span><a href="#38790880">prev</a><span>|</span><a href="#38791052">next</a><span>|</span><label class="collapse" for="c-38791360">[-]</label><label class="expand" for="c-38791360">[1 more]</label></div><br/><div class="children"><div class="content">Why search? We know exactly where every number is. Use a jump table.<p>While this example is obviously silly because loading a number into a register and performimg some operations on it is going to be faster than a cache miss from jumping into a massive table, the general technique can absolutely be applied in the real world.</div><br/></div></div><div id="38791052" class="c"><input type="checkbox" id="c-38791052" checked=""/><div class="controls bullet"><span class="by">diegocg</span><span>|</span><a href="#38790726">parent</a><span>|</span><a href="#38791360">prev</a><span>|</span><a href="#38790940">next</a><span>|</span><label class="collapse" for="c-38791052">[-]</label><label class="expand" for="c-38791052">[1 more]</label></div><br/><div class="children"><div class="content">Compilers will actually do these kind of tricks, I have seen them doing that for switch statements with a large number of cases.</div><br/></div></div></div></div><div id="38790940" class="c"><input type="checkbox" id="c-38790940" checked=""/><div class="controls bullet"><span class="by">Joker_vD</span><span>|</span><a href="#38790726">prev</a><span>|</span><a href="#38791133">next</a><span>|</span><label class="collapse" for="c-38790940">[-]</label><label class="expand" for="c-38790940">[7 more]</label></div><br/><div class="children"><div class="content">If your programming language of choice has no arrays (like most of the languages implemented in one of the many, many, many &quot;How to write your own interpreter&#x2F;simple compiler&quot; tutorials out there) but supports variables, then you can use this technique to kinda implement them anyway, Okasaki-style:<p><pre><code>    var arr0, arr1, arr2, arr3, arr4, ..., arr65535 : int;

    func get_arr(index: int): int {
        if index &lt; 0 or index &gt; 65535 { exit(); }
        if index &lt; 32768 {
            if index &lt; 16384 {
                if index &lt; 8192 {
                    ...
                        if index &lt; 2 {
                            if index &lt; 1 {
                                return arr0;
                            } else {
                                return arr1;
                            }
                        } else {
                            if index &lt; 3 {
                                return arr2;
                            } else {
                                return arr3;
                            }
                        }
                    ...
                }
                else {
                    ...
                }
            } else {
                ...
            }
        } else {
            ...
        }
    }

    proc set_arr(index: int, value: int) {
        if index &lt; 0 or index &gt; 65535 { exit(); }
        if index &lt; 32768 {
            if index &lt; 16384 {
                if index &lt; 8192 {
                    ...
                        if index &lt; 2 {
                            if index &lt; 1 {
                                arr0 = value;
                            } else {
                                arr1 = value;
                            }
                        } else {
                            if index &lt; 3 {
                                arr2 = value;
                            } else {
                                arr3 = value;
                            }
                        }
                    ...
                }
                else {
                    ...
                }
            } else {
                ...
            }
        } else {
            ...
        }
    }
</code></pre>
It even has O(log n) access time which is actually the same complexity as accessing a RAM by a pointer anyway! Just replicate this code for any array variable you need to simulate and pre-allocate enough of the memory, it&#x27;s totally free with that .bss trick anyhow.<p>So technically, languages without arrays are about as Turing-complete as those with limited-size pointers&#x2F;array indices (funnily enough Brainfuck — where the pointer is invisible to the progammer — <i>actually</i> is Turing-complete).</div><br/><div id="38791048" class="c"><input type="checkbox" id="c-38791048" checked=""/><div class="controls bullet"><span class="by">extheat</span><span>|</span><a href="#38790940">parent</a><span>|</span><a href="#38790999">next</a><span>|</span><label class="collapse" for="c-38791048">[-]</label><label class="expand" for="c-38791048">[4 more]</label></div><br/><div class="children"><div class="content">Why would normal memory access be O(log n)? Seems to me jumping to a random address should be an O(1) operation. Would be pretty dumb if jumping to higher RAM addresses takes longer than jumping to lower RAM, excluding hardware things like different RAM sticks or page files.</div><br/><div id="38791277" class="c"><input type="checkbox" id="c-38791277" checked=""/><div class="controls bullet"><span class="by">Athas</span><span>|</span><a href="#38790940">root</a><span>|</span><a href="#38791048">parent</a><span>|</span><a href="#38791349">next</a><span>|</span><label class="collapse" for="c-38791277">[-]</label><label class="expand" for="c-38791277">[1 more]</label></div><br/><div class="children"><div class="content">It depends on your definitions and assumptions.  Here &#x27;n&#x27; is not the address, but the size of memory (or the largest possible&#x2F;worst-case address).  In the universe we inhabit, due to limitations on information density in a given volume[1], the worst-case random access time for a memory of size &#x27;n&#x27; would be the cube root of &#x27;n&#x27;, because you need to transmit a signal at the speed of light between to points inside a sphere.<p>Real computers tend not to be able to store their information in all three dimensions (I think I once saw an argument for why this is also theoretically not feasible), and in practice appear to have worst-case access times that are logarithmic.  It&#x27;s fundamentally for the same reason: the bigger your memory, the more distant will be the most remote (worst-case) part of it.<p>Of course, in a single <i>specific</i> desktop or server computer, changing the capacity of your RAM sticks will likely not affect worst case access speeds, because the speed limit is likely based on the <i>maximum capacity</i> of the machine (a constant).  So this kind of analysis is useful for pondering the ultimate limits of worst case memory accesses (and does also have some relevance huge computers), but in practice you will of course find that cache&#x2F;locality effects are far more important for performance on real computers.<p>[1]: Since information is energy and therefore mass, a sufficiently dense store of information would collapse into a singularity, and you better hope your pointer doesn&#x27;t point into one of those.</div><br/></div></div><div id="38791250" class="c"><input type="checkbox" id="c-38791250" checked=""/><div class="controls bullet"><span class="by">Jaxan</span><span>|</span><a href="#38790940">root</a><span>|</span><a href="#38791048">parent</a><span>|</span><a href="#38791349">prev</a><span>|</span><a href="#38790999">next</a><span>|</span><label class="collapse" for="c-38791250">[-]</label><label class="expand" for="c-38791250">[1 more]</label></div><br/><div class="children"><div class="content">&gt; excluding hardware things like different RAM sticks or page files.<p>Exactly this! Also as n grows you will need bigger address busses (or have serial communication).</div><br/></div></div></div></div><div id="38790999" class="c"><input type="checkbox" id="c-38790999" checked=""/><div class="controls bullet"><span class="by">anvuong</span><span>|</span><a href="#38790940">parent</a><span>|</span><a href="#38791048">prev</a><span>|</span><a href="#38791133">next</a><span>|</span><label class="collapse" for="c-38790999">[-]</label><label class="expand" for="c-38790999">[2 more]</label></div><br/><div class="children"><div class="content">That&#x27;s because array, or even if&#x2F;else statements are already higher-level abstraction. To be Turing complete you simply need: a memory that can be read from or written to, and the ability to &quot;jump&quot; or &quot;move&quot; to some memory location.<p>Turing complete may sound big, but almost anything that can compute is Turing complete.</div><br/><div id="38791022" class="c"><input type="checkbox" id="c-38791022" checked=""/><div class="controls bullet"><span class="by">Joker_vD</span><span>|</span><a href="#38790940">root</a><span>|</span><a href="#38790999">parent</a><span>|</span><a href="#38791133">next</a><span>|</span><label class="collapse" for="c-38791022">[-]</label><label class="expand" for="c-38791022">[1 more]</label></div><br/><div class="children"><div class="content">You also need an unbounded storage. Technically, if you have unlimited-width integers then two variables is all you need, but most languages have limited-width integers which makes them finite-state automata.</div><br/></div></div></div></div></div></div><div id="38791133" class="c"><input type="checkbox" id="c-38791133" checked=""/><div class="controls bullet"><span class="by">bryanlarsen</span><span>|</span><a href="#38790940">prev</a><span>|</span><a href="#38790950">next</a><span>|</span><label class="collapse" for="c-38791133">[-]</label><label class="expand" for="c-38791133">[1 more]</label></div><br/><div class="children"><div class="content">That reminds me of my first program ever as an 11 year old.   Not only did I not know about modulus, I didn&#x27;t know about less than or greater than.   The program picked bingo numbers.   So there were 5 lines that looked something like `10 IF n=1 OR n=2 OR n=3 OR n=4 OR n=5 OR n=6 OR n=7 OR n=8 OR n=9 OR n=10 OR n=11 OR n=12 OR n=13 OR n=14 OR n=15 THEN l=&quot;B&quot;`</div><br/></div></div><div id="38790950" class="c"><input type="checkbox" id="c-38790950" checked=""/><div class="controls bullet"><span class="by">cushpush</span><span>|</span><a href="#38791133">prev</a><span>|</span><a href="#38791366">next</a><span>|</span><label class="collapse" for="c-38790950">[-]</label><label class="expand" for="c-38790950">[1 more]</label></div><br/><div class="children"><div class="content">Fantastic use of meta-programming, and I like the benchmarking at the end, you have clarified much for the beginner and expert alike.</div><br/></div></div><div id="38791366" class="c"><input type="checkbox" id="c-38791366" checked=""/><div class="controls bullet"><span class="by">Subdivide8452</span><span>|</span><a href="#38790950">prev</a><span>|</span><a href="#38790820">next</a><span>|</span><label class="collapse" for="c-38791366">[-]</label><label class="expand" for="c-38791366">[2 more]</label></div><br/><div class="children"><div class="content">Can’t you just test the last digit of main’s arg and get the best of both worlds?</div><br/><div id="38791435" class="c"><input type="checkbox" id="c-38791435" checked=""/><div class="controls bullet"><span class="by">projektfu</span><span>|</span><a href="#38791366">parent</a><span>|</span><a href="#38790820">next</a><span>|</span><label class="collapse" for="c-38791435">[-]</label><label class="expand" for="c-38791435">[1 more]</label></div><br/><div class="children"><div class="content">&quot;just&quot;<p><a href="https:&#x2F;&#x2F;dohertyjf.medium.com&#x2F;just-dont-say-just-4c3c4cde3ebb" rel="nofollow">https:&#x2F;&#x2F;dohertyjf.medium.com&#x2F;just-dont-say-just-4c3c4cde3ebb</a><p>&#x2F;s</div><br/></div></div></div></div><div id="38790820" class="c"><input type="checkbox" id="c-38790820" checked=""/><div class="controls bullet"><span class="by">midjji</span><span>|</span><a href="#38791366">prev</a><span>|</span><a href="#38791232">next</a><span>|</span><label class="collapse" for="c-38790820">[-]</label><label class="expand" for="c-38790820">[5 more]</label></div><br/><div class="children"><div class="content">% is a surprisingly slow way to do so compared to x &amp; 1.</div><br/><div id="38790840" class="c"><input type="checkbox" id="c-38790840" checked=""/><div class="controls bullet"><span class="by">Cyph0n</span><span>|</span><a href="#38790820">parent</a><span>|</span><a href="#38791232">next</a><span>|</span><label class="collapse" for="c-38790840">[-]</label><label class="expand" for="c-38790840">[4 more]</label></div><br/><div class="children"><div class="content">I’d assume any decent compiler would optimize a “% 2” (or any power of 2) into a bitwise op. Could be wrong though!</div><br/><div id="38791008" class="c"><input type="checkbox" id="c-38791008" checked=""/><div class="controls bullet"><span class="by">roetlich</span><span>|</span><a href="#38790820">root</a><span>|</span><a href="#38790840">parent</a><span>|</span><a href="#38790924">next</a><span>|</span><label class="collapse" for="c-38791008">[-]</label><label class="expand" for="c-38791008">[2 more]</label></div><br/><div class="children"><div class="content">Tested it!
In C: <a href="https:&#x2F;&#x2F;godbolt.org&#x2F;z&#x2F;7xTrhGasc" rel="nofollow">https:&#x2F;&#x2F;godbolt.org&#x2F;z&#x2F;7xTrhGasc</a>
GCC uses &amp;1 even using -O0. LLVM using -O0 still does the modulo, but at -O1 it does a clever &amp;-2.<p>And even C#: <a href="https:&#x2F;&#x2F;godbolt.org&#x2F;z&#x2F;5WPfT8e5G" rel="nofollow">https:&#x2F;&#x2F;godbolt.org&#x2F;z&#x2F;5WPfT8e5G</a>
Does use the &amp;-2 strategy.<p>Dart also uses and: <a href="https:&#x2F;&#x2F;godbolt.org&#x2F;z&#x2F;1437df4En" rel="nofollow">https:&#x2F;&#x2F;godbolt.org&#x2F;z&#x2F;1437df4En</a><p>So most of languages compiled to native binaries seem to do it. Languages like Ruby and Python don&#x27;t seem to optimize this, which is hardly surprising. Ruby has a JIT now, and the JIT might do it.<p>And I&#x27;m not sure what the haskell version does, can someone explain: <a href="https:&#x2F;&#x2F;godbolt.org&#x2F;z&#x2F;xPP4E1a6h" rel="nofollow">https:&#x2F;&#x2F;godbolt.org&#x2F;z&#x2F;xPP4E1a6h</a> ?</div><br/><div id="38791303" class="c"><input type="checkbox" id="c-38791303" checked=""/><div class="controls bullet"><span class="by">tomsmeding</span><span>|</span><a href="#38790820">root</a><span>|</span><a href="#38791008">parent</a><span>|</span><a href="#38790924">next</a><span>|</span><label class="collapse" for="c-38791303">[-]</label><label class="expand" for="c-38791303">[1 more]</label></div><br/><div class="children"><div class="content">If you change the code from &quot;n `mod` n&quot; to &quot;n `mod` 2&quot;, and add &quot;-O&quot; as a compiler flag, you&#x27;ll see an &quot;and&quot; with 1 pop up in the assembly.<p>Without -O, what&#x27;s happening is that &quot;mod&quot; is a method from the Integral type class (for the non-haskellers: read &quot;interface&quot;&#x2F;&quot;abstract class&quot;), and thus the program just reads the corresponding field from the stafically allocated copy of the Integral dictionary for Int, and subsequently calls it. Of course one should just inline this known function call, and that&#x27;s precisely what -O lets ghc do.</div><br/></div></div></div></div><div id="38790924" class="c"><input type="checkbox" id="c-38790924" checked=""/><div class="controls bullet"><span class="by">constantly</span><span>|</span><a href="#38790820">root</a><span>|</span><a href="#38790840">parent</a><span>|</span><a href="#38791008">prev</a><span>|</span><a href="#38791232">next</a><span>|</span><label class="collapse" for="c-38790924">[-]</label><label class="expand" for="c-38790924">[1 more]</label></div><br/><div class="children"><div class="content">Easy enough to check with even the indecent compilers!<p><a href="https:&#x2F;&#x2F;godbolt.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;godbolt.org&#x2F;</a></div><br/></div></div></div></div></div></div><div id="38791232" class="c"><input type="checkbox" id="c-38791232" checked=""/><div class="controls bullet"><span class="by">brcmthrowaway</span><span>|</span><a href="#38790820">prev</a><span>|</span><a href="#38790906">next</a><span>|</span><label class="collapse" for="c-38791232">[-]</label><label class="expand" for="c-38791232">[1 more]</label></div><br/><div class="children"><div class="content">Those APIs seem like fake pseudocode, until I realized... Windows</div><br/></div></div><div id="38791204" class="c"><input type="checkbox" id="c-38791204" checked=""/><div class="controls bullet"><span class="by">notfed</span><span>|</span><a href="#38790906">prev</a><span>|</span><a href="#38790967">next</a><span>|</span><label class="collapse" for="c-38791204">[-]</label><label class="expand" for="c-38791204">[1 more]</label></div><br/><div class="children"><div class="content">&gt; modulus operation<p>Isn&#x27;t it normally called the modulo operation?</div><br/></div></div><div id="38790967" class="c"><input type="checkbox" id="c-38790967" checked=""/><div class="controls bullet"><span class="by">adastra22</span><span>|</span><a href="#38791204">prev</a><span>|</span><a href="#38791218">next</a><span>|</span><label class="collapse" for="c-38790967">[-]</label><label class="expand" for="c-38790967">[1 more]</label></div><br/><div class="children"><div class="content">I enjoyed this more than I should have.</div><br/></div></div><div id="38791218" class="c"><input type="checkbox" id="c-38791218" checked=""/><div class="controls bullet"><span class="by">brcmthrowaway</span><span>|</span><a href="#38790967">prev</a><span>|</span><a href="#38791148">next</a><span>|</span><label class="collapse" for="c-38791218">[-]</label><label class="expand" for="c-38791218">[1 more]</label></div><br/><div class="children"><div class="content">The skeleton of this post can make a good interview question</div><br/></div></div><div id="38791148" class="c"><input type="checkbox" id="c-38791148" checked=""/><div class="controls bullet"><span class="by">wenyuanyu</span><span>|</span><a href="#38791218">prev</a><span>|</span><a href="#38790826">next</a><span>|</span><label class="collapse" for="c-38791148">[-]</label><label class="expand" for="c-38791148">[1 more]</label></div><br/><div class="children"><div class="content">better to keep &quot;4 billion&quot; in the title... I was confused with &quot;4 bytes&quot; before open the link</div><br/></div></div><div id="38790826" class="c"><input type="checkbox" id="c-38790826" checked=""/><div class="controls bullet"><span class="by">kaetemi</span><span>|</span><a href="#38791148">prev</a><span>|</span><a href="#38790969">next</a><span>|</span><label class="collapse" for="c-38790826">[-]</label><label class="expand" for="c-38790826">[2 more]</label></div><br/><div class="children"><div class="content">Lmao. The copyright headers.</div><br/><div id="38790919" class="c"><input type="checkbox" id="c-38790919" checked=""/><div class="controls bullet"><span class="by">gitgud</span><span>|</span><a href="#38790826">parent</a><span>|</span><a href="#38790969">next</a><span>|</span><label class="collapse" for="c-38790919">[-]</label><label class="expand" for="c-38790919">[1 more]</label></div><br/><div class="children"><div class="content">Didn’t notice that, incredible<p>&gt; <i>Copyright 2023. All unauthorized distribution of this source code 
   will be persecuted to the fullest extent of the law</i></div><br/></div></div></div></div><div id="38790969" class="c"><input type="checkbox" id="c-38790969" checked=""/><div class="controls bullet"><span class="by">charcircuit</span><span>|</span><a href="#38790826">prev</a><span>|</span><a href="#38790873">next</a><span>|</span><label class="collapse" for="c-38790969">[-]</label><label class="expand" for="c-38790969">[4 more]</label></div><br/><div class="children"><div class="content">Here is a version with 0 if statements<p><pre><code>    #include &lt;stdio.h&gt;
    #include &lt;stdlib.h&gt;
    int main(int argc, char** argv) {
        return printf(atoi(argv[1]) &amp; 1 ? &quot;odd&quot; : &quot;even&quot;) &lt; 0;
    }</code></pre></div><br/><div id="38791015" class="c"><input type="checkbox" id="c-38791015" checked=""/><div class="controls bullet"><span class="by">brokensegue</span><span>|</span><a href="#38790969">parent</a><span>|</span><a href="#38790873">next</a><span>|</span><label class="collapse" for="c-38791015">[-]</label><label class="expand" for="c-38791015">[3 more]</label></div><br/><div class="children"><div class="content">Still branches</div><br/><div id="38791087" class="c"><input type="checkbox" id="c-38791087" checked=""/><div class="controls bullet"><span class="by">chrismorgan</span><span>|</span><a href="#38790969">root</a><span>|</span><a href="#38791015">parent</a><span>|</span><a href="#38791157">next</a><span>|</span><label class="collapse" for="c-38791087">[-]</label><label class="expand" for="c-38791087">[1 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>  #include &lt;stdio.h&gt;
  #include &lt;stdlib.h&gt;
  int main(int argc, char** argv) {
      return printf(&amp;&quot;even\0odd&quot;[(atoi(argv[1]) &amp; 1) * 5]) &lt; 0;
  }</code></pre></div><br/></div></div><div id="38791157" class="c"><input type="checkbox" id="c-38791157" checked=""/><div class="controls bullet"><span class="by">charcircuit</span><span>|</span><a href="#38790969">root</a><span>|</span><a href="#38791015">parent</a><span>|</span><a href="#38791087">prev</a><span>|</span><a href="#38790873">next</a><span>|</span><label class="collapse" for="c-38791157">[-]</label><label class="expand" for="c-38791157">[1 more]</label></div><br/><div class="children"><div class="content">Not always. Popular architectures like x86_64 and ARM have instructions for conditional moves. These instructions do not cause the processor to branch.</div><br/></div></div></div></div></div></div><div id="38790873" class="c"><input type="checkbox" id="c-38790873" checked=""/><div class="controls bullet"><span class="by">matrix2596</span><span>|</span><a href="#38790969">prev</a><span>|</span><a href="#38790853">next</a><span>|</span><label class="collapse" for="c-38790873">[-]</label><label class="expand" for="c-38790873">[3 more]</label></div><br/><div class="children"><div class="content">its funny but the large language models can be seen as billions of if statements learnt from data</div><br/><div id="38790941" class="c"><input type="checkbox" id="c-38790941" checked=""/><div class="controls bullet"><span class="by">iopq</span><span>|</span><a href="#38790873">parent</a><span>|</span><a href="#38790853">next</a><span>|</span><label class="collapse" for="c-38790941">[-]</label><label class="expand" for="c-38790941">[2 more]</label></div><br/><div class="children"><div class="content">Not really, since they do a mathematical function over blocks and don&#x27;t need a single if statement. They map learned data + input -&gt; output as a pure function</div><br/><div id="38791202" class="c"><input type="checkbox" id="c-38791202" checked=""/><div class="controls bullet"><span class="by">ryanlbrown</span><span>|</span><a href="#38790873">root</a><span>|</span><a href="#38790941">parent</a><span>|</span><a href="#38790853">next</a><span>|</span><label class="collapse" for="c-38791202">[-]</label><label class="expand" for="c-38791202">[1 more]</label></div><br/><div class="children"><div class="content">ReLU is if-like since it only passes half of the input values with the other half becoming 0</div><br/></div></div></div></div></div></div><div id="38790853" class="c"><input type="checkbox" id="c-38790853" checked=""/><div class="controls bullet"><span class="by">Der_Einzige</span><span>|</span><a href="#38790873">prev</a><span>|</span><a href="#38790762">next</a><span>|</span><label class="collapse" for="c-38790853">[-]</label><label class="expand" for="c-38790853">[2 more]</label></div><br/><div class="children"><div class="content">I was hoping that this would be about someone finally building an LLM out of a decision tree or decision tree derived technique (which ultimately boils down to nested if statements). Not sure why no one has tried it yet.</div><br/><div id="38790890" class="c"><input type="checkbox" id="c-38790890" checked=""/><div class="controls bullet"><span class="by">OscarCunningham</span><span>|</span><a href="#38790853">parent</a><span>|</span><a href="#38790762">next</a><span>|</span><label class="collapse" for="c-38790890">[-]</label><label class="expand" for="c-38790890">[1 more]</label></div><br/><div class="children"><div class="content">My understanding is that they are using increasingly small precision on the floats used by LLMs. So we just have to wait for them to reach 1-bit precision.</div><br/></div></div></div></div><div id="38790762" class="c"><input type="checkbox" id="c-38790762" checked=""/><div class="controls bullet"><span class="by">teaearlgraycold</span><span>|</span><a href="#38790853">prev</a><span>|</span><a href="#38790680">next</a><span>|</span><label class="collapse" for="c-38790762">[-]</label><label class="expand" for="c-38790762">[4 more]</label></div><br/><div class="children"><div class="content">&gt; Now, in a world where AI is replacing programmers by the minute, taking their jobs and revolutionizing the way we think about code<p>I’m dumb. This is a joke right? At most I can say AI has revolutionized how I interface with documentation.</div><br/><div id="38791018" class="c"><input type="checkbox" id="c-38791018" checked=""/><div class="controls bullet"><span class="by">coldtea</span><span>|</span><a href="#38790762">parent</a><span>|</span><a href="#38790793">next</a><span>|</span><label class="collapse" for="c-38791018">[-]</label><label class="expand" for="c-38791018">[1 more]</label></div><br/><div class="children"><div class="content">That is a joke in the context of the post. Not so much a joke in general reality.<p>For you, AI might have just revolutionized how you &quot;interface with documentation&quot;, but a huge share of programmers in any company are already using AI, officially or unofficially as a coding assistant.<p>And of course MS, IntelliJ and others are all having out products on this.</div><br/></div></div><div id="38790793" class="c"><input type="checkbox" id="c-38790793" checked=""/><div class="controls bullet"><span class="by">ninepoints</span><span>|</span><a href="#38790762">parent</a><span>|</span><a href="#38791018">prev</a><span>|</span><a href="#38790819">next</a><span>|</span><label class="collapse" for="c-38790793">[-]</label><label class="expand" for="c-38790793">[1 more]</label></div><br/><div class="children"><div class="content">I would think that the title alone should indicate that this entire bit is satire.</div><br/></div></div><div id="38790819" class="c"><input type="checkbox" id="c-38790819" checked=""/><div class="controls bullet"><span class="by">leosanchez</span><span>|</span><a href="#38790762">parent</a><span>|</span><a href="#38790793">prev</a><span>|</span><a href="#38790680">next</a><span>|</span><label class="collapse" for="c-38790819">[-]</label><label class="expand" for="c-38790819">[1 more]</label></div><br/><div class="children"><div class="content">&gt; This is a joke right?<p>I hope so. If not, it is a load of bullshit.</div><br/></div></div></div></div><div id="38790680" class="c"><input type="checkbox" id="c-38790680" checked=""/><div class="controls bullet"><span class="by">lmm</span><span>|</span><a href="#38790762">prev</a><span>|</span><label class="collapse" for="c-38790680">[-]</label><label class="expand" for="c-38790680">[12 more]</label></div><br/><div class="children"><div class="content">&gt; Considering the computer has to read 40 GB of data from disk, map it to physical memory and then let the CPU has a rip of it<p>No it doesn&#x27;t? Maybe it needs to set up page tables for 40GB, but it doesn&#x27;t need to read the parts you&#x27;re not using into memory, that&#x27;s part of the point of memory-mapping like this - it sets up a page fault handler to load the page into memory when accessed, rather than needing to do it all up-front.</div><br/><div id="38791450" class="c"><input type="checkbox" id="c-38791450" checked=""/><div class="controls bullet"><span class="by">rocqua</span><span>|</span><a href="#38790680">parent</a><span>|</span><a href="#38790692">next</a><span>|</span><label class="collapse" for="c-38791450">[-]</label><label class="expand" for="c-38791450">[1 more]</label></div><br/><div class="children"><div class="content">For the highest possible input, all of the program needs to be read into memory. Just not all of it at the same time.<p>I guess technically most of the RET instructions are jumped over, and so they don&#x27;t need to be in memory. But that isn&#x27;t how cache-lines (let alone pages) work.</div><br/></div></div><div id="38790692" class="c"><input type="checkbox" id="c-38790692" checked=""/><div class="controls bullet"><span class="by">DHowett</span><span>|</span><a href="#38790680">parent</a><span>|</span><a href="#38791450">prev</a><span>|</span><a href="#38790771">next</a><span>|</span><label class="collapse" for="c-38790692">[-]</label><label class="expand" for="c-38790692">[7 more]</label></div><br/><div class="children"><div class="content">Given that the entire linear chain of comparisons (therefore, every instruction) needs to be evaluated for 2^32-1, it would indeed need to read and execute the entire 40GB file.<p>The fact that it does so by faulting in each page before instructions in it can be executed doesn’t materially avoid having to read every byte.<p>Clearly the author should have checked the larger numbers first to prevent this (:</div><br/><div id="38790732" class="c"><input type="checkbox" id="c-38790732" checked=""/><div class="controls bullet"><span class="by">Centigonal</span><span>|</span><a href="#38790680">root</a><span>|</span><a href="#38790692">parent</a><span>|</span><a href="#38791333">next</a><span>|</span><label class="collapse" for="c-38790732">[-]</label><label class="expand" for="c-38790732">[5 more]</label></div><br/><div class="children"><div class="content">Software development needs to be driven by user needs. Clearly the best action in this scenario is to bundle in telemetry code that reports back which numbers are used with this program, assemble a ranking of the most frequently compared numbers in the real world, and use that to order the comparisons in v2 of the program.</div><br/><div id="38791145" class="c"><input type="checkbox" id="c-38791145" checked=""/><div class="controls bullet"><span class="by">chrismorgan</span><span>|</span><a href="#38790680">root</a><span>|</span><a href="#38790732">parent</a><span>|</span><a href="#38791186">next</a><span>|</span><label class="collapse" for="c-38791145">[-]</label><label class="expand" for="c-38791145">[1 more]</label></div><br/><div class="children"><div class="content">It’s worth noting that good compilers can actually do a version of this: it’s called profile-guided optimisation &lt;<a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Profile-guided_optimization" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Profile-guided_optimization</a>&gt;. Not many projects use it, because it’s generally a bit of a bother (build a special version, run your profiling, then build everything all over again), but Firefox gets good mileage out of it. My vague recollection is a typical sort of speedup of 5%.</div><br/></div></div><div id="38791186" class="c"><input type="checkbox" id="c-38791186" checked=""/><div class="controls bullet"><span class="by">eviks</span><span>|</span><a href="#38790680">root</a><span>|</span><a href="#38790732">parent</a><span>|</span><a href="#38791145">prev</a><span>|</span><a href="#38790758">next</a><span>|</span><label class="collapse" for="c-38791186">[-]</label><label class="expand" for="c-38791186">[1 more]</label></div><br/><div class="children"><div class="content">Don&#x27;t forget to remove the least used 1% of the numbers to make it leaner!</div><br/></div></div><div id="38790758" class="c"><input type="checkbox" id="c-38790758" checked=""/><div class="controls bullet"><span class="by">satiric</span><span>|</span><a href="#38790680">root</a><span>|</span><a href="#38790732">parent</a><span>|</span><a href="#38791186">prev</a><span>|</span><a href="#38791333">next</a><span>|</span><label class="collapse" for="c-38790758">[-]</label><label class="expand" for="c-38790758">[2 more]</label></div><br/><div class="children"><div class="content">Of course the modern &quot;scaleable&quot; solution is to ask ChatGPT if the number is even or odd, and then print ChatGPT&#x27;s response.</div><br/><div id="38790938" class="c"><input type="checkbox" id="c-38790938" checked=""/><div class="controls bullet"><span class="by">constantly</span><span>|</span><a href="#38790680">root</a><span>|</span><a href="#38790758">parent</a><span>|</span><a href="#38791333">next</a><span>|</span><label class="collapse" for="c-38790938">[-]</label><label class="expand" for="c-38790938">[1 more]</label></div><br/><div class="children"><div class="content">Using selenium and chrome webdriver under the hood to do so, as well.</div><br/></div></div></div></div></div></div><div id="38791333" class="c"><input type="checkbox" id="c-38791333" checked=""/><div class="controls bullet"><span class="by">lmm</span><span>|</span><a href="#38790680">root</a><span>|</span><a href="#38790692">parent</a><span>|</span><a href="#38790732">prev</a><span>|</span><a href="#38790771">next</a><span>|</span><label class="collapse" for="c-38791333">[-]</label><label class="expand" for="c-38791333">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Given that the entire linear chain of comparisons (therefore, every instruction) needs to be evaluated for 2^32-1, it would indeed need to read and execute the entire 40GB file.<p>It does, but not step by step the way the part I quoted described - the reading from memory can be pipelined with the execution. (And it&#x27;s an ideal access pattern - reading linearly once - so it wouldn&#x27;t surprise me if other optimisations kicked in)</div><br/></div></div></div></div><div id="38790771" class="c"><input type="checkbox" id="c-38790771" checked=""/><div class="controls bullet"><span class="by">slabity</span><span>|</span><a href="#38790680">parent</a><span>|</span><a href="#38790692">prev</a><span>|</span><label class="collapse" for="c-38790771">[-]</label><label class="expand" for="c-38790771">[3 more]</label></div><br/><div class="children"><div class="content">Did you ignore this part that came a bit before that?<p>&gt; I decided to map the file into the address space instead of reading all of it. By doing this, we can just pretend that the entire file is already in memory and let the poor OS deal with fitting a 40 GB blob into virtual memory.<p>Why take a vaguely rhetorical statement and then complain it contradicts a more concretely accurate statement before it?</div><br/><div id="38791309" class="c"><input type="checkbox" id="c-38791309" checked=""/><div class="controls bullet"><span class="by">lmm</span><span>|</span><a href="#38790680">root</a><span>|</span><a href="#38790771">parent</a><span>|</span><label class="collapse" for="c-38791309">[-]</label><label class="expand" for="c-38791309">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Did you ignore this part that came a bit before that?<p>No, just the opposite - I read that and that&#x27;s exactly why I&#x27;m saying there was no need to read the whole thing into memory before starting to execute it.<p>&gt; Why take a vaguely rhetorical statement and then complain it contradicts a more concretely accurate statement before it?<p>Because it&#x27;s a contradiction in what they&#x27;ve written?</div><br/><div id="38791462" class="c"><input type="checkbox" id="c-38791462" checked=""/><div class="controls bullet"><span class="by">rocqua</span><span>|</span><a href="#38790680">root</a><span>|</span><a href="#38791309">parent</a><span>|</span><label class="collapse" for="c-38791462">[-]</label><label class="expand" for="c-38791462">[1 more]</label></div><br/><div class="children"><div class="content">The article doesn&#x27;t state the entire program has to be read into memory before it starts executing. Instead the article states that during execution, for the highest inputs, the entire program needs to pass through memory for execution to finish.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>