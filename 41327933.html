<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1724576472774" as="style"/><link rel="stylesheet" href="styles.css?v=1724576472774"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://healeycodes.com/generating-mazes">Generating Mazes</a> <span class="domain">(<a href="https://healeycodes.com">healeycodes.com</a>)</span></div><div class="subtext"><span>itsjloh</span> | <span>12 comments</span></div><br/><div><div id="41345164" class="c"><input type="checkbox" id="c-41345164" checked=""/><div class="controls bullet"><span class="by">tromp</span><span>|</span><a href="#41344164">next</a><span>|</span><label class="collapse" for="c-41345164">[-]</label><label class="expand" for="c-41345164">[1 more]</label></div><br/><div class="children"><div class="content">With my 1988 IOCCC entry<p><pre><code>    char*M,A,Z,E=40,J[40],T[40];main(C){for(*J=A=scanf(M=&quot;%d&quot;,&amp;C);
    --            E;             J[              E]             =T
    [E   ]=  E)   printf(&quot;._&quot;);  for(;(A-=Z=!Z)  ||  (printf(&quot;\n|&quot;
    )    ,   A    =              39              ,C             --
    )    ;   Z    ||    printf   (M   ))M[Z]=Z[A-(E   =A[J-Z])&amp;&amp;!C
    &amp;    A   ==             T[                                  A]
    |6&lt;&lt;27&lt;rand()||!C&amp;!Z?J[T[E]=T[A]]=E,J[T[A]=A-Z]=A,&quot;_.&quot;:&quot; |&quot;];}
</code></pre>
discussed in more detail in Don Libes&#x27; &quot;Obfuscated C and Other Mysteries&quot; [1],
I turned out to have rediscovered Eller&#x27;s algorithm, which only keeps one line of the maze in memory.<p>[1] <a href="https:&#x2F;&#x2F;tromp.github.io&#x2F;maze.html" rel="nofollow">https:&#x2F;&#x2F;tromp.github.io&#x2F;maze.html</a></div><br/></div></div><div id="41344164" class="c"><input type="checkbox" id="c-41344164" checked=""/><div class="controls bullet"><span class="by">kragen</span><span>|</span><a href="#41345164">prev</a><span>|</span><a href="#41343392">next</a><span>|</span><label class="collapse" for="c-41344164">[-]</label><label class="expand" for="c-41344164">[1 more]</label></div><br/><div class="children"><div class="content">mike bostock did this fantastic visualization of maze generation algorithms a few years ago, including wilson&#x27;s algorithm but not aldous–broder: <a href="https:&#x2F;&#x2F;bost.ocks.org&#x2F;mike&#x2F;algorithms&#x2F;#maze-generation" rel="nofollow">https:&#x2F;&#x2F;bost.ocks.org&#x2F;mike&#x2F;algorithms&#x2F;#maze-generation</a><p>i wrote a minimal roguelike a couple of weeks ago in forth: <a href="http:&#x2F;&#x2F;canonical.org&#x2F;~kragen&#x2F;sw&#x2F;dev3&#x2F;wmaze.fs" rel="nofollow">http:&#x2F;&#x2F;canonical.org&#x2F;~kragen&#x2F;sw&#x2F;dev3&#x2F;wmaze.fs</a> (2-minute asciicast at <a href="https:&#x2F;&#x2F;asciinema.org&#x2F;a&#x2F;672405" rel="nofollow">https:&#x2F;&#x2F;asciinema.org&#x2F;a&#x2F;672405</a>, or you can run it in gforth) and tried to generate the level as a perfect maze with an algorithm related to these, but just visiting the walls in a random order, which doesn&#x27;t produce an unbiased maze<p>however, in rogue, and in wmaze, walls occupy a whole grid cell.  so i decided to remove walls unless they either connected an open cell above to one below that it was already connected to, or an open cell to the left to one to the right that it was already connected to, because i had decided to not permit diagonal movement. but this turned out to have two unexpected effects:<p>1. sometimes it would connect a cell, say, to the left with one above it that it was already connected to.  this results in a maze that isn&#x27;t quite perfect, which i think is an improvement<p>2. sometimes a cell will occur with walls on all four sides of it which are not removed. this is fine unless treasure or the player spawns there, in which case the game is impossible<p>so i need to tweak the algorithm, but i otherwise really like the meandering mazes it produces, and i think the extra connections from point 1 above give the dungeons a desirable nonuniformity and keep the mazes from being too difficult<p>visiting walls in random order has the same effect as prim&#x27;s algorithm with random weights (or equivalently kruskal&#x27;s), but in my case obviously i broke that correspondence because my walls aren&#x27;t graph arcs.  i can recommend doing that on a proper graph as a perfect maze generation algorithm, which is what i did in 02018 in <a href="http:&#x2F;&#x2F;canonical.org&#x2F;~kragen&#x2F;sw&#x2F;dev3&#x2F;unimaze.go" rel="nofollow">http:&#x2F;&#x2F;canonical.org&#x2F;~kragen&#x2F;sw&#x2F;dev3&#x2F;unimaze.go</a>, which is much more readable, if a bit repetitive and longwinded</div><br/></div></div><div id="41343392" class="c"><input type="checkbox" id="c-41343392" checked=""/><div class="controls bullet"><span class="by">mysterydip</span><span>|</span><a href="#41344164">prev</a><span>|</span><a href="#41345227">next</a><span>|</span><label class="collapse" for="c-41343392">[-]</label><label class="expand" for="c-41343392">[2 more]</label></div><br/><div class="children"><div class="content">For those interested in maze generation, I highly recommend &quot;Mazes for Programmers&quot;: <a href="http:&#x2F;&#x2F;www.mazesforprogrammers.com&#x2F;" rel="nofollow">http:&#x2F;&#x2F;www.mazesforprogrammers.com&#x2F;</a></div><br/><div id="41343797" class="c"><input type="checkbox" id="c-41343797" checked=""/><div class="controls bullet"><span class="by">lloydatkinson</span><span>|</span><a href="#41343392">parent</a><span>|</span><a href="#41345227">next</a><span>|</span><label class="collapse" for="c-41343797">[-]</label><label class="expand" for="c-41343797">[1 more]</label></div><br/><div class="children"><div class="content">I also really recommend this book. I&#x27;ve been working through it over the last few months and expanding it and I&#x27;ve still got a lot of book to go! Really fun, interesting, and a great change from some of the usual work.<p>I&#x27;ve been posting my progress with it on mastodon. Generating animated GIFs of the generation and traversal to solve it has been a whole fun sub-topic I&#x27;ve been working on too. I render each computation step to a PNG, and get ffmpeg to build GIFs or MP4s.<p><a href="https:&#x2F;&#x2F;mastodon.social&#x2F;@lloydjatkinson&#x2F;media" rel="nofollow">https:&#x2F;&#x2F;mastodon.social&#x2F;@lloydjatkinson&#x2F;media</a><p>The same author also has a book on raytracing. My wife got me both books for Christmas and I didn&#x27;t realise just how much building&#x2F;hacking&#x2F;creativity&#x2F;fun I&#x27;d get out of them.</div><br/></div></div></div></div><div id="41345227" class="c"><input type="checkbox" id="c-41345227" checked=""/><div class="controls bullet"><span class="by">SynnVoid</span><span>|</span><a href="#41343392">prev</a><span>|</span><a href="#41343766">next</a><span>|</span><label class="collapse" for="c-41345227">[-]</label><label class="expand" for="c-41345227">[1 more]</label></div><br/><div class="children"><div class="content">Another good resource for maze algorithms is Walter D. Pullen&#x27;s website: <a href="https:&#x2F;&#x2F;www.astrolog.org&#x2F;labyrnth&#x2F;algrithm.htm" rel="nofollow">https:&#x2F;&#x2F;www.astrolog.org&#x2F;labyrnth&#x2F;algrithm.htm</a> . The page showing his maze generations is also interesting: <a href="https:&#x2F;&#x2F;www.astrolog.org&#x2F;labyrnth&#x2F;maze.htm" rel="nofollow">https:&#x2F;&#x2F;www.astrolog.org&#x2F;labyrnth&#x2F;maze.htm</a> .</div><br/></div></div><div id="41343766" class="c"><input type="checkbox" id="c-41343766" checked=""/><div class="controls bullet"><span class="by">Arcorann</span><span>|</span><a href="#41345227">prev</a><span>|</span><a href="#41343545">next</a><span>|</span><label class="collapse" for="c-41343766">[-]</label><label class="expand" for="c-41343766">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I also read that starting with Aldous Broder and then switching to Wilson&#x27;s Algorithm (reasoning: Aldous Broder is slow at the end, Wilson&#x27;s Algorithm is slow at the start) is faster than either. However, I haven&#x27;t seen proof that this combination still results in a uniform spanning tree (where all possible mazes have equal probability).<p>I did some searching, and the paper at [1] (2022) studies the problem. Based on the paper, a naive combination of the two algorithms can generate uniform spanning trees on complete graphs, but more work is needed for arbitrary graphs. [2] apparently cites this when discussing their hybrid maze generating algorithm, but I haven&#x27;t been able to find a copy to check.<p>[1] <a href="https:&#x2F;&#x2F;arxiv.org&#x2F;abs&#x2F;2206.12378" rel="nofollow">https:&#x2F;&#x2F;arxiv.org&#x2F;abs&#x2F;2206.12378</a>
[2] <a href="https:&#x2F;&#x2F;www.spiedigitallibrary.org&#x2F;conference-proceedings-of-spie&#x2F;12941&#x2F;3011553&#x2F;A-hybrid-approach-to-maze-generation-algorithms&#x2F;10.1117&#x2F;12.3011553.short" rel="nofollow">https:&#x2F;&#x2F;www.spiedigitallibrary.org&#x2F;conference-proceedings-of...</a></div><br/></div></div><div id="41343545" class="c"><input type="checkbox" id="c-41343545" checked=""/><div class="controls bullet"><span class="by">zazaulola</span><span>|</span><a href="#41343766">prev</a><span>|</span><a href="#41344619">next</a><span>|</span><label class="collapse" for="c-41343545">[-]</label><label class="expand" for="c-41343545">[1 more]</label></div><br/><div class="children"><div class="content">This article is more complete and more interactive:<p><a href="https:&#x2F;&#x2F;weblog.jamisbuck.org&#x2F;2011&#x2F;2&#x2F;7&#x2F;maze-generation-algorithm-recap" rel="nofollow">https:&#x2F;&#x2F;weblog.jamisbuck.org&#x2F;2011&#x2F;2&#x2F;7&#x2F;maze-generation-algori...</a><p>Code for generating mazes in different languages can be found here:<p><a href="https:&#x2F;&#x2F;rosettacode.org&#x2F;wiki&#x2F;Maze_generation" rel="nofollow">https:&#x2F;&#x2F;rosettacode.org&#x2F;wiki&#x2F;Maze_generation</a></div><br/></div></div><div id="41344619" class="c"><input type="checkbox" id="c-41344619" checked=""/><div class="controls bullet"><span class="by">efilife</span><span>|</span><a href="#41343545">prev</a><span>|</span><a href="#41344411">next</a><span>|</span><label class="collapse" for="c-41344619">[-]</label><label class="expand" for="c-41344619">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t understand. The article is about maze generation and it only talks about traversing predefined mazes. I had a similar thought after reading an article about generating sudokus. Like they were alreadt generated and the article was about creating a solver. I am surely missing something, what&#x27;s the part I don&#x27;t understand?<p>Ok, after rereading I think I&#x27;m starting to understand. The walls of the cells are generated after, based on the path the generator went through? I feel stupid for not understanding this later but will leave this in case I still don&#x27;t understand something</div><br/></div></div><div id="41344411" class="c"><input type="checkbox" id="c-41344411" checked=""/><div class="controls bullet"><span class="by">KingOfCoders</span><span>|</span><a href="#41344619">prev</a><span>|</span><label class="collapse" for="c-41344411">[-]</label><label class="expand" for="c-41344411">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve generated mazes for the cover of my poetry book<p><a href="https:&#x2F;&#x2F;www.amazon.com&#x2F;Olavsweg-Gedichte-Gedanken-lyrische-Inspiration-ebook&#x2F;dp&#x2F;B0893R2638&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.amazon.com&#x2F;Olavsweg-Gedichte-Gedanken-lyrische-I...</a></div><br/><div id="41344451" class="c"><input type="checkbox" id="c-41344451" checked=""/><div class="controls bullet"><span class="by">kragen</span><span>|</span><a href="#41344411">parent</a><span>|</span><label class="collapse" for="c-41344451">[-]</label><label class="expand" for="c-41344451">[2 more]</label></div><br/><div class="children"><div class="content">these are pretty! are they from depth-first search?</div><br/><div id="41344486" class="c"><input type="checkbox" id="c-41344486" checked=""/><div class="controls bullet"><span class="by">KingOfCoders</span><span>|</span><a href="#41344411">root</a><span>|</span><a href="#41344451">parent</a><span>|</span><label class="collapse" for="c-41344486">[-]</label><label class="expand" for="c-41344486">[1 more]</label></div><br/><div class="children"><div class="content">Thanks!
I sadly no longer remember and have the code no longer it seems.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>