<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1704877265414" as="style"/><link rel="stylesheet" href="styles.css?v=1704877265414"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/ambulancja/mariposa">Mariposa – A programming language with time-travel</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>blatta</span> | <span>15 comments</span></div><br/><div><div id="38936482" class="c"><input type="checkbox" id="c-38936482" checked=""/><div class="controls bullet"><span class="by">Zambyte</span><span>|</span><a href="#38937720">next</a><span>|</span><label class="collapse" for="c-38936482">[-]</label><label class="expand" for="c-38936482">[4 more]</label></div><br/><div class="children"><div class="content">It seems to me like this should be something that can be done using continuations in Scheme. I tried writing the first example:<p><pre><code>    (define x 1)
    (define t (now))
    (display x)
    (at t
        (set! x 2))
</code></pre>
and trying to implement now and <i>at</i> in a way that would behave correctly. I ran into a wall trying to implement it, because I don&#x27;t think there is a way to define <i>at</i> that could reference the environment that <i>t</i> was defined in. Maybe a more powerful language like Kernel[0] could implement the same features, but I don&#x27;t think Scheme can. Very cool!<p>Also FWIW here is the definition of <i>now</i> and <i>at</i> that I had before I decided to stop:<p><pre><code>    (define-syntax now
      (syntax-rules ()
        ((_)
         (call&#x2F;cc
          (lambda (k)
            (lambda (at-body) (at-body) (k #f)))))))

    (define-syntax at
      (syntax-rules ()
        ((_ instant body1 body ...)
         (instant (lambda () body1 body ...)))))
</code></pre>
[0] <a href="https:&#x2F;&#x2F;web.cs.wpi.edu&#x2F;~jshutt&#x2F;kernel.html" rel="nofollow">https:&#x2F;&#x2F;web.cs.wpi.edu&#x2F;~jshutt&#x2F;kernel.html</a></div><br/><div id="38936676" class="c"><input type="checkbox" id="c-38936676" checked=""/><div class="controls bullet"><span class="by">MathMonkeyMan</span><span>|</span><a href="#38936482">parent</a><span>|</span><a href="#38937720">next</a><span>|</span><label class="collapse" for="c-38936676">[-]</label><label class="expand" for="c-38936676">[3 more]</label></div><br/><div class="children"><div class="content">You might have to require that any code that uses the now&#x2F;at constructs be wrapped in a macro invocation, e.g. (with-time-travel ...). The with-time-travel macro would then be a syntax transformer that rewrites the program. I&#x27;m not sure how, though... you&#x27;d have to enumerate all of the code blocks that are inside &quot;at&quot; forms, and then conditionally dispatch to them in the expansion of the &quot;now&quot; form; but that doesn&#x27;t quite work because (now) is a value, and so figuring out which &quot;at&quot; forms consume it is probably undecidable. You can&#x27;t have all the cases in the expansion, either, because of the incompatible environments.<p>It&#x27;s an interesting problem, but one that I think is ok not to be able to solve in Scheme.</div><br/><div id="38936811" class="c"><input type="checkbox" id="c-38936811" checked=""/><div class="controls bullet"><span class="by">autumn-antlers</span><span>|</span><a href="#38936482">root</a><span>|</span><a href="#38936676">parent</a><span>|</span><a href="#38937720">next</a><span>|</span><label class="collapse" for="c-38936811">[-]</label><label class="expand" for="c-38936811">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s only legal for each `now` to be consumed by at-most one `at` form, so at that point you&#x27;d just be re-implementing the &quot;timeline&quot; and &quot;instant&quot; system from mariposa. The need to wrap the program in a form and the management of `now` &quot;values&quot; has me pondering the implications of IanTheHenry&#x27;s macaroni[1] system, which (like the CSS :has operator) allow macros to climb up into manipulations of their <i>parent</i> forms-- the `now` macro could effectively wrap every remaining form in the program with a new context that augments eg. the closure of `at`. But indeed, perhaps a problem to not become <i>too</i> invested in :p<p>1: <a href="https:&#x2F;&#x2F;github.com&#x2F;ianthehenry&#x2F;macaroni">https:&#x2F;&#x2F;github.com&#x2F;ianthehenry&#x2F;macaroni</a></div><br/><div id="38937932" class="c"><input type="checkbox" id="c-38937932" checked=""/><div class="controls bullet"><span class="by">autumn-antlers</span><span>|</span><a href="#38936482">root</a><span>|</span><a href="#38936811">parent</a><span>|</span><a href="#38937720">next</a><span>|</span><label class="collapse" for="c-38937932">[-]</label><label class="expand" for="c-38937932">[1 more]</label></div><br/><div class="children"><div class="content">&gt; perhaps a problem to not become too invested in<p>uh, case in point, that hypothetical closure would have some difficulty crossing module boundries (and that&#x27;s assuming it gets away with re-writing top-level define forms), but still nothing technically incomputable, just supremely ill-advised and still closer to a reimplimentation of mariposa&#x27;s semantics than a truely native concept emerging out of the continuations system</div><br/></div></div></div></div></div></div></div></div><div id="38937720" class="c"><input type="checkbox" id="c-38937720" checked=""/><div class="controls bullet"><span class="by">082349872349872</span><span>|</span><a href="#38936482">prev</a><span>|</span><a href="#38936499">next</a><span>|</span><label class="collapse" for="c-38937720">[-]</label><label class="expand" for="c-38937720">[1 more]</label></div><br/><div class="children"><div class="content">Related (and, to my mind, more thoroughly thought out): Elephant 2000<p><a href="http:&#x2F;&#x2F;www-formal.stanford.edu&#x2F;jmc&#x2F;elephant&#x2F;elephant.html" rel="nofollow">http:&#x2F;&#x2F;www-formal.stanford.edu&#x2F;jmc&#x2F;elephant&#x2F;elephant.html</a></div><br/></div></div><div id="38936499" class="c"><input type="checkbox" id="c-38936499" checked=""/><div class="controls bullet"><span class="by">Archit3ch</span><span>|</span><a href="#38937720">prev</a><span>|</span><a href="#38937289">next</a><span>|</span><label class="collapse" for="c-38936499">[-]</label><label class="expand" for="c-38936499">[1 more]</label></div><br/><div class="children"><div class="content">Come From Statement Considered Harmful</div><br/></div></div><div id="38937289" class="c"><input type="checkbox" id="c-38937289" checked=""/><div class="controls bullet"><span class="by">woolion</span><span>|</span><a href="#38936499">prev</a><span>|</span><a href="#38937215">next</a><span>|</span><label class="collapse" for="c-38937289">[-]</label><label class="expand" for="c-38937289">[2 more]</label></div><br/><div class="children"><div class="content">Maybe add (toy) programming language in the title? 
I thought this would be a language integrating a time-travel debugger as main feature.
As a toy experiment it is fun, but shockingly useless if you come with such an expectation.</div><br/><div id="38937642" class="c"><input type="checkbox" id="c-38937642" checked=""/><div class="controls bullet"><span class="by">Laremere</span><span>|</span><a href="#38937289">parent</a><span>|</span><a href="#38937215">next</a><span>|</span><label class="collapse" for="c-38937642">[-]</label><label class="expand" for="c-38937642">[1 more]</label></div><br/><div class="children"><div class="content">You may be interested in <a href="https:&#x2F;&#x2F;whitebox.systems&#x2F;" rel="nofollow">https:&#x2F;&#x2F;whitebox.systems&#x2F;</a>
or this tech demo from Tomorrow Corporation: <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=72y2EC5fkcE" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=72y2EC5fkcE</a></div><br/></div></div></div></div><div id="38937215" class="c"><input type="checkbox" id="c-38937215" checked=""/><div class="controls bullet"><span class="by">zubairq</span><span>|</span><a href="#38937289">prev</a><span>|</span><a href="#38936669">next</a><span>|</span><label class="collapse" for="c-38937215">[-]</label><label class="expand" for="c-38937215">[1 more]</label></div><br/><div class="children"><div class="content">I like the idea of this time travelling computer language. It got my head buzzing with all sorts of ideas about time travel in the real world too, and parallel universes!</div><br/></div></div><div id="38936669" class="c"><input type="checkbox" id="c-38936669" checked=""/><div class="controls bullet"><span class="by">erikerikson</span><span>|</span><a href="#38937215">prev</a><span>|</span><a href="#38936276">next</a><span>|</span><label class="collapse" for="c-38936669">[-]</label><label class="expand" for="c-38936669">[2 more]</label></div><br/><div class="children"><div class="content">Okay but why?<p>Sincerely: what is the pragmatic value?<p>[edit: NM, end of the page...<p>&gt; Semantics and correctness of implementation
It is not obvious how the Mariposa language could be given a formal semantics. Since there is no specification of its semantics, it doesn&#x27;t even make sense to ask if the implementation is right or wrong. However, we are sure that the implementation is incorrect for almost any conceivable semantics. It should be understood only as an exploratory game.<p>]</div><br/><div id="38937303" class="c"><input type="checkbox" id="c-38937303" checked=""/><div class="controls bullet"><span class="by">tincholio</span><span>|</span><a href="#38936669">parent</a><span>|</span><a href="#38936276">next</a><span>|</span><label class="collapse" for="c-38937303">[-]</label><label class="expand" for="c-38937303">[1 more]</label></div><br/><div class="children"><div class="content">Exactly, there&#x27;s no rationale given, nor any practical example of where this would be useful. Mutability is already a source of complexity, adding time-traveling to it seems like it would just make it worse...</div><br/></div></div></div></div><div id="38936276" class="c"><input type="checkbox" id="c-38936276" checked=""/><div class="controls bullet"><span class="by">bqmjjx0kac</span><span>|</span><a href="#38936669">prev</a><span>|</span><label class="collapse" for="c-38936276">[-]</label><label class="expand" for="c-38936276">[3 more]</label></div><br/><div class="children"><div class="content">Not to be dismissive, but this feels like pointers and lambdas with extra steps.</div><br/><div id="38936336" class="c"><input type="checkbox" id="c-38936336" checked=""/><div class="controls bullet"><span class="by">chuckadams</span><span>|</span><a href="#38936276">parent</a><span>|</span><a href="#38936346">next</a><span>|</span><label class="collapse" for="c-38936336">[-]</label><label class="expand" for="c-38936336">[1 more]</label></div><br/><div class="children"><div class="content">Technically, everything is lambda with extra steps.</div><br/></div></div><div id="38936346" class="c"><input type="checkbox" id="c-38936346" checked=""/><div class="controls bullet"><span class="by">readthenotes1</span><span>|</span><a href="#38936276">parent</a><span>|</span><a href="#38936336">prev</a><span>|</span><label class="collapse" for="c-38936346">[-]</label><label class="expand" for="c-38936346">[1 more]</label></div><br/><div class="children"><div class="content">Well, that&#x27;s at least a bit reductive. It&#x27;s all electrons in most programs, but that doesn&#x27;t mean we don&#x27;t get advantages from higher level abstractions</div><br/></div></div></div></div></div></div></div></div></div></body></html>