<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1733389256624" as="style"/><link rel="stylesheet" href="styles.css?v=1733389256624"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://600f3559.prunt-docs.pages.dev/">Show HN: A 5th order motion planner with PH spline blending, written in Ada</a> <span class="domain">(<a href="https://600f3559.prunt-docs.pages.dev">600f3559.prunt-docs.pages.dev</a>)</span></div><div class="subtext"><span>LiamPowell</span> | <span>33 comments</span></div><br/><div><div id="42318772" class="c"><input type="checkbox" id="c-42318772" checked=""/><div class="controls bullet"><span class="by">parsimo2010</span><span>|</span><a href="#42325105">next</a><span>|</span><label class="collapse" for="c-42318772">[-]</label><label class="expand" for="c-42318772">[6 more]</label></div><br/><div class="children"><div class="content">Some thoughts:<p>1. It looks like you&#x27;re selling hardware to go along with the firmware, which seems like it has nice features but also seems like it will be expensive.  Sometimes the presence of first-class hardware results in other hardware being treated as &quot;second-class&quot; and results in limited adoption, especially since it sounds like the first-class hardware will eventually be much more than $100.  (another hobbyist community, the FPV drone community, has shown this with FETtec brand having their own KISS firmware which is basically only used by them, and almost everyone else uses another alternative). You should care about limited adoption because that means a smaller number of outside contributors to your project.<p>2. You list that Prunt has features not available on other systems, which is nice, but it is not obvious how this will affect print quality&#x2F;speed&#x2F;accuracy, which I think are the primary concerns of most users.<p><pre><code>  a. Adjustable acceleration is already an option on most systems, does editing jerk&#x2F;snap&#x2F;crackle actually improve my print quality or just give me more parameters to fiddle with?  I say this because Klipper is fairly impressive, and it would be nice to see some examples of how much extra motion terms improves a print. 

  b. Editing pinouts is a one-time thing and not an issue on common boards, so this is a limited benefit when you already need to be technically savvy to be building or modifying a 3D printer.  

  c. Safter&#x2F;faster homing seems like a niche issue- I have never had any homing issues, and how much time do I actually save if I crank the speed up?  A few seconds per print?
</code></pre>
I guess I should add- good luck!  The 3D printing community will certainly benefit from more ideas and development effort.</div><br/><div id="42319490" class="c"><input type="checkbox" id="c-42319490" checked=""/><div class="controls bullet"><span class="by">LiamPowell</span><span>|</span><a href="#42318772">parent</a><span>|</span><a href="#42325105">next</a><span>|</span><label class="collapse" for="c-42319490">[-]</label><label class="expand" for="c-42319490">[5 more]</label></div><br/><div class="children"><div class="content">&gt; Sometimes the presence of first-class hardware results in other hardware being treated as &quot;second-class&quot;<p>The firmware is entirely open source so it should be easy for other companies to port it to their own hardware. The MCU we use is also supported by Klipper and Marlin, so there will not have to be a decision between designing hardware for Prunt or other options. That being said, there is no existing hardware that our firmware can be ported to directly as we make extensive use of hardware timers rather than doing pulse generation&#x2F;counting in software and 3D printer hardware is not generally designed with this in mind.<p>It should be reasonably simple to do everything in software if anyone were inclined to do so to support existing boards. Prunt itself is actually a library with a very high level API intended to make it easy to support all sorts of odd hardware: <a href="https:&#x2F;&#x2F;github.com&#x2F;Prunt3D&#x2F;prunt&#x2F;blob&#x2F;6a9dbd0a8d5edd890e4b726935c308f9a0ff8060&#x2F;src&#x2F;prunt-controller.ads#L37-L157">https:&#x2F;&#x2F;github.com&#x2F;Prunt3D&#x2F;prunt&#x2F;blob&#x2F;6a9dbd0a8d5edd890e4b72...</a><p>There is also an example of a very trivial implementation here that just dumps commanded positions to stdout which can be used as a starting point: <a href="https:&#x2F;&#x2F;github.com&#x2F;Prunt3D&#x2F;prunt_simulator&#x2F;blob&#x2F;master&#x2F;src&#x2F;prunt_simulator.adb">https:&#x2F;&#x2F;github.com&#x2F;Prunt3D&#x2F;prunt_simulator&#x2F;blob&#x2F;master&#x2F;src&#x2F;p...</a><p>&gt; especially since it sounds like the first-class hardware will eventually be much more than $100<p>The BOM cost is over $100, so this will be the case, however I would like to try and keep the price well under $200 for something similar to the current hardware.<p>&gt; Adjustable acceleration is already an option on most systems, does editing jerk&#x2F;snap&#x2F;crackle actually improve my print quality or just give me more parameters to fiddle with?<p>In my testing I have seen less resonance artefacts with higher order limits as opposed to just limiting acceleration, however I have not done extensive comparisons to other options such as input shaping.<p>&gt; Safter&#x2F;faster homing seems like a niche issue- I have never had any homing issues, and how much time do I actually save if I crank the speed up?  A few seconds per print?<p>The main issue we&#x27;re solving here is guaranteeing that the switch will never move out of its allowable range when other parameters such as acceleration are changed. For most people the benefit here is likely just never having to think about what number they should put in for homing velocity.</div><br/><div id="42320093" class="c"><input type="checkbox" id="c-42320093" checked=""/><div class="controls bullet"><span class="by">axoltl</span><span>|</span><a href="#42318772">root</a><span>|</span><a href="#42319490">parent</a><span>|</span><a href="#42325105">next</a><span>|</span><label class="collapse" for="c-42320093">[-]</label><label class="expand" for="c-42320093">[4 more]</label></div><br/><div class="children"><div class="content">Could you elaborate on the hardware timers? How are these different from the timers that exist in the microcontroller, and what design changes are required in hardware?<p>Or is your point that the outputs from these timers can&#x27;t be muxed to the pins that current hardware wires up?</div><br/><div id="42320143" class="c"><input type="checkbox" id="c-42320143" checked=""/><div class="controls bullet"><span class="by">LiamPowell</span><span>|</span><a href="#42318772">root</a><span>|</span><a href="#42320093">parent</a><span>|</span><a href="#42325105">next</a><span>|</span><label class="collapse" for="c-42320143">[-]</label><label class="expand" for="c-42320143">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Or is your point that the outputs from these timers can&#x27;t be muxed to the pins that current hardware wires up?<p>This. As far as I&#x27;m aware, other boards are just designed in the way that makes the layout easiest. The timers we&#x27;re using are also fixed to specific pins with no muxxing (HRTIM on the STM32G474 specifically).</div><br/><div id="42321977" class="c"><input type="checkbox" id="c-42321977" checked=""/><div class="controls bullet"><span class="by">tonyarkles</span><span>|</span><a href="#42318772">root</a><span>|</span><a href="#42320143">parent</a><span>|</span><a href="#42325105">next</a><span>|</span><label class="collapse" for="c-42321977">[-]</label><label class="expand" for="c-42321977">[2 more]</label></div><br/><div class="children"><div class="content">I was both excited and disappointed reading the list of hardware features. I, admittedly, have spent the last 6 years working in (not-human-rated) aerospace. Excited because the points you make on the site are definitely things that I&#x27;ve been disappointed to see missing on most existing hardware, and disappointed because... I wish that that list of features wasn&#x27;t special at all and everyone made more robust hardware like that :)<p>I&#x27;m very curious about the Ada firmware and am hoping I&#x27;ll have some time around Christmas break to have a dig into it. Last time I did anything with Ada was in grad school about 15 years ago and I loved it; I&#x27;m really excited to see what the bridge between Ada and a microcontroller looks like (see above... aerospace!)</div><br/><div id="42323969" class="c"><input type="checkbox" id="c-42323969" checked=""/><div class="controls bullet"><span class="by">LiamPowell</span><span>|</span><a href="#42318772">root</a><span>|</span><a href="#42321977">parent</a><span>|</span><a href="#42325105">next</a><span>|</span><label class="collapse" for="c-42323969">[-]</label><label class="expand" for="c-42323969">[1 more]</label></div><br/><div class="children"><div class="content">&gt; what the bridge between Ada and a microcontroller looks like<p>At a high level, we&#x27;re just putting records with representation clauses directly on to a UART: <a href="https:&#x2F;&#x2F;github.com&#x2F;Prunt3D&#x2F;prunt_board_2_software&#x2F;blob&#x2F;master&#x2F;shared&#x2F;src&#x2F;messages.ads">https:&#x2F;&#x2F;github.com&#x2F;Prunt3D&#x2F;prunt_board_2_software&#x2F;blob&#x2F;maste...</a></div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="42325105" class="c"><input type="checkbox" id="c-42325105" checked=""/><div class="controls bullet"><span class="by">simojo</span><span>|</span><a href="#42318772">prev</a><span>|</span><a href="#42319347">next</a><span>|</span><label class="collapse" for="c-42325105">[-]</label><label class="expand" for="c-42325105">[1 more]</label></div><br/><div class="children"><div class="content">Can anyone give insight on what kind of controller they&#x27;re using? It would be more interesting to see _how_ they achieved it.</div><br/></div></div><div id="42319347" class="c"><input type="checkbox" id="c-42319347" checked=""/><div class="controls bullet"><span class="by">kstrauser</span><span>|</span><a href="#42325105">prev</a><span>|</span><a href="#42319418">next</a><span>|</span><label class="collapse" for="c-42319347">[-]</label><label class="expand" for="c-42319347">[8 more]</label></div><br/><div class="children"><div class="content">What led you to pick Ada? What was the development experience like?</div><br/><div id="42319962" class="c"><input type="checkbox" id="c-42319962" checked=""/><div class="controls bullet"><span class="by">LiamPowell</span><span>|</span><a href="#42319347">parent</a><span>|</span><a href="#42319418">next</a><span>|</span><label class="collapse" for="c-42319962">[-]</label><label class="expand" for="c-42319962">[7 more]</label></div><br/><div class="children"><div class="content">Mostly I just like Ada, but there&#x27;s a few things have been very useful here:<p>1. GCC has built-in dimensional analysis, which has saved me from errors that would have otherwise taken hours to track down or may have just gone unnoticed multiple times. As an example of this, there&#x27;s a transcription error in the below code:<p><a href="https:&#x2F;&#x2F;prunt3d.com&#x2F;images&#x2F;hn_dimensional_analysis_1.png" rel="nofollow">https:&#x2F;&#x2F;prunt3d.com&#x2F;images&#x2F;hn_dimensional_analysis_1.png</a><p>This line caused a compiler error that made it trivial to track down:<p><a href="https:&#x2F;&#x2F;prunt3d.com&#x2F;images&#x2F;hn_dimensional_analysis_2.png" rel="nofollow">https:&#x2F;&#x2F;prunt3d.com&#x2F;images&#x2F;hn_dimensional_analysis_2.png</a><p><a href="https:&#x2F;&#x2F;prunt3d.com&#x2F;images&#x2F;hn_dimensional_analysis_3.png" rel="nofollow">https:&#x2F;&#x2F;prunt3d.com&#x2F;images&#x2F;hn_dimensional_analysis_3.png</a><p>2. Intertask communication in Ada is nicer to work with than any other language I am familiar with, making it easy to make both the host and MCU software multithreaded: <a href="https:&#x2F;&#x2F;learn.adacore.com&#x2F;courses&#x2F;Ada_For_The_CPP_Java_Developer&#x2F;chapters&#x2F;11_Concurrency.html#rendezvous" rel="nofollow">https:&#x2F;&#x2F;learn.adacore.com&#x2F;courses&#x2F;Ada_For_The_CPP_Java_Devel...</a><p>3. On the firmware side on things, Ada supports preemptive multitasking and exceptions with full tracebacks on small MCUs, which made firmware development much easier. Having preconditions that throw exceptions on procedures for controlling peripherals prevents a few hard to debug issues.<p>4. Someone already ported Adacore&#x27;s embedded runtime to the MCU we use, so that was less work for me: <a href="https:&#x2F;&#x2F;github.com&#x2F;JCGobbi&#x2F;Nucleo-STM32G474RE">https:&#x2F;&#x2F;github.com&#x2F;JCGobbi&#x2F;Nucleo-STM32G474RE</a><p>5. Ada supports defining the exact layout of types rather than having to rely on something like protobuf to get messages between the host and the MCU. I can just set the fields in these records and stream the bytes over a UART without any extra (de)serialisation: <a href="https:&#x2F;&#x2F;github.com&#x2F;Prunt3D&#x2F;prunt_board_2_software&#x2F;blob&#x2F;master&#x2F;shared&#x2F;src&#x2F;messages.ads">https:&#x2F;&#x2F;github.com&#x2F;Prunt3D&#x2F;prunt_board_2_software&#x2F;blob&#x2F;maste...</a></div><br/><div id="42323289" class="c"><input type="checkbox" id="c-42323289" checked=""/><div class="controls bullet"><span class="by">kstrauser</span><span>|</span><a href="#42319347">root</a><span>|</span><a href="#42319962">parent</a><span>|</span><a href="#42325646">next</a><span>|</span><label class="collapse" for="c-42323289">[-]</label><label class="expand" for="c-42323289">[1 more]</label></div><br/><div class="children"><div class="content">Right on. It&#x27;s not something I see in the wild often, and it surely piqued my interested.</div><br/></div></div><div id="42325646" class="c"><input type="checkbox" id="c-42325646" checked=""/><div class="controls bullet"><span class="by">gautamcgoel</span><span>|</span><a href="#42319347">root</a><span>|</span><a href="#42319962">parent</a><span>|</span><a href="#42323289">prev</a><span>|</span><a href="#42325676">next</a><span>|</span><label class="collapse" for="c-42325646">[-]</label><label class="expand" for="c-42325646">[1 more]</label></div><br/><div class="children"><div class="content">Thanks for this detailed information, this is very interesting!</div><br/></div></div><div id="42325676" class="c"><input type="checkbox" id="c-42325676" checked=""/><div class="controls bullet"><span class="by">s1110</span><span>|</span><a href="#42319347">root</a><span>|</span><a href="#42319962">parent</a><span>|</span><a href="#42325646">prev</a><span>|</span><a href="#42320123">next</a><span>|</span><label class="collapse" for="c-42325676">[-]</label><label class="expand" for="c-42325676">[2 more]</label></div><br/><div class="children"><div class="content">What&#x27;s your Emacs setup for Ada?</div><br/><div id="42325739" class="c"><input type="checkbox" id="c-42325739" checked=""/><div class="controls bullet"><span class="by">LiamPowell</span><span>|</span><a href="#42319347">root</a><span>|</span><a href="#42325676">parent</a><span>|</span><a href="#42320123">next</a><span>|</span><label class="collapse" for="c-42325739">[-]</label><label class="expand" for="c-42325739">[1 more]</label></div><br/><div class="children"><div class="content">Eglot, Ada Language Server, and Ada mode from ELPA with the following config:<p><pre><code>    (use-package ada-mode)
    (add-hook &#x27;ada-mode-hook #&#x27;lsp! &#x27;append)
    (setq-default ada-xref-backend &#x27;eglot)
    (setq-default ada-diagnostics-backend &#x27;eglot)
    (add-hook &#x27;ada-mode-hook (lambda () (set (make-local-variable &#x27;comment-start) &quot;--  &quot;)))

    (custom-set-variables
     &#x27;(ada-fill-comment-prefix #(&quot;--  &quot; 0 2 (syntax-table (11))))
     &#x27;(wisi-size-threshold 2))
</code></pre>
Then for each project I have a .dir-locals.el similar to the following:<p><pre><code>    ((ada-mode . ((eglot-workspace-configuration . (:ada
                                                    (:projectFile &quot;AAA.gpr&quot;)))
                  (tab-width . 3)
                  (fill-column . 119)
                  (indent-tabs-mode . nil))))</code></pre></div><br/></div></div></div></div><div id="42320123" class="c"><input type="checkbox" id="c-42320123" checked=""/><div class="controls bullet"><span class="by">JTyQZSnP3cQGa8B</span><span>|</span><a href="#42319347">root</a><span>|</span><a href="#42319962">parent</a><span>|</span><a href="#42325676">prev</a><span>|</span><a href="#42319418">next</a><span>|</span><label class="collapse" for="c-42320123">[-]</label><label class="expand" for="c-42320123">[2 more]</label></div><br/><div class="children"><div class="content">I got this error for your PNGs:<p>&gt; Access denied
&gt; The owner of this website (prunt3d.com) does not allow hotlinking to that resource (&#x2F;images&#x2F;hn_dimensional_analysis_2.png).</div><br/><div id="42320156" class="c"><input type="checkbox" id="c-42320156" checked=""/><div class="controls bullet"><span class="by">LiamPowell</span><span>|</span><a href="#42319347">root</a><span>|</span><a href="#42320123">parent</a><span>|</span><a href="#42319418">next</a><span>|</span><label class="collapse" for="c-42320156">[-]</label><label class="expand" for="c-42320156">[1 more]</label></div><br/><div class="children"><div class="content">Oops, turns out hotlink protection is on by default. Fixed now.</div><br/></div></div></div></div></div></div></div></div><div id="42319418" class="c"><input type="checkbox" id="c-42319418" checked=""/><div class="controls bullet"><span class="by">amelius</span><span>|</span><a href="#42319347">prev</a><span>|</span><a href="#42320392">next</a><span>|</span><label class="collapse" for="c-42319418">[-]</label><label class="expand" for="c-42319418">[5 more]</label></div><br/><div class="children"><div class="content">Why would you want your printer to blend corners, when you can also just put it in the g-code while keeping the printer faithful to it.</div><br/><div id="42319659" class="c"><input type="checkbox" id="c-42319659" checked=""/><div class="controls bullet"><span class="by">LiamPowell</span><span>|</span><a href="#42319418">parent</a><span>|</span><a href="#42320392">next</a><span>|</span><label class="collapse" for="c-42319659">[-]</label><label class="expand" for="c-42319659">[4 more]</label></div><br/><div class="children"><div class="content">Marlin and Klipper are not actually faithful to what is in your g-code. Both will move through corners without going down to zero velocity, this results in a point with infinite axial acceleration, which is physically impossible and will generate a somewhat rounded corner while also causing vibrations in the printer. Prunt replaces this with a small rounded corner with G5 continuity, which results in less vibration as there is bounded axial acceleration (and jerk&#x2F;snap&#x2F;crackle).<p>Klipper and Marlin do support circular arcs if they are added to the g-code by the user, but these are not quite as good as our corners as they have infinite axial jerk at the point where the arc meets a straight line, as shown in the below images:<p>Circular corner blending: <a href="https:&#x2F;&#x2F;prunt3d.com&#x2F;images&#x2F;circle_corner&#x2F;" rel="nofollow">https:&#x2F;&#x2F;prunt3d.com&#x2F;images&#x2F;circle_corner&#x2F;</a><p>Ours: <a href="https:&#x2F;&#x2F;prunt3d.com&#x2F;images&#x2F;prunt_corner&#x2F;" rel="nofollow">https:&#x2F;&#x2F;prunt3d.com&#x2F;images&#x2F;prunt_corner&#x2F;</a><p>I should also note before someone else does that technically infinite pop makes our corners physically impossible too, however at the 6th derivative of position it really ceases to matter in practice.</div><br/><div id="42319823" class="c"><input type="checkbox" id="c-42319823" checked=""/><div class="controls bullet"><span class="by">amelius</span><span>|</span><a href="#42319418">root</a><span>|</span><a href="#42319659">parent</a><span>|</span><a href="#42320392">next</a><span>|</span><label class="collapse" for="c-42319823">[-]</label><label class="expand" for="c-42319823">[3 more]</label></div><br/><div class="children"><div class="content">Thanks for the explanation. I do feel that the printer should follow its instructions, so perhaps the g code would need some extensions.</div><br/><div id="42319952" class="c"><input type="checkbox" id="c-42319952" checked=""/><div class="controls bullet"><span class="by">mlyle</span><span>|</span><a href="#42319418">root</a><span>|</span><a href="#42319823">parent</a><span>|</span><a href="#42322932">next</a><span>|</span><label class="collapse" for="c-42319952">[-]</label><label class="expand" for="c-42319952">[1 more]</label></div><br/><div class="children"><div class="content">Most motion control systems for machining, etc, do the same thing: they do weird things at corners that follow the toolpath within a <i>small tolerance</i> but don&#x27;t require slowing to zero.<p>Changing velocity too much has its own impacts on surface quality, that can be larger than moving off the toolpath by a small distance.<p>G-code &#x2F; RS-274 is an industry standard far beyond 3d printing and this behavior is pretty standard for controllers&#x2F;implementers at this point.<p>There is an &quot;exact stop&quot; mode G61 in RS-274, but it&#x27;s not often used, instead of the G64 &quot;path blending&quot; mode.  There are also extensions that I think are pseudo-standard, like G64 Px.xx lets you set a tolerance value in many controllers.<p>If your machine is physically accurate to X under perfect, slow conditions, you don&#x27;t lose anything by telling it to blend paths to a tolerance of 2X during periods of high acceleration.</div><br/></div></div><div id="42322932" class="c"><input type="checkbox" id="c-42322932" checked=""/><div class="controls bullet"><span class="by">SideQuark</span><span>|</span><a href="#42319418">root</a><span>|</span><a href="#42319823">parent</a><span>|</span><a href="#42319952">prev</a><span>|</span><a href="#42320392">next</a><span>|</span><label class="collapse" for="c-42322932">[-]</label><label class="expand" for="c-42322932">[1 more]</label></div><br/><div class="children"><div class="content">The problem is common g-code asks for things which violate physics. No amount of engineering or materials science can turn a moving printer head at a right angle with absolutely zero deflection. Even giant many millions of dollars CNC machines do all sorts of tricks to make corners (and a million other gcode problems) handle more gracefully. Most such big systems actually read ahead in gcode dozens to hundreds of steps to modify it in flight to get the best performance from the machine.</div><br/></div></div></div></div></div></div></div></div><div id="42320392" class="c"><input type="checkbox" id="c-42320392" checked=""/><div class="controls bullet"><span class="by">boznz</span><span>|</span><a href="#42319418">prev</a><span>|</span><a href="#42320038">next</a><span>|</span><label class="collapse" for="c-42320392">[-]</label><label class="expand" for="c-42320392">[2 more]</label></div><br/><div class="children"><div class="content">first link (<a href="https:&#x2F;&#x2F;github.com&#x2F;Prunt3D&#x2F;prunt_board_2_server&#x2F;releases">https:&#x2F;&#x2F;github.com&#x2F;Prunt3D&#x2F;prunt_board_2_server&#x2F;releases</a>) on the getting started page gives a 404 page not found error</div><br/><div id="42320523" class="c"><input type="checkbox" id="c-42320523" checked=""/><div class="controls bullet"><span class="by">LiamPowell</span><span>|</span><a href="#42320392">parent</a><span>|</span><a href="#42320038">next</a><span>|</span><label class="collapse" for="c-42320523">[-]</label><label class="expand" for="c-42320523">[1 more]</label></div><br/><div class="children"><div class="content">Fixed in the live version of the site, thanks, although it isn&#x27;t usable without the hardware it controls.</div><br/></div></div></div></div><div id="42320038" class="c"><input type="checkbox" id="c-42320038" checked=""/><div class="controls bullet"><span class="by">ModernMech</span><span>|</span><a href="#42320392">prev</a><span>|</span><a href="#42314912">next</a><span>|</span><label class="collapse" for="c-42320038">[-]</label><label class="expand" for="c-42320038">[5 more]</label></div><br/><div class="children"><div class="content">What&#x27;s a &quot;5th order motion planner&quot;?<p>I don&#x27;t see a reference to the term on your website and when I looked it up on Google this post was the top hit. I also found this paper [1], is this what you&#x27;re talking about? <a href="https:&#x2F;&#x2F;ieeexplore.ieee.org&#x2F;stamp&#x2F;stamp.jsp?tp=&amp;arnumber=8833891&amp;tag=1" rel="nofollow">https:&#x2F;&#x2F;ieeexplore.ieee.org&#x2F;stamp&#x2F;stamp.jsp?tp=&amp;arnumber=883...</a></div><br/><div id="42320196" class="c"><input type="checkbox" id="c-42320196" checked=""/><div class="controls bullet"><span class="by">LiamPowell</span><span>|</span><a href="#42320038">parent</a><span>|</span><a href="#42314912">next</a><span>|</span><label class="collapse" for="c-42320196">[-]</label><label class="expand" for="c-42320196">[4 more]</label></div><br/><div class="children"><div class="content">The first 5 derivatives of the position relative to time (velocity&#x2F;acceleration&#x2F;jerk&#x2F;snap&#x2F;crackle) are bounded, meaning that what the motors are commanded to do is a better representation of what is possible in reality.</div><br/><div id="42322044" class="c"><input type="checkbox" id="c-42322044" checked=""/><div class="controls bullet"><span class="by">tonyarkles</span><span>|</span><a href="#42320038">root</a><span>|</span><a href="#42320196">parent</a><span>|</span><a href="#42320949">next</a><span>|</span><label class="collapse" for="c-42322044">[-]</label><label class="expand" for="c-42322044">[1 more]</label></div><br/><div class="children"><div class="content">I haven&#x27;t dug into any of your code or (potential) documentation. In the quadrotor world a common approach is to do minimum-snap trajectories. That derivation shakes out from the fact that the aircraft itself has non-holonomic constraints: you can control force in the local Z axis (accelerating or decelerating all four motors simultaneously), and can control attitude (roll&#x2F;pitch&#x2F;yaw) by accelerating a pair of motors and decelerating the other pair of motors. When you go all the way down through the derivation you eventually can show that a minimum-snap trajectory results in smooth torque (aka current) commands for the motors themselves.<p>Is your 5th-order model derived from something like that? Or was it more of a &quot;everything is really smooth if we have bounded crackle&quot; kind of situation? Either way I&#x27;m really happy to see higher-order motion control coming to open-source firmware like this that doesn&#x27;t require a host like Klipper does.</div><br/></div></div><div id="42320949" class="c"><input type="checkbox" id="c-42320949" checked=""/><div class="controls bullet"><span class="by">ModernMech</span><span>|</span><a href="#42320038">root</a><span>|</span><a href="#42320196">parent</a><span>|</span><a href="#42322044">prev</a><span>|</span><a href="#42320428">next</a><span>|</span><label class="collapse" for="c-42320949">[-]</label><label class="expand" for="c-42320949">[1 more]</label></div><br/><div class="children"><div class="content">Thanks! Is the 6th derivative called a pop? XP<p>Edit: yes, apparently it is :D<p>After that it goes drop, lock, slam, thump</div><br/></div></div><div id="42320428" class="c"><input type="checkbox" id="c-42320428" checked=""/><div class="controls bullet"><span class="by">Agingcoder</span><span>|</span><a href="#42320038">root</a><span>|</span><a href="#42320196">parent</a><span>|</span><a href="#42320949">prev</a><span>|</span><a href="#42314912">next</a><span>|</span><label class="collapse" for="c-42320428">[-]</label><label class="expand" for="c-42320428">[1 more]</label></div><br/><div class="children"><div class="content">Wow - i didn’t know that the 5th derivative was covered.
Is it standard in electronic devices these days ?</div><br/></div></div></div></div></div></div><div id="42314912" class="c"><input type="checkbox" id="c-42314912" checked=""/><div class="controls bullet"><span class="by">LiamPowell</span><span>|</span><a href="#42320038">prev</a><span>|</span><label class="collapse" for="c-42314912">[-]</label><label class="expand" for="c-42314912">[5 more]</label></div><br/><div class="children"><div class="content">TIL Hacker News will redirect CloudFlare pages domains to their pages.dev URL, I wasn&#x27;t aware is was even possible to find this due to CNAME flattening. Actual URL is <a href="https:&#x2F;&#x2F;prunt3d.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;prunt3d.com&#x2F;</a>, but I suppose it doesn&#x27;t really matter.</div><br/><div id="42314914" class="c"><input type="checkbox" id="c-42314914" checked=""/><div class="controls bullet"><span class="by">slater</span><span>|</span><a href="#42314912">parent</a><span>|</span><a href="#42318357">next</a><span>|</span><label class="collapse" for="c-42314914">[-]</label><label class="expand" for="c-42314914">[3 more]</label></div><br/><div class="children"><div class="content">No, it follows the canonical URL linked in the page&#x27;s &lt;head&gt;:<p>link rel=&quot;canonical&quot; href=&quot;<a href="https:&#x2F;&#x2F;600f3559.prunt-docs.pages.dev&#x2F;" rel="nofollow">https:&#x2F;&#x2F;600f3559.prunt-docs.pages.dev&#x2F;</a>&quot; itemprop=&quot;url&quot;</div><br/><div id="42314949" class="c"><input type="checkbox" id="c-42314949" checked=""/><div class="controls bullet"><span class="by">LiamPowell</span><span>|</span><a href="#42314912">root</a><span>|</span><a href="#42314914">parent</a><span>|</span><a href="#42318357">next</a><span>|</span><label class="collapse" for="c-42314949">[-]</label><label class="expand" for="c-42314949">[2 more]</label></div><br/><div class="children"><div class="content">Thanks. This is what I get for using these big static site generators that I don&#x27;t entirely understand, turns out this was a result of setting the base URL in Hugo to $CF_PAGES_URL as recommended by the CloudFlare docs.</div><br/><div id="42324363" class="c"><input type="checkbox" id="c-42324363" checked=""/><div class="controls bullet"><span class="by">alhirzel</span><span>|</span><a href="#42314912">root</a><span>|</span><a href="#42314949">parent</a><span>|</span><a href="#42318357">next</a><span>|</span><label class="collapse" for="c-42324363">[-]</label><label class="expand" for="c-42324363">[1 more]</label></div><br/><div class="children"><div class="content">Thank you for investigating this - I got scared when I saw what looked like an ephemeral URL!</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>