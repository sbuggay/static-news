<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1709802058744" as="style"/><link rel="stylesheet" href="styles.css?v=1709802058744"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/NilsIrl/dockerc">Show HN: dockerc – Docker image to static executable &quot;compiler&quot;</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>NilsIRL</span> | <span>72 comments</span></div><br/><div><div id="39625316" class="c"><input type="checkbox" id="c-39625316" checked=""/><div class="controls bullet"><span class="by">chaxor</span><span>|</span><a href="#39625660">next</a><span>|</span><label class="collapse" for="c-39625316">[-]</label><label class="expand" for="c-39625316">[2 more]</label></div><br/><div class="children"><div class="content">This is really great.<p>I have been trying to get my docker to be more distributable. Right now it&#x27;s just a simple python script in a python env inside a docker container inside a QEMU container to automate a click and then netcat something.<p>Pretty sweet. It&#x27;s only like 20GB, so pretty lightweight by modern standards.</div><br/><div id="39626606" class="c"><input type="checkbox" id="c-39626606" checked=""/><div class="controls bullet"><span class="by">bertman</span><span>|</span><a href="#39625316">parent</a><span>|</span><a href="#39625660">next</a><span>|</span><label class="collapse" for="c-39626606">[-]</label><label class="expand" for="c-39626606">[1 more]</label></div><br/><div class="children"><div class="content">&#x2F;s this please, people might get some ideas otherwise...</div><br/></div></div></div></div><div id="39625660" class="c"><input type="checkbox" id="c-39625660" checked=""/><div class="controls bullet"><span class="by">strangemonad</span><span>|</span><a href="#39625316">prev</a><span>|</span><a href="#39626385">next</a><span>|</span><label class="collapse" for="c-39625660">[-]</label><label class="expand" for="c-39625660">[1 more]</label></div><br/><div class="children"><div class="content">There is some great cosmic irony here. A section about never needing to build, install, etc… just give me an executable. Followed immediately with an incantation for zig to build this project</div><br/></div></div><div id="39626385" class="c"><input type="checkbox" id="c-39626385" checked=""/><div class="controls bullet"><span class="by">jbverschoor</span><span>|</span><a href="#39625660">prev</a><span>|</span><a href="#39624220">next</a><span>|</span><label class="collapse" for="c-39626385">[-]</label><label class="expand" for="c-39626385">[1 more]</label></div><br/><div class="children"><div class="content">You&#x27;ll still need different ones for different architectures...<p>At this point you might as well compile statically and include a virtual filesystem.  Pretty much what Sun created in the 90s..</div><br/></div></div><div id="39624220" class="c"><input type="checkbox" id="c-39624220" checked=""/><div class="controls bullet"><span class="by">staunton</span><span>|</span><a href="#39626385">prev</a><span>|</span><a href="#39623998">next</a><span>|</span><label class="collapse" for="c-39624220">[-]</label><label class="expand" for="c-39624220">[3 more]</label></div><br/><div class="children"><div class="content">I can&#x27;t wait for people to start sending me dockerfiles that run these things, made from docker containers that run more of these things...</div><br/><div id="39625402" class="c"><input type="checkbox" id="c-39625402" checked=""/><div class="controls bullet"><span class="by">spockz</span><span>|</span><a href="#39624220">parent</a><span>|</span><a href="#39625136">next</a><span>|</span><label class="collapse" for="c-39625402">[-]</label><label class="expand" for="c-39625402">[1 more]</label></div><br/><div class="children"><div class="content">I think that already exists in the form of buildpack..</div><br/></div></div><div id="39625136" class="c"><input type="checkbox" id="c-39625136" checked=""/><div class="controls bullet"><span class="by">teaearlgraycold</span><span>|</span><a href="#39624220">parent</a><span>|</span><a href="#39625402">prev</a><span>|</span><a href="#39623998">next</a><span>|</span><label class="collapse" for="c-39625136">[-]</label><label class="expand" for="c-39625136">[1 more]</label></div><br/><div class="children"><div class="content">The modern ELF. Bash but instead of running executables and piping stdin and stdout your primitives are docker containers.</div><br/></div></div></div></div><div id="39623998" class="c"><input type="checkbox" id="c-39623998" checked=""/><div class="controls bullet"><span class="by">throwitaway222</span><span>|</span><a href="#39624220">prev</a><span>|</span><a href="#39621322">next</a><span>|</span><label class="collapse" for="c-39623998">[-]</label><label class="expand" for="c-39623998">[14 more]</label></div><br/><div class="children"><div class="content">Awesome use of that rant pic.<p>Next rant pic- When I RUN a F*ING EXE it should open a Window with the application in it you smelly nerds!!!!</div><br/><div id="39624982" class="c"><input type="checkbox" id="c-39624982" checked=""/><div class="controls bullet"><span class="by">citizenpaul</span><span>|</span><a href="#39623998">parent</a><span>|</span><a href="#39626083">next</a><span>|</span><label class="collapse" for="c-39624982">[-]</label><label class="expand" for="c-39624982">[3 more]</label></div><br/><div class="children"><div class="content">Im surprised no one mentioned that the program the unstable ranter wants is essentually a social media stalker app to find people on all social media sites.<p>Perhaps some barriers to use are good sometimes.</div><br/><div id="39625096" class="c"><input type="checkbox" id="c-39625096" checked=""/><div class="controls bullet"><span class="by">diego_sandoval</span><span>|</span><a href="#39623998">root</a><span>|</span><a href="#39624982">parent</a><span>|</span><a href="#39626083">next</a><span>|</span><label class="collapse" for="c-39625096">[-]</label><label class="expand" for="c-39625096">[2 more]</label></div><br/><div class="children"><div class="content">If they don&#x27;t want people to find their social media profiles, then they shouldn&#x27;t have social media profiles.</div><br/><div id="39626395" class="c"><input type="checkbox" id="c-39626395" checked=""/><div class="controls bullet"><span class="by">navigate8310</span><span>|</span><a href="#39623998">root</a><span>|</span><a href="#39625096">parent</a><span>|</span><a href="#39626083">next</a><span>|</span><label class="collapse" for="c-39626395">[-]</label><label class="expand" for="c-39626395">[1 more]</label></div><br/><div class="children"><div class="content">Unfortunately to access Lynda, you have to make a LinkedIn account</div><br/></div></div></div></div></div></div><div id="39626083" class="c"><input type="checkbox" id="c-39626083" checked=""/><div class="controls bullet"><span class="by">jeroenhd</span><span>|</span><a href="#39623998">parent</a><span>|</span><a href="#39624982">prev</a><span>|</span><a href="#39624486">next</a><span>|</span><label class="collapse" for="c-39626083">[-]</label><label class="expand" for="c-39626083">[2 more]</label></div><br/><div class="children"><div class="content">This isn&#x27;t an EXE, though.<p>The next step is to repackage this inside an EXE that runs a Linux virtual machine.</div><br/><div id="39626245" class="c"><input type="checkbox" id="c-39626245" checked=""/><div class="controls bullet"><span class="by">johanbcn</span><span>|</span><a href="#39623998">root</a><span>|</span><a href="#39626083">parent</a><span>|</span><a href="#39624486">next</a><span>|</span><label class="collapse" for="c-39626245">[-]</label><label class="expand" for="c-39626245">[1 more]</label></div><br/><div class="children"><div class="content">Weeell... There&#x27;s a feature list with the following pending entry:<p>&gt; MacOS and Windows support (using QEMU)</div><br/></div></div></div></div><div id="39624486" class="c"><input type="checkbox" id="c-39624486" checked=""/><div class="controls bullet"><span class="by">ajross</span><span>|</span><a href="#39623998">parent</a><span>|</span><a href="#39626083">prev</a><span>|</span><a href="#39621322">next</a><span>|</span><label class="collapse" for="c-39624486">[-]</label><label class="expand" for="c-39624486">[8 more]</label></div><br/><div class="children"><div class="content">I know it feels like being pedantic and missing the joke, but &quot;just give me the EXE&quot; is a terrible bug, not a feature request.  Distributing unauthenticated, untraced OS-level binaries is just dangerous in the modern world.  Safe app distribution requires either elaborate sandboxed runtimes (browsers) or carefully curated and maintained lists of known-safe binaries (app stores, distro package repositories).<p>We can&#x27;t be doing this &quot;GIVE ME THE .EXE&quot; anymore.  Those days are gone.<p>Even building from source is questionable, but at least there it requires that the installer be part of (or at least adjacent to) a community of developers who can be expected to have the expertise to notice and recognize bad actors pushing code.</div><br/><div id="39625270" class="c"><input type="checkbox" id="c-39625270" checked=""/><div class="controls bullet"><span class="by">bigstrat2003</span><span>|</span><a href="#39623998">root</a><span>|</span><a href="#39624486">parent</a><span>|</span><a href="#39624864">next</a><span>|</span><label class="collapse" for="c-39625270">[-]</label><label class="expand" for="c-39625270">[1 more]</label></div><br/><div class="children"><div class="content">&gt; We can&#x27;t be doing this &quot;GIVE ME THE .EXE&quot; anymore. Those days are gone.<p>We can and should still do that for people who want it (i.e. most people). The security conscious can decline to use them, but that doesn&#x27;t mean the rest of us should have a worse experience.</div><br/></div></div><div id="39624864" class="c"><input type="checkbox" id="c-39624864" checked=""/><div class="controls bullet"><span class="by">riquito</span><span>|</span><a href="#39623998">root</a><span>|</span><a href="#39624486">parent</a><span>|</span><a href="#39625270">prev</a><span>|</span><a href="#39624731">next</a><span>|</span><label class="collapse" for="c-39624864">[-]</label><label class="expand" for="c-39624864">[1 more]</label></div><br/><div class="children"><div class="content">If you&#x27;re considering &quot;just give me the exe&quot; as multiple sharing between people, I wholeheartedly agree that it&#x27;s a mistake, but the context here is of a person wanting to download the binary from the author themselves.</div><br/></div></div><div id="39624731" class="c"><input type="checkbox" id="c-39624731" checked=""/><div class="controls bullet"><span class="by">cdrini</span><span>|</span><a href="#39623998">root</a><span>|</span><a href="#39624486">parent</a><span>|</span><a href="#39624864">prev</a><span>|</span><a href="#39621322">next</a><span>|</span><label class="collapse" for="c-39624731">[-]</label><label class="expand" for="c-39624731">[5 more]</label></div><br/><div class="children"><div class="content">I wish we could have something like exes with permissions. Similar to browsers. So I could run an arbitrary executable, but the OS level APIs would be blocked unless the user allowed the given permission.</div><br/><div id="39625303" class="c"><input type="checkbox" id="c-39625303" checked=""/><div class="controls bullet"><span class="by">chaxor</span><span>|</span><a href="#39623998">root</a><span>|</span><a href="#39624731">parent</a><span>|</span><a href="#39625201">next</a><span>|</span><label class="collapse" for="c-39625303">[-]</label><label class="expand" for="c-39625303">[2 more]</label></div><br/><div class="children"><div class="content">What&#x27;s wrong with flatpak for that?
Honest question as I don&#x27;t know that space really</div><br/><div id="39626713" class="c"><input type="checkbox" id="c-39626713" checked=""/><div class="controls bullet"><span class="by">enriquto</span><span>|</span><a href="#39623998">root</a><span>|</span><a href="#39625303">parent</a><span>|</span><a href="#39625201">next</a><span>|</span><label class="collapse" for="c-39626713">[-]</label><label class="expand" for="c-39626713">[1 more]</label></div><br/><div class="children"><div class="content">it should not be the flatpack who decides its own appropriate permissions, but the owner of the OS where the flatpack runs.  Even when--especially when--, the permissions profile disagrees with that requested by the developers.  Whatever permissions the flatpack &quot;requires&quot; should be irrelevant.  Only those granted by the user will be given.<p>Flatpack and snap and other systems that conflate packaging and permission management get it totally wrong.  Permission management is an OS-issue, not a packaging issue.  Thus, distributing a plain static executable or a python script should be just as safe as a &quot;safely packaged&quot; app.</div><br/></div></div></div></div><div id="39625201" class="c"><input type="checkbox" id="c-39625201" checked=""/><div class="controls bullet"><span class="by">psnehanshu</span><span>|</span><a href="#39623998">root</a><span>|</span><a href="#39624731">parent</a><span>|</span><a href="#39625303">prev</a><span>|</span><a href="#39624836">next</a><span>|</span><label class="collapse" for="c-39625201">[-]</label><label class="expand" for="c-39625201">[1 more]</label></div><br/><div class="children"><div class="content">apks are like that</div><br/></div></div><div id="39624836" class="c"><input type="checkbox" id="c-39624836" checked=""/><div class="controls bullet"><span class="by">ajross</span><span>|</span><a href="#39623998">root</a><span>|</span><a href="#39624731">parent</a><span>|</span><a href="#39625201">prev</a><span>|</span><a href="#39621322">next</a><span>|</span><label class="collapse" for="c-39624836">[-]</label><label class="expand" for="c-39624836">[1 more]</label></div><br/><div class="children"><div class="content">That would mostly be a browser, though.  Changing the language used for the API to C (or whatever) from Javascript is mostly cosmetic, existing interpreter&#x2F;JIT engines are extremely optimized, you can target basically anything to wasm, etc...<p>The problem isn&#x27;t the technical hurdle, it&#x27;s that sandboxed apps really aren&#x27;t what we want in a lot of cases.  There remain a lot of use cases for native apps the interact directly with the hardware in ways that are hard to abstract safely.  Games need the whole GPU, backend middleware needs the raw network stack, you want to set up routing tables or a custom NAS, etc...<p>Those requirements don&#x27;t go away even when &quot;most&quot; stuff can be done in a browser-equivalent sandbox.  And... you need to rely on your Linux distro for those things still, or at least compile from an active github project.  You can&#x27;t just get raw binaries from whoever and expect to be safe.</div><br/></div></div></div></div></div></div></div></div><div id="39621322" class="c"><input type="checkbox" id="c-39621322" checked=""/><div class="controls bullet"><span class="by">dflock</span><span>|</span><a href="#39623998">prev</a><span>|</span><a href="#39622648">next</a><span>|</span><label class="collapse" for="c-39621322">[-]</label><label class="expand" for="c-39621322">[3 more]</label></div><br/><div class="children"><div class="content">Nice idea! How does this actually work? I&#x27;m guessing it&#x27;s wrapping a custom loader + docker + the image into an executable binary - or something like that?</div><br/><div id="39621573" class="c"><input type="checkbox" id="c-39621573" checked=""/><div class="controls bullet"><span class="by">NilsIRL</span><span>|</span><a href="#39621322">parent</a><span>|</span><a href="#39624655">next</a><span>|</span><label class="collapse" for="c-39621573">[-]</label><label class="expand" for="c-39621573">[1 more]</label></div><br/><div class="children"><div class="content">Yep pretty much.<p>The executables bundle crun (a container runtime)[0], and a fuse implementation of squashfs and overlayfs. Appended to that is a squashfs of the image.<p>At runtime the squashfs and overlayfs are mounted and the container is started.<p>[0]: <a href="https:&#x2F;&#x2F;github.com&#x2F;containers&#x2F;crun">https:&#x2F;&#x2F;github.com&#x2F;containers&#x2F;crun</a></div><br/></div></div><div id="39624655" class="c"><input type="checkbox" id="c-39624655" checked=""/><div class="controls bullet"><span class="by">3abiton</span><span>|</span><a href="#39621322">parent</a><span>|</span><a href="#39621573">prev</a><span>|</span><a href="#39622648">next</a><span>|</span><label class="collapse" for="c-39624655">[-]</label><label class="expand" for="c-39624655">[1 more]</label></div><br/><div class="children"><div class="content">Sounds like universal appimage</div><br/></div></div></div></div><div id="39622648" class="c"><input type="checkbox" id="c-39622648" checked=""/><div class="controls bullet"><span class="by">Cu3PO42</span><span>|</span><a href="#39621322">prev</a><span>|</span><a href="#39621818">next</a><span>|</span><label class="collapse" for="c-39622648">[-]</label><label class="expand" for="c-39622648">[2 more]</label></div><br/><div class="children"><div class="content">Let me start by saying this looks like a fun project to work on and, honestly, that&#x27;s reason enough for doing it.<p>As a solution to the problem of app distribution, I do have some concerns, though:<p>How do you deal with resource sharing? This starts with just filesystem mounts, but also concerns ports, possibly devices, and probably many other things I&#x27;m forgetting. Is this somehow configurable?<p>How does this compare to AppImage? IIRC that also puts everything into a squashfs.<p>If a user without CAP_SYS_USER_NS executes one of the binaries built by dockerc, do you handle that gracefully in any way?</div><br/><div id="39623392" class="c"><input type="checkbox" id="c-39623392" checked=""/><div class="controls bullet"><span class="by">NilsIRL</span><span>|</span><a href="#39622648">parent</a><span>|</span><a href="#39621818">next</a><span>|</span><label class="collapse" for="c-39623392">[-]</label><label class="expand" for="c-39623392">[1 more]</label></div><br/><div class="children"><div class="content">&gt; How do you deal with resource sharing? This starts with just filesystem mounts, but also concerns ports, possibly devices, and probably many other things I&#x27;m forgetting. Is this somehow configurable?<p>I&#x27;m not too sure what resources you&#x27;re talking about in general. Mounts are in a temporary location so they shouldn&#x27;t conflict. Each container uses 2 when it is running. In terms of ports, you won&#x27;t be able to have multiple applications using the same port (whether they are built with dockerc or not). As for devices I don&#x27;t think there&#x27;s any issues there.<p>&gt; How does this compare to AppImage? IIRC that also puts everything into a squashfs.<p>It&#x27;s very similar to AppImage in spirit. I haven&#x27;t looked at the AppImage implementation but I suspect a lot of things are similar.<p>The difference with AppImage is that this makes it trivial to convert existing docker images into something that can run as an executable. It also offers stronger hermeticity guarantees as the application runs inside of a container.<p>&gt; If a user without CAP_SYS_USER_NS executes one of the binaries built by dockerc, do you handle that gracefully in any way?<p>It&#x27;s not something I&#x27;ve paid much attention to. This falls back to the container runtime which currently outputs &quot;clone: Operation not permitted&quot; when ran with `sudo sysctl -w kernel.unprivileged_userns_clone=0`.</div><br/></div></div></div></div><div id="39621818" class="c"><input type="checkbox" id="c-39621818" checked=""/><div class="controls bullet"><span class="by">Alifatisk</span><span>|</span><a href="#39622648">prev</a><span>|</span><a href="#39621584">next</a><span>|</span><label class="collapse" for="c-39621818">[-]</label><label class="expand" for="c-39621818">[4 more]</label></div><br/><div class="children"><div class="content">So what does this mean? That I can finally ship portable Ruby executable without requiring the end user to install Ruby?</div><br/><div id="39621939" class="c"><input type="checkbox" id="c-39621939" checked=""/><div class="controls bullet"><span class="by">NilsIRL</span><span>|</span><a href="#39621818">parent</a><span>|</span><a href="#39622831">next</a><span>|</span><label class="collapse" for="c-39621939">[-]</label><label class="expand" for="c-39621939">[1 more]</label></div><br/><div class="children"><div class="content">Yep! It works with any docker image!*<p>*: <a href="https:&#x2F;&#x2F;github.com&#x2F;NilsIrl&#x2F;dockerc&#x2F;issues&#x2F;6">https:&#x2F;&#x2F;github.com&#x2F;NilsIrl&#x2F;dockerc&#x2F;issues&#x2F;6</a></div><br/></div></div><div id="39622831" class="c"><input type="checkbox" id="c-39622831" checked=""/><div class="controls bullet"><span class="by">tekknolagi</span><span>|</span><a href="#39621818">parent</a><span>|</span><a href="#39621939">prev</a><span>|</span><a href="#39621584">next</a><span>|</span><label class="collapse" for="c-39622831">[-]</label><label class="expand" for="c-39622831">[2 more]</label></div><br/><div class="children"><div class="content">You should also be able to do that with Cosmopolitan&#x2F;APE.</div><br/><div id="39626281" class="c"><input type="checkbox" id="c-39626281" checked=""/><div class="controls bullet"><span class="by">pacifika</span><span>|</span><a href="#39621818">root</a><span>|</span><a href="#39622831">parent</a><span>|</span><a href="#39621584">next</a><span>|</span><label class="collapse" for="c-39626281">[-]</label><label class="expand" for="c-39626281">[1 more]</label></div><br/><div class="children"><div class="content">Would you be able to expand on this, my impression is that these tools build a custom c program instead? Thanks</div><br/></div></div></div></div></div></div><div id="39621584" class="c"><input type="checkbox" id="c-39621584" checked=""/><div class="controls bullet"><span class="by">politelemon</span><span>|</span><a href="#39621818">prev</a><span>|</span><a href="#39623554">next</a><span>|</span><label class="collapse" for="c-39621584">[-]</label><label class="expand" for="c-39621584">[2 more]</label></div><br/><div class="children"><div class="content">OK that&#x27;s a cool idea. I did try the example in the README but I get an error right away (Ubuntu 22.04)<p>-----<p>$ .&#x2F;dockerc --image docker:&#x2F;&#x2F;oven&#x2F;bun --output bun<p>FATA[0000] Error loading trust policy: open &#x2F;etc&#x2F;containers&#x2F;policy.json: no such file or directory 
   ⨯ open CAS: validate: read oci-layout: invalid image detected
Cannot stat source directory &quot;&#x2F;tmp&#x2F;dockerc-fbObho&#x2F;bundle&quot; because No such file or directory
error: FileNotFound<p>-----<p>Btw does this also solve the last line in the original user&#x27;s complaints?</div><br/><div id="39621815" class="c"><input type="checkbox" id="c-39621815" checked=""/><div class="controls bullet"><span class="by">NilsIRL</span><span>|</span><a href="#39621584">parent</a><span>|</span><a href="#39623554">next</a><span>|</span><label class="collapse" for="c-39621815">[-]</label><label class="expand" for="c-39621815">[1 more]</label></div><br/><div class="children"><div class="content">Thanks for the bug report! Just pushed a change that fixes it (and made a new release with the issue fixed: <a href="https:&#x2F;&#x2F;github.com&#x2F;NilsIrl&#x2F;dockerc&#x2F;releases&#x2F;">https:&#x2F;&#x2F;github.com&#x2F;NilsIrl&#x2F;dockerc&#x2F;releases&#x2F;</a>)</div><br/></div></div></div></div><div id="39623554" class="c"><input type="checkbox" id="c-39623554" checked=""/><div class="controls bullet"><span class="by">nico</span><span>|</span><a href="#39621584">prev</a><span>|</span><a href="#39625545">next</a><span>|</span><label class="collapse" for="c-39623554">[-]</label><label class="expand" for="c-39623554">[4 more]</label></div><br/><div class="children"><div class="content">This is incredibly cool!<p>Currently using docker as a way to easily distribute and run an open project[1], this would be great to use on top of docker<p>Will this run ok on a Mac? (I see the feature is pending, any tests done yet?)<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;nicobrenner&#x2F;commandjobs">https:&#x2F;&#x2F;github.com&#x2F;nicobrenner&#x2F;commandjobs</a></div><br/><div id="39624759" class="c"><input type="checkbox" id="c-39624759" checked=""/><div class="controls bullet"><span class="by">NilsIRL</span><span>|</span><a href="#39623554">parent</a><span>|</span><a href="#39625545">next</a><span>|</span><label class="collapse" for="c-39624759">[-]</label><label class="expand" for="c-39624759">[3 more]</label></div><br/><div class="children"><div class="content">Thanks!<p>&gt; Will this run ok on a Mac?<p>I&#x27;ve managed to make it work but unfortunately not in a way that produces portable binaries. I just need to figure out how to selectively statically link some of the QEMU dependencies or write a runtime that uses Apple&#x27;s VirtualizationFramework.</div><br/><div id="39626054" class="c"><input type="checkbox" id="c-39626054" checked=""/><div class="controls bullet"><span class="by">apitman</span><span>|</span><a href="#39623554">root</a><span>|</span><a href="#39624759">parent</a><span>|</span><a href="#39625176">next</a><span>|</span><label class="collapse" for="c-39626054">[-]</label><label class="expand" for="c-39626054">[1 more]</label></div><br/><div class="children"><div class="content">For Windows, I recommend looking into running in WSL2 instead of trying to get QEMU working in a performant way. It&#x27;s pretty easy to install a custom lightweight WSL2 image and run it.</div><br/></div></div><div id="39625176" class="c"><input type="checkbox" id="c-39625176" checked=""/><div class="controls bullet"><span class="by">nico</span><span>|</span><a href="#39623554">root</a><span>|</span><a href="#39624759">parent</a><span>|</span><a href="#39626054">prev</a><span>|</span><a href="#39625545">next</a><span>|</span><label class="collapse" for="c-39625176">[-]</label><label class="expand" for="c-39625176">[1 more]</label></div><br/><div class="children"><div class="content">Really impressive! Amazing work, thank you for sharing :)</div><br/></div></div></div></div></div></div><div id="39625545" class="c"><input type="checkbox" id="c-39625545" checked=""/><div class="controls bullet"><span class="by">nikisweeting</span><span>|</span><a href="#39623554">prev</a><span>|</span><a href="#39624685">next</a><span>|</span><label class="collapse" for="c-39625545">[-]</label><label class="expand" for="c-39625545">[1 more]</label></div><br/><div class="children"><div class="content">Damn I would really love to distribute ArchiveBox this way, been looking for a solution that does this for years. Crossing my fingers for arm64&#x2F;macoOS support someday!</div><br/></div></div><div id="39624685" class="c"><input type="checkbox" id="c-39624685" checked=""/><div class="controls bullet"><span class="by">mmh0000</span><span>|</span><a href="#39625545">prev</a><span>|</span><a href="#39624052">next</a><span>|</span><label class="collapse" for="c-39624685">[-]</label><label class="expand" for="c-39624685">[3 more]</label></div><br/><div class="children"><div class="content">This sounds really cool, but, doesn&#x27;t work for me, on version 0.2.1:<p><pre><code>  $ .&#x2F;dockerc --image docker:&#x2F;&#x2F;docker.io&#x2F;pivotalrabbitmq&#x2F;perf-test --output yourmom
  $ .&#x2F;yourmom
  2024-03-07T03:10:54.145333Z: chown `&#x2F;dev&#x2F;pts&#x2F;0`: Invalid argument</code></pre></div><br/><div id="39624740" class="c"><input type="checkbox" id="c-39624740" checked=""/><div class="controls bullet"><span class="by">NilsIRL</span><span>|</span><a href="#39624685">parent</a><span>|</span><a href="#39625327">next</a><span>|</span><label class="collapse" for="c-39624740">[-]</label><label class="expand" for="c-39624740">[1 more]</label></div><br/><div class="children"><div class="content">Yep, this is a known issue. It also existed in the past with normal docker. <a href="https:&#x2F;&#x2F;github.com&#x2F;NilsIrl&#x2F;dockerc&#x2F;issues&#x2F;6">https:&#x2F;&#x2F;github.com&#x2F;NilsIrl&#x2F;dockerc&#x2F;issues&#x2F;6</a></div><br/></div></div><div id="39625327" class="c"><input type="checkbox" id="c-39625327" checked=""/><div class="controls bullet"><span class="by">rezonant</span><span>|</span><a href="#39624685">parent</a><span>|</span><a href="#39624740">prev</a><span>|</span><a href="#39624052">next</a><span>|</span><label class="collapse" for="c-39625327">[-]</label><label class="expand" for="c-39625327">[1 more]</label></div><br/><div class="children"><div class="content">Sounds like what my mom would say, tbh</div><br/></div></div></div></div><div id="39624052" class="c"><input type="checkbox" id="c-39624052" checked=""/><div class="controls bullet"><span class="by">bartekpacia</span><span>|</span><a href="#39624685">prev</a><span>|</span><a href="#39626299">next</a><span>|</span><label class="collapse" for="c-39624052">[-]</label><label class="expand" for="c-39624052">[1 more]</label></div><br/><div class="children"><div class="content">Very cool project! Can’t wait to see its future development.<p>I’m glad that I know the author. He won 2 tracks of this year’s Stanford TreeHacks with it:)</div><br/></div></div><div id="39626299" class="c"><input type="checkbox" id="c-39626299" checked=""/><div class="controls bullet"><span class="by">tluyben2</span><span>|</span><a href="#39624052">prev</a><span>|</span><a href="#39623758">next</a><span>|</span><label class="collapse" for="c-39626299">[-]</label><label class="expand" for="c-39626299">[1 more]</label></div><br/><div class="children"><div class="content">Can it be done for docker compose (in theory) too?</div><br/></div></div><div id="39624905" class="c"><input type="checkbox" id="c-39624905" checked=""/><div class="controls bullet"><span class="by">just_testing</span><span>|</span><a href="#39623758">prev</a><span>|</span><a href="#39625492">next</a><span>|</span><label class="collapse" for="c-39624905">[-]</label><label class="expand" for="c-39624905">[1 more]</label></div><br/><div class="children"><div class="content">This is so freaking insane! I love it!</div><br/></div></div><div id="39625492" class="c"><input type="checkbox" id="c-39625492" checked=""/><div class="controls bullet"><span class="by">zubairq</span><span>|</span><a href="#39624905">prev</a><span>|</span><a href="#39625520">next</a><span>|</span><label class="collapse" for="c-39625492">[-]</label><label class="expand" for="c-39625492">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m going to try this to make my app an exe. As great as Docker is, most users do not care to install Docker just to run my app.</div><br/></div></div><div id="39625520" class="c"><input type="checkbox" id="c-39625520" checked=""/><div class="controls bullet"><span class="by">winwang</span><span>|</span><a href="#39625492">prev</a><span>|</span><a href="#39621614">next</a><span>|</span><label class="collapse" for="c-39625520">[-]</label><label class="expand" for="c-39625520">[1 more]</label></div><br/><div class="children"><div class="content">Kind of reminds me of a unikernel.</div><br/></div></div><div id="39621614" class="c"><input type="checkbox" id="c-39621614" checked=""/><div class="controls bullet"><span class="by">hiatus</span><span>|</span><a href="#39625520">prev</a><span>|</span><a href="#39622563">next</a><span>|</span><label class="collapse" for="c-39621614">[-]</label><label class="expand" for="c-39621614">[3 more]</label></div><br/><div class="children"><div class="content">Curious about the choice of Zig, any specific reason for using it?</div><br/><div id="39624818" class="c"><input type="checkbox" id="c-39624818" checked=""/><div class="controls bullet"><span class="by">NilsIRL</span><span>|</span><a href="#39621614">parent</a><span>|</span><a href="#39622059">next</a><span>|</span><label class="collapse" for="c-39624818">[-]</label><label class="expand" for="c-39624818">[1 more]</label></div><br/><div class="children"><div class="content">The main reason Zig was chosen is because the project was started at a hackathon[0] at which there was a prize for &quot;best use of Zig&quot;. Beyond that there were also other reasons: 1. I have been wanting to try out Zig 2. It fit the requirement of being a so called &quot;systems language&quot;.<p>However having written it in Zig I have a few retroactive reasons for why Zig was a good choice (if not the best choice):<p>* The build system allows to make the runtime a dependency of the &quot;compiler&quot;. I don&#x27;t think any other language has that.<p>* The interoperability with C&#x2F;systems calls is amazing (in comparison to anything but C&#x2F;C++)<p>* The ability to embed files<p>* Makes it incredibly easy to make static binaries<p>[0]: <a href="https:&#x2F;&#x2F;treehacks.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;treehacks.com&#x2F;</a><p>[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;NilsIrl&#x2F;dockerc&#x2F;blob&#x2F;68b0e6dc40e76c77ad0c94123f77829cf6c91b61&#x2F;build.zig#L41">https:&#x2F;&#x2F;github.com&#x2F;NilsIrl&#x2F;dockerc&#x2F;blob&#x2F;68b0e6dc40e76c77ad0c...</a></div><br/></div></div><div id="39622059" class="c"><input type="checkbox" id="c-39622059" checked=""/><div class="controls bullet"><span class="by">seabrookmx</span><span>|</span><a href="#39621614">parent</a><span>|</span><a href="#39624818">prev</a><span>|</span><a href="#39622563">next</a><span>|</span><label class="collapse" for="c-39622059">[-]</label><label class="expand" for="c-39622059">[1 more]</label></div><br/><div class="children"><div class="content">Probably because it has a super nice build toolchain, especially when you consider cross compilation.<p>There&#x27;s quite a few folks using zig _just_ for the toolchain, while still writing C.</div><br/></div></div></div></div><div id="39622563" class="c"><input type="checkbox" id="c-39622563" checked=""/><div class="controls bullet"><span class="by">flaminHotSpeedo</span><span>|</span><a href="#39621614">prev</a><span>|</span><a href="#39625618">next</a><span>|</span><label class="collapse" for="c-39622563">[-]</label><label class="expand" for="c-39622563">[1 more]</label></div><br/><div class="children"><div class="content">Might be worth calling out that it supports any OCI images, which seems to be the case from a quick skim throught the repo!</div><br/></div></div><div id="39625618" class="c"><input type="checkbox" id="c-39625618" checked=""/><div class="controls bullet"><span class="by">anon115</span><span>|</span><a href="#39622563">prev</a><span>|</span><a href="#39621570">next</a><span>|</span><label class="collapse" for="c-39625618">[-]</label><label class="expand" for="c-39625618">[1 more]</label></div><br/><div class="children"><div class="content">XDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDD</div><br/></div></div><div id="39621570" class="c"><input type="checkbox" id="c-39621570" checked=""/><div class="controls bullet"><span class="by">dvfjsdhgfv</span><span>|</span><a href="#39625618">prev</a><span>|</span><a href="#39623988">next</a><span>|</span><label class="collapse" for="c-39621570">[-]</label><label class="expand" for="c-39621570">[5 more]</label></div><br/><div class="children"><div class="content">The Reddit screenshot is hilarious. But it reflects my feelings whenever I want to install a product made by many of these self-proclaimed &quot;open source&quot; companies that bend over backwards to make it almost impossible to install the open version (...and often to discover the crucial features are missing anyway).</div><br/><div id="39621733" class="c"><input type="checkbox" id="c-39621733" checked=""/><div class="controls bullet"><span class="by">OJFord</span><span>|</span><a href="#39621570">parent</a><span>|</span><a href="#39621736">next</a><span>|</span><label class="collapse" for="c-39621733">[-]</label><label class="expand" for="c-39621733">[1 more]</label></div><br/><div class="children"><div class="content">That was Sourceforge really I suppose wasn&#x27;t it - I enjoy GitHub for the opposite reason really (that I am a &#x27;smelly nerd&#x27; and do want code more often than an executable, well actually they said &#x27;.exe&#x27;, and I <i>never</i> want that) but I&#x27;ve definitely come across repos, even maintain one^, where they have that kind of real world leaking in, not really realising GitHub&#x27;s not for them and then getting frustrated by it or just doing strange things.<p>(^I&#x27;m a collaborator on awesomecv, a latex CV&#x2F;resume template, and we get a <i>lot</i> of PRs from people trying to edit their own information &amp; experience into the example. I keep meaning to set up a template repo of how to use it properly as a latex class, maybe include rendering in Actions, the way my own use of it is basically, and more strongly point people towards that in the readme, maybe even remove the example. But I&#x27;ve been saying that for years, since before &#x27;template repo&#x27; existed in fact.)</div><br/></div></div><div id="39621736" class="c"><input type="checkbox" id="c-39621736" checked=""/><div class="controls bullet"><span class="by">jiripospisil</span><span>|</span><a href="#39621570">parent</a><span>|</span><a href="#39621733">prev</a><span>|</span><a href="#39623988">next</a><span>|</span><label class="collapse" for="c-39621736">[-]</label><label class="expand" for="c-39621736">[3 more]</label></div><br/><div class="children"><div class="content">I had to look it up because I couldn&#x27;t believe it was real but... <a href="https:&#x2F;&#x2F;old.reddit.com&#x2F;r&#x2F;github&#x2F;comments&#x2F;1at9br4&#x2F;i_am_new_to_github_and_i_have_lots_to_say&#x2F;" rel="nofollow">https:&#x2F;&#x2F;old.reddit.com&#x2F;r&#x2F;github&#x2F;comments&#x2F;1at9br4&#x2F;i_am_new_to...</a></div><br/><div id="39622411" class="c"><input type="checkbox" id="c-39622411" checked=""/><div class="controls bullet"><span class="by">soraminazuki</span><span>|</span><a href="#39621570">root</a><span>|</span><a href="#39621736">parent</a><span>|</span><a href="#39622237">next</a><span>|</span><label class="collapse" for="c-39622411">[-]</label><label class="expand" for="c-39622411">[1 more]</label></div><br/><div class="children"><div class="content">I made the mistake of looking at the comments of that post’s author. All I can say is quite a few people would probably be glad to know that the author didn’t figure out how to install that OSINT tool.</div><br/></div></div><div id="39622237" class="c"><input type="checkbox" id="c-39622237" checked=""/><div class="controls bullet"><span class="by">c0balt</span><span>|</span><a href="#39621570">root</a><span>|</span><a href="#39621736">parent</a><span>|</span><a href="#39622411">prev</a><span>|</span><a href="#39623988">next</a><span>|</span><label class="collapse" for="c-39622237">[-]</label><label class="expand" for="c-39622237">[1 more]</label></div><br/><div class="children"><div class="content">Interestingly, the OP also doesn&#x27;t appear to have changed their tone since then. They were even active within the last week.</div><br/></div></div></div></div></div></div><div id="39622776" class="c"><input type="checkbox" id="c-39622776" checked=""/><div class="controls bullet"><span class="by">KomoD</span><span>|</span><a href="#39623988">prev</a><span>|</span><a href="#39621919">next</a><span>|</span><label class="collapse" for="c-39622776">[-]</label><label class="expand" for="c-39622776">[2 more]</label></div><br/><div class="children"><div class="content">Okay, that is interesting and cool, though I assume the binaries will be pretty large</div><br/><div id="39622813" class="c"><input type="checkbox" id="c-39622813" checked=""/><div class="controls bullet"><span class="by">39</span><span>|</span><a href="#39622776">parent</a><span>|</span><a href="#39621919">next</a><span>|</span><label class="collapse" for="c-39622813">[-]</label><label class="expand" for="c-39622813">[1 more]</label></div><br/><div class="children"><div class="content">Only if you don’t use multistage builds</div><br/></div></div></div></div><div id="39621919" class="c"><input type="checkbox" id="c-39621919" checked=""/><div class="controls bullet"><span class="by">misnome</span><span>|</span><a href="#39622776">prev</a><span>|</span><a href="#39622339">next</a><span>|</span><label class="collapse" for="c-39621919">[-]</label><label class="expand" for="c-39621919">[4 more]</label></div><br/><div class="children"><div class="content">Same thing as Apptainer&#x2F;Singularity? Or a different approach?<p>I always remember having issues using the Singularity outputs for anything that needed to interact with the filesystem.</div><br/><div id="39624987" class="c"><input type="checkbox" id="c-39624987" checked=""/><div class="controls bullet"><span class="by">NilsIRL</span><span>|</span><a href="#39621919">parent</a><span>|</span><a href="#39622339">next</a><span>|</span><label class="collapse" for="c-39624987">[-]</label><label class="expand" for="c-39624987">[3 more]</label></div><br/><div class="children"><div class="content">I hadn&#x27;t heard of Apptainer&#x2F;Singularity before but it doesn&#x27;t seem to provide the ability to create standalone executables.</div><br/><div id="39625859" class="c"><input type="checkbox" id="c-39625859" checked=""/><div class="controls bullet"><span class="by">vanous</span><span>|</span><a href="#39621919">root</a><span>|</span><a href="#39624987">parent</a><span>|</span><a href="#39622339">next</a><span>|</span><label class="collapse" for="c-39625859">[-]</label><label class="expand" for="c-39625859">[2 more]</label></div><br/><div class="children"><div class="content">Singularity absolutely produces standalone executables, been building tools this way for years.</div><br/><div id="39626094" class="c"><input type="checkbox" id="c-39626094" checked=""/><div class="controls bullet"><span class="by">apitman</span><span>|</span><a href="#39621919">root</a><span>|</span><a href="#39625859">parent</a><span>|</span><a href="#39622339">next</a><span>|</span><label class="collapse" for="c-39626094">[-]</label><label class="expand" for="c-39626094">[1 more]</label></div><br/><div class="children"><div class="content">How? I&#x27;ve used Apptainer pretty extensively for a couple years and as far as I know the machine where it runs has to have Apptainer installed, even when executing sif files like a normal app.</div><br/></div></div></div></div></div></div></div></div><div id="39622709" class="c"><input type="checkbox" id="c-39622709" checked=""/><div class="controls bullet"><span class="by">Zambyte</span><span>|</span><a href="#39622339">prev</a><span>|</span><a href="#39621992">next</a><span>|</span><label class="collapse" for="c-39622709">[-]</label><label class="expand" for="c-39622709">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Usage: Install dockerc from the latest release.<p>I love the juxtaposition with the image directly above this</div><br/></div></div><div id="39621992" class="c"><input type="checkbox" id="c-39621992" checked=""/><div class="controls bullet"><span class="by">Oras</span><span>|</span><a href="#39622709">prev</a><span>|</span><a href="#39624317">next</a><span>|</span><label class="collapse" for="c-39621992">[-]</label><label class="expand" for="c-39621992">[2 more]</label></div><br/><div class="children"><div class="content">I think it’s a great idea, but what kind of file size range should I expect?</div><br/><div id="39622184" class="c"><input type="checkbox" id="c-39622184" checked=""/><div class="controls bullet"><span class="by">NilsIRL</span><span>|</span><a href="#39621992">parent</a><span>|</span><a href="#39624317">next</a><span>|</span><label class="collapse" for="c-39622184">[-]</label><label class="expand" for="c-39622184">[1 more]</label></div><br/><div class="children"><div class="content">It will depend heavily on the docker image you&#x27;re trying to ship. For example with macos-cross-compiler[0] the resulting binary is over 2GB. With python:alpine[1] it&#x27;s only 25MB.<p>Because the image isn&#x27;t copied whether the image is 2GB or 25MB the startup time will be nearly instantaneous for both.<p>The runtime adds 6-7MB of overhead although I expect that this can be reduced to less than 3MB with some work.<p>[0]: <a href="https:&#x2F;&#x2F;github.com&#x2F;shepherdjerred&#x2F;macos-cross-compiler">https:&#x2F;&#x2F;github.com&#x2F;shepherdjerred&#x2F;macos-cross-compiler</a>
[1]: <a href="https:&#x2F;&#x2F;hub.docker.com&#x2F;_&#x2F;python" rel="nofollow">https:&#x2F;&#x2F;hub.docker.com&#x2F;_&#x2F;python</a></div><br/></div></div></div></div><div id="39624317" class="c"><input type="checkbox" id="c-39624317" checked=""/><div class="controls bullet"><span class="by">deeteecee</span><span>|</span><a href="#39621992">prev</a><span>|</span><a href="#39623607">next</a><span>|</span><label class="collapse" for="c-39624317">[-]</label><label class="expand" for="c-39624317">[1 more]</label></div><br/><div class="children"><div class="content">lol I feel that man&#x27;s rage. I&#x27;ve shouted the same lines while trying out a new tool</div><br/></div></div><div id="39623607" class="c"><input type="checkbox" id="c-39623607" checked=""/><div class="controls bullet"><span class="by">nightshift1</span><span>|</span><a href="#39624317">prev</a><span>|</span><label class="collapse" for="c-39623607">[-]</label><label class="expand" for="c-39623607">[3 more]</label></div><br/><div class="children"><div class="content">Can I run this in a container?</div><br/><div id="39625030" class="c"><input type="checkbox" id="c-39625030" checked=""/><div class="controls bullet"><span class="by">NilsIRL</span><span>|</span><a href="#39623607">parent</a><span>|</span><a href="#39623981">next</a><span>|</span><label class="collapse" for="c-39625030">[-]</label><label class="expand" for="c-39625030">[1 more]</label></div><br/><div class="children"><div class="content">dockerc can, the produced executables cannot, at least not without some tweaking.<p>Even if you path through `&#x2F;dev&#x2F;fuse` and `&#x2F;usr&#x2F;bin&#x2F;fusermount3` (using -v) it fails the mount the fuse filesystems with the error message &quot;Operation not permitted&quot;.<p>It might be possible to make it work if it falls back to extracting the container when failing the mount the fuse filesystems.</div><br/></div></div></div></div></div></div></div></div></div></body></html>