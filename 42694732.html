<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1737190875754" as="style"/><link rel="stylesheet" href="styles.css?v=1737190875754"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://postgresql-anonymizer.readthedocs.io/en/stable/">PostgreSQL Anonymizer</a> <span class="domain">(<a href="https://postgresql-anonymizer.readthedocs.io">postgresql-anonymizer.readthedocs.io</a>)</span></div><div class="subtext"><span>chynkm</span> | <span>52 comments</span></div><br/><div><div id="42736249" class="c"><input type="checkbox" id="c-42736249" checked=""/><div class="controls bullet"><span class="by">gkbrk</span><span>|</span><a href="#42736086">next</a><span>|</span><label class="collapse" for="c-42736249">[-]</label><label class="expand" for="c-42736249">[4 more]</label></div><br/><div class="children"><div class="content">Clickhouse has something similar called clickhouse-obfuscator [1]. It even works offline with data dumps so you can quickly prepare and send somewhat realistic example data to others.<p>According to its --help output, it is designed to retain the following properties of data:<p>- cardinalities of values (number of distinct values) for every column and for every tuple of columns;<p>- conditional cardinalities: number of distinct values of one column under condition on value of another column;<p>- probability distributions of absolute value of integers; sign of signed integers; exponent and sign for floats;<p>- probability distributions of length of strings;<p>- probability of zero values of numbers; empty strings and arrays, NULLs;<p>- data compression ratio when compressed with LZ77 and entropy family of codecs;<p>- continuity (magnitude of difference) of time values across table; continuity of floating point values.<p>- date component of DateTime values;<p>- UTF-8 validity of string values;<p>- string values continue to look somewhat natural<p>[1]: <a href="https:&#x2F;&#x2F;clickhouse.com&#x2F;docs&#x2F;en&#x2F;operations&#x2F;utilities&#x2F;clickhouse-obfuscator" rel="nofollow">https:&#x2F;&#x2F;clickhouse.com&#x2F;docs&#x2F;en&#x2F;operations&#x2F;utilities&#x2F;clickhou...</a></div><br/><div id="42737004" class="c"><input type="checkbox" id="c-42737004" checked=""/><div class="controls bullet"><span class="by">bux93</span><span>|</span><a href="#42736249">parent</a><span>|</span><a href="#42740531">next</a><span>|</span><label class="collapse" for="c-42737004">[-]</label><label class="expand" for="c-42737004">[2 more]</label></div><br/><div class="children"><div class="content">The Dutch national office of statistics has tools intended to de-identify &#x27;microdata&#x27; such that k-anonimity[1] is achieved called mu-argus[2] and tau-argus.<p>[1] A release of data is said to have the k-anonymity property if the information for each person contained in the release cannot be distinguished from at least k-1 individuals whose information also appear in the release. <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;K-anonymity" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;K-anonymity</a>
[2] <a href="https:&#x2F;&#x2F;research.cbs.nl&#x2F;casc&#x2F;mu.htm" rel="nofollow">https:&#x2F;&#x2F;research.cbs.nl&#x2F;casc&#x2F;mu.htm</a></div><br/><div id="42740946" class="c"><input type="checkbox" id="c-42740946" checked=""/><div class="controls bullet"><span class="by">aeontech</span><span>|</span><a href="#42736249">root</a><span>|</span><a href="#42737004">parent</a><span>|</span><a href="#42740531">next</a><span>|</span><label class="collapse" for="c-42740946">[-]</label><label class="expand" for="c-42740946">[1 more]</label></div><br/><div class="children"><div class="content">This is really cool, and deserves a submission of its own, I&#x27;d say!</div><br/></div></div></div></div><div id="42740531" class="c"><input type="checkbox" id="c-42740531" checked=""/><div class="controls bullet"><span class="by">JosephRedfern</span><span>|</span><a href="#42736249">parent</a><span>|</span><a href="#42737004">prev</a><span>|</span><a href="#42736086">next</a><span>|</span><label class="collapse" for="c-42740531">[-]</label><label class="expand" for="c-42740531">[1 more]</label></div><br/><div class="children"><div class="content">There&#x27;s a write up from Alexey of different approaches considered for clickhouse-obfuscator here: <a href="https:&#x2F;&#x2F;clickhouse.com&#x2F;blog&#x2F;five-methods-of-database-obfuscation" rel="nofollow">https:&#x2F;&#x2F;clickhouse.com&#x2F;blog&#x2F;five-methods-of-database-obfusca...</a>.<p>The summary is pretty funny:<p>&gt; <i>&quot;After trying four methods, I got so tired of this problem that it was time just to choose something, make it into a usable tool, and announce the solution&quot;</i></div><br/></div></div></div></div><div id="42736086" class="c"><input type="checkbox" id="c-42736086" checked=""/><div class="controls bullet"><span class="by">phoronixrly</span><span>|</span><a href="#42736249">prev</a><span>|</span><a href="#42739402">next</a><span>|</span><label class="collapse" for="c-42736086">[-]</label><label class="expand" for="c-42736086">[2 more]</label></div><br/><div class="children"><div class="content">I have some experience with the &#x27;Masking Views&#x27; functionality. If you are going to rely on it and specifically in a Rails app, know that it is against conventions and thus is generally inconvenient. This may be the same with any other framework that features DB schema migrations.<p>More specifically the integration of this functionality at a fortunately ex-employer was purposefully kept away from the dev team (no motivation was offered, however I suspect that some sort of segmentation was sought after) and thus did not take into account that tables with PII did in fact still need their schema changed from time to time.<p>This lead to the anonymizer extension, together with the confidential views to only be installed on production DB instances with dev, test, and staging instances running vanilla postgres. With this, the possibility to catch DB migration issues related to the confidential views was pushed out to the release itself. This lead to numerous failed releases which involved having the ops team intervene, manually remove the views for the duration of the release, then manually re-create them.<p>So,<p>If you plan to use this extension, and specifically its views, make sure you have it set up in the exactly same way on all environments. Also make sure that its initialisation and view creation are part of your framework&#x27;s DB migrations so that they are documented and easy to precisely reproduce on new environments.</div><br/><div id="42744586" class="c"><input type="checkbox" id="c-42744586" checked=""/><div class="controls bullet"><span class="by">daamien</span><span>|</span><a href="#42736086">parent</a><span>|</span><a href="#42739402">next</a><span>|</span><label class="collapse" for="c-42744586">[-]</label><label class="expand" for="c-42744586">[1 more]</label></div><br/><div class="children"><div class="content">PostgreSQL Anonymizer developer here : the problem you are describing here only affects version 1.x<p>Version 2.0 was released a few days ago with a branch new masking system that does not block database migrations.</div><br/></div></div></div></div><div id="42739402" class="c"><input type="checkbox" id="c-42739402" checked=""/><div class="controls bullet"><span class="by">riskable</span><span>|</span><a href="#42736086">prev</a><span>|</span><a href="#42737764">next</a><span>|</span><label class="collapse" for="c-42739402">[-]</label><label class="expand" for="c-42739402">[6 more]</label></div><br/><div class="children"><div class="content">One of the best ways to handle this sort of thing is to put things like PII in a separate database entirely and replace it with a token in the &quot;main&quot; database.  When something like PII <i>actually</i> needs to be retrieved you first retrieve the token and then search the other database for said token to get the real data.<p>It certainly complicates things but it provides an additional security layer of separation between the PII and it&#x27;s related data.  You can provide your end users access to a database without having to worry about them getting access to the &quot;dangerous&quot; data.  If they do indeed need access to the data pointed to via the token they can request access to that related database.<p>This method also provides more performance since you don&#x27;t need to encrypt the entire database (which is often required when storing PII) and also don&#x27;t need to add extra security context function calls to every database request.</div><br/><div id="42744848" class="c"><input type="checkbox" id="c-42744848" checked=""/><div class="controls bullet"><span class="by">estreeper</span><span>|</span><a href="#42739402">parent</a><span>|</span><a href="#42745753">next</a><span>|</span><label class="collapse" for="c-42744848">[-]</label><label class="expand" for="c-42744848">[1 more]</label></div><br/><div class="children"><div class="content">A nice tradeoff in many cases is to have a separate schema rather than a separate database, which allows preserving referential integrity and using the database’s RBAC to restrict access to the schemas. This also means things like cascading deletes can still work.</div><br/></div></div><div id="42745753" class="c"><input type="checkbox" id="c-42745753" checked=""/><div class="controls bullet"><span class="by">10000truths</span><span>|</span><a href="#42739402">parent</a><span>|</span><a href="#42744848">prev</a><span>|</span><a href="#42739945">next</a><span>|</span><label class="collapse" for="c-42745753">[-]</label><label class="expand" for="c-42745753">[1 more]</label></div><br/><div class="children"><div class="content">What&#x27;s the difference between this and a user ID that&#x27;s not publicly exposed?</div><br/></div></div><div id="42739945" class="c"><input type="checkbox" id="c-42739945" checked=""/><div class="controls bullet"><span class="by">VWWHFSfQ</span><span>|</span><a href="#42739402">parent</a><span>|</span><a href="#42745753">prev</a><span>|</span><a href="#42740081">next</a><span>|</span><label class="collapse" for="c-42739945">[-]</label><label class="expand" for="c-42739945">[1 more]</label></div><br/><div class="children"><div class="content">The is basically just a foreign database key which, in most cases, is not sufficient to satisfy industry and regulatory requirements for anonymization and storage of PII.</div><br/></div></div><div id="42740081" class="c"><input type="checkbox" id="c-42740081" checked=""/><div class="controls bullet"><span class="by">ComputerGuru</span><span>|</span><a href="#42739402">parent</a><span>|</span><a href="#42739945">prev</a><span>|</span><a href="#42740069">next</a><span>|</span><label class="collapse" for="c-42740081">[-]</label><label class="expand" for="c-42740081">[1 more]</label></div><br/><div class="children"><div class="content">Eh. I get your point and truly appreciate structural safeguards as opposed to aspirational ones but this is really not as doable as you make it out to be, and doing it properly would be a full blown product in its own right.
First, this only works if you have a very narrow interpretation of PII. Once you realize most of your non-int&#x2F;uuid unique indexes (and all your join predicates) are probably PII in some way or the other, the scope of the problem greatly increases. How does your solution work when you need to group by PII, full text search by PII, filter by PII, etc?</div><br/></div></div></div></div><div id="42737764" class="c"><input type="checkbox" id="c-42737764" checked=""/><div class="controls bullet"><span class="by">foreigner</span><span>|</span><a href="#42739402">prev</a><span>|</span><a href="#42743038">next</a><span>|</span><label class="collapse" for="c-42737764">[-]</label><label class="expand" for="c-42737764">[2 more]</label></div><br/><div class="children"><div class="content">TIL that PostgreSQL has SECURITY LABEL! It seems like this could be useful for storing all sorts of metadata about database objects, not just security stuff. E.g. like the COMMENT but not global. From reading the docs it looks like you need a &quot;label provider&quot; to get it to work though. I can only seem to find a few label providers around, does anyone know of one that isn&#x27;t security&#x2F;anonymization related and could be used more generically?</div><br/><div id="42744171" class="c"><input type="checkbox" id="c-42744171" checked=""/><div class="controls bullet"><span class="by">michelpp</span><span>|</span><a href="#42737764">parent</a><span>|</span><a href="#42743038">next</a><span>|</span><label class="collapse" for="c-42744171">[-]</label><label class="expand" for="c-42744171">[1 more]</label></div><br/><div class="children"><div class="content">Yep, it&#x27;s a completely generic feature, and I&#x27;d argue the keyword &#x27;SECURITY&#x27; is a noise word and &#x27;LABEL&#x27; by itself would be even better, but that&#x27;s what we&#x27;re stuck with.  As the documentation states: &quot; PostgreSQL places no restrictions on whether or how a label provider must interpret security labels; it merely provides a mechanism for storing them.&quot;</div><br/></div></div></div></div><div id="42743038" class="c"><input type="checkbox" id="c-42743038" checked=""/><div class="controls bullet"><span class="by">gmassman</span><span>|</span><a href="#42737764">prev</a><span>|</span><a href="#42742589">next</a><span>|</span><label class="collapse" for="c-42743038">[-]</label><label class="expand" for="c-42743038">[2 more]</label></div><br/><div class="children"><div class="content">This is a very handy postgres extension! We&#x27;ve been using it at my job for a couple years now to generate test datasets for developers. We have a weekly job that restores a prod backup to a temporary DB, installs the `anon` extension, and runs pg_dump with the masking rules. Overall we&#x27;ve been very happy with this workflow since it gives us a very good idea of how new features will work with our production data. The masking rules do need maintenance as our DB schema changes, but that&#x27;s par for the course with these kinds of dev tools.<p>All that said, I wouldn&#x27;t rely on this extension as a way to deliver anonymized data to downstream consumers outside of our software team. As others have pointed out, this is really more of a pseudonymization technique. It&#x27;s great for removing phone numbers, emails, etc. from your data set, but it&#x27;s not going to eradicate PII. Pretty much all anonymized records can be traced back to their source data through PKs or FKs.</div><br/><div id="42744762" class="c"><input type="checkbox" id="c-42744762" checked=""/><div class="controls bullet"><span class="by">daamien</span><span>|</span><a href="#42743038">parent</a><span>|</span><a href="#42742589">next</a><span>|</span><label class="collapse" for="c-42744762">[-]</label><label class="expand" for="c-42744762">[1 more]</label></div><br/><div class="children"><div class="content">Pseudonymizing functions are just one way to mask the data.<p>There are many other masking functions that will actually anonymize the data.<p>And the extension does not force you to respect the foreign keys.<p>It&#x27;s really up to you to decide how you want to implement your masking policy</div><br/></div></div></div></div><div id="42742589" class="c"><input type="checkbox" id="c-42742589" checked=""/><div class="controls bullet"><span class="by">joram87</span><span>|</span><a href="#42743038">prev</a><span>|</span><a href="#42738677">next</a><span>|</span><label class="collapse" for="c-42742589">[-]</label><label class="expand" for="c-42742589">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been working on something similar, starting a company around the idea! We realized that a lot of people had concerns or challenges with installing an extension on their production database and also that they wanted non-technical folks in compliance or HR to be able to configure and maintain the rules for individual employees. pgAnonymizer is a database extension but we structured ours to be a proxy server that hides&#x2F;anonymizes&#x2F;filters the data. We made a web dashboard that simplifies the configuration process, and allows you to configure what to do if columns get added to the database (default mask or hide new columns). We&#x27;re about to go GA and if anyone has any feedback or wants to a free beta testing trial, I&#x27;d love to chat</div><br/><div id="42742607" class="c"><input type="checkbox" id="c-42742607" checked=""/><div class="controls bullet"><span class="by">joram87</span><span>|</span><a href="#42742589">parent</a><span>|</span><a href="#42738677">next</a><span>|</span><label class="collapse" for="c-42742607">[-]</label><label class="expand" for="c-42742607">[1 more]</label></div><br/><div class="children"><div class="content">I probably should mention the name of the tool I&#x27;m working on... oops, it&#x27;s VeilStream :)</div><br/></div></div></div></div><div id="42738677" class="c"><input type="checkbox" id="c-42738677" checked=""/><div class="controls bullet"><span class="by">nickzelei</span><span>|</span><a href="#42742589">prev</a><span>|</span><a href="#42738941">next</a><span>|</span><label class="collapse" for="c-42738677">[-]</label><label class="expand" for="c-42738677">[1 more]</label></div><br/><div class="children"><div class="content">This can work pretty well if you want to either mask the data in prod or update it in place.<p>A good use case that comes to mind is using prod data in a retool app or something for your internal team but you want to mask out certain bits.<p>I’ve been building Neosync [1] to handle more advanced use cases where you want to anonymize data for lower level environments. This is more useful for stage or dev data. Then prod stays completely unexposed to anyone.<p>It also has a transactional anonymization api too.<p>[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;nucleuscloud&#x2F;neosync">https:&#x2F;&#x2F;github.com&#x2F;nucleuscloud&#x2F;neosync</a></div><br/></div></div><div id="42738941" class="c"><input type="checkbox" id="c-42738941" checked=""/><div class="controls bullet"><span class="by">sam0x17</span><span>|</span><a href="#42738677">prev</a><span>|</span><a href="#42735562">next</a><span>|</span><label class="collapse" for="c-42738941">[-]</label><label class="expand" for="c-42738941">[2 more]</label></div><br/><div class="children"><div class="content">I was actually tasked with building essentially this same thing back in 2014 when I was a junior dev for a fintech startup. They needed an anonymized version of prod database suitable for support team to pull up when trying to reproduce bugs. Did this gigantic thing that would stream the db dump into a C++ app and anonymize it on the fly. Took a similar approach to their masking they do here. Fun project. Company should have productized it.</div><br/><div id="42740626" class="c"><input type="checkbox" id="c-42740626" checked=""/><div class="controls bullet"><span class="by">nickzelei</span><span>|</span><a href="#42738941">parent</a><span>|</span><a href="#42735562">next</a><span>|</span><label class="collapse" for="c-42740626">[-]</label><label class="expand" for="c-42740626">[1 more]</label></div><br/><div class="children"><div class="content">This is the exact usecase that we are building for with Neosync (<a href="https:&#x2F;&#x2F;github.com&#x2F;nucleuscloud&#x2F;neosync">https:&#x2F;&#x2F;github.com&#x2F;nucleuscloud&#x2F;neosync</a>)</div><br/></div></div></div></div><div id="42735562" class="c"><input type="checkbox" id="c-42735562" checked=""/><div class="controls bullet"><span class="by">dandiep</span><span>|</span><a href="#42738941">prev</a><span>|</span><a href="#42737156">next</a><span>|</span><label class="collapse" for="c-42735562">[-]</label><label class="expand" for="c-42735562">[15 more]</label></div><br/><div class="children"><div class="content">This is a fantastic idea. Now how to get it on RDS…</div><br/><div id="42738098" class="c"><input type="checkbox" id="c-42738098" checked=""/><div class="controls bullet"><span class="by">hylaride</span><span>|</span><a href="#42735562">parent</a><span>|</span><a href="#42735841">next</a><span>|</span><label class="collapse" for="c-42738098">[-]</label><label class="expand" for="c-42738098">[2 more]</label></div><br/><div class="children"><div class="content">It can be done manually:<p><a href="https:&#x2F;&#x2F;dba.stackexchange.com&#x2F;questions&#x2F;306661&#x2F;how-to-install-postgresql-anonymizer-0-8-1-on-amazon-rds" rel="nofollow">https:&#x2F;&#x2F;dba.stackexchange.com&#x2F;questions&#x2F;306661&#x2F;how-to-instal...</a></div><br/><div id="42744657" class="c"><input type="checkbox" id="c-42744657" checked=""/><div class="controls bullet"><span class="by">daamien</span><span>|</span><a href="#42735562">root</a><span>|</span><a href="#42738098">parent</a><span>|</span><a href="#42735841">next</a><span>|</span><label class="collapse" for="c-42744657">[-]</label><label class="expand" for="c-42744657">[1 more]</label></div><br/><div class="children"><div class="content">PostgreSQL Anonymizer developer here : this was possible with version 0.8 which is now completely unmaintained.<p>This extension is currently not available on RDS but it is available on many others DBaaS providers : Azure SQL, Google Cloud SQL, Crunchy Bridge, ....</div><br/></div></div></div></div><div id="42735841" class="c"><input type="checkbox" id="c-42735841" checked=""/><div class="controls bullet"><span class="by">zdc1</span><span>|</span><a href="#42735562">parent</a><span>|</span><a href="#42738098">prev</a><span>|</span><a href="#42738223">next</a><span>|</span><label class="collapse" for="c-42735841">[-]</label><label class="expand" for="c-42735841">[3 more]</label></div><br/><div class="children"><div class="content">Assuming if it&#x27;s for a support team or internal users with a lower SLA, I wonder if it&#x27;s possible to have a small self-hosted PostgreSQL server that basically acts as a shim by holding a foreign-data wrapper connection to the actual RDS instance</div><br/><div id="42744669" class="c"><input type="checkbox" id="c-42744669" checked=""/><div class="controls bullet"><span class="by">daamien</span><span>|</span><a href="#42735562">root</a><span>|</span><a href="#42735841">parent</a><span>|</span><a href="#42735969">next</a><span>|</span><label class="collapse" for="c-42744669">[-]</label><label class="expand" for="c-42744669">[1 more]</label></div><br/><div class="children"><div class="content">This called &quot;Masking Data Wrappers&quot;<p><a href="https:&#x2F;&#x2F;postgresql-anonymizer.readthedocs.io&#x2F;en&#x2F;stable&#x2F;masking_data_wrappers&#x2F;" rel="nofollow">https:&#x2F;&#x2F;postgresql-anonymizer.readthedocs.io&#x2F;en&#x2F;stable&#x2F;maski...</a></div><br/></div></div></div></div><div id="42738223" class="c"><input type="checkbox" id="c-42738223" checked=""/><div class="controls bullet"><span class="by">debarshri</span><span>|</span><a href="#42735562">parent</a><span>|</span><a href="#42735841">prev</a><span>|</span><a href="#42735970">next</a><span>|</span><label class="collapse" for="c-42738223">[-]</label><label class="expand" for="c-42738223">[2 more]</label></div><br/><div class="children"><div class="content">In RDS, if you cannot use this, you can create masked view and use query rewrite to make it work.<p>In my experience PG anonymizer has performance issues when it comes to large queries.</div><br/><div id="42744675" class="c"><input type="checkbox" id="c-42744675" checked=""/><div class="controls bullet"><span class="by">daamien</span><span>|</span><a href="#42735562">root</a><span>|</span><a href="#42738223">parent</a><span>|</span><a href="#42735970">next</a><span>|</span><label class="collapse" for="c-42744675">[-]</label><label class="expand" for="c-42744675">[1 more]</label></div><br/><div class="children"><div class="content">Version 2.0 was released a few days ago. It&#x27;s a complete rewrite in Rust.<p>Performance should be better than with v1.x</div><br/></div></div></div></div><div id="42735970" class="c"><input type="checkbox" id="c-42735970" checked=""/><div class="controls bullet"><span class="by">willgdjones</span><span>|</span><a href="#42735562">parent</a><span>|</span><a href="#42738223">prev</a><span>|</span><a href="#42737722">next</a><span>|</span><label class="collapse" for="c-42735970">[-]</label><label class="expand" for="c-42735970">[2 more]</label></div><br/><div class="children"><div class="content">+1 for RDS support. I have wanted to use this for a while in our production systems.
reply</div><br/><div id="42738107" class="c"><input type="checkbox" id="c-42738107" checked=""/><div class="controls bullet"><span class="by">hylaride</span><span>|</span><a href="#42735562">root</a><span>|</span><a href="#42735970">parent</a><span>|</span><a href="#42737722">next</a><span>|</span><label class="collapse" for="c-42738107">[-]</label><label class="expand" for="c-42738107">[1 more]</label></div><br/><div class="children"><div class="content">It can be done manually:<p><a href="https:&#x2F;&#x2F;dba.stackexchange.com&#x2F;questions&#x2F;306661&#x2F;how-to-instal" rel="nofollow">https:&#x2F;&#x2F;dba.stackexchange.com&#x2F;questions&#x2F;306661&#x2F;how-to-instal</a>...<p>reply</div><br/></div></div></div></div><div id="42737722" class="c"><input type="checkbox" id="c-42737722" checked=""/><div class="controls bullet"><span class="by">symfoniq</span><span>|</span><a href="#42735562">parent</a><span>|</span><a href="#42735970">prev</a><span>|</span><a href="#42737156">next</a><span>|</span><label class="collapse" for="c-42737722">[-]</label><label class="expand" for="c-42737722">[5 more]</label></div><br/><div class="children"><div class="content">Same. Lack of RDS support is the only reason we aren’t using this.</div><br/><div id="42738105" class="c"><input type="checkbox" id="c-42738105" checked=""/><div class="controls bullet"><span class="by">hylaride</span><span>|</span><a href="#42735562">root</a><span>|</span><a href="#42737722">parent</a><span>|</span><a href="#42740715">next</a><span>|</span><label class="collapse" for="c-42738105">[-]</label><label class="expand" for="c-42738105">[2 more]</label></div><br/><div class="children"><div class="content">It can be done manually:<p><a href="https:&#x2F;&#x2F;dba.stackexchange.com&#x2F;questions&#x2F;306661&#x2F;how-to-instal" rel="nofollow">https:&#x2F;&#x2F;dba.stackexchange.com&#x2F;questions&#x2F;306661&#x2F;how-to-instal</a>...<p>reply</div><br/><div id="42744745" class="c"><input type="checkbox" id="c-42744745" checked=""/><div class="controls bullet"><span class="by">daamien</span><span>|</span><a href="#42735562">root</a><span>|</span><a href="#42738105">parent</a><span>|</span><a href="#42740715">next</a><span>|</span><label class="collapse" for="c-42744745">[-]</label><label class="expand" for="c-42744745">[1 more]</label></div><br/><div class="children"><div class="content">PostgreSQL Anonymizer developer here : this was possible with version 0.8 which is now completely unmaintained.
This extension is currently not available on RDS but it is available on many others DBaaS providers : Azure SQL, Google Cloud SQL, Crunchy Bridge, ....</div><br/></div></div></div></div><div id="42740715" class="c"><input type="checkbox" id="c-42740715" checked=""/><div class="controls bullet"><span class="by">edrenova</span><span>|</span><a href="#42735562">root</a><span>|</span><a href="#42737722">parent</a><span>|</span><a href="#42738105">prev</a><span>|</span><a href="#42737156">next</a><span>|</span><label class="collapse" for="c-42740715">[-]</label><label class="expand" for="c-42740715">[2 more]</label></div><br/><div class="children"><div class="content">Just to jump in here -&gt; We support RDS + more and you can self-host, Neosync.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;nucleuscloud&#x2F;neosync">https:&#x2F;&#x2F;github.com&#x2F;nucleuscloud&#x2F;neosync</a><p>(I&#x27;m one of the co-founders)</div><br/><div id="42741339" class="c"><input type="checkbox" id="c-42741339" checked=""/><div class="controls bullet"><span class="by">BoorishBears</span><span>|</span><a href="#42735562">root</a><span>|</span><a href="#42740715">parent</a><span>|</span><a href="#42737156">next</a><span>|</span><label class="collapse" for="c-42741339">[-]</label><label class="expand" for="c-42741339">[1 more]</label></div><br/><div class="children"><div class="content">I tried to figure out how&#x2F;if this does what I need and your README had no examples. I clicked a couple of level deep, found no obvious demonstrations and left.<p>I checked the homepage but I do not watch Loom-style demos personally, <i>definitely</i>  not 5 minute ones, and so I left.<p>-<p>When I click on OP&#x27;s link, or just search for it on Google, it takes less than a full page for the extension to show me an extremely straightforward demonstration of its value. You should have something like that.<p>A simple example of what queries will look like, what setup will look like, all concisely communicated, no 5 minute lectures involved.</div><br/></div></div></div></div></div></div></div></div><div id="42737156" class="c"><input type="checkbox" id="c-42737156" checked=""/><div class="controls bullet"><span class="by">pgryko</span><span>|</span><a href="#42735562">prev</a><span>|</span><a href="#42744770">next</a><span>|</span><label class="collapse" for="c-42737156">[-]</label><label class="expand" for="c-42737156">[2 more]</label></div><br/><div class="children"><div class="content">Are these tools able to automatically identify PII information or do you have to specify columns and data types manually? What happens if you have PII data in a string field? Do you just rely on something like spacy to identify the PII data?</div><br/><div id="42737215" class="c"><input type="checkbox" id="c-42737215" checked=""/><div class="controls bullet"><span class="by">graindcafe</span><span>|</span><a href="#42737156">parent</a><span>|</span><a href="#42744770">next</a><span>|</span><label class="collapse" for="c-42737215">[-]</label><label class="expand" for="c-42737215">[1 more]</label></div><br/><div class="children"><div class="content">From the website:<p>&gt; The project has a declarative approach of anonymization.<p>&gt; Finally, the extension offers a panel of detection functions that will try to guess which columns need to be anonymized.<p><a href="https:&#x2F;&#x2F;postgresql-anonymizer.readthedocs.io&#x2F;en&#x2F;stable&#x2F;detection&#x2F;" rel="nofollow">https:&#x2F;&#x2F;postgresql-anonymizer.readthedocs.io&#x2F;en&#x2F;stable&#x2F;detec...</a></div><br/></div></div></div></div><div id="42744770" class="c"><input type="checkbox" id="c-42744770" checked=""/><div class="controls bullet"><span class="by">daamien</span><span>|</span><a href="#42737156">prev</a><span>|</span><a href="#42740671">next</a><span>|</span><label class="collapse" for="c-42744770">[-]</label><label class="expand" for="c-42744770">[1 more]</label></div><br/><div class="children"><div class="content">Hi !<p>I&#x27;m the main developer of this extension. Happy to answer any question you have about this project and anonymization in general!</div><br/></div></div><div id="42740671" class="c"><input type="checkbox" id="c-42740671" checked=""/><div class="controls bullet"><span class="by">Cynddl</span><span>|</span><a href="#42744770">prev</a><span>|</span><a href="#42736058">next</a><span>|</span><label class="collapse" for="c-42740671">[-]</label><label class="expand" for="c-42740671">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;m going to repeat myself as I do everytime I encounter such tools. These tools DO NOT provide anonymization, and especially not at the level required by the EU&#x27;s GDPR (where the notion of PII does not exist).<p>As a computer scientist and academic researcher having worked on this topic for now more than a decade (some of my work if you are interested: [1, 2]), re-identification is often possible from few pieces of information. Masking or replacing a few values or columns will often not provide sufficient guarantees—especially when a lot of information is being released.<p>What this tool does is called ‘pseudonymization’ and maybe, if not very carefully, ‘de-identification’ in some case. With colleagues, reviewed all the literature and industry practices a few months ago [3], and our conclusion was:<p>&gt; We find that, although no perfect solution exists, applying modern techniques while auditing their guarantees against attacks is the best approach to safely use and share data today.<p>This is clearly not what this tool is doing.<p>[1] <a href="https:&#x2F;&#x2F;www.nature.com&#x2F;articles&#x2F;s41467-019-10933-3" rel="nofollow">https:&#x2F;&#x2F;www.nature.com&#x2F;articles&#x2F;s41467-019-10933-3</a>
[2] <a href="https:&#x2F;&#x2F;www.nature.com&#x2F;articles&#x2F;s41467-024-55296-6" rel="nofollow">https:&#x2F;&#x2F;www.nature.com&#x2F;articles&#x2F;s41467-024-55296-6</a>
[3] <a href="https:&#x2F;&#x2F;www.science.org&#x2F;doi&#x2F;10.1126&#x2F;sciadv.adn7053" rel="nofollow">https:&#x2F;&#x2F;www.science.org&#x2F;doi&#x2F;10.1126&#x2F;sciadv.adn7053</a></div><br/><div id="42744713" class="c"><input type="checkbox" id="c-42744713" checked=""/><div class="controls bullet"><span class="by">daamien</span><span>|</span><a href="#42740671">parent</a><span>|</span><a href="#42741990">next</a><span>|</span><label class="collapse" for="c-42744713">[-]</label><label class="expand" for="c-42744713">[1 more]</label></div><br/><div class="children"><div class="content">Of course there&#x27;s no perfect solution for anonymizing a dataset...<p>The extension offers a large panel of masking functions : some are pseudonymizing functions but others are more destructive. For instance there&#x27;s large collection of fake data generators ( names, address, phones, etc. )<p>It&#x27;s up to the database administrator or the application developer to decide which columns need to be masked and how it should be masked.<p>In some use cases, pseudonymization is enough and others anonymization is required....</div><br/></div></div><div id="42741990" class="c"><input type="checkbox" id="c-42741990" checked=""/><div class="controls bullet"><span class="by">aquilaFiera</span><span>|</span><a href="#42740671">parent</a><span>|</span><a href="#42744713">prev</a><span>|</span><a href="#42736058">next</a><span>|</span><label class="collapse" for="c-42741990">[-]</label><label class="expand" for="c-42741990">[1 more]</label></div><br/><div class="children"><div class="content">Seems like if you&#x27;re doing static masking and you mask enough data, this works just great. Am I missing something?</div><br/></div></div></div></div><div id="42736058" class="c"><input type="checkbox" id="c-42736058" checked=""/><div class="controls bullet"><span class="by">riffraff</span><span>|</span><a href="#42740671">prev</a><span>|</span><a href="#42735168">next</a><span>|</span><label class="collapse" for="c-42736058">[-]</label><label class="expand" for="c-42736058">[2 more]</label></div><br/><div class="children"><div class="content">this seems great. I wonder tho, how do you ensure new columns are masked by default? It seems a safer alternative would be to start with all columns being statically masked and only unveil them selectively.<p>I guess you can add some CI steps when modifying the db to ensure a give column is allowed or masked, but still, would be nice if this was defaulted the other way around.</div><br/><div id="42744726" class="c"><input type="checkbox" id="c-42744726" checked=""/><div class="controls bullet"><span class="by">daamien</span><span>|</span><a href="#42736058">parent</a><span>|</span><a href="#42735168">next</a><span>|</span><label class="collapse" for="c-42744726">[-]</label><label class="expand" for="c-42744726">[1 more]</label></div><br/><div class="children"><div class="content">This is called &quot;Privacy By Default&quot;<p><a href="https:&#x2F;&#x2F;postgresql-anonymizer.readthedocs.io&#x2F;en&#x2F;stable&#x2F;privacy_by_default&#x2F;" rel="nofollow">https:&#x2F;&#x2F;postgresql-anonymizer.readthedocs.io&#x2F;en&#x2F;stable&#x2F;priva...</a></div><br/></div></div></div></div><div id="42735168" class="c"><input type="checkbox" id="c-42735168" checked=""/><div class="controls bullet"><span class="by">sgt</span><span>|</span><a href="#42736058">prev</a><span>|</span><label class="collapse" for="c-42735168">[-]</label><label class="expand" for="c-42735168">[7 more]</label></div><br/><div class="children"><div class="content">Just be careful that you don&#x27;t anonymize your production data.</div><br/><div id="42735455" class="c"><input type="checkbox" id="c-42735455" checked=""/><div class="controls bullet"><span class="by">lovasoa</span><span>|</span><a href="#42735168">parent</a><span>|</span><a href="#42735222">next</a><span>|</span><label class="collapse" for="c-42735455">[-]</label><label class="expand" for="c-42735455">[4 more]</label></div><br/><div class="children"><div class="content">The principle of the software seems to be that the original data is never altered. It is a postgres extension that &quot;masks&quot; the data for certain postgres users. You can always connect as the root user and see everything when you need to.</div><br/><div id="42737584" class="c"><input type="checkbox" id="c-42737584" checked=""/><div class="controls bullet"><span class="by">heeton</span><span>|</span><a href="#42735168">root</a><span>|</span><a href="#42735455">parent</a><span>|</span><a href="#42735222">next</a><span>|</span><label class="collapse" for="c-42737584">[-]</label><label class="expand" for="c-42737584">[3 more]</label></div><br/><div class="children"><div class="content">It allows updating the original data - <a href="https:&#x2F;&#x2F;postgresql-anonymizer.readthedocs.io&#x2F;en&#x2F;stable&#x2F;static_masking&#x2F;" rel="nofollow">https:&#x2F;&#x2F;postgresql-anonymizer.readthedocs.io&#x2F;en&#x2F;stable&#x2F;stati...</a><p>&gt; These methods will destroy the original data. Use with care.</div><br/><div id="42741999" class="c"><input type="checkbox" id="c-42741999" checked=""/><div class="controls bullet"><span class="by">sgt</span><span>|</span><a href="#42735168">root</a><span>|</span><a href="#42737584">parent</a><span>|</span><a href="#42735222">next</a><span>|</span><label class="collapse" for="c-42741999">[-]</label><label class="expand" for="c-42741999">[2 more]</label></div><br/><div class="children"><div class="content">So basically running SELECT anon.anonymize_database(); will do it.</div><br/><div id="42744737" class="c"><input type="checkbox" id="c-42744737" checked=""/><div class="controls bullet"><span class="by">daamien</span><span>|</span><a href="#42735168">root</a><span>|</span><a href="#42741999">parent</a><span>|</span><a href="#42735222">next</a><span>|</span><label class="collapse" for="c-42744737">[-]</label><label class="expand" for="c-42744737">[1 more]</label></div><br/><div class="children"><div class="content">Both approach are possible<p>* Static Masking will destroy the authentic data once for all<p>* Dynamic Masking will only alter the data the &quot;masked users&quot;. Regular users will continue to view the real data.<p>Both techniques have their own advantage depending on your context.</div><br/></div></div></div></div></div></div></div></div><div id="42735222" class="c"><input type="checkbox" id="c-42735222" checked=""/><div class="controls bullet"><span class="by">go_prodev</span><span>|</span><a href="#42735168">parent</a><span>|</span><a href="#42735455">prev</a><span>|</span><a href="#42735797">next</a><span>|</span><label class="collapse" for="c-42735222">[-]</label><label class="expand" for="c-42735222">[1 more]</label></div><br/><div class="children"><div class="content">With great power comes great responsibility.</div><br/></div></div><div id="42735797" class="c"><input type="checkbox" id="c-42735797" checked=""/><div class="controls bullet"><span class="by">antman</span><span>|</span><a href="#42735168">parent</a><span>|</span><a href="#42735222">prev</a><span>|</span><label class="collapse" for="c-42735797">[-]</label><label class="expand" for="c-42735797">[1 more]</label></div><br/><div class="children"><div class="content">Masking is for view for specific users</div><br/></div></div></div></div></div></div></div></div></div></body></html>