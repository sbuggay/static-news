<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1733994055633" as="style"/><link rel="stylesheet" href="styles.css?v=1733994055633"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://simonwillison.net/2024/Nov/27/storing-times-for-human-events/">Storing Times for Human Events</a> <span class="domain">(<a href="https://simonwillison.net">simonwillison.net</a>)</span></div><div class="subtext"><span>kiyanwang</span> | <span>49 comments</span></div><br/><div><div id="42393138" class="c"><input type="checkbox" id="c-42393138" checked=""/><div class="controls bullet"><span class="by">Aachen</span><span>|</span><a href="#42393812">next</a><span>|</span><label class="collapse" for="c-42393138">[-]</label><label class="expand" for="c-42393138">[6 more]</label></div><br/><div class="children"><div class="content">It&#x27;s an interesting article I read and shared with friends when I first saw it, and recommend anyone to read who is not already knowledgeable on the topic, but eh<p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=42259689">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=42259689</a> 14 days ago<p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=42281983">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=42281983</a> 11 days ago<p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=42358025">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=42358025</a> 3 days ago<p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=42364372">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=42364372</a> reportedly 3 days ago but it&#x27;s the same HN item ID as this one (second chance pool maybe?)<p>It&#x27;s barely 2 weeks old, is it worth reposting that often?<p>Semi-related, I remember submitting something I found interesting that had been posted iirc ~40 days ago, but had barely gotten any votes so I submitted it once more and i just get redirected to the old ID and the system refuses to create a new entry. Okay no problem, I&#x27;ll post later^W^W forget about it, but that makes me wonder: how can 4 submissions in two weeks even physically happen?</div><br/><div id="42393222" class="c"><input type="checkbox" id="c-42393222" checked=""/><div class="controls bullet"><span class="by">vunderba</span><span>|</span><a href="#42393138">parent</a><span>|</span><a href="#42393507">next</a><span>|</span><label class="collapse" for="c-42393222">[-]</label><label class="expand" for="c-42393222">[2 more]</label></div><br/><div class="children"><div class="content">It would be nice if HN took advantage of the fast Algolia search as the person is typing in the <i>&quot;Submit URL Field&quot;</i> to show the last time(s) it has been submitted in chronological order to help make a better informed decision as to whether something is worth submitting in the first place.</div><br/><div id="42395020" class="c"><input type="checkbox" id="c-42395020" checked=""/><div class="controls bullet"><span class="by">throwup238</span><span>|</span><a href="#42393138">root</a><span>|</span><a href="#42393222">parent</a><span>|</span><a href="#42393507">next</a><span>|</span><label class="collapse" for="c-42395020">[-]</label><label class="expand" for="c-42395020">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s on the roadmap, circa 2045.<p>We just got unpaginated threads after several decades so it&#x27;ll be a while before the developer cooldown is up.</div><br/></div></div></div></div><div id="42393507" class="c"><input type="checkbox" id="c-42393507" checked=""/><div class="controls bullet"><span class="by">lcnPylGDnU4H9OF</span><span>|</span><a href="#42393138">parent</a><span>|</span><a href="#42393222">prev</a><span>|</span><a href="#42393226">next</a><span>|</span><label class="collapse" for="c-42393507">[-]</label><label class="expand" for="c-42393507">[1 more]</label></div><br/><div class="children"><div class="content">&gt; second chance pool maybe?<p>It appears to be so. You can hover your cursor over the relative time of the post to see an absolute date which does not change.</div><br/></div></div><div id="42393226" class="c"><input type="checkbox" id="c-42393226" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#42393138">parent</a><span>|</span><a href="#42393507">prev</a><span>|</span><a href="#42396513">next</a><span>|</span><label class="collapse" for="c-42393226">[-]</label><label class="expand" for="c-42393226">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, I think that&#x27;s a bit weird too. Note that this is my article but none of those submissions were by me.<p>Maybe Hacker News needs to extend the time period during which it checks for duplicate URLs?</div><br/></div></div><div id="42396513" class="c"><input type="checkbox" id="c-42396513" checked=""/><div class="controls bullet"><span class="by">lxgr</span><span>|</span><a href="#42393138">parent</a><span>|</span><a href="#42393226">prev</a><span>|</span><a href="#42393812">next</a><span>|</span><label class="collapse" for="c-42396513">[-]</label><label class="expand" for="c-42396513">[1 more]</label></div><br/><div class="children"><div class="content">Reposting will continue until we can agree on a date format that lets us clearly and unambigously state when we&#x27;ll stop it :)<p>But seriously, yes, I think this is a very reasonable observation that&#x27;s still surprisingly controversial and accordingly could benefit from more boosting.</div><br/></div></div></div></div><div id="42393812" class="c"><input type="checkbox" id="c-42393812" checked=""/><div class="controls bullet"><span class="by">wavemode</span><span>|</span><a href="#42393138">prev</a><span>|</span><a href="#42393934">next</a><span>|</span><label class="collapse" for="c-42393812">[-]</label><label class="expand" for="c-42393812">[12 more]</label></div><br/><div class="children"><div class="content">One glaring omission from many tools for modeling chronology is that we have date, and datetime, but often don&#x27;t have a type for just &quot;time&quot;.<p>Sometimes you really just want to express that something is going to happen at a certain time, regardless of timezone. If I set my alarm for 7:45 am, I need it to ring when the clock says 7:45 am, wherever in the world I happen to be.<p>This is how most human beings think about time - school starts at 8 am, work starts at 9 am, McDonald&#x27;s serves breakfast until 10 am, my doctor&#x27;s appointment is at 4pm... these are all things that remain constant regardless of whether daylight savings time starts or ends, whether our business changes locations to a different state, whether we are conquered by the Romans and our calendar changes... so they should be stored as such, without a timezone attached.<p>Then from there you can combine a &quot;date&quot; and a &quot;time&quot; and a &quot;location &#x2F; timezone&quot; to form a &quot;datetime&quot;, to figure out the actual technological instant something needs to happen, based on the user&#x27;s location and&#x2F;or the location the event is going to take place.</div><br/><div id="42393857" class="c"><input type="checkbox" id="c-42393857" checked=""/><div class="controls bullet"><span class="by">Swizec</span><span>|</span><a href="#42393812">parent</a><span>|</span><a href="#42394462">next</a><span>|</span><label class="collapse" for="c-42393857">[-]</label><label class="expand" for="c-42393857">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Sometimes you really just want to express that something is going to happen at a certain time, regardless of timezone. If I set my alarm for 7:45 am, I need it to ring when the clock says 7:45 am, wherever in the world I happen to be.<p>One of my toughest engineering projects was a system that supports “every Thursday at 3pm” and the participants can be in different timezones with different DST rules. I learned more about time math and how humans think about this stuff than I ever cared to know.</div><br/><div id="42396726" class="c"><input type="checkbox" id="c-42396726" checked=""/><div class="controls bullet"><span class="by">dotancohen</span><span>|</span><a href="#42393812">root</a><span>|</span><a href="#42393857">parent</a><span>|</span><a href="#42394462">next</a><span>|</span><label class="collapse" for="c-42396726">[-]</label><label class="expand" for="c-42396726">[1 more]</label></div><br/><div class="children"><div class="content">Please share!</div><br/></div></div></div></div><div id="42394462" class="c"><input type="checkbox" id="c-42394462" checked=""/><div class="controls bullet"><span class="by">pchristensen</span><span>|</span><a href="#42393812">parent</a><span>|</span><a href="#42393857">prev</a><span>|</span><a href="#42396546">next</a><span>|</span><label class="collapse" for="c-42394462">[-]</label><label class="expand" for="c-42394462">[2 more]</label></div><br/><div class="children"><div class="content">I wrote a library ClockTime at my current job to do this. It&#x27;s a thin wrapper around a &quot;hh:mm&quot; string for a 24 hour time and a time zone name, with some helpers.<p>We ran into problems like &quot;someone in Chicago is meeting with someone in Arizona at 10am every day.&quot; Worked great until daylight savings time, which Arizona does not observe.<p>I&#x27;ve learned way more about how to think about, represent, communicate, store, and translate times than I ever thought was possible, but there are tons of war stories of people who have climbed higher on these Mountains of Madness than I can see through the fog of war.</div><br/><div id="42397105" class="c"><input type="checkbox" id="c-42397105" checked=""/><div class="controls bullet"><span class="by">sandblast</span><span>|</span><a href="#42393812">root</a><span>|</span><a href="#42394462">parent</a><span>|</span><a href="#42396546">next</a><span>|</span><label class="collapse" for="c-42397105">[-]</label><label class="expand" for="c-42397105">[1 more]</label></div><br/><div class="children"><div class="content">Would you be so kind to share some insights?</div><br/></div></div></div></div><div id="42396546" class="c"><input type="checkbox" id="c-42396546" checked=""/><div class="controls bullet"><span class="by">lxgr</span><span>|</span><a href="#42393812">parent</a><span>|</span><a href="#42394462">prev</a><span>|</span><a href="#42396865">next</a><span>|</span><label class="collapse" for="c-42396546">[-]</label><label class="expand" for="c-42396546">[2 more]</label></div><br/><div class="children"><div class="content">&gt; If I set my alarm for 7:45 am, I need it to ring when the clock says 7:45 am, wherever in the world I happen to be.<p>This property can be surprisingly hard to implement on Unix epoch based systems (just ask Apple), considering time zones, DST and everything!<p>I wonder if this is the reason that early RTC modules would actually count time in 24 hour or even calendar-based formats, as opposed to a simple binary counter? Examples include some Game Boy cartridges [1], and I believe also Palm OS handhelds (I think they triggered an alarm once per day to recalculate the date, although I can&#x27;t find a source right now).<p>[1] <a href="https:&#x2F;&#x2F;gbdev.io&#x2F;pandocs&#x2F;MBC3.html#the-clock-counter-registers" rel="nofollow">https:&#x2F;&#x2F;gbdev.io&#x2F;pandocs&#x2F;MBC3.html#the-clock-counter-registe...</a></div><br/><div id="42397001" class="c"><input type="checkbox" id="c-42397001" checked=""/><div class="controls bullet"><span class="by">somat</span><span>|</span><a href="#42393812">root</a><span>|</span><a href="#42396546">parent</a><span>|</span><a href="#42396865">next</a><span>|</span><label class="collapse" for="c-42397001">[-]</label><label class="expand" for="c-42397001">[1 more]</label></div><br/><div class="children"><div class="content">Sometimes the realtime clocks were based on watch movements, ok, I only know of one instance, but it is fascinating. these movements were purpose built as a low power embedded device that does one thing well, drive a seven segment display to show the time. so they had to jump through some wild hoops to get it to play with the rest of the system.<p><a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=pr6HTiWrMmk" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=pr6HTiWrMmk</a> (CuriousMarc)</div><br/></div></div></div></div><div id="42396865" class="c"><input type="checkbox" id="c-42396865" checked=""/><div class="controls bullet"><span class="by">TJSomething</span><span>|</span><a href="#42393812">parent</a><span>|</span><a href="#42396546">prev</a><span>|</span><a href="#42396391">next</a><span>|</span><label class="collapse" for="c-42396865">[-]</label><label class="expand" for="c-42396865">[1 more]</label></div><br/><div class="children"><div class="content">I tend to judge standard libraries by if they have different types for dates, times, absolute date&#x2F;times, local date&#x2F;times, zoned date&#x2F;times, and time zones. I may have been bitten by time zone bugs a little too often.</div><br/></div></div><div id="42396391" class="c"><input type="checkbox" id="c-42396391" checked=""/><div class="controls bullet"><span class="by">riwsky</span><span>|</span><a href="#42393812">parent</a><span>|</span><a href="#42396865">prev</a><span>|</span><a href="#42393855">next</a><span>|</span><label class="collapse" for="c-42396391">[-]</label><label class="expand" for="c-42396391">[1 more]</label></div><br/><div class="children"><div class="content">It took Java two tries to get their chronology standard libraries  right, but eventually they did: <a href="https:&#x2F;&#x2F;docs.oracle.com&#x2F;javase&#x2F;8&#x2F;docs&#x2F;api&#x2F;java&#x2F;time&#x2F;LocalTime.html" rel="nofollow">https:&#x2F;&#x2F;docs.oracle.com&#x2F;javase&#x2F;8&#x2F;docs&#x2F;api&#x2F;java&#x2F;time&#x2F;LocalTim...</a></div><br/></div></div><div id="42395151" class="c"><input type="checkbox" id="c-42395151" checked=""/><div class="controls bullet"><span class="by">lelandbatey</span><span>|</span><a href="#42393812">parent</a><span>|</span><a href="#42393855">prev</a><span>|</span><a href="#42393934">next</a><span>|</span><label class="collapse" for="c-42395151">[-]</label><label class="expand" for="c-42395151">[2 more]</label></div><br/><div class="children"><div class="content">Even what you&#x27;ve just described has problems because humans don&#x27;t think about time in a consistent or logical way that follows real rules that work across different humans in different places. We literally do not think about time in a way that follows rigor or rules, so there cannot be a rigorous computer system which satisfies all the humans involved as it&#x27;s axiomatically impossible due to being in a world with no axioms! Trying to talk about &quot;time as humans experience it&quot; is like trying to create a definitive list of the &quot;best books of the century&quot;; you can&#x27;t do it because that&#x27;s just, like, your opinion man.<p>If I&#x27;m in Portales New Mexico and I drive to see my sibling in Muleshoe Texas at what my clock says is &quot;8:30 AM&quot;, that&#x27;d take me approximately 40 minutes, allowing me to arrive 9:10AM where I can grab a breakfast sandwich at McDonald&#x27;s before meeting my sibling for shuffleboard. Except <i>whoops</i> I crossed a timezone discontinuity there, so actually I will arrive at 10:10AM and McDonalds will have decided to stop serving breakfast even though I&#x27;m hungry for eggs and the clock in my car happens to read &quot;9:10AM&quot;. This isn&#x27;t some reason to &quot;do away with timezones&quot; because that&#x27;d <i>still</i> have the same problem w&#x2F;r&#x2F;t travel and different perspectives; if I jet to London from NYC then McDs will <i>also</i> not be serving breakfest when I am hungry for eggs and my (unadjusted since boarding the flight) ticking Timex on my watch reads 9:10am. It&#x27;s not solvable because people are experiencing different &quot;times&quot; in different places. Either we abolish the concept of time and it&#x27;s always &quot;whatever number my spiritual essence dictates in this moment via gazing at feeble mechanical devices that I enjoy the aesthetic of&quot; or we swing the other way and all humans record all time in UT1 and we treat the shifting light beyond our windows as a mere inconvenience. We&#x27;ve done the latter with computers because they demand such rigor, implying we&#x27;ll never do the former and abolish time (it&#x27;s too useful!), and humans won&#x27;t all abandon being bound to the sun and its vibes, so here we are in a world where we try to please the fickle and unreliable humans, ourselves, with the cold machinery of our computers (may their flickering lights forever bless us, amen).<p>Thus, there is only &quot;what&#x27;s an easy way to represent time that humans won&#x27;t hate too much?&quot; For most everything, that&#x27;s &quot;store it in UTC&#x2F;UT1 and then convert to nearest approximation of what the user wants based factors like &#x27;where are they now?&#x27;&quot;. Every other approach has pretty big downsides or potential failure modes. For example, if we use the system you just mentioned with a &quot;just time&quot; is &quot;to do anything with it you also have to store enough info to turn it into the other representations&quot;. Thus, questions like &quot;how far away is new years eve for my friend across the world?&quot; will be confidently incorrect unless you account for the sun being up here and the sun being down there (typically via the timezone concept). Storing in UT1 at least means you can give the user <i>a</i> time that obeys axioms even if the user has to do a little legwork to adapt their brain to it, which most folks who _depend_ on timekeeping are willing to do to make sure things don&#x27;t go awry.</div><br/><div id="42397135" class="c"><input type="checkbox" id="c-42397135" checked=""/><div class="controls bullet"><span class="by">sandblast</span><span>|</span><a href="#42393812">root</a><span>|</span><a href="#42395151">parent</a><span>|</span><a href="#42393934">next</a><span>|</span><label class="collapse" for="c-42397135">[-]</label><label class="expand" for="c-42397135">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t see how the problems you mentioned couldn&#x27;t be solved with storing clock time together with a location (or reading that time together with determining &#x2F; asking for a location), as was suggested here. Could you share your perspective on that solution?</div><br/></div></div></div></div></div></div><div id="42393934" class="c"><input type="checkbox" id="c-42393934" checked=""/><div class="controls bullet"><span class="by">eieio</span><span>|</span><a href="#42393812">prev</a><span>|</span><a href="#42393912">next</a><span>|</span><label class="collapse" for="c-42393934">[-]</label><label class="expand" for="c-42393934">[4 more]</label></div><br/><div class="children"><div class="content">One point from this article that I think is great is: the TZ database maps pretty poorly onto how people think about timezones.<p>In the states, I think most people I know are familiar with &quot;eastern time&quot; or &quot;pacific time.&quot; But I doubt that many of my friends recognize &quot;Americas&#x2F;New_York&quot; or appreciate why they need to select that instead of &quot;Americas&#x2F;Indianapolis&quot; when referencing eastern time[1]. I certainly wasn&#x27;t familiar with referencing timezones this way until I had a job that cared a whole lot about timezones and had offices in several countries!<p>I like the idea of solving this by just asking for the location of an event.<p>[1] having lived in indiana a while ago, I&#x27;m assuming that Indianapolis gets its own TZ entry because it wasn&#x27;t on daylight savings back in the 90s (?). Which was pretty annoying.</div><br/><div id="42394945" class="c"><input type="checkbox" id="c-42394945" checked=""/><div class="controls bullet"><span class="by">Terr_</span><span>|</span><a href="#42393934">parent</a><span>|</span><a href="#42394123">next</a><span>|</span><label class="collapse" for="c-42394945">[-]</label><label class="expand" for="c-42394945">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I like the idea of solving this by just asking for the location of an event.<p>One issue with this phrasing is that a user might react--quite reasonably--with frustration like: &quot;Gawd, stop asking me you stupid computer, it doesn&#x27;t matter, I already told you it&#x27;s an online-only teleconference, it&#x27;s not really anywhere!&quot;<p>I&#x27;m not sure about the best way to phrase it, but ideally we want the user to be answering: &quot;<i>Which clocks</i> determine when the meeting starts?&quot;</div><br/></div></div><div id="42394123" class="c"><input type="checkbox" id="c-42394123" checked=""/><div class="controls bullet"><span class="by">deathanatos</span><span>|</span><a href="#42393934">parent</a><span>|</span><a href="#42394945">prev</a><span>|</span><a href="#42393912">next</a><span>|</span><label class="collapse" for="c-42394123">[-]</label><label class="expand" for="c-42394123">[2 more]</label></div><br/><div class="children"><div class="content">The colloquial names people use, in particular &quot;central time&quot;, aren&#x27;t globally unique. I.e., if someone says &quot;central time&quot;, to map that to &quot;America&#x2F;Chicago&quot; usually involves a set of assumptions about being in America in the first place.<p>So, yeah, you either use location, present major nearby cities, etc. to get around the fact that the ordinary person has no idea what the identifier of their timezone is.</div><br/><div id="42394825" class="c"><input type="checkbox" id="c-42394825" checked=""/><div class="controls bullet"><span class="by">eieio</span><span>|</span><a href="#42393934">root</a><span>|</span><a href="#42394123">parent</a><span>|</span><a href="#42393912">next</a><span>|</span><label class="collapse" for="c-42394825">[-]</label><label class="expand" for="c-42394825">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, I think that gets at the fact that it&#x27;s typically &quot;obvious&quot; what you mean in context - which is part of why I think the TZ database names can feel so off. Why in the world do you need that much precision?!<p>(We of course, both know why! And if you haven&#x27;t seen the names before but you&#x27;re a programmer, youprobably still make some assumptions about edge cases, precision, etc. But I&#x27;m assuming that is not the experience of the typical Google Calendar user?)</div><br/></div></div></div></div></div></div><div id="42393912" class="c"><input type="checkbox" id="c-42393912" checked=""/><div class="controls bullet"><span class="by">gioazzi</span><span>|</span><a href="#42393934">prev</a><span>|</span><a href="#42394607">next</a><span>|</span><label class="collapse" for="c-42393912">[-]</label><label class="expand" for="c-42393912">[4 more]</label></div><br/><div class="children"><div class="content">There&#x27;s an interesting twist to this problem when one is playing with DST! Consider for instance a recurring event that happens every day at 02:30, let&#x27;s say in Switzerland.<p>On the day DST starts, that event cannot exist, at 01:59 clocks will jump forward to 03:00. Vice versa, on the day DST ends, any time between 02:00 and 02:59 will happen twice.</div><br/><div id="42397075" class="c"><input type="checkbox" id="c-42397075" checked=""/><div class="controls bullet"><span class="by">Kwpolska</span><span>|</span><a href="#42393912">parent</a><span>|</span><a href="#42394607">next</a><span>|</span><label class="collapse" for="c-42397075">[-]</label><label class="expand" for="c-42397075">[3 more]</label></div><br/><div class="children"><div class="content">How many real humans would have a recurring event at 02:30 on Sunday?</div><br/><div id="42397400" class="c"><input type="checkbox" id="c-42397400" checked=""/><div class="controls bullet"><span class="by">voidUpdate</span><span>|</span><a href="#42393912">root</a><span>|</span><a href="#42397075">parent</a><span>|</span><a href="#42394607">next</a><span>|</span><label class="collapse" for="c-42397400">[-]</label><label class="expand" for="c-42397400">[2 more]</label></div><br/><div class="children"><div class="content">Some people work night shifts</div><br/><div id="42397485" class="c"><input type="checkbox" id="c-42397485" checked=""/><div class="controls bullet"><span class="by">mimischi</span><span>|</span><a href="#42393912">root</a><span>|</span><a href="#42397400">parent</a><span>|</span><a href="#42394607">next</a><span>|</span><label class="collapse" for="c-42397485">[-]</label><label class="expand" for="c-42397485">[1 more]</label></div><br/><div class="children"><div class="content">And the people that do work night shifts, have their shifts either shortened or extended by an hour as well (at least in Germany, from what I’m aware)</div><br/></div></div></div></div></div></div></div></div><div id="42394607" class="c"><input type="checkbox" id="c-42394607" checked=""/><div class="controls bullet"><span class="by">bloppe</span><span>|</span><a href="#42393912">prev</a><span>|</span><a href="#42393086">next</a><span>|</span><label class="collapse" for="c-42394607">[-]</label><label class="expand" for="c-42394607">[1 more]</label></div><br/><div class="children"><div class="content"><i>&gt; There’s a variant of this advice which you’re more likely to hear from the PostgreSQL faithful: use TIMESTAMP WITH TIME ZONE or its convenient alias timestamptz. This stores the exact value in UTC and sounds like it might store the timezone too... but it doesn’t! All that’s stored is that UTC value, converted from whatever timezone was active or specified when the value was inserted.</i><p>This behavior was changed in a more recent edition of the SQL standard. Now, we have `TIMESTAMP WITH LOCAL TIME ZONE` which works the way `TIMESTAMP WITH TIME ZONE` used to work: basically just converting everything to&#x2F;form UTC when it&#x27;s stored&#x2F;retrieved. The semantics for `TIMESTAMP WITH TIME ZONE` are now supposed to work more like the author&#x27;s suggested approach: just gluing a time zone name to a regular old timestamp.<p>I&#x27;m not sure when Postgres will adopt the newer type semantics. Oracle has for a while now: <a href="https:&#x2F;&#x2F;docs.oracle.com&#x2F;en&#x2F;database&#x2F;oracle&#x2F;oracle-database&#x2F;19&#x2F;nlspg&#x2F;datetime-data-types-and-time-zone-support.html" rel="nofollow">https:&#x2F;&#x2F;docs.oracle.com&#x2F;en&#x2F;database&#x2F;oracle&#x2F;oracle-database&#x2F;1...</a></div><br/></div></div><div id="42393086" class="c"><input type="checkbox" id="c-42393086" checked=""/><div class="controls bullet"><span class="by">Etheryte</span><span>|</span><a href="#42394607">prev</a><span>|</span><a href="#42393180">next</a><span>|</span><label class="collapse" for="c-42393086">[-]</label><label class="expand" for="c-42393086">[1 more]</label></div><br/><div class="children"><div class="content">A common pitfall I see developers stumble on is underestimating how often timezones, DST rules, etc change. In most of our daily lives this is something that happens very rarely, right? However, if you go look at the change logs for DST rules, timezones, etc, you&#x27;ll see that as a ballpark figure there&#x27;s at least one change a year, and on many years more. Once a year is way too often to not account for this data changing and the recommendations given in this article are solid.</div><br/></div></div><div id="42393180" class="c"><input type="checkbox" id="c-42393180" checked=""/><div class="controls bullet"><span class="by">amalcon</span><span>|</span><a href="#42393086">prev</a><span>|</span><a href="#42393175">next</a><span>|</span><label class="collapse" for="c-42393180">[-]</label><label class="expand" for="c-42393180">[3 more]</label></div><br/><div class="children"><div class="content">I once was hours late for a doctor appointment, because I entered it into my calendar app while on vacation.  That taught this particular lesson pretty effectively.</div><br/><div id="42393322" class="c"><input type="checkbox" id="c-42393322" checked=""/><div class="controls bullet"><span class="by">happytoexplain</span><span>|</span><a href="#42393180">parent</a><span>|</span><a href="#42393907">next</a><span>|</span><label class="collapse" for="c-42393322">[-]</label><label class="expand" for="c-42393322">[1 more]</label></div><br/><div class="children"><div class="content">The choice to mash absolute time and clock time into the same formats and APIs is one of the greatest mistakes in the history of programming, somewhere under null pointers.</div><br/></div></div><div id="42393907" class="c"><input type="checkbox" id="c-42393907" checked=""/><div class="controls bullet"><span class="by">somehnguy</span><span>|</span><a href="#42393180">parent</a><span>|</span><a href="#42393322">prev</a><span>|</span><a href="#42393175">next</a><span>|</span><label class="collapse" for="c-42393907">[-]</label><label class="expand" for="c-42393907">[1 more]</label></div><br/><div class="children"><div class="content">I recently had a similar experience on vacation. I entered all of the shows and events I was attending in Vegas into my iOS calendar while home in NY. Upon arriving all my events were 3 hours off, and I had to manually correct each one.<p>A cursory look through Calendar didn’t turn up any way to enter time zone independent events.</div><br/></div></div></div></div><div id="42393175" class="c"><input type="checkbox" id="c-42393175" checked=""/><div class="controls bullet"><span class="by">Veserv</span><span>|</span><a href="#42393180">prev</a><span>|</span><a href="#42393100">next</a><span>|</span><label class="collapse" for="c-42393175">[-]</label><label class="expand" for="c-42393175">[3 more]</label></div><br/><div class="children"><div class="content">It is important to note that this is only relevant for future events where legal&#x2F;civil time, a means for squishy humans to coordinate actions in the future, is what matters.<p>For instances like “bake my bread for one hour” you care about elapsed time&#x2F;duration which is not subject to the whims of civil time as you are coordinating with the laws of physics, or gods of cooking fickle as they may be, so a absolute second offset such as TAI should be used.<p>And for the past, the unambiguous correct answer is TAI or other absolute second offset. Period.<p>This is because the exact time of occurrence of a past event is, ignoring relativity, fixed and corresponds to a specific second&#x2F;time. This is completely unambiguous and can be converted, entirely losslessly and roundtripped, to whatever the corresponding civil time would have been in any timekeeping system you so desire. But again, this applies to the past only. The mapping between seconds to civil time and vice versa is subject to the whims of your government until then.</div><br/><div id="42393221" class="c"><input type="checkbox" id="c-42393221" checked=""/><div class="controls bullet"><span class="by">happytoexplain</span><span>|</span><a href="#42393175">parent</a><span>|</span><a href="#42393100">next</a><span>|</span><label class="collapse" for="c-42393221">[-]</label><label class="expand" for="c-42393221">[2 more]</label></div><br/><div class="children"><div class="content">The relationship between absolute points in time and calendar&#x2F;clock&#x2F;tz components can be legally changed retroactively.<p>Just like with any other kind of data, store whatever you are semantically representing. If you are representing an absolute point in time (bread timer), store a Unix timestamp. If you are representing time <i>components</i>, AKA relative time, AKA human time, AKA calendar&#x2F;clock&#x2F;tz time, then store those <i>components</i>.<p>Also, most past clock times we care to store start out as future times.</div><br/><div id="42393312" class="c"><input type="checkbox" id="c-42393312" checked=""/><div class="controls bullet"><span class="by">Veserv</span><span>|</span><a href="#42393175">root</a><span>|</span><a href="#42393221">parent</a><span>|</span><a href="#42393100">next</a><span>|</span><label class="collapse" for="c-42393312">[-]</label><label class="expand" for="c-42393312">[1 more]</label></div><br/><div class="children"><div class="content">The relationship between the occurrence of a past event and the second it occurred can not be changed, barring relativity. As such, storing the absolute second offset unambiguously persists the actual time the event occurred regardless of any legal changes.<p>It will just convert to a different, now agreed upon, civil time according to the calendar chosen. It is no different from citing the current second according to the Gregorian calendar versus the Mayan calendar. They both refer to the same “time”, but use different civil dates. The underlying thing that is convertible to different calendar formats is the real thing and corresponds to the absolute time of the past event.<p>edit: And no, it is almost guaranteed that most past time events are timestamps of the “current” time which has the same qualities as “past” time. Only future civil times should not use absolute second offset times.</div><br/></div></div></div></div></div></div><div id="42393100" class="c"><input type="checkbox" id="c-42393100" checked=""/><div class="controls bullet"><span class="by">RayeEvtuch</span><span>|</span><a href="#42393175">prev</a><span>|</span><a href="#42393401">next</a><span>|</span><label class="collapse" for="c-42393100">[-]</label><label class="expand" for="c-42393100">[1 more]</label></div><br/><div class="children"><div class="content">I think this is a really good approach to handling events that someone might invite someone else to in real life. No one really ever talks about time zone or daylight savings time when you&#x27;re texting your friend about a party that&#x27;s happening. It&#x27;s always obvious from context.<p>I&#x27;ve been working on an end-to-end encrypted event invitation service and I chose to ignore timezones completely and just have a date picker and free-form text field for time. If users want to export the event as an ical file I just set it as an all-day event and put the time in the body of the event. It&#x27;s not perfect, but it&#x27;s usable enough for most people.<p>The one exception here is importing to Google Calendar which for some awful reason imports all day events with no time zone as 24 hour long events from 12am to 12am UTC the following day.<p>(I have a silly beta version of the app up at <a href="https:&#x2F;&#x2F;pinvite.app" rel="nofollow">https:&#x2F;&#x2F;pinvite.app</a> if anyone cares to try it out)</div><br/></div></div><div id="42393401" class="c"><input type="checkbox" id="c-42393401" checked=""/><div class="controls bullet"><span class="by">efitz</span><span>|</span><a href="#42393100">prev</a><span>|</span><a href="#42395527">next</a><span>|</span><label class="collapse" for="c-42393401">[-]</label><label class="expand" for="c-42393401">[10 more]</label></div><br/><div class="children"><div class="content">I’ve thought about the proposed solution before (spoiler: the author proposes to store the user’s intended date&#x2F;time AND the TZ qualified date&#x2F;time.)<p>The problem is that, except for UTC, any timestamp relating to a user’s intention must ALSO store a geolocation.  Dinner at 6pm?  Great!  Where (on earth)?<p>And I’m not sure what to make of storing a TZ qualified timestamp AND a non-TZ qualified timestamp.  I’m not sure what problem that solves or how to reconcile if they differ.<p>I’m still in the “store as UTC” and be very careful about disambiguating at creation time.</div><br/><div id="42393819" class="c"><input type="checkbox" id="c-42393819" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#42393401">parent</a><span>|</span><a href="#42393941">next</a><span>|</span><label class="collapse" for="c-42393819">[-]</label><label class="expand" for="c-42393819">[1 more]</label></div><br/><div class="children"><div class="content">My recommendation is actually to store the local time and the exact location, if you can get it. Then use that location to determine the correct timezone.<p>Some users may not know that their Timezone is America&#x2F;Los_Angeles but they should hopefully know where their venue is.<p>You always treat the local time - 6pm on 5th December in Boise, Idaho - as the core truth and derive the UTC version from that. Then if Idaho decide to cancel daylight savings time you can update your calculated and stored UTC timestamps to the correct values.</div><br/></div></div><div id="42393941" class="c"><input type="checkbox" id="c-42393941" checked=""/><div class="controls bullet"><span class="by">layer8</span><span>|</span><a href="#42393401">parent</a><span>|</span><a href="#42393819">prev</a><span>|</span><a href="#42393562">next</a><span>|</span><label class="collapse" for="c-42393941">[-]</label><label class="expand" for="c-42393941">[1 more]</label></div><br/><div class="children"><div class="content">The location is implied by the time zone. The proposal is to store the user’s calendar date, wall-clock time, and time zone. (Technically, you also need a DST marker for the ambiguous hour in the fall when the clock is turned back and repeats 2–3 am.) From that you can derive a UTC timestamp.</div><br/></div></div><div id="42393562" class="c"><input type="checkbox" id="c-42393562" checked=""/><div class="controls bullet"><span class="by">9dev</span><span>|</span><a href="#42393401">parent</a><span>|</span><a href="#42393941">prev</a><span>|</span><a href="#42393809">next</a><span>|</span><label class="collapse" for="c-42393562">[-]</label><label class="expand" for="c-42393562">[6 more]</label></div><br/><div class="children"><div class="content">So I’ve been wondering this for a while. Why don’t we actually use a „spacetime“ format, like 2024-12-05T23:03:47+48.86,2.34 instead of bothering with time zones at all? Why not use arbitrary precision coordinates in their place? That would solve a bunch of issues with time zones at once, like not needing to know which time offset existed at the point in time in question. Depending on the use case, we could make the coordinates more precise, but regularly, I’d wager one or two digits would suffice for current timestamp usage.</div><br/><div id="42393691" class="c"><input type="checkbox" id="c-42393691" checked=""/><div class="controls bullet"><span class="by">iforgotpassword</span><span>|</span><a href="#42393401">root</a><span>|</span><a href="#42393562">parent</a><span>|</span><a href="#42393813">next</a><span>|</span><label class="collapse" for="c-42393691">[-]</label><label class="expand" for="c-42393691">[2 more]</label></div><br/><div class="children"><div class="content">But then you&#x27;d still need to figure out in what timezone those coordinates are to know when it is&#x2F;was, so you made the problem even more complex. Unless you&#x27;re suggesting we get rid of timezones in general, in which case it would be the same time everywhere and we don&#x27;t need anything for disambiguation, i.e. we can get rid of the coordinates.<p>Inb4 that other blog post that explains why getting rid of timezones is troublesome in everyday life.</div><br/><div id="42393850" class="c"><input type="checkbox" id="c-42393850" checked=""/><div class="controls bullet"><span class="by">wongarsu</span><span>|</span><a href="#42393401">root</a><span>|</span><a href="#42393691">parent</a><span>|</span><a href="#42393813">next</a><span>|</span><label class="collapse" for="c-42393850">[-]</label><label class="expand" for="c-42393850">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s more complex, but usually it better matches user intent. If I say the conference starts on 2027-04-05 13:09 in Berlin, and Germany decides to change their time zones or daylight saving time rules sometime in 2025, your stored offset or stored UTC time is now wrong. The conference will start whenever local clocks show 13:09, and you have no reliable way of knowing which time zone local clocks will be in in two years time.<p>Of course if we go down that path we should also add a format to indicate offsets. If I say I&#x27;ll be back in 10 minutes, that interval shouldn&#x27;t change no matter what happens to the time zone. To perfectly disambiguate it you would need to store it as current time (with timezone or UTC) plus the intended offset. This would also &quot;solve&quot; a lot of issues around leap seconds and the inability to predict them more than six months into the future.</div><br/></div></div></div></div><div id="42393813" class="c"><input type="checkbox" id="c-42393813" checked=""/><div class="controls bullet"><span class="by">efitz</span><span>|</span><a href="#42393401">root</a><span>|</span><a href="#42393562">parent</a><span>|</span><a href="#42393691">prev</a><span>|</span><a href="#42393809">next</a><span>|</span><label class="collapse" for="c-42393813">[-]</label><label class="expand" for="c-42393813">[3 more]</label></div><br/><div class="children"><div class="content">The geo lookup would be expensive computationally, and also there are arguments over geographic boundaries that could make TZ lookup ambiguous (the author gave an example in the article)</div><br/><div id="42394181" class="c"><input type="checkbox" id="c-42394181" checked=""/><div class="controls bullet"><span class="by">deathanatos</span><span>|</span><a href="#42393401">root</a><span>|</span><a href="#42393813">parent</a><span>|</span><a href="#42393809">next</a><span>|</span><label class="collapse" for="c-42394181">[-]</label><label class="expand" for="c-42394181">[2 more]</label></div><br/><div class="children"><div class="content">&gt; <i>The geo lookup would be expensive computationally</i><p>Not really? There&#x27;s not that many timezones, globally, and I think their polygon data is in OSM &#x2F; could be obtained from OSM. Simply brute-force colliding a single point with all of them I would expect to be basically &quot;instantaneous&quot;, but there are a number of trivial optimizations, like bounding boxes, that you could do to speed it up.<p>(Point-in-polygon is not terribly expensive; it&#x27;s O(segments) in your polygon.)<p>That said, there <i>are</i> problems with that, as you mention. I just don&#x27;t think &quot;computationally expensive&quot; is one of them.</div><br/><div id="42394757" class="c"><input type="checkbox" id="c-42394757" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#42393401">root</a><span>|</span><a href="#42394181">parent</a><span>|</span><a href="#42393809">next</a><span>|</span><label class="collapse" for="c-42394757">[-]</label><label class="expand" for="c-42394757">[1 more]</label></div><br/><div class="children"><div class="content">Oddly enough I built an API a few years ago that does exactly that, using timezone polygons derived from OpenStreetMap: <a href="https:&#x2F;&#x2F;timezones.datasette.io&#x2F;timezones&#x2F;by_point?longitude=-116.23&amp;latitude=43.61" rel="nofollow">https:&#x2F;&#x2F;timezones.datasette.io&#x2F;timezones&#x2F;by_point?longitude=...</a></div><br/></div></div></div></div></div></div></div></div><div id="42393809" class="c"><input type="checkbox" id="c-42393809" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#42393401">parent</a><span>|</span><a href="#42393562">prev</a><span>|</span><a href="#42395527">next</a><span>|</span><label class="collapse" for="c-42393809">[-]</label><label class="expand" for="c-42393809">[1 more]</label></div><br/><div class="children"><div class="content">My recommendation is actually to store the local time and the exact location, if you can get it. Then use that location to determine the correct timezone.<p>Some users may not know that their Timezone is America&#x2F;Los_Angeles but they should hopefully know where their venue is.</div><br/></div></div></div></div><div id="42395527" class="c"><input type="checkbox" id="c-42395527" checked=""/><div class="controls bullet"><span class="by">PBnFlash</span><span>|</span><a href="#42393401">prev</a><span>|</span><a href="#42393617">next</a><span>|</span><label class="collapse" for="c-42395527">[-]</label><label class="expand" for="c-42395527">[2 more]</label></div><br/><div class="children"><div class="content">I had a little page that would encode Unix time of the event in the url, then just count down.<p>Super reliable.</div><br/><div id="42397122" class="c"><input type="checkbox" id="c-42397122" checked=""/><div class="controls bullet"><span class="by">sandblast</span><span>|</span><a href="#42395527">parent</a><span>|</span><a href="#42393617">next</a><span>|</span><label class="collapse" for="c-42397122">[-]</label><label class="expand" for="c-42397122">[1 more]</label></div><br/><div class="children"><div class="content">Doesn&#x27;t really solve the problem mentioned, does it? I decide to generate a link which counts down to doctor&#x27;s appointment 8 months from now, and in 6 months my country decides to change DST rules. The countdown is now wrong.</div><br/></div></div></div></div><div id="42393617" class="c"><input type="checkbox" id="c-42393617" checked=""/><div class="controls bullet"><span class="by">1propionyl</span><span>|</span><a href="#42395527">prev</a><span>|</span><label class="collapse" for="c-42393617">[-]</label><label class="expand" for="c-42393617">[1 more]</label></div><br/><div class="children"><div class="content">Another good article that discusses the same topic in detail: <a href="https:&#x2F;&#x2F;codeblog.jonskeet.uk&#x2F;2019&#x2F;03&#x2F;27&#x2F;storing-utc-is-not-a-silver-bullet&#x2F;" rel="nofollow">https:&#x2F;&#x2F;codeblog.jonskeet.uk&#x2F;2019&#x2F;03&#x2F;27&#x2F;storing-utc-is-not-a...</a></div><br/></div></div></div></div></div></div></div></body></html>