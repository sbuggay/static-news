<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1697706062620" as="style"/><link rel="stylesheet" href="styles.css?v=1697706062620"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://rocicorp.dev/blog/ready-player-two">Reflect – Multiplayer web app framework with game-style synchronization</a> <span class="domain">(<a href="https://rocicorp.dev">rocicorp.dev</a>)</span></div><div class="subtext"><span>aboodman</span> | <span>109 comments</span></div><br/><div><div id="37934909" class="c"><input type="checkbox" id="c-37934909" checked=""/><div class="controls bullet"><span class="by">linux2647</span><span>|</span><a href="#37940151">next</a><span>|</span><label class="collapse" for="c-37934909">[-]</label><label class="expand" for="c-37934909">[13 more]</label></div><br/><div class="children"><div class="content">The demo at the top of the homepage (<a href="https:&#x2F;&#x2F;reflect.net&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;reflect.net&#x2F;</a>) is a lot of fun.  While I was watching, every time the puzzle got completed, people would shake their cursor in excitement, like saying, &quot;yay we did it!!&quot;</div><br/><div id="37936641" class="c"><input type="checkbox" id="c-37936641" checked=""/><div class="controls bullet"><span class="by">white_dragon88</span><span>|</span><a href="#37934909">parent</a><span>|</span><a href="#37938640">next</a><span>|</span><label class="collapse" for="c-37936641">[-]</label><label class="expand" for="c-37936641">[2 more]</label></div><br/><div class="children"><div class="content">The first thing I did was start making the word &#x27;FUCK&#x27; with the pieces. As soon as others cottoned on and joined in, it was a very heart warming experience.</div><br/></div></div><div id="37938640" class="c"><input type="checkbox" id="c-37938640" checked=""/><div class="controls bullet"><span class="by">zebracanevra</span><span>|</span><a href="#37934909">parent</a><span>|</span><a href="#37936641">prev</a><span>|</span><a href="#37938226">next</a><span>|</span><label class="collapse" for="c-37938640">[-]</label><label class="expand" for="c-37938640">[2 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t think this demo is a good demonstration of the features this library can offer. Once you grab a piece, you seem to lock it for only you to use? This means there are no conflicts to resolve, the only conflict is when two people pick a piece at the same time, from which the only resolution is to give it to the user that picked the piece first.<p>I&#x27;d want a demo that shows a much better example of conflicts occuring.</div><br/><div id="37939445" class="c"><input type="checkbox" id="c-37939445" checked=""/><div class="controls bullet"><span class="by">callmekatootie</span><span>|</span><a href="#37934909">root</a><span>|</span><a href="#37938640">parent</a><span>|</span><a href="#37938226">next</a><span>|</span><label class="collapse" for="c-37939445">[-]</label><label class="expand" for="c-37939445">[1 more]</label></div><br/><div class="children"><div class="content">Are you sure about that - when I landed on that page, folks were moving pieces around but didn&#x27;t recognize that they had to fill up the ALIVE text - and I was able to easily grab a piece that another user had grabbed before and place it in the text - which triggered a eureka moment among other players and we finished the puzzle...</div><br/></div></div></div></div><div id="37938226" class="c"><input type="checkbox" id="c-37938226" checked=""/><div class="controls bullet"><span class="by">namelosw</span><span>|</span><a href="#37934909">parent</a><span>|</span><a href="#37938640">prev</a><span>|</span><a href="#37935715">next</a><span>|</span><label class="collapse" for="c-37938226">[-]</label><label class="expand" for="c-37938226">[1 more]</label></div><br/><div class="children"><div class="content">Man, they nailed it with this page!</div><br/></div></div><div id="37935715" class="c"><input type="checkbox" id="c-37935715" checked=""/><div class="controls bullet"><span class="by">automatoney</span><span>|</span><a href="#37934909">parent</a><span>|</span><a href="#37938226">prev</a><span>|</span><a href="#37935281">next</a><span>|</span><label class="collapse" for="c-37935715">[-]</label><label class="expand" for="c-37935715">[4 more]</label></div><br/><div class="children"><div class="content">There&#x27;s a visual bug where you can hide pieces of the &#x27;e&#x27; behind the completed portions of the &#x27;e&#x27; - it doesn&#x27;t work for other letters because they still show the outline.</div><br/><div id="37938128" class="c"><input type="checkbox" id="c-37938128" checked=""/><div class="controls bullet"><span class="by">alexanderking</span><span>|</span><a href="#37934909">root</a><span>|</span><a href="#37935715">parent</a><span>|</span><a href="#37935786">next</a><span>|</span><label class="collapse" for="c-37938128">[-]</label><label class="expand" for="c-37938128">[1 more]</label></div><br/><div class="children"><div class="content">Enjoy this for the next 10 minutes, because it&#x27;s about to be gone. Thanks for the bug report!</div><br/></div></div><div id="37935786" class="c"><input type="checkbox" id="c-37935786" checked=""/><div class="controls bullet"><span class="by">aboodman</span><span>|</span><a href="#37934909">root</a><span>|</span><a href="#37935715">parent</a><span>|</span><a href="#37938128">prev</a><span>|</span><a href="#37935281">next</a><span>|</span><label class="collapse" for="c-37935786">[-]</label><label class="expand" for="c-37935786">[2 more]</label></div><br/><div class="children"><div class="content">Hm, good point. Thanks!</div><br/><div id="37935826" class="c"><input type="checkbox" id="c-37935826" checked=""/><div class="controls bullet"><span class="by">automatoney</span><span>|</span><a href="#37934909">root</a><span>|</span><a href="#37935786">parent</a><span>|</span><a href="#37935281">next</a><span>|</span><label class="collapse" for="c-37935826">[-]</label><label class="expand" for="c-37935826">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s very fun to troll other players with, especially that middle bar piece is easy to hide. I&#x27;ve also seen someone play keep-away with the last piece. Just overall very funny how much you can goof off with a simple puzzle!</div><br/></div></div></div></div></div></div><div id="37935281" class="c"><input type="checkbox" id="c-37935281" checked=""/><div class="controls bullet"><span class="by">bbx</span><span>|</span><a href="#37934909">parent</a><span>|</span><a href="#37935715">prev</a><span>|</span><a href="#37937219">next</a><span>|</span><label class="collapse" for="c-37935281">[-]</label><label class="expand" for="c-37935281">[1 more]</label></div><br/><div class="children"><div class="content">Very fun experience indeed. Here&#x27;s a video of what you&#x27;re describing: <a href="https:&#x2F;&#x2F;streamable.com&#x2F;asu261" rel="nofollow noreferrer">https:&#x2F;&#x2F;streamable.com&#x2F;asu261</a></div><br/></div></div><div id="37937219" class="c"><input type="checkbox" id="c-37937219" checked=""/><div class="controls bullet"><span class="by">jgavris</span><span>|</span><a href="#37934909">parent</a><span>|</span><a href="#37935281">prev</a><span>|</span><a href="#37935088">next</a><span>|</span><label class="collapse" for="c-37937219">[-]</label><label class="expand" for="c-37937219">[1 more]</label></div><br/><div class="children"><div class="content">Definitely a fun demo!</div><br/></div></div><div id="37935088" class="c"><input type="checkbox" id="c-37935088" checked=""/><div class="controls bullet"><span class="by">qup</span><span>|</span><a href="#37934909">parent</a><span>|</span><a href="#37937219">prev</a><span>|</span><a href="#37940151">next</a><span>|</span><label class="collapse" for="c-37935088">[-]</label><label class="expand" for="c-37935088">[1 more]</label></div><br/><div class="children"><div class="content">Granollers!!!</div><br/></div></div></div></div><div id="37940151" class="c"><input type="checkbox" id="c-37940151" checked=""/><div class="controls bullet"><span class="by">wim</span><span>|</span><a href="#37934909">prev</a><span>|</span><a href="#37932675">next</a><span>|</span><label class="collapse" for="c-37940151">[-]</label><label class="expand" for="c-37940151">[1 more]</label></div><br/><div class="children"><div class="content">Very elegant solution, and neat demo page!<p>I&#x27;m curious what trade-offs you looked at regarding sending state vs mutations from the server back to clients. As the server is authoritative, I imagine it could also send mutations to the clients in the order in which the server has determined parallel operations need to be resolved (and adjust mutations as needed to resolve conflicts or permissions issues). Clients would then need to rebase any pending local mutations, so that would involve more logic vs the data sent for mutations most likely being smaller than the &quot;full&quot; state of certain objects being updated?</div><br/></div></div><div id="37932675" class="c"><input type="checkbox" id="c-37932675" checked=""/><div class="controls bullet"><span class="by">tablatom</span><span>|</span><a href="#37940151">prev</a><span>|</span><a href="#37935160">next</a><span>|</span><label class="collapse" for="c-37932675">[-]</label><label class="expand" for="c-37932675">[3 more]</label></div><br/><div class="children"><div class="content">People might remember this showing up once or twice before as Replicache. Reflect adds a fully managed, incredibly fast sync server.<p>The local-first&#x2F;realtime space is getting busy these days. Replicache&#x2F;Reflect is well worth checking out for the beautifully simple data model &#x2F; coding model. I&#x27;m very happy with it.<p>One plus point compared to CRDTs is that you get to decide how you want to deal with conflicts yourself, with simple, sequential code. I&#x27;m not up to date with the latest in CRDT-land but I believe it can be complicated to add application specific conflict resolution if the built-in rules don&#x27;t fit your needs.</div><br/><div id="37933020" class="c"><input type="checkbox" id="c-37933020" checked=""/><div class="controls bullet"><span class="by">ochiba</span><span>|</span><a href="#37932675">parent</a><span>|</span><a href="#37932782">next</a><span>|</span><label class="collapse" for="c-37933020">[-]</label><label class="expand" for="c-37933020">[1 more]</label></div><br/><div class="children"><div class="content">&gt; One plus point compared to CRDTs is that you get to decide how you want to deal with conflicts yourself, with simple, sequential code. I&#x27;m not up to date with the latest in CRDT-land but I believe it can be complicated to add application specific conflict resolution if the built-in rules don&#x27;t fit your needs.<p>I agree wholeheartedly — we took the same approach for PowerSync with a server reconciliation architecture [1] over CRDTs, which is also mentioned elsewhere in the comments here. For applications that have a central server, I think the simplicity of this kind of architecture is very appealing.<p>Props to Aaron for bringing awareness to and evangelizing server reconciliation.<p>[1] <a href="https:&#x2F;&#x2F;www.gabrielgambetta.com&#x2F;client-side-prediction-server-reconciliation.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.gabrielgambetta.com&#x2F;client-side-prediction-serve...</a></div><br/></div></div><div id="37932782" class="c"><input type="checkbox" id="c-37932782" checked=""/><div class="controls bullet"><span class="by">dang</span><span>|</span><a href="#37932675">parent</a><span>|</span><a href="#37933020">prev</a><span>|</span><a href="#37935160">next</a><span>|</span><label class="collapse" for="c-37932782">[-]</label><label class="expand" for="c-37932782">[1 more]</label></div><br/><div class="children"><div class="content">Ah thanks - related past threads:<p><i>A JavaScript framework to build offline-first but collaborative webapp</i> - <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=33269440">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=33269440</a> - Oct 2022 (2 comments)<p><i>Linear clone, with realtime sync and instant UI - built with Replicache</i> - <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=31331660">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=31331660</a> - May 2022 (3 comments)<p><i>Replicache: Easy Offline-First for Existing Applications</i> - <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=22173500">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=22173500</a> - Jan 2020 (22 comments)</div><br/></div></div></div></div><div id="37935160" class="c"><input type="checkbox" id="c-37935160" checked=""/><div class="controls bullet"><span class="by">moralestapia</span><span>|</span><a href="#37932675">prev</a><span>|</span><a href="#37940016">next</a><span>|</span><label class="collapse" for="c-37935160">[-]</label><label class="expand" for="c-37935160">[19 more]</label></div><br/><div class="children"><div class="content">I worked <i>extensively</i> on this (also implemented it on JS) about 15 years ago, to escape boredom while on my grandma&#x27;s place. I wish I had open sourced something, but back then I was a young boy with no ulterior motivations :^).<p>Anyway, I want to comment on this:<p>&gt;For example, any kind of arithmetic just works:<p>Of course, it is extremely trivial to set those up as idempotent operations.<p>&gt;List operations just work:<p>Nope ... or at least, I&#x27;d have to take a closer look at your implementation, consider:<p>Some sort of array&#x2F;list that looks like: [1, 2, 3, 4, 5]<p>* User A deletes the range from 2-4.<p>* User B deletes the range from 3-5.<p>* User C inserts (uh-oh) something between 3 and 4.<p>All updates reach the server at the same time. What is the solution to that? Timestamps? Fallback to LLW? This breaks the transactional model.<p>Pick any of those updates as &quot;the winner&quot;, what do the other users see? How do you <i>communicate</i> this to them?<p>If your answer is like &quot;we just send them the whole array again&quot;, this breaks the transactional model (x2).</div><br/><div id="37936030" class="c"><input type="checkbox" id="c-37936030" checked=""/><div class="controls bullet"><span class="by">aboodman</span><span>|</span><a href="#37935160">parent</a><span>|</span><a href="#37939574">next</a><span>|</span><label class="collapse" for="c-37936030">[-]</label><label class="expand" for="c-37936030">[4 more]</label></div><br/><div class="children"><div class="content">Hi! Thanks for the thoughtful question.<p>&gt;List operations just work:<p>Fair point. Will change. What I really meant here was &quot;(Many) list operations just work&quot; (just like above I said &quot;all kinds of things just work&quot;.<p>&gt; All updates reach the server at the same time. What is the solution to that? Timestamps? Fallback to LLW?<p>There are a number of issues you might be pointing out, and I&#x27;m not sure which one you mean.<p>In general, you can&#x27;t use list indexes as identifiers for edit&#x2F;delete in Reflect because they aren&#x27;t stable. That&#x27;s why in this example I commented to use the item itself (if atomic) or more likely a stable ID: <a href="https:&#x2F;&#x2F;i.imgur.com&#x2F;IKzmf0q.png" rel="nofollow noreferrer">https:&#x2F;&#x2F;i.imgur.com&#x2F;IKzmf0q.png</a><p>There is also the potential issue of User C&#x27;s inserts getting deleted. This seems like a problem at first, but in a realtime collaborative context, nothing can fix this. User C&#x27;s insert can land just before User A or B&#x27;s delete. In this case, sync would be correct to delete user C&#x27;s insert, no matter the protocol. But User C might still be sad. From her perspective, she just wrote something and it got deleted. This is the nature of two humans working in the same place at the same time and potentially having different intentions. For these problems, undo and presence indicators go a long way to avoid these problems through human&#x2F;social mechanisms.</div><br/><div id="37936094" class="c"><input type="checkbox" id="c-37936094" checked=""/><div class="controls bullet"><span class="by">moralestapia</span><span>|</span><a href="#37935160">root</a><span>|</span><a href="#37936030">parent</a><span>|</span><a href="#37939574">next</a><span>|</span><label class="collapse" for="c-37936094">[-]</label><label class="expand" for="c-37936094">[3 more]</label></div><br/><div class="children"><div class="content">&gt;nothing can fix this<p>Exactly.<p>&gt;For these problems, undo and presence indicators go a long way to avoid these problems through human&#x2F;social mechanisms.<p>x1,000 to this. This guy <i>builds</i>. That&#x27;s exactly my takeaway as well from years working on this; provide a solid (by that I mean clearly defined) deterministic algo, and solve the rest w&#x2F; UX.</div><br/><div id="37939543" class="c"><input type="checkbox" id="c-37939543" checked=""/><div class="controls bullet"><span class="by">meheleventyone</span><span>|</span><a href="#37935160">root</a><span>|</span><a href="#37936094">parent</a><span>|</span><a href="#37939634">next</a><span>|</span><label class="collapse" for="c-37939543">[-]</label><label class="expand" for="c-37939543">[1 more]</label></div><br/><div class="children"><div class="content">If you actually look at how people use most multiplayer editing tools they tend to avoid conflicts anyway. It’s extremely painful to have two people editing the same sentence in Google Docs let alone more than that even if it sort of works. Collaboration tends to be negotiated so you end up with I-go-you-go, reviews and other patterns forming around the use of the tools. People can also see and resolve conflicts in real-time.<p>That said this sort of reconciliation can be extremely painful if people are working separately offline for any length of time as arbitrarily resolving many conflicts doesn’t necessarily result in coherent results. But as I understand it that’s also an issue for other ways of solving the issue as well.<p>Another missing piece is signalling failure. For example two people trying to fill the last slot of a limited resource. Having to infer from the state that comes back whether your operation succeeded or not is not a fun way to write multiplayer code.</div><br/></div></div><div id="37939634" class="c"><input type="checkbox" id="c-37939634" checked=""/><div class="controls bullet"><span class="by">tablatom</span><span>|</span><a href="#37935160">root</a><span>|</span><a href="#37936094">parent</a><span>|</span><a href="#37939543">prev</a><span>|</span><a href="#37939574">next</a><span>|</span><label class="collapse" for="c-37939634">[-]</label><label class="expand" for="c-37939634">[1 more]</label></div><br/><div class="children"><div class="content">This points towards a big challenge that I think gets overlooked way too often. A lot of these sync libraries&#x2F;frameworks claim to solve for both real-time interaction, and local-first, sync when you reconnect. But the UX needs are wildly different.<p>For the former you want (as mentioned) good presence info and undo. For the latter you (sometimes) want explicitly flagged conflicts and manual resolution, like we have in git etc.<p>With the Replicache&#x2F;Reflect model, you could actually handle both approaches. Might not be easy but the model can support it.</div><br/></div></div></div></div></div></div><div id="37939574" class="c"><input type="checkbox" id="c-37939574" checked=""/><div class="controls bullet"><span class="by">pmontra</span><span>|</span><a href="#37935160">parent</a><span>|</span><a href="#37936030">prev</a><span>|</span><a href="#37935719">next</a><span>|</span><label class="collapse" for="c-37939574">[-]</label><label class="expand" for="c-37939574">[1 more]</label></div><br/><div class="children"><div class="content">In a collaborative application the server could resolve the three operations in any order. The three users observe the result, realize that they are operating on the same data at the same moment and messed with the state. Then they fix it. Think about editing a document.<p>If they can&#x27;t see each other working on the data together they could be surprised but they could eventually fix the data to the desired state.<p>If they don&#x27;t check the result or can&#x27;t check the result, the state won&#x27;t be OK. However it&#x27;s not what probably happens in interactive apps like collaborative editing or games.</div><br/></div></div><div id="37935719" class="c"><input type="checkbox" id="c-37935719" checked=""/><div class="controls bullet"><span class="by">philsnow</span><span>|</span><a href="#37935160">parent</a><span>|</span><a href="#37939574">prev</a><span>|</span><a href="#37935261">next</a><span>|</span><label class="collapse" for="c-37935719">[-]</label><label class="expand" for="c-37935719">[5 more]</label></div><br/><div class="children"><div class="content">You don’t even need to involve deletes; if all of these happen “simultaneously”:<p><pre><code>  - client A appends “a” to list L
  - client B appends “b” to list L
  - client C appends “c” to list L
</code></pre>
the server will arbitrarily apply the appends in some order, and then send the result back to the clients.  But, each of the clients has applied its append locally and is showing those results until it gets different information from the server, so the next time step might be<p><pre><code>  - client A thinks L is [“a”]
  - client B thinks L is [“b”]
  - client C thinks L is [“c”]
  - server sends state event to clients saying that L is [“c”,”b”,”a”]

</code></pre>
Then when the clients receive the state from the server, I guess they all discard their pending mutations and use the state from the server as their state of the world.  But what if each of the three appends results in that client winning the game if their mutation gets applied first?  Do all the clients display “you win” for 300ms while waiting for the server’s update?</div><br/><div id="37936157" class="c"><input type="checkbox" id="c-37936157" checked=""/><div class="controls bullet"><span class="by">aboodman</span><span>|</span><a href="#37935160">root</a><span>|</span><a href="#37935719">parent</a><span>|</span><a href="#37935739">next</a><span>|</span><label class="collapse" for="c-37936157">[-]</label><label class="expand" for="c-37936157">[1 more]</label></div><br/><div class="children"><div class="content">We have the &quot;game-winning&quot; scenario on the reflect.net homepage right now: <a href="https:&#x2F;&#x2F;reflect.net&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;reflect.net&#x2F;</a>. It&#x27;s a puzzle and when the last piece is placed, it shows a celebration and the puzzle resets moments later. But we only want that logic to run once. We can&#x27;t do this client-side because there are many people and we&#x27;d end up having to choose a leader or something. This is the same exact situation as wanting to show in the UI who won (who placed the last piece) and only wanting to do that once.<p>Reflect has first-class support for this kind of situation by allowing mutators to run special code server-side. I talk about this a bit here:<p><a href="https:&#x2F;&#x2F;rocicorp.dev&#x2F;blog&#x2F;ready-player-two#server-authority" rel="nofollow noreferrer">https:&#x2F;&#x2F;rocicorp.dev&#x2F;blog&#x2F;ready-player-two#server-authority</a><p>You can use the same mechanism to have a branch in the code that places the piece that only runs server-side and chooses the winner.</div><br/></div></div><div id="37935739" class="c"><input type="checkbox" id="c-37935739" checked=""/><div class="controls bullet"><span class="by">moralestapia</span><span>|</span><a href="#37935160">root</a><span>|</span><a href="#37935719">parent</a><span>|</span><a href="#37936157">prev</a><span>|</span><a href="#37935261">next</a><span>|</span><label class="collapse" for="c-37935739">[-]</label><label class="expand" for="c-37935739">[3 more]</label></div><br/><div class="children"><div class="content">You modified the operations, I specifically chose a scenario where User C (in my example) introduces an undecidable situation. Appends are trivial to solve.<p>&gt;If your answer is like &quot;we just send them the whole array again&quot;, this breaks the transactional model (x2).<p>You also did that, whoops.</div><br/><div id="37936356" class="c"><input type="checkbox" id="c-37936356" checked=""/><div class="controls bullet"><span class="by">philsnow</span><span>|</span><a href="#37935160">root</a><span>|</span><a href="#37935739">parent</a><span>|</span><a href="#37937074">prev</a><span>|</span><a href="#37935261">next</a><span>|</span><label class="collapse" for="c-37936356">[-]</label><label class="expand" for="c-37936356">[1 more]</label></div><br/><div class="children"><div class="content">True.  I was thinking of a simpler criticism that, if it held, would also make Reflect less useful.  aboodman replied in the sibling that (of course) they thought of that, so my criticism doesn&#x27;t apply.</div><br/></div></div></div></div></div></div><div id="37935261" class="c"><input type="checkbox" id="c-37935261" checked=""/><div class="controls bullet"><span class="by">gizmo</span><span>|</span><a href="#37935160">parent</a><span>|</span><a href="#37935719">prev</a><span>|</span><a href="#37940016">next</a><span>|</span><label class="collapse" for="c-37935261">[-]</label><label class="expand" for="c-37935261">[8 more]</label></div><br/><div class="children"><div class="content">Most of these systems do deletes with tombstones. Then you can safely insert after&#x2F;inbetween deleted items.</div><br/><div id="37935343" class="c"><input type="checkbox" id="c-37935343" checked=""/><div class="controls bullet"><span class="by">moralestapia</span><span>|</span><a href="#37935160">root</a><span>|</span><a href="#37935261">parent</a><span>|</span><a href="#37940016">next</a><span>|</span><label class="collapse" for="c-37935343">[-]</label><label class="expand" for="c-37935343">[7 more]</label></div><br/><div class="children"><div class="content">Is the solution to that,<p>a) [1, 5]<p>or<p>b) [1, &lt;new element&gt;, 5]<p>?</div><br/><div id="37935551" class="c"><input type="checkbox" id="c-37935551" checked=""/><div class="controls bullet"><span class="by">chrisco255</span><span>|</span><a href="#37935160">root</a><span>|</span><a href="#37935343">parent</a><span>|</span><a href="#37940016">next</a><span>|</span><label class="collapse" for="c-37935551">[-]</label><label class="expand" for="c-37935551">[6 more]</label></div><br/><div class="children"><div class="content">By your example, 5 was marked as deleted, so it would just be [1, &lt;new element&gt;].<p>Most likely this would be implemented with a single mutator for each element. But if you implemented a &quot;range delete&quot;, then it would depend on what the order of arrival was. Notably, the server has to sequence actions somehow, so there isn&#x27;t going to be an issue of &quot;all actions arriving at the same time&quot;. If C arrived last in that case, the new element would be there. But if C arrived first, you&#x27;d just be left with [1].</div><br/><div id="37935703" class="c"><input type="checkbox" id="c-37935703" checked=""/><div class="controls bullet"><span class="by">moralestapia</span><span>|</span><a href="#37935160">root</a><span>|</span><a href="#37935551">parent</a><span>|</span><a href="#37940016">next</a><span>|</span><label class="collapse" for="c-37935703">[-]</label><label class="expand" for="c-37935703">[5 more]</label></div><br/><div class="children"><div class="content">Whoops, you&#x27;re right,<p>Is the solution to that,<p>a) [1]<p>or<p>b) [1, &lt;new element&gt;]<p>?<p>&gt;Notably, the server has to sequence actions somehow [...]<p>Yes, that&#x27;s my whole point, you have to fallback to something like LLW, and then it&#x27;s over for the transactional model :P.<p>Edit: Btw, I&#x27;m not trying to be the snarky, pessimistic dude. This kind of models are really interesting and I love working with them. I am just trying to illustrate how things could go awry without much complexity involved.</div><br/><div id="37936180" class="c"><input type="checkbox" id="c-37936180" checked=""/><div class="controls bullet"><span class="by">chrisco255</span><span>|</span><a href="#37935160">root</a><span>|</span><a href="#37935703">parent</a><span>|</span><a href="#37940016">next</a><span>|</span><label class="collapse" for="c-37936180">[-]</label><label class="expand" for="c-37936180">[4 more]</label></div><br/><div class="children"><div class="content">No, the server is going to process the actions in a single queue. So again, it&#x27;s whatever action arrives first.</div><br/><div id="37936481" class="c"><input type="checkbox" id="c-37936481" checked=""/><div class="controls bullet"><span class="by">moralestapia</span><span>|</span><a href="#37935160">root</a><span>|</span><a href="#37936180">parent</a><span>|</span><a href="#37940016">next</a><span>|</span><label class="collapse" for="c-37936481">[-]</label><label class="expand" for="c-37936481">[3 more]</label></div><br/><div class="children"><div class="content">Then it&#x27;s LLW and you&#x27;re no longer playing this game.</div><br/><div id="37936621" class="c"><input type="checkbox" id="c-37936621" checked=""/><div class="controls bullet"><span class="by">chrisco255</span><span>|</span><a href="#37935160">root</a><span>|</span><a href="#37936481">parent</a><span>|</span><a href="#37940016">next</a><span>|</span><label class="collapse" for="c-37936621">[-]</label><label class="expand" for="c-37936621">[2 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t know what LLW means, but you seem fixated on the acronym. It&#x27;s just first come, first serve transaction ordering from the world I come from.</div><br/><div id="37937187" class="c"><input type="checkbox" id="c-37937187" checked=""/><div class="controls bullet"><span class="by">gnat</span><span>|</span><a href="#37935160">root</a><span>|</span><a href="#37936621">parent</a><span>|</span><a href="#37940016">next</a><span>|</span><label class="collapse" for="c-37937187">[-]</label><label class="expand" for="c-37937187">[1 more]</label></div><br/><div class="children"><div class="content">Perhaps it&#x27;s a typo&#x2F;braino for LWW, Last Write Wins.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="37940016" class="c"><input type="checkbox" id="c-37940016" checked=""/><div class="controls bullet"><span class="by">anonzzzies</span><span>|</span><a href="#37935160">prev</a><span>|</span><a href="#37931868">next</a><span>|</span><label class="collapse" for="c-37940016">[-]</label><label class="expand" for="c-37940016">[1 more]</label></div><br/><div class="children"><div class="content">Besides trystero which is great but depends on things I cannot get into our company, anything open source? I cannot get this into our company either as it&#x27;s vital infra and as such needs to be replaceable with open source at will. We have that as a rule. The only things that are exceptions are necessary evil; payments &amp; cloudflare (bot-fight specifically).</div><br/></div></div><div id="37931868" class="c"><input type="checkbox" id="c-37931868" checked=""/><div class="controls bullet"><span class="by">aboodman</span><span>|</span><a href="#37940016">prev</a><span>|</span><a href="#37934918">next</a><span>|</span><label class="collapse" for="c-37931868">[-]</label><label class="expand" for="c-37931868">[11 more]</label></div><br/><div class="children"><div class="content">Hey hacker news! I&#x27;m one of the people behind this, happy to answer any questions.</div><br/><div id="37932271" class="c"><input type="checkbox" id="c-37932271" checked=""/><div class="controls bullet"><span class="by">coreyh14444</span><span>|</span><a href="#37931868">parent</a><span>|</span><a href="#37933420">next</a><span>|</span><label class="collapse" for="c-37932271">[-]</label><label class="expand" for="c-37932271">[3 more]</label></div><br/><div class="children"><div class="content">Aaron is humble, so I&#x27;ll do it for him! He created Greasemonkey and has had a hand in several groundbreaking browser innovations over the years.</div><br/><div id="37937541" class="c"><input type="checkbox" id="c-37937541" checked=""/><div class="controls bullet"><span class="by">ebcase</span><span>|</span><a href="#37931868">root</a><span>|</span><a href="#37932271">parent</a><span>|</span><a href="#37933511">next</a><span>|</span><label class="collapse" for="c-37937541">[-]</label><label class="expand" for="c-37937541">[1 more]</label></div><br/><div class="children"><div class="content">Having worked with Aaron on a few things many years ago, I can confirm this as well!</div><br/></div></div><div id="37933511" class="c"><input type="checkbox" id="c-37933511" checked=""/><div class="controls bullet"><span class="by">aboodman</span><span>|</span><a href="#37931868">root</a><span>|</span><a href="#37932271">parent</a><span>|</span><a href="#37937541">prev</a><span>|</span><a href="#37933420">next</a><span>|</span><label class="collapse" for="c-37933511">[-]</label><label class="expand" for="c-37933511">[1 more]</label></div><br/><div class="children"><div class="content">:)</div><br/></div></div></div></div><div id="37933420" class="c"><input type="checkbox" id="c-37933420" checked=""/><div class="controls bullet"><span class="by">jayunit</span><span>|</span><a href="#37931868">parent</a><span>|</span><a href="#37932271">prev</a><span>|</span><a href="#37933363">next</a><span>|</span><label class="collapse" for="c-37933420">[-]</label><label class="expand" for="c-37933420">[2 more]</label></div><br/><div class="children"><div class="content">Congrats! I&#x27;ve been watching this space for a while, having built a couple multiplayer sync systems in the past in private codebases, including a &quot;redux-pubsub&quot; library with rebasing and server canonicity that is (IIUC?) TCR-like. There&#x27;s a lot to like about this model, and I find the linked article quite clear - thank you for writing and releasing this!<p>1. You wrote &quot;For example, schema validation and migrations just sort of fall out of the design for free.&quot; - very curious to read about what you&#x27;ve found to work well for migrations! I feel like there&#x27;s a lot of nice stuff you can build here (tracking schema version as part of the doc, pushing migration functions into clients, and then clients can live-update) but I never got the chance to build that.<p>2. Do you have a recommendation for use-cases that involve substantial shared text editing in a TCR system? I&#x27;d usually default to Yjs and Tiptap&#x2F;Prosemirror here (and am watching Automerge Prosemirror with interest). The best idea I&#x27;ve come up with is running two data stores in parallel: a CRDT doc that is a flat key&#x2F;value identifying a set of text docs keyed by UUID, and a TCR doc representing the data, which occasionally mentions CRDT text UUIDs.</div><br/><div id="37933506" class="c"><input type="checkbox" id="c-37933506" checked=""/><div class="controls bullet"><span class="by">aboodman</span><span>|</span><a href="#37931868">root</a><span>|</span><a href="#37933420">parent</a><span>|</span><a href="#37933363">next</a><span>|</span><label class="collapse" for="c-37933506">[-]</label><label class="expand" for="c-37933506">[1 more]</label></div><br/><div class="children"><div class="content">1. I hope to write about this soon! We&#x27;ve developed something we really like for Reflect.<p>2. This is  what I want to work on next. I am similarly intrigued by the Prosemirror model. It seems like a good match.</div><br/></div></div></div></div><div id="37933363" class="c"><input type="checkbox" id="c-37933363" checked=""/><div class="controls bullet"><span class="by">nodoodles</span><span>|</span><a href="#37931868">parent</a><span>|</span><a href="#37933420">prev</a><span>|</span><a href="#37935661">next</a><span>|</span><label class="collapse" for="c-37933363">[-]</label><label class="expand" for="c-37933363">[3 more]</label></div><br/><div class="children"><div class="content">What does this mean for Replicache development, is the client-side codebase mostly shared and can expect continued updates, or more likely to replace the primary focus for you?</div><br/><div id="37933480" class="c"><input type="checkbox" id="c-37933480" checked=""/><div class="controls bullet"><span class="by">aboodman</span><span>|</span><a href="#37931868">root</a><span>|</span><a href="#37933363">parent</a><span>|</span><a href="#37935661">next</a><span>|</span><label class="collapse" for="c-37933480">[-]</label><label class="expand" for="c-37933480">[2 more]</label></div><br/><div class="children"><div class="content">The clients are almost entirely shared. We will continue to develop Replicache.<p><a href="https:&#x2F;&#x2F;x.com&#x2F;replicache&#x2F;status&#x2F;1714684061589877235?s=20" rel="nofollow noreferrer">https:&#x2F;&#x2F;x.com&#x2F;replicache&#x2F;status&#x2F;1714684061589877235?s=20</a></div><br/><div id="37933546" class="c"><input type="checkbox" id="c-37933546" checked=""/><div class="controls bullet"><span class="by">nodoodles</span><span>|</span><a href="#37931868">root</a><span>|</span><a href="#37933480">parent</a><span>|</span><a href="#37935661">next</a><span>|</span><label class="collapse" for="c-37933546">[-]</label><label class="expand" for="c-37933546">[1 more]</label></div><br/><div class="children"><div class="content">Thank you! Really like Replicache though only used it for hobby projects so far, and enjoyed also the backend side of it (minimal and entirely in supabase stored functions, probably not prod ready). Hope the new approach is a great success for you!</div><br/></div></div></div></div></div></div><div id="37935661" class="c"><input type="checkbox" id="c-37935661" checked=""/><div class="controls bullet"><span class="by">chrisco255</span><span>|</span><a href="#37931868">parent</a><span>|</span><a href="#37933363">prev</a><span>|</span><a href="#37934918">next</a><span>|</span><label class="collapse" for="c-37935661">[-]</label><label class="expand" for="c-37935661">[2 more]</label></div><br/><div class="children"><div class="content">What is the maximum number of users that can be concurrently in a room?</div><br/><div id="37936308" class="c"><input type="checkbox" id="c-37936308" checked=""/><div class="controls bullet"><span class="by">aboodman</span><span>|</span><a href="#37931868">root</a><span>|</span><a href="#37935661">parent</a><span>|</span><a href="#37934918">next</a><span>|</span><label class="collapse" for="c-37936308">[-]</label><label class="expand" for="c-37936308">[1 more]</label></div><br/><div class="children"><div class="content">There&#x27;s no max enforced. Right now, it will fall apart pretty quick around 25-50, depending on how much work is going on.<p>For the GA, we plan to implement a scheme that will allow the room to support up to ~100 concurrent <i>active</i> users (actually doing things) and thousands just watching.</div><br/></div></div></div></div></div></div><div id="37934918" class="c"><input type="checkbox" id="c-37934918" checked=""/><div class="controls bullet"><span class="by">hgs3</span><span>|</span><a href="#37931868">prev</a><span>|</span><a href="#37934974">next</a><span>|</span><label class="collapse" for="c-37934918">[-]</label><label class="expand" for="c-37934918">[3 more]</label></div><br/><div class="children"><div class="content">This is a pedantic comment, but the terminology is confusing. Games have &quot;players&quot; so their sync systems are called &quot;multiplayer,&quot; but regular software has &quot;users&quot; so their sync systems should be called &quot;multiuser.&quot; The page reads strangely mixing the terms &quot;user&quot; with &quot;multiplayer.&quot;</div><br/><div id="37935112" class="c"><input type="checkbox" id="c-37935112" checked=""/><div class="controls bullet"><span class="by">nwenzel</span><span>|</span><a href="#37934918">parent</a><span>|</span><a href="#37935242">next</a><span>|</span><label class="collapse" for="c-37935112">[-]</label><label class="expand" for="c-37935112">[1 more]</label></div><br/><div class="children"><div class="content">Maybe. But user is like a consumer. So HN is multiuser, but seems weird to call HN multi-player. Live concurrent interactions feels like something more than multiuser. Just my 2-cents, but multiplayer as in multiple users acting and interacting is a good use of the term multiplayer.</div><br/></div></div><div id="37935242" class="c"><input type="checkbox" id="c-37935242" checked=""/><div class="controls bullet"><span class="by">mrkeen</span><span>|</span><a href="#37934918">parent</a><span>|</span><a href="#37935112">prev</a><span>|</span><a href="#37934974">next</a><span>|</span><label class="collapse" for="c-37935242">[-]</label><label class="expand" for="c-37935242">[1 more]</label></div><br/><div class="children"><div class="content">Its logic is based on the logic that&#x27;s been in &quot;multiplayer games&quot; for decades.<p>On the other hand all web software is &quot;multiuser&quot;, which doesn&#x27;t tell you anything.</div><br/></div></div></div></div><div id="37934974" class="c"><input type="checkbox" id="c-37934974" checked=""/><div class="controls bullet"><span class="by">lgessler</span><span>|</span><a href="#37934918">prev</a><span>|</span><a href="#37935497">next</a><span>|</span><label class="collapse" for="c-37934974">[-]</label><label class="expand" for="c-37934974">[4 more]</label></div><br/><div class="children"><div class="content">As someone who&#x27;s casually been eyeing up CRDTs for two years I&#x27;ve wondered continually what the story for authorization is, and this article seems to suggest (in line with my own understanding) that a CRDT library on its own like Y.js can&#x27;t really handle applications where mutations need to be checked for authorization because it lacks a central authority (i.e., the server) while Reflect assumes that a server will be mediating client interactions. Is this all correct?</div><br/><div id="37939154" class="c"><input type="checkbox" id="c-37939154" checked=""/><div class="controls bullet"><span class="by">hem777</span><span>|</span><a href="#37934974">parent</a><span>|</span><a href="#37936285">next</a><span>|</span><label class="collapse" for="c-37939154">[-]</label><label class="expand" for="c-37939154">[1 more]</label></div><br/><div class="children"><div class="content">One way to do authorization is to sign each operation&#x2F;message and then verify the signature to match a public key in an access control list. This also enables CRDTs to work in a peer to peer context.<p>But as aboodman says in a sibling comment, if there’s a server as an authority, it can simply reject messages from unauthorized clients.</div><br/></div></div><div id="37936285" class="c"><input type="checkbox" id="c-37936285" checked=""/><div class="controls bullet"><span class="by">aboodman</span><span>|</span><a href="#37934974">parent</a><span>|</span><a href="#37939154">prev</a><span>|</span><a href="#37936039">next</a><span>|</span><label class="collapse" for="c-37936285">[-]</label><label class="expand" for="c-37936285">[1 more]</label></div><br/><div class="children"><div class="content">&quot;Can&#x27;t&quot; is a strong word. You can get auth with a CRDT with effort, for example you can put a server in the middle of everything and have the server reverse any changes it sees which are unauthorized.<p>This ends up being a lot of work to maintain and easy to break as the application gets bigger, and it also defeats some of the benefits of the CRDT in the first place (now the server has to mediate everything and you can&#x27;t have peer-to-peer sync).<p>Also if there are side-effects of any actions which require auth which aren&#x27;t undoable, then that gets more complicated.<p>If you already have a server in the middle, it&#x27;s a lot simpler to just use a protocol that allows the server to reject messages in the first place.</div><br/></div></div><div id="37936039" class="c"><input type="checkbox" id="c-37936039" checked=""/><div class="controls bullet"><span class="by">foota</span><span>|</span><a href="#37934974">parent</a><span>|</span><a href="#37936285">prev</a><span>|</span><a href="#37935497">next</a><span>|</span><label class="collapse" for="c-37936039">[-]</label><label class="expand" for="c-37936039">[1 more]</label></div><br/><div class="children"><div class="content">CRDTs can still involve a server, just not necessarily in the middle of everything. Consider you could have connections authenticated by the server, for one.<p>E.g., someone connects peer to peer to you and claims some privilege etc., you could use the server to verify their claim.<p>Also, I don&#x27;t think CRDT necessarily implies peer to peer, as you can use a central server for message passing, but keep the CRDT model for resolving the current state on both server and client.</div><br/></div></div></div></div><div id="37935497" class="c"><input type="checkbox" id="c-37935497" checked=""/><div class="controls bullet"><span class="by">wheybags</span><span>|</span><a href="#37934974">prev</a><span>|</span><a href="#37935225">next</a><span>|</span><label class="collapse" for="c-37935497">[-]</label><label class="expand" for="c-37935497">[5 more]</label></div><br/><div class="children"><div class="content">For reference, this strategy is called &quot;deterministic lockstep&quot; in the gamedev world, and is used especially often in games which have many entities which need their state synced. The canonical example is rtses, which pretty much all use it.</div><br/><div id="37935672" class="c"><input type="checkbox" id="c-37935672" checked=""/><div class="controls bullet"><span class="by">Oberdiah</span><span>|</span><a href="#37935497">parent</a><span>|</span><a href="#37936200">next</a><span>|</span><label class="collapse" for="c-37935672">[-]</label><label class="expand" for="c-37935672">[1 more]</label></div><br/><div class="children"><div class="content">Specifically &quot;Deterministic Rollback&quot;, as the clients don&#x27;t wait for the server&#x27;s response before displaying the change locally.<p>For an in-depth explanation, see this excellent GDC talk on its implementation in Mortal Kombat and Injustice 2: <a href="https:&#x2F;&#x2F;youtu.be&#x2F;7jb0FOcImdg" rel="nofollow noreferrer">https:&#x2F;&#x2F;youtu.be&#x2F;7jb0FOcImdg</a></div><br/></div></div><div id="37936200" class="c"><input type="checkbox" id="c-37936200" checked=""/><div class="controls bullet"><span class="by">DecoPerson</span><span>|</span><a href="#37935497">parent</a><span>|</span><a href="#37935672">prev</a><span>|</span><a href="#37935225">next</a><span>|</span><label class="collapse" for="c-37936200">[-]</label><label class="expand" for="c-37936200">[3 more]</label></div><br/><div class="children"><div class="content">Hey wheybags, this is not deterministic lockstep.<p>That is an algorithm for peer-to-peer games, where each peer waits for the input from all other players before advancing the game simulation. The deterministic part is because players share inputs (not simulation results) AND the simulation is deterministic for the same inputs. The lockstep part is because all clients advance at a coordinated pace. The Age of Empires series use this approach, and that’s why units don’t move immediately when you click. Starcraft uses this too, but it has some tricks to smooth the gameplay experience. Both are peer-to-peer with no single “server”.<p>In the case of Reflect, we have a server-authorative simulation (not peer-to-peer). Clients send their inputs to the server, but they do not wait for the result, they instead predict the result locally without confirmation from the server. The server also rolls back time and then replays inputs to compensate for individual client latency. And the client corrects&#x2F;reconciles their local simulation once the server sends a simulation result that included one of their inputs.<p>The keywords for this algorithm are:<p>- Server-authoritative<p>- Predicted<p>- Lag compensated (simulation rollback &#x2F; server rewind &#x2F; input replay)<p>- Prediction reconciliation (local simulation rollback &#x2F; local input replay &#x2F; misprediction smoothing)<p>I’m not sure if Reflect has it, but client-side interpolation is also a common feature in FPS games, where upon receiving a world update, the client will tween entities to their new positions&#x2F;rotations over a fixed interval (such as 0.1s). This allows you to send updates to clients at only 10Hz but have entities move smoothly (without needing the client to locally simulate the physics of every entity).<p>There is only one authority, the server, so determinism isn’t super important. However, it is nice to have for client predictions to reduce the occurrences of mispredictions. Mispredictions occur when the server state did not advance the way the client predicted. These can happen when:<p>(1) Another client’s input changed the world state in an important way,<p>(2) The simulation is not deterministic (e.g. the random number generation is not synced).<p>In FPS games, (1) is impossible to eliminate. These mispredictions are often smoothed using interpolation. (2) should be minimised, but may actually be desirable. For example, Counter Strike does not sync the RNG for bullet spread randomness, to prevent “nospread” cheat programs from predicting where each bullet will go and instantly adjusting the player’s aim so the bullet lines up perfectly.<p><a href="https:&#x2F;&#x2F;www.gabrielgambetta.com&#x2F;client-side-prediction-live-demo.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.gabrielgambetta.com&#x2F;client-side-prediction-live-...</a><p><a href="https:&#x2F;&#x2F;developer.valvesoftware.com&#x2F;wiki&#x2F;Latency_Compensating_Methods_in_Client&#x2F;Server_In-game_Protocol_Design_and_Optimization" rel="nofollow noreferrer">https:&#x2F;&#x2F;developer.valvesoftware.com&#x2F;wiki&#x2F;Latency_Compensatin...</a><p><a href="https:&#x2F;&#x2F;developer.valvesoftware.com&#x2F;wiki&#x2F;Source_Multiplayer_Networking" rel="nofollow noreferrer">https:&#x2F;&#x2F;developer.valvesoftware.com&#x2F;wiki&#x2F;Source_Multiplayer_...</a></div><br/><div id="37939618" class="c"><input type="checkbox" id="c-37939618" checked=""/><div class="controls bullet"><span class="by">wheybags</span><span>|</span><a href="#37935497">root</a><span>|</span><a href="#37936200">parent</a><span>|</span><a href="#37935225">next</a><span>|</span><label class="collapse" for="c-37939618">[-]</label><label class="expand" for="c-37939618">[2 more]</label></div><br/><div class="children"><div class="content">Yes, I know there&#x27;s some differences in what you&#x27;re doing here from classic deterministic lockstep, but the fundamental concept of syncing a queue of inputs from which the game state can be derived, instead of syncing the game state itself is the same, which is why I mentioned it.
Also, while deterministic lockstep can be used peer to peer, it is not fundamentally a peer to peer model. Factorio for example, uses server authoritative deterministic lockstep, and has lag compensation (but only for certain actions like movement).</div><br/><div id="37939965" class="c"><input type="checkbox" id="c-37939965" checked=""/><div class="controls bullet"><span class="by">meheleventyone</span><span>|</span><a href="#37935497">root</a><span>|</span><a href="#37939618">parent</a><span>|</span><a href="#37935225">next</a><span>|</span><label class="collapse" for="c-37939965">[-]</label><label class="expand" for="c-37939965">[1 more]</label></div><br/><div class="children"><div class="content">All multiplayer games sync a queue of messages to derive game state, that’s inherent in networking.<p>Deterministic <i>lockstep</i> means that the speed of the simulation is dependent on the slowest member as everyone waits to get all the inputs before advancing a frame. You’ll get literally pauses and jank if someone is on a poor connection. That’s not the case here.<p>The difference with this model of networking is what is synced in the lockstep case the simulation being deterministic means you only need to send inputs to keep the game in sync so you vastly reduce network traffic. In this case it’s not necessarily deterministic and the server sends back the new state to the clients after determining what it is as it’s the authority on what that state is. Clients can predict ahead by making the change locally but <i>must</i> correct mispredictions. In the deterministic case there can be no mispredictions and it’s a pain in the butt to ensure that your game is actually deterministic and resolving sync issues is a real pain.<p>Factorio sounds like it uses a deterministic model that doesn’t wait to run in lockstep and instead reconciles errors that causes. The typical way of doing that is to rollback to a prior state where the simulation diverged due to missing inputs and redo the following ticks. That’s probably prohibitively expensive given the scale of Factorio versus something simpler like a fighting game so I assume there is a hybrid model and some extra info is sent by an authoritative source that can be checked locally.</div><br/></div></div></div></div></div></div></div></div><div id="37935225" class="c"><input type="checkbox" id="c-37935225" checked=""/><div class="controls bullet"><span class="by">stu_k</span><span>|</span><a href="#37935497">prev</a><span>|</span><a href="#37932874">next</a><span>|</span><label class="collapse" for="c-37935225">[-]</label><label class="expand" for="c-37935225">[2 more]</label></div><br/><div class="children"><div class="content">How does one handle an upgrade to mutators? If a client is running old code then the operation will differ to the server. Obvious answer would be to version them independently: `increment_v1`, `increment_v2`, but wondering if there is a better answer?</div><br/><div id="37936421" class="c"><input type="checkbox" id="c-37936421" checked=""/><div class="controls bullet"><span class="by">erikarvidsson</span><span>|</span><a href="#37935225">parent</a><span>|</span><a href="#37932874">next</a><span>|</span><label class="collapse" for="c-37936421">[-]</label><label class="expand" for="c-37936421">[1 more]</label></div><br/><div class="children"><div class="content">At the moment there is no better answer than do not remove your old mutators until you know there are no more clients out there that might have pending changes.<p>Right now that window is pretty small because we haven&#x27;t turned on persistence yet.</div><br/></div></div></div></div><div id="37932874" class="c"><input type="checkbox" id="c-37932874" checked=""/><div class="controls bullet"><span class="by">joloooo</span><span>|</span><a href="#37935225">prev</a><span>|</span><a href="#37939312">next</a><span>|</span><label class="collapse" for="c-37932874">[-]</label><label class="expand" for="c-37932874">[3 more]</label></div><br/><div class="children"><div class="content">Looks great, congrats on launching. Is this in a similar vein to <a href="https:&#x2F;&#x2F;partykit.io&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;partykit.io&#x2F;</a>?</div><br/><div id="37933272" class="c"><input type="checkbox" id="c-37933272" checked=""/><div class="controls bullet"><span class="by">aboodman</span><span>|</span><a href="#37932874">parent</a><span>|</span><a href="#37939312">next</a><span>|</span><label class="collapse" for="c-37933272">[-]</label><label class="expand" for="c-37933272">[2 more]</label></div><br/><div class="children"><div class="content">Yes they are in the same space. The key difference is in how opinionated each is.<p>PartyKit is extremely unopinionated. It&#x27;s essentially  lightweight javascript server, that launches fast and autoscales (I don&#x27;t say this as as a bad thing, it&#x27;s a useful primitive). Most people seem to run yjs in PartyKit, but you can also run automerge or even Replicache – my company&#x27;s other project.<p>Reflect is entirely focused on providing the best possible multiplayer experience. We make a lot of choices up and down the stack to tightly integrate everything so that multiplayer just works and you can focus on building your app.<p>That&#x27;s the plan anyway :).</div><br/><div id="37935122" class="c"><input type="checkbox" id="c-37935122" checked=""/><div class="controls bullet"><span class="by">joloooo</span><span>|</span><a href="#37932874">root</a><span>|</span><a href="#37933272">parent</a><span>|</span><a href="#37939312">next</a><span>|</span><label class="collapse" for="c-37935122">[-]</label><label class="expand" for="c-37935122">[1 more]</label></div><br/><div class="children"><div class="content">Thanks for taking the time to answer!  I&#x27;ve been trying to keep up with the rise of more collaborative tooling, so I appreciate the comparison. Will have to try out reflect sometime on a future project :)</div><br/></div></div></div></div></div></div><div id="37939312" class="c"><input type="checkbox" id="c-37939312" checked=""/><div class="controls bullet"><span class="by">holoduke</span><span>|</span><a href="#37932874">prev</a><span>|</span><a href="#37938539">next</a><span>|</span><label class="collapse" for="c-37939312">[-]</label><label class="expand" for="c-37939312">[3 more]</label></div><br/><div class="children"><div class="content">When will it finally be possible to use UDP protocol within browsers? 
TCP got way too big overhead. A multiplayer engine in which you send 30 messages per second for 128 users is what i need. Not possible with websockets withput having super computers.</div><br/><div id="37939420" class="c"><input type="checkbox" id="c-37939420" checked=""/><div class="controls bullet"><span class="by">ermir</span><span>|</span><a href="#37939312">parent</a><span>|</span><a href="#37939620">next</a><span>|</span><label class="collapse" for="c-37939420">[-]</label><label class="expand" for="c-37939420">[1 more]</label></div><br/><div class="children"><div class="content">WebRTC makes this possible, but server implementations are quite difficult to set up. I recommend you check out Pion (Golang) as a good implementation that&#x27;s also easy to deploy and integrate with Node (presumably your game server is implemented in JS).</div><br/></div></div><div id="37939620" class="c"><input type="checkbox" id="c-37939620" checked=""/><div class="controls bullet"><span class="by">hnav</span><span>|</span><a href="#37939312">parent</a><span>|</span><a href="#37939420">prev</a><span>|</span><a href="#37938539">next</a><span>|</span><label class="collapse" for="c-37939620">[-]</label><label class="expand" for="c-37939620">[1 more]</label></div><br/><div class="children"><div class="content">Why does TCP have so much overhead? 30 messages that you don&#x27;t batch is 30 packets either with TCP or UDP.</div><br/></div></div></div></div><div id="37938539" class="c"><input type="checkbox" id="c-37938539" checked=""/><div class="controls bullet"><span class="by">cadbox1</span><span>|</span><a href="#37939312">prev</a><span>|</span><a href="#37937519">next</a><span>|</span><label class="collapse" for="c-37938539">[-]</label><label class="expand" for="c-37938539">[1 more]</label></div><br/><div class="children"><div class="content">Figma uses a similar solution for their realtime feature. They have a famous article that explains why CRDTs aren’t necessary when you have a central server authority. <a href="https:&#x2F;&#x2F;www.figma.com&#x2F;blog&#x2F;how-figmas-multiplayer-technology-works&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.figma.com&#x2F;blog&#x2F;how-figmas-multiplayer-technology...</a><p>I implemented the same solution with Redux actions and Cloudflare Durable Workers. <a href="https:&#x2F;&#x2F;emojis.cadell.dev" rel="nofollow noreferrer">https:&#x2F;&#x2F;emojis.cadell.dev</a></div><br/></div></div><div id="37937519" class="c"><input type="checkbox" id="c-37937519" checked=""/><div class="controls bullet"><span class="by">cco</span><span>|</span><a href="#37938539">prev</a><span>|</span><a href="#37936505">next</a><span>|</span><label class="collapse" for="c-37937519">[-]</label><label class="expand" for="c-37937519">[1 more]</label></div><br/><div class="children"><div class="content">Wow this looks incredible. I had the most fun I&#x27;ve had on a computer in a long time this last weekend using Partykit.io to build <a href="https:&#x2F;&#x2F;is-sf-back.cconeill.partykit.dev&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;is-sf-back.cconeill.partykit.dev&#x2F;</a> and this looks so much smoother.<p>Going to have to check this out.</div><br/></div></div><div id="37936505" class="c"><input type="checkbox" id="c-37936505" checked=""/><div class="controls bullet"><span class="by">cornfutes</span><span>|</span><a href="#37937519">prev</a><span>|</span><a href="#37938430">next</a><span>|</span><label class="collapse" for="c-37936505">[-]</label><label class="expand" for="c-37936505">[2 more]</label></div><br/><div class="children"><div class="content">Looks great for a hobby project.<p>Has anyone done the cost + risk assessment of building a for-profit product on top of this? Would love to know, as I am working on a web IDE with collaboration. There’s also the matter of obscuring client data from 3rd and even 1st party.</div><br/><div id="37939257" class="c"><input type="checkbox" id="c-37939257" checked=""/><div class="controls bullet"><span class="by">holoduke</span><span>|</span><a href="#37936505">parent</a><span>|</span><a href="#37938430">next</a><span>|</span><label class="collapse" for="c-37939257">[-]</label><label class="expand" for="c-37939257">[1 more]</label></div><br/><div class="children"><div class="content">A risk assessment? Just go and try it out in a prototype and see if you can make money with it. You can always replace it once successful.</div><br/></div></div></div></div><div id="37938430" class="c"><input type="checkbox" id="c-37938430" checked=""/><div class="controls bullet"><span class="by">bradhe</span><span>|</span><a href="#37936505">prev</a><span>|</span><a href="#37932508">next</a><span>|</span><label class="collapse" for="c-37938430">[-]</label><label class="expand" for="c-37938430">[1 more]</label></div><br/><div class="children"><div class="content">I mean…how many things we gonna call Reflect? Signed, the former founder of reflect.io.</div><br/></div></div><div id="37932508" class="c"><input type="checkbox" id="c-37932508" checked=""/><div class="controls bullet"><span class="by">matlin</span><span>|</span><a href="#37938430">prev</a><span>|</span><a href="#37936298">next</a><span>|</span><label class="collapse" for="c-37932508">[-]</label><label class="expand" for="c-37932508">[8 more]</label></div><br/><div class="children"><div class="content">While I do love the simplicity of this approach on the surface. Some of the complexity gets brushed under the rug.<p>Firstly is rebasing these operations in this style of system takes a bigger hit on performance than I expected in my experience. Sure, managing counters and doing integer math can consistently run at 120FPS but more complex operations can really bog down the system when a lot of users are interacting with it once.<p>The second challenge is that when operations fail (e.g. for authorization) undoing that operation isn&#x27;t always straightforward. You either pop the operation and replay ops from a earlier snapshot (which necessitates storing all ops in order), writing an inverse operation manually, or having the server send the entire state back to rebase your unconfirmed ops on which can also end being expensive.<p>In general, the challenges of this approach are true for all operation-based CRDTs too. State-based approaches are a good deal simpler just tend to over-send data over the network.</div><br/><div id="37932592" class="c"><input type="checkbox" id="c-37932592" checked=""/><div class="controls bullet"><span class="by">aboodman</span><span>|</span><a href="#37932508">parent</a><span>|</span><a href="#37936298">next</a><span>|</span><label class="collapse" for="c-37932592">[-]</label><label class="expand" for="c-37932592">[7 more]</label></div><br/><div class="children"><div class="content">Hey Matlin, it&#x27;s true that this approach is harder to implement, but that&#x27;s a one-time cost, and it&#x27;s one we take on for our users and they don&#x27;t have to worry about.</div><br/><div id="37932812" class="c"><input type="checkbox" id="c-37932812" checked=""/><div class="controls bullet"><span class="by">aboodman</span><span>|</span><a href="#37932508">root</a><span>|</span><a href="#37932592">parent</a><span>|</span><a href="#37932682">next</a><span>|</span><label class="collapse" for="c-37932812">[-]</label><label class="expand" for="c-37932812">[3 more]</label></div><br/><div class="children"><div class="content">Also just as an FYI we do have this running live at <a href="https:&#x2F;&#x2F;reflect.net" rel="nofollow noreferrer">https:&#x2F;&#x2F;reflect.net</a> and <a href="https:&#x2F;&#x2F;hello.reflect.net&#x2F;examples" rel="nofollow noreferrer">https:&#x2F;&#x2F;hello.reflect.net&#x2F;examples</a> at 120 FPS.<p>We are targeting 100 concurrent users at 120 FPS. Not completely there, but it is certainly achievable, and we will scale back framerate when we need to.</div><br/><div id="37935215" class="c"><input type="checkbox" id="c-37935215" checked=""/><div class="controls bullet"><span class="by">internet101010</span><span>|</span><a href="#37932508">root</a><span>|</span><a href="#37932812">parent</a><span>|</span><a href="#37932682">next</a><span>|</span><label class="collapse" for="c-37935215">[-]</label><label class="expand" for="c-37935215">[2 more]</label></div><br/><div class="children"><div class="content">So are you using fps management just for scaling purposes or also as a way of ensuring fairness? The reason I ask is because games like Forza have had to resort to setting all online players&#x27; frame rates to be the same regardless of their machine&#x27;s capabilities due to the way the in-game physics work. PC players on high end hardware would consistently get better lap times than Xbox users because of it.<p>Maybe this is a bit out of scope of what the goal is for this project but just thought I would bring it up.</div><br/><div id="37936361" class="c"><input type="checkbox" id="c-37936361" checked=""/><div class="controls bullet"><span class="by">aboodman</span><span>|</span><a href="#37932508">root</a><span>|</span><a href="#37935215">parent</a><span>|</span><a href="#37932682">next</a><span>|</span><label class="collapse" for="c-37936361">[-]</label><label class="expand" for="c-37936361">[1 more]</label></div><br/><div class="children"><div class="content">Huh! That&#x27;s interesting. I don&#x27;t think this applies to the type of collaborative apps (ie figma) we are targeting, but it&#x27;s fascinating to know. Thanks!</div><br/></div></div></div></div></div></div><div id="37932682" class="c"><input type="checkbox" id="c-37932682" checked=""/><div class="controls bullet"><span class="by">matlin</span><span>|</span><a href="#37932508">root</a><span>|</span><a href="#37932592">parent</a><span>|</span><a href="#37932812">prev</a><span>|</span><a href="#37936298">next</a><span>|</span><label class="collapse" for="c-37932682">[-]</label><label class="expand" for="c-37932682">[3 more]</label></div><br/><div class="children"><div class="content">Can you share how y&#x27;all made it fast? Obviously it can be made fast because multiplayer online games are living proof but I&#x27;m curious what it takes to get there or what&#x27;s missing in my mental model.</div><br/><div id="37932837" class="c"><input type="checkbox" id="c-37932837" checked=""/><div class="controls bullet"><span class="by">aboodman</span><span>|</span><a href="#37932508">root</a><span>|</span><a href="#37932682">parent</a><span>|</span><a href="#37936298">next</a><span>|</span><label class="collapse" for="c-37932837">[-]</label><label class="expand" for="c-37932837">[2 more]</label></div><br/><div class="children"><div class="content">Not really any magic, just a lot of careful engineering.</div><br/><div id="37934809" class="c"><input type="checkbox" id="c-37934809" checked=""/><div class="controls bullet"><span class="by">ramses0</span><span>|</span><a href="#37932508">root</a><span>|</span><a href="#37932837">parent</a><span>|</span><a href="#37936298">next</a><span>|</span><label class="collapse" for="c-37934809">[-]</label><label class="expand" for="c-37934809">[1 more]</label></div><br/><div class="children"><div class="content">What&#x27;s your opinion on using this library as a base for (eg) a simplified &quot;world-of-warcraft&quot; clone?<p>I&#x27;ve done a lot of thinking (but not coding) around &quot;simply replicating state&quot; being the right answer to interconnected apps.<p>The degenerate case is to model everything as a git transaction log, but be able to run it &quot;faster&quot; than really using git.  It&#x27;s very intriguing to hear your discussion of &quot;branching, sequentialization, etc...&quot; because that seems like the right way to go. ( <i>edit: and implicit _physics_ vs. state transfer in some cases... it&#x27;s cheaper to send nuke@[x,y,z] instead of the literal calculations and changes to state that single action may imply ... physics in games maybe being gravity and ballistics, but &#x27;business-physics&#x27; might be update&#x2F;select&#x2F;modify, etc.</i> )<p>There&#x27;s a few interesting optimizations&#x2F;tradeoffs in some of the &quot;real&quot; multiplayer networking libraries: <a href="https:&#x2F;&#x2F;torque-3d.readthedocs.io&#x2F;en&#x2F;latest&#x2F;script&#x2F;network.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;torque-3d.readthedocs.io&#x2F;en&#x2F;latest&#x2F;script&#x2F;network.ht...</a><p>...eg: Unguaranteed, Guaranteed, Guaranteed Order, Most Recent State, Guaranteed Quickest (and each client has it&#x27;s own &quot;camera&quot; &#x2F; perspective against the &quot;scene&quot;, where +180 might be &quot;need it now b&#x2F;c I&#x27;m looking at it&quot;, but -180 might be &quot;meh, need close-to-the-latest-state before I turn around and look at it&quot;).<p>I&#x27;m rooting for you b&#x2F;c &quot;multiplayer + physics&quot; seems like the right answer (eg: the ghost of couchdb), but no one seems to have (yet) cracked the semantic code as to how to describe &quot;as fast as local, but synchronized with $THESE tradeoffs and $EXCEPTIONS&quot;.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="37936298" class="c"><input type="checkbox" id="c-37936298" checked=""/><div class="controls bullet"><span class="by">heron88</span><span>|</span><a href="#37932508">prev</a><span>|</span><a href="#37935155">next</a><span>|</span><label class="collapse" for="c-37936298">[-]</label><label class="expand" for="c-37936298">[3 more]</label></div><br/><div class="children"><div class="content">This looks great! I&#x27;m curious what the recommended use cases are for something like this. Is it worth adding the additional complexity for complex crud-y saas? I know Linear is built on this local-first model but from seeing their presentations on the challenges they&#x27;ve had scaling it, I&#x27;m left wondering if it makes sense for something like a full-featured CRM with hundreds of tables. Is Reflect&#x2F;Replicache suited for that kind of use case?</div><br/><div id="37939828" class="c"><input type="checkbox" id="c-37939828" checked=""/><div class="controls bullet"><span class="by">meheleventyone</span><span>|</span><a href="#37936298">parent</a><span>|</span><a href="#37936529">next</a><span>|</span><label class="collapse" for="c-37939828">[-]</label><label class="expand" for="c-37939828">[1 more]</label></div><br/><div class="children"><div class="content">My 2c as a game dev is that you really want to know the cases where you <i>need</i> real-time collaboration. Otherwise the still collaborative but slower updating techniques people normally use are perfectly fine. Even in something like an MMO parts of the game will use real-time game servers and others might just use a REST API.<p>The other side of it is to make sure that real-time collab is something users actually want and <i>use</i>. There’s a lot of froth at the moment about real-time but IMO and IME it has a much smaller set of useful cases than most people actually think. But where it is useful, it is a step up for collaboration.<p>For example with Google Docs I find myself and our broader team mostly solo write but collaboratively review and edit. Where we collaboratively write its carefully structured so people aren’t stomping on each other and often done with someone acting as a mediator.</div><br/></div></div><div id="37936529" class="c"><input type="checkbox" id="c-37936529" checked=""/><div class="controls bullet"><span class="by">erikarvidsson</span><span>|</span><a href="#37936298">parent</a><span>|</span><a href="#37939828">prev</a><span>|</span><a href="#37935155">next</a><span>|</span><label class="collapse" for="c-37936529">[-]</label><label class="expand" for="c-37936529">[1 more]</label></div><br/><div class="children"><div class="content">We have an old demo of our Linear clone using Replicache at <a href="https:&#x2F;&#x2F;repliear.herokuapp.com&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;repliear.herokuapp.com&#x2F;</a></div><br/></div></div></div></div><div id="37935155" class="c"><input type="checkbox" id="c-37935155" checked=""/><div class="controls bullet"><span class="by">antidnan</span><span>|</span><a href="#37936298">prev</a><span>|</span><a href="#37937689">next</a><span>|</span><label class="collapse" for="c-37935155">[-]</label><label class="expand" for="c-37935155">[1 more]</label></div><br/><div class="children"><div class="content">Reflect is awesome. We&#x27;re currently using an alpha version in production, and I&#x27;ve been really happy with the system as well as Aaron and team!<p>Happy to answer any questions as a customer :)</div><br/></div></div><div id="37937689" class="c"><input type="checkbox" id="c-37937689" checked=""/><div class="controls bullet"><span class="by">knubie</span><span>|</span><a href="#37935155">prev</a><span>|</span><a href="#37932908">next</a><span>|</span><label class="collapse" for="c-37937689">[-]</label><label class="expand" for="c-37937689">[1 more]</label></div><br/><div class="children"><div class="content">One consequence of this approach is that your mutators will need to be versioned, and you can pretty much never delete or change them once they&#x27;re live. (Please correct me if I&#x27;m wrong).</div><br/></div></div><div id="37932908" class="c"><input type="checkbox" id="c-37932908" checked=""/><div class="controls bullet"><span class="by">joshelgar</span><span>|</span><a href="#37937689">prev</a><span>|</span><a href="#37937494">next</a><span>|</span><label class="collapse" for="c-37932908">[-]</label><label class="expand" for="c-37932908">[3 more]</label></div><br/><div class="children"><div class="content">Any idea how this compares to Supabase&#x27;s Realtime &amp; Presence libraries?<p><a href="https:&#x2F;&#x2F;supabase.com&#x2F;docs&#x2F;guides&#x2F;realtime">https:&#x2F;&#x2F;supabase.com&#x2F;docs&#x2F;guides&#x2F;realtime</a></div><br/><div id="37933453" class="c"><input type="checkbox" id="c-37933453" checked=""/><div class="controls bullet"><span class="by">aboodman</span><span>|</span><a href="#37932908">parent</a><span>|</span><a href="#37937494">next</a><span>|</span><label class="collapse" for="c-37933453">[-]</label><label class="expand" for="c-37933453">[2 more]</label></div><br/><div class="children"><div class="content">We&#x27;ll post something soon comparing all of the options (in our opinion). But as I understand it:<p>- Supabase Broadcast: one client sends every other client a one-time message<p>- Supabase Presence: one client tells all other clients that its own state has changed. This is similar to above, except that server keeps track of all the last-state for each client so that new members of the channel can get up to date.<p>- Supabase Realtime: server tells all clients when server state changes (so you will not get optimistic client-side changes this way)</div><br/><div id="37933657" class="c"><input type="checkbox" id="c-37933657" checked=""/><div class="controls bullet"><span class="by">jitl</span><span>|</span><a href="#37932908">root</a><span>|</span><a href="#37933453">parent</a><span>|</span><a href="#37937494">next</a><span>|</span><label class="collapse" for="c-37933657">[-]</label><label class="expand" for="c-37933657">[1 more]</label></div><br/><div class="children"><div class="content">You forgot to compare them :)<p>Supabase’s real-time stuff lets various parts of your system send messages about changes to each other. But when it comes to realtime editing, that’s the easy part!<p>Reflect is a much higher level abstraction that handles the hard parts:<p>- maintaining a cache on the device (this alone is annoying hard to get right)<p>- queuing updates to send to the server reliably<p>- handling conflicts between different users while preserving the intent of each user, by rebasing histories locally, and choosing the winner on the server</div><br/></div></div></div></div></div></div><div id="37937494" class="c"><input type="checkbox" id="c-37937494" checked=""/><div class="controls bullet"><span class="by">yewenjie</span><span>|</span><a href="#37932908">prev</a><span>|</span><a href="#37936772">next</a><span>|</span><label class="collapse" for="c-37937494">[-]</label><label class="expand" for="c-37937494">[1 more]</label></div><br/><div class="children"><div class="content">Not at all any expert in this space, so maybe a dumb question, but how do you model plain text data for something like a collaborative markdown editor with things like this or CRDTs?</div><br/></div></div><div id="37936772" class="c"><input type="checkbox" id="c-37936772" checked=""/><div class="controls bullet"><span class="by">reactordev</span><span>|</span><a href="#37937494">prev</a><span>|</span><a href="#37934516">next</a><span>|</span><label class="collapse" for="c-37936772">[-]</label><label class="expand" for="c-37936772">[4 more]</label></div><br/><div class="children"><div class="content">Don’t call it multiplayer, call it multiuser or concurrent user. Player assumes it’s a game. It’s not a game. It’s very very real. We are the agents. Cool project. Collaboration is hard. Synchronicity even harder. This makes steel become butter.</div><br/><div id="37936826" class="c"><input type="checkbox" id="c-37936826" checked=""/><div class="controls bullet"><span class="by">aboodman</span><span>|</span><a href="#37936772">parent</a><span>|</span><a href="#37934516">next</a><span>|</span><label class="collapse" for="c-37936826">[-]</label><label class="expand" for="c-37936826">[3 more]</label></div><br/><div class="children"><div class="content">I like multiplayer because it connotes games and games have worked so hard at this and done so well. Our goal is to be as good as games.<p>But I get your argument too. Naming is hard.</div><br/><div id="37938732" class="c"><input type="checkbox" id="c-37938732" checked=""/><div class="controls bullet"><span class="by">zharknado</span><span>|</span><a href="#37936772">root</a><span>|</span><a href="#37936826">parent</a><span>|</span><a href="#37937985">next</a><span>|</span><label class="collapse" for="c-37938732">[-]</label><label class="expand" for="c-37938732">[1 more]</label></div><br/><div class="children"><div class="content">I think multiplayer is a good name for a different reason. I think it’s a clear and accessible metaphor for how people will interact, i.e. by concurrently working toward a shared goal with a coherent shared state.<p>I don’t think it trivializes the goal or the work being done, it just distinguishes it from parallel non-coordinated use.<p>Also, players are not just for games; the Bard had some thoughts on that. ;)</div><br/></div></div><div id="37937985" class="c"><input type="checkbox" id="c-37937985" checked=""/><div class="controls bullet"><span class="by">reactordev</span><span>|</span><a href="#37936772">root</a><span>|</span><a href="#37936826">parent</a><span>|</span><a href="#37938732">prev</a><span>|</span><a href="#37934516">next</a><span>|</span><label class="collapse" for="c-37937985">[-]</label><label class="expand" for="c-37937985">[1 more]</label></div><br/><div class="children"><div class="content">Two hardest things, Naming and Time synchronization. Thanks for building this.</div><br/></div></div></div></div></div></div><div id="37934516" class="c"><input type="checkbox" id="c-37934516" checked=""/><div class="controls bullet"><span class="by">gfodor</span><span>|</span><a href="#37936772">prev</a><span>|</span><a href="#37939032">next</a><span>|</span><label class="collapse" for="c-37934516">[-]</label><label class="expand" for="c-37934516">[1 more]</label></div><br/><div class="children"><div class="content">The main value prop of CRDTs is they can be used without a central server (for example, in p2p networking, or when offline.) If you&#x27;re choosing between a CRDT or something else like this for your centralized server, you&#x27;re probably not thinking about things properly.<p>Edit: I have no idea why this was downvoted, it&#x27;s true</div><br/></div></div><div id="37939032" class="c"><input type="checkbox" id="c-37939032" checked=""/><div class="controls bullet"><span class="by">equilibrium</span><span>|</span><a href="#37934516">prev</a><span>|</span><a href="#37936108">next</a><span>|</span><label class="collapse" for="c-37939032">[-]</label><label class="expand" for="c-37939032">[1 more]</label></div><br/><div class="children"><div class="content">Is this much different from croquet.io?</div><br/></div></div><div id="37936108" class="c"><input type="checkbox" id="c-37936108" checked=""/><div class="controls bullet"><span class="by">Aeolun</span><span>|</span><a href="#37939032">prev</a><span>|</span><a href="#37934394">next</a><span>|</span><label class="collapse" for="c-37936108">[-]</label><label class="expand" for="c-37936108">[4 more]</label></div><br/><div class="children"><div class="content">What’s the transport for this? Websockets? I have a hard time imagining 120 messages for 100 clients over websocket in a CF Durable Object, but maybe I’m just completely misimagining.</div><br/><div id="37936256" class="c"><input type="checkbox" id="c-37936256" checked=""/><div class="controls bullet"><span class="by">aboodman</span><span>|</span><a href="#37936108">parent</a><span>|</span><a href="#37936282">next</a><span>|</span><label class="collapse" for="c-37936256">[-]</label><label class="expand" for="c-37936256">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s websockets, and yes we do make use of Durable Objects. But we do extensive batching and buffering on top of the raw platform. You can&#x27;t literally send 120 messages &#x2F; second to and from 100 concurrent clients. Actually the math tops out at about 8 :).</div><br/><div id="37936313" class="c"><input type="checkbox" id="c-37936313" checked=""/><div class="controls bullet"><span class="by">asadm</span><span>|</span><a href="#37936108">root</a><span>|</span><a href="#37936256">parent</a><span>|</span><a href="#37936282">next</a><span>|</span><label class="collapse" for="c-37936313">[-]</label><label class="expand" for="c-37936313">[1 more]</label></div><br/><div class="children"><div class="content">Can you explain what are the limitations in Durable Objects?</div><br/></div></div></div></div></div></div><div id="37934394" class="c"><input type="checkbox" id="c-37934394" checked=""/><div class="controls bullet"><span class="by">Jeff_Brown</span><span>|</span><a href="#37936108">prev</a><span>|</span><a href="#37932564">next</a><span>|</span><label class="collapse" for="c-37934394">[-]</label><label class="expand" for="c-37934394">[1 more]</label></div><br/><div class="children"><div class="content">Frameworks for hard problems like this seem like such a good public service. Is there much low-hanging fruit in this area -- common concurrency problems where people are likely to roll their own solutions because it&#x27;s hard to find a preexisting framework?</div><br/></div></div><div id="37932564" class="c"><input type="checkbox" id="c-37932564" checked=""/><div class="controls bullet"><span class="by">pensono</span><span>|</span><a href="#37934394">prev</a><span>|</span><a href="#37937160">next</a><span>|</span><label class="collapse" for="c-37932564">[-]</label><label class="expand" for="c-37932564">[4 more]</label></div><br/><div class="children"><div class="content">This technique is pretty similar to Operational Transformations, except that it requires an authority for serialization and must re-apply any state which is out of sync.</div><br/><div id="37932659" class="c"><input type="checkbox" id="c-37932659" checked=""/><div class="controls bullet"><span class="by">aboodman</span><span>|</span><a href="#37932564">parent</a><span>|</span><a href="#37937160">next</a><span>|</span><label class="collapse" for="c-37932659">[-]</label><label class="expand" for="c-37932659">[3 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not the same thing. OT works by having a discrete set of operations that are known to the system so that they can be reordered properly server-side.<p>Reflect is based on Server Reconciliation: <a href="https:&#x2F;&#x2F;www.gabrielgambetta.com&#x2F;client-side-prediction-server-reconciliation.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.gabrielgambetta.com&#x2F;client-side-prediction-serve...</a>.<p>The critical difference is that Reflect doesn&#x27;t need to know the operations up front. That is what allows developers to provide their own operations, or as we call them &quot;mutators&quot;.</div><br/><div id="37932767" class="c"><input type="checkbox" id="c-37932767" checked=""/><div class="controls bullet"><span class="by">tablatom</span><span>|</span><a href="#37932564">root</a><span>|</span><a href="#37932659">parent</a><span>|</span><a href="#37932987">next</a><span>|</span><label class="collapse" for="c-37932767">[-]</label><label class="expand" for="c-37932767">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m using Replicache in a big project - this simple fact is a big deal. It&#x27;s basically the same coding model that all the front-end frameworks have gravitated to (central store, unidirectional dataflow, mutators separate from data access) but it all stays in sync across the distributed system.</div><br/></div></div><div id="37932987" class="c"><input type="checkbox" id="c-37932987" checked=""/><div class="controls bullet"><span class="by">ggambetta</span><span>|</span><a href="#37932564">root</a><span>|</span><a href="#37932659">parent</a><span>|</span><a href="#37932767">prev</a><span>|</span><a href="#37937160">next</a><span>|</span><label class="collapse" for="c-37932987">[-]</label><label class="expand" for="c-37932987">[1 more]</label></div><br/><div class="children"><div class="content">Well hello there!</div><br/></div></div></div></div></div></div><div id="37937160" class="c"><input type="checkbox" id="c-37937160" checked=""/><div class="controls bullet"><span class="by">bostonvaulter2</span><span>|</span><a href="#37932564">prev</a><span>|</span><a href="#37936176">next</a><span>|</span><label class="collapse" for="c-37937160">[-]</label><label class="expand" for="c-37937160">[1 more]</label></div><br/><div class="children"><div class="content">Very neat project! What is the business model for this project?</div><br/></div></div><div id="37936176" class="c"><input type="checkbox" id="c-37936176" checked=""/><div class="controls bullet"><span class="by">plopz</span><span>|</span><a href="#37937160">prev</a><span>|</span><label class="collapse" for="c-37936176">[-]</label><label class="expand" for="c-37936176">[2 more]</label></div><br/><div class="children"><div class="content">Can this be used to let multiple people edit a very large image concurrently?</div><br/><div id="37936339" class="c"><input type="checkbox" id="c-37936339" checked=""/><div class="controls bullet"><span class="by">aboodman</span><span>|</span><a href="#37936176">parent</a><span>|</span><label class="collapse" for="c-37936339">[-]</label><label class="expand" for="c-37936339">[1 more]</label></div><br/><div class="children"><div class="content">Depends what you mean by very large. Reflect can store up to about 50MB&#x2F;room. For a PNG, that&#x27;s &quot;fairly large&quot; I guess. We plan to increase this limit in the future.<p>You&#x27;d have to split up the image into chunks of about 1KB each, this would be fairly easy to do by pixels. It would be a fun project to try.<p>See <a href="https:&#x2F;&#x2F;hello.reflect.net&#x2F;rooms#data-model" rel="nofollow noreferrer">https:&#x2F;&#x2F;hello.reflect.net&#x2F;rooms#data-model</a> for more information.</div><br/></div></div></div></div></div></div></div></div></div></body></html>