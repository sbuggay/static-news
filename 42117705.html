<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1731834066719" as="style"/><link rel="stylesheet" href="styles.css?v=1731834066719"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.johndcook.com/blog/2024/11/12/find-file-names/">Resolving a mysterious problem with find</a> <span class="domain">(<a href="https://www.johndcook.com">www.johndcook.com</a>)</span></div><div class="subtext"><span>chmaynard</span> | <span>9 comments</span></div><br/><div><div id="42137669" class="c"><input type="checkbox" id="c-42137669" checked=""/><div class="controls bullet"><span class="by">NikkiA</span><span>|</span><a href="#42161721">next</a><span>|</span><label class="collapse" for="c-42137669">[-]</label><label class="expand" for="c-42137669">[1 more]</label></div><br/><div class="children"><div class="content">You&#x27;re using -print0 and surprised that it&#x27;s output has NUL characters between them?</div><br/></div></div><div id="42161721" class="c"><input type="checkbox" id="c-42161721" checked=""/><div class="controls bullet"><span class="by">unsnap_biceps</span><span>|</span><a href="#42137669">prev</a><span>|</span><a href="#42162716">next</a><span>|</span><label class="collapse" for="c-42161721">[-]</label><label class="expand" for="c-42161721">[4 more]</label></div><br/><div class="children"><div class="content">&gt; There may be better solutions [1], but my solution was to insert a call to strings in the pipeline<p>The &quot;right&quot; answer is to switch to using -print rather than -print0<p>-print delimits the values with a newline character (\n)
-print0 delimits the values with a null character (\0)</div><br/><div id="42162002" class="c"><input type="checkbox" id="c-42162002" checked=""/><div class="controls bullet"><span class="by">natmaka</span><span>|</span><a href="#42161721">parent</a><span>|</span><a href="#42162716">next</a><span>|</span><label class="collapse" for="c-42162002">[-]</label><label class="expand" for="c-42162002">[3 more]</label></div><br/><div class="children"><div class="content">Not always perfectly right because an argument containing a filename containing a space character will be interpreted as 2 arguments.</div><br/><div id="42162666" class="c"><input type="checkbox" id="c-42162666" checked=""/><div class="controls bullet"><span class="by">CGamesPlay</span><span>|</span><a href="#42161721">root</a><span>|</span><a href="#42162002">parent</a><span>|</span><a href="#42162023">next</a><span>|</span><label class="collapse" for="c-42162666">[-]</label><label class="expand" for="c-42162666">[1 more]</label></div><br/><div class="children"><div class="content">No it won’t, because none of the output is interpreted as an argument. It’s passed as lines to grep. The second invocation correctly uses print0 and pairs with xargs to understand this.<p>Now, it does fail with filenames that have newlines in them, but who would do such a thing!</div><br/></div></div><div id="42162023" class="c"><input type="checkbox" id="c-42162023" checked=""/><div class="controls bullet"><span class="by">unsnap_biceps</span><span>|</span><a href="#42161721">root</a><span>|</span><a href="#42162002">parent</a><span>|</span><a href="#42162666">prev</a><span>|</span><a href="#42162716">next</a><span>|</span><label class="collapse" for="c-42162023">[-]</label><label class="expand" for="c-42162023">[1 more]</label></div><br/><div class="children"><div class="content">Certainly, which is why I put quotes around right, but for this usage, it&#x27;s not an issue. Find prints the whole path on a single line (including the spaces) and grep (by default) puts the full matched line, so you&#x27;ll still get the full file path regardless of how many spaces are in it.</div><br/></div></div></div></div></div></div><div id="42162716" class="c"><input type="checkbox" id="c-42162716" checked=""/><div class="controls bullet"><span class="by">TheGrassyKnoll</span><span>|</span><a href="#42161721">prev</a><span>|</span><a href="#42162459">next</a><span>|</span><label class="collapse" for="c-42162716">[-]</label><label class="expand" for="c-42162716">[1 more]</label></div><br/><div class="children"><div class="content">I recommend giving ripgrep a try. (it&#x27;s been around awhile now)
  <a href="https:&#x2F;&#x2F;github.com&#x2F;BurntSushi&#x2F;ripgrep">https:&#x2F;&#x2F;github.com&#x2F;BurntSushi&#x2F;ripgrep</a></div><br/></div></div><div id="42162459" class="c"><input type="checkbox" id="c-42162459" checked=""/><div class="controls bullet"><span class="by">cess11</span><span>|</span><a href="#42162716">prev</a><span>|</span><a href="#42161772">next</a><span>|</span><label class="collapse" for="c-42162459">[-]</label><label class="expand" for="c-42162459">[1 more]</label></div><br/><div class="children"><div class="content">Pretty convoluted, no?<p>I would likely use -exec:<p><pre><code>   $ mkdir dir.py
   $ echo blah &gt;&gt; blah.py
   $ find . -type f -name &quot;*.py&quot; -exec grep -i BLAH {} \;
   blah
   $
</code></pre>
Edit: Ah, right, he&#x27;s filtering on filenames. That&#x27;s what -iname is for. The man file is quite good.</div><br/></div></div><div id="42161772" class="c"><input type="checkbox" id="c-42161772" checked=""/><div class="controls bullet"><span class="by">naruhodo</span><span>|</span><a href="#42162459">prev</a><span>|</span><label class="collapse" for="c-42161772">[-]</label><label class="expand" for="c-42161772">[1 more]</label></div><br/><div class="children"><div class="content">Instead of `find -name &#x27;*.py&#x27; | grep -i &quot;$PATTERN&quot;` you can use `find -iname &quot;*${PATTERN}*.py&quot;` for case-insensitive glob-matched filenames, or mess around with regexes on the whole path with `find -iregex &quot;$REGEX&quot;`.<p>And yeah, why would you ASCII NUL terminate each filename output by `find` by using `-print0`? I mean, who adds quotes, backslashes or whitespace to their Python source file names?</div><br/></div></div></div></div></div></div></div></body></html>