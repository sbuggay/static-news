<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1730365268680" as="style"/><link rel="stylesheet" href="styles.css?v=1730365268680"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/jeromedalbert/rubocop-obsession">Rubocop-obsession: RuboCop extension focused on higher-level concepts</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>thunderbong</span> | <span>27 comments</span></div><br/><div><div id="41999884" class="c"><input type="checkbox" id="c-41999884" checked=""/><div class="controls bullet"><span class="by">xtracto</span><span>|</span><a href="#42000999">next</a><span>|</span><label class="collapse" for="c-41999884">[-]</label><label class="expand" for="c-41999884">[4 more]</label></div><br/><div class="children"><div class="content">One of the things i miss the most from developing in ruby is the code quality instrumentation: metric-fu, reek, rubocop and lots of other gems that allowed us (in a previous ruby shop) understand and monitor the quality of our code like ABC, Cyclomatic complexity, duplicated code, etc).<p>Now in Typescript, I haven&#x27;t found a lot of tools to calculate,visualize and track these stats.  Metric-fu was amazing.</div><br/><div id="42001169" class="c"><input type="checkbox" id="c-42001169" checked=""/><div class="controls bullet"><span class="by">MrJohz</span><span>|</span><a href="#41999884">parent</a><span>|</span><a href="#42002148">next</a><span>|</span><label class="collapse" for="c-42001169">[-]</label><label class="expand" for="c-42001169">[1 more]</label></div><br/><div class="children"><div class="content">You can get a lot of mileage out of ESLint + typescript-ESLint + various other plugins. It&#x27;s more of a &quot;choose your own adventure&quot; kind of experience, but the defaults are a good start, and if you&#x27;re looking for cyclomatic complexity and all that jazz, there&#x27;s various plugins that can calculate that. And the typescript ESLint plugin is great because it uses the types as part of the hints, which is great for finding places where you no longer need optional chaining, or where a condition is always true&#x2F;false because you forgot what types things were.<p>That said, I tend to take a much more lean approach to linting these days. I try to only include lints that are actionable, likely to lead to real bugs, and have no false positives. Everything else feels like it&#x27;s better handled in code review. If you don&#x27;t know why your function is too complex and difficult to read, I don&#x27;t want you to rewrite it just to satisfy a robot that&#x27;s following arbitrary rules! I want to be able to have a discussion with you about proper techniques for splitting apart code.<p>But there&#x27;s definitely people who go the other way entirely and build incredibly strict ESLint configurations, so looking for those might help you if that&#x27;s what you want.</div><br/></div></div><div id="42002148" class="c"><input type="checkbox" id="c-42002148" checked=""/><div class="controls bullet"><span class="by">erulabs</span><span>|</span><a href="#41999884">parent</a><span>|</span><a href="#42001169">prev</a><span>|</span><a href="#42000487">next</a><span>|</span><label class="collapse" for="c-42002148">[-]</label><label class="expand" for="c-42002148">[1 more]</label></div><br/><div class="children"><div class="content">I wonder if anyone here has a good set of Typescript&#x2F;ESlint addons to suggest? I also miss my duplicate code alert from Ruby!</div><br/></div></div><div id="42000487" class="c"><input type="checkbox" id="c-42000487" checked=""/><div class="controls bullet"><span class="by">Alifatisk</span><span>|</span><a href="#41999884">parent</a><span>|</span><a href="#42002148">prev</a><span>|</span><a href="#42000999">next</a><span>|</span><label class="collapse" for="c-42000487">[-]</label><label class="expand" for="c-42000487">[1 more]</label></div><br/><div class="children"><div class="content">Don&#x27;t forget about Brakeman!</div><br/></div></div></div></div><div id="42000999" class="c"><input type="checkbox" id="c-42000999" checked=""/><div class="controls bullet"><span class="by">imoverclocked</span><span>|</span><a href="#41999884">prev</a><span>|</span><a href="#42001006">next</a><span>|</span><label class="collapse" for="c-42000999">[-]</label><label class="expand" for="c-42000999">[3 more]</label></div><br/><div class="children"><div class="content">It’s been quite some time since I’ve used Rubocop but I did fight an uphill battle to get it into place. One of the things I had a difficult time explaining was that rules subtly interact with each other. When one rule makes a change, it might simplify something such that another rule can then also make a change. Once I enabled enough rules, there were some pretty impressive chains that were whittled down to almost nothing… but the same application of those rules elsewhere caused hemming and hawing by the naysayers.<p>I think the best thing that these tools give, above all else, is a way to settle petty opinions in a team. It’s why there is value in rules that either conflict with each other or are configurable so as to meet the expectations of a given team.</div><br/><div id="42001563" class="c"><input type="checkbox" id="c-42001563" checked=""/><div class="controls bullet"><span class="by">RangerScience</span><span>|</span><a href="#42000999">parent</a><span>|</span><a href="#42001824">next</a><span>|</span><label class="collapse" for="c-42001563">[-]</label><label class="expand" for="c-42001563">[1 more]</label></div><br/><div class="children"><div class="content">Yep. I introduced Rubocop at a past gig… only to watch my colleague write <i>worse</i> code playing whackamole trying to adhere to the rules.<p>I kept telling him that the whackamole is a sign to rework things at a higher level - that the Rubocop rule catches symptoms, and that he needed to address the <i>cause</i>, but…<p>PS - to be clear, I love Rubocop and swear by it. In that circumstance, I needed to introduce it differently, is all.</div><br/></div></div><div id="42001824" class="c"><input type="checkbox" id="c-42001824" checked=""/><div class="controls bullet"><span class="by">Gigachad</span><span>|</span><a href="#42000999">parent</a><span>|</span><a href="#42001563">prev</a><span>|</span><a href="#42001006">next</a><span>|</span><label class="collapse" for="c-42001824">[-]</label><label class="expand" for="c-42001824">[1 more]</label></div><br/><div class="children"><div class="content">&gt; is a way to settle petty opinions in a team.<p>Yeah this is huge. So often I get my PRs rejected because one dev has their own personal preference for formatting something. With Rubocop I can tell them to go submit a PR themselves to make that preference a rule and we can all discuss it and enforce it &#x2F; autoformat it going forward. But for now, it won&#x27;t be blocking my change going out.</div><br/></div></div></div></div><div id="42001006" class="c"><input type="checkbox" id="c-42001006" checked=""/><div class="controls bullet"><span class="by">block_dagger</span><span>|</span><a href="#42000999">prev</a><span>|</span><a href="#42000676">next</a><span>|</span><label class="collapse" for="c-42001006">[-]</label><label class="expand" for="c-42001006">[2 more]</label></div><br/><div class="children"><div class="content">Hopefully rubocop-rails-omakase [1] will pull in stuff like this. I&#x27;ve gone from custom Rubocop rules in various projects to just using rubocop-rails-omakase, which finally feels like a consensus of sorts. I think Standard [2] is harmfully redundant, personally.<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;rails&#x2F;rubocop-rails-omakase">https:&#x2F;&#x2F;github.com&#x2F;rails&#x2F;rubocop-rails-omakase</a>
[2] <a href="https:&#x2F;&#x2F;github.com&#x2F;standardrb&#x2F;standard">https:&#x2F;&#x2F;github.com&#x2F;standardrb&#x2F;standard</a></div><br/><div id="42001177" class="c"><input type="checkbox" id="c-42001177" checked=""/><div class="controls bullet"><span class="by">caseyohara</span><span>|</span><a href="#42001006">parent</a><span>|</span><a href="#42000676">next</a><span>|</span><label class="collapse" for="c-42001177">[-]</label><label class="expand" for="c-42001177">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m curious why you think Standard is &quot;harmfully redundant&quot;?</div><br/></div></div></div></div><div id="42000676" class="c"><input type="checkbox" id="c-42000676" checked=""/><div class="controls bullet"><span class="by">codesnik</span><span>|</span><a href="#42001006">prev</a><span>|</span><a href="#42002372">next</a><span>|</span><label class="collapse" for="c-42000676">[-]</label><label class="expand" for="c-42000676">[11 more]</label></div><br/><div class="children"><div class="content">Nice. Now we can probably ask to move there half of the too nosy rubocop rules from the main rubocop repo. And then to never install rubocop-obsession!</div><br/><div id="42000821" class="c"><input type="checkbox" id="c-42000821" checked=""/><div class="controls bullet"><span class="by">bioneuralnet</span><span>|</span><a href="#42000676">parent</a><span>|</span><a href="#42002372">next</a><span>|</span><label class="collapse" for="c-42000821">[-]</label><label class="expand" for="c-42000821">[10 more]</label></div><br/><div class="children"><div class="content">Right? I seem to be the only high-level SWE at my company who hates RuboCop. Some of it&#x27;s fine (e.g. no globals, use x.count { ... } instead of x.select { ... }.count). But so many of the rules are obsessed with trivial details like the &quot;right&quot; style of blocks to use (do vs {}) or &quot;&quot; vs &#x27;&#x27; for strings. Pointless busy work. I think the dumbest is requiring &quot;def (x=true)&quot; over &quot;def (x = true)&quot;. Seriously, why could that possibly matter??</div><br/><div id="42001582" class="c"><input type="checkbox" id="c-42001582" checked=""/><div class="controls bullet"><span class="by">viraptor</span><span>|</span><a href="#42000676">root</a><span>|</span><a href="#42000821">parent</a><span>|</span><a href="#42000918">next</a><span>|</span><label class="collapse" for="c-42001582">[-]</label><label class="expand" for="c-42001582">[1 more]</label></div><br/><div class="children"><div class="content">I see that as: it doesn&#x27;t matter, therefore let&#x27;s do one consistent thing and you&#x27;ll never get a person saying &quot;this should be x=true&quot;. RoboCop forces it one way and I never have to have a syntax&#x2F;formatting discussion again.<p>You may think it really really doesn&#x27;t matter, to the point that whatever form should be accepted. But then, would you accept my &quot;def  foo (x  =true ,y= false  )&quot;? I&#x27;ve seen enough PRs with that kind of code to know that people will submit it one day.</div><br/></div></div><div id="42000918" class="c"><input type="checkbox" id="c-42000918" checked=""/><div class="controls bullet"><span class="by">skissane</span><span>|</span><a href="#42000676">root</a><span>|</span><a href="#42000821">parent</a><span>|</span><a href="#42001582">prev</a><span>|</span><a href="#42003393">next</a><span>|</span><label class="collapse" for="c-42000918">[-]</label><label class="expand" for="c-42000918">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I think the dumbest is requiring &quot;def (x=true)&quot; over &quot;def (x = true)&quot;. Seriously, why could that possibly matter??<p>For Python, I use ruff to autoreformat my code into a consistent style. The CI pipeline fails the PR if the style is violated it. Fixing it is a one-liner. Actually, if you use VSCode’s ruff extension, a zero-liner, since it auto-formats on save.<p>For Java, I use Diffplug Spotless for a similar experience.<p>One advantage of forcing the code to be auto-formatted, is it makes diffs cleaner - you eliminate diffs where someone just changed the code style, since the code style never changes.</div><br/></div></div><div id="42003393" class="c"><input type="checkbox" id="c-42003393" checked=""/><div class="controls bullet"><span class="by">wutwutwat</span><span>|</span><a href="#42000676">root</a><span>|</span><a href="#42000821">parent</a><span>|</span><a href="#42000918">prev</a><span>|</span><a href="#42000914">next</a><span>|</span><label class="collapse" for="c-42003393">[-]</label><label class="expand" for="c-42003393">[3 more]</label></div><br/><div class="children"><div class="content">`””` vs `&#x27;&#x27;` isn’t just a style rule. In Ruby there are performance implications with double quoted strings. Strings in double quotes are interpolated for variable substitution, whereas strings in single quotes are processed literally, no variable replacement overhead. Is it going to matter for most code? Probably not, but good to know nonetheless imo.</div><br/><div id="42003897" class="c"><input type="checkbox" id="c-42003897" checked=""/><div class="controls bullet"><span class="by">tomstuart</span><span>|</span><a href="#42000676">root</a><span>|</span><a href="#42003393">parent</a><span>|</span><a href="#42000914">next</a><span>|</span><label class="collapse" for="c-42003897">[-]</label><label class="expand" for="c-42003897">[2 more]</label></div><br/><div class="children"><div class="content">This sounds intuitively true, but it’s a (very persistent) myth: <a href="https:&#x2F;&#x2F;www.viget.com&#x2F;articles&#x2F;just-use-double-quoted-ruby-strings&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.viget.com&#x2F;articles&#x2F;just-use-double-quoted-ruby-s...</a></div><br/><div id="42004287" class="c"><input type="checkbox" id="c-42004287" checked=""/><div class="controls bullet"><span class="by">wutwutwat</span><span>|</span><a href="#42000676">root</a><span>|</span><a href="#42003897">parent</a><span>|</span><a href="#42000914">next</a><span>|</span><label class="collapse" for="c-42004287">[-]</label><label class="expand" for="c-42004287">[1 more]</label></div><br/><div class="children"><div class="content">TIL. Thanks</div><br/></div></div></div></div></div></div><div id="42000914" class="c"><input type="checkbox" id="c-42000914" checked=""/><div class="controls bullet"><span class="by">hrdwdmrbl</span><span>|</span><a href="#42000676">root</a><span>|</span><a href="#42000821">parent</a><span>|</span><a href="#42003393">prev</a><span>|</span><a href="#42002372">next</a><span>|</span><label class="collapse" for="c-42000914">[-]</label><label class="expand" for="c-42000914">[4 more]</label></div><br/><div class="children"><div class="content">Why does it matter when there is auto-fix-on-save? I just write whatever, hit ctrl+s and the code is fixed. The result: The code is &quot;fixed&quot; based on whatever rule and it doesn&#x27;t cost me a thing. I don&#x27;t think about it and I don&#x27;t lift a finger.<p>But I do personally appreciate the tidiness of code-consistency.</div><br/><div id="42000925" class="c"><input type="checkbox" id="c-42000925" checked=""/><div class="controls bullet"><span class="by">bioneuralnet</span><span>|</span><a href="#42000676">root</a><span>|</span><a href="#42000914">parent</a><span>|</span><a href="#42002372">next</a><span>|</span><label class="collapse" for="c-42000925">[-]</label><label class="expand" for="c-42000925">[3 more]</label></div><br/><div class="children"><div class="content">That&#x27;s my argument - if we collectively care, it should happen automatically. Alas, no one else seems bothered by the status quo.</div><br/><div id="42001837" class="c"><input type="checkbox" id="c-42001837" checked=""/><div class="controls bullet"><span class="by">Gigachad</span><span>|</span><a href="#42000676">root</a><span>|</span><a href="#42000925">parent</a><span>|</span><a href="#42000950">next</a><span>|</span><label class="collapse" for="c-42001837">[-]</label><label class="expand" for="c-42001837">[1 more]</label></div><br/><div class="children"><div class="content">Most of these trivial rubocop rules autoformat so it doesn&#x27;t bother anyone. The ones that don&#x27;t are usually odd things like code that doesn&#x27;t run or things with the same name, which can&#x27;t be safely autofixed.</div><br/></div></div><div id="42000950" class="c"><input type="checkbox" id="c-42000950" checked=""/><div class="controls bullet"><span class="by">hrdwdmrbl</span><span>|</span><a href="#42000676">root</a><span>|</span><a href="#42000925">parent</a><span>|</span><a href="#42001837">prev</a><span>|</span><a href="#42002372">next</a><span>|</span><label class="collapse" for="c-42000950">[-]</label><label class="expand" for="c-42000950">[1 more]</label></div><br/><div class="children"><div class="content">Some of these rules do support autocorrect</div><br/></div></div></div></div></div></div></div></div></div></div><div id="42002372" class="c"><input type="checkbox" id="c-42002372" checked=""/><div class="controls bullet"><span class="by">stevebmark</span><span>|</span><a href="#42000676">prev</a><span>|</span><a href="#42000495">next</a><span>|</span><label class="collapse" for="c-42002372">[-]</label><label class="expand" for="c-42002372">[2 more]</label></div><br/><div class="children"><div class="content">Rubocop is one of the worst Ruby tools there is. Flog and reek are also unhelpful, but Rubocop is style nonsense that doesn’t belong in a linter. The ESLint community used to be big on useless opinion based rule overload, until everyone realized how bad of an idea it was.</div><br/><div id="42002381" class="c"><input type="checkbox" id="c-42002381" checked=""/><div class="controls bullet"><span class="by">leoh</span><span>|</span><a href="#42002372">parent</a><span>|</span><a href="#42000495">next</a><span>|</span><label class="collapse" for="c-42002381">[-]</label><label class="expand" for="c-42002381">[1 more]</label></div><br/><div class="children"><div class="content">Can you be kore specific? I haven&#x27;t used it for a few years but found it yo be a perfectly competent and helpful linter at minimum.</div><br/></div></div></div></div><div id="42000495" class="c"><input type="checkbox" id="c-42000495" checked=""/><div class="controls bullet"><span class="by">Alifatisk</span><span>|</span><a href="#42002372">prev</a><span>|</span><a href="#42000404">next</a><span>|</span><label class="collapse" for="c-42000495">[-]</label><label class="expand" for="c-42000495">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m getting this right away!</div><br/></div></div><div id="41999825" class="c"><input type="checkbox" id="c-41999825" checked=""/><div class="controls bullet"><span class="by">henning</span><span>|</span><a href="#42000404">prev</a><span>|</span><label class="collapse" for="c-41999825">[-]</label><label class="expand" for="c-41999825">[2 more]</label></div><br/><div class="children"><div class="content">The world runs on code that violates some or all of these rules. Following them won&#x27;t fix any of the problems they have. It doesn&#x27;t matter.</div><br/><div id="42000937" class="c"><input type="checkbox" id="c-42000937" checked=""/><div class="controls bullet"><span class="by">hrdwdmrbl</span><span>|</span><a href="#41999825">parent</a><span>|</span><label class="collapse" for="c-42000937">[-]</label><label class="expand" for="c-42000937">[1 more]</label></div><br/><div class="children"><div class="content">It does help at some margin to make code more readable. Humans just aren&#x27;t that great at reading and understanding code. It has been said: &quot;Write for humans, not computers because computers will understand what you wrote no matter how badly written&quot;. So if you&#x27;re writing code on a team, do your co-workers and your future-self a favour and write code that&#x27;s easy to read. It won&#x27;t run any better or with fewer bugs, but it will be easier to understand later, easier to be understood by others, and &quot;wishful thinking here&quot;: easier to debug.</div><br/></div></div></div></div></div></div></div></div></div></body></html>