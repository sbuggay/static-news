<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1703408453838" as="style"/><link rel="stylesheet" href="styles.css?v=1703408453838"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://railsatscale.com/2023-12-19-irb-for-ruby-3-3/">Unveiling the big leap in Ruby 3.3&#x27;s IRB</a> <span class="domain">(<a href="https://railsatscale.com">railsatscale.com</a>)</span></div><div class="subtext"><span>todsacerdoti</span> | <span>27 comments</span></div><br/><div><div id="38751096" class="c"><input type="checkbox" id="c-38751096" checked=""/><div class="controls bullet"><span class="by">ryanseys</span><span>|</span><a href="#38751545">next</a><span>|</span><label class="collapse" for="c-38751096">[-]</label><label class="expand" for="c-38751096">[2 more]</label></div><br/><div class="children"><div class="content">IRB type completion comes as a result of a chain of events which starts from the incredible work done by Kevin Newton (et al) to write a new canonical Ruby parser called Prism in C99 with no dependencies [1].<p>With Prism, you can then create tool suites like syntax_tree [2], which then leads Prettier formatters [3], a new Ruby LSP [4], which unlocks a new Ruby LSP VS Code extension [5], not to mention a laundry list of other gems like Rubocop and of course Ruby itself that will benefit from a faster and more maintainable Ruby parser.<p>It&#x27;s a beautiful illustration of the power of questioning conventions, going back to first principles to uncover better solutions to previously solved problems, whose new solutions create new capabilities which unlocks the ability to solve new problems.<p>[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;ruby&#x2F;prism">https:&#x2F;&#x2F;github.com&#x2F;ruby&#x2F;prism</a>
[2]: <a href="https:&#x2F;&#x2F;github.com&#x2F;ruby-syntax-tree&#x2F;syntax_tree">https:&#x2F;&#x2F;github.com&#x2F;ruby-syntax-tree&#x2F;syntax_tree</a>
[3]: <a href="https:&#x2F;&#x2F;github.com&#x2F;prettier&#x2F;plugin-ruby">https:&#x2F;&#x2F;github.com&#x2F;prettier&#x2F;plugin-ruby</a>
[4]: <a href="https:&#x2F;&#x2F;github.com&#x2F;Shopify&#x2F;ruby-lsp">https:&#x2F;&#x2F;github.com&#x2F;Shopify&#x2F;ruby-lsp</a>
[5]: <a href="https:&#x2F;&#x2F;marketplace.visualstudio.com&#x2F;items?itemName=Shopify.ruby-lsp" rel="nofollow noreferrer">https:&#x2F;&#x2F;marketplace.visualstudio.com&#x2F;items?itemName=Shopify....</a></div><br/><div id="38751744" class="c"><input type="checkbox" id="c-38751744" checked=""/><div class="controls bullet"><span class="by">boundlessdreamz</span><span>|</span><a href="#38751096">parent</a><span>|</span><a href="#38751545">next</a><span>|</span><label class="collapse" for="c-38751744">[-]</label><label class="expand" for="c-38751744">[1 more]</label></div><br/><div class="children"><div class="content">Didn&#x27;t syntax_tree come before Prism?</div><br/></div></div></div></div><div id="38751545" class="c"><input type="checkbox" id="c-38751545" checked=""/><div class="controls bullet"><span class="by">nomilk</span><span>|</span><a href="#38751096">prev</a><span>|</span><a href="#38750578">next</a><span>|</span><label class="collapse" for="c-38751545">[-]</label><label class="expand" for="c-38751545">[1 more]</label></div><br/><div class="children"><div class="content">&gt; In Ruby 3.1, IRB introduced the autocompletion feature. While it has proven to be a useful feature for many users, it also came with some issues that were hard to overlook &lt;lists several&gt;<p>Really appreciate the attention to detail. I know little of ruby&#x27;s internals, so usability flaws like those mentioned are difficult to put into google and try to fix (some usability hiccups are not due to bugs but due to misconfigurations - i.e. something I&#x27;ve set up incorrectly). These little quality of life improvements make a world of difference when using IRB for hours to get stuff done. Thank you to all those that make ruby awesome!</div><br/></div></div><div id="38750578" class="c"><input type="checkbox" id="c-38750578" checked=""/><div class="controls bullet"><span class="by">heads</span><span>|</span><a href="#38751545">prev</a><span>|</span><a href="#38751713">next</a><span>|</span><label class="collapse" for="c-38750578">[-]</label><label class="expand" for="c-38750578">[2 more]</label></div><br/><div class="children"><div class="content">It’s cool to see code in an interpreted language being edited at the repl.  Ruby’s style of building everything at runtime using the language itself has always felt delightfully consistent, but also very hard to reason about with static analysis — the usually tool for helping developers in their IDEa and LSP clients.<p>Far nicer to just execute the program and put a breakpoint at the cursor…<p><pre><code>  COLORS.each{ |c|
    define_sheep_class(c)
  }
  sheep1 = Sheep::Bl|
</code></pre>
This feels like the <i>only</i> way my editor stands a chance of completing this to <i>Sheep::Black</i>.  Is this how Ruby IDE support works (e.g. in the JetBrains product.)</div><br/><div id="38752150" class="c"><input type="checkbox" id="c-38752150" checked=""/><div class="controls bullet"><span class="by">djur</span><span>|</span><a href="#38750578">parent</a><span>|</span><a href="#38751713">next</a><span>|</span><label class="collapse" for="c-38752150">[-]</label><label class="expand" for="c-38752150">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s too dangerous to execute the code to provide completion support. IDE support has to rely on static analysis.</div><br/></div></div></div></div><div id="38751713" class="c"><input type="checkbox" id="c-38751713" checked=""/><div class="controls bullet"><span class="by">block_dagger</span><span>|</span><a href="#38750578">prev</a><span>|</span><a href="#38751285">next</a><span>|</span><label class="collapse" for="c-38751713">[-]</label><label class="expand" for="c-38751713">[1 more]</label></div><br/><div class="children"><div class="content">&gt; we plan to provide official APIs and relevant documentation to help libraries and applications extend IRB<p>Bravo Ruby team!</div><br/></div></div><div id="38751285" class="c"><input type="checkbox" id="c-38751285" checked=""/><div class="controls bullet"><span class="by">buf</span><span>|</span><a href="#38751713">prev</a><span>|</span><a href="#38750934">next</a><span>|</span><label class="collapse" for="c-38751285">[-]</label><label class="expand" for="c-38751285">[2 more]</label></div><br/><div class="children"><div class="content">Am I the only one who never actually types in IRB?<p>I edit directly inside my code and use tmux&#x27;s send-to-pane to send my current line(s) to IRB. Ex: <a href="https:&#x2F;&#x2F;cln.sh&#x2F;xXNlf51m" rel="nofollow noreferrer">https:&#x2F;&#x2F;cln.sh&#x2F;xXNlf51m</a></div><br/><div id="38751310" class="c"><input type="checkbox" id="c-38751310" checked=""/><div class="controls bullet"><span class="by">w-ll</span><span>|</span><a href="#38751285">parent</a><span>|</span><a href="#38750934">next</a><span>|</span><label class="collapse" for="c-38751310">[-]</label><label class="expand" for="c-38751310">[1 more]</label></div><br/><div class="children"><div class="content">Yea im confused.  I use IRB all the time to test some one off stuff, and !reload.  but im not editing in the IRB or docker container on the proxmox vm for locacl dev.</div><br/></div></div></div></div><div id="38750934" class="c"><input type="checkbox" id="c-38750934" checked=""/><div class="controls bullet"><span class="by">lbrito</span><span>|</span><a href="#38751285">prev</a><span>|</span><a href="#38751161">next</a><span>|</span><label class="collapse" for="c-38750934">[-]</label><label class="expand" for="c-38750934">[2 more]</label></div><br/><div class="children"><div class="content">Seems like this could replace pry and byebug very well. Nice!</div><br/><div id="38752159" class="c"><input type="checkbox" id="c-38752159" checked=""/><div class="controls bullet"><span class="by">vr46</span><span>|</span><a href="#38750934">parent</a><span>|</span><a href="#38751161">next</a><span>|</span><label class="collapse" for="c-38752159">[-]</label><label class="expand" for="c-38752159">[1 more]</label></div><br/><div class="children"><div class="content">I’m a version away from current events and playing catch up, hoping that these new improvements can replace pry!</div><br/></div></div></div></div><div id="38751161" class="c"><input type="checkbox" id="c-38751161" checked=""/><div class="controls bullet"><span class="by">stjohnswarts</span><span>|</span><a href="#38750934">prev</a><span>|</span><a href="#38750596">next</a><span>|</span><label class="collapse" for="c-38751161">[-]</label><label class="expand" for="c-38751161">[15 more]</label></div><br/><div class="children"><div class="content">I really wish ruby would have become the biggest scripting language rather than python.</div><br/><div id="38751277" class="c"><input type="checkbox" id="c-38751277" checked=""/><div class="controls bullet"><span class="by">nickhodge</span><span>|</span><a href="#38751161">parent</a><span>|</span><a href="#38751353">next</a><span>|</span><label class="collapse" for="c-38751277">[-]</label><label class="expand" for="c-38751277">[1 more]</label></div><br/><div class="children"><div class="content">... and JavaScript</div><br/></div></div><div id="38751353" class="c"><input type="checkbox" id="c-38751353" checked=""/><div class="controls bullet"><span class="by">Falmarri</span><span>|</span><a href="#38751161">parent</a><span>|</span><a href="#38751277">prev</a><span>|</span><a href="#38750596">next</a><span>|</span><label class="collapse" for="c-38751353">[-]</label><label class="expand" for="c-38751353">[13 more]</label></div><br/><div class="children"><div class="content">Gross. Python is a million times better than ruby to read and write</div><br/><div id="38751560" class="c"><input type="checkbox" id="c-38751560" checked=""/><div class="controls bullet"><span class="by">bogota</span><span>|</span><a href="#38751161">root</a><span>|</span><a href="#38751353">parent</a><span>|</span><a href="#38751361">next</a><span>|</span><label class="collapse" for="c-38751560">[-]</label><label class="expand" for="c-38751560">[1 more]</label></div><br/><div class="children"><div class="content">And also produces so much waste since almost no one writing python thinks at all about performance leading to some of the dumbest looking architectures i have seen to scale up to even a small amount of requests.</div><br/></div></div><div id="38751361" class="c"><input type="checkbox" id="c-38751361" checked=""/><div class="controls bullet"><span class="by">qup</span><span>|</span><a href="#38751161">root</a><span>|</span><a href="#38751353">parent</a><span>|</span><a href="#38751560">prev</a><span>|</span><a href="#38751548">next</a><span>|</span><label class="collapse" for="c-38751361">[-]</label><label class="expand" for="c-38751361">[1 more]</label></div><br/><div class="children"><div class="content">I believe that&#x27;ll be a minority opinion.<p>I&#x27;m a fan of both languages.</div><br/></div></div><div id="38751548" class="c"><input type="checkbox" id="c-38751548" checked=""/><div class="controls bullet"><span class="by">oglop</span><span>|</span><a href="#38751161">root</a><span>|</span><a href="#38751353">parent</a><span>|</span><a href="#38751361">prev</a><span>|</span><a href="#38752029">next</a><span>|</span><label class="collapse" for="c-38751548">[-]</label><label class="expand" for="c-38751548">[1 more]</label></div><br/><div class="children"><div class="content">To Ruby’s credit, they foresaw what others bolted on years if not decades after.<p>Remember Python didn’t start with being fully object oriented, everything is not exactly an object, they bolted on the useful functional stuff later (like every language has now after a weird period of people crapping on FP for some reason) and to top it off bundler, and Ruby version manager again were just largely copied over to Python as pip and venv. I like both languages, and I say this after getting schooled a few times about great things I thought Python did that I was a few times rather embarrassingly shown to have just been Ruby ideas picked up by others.<p>I’ll give you the language looks a bit funny and I’m not saying it’s better or anything, I work in Ruby and am all too aware of the warts. Just trying to share what I’ve learned that they did well because it’s a good and thoughtful community.</div><br/></div></div><div id="38752029" class="c"><input type="checkbox" id="c-38752029" checked=""/><div class="controls bullet"><span class="by">realusername</span><span>|</span><a href="#38751161">root</a><span>|</span><a href="#38751353">parent</a><span>|</span><a href="#38751548">prev</a><span>|</span><a href="#38751515">next</a><span>|</span><label class="collapse" for="c-38752029">[-]</label><label class="expand" for="c-38752029">[1 more]</label></div><br/><div class="children"><div class="content">I never really liked Python much personally, I think it sits at an uncomfortable spot where it&#x27;s still too verbose compared to other dynamic languages but not performant enough compared to static languages.<p>If I cared more about the expressiveness and the speed of prototyping at the expense of everything else, I would rather use Ruby which has much more stuff built-in and I&#x27;d accept to pay the price of its runtime penalty.<p>But if I cared more about performance, I&#x27;ll rather use a static language like Go or Rust.<p>If I have to pay the dynamic language performance &amp; maintenance tax, it needs to be worth it and I need to get some big advantages in return, otherwise I&#x27;d just use Go.</div><br/></div></div><div id="38751515" class="c"><input type="checkbox" id="c-38751515" checked=""/><div class="controls bullet"><span class="by">anko</span><span>|</span><a href="#38751161">root</a><span>|</span><a href="#38751353">parent</a><span>|</span><a href="#38752029">prev</a><span>|</span><a href="#38751715">next</a><span>|</span><label class="collapse" for="c-38751515">[-]</label><label class="expand" for="c-38751515">[7 more]</label></div><br/><div class="children"><div class="content">&gt; Gross. Python is a million times better than ruby to read and write<p>why do you think that?</div><br/><div id="38751580" class="c"><input type="checkbox" id="c-38751580" checked=""/><div class="controls bullet"><span class="by">Demiurge</span><span>|</span><a href="#38751161">root</a><span>|</span><a href="#38751515">parent</a><span>|</span><a href="#38751715">next</a><span>|</span><label class="collapse" for="c-38751580">[-]</label><label class="expand" for="c-38751580">[6 more]</label></div><br/><div class="children"><div class="content">I wouldn’t be so harsh, as to call it gross, but I also much prefer Python, because Ruby reminds me of Perl. It feels clever, but not in a way that I expect to shorten its BNF. It still bugs me a bit, that ruby has pascals ‘end’, and Python uses whitespace, but it worked out in the real world.<p>Given just the syntax, I would always recommend Python as a first language to scientists in a lab, rather than ruby. The code just reads and writes itself better, without special characters.<p>But, I think it’s not fair to call Ruby gross, given some people love C++, php, bash, JavaScript… I’d take ruby over many languages, given a choice.</div><br/><div id="38751638" class="c"><input type="checkbox" id="c-38751638" checked=""/><div class="controls bullet"><span class="by">drdaeman</span><span>|</span><a href="#38751161">root</a><span>|</span><a href="#38751580">parent</a><span>|</span><a href="#38752171">next</a><span>|</span><label class="collapse" for="c-38751638">[-]</label><label class="expand" for="c-38751638">[1 more]</label></div><br/><div class="children"><div class="content">Syntax is such a minor detail, I don&#x27;t know why people care about it so much (unless it&#x27;s APL or something similarly exotic).<p>The much bigger elephant in the room is the semantics. My personal pet peeve is that Ruby, just like Perl or C, doesn&#x27;t have any sort of file-based isolation. While importing something in Python normally doesn&#x27;t mess up any namespace except for the stuff you&#x27;ve just imported, Ruby basically leaves this to programmers&#x27; and they create monstrosities where one require statement can do way too much magic to my liking. And while there are some libraries and frameworks that are closer to Python in spirit (&quot;explicit is better than implicit&quot;), Rails is something that really throws me off as most things just magically happen to work with some incantation that seemingly comes out of thin air.<p>This new autocomplete thing may be a real breakthrough for people who learn by getting their hands dirty and trying to write something, probing around the available methods and functions to find the appropriate one. If it can suggest what&#x27;s possible&#x2F;available, a lot of the magic may fade away and become proper, explainable hard science.<p>Just a personal opinion, of course.</div><br/></div></div><div id="38752171" class="c"><input type="checkbox" id="c-38752171" checked=""/><div class="controls bullet"><span class="by">djur</span><span>|</span><a href="#38751161">root</a><span>|</span><a href="#38751580">parent</a><span>|</span><a href="#38751638">prev</a><span>|</span><a href="#38751647">next</a><span>|</span><label class="collapse" for="c-38752171">[-]</label><label class="expand" for="c-38752171">[1 more]</label></div><br/><div class="children"><div class="content">What &quot;special characters&quot; are you talking about in Ruby? My impression is that Ruby and Python are roughly equivalent in terms of non-alphanumeric characters used in syntax.</div><br/></div></div><div id="38751647" class="c"><input type="checkbox" id="c-38751647" checked=""/><div class="controls bullet"><span class="by">ArtemZ</span><span>|</span><a href="#38751161">root</a><span>|</span><a href="#38751580">parent</a><span>|</span><a href="#38752171">prev</a><span>|</span><a href="#38751715">next</a><span>|</span><label class="collapse" for="c-38751647">[-]</label><label class="expand" for="c-38751647">[3 more]</label></div><br/><div class="children"><div class="content">From my perspective (DevOps&#x2F;SRE) Ruby is a horrible platform. It is heavy on resources, it is difficult to run (Unicorn is a pain), maintain, monitor, debug. Many Ruby projects has silently failed (Chef? Puppet?) and the biggest Ruby tool in DevOps world which is Gitlab is incredibly difficult to run on premise and struggles with a ton of issues that I believe are caused by the platform.
If I had a choice, I would never work on a ruby project.</div><br/><div id="38752147" class="c"><input type="checkbox" id="c-38752147" checked=""/><div class="controls bullet"><span class="by">vr46</span><span>|</span><a href="#38751161">root</a><span>|</span><a href="#38751647">parent</a><span>|</span><a href="#38751923">next</a><span>|</span><label class="collapse" for="c-38752147">[-]</label><label class="expand" for="c-38752147">[1 more]</label></div><br/><div class="children"><div class="content">As both a Ruby programmer and an DevOps&#x2F;Infrastructure in the past, I have found Ruby to be a superlative programming environment but just as easy to program in badly as any other. I have never found it harder to run, monitor or debug than any other platform, certainly not harder than building and tuning a Java server platform. Really I think Ruby has been the biggest influence for more brilliant tools and practices in modern development than anything else, even if it doesn’t come close to the performance of a static language.</div><br/></div></div><div id="38751923" class="c"><input type="checkbox" id="c-38751923" checked=""/><div class="controls bullet"><span class="by">vidarh</span><span>|</span><a href="#38751161">root</a><span>|</span><a href="#38751647">parent</a><span>|</span><a href="#38752147">prev</a><span>|</span><a href="#38751715">next</a><span>|</span><label class="collapse" for="c-38751923">[-]</label><label class="expand" for="c-38751923">[1 more]</label></div><br/><div class="children"><div class="content">From my perspective of devops, I&#x27;ve built large hybrid cloud deployments in Ruby (from scratch, including an orchestrator written in Ruby) and would again given the right requirements, as for tooling the ease of writing Ruby outweigh anything else, and for running it it is no different or more complicated than any other container workload. It&#x27;s a bizarre objection.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>