<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1726650078032" as="style"/><link rel="stylesheet" href="styles.css?v=1726650078032"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.obdev.at/blog/warning-macos-sequoia-15-may-bypass-dns-encryption/">macOS Sequoia 15 may bypass DNS encryption</a> <span class="domain">(<a href="https://www.obdev.at">www.obdev.at</a>)</span></div><div class="subtext"><span>HelenePhisher</span> | <span>148 comments</span></div><br/><div><div id="41572423" class="c"><input type="checkbox" id="c-41572423" checked=""/><div class="controls bullet"><span class="by">kelnos</span><span>|</span><a href="#41572069">next</a><span>|</span><label class="collapse" for="c-41572423">[-]</label><label class="expand" for="c-41572423">[54 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a little weird to me that getaddrinfo() is considered a &quot;low-level legacy API&quot;.  Maybe things are drastically different on macOS, but getaddrinfo() is <i>the</i> way to resolve names on Linux and I suspect the *BSDs.<p>Sure, I expect most macOS apps will use something in Foundation or some other NetworkKit-type framework to do DNS queries, but it&#x27;s odd to me that the code there wouldn&#x27;t then call down to getaddrinfo() or the like to do the dirty work.  I guess GAI is blocking, so presumably there&#x27;s some other low-level non-blocking call?</div><br/><div id="41572770" class="c"><input type="checkbox" id="c-41572770" checked=""/><div class="controls bullet"><span class="by">krackers</span><span>|</span><a href="#41572423">parent</a><span>|</span><a href="#41577339">next</a><span>|</span><label class="collapse" for="c-41572770">[-]</label><label class="expand" for="c-41572770">[8 more]</label></div><br/><div class="children"><div class="content">&gt;so presumably there&#x27;s some other low-level non-blocking call<p>Correct, CFNetwork is open source so you can check implementation but last I remember it used some variant like `getaddrinfo_async`. But Apple really doesn&#x27;t want you (the end-user) to use getaddrinfo (or the async variant CF exposes) to resolve an IP and then directly connect() via that ip, everything is geared towards connect-by-hostname since then Apple&#x27;s can internally handle the implementation of happy-eyeballs.<p>Edit: You can read <a href="https:&#x2F;&#x2F;www.ietf.org&#x2F;proceedings&#x2F;72&#x2F;slides&#x2F;plenaryw-6.pdf" rel="nofollow">https:&#x2F;&#x2F;www.ietf.org&#x2F;proceedings&#x2F;72&#x2F;slides&#x2F;plenaryw-6.pdf</a> for their thoughts on why they don&#x27;t like the getaddrinfo() model [there are speaker notes at the bottom of each slide]</div><br/><div id="41573212" class="c"><input type="checkbox" id="c-41573212" checked=""/><div class="controls bullet"><span class="by">conradev</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41572770">parent</a><span>|</span><a href="#41573555">next</a><span>|</span><label class="collapse" for="c-41573212">[-]</label><label class="expand" for="c-41573212">[4 more]</label></div><br/><div class="children"><div class="content">If you do need the lower-level control, Apple does still recommend `getaddrinfo`. It handles NAT64 translation for IPv6-only carrier networks:<p><a href="https:&#x2F;&#x2F;developer.apple.com&#x2F;library&#x2F;archive&#x2F;documentation&#x2F;NetworkingInternetWeb&#x2F;Conceptual&#x2F;NetworkingOverview&#x2F;UnderstandingandPreparingfortheIPv6Transition&#x2F;UnderstandingandPreparingfortheIPv6Transition.html#&#x2F;&#x2F;apple_ref&#x2F;doc&#x2F;uid&#x2F;TP40010220-CH213-DontLinkElementID_4" rel="nofollow">https:&#x2F;&#x2F;developer.apple.com&#x2F;library&#x2F;archive&#x2F;documentation&#x2F;Ne...</a></div><br/><div id="41574856" class="c"><input type="checkbox" id="c-41574856" checked=""/><div class="controls bullet"><span class="by">simscitizen</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41573212">parent</a><span>|</span><a href="#41573325">next</a><span>|</span><label class="collapse" for="c-41574856">[-]</label><label class="expand" for="c-41574856">[2 more]</label></div><br/><div class="children"><div class="content">That’s not the current documentation, as evidenced by the “archive” in the URL.<p>If you want to stay at a lower level the recommendation these days is to use Network.framework. If you want something higher level then use CFNetwork (probably through the classes exported by Foundation like NSURLSession).</div><br/><div id="41577462" class="c"><input type="checkbox" id="c-41577462" checked=""/><div class="controls bullet"><span class="by">conradev</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41574856">parent</a><span>|</span><a href="#41573325">next</a><span>|</span><label class="collapse" for="c-41577462">[-]</label><label class="expand" for="c-41577462">[1 more]</label></div><br/><div class="children"><div class="content">I actually found it linked from here, which seems current: <a href="https:&#x2F;&#x2F;developer.apple.com&#x2F;support&#x2F;ipv6&#x2F;" rel="nofollow">https:&#x2F;&#x2F;developer.apple.com&#x2F;support&#x2F;ipv6&#x2F;</a><p>It is _not_ best practice to use `getaddrinfo` for DNS resolution, for sure. But it _is_ best practice to use it before connecting to an IP address directly because that address may need to be translated.</div><br/></div></div></div></div><div id="41573325" class="c"><input type="checkbox" id="c-41573325" checked=""/><div class="controls bullet"><span class="by">krackers</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41573212">parent</a><span>|</span><a href="#41574856">prev</a><span>|</span><a href="#41573555">next</a><span>|</span><label class="collapse" for="c-41573325">[-]</label><label class="expand" for="c-41573325">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m actually surprised they suggest getaddrinfo() directly over the async CF wrapper.</div><br/></div></div></div></div><div id="41573555" class="c"><input type="checkbox" id="c-41573555" checked=""/><div class="controls bullet"><span class="by">mzs</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41572770">parent</a><span>|</span><a href="#41573212">prev</a><span>|</span><a href="#41574595">next</a><span>|</span><label class="collapse" for="c-41573555">[-]</label><label class="expand" for="c-41573555">[1 more]</label></div><br/><div class="children"><div class="content">indeed: <a href="https:&#x2F;&#x2F;opensource.apple.com&#x2F;source&#x2F;Libinfo&#x2F;Libinfo-222.1&#x2F;lookup.subproj&#x2F;netdb_async.h.auto.html" rel="nofollow">https:&#x2F;&#x2F;opensource.apple.com&#x2F;source&#x2F;Libinfo&#x2F;Libinfo-222.1&#x2F;lo...</a></div><br/></div></div><div id="41574595" class="c"><input type="checkbox" id="c-41574595" checked=""/><div class="controls bullet"><span class="by">matheusmoreira</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41572770">parent</a><span>|</span><a href="#41573555">prev</a><span>|</span><a href="#41577339">next</a><span>|</span><label class="collapse" for="c-41574595">[-]</label><label class="expand" for="c-41574595">[2 more]</label></div><br/><div class="children"><div class="content">Thanks for that link, it&#x27;s a very convincing presentation that very clearly explains the shortcomings of getaddrinfo.</div><br/><div id="41574855" class="c"><input type="checkbox" id="c-41574855" checked=""/><div class="controls bullet"><span class="by">SOLAR_FIELDS</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41574595">parent</a><span>|</span><a href="#41577339">next</a><span>|</span><label class="collapse" for="c-41574855">[-]</label><label class="expand" for="c-41574855">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, I went in thinking that it was going to be some case of Apple wanting to bend the Unix philosophy to their will for their own desires and steer implementations in their direction, but no - they are simply pointing out a clear flaw in the design of the function in question for a usecase that does not apply only to Apple. Basically all OS vendors need to be doing something like this usecase to support IPv6 adoption.</div><br/></div></div></div></div></div></div><div id="41577339" class="c"><input type="checkbox" id="c-41577339" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#41572423">parent</a><span>|</span><a href="#41572770">prev</a><span>|</span><a href="#41576046">next</a><span>|</span><label class="collapse" for="c-41577339">[-]</label><label class="expand" for="c-41577339">[2 more]</label></div><br/><div class="children"><div class="content">For quite some versions that modern networking APIs on macOS using Objective-C frameworks, starting in 2018.<p>See WWDC 2018&#x27;s &quot;Introducing Network.framework, A modern alternative to sockets&quot;.<p>NeXTSTEP might have been a UNIX, and macOS derives from it, but the whole UNIX story has always been to bring UNIX software into the platform, not to make it easier to move elsewhere.</div><br/><div id="41577375" class="c"><input type="checkbox" id="c-41577375" checked=""/><div class="controls bullet"><span class="by">john_alan</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41577339">parent</a><span>|</span><a href="#41576046">next</a><span>|</span><label class="collapse" for="c-41577375">[-]</label><label class="expand" for="c-41577375">[1 more]</label></div><br/><div class="children"><div class="content">macOS is still certified POSIX UNIX<p>EDIT: maybe not anymore, Sequoia  isn&#x27;t listed yet, <a href="https:&#x2F;&#x2F;www.opengroup.org&#x2F;openbrand&#x2F;register&#x2F;xy.htm" rel="nofollow">https:&#x2F;&#x2F;www.opengroup.org&#x2F;openbrand&#x2F;register&#x2F;xy.htm</a></div><br/></div></div></div></div><div id="41576046" class="c"><input type="checkbox" id="c-41576046" checked=""/><div class="controls bullet"><span class="by">brynet</span><span>|</span><a href="#41572423">parent</a><span>|</span><a href="#41577339">prev</a><span>|</span><a href="#41572882">next</a><span>|</span><label class="collapse" for="c-41576046">[-]</label><label class="expand" for="c-41576046">[1 more]</label></div><br/><div class="children"><div class="content">&gt; getaddrinfo() is the way to resolve names on Linux and I suspect the *BSDs.<p>At least on OpenBSD, all classical&#x2F;standard DNS functions (getaddrinfo&#x2F;gethostbyname&#x2F;...) are wrappers around OpenBSD&#x27;s libc asr implementation, written by Eric Faurot.<p><a href="https:&#x2F;&#x2F;man.openbsd.org&#x2F;man3&#x2F;asr_run.3" rel="nofollow">https:&#x2F;&#x2F;man.openbsd.org&#x2F;man3&#x2F;asr_run.3</a><p><a href="https:&#x2F;&#x2F;github.com&#x2F;openbsd&#x2F;src&#x2F;tree&#x2F;master&#x2F;lib&#x2F;libc&#x2F;asr">https:&#x2F;&#x2F;github.com&#x2F;openbsd&#x2F;src&#x2F;tree&#x2F;master&#x2F;lib&#x2F;libc&#x2F;asr</a></div><br/></div></div><div id="41572882" class="c"><input type="checkbox" id="c-41572882" checked=""/><div class="controls bullet"><span class="by">jmull</span><span>|</span><a href="#41572423">parent</a><span>|</span><a href="#41576046">prev</a><span>|</span><a href="#41574996">next</a><span>|</span><label class="collapse" for="c-41572882">[-]</label><label class="expand" for="c-41572882">[1 more]</label></div><br/><div class="children"><div class="content">&gt; It&#x27;s a little weird to me that getaddrinfo() is considered a &quot;low-level legacy API&quot;<p>I don&#x27;t think it is considered legacy. The blog post gets that wrong.<p>(Whether it&#x27;s &quot;low-level&quot; or not just depends on your perspective.)</div><br/></div></div><div id="41574996" class="c"><input type="checkbox" id="c-41574996" checked=""/><div class="controls bullet"><span class="by">adastra22</span><span>|</span><a href="#41572423">parent</a><span>|</span><a href="#41572882">prev</a><span>|</span><a href="#41576374">next</a><span>|</span><label class="collapse" for="c-41574996">[-]</label><label class="expand" for="c-41574996">[4 more]</label></div><br/><div class="children"><div class="content">Everything in the UNIX compatibility layer is low-level in macOS. Not necessarily &quot;legacy&quot; though.<p>But this is no different than saying that, for example, calling out platform-specific native OS APIs from Java is &quot;low-level.&quot; Which it is, from the perspective of compile-once, run-anywhere Java applets. macOS is a NeXT-compatible non-UNIX API, and you are supposed to use the macOS frameworks for everything. Calling down to BSD or even mach is definitely not what Apple wants you to do.</div><br/><div id="41576538" class="c"><input type="checkbox" id="c-41576538" checked=""/><div class="controls bullet"><span class="by">raverbashing</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41574996">parent</a><span>|</span><a href="#41576374">next</a><span>|</span><label class="collapse" for="c-41576538">[-]</label><label class="expand" for="c-41576538">[3 more]</label></div><br/><div class="children"><div class="content">Curious about this<p>Isn&#x27;t the Mach kernel based on BSD?<p>How much of getaddrinfo is in the kernel, how much of it is pure &quot;libc&quot;?</div><br/><div id="41576711" class="c"><input type="checkbox" id="c-41576711" checked=""/><div class="controls bullet"><span class="by">adastra22</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41576538">parent</a><span>|</span><a href="#41576374">next</a><span>|</span><label class="collapse" for="c-41576711">[-]</label><label class="expand" for="c-41576711">[2 more]</label></div><br/><div class="children"><div class="content">No, mach is a microkernel, like L5. It was developed for the purpose of <i>replacing</i> the BSD kernel, by having a small amount of functionality in the kernel itself, and the rest of the BSD-compatibility layer implemented in user space. macOS&#x27; frameworks are then a layer on top of that.</div><br/><div id="41576771" class="c"><input type="checkbox" id="c-41576771" checked=""/><div class="controls bullet"><span class="by">messe</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41576711">parent</a><span>|</span><a href="#41576374">next</a><span>|</span><label class="collapse" for="c-41576771">[-]</label><label class="expand" for="c-41576771">[1 more]</label></div><br/><div class="children"><div class="content">IIRC most of the BSD compat was moved to kernel space for performance reasons (either just on macOS, or the version of Mach they built on top of)</div><br/></div></div></div></div></div></div></div></div><div id="41576374" class="c"><input type="checkbox" id="c-41576374" checked=""/><div class="controls bullet"><span class="by">inopinatus</span><span>|</span><a href="#41572423">parent</a><span>|</span><a href="#41574996">prev</a><span>|</span><a href="#41573614">next</a><span>|</span><label class="collapse" for="c-41576374">[-]</label><label class="expand" for="c-41576374">[1 more]</label></div><br/><div class="children"><div class="content">The correct term is &quot;heirloom&quot;.</div><br/></div></div><div id="41573614" class="c"><input type="checkbox" id="c-41573614" checked=""/><div class="controls bullet"><span class="by">pushupentry1219</span><span>|</span><a href="#41572423">parent</a><span>|</span><a href="#41576374">prev</a><span>|</span><a href="#41574441">next</a><span>|</span><label class="collapse" for="c-41573614">[-]</label><label class="expand" for="c-41573614">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Maybe things are drastically different on macOS, but getaddrinfo() is the way to resolve names on Linux and I suspect the *BSDs.<p>I&#x27;m not sure if this is the case in this case, but it might be worth noting that some system functions with the same name have drastically different internal&#x2F;implementation differences between Linux&#x2F;*BSD&#x2F;MacOS. With there being differences between the *BSDs too.<p>So on some systems one function call is &quot;the way&quot;, because its been maintained over the years, but then on another it might actually be old and not useful.</div><br/></div></div><div id="41574441" class="c"><input type="checkbox" id="c-41574441" checked=""/><div class="controls bullet"><span class="by">matheusmoreira</span><span>|</span><a href="#41572423">parent</a><span>|</span><a href="#41573614">prev</a><span>|</span><a href="#41572477">next</a><span>|</span><label class="collapse" for="c-41574441">[-]</label><label class="expand" for="c-41574441">[3 more]</label></div><br/><div class="children"><div class="content">&gt; getaddrinfo() is <i>the</i> way to resolve names on Linux<p>Not at all. That&#x27;s just a glibc function, it&#x27;s got nothing to do with Linux. People just <i>assume</i> that glibc is how things are done in Linux user space but it doesn&#x27;t have to be that way. For example, systemd came up with its own resolved mechanism which turned out to be much better than the glibc stuff. I will probably end up inventing my own at some point as well since I&#x27;m working on freestanding software targeting Linux.</div><br/><div id="41575616" class="c"><input type="checkbox" id="c-41575616" checked=""/><div class="controls bullet"><span class="by">jonhohle</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41574441">parent</a><span>|</span><a href="#41572477">next</a><span>|</span><label class="collapse" for="c-41575616">[-]</label><label class="expand" for="c-41575616">[2 more]</label></div><br/><div class="children"><div class="content">getaddrinfo is defined by POSIX and UNIX. Where the implementation is doesn’t matter. It’s portable, which is why it’s used. The slide deck referenced above talks about better implementations for various platforms, but they are all platform specific.<p>So OP might not be completely accurate, but getaddrinfo is _the_ way to resolve names if you are writing portable POSIX and&#x2F;or UNIX code.</div><br/><div id="41576273" class="c"><input type="checkbox" id="c-41576273" checked=""/><div class="controls bullet"><span class="by">matheusmoreira</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41575616">parent</a><span>|</span><a href="#41572477">next</a><span>|</span><label class="collapse" for="c-41576273">[-]</label><label class="expand" for="c-41576273">[1 more]</label></div><br/><div class="children"><div class="content">Linux and the popular Linux distributions are not POSIX compliant to begin with. Only GNU tries to be, and even GNU adds on a ludicrous amount of extensions because the truth is POSIX isn&#x27;t good enough.</div><br/></div></div></div></div></div></div><div id="41572477" class="c"><input type="checkbox" id="c-41572477" checked=""/><div class="controls bullet"><span class="by">unethical_ban</span><span>|</span><a href="#41572423">parent</a><span>|</span><a href="#41574441">prev</a><span>|</span><a href="#41574398">next</a><span>|</span><label class="collapse" for="c-41572477">[-]</label><label class="expand" for="c-41572477">[29 more]</label></div><br/><div class="children"><div class="content">I&#x27;ll pile on, as someone who has never developed for Apple systems: What APIs are supposed to be used for DNS resolution?<p><pre><code>  * Host file
  * Configured DNS server
  * App-specific DNS server if it exists
</code></pre>
What &quot;API&quot; is there? Why doesn&#x27;t an app doing system-wide DNS modifictions just modify the settings for default resolver?</div><br/><div id="41572542" class="c"><input type="checkbox" id="c-41572542" checked=""/><div class="controls bullet"><span class="by">threeseed</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41572477">parent</a><span>|</span><a href="#41572566">next</a><span>|</span><label class="collapse" for="c-41572542">[-]</label><label class="expand" for="c-41572542">[18 more]</label></div><br/><div class="children"><div class="content">&gt; This library wraps around the dnssd framework and the c-ares C library with Swift-friendly APIs and data structures.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;apple&#x2F;swift-async-dns-resolver">https:&#x2F;&#x2F;github.com&#x2F;apple&#x2F;swift-async-dns-resolver</a></div><br/><div id="41572673" class="c"><input type="checkbox" id="c-41572673" checked=""/><div class="controls bullet"><span class="by">josephcsible</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41572542">parent</a><span>|</span><a href="#41572566">next</a><span>|</span><label class="collapse" for="c-41572673">[-]</label><label class="expand" for="c-41572673">[17 more]</label></div><br/><div class="children"><div class="content">It feels like Embrace, Extend, Extinguish to claim that a portable API is &quot;legacy&quot; and that its replacement is Apple-only.</div><br/><div id="41573324" class="c"><input type="checkbox" id="c-41573324" checked=""/><div class="controls bullet"><span class="by">tpmoney</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41572673">parent</a><span>|</span><a href="#41573676">next</a><span>|</span><label class="collapse" for="c-41573324">[-]</label><label class="expand" for="c-41573324">[1 more]</label></div><br/><div class="children"><div class="content">As near as I can tell, Apple doesn&#x27;t call it a legacy API. The article does, but the article wasn&#x27;t written by nor does it appear to be quoting Apple.</div><br/></div></div><div id="41573676" class="c"><input type="checkbox" id="c-41573676" checked=""/><div class="controls bullet"><span class="by">mzs</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41572673">parent</a><span>|</span><a href="#41573324">prev</a><span>|</span><a href="#41574675">next</a><span>|</span><label class="collapse" for="c-41573676">[-]</label><label class="expand" for="c-41573676">[2 more]</label></div><br/><div class="children"><div class="content">That&#x27;s what you use to create a utility like nslookup in swift, Apple does not want you to do any resolving yourself, just pass a hostname instead:<p><a href="https:&#x2F;&#x2F;developer.apple.com&#x2F;documentation&#x2F;network&#x2F;nwendpoint&#x2F;host&#x2F;init(_:)?language=swift" rel="nofollow">https:&#x2F;&#x2F;developer.apple.com&#x2F;documentation&#x2F;network&#x2F;nwendpoint...</a></div><br/><div id="41575274" class="c"><input type="checkbox" id="c-41575274" checked=""/><div class="controls bullet"><span class="by">ruthmarx</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41573676">parent</a><span>|</span><a href="#41574675">next</a><span>|</span><label class="collapse" for="c-41575274">[-]</label><label class="expand" for="c-41575274">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Apple does not want you to do any resolving yourself<p>Which honestly sounds like a good reason to make sure you do do it yourself.</div><br/></div></div></div></div><div id="41574675" class="c"><input type="checkbox" id="c-41574675" checked=""/><div class="controls bullet"><span class="by">matheusmoreira</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41572673">parent</a><span>|</span><a href="#41573676">prev</a><span>|</span><a href="#41573591">next</a><span>|</span><label class="collapse" for="c-41574675">[-]</label><label class="expand" for="c-41574675">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not necessarily EEE. Maybe it&#x27;s just that the old wheel sucks. They want a better wheel and so they reinvented it, hopefully better this time.<p>The corporations making proprietary software are not the only ones who have that attitude. I&#x27;ve resolved to make all my free software Linux-exclusive so that I can use Linux to the fullest. The Linux kernel is packed full of exclusive non-portable features that very few people take advantage of because they&#x27;re obsessed with portability, POSIX compliance or whatever. I think that&#x27;s a waste.<p>Portable software is usually sucky lowest common denominator software. We should not limit ourselves to whatever glibc offers.</div><br/></div></div><div id="41573591" class="c"><input type="checkbox" id="c-41573591" checked=""/><div class="controls bullet"><span class="by">threeseed</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41572673">parent</a><span>|</span><a href="#41574675">prev</a><span>|</span><a href="#41572696">next</a><span>|</span><label class="collapse" for="c-41573591">[-]</label><label class="expand" for="c-41573591">[1 more]</label></div><br/><div class="children"><div class="content">You actually think that a Swift developer, developing against Cocoa APIs, targeting Mac and iOS devices cares about a portable API.<p>Because not sure if you know this but the <i>entire</i> software industry is built on high level libraries on top of largely portable code. For example this Swift library wraps c-ares a portable API.</div><br/></div></div><div id="41573303" class="c"><input type="checkbox" id="c-41573303" checked=""/><div class="controls bullet"><span class="by">virtue3</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41572673">parent</a><span>|</span><a href="#41572831">prev</a><span>|</span><a href="#41574732">next</a><span>|</span><label class="collapse" for="c-41573303">[-]</label><label class="expand" for="c-41573303">[2 more]</label></div><br/><div class="children"><div class="content">no no, it&#x27;s just &quot;ours is better&quot;, &quot;think different&quot;, and &quot;it just works&quot;. &#x2F;s</div><br/><div id="41576135" class="c"><input type="checkbox" id="c-41576135" checked=""/><div class="controls bullet"><span class="by">masklinn</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41573303">parent</a><span>|</span><a href="#41574732">next</a><span>|</span><label class="collapse" for="c-41576135">[-]</label><label class="expand" for="c-41576135">[1 more]</label></div><br/><div class="children"><div class="content">It kinda is yea: <a href="https:&#x2F;&#x2F;www.ietf.org&#x2F;proceedings&#x2F;72&#x2F;slides&#x2F;plenaryw-6.pdf" rel="nofollow">https:&#x2F;&#x2F;www.ietf.org&#x2F;proceedings&#x2F;72&#x2F;slides&#x2F;plenaryw-6.pdf</a></div><br/></div></div></div></div><div id="41574732" class="c"><input type="checkbox" id="c-41574732" checked=""/><div class="controls bullet"><span class="by">ryandrake</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41572673">parent</a><span>|</span><a href="#41573303">prev</a><span>|</span><a href="#41573640">next</a><span>|</span><label class="collapse" for="c-41574732">[-]</label><label class="expand" for="c-41574732">[3 more]</label></div><br/><div class="children"><div class="content">It&#x27;s the same thing they did with Metal. Portable OpenGL is now &quot;legacy.&quot; Straight from the 90s Microsoft playbook.</div><br/><div id="41576408" class="c"><input type="checkbox" id="c-41576408" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41574732">parent</a><span>|</span><a href="#41574869">next</a><span>|</span><label class="collapse" for="c-41576408">[-]</label><label class="expand" for="c-41576408">[1 more]</label></div><br/><div class="children"><div class="content">It is also legacy from Khronos point of view.</div><br/></div></div><div id="41574869" class="c"><input type="checkbox" id="c-41574869" checked=""/><div class="controls bullet"><span class="by">pram</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41574732">parent</a><span>|</span><a href="#41576408">prev</a><span>|</span><a href="#41573640">next</a><span>|</span><label class="collapse" for="c-41574869">[-]</label><label class="expand" for="c-41574869">[1 more]</label></div><br/><div class="children"><div class="content">OpenGL is legacy in general, its been on 4.6 for almost a decade.</div><br/></div></div></div></div><div id="41573640" class="c"><input type="checkbox" id="c-41573640" checked=""/><div class="controls bullet"><span class="by">kccqzy</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41572673">parent</a><span>|</span><a href="#41574732">prev</a><span>|</span><a href="#41572566">next</a><span>|</span><label class="collapse" for="c-41573640">[-]</label><label class="expand" for="c-41573640">[4 more]</label></div><br/><div class="children"><div class="content">Well but the portable API is too low-level and error prone. What is the last time you used getaddrinfo? How often do you actually need to use it?<p>One can make a good technical argument based on the merit of the portable API without immediately resorting to the EEE argument.</div><br/><div id="41573739" class="c"><input type="checkbox" id="c-41573739" checked=""/><div class="controls bullet"><span class="by">o11c</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41573640">parent</a><span>|</span><a href="#41572566">next</a><span>|</span><label class="collapse" for="c-41573739">[-]</label><label class="expand" for="c-41573739">[3 more]</label></div><br/><div class="children"><div class="content">getaddrinfo isn&#x27;t its predecessors, there&#x27;s nothing error-prone about it. The only thing that&#x27;s nontrivial is falling back if the first server is unresponsive, and even there the obvious calling code is fine for almost all apps.</div><br/><div id="41573871" class="c"><input type="checkbox" id="c-41573871" checked=""/><div class="controls bullet"><span class="by">kccqzy</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41573739">parent</a><span>|</span><a href="#41572566">next</a><span>|</span><label class="collapse" for="c-41573871">[-]</label><label class="expand" for="c-41573871">[2 more]</label></div><br/><div class="children"><div class="content">If you are using getaddrinfo directly, you likely wouldn&#x27;t bother to implement Happy Eyeballs, for example.</div><br/><div id="41574373" class="c"><input type="checkbox" id="c-41574373" checked=""/><div class="controls bullet"><span class="by">o11c</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41573871">parent</a><span>|</span><a href="#41572566">next</a><span>|</span><label class="collapse" for="c-41574373">[-]</label><label class="expand" for="c-41574373">[1 more]</label></div><br/><div class="children"><div class="content">And for almost all programs, that doesn&#x27;t matter in $CURRENTYEAR.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="41572566" class="c"><input type="checkbox" id="c-41572566" checked=""/><div class="controls bullet"><span class="by">roywashere</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41572477">parent</a><span>|</span><a href="#41572542">prev</a><span>|</span><a href="#41574398">next</a><span>|</span><label class="collapse" for="c-41572566">[-]</label><label class="expand" for="c-41572566">[10 more]</label></div><br/><div class="children"><div class="content">Yes, this! I even wonder how else you would do this. By the way I worked with many IoT devices that do not use your dhcp dns but just hardcode quad 8 or similar</div><br/><div id="41573164" class="c"><input type="checkbox" id="c-41573164" checked=""/><div class="controls bullet"><span class="by">cj</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41572566">parent</a><span>|</span><a href="#41575607">next</a><span>|</span><label class="collapse" for="c-41573164">[-]</label><label class="expand" for="c-41573164">[8 more]</label></div><br/><div class="children"><div class="content">We recently had a developer join our team and he got stuck setting up his dev environment.<p>We use a .dev domain as a localhost alias, and turns out his ISP’s DNS wouldn’t resolve 127.0.0.1 (or whatever it is) for the .dev domain. Changing his resolver at the network level to 1.1.1.1 fixed it.<p>I imagine there are lots of difficult support tickets for app devs, and at a certain point they just hardcode the DNS to remove one variable from the equation when debugging bug reports.</div><br/><div id="41573596" class="c"><input type="checkbox" id="c-41573596" checked=""/><div class="controls bullet"><span class="by">troyvit</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41573164">parent</a><span>|</span><a href="#41573486">next</a><span>|</span><label class="collapse" for="c-41573596">[-]</label><label class="expand" for="c-41573596">[2 more]</label></div><br/><div class="children"><div class="content">Wayyyy back in 1995 or &#x27;96 I was working for a non-profit called &quot;Next Generation Magazine&quot; and our goal was to have young people write content for web sites to get their names out there. Back then it was all local ISPs, so we went to our ISP and asked for ngm.org and were stoked when we got it! We built out the site (Thanks to Building Killer Websites of course) and it looked awesome!<p>Only problem was that nobody in my family out of state could see it. It took awhile to realize realize that we never bought that domain. Our local ISP just added it to their DNS records, and since we all hooked into them we thought we were live across the &#x27;net.</div><br/><div id="41575651" class="c"><input type="checkbox" id="c-41575651" checked=""/><div class="controls bullet"><span class="by">jonhohle</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41573596">parent</a><span>|</span><a href="#41573486">next</a><span>|</span><label class="collapse" for="c-41575651">[-]</label><label class="expand" for="c-41575651">[1 more]</label></div><br/><div class="children"><div class="content">That’s incredible!<p>I remember one of the first times I used the Internet and opened my local radio station’s website from several states away. It was incredible to me that it worked and I also wondered why anyone across the country would care. The early internet was amazing.</div><br/></div></div></div></div><div id="41573486" class="c"><input type="checkbox" id="c-41573486" checked=""/><div class="controls bullet"><span class="by">X-Istence</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41573164">parent</a><span>|</span><a href="#41573596">prev</a><span>|</span><a href="#41575607">next</a><span>|</span><label class="collapse" for="c-41573486">[-]</label><label class="expand" for="c-41573486">[5 more]</label></div><br/><div class="children"><div class="content">Not resolving 127.0.0.1 or RFC1918 addresses or even ULA for IPv6 is done to avoid DNS rebinding attacks. For most end users that is probably the correct move.</div><br/><div id="41573570" class="c"><input type="checkbox" id="c-41573570" checked=""/><div class="controls bullet"><span class="by">lxgr</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41573486">parent</a><span>|</span><a href="#41575607">next</a><span>|</span><label class="collapse" for="c-41573570">[-]</label><label class="expand" for="c-41573570">[4 more]</label></div><br/><div class="children"><div class="content">My home router even seems to inspect any UDP&#x2F;53 traffic and redact any responses containing local&#x2F;private A entries, so not even switching to a public resolver bypasses the protection.<p>I agree that it’s usually the right behavior.</div><br/><div id="41574108" class="c"><input type="checkbox" id="c-41574108" checked=""/><div class="controls bullet"><span class="by">cj</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41573570">parent</a><span>|</span><a href="#41575607">next</a><span>|</span><label class="collapse" for="c-41574108">[-]</label><label class="expand" for="c-41574108">[3 more]</label></div><br/><div class="children"><div class="content">Interesting. I hadn’t considered it might be a security feature of his router!</div><br/><div id="41574119" class="c"><input type="checkbox" id="c-41574119" checked=""/><div class="controls bullet"><span class="by">lxgr</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41574108">parent</a><span>|</span><a href="#41575607">next</a><span>|</span><label class="collapse" for="c-41574119">[-]</label><label class="expand" for="c-41574119">[2 more]</label></div><br/><div class="children"><div class="content">In case you want to look into it further: My router actually allows adding exemptions to this policy on a per-hostname basis!<p>Sometimes I wish it would allow wildcards, but honestly that&#x27;s probably just another way for users to shoot themselves in the foot (e.g. by adding &#x27;*&#x27;).</div><br/><div id="41574964" class="c"><input type="checkbox" id="c-41574964" checked=""/><div class="controls bullet"><span class="by">RulerOf</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41574119">parent</a><span>|</span><a href="#41575607">next</a><span>|</span><label class="collapse" for="c-41574964">[-]</label><label class="expand" for="c-41574964">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Sometimes I wish it would allow wildcards<p>pfSense for example uses unbound, and while it doesn&#x27;t have a switch for disabling rebind protection, it does allow injecting arbitrary unbound config, which can disable rebind protection for any depth of a DNS zone or IP space. E.g.:<p><pre><code>    server:
    private-address: 192.168.0.1&#x2F;24
    private-domain: plex.direct</code></pre></div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="41575607" class="c"><input type="checkbox" id="c-41575607" checked=""/><div class="controls bullet"><span class="by">admax88qqq</span><span>|</span><a href="#41572423">root</a><span>|</span><a href="#41572566">parent</a><span>|</span><a href="#41573164">prev</a><span>|</span><a href="#41574398">next</a><span>|</span><label class="collapse" for="c-41575607">[-]</label><label class="expand" for="c-41575607">[1 more]</label></div><br/><div class="children"><div class="content">Most isp resolvers are shit and broken</div><br/></div></div></div></div></div></div><div id="41574398" class="c"><input type="checkbox" id="c-41574398" checked=""/><div class="controls bullet"><span class="by">ajross</span><span>|</span><a href="#41572423">parent</a><span>|</span><a href="#41572477">prev</a><span>|</span><a href="#41574350">next</a><span>|</span><label class="collapse" for="c-41574398">[-]</label><label class="expand" for="c-41574398">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, this report seems a little spun.  The essence is basically that the encrypted DNS needs to go through the proxy, and there&#x27;s resolver code elsewhere in the OS that doesn&#x27;t use the proxy.  It&#x27;s a bug, sure.  It could plausibly have interesting exploits, though none are shown.  But it&#x27;s not a very interesting bug.</div><br/></div></div><div id="41574350" class="c"><input type="checkbox" id="c-41574350" checked=""/><div class="controls bullet"><span class="by">ransom1538</span><span>|</span><a href="#41572423">parent</a><span>|</span><a href="#41574398">prev</a><span>|</span><a href="#41572756">next</a><span>|</span><label class="collapse" for="c-41574350">[-]</label><label class="expand" for="c-41574350">[1 more]</label></div><br/><div class="children"><div class="content">Wait until you try to get the mac address on an iphone.</div><br/></div></div><div id="41572756" class="c"><input type="checkbox" id="c-41572756" checked=""/><div class="controls bullet"><span class="by">mannyv</span><span>|</span><a href="#41572423">parent</a><span>|</span><a href="#41574350">prev</a><span>|</span><a href="#41572069">next</a><span>|</span><label class="collapse" for="c-41572756">[-]</label><label class="expand" for="c-41572756">[1 more]</label></div><br/><div class="children"><div class="content">Yes, things are drastically different on MacOS. There&#x27;s like a whole nother level of APIs ip there<p>&#x2F;s</div><br/></div></div></div></div><div id="41572069" class="c"><input type="checkbox" id="c-41572069" checked=""/><div class="controls bullet"><span class="by">asplake</span><span>|</span><a href="#41572423">prev</a><span>|</span><a href="#41572180">next</a><span>|</span><label class="collapse" for="c-41572069">[-]</label><label class="expand" for="c-41572069">[8 more]</label></div><br/><div class="children"><div class="content">&gt; Update 2024-09-17, 7:10 p.m.<p>&gt; After further investigation, we found that this bug has already existed at least since macOS 14.5 Sonoma (maybe even earlier, but we currently don’t have access to an older 14.x system for testing).</div><br/><div id="41573255" class="c"><input type="checkbox" id="c-41573255" checked=""/><div class="controls bullet"><span class="by">taspeotis</span><span>|</span><a href="#41572069">parent</a><span>|</span><a href="#41574293">next</a><span>|</span><label class="collapse" for="c-41573255">[-]</label><label class="expand" for="c-41573255">[1 more]</label></div><br/><div class="children"><div class="content">Did they test it ever worked with getaddrinfo? Or did they just see it worked once with CFNetwork and called it a day and then later publish a blog post saying it’s broken?</div><br/></div></div><div id="41574293" class="c"><input type="checkbox" id="c-41574293" checked=""/><div class="controls bullet"><span class="by">TheJoeMan</span><span>|</span><a href="#41572069">parent</a><span>|</span><a href="#41573255">prev</a><span>|</span><a href="#41573241">next</a><span>|</span><label class="collapse" for="c-41574293">[-]</label><label class="expand" for="c-41574293">[5 more]</label></div><br/><div class="children"><div class="content">It&#x27;s ridiculous us developers still have to jump through hoops to save around older versions of the OS for testing. There is 0 technical reason why Apple can&#x27;t let us downgrade.</div><br/><div id="41575557" class="c"><input type="checkbox" id="c-41575557" checked=""/><div class="controls bullet"><span class="by">dishsoap</span><span>|</span><a href="#41572069">root</a><span>|</span><a href="#41574293">parent</a><span>|</span><a href="#41576537">next</a><span>|</span><label class="collapse" for="c-41575557">[-]</label><label class="expand" for="c-41575557">[1 more]</label></div><br/><div class="children"><div class="content">Can someone fill me in on this? What hoops have to be jumped through? The last time I used macs, there were no issues downloading and installing older OS versions, but I have not used them recently.</div><br/></div></div><div id="41576537" class="c"><input type="checkbox" id="c-41576537" checked=""/><div class="controls bullet"><span class="by">rollcat</span><span>|</span><a href="#41572069">root</a><span>|</span><a href="#41574293">parent</a><span>|</span><a href="#41575557">prev</a><span>|</span><a href="#41574326">next</a><span>|</span><label class="collapse" for="c-41576537">[-]</label><label class="expand" for="c-41576537">[1 more]</label></div><br/><div class="children"><div class="content">What?<p>You can do a fresh install of an older macOS version whenever you like (you need to enable that option in the rescue system tho).<p>You can also run older macOS in a VM (the hypervisor framework keeps getting new features that make guest macOS more fully supported).<p>Name an OS (ok maybe NixOS) that allows you to do clean downgrades out of the box. Also wonder what&#x27;s gonna happen to your data in e.g. Postgres if you blindly downgrade.</div><br/></div></div><div id="41574326" class="c"><input type="checkbox" id="c-41574326" checked=""/><div class="controls bullet"><span class="by">luxuryballs</span><span>|</span><a href="#41572069">root</a><span>|</span><a href="#41574293">parent</a><span>|</span><a href="#41576537">prev</a><span>|</span><a href="#41573241">next</a><span>|</span><label class="collapse" for="c-41574326">[-]</label><label class="expand" for="c-41574326">[2 more]</label></div><br/><div class="children"><div class="content">yeah it feels like they decided bank accounts flush with cash were a better investment than legacy system support</div><br/><div id="41576051" class="c"><input type="checkbox" id="c-41576051" checked=""/><div class="controls bullet"><span class="by">thewileyone</span><span>|</span><a href="#41572069">root</a><span>|</span><a href="#41574326">parent</a><span>|</span><a href="#41573241">next</a><span>|</span><label class="collapse" for="c-41576051">[-]</label><label class="expand" for="c-41576051">[1 more]</label></div><br/><div class="children"><div class="content">Newsflash, they&#x27;ve always thought this way.</div><br/></div></div></div></div></div></div><div id="41573241" class="c"><input type="checkbox" id="c-41573241" checked=""/><div class="controls bullet"><span class="by">mattl</span><span>|</span><a href="#41572069">parent</a><span>|</span><a href="#41574293">prev</a><span>|</span><a href="#41572180">next</a><span>|</span><label class="collapse" for="c-41573241">[-]</label><label class="expand" for="c-41573241">[1 more]</label></div><br/><div class="children"><div class="content">Which is pretty wild too, considering they&#x27;re selling the product and the new OS came out <i>yesterday</i>.</div><br/></div></div></div></div><div id="41572180" class="c"><input type="checkbox" id="c-41572180" checked=""/><div class="controls bullet"><span class="by">unluckier</span><span>|</span><a href="#41572069">prev</a><span>|</span><a href="#41572040">next</a><span>|</span><label class="collapse" for="c-41572180">[-]</label><label class="expand" for="c-41572180">[34 more]</label></div><br/><div class="children"><div class="content">Sequoia also breaks an application&#x27;s ability to use DNS (or presumably anything UDP-based) if the macOS firewall is enabled, and an app is listed as &quot;Block incoming connections&quot;.
<a href="https:&#x2F;&#x2F;waclaw.blog&#x2F;macos-firewall-blocking-web-browsing-after-upgrading-to-sequoia&#x2F;" rel="nofollow">https:&#x2F;&#x2F;waclaw.blog&#x2F;macos-firewall-blocking-web-browsing-aft...</a></div><br/><div id="41573439" class="c"><input type="checkbox" id="c-41573439" checked=""/><div class="controls bullet"><span class="by">lapcat</span><span>|</span><a href="#41572180">parent</a><span>|</span><a href="#41572823">next</a><span>|</span><label class="collapse" for="c-41573439">[-]</label><label class="expand" for="c-41573439">[2 more]</label></div><br/><div class="children"><div class="content">I can&#x27;t reproduce this. Some people say it has to do with ESET: <a href="https:&#x2F;&#x2F;www.reddit.com&#x2F;r&#x2F;MacOS&#x2F;comments&#x2F;1fievr5&#x2F;updating_made_my_mac_not_access_to_the_internet&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.reddit.com&#x2F;r&#x2F;MacOS&#x2F;comments&#x2F;1fievr5&#x2F;updating_mad...</a></div><br/><div id="41573679" class="c"><input type="checkbox" id="c-41573679" checked=""/><div class="controls bullet"><span class="by">zinekeller</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41573439">parent</a><span>|</span><a href="#41572823">next</a><span>|</span><label class="collapse" for="c-41573679">[-]</label><label class="expand" for="c-41573679">[1 more]</label></div><br/><div class="children"><div class="content">Confirmed, it is from an old ESET network filter: <a href="https:&#x2F;&#x2F;support.eset.com&#x2F;en&#x2F;alert8723-network-connection-lost-after-upgrading-to-macos-15-with-eset-macos-product-v6" rel="nofollow">https:&#x2F;&#x2F;support.eset.com&#x2F;en&#x2F;alert8723-network-connection-los...</a></div><br/></div></div></div></div><div id="41572823" class="c"><input type="checkbox" id="c-41572823" checked=""/><div class="controls bullet"><span class="by">TechRemarker</span><span>|</span><a href="#41572180">parent</a><span>|</span><a href="#41573439">prev</a><span>|</span><a href="#41572774">next</a><span>|</span><label class="collapse" for="c-41572823">[-]</label><label class="expand" for="c-41572823">[1 more]</label></div><br/><div class="children"><div class="content">Before Sequoia when using OpenDNS for VPN, could be on VPN and iMessage and other apps still work, but since Sequoia, when on VPN iMessage (text messages) etc no longer work. Once I disconnect to VPN all goes through. Is this related at all? Do have macOS firewall enabled. But not block all incoming connections.</div><br/></div></div><div id="41572774" class="c"><input type="checkbox" id="c-41572774" checked=""/><div class="controls bullet"><span class="by">garyrob</span><span>|</span><a href="#41572180">parent</a><span>|</span><a href="#41572823">prev</a><span>|</span><a href="#41572530">next</a><span>|</span><label class="collapse" for="c-41572774">[-]</label><label class="expand" for="c-41572774">[7 more]</label></div><br/><div class="children"><div class="content">After upgrading to Sequoia, I could not browse with Safari or Mozilla. What fixed it for me was to go to the DNS settings for my Wi-Fi connection, and add Google&#x27;s DNS servers (8.8.8.8. and 8.8.4.4). They replaced the autofilled DNS servers that were there.</div><br/><div id="41573517" class="c"><input type="checkbox" id="c-41573517" checked=""/><div class="controls bullet"><span class="by">greyface-</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41572774">parent</a><span>|</span><a href="#41573011">next</a><span>|</span><label class="collapse" for="c-41573517">[-]</label><label class="expand" for="c-41573517">[3 more]</label></div><br/><div class="children"><div class="content">Were the autofilled DNS servers in RFC1918 private space (10.0.0.0&#x2F;8, 192.168.0.0&#x2F;16, etc.)?  I had issues after the upgrade with Google Chrome being unable to access hosts in these ranges, and fixed it by going to System Settings -&gt; Privacy &amp; Security -&gt; Local Network and toggling Google Chrome off and on again.</div><br/><div id="41573563" class="c"><input type="checkbox" id="c-41573563" checked=""/><div class="controls bullet"><span class="by">garyrob</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41573517">parent</a><span>|</span><a href="#41573011">next</a><span>|</span><label class="collapse" for="c-41573563">[-]</label><label class="expand" for="c-41573563">[2 more]</label></div><br/><div class="children"><div class="content">No, they weren&#x27;t local. I have no idea where they came from. I couldn&#x27;t even delete them, but when I added the Google servers, they autofilled ones were automatically deleted.</div><br/><div id="41573721" class="c"><input type="checkbox" id="c-41573721" checked=""/><div class="controls bullet"><span class="by">kccqzy</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41573563">parent</a><span>|</span><a href="#41573011">next</a><span>|</span><label class="collapse" for="c-41573721">[-]</label><label class="expand" for="c-41573721">[1 more]</label></div><br/><div class="children"><div class="content">They came from DHCP or RDNSS in RA.</div><br/></div></div></div></div></div></div><div id="41573011" class="c"><input type="checkbox" id="c-41573011" checked=""/><div class="controls bullet"><span class="by">JumpCrisscross</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41572774">parent</a><span>|</span><a href="#41573517">prev</a><span>|</span><a href="#41572530">next</a><span>|</span><label class="collapse" for="c-41573011">[-]</label><label class="expand" for="c-41573011">[3 more]</label></div><br/><div class="children"><div class="content">&gt; <i>could not browse with Safari or Mozilla</i><p>FYI, it looks like Firefox fixed this.</div><br/><div id="41573075" class="c"><input type="checkbox" id="c-41573075" checked=""/><div class="controls bullet"><span class="by">zakki</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41573011">parent</a><span>|</span><a href="#41572530">next</a><span>|</span><label class="collapse" for="c-41573075">[-]</label><label class="expand" for="c-41573075">[2 more]</label></div><br/><div class="children"><div class="content">So not macOS error?</div><br/><div id="41573130" class="c"><input type="checkbox" id="c-41573130" checked=""/><div class="controls bullet"><span class="by">JumpCrisscross</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41573075">parent</a><span>|</span><a href="#41572530">next</a><span>|</span><label class="collapse" for="c-41573130">[-]</label><label class="expand" for="c-41573130">[1 more]</label></div><br/><div class="children"><div class="content">&gt; <i>not macOS error?</i><p>It worked before I upgraded to Sequoia. But I don&#x27;t know enough to point fingers. Just mentioning that turning off the firewall long enough for Firefox to update fixes the problem.</div><br/></div></div></div></div></div></div></div></div><div id="41572530" class="c"><input type="checkbox" id="c-41572530" checked=""/><div class="controls bullet"><span class="by">OptionOfT</span><span>|</span><a href="#41572180">parent</a><span>|</span><a href="#41572774">prev</a><span>|</span><a href="#41572040">next</a><span>|</span><label class="collapse" for="c-41572530">[-]</label><label class="expand" for="c-41572530">[23 more]</label></div><br/><div class="children"><div class="content">Honestly, I&#x27;m fine with that. Applications themselves should not be resolving DNS outside of what I set in settings.<p>The reasons applications do this is to prevent users from blocking telemetry etc. It&#x27;s my computer, I should have final say on what goes out.</div><br/><div id="41572579" class="c"><input type="checkbox" id="c-41572579" checked=""/><div class="controls bullet"><span class="by">amluto</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41572530">parent</a><span>|</span><a href="#41572671">next</a><span>|</span><label class="collapse" for="c-41572579">[-]</label><label class="expand" for="c-41572579">[4 more]</label></div><br/><div class="children"><div class="content">There is no such thing as a remotely cross-platform DNS resolution API that has the system do the lookup and does not utterly suck for asynchronous use.</div><br/><div id="41573478" class="c"><input type="checkbox" id="c-41573478" checked=""/><div class="controls bullet"><span class="by">wtallis</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41572579">parent</a><span>|</span><a href="#41572683">next</a><span>|</span><label class="collapse" for="c-41573478">[-]</label><label class="expand" for="c-41573478">[2 more]</label></div><br/><div class="children"><div class="content">I suspect &quot;cross-platform&quot; is doing a lot of heavy lifting for your claim. Browser engines and application frameworks built on top of them have no trouble using platform-specific APIs under the hood.</div><br/><div id="41573660" class="c"><input type="checkbox" id="c-41573660" checked=""/><div class="controls bullet"><span class="by">spookie</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41573478">parent</a><span>|</span><a href="#41572683">next</a><span>|</span><label class="collapse" for="c-41573660">[-]</label><label class="expand" for="c-41573660">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, but frameworks are yet another level of abstraction and dependency that just kills momentum.</div><br/></div></div></div></div></div></div><div id="41572671" class="c"><input type="checkbox" id="c-41572671" checked=""/><div class="controls bullet"><span class="by">nullindividual</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41572530">parent</a><span>|</span><a href="#41572579">prev</a><span>|</span><a href="#41573177">next</a><span>|</span><label class="collapse" for="c-41572671">[-]</label><label class="expand" for="c-41572671">[2 more]</label></div><br/><div class="children"><div class="content">All major browsers now implement the ability to use a browser-defined resolver.</div><br/><div id="41573963" class="c"><input type="checkbox" id="c-41573963" checked=""/><div class="controls bullet"><span class="by">lxgr</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41572671">parent</a><span>|</span><a href="#41573177">next</a><span>|</span><label class="collapse" for="c-41573963">[-]</label><label class="expand" for="c-41573963">[1 more]</label></div><br/><div class="children"><div class="content">Yes, and some of them even make it the default under some circumstances.<p>I agree with GP that this is generally not a great trend.</div><br/></div></div></div></div><div id="41573177" class="c"><input type="checkbox" id="c-41573177" checked=""/><div class="controls bullet"><span class="by">nox101</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41572530">parent</a><span>|</span><a href="#41572671">prev</a><span>|</span><a href="#41572750">next</a><span>|</span><label class="collapse" for="c-41573177">[-]</label><label class="expand" for="c-41573177">[1 more]</label></div><br/><div class="children"><div class="content">I have one browser setup to do DNS differently than another. I don&#x27;t want to have to set it at a system level and then need multiple systems just to run 2 browsers with different DNS lookup</div><br/></div></div><div id="41572750" class="c"><input type="checkbox" id="c-41572750" checked=""/><div class="controls bullet"><span class="by">Dalewyn</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41572530">parent</a><span>|</span><a href="#41573177">prev</a><span>|</span><a href="#41572557">next</a><span>|</span><label class="collapse" for="c-41572750">[-]</label><label class="expand" for="c-41572750">[9 more]</label></div><br/><div class="children"><div class="content">Seeing this getting downvoted is fucking wild.<p>I remember 20+ years ago when one of the most commonly seen attacks was malware configuring a proxy server in Internet Explorer which by design overrode the operating system&#x27;s configuration.<p>What a lot of software does today by ignoring the operating system in lieu of their own shit is just like the above. If your program doesn&#x27;t (or can&#x27;t) respect the operating system, your shit is malware and you should reconsider who you write code for.</div><br/><div id="41574945" class="c"><input type="checkbox" id="c-41574945" checked=""/><div class="controls bullet"><span class="by">nomel</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41572750">parent</a><span>|</span><a href="#41572961">next</a><span>|</span><label class="collapse" for="c-41574945">[-]</label><label class="expand" for="c-41574945">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Seeing this getting downvoted is fucking wild.<p>If you consider the source of income of what&#x27;s most likely a <i>considerable</i> portion of the HN community, I think this makes more sense. Apple is one of the only companies interested in preventing tracking, and it hurts, in the billions sort of way [1][2].<p>[1] <a href="https:&#x2F;&#x2F;www.forbes.com&#x2F;sites&#x2F;kateoflahertyuk&#x2F;2022&#x2F;10&#x2F;08&#x2F;apples-12-billion-strike-to-facebook-is-suddenly-taking-shape&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.forbes.com&#x2F;sites&#x2F;kateoflahertyuk&#x2F;2022&#x2F;10&#x2F;08&#x2F;appl...</a><p>[2] <a href="https:&#x2F;&#x2F;www.forbes.com&#x2F;sites&#x2F;timbajarin&#x2F;2022&#x2F;07&#x2F;26&#x2F;apples-do-not-track-me-rules-are-having-significant-impact-on-digital-advertising&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.forbes.com&#x2F;sites&#x2F;timbajarin&#x2F;2022&#x2F;07&#x2F;26&#x2F;apples-do...</a></div><br/></div></div><div id="41572961" class="c"><input type="checkbox" id="c-41572961" checked=""/><div class="controls bullet"><span class="by">yndoendo</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41572750">parent</a><span>|</span><a href="#41574945">prev</a><span>|</span><a href="#41572557">next</a><span>|</span><label class="collapse" for="c-41572961">[-]</label><label class="expand" for="c-41572961">[7 more]</label></div><br/><div class="children"><div class="content">Those ideas are not isomorphic.<p>One malicious overrides universal network communication while the other just conducts DNS queries limited to a single application domain.</div><br/><div id="41573571" class="c"><input type="checkbox" id="c-41573571" checked=""/><div class="controls bullet"><span class="by">altruios</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41572961">parent</a><span>|</span><a href="#41573104">next</a><span>|</span><label class="collapse" for="c-41573571">[-]</label><label class="expand" for="c-41573571">[1 more]</label></div><br/><div class="children"><div class="content">You are describing something that violates system setting for it&#x27;s own benefit instead of the end user.<p>You are describing malware. Benign malware is still malicious, even if it does no active harm. Intent (of how the software operates) matters.</div><br/></div></div><div id="41573104" class="c"><input type="checkbox" id="c-41573104" checked=""/><div class="controls bullet"><span class="by">Dalewyn</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41572961">parent</a><span>|</span><a href="#41573571">prev</a><span>|</span><a href="#41572557">next</a><span>|</span><label class="collapse" for="c-41573104">[-]</label><label class="expand" for="c-41573104">[5 more]</label></div><br/><div class="children"><div class="content">&gt;just conducts DNS queries<p>Queries that will ignore configurations you set.<p>If I see something ignoring&#x2F;evading my configured DNS server, that shit is fucking malware.</div><br/><div id="41573386" class="c"><input type="checkbox" id="c-41573386" checked=""/><div class="controls bullet"><span class="by">fmajid</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41573104">parent</a><span>|</span><a href="#41573431">next</a><span>|</span><label class="collapse" for="c-41573386">[-]</label><label class="expand" for="c-41573386">[2 more]</label></div><br/><div class="children"><div class="content">At some point in my copious spare time, I plan on writing software to allowlist in my firewall outbound connections only to IPs resolved using my DNS servers.</div><br/><div id="41574264" class="c"><input type="checkbox" id="c-41574264" checked=""/><div class="controls bullet"><span class="by">TheNewsIsHere</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41573386">parent</a><span>|</span><a href="#41573431">next</a><span>|</span><label class="collapse" for="c-41574264">[-]</label><label class="expand" for="c-41574264">[1 more]</label></div><br/><div class="children"><div class="content">You could also configure your router to intercept rogue plaintext DNS lookups on your network with responses from a resolver you trust (for example a Pihole, Cloudflare or Google Public DNS, Quad9, PCH, etc). Adding something like Pihole would give you comprehensive blocking and custom internal DNS entries too.</div><br/></div></div></div></div><div id="41573431" class="c"><input type="checkbox" id="c-41573431" checked=""/><div class="controls bullet"><span class="by">mrkstu</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41573104">parent</a><span>|</span><a href="#41573386">prev</a><span>|</span><a href="#41572557">next</a><span>|</span><label class="collapse" for="c-41573431">[-]</label><label class="expand" for="c-41573431">[2 more]</label></div><br/><div class="children"><div class="content">Have fun troubleshooting Java apps w&#x2F;their own cert stores...</div><br/><div id="41576200" class="c"><input type="checkbox" id="c-41576200" checked=""/><div class="controls bullet"><span class="by">kergonath</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41573431">parent</a><span>|</span><a href="#41572557">next</a><span>|</span><label class="collapse" for="c-41576200">[-]</label><label class="expand" for="c-41576200">[1 more]</label></div><br/><div class="children"><div class="content">I am fine with the only Java application I have used in the lease decade not working. I did not even bother putting a JVM on any of the OS I installed in the last 5 years. So yeah, I’d rather have fewer security holes.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="41572557" class="c"><input type="checkbox" id="c-41572557" checked=""/><div class="controls bullet"><span class="by">Spivak</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41572530">parent</a><span>|</span><a href="#41572750">prev</a><span>|</span><a href="#41572040">next</a><span>|</span><label class="collapse" for="c-41572557">[-]</label><label class="expand" for="c-41572557">[6 more]</label></div><br/><div class="children"><div class="content">Yep, I wish they would go the full way and block socket access entirely so your own outgoing traffic is always introspectable even with cert pinning. It would make it blatantly obvious when apps try shady shit.</div><br/><div id="41574912" class="c"><input type="checkbox" id="c-41574912" checked=""/><div class="controls bullet"><span class="by">nomel</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41572557">parent</a><span>|</span><a href="#41572735">next</a><span>|</span><label class="collapse" for="c-41574912">[-]</label><label class="expand" for="c-41574912">[2 more]</label></div><br/><div class="children"><div class="content">I had a <i>great</i> Windows firewall like this about 20 years ago. It would pop up a dialog for <i>every</i> network request from an app. You could block or allow based on port or destination, or &quot;block all&quot;. It was amazing, because as you say, it made it <i>very</i> obvious when an app was trying shady shit.<p>I would love to have that back, but I was never able to find a firewall so hostile to the user experience of the general population.</div><br/><div id="41576218" class="c"><input type="checkbox" id="c-41576218" checked=""/><div class="controls bullet"><span class="by">kergonath</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41574912">parent</a><span>|</span><a href="#41572735">next</a><span>|</span><label class="collapse" for="c-41576218">[-]</label><label class="expand" for="c-41576218">[1 more]</label></div><br/><div class="children"><div class="content">It sounds similar in spirit to Little Snitch, mentioned in the article (on macOS, but which inspired OpenSnitch, which runs on Linux). It is awesome indeed, if a bit overwhelming at first. Most regular users would just uninstall it to avoid the constant barrage of requests initially, and then every time a new piece of software tries to connect to anything.</div><br/></div></div></div></div><div id="41572735" class="c"><input type="checkbox" id="c-41572735" checked=""/><div class="controls bullet"><span class="by">newaccount74</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41572557">parent</a><span>|</span><a href="#41574912">prev</a><span>|</span><a href="#41572040">next</a><span>|</span><label class="collapse" for="c-41572735">[-]</label><label class="expand" for="c-41572735">[3 more]</label></div><br/><div class="children"><div class="content">Shady shit? Not every network request is a call to an HTTP REST API.<p>Blocking socket APIs would break every app that supports other protocols. Goodbye file transfer apps, VPN apps, file sync apps, database tools, SSH clients, remote desktop clients, audio and video conferencing apps, etc.</div><br/><div id="41573077" class="c"><input type="checkbox" id="c-41573077" checked=""/><div class="controls bullet"><span class="by">9dev</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41572735">parent</a><span>|</span><a href="#41573436">next</a><span>|</span><label class="collapse" for="c-41573077">[-]</label><label class="expand" for="c-41573077">[1 more]</label></div><br/><div class="children"><div class="content">As long as I can add exceptions for those apps to my firewall, I’m kind of… okay with that?</div><br/></div></div><div id="41573436" class="c"><input type="checkbox" id="c-41573436" checked=""/><div class="controls bullet"><span class="by">Spivak</span><span>|</span><a href="#41572180">root</a><span>|</span><a href="#41572735">parent</a><span>|</span><a href="#41573077">prev</a><span>|</span><a href="#41572040">next</a><span>|</span><label class="collapse" for="c-41573436">[-]</label><label class="expand" for="c-41573436">[1 more]</label></div><br/><div class="children"><div class="content">Shady shit meaning really obvious when you&#x27;re making http calls with encrypted opaque blobs.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="41572040" class="c"><input type="checkbox" id="c-41572040" checked=""/><div class="controls bullet"><span class="by">skrrtww</span><span>|</span><a href="#41572180">prev</a><span>|</span><a href="#41574438">next</a><span>|</span><label class="collapse" for="c-41572040">[-]</label><label class="expand" for="c-41572040">[7 more]</label></div><br/><div class="children"><div class="content">The title sort of implies this is intentional or privileged to Apple, while it rather seems more like just a bug.<p>I also wish people would post the FB numbers and the details of their report when they say they&#x27;ve reported things like this.</div><br/><div id="41572513" class="c"><input type="checkbox" id="c-41572513" checked=""/><div class="controls bullet"><span class="by">Reptur</span><span>|</span><a href="#41572040">parent</a><span>|</span><a href="#41572295">next</a><span>|</span><label class="collapse" for="c-41572513">[-]</label><label class="expand" for="c-41572513">[2 more]</label></div><br/><div class="children"><div class="content">Devil&#x27;s advocate would say: They could do this and make it look like a bug that never gets fixed in order to avoid backlash. How it gets achieved is flexible if the goal is met.</div><br/><div id="41576233" class="c"><input type="checkbox" id="c-41576233" checked=""/><div class="controls bullet"><span class="by">kergonath</span><span>|</span><a href="#41572040">root</a><span>|</span><a href="#41572513">parent</a><span>|</span><a href="#41572295">next</a><span>|</span><label class="collapse" for="c-41576233">[-]</label><label class="expand" for="c-41576233">[1 more]</label></div><br/><div class="children"><div class="content">Why would they be afraid of backlash on such an obscure, technical feature? They never were in the past and are expected to take controversial technical decisions by now. And by “now”, I mean in the last 30-odd years.</div><br/></div></div></div></div><div id="41572295" class="c"><input type="checkbox" id="c-41572295" checked=""/><div class="controls bullet"><span class="by">pkulak</span><span>|</span><a href="#41572040">parent</a><span>|</span><a href="#41572513">prev</a><span>|</span><a href="#41574438">next</a><span>|</span><label class="collapse" for="c-41572295">[-]</label><label class="expand" for="c-41572295">[4 more]</label></div><br/><div class="children"><div class="content">Yeah, if it was intentional, it would probably be a hard-coded, encrypted URL. Some devices are starting to do that to get around ad blocking.</div><br/><div id="41572353" class="c"><input type="checkbox" id="c-41572353" checked=""/><div class="controls bullet"><span class="by">hiatus</span><span>|</span><a href="#41572040">root</a><span>|</span><a href="#41572295">parent</a><span>|</span><a href="#41574438">next</a><span>|</span><label class="collapse" for="c-41572353">[-]</label><label class="expand" for="c-41572353">[3 more]</label></div><br/><div class="children"><div class="content">Good thing you can still see the domain over the network if you control the network.</div><br/><div id="41573735" class="c"><input type="checkbox" id="c-41573735" checked=""/><div class="controls bullet"><span class="by">lukevp</span><span>|</span><a href="#41572040">root</a><span>|</span><a href="#41572353">parent</a><span>|</span><a href="#41574438">next</a><span>|</span><label class="collapse" for="c-41573735">[-]</label><label class="expand" for="c-41573735">[2 more]</label></div><br/><div class="children"><div class="content">You can’t control anything if they do DNS over HTTPS to a hardcoded IP they control and cert pin so you can’t MITM the connection, can you?</div><br/><div id="41574237" class="c"><input type="checkbox" id="c-41574237" checked=""/><div class="controls bullet"><span class="by">userbinator</span><span>|</span><a href="#41572040">root</a><span>|</span><a href="#41573735">parent</a><span>|</span><a href="#41574438">next</a><span>|</span><label class="collapse" for="c-41574237">[-]</label><label class="expand" for="c-41574237">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s what a firewall is for.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="41574438" class="c"><input type="checkbox" id="c-41574438" checked=""/><div class="controls bullet"><span class="by">OJFord</span><span>|</span><a href="#41572040">prev</a><span>|</span><a href="#41572271">next</a><span>|</span><label class="collapse" for="c-41574438">[-]</label><label class="expand" for="c-41574438">[3 more]</label></div><br/><div class="children"><div class="content">I was confused at the Little Snitch mention, and then reading further it just seems like a LS bug, that it only works in certain cases.<p>Well, seems this is the LS blog, so only confusion is why this is portrayed as a macOS bug? I&#x27;m not saying it&#x27;s wrong, it&#x27;s their domain not mine after all, it just doesn&#x27;t seem to be justified in TFA?</div><br/><div id="41576090" class="c"><input type="checkbox" id="c-41576090" checked=""/><div class="controls bullet"><span class="by">kccqzy</span><span>|</span><a href="#41574438">parent</a><span>|</span><a href="#41572271">next</a><span>|</span><label class="collapse" for="c-41576090">[-]</label><label class="expand" for="c-41576090">[2 more]</label></div><br/><div class="children"><div class="content">If the OS allows the registration of a DNS proxy, and some calls bypass the proxy, it&#x27;s squarely an OS bug.</div><br/><div id="41576766" class="c"><input type="checkbox" id="c-41576766" checked=""/><div class="controls bullet"><span class="by">jesprenj</span><span>|</span><a href="#41574438">root</a><span>|</span><a href="#41576090">parent</a><span>|</span><a href="#41572271">next</a><span>|</span><label class="collapse" for="c-41576766">[-]</label><label class="expand" for="c-41576766">[1 more]</label></div><br/><div class="children"><div class="content">Doesn&#x27;t getaddrinfo respect &#x2F;etc&#x2F;resolv.conf? So LittleSnitch should install itself there if it wants to be used by getaddrinfo.<p>Besides, apps can always make direct lookups to a resolver of their choice, bypassing any resolver hints of the operating system.</div><br/></div></div></div></div></div></div><div id="41572271" class="c"><input type="checkbox" id="c-41572271" checked=""/><div class="controls bullet"><span class="by">elashri</span><span>|</span><a href="#41574438">prev</a><span>|</span><a href="#41573414">next</a><span>|</span><label class="collapse" for="c-41572271">[-]</label><label class="expand" for="c-41572271">[1 more]</label></div><br/><div class="children"><div class="content">I maybe imagining but I feel like deja vu that there will be a problem with DNS that would affect Little snitch., Mullvad and others with new releases of iOS and Mac. If true I would really question what apple is doing during their months long developer and beta testing.</div><br/></div></div><div id="41573414" class="c"><input type="checkbox" id="c-41573414" checked=""/><div class="controls bullet"><span class="by">tankenmate</span><span>|</span><a href="#41572271">prev</a><span>|</span><a href="#41572099">next</a><span>|</span><label class="collapse" for="c-41573414">[-]</label><label class="expand" for="c-41573414">[1 more]</label></div><br/><div class="children"><div class="content">I use routedns [0] as my local stub resolver so that I can pick and choose which requests go to where and also what transport they use. It can also blocklist, re-write, cache, load balance, and&#x2F;or handle fall back requests; so it give you lots of control.<p>I use a stub listener on localhost:53 for local requests and then forward them via UDP QUIC (TLS 0-RTT) requests to Cloudflare (1.1.1.1) with caching for most requests. Fast and reasonably secure.<p>[0] <a href="https:&#x2F;&#x2F;github.com&#x2F;folbricht&#x2F;routedns">https:&#x2F;&#x2F;github.com&#x2F;folbricht&#x2F;routedns</a></div><br/></div></div><div id="41572099" class="c"><input type="checkbox" id="c-41572099" checked=""/><div class="controls bullet"><span class="by">xyst</span><span>|</span><a href="#41573414">prev</a><span>|</span><a href="#41572318">next</a><span>|</span><label class="collapse" for="c-41572099">[-]</label><label class="expand" for="c-41572099">[8 more]</label></div><br/><div class="children"><div class="content">If I recall, Apple deprecated use of certain network apis for third party developers. But Apple’s own apps (App Store) do not have these same restrictions. Thus, when trying to filter network traffic via app firewall via new APIs. It would fail since App Store uses legacy APIs.<p>Maybe part of this old bug (that I thought was fixed)</div><br/><div id="41572590" class="c"><input type="checkbox" id="c-41572590" checked=""/><div class="controls bullet"><span class="by">newaccount74</span><span>|</span><a href="#41572099">parent</a><span>|</span><a href="#41572318">next</a><span>|</span><label class="collapse" for="c-41572590">[-]</label><label class="expand" for="c-41572590">[7 more]</label></div><br/><div class="children"><div class="content">getaddrinfo() is not a legacy API, it&#x27;s a standard cross platform API for doing DNS lookups.</div><br/><div id="41572983" class="c"><input type="checkbox" id="c-41572983" checked=""/><div class="controls bullet"><span class="by">indrora</span><span>|</span><a href="#41572099">root</a><span>|</span><a href="#41572590">parent</a><span>|</span><a href="#41573120">next</a><span>|</span><label class="collapse" for="c-41572983">[-]</label><label class="expand" for="c-41572983">[1 more]</label></div><br/><div class="children"><div class="content">Specifically defined by POSIX: <a href="https:&#x2F;&#x2F;pubs.opengroup.org&#x2F;onlinepubs&#x2F;9699919799&#x2F;functions&#x2F;getaddrinfo.html" rel="nofollow">https:&#x2F;&#x2F;pubs.opengroup.org&#x2F;onlinepubs&#x2F;9699919799&#x2F;functions&#x2F;g...</a></div><br/></div></div><div id="41573120" class="c"><input type="checkbox" id="c-41573120" checked=""/><div class="controls bullet"><span class="by">keyboardcaper</span><span>|</span><a href="#41572099">root</a><span>|</span><a href="#41572590">parent</a><span>|</span><a href="#41572983">prev</a><span>|</span><a href="#41573026">next</a><span>|</span><label class="collapse" for="c-41573120">[-]</label><label class="expand" for="c-41573120">[3 more]</label></div><br/><div class="children"><div class="content">Funny how that goes: macOS is POSIX certified but no other desktop BSD or Linux is.</div><br/><div id="41573853" class="c"><input type="checkbox" id="c-41573853" checked=""/><div class="controls bullet"><span class="by">spookie</span><span>|</span><a href="#41572099">root</a><span>|</span><a href="#41573120">parent</a><span>|</span><a href="#41574387">next</a><span>|</span><label class="collapse" for="c-41573853">[-]</label><label class="expand" for="c-41573853">[1 more]</label></div><br/><div class="children"><div class="content">Because it&#x27;s an expensive and lengthy process. And every version would need to be re-certified.</div><br/></div></div><div id="41574387" class="c"><input type="checkbox" id="c-41574387" checked=""/><div class="controls bullet"><span class="by">ajross</span><span>|</span><a href="#41572099">root</a><span>|</span><a href="#41573120">parent</a><span>|</span><a href="#41573853">prev</a><span>|</span><a href="#41573026">next</a><span>|</span><label class="collapse" for="c-41574387">[-]</label><label class="expand" for="c-41574387">[1 more]</label></div><br/><div class="children"><div class="content">There have been POSIX-certified Linux variants.  But the open source projects you use don&#x27;t bother (for obvious reasons) and commercial derivatives like Android and ChromeOS don&#x27;t need it.  Similarly Window NT was POSIX-certified way back in the day yet its descendants aren&#x27;t, even though they implement the same API set (via very different technology).</div><br/></div></div></div></div><div id="41573026" class="c"><input type="checkbox" id="c-41573026" checked=""/><div class="controls bullet"><span class="by">trillic</span><span>|</span><a href="#41572099">root</a><span>|</span><a href="#41572590">parent</a><span>|</span><a href="#41573120">prev</a><span>|</span><a href="#41573203">next</a><span>|</span><label class="collapse" for="c-41573026">[-]</label><label class="expand" for="c-41573026">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s POSIX which Apple generally abides by except for timer_create. macOS is historically officially a UNIX, which would require getaddrinfo.</div><br/></div></div><div id="41573203" class="c"><input type="checkbox" id="c-41573203" checked=""/><div class="controls bullet"><span class="by">nox101</span><span>|</span><a href="#41572099">root</a><span>|</span><a href="#41572590">parent</a><span>|</span><a href="#41573026">prev</a><span>|</span><a href="#41572318">next</a><span>|</span><label class="collapse" for="c-41573203">[-]</label><label class="expand" for="c-41573203">[1 more]</label></div><br/><div class="children"><div class="content">it is apparently on Mac and arguably with good reason. See this comment <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41572770">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41572770</a></div><br/></div></div></div></div></div></div><div id="41572318" class="c"><input type="checkbox" id="c-41572318" checked=""/><div class="controls bullet"><span class="by">Legion</span><span>|</span><a href="#41572099">prev</a><span>|</span><a href="#41576230">next</a><span>|</span><label class="collapse" for="c-41572318">[-]</label><label class="expand" for="c-41572318">[1 more]</label></div><br/><div class="children"><div class="content">I always love the announcements of, &quot;Bug found in new OS release! EDIT: Actually it&#x27;s been there for a while!&quot;</div><br/></div></div><div id="41576230" class="c"><input type="checkbox" id="c-41576230" checked=""/><div class="controls bullet"><span class="by">jms703</span><span>|</span><a href="#41572318">prev</a><span>|</span><a href="#41572084">next</a><span>|</span><label class="collapse" for="c-41576230">[-]</label><label class="expand" for="c-41576230">[1 more]</label></div><br/><div class="children"><div class="content">I wonder how little snitch sets the dns encryption up. In macOS, you need to setup encrypted dns via a profile System (Settings =&gt; General =&gt; VPN, DNS &amp; Device Management) and then in the browser. However, I think terminal and appstore still use whatever server is obtained via DHCP and is not encrypted.</div><br/></div></div><div id="41572084" class="c"><input type="checkbox" id="c-41572084" checked=""/><div class="controls bullet"><span class="by">hypeatei</span><span>|</span><a href="#41576230">prev</a><span>|</span><a href="#41572346">next</a><span>|</span><label class="collapse" for="c-41572084">[-]</label><label class="expand" for="c-41572084">[2 more]</label></div><br/><div class="children"><div class="content">&gt; After further investigation, we found that this bug has already existed at least since macOS 14.5 Sonoma<p>Isn&#x27;t this an inherent risk when attempting to do network stuff in userspace? You&#x27;re at a very high level so hoping that lower level things comply seems risky if DNS encryption is critical to your use case.</div><br/><div id="41572645" class="c"><input type="checkbox" id="c-41572645" checked=""/><div class="controls bullet"><span class="by">newaccount74</span><span>|</span><a href="#41572084">parent</a><span>|</span><a href="#41572346">next</a><span>|</span><label class="collapse" for="c-41572645">[-]</label><label class="expand" for="c-41572645">[1 more]</label></div><br/><div class="children"><div class="content">Apple removed support for kernel extensions, and instead added a bunch of APIs that allow to do network filtering etc in user space. Unfortunately, some of their networking code just bypasses those network filter extensions (probably because of bugs) -- this is not the first time the developers of Little Snitch publicized a bug like this.</div><br/></div></div></div></div><div id="41572346" class="c"><input type="checkbox" id="c-41572346" checked=""/><div class="controls bullet"><span class="by">lapcat</span><span>|</span><a href="#41572084">prev</a><span>|</span><a href="#41573490">next</a><span>|</span><label class="collapse" for="c-41572346">[-]</label><label class="expand" for="c-41572346">[1 more]</label></div><br/><div class="children"><div class="content">Dupe: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41568128">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41568128</a></div><br/></div></div><div id="41573490" class="c"><input type="checkbox" id="c-41573490" checked=""/><div class="controls bullet"><span class="by">ggm</span><span>|</span><a href="#41572346">prev</a><span>|</span><a href="#41573663">next</a><span>|</span><label class="collapse" for="c-41573490">[-]</label><label class="expand" for="c-41573490">[1 more]</label></div><br/><div class="children"><div class="content">&quot;Mac OSX has complex paths into name-to-address translation and a single entrypoint is not well enforced.&quot;<p>this is not &quot;bypass encryption&quot; this is &quot;uses a range of ABI&#x2F;API bindings in code which don&#x27;t expose well into a single control point&quot;</div><br/></div></div><div id="41573991" class="c"><input type="checkbox" id="c-41573991" checked=""/><div class="controls bullet"><span class="by">spr-alex</span><span>|</span><a href="#41573663">prev</a><span>|</span><a href="#41573085">next</a><span>|</span><label class="collapse" for="c-41573991">[-]</label><label class="expand" for="c-41573991">[1 more]</label></div><br/><div class="children"><div class="content">Plugging <a href="https:&#x2F;&#x2F;www.supernetworks.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.supernetworks.org&#x2F;</a> -- when on wifi&#x2F;vpn all DNS will go up over DNS over HTTPS as plaintext DNS is DNAT&#x27;d to CoreDNS which is by default configured to use DoH.</div><br/></div></div><div id="41573085" class="c"><input type="checkbox" id="c-41573085" checked=""/><div class="controls bullet"><span class="by">Reason077</span><span>|</span><a href="#41573991">prev</a><span>|</span><a href="#41572877">next</a><span>|</span><label class="collapse" for="c-41573085">[-]</label><label class="expand" for="c-41573085">[4 more]</label></div><br/><div class="children"><div class="content">&gt; <i>&quot;To protect (DNS lookups) from prying eyes, Little Snitch 6 offers a new feature: DNS encryption.&quot;</i><p>Browsers such as Firefox have offered this directly for a while. Of course, that only covers DNS lookups made from the web browser, but it doesn&#x27;t rely on OS-level hooks that (at least in Apple&#x27;s case) can break.</div><br/><div id="41573206" class="c"><input type="checkbox" id="c-41573206" checked=""/><div class="controls bullet"><span class="by">Mainsail</span><span>|</span><a href="#41573085">parent</a><span>|</span><a href="#41572877">next</a><span>|</span><label class="collapse" for="c-41573206">[-]</label><label class="expand" for="c-41573206">[3 more]</label></div><br/><div class="children"><div class="content">What am I missing here? Reading the article, it appears that Firefox is the browser that seems to be bypassing.</div><br/><div id="41573518" class="c"><input type="checkbox" id="c-41573518" checked=""/><div class="controls bullet"><span class="by">Reason077</span><span>|</span><a href="#41573085">root</a><span>|</span><a href="#41573206">parent</a><span>|</span><a href="#41572877">next</a><span>|</span><label class="collapse" for="c-41573518">[-]</label><label class="expand" for="c-41573518">[2 more]</label></div><br/><div class="children"><div class="content">They&#x27;re using Little Snitch as an OS-level DNS proxy, which should intercept all DNS requests from any app and encrypt them. But, depending on what API the app uses for its DNS lookups, some DNS requests do not go via the proxy. Presumably Firefox, in its default configuration with DNS encryption set to OFF (&quot;Use your default DNS resolver&quot;), uses one the affected APIs.</div><br/><div id="41575662" class="c"><input type="checkbox" id="c-41575662" checked=""/><div class="controls bullet"><span class="by">Mainsail</span><span>|</span><a href="#41573085">root</a><span>|</span><a href="#41573518">parent</a><span>|</span><a href="#41572877">next</a><span>|</span><label class="collapse" for="c-41575662">[-]</label><label class="expand" for="c-41575662">[1 more]</label></div><br/><div class="children"><div class="content">Ah, that makes sense. Ty.</div><br/></div></div></div></div></div></div></div></div><div id="41572877" class="c"><input type="checkbox" id="c-41572877" checked=""/><div class="controls bullet"><span class="by">Avamander</span><span>|</span><a href="#41573085">prev</a><span>|</span><a href="#41573669">next</a><span>|</span><label class="collapse" for="c-41572877">[-]</label><label class="expand" for="c-41572877">[1 more]</label></div><br/><div class="children"><div class="content">Deploying DNS encryption on macOS is in general really tedious. Applying it as a system or user profile has different results. Switching between providers or temporarily disabling DNS encryption is painful.<p>I also still haven&#x27;t figured out how to get SSID-based switching to work, does it even?</div><br/></div></div><div id="41573669" class="c"><input type="checkbox" id="c-41573669" checked=""/><div class="controls bullet"><span class="by">pkilgore</span><span>|</span><a href="#41572877">prev</a><span>|</span><a href="#41572229">next</a><span>|</span><label class="collapse" for="c-41573669">[-]</label><label class="expand" for="c-41573669">[2 more]</label></div><br/><div class="children"><div class="content">My read of this is that it shouldn&#x27;t affect pi.hole given the system&#x27;s default nameserver would still received by DDNS and thus be the pi.hole? Or do these requests go somewhere that&#x27;s hard-coded?</div><br/><div id="41573731" class="c"><input type="checkbox" id="c-41573731" checked=""/><div class="controls bullet"><span class="by">tpmoney</span><span>|</span><a href="#41573669">parent</a><span>|</span><a href="#41572229">next</a><span>|</span><label class="collapse" for="c-41573731">[-]</label><label class="expand" for="c-41573731">[1 more]</label></div><br/><div class="children"><div class="content">No this appears to be if an application registers a DNS resolver proxy on the local system, getaddrinfo doesn&#x27;t use the proxy, and presumably just hits whatever the network interface&#x27;s configured DNS server is.</div><br/></div></div></div></div><div id="41572229" class="c"><input type="checkbox" id="c-41572229" checked=""/><div class="controls bullet"><span class="by">bradgessler</span><span>|</span><a href="#41573669">prev</a><span>|</span><a href="#41573821">next</a><span>|</span><label class="collapse" for="c-41572229">[-]</label><label class="expand" for="c-41572229">[2 more]</label></div><br/><div class="children"><div class="content">I’ve had issues using the Resolv library in Ruby when I’m connecting to the internet via a tethered iPhone. Never ran into that until Sequoia. I wonder if that’s related?<p>TBH I’m too lazy to dig in and find out. Has anybody else run into this issue?</div><br/><div id="41572255" class="c"><input type="checkbox" id="c-41572255" checked=""/><div class="controls bullet"><span class="by">unluckier</span><span>|</span><a href="#41572229">parent</a><span>|</span><a href="#41573821">next</a><span>|</span><label class="collapse" for="c-41572255">[-]</label><label class="expand" for="c-41572255">[1 more]</label></div><br/><div class="children"><div class="content">See: <a href="https:&#x2F;&#x2F;waclaw.blog&#x2F;macos-firewall-blocking-web-browsing-after-upgrading-to-sequoia&#x2F;" rel="nofollow">https:&#x2F;&#x2F;waclaw.blog&#x2F;macos-firewall-blocking-web-browsing-aft...</a><p>If disabling the firewall (for testing) solves this problem, this is likely your issue.</div><br/></div></div></div></div><div id="41573821" class="c"><input type="checkbox" id="c-41573821" checked=""/><div class="controls bullet"><span class="by">zjp</span><span>|</span><a href="#41572229">prev</a><span>|</span><a href="#41575754">next</a><span>|</span><label class="collapse" for="c-41573821">[-]</label><label class="expand" for="c-41573821">[2 more]</label></div><br/><div class="children"><div class="content">Am I susceptible to this if I redirect all DNS traffic on my network to a pihole, which is the only device I let make external DNS requests?</div><br/><div id="41573862" class="c"><input type="checkbox" id="c-41573862" checked=""/><div class="controls bullet"><span class="by">rapatel0</span><span>|</span><a href="#41573821">parent</a><span>|</span><a href="#41575754">next</a><span>|</span><label class="collapse" for="c-41573862">[-]</label><label class="expand" for="c-41573862">[1 more]</label></div><br/><div class="children"><div class="content">If pihole is using DNS encryption for upstream lookups, the this would only affect you on your local network.<p>In other words, it would be unencrypted to the pihole but encrypted when going out to the internet.</div><br/></div></div></div></div><div id="41575754" class="c"><input type="checkbox" id="c-41575754" checked=""/><div class="controls bullet"><span class="by">gigatexal</span><span>|</span><a href="#41573821">prev</a><span>|</span><a href="#41573968">next</a><span>|</span><label class="collapse" for="c-41575754">[-]</label><label class="expand" for="c-41575754">[2 more]</label></div><br/><div class="children"><div class="content">I wonder if this affects iOS, too</div><br/><div id="41576867" class="c"><input type="checkbox" id="c-41576867" checked=""/><div class="controls bullet"><span class="by">jesse_faden</span><span>|</span><a href="#41575754">parent</a><span>|</span><a href="#41573968">next</a><span>|</span><label class="collapse" for="c-41576867">[-]</label><label class="expand" for="c-41576867">[1 more]</label></div><br/><div class="children"><div class="content">I would believe so. I have a custom DNS profile setup that redirects a few domains to a server I run. The server has custom SSL certs issued by a private CA. I the certificate installed on iOS as a trusted root certificate.<p>Everytime I&#x27;m connected to my home WiFi I would randomly get `peer closed connection in SSL handshake (104: Connection reset by peer)`. I have absolutely no clue why it does this and this issue goes away when I&#x27;m connected on mobile data.<p>Now I&#x27;m guessing that it is bypassing the DNS profile and resolving it using my ISPs DNS or some other way.</div><br/></div></div></div></div><div id="41573968" class="c"><input type="checkbox" id="c-41573968" checked=""/><div class="controls bullet"><span class="by">PaulDavisThe1st</span><span>|</span><a href="#41575754">prev</a><span>|</span><a href="#41572300">next</a><span>|</span><label class="collapse" for="c-41573968">[-]</label><label class="expand" for="c-41573968">[1 more]</label></div><br/><div class="children"><div class="content">Can some ELI5 why you&#x27;d use a proxy rather than reset the server name?</div><br/></div></div><div id="41572300" class="c"><input type="checkbox" id="c-41572300" checked=""/><div class="controls bullet"><span class="by">mzs</span><span>|</span><a href="#41573968">prev</a><span>|</span><a href="#41573908">next</a><span>|</span><label class="collapse" for="c-41572300">[-]</label><label class="expand" for="c-41572300">[1 more]</label></div><br/><div class="children"><div class="content">the (complicated) rules:<p><pre><code>  man 5 resolver
</code></pre>
also try with a domain that exists</div><br/></div></div><div id="41573908" class="c"><input type="checkbox" id="c-41573908" checked=""/><div class="controls bullet"><span class="by">sleepybrett</span><span>|</span><a href="#41572300">prev</a><span>|</span><a href="#41573312">next</a><span>|</span><label class="collapse" for="c-41573908">[-]</label><label class="expand" for="c-41573908">[1 more]</label></div><br/><div class="children"><div class="content">macos may bypass LITTLE SNITCH&#x27;S encrypted dns proxy, more like it.</div><br/></div></div><div id="41573312" class="c"><input type="checkbox" id="c-41573312" checked=""/><div class="controls bullet"><span class="by">jedisct1</span><span>|</span><a href="#41573908">prev</a><span>|</span><a href="#41573368">next</a><span>|</span><label class="collapse" for="c-41573312">[-]</label><label class="expand" for="c-41573312">[1 more]</label></div><br/><div class="children"><div class="content">The standard way to use dnscrypt-proxy is to set the resolver to 127.0.0.1.<p>Does Little Snitch do things differently?</div><br/></div></div><div id="41573368" class="c"><input type="checkbox" id="c-41573368" checked=""/><div class="controls bullet"><span class="by">system7rocks</span><span>|</span><a href="#41573312">prev</a><span>|</span><a href="#41574200">next</a><span>|</span><label class="collapse" for="c-41573368">[-]</label><label class="expand" for="c-41573368">[1 more]</label></div><br/><div class="children"><div class="content">Hmm. I use NextDNS for this feature. I think. May have to do some testing to see whether or not it is operational at all.</div><br/></div></div><div id="41574200" class="c"><input type="checkbox" id="c-41574200" checked=""/><div class="controls bullet"><span class="by">gsich</span><span>|</span><a href="#41573368">prev</a><span>|</span><a href="#41576903">next</a><span>|</span><label class="collapse" for="c-41574200">[-]</label><label class="expand" for="c-41574200">[1 more]</label></div><br/><div class="children"><div class="content">Why is a DNS proxy needed? My assumption is that you configure DoT or DoH (which I interpret as DNS encryption) somewhere in the settings of the OS.</div><br/></div></div></div></div></div></div></div></body></html>