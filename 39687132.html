<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1710320462169" as="style"/><link rel="stylesheet" href="styles.css?v=1710320462169"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/Syllo/nvtop">Nvtop: Linux Task Monitor for Nvidia, AMD and Intel GPUs</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>alexzeitler</span> | <span>34 comments</span></div><br/><div><div id="39688845" class="c"><input type="checkbox" id="c-39688845" checked=""/><div class="controls bullet"><span class="by">distalx</span><span>|</span><a href="#39687549">next</a><span>|</span><label class="collapse" for="c-39688845">[-]</label><label class="expand" for="c-39688845">[2 more]</label></div><br/><div class="children"><div class="content">There is also Nvitop[1], which is more to my liking.<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;XuehaiPan&#x2F;nvitop">https:&#x2F;&#x2F;github.com&#x2F;XuehaiPan&#x2F;nvitop</a></div><br/><div id="39688983" class="c"><input type="checkbox" id="c-39688983" checked=""/><div class="controls bullet"><span class="by">kiraaa</span><span>|</span><a href="#39688845">parent</a><span>|</span><a href="#39687549">next</a><span>|</span><label class="collapse" for="c-39688983">[-]</label><label class="expand" for="c-39688983">[1 more]</label></div><br/><div class="children"><div class="content">super easy to install and use</div><br/></div></div></div></div><div id="39687549" class="c"><input type="checkbox" id="c-39687549" checked=""/><div class="controls bullet"><span class="by">formalsystem</span><span>|</span><a href="#39688845">prev</a><span>|</span><a href="#39689120">next</a><span>|</span><label class="collapse" for="c-39687549">[-]</label><label class="expand" for="c-39687549">[7 more]</label></div><br/><div class="children"><div class="content">nvtop or nvidia-smi gives you a good macro overview but I personally have found that utilization (EDIT: As reported by nvidia-smi) is actually a poor proxy for how fast your workload can be outside of just ensuring that a GPU is indeed being used<p>If you&#x27;re here because you&#x27;re interested in AI performance I&#x27;d recommend instead <a href="https:&#x2F;&#x2F;docs.nvidia.com&#x2F;nsight-compute&#x2F;NsightComputeCli&#x2F;index.html" rel="nofollow">https:&#x2F;&#x2F;docs.nvidia.com&#x2F;nsight-compute&#x2F;NsightComputeCli&#x2F;inde...</a> to profile individual kernels. Nsight systems for a macro view <a href="https:&#x2F;&#x2F;developer.nvidia.com&#x2F;nsight-systems" rel="nofollow">https:&#x2F;&#x2F;developer.nvidia.com&#x2F;nsight-systems</a> and the PyTorch profiler if you&#x27;re not authoring kernels directly but using something PyTorch <a href="https:&#x2F;&#x2F;pytorch.org&#x2F;tutorials&#x2F;recipes&#x2F;recipes&#x2F;profiler_recipe.html" rel="nofollow">https:&#x2F;&#x2F;pytorch.org&#x2F;tutorials&#x2F;recipes&#x2F;recipes&#x2F;profiler_recip...</a></div><br/><div id="39687774" class="c"><input type="checkbox" id="c-39687774" checked=""/><div class="controls bullet"><span class="by">pama</span><span>|</span><a href="#39687549">parent</a><span>|</span><a href="#39687626">next</a><span>|</span><label class="collapse" for="c-39687774">[-]</label><label class="expand" for="c-39687774">[1 more]</label></div><br/><div class="children"><div class="content">I agree that utilization by nvidia-smi is a poor proxy for performance. FWIW, I’ve found that for the same architecture the power consumption reported in nvtop very often correlates super nicely with the training performance and the peak performance is always at peak power consumption. Agreed on your advice for getting to tune your architecture details, but once that’s fixed and you have simple things to debug like memory usage, batch size, dataloading bottlenecks the raw power metric is typically a quick proxy.  I find the temperature is a second useful macro metric that; you want to be at max power draw and max allowed temp at all times but not exceed the temperature where you throttle.</div><br/></div></div><div id="39687626" class="c"><input type="checkbox" id="c-39687626" checked=""/><div class="controls bullet"><span class="by">refibrillator</span><span>|</span><a href="#39687549">parent</a><span>|</span><a href="#39687774">prev</a><span>|</span><a href="#39687768">next</a><span>|</span><label class="collapse" for="c-39687626">[-]</label><label class="expand" for="c-39687626">[1 more]</label></div><br/><div class="children"><div class="content">FLOPs utilization is arguably the industry standard metric for efficiency right now and it should be a good first approximation of how much performance is left on the table.<p>But if you mean the reported utilization in nvtop is misleading I completely agree (as someone who uses it daily).<p>I’ve been meaning to dig into the source&#x2F;docs to see what’s going on. The power usage seems to be a more reliable indicator of actual hardware utilization, at least on nvidia gear.</div><br/></div></div><div id="39687768" class="c"><input type="checkbox" id="c-39687768" checked=""/><div class="controls bullet"><span class="by">ipsum2</span><span>|</span><a href="#39687549">parent</a><span>|</span><a href="#39687626">prev</a><span>|</span><a href="#39688027">next</a><span>|</span><label class="collapse" for="c-39687768">[-]</label><label class="expand" for="c-39687768">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been going off of power draw in nvidia-smi as a proxy of util, doesn&#x27;t require additional setup or code changes.</div><br/><div id="39688277" class="c"><input type="checkbox" id="c-39688277" checked=""/><div class="controls bullet"><span class="by">KeplerBoy</span><span>|</span><a href="#39687549">root</a><span>|</span><a href="#39687768">parent</a><span>|</span><a href="#39688027">next</a><span>|</span><label class="collapse" for="c-39688277">[-]</label><label class="expand" for="c-39688277">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s hard to argue with. Of course power draw is a direct measure of hardware utilization, but it doesn&#x27;t translate very well to a measure of GPU Code efficiency.<p>Often you can squeeze out another order of magnitude of performance by rewriting the kernel and the power draw will always stay capped at whatever the maximum is. I&#x27;d say GPU power consumption is interesting if you&#x27;re CPU bound and struggling to feed the GPU enough data and&#x2F;or tasks.</div><br/></div></div></div></div><div id="39688027" class="c"><input type="checkbox" id="c-39688027" checked=""/><div class="controls bullet"><span class="by">samstave</span><span>|</span><a href="#39687549">parent</a><span>|</span><a href="#39687768">prev</a><span>|</span><a href="#39689120">next</a><span>|</span><label class="collapse" for="c-39688027">[-]</label><label class="expand" for="c-39688027">[2 more]</label></div><br/><div class="children"><div class="content">If you install Docker Desktop with WSL2 checked, it automatically lets you run Nvidia-SMI in your WSL ubuntu environ on Windows:<p><a href="https:&#x2F;&#x2F;i.imgur.com&#x2F;C24EV5U.png" rel="nofollow">https:&#x2F;&#x2F;i.imgur.com&#x2F;C24EV5U.png</a><p>then sudo apt install nvtop<p><a href="https:&#x2F;&#x2F;i.imgur.com&#x2F;SOoCdvR.png" rel="nofollow">https:&#x2F;&#x2F;i.imgur.com&#x2F;SOoCdvR.png</a><p>EDIT:<p>Thanks, Some people were having random problems installing WSL on their systems and I found this was the easiest solution (but based on their card models, they appeared to have much older machines.</div><br/><div id="39688238" class="c"><input type="checkbox" id="c-39688238" checked=""/><div class="controls bullet"><span class="by">acka</span><span>|</span><a href="#39687549">root</a><span>|</span><a href="#39688027">parent</a><span>|</span><a href="#39689120">next</a><span>|</span><label class="collapse" for="c-39688238">[-]</label><label class="expand" for="c-39688238">[1 more]</label></div><br/><div class="children"><div class="content">There is no need to install Docker Desktop just to run nvidia-smi in WSL; the Windows directory containing the nvidia-smi binary is mounted inside a WSL instance and added to PATH automatically by WSL  on instance startup.<p>As an aside: there is no need to install Docker Desktop just to use Docker containers in WSL either, unless you want a Windows GUI to manage your containers. Just follow the official documentation for installing Docker in your Linux distro of choice, or simply run `sudo apt install docker.io` in the default WSL Ubuntu distro. Docker will work just fine with an up-to-date WSL.</div><br/></div></div></div></div></div></div><div id="39689120" class="c"><input type="checkbox" id="c-39689120" checked=""/><div class="controls bullet"><span class="by">blagie</span><span>|</span><a href="#39687549">prev</a><span>|</span><a href="#39689178">next</a><span>|</span><label class="collapse" for="c-39689120">[-]</label><label class="expand" for="c-39689120">[1 more]</label></div><br/><div class="children"><div class="content">Now that I use Home Assistant, I want all my data sources to plug into there. It can handle the rendering for me as I see fit, and it&#x27;s where data comes to integrate.<p>It&#x27;s one of those things which I wish existed, but I can&#x27;t imagine anyone would have written. Until I do a web search.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;koriwi&#x2F;sensors2mqtt&#x2F;tree&#x2F;main">https:&#x2F;&#x2F;github.com&#x2F;koriwi&#x2F;sensors2mqtt&#x2F;tree&#x2F;main</a><p>I have not used it yet, but that seems like how I&#x27;d want to do it.</div><br/></div></div><div id="39689178" class="c"><input type="checkbox" id="c-39689178" checked=""/><div class="controls bullet"><span class="by">stuaxo</span><span>|</span><a href="#39689120">prev</a><span>|</span><a href="#39689175">next</a><span>|</span><label class="collapse" for="c-39689178">[-]</label><label class="expand" for="c-39689178">[1 more]</label></div><br/><div class="children"><div class="content">Its good to see linux graphics card utilities going multi platform, instead of the old way of being per-driver.</div><br/></div></div><div id="39689175" class="c"><input type="checkbox" id="c-39689175" checked=""/><div class="controls bullet"><span class="by">Ycros</span><span>|</span><a href="#39689178">prev</a><span>|</span><a href="#39687498">next</a><span>|</span><label class="collapse" for="c-39689175">[-]</label><label class="expand" for="c-39689175">[1 more]</label></div><br/><div class="children"><div class="content">I prefer btop, it does all the usual process monitoring as well as gpus in the latest versions.</div><br/></div></div><div id="39687498" class="c"><input type="checkbox" id="c-39687498" checked=""/><div class="controls bullet"><span class="by">hughesjj</span><span>|</span><a href="#39689175">prev</a><span>|</span><a href="#39688643">next</a><span>|</span><label class="collapse" for="c-39687498">[-]</label><label class="expand" for="c-39687498">[3 more]</label></div><br/><div class="children"><div class="content">Nvtop+bottom are my favorite resource monitors for Linux today, but TIL nvtop also works for non-nvidia devices</div><br/><div id="39687957" class="c"><input type="checkbox" id="c-39687957" checked=""/><div class="controls bullet"><span class="by">freedomben</span><span>|</span><a href="#39687498">parent</a><span>|</span><a href="#39688643">next</a><span>|</span><label class="collapse" for="c-39687957">[-]</label><label class="expand" for="c-39687957">[2 more]</label></div><br/><div class="children"><div class="content">wow, bottom[1] is awesome!  This is now my favorite monitor It&#x27;s not in the Fedora repos but there&#x27;s a COPR for it.  To install:<p><pre><code>    sudo dnf copr enable atim&#x2F;bottom
    sudo dnf install bottom
</code></pre>
[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;ClementTsang&#x2F;bottom">https:&#x2F;&#x2F;github.com&#x2F;ClementTsang&#x2F;bottom</a></div><br/><div id="39688240" class="c"><input type="checkbox" id="c-39688240" checked=""/><div class="controls bullet"><span class="by">petepete</span><span>|</span><a href="#39687498">root</a><span>|</span><a href="#39687957">parent</a><span>|</span><a href="#39688643">next</a><span>|</span><label class="collapse" for="c-39688240">[-]</label><label class="expand" for="c-39688240">[1 more]</label></div><br/><div class="children"><div class="content">btop++ is also worth a look if you like bottom, another take on a modern htop.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;aristocratos&#x2F;btop">https:&#x2F;&#x2F;github.com&#x2F;aristocratos&#x2F;btop</a></div><br/></div></div></div></div></div></div><div id="39688643" class="c"><input type="checkbox" id="c-39688643" checked=""/><div class="controls bullet"><span class="by">notorandit</span><span>|</span><a href="#39687498">prev</a><span>|</span><a href="#39688004">next</a><span>|</span><label class="collapse" for="c-39688643">[-]</label><label class="expand" for="c-39688643">[4 more]</label></div><br/><div class="children"><div class="content">It is nice.
But the status of GPU support in Linux is rather poor.<p>I can see it working only with VLC.<p>Firefox has some support while chromium based browsers have that only formally.<p>In the real world you never see the video hw acceleration kicking in, neither with webrtc nor with videos.<p>It is a pity.</div><br/><div id="39688655" class="c"><input type="checkbox" id="c-39688655" checked=""/><div class="controls bullet"><span class="by">KeplerBoy</span><span>|</span><a href="#39688643">parent</a><span>|</span><a href="#39688004">next</a><span>|</span><label class="collapse" for="c-39688655">[-]</label><label class="expand" for="c-39688655">[3 more]</label></div><br/><div class="children"><div class="content">it&#x27;s a valuable tool wherever GPU compute is used. Not sure if video decoding would even register as utilization since that is dedicated hardware.</div><br/><div id="39688780" class="c"><input type="checkbox" id="c-39688780" checked=""/><div class="controls bullet"><span class="by">usr1106</span><span>|</span><a href="#39688643">root</a><span>|</span><a href="#39688655">parent</a><span>|</span><a href="#39688004">next</a><span>|</span><label class="collapse" for="c-39688780">[-]</label><label class="expand" for="c-39688780">[2 more]</label></div><br/><div class="children"><div class="content">Yes, you can see video decoding, but it&#x27;s indeed only one detail of the data presented, as it&#x27;s only a part of the HW.<p>Not at my computer now, can&#x27;t tell what metric to watch.</div><br/><div id="39689009" class="c"><input type="checkbox" id="c-39689009" checked=""/><div class="controls bullet"><span class="by">KeplerBoy</span><span>|</span><a href="#39688643">root</a><span>|</span><a href="#39688780">parent</a><span>|</span><a href="#39688004">next</a><span>|</span><label class="collapse" for="c-39689009">[-]</label><label class="expand" for="c-39689009">[1 more]</label></div><br/><div class="children"><div class="content">ah yes, you can configure nvtop to display encode and decode loads. Interesting to watch how playback speed in VLC is directly reflected in the metric.</div><br/></div></div></div></div></div></div></div></div><div id="39688004" class="c"><input type="checkbox" id="c-39688004" checked=""/><div class="controls bullet"><span class="by">pavelstoev</span><span>|</span><a href="#39688643">prev</a><span>|</span><a href="#39687769">next</a><span>|</span><label class="collapse" for="c-39688004">[-]</label><label class="expand" for="c-39688004">[1 more]</label></div><br/><div class="children"><div class="content">you can also profile AI&#x2F;ML performance without actually running it <a href="https:&#x2F;&#x2F;github.com&#x2F;CentML&#x2F;DeepView.Profile">https:&#x2F;&#x2F;github.com&#x2F;CentML&#x2F;DeepView.Profile</a></div><br/></div></div><div id="39687769" class="c"><input type="checkbox" id="c-39687769" checked=""/><div class="controls bullet"><span class="by">malux85</span><span>|</span><a href="#39688004">prev</a><span>|</span><a href="#39687753">next</a><span>|</span><label class="collapse" for="c-39687769">[-]</label><label class="expand" for="c-39687769">[5 more]</label></div><br/><div class="children"><div class="content">There is also nvitop, which I find better utilizes screen space when &gt; 2 GPUS<p><a href="https:&#x2F;&#x2F;github.com&#x2F;XuehaiPan&#x2F;nvitop">https:&#x2F;&#x2F;github.com&#x2F;XuehaiPan&#x2F;nvitop</a></div><br/><div id="39688849" class="c"><input type="checkbox" id="c-39688849" checked=""/><div class="controls bullet"><span class="by">sa-code</span><span>|</span><a href="#39687769">parent</a><span>|</span><a href="#39688023">next</a><span>|</span><label class="collapse" for="c-39688849">[-]</label><label class="expand" for="c-39688849">[2 more]</label></div><br/><div class="children"><div class="content">The downside with nvitop is that it&#x27;s written in python, which means having it in your environment can cause dependency conflicts. It&#x27;s either that or you have a separate venv just for it. Maybe it&#x27;s fine for personal use but sysadmins would prefer nvtop</div><br/><div id="39689065" class="c"><input type="checkbox" id="c-39689065" checked=""/><div class="controls bullet"><span class="by">cl3misch</span><span>|</span><a href="#39687769">root</a><span>|</span><a href="#39688849">parent</a><span>|</span><a href="#39688023">next</a><span>|</span><label class="collapse" for="c-39689065">[-]</label><label class="expand" for="c-39689065">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s why the authors recommend pipx for installing nvitop. I am not a sysadmin, but I prefer pipx over relying on the (often  outdated) distro sources.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;XuehaiPan&#x2F;nvitop?tab=readme-ov-file#installation">https:&#x2F;&#x2F;github.com&#x2F;XuehaiPan&#x2F;nvitop?tab=readme-ov-file#insta...</a></div><br/></div></div></div></div><div id="39688023" class="c"><input type="checkbox" id="c-39688023" checked=""/><div class="controls bullet"><span class="by">freedomben</span><span>|</span><a href="#39687769">parent</a><span>|</span><a href="#39688849">prev</a><span>|</span><a href="#39687753">next</a><span>|</span><label class="collapse" for="c-39688023">[-]</label><label class="expand" for="c-39688023">[2 more]</label></div><br/><div class="children"><div class="content">Does nvitop support AMD cards?</div><br/><div id="39688580" class="c"><input type="checkbox" id="c-39688580" checked=""/><div class="controls bullet"><span class="by">malux85</span><span>|</span><a href="#39687769">root</a><span>|</span><a href="#39688023">parent</a><span>|</span><a href="#39687753">next</a><span>|</span><label class="collapse" for="c-39688580">[-]</label><label class="expand" for="c-39688580">[1 more]</label></div><br/><div class="children"><div class="content">Not sure sorry, I only have nvidia :&lt;</div><br/></div></div></div></div></div></div><div id="39687753" class="c"><input type="checkbox" id="c-39687753" checked=""/><div class="controls bullet"><span class="by">cyberax</span><span>|</span><a href="#39687769">prev</a><span>|</span><a href="#39687867">next</a><span>|</span><label class="collapse" for="c-39687753">[-]</label><label class="expand" for="c-39687753">[1 more]</label></div><br/><div class="children"><div class="content">Is there a description of the wire protocol between the driver and NVidia library?<p>Context: I&#x27;d love to have a native Go-language library to read the GPU utilization for containerized workloads.</div><br/></div></div><div id="39687867" class="c"><input type="checkbox" id="c-39687867" checked=""/><div class="controls bullet"><span class="by">brcmthrowaway</span><span>|</span><a href="#39687753">prev</a><span>|</span><a href="#39688340">next</a><span>|</span><label class="collapse" for="c-39687867">[-]</label><label class="expand" for="c-39687867">[4 more]</label></div><br/><div class="children"><div class="content">Anything for MACOS?</div><br/><div id="39688363" class="c"><input type="checkbox" id="c-39688363" checked=""/><div class="controls bullet"><span class="by">kernelsanderz</span><span>|</span><a href="#39687867">parent</a><span>|</span><a href="#39688058">next</a><span>|</span><label class="collapse" for="c-39688363">[-]</label><label class="expand" for="c-39688363">[1 more]</label></div><br/><div class="children"><div class="content">There’s also asitop <a href="https:&#x2F;&#x2F;github.com&#x2F;tlkh&#x2F;asitop">https:&#x2F;&#x2F;github.com&#x2F;tlkh&#x2F;asitop</a></div><br/></div></div><div id="39688058" class="c"><input type="checkbox" id="c-39688058" checked=""/><div class="controls bullet"><span class="by">evilduck</span><span>|</span><a href="#39687867">parent</a><span>|</span><a href="#39688363">prev</a><span>|</span><a href="#39688370">next</a><span>|</span><label class="collapse" for="c-39688058">[-]</label><label class="expand" for="c-39688058">[1 more]</label></div><br/><div class="children"><div class="content">nvtop supposedly builds for macOS, but <a href="https:&#x2F;&#x2F;lib.rs&#x2F;crates&#x2F;pumas" rel="nofollow">https:&#x2F;&#x2F;lib.rs&#x2F;crates&#x2F;pumas</a> is similar.</div><br/></div></div><div id="39688370" class="c"><input type="checkbox" id="c-39688370" checked=""/><div class="controls bullet"><span class="by">itsgrimetime</span><span>|</span><a href="#39687867">parent</a><span>|</span><a href="#39688058">prev</a><span>|</span><a href="#39688340">next</a><span>|</span><label class="collapse" for="c-39688370">[-]</label><label class="expand" for="c-39688370">[1 more]</label></div><br/><div class="children"><div class="content">its not a terminal app like bottom or nvtop but I use <a href="https:&#x2F;&#x2F;github.com&#x2F;exelban&#x2F;stats">https:&#x2F;&#x2F;github.com&#x2F;exelban&#x2F;stats</a> and it has iGPU stats</div><br/></div></div></div></div><div id="39688340" class="c"><input type="checkbox" id="c-39688340" checked=""/><div class="controls bullet"><span class="by">shmerl</span><span>|</span><a href="#39687867">prev</a><span>|</span><a href="#39688113">next</a><span>|</span><label class="collapse" for="c-39688340">[-]</label><label class="expand" for="c-39688340">[1 more]</label></div><br/><div class="children"><div class="content">May be you should use Nova instead of NVML for Nvidia?<p><a href="https:&#x2F;&#x2F;lists.freedesktop.org&#x2F;archives&#x2F;nouveau&#x2F;2024-February&#x2F;044078.html" rel="nofollow">https:&#x2F;&#x2F;lists.freedesktop.org&#x2F;archives&#x2F;nouveau&#x2F;2024-February...</a><p>Other than that - a cool tool!</div><br/></div></div><div id="39688113" class="c"><input type="checkbox" id="c-39688113" checked=""/><div class="controls bullet"><span class="by">superkuh</span><span>|</span><a href="#39688340">prev</a><span>|</span><a href="#39687515">next</a><span>|</span><label class="collapse" for="c-39688113">[-]</label><label class="expand" for="c-39688113">[1 more]</label></div><br/><div class="children"><div class="content">radeontop is the same sort of thing if you live in amdgpu-ville and want something easy to compile. I was able to use it to show that with kernel 5.x admgpu vulkan when a process is pushed out of vram into gtt it&#x27;ll never reload and get stuck in a &#x27;slow&#x27; state.</div><br/></div></div><div id="39687515" class="c"><input type="checkbox" id="c-39687515" checked=""/><div class="controls bullet"><span class="by">collsni</span><span>|</span><a href="#39688113">prev</a><span>|</span><label class="collapse" for="c-39687515">[-]</label><label class="expand" for="c-39687515">[1 more]</label></div><br/><div class="children"><div class="content">Amdgpu_top is another cool usage statistic&#x2F;monitor for and GPUs</div><br/></div></div></div></div></div></div></div></body></html>