<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1725699671405" as="style"/><link rel="stylesheet" href="styles.css?v=1725699671405"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://muffinman.io/pulsar/">Pulsar, micro creative coding playground</a>Â <span class="domain">(<a href="https://muffinman.io">muffinman.io</a>)</span></div><div class="subtext"><span>stankot</span> | <span>13 comments</span></div><br/><div><div id="41472573" class="c"><input type="checkbox" id="c-41472573" checked=""/><div class="controls bullet"><span class="by">keyle</span><span>|</span><a href="#41471965">next</a><span>|</span><label class="collapse" for="c-41472573">[-]</label><label class="expand" for="c-41472573">[1 more]</label></div><br/><div class="children"><div class="content">This is super cool and well executed. Congrats!</div><br/></div></div><div id="41471965" class="c"><input type="checkbox" id="c-41471965" checked=""/><div class="controls bullet"><span class="by">stankot</span><span>|</span><a href="#41472573">prev</a><span>|</span><a href="#41471107">next</a><span>|</span><label class="collapse" for="c-41471965">[-]</label><label class="expand" for="c-41471965">[2 more]</label></div><br/><div class="children"><div class="content">Hey, author here. I&#x27;m really glad to see this getting some traction on HN, it is one of those projects that really brings me joy.<p>It is inspired by a project that I saw on HN a while ago. I wasn&#x27;t able to find it again, so I made my own version. I swear, only after finishing Pulsar I managed to find <a href="https:&#x2F;&#x2F;tixy.land&#x2F;" rel="nofollow">https:&#x2F;&#x2F;tixy.land&#x2F;</a> again.<p>As a bonus, I wanted to run these animations on my DIY LED frame. Check out the video:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;Stanko&#x2F;pulsar&#x2F;tree&#x2F;dev#led-retro-frame">https:&#x2F;&#x2F;github.com&#x2F;Stanko&#x2F;pulsar&#x2F;tree&#x2F;dev#led-retro-frame</a><p>Here are a few technical details:<p>It is built in TypeScript and open source. User code is executed in a web worker to minimize the risk of malicious use (tbh I&#x27;m proud of the solution, and I find it quite nifty). Initially, I used to render everything as an SVG, but in order to create GIFs for the LED frame, I switched to canvas. Not to mention that SVG gave me a few headaches which I&#x27;ll cover in a blog post (if I ever write one). The syntax highlighter is a trick I found on Stack Overflow. The textarea is transparent, and as you type in it, I take the code, highlight and copy it into a div which overlays the textarea.<p>It was really fun to build and I hope you had some fun playing with it.<p>I made it around last new year&#x27;s eve, so here is a simple animation of a Christmas tree:<p><a href="https:&#x2F;&#x2F;muffinman.io&#x2F;pulsar&#x2F;?grid=classic&amp;animate=both&amp;code=Y2VpbCgoKGFicyh0ICogMC43KV4yKSo3KSAlIDEyMCkgPT09IGkgPyAwIDogKChhYnMoeS02KSAtIGFicyh4KjIuMykpICogKGNvcyh0ICogMC4yKSAqIDAuMyArIDAuNSkp" rel="nofollow">https:&#x2F;&#x2F;muffinman.io&#x2F;pulsar&#x2F;?grid=classic&amp;animate=both&amp;code=...</a></div><br/><div id="41472398" class="c"><input type="checkbox" id="c-41472398" checked=""/><div class="controls bullet"><span class="by">Towaway69</span><span>|</span><a href="#41471965">parent</a><span>|</span><a href="#41471107">next</a><span>|</span><label class="collapse" for="c-41472398">[-]</label><label class="expand" for="c-41472398">[1 more]</label></div><br/><div class="children"><div class="content">Great stuff :+1:<p>Sorry for going OT, I noticed from the demo video that you got an axidraw - what are doing with it, if a may ask?<p>Got one myself and been playing around with it. The latest idea has been to use a hand engraver as pen!</div><br/></div></div></div></div><div id="41471107" class="c"><input type="checkbox" id="c-41471107" checked=""/><div class="controls bullet"><span class="by">oneearedrabbit</span><span>|</span><a href="#41471965">prev</a><span>|</span><a href="#41471942">next</a><span>|</span><label class="collapse" for="c-41471107">[-]</label><label class="expand" for="c-41471107">[2 more]</label></div><br/><div class="children"><div class="content">Tangentially related, since you are exploring hexagonal and triangular grids; I once caught a space-filling curve bug and decided to port ideas from <a href="https:&#x2F;&#x2F;tixy.land" rel="nofollow">https:&#x2F;&#x2F;tixy.land</a> to fractional dimensions: <a href="https:&#x2F;&#x2F;oneearedrabbit.github.io&#x2F;l-sys-playground&#x2F;curves&#x2F;index.html" rel="nofollow">https:&#x2F;&#x2F;oneearedrabbit.github.io&#x2F;l-sys-playground&#x2F;curves&#x2F;ind...</a>. After all, why not?</div><br/><div id="41471349" class="c"><input type="checkbox" id="c-41471349" checked=""/><div class="controls bullet"><span class="by">throwaway8481</span><span>|</span><a href="#41471107">parent</a><span>|</span><a href="#41471942">next</a><span>|</span><label class="collapse" for="c-41471349">[-]</label><label class="expand" for="c-41471349">[1 more]</label></div><br/><div class="children"><div class="content">Obligatory side material that was a joy to read:<p><a href="https:&#x2F;&#x2F;www.redblobgames.com&#x2F;grids&#x2F;hexagons-v2&#x2F;pre-index.html" rel="nofollow">https:&#x2F;&#x2F;www.redblobgames.com&#x2F;grids&#x2F;hexagons-v2&#x2F;pre-index.htm...</a></div><br/></div></div></div></div><div id="41471942" class="c"><input type="checkbox" id="c-41471942" checked=""/><div class="controls bullet"><span class="by">lifthrasiir</span><span>|</span><a href="#41471107">prev</a><span>|</span><a href="#41471440">next</a><span>|</span><label class="collapse" for="c-41471942">[-]</label><label class="expand" for="c-41471942">[3 more]</label></div><br/><div class="children"><div class="content">Unfortunately, it was too easy to trigger XSS: <a href="https:&#x2F;&#x2F;muffinman.io&#x2F;pulsar&#x2F;?grid=classic&amp;animate=scale&amp;code=dD9jb3MuY29uc3RydWN0b3IoJ29ubWVzc2FnZT1lPT5wb3N0TWVzc2FcZ2Uoe2lkOmUuZGF0YS5pZCxlcnJvcjoiPG1ldGEgaHR0cC1lcXVpdj1yZWZyZXNoIGNvbnRlbnQ9MDsvL3VwbG9hZC53aWtpbWVkaWEub3JnL3dpa2lwZWRpYS9jb21tb25zLzUvNTcvRG9uJTI3dF9QYW5pY19CYWRnZS5qcGc%252BIn0pJykoKTow" rel="nofollow">https:&#x2F;&#x2F;muffinman.io&#x2F;pulsar&#x2F;?grid=classic&amp;animate=scale&amp;code...</a><p>It is really hard to make a correct sandbox in JS in general, without something like the Realms proposal [1]. Until that point you would have to be conservative to be safe.<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;tc39&#x2F;proposal-shadowrealm">https:&#x2F;&#x2F;github.com&#x2F;tc39&#x2F;proposal-shadowrealm</a></div><br/><div id="41471995" class="c"><input type="checkbox" id="c-41471995" checked=""/><div class="controls bullet"><span class="by">stankot</span><span>|</span><a href="#41471942">parent</a><span>|</span><a href="#41471440">next</a><span>|</span><label class="collapse" for="c-41471995">[-]</label><label class="expand" for="c-41471995">[2 more]</label></div><br/><div class="children"><div class="content">Nice one! Yeah, it is quite tricky to protect from everything, I&#x27;ll try to patch this and similar exploits, thanks for bringing it up.<p>At least the exploit doesn&#x27;t work until you start changing the code.<p>EDIT: Patched it by checking for backslashes and the word &quot;constructor&quot;.</div><br/><div id="41472438" class="c"><input type="checkbox" id="c-41472438" checked=""/><div class="controls bullet"><span class="by">lifthrasiir</span><span>|</span><a href="#41471942">root</a><span>|</span><a href="#41471995">parent</a><span>|</span><a href="#41471440">next</a><span>|</span><label class="collapse" for="c-41472438">[-]</label><label class="expand" for="c-41472438">[1 more]</label></div><br/><div class="children"><div class="content">I mean, it is still easy to work around that because `f.constructor` is just `f[&#x27;const&#x27;+&#x27;ructor&#x27;]` and so on. Backslash was just a cheap way to avoid the exact pattern and it will be hard to fix them with a disallowed word list. For example, you may disallow string literals but then template string literals can be used: `const${``}ructor`, and some interesting code would be disallowed over the course. Literals fully disallowed, it is still possible to construct a string &quot;constructor&quot; without them, as the good old JSFuck [1] demonstrates. Disallowing brackets is almost sufficient, but your global worker scope is still exposed and that may be exploitable.<p>After some search, it seems that using a null-origin &lt;iframe&gt; seems the best approach you can use for now. Figma successfully used it in the production [2] and the only reason they switched was that no state can be ever shared, which is not a big problem for your case. They also tried the Realms shim for the aforementioned proposal but it seems to have a known vulnerability. And I guess you don&#x27;t want to ship a WebAssembly JS interpreter ;-)<p>Anyway, sorry to bother you; it is hard to balance the fun and robustness at once. As a parting gift, the following is a genuine code that renders a 7-segment counter: <a href="https:&#x2F;&#x2F;muffinman.io&#x2F;pulsar&#x2F;?grid=classic&amp;animate=opacity&amp;code=KGFicyh4KTw1KSooMS10JTEpKiouMyooKGMsZCk9PmMmMSZ%252BKGMrMT8yNjg2NTY3MjErKGQ8NSkqMTgwMjY4ODUxPj5kJTUqNitjLzI6ZD09MikpKCh5PjQpLTUqKHg%252BMikrKHk%252BMCktKHk8MCkrNSooeDwtMiktKHk8LTQpKzUsdCUxMHwwKQ%253D%253D" rel="nofollow">https:&#x2F;&#x2F;muffinman.io&#x2F;pulsar&#x2F;?grid=classic&amp;animate=opacity&amp;co...</a><p>[1] <a href="https:&#x2F;&#x2F;jsfuck.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;jsfuck.com&#x2F;</a><p>[2] <a href="https:&#x2F;&#x2F;www.figma.com&#x2F;blog&#x2F;how-we-built-the-figma-plugin-system&#x2F;#attempt-1-the-iframe-sandbox-approach" rel="nofollow">https:&#x2F;&#x2F;www.figma.com&#x2F;blog&#x2F;how-we-built-the-figma-plugin-sys...</a></div><br/></div></div></div></div></div></div><div id="41471440" class="c"><input type="checkbox" id="c-41471440" checked=""/><div class="controls bullet"><span class="by">triclops200</span><span>|</span><a href="#41471942">prev</a><span>|</span><a href="#41471375">next</a><span>|</span><label class="collapse" for="c-41471440">[-]</label><label class="expand" for="c-41471440">[2 more]</label></div><br/><div class="children"><div class="content">fun!
<a href="https:&#x2F;&#x2F;muffinman.io&#x2F;pulsar&#x2F;?grid=classic&amp;animate=scale&amp;code=bWluKDEsbWF4KDAscG93KChzaW4oc3FydCh4LzYqeC82K3kvNip5LzYpKjMuMTQxNTkyNjUrdC8zLjE0MTU5MjY1KSsxKS8yLDIwKSkpKm1pbigxLG1heCgwLChwb3coYWJzKGF0YW4yKHkvNix4LzYpLzMuMTQxNTkrMSkvMisoY29zKHQvMy4xNDE1OTI2NSkrMSkvMiwxMDApLXBvdyhhYnMoYXRhbjIoeS82LHgvNikvMy4xNDE1OSsxKS8yKyhjb3ModC8zLjE0MTU5MjY1KSsxKS8yLTAuMDEsMTAwKSkpKQ%253D%253D" rel="nofollow">https:&#x2F;&#x2F;muffinman.io&#x2F;pulsar&#x2F;?grid=classic&amp;animate=scale&amp;code...</a></div><br/><div id="41471915" class="c"><input type="checkbox" id="c-41471915" checked=""/><div class="controls bullet"><span class="by">stankot</span><span>|</span><a href="#41471440">parent</a><span>|</span><a href="#41471375">next</a><span>|</span><label class="collapse" for="c-41471915">[-]</label><label class="expand" for="c-41471915">[1 more]</label></div><br/><div class="children"><div class="content">Love this one, I&#x27;ll add it to the examples!</div><br/></div></div></div></div><div id="41471375" class="c"><input type="checkbox" id="c-41471375" checked=""/><div class="controls bullet"><span class="by">candeira</span><span>|</span><a href="#41471440">prev</a><span>|</span><a href="#41470948">next</a><span>|</span><label class="collapse" for="c-41471375">[-]</label><label class="expand" for="c-41471375">[1 more]</label></div><br/><div class="children"><div class="content">This is a great shader intro tutorial!</div><br/></div></div><div id="41470948" class="c"><input type="checkbox" id="c-41470948" checked=""/><div class="controls bullet"><span class="by">gcanyon</span><span>|</span><a href="#41471375">prev</a><span>|</span><label class="collapse" for="c-41470948">[-]</label><label class="expand" for="c-41470948">[1 more]</label></div><br/><div class="children"><div class="content">This is hypnotic. I know that&#x27;s not very insightful, but it is.</div><br/></div></div></div></div></div></div></div></body></html>