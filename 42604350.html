<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1736154058433" as="style"/><link rel="stylesheet" href="styles.css?v=1736154058433"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="http://www.righto.com/2025/01/pentium-floating-point-ROM.html">Reverse Engineering the Constants in the Pentium FPU</a>Â <span class="domain">(<a href="http://www.righto.com">www.righto.com</a>)</span></div><div class="subtext"><span>mef</span> | <span>17 comments</span></div><br/><div><div id="42606975" class="c"><input type="checkbox" id="c-42606975" checked=""/><div class="controls bullet"><span class="by">lifthrasiir</span><span>|</span><a href="#42606929">next</a><span>|</span><label class="collapse" for="c-42606975">[-]</label><label class="expand" for="c-42606975">[5 more]</label></div><br/><div class="children"><div class="content">I guess the unused entries spell &quot;bad FC&quot; (for floating constant). Also I think constants 6 through 10 are relevant for the decimal-to-binary conversion or vice versa, as evident from the following observation:<p><pre><code>    0x5c3bd5191b525a249 ~= 2^123 &#x2F; 10^17
    0x470de4df820000000  = 2^13 * 10^16</code></pre></div><br/><div id="42607045" class="c"><input type="checkbox" id="c-42607045" checked=""/><div class="controls bullet"><span class="by">kens</span><span>|</span><a href="#42606975">parent</a><span>|</span><a href="#42606929">next</a><span>|</span><label class="collapse" for="c-42607045">[-]</label><label class="expand" for="c-42607045">[4 more]</label></div><br/><div class="children"><div class="content">Thanks! I think you&#x27;ve figured out those mystery constants. How did you recognize them?</div><br/><div id="42607247" class="c"><input type="checkbox" id="c-42607247" checked=""/><div class="controls bullet"><span class="by">lifthrasiir</span><span>|</span><a href="#42606975">root</a><span>|</span><a href="#42607045">parent</a><span>|</span><a href="#42606929">next</a><span>|</span><label class="collapse" for="c-42607247">[-]</label><label class="expand" for="c-42607247">[3 more]</label></div><br/><div class="children"><div class="content">That somehow looked very similar to the typical powers of ten table found in floating point conversion routines. I got the first confirmation by searching for 0x5c3bd5191b525a249 &#x2F; 2^67, which happened to match how many exabytes are equal to 5 exbibits.</div><br/><div id="42607367" class="c"><input type="checkbox" id="c-42607367" checked=""/><div class="controls bullet"><span class="by">kens</span><span>|</span><a href="#42606975">root</a><span>|</span><a href="#42607247">parent</a><span>|</span><a href="#42606929">next</a><span>|</span><label class="collapse" for="c-42607367">[-]</label><label class="expand" for="c-42607367">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve updated my article along with a credit to you. Unfortunately, I couldn&#x27;t figure out the other constants despite a whole lot of brute-force checking.</div><br/><div id="42608760" class="c"><input type="checkbox" id="c-42608760" checked=""/><div class="controls bullet"><span class="by">Sesse__</span><span>|</span><a href="#42606975">root</a><span>|</span><a href="#42607367">parent</a><span>|</span><a href="#42606929">next</a><span>|</span><label class="collapse" for="c-42608760">[-]</label><label class="expand" for="c-42608760">[1 more]</label></div><br/><div class="children"><div class="content">There used to be a site called the Inverse Symbolic Calculator (also a sibling site, Plouffe&#x27;s Inverter) where you could give in a decimal expansion and it would search for known constants. Unfortunately, it seems to be down (the frontend exists, the backend just gives 404). Maybe someone else made something similar?<p>Edit: I found <a href="https:&#x2F;&#x2F;mrob.com&#x2F;pub&#x2F;ries&#x2F;" rel="nofollow">https:&#x2F;&#x2F;mrob.com&#x2F;pub&#x2F;ries&#x2F;</a>, which may or may not help.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="42606929" class="c"><input type="checkbox" id="c-42606929" checked=""/><div class="controls bullet"><span class="by">garaetjjte</span><span>|</span><a href="#42606975">prev</a><span>|</span><a href="#42604389">next</a><span>|</span><label class="collapse" for="c-42606929">[-]</label><label class="expand" for="c-42606929">[1 more]</label></div><br/><div class="children"><div class="content">Fun trivia: for many years Intel documentation was wrong on error bounds in trigonometric functions: <a href="https:&#x2F;&#x2F;randomascii.wordpress.com&#x2F;2014&#x2F;10&#x2F;09&#x2F;intel-underestimates-error-bounds-by-1-3-quintillion&#x2F;" rel="nofollow">https:&#x2F;&#x2F;randomascii.wordpress.com&#x2F;2014&#x2F;10&#x2F;09&#x2F;intel-underesti...</a></div><br/></div></div><div id="42604389" class="c"><input type="checkbox" id="c-42604389" checked=""/><div class="controls bullet"><span class="by">kens</span><span>|</span><a href="#42606929">prev</a><span>|</span><label class="collapse" for="c-42604389">[-]</label><label class="expand" for="c-42604389">[10 more]</label></div><br/><div class="children"><div class="content">Author here for your Pentium questions...</div><br/><div id="42608148" class="c"><input type="checkbox" id="c-42608148" checked=""/><div class="controls bullet"><span class="by">rkagerer</span><span>|</span><a href="#42604389">parent</a><span>|</span><a href="#42607309">next</a><span>|</span><label class="collapse" for="c-42608148">[-]</label><label class="expand" for="c-42608148">[2 more]</label></div><br/><div class="children"><div class="content">Are you working your way up through the eras of CPU&#x27;s?  How far do you predict you&#x27;ll be able to get?  (Ps. Thanks for all the awesome insight you&#x27;ve shared)</div><br/><div id="42608501" class="c"><input type="checkbox" id="c-42608501" checked=""/><div class="controls bullet"><span class="by">kens</span><span>|</span><a href="#42604389">root</a><span>|</span><a href="#42608148">parent</a><span>|</span><a href="#42607309">next</a><span>|</span><label class="collapse" for="c-42608501">[-]</label><label class="expand" for="c-42608501">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s sort of random. My intent is to focus on the 8086, but someone asked about the 386 so I looked at that a bit. Then I saw the Navajo Pentium rug in a museum so I figured I should look at a real Pentium to compare. And then I wondered if I could find the FDIV bug. So one thing leads to another. I don&#x27;t think I&#x27;ll be able to go much beyond the Pentium with an optical microscope, though.</div><br/></div></div></div></div><div id="42607309" class="c"><input type="checkbox" id="c-42607309" checked=""/><div class="controls bullet"><span class="by">Neywiny</span><span>|</span><a href="#42604389">parent</a><span>|</span><a href="#42608148">prev</a><span>|</span><a href="#42606761">next</a><span>|</span><label class="collapse" for="c-42607309">[-]</label><label class="expand" for="c-42607309">[2 more]</label></div><br/><div class="children"><div class="content">Feels like an honor to be able to ask. I&#x27;ve appreciated your work for a few years now especially on the Apollo gear restoration.<p>Anyway, question on the ones you thought were wrong (I think &quot;just&quot; the trig functions). Is there a running system you can use that can be used to confirm your findings? Especially considering your previous post on the pentium division bug, maybe they got this wrong too?</div><br/><div id="42608512" class="c"><input type="checkbox" id="c-42608512" checked=""/><div class="controls bullet"><span class="by">kens</span><span>|</span><a href="#42604389">root</a><span>|</span><a href="#42607309">parent</a><span>|</span><a href="#42606761">next</a><span>|</span><label class="collapse" for="c-42608512">[-]</label><label class="expand" for="c-42608512">[1 more]</label></div><br/><div class="children"><div class="content">A running system won&#x27;t really help me since I&#x27;m sure it will give the right answer. I need to know what&#x27;s happening internally, which remains hidden in a running processor.</div><br/></div></div></div></div><div id="42606761" class="c"><input type="checkbox" id="c-42606761" checked=""/><div class="controls bullet"><span class="by">perching_aix</span><span>|</span><a href="#42604389">parent</a><span>|</span><a href="#42607309">prev</a><span>|</span><a href="#42605294">next</a><span>|</span><label class="collapse" for="c-42606761">[-]</label><label class="expand" for="c-42606761">[2 more]</label></div><br/><div class="children"><div class="content">Do I understand it right that excluding the two metal layers, there&#x27;s only a single &quot;layer&quot; of &quot;logic&quot; inside? I reckon newer CPUs have multiple, making imaging based reversing more difficult?</div><br/><div id="42607021" class="c"><input type="checkbox" id="c-42607021" checked=""/><div class="controls bullet"><span class="by">kens</span><span>|</span><a href="#42604389">root</a><span>|</span><a href="#42606761">parent</a><span>|</span><a href="#42605294">next</a><span>|</span><label class="collapse" for="c-42607021">[-]</label><label class="expand" for="c-42607021">[1 more]</label></div><br/><div class="children"><div class="content">Even modern chips have a single layer of transistors, although there is research into 3D transistor stacking. (Flash memory stacks dies for more density.) Modern CPUs have much, much smaller transistors as well as constructing them more vertically (FinFET) but it is still a single layer. Modern processors can have over a dozen layers of metal, while the Pentium I examined has just 3 metal layers. I&#x27;m not going to be reverse-engineering a modern chip since you need an electron microscope to see the features; the features are orders of magnitude smaller than the wavelength of light.</div><br/></div></div></div></div><div id="42605294" class="c"><input type="checkbox" id="c-42605294" checked=""/><div class="controls bullet"><span class="by">CaliforniaKarl</span><span>|</span><a href="#42604389">parent</a><span>|</span><a href="#42606761">prev</a><span>|</span><label class="collapse" for="c-42605294">[-]</label><label class="expand" for="c-42605294">[3 more]</label></div><br/><div class="children"><div class="content">Hello!  In your view, did the move to IEEE 754 floating-point make things easier or harder for CPU designers?</div><br/><div id="42605508" class="c"><input type="checkbox" id="c-42605508" checked=""/><div class="controls bullet"><span class="by">kens</span><span>|</span><a href="#42604389">root</a><span>|</span><a href="#42605294">parent</a><span>|</span><a href="#42606067">next</a><span>|</span><label class="collapse" for="c-42605508">[-]</label><label class="expand" for="c-42605508">[1 more]</label></div><br/><div class="children"><div class="content">My guess is that it made things both easier and harder. Harder in the sense that you couldn&#x27;t just throw together floating point circuits; you had to deal with lots of special cases. But easier in the sense that the tricky design decisions were already made for you. And easier to test against a known standard.</div><br/></div></div><div id="42606067" class="c"><input type="checkbox" id="c-42606067" checked=""/><div class="controls bullet"><span class="by">monocasa</span><span>|</span><a href="#42604389">root</a><span>|</span><a href="#42605294">parent</a><span>|</span><a href="#42605508">prev</a><span>|</span><label class="collapse" for="c-42606067">[-]</label><label class="expand" for="c-42606067">[1 more]</label></div><br/><div class="children"><div class="content">For what its worth, Intel was one of the major contributors to IEEE 754.  In a lot of ways the original 8087 behavior became an early IEEE 754 draft.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>