<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1723453264502" as="style"/><link rel="stylesheet" href="styles.css?v=1723453264502"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://kevinlynagh.com/z3-simpsons-paradox/">Generating Simpson&#x27;s Paradox with Z3</a> <span class="domain">(<a href="https://kevinlynagh.com">kevinlynagh.com</a>)</span></div><div class="subtext"><span>surprisetalk</span> | <span>31 comments</span></div><br/><div><div id="41220885" class="c"><input type="checkbox" id="c-41220885" checked=""/><div class="controls bullet"><span class="by">Izkata</span><span>|</span><a href="#41219829">next</a><span>|</span><label class="collapse" for="c-41220885">[-]</label><label class="expand" for="c-41220885">[4 more]</label></div><br/><div class="children"><div class="content">This visualization on Wikipedia was what I needed to understand Simpson&#x27;s Paradox, the descriptions never made a whole lot of sense to me until seeing it like this:  <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Simpson%27s_paradox#&#x2F;media&#x2F;File:Simpsons_paradox_-_animation.gif" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Simpson%27s_paradox#&#x2F;media&#x2F;Fil...</a><p>Along the same lines of &quot;visualize your data to see what&#x27;s really going on&quot; is Anscombe&#x27;s Quartet: <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;w&#x2F;index.php?title=Anscombe%27s_quartet" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;w&#x2F;index.php?title=Anscombe%27s_quar...</a><p>And then there&#x27;s the Datasaurus [Dozen], which has some fun with the idea behind Anscombe&#x27;s Quartet:  <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Datasaurus_dozen" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Datasaurus_dozen</a> (you can see it animated here: <a href="https:&#x2F;&#x2F;blog.revolutionanalytics.com&#x2F;2017&#x2F;05&#x2F;the-datasaurus-dozen.html" rel="nofollow">https:&#x2F;&#x2F;blog.revolutionanalytics.com&#x2F;2017&#x2F;05&#x2F;the-datasaurus-...</a> )</div><br/><div id="41222006" class="c"><input type="checkbox" id="c-41222006" checked=""/><div class="controls bullet"><span class="by">wodenokoto</span><span>|</span><a href="#41220885">parent</a><span>|</span><a href="#41221541">next</a><span>|</span><label class="collapse" for="c-41222006">[-]</label><label class="expand" for="c-41222006">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not sure I understand how that would work if x is time, unless each category is sampled from different time spans.</div><br/></div></div><div id="41221541" class="c"><input type="checkbox" id="c-41221541" checked=""/><div class="controls bullet"><span class="by">mjburgess</span><span>|</span><a href="#41220885">parent</a><span>|</span><a href="#41222006">prev</a><span>|</span><a href="#41219829">next</a><span>|</span><label class="collapse" for="c-41221541">[-]</label><label class="expand" for="c-41221541">[2 more]</label></div><br/><div class="children"><div class="content">A more general lesson is that correlation and causation are unrelated: the former doesnt imply the latter, and the latter <i>does not imply</i> the former. Just because one thing causes another does not mean it will be correlated with it.<p>There is no contradiction in subsets having different correlations that the parent set. The apparent &quot;paradox&quot; arises from reading the data causally. The purpose of this lesson is to expose these assumptions in interpretation of data. Few seem to get the message though.</div><br/><div id="41221645" class="c"><input type="checkbox" id="c-41221645" checked=""/><div class="controls bullet"><span class="by">weinzierl</span><span>|</span><a href="#41220885">root</a><span>|</span><a href="#41221541">parent</a><span>|</span><a href="#41219829">next</a><span>|</span><label class="collapse" for="c-41221645">[-]</label><label class="expand" for="c-41221645">[1 more]</label></div><br/><div class="children"><div class="content">If anyone has doubts about the second claim, think about a hash function. The input certainly causes the output, but they are not correlated in a statistical sense.</div><br/></div></div></div></div></div></div><div id="41219829" class="c"><input type="checkbox" id="c-41219829" checked=""/><div class="controls bullet"><span class="by">TheMrZZ</span><span>|</span><a href="#41220885">prev</a><span>|</span><a href="#41219717">next</a><span>|</span><label class="collapse" for="c-41219829">[-]</label><label class="expand" for="c-41219829">[7 more]</label></div><br/><div class="children"><div class="content">Biggest trap of Simpson&#x27;s paradox is the results can change with every level of granularity.<p>If you take the example of Treatment A vs Treatment B for tumors, you can get infinite layers of seemingly contradicting statemens:
- Overall, Treatment A has better average results
- But if you add tumor size, Treatment B is always better
- But if you add gender to size, Treatment B is always better
- But if you add age category to gender and size, Treatment A is always better
- etc...<p>It totally contradicts our instincts, and shows statistics can be profoundly misleading (intentionally or not).</div><br/><div id="41219853" class="c"><input type="checkbox" id="c-41219853" checked=""/><div class="controls bullet"><span class="by">Narhem</span><span>|</span><a href="#41219829">parent</a><span>|</span><a href="#41220611">next</a><span>|</span><label class="collapse" for="c-41219853">[-]</label><label class="expand" for="c-41219853">[3 more]</label></div><br/><div class="children"><div class="content">Like Tumors are higher dimensional objects than what human brains are trained to perceive.</div><br/><div id="41221107" class="c"><input type="checkbox" id="c-41221107" checked=""/><div class="controls bullet"><span class="by">gradschoolfail</span><span>|</span><a href="#41219829">root</a><span>|</span><a href="#41219853">parent</a><span>|</span><a href="#41220115">next</a><span>|</span><label class="collapse" for="c-41221107">[-]</label><label class="expand" for="c-41221107">[1 more]</label></div><br/><div class="children"><div class="content">For pedagogues and practitioners alike: there is a subtle connection between Simpson’s paradox and the wild geometry of relative entropy. This might be partly why effect sizes are also contentious.<p>Besides Ellenberg’s mind-altering discussion of that link[1], see hints on the second page of:<p><a href="https:&#x2F;&#x2F;www.qeios.com&#x2F;read&#x2F;XB1N2A&#x2F;pdf" rel="nofollow">https:&#x2F;&#x2F;www.qeios.com&#x2F;read&#x2F;XB1N2A&#x2F;pdf</a><p>[1] &quot;[the point of Simpson’s paradox] isn&#x27;t really to tell us which viewpoint to take but to insist that we keep both the parts and the whole in mind at once.&quot;<p>Ellenberg, from <i>Shape: The Hidden Geometry of Information, Biology, Strategy, Democracy, and Everything Else</i> (2021)</div><br/></div></div><div id="41220115" class="c"><input type="checkbox" id="c-41220115" checked=""/><div class="controls bullet"><span class="by">oh_my_goodness</span><span>|</span><a href="#41219829">root</a><span>|</span><a href="#41219853">parent</a><span>|</span><a href="#41221107">prev</a><span>|</span><a href="#41220611">next</a><span>|</span><label class="collapse" for="c-41220115">[-]</label><label class="expand" for="c-41220115">[1 more]</label></div><br/><div class="children"><div class="content">If the previous comment is right, then this one is plainly also true in some sense. I&#x27;m disappointed to see downvotes.</div><br/></div></div></div></div><div id="41220611" class="c"><input type="checkbox" id="c-41220611" checked=""/><div class="controls bullet"><span class="by">mb7733</span><span>|</span><a href="#41219829">parent</a><span>|</span><a href="#41219853">prev</a><span>|</span><a href="#41219717">next</a><span>|</span><label class="collapse" for="c-41220611">[-]</label><label class="expand" for="c-41220611">[3 more]</label></div><br/><div class="children"><div class="content">I think the real-world resolution to this problem is straightforward though. You should look at the finest level of granularity available, and pick the best treatment in the relevant subpopulation for the patient.</div><br/><div id="41220676" class="c"><input type="checkbox" id="c-41220676" checked=""/><div class="controls bullet"><span class="by">jefftk</span><span>|</span><a href="#41219829">root</a><span>|</span><a href="#41220611">parent</a><span>|</span><a href="#41220679">next</a><span>|</span><label class="collapse" for="c-41220676">[-]</label><label class="expand" for="c-41220676">[1 more]</label></div><br/><div class="children"><div class="content">Unfortunately our level of certainty generally falls off as we increase the granularity.  For example, imagine the patient is a 77yo Polish-American man, and we&#x27;re lucky enough to have one historical result for 77yo Polish-American men.  That man got treatment A and did better than expected.  But say if we go out to 70-79y white men we have 1,000 people, of which 500 got treatment A and generally did significantly worse than the 500 who got treatment B.  While the more granular category gives us a little information, the sample size is so small that we would be foolish to discard the less granular information.</div><br/></div></div><div id="41220679" class="c"><input type="checkbox" id="c-41220679" checked=""/><div class="controls bullet"><span class="by">throwawaystress</span><span>|</span><a href="#41219829">root</a><span>|</span><a href="#41220611">parent</a><span>|</span><a href="#41220676">prev</a><span>|</span><a href="#41219717">next</a><span>|</span><label class="collapse" for="c-41220679">[-]</label><label class="expand" for="c-41220679">[1 more]</label></div><br/><div class="children"><div class="content">The smaller the subpopulation, the higher the variance, and the less significant the result.</div><br/></div></div></div></div></div></div><div id="41219717" class="c"><input type="checkbox" id="c-41219717" checked=""/><div class="controls bullet"><span class="by">incognito124</span><span>|</span><a href="#41219829">prev</a><span>|</span><a href="#41220695">next</a><span>|</span><label class="collapse" for="c-41219717">[-]</label><label class="expand" for="c-41219717">[3 more]</label></div><br/><div class="children"><div class="content">I just love the napkin equation in the middle of [1], it really made it clear to me<p>[1]: <a href="https:&#x2F;&#x2F;robertheaton.com&#x2F;2019&#x2F;02&#x2F;24&#x2F;making-peace-with-simpsons-paradox&#x2F;" rel="nofollow">https:&#x2F;&#x2F;robertheaton.com&#x2F;2019&#x2F;02&#x2F;24&#x2F;making-peace-with-simpso...</a></div><br/><div id="41220148" class="c"><input type="checkbox" id="c-41220148" checked=""/><div class="controls bullet"><span class="by">joe_the_user</span><span>|</span><a href="#41219717">parent</a><span>|</span><a href="#41220695">next</a><span>|</span><label class="collapse" for="c-41220148">[-]</label><label class="expand" for="c-41220148">[2 more]</label></div><br/><div class="children"><div class="content">The wikipedia gives a reasonable take:<p>&quot;<i>Mathematician Jordan Ellenberg argues that Simpson&#x27;s paradox is misnamed as &#x27;there&#x27;s no contradiction involved, just two different ways to think about the same data&#x27; and suggests that its lesson &#x27;isn&#x27;t really to tell us which viewpoint to take but to insist that we keep both the parts and the whole in mind at once.&#x27;</i>&quot;<p>My own take is that any <i>statistic</i> has a value and a strength (in the case of averages, strength can be the number of instances averaged, for instance). You can have to keep in mind both.<p><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Simpson%27s_paradox" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Simpson%27s_paradox</a></div><br/></div></div></div></div><div id="41220695" class="c"><input type="checkbox" id="c-41220695" checked=""/><div class="controls bullet"><span class="by">staplung</span><span>|</span><a href="#41219717">prev</a><span>|</span><a href="#41220821">next</a><span>|</span><label class="collapse" for="c-41220695">[-]</label><label class="expand" for="c-41220695">[2 more]</label></div><br/><div class="children"><div class="content">Simpson&#x27;s Paradox keeps experimenters up at night because it embodies the idea that although your data might say one thing, it&#x27;s always possible that slicing the data via some unknown axis of finer granularity might paint a very different picture. It&#x27;s hard to know if there is such an axis lurking there in your data, let alone, what it might be.<p>If you get paranoid about its presence it can lead you to second guess pretty much every statistic. &quot;I know that 4 out of 5 dentists recommend chewing X Brand  gum but what if I slice the dentists by number of eyes? Maybe both one-eyed dentists and two-eyed dentists aren&#x27;t so enthusiastic.&quot;</div><br/><div id="41221240" class="c"><input type="checkbox" id="c-41221240" checked=""/><div class="controls bullet"><span class="by">grobbyy</span><span>|</span><a href="#41220695">parent</a><span>|</span><a href="#41220821">next</a><span>|</span><label class="collapse" for="c-41221240">[-]</label><label class="expand" for="c-41221240">[1 more]</label></div><br/><div class="children"><div class="content">It does, but only experiments who don&#x27;t have a strong grounding in research methods.<p>Simpson&#x27;s paradox is part of a broader problem: correlation does not imply causation. In practice, it&#x27;s one of many problems with making decisions based on correlations.<p>In a randomized control trial, with a large random sample, the odds of Simpson&#x27;s Paradox coming up are astronomically low.<p>Good statisticians WILL second-guess ANY conclusions based on post-hoc data analysis. To frame this in scientific jargon, exploratory data analysis and correlations are great at generating hypotheses, but those need to be confirmed with methods appropriate for confirmatory analysis.</div><br/></div></div></div></div><div id="41220821" class="c"><input type="checkbox" id="c-41220821" checked=""/><div class="controls bullet"><span class="by">staplung</span><span>|</span><a href="#41220695">prev</a><span>|</span><a href="#41219933">next</a><span>|</span><label class="collapse" for="c-41220821">[-]</label><label class="expand" for="c-41220821">[2 more]</label></div><br/><div class="children"><div class="content">I know essentially nothing about Z3 but it seems like there&#x27;s a potential problem in the code. There&#x27;s a section headed by the comment &quot;All hits and miss counts must be positive&quot; followed by a bunch of assertions that those numbers are greater than 0. Isn&#x27;t it possible that you have 0 hits or misses? I mean, what if your season is short and you only face a couple of lefty pitchers and strike out both times?<p>In any case, I would explain the paradox differently than the author. The author says: &quot;The key to understanding the paradox is that the players did not bat against the same set of pitchers. A batted against 5 lefties and 12 righties; B against 2 and 11.&quot;<p>I would say instead that the key to understanding the paradox is to observe that both players are <i>much</i> better when batting against lefties and that player A batted against lefties much more often, both in absolute and relative terms. In other words, A is not as good against lefties as B but he faced a lot more of these comparatively easy pitchers.</div><br/><div id="41220863" class="c"><input type="checkbox" id="c-41220863" checked=""/><div class="controls bullet"><span class="by">cortesoft</span><span>|</span><a href="#41220821">parent</a><span>|</span><a href="#41219933">next</a><span>|</span><label class="collapse" for="c-41220863">[-]</label><label class="expand" for="c-41220863">[1 more]</label></div><br/><div class="children"><div class="content">That would be possible for a hitter, but it would be impossible to be an example of Simpson&#x27;s paradox in that case.</div><br/></div></div></div></div><div id="41219933" class="c"><input type="checkbox" id="c-41219933" checked=""/><div class="controls bullet"><span class="by">tombert</span><span>|</span><a href="#41220821">prev</a><span>|</span><a href="#41221066">next</a><span>|</span><label class="collapse" for="c-41219933">[-]</label><label class="expand" for="c-41219933">[4 more]</label></div><br/><div class="children"><div class="content">Z3 is kind of my new favorite thing right now.  I have a problem that lends itself quite well to constraints-based reasoning, and I need it to be optimized. I&#x27;m sure I could have hacked something together using any number of programming languages, but after playing with Z3 for a bit, I realized that this could be easily done in around ~100 lines of an SMT2 file, and probably be considerably faster.<p>Tools like this make me feel a lot better about all the time I wasted playing with predicate logic.</div><br/><div id="41222100" class="c"><input type="checkbox" id="c-41222100" checked=""/><div class="controls bullet"><span class="by">darkteflon</span><span>|</span><a href="#41219933">parent</a><span>|</span><a href="#41220238">next</a><span>|</span><label class="collapse" for="c-41222100">[-]</label><label class="expand" for="c-41222100">[1 more]</label></div><br/><div class="children"><div class="content">Same. I’d been circling SMT solvers for a while but a recent HN post on knuckledragger[1] (built on Z3) made me finally take a closer look at Z3 itself. It kind of feels like stealing fire.<p>[1] <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41161455">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41161455</a></div><br/></div></div><div id="41220238" class="c"><input type="checkbox" id="c-41220238" checked=""/><div class="controls bullet"><span class="by">samstave</span><span>|</span><a href="#41219933">parent</a><span>|</span><a href="#41222100">prev</a><span>|</span><a href="#41221066">next</a><span>|</span><label class="collapse" for="c-41220238">[-]</label><label class="expand" for="c-41220238">[2 more]</label></div><br/><div class="children"><div class="content">Curious, would your data constraints be related to <a href="http:&#x2F;&#x2F;equationofhappiness.com&#x2F;" rel="nofollow">http:&#x2F;&#x2F;equationofhappiness.com&#x2F;</a><p>Would like to know how you us Z3 to evaluate emotional happy Q. Could you apply that to evaluate a piece of content (like thread, feed, comment) and then evaluate the energy of the thing for its happiness quotient value whatever? then you can just Z3 the thread and determine the psychological predicted impact...<p>Maybe you could then design casula games that provide the positive happy Q vibes.<p>--<p>I was in a program from when I was a baby with UCSD that was a life tracking project and they would check in with you every so often to see where you were on that trajectory - and where you were happy in life etc.<p>Problem is that it was also tied to Morehouse University, MK, Vic Baranco, and a bunch of other Stanford thingy&#x27;s from the 70s that we all know abou these days.</div><br/><div id="41220423" class="c"><input type="checkbox" id="c-41220423" checked=""/><div class="controls bullet"><span class="by">tombert</span><span>|</span><a href="#41219933">root</a><span>|</span><a href="#41220238">parent</a><span>|</span><a href="#41221066">next</a><span>|</span><label class="collapse" for="c-41220423">[-]</label><label class="expand" for="c-41220423">[1 more]</label></div><br/><div class="children"><div class="content">Nah, the core math for Equation of Happiness is my dad&#x27;s thing, and it&#x27;s using a genetic algorithm for its optimization stuff, all I did was port some of his code to Julia and write a basic web frontend. If I had known about Z3&#x27;s optimization tools when he was writing the book, I might have tried to use it, but I&#x27;m not sure how well Z3 would actually work with the differential equation stuff he was doing, since it&#x27;s not really discrete.<p>I&#x27;m working on something that is trying to utilize Z3 for some financial market stuff that I hack on in my free time.</div><br/></div></div></div></div></div></div><div id="41221066" class="c"><input type="checkbox" id="c-41221066" checked=""/><div class="controls bullet"><span class="by">hackandthink</span><span>|</span><a href="#41219933">prev</a><span>|</span><a href="#41220271">next</a><span>|</span><label class="collapse" for="c-41221066">[-]</label><label class="expand" for="c-41221066">[1 more]</label></div><br/><div class="children"><div class="content">&quot;The key to understanding the paradox is that the players did not bat against the same set of pitchers.&quot;<p>This is misleading. I am baseball ignorant but I feel this is a contrived and bad example for Simpson&#x27;s paradox.<p>(UC Berkeley gender bias example is much better)</div><br/></div></div><div id="41220271" class="c"><input type="checkbox" id="c-41220271" checked=""/><div class="controls bullet"><span class="by">clircle</span><span>|</span><a href="#41221066">prev</a><span>|</span><a href="#41220745">next</a><span>|</span><label class="collapse" for="c-41220271">[-]</label><label class="expand" for="c-41220271">[4 more]</label></div><br/><div class="children"><div class="content">Seems like an inappropriate use of the word &quot;paradox&quot;. How about Simpson&#x27;s intuitive situation?</div><br/><div id="41220402" class="c"><input type="checkbox" id="c-41220402" checked=""/><div class="controls bullet"><span class="by">eadler</span><span>|</span><a href="#41220271">parent</a><span>|</span><a href="#41220354">next</a><span>|</span><label class="collapse" for="c-41220402">[-]</label><label class="expand" for="c-41220402">[1 more]</label></div><br/><div class="children"><div class="content">It is a veridical paradox, not a falsidical paradox.<p>A falsidical paradox is what most people think of as a formal paradox: from the assertions you derive a conclusion which is false (either deductively or inductively).<p>A veridical paradox is where you derive a true result which appears absurd. it is an informal classification based on intuition. <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Banach%E2%80%93Tarski_paradox" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Banach%E2%80%93Tarski_paradox</a> is a classic veridical paradox.</div><br/></div></div><div id="41220354" class="c"><input type="checkbox" id="c-41220354" checked=""/><div class="controls bullet"><span class="by">travisjungroth</span><span>|</span><a href="#41220271">parent</a><span>|</span><a href="#41220402">prev</a><span>|</span><a href="#41220383">next</a><span>|</span><label class="collapse" for="c-41220354">[-]</label><label class="expand" for="c-41220354">[1 more]</label></div><br/><div class="children"><div class="content">“Going against common expectation” is well established as one of the definitions of “paradox”. Check any dictionary you choose.</div><br/></div></div><div id="41220383" class="c"><input type="checkbox" id="c-41220383" checked=""/><div class="controls bullet"><span class="by">reallybees</span><span>|</span><a href="#41220271">parent</a><span>|</span><a href="#41220354">prev</a><span>|</span><a href="#41220745">next</a><span>|</span><label class="collapse" for="c-41220383">[-]</label><label class="expand" for="c-41220383">[1 more]</label></div><br/><div class="children"><div class="content">Paradoxical iff data sets are isolated; explains the Gemini effect. Preferences tend to model future outcomes if sample sizes of surveyors are combined.</div><br/></div></div></div></div><div id="41220745" class="c"><input type="checkbox" id="c-41220745" checked=""/><div class="controls bullet"><span class="by">zekrioca</span><span>|</span><a href="#41220271">prev</a><span>|</span><a href="#41219821">next</a><span>|</span><label class="collapse" for="c-41220745">[-]</label><label class="expand" for="c-41220745">[2 more]</label></div><br/><div class="children"><div class="content">I dislike the baseball example, because it is too context specific to the other several Bi people who don’t follow the sport.</div><br/><div id="41220832" class="c"><input type="checkbox" id="c-41220832" checked=""/><div class="controls bullet"><span class="by">0xDEADFED5</span><span>|</span><a href="#41220745">parent</a><span>|</span><a href="#41219821">next</a><span>|</span><label class="collapse" for="c-41220832">[-]</label><label class="expand" for="c-41220832">[1 more]</label></div><br/><div class="children"><div class="content">Does Bi = Baseball ignorant? I&#x27;m definitely Bi</div><br/></div></div></div></div></div></div></div></div></div></body></html>