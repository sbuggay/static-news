<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1734858060859" as="style"/><link rel="stylesheet" href="styles.css?v=1734858060859"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://gist.github.com/bssrdf/397900607028bffd0f8d223a7acdce7e">A curious case of O(N^2) behavior which should be O(N) (2023)</a> <span class="domain">(<a href="https://gist.github.com">gist.github.com</a>)</span></div><div class="subtext"><span>bssrdf</span> | <span>21 comments</span></div><br/><div><div id="42483474" class="c"><input type="checkbox" id="c-42483474" checked=""/><div class="controls bullet"><span class="by">Sharlin</span><span>|</span><a href="#42484185">next</a><span>|</span><label class="collapse" for="c-42483474">[-]</label><label class="expand" for="c-42483474">[7 more]</label></div><br/><div class="children"><div class="content">More accidentally quadratic stories: <a href="https:&#x2F;&#x2F;www.tumblr.com&#x2F;accidentallyquadratic" rel="nofollow">https:&#x2F;&#x2F;www.tumblr.com&#x2F;accidentallyquadratic</a></div><br/><div id="42484418" class="c"><input type="checkbox" id="c-42484418" checked=""/><div class="controls bullet"><span class="by">samatman</span><span>|</span><a href="#42483474">parent</a><span>|</span><a href="#42484185">next</a><span>|</span><label class="collapse" for="c-42484418">[-]</label><label class="expand" for="c-42484418">[6 more]</label></div><br/><div class="children"><div class="content">A classic.  Every time I see that link I read the whole thing starting from the new beginning.<p>...oops</div><br/><div id="42484525" class="c"><input type="checkbox" id="c-42484525" checked=""/><div class="controls bullet"><span class="by">dgfitz</span><span>|</span><a href="#42483474">root</a><span>|</span><a href="#42484418">parent</a><span>|</span><a href="#42484598">next</a><span>|</span><label class="collapse" for="c-42484525">[-]</label><label class="expand" for="c-42484525">[4 more]</label></div><br/><div class="children"><div class="content">I opened the link and just started reading. I have a really dumb question that may expose common knowledge I don’t have, about this quote:<p>&gt; The total amount of space needed to represent this collection of strings is O(k n^2).<p>I haven’t seen O-notation ever represent ram usage, just algorithm complexity. Is this common?</div><br/><div id="42484531" class="c"><input type="checkbox" id="c-42484531" checked=""/><div class="controls bullet"><span class="by">nneonneo</span><span>|</span><a href="#42483474">root</a><span>|</span><a href="#42484525">parent</a><span>|</span><a href="#42484598">next</a><span>|</span><label class="collapse" for="c-42484531">[-]</label><label class="expand" for="c-42484531">[3 more]</label></div><br/><div class="children"><div class="content">Yes, very common. You&#x27;ve seen &quot;time complexity&quot;; it&#x27;s very common to talk about &quot;space complexity&quot; as well.</div><br/><div id="42484891" class="c"><input type="checkbox" id="c-42484891" checked=""/><div class="controls bullet"><span class="by">consp</span><span>|</span><a href="#42483474">root</a><span>|</span><a href="#42484531">parent</a><span>|</span><a href="#42484598">next</a><span>|</span><label class="collapse" for="c-42484891">[-]</label><label class="expand" for="c-42484891">[2 more]</label></div><br/><div class="children"><div class="content">Fun bonus: they can be interchangeable, e.g. increasing space to reduce time.</div><br/><div id="42485064" class="c"><input type="checkbox" id="c-42485064" checked=""/><div class="controls bullet"><span class="by">dgoldstein0</span><span>|</span><a href="#42483474">root</a><span>|</span><a href="#42484891">parent</a><span>|</span><a href="#42484598">next</a><span>|</span><label class="collapse" for="c-42485064">[-]</label><label class="expand" for="c-42485064">[1 more]</label></div><br/><div class="children"><div class="content">Yes, but total time is never going to be less than total space, when expressed in big-O notation</div><br/></div></div></div></div></div></div></div></div><div id="42484598" class="c"><input type="checkbox" id="c-42484598" checked=""/><div class="controls bullet"><span class="by">itronitron</span><span>|</span><a href="#42483474">root</a><span>|</span><a href="#42484418">parent</a><span>|</span><a href="#42484525">prev</a><span>|</span><a href="#42484185">next</a><span>|</span><label class="collapse" for="c-42484598">[-]</label><label class="expand" for="c-42484598">[1 more]</label></div><br/><div class="children"><div class="content">Is there a way to do that without signing in?</div><br/></div></div></div></div></div></div><div id="42484185" class="c"><input type="checkbox" id="c-42484185" checked=""/><div class="controls bullet"><span class="by">nrdvana</span><span>|</span><a href="#42483474">prev</a><span>|</span><a href="#42483757">next</a><span>|</span><label class="collapse" for="c-42484185">[-]</label><label class="expand" for="c-42484185">[2 more]</label></div><br/><div class="children"><div class="content">Why was the solution not to get rid of the linked list and replace it with a red&#x2F;black tree?</div><br/><div id="42484311" class="c"><input type="checkbox" id="c-42484311" checked=""/><div class="controls bullet"><span class="by">thayne</span><span>|</span><a href="#42484185">parent</a><span>|</span><a href="#42483757">next</a><span>|</span><label class="collapse" for="c-42484311">[-]</label><label class="expand" for="c-42484311">[1 more]</label></div><br/><div class="children"><div class="content">Or hash table, or any other kind of tree.<p>My guess would be because  it was implemented in c, where the usual practice if you need a container type other than a fixed size array is to implement it yourself. IME, c code tends to use linked lists for a lot of things that in most other languages would be implemented using a better suited, and more performent, container type from the standard library.<p>One way that other languages can outperform c, is it is easier to use the right data structure.</div><br/></div></div></div></div><div id="42483757" class="c"><input type="checkbox" id="c-42483757" checked=""/><div class="controls bullet"><span class="by">Liftyee</span><span>|</span><a href="#42484185">prev</a><span>|</span><a href="#42484574">next</a><span>|</span><label class="collapse" for="c-42483757">[-]</label><label class="expand" for="c-42483757">[3 more]</label></div><br/><div class="children"><div class="content">Neat find! This proves to me a huge benefit of open source software: individual developers can satisfy their curiosity towards particular issues (with additional motivation from being personally affected) and improve the package for everyone once it&#x27;s fixed.</div><br/><div id="42484102" class="c"><input type="checkbox" id="c-42484102" checked=""/><div class="controls bullet"><span class="by">bla3</span><span>|</span><a href="#42483757">parent</a><span>|</span><a href="#42484574">next</a><span>|</span><label class="collapse" for="c-42484102">[-]</label><label class="expand" for="c-42484102">[2 more]</label></div><br/><div class="children"><div class="content">Except it wasn&#x27;t improved in this case, if I&#x27;m reading the gist correctly. The author didn&#x27;t like their fix enough to make a pull request.</div><br/><div id="42484516" class="c"><input type="checkbox" id="c-42484516" checked=""/><div class="controls bullet"><span class="by">EdSchouten</span><span>|</span><a href="#42483757">root</a><span>|</span><a href="#42484102">parent</a><span>|</span><a href="#42484574">next</a><span>|</span><label class="collapse" for="c-42484516">[-]</label><label class="expand" for="c-42484516">[1 more]</label></div><br/><div class="children"><div class="content">Just like “this entire meeting could have been an email”, all this effort writing this gist could have been spent creating a PR.</div><br/></div></div></div></div></div></div><div id="42484574" class="c"><input type="checkbox" id="c-42484574" checked=""/><div class="controls bullet"><span class="by">geuis</span><span>|</span><a href="#42483757">prev</a><span>|</span><a href="#42485102">next</a><span>|</span><label class="collapse" for="c-42484574">[-]</label><label class="expand" for="c-42484574">[2 more]</label></div><br/><div class="children"><div class="content">&quot;Now, it should be clear that most of the time (28s-53s on the time line) of importing that particular USD file is spent in id_sort_by_name&quot;.<p>Luckily there&#x27;s a graph screenshot. But the graph it displays is incomprehensible. Without &quot;id_sort_by_name&quot; being on the one bar, I wouldn&#x27;t even know what I&#x27;m looking at.</div><br/><div id="42484722" class="c"><input type="checkbox" id="c-42484722" checked=""/><div class="controls bullet"><span class="by">wtallis</span><span>|</span><a href="#42484574">parent</a><span>|</span><a href="#42485102">next</a><span>|</span><label class="collapse" for="c-42484722">[-]</label><label class="expand" for="c-42484722">[1 more]</label></div><br/><div class="children"><div class="content">The timeline view in the upper screenshot is fairly straightforward: the region of 28-53s is selected, other parts of the timeline are grayed out, and the statistics for the selected time region down below show 94.4% of &quot;Total CPU&quot; being in id_sort_by_name.<p>The lower screenshot is a flame graph. If you haven&#x27;t encountered one of those before, it&#x27;s totally reasonable to not know how to read it. But it&#x27;s a standard and common way to present this sort of data. See <a href="https:&#x2F;&#x2F;www.brendangregg.com&#x2F;flamegraphs.html" rel="nofollow">https:&#x2F;&#x2F;www.brendangregg.com&#x2F;flamegraphs.html</a> for more information.</div><br/></div></div></div></div><div id="42485102" class="c"><input type="checkbox" id="c-42485102" checked=""/><div class="controls bullet"><span class="by">purplesyringa</span><span>|</span><a href="#42484574">prev</a><span>|</span><a href="#42484643">next</a><span>|</span><label class="collapse" for="c-42485102">[-]</label><label class="expand" for="c-42485102">[1 more]</label></div><br/><div class="children"><div class="content">Ah yes, the most reliable solution to a wrong choice of a data structure: add data-specific hacks until it works. For the life of me I can&#x27;t figure out why people never consider replacing linked lists. Even without worst-case O(n) insertion, they usually behave worse than vectors, deques, or hives.</div><br/></div></div><div id="42484643" class="c"><input type="checkbox" id="c-42484643" checked=""/><div class="controls bullet"><span class="by">ojbyrne</span><span>|</span><a href="#42485102">prev</a><span>|</span><a href="#42483882">next</a><span>|</span><label class="collapse" for="c-42484643">[-]</label><label class="expand" for="c-42484643">[1 more]</label></div><br/><div class="children"><div class="content">“alphebatically” is used 3 times, and otherwise no typos that I noticed. So I wondered if it’s a term I’m not familiar with.</div><br/></div></div><div id="42483882" class="c"><input type="checkbox" id="c-42483882" checked=""/><div class="controls bullet"><span class="by">dmitrygr</span><span>|</span><a href="#42484643">prev</a><span>|</span><label class="collapse" for="c-42483882">[-]</label><label class="expand" for="c-42483882">[4 more]</label></div><br/><div class="children"><div class="content">Why not just change the “%s.%u” to “%s.%010u”  and no code changes?</div><br/><div id="42484901" class="c"><input type="checkbox" id="c-42484901" checked=""/><div class="controls bullet"><span class="by">consp</span><span>|</span><a href="#42483882">parent</a><span>|</span><a href="#42483954">next</a><span>|</span><label class="collapse" for="c-42484901">[-]</label><label class="expand" for="c-42484901">[1 more]</label></div><br/><div class="children"><div class="content">You just created a fix up to a large, but arbitrary, number just pushing the problem down the road instead of fixing it.</div><br/></div></div><div id="42483954" class="c"><input type="checkbox" id="c-42483954" checked=""/><div class="controls bullet"><span class="by">andrelaszlo</span><span>|</span><a href="#42483882">parent</a><span>|</span><a href="#42484901">prev</a><span>|</span><label class="collapse" for="c-42483954">[-]</label><label class="expand" for="c-42483954">[2 more]</label></div><br/><div class="children"><div class="content">If I understood the article correctly it caused problems when the same file was imported multiple times, or when another file with the same base name was imported.<p><a href="https:&#x2F;&#x2F;gist.github.com&#x2F;bssrdf&#x2F;397900607028bffd0f8d223a7acdce7e#solution" rel="nofollow">https:&#x2F;&#x2F;gist.github.com&#x2F;bssrdf&#x2F;397900607028bffd0f8d223a7acdc...</a></div><br/><div id="42484134" class="c"><input type="checkbox" id="c-42484134" checked=""/><div class="controls bullet"><span class="by">dmitrygr</span><span>|</span><a href="#42483882">root</a><span>|</span><a href="#42483954">parent</a><span>|</span><label class="collapse" for="c-42484134">[-]</label><label class="expand" for="c-42484134">[1 more]</label></div><br/><div class="children"><div class="content">Yes, TFA says the issue is because &quot;12345&quot; sorts before &quot;9888&quot;<p>My solution avoids that.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>