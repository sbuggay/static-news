<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1728550878897" as="style"/><link rel="stylesheet" href="styles.css?v=1728550878897"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://til.simonwillison.net/homebrew/no-verify-attestations">Upgrading Homebrew and avoiding the &quot;failed to verify attestation&quot; error</a> <span class="domain">(<a href="https://til.simonwillison.net">til.simonwillison.net</a>)</span></div><div class="subtext"><span>chmaynard</span> | <span>34 comments</span></div><br/><div><div id="41793415" class="c"><input type="checkbox" id="c-41793415" checked=""/><div class="controls bullet"><span class="by">cglan</span><span>|</span><a href="#41794464">next</a><span>|</span><label class="collapse" for="c-41793415">[-]</label><label class="expand" for="c-41793415">[22 more]</label></div><br/><div class="children"><div class="content">I’ve switched over to devbox, which is a thin, easy to use wrapper around Nix on osx. Haven’t had to install brew yet. Brew was simple in theory but I always ran into so many issues like this, or just various packages polluting everything. Fingers crossed I don’t have to go back<p>As someone who hates tinkering with this kinda stuff, I’m surprised how well it works so far</div><br/><div id="41794431" class="c"><input type="checkbox" id="c-41794431" checked=""/><div class="controls bullet"><span class="by">vbezhenar</span><span>|</span><a href="#41793415">parent</a><span>|</span><a href="#41795736">next</a><span>|</span><label class="collapse" for="c-41794431">[-]</label><label class="expand" for="c-41794431">[13 more]</label></div><br/><div class="children"><div class="content">My issues with homebrew are:<p>1. I hate the concept of dependency management. I want every package to ship with all dependencies inside. Just download tarball, extract and that&#x27;s about it.<p>2. homebrew often wants to install things I already have, like python.<p>3. No easy way to install old packages.<p>I don&#x27;t understand why things are made harder than they should be.</div><br/><div id="41794741" class="c"><input type="checkbox" id="c-41794741" checked=""/><div class="controls bullet"><span class="by">zdw</span><span>|</span><a href="#41793415">root</a><span>|</span><a href="#41794431">parent</a><span>|</span><a href="#41794629">next</a><span>|</span><label class="collapse" for="c-41794741">[-]</label><label class="expand" for="c-41794741">[5 more]</label></div><br/><div class="children"><div class="content">The downside of the &quot;bundle everything&quot; approach (which is also used by Docker and it&#x27;s ilk), is that whenever one of those dependencies needs to be fixed or upgraded (for reliability or security reasons), you have to find <i>every instance</i> of it on the entire system, which soon becomes an extremely difficult task.<p>Shared libraries don&#x27;t have this problem. Yes, they&#x27;re separate packages, but having dependencies that can be upgraded separately simplifies upgrading that dependency.</div><br/><div id="41794801" class="c"><input type="checkbox" id="c-41794801" checked=""/><div class="controls bullet"><span class="by">cortesoft</span><span>|</span><a href="#41793415">root</a><span>|</span><a href="#41794741">parent</a><span>|</span><a href="#41795042">next</a><span>|</span><label class="collapse" for="c-41794801">[-]</label><label class="expand" for="c-41794801">[2 more]</label></div><br/><div class="children"><div class="content">This is assuming that just upgrading the shared library will work for everything. Too often, some things are broken by the upgrade, and since you weren&#x27;t explicitly trying to update the thing that broke, you might not notice until a later date, at which point you may struggle to remember what was updated that it relies on.</div><br/><div id="41794851" class="c"><input type="checkbox" id="c-41794851" checked=""/><div class="controls bullet"><span class="by">zdw</span><span>|</span><a href="#41793415">root</a><span>|</span><a href="#41794801">parent</a><span>|</span><a href="#41795042">next</a><span>|</span><label class="collapse" for="c-41794851">[-]</label><label class="expand" for="c-41794851">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t disagree that Hyrum&#x27;s Law[1] is definitely a thing, but in practice with libraries that attempt SemVer or similar compatibility guarantees and understand that they&#x27;ll be used in a shared library environment, breakage is not that common.<p>It also doesn&#x27;t work for some ecosystems (like Go) where the practice is to prefer static linking.<p>1: <a href="https:&#x2F;&#x2F;www.hyrumslaw.com" rel="nofollow">https:&#x2F;&#x2F;www.hyrumslaw.com</a></div><br/></div></div></div></div><div id="41795042" class="c"><input type="checkbox" id="c-41795042" checked=""/><div class="controls bullet"><span class="by">vbezhenar</span><span>|</span><a href="#41793415">root</a><span>|</span><a href="#41794741">parent</a><span>|</span><a href="#41794801">prev</a><span>|</span><a href="#41794629">next</a><span>|</span><label class="collapse" for="c-41795042">[-]</label><label class="expand" for="c-41795042">[2 more]</label></div><br/><div class="children"><div class="content">&gt; The downside of the &quot;bundle everything&quot; approach (which is also used by Docker and it&#x27;s ilk), is that whenever one of those dependencies needs to be fixed or upgraded (for reliability or security reasons), you have to find every instance of it on the entire system, which soon becomes an extremely difficult task.<p>How it becomes difficult task? Just download things and replace them, when I ask to update. I have fast internet and big SSD, that&#x27;s fine for me. 90% of software I&#x27;m using on my Mac are installed via alternative ways and they already bundle all the dependencies, so I already living with it.</div><br/><div id="41795070" class="c"><input type="checkbox" id="c-41795070" checked=""/><div class="controls bullet"><span class="by">whalesalad</span><span>|</span><a href="#41793415">root</a><span>|</span><a href="#41795042">parent</a><span>|</span><a href="#41794629">next</a><span>|</span><label class="collapse" for="c-41795070">[-]</label><label class="expand" for="c-41795070">[1 more]</label></div><br/><div class="children"><div class="content">There are also ways to abstract the files on disk such that it appears every module has its own copy of “foo.so” but they’re all the same bytes on disk. Using content hashes for example. I believe this is how pnpm works.<p>I don’t buy the shared libraries solve problems argument either. Lots of software are pinned to a specific version anyway so just because some security update has come out for a shared lib doesn’t mean it will work with all your other software.</div><br/></div></div></div></div></div></div><div id="41794629" class="c"><input type="checkbox" id="c-41794629" checked=""/><div class="controls bullet"><span class="by">ryandrake</span><span>|</span><a href="#41793415">root</a><span>|</span><a href="#41794431">parent</a><span>|</span><a href="#41794741">prev</a><span>|</span><a href="#41794828">next</a><span>|</span><label class="collapse" for="c-41794629">[-]</label><label class="expand" for="c-41794629">[5 more]</label></div><br/><div class="children"><div class="content">Dependencies are totally out of control, in much of OSS, not just Homebrew. I probably have 5-6 leaf node packages that I actually installed with brew install, but brew list shows close to 100 little dependencies. Same with apt on my Ubuntu&#x2F;Debian systems. I physically installed a handful of applications but my system has hundreds of packages installed. At least it’s not DLL Hell: the dependency management tools are great and uninstallation is clean, but wow what an explosion of quantity of dependencies!<p>I don’t use node but I understand it’s a mess there too.</div><br/><div id="41796959" class="c"><input type="checkbox" id="c-41796959" checked=""/><div class="controls bullet"><span class="by">iforgotmysocks</span><span>|</span><a href="#41793415">root</a><span>|</span><a href="#41794629">parent</a><span>|</span><a href="#41794878">next</a><span>|</span><label class="collapse" for="c-41796959">[-]</label><label class="expand" for="c-41796959">[1 more]</label></div><br/><div class="children"><div class="content">You might be able to a nice graph with this command: brew deps --installed --graph</div><br/></div></div><div id="41794878" class="c"><input type="checkbox" id="c-41794878" checked=""/><div class="controls bullet"><span class="by">eric-hu</span><span>|</span><a href="#41793415">root</a><span>|</span><a href="#41794629">parent</a><span>|</span><a href="#41796959">prev</a><span>|</span><a href="#41794643">next</a><span>|</span><label class="collapse" for="c-41794878">[-]</label><label class="expand" for="c-41794878">[2 more]</label></div><br/><div class="children"><div class="content">There’s command to see your leaf dependencies:<p><a href="https:&#x2F;&#x2F;docs.brew.sh&#x2F;Manpage#leaves---installed-on-request---installed-as-dependency" rel="nofollow">https:&#x2F;&#x2F;docs.brew.sh&#x2F;Manpage#leaves---installed-on-request--...</a></div><br/><div id="41794904" class="c"><input type="checkbox" id="c-41794904" checked=""/><div class="controls bullet"><span class="by">ryandrake</span><span>|</span><a href="#41793415">root</a><span>|</span><a href="#41794878">parent</a><span>|</span><a href="#41794643">next</a><span>|</span><label class="collapse" for="c-41794904">[-]</label><label class="expand" for="c-41794904">[1 more]</label></div><br/><div class="children"><div class="content">Yep I use that a lot. I like to make sure I only have installed what I need to survive, and uninstall everything else.</div><br/></div></div></div></div><div id="41794643" class="c"><input type="checkbox" id="c-41794643" checked=""/><div class="controls bullet"><span class="by">01HNNWZ0MV43FF</span><span>|</span><a href="#41793415">root</a><span>|</span><a href="#41794629">parent</a><span>|</span><a href="#41794878">prev</a><span>|</span><a href="#41794828">next</a><span>|</span><label class="collapse" for="c-41794643">[-]</label><label class="expand" for="c-41794643">[1 more]</label></div><br/><div class="children"><div class="content">But it&#x27;s nice to reuse code</div><br/></div></div></div></div><div id="41794828" class="c"><input type="checkbox" id="c-41794828" checked=""/><div class="controls bullet"><span class="by">valbaca</span><span>|</span><a href="#41793415">root</a><span>|</span><a href="#41794431">parent</a><span>|</span><a href="#41794629">prev</a><span>|</span><a href="#41795736">next</a><span>|</span><label class="collapse" for="c-41794828">[-]</label><label class="expand" for="c-41794828">[2 more]</label></div><br/><div class="children"><div class="content">&gt; I want every package to ship with all dependencies inside.<p>Stopping where? python? c libraries? glibc? the kernel?<p>&quot;all the dependencies&quot; isn&#x27;t what you think it is<p>&gt; 2. homebrew often wants to install things I already have, like python.<p>oh yeah &quot;python&quot; like it&#x27;s just A Thing You have. nothing has versions and of course every version can execute every code that&#x27;s ever been written, past and future.<p>&gt; I don&#x27;t understand why things are made harder than they should be.<p>You&#x27;re just willfully ignoring or not understanding the complexities.</div><br/><div id="41795066" class="c"><input type="checkbox" id="c-41795066" checked=""/><div class="controls bullet"><span class="by">vbezhenar</span><span>|</span><a href="#41793415">root</a><span>|</span><a href="#41794828">parent</a><span>|</span><a href="#41795736">next</a><span>|</span><label class="collapse" for="c-41795066">[-]</label><label class="expand" for="c-41795066">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Stopping where?<p>Where OS provides guarantees. If OS provides guarantee that libc will be there, do not ship libc. If OS provides guarantees that python will be there, do not ship python. If you do ship python, hide it very well, so I&#x27;d never even know about it, unless I go out of my way. And it&#x27;ll never be shared by anything.<p>Those questions are easy and solved by every commercial software. They need to make those choices and they do make it.</div><br/></div></div></div></div></div></div><div id="41795736" class="c"><input type="checkbox" id="c-41795736" checked=""/><div class="controls bullet"><span class="by">zombot</span><span>|</span><a href="#41793415">parent</a><span>|</span><a href="#41794431">prev</a><span>|</span><a href="#41793666">next</a><span>|</span><label class="collapse" for="c-41795736">[-]</label><label class="expand" for="c-41795736">[1 more]</label></div><br/><div class="children"><div class="content">In case it shouldn&#x27;t work out, I never had any problems with MacPorts.<p>I will have a look at devbox. I always found Nix on macOS too much hassle, maybe the situation has gotten better?</div><br/></div></div><div id="41793666" class="c"><input type="checkbox" id="c-41793666" checked=""/><div class="controls bullet"><span class="by">JTyQZSnP3cQGa8B</span><span>|</span><a href="#41793415">parent</a><span>|</span><a href="#41795736">prev</a><span>|</span><a href="#41795204">next</a><span>|</span><label class="collapse" for="c-41793666">[-]</label><label class="expand" for="c-41793666">[6 more]</label></div><br/><div class="children"><div class="content">MacPorts is a great alternative, also way older but never has been as successful as Homebrew.</div><br/><div id="41795813" class="c"><input type="checkbox" id="c-41795813" checked=""/><div class="controls bullet"><span class="by">quesera</span><span>|</span><a href="#41793415">root</a><span>|</span><a href="#41793666">parent</a><span>|</span><a href="#41793842">next</a><span>|</span><label class="collapse" for="c-41795813">[-]</label><label class="expand" for="c-41795813">[1 more]</label></div><br/><div class="children"><div class="content">MacPorts is great!<p>Another excellent alternative is pkgsrc: <a href="https:&#x2F;&#x2F;pkgsrc.smartos.org&#x2F;install-on-macos&#x2F;" rel="nofollow">https:&#x2F;&#x2F;pkgsrc.smartos.org&#x2F;install-on-macos&#x2F;</a><p>I&#x27;ve used pkgsrc on SmartOS&#x2F;illumos and NetBSD for many years, but this is my first time using it on macOS -- about 18 months now, and all experiences positive!</div><br/></div></div><div id="41793842" class="c"><input type="checkbox" id="c-41793842" checked=""/><div class="controls bullet"><span class="by">zdw</span><span>|</span><a href="#41793415">root</a><span>|</span><a href="#41793666">parent</a><span>|</span><a href="#41795813">prev</a><span>|</span><a href="#41795897">next</a><span>|</span><label class="collapse" for="c-41793842">[-]</label><label class="expand" for="c-41793842">[3 more]</label></div><br/><div class="children"><div class="content">Second recommendation for MacPorts<p>It predates Homebrew by a bit and is under Apple&#x27;s <a href="http:&#x2F;&#x2F;www.macosforge.org" rel="nofollow">http:&#x2F;&#x2F;www.macosforge.org</a> umbrella of OSS projects, so as close to 1st party support as you can get.</div><br/><div id="41795270" class="c"><input type="checkbox" id="c-41795270" checked=""/><div class="controls bullet"><span class="by">gkoller</span><span>|</span><a href="#41793415">root</a><span>|</span><a href="#41793842">parent</a><span>|</span><a href="#41795268">next</a><span>|</span><label class="collapse" for="c-41795270">[-]</label><label class="expand" for="c-41795270">[1 more]</label></div><br/><div class="children"><div class="content">MacPorts rocks. No ports breaking when upgrading MacOS as can (or could,not sure if that&#x27;s still an issue) with Brew.</div><br/></div></div><div id="41795268" class="c"><input type="checkbox" id="c-41795268" checked=""/><div class="controls bullet"><span class="by">skydhash</span><span>|</span><a href="#41793415">root</a><span>|</span><a href="#41793842">parent</a><span>|</span><a href="#41795270">prev</a><span>|</span><a href="#41795897">next</a><span>|</span><label class="collapse" for="c-41795268">[-]</label><label class="expand" for="c-41795268">[1 more]</label></div><br/><div class="children"><div class="content">Third one for macports. It&#x27;s more sane, at least for multi users support (I create an user for each contract work)</div><br/></div></div></div></div><div id="41795897" class="c"><input type="checkbox" id="c-41795897" checked=""/><div class="controls bullet"><span class="by">zombot</span><span>|</span><a href="#41793415">root</a><span>|</span><a href="#41793666">parent</a><span>|</span><a href="#41793842">prev</a><span>|</span><a href="#41795204">next</a><span>|</span><label class="collapse" for="c-41795897">[-]</label><label class="expand" for="c-41795897">[1 more]</label></div><br/><div class="children"><div class="content">Homebrew is really the worst of all the options on macOS, I wonder how it became so popular in the first place.</div><br/></div></div></div></div><div id="41795204" class="c"><input type="checkbox" id="c-41795204" checked=""/><div class="controls bullet"><span class="by">zamalek</span><span>|</span><a href="#41793415">parent</a><span>|</span><a href="#41793666">prev</a><span>|</span><a href="#41794464">next</a><span>|</span><label class="collapse" for="c-41795204">[-]</label><label class="expand" for="c-41795204">[1 more]</label></div><br/><div class="children"><div class="content">What I have learned from Nix is that polluting the global (user or system) environment is going to spell disaster at some point. Its obviously fixable in an obvious way, but why subject yourself to this nonsense in the first place. The only stuff I have in my global env is stuff I could actually use from almost anywhere, even non-code directories.<p>Nix isn&#x27;t the only tool that solves this, there is acme and even per-compiler tools like nvm or cargo.</div><br/></div></div></div></div><div id="41794464" class="c"><input type="checkbox" id="c-41794464" checked=""/><div class="controls bullet"><span class="by">mootoday</span><span>|</span><a href="#41793415">prev</a><span>|</span><a href="#41794055">next</a><span>|</span><label class="collapse" for="c-41794464">[-]</label><label class="expand" for="c-41794464">[3 more]</label></div><br/><div class="children"><div class="content">All I can say when I see Homebrew: &quot;I replaced Homebrew with Devbox&quot; [1]<p>[1] <a href="https:&#x2F;&#x2F;mootoday.com&#x2F;blog&#x2F;i-replaced-homebrew-with-devbox" rel="nofollow">https:&#x2F;&#x2F;mootoday.com&#x2F;blog&#x2F;i-replaced-homebrew-with-devbox</a></div><br/><div id="41795533" class="c"><input type="checkbox" id="c-41795533" checked=""/><div class="controls bullet"><span class="by">ashconnor</span><span>|</span><a href="#41794464">parent</a><span>|</span><a href="#41794055">next</a><span>|</span><label class="collapse" for="c-41795533">[-]</label><label class="expand" for="c-41795533">[2 more]</label></div><br/><div class="children"><div class="content">Some folks are running nix on OSX along with nix-darwin.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;LnL7&#x2F;nix-darwin">https:&#x2F;&#x2F;github.com&#x2F;LnL7&#x2F;nix-darwin</a></div><br/><div id="41796807" class="c"><input type="checkbox" id="c-41796807" checked=""/><div class="controls bullet"><span class="by">lloeki</span><span>|</span><a href="#41794464">root</a><span>|</span><a href="#41795533">parent</a><span>|</span><a href="#41794055">next</a><span>|</span><label class="collapse" for="c-41796807">[-]</label><label class="expand" for="c-41796807">[1 more]</label></div><br/><div class="children"><div class="content">nix-darwin is the cherry on the cake, plain nixpkgs is already miles better than homebrew.</div><br/></div></div></div></div></div></div><div id="41794055" class="c"><input type="checkbox" id="c-41794055" checked=""/><div class="controls bullet"><span class="by">october8140</span><span>|</span><a href="#41794464">prev</a><span>|</span><a href="#41796781">next</a><span>|</span><label class="collapse" for="c-41794055">[-]</label><label class="expand" for="c-41794055">[5 more]</label></div><br/><div class="children"><div class="content">&gt; I frequently have rate limiting problems with my GitHub account<p>What are people doing to get their account rate limited?</div><br/><div id="41795289" class="c"><input type="checkbox" id="c-41795289" checked=""/><div class="controls bullet"><span class="by">MarkSweep</span><span>|</span><a href="#41794055">parent</a><span>|</span><a href="#41794941">next</a><span>|</span><label class="collapse" for="c-41795289">[-]</label><label class="expand" for="c-41795289">[1 more]</label></div><br/><div class="children"><div class="content">If you are in a large company that VPNs all your traffic to one point, you can get rate limited if you visit GitHub without logging in.<p>If you are getting the GitHub API, the rate limit is 60 request per hour, per IP. That is easy to hit. If you send an API token, it’s 5000 requests per hour.<p><a href="https:&#x2F;&#x2F;docs.github.com&#x2F;en&#x2F;rest&#x2F;using-the-rest-api&#x2F;rate-limits-for-the-rest-api?apiVersion=2022-11-28" rel="nofollow">https:&#x2F;&#x2F;docs.github.com&#x2F;en&#x2F;rest&#x2F;using-the-rest-api&#x2F;rate-limi...</a></div><br/></div></div><div id="41794941" class="c"><input type="checkbox" id="c-41794941" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#41794055">parent</a><span>|</span><a href="#41795289">prev</a><span>|</span><a href="#41794246">next</a><span>|</span><label class="collapse" for="c-41794941">[-]</label><label class="expand" for="c-41794941">[1 more]</label></div><br/><div class="children"><div class="content">I still haven&#x27;t figured out quite what&#x27;s going on there, but I wouldn&#x27;t be surprised to learn that it was due to all of the scrapers I&#x27;m running: <a href="https:&#x2F;&#x2F;simonwillison.net&#x2F;2020&#x2F;Oct&#x2F;9&#x2F;git-scraping&#x2F;" rel="nofollow">https:&#x2F;&#x2F;simonwillison.net&#x2F;2020&#x2F;Oct&#x2F;9&#x2F;git-scraping&#x2F;</a></div><br/></div></div><div id="41794537" class="c"><input type="checkbox" id="c-41794537" checked=""/><div class="controls bullet"><span class="by">JohnMakin</span><span>|</span><a href="#41794055">parent</a><span>|</span><a href="#41794246">prev</a><span>|</span><a href="#41796781">next</a><span>|</span><label class="collapse" for="c-41794537">[-]</label><label class="expand" for="c-41794537">[1 more]</label></div><br/><div class="children"><div class="content">CI&#x2F;CD pipelines at large scale can pull directly from src repos sometimes causing stuff like this, just off the top of my head. I think the default is 5000 per hour which is not very much for automation to chew through. I ran into something similar with bitbucket once that I had to engineer around because it was very annoying.</div><br/></div></div></div></div><div id="41796781" class="c"><input type="checkbox" id="c-41796781" checked=""/><div class="controls bullet"><span class="by">rswail</span><span>|</span><a href="#41794055">prev</a><span>|</span><a href="#41794919">next</a><span>|</span><label class="collapse" for="c-41796781">[-]</label><label class="expand" for="c-41796781">[1 more]</label></div><br/><div class="children"><div class="content">1. Delete Homebrew<p>2. Install Macports</div><br/></div></div><div id="41794919" class="c"><input type="checkbox" id="c-41794919" checked=""/><div class="controls bullet"><span class="by">a1j9o94</span><span>|</span><a href="#41796781">prev</a><span>|</span><a href="#41795693">next</a><span>|</span><label class="collapse" for="c-41794919">[-]</label><label class="expand" for="c-41794919">[1 more]</label></div><br/><div class="children"><div class="content">I ran in to the same problem last weekend and got this suggested fix from gpt-o1.<p>I did try to Google it first, but wasn&#x27;t able to find anything on it.</div><br/></div></div><div id="41795693" class="c"><input type="checkbox" id="c-41795693" checked=""/><div class="controls bullet"><span class="by">sublinear</span><span>|</span><a href="#41794919">prev</a><span>|</span><label class="collapse" for="c-41795693">[-]</label><label class="expand" for="c-41795693">[1 more]</label></div><br/><div class="children"><div class="content">Brew has always been dogshit. Nobody runs macos in production. Please stop using this.</div><br/></div></div></div></div></div></div></div></body></html>