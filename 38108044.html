<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1698915667480" as="style"/><link rel="stylesheet" href="styles.css?v=1698915667480"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/dolthub/doltgresql">Show HN: DoltgreSQL – Version-Controlled DB, Like Git and PostgreSQL had a baby</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>Hydrocharged</span> | <span>13 comments</span></div><br/><div><div id="38110313" class="c"><input type="checkbox" id="c-38110313" checked=""/><div class="controls bullet"><span class="by">gijsnijholt1980</span><span>|</span><a href="#38109632">next</a><span>|</span><label class="collapse" for="c-38110313">[-]</label><label class="expand" for="c-38110313">[2 more]</label></div><br/><div class="children"><div class="content">Do you know VMDS by GE (part of Smallworld)?<p>It has data versioning too, using a concept called ‘alternatives’. 
Do you know where DoltgreSQL and VMDS differ&#x2F;overlap, functionally?<p>See <a href="https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;VMDS" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;VMDS</a></div><br/><div id="38110548" class="c"><input type="checkbox" id="c-38110548" checked=""/><div class="controls bullet"><span class="by">Hydrocharged</span><span>|</span><a href="#38110313">parent</a><span>|</span><a href="#38109632">next</a><span>|</span><label class="collapse" for="c-38110548">[-]</label><label class="expand" for="c-38110548">[1 more]</label></div><br/><div class="children"><div class="content">This is interesting, I&#x27;ve never heard of VMDS before. Someone else on the team may have, but I have not personally. From a quick glance at the linked Wikipedia page, it looks like this was created around the same time as SQL, and therefore has a different interaction model. It also predates a lot of modern version-control software like Git, SVN, and Perforce.<p>So it looks like VMDS is a rather unique take on versioning data, where data is viewed as objects. Dolt and DoltgreSQL use the table and row paradigms that the majority of modern relational databases use. Dolt is designed to be a drop-in replacement for MySQL, and DoltgreSQL for PostgreSQL, so that already determines the interface. Regarding VMDS&#x27; versioning functionality, I see that is supports merging and conflict resolution at the transaction layer, but I&#x27;m not seeing anything similar to the concept of branches, which is something that Dolt and DoltgreSQL supports.<p>Overall, for modern use cases, it doesn&#x27;t look like they overlap much. VMDS seems focused more on the spatial case while representing data as objects, while Dolt and DoltgreSQL are traditional relational databases that support versioning all aspects of a relational database.</div><br/></div></div></div></div><div id="38109632" class="c"><input type="checkbox" id="c-38109632" checked=""/><div class="controls bullet"><span class="by">leononame</span><span>|</span><a href="#38110313">prev</a><span>|</span><a href="#38109736">next</a><span>|</span><label class="collapse" for="c-38109632">[-]</label><label class="expand" for="c-38109632">[4 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been waiting eagerly for this.<p>Do you have a clear position on which PostgreSQL features not to support? I suppose there are more than just some things that won&#x27;t make the cut because of the architectural decisions.<p>While I unnderstand the decision, I&#x27;m not sure it&#x27;s the best way to go about it. If you only emulate a subset of PostgreSQL&#x27;s syntax and features, few people will be compelled to switch because they might be afraid. For greenfield projects, most people would probably choose the MySQL syntax since it&#x27;s the default.<p>I don&#x27;t think this is about the necessity of running the PostgreSQL binary itself (although your approach already removes extensions which for many people is a downer). It&#x27;s just that you can&#x27;t trust an emulated system to be 100% equal in behavior (and people rely on implicit behavior of a system all the time, unfortunately) and that might be already enough for a lot of people to not use it.<p>Have you guys already encountered some things in the PostgreSQL engine that just behave a bit differently from Dolt&#x27;s engine? If so, what was your approach to mitigate it?<p>Edit: just wanted to add: I&#x27;m really impressed by your work and I&#x27;m looking forward to trying this out. I don&#x27;t mean to be mean, these are genuine questions I have. Congratulations on the launch.</div><br/><div id="38109922" class="c"><input type="checkbox" id="c-38109922" checked=""/><div class="controls bullet"><span class="by">Hydrocharged</span><span>|</span><a href="#38109632">parent</a><span>|</span><a href="#38109736">next</a><span>|</span><label class="collapse" for="c-38109922">[-]</label><label class="expand" for="c-38109922">[3 more]</label></div><br/><div class="children"><div class="content">&gt; <i>Do you have a clear position on which PostgreSQL features not to support? I suppose there are more than just some things that won&#x27;t make the cut because of the architectural decisions.<p>While I unnderstand the decision, I&#x27;m not sure it&#x27;s the best way to go about it. If you only emulate a subset of PostgreSQL&#x27;s syntax and features, few people will be compelled to switch because they might be afraid.</i><p>Eventually, we&#x27;d like to support the entirety of PostgreSQL&#x27;s feature set, even including features like extensions. Dolt (<a href="https:&#x2F;&#x2F;github.com&#x2F;dolthub&#x2F;dolt">https:&#x2F;&#x2F;github.com&#x2F;dolthub&#x2F;dolt</a>), our first product, is the same to MySQL and DoltgreSQL is to Postgres, and we&#x27;re taking a no-compromises approach to what we support. That, of course, means that there are a lot of features that need to be implemented, but Dolt is already almost there. For the majority of customers, Dolt has implemented everything they need from MySQL.<p>I&#x27;d definitely recommended checking out how Dolt compares with MySQL to see how we&#x27;re approaching compatibility. All behavior, implicit and explicit, is something that we aim to model, and any deviations are considered bugs that we need to fix. There are exceptions, but those are only used when we feel it&#x27;s for good reason (an example being how MySQL handles collation cascading in some circumstances).<p>&gt; <i>Have you guys already encountered some things in the PostgreSQL engine that just behave a bit differently from Dolt&#x27;s engine? If so, what was your approach to mitigate it?</i><p>With DoltgreSQL, it&#x27;s at an <i>extremely</i> early stage. We&#x27;re still working on getting the basic functionality working before we rigorously start testing to make sure that we match PostgreSQL&#x27;s behavior. However, we can point to our approach with Dolt and MySQL for how we plan to handle DoltgreSQL and PostgreSQL. For every feature we implement, we compare the functionality with what is written in MySQL&#x27;s documentation as a baseline. From there, we move on to comparing the output across a range of input statements. Sometimes the documentation differs from MySQL&#x27;s own results, and we then try to find out why that&#x27;s the case (Configuration? Out of date documentation? Bug? etc.).<p>We also use external benchmarks to measure our correctness versus MySQL. In one such benchmark, containing around 6 million tests, Dolt recently reached 99.99% compared to MySQL (<a href="https:&#x2F;&#x2F;www.dolthub.com&#x2F;blog&#x2F;2023-10-11-four-9s-correctness&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.dolthub.com&#x2F;blog&#x2F;2023-10-11-four-9s-correctness&#x2F;</a>).<p>I hope this answered your questions! Let me know if you have any more :)</div><br/><div id="38110228" class="c"><input type="checkbox" id="c-38110228" checked=""/><div class="controls bullet"><span class="by">leononame</span><span>|</span><a href="#38109632">root</a><span>|</span><a href="#38109922">parent</a><span>|</span><a href="#38109736">next</a><span>|</span><label class="collapse" for="c-38110228">[-]</label><label class="expand" for="c-38110228">[2 more]</label></div><br/><div class="children"><div class="content">That does answer my questions. It&#x27;s an extremely ambitious undertaking and I wish you the best. I&#x27;ll be following this closely.<p>Some people do performance optimisations based on PostgreSQL&#x27;s inner working (e.g. trying to force data that isn&#x27;t read often but not small into toast). How far do your ambitions go? Are you planning on modeling internal behavior like this as well? Do you think putting in an abstraction layer like this between Dolt will hurt performance?<p>Do you have a time frame (probably not) or a roadmap for Doltgres?</div><br/><div id="38110453" class="c"><input type="checkbox" id="c-38110453" checked=""/><div class="controls bullet"><span class="by">Hydrocharged</span><span>|</span><a href="#38109632">root</a><span>|</span><a href="#38110228">parent</a><span>|</span><a href="#38109736">next</a><span>|</span><label class="collapse" for="c-38110453">[-]</label><label class="expand" for="c-38110453">[1 more]</label></div><br/><div class="children"><div class="content">Thank you!<p>Performance optimizations are tackled a bit differently than correctness ones. For the most part, we&#x27;ll try to use metrics to find weak points in the execution graph and optimize those, but we won&#x27;t go so far as to try and model the internal performance behavior. In part because our storage format is so different that we&#x27;ll have different performance characteristics by necessity.<p>We don&#x27;t have a public roadmap for Doltgres just yet, but we&#x27;re hoping to put one out quite soon! We have a lot of low-hanging roadblocks that we want to take care of before we can get a better look at the overall time frame. We should definitely have one up by the end of the month, but I don&#x27;t want to commit to a time before that.</div><br/></div></div></div></div></div></div></div></div><div id="38109736" class="c"><input type="checkbox" id="c-38109736" checked=""/><div class="controls bullet"><span class="by">selcuka</span><span>|</span><a href="#38109632">prev</a><span>|</span><a href="#38109880">next</a><span>|</span><label class="collapse" for="c-38109736">[-]</label><label class="expand" for="c-38109736">[2 more]</label></div><br/><div class="children"><div class="content">&gt; In 2019, when we were conceiving of Dolt, MySQL was the most popular SQL-flavor. Over the past 5 years, the tide has shifted more towards Postgres, especially among young companies, Dolt&#x27;s target market.<p>Really? I was under the impression that PostgreSQL had already won by then.</div><br/><div id="38109943" class="c"><input type="checkbox" id="c-38109943" checked=""/><div class="controls bullet"><span class="by">Hydrocharged</span><span>|</span><a href="#38109736">parent</a><span>|</span><a href="#38109880">next</a><span>|</span><label class="collapse" for="c-38109943">[-]</label><label class="expand" for="c-38109943">[1 more]</label></div><br/><div class="children"><div class="content">Back then, when we were surveying the landscape, PostgreSQL was definitely in widespread use, but we were seeing MySQL being used in more professional&#x2F;non-hobby spaces. Nowadays that&#x27;s not necessarily the case, and we are seeing shops that were once MySQL-only now adopt PostgreSQL for some of their newer projects. With Dolt supporting MySQL and DoltgreSQL supporting PostgreSQL, we&#x27;re hoping to appeal to both audiences.</div><br/></div></div></div></div><div id="38109880" class="c"><input type="checkbox" id="c-38109880" checked=""/><div class="controls bullet"><span class="by">esafak</span><span>|</span><a href="#38109736">prev</a><span>|</span><a href="#38110163">next</a><span>|</span><label class="collapse" for="c-38109880">[-]</label><label class="expand" for="c-38109880">[2 more]</label></div><br/><div class="children"><div class="content">Can people who use Dolt explain their use case? Dolt competes with Flyway and Bytebase, but it requires you to run their forked database? Schema migration is unpleasant and not something I can imagine doing willy-nilly like a git commit.</div><br/><div id="38110090" class="c"><input type="checkbox" id="c-38110090" checked=""/><div class="controls bullet"><span class="by">Hydrocharged</span><span>|</span><a href="#38109880">parent</a><span>|</span><a href="#38110163">next</a><span>|</span><label class="collapse" for="c-38110090">[-]</label><label class="expand" for="c-38110090">[1 more]</label></div><br/><div class="children"><div class="content">We don&#x27;t really compete with Flyway and Bytebase. Schema migrations are but one aspect of a versioned database. We version <i>everything</i>, from the schema to the data. You can read more here:<p><a href="https:&#x2F;&#x2F;www.dolthub.com&#x2F;blog&#x2F;2022-08-04-database-versioning&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.dolthub.com&#x2F;blog&#x2F;2022-08-04-database-versioning&#x2F;</a><p>A lot of products have come out that attempt to tackle schema versioning, but none have tackled data versioning before Dolt (<a href="https:&#x2F;&#x2F;github.com&#x2F;dolthub&#x2F;dolt">https:&#x2F;&#x2F;github.com&#x2F;dolthub&#x2F;dolt</a>). In addition, our database isn&#x27;t forked, it&#x27;s a full, bespoke solution that can operate as a drop-in replacement for MySQL (Dolt) or PostgreSQL (DoltgreSQL). It&#x27;s honestly quite exciting technology, so definitely feel free to ask any more questions if you&#x27;re curious to learn more!<p>Here is a link to a few use cases as well:
<a href="https:&#x2F;&#x2F;www.dolthub.com&#x2F;blog&#x2F;2022-07-11-dolt-case-studies&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.dolthub.com&#x2F;blog&#x2F;2022-07-11-dolt-case-studies&#x2F;</a></div><br/></div></div></div></div><div id="38110163" class="c"><input type="checkbox" id="c-38110163" checked=""/><div class="controls bullet"><span class="by">zx8080</span><span>|</span><a href="#38109880">prev</a><span>|</span><label class="collapse" for="c-38110163">[-]</label><label class="expand" for="c-38110163">[2 more]</label></div><br/><div class="children"><div class="content">No offence, but how to read the name?</div><br/><div id="38110409" class="c"><input type="checkbox" id="c-38110409" checked=""/><div class="controls bullet"><span class="by">Hydrocharged</span><span>|</span><a href="#38110163">parent</a><span>|</span><label class="collapse" for="c-38110409">[-]</label><label class="expand" for="c-38110409">[1 more]</label></div><br/><div class="children"><div class="content">In person, we generally say Doltgres, similar to Postgres. For the full name, it&#x27;s just going to be Doltgres-Q-L.</div><br/></div></div></div></div></div></div></div></div></div></body></html>