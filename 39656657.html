<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1710061251457" as="style"/><link rel="stylesheet" href="styles.css?v=1710061251457"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://calpaterson.com/s3.html">S3 is files, but not a filesystem</a> <span class="domain">(<a href="https://calpaterson.com">calpaterson.com</a>)</span></div><div class="subtext"><span>todsacerdoti</span> | <span>67 comments</span></div><br/><div><div id="39657561" class="c"><input type="checkbox" id="c-39657561" checked=""/><div class="controls bullet"><span class="by">zmmmmm</span><span>|</span><a href="#39656992">next</a><span>|</span><label class="collapse" for="c-39657561">[-]</label><label class="expand" for="c-39657561">[3 more]</label></div><br/><div class="children"><div class="content">The limitations of S3 (and all the cloud &quot;file systems&quot;) are quite astonishing when you consider you&#x27;re paying for it as a premium service.<p>Try to imagine your astonishment if a traditional storage vendor showed up and told you that their very expensive premium file system they had just sold you:<p><pre><code>    - can&#x27;t store log files because it can&#x27;t append
      anything to an existing files
    - can&#x27;t copy files more than 5GB
    - can&#x27;t rename or move a file
 </code></pre>
When challenged on how you are supposed to make all your applications work
with limitations like that, they glibly told you &quot;oh you&#x27;re supposed to rewrite them all&quot;.</div><br/><div id="39657635" class="c"><input type="checkbox" id="c-39657635" checked=""/><div class="controls bullet"><span class="by">umanwizard</span><span>|</span><a href="#39657561">parent</a><span>|</span><a href="#39657647">next</a><span>|</span><label class="collapse" for="c-39657635">[-]</label><label class="expand" for="c-39657635">[1 more]</label></div><br/><div class="children"><div class="content">Amazon doesn’t market S3 as a replacement for file systems, that’s why EBS exists.<p>Also, is S3 really “very expensive”? Relative to what?</div><br/></div></div><div id="39657647" class="c"><input type="checkbox" id="c-39657647" checked=""/><div class="controls bullet"><span class="by">throwaway290</span><span>|</span><a href="#39657561">parent</a><span>|</span><a href="#39657635">prev</a><span>|</span><a href="#39656992">next</a><span>|</span><label class="collapse" for="c-39657647">[-]</label><label class="expand" for="c-39657647">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s for building things on top. If you want to rename&#x2F;move&#x2F;copy data, implement a layer that maps objects to &quot;filenames&quot; or any metadata you like (or use some lib). If you want to write logs, implement append and rotation. But I for example don&#x27;t and won&#x27;t need any of that and if it helps keep the API simpler and more reliable then I benefit.<p>being a conventional filesystem for S3 would be either a very leaky abstraction or completely different product</div><br/></div></div></div></div><div id="39656992" class="c"><input type="checkbox" id="c-39656992" checked=""/><div class="controls bullet"><span class="by">leetrout</span><span>|</span><a href="#39657561">prev</a><span>|</span><a href="#39657107">next</a><span>|</span><label class="collapse" for="c-39656992">[-]</label><label class="expand" for="c-39656992">[38 more]</label></div><br/><div class="children"><div class="content">My big pet peeve is AWS adding buttons in the UI to make &quot;folders&quot;.<p>It is also a fiction! There are no folders in S3.<p>&gt; When you create a folder in Amazon S3, S3 creates a 0-byte object with a key that&#x27;s set to the folder name that you provided. For example, if you create a folder named photos in your bucket, the Amazon S3 console creates a 0-byte object with the key photos&#x2F;. The console creates this object to support the idea of folders.<p><a href="https:&#x2F;&#x2F;docs.aws.amazon.com&#x2F;AmazonS3&#x2F;latest&#x2F;userguide&#x2F;using-folders.html" rel="nofollow">https:&#x2F;&#x2F;docs.aws.amazon.com&#x2F;AmazonS3&#x2F;latest&#x2F;userguide&#x2F;using-...</a></div><br/><div id="39657014" class="c"><input type="checkbox" id="c-39657014" checked=""/><div class="controls bullet"><span class="by">riehwvfbk</span><span>|</span><a href="#39656992">parent</a><span>|</span><a href="#39657048">next</a><span>|</span><label class="collapse" for="c-39657014">[-]</label><label class="expand" for="c-39657014">[21 more]</label></div><br/><div class="children"><div class="content">Is that really so different from how folders work on other systems?  A directory inode is just an inode.</div><br/><div id="39657063" class="c"><input type="checkbox" id="c-39657063" checked=""/><div class="controls bullet"><span class="by">klodolph</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657014">parent</a><span>|</span><a href="#39657634">next</a><span>|</span><label class="collapse" for="c-39657063">[-]</label><label class="expand" for="c-39657063">[15 more]</label></div><br/><div class="children"><div class="content">Yes. It is, in practice, incredibly different.<p>Imagine you have a file named &#x2F;some&#x2F;dir&#x2F;file.jpg.<p>In a filesystem, there’s an inode for &#x2F;some. It contains an entry for &#x2F;some&#x2F;dir, which is also an inode, and then in the very deepest level, there is an inode for &#x2F;some&#x2F;dir&#x2F;file.jpg. You can rename &#x2F;some to &#x2F;something_else if you want. Think of it kind of like a table:<p><pre><code>  +-------+--------+----------+-------+
  | inode | parent |     name |  data |
  +-------+--------+----------+-------+
  |     1 | (null) |     some | (dir) |
  |     2 |      1 |      dir | (dir) |
  |     3 |      2 | file.jpg |  jpeg |
  +-------+--------+----------+-------+
</code></pre>
In S3 (and other object stores), the table is like this:<p><pre><code>  +-------------------+------+
  | key               | data |
  +-------------------+------+
  | some&#x2F;dir&#x2F;file.jpg | jpeg |
  +-------------------+------+
</code></pre>
The kind of queries you can do is completely different. There are no inodes in S3. There is just a mapping from keys to objects. There’s an index on these keys, so you can do queries—but the &#x2F; character is NOT SPECIAL and does not actually have any significance to the S3 storage system and API. The &#x2F; character only has significance in the UI.<p>You can, if you want, use a completely different character to separate “components” in S3, rather than using &#x2F;, because &#x2F; is not special. If you want something like “some:dir:file.jpg” or “some.dir.file.jpg” you can do that. Again, because &#x2F; is not special.</div><br/><div id="39657141" class="c"><input type="checkbox" id="c-39657141" checked=""/><div class="controls bullet"><span class="by">Demiurge</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657063">parent</a><span>|</span><a href="#39657126">next</a><span>|</span><label class="collapse" for="c-39657141">[-]</label><label class="expand" for="c-39657141">[2 more]</label></div><br/><div class="children"><div class="content">Let’s start with the fact that you’re talking to an HTTP api… Even if S3 had web3.0 inodes, the querying semantics would not make sense. It’s a higher level API, because you don’t deal with blocks of magnetic storage and binary buffers. Of course s3 is not a filesystem, that is part of its definition, and reason to be…</div><br/><div id="39657155" class="c"><input type="checkbox" id="c-39657155" checked=""/><div class="controls bullet"><span class="by">klodolph</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657141">parent</a><span>|</span><a href="#39657126">next</a><span>|</span><label class="collapse" for="c-39657155">[-]</label><label class="expand" for="c-39657155">[1 more]</label></div><br/><div class="children"><div class="content">I think if you focus too narrowly on the details of the wire protocol, you’ll lose sight of the big picture and the semantics.<p>S3 is not a filesystem because the semantics are different from the kind of semantics we expect from filesystems. You can’t take the high-level API provided by a filesystem, use S3 as the backing storage, and expect to get good performance out of it unless you use a <i>ton</i> of translation.<p>Stuff like NFS or CIFS <i>are</i> filesystems. They behave like filesystems, in practice. You can rename files. You can modify files. You can create directories.</div><br/></div></div></div></div><div id="39657126" class="c"><input type="checkbox" id="c-39657126" checked=""/><div class="controls bullet"><span class="by">riehwvfbk</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657063">parent</a><span>|</span><a href="#39657141">prev</a><span>|</span><a href="#39657085">next</a><span>|</span><label class="collapse" for="c-39657126">[-]</label><label class="expand" for="c-39657126">[5 more]</label></div><br/><div class="children"><div class="content">Thank you, now I understand what the special 0-byte object refers to.  It represents an empty folder.<p>Fair enough, basing folders on object names split by &#x2F; is pretty inefficient.  I wonder why they didn&#x27;t go with a solution like git&#x27;s trees.</div><br/><div id="39657143" class="c"><input type="checkbox" id="c-39657143" checked=""/><div class="controls bullet"><span class="by">klodolph</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657126">parent</a><span>|</span><a href="#39657366">next</a><span>|</span><label class="collapse" for="c-39657143">[-]</label><label class="expand" for="c-39657143">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Fair enough, basing folders on object names split by &#x2F; is pretty inefficient. I wonder why they didn&#x27;t go with a solution like git&#x27;s trees.<p>What, exactly, is inefficient about it?<p>Think for a moment about the data structures you would use to represent a directory structure in a filesystem, and the data structures you would use to represent a key&#x2F;value store.<p>With a filesystem, if you split a string &#x2F;some&#x2F;dir&#x2F;file.jpg into three parts, “some”, “dir”, “file.jpg”, then you are actually making a decision about the tree structure. And here’s a question—is that a <i>balanced</i> tree you got there? Maybe it’s completely unbalanced! That’s actually inefficient.<p>Let’s suppose, instead, you treat the key as a plain string and stick it in a tree. You have a lot of freedom now, in how you balance the tree, since you are not forced to stick nodes in the tree at every &#x2F; character.<p>It’s just a different efficiency tradeoff. Certain operations are now much less efficient (like “rename a directory” which, on S3, is actually “copy a zillion objects). Some operations are more efficient, like “store a file” or “retrieve a file”.</div><br/><div id="39657651" class="c"><input type="checkbox" id="c-39657651" checked=""/><div class="controls bullet"><span class="by">umanwizard</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657143">parent</a><span>|</span><a href="#39657366">next</a><span>|</span><label class="collapse" for="c-39657651">[-]</label><label class="expand" for="c-39657651">[1 more]</label></div><br/><div class="children"><div class="content">I think what you’re describing is simply not a hierarchical file system. It’s a different thing that supports different operations and, indeed, is better or worse at different operations.</div><br/></div></div></div></div><div id="39657366" class="c"><input type="checkbox" id="c-39657366" checked=""/><div class="controls bullet"><span class="by">inkyoto</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657126">parent</a><span>|</span><a href="#39657143">prev</a><span>|</span><a href="#39657085">next</a><span>|</span><label class="collapse" for="c-39657366">[-]</label><label class="expand" for="c-39657366">[2 more]</label></div><br/><div class="children"><div class="content">&gt; […] what the special 0-byte object refers to. It represents an empty folder.<p>Alas, no. It represents a tag, e.g. «folder&#x2F;», that points to a zero byte object.<p>You can then upload two files, e.g. «folder&#x2F;file1.txt» and «folder&#x2F;file2.txt», delete the «folder&#x2F;», being a <i>tag</i>, and still have the «folder&#x2F;file1.txt» and «folder&#x2F;file2.txt» file intact in the S3 bucket.<p>Deleting «folder&#x2F;» in a traditional file system, on the other hand, will also delete «file1.txt» and «file2.txt» in it.</div><br/><div id="39657625" class="c"><input type="checkbox" id="c-39657625" checked=""/><div class="controls bullet"><span class="by">dchest</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657366">parent</a><span>|</span><a href="#39657085">next</a><span>|</span><label class="collapse" for="c-39657625">[-]</label><label class="expand" for="c-39657625">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a matter of a client UI implementation. You can&#x27;t delete a non-empty folder with POSIX API on common filesystems or FTP too.<p>However, there are file managers, FTP clients, and S3 clients that will do that for you by deleting individual files.</div><br/></div></div></div></div></div></div><div id="39657085" class="c"><input type="checkbox" id="c-39657085" checked=""/><div class="controls bullet"><span class="by">fiddlerwoaroof</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657063">parent</a><span>|</span><a href="#39657126">prev</a><span>|</span><a href="#39657276">next</a><span>|</span><label class="collapse" for="c-39657085">[-]</label><label class="expand" for="c-39657085">[5 more]</label></div><br/><div class="children"><div class="content">Except, S3 does let you query by prefix and so the keys have more structure than the second diagram implies: they’re not just random keys, the API implies that common prefixes indicate related objects.</div><br/><div id="39657100" class="c"><input type="checkbox" id="c-39657100" checked=""/><div class="controls bullet"><span class="by">klodolph</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657085">parent</a><span>|</span><a href="#39657276">next</a><span>|</span><label class="collapse" for="c-39657100">[-]</label><label class="expand" for="c-39657100">[4 more]</label></div><br/><div class="children"><div class="content">That’s kind of stretching the idea of “more structure” to the breaking point, I think. The key is just a string. There is no entry for directories.<p>&gt; the API implies that common prefixes indicate related objects.<p>That’s something users do. The API doesn’t imply anything is related.<p>And prefixes can be anything, not just directories. If you have &#x2F;some&#x2F;dir&#x2F;file.jpg, then you can query using &#x2F;some&#x2F;dir&#x2F; as a prefix (like a directory!) or you can query using &#x2F;so as a prefix, or &#x2F;some&#x2F;dir&#x2F;fil as a prefix. It’s just a string. It only looks like a directory when you, the user, decide to interpret the &#x2F; in the file key as a directory separator. You could just as easily use any other character.</div><br/><div id="39657139" class="c"><input type="checkbox" id="c-39657139" checked=""/><div class="controls bullet"><span class="by">hiyer</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657100">parent</a><span>|</span><a href="#39657190">next</a><span>|</span><label class="collapse" for="c-39657139">[-]</label><label class="expand" for="c-39657139">[1 more]</label></div><br/><div class="children"><div class="content">One operation where this difference is significant is renaming a &quot;folder&quot;. In UNIX (and even UNIX-y distributed filesystems like HDFS) a rename operation at &quot;folder&quot; level is O(1) as it only involves metadata changes. In S3, renaming a &quot;folder&quot; is O(number of files).</div><br/></div></div><div id="39657190" class="c"><input type="checkbox" id="c-39657190" checked=""/><div class="controls bullet"><span class="by">fiddlerwoaroof</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657100">parent</a><span>|</span><a href="#39657139">prev</a><span>|</span><a href="#39657276">next</a><span>|</span><label class="collapse" for="c-39657190">[-]</label><label class="expand" for="c-39657190">[2 more]</label></div><br/><div class="children"><div class="content">&gt; That’s something users do. The API doesn’t imply anything is related.<p>Querying ids by prefix doesn’t make any sense for a normal ID type.  Just making this operation available and part of your public API indicates that prefixes are semantically relevant to your API’s ID type.</div><br/><div id="39657209" class="c"><input type="checkbox" id="c-39657209" checked=""/><div class="controls bullet"><span class="by">klodolph</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657190">parent</a><span>|</span><a href="#39657276">next</a><span>|</span><label class="collapse" for="c-39657209">[-]</label><label class="expand" for="c-39657209">[1 more]</label></div><br/><div class="children"><div class="content">“Prefix” is not the same thing as “directory”.<p>I can look up names with the prefix “B” and get Bart, Bella, Brooke, Blake, etc. That doesn’t imply that there’s some kind of semantics associated with prefixes. It’s just a feature of your system that you may find useful. The fact that these names have a common prefix, “B”, is not a particularly interesting thing to me. Just like if I had a list of files, 1.jpg, 10.jpg, 100.jpg, it’s probably not significant that they’re being returned sequentially (because I probably want 2.jpg after 1.jpg).</div><br/></div></div></div></div></div></div></div></div><div id="39657276" class="c"><input type="checkbox" id="c-39657276" checked=""/><div class="controls bullet"><span class="by">tuwtuwtuwtuw</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657063">parent</a><span>|</span><a href="#39657085">prev</a><span>|</span><a href="#39657168">next</a><span>|</span><label class="collapse" for="c-39657276">[-]</label><label class="expand" for="c-39657276">[1 more]</label></div><br/><div class="children"><div class="content">&quot;filesystem&quot; is not a name reserved for Unix-style file systems. There are many types of file system which is not built on according to your description. When I was a kid, I used systems which didn&#x27;t support directories, but it was still file systems.<p>It&#x27;s an incorrect take that a system to manage files must follow a set of patterns like the ones you mentioned to be called &quot;file system&quot;.</div><br/></div></div><div id="39657168" class="c"><input type="checkbox" id="c-39657168" checked=""/><div class="controls bullet"><span class="by">keithalewis</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657063">parent</a><span>|</span><a href="#39657276">prev</a><span>|</span><a href="#39657634">next</a><span>|</span><label class="collapse" for="c-39657168">[-]</label><label class="expand" for="c-39657168">[1 more]</label></div><br/><div class="children"><div class="content">Even youngsters are yelling at clouds now. 
Just a different kind of cloud.</div><br/></div></div></div></div><div id="39657634" class="c"><input type="checkbox" id="c-39657634" checked=""/><div class="controls bullet"><span class="by">ithkuil</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657014">parent</a><span>|</span><a href="#39657063">prev</a><span>|</span><a href="#39657532">next</a><span>|</span><label class="collapse" for="c-39657634">[-]</label><label class="expand" for="c-39657634">[1 more]</label></div><br/><div class="children"><div class="content">In S3 each file is identified with a full path.<p>Not only you cannot rename a single file, but you also cannot rename a &quot;folder&quot; (because that would imply a bulk rename on a large number of children of that &quot;folder&quot;)<p>This is the fundamental difference between a first class folder and just a convention on prefixes of full path names.<p>If you don&#x27;t allow renames, it doesn&#x27;t really make sense to have each &quot;folder&quot; store the list of the children.<p>You can instead have a giant ordered map (some kind of b-tree) that allows you for efficient lookup and scanning neighbouring nodes.</div><br/></div></div><div id="39657532" class="c"><input type="checkbox" id="c-39657532" checked=""/><div class="controls bullet"><span class="by">8organicbits</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657014">parent</a><span>|</span><a href="#39657634">prev</a><span>|</span><a href="#39657068">next</a><span>|</span><label class="collapse" for="c-39657532">[-]</label><label class="expand" for="c-39657532">[2 more]</label></div><br/><div class="children"><div class="content">Another challenge is directory flattening. On a file system &quot;a&#x2F;b&quot; and &quot;a&#x2F;&#x2F;b&quot; are usually considered the same path. But on S3 the slash isn&#x27;t a directory separator, so the paths are distinct. You need to be extra careful when building paths not to include double slashes.<p>Many tools end up handling this by showing a folder named &quot;a&quot; containing a folder named &quot;&quot; (empty string). This confuses users quite a bit. It&#x27;s more than the inodes, it&#x27;s how the tooling handles the abstraction.</div><br/><div id="39657553" class="c"><input type="checkbox" id="c-39657553" checked=""/><div class="controls bullet"><span class="by">hnlmorg</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657532">parent</a><span>|</span><a href="#39657068">next</a><span>|</span><label class="collapse" for="c-39657553">[-]</label><label class="expand" for="c-39657553">[1 more]</label></div><br/><div class="children"><div class="content">Coincidentally I ran into an issue just like this a week ago. A customer facing application failed because there was an object named “&#x2F;foo&#x2F;bar” (emphasis on the leading slash).<p>This created a prefix named “&#x2F;“ which confused the hell out of the application.</div><br/></div></div></div></div><div id="39657068" class="c"><input type="checkbox" id="c-39657068" checked=""/><div class="controls bullet"><span class="by">erik_seaberg</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657014">parent</a><span>|</span><a href="#39657532">prev</a><span>|</span><a href="#39657037">next</a><span>|</span><label class="collapse" for="c-39657068">[-]</label><label class="expand" for="c-39657068">[1 more]</label></div><br/><div class="children"><div class="content">You can create a simulated directory, and write a bunch of files in it, but you can&#x27;t atomically rename it--behind the scenes each file needs to be copied from old name to new.</div><br/></div></div><div id="39657037" class="c"><input type="checkbox" id="c-39657037" checked=""/><div class="controls bullet"><span class="by">daynthelife</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657014">parent</a><span>|</span><a href="#39657068">prev</a><span>|</span><a href="#39657048">next</a><span>|</span><label class="collapse" for="c-39657037">[-]</label><label class="expand" for="c-39657037">[1 more]</label></div><br/><div class="children"><div class="content">The payload still contains a list of other inodes though</div><br/></div></div></div></div><div id="39657048" class="c"><input type="checkbox" id="c-39657048" checked=""/><div class="controls bullet"><span class="by">nostrebored</span><span>|</span><a href="#39656992">parent</a><span>|</span><a href="#39657014">prev</a><span>|</span><a href="#39657035">next</a><span>|</span><label class="collapse" for="c-39657048">[-]</label><label class="expand" for="c-39657048">[3 more]</label></div><br/><div class="children"><div class="content">Weird that it says folders now. I remember it being very strictly called a prefix when I was at AWS.</div><br/><div id="39657069" class="c"><input type="checkbox" id="c-39657069" checked=""/><div class="controls bullet"><span class="by">paranoidrobot</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657048">parent</a><span>|</span><a href="#39657035">next</a><span>|</span><label class="collapse" for="c-39657069">[-]</label><label class="expand" for="c-39657069">[2 more]</label></div><br/><div class="children"><div class="content">I think it&#x27;s just the Web console, It&#x27;s still prefix in the APIs and CLI.<p><a href="https:&#x2F;&#x2F;docs.aws.amazon.com&#x2F;AmazonS3&#x2F;latest&#x2F;API&#x2F;API_ListObjectsV2.html" rel="nofollow">https:&#x2F;&#x2F;docs.aws.amazon.com&#x2F;AmazonS3&#x2F;latest&#x2F;API&#x2F;API_ListObje...</a></div><br/><div id="39657282" class="c"><input type="checkbox" id="c-39657282" checked=""/><div class="controls bullet"><span class="by">Izkata</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657069">parent</a><span>|</span><a href="#39657035">next</a><span>|</span><label class="collapse" for="c-39657282">[-]</label><label class="expand" for="c-39657282">[1 more]</label></div><br/><div class="children"><div class="content">The web console even collapses them like folders on slashes, further obfuscating how it actually works.  I remember having to explain to coworkers why it was so slow to load a large bucket.</div><br/></div></div></div></div></div></div><div id="39657035" class="c"><input type="checkbox" id="c-39657035" checked=""/><div class="controls bullet"><span class="by">solumunus</span><span>|</span><a href="#39656992">parent</a><span>|</span><a href="#39657048">prev</a><span>|</span><a href="#39657157">next</a><span>|</span><label class="collapse" for="c-39657035">[-]</label><label class="expand" for="c-39657035">[11 more]</label></div><br/><div class="children"><div class="content">What exactly do you think a folder is? It’s just an abstraction for organising data.</div><br/><div id="39657113" class="c"><input type="checkbox" id="c-39657113" checked=""/><div class="controls bullet"><span class="by">klodolph</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657035">parent</a><span>|</span><a href="#39657074">next</a><span>|</span><label class="collapse" for="c-39657113">[-]</label><label class="expand" for="c-39657113">[9 more]</label></div><br/><div class="children"><div class="content">S3 doesn’t have that abstraction.<p>The console UI shows folders but they don’t actually exist in S3. They’re made up by the UI.</div><br/><div id="39657153" class="c"><input type="checkbox" id="c-39657153" checked=""/><div class="controls bullet"><span class="by">3weeksearlier</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657113">parent</a><span>|</span><a href="#39657633">next</a><span>|</span><label class="collapse" for="c-39657153">[-]</label><label class="expand" for="c-39657153">[4 more]</label></div><br/><div class="children"><div class="content">It sounds like they have that abstraction in the UI. But if the CLI and API don&#x27;t have it too, that&#x27;s weird.</div><br/><div id="39657195" class="c"><input type="checkbox" id="c-39657195" checked=""/><div class="controls bullet"><span class="by">klodolph</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657153">parent</a><span>|</span><a href="#39657633">next</a><span>|</span><label class="collapse" for="c-39657195">[-]</label><label class="expand" for="c-39657195">[3 more]</label></div><br/><div class="children"><div class="content">Yeah, the UI and CLI show you “folders”. It’s a client-side thing that doesn’t exist in the actual service. Behind the scenes, the clients are making specific types of queries on the object keys.<p>You can’t examine when a folder was created (it doesn’t exist in the first place), you can’t rename a folder (it doesn’t exist), you can’t delete a folder (again, it doesn’t exist).</div><br/><div id="39657264" class="c"><input type="checkbox" id="c-39657264" checked=""/><div class="controls bullet"><span class="by">throwitaway222</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657195">parent</a><span>|</span><a href="#39657633">next</a><span>|</span><label class="collapse" for="c-39657264">[-]</label><label class="expand" for="c-39657264">[2 more]</label></div><br/><div class="children"><div class="content">That&#x27;s just an implementation detail of well known filesystems.</div><br/><div id="39657414" class="c"><input type="checkbox" id="c-39657414" checked=""/><div class="controls bullet"><span class="by">dathery</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657264">parent</a><span>|</span><a href="#39657633">next</a><span>|</span><label class="collapse" for="c-39657414">[-]</label><label class="expand" for="c-39657414">[1 more]</label></div><br/><div class="children"><div class="content">Yes, which is why it&#x27;s not ideal to reuse the folder metaphor here. Users have an idea how directories work on well-known filesystems and get confused when these fake folders don&#x27;t behave the same way.</div><br/></div></div></div></div></div></div></div></div><div id="39657633" class="c"><input type="checkbox" id="c-39657633" checked=""/><div class="controls bullet"><span class="by">DonHopkins</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657113">parent</a><span>|</span><a href="#39657153">prev</a><span>|</span><a href="#39657261">next</a><span>|</span><label class="collapse" for="c-39657633">[-]</label><label class="expand" for="c-39657633">[1 more]</label></div><br/><div class="children"><div class="content">Speaking of user interfaces with optical illustions about directory separators:<p>On the Mac, the Finder lets you have files with slashes in their names, even though it&#x27;s a Unix file system underneath. Don&#x27;t believe me? Go try to use the Finder to make a directory whose name is &quot;Reports from 2024&#x2F;03&#x2F;10&quot;. See?<p>But as everyone knows, slash is the ONLY character you&#x27;re not allowed to have in a file or directory name under Unix. It&#x27;s enforced in the kernel at the system call inteface. There is absolutely no way to make a file with a slash in it. Yet there it is!<p>The original MacOS operating system used the &quot;:&quot; character to delimit directory names, instead of &quot;&#x2F;&quot;, so you could have files and directories with slashes in their names, justs not with colons in their names.<p>When Apple transitioned from MacOS to Unix, they did not want to freak out their users by reaming all their files.<p>So now try to use the Finder (or any app that uses the standard file dialog) to make a folder or file with a &quot;:&quot; in its name on a modern Mac. You still can&#x27;t!<p>So now go into the shell and list out the parent directory containing the directory you made with a slash in its name. It&#x27;s actually called &quot;Reports from 2024:03:10&quot;!<p>The Mac Finder and system file dialog user interfaces actually switche &quot;&#x2F;&quot; and &quot;:&quot; when they show paths on the screen!<p>Try making a file in the shell with colons in it, then look at it in the finder to see the slashes.<p>However, back in the days of the old MacOS that permitted slashes in file names, there was a handy network gateway box called the &quot;Gatorbox&quot; that was a Localtalk-to-Ethernet AFP&#x2F;NFS bridge, which took a subtly different approach.<p><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;GatorBox" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;GatorBox</a><p>It took advantage of the fact (or rather it triggered the bug) that the Unix NFS implementation boldly made an end-run around the kernel&#x27;s safe system call interface that disallowed slashes in file names. So any NFS client could actually trick Unix into putting slashes into file names via the NFS protocol!<p>It appeared to work just fine, but then down the line the Unix &quot;restore&quot; command would totally shit itself! Of course &quot;dump&quot; worked just fine, never raising an error that it was writing corrupted dumps that you would not be able to read back in your time of need, so you&#x27;d only learn that you&#x27;d been screwed by the bug and lost all your files months or years later!<p>So not only does NFS stand for &quot;No File Security&quot;, it also stands for &quot;Nasty Forbidden Slashes&quot;!<p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=31820504">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=31820504</a><p>&gt;NFS originally stood for &quot;No File Security&quot;.<p>&gt;The NFS protocol wasn&#x27;t just stateless, but also securityless!<p>&gt;Stewart, remember the open secret that almost everybody at Sun knew about, in which you could tftp a host&#x27;s &#x2F;etc&#x2F;exports (because tftp was set up by default in a way that left it wide open to anyone from anywhere reading files in &#x2F;etc) to learn the name of all the servers a host allowed to mount its file system, and then in a root shell simply go &quot;hostname foo ; mount remote:&#x2F;dir &#x2F;mnt ; hostname `hostname`&quot; to temporarily change the CLIENT&#x27;s hostname to the name of a host that the SERVER allowed to mount the directory, then mount it (claiming to be an allowed client), then switch it back?<p>&gt;That&#x27;s right, the server didn&#x27;t bother checking the client&#x27;s IP address against the host name it claimed to be in the NFS mountd request. That&#x27;s right: the protocol itself let the client tell the server what its host name was, and the server implementation didn&#x27;t check that against the client&#x27;s ip address. Nice professional protocol design and implementation, huh?<p>&gt;Yes, that actually worked, because the NFS protocol laughably trusted the CLIENT to identify its host name for security purposes. That level of &quot;trust&quot; was built into the original NFS protocol and implementation from day one, by the geniuses at Sun who originally designed it. The network is the computer is insecure, indeed.<p>[...]<p>From the Unix-Haters Handbook:<p><a href="https:&#x2F;&#x2F;archive.org&#x2F;stream&#x2F;TheUnixHatersHandbook&#x2F;ugh_djvu.txt" rel="nofollow">https:&#x2F;&#x2F;archive.org&#x2F;stream&#x2F;TheUnixHatersHandbook&#x2F;ugh_djvu.tx...</a><p>Don&#x27;t Touch That Slash!<p>UFS allows any character in a filename except for the slash (&#x2F;) and the ASCII NUL character. (Some versions of Unix allow ASCII characters with the high-bit, bit 8, set. Others don&#x27;t.)<p>This feature is great — especially in versions of Unix based on Berkeley&#x27;s Fast File System, which allows filenames longer than 14 characters. It means that you are free to construct informative, easy-to-understand filenames like these:<p>1992 Sales Report<p>Personnel File: Verne, Jules<p>rt005mfkbgkw0 . cp<p>Unfortunately, the rest of Unix isn&#x27;t as tolerant. Of the filenames shown above, only rt005mfkbgkw0.cp will work with the majority of Unix utilities (which generally can&#x27;t tolerate spaces in filenames).<p>However, don&#x27;t fret: Unix will let you construct filenames that have control characters or graphics symbols in them. (Some versions will even let you build files that have no name at all.) This can be a great security feature — especially if you have control keys on your keyboard that other people don&#x27;t have on theirs. That&#x27;s right: you can literally create files with names that other people can&#x27;t access. It sort of makes up for the lack of serious security access controls in the rest of Unix.<p>Recall that Unix does place one hard-and-fast restriction on filenames: they may never, ever contain the magic slash character (&#x2F;), since the Unix kernel uses the slash to denote subdirectories. To enforce this requirement, the Unix kernel simply will never let you create a filename that has a slash in it. (However, you can have a filename with the 0200 bit set, which does list on some versions of Unix as a slash character.)<p>Never? Well, hardly ever.<p><pre><code>    Date: Mon, 8 Jan 90 18:41:57 PST 
    From: sun!wrs!yuba!steve@decwrl.dec.com (Steve Sekiguchi) 
    Subject: Info-Mac Digest V8 #3 5 

    I&#x27;ve got a rather difficult problem here. We&#x27;ve got a Gator Box run- 
    ning the NFS&#x2F;AFP conversion. We use this to hook up Macs and 
    Suns. With the Sun as a AppleShare File server. All of this works 
    great! 

    Now here is the problem, Macs are allowed to create files on the Sun&#x2F; 
    Unix fileserver with a &quot;&#x2F;&quot; in the filename. This is great until you try 
    to restore one of these files from your &quot;dump&quot; tapes, &quot;restore&quot; core 
    dumps when it runs into a file with a &quot;&#x2F;&quot; in the filename. As far as I 
    can tell the &quot;dump&quot; tape is fine. 

    Does anyone have a suggestion for getting the files off the backup 
    tape? 

    Thanks in Advance, 

    Steven Sekiguchi Wind River Systems 

    sun!wrs!steve, steve@wrs.com Emeryville CA, 94608
</code></pre>
Apparently Sun&#x27;s circa 1990 NFS server (which runs inside the kernel) assumed that an NFS client would never, ever send a filename that had a slash inside it and thus didn&#x27;t bother to check for the illegal character. We&#x27;re surprised that the files got written to the dump tape at all. (Then again, perhaps they didn&#x27;t. There&#x27;s really no way to tell for sure, is there now?)</div><br/></div></div><div id="39657261" class="c"><input type="checkbox" id="c-39657261" checked=""/><div class="controls bullet"><span class="by">throwitaway222</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657113">parent</a><span>|</span><a href="#39657633">prev</a><span>|</span><a href="#39657074">next</a><span>|</span><label class="collapse" for="c-39657261">[-]</label><label class="expand" for="c-39657261">[3 more]</label></div><br/><div class="children"><div class="content">Similarly the UI in linux is making up the notion of folders and files in them. But we don&#x27;t say it doesn&#x27;t exist.</div><br/><div id="39657428" class="c"><input type="checkbox" id="c-39657428" checked=""/><div class="controls bullet"><span class="by">kelnos</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657261">parent</a><span>|</span><a href="#39657400">next</a><span>|</span><label class="collapse" for="c-39657428">[-]</label><label class="expand" for="c-39657428">[1 more]</label></div><br/><div class="children"><div class="content">No, they&#x27;re not made up.  A folder (or directory) is a specific type of inode, just a file is.<p>S3 doesn&#x27;t have folders.  The UI fakes them by creating a 0-byte object (or file, if you will).  It&#x27;s a kludge.</div><br/></div></div><div id="39657400" class="c"><input type="checkbox" id="c-39657400" checked=""/><div class="controls bullet"><span class="by">dathery</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657261">parent</a><span>|</span><a href="#39657428">prev</a><span>|</span><a href="#39657074">next</a><span>|</span><label class="collapse" for="c-39657400">[-]</label><label class="expand" for="c-39657400">[1 more]</label></div><br/><div class="children"><div class="content">Directories actually exist on the filesystem, which is why you have to create them before use and they can exist and be empty. They don&#x27;t exist in S3 and neither of those properties do, either. Similarly, common filesystem operations on directories (like efficiently renaming them, and thus the files under them) are not possible in S3.<p>Of course it can still be useful to group objects in the S3 UI, but it would probably be better to use some kind of prefix-centric UI rather than reusing the folder metaphor when it doesn&#x27;t match the paradigm people are used to.</div><br/></div></div></div></div></div></div><div id="39657074" class="c"><input type="checkbox" id="c-39657074" checked=""/><div class="controls bullet"><span class="by">winwang</span><span>|</span><a href="#39656992">root</a><span>|</span><a href="#39657035">parent</a><span>|</span><a href="#39657113">prev</a><span>|</span><a href="#39657157">next</a><span>|</span><label class="collapse" for="c-39657074">[-]</label><label class="expand" for="c-39657074">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m having a lot of fun imagining this being said to a kid who&#x27;s trying to buy some folders for school.</div><br/></div></div></div></div><div id="39657157" class="c"><input type="checkbox" id="c-39657157" checked=""/><div class="controls bullet"><span class="by">halayli</span><span>|</span><a href="#39656992">parent</a><span>|</span><a href="#39657035">prev</a><span>|</span><a href="#39657127">next</a><span>|</span><label class="collapse" for="c-39657157">[-]</label><label class="expand" for="c-39657157">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t know why you are being downvoted, what you said is true and confuses many newcomers.</div><br/></div></div><div id="39657127" class="c"><input type="checkbox" id="c-39657127" checked=""/><div class="controls bullet"><span class="by">klodolph</span><span>|</span><a href="#39656992">parent</a><span>|</span><a href="#39657157">prev</a><span>|</span><a href="#39657107">next</a><span>|</span><label class="collapse" for="c-39657127">[-]</label><label class="expand" for="c-39657127">[1 more]</label></div><br/><div class="children"><div class="content">I see you getting downvotes, but you’re speaking the honest truth, here.</div><br/></div></div></div></div><div id="39657107" class="c"><input type="checkbox" id="c-39657107" checked=""/><div class="controls bullet"><span class="by">Twirrim</span><span>|</span><a href="#39656992">prev</a><span>|</span><a href="#39657134">next</a><span>|</span><label class="collapse" for="c-39657107">[-]</label><label class="expand" for="c-39657107">[1 more]</label></div><br/><div class="children"><div class="content">S3 is a key value store. Just happens to be able to store really large values.</div><br/></div></div><div id="39657134" class="c"><input type="checkbox" id="c-39657134" checked=""/><div class="controls bullet"><span class="by">YouWhy</span><span>|</span><a href="#39657107">prev</a><span>|</span><a href="#39656978">next</a><span>|</span><label class="collapse" for="c-39657134">[-]</label><label class="expand" for="c-39657134">[3 more]</label></div><br/><div class="children"><div class="content">The article is well written, but I am annoyed at the attempt to gatekeep the definition of a filesystem.<p>Like literally any abstraction out there, filesystems are associated with a multitude of possible approaches with conceptually different semantics. It&#x27;s a bit sophistic to say that Postgres cannot be run on S3 because S3 is not a filesystem; a better choice would have been to explore the underlying assumptions; (I suspect latency would kill the hypothetical use case of Postgres over S3 even if S3 had incorporated the necessary API semantics - could somebody more knowledgeable chime in?).<p>A more interesting venue to pursue would be - what other additions could be made to the S3 API to make it more usable on its own right - for example, why doesn&#x27;t S3 offer more than one filename per blob? (e.g., a similar to what links do in POSIX)</div><br/><div id="39657236" class="c"><input type="checkbox" id="c-39657236" checked=""/><div class="controls bullet"><span class="by">zX41ZdbW</span><span>|</span><a href="#39657134">parent</a><span>|</span><a href="#39657156">next</a><span>|</span><label class="collapse" for="c-39657236">[-]</label><label class="expand" for="c-39657236">[1 more]</label></div><br/><div class="children"><div class="content">ClickHouse can work with S3 as a main storage. This is possible because a table is a set of immutable data parts. Data parts can be written once and deleted, possibly as a result of a background merge operation. S3 API is almost enough, except for cases of concurrent database updates. In this case, it is not possible to rely on S3 only because it does not support an atomic &quot;write if not exists&quot; operation. That&#x27;s why external, strongly consistent metadata storage is needed, which is handled by ClickHouse Keeper.</div><br/></div></div><div id="39657156" class="c"><input type="checkbox" id="c-39657156" checked=""/><div class="controls bullet"><span class="by">bilalq</span><span>|</span><a href="#39657134">parent</a><span>|</span><a href="#39657236">prev</a><span>|</span><a href="#39656978">next</a><span>|</span><label class="collapse" for="c-39657156">[-]</label><label class="expand" for="c-39657156">[1 more]</label></div><br/><div class="children"><div class="content">This might be of interest to you: <a href="https:&#x2F;&#x2F;neon.tech&#x2F;blog&#x2F;bring-your-own-s3-to-neon" rel="nofollow">https:&#x2F;&#x2F;neon.tech&#x2F;blog&#x2F;bring-your-own-s3-to-neon</a>.<p>There&#x27;s also the OG Aurora whitepaper: <a href="https:&#x2F;&#x2F;www.amazon.science&#x2F;publications&#x2F;amazon-aurora-design-considerations-for-high-throughput-cloud-native-relational-databases" rel="nofollow">https:&#x2F;&#x2F;www.amazon.science&#x2F;publications&#x2F;amazon-aurora-design...</a></div><br/></div></div></div></div><div id="39656978" class="c"><input type="checkbox" id="c-39656978" checked=""/><div class="controls bullet"><span class="by">3weeksearlier</span><span>|</span><a href="#39657134">prev</a><span>|</span><a href="#39657517">next</a><span>|</span><label class="collapse" for="c-39656978">[-]</label><label class="expand" for="c-39656978">[6 more]</label></div><br/><div class="children"><div class="content">I dunno, are features like partial file overwrites necessary to make something a filesystem? This reminds me of how there are lots of internal systems at Google whose maintainers keep asserting are not filesystems, but everyone considers them so, to the point where &quot;_____ is not a filesystem&quot; has become an inside joke.</div><br/><div id="39657417" class="c"><input type="checkbox" id="c-39657417" checked=""/><div class="controls bullet"><span class="by">CobrastanJorji</span><span>|</span><a href="#39656978">parent</a><span>|</span><a href="#39657078">next</a><span>|</span><label class="collapse" for="c-39657417">[-]</label><label class="expand" for="c-39657417">[2 more]</label></div><br/><div class="children"><div class="content">They are necessary because as soon as someone decides that S3 is a filesystem, they will look at the other cloud &quot;filesystems,&quot; notice that S3 is cheaper than most of them, and then for some reason they will decide to run giant Hadoop fs stuff on it or mount a relational database on it or all other manner of stupidity. I guarantee you S3&#x27;s customer-facing engineers are fielding multiple calls per week from customers who are angry that S3 isn&#x27;t as fast as some real filesystem solution that the customer migrated from because S3 was cheaper.<p>When people decide that X is a filesystem, they try to use it like it&#x27;s a local, POSIX filesystem, and that&#x27;s terrible because it won&#x27;t be immediately obvious why it&#x27;s a stupid plan.</div><br/><div id="39657646" class="c"><input type="checkbox" id="c-39657646" checked=""/><div class="controls bullet"><span class="by">albert_e</span><span>|</span><a href="#39656978">root</a><span>|</span><a href="#39657417">parent</a><span>|</span><a href="#39657078">next</a><span>|</span><label class="collapse" for="c-39657646">[-]</label><label class="expand" for="c-39657646">[1 more]</label></div><br/><div class="children"><div class="content">If a customer makes an IT decision as big as running Hadoop or RDBMS with S3 as storage ... but does not consult at least a Associate level AWS Certified architect (who are doke a dozen) for at least one day worth of advice which is probably a couple of hundred dollars at most ...<p>Can we really blame AWS?<p>I am sure none of official AWS documentations or examples show such an architecture.<p>----<p>Amazon EMR can run Hadoop and use Amazon S3 as storage via EMR FS.<p>&quot;S3 mountpoints&quot; are a feature specifically for workloads that need to see S3 as a file system.<p>For block storage workloads there is EBS and EFS and FSx that AWS heavily advertises.</div><br/></div></div></div></div><div id="39657078" class="c"><input type="checkbox" id="c-39657078" checked=""/><div class="controls bullet"><span class="by">fiddlerwoaroof</span><span>|</span><a href="#39656978">parent</a><span>|</span><a href="#39657417">prev</a><span>|</span><a href="#39657517">next</a><span>|</span><label class="collapse" for="c-39657078">[-]</label><label class="expand" for="c-39657078">[3 more]</label></div><br/><div class="children"><div class="content">Yeah, it’s sort of funny how “POSIXish semantics” has become our definition of these things, when it’s just one kind of thing that’s been called a filesystem historically.</div><br/><div id="39657117" class="c"><input type="checkbox" id="c-39657117" checked=""/><div class="controls bullet"><span class="by">mickael-kerjean</span><span>|</span><a href="#39656978">root</a><span>|</span><a href="#39657078">parent</a><span>|</span><a href="#39657517">next</a><span>|</span><label class="collapse" for="c-39657117">[-]</label><label class="expand" for="c-39657117">[2 more]</label></div><br/><div class="children"><div class="content">Fun experiment I made with my mum, building a storage independent dropbox like UI [1] for anything that implement this interface:<p><pre><code>  type IBackend interface {
    Ls(path string) ([]os.FileInfo, error)
    Cat(path string) (io.ReadCloser, error)
    Mkdir(path string) error
    Rm(path string) error
    Mv(from string, to string) error
    Save(path string, file io.Reader) error
    Touch(path string) error
  }
</code></pre>
My mum really couldn&#x27;t care less about the posix semantic as soon as she can see the pictures of my kid which happen to be on S3<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;mickael-kerjean&#x2F;filestash">https:&#x2F;&#x2F;github.com&#x2F;mickael-kerjean&#x2F;filestash</a></div><br/><div id="39657148" class="c"><input type="checkbox" id="c-39657148" checked=""/><div class="controls bullet"><span class="by">wwalexander</span><span>|</span><a href="#39656978">root</a><span>|</span><a href="#39657117">parent</a><span>|</span><a href="#39657517">next</a><span>|</span><label class="collapse" for="c-39657148">[-]</label><label class="expand" for="c-39657148">[1 more]</label></div><br/><div class="children"><div class="content">Reducing things to basically the interface you laid out is the point of 9p [1], and is what Plan 9’s UNIX-but-distributed design was built on top of. Same inventor as Go! If you haven’t dived down the Plan 9 rabbit hole yet, it’s a beautiful and haunting vision of how simple cloud computing could have been.<p>[1] <a href="https:&#x2F;&#x2F;9fans.github.io&#x2F;plan9port&#x2F;man&#x2F;man9&#x2F;intro.html" rel="nofollow">https:&#x2F;&#x2F;9fans.github.io&#x2F;plan9port&#x2F;man&#x2F;man9&#x2F;intro.html</a></div><br/></div></div></div></div></div></div></div></div><div id="39657517" class="c"><input type="checkbox" id="c-39657517" checked=""/><div class="controls bullet"><span class="by">type_Ben_struct</span><span>|</span><a href="#39656978">prev</a><span>|</span><a href="#39657708">next</a><span>|</span><label class="collapse" for="c-39657517">[-]</label><label class="expand" for="c-39657517">[2 more]</label></div><br/><div class="children"><div class="content">Tools like LucidLink and Weka go a way to making S3 even more of a “file system”. They break files into smaller chunks (S3 objects) which helps with partial writes, reads and performance. Alongside tiering of data from S3 to disk when needed for performance.</div><br/><div id="39657659" class="c"><input type="checkbox" id="c-39657659" checked=""/><div class="controls bullet"><span class="by">hnlmorg</span><span>|</span><a href="#39657517">parent</a><span>|</span><a href="#39657708">next</a><span>|</span><label class="collapse" for="c-39657659">[-]</label><label class="expand" for="c-39657659">[1 more]</label></div><br/><div class="children"><div class="content">I don’t know a whole lot about LucidLink but Weka basically uses S3 as a dataplane for their own file system.</div><br/></div></div></div></div><div id="39657708" class="c"><input type="checkbox" id="c-39657708" checked=""/><div class="controls bullet"><span class="by">globular-toast</span><span>|</span><a href="#39657517">prev</a><span>|</span><a href="#39657558">next</a><span>|</span><label class="collapse" for="c-39657708">[-]</label><label class="expand" for="c-39657708">[1 more]</label></div><br/><div class="children"><div class="content">A filesystem is an abstraction built on a block device. A block device just gives you a massive array of bytes and lets you read&#x2F;write from them in blocks (e.g. write these 300 bytes at position 273041).<p>A block device itself is an abstraction built on real hardware. &quot;Write these 300 bytes&quot; really means something like &quot;move needle on platter 2 to position 6... etc&quot;<p>S3 is just a different abstraction that is also built on raw storage somehow. It&#x27;s a strictly flat key-object store. That&#x27;s it. I don&#x27;t know why people have a problem with this. If you need &quot;filesystem stuff&quot; then implement it in your app, or use a filesystem. You only need to append? Use a database to keep track of the chain of appends and store the chunks in S3. Doesn&#x27;t work for you? Use something else. Need to &quot;copy&quot;? Make a new reference to the same object in your db. Doesn&#x27;t work for you? Use something else.<p>S3 works for a lot of people. Stop trying to make it something else.</div><br/></div></div><div id="39657558" class="c"><input type="checkbox" id="c-39657558" checked=""/><div class="controls bullet"><span class="by">hn72774</span><span>|</span><a href="#39657708">prev</a><span>|</span><a href="#39657575">next</a><span>|</span><label class="collapse" for="c-39657558">[-]</label><label class="expand" for="c-39657558">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Filesystem software, especially databases, can&#x27;t be ported to Amazon S3<p>Hudi, Delta, iceberg bridge that gap now.  Databricks built a company around it.<p>Don&#x27;t try to do relational on object storage on your own.  Use one of those libraries.  It seems simple but it&#x27;s not.  Late arriving data, deletes, updates, primary key column values changing, etc.</div><br/><div id="39657621" class="c"><input type="checkbox" id="c-39657621" checked=""/><div class="controls bullet"><span class="by">albert_e</span><span>|</span><a href="#39657558">parent</a><span>|</span><a href="#39657575">next</a><span>|</span><label class="collapse" for="c-39657621">[-]</label><label class="expand" for="c-39657621">[1 more]</label></div><br/><div class="children"><div class="content">There is specifically block storage service (EBS) and falvirs of it like EBS multi-attach and EFS that can ne used if there is a need to port software&#x2F;databases to the cloud with low level filesystem support.<p>Why would we need to do it on object storage which addresses a different type of storage need.<p>Nevertheless there are projects like EMRFS and S3 file system mount points that try to provide files stem interfaces to workloads that need to see S3 as a filesystem.</div><br/></div></div></div></div><div id="39657575" class="c"><input type="checkbox" id="c-39657575" checked=""/><div class="controls bullet"><span class="by">hiAndrewQuinn</span><span>|</span><a href="#39657558">prev</a><span>|</span><a href="#39657131">next</a><span>|</span><label class="collapse" for="c-39657575">[-]</label><label class="expand" for="c-39657575">[1 more]</label></div><br/><div class="children"><div class="content">I feel like I understand the lasting popularity of the humble FTP fileserver a bit better now. Thank you.</div><br/></div></div><div id="39657131" class="c"><input type="checkbox" id="c-39657131" checked=""/><div class="controls bullet"><span class="by">dmarinus</span><span>|</span><a href="#39657575">prev</a><span>|</span><a href="#39657390">next</a><span>|</span><label class="collapse" for="c-39657131">[-]</label><label class="expand" for="c-39657131">[3 more]</label></div><br/><div class="children"><div class="content">I talked to people at AWS who work in RDS Aurora and they hinted they use S3 internally as a backend for MySQL and PostgreSQL.</div><br/><div id="39657258" class="c"><input type="checkbox" id="c-39657258" checked=""/><div class="controls bullet"><span class="by">readyman</span><span>|</span><a href="#39657131">parent</a><span>|</span><a href="#39657390">next</a><span>|</span><label class="collapse" for="c-39657258">[-]</label><label class="expand" for="c-39657258">[2 more]</label></div><br/><div class="children"><div class="content">Big if true. That was definitely not in the AWS cert I took lol.</div><br/><div id="39657472" class="c"><input type="checkbox" id="c-39657472" checked=""/><div class="controls bullet"><span class="by">multani</span><span>|</span><a href="#39657131">root</a><span>|</span><a href="#39657258">parent</a><span>|</span><a href="#39657390">next</a><span>|</span><label class="collapse" for="c-39657472">[-]</label><label class="expand" for="c-39657472">[1 more]</label></div><br/><div class="children"><div class="content">Separating compute and storage is one of the core idea behind Aurora. They talked about it in several places, for instance:<p>* <a href="https:&#x2F;&#x2F;www.amazon.science&#x2F;publications&#x2F;amazon-aurora-design-considerations-for-high-throughput-cloud-native-relational-databases" rel="nofollow">https:&#x2F;&#x2F;www.amazon.science&#x2F;publications&#x2F;amazon-aurora-design...</a>
* <a href="https:&#x2F;&#x2F;d1.awsstatic.com&#x2F;events&#x2F;reinvent&#x2F;2019&#x2F;REPEAT_Amazon_Aurora_storage_demystified_How_it_all_works_DAT309-R.pdf" rel="nofollow">https:&#x2F;&#x2F;d1.awsstatic.com&#x2F;events&#x2F;reinvent&#x2F;2019&#x2F;REPEAT_Amazon_...</a></div><br/></div></div></div></div></div></div><div id="39657390" class="c"><input type="checkbox" id="c-39657390" checked=""/><div class="controls bullet"><span class="by">throwaway892238</span><span>|</span><a href="#39657131">prev</a><span>|</span><a href="#39657073">next</a><span>|</span><label class="collapse" for="c-39657390">[-]</label><label class="expand" for="c-39657390">[1 more]</label></div><br/><div class="children"><div class="content">&gt; The &quot;simple&quot; in S3 is a misnomer. S3 is not actually simple. It&#x27;s deep.<p>Simple doesn&#x27;t mean &quot;not deep&quot;. It means having the fewest parts needed in order to accomplish your requirements.<p>If you require a distributed, centralized, replicated, high-availability, high-durability, high-bandwidth, low-latency, strongly-consistent, synchronous, scalable object store with HTTP REST API, you can&#x27;t get much simpler than S3. Lots of features have been added to AWS S3 over the years, but the basic operation has remained the same.</div><br/></div></div><div id="39657012" class="c"><input type="checkbox" id="c-39657012" checked=""/><div class="controls bullet"><span class="by">inkyoto</span><span>|</span><a href="#39657073">prev</a><span>|</span><a href="#39657232">next</a><span>|</span><label class="collapse" for="c-39657012">[-]</label><label class="expand" for="c-39657012">[1 more]</label></div><br/><div class="children"><div class="content">S3 is a tagged versioned object storage with file like semantics implemented in the AWS SDK (via AWS S3 API&#x27;s). The S3 object key is the tag.<p>Files and folders are used to make S3 buckets more approachable to those who either don&#x27;t know or don&#x27;t want to know what it actually is, and one day they get a surprise.</div><br/></div></div><div id="39657233" class="c"><input type="checkbox" id="c-39657233" checked=""/><div class="controls bullet"><span class="by">danrob</span><span>|</span><a href="#39657232">prev</a><span>|</span><label class="collapse" for="c-39657233">[-]</label><label class="expand" for="c-39657233">[1 more]</label></div><br/><div class="children"><div class="content">Is this guy from the 90s?</div><br/></div></div></div></div></div></div></div></body></html>