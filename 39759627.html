<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1710925267191" as="style"/><link rel="stylesheet" href="styles.css?v=1710925267191"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/microsoft/retina">Retina – eBPF distributed networking observability tool for Kubernetes</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>boratanrikulu</span> | <span>24 comments</span></div><br/><div><div id="39763033" class="c"><input type="checkbox" id="c-39763033" checked=""/><div class="controls bullet"><span class="by">jookat</span><span>|</span><a href="#39763139">next</a><span>|</span><label class="collapse" for="c-39763033">[-]</label><label class="expand" for="c-39763033">[1 more]</label></div><br/><div class="children"><div class="content">Red Hat has a similar eBPF based tool <a href="https:&#x2F;&#x2F;github.com&#x2F;netobserv&#x2F;network-observability-operator">https:&#x2F;&#x2F;github.com&#x2F;netobserv&#x2F;network-observability-operator</a> 
(Disclaimer: i work on it) - the cool thing imho with retina or redhat netobserv or pixie is they aren&#x27;t tied to a specific CNI.
Now one of the problems that arises is potential conflicts and lack of collaboration between eBPF based tools, as there are more and more. Something called bpfman aims to address this aspect</div><br/></div></div><div id="39763139" class="c"><input type="checkbox" id="c-39763139" checked=""/><div class="controls bullet"><span class="by">tempaccount420</span><span>|</span><a href="#39763033">prev</a><span>|</span><a href="#39762902">next</a><span>|</span><label class="collapse" for="c-39763139">[-]</label><label class="expand" for="c-39763139">[2 more]</label></div><br/><div class="children"><div class="content">What&#x27;s the performance impact of using VM-based eBPF for these tasks instead of native code?</div><br/><div id="39763278" class="c"><input type="checkbox" id="c-39763278" checked=""/><div class="controls bullet"><span class="by">tptacek</span><span>|</span><a href="#39763139">parent</a><span>|</span><a href="#39762902">next</a><span>|</span><label class="collapse" for="c-39763278">[-]</label><label class="expand" for="c-39763278">[1 more]</label></div><br/><div class="children"><div class="content">Linux eBPF is JIT&#x27;d. It has native performance.</div><br/></div></div></div></div><div id="39762902" class="c"><input type="checkbox" id="c-39762902" checked=""/><div class="controls bullet"><span class="by">xyst</span><span>|</span><a href="#39763139">prev</a><span>|</span><a href="#39760339">next</a><span>|</span><label class="collapse" for="c-39762902">[-]</label><label class="expand" for="c-39762902">[1 more]</label></div><br/><div class="children"><div class="content">Speaking of observability tools. Anybody here know how to gather more in-depth metrics on mTLS requests? Have an internal (self signed) CA and just want to know which issued certs are presented to nodes. Would be nice to get cert serial number and other metadata as well</div><br/></div></div><div id="39760339" class="c"><input type="checkbox" id="c-39760339" checked=""/><div class="controls bullet"><span class="by">maxboone</span><span>|</span><a href="#39762902">prev</a><span>|</span><a href="#39762822">next</a><span>|</span><label class="collapse" for="c-39760339">[-]</label><label class="expand" for="c-39760339">[14 more]</label></div><br/><div class="children"><div class="content">Probably this means it&#x27;s not for me, but what is this useful for?<p>Anyone using this in their prod set-up and has a scenario where they found this useful?</div><br/><div id="39760391" class="c"><input type="checkbox" id="c-39760391" checked=""/><div class="controls bullet"><span class="by">p_l</span><span>|</span><a href="#39760339">parent</a><span>|</span><a href="#39760709">next</a><span>|</span><label class="collapse" for="c-39760391">[-]</label><label class="expand" for="c-39760391">[5 more]</label></div><br/><div class="children"><div class="content">Just today at $DAYJOB we had a complaint that one teams Azure Kubernetes clusters was &quot;slow&quot;. About only metric out of norm was network traffic - but lack of detailed instrumentation meant we couldn&#x27;t really isolate the cause to specific container or process</div><br/><div id="39762426" class="c"><input type="checkbox" id="c-39762426" checked=""/><div class="controls bullet"><span class="by">hacker_newz</span><span>|</span><a href="#39760339">root</a><span>|</span><a href="#39760391">parent</a><span>|</span><a href="#39760709">next</a><span>|</span><label class="collapse" for="c-39762426">[-]</label><label class="expand" for="c-39762426">[4 more]</label></div><br/><div class="children"><div class="content">If the only explanation someone can provide is that &quot;a cluster is slow&quot;, the issue isn&#x27;t with network observability. They need to do at least the minimum level of analysis before escalating.</div><br/><div id="39763456" class="c"><input type="checkbox" id="c-39763456" checked=""/><div class="controls bullet"><span class="by">chronid</span><span>|</span><a href="#39760339">root</a><span>|</span><a href="#39762426">parent</a><span>|</span><a href="#39762530">next</a><span>|</span><label class="collapse" for="c-39763456">[-]</label><label class="expand" for="c-39763456">[2 more]</label></div><br/><div class="children"><div class="content">Yes, that would be great, but unfortunately there are application teams (particularly in the enterprise) lacking such tact when blaming infrastructure for issues.<p>Good old silos are alive and well, and ownership is not always part of the culture.</div><br/><div id="39763877" class="c"><input type="checkbox" id="c-39763877" checked=""/><div class="controls bullet"><span class="by">p_l</span><span>|</span><a href="#39760339">root</a><span>|</span><a href="#39763456">parent</a><span>|</span><a href="#39762530">next</a><span>|</span><label class="collapse" for="c-39763877">[-]</label><label class="expand" for="c-39763877">[1 more]</label></div><br/><div class="children"><div class="content">In our case the <i>expected</i> golden path is that once our team figures the proper procedure, we will establish it for the downstream teams that are direct supports of the application teams.<p>So at least in theory things are somewhat well set up, but there&#x27;s too much siloing at our level (wildly separate network teams, teams for specific clouds, etc.)</div><br/></div></div></div></div><div id="39762530" class="c"><input type="checkbox" id="c-39762530" checked=""/><div class="controls bullet"><span class="by">p_l</span><span>|</span><a href="#39760339">root</a><span>|</span><a href="#39762426">parent</a><span>|</span><a href="#39763456">prev</a><span>|</span><a href="#39760709">next</a><span>|</span><label class="collapse" for="c-39762530">[-]</label><label class="expand" for="c-39762530">[1 more]</label></div><br/><div class="children"><div class="content">Unfortunately we were the right team for escalation <i>before</i> escalating to network team.</div><br/></div></div></div></div></div></div><div id="39760709" class="c"><input type="checkbox" id="c-39760709" checked=""/><div class="controls bullet"><span class="by">FridgeSeal</span><span>|</span><a href="#39760339">parent</a><span>|</span><a href="#39760391">prev</a><span>|</span><a href="#39760638">next</a><span>|</span><label class="collapse" for="c-39760709">[-]</label><label class="expand" for="c-39760709">[6 more]</label></div><br/><div class="children"><div class="content">It’s like Cilium + Hubble but useful for you don’t&#x2F;can’t run cilium. Uses eBPF to collect metrics and stats on what flows where, can record an impressive amount of stuff, without any required instrumentation of your applications. Amazingly handy for when you run both first party and 3rd party apps in your K8s cluster. The network maps these tools produce are handy too.<p>Although, Cilium is pretty great, so not sure why you wouldn’t run it, given the option…</div><br/><div id="39761081" class="c"><input type="checkbox" id="c-39761081" checked=""/><div class="controls bullet"><span class="by">hosh</span><span>|</span><a href="#39760339">root</a><span>|</span><a href="#39760709">parent</a><span>|</span><a href="#39760638">next</a><span>|</span><label class="collapse" for="c-39761081">[-]</label><label class="expand" for="c-39761081">[5 more]</label></div><br/><div class="children"><div class="content">Cillium has been bought out by Cisco, so its monetization is only a matter of time.<p>Also, not everyone needs to implement a service mesh.</div><br/><div id="39761304" class="c"><input type="checkbox" id="c-39761304" checked=""/><div class="controls bullet"><span class="by">candiddevmike</span><span>|</span><a href="#39760339">root</a><span>|</span><a href="#39761081">parent</a><span>|</span><a href="#39761264">next</a><span>|</span><label class="collapse" for="c-39761304">[-]</label><label class="expand" for="c-39761304">[2 more]</label></div><br/><div class="children"><div class="content">Cillium is a CNCF project and Apache 2 licensed.  Isovalent and their enterprise product were bought by Cisco.</div><br/></div></div><div id="39761264" class="c"><input type="checkbox" id="c-39761264" checked=""/><div class="controls bullet"><span class="by">FridgeSeal</span><span>|</span><a href="#39760339">root</a><span>|</span><a href="#39761081">parent</a><span>|</span><a href="#39761304">prev</a><span>|</span><a href="#39760638">next</a><span>|</span><label class="collapse" for="c-39761264">[-]</label><label class="expand" for="c-39761264">[2 more]</label></div><br/><div class="children"><div class="content">Neither Cilium nor Hubble are service meshes.<p>Cilium is a CNI - the functionality that provides the K8s cluster inter-pod networking. The fact that it uses eBPF to deliver its functionality is what gives it the impressive observability you usually only get from a service mesh. I agree that not everyone needs a service mesh.</div><br/><div id="39763586" class="c"><input type="checkbox" id="c-39763586" checked=""/><div class="controls bullet"><span class="by">nullify88</span><span>|</span><a href="#39760339">root</a><span>|</span><a href="#39761264">parent</a><span>|</span><a href="#39760638">next</a><span>|</span><label class="collapse" for="c-39763586">[-]</label><label class="expand" for="c-39763586">[1 more]</label></div><br/><div class="children"><div class="content">You are right that cilium is a CNI but one of its many features is also providing a sidecar-less service mesh using eBPF. 
<a href="https:&#x2F;&#x2F;cilium.io&#x2F;use-cases&#x2F;service-mesh&#x2F;" rel="nofollow">https:&#x2F;&#x2F;cilium.io&#x2F;use-cases&#x2F;service-mesh&#x2F;</a></div><br/></div></div></div></div></div></div></div></div><div id="39760638" class="c"><input type="checkbox" id="c-39760638" checked=""/><div class="controls bullet"><span class="by">nijave</span><span>|</span><a href="#39760339">parent</a><span>|</span><a href="#39760709">prev</a><span>|</span><a href="#39761329">next</a><span>|</span><label class="collapse" for="c-39760638">[-]</label><label class="expand" for="c-39760638">[1 more]</label></div><br/><div class="children"><div class="content">Haven&#x27;t used this but I tried out Pixie trying to debug where outgoing traffic was coming from and where it was going and was fairly successful although Pixie wasn&#x27;t very stable&#x2F;had a lot of issues causing crashes.<p>In this case, we had a couple services talking to 3rd party services running on AWS so it wasn&#x27;t obvious from generic flow logs.<p>I also used Lacework a couple years ago which is eBPF based and it was pretty trivial to see things phoning home or one off maintenance where a new connection was being initiated.</div><br/></div></div><div id="39761329" class="c"><input type="checkbox" id="c-39761329" checked=""/><div class="controls bullet"><span class="by">emmelaich</span><span>|</span><a href="#39760339">parent</a><span>|</span><a href="#39760638">prev</a><span>|</span><a href="#39762822">next</a><span>|</span><label class="collapse" for="c-39761329">[-]</label><label class="expand" for="c-39761329">[1 more]</label></div><br/><div class="children"><div class="content">The linked docs provide more info: <a href="https:&#x2F;&#x2F;retina.sh&#x2F;docs&#x2F;intro" rel="nofollow">https:&#x2F;&#x2F;retina.sh&#x2F;docs&#x2F;intro</a></div><br/></div></div></div></div><div id="39762822" class="c"><input type="checkbox" id="c-39762822" checked=""/><div class="controls bullet"><span class="by">emmanueloga_</span><span>|</span><a href="#39760339">prev</a><span>|</span><a href="#39761170">next</a><span>|</span><label class="collapse" for="c-39762822">[-]</label><label class="expand" for="c-39762822">[1 more]</label></div><br/><div class="children"><div class="content">There is a flood of observability tools based on eBPF coming out these days [1]. eBPF is used to collect metrics without the need to instrument the code.<p>--<p>1: <a href="https:&#x2F;&#x2F;ebpf.io&#x2F;applications&#x2F;" rel="nofollow">https:&#x2F;&#x2F;ebpf.io&#x2F;applications&#x2F;</a></div><br/></div></div><div id="39761170" class="c"><input type="checkbox" id="c-39761170" checked=""/><div class="controls bullet"><span class="by">orisho</span><span>|</span><a href="#39762822">prev</a><span>|</span><a href="#39761589">next</a><span>|</span><label class="collapse" for="c-39761170">[-]</label><label class="expand" for="c-39761170">[1 more]</label></div><br/><div class="children"><div class="content">See also: Network Mapper - low privileges, no-eBPF network observability tool for K8s<p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=39761114">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=39761114</a></div><br/></div></div><div id="39761589" class="c"><input type="checkbox" id="c-39761589" checked=""/><div class="controls bullet"><span class="by">scottlamb</span><span>|</span><a href="#39761170">prev</a><span>|</span><label class="collapse" for="c-39761589">[-]</label><label class="expand" for="c-39761589">[3 more]</label></div><br/><div class="children"><div class="content">Sigh, anyone have a name suggestion for a (Rust) RTSP library? <a href="https:&#x2F;&#x2F;crates.io&#x2F;crates&#x2F;retina" rel="nofollow">https:&#x2F;&#x2F;crates.io&#x2F;crates&#x2F;retina</a></div><br/><div id="39763672" class="c"><input type="checkbox" id="c-39763672" checked=""/><div class="controls bullet"><span class="by">karolist</span><span>|</span><a href="#39761589">parent</a><span>|</span><a href="#39762827">next</a><span>|</span><label class="collapse" for="c-39763672">[-]</label><label class="expand" for="c-39763672">[1 more]</label></div><br/><div class="children"><div class="content">The name collisions for opensource projects stopped mattering a long time ago</div><br/></div></div><div id="39762827" class="c"><input type="checkbox" id="c-39762827" checked=""/><div class="controls bullet"><span class="by">emmanueloga_</span><span>|</span><a href="#39761589">parent</a><span>|</span><a href="#39763672">prev</a><span>|</span><label class="collapse" for="c-39762827">[-]</label><label class="expand" for="c-39762827">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;deadcells.fandom.com&#x2F;wiki&#x2F;Conjunctivius" rel="nofollow">https:&#x2F;&#x2F;deadcells.fandom.com&#x2F;wiki&#x2F;Conjunctivius</a> :-p</div><br/></div></div></div></div></div></div></div></div></div></body></html>