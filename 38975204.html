<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1705136466852" as="style"/><link rel="stylesheet" href="styles.css?v=1705136466852"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/revng/revng">revng translates (i386, x86-64, MIPS, ARM, AArch64, s390x) binaries to LLVM IR</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>davikr</span> | <span>18 comments</span></div><br/><div><div id="38976371" class="c"><input type="checkbox" id="c-38976371" checked=""/><div class="controls bullet"><span class="by">vient</span><span>|</span><a href="#38975452">next</a><span>|</span><label class="collapse" for="c-38976371">[-]</label><label class="expand" for="c-38976371">[1 more]</label></div><br/><div class="children"><div class="content">Usually such things are called lifters. Wonder how this tool compares to other existing LLVM IR lifters, such as remill[0] and rellume[1].<p>0: <a href="https:&#x2F;&#x2F;github.com&#x2F;lifting-bits&#x2F;remill">https:&#x2F;&#x2F;github.com&#x2F;lifting-bits&#x2F;remill</a><p>1: <a href="https:&#x2F;&#x2F;github.com&#x2F;aengelke&#x2F;rellume">https:&#x2F;&#x2F;github.com&#x2F;aengelke&#x2F;rellume</a></div><br/></div></div><div id="38975452" class="c"><input type="checkbox" id="c-38975452" checked=""/><div class="controls bullet"><span class="by">Someone</span><span>|</span><a href="#38976371">prev</a><span>|</span><a href="#38977685">next</a><span>|</span><label class="collapse" for="c-38975452">[-]</label><label class="expand" for="c-38975452">[6 more]</label></div><br/><div class="children"><div class="content">License is weird and unclear to me. <a href="https:&#x2F;&#x2F;github.com&#x2F;revng&#x2F;revng&#x2F;blob&#x2F;develop&#x2F;LICENSE.md">https:&#x2F;&#x2F;github.com&#x2F;revng&#x2F;revng&#x2F;blob&#x2F;develop&#x2F;LICENSE.md</a>:<p><i>“Licensing information<p>Copyright (c) 2015-2017 Alessandro Di Federico &lt;ale@clearmind.me&gt;<p>Copyright (c) 2017-2020 rev.ng Labs Srl &lt;info@rev.ng&gt;<p>The project as a whole is released under the terms of the GNU General Public License, version 2. A copy of this license can be found in LICENSE.gpl.<p>Each individual file, unless otherwise noted, is released under the terms of the MIT License. A copy of this license can be found in LICENSE.mit.”</i><p>Does that paragraph about GPLv2 constitute a version of “unless otherwise noted”?<p>If so, why mention the MIT license at all?<p>If not, doesn’t that mean it effectively is dual licensed? If everything is GPLv2, and I take a single file, that’s still GPLv2, and if if have set of MIT licensed files and group them, the result still is MIT licensed.<p>(Browsing the code, all source files seem to have a MIT header, so, presumably, they mean this to beMIT licensed)<p>Also, it’s not “GPLv2 or later”, but I think you can take the MIT licensed files and rerelease them as GPLv3, if you’d want to (or is the attribution requirement a showstopper there?)</div><br/><div id="38977080" class="c"><input type="checkbox" id="c-38977080" checked=""/><div class="controls bullet"><span class="by">edef</span><span>|</span><a href="#38975452">parent</a><span>|</span><a href="#38976453">next</a><span>|</span><label class="collapse" for="c-38977080">[-]</label><label class="expand" for="c-38977080">[1 more]</label></div><br/><div class="children"><div class="content">The qemu TCG parts that it presumably links to are GPLv2, so the combined project is GPLv2 by necessity[1]. I think that&#x27;s all they&#x27;re trying to get across.<p>[1]: apart from viral licenses being pretty much meaningless under EU copyright law</div><br/></div></div><div id="38976453" class="c"><input type="checkbox" id="c-38976453" checked=""/><div class="controls bullet"><span class="by">agf</span><span>|</span><a href="#38975452">parent</a><span>|</span><a href="#38977080">prev</a><span>|</span><a href="#38976238">next</a><span>|</span><label class="collapse" for="c-38976453">[-]</label><label class="expand" for="c-38976453">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Each individual file, unless otherwise noted, is released under the terms of the MIT License. A copy of this license can be found in LICENSE.mit.<p>Worth . . . noting . . . that every file with license info says MIT; none say anything else. So the &quot;unless otherwise noted&quot; is purely future-proofing.</div><br/></div></div><div id="38976238" class="c"><input type="checkbox" id="c-38976238" checked=""/><div class="controls bullet"><span class="by">Brian_K_White</span><span>|</span><a href="#38975452">parent</a><span>|</span><a href="#38976453">prev</a><span>|</span><a href="#38975767">next</a><span>|</span><label class="collapse" for="c-38976238">[-]</label><label class="expand" for="c-38976238">[1 more]</label></div><br/><div class="children"><div class="content">If you have a set of MIT files, and group them, the group is whatever you want it to be.<p>It just means someone else can take all the files and make something else with them, but they just can&#x27;t redistribute the new project under the name revng, unless it conforms to gpl2.</div><br/></div></div><div id="38975767" class="c"><input type="checkbox" id="c-38975767" checked=""/><div class="controls bullet"><span class="by">mgaunard</span><span>|</span><a href="#38975452">parent</a><span>|</span><a href="#38976238">prev</a><span>|</span><a href="#38975825">next</a><span>|</span><label class="collapse" for="c-38975767">[-]</label><label class="expand" for="c-38975767">[1 more]</label></div><br/><div class="children"><div class="content">It is dual licensed. Only the copyright holder can change the license.</div><br/></div></div><div id="38975825" class="c"><input type="checkbox" id="c-38975825" checked=""/><div class="controls bullet"><span class="by">themerone</span><span>|</span><a href="#38975452">parent</a><span>|</span><a href="#38975767">prev</a><span>|</span><a href="#38977685">next</a><span>|</span><label class="collapse" for="c-38975825">[-]</label><label class="expand" for="c-38975825">[1 more]</label></div><br/><div class="children"><div class="content">IANAL, but if you fork a project and change the licence, the new license only applies to your modifications.</div><br/></div></div></div></div><div id="38977685" class="c"><input type="checkbox" id="c-38977685" checked=""/><div class="controls bullet"><span class="by">quic_bcain</span><span>|</span><a href="#38975452">prev</a><span>|</span><a href="#38975807">next</a><span>|</span><label class="collapse" for="c-38977685">[-]</label><label class="expand" for="c-38977685">[1 more]</label></div><br/><div class="children"><div class="content">Alessandro presented revng at the 2016 llvm Bay area dev conf.<p>video <a href="https:&#x2F;&#x2F;youtu.be&#x2F;5CbuU4KwBCE?si=eUN_UGr7cjat3P8U" rel="nofollow">https:&#x2F;&#x2F;youtu.be&#x2F;5CbuU4KwBCE?si=eUN_UGr7cjat3P8U</a><p>slides <a href="https:&#x2F;&#x2F;www.llvm.org&#x2F;devmtg&#x2F;2016-11&#x2F;Slides&#x2F;DiFederico-rev.ng.pdf" rel="nofollow">https:&#x2F;&#x2F;www.llvm.org&#x2F;devmtg&#x2F;2016-11&#x2F;Slides&#x2F;DiFederico-rev.ng...</a></div><br/></div></div><div id="38975807" class="c"><input type="checkbox" id="c-38975807" checked=""/><div class="controls bullet"><span class="by">CharlesW</span><span>|</span><a href="#38977685">prev</a><span>|</span><a href="#38976180">next</a><span>|</span><label class="collapse" for="c-38975807">[-]</label><label class="expand" for="c-38975807">[4 more]</label></div><br/><div class="children"><div class="content">Could you, in turn, convert this to Wasm? (I&#x27;m wondering if it&#x27;s possible to convert a macOS command-line tool to run on x86-64.)</div><br/><div id="38975846" class="c"><input type="checkbox" id="c-38975846" checked=""/><div class="controls bullet"><span class="by">themerone</span><span>|</span><a href="#38975807">parent</a><span>|</span><a href="#38976036">next</a><span>|</span><label class="collapse" for="c-38975846">[-]</label><label class="expand" for="c-38975846">[2 more]</label></div><br/><div class="children"><div class="content">Unlikely, you would have to convert every linked library, and  every system call would have to be supported by the wasm runtime.</div><br/><div id="38977348" class="c"><input type="checkbox" id="c-38977348" checked=""/><div class="controls bullet"><span class="by">flamedoge</span><span>|</span><a href="#38975807">root</a><span>|</span><a href="#38975846">parent</a><span>|</span><a href="#38976036">next</a><span>|</span><label class="collapse" for="c-38977348">[-]</label><label class="expand" for="c-38977348">[1 more]</label></div><br/><div class="children"><div class="content">but it is possible</div><br/></div></div></div></div><div id="38976036" class="c"><input type="checkbox" id="c-38976036" checked=""/><div class="controls bullet"><span class="by">bloopernova</span><span>|</span><a href="#38975807">parent</a><span>|</span><a href="#38975846">prev</a><span>|</span><a href="#38976180">next</a><span>|</span><label class="collapse" for="c-38976036">[-]</label><label class="expand" for="c-38976036">[1 more]</label></div><br/><div class="children"><div class="content">Now I&#x27;m curious what the macOS CLI binary is!</div><br/></div></div></div></div><div id="38976180" class="c"><input type="checkbox" id="c-38976180" checked=""/><div class="controls bullet"><span class="by">api</span><span>|</span><a href="#38975807">prev</a><span>|</span><label class="collapse" for="c-38976180">[-]</label><label class="expand" for="c-38976180">[5 more]</label></div><br/><div class="children"><div class="content">Wonder if you could use this with binfmt and a cache to create a kind of super-Rosetta for Linux. Any Linux binary not for the host architecture will be translated, and translated binaries are cached somewhere by a hash of the original binary so the translation only has to happen once. All transparent to the user.</div><br/><div id="38976202" class="c"><input type="checkbox" id="c-38976202" checked=""/><div class="controls bullet"><span class="by">dmitrygr</span><span>|</span><a href="#38976180">parent</a><span>|</span><label class="collapse" for="c-38976202">[-]</label><label class="expand" for="c-38976202">[4 more]</label></div><br/><div class="children"><div class="content">Just like Rosetta, that will be an incomplete solution, without also including a JIT.<p>Nothing stops a binary from generating native code at runtime, loading it from a random file, and many such things. A static recompiler is not possible to write such that it covers <i>ALL</i> the possibilities. You need a runtime component</div><br/><div id="38976396" class="c"><input type="checkbox" id="c-38976396" checked=""/><div class="controls bullet"><span class="by">Brian_K_White</span><span>|</span><a href="#38976180">root</a><span>|</span><a href="#38976202">parent</a><span>|</span><label class="collapse" for="c-38976396">[-]</label><label class="expand" for="c-38976396">[3 more]</label></div><br/><div class="children"><div class="content">True but does not seem to make it not worth doing.<p>Incomplete? OK but how incomplete really? I have never written anything myself that relied on generating and then executing machine code at run time. Sure it exists, but so what if one app out of everything I ever use turns out to do it? Or even say ten?<p>Complete but only by dint of including a jit? OK but does that imply there might as well just be the jit alone? I don&#x27;t think so. The general concept of caching has been well proven to be overwhelmingly worth it in pretty much any context it&#x27;s possible.</div><br/><div id="38976615" class="c"><input type="checkbox" id="c-38976615" checked=""/><div class="controls bullet"><span class="by">api</span><span>|</span><a href="#38976180">root</a><span>|</span><a href="#38976396">parent</a><span>|</span><label class="collapse" for="c-38976615">[-]</label><label class="expand" for="c-38976615">[2 more]</label></div><br/><div class="children"><div class="content">If you ran the transpiled binaries with a security flag prohibiting execution of generated code, that would cause anything with a jit to crash neatly and possibly with an informative error message. Docs for this system would have to be clear that jits will not work and must be native.<p>I think Linux has some kind of no-exec flag like that. I know macOS does.</div><br/><div id="38977515" class="c"><input type="checkbox" id="c-38977515" checked=""/><div class="controls bullet"><span class="by">dmitrygr</span><span>|</span><a href="#38976180">root</a><span>|</span><a href="#38976615">parent</a><span>|</span><label class="collapse" for="c-38977515">[-]</label><label class="expand" for="c-38977515">[1 more]</label></div><br/><div class="children"><div class="content">that would not save you from someone doing things like:<p><pre><code>   ((void (*)(void))(((uintptr_t)&amp;myfunc) + 1))();
</code></pre>
and there you go - on x86 this could plausibly be a way to obfuscate code since it has variable-length instrs. And your static analysis may not catch this. This does not require writeable executable pages or JIT.<p>Hell, i can receive a uint32 from the network, cast to a func pointer, and jump to it. And for all you know, my protocol relies on a lack of ASLR and sends me a valid entry point addr in my executable, which will have changed in the translation you do. (Fun story: long ago, AIM&#x27;s anti-protocol-cloning code did that - server would send a VA and ask for a few bytes at that VA. Unless you had a current copy of the aim executable in memory running you had no way to correctly reply)<p>The long tail of valid but freaky shit is ....very long, and disallowing W&amp;X pages will not protect you from it all</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>