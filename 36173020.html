<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1685782846825" as="style"/><link rel="stylesheet" href="styles.css?v=1685782846825"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://discourse.nixos.org/t/the-nixos-foundations-call-to-action-s3-costs-require-community-support/28672">The NixOS Foundation’s Call to Action: S3 Costs Require Community Support</a> <span class="domain">(<a href="https://discourse.nixos.org">discourse.nixos.org</a>)</span></div><div class="subtext"><span>ghuntley</span> | <span>157 comments</span></div><br/><div><div id="36173391" class="c"><input type="checkbox" id="c-36173391" checked=""/><div class="controls bullet"><span class="by">johnklos</span><span>|</span><a href="#36173587">next</a><span>|</span><label class="collapse" for="c-36173391">[-]</label><label class="expand" for="c-36173391">[37 more]</label></div><br/><div class="children"><div class="content">Half a petabyte in storage and 3 TB transfer a day? Shit. That&#x27;s nothing, unless you&#x27;re &quot;saving money by using the cloud&quot;.<p>While I feel for them, they put themselves in this position. Even when someone gives you something apparently for free, you have to consider what might happen when it disappears, and it seems that nobody thought about it, or if they did, they didn&#x27;t care.<p>People often learn how expensive &quot;the cloud&quot; is the hard way.</div><br/><div id="36174742" class="c"><input type="checkbox" id="c-36174742" checked=""/><div class="controls bullet"><span class="by">usr1106</span><span>|</span><a href="#36173391">parent</a><span>|</span><a href="#36174194">next</a><span>|</span><label class="collapse" for="c-36174742">[-]</label><label class="expand" for="c-36174742">[1 more]</label></div><br/><div class="children"><div class="content">They did not make the decision that the cloud is cost-efficient. They had someone else paying their cloud bill and the cloud is easy for them.<p>Now that the someone else is pulling out they need to think for the first time what would be cost-efficient.</div><br/></div></div><div id="36174194" class="c"><input type="checkbox" id="c-36174194" checked=""/><div class="controls bullet"><span class="by">esjeon</span><span>|</span><a href="#36173391">parent</a><span>|</span><a href="#36174742">prev</a><span>|</span><a href="#36174710">next</a><span>|</span><label class="collapse" for="c-36174194">[-]</label><label class="expand" for="c-36174194">[3 more]</label></div><br/><div class="children"><div class="content">3 TB a day is roughly 36 MB&#x2F;s, so yeah it&#x27;s pretty much doable. 10 Gbps connection is already common, and it&#x27;s even possible on 1 Gbps connection if people don&#x27;t mind some saturation during peak time.<p>&gt; People often learn how expensive &quot;the cloud&quot; is the hard way.<p>Yeah, people really go a long way around just to get back to on-premise and colocation...</div><br/><div id="36174677" class="c"><input type="checkbox" id="c-36174677" checked=""/><div class="controls bullet"><span class="by">vasco</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36174194">parent</a><span>|</span><a href="#36174710">next</a><span>|</span><label class="collapse" for="c-36174677">[-]</label><label class="expand" for="c-36174677">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Yeah, people really go a long way around just to get back to on-premise and colocation.<p>Outside of pet projects I&#x27;m not sure many people are doing that, but happy to read any research. From all I&#x27;ve seen the numbers show an overwhelming move to the cloud, and a few grumpy cats annoyed that the pricing structure is different.</div><br/><div id="36174858" class="c"><input type="checkbox" id="c-36174858" checked=""/><div class="controls bullet"><span class="by">BiteCode_dev</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36174677">parent</a><span>|</span><a href="#36174710">next</a><span>|</span><label class="collapse" for="c-36174858">[-]</label><label class="expand" for="c-36174858">[1 more]</label></div><br/><div class="children"><div class="content">37signals enters the chat</div><br/></div></div></div></div></div></div><div id="36174710" class="c"><input type="checkbox" id="c-36174710" checked=""/><div class="controls bullet"><span class="by">mrweasel</span><span>|</span><a href="#36173391">parent</a><span>|</span><a href="#36174194">prev</a><span>|</span><a href="#36173801">next</a><span>|</span><label class="collapse" for="c-36174710">[-]</label><label class="expand" for="c-36174710">[1 more]</label></div><br/><div class="children"><div class="content">There&#x27;s still open source hosting providers that could provide the bandwidth and maybe the storage for such a project, but I doubt many of them could provide something like S3, it would either be git, https, ftp or maybe rsync.<p>Building something like S3 yourself on Swift or Minio isn&#x27;t easily done, the management of these solution can be tricky, especially for multi-petabyte systems.<p>S3 most likely got them going and scaling really easily, but then at some point the cost comes back to bit you. Still I don&#x27;t see any good alternatives right now. I don&#x27;t completely disagree with your, but the overhead of building an S3 like storage solution upfront would have actively prevented the NixOS project getting off the ground.</div><br/></div></div><div id="36173801" class="c"><input type="checkbox" id="c-36173801" checked=""/><div class="controls bullet"><span class="by">n2d4</span><span>|</span><a href="#36173391">parent</a><span>|</span><a href="#36174710">prev</a><span>|</span><a href="#36173655">next</a><span>|</span><label class="collapse" for="c-36173801">[-]</label><label class="expand" for="c-36173801">[28 more]</label></div><br/><div class="children"><div class="content">I&#x27;m curious. What would you do, host on-prem? Even if I had the hardware, as a pure software person, I have no clue how I&#x27;d even start setting up a physical location to serve data on that scale. And even if the people on the NixOS team know, it sounds like their time would be better spent working on NixOS than building &amp; maintaining a data center (even if small). Bare metal storage services seem to be on a similar price level as lower-cost cloud services like Cloudflare or Backblaze, but I&#x27;m very interested if you happen to know a cheaper alternative!<p>Plus, even if you deal with the storage itself, how do you deal with serving the traffic globally? Optimally you&#x27;d want a distributed CDN, but that doesn&#x27;t really sound feasible without the cloud. Would you still use a cloud CDN, or just serve directly from your own server?</div><br/><div id="36174336" class="c"><input type="checkbox" id="c-36174336" checked=""/><div class="controls bullet"><span class="by">supriyo-biswas</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36173801">parent</a><span>|</span><a href="#36174369">next</a><span>|</span><label class="collapse" for="c-36174336">[-]</label><label class="expand" for="c-36174336">[15 more]</label></div><br/><div class="children"><div class="content">It is astonishing as to how marketers from the three big clouds have successfully convinced people that there is no middle ground between operating your data center and using one of their cloud services.<p>Here&#x27;s what you do:<p>1. Buy two servers equipped with a large amount of storage. There are many providers[1][2] that offer this. (You could technically do it with one, but two allows you to have high availability and prevent data loss in case of accidents, imagine `rm -rf *`.)<p>2. Use Minio to set up erasure-coded storage on one of the servers, and replicate objects[3] to the other server.<p>4. Use Cloudflare (because of their open source sponsorship program[4]) to serve the objects from the primary server, and when performing maintenance tasks, fall back to the secondary.<p>You could also serve objects directly out of the primary&#x2F;secondary, but using Cloudflare takes care of low-effort DDoS attacks by hiding the origin, and provides some caching which helps prevent hitting the egress limits of the server provider.<p>[1] <a href="https:&#x2F;&#x2F;www.netcup.eu&#x2F;vserver&#x2F;vstorage.php" rel="nofollow">https:&#x2F;&#x2F;www.netcup.eu&#x2F;vserver&#x2F;vstorage.php</a><p>[2] <a href="https:&#x2F;&#x2F;www.hetzner.com&#x2F;dedicated-rootserver" rel="nofollow">https:&#x2F;&#x2F;www.hetzner.com&#x2F;dedicated-rootserver</a><p>[3] <a href="https:&#x2F;&#x2F;blog.min.io&#x2F;active-active-replication&#x2F;" rel="nofollow">https:&#x2F;&#x2F;blog.min.io&#x2F;active-active-replication&#x2F;</a><p>[4] <a href="https:&#x2F;&#x2F;blog.cloudflare.com&#x2F;cloudflare-new-oss-sponsorships-program&#x2F;" rel="nofollow">https:&#x2F;&#x2F;blog.cloudflare.com&#x2F;cloudflare-new-oss-sponsorships-...</a></div><br/><div id="36174652" class="c"><input type="checkbox" id="c-36174652" checked=""/><div class="controls bullet"><span class="by">usr1106</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36174336">parent</a><span>|</span><a href="#36174712">next</a><span>|</span><label class="collapse" for="c-36174652">[-]</label><label class="expand" for="c-36174652">[9 more]</label></div><br/><div class="children"><div class="content">Yes, perfectly doable, but the expertise and time needed to do it (without fatal mistakes) and keep it running 365 days a year is non-negligible. Doing this by unpaid volunteers is more than challenging.</div><br/><div id="36174702" class="c"><input type="checkbox" id="c-36174702" checked=""/><div class="controls bullet"><span class="by">simonjgreen</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36174652">parent</a><span>|</span><a href="#36174701">next</a><span>|</span><label class="collapse" for="c-36174702">[-]</label><label class="expand" for="c-36174702">[7 more]</label></div><br/><div class="children"><div class="content">This is, in my opinion, a falacy perpetuated by the marketing departments of &quot;big cloud&quot;. Don&#x27;t forget that pre-2006 there was no S3, and we managed just fine. They are not challenging skills to learn, the zeitgeist has just convinced itself they are not worth learning</div><br/><div id="36174940" class="c"><input type="checkbox" id="c-36174940" checked=""/><div class="controls bullet"><span class="by">usr1106</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36174702">parent</a><span>|</span><a href="#36174746">next</a><span>|</span><label class="collapse" for="c-36174940">[-]</label><label class="expand" for="c-36174940">[1 more]</label></div><br/><div class="children"><div class="content">Who managed just fine? IT-based services very a minor fraction of what they are today. And IT departments in some random company were much bigger.</div><br/></div></div><div id="36174746" class="c"><input type="checkbox" id="c-36174746" checked=""/><div class="controls bullet"><span class="by">vasco</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36174702">parent</a><span>|</span><a href="#36174940">prev</a><span>|</span><a href="#36174701">next</a><span>|</span><label class="collapse" for="c-36174746">[-]</label><label class="expand" for="c-36174746">[5 more]</label></div><br/><div class="children"><div class="content">It&#x27;s condescending to think that someone can&#x27;t reasonably choose to pay for a service they are capable of doing.<p>Cooking isn&#x27;t hard either but I still go to restaurants, and don&#x27;t go around laughing at patrons telling them that they never bothered to learn how to cook if they are there.</div><br/><div id="36174790" class="c"><input type="checkbox" id="c-36174790" checked=""/><div class="controls bullet"><span class="by">heisenbit</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36174746">parent</a><span>|</span><a href="#36174796">next</a><span>|</span><label class="collapse" for="c-36174790">[-]</label><label class="expand" for="c-36174790">[1 more]</label></div><br/><div class="children"><div class="content">Eating in the restaurant once in a while is fine. Lage range of choices delivered quickly. But is it sustainable? Price higher, usually less healthy and not tailored to special needs.<p>In any case one does it professional IT done right is costly but cheaper than e.g. IT without offsite backup in case of a disaster.</div><br/></div></div><div id="36174796" class="c"><input type="checkbox" id="c-36174796" checked=""/><div class="controls bullet"><span class="by">simonjgreen</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36174746">parent</a><span>|</span><a href="#36174790">prev</a><span>|</span><a href="#36174701">next</a><span>|</span><label class="collapse" for="c-36174796">[-]</label><label class="expand" for="c-36174796">[3 more]</label></div><br/><div class="children"><div class="content">Do you eat every meal at a restaurant though? That would not be sustainable. To roll with your analogy it would be like the hospitality sector persuading the majority to ditch home meals entirely</div><br/><div id="36174845" class="c"><input type="checkbox" id="c-36174845" checked=""/><div class="controls bullet"><span class="by">vasco</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36174796">parent</a><span>|</span><a href="#36174701">next</a><span>|</span><label class="collapse" for="c-36174845">[-]</label><label class="expand" for="c-36174845">[2 more]</label></div><br/><div class="children"><div class="content">The problem was your assumption which is condescending. I gave you an analogy to make it clearer. Taking the analogy in the second paragraph apart doesn&#x27;t change the point in the first - it was simply to help illustrate it, but it stands on its own.</div><br/><div id="36174928" class="c"><input type="checkbox" id="c-36174928" checked=""/><div class="controls bullet"><span class="by">simonjgreen</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36174845">parent</a><span>|</span><a href="#36174701">next</a><span>|</span><label class="collapse" for="c-36174928">[-]</label><label class="expand" for="c-36174928">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not condescending at all. You are saying they could reasonably pay for it, but they quite obviously cannot (hence the existence of this whole post). What I&#x27;m principally challenging is the assumption that this required effort is substantial. I&#x27;m making the point that it is not, certainly (in my view) compared to the effort to run an entire operating system project and all of the ancillaries that come with that. This is an area they have chosen to pay for that (again, in my view) they don&#x27;t need to. They have gone to great lengths to architect a system that allows deep pinning of very specific versions, it&#x27;s not a stretch to think about the architecture required to deliver that. Instead they have stopped that line of thinking at [insert S3 here] rather than carry on solving. A direct consequence of that now is a $9k&#x2F;m hole they need to fill in their budget. I&#x27;m being critical, sure, but not condescending. Overall, it frustrates me seeing opinions that operating infrastructure is difficult and therefore must automatically be avoided. In this particular example avoiding operating said infrastructure potentially is putting the project in the red and at risk, but nowhere on the NixOS call for help does it suggest they have considered operating this themselves. And there in is the crux of my point. The zeitgeist has turned against operating infrastructure, and yet is frequently caught out by the cost of this decision.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="36174701" class="c"><input type="checkbox" id="c-36174701" checked=""/><div class="controls bullet"><span class="by">jacquesm</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36174652">parent</a><span>|</span><a href="#36174702">prev</a><span>|</span><a href="#36174712">next</a><span>|</span><label class="collapse" for="c-36174701">[-]</label><label class="expand" for="c-36174701">[1 more]</label></div><br/><div class="children"><div class="content">Not for the people behind NixOS. If it is challenging then that would cause me to re-calibrate my opinion of the project as a whole.</div><br/></div></div></div></div><div id="36174712" class="c"><input type="checkbox" id="c-36174712" checked=""/><div class="controls bullet"><span class="by">vasco</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36174336">parent</a><span>|</span><a href="#36174652">prev</a><span>|</span><a href="#36174772">next</a><span>|</span><label class="collapse" for="c-36174712">[-]</label><label class="expand" for="c-36174712">[2 more]</label></div><br/><div class="children"><div class="content">You do all of this and you still don&#x27;t have nearly the availability or durability of data you get from S3, nor people on call to fix it once anything happens to it.<p>It&#x27;s like comparing leasing a Mercedes-Benz with full service and all inclusive insurance to building your own bicycle. Some people don&#x27;t need the car, sure, but it&#x27;s not the same thing.</div><br/><div id="36174840" class="c"><input type="checkbox" id="c-36174840" checked=""/><div class="controls bullet"><span class="by">debugnik</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36174712">parent</a><span>|</span><a href="#36174772">next</a><span>|</span><label class="collapse" for="c-36174840">[-]</label><label class="expand" for="c-36174840">[1 more]</label></div><br/><div class="children"><div class="content">But they&#x27;re complaining about the price of leasing the Mercedes, so they need to lower their expectations if they want a cheaper solution.<p>Although having to spend some time to attain good enough availability&#x2F;durability is not a big deal when the rush to launch was over long ago. Unlike in your example, you can turn the bicycle into a car.</div><br/></div></div></div></div><div id="36174772" class="c"><input type="checkbox" id="c-36174772" checked=""/><div class="controls bullet"><span class="by">baq</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36174336">parent</a><span>|</span><a href="#36174712">prev</a><span>|</span><a href="#36174679">next</a><span>|</span><label class="collapse" for="c-36174772">[-]</label><label class="expand" for="c-36174772">[1 more]</label></div><br/><div class="children"><div class="content">In the olden days you’d find someone to donate you a server and have a few volunteers around the world mirror it.</div><br/></div></div><div id="36174679" class="c"><input type="checkbox" id="c-36174679" checked=""/><div class="controls bullet"><span class="by">lacasito25</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36174336">parent</a><span>|</span><a href="#36174772">prev</a><span>|</span><a href="#36174369">next</a><span>|</span><label class="collapse" for="c-36174679">[-]</label><label class="expand" for="c-36174679">[2 more]</label></div><br/><div class="children"><div class="content">I mean, you make S3 look easy compared to that</div><br/><div id="36174691" class="c"><input type="checkbox" id="c-36174691" checked=""/><div class="controls bullet"><span class="by">danielrmay</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36174679">parent</a><span>|</span><a href="#36174369">next</a><span>|</span><label class="collapse" for="c-36174691">[-]</label><label class="expand" for="c-36174691">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s the business model.</div><br/></div></div></div></div></div></div><div id="36174369" class="c"><input type="checkbox" id="c-36174369" checked=""/><div class="controls bullet"><span class="by">AnthonyMouse</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36173801">parent</a><span>|</span><a href="#36174336">prev</a><span>|</span><a href="#36173974">next</a><span>|</span><label class="collapse" for="c-36174369">[-]</label><label class="expand" for="c-36174369">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Even if I had the hardware, as a pure software person, I have no clue how I&#x27;d even start setting up a physical location to serve data on that scale.<p>3TB&#x2F;day is about a third of what you can serve out of any run of the mill PC with a gigabit ethernet connection. There are 22TB drives and individual servers with 24 drive bays, which exceeds 500TB. So you could do this with one machine connected to a gigabit fiber connection, and the machine would cost approximately what they&#x27;re paying monthly (almost all of that for the drives).<p>In practice a 24-bay chassis is silly and you might use a separate storage array etc., but that&#x27;s just details.<p>&gt; Plus, even if you deal with the storage itself, how do you deal with serving the traffic globally?<p>At 3TB&#x2F;day you&#x27;re not Netflix. Just serve it directly from your own server.</div><br/></div></div><div id="36173974" class="c"><input type="checkbox" id="c-36173974" checked=""/><div class="controls bullet"><span class="by">lordgilman</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36173801">parent</a><span>|</span><a href="#36174369">prev</a><span>|</span><a href="#36174271">next</a><span>|</span><label class="collapse" for="c-36173974">[-]</label><label class="expand" for="c-36173974">[2 more]</label></div><br/><div class="children"><div class="content">You colocate, like every other distro has done since the 90s.</div><br/><div id="36174241" class="c"><input type="checkbox" id="c-36174241" checked=""/><div class="controls bullet"><span class="by">herewulf</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36173974">parent</a><span>|</span><a href="#36174271">next</a><span>|</span><label class="collapse" for="c-36174241">[-]</label><label class="expand" for="c-36174241">[1 more]</label></div><br/><div class="children"><div class="content">And throw in some rsync mirrors for good measure.</div><br/></div></div></div></div><div id="36174271" class="c"><input type="checkbox" id="c-36174271" checked=""/><div class="controls bullet"><span class="by">toyg</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36173801">parent</a><span>|</span><a href="#36173974">prev</a><span>|</span><a href="#36174861">next</a><span>|</span><label class="collapse" for="c-36174271">[-]</label><label class="expand" for="c-36174271">[1 more]</label></div><br/><div class="children"><div class="content">Actually, for someone building an OS, having to face very practical challenges in the server space would likely be extremely beneficial. Dogfood, people, dogfood.</div><br/></div></div><div id="36174861" class="c"><input type="checkbox" id="c-36174861" checked=""/><div class="controls bullet"><span class="by">Roark66</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36173801">parent</a><span>|</span><a href="#36174271">prev</a><span>|</span><a href="#36174331">next</a><span>|</span><label class="collapse" for="c-36174861">[-]</label><label class="expand" for="c-36174861">[1 more]</label></div><br/><div class="children"><div class="content">Well, having a $9k per month budget you could hire an entire rack in a premium data center location (let&#x27;s say Telehouse London-Docklands that hosts London internet exchange - You can connect to it in a very cost effective way). This would still leave 80%~90% of the budget (depending on power use) for hardware&#x2F;software etc.<p>But a full rack is a huge overkill. How about a quarter rack for few hundred $ per month?<p>What about connectivity? Well, as mentioned Telehouse Docklands hosts LINX so you can get an unlimited transfer gigabit right into the Internet backbone for a couple hundred $ (mind I dealt with them few years ago, but I doubt prices changed that much - probably they&#x27;re lower if anything). Also there is a cluster of data centers in docklands so they compete on price heavily as well as resellers that often have good deals.<p>This is all just location and connectivity. How about hardware? Let&#x27;s say they wanted proper support with their hardware not diy  so they were looking for a &quot;solution provider&quot;. Send a request for quote to 10 of them including fujitsu, ibm, hp etc. Then tell them you&#x27;re looking for a &quot;charitable organisation discount&quot;. Unfortunately we&#x27;re missing the most important metric to price this &quot;solution&quot;. IOPS and if its mostly small or large files (random or sequential Access), but they host most of it in &quot;infrequent access&quot; s3 so let&#x27;s assume it&#x27;s not a lot, just to find the lower pricing boundary.<p>So let&#x27;s say a pair of 2u servers with two hba cards each and 4 12 disc jbods with 22tb Sas drives a total of a petabyte in raw storage or half a PB mirrored (not that they would run it mirrored). A system like this from a big name (it&#x27;s rather low performance, but we&#x27;re after cheap right, their s3 is likely very similar) might cost $80k. Over 5 years of lease that might be ~$3k per month plus their hosting and connectivity it&#x27;s about half of their $9k.... Then there is software, but that&#x27;s a separate thing. Also one could DIY such system for half the price, one could add SSDs etc. This is just an example. To design this properly one would need usage data from their s3 and few days of work to put it nicely together.</div><br/></div></div><div id="36174331" class="c"><input type="checkbox" id="c-36174331" checked=""/><div class="controls bullet"><span class="by">411111111111111</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36173801">parent</a><span>|</span><a href="#36174861">prev</a><span>|</span><a href="#36173826">next</a><span>|</span><label class="collapse" for="c-36174331">[-]</label><label class="expand" for="c-36174331">[2 more]</label></div><br/><div class="children"><div class="content">&gt; <i>Plus, even if you deal with the storage itself, how do you deal with serving the traffic globally?</i><p>As a simple example 1 of the cheapest hetzner baremetal nodes gives you 500gb nvme or 2tb HDD storage with an unlimited gigabit Connection in Europe. This sums up to i believe 10TB of data per day.<p>Given the provided numbers, a single 50€ instance could handle the load, even if it&#x27;s located in Europe. CDNs make sense for systems which are sensitive to high latency, or you&#x27;re pushing multiple TB per hour, which this just isn&#x27;t.</div><br/><div id="36174708" class="c"><input type="checkbox" id="c-36174708" checked=""/><div class="controls bullet"><span class="by">usr1106</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36174331">parent</a><span>|</span><a href="#36173826">next</a><span>|</span><label class="collapse" for="c-36174708">[-]</label><label class="expand" for="c-36174708">[1 more]</label></div><br/><div class="children"><div class="content">I wonder how unlimited such cheap unlimited connections really are. In the simplest case insufficient capacity in the provider network might become a bottleneck. They might notice that you are the noisiest one in the whole neighboorhood and either ask more money or throttle you. Offers that are too good to be true typically don&#x27;t last very long.</div><br/></div></div></div></div><div id="36173826" class="c"><input type="checkbox" id="c-36173826" checked=""/><div class="controls bullet"><span class="by">jtolds</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36173801">parent</a><span>|</span><a href="#36174331">prev</a><span>|</span><a href="#36173655">next</a><span>|</span><label class="collapse" for="c-36173826">[-]</label><label class="expand" for="c-36173826">[5 more]</label></div><br/><div class="children"><div class="content">(piping up from another thread, but)<p>&gt; I&#x27;m very interested if you happen to know a cheaper alternative!<p>and<p>&gt; Optimally you&#x27;d want a distributed CDN<p><a href="https:&#x2F;&#x2F;www.storj.io&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.storj.io&#x2F;</a> is this thing!</div><br/><div id="36173856" class="c"><input type="checkbox" id="c-36173856" checked=""/><div class="controls bullet"><span class="by">n2d4</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36173826">parent</a><span>|</span><a href="#36173655">next</a><span>|</span><label class="collapse" for="c-36173856">[-]</label><label class="expand" for="c-36173856">[4 more]</label></div><br/><div class="children"><div class="content">Using the pricing from your other comment and the numbers from the parent, if I estimate correctly, Storj comes in at about $8k&#x2F;month? That&#x27;s cheaper than AWS (considering there are no CDN costs), roughly on the same level as Cloudflare and Backblaze, but still more than the entirety of NixOS Foundation&#x27;s (monthly) incoming funds in 2022.</div><br/><div id="36173880" class="c"><input type="checkbox" id="c-36173880" checked=""/><div class="controls bullet"><span class="by">jtolds</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36173856">parent</a><span>|</span><a href="#36173655">next</a><span>|</span><label class="collapse" for="c-36173880">[-]</label><label class="expand" for="c-36173880">[3 more]</label></div><br/><div class="children"><div class="content">According to <a href="https:&#x2F;&#x2F;discourse.nixos.org&#x2F;t&#x2F;nixos-foundations-financial-summary-a-transparent-look-into-2022&#x2F;28107&#x2F;16?u=jtolio" rel="nofollow">https:&#x2F;&#x2F;discourse.nixos.org&#x2F;t&#x2F;nixos-foundations-financial-su...</a>, they have 450TB and 29.5TB of S3 egress&#x2F;month. By my math, assuming the Nix Foundation goes in through our front door, talks to no sales people, and pays list price, that&#x27;s $2k&#x2F;month.</div><br/><div id="36173916" class="c"><input type="checkbox" id="c-36173916" checked=""/><div class="controls bullet"><span class="by">n2d4</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36173880">parent</a><span>|</span><a href="#36173655">next</a><span>|</span><label class="collapse" for="c-36173916">[-]</label><label class="expand" for="c-36173916">[2 more]</label></div><br/><div class="children"><div class="content">You would replace the Fastly CDN with Storj, correct? Your link mentions 1500TB of Fastly traffic, which would cost $12k with Storj. Not sure if this is related to parent&#x27;s 3TB&#x2F;day number, but I went with that when I estimated the $8k.<p>I think the best cloud solution might be something like Storj + Fastly or Cloudflare end-to-end. But I&#x27;m really curious how much could be chopped off if you tried to solve this on-prem.</div><br/><div id="36173964" class="c"><input type="checkbox" id="c-36173964" checked=""/><div class="controls bullet"><span class="by">jtolds</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36173916">parent</a><span>|</span><a href="#36173655">next</a><span>|</span><label class="collapse" for="c-36173964">[-]</label><label class="expand" for="c-36173964">[1 more]</label></div><br/><div class="children"><div class="content">Storj + Fastly is genuinely a pretty good combo. There are certainly some things Fastly does that we don&#x27;t do (besides being more specifically a CDN, they also have compute@edge, etc). We have a good relationship with Fastly (e.g. <a href="https:&#x2F;&#x2F;docs.fastly.com&#x2F;en&#x2F;guides&#x2F;log-streaming-storj-dcs" rel="nofollow">https:&#x2F;&#x2F;docs.fastly.com&#x2F;en&#x2F;guides&#x2F;log-streaming-storj-dcs</a>)<p>But yeah, I don&#x27;t know how the Nix Foundation is getting their Fastly traffic paid for, maybe that&#x27;s in&#x2F;out of scope. Certainly they should keep Fastly if it makes the overall thing cheaper. Having a distributed origin (us) to dedicated edge cache (Fastly) makes for a strong distribution story.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="36173655" class="c"><input type="checkbox" id="c-36173655" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#36173391">parent</a><span>|</span><a href="#36173801">prev</a><span>|</span><a href="#36173991">next</a><span>|</span><label class="collapse" for="c-36173655">[-]</label><label class="expand" for="c-36173655">[2 more]</label></div><br/><div class="children"><div class="content">&gt; they put themselves in this position<p>You say this like they&#x27;re hopeless.</div><br/><div id="36174736" class="c"><input type="checkbox" id="c-36174736" checked=""/><div class="controls bullet"><span class="by">simonjgreen</span><span>|</span><a href="#36173391">root</a><span>|</span><a href="#36173655">parent</a><span>|</span><a href="#36173991">next</a><span>|</span><label class="collapse" for="c-36174736">[-]</label><label class="expand" for="c-36174736">[1 more]</label></div><br/><div class="children"><div class="content">I think the implication is either naive or wilfully ignorant, rather than hopeless</div><br/></div></div></div></div><div id="36173991" class="c"><input type="checkbox" id="c-36173991" checked=""/><div class="controls bullet"><span class="by">tstrimple</span><span>|</span><a href="#36173391">parent</a><span>|</span><a href="#36173655">prev</a><span>|</span><a href="#36173587">next</a><span>|</span><label class="collapse" for="c-36173991">[-]</label><label class="expand" for="c-36173991">[1 more]</label></div><br/><div class="children"><div class="content">&gt; That&#x27;s nothing, unless you&#x27;re &quot;saving money by using the cloud&quot;.<p>I&#x27;ve helped a number of clients save money by using the cloud. It&#x27;s not that hard when you use the tools for the purposes they are suited for. It&#x27;s not the hammer&#x27;s fault that it does a poor job of pounding in that screw. At some point the &quot;craftsman&quot; needs to take the time to learn what their tools do and what they are best used for.</div><br/></div></div></div></div><div id="36173587" class="c"><input type="checkbox" id="c-36173587" checked=""/><div class="controls bullet"><span class="by">jtolds</span><span>|</span><a href="#36173391">prev</a><span>|</span><a href="#36174287">next</a><span>|</span><label class="collapse" for="c-36173587">[-]</label><label class="expand" for="c-36173587">[16 more]</label></div><br/><div class="children"><div class="content">Cloudflyer (<a href="https:&#x2F;&#x2F;www.cloudflyer.io&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.cloudflyer.io&#x2F;</a>) offers free migrations from S3 to Storj. Storj is $4&#x2F;TB&#x2F;mo, $7&#x2F;TB egress. It&#x27;s decentralized storage, so the base functionality has CDN-like performance (no Cloudfront needed), and you don&#x27;t need to pay extra for multiregion redundancy.<p>I jumped on the Nix Foundation Matrix to try and help them directly, but for anyone reading this thread, Storj might be able to cut a zero off your storage costs. Check us out!<p>Full disclosure - I work for Storj. <a href="https:&#x2F;&#x2F;www.storj.io&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.storj.io&#x2F;</a></div><br/><div id="36174181" class="c"><input type="checkbox" id="c-36174181" checked=""/><div class="controls bullet"><span class="by">ChymeraXYZ</span><span>|</span><a href="#36173587">parent</a><span>|</span><a href="#36173990">next</a><span>|</span><label class="collapse" for="c-36174181">[-]</label><label class="expand" for="c-36174181">[2 more]</label></div><br/><div class="children"><div class="content">&quot;you’ll be paid in STORJ Token.&quot; <a href="https:&#x2F;&#x2F;www.storj.io&#x2F;node" rel="nofollow">https:&#x2F;&#x2F;www.storj.io&#x2F;node</a><p>This statement basically makes me unable to take this seriously.<p>At &quot;Egress Bandwidth $20&#x2F;TB&quot; it should pay off to buy up <i>all</i> the cheap hetzner servers and convert them to storj nodes. They would pay themselves back after 2 TB and then you are off making profit.<p>But wait, there is more:<p>They charge 7$ for egress bandwidth... How can they pay 20$ to the one providing the bandwidth. Oh, right they don&#x27;t actually pay the operator, they give you a crypto token.<p>So all in all paying for storj feels like supporting yet another crypto scheme.</div><br/><div id="36174435" class="c"><input type="checkbox" id="c-36174435" checked=""/><div class="controls bullet"><span class="by">jtolds</span><span>|</span><a href="#36173587">root</a><span>|</span><a href="#36174181">parent</a><span>|</span><a href="#36173990">next</a><span>|</span><label class="collapse" for="c-36174435">[-]</label><label class="expand" for="c-36174435">[1 more]</label></div><br/><div class="children"><div class="content">Certainly there are differing opinions about cryptocurrency in general.<p>In terms of &quot;does the math work&quot;, you&#x27;re absolutely right that charging $7&#x2F;TB and paying $20&#x2F;TB to our storage node operators is not sustainable. But it shouldn&#x27;t be a surprise that this was an intentional early subsidy to grow the supply side of the network. In an open system like ours, you see these business dynamics, whereas you might just not see them otherwise.<p>To be fully transparent, we are working to reduce that subsidy now that we&#x27;re hitting scale. You can see some of our conversations with our storage node operator community about this on our forum: <a href="https:&#x2F;&#x2F;forum.storj.io&#x2F;t&#x2F;announcement-changes-to-storj-node-payouts&#x2F;22338" rel="nofollow">https:&#x2F;&#x2F;forum.storj.io&#x2F;t&#x2F;announcement-changes-to-storj-node-...</a>. You can also see full network stats here: <a href="http:&#x2F;&#x2F;stats.storjshare.io&#x2F;" rel="nofollow">http:&#x2F;&#x2F;stats.storjshare.io&#x2F;</a></div><br/></div></div></div></div><div id="36173990" class="c"><input type="checkbox" id="c-36173990" checked=""/><div class="controls bullet"><span class="by">AnonC</span><span>|</span><a href="#36173587">parent</a><span>|</span><a href="#36174181">prev</a><span>|</span><a href="#36174349">next</a><span>|</span><label class="collapse" for="c-36173990">[-]</label><label class="expand" for="c-36173990">[2 more]</label></div><br/><div class="children"><div class="content">This seemed interesting, and I had a quick look at a few pages on the Storj website. The website looks like its geared towards the enterprise segment. At the same time, I didn’t see any prominent link to a comparison page. Comparing with Backblaze B2, Cloudflare R2, etc., would be quite useful.<p>On integrations, I see there’s a tech preview for Restic. Any plans to support Borg? Is there a platform roadmap available publicly? I’m primarily looking as a single user to store larger backups. The Storj pricing (only for storage, not for egress) seems to be a lot lower than that of rsync.net (even with the special HN Reader’s discount).</div><br/><div id="36174458" class="c"><input type="checkbox" id="c-36174458" checked=""/><div class="controls bullet"><span class="by">jtolds</span><span>|</span><a href="#36173587">root</a><span>|</span><a href="#36173990">parent</a><span>|</span><a href="#36174349">next</a><span>|</span><label class="collapse" for="c-36174458">[-]</label><label class="expand" for="c-36174458">[1 more]</label></div><br/><div class="children"><div class="content">This is really good feedback, thank you.<p>The platform roadmap is available here: <a href="https:&#x2F;&#x2F;github.com&#x2F;orgs&#x2F;storj&#x2F;projects&#x2F;23">https:&#x2F;&#x2F;github.com&#x2F;orgs&#x2F;storj&#x2F;projects&#x2F;23</a>. Good question about Borg. We are supported by rclone natively, and I&#x27;ve seen some success with people combing Borg and rclone. But that&#x27;s certainly something we can look into more.</div><br/></div></div></div></div><div id="36174349" class="c"><input type="checkbox" id="c-36174349" checked=""/><div class="controls bullet"><span class="by">ARandomerDude</span><span>|</span><a href="#36173587">parent</a><span>|</span><a href="#36173990">prev</a><span>|</span><a href="#36173628">next</a><span>|</span><label class="collapse" for="c-36174349">[-]</label><label class="expand" for="c-36174349">[2 more]</label></div><br/><div class="children"><div class="content">How do you convert Storj tokens to USD?</div><br/><div id="36174480" class="c"><input type="checkbox" id="c-36174480" checked=""/><div class="controls bullet"><span class="by">jtolds</span><span>|</span><a href="#36173587">root</a><span>|</span><a href="#36174349">parent</a><span>|</span><a href="#36173628">next</a><span>|</span><label class="collapse" for="c-36174480">[-]</label><label class="expand" for="c-36174480">[1 more]</label></div><br/><div class="children"><div class="content">As a customer of Storj, this isn&#x27;t something you&#x27;ll need to worry about. We&#x27;re integrated with Stripe and take credit cards and invoices. We will also take STORJ token if you want.<p>If you are looking to provide storage space to the network as a storage node operator, then your nearest reputable exchange should do the trick.</div><br/></div></div></div></div><div id="36173628" class="c"><input type="checkbox" id="c-36173628" checked=""/><div class="controls bullet"><span class="by">optymizer</span><span>|</span><a href="#36173587">parent</a><span>|</span><a href="#36174349">prev</a><span>|</span><a href="#36174440">next</a><span>|</span><label class="collapse" for="c-36173628">[-]</label><label class="expand" for="c-36173628">[6 more]</label></div><br/><div class="children"><div class="content">On an unrelated note, the Storj landing page spells the word &#x27;compatibility&#x27; wrong (&#x27;compatability&#x27;).</div><br/><div id="36173667" class="c"><input type="checkbox" id="c-36173667" checked=""/><div class="controls bullet"><span class="by">jtolds</span><span>|</span><a href="#36173587">root</a><span>|</span><a href="#36173628">parent</a><span>|</span><a href="#36174440">next</a><span>|</span><label class="collapse" for="c-36173667">[-]</label><label class="expand" for="c-36173667">[5 more]</label></div><br/><div class="children"><div class="content">ooh, that&#x27;s embarrassing. thanks for pointing that out. fixed now</div><br/><div id="36174010" class="c"><input type="checkbox" id="c-36174010" checked=""/><div class="controls bullet"><span class="by">AnonC</span><span>|</span><a href="#36173587">root</a><span>|</span><a href="#36173667">parent</a><span>|</span><a href="#36174440">next</a><span>|</span><label class="collapse" for="c-36174010">[-]</label><label class="expand" for="c-36174010">[4 more]</label></div><br/><div class="children"><div class="content">The same typo seems to be in other places too. I just noticed it in the Products submenu under Why Storj.</div><br/><div id="36174320" class="c"><input type="checkbox" id="c-36174320" checked=""/><div class="controls bullet"><span class="by">xgbi</span><span>|</span><a href="#36173587">root</a><span>|</span><a href="#36174010">parent</a><span>|</span><a href="#36174440">next</a><span>|</span><label class="collapse" for="c-36174320">[-]</label><label class="expand" for="c-36174320">[3 more]</label></div><br/><div class="children"><div class="content">And the canary &quot;shows&quot; that there&#x27;s been subpoenas served:<p><a href="https:&#x2F;&#x2F;www.storj.io&#x2F;canary.txt" rel="nofollow">https:&#x2F;&#x2F;www.storj.io&#x2F;canary.txt</a></div><br/><div id="36174453" class="c"><input type="checkbox" id="c-36174453" checked=""/><div class="controls bullet"><span class="by">AnonC</span><span>|</span><a href="#36173587">root</a><span>|</span><a href="#36174320">parent</a><span>|</span><a href="#36174440">next</a><span>|</span><label class="collapse" for="c-36174453">[-]</label><label class="expand" for="c-36174453">[2 more]</label></div><br/><div class="children"><div class="content">Oh, boy! It really begs the question if these are even trustworthy at all.</div><br/><div id="36174460" class="c"><input type="checkbox" id="c-36174460" checked=""/><div class="controls bullet"><span class="by">jtolds</span><span>|</span><a href="#36173587">root</a><span>|</span><a href="#36174453">parent</a><span>|</span><a href="#36174440">next</a><span>|</span><label class="collapse" for="c-36174460">[-]</label><label class="expand" for="c-36174460">[1 more]</label></div><br/><div class="children"><div class="content">Here&#x27;s the HN conversation about that: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=34192336" rel="nofollow">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=34192336</a></div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="36174440" class="c"><input type="checkbox" id="c-36174440" checked=""/><div class="controls bullet"><span class="by">mattbee</span><span>|</span><a href="#36173587">parent</a><span>|</span><a href="#36173628">prev</a><span>|</span><a href="#36173769">next</a><span>|</span><label class="collapse" for="c-36174440">[-]</label><label class="expand" for="c-36174440">[2 more]</label></div><br/><div class="children"><div class="content">Why not offer to sponsor them and cut all the zeroes? When I built a hosting business that was most of our marketing and it worked really well.</div><br/><div id="36174466" class="c"><input type="checkbox" id="c-36174466" checked=""/><div class="controls bullet"><span class="by">jtolds</span><span>|</span><a href="#36173587">root</a><span>|</span><a href="#36174440">parent</a><span>|</span><a href="#36173769">next</a><span>|</span><label class="collapse" for="c-36174466">[-]</label><label class="expand" for="c-36174466">[1 more]</label></div><br/><div class="children"><div class="content">We&#x27;re hoping they respond to some of our reach outs for a deeper discussion! But if for some reason you&#x27;re reading this here, NixOS Foundation folks, my email is in my profile!</div><br/></div></div></div></div><div id="36173769" class="c"><input type="checkbox" id="c-36173769" checked=""/><div class="controls bullet"><span class="by">PlaneSploit</span><span>|</span><a href="#36173587">parent</a><span>|</span><a href="#36174440">prev</a><span>|</span><a href="#36174287">next</a><span>|</span><label class="collapse" for="c-36173769">[-]</label><label class="expand" for="c-36173769">[1 more]</label></div><br/><div class="children"><div class="content">Perfect use case for Storj. I hope they take you up on that.</div><br/></div></div></div></div><div id="36174287" class="c"><input type="checkbox" id="c-36174287" checked=""/><div class="controls bullet"><span class="by">10000truths</span><span>|</span><a href="#36173587">prev</a><span>|</span><a href="#36173525">next</a><span>|</span><label class="collapse" for="c-36174287">[-]</label><label class="expand" for="c-36174287">[1 more]</label></div><br/><div class="children"><div class="content">Google and some napkin math tell me that this kind of workload should not be on the cloud.<p>A 4U or 8U rack server with 1 PB of storage and plenty of cores: ~$40K<p>Colo facilities in the Bay Area: $400-500&#x2F;mo<p>Compared against the status quo of $9K&#x2F;mo, the ROI ends up being 5 months per box, for twice the storage capacity they need. Set up multiple of those boxes around the world to the extent that you care about redundancy&#x2F;distribution, and they still end up far ahead in a few years time.</div><br/></div></div><div id="36173525" class="c"><input type="checkbox" id="c-36173525" checked=""/><div class="controls bullet"><span class="by">user6723</span><span>|</span><a href="#36174287">prev</a><span>|</span><a href="#36173326">next</a><span>|</span><label class="collapse" for="c-36173525">[-]</label><label class="expand" for="c-36173525">[6 more]</label></div><br/><div class="children"><div class="content">One of my colocated servers has 60TB of space to spare and has a 10gbe unmetered uplink on the provider&#x27;s IP-transit blend.<p>It is easy to configure traffic shaping on the box so that any unused upload bandwidth can be used without any impact to existing applications.<p>I would be happy to seed NixOS torrents. There is an extension to torrents where files can be added to a torrent after a torrent is released that might make sense to look at.</div><br/><div id="36174001" class="c"><input type="checkbox" id="c-36174001" checked=""/><div class="controls bullet"><span class="by">toastal</span><span>|</span><a href="#36173525">parent</a><span>|</span><a href="#36173326">next</a><span>|</span><label class="collapse" for="c-36174001">[-]</label><label class="expand" for="c-36174001">[5 more]</label></div><br/><div class="children"><div class="content">Makes you wonder why the whole protocol isn&#x27;t Bittorrent with users seeding their builds to others.</div><br/><div id="36174076" class="c"><input type="checkbox" id="c-36174076" checked=""/><div class="controls bullet"><span class="by">kortilla</span><span>|</span><a href="#36173525">root</a><span>|</span><a href="#36174001">parent</a><span>|</span><a href="#36174716">next</a><span>|</span><label class="collapse" for="c-36174076">[-]</label><label class="expand" for="c-36174076">[2 more]</label></div><br/><div class="children"><div class="content">Because the cloud movement in all of its hype stifled any investment in this area.</div><br/><div id="36174223" class="c"><input type="checkbox" id="c-36174223" checked=""/><div class="controls bullet"><span class="by">toastal</span><span>|</span><a href="#36173525">root</a><span>|</span><a href="#36174076">parent</a><span>|</span><a href="#36174716">next</a><span>|</span><label class="collapse" for="c-36174223">[-]</label><label class="expand" for="c-36174223">[1 more]</label></div><br/><div class="children"><div class="content">I believe it. I foresee a lot of holes being dug for projects buying into “the cloud” and “the edge”.</div><br/></div></div></div></div><div id="36174716" class="c"><input type="checkbox" id="c-36174716" checked=""/><div class="controls bullet"><span class="by">heavyset_go</span><span>|</span><a href="#36173525">root</a><span>|</span><a href="#36174001">parent</a><span>|</span><a href="#36174076">prev</a><span>|</span><a href="#36174468">next</a><span>|</span><label class="collapse" for="c-36174716">[-]</label><label class="expand" for="c-36174716">[1 more]</label></div><br/><div class="children"><div class="content">At one point there were BitTorrent transports for Debian&#x27;s apt.</div><br/></div></div><div id="36174468" class="c"><input type="checkbox" id="c-36174468" checked=""/><div class="controls bullet"><span class="by">ritchiey</span><span>|</span><a href="#36173525">root</a><span>|</span><a href="#36174001">parent</a><span>|</span><a href="#36174716">prev</a><span>|</span><a href="#36173326">next</a><span>|</span><label class="collapse" for="c-36174468">[-]</label><label class="expand" for="c-36174468">[1 more]</label></div><br/><div class="children"><div class="content">The reason usually cited for why not BitTorrent for software packages is because it makes public what package versions you have and haven’t downloaded.<p>This information could be useful to an attacker.</div><br/></div></div></div></div></div></div><div id="36173326" class="c"><input type="checkbox" id="c-36173326" checked=""/><div class="controls bullet"><span class="by">heavyset_go</span><span>|</span><a href="#36173525">prev</a><span>|</span><a href="#36174056">next</a><span>|</span><label class="collapse" for="c-36173326">[-]</label><label class="expand" for="c-36173326">[27 more]</label></div><br/><div class="children"><div class="content">S3&#x27;s costs are insane for this use case, can&#x27;t imagine using it to for a Linux distribution&#x27;s repositories.<p>edit: Oh man, there&#x27;s potentially a $32k migration fee to pay for S3 egress, as well.</div><br/><div id="36173432" class="c"><input type="checkbox" id="c-36173432" checked=""/><div class="controls bullet"><span class="by">scottlamb</span><span>|</span><a href="#36173326">parent</a><span>|</span><a href="#36173709">next</a><span>|</span><label class="collapse" for="c-36173432">[-]</label><label class="expand" for="c-36173432">[1 more]</label></div><br/><div class="children"><div class="content">&quot;We will cover egress and migration fees for customers migrating over 10 TB of data from US, Canada, and Europe regions, and storing it with us for at least 12 months.&quot; - <a href="https:&#x2F;&#x2F;www.backblaze.com&#x2F;b2&#x2F;c2c-migration.html" rel="nofollow">https:&#x2F;&#x2F;www.backblaze.com&#x2F;b2&#x2F;c2c-migration.html</a><p>Also free egress from Backblaze to CDNs (Cloudflare or Fastly).</div><br/></div></div><div id="36173709" class="c"><input type="checkbox" id="c-36173709" checked=""/><div class="controls bullet"><span class="by">mythz</span><span>|</span><a href="#36173326">parent</a><span>|</span><a href="#36173432">prev</a><span>|</span><a href="#36173454">next</a><span>|</span><label class="collapse" for="c-36173709">[-]</label><label class="expand" for="c-36173709">[3 more]</label></div><br/><div class="children"><div class="content">Hopefully France is successful in suing AWS for their anti competitive Egress fees. Either way we&#x27;ve avoided any potential land mines like this by switching to Cloudflare R2.</div><br/><div id="36174475" class="c"><input type="checkbox" id="c-36174475" checked=""/><div class="controls bullet"><span class="by">supriyo-biswas</span><span>|</span><a href="#36173326">root</a><span>|</span><a href="#36173709">parent</a><span>|</span><a href="#36174459">next</a><span>|</span><label class="collapse" for="c-36174475">[-]</label><label class="expand" for="c-36174475">[1 more]</label></div><br/><div class="children"><div class="content">Ofcom in the UK has proposed an investigation of the big three cloud providers&#x27; services for high egress fees[1].<p>[1] <a href="https:&#x2F;&#x2F;www.ofcom.org.uk&#x2F;news-centre&#x2F;2023&#x2F;ofcom-proposes-to-refer-uk-cloud-market-for-investigation" rel="nofollow">https:&#x2F;&#x2F;www.ofcom.org.uk&#x2F;news-centre&#x2F;2023&#x2F;ofcom-proposes-to-...</a></div><br/></div></div><div id="36174459" class="c"><input type="checkbox" id="c-36174459" checked=""/><div class="controls bullet"><span class="by">sitkack</span><span>|</span><a href="#36173326">root</a><span>|</span><a href="#36173709">parent</a><span>|</span><a href="#36174475">prev</a><span>|</span><a href="#36173454">next</a><span>|</span><label class="collapse" for="c-36174459">[-]</label><label class="expand" for="c-36174459">[1 more]</label></div><br/><div class="children"><div class="content">Why just AWS, Google <i>leases</i> dark fiber to the other telcos, it basically runs the entire internet. That it charges egress fees at all is kinda nuts. They make 100% profit (more) on your egress from GCP.</div><br/></div></div></div></div><div id="36173454" class="c"><input type="checkbox" id="c-36173454" checked=""/><div class="controls bullet"><span class="by">pxc</span><span>|</span><a href="#36173326">parent</a><span>|</span><a href="#36173709">prev</a><span>|</span><a href="#36173342">next</a><span>|</span><label class="collapse" for="c-36173454">[-]</label><label class="expand" for="c-36173454">[18 more]</label></div><br/><div class="children"><div class="content">&gt; Oh man, there&#x27;s potentially a $32k migration fee to pay for S3 egress, as well.<p>I&#x27;ve known about this for a while, but never bothered to ask. Why is that kind of fee even legal? Is there anything pro-social or valuable about that kind of business practice?</div><br/><div id="36173637" class="c"><input type="checkbox" id="c-36173637" checked=""/><div class="controls bullet"><span class="by">cyberax</span><span>|</span><a href="#36173326">root</a><span>|</span><a href="#36173454">parent</a><span>|</span><a href="#36173664">next</a><span>|</span><label class="collapse" for="c-36173637">[-]</label><label class="expand" for="c-36173637">[5 more]</label></div><br/><div class="children"><div class="content">Why should it be _illegal_? AWS egress fees are clearly documented, it&#x27;s not like they are some kind of hidden deceptive fee.<p>Companies are free to impose whatever fees they want. You can simply just choose to not have business relationships with them. Monopolies complicate the question, but AWS is not a monopoly.</div><br/><div id="36174081" class="c"><input type="checkbox" id="c-36174081" checked=""/><div class="controls bullet"><span class="by">zarzavat</span><span>|</span><a href="#36173326">root</a><span>|</span><a href="#36173637">parent</a><span>|</span><a href="#36174479">next</a><span>|</span><label class="collapse" for="c-36174081">[-]</label><label class="expand" for="c-36174081">[3 more]</label></div><br/><div class="children"><div class="content">Because it may be viewed as an anti-competitive business practice intended to prevent customers from switching providers.<p>Yes, AWS’s <i>customers</i> knew what they were signing up for, but AWS’s competitors and potential competitors have a right to enter the market and compete with AWS, and they can’t do that effectively if AWS is hoarding all the customers with punitive switching fees.</div><br/><div id="36174274" class="c"><input type="checkbox" id="c-36174274" checked=""/><div class="controls bullet"><span class="by">cyberax</span><span>|</span><a href="#36173326">root</a><span>|</span><a href="#36174081">parent</a><span>|</span><a href="#36174479">next</a><span>|</span><label class="collapse" for="c-36174274">[-]</label><label class="expand" for="c-36174274">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Because it may be viewed as an anti-competitive business practice intended to prevent customers from switching providers.<p>S3 egress rates do not prevent you from switching. Transferring out data costs about the same as 3 months of regular storage.<p>&gt; AWS is hoarding all the customers with punitive switching fees.<p>The fees are not punitive. The Internet egress fees are similar to inter-region transfer fees within AWS itself.</div><br/><div id="36174487" class="c"><input type="checkbox" id="c-36174487" checked=""/><div class="controls bullet"><span class="by">sitkack</span><span>|</span><a href="#36173326">root</a><span>|</span><a href="#36174274">parent</a><span>|</span><a href="#36174479">next</a><span>|</span><label class="collapse" for="c-36174487">[-]</label><label class="expand" for="c-36174487">[1 more]</label></div><br/><div class="children"><div class="content">Sounds like a libertarian trope. Their house, their rules.<p>AWS and all the clouds are <i>too</i> big. They structure prices to milk the most of their captured customers. They all price their products within parity, so on the whole there isn&#x27;t a <i>huge</i> difference in moving. This also makes a nice natural churn between them. The clouds themselves offer almost no innovation in the computing space.<p>You know who the real rubes are? Everyone else, chip manufacturers, storage, etc. They all made commodity things using shared protocols and people are just pissing it away.  And this sht replacing everything is worse than the stuff getting recycled, hardware, ideas, all of it.</div><br/></div></div></div></div></div></div><div id="36174479" class="c"><input type="checkbox" id="c-36174479" checked=""/><div class="controls bullet"><span class="by">Y_Y</span><span>|</span><a href="#36173326">root</a><span>|</span><a href="#36173637">parent</a><span>|</span><a href="#36174081">prev</a><span>|</span><a href="#36173664">next</a><span>|</span><label class="collapse" for="c-36174479">[-]</label><label class="expand" for="c-36174479">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Companies are free to impose whatever fees they want. You can simply just choose to not have business relationships with them.<p>Maybe in libertarian paradise, but this line gets parroted a lot for something so patently untrue. Even in the US there are plenty of laws that rightfully limit the freedom of vendors for the benefit of consumers.</div><br/></div></div></div></div><div id="36173664" class="c"><input type="checkbox" id="c-36173664" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#36173326">root</a><span>|</span><a href="#36173454">parent</a><span>|</span><a href="#36173637">prev</a><span>|</span><a href="#36173585">next</a><span>|</span><label class="collapse" for="c-36173664">[-]</label><label class="expand" for="c-36173664">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not like AWS charges specifically for export.<p>This is their &quot;normal&quot; egress fee. Maybe too high, but it&#x27;s not a &quot;gotcha&quot; that applies just to migrating away.</div><br/></div></div><div id="36173585" class="c"><input type="checkbox" id="c-36173585" checked=""/><div class="controls bullet"><span class="by">dilyevsky</span><span>|</span><a href="#36173326">root</a><span>|</span><a href="#36173454">parent</a><span>|</span><a href="#36173664">prev</a><span>|</span><a href="#36174506">next</a><span>|</span><label class="collapse" for="c-36173585">[-]</label><label class="expand" for="c-36173585">[1 more]</label></div><br/><div class="children"><div class="content">Why would that be illegal? That’s just normal egress fee x GB stored. This is known in advance so anyone storing so much data in cloud is willingly putting themselves in this position</div><br/></div></div><div id="36174506" class="c"><input type="checkbox" id="c-36174506" checked=""/><div class="controls bullet"><span class="by">kbumsik</span><span>|</span><a href="#36173326">root</a><span>|</span><a href="#36173454">parent</a><span>|</span><a href="#36173585">prev</a><span>|</span><a href="#36173586">next</a><span>|</span><label class="collapse" for="c-36174506">[-]</label><label class="expand" for="c-36174506">[1 more]</label></div><br/><div class="children"><div class="content">Because the egress costs money actually.<p>Almost all cloud providers cost you for egress fee or have some limitations on egress, except Cloudflare.</div><br/></div></div><div id="36173586" class="c"><input type="checkbox" id="c-36173586" checked=""/><div class="controls bullet"><span class="by">ArchD</span><span>|</span><a href="#36173326">root</a><span>|</span><a href="#36173454">parent</a><span>|</span><a href="#36174506">prev</a><span>|</span><a href="#36173576">next</a><span>|</span><label class="collapse" for="c-36173586">[-]</label><label class="expand" for="c-36173586">[2 more]</label></div><br/><div class="children"><div class="content">Outbound traffic from S3 is not free. If the data is  emigrating, of course you need some outbound traffic.</div><br/><div id="36174491" class="c"><input type="checkbox" id="c-36174491" checked=""/><div class="controls bullet"><span class="by">sitkack</span><span>|</span><a href="#36173326">root</a><span>|</span><a href="#36173586">parent</a><span>|</span><a href="#36173576">next</a><span>|</span><label class="collapse" for="c-36174491">[-]</label><label class="expand" for="c-36174491">[1 more]</label></div><br/><div class="children"><div class="content">Why doesn&#x27;t it cost to go in?</div><br/></div></div></div></div><div id="36173576" class="c"><input type="checkbox" id="c-36173576" checked=""/><div class="controls bullet"><span class="by">irjustin</span><span>|</span><a href="#36173326">root</a><span>|</span><a href="#36173454">parent</a><span>|</span><a href="#36173586">prev</a><span>|</span><a href="#36173625">next</a><span>|</span><label class="collapse" for="c-36173576">[-]</label><label class="expand" for="c-36173576">[2 more]</label></div><br/><div class="children"><div class="content">I know we want to jump to hating aws but is there any info on the breakdown of this?<p>Like who is charging the amount? Is it all aws or is there a cloudflare portion? Part of it is paying an engineer&#x27;s time? How much data is being transferred?<p>If it was pure egress fees then it&#x27;s roughly ~350tb of data?</div><br/><div id="36173589" class="c"><input type="checkbox" id="c-36173589" checked=""/><div class="controls bullet"><span class="by">pizzafeelsright</span><span>|</span><a href="#36173326">root</a><span>|</span><a href="#36173576">parent</a><span>|</span><a href="#36173625">next</a><span>|</span><label class="collapse" for="c-36173589">[-]</label><label class="expand" for="c-36173589">[1 more]</label></div><br/><div class="children"><div class="content">$0.12 per gb<p>Four grand. It can be done cheaper over time.</div><br/></div></div></div></div><div id="36173625" class="c"><input type="checkbox" id="c-36173625" checked=""/><div class="controls bullet"><span class="by">foobarbecue</span><span>|</span><a href="#36173326">root</a><span>|</span><a href="#36173454">parent</a><span>|</span><a href="#36173576">prev</a><span>|</span><a href="#36173578">next</a><span>|</span><label class="collapse" for="c-36173625">[-]</label><label class="expand" for="c-36173625">[2 more]</label></div><br/><div class="children"><div class="content">It does seem like anti-competitive pricing.</div><br/><div id="36173995" class="c"><input type="checkbox" id="c-36173995" checked=""/><div class="controls bullet"><span class="by">speed_spread</span><span>|</span><a href="#36173326">root</a><span>|</span><a href="#36173625">parent</a><span>|</span><a href="#36173578">next</a><span>|</span><label class="collapse" for="c-36173995">[-]</label><label class="expand" for="c-36173995">[1 more]</label></div><br/><div class="children"><div class="content">If anything, it&#x27;s their own competitivity they&#x27;re harming.</div><br/></div></div></div></div><div id="36173578" class="c"><input type="checkbox" id="c-36173578" checked=""/><div class="controls bullet"><span class="by">driverdan</span><span>|</span><a href="#36173326">root</a><span>|</span><a href="#36173454">parent</a><span>|</span><a href="#36173625">prev</a><span>|</span><a href="#36173507">next</a><span>|</span><label class="collapse" for="c-36173578">[-]</label><label class="expand" for="c-36173578">[1 more]</label></div><br/><div class="children"><div class="content">Why would it be illegal? You agree to it when you sign up for the service. Don&#x27;t like it? Don&#x27;t use the service.</div><br/></div></div><div id="36173507" class="c"><input type="checkbox" id="c-36173507" checked=""/><div class="controls bullet"><span class="by">Waterluvian</span><span>|</span><a href="#36173326">root</a><span>|</span><a href="#36173454">parent</a><span>|</span><a href="#36173578">prev</a><span>|</span><a href="#36173342">next</a><span>|</span><label class="collapse" for="c-36173507">[-]</label><label class="expand" for="c-36173507">[2 more]</label></div><br/><div class="children"><div class="content">They should rebrand it Data Impound Lot.</div><br/></div></div></div></div><div id="36173342" class="c"><input type="checkbox" id="c-36173342" checked=""/><div class="controls bullet"><span class="by">bombcar</span><span>|</span><a href="#36173326">parent</a><span>|</span><a href="#36173454">prev</a><span>|</span><a href="#36174056">next</a><span>|</span><label class="collapse" for="c-36173342">[-]</label><label class="expand" for="c-36173342">[4 more]</label></div><br/><div class="children"><div class="content">At least use one of those s3 competitors with sane pricing.<p>GitHub? backblaze? Cloud flare?</div><br/><div id="36173381" class="c"><input type="checkbox" id="c-36173381" checked=""/><div class="controls bullet"><span class="by">mkl</span><span>|</span><a href="#36173326">root</a><span>|</span><a href="#36173342">parent</a><span>|</span><a href="#36174056">next</a><span>|</span><label class="collapse" for="c-36173381">[-]</label><label class="expand" for="c-36173381">[3 more]</label></div><br/><div class="children"><div class="content">&gt; same pricing<p>I think you meant &quot;sane&quot;?  Otherwise there&#x27;s not much point in switching.</div><br/><div id="36173833" class="c"><input type="checkbox" id="c-36173833" checked=""/><div class="controls bullet"><span class="by">bombcar</span><span>|</span><a href="#36173326">root</a><span>|</span><a href="#36173381">parent</a><span>|</span><a href="#36174056">next</a><span>|</span><label class="collapse" for="c-36173833">[-]</label><label class="expand" for="c-36173833">[2 more]</label></div><br/><div class="children"><div class="content">Yeah, that was an unfortunate typo.</div><br/><div id="36174499" class="c"><input type="checkbox" id="c-36174499" checked=""/><div class="controls bullet"><span class="by">sitkack</span><span>|</span><a href="#36173326">root</a><span>|</span><a href="#36173833">parent</a><span>|</span><a href="#36174056">next</a><span>|</span><label class="collapse" for="c-36174499">[-]</label><label class="expand" for="c-36174499">[1 more]</label></div><br/><div class="children"><div class="content">Some things can only be said as a joke or by accident or both.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="36174056" class="c"><input type="checkbox" id="c-36174056" checked=""/><div class="controls bullet"><span class="by">aidenn0</span><span>|</span><a href="#36173326">prev</a><span>|</span><a href="#36173494">next</a><span>|</span><label class="collapse" for="c-36174056">[-]</label><label class="expand" for="c-36174056">[1 more]</label></div><br/><div class="children"><div class="content">The only thing I wonder is how much space it would use if the nar files were stored without .xz and in a store that does smart deduplication.  Because of the way Nix works, there&#x27;s going to be a lot of e.g. ELF files that are nearly identical except for the rpath.</div><br/></div></div><div id="36173494" class="c"><input type="checkbox" id="c-36173494" checked=""/><div class="controls bullet"><span class="by">andrewstuart</span><span>|</span><a href="#36174056">prev</a><span>|</span><a href="#36174095">next</a><span>|</span><label class="collapse" for="c-36173494">[-]</label><label class="expand" for="c-36173494">[3 more]</label></div><br/><div class="children"><div class="content">2 days ago someone said they had thousands of dollars of AWS credits to use.<p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=36149966" rel="nofollow">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=36149966</a></div><br/><div id="36173617" class="c"><input type="checkbox" id="c-36173617" checked=""/><div class="controls bullet"><span class="by">supriyo-biswas</span><span>|</span><a href="#36173494">parent</a><span>|</span><a href="#36174095">next</a><span>|</span><label class="collapse" for="c-36173617">[-]</label><label class="expand" for="c-36173617">[2 more]</label></div><br/><div class="children"><div class="content">The sponsor could use this to enable a one-time migration out of S3, into something like Cloudflare R2.<p>1. The sponsor generates an IAM user and the corresponding access key to access objects in the NixOS buckets.<p>2. The NixOS operator grants access to said IAM user and (this is important) enables &quot;requester pays&quot; on the buckets so that the sponsor is billed.<p>3. The sponsor&#x27;s keys are added to Cloudflare R2, which pulls objects from S3 and stores them.</div><br/><div id="36174129" class="c"><input type="checkbox" id="c-36174129" checked=""/><div class="controls bullet"><span class="by">dizhn</span><span>|</span><a href="#36173494">root</a><span>|</span><a href="#36173617">parent</a><span>|</span><a href="#36174095">next</a><span>|</span><label class="collapse" for="c-36174129">[-]</label><label class="expand" for="c-36174129">[1 more]</label></div><br/><div class="children"><div class="content">I hope there&#x27;s no place there for error. It would suck if the gifter ends up with unused credits + a huge bill. :)</div><br/></div></div></div></div></div></div><div id="36174095" class="c"><input type="checkbox" id="c-36174095" checked=""/><div class="controls bullet"><span class="by">janosdebugs</span><span>|</span><a href="#36173494">prev</a><span>|</span><a href="#36173406">next</a><span>|</span><label class="collapse" for="c-36174095">[-]</label><label class="expand" for="c-36174095">[5 more]</label></div><br/><div class="children"><div class="content">Can someone please enlighten my uninformed self why NixOS needs to store this mindboggling amount of data and why it would be damaging to the research community specifically if it were to be lost? 9000$ a month is a LOT.</div><br/><div id="36174530" class="c"><input type="checkbox" id="c-36174530" checked=""/><div class="controls bullet"><span class="by">danieldk</span><span>|</span><a href="#36174095">parent</a><span>|</span><a href="#36174177">next</a><span>|</span><label class="collapse" for="c-36174530">[-]</label><label class="expand" for="c-36174530">[1 more]</label></div><br/><div class="children"><div class="content">Nix works quite differently compared to other distributions. If you have eg. the <i>hello</i> package in Debian it specifies that it is dependent on the <i>glibc</i> C library with some version range. You can install another version of glibc and the package manager will consider hello&#x27;s glibc dependency satisfied as long as it is within the version range.<p>In Nix on the other hand, a particular hello package&#x2F;binary will be dependent on the glibc that it is built with. That doesn&#x27;t mean just the same glibc version, even if you&#x27;d change something like glibc&#x27;s build flags it&#x27;d be considered a different version [1]. One of the benefits is reproducibility. If you build hello from the same nixpkgs revision as I do (barring any impurities), you&#x27;ll have exactly the same hello with the same transitive dependencies.<p>Now, with hello this may not matter as much, because it&#x27;s a simple program and glibc is fairly stable. But now imagine that you are doing some machine learning project and you want to provide a reproducible machine learning experiment. Building on a typical packaging ecosystem (eg. pip) is like building on quicksand. There are all kinds of subtle behaviors that can change and influence your experiment (eg. you machine learning library rewrites some compute kernels, and the small numerical differences pile up after a large number of layers). Though usually it ends at: my system has Python 3.11 and this experiment requires an old PyTorch version that was only built for Python 3.5 and earlier. The Nix approach gives you the benefit of pinning almost the whole world - your experiment and all its transitive dependencies.<p>Suppose you have a package repository like nixpkgs or Debian that contains tens of thousands of packages that are continuously updated. In Debian, if glibc is updated, it gets rebuilt and you are done. glibc has a stable ABI, so packages that were built against the previous glibc version don&#x27;t need to be rebuilt. In nixpkgs if glibc is updated, every package that uses glibc needs to be rebuilt due to Nix&#x27; use of exact dependencies. And this is true for almost all non-leaf packages --- a package update requires all packages that are (transitively) dependent on that package to be rebuilt. And you need to store all these builds, so that users can download them, otherwise their machines need to rebuild the packages on every update. This is how you end up with a gigantic binary cache.<p>[1] This is a bit different now that Nix supports content-addressing for non-fixed output derivations.</div><br/></div></div><div id="36174177" class="c"><input type="checkbox" id="c-36174177" checked=""/><div class="controls bullet"><span class="by">asdfaoeu</span><span>|</span><a href="#36174095">parent</a><span>|</span><a href="#36174530">prev</a><span>|</span><a href="#36173406">next</a><span>|</span><label class="collapse" for="c-36174177">[-]</label><label class="expand" for="c-36174177">[3 more]</label></div><br/><div class="children"><div class="content">In comparison it seems Debian is using 1&#x2F;100th of it <a href="https:&#x2F;&#x2F;www.debian.org&#x2F;mirror&#x2F;size" rel="nofollow">https:&#x2F;&#x2F;www.debian.org&#x2F;mirror&#x2F;size</a> .</div><br/><div id="36174513" class="c"><input type="checkbox" id="c-36174513" checked=""/><div class="controls bullet"><span class="by">znpy</span><span>|</span><a href="#36174095">root</a><span>|</span><a href="#36174177">parent</a><span>|</span><a href="#36173406">next</a><span>|</span><label class="collapse" for="c-36174513">[-]</label><label class="expand" for="c-36174513">[2 more]</label></div><br/><div class="children"><div class="content">I guess that reflects the fact that debian is a distro from another time, when you had to be mindful of the resources you consumed.<p>But i too wonder if they really have to keep everything around.</div><br/><div id="36174609" class="c"><input type="checkbox" id="c-36174609" checked=""/><div class="controls bullet"><span class="by">kaba0</span><span>|</span><a href="#36174095">root</a><span>|</span><a href="#36174513">parent</a><span>|</span><a href="#36173406">next</a><span>|</span><label class="collapse" for="c-36174609">[-]</label><label class="expand" for="c-36174609">[1 more]</label></div><br/><div class="children"><div class="content">One has hard dependencies with Nix, so a modification down the line will cause a cascading recompilation.<p>As mentioned, you doesn’t have to, but it has great value to be able to checkout any version.</div><br/></div></div></div></div></div></div></div></div><div id="36173406" class="c"><input type="checkbox" id="c-36173406" checked=""/><div class="controls bullet"><span class="by">botanical</span><span>|</span><a href="#36174095">prev</a><span>|</span><a href="#36174831">next</a><span>|</span><label class="collapse" for="c-36173406">[-]</label><label class="expand" for="c-36173406">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve never heard of LogicBlox but they were sponsoring $9000 a month? That&#x27;s crazy, normally even big sponsors will give a once-off $5000. Well, well done to them</div><br/><div id="36173430" class="c"><input type="checkbox" id="c-36173430" checked=""/><div class="controls bullet"><span class="by">pxc</span><span>|</span><a href="#36173406">parent</a><span>|</span><a href="#36174831">next</a><span>|</span><label class="collapse" for="c-36173430">[-]</label><label class="expand" for="c-36173430">[1 more]</label></div><br/><div class="children"><div class="content">The author and lead maintainer of Nix used to work there for some years, as well. Maybe he pushed for it, or maybe they saw both things as similar kinds of investments in their stack.</div><br/></div></div></div></div><div id="36174831" class="c"><input type="checkbox" id="c-36174831" checked=""/><div class="controls bullet"><span class="by">lsca94</span><span>|</span><a href="#36173406">prev</a><span>|</span><a href="#36173632">next</a><span>|</span><label class="collapse" for="c-36174831">[-]</label><label class="expand" for="c-36174831">[1 more]</label></div><br/><div class="children"><div class="content">I would suggest them a service like wasabi.com. There they wouldn‘t pay the egress traffic only the used storage. But yeah probably the best solutions would be cloudflare if they manage to get the OSS sponsorship.</div><br/></div></div><div id="36173632" class="c"><input type="checkbox" id="c-36173632" checked=""/><div class="controls bullet"><span class="by">rglullis</span><span>|</span><a href="#36174831">prev</a><span>|</span><a href="#36174031">next</a><span>|</span><label class="collapse" for="c-36173632">[-]</label><label class="expand" for="c-36173632">[2 more]</label></div><br/><div class="children"><div class="content">That seems like the perfect use case for IPFS. I can even bet that if the people at the NixOS foundation played their cards right, they could get the Filecoin bag holders to <i>pay</i> for the development of this new feature.</div><br/><div id="36173961" class="c"><input type="checkbox" id="c-36173961" checked=""/><div class="controls bullet"><span class="by">__MatrixMan__</span><span>|</span><a href="#36173632">parent</a><span>|</span><a href="#36174031">next</a><span>|</span><label class="collapse" for="c-36173961">[-]</label><label class="expand" for="c-36173961">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s in the works: <a href="https:&#x2F;&#x2F;discourse.nixos.org&#x2F;t&#x2F;obsidian-systems-is-excited-to-bring-ipfs-support-to-nix&#x2F;7375&#x2F;47?page=2" rel="nofollow">https:&#x2F;&#x2F;discourse.nixos.org&#x2F;t&#x2F;obsidian-systems-is-excited-to...</a></div><br/></div></div></div></div><div id="36174031" class="c"><input type="checkbox" id="c-36174031" checked=""/><div class="controls bullet"><span class="by">predictabl3</span><span>|</span><a href="#36173632">prev</a><span>|</span><a href="#36173303">next</a><span>|</span><label class="collapse" for="c-36174031">[-]</label><label class="expand" for="c-36174031">[1 more]</label></div><br/><div class="children"><div class="content">Personally, I&#x27;ll shovel money to the TVL folks for tvix-store before I give a single penny that might end up in Amazon&#x27;s pocket for S3 hosting...</div><br/></div></div><div id="36173303" class="c"><input type="checkbox" id="c-36173303" checked=""/><div class="controls bullet"><span class="by">justahuman74</span><span>|</span><a href="#36174031">prev</a><span>|</span><a href="#36173426">next</a><span>|</span><label class="collapse" for="c-36173303">[-]</label><label class="expand" for="c-36173303">[9 more]</label></div><br/><div class="children"><div class="content">The nix store seems on the face of it like a perfect use case for something like IPFS</div><br/><div id="36174195" class="c"><input type="checkbox" id="c-36174195" checked=""/><div class="controls bullet"><span class="by">hamandcheese</span><span>|</span><a href="#36173303">parent</a><span>|</span><a href="#36174084">next</a><span>|</span><label class="collapse" for="c-36174195">[-]</label><label class="expand" for="c-36174195">[3 more]</label></div><br/><div class="children"><div class="content">Unfortunately it currently isn&#x27;t, because nix packages are not content addressed. They are &quot;input addressed&quot;, which means that when requesting the contents of a derivation, you have to trust the source to give you the right bytes.<p>There are efforts underway to make things content addressed. This doesn&#x27;t solve the trust problem -- you still have to trust someone to tell you which inputs map to which content address -- but it does help with the distribution problem. Mirrors no longer have to be trusted. Trust and distribution become decoupled.</div><br/><div id="36174539" class="c"><input type="checkbox" id="c-36174539" checked=""/><div class="controls bullet"><span class="by">sitkack</span><span>|</span><a href="#36173303">root</a><span>|</span><a href="#36174195">parent</a><span>|</span><a href="#36174084">next</a><span>|</span><label class="collapse" for="c-36174539">[-]</label><label class="expand" for="c-36174539">[2 more]</label></div><br/><div class="children"><div class="content">If you went &quot;meta-nix&quot; and had a nix package hierarchy that was just constructed out of operations and inline literal binary blocks, then the results of those purely functional operations (splice, insert, f(n), swap, etc) could be content-addressed and deduplicated.<p>Views of purely functional data transformations of f_tran(n)(addr_start:addr_end), but if you symbolize it you, you make it generic. The problem is that Nix isn&#x27;t Haskell enough.<p>It also sounds like if they stored the cache on a deduping file system that their storage costs would plummet.</div><br/><div id="36174628" class="c"><input type="checkbox" id="c-36174628" checked=""/><div class="controls bullet"><span class="by">kaba0</span><span>|</span><a href="#36173303">root</a><span>|</span><a href="#36174539">parent</a><span>|</span><a href="#36174084">next</a><span>|</span><label class="collapse" for="c-36174628">[-]</label><label class="expand" for="c-36174628">[1 more]</label></div><br/><div class="children"><div class="content">&gt; If you went &quot;meta-nix&quot; and had a nix package hierarchy that was just constructed out of operations and inline literal binary blocks, then the results of those purely functional operations (splice, insert, f(n), swap, etc) could be content-addressed and deduplicated.<p>How do you build with an arbitrary build tool then? You have to call out to gcc&#x2F;any other compiler in the process.</div><br/></div></div></div></div></div></div><div id="36174084" class="c"><input type="checkbox" id="c-36174084" checked=""/><div class="controls bullet"><span class="by">shp0ngle</span><span>|</span><a href="#36173303">parent</a><span>|</span><a href="#36174195">prev</a><span>|</span><a href="#36174118">next</a><span>|</span><label class="collapse" for="c-36174084">[-]</label><label class="expand" for="c-36174084">[1 more]</label></div><br/><div class="children"><div class="content">IPFS in not magic you can just sprinkle on things, say “p2p! decentralised!” and be done.<p>you still need either pay someone to “pin it”, which is more expensive than dumping it on s3. Pinning services (that’s a thing) are all sketchy (as the big ones are all somehow connected to NFTs) and if you do it yourself it’s actually harder than just storing it</div><br/></div></div><div id="36174118" class="c"><input type="checkbox" id="c-36174118" checked=""/><div class="controls bullet"><span class="by">esjeon</span><span>|</span><a href="#36173303">parent</a><span>|</span><a href="#36174084">prev</a><span>|</span><a href="#36173418">next</a><span>|</span><label class="collapse" for="c-36174118">[-]</label><label class="expand" for="c-36174118">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, it doesn&#x27;t make sense for the team to keep hosting every single state of the distro, just to boost building some random dudes&#x27; old&#x2F;peculiar setup. It&#x27;s almost like Nix team is providing an artifact hosting service. Nix team should expire old versions from their repository, and let people pin what they need on IPFS.</div><br/></div></div><div id="36173418" class="c"><input type="checkbox" id="c-36173418" checked=""/><div class="controls bullet"><span class="by">pxc</span><span>|</span><a href="#36173303">parent</a><span>|</span><a href="#36174118">prev</a><span>|</span><a href="#36173437">next</a><span>|</span><label class="collapse" for="c-36173418">[-]</label><label class="expand" for="c-36173418">[1 more]</label></div><br/><div class="children"><div class="content">There has been work ongoing to support this in Nix for a long time, actually. Maybe this will help push that effort along, or direct more resources towards it.<p>See: <a href="https:&#x2F;&#x2F;github.com&#x2F;NixOS&#x2F;rfcs&#x2F;pull&#x2F;133">https:&#x2F;&#x2F;github.com&#x2F;NixOS&#x2F;rfcs&#x2F;pull&#x2F;133</a></div><br/></div></div><div id="36173437" class="c"><input type="checkbox" id="c-36173437" checked=""/><div class="controls bullet"><span class="by">nlitened</span><span>|</span><a href="#36173303">parent</a><span>|</span><a href="#36173418">prev</a><span>|</span><a href="#36173346">next</a><span>|</span><label class="collapse" for="c-36173437">[-]</label><label class="expand" for="c-36173437">[1 more]</label></div><br/><div class="children"><div class="content">Or torrents</div><br/></div></div><div id="36173346" class="c"><input type="checkbox" id="c-36173346" checked=""/><div class="controls bullet"><span class="by">rkeene2</span><span>|</span><a href="#36173303">parent</a><span>|</span><a href="#36173437">prev</a><span>|</span><a href="#36173426">next</a><span>|</span><label class="collapse" for="c-36173346">[-]</label><label class="expand" for="c-36173346">[1 more]</label></div><br/><div class="children"><div class="content">My AppFS project [0] is basically this, a content-addressable remote package-oriented system.<p>[0] <a href="https:&#x2F;&#x2F;AppFS.net&#x2F;" rel="nofollow">https:&#x2F;&#x2F;AppFS.net&#x2F;</a></div><br/></div></div></div></div><div id="36173426" class="c"><input type="checkbox" id="c-36173426" checked=""/><div class="controls bullet"><span class="by">poxrud</span><span>|</span><a href="#36173303">prev</a><span>|</span><a href="#36173249">next</a><span>|</span><label class="collapse" for="c-36173426">[-]</label><label class="expand" for="c-36173426">[1 more]</label></div><br/><div class="children"><div class="content">“That would incur a fixed cost of around $32k for the migration.”<p>They should consider Backblaze b2 if they want s3 api compatibility. Backblaze currently offers to cover the migration costs assuming some spend commitment.</div><br/></div></div><div id="36173249" class="c"><input type="checkbox" id="c-36173249" checked=""/><div class="controls bullet"><span class="by">LanternLight83</span><span>|</span><a href="#36173426">prev</a><span>|</span><a href="#36174757">next</a><span>|</span><label class="collapse" for="c-36173249">[-]</label><label class="expand" for="c-36173249">[16 more]</label></div><br/><div class="children"><div class="content">I get that it&#x27;s out of scope right now, but it&#x27;d be so cool to have a decentralized solution for regional caching</div><br/><div id="36174782" class="c"><input type="checkbox" id="c-36174782" checked=""/><div class="controls bullet"><span class="by">simonjgreen</span><span>|</span><a href="#36173249">parent</a><span>|</span><a href="#36174353">next</a><span>|</span><label class="collapse" for="c-36174782">[-]</label><label class="expand" for="c-36174782">[1 more]</label></div><br/><div class="children"><div class="content">Anycast BGP and Colo is the cheapest (and imo simplest) way</div><br/></div></div><div id="36174353" class="c"><input type="checkbox" id="c-36174353" checked=""/><div class="controls bullet"><span class="by">LanternLight83</span><span>|</span><a href="#36173249">parent</a><span>|</span><a href="#36174782">prev</a><span>|</span><a href="#36173261">next</a><span>|</span><label class="collapse" for="c-36174353">[-]</label><label class="expand" for="c-36174353">[1 more]</label></div><br/><div class="children"><div class="content">Just to clarify, the missing component in my mind is in mirror advertisement. The need for manual compilation and review is a hindrance to casual participants, we need a config option that you just toggle (maybe a configuration struct with eg. bandwidth limits) to opt-in to IPFS or GNUnet distribution of store items present on your system.</div><br/></div></div><div id="36173261" class="c"><input type="checkbox" id="c-36173261" checked=""/><div class="controls bullet"><span class="by">candiddevmike</span><span>|</span><a href="#36173249">parent</a><span>|</span><a href="#36174353">prev</a><span>|</span><a href="#36174757">next</a><span>|</span><label class="collapse" for="c-36173261">[-]</label><label class="expand" for="c-36173261">[13 more]</label></div><br/><div class="children"><div class="content">That&#x27;s basically what every other distro does, seems like nix&#x27;s architecture doesn&#x27;t support this?</div><br/><div id="36173352" class="c"><input type="checkbox" id="c-36173352" checked=""/><div class="controls bullet"><span class="by">slabity</span><span>|</span><a href="#36173249">root</a><span>|</span><a href="#36173261">parent</a><span>|</span><a href="#36173321">next</a><span>|</span><label class="collapse" for="c-36173352">[-]</label><label class="expand" for="c-36173352">[7 more]</label></div><br/><div class="children"><div class="content">It does. Nix has an extremely powerful (and flexible) caching system. Not to mention popular caching systems like cachix that are easy to integrate into your system.<p>Unlike most other packaging systems though, Nix packages are rebuilt when there&#x27;s changes to any of their dependencies. This results in a huge amount of storage data used in their caches compared to other systems. Not to mention the compute power required to rebuild those packages.<p>For example, let&#x27;s say something like `glibc` updated with a new patch. Every single package that has `glibc` as a dependency needs to be rebuilt, along with every package that has any of <i>those</i> packages as a dependency. This could easily cause the rebuild of tens of thousands of packages, even if they are only dynamically linking to it.</div><br/><div id="36174166" class="c"><input type="checkbox" id="c-36174166" checked=""/><div class="controls bullet"><span class="by">dizhn</span><span>|</span><a href="#36173249">root</a><span>|</span><a href="#36173352">parent</a><span>|</span><a href="#36173405">next</a><span>|</span><label class="collapse" for="c-36174166">[-]</label><label class="expand" for="c-36174166">[1 more]</label></div><br/><div class="children"><div class="content">OpenSuse tumbleweed also has to do this. I don&#x27;t know what happens with NixOS in such cases but with tw we have to download and install all those new packages too. There has been 2 times in the last year we had to download 2-3 TB of packages.<p>While we&#x27;re talking about opensuse, perhaps there&#x27;s a way for them to exist on the opensuse build system?</div><br/></div></div><div id="36173405" class="c"><input type="checkbox" id="c-36173405" checked=""/><div class="controls bullet"><span class="by">pxc</span><span>|</span><a href="#36173249">root</a><span>|</span><a href="#36173352">parent</a><span>|</span><a href="#36174166">prev</a><span>|</span><a href="#36173321">next</a><span>|</span><label class="collapse" for="c-36173405">[-]</label><label class="expand" for="c-36173405">[5 more]</label></div><br/><div class="children"><div class="content">Maybe we should be using something like Guix grafts to save not just rebuild time, but space (and thus money).</div><br/><div id="36173504" class="c"><input type="checkbox" id="c-36173504" checked=""/><div class="controls bullet"><span class="by">slabity</span><span>|</span><a href="#36173249">root</a><span>|</span><a href="#36173405">parent</a><span>|</span><a href="#36173482">next</a><span>|</span><label class="collapse" for="c-36173504">[-]</label><label class="expand" for="c-36173504">[3 more]</label></div><br/><div class="children"><div class="content">Guix&#x27;s graft system is a hack specifically made to get security updates out ASAP. They should really only be seen as a last resort because it circumvents the primary benefit of using Guix as a functional build system (pure, reproducible builds). I&#x27;m not sure if Nix has a similar system.<p>IMHO I&#x27;d prefer to see compile-time caches like ccache or sccache be better integrated into Nix while still providing the guarantees that a functional build system provides. That alone would save <i>massive amounts</i> of compute power when rebuilding packages, as you&#x27;d essentially only need to recompile the files that change in a package. Not only on continuous build systems like Nix&#x27;s Hydra, but also when just rebuilding packages locally. This won&#x27;t solve the storage cost issue, but would definitely alleviate compute costs.</div><br/><div id="36173624" class="c"><input type="checkbox" id="c-36173624" checked=""/><div class="controls bullet"><span class="by">xyzzy_plugh</span><span>|</span><a href="#36173249">root</a><span>|</span><a href="#36173504">parent</a><span>|</span><a href="#36173482">next</a><span>|</span><label class="collapse" for="c-36173624">[-]</label><label class="expand" for="c-36173624">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been curious but haven&#x27;t seen any compile-time cache, even with an unsafe build. What&#x27;s the state of the art for this today?</div><br/><div id="36173924" class="c"><input type="checkbox" id="c-36173924" checked=""/><div class="controls bullet"><span class="by">slabity</span><span>|</span><a href="#36173249">root</a><span>|</span><a href="#36173624">parent</a><span>|</span><a href="#36173482">next</a><span>|</span><label class="collapse" for="c-36173924">[-]</label><label class="expand" for="c-36173924">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s possible to bring something like `ccache` into your system&#x27;s Nix sandbox. However, that change in the sandbox means all your packages have different hashes and you lose the ability to pull from upstream caches. The result would be rebuilding every single package when trying to update your system. Not a fun time.<p>The preferred way to do this is to override `stdenv` with `ccacheStdenv` on the individual packages that would actually benefit from the compile-time caching. Such as for large packages that you already have overrides for, or for nightly packages that get updated extremely frequently and don&#x27;t have the chance to be cached upstream (such as firefox-nightly). The NixOS Wiki has a pretty good article on this: <a href="https:&#x2F;&#x2F;nixos.wiki&#x2F;wiki&#x2F;CCache" rel="nofollow">https:&#x2F;&#x2F;nixos.wiki&#x2F;wiki&#x2F;CCache</a><p>I personally use this for any packages I override in an overlay to reduce build times significantly.</div><br/></div></div></div></div></div></div><div id="36173482" class="c"><input type="checkbox" id="c-36173482" checked=""/><div class="controls bullet"><span class="by">dlahoda</span><span>|</span><a href="#36173249">root</a><span>|</span><a href="#36173405">parent</a><span>|</span><a href="#36173504">prev</a><span>|</span><a href="#36173321">next</a><span>|</span><label class="collapse" for="c-36173482">[-]</label><label class="expand" for="c-36173482">[1 more]</label></div><br/><div class="children"><div class="content">nix has security patch tech.</div><br/></div></div></div></div></div></div><div id="36173321" class="c"><input type="checkbox" id="c-36173321" checked=""/><div class="controls bullet"><span class="by">1MachineElf</span><span>|</span><a href="#36173249">root</a><span>|</span><a href="#36173261">parent</a><span>|</span><a href="#36173352">prev</a><span>|</span><a href="#36173334">next</a><span>|</span><label class="collapse" for="c-36173321">[-]</label><label class="expand" for="c-36173321">[1 more]</label></div><br/><div class="children"><div class="content">But AWS S3 <i>is</i> decentralized - all objects are replicated across a region&#x27;s availability zones. &#x2F;s</div><br/></div></div><div id="36173318" class="c"><input type="checkbox" id="c-36173318" checked=""/><div class="controls bullet"><span class="by">anon291</span><span>|</span><a href="#36173249">root</a><span>|</span><a href="#36173261">parent</a><span>|</span><a href="#36173334">prev</a><span>|</span><a href="#36174757">next</a><span>|</span><label class="collapse" for="c-36173318">[-]</label><label class="expand" for="c-36173318">[3 more]</label></div><br/><div class="children"><div class="content">Nix supports mirroring. It&#x27;s pretty easy to set up your own mirror.</div><br/><div id="36173427" class="c"><input type="checkbox" id="c-36173427" checked=""/><div class="controls bullet"><span class="by">candiddevmike</span><span>|</span><a href="#36173249">root</a><span>|</span><a href="#36173318">parent</a><span>|</span><a href="#36174757">next</a><span>|</span><label class="collapse" for="c-36173427">[-]</label><label class="expand" for="c-36173427">[2 more]</label></div><br/><div class="children"><div class="content">Why are they not considering a decentralized mirrorlist?</div><br/><div id="36174536" class="c"><input type="checkbox" id="c-36174536" checked=""/><div class="controls bullet"><span class="by">danieldk</span><span>|</span><a href="#36173249">root</a><span>|</span><a href="#36173427">parent</a><span>|</span><a href="#36174757">next</a><span>|</span><label class="collapse" for="c-36174536">[-]</label><label class="expand" for="c-36174536">[1 more]</label></div><br/><div class="children"><div class="content">The storage requirements are too large for most potential mirrors. Nix is not like any regular Linux distribution.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="36174757" class="c"><input type="checkbox" id="c-36174757" checked=""/><div class="controls bullet"><span class="by">woopwoop24</span><span>|</span><a href="#36173249">prev</a><span>|</span><a href="#36173914">next</a><span>|</span><label class="collapse" for="c-36174757">[-]</label><label class="expand" for="c-36174757">[1 more]</label></div><br/><div class="children"><div class="content">tl:dr operating yourself around 6-10k€&#x2F;year fixed price for hosting the 500TB. 
If cloudflare offers to store that and operate it for free this is a no brainer for cloudfare R2, if the 32k migration is really a one time only cost.<p>i personally would invest in a solution which decreases or at least flattens the cost, when the storage needs increase, instead of the current linear curve. Biggest problem in &quot;cloud&quot; and biggest win in hosting yourself.<p>if you want to do it yourself i would probably think about something like this:<p>500TB with 20tb hdd&#x27;s are around 28 disks needed.
This will cost between 15-20.000€ per server(4U with sata&#x2F;sas controller and 36-40 disk chassis)<p>with no raid and high availability you will need 2 locations and 2 servers in a colocated setup. i would say colo will cost you 500-1000€ a month<p>Then you would use the cloudflare cdn with their OSS offering and be done with it.<p>initial cost 40k
operational cost + colo = around 6-12k&#x2F;year i would assume, if you have people nearby to do maintenance.</div><br/></div></div><div id="36173914" class="c"><input type="checkbox" id="c-36173914" checked=""/><div class="controls bullet"><span class="by">exabrial</span><span>|</span><a href="#36174757">prev</a><span>|</span><a href="#36173691">next</a><span>|</span><label class="collapse" for="c-36173914">[-]</label><label class="expand" for="c-36173914">[1 more]</label></div><br/><div class="children"><div class="content">You know, we used to solve these problems through organizations like the Apache Software Foundation and Eclipse Foundation....</div><br/></div></div><div id="36173691" class="c"><input type="checkbox" id="c-36173691" checked=""/><div class="controls bullet"><span class="by">fnordpiglet</span><span>|</span><a href="#36173914">prev</a><span>|</span><a href="#36174147">next</a><span>|</span><label class="collapse" for="c-36173691">[-]</label><label class="expand" for="c-36173691">[3 more]</label></div><br/><div class="children"><div class="content">I’m surprised aws doesn’t get in front of this and offer the s3 storage as a donation. It would be tax deductible at retail price, and generate good will. In fact I always thought they should open up storage for popular distributions of Linux and stuff like brew etc.</div><br/><div id="36173970" class="c"><input type="checkbox" id="c-36173970" checked=""/><div class="controls bullet"><span class="by">adobrawy</span><span>|</span><a href="#36173691">parent</a><span>|</span><a href="#36173710">next</a><span>|</span><label class="collapse" for="c-36173970">[-]</label><label class="expand" for="c-36173970">[1 more]</label></div><br/><div class="children"><div class="content">Here is info on how to apply for OSS sponsorship by AWS: <a href="https:&#x2F;&#x2F;aws.amazon.com&#x2F;blogs&#x2F;opensource&#x2F;aws-promotional-credits-open-source-projects&#x2F;" rel="nofollow">https:&#x2F;&#x2F;aws.amazon.com&#x2F;blogs&#x2F;opensource&#x2F;aws-promotional-cred...</a></div><br/></div></div><div id="36173710" class="c"><input type="checkbox" id="c-36173710" checked=""/><div class="controls bullet"><span class="by">cperciva</span><span>|</span><a href="#36173691">parent</a><span>|</span><a href="#36173970">prev</a><span>|</span><a href="#36174147">next</a><span>|</span><label class="collapse" for="c-36173710">[-]</label><label class="expand" for="c-36173710">[1 more]</label></div><br/><div class="children"><div class="content">AWS does provide sponsorship for some open source usage of their infrastructure.  They host some FreeBSD mirrors, for example.<p>I&#x27;ve reached out to a couple of my contacts to point them at this.</div><br/></div></div></div></div><div id="36174147" class="c"><input type="checkbox" id="c-36174147" checked=""/><div class="controls bullet"><span class="by">testemailfordg2</span><span>|</span><a href="#36173691">prev</a><span>|</span><a href="#36174102">next</a><span>|</span><label class="collapse" for="c-36174147">[-]</label><label class="expand" for="c-36174147">[2 more]</label></div><br/><div class="children"><div class="content">Maybe explore Wasabi, costs $5 per TB&#x2F;month with no egress costs
<a href="https:&#x2F;&#x2F;wasabi.com&#x2F;cloud-storage-pricing&#x2F;#three-info" rel="nofollow">https:&#x2F;&#x2F;wasabi.com&#x2F;cloud-storage-pricing&#x2F;#three-info</a><p>Can get cheaper as well if you go for reservered capacity model.</div><br/><div id="36174358" class="c"><input type="checkbox" id="c-36174358" checked=""/><div class="controls bullet"><span class="by">xgbi</span><span>|</span><a href="#36174147">parent</a><span>|</span><a href="#36174102">next</a><span>|</span><label class="collapse" for="c-36174358">[-]</label><label class="expand" for="c-36174358">[1 more]</label></div><br/><div class="children"><div class="content">It is only a good fit if the egress amount is less than total storage, as specified in their FAQ: <a href="https:&#x2F;&#x2F;wasabi.com&#x2F;paygo-pricing-faq&#x2F;#free-egress-policy" rel="nofollow">https:&#x2F;&#x2F;wasabi.com&#x2F;paygo-pricing-faq&#x2F;#free-egress-policy</a><p>&gt; For example, if you store 100 TB with Wasabi and download (egress) 100 TB or less within a monthly billing cycle, then your storage use case is a good fit for our policy. If your monthly downloads exceed 100 TB, then your use case is not a good fit.</div><br/></div></div></div></div><div id="36174102" class="c"><input type="checkbox" id="c-36174102" checked=""/><div class="controls bullet"><span class="by">hamandcheese</span><span>|</span><a href="#36174147">prev</a><span>|</span><a href="#36174714">next</a><span>|</span><label class="collapse" for="c-36174102">[-]</label><label class="expand" for="c-36174102">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Migrating the buckets to Cloudflare R2 52, and using the generous OSS sponsorship offer they recently announced 89. That would incur a fixed cost of around $32k for the migration.<p>I assume this is do to egress from S3. I wonder how that cost compares to re-generating the historic caches. Presumably that is possible with nix.</div><br/><div id="36174548" class="c"><input type="checkbox" id="c-36174548" checked=""/><div class="controls bullet"><span class="by">danieldk</span><span>|</span><a href="#36174102">parent</a><span>|</span><a href="#36174186">next</a><span>|</span><label class="collapse" for="c-36174548">[-]</label><label class="expand" for="c-36174548">[1 more]</label></div><br/><div class="children"><div class="content"><i>I assume this is do to egress from S3. I wonder how that cost compares to re-generating the historic caches. Presumably that is possible with nix.</i><p>One issue that you&#x27;ll run into is that many upstream source archives are not available anymore at the original URL. Though I think it should be possible to collect all fixed-output derivations and copy their outputs over to a new cache and then try to build. Once these are in the cache, Nix will not try to download the sources from the original location but use the binary cache instead.</div><br/></div></div><div id="36174186" class="c"><input type="checkbox" id="c-36174186" checked=""/><div class="controls bullet"><span class="by">8organicbits</span><span>|</span><a href="#36174102">parent</a><span>|</span><a href="#36174548">prev</a><span>|</span><a href="#36174714">next</a><span>|</span><label class="collapse" for="c-36174186">[-]</label><label class="expand" for="c-36174186">[1 more]</label></div><br/><div class="children"><div class="content">It may even be worth leaving historic data in S3, assuming it gets low enough traffic, then expire it once it&#x27;s too old.<p>Definitely look for ways to avoid egressing it all from S3.</div><br/></div></div></div></div><div id="36174714" class="c"><input type="checkbox" id="c-36174714" checked=""/><div class="controls bullet"><span class="by">1letterunixname</span><span>|</span><a href="#36174102">prev</a><span>|</span><a href="#36174099">next</a><span>|</span><label class="collapse" for="c-36174714">[-]</label><label class="expand" for="c-36174714">[1 more]</label></div><br/><div class="children"><div class="content">When you reach scale and need a CDN, DIY on bare metal on colo and roundrobin using AnyCast.<p>And then find out why you&#x27;re consuming so much bandwidth and try to use less.</div><br/></div></div><div id="36173805" class="c"><input type="checkbox" id="c-36173805" checked=""/><div class="controls bullet"><span class="by">garysomerhalder</span><span>|</span><a href="#36174099">prev</a><span>|</span><a href="#36173230">next</a><span>|</span><label class="collapse" for="c-36173805">[-]</label><label class="expand" for="c-36173805">[1 more]</label></div><br/><div class="children"><div class="content">What about looking at Wasabi? It’s $5.99 USD + (any applicable taxes) per TB per month for S3 compatible storage on the pay as you go plan
 <a href="https:&#x2F;&#x2F;wasabi.com" rel="nofollow">https:&#x2F;&#x2F;wasabi.com</a></div><br/></div></div><div id="36174020" class="c"><input type="checkbox" id="c-36174020" checked=""/><div class="controls bullet"><span class="by">getcrunk</span><span>|</span><a href="#36173230">prev</a><span>|</span><a href="#36173322">next</a><span>|</span><label class="collapse" for="c-36174020">[-]</label><label class="expand" for="c-36174020">[1 more]</label></div><br/><div class="children"><div class="content">Shoutout to bunny cdn. It’s dirt cheap in comparison. $5&#x2F;tb egress. Storage is similarly priced to s3 tho.</div><br/></div></div><div id="36173322" class="c"><input type="checkbox" id="c-36173322" checked=""/><div class="controls bullet"><span class="by">justahuman74</span><span>|</span><a href="#36174020">prev</a><span>|</span><a href="#36173304">next</a><span>|</span><label class="collapse" for="c-36173322">[-]</label><label class="expand" for="c-36173322">[4 more]</label></div><br/><div class="children"><div class="content">Are any large companies using NixOS? I presume they&#x27;d be candidates for sponsorship</div><br/><div id="36173390" class="c"><input type="checkbox" id="c-36173390" checked=""/><div class="controls bullet"><span class="by">pxc</span><span>|</span><a href="#36173322">parent</a><span>|</span><a href="#36173436">next</a><span>|</span><label class="collapse" for="c-36173390">[-]</label><label class="expand" for="c-36173390">[1 more]</label></div><br/><div class="children"><div class="content">The most Nix-centric companies are all consultancies and startups, but off the top of my head:<p><pre><code>  - Target
  - Shopify
  - Pinterest
</code></pre>
all used Nix fairly heavily at some point, and I believe they still do.<p>(This is actually about more than NixOS— the binary caches affect all Nix users, including those on macOS as well as any Linux distro.)</div><br/></div></div><div id="36173436" class="c"><input type="checkbox" id="c-36173436" checked=""/><div class="controls bullet"><span class="by">groodt</span><span>|</span><a href="#36173322">parent</a><span>|</span><a href="#36173390">prev</a><span>|</span><a href="#36173332">next</a><span>|</span><label class="collapse" for="c-36173436">[-]</label><label class="expand" for="c-36173436">[1 more]</label></div><br/><div class="children"><div class="content">Shopify and Target have been known to use it.</div><br/></div></div><div id="36173332" class="c"><input type="checkbox" id="c-36173332" checked=""/><div class="controls bullet"><span class="by">solarkraft</span><span>|</span><a href="#36173322">parent</a><span>|</span><a href="#36173436">prev</a><span>|</span><a href="#36173304">next</a><span>|</span><label class="collapse" for="c-36173332">[-]</label><label class="expand" for="c-36173332">[1 more]</label></div><br/><div class="children"><div class="content">repl.it comes to mind, but I think recently a few others have popped up.</div><br/></div></div></div></div><div id="36173304" class="c"><input type="checkbox" id="c-36173304" checked=""/><div class="controls bullet"><span class="by">toomuchtodo</span><span>|</span><a href="#36173322">prev</a><span>|</span><a href="#36174108">next</a><span>|</span><label class="collapse" for="c-36173304">[-]</label><label class="expand" for="c-36173304">[2 more]</label></div><br/><div class="children"><div class="content">Can folks who have AWS credits to burn use them to cover egress costs?</div><br/><div id="36173649" class="c"><input type="checkbox" id="c-36173649" checked=""/><div class="controls bullet"><span class="by">cyberax</span><span>|</span><a href="#36173304">parent</a><span>|</span><a href="#36174108">next</a><span>|</span><label class="collapse" for="c-36173649">[-]</label><label class="expand" for="c-36173649">[1 more]</label></div><br/><div class="children"><div class="content">Yes, but not easily. It&#x27;s possible to set the bucket to &quot;requester pays&quot; model, but this will require touching all the cached objects (which also will cost some money).</div><br/></div></div></div></div><div id="36174108" class="c"><input type="checkbox" id="c-36174108" checked=""/><div class="controls bullet"><span class="by">gigatexal</span><span>|</span><a href="#36173304">prev</a><span>|</span><a href="#36173444">next</a><span>|</span><label class="collapse" for="c-36174108">[-]</label><label class="expand" for="c-36174108">[1 more]</label></div><br/><div class="children"><div class="content">Any cloud provider or CDN that agreed to just sponsor such an important project would gain so much community love that I think they should just do it. Cloudflare should just do an agreement special with Nix and store everything for free. The cost would be not negligible but the reputation benefit and goodwill will be immense.</div><br/></div></div><div id="36173444" class="c"><input type="checkbox" id="c-36173444" checked=""/><div class="controls bullet"><span class="by">colordrops</span><span>|</span><a href="#36174108">prev</a><span>|</span><a href="#36174473">next</a><span>|</span><label class="collapse" for="c-36173444">[-]</label><label class="expand" for="c-36173444">[3 more]</label></div><br/><div class="children"><div class="content">I wonder if some plugin could be created to use torrents and&#x2F;or ipfs for caching.</div><br/><div id="36173524" class="c"><input type="checkbox" id="c-36173524" checked=""/><div class="controls bullet"><span class="by">dlahoda</span><span>|</span><a href="#36173444">parent</a><span>|</span><a href="#36174473">next</a><span>|</span><label class="collapse" for="c-36173524">[-]</label><label class="expand" for="c-36173524">[2 more]</label></div><br/><div class="children"><div class="content">there was attempt which stopped. yeah, having ipfs. i would donate in crypto for that. and sure share my local storage.<p>filesystem engine of nix considers remote and local location as same, and does delta copy, gc, and other operations afaik of things. so it would require rewrite of some super robust core parts to work with ipfs.</div><br/><div id="36173772" class="c"><input type="checkbox" id="c-36173772" checked=""/><div class="controls bullet"><span class="by">edude03</span><span>|</span><a href="#36173444">root</a><span>|</span><a href="#36173524">parent</a><span>|</span><a href="#36174473">next</a><span>|</span><label class="collapse" for="c-36173772">[-]</label><label class="expand" for="c-36173772">[1 more]</label></div><br/><div class="children"><div class="content">It’s still going, just slowly. I checked in on the RFC and it was updated 3 days ago</div><br/></div></div></div></div></div></div><div id="36174473" class="c"><input type="checkbox" id="c-36174473" checked=""/><div class="controls bullet"><span class="by">znpy</span><span>|</span><a href="#36173444">prev</a><span>|</span><label class="collapse" for="c-36174473">[-]</label><label class="expand" for="c-36174473">[3 more]</label></div><br/><div class="children"><div class="content">425 TB? Really?<p>I wonder how much of that could be thrown away.</div><br/><div id="36174559" class="c"><input type="checkbox" id="c-36174559" checked=""/><div class="controls bullet"><span class="by">danieldk</span><span>|</span><a href="#36174473">parent</a><span>|</span><label class="collapse" for="c-36174559">[-]</label><label class="expand" for="c-36174559">[2 more]</label></div><br/><div class="children"><div class="content">Not much, if you want historical nixpkgs revisions to be usable (without rebuilding the world locally, which would probably fail because of now-dead upstream download sites). Yanking historical output paths would do serious damage to some of Nix&#x27; claimed benefits (eg. reproducibility).</div><br/><div id="36174789" class="c"><input type="checkbox" id="c-36174789" checked=""/><div class="controls bullet"><span class="by">simonjgreen</span><span>|</span><a href="#36174473">root</a><span>|</span><a href="#36174559">parent</a><span>|</span><label class="collapse" for="c-36174789">[-]</label><label class="expand" for="c-36174789">[1 more]</label></div><br/><div class="children"><div class="content">Which is an artifact of designing without consideration to cost</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>