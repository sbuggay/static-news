<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1683040924099" as="style"/><link rel="stylesheet" href="styles.css?v=1683040924099"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://cloud.google.com/storage/docs/gcs-fuse">Google Cloud Storage FUSE</a> <span class="domain">(<a href="https://cloud.google.com">cloud.google.com</a>)</span></div><div class="subtext"><span>mvolfik</span> | <span>60 comments</span></div><br/><div><div id="35788919" class="c"><input type="checkbox" id="c-35788919" checked=""/><div class="controls bullet"><span class="by">nickcw</span><span>|</span><a href="#35786329">next</a><span>|</span><label class="collapse" for="c-35788919">[-]</label><label class="expand" for="c-35788919">[1 more]</label></div><br/><div class="children"><div class="content">As the author of rclone I thought I&#x27;d have a quick look through the docs to see what this is about.<p>From reading the docs, it looks very similar to `rclone mount` with `--vfs-cache-mode off` (the default). The limitations are almost identical.<p>* Metadata: Cloud Storage FUSE does not transfer object metadata when uploading files to Cloud Storage, with the exception of mtime and symlink targets. This means that you cannot set object metadata when you upload files using Cloud Storage FUSE. If you need to preserve object metadata, consider uploading files using gsutil, the JSON API, or the Google Cloud console.<p>* Concurrency: Cloud Storage FUSE does not provide concurrency control for multiple writes to the same file. When multiple writes try to replace a file, the last write wins and all previous writes are lost. There is no merging, version control, or user notification of the subsequent overwrite.<p>* Linking: Cloud Storage FUSE does not support hard links.<p>* File locking and file patching: Cloud Storage FUSE does not support file locking or file patching. As such, you should not store version control system repositories in Cloud Storage FUSE mount points, as version control systems rely on file locking and patching. Additionally, you should not use Cloud Storage FUSE as a filer replacement.<p>* Semantics: Semantics in Cloud Storage FUSE are different from semantics in a traditional file system. For example, metadata like last access time are not supported, and some metadata operations like directory renaming are not atomic. For a list of differences between Cloud Storage FUSE semantics and traditional file system semantics, see Semantics in the Cloud Storage FUSE GitHub documentation.<p>* Overwriting in the middle of a file: Cloud Storage FUSE does not support overwriting in the middle of a file. Only sequential writes are supported.
Access: Authorization for files is governed by Cloud Storage permissions. POSIX-style access control does not work.<p>However rclone has `--vfs-cache-mode writes` which caches file writes to disk first to allow overwriting in the middle of a file and `--vfs-cache-mode full` to cache all objects on a LRU basis. They both make the file system a whole lot more POSIX compatible and most applications will run using `--vfs-cache-mode writes` unlike `--vfs-cache-mode off`.<p>And of course rclone supports s3&#x2F;azureblob&#x2F;b2&#x2F;r2&#x2F;sftp&#x2F;webdav&#x2F;etc&#x2F;etc also...<p>I don&#x27;t think it is possible to adapt something with cloud storage semantics to a file system without caching to disk, unless you are willing to leave behind the 1:1 mapping of files seen in the mount to object in the cloud storage.</div><br/></div></div><div id="35786329" class="c"><input type="checkbox" id="c-35786329" checked=""/><div class="controls bullet"><span class="by">MontyCarloHall</span><span>|</span><a href="#35788919">prev</a><span>|</span><a href="#35788749">next</a><span>|</span><label class="collapse" for="c-35786329">[-]</label><label class="expand" for="c-35786329">[24 more]</label></div><br/><div class="children"><div class="content">I’ve experimented with using gcsfuse and its AWS equivalent, s3fs-fuse in production. At best, they are suited to niche applications; at worst, they are merely nice toys. The issue is that every file system operation is fundamentally an HTTP request, so the latency is several orders of magnitude higher than the equivalent disk operation.<p>For certain applications that consistently read limited subsets of the filesystem, this can be mitigated somewhat by the disk cache, but for applications that would thrash the cache, cloud buckets are simply not a good storage backend if you desire disk-like access.<p>What I would really like to see is a two-tier cache system: most recently accessed files are cached to RAM, with less recently accessed files spilling over to a disk-backed cache. That would open up a world of additional applications whose useful cache size exceeds practical RAM amounts.</div><br/><div id="35787349" class="c"><input type="checkbox" id="c-35787349" checked=""/><div class="controls bullet"><span class="by">crazygringo</span><span>|</span><a href="#35786329">parent</a><span>|</span><a href="#35787436">next</a><span>|</span><label class="collapse" for="c-35787349">[-]</label><label class="expand" for="c-35787349">[5 more]</label></div><br/><div class="children"><div class="content">This seems overly pessimistic to me.<p>Sure you&#x27;re not going to use this as a consumer in place of a local disk, nor are you going to use this as part of your web app.<p>But there are lots of situations in reporting, batch&#x2F;cron jobs, data processing, and general file administration where it&#x27;s <i>incredibly</i> easier to use the file system interface than to use an HTTP API via a cloud storage library. Which FUSE is a godsend for. The latency doesn&#x27;t matter in these cases.<p>So no this isn&#x27;t niche or a toy. It&#x27;s a fantastic production tool for a lot of different common uses. It&#x27;s not for everything but nothing is. Use the right tool for the job.</div><br/><div id="35788841" class="c"><input type="checkbox" id="c-35788841" checked=""/><div class="controls bullet"><span class="by">vrosas</span><span>|</span><a href="#35786329">root</a><span>|</span><a href="#35787349">parent</a><span>|</span><a href="#35788018">next</a><span>|</span><label class="collapse" for="c-35788841">[-]</label><label class="expand" for="c-35788841">[1 more]</label></div><br/><div class="children"><div class="content">Calling any software system &quot;niche&quot; is kind of hilarious, as if, if it isn&#x27;t postgres it&#x27;s a massive failure. It&#x27;s not supposed to be a high-performance cache of data.<p>My company uses GCSFuse for ad-hoc analysis&#x2F;visualization of large but poorly structured output from our lifesciences jobs and it works just fine for that.</div><br/></div></div><div id="35788018" class="c"><input type="checkbox" id="c-35788018" checked=""/><div class="controls bullet"><span class="by">MontyCarloHall</span><span>|</span><a href="#35786329">root</a><span>|</span><a href="#35787349">parent</a><span>|</span><a href="#35788841">prev</a><span>|</span><a href="#35787595">next</a><span>|</span><label class="collapse" for="c-35788018">[-]</label><label class="expand" for="c-35788018">[1 more]</label></div><br/><div class="children"><div class="content">Applications for which filesystem-like access is important (i.e. requiring lots of POSIX file I&#x2F;O system calls, e.g. read(2)&#x2F;write(2)&#x2F;lseek(2)) but latency is unimportant seem pretty niche to me. If you don&#x27;t need any of the POSIX syscalls, it&#x27;s not that much more difficult to work with bucket URLs vs. file paths — the general format is the same, i.e. slash-delimited file&#x2F;directory hierarchies.</div><br/></div></div><div id="35787595" class="c"><input type="checkbox" id="c-35787595" checked=""/><div class="controls bullet"><span class="by">ninkendo</span><span>|</span><a href="#35786329">root</a><span>|</span><a href="#35787349">parent</a><span>|</span><a href="#35788018">prev</a><span>|</span><a href="#35787436">next</a><span>|</span><label class="collapse" for="c-35787595">[-]</label><label class="expand" for="c-35787595">[2 more]</label></div><br/><div class="children"><div class="content">The problem is that such systems have a habit of growing in scope until they reach a point where you really do need the more optimal access patterns of using the real HTTP APIs, and the inefficiencies of emulating the full filesystem API will gradually start to bite you. Maybe you’re lucky enough that that won’t happen, but it’s important to understand it for the quick hack job it is, IMO.</div><br/><div id="35787737" class="c"><input type="checkbox" id="c-35787737" checked=""/><div class="controls bullet"><span class="by">lazide</span><span>|</span><a href="#35786329">root</a><span>|</span><a href="#35787595">parent</a><span>|</span><a href="#35787436">next</a><span>|</span><label class="collapse" for="c-35787737">[-]</label><label class="expand" for="c-35787737">[1 more]</label></div><br/><div class="children"><div class="content">In most situations that time
is years, decades, or ‘never’. Which is fine.<p>Not everyone or everything scales faster than bandwidth and&#x2F;or CPU is.</div><br/></div></div></div></div></div></div><div id="35787436" class="c"><input type="checkbox" id="c-35787436" checked=""/><div class="controls bullet"><span class="by">thraxil</span><span>|</span><a href="#35786329">parent</a><span>|</span><a href="#35787349">prev</a><span>|</span><a href="#35786900">next</a><span>|</span><label class="collapse" for="c-35787436">[-]</label><label class="expand" for="c-35787436">[3 more]</label></div><br/><div class="children"><div class="content">Yep. I once inherited a system where the previous team had used GCSFuse to back the `&#x2F;etc&#x2F;letsencrypt` directory on a cluster of nginx webservers. It &quot;worked&quot; and may have been a reasonable approach at the time they built it, avoiding setting up a single &quot;master&quot; to handle HTTP-01 challenges (and it was before GCP&#x27;s HTTPS LB could handle more than a handful of domains&#x2F;certificates). The problem was that as the number of domains&#x2F;certificates it handled increased, nginx startup or config reload time got slower and slower as it insists on stat-ing and reading every single file in that directory in the process. It got high enough that it started running into request throttling on the storage bucket. It&#x27;s no fun when `nginx -s reload` takes two minutes and sometimes fails completely.</div><br/><div id="35787811" class="c"><input type="checkbox" id="c-35787811" checked=""/><div class="controls bullet"><span class="by">netheril96</span><span>|</span><a href="#35786329">root</a><span>|</span><a href="#35787436">parent</a><span>|</span><a href="#35786900">next</a><span>|</span><label class="collapse" for="c-35787811">[-]</label><label class="expand" for="c-35787811">[2 more]</label></div><br/><div class="children"><div class="content">The most wrong part of that previous team is to store private keys unencrypted in the cloud, not the performance part.</div><br/><div id="35788085" class="c"><input type="checkbox" id="c-35788085" checked=""/><div class="controls bullet"><span class="by">oittaa</span><span>|</span><a href="#35786329">root</a><span>|</span><a href="#35787811">parent</a><span>|</span><a href="#35786900">next</a><span>|</span><label class="collapse" for="c-35788085">[-]</label><label class="expand" for="c-35788085">[1 more]</label></div><br/><div class="children"><div class="content">My understanding is that everything is encrypted by default in GCP. Though you need to manually configure encryption keys if you want to prevent Google ever having access to your data.</div><br/></div></div></div></div></div></div><div id="35786900" class="c"><input type="checkbox" id="c-35786900" checked=""/><div class="controls bullet"><span class="by">linsomniac</span><span>|</span><a href="#35786329">parent</a><span>|</span><a href="#35787436">prev</a><span>|</span><a href="#35787679">next</a><span>|</span><label class="collapse" for="c-35786900">[-]</label><label class="expand" for="c-35786900">[2 more]</label></div><br/><div class="children"><div class="content">&gt;What I would really like to see is a two-tier cache system<p>Is there any sort of Linux HSM (Hieracrhical Storage Manager)?  I haven&#x27;t see any and have been a bit surprised nothing has really developed there.  They can manage putting hot data in RAM, SSDs, colder or larger data on spinning rust, deep freezing onto a tape silo or a cloud storage...<p>Some of the NAS devices and RAID cards can support a two-tier caching or data migration using SSDs, where hot or highly-random data (usually identified by smaller write sizes) go to the SSDs, and then can migrate to the spinning discs.<p>I&#x27;ve done some &quot;poor mans&quot; version of this using LVM, where I can &quot;pvmove&quot; blocks of a logical volume between spinning discs and SSDs, which is pretty slick, but a very crude tool.</div><br/><div id="35787172" class="c"><input type="checkbox" id="c-35787172" checked=""/><div class="controls bullet"><span class="by">pdimitar</span><span>|</span><a href="#35786329">root</a><span>|</span><a href="#35786900">parent</a><span>|</span><a href="#35787679">next</a><span>|</span><label class="collapse" for="c-35787172">[-]</label><label class="expand" for="c-35787172">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t know about a manager per se but `bcachefs` for Linux seems to do a good chunk of what you&#x27;re after.</div><br/></div></div></div></div><div id="35787679" class="c"><input type="checkbox" id="c-35787679" checked=""/><div class="controls bullet"><span class="by">ashishbijlani</span><span>|</span><a href="#35786329">parent</a><span>|</span><a href="#35786900">prev</a><span>|</span><a href="#35787301">next</a><span>|</span><label class="collapse" for="c-35787679">[-]</label><label class="expand" for="c-35787679">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m working on optimizing FUSE using eBPF (ExtFUSE [1]) and adding a caching layer exactly as you mentioned. Will post publicly when ready.<p>1. <a href="https:&#x2F;&#x2F;github.com&#x2F;extfuse&#x2F;extfuse">https:&#x2F;&#x2F;github.com&#x2F;extfuse&#x2F;extfuse</a></div><br/></div></div><div id="35787301" class="c"><input type="checkbox" id="c-35787301" checked=""/><div class="controls bullet"><span class="by">pjc50</span><span>|</span><a href="#35786329">parent</a><span>|</span><a href="#35787679">prev</a><span>|</span><a href="#35787511">next</a><span>|</span><label class="collapse" for="c-35787301">[-]</label><label class="expand" for="c-35787301">[1 more]</label></div><br/><div class="children"><div class="content">&gt; What I would really like to see is a two-tier cache system: most recently accessed files are cached to RAM, with less recently accessed files spilling over to a disk-backed cache. That would open up a world of additional applications whose useful cache size exceeds practical RAM amounts<p>This is really hard to get right if the origin cloud storage is anything other than immutable. Otherwise you&#x27;re in for a world of cache invalidation and consistency pain.<p>I&#x27;ve gradually come round to the other opinion: there should be devices that sit on the PCIe&#x2F;NVMe bus and provide a blob storage API rather than a block one, and there should be an operating system blob API that is similar to but <i>not</i> identical to the filesystem one.</div><br/></div></div><div id="35787511" class="c"><input type="checkbox" id="c-35787511" checked=""/><div class="controls bullet"><span class="by">markstos</span><span>|</span><a href="#35786329">parent</a><span>|</span><a href="#35787301">prev</a><span>|</span><a href="#35788536">next</a><span>|</span><label class="collapse" for="c-35787511">[-]</label><label class="expand" for="c-35787511">[2 more]</label></div><br/><div class="children"><div class="content">I once evaluated using s3fuse for managing about 36 million images. The old storage model was on a filesystem so it was supposed to make a smooth transition to the cloud.<p>AWS Premium Support wisely advised me against it, not just because of latency but also because the abstraction makes &#x2F;far&#x2F; more API calls then a native solution would.<p>After a bit of testing to confirm, I switched to using native API calls. That code was easy to write and the performance was great. I&#x27;ve been wary of cloud FUSE adapters ever since.</div><br/><div id="35787757" class="c"><input type="checkbox" id="c-35787757" checked=""/><div class="controls bullet"><span class="by">lazide</span><span>|</span><a href="#35786329">root</a><span>|</span><a href="#35787511">parent</a><span>|</span><a href="#35788536">next</a><span>|</span><label class="collapse" for="c-35787757">[-]</label><label class="expand" for="c-35787757">[1 more]</label></div><br/><div class="children"><div class="content">FUSE adapters in general are not for a product&#x2F;production use in my experience. They’re great for one off convenience use, or basic admin scripts.</div><br/></div></div></div></div><div id="35788536" class="c"><input type="checkbox" id="c-35788536" checked=""/><div class="controls bullet"><span class="by">bitL</span><span>|</span><a href="#35786329">parent</a><span>|</span><a href="#35787511">prev</a><span>|</span><a href="#35788228">next</a><span>|</span><label class="collapse" for="c-35788536">[-]</label><label class="expand" for="c-35788536">[1 more]</label></div><br/><div class="children"><div class="content">Moreover, there is no SLA on those FUSE adapters so putting it into any part of production is too risky.</div><br/></div></div><div id="35788228" class="c"><input type="checkbox" id="c-35788228" checked=""/><div class="controls bullet"><span class="by">yuliyp</span><span>|</span><a href="#35786329">parent</a><span>|</span><a href="#35788536">prev</a><span>|</span><a href="#35786995">next</a><span>|</span><label class="collapse" for="c-35788228">[-]</label><label class="expand" for="c-35788228">[1 more]</label></div><br/><div class="children"><div class="content">&gt; most recently accessed files are cached to RAM, with less recently accessed files spilling over to a disk-backed cache<p>Isn&#x27;t this how most servers run normally? (parts of) files which are accessed are in page cache, the rest is on &quot;disk&quot;</div><br/></div></div><div id="35786995" class="c"><input type="checkbox" id="c-35786995" checked=""/><div class="controls bullet"><span class="by">8organicbits</span><span>|</span><a href="#35786329">parent</a><span>|</span><a href="#35788228">prev</a><span>|</span><a href="#35787477">next</a><span>|</span><label class="collapse" for="c-35786995">[-]</label><label class="expand" for="c-35786995">[1 more]</label></div><br/><div class="children"><div class="content">Same experience. I remember opening a .docx in Word and watching it hang or studder at different operations. I think you&#x27;d need very reliable and low latency networking for this to be anything but a painful to use toy.<p>I&#x27;d be curious to see how it works running on EC2, especially with an S3 endpoint in the VPC. Although I still think you&#x27;d be better suited by using S3 as an object store, given the option to built it right.</div><br/></div></div><div id="35787477" class="c"><input type="checkbox" id="c-35787477" checked=""/><div class="controls bullet"><span class="by">ArtWomb</span><span>|</span><a href="#35786329">parent</a><span>|</span><a href="#35786995">prev</a><span>|</span><a href="#35786960">next</a><span>|</span><label class="collapse" for="c-35787477">[-]</label><label class="expand" for="c-35787477">[1 more]</label></div><br/><div class="children"><div class="content">&gt;&gt;&gt; every file system operation is fundamentally an HTTP request, so the latency is several orders of magnitude higher than the equivalent disk operation<p>gcsfuse latency is ok as it embodies &quot;infinite sync &amp; persistence&quot; ;)</div><br/></div></div><div id="35786960" class="c"><input type="checkbox" id="c-35786960" checked=""/><div class="controls bullet"><span class="by">ape4</span><span>|</span><a href="#35786329">parent</a><span>|</span><a href="#35787477">prev</a><span>|</span><a href="#35787394">next</a><span>|</span><label class="collapse" for="c-35786960">[-]</label><label class="expand" for="c-35786960">[1 more]</label></div><br/><div class="children"><div class="content">That page shows a `mkdir` is 3 json commands.  I wonder if its that many HTTP requests.</div><br/></div></div><div id="35787394" class="c"><input type="checkbox" id="c-35787394" checked=""/><div class="controls bullet"><span class="by">VikingCoder</span><span>|</span><a href="#35786329">parent</a><span>|</span><a href="#35786960">prev</a><span>|</span><a href="#35786767">next</a><span>|</span><label class="collapse" for="c-35787394">[-]</label><label class="expand" for="c-35787394">[2 more]</label></div><br/><div class="children"><div class="content">Uh, how does it perform from a Google Compute Engine Virtual Machine?<p>If it performs well there, I could imagine that being pretty useful.</div><br/><div id="35787543" class="c"><input type="checkbox" id="c-35787543" checked=""/><div class="controls bullet"><span class="by">MontyCarloHall</span><span>|</span><a href="#35786329">root</a><span>|</span><a href="#35787394">parent</a><span>|</span><a href="#35786767">next</a><span>|</span><label class="collapse" for="c-35787543">[-]</label><label class="expand" for="c-35787543">[1 more]</label></div><br/><div class="children"><div class="content">That is exactly where I tested it, and the latency was abysmally poor.<p>I don’t even want to know how bad the latency would be outside of a cloud VM.</div><br/></div></div></div></div><div id="35786767" class="c"><input type="checkbox" id="c-35786767" checked=""/><div class="controls bullet"><span class="by">tyingq</span><span>|</span><a href="#35786329">parent</a><span>|</span><a href="#35787394">prev</a><span>|</span><a href="#35786409">next</a><span>|</span><label class="collapse" for="c-35786767">[-]</label><label class="expand" for="c-35786767">[1 more]</label></div><br/><div class="children"><div class="content">Well, and there&#x27;s no such thing as opening a file and modifying some small part of it.  That&#x27;s emulated with a full rewrite of the whole object.</div><br/></div></div><div id="35786409" class="c"><input type="checkbox" id="c-35786409" checked=""/><div class="controls bullet"><span class="by">qsort</span><span>|</span><a href="#35786329">parent</a><span>|</span><a href="#35786767">prev</a><span>|</span><a href="#35788749">next</a><span>|</span><label class="collapse" for="c-35786409">[-]</label><label class="expand" for="c-35786409">[1 more]</label></div><br/><div class="children"><div class="content">My personal conspiracy theory: most &quot;cloud services&quot; are just... bad.<p>VMs and disk space I understand completely, having machines on-prem is too much of an hassle and the price isn&#x27;t that bad. But for stuff like this, managed services, databases especially, you&#x27;re just getting scammed.</div><br/></div></div></div></div><div id="35788749" class="c"><input type="checkbox" id="c-35788749" checked=""/><div class="controls bullet"><span class="by">iamjk</span><span>|</span><a href="#35786329">prev</a><span>|</span><a href="#35786200">next</a><span>|</span><label class="collapse" for="c-35788749">[-]</label><label class="expand" for="c-35788749">[2 more]</label></div><br/><div class="children"><div class="content">I mean I get why everyone wants everything to be fuse-compatible but some things just aren&#x27;t meant to be done.</div><br/><div id="35788830" class="c"><input type="checkbox" id="c-35788830" checked=""/><div class="controls bullet"><span class="by">ggambetta</span><span>|</span><a href="#35788749">parent</a><span>|</span><a href="#35786200">next</a><span>|</span><label class="collapse" for="c-35788830">[-]</label><label class="expand" for="c-35788830">[1 more]</label></div><br/><div class="children"><div class="content"><i>&quot;Your scientists were so preoccupied with whether or not they could, they didn&#x27;t stop to think if they should!&quot;</i></div><br/></div></div></div></div><div id="35786200" class="c"><input type="checkbox" id="c-35786200" checked=""/><div class="controls bullet"><span class="by">rippercushions</span><span>|</span><a href="#35788749">prev</a><span>|</span><a href="#35786891">next</a><span>|</span><label class="collapse" for="c-35786200">[-]</label><label class="expand" for="c-35786200">[2 more]</label></div><br/><div class="children"><div class="content">Is this the same gcsfuse that&#x27;s been around for years, only now with official Google support?<p><a href="https:&#x2F;&#x2F;github.com&#x2F;GoogleCloudPlatform&#x2F;gcsfuse">https:&#x2F;&#x2F;github.com&#x2F;GoogleCloudPlatform&#x2F;gcsfuse</a></div><br/><div id="35786294" class="c"><input type="checkbox" id="c-35786294" checked=""/><div class="controls bullet"><span class="by">beastman82</span><span>|</span><a href="#35786200">parent</a><span>|</span><a href="#35786891">next</a><span>|</span><label class="collapse" for="c-35786294">[-]</label><label class="expand" for="c-35786294">[1 more]</label></div><br/><div class="children"><div class="content">yes<p>&gt; export GCSFUSE_REPO=gcsfuse-`lsb_release -c -s`</div><br/></div></div></div></div><div id="35786891" class="c"><input type="checkbox" id="c-35786891" checked=""/><div class="controls bullet"><span class="by">ISL</span><span>|</span><a href="#35786200">prev</a><span>|</span><a href="#35786550">next</a><span>|</span><label class="collapse" for="c-35786891">[-]</label><label class="expand" for="c-35786891">[3 more]</label></div><br/><div class="children"><div class="content">Can this be used to mount Drive under linux?</div><br/><div id="35787015" class="c"><input type="checkbox" id="c-35787015" checked=""/><div class="controls bullet"><span class="by">hobo_mark</span><span>|</span><a href="#35786891">parent</a><span>|</span><a href="#35787522">next</a><span>|</span><label class="collapse" for="c-35787015">[-]</label><label class="expand" for="c-35787015">[1 more]</label></div><br/><div class="children"><div class="content">GCS is not Drive, it&#x27;s Google&#x27;s equivalent of S3.</div><br/></div></div><div id="35787522" class="c"><input type="checkbox" id="c-35787522" checked=""/><div class="controls bullet"><span class="by">lern_too_spel</span><span>|</span><a href="#35786891">parent</a><span>|</span><a href="#35787015">prev</a><span>|</span><a href="#35786550">next</a><span>|</span><label class="collapse" for="c-35787522">[-]</label><label class="expand" for="c-35787522">[1 more]</label></div><br/><div class="children"><div class="content">Use rclone.</div><br/></div></div></div></div><div id="35786550" class="c"><input type="checkbox" id="c-35786550" checked=""/><div class="controls bullet"><span class="by">askvictor</span><span>|</span><a href="#35786891">prev</a><span>|</span><a href="#35787169">next</a><span>|</span><label class="collapse" for="c-35786550">[-]</label><label class="expand" for="c-35786550">[8 more]</label></div><br/><div class="children"><div class="content">Now for official Google Drive support on Linux...</div><br/><div id="35786886" class="c"><input type="checkbox" id="c-35786886" checked=""/><div class="controls bullet"><span class="by">curt15</span><span>|</span><a href="#35786550">parent</a><span>|</span><a href="#35787169">next</a><span>|</span><label class="collapse" for="c-35786886">[-]</label><label class="expand" for="c-35786886">[7 more]</label></div><br/><div class="children"><div class="content">How do Googlers access Google Drive from their Linux workstations? Do they have an internal GDrive client?</div><br/><div id="35787010" class="c"><input type="checkbox" id="c-35787010" checked=""/><div class="controls bullet"><span class="by">martius</span><span>|</span><a href="#35786550">root</a><span>|</span><a href="#35786886">parent</a><span>|</span><a href="#35787566">next</a><span>|</span><label class="collapse" for="c-35787010">[-]</label><label class="expand" for="c-35787010">[1 more]</label></div><br/><div class="children"><div class="content">Not that I know of, we have some virtual filesystems for specific things, but in general Drive is for shared docs, videos (recorded meetings&#x2F;presentations) and things like this.<p>We don&#x27;t use drive to store other files. Actually, we don&#x27;t really &quot;store files&quot; since almost everything we need is remote.<p>See for instance this discussion: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=13561096" rel="nofollow">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=13561096</a></div><br/></div></div><div id="35787566" class="c"><input type="checkbox" id="c-35787566" checked=""/><div class="controls bullet"><span class="by">surajrmal</span><span>|</span><a href="#35786550">root</a><span>|</span><a href="#35786886">parent</a><span>|</span><a href="#35787010">prev</a><span>|</span><a href="#35787576">next</a><span>|</span><label class="collapse" for="c-35787566">[-]</label><label class="expand" for="c-35787566">[1 more]</label></div><br/><div class="children"><div class="content">Through the web frontend. I&#x27;m not aware of any special fuse clients, nor is it particularly appealing. All files I store in it are for web based applications (primarily gsuite). We have alternative collosus based file share mounts which we can use for &quot;native&quot; files. I personally use git and&#x2F;or rsync to share files between my various corp devices (laptop, cloud vm, desktop) in addition to those other options.</div><br/></div></div><div id="35787037" class="c"><input type="checkbox" id="c-35787037" checked=""/><div class="controls bullet"><span class="by">plaidfuji</span><span>|</span><a href="#35786550">root</a><span>|</span><a href="#35786886">parent</a><span>|</span><a href="#35787576">prev</a><span>|</span><a href="#35787169">next</a><span>|</span><label class="collapse" for="c-35787037">[-]</label><label class="expand" for="c-35787037">[3 more]</label></div><br/><div class="children"><div class="content">I wonder the same, but I also wonder what the actual use case is for the Drive app on Linux. For me, Drive is mostly for syncing office docs (namely MS-office docs), PDFs and images among teams. That type of work doesn’t lend itself well to a Linux env anyway. And for programming-heavy sync tasks, a user will more likely use a remote Git repo for code and GCS for data. Does google even use MS office internally?</div><br/><div id="35787121" class="c"><input type="checkbox" id="c-35787121" checked=""/><div class="controls bullet"><span class="by">capableweb</span><span>|</span><a href="#35786550">root</a><span>|</span><a href="#35787037">parent</a><span>|</span><a href="#35787713">next</a><span>|</span><label class="collapse" for="c-35787121">[-]</label><label class="expand" for="c-35787121">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Does google even use MS office internally<p>That&#x27;d be weird, considering they have their own suite of office tools. Kind of like if Microsoft would be using Google Cloud rather than Azure internally.</div><br/></div></div><div id="35787713" class="c"><input type="checkbox" id="c-35787713" checked=""/><div class="controls bullet"><span class="by">KingOfCoders</span><span>|</span><a href="#35786550">root</a><span>|</span><a href="#35787037">parent</a><span>|</span><a href="#35787121">prev</a><span>|</span><a href="#35787169">next</a><span>|</span><label class="collapse" for="c-35787713">[-]</label><label class="expand" for="c-35787713">[1 more]</label></div><br/><div class="children"><div class="content">I write my articles in Markdown and would want to switch to a terminal based Linux (Pi Zero, low power, e-paper, distraction free) to do this instead of a GUI.<p>(I currently use Goland and Scrivener to write articles and books)</div><br/></div></div></div></div></div></div></div></div><div id="35787169" class="c"><input type="checkbox" id="c-35787169" checked=""/><div class="controls bullet"><span class="by">remram</span><span>|</span><a href="#35786550">prev</a><span>|</span><a href="#35786579">next</a><span>|</span><label class="collapse" for="c-35787169">[-]</label><label class="expand" for="c-35787169">[2 more]</label></div><br/><div class="children"><div class="content">See also: JuiceFS: <a href="https:&#x2F;&#x2F;juicefs.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;juicefs.com&#x2F;</a><p>Adds a DBMS or key-value store for metadata, making the filesystem much faster (POSIX, small overwrites don&#x27;t have to replace a full object in the GCS&#x2F;S3 backend).<p>Almost certainly a better solution if you want to turn your object storage into a mountable filesystem, with the (big) caveat that you can&#x27;t access the files directly in the bucket (they are not stored transparently).</div><br/><div id="35787714" class="c"><input type="checkbox" id="c-35787714" checked=""/><div class="controls bullet"><span class="by">e1g</span><span>|</span><a href="#35787169">parent</a><span>|</span><a href="#35786579">next</a><span>|</span><label class="collapse" for="c-35787714">[-]</label><label class="expand" for="c-35787714">[1 more]</label></div><br/><div class="children"><div class="content">JuiceFS is <i>mostly</i> POSIX compatible, but there are important caveats such as no extended ACL, copying files changes their mtime (impacts backup tools), it offers &quot;close-to-open&quot; consistency (dangerous for log appenders), etc.<p>Choosing an appropriate solution in this space still depends on what you need to do with the storage, and a few other options are MooseFS (<a href="https:&#x2F;&#x2F;github.com&#x2F;moosefs&#x2F;moosefs">https:&#x2F;&#x2F;github.com&#x2F;moosefs&#x2F;moosefs</a>) SeaweedFS (<a href="https:&#x2F;&#x2F;github.com&#x2F;seaweedfs&#x2F;seaweedfs">https:&#x2F;&#x2F;github.com&#x2F;seaweedfs&#x2F;seaweedfs</a>) Curve (<a href="https:&#x2F;&#x2F;github.com&#x2F;opencurve&#x2F;curve">https:&#x2F;&#x2F;github.com&#x2F;opencurve&#x2F;curve</a>) GeeseFS (<a href="https:&#x2F;&#x2F;github.com&#x2F;yandex-cloud&#x2F;geesefs">https:&#x2F;&#x2F;github.com&#x2F;yandex-cloud&#x2F;geesefs</a>)</div><br/></div></div></div></div><div id="35786579" class="c"><input type="checkbox" id="c-35786579" checked=""/><div class="controls bullet"><span class="by">manigandham</span><span>|</span><a href="#35787169">prev</a><span>|</span><a href="#35786301">next</a><span>|</span><label class="collapse" for="c-35786579">[-]</label><label class="expand" for="c-35786579">[1 more]</label></div><br/><div class="children"><div class="content">Object storage is a higher-level abstraction than block-storage. FUSE and similar tech can do the job for basic requirements like read-only access by legacy applications but rarely works well for other scenarios.<p>A more complex layer like <a href="https:&#x2F;&#x2F;objectivefs.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;objectivefs.com&#x2F;</a> (based on the S3 API) would be more useful, although I would&#x27;ve expected the cloud providers to scale their own block-store&#x2F;SANs backed with object-stores by now.</div><br/></div></div><div id="35786301" class="c"><input type="checkbox" id="c-35786301" checked=""/><div class="controls bullet"><span class="by">jefftk</span><span>|</span><a href="#35786579">prev</a><span>|</span><a href="#35787546">next</a><span>|</span><label class="collapse" for="c-35786301">[-]</label><label class="expand" for="c-35786301">[10 more]</label></div><br/><div class="children"><div class="content"><i>Cloud Storage FUSE does not support overwriting in the middle of a file. Only sequential writes are supported.</i><p>This seems like a big limitation?</div><br/><div id="35787184" class="c"><input type="checkbox" id="c-35787184" checked=""/><div class="controls bullet"><span class="by">8organicbits</span><span>|</span><a href="#35786301">parent</a><span>|</span><a href="#35786315">next</a><span>|</span><label class="collapse" for="c-35787184">[-]</label><label class="expand" for="c-35787184">[1 more]</label></div><br/><div class="children"><div class="content">One challenge with writes in the middle is that it changes the file hash. Cloud services typically expose the object hash, so changing any bit of a 1TB file would require a costly read of the whole object to compute the new hash.<p>You could spilt the file into smaller chunks and reassemble at the application layer. That way you limit the cost of changing any byte to the chunk size.<p>That could also support inserting or removing a byte. You&#x27;d have a new chunk of DEFUALT_CHUNK_SIZE+1 (or -1). Split and merge chunks when they get too large or small.<p>Of course at some point if you are using a file metaphor you want a real file system.</div><br/></div></div><div id="35786315" class="c"><input type="checkbox" id="c-35786315" checked=""/><div class="controls bullet"><span class="by">throwawaaarrgh</span><span>|</span><a href="#35786301">parent</a><span>|</span><a href="#35787184">prev</a><span>|</span><a href="#35787546">next</a><span>|</span><label class="collapse" for="c-35786315">[-]</label><label class="expand" for="c-35786315">[8 more]</label></div><br/><div class="children"><div class="content">pretty standard limitation of object storage services iirc</div><br/><div id="35786397" class="c"><input type="checkbox" id="c-35786397" checked=""/><div class="controls bullet"><span class="by">jefftk</span><span>|</span><a href="#35786301">root</a><span>|</span><a href="#35786315">parent</a><span>|</span><a href="#35787546">next</a><span>|</span><label class="collapse" for="c-35786397">[-]</label><label class="expand" for="c-35786397">[7 more]</label></div><br/><div class="children"><div class="content">Doesn&#x27;t this mean that most programs you might want to use with the FUSE API won&#x27;t actually work? They&#x27;ll do fine for a while, until they try to seek, and then they&#x27;ll get an error?<p>Or is there a large group of programs that only ever write sequentially?</div><br/><div id="35786519" class="c"><input type="checkbox" id="c-35786519" checked=""/><div class="controls bullet"><span class="by">jsnell</span><span>|</span><a href="#35786301">root</a><span>|</span><a href="#35786397">parent</a><span>|</span><a href="#35786643">next</a><span>|</span><label class="collapse" for="c-35786519">[-]</label><label class="expand" for="c-35786519">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;d think non-appending writes are quite rare in practice, other than databases. Even when the application is logically overwriting data, in other kinds of programs it&#x27;s almost always implemented as writing to a new file + an atomic rename, not in-place modification.</div><br/><div id="35786588" class="c"><input type="checkbox" id="c-35786588" checked=""/><div class="controls bullet"><span class="by">dontlaugh</span><span>|</span><a href="#35786301">root</a><span>|</span><a href="#35786519">parent</a><span>|</span><a href="#35786643">next</a><span>|</span><label class="collapse" for="c-35786588">[-]</label><label class="expand" for="c-35786588">[1 more]</label></div><br/><div class="children"><div class="content">Even databases tend to do sequential writes, whether to a WAL or LSM tree.</div><br/></div></div></div></div><div id="35786643" class="c"><input type="checkbox" id="c-35786643" checked=""/><div class="controls bullet"><span class="by">hawski</span><span>|</span><a href="#35786301">root</a><span>|</span><a href="#35786397">parent</a><span>|</span><a href="#35786519">prev</a><span>|</span><a href="#35786924">next</a><span>|</span><label class="collapse" for="c-35786643">[-]</label><label class="expand" for="c-35786643">[3 more]</label></div><br/><div class="children"><div class="content">Most programs either write a full file every time and replace the old file by a single move or append to an old file. Writting in the middle could happen in a program writting to some kind of archive or disk image. There is probably a whole group of programs that do this I&#x27;m not familiar with, but I&#x27;m pretty sure of my first sentence.</div><br/><div id="35787057" class="c"><input type="checkbox" id="c-35787057" checked=""/><div class="controls bullet"><span class="by">jefftk</span><span>|</span><a href="#35786301">root</a><span>|</span><a href="#35786643">parent</a><span>|</span><a href="#35786795">next</a><span>|</span><label class="collapse" for="c-35787057">[-]</label><label class="expand" for="c-35787057">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not completely confident (I tried looking in the source and it wasn&#x27;t immediately obvious) but I think emacs does small in-place edits when you&#x27;re working with very large files.</div><br/></div></div><div id="35786795" class="c"><input type="checkbox" id="c-35786795" checked=""/><div class="controls bullet"><span class="by">formerly_proven</span><span>|</span><a href="#35786301">root</a><span>|</span><a href="#35786643">parent</a><span>|</span><a href="#35787057">prev</a><span>|</span><a href="#35786924">next</a><span>|</span><label class="collapse" for="c-35786795">[-]</label><label class="expand" for="c-35786795">[1 more]</label></div><br/><div class="children"><div class="content">sqlite, dbm and similars, various zip libraries and the file formats build on that</div><br/></div></div></div></div></div></div></div></div></div></div><div id="35787546" class="c"><input type="checkbox" id="c-35787546" checked=""/><div class="controls bullet"><span class="by">jijji</span><span>|</span><a href="#35786301">prev</a><span>|</span><a href="#35786653">next</a><span>|</span><label class="collapse" for="c-35787546">[-]</label><label class="expand" for="c-35787546">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been using rclone [0] to do the same under linux for years, how is this different?<p>[0] <a href="https:&#x2F;&#x2F;rclone.org" rel="nofollow">https:&#x2F;&#x2F;rclone.org</a></div><br/><div id="35787788" class="c"><input type="checkbox" id="c-35787788" checked=""/><div class="controls bullet"><span class="by">dallbee</span><span>|</span><a href="#35787546">parent</a><span>|</span><a href="#35786653">next</a><span>|</span><label class="collapse" for="c-35787788">[-]</label><label class="expand" for="c-35787788">[1 more]</label></div><br/><div class="children"><div class="content">Unfortunately it&#x27;s common to have a policy in place disallowing 3rd-party app api access to drive storage. This prevents apps like rclone from working, but the drive client works because it isn&#x27;t 3rd-party.</div><br/></div></div></div></div><div id="35786653" class="c"><input type="checkbox" id="c-35786653" checked=""/><div class="controls bullet"><span class="by">goodpoint</span><span>|</span><a href="#35787546">prev</a><span>|</span><a href="#35786248">next</a><span>|</span><label class="collapse" for="c-35786653">[-]</label><label class="expand" for="c-35786653">[1 more]</label></div><br/><div class="children"><div class="content">FUSE is really not suitable for this.</div><br/></div></div><div id="35786248" class="c"><input type="checkbox" id="c-35786248" checked=""/><div class="controls bullet"><span class="by">trollied</span><span>|</span><a href="#35786653">prev</a><span>|</span><label class="collapse" for="c-35786248">[-]</label><label class="expand" for="c-35786248">[3 more]</label></div><br/><div class="children"><div class="content">Be aware that this is not free:<p>&quot;Cloud Storage FUSE is available free of charge, but the storage, metadata, and network I&#x2F;O it generates to and from Cloud Storage are charged like any other Cloud Storage interface. In other words, all data transfer and operations performed by Cloud Storage FUSE map to Cloud Storage transfers and operations, and are charged accordingly.&quot;</div><br/><div id="35786359" class="c"><input type="checkbox" id="c-35786359" checked=""/><div class="controls bullet"><span class="by">rippercushions</span><span>|</span><a href="#35786248">parent</a><span>|</span><label class="collapse" for="c-35786359">[-]</label><label class="expand" for="c-35786359">[2 more]</label></div><br/><div class="children"><div class="content">Using FUSE doesn&#x27;t cost you anything extra, but it doesn&#x27;t make the underlying storage free.</div><br/><div id="35787109" class="c"><input type="checkbox" id="c-35787109" checked=""/><div class="controls bullet"><span class="by">ElectricalUnion</span><span>|</span><a href="#35786248">root</a><span>|</span><a href="#35786359">parent</a><span>|</span><label class="collapse" for="c-35787109">[-]</label><label class="expand" for="c-35787109">[1 more]</label></div><br/><div class="children"><div class="content">You will be doing storage operations silently and in a unoptimized fashion, more so if the underlying FUSE filesystem is implemented in a naive fashion.<p>For example, Cloud Storage never moves or renames your objects; copying and deleting the original one instead. This can end up costing quite a lot if you&#x27;re using data other that  in &quot;standard store&quot; because of minimum storage duration.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>