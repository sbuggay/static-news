<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1731661284293" as="style"/><link rel="stylesheet" href="styles.css?v=1731661284293"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://mrsuh.com/articles/2024/sqlite-index-visualization-structure/">SQLite Index Visualization</a> <span class="domain">(<a href="https://mrsuh.com">mrsuh.com</a>)</span></div><div class="subtext"><span>mrsuh</span> | <span>20 comments</span></div><br/><div><div id="42136454" class="c"><input type="checkbox" id="c-42136454" checked=""/><div class="controls bullet"><span class="by">srcreigh</span><span>|</span><a href="#42136324">next</a><span>|</span><label class="collapse" for="c-42136454">[-]</label><label class="expand" for="c-42136454">[2 more]</label></div><br/><div class="children"><div class="content">Great effort!<p>&gt; By default, each SQLite table row has a unique rowId, which works like a primary key if one isn’t explicitly defined.<p>It actually uses rowid even if you have a primary key.<p>You should try visualizing the primary key index for a WITHOUT ROWID table. Those indexes are my favourite<p>&gt; Both Indexes look similar, but the second Index, with fewer Pages, should be faster.<p>Less nodes doesn’t really mean “faster”. The most important is the height of the tree.<p>The second most important is what happens when you find your value in the index. Do you need to load the rest from a separate table(rowid)? Or is the data just there for you (without rowid)? Especially range queries (aka where 50&lt;= col &lt;=100)</div><br/><div id="42137197" class="c"><input type="checkbox" id="c-42137197" checked=""/><div class="controls bullet"><span class="by">kevincox</span><span>|</span><a href="#42136454">parent</a><span>|</span><a href="#42136324">next</a><span>|</span><label class="collapse" for="c-42137197">[-]</label><label class="expand" for="c-42137197">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Less nodes doesn’t really mean “faster”. The most important is the height of the tree.<p>In isolation of a single access yes. But when frequently accessing an index overall size can be very important for cache hit rate.</div><br/></div></div></div></div><div id="42136324" class="c"><input type="checkbox" id="c-42136324" checked=""/><div class="controls bullet"><span class="by">IX-103</span><span>|</span><a href="#42136454">prev</a><span>|</span><a href="#42136200">next</a><span>|</span><label class="collapse" for="c-42136324">[-]</label><label class="expand" for="c-42136324">[5 more]</label></div><br/><div class="children"><div class="content">&gt; I wanted to see how a database management system (DBMS) stores an index in both disk and memory, and how it searches through an Index...I chose SQLite for my experiments<p>SQLite is a bit of an outlier in how it handles...everything, but even more so in query processing. SQLite tends to favor simplicity over performance, which causes it to implement things differently than every other DB I&#x27;ve worked with. You have to understand - SQLite isn&#x27;t competing with other databases. It&#x27;s competing with JSON and XML files for persistent storage. This means that how it implements <i>anything</i> tells you practically nothing about how a real database would do something.</div><br/><div id="42138785" class="c"><input type="checkbox" id="c-42138785" checked=""/><div class="controls bullet"><span class="by">graemep</span><span>|</span><a href="#42136324">parent</a><span>|</span><a href="#42138240">next</a><span>|</span><label class="collapse" for="c-42138785">[-]</label><label class="expand" for="c-42138785">[2 more]</label></div><br/><div class="children"><div class="content">&gt; SQLite isn&#x27;t competing with other databases. It&#x27;s competing with JSON and XML files for persistent storage<p>It competes with both. its clearly used for local persistent storage. SO are quite a lot of other things. It also competes with other RDBMSes where a separate server process is not a requirement.<p>That does mean it serves very different requirements, its just that its use case are a lot wider than just replacing JSON and XML files and similar.</div><br/><div id="42140986" class="c"><input type="checkbox" id="c-42140986" checked=""/><div class="controls bullet"><span class="by">threatofrain</span><span>|</span><a href="#42136324">root</a><span>|</span><a href="#42138785">parent</a><span>|</span><a href="#42138240">next</a><span>|</span><label class="collapse" for="c-42140986">[-]</label><label class="expand" for="c-42140986">[1 more]</label></div><br/><div class="children"><div class="content">&gt; It also competes with other RDBMSes where a separate server process is not a requirement.<p>If you casually list off the top DB&#x27;s either by usage or by recent hotness then almost all of them will have a server, but you&#x27;ll also find they&#x27;re basically all not embedded DB&#x27;s with exception to RocksDB.</div><br/></div></div></div></div><div id="42138240" class="c"><input type="checkbox" id="c-42138240" checked=""/><div class="controls bullet"><span class="by">ngrilly</span><span>|</span><a href="#42136324">parent</a><span>|</span><a href="#42138785">prev</a><span>|</span><a href="#42138218">next</a><span>|</span><label class="collapse" for="c-42138240">[-]</label><label class="expand" for="c-42138240">[1 more]</label></div><br/><div class="children"><div class="content">SQLite is a real database engine. I guess what you mean is that SQLite is not competing with database servers.</div><br/></div></div><div id="42138218" class="c"><input type="checkbox" id="c-42138218" checked=""/><div class="controls bullet"><span class="by">cogman10</span><span>|</span><a href="#42136324">parent</a><span>|</span><a href="#42138240">prev</a><span>|</span><a href="#42136200">next</a><span>|</span><label class="collapse" for="c-42138218">[-]</label><label class="expand" for="c-42138218">[1 more]</label></div><br/><div class="children"><div class="content">Meh, it isn&#x27;t really too far off from the way other DBMS servers handle storage and indexes.  The principles are pretty identical (especially when sqlite operates in WAL mode).</div><br/></div></div></div></div><div id="42136200" class="c"><input type="checkbox" id="c-42136200" checked=""/><div class="controls bullet"><span class="by">edweis</span><span>|</span><a href="#42136324">prev</a><span>|</span><a href="#42138105">next</a><span>|</span><label class="collapse" for="c-42136200">[-]</label><label class="expand" for="c-42136200">[3 more]</label></div><br/><div class="children"><div class="content">The website is so legible I want to read it.</div><br/><div id="42136383" class="c"><input type="checkbox" id="c-42136383" checked=""/><div class="controls bullet"><span class="by">saurik</span><span>|</span><a href="#42136200">parent</a><span>|</span><a href="#42137479">next</a><span>|</span><label class="collapse" for="c-42136383">[-]</label><label class="expand" for="c-42136383">[1 more]</label></div><br/><div class="children"><div class="content">FWIW, I find the font size (I am on an iPhone) way too large, particularly as there is also important text in the diagrams and that text is much smaller, so while I feel a need to shove my phone away from my face to deal with the overly large body text I then have to keep pulling it back in to feel comfortable reading the diagrams, which feel out of place.</div><br/></div></div><div id="42137479" class="c"><input type="checkbox" id="c-42137479" checked=""/><div class="controls bullet"><span class="by">bgalbs</span><span>|</span><a href="#42136200">parent</a><span>|</span><a href="#42136383">prev</a><span>|</span><a href="#42138105">next</a><span>|</span><label class="collapse" for="c-42137479">[-]</label><label class="expand" for="c-42137479">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, such a relief to see content w&#x2F;o super dense ad loads, etc. Very cool article.</div><br/></div></div></div></div><div id="42138105" class="c"><input type="checkbox" id="c-42138105" checked=""/><div class="controls bullet"><span class="by">salviati</span><span>|</span><a href="#42136200">prev</a><span>|</span><a href="#42141312">next</a><span>|</span><label class="collapse" for="c-42138105">[-]</label><label class="expand" for="c-42138105">[7 more]</label></div><br/><div class="children"><div class="content">The term &quot;indexes&quot; serves both as the third-person singular present tense of the verb &quot;to index&quot; and as a plural noun form of &quot;index.&quot; In contrast, &quot;indices&quot; is the traditional plural form of &quot;index,&quot; particularly prevalent in mathematical and scientific contexts. While &quot;indexes&quot; is commonly used in general English, &quot;indices&quot; is often preferred in technical fields to maintain linguistic precision. Employing &quot;indices&quot; in such contexts helps distinguish between the action of indexing and the plural form of index, thereby enhancing clarity.</div><br/><div id="42138522" class="c"><input type="checkbox" id="c-42138522" checked=""/><div class="controls bullet"><span class="by">CharlesW</span><span>|</span><a href="#42138105">parent</a><span>|</span><a href="#42140104">next</a><span>|</span><label class="collapse" for="c-42138522">[-]</label><label class="expand" for="c-42138522">[1 more]</label></div><br/><div class="children"><div class="content">FWIW, both are fine (<a href="https:&#x2F;&#x2F;www.nasdaq.com&#x2F;articles&#x2F;indexes-or-indices-whats-the-deal-2016-05-12" rel="nofollow">https:&#x2F;&#x2F;www.nasdaq.com&#x2F;articles&#x2F;indexes-or-indices-whats-the...</a>), and SQLite and PostgreSQL documentation (as two popular examples) use &quot;indexes&quot;.</div><br/></div></div><div id="42140104" class="c"><input type="checkbox" id="c-42140104" checked=""/><div class="controls bullet"><span class="by">euroderf</span><span>|</span><a href="#42138105">parent</a><span>|</span><a href="#42138522">prev</a><span>|</span><a href="#42138564">next</a><span>|</span><label class="collapse" for="c-42140104">[-]</label><label class="expand" for="c-42140104">[2 more]</label></div><br/><div class="children"><div class="content">Try pluralizing &quot;time series&quot;. You won&#x27;t get far.<p>So what I&#x27;ve seen in Finland is people using &quot;time series&quot; for the plural and &quot;time serie&quot; for the singular.</div><br/><div id="42144626" class="c"><input type="checkbox" id="c-42144626" checked=""/><div class="controls bullet"><span class="by">Terr_</span><span>|</span><a href="#42138105">root</a><span>|</span><a href="#42140104">parent</a><span>|</span><a href="#42138564">next</a><span>|</span><label class="collapse" for="c-42144626">[-]</label><label class="expand" for="c-42144626">[1 more]</label></div><br/><div class="children"><div class="content">I wonder if one could make a grammar-argument that it&#x27;s like &quot;Attorneys General.&quot; :p</div><br/></div></div></div></div><div id="42138564" class="c"><input type="checkbox" id="c-42138564" checked=""/><div class="controls bullet"><span class="by">orthecreedence</span><span>|</span><a href="#42138105">parent</a><span>|</span><a href="#42140104">prev</a><span>|</span><a href="#42138511">next</a><span>|</span><label class="collapse" for="c-42138564">[-]</label><label class="expand" for="c-42138564">[2 more]</label></div><br/><div class="children"><div class="content">It depends on your audience. If you&#x27;re catering to academics, use &quot;indices.&quot; If you&#x27;re catering to the general person, &quot;indices&quot; comes off as pompous.</div><br/><div id="42144528" class="c"><input type="checkbox" id="c-42144528" checked=""/><div class="controls bullet"><span class="by">srcreigh</span><span>|</span><a href="#42138105">root</a><span>|</span><a href="#42138564">parent</a><span>|</span><a href="#42138511">next</a><span>|</span><label class="collapse" for="c-42144528">[-]</label><label class="expand" for="c-42144528">[1 more]</label></div><br/><div class="children"><div class="content">Nope. Academics prefer “indexes” when discussing databases.</div><br/></div></div></div></div><div id="42138511" class="c"><input type="checkbox" id="c-42138511" checked=""/><div class="controls bullet"><span class="by">gloflo</span><span>|</span><a href="#42138105">parent</a><span>|</span><a href="#42138564">prev</a><span>|</span><a href="#42141312">next</a><span>|</span><label class="collapse" for="c-42138511">[-]</label><label class="expand" for="c-42138511">[1 more]</label></div><br/><div class="children"><div class="content">Says who with what authority?<p>All major RDBMS use the term &quot;indexes&quot;.</div><br/></div></div></div></div><div id="42141312" class="c"><input type="checkbox" id="c-42141312" checked=""/><div class="controls bullet"><span class="by">w10-1</span><span>|</span><a href="#42138105">prev</a><span>|</span><a href="#42138995">next</a><span>|</span><label class="collapse" for="c-42141312">[-]</label><label class="expand" for="c-42141312">[1 more]</label></div><br/><div class="children"><div class="content">or emit tgf for yEd, for more layout variants with less work</div><br/></div></div><div id="42138995" class="c"><input type="checkbox" id="c-42138995" checked=""/><div class="controls bullet"><span class="by">vivzkestrel</span><span>|</span><a href="#42141312">prev</a><span>|</span><label class="collapse" for="c-42138995">[-]</label><label class="expand" for="c-42138995">[1 more]</label></div><br/><div class="children"><div class="content">would be real nice to see how postgres does the same thing, compare and take notes</div><br/></div></div></div></div></div></div></div></body></html>