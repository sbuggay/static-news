<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1693472463117" as="style"/><link rel="stylesheet" href="styles.css?v=1693472463117"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/lelanthran/l2h">Produce HTML from S-Expressions</a>Â <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>lelanthran</span> | <span>29 comments</span></div><br/><div><div id="37323435" class="c"><input type="checkbox" id="c-37323435" checked=""/><div class="controls bullet"><span class="by">sph</span><span>|</span><a href="#37333076">next</a><span>|</span><label class="collapse" for="c-37323435">[-]</label><label class="expand" for="c-37323435">[13 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>    (h1 :disabled Hello world!)
    (div :class=&quot;alert&quot;
          So long, and (b thanks) for all the (em fish))
</code></pre>
I hate that syntax for attributes.<p>:class=&quot;alert&quot; is strictly worse than ((class . &quot;alert&quot;)) or any other variation that actually leverages s-expressions instead of merging key and value into the same symbol. Ew.<p>Not a fan of the bare words instead of strings either, which means this cannot be naively evaluated by a Lisp.<p>I wouldn&#x27;t say this is producing html from s-exps, rather that it is vaguely inspired by them.</div><br/><div id="37323774" class="c"><input type="checkbox" id="c-37323774" checked=""/><div class="controls bullet"><span class="by">lelanthran</span><span>|</span><a href="#37323435">parent</a><span>|</span><a href="#37323722">next</a><span>|</span><label class="collapse" for="c-37323774">[-]</label><label class="expand" for="c-37323774">[5 more]</label></div><br/><div class="children"><div class="content">&gt; :class=&quot;alert&quot; is strictly worse than ((class . &quot;alert&quot;)) or any other variation that actually leverages s-expressions instead of merging key and value into the same symbol. Ew.<p>I hear you, but I wasn&#x27;t aiming for leveraging the power of macros. Using `((class . &quot;alert&quot;))` does not provide any benefits over :class=&quot;alert&quot;.<p>&gt; Not a fan of the bare words instead of strings either, which means this cannot be naively evaluated by a Lisp.<p>I traded off ergonomics against &quot;Evaluation by a Lisp processor&quot;.Instead of<p><pre><code>     (div &quot;My first &quot; (b &quot;hello&quot;) (em &quot; world&quot;))
</code></pre>
I&#x27;d rather do<p><pre><code>     (div My first (b hello) (em world))
</code></pre>
Thank you for your input.</div><br/><div id="37324927" class="c"><input type="checkbox" id="c-37324927" checked=""/><div class="controls bullet"><span class="by">sph</span><span>|</span><a href="#37323435">root</a><span>|</span><a href="#37323774">parent</a><span>|</span><a href="#37331297">next</a><span>|</span><label class="collapse" for="c-37324927">[-]</label><label class="expand" for="c-37324927">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Using `((class . &quot;alert&quot;))` does not provide any benefits over :class=&quot;alert&quot;.<p>Of course it does. It is a s-exp, like everything else in this language, so it&#x27;s just another list you can map, apply or otherwise transform. The keyword approach instead requires a weird incantation of<p><pre><code>    (string-trim (cadr (string-split (keyword-&gt;string :class=&quot;alert&quot;) ?=)) ?&quot;)
</code></pre>
to extract the value from the attribute. For what benefit? If the goal is using s-exps, why not use s-exps for everything?</div><br/><div id="37325580" class="c"><input type="checkbox" id="c-37325580" checked=""/><div class="controls bullet"><span class="by">lelanthran</span><span>|</span><a href="#37323435">root</a><span>|</span><a href="#37324927">parent</a><span>|</span><a href="#37331297">next</a><span>|</span><label class="collapse" for="c-37325580">[-]</label><label class="expand" for="c-37325580">[1 more]</label></div><br/><div class="children"><div class="content">&gt;  If the goal is using s-exps, why not use s-exps for everything?<p>My goal wasn&#x27;t &quot;Use s-expressions&quot;, it&#x27;s &quot;More readable and writable HTML trees.&quot;<p>This isn&#x27;t a Lisp interpreter either, TBH. There&#x27;s plenty of those around and they require the user to use a Lisp implementation, and write Lisp code.<p>map, string-trim, car, cadr etc are not required for s-expressions, they&#x27;re required for Lisp.</div><br/></div></div></div></div><div id="37331297" class="c"><input type="checkbox" id="c-37331297" checked=""/><div class="controls bullet"><span class="by">fouc</span><span>|</span><a href="#37323435">root</a><span>|</span><a href="#37323774">parent</a><span>|</span><a href="#37324927">prev</a><span>|</span><a href="#37323722">next</a><span>|</span><label class="collapse" for="c-37331297">[-]</label><label class="expand" for="c-37331297">[2 more]</label></div><br/><div class="children"><div class="content">This might be okay too?<p><pre><code>  (div (class &quot;alert&quot;) So long, and (b thanks) for all the (em fish))
</code></pre>
or<p><pre><code>  (div {class &quot;alert&quot;} So long, and (b thanks) for all the (em fish))</code></pre></div><br/><div id="37332662" class="c"><input type="checkbox" id="c-37332662" checked=""/><div class="controls bullet"><span class="by">chii</span><span>|</span><a href="#37323435">root</a><span>|</span><a href="#37331297">parent</a><span>|</span><a href="#37323722">next</a><span>|</span><label class="collapse" for="c-37332662">[-]</label><label class="expand" for="c-37332662">[1 more]</label></div><br/><div class="children"><div class="content">Personally, i&#x27;d go with<p><pre><code>   (div (class [alert someothercss]) [so long and (b [thanks]) for all the (em [fish and chips])])</code></pre></div><br/></div></div></div></div></div></div><div id="37323722" class="c"><input type="checkbox" id="c-37323722" checked=""/><div class="controls bullet"><span class="by">KRAKRISMOTT</span><span>|</span><a href="#37323435">parent</a><span>|</span><a href="#37323774">prev</a><span>|</span><a href="#37324248">next</a><span>|</span><label class="collapse" for="c-37323722">[-]</label><label class="expand" for="c-37323722">[2 more]</label></div><br/><div class="children"><div class="content">Like this amirite<p><a href="https:&#x2F;&#x2F;github.com&#x2F;weavejester&#x2F;hiccup">https:&#x2F;&#x2F;github.com&#x2F;weavejester&#x2F;hiccup</a></div><br/><div id="37326166" class="c"><input type="checkbox" id="c-37326166" checked=""/><div class="controls bullet"><span class="by">xemoka</span><span>|</span><a href="#37323435">root</a><span>|</span><a href="#37323722">parent</a><span>|</span><a href="#37324248">next</a><span>|</span><label class="collapse" for="c-37326166">[-]</label><label class="expand" for="c-37326166">[1 more]</label></div><br/><div class="children"><div class="content">The thi.ng umbrella has a hiccup variant for JS that looks pretty neat too: <a href="https:&#x2F;&#x2F;thi.ng&#x2F;hiccup" rel="nofollow noreferrer">https:&#x2F;&#x2F;thi.ng&#x2F;hiccup</a></div><br/></div></div></div></div><div id="37324248" class="c"><input type="checkbox" id="c-37324248" checked=""/><div class="controls bullet"><span class="by">Zambyte</span><span>|</span><a href="#37323435">parent</a><span>|</span><a href="#37323722">prev</a><span>|</span><a href="#37324167">next</a><span>|</span><label class="collapse" for="c-37324248">[-]</label><label class="expand" for="c-37324248">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Not a fan of the bare words instead of strings either, which means this cannot be naively evaluated by a Lisp.<p>Most Lisps (all that I know of)  have a way to convert symbols to strings. The hard part is resolving the ambiguity between what should be text, and what should be treated as an HTML node. Like, what if I wanted to actually write the string &quot;(b thanks)&quot; on a page? R7RS could probably do this with the pipe identifier syntax[0], but I think R7RS is fairly unique in its capability for identifiers (and thus symbols) with such a wide range of supported characters.<p>[0] <a href="https:&#x2F;&#x2F;standards.scheme.org&#x2F;corrected-r7rs&#x2F;r7rs-Z-H-4.html#TAG:__tex2page_sec_2.1" rel="nofollow noreferrer">https:&#x2F;&#x2F;standards.scheme.org&#x2F;corrected-r7rs&#x2F;r7rs-Z-H-4.html#...</a></div><br/><div id="37324979" class="c"><input type="checkbox" id="c-37324979" checked=""/><div class="controls bullet"><span class="by">sph</span><span>|</span><a href="#37323435">root</a><span>|</span><a href="#37324248">parent</a><span>|</span><a href="#37324167">next</a><span>|</span><label class="collapse" for="c-37324979">[-]</label><label class="expand" for="c-37324979">[2 more]</label></div><br/><div class="children"><div class="content">Bare words are fine until you have a variable with the same name as your bare word, so you need additional syntax to determine if you&#x27;re referencing a variable, or it is just text.</div><br/><div id="37325608" class="c"><input type="checkbox" id="c-37325608" checked=""/><div class="controls bullet"><span class="by">lelanthran</span><span>|</span><a href="#37323435">root</a><span>|</span><a href="#37324979">parent</a><span>|</span><a href="#37324167">next</a><span>|</span><label class="collapse" for="c-37325608">[-]</label><label class="expand" for="c-37325608">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Bare words are fine until you have a variable with the same name as your bare word, so you need additional syntax to determine if you&#x27;re referencing a variable, or it is just text.<p>This doesn&#x27;t have variables. Or functions.</div><br/></div></div></div></div></div></div><div id="37324167" class="c"><input type="checkbox" id="c-37324167" checked=""/><div class="controls bullet"><span class="by">messe</span><span>|</span><a href="#37323435">parent</a><span>|</span><a href="#37324248">prev</a><span>|</span><a href="#37324214">next</a><span>|</span><label class="collapse" for="c-37324167">[-]</label><label class="expand" for="c-37324167">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Not a fan of the bare words instead of strings either<p>It <i>is</i> consistent with HTML however, especially the fact that both collapse whitespace.</div><br/></div></div><div id="37324214" class="c"><input type="checkbox" id="c-37324214" checked=""/><div class="controls bullet"><span class="by">giraffe_lady</span><span>|</span><a href="#37323435">parent</a><span>|</span><a href="#37324167">prev</a><span>|</span><a href="#37333076">next</a><span>|</span><label class="collapse" for="c-37324214">[-]</label><label class="expand" for="c-37324214">[1 more]</label></div><br/><div class="children"><div class="content">Pollen&#x27;s tagged xexp is probably the most sophisticated approach to this I&#x27;ve seen. Though hiccup is about as good and easier to work with. <a href="https:&#x2F;&#x2F;docs.racket-lang.org&#x2F;txexpr&#x2F;index.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;docs.racket-lang.org&#x2F;txexpr&#x2F;index.html</a></div><br/></div></div></div></div><div id="37333076" class="c"><input type="checkbox" id="c-37333076" checked=""/><div class="controls bullet"><span class="by">neilv</span><span>|</span><a href="#37323435">prev</a><span>|</span><a href="#37333989">next</a><span>|</span><label class="collapse" for="c-37333076">[-]</label><label class="expand" for="c-37333076">[1 more]</label></div><br/><div class="children"><div class="content">The Scheme community seemed to standardize on Oleg Kiselyov&#x27;s SXML format for XML and HTML: <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;SXML" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;SXML</a><p>The initial driver for adoption was that Oleg made an excellent XML parser (SSAX) that used SXML.  Then a bunch of people (including me) built new tools to work with SXML, and changed existing tools to use it.<p>Later, I realized that SXML permitting unnecessary list nesting, which initially seemed sloppy and inefficient, actually has a very useful efficiency property, once you&#x27;re using immutable lists: you can compose larger XML with a small allocation and no mutation like:<p><pre><code>    (list some-huge-tree another-huge-tree)
</code></pre>
Racket-specific starting point: <a href="https:&#x2F;&#x2F;docs.racket-lang.org&#x2F;sxml-intro&#x2F;index.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;docs.racket-lang.org&#x2F;sxml-intro&#x2F;index.html</a></div><br/></div></div><div id="37333989" class="c"><input type="checkbox" id="c-37333989" checked=""/><div class="controls bullet"><span class="by">pgt</span><span>|</span><a href="#37333076">prev</a><span>|</span><a href="#37333730">next</a><span>|</span><label class="collapse" for="c-37333989">[-]</label><label class="expand" for="c-37333989">[1 more]</label></div><br/><div class="children"><div class="content">Hiccup syntax for Clojure uses hash maps (curly braces) for attrs, e.g. `{:style {:background &quot;red&quot; :margin &quot;1em&quot;}}`<p>See Reagent which uses Hiccup syntax: <a href="https:&#x2F;&#x2F;reagent-project.github.io&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;reagent-project.github.io&#x2F;</a><p><pre><code>    (defn simple-component []
      [:div
       [:p &quot;I am a component!&quot;]
       [:p.someclass
        &quot;I have &quot; [:strong &quot;bold&quot;]
        [:span {:style {:color &quot;red&quot;}} &quot; and red &quot;] &quot;text.&quot;]])</code></pre></div><br/></div></div><div id="37333730" class="c"><input type="checkbox" id="c-37333730" checked=""/><div class="controls bullet"><span class="by">jll29</span><span>|</span><a href="#37333989">prev</a><span>|</span><a href="#37324438">next</a><span>|</span><label class="collapse" for="c-37333730">[-]</label><label class="expand" for="c-37333730">[1 more]</label></div><br/><div class="children"><div class="content">If one uses the XML tree of the XHTML as the primary internal representation instead of S-expressions, no conversion is needed at all, as XHTML can be viewed in the browser simply by associating a CSS style sheet via &quot;rel&quot;.<p>Nothing is a faster converter than avoiding a conversion step altogether... but that is not why I did it; I used that technique in my Ph.D. thesis back in 2007 [1,2] to avoid directories full with hundreds of auxiliary files (xml&#x2F; html.tmp&#x2F; ..), which may be confusing to manage, slow to copy, and eventually lead to the file system running out of i-nodes.<p>EDIT:<p>[1] <a href="https:&#x2F;&#x2F;www.sciencedirect.com&#x2F;science&#x2F;article&#x2F;abs&#x2F;pii&#x2F;S0198971505000578" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.sciencedirect.com&#x2F;science&#x2F;article&#x2F;abs&#x2F;pii&#x2F;S01989...</a><p>[2] pp. 132-134 in <a href="https:&#x2F;&#x2F;era.ed.ac.uk&#x2F;bitstream&#x2F;handle&#x2F;1842&#x2F;1849&#x2F;leidner-2007-phd.pdf;jsessionid=70AD79221944A3A1750AEBE893F8D757?sequence=1" rel="nofollow noreferrer">https:&#x2F;&#x2F;era.ed.ac.uk&#x2F;bitstream&#x2F;handle&#x2F;1842&#x2F;1849&#x2F;leidner-2007...</a></div><br/></div></div><div id="37324438" class="c"><input type="checkbox" id="c-37324438" checked=""/><div class="controls bullet"><span class="by">brabel</span><span>|</span><a href="#37333730">prev</a><span>|</span><a href="#37326550">next</a><span>|</span><label class="collapse" for="c-37324438">[-]</label><label class="expand" for="c-37324438">[1 more]</label></div><br/><div class="children"><div class="content">There are so many of these already: <a href="https:&#x2F;&#x2F;cliki.net&#x2F;html%20generator" rel="nofollow noreferrer">https:&#x2F;&#x2F;cliki.net&#x2F;html%20generator</a><p>And still I can&#x27;t find one that I like (which is why I also wrote one myself :D).</div><br/></div></div><div id="37326550" class="c"><input type="checkbox" id="c-37326550" checked=""/><div class="controls bullet"><span class="by">junon</span><span>|</span><a href="#37324438">prev</a><span>|</span><a href="#37333494">next</a><span>|</span><label class="collapse" for="c-37326550">[-]</label><label class="expand" for="c-37326550">[2 more]</label></div><br/><div class="children"><div class="content">I actually really love this. I much prefer this over HTML syntax. Add a way to do custom tags and imports and this becomes a very, very neat static site generation tool.</div><br/><div id="37332474" class="c"><input type="checkbox" id="c-37332474" checked=""/><div class="controls bullet"><span class="by">lelanthran</span><span>|</span><a href="#37326550">parent</a><span>|</span><a href="#37333494">next</a><span>|</span><label class="collapse" for="c-37332474">[-]</label><label class="expand" for="c-37332474">[1 more]</label></div><br/><div class="children"><div class="content">&gt;  Add a way to do custom tags<p>I don&#x27;t know what that means - it currently uses the first element of the list as the tagname, so you can use whatever tags you want to.<p>&gt; and imports and this becomes a very, very neat static site generation tool.<p>I&#x27;ve toyed with the idea of adding more functionality (like imports, environment variables, conditionals, etc).<p>Not too sure I want to go in that direction.</div><br/></div></div></div></div><div id="37333494" class="c"><input type="checkbox" id="c-37333494" checked=""/><div class="controls bullet"><span class="by">pharmakom</span><span>|</span><a href="#37326550">prev</a><span>|</span><a href="#37327587">next</a><span>|</span><label class="collapse" for="c-37333494">[-]</label><label class="expand" for="c-37333494">[1 more]</label></div><br/><div class="children"><div class="content">Is there a standard format for a-expressions?<p>I want to use them but I cannot find a spec like for JSON</div><br/></div></div><div id="37327587" class="c"><input type="checkbox" id="c-37327587" checked=""/><div class="controls bullet"><span class="by">leumassuehtam</span><span>|</span><a href="#37333494">prev</a><span>|</span><a href="#37325985">next</a><span>|</span><label class="collapse" for="c-37327587">[-]</label><label class="expand" for="c-37327587">[1 more]</label></div><br/><div class="children"><div class="content">Shameless plug of a similar idea to embed lisp into LaTeX files.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;keyehzy&#x2F;lispylatex">https:&#x2F;&#x2F;github.com&#x2F;keyehzy&#x2F;lispylatex</a></div><br/></div></div><div id="37325985" class="c"><input type="checkbox" id="c-37325985" checked=""/><div class="controls bullet"><span class="by">fouc</span><span>|</span><a href="#37327587">prev</a><span>|</span><a href="#37332920">next</a><span>|</span><label class="collapse" for="c-37325985">[-]</label><label class="expand" for="c-37325985">[1 more]</label></div><br/><div class="children"><div class="content">Reminds me of hyperscript like in <a href="https:&#x2F;&#x2F;mithril.js.org" rel="nofollow noreferrer">https:&#x2F;&#x2F;mithril.js.org</a><p><pre><code>  m(&quot;h1&quot;, {class: &quot;title&quot;}, &quot;My first app&quot;)</code></pre></div><br/></div></div><div id="37326289" class="c"><input type="checkbox" id="c-37326289" checked=""/><div class="controls bullet"><span class="by">bjoli</span><span>|</span><a href="#37332920">prev</a><span>|</span><a href="#37324327">next</a><span>|</span><label class="collapse" for="c-37326289">[-]</label><label class="expand" for="c-37326289">[1 more]</label></div><br/><div class="children"><div class="content">I your aready using a scheme you can use SXML. The tooling makes XML fun.</div><br/></div></div><div id="37324327" class="c"><input type="checkbox" id="c-37324327" checked=""/><div class="controls bullet"><span class="by">fabiofzero</span><span>|</span><a href="#37326289">prev</a><span>|</span><a href="#37327354">next</a><span>|</span><label class="collapse" for="c-37324327">[-]</label><label class="expand" for="c-37324327">[2 more]</label></div><br/><div class="children"><div class="content">Basically Haml then.</div><br/><div id="37324964" class="c"><input type="checkbox" id="c-37324964" checked=""/><div class="controls bullet"><span class="by">iLemming</span><span>|</span><a href="#37324327">parent</a><span>|</span><a href="#37327354">next</a><span>|</span><label class="collapse" for="c-37324964">[-]</label><label class="expand" for="c-37324964">[1 more]</label></div><br/><div class="children"><div class="content">Haml is not homoiconic. It&#x27;s like saying &quot;the flask is basically a teapot&quot;. Sure, they both can serve similar purposes, but categorically they are very different things. They look different, they are usually made of different materials, and they are used very differently. So, no, it&#x27;s not &quot;Basically Haml&quot;</div><br/></div></div></div></div><div id="37327354" class="c"><input type="checkbox" id="c-37327354" checked=""/><div class="controls bullet"><span class="by">datastack</span><span>|</span><a href="#37324327">prev</a><span>|</span><label class="collapse" for="c-37327354">[-]</label><label class="expand" for="c-37327354">[2 more]</label></div><br/><div class="children"><div class="content">Nice, thanks for sharing. Curious what your motivation was for making it. Perhaps include a &quot;why&quot; at the start of the repo. As evidenced by some comments, depending on whether the goal was to write HTML with a lisp compatible syntax, vs, a more concise but simple xml alternative, it creates different expectations. Personally I&#x27;m just interested from a parser&#x2F; compiler perspective.</div><br/><div id="37332487" class="c"><input type="checkbox" id="c-37332487" checked=""/><div class="controls bullet"><span class="by">lelanthran</span><span>|</span><a href="#37327354">parent</a><span>|</span><label class="collapse" for="c-37332487">[-]</label><label class="expand" for="c-37332487">[1 more]</label></div><br/><div class="children"><div class="content">&gt;  Curious what your motivation was for making it. Perhaps include a &quot;why&quot; at the start of the repo. As evidenced by some comments, depending on whether the goal was to write HTML with a lisp compatible syntax, vs, a more concise but simple xml alternative, it creates different expectations.<p>You are quite correct, my goal appeared to be &quot;Lisp interpreted HTML&quot;, my actual goal is &quot;Write HTML tag trees easier&quot;.</div><br/></div></div></div></div></div></div></div></div></div></body></html>