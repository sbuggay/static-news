<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1688374862775" as="style"/><link rel="stylesheet" href="styles.css?v=1688374862775"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/szabolcsdombi/optimization-demo">Show HN: Python can make 3M+ WebSocket keys per second</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>cprogrammer1994</span> | <span>5 comments</span></div><br/><div><div id="36569879" class="c"><input type="checkbox" id="c-36569879" checked=""/><div class="controls bullet"><span class="by">Someone</span><span>|</span><a href="#36570269">next</a><span>|</span><label class="collapse" for="c-36569879">[-]</label><label class="expand" for="c-36569879">[2 more]</label></div><br/><div class="children"><div class="content">The title should be “optimization-demo” (original title) or “Replacing parts of Python programs by C++ can be easy and profitable”.<p>They replace Python code that makes 5 calls into native code by code that makes 1 call that makes those 5 calls, and get a speed up from 869k calls per second to 3.15m calls per second, so a snarky title could even be “Python-to-native calls are slow”.<p>They could even measure it by adding a C++ version of that<p><pre><code>  def magic_accept(key: str) -&gt; str:
    return &#x27;s3pPLMBiTxaQ9kYGzzhZRbK+xOo=&#x27;
</code></pre>
code and benchmarking that.</div><br/><div id="36570336" class="c"><input type="checkbox" id="c-36570336" checked=""/><div class="controls bullet"><span class="by">mangeld</span><span>|</span><a href="#36569879">parent</a><span>|</span><a href="#36570269">next</a><span>|</span><label class="collapse" for="c-36570336">[-]</label><label class="expand" for="c-36570336">[1 more]</label></div><br/><div class="children"><div class="content">Did you take a look at the C++ implementation of the hashing function they did? I didn&#x27;t see a single call made there. They replaced python code that makes 5 calls into a single call.</div><br/></div></div></div></div><div id="36570269" class="c"><input type="checkbox" id="c-36570269" checked=""/><div class="controls bullet"><span class="by">throwaway2037</span><span>|</span><a href="#36569879">prev</a><span>|</span><label class="collapse" for="c-36570269">[-]</label><label class="expand" for="c-36570269">[2 more]</label></div><br/><div class="children"><div class="content">The hardest part of debugging Python is &quot;hitting the wall&quot; when you come to a native library (compiled C code).  And Python has achieved a lot of speed-ups from Py2 to Py3 by adding more compiled C code.  This is a real blocker for understanding the foundation library.<p>On the other hand, in Java, with a few exceptions around Swing (native painting for GUIs) in Java, almost <i>everything</i> is written in pure Java, so you can debug all the way down if need be.  It is a huge help for understanding the foundation library and all of its edge cases (normal for any huge library).  Modern Java debuggers, like IntelliJ, are so crazy, they will decompile JARs and allow you to set debug breakpoints and step-into decompiled code.  It is mind blowing when trying to debug a library that you don&#x27;t own the source code (random quant lib, ancient auth lib, etc.).</div><br/><div id="36570446" class="c"><input type="checkbox" id="c-36570446" checked=""/><div class="controls bullet"><span class="by">PhilipRoman</span><span>|</span><a href="#36570269">parent</a><span>|</span><label class="collapse" for="c-36570446">[-]</label><label class="expand" for="c-36570446">[1 more]</label></div><br/><div class="children"><div class="content">Are python debuggers really unable to integrate with something like GDB? I have no problem debugging native calls from Java. During development I&#x27;ve never seen a case where library source was unavailable. Even proprietary components from other companies come with source included.</div><br/></div></div></div></div></div></div></div></div></div></body></html>