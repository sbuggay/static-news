<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1712653274363" as="style"/><link rel="stylesheet" href="styles.css?v=1712653274363"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://danburzo.ro/responsive-images-html/">How to think about HTML responsive images</a> <span class="domain">(<a href="https://danburzo.ro">danburzo.ro</a>)</span></div><div class="subtext"><span>danburzo</span> | <span>30 comments</span></div><br/><div><div id="39976812" class="c"><input type="checkbox" id="c-39976812" checked=""/><div class="controls bullet"><span class="by">fifticon</span><span>|</span><a href="#39976754">next</a><span>|</span><label class="collapse" for="c-39976812">[-]</label><label class="expand" for="c-39976812">[3 more]</label></div><br/><div class="children"><div class="content">One frequent unpleasant side-effect of responsive design, is sites that resize themselves when you try to zoom the page.
  For images, this sometimes turns bizarre:
If you try to zoom the current webpage to more clearly see details of an image, the web page will try to &quot;help&quot; you by resizing the image to continue to fit in your viewport.
The net result is, that the image often gets even smaller when you try to zoom (because neighbour elements like text still grows).
   Reddit is one of the sites guilty of this.
Worse, they even do it if you &quot;open image in new tab&quot;. 
  I have surrendered on this, and instead just DOWNLOAD the image to disk, to then reopen it in a separate tab, to finally zoom it.. Sigh.</div><br/><div id="39977321" class="c"><input type="checkbox" id="c-39977321" checked=""/><div class="controls bullet"><span class="by">Lammy</span><span>|</span><a href="#39976812">parent</a><span>|</span><a href="#39976893">next</a><span>|</span><label class="collapse" for="c-39977321">[-]</label><label class="expand" for="c-39977321">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Reddit is one of the sites guilty of this. Worse, they even do it if you &quot;open image in new tab&quot;.<p>You might enjoy <a href="https:&#x2F;&#x2F;addons.mozilla.org&#x2F;en-US&#x2F;firefox&#x2F;addon&#x2F;load-reddit-images-directly&#x2F;" rel="nofollow">https:&#x2F;&#x2F;addons.mozilla.org&#x2F;en-US&#x2F;firefox&#x2F;addon&#x2F;load-reddit-i...</a></div><br/></div></div><div id="39976893" class="c"><input type="checkbox" id="c-39976893" checked=""/><div class="controls bullet"><span class="by">danburzo</span><span>|</span><a href="#39976812">parent</a><span>|</span><a href="#39977321">prev</a><span>|</span><a href="#39976754">next</a><span>|</span><label class="collapse" for="c-39976893">[-]</label><label class="expand" for="c-39976893">[1 more]</label></div><br/><div class="children"><div class="content">Oh yeah, definitely something I’ve witnessed and been frustrated by before. Some of it stems from improper use of CSS units [1], and the only real recommendation I have is for people to _test_ for basic things like zooming in and out of the page, while keeping close in mind _the reasons_ people might want to zoom in and out of the page.<p>[1] <a href="https:&#x2F;&#x2F;ashleemboyer.com&#x2F;blog&#x2F;why-you-should-use-px-units-for-margin-padding-and-other-spacing-techniques" rel="nofollow">https:&#x2F;&#x2F;ashleemboyer.com&#x2F;blog&#x2F;why-you-should-use-px-units-fo...</a></div><br/></div></div></div></div><div id="39976754" class="c"><input type="checkbox" id="c-39976754" checked=""/><div class="controls bullet"><span class="by">frankzander</span><span>|</span><a href="#39976812">prev</a><span>|</span><a href="#39977198">next</a><span>|</span><label class="collapse" for="c-39976754">[-]</label><label class="expand" for="c-39976754">[3 more]</label></div><br/><div class="children"><div class="content">To be honest ... this is IMHO by far one of the most complicated thing in the whole webdev area. 
I don&#x27;t get it why ppl complain about how difficult CSS is ... but to foresee how an image behaves and find a good balance between size and file size is a hart thing to juggle with.<p>This article clarifies a lot of things for me so thx for that.</div><br/><div id="39976890" class="c"><input type="checkbox" id="c-39976890" checked=""/><div class="controls bullet"><span class="by">omnimus</span><span>|</span><a href="#39976754">parent</a><span>|</span><a href="#39976919">next</a><span>|</span><label class="collapse" for="c-39976890">[-]</label><label class="expand" for="c-39976890">[1 more]</label></div><br/><div class="children"><div class="content">I dont think topic thst can be explained in one blogpost is the most complicated thing in webdev.<p>People often just dont understand srcset&#x2F;sizes and try to do too much and make some kind of media queries logic instead of leaving all to browser.</div><br/></div></div><div id="39976919" class="c"><input type="checkbox" id="c-39976919" checked=""/><div class="controls bullet"><span class="by">azangru</span><span>|</span><a href="#39976754">parent</a><span>|</span><a href="#39976890">prev</a><span>|</span><a href="#39977198">next</a><span>|</span><label class="collapse" for="c-39976919">[-]</label><label class="expand" for="c-39976919">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I don&#x27;t get it why ppl complain about how difficult CSS is ...<p>It&#x27;s a huge language. There are so... many... properties.</div><br/></div></div></div></div><div id="39977198" class="c"><input type="checkbox" id="c-39977198" checked=""/><div class="controls bullet"><span class="by">liampulles</span><span>|</span><a href="#39976754">prev</a><span>|</span><a href="#39976687">next</a><span>|</span><label class="collapse" for="c-39977198">[-]</label><label class="expand" for="c-39977198">[1 more]</label></div><br/><div class="children"><div class="content">I like the approach of displaying a smaller compressed version and enclosing the img in an a tag to link to the larger image.<p>Let me load the page quickly if the doggo is just being used as an aside to the main content. Let me click on it to get the full raw image if I&#x27;m so enticed by that over the shoulder glance.</div><br/></div></div><div id="39976687" class="c"><input type="checkbox" id="c-39976687" checked=""/><div class="controls bullet"><span class="by">Lorin</span><span>|</span><a href="#39977198">prev</a><span>|</span><a href="#39976891">next</a><span>|</span><label class="collapse" for="c-39976687">[-]</label><label class="expand" for="c-39976687">[5 more]</label></div><br/><div class="children"><div class="content">I have no idea why browsers moved away from providing the DPR (device pixel ratio) header on media requests so one could continue using the sensible and simple &lt;img&gt; whilst the server could return the correct images on its own.<p>Would love to know the rationale.</div><br/><div id="39976762" class="c"><input type="checkbox" id="c-39976762" checked=""/><div class="controls bullet"><span class="by">danburzo</span><span>|</span><a href="#39976687">parent</a><span>|</span><a href="#39976922">next</a><span>|</span><label class="collapse" for="c-39976762">[-]</label><label class="expand" for="c-39976762">[1 more]</label></div><br/><div class="children"><div class="content">I haven’t followed Client Hints closely, but a change[1] in RFC 9842 internal drafts “removed specific features to be defined in other specifications”, and the `DPR` header ended up as `Sec-CH-DPR` in the nascent Responsive Images Client Hints spec[2].<p>[1] <a href="https:&#x2F;&#x2F;datatracker.ietf.org&#x2F;doc&#x2F;html&#x2F;draft-ietf-httpbis-client-hints-07#appendix-B.8" rel="nofollow">https:&#x2F;&#x2F;datatracker.ietf.org&#x2F;doc&#x2F;html&#x2F;draft-ietf-httpbis-cli...</a>
[2] <a href="https:&#x2F;&#x2F;wicg.github.io&#x2F;responsive-image-client-hints&#x2F;#sec-ch-dpr" rel="nofollow">https:&#x2F;&#x2F;wicg.github.io&#x2F;responsive-image-client-hints&#x2F;#sec-ch...</a></div><br/></div></div><div id="39976922" class="c"><input type="checkbox" id="c-39976922" checked=""/><div class="controls bullet"><span class="by">omnimus</span><span>|</span><a href="#39976687">parent</a><span>|</span><a href="#39976762">prev</a><span>|</span><a href="#39976770">next</a><span>|</span><label class="collapse" for="c-39976922">[-]</label><label class="expand" for="c-39976922">[1 more]</label></div><br/><div class="children"><div class="content">Isnt it same reason why using srcset device ratio is not recommended and you should use widths.
Sending DPR in header is kinda useless and maybe hurts privacy&#x2F;fingerprinting?</div><br/></div></div><div id="39976770" class="c"><input type="checkbox" id="c-39976770" checked=""/><div class="controls bullet"><span class="by">javman</span><span>|</span><a href="#39976687">parent</a><span>|</span><a href="#39976922">prev</a><span>|</span><a href="#39977060">next</a><span>|</span><label class="collapse" for="c-39976770">[-]</label><label class="expand" for="c-39976770">[1 more]</label></div><br/><div class="children"><div class="content">The server doesn&#x27;t know what size the image will be displayed, but the browser does.</div><br/></div></div><div id="39977060" class="c"><input type="checkbox" id="c-39977060" checked=""/><div class="controls bullet"><span class="by">globular-toast</span><span>|</span><a href="#39976687">parent</a><span>|</span><a href="#39976770">prev</a><span>|</span><a href="#39976891">next</a><span>|</span><label class="collapse" for="c-39977060">[-]</label><label class="expand" for="c-39977060">[1 more]</label></div><br/><div class="children"><div class="content">Doesn&#x27;t work for static sites. At one point it seemed like home computers would be going away and everyone would just use small, thin clients with most of the &quot;work&quot; done on servers. I&#x27;m glad this hasn&#x27;t happened. I prefer the idea of a static site where the user&#x27;s browser makes all the decisions.</div><br/></div></div></div></div><div id="39976891" class="c"><input type="checkbox" id="c-39976891" checked=""/><div class="controls bullet"><span class="by">est</span><span>|</span><a href="#39976687">prev</a><span>|</span><a href="#39963632">next</a><span>|</span><label class="collapse" for="c-39976891">[-]</label><label class="expand" for="c-39976891">[2 more]</label></div><br/><div class="children"><div class="content">Is it possible to serve <i>one</i> image file of progressive encoding and display different size on different media conditions?<p>As a hack I would just put the blob offset in the URL as part of file name, and use js to load those images.<p>For example:<p>filename.1000-120w.3000-240w.5000-360w.jpg<p>means the 0-1000 bytes will get you 120w image, 0-3000 bytes will get you the 240w image, 0-5000 bytes will get you the 360w image, and load full will get you the original image. Make an http request with a Content-Range header and render the result with canvas or something.</div><br/><div id="39977465" class="c"><input type="checkbox" id="c-39977465" checked=""/><div class="controls bullet"><span class="by">CGamesPlay</span><span>|</span><a href="#39976891">parent</a><span>|</span><a href="#39963632">next</a><span>|</span><label class="collapse" for="c-39977465">[-]</label><label class="expand" for="c-39977465">[1 more]</label></div><br/><div class="children"><div class="content">What problem does this solve?</div><br/></div></div></div></div><div id="39963632" class="c"><input type="checkbox" id="c-39963632" checked=""/><div class="controls bullet"><span class="by">nicbou</span><span>|</span><a href="#39976891">prev</a><span>|</span><a href="#39976031">next</a><span>|</span><label class="collapse" for="c-39963632">[-]</label><label class="expand" for="c-39963632">[2 more]</label></div><br/><div class="children"><div class="content">Well done! Having read the source documents a few times, I wish that your article existed before. It took me a while to wrap my head around the concepts and to get them to work properly.</div><br/><div id="39976977" class="c"><input type="checkbox" id="c-39976977" checked=""/><div class="controls bullet"><span class="by">danburzo</span><span>|</span><a href="#39963632">parent</a><span>|</span><a href="#39976031">next</a><span>|</span><label class="collapse" for="c-39976977">[-]</label><label class="expand" for="c-39976977">[1 more]</label></div><br/><div class="children"><div class="content">Thank you for the kind words! I have fun reading specs, but the HTML Standard is denser and organized more… cross-referentially than the average CSS spec, so there was a bit of putting-things-together.</div><br/></div></div></div></div><div id="39976031" class="c"><input type="checkbox" id="c-39976031" checked=""/><div class="controls bullet"><span class="by">perardi</span><span>|</span><a href="#39963632">prev</a><span>|</span><a href="#39976061">next</a><span>|</span><label class="collapse" for="c-39976031">[-]</label><label class="expand" for="c-39976031">[2 more]</label></div><br/><div class="children"><div class="content">I just have to compliment the lovely external link motif here.</div><br/><div id="39976707" class="c"><input type="checkbox" id="c-39976707" checked=""/><div class="controls bullet"><span class="by">danburzo</span><span>|</span><a href="#39976031">parent</a><span>|</span><a href="#39976061">next</a><span>|</span><label class="collapse" for="c-39976707">[-]</label><label class="expand" for="c-39976707">[1 more]</label></div><br/><div class="children"><div class="content">Thank you! I must have picked up the idea from from Matthew Butterick’s “Practical Typography”, but with the symbol drawn rather than as the degrees character, to spare screen reader users from hearing that constantly.<p><a href="https:&#x2F;&#x2F;practicaltypography.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;practicaltypography.com&#x2F;</a></div><br/></div></div></div></div><div id="39976061" class="c"><input type="checkbox" id="c-39976061" checked=""/><div class="controls bullet"><span class="by">orliesaurus</span><span>|</span><a href="#39976031">prev</a><span>|</span><a href="#39963884">next</a><span>|</span><label class="collapse" for="c-39976061">[-]</label><label class="expand" for="c-39976061">[3 more]</label></div><br/><div class="children"><div class="content">Looks like the verbose &lt;picture&gt; approach would be the most advantageous for backwards and forwards compatibility</div><br/><div id="39976434" class="c"><input type="checkbox" id="c-39976434" checked=""/><div class="controls bullet"><span class="by">stefanfisk</span><span>|</span><a href="#39976061">parent</a><span>|</span><a href="#39963884">next</a><span>|</span><label class="collapse" for="c-39976434">[-]</label><label class="expand" for="c-39976434">[2 more]</label></div><br/><div class="children"><div class="content">Having the server decide the image format based on the accept header is simpler. Services like <a href="https:&#x2F;&#x2F;imagekit.io&#x2F;" rel="nofollow">https:&#x2F;&#x2F;imagekit.io&#x2F;</a> (no affiliation) can do that for you.</div><br/><div id="39976826" class="c"><input type="checkbox" id="c-39976826" checked=""/><div class="controls bullet"><span class="by">danburzo</span><span>|</span><a href="#39976061">root</a><span>|</span><a href="#39976434">parent</a><span>|</span><a href="#39963884">next</a><span>|</span><label class="collapse" for="c-39976826">[-]</label><label class="expand" for="c-39976826">[1 more]</label></div><br/><div class="children"><div class="content">Yes, a smart server (that does more than serve static image assets) can do the heavy lifting and alleviate some of the HTML markup complexity.<p>It has the `Accept` header as a guide to what image formats the client supports, and with Responsive Image Client Hints[1], it can opt into more info from the client (device pixel ratio, image layout width, viewport width).<p>Without relying on server features, `&lt;picture&gt;` with `&lt;source type=&#x27;…&#x27;&gt;` is the way to serve images in newer formats without breaking in less capable browsers.<p>It’s interesting that `image-set()`, the CSS sort-of counterpart to `&lt;picture&gt;`, bakes in the media type along with the resolution in a single syntax [2]. Which you could potentially see happening in `srcset`, but it makes the descriptive&#x2F;prescriptive boundary a bit blurry, so it would complicate things IMO.<p>[1]: <a href="https:&#x2F;&#x2F;wicg.github.io&#x2F;responsive-image-client-hints&#x2F;" rel="nofollow">https:&#x2F;&#x2F;wicg.github.io&#x2F;responsive-image-client-hints&#x2F;</a>
[2]: <a href="https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;CSS&#x2F;image&#x2F;image-set" rel="nofollow">https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;CSS&#x2F;image&#x2F;image...</a></div><br/></div></div></div></div></div></div><div id="39963884" class="c"><input type="checkbox" id="c-39963884" checked=""/><div class="controls bullet"><span class="by">victorbjorklund</span><span>|</span><a href="#39976061">prev</a><span>|</span><a href="#39976897">next</a><span>|</span><label class="collapse" for="c-39963884">[-]</label><label class="expand" for="c-39963884">[2 more]</label></div><br/><div class="children"><div class="content">Well-written. Will def come back to this.</div><br/><div id="39976963" class="c"><input type="checkbox" id="c-39976963" checked=""/><div class="controls bullet"><span class="by">danburzo</span><span>|</span><a href="#39963884">parent</a><span>|</span><a href="#39976897">next</a><span>|</span><label class="collapse" for="c-39976963">[-]</label><label class="expand" for="c-39976963">[1 more]</label></div><br/><div class="children"><div class="content">Thank you for the kind words!</div><br/></div></div></div></div><div id="39976897" class="c"><input type="checkbox" id="c-39976897" checked=""/><div class="controls bullet"><span class="by">knallfrosch</span><span>|</span><a href="#39963884">prev</a><span>|</span><a href="#39976647">next</a><span>|</span><label class="collapse" for="c-39976897">[-]</label><label class="expand" for="c-39976897">[1 more]</label></div><br/><div class="children"><div class="content">Now you just need to know at which size your image will be displayed at in a flex container and you&#x27;re done :))</div><br/></div></div><div id="39976647" class="c"><input type="checkbox" id="c-39976647" checked=""/><div class="controls bullet"><span class="by">troupo</span><span>|</span><a href="#39976897">prev</a><span>|</span><a href="#39975585">next</a><span>|</span><label class="collapse" for="c-39976647">[-]</label><label class="expand" for="c-39976647">[3 more]</label></div><br/><div class="children"><div class="content">So, the question remains: how do I supply various dynamic densities in different formats?</div><br/><div id="39976933" class="c"><input type="checkbox" id="c-39976933" checked=""/><div class="controls bullet"><span class="by">danburzo</span><span>|</span><a href="#39976647">parent</a><span>|</span><a href="#39975585">next</a><span>|</span><label class="collapse" for="c-39976933">[-]</label><label class="expand" for="c-39976933">[2 more]</label></div><br/><div class="children"><div class="content">I haven’t explicitly mentioned it in the article, but `srcset` + `sizes` is a way to provide dynamic densities for one image format, then multiply that with one `&lt;source&gt;` for each image format:<p><pre><code>    &lt;picture&gt;
      &lt;source srcset=&#x27;…&#x27; sizes=&#x27;…&#x27; type=&#x27;image&#x2F;avif&#x27;&gt;
      &lt;source srcset=&#x27;…&#x27; sizes=&#x27;…&#x27; type=&#x27;image&#x2F;webp&#x27;&gt;
      &lt;img srcset=&#x27;…&#x27; sizes=&#x27;…&#x27;&gt;
    &lt;&#x2F;picture&gt;

</code></pre>
If this is what you mean, maybe it would be better to include in the article?</div><br/><div id="39977190" class="c"><input type="checkbox" id="c-39977190" checked=""/><div class="controls bullet"><span class="by">troupo</span><span>|</span><a href="#39976647">root</a><span>|</span><a href="#39976933">parent</a><span>|</span><a href="#39975585">next</a><span>|</span><label class="collapse" for="c-39977190">[-]</label><label class="expand" for="c-39977190">[1 more]</label></div><br/><div class="children"><div class="content">Ah, perfect. For some reason I didn&#x27;t realise that source has the same attributes as img.<p>If it&#x27;s not too much work, I think it would be good to add to the article for completeness :)</div><br/></div></div></div></div></div></div><div id="39975585" class="c"><input type="checkbox" id="c-39975585" checked=""/><div class="controls bullet"><span class="by">ryebread777</span><span>|</span><a href="#39976647">prev</a><span>|</span><label class="collapse" for="c-39975585">[-]</label><label class="expand" for="c-39975585">[2 more]</label></div><br/><div class="children"><div class="content">Very helpful! I will come back to read more deeply. But in general, what approach would you recommend?</div><br/><div id="39977077" class="c"><input type="checkbox" id="c-39977077" checked=""/><div class="controls bullet"><span class="by">danburzo</span><span>|</span><a href="#39975585">parent</a><span>|</span><label class="collapse" for="c-39977077">[-]</label><label class="expand" for="c-39977077">[1 more]</label></div><br/><div class="children"><div class="content">With the goal of showing nice, clear images to as many devices as possible, while optimizing the file size, I would:<p>1. decide if I want to use any of the newer image formats. If so, each needs its own `&lt;source type=&#x27;&#x27;&gt;` in a `&lt;picture&gt;` element, front-loading the most efficient formats. 
2. decide if I want to serve different densities for the image.<p>For specifying densities, width descriptors + `sizes` attribute will always compute to a more useful effective density than density descriptors, if you can get `sizes` in the ballpark of how the image is actually laid out.<p>For lazily-loaded images, `sizes=auto` will do that for you, when it becomes universally supported.</div><br/></div></div></div></div></div></div></div></div></div></body></html>