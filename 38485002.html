<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1701507667135" as="style"/><link rel="stylesheet" href="styles.css?v=1701507667135"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.youtube.com/watch?v=tC-DLeI6hjQ">Why Did These LEDs Light Up? ESP32-S3 – Which Pins Are Safe to Use? [video]</a> <span class="domain">(<a href="https://www.youtube.com">www.youtube.com</a>)</span></div><div class="subtext"><span>iamflimflam1</span> | <span>13 comments</span></div><br/><div><div id="38495208" class="c"><input type="checkbox" id="c-38495208" checked=""/><div class="controls bullet"><span class="by">brotchie</span><span>|</span><a href="#38494847">next</a><span>|</span><label class="collapse" for="c-38495208">[-]</label><label class="expand" for="c-38495208">[1 more]</label></div><br/><div class="children"><div class="content">Bit on strapping pins gives my nightmares.<p>Lost tens of hours of my life trying to bring a new ESP32-based board up. Debugging code, cutting traces and soldering bridge wires, buying and using a logic analyzer.<p>Turns out:<p>Some of the pins on the ESP32<p><pre><code>  a) Are strapping pins (configure stuff like what voltage to talk to FLASH). Luckily there&#x27;s a few fuses you can blow to hardcode some of the settings the strapping pins are reading, so they ignore logic level on boot,
  b) Default back to JTAG pins. For example, you have to explicitly reset GPIO12 - gpio_reset_pin(GPIO12) to use it as an I&#x2F;O pin again (this burnt a day of my life).
</code></pre>
Lesson learnt, if something weird is happening with your micro, check for strapping and &#x2F; or default pin behavior.</div><br/></div></div><div id="38494847" class="c"><input type="checkbox" id="c-38494847" checked=""/><div class="controls bullet"><span class="by">girvo</span><span>|</span><a href="#38495208">prev</a><span>|</span><a href="#38496806">next</a><span>|</span><label class="collapse" for="c-38494847">[-]</label><label class="expand" for="c-38494847">[6 more]</label></div><br/><div class="children"><div class="content">It&#x27;s genuinely interesting that he says that the USB flashing can&#x27;t be relied on: we&#x27;ve been using the S3 at work for... gosh, 12 months? Longer? And it&#x27;s been perfectly reliable for us -- and that&#x27;s despite us flashing it via OpenOCD inside a Docker container, inside WSL2 with usbipd!</div><br/><div id="38496180" class="c"><input type="checkbox" id="c-38496180" checked=""/><div class="controls bullet"><span class="by">Sprite_tm</span><span>|</span><a href="#38494847">parent</a><span>|</span><a href="#38495240">next</a><span>|</span><label class="collapse" for="c-38496180">[-]</label><label class="expand" for="c-38496180">[2 more]</label></div><br/><div class="children"><div class="content">Espressif dev here. I usually advise people to break out GPIO0 (or GPIO9 for the ESP32Cx series) because 1. if you somehow write firmware that reconfigures the USB pins, there&#x27;s no way to get the USB connection going via which you can reset the ESP into download mode, and 2. if somehow a firmware upload aborts halfway, the ESP32 can go into a bootloop with the USB device periodically disappearing. In the 2nd scenario, it&#x27;s not impossible to time your flash so it goes through, but simply pulling GPIO0 low is easier. I don&#x27;t think having an actual button is needed, but I&#x27;d certainly have a test point or another way you can ground that pin when you get yourself in a pickle.</div><br/><div id="38496212" class="c"><input type="checkbox" id="c-38496212" checked=""/><div class="controls bullet"><span class="by">girvo</span><span>|</span><a href="#38494847">root</a><span>|</span><a href="#38496180">parent</a><span>|</span><a href="#38495240">next</a><span>|</span><label class="collapse" for="c-38496212">[-]</label><label class="expand" for="c-38496212">[1 more]</label></div><br/><div class="children"><div class="content">Oh, we absolutely have on our boards. It&#x27;s just we&#x27;ve had to use it to recover from a borked flash maybe twice, total? We don&#x27;t have a button, just have to bridge some pads.</div><br/></div></div></div></div><div id="38495240" class="c"><input type="checkbox" id="c-38495240" checked=""/><div class="controls bullet"><span class="by">spiritplumber</span><span>|</span><a href="#38494847">parent</a><span>|</span><a href="#38496180">prev</a><span>|</span><a href="#38496806">next</a><span>|</span><label class="collapse" for="c-38495240">[-]</label><label class="expand" for="c-38495240">[3 more]</label></div><br/><div class="children"><div class="content">.... literally how?</div><br/><div id="38495330" class="c"><input type="checkbox" id="c-38495330" checked=""/><div class="controls bullet"><span class="by">girvo</span><span>|</span><a href="#38494847">root</a><span>|</span><a href="#38495240">parent</a><span>|</span><a href="#38495933">next</a><span>|</span><label class="collapse" for="c-38495330">[-]</label><label class="expand" for="c-38495330">[1 more]</label></div><br/><div class="children"><div class="content">ESP-IDF devcontainer + vscode and the ESP-IDF plugin? Maybe it&#x27;s worth me seeing if work will let me publish our docs around it, but it was pretty much as simple as following the ESP-IDF plugin&#x27;s own documentation:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;espressif&#x2F;vscode-esp-idf-extension&#x2F;blob&#x2F;master&#x2F;docs&#x2F;tutorial&#x2F;using-docker-container.md">https:&#x2F;&#x2F;github.com&#x2F;espressif&#x2F;vscode-esp-idf-extension&#x2F;blob&#x2F;m...</a><p>The Rube-Goldbergy-ness of it all still makes me upset, but hey it works, and surprisingly well. Including JTAG debugging and all, too.</div><br/></div></div><div id="38495933" class="c"><input type="checkbox" id="c-38495933" checked=""/><div class="controls bullet"><span class="by">fotta</span><span>|</span><a href="#38494847">root</a><span>|</span><a href="#38495240">parent</a><span>|</span><a href="#38495330">prev</a><span>|</span><a href="#38496806">next</a><span>|</span><label class="collapse" for="c-38495933">[-]</label><label class="expand" for="c-38495933">[1 more]</label></div><br/><div class="children"><div class="content">I’m using an s3 with esphome which uses platformio which uses esp-idf and it usb flashes fine too.</div><br/></div></div></div></div></div></div><div id="38496806" class="c"><input type="checkbox" id="c-38496806" checked=""/><div class="controls bullet"><span class="by">zamalek</span><span>|</span><a href="#38494847">prev</a><span>|</span><a href="#38496672">next</a><span>|</span><label class="collapse" for="c-38496806">[-]</label><label class="expand" for="c-38496806">[3 more]</label></div><br/><div class="children"><div class="content">I have found the ESP32-C3 pretty frustrating in terms of occupied pins, once you eliminate all the strapping pins etc. there aren&#x27;t all that many remaining.</div><br/><div id="38496876" class="c"><input type="checkbox" id="c-38496876" checked=""/><div class="controls bullet"><span class="by">benj111</span><span>|</span><a href="#38496806">parent</a><span>|</span><a href="#38496672">next</a><span>|</span><label class="collapse" for="c-38496876">[-]</label><label class="expand" for="c-38496876">[2 more]</label></div><br/><div class="children"><div class="content">&gt;strapping<p>Bootstrapping?<p>Is that a hardware people thing?</div><br/><div id="38497145" class="c"><input type="checkbox" id="c-38497145" checked=""/><div class="controls bullet"><span class="by">numpad0</span><span>|</span><a href="#38496806">root</a><span>|</span><a href="#38496876">parent</a><span>|</span><a href="#38496672">next</a><span>|</span><label class="collapse" for="c-38497145">[-]</label><label class="expand" for="c-38497145">[1 more]</label></div><br/><div class="children"><div class="content">Strapping in circuits is figuratively tying a thing by strings so it stays in vicinity of voltage&#x2F;current&#x2F;circuit constants. In this case, the chip has pins that can be used to change operating modes by strapping high or low, called strapping pins. Similar to but slightly different from pull-up&#x2F;pull-down.<p><i>Boot</i> strapping in circuits usually refers to passive parts that provide power needed locally for switching parts.</div><br/></div></div></div></div></div></div><div id="38496672" class="c"><input type="checkbox" id="c-38496672" checked=""/><div class="controls bullet"><span class="by">evgpbfhnr</span><span>|</span><a href="#38496806">prev</a><span>|</span><a href="#38496965">next</a><span>|</span><label class="collapse" for="c-38496672">[-]</label><label class="expand" for="c-38496672">[1 more]</label></div><br/><div class="children"><div class="content">tl;dw <a href="https:&#x2F;&#x2F;github.com&#x2F;atomic14&#x2F;esp32-s3-pinouts">https:&#x2F;&#x2F;github.com&#x2F;atomic14&#x2F;esp32-s3-pinouts</a>
(I didn&#x27;t watch to the end either as I hate video format for this kind of things, sorry if there was more)</div><br/></div></div><div id="38496965" class="c"><input type="checkbox" id="c-38496965" checked=""/><div class="controls bullet"><span class="by">dvh</span><span>|</span><a href="#38496672">prev</a><span>|</span><label class="collapse" for="c-38496965">[-]</label><label class="expand" for="c-38496965">[1 more]</label></div><br/><div class="children"><div class="content">Is it still impossible to use ADC while the wifi is on?</div><br/></div></div></div></div></div></div></div></body></html>