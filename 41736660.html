<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1728032476197" as="style"/><link rel="stylesheet" href="styles.css?v=1728032476197"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://code.gdnetwork.co/blog/go-vs-rxjs">Go Concurrency vs. RxJS</a> <span class="domain">(<a href="https://code.gdnetwork.co">code.gdnetwork.co</a>)</span></div><div class="subtext"><span>kermerlerper</span> | <span>38 comments</span></div><br/><div><div id="41739322" class="c"><input type="checkbox" id="c-41739322" checked=""/><div class="controls bullet"><span class="by">Alifatisk</span><span>|</span><a href="#41738522">next</a><span>|</span><label class="collapse" for="c-41739322">[-]</label><label class="expand" for="c-41739322">[1 more]</label></div><br/><div class="children"><div class="content">Why was Dart mentioned under the broadcast headline? I didn&#x27;t quite get it.</div><br/></div></div><div id="41738522" class="c"><input type="checkbox" id="c-41738522" checked=""/><div class="controls bullet"><span class="by">steve_adams_86</span><span>|</span><a href="#41739322">prev</a><span>|</span><a href="#41737927">next</a><span>|</span><label class="collapse" for="c-41738522">[-]</label><label class="expand" for="c-41738522">[2 more]</label></div><br/><div class="children"><div class="content">I always found RxJS fairly awkward. I assumed it was a skill issue (and I still think it is), but gradually learned it for personal and professional projects. It&#x27;s fine. I avoid it now. I think Go is orders of magnitude better in terms of general concurrency tooling, though I know some people straight up hate it.<p>I&#x27;ve recently started using Effect, the TypeScript library, and I find it&#x27;s so much better than RxJS as well. Now that I&#x27;ve gotten the swing of things, I can&#x27;t imagine going back to RxJS. Although I prefer Go in many ways still, there are things about Effect I actually prefer over tooling in Go as well. And of course, there is no direct comparison (one is a library in a language that&#x27;s a superset of another language, the other is just a language), but when it comes to solving the problem of concurrency, Effect is great. I recommend it.<p>Effect is also a lot more than RxJS. It has schema and data tools, primitives for error handling and control flow, state management, etc. Regardless, where they overlap, I think Effect is much better designed.<p>Where Effect (and RxJS) falls apart for me is debugging. I really hope that story improves. The errors in TypeScript are pretty brutal, and actually tracing through calls isn&#x27;t as intuitive as it appears it will be at times. Weird stuff goes on. Things get convoluted quickly. Somehow that disadvantage hasn&#x27;t prevented it from becoming a go-to tool for me, so far.</div><br/><div id="41739296" class="c"><input type="checkbox" id="c-41739296" checked=""/><div class="controls bullet"><span class="by">whazor</span><span>|</span><a href="#41738522">parent</a><span>|</span><a href="#41737927">next</a><span>|</span><label class="collapse" for="c-41739296">[-]</label><label class="expand" for="c-41739296">[1 more]</label></div><br/><div class="children"><div class="content">My biggest issue with RxJS is that it is so easy, that you can easily make pretty bad bugs. In particular, you can have a `mergeMap` or a `switchMap`, and with RxJS they are very similar in API. But if you pick the wrong one, it can lead to weird bugs in your application. However, if you would manually program promises and maybe debounce helpers, you would be more likely to program the correct behavior.<p>Still, the easiness RxJS is pretty cool, and if you are an expert at it, you could build complicated applications with very little code. Also Marble Testing is a cool way of testing certain application behaviors.<p>Overall, I would recommend searching decent alternatives. Since RxJS is too hard to get right.</div><br/></div></div></div></div><div id="41737927" class="c"><input type="checkbox" id="c-41737927" checked=""/><div class="controls bullet"><span class="by">jchw</span><span>|</span><a href="#41738522">prev</a><span>|</span><a href="#41737929">next</a><span>|</span><label class="collapse" for="c-41737927">[-]</label><label class="expand" for="c-41737927">[10 more]</label></div><br/><div class="children"><div class="content">Concurrency in Go is overrated; channels are error-prone and not as flexible as they probably could&#x2F;should be.<p>Though, I honestly find moderately complex Go code far easier to maintain than moderately complex RxJS code, having had both in my career at different times. That said I will admit that sometimes having the RxJS toolkit at your disposal makes solving some problems <i>very</i> easy. It&#x27;s just that when I construct an RxJS pipeline that does some complex stuff end-to-end, don&#x27;t expect me to be able to readily explain it a couple months later. It&#x27;s not write-only... But it gets thick easily.<p>One issue I think people underrate that impacts both promises and RxJS is error handling. Exceptions in JS can be a lot of different things, including programming errors like TypeError; but most people will write error handling that doesn&#x27;t actually distinguish the two cases. In fact it&#x27;s hard to blame them as this can make for a lot of error-prone boilerplate to deal with, but it&#x27;s especially annoying as it can hide programming errors in plain sight, making them hard to spot for your observability tooling and harder to debug (it&#x27;s frequently not a possibility people give much thought to.)<p>Then again, on the Go end, I find it hard to try to handle async errors as well, though for totally different reasons. There&#x27;s lots of good ideas floating around with Go and I even kind of like contexts to a degree, but it feels like there&#x27;s no cohesive story that binds it all together. I used to use tomb, but I found myself wanting even more than it offered.</div><br/><div id="41738086" class="c"><input type="checkbox" id="c-41738086" checked=""/><div class="controls bullet"><span class="by">cyberax</span><span>|</span><a href="#41737927">parent</a><span>|</span><a href="#41737939">next</a><span>|</span><label class="collapse" for="c-41738086">[-]</label><label class="expand" for="c-41738086">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Concurrency in Go is overrated; channels are error-prone and not as flexible as they probably could&#x2F;should be.<p>Channels in Go indeed could be better designed and more extensible. However, they are not the only way to use the Go concurrency. There are usual condition variables, mutexes, etc.</div><br/></div></div><div id="41737939" class="c"><input type="checkbox" id="c-41737939" checked=""/><div class="controls bullet"><span class="by">phplovesong</span><span>|</span><a href="#41737927">parent</a><span>|</span><a href="#41738086">prev</a><span>|</span><a href="#41737929">next</a><span>|</span><label class="collapse" for="c-41737939">[-]</label><label class="expand" for="c-41737939">[8 more]</label></div><br/><div class="children"><div class="content">I argue CSP is far superior to async&#x2F;await in almost all cases. In Go errors are explicit and always right there. No weird control flow like you see in javascript.</div><br/><div id="41738253" class="c"><input type="checkbox" id="c-41738253" checked=""/><div class="controls bullet"><span class="by">SkiFire13</span><span>|</span><a href="#41737927">root</a><span>|</span><a href="#41737939">parent</a><span>|</span><a href="#41738550">next</a><span>|</span><label class="collapse" for="c-41738253">[-]</label><label class="expand" for="c-41738253">[2 more]</label></div><br/><div class="children"><div class="content">CSP and async&#x2F;await are perpendicular concepts. In fact you can have all combinations of them.<p>Personally though I prefer either the actor model or structured concurrency to CSP, depending on the usecase.</div><br/><div id="41739083" class="c"><input type="checkbox" id="c-41739083" checked=""/><div class="controls bullet"><span class="by">valenterry</span><span>|</span><a href="#41737927">root</a><span>|</span><a href="#41738253">parent</a><span>|</span><a href="#41738550">next</a><span>|</span><label class="collapse" for="c-41739083">[-]</label><label class="expand" for="c-41739083">[1 more]</label></div><br/><div class="children"><div class="content">I like a combination of both: actor model high level (basically, the business needs to understand the purpose&#x2F;meaning of every actor) and then structured concurrency within each actor.<p>I&#x27;ve been trying to convince the gleam folks of that without too much success so far...</div><br/></div></div></div></div><div id="41738550" class="c"><input type="checkbox" id="c-41738550" checked=""/><div class="controls bullet"><span class="by">glenjamin</span><span>|</span><a href="#41737927">root</a><span>|</span><a href="#41737939">parent</a><span>|</span><a href="#41738253">prev</a><span>|</span><a href="#41738078">next</a><span>|</span><label class="collapse" for="c-41738550">[-]</label><label class="expand" for="c-41738550">[4 more]</label></div><br/><div class="children"><div class="content">How do you handle errors when reading from a channel?</div><br/><div id="41738686" class="c"><input type="checkbox" id="c-41738686" checked=""/><div class="controls bullet"><span class="by">styluss</span><span>|</span><a href="#41737927">root</a><span>|</span><a href="#41738550">parent</a><span>|</span><a href="#41738078">next</a><span>|</span><label class="collapse" for="c-41738686">[-]</label><label class="expand" for="c-41738686">[3 more]</label></div><br/><div class="children"><div class="content">data, ok := &lt;-someChan<p>If ok is false, the channel is closed and data is a zero value.</div><br/><div id="41738775" class="c"><input type="checkbox" id="c-41738775" checked=""/><div class="controls bullet"><span class="by">eknkc</span><span>|</span><a href="#41737927">root</a><span>|</span><a href="#41738686">parent</a><span>|</span><a href="#41738078">next</a><span>|</span><label class="collapse" for="c-41738775">[-]</label><label class="expand" for="c-41738775">[2 more]</label></div><br/><div class="children"><div class="content">Whenever I used channels in Go, I regretted it at the end. Always have to look up &quot;what happens when I do x and the channel is closed&quot; kind of stuff. Code becomes weird with all the selects and shit.<p>I like sync primitives and good old collections.</div><br/><div id="41739314" class="c"><input type="checkbox" id="c-41739314" checked=""/><div class="controls bullet"><span class="by">styluss</span><span>|</span><a href="#41737927">root</a><span>|</span><a href="#41738775">parent</a><span>|</span><a href="#41738078">next</a><span>|</span><label class="collapse" for="c-41739314">[-]</label><label class="expand" for="c-41739314">[1 more]</label></div><br/><div class="children"><div class="content">Oh absolutely, whenever i use anything, I have to see how to integrate cancellation and now context is everywhere just for this.<p>It gets overly verbose because of &quot;simplicity&quot;</div><br/></div></div></div></div></div></div></div></div><div id="41738078" class="c"><input type="checkbox" id="c-41738078" checked=""/><div class="controls bullet"><span class="by">dullcrisp</span><span>|</span><a href="#41737927">root</a><span>|</span><a href="#41737939">parent</a><span>|</span><a href="#41738550">prev</a><span>|</span><a href="#41737929">next</a><span>|</span><label class="collapse" for="c-41738078">[-]</label><label class="expand" for="c-41738078">[1 more]</label></div><br/><div class="children"><div class="content">So you prefer CSP to CPS?</div><br/></div></div></div></div></div></div><div id="41737929" class="c"><input type="checkbox" id="c-41737929" checked=""/><div class="controls bullet"><span class="by">phplovesong</span><span>|</span><a href="#41737927">prev</a><span>|</span><a href="#41739165">next</a><span>|</span><label class="collapse" for="c-41737929">[-]</label><label class="expand" for="c-41737929">[3 more]</label></div><br/><div class="children"><div class="content">How can these even be compared? Go does concurrency on multiple CPU cores, and javascript one one. Go can so both IO and CPU bound tasks with the SAME way, and in javascript land you really dont do any CPU tasks async at all (makes no sense to do so).</div><br/><div id="41738069" class="c"><input type="checkbox" id="c-41738069" checked=""/><div class="controls bullet"><span class="by">fhfhfhjfnfnfmf</span><span>|</span><a href="#41737929">parent</a><span>|</span><a href="#41739165">next</a><span>|</span><label class="collapse" for="c-41738069">[-]</label><label class="expand" for="c-41738069">[2 more]</label></div><br/><div class="children"><div class="content">90% of Go code isn’t CPU bound so that’s irrelevant.</div><br/><div id="41738250" class="c"><input type="checkbox" id="c-41738250" checked=""/><div class="controls bullet"><span class="by">lloydatkinson</span><span>|</span><a href="#41737929">root</a><span>|</span><a href="#41738069">parent</a><span>|</span><a href="#41739165">next</a><span>|</span><label class="collapse" for="c-41738250">[-]</label><label class="expand" for="c-41738250">[1 more]</label></div><br/><div class="children"><div class="content">????</div><br/></div></div></div></div></div></div><div id="41739165" class="c"><input type="checkbox" id="c-41739165" checked=""/><div class="controls bullet"><span class="by">reactor</span><span>|</span><a href="#41737929">prev</a><span>|</span><a href="#41737739">next</a><span>|</span><label class="collapse" for="c-41739165">[-]</label><label class="expand" for="c-41739165">[1 more]</label></div><br/><div class="children"><div class="content">Meanwhile, Java just upped the game of virtual thread with <a href="https:&#x2F;&#x2F;mail.openjdk.org&#x2F;pipermail&#x2F;jdk-dev&#x2F;2024-October&#x2F;009429.html" rel="nofollow">https:&#x2F;&#x2F;mail.openjdk.org&#x2F;pipermail&#x2F;jdk-dev&#x2F;2024-October&#x2F;0094...</a></div><br/></div></div><div id="41737739" class="c"><input type="checkbox" id="c-41737739" checked=""/><div class="controls bullet"><span class="by">sollniss</span><span>|</span><a href="#41739165">prev</a><span>|</span><a href="#41739236">next</a><span>|</span><label class="collapse" for="c-41737739">[-]</label><label class="expand" for="c-41737739">[6 more]</label></div><br/><div class="children"><div class="content">The font colors make this unreadable.</div><br/><div id="41737772" class="c"><input type="checkbox" id="c-41737772" checked=""/><div class="controls bullet"><span class="by">anonzzzies</span><span>|</span><a href="#41737739">parent</a><span>|</span><a href="#41737971">next</a><span>|</span><label class="collapse" for="c-41737772">[-]</label><label class="expand" for="c-41737772">[1 more]</label></div><br/><div class="children"><div class="content">I had the same; you probably have your phone in darkmode.</div><br/></div></div><div id="41737971" class="c"><input type="checkbox" id="c-41737971" checked=""/><div class="controls bullet"><span class="by">xyst</span><span>|</span><a href="#41737739">parent</a><span>|</span><a href="#41737772">prev</a><span>|</span><a href="#41738329">next</a><span>|</span><label class="collapse" for="c-41737971">[-]</label><label class="expand" for="c-41737971">[1 more]</label></div><br/><div class="children"><div class="content">Switching to reader mode makes the text readable but code samples a mess. Can’t win</div><br/></div></div><div id="41738329" class="c"><input type="checkbox" id="c-41738329" checked=""/><div class="controls bullet"><span class="by">kopirgan</span><span>|</span><a href="#41737739">parent</a><span>|</span><a href="#41737971">prev</a><span>|</span><a href="#41737774">next</a><span>|</span><label class="collapse" for="c-41738329">[-]</label><label class="expand" for="c-41738329">[1 more]</label></div><br/><div class="children"><div class="content">Thought it was my phone..</div><br/></div></div><div id="41737774" class="c"><input type="checkbox" id="c-41737774" checked=""/><div class="controls bullet"><span class="by">steve_adams_86</span><span>|</span><a href="#41737739">parent</a><span>|</span><a href="#41738329">prev</a><span>|</span><a href="#41739236">next</a><span>|</span><label class="collapse" for="c-41737774">[-]</label><label class="expand" for="c-41737774">[2 more]</label></div><br/><div class="children"><div class="content">If you’re in light mode it helps a bit.</div><br/><div id="41737948" class="c"><input type="checkbox" id="c-41737948" checked=""/><div class="controls bullet"><span class="by">xyst</span><span>|</span><a href="#41737739">root</a><span>|</span><a href="#41737774">parent</a><span>|</span><a href="#41739236">next</a><span>|</span><label class="collapse" for="c-41737948">[-]</label><label class="expand" for="c-41737948">[1 more]</label></div><br/><div class="children"><div class="content">I’m doom scrolling at midnight. No way I’m going to flashbang myself</div><br/></div></div></div></div></div></div><div id="41739236" class="c"><input type="checkbox" id="c-41739236" checked=""/><div class="controls bullet"><span class="by">bumpsoo</span><span>|</span><a href="#41737739">prev</a><span>|</span><a href="#41739225">next</a><span>|</span><label class="collapse" for="c-41739236">[-]</label><label class="expand" for="c-41739236">[1 more]</label></div><br/><div class="children"><div class="content">If I were the person who wrote this post, I would double-check if the program is behaving as intended after seeing all the image processing happen sequentially</div><br/></div></div><div id="41738073" class="c"><input type="checkbox" id="c-41738073" checked=""/><div class="controls bullet"><span class="by">cyberax</span><span>|</span><a href="#41739225">prev</a><span>|</span><a href="#41738512">next</a><span>|</span><label class="collapse" for="c-41738073">[-]</label><label class="expand" for="c-41738073">[3 more]</label></div><br/><div class="children"><div class="content">JS concurrency is crap. It should be shot and buried in a lead coffin.<p>Debugging async code is pure hell. With Go, you have a normal debugger that can be used to step over the code. You can get normal stack traces for all threads if needed. There is a race detector that can catch most of unsynchronized object access.<p>With JS? You&#x27;re on your fucking own. You can&#x27;t find out the overall state of the system (&quot;the list of all threads&quot;), without getting deep into the guts of React or whatever framework you&#x27;re using. Debugger is useless, as each `await` call drops you into the event loop. So pretty much every complicated non-trivial JS app ends up with _tons_ of race conditions, by depending on the order of async functions finishing.<p>Speaking of race conditions. Coming from classic multithreading and Go, I tried to use `Promise.race` to simulate the `select` statement. Turns out that in JS it is actually useless because it LEAKS MEMORY BY DESIGN: <a href="https:&#x2F;&#x2F;github.com&#x2F;nodejs&#x2F;node&#x2F;issues&#x2F;17469">https:&#x2F;&#x2F;github.com&#x2F;nodejs&#x2F;node&#x2F;issues&#x2F;17469</a><p>Back to the article. It uses pre-generics Go. In more modern Go, you can use something like Conc to reduce the boilerplate: <a href="https:&#x2F;&#x2F;github.com&#x2F;sourcegraph&#x2F;conc?tab=readme-ov-file">https:&#x2F;&#x2F;github.com&#x2F;sourcegraph&#x2F;conc?tab=readme-ov-file</a></div><br/><div id="41738471" class="c"><input type="checkbox" id="c-41738471" checked=""/><div class="controls bullet"><span class="by">arctek</span><span>|</span><a href="#41738073">parent</a><span>|</span><a href="#41738512">next</a><span>|</span><label class="collapse" for="c-41738471">[-]</label><label class="expand" for="c-41738471">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s also unintuitive in the sense that if you are racing you usually want to discard&#x2F;stop the other Promises that didn&#x27;t finish in time.
But the only real way to do this is to pass through an AbortController down into whatever networking&#x2F;IO task (and your own code for that matter) is happening to &quot;cancel&quot; it that way.
Otherwise you just end up with the result of the fastest Promise and the rest will continue when they get a chance.</div><br/><div id="41738907" class="c"><input type="checkbox" id="c-41738907" checked=""/><div class="controls bullet"><span class="by">aporetics</span><span>|</span><a href="#41738073">root</a><span>|</span><a href="#41738471">parent</a><span>|</span><a href="#41738512">next</a><span>|</span><label class="collapse" for="c-41738907">[-]</label><label class="expand" for="c-41738907">[1 more]</label></div><br/><div class="children"><div class="content">I thought the point of using observables over promises is that they have cancellation, and presumably an implementation of race would cancel any slower request (i.e., handle the abort controller automatically)? Is that not the case?</div><br/></div></div></div></div></div></div><div id="41738512" class="c"><input type="checkbox" id="c-41738512" checked=""/><div class="controls bullet"><span class="by">lenkite</span><span>|</span><a href="#41738073">prev</a><span>|</span><a href="#41738649">next</a><span>|</span><label class="collapse" for="c-41738512">[-]</label><label class="expand" for="c-41738512">[1 more]</label></div><br/><div class="children"><div class="content">Compare the runtimes also and how easy it is to debug and maintain RxJS vs Go. The former is a nightmare to maintain.</div><br/></div></div><div id="41738649" class="c"><input type="checkbox" id="c-41738649" checked=""/><div class="controls bullet"><span class="by">raulns86</span><span>|</span><a href="#41738512">prev</a><span>|</span><a href="#41737629">next</a><span>|</span><label class="collapse" for="c-41738649">[-]</label><label class="expand" for="c-41738649">[1 more]</label></div><br/><div class="children"><div class="content">One strong point about RxJS is marble testing, I haven&#x27;t found something similar for async systems with complex scenarios.</div><br/></div></div><div id="41737629" class="c"><input type="checkbox" id="c-41737629" checked=""/><div class="controls bullet"><span class="by">miiiiiike</span><span>|</span><a href="#41738649">prev</a><span>|</span><a href="#41738350">next</a><span>|</span><label class="collapse" for="c-41737629">[-]</label><label class="expand" for="c-41737629">[2 more]</label></div><br/><div class="children"><div class="content">Learning RxJS made me a better programmer faster than anything since the Gang of Four Design Patterns book 20 years ago.</div><br/><div id="41737778" class="c"><input type="checkbox" id="c-41737778" checked=""/><div class="controls bullet"><span class="by">roblh</span><span>|</span><a href="#41737629">parent</a><span>|</span><a href="#41738350">next</a><span>|</span><label class="collapse" for="c-41737778">[-]</label><label class="expand" for="c-41737778">[1 more]</label></div><br/><div class="children"><div class="content">What did you use it for, specifically? A personal project, or did you work on something that already used it heavily? I’ve played with it, and it’s interesting, but I haven’t quite found a reason to use it yet.</div><br/></div></div></div></div><div id="41738350" class="c"><input type="checkbox" id="c-41738350" checked=""/><div class="controls bullet"><span class="by">arunc</span><span>|</span><a href="#41737629">prev</a><span>|</span><a href="#41738653">next</a><span>|</span><label class="collapse" for="c-41738350">[-]</label><label class="expand" for="c-41738350">[2 more]</label></div><br/><div class="children"><div class="content">We ditched both and rewrote our services in Kotlin. We never looked back. Coroutines FTW!</div><br/><div id="41738423" class="c"><input type="checkbox" id="c-41738423" checked=""/><div class="controls bullet"><span class="by">s6af7ygt</span><span>|</span><a href="#41738350">parent</a><span>|</span><a href="#41738653">next</a><span>|</span><label class="collapse" for="c-41738423">[-]</label><label class="expand" for="c-41738423">[1 more]</label></div><br/><div class="children"><div class="content">Can you elaborate a bit more, so us ignorant people may share in your excitement? I&#x27;ve seen many people switch from JVM to Go, but I&#x27;ve not seen a lot of people switch from Go to JVM.</div><br/></div></div></div></div><div id="41738653" class="c"><input type="checkbox" id="c-41738653" checked=""/><div class="controls bullet"><span class="by">sunnyque</span><span>|</span><a href="#41738350">prev</a><span>|</span><a href="#41736661">next</a><span>|</span><label class="collapse" for="c-41738653">[-]</label><label class="expand" for="c-41738653">[1 more]</label></div><br/><div class="children"><div class="content">guy is using unbuffered channel and wonder why it working slow, lol</div><br/></div></div><div id="41738261" class="c"><input type="checkbox" id="c-41738261" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#41736661">prev</a><span>|</span><label class="collapse" for="c-41738261">[-]</label><label class="expand" for="c-41738261">[1 more]</label></div><br/><div class="children"><div class="content">RxJS is useful and overused whenever I&#x27;ve seen it.</div><br/></div></div></div></div></div></div></div></body></html>