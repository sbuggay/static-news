<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1688461260284" as="style"/><link rel="stylesheet" href="styles.css?v=1688461260284"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/clibraries/array-algorithms">A header-only C implementation of C++ &lt;algorithm&gt;</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>clibraries</span> | <span>22 comments</span></div><br/><div><div id="36583643" class="c"><input type="checkbox" id="c-36583643" checked=""/><div class="controls bullet"><span class="by">iamyemeth</span><span>|</span><a href="#36583647">next</a><span>|</span><label class="collapse" for="c-36583643">[-]</label><label class="expand" for="c-36583643">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;m always a fan of 80% solutions implemented in C. I think the library is pretty nice, and as someone who&#x27;s experimented with trying to add quality of life features to C99 with macros I think the implementation is actually pretty clean and readable as far as these kind of implementations go.<p>That being said, I think the ergonomics of the approach taken by Sean Barrett in stb_ds is much nicer than the #define ALG_TYPE, #define ALG_PREFIX approach, although I&#x27;m sure it wouldn&#x27;t be a big stretch to make something similar that was compatible with it.<p>My feeling is that you could get pretty far with something like Sean Barrett&#x27;s stb_ds + Salvatore Sanfilippo&#x27;s sds and then a generic algorithm library like this one</div><br/><div id="36583683" class="c"><input type="checkbox" id="c-36583683" checked=""/><div class="controls bullet"><span class="by">kzrdude</span><span>|</span><a href="#36583643">parent</a><span>|</span><a href="#36583647">next</a><span>|</span><label class="collapse" for="c-36583683">[-]</label><label class="expand" for="c-36583683">[2 more]</label></div><br/><div class="children"><div class="content">I think the difference is that stb_ds is a datastructures library and this is for algorithms. This algorithm library will also look like a completely regular C library if you just use separate .h and .c files to instantiate declarations and the implementation, I think it&#x27;s very clean.</div><br/><div id="36583860" class="c"><input type="checkbox" id="c-36583860" checked=""/><div class="controls bullet"><span class="by">iamyemeth</span><span>|</span><a href="#36583643">root</a><span>|</span><a href="#36583683">parent</a><span>|</span><a href="#36583647">next</a><span>|</span><label class="collapse" for="c-36583860">[-]</label><label class="expand" for="c-36583860">[1 more]</label></div><br/><div class="children"><div class="content">I meant more from the perspective that stb_ds achieves type safe generics in C using macros but without using defines.<p>It would be interesting to see if something similar could be achieved for an algorithm library.</div><br/></div></div></div></div></div></div><div id="36583647" class="c"><input type="checkbox" id="c-36583647" checked=""/><div class="controls bullet"><span class="by">rurban</span><span>|</span><a href="#36583643">prev</a><span>|</span><a href="#36583493">next</a><span>|</span><label class="collapse" for="c-36583647">[-]</label><label class="expand" for="c-36583647">[1 more]</label></div><br/><div class="children"><div class="content">Well, I do like mine better, which is closer to the STL, and for all containers. <a href="https:&#x2F;&#x2F;github.com&#x2F;rurban&#x2F;ctl&#x2F;">https:&#x2F;&#x2F;github.com&#x2F;rurban&#x2F;ctl&#x2F;</a></div><br/></div></div><div id="36583493" class="c"><input type="checkbox" id="c-36583493" checked=""/><div class="controls bullet"><span class="by">lionkor</span><span>|</span><a href="#36583647">prev</a><span>|</span><a href="#36582780">next</a><span>|</span><label class="collapse" for="c-36583493">[-]</label><label class="expand" for="c-36583493">[4 more]</label></div><br/><div class="children"><div class="content">Isn&#x27;t this a use-case for _Generic[1]?<p>[1]: <a href="https:&#x2F;&#x2F;en.cppreference.com&#x2F;w&#x2F;c&#x2F;language&#x2F;generic" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.cppreference.com&#x2F;w&#x2F;c&#x2F;language&#x2F;generic</a></div><br/><div id="36583785" class="c"><input type="checkbox" id="c-36583785" checked=""/><div class="controls bullet"><span class="by">lelanthran</span><span>|</span><a href="#36583493">parent</a><span>|</span><a href="#36583649">next</a><span>|</span><label class="collapse" for="c-36583785">[-]</label><label class="expand" for="c-36583785">[1 more]</label></div><br/><div class="children"><div class="content">_Generic is a little bit broken[1].<p>It&#x27;s a lot like some of the other decisions by the standards committee; they see demand for a particular feature $FOO, then add in support for something not quite like $FOO, which maybe addresses part of what was wanted but turns out useless in practice so that few use it.<p>They added `const` (which, admittedly, does get a lot of use in practice) which is subtly different from what already existed in C++ at the time.<p>They added VLAs, then had to walk that back because, like `gets()`, there was no practical way to use it safely.<p>The added _Generic, which requires the typenames to be known in advance.<p>They added threads, but without wide enough functionality to use it for anything but the most trivial of programs.<p>All in all, they&#x27;ve been doing a poor job of steering the language in the last 20-odd years since C99. What users have been clamouring for was <i>&quot;less UB, please? Make it IB where you can&quot;</i>, but instead they have been <i>adding</i> UB.<p>In the words of Linus Torvalds: <i>&quot;Yeah, let&#x27;s just
say that the original C designers were better at their
job than a gaggle of standards people who were making
bad crap up to make some Fortran-style programs go faster.&quot;</i><p>Original K&amp;R C had no reference to undefined behaviour. The worst you could say about C at that point in time was that some things were defined by the implementation.<p>[1] Some might say more than a little bit :-&#x2F; You can&#x27;t use it to write type-safe generic libraries.</div><br/></div></div><div id="36583649" class="c"><input type="checkbox" id="c-36583649" checked=""/><div class="controls bullet"><span class="by">iamyemeth</span><span>|</span><a href="#36583493">parent</a><span>|</span><a href="#36583785">prev</a><span>|</span><a href="#36583582">next</a><span>|</span><label class="collapse" for="c-36583649">[-]</label><label class="expand" for="c-36583649">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s also the case that _Generic is only available in C11 while this library targets C99</div><br/></div></div><div id="36583582" class="c"><input type="checkbox" id="c-36583582" checked=""/><div class="controls bullet"><span class="by">kzrdude</span><span>|</span><a href="#36583493">parent</a><span>|</span><a href="#36583649">prev</a><span>|</span><a href="#36582780">next</a><span>|</span><label class="collapse" for="c-36583582">[-]</label><label class="expand" for="c-36583582">[1 more]</label></div><br/><div class="children"><div class="content">With _Generic, the original library implementor has to accommodate your type. If it&#x27;s a “template”, the user can insert their type. Also a type that&#x27;s created long after the original library author has finished their work.</div><br/></div></div></div></div><div id="36582780" class="c"><input type="checkbox" id="c-36582780" checked=""/><div class="controls bullet"><span class="by">lelanthran</span><span>|</span><a href="#36583493">prev</a><span>|</span><a href="#36583299">next</a><span>|</span><label class="collapse" for="c-36582780">[-]</label><label class="expand" for="c-36582780">[1 more]</label></div><br/><div class="children"><div class="content">This looks like a good implementation for common array operations in a type-safe manner.<p>Not a bad approach, but the source (header file) is not very readable (so I guess &quot;just like the STL&quot; applies :-))</div><br/></div></div><div id="36583299" class="c"><input type="checkbox" id="c-36583299" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#36582780">prev</a><span>|</span><a href="#36582693">next</a><span>|</span><label class="collapse" for="c-36583299">[-]</label><label class="expand" for="c-36583299">[2 more]</label></div><br/><div class="children"><div class="content">Ah, one of those &quot;generic&quot; libraries back from MS-DOS days.</div><br/><div id="36583412" class="c"><input type="checkbox" id="c-36583412" checked=""/><div class="controls bullet"><span class="by">lelanthran</span><span>|</span><a href="#36583299">parent</a><span>|</span><a href="#36582693">next</a><span>|</span><label class="collapse" for="c-36583412">[-]</label><label class="expand" for="c-36583412">[1 more]</label></div><br/><div class="children"><div class="content">&gt;  Ah, one of those &quot;generic&quot; libraries back from MS-DOS days.<p>Nothing about this screams &quot;MS-DOS&quot;.[1]<p>Why the disparagement?<p>[1] I know, I was programming at that time.</div><br/></div></div></div></div><div id="36583022" class="c"><input type="checkbox" id="c-36583022" checked=""/><div class="controls bullet"><span class="by">tw1984</span><span>|</span><a href="#36582693">prev</a><span>|</span><label class="collapse" for="c-36583022">[-]</label><label class="expand" for="c-36583022">[9 more]</label></div><br/><div class="children"><div class="content">I feel sick everything time when I see C++ related stuff, simple &amp; fun programming got so complicated just because some big name &quot;committee members&quot; who insist to spend 30 years to standardize networking&#x2F;filesystem&#x2F;reflection refuse to simplify their craps. yes, they haven&#x27;t got that completed yet.<p>I guess we can wait another 30 years and there will be a C implementation of the C++ reflection or networking?</div><br/><div id="36583133" class="c"><input type="checkbox" id="c-36583133" checked=""/><div class="controls bullet"><span class="by">physicsguy</span><span>|</span><a href="#36583022">parent</a><span>|</span><a href="#36583263">next</a><span>|</span><label class="collapse" for="c-36583133">[-]</label><label class="expand" for="c-36583133">[2 more]</label></div><br/><div class="children"><div class="content">You can always just use Boost. I don&#x27;t think I&#x27;ve ever worked on a C++ project that didn&#x27;t use it!<p>std::filesystem = boost::filesystem - 1.30.0, 2003<p>std::optional = boost::optional - 1.30.0, 2003</div><br/><div id="36583596" class="c"><input type="checkbox" id="c-36583596" checked=""/><div class="controls bullet"><span class="by">jb1991</span><span>|</span><a href="#36583022">root</a><span>|</span><a href="#36583133">parent</a><span>|</span><a href="#36583263">next</a><span>|</span><label class="collapse" for="c-36583596">[-]</label><label class="expand" for="c-36583596">[1 more]</label></div><br/><div class="children"><div class="content">Keep in mind that when boost features are eventually adopted into the C++ standard library, it is often only after their implementation has been strictly defined in ways that diverge from the boost implementations, which are often inefficient. Boost contains a lot of full-featured but inefficient code; for example, some Boost tools allow for arbitrary memory allocation which is often undesirable and their standard library versions do not allow for it. There are other design issues as well, such as how to consistently handle exceptions in edge cases, etc. Boost versions of some of these don&#x27;t as comprehensively consider those situations.</div><br/></div></div></div></div><div id="36583263" class="c"><input type="checkbox" id="c-36583263" checked=""/><div class="controls bullet"><span class="by">PhilipRoman</span><span>|</span><a href="#36583022">parent</a><span>|</span><a href="#36583133">prev</a><span>|</span><a href="#36583079">next</a><span>|</span><label class="collapse" for="c-36583263">[-]</label><label class="expand" for="c-36583263">[2 more]</label></div><br/><div class="children"><div class="content">God I wish everything was done in this way. Even the C standards committee moves too fast and adds features that have no place in the standard.</div><br/><div id="36584001" class="c"><input type="checkbox" id="c-36584001" checked=""/><div class="controls bullet"><span class="by">tw1984</span><span>|</span><a href="#36583022">root</a><span>|</span><a href="#36583263">parent</a><span>|</span><a href="#36583079">next</a><span>|</span><label class="collapse" for="c-36584001">[-]</label><label class="expand" for="c-36584001">[1 more]</label></div><br/><div class="children"><div class="content">Well, there are people who choose to stay away from social and technical progress. I totally respect that desire.</div><br/></div></div></div></div><div id="36583079" class="c"><input type="checkbox" id="c-36583079" checked=""/><div class="controls bullet"><span class="by">lelanthran</span><span>|</span><a href="#36583022">parent</a><span>|</span><a href="#36583263">prev</a><span>|</span><label class="collapse" for="c-36583079">[-]</label><label class="expand" for="c-36583079">[4 more]</label></div><br/><div class="children"><div class="content">&gt; I guess we can wait another 30 years and there will be a C implementation of the C++ reflection or networking?<p>You don&#x27;t really need to wait if you&#x27;re willing to use Objective C with the GnuStep framework.<p>You&#x27;ll get reflection, and a lot of other nice addons[1].<p>[1] Dunno about network support; ISTR it being part of the GnuStep framework, but could be wrong.</div><br/><div id="36583776" class="c"><input type="checkbox" id="c-36583776" checked=""/><div class="controls bullet"><span class="by">cornel_io</span><span>|</span><a href="#36583022">root</a><span>|</span><a href="#36583079">parent</a><span>|</span><a href="#36583502">prev</a><span>|</span><label class="collapse" for="c-36583776">[-]</label><label class="expand" for="c-36583776">[1 more]</label></div><br/><div class="children"><div class="content">&quot;Stop trying to make &#x27;Objective C&#x27; happen&quot;<p>...is what all non-Apple programmers have been begging ever since the iPhone came out.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>