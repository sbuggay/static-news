<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1704963657360" as="style"/><link rel="stylesheet" href="styles.css?v=1704963657360"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://cohost.org/jckarter/post/2955755-the-lost-language-ex">High C Compiler – A C language extension ahead of its time</a> <span class="domain">(<a href="https://cohost.org">cohost.org</a>)</span></div><div class="subtext"><span>stefanos82</span> | <span>19 comments</span></div><br/><div><div id="38948917" class="c"><input type="checkbox" id="c-38948917" checked=""/><div class="controls bullet"><span class="by">buserror</span><span>|</span><a href="#38948648">next</a><span>|</span><label class="collapse" for="c-38948917">[-]</label><label class="expand" for="c-38948917">[7 more]</label></div><br/><div class="children"><div class="content">Case ranges are in gcc for a million years. And also nested functions. I used nested functions <i>a lot</i> but, it was never ported to clang which makes it a bit of a problem for portability, also, nowadays the linker complains about having to make the stack executable, which is another problem; so I had to stop using them.<p>I also don&#x27;t understand why the &quot;C standard&quot; hasn&#x27;t evolved further -- there was a discussion lately about the committee being out of touch. 
Some of these extensions makes life so much easier. Instead we get stupid stuff nobody need, or have been in a header for 200 years (ie, &lt;pthread.h&gt;, whoohoo, I&#x27;m delighted this standard header is now a... standard!)<p>For nested&#x2F;sub function, it makes so much sense it&#x27;s not even funny. Having micro-callbacks <i>right there</i> before the call to qsort() (or any other) is SO much better than having to farm out a context, yet-another-static-function etc...</div><br/><div id="38949333" class="c"><input type="checkbox" id="c-38949333" checked=""/><div class="controls bullet"><span class="by">spacechild1</span><span>|</span><a href="#38948917">parent</a><span>|</span><a href="#38949112">next</a><span>|</span><label class="collapse" for="c-38949333">[-]</label><label class="expand" for="c-38949333">[2 more]</label></div><br/><div class="children"><div class="content">&gt; (ie, &lt;pthread.h&gt;, whoohoo, I&#x27;m delighted this standard header is now a... standard!<p>&lt;pthreads.h&gt; is POSIX, it has never been - and still don&#x27;t is! - part of the C standard. In particular, MSVC only supports it through third party libraries.<p>However, C11 added cross-platform thread support with &lt;threads.h&gt;: <a href="https:&#x2F;&#x2F;en.cppreference.com&#x2F;w&#x2F;c&#x2F;thread" rel="nofollow">https:&#x2F;&#x2F;en.cppreference.com&#x2F;w&#x2F;c&#x2F;thread</a>. I wouldn&#x27;t call that &quot;stupid stuff nobody needs&quot;.</div><br/><div id="38949382" class="c"><input type="checkbox" id="c-38949382" checked=""/><div class="controls bullet"><span class="by">trealira</span><span>|</span><a href="#38948917">root</a><span>|</span><a href="#38949333">parent</a><span>|</span><a href="#38949112">next</a><span>|</span><label class="collapse" for="c-38949382">[-]</label><label class="expand" for="c-38949382">[1 more]</label></div><br/><div class="children"><div class="content">&gt; and still don&#x27;t is!<p>&quot;isn&#x27;t,&quot; not &quot;don&#x27;t is&quot;<p>You&#x27;re right, though</div><br/></div></div></div></div><div id="38949112" class="c"><input type="checkbox" id="c-38949112" checked=""/><div class="controls bullet"><span class="by">flohofwoe</span><span>|</span><a href="#38948917">parent</a><span>|</span><a href="#38949333">prev</a><span>|</span><a href="#38948971">next</a><span>|</span><label class="collapse" for="c-38949112">[-]</label><label class="expand" for="c-38949112">[2 more]</label></div><br/><div class="children"><div class="content">&gt; I&#x27;m delighted this standard header is now a... standard!<p>The POSIX standard isn&#x27;t the C standard though (for better or worse).<p>Especially on Windows with MSVC &quot;obvious&quot; things like this are traditionally a royal PITA (which also means that a lot of C code coming from the UNIX world simply doesn&#x27;t build on  MSVC even though MSVC is now a decent standard-C compiler again).<p>But yeah, the C standard is just the minimal common subset of what C compilers offer. The good stuff is all in Clang and GCC extensions.</div><br/><div id="38949353" class="c"><input type="checkbox" id="c-38949353" checked=""/><div class="controls bullet"><span class="by">derefr</span><span>|</span><a href="#38948917">root</a><span>|</span><a href="#38949112">parent</a><span>|</span><a href="#38948971">next</a><span>|</span><label class="collapse" for="c-38949353">[-]</label><label class="expand" for="c-38949353">[1 more]</label></div><br/><div class="children"><div class="content">&gt; But yeah, the C standard is just the minimal common subset of what C compilers offer.<p>Why is this? Most other standards — for languages or otherwise — seem to run ahead of implementation, as meetings of major players agreeing on what they&#x27;ll all implement next, with the standard constraining the implementations on how to do that.<p>But the C standard is seemingly instead just an external, descriptivist report on &quot;what you can get away with writing in C while keeping it completely portable.&quot;</div><br/></div></div></div></div><div id="38948971" class="c"><input type="checkbox" id="c-38948971" checked=""/><div class="controls bullet"><span class="by">actionfromafar</span><span>|</span><a href="#38948917">parent</a><span>|</span><a href="#38949112">prev</a><span>|</span><a href="#38948648">next</a><span>|</span><label class="collapse" for="c-38948971">[-]</label><label class="expand" for="c-38948971">[2 more]</label></div><br/><div class="children"><div class="content">“ Nested functions can even goto back into their parent function, allowing for nonlocal exits to break out of nested functions like Smalltalk blocks, allowing control flow-like functions to be built using them.”<p>Wild!<p>Makes one wonder how something could have evolved if it took C and made it more “functional” and&#x2F;or smalltalk-ish, <i>without</i> going the dynamic way of ObjectiveC.<p>I don’t exactly love C++ but I find it very useful. Maybe I could have loved that other never conceived C offspring.</div><br/><div id="38949404" class="c"><input type="checkbox" id="c-38949404" checked=""/><div class="controls bullet"><span class="by">derefr</span><span>|</span><a href="#38948917">root</a><span>|</span><a href="#38948971">parent</a><span>|</span><a href="#38948648">next</a><span>|</span><label class="collapse" for="c-38949404">[-]</label><label class="expand" for="c-38949404">[1 more]</label></div><br/><div class="children"><div class="content">Note that this functionality <i>is</i> already in C — in the form of the setjmp&#x2F;longjmp functions, which indeed allow you to have a parent function that contains &quot;global&quot; error-handling, and then a hierarchy of child functions designed to only be executed from that parent, that can &quot;jump out&quot; to the parent&#x27;s error handler. (But where &quot;parent&quot; and &quot;child&quot; here are just a conceptual relationship the programmer is keeping track of, not anything the compiler knows about.)<p>The difference is that High C gives you <i>lexically</i>-nested function definitions, thus making labels into things like local variables that have scope + shadowing. And so it becomes sensible — necessary, really, to have a coherent semantics — to extend the (runtime, dynamic) longjmp, into a compile-time-targeted, lexical, syntax-sugared version that jumps to in-scope labels (incl. ones defined outside the current lexically-nested function definition.)<p>If you didn&#x27;t, then you&#x27;d have to decide on what a `goto` to an in-scope but out-of-function label would do <i>instead</i> — compiler error, maybe? — and whatever you choose, it would probably be just as hard to implement as just making it work. (Most of the effort is in extending the CFG to allow some analysis pass to notice that this is happening, after all.)</div><br/></div></div></div></div></div></div><div id="38948648" class="c"><input type="checkbox" id="c-38948648" checked=""/><div class="controls bullet"><span class="by">Agingcoder</span><span>|</span><a href="#38948917">prev</a><span>|</span><a href="#38948895">next</a><span>|</span><label class="collapse" for="c-38948648">[-]</label><label class="expand" for="c-38948648">[6 more]</label></div><br/><div class="children"><div class="content">All of them apart from generators look like they were taken straight from Ada.</div><br/><div id="38948694" class="c"><input type="checkbox" id="c-38948694" checked=""/><div class="controls bullet"><span class="by">WalterBright</span><span>|</span><a href="#38948648">parent</a><span>|</span><a href="#38948897">next</a><span>|</span><label class="collapse" for="c-38948694">[-]</label><label class="expand" for="c-38948694">[2 more]</label></div><br/><div class="children"><div class="content">D has _ in integers and that did come straight from Ada. I always liked Ada.</div><br/><div id="38949028" class="c"><input type="checkbox" id="c-38949028" checked=""/><div class="controls bullet"><span class="by">brabel</span><span>|</span><a href="#38948648">root</a><span>|</span><a href="#38948694">parent</a><span>|</span><a href="#38948897">next</a><span>|</span><label class="collapse" for="c-38949028">[-]</label><label class="expand" for="c-38949028">[1 more]</label></div><br/><div class="children"><div class="content">As I was reading I was thinking High C looks a lot like D!<p>Though D still has no named parameters :D (I know it&#x27;s in the works).</div><br/></div></div></div></div><div id="38948897" class="c"><input type="checkbox" id="c-38948897" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#38948648">parent</a><span>|</span><a href="#38948694">prev</a><span>|</span><a href="#38948895">next</a><span>|</span><label class="collapse" for="c-38948897">[-]</label><label class="expand" for="c-38948897">[3 more]</label></div><br/><div class="children"><div class="content">Pascal predates Ada, and already had ranges, CLU and Modula-2 also predate Ada and had generators.</div><br/><div id="38949114" class="c"><input type="checkbox" id="c-38949114" checked=""/><div class="controls bullet"><span class="by">kragen</span><span>|</span><a href="#38948648">root</a><span>|</span><a href="#38948897">parent</a><span>|</span><a href="#38948895">next</a><span>|</span><label class="collapse" for="c-38949114">[-]</label><label class="expand" for="c-38949114">[2 more]</label></div><br/><div class="children"><div class="content">i know icon had generators, but i don&#x27;t think it predated ada.  did snobol4, icon&#x27;s very different predecessor, have generators?</div><br/><div id="38949578" class="c"><input type="checkbox" id="c-38949578" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#38948648">root</a><span>|</span><a href="#38949114">parent</a><span>|</span><a href="#38948895">next</a><span>|</span><label class="collapse" for="c-38949578">[-]</label><label class="expand" for="c-38949578">[1 more]</label></div><br/><div class="children"><div class="content">Quite easy to find out, Ada released to the world in 1983, Icon released to the world in 1977.</div><br/></div></div></div></div></div></div></div></div><div id="38948662" class="c"><input type="checkbox" id="c-38948662" checked=""/><div class="controls bullet"><span class="by">mynameisnoone</span><span>|</span><a href="#38948668">prev</a><span>|</span><label class="collapse" for="c-38948662">[-]</label><label class="expand" for="c-38948662">[3 more]</label></div><br/><div class="children"><div class="content">I can&#x27;t read &quot;Fujitsu&quot; without immediately thinking of a public-private partnership post office software debacle where a software error is exploited by unsupervised private prosecutors incentivized by financial reasons (finder&#x27;s commissions) to wrongly accuse, extort, and imprison hundreds of subpostmasters.</div><br/><div id="38949106" class="c"><input type="checkbox" id="c-38949106" checked=""/><div class="controls bullet"><span class="by">kragen</span><span>|</span><a href="#38948662">parent</a><span>|</span><label class="collapse" for="c-38949106">[-]</label><label class="expand" for="c-38949106">[2 more]</label></div><br/><div class="children"><div class="content">you may be overgeneralizing a bit<p>there are 18 sovereign countries in <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;List_of_countries_and_dependencies_by_population" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;List_of_countries_and_dependen...</a> with smaller populations than fujitsu, and 31 with smaller economies than fujitsu <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;List_of_countries_by_GDP_(nominal)" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;List_of_countries_by_GDP_(nomi...</a></div><br/><div id="38949407" class="c"><input type="checkbox" id="c-38949407" checked=""/><div class="controls bullet"><span class="by">ithkuil</span><span>|</span><a href="#38948662">root</a><span>|</span><a href="#38949106">parent</a><span>|</span><label class="collapse" for="c-38949407">[-]</label><label class="expand" for="c-38949407">[1 more]</label></div><br/><div class="children"><div class="content">Reminds me of Martha Wells&#x27; sci-fi novel series Murderbot Diaries, and the corporations in the Corporation Rim</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>