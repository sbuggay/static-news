<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1692176461062" as="style"/><link rel="stylesheet" href="styles.css?v=1692176461062"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://rustylife.github.io/2023/08/15/futex-crash.html">Debugging a Futex Crash</a> <span class="domain">(<a href="https://rustylife.github.io">rustylife.github.io</a>)</span></div><div class="subtext"><span>rustylife</span> | <span>9 comments</span></div><br/><div><div id="37143685" class="c"><input type="checkbox" id="c-37143685" checked=""/><div class="controls bullet"><span class="by">no_time</span><span>|</span><a href="#37142933">next</a><span>|</span><label class="collapse" for="c-37143685">[-]</label><label class="expand" for="c-37143685">[5 more]</label></div><br/><div class="children"><div class="content">Do these crash reporting tools have mechanisms in place to not leak sensitive data in the coredumps? Would be awkward if a firefox coredump upload would leak my session cookies.</div><br/><div id="37143841" class="c"><input type="checkbox" id="c-37143841" checked=""/><div class="controls bullet"><span class="by">ishitatsuyuki</span><span>|</span><a href="#37143685">parent</a><span>|</span><a href="#37143897">next</a><span>|</span><label class="collapse" for="c-37143841">[-]</label><label class="expand" for="c-37143841">[1 more]</label></div><br/><div class="children"><div class="content">Unfortunately, removal of PIIs also means less data&#x2F;cues for hard-to-diagnose bugs (it can even range to CPU bugs like [1]). For Firefox, potentially PII-containing memory dumps are still sent to the server, but they&#x27;re only viewable by authorized personnel [2].<p>There are also rule-based PII removal methods as used by Sentry minidump processing and described at [3].<p>[1]: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=37063459">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=37063459</a><p>[2]: <a href="https:&#x2F;&#x2F;crash-stats.mozilla.org&#x2F;documentation&#x2F;protected_data_access&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;crash-stats.mozilla.org&#x2F;documentation&#x2F;protected_data...</a><p>[3]: <a href="https:&#x2F;&#x2F;docs.sentry.io&#x2F;product&#x2F;data-management-settings&#x2F;scrubbing&#x2F;attachment-scrubbing&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;docs.sentry.io&#x2F;product&#x2F;data-management-settings&#x2F;scru...</a></div><br/></div></div><div id="37143897" class="c"><input type="checkbox" id="c-37143897" checked=""/><div class="controls bullet"><span class="by">hyperman1</span><span>|</span><a href="#37143685">parent</a><span>|</span><a href="#37143841">prev</a><span>|</span><a href="#37144157">next</a><span>|</span><label class="collapse" for="c-37143897">[-]</label><label class="expand" for="c-37143897">[2 more]</label></div><br/><div class="children"><div class="content">That&#x27;s almost impossible, and one of the reasons automatic crash reporting is problematic.<p>It is an issue with e.g medical data: Doctors using mswindows or any browser based tool can at any moment export random medical data to god knows which country.  In the EU, it is probably illegal to even look at it if you receive it, and you don&#x27;t know which dreports even have this issue.<p>Afaik, the only reason things aren&#x27;t crashing down is total non-enforcement by all authorities.  Which raises interesting question about their will and capability to enforce e.g. the medical secret at all.</div><br/><div id="37144281" class="c"><input type="checkbox" id="c-37144281" checked=""/><div class="controls bullet"><span class="by">TazeTSchnitzel</span><span>|</span><a href="#37143685">root</a><span>|</span><a href="#37143897">parent</a><span>|</span><a href="#37144157">next</a><span>|</span><label class="collapse" for="c-37144281">[-]</label><label class="expand" for="c-37144281">[1 more]</label></div><br/><div class="children"><div class="content">Automatic crash reporting doesn&#x27;t necessarily contain sensitive info, it depends on how much detail is provided. When I get a crash on macOS, the reporter lets me the report before it&#x27;s sent, and as far as I can tell it&#x27;s just plaintext stacktraces of active threads, plus a handful of other details.</div><br/></div></div></div></div><div id="37144157" class="c"><input type="checkbox" id="c-37144157" checked=""/><div class="controls bullet"><span class="by">planede</span><span>|</span><a href="#37143685">parent</a><span>|</span><a href="#37143897">prev</a><span>|</span><a href="#37142933">next</a><span>|</span><label class="collapse" for="c-37144157">[-]</label><label class="expand" for="c-37144157">[1 more]</label></div><br/><div class="children"><div class="content">Found this for coredumps and minidumps:<p><a href="https:&#x2F;&#x2F;support.backtrace.io&#x2F;hc&#x2F;en-us&#x2F;articles&#x2F;360040517131-Privacy-Control" rel="nofollow noreferrer">https:&#x2F;&#x2F;support.backtrace.io&#x2F;hc&#x2F;en-us&#x2F;articles&#x2F;360040517131-...</a><p>So there are at least some efforts to do it. IMO it can only ever be best effort, but it doesn&#x27;t mean that it&#x27;s not worth doing.</div><br/></div></div></div></div><div id="37142933" class="c"><input type="checkbox" id="c-37142933" checked=""/><div class="controls bullet"><span class="by">ByteMe95</span><span>|</span><a href="#37143685">prev</a><span>|</span><a href="#37143396">next</a><span>|</span><label class="collapse" for="c-37142933">[-]</label><label class="expand" for="c-37142933">[2 more]</label></div><br/><div class="children"><div class="content">Maybe it’s just me but if I saw a stack trace like that I would think that I had some memory corruption somewhere ( I would think even in this case it’s more plausible than the mutex being allocated misaligned )</div><br/><div id="37144205" class="c"><input type="checkbox" id="c-37144205" checked=""/><div class="controls bullet"><span class="by">planede</span><span>|</span><a href="#37142933">parent</a><span>|</span><a href="#37143396">next</a><span>|</span><label class="collapse" for="c-37144205">[-]</label><label class="expand" for="c-37144205">[1 more]</label></div><br/><div class="children"><div class="content">Maybe a mutex accidentally put in packed struct?</div><br/></div></div></div></div><div id="37143396" class="c"><input type="checkbox" id="c-37143396" checked=""/><div class="controls bullet"><span class="by">RustyRussell</span><span>|</span><a href="#37142933">prev</a><span>|</span><label class="collapse" for="c-37143396">[-]</label><label class="expand" for="c-37143396">[1 more]</label></div><br/><div class="children"><div class="content">Ok, I did a double take. It&#x27;s a different Rusty playing with futexes!!</div><br/></div></div></div></div></div></div></div></body></html>