<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1699520478082" as="style"/><link rel="stylesheet" href="styles.css?v=1699520478082"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://arxiv.org/abs/1409.2378">Design Guidelines for Domain Specific Languages</a>Â <span class="domain">(<a href="https://arxiv.org">arxiv.org</a>)</span></div><div class="subtext"><span>lr0</span> | <span>5 comments</span></div><br/><div><div id="38202435" class="c"><input type="checkbox" id="c-38202435" checked=""/><div class="controls bullet"><span class="by">victorNicollet</span><span>|</span><a href="#38201867">next</a><span>|</span><label class="collapse" for="c-38202435">[-]</label><label class="expand" for="c-38202435">[1 more]</label></div><br/><div class="children"><div class="content">A few strong opinions, a lot stronger than they were in my 2017 talk <a href="https:&#x2F;&#x2F;youtu.be&#x2F;_gmMJwjg0Pk" rel="nofollow noreferrer">https:&#x2F;&#x2F;youtu.be&#x2F;_gmMJwjg0Pk</a>, surely that must be the experience speaking :)<p>- Creating a DSL is a commitment. It is never done, it&#x27;s either in development or abandoned. Plan for this, both in terms of team size and knowledge management.<p>- Don&#x27;t allow escape hatches or ways to access arbitrary functionality in the host language. When (not if) these are used, they ruin backwards compatibility and make maintenance of DSL code a nightmare.<p>- Don&#x27;t use a PEG (parsing expression grammar), they are terrible for backwards compatibility. Hand-written parsers are even worse. Using an LR parser generator is worth the time investment.<p>- Support static analysis, or at the very least don&#x27;t make it impossible to implement later. It improves productivity, and every error message is an opportunity to teach the DSL to the users.<p>- You need a language server. The bare minimum is: highlighting, auto-completion, hints on hover, find references, rename.<p>- It should be trivial to reproduce a production run on a development machine. This means the language should be deterministic, and the production context should be preserved for later reuse, and the development machine should be safe for accessing production data.<p>- Thousands of unit tests, thousands of regression tests.<p>It&#x27;s fine to break these rules, if you can live with the consequences.<p>And here&#x27;s a brand new one from this year: use RAG to have ChatGPT &quot;read&quot; your documentation, and ask it to produce scripts for you. When the script doesn&#x27;t compile, feed the error message back to ChatGPT and try again until you get a working script. Think deeply about why ChatGPT made some mistakes, as it&#x27;s often the case that humans would have the same misunderstandings. Improve your documentation, error messages or syntax to eliminate them, and then try again to see if it works. We have been doing this for 6 months now, and there have already been some significant improvements that are only obvious in hindsight. And we&#x27;ve now opened a PhD position to investigate whether we can have a separate &quot;LLM-friendly&quot; syntax for the language, dedicated to making code generation easier.</div><br/></div></div><div id="38201867" class="c"><input type="checkbox" id="c-38201867" checked=""/><div class="controls bullet"><span class="by">valenterry</span><span>|</span><a href="#38202435">prev</a><span>|</span><label class="collapse" for="c-38201867">[-]</label><label class="expand" for="c-38201867">[3 more]</label></div><br/><div class="children"><div class="content">Unfortunately, they don&#x27;t mention the most easy way of defining a DSL: by doing it in the host language itself. Not all programming languages are capable of allowing that, but some do, and in that case it is by far the most easy and safe solution.<p>It is still much much easier than combining existing language like adding OCL into another language, as suggest in the paper; and you get compiler&#x2F;IDE support, tooling support and everything else from the &quot;host language&quot; out of the box.</div><br/><div id="38202500" class="c"><input type="checkbox" id="c-38202500" checked=""/><div class="controls bullet"><span class="by">victorNicollet</span><span>|</span><a href="#38201867">parent</a><span>|</span><a href="#38202357">next</a><span>|</span><label class="collapse" for="c-38202500">[-]</label><label class="expand" for="c-38202500">[1 more]</label></div><br/><div class="children"><div class="content">This is definitely the best idea for &quot;drop down&quot; DSLs (by drop down, I mean that you are working in a general-purpose language and then, for one specific situation, you drop down into the DSL because it is more productive).<p>I think the article is more oriented towards standalone DSLs (where the entry point is the DSL itself), as those get actual maintenance benefits from not being able to invoke arbitrary code in the host language.</div><br/></div></div><div id="38202357" class="c"><input type="checkbox" id="c-38202357" checked=""/><div class="controls bullet"><span class="by">MrJohz</span><span>|</span><a href="#38201867">parent</a><span>|</span><a href="#38202500">prev</a><span>|</span><label class="collapse" for="c-38202357">[-]</label><label class="expand" for="c-38202357">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;d go a step further, and suggest that most languages are able to embed some level of DSL, although you might not be able to reach quite the expressiveness that you had in mind.<p>Generally a combination of block closures and being able to chain methods together is usually enough to create something reasonably expressive, although even then there are alternatives - I&#x27;ve seen DSLs in Python that use the class syntax and metaclasses to define quite complex this. You won&#x27;t be generating your own syntax or anything, but you can often get pretty far.</div><br/></div></div></div></div></div></div></div></div></div></body></html>