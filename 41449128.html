<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1725872472874" as="style"/><link rel="stylesheet" href="styles.css?v=1725872472874"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://avestura.dev/blog/creating-a-git-commit-the-hard-way">Creating a Git Commit: The Hard Way</a> <span class="domain">(<a href="https://avestura.dev">avestura.dev</a>)</span></div><div class="subtext"><span>avestura</span> | <span>15 comments</span></div><br/><div><div id="41486176" class="c"><input type="checkbox" id="c-41486176" checked=""/><div class="controls bullet"><span class="by">bertylicious</span><span>|</span><a href="#41483128">next</a><span>|</span><label class="collapse" for="c-41486176">[-]</label><label class="expand" for="c-41486176">[1 more]</label></div><br/><div class="children"><div class="content">I really recommend doing the &quot;Build your own git&quot; challenge on CodeCrafters in order to gain a deep understanding of git internals.<p><a href="https:&#x2F;&#x2F;app.codecrafters.io&#x2F;courses&#x2F;git&#x2F;overview">https:&#x2F;&#x2F;app.codecrafters.io&#x2F;courses&#x2F;git&#x2F;overview</a></div><br/></div></div><div id="41483128" class="c"><input type="checkbox" id="c-41483128" checked=""/><div class="controls bullet"><span class="by">archmaster</span><span>|</span><a href="#41486176">prev</a><span>|</span><a href="#41482999">next</a><span>|</span><label class="collapse" for="c-41483128">[-]</label><label class="expand" for="c-41483128">[4 more]</label></div><br/><div class="children"><div class="content">This is pretty cool. Worth noting that Git does not actually only store full copies of files every time you make a change, this article I found does a really good job at explaining Git&#x27;s packing: <a href="https:&#x2F;&#x2F;gist.github.com&#x2F;matthewmccullough&#x2F;2695758" rel="nofollow">https:&#x2F;&#x2F;gist.github.com&#x2F;matthewmccullough&#x2F;2695758</a></div><br/><div id="41485252" class="c"><input type="checkbox" id="c-41485252" checked=""/><div class="controls bullet"><span class="by">glandium</span><span>|</span><a href="#41483128">parent</a><span>|</span><a href="#41484782">next</a><span>|</span><label class="collapse" for="c-41485252">[-]</label><label class="expand" for="c-41485252">[2 more]</label></div><br/><div class="children"><div class="content">It actually does. Until you run git gc or it runs automatically, and your blobs are packed.</div><br/><div id="41485407" class="c"><input type="checkbox" id="c-41485407" checked=""/><div class="controls bullet"><span class="by">masklinn</span><span>|</span><a href="#41483128">root</a><span>|</span><a href="#41485252">parent</a><span>|</span><a href="#41484782">next</a><span>|</span><label class="collapse" for="c-41485407">[-]</label><label class="expand" for="c-41485407">[1 more]</label></div><br/><div class="children"><div class="content">“Objects” rather than “blobs”, in git “blobs” means specifically file contents (&#x2F; unstructured as technically you can use blobs for arbitrary storage) but all objects can be delta’d during packing.</div><br/></div></div></div></div><div id="41484782" class="c"><input type="checkbox" id="c-41484782" checked=""/><div class="controls bullet"><span class="by">GrantMoyer</span><span>|</span><a href="#41483128">parent</a><span>|</span><a href="#41485252">prev</a><span>|</span><a href="#41482999">next</a><span>|</span><label class="collapse" for="c-41484782">[-]</label><label class="expand" for="c-41484782">[1 more]</label></div><br/><div class="children"><div class="content">Also see <a href="https:&#x2F;&#x2F;git-scm.com&#x2F;docs&#x2F;pack-heuristics" rel="nofollow">https:&#x2F;&#x2F;git-scm.com&#x2F;docs&#x2F;pack-heuristics</a></div><br/></div></div></div></div><div id="41482999" class="c"><input type="checkbox" id="c-41482999" checked=""/><div class="controls bullet"><span class="by">chrisweekly</span><span>|</span><a href="#41483128">prev</a><span>|</span><a href="#41485369">next</a><span>|</span><label class="collapse" for="c-41482999">[-]</label><label class="expand" for="c-41482999">[1 more]</label></div><br/><div class="children"><div class="content">Nice writeup. Reminds me of a Julia Evans post (which is the highest praise I could give it).</div><br/></div></div><div id="41485369" class="c"><input type="checkbox" id="c-41485369" checked=""/><div class="controls bullet"><span class="by">larusso</span><span>|</span><a href="#41482999">prev</a><span>|</span><a href="#41485245">next</a><span>|</span><label class="collapse" for="c-41485369">[-]</label><label class="expand" for="c-41485369">[2 more]</label></div><br/><div class="children"><div class="content">Nice article. What is interesting to me is the reactions to articles like this. Not the fact that the git internals are not widely known, I mean that is true for nearly any more complicated topic. In this case I mean the fact that this is actually well documented.<p>Don’t get me wrong. I think articles like these help a lot to demystify git and I believe it makes the tool easier to use and reason with when one knows what it does. But why is nobody finding or reading the later chapters in the docs?<p><a href="https:&#x2F;&#x2F;git-scm.com&#x2F;book&#x2F;en&#x2F;v2&#x2F;Git-Internals-Git-Objects" rel="nofollow">https:&#x2F;&#x2F;git-scm.com&#x2F;book&#x2F;en&#x2F;v2&#x2F;Git-Internals-Git-Objects</a></div><br/><div id="41485488" class="c"><input type="checkbox" id="c-41485488" checked=""/><div class="controls bullet"><span class="by">avestura</span><span>|</span><a href="#41485369">parent</a><span>|</span><a href="#41485245">next</a><span>|</span><label class="collapse" for="c-41485488">[-]</label><label class="expand" for="c-41485488">[1 more]</label></div><br/><div class="children"><div class="content">Creating a Git commit using low-level commands was always something I wanted to do, but I never found the time to really deepen my knowledge of Git. I have actually googled if I could find a blog post or something in this topic, but I&#x27;ve failed to find one. Finally, I got the chance, and for the past couple of weekends, I’ve been reading the Pro Git book (which it seems it&#x27;s the same content as git-scm.com&#x2F;book). I believe it’s a good practice to write a blog post about a topic after finishing a book (teaching is a good way of submitting knowledge in memory). To my surprise, creating a Git commit using plumbing commands was already covered in the final chapters of the book. I thought it would be a good idea to simplify that process and write a blog post which can be read under 10 minutes, allowing those who haven’t read the book yet (like myself in the past) to get a basic understanding of what Git is doing under the hood.<p>&gt; But why is nobody finding or reading the later chapters in the docs?<p>I think to read the latest chapter of a book, one usually needs to read the earlier ones too. I personally don&#x27;t jump directly to the internals when I want to read about something, because I&#x27;d then assume I am missing a lot of context and background.</div><br/></div></div></div></div><div id="41485245" class="c"><input type="checkbox" id="c-41485245" checked=""/><div class="controls bullet"><span class="by">grantmnz</span><span>|</span><a href="#41485369">prev</a><span>|</span><a href="#41485918">next</a><span>|</span><label class="collapse" for="c-41485245">[-]</label><label class="expand" for="c-41485245">[1 more]</label></div><br/><div class="children"><div class="content">It was learning about the topics in this post that enabled me to create this  repo:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;grantm&#x2F;no-more-f-s-repo">https:&#x2F;&#x2F;github.com&#x2F;grantm&#x2F;no-more-f-s-repo</a><p>Parental Advisory: Contains strong language.</div><br/></div></div><div id="41485918" class="c"><input type="checkbox" id="c-41485918" checked=""/><div class="controls bullet"><span class="by">forgotpwd16</span><span>|</span><a href="#41485245">prev</a><span>|</span><a href="#41485143">next</a><span>|</span><label class="collapse" for="c-41485918">[-]</label><label class="expand" for="c-41485918">[1 more]</label></div><br/><div class="children"><div class="content">Up to commit-tree, a nice programming challenge is implementing those commands from scratch.</div><br/></div></div><div id="41485143" class="c"><input type="checkbox" id="c-41485143" checked=""/><div class="controls bullet"><span class="by">breck</span><span>|</span><a href="#41485918">prev</a><span>|</span><a href="#41484609">next</a><span>|</span><label class="collapse" for="c-41485143">[-]</label><label class="expand" for="c-41485143">[1 more]</label></div><br/><div class="children"><div class="content">Love this!<p>I think there may be an error around the &quot;git write-tree&quot; step. That or I did something wrong.<p>Here&#x27;s my user test: <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=bul4CPRkv6c" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=bul4CPRkv6c</a></div><br/></div></div><div id="41484609" class="c"><input type="checkbox" id="c-41484609" checked=""/><div class="controls bullet"><span class="by">faangguyindia</span><span>|</span><a href="#41485143">prev</a><span>|</span><label class="collapse" for="c-41484609">[-]</label><label class="expand" for="c-41484609">[3 more]</label></div><br/><div class="children"><div class="content">I used to struggle with formatting my Git commit messages and often forgot the necessary Git commands.<p>Now, I&#x27;ve found a utility (made by my brother who shared it with me a few days ago and I told him to opensource it since I liked it soo much) that handles all the formatting and rewriting for me. I just write my commits, and it takes care of the rest.<p>Here&#x27;s a video demonstrating this magic (though it&#x27;s for rsync): [asciinema.org&#x2F;a&#x2F;mktcuXSPDTr2Mp1XVbo5tqhK1](<a href="https:&#x2F;&#x2F;asciinema.org&#x2F;a&#x2F;mktcuXSPDTr2Mp1XVbo5tqhK1" rel="nofollow">https:&#x2F;&#x2F;asciinema.org&#x2F;a&#x2F;mktcuXSPDTr2Mp1XVbo5tqhK1</a>).<p>Check out the utility here: [github.com&#x2F;zerocorebeta&#x2F;Option-K](<a href="https:&#x2F;&#x2F;github.com&#x2F;zerocorebeta&#x2F;Option-K">https:&#x2F;&#x2F;github.com&#x2F;zerocorebeta&#x2F;Option-K</a>).</div><br/><div id="41484748" class="c"><input type="checkbox" id="c-41484748" checked=""/><div class="controls bullet"><span class="by">nneonneo</span><span>|</span><a href="#41484609">parent</a><span>|</span><label class="collapse" for="c-41484748">[-]</label><label class="expand" for="c-41484748">[2 more]</label></div><br/><div class="children"><div class="content">That repo is only nine hours old, so I’m assuming you wrote this tool yourself. If so, I think the lack of a disclaimer (that you’re promoting your own tool) is somewhat dishonest.</div><br/><div id="41485045" class="c"><input type="checkbox" id="c-41485045" checked=""/><div class="controls bullet"><span class="by">faangguyindia</span><span>|</span><a href="#41484609">root</a><span>|</span><a href="#41484748">parent</a><span>|</span><label class="collapse" for="c-41485045">[-]</label><label class="expand" for="c-41485045">[1 more]</label></div><br/><div class="children"><div class="content">You are partially correct, but I am not the owner of this project.<p>I edited my original post to reflect this</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>