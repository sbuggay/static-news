<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1712739667824" as="style"/><link rel="stylesheet" href="styles.css?v=1712739667824"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/dolthub/go-mysql-server">A MySQL compatible database engine written in pure Go</a>Â <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>mliezun</span> | <span>66 comments</span></div><br/><div><div id="39984481" class="c"><input type="checkbox" id="c-39984481" checked=""/><div class="controls bullet"><span class="by">zachmu</span><span>|</span><a href="#39988256">next</a><span>|</span><label class="collapse" for="c-39984481">[-]</label><label class="expand" for="c-39984481">[10 more]</label></div><br/><div class="children"><div class="content">Hi, this is my project :)<p>For us this package is most important as the query engine that powers Dolt:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;dolthub&#x2F;dolt">https:&#x2F;&#x2F;github.com&#x2F;dolthub&#x2F;dolt</a><p>We aren&#x27;t the original authors but have contributed the vast majority of its code at this point. Here&#x27;s the origin story if you&#x27;re interested:<p><a href="https:&#x2F;&#x2F;www.dolthub.com&#x2F;blog&#x2F;2020-05-04-adopting-go-mysql-server&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.dolthub.com&#x2F;blog&#x2F;2020-05-04-adopting-go-mysql-se...</a></div><br/><div id="39986720" class="c"><input type="checkbox" id="c-39986720" checked=""/><div class="controls bullet"><span class="by">webprofusion</span><span>|</span><a href="#39984481">parent</a><span>|</span><a href="#39987110">next</a><span>|</span><label class="collapse" for="c-39986720">[-]</label><label class="expand" for="c-39986720">[1 more]</label></div><br/><div class="children"><div class="content">This is very cool! Couple of suggestions:<p>- Don&#x27;t use &quot;mysql&quot; in the name, this is a trademark of Oracle corporation and they can very easily sue you personally if they want to, especially since you&#x27;re using it to develop a competing database product. Other products getting away with it doesn&#x27;t mean they won&#x27;t set their sights on you. This is just my suggestion and you can ignore it if you want to.<p>- Postgres wire&#x2F;sql compatibility. Postgres is for some reason becoming the relational king so implementing some support sooner rather than later increases your projects relevance.</div><br/></div></div><div id="39987110" class="c"><input type="checkbox" id="c-39987110" checked=""/><div class="controls bullet"><span class="by">sa-code</span><span>|</span><a href="#39984481">parent</a><span>|</span><a href="#39986720">prev</a><span>|</span><a href="#39985149">next</a><span>|</span><label class="collapse" for="c-39987110">[-]</label><label class="expand" for="c-39987110">[1 more]</label></div><br/><div class="children"><div class="content">Missed an opportunity to can this uSql!</div><br/></div></div><div id="39985149" class="c"><input type="checkbox" id="c-39985149" checked=""/><div class="controls bullet"><span class="by">geenat</span><span>|</span><a href="#39984481">parent</a><span>|</span><a href="#39987110">prev</a><span>|</span><a href="#39988256">next</a><span>|</span><label class="collapse" for="c-39985149">[-]</label><label class="expand" for="c-39985149">[7 more]</label></div><br/><div class="children"><div class="content">What&#x27;s the replication story currently like?</div><br/><div id="39985173" class="c"><input type="checkbox" id="c-39985173" checked=""/><div class="controls bullet"><span class="by">zachmu</span><span>|</span><a href="#39984481">root</a><span>|</span><a href="#39985149">parent</a><span>|</span><a href="#39985618">next</a><span>|</span><label class="collapse" for="c-39985173">[-]</label><label class="expand" for="c-39985173">[5 more]</label></div><br/><div class="children"><div class="content">The vanilla package can replicate to or from MySQL via binlog replication. But since it&#x27;s memory only, that&#x27;s probably not what you want. You probably want to supply the library a backend with persistence, not the built-in memory-only one<p>Dolt can do the same two directions of MySQL binlog replication, and also has its own native replication options:<p><a href="https:&#x2F;&#x2F;docs.dolthub.com&#x2F;sql-reference&#x2F;server&#x2F;replication" rel="nofollow">https:&#x2F;&#x2F;docs.dolthub.com&#x2F;sql-reference&#x2F;server&#x2F;replication</a></div><br/><div id="39987383" class="c"><input type="checkbox" id="c-39987383" checked=""/><div class="controls bullet"><span class="by">dice</span><span>|</span><a href="#39984481">root</a><span>|</span><a href="#39985173">parent</a><span>|</span><a href="#39985228">next</a><span>|</span><label class="collapse" for="c-39987383">[-]</label><label class="expand" for="c-39987383">[1 more]</label></div><br/><div class="children"><div class="content">Have you benchmarked the replication? Or do you know of anyone who&#x27;s running it against a primary with a couple 10s of thousands of writes per second?</div><br/></div></div><div id="39985228" class="c"><input type="checkbox" id="c-39985228" checked=""/><div class="controls bullet"><span class="by">geenat</span><span>|</span><a href="#39984481">root</a><span>|</span><a href="#39985173">parent</a><span>|</span><a href="#39987383">prev</a><span>|</span><a href="#39985618">next</a><span>|</span><label class="collapse" for="c-39985228">[-]</label><label class="expand" for="c-39985228">[3 more]</label></div><br/><div class="children"><div class="content">Interesting!<p>&gt; If you have an existing MySQL or MariaDB server, you can configure Dolt as a read-replica. As the Dolt read-replica consumes data changes from the primary server, it creates Dolt commits, giving you a read-replica with a versioned history of your data changes.<p>This is really cool.</div><br/><div id="39985269" class="c"><input type="checkbox" id="c-39985269" checked=""/><div class="controls bullet"><span class="by">zachmu</span><span>|</span><a href="#39984481">root</a><span>|</span><a href="#39985228">parent</a><span>|</span><a href="#39985283">next</a><span>|</span><label class="collapse" for="c-39985269">[-]</label><label class="expand" for="c-39985269">[1 more]</label></div><br/><div class="children"><div class="content">Thanks!<p>Let us know if you try it out, we&#x27;re always interested in feedback.<p><a href="https:&#x2F;&#x2F;discord.com&#x2F;invite&#x2F;RFwfYpu" rel="nofollow">https:&#x2F;&#x2F;discord.com&#x2F;invite&#x2F;RFwfYpu</a></div><br/></div></div><div id="39985283" class="c"><input type="checkbox" id="c-39985283" checked=""/><div class="controls bullet"><span class="by">timsehn</span><span>|</span><a href="#39984481">root</a><span>|</span><a href="#39985228">parent</a><span>|</span><a href="#39985269">prev</a><span>|</span><a href="#39985618">next</a><span>|</span><label class="collapse" for="c-39985283">[-]</label><label class="expand" for="c-39985283">[1 more]</label></div><br/><div class="children"><div class="content">Coming soon we&#x27;ll have the ability to replicate a branch HEAD to MySQL as well.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="39988256" class="c"><input type="checkbox" id="c-39988256" checked=""/><div class="controls bullet"><span class="by">speleding</span><span>|</span><a href="#39984481">prev</a><span>|</span><a href="#39987819">next</a><span>|</span><label class="collapse" for="c-39988256">[-]</label><label class="expand" for="c-39988256">[1 more]</label></div><br/><div class="children"><div class="content">How hard would it be to use this as an in-memory replacement for MySQL for testing, let&#x27;s say, a Rails project?<p>Given how important the DB layer is I would be careful to use something like this in production, but if it allows speeding up the test suite it could be really interesting.</div><br/></div></div><div id="39987819" class="c"><input type="checkbox" id="c-39987819" checked=""/><div class="controls bullet"><span class="by">TechTechTech</span><span>|</span><a href="#39988256">prev</a><span>|</span><a href="#39983696">next</a><span>|</span><label class="collapse" for="c-39987819">[-]</label><label class="expand" for="c-39987819">[2 more]</label></div><br/><div class="children"><div class="content">It would be great if this evolves to support mysql to postgresql and mysql to sqlite.<p>Then we can finally have multiple database engine support for WordPress and others.</div><br/><div id="39988456" class="c"><input type="checkbox" id="c-39988456" checked=""/><div class="controls bullet"><span class="by">aargh_aargh</span><span>|</span><a href="#39987819">parent</a><span>|</span><a href="#39983696">next</a><span>|</span><label class="collapse" for="c-39988456">[-]</label><label class="expand" for="c-39988456">[1 more]</label></div><br/><div class="children"><div class="content">It is always the edge cases that will kill you. In the case of WP on PostgreSQL, the reason you want WP in the first place is the plugins and those will be hit or miss on PostgreSQL. Just give up on the combination of those two.</div><br/></div></div></div></div><div id="39983696" class="c"><input type="checkbox" id="c-39983696" checked=""/><div class="controls bullet"><span class="by">jddj</span><span>|</span><a href="#39987819">prev</a><span>|</span><a href="#39983700">next</a><span>|</span><label class="collapse" for="c-39983696">[-]</label><label class="expand" for="c-39983696">[4 more]</label></div><br/><div class="children"><div class="content">I always found the idea behind dolt to be very enticing.<p>Not enticing enough to build a business around, due to it being that bit too different and the persistence layer being that bit too important. But the sort of thing that I&#x27;d love it if the mainstream DBs would adopt.<p>I didn&#x27;t realise the engine was written in Go, and honestly the first place my mind wonders is to performance.</div><br/><div id="39984319" class="c"><input type="checkbox" id="c-39984319" checked=""/><div class="controls bullet"><span class="by">jchanimal</span><span>|</span><a href="#39983696">parent</a><span>|</span><a href="#39984318">next</a><span>|</span><label class="collapse" for="c-39984319">[-]</label><label class="expand" for="c-39984319">[1 more]</label></div><br/><div class="children"><div class="content">If you like the idea of the Dolt prolly trees[1], I&#x27;m building a database[2] that uses them for indexing, (eventually) allowing for shared index updates across actors. Our core uses open-source JavaScript[3], but there are a few other implementations including RhizomeDB in Rust[4]. I&#x27;m excited about the research in this area.<p>[1] <a href="https:&#x2F;&#x2F;docs.dolthub.com&#x2F;architecture&#x2F;storage-engine&#x2F;prolly-tree" rel="nofollow">https:&#x2F;&#x2F;docs.dolthub.com&#x2F;architecture&#x2F;storage-engine&#x2F;prolly-...</a><p>[2] <a href="https:&#x2F;&#x2F;fireproof.storage" rel="nofollow">https:&#x2F;&#x2F;fireproof.storage</a><p>[3] <a href="https:&#x2F;&#x2F;github.com&#x2F;mikeal&#x2F;prolly-trees">https:&#x2F;&#x2F;github.com&#x2F;mikeal&#x2F;prolly-trees</a><p>[4] <a href="https:&#x2F;&#x2F;jzhao.xyz&#x2F;thoughts&#x2F;Prolly-Trees" rel="nofollow">https:&#x2F;&#x2F;jzhao.xyz&#x2F;thoughts&#x2F;Prolly-Trees</a></div><br/></div></div><div id="39984318" class="c"><input type="checkbox" id="c-39984318" checked=""/><div class="controls bullet"><span class="by">zachmu</span><span>|</span><a href="#39983696">parent</a><span>|</span><a href="#39984319">prev</a><span>|</span><a href="#39984774">next</a><span>|</span><label class="collapse" for="c-39984318">[-]</label><label class="expand" for="c-39984318">[1 more]</label></div><br/><div class="children"><div class="content">We haven&#x27;t benchmarked the in-memory database implementation bundled in go-mysql-server in a while, but I would be surprised if it&#x27;s any slower than MySQL, considering that Dolt runs on the same engine and is ~2x slower than MySQL including disk-access.<p><a href="https:&#x2F;&#x2F;docs.dolthub.com&#x2F;sql-reference&#x2F;benchmarks&#x2F;latency" rel="nofollow">https:&#x2F;&#x2F;docs.dolthub.com&#x2F;sql-reference&#x2F;benchmarks&#x2F;latency</a></div><br/></div></div><div id="39984774" class="c"><input type="checkbox" id="c-39984774" checked=""/><div class="controls bullet"><span class="by">timsehn</span><span>|</span><a href="#39983696">parent</a><span>|</span><a href="#39984318">prev</a><span>|</span><a href="#39983700">next</a><span>|</span><label class="collapse" for="c-39984774">[-]</label><label class="expand" for="c-39984774">[1 more]</label></div><br/><div class="children"><div class="content">Version Control is not the type of thing &quot;mainstream DBs would adopt&quot;.<p>We needed to build a custom storage engine to make querying and diffing work at scale:<p><a href="https:&#x2F;&#x2F;docs.dolthub.com&#x2F;architecture&#x2F;storage-engine" rel="nofollow">https:&#x2F;&#x2F;docs.dolthub.com&#x2F;architecture&#x2F;storage-engine</a><p>It based on the work of Noms including the data structure they invented, Prolly Trees.<p><a href="https:&#x2F;&#x2F;docs.dolthub.com&#x2F;architecture&#x2F;storage-engine&#x2F;prolly-tree" rel="nofollow">https:&#x2F;&#x2F;docs.dolthub.com&#x2F;architecture&#x2F;storage-engine&#x2F;prolly-...</a></div><br/></div></div></div></div><div id="39983700" class="c"><input type="checkbox" id="c-39983700" checked=""/><div class="controls bullet"><span class="by">jbverschoor</span><span>|</span><a href="#39983696">prev</a><span>|</span><a href="#39987791">next</a><span>|</span><label class="collapse" for="c-39983700">[-]</label><label class="expand" for="c-39983700">[4 more]</label></div><br/><div class="children"><div class="content">This seems to be a wire-protocol proxy for mysql -&gt; SQL.<p>The default proxied database is dolt. I&#x27;m guessing this is extracted from dolt itself as that claims to be wire-compatible with mysql. Which all makes total sense.</div><br/><div id="39984397" class="c"><input type="checkbox" id="c-39984397" checked=""/><div class="controls bullet"><span class="by">zachmu</span><span>|</span><a href="#39983700">parent</a><span>|</span><a href="#39987791">next</a><span>|</span><label class="collapse" for="c-39984397">[-]</label><label class="expand" for="c-39984397">[3 more]</label></div><br/><div class="children"><div class="content">Not a proxy in the traditional sense, no. go-mysql-server is a set of libraries that implement a SQL query engine and server in the abstract. When provided with a compatible database implementation using the provided interfaces, it becomes a MySQL compatible database server. Dolt [1] is the most complete implementation, but the in-memory database implementation the package ships with is suitable for testing.<p>We didn&#x27;t extract go-mysql-server from Dolt. We found it sitting around as abandonware, adopted it, and used it to build Dolt&#x27;s SQL engine on top of the existing storage engine and command line [2]. We decided to keep it a separate package, and implementation agnostic, in the hopes of getting contributions from other people building their own database implementations on top of it.<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;dolthub&#x2F;dolt">https:&#x2F;&#x2F;github.com&#x2F;dolthub&#x2F;dolt</a>
[2] <a href="https:&#x2F;&#x2F;www.dolthub.com&#x2F;blog&#x2F;2020-05-04-adopting-go-mysql-server&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.dolthub.com&#x2F;blog&#x2F;2020-05-04-adopting-go-mysql-se...</a></div><br/><div id="39985603" class="c"><input type="checkbox" id="c-39985603" checked=""/><div class="controls bullet"><span class="by">jsteenb2</span><span>|</span><a href="#39983700">root</a><span>|</span><a href="#39984397">parent</a><span>|</span><a href="#39987791">next</a><span>|</span><label class="collapse" for="c-39985603">[-]</label><label class="expand" for="c-39985603">[2 more]</label></div><br/><div class="children"><div class="content">Really excellent work! For the curious, would you all be creating an in-memory database implementation that is postgres compatible for the doltgres project?</div><br/><div id="39985812" class="c"><input type="checkbox" id="c-39985812" checked=""/><div class="controls bullet"><span class="by">zachmu</span><span>|</span><a href="#39983700">root</a><span>|</span><a href="#39985603">parent</a><span>|</span><a href="#39987791">next</a><span>|</span><label class="collapse" for="c-39985812">[-]</label><label class="expand" for="c-39985812">[1 more]</label></div><br/><div class="children"><div class="content">We are moving in that direction but it&#x27;s not a primary goal at this point. Once we have more basic functionality working correctly in doltgres we will examine splitting off a separate package for it. The in memory implementation has a bunch of MySQL specific stuff in it right now and we&#x27;re still learning what pieces need to be generalized to share code.</div><br/></div></div></div></div></div></div></div></div><div id="39987791" class="c"><input type="checkbox" id="c-39987791" checked=""/><div class="controls bullet"><span class="by">davgoldin</span><span>|</span><a href="#39983700">prev</a><span>|</span><a href="#39985800">next</a><span>|</span><label class="collapse" for="c-39987791">[-]</label><label class="expand" for="c-39987791">[1 more]</label></div><br/><div class="children"><div class="content">Congrats, looks like a lot of hard work!<p>Could I swap storage engine with own key value storage e.g. rocksdb or similar?</div><br/></div></div><div id="39985800" class="c"><input type="checkbox" id="c-39985800" checked=""/><div class="controls bullet"><span class="by">fedxc</span><span>|</span><a href="#39987791">prev</a><span>|</span><a href="#39984054">next</a><span>|</span><label class="collapse" for="c-39985800">[-]</label><label class="expand" for="c-39985800">[4 more]</label></div><br/><div class="children"><div class="content">I always look at these implementations and go wow! But then I think, is there any real use for this?</div><br/><div id="39988485" class="c"><input type="checkbox" id="c-39988485" checked=""/><div class="controls bullet"><span class="by">kitd</span><span>|</span><a href="#39985800">parent</a><span>|</span><a href="#39985829">next</a><span>|</span><label class="collapse" for="c-39988485">[-]</label><label class="expand" for="c-39988485">[1 more]</label></div><br/><div class="children"><div class="content">If you want to run arbitrary queries on structured data then SQL is a good language to do it in. This library gives you the opportunity to build such a SQL layer on top of your own custom structured data sources, whatever they may be.</div><br/></div></div><div id="39985829" class="c"><input type="checkbox" id="c-39985829" checked=""/><div class="controls bullet"><span class="by">zachmu</span><span>|</span><a href="#39985800">parent</a><span>|</span><a href="#39988485">prev</a><span>|</span><a href="#39985815">next</a><span>|</span><label class="collapse" for="c-39985829">[-]</label><label class="expand" for="c-39985829">[1 more]</label></div><br/><div class="children"><div class="content">If your program integrates with mysql in production, you can use this for much faster local tests. It doesn&#x27;t have to be a go program, although that makes it easier.</div><br/></div></div><div id="39985815" class="c"><input type="checkbox" id="c-39985815" checked=""/><div class="controls bullet"><span class="by">zbuttram</span><span>|</span><a href="#39985800">parent</a><span>|</span><a href="#39985829">prev</a><span>|</span><a href="#39984054">next</a><span>|</span><label class="collapse" for="c-39985815">[-]</label><label class="expand" for="c-39985815">[1 more]</label></div><br/><div class="children"><div class="content">The readme mentions at least one interesting use which presumably is the impetus for its creation: <a href="https:&#x2F;&#x2F;github.com&#x2F;dolthub&#x2F;dolt">https:&#x2F;&#x2F;github.com&#x2F;dolthub&#x2F;dolt</a></div><br/></div></div></div></div><div id="39984054" class="c"><input type="checkbox" id="c-39984054" checked=""/><div class="controls bullet"><span class="by">pizza234</span><span>|</span><a href="#39985800">prev</a><span>|</span><a href="#39986104">next</a><span>|</span><label class="collapse" for="c-39984054">[-]</label><label class="expand" for="c-39984054">[4 more]</label></div><br/><div class="children"><div class="content">The compatibility (and functionality in general) is severely limited, not usable in production:<p>&gt; No transaction support. Statements like START TRANSACTION, ROLLBACK, and COMMIT are no-ops.<p>&gt; Non-performant index implementation. Indexed lookups and joins perform full table scans on the underlying tables.<p>I actually wonder if they support triggers, stored procedures etc.</div><br/><div id="39984343" class="c"><input type="checkbox" id="c-39984343" checked=""/><div class="controls bullet"><span class="by">zachmu</span><span>|</span><a href="#39984054">parent</a><span>|</span><a href="#39984244">next</a><span>|</span><label class="collapse" for="c-39984343">[-]</label><label class="expand" for="c-39984343">[1 more]</label></div><br/><div class="children"><div class="content">Yes, triggers and stored procedures are supported. Concurrency is the only real limitation in terms of functionality.<p>The bundled in-memory database implementation is mostly for use in testing, for people who run against mysql in prod and want a fast compatible go library to test against.<p>For a production-ready database that uses this engine, see Dolt:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;dolthub&#x2F;dolt">https:&#x2F;&#x2F;github.com&#x2F;dolthub&#x2F;dolt</a></div><br/></div></div><div id="39984244" class="c"><input type="checkbox" id="c-39984244" checked=""/><div class="controls bullet"><span class="by">zgk7iqea</span><span>|</span><a href="#39984054">parent</a><span>|</span><a href="#39984343">prev</a><span>|</span><a href="#39985145">next</a><span>|</span><label class="collapse" for="c-39984244">[-]</label><label class="expand" for="c-39984244">[1 more]</label></div><br/><div class="children"><div class="content">Only for the in-memory implementation. It is also specifically stated that you shouldnât use the in-memory stub in production</div><br/></div></div></div></div><div id="39986104" class="c"><input type="checkbox" id="c-39986104" checked=""/><div class="controls bullet"><span class="by">osigurdson</span><span>|</span><a href="#39984054">prev</a><span>|</span><a href="#39984126">next</a><span>|</span><label class="collapse" for="c-39986104">[-]</label><label class="expand" for="c-39986104">[10 more]</label></div><br/><div class="children"><div class="content">I suspect Go is probably better, but as a long time C# developer I cringe at the idea of implementing a DB with GC language. It seems that you would be fighting the GC all the time and have to write lots a lot of non-obvious low allocation code, using unmanaged structures, unsafe, etc., a lot. All doable of course, but seems like it would be starting on the wrong foot. Maybe fine for a very small team, but onboarding new devs with the right skill set would be hard.</div><br/><div id="39988495" class="c"><input type="checkbox" id="c-39988495" checked=""/><div class="controls bullet"><span class="by">hnlmorg</span><span>|</span><a href="#39986104">parent</a><span>|</span><a href="#39986144">next</a><span>|</span><label class="collapse" for="c-39988495">[-]</label><label class="expand" for="c-39988495">[1 more]</label></div><br/><div class="children"><div class="content">Thereâs already mysql-like databases written in non-GCâed languages. Such as myself itself.<p>Odds are if you need one written in Go then youâre requirements are somewhat different. For example the need to stub for testing.</div><br/></div></div><div id="39986144" class="c"><input type="checkbox" id="c-39986144" checked=""/><div class="controls bullet"><span class="by">winrid</span><span>|</span><a href="#39986104">parent</a><span>|</span><a href="#39988495">prev</a><span>|</span><a href="#39986485">next</a><span>|</span><label class="collapse" for="c-39986144">[-]</label><label class="expand" for="c-39986144">[1 more]</label></div><br/><div class="children"><div class="content">Well, with a manually managed language you have to do those things pretty much all the the time, but with a GC you can pick which parts are manually managed.<p>Also I suspect this project isn&#x27;t for holding hundreds of GB of stuff in memory all the time, but I could be wrong.</div><br/></div></div><div id="39986485" class="c"><input type="checkbox" id="c-39986485" checked=""/><div class="controls bullet"><span class="by">raggi</span><span>|</span><a href="#39986104">parent</a><span>|</span><a href="#39986144">prev</a><span>|</span><a href="#39986210">next</a><span>|</span><label class="collapse" for="c-39986485">[-]</label><label class="expand" for="c-39986485">[2 more]</label></div><br/><div class="children"><div class="content">yup, it&#x27;s bad, and even if you &quot;do everything right&quot; minimization wise, if you&#x27;re still using the heap then eventually fragmentation will come for you too</div><br/><div id="39986597" class="c"><input type="checkbox" id="c-39986597" checked=""/><div class="controls bullet"><span class="by">neonsunset</span><span>|</span><a href="#39986104">root</a><span>|</span><a href="#39986485">parent</a><span>|</span><a href="#39986210">next</a><span>|</span><label class="collapse" for="c-39986597">[-]</label><label class="expand" for="c-39986597">[1 more]</label></div><br/><div class="children"><div class="content">Languages using moving garbage collectors, like C# and Java are particularly good at not having to deal with fragmentation at all or marginally at most.</div><br/></div></div></div></div><div id="39986210" class="c"><input type="checkbox" id="c-39986210" checked=""/><div class="controls bullet"><span class="by">neonsunset</span><span>|</span><a href="#39986104">parent</a><span>|</span><a href="#39986485">prev</a><span>|</span><a href="#39984126">next</a><span>|</span><label class="collapse" for="c-39986210">[-]</label><label class="expand" for="c-39986210">[5 more]</label></div><br/><div class="children"><div class="content">You would be surprised by performance of modern .NET :)<p>Writing no-alloc is oftentimes done by reducing complexity and not doing &quot;stupid&quot; tricks that work against JIT and CoreLib features.<p>For databases specifically, .NET might actually be positioned very well with its low-level features (intrisics incl. SIMD, FFI, struct generics though not entirely low-level) and high-throughput GC.<p>Interesting example of this applied in practice is Garnet[0]&#x2F;FASTER[1]. Keep in mind that its codebase still has many instances of un-idiomatic C# and you can do way better by further simplification, but it already does the job well enough.<p>[0] <a href="https:&#x2F;&#x2F;github.com&#x2F;microsoft&#x2F;garnet">https:&#x2F;&#x2F;github.com&#x2F;microsoft&#x2F;garnet</a><p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;microsoft&#x2F;FASTER">https:&#x2F;&#x2F;github.com&#x2F;microsoft&#x2F;FASTER</a></div><br/><div id="39986480" class="c"><input type="checkbox" id="c-39986480" checked=""/><div class="controls bullet"><span class="by">osigurdson</span><span>|</span><a href="#39986104">root</a><span>|</span><a href="#39986210">parent</a><span>|</span><a href="#39984126">next</a><span>|</span><label class="collapse" for="c-39986480">[-]</label><label class="expand" for="c-39986480">[4 more]</label></div><br/><div class="children"><div class="content">Using net6. I agree, performance is generally great  &#x2F; just as fast as its peers (i.e. Java and Go). However, if you need to think about memory a lot, GCed runtimes are an odd choice.</div><br/><div id="39986582" class="c"><input type="checkbox" id="c-39986582" checked=""/><div class="controls bullet"><span class="by">neonsunset</span><span>|</span><a href="#39986104">root</a><span>|</span><a href="#39986480">parent</a><span>|</span><a href="#39984126">next</a><span>|</span><label class="collapse" for="c-39986582">[-]</label><label class="expand" for="c-39986582">[3 more]</label></div><br/><div class="children"><div class="content">Why is that?</div><br/><div id="39986695" class="c"><input type="checkbox" id="c-39986695" checked=""/><div class="controls bullet"><span class="by">osigurdson</span><span>|</span><a href="#39986104">root</a><span>|</span><a href="#39986582">parent</a><span>|</span><a href="#39984126">next</a><span>|</span><label class="collapse" for="c-39986695">[-]</label><label class="expand" for="c-39986695">[2 more]</label></div><br/><div class="children"><div class="content">Primarily because you not only need to think about memory, but you also need to think about the general care and feeding of the GC as well (the behavior of which can be rather opaque). To each their own, but based on my own (fairly extensive) experience, I would not create a new DB project in a GCed runtime given the choice. That being said, I do think C# is a very nice language with a high performance runtime, has a wonderful ecosystem  and is great choice for many &#x2F; most projects.</div><br/><div id="39986783" class="c"><input type="checkbox" id="c-39986783" checked=""/><div class="controls bullet"><span class="by">neonsunset</span><span>|</span><a href="#39986104">root</a><span>|</span><a href="#39986695">parent</a><span>|</span><a href="#39984126">next</a><span>|</span><label class="collapse" for="c-39986783">[-]</label><label class="expand" for="c-39986783">[1 more]</label></div><br/><div class="children"><div class="content">Isn&#x27;t the characteristic of languages like C++ or Rust is you have to think way more about managing the memory (and even more so if you use C)?<p>Borrow checker based .drop&#x2F;deallocation is very, very convenient for data with linear or otherwise trivial lifetime, but for complex cases you still end up paying with either your effort, Arc&#x2F;Arc&lt;Mutex, or both. Where it does help is knowing that your code is thread-safe, something Rust is unmatched at.<p>But otherwise, C# is a quite unique GC-based language since it offers full set of tools for low level control when you do need that. You don&#x27;t have to fight GC because once you use e.g. struct generics for abstractions and stack allocated&#x2F;pooled buffers or native memory for data neatly wrapped into spans, you get something close to C but in a much nicer looking and convenient package (GC is also an optimization since it acts like an arena allocator, and each individual object has less cost than pure reference counted approach).<p>Another language, albeit with small adoption, is D which too has GC when you want an escape hatch while offering features to compete with C++ (can&#x27;t attest to its GC performance however).</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="39984126" class="c"><input type="checkbox" id="c-39984126" checked=""/><div class="controls bullet"><span class="by">didip</span><span>|</span><a href="#39986104">prev</a><span>|</span><a href="#39985925">next</a><span>|</span><label class="collapse" for="c-39984126">[-]</label><label class="expand" for="c-39984126">[3 more]</label></div><br/><div class="children"><div class="content">tidb has been around for a while, it is distributed, written in Go and Rust, and MySQL compatible. <a href="https:&#x2F;&#x2F;github.com&#x2F;pingcap&#x2F;tidb">https:&#x2F;&#x2F;github.com&#x2F;pingcap&#x2F;tidb</a><p>Somewhat relatedly, StarRocks is also MySQL compatible, written in Java and C++, but it&#x27;s tackling OLAP use-cases. <a href="https:&#x2F;&#x2F;github.com&#x2F;StarRocks&#x2F;starrocks">https:&#x2F;&#x2F;github.com&#x2F;StarRocks&#x2F;starrocks</a><p>But maybe this project is tackling a different angle. Vitess MySQL library is kind of hard to use. Maybe this can be used to build ORM-like abstraction layer?</div><br/><div id="39984514" class="c"><input type="checkbox" id="c-39984514" checked=""/><div class="controls bullet"><span class="by">verdverm</span><span>|</span><a href="#39984126">parent</a><span>|</span><a href="#39985150">next</a><span>|</span><label class="collapse" for="c-39984514">[-]</label><label class="expand" for="c-39984514">[1 more]</label></div><br/><div class="children"><div class="content">Dolt supports git like semantics, so you can commit, pull, merge, etc...</div><br/></div></div></div></div><div id="39985925" class="c"><input type="checkbox" id="c-39985925" checked=""/><div class="controls bullet"><span class="by">west0n</span><span>|</span><a href="#39984126">prev</a><span>|</span><a href="#39984195">next</a><span>|</span><label class="collapse" for="c-39985925">[-]</label><label class="expand" for="c-39985925">[1 more]</label></div><br/><div class="children"><div class="content">Interesting, another project implemented in Go that is compatible with MySQL server, alongside others like Vitess and TiDB.</div><br/></div></div><div id="39984195" class="c"><input type="checkbox" id="c-39984195" checked=""/><div class="controls bullet"><span class="by">malkia</span><span>|</span><a href="#39985925">prev</a><span>|</span><a href="#39985935">next</a><span>|</span><label class="collapse" for="c-39984195">[-]</label><label class="expand" for="c-39984195">[2 more]</label></div><br/><div class="children"><div class="content">Is this for integration&#x2F;smoke testing?</div><br/><div id="39984689" class="c"><input type="checkbox" id="c-39984689" checked=""/><div class="controls bullet"><span class="by">timsehn</span><span>|</span><a href="#39984195">parent</a><span>|</span><a href="#39985935">next</a><span>|</span><label class="collapse" for="c-39984689">[-]</label><label class="expand" for="c-39984689">[1 more]</label></div><br/><div class="children"><div class="content">Most direct users of go-mysql-server use it to test Golang &lt;&gt; MySQL interactions without needing a running server.<p>We here at DoltHub use it to provide SQL to Dolt.</div><br/></div></div></div></div><div id="39985935" class="c"><input type="checkbox" id="c-39985935" checked=""/><div class="controls bullet"><span class="by">taf2</span><span>|</span><a href="#39984195">prev</a><span>|</span><a href="#39984567">next</a><span>|</span><label class="collapse" for="c-39985935">[-]</label><label class="expand" for="c-39985935">[1 more]</label></div><br/><div class="children"><div class="content">Could this be used as kind of connection proxy to allow for more clients to a single pool of database servers?</div><br/></div></div><div id="39984567" class="c"><input type="checkbox" id="c-39984567" checked=""/><div class="controls bullet"><span class="by">maxloh</span><span>|</span><a href="#39985935">prev</a><span>|</span><a href="#39985057">next</a><span>|</span><label class="collapse" for="c-39984567">[-]</label><label class="expand" for="c-39984567">[3 more]</label></div><br/><div class="children"><div class="content">I know it is a matter of choice, but why was MySQL chosen instead of PostgreSQL? The latter seems to be more popular on Hacker News.</div><br/><div id="39984615" class="c"><input type="checkbox" id="c-39984615" checked=""/><div class="controls bullet"><span class="by">tobinfekkes</span><span>|</span><a href="#39984567">parent</a><span>|</span><a href="#39984626">next</a><span>|</span><label class="collapse" for="c-39984615">[-]</label><label class="expand" for="c-39984615">[1 more]</label></div><br/><div class="children"><div class="content">Typically, things that are more popular on Hacker News are not most popular with the rest of the world.</div><br/></div></div><div id="39984626" class="c"><input type="checkbox" id="c-39984626" checked=""/><div class="controls bullet"><span class="by">timsehn</span><span>|</span><a href="#39984567">parent</a><span>|</span><a href="#39984615">prev</a><span>|</span><a href="#39985057">next</a><span>|</span><label class="collapse" for="c-39984626">[-]</label><label class="expand" for="c-39984626">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Why is Dolt MySQL flavored?<p>TLDR; Because go-mysql-server existed.<p><a href="https:&#x2F;&#x2F;www.dolthub.com&#x2F;blog&#x2F;2022-03-28-have-postgres-want-dolt&#x2F;#why-is-dolt-mysql-flavored-anyway" rel="nofollow">https:&#x2F;&#x2F;www.dolthub.com&#x2F;blog&#x2F;2022-03-28-have-postgres-want-d...</a><p>We have a Postgres version of Dolt in the works called Doltgres.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;dolthub&#x2F;doltgresql">https:&#x2F;&#x2F;github.com&#x2F;dolthub&#x2F;doltgresql</a><p>We might have a go-postgres-server package factored out eventually.</div><br/></div></div></div></div><div id="39985057" class="c"><input type="checkbox" id="c-39985057" checked=""/><div class="controls bullet"><span class="by">geenat</span><span>|</span><a href="#39984567">prev</a><span>|</span><a href="#39983914">next</a><span>|</span><label class="collapse" for="c-39985057">[-]</label><label class="expand" for="c-39985057">[2 more]</label></div><br/><div class="children"><div class="content">With Vitess likely consolidating its runtimes (vtgate, vtctl, vttablet, etc) into a single unified binary: <a href="https:&#x2F;&#x2F;github.com&#x2F;vitessio&#x2F;vitess&#x2F;issues&#x2F;7471#issuecomment-2035406575">https:&#x2F;&#x2F;github.com&#x2F;vitessio&#x2F;vitess&#x2F;issues&#x2F;7471#issuecomment-...</a><p>... it would be a wild future if Vitess replaced the underlying MySQL engine with this (assuming the performance is good enough for Vitess).</div><br/><div id="39985518" class="c"><input type="checkbox" id="c-39985518" checked=""/><div class="controls bullet"><span class="by">zachmu</span><span>|</span><a href="#39985057">parent</a><span>|</span><a href="#39983914">next</a><span>|</span><label class="collapse" for="c-39985518">[-]</label><label class="expand" for="c-39985518">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t think this is in the cards for vitess, their whole architecture is built around managing sharded mysql instances.</div><br/></div></div></div></div><div id="39983914" class="c"><input type="checkbox" id="c-39983914" checked=""/><div class="controls bullet"><span class="by">karmakaze</span><span>|</span><a href="#39985057">prev</a><span>|</span><a href="#39984184">next</a><span>|</span><label class="collapse" for="c-39983914">[-]</label><label class="expand" for="c-39983914">[1 more]</label></div><br/><div class="children"><div class="content">Compatible has many aspects. I&#x27;d be interested in the replication protocols.</div><br/></div></div><div id="39984184" class="c"><input type="checkbox" id="c-39984184" checked=""/><div class="controls bullet"><span class="by">neximo64</span><span>|</span><a href="#39983914">prev</a><span>|</span><a href="#39985391">next</a><span>|</span><label class="collapse" for="c-39984184">[-]</label><label class="expand" for="c-39984184">[2 more]</label></div><br/><div class="children"><div class="content">Is there anything like this for postgres?</div><br/><div id="39984263" class="c"><input type="checkbox" id="c-39984263" checked=""/><div class="controls bullet"><span class="by">perplexa</span><span>|</span><a href="#39984184">parent</a><span>|</span><a href="#39985391">next</a><span>|</span><label class="collapse" for="c-39984263">[-]</label><label class="expand" for="c-39984263">[1 more]</label></div><br/><div class="children"><div class="content">cockroachdb might be close: <a href="https:&#x2F;&#x2F;github.com&#x2F;cockroachdb&#x2F;cockroach">https:&#x2F;&#x2F;github.com&#x2F;cockroachdb&#x2F;cockroach</a></div><br/></div></div></div></div><div id="39985391" class="c"><input type="checkbox" id="c-39985391" checked=""/><div class="controls bullet"><span class="by">cvalka</span><span>|</span><a href="#39984184">prev</a><span>|</span><a href="#39984726">next</a><span>|</span><label class="collapse" for="c-39985391">[-]</label><label class="expand" for="c-39985391">[1 more]</label></div><br/><div class="children"><div class="content">TiDB!</div><br/></div></div><div id="39984726" class="c"><input type="checkbox" id="c-39984726" checked=""/><div class="controls bullet"><span class="by">amelius</span><span>|</span><a href="#39985391">prev</a><span>|</span><a href="#39983947">next</a><span>|</span><label class="collapse" for="c-39984726">[-]</label><label class="expand" for="c-39984726">[1 more]</label></div><br/><div class="children"><div class="content">Performance comparison against the original?</div><br/></div></div><div id="39983947" class="c"><input type="checkbox" id="c-39983947" checked=""/><div class="controls bullet"><span class="by">sgammon</span><span>|</span><a href="#39984726">prev</a><span>|</span><a href="#39986280">next</a><span>|</span><label class="collapse" for="c-39983947">[-]</label><label class="expand" for="c-39983947">[3 more]</label></div><br/><div class="children"><div class="content">Isn&#x27;t that........ Vitess?</div><br/><div id="39984406" class="c"><input type="checkbox" id="c-39984406" checked=""/><div class="controls bullet"><span class="by">zachmu</span><span>|</span><a href="#39983947">parent</a><span>|</span><a href="#39986280">next</a><span>|</span><label class="collapse" for="c-39984406">[-]</label><label class="expand" for="c-39984406">[2 more]</label></div><br/><div class="children"><div class="content">Vitess (a fork of it anyway) provides the parser and the server. The query engine is all custom go code.</div><br/><div id="39985296" class="c"><input type="checkbox" id="c-39985296" checked=""/><div class="controls bullet"><span class="by">sgammon</span><span>|</span><a href="#39983947">root</a><span>|</span><a href="#39984406">parent</a><span>|</span><a href="#39986280">next</a><span>|</span><label class="collapse" for="c-39985296">[-]</label><label class="expand" for="c-39985296">[1 more]</label></div><br/><div class="children"><div class="content">Ah, cool, that makes sense. Thanks for clarifying</div><br/></div></div></div></div></div></div><div id="39983935" class="c"><input type="checkbox" id="c-39983935" checked=""/><div class="controls bullet"><span class="by">kamikaz1k</span><span>|</span><a href="#39984009">prev</a><span>|</span><label class="collapse" for="c-39983935">[-]</label><label class="expand" for="c-39983935">[3 more]</label></div><br/><div class="children"><div class="content">shouldn&#x27;t these projects have a perf comparison table? there was a post a couple days ago about the an in-memory Postgres, but same problem on the perf.<p>if someone is considering running it, they&#x27;re probably considering it against the actual thing. and I would think the main decision criteria is: _how much faster tho?_</div><br/><div id="39984451" class="c"><input type="checkbox" id="c-39984451" checked=""/><div class="controls bullet"><span class="by">zachmu</span><span>|</span><a href="#39983935">parent</a><span>|</span><label class="collapse" for="c-39984451">[-]</label><label class="expand" for="c-39984451">[2 more]</label></div><br/><div class="children"><div class="content">This is a reasonable point, we&#x27;ll run some benchmarks and publish them.<p>We expect that it&#x27;s faster than MySQL for small scale. Dolt is only 2x slower than MySQL and that includes disk access.<p><a href="https:&#x2F;&#x2F;docs.dolthub.com&#x2F;sql-reference&#x2F;benchmarks&#x2F;latency" rel="nofollow">https:&#x2F;&#x2F;docs.dolthub.com&#x2F;sql-reference&#x2F;benchmarks&#x2F;latency</a></div><br/><div id="39985557" class="c"><input type="checkbox" id="c-39985557" checked=""/><div class="controls bullet"><span class="by">kamikaz1k</span><span>|</span><a href="#39983935">root</a><span>|</span><a href="#39984451">parent</a><span>|</span><label class="collapse" for="c-39985557">[-]</label><label class="expand" for="c-39985557">[1 more]</label></div><br/><div class="children"><div class="content">Thanks! Appreciate your response.<p>In dynamic language land, we tend to use real DBs for test runs. So having a faster DB wouldn&#x27;t hurt!</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>