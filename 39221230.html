<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1706864456339" as="style"/><link rel="stylesheet" href="styles.css?v=1706864456339"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://pdx.su/blog/2024-01-19-fixing-a-broken-smart-cat-feeder-with-esp32/">Fixing a broken smart cat feeder with ESP32</a> <span class="domain">(<a href="https://pdx.su">pdx.su</a>)</span></div><div class="subtext"><span>EvanAnderson</span> | <span>29 comments</span></div><br/><div><div id="39222775" class="c"><input type="checkbox" id="c-39222775" checked=""/><div class="controls bullet"><span class="by">MPSimmons</span><span>|</span><a href="#39222693">next</a><span>|</span><label class="collapse" for="c-39222775">[-]</label><label class="expand" for="c-39222775">[2 more]</label></div><br/><div class="children"><div class="content">I haven&#x27;t done as much with it, but I&#x27;ve also been very impressed with ESPhome. Seems like a really great piece of software, and super extensible.<p>The list of supported components is extensive: 
<a href="https:&#x2F;&#x2F;esphome.io&#x2F;components&#x2F;index.html" rel="nofollow">https:&#x2F;&#x2F;esphome.io&#x2F;components&#x2F;index.html</a></div><br/><div id="39223702" class="c"><input type="checkbox" id="c-39223702" checked=""/><div class="controls bullet"><span class="by">baby_souffle</span><span>|</span><a href="#39222775">parent</a><span>|</span><a href="#39222693">next</a><span>|</span><label class="collapse" for="c-39223702">[-]</label><label class="expand" for="c-39223702">[1 more]</label></div><br/><div class="children"><div class="content">I use it extensively and it really is awesome.  It’s not perfect, but the limits I run into aren’t what 80+% of users will ever hit. Even if hacky and ugly, you can work around most of the limitations</div><br/></div></div></div></div><div id="39222693" class="c"><input type="checkbox" id="c-39222693" checked=""/><div class="controls bullet"><span class="by">blacksmith_tb</span><span>|</span><a href="#39222775">prev</a><span>|</span><a href="#39223839">next</a><span>|</span><label class="collapse" for="c-39222693">[-]</label><label class="expand" for="c-39222693">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a nice high-level writeup of getting a flakey piece of consumer electronics back in service, though he used an ESP8266, so I am not sure about the title.</div><br/><div id="39225990" class="c"><input type="checkbox" id="c-39225990" checked=""/><div class="controls bullet"><span class="by">kashunstva</span><span>|</span><a href="#39222693">parent</a><span>|</span><a href="#39223839">next</a><span>|</span><label class="collapse" for="c-39225990">[-]</label><label class="expand" for="c-39225990">[1 more]</label></div><br/><div class="children"><div class="content">To add more to the confusion, twice in the text of TFA he refers to an ESP8622, which AFAIK isn’t a thing. The ESP8266 is fine in this application of course since he’s using a single GPIO pin.</div><br/></div></div></div></div><div id="39223839" class="c"><input type="checkbox" id="c-39223839" checked=""/><div class="controls bullet"><span class="by">bigyikes</span><span>|</span><a href="#39222693">prev</a><span>|</span><a href="#39223036">next</a><span>|</span><label class="collapse" for="c-39223839">[-]</label><label class="expand" for="c-39223839">[2 more]</label></div><br/><div class="children"><div class="content">I built a smart treat dispenser for my cat using an ESP32.<p>The best feature is the little speaker inside that plays the Meowmix jingle when dispensing. My cat is now conditioned to come running when she hears that sound.<p>I connected it to my Apple Home network via Home Assistant, and it works great. I can tell Siri to give the cat a snack, and off she goes.</div><br/><div id="39224163" class="c"><input type="checkbox" id="c-39224163" checked=""/><div class="controls bullet"><span class="by">shiroiuma</span><span>|</span><a href="#39223839">parent</a><span>|</span><a href="#39223036">next</a><span>|</span><label class="collapse" for="c-39224163">[-]</label><label class="expand" for="c-39224163">[1 more]</label></div><br/><div class="children"><div class="content">&gt;The best feature is the little speaker inside that plays the Meowmix jingle when dispensing. My cat is now conditioned to come running when she hears that sound.<p>Are you sure you don&#x27;t have that backwards?  Maybe she conditioned <i>you</i> to spend your time building a gadget to play her favorite tune.</div><br/></div></div></div></div><div id="39223036" class="c"><input type="checkbox" id="c-39223036" checked=""/><div class="controls bullet"><span class="by">NegativeLatency</span><span>|</span><a href="#39223839">prev</a><span>|</span><a href="#39222983">next</a><span>|</span><label class="collapse" for="c-39223036">[-]</label><label class="expand" for="c-39223036">[5 more]</label></div><br/><div class="children"><div class="content">&gt; This thing is covered in sensors; it&#x27;s got two scales, ostensibly for measuring the weight of the hopper and the weight of food dispensed, a pair of infrared sensors to detect when the hooper is empty, sensors that monitor the motor&#x27;s turning, and others that I haven&#x27;t figured out the purpose of.<p>Bad for business if your cat feeder fails to feed the customer&#x27;s cat and they  return from a trip to a very hungry cat.</div><br/><div id="39223415" class="c"><input type="checkbox" id="c-39223415" checked=""/><div class="controls bullet"><span class="by">quercusa</span><span>|</span><a href="#39223036">parent</a><span>|</span><a href="#39224951">next</a><span>|</span><label class="collapse" for="c-39223415">[-]</label><label class="expand" for="c-39223415">[3 more]</label></div><br/><div class="children"><div class="content">How could you tell? Don&#x27;t they usually act as if they&#x27;re starving?</div><br/><div id="39223484" class="c"><input type="checkbox" id="c-39223484" checked=""/><div class="controls bullet"><span class="by">stavros</span><span>|</span><a href="#39223036">root</a><span>|</span><a href="#39223415">parent</a><span>|</span><a href="#39224951">next</a><span>|</span><label class="collapse" for="c-39223484">[-]</label><label class="expand" for="c-39223484">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;d be much skinnier and&#x2F;or dead.</div><br/><div id="39224710" class="c"><input type="checkbox" id="c-39224710" checked=""/><div class="controls bullet"><span class="by">brewdad</span><span>|</span><a href="#39223036">root</a><span>|</span><a href="#39223484">parent</a><span>|</span><a href="#39224951">next</a><span>|</span><label class="collapse" for="c-39224710">[-]</label><label class="expand" for="c-39224710">[1 more]</label></div><br/><div class="children"><div class="content">It’s pining for the fjords.</div><br/></div></div></div></div></div></div><div id="39224951" class="c"><input type="checkbox" id="c-39224951" checked=""/><div class="controls bullet"><span class="by">shiroiuma</span><span>|</span><a href="#39223036">parent</a><span>|</span><a href="#39223415">prev</a><span>|</span><a href="#39222983">next</a><span>|</span><label class="collapse" for="c-39224951">[-]</label><label class="expand" for="c-39224951">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, that sentence shows me that this guy isn&#x27;t an engineer at all, he&#x27;s just a hacker.<p>If he made his own automatic litter box (the rotating drum kind) for his cat, he&#x27;ll also not see the point of all those sensors that &quot;aren&#x27;t really needed&quot;, and one day he&#x27;ll come home to find his cat chopped in half.</div><br/></div></div></div></div><div id="39222983" class="c"><input type="checkbox" id="c-39222983" checked=""/><div class="controls bullet"><span class="by">invertigo</span><span>|</span><a href="#39223036">prev</a><span>|</span><a href="#39225938">next</a><span>|</span><label class="collapse" for="c-39222983">[-]</label><label class="expand" for="c-39222983">[6 more]</label></div><br/><div class="children"><div class="content">I love Home Assistant but I have yet to venture into the ESP32 board route of things. Can someone point to a good guide to getting started with these boards? How much soldering and&#x2F;or microcontroller experience is needed?</div><br/><div id="39223043" class="c"><input type="checkbox" id="c-39223043" checked=""/><div class="controls bullet"><span class="by">ben_</span><span>|</span><a href="#39222983">parent</a><span>|</span><a href="#39223739">next</a><span>|</span><label class="collapse" for="c-39223043">[-]</label><label class="expand" for="c-39223043">[1 more]</label></div><br/><div class="children"><div class="content">They&#x27;re pretty great and compatible with most things. ESPHome [1] is a great resource for getting ESP32&#x27;s working nicely with HA and you can find lots of projects using it to learn from.<p>You&#x27;ll likely need to do soldering if you want to connect sensors, batteries and the like.<p>Personally I really like what SEEED Studio [2] does with their ESP32 boards and they have nice docs.<p>1. <a href="https:&#x2F;&#x2F;esphome.io&#x2F;" rel="nofollow">https:&#x2F;&#x2F;esphome.io&#x2F;</a> 
2. <a href="https:&#x2F;&#x2F;www.seeedstudio.com&#x2F;home-assistant" rel="nofollow">https:&#x2F;&#x2F;www.seeedstudio.com&#x2F;home-assistant</a></div><br/></div></div><div id="39223739" class="c"><input type="checkbox" id="c-39223739" checked=""/><div class="controls bullet"><span class="by">mft_</span><span>|</span><a href="#39222983">parent</a><span>|</span><a href="#39223043">prev</a><span>|</span><a href="#39225174">next</a><span>|</span><label class="collapse" for="c-39223739">[-]</label><label class="expand" for="c-39223739">[1 more]</label></div><br/><div class="children"><div class="content">You can easily get ESP8266&#x2F;ESP32 boards with header pins already soldered on; combine this with some DuPont cables (as I’ve just learned they’re called) and you can start messing around with things without much soldering at all. You can also connect to e.g. LED strips and simple sensors in the same way.<p>See this kit for example:
<a href="https:&#x2F;&#x2F;a.aliexpress.com&#x2F;_EyZhdw5" rel="nofollow">https:&#x2F;&#x2F;a.aliexpress.com&#x2F;_EyZhdw5</a></div><br/></div></div><div id="39225174" class="c"><input type="checkbox" id="c-39225174" checked=""/><div class="controls bullet"><span class="by">numpad0</span><span>|</span><a href="#39222983">parent</a><span>|</span><a href="#39223739">prev</a><span>|</span><a href="#39223401">next</a><span>|</span><label class="collapse" for="c-39225174">[-]</label><label class="expand" for="c-39225174">[1 more]</label></div><br/><div class="children"><div class="content">M5Stack&#x2F;M5Stick products and Grove accessories comes with batteries onboard and connects with cables</div><br/></div></div><div id="39223401" class="c"><input type="checkbox" id="c-39223401" checked=""/><div class="controls bullet"><span class="by">nikhilgk</span><span>|</span><a href="#39222983">parent</a><span>|</span><a href="#39225174">prev</a><span>|</span><a href="#39224272">next</a><span>|</span><label class="collapse" for="c-39223401">[-]</label><label class="expand" for="c-39223401">[1 more]</label></div><br/><div class="children"><div class="content">You could get a dev board and a breakout board on aliexpress for less than $6 - this way you can get away without any soldering for most use cases. And if you use esphome and homeassistant, pretty much all code is just configuration and setup in homeassistant.</div><br/></div></div><div id="39224272" class="c"><input type="checkbox" id="c-39224272" checked=""/><div class="controls bullet"><span class="by">XorNot</span><span>|</span><a href="#39222983">parent</a><span>|</span><a href="#39223401">prev</a><span>|</span><a href="#39225938">next</a><span>|</span><label class="collapse" for="c-39224272">[-]</label><label class="expand" for="c-39224272">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;www.athom.tech&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.athom.tech&#x2F;</a> are selling a lot of pre-flashed gear in nice casings which is essentially &quot;plug and play ready to go&quot; - out of the box you can wirelessly flash them.<p>So depending on what you&#x27;re doing, they&#x27;re an excellent place to start.</div><br/></div></div></div></div><div id="39225938" class="c"><input type="checkbox" id="c-39225938" checked=""/><div class="controls bullet"><span class="by">KingOfCoders</span><span>|</span><a href="#39222983">prev</a><span>|</span><a href="#39223658">next</a><span>|</span><label class="collapse" for="c-39225938">[-]</label><label class="expand" for="c-39225938">[1 more]</label></div><br/><div class="children"><div class="content">Smart cat feeder? Cat Smart Feeder?</div><br/></div></div><div id="39223658" class="c"><input type="checkbox" id="c-39223658" checked=""/><div class="controls bullet"><span class="by">paxys</span><span>|</span><a href="#39225938">prev</a><span>|</span><a href="#39224953">next</a><span>|</span><label class="collapse" for="c-39223658">[-]</label><label class="expand" for="c-39223658">[4 more]</label></div><br/><div class="children"><div class="content">What if I have a dumb cat?</div><br/><div id="39224834" class="c"><input type="checkbox" id="c-39224834" checked=""/><div class="controls bullet"><span class="by">twisteriffic</span><span>|</span><a href="#39223658">parent</a><span>|</span><a href="#39224433">next</a><span>|</span><label class="collapse" for="c-39224834">[-]</label><label class="expand" for="c-39224834">[2 more]</label></div><br/><div class="children"><div class="content">I bought a cat food dispenser for $5 at goodwill and plugged it into a $10 &quot;inching&quot; timer plug from AliExpress. 10 seconds every 4 hours. It&#x27;s the dumbest smart feeder I could make for the dumbest best cat.</div><br/><div id="39225518" class="c"><input type="checkbox" id="c-39225518" checked=""/><div class="controls bullet"><span class="by">schiffern</span><span>|</span><a href="#39223658">root</a><span>|</span><a href="#39224834">parent</a><span>|</span><a href="#39224433">next</a><span>|</span><label class="collapse" for="c-39225518">[-]</label><label class="expand" for="c-39225518">[1 more]</label></div><br/><div class="children"><div class="content">&gt;$10 &quot;inching&quot; timer plug<p>Thanks, I didn&#x27;t know these existed. Another useful &quot;midwit&quot; device to add to the list.<p><a href="https:&#x2F;&#x2F;dynomight.substack.com&#x2F;p&#x2F;midwit-home" rel="nofollow">https:&#x2F;&#x2F;dynomight.substack.com&#x2F;p&#x2F;midwit-home</a><p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=37859437">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=37859437</a></div><br/></div></div></div></div><div id="39224433" class="c"><input type="checkbox" id="c-39224433" checked=""/><div class="controls bullet"><span class="by">dole</span><span>|</span><a href="#39223658">parent</a><span>|</span><a href="#39224834">prev</a><span>|</span><a href="#39224953">next</a><span>|</span><label class="collapse" for="c-39224433">[-]</label><label class="expand" for="c-39224433">[1 more]</label></div><br/><div class="children"><div class="content">Use 555s</div><br/></div></div></div></div><div id="39224953" class="c"><input type="checkbox" id="c-39224953" checked=""/><div class="controls bullet"><span class="by">29athrowaway</span><span>|</span><a href="#39223658">prev</a><span>|</span><a href="#39223357">next</a><span>|</span><label class="collapse" for="c-39224953">[-]</label><label class="expand" for="c-39224953">[1 more]</label></div><br/><div class="children"><div class="content">By the way, .su is the Soviet Union country code top level domain.<p><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;.su" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;.su</a><p>For weird reasons, the Soviet Union still officially exists in the Internet and it seems to be growing.</div><br/></div></div><div id="39223357" class="c"><input type="checkbox" id="c-39223357" checked=""/><div class="controls bullet"><span class="by">mschuster91</span><span>|</span><a href="#39224953">prev</a><span>|</span><label class="collapse" for="c-39223357">[-]</label><label class="expand" for="c-39223357">[5 more]</label></div><br/><div class="children"><div class="content">&gt; Complex in that they built so much more functionality into the device than was really needed. This thing is covered in sensors; it&#x27;s got two scales, ostensibly for measuring the weight of the hopper and the weight of food dispensed, a pair of infrared sensors to detect when the hooper is empty, sensors that monitor the motor&#x27;s turning, and others that I haven&#x27;t figured out the purpose of.<p>I&#x27;d <i>love</i> if Surefeed, a competitor, had gone the way of shipping more sensors. Instead, they just monitor the current going through the motor to detect if the lid is closed or opened (the current will spike when it reaches either end position)... and the motor is relatively powerful, powerful enough in fact to shred the plastic gears. It&#x27;s laughable - this thing consists of a few pieces of plastic, an RFID antenna loop, a motor and a tiny PCB, but costs 160€.</div><br/><div id="39223534" class="c"><input type="checkbox" id="c-39223534" checked=""/><div class="controls bullet"><span class="by">stavros</span><span>|</span><a href="#39223357">parent</a><span>|</span><label class="collapse" for="c-39223534">[-]</label><label class="expand" for="c-39223534">[4 more]</label></div><br/><div class="children"><div class="content">A current sensor is much better than a position sensor, as you don&#x27;t want to keep trying to close the lid if it catches on anything.</div><br/><div id="39223547" class="c"><input type="checkbox" id="c-39223547" checked=""/><div class="controls bullet"><span class="by">mschuster91</span><span>|</span><a href="#39223357">root</a><span>|</span><a href="#39223534">parent</a><span>|</span><label class="collapse" for="c-39223547">[-]</label><label class="expand" for="c-39223547">[3 more]</label></div><br/><div class="children"><div class="content">A rotation sensor would detect a blocked gear just as fine, maybe even faster than a current monitor - with the advantage of the rotation sensor being unimpeded by slack in the gear train.</div><br/><div id="39223561" class="c"><input type="checkbox" id="c-39223561" checked=""/><div class="controls bullet"><span class="by">stavros</span><span>|</span><a href="#39223357">root</a><span>|</span><a href="#39223547">parent</a><span>|</span><label class="collapse" for="c-39223561">[-]</label><label class="expand" for="c-39223561">[2 more]</label></div><br/><div class="children"><div class="content">Why is the current sensor impeded by slack? It&#x27;s also much cheaper and more reliable.</div><br/><div id="39226084" class="c"><input type="checkbox" id="c-39226084" checked=""/><div class="controls bullet"><span class="by">mschuster91</span><span>|</span><a href="#39223357">root</a><span>|</span><a href="#39223561">parent</a><span>|</span><label class="collapse" for="c-39226084">[-]</label><label class="expand" for="c-39226084">[1 more]</label></div><br/><div class="children"><div class="content">By the time the current monitor senses the spike, a lot of tension can build up  in the gear train from slack and torsion. A rotation sensor on the outermost axle can detect a blockage way earlier.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>