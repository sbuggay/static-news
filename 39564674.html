<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1709370077097" as="style"/><link rel="stylesheet" href="styles.css?v=1709370077097"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://forums.atariage.com/topic/362182-colecovision-basic-compiler-cvbasic-v010/">Colecovision BASIC compiler: CVBasic v0.1.0</a>Â <span class="domain">(<a href="https://forums.atariage.com">forums.atariage.com</a>)</span></div><div class="subtext"><span>nanochess</span> | <span>29 comments</span></div><br/><div><div id="39570210" class="c"><input type="checkbox" id="c-39570210" checked=""/><div class="controls bullet"><span class="by">lebuffon</span><span>|</span><a href="#39566945">next</a><span>|</span><label class="collapse" for="c-39570210">[-]</label><label class="expand" for="c-39570210">[1 more]</label></div><br/><div class="children"><div class="content">Off topic but interesting:
Over in the TI-99 section of atariage.com the boys have ported GCC to a machine first designed in 1978. :-)
It&#x27;s taken a while to get all the kinks out. First attempts were made in 2010.
Great progress has been made in the last several months as it now seems to compile most people&#x27;s projects successfully.<p><a href="https:&#x2F;&#x2F;forums.atariage.com&#x2F;topic&#x2F;164295-gcc-for-the-ti&#x2F;#comments" rel="nofollow">https:&#x2F;&#x2F;forums.atariage.com&#x2F;topic&#x2F;164295-gcc-for-the-ti&#x2F;#com...</a></div><br/></div></div><div id="39566945" class="c"><input type="checkbox" id="c-39566945" checked=""/><div class="controls bullet"><span class="by">jhbadger</span><span>|</span><a href="#39570210">prev</a><span>|</span><a href="#39567904">next</a><span>|</span><label class="collapse" for="c-39566945">[-]</label><label class="expand" for="c-39566945">[1 more]</label></div><br/><div class="children"><div class="content">BTW, the author of this earlier created IntyBasic, a Basic compiler for the Mattel Intellivision (<a href="https:&#x2F;&#x2F;intellivisionrevolution.com&#x2F;intybasic" rel="nofollow">https:&#x2F;&#x2F;intellivisionrevolution.com&#x2F;intybasic</a>). And the famous &quot;nanochess&quot;  tiny chess engine (hence his user name of nanochess)</div><br/></div></div><div id="39567904" class="c"><input type="checkbox" id="c-39567904" checked=""/><div class="controls bullet"><span class="by">ashleyn</span><span>|</span><a href="#39566945">prev</a><span>|</span><a href="#39565124">next</a><span>|</span><label class="collapse" for="c-39567904">[-]</label><label class="expand" for="c-39567904">[2 more]</label></div><br/><div class="children"><div class="content">Love these. There was a BASIC compiler for the Sega Genesis too, BasiEgaXorz: <a href="https:&#x2F;&#x2F;devster.monkeeh.com&#x2F;sega&#x2F;basiegaxorz&#x2F;" rel="nofollow">https:&#x2F;&#x2F;devster.monkeeh.com&#x2F;sega&#x2F;basiegaxorz&#x2F;</a></div><br/><div id="39569517" class="c"><input type="checkbox" id="c-39569517" checked=""/><div class="controls bullet"><span class="by">runamuck</span><span>|</span><a href="#39567904">parent</a><span>|</span><a href="#39565124">next</a><span>|</span><label class="collapse" for="c-39569517">[-]</label><label class="expand" for="c-39569517">[1 more]</label></div><br/><div class="children"><div class="content">The eyeball searing orange text on fluorescent teal background made me chuckle like an idiot.  Did the web page designer troll me?  I love it either way.</div><br/></div></div></div></div><div id="39565124" class="c"><input type="checkbox" id="c-39565124" checked=""/><div class="controls bullet"><span class="by">hnthrowaway0328</span><span>|</span><a href="#39567904">prev</a><span>|</span><a href="#39566597">next</a><span>|</span><label class="collapse" for="c-39565124">[-]</label><label class="expand" for="c-39565124">[5 more]</label></div><br/><div class="children"><div class="content">Getting an alpha version done in two days is a pretty mighty accomplishment. Congratulationa!<p>I have been working on a learning project to produce an interpreter of a sub set of Python written in Python (most arithmetic ops, assignment ops, if-elif-else, while-break, function calls) and it took me about 2 months to complete it in my free time.<p>I wish I could be more focused and motivated.</div><br/><div id="39565403" class="c"><input type="checkbox" id="c-39565403" checked=""/><div class="controls bullet"><span class="by">nanochess</span><span>|</span><a href="#39565124">parent</a><span>|</span><a href="#39570434">next</a><span>|</span><label class="collapse" for="c-39565403">[-]</label><label class="expand" for="c-39565403">[1 more]</label></div><br/><div class="children"><div class="content">Thanks! It was coded fast because I reused parts of my IntyBASIC compiler like the lexer, the expression analyzer, and the decision statements core (GOTO&#x2F;GOSUB&#x2F;WHILE&#x2F;WEND etc). The first version of IntyBASIC took me almost two months to be ready.</div><br/></div></div><div id="39570434" class="c"><input type="checkbox" id="c-39570434" checked=""/><div class="controls bullet"><span class="by">vasvir</span><span>|</span><a href="#39565124">parent</a><span>|</span><a href="#39565403">prev</a><span>|</span><a href="#39567041">next</a><span>|</span><label class="collapse" for="c-39570434">[-]</label><label class="expand" for="c-39570434">[1 more]</label></div><br/><div class="children"><div class="content">I think you are too harsh on yourself.<p>Doing a compiler from scratch is a serious task.<p>The guy had the experience of another Basic compiler and it may even had previous experience from other compiler projects.<p>I once implemented an interpreter for a custom DSL that had only boolean logic (and, or) and parenthesis precedence. It took me one week but then again I was totally green in the field.</div><br/></div></div><div id="39567041" class="c"><input type="checkbox" id="c-39567041" checked=""/><div class="controls bullet"><span class="by">ikari_pl</span><span>|</span><a href="#39565124">parent</a><span>|</span><a href="#39570434">prev</a><span>|</span><a href="#39566597">next</a><span>|</span><label class="collapse" for="c-39567041">[-]</label><label class="expand" for="c-39567041">[2 more]</label></div><br/><div class="children"><div class="content">for which platform?</div><br/><div id="39567500" class="c"><input type="checkbox" id="c-39567500" checked=""/><div class="controls bullet"><span class="by">hnthrowaway0328</span><span>|</span><a href="#39565124">root</a><span>|</span><a href="#39567041">parent</a><span>|</span><a href="#39566597">next</a><span>|</span><label class="collapse" for="c-39567500">[-]</label><label class="expand" for="c-39567500">[1 more]</label></div><br/><div class="children"><div class="content">My interpreter? Oh it&#x27;s just a simple frontend. My plan is to first convert it to an ast tree walker, and then add a backend for some vintage platform. I am also thinking about generating llvm IR as it makes it trivial for the backends.<p>I knew nothing about compiler theory so it took me way too much time to implement break and function call correctly.</div><br/></div></div></div></div></div></div><div id="39566597" class="c"><input type="checkbox" id="c-39566597" checked=""/><div class="controls bullet"><span class="by">tombert</span><span>|</span><a href="#39565124">prev</a><span>|</span><a href="#39567106">next</a><span>|</span><label class="collapse" for="c-39566597">[-]</label><label class="expand" for="c-39566597">[6 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve debated making a game for the Coleco just because it was substantially less limited than the Atari 2600, but still old enough to be interesting. The fact that I&#x27;d have to do it in assembly was the big turn-off there, so playing with BASIC might be more fun.<p>I&#x27;d be super interested in trying a FORTH system as well, if anyone knows of something like that for the Coleco.</div><br/><div id="39568378" class="c"><input type="checkbox" id="c-39568378" checked=""/><div class="controls bullet"><span class="by">mech422</span><span>|</span><a href="#39566597">parent</a><span>|</span><a href="#39568831">next</a><span>|</span><label class="collapse" for="c-39568378">[-]</label><label class="expand" for="c-39568378">[3 more]</label></div><br/><div class="children"><div class="content">IIRC, there was a really neat looking FORTH for the C64 focused on game programming: White Lightning[0]. oh - it runs on Zx80 too... I always wanted to play with it as a kid, but never got around to it :-&#x2F;<p>0: <a href="https:&#x2F;&#x2F;www.forth.org&#x2F;lightning.html" rel="nofollow">https:&#x2F;&#x2F;www.forth.org&#x2F;lightning.html</a></div><br/><div id="39568852" class="c"><input type="checkbox" id="c-39568852" checked=""/><div class="controls bullet"><span class="by">buescher</span><span>|</span><a href="#39566597">root</a><span>|</span><a href="#39568378">parent</a><span>|</span><a href="#39568831">next</a><span>|</span><label class="collapse" for="c-39568852">[-]</label><label class="expand" for="c-39568852">[2 more]</label></div><br/><div class="children"><div class="content">There were a few things written in Forth for the Atari 8-bits, most notably RAMbrandt and Omnitrend&#x27;s Universe.  I don&#x27;t recall any action games in Forth.</div><br/><div id="39569468" class="c"><input type="checkbox" id="c-39569468" checked=""/><div class="controls bullet"><span class="by">crq-yml</span><span>|</span><a href="#39566597">root</a><span>|</span><a href="#39568852">parent</a><span>|</span><a href="#39568831">next</a><span>|</span><label class="collapse" for="c-39569468">[-]</label><label class="expand" for="c-39569468">[1 more]</label></div><br/><div class="children"><div class="content">Forth (according to sources I have not verified) powered the influential CRPG series of Stuart Smith: Fracas (1980), Ali Baba and the 40 Thieves (1981), Return of Heracles (1983), and Adventure Construction Set (1984). All were multi-platform releases. If true, Forth was a good fit for that, since it would function as the game&#x27;s  scripting environment as well as  the engine, and it would additionally explain why those games feel like more developed scenarios than contemporary rivals.<p>Action games needed tighter main loops for gameplay so my understanding is that where Forth was used for those, it was primarily as a macroassembler system.<p>I am exploring Forth for Agon Light right now. Since the Agon is a modern 8-bit design swaggering around with an eZ80 at 20MHz, 512kB RAM, and a programmable VDP with functions resembling GPU shader programming, it can absorb all the interpreter overheads easily.</div><br/></div></div></div></div></div></div><div id="39568831" class="c"><input type="checkbox" id="c-39568831" checked=""/><div class="controls bullet"><span class="by">buescher</span><span>|</span><a href="#39566597">parent</a><span>|</span><a href="#39568378">prev</a><span>|</span><a href="#39567106">next</a><span>|</span><label class="collapse" for="c-39568831">[-]</label><label class="expand" for="c-39568831">[2 more]</label></div><br/><div class="children"><div class="content">Retro-wise, the MSX platform is extremely similar and would have a bigger audience.<p>The popular home computers of the era would also fit your criteria - why the Coleco?</div><br/><div id="39569176" class="c"><input type="checkbox" id="c-39569176" checked=""/><div class="controls bullet"><span class="by">tombert</span><span>|</span><a href="#39566597">root</a><span>|</span><a href="#39568831">parent</a><span>|</span><a href="#39567106">next</a><span>|</span><label class="collapse" for="c-39569176">[-]</label><label class="expand" for="c-39569176">[1 more]</label></div><br/><div class="children"><div class="content">I had one as a kid, hand me down from my dad.  I always liked it.</div><br/></div></div></div></div></div></div><div id="39567106" class="c"><input type="checkbox" id="c-39567106" checked=""/><div class="controls bullet"><span class="by">ubavic</span><span>|</span><a href="#39566597">prev</a><span>|</span><a href="#39565845">next</a><span>|</span><label class="collapse" for="c-39567106">[-]</label><label class="expand" for="c-39567106">[2 more]</label></div><br/><div class="children"><div class="content">Great job!<p>I am actually thinking these days about building a BASIC compiler for another Z80 retro machine (Galaksija). But I am a little bit afraid about the machine code generation part. How hard was it to target Z80?</div><br/><div id="39568330" class="c"><input type="checkbox" id="c-39568330" checked=""/><div class="controls bullet"><span class="by">nanochess</span><span>|</span><a href="#39567106">parent</a><span>|</span><a href="#39565845">next</a><span>|</span><label class="collapse" for="c-39568330">[-]</label><label class="expand" for="c-39568330">[1 more]</label></div><br/><div class="children"><div class="content">Automatic generation of code for Z80 is kind of hard because some operations are forced to use a few registers.
For example, ADD only works with A or HL (and IX or IY), and the code generator requires register shuffling or using the stack for saving temporary values.
My current approach is building a node tree for expressions, generating code by detecting common patterns, and if there isn&#x27;t a pattern it goes the complicated but simple way. For example, for add:
right expr. &#x2F; push hl &#x2F; left expr. &#x2F; pop de &#x2F; add hl,de</div><br/></div></div></div></div><div id="39565845" class="c"><input type="checkbox" id="c-39565845" checked=""/><div class="controls bullet"><span class="by">Agingcoder</span><span>|</span><a href="#39567106">prev</a><span>|</span><a href="#39564907">next</a><span>|</span><label class="collapse" for="c-39565845">[-]</label><label class="expand" for="c-39565845">[1 more]</label></div><br/><div class="children"><div class="content">I love this kind of tool. I often wonder what people would have done back in the days with it !</div><br/></div></div><div id="39564907" class="c"><input type="checkbox" id="c-39564907" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#39565845">prev</a><span>|</span><a href="#39565359">next</a><span>|</span><label class="collapse" for="c-39564907">[-]</label><label class="expand" for="c-39564907">[1 more]</label></div><br/><div class="children"><div class="content">Looks quite nice, and in tune with was common to use on Z80s. :)</div><br/></div></div><div id="39565359" class="c"><input type="checkbox" id="c-39565359" checked=""/><div class="controls bullet"><span class="by">jonstewart</span><span>|</span><a href="#39564907">prev</a><span>|</span><a href="#39569429">next</a><span>|</span><label class="collapse" for="c-39565359">[-]</label><label class="expand" for="c-39565359">[2 more]</label></div><br/><div class="children"><div class="content">Awesome! I did my first programming on my dadâs ADAM, which came with an introductory BASIC book.</div><br/><div id="39567138" class="c"><input type="checkbox" id="c-39567138" checked=""/><div class="controls bullet"><span class="by">jhbadger</span><span>|</span><a href="#39565359">parent</a><span>|</span><a href="#39569429">next</a><span>|</span><label class="collapse" for="c-39567138">[-]</label><label class="expand" for="c-39567138">[1 more]</label></div><br/><div class="children"><div class="content">The ADAM&#x27;s SmartBasic was interesting in that it was specifically designed to be as close as possible to Applesoft on the Apple II given how common the Apple was in US schools in the early-mid 1980s.</div><br/></div></div></div></div><div id="39569429" class="c"><input type="checkbox" id="c-39569429" checked=""/><div class="controls bullet"><span class="by">sixothree</span><span>|</span><a href="#39565359">prev</a><span>|</span><a href="#39566963">next</a><span>|</span><label class="collapse" for="c-39569429">[-]</label><label class="expand" for="c-39569429">[1 more]</label></div><br/><div class="children"><div class="content">I got a virus warning and windows deleted the entire zip. Just a heads up. Maybe source or a signed file or something might go a long way to fixing that.<p>Regardless. Fun stuff. Looking forward to trying. Maybe in a vm.</div><br/></div></div><div id="39565486" class="c"><input type="checkbox" id="c-39565486" checked=""/><div class="controls bullet"><span class="by">behringer</span><span>|</span><a href="#39566963">prev</a><span>|</span><label class="collapse" for="c-39565486">[-]</label><label class="expand" for="c-39565486">[5 more]</label></div><br/><div class="children"><div class="content">Sorry but this is not the first Colecovision BASIC compiler. ugBASIC supports colecovision: <a href="https:&#x2F;&#x2F;ugbasic.iwashere.eu&#x2F;targets" rel="nofollow">https:&#x2F;&#x2F;ugbasic.iwashere.eu&#x2F;targets</a></div><br/><div id="39565502" class="c"><input type="checkbox" id="c-39565502" checked=""/><div class="controls bullet"><span class="by">dang</span><span>|</span><a href="#39565486">parent</a><span>|</span><label class="collapse" for="c-39565502">[-]</label><label class="expand" for="c-39565502">[4 more]</label></div><br/><div class="children"><div class="content">Ok, we&#x27;ve reverted the title above. Submitted title was &quot;First Colecovision BASIC compiler (Z80) now available&quot;</div><br/><div id="39565683" class="c"><input type="checkbox" id="c-39565683" checked=""/><div class="controls bullet"><span class="by">nanochess</span><span>|</span><a href="#39565486">root</a><span>|</span><a href="#39565502">parent</a><span>|</span><label class="collapse" for="c-39565683">[-]</label><label class="expand" for="c-39565683">[3 more]</label></div><br/><div class="children"><div class="content">Thanks. I stand corrected.</div><br/><div id="39566601" class="c"><input type="checkbox" id="c-39566601" checked=""/><div class="controls bullet"><span class="by">behringer</span><span>|</span><a href="#39565486">root</a><span>|</span><a href="#39565683">parent</a><span>|</span><a href="#39565844">next</a><span>|</span><label class="collapse" for="c-39566601">[-]</label><label class="expand" for="c-39566601">[1 more]</label></div><br/><div class="children"><div class="content">Still pretty cool, and it&#x27;s probably he first dedicate to and custom tailored to the Coleco! Come hang out with us BASIC folks over on discord if you use it <a href="https:&#x2F;&#x2F;discord.gg&#x2F;jS6Jx8yJQP" rel="nofollow">https:&#x2F;&#x2F;discord.gg&#x2F;jS6Jx8yJQP</a><p>We have a few BASIC creators (and of course users) over here including Marco who created ugBASIC.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>