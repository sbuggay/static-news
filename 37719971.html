<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1696150859561" as="style"/><link rel="stylesheet" href="styles.css?v=1696150859561"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/nim-lang/Nim/pull/22777">NIR: Nim Intermediate Representation</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>michaelsbradley</span> | <span>60 comments</span></div><br/><div><div id="37720312" class="c"><input type="checkbox" id="c-37720312" checked=""/><div class="controls bullet"><span class="by">jadbox</span><span>|</span><a href="#37720150">next</a><span>|</span><label class="collapse" for="c-37720312">[-]</label><label class="expand" for="c-37720312">[31 more]</label></div><br/><div class="children"><div class="content">I do really like Nim, being a sister to D lang with similar benefits. The language wars feels like it&#x27;s getting hotter lately, and I&#x27;d live to see D&#x2F;Nim make a comeback. If any language is going to see new traction, it&#x27;s going to need to be a compelling alternative for Go&#x2F;Rust&#x2F;JS&#x2F;Python&#x2F;Java. I&#x27;m keeping an eye on Zig here too.</div><br/><div id="37720623" class="c"><input type="checkbox" id="c-37720623" checked=""/><div class="controls bullet"><span class="by">elcritch</span><span>|</span><a href="#37720312">parent</a><span>|</span><a href="#37720871">next</a><span>|</span><label class="collapse" for="c-37720623">[-]</label><label class="expand" for="c-37720623">[19 more]</label></div><br/><div class="children"><div class="content">I <i>really</i> enjoy writing code in Nim. The move to the new memory management system turns it into a true systems-language (comparable to C++ + SharedPtr&#x27;s or Rust + ARC&#x27;s everywhere). I&#x27;ve been working on a multi-threaded pure Nim GUI which runs 60fps like a charm and compiles down to a ~3MB binary with no deps outside the system UI libs!<p>The other part is that Nim&#x27;s strongly typed and compiles to native code but allows you to do dependent typing <i>like</i> things that lets you be flexible on types:<p><pre><code>    type
      X = object
      Y = object
      Z = object
      NotXY = not (X | Y)

    proc doSomething(_: NotXY) = echo &quot;hi!&quot;
</code></pre>
edit: I forgot the mention, but NIR is cool and part of an overall initiative to improve the Nim compiler which will hopefully reduce bugs and improve performance. Plus hopefully enable native WASM support which would be handy for GUI stuff!</div><br/><div id="37720837" class="c"><input type="checkbox" id="c-37720837" checked=""/><div class="controls bullet"><span class="by">foresto</span><span>|</span><a href="#37720312">root</a><span>|</span><a href="#37720623">parent</a><span>|</span><a href="#37720973">next</a><span>|</span><label class="collapse" for="c-37720837">[-]</label><label class="expand" for="c-37720837">[2 more]</label></div><br/><div class="children"><div class="content">&gt; I&#x27;ve been working on a multi-threaded pure Nim GUI<p>Any plans to develop this into something beyond a hobby project? I think a Qt rival in a language safer and more pleasant than C++ would be welcomed by more than a few people.</div><br/><div id="37721495" class="c"><input type="checkbox" id="c-37721495" checked=""/><div class="controls bullet"><span class="by">elcritch</span><span>|</span><a href="#37720312">root</a><span>|</span><a href="#37720837">parent</a><span>|</span><a href="#37720973">next</a><span>|</span><label class="collapse" for="c-37721495">[-]</label><label class="expand" for="c-37721495">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s good to hear! I&#x27;ve been considering it. Not sure if as a commercial product in it&#x27;s own right - what to sell, maybe first class mobile app support?<p>At least I personally would like to use it to ship commercial cross-platform apps w&#x2F;o needing electron or something huge like QT. Nim is much more pleasant than C++! You can actually embed the Nim compiler (~8MB) and run Nim as scripts too, so in theory you could remotely update your app as a nimscript.<p>P.S. drop me a line (emails on my github profile) if you&#x27;re interested</div><br/></div></div></div></div><div id="37720973" class="c"><input type="checkbox" id="c-37720973" checked=""/><div class="controls bullet"><span class="by">miki123211</span><span>|</span><a href="#37720312">root</a><span>|</span><a href="#37720623">parent</a><span>|</span><a href="#37720837">prev</a><span>|</span><a href="#37720690">next</a><span>|</span><label class="collapse" for="c-37720973">[-]</label><label class="expand" for="c-37720973">[4 more]</label></div><br/><div class="children"><div class="content">Are you considering accessibility in your project at all?<p>What do you use for controls, native OS objects or something custom drawn? If the latter, you&#x27;re in for a word of pain with screen reader compatibility, internationalization, right-to-left languages, handling of Asian input methods etc.</div><br/><div id="37721660" class="c"><input type="checkbox" id="c-37721660" checked=""/><div class="controls bullet"><span class="by">elcritch</span><span>|</span><a href="#37720312">root</a><span>|</span><a href="#37720973">parent</a><span>|</span><a href="#37720690">next</a><span>|</span><label class="collapse" for="c-37721660">[-]</label><label class="expand" for="c-37721660">[3 more]</label></div><br/><div class="children"><div class="content">Not currently but it&#x27;s on my mind and I&#x27;m using utf8 for text with utf-32 for rendering. Good links for screen reader info are welcome!<p>&gt; If the latter, you&#x27;re in for a word of pain with screen reader compatibility, internationalization, right-to-left languages, handling of Asian input methods etc.<p>Custom drawn, and yep it&#x27;s a pain! Actually emoji&#x27;s seem the hardest (e.g. smiley face + skin tone).<p>The windowing library I&#x27;m building upon uses the OS&#x27;es input method editors (IME). For example MacOS&#x27;es functions for composing letters like `é` already works. Hopefully Asian input methods will work via the OS&#x27;es IME. Luckily I know a bit of (modern) Hebrew, so I&#x27;ll can add basic RTL languages soon.</div><br/><div id="37722410" class="c"><input type="checkbox" id="c-37722410" checked=""/><div class="controls bullet"><span class="by">ddlsmurf</span><span>|</span><a href="#37720312">root</a><span>|</span><a href="#37721660">parent</a><span>|</span><a href="#37720690">next</a><span>|</span><label class="collapse" for="c-37722410">[-]</label><label class="expand" for="c-37722410">[2 more]</label></div><br/><div class="children"><div class="content">Why not use something like pango, libschrift, etc ? Text rendering is a <i>hard</i> problem, moreso one cross-platform...</div><br/><div id="37723037" class="c"><input type="checkbox" id="c-37723037" checked=""/><div class="controls bullet"><span class="by">elcritch</span><span>|</span><a href="#37720312">root</a><span>|</span><a href="#37722410">parent</a><span>|</span><a href="#37720690">next</a><span>|</span><label class="collapse" for="c-37723037">[-]</label><label class="expand" for="c-37723037">[1 more]</label></div><br/><div class="children"><div class="content">Is it hard! Font rendering is handled by Pixie and the guys who wrote it made a great NimConf video showing that <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=8acDfUIwLnk">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=8acDfUIwLnk</a><p>Pixie can render svg and ttf fonts with unicode in addition to drawing the shapes used for boxes and lines (e.g. like pango+cairo). It&#x27;s SIMD optimized, very fast, and pure Nim so cross platform.<p>The challenge I mentioned with emojis is text selection and cursor movement when dealing with multi-grapheme characters. :)<p>edit: see <a href="https:&#x2F;&#x2F;youtu.be&#x2F;8acDfUIwLnk?si=1EAUwUNZqje88J86&amp;t=382" rel="nofollow noreferrer">https:&#x2F;&#x2F;youtu.be&#x2F;8acDfUIwLnk?si=1EAUwUNZqje88J86&amp;t=382</a> where they discuss how hard Text is</div><br/></div></div></div></div></div></div></div></div><div id="37720690" class="c"><input type="checkbox" id="c-37720690" checked=""/><div class="controls bullet"><span class="by">mathisfun123</span><span>|</span><a href="#37720312">root</a><span>|</span><a href="#37720623">parent</a><span>|</span><a href="#37720973">prev</a><span>|</span><a href="#37720871">next</a><span>|</span><label class="collapse" for="c-37720690">[-]</label><label class="expand" for="c-37720690">[12 more]</label></div><br/><div class="children"><div class="content">What is `object` here? Effectively a ⊤?</div><br/><div id="37720727" class="c"><input type="checkbox" id="c-37720727" checked=""/><div class="controls bullet"><span class="by">auxym</span><span>|</span><a href="#37720312">root</a><span>|</span><a href="#37720690">parent</a><span>|</span><a href="#37720714">next</a><span>|</span><label class="collapse" for="c-37720727">[-]</label><label class="expand" for="c-37720727">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s effectively a struct with no members.<p>(Nim compiles to C, so in fact it compiles to exactly that).</div><br/></div></div><div id="37720714" class="c"><input type="checkbox" id="c-37720714" checked=""/><div class="controls bullet"><span class="by">elcritch</span><span>|</span><a href="#37720312">root</a><span>|</span><a href="#37720690">parent</a><span>|</span><a href="#37720727">prev</a><span>|</span><a href="#37720871">next</a><span>|</span><label class="collapse" for="c-37720714">[-]</label><label class="expand" for="c-37720714">[10 more]</label></div><br/><div class="children"><div class="content">Nope, it&#x27;s just an empty object, aka an empty C struct. Generics would be like:<p><pre><code>    type MyObject[T] = object
        val: int
        other: T</code></pre></div><br/><div id="37720731" class="c"><input type="checkbox" id="c-37720731" checked=""/><div class="controls bullet"><span class="by">mathisfun123</span><span>|</span><a href="#37720312">root</a><span>|</span><a href="#37720714">parent</a><span>|</span><a href="#37720871">next</a><span>|</span><label class="collapse" for="c-37720731">[-]</label><label class="expand" for="c-37720731">[9 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t get it - if empty object doesn&#x27;t act as a top how does what you wrote demonstrate flexibility?<p>Edit: oh X, Y, Z are singletons I guess? Still don&#x27;t see the flexibility or dependent types?</div><br/><div id="37720832" class="c"><input type="checkbox" id="c-37720832" checked=""/><div class="controls bullet"><span class="by">elcritch</span><span>|</span><a href="#37720312">root</a><span>|</span><a href="#37720731">parent</a><span>|</span><a href="#37720871">next</a><span>|</span><label class="collapse" for="c-37720832">[-]</label><label class="expand" for="c-37720832">[8 more]</label></div><br/><div class="children"><div class="content">&gt;  I don&#x27;t get it - if empty object doesn&#x27;t act as a top how does what you wrote demonstrate flexibility?<p>To quote from Wikipedia:<p><pre><code>    dependent types are used to encode logic&#x27;s quantifiers like &quot;for all&quot; and &quot;there exists&quot;. ... dependent types help reduce bugs by enabling the programmer to assign types that further restrain the set of possible implementations
</code></pre>
In my example the objects could be <i>any</i> object types, combination of types, or concepts. It allows you to encode logic at the type system level. If you use generics with the example above you can do things roughly like:<p><pre><code>    type
      State = enum Open, Closed
      SomeObject[T: State] = object
        val: int
      SomeObjectOpen = not SomeObject[state.Close]

    proc close(obj: SomeObjectOpen) = ...
</code></pre>
You can do some simlar things in other languages, but it&#x27;s hard and more limited and usually can&#x27;t expressions.</div><br/><div id="37720896" class="c"><input type="checkbox" id="c-37720896" checked=""/><div class="controls bullet"><span class="by">mathisfun123</span><span>|</span><a href="#37720312">root</a><span>|</span><a href="#37720832">parent</a><span>|</span><a href="#37720871">next</a><span>|</span><label class="collapse" for="c-37720896">[-]</label><label class="expand" for="c-37720896">[7 more]</label></div><br/><div class="children"><div class="content">&gt; dependent types are used to encode logic&#x27;s quantifiers like &quot;for all&quot; and &quot;there exists&quot;<p>Ya I don&#x27;t think this is a good definition of dependent type - the prototypical example of a dependent type is a k-length vector. Obviously there&#x27;s a mapping from what you wrote to this (in the same way there&#x27;s almost always a mapping from a sequence of decision problems to an optimization problem) but it&#x27;s still not a good formulation.<p>&gt; In my example the objects could be any object types, combination of types, or concepts<p>Um yes this is literally what I was asking with respect to top ⊤.<p>&gt; usually can&#x27;t [contain] expressions<p>ya the negation is interesting - I wonder how it&#x27;s implemented.</div><br/><div id="37721109" class="c"><input type="checkbox" id="c-37721109" checked=""/><div class="controls bullet"><span class="by">elcritch</span><span>|</span><a href="#37720312">root</a><span>|</span><a href="#37720896">parent</a><span>|</span><a href="#37721418">next</a><span>|</span><label class="collapse" for="c-37721109">[-]</label><label class="expand" for="c-37721109">[5 more]</label></div><br/><div class="children"><div class="content">&gt; Ya I don&#x27;t think this is a good definition of dependent type - the prototypical example of a dependent type is a k-length vector.<p>Yah that&#x27;s why I qualified my statement as dependent type like setup as I don&#x27;t know a good definition of dependent types which I really grok and I&#x27;ve only briefly dabbled in it. It&#x27;d be awesome if you could point out a good resource showing a clear example &#x2F; simple proof.<p>Well I started working on statically typed vector concepts [1]. The compiler can&#x27;t do `proc concat[N,M: static int](v1: Vector[N], v2: Vector[M}): Vector[N+M]` and it fails. It might be able to be implemented via a macro like `proc concat(v1: Vector[N], v2: Vector[M}): typeFromSumOf(N,M)`, but I haven&#x27;t tried yet.<p>Also just using static ints would require specific values at some point to work I think. Whereas you&#x27;d really want &quot;induction&quot; of some sort. Maybe a SAT solver would be required at that point? There&#x27;s DrNim [2] which does tie Z3 but it&#x27;s sorta dormant.<p>&gt; Um yes this is literally what I was asking with respect to top ⊤.<p>Ah, I didn&#x27;t know what you meant by top T.<p>&gt; ya the negation is interesting - I wonder how it&#x27;s implemented.<p>Nim&#x27;s VM runs from Nim AST, so probably running it as a VM expression.<p>1: <a href="https:&#x2F;&#x2F;github.com&#x2F;elcritch&#x2F;platonic">https:&#x2F;&#x2F;github.com&#x2F;elcritch&#x2F;platonic</a> 
2: <a href="https:&#x2F;&#x2F;nim-lang.org&#x2F;docs&#x2F;drnim.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;nim-lang.org&#x2F;docs&#x2F;drnim.html</a></div><br/><div id="37721147" class="c"><input type="checkbox" id="c-37721147" checked=""/><div class="controls bullet"><span class="by">mathisfun123</span><span>|</span><a href="#37720312">root</a><span>|</span><a href="#37721109">parent</a><span>|</span><a href="#37721251">prev</a><span>|</span><a href="#37721418">next</a><span>|</span><label class="collapse" for="c-37721147">[-]</label><label class="expand" for="c-37721147">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Nim&#x27;s VM runs from Nim AST<p>What does this mean? There&#x27;s a runtime VM or compile time VM?</div><br/><div id="37721271" class="c"><input type="checkbox" id="c-37721271" checked=""/><div class="controls bullet"><span class="by">elcritch</span><span>|</span><a href="#37720312">root</a><span>|</span><a href="#37721147">parent</a><span>|</span><a href="#37721418">next</a><span>|</span><label class="collapse" for="c-37721271">[-]</label><label class="expand" for="c-37721271">[2 more]</label></div><br/><div class="children"><div class="content">&gt; What does this mean? There&#x27;s a runtime VM or compile time VM?<p>Compile time VM. It&#x27;s used to run macros &#x2F; templates &#x2F; concepts. You can also run most code at compile time in a `static` block except for stuff that needs C calls. You can also compile the VM into a program and use it as a runtime VM (see <a href="https:&#x2F;&#x2F;github.com&#x2F;beef331&#x2F;nimscripter">https:&#x2F;&#x2F;github.com&#x2F;beef331&#x2F;nimscripter</a>) which I do in my GUI lib. NIR should enable the compile time VM to run faster too, and possibly use JIT&#x27;ed code.</div><br/><div id="37721738" class="c"><input type="checkbox" id="c-37721738" checked=""/><div class="controls bullet"><span class="by">mathisfun123</span><span>|</span><a href="#37720312">root</a><span>|</span><a href="#37721271">parent</a><span>|</span><a href="#37721418">next</a><span>|</span><label class="collapse" for="c-37721738">[-]</label><label class="expand" for="c-37721738">[1 more]</label></div><br/><div class="children"><div class="content">ah so like clang&#x27;s constexpr. got it. thanks</div><br/></div></div></div></div></div></div></div></div><div id="37721418" class="c"><input type="checkbox" id="c-37721418" checked=""/><div class="controls bullet"><span class="by">elcritch</span><span>|</span><a href="#37720312">root</a><span>|</span><a href="#37720896">parent</a><span>|</span><a href="#37721109">prev</a><span>|</span><a href="#37720871">next</a><span>|</span><label class="collapse" for="c-37721418">[-]</label><label class="expand" for="c-37721418">[1 more]</label></div><br/><div class="children"><div class="content">P.S. I went through Wikipedia&#x27;s definition a bit more. Not sure it&#x27;s a full dependent types with the type pairs and stuff. Nim does let you do (constant) value to type conversion with expressions: <a href="https:&#x2F;&#x2F;play.nim-lang.org&#x2F;#ix=4HRz" rel="nofollow noreferrer">https:&#x2F;&#x2F;play.nim-lang.org&#x2F;#ix=4HRz</a> or more oddly <a href="https:&#x2F;&#x2F;play.nim-lang.org&#x2F;#ix=4HRA" rel="nofollow noreferrer">https:&#x2F;&#x2F;play.nim-lang.org&#x2F;#ix=4HRA</a> . That&#x27;d seem to satisfy the `Π` definition and lack of fixed codomain. Though I&#x27;ve never taken a set theory course so YMMV.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="37720871" class="c"><input type="checkbox" id="c-37720871" checked=""/><div class="controls bullet"><span class="by">netbioserror</span><span>|</span><a href="#37720312">parent</a><span>|</span><a href="#37720623">prev</a><span>|</span><a href="#37722639">next</a><span>|</span><label class="collapse" for="c-37720871">[-]</label><label class="expand" for="c-37720871">[1 more]</label></div><br/><div class="children"><div class="content">Nim is incredibly pleasant for actually engineering software. In most scenarios it feels like compiled Python, and when you need it, you get really precise control. The preference for referentially-transparent procedures and stack-managed dynamic data is icing on the cake. You don&#x27;t have to write just about <i>any</i> memory-semantic code in most business scenarios. Feels like a scripting language, runs 10-100x faster, and add the power of static types.</div><br/></div></div><div id="37722639" class="c"><input type="checkbox" id="c-37722639" checked=""/><div class="controls bullet"><span class="by">ksec</span><span>|</span><a href="#37720312">parent</a><span>|</span><a href="#37720871">prev</a><span>|</span><a href="#37720416">next</a><span>|</span><label class="collapse" for="c-37722639">[-]</label><label class="expand" for="c-37722639">[1 more]</label></div><br/><div class="children"><div class="content">&gt; being a sister to D lang with similar benefits.<p>That is the fist time I hear this. Other than Python, I always felt Nim is more like Pascal and Ada.</div><br/></div></div><div id="37720416" class="c"><input type="checkbox" id="c-37720416" checked=""/><div class="controls bullet"><span class="by">winrid</span><span>|</span><a href="#37720312">parent</a><span>|</span><a href="#37722639">prev</a><span>|</span><a href="#37720821">next</a><span>|</span><label class="collapse" for="c-37720416">[-]</label><label class="expand" for="c-37720416">[5 more]</label></div><br/><div class="children"><div class="content">Just needs good IDE support. That&#x27;s always the issue. Do not like VSCode or the slowness of the Nim plugin. I think every &quot;goto definition&quot; scans the whole code base instead of using an index, so it&#x27;s slow. I&#x27;m faster working in Java, verbosity be damned.</div><br/><div id="37720478" class="c"><input type="checkbox" id="c-37720478" checked=""/><div class="controls bullet"><span class="by">michaelsbradley</span><span>|</span><a href="#37720312">root</a><span>|</span><a href="#37720416">parent</a><span>|</span><a href="#37720821">next</a><span>|</span><label class="collapse" for="c-37720478">[-]</label><label class="expand" for="c-37720478">[4 more]</label></div><br/><div class="children"><div class="content">You may fare better hooking VSCode to nimlangserver:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;saem&#x2F;vscode-nim#nim-lanugage-server-integration-experimental">https:&#x2F;&#x2F;github.com&#x2F;saem&#x2F;vscode-nim#nim-lanugage-server-integ...</a></div><br/><div id="37721125" class="c"><input type="checkbox" id="c-37721125" checked=""/><div class="controls bullet"><span class="by">winrid</span><span>|</span><a href="#37720312">root</a><span>|</span><a href="#37720478">parent</a><span>|</span><a href="#37720821">next</a><span>|</span><label class="collapse" for="c-37721125">[-]</label><label class="expand" for="c-37721125">[3 more]</label></div><br/><div class="children"><div class="content">Thanks! Still don&#x27;t want to use VSCode. I&#x27;d rather not use nim until there&#x27;s a supported Clion plugin.</div><br/><div id="37721838" class="c"><input type="checkbox" id="c-37721838" checked=""/><div class="controls bullet"><span class="by">memco</span><span>|</span><a href="#37720312">root</a><span>|</span><a href="#37721125">parent</a><span>|</span><a href="#37720821">next</a><span>|</span><label class="collapse" for="c-37721838">[-]</label><label class="expand" for="c-37721838">[2 more]</label></div><br/><div class="children"><div class="content">There is a number plugin: <a href="https:&#x2F;&#x2F;plugins.jetbrains.com&#x2F;plugin&#x2F;15128-nim" rel="nofollow noreferrer">https:&#x2F;&#x2F;plugins.jetbrains.com&#x2F;plugin&#x2F;15128-nim</a>. I haven’t tried it so don’t know how well it works.</div><br/><div id="37721986" class="c"><input type="checkbox" id="c-37721986" checked=""/><div class="controls bullet"><span class="by">winrid</span><span>|</span><a href="#37720312">root</a><span>|</span><a href="#37721838">parent</a><span>|</span><a href="#37720821">next</a><span>|</span><label class="collapse" for="c-37721986">[-]</label><label class="expand" for="c-37721986">[1 more]</label></div><br/><div class="children"><div class="content">Yes, as I said, a supported plugin. The author has not updated it since Jan so its not compatible anymore, and it&#x27;s in beta at best.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="37720821" class="c"><input type="checkbox" id="c-37720821" checked=""/><div class="controls bullet"><span class="by">izoow</span><span>|</span><a href="#37720312">parent</a><span>|</span><a href="#37720416">prev</a><span>|</span><a href="#37721465">next</a><span>|</span><label class="collapse" for="c-37720821">[-]</label><label class="expand" for="c-37720821">[1 more]</label></div><br/><div class="children"><div class="content">I’d love to see nim become more mainstream. I don’t have much experience with it, but I looked into it a few times and always found it super interesting.</div><br/></div></div><div id="37721465" class="c"><input type="checkbox" id="c-37721465" checked=""/><div class="controls bullet"><span class="by">ternaryoperator</span><span>|</span><a href="#37720312">parent</a><span>|</span><a href="#37720821">prev</a><span>|</span><a href="#37720150">next</a><span>|</span><label class="collapse" for="c-37721465">[-]</label><label class="expand" for="c-37721465">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve never heard of Nim being a sister to D. Maybe to Python, but not D.<p>Nim&#x27;s home page acknowledges borrowing from Python, Ada, and Modula, as well as C&#x2F;C++. I don&#x27;t think D is part of the mix.</div><br/><div id="37723995" class="c"><input type="checkbox" id="c-37723995" checked=""/><div class="controls bullet"><span class="by">klibertp</span><span>|</span><a href="#37720312">root</a><span>|</span><a href="#37721465">parent</a><span>|</span><a href="#37722390">next</a><span>|</span><label class="collapse" for="c-37723995">[-]</label><label class="expand" for="c-37723995">[1 more]</label></div><br/><div class="children"><div class="content">As I understand, D is a pragmatic vision of how C++ could look like if it was not C++ (that is, not designed by committee, without decades of backward compat needed, without the need to support some exotic hardware, etc.) It aims to completely drop the &quot;C with classes&quot; heritage, bring OOP and FP together while integrating important concepts into the language (delegates instead of function pointers, strings instead of char arrays, slices instead of T[], etc.)<p>While Nim indeed comes from Wirthian heritage instead of K&amp;R heritage, its goals are pretty similar to D. You could say that Nim is for (Object)Pascal what D is for C(++). I think that&#x27;s what the GP alluded to - not that Nim borrows directly from D or the other way around.</div><br/></div></div><div id="37722390" class="c"><input type="checkbox" id="c-37722390" checked=""/><div class="controls bullet"><span class="by">winrid</span><span>|</span><a href="#37720312">root</a><span>|</span><a href="#37721465">parent</a><span>|</span><a href="#37723995">prev</a><span>|</span><a href="#37720150">next</a><span>|</span><label class="collapse" for="c-37722390">[-]</label><label class="expand" for="c-37722390">[1 more]</label></div><br/><div class="children"><div class="content">Nim is closer to D than Python IMO. The syntax is like Python, sure, but in terms of features it&#x27;s very similar to D (statically typed, supports multiple GCs, fast compiler).</div><br/></div></div></div></div></div></div><div id="37720150" class="c"><input type="checkbox" id="c-37720150" checked=""/><div class="controls bullet"><span class="by">davidthewatson</span><span>|</span><a href="#37720312">prev</a><span>|</span><a href="#37721977">next</a><span>|</span><label class="collapse" for="c-37720150">[-]</label><label class="expand" for="c-37720150">[2 more]</label></div><br/><div class="children"><div class="content">&quot;No pointers, no cry&quot; was worth the price of admission. There are features and benefits here that seem magical. I may be misunderstanding, but does this mean that you could compile directly into containers like podman? That is, is the NIR parse able as a container image?</div><br/><div id="37720301" class="c"><input type="checkbox" id="c-37720301" checked=""/><div class="controls bullet"><span class="by">jjtheblunt</span><span>|</span><a href="#37720150">parent</a><span>|</span><a href="#37721977">next</a><span>|</span><label class="collapse" for="c-37720301">[-]</label><label class="expand" for="c-37720301">[1 more]</label></div><br/><div class="children"><div class="content">A container image is essentially a generalization of a binary, a folder holding the binary to run with its dependencies in a format that docker&#x2F;podman can read, unpack&#x2F;uncompress, mount the folder and thereby its contained dependencies and binary, sets up unix accounting, and run the binary with its support dependencies.<p>A compiler intermediate representation looks like a collection of data structures that can be used to generate runnable code either immediately as in an interpreter or saved for later use.<p>I think you’ve compared very different ideas.</div><br/></div></div></div></div><div id="37721977" class="c"><input type="checkbox" id="c-37721977" checked=""/><div class="controls bullet"><span class="by">xwowsersx</span><span>|</span><a href="#37720150">prev</a><span>|</span><a href="#37723195">next</a><span>|</span><label class="collapse" for="c-37721977">[-]</label><label class="expand" for="c-37721977">[6 more]</label></div><br/><div class="children"><div class="content">I&#x27;m getting back into Nim after a little break. I really enjoy the language. I&#x27;m having a helluva time trying to get some basic tooling set up though. I wanted to install nimlsp[0] so I uninstalled the nim I had installed with homebrew and started over with choosenim. Still running into issues. `nimble install nimlsp` results in:<p><pre><code>      nimble install nimlsp
   Downloading https:&#x2F;&#x2F;github.com&#x2F;PMunch&#x2F;nimlsp using git
   Verifying dependencies for nimlsp@0.4.4
      Info:  Dependency on jsonschema@&gt;= 0.2.1 already satisfied
   Verifying dependencies for jsonschema@0.2.1
      Info:  Dependency on ast_pattern_matching@any version already satisfied
   Verifying dependencies for ast_pattern_matching@1.0.0
      Info:  Dependency on asynctools@&gt;= 0.1.1 already satisfied
   Verifying dependencies for asynctools@0.1.1
   Installing nimlsp@0.4.4
      Building nimlsp&#x2F;nimlsp_debug using c backend
   &#x2F;Users&#x2F;me&#x2F;.nimble&#x2F;pkgs2&#x2F;ast_pattern_matching-1.0.0-b5b08c554b072eed227f98a437f7333584cf957e&#x2F;ast_pattern_matching.nim(575, 28) Error: invalid indentation
      Prompt: Build failed for &#x27;nimlsp@0.4.4&#x27;, would you like to try installing &#x27;nimlsp@#head&#x27; (latest unstable)? [y&#x2F;N]
      Answer: n
         Tip: 12 messages have been suppressed, use --verbose to show them.
   nimble.nim(729)          install

      Error:  Aborting installation due to build failure.
</code></pre>
Then I read on some old issue[1] that I should uninstall ast_pattern_matching. I assumed this meant `nimble uninstall ast_pattern_matching` so I did that, but there&#x27;s nothing to delete..<p><pre><code>  Error:  Failed uninstall - no packages to delete
</code></pre>
Anyone have some advice or can provide guidance on getting nimlsp up and running? My ultimate goal is to have some basic stuff working in neovim so I can move on with writing some nim.<p>[0]: <a href="https:&#x2F;&#x2F;github.com&#x2F;PMunch&#x2F;nimlsp">https:&#x2F;&#x2F;github.com&#x2F;PMunch&#x2F;nimlsp</a>
[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;PMunch&#x2F;nimlsp&#x2F;issues&#x2F;156">https:&#x2F;&#x2F;github.com&#x2F;PMunch&#x2F;nimlsp&#x2F;issues&#x2F;156</a></div><br/><div id="37723718" class="c"><input type="checkbox" id="c-37723718" checked=""/><div class="controls bullet"><span class="by">PMunch</span><span>|</span><a href="#37721977">parent</a><span>|</span><a href="#37722508">next</a><span>|</span><label class="collapse" for="c-37723718">[-]</label><label class="expand" for="c-37723718">[1 more]</label></div><br/><div class="children"><div class="content">Please report this kind of stuff as a GitHub issue.. The odds of getting a problem solved (and not just by jumping to another solution) is way higher. If I where to guess uninstalling Nim through Homebrew still left some packages behind and now you&#x27;re seeing some conflicts. Try to delete `~&#x2F;.nimble&#x2F;pkgs` and `~&#x2F;.nimble&#x2F;pkgs2` to make sure you&#x27;re starting fresh and then try again.</div><br/></div></div><div id="37722508" class="c"><input type="checkbox" id="c-37722508" checked=""/><div class="controls bullet"><span class="by">fyzix</span><span>|</span><a href="#37721977">parent</a><span>|</span><a href="#37723718">prev</a><span>|</span><a href="#37722081">next</a><span>|</span><label class="collapse" for="c-37722508">[-]</label><label class="expand" for="c-37722508">[2 more]</label></div><br/><div class="children"><div class="content">Same experience. It was smooth 2 years ago when I tried it so I thought it be more polished now... Color me frustrated</div><br/><div id="37722959" class="c"><input type="checkbox" id="c-37722959" checked=""/><div class="controls bullet"><span class="by">xwowsersx</span><span>|</span><a href="#37721977">root</a><span>|</span><a href="#37722508">parent</a><span>|</span><a href="#37722081">next</a><span>|</span><label class="collapse" for="c-37722959">[-]</label><label class="expand" for="c-37722959">[1 more]</label></div><br/><div class="children"><div class="content">As recommended by michaelsbradley below, I installed <a href="https:&#x2F;&#x2F;github.com&#x2F;nim-lang&#x2F;langserver">https:&#x2F;&#x2F;github.com&#x2F;nim-lang&#x2F;langserver</a>. I&#x27;m using coc.nvim (<a href="https:&#x2F;&#x2F;github.com&#x2F;neoclide&#x2F;coc.nvim">https:&#x2F;&#x2F;github.com&#x2F;neoclide&#x2F;coc.nvim</a>) so I followed the instructions here from nim langserver <a href="https:&#x2F;&#x2F;github.com&#x2F;nim-lang&#x2F;langserver#vimneovim">https:&#x2F;&#x2F;github.com&#x2F;nim-lang&#x2F;langserver#vimneovim</a> and seems to be working well!</div><br/></div></div></div></div><div id="37722081" class="c"><input type="checkbox" id="c-37722081" checked=""/><div class="controls bullet"><span class="by">michaelsbradley</span><span>|</span><a href="#37721977">parent</a><span>|</span><a href="#37722508">prev</a><span>|</span><a href="#37723195">next</a><span>|</span><label class="collapse" for="c-37722081">[-]</label><label class="expand" for="c-37722081">[2 more]</label></div><br/><div class="children"><div class="content">Maybe give nimlangserver a shot, it&#x27;s an alternative to nimlsp:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;nim-lang&#x2F;langserver">https:&#x2F;&#x2F;github.com&#x2F;nim-lang&#x2F;langserver</a><p><pre><code>   nimble install nimlangserver</code></pre></div><br/><div id="37722277" class="c"><input type="checkbox" id="c-37722277" checked=""/><div class="controls bullet"><span class="by">xwowsersx</span><span>|</span><a href="#37721977">root</a><span>|</span><a href="#37722081">parent</a><span>|</span><a href="#37723195">next</a><span>|</span><label class="collapse" for="c-37722277">[-]</label><label class="expand" for="c-37722277">[1 more]</label></div><br/><div class="children"><div class="content">Thank you! Will give that a shot.</div><br/></div></div></div></div></div></div><div id="37723195" class="c"><input type="checkbox" id="c-37723195" checked=""/><div class="controls bullet"><span class="by">Cloudef</span><span>|</span><a href="#37721977">prev</a><span>|</span><a href="#37723858">next</a><span>|</span><label class="collapse" for="c-37723195">[-]</label><label class="expand" for="c-37723195">[1 more]</label></div><br/><div class="children"><div class="content">No to be confused with Mesa&#x27;s NIR
<a href="https:&#x2F;&#x2F;docs.mesa3d.org&#x2F;nir&#x2F;index.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;docs.mesa3d.org&#x2F;nir&#x2F;index.html</a></div><br/></div></div><div id="37723858" class="c"><input type="checkbox" id="c-37723858" checked=""/><div class="controls bullet"><span class="by">uoaei</span><span>|</span><a href="#37723195">prev</a><span>|</span><a href="#37720128">next</a><span>|</span><label class="collapse" for="c-37723858">[-]</label><label class="expand" for="c-37723858">[1 more]</label></div><br/><div class="children"><div class="content">How is Nim for mobile development?</div><br/></div></div><div id="37720166" class="c"><input type="checkbox" id="c-37720166" checked=""/><div class="controls bullet"><span class="by">unclad5968</span><span>|</span><a href="#37720128">prev</a><span>|</span><a href="#37720953">next</a><span>|</span><label class="collapse" for="c-37720166">[-]</label><label class="expand" for="c-37720166">[8 more]</label></div><br/><div class="children"><div class="content">Theyre going to change the whole backend essentially just for better not nil and static array bounds checking?</div><br/><div id="37721382" class="c"><input type="checkbox" id="c-37721382" checked=""/><div class="controls bullet"><span class="by">red_vodka</span><span>|</span><a href="#37720166">parent</a><span>|</span><a href="#37720334">next</a><span>|</span><label class="collapse" for="c-37721382">[-]</label><label class="expand" for="c-37721382">[3 more]</label></div><br/><div class="children"><div class="content">The mention of making CPS (continuous passing style) compiler integration possible is something very important. That would enable Go- or Kotlin-like coroutines to land in the language, which is sorely needed to end the async wars between stdlib&#x27;s horrible asyncdispatch module, and Status.im&#x27;s barely documented Chronos async&#x2F;await implementation.</div><br/><div id="37723432" class="c"><input type="checkbox" id="c-37723432" checked=""/><div class="controls bullet"><span class="by">zevv</span><span>|</span><a href="#37720166">root</a><span>|</span><a href="#37721382">parent</a><span>|</span><a href="#37721539">next</a><span>|</span><label class="collapse" for="c-37723432">[-]</label><label class="expand" for="c-37723432">[1 more]</label></div><br/><div class="children"><div class="content">There has been a more-or-less working CPS implementation for Nim for a few years now:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;nim-works&#x2F;cps">https:&#x2F;&#x2F;github.com&#x2F;nim-works&#x2F;cps</a><p><a href="https:&#x2F;&#x2F;github.com&#x2F;nim-works&#x2F;cps&#x2F;tree&#x2F;master&#x2F;docs">https:&#x2F;&#x2F;github.com&#x2F;nim-works&#x2F;cps&#x2F;tree&#x2F;master&#x2F;docs</a><p>Nobody seems to care though, as it has gained no traction at all and it has been mostly ignored by the core team.</div><br/></div></div></div></div><div id="37720334" class="c"><input type="checkbox" id="c-37720334" checked=""/><div class="controls bullet"><span class="by">zem</span><span>|</span><a href="#37720166">parent</a><span>|</span><a href="#37721382">prev</a><span>|</span><a href="#37720456">next</a><span>|</span><label class="collapse" for="c-37720334">[-]</label><label class="expand" for="c-37720334">[2 more]</label></div><br/><div class="children"><div class="content">that &quot;just&quot; strongly underestimates the value add of those two features!</div><br/><div id="37721220" class="c"><input type="checkbox" id="c-37721220" checked=""/><div class="controls bullet"><span class="by">unclad5968</span><span>|</span><a href="#37720166">root</a><span>|</span><a href="#37720334">parent</a><span>|</span><a href="#37720456">next</a><span>|</span><label class="collapse" for="c-37721220">[-]</label><label class="expand" for="c-37721220">[1 more]</label></div><br/><div class="children"><div class="content">The features already exist and the topic doesn&#x27;t indicate how they would get any better.</div><br/></div></div></div></div><div id="37720456" class="c"><input type="checkbox" id="c-37720456" checked=""/><div class="controls bullet"><span class="by">hashtag-til</span><span>|</span><a href="#37720166">parent</a><span>|</span><a href="#37720334">prev</a><span>|</span><a href="#37720953">next</a><span>|</span><label class="collapse" for="c-37720456">[-]</label><label class="expand" for="c-37720456">[2 more]</label></div><br/><div class="children"><div class="content">Having a structured IR could make it pluggable to the MLIR ecosystem, for example.</div><br/><div id="37720568" class="c"><input type="checkbox" id="c-37720568" checked=""/><div class="controls bullet"><span class="by">mathisfun123</span><span>|</span><a href="#37720166">root</a><span>|</span><a href="#37720456">parent</a><span>|</span><a href="#37720953">next</a><span>|</span><label class="collapse" for="c-37720568">[-]</label><label class="expand" for="c-37720568">[1 more]</label></div><br/><div class="children"><div class="content">Just because it has IR in the name doesn&#x27;t mean there&#x27;s any connection. If you want to emit MLIR using nim you can already do this using MLIR&#x27;s C API, if you want to map nim ast to to existing MLIR IR you can already do this if you provide the necessary control flow analysis, if you want to map nim ir to MLIR you will still need a lowering or nim dialect.</div><br/></div></div></div></div></div></div><div id="37720953" class="c"><input type="checkbox" id="c-37720953" checked=""/><div class="controls bullet"><span class="by">visualphoenix</span><span>|</span><a href="#37720166">prev</a><span>|</span><label class="collapse" for="c-37720953">[-]</label><label class="expand" for="c-37720953">[2 more]</label></div><br/><div class="children"><div class="content">Oh look… now we get a name collision for an intermediate representation [0]. That won’t make it difficult for searching at all… Like, this is cool and power to them, but I wish they had a different abbreviation.<p>[0] <a href="https:&#x2F;&#x2F;www.x.org&#x2F;wiki&#x2F;Events&#x2F;XDC2014&#x2F;XDC2014AbbotNIR&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.x.org&#x2F;wiki&#x2F;Events&#x2F;XDC2014&#x2F;XDC2014AbbotNIR&#x2F;</a></div><br/><div id="37721777" class="c"><input type="checkbox" id="c-37721777" checked=""/><div class="controls bullet"><span class="by">thaliaarchi</span><span>|</span><a href="#37720953">parent</a><span>|</span><label class="collapse" for="c-37721777">[-]</label><label class="expand" for="c-37721777">[1 more]</label></div><br/><div class="children"><div class="content">I know of at least four MIRs. I used NIR as the name of the IR of one of my compilers. It&#x27;s not a big deal. Just add qualifiers to your searches.</div><br/></div></div></div></div></div></div></div></div></div></body></html>