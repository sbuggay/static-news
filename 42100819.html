<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1731315674157" as="style"/><link rel="stylesheet" href="styles.css?v=1731315674157"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/bhavnicksm/chonkie">Show HN: Chonkie – A Fast, Lightweight Text Chunking Library for RAG</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>bhavnicksm</span> | <span>32 comments</span></div><br/><div><div id="42101415" class="c"><input type="checkbox" id="c-42101415" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#42102269">next</a><span>|</span><label class="collapse" for="c-42101415">[-]</label><label class="expand" for="c-42101415">[3 more]</label></div><br/><div class="children"><div class="content">Would it make sense for this to offer a chunking strategy that doesn&#x27;t need a tokenizer at all? I love the goal to keep it small, but &quot;tokenizers&quot; is still a pretty huge dependency (and one that isn&#x27;t currently compatible with Python 3.13).<p>I&#x27;ve been hoping to find an ultra light-weight chunking library that can do things like very simple regex-based sentence&#x2F;paragraph&#x2F;markdown-aware chunking with minimal additional dependencies.</div><br/><div id="42101464" class="c"><input type="checkbox" id="c-42101464" checked=""/><div class="controls bullet"><span class="by">parhamn</span><span>|</span><a href="#42101415">parent</a><span>|</span><a href="#42103266">next</a><span>|</span><label class="collapse" for="c-42101464">[-]</label><label class="expand" for="c-42101464">[1 more]</label></div><br/><div class="children"><div class="content">Across a broad enough dataset (char count &#x2F; 4) is very close to the actual token count in english -- we verified across millions of queries. We had to switch to using an actual tokenizer for chinese and other unicode languages, as that simple formula misses the mark for context stuffing.<p>The more complicated stuff is the effective bin-packing problem that emerges depending on how much different contextual sources you have.</div><br/></div></div><div id="42103266" class="c"><input type="checkbox" id="c-42103266" checked=""/><div class="controls bullet"><span class="by">andai</span><span>|</span><a href="#42101415">parent</a><span>|</span><a href="#42101464">prev</a><span>|</span><a href="#42102269">next</a><span>|</span><label class="collapse" for="c-42103266">[-]</label><label class="expand" for="c-42103266">[1 more]</label></div><br/><div class="children"><div class="content">I made a rudimentary semantic chunking in just a few lines of code.<p>I just removed one sentence at a time from the left until there was a jump in the embedding distance. Then repeated for the right side.</div><br/></div></div></div></div><div id="42102269" class="c"><input type="checkbox" id="c-42102269" checked=""/><div class="controls bullet"><span class="by">mattmein</span><span>|</span><a href="#42101415">prev</a><span>|</span><a href="#42101904">next</a><span>|</span><label class="collapse" for="c-42102269">[-]</label><label class="expand" for="c-42102269">[4 more]</label></div><br/><div class="children"><div class="content">Also check out <a href="https:&#x2F;&#x2F;github.com&#x2F;D-Star-AI&#x2F;dsRAG&#x2F;">https:&#x2F;&#x2F;github.com&#x2F;D-Star-AI&#x2F;dsRAG&#x2F;</a> for a bit more involved chunking strategy.</div><br/><div id="42102448" class="c"><input type="checkbox" id="c-42102448" checked=""/><div class="controls bullet"><span class="by">cadence-</span><span>|</span><a href="#42102269">parent</a><span>|</span><a href="#42101904">next</a><span>|</span><label class="collapse" for="c-42102448">[-]</label><label class="expand" for="c-42102448">[3 more]</label></div><br/><div class="children"><div class="content">This looks pretty amazing. I will take it for a spin next week.  I want to make a RAG that will answer questions related to my new car.  The manual is huge and it is often hard to find answers in it, so I think this will be a big help to owners of the same car.   I think your library can help me chunk that huge PDF easily.</div><br/><div id="42102999" class="c"><input type="checkbox" id="c-42102999" checked=""/><div class="controls bullet"><span class="by">andai</span><span>|</span><a href="#42102269">root</a><span>|</span><a href="#42102448">parent</a><span>|</span><a href="#42101904">next</a><span>|</span><label class="collapse" for="c-42102999">[-]</label><label class="expand" for="c-42102999">[2 more]</label></div><br/><div class="children"><div class="content">How many tokens is the manual?</div><br/><div id="42103461" class="c"><input type="checkbox" id="c-42103461" checked=""/><div class="controls bullet"><span class="by">yaj54</span><span>|</span><a href="#42102269">root</a><span>|</span><a href="#42102999">parent</a><span>|</span><a href="#42101904">next</a><span>|</span><label class="collapse" for="c-42103461">[-]</label><label class="expand" for="c-42103461">[1 more]</label></div><br/><div class="children"><div class="content">if its more than the 2M that will fit in gemini context then I want to know what car it is.</div><br/></div></div></div></div></div></div></div></div><div id="42101904" class="c"><input type="checkbox" id="c-42101904" checked=""/><div class="controls bullet"><span class="by">bhavnicksm</span><span>|</span><a href="#42102269">prev</a><span>|</span><a href="#42101145">next</a><span>|</span><label class="collapse" for="c-42101904">[-]</label><label class="expand" for="c-42101904">[1 more]</label></div><br/><div class="children"><div class="content">Thank you so much for giving Chonkie a chance! Just to note Chonkie is still in beta mode (with v0.1.2 running) with a bunch of things planned for it. It&#x27;s an initial working version, which seemed promising enough to present.<p>I hope that you will stick with Chonkie for the journey of making the &#x27;perfect&#x27; chunking library!<p>Thanks again!</div><br/></div></div><div id="42101145" class="c"><input type="checkbox" id="c-42101145" checked=""/><div class="controls bullet"><span class="by">mixeden</span><span>|</span><a href="#42101904">prev</a><span>|</span><a href="#42103628">next</a><span>|</span><label class="collapse" for="c-42101145">[-]</label><label class="expand" for="c-42101145">[4 more]</label></div><br/><div class="children"><div class="content">&gt; Token Chunking: 33x faster than the slowest alternative<p>1) what</div><br/><div id="42101226" class="c"><input type="checkbox" id="c-42101226" checked=""/><div class="controls bullet"><span class="by">rkharsan64</span><span>|</span><a href="#42101145">parent</a><span>|</span><a href="#42103628">next</a><span>|</span><label class="collapse" for="c-42101226">[-]</label><label class="expand" for="c-42101226">[3 more]</label></div><br/><div class="children"><div class="content">There&#x27;s only 3 competitors in that particular benchmark, and the speedup compared to the 2nd is only 1.06x.<p>Edit: Also, from the same table, it seems that only this library was ran after warming up, while others were not. <a href="https:&#x2F;&#x2F;github.com&#x2F;bhavnicksm&#x2F;chonkie&#x2F;blob&#x2F;main&#x2F;benchmarks&#x2F;README.md#-speed-benchmarks">https:&#x2F;&#x2F;github.com&#x2F;bhavnicksm&#x2F;chonkie&#x2F;blob&#x2F;main&#x2F;benchmarks&#x2F;R...</a></div><br/><div id="42101780" class="c"><input type="checkbox" id="c-42101780" checked=""/><div class="controls bullet"><span class="by">bhavnicksm</span><span>|</span><a href="#42101145">root</a><span>|</span><a href="#42101226">parent</a><span>|</span><a href="#42102688">next</a><span>|</span><label class="collapse" for="c-42101780">[-]</label><label class="expand" for="c-42101780">[1 more]</label></div><br/><div class="children"><div class="content">TokenChunking is really limited by the tokenizer and less by the Chunking algorithm. Tiktoken tokenizers seem to do better with warm-up which Chonkie defaults to -- which is also what the 2nd one is using.<p>Algorithmically, there&#x27;s not much difference in TokenChunking between Chonkie and LangChain or any other TokenChunking algorithm you might want to use. (except Llamaindex, I don&#x27;t know what mess they made for 33x slower algo)<p>If you only want TokenChunking (which I do not recommend completely), better than Chonkie or LangChain, just write your own for production :) At least don&#x27;t install 80MiB packages for TokenChunking, Chonkie is 4x smaller than them.<p>That&#x27;s just my honest response... And these benchmarks are just the beginning, future optimizations on SemanticChunking which would increase the speed-up from the current 2nd (2.5x right now) to even higher.</div><br/></div></div><div id="42102688" class="c"><input type="checkbox" id="c-42102688" checked=""/><div class="controls bullet"><span class="by">melony</span><span>|</span><a href="#42101145">root</a><span>|</span><a href="#42101226">parent</a><span>|</span><a href="#42101780">prev</a><span>|</span><a href="#42103628">next</a><span>|</span><label class="collapse" for="c-42102688">[-]</label><label class="expand" for="c-42102688">[1 more]</label></div><br/><div class="children"><div class="content">How does it compare with NLTK&#x27;s chunking library? I have found that it works very well for sentence segmentation.</div><br/></div></div></div></div></div></div><div id="42103628" class="c"><input type="checkbox" id="c-42103628" checked=""/><div class="controls bullet"><span class="by">ilidur</span><span>|</span><a href="#42101145">prev</a><span>|</span><a href="#42102103">next</a><span>|</span><label class="collapse" for="c-42103628">[-]</label><label class="expand" for="c-42103628">[1 more]</label></div><br/><div class="children"><div class="content">Review: Chonkie is an MIT license project to help with chunking your sentences. It boasts fixed length, word length, sentence and semantic methods. The instructions for installing and usage are simple.<p>The Benchmark numbers are massaged to look really impressive but upon scrutiny the improvements are at most &lt;1.86x compared to the leading product LangChain in a further page describing the measurements. It claims to beat it on all aspects but where it gets close, the author&#x27;s library uses a warmed up version so the numbers are not comparable. The author acknowledged this but didn&#x27;t change the methodology to provide a direct comparison.<p>The author is Bhavnick S. Minhas, an early career ML engineer with both research and industry experience and very prolific with his GitHub contributions.</div><br/></div></div><div id="42102103" class="c"><input type="checkbox" id="c-42102103" checked=""/><div class="controls bullet"><span class="by">vlovich123</span><span>|</span><a href="#42103628">prev</a><span>|</span><a href="#42101291">next</a><span>|</span><label class="collapse" for="c-42102103">[-]</label><label class="expand" for="c-42102103">[2 more]</label></div><br/><div class="children"><div class="content">Out of curiosity where does the 21 MiB come from? The codebase clone is 1.2 MiB and the src folder is only 68 KiB.</div><br/><div id="42103018" class="c"><input type="checkbox" id="c-42103018" checked=""/><div class="controls bullet"><span class="by">ekianjo</span><span>|</span><a href="#42102103">parent</a><span>|</span><a href="#42101291">next</a><span>|</span><label class="collapse" for="c-42103018">[-]</label><label class="expand" for="c-42103018">[1 more]</label></div><br/><div class="children"><div class="content">Dependencies in the venv?</div><br/></div></div></div></div><div id="42101291" class="c"><input type="checkbox" id="c-42101291" checked=""/><div class="controls bullet"><span class="by">bravura</span><span>|</span><a href="#42102103">prev</a><span>|</span><a href="#42101198">next</a><span>|</span><label class="collapse" for="c-42101291">[-]</label><label class="expand" for="c-42101291">[3 more]</label></div><br/><div class="children"><div class="content">One thing I&#x27;ve been looking for, and was a bit tricky implementing myself to be very fast, is this:<p>I have a particular max token length in mind, and I have a tokenizer like tiktoken. I have a string and I want to quickly find the maximum length truncation of the string that is &lt;= target max token length.<p>Does chonkie handle this?</div><br/><div id="42101852" class="c"><input type="checkbox" id="c-42101852" checked=""/><div class="controls bullet"><span class="by">bhavnicksm</span><span>|</span><a href="#42101291">parent</a><span>|</span><a href="#42101198">next</a><span>|</span><label class="collapse" for="c-42101852">[-]</label><label class="expand" for="c-42101852">[2 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t fully understand what you mean by &quot;maximum length truncation of the string&quot;; but if you&#x27;re talking about splitting the sentence into &#x27;chunks&#x27; which have token counts less than a pre-specified max_token length then, yes!<p>Is that what you meant?</div><br/><div id="42105198" class="c"><input type="checkbox" id="c-42105198" checked=""/><div class="controls bullet"><span class="by">Eisenstein</span><span>|</span><a href="#42101291">root</a><span>|</span><a href="#42101852">parent</a><span>|</span><a href="#42101198">next</a><span>|</span><label class="collapse" for="c-42105198">[-]</label><label class="expand" for="c-42105198">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not sure if this is what they mean, but this is a use case that I have dealt with and had to roll my own code for:<p>Given a list sentences, find the largest in order group of sentences which fit into a max token length such that the sentences contain a natural coherence.<p>In my case I used a fuzzy token limit and the chunker would choose a smaller group of sentences that fit into a single paragraph or a single common structure instead of cramming every possible sentence until it ran out of room. It would do the same going over the limit if it would be beneficial to do so.<p>A simple example would be having an alphabetized set and instead of making one chunk A items through part of B items it would end at A items with tokens to spare, or if it were only an extra 10% it would finish the B items. Most of the time it just decided to use paragraphs to end chunks instead of continuing into the middle of the next one.</div><br/></div></div></div></div></div></div><div id="42101198" class="c"><input type="checkbox" id="c-42101198" checked=""/><div class="controls bullet"><span class="by">samlinnfer</span><span>|</span><a href="#42101291">prev</a><span>|</span><a href="#42101331">next</a><span>|</span><label class="collapse" for="c-42101198">[-]</label><label class="expand" for="c-42101198">[4 more]</label></div><br/><div class="children"><div class="content">How does it work for code? (Chunking code that is)</div><br/><div id="42101672" class="c"><input type="checkbox" id="c-42101672" checked=""/><div class="controls bullet"><span class="by">bhavnicksm</span><span>|</span><a href="#42101198">parent</a><span>|</span><a href="#42101409">next</a><span>|</span><label class="collapse" for="c-42101672">[-]</label><label class="expand" for="c-42101672">[1 more]</label></div><br/><div class="children"><div class="content">Right now, we haven&#x27;t worked on adding support for code -- some things like comments (#, &#x2F;&#x2F;) have punctuations that adversely affect chunking, along with indentation and other issues.<p>But, it&#x27;s on the roadmap, so please hold on!</div><br/></div></div><div id="42101409" class="c"><input type="checkbox" id="c-42101409" checked=""/><div class="controls bullet"><span class="by">nostrebored</span><span>|</span><a href="#42101198">parent</a><span>|</span><a href="#42101672">prev</a><span>|</span><a href="#42101331">next</a><span>|</span><label class="collapse" for="c-42101409">[-]</label><label class="expand" for="c-42101409">[2 more]</label></div><br/><div class="children"><div class="content">Poorly, just like it does for text.<p>Chunking is easily where all of these problems die beyond PoC scale.<p>I’ve talked to multiple code generation companies in the past week — most are stuck with BM25 and taking in whole files.</div><br/><div id="42104062" class="c"><input type="checkbox" id="c-42104062" checked=""/><div class="controls bullet"><span class="by">potatoman22</span><span>|</span><a href="#42101198">root</a><span>|</span><a href="#42101409">parent</a><span>|</span><a href="#42101331">next</a><span>|</span><label class="collapse" for="c-42104062">[-]</label><label class="expand" for="c-42104062">[1 more]</label></div><br/><div class="children"><div class="content">What do they use BM25 for? RAG?</div><br/></div></div></div></div></div></div><div id="42101331" class="c"><input type="checkbox" id="c-42101331" checked=""/><div class="controls bullet"><span class="by">ch1kkenm4ss4</span><span>|</span><a href="#42101198">prev</a><span>|</span><a href="#42101684">next</a><span>|</span><label class="collapse" for="c-42101331">[-]</label><label class="expand" for="c-42101331">[2 more]</label></div><br/><div class="children"><div class="content">Chonkie and lightweight? Good naming!</div><br/><div id="42101655" class="c"><input type="checkbox" id="c-42101655" checked=""/><div class="controls bullet"><span class="by">bhavnicksm</span><span>|</span><a href="#42101331">parent</a><span>|</span><a href="#42101684">next</a><span>|</span><label class="collapse" for="c-42101655">[-]</label><label class="expand" for="c-42101655">[1 more]</label></div><br/><div class="children"><div class="content">Haha~ thanks!</div><br/></div></div></div></div><div id="42101684" class="c"><input type="checkbox" id="c-42101684" checked=""/><div class="controls bullet"><span class="by">petesergeant</span><span>|</span><a href="#42101331">prev</a><span>|</span><a href="#42101314">next</a><span>|</span><label class="collapse" for="c-42101684">[-]</label><label class="expand" for="c-42101684">[3 more]</label></div><br/><div class="children"><div class="content">&gt; What other chunking strategies would be useful for RAG applications?<p>I’m using o1-preview for chunking, creating summary subdocuments.</div><br/><div id="42101719" class="c"><input type="checkbox" id="c-42101719" checked=""/><div class="controls bullet"><span class="by">bhavnicksm</span><span>|</span><a href="#42101684">parent</a><span>|</span><a href="#42101314">next</a><span>|</span><label class="collapse" for="c-42101719">[-]</label><label class="expand" for="c-42101719">[2 more]</label></div><br/><div class="children"><div class="content">That&#x27;s pretty cool! I believe a research paper called LumberChunker recently evaluated that to be pretty decent as well.<p>Thanks for responding, I&#x27;ll try to make it easier to use something like that in Chonkie in the future!</div><br/><div id="42102137" class="c"><input type="checkbox" id="c-42102137" checked=""/><div class="controls bullet"><span class="by">petesergeant</span><span>|</span><a href="#42101684">root</a><span>|</span><a href="#42101719">parent</a><span>|</span><a href="#42101314">next</a><span>|</span><label class="collapse" for="c-42102137">[-]</label><label class="expand" for="c-42102137">[1 more]</label></div><br/><div class="children"><div class="content">Ah, that&#x27;s an interesting paper, and a slightly different approach to what I&#x27;m doing, but possibly a superior one. Thanks!</div><br/></div></div></div></div></div></div><div id="42101314" class="c"><input type="checkbox" id="c-42101314" checked=""/><div class="controls bullet"><span class="by">spullara</span><span>|</span><a href="#42101684">prev</a><span>|</span><a href="#42101332">next</a><span>|</span><label class="collapse" for="c-42101314">[-]</label><label class="expand" for="c-42101314">[2 more]</label></div><br/><div class="children"><div class="content">21MB? to split text? have you analyzed the footprint?</div><br/><div id="42101699" class="c"><input type="checkbox" id="c-42101699" checked=""/><div class="controls bullet"><span class="by">bhavnicksm</span><span>|</span><a href="#42101314">parent</a><span>|</span><a href="#42101332">next</a><span>|</span><label class="collapse" for="c-42101699">[-]</label><label class="expand" for="c-42101699">[1 more]</label></div><br/><div class="children"><div class="content">Just to clarify, the 21MB is the size of the package itself! Other package sizes are way larger.<p>Memory footprint of the chunking itself would vary widely based on the dataset, and it&#x27;s not something we tested on... usually other providers don&#x27;t test it either, as long as it doesn&#x27;t bust up the computer&#x2F;server.<p>If saving memory during runtime is important for your application, let me know! I&#x27;d run some benchmarks for it...<p>Thanks!</div><br/></div></div></div></div><div id="42101332" class="c"><input type="checkbox" id="c-42101332" checked=""/><div class="controls bullet"><span class="by">opendang</span><span>|</span><a href="#42101314">prev</a><span>|</span><label class="collapse" for="c-42101332">[-]</label><label class="expand" for="c-42101332">[2 more]</label></div><br/><div class="children"><div class="content">Wow, a whole repo of AI-generated slop, complete with an AI-generated logo. Anyone who runs this code unsandboxed is braver than I.</div><br/><div id="42101958" class="c"><input type="checkbox" id="c-42101958" checked=""/><div class="controls bullet"><span class="by">xivusr</span><span>|</span><a href="#42101332">parent</a><span>|</span><label class="collapse" for="c-42101958">[-]</label><label class="expand" for="c-42101958">[1 more]</label></div><br/><div class="children"><div class="content">IMO comments like this go against the spirit of HN - why not offer more constructive feedback? Implying defects without suggestions on how to improve (or proof) is low effort and what I expect on a YouTube comment thread, not HN.</div><br/></div></div></div></div></div></div></div></div></div></body></html>