<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1731402069680" as="style"/><link rel="stylesheet" href="styles.css?v=1731402069680"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://ttimo.typepad.com/blog/2024/11/the-steam-client-update-earlier-this-week-mentions-fixed-some-miscellaneous-common-crashes-in-the-linux-notes-which-i-wante.html">Improving Steam Client Stability on Linux</a> <span class="domain">(<a href="https://ttimo.typepad.com">ttimo.typepad.com</a>)</span></div><div class="subtext"><span>Venn1</span> | <span>72 comments</span></div><br/><div><div id="42111093" class="c"><input type="checkbox" id="c-42111093" checked=""/><div class="controls bullet"><span class="by">fweimer</span><span>|</span><a href="#42111445">next</a><span>|</span><label class="collapse" for="c-42111093">[-]</label><label class="expand" for="c-42111093">[5 more]</label></div><br/><div class="children"><div class="content">We&#x27;ve got patches under review: <a href="https:&#x2F;&#x2F;inbox.sourceware.org&#x2F;libc-alpha&#x2F;cover.1722193092.git.fweimer@redhat.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;inbox.sourceware.org&#x2F;libc-alpha&#x2F;cover.1722193092.git...</a> (triggered by <a href="https:&#x2F;&#x2F;issues.redhat.com&#x2F;browse&#x2F;RHEL-42410" rel="nofollow">https:&#x2F;&#x2F;issues.redhat.com&#x2F;browse&#x2F;RHEL-42410</a>, a graphics stack stability issue that wasn&#x27;t as visible in RHEL 9 for some reason)<p>At least the first one (the getenv thread safety fix) will hopefully make it into glibc 2.41 and it should be quite safe to backport.  It turns out that setenv is easier to handle because glibc already never frees environment strings.  It&#x27;s concurrent unsetenv that is rather tricky.  Without some snapshot approach, getenv would return null pointers instead of environment variables values that are actually set.  I don&#x27;t want to introduce locking into getenv because getenv without setenv has been async-signal-safe for so long that it would likely break applications.<p>The environ handling fixes are a bit more controversial because vfork+execve make it complicated to avoid memory leaks, but these further fixes are less important to the stability of the graphics stack.</div><br/><div id="42111767" class="c"><input type="checkbox" id="c-42111767" checked=""/><div class="controls bullet"><span class="by">Asooka</span><span>|</span><a href="#42111093">parent</a><span>|</span><a href="#42111445">next</a><span>|</span><label class="collapse" for="c-42111767">[-]</label><label class="expand" for="c-42111767">[4 more]</label></div><br/><div class="children"><div class="content">What about using a linked list for variables added after the start of the process, which can be implemented atomically? Then once it gets &quot;too long&quot;, a thread executing setenv could construct a new hashmap and replace the pointer to the old one with the pointer to the new one atomically, all without locking? To prevent two threads from rehashing at the same time, use an atomic flag for whether a thread is rehashing right now. That means if other threads call setenv in the meantime, the extra added variables would be appended to the list to be processed by a later setenv call (if one happens). That list could grow unbounded if enough threads call setenv quickly enough, but I think the simplicity of atomically swapping pointers might be worth it and setenv isn&#x27;t called very frequently.</div><br/><div id="42113647" class="c"><input type="checkbox" id="c-42113647" checked=""/><div class="controls bullet"><span class="by">fweimer</span><span>|</span><a href="#42111093">root</a><span>|</span><a href="#42111767">parent</a><span>|</span><a href="#42111839">next</a><span>|</span><label class="collapse" for="c-42113647">[-]</label><label class="expand" for="c-42113647">[1 more]</label></div><br/><div class="children"><div class="content">POSIX requires that the environment variables can be access as an array, through the environ variable. This array is expected to be used with POSIX interfaces such as posix_spawn and execve. If the array already has to exist, why not use it in getenv?<p>A purely hash-based implementation is not possible because there is putenv, and some applications expect modifications of environ to be visible via getenv.</div><br/></div></div><div id="42111839" class="c"><input type="checkbox" id="c-42111839" checked=""/><div class="controls bullet"><span class="by">sunshowers</span><span>|</span><a href="#42111093">root</a><span>|</span><a href="#42111767">parent</a><span>|</span><a href="#42113647">prev</a><span>|</span><a href="#42111823">next</a><span>|</span><label class="collapse" for="c-42111839">[-]</label><label class="expand" for="c-42111839">[1 more]</label></div><br/><div class="children"><div class="content">As far as I&#x27;m concerned this is the only correct way to do it. I believe illumos does this, which is why its env functions are thread safe and have been for decades.</div><br/></div></div><div id="42111823" class="c"><input type="checkbox" id="c-42111823" checked=""/><div class="controls bullet"><span class="by">jeffparsons</span><span>|</span><a href="#42111093">root</a><span>|</span><a href="#42111767">parent</a><span>|</span><a href="#42111839">prev</a><span>|</span><a href="#42111445">next</a><span>|</span><label class="collapse" for="c-42111823">[-]</label><label class="expand" for="c-42111823">[1 more]</label></div><br/><div class="children"><div class="content">I like this approach, because it lets everything Just Work without anyone outside of the implementation having to think about it at all, and only incurs meaningful overhead if you&#x27;re doing something really silly, but crucially still won&#x27;t break — it&#x27;ll just be slightly slow. That feels like the right trade-off.</div><br/></div></div></div></div></div></div><div id="42111445" class="c"><input type="checkbox" id="c-42111445" checked=""/><div class="controls bullet"><span class="by">electromech</span><span>|</span><a href="#42111093">prev</a><span>|</span><a href="#42112839">next</a><span>|</span><label class="collapse" for="c-42111445">[-]</label><label class="expand" for="c-42111445">[20 more]</label></div><br/><div class="children"><div class="content">Thank you! I deeply appreciate that Steam works so well on Linux these days. I don&#x27;t take for granted the hard work happening behind the scenes to make that a reality for us.</div><br/><div id="42111469" class="c"><input type="checkbox" id="c-42111469" checked=""/><div class="controls bullet"><span class="by">BolexNOLA</span><span>|</span><a href="#42111445">parent</a><span>|</span><a href="#42112839">next</a><span>|</span><label class="collapse" for="c-42111469">[-]</label><label class="expand" for="c-42111469">[19 more]</label></div><br/><div class="children"><div class="content">I really hope they drop a full steam OS release again soon. I’d love to build a gaming tower around it. Might settle for bazzite but I’d like to do steam OS tbh</div><br/><div id="42111644" class="c"><input type="checkbox" id="c-42111644" checked=""/><div class="controls bullet"><span class="by">anotherhue</span><span>|</span><a href="#42111445">root</a><span>|</span><a href="#42111469">parent</a><span>|</span><a href="#42111751">next</a><span>|</span><label class="collapse" for="c-42111644">[-]</label><label class="expand" for="c-42111644">[3 more]</label></div><br/><div class="children"><div class="content">You can run gamescope as your WM and have a steam-deck-like experience on your desktop, ideal for a living room.<p><a href="https:&#x2F;&#x2F;wiki.nixos.org&#x2F;wiki&#x2F;Steam#Gamescope_Compositor_&#x2F;_%22Boot_to_Steam_Deck%22" rel="nofollow">https:&#x2F;&#x2F;wiki.nixos.org&#x2F;wiki&#x2F;Steam#Gamescope_Compositor_&#x2F;_%22...</a></div><br/><div id="42112276" class="c"><input type="checkbox" id="c-42112276" checked=""/><div class="controls bullet"><span class="by">BolexNOLA</span><span>|</span><a href="#42111445">root</a><span>|</span><a href="#42111644">parent</a><span>|</span><a href="#42111751">next</a><span>|</span><label class="collapse" for="c-42112276">[-]</label><label class="expand" for="c-42112276">[2 more]</label></div><br/><div class="children"><div class="content">I honestly don’t want to be tinkering all the time. The steamdeck is pretty much my limit for tinkering with gaming these days. Kids do that to you lol</div><br/><div id="42113428" class="c"><input type="checkbox" id="c-42113428" checked=""/><div class="controls bullet"><span class="by">mgrandl</span><span>|</span><a href="#42111445">root</a><span>|</span><a href="#42112276">parent</a><span>|</span><a href="#42111751">next</a><span>|</span><label class="collapse" for="c-42113428">[-]</label><label class="expand" for="c-42113428">[1 more]</label></div><br/><div class="children"><div class="content">Bazzite is the answer. It’s basically out of the box SteamOS, just somehow even better.</div><br/></div></div></div></div></div></div><div id="42111751" class="c"><input type="checkbox" id="c-42111751" checked=""/><div class="controls bullet"><span class="by">pnw</span><span>|</span><a href="#42111445">root</a><span>|</span><a href="#42111469">parent</a><span>|</span><a href="#42111644">prev</a><span>|</span><a href="#42113015">next</a><span>|</span><label class="collapse" for="c-42111751">[-]</label><label class="expand" for="c-42111751">[6 more]</label></div><br/><div class="children"><div class="content">I thought Valve already said they don&#x27;t plan to do that. Steam OS 3.0 is only for the Steam Deck isn&#x27;t it?<p>From <a href="https:&#x2F;&#x2F;repo.steampowered.com&#x2F;steamos&#x2F;README.txt" rel="nofollow">https:&#x2F;&#x2F;repo.steampowered.com&#x2F;steamos&#x2F;README.txt</a><p>SteamOS version 1 &#x27;alchemist&#x27; and version 2 &#x27;brewmaster&#x27; have been
discontinued. No further updates are planned.<p>The SteamOS &#x27;clockwerk&#x27; prototype has also been discontinued and will
not be released.</div><br/><div id="42112732" class="c"><input type="checkbox" id="c-42112732" checked=""/><div class="controls bullet"><span class="by">bsimpson</span><span>|</span><a href="#42111445">root</a><span>|</span><a href="#42111751">parent</a><span>|</span><a href="#42112421">next</a><span>|</span><label class="collapse" for="c-42112732">[-]</label><label class="expand" for="c-42112732">[1 more]</label></div><br/><div class="children"><div class="content">The link you referenced just says that the Debian packages are irrelevant to the current codebase, as used on the Steam Deck.  It doesn&#x27;t say anything about the Steam Deck being the only hardware that will ever run it.<p>Some of the recent SteamOS release notes have included references to Asus&#x27;s handheld, which has reinforced the community expectation that it will eventually be available as a distribution you can install on 3rd party hardware.  If you go read interviews from Valve employees (Lawrence Yang comes to mind), I believe they&#x27;ve publicly stated that after the OLED shipped, they wanted to start focusing on porting to other devices.</div><br/></div></div><div id="42112421" class="c"><input type="checkbox" id="c-42112421" checked=""/><div class="controls bullet"><span class="by">ensignavenger</span><span>|</span><a href="#42111445">root</a><span>|</span><a href="#42111751">parent</a><span>|</span><a href="#42112732">prev</a><span>|</span><a href="#42112219">next</a><span>|</span><label class="collapse" for="c-42112421">[-]</label><label class="expand" for="c-42112421">[1 more]</label></div><br/><div class="children"><div class="content">The last I heard, they said they were planning to do it, for example, this article: <a href="https:&#x2F;&#x2F;9to5linux.com&#x2F;valve-says-steamos-3-0-will-be-available-for-everyone-to-download-and-install" rel="nofollow">https:&#x2F;&#x2F;9to5linux.com&#x2F;valve-says-steamos-3-0-will-be-availab...</a><p>But I haven&#x27;t heard anything one way or the other in a while.  But as it stands, they have stated that they plan to do a general release.  Unless there is another source where they say they changed their mind?</div><br/></div></div><div id="42112219" class="c"><input type="checkbox" id="c-42112219" checked=""/><div class="controls bullet"><span class="by">CivBase</span><span>|</span><a href="#42111445">root</a><span>|</span><a href="#42111751">parent</a><span>|</span><a href="#42112421">prev</a><span>|</span><a href="#42112247">next</a><span>|</span><label class="collapse" for="c-42112219">[-]</label><label class="expand" for="c-42112219">[2 more]</label></div><br/><div class="children"><div class="content">Last I heard they were still working on a general desktop release but it&#x27;s slow going, largely due to Nvidia support.</div><br/><div id="42113762" class="c"><input type="checkbox" id="c-42113762" checked=""/><div class="controls bullet"><span class="by">nar001</span><span>|</span><a href="#42111445">root</a><span>|</span><a href="#42112219">parent</a><span>|</span><a href="#42112247">next</a><span>|</span><label class="collapse" for="c-42113762">[-]</label><label class="expand" for="c-42113762">[1 more]</label></div><br/><div class="children"><div class="content">Or not supporting them rather? Do you have a link somewhere they talk about it?</div><br/></div></div></div></div><div id="42112247" class="c"><input type="checkbox" id="c-42112247" checked=""/><div class="controls bullet"><span class="by">BolexNOLA</span><span>|</span><a href="#42111445">root</a><span>|</span><a href="#42111751">parent</a><span>|</span><a href="#42112219">prev</a><span>|</span><a href="#42113015">next</a><span>|</span><label class="collapse" for="c-42112247">[-]</label><label class="expand" for="c-42112247">[1 more]</label></div><br/><div class="children"><div class="content">They’ve been pretty quiet about it yeah but last I saw there was some plan to do it some day</div><br/></div></div></div></div><div id="42113015" class="c"><input type="checkbox" id="c-42113015" checked=""/><div class="controls bullet"><span class="by">tombert</span><span>|</span><a href="#42111445">root</a><span>|</span><a href="#42111469">parent</a><span>|</span><a href="#42111751">prev</a><span>|</span><a href="#42112107">next</a><span>|</span><label class="collapse" for="c-42113015">[-]</label><label class="expand" for="c-42113015">[1 more]</label></div><br/><div class="children"><div class="content">For what it’s worth, I have had pretty good luck with Jovian for NixOS.  My primary game console is a little gaming PC running it, I like it.</div><br/></div></div><div id="42112107" class="c"><input type="checkbox" id="c-42112107" checked=""/><div class="controls bullet"><span class="by">hypercube33</span><span>|</span><a href="#42111445">root</a><span>|</span><a href="#42111469">parent</a><span>|</span><a href="#42113015">prev</a><span>|</span><a href="#42111570">next</a><span>|</span><label class="collapse" for="c-42112107">[-]</label><label class="expand" for="c-42112107">[2 more]</label></div><br/><div class="children"><div class="content">ChimeraOS is a clone or fork or something of SteamOS. Works great on AMD tiny PC hardware. can&#x27;t really comment past that. I found the keyboard and mouse setup kinda jarring and just threw windows back on...for now.</div><br/><div id="42112751" class="c"><input type="checkbox" id="c-42112751" checked=""/><div class="controls bullet"><span class="by">bsimpson</span><span>|</span><a href="#42111445">root</a><span>|</span><a href="#42112107">parent</a><span>|</span><a href="#42111570">next</a><span>|</span><label class="collapse" for="c-42112751">[-]</label><label class="expand" for="c-42112751">[1 more]</label></div><br/><div class="children"><div class="content">As noted in a sibling comment, Valve has released an open-source compositor (`gamescope`), which is what presents Steam as a console-esque UI on the Steam Deck.  Using gamescope to present Steam, you can make an arbitrary Linux feel indistinguishable from a Deck.<p>There are many gaming distributions (e.g. Bazzite, Jovian&#x2F;NixOS, Nobara, Chimera…) that take this approach.<p>They&#x27;re usually just standard desktop distributions (Fedora or NixOS) with gaming packages configured.  There is a Russian teenager who&#x27;s trying to cobble together a SteamOS clone using as many Valve packages as possible.  His project is called HoloISO.</div><br/></div></div></div></div><div id="42111570" class="c"><input type="checkbox" id="c-42111570" checked=""/><div class="controls bullet"><span class="by">lordofgibbons</span><span>|</span><a href="#42111445">root</a><span>|</span><a href="#42111469">parent</a><span>|</span><a href="#42112107">prev</a><span>|</span><a href="#42112839">next</a><span>|</span><label class="collapse" for="c-42111570">[-]</label><label class="expand" for="c-42111570">[6 more]</label></div><br/><div class="children"><div class="content">What would that get you over any other distro with the steam software installed?</div><br/><div id="42112194" class="c"><input type="checkbox" id="c-42112194" checked=""/><div class="controls bullet"><span class="by">zamadatix</span><span>|</span><a href="#42111445">root</a><span>|</span><a href="#42111570">parent</a><span>|</span><a href="#42112256">next</a><span>|</span><label class="collapse" for="c-42112194">[-]</label><label class="expand" for="c-42112194">[3 more]</label></div><br/><div class="children"><div class="content">There&#x27;s a lot more to SteamOS than &quot;it ran `apt install steam -y` for you&quot;. Even just having things like Gamescope running out of the box (which is more than just `apt install gamescope`) is a huge amount of headache set aside. Plus the guarantee when it doesn&#x27;t work it&#x27;s because of a bug rather than something you did or some incompatibility with your exact distro setup.</div><br/><div id="42113486" class="c"><input type="checkbox" id="c-42113486" checked=""/><div class="controls bullet"><span class="by">akimbostrawman</span><span>|</span><a href="#42111445">root</a><span>|</span><a href="#42112194">parent</a><span>|</span><a href="#42112281">next</a><span>|</span><label class="collapse" for="c-42113486">[-]</label><label class="expand" for="c-42113486">[1 more]</label></div><br/><div class="children"><div class="content">&gt;guarantee when it doesn&#x27;t work it&#x27;s because of a bug rather than something you did or some incompatibility with your exact distro setup.<p>Flatpak fixes this problem. You don&#x27;t need gamescope unless for stuff like scaling. The only few times you need to fiddle with anything on desktop is changing proton version or adding a launch variable from protondb.com (just like on steamdeck)</div><br/></div></div><div id="42112281" class="c"><input type="checkbox" id="c-42112281" checked=""/><div class="controls bullet"><span class="by">BolexNOLA</span><span>|</span><a href="#42111445">root</a><span>|</span><a href="#42112194">parent</a><span>|</span><a href="#42113486">prev</a><span>|</span><a href="#42112256">next</a><span>|</span><label class="collapse" for="c-42112281">[-]</label><label class="expand" for="c-42112281">[1 more]</label></div><br/><div class="children"><div class="content">Yeah you get it lol I just want to play my damn games and not tinker all the damn time!</div><br/></div></div></div></div><div id="42112256" class="c"><input type="checkbox" id="c-42112256" checked=""/><div class="controls bullet"><span class="by">BolexNOLA</span><span>|</span><a href="#42111445">root</a><span>|</span><a href="#42111570">parent</a><span>|</span><a href="#42112194">prev</a><span>|</span><a href="#42111639">next</a><span>|</span><label class="collapse" for="c-42112256">[-]</label><label class="expand" for="c-42112256">[1 more]</label></div><br/><div class="children"><div class="content">I like console gaming because it just works. I sit down on my couch, I turn on my controller, and I’m back in my game in under 10 seconds. The series S has honestly been a fantastic purchase for me despite the many drawbacks.<p>PC gaming is very enticing but we all know that’s simply not how it goes down. I would love to build a PC that is literally just discord and Steam. I want to run it in big picture mode for the most part and treat it more or less like a console.<p>I have really enjoyed my steam deck and it has fit that desired role pretty well. But obviously it is just not that powerful. It’s impressive for what it is, but for me it’s basically a great indie game machine with the occasional AAA option that is tolerable. A well-built machine with that kind of UX (minus the known idiosyncrasies of the deck) would be fantastic.<p>To answer your question more directly:
Most Linux distros do not offer this either. Bazzite is the closest I’ve seen.</div><br/></div></div><div id="42111639" class="c"><input type="checkbox" id="c-42111639" checked=""/><div class="controls bullet"><span class="by">shortrounddev2</span><span>|</span><a href="#42111445">root</a><span>|</span><a href="#42111570">parent</a><span>|</span><a href="#42112256">prev</a><span>|</span><a href="#42112839">next</a><span>|</span><label class="collapse" for="c-42111639">[-]</label><label class="expand" for="c-42111639">[1 more]</label></div><br/><div class="children"><div class="content">1st party support</div><br/></div></div></div></div></div></div></div></div><div id="42112839" class="c"><input type="checkbox" id="c-42112839" checked=""/><div class="controls bullet"><span class="by">vlovich123</span><span>|</span><a href="#42111445">prev</a><span>|</span><a href="#42111059">next</a><span>|</span><label class="collapse" for="c-42112839">[-]</label><label class="expand" for="c-42112839">[1 more]</label></div><br/><div class="children"><div class="content">Isn’t best practice to read all environment variables on boot and never use setenv? The only place where setenv would matter is for spawning new processes where you should probably be creating an new environ cloned from the current one and update the new values. Using getenv&#x2F;setenv as an IPC messaging mechanism seems to be an opportunity for lots of issues aside from it historically not being multithreaded-safe on Linux and having all sorts of potential memory leaks hiding (which is what the post ignores when it says that it’s thread safe on MacOS).</div><br/></div></div><div id="42111059" class="c"><input type="checkbox" id="c-42111059" checked=""/><div class="controls bullet"><span class="by">o11c</span><span>|</span><a href="#42112839">prev</a><span>|</span><a href="#42113382">next</a><span>|</span><label class="collapse" for="c-42111059">[-]</label><label class="expand" for="c-42111059">[8 more]</label></div><br/><div class="children"><div class="content">The real question is: is there <i>any</i> case where a program calls `setenv` in one thread and actually <i>wants</i> it to take effect in other already-existing threads?<p>That said, GLIBC <i>is</i> pretty good at documenting all the dangerous functions, so it is <i>possible</i> to add locking&#x2F;copying yourself.</div><br/><div id="42111308" class="c"><input type="checkbox" id="c-42111308" checked=""/><div class="controls bullet"><span class="by">fweimer</span><span>|</span><a href="#42111059">parent</a><span>|</span><a href="#42112186">next</a><span>|</span><label class="collapse" for="c-42111308">[-]</label><label class="expand" for="c-42111308">[3 more]</label></div><br/><div class="children"><div class="content">Interesting idea. I strongly suspect that there are programs out there that expect that setenv changes the environ array (and they do not treat it as an opaque pointer passed to posix_spawn&#x2F;execve). With a per-thread setenv, we would need a per-thread environ variable as well. Unfortunately, that&#x27;s not really compatible with POSIX because environ is not declared in a header.  Instead, programmers are expected to write a declaration<p><pre><code>     extern char **environ;
</code></pre>
into their sources, and that declaration is incompatible with environ being a thread-local variable.</div><br/><div id="42111954" class="c"><input type="checkbox" id="c-42111954" checked=""/><div class="controls bullet"><span class="by">o11c</span><span>|</span><a href="#42111059">root</a><span>|</span><a href="#42111308">parent</a><span>|</span><a href="#42112186">next</a><span>|</span><label class="collapse" for="c-42111954">[-]</label><label class="expand" for="c-42111954">[2 more]</label></div><br/><div class="children"><div class="content">Hm, in the end most of the problems do come down to stuff not coming from blessed headers.<p>Regardless of anything else, how about:<p>* deprecate direct access to `environ` and add functions to replace it. Have a macro that indicates this and provide a canonical compatibility shim for people to copy if they might use old libcs.<p>* using linker magic, change the behavior of programs depending on whether they attempt to access `environ` or not, so old-API programs are still thread-unsafe but new ones are thread-safe.<p>It&#x27;s amazing how much you can do with the conditionally-linked object files from a static &quot;library&quot;. Much of C&#x27;s cross-TU &quot;UB, no diagnostic required&quot; is inexcusable since we can detect it quite easily with zero overhead (at least, for static linking) using today&#x27;s linkers by deliberately causing multiple definition errors.<p>Compatibility with old-ABI programs probably means fixing `environ` is not that simple, but you are libc and libc <i>is</i> in control of dynamic linking ...</div><br/><div id="42113690" class="c"><input type="checkbox" id="c-42113690" checked=""/><div class="controls bullet"><span class="by">ptsneves</span><span>|</span><a href="#42111059">root</a><span>|</span><a href="#42111954">parent</a><span>|</span><a href="#42112186">next</a><span>|</span><label class="collapse" for="c-42113690">[-]</label><label class="expand" for="c-42113690">[1 more]</label></div><br/><div class="children"><div class="content">All the inconsistencies you suggest sound like a trap, especially when you suggest ABI and API behaviour divergences.
From what I understood of your macro idea this would lead to API changes that would lead to ifdefs for different (g)libcurl versions. Doesn’t feel good especially for software distributors.<p>Also the changes you mention require changes in the linker scripts distributed by a variety of toolchains and would need to check if the libc target was a blessed one. In effect the deprecation would never move to obsolete and kept around forever.<p>To clarify the above post libc is in control of dynamic linking through the dl*(dlopen) family of functions.</div><br/></div></div></div></div></div></div><div id="42112186" class="c"><input type="checkbox" id="c-42112186" checked=""/><div class="controls bullet"><span class="by">kelnos</span><span>|</span><a href="#42111059">parent</a><span>|</span><a href="#42111308">prev</a><span>|</span><a href="#42111972">next</a><span>|</span><label class="collapse" for="c-42112186">[-]</label><label class="expand" for="c-42112186">[2 more]</label></div><br/><div class="children"><div class="content">&gt; <i>so it is possible to add locking&#x2F;copying yourself.</i><p>Not if third-party dependent libraries use getenv&#x2F;setenv.  (The article mentions this as a continuing problem with the steam client.)</div><br/><div id="42113225" class="c"><input type="checkbox" id="c-42113225" checked=""/><div class="controls bullet"><span class="by">o11c</span><span>|</span><a href="#42111059">root</a><span>|</span><a href="#42112186">parent</a><span>|</span><a href="#42111972">next</a><span>|</span><label class="collapse" for="c-42113225">[-]</label><label class="expand" for="c-42113225">[1 more]</label></div><br/><div class="children"><div class="content">As a rule you should not assume third-party libraries are at all thread-safe.</div><br/></div></div></div></div><div id="42111663" class="c"><input type="checkbox" id="c-42111663" checked=""/><div class="controls bullet"><span class="by">Asooka</span><span>|</span><a href="#42111059">parent</a><span>|</span><a href="#42111972">prev</a><span>|</span><a href="#42113382">next</a><span>|</span><label class="collapse" for="c-42111663">[-]</label><label class="expand" for="c-42111663">[1 more]</label></div><br/><div class="children"><div class="content">Yes, I set up environment variables in a plugin that are later read by already started worker threads. It&#x27;s not a problem for me because the worker threads are all sleeping on a runqueue, but technically I do want to set an env var in one thread and read it in another that is already running.</div><br/></div></div></div></div><div id="42113382" class="c"><input type="checkbox" id="c-42113382" checked=""/><div class="controls bullet"><span class="by">thrdbndndn</span><span>|</span><a href="#42111059">prev</a><span>|</span><a href="#42111739">next</a><span>|</span><label class="collapse" for="c-42113382">[-]</label><label class="expand" for="c-42113382">[5 more]</label></div><br/><div class="children"><div class="content">&gt; We removed the majority of setenv calls. It was mostly used when spawning processes<p>Could someone elaborate this for a non-developer? Why would you use `setenv` (which I assume is functionally similar to `export key=value`, but correctly me if I&#x27;m wrong) (extensively) for spawning processes?</div><br/><div id="42113473" class="c"><input type="checkbox" id="c-42113473" checked=""/><div class="controls bullet"><span class="by">fulafel</span><span>|</span><a href="#42113382">parent</a><span>|</span><a href="#42111739">next</a><span>|</span><label class="collapse" for="c-42113473">[-]</label><label class="expand" for="c-42113473">[4 more]</label></div><br/><div class="children"><div class="content">Environment variables are per-process, but inherited by child processes (not system wide). So when you start other programs you often set up env vars for them, or clear env vars that were used by your parent process to not inadvertantly perturb the child&#x27;s behaviour.</div><br/><div id="42113514" class="c"><input type="checkbox" id="c-42113514" checked=""/><div class="controls bullet"><span class="by">bhawks</span><span>|</span><a href="#42113382">root</a><span>|</span><a href="#42113473">parent</a><span>|</span><a href="#42111739">next</a><span>|</span><label class="collapse" for="c-42113514">[-]</label><label class="expand" for="c-42113514">[3 more]</label></div><br/><div class="children"><div class="content">Yes the proper way to do that is execve, not by changing global variables in your parent process. <a href="https:&#x2F;&#x2F;man7.org&#x2F;linux&#x2F;man-pages&#x2F;man2&#x2F;execve.2.html" rel="nofollow">https:&#x2F;&#x2F;man7.org&#x2F;linux&#x2F;man-pages&#x2F;man2&#x2F;execve.2.html</a><p>Using setenv is mostly always a hack that relies on a bunch of assumptions that could easily change and be hard to debug.</div><br/><div id="42113885" class="c"><input type="checkbox" id="c-42113885" checked=""/><div class="controls bullet"><span class="by">fulafel</span><span>|</span><a href="#42113382">root</a><span>|</span><a href="#42113514">parent</a><span>|</span><a href="#42113637">next</a><span>|</span><label class="collapse" for="c-42113885">[-]</label><label class="expand" for="c-42113885">[1 more]</label></div><br/><div class="children"><div class="content">The most likely alternatives (setenv vs execve) would both be called in the child process after fork. But of course here we get to the fascinating world of fork interactions with threads..</div><br/></div></div><div id="42113637" class="c"><input type="checkbox" id="c-42113637" checked=""/><div class="controls bullet"><span class="by">ptsneves</span><span>|</span><a href="#42113382">root</a><span>|</span><a href="#42113514">parent</a><span>|</span><a href="#42113885">prev</a><span>|</span><a href="#42111739">next</a><span>|</span><label class="collapse" for="c-42113637">[-]</label><label class="expand" for="c-42113637">[1 more]</label></div><br/><div class="children"><div class="content">Unless there is a fork exec family of syscalls are not child processes but the same process itself. Small detail but important because sometimes you really want a separate process altogether.</div><br/></div></div></div></div></div></div></div></div><div id="42111739" class="c"><input type="checkbox" id="c-42111739" checked=""/><div class="controls bullet"><span class="by">josephcsible</span><span>|</span><a href="#42113382">prev</a><span>|</span><a href="#42112473">next</a><span>|</span><label class="collapse" for="c-42111739">[-]</label><label class="expand" for="c-42111739">[3 more]</label></div><br/><div class="children"><div class="content">&gt; One of my colleagues rightly dubbed setenv &quot;the worst Linux API&quot;.<p>Is setenv really a Linux API, since it&#x27;s neither defined by Linux (it&#x27;s in POSIX) nor implemented by the Linux kernel (it&#x27;s entirely in userspace)?</div><br/><div id="42112165" class="c"><input type="checkbox" id="c-42112165" checked=""/><div class="controls bullet"><span class="by">amiga386</span><span>|</span><a href="#42111739">parent</a><span>|</span><a href="#42112040">next</a><span>|</span><label class="collapse" for="c-42112165">[-]</label><label class="expand" for="c-42112165">[1 more]</label></div><br/><div class="children"><div class="content">Yes it is, if you program application software <i>for Linux</i> (and your other two supported platforms are Windows and macOS, as is the case for OP and their colleague who appear to work for Valve, supporting Steam)<p>And the reason the colleague dubs it the worst has nothing to do with its specification in POSIX (which doesn&#x27;t require the function to be thread-safe but also doesn&#x27;t prevent it from being made thread-safe), but rather its specific implementation in glibc, which is the C library in use on all the Linux distributions that Valve support Steam on and all are equally dubbed as &quot;Linux&quot;</div><br/></div></div></div></div><div id="42112473" class="c"><input type="checkbox" id="c-42112473" checked=""/><div class="controls bullet"><span class="by">accrual</span><span>|</span><a href="#42111739">prev</a><span>|</span><a href="#42113644">next</a><span>|</span><label class="collapse" for="c-42112473">[-]</label><label class="expand" for="c-42112473">[1 more]</label></div><br/><div class="children"><div class="content">This is really cool insight into both the Steam client and Linux programming. I understand why there may not be detailed release notes every release, but wow &quot;Fixed some miscellaneous common crashes&quot; is an understatement when you know about this work!</div><br/></div></div><div id="42113644" class="c"><input type="checkbox" id="c-42113644" checked=""/><div class="controls bullet"><span class="by">INTPenis</span><span>|</span><a href="#42112473">prev</a><span>|</span><a href="#42113459">next</a><span>|</span><label class="collapse" for="c-42113644">[-]</label><label class="expand" for="c-42113644">[1 more]</label></div><br/><div class="children"><div class="content">The mere existence of Steam is astounding to someone who grew up playing nethack and chess on Linux.<p>But the Steam client is really strange. Sometimes it works for months, and suddenly a game won&#x27;t start, or something doesn&#x27;t work, and I have to do weird stuff to get it working like purging all files or reinstalling. It doesn&#x27;t make sense, it&#x27;s like the Steam client rots.</div><br/></div></div><div id="42113459" class="c"><input type="checkbox" id="c-42113459" checked=""/><div class="controls bullet"><span class="by">bhawks</span><span>|</span><a href="#42113644">prev</a><span>|</span><a href="#42110698">next</a><span>|</span><label class="collapse" for="c-42113459">[-]</label><label class="expand" for="c-42113459">[1 more]</label></div><br/><div class="children"><div class="content">FWIW the decision to leak memory on Mac actually goes back ~26 years to FreeBSD - <a href="https:&#x2F;&#x2F;bugs.freebsd.org&#x2F;bugzilla&#x2F;show_bug.cgi?id=5604" rel="nofollow">https:&#x2F;&#x2F;bugs.freebsd.org&#x2F;bugzilla&#x2F;show_bug.cgi?id=5604</a> which OSX inherited. I would not be surprised that Windows setenv has BSD roots due to licensing.<p>26 years ago people knew this API was broken but didn&#x27;t fix it due to inertia of breaking buggy programs further.<p>There really shouldn&#x27;t be a need to change your own process&#x27;s envvars. For subprocesses just use the proper exec function. For anything else there should be a clear API to call rather than changing a global variable and hoping some code far away from yours rereads it and handles things correctly.</div><br/></div></div><div id="42110698" class="c"><input type="checkbox" id="c-42110698" checked=""/><div class="controls bullet"><span class="by">bhaney</span><span>|</span><a href="#42113459">prev</a><span>|</span><a href="#42111361">next</a><span>|</span><label class="collapse" for="c-42110698">[-]</label><label class="expand" for="c-42110698">[1 more]</label></div><br/><div class="children"><div class="content">&gt; If this can be addressed in glibc, it may involve a tradeoff on features, maybe an opt-in mechanism with a slight departure from the &quot;impossible&quot; POSIX spec. That&#x27;s something we may pursue in the long term if we can propose something sensible.<p>Yes please</div><br/></div></div><div id="42111361" class="c"><input type="checkbox" id="c-42111361" checked=""/><div class="controls bullet"><span class="by">Pannoniae</span><span>|</span><a href="#42110698">prev</a><span>|</span><a href="#42112964">next</a><span>|</span><label class="collapse" for="c-42111361">[-]</label><label class="expand" for="c-42111361">[10 more]</label></div><br/><div class="children"><div class="content">To raise awareness: there&#x27;s been a bug with the Linux Steam client which has been persistent for a long time.<p>TL;DR: if you have Steam running for more than a ~day or so, you will run out of window handles so you won&#x27;t be able to open any new graphical application&#x2F;window until you restart Steam.<p>Using Steam Chat appears to make the issue worse (it happens earlier).<p>This has been documented under <a href="https:&#x2F;&#x2F;github.com&#x2F;ValveSoftware&#x2F;steam-for-linux&#x2F;issues&#x2F;9094">https:&#x2F;&#x2F;github.com&#x2F;ValveSoftware&#x2F;steam-for-linux&#x2F;issues&#x2F;9094</a> but for some reason that issue has been closed.<p>I personally just restart Steam every day but if someone else encounters this issue and doesn&#x27;t know why their windows are not opening, this is why :)<p>I am using KDE&#x2F;Wayland but I&#x27;ve observed this under X11 too.</div><br/><div id="42113663" class="c"><input type="checkbox" id="c-42113663" checked=""/><div class="controls bullet"><span class="by">k4rli</span><span>|</span><a href="#42111361">parent</a><span>|</span><a href="#42111440">next</a><span>|</span><label class="collapse" for="c-42113663">[-]</label><label class="expand" for="c-42113663">[1 more]</label></div><br/><div class="children"><div class="content">This has made Steam something to avoid for me. I tried switching to Flatpak version to see if that would help, but unfortunately not. For me it started ~1 year ago.<p>The performance issues have made me not want to even open Steam anymore so I have nearly completely stopped playing. (not related to this issue but several games have also added kernel anticheats, killing off Linux versions, which also has contributed to this)</div><br/></div></div><div id="42111440" class="c"><input type="checkbox" id="c-42111440" checked=""/><div class="controls bullet"><span class="by">LorenDB</span><span>|</span><a href="#42111361">parent</a><span>|</span><a href="#42113663">prev</a><span>|</span><a href="#42112720">next</a><span>|</span><label class="collapse" for="c-42111440">[-]</label><label class="expand" for="c-42111440">[5 more]</label></div><br/><div class="children"><div class="content">KDE Wayland user here. I have never observed this issue myself, and I leave Steam running all the time (although I never open Steam Chat).</div><br/><div id="42111447" class="c"><input type="checkbox" id="c-42111447" checked=""/><div class="controls bullet"><span class="by">snvzz</span><span>|</span><a href="#42111361">root</a><span>|</span><a href="#42111440">parent</a><span>|</span><a href="#42112720">next</a><span>|</span><label class="collapse" for="c-42111447">[-]</label><label class="expand" for="c-42111447">[4 more]</label></div><br/><div class="children"><div class="content">Although, not albeit.<p>You have a slave sentence there. These are incompatible with albeit.</div><br/><div id="42111574" class="c"><input type="checkbox" id="c-42111574" checked=""/><div class="controls bullet"><span class="by">LorenDB</span><span>|</span><a href="#42111361">root</a><span>|</span><a href="#42111447">parent</a><span>|</span><a href="#42112720">next</a><span>|</span><label class="collapse" for="c-42111574">[-]</label><label class="expand" for="c-42111574">[3 more]</label></div><br/><div class="children"><div class="content">Thanks, fixed! &quot;Albeit&quot; seemed like it would work, but &quot;although&quot; indeed fits much better.</div><br/><div id="42111611" class="c"><input type="checkbox" id="c-42111611" checked=""/><div class="controls bullet"><span class="by">soulofmischief</span><span>|</span><a href="#42111361">root</a><span>|</span><a href="#42111574">parent</a><span>|</span><a href="#42112720">next</a><span>|</span><label class="collapse" for="c-42111611">[-]</label><label class="expand" for="c-42111611">[2 more]</label></div><br/><div class="children"><div class="content">To put it another way, albeit shouldn&#x27;t be used with independent clauses.<p>1. I leave Steam running all the time (although I never open Steam Chat).<p>2. I leave Steam running all the time (albeit never with Steam Chat).<p>&quot;I never open Steam Chat&quot; can stand on its own as a sentence, but &quot;never with Steam Chat&quot; does not and thus can be appropriately modified with albeit.</div><br/></div></div></div></div></div></div></div></div><div id="42112720" class="c"><input type="checkbox" id="c-42112720" checked=""/><div class="controls bullet"><span class="by">jandrese</span><span>|</span><a href="#42111361">parent</a><span>|</span><a href="#42111440">prev</a><span>|</span><a href="#42111531">next</a><span>|</span><label class="collapse" for="c-42112720">[-]</label><label class="expand" for="c-42112720">[1 more]</label></div><br/><div class="children"><div class="content">Interesting.  I&#x27;ve left the Steam client running for weeks at a time and have not seen that issue.  I bet it was closed because Valve couldn&#x27;t replicate the problem.</div><br/></div></div><div id="42111531" class="c"><input type="checkbox" id="c-42111531" checked=""/><div class="controls bullet"><span class="by">nazgulsenpai</span><span>|</span><a href="#42111361">parent</a><span>|</span><a href="#42112720">prev</a><span>|</span><a href="#42111803">next</a><span>|</span><label class="collapse" for="c-42111531">[-]</label><label class="expand" for="c-42111531">[1 more]</label></div><br/><div class="children"><div class="content">Void Linux, xorg and never has this issue, often going many days without rebooting with Steam constantly open.</div><br/></div></div><div id="42111803" class="c"><input type="checkbox" id="c-42111803" checked=""/><div class="controls bullet"><span class="by">GauntletWizard</span><span>|</span><a href="#42111361">parent</a><span>|</span><a href="#42111531">prev</a><span>|</span><a href="#42112964">next</a><span>|</span><label class="collapse" for="c-42111803">[-]</label><label class="expand" for="c-42111803">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve got several Linux gaming machines (and a couple of business desktops I play FTL on sometimes), and it&#x27;s weirdly inconsistent - the best and worst machine I have both use Intel Graphics. It almostnever shows up on the A770 - that one stays awake for weeks of daily gaming and I have no problems with it. My laptop with integrated Intel sees it all the time. My laptop with Nvidia graphics sees it often, but not nearly as often.<p>The one that&#x27;s so annoying that I&#x27;ve actually developed habits around it is the tendency for the library window to freeze when it becomes unfocused - it&#x27;s not all the time, but it&#x27;s often enough that I now habitually close the window anytime I defocus it</div><br/></div></div></div></div><div id="42112964" class="c"><input type="checkbox" id="c-42112964" checked=""/><div class="controls bullet"><span class="by">Aeolun</span><span>|</span><a href="#42111361">prev</a><span>|</span><a href="#42112093">next</a><span>|</span><label class="collapse" for="c-42112964">[-]</label><label class="expand" for="c-42112964">[1 more]</label></div><br/><div class="children"><div class="content">My only issue with Steam at this point is that it’ll just randomly complain it has no connection, no matter which content server I set it to connect to.<p>If I spam the ‘retry’ button it’ll eventually work, but it’s a massive PITA.</div><br/></div></div><div id="42112093" class="c"><input type="checkbox" id="c-42112093" checked=""/><div class="controls bullet"><span class="by">nineteen999</span><span>|</span><a href="#42112964">prev</a><span>|</span><a href="#42111043">next</a><span>|</span><label class="collapse" for="c-42112093">[-]</label><label class="expand" for="c-42112093">[3 more]</label></div><br/><div class="children"><div class="content">The stability is fine for me, but the rendering performance in the steam client when the mouse is in the window is abysmal.</div><br/><div id="42112703" class="c"><input type="checkbox" id="c-42112703" checked=""/><div class="controls bullet"><span class="by">Vilian</span><span>|</span><a href="#42112093">parent</a><span>|</span><a href="#42111043">next</a><span>|</span><label class="collapse" for="c-42112703">[-]</label><label class="expand" for="c-42112703">[2 more]</label></div><br/><div class="children"><div class="content">Nvidia?</div><br/><div id="42112860" class="c"><input type="checkbox" id="c-42112860" checked=""/><div class="controls bullet"><span class="by">yxhuvud</span><span>|</span><a href="#42112093">root</a><span>|</span><a href="#42112703">parent</a><span>|</span><a href="#42111043">next</a><span>|</span><label class="collapse" for="c-42112860">[-]</label><label class="expand" for="c-42112860">[1 more]</label></div><br/><div class="children"><div class="content">Could just be really old gnome installation and higher poll rate than normal. There used to be issues there..</div><br/></div></div></div></div></div></div><div id="42111043" class="c"><input type="checkbox" id="c-42111043" checked=""/><div class="controls bullet"><span class="by">jeffbee</span><span>|</span><a href="#42112093">prev</a><span>|</span><a href="#42111443">next</a><span>|</span><label class="collapse" for="c-42111043">[-]</label><label class="expand" for="c-42111043">[10 more]</label></div><br/><div class="children"><div class="content">Maybe among the best decisions Java ever made was hiding setenv. You simply cannot set env vars in Java.</div><br/><div id="42111527" class="c"><input type="checkbox" id="c-42111527" checked=""/><div class="controls bullet"><span class="by">mschuster91</span><span>|</span><a href="#42111043">parent</a><span>|</span><a href="#42111554">next</a><span>|</span><label class="collapse" for="c-42111527">[-]</label><label class="expand" for="c-42111527">[1 more]</label></div><br/><div class="children"><div class="content">Java in general tends to massively dislike environment variables.<p>Which is a Good Thing, but unfortunately it makes dealing with proxy support so much harder - especially as there are just so damn many HTTP libraries that people use...</div><br/></div></div><div id="42111554" class="c"><input type="checkbox" id="c-42111554" checked=""/><div class="controls bullet"><span class="by">aidenn0</span><span>|</span><a href="#42111043">parent</a><span>|</span><a href="#42111527">prev</a><span>|</span><a href="#42112747">next</a><span>|</span><label class="collapse" for="c-42111554">[-]</label><label class="expand" for="c-42111554">[7 more]</label></div><br/><div class="children"><div class="content">So does that also mean you can&#x27;t write e.g. a POSIX shell in Java?</div><br/><div id="42111881" class="c"><input type="checkbox" id="c-42111881" checked=""/><div class="controls bullet"><span class="by">asveikau</span><span>|</span><a href="#42111043">root</a><span>|</span><a href="#42111554">parent</a><span>|</span><a href="#42111880">next</a><span>|</span><label class="collapse" for="c-42111881">[-]</label><label class="expand" for="c-42111881">[1 more]</label></div><br/><div class="children"><div class="content">execve(2) and friends allow you to specify a new processes&#x27;s environment variables. How Java may choose to expose that I don&#x27;t know. Assuming they do, that is all a shell needs. You do not strictly need to call setenv(3) to change a variable that gets evaluated with $, etc. You <i>do</i> need to pass the modified environment to a child process.</div><br/></div></div><div id="42111880" class="c"><input type="checkbox" id="c-42111880" checked=""/><div class="controls bullet"><span class="by">bhawks</span><span>|</span><a href="#42111043">root</a><span>|</span><a href="#42111554">parent</a><span>|</span><a href="#42111881">prev</a><span>|</span><a href="#42111610">next</a><span>|</span><label class="collapse" for="c-42111880">[-]</label><label class="expand" for="c-42111880">[1 more]</label></div><br/><div class="children"><div class="content">1) java shell starts
2) read getenv into a java hashmap
3) evaluate shell input - any sets update the hashmap, any gets read from the hashmap
4) when you get to a point where you need to exec a process you use the hashmap to pass envvars into process builder - which is going to call execvpe for you.<p>So yeah you definitely could (there&#x27;d be other reasons why java wouldn&#x27;t be a good choice).<p>TBH reading that folks were calling setenv before an exec to propagate env vars to a child made me sad. I would guess that other use cases were leveraging environ as a poor man&#x27;s global variable - which is also unfortunate.</div><br/></div></div><div id="42111610" class="c"><input type="checkbox" id="c-42111610" checked=""/><div class="controls bullet"><span class="by">shakna</span><span>|</span><a href="#42111043">root</a><span>|</span><a href="#42111554">parent</a><span>|</span><a href="#42111880">prev</a><span>|</span><a href="#42111917">next</a><span>|</span><label class="collapse" for="c-42111610">[-]</label><label class="expand" for="c-42111610">[3 more]</label></div><br/><div class="children"><div class="content">System.getenv exists, so getting is easy... But setting env vars generally involves a convoluted process.<p>You can modify the JVM&#x27;s buffer, or spawn a new ProcessBuilder, or a few other things. But it&#x27;s a nasty place to be.</div><br/><div id="42111901" class="c"><input type="checkbox" id="c-42111901" checked=""/><div class="controls bullet"><span class="by">MBCook</span><span>|</span><a href="#42111043">root</a><span>|</span><a href="#42111610">parent</a><span>|</span><a href="#42111917">next</a><span>|</span><label class="collapse" for="c-42111901">[-]</label><label class="expand" for="c-42111901">[2 more]</label></div><br/><div class="children"><div class="content">Or make a little JNI class.</div><br/><div id="42111947" class="c"><input type="checkbox" id="c-42111947" checked=""/><div class="controls bullet"><span class="by">shakna</span><span>|</span><a href="#42111043">root</a><span>|</span><a href="#42111901">parent</a><span>|</span><a href="#42111917">next</a><span>|</span><label class="collapse" for="c-42111947">[-]</label><label class="expand" for="c-42111947">[1 more]</label></div><br/><div class="children"><div class="content">That doesn&#x27;t work for preserving to child threads, unfortunately. Which is something people expect.</div><br/></div></div></div></div></div></div><div id="42111917" class="c"><input type="checkbox" id="c-42111917" checked=""/><div class="controls bullet"><span class="by">lmm</span><span>|</span><a href="#42111043">root</a><span>|</span><a href="#42111554">parent</a><span>|</span><a href="#42111610">prev</a><span>|</span><a href="#42112747">next</a><span>|</span><label class="collapse" for="c-42111917">[-]</label><label class="expand" for="c-42111917">[1 more]</label></div><br/><div class="children"><div class="content">You can pass a new environment to a process you spawn, which I think is adequate? You just can&#x27;t modify the environment of your existing process.</div><br/></div></div></div></div><div id="42112747" class="c"><input type="checkbox" id="c-42112747" checked=""/><div class="controls bullet"><span class="by">NotACracker</span><span>|</span><a href="#42111043">parent</a><span>|</span><a href="#42111554">prev</a><span>|</span><a href="#42111443">next</a><span>|</span><label class="collapse" for="c-42112747">[-]</label><label class="expand" for="c-42112747">[1 more]</label></div><br/><div class="children"><div class="content">I admire your courage to say something positive about java.<p>On another note, I believe Zig does the same thing.</div><br/></div></div></div></div><div id="42111443" class="c"><input type="checkbox" id="c-42111443" checked=""/><div class="controls bullet"><span class="by">snvzz</span><span>|</span><a href="#42111043">prev</a><span>|</span><label class="collapse" for="c-42111443">[-]</label><label class="expand" for="c-42111443">[1 more]</label></div><br/><div class="children"><div class="content">Considering glibc&#x27;s effort, I have to wonder what the other libc do, and whether they already implement something like this.</div><br/></div></div></div></div></div></div></div></body></html>