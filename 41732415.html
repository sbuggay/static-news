<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1728032476197" as="style"/><link rel="stylesheet" href="styles.css?v=1728032476197"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://it-notes.dragas.net/2024/10/03/i-solve-problems-eurobsdcon/">Why and how we’re migrating many of our servers from Linux to the BSDs</a> <span class="domain">(<a href="https://it-notes.dragas.net">it-notes.dragas.net</a>)</span></div><div class="subtext"><span>msangi</span> | <span>90 comments</span></div><br/><div><div id="41738993" class="c"><input type="checkbox" id="c-41738993" checked=""/><div class="controls bullet"><span class="by">kev009</span><span>|</span><a href="#41738521">next</a><span>|</span><label class="collapse" for="c-41738993">[-]</label><label class="expand" for="c-41738993">[2 more]</label></div><br/><div class="children"><div class="content">I use Linux, FreeBSD, NetBSD, and OpenBSD all for fun, learning, and profit(the first two).<p>At the very least it is nice to make acquaintance with at least one BSD because it will probably expand your knowledge on Linux in ways you wont be able to anticipate.<p>For example, FreeBSD got me into kernel development, full system debugging, network stack development, driver development, and understanding how the whole kit fits together.  Those skills transferred back and forth with reasonable fidelity to Linux, and for me jumping into Linux development cold would have been too big a leap.. especially in confidence and developing a mental model.<p>For my personal infrastructure, I tend to use FreeBSD because in many ways it is simpler and less surprising, especially when accounting for the passage of time.  ifconfig is still ifconfig, and it works great.  rc.d is all I need for my own stuff.  I like the systematic effects of things like tunables and sysctl for managing hardware and kernel configuration.  The man pages are forever useful to new and old users.  The kernel APIs and userland APIs are extremely stable akin to commercial operating systems and unlike Linux.<p>There are warts.  There are community frictions.  The desktop story and some developer experiences will be perpetually behind Linux due to the size of the contributor base and user base.  The job market for BSD is very limited compared to Linux.  But I don&#x27;t think it&#x27;s an all or nothing affair, and ideally in a high stakes operation you would dual stack for availability and zero-day mitigation (Verisign once gave a great talk on this).</div><br/><div id="41739196" class="c"><input type="checkbox" id="c-41739196" checked=""/><div class="controls bullet"><span class="by">cientifico</span><span>|</span><a href="#41738993">parent</a><span>|</span><a href="#41738521">next</a><span>|</span><label class="collapse" for="c-41739196">[-]</label><label class="expand" for="c-41739196">[1 more]</label></div><br/><div class="children"><div class="content">I completely agree! If you&#x27;re looking to deeply understand how Linux works under the hood, I highly recommend trying out Linux From Scratch. It gave me invaluable insight into the system, especially when I first explored it 20 years ago. Building everything from the ground up—without relying on prepackaged distros or libc—was a game changer.<p>Check it out: <a href="https:&#x2F;&#x2F;www.linuxfromscratch.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.linuxfromscratch.org&#x2F;</a></div><br/></div></div></div></div><div id="41738521" class="c"><input type="checkbox" id="c-41738521" checked=""/><div class="controls bullet"><span class="by">jwildeboer</span><span>|</span><a href="#41738993">prev</a><span>|</span><a href="#41737382">next</a><span>|</span><label class="collapse" for="c-41738521">[-]</label><label class="expand" for="c-41738521">[5 more]</label></div><br/><div class="children"><div class="content">&quot;As an experiment, I decided to migrate two hosts (each with about 10 VMs) of a client — where I had full control—without telling them, over a weekend.&quot; And that&#x27;s where I draw the line. Abusing the trust of your customers is an absolute no-no in my book.</div><br/><div id="41738671" class="c"><input type="checkbox" id="c-41738671" checked=""/><div class="controls bullet"><span class="by">draga79</span><span>|</span><a href="#41738521">parent</a><span>|</span><a href="#41739210">next</a><span>|</span><label class="collapse" for="c-41738671">[-]</label><label class="expand" for="c-41738671">[1 more]</label></div><br/><div class="children"><div class="content">Not an abuse at all. I&#x27;ve a contract with those clients, and I can move the VMs, change the services, etc. freely as long as it doesn&#x27;t cost more than the amount we&#x27;ve previously set.<p>Otherwise, I&#x27;d never dare to do something like that.</div><br/></div></div><div id="41739210" class="c"><input type="checkbox" id="c-41739210" checked=""/><div class="controls bullet"><span class="by">appendix-rock</span><span>|</span><a href="#41738521">parent</a><span>|</span><a href="#41738671">prev</a><span>|</span><a href="#41739173">next</a><span>|</span><label class="collapse" for="c-41739210">[-]</label><label class="expand" for="c-41739210">[2 more]</label></div><br/><div class="children"><div class="content">What!? Changing implementation details is not “abusing trust”. Where would you even draw the line with this attitude!? Should I be informing my customers whenever I update the version of left-pad I have installed!?</div><br/><div id="41739267" class="c"><input type="checkbox" id="c-41739267" checked=""/><div class="controls bullet"><span class="by">draga79</span><span>|</span><a href="#41738521">root</a><span>|</span><a href="#41739210">parent</a><span>|</span><a href="#41739173">next</a><span>|</span><label class="collapse" for="c-41739267">[-]</label><label class="expand" for="c-41739267">[1 more]</label></div><br/><div class="children"><div class="content">They&#x27;re paying for a service. For example, if their Nextcloud is working and is stable, they don&#x27;t care if it&#x27;s running on Linux, FreeBSD, OmniOS, etc.
It&#x27;s in the contract we have - and they&#x27;re fine with it.</div><br/></div></div></div></div></div></div><div id="41737382" class="c"><input type="checkbox" id="c-41737382" checked=""/><div class="controls bullet"><span class="by">jbverschoor</span><span>|</span><a href="#41738521">prev</a><span>|</span><a href="#41738995">next</a><span>|</span><label class="collapse" for="c-41737382">[-]</label><label class="expand" for="c-41737382">[7 more]</label></div><br/><div class="children"><div class="content">I switched from FreeBSD to Linux, mainly because of the bad Java support and the simple fact that Linux became way more popular, which added to the difference in software availability.</div><br/><div id="41737899" class="c"><input type="checkbox" id="c-41737899" checked=""/><div class="controls bullet"><span class="by">jsiepkes</span><span>|</span><a href="#41737382">parent</a><span>|</span><a href="#41738995">next</a><span>|</span><label class="collapse" for="c-41737899">[-]</label><label class="expand" for="c-41737899">[6 more]</label></div><br/><div class="children"><div class="content">FreeBSD has pretty good Java support? Sure if there is a new LTS release it takes a couple of months before it is ported to FreeBSD but that&#x27;s about it?</div><br/><div id="41738415" class="c"><input type="checkbox" id="c-41738415" checked=""/><div class="controls bullet"><span class="by">jbverschoor</span><span>|</span><a href="#41737382">root</a><span>|</span><a href="#41737899">parent</a><span>|</span><a href="#41738246">next</a><span>|</span><label class="collapse" for="c-41738415">[-]</label><label class="expand" for="c-41738415">[1 more]</label></div><br/><div class="children"><div class="content">There was Java, but only green threads were supported. I was running Java&#x2F;J2EE apps (on resin).<p>I also recall a problem with mmap() but I’m not sure if it was related to Java or something else</div><br/></div></div><div id="41738246" class="c"><input type="checkbox" id="c-41738246" checked=""/><div class="controls bullet"><span class="by">kopirgan</span><span>|</span><a href="#41737382">root</a><span>|</span><a href="#41737899">parent</a><span>|</span><a href="#41738415">prev</a><span>|</span><a href="#41738995">next</a><span>|</span><label class="collapse" for="c-41738246">[-]</label><label class="expand" for="c-41738246">[4 more]</label></div><br/><div class="children"><div class="content">For a long time they didn&#x27;t have any. I recall from mid 90s version 4+? They were still trying to port.. or was it early 2000s lol either way it&#x27;s ancient history</div><br/><div id="41738427" class="c"><input type="checkbox" id="c-41738427" checked=""/><div class="controls bullet"><span class="by">jbverschoor</span><span>|</span><a href="#41737382">root</a><span>|</span><a href="#41738246">parent</a><span>|</span><a href="#41738995">next</a><span>|</span><label class="collapse" for="c-41738427">[-]</label><label class="expand" for="c-41738427">[3 more]</label></div><br/><div class="children"><div class="content">Yeah I started around 4.something until 6 I believe. After that it was all Debian.<p>My lesson was to just use what moet people use. But then again, I always used PostgreSQL even though most were on MySQL</div><br/><div id="41738786" class="c"><input type="checkbox" id="c-41738786" checked=""/><div class="controls bullet"><span class="by">shiroiushi</span><span>|</span><a href="#41737382">root</a><span>|</span><a href="#41738427">parent</a><span>|</span><a href="#41738995">next</a><span>|</span><label class="collapse" for="c-41738786">[-]</label><label class="expand" for="c-41738786">[2 more]</label></div><br/><div class="children"><div class="content">You don&#x27;t have to use what &quot;most people use&quot; if what you&#x27;re using is fully compatible, or at least compatible enough that it does everything you need it to do.  PostgreSQL and MySQL are both SQL databases, so depending on what exactly you&#x27;re doing, there&#x27;s likely not that much difference in use.  (Plus, these days, PostgreSQL seems to have become more popular.)<p>So if you&#x27;re just editing text, it doesn&#x27;t matter if most people are using emacs, because you can use vim too.  But I guess for running an OS, FreeBSD has had too many pain points for many people compared to just going with the Linux crowd.</div><br/><div id="41739201" class="c"><input type="checkbox" id="c-41739201" checked=""/><div class="controls bullet"><span class="by">jbverschoor</span><span>|</span><a href="#41737382">root</a><span>|</span><a href="#41738786">parent</a><span>|</span><a href="#41738995">next</a><span>|</span><label class="collapse" for="c-41739201">[-]</label><label class="expand" for="c-41739201">[1 more]</label></div><br/><div class="children"><div class="content">You would think so, but you&#x27;d be surprised what how people (mis)use stuff and how they enjoy using vendor specific features &#x2F; extensions. This is also, imo, what kind of killed the adoption of J2EE and even J2ME. I&#x27;m not talking about J2EE&#x2F;JEE + Spring*, or using an embedded tomcat. I&#x27;m talking about basically what everybody&#x27;s trying to create for the last 20 years in terms of deployment etc. Sun had it pretty much figured out back then<p>For editing text, I only use vi.. It&#x27;s available everywhere and I know my way around it.<p>I&#x27;m glad postgres became popular :).  The reasoning around using what many people use is that software is generally more available..<p>Maybe I&#x27;ll give FreeBSD another swing in the future, but I&#x27;m not sure what the state of containers is. I used jails back in the days, but I&#x27;ll have to do some research on that.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="41738995" class="c"><input type="checkbox" id="c-41738995" checked=""/><div class="controls bullet"><span class="by">linuxandrew</span><span>|</span><a href="#41737382">prev</a><span>|</span><a href="#41736976">next</a><span>|</span><label class="collapse" for="c-41738995">[-]</label><label class="expand" for="c-41738995">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve recently discovered systemd-nspawn which is an alternative to LXC, builtin and integrated into systemd. Much lighter than full VMs and it&#x27;s quite similar to Solaris Zones and FreeBSD jails. One way to use it is to extract an OCI (Docker) image to a path, that way you can reuse the container tooling provided by Docker, Podman et al.<p>I&#x27;ve barely touched the BSDs and it&#x27;s been a few years since I last used Solaris so I can&#x27;t make much of a comparison as a user myself.</div><br/></div></div><div id="41736976" class="c"><input type="checkbox" id="c-41736976" checked=""/><div class="controls bullet"><span class="by">binkHN</span><span>|</span><a href="#41738995">prev</a><span>|</span><a href="#41738456">next</a><span>|</span><label class="collapse" for="c-41736976">[-]</label><label class="expand" for="c-41736976">[2 more]</label></div><br/><div class="children"><div class="content">Glad to see all the major BSDs used here; I use OpenBSD whenever it makes sense.</div><br/><div id="41737120" class="c"><input type="checkbox" id="c-41737120" checked=""/><div class="controls bullet"><span class="by">SoftTalker</span><span>|</span><a href="#41736976">parent</a><span>|</span><a href="#41738456">next</a><span>|</span><label class="collapse" for="c-41737120">[-]</label><label class="expand" for="c-41737120">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s what I use at home and at work.</div><br/></div></div></div></div><div id="41738456" class="c"><input type="checkbox" id="c-41738456" checked=""/><div class="controls bullet"><span class="by">DeathArrow</span><span>|</span><a href="#41736976">prev</a><span>|</span><a href="#41734544">next</a><span>|</span><label class="collapse" for="c-41738456">[-]</label><label class="expand" for="c-41738456">[5 more]</label></div><br/><div class="children"><div class="content">All is fine and dandy and BSDs can solve many use cases. Unfortunately for the solution we are working on, which imply many microservices we need Kubernetes and no BSD equivalent to Kubernetes exists.</div><br/><div id="41739175" class="c"><input type="checkbox" id="c-41739175" checked=""/><div class="controls bullet"><span class="by">kev009</span><span>|</span><a href="#41738456">parent</a><span>|</span><a href="#41738828">next</a><span>|</span><label class="collapse" for="c-41739175">[-]</label><label class="expand" for="c-41739175">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve helped build two top 10 service provider networks (10s of Tbps).  One on FreeBSD, and one on Linux with Kubernetes.<p>I don&#x27;t really see Kubernetes as being a game changer.  The biggest pro, it makes it easier to onboard both development and operations personnel having a quasi-standard for how a lot of things like scheduling and application networking work.<p>But it also seems to come with a magnitude of accidental and ornamental complexity.  I would imply the same about microservices versus, say, figuring out your repository, language, and deployment pipelines to provide a smooth developer and operator experience.  Too much of this industry is fashion and navel gazing instead of thinking about the core problems and standing behind a methodology that works for the business.</div><br/></div></div><div id="41738828" class="c"><input type="checkbox" id="c-41738828" checked=""/><div class="controls bullet"><span class="by">INTPenis</span><span>|</span><a href="#41738456">parent</a><span>|</span><a href="#41739175">prev</a><span>|</span><a href="#41738687">next</a><span>|</span><label class="collapse" for="c-41738828">[-]</label><label class="expand" for="c-41738828">[1 more]</label></div><br/><div class="children"><div class="content">Can&#x27;t you just run k8s on bsd? You might have to build and maintain your own release of it, but I&#x27;m sure someone has done it already.</div><br/></div></div><div id="41738687" class="c"><input type="checkbox" id="c-41738687" checked=""/><div class="controls bullet"><span class="by">roydivision</span><span>|</span><a href="#41738456">parent</a><span>|</span><a href="#41738828">prev</a><span>|</span><a href="#41734544">next</a><span>|</span><label class="collapse" for="c-41738687">[-]</label><label class="expand" for="c-41738687">[2 more]</label></div><br/><div class="children"><div class="content">Same here, otherwise I&#x27;d be considering the BSDs.</div><br/><div id="41738749" class="c"><input type="checkbox" id="c-41738749" checked=""/><div class="controls bullet"><span class="by">draga79</span><span>|</span><a href="#41738456">root</a><span>|</span><a href="#41738687">parent</a><span>|</span><a href="#41734544">next</a><span>|</span><label class="collapse" for="c-41738749">[-]</label><label class="expand" for="c-41738749">[1 more]</label></div><br/><div class="children"><div class="content">Things are improving...stay tuned :-)</div><br/></div></div></div></div></div></div><div id="41734544" class="c"><input type="checkbox" id="c-41734544" checked=""/><div class="controls bullet"><span class="by">Borg3</span><span>|</span><a href="#41738456">prev</a><span>|</span><a href="#41738206">next</a><span>|</span><label class="collapse" for="c-41734544">[-]</label><label class="expand" for="c-41734544">[25 more]</label></div><br/><div class="children"><div class="content">I wish he could write up a bit about XFS failure he had. Im using it from many many years and there is no issues at all.</div><br/><div id="41738690" class="c"><input type="checkbox" id="c-41738690" checked=""/><div class="controls bullet"><span class="by">Tor3</span><span>|</span><a href="#41734544">parent</a><span>|</span><a href="#41736589">next</a><span>|</span><label class="collapse" for="c-41738690">[-]</label><label class="expand" for="c-41738690">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m interested too. I&#x27;m using XFS only, and have for many years. On my own boxes, but my company also uses XFS for all the data on customer computers. We did extensive testing many years back, and XFS was the only filesystem at the time which gave a linear, constantly very high performance when writing and reading huge amounts of data (real-time data, dips in performance is a 100% no-no), and also not degrading when having huge numbers of files. We&#x27;ve <i>never</i> had a customer lose data due to XFS problems, and at this point I can&#x27;t imagine how much data that would be, except that it&#x27;s astronomical.<p>When that&#x27;s said, we had routine XFS losses on SGI boxes. That was a very well known scenario: Write constantly to a one-page text file, say, every few seconds, then power cycle the machine. The file would be empty afterwards.  This doesn&#x27;t happen on Linux, I vaguely recall discussing this with someone some years ago (maybe here on HN) and something was changed at some point, maybe when SGI migrated XFS to Linux, or shortly after.</div><br/></div></div><div id="41736589" class="c"><input type="checkbox" id="c-41736589" checked=""/><div class="controls bullet"><span class="by">lotharcable</span><span>|</span><a href="#41734544">parent</a><span>|</span><a href="#41738690">prev</a><span>|</span><a href="#41735204">next</a><span>|</span><label class="collapse" for="c-41736589">[-]</label><label class="expand" for="c-41736589">[21 more]</label></div><br/><div class="children"><div class="content">It hard to know the timeline with his data loss, but I am assuming it was a long time ago.<p>XFS is originally from SGI Irix and was designed to run on higher end hardware. SGI donated it to Linux in 1999 and it carried a lot of its assumptions over.<p>For example on SGI boxes you had &quot;hardware raid&quot; with cache, which essentially is a sort of embedded computer with it&#x27;s own memory.  That cache had a battery backup so that if the machine had a crash or sudden power loss the hardware raid would live on long enough to finish its writes.  SGI had tight control over the type of hardware you could use and it was usually good quality stuff.<p>In the land of commodity PC-based servers this isn&#x27;t often how it worked.  Instead you just had regular IDE or SATA hard drives. And those drives lied.<p>On cheap hardware the firmware would report back it had finished writes when in fact it didn&#x27;t because it made it seem faster in benchmarks.  And consumers&#x2F;enterprise types looking to save money with Linux mostly bought whatever is the cheapest and fastest looking on benchmarks.<p>So that if there was a hardware failure or sudden  power loss there would could be several megs of writes that were still in flight when the file system thought they were safely written to disk.<p>That meant there was a distinct chance of dataloss when it came to using Linux and XFS early on.<p>I experienced problems like that in early 2000s era Linux XFS.<p>This was always a big benefit to sticking with Ext4.  It is kinda dumb luck that Ext4 is as fast as it is when it came to hosting databases, but the real reason to use it is because it had a lot of robust recovery tools. It was designed from the ground up with the assumption that you were using the cheapest crappiest hardware you can buy (Personal PCs).<p>However modern XFS is a completely different beast.  It has been rewritten extensively and improved massively over what was originally ported over from SGI.<p>It is different enough that a guy&#x27;s experience with it from 2005 or 2010 isn&#x27;t really meaningful.<p>I have zero real technical knowledge on file systems except as a end-user, but from what I understand FreeBSD uses UFS that uses a &quot;WAL&quot; or &quot;write ahead log&quot;.. where it records writes it is going to do before it does it.   I think this is a simpler but more robust solution then the sort of journalling that XFS or Ext4 uses.   The trade off is lower performance.<p>As far as ZFS vs Btrfs... I really like to avoid Btrfs as much as possible.  A number of distros use it by default (OpenSUSE, Fedora, etc), but I just format everything as a single partition as Ext4 or XFS on personal stuff. I use it on my personal file server, but it really simple setup with UPS.   I don&#x27;t use ZFS, but I strongly suspect that btrfs simply failed to rise to its level.<p>One of the reasons Linux persists despite not having something up to the level of ZFS is that most of ZFS features are redundant to larger enterprise customers.<p>They typically use expensive SAN or more advanced NAS that has proprietary storage solutions that provide ZFS-like features long before ZFS was a thing.  So throwing something as complicated as ZFS on top of that really provides no benefit.<p>Or they use one of Linux clustered file system solutions, of which there is a wide selection.</div><br/><div id="41736925" class="c"><input type="checkbox" id="c-41736925" checked=""/><div class="controls bullet"><span class="by">_huayra_</span><span>|</span><a href="#41734544">root</a><span>|</span><a href="#41736589">parent</a><span>|</span><a href="#41738619">next</a><span>|</span><label class="collapse" for="c-41736925">[-]</label><label class="expand" for="c-41736925">[14 more]</label></div><br/><div class="children"><div class="content">Facebook runs their entire stack using Btrfs [0]. I would encourage anyone who is stuck in the &quot;oh btrfs is so buggy and loses data&quot; mindset (not helped by articles like this [1] that play off btrfs as some half-baked contraption, when it&#x27;s really btrfs <i>raid</i> that needs a LOT more time to bake) to look into things and realize that large companies (OpenSuse, Redhat, Faceboook) have poured a lot of time to get it to work well.<p>I don&#x27;t know about it&#x27;s multi-disk story (I do use ZFS for that personally), but for single disk options it is great. You get so many of the ZFS benefits (snapshots, rollback, easily create and delete volumes, etc) with MUCH lower memory usage (at least in my own experiments to try this out).<p>[0] <a href="https:&#x2F;&#x2F;lwn.net&#x2F;Articles&#x2F;824855&#x2F;" rel="nofollow">https:&#x2F;&#x2F;lwn.net&#x2F;Articles&#x2F;824855&#x2F;</a>
[1] <a href="https:&#x2F;&#x2F;arstechnica.com&#x2F;gadgets&#x2F;2021&#x2F;09&#x2F;examining-btrfs-linuxs-perpetually-half-finished-filesystem&#x2F;" rel="nofollow">https:&#x2F;&#x2F;arstechnica.com&#x2F;gadgets&#x2F;2021&#x2F;09&#x2F;examining-btrfs-linu...</a></div><br/><div id="41737905" class="c"><input type="checkbox" id="c-41737905" checked=""/><div class="controls bullet"><span class="by">hi-v-rocknroll</span><span>|</span><a href="#41734544">root</a><span>|</span><a href="#41736925">parent</a><span>|</span><a href="#41737419">next</a><span>|</span><label class="collapse" for="c-41737905">[-]</label><label class="expand" for="c-41737905">[8 more]</label></div><br/><div class="children"><div class="content">Meta does a lot of things that don&#x27;t scale for reliable&#x2F;trustworthy systems and aren&#x27;t suitable for all use-cases. (I also used to work there too.)<p>ZFS is only reliable where it was battled-tested: on Solaris. ZoL has been infinitely tinkered with and smashed up that it&#x27;s nothing like running a Thumper as a NAS.<p>XFS + mdadm on Linux is, without a doubt, far more reliable than ZoL. Ask me how I know. I have the scars to prove it.</div><br/><div id="41738023" class="c"><input type="checkbox" id="c-41738023" checked=""/><div class="controls bullet"><span class="by">Gud</span><span>|</span><a href="#41734544">root</a><span>|</span><a href="#41737905">parent</a><span>|</span><a href="#41738495">next</a><span>|</span><label class="collapse" for="c-41738023">[-]</label><label class="expand" for="c-41738023">[5 more]</label></div><br/><div class="children"><div class="content">ZFS has been plenty battle tested on FreeBSD.</div><br/><div id="41738240" class="c"><input type="checkbox" id="c-41738240" checked=""/><div class="controls bullet"><span class="by">hi-v-rocknroll</span><span>|</span><a href="#41734544">root</a><span>|</span><a href="#41738023">parent</a><span>|</span><a href="#41738495">next</a><span>|</span><label class="collapse" for="c-41738240">[-]</label><label class="expand" for="c-41738240">[4 more]</label></div><br/><div class="children"><div class="content">Not hardly, and not in the way you think. They replaced their arguably purer ZFS port to replace it with ZoL. As such, it&#x27;s nowhere near as tested and proven as existing solutions like ext4 and xfs Redhat has deployed to millions of machines for decades. ZFS has too many religious fanboys who hype it without considering that boring and reliable are less risky than betting on code that hasn&#x27;t had nearly the same scale of enterprise experience.</div><br/><div id="41738523" class="c"><input type="checkbox" id="c-41738523" checked=""/><div class="controls bullet"><span class="by">Gud</span><span>|</span><a href="#41734544">root</a><span>|</span><a href="#41738240">parent</a><span>|</span><a href="#41738495">next</a><span>|</span><label class="collapse" for="c-41738523">[-]</label><label class="expand" for="c-41738523">[3 more]</label></div><br/><div class="children"><div class="content">I am well aware of that change.<p>What specific problems are there with the ZFS implementation on FreeBSD? You claim it is not battle tested, I find it to be rock solid..</div><br/><div id="41738634" class="c"><input type="checkbox" id="c-41738634" checked=""/><div class="controls bullet"><span class="by">kelnos</span><span>|</span><a href="#41734544">root</a><span>|</span><a href="#41738523">parent</a><span>|</span><a href="#41738495">next</a><span>|</span><label class="collapse" for="c-41738634">[-]</label><label class="expand" for="c-41738634">[2 more]</label></div><br/><div class="children"><div class="content">&gt; <i>You claim it is not battle tested, I find it to be rock solid</i><p>Those two things are not mutually exclusive.</div><br/><div id="41739324" class="c"><input type="checkbox" id="c-41739324" checked=""/><div class="controls bullet"><span class="by">Gud</span><span>|</span><a href="#41734544">root</a><span>|</span><a href="#41738634">parent</a><span>|</span><a href="#41738495">next</a><span>|</span><label class="collapse" for="c-41739324">[-]</label><label class="expand" for="c-41739324">[1 more]</label></div><br/><div class="children"><div class="content">Never said they were</div><br/></div></div></div></div></div></div></div></div></div></div><div id="41738495" class="c"><input type="checkbox" id="c-41738495" checked=""/><div class="controls bullet"><span class="by">bsdooby</span><span>|</span><a href="#41734544">root</a><span>|</span><a href="#41737905">parent</a><span>|</span><a href="#41738023">prev</a><span>|</span><a href="#41738341">next</a><span>|</span><label class="collapse" for="c-41738495">[-]</label><label class="expand" for="c-41738495">[1 more]</label></div><br/><div class="children"><div class="content">Did you or other XFS users try out stratis?</div><br/></div></div><div id="41738341" class="c"><input type="checkbox" id="c-41738341" checked=""/><div class="controls bullet"><span class="by">qamononep</span><span>|</span><a href="#41734544">root</a><span>|</span><a href="#41737905">parent</a><span>|</span><a href="#41738495">prev</a><span>|</span><a href="#41737419">next</a><span>|</span><label class="collapse" for="c-41738341">[-]</label><label class="expand" for="c-41738341">[1 more]</label></div><br/><div class="children"><div class="content">tell me your story</div><br/></div></div></div></div><div id="41737419" class="c"><input type="checkbox" id="c-41737419" checked=""/><div class="controls bullet"><span class="by">yjftsjthsd-h</span><span>|</span><a href="#41734544">root</a><span>|</span><a href="#41736925">parent</a><span>|</span><a href="#41737905">prev</a><span>|</span><a href="#41738408">next</a><span>|</span><label class="collapse" for="c-41737419">[-]</label><label class="expand" for="c-41737419">[1 more]</label></div><br/><div class="children"><div class="content">I am stuck in the btrfs-is-buggy mindset precisely because it managed to lose my root partition on a single disk machine. It might also have raid problems, but not exclusively.</div><br/></div></div><div id="41738408" class="c"><input type="checkbox" id="c-41738408" checked=""/><div class="controls bullet"><span class="by">jeroenhd</span><span>|</span><a href="#41734544">root</a><span>|</span><a href="#41736925">parent</a><span>|</span><a href="#41737419">prev</a><span>|</span><a href="#41737703">next</a><span>|</span><label class="collapse" for="c-41738408">[-]</label><label class="expand" for="c-41738408">[1 more]</label></div><br/><div class="children"><div class="content">I use btrfs a lot but I&#x27;m not sure if I&#x27;d use it for production servers. The I&#x2F;O bandwidth is just a lot lower and I get weird latency problems on desktop Linux when BTRFS is very busy that I don&#x27;t get on other file systems. Then again, I probably wouldn&#x27;t use ZFS for anything but a NAS setup either.</div><br/></div></div><div id="41737703" class="c"><input type="checkbox" id="c-41737703" checked=""/><div class="controls bullet"><span class="by">toast0</span><span>|</span><a href="#41734544">root</a><span>|</span><a href="#41736925">parent</a><span>|</span><a href="#41738408">prev</a><span>|</span><a href="#41737077">next</a><span>|</span><label class="collapse" for="c-41737703">[-]</label><label class="expand" for="c-41737703">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Facebook runs their entire stack using Btrfs<p>Yeah, and when I was there machines would run out of disk space at 50% usage and it took months to figure out why. In the mean time, they&#x27;d just reimage the machine and hope. I don&#x27;t recall any issues with data loss, but it didn&#x27;t have the air of reliability.<p>But my team was weird at FB, our uptimes of 45 days were way above the average, and we ran into all sorts of things because we operated outside the norm.</div><br/></div></div><div id="41737077" class="c"><input type="checkbox" id="c-41737077" checked=""/><div class="controls bullet"><span class="by">gaadd33</span><span>|</span><a href="#41734544">root</a><span>|</span><a href="#41736925">parent</a><span>|</span><a href="#41737703">prev</a><span>|</span><a href="#41737219">next</a><span>|</span><label class="collapse" for="c-41737077">[-]</label><label class="expand" for="c-41737077">[1 more]</label></div><br/><div class="children"><div class="content">Is the structure of 800gb btrfs containers mentioned in [0] how user data is stored? Just sharded across billions of containers?</div><br/></div></div><div id="41737219" class="c"><input type="checkbox" id="c-41737219" checked=""/><div class="controls bullet"><span class="by">djbusby</span><span>|</span><a href="#41734544">root</a><span>|</span><a href="#41736925">parent</a><span>|</span><a href="#41737077">prev</a><span>|</span><a href="#41738619">next</a><span>|</span><label class="collapse" for="c-41737219">[-]</label><label class="expand" for="c-41737219">[1 more]</label></div><br/><div class="children"><div class="content">Why is this grey&#x2F;down? Is there something factually incorrect?<p>Edit: it&#x27;s less grey now.</div><br/></div></div></div></div><div id="41738619" class="c"><input type="checkbox" id="c-41738619" checked=""/><div class="controls bullet"><span class="by">jdboyd</span><span>|</span><a href="#41734544">root</a><span>|</span><a href="#41736589">parent</a><span>|</span><a href="#41736925">prev</a><span>|</span><a href="#41737756">next</a><span>|</span><label class="collapse" for="c-41738619">[-]</label><label class="expand" for="c-41738619">[2 more]</label></div><br/><div class="children"><div class="content">&gt; For example on SGI boxes you had &quot;hardware raid&quot; with cache, which essentially is a sort of embedded computer with it&#x27;s own memory. That cache had a battery backup so that if the machine had a crash or sudden power loss the hardware raid would live on long enough to finish its writes. SGI had tight control over the type of hardware you could use and it was usually good quality stuff.<p>Most of the SGI machine I&#x27;ve used of various sizes did not have hardware raid.  In my experience, you were more likely to run into hardware raid on a PC than on  traditional SGI or Sun servers (I don&#x27;t have much experience with AIX or HP-UX), unless the unix server was in a SAN environment.</div><br/><div id="41738728" class="c"><input type="checkbox" id="c-41738728" checked=""/><div class="controls bullet"><span class="by">Tor3</span><span>|</span><a href="#41734544">root</a><span>|</span><a href="#41738619">parent</a><span>|</span><a href="#41737756">next</a><span>|</span><label class="collapse" for="c-41738728">[-]</label><label class="expand" for="c-41738728">[1 more]</label></div><br/><div class="children"><div class="content">Yep. The Octanes and the Challenge servers we used at work didn&#x27;t have hardware raid, and, contrary to grandparent we did have regular issues on SGI with XFS (loss of data after power cycling, always), while we <i>never</i> had that on Linux, which surprised me. After all, it was so easily reproduced (on SGI): Write regularly to a file, power cycle, file empty afterwards. Did that on Linux, everything fine. Every time.  Never ever had losses on Linux. NB: I did <i>not</i> test this immediately after XFS was ported to Linux, it&#x27;s very likely that things were improved on shortly after, before we started testing XFS at work.<p>(As for hardware raid - I didn&#x27;t start to see hardware raid regularly until HP started shipping rackmount servers with Compaq raid hardware, way back. Linux boxes..)</div><br/></div></div></div></div><div id="41737756" class="c"><input type="checkbox" id="c-41737756" checked=""/><div class="controls bullet"><span class="by">toast0</span><span>|</span><a href="#41734544">root</a><span>|</span><a href="#41736589">parent</a><span>|</span><a href="#41738619">prev</a><span>|</span><a href="#41737825">next</a><span>|</span><label class="collapse" for="c-41737756">[-]</label><label class="expand" for="c-41737756">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I understand FreeBSD uses UFS that uses a &quot;WAL&quot; or &quot;write ahead log&quot;.. where it records writes it is going to do before it does it.<p>I think you&#x27;re describing UFS soft-updates? I think that&#x27;s more or less for meta data updates, not data data. It&#x27;s been a while since I reviewed it, but it gets you nice things like snapshots and background fsck so after an unclean restart your system can get back to work immediately and clean up behind the scenes. There is some sort of journalling that&#x27;s fairly new, but my experience from 10 years ago was soft-updates and background fsck just worked; and if you wanted better, ZFS was probably what you want, if you can afford copy on write.</div><br/></div></div><div id="41737825" class="c"><input type="checkbox" id="c-41737825" checked=""/><div class="controls bullet"><span class="by">shrubble</span><span>|</span><a href="#41734544">root</a><span>|</span><a href="#41736589">parent</a><span>|</span><a href="#41737756">prev</a><span>|</span><a href="#41735204">next</a><span>|</span><label class="collapse" for="c-41737825">[-]</label><label class="expand" for="c-41737825">[3 more]</label></div><br/><div class="children"><div class="content">&quot;One of the reasons Linux persists despite not having something up to the level of ZFS is that most of ZFS features are redundant to larger enterprise customers.&quot;<p>ZFS is used heavily on Linux and runs well, though there are some limitations which are being addressed over time in the OpenZFS project.  It is used across all areas that Linux serves, whether laptop, desktop, home server all the way to enterprise.  <a href="https:&#x2F;&#x2F;openzfs.org&#x2F;wiki&#x2F;Main_Page" rel="nofollow">https:&#x2F;&#x2F;openzfs.org&#x2F;wiki&#x2F;Main_Page</a></div><br/><div id="41737922" class="c"><input type="checkbox" id="c-41737922" checked=""/><div class="controls bullet"><span class="by">jsiepkes</span><span>|</span><a href="#41734544">root</a><span>|</span><a href="#41737825">parent</a><span>|</span><a href="#41735204">next</a><span>|</span><label class="collapse" for="c-41737922">[-]</label><label class="expand" for="c-41737922">[2 more]</label></div><br/><div class="children"><div class="content">ZFS on Linux is not really usable for most users because every kernel update can break your ZFS compatibility.<p>Meaning unless you want to put in the time to manually test every kernel update and ensure your kernel version stays in-sync with OpenZFS you can very likely end up with an unbootable system.</div><br/><div id="41738133" class="c"><input type="checkbox" id="c-41738133" checked=""/><div class="controls bullet"><span class="by">binkHN</span><span>|</span><a href="#41734544">root</a><span>|</span><a href="#41737922">parent</a><span>|</span><a href="#41735204">next</a><span>|</span><label class="collapse" for="c-41738133">[-]</label><label class="expand" for="c-41738133">[1 more]</label></div><br/><div class="children"><div class="content">This is one of the main reasons Void Linux is &quot;stuck&quot; on kernel 6.6.</div><br/></div></div></div></div></div></div></div></div><div id="41735204" class="c"><input type="checkbox" id="c-41735204" checked=""/><div class="controls bullet"><span class="by">blipvert</span><span>|</span><a href="#41734544">parent</a><span>|</span><a href="#41736589">prev</a><span>|</span><a href="#41735728">next</a><span>|</span><label class="collapse" for="c-41735204">[-]</label><label class="expand" for="c-41735204">[1 more]</label></div><br/><div class="children"><div class="content">Used it since the late 90s on IRIX, think there were a few issues early on with the endian swap, but no issues for the best part of twenty years for me!</div><br/></div></div><div id="41735728" class="c"><input type="checkbox" id="c-41735728" checked=""/><div class="controls bullet"><span class="by">hggigg</span><span>|</span><a href="#41734544">parent</a><span>|</span><a href="#41735204">prev</a><span>|</span><a href="#41738206">next</a><span>|</span><label class="collapse" for="c-41735728">[-]</label><label class="expand" for="c-41735728">[1 more]</label></div><br/><div class="children"><div class="content">I had one a few years back where we ran out of inodes on a Jenkins machine on CentOS 7 and it crashed and couldn’t remount the filesystem. I had to restore a backup which was time consuming on a 4TB volume with crazy amounts of files.</div><br/></div></div></div></div><div id="41738206" class="c"><input type="checkbox" id="c-41738206" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#41734544">prev</a><span>|</span><a href="#41737814">next</a><span>|</span><label class="collapse" for="c-41738206">[-]</label><label class="expand" for="c-41738206">[1 more]</label></div><br/><div class="children"><div class="content">Fidonet, it was been a while since I saw that.</div><br/></div></div><div id="41737814" class="c"><input type="checkbox" id="c-41737814" checked=""/><div class="controls bullet"><span class="by">kopirgan</span><span>|</span><a href="#41738206">prev</a><span>|</span><a href="#41737779">next</a><span>|</span><label class="collapse" for="c-41737814">[-]</label><label class="expand" for="c-41737814">[10 more]</label></div><br/><div class="children"><div class="content">One of the website providers I use (Pair) for 20+ years used to be exclusively FreeBSD. I believe they use a lot of Linux now. Not sure why.</div><br/><div id="41737889" class="c"><input type="checkbox" id="c-41737889" checked=""/><div class="controls bullet"><span class="by">pilingual</span><span>|</span><a href="#41737814">parent</a><span>|</span><a href="#41737886">next</a><span>|</span><label class="collapse" for="c-41737889">[-]</label><label class="expand" for="c-41737889">[8 more]</label></div><br/><div class="children"><div class="content">Ah, pair. Reminds me of this gem:<p><a href="http:&#x2F;&#x2F;www.archub.org&#x2F;ycoutage.txt" rel="nofollow">http:&#x2F;&#x2F;www.archub.org&#x2F;ycoutage.txt</a></div><br/><div id="41737947" class="c"><input type="checkbox" id="c-41737947" checked=""/><div class="controls bullet"><span class="by">mmooss</span><span>|</span><a href="#41737814">root</a><span>|</span><a href="#41737889">parent</a><span>|</span><a href="#41738234">next</a><span>|</span><label class="collapse" for="c-41737947">[-]</label><label class="expand" for="c-41737947">[6 more]</label></div><br/><div class="children"><div class="content">Seems reasonable to me:<p><i>... This site and this directory were
driving up server load averages, which causes instability for all users on
this server. Our block on this site appears to have blocked over 150,000
connections in about half an hour. This is simply more than is appropriate
for a shared server.<p>You may want to review your domain&#x27;s traffic logs to see what kind of
traffic this site is getting. The logs for today will be distributed at
midnight EST tonight. If the traffic to this site is legitimate, you
should look into a dedicated or a virtual private server. If the traffic
is not legitimate, you should block it. I can provide assistance with that
if you need it.<p>This domain and this directory will need to be disabled until traffic dies
down, traffic is blocked, or your account is upgraded from shared hosting.
If you need access to the directory so that you can make any necessary
changes, please let me know.</i></div><br/><div id="41738090" class="c"><input type="checkbox" id="c-41738090" checked=""/><div class="controls bullet"><span class="by">inopinatus</span><span>|</span><a href="#41737814">root</a><span>|</span><a href="#41737947">parent</a><span>|</span><a href="#41738665">next</a><span>|</span><label class="collapse" for="c-41738090">[-]</label><label class="expand" for="c-41738090">[3 more]</label></div><br/><div class="children"><div class="content">Sure, it&#x27;s reasonable, if your desired outcome is to lose a customer by<p>a) demonstrating a lack of burst or headroom capacity and&#x2F;or graceful degradation&#x2F;priority scheduling capability, and<p>b) being a dick about it.<p>Alternatively one may intervene with a positive approach and framing viz. &quot;we have temporarily [provisioned additional capacity &#x2F; relocated your storage to another spindle &#x2F; mirrored your content to a less congested host &#x2F; etc] in order to handle your traffic, can we call you tomorrow to move you to a service plan that can handle your growth&quot;. Even just throttling the account in some appropriate fashion would&#x27;ve been better than the blunt &quot;we dropped you like a hot potato&quot; that was actually communicated. This was in 2010, by which time any ISP that wasn&#x27;t operating as amateur hour had the tools for all these things.</div><br/><div id="41738542" class="c"><input type="checkbox" id="c-41738542" checked=""/><div class="controls bullet"><span class="by">taskforcegemini</span><span>|</span><a href="#41737814">root</a><span>|</span><a href="#41738090">parent</a><span>|</span><a href="#41738359">next</a><span>|</span><label class="collapse" for="c-41738542">[-]</label><label class="expand" for="c-41738542">[1 more]</label></div><br/><div class="children"><div class="content">depends on what product&#x2F;service plan they had. a 5$ per month is not worth jumping through the hoops, because usually an individual solution is needed, but this doesn&#x27;t scale. if the site is important to the owner, they need a more fitting service plan with higher headroom.
that being said, a good provider at least tries to filter out what could be a (d)dos</div><br/></div></div><div id="41738359" class="c"><input type="checkbox" id="c-41738359" checked=""/><div class="controls bullet"><span class="by">ajb</span><span>|</span><a href="#41737814">root</a><span>|</span><a href="#41738090">parent</a><span>|</span><a href="#41738542">prev</a><span>|</span><a href="#41738665">next</a><span>|</span><label class="collapse" for="c-41738359">[-]</label><label class="expand" for="c-41738359">[1 more]</label></div><br/><div class="children"><div class="content">In many industries it&#x27;s standard practice to cause pain to one customer to avoid causing pain to all of them. If you&#x27;ve ever had work done on your house, a small guy who overruns will often bail out on your job ( and reschedule) rather than slip all the other customers he had lined up. so I can see why this guy decided to disable a directory rather than all the other customers in the server have slow service<p>The issue is that the economics are different: a roofer doesn&#x27;t earn more by doing one big job than 4 small ones in the same time. But a big user is a better economic prospect to a service provider than the small ones. That&#x27;s why this was clearly a dumb move</div><br/></div></div></div></div><div id="41738665" class="c"><input type="checkbox" id="c-41738665" checked=""/><div class="controls bullet"><span class="by">kelnos</span><span>|</span><a href="#41737814">root</a><span>|</span><a href="#41737947">parent</a><span>|</span><a href="#41738090">prev</a><span>|</span><a href="#41738114">next</a><span>|</span><label class="collapse" for="c-41738665">[-]</label><label class="expand" for="c-41738665">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s not even remotely reasonable.<p>They should have been monitoring load and notified the customer <i>before</i> it got to the point that they were worried about stability.<p>Shutting down a customer&#x27;s site without warning when you could have notified them of a problem in the near future... well, that&#x27;s a great way to lose a customer.  I really hope YC promptly moved to another provider after that incident.</div><br/></div></div></div></div><div id="41738234" class="c"><input type="checkbox" id="c-41738234" checked=""/><div class="controls bullet"><span class="by">kopirgan</span><span>|</span><a href="#41737814">root</a><span>|</span><a href="#41737889">parent</a><span>|</span><a href="#41737947">prev</a><span>|</span><a href="#41737886">next</a><span>|</span><label class="collapse" for="c-41738234">[-]</label><label class="expand" for="c-41738234">[1 more]</label></div><br/><div class="children"><div class="content">If this was their first and only mail on that yeah it&#x27;s not the best way to handle. But then my sites don&#x27;t generate anywhere near the traffic as YC even YC of 2010</div><br/></div></div></div></div><div id="41737886" class="c"><input type="checkbox" id="c-41737886" checked=""/><div class="controls bullet"><span class="by">hi-v-rocknroll</span><span>|</span><a href="#41737814">parent</a><span>|</span><a href="#41737889">prev</a><span>|</span><a href="#41737779">next</a><span>|</span><label class="collapse" for="c-41737886">[-]</label><label class="expand" for="c-41737886">[1 more]</label></div><br/><div class="children"><div class="content">I used them for shared personal website hosting until the Obama era when they were mostly&#x2F;all FreeBSD. I moved off around the time AWS came about.</div><br/></div></div></div></div><div id="41737779" class="c"><input type="checkbox" id="c-41737779" checked=""/><div class="controls bullet"><span class="by">rstuart4133</span><span>|</span><a href="#41737814">prev</a><span>|</span><a href="#41735370">next</a><span>|</span><label class="collapse" for="c-41737779">[-]</label><label class="expand" for="c-41737779">[8 more]</label></div><br/><div class="children"><div class="content">All I can say is experiences differ.  I&#x27;m a long time Debian user, and now use FreeBSD for work.  Both are far better than the proprietary competition, but I&#x27;d take Debian&#x2F;Linux over FreeBSD when building a random server.<p>To give but one example, I recently reported a bug when FreeBSD didn&#x27;t boot after upgrade from 13 to 14.  Worse the disk format was somehow altered so when the reboot tried to boot off 13 due to zfs bootonce flag (supposedly a failsafe), it refused to boot for the same reason.  I believe it&#x27;s due to a race condition in geom&#x2F;cam.   The same symptoms were reported 6 years ago, but the bug report has seen no activity.  Making your system irrecoverable without a rescue image and console access strikes me as pretty serious.  He waxes lyrical about zfs, but it&#x27;s slower and more resource hungry than it&#x27;s simpler competition and it&#x27;s not difficult to find numerous serious zfs bug reports over the years.  (But not slower than FreeBSD&#x27;s UFS, oddly.  It&#x27;s impressively slow.)  Another thing that sticks in my mind is a core zfs contributor saying it&#x27;s encryption support should never have been merged.<p>This sounds too disparaging because the simplicity and size of FreeBSD has its own charms, but the &quot;it&#x27;s all sunshine and roses&quot; picture he paints doesn&#x27;t ring true to me.  While it&#x27;s probably fair to say stable versions of FreeBSD are better than the Linux kernels from kernel.org, and possibly Fedora and Ubuntu, they definitely trail behind the standard Debian stable releases.<p>Comparing FreeBSD to Debian makes throws up some interesting tradeoffs.  On the one hand, FreeBSD&#x27;s init system is a delight compared to systemd.  Sure, systemd can do far, far more.  But that added complexity makes for a steep learning curve and a lot of weird and difficult to debug problems, and as FreeBSD&#x27;s drop dead simple &#x2F;etc&#x2F;rc.conf system proves most of the time the complexity isn&#x27;t needed to get the job done.  FreeBSD&#x27;s jails just make more intuitive sense to me than Linux&#x27;s equivalent which is built on control groups.   FreeBSD&#x27;s source is a joy to read compared to most I&#x27;ve seen elsewhere.  I don&#x27;t know who&#x27;s responsible for that - but they deserve a medal.<p>On the downside - what were they thinking when they came up with the naming scheme under &#x2F;dev for block devices?  (Who thought withering device names was a good idea, so that &#x2F;dev no longer reflects the state of attached hardware?)  And a piece of free advice - just copy how Linux has does it&#x27;s booting.  Loading a kernel + initramfs is both simpler and far more flexible then the FreeBSD loader scheme.  Hell, it&#x27;s so flexible you can replace a BIOS with it.<p>The combination of the best parts Linux and the BSD&#x27;s would make for an wonderful world.  But having a healthy selection of choices is probably more important, and yes - I agree with him that if you are building an appliance that has an OS embedded in it, the simplicity of FreeBSD does give it an edge.</div><br/><div id="41739124" class="c"><input type="checkbox" id="c-41739124" checked=""/><div class="controls bullet"><span class="by">kev009</span><span>|</span><a href="#41737779">parent</a><span>|</span><a href="#41738143">next</a><span>|</span><label class="collapse" for="c-41739124">[-]</label><label class="expand" for="c-41739124">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;chimera-linux.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;chimera-linux.org&#x2F;</a> is kind of that melding, at least so far as one can go with a vanilla kernel.</div><br/></div></div><div id="41738143" class="c"><input type="checkbox" id="c-41738143" checked=""/><div class="controls bullet"><span class="by">binkHN</span><span>|</span><a href="#41737779">parent</a><span>|</span><a href="#41739124">prev</a><span>|</span><a href="#41735370">next</a><span>|</span><label class="collapse" for="c-41738143">[-]</label><label class="expand" for="c-41738143">[6 more]</label></div><br/><div class="children"><div class="content">There is more than one Linux distribution that&#x27;s designed to work without systemd.</div><br/><div id="41738453" class="c"><input type="checkbox" id="c-41738453" checked=""/><div class="controls bullet"><span class="by">globular-toast</span><span>|</span><a href="#41737779">root</a><span>|</span><a href="#41738143">parent</a><span>|</span><a href="#41735370">next</a><span>|</span><label class="collapse" for="c-41738453">[-]</label><label class="expand" for="c-41738453">[5 more]</label></div><br/><div class="children"><div class="content">Notably Gentoo. Any others?</div><br/><div id="41739176" class="c"><input type="checkbox" id="c-41739176" checked=""/><div class="controls bullet"><span class="by">Tor3</span><span>|</span><a href="#41737779">root</a><span>|</span><a href="#41738453">parent</a><span>|</span><a href="#41738867">next</a><span>|</span><label class="collapse" for="c-41739176">[-]</label><label class="expand" for="c-41739176">[1 more]</label></div><br/><div class="children"><div class="content">Devuan, which is basically Debian without systemd.</div><br/></div></div><div id="41738867" class="c"><input type="checkbox" id="c-41738867" checked=""/><div class="controls bullet"><span class="by">PhilipRoman</span><span>|</span><a href="#41737779">root</a><span>|</span><a href="#41738453">parent</a><span>|</span><a href="#41739176">prev</a><span>|</span><a href="#41738956">next</a><span>|</span><label class="collapse" for="c-41738867">[-]</label><label class="expand" for="c-41738867">[1 more]</label></div><br/><div class="children"><div class="content">Alpine, Artix</div><br/></div></div><div id="41738956" class="c"><input type="checkbox" id="c-41738956" checked=""/><div class="controls bullet"><span class="by">Rediscover</span><span>|</span><a href="#41737779">root</a><span>|</span><a href="#41738453">parent</a><span>|</span><a href="#41738867">prev</a><span>|</span><a href="#41738757">next</a><span>|</span><label class="collapse" for="c-41738956">[-]</label><label class="expand" for="c-41738956">[1 more]</label></div><br/><div class="children"><div class="content">Slackware.  It has always had a bit of *BSD flavoring in it, too.</div><br/></div></div><div id="41738757" class="c"><input type="checkbox" id="c-41738757" checked=""/><div class="controls bullet"><span class="by">ffujdefvjg</span><span>|</span><a href="#41737779">root</a><span>|</span><a href="#41738453">parent</a><span>|</span><a href="#41738956">prev</a><span>|</span><a href="#41735370">next</a><span>|</span><label class="collapse" for="c-41738757">[-]</label><label class="expand" for="c-41738757">[1 more]</label></div><br/><div class="children"><div class="content">Void is pretty cool.</div><br/></div></div></div></div></div></div></div></div><div id="41735370" class="c"><input type="checkbox" id="c-41735370" checked=""/><div class="controls bullet"><span class="by">vfclists</span><span>|</span><a href="#41737779">prev</a><span>|</span><a href="#41735538">next</a><span>|</span><label class="collapse" for="c-41735370">[-]</label><label class="expand" for="c-41735370">[5 more]</label></div><br/><div class="children"><div class="content">&gt; “If nothing is working, what am I paying you for? If everything’s working, what am I paying you for?”<p>Bloke is not acquainted with Keynesian economics.<p><a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=9OhIdDNtSv0" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=9OhIdDNtSv0</a><p><a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=NO_tTnpof_o" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=NO_tTnpof_o</a><p>All a man needs is food in his stomach and a place to rest at the end of the day. Everything else is vanity<p>What proportion of global GDP is dedicated to fulfilling our basic material needs?<p>It is mostly unnecessary. Inspite of the huge productivity gains made since the seventies, the current generation of young Americans are poorer than their parents and grandparents were at their age.<p>So what does all the IT optimization bring? Just more wealth for the owners and redundancies for their employees, including Joe Bloggs here.<p>It is time people in IT got to understand this. In the long term their activities are not going to improve their wealth. They are one of the few professions whose job is to optimize themselves out of a living, unless they own the means of the production their are optimizing, which they don&#x27;t.<p>It is their employers that do.</div><br/><div id="41738673" class="c"><input type="checkbox" id="c-41738673" checked=""/><div class="controls bullet"><span class="by">consp</span><span>|</span><a href="#41735370">parent</a><span>|</span><a href="#41738128">next</a><span>|</span><label class="collapse" for="c-41738673">[-]</label><label class="expand" for="c-41738673">[1 more]</label></div><br/><div class="children"><div class="content">The problem with the IT crowd is they think they are ahead of the optimization curve, and since everyone does, nobody is.</div><br/></div></div><div id="41738128" class="c"><input type="checkbox" id="c-41738128" checked=""/><div class="controls bullet"><span class="by">jdbernard</span><span>|</span><a href="#41735370">parent</a><span>|</span><a href="#41738673">prev</a><span>|</span><a href="#41735538">next</a><span>|</span><label class="collapse" for="c-41738128">[-]</label><label class="expand" for="c-41738128">[3 more]</label></div><br/><div class="children"><div class="content">&gt; I would work for myself, following my own philosophy.<p>Sounds like he understood it just fine. He owns the means of production.</div><br/><div id="41738244" class="c"><input type="checkbox" id="c-41738244" checked=""/><div class="controls bullet"><span class="by">vfclists</span><span>|</span><a href="#41735370">root</a><span>|</span><a href="#41738128">parent</a><span>|</span><a href="#41735538">next</a><span>|</span><label class="collapse" for="c-41738244">[-]</label><label class="expand" for="c-41738244">[2 more]</label></div><br/><div class="children"><div class="content">He only works for himself only if he gets a steady income stream so long as the systems he manages stay up, which I&#x27;m sure he doesn&#x27;t.<p>There is a reason for the &quot;you will own nothing and you will be happy&quot; ideology being promoted by &quot;PTB&quot;, ie subscriptions for ink cartridges, heated seats and advanced suspensions in newer cars.<p>Corporations now want a continuous income stream from the services provide by physical products they have &quot;sold&quot;, but they don&#x27;t want their employees and subcontractors from earning some of that income stream.<p>Some IT administrators have been know to schedule regular &quot;downtimes&quot; on perfectly performing systems just to ensure their users and bosses don&#x27;t take their service for granted.</div><br/><div id="41739252" class="c"><input type="checkbox" id="c-41739252" checked=""/><div class="controls bullet"><span class="by">Tor3</span><span>|</span><a href="#41735370">root</a><span>|</span><a href="#41738244">parent</a><span>|</span><a href="#41735538">next</a><span>|</span><label class="collapse" for="c-41739252">[-]</label><label class="expand" for="c-41739252">[1 more]</label></div><br/><div class="children"><div class="content">I <i>have</i> kind of scratched my head a bit as to why our local VM provider has all these scheduled downtimes.. while the servers we run in-house have those maybe once or twice a year, at most. Hm..</div><br/></div></div></div></div></div></div></div></div><div id="41733878" class="c"><input type="checkbox" id="c-41733878" checked=""/><div class="controls bullet"><span class="by">froh</span><span>|</span><a href="#41735538">prev</a><span>|</span><a href="#41737390">next</a><span>|</span><label class="collapse" for="c-41733878">[-]</label><label class="expand" for="c-41733878">[2 more]</label></div><br/><div class="children"><div class="content">the title of the talk is &quot;Why (and how) we’re migrating many of our servers from Linux to the BSDs&quot;<p>and that should be the title of this post too.<p>I like that the blog post shares the slides, not just the video.</div><br/><div id="41737732" class="c"><input type="checkbox" id="c-41737732" checked=""/><div class="controls bullet"><span class="by">dang</span><span>|</span><a href="#41733878">parent</a><span>|</span><a href="#41737390">next</a><span>|</span><label class="collapse" for="c-41737732">[-]</label><label class="expand" for="c-41737732">[1 more]</label></div><br/><div class="children"><div class="content">Ok, done. Thanks!</div><br/></div></div></div></div><div id="41736723" class="c"><input type="checkbox" id="c-41736723" checked=""/><div class="controls bullet"><span class="by">cyberax</span><span>|</span><a href="#41736856">prev</a><span>|</span><label class="collapse" for="c-41736723">[-]</label><label class="expand" for="c-41736723">[12 more]</label></div><br/><div class="children"><div class="content">[flagged]</div><br/><div id="41738702" class="c"><input type="checkbox" id="c-41738702" checked=""/><div class="controls bullet"><span class="by">draga79</span><span>|</span><a href="#41736723">parent</a><span>|</span><a href="#41736814">next</a><span>|</span><label class="collapse" for="c-41738702">[-]</label><label class="expand" for="c-41738702">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve a contract with those clients, and I can move the VMs, change the services, etc. freely as long as it doesn&#x27;t cost more than the amount we&#x27;ve previously set.<p>Otherwise, I&#x27;d never dare to do something like that.<p>And I&#x27;m not so crazy as to do such an operation without the appropriate tests and foundations. Of course, when I started, I had all the conditions to be able to do it, and I had already conducted all possible tests. :-)</div><br/></div></div><div id="41736814" class="c"><input type="checkbox" id="c-41736814" checked=""/><div class="controls bullet"><span class="by">codezero</span><span>|</span><a href="#41736723">parent</a><span>|</span><a href="#41738702">prev</a><span>|</span><label class="collapse" for="c-41736814">[-]</label><label class="expand" for="c-41736814">[10 more]</label></div><br/><div class="children"><div class="content">The client is paying for the VM. The underlying system is an abstraction. As long as service agreements weren’t interrupted I don’t see the problem. It sounds shady to say “without telling them,” because saying so implies they should have. I do a lot of optimizations for my customers without telling them, it’s not usually worth mentioning. I assume what they intended to convey was that this change caused no interruption of service so there was no need to contact or warn the customer.</div><br/><div id="41737010" class="c"><input type="checkbox" id="c-41737010" checked=""/><div class="controls bullet"><span class="by">kiwijamo</span><span>|</span><a href="#41736723">root</a><span>|</span><a href="#41736814">parent</a><span>|</span><a href="#41737256">next</a><span>|</span><label class="collapse" for="c-41737010">[-]</label><label class="expand" for="c-41737010">[4 more]</label></div><br/><div class="children"><div class="content">This is similar to AWS S3 object storage -- AWS has over the years changed how they store their S3 data -- however as long as the API responds the same way every time it&#x27;s all good. Personally I would probably do some A&#x2F;B testing -- migrate half the workload and compare A to B to see if the new system is performing better before migrating the other half.</div><br/><div id="41737266" class="c"><input type="checkbox" id="c-41737266" checked=""/><div class="controls bullet"><span class="by">cyberax</span><span>|</span><a href="#41736723">root</a><span>|</span><a href="#41737010">parent</a><span>|</span><a href="#41737256">next</a><span>|</span><label class="collapse" for="c-41737266">[-]</label><label class="expand" for="c-41737266">[3 more]</label></div><br/><div class="children"><div class="content">No, it&#x27;s not. S3 has a very well defined API with easily measureable performance parameters. So AWS updates can make sure they don&#x27;t make things worse.<p>This is not possible with a client&#x27;s workload unless you can actually test it. That&#x27;s why AWS will warn you multiple times if they need to migrate your EC2 instance onto a different hardware node. Even if it is technically &quot;better&quot;.<p>Of course, the fact that clients trust their workloads to this guy probably means that there was nothing important there.</div><br/><div id="41737509" class="c"><input type="checkbox" id="c-41737509" checked=""/><div class="controls bullet"><span class="by">hedora</span><span>|</span><a href="#41736723">root</a><span>|</span><a href="#41737266">parent</a><span>|</span><a href="#41737256">next</a><span>|</span><label class="collapse" for="c-41737509">[-]</label><label class="expand" for="c-41737509">[2 more]</label></div><br/><div class="children"><div class="content">The author also converted some of these VMs to jails, so I assume they have root on the VMs (and the customers want them to admin the host).  That means they should be able to see the application level performance metrics.</div><br/><div id="41738145" class="c"><input type="checkbox" id="c-41738145" checked=""/><div class="controls bullet"><span class="by">cyberax</span><span>|</span><a href="#41736723">root</a><span>|</span><a href="#41737509">parent</a><span>|</span><a href="#41737256">next</a><span>|</span><label class="collapse" for="c-41738145">[-]</label><label class="expand" for="c-41738145">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, so he got surprised when his customer mentioned how their workloads became faster.</div><br/></div></div></div></div></div></div></div></div><div id="41737256" class="c"><input type="checkbox" id="c-41737256" checked=""/><div class="controls bullet"><span class="by">cyberax</span><span>|</span><a href="#41736723">root</a><span>|</span><a href="#41736814">parent</a><span>|</span><a href="#41737010">prev</a><span>|</span><a href="#41736826">next</a><span>|</span><label class="collapse" for="c-41737256">[-]</label><label class="expand" for="c-41737256">[4 more]</label></div><br/><div class="children"><div class="content">&gt; The client is paying for the VM. The underlying system is an abstraction.<p>The VM change was sufficient enough to alter the runtime of a task by several times. This is NOT a small inconsequential change.<p>You _have_ to warn your clients when you do stuff like this.</div><br/><div id="41737499" class="c"><input type="checkbox" id="c-41737499" checked=""/><div class="controls bullet"><span class="by">hedora</span><span>|</span><a href="#41736723">root</a><span>|</span><a href="#41737256">parent</a><span>|</span><a href="#41736826">next</a><span>|</span><label class="collapse" for="c-41737499">[-]</label><label class="expand" for="c-41737499">[3 more]</label></div><br/><div class="children"><div class="content">The workload got several times faster.  The customer’s only concern was that they might be accidentally running on a more expensive instance.<p>In every system I’ve worked on, the agreement is in terms of an SLO.  We never gave our customers any sort of expectation (or guarantee) that we wouldn’t suddenly wildly beat our SLO targets (and, in fact, we often did, due to routine upgrades).<p>Having said that, certain customers dictate production freezes during launches, or only want to run stuff that’s been baked in production elsewhere for 3-6 months.  Upgrading those customers behind their backs would be unacceptable, especially because they pay extra for a crappier but more stable setup.</div><br/><div id="41738135" class="c"><input type="checkbox" id="c-41738135" checked=""/><div class="controls bullet"><span class="by">cyberax</span><span>|</span><a href="#41736723">root</a><span>|</span><a href="#41737499">parent</a><span>|</span><a href="#41737698">next</a><span>|</span><label class="collapse" for="c-41738135">[-]</label><label class="expand" for="c-41738135">[1 more]</label></div><br/><div class="children"><div class="content">&gt; The workload got several times faster.<p>And he found it out only by talking to the customer, indicating approximately zero testing from his side.<p>It might have gone the other way easily.</div><br/></div></div><div id="41737698" class="c"><input type="checkbox" id="c-41737698" checked=""/><div class="controls bullet"><span class="by">tbrownaw</span><span>|</span><a href="#41736723">root</a><span>|</span><a href="#41737499">parent</a><span>|</span><a href="#41738135">prev</a><span>|</span><a href="#41736826">next</a><span>|</span><label class="collapse" for="c-41737698">[-]</label><label class="expand" for="c-41737698">[1 more]</label></div><br/><div class="children"><div class="content">If your customer panics at you over something you did, you might have done goofed.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>