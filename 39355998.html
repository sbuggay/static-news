<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1707901257900" as="style"/><link rel="stylesheet" href="styles.css?v=1707901257900"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/kubetail-org/kubetail">Show HN: Kubetail – Web-based real-time log viewer for Kubernetes</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>andres</span> | <span>26 comments</span></div><br/><div><div id="39361825" class="c"><input type="checkbox" id="c-39361825" checked=""/><div class="controls bullet"><span class="by">akhenakh</span><span>|</span><a href="#39365269">next</a><span>|</span><label class="collapse" for="c-39361825">[-]</label><label class="expand" for="c-39361825">[4 more]</label></div><br/><div class="children"><div class="content">There is an existing project named kubetail, which is quite popular 3.2K starts <a href="https:&#x2F;&#x2F;github.com&#x2F;johanhaleby&#x2F;kubetail">https:&#x2F;&#x2F;github.com&#x2F;johanhaleby&#x2F;kubetail</a></div><br/><div id="39362090" class="c"><input type="checkbox" id="c-39362090" checked=""/><div class="controls bullet"><span class="by">andres</span><span>|</span><a href="#39361825">parent</a><span>|</span><a href="#39365269">next</a><span>|</span><label class="collapse" for="c-39362090">[-]</label><label class="expand" for="c-39362090">[3 more]</label></div><br/><div class="children"><div class="content">That project is a bash script to tail Kubernetes logs from multiple pods at the same time. The name collision is a bummer. I found out about it a while after I bought the domain names (kubetail.com, kubetail.dev, etc.), got the social handles and invested a lot of time into coding and branding. If this project is successful and the naming is confusing for users we&#x27;ll figure out a solution, if not then it&#x27;s moot.</div><br/><div id="39362686" class="c"><input type="checkbox" id="c-39362686" checked=""/><div class="controls bullet"><span class="by">protomikron</span><span>|</span><a href="#39361825">root</a><span>|</span><a href="#39362090">parent</a><span>|</span><a href="#39365269">next</a><span>|</span><label class="collapse" for="c-39362686">[-]</label><label class="expand" for="c-39362686">[2 more]</label></div><br/><div class="children"><div class="content">&gt; That project is a bash script to tail Kubernetes logs from multiple pods at the same time.<p>Which is also cool! You&#x27;re obviously both inspired by Unix `tail`. I wonder if we will get a POSIX&#x2F;Linux layer on top of Kubernetes ... where pods&#x2F;services somehow map to processes&#x2F;systemd etc. ;)</div><br/></div></div></div></div></div></div><div id="39365269" class="c"><input type="checkbox" id="c-39365269" checked=""/><div class="controls bullet"><span class="by">remram</span><span>|</span><a href="#39361825">prev</a><span>|</span><a href="#39361857">next</a><span>|</span><label class="collapse" for="c-39365269">[-]</label><label class="expand" for="c-39365269">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t know, at that point I think I&#x27;d rather use an actual log aggregation system like Loki or Kibana. That way I can search, including on pods that are now gone.<p>The niche between &quot;easy to get but single-container and no search&quot; on one side and &quot;install with helm but search all containers including historical with full-text and metrics&quot; on the other... seems like a tiny niche to me.<p>edit: oh you need to install Kubetail cluster-wide too. At least no DaemonSet I guess.</div><br/></div></div><div id="39361857" class="c"><input type="checkbox" id="c-39361857" checked=""/><div class="controls bullet"><span class="by">swozey</span><span>|</span><a href="#39365269">prev</a><span>|</span><a href="#39367116">next</a><span>|</span><label class="collapse" for="c-39361857">[-]</label><label class="expand" for="c-39361857">[4 more]</label></div><br/><div class="children"><div class="content">This is really nice. I usually use stern for logs ON a cluster but to aggregate all of the logs we usually use something like fluentd to elasticsearch, which when seeing something like this is super complex for what we usually use it for but it does of course let you search everything.</div><br/><div id="39361990" class="c"><input type="checkbox" id="c-39361990" checked=""/><div class="controls bullet"><span class="by">andres</span><span>|</span><a href="#39361857">parent</a><span>|</span><a href="#39363204">next</a><span>|</span><label class="collapse" for="c-39361990">[-]</label><label class="expand" for="c-39361990">[1 more]</label></div><br/><div class="children"><div class="content">Thanks! Kubetail is super lightweight and requires zero maintenance so hopefully you can use it for some of your real-time logging needs. Let me know if you have any feature requests.</div><br/></div></div><div id="39363204" class="c"><input type="checkbox" id="c-39363204" checked=""/><div class="controls bullet"><span class="by">mass_and_energy</span><span>|</span><a href="#39361857">parent</a><span>|</span><a href="#39361990">prev</a><span>|</span><a href="#39367116">next</a><span>|</span><label class="collapse" for="c-39363204">[-]</label><label class="expand" for="c-39363204">[2 more]</label></div><br/><div class="children"><div class="content">Ah yes the ol EFK stack, I almost miss carefully tuning my shard balancing to get the most outta my cluster</div><br/><div id="39367382" class="c"><input type="checkbox" id="c-39367382" checked=""/><div class="controls bullet"><span class="by">raffraffraff</span><span>|</span><a href="#39361857">root</a><span>|</span><a href="#39363204">parent</a><span>|</span><a href="#39367116">next</a><span>|</span><label class="collapse" for="c-39367382">[-]</label><label class="expand" for="c-39367382">[1 more]</label></div><br/><div class="children"><div class="content">Or your can use something like managed opensearch and pay with your soul &#x2F; first born!</div><br/></div></div></div></div></div></div><div id="39367116" class="c"><input type="checkbox" id="c-39367116" checked=""/><div class="controls bullet"><span class="by">smcleod</span><span>|</span><a href="#39361857">prev</a><span>|</span><a href="#39364024">next</a><span>|</span><label class="collapse" for="c-39367116">[-]</label><label class="expand" for="c-39367116">[2 more]</label></div><br/><div class="children"><div class="content">Nice, needs a screenshot in the readme.</div><br/><div id="39367371" class="c"><input type="checkbox" id="c-39367371" checked=""/><div class="controls bullet"><span class="by">andres</span><span>|</span><a href="#39367116">parent</a><span>|</span><a href="#39364024">next</a><span>|</span><label class="collapse" for="c-39367371">[-]</label><label class="expand" for="c-39367371">[1 more]</label></div><br/><div class="children"><div class="content">Thanks, just added one <a href="https:&#x2F;&#x2F;github.com&#x2F;kubetail-org&#x2F;kubetail">https:&#x2F;&#x2F;github.com&#x2F;kubetail-org&#x2F;kubetail</a></div><br/></div></div></div></div><div id="39364024" class="c"><input type="checkbox" id="c-39364024" checked=""/><div class="controls bullet"><span class="by">piterrro</span><span>|</span><a href="#39367116">prev</a><span>|</span><a href="#39364360">next</a><span>|</span><label class="collapse" for="c-39364024">[-]</label><label class="expand" for="c-39364024">[2 more]</label></div><br/><div class="children"><div class="content">Congrats on the launch, nice project! I recently launched <a href="https:&#x2F;&#x2F;logdy.dev" rel="nofollow">https:&#x2F;&#x2F;logdy.dev</a> (OSS: <a href="https:&#x2F;&#x2F;github.com&#x2F;logdyhq&#x2F;logdy-core">https:&#x2F;&#x2F;github.com&#x2F;logdyhq&#x2F;logdy-core</a>) which attempts to address the problem but in a more wide space: any kind of process stdout -&gt; web UI. You can run it with k8s (kubectl logs -f). I&#x27;m actually writing a blog post about it as we speak and will definitely mention kubetail as well. Ofc, your project addresses the problem more specifically, I just thought to mention Logdy in case somebody is looking for a swiss-knife solution for all kinds of logs.</div><br/><div id="39364362" class="c"><input type="checkbox" id="c-39364362" checked=""/><div class="controls bullet"><span class="by">andres</span><span>|</span><a href="#39364024">parent</a><span>|</span><a href="#39364360">next</a><span>|</span><label class="collapse" for="c-39364362">[-]</label><label class="expand" for="c-39364362">[1 more]</label></div><br/><div class="children"><div class="content">Looks interesting! It&#x27;s like tail -f on steroids.</div><br/></div></div></div></div><div id="39364360" class="c"><input type="checkbox" id="c-39364360" checked=""/><div class="controls bullet"><span class="by">flashgordon</span><span>|</span><a href="#39364024">prev</a><span>|</span><a href="#39361406">next</a><span>|</span><label class="collapse" for="c-39364360">[-]</label><label class="expand" for="c-39364360">[1 more]</label></div><br/><div class="children"><div class="content">Wow what a small world.  I&#x27;ve been looking to build a tool EXACTLY like this (even after seeing Johan&#x27;s kubetail project) but kept thinking it was too obvious that somebody must have already built it or kXs ecosystem already has something like this and I was just too noob to find it!   Only diff - my fe was going to be htmx :).   Kudos.<p>I suppose it is never too late :)</div><br/></div></div><div id="39361406" class="c"><input type="checkbox" id="c-39361406" checked=""/><div class="controls bullet"><span class="by">smock</span><span>|</span><a href="#39364360">prev</a><span>|</span><a href="#39362229">next</a><span>|</span><label class="collapse" for="c-39361406">[-]</label><label class="expand" for="c-39361406">[2 more]</label></div><br/><div class="children"><div class="content">How is privacy enforced?  Are you planning on maintaining this:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;kubetail-org&#x2F;kubetail">https:&#x2F;&#x2F;github.com&#x2F;kubetail-org&#x2F;kubetail</a><p>as an open source repo?</div><br/><div id="39361681" class="c"><input type="checkbox" id="c-39361681" checked=""/><div class="controls bullet"><span class="by">andres</span><span>|</span><a href="#39361406">parent</a><span>|</span><a href="#39362229">next</a><span>|</span><label class="collapse" for="c-39361681">[-]</label><label class="expand" for="c-39361681">[1 more]</label></div><br/><div class="children"><div class="content">Kubetail runs in your cluster and uses the cluster’s own Kubernetes API to retrieve logs so the data never leaves your possession. Yes! Kubetail will always be open source. I think it’s important for users to know exactly what code is running inside their clusters especially if they’re granting it access to their private data.</div><br/></div></div></div></div><div id="39362229" class="c"><input type="checkbox" id="c-39362229" checked=""/><div class="controls bullet"><span class="by">hobofan</span><span>|</span><a href="#39361406">prev</a><span>|</span><a href="#39367229">next</a><span>|</span><label class="collapse" for="c-39362229">[-]</label><label class="expand" for="c-39362229">[2 more]</label></div><br/><div class="children"><div class="content">Demo worked fine until I added the kubetail-demo pod as a source, which crashed my browser tab. Copying the same URL into a new tab loaded the page but stuck in &quot;Loading logs&quot; until it also crashed the tab.</div><br/><div id="39363075" class="c"><input type="checkbox" id="c-39363075" checked=""/><div class="controls bullet"><span class="by">andres</span><span>|</span><a href="#39362229">parent</a><span>|</span><a href="#39367229">next</a><span>|</span><label class="collapse" for="c-39363075">[-]</label><label class="expand" for="c-39363075">[1 more]</label></div><br/><div class="children"><div class="content">Sorry about that! It&#x27;s fixed now. Currently, kubetail displays the entire log history by default which can cause the frontend to hang if there&#x27;s a lot of data. In the case of the kubetail-demo pod, there were a lot of messages from a user continuously retrying to make a websocket connection and the quantity of those messages crashed your tab. I&#x27;ve disabled logging for the app instance so viewing those pod logs won&#x27;t crash your browser again. Upgrading the kubetail frontend so it can handle more data is next up on the to-do list.</div><br/></div></div></div></div><div id="39367229" class="c"><input type="checkbox" id="c-39367229" checked=""/><div class="controls bullet"><span class="by">cryptonector</span><span>|</span><a href="#39362229">prev</a><span>|</span><a href="#39362098">next</a><span>|</span><label class="collapse" for="c-39367229">[-]</label><label class="expand" for="c-39367229">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve written a [proprietary, though I have permission to open source it] `tailfhttpd`, which is a tiny, trivial HTTP&#x2F;1.1 server that supports only `HEAD`s and `GET`s of regular files, but with a twist:<p><pre><code>  - it supports `ETag`s, with ETags derived from
    a file&#x27;s st_dev, st_ino, and inode generation
    number
  - it supports setting *some* response headers via
    xattrs (e.g., ETag, Content-Type, Vary,
    Cache-Control, etc.)
  - it supports conditional requests (i.e.,
    `If-Match:`, `If-None-Match:`,
    `If-Modified-Since:`)
  - it supports `Range:` requests
  - for `Range: bytes=${offset}-` `GET`s
    the response does not finish (i.e.,
    final chunk is not sent) until one of
     - the file is unlinked
     - the file is renamed
     - the server is terminated
    using inotify to find out about file
    unlinks&#x2F;renames
</code></pre>
It does this using `epoll`, `inotify`, and `sendfile()`, with multiple fully-evented, async-I&#x2F;O-using processes, each process being single-threaded.  It is written in C in continuation passing style (CPS) with tiny continuations, so its memory footprint per client is also tiny.  As a result it is blazingly fast, though it needs to be fronted with a reverse proxy for HTTPS (e.g., Nginx, Envoy, ...), sadly, but maybe I could teach it to use kssl.<p>I use it for tailing logs remotely, naturally, and as a poor man&#x27;s Kafka.  Between regular file byte offsets, ETags, and conditional requests one can build a reliable event publication system with this `tailfhttpd`.  For example, and event stream can name the next instance ({local-part, ETag}) then be renamed out of the way to end in-progress `GET`s, and clients can resume from the new file.<p>With a few changes it could &quot;tail&quot; (watch) directories, and even allow `POST`ing events (which could be done by writing to a pipe the reader of which routes events to files that get served by `tailfhttpd`).<p>Because `tailfhttpd` just serves files, and because of the ETag thing, conditional requests, and xattrs, it&#x27;s very easy to build more complex systems on top of it -- even shell scripts will suffice.<p>This chunked-encoding, &quot;hanging-GET&quot; thing is so unreasonably effective and cheap that I&#x27;m surprised how few systems support it.<p>I&#x27;ve visions of rewriting it in Rust and supporting H2 and especially H3&#x2F;QUIC to reduce the per-client load (think of TCP TCBs and buffers) even more, and using io_uring instead of epoll for even better performance.<p>Oh, and this approach is fully standards-compliant.  It&#x27;s just a chunked-encoding, indefinite-end (&quot;hanging&quot;) GET with all the relevant (but optional) behaviors (ETags, conditional requests, range requests, even the right end of the byte-range being left unspecified is within spec!).</div><br/></div></div><div id="39362098" class="c"><input type="checkbox" id="c-39362098" checked=""/><div class="controls bullet"><span class="by">distracteddev90</span><span>|</span><a href="#39367229">prev</a><span>|</span><a href="#39365298">next</a><span>|</span><label class="collapse" for="c-39362098">[-]</label><label class="expand" for="c-39362098">[2 more]</label></div><br/><div class="children"><div class="content">Does this work well when set up to use my local machine and my personal credentials?</div><br/><div id="39362113" class="c"><input type="checkbox" id="c-39362113" checked=""/><div class="controls bullet"><span class="by">andres</span><span>|</span><a href="#39362098">parent</a><span>|</span><a href="#39365298">next</a><span>|</span><label class="collapse" for="c-39362113">[-]</label><label class="expand" for="c-39362113">[1 more]</label></div><br/><div class="children"><div class="content">Can you give me more details? Do you want to run kubetail locally but pull logs from your cluster remotely? Yes, this is possible.</div><br/></div></div></div></div><div id="39365298" class="c"><input type="checkbox" id="c-39365298" checked=""/><div class="controls bullet"><span class="by">arcza</span><span>|</span><a href="#39362098">prev</a><span>|</span><a href="#39364505">next</a><span>|</span><label class="collapse" for="c-39365298">[-]</label><label class="expand" for="c-39365298">[1 more]</label></div><br/><div class="children"><div class="content">Nice job</div><br/></div></div><div id="39364505" class="c"><input type="checkbox" id="c-39364505" checked=""/><div class="controls bullet"><span class="by">nodesocket</span><span>|</span><a href="#39365298">prev</a><span>|</span><label class="collapse" for="c-39364505">[-]</label><label class="expand" for="c-39364505">[3 more]</label></div><br/><div class="children"><div class="content">Awesome project. I run a Kubernetes cluster on my homelab on 4x Raspberry Pi 4 Bs. Gonna set this up tonight.<p>I believe there is no persistence, or does it cache in local storage or anything on the client? Would be awesome to have that option for client side storage for perhaps 24 hours.</div><br/><div id="39364792" class="c"><input type="checkbox" id="c-39364792" checked=""/><div class="controls bullet"><span class="by">andres</span><span>|</span><a href="#39364505">parent</a><span>|</span><label class="collapse" for="c-39364792">[-]</label><label class="expand" for="c-39364792">[2 more]</label></div><br/><div class="children"><div class="content">Awesome! I&#x27;m excited to hear how it goes. If you have any feedback please send me an email (andres@kubetail.com).<p>Currently, there&#x27;s no persistence. I&#x27;ll think about how to enable client-side.</div><br/><div id="39364884" class="c"><input type="checkbox" id="c-39364884" checked=""/><div class="controls bullet"><span class="by">nodesocket</span><span>|</span><a href="#39364505">root</a><span>|</span><a href="#39364792">parent</a><span>|</span><label class="collapse" for="c-39364884">[-]</label><label class="expand" for="c-39364884">[1 more]</label></div><br/><div class="children"><div class="content">Will reach out, gonna try to use the Helm chart.<p>Take a look at using the more performant and powerful IndexedDB instead of local storage.<p><a href="https:&#x2F;&#x2F;rxdb.info&#x2F;articles&#x2F;localstorage.html#" rel="nofollow">https:&#x2F;&#x2F;rxdb.info&#x2F;articles&#x2F;localstorage.html#</a></div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>