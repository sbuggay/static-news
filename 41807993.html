<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1728896464040" as="style"/><link rel="stylesheet" href="styles.css?v=1728896464040"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://lisyarus.github.io/blog/posts/transforming-colors-with-matrices.html">Transforming Colors with Matrices</a>Â <span class="domain">(<a href="https://lisyarus.github.io">lisyarus.github.io</a>)</span></div><div class="subtext"><span>ibobev</span> | <span>5 comments</span></div><br/><div><div id="41835581" class="c"><input type="checkbox" id="c-41835581" checked=""/><div class="controls bullet"><span class="by">woolion</span><span>|</span><a href="#41833584">next</a><span>|</span><label class="collapse" for="c-41835581">[-]</label><label class="expand" for="c-41835581">[1 more]</label></div><br/><div class="children"><div class="content">You can use matrix multiplications through the CLI with Imagemagick, and it works pretty well. The only caveat is that intermediary number precision is low, so if you need multiple operations (like convert to one space, transform, convert back) you need to pre-compute the resulting matrix and apply that in one operation. It works well if you have only a definite number of transforms.<p>For example, the article &quot;Computerized simulation of color appearance for dichromats&quot; gives the matrix transforms to simulate &quot;color-blindness&quot;. This gives this command:<p>`convert $input -color-matrix &#x27;0.11238 0.88759 0 0.11238 0.88762 0 0.004 -0.004 1&#x27; $input_dichrom.jpg`<p>With which one can quickly check if a map or graph would be readable by a color-blind person.</div><br/></div></div><div id="41833584" class="c"><input type="checkbox" id="c-41833584" checked=""/><div class="controls bullet"><span class="by">zeroq</span><span>|</span><a href="#41835581">prev</a><span>|</span><a href="#41835351">next</a><span>|</span><label class="collapse" for="c-41833584">[-]</label><label class="expand" for="c-41833584">[1 more]</label></div><br/><div class="children"><div class="content">When I started working with Flash and learned about color and transformation matrices I was blown away by how clever it is.<p>At a surface level you may think that having to use advanced mathemathics to change something as trivial as position or adding a tint might be an overkill. But matrix math isn&#x27;t that complicated, been highly optimized and can be relegated to the CPU since forever.<p>The most illustrative use would be a model of a 3D tank.
You want the whole tank to turn itself 30 degrees to the left, now you want the turret to turn 40 degrees right and you want the gun to be facing 20 degrees upwards. With matrices being applied on every level it&#x27;s dead simple to calculate what&#x27;s the actual bearing of the gun in world coordinates.<p>Same applies to graphics. You have a game character that&#x27;s been hit. You want to  make it flash to indicate the hit by changing it&#x27;s brightness, but at the same time you want to turn it&#x27;s eyes to red by adding a tint. Oh, and the whole screen is changing it&#x27;s saturation during the process. Again, by using matrices, it&#x27;s really easy to figure out what&#x27;s the color of the eyes at any given moment of the animation thanks to matrices.</div><br/></div></div><div id="41835351" class="c"><input type="checkbox" id="c-41835351" checked=""/><div class="controls bullet"><span class="by">kevingadd</span><span>|</span><a href="#41833584">prev</a><span>|</span><a href="#41833477">next</a><span>|</span><label class="collapse" for="c-41835351">[-]</label><label class="expand" for="c-41835351">[1 more]</label></div><br/><div class="children"><div class="content">For hue operations you could always apply the matrix in okhsl space and then convert back, at least.</div><br/></div></div><div id="41833477" class="c"><input type="checkbox" id="c-41833477" checked=""/><div class="controls bullet"><span class="by">Retr0id</span><span>|</span><a href="#41835351">prev</a><span>|</span><label class="collapse" for="c-41833477">[-]</label><label class="expand" for="c-41833477">[1 more]</label></div><br/><div class="children"><div class="content">See also: Matrix Operations for Image Processing, Paul Haeberli, 1993<p><a href="https:&#x2F;&#x2F;graficaobscura.com&#x2F;matrix&#x2F;" rel="nofollow">https:&#x2F;&#x2F;graficaobscura.com&#x2F;matrix&#x2F;</a></div><br/></div></div></div></div></div></div></div></body></html>