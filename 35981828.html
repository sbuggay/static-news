<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1684486857597" as="style"/><link rel="stylesheet" href="styles.css?v=1684486857597"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://cgsql.dev/">Code Generator for SQLite</a> <span class="domain">(<a href="https://cgsql.dev">cgsql.dev</a>)</span></div><div class="subtext"><span>luu</span> | <span>13 comments</span></div><br/><div><div id="35999367" class="c"><input type="checkbox" id="c-35999367" checked=""/><div class="controls bullet"><span class="by">noduerme</span><span>|</span><a href="#35998821">next</a><span>|</span><label class="collapse" for="c-35999367">[-]</label><label class="expand" for="c-35999367">[1 more]</label></div><br/><div class="children"><div class="content">Watching a video pointing to other videos of how this query generator works is probably a lot like using it to generate queries.<p>Wish I could bill time for youtubing but I&#x27;m busy writing schema and queries I fully understand.</div><br/></div></div><div id="35998821" class="c"><input type="checkbox" id="c-35998821" checked=""/><div class="controls bullet"><span class="by">mingodad</span><span>|</span><a href="#35999367">prev</a><span>|</span><a href="#35996658">next</a><span>|</span><label class="collapse" for="c-35998821">[-]</label><label class="expand" for="c-35998821">[1 more]</label></div><br/><div class="children"><div class="content">You can also try it online here <a href="https:&#x2F;&#x2F;mingodad.github.io&#x2F;CG-SQL-Lua-playground&#x2F;" rel="nofollow">https:&#x2F;&#x2F;mingodad.github.io&#x2F;CG-SQL-Lua-playground&#x2F;</a> using the Lua language.</div><br/></div></div><div id="35996658" class="c"><input type="checkbox" id="c-35996658" checked=""/><div class="controls bullet"><span class="by">jitl</span><span>|</span><a href="#35998821">prev</a><span>|</span><a href="#35996354">next</a><span>|</span><label class="collapse" for="c-35996658">[-]</label><label class="expand" for="c-35996658">[1 more]</label></div><br/><div class="children"><div class="content">This seems like offshoot tech from the Facebook messenger rewrite that claimed to lower as much as possible to the database for cross-platform sharing - <a href="https:&#x2F;&#x2F;engineering.fb.com&#x2F;2020&#x2F;03&#x2F;02&#x2F;data-infrastructure&#x2F;messenger&#x2F;" rel="nofollow">https:&#x2F;&#x2F;engineering.fb.com&#x2F;2020&#x2F;03&#x2F;02&#x2F;data-infrastructure&#x2F;me...</a><p>The proposed architecture seems cool, until you realize that instead of writing the languages your mobile devs know, instead you end up writing a lot of C (or generating a lot of C) to be cross platform, and the overlap of C developers and mobile &#x2F; consumer-oriented developers in Silicon Valley is quite slim. I heard through the grapevine that the success of that rewrite was greatly overstated and it turned into a pain quite quickly.<p>All that said, <i>I</i> have a cross-platform app using SQLite… and I’m okay with C… maybe I can con the mobile team at my company into using this to ensure more job security?</div><br/></div></div><div id="35996354" class="c"><input type="checkbox" id="c-35996354" checked=""/><div class="controls bullet"><span class="by">password4321</span><span>|</span><a href="#35996658">prev</a><span>|</span><a href="#35998934">next</a><span>|</span><label class="collapse" for="c-35996354">[-]</label><label class="expand" for="c-35996354">[1 more]</label></div><br/><div class="children"><div class="content">&gt; <i>write stored procedures in a variant of Transact-SQL (T-SQL) and compile them into C code that uses SQLite’s C API</i><p>MIT C from Facebook</div><br/></div></div><div id="35998934" class="c"><input type="checkbox" id="c-35998934" checked=""/><div class="controls bullet"><span class="by">baq</span><span>|</span><a href="#35996354">prev</a><span>|</span><a href="#35997628">next</a><span>|</span><label class="collapse" for="c-35998934">[-]</label><label class="expand" for="c-35998934">[1 more]</label></div><br/><div class="children"><div class="content">Looks like this is similar to what Cython is for Python?</div><br/></div></div><div id="35997628" class="c"><input type="checkbox" id="c-35997628" checked=""/><div class="controls bullet"><span class="by">givemeethekeys</span><span>|</span><a href="#35998934">prev</a><span>|</span><a href="#35998286">next</a><span>|</span><label class="collapse" for="c-35997628">[-]</label><label class="expand" for="c-35997628">[3 more]</label></div><br/><div class="children"><div class="content">Man, in that video, she said &quot;easy&quot; or &quot;simple&quot;, but shit sounded complicated real fast.</div><br/><div id="35999065" class="c"><input type="checkbox" id="c-35999065" checked=""/><div class="controls bullet"><span class="by">rowanG077</span><span>|</span><a href="#35997628">parent</a><span>|</span><a href="#35997794">next</a><span>|</span><label class="collapse" for="c-35999065">[-]</label><label class="expand" for="c-35999065">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, it&#x27;s the curse of expertise. Unfortunately after a certain point of expertise it becomes hard to get a feeling what for what is easy or hard for understand for laymen. I remember a professor complaining that every year the exam questions he thought were easy were often the questions his students got wrong, while the exam questions he thought were hard were the ones his students got right.</div><br/></div></div><div id="35997794" class="c"><input type="checkbox" id="c-35997794" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#35997628">parent</a><span>|</span><a href="#35999065">prev</a><span>|</span><a href="#35998286">next</a><span>|</span><label class="collapse" for="c-35997794">[-]</label><label class="expand" for="c-35997794">[1 more]</label></div><br/><div class="children"><div class="content">Bizarre how people do that.</div><br/></div></div></div></div><div id="35998286" class="c"><input type="checkbox" id="c-35998286" checked=""/><div class="controls bullet"><span class="by">SPBS</span><span>|</span><a href="#35997628">prev</a><span>|</span><a href="#35998645">next</a><span>|</span><label class="collapse" for="c-35998286">[-]</label><label class="expand" for="c-35998286">[1 more]</label></div><br/><div class="children"><div class="content">So this variant of T-SQL runs as fast as C right?</div><br/></div></div><div id="35996922" class="c"><input type="checkbox" id="c-35996922" checked=""/><div class="controls bullet"><span class="by">jbandela1</span><span>|</span><a href="#35998645">prev</a><span>|</span><label class="collapse" for="c-35996922">[-]</label><label class="expand" for="c-35996922">[2 more]</label></div><br/><div class="children"><div class="content">&gt;The generated code always checks the various return codes and always uses the correct column ordinals and column types when binding or reading data to or from the SQLite system — areas that are notoriously difficult to get right and keep right.<p>If you care mostly about this part, and are using C++20, you can use meta programming to accomplish this with some annotations of your SQL statements, and avoid code generators and separate syntax.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;google&#x2F;cpp-from-the-sky-down&#x2F;blob&#x2F;master&#x2F;cpp20_sql&#x2F;example.cpp">https:&#x2F;&#x2F;github.com&#x2F;google&#x2F;cpp-from-the-sky-down&#x2F;blob&#x2F;master&#x2F;...</a><p><pre><code>        ftsd::prepared_statement&lt;
                &quot;INSERT INTO orders(item , customerid , price, discount_code ) &quot;
                &quot;VALUES (?&#x2F;*:item:text*&#x2F;, ?&#x2F;*:customerid:integer*&#x2F;, ?&#x2F;*:price:real*&#x2F;, &quot;
                &quot;?&#x2F;*:discount_code:text?*&#x2F; );&quot;  &#x2F;&#x2F;
        &gt;
                insert_order{sqldb};

        insert_order.execute({bind&lt;&quot;item&quot;&gt;(&quot;Phone&quot;), bind&lt;&quot;price&quot;&gt;(1444.44),
        bind&lt;&quot;customerid&quot;&gt;(customer_id)});
        insert_order.execute({bind&lt;&quot;item&quot;&gt;(&quot;Laptop&quot;), bind&lt;&quot;price&quot;&gt;(1300.44),
        bind&lt;&quot;customerid&quot;&gt;(customer_id)});
        insert_order.execute({bind&lt;&quot;customerid&quot;&gt;(customer_id), bind&lt;&quot;price&quot;&gt;(2000),
                bind&lt;&quot;item&quot;&gt;(&quot;MacBook&quot;),
                ftsd::bind&lt;&quot;discount_code&quot;&gt;(&quot;BIGSALE&quot;)});
 </code></pre>
You can bind the parameters in any order, as long as the names are correct. If you don&#x27;t bind any non-optional parameters or have the incorrect type, you will get a compile time error.<p>My talk going over how to implement this: <a href="https:&#x2F;&#x2F;youtu.be&#x2F;1AYrd9iLQCw" rel="nofollow">https:&#x2F;&#x2F;youtu.be&#x2F;1AYrd9iLQCw</a></div><br/><div id="35999379" class="c"><input type="checkbox" id="c-35999379" checked=""/><div class="controls bullet"><span class="by">noduerme</span><span>|</span><a href="#35996922">parent</a><span>|</span><label class="collapse" for="c-35999379">[-]</label><label class="expand" for="c-35999379">[1 more]</label></div><br/><div class="children"><div class="content">who in their right mind would trust this shit on a production database?</div><br/></div></div></div></div></div></div></div></div></div></body></html>