<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1729760475229" as="style"/><link rel="stylesheet" href="styles.css?v=1729760475229"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://blog.cloudflare.com/intro-access-for-infrastructure-ssh/">Fearless SSH: Short-lived certificates bring Zero Trust to infrastructure</a> <span class="domain">(<a href="https://blog.cloudflare.com">blog.cloudflare.com</a>)</span></div><div class="subtext"><span>mfrw</span> | <span>94 comments</span></div><br/><div><div id="41929995" class="c"><input type="checkbox" id="c-41929995" checked=""/><div class="controls bullet"><span class="by">edelbitter</span><span>|</span><a href="#41929494">next</a><span>|</span><label class="collapse" for="c-41929995">[-]</label><label class="expand" for="c-41929995">[12 more]</label></div><br/><div class="children"><div class="content">Why does the title say &quot;Zero Trust&quot;, when the article explains that this only works as long as every involved component of the Cloudflare MitM keylogger and its CA can be trusted?
If hosts keys are worthless because you do not know in advance what key the proxy will have.. than this scheme is back to trusting servers merely because they are in Cloudflare address space, no?</div><br/><div id="41931363" class="c"><input type="checkbox" id="c-41931363" checked=""/><div class="controls bullet"><span class="by">hedora</span><span>|</span><a href="#41929995">parent</a><span>|</span><a href="#41933470">next</a><span>|</span><label class="collapse" for="c-41931363">[-]</label><label class="expand" for="c-41931363">[2 more]</label></div><br/><div class="children"><div class="content">Every zero trust architecture ends up trusting an unbounded set of machines.  Like most marketing terms, it’s probably easier to assume it does the inverse of what it claims.<p>My mental model:<p>With 1 trust (the default) any trusted machine with credentials is provided access and therefore gets one unit of access.  With 2-trust, we’d need at least units of trust, so two machines.  Equivalently, each credential-bearing machine is half trusted (think ssh bastion hosts or 2FA &#x2F; mobikeys for 2 trust).<p>This generalizes to 1&#x2F;N, so for zero trust, we place 1&#x2F;0 = infinite units of trust in every machine that has a credential.  In other words, if we provision any one machine for access, we necessarily provision an unbounded number of other machines for the same level of access.<p>As snarky as this math is, I’ve yet to see a more accurate formulation of what zero trust architectures actually provide.<p>YMmV.</div><br/><div id="41932193" class="c"><input type="checkbox" id="c-41932193" checked=""/><div class="controls bullet"><span class="by">choeger</span><span>|</span><a href="#41929995">root</a><span>|</span><a href="#41931363">parent</a><span>|</span><a href="#41933470">next</a><span>|</span><label class="collapse" for="c-41932193">[-]</label><label class="expand" for="c-41932193">[1 more]</label></div><br/><div class="children"><div class="content">I think your model is absolutely right. But there&#x27;s a catch: Zero Trust (TM) is about not giving any machine any particular kind of access. So it&#x27;s an infinite amount of machines with zero access.<p>The point of Zero Trust (TM) is to authenticate and authorize the <i>human</i> being behind the machine, not the machine itself.<p>(Clearly, that doesn&#x27;t work for all kinds of automated access and it comes with a lot of question in terms of implementation details (E.g., do we trust the 2FA device?) but that&#x27;s the gist.)</div><br/></div></div></div></div><div id="41933470" class="c"><input type="checkbox" id="c-41933470" checked=""/><div class="controls bullet"><span class="by">fs111</span><span>|</span><a href="#41929995">parent</a><span>|</span><a href="#41931363">prev</a><span>|</span><a href="#41930622">next</a><span>|</span><label class="collapse" for="c-41933470">[-]</label><label class="expand" for="c-41933470">[1 more]</label></div><br/><div class="children"><div class="content">Zero Trust is a marketing label that executives can seek out and buy a thing for because it is super-hot thing to have these days. That&#x27;s mostly it.</div><br/></div></div><div id="41930622" class="c"><input type="checkbox" id="c-41930622" checked=""/><div class="controls bullet"><span class="by">varenc</span><span>|</span><a href="#41929995">parent</a><span>|</span><a href="#41933470">prev</a><span>|</span><a href="#41932315">next</a><span>|</span><label class="collapse" for="c-41930622">[-]</label><label class="expand" for="c-41930622">[5 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;www.cloudflare.com&#x2F;learning&#x2F;security&#x2F;glossary&#x2F;what-is-zero-trust&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.cloudflare.com&#x2F;learning&#x2F;security&#x2F;glossary&#x2F;what-i...</a><p>Zero Trust just means you stop inherently trusting your private network and verify every user&#x2F;device&#x2F;request regardless. If you opt in to using Cloudflare to do this then it requires running Cloudflare software.</div><br/><div id="41930801" class="c"><input type="checkbox" id="c-41930801" checked=""/><div class="controls bullet"><span class="by">PLG88</span><span>|</span><a href="#41929995">root</a><span>|</span><a href="#41930622">parent</a><span>|</span><a href="#41930684">next</a><span>|</span><label class="collapse" for="c-41930801">[-]</label><label class="expand" for="c-41930801">[2 more]</label></div><br/><div class="children"><div class="content">Thats one interpretation... ZT also posits assuming the network is compromised and hostile, that also applies to CF and their cloud&#x2F;network. It blows my mind that so many solutions claim ZT while mandating TLS to their infra&#x2F;cloud, you can trust their decryption of your date, and worst IMHO, they will MITM your OICD&#x2F;SAML key to ensure the endpoint can authenticate and access services... that is a hell of a lot of implicit trust in them, not least of them being served a court order to decrypt your data.<p>Zero trust done correctly done not have those same drawbacks.</div><br/><div id="41931034" class="c"><input type="checkbox" id="c-41931034" checked=""/><div class="controls bullet"><span class="by">sshine</span><span>|</span><a href="#41929995">root</a><span>|</span><a href="#41930801">parent</a><span>|</span><a href="#41930684">next</a><span>|</span><label class="collapse" for="c-41931034">[-]</label><label class="expand" for="c-41931034">[1 more]</label></div><br/><div class="children"><div class="content">One element is buzzword inflation, and another is raising the bar.<p>On the one hand, entirely trusting Cloudflare isn&#x27;t really zero trust.<p>On the other hand, not trusting any network is one narrow definition.<p>I&#x27;ll give you SSH keys when you pry them from my cold, dead FDE SSDs.</div><br/></div></div></div></div><div id="41930684" class="c"><input type="checkbox" id="c-41930684" checked=""/><div class="controls bullet"><span class="by">bdd8f1df777b</span><span>|</span><a href="#41929995">root</a><span>|</span><a href="#41930622">parent</a><span>|</span><a href="#41930801">prev</a><span>|</span><a href="#41932315">next</a><span>|</span><label class="collapse" for="c-41930684">[-]</label><label class="expand" for="c-41930684">[2 more]</label></div><br/><div class="children"><div class="content">But with public key auth I&#x27;m already distrusting everyone on my private network.</div><br/><div id="41930789" class="c"><input type="checkbox" id="c-41930789" checked=""/><div class="controls bullet"><span class="by">resoluteteeth</span><span>|</span><a href="#41929995">root</a><span>|</span><a href="#41930684">parent</a><span>|</span><a href="#41932315">next</a><span>|</span><label class="collapse" for="c-41930789">[-]</label><label class="expand" for="c-41930789">[1 more]</label></div><br/><div class="children"><div class="content">Technically I guess that&#x27;s &quot;zero trust&quot; in the sense of meeting the requirement of not trusting internal connections more than external ones, but in practice I guess &quot;zero trust&quot; also typically entails making every connection go through the same user-based authentication system, which uploading specific keys to specific servers manually definitely doesn&#x27;t achieve.</div><br/></div></div></div></div></div></div><div id="41932315" class="c"><input type="checkbox" id="c-41932315" checked=""/><div class="controls bullet"><span class="by">ozim</span><span>|</span><a href="#41929995">parent</a><span>|</span><a href="#41930622">prev</a><span>|</span><a href="#41930201">next</a><span>|</span><label class="collapse" for="c-41932315">[-]</label><label class="expand" for="c-41932315">[1 more]</label></div><br/><div class="children"><div class="content">“Zero Trust” is not assuming user has access or he is somehow trusted just because he is in trusted context. So you always check users access rights.<p>TLS having trusted CA cert publisher is not context of “Zero Trust”.</div><br/></div></div></div></div><div id="41929494" class="c"><input type="checkbox" id="c-41929494" checked=""/><div class="controls bullet"><span class="by">mdaniel</span><span>|</span><a href="#41929995">prev</a><span>|</span><a href="#41930267">next</a><span>|</span><label class="collapse" for="c-41929494">[-]</label><label class="expand" for="c-41929494">[35 more]</label></div><br/><div class="children"><div class="content">I really enjoyed my time with Vault&#x27;s ssh-ca (back when it had a sane license) but have now grown up and believe that <i>any</i> ssh access is an antipattern. For context, I&#x27;m also one of those &quot;immutable OS or GTFO&quot; chaps because in my experience the next thing that happens after some rando ssh-es into a machine is they launch vi or apt-get or whatever and <i>now</i> it&#x27;s a snowflake with zero auditing of the actions taken to it<p>I don&#x27;t mean to detract from this, because short-lived creds are always better, but for my money I hope I never have sshd running on any machine again</div><br/><div id="41931890" class="c"><input type="checkbox" id="c-41931890" checked=""/><div class="controls bullet"><span class="by">akira2501</span><span>|</span><a href="#41929494">parent</a><span>|</span><a href="#41931158">next</a><span>|</span><label class="collapse" for="c-41931890">[-]</label><label class="expand" for="c-41931890">[1 more]</label></div><br/><div class="children"><div class="content">&gt; any ssh access is an antipattern.<p>Not generally.  In one particular class of deployments allowing ssh access to root enabled accounts without auditing may be..  but this is an exceptionally narrowed definition.<p>&gt; I hope I never have sshd running on any machine again<p>Sounds great for production and ridiculous for development and testing.</div><br/></div></div><div id="41931158" class="c"><input type="checkbox" id="c-41931158" checked=""/><div class="controls bullet"><span class="by">advael</span><span>|</span><a href="#41929494">parent</a><span>|</span><a href="#41931890">prev</a><span>|</span><a href="#41929593">next</a><span>|</span><label class="collapse" for="c-41931158">[-]</label><label class="expand" for="c-41931158">[1 more]</label></div><br/><div class="children"><div class="content">Principle of least privilege trivially prevents updating system packages. Like if you don&#x27;t want people using apt, don&#x27;t give people root on your servers?</div><br/></div></div><div id="41929593" class="c"><input type="checkbox" id="c-41929593" checked=""/><div class="controls bullet"><span class="by">ozim</span><span>|</span><a href="#41929494">parent</a><span>|</span><a href="#41931158">prev</a><span>|</span><a href="#41931321">next</a><span>|</span><label class="collapse" for="c-41929593">[-]</label><label class="expand" for="c-41929593">[5 more]</label></div><br/><div class="children"><div class="content">How do you handle db.<p>Stuff I work on is write heavy so spawning dozens of app copies doesn’t make sense if I just hog the db with Erie locks.</div><br/><div id="41929624" class="c"><input type="checkbox" id="c-41929624" checked=""/><div class="controls bullet"><span class="by">mdaniel</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41929593">parent</a><span>|</span><a href="#41931321">next</a><span>|</span><label class="collapse" for="c-41929624">[-]</label><label class="expand" for="c-41929624">[4 more]</label></div><br/><div class="children"><div class="content">I must resist the urge to write &quot;users can access the DB via the APIs in front of it&quot; :-D<p>But, seriously, Teleport (back before they did a licensing rug-pull) is great at that and no SSH required. I&#x27;m super positive there are a bazillion other &quot;don&#x27;t use ssh as a poor person&#x27;s VPN&quot; solutions</div><br/><div id="41930406" class="c"><input type="checkbox" id="c-41930406" checked=""/><div class="controls bullet"><span class="by">zavec</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41929624">parent</a><span>|</span><a href="#41931321">next</a><span>|</span><label class="collapse" for="c-41930406">[-]</label><label class="expand" for="c-41930406">[3 more]</label></div><br/><div class="children"><div class="content">This led me to google &quot;teleport license,&quot; which sounds like a search from a much more interesting world.</div><br/><div id="41931139" class="c"><input type="checkbox" id="c-41931139" checked=""/><div class="controls bullet"><span class="by">aspenmayer</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41930406">parent</a><span>|</span><a href="#41930937">next</a><span>|</span><label class="collapse" for="c-41931139">[-]</label><label class="expand" for="c-41931139">[1 more]</label></div><br/><div class="children"><div class="content">You might be interested in Peter F. Hamilton&#x27;s <i>Commonwealth Saga</i> sci-fi series, then.<p>Among other tech, it involves the founding of a megacorp that exploits the discovery and monopolization of wormhole technology for profit, causing a rift between the two founders, who each remind me of Steve Jobs and Steve Wozniak in their cooperation and divergence.<p><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Commonwealth_Saga" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Commonwealth_Saga</a></div><br/></div></div><div id="41930937" class="c"><input type="checkbox" id="c-41930937" checked=""/><div class="controls bullet"><span class="by">mdaniel</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41930406">parent</a><span>|</span><a href="#41931139">prev</a><span>|</span><a href="#41931321">next</a><span>|</span><label class="collapse" for="c-41930937">[-]</label><label class="expand" for="c-41930937">[1 more]</label></div><br/><div class="children"><div class="content">To save others the search: <a href="https:&#x2F;&#x2F;github.com&#x2F;gravitational&#x2F;teleport&#x2F;pull&#x2F;35259">https:&#x2F;&#x2F;github.com&#x2F;gravitational&#x2F;teleport&#x2F;pull&#x2F;35259</a> Apache to AGPLv3</div><br/></div></div></div></div></div></div></div></div><div id="41931321" class="c"><input type="checkbox" id="c-41931321" checked=""/><div class="controls bullet"><span class="by">ashconnor</span><span>|</span><a href="#41929494">parent</a><span>|</span><a href="#41929593">prev</a><span>|</span><a href="#41929548">next</a><span>|</span><label class="collapse" for="c-41931321">[-]</label><label class="expand" for="c-41931321">[1 more]</label></div><br/><div class="children"><div class="content">You can audit if you put something like hoop.dev, Tailscale, Teleport or Boundary in between the client and server.<p>Disclaimer: I work at Hashicorp.</div><br/></div></div><div id="41929548" class="c"><input type="checkbox" id="c-41929548" checked=""/><div class="controls bullet"><span class="by">namxam</span><span>|</span><a href="#41929494">parent</a><span>|</span><a href="#41931321">prev</a><span>|</span><a href="#41929580">next</a><span>|</span><label class="collapse" for="c-41929548">[-]</label><label class="expand" for="c-41929548">[9 more]</label></div><br/><div class="children"><div class="content">But what is the alternative?</div><br/><div id="41929604" class="c"><input type="checkbox" id="c-41929604" checked=""/><div class="controls bullet"><span class="by">mdaniel</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41929548">parent</a><span>|</span><a href="#41930882">next</a><span>|</span><label class="collapse" for="c-41929604">[-]</label><label class="expand" for="c-41929604">[3 more]</label></div><br/><div class="children"><div class="content">There&#x27;s not one answer to your question, but here&#x27;s mine: kubelet and AWS SSM (which, to the best of my knowledge will work on non-AWS infra it just needs to be provided creds). Bottlerocket &lt;<a href="https:&#x2F;&#x2F;github.com&#x2F;bottlerocket-os&#x2F;bottlerocket#setup">https:&#x2F;&#x2F;github.com&#x2F;bottlerocket-os&#x2F;bottlerocket#setup</a>&gt; comes batteries included with both of those things, and is cheaply provisioned with <i>(ahem)</i> TOML user-data &lt;<a href="https:&#x2F;&#x2F;github.com&#x2F;bottlerocket-os&#x2F;bottlerocket#description-of-settings">https:&#x2F;&#x2F;github.com&#x2F;bottlerocket-os&#x2F;bottlerocket#description-...</a>&gt;<p>In that specific case, one can also have &quot;systemd for normal people&quot; via its support for static Pod definitions, so one can run containerized toys on boot even without being a formal member of a kubernetes cluster<p>AWS SSM provides auditing of what a person might normally type via ssh, and kubelet similarly, just at a different abstraction level. For clarity, I am aware that it&#x27;s possible via some sshd trickery one could get similar audit and log egress, but I haven&#x27;t seen one of those in practice whereas kubelet and AWS SSM provide it out of the box</div><br/><div id="41930279" class="c"><input type="checkbox" id="c-41930279" checked=""/><div class="controls bullet"><span class="by">cyberax</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41929604">parent</a><span>|</span><a href="#41930301">next</a><span>|</span><label class="collapse" for="c-41930279">[-]</label><label class="expand" for="c-41930279">[1 more]</label></div><br/><div class="children"><div class="content">Be careful with SSM, it can provide pretty much unlimited access: <a href="https:&#x2F;&#x2F;github.com&#x2F;Cyberax&#x2F;gimlet">https:&#x2F;&#x2F;github.com&#x2F;Cyberax&#x2F;gimlet</a><p>You can use it to tunnel arbitrary traffic inside your VPC.</div><br/></div></div></div></div><div id="41930882" class="c"><input type="checkbox" id="c-41930882" checked=""/><div class="controls bullet"><span class="by">ndndjdueej</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41929548">parent</a><span>|</span><a href="#41929604">prev</a><span>|</span><a href="#41930545">next</a><span>|</span><label class="collapse" for="c-41930882">[-]</label><label class="expand" for="c-41930882">[1 more]</label></div><br/><div class="children"><div class="content">IaC, send out logs to Splunk, health checks, slow rollouts, feature flags etc?<p>Allow SSH in non prod environments and reproduce issue there?<p>In prod you are aiming for &quot;not broken&quot; rather than &quot;do whatever I want as admin&quot;.</div><br/></div></div><div id="41930545" class="c"><input type="checkbox" id="c-41930545" checked=""/><div class="controls bullet"><span class="by">candiddevmike</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41929548">parent</a><span>|</span><a href="#41930882">prev</a><span>|</span><a href="#41929580">next</a><span>|</span><label class="collapse" for="c-41930545">[-]</label><label class="expand" for="c-41930545">[4 more]</label></div><br/><div class="children"><div class="content">I built a config management tool, Etcha, that uses short lived JWTs.  I extended it to offer a full shell over HTTP using JWTs:<p><a href="https:&#x2F;&#x2F;etcha.dev&#x2F;docs&#x2F;guides&#x2F;shell-access&#x2F;" rel="nofollow">https:&#x2F;&#x2F;etcha.dev&#x2F;docs&#x2F;guides&#x2F;shell-access&#x2F;</a><p>It works well and I can &quot;expose&quot; servers using reverse proxies since the entire shell session is over HTTP using SSE.</div><br/><div id="41930862" class="c"><input type="checkbox" id="c-41930862" checked=""/><div class="controls bullet"><span class="by">g-b-r</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41930545">parent</a><span>|</span><a href="#41931515">next</a><span>|</span><label class="collapse" for="c-41930862">[-]</label><label class="expand" for="c-41930862">[2 more]</label></div><br/><div class="children"><div class="content">“All JWTs are sent with low expirations (5 seconds) to limit replability”<p>Do you know how many times a few packets can be replayed in 5 seconds?</div><br/><div id="41931098" class="c"><input type="checkbox" id="c-41931098" checked=""/><div class="controls bullet"><span class="by">candiddevmike</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41930862">parent</a><span>|</span><a href="#41931515">next</a><span>|</span><label class="collapse" for="c-41931098">[-]</label><label class="expand" for="c-41931098">[1 more]</label></div><br/><div class="children"><div class="content">Sure, but this is all happening over HTTPS (Etcha only listens on HTTPS), it&#x27;s just an added form of protection&#x2F;expiration.</div><br/></div></div></div></div><div id="41931515" class="c"><input type="checkbox" id="c-41931515" checked=""/><div class="controls bullet"><span class="by">artificialLimbs</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41930545">parent</a><span>|</span><a href="#41930862">prev</a><span>|</span><a href="#41929580">next</a><span>|</span><label class="collapse" for="c-41931515">[-]</label><label class="expand" for="c-41931515">[1 more]</label></div><br/><div class="children"><div class="content">I don’t understand why this is more secure than limiting SSH to local network only and doing ‘normal’ ssh hardening.</div><br/></div></div></div></div></div></div><div id="41929580" class="c"><input type="checkbox" id="c-41929580" checked=""/><div class="controls bullet"><span class="by">riddley</span><span>|</span><a href="#41929494">parent</a><span>|</span><a href="#41929548">prev</a><span>|</span><a href="#41930267">next</a><span>|</span><label class="collapse" for="c-41929580">[-]</label><label class="expand" for="c-41929580">[17 more]</label></div><br/><div class="children"><div class="content">How do you troubleshoot?</div><br/><div id="41929808" class="c"><input type="checkbox" id="c-41929808" checked=""/><div class="controls bullet"><span class="by">bigiain</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41929580">parent</a><span>|</span><a href="#41929645">next</a><span>|</span><label class="collapse" for="c-41929808">[-]</label><label class="expand" for="c-41929808">[7 more]</label></div><br/><div class="children"><div class="content">I think ssh-ing into production is a sign of not fully mature devops practices.<p>We are still stuck there, but we&#x27;re striving to get to the place where we can turn off sshd on Prod and rely on the CI&#x2F;CD pipeline to blow away and reprovision instances, and be 100% confident we can test and troubleshoot in dev and stage and by looking at off-instance logs from Prod.<p>How important it is to get there is something I ponder about my motivations for - it&#x27;s cleary not worthwhile if your project is one or 2 prod servers perhaps running something like HA WordPress, but it&#x27;s obvious that at Netflix type scale that nobody is sshing into individual instances to troubleshoot. We are a long way (a long long long long way) from Netflix scale, and are unlikely to ever get there. But somewhere between dozens and hundreds of instances is about where I reckon the work required to get close to there stars paying off.</div><br/><div id="41933052" class="c"><input type="checkbox" id="c-41933052" checked=""/><div class="controls bullet"><span class="by">xorcist</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41929808">parent</a><span>|</span><a href="#41930036">next</a><span>|</span><label class="collapse" for="c-41933052">[-]</label><label class="expand" for="c-41933052">[1 more]</label></div><br/><div class="children"><div class="content">&gt; at Netflix type scale that nobody is sshing into individual instances to troubleshoot<p>Have you worked at Netflix?<p>I haven&#x27;t, but I have worked with large scale operations, and I wouldn&#x27;t hesitate to say that the ability to ssh (or other ways to run commands remotely, which are all either built on ssh or likely not as secure and well tested) is absolutely <i>crucial</i> to running at scale.<p>The more complex and non-heterogenous environments you have, the more likely you are to encounter strange flukes. Handshakes that only fail a fraction of a percent of all times and so on. Multiple products and providers interaction. Tools like tcpdump and eBPF becomes essential.<p>Why would you want to deploy on a mature operating system such as Linux and <i>not</i> use tools such as eBPF? I know the modern way is just to yolo it and restart stuff that crashes, but as a startup or small scale you have other things to worry about. When you are at scale you really want to understand your performance profile and iron out all the kinks.</div><br/></div></div><div id="41930036" class="c"><input type="checkbox" id="c-41930036" checked=""/><div class="controls bullet"><span class="by">imiric</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41929808">parent</a><span>|</span><a href="#41933052">prev</a><span>|</span><a href="#41932532">next</a><span>|</span><label class="collapse" for="c-41930036">[-]</label><label class="expand" for="c-41930036">[4 more]</label></div><br/><div class="children"><div class="content">Right. The answer is having systems that are resilient to failure, and if they do fail being able to quickly replace any node, hopefully automatically, along with solid observability to give you insight into what failed and how to fix it. The process of logging into a machine to troubleshoot it in real-time while the system is on fire is so antiquated, not to mention stressful. On-call shouldn&#x27;t really be a major part of our industry. Systems should be self-healing, and troubleshooting done during working hours.<p>Achieving this is difficult, but we have the tools to do it. The hurdles are often organizational rather than technical.</div><br/><div id="41930339" class="c"><input type="checkbox" id="c-41930339" checked=""/><div class="controls bullet"><span class="by">bigiain</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41930036">parent</a><span>|</span><a href="#41932532">next</a><span>|</span><label class="collapse" for="c-41930339">[-]</label><label class="expand" for="c-41930339">[3 more]</label></div><br/><div class="children"><div class="content">&gt; The hurdles are often organizational rather than technical.<p>Yeah. And in my opinion &quot;organizational&quot; reasons can (and should) include &quot;we are just not at the scale where achieving that makes sense&quot;.<p>If you have single digit numbers of machines, the whole solid observability&#x2F; automated node replacement&#x2F;self-healing setup overhead is unlikely to pay off. Especially if the SLAs don&#x27;t require 2am weekend hair-on-fire platform recovery. For a _lot_ things, you can almost completely avoid on-call incidents with straightforward redundant (over provisioned) HA architectures, no single points of failure, and sensible office hours only deployment rules (and never _ever_ deploy to Prod on a Friday afternoon).<p>Scrappy startups, and web&#x2F;mobile platforms for anything where a few hours of downtime is not going to be an existential threat to the money flow or a big story in the tech press - probably have more important things to be doing than setting up log aggregation and request tracing. Work towards that, sure, but probably prioritise the dev productivity parts first. Get your CI&#x2F;CD pipeline rock solid. Get some decent monitoring of the redundant components of your HA setup (as well as the Prod load balancer monitoring) so you know when you&#x27;re degraded but not down (giving you some breathing space to troubleshoot).<p>And aspire to fully resilient systems and have a plan for what they might look like in the future to avoid painting yourself into a corner that makes it harder then necessary to get there one day.<p>But if you&#x27;ve got a guy spending 6 months setting up chaos monkey and chaos doctor for your WordPress site that&#x27;s only getting a few thousand visits a day, you&#x27;re definitely going it wrong. Five nines are expensive. If your users are gonna be &quot;happy enough&quot; with three nines or even two nines, you&#x27;ve probably got way better things to do with that budget.</div><br/><div id="41930446" class="c"><input type="checkbox" id="c-41930446" checked=""/><div class="controls bullet"><span class="by">Aeolun</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41930339">parent</a><span>|</span><a href="#41932443">next</a><span>|</span><label class="collapse" for="c-41930446">[-]</label><label class="expand" for="c-41930446">[1 more]</label></div><br/><div class="children"><div class="content">&gt; For a _lot_ things, you can almost completely avoid on-call incidents with straightforward redundant (over provisioned) HA architectures, no single points of failure, and sensible office hours only deployment rules (and never _ever_ deploy to Prod on a Friday afternoon).<p>For a lot of things the lack of complexity inherent in a single VPS server will mean you have better availability than any of those bizarrely complex autoscaling&#x2F;recovery setups</div><br/></div></div><div id="41932443" class="c"><input type="checkbox" id="c-41932443" checked=""/><div class="controls bullet"><span class="by">imiric</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41930339">parent</a><span>|</span><a href="#41930446">prev</a><span>|</span><a href="#41932532">next</a><span>|</span><label class="collapse" for="c-41932443">[-]</label><label class="expand" for="c-41932443">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not so sure about all of that.<p>The thing is that all companies regardless of their scale would benefit from these good practices. Scrappy startups definitely have more important things to do than maintaining their infra, whether that involves setting up observability and automation or manually troubleshooting and deploying. Both involve resources and trade-offs, but one of them eventually leads to a reduction of required resources and stability&#x2F;reliability improvements, while the other leads to a hole of technical debt that is difficult to get out of if you ever want to improve stability&#x2F;reliability.<p>What I find more harmful is the prevailing notion that &quot;complexity&quot; must be avoided at smaller scales, and that somehow copying a binary to a single VPS is the correct way to deploy at this stage. You see this in the sibling comment from Aeolun here.<p>The reality is that doing all of this right is an inherently complex problem. There&#x27;s no getting around that. It&#x27;s true that at smaller scales some of these practices can be ignored, and determining which is a skill on its own. But what usually happens is that companies build their own hodgepodge solutions to these problems as they run into them, which accumulate over time, and they end up having to maintain their Rube Goldberg machines in perpetuity because of sunk costs. This means that they never achieve the benefits they would have had they just adopted good practices and tooling from the start.<p>I&#x27;m not saying that starting with k8s and such is always a good idea, especially if the company is not well established yet, but we have tools and services nowadays that handle these problems for us. Shunning cloud providers, containers, k8s, or any other technology out of an irrational fear of complexity is more harmful than beneficial.</div><br/></div></div></div></div></div></div><div id="41932532" class="c"><input type="checkbox" id="c-41932532" checked=""/><div class="controls bullet"><span class="by">otabdeveloper4</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41929808">parent</a><span>|</span><a href="#41930036">prev</a><span>|</span><a href="#41929645">next</a><span>|</span><label class="collapse" for="c-41932532">[-]</label><label class="expand" for="c-41932532">[1 more]</label></div><br/><div class="children"><div class="content">A whole lot of words to say &quot;we don&#x27;t troubleshoot and just live with bugs, #yolo&quot;.</div><br/></div></div></div></div><div id="41929645" class="c"><input type="checkbox" id="c-41929645" checked=""/><div class="controls bullet"><span class="by">mdaniel</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41929580">parent</a><span>|</span><a href="#41929808">prev</a><span>|</span><a href="#41930267">next</a><span>|</span><label class="collapse" for="c-41929645">[-]</label><label class="expand" for="c-41929645">[9 more]</label></div><br/><div class="children"><div class="content">In my world, if a developer needs access to the Node upon which their app is deployed to troubleshoot, that&#x27;s 100% a bug in their application. I am cognizant that being whole-hog on 12 Factor apps is a journey, but for my money get on the train because &quot;let me just ssh in and edit this one config file&quot; is the road to ruin when no one knows who edited what to set it to what new value. Running $(kubectl edit) allows $(kubectl rollout undo) to put it back, and also shows what was changed from what to what</div><br/><div id="41929680" class="c"><input type="checkbox" id="c-41929680" checked=""/><div class="controls bullet"><span class="by">yjftsjthsd-h</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41929645">parent</a><span>|</span><a href="#41930267">next</a><span>|</span><label class="collapse" for="c-41929680">[-]</label><label class="expand" for="c-41929680">[8 more]</label></div><br/><div class="children"><div class="content">How do you debug the worker itself?</div><br/><div id="41929741" class="c"><input type="checkbox" id="c-41929741" checked=""/><div class="controls bullet"><span class="by">mdaniel</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41929680">parent</a><span>|</span><a href="#41930851">next</a><span>|</span><label class="collapse" for="c-41929741">[-]</label><label class="expand" for="c-41929741">[5 more]</label></div><br/><div class="children"><div class="content">Separate from my sibling comment about AWS SSM, I also believe that if one cannot know that a Node is sick by the metrics or log egress from it, that&#x27;s a deployment bug. I&#x27;m firmly in the &quot;Cattle&quot; camp, and am getting closer and closer to the &quot;Reverse Uptime&quot; camp - made easier by ASG&#x27;s newfound &quot;Instance Lifespan&quot; setting to make it basically one-click to get onboard that train<p>Even as I type all these answers out, I&#x27;m super cognizant that there&#x27;s not one hammer for all nails, and I am for sure guilty of yanking Nodes out of the ASG in order to figure out what the hell has gone wrong with them, but I try very very hard not to place my Nodes in a precarious situation to begin with so that such extreme troubleshooting becomes a minor severity incident and not Situation Normal</div><br/><div id="41931023" class="c"><input type="checkbox" id="c-41931023" checked=""/><div class="controls bullet"><span class="by">__turbobrew__</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41929741">parent</a><span>|</span><a href="#41931569">next</a><span>|</span><label class="collapse" for="c-41931023">[-]</label><label class="expand" for="c-41931023">[2 more]</label></div><br/><div class="children"><div class="content">If accidentally nuking a single node while debugging causes issues you have bigger problems. Especially if you are running kubernetes any node should be able to fall off the earth at any time without issues.<p>I agree that you should set a maximum lifetime for a node on the order of a few weeks.<p>I also agree that you shouldn’t be giving randos access to production infra, but and the end of the day there needs to be some people at the company who have the keys to the kingdom because you don’t know what you don’t know and you need to be able to deal with unexpected faults or outages of the telemetry and logging systems.<p>I once bootstrapped an entire datacenter with tens of thousands of nodes from an SSH terminal after an abrupt power failure. It turns out infrastructure has lots of circular dependencies and we had to manually break that dependency.</div><br/><div id="41931787" class="c"><input type="checkbox" id="c-41931787" checked=""/><div class="controls bullet"><span class="by">ramzyo</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41931023">parent</a><span>|</span><a href="#41931569">next</a><span>|</span><label class="collapse" for="c-41931787">[-]</label><label class="expand" for="c-41931787">[1 more]</label></div><br/><div class="children"><div class="content">Exactly this. Have heard it referred to as &quot;break glass access&quot;. Some form of remote access, be it SSH or otherwise, in case of serious emergency.</div><br/></div></div></div></div><div id="41931569" class="c"><input type="checkbox" id="c-41931569" checked=""/><div class="controls bullet"><span class="by">viraptor</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41929741">parent</a><span>|</span><a href="#41931023">prev</a><span>|</span><a href="#41930851">next</a><span>|</span><label class="collapse" for="c-41931569">[-]</label><label class="expand" for="c-41931569">[2 more]</label></div><br/><div class="children"><div class="content">Passive metrics&#x2F;logs won&#x27;t let you debug all the issues. At some point you either need a system for automatic memory dumps and submitting bpf scripts to live nodes... or you need SSH access to do that.</div><br/><div id="41932550" class="c"><input type="checkbox" id="c-41932550" checked=""/><div class="controls bullet"><span class="by">otabdeveloper4</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41931569">parent</a><span>|</span><a href="#41930851">next</a><span>|</span><label class="collapse" for="c-41932550">[-]</label><label class="expand" for="c-41932550">[1 more]</label></div><br/><div class="children"><div class="content">This &quot;system for automatic dumps&quot; 100 percent uses ssh under the hood. Probably with some eternal sudo administrator key.<p>Personal ssh access is always better (from a security standpoint) than bot tokens and keys.</div><br/></div></div></div></div></div></div><div id="41930851" class="c"><input type="checkbox" id="c-41930851" checked=""/><div class="controls bullet"><span class="by">from-nibly</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41929680">parent</a><span>|</span><a href="#41929741">prev</a><span>|</span><a href="#41930267">next</a><span>|</span><label class="collapse" for="c-41930851">[-]</label><label class="expand" for="c-41930851">[2 more]</label></div><br/><div class="children"><div class="content">You don&#x27;t. you shoot it in the head and get a new one. If you need logging &#x2F; telemetry bake it into the image.</div><br/><div id="41933103" class="c"><input type="checkbox" id="c-41933103" checked=""/><div class="controls bullet"><span class="by">otabdeveloper4</span><span>|</span><a href="#41929494">root</a><span>|</span><a href="#41930851">parent</a><span>|</span><a href="#41930267">next</a><span>|</span><label class="collapse" for="c-41933103">[-]</label><label class="expand" for="c-41933103">[1 more]</label></div><br/><div class="children"><div class="content">Are you from techsupport?<p>Actually not every problem is solved with the &quot;have you tried turning it off and back on again&quot; trick.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="41930267" class="c"><input type="checkbox" id="c-41930267" checked=""/><div class="controls bullet"><span class="by">tptacek</span><span>|</span><a href="#41929494">prev</a><span>|</span><a href="#41933436">next</a><span>|</span><label class="collapse" for="c-41930267">[-]</label><label class="expand" for="c-41930267">[4 more]</label></div><br/><div class="children"><div class="content">I&#x27;m a fan of SSH certificates and cannot understand why anyone would set up certificate authentication with an external third-party CA. When I&#x27;m selling people on SSH CA&#x27;s, the first thing I usually have to convince them of is that I&#x27;m not saying they should trust some third party. You know where all your servers are. External CAs exist to solve the counterparty introduction problem, which is a problem SSH servers do not have.</div><br/><div id="41931686" class="c"><input type="checkbox" id="c-41931686" checked=""/><div class="controls bullet"><span class="by">kevin_nisbet</span><span>|</span><a href="#41930267">parent</a><span>|</span><a href="#41930293">next</a><span>|</span><label class="collapse" for="c-41931686">[-]</label><label class="expand" for="c-41931686">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m with you, I imagine it&#x27;s mostly people just drawing parallels, they can figure out how to get a web certificate so think SSH is the same thing.<p>The second order problem I&#x27;ve found is when you dig in there are plenty of people who ask for certs but when push comes to shove really want functionality where when user access is cancelled all active sessions get torn down immediatly as well.</div><br/></div></div><div id="41930293" class="c"><input type="checkbox" id="c-41930293" checked=""/><div class="controls bullet"><span class="by">xyst</span><span>|</span><a href="#41930267">parent</a><span>|</span><a href="#41931686">prev</a><span>|</span><a href="#41933436">next</a><span>|</span><label class="collapse" for="c-41930293">[-]</label><label class="expand" for="c-41930293">[2 more]</label></div><br/><div class="children"><div class="content">Same reasons for companies still buying “CrowdStrike” and installing that crapware. It’s all for regulatory checkboxes (ie, fedramp cert).</div><br/><div id="41930438" class="c"><input type="checkbox" id="c-41930438" checked=""/><div class="controls bullet"><span class="by">tptacek</span><span>|</span><a href="#41930267">root</a><span>|</span><a href="#41930293">parent</a><span>|</span><a href="#41933436">next</a><span>|</span><label class="collapse" for="c-41930438">[-]</label><label class="expand" for="c-41930438">[1 more]</label></div><br/><div class="children"><div class="content">I do not believe you in fact need any kind of SSH CA, let alone one run by a third party, to be FedRAMP-compliant.</div><br/></div></div></div></div></div></div><div id="41929798" class="c"><input type="checkbox" id="c-41929798" checked=""/><div class="controls bullet"><span class="by">antoniomika</span><span>|</span><a href="#41933436">prev</a><span>|</span><a href="#41930282">next</a><span>|</span><label class="collapse" for="c-41929798">[-]</label><label class="expand" for="c-41929798">[3 more]</label></div><br/><div class="children"><div class="content">I wrote a system that did this &gt;5 years ago (luckily was able to open source it before the startup went under[0]). The bastion would record ssh sessions in asciicast v2 format and store those for later playback directly from a control panel. The main issue that still isn&#x27;t solved by a solution like this is user management on the remote (ssh server) side. In a more recent implementation, integration with LDAP made the most sense and allows for separation of user and login credentials. A single integrated solution is likely the holy grail in this space.<p>[0] <a href="https:&#x2F;&#x2F;github.com&#x2F;notion&#x2F;bastion">https:&#x2F;&#x2F;github.com&#x2F;notion&#x2F;bastion</a></div><br/><div id="41929991" class="c"><input type="checkbox" id="c-41929991" checked=""/><div class="controls bullet"><span class="by">mdaniel</span><span>|</span><a href="#41929798">parent</a><span>|</span><a href="#41930282">next</a><span>|</span><label class="collapse" for="c-41929991">[-]</label><label class="expand" for="c-41929991">[2 more]</label></div><br/><div class="children"><div class="content">Out of curiosity, why ignore this PR? <a href="https:&#x2F;&#x2F;github.com&#x2F;notion&#x2F;bastion&#x2F;pull&#x2F;13">https:&#x2F;&#x2F;github.com&#x2F;notion&#x2F;bastion&#x2F;pull&#x2F;13</a><p>I would think even a simple &quot;sorry, this change does not align with the project&#x27;s goals&quot; -&gt; closed would help the submitter (and others) have some clarity versus the PR limbo it&#x27;s currently in<p>That aside, thanks so much for pointing this out: it looks like good fun, especially the Asciicast support!</div><br/><div id="41930045" class="c"><input type="checkbox" id="c-41930045" checked=""/><div class="controls bullet"><span class="by">antoniomika</span><span>|</span><a href="#41929798">root</a><span>|</span><a href="#41929991">parent</a><span>|</span><a href="#41930282">next</a><span>|</span><label class="collapse" for="c-41930045">[-]</label><label class="expand" for="c-41930045">[1 more]</label></div><br/><div class="children"><div class="content">Honestly never had a chance to merge it&#x2F;review it. Once the company wound down, I had to move onto other things (find a new job, work on other priorities, etc) and lost access to be able to do anything with it after. I thought about forking it and modernizing it but never came to fruition.</div><br/></div></div></div></div></div></div><div id="41930282" class="c"><input type="checkbox" id="c-41930282" checked=""/><div class="controls bullet"><span class="by">shermantanktop</span><span>|</span><a href="#41929798">prev</a><span>|</span><a href="#41929483">next</a><span>|</span><label class="collapse" for="c-41930282">[-]</label><label class="expand" for="c-41930282">[4 more]</label></div><br/><div class="children"><div class="content">I didn’t understand the marketing term “zero trust” and I still don’t.<p>In practice, I get it - a network zone shouldn’t require a lower authn&#x2F;z bar on the implicit assumption that admission to that zone must have required a higher bar.<p>But all these systems are built on trust, and if it isn’t based on network zoning, it’s based on something else. Maybe that other thing is better, maybe not.  But it exists and it needs to be understood.<p>An actual zero trust system is the proverbial unpowered computer in a bunker.</div><br/><div id="41930474" class="c"><input type="checkbox" id="c-41930474" checked=""/><div class="controls bullet"><span class="by">wmf</span><span>|</span><a href="#41930282">parent</a><span>|</span><a href="#41931163">next</a><span>|</span><label class="collapse" for="c-41930474">[-]</label><label class="expand" for="c-41930474">[1 more]</label></div><br/><div class="children"><div class="content">The something else is specifically user&#x2F;service identity. Not machine identity, not IP address. It is somewhat silly to have a buzzword that means &quot;no, <i>actually</i> authenticate users&quot; but here we are.</div><br/></div></div><div id="41931163" class="c"><input type="checkbox" id="c-41931163" checked=""/><div class="controls bullet"><span class="by">athorax</span><span>|</span><a href="#41930282">parent</a><span>|</span><a href="#41930474">prev</a><span>|</span><a href="#41930365">next</a><span>|</span><label class="collapse" for="c-41931163">[-]</label><label class="expand" for="c-41931163">[1 more]</label></div><br/><div class="children"><div class="content">It means there is zero trust of a device&#x2F;service&#x2F;user on your network until they have been fully authenticated. It is about having zero trust in something just because it is inside your network perimeter.</div><br/></div></div><div id="41930365" class="c"><input type="checkbox" id="c-41930365" checked=""/><div class="controls bullet"><span class="by">ngneer</span><span>|</span><a href="#41930282">parent</a><span>|</span><a href="#41931163">prev</a><span>|</span><a href="#41929483">next</a><span>|</span><label class="collapse" for="c-41930365">[-]</label><label class="expand" for="c-41930365">[1 more]</label></div><br/><div class="children"><div class="content">With you there. The marketing term makes Zero Sense to me.</div><br/></div></div></div></div><div id="41929483" class="c"><input type="checkbox" id="c-41929483" checked=""/><div class="controls bullet"><span class="by">EthanHeilman</span><span>|</span><a href="#41930282">prev</a><span>|</span><a href="#41932883">next</a><span>|</span><label class="collapse" for="c-41929483">[-]</label><label class="expand" for="c-41929483">[4 more]</label></div><br/><div class="children"><div class="content">I&#x27;m a member of the team that worked on this happy to answer any questions.<p>We (BastionZero) recently got bought by Cloudflare and it is exciting bringing our SSH ideas to Cloudflare.</div><br/><div id="41929927" class="c"><input type="checkbox" id="c-41929927" checked=""/><div class="controls bullet"><span class="by">lenova</span><span>|</span><a href="#41929483">parent</a><span>|</span><a href="#41929523">next</a><span>|</span><label class="collapse" for="c-41929927">[-]</label><label class="expand" for="c-41929927">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;d love to hear about the acquisition story with Cloudflare.</div><br/><div id="41932473" class="c"><input type="checkbox" id="c-41932473" checked=""/><div class="controls bullet"><span class="by">FlyingSnake</span><span>|</span><a href="#41929483">root</a><span>|</span><a href="#41929927">parent</a><span>|</span><a href="#41929523">next</a><span>|</span><label class="collapse" for="c-41932473">[-]</label><label class="expand" for="c-41932473">[1 more]</label></div><br/><div class="children"><div class="content">You can read the details here: <a href="https:&#x2F;&#x2F;blog.cloudflare.com&#x2F;cloudflare-acquires-bastionzero&#x2F;" rel="nofollow">https:&#x2F;&#x2F;blog.cloudflare.com&#x2F;cloudflare-acquires-bastionzero&#x2F;</a></div><br/></div></div></div></div><div id="41929523" class="c"><input type="checkbox" id="c-41929523" checked=""/><div class="controls bullet"><span class="by">mdaniel</span><span>|</span><a href="#41929483">parent</a><span>|</span><a href="#41929927">prev</a><span>|</span><a href="#41932883">next</a><span>|</span><label class="collapse" for="c-41929523">[-]</label><label class="expand" for="c-41929523">[1 more]</label></div><br/><div class="children"><div class="content">I just wanted to offer my congratulations on the acquisition. I don&#x27;t know any details about your specific one, but I have been around enough to know that it&#x27;s still worth celebrating o&#x2F;</div><br/></div></div></div></div><div id="41932883" class="c"><input type="checkbox" id="c-41932883" checked=""/><div class="controls bullet"><span class="by">INTPenis</span><span>|</span><a href="#41929483">prev</a><span>|</span><a href="#41932052">next</a><span>|</span><label class="collapse" for="c-41932883">[-]</label><label class="expand" for="c-41932883">[2 more]</label></div><br/><div class="children"><div class="content">Properly setup IaC, that treats Linux as an appliance instead, could get rid of SSH altogether.<p>I&#x27;m only saying this because after 20+ years as a sysadmin I feel like there have been no decent solutions presented. On the other hand, to protect my IaC and Gitops I have seen very decent and mature solutions.</div><br/><div id="41933239" class="c"><input type="checkbox" id="c-41933239" checked=""/><div class="controls bullet"><span class="by">otabdeveloper4</span><span>|</span><a href="#41932883">parent</a><span>|</span><a href="#41932052">next</a><span>|</span><label class="collapse" for="c-41933239">[-]</label><label class="expand" for="c-41933239">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t know what exactly you mean by &quot;IaC&quot; here, but the ones I know use SSH under the hood somewhere. (Except with some sort of &quot;bot admin&quot; key now, which is strictly worse.)</div><br/></div></div></div></div><div id="41932052" class="c"><input type="checkbox" id="c-41932052" checked=""/><div class="controls bullet"><span class="by">keepamovin</span><span>|</span><a href="#41932883">prev</a><span>|</span><a href="#41930175">next</a><span>|</span><label class="collapse" for="c-41932052">[-]</label><label class="expand" for="c-41932052">[2 more]</label></div><br/><div class="children"><div class="content">Does this give CloudFlare a backdoor to all your servers? That would not strictly be ZT, as some identify in the comments here.</div><br/><div id="41932697" class="c"><input type="checkbox" id="c-41932697" checked=""/><div class="controls bullet"><span class="by">knallfrosch</span><span>|</span><a href="#41932052">parent</a><span>|</span><a href="#41930175">next</a><span>|</span><label class="collapse" for="c-41932697">[-]</label><label class="expand" for="c-41932697">[1 more]</label></div><br/><div class="children"><div class="content">Everything rests on CloudFlare&#x27;s key.</div><br/></div></div></div></div><div id="41930175" class="c"><input type="checkbox" id="c-41930175" checked=""/><div class="controls bullet"><span class="by">johnklos</span><span>|</span><a href="#41932052">prev</a><span>|</span><a href="#41931440">next</a><span>|</span><label class="collapse" for="c-41930175">[-]</label><label class="expand" for="c-41930175">[1 more]</label></div><br/><div class="children"><div class="content">So... don&#x27;t trust long lived ssh keys, but trust Cloudflare&#x27;s CA. Why? What has Cloudflare done to earn trust?<p>If that alone weren&#x27;t reason enough to dismiss this, the article has marketing BS throughout. For instance, &quot;SSH access to a server often comes with elevated privileges&quot;. Ummm... Every authentication system ever has whatever privileges that come with that authentication system. This is the kind of bull you say &#x2F; write when you want to snow someone who doesn&#x27;t know any better. To those of us who do understand this, this is almost AI level bullshit.<p>The same is true of their supposed selling points:<p>&gt; Author fine-grained policy to govern who can SSH to your servers and through which SSH user(s) they can log in as.<p>That&#x27;s exactly what ssh does. You set up precisely which authentication methods you accept, you set up keys for exactly that purpose, and you set up individual accounts. Do Cloudflare really think we&#x27;re setting up a single user account and giving access to lots of different people, and we need them to save us? (now that I think about it, I bet some people do this, but this is still a ridiculous selling point)<p>&gt; Monitor infrastructure access with Access and SSH command logs<p>So they&#x27;re MITM all of our connections? We&#x27;re supposed to trust them, even though they have a long history of not only working with scammers and malicious actors, but protecting them?<p>I suppose there&#x27;s a sucker born every minute, so Cloudflare will undoubtedly sell some people on this silliness, but to me it just looks like yet another way that Cloudflare wants to recentralize the Internet around them. If they had their way, then in a few years, were they to go down, a majority of the Internet would literally stop working. That should scare everyone.</div><br/></div></div><div id="41931440" class="c"><input type="checkbox" id="c-41931440" checked=""/><div class="controls bullet"><span class="by">curben</span><span>|</span><a href="#41930175">prev</a><span>|</span><a href="#41930302">next</a><span>|</span><label class="collapse" for="c-41931440">[-]</label><label class="expand" for="c-41931440">[1 more]</label></div><br/><div class="children"><div class="content">Cloudflare has been offering SSH CA-based authentication for more than 2 years [1], I wrote a guide back in feb &#x27;23 [2]. The announcement is more about offering new features, such as more granular user control.<p>[1]:<a href="https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20210418143636&#x2F;https:&#x2F;&#x2F;developers.cloudflare.com&#x2F;cloudflare-one&#x2F;identity&#x2F;users&#x2F;short-lived-certificates" rel="nofollow">https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20210418143636&#x2F;https:&#x2F;&#x2F;developer...</a><p>[2]: <a href="https:&#x2F;&#x2F;mdleom.com&#x2F;blog&#x2F;2023&#x2F;02&#x2F;13&#x2F;ssh-certificate-cloudflare-tunnel&#x2F;" rel="nofollow">https:&#x2F;&#x2F;mdleom.com&#x2F;blog&#x2F;2023&#x2F;02&#x2F;13&#x2F;ssh-certificate-cloudflar...</a></div><br/></div></div><div id="41930302" class="c"><input type="checkbox" id="c-41930302" checked=""/><div class="controls bullet"><span class="by">cyberax</span><span>|</span><a href="#41931440">prev</a><span>|</span><a href="#41930727">next</a><span>|</span><label class="collapse" for="c-41930302">[-]</label><label class="expand" for="c-41930302">[2 more]</label></div><br/><div class="children"><div class="content">Hah. I did pretty much all the same stuff in my previous company.<p>One thing that we did a bit better: we used AWS SSM to provision our SSH-CA certificates onto the running AWS EC2 instances during the first connection.<p>It would be even better if AWS allowed to use SSH CA certs as keys, but alas...</div><br/><div id="41931539" class="c"><input type="checkbox" id="c-41931539" checked=""/><div class="controls bullet"><span class="by">pugz</span><span>|</span><a href="#41930302">parent</a><span>|</span><a href="#41930727">next</a><span>|</span><label class="collapse" for="c-41931539">[-]</label><label class="expand" for="c-41931539">[1 more]</label></div><br/><div class="children"><div class="content">FYI I love your work with Gimlet, etc.<p>I too would love &quot;native&quot; support for SSH CAs in EC2. What I ended up doing is adding a line to every EC2 userdata script that would rewrite the &#x2F;home&#x2F;ec2-user&#x2F;.ssh&#x2F;authorized_keys file to treat the provided EC2 keypair as a CA instead of a regular pubkey.</div><br/></div></div></div></div><div id="41930727" class="c"><input type="checkbox" id="c-41930727" checked=""/><div class="controls bullet"><span class="by">arianvanp</span><span>|</span><a href="#41930302">prev</a><span>|</span><a href="#41932802">next</a><span>|</span><label class="collapse" for="c-41930727">[-]</label><label class="expand" for="c-41930727">[3 more]</label></div><br/><div class="children"><div class="content">Zero trust. But they don&#x27;t solve the more interesting problem: host key authentication.<p>Would be nice if they can replace TOFU access with SSH CA as well. Ideally based on device posture of the server (e.g. TPM2 attestation)</div><br/><div id="41932902" class="c"><input type="checkbox" id="c-41932902" checked=""/><div class="controls bullet"><span class="by">anilakar</span><span>|</span><a href="#41930727">parent</a><span>|</span><a href="#41931264">next</a><span>|</span><label class="collapse" for="c-41932902">[-]</label><label class="expand" for="c-41932902">[1 more]</label></div><br/><div class="children"><div class="content">As far as I know you can CA sign host keys the same way you can sign users&#x27; public keys.<p>As always, the main issue is that certificate chaining is not possible in SSH PK&quot;I&quot;, so you need to have absolute trust in the machine that does the signing.</div><br/></div></div><div id="41931264" class="c"><input type="checkbox" id="c-41931264" checked=""/><div class="controls bullet"><span class="by">mdaniel</span><span>|</span><a href="#41930727">parent</a><span>|</span><a href="#41932902">prev</a><span>|</span><a href="#41932802">next</a><span>|</span><label class="collapse" for="c-41931264">[-]</label><label class="expand" for="c-41931264">[1 more]</label></div><br/><div class="children"><div class="content">While not applicable for all situations &lt;<a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;SSHFP_record" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;SSHFP_record</a>&gt; and its &lt;<a href="https:&#x2F;&#x2F;man.openbsd.org&#x2F;ssh_config.5#VerifyHostKeyDNS" rel="nofollow">https:&#x2F;&#x2F;man.openbsd.org&#x2F;ssh_config.5#VerifyHostKeyDNS</a>&gt; friend may interest you</div><br/></div></div></div></div><div id="41932802" class="c"><input type="checkbox" id="c-41932802" checked=""/><div class="controls bullet"><span class="by">anilakar</span><span>|</span><a href="#41930727">prev</a><span>|</span><a href="#41931133">next</a><span>|</span><label class="collapse" for="c-41932802">[-]</label><label class="expand" for="c-41932802">[1 more]</label></div><br/><div class="children"><div class="content">Every now and then a new SSH key management solution emerges and every time it is yet another connection-terminating proxy and not a real PKI solution.</div><br/></div></div><div id="41931133" class="c"><input type="checkbox" id="c-41931133" checked=""/><div class="controls bullet"><span class="by">advael</span><span>|</span><a href="#41932802">prev</a><span>|</span><a href="#41930280">next</a><span>|</span><label class="collapse" for="c-41931133">[-]</label><label class="expand" for="c-41931133">[5 more]</label></div><br/><div class="children"><div class="content">You know you can just do this with keyauth and a cron job, right?</div><br/><div id="41931160" class="c"><input type="checkbox" id="c-41931160" checked=""/><div class="controls bullet"><span class="by">wmf</span><span>|</span><a href="#41931133">parent</a><span>|</span><a href="#41930280">next</a><span>|</span><label class="collapse" for="c-41931160">[-]</label><label class="expand" for="c-41931160">[4 more]</label></div><br/><div class="children"><div class="content">And Dropbox is a wrapper around rsync.</div><br/><div id="41931169" class="c"><input type="checkbox" id="c-41931169" checked=""/><div class="controls bullet"><span class="by">advael</span><span>|</span><a href="#41931133">root</a><span>|</span><a href="#41931160">parent</a><span>|</span><a href="#41930280">next</a><span>|</span><label class="collapse" for="c-41931169">[-]</label><label class="expand" for="c-41931169">[3 more]</label></div><br/><div class="children"><div class="content">Generally speaking a lot of &quot;essential tools&quot; in &quot;cloud computing&quot; are available as free, boring operating system utilities.</div><br/><div id="41931848" class="c"><input type="checkbox" id="c-41931848" checked=""/><div class="controls bullet"><span class="by">kkielhofner</span><span>|</span><a href="#41931133">root</a><span>|</span><a href="#41931169">parent</a><span>|</span><a href="#41930280">next</a><span>|</span><label class="collapse" for="c-41931848">[-]</label><label class="expand" for="c-41931848">[2 more]</label></div><br/><div class="children"><div class="content">It’s a joke from a famous moment in HN history:<p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=9224">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=9224</a></div><br/><div id="41932674" class="c"><input type="checkbox" id="c-41932674" checked=""/><div class="controls bullet"><span class="by">advael</span><span>|</span><a href="#41931133">root</a><span>|</span><a href="#41931848">parent</a><span>|</span><a href="#41930280">next</a><span>|</span><label class="collapse" for="c-41932674">[-]</label><label class="expand" for="c-41932674">[1 more]</label></div><br/><div class="children"><div class="content">That is pretty funny, and the whole idea that you can&#x27;t make money packaging open-source software in a way that&#x27;s more appealing to people is definitely funny given that this is the business model of a lot of successful companies<p>I do however think this leads to a lot of problems when those companies try to protect their business models, as we are seeing a lot of today</div><br/></div></div></div></div></div></div></div></div></div></div><div id="41930280" class="c"><input type="checkbox" id="c-41930280" checked=""/><div class="controls bullet"><span class="by">xyst</span><span>|</span><a href="#41931133">prev</a><span>|</span><a href="#41933416">next</a><span>|</span><label class="collapse" for="c-41930280">[-]</label><label class="expand" for="c-41930280">[10 more]</label></div><br/><div class="children"><div class="content">Underlying tech is “Openpubkey”.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;openpubkey&#x2F;openpubkey">https:&#x2F;&#x2F;github.com&#x2F;openpubkey&#x2F;openpubkey</a><p>BastionZero just builds on top of that to provide a “seamless” UX for ssh sessions and some auditing&#x2F;fedramp certification.<p>Personally, not a fan of relying on CF. Need less centralization&#x2F;consolidation into a few companies. It’s bad enough with MS dominating the OS (consumer) space. AWS dominating cloud computing. And CF filling the gaps between the stack.</div><br/><div id="41931415" class="c"><input type="checkbox" id="c-41931415" checked=""/><div class="controls bullet"><span class="by">aethros</span><span>|</span><a href="#41930280">parent</a><span>|</span><a href="#41930877">next</a><span>|</span><label class="collapse" for="c-41931415">[-]</label><label class="expand" for="c-41931415">[1 more]</label></div><br/><div class="children"><div class="content">The people at BastionZero built openpubkey. They are the paper authors. <a href="https:&#x2F;&#x2F;eprint.iacr.org&#x2F;2023&#x2F;296" rel="nofollow">https:&#x2F;&#x2F;eprint.iacr.org&#x2F;2023&#x2F;296</a><p>They didn&#x27;t &quot;build on top of&quot;--they built the thing.</div><br/></div></div><div id="41930877" class="c"><input type="checkbox" id="c-41930877" checked=""/><div class="controls bullet"><span class="by">lmz</span><span>|</span><a href="#41930280">parent</a><span>|</span><a href="#41931415">prev</a><span>|</span><a href="#41933106">next</a><span>|</span><label class="collapse" for="c-41930877">[-]</label><label class="expand" for="c-41930877">[1 more]</label></div><br/><div class="children"><div class="content">By &quot;just builds on top of that&quot; it sounds like the same people are building it <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41929483">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41929483</a> (compare username against GH repo).</div><br/></div></div><div id="41933106" class="c"><input type="checkbox" id="c-41933106" checked=""/><div class="controls bullet"><span class="by">datadeft</span><span>|</span><a href="#41930280">parent</a><span>|</span><a href="#41930877">prev</a><span>|</span><a href="#41932862">next</a><span>|</span><label class="collapse" for="c-41933106">[-]</label><label class="expand" for="c-41933106">[1 more]</label></div><br/><div class="children"><div class="content">&gt; BastionZero just builds on top of that to provide a “seamless” UX<p>Isn&#x27;t this what many of the companies do?</div><br/></div></div><div id="41932862" class="c"><input type="checkbox" id="c-41932862" checked=""/><div class="controls bullet"><span class="by">debarshri</span><span>|</span><a href="#41930280">parent</a><span>|</span><a href="#41933106">prev</a><span>|</span><a href="#41930633">next</a><span>|</span><label class="collapse" for="c-41932862">[-]</label><label class="expand" for="c-41932862">[1 more]</label></div><br/><div class="children"><div class="content">I think teleport operates in similar style.</div><br/></div></div><div id="41930633" class="c"><input type="checkbox" id="c-41930633" checked=""/><div class="controls bullet"><span class="by">ranger_danger</span><span>|</span><a href="#41930280">parent</a><span>|</span><a href="#41932862">prev</a><span>|</span><a href="#41933425">next</a><span>|</span><label class="collapse" for="c-41930633">[-]</label><label class="expand" for="c-41930633">[4 more]</label></div><br/><div class="children"><div class="content">Completely agree. I also don&#x27;t want to trust certificate authorities for my SSH connections let alone CF. Would not be surprised if it&#x2F;they were compromised.</div><br/><div id="41932949" class="c"><input type="checkbox" id="c-41932949" checked=""/><div class="controls bullet"><span class="by">looofooo0</span><span>|</span><a href="#41930280">root</a><span>|</span><a href="#41930633">parent</a><span>|</span><a href="#41932067">next</a><span>|</span><label class="collapse" for="c-41932949">[-]</label><label class="expand" for="c-41932949">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;www.usenix.org&#x2F;system&#x2F;files&#x2F;login&#x2F;articles&#x2F;105484-Gutmann.pdf" rel="nofollow">https:&#x2F;&#x2F;www.usenix.org&#x2F;system&#x2F;files&#x2F;login&#x2F;articles&#x2F;105484-Gu...</a> Well better than current run of things.</div><br/></div></div><div id="41932067" class="c"><input type="checkbox" id="c-41932067" checked=""/><div class="controls bullet"><span class="by">yjftsjthsd-h</span><span>|</span><a href="#41930280">root</a><span>|</span><a href="#41930633">parent</a><span>|</span><a href="#41932949">prev</a><span>|</span><a href="#41933425">next</a><span>|</span><label class="collapse" for="c-41932067">[-]</label><label class="expand" for="c-41932067">[2 more]</label></div><br/><div class="children"><div class="content">&gt; I also don&#x27;t want to trust certificate authorities for my SSH connections let alone CF. Would not be surprised if it&#x2F;they were compromised.<p>OpenPubkey, or in general? Normal SSH CAs don&#x27;t do PKI like browsers use, you make and trust your own CA(s). And if an attacker can compromise your CA private key, why can&#x27;t they compromise your SSH private key directly?</div><br/><div id="41932954" class="c"><input type="checkbox" id="c-41932954" checked=""/><div class="controls bullet"><span class="by">looofooo0</span><span>|</span><a href="#41930280">root</a><span>|</span><a href="#41932067">parent</a><span>|</span><a href="#41933425">next</a><span>|</span><label class="collapse" for="c-41932954">[-]</label><label class="expand" for="c-41932954">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;www.usenix.org&#x2F;system&#x2F;files&#x2F;login&#x2F;articles&#x2F;105484-Gutmann.pdf" rel="nofollow">https:&#x2F;&#x2F;www.usenix.org&#x2F;system&#x2F;files&#x2F;login&#x2F;articles&#x2F;105484-Gu...</a> + People just don&#x27;t check ssh keys normally.</div><br/></div></div></div></div></div></div></div></div><div id="41933416" class="c"><input type="checkbox" id="c-41933416" checked=""/><div class="controls bullet"><span class="by">rdtsc</span><span>|</span><a href="#41930280">prev</a><span>|</span><a href="#41930532">next</a><span>|</span><label class="collapse" for="c-41933416">[-]</label><label class="expand" for="c-41933416">[2 more]</label></div><br/><div class="children"><div class="content">By “ValidPrinciples” did they mean “ValidPrincipals”?<p>And by ZeroTrust they really mean OneTrust: trust CF. A classic off-by-one error :-)</div><br/></div></div></div></div></div></div></div></body></html>