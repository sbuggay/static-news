<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1722869859016" as="style"/><link rel="stylesheet" href="styles.css?v=1722869859016"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://flatt.tech/research/posts/beyond-the-limit-expanding-single-packet-race-condition-with-first-sequence-sync/">Single-packet race condition breaking the 65535 byte lim</a> <span class="domain">(<a href="https://flatt.tech">flatt.tech</a>)</span></div><div class="subtext"><span>chillax</span> | <span>22 comments</span></div><br/><div><div id="41159648" class="c"><input type="checkbox" id="c-41159648" checked=""/><div class="controls bullet"><span class="by">com</span><span>|</span><a href="#41161533">next</a><span>|</span><label class="collapse" for="c-41159648">[-]</label><label class="expand" for="c-41159648">[6 more]</label></div><br/><div class="children"><div class="content">Please don’t correct the title, it’s delightful as it is.</div><br/><div id="41159796" class="c"><input type="checkbox" id="c-41159796" checked=""/><div class="controls bullet"><span class="by">phito</span><span>|</span><a href="#41159648">parent</a><span>|</span><a href="#41159658">next</a><span>|</span><label class="collapse" for="c-41159796">[-]</label><label class="expand" for="c-41159796">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t see anything wro</div><br/></div></div><div id="41159658" class="c"><input type="checkbox" id="c-41159658" checked=""/><div class="controls bullet"><span class="by">genter</span><span>|</span><a href="#41159648">parent</a><span>|</span><a href="#41159796">prev</a><span>|</span><a href="#41159953">next</a><span>|</span><label class="collapse" for="c-41159658">[-]</label><label class="expand" for="c-41159658">[1 more]</label></div><br/><div class="children"><div class="content">Don&#x27;t think it would fit.</div><br/></div></div><div id="41159953" class="c"><input type="checkbox" id="c-41159953" checked=""/><div class="controls bullet"><span class="by">EADDRINUSE</span><span>|</span><a href="#41159648">parent</a><span>|</span><a href="#41159658">prev</a><span>|</span><a href="#41159892">next</a><span>|</span><label class="collapse" for="c-41159953">[-]</label><label class="expand" for="c-41159953">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t see any packetlo</div><br/></div></div><div id="41159892" class="c"><input type="checkbox" id="c-41159892" checked=""/><div class="controls bullet"><span class="by">floydian10</span><span>|</span><a href="#41159648">parent</a><span>|</span><a href="#41159953">prev</a><span>|</span><a href="#41159843">next</a><span>|</span><label class="collapse" for="c-41159892">[-]</label><label class="expand" for="c-41159892">[1 more]</label></div><br/><div class="children"><div class="content">What is wrong wit</div><br/></div></div></div></div><div id="41161533" class="c"><input type="checkbox" id="c-41161533" checked=""/><div class="controls bullet"><span class="by">algesten</span><span>|</span><a href="#41159648">prev</a><span>|</span><a href="#41160231">next</a><span>|</span><label class="collapse" for="c-41161533">[-]</label><label class="expand" for="c-41161533">[1 more]</label></div><br/><div class="children"><div class="content">I assume with HTTP&#x2F;1.1 this would be less useful, since each synchronized request would require another socket, thus hitting potential firewalls limiting SYN&#x2F;SYN-ACK rate and&#x2F;or concurrent connections from the same IP.<p>In some respects this is abusing the exact reason we got HTTP&#x2F;3 to replace HTTP&#x2F;2 – it&#x27;s a deliberate Head-of-Line (HoL) blocking.</div><br/></div></div><div id="41160231" class="c"><input type="checkbox" id="c-41160231" checked=""/><div class="controls bullet"><span class="by">simiones</span><span>|</span><a href="#41161533">prev</a><span>|</span><a href="#41159949">next</a><span>|</span><label class="collapse" for="c-41160231">[-]</label><label class="expand" for="c-41160231">[3 more]</label></div><br/><div class="children"><div class="content">It should be noted that IP fragmentation is quite limited and often buggy. IPv6 only requires receivers to re-assemble an IP packet that is at most 1500 bytes, so sending a 65KB TCP segment is quite likely to just result in dropped packets.<p>Alternatively, the 1500 limit is not a hard limit, and depends entirely on your link. Jumbo frames (~9000 bytes) and even beyond are possible if all the devices are configured in the right way. Additionally, IPv6 actually supports packets up to ~4GiB in size (so called &quot;jumbograms&quot;, with an additional header), though I think it would be truly hard to find any network which uses this feature.</div><br/><div id="41160888" class="c"><input type="checkbox" id="c-41160888" checked=""/><div class="controls bullet"><span class="by">gnfargbl</span><span>|</span><a href="#41160231">parent</a><span>|</span><a href="#41161138">next</a><span>|</span><label class="collapse" for="c-41160888">[-]</label><label class="expand" for="c-41160888">[1 more]</label></div><br/><div class="children"><div class="content">Indeed. If the attack works by exploiting (reliable) TCP re-ordering algorithms in the server then why also bother with (unreliable) IP fragmentation? Just send a larger number of out-of-order TCP packets, surely?</div><br/></div></div></div></div><div id="41159949" class="c"><input type="checkbox" id="c-41159949" checked=""/><div class="controls bullet"><span class="by">AstralStorm</span><span>|</span><a href="#41160231">prev</a><span>|</span><a href="#41160020">next</a><span>|</span><label class="collapse" for="c-41159949">[-]</label><label class="expand" for="c-41159949">[4 more]</label></div><br/><div class="children"><div class="content">So, is this a DoS technique or what?
Or trying to avoid TCP side transmission rate limits, which anyway should be implemented IP side?</div><br/><div id="41160539" class="c"><input type="checkbox" id="c-41160539" checked=""/><div class="controls bullet"><span class="by">edelbitter</span><span>|</span><a href="#41159949">parent</a><span>|</span><a href="#41160257">next</a><span>|</span><label class="collapse" for="c-41160539">[-]</label><label class="expand" for="c-41160539">[1 more]</label></div><br/><div class="children"><div class="content">Two techniques, even: More requests processed at once, after a very (bandwidth-adjusted) precisely user-controlled starting point.
One helps with race conditions in the server, the other helps racing 3rd party requests. Sending a highly-efficient &quot;go&quot; packet for many HTTP requests is sure ruining the fun for all the others awaiting some pre-announced concert ticket &#x2F; GPU sale to open.<p>If the website accounting is merely &quot;eventually consistent&quot; between threads&#x2F;servers <i>and</i> you are able to fire many (large) requests at a precise (determined by small packet) point in time, both techniques work in tandem - could have (one of) your post(s) appear with repeating digits (such as at <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=42000000">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=42000000</a>) without just seeing &quot;Sorry, we&#x27;re not able to serve your requests this quickly.&quot;</div><br/></div></div><div id="41160257" class="c"><input type="checkbox" id="c-41160257" checked=""/><div class="controls bullet"><span class="by">twoodfin</span><span>|</span><a href="#41159949">parent</a><span>|</span><a href="#41160539">prev</a><span>|</span><a href="#41160147">next</a><span>|</span><label class="collapse" for="c-41160257">[-]</label><label class="expand" for="c-41160257">[1 more]</label></div><br/><div class="children"><div class="content">Many real-world web applications “shockingly” don’t guarantee ACID-style transactional state updates, and thus are vulnerable to race conditions.<p>Suppose (for instance) that the application tier caches user session information by some internal, reused ID.<p>If that state is updated transactionally, with an ID assigned to a new session atomically with the insertion of that new session’s data, no problem.<p>But if the session is assigned a previously used ID a few microseconds before the new session’s data is populated, a racing request could see the old data from a different user.</div><br/></div></div><div id="41160147" class="c"><input type="checkbox" id="c-41160147" checked=""/><div class="controls bullet"><span class="by">AnssiH</span><span>|</span><a href="#41159949">parent</a><span>|</span><a href="#41160257">prev</a><span>|</span><a href="#41160020">next</a><span>|</span><label class="collapse" for="c-41160147">[-]</label><label class="expand" for="c-41160147">[1 more]</label></div><br/><div class="children"><div class="content">AFAICS this is about exploiting race condition bugs that require a large number of requests to be processed almost-simultaneously.</div><br/></div></div></div></div><div id="41161395" class="c"><input type="checkbox" id="c-41161395" checked=""/><div class="controls bullet"><span class="by">Out_of_Characte</span><span>|</span><a href="#41160020">prev</a><span>|</span><a href="#41160409">next</a><span>|</span><label class="collapse" for="c-41161395">[-]</label><label class="expand" for="c-41161395">[1 more]</label></div><br/><div class="children"><div class="content">This title is about as apt as my username</div><br/></div></div><div id="41160409" class="c"><input type="checkbox" id="c-41160409" checked=""/><div class="controls bullet"><span class="by">tontonius</span><span>|</span><a href="#41161395">prev</a><span>|</span><label class="collapse" for="c-41160409">[-]</label><label class="expand" for="c-41160409">[5 more]</label></div><br/><div class="children"><div class="content">&quot;Its not clear why TCP settled on such an oddly specific number&quot;</div><br/><div id="41161161" class="c"><input type="checkbox" id="c-41161161" checked=""/><div class="controls bullet"><span class="by">simiones</span><span>|</span><a href="#41160409">parent</a><span>|</span><a href="#41160901">next</a><span>|</span><label class="collapse" for="c-41161161">[-]</label><label class="expand" for="c-41161161">[2 more]</label></div><br/><div class="children"><div class="content">I couldn&#x27;t find any quote that is even remotely similar to this in the article. Can you give more context?</div><br/><div id="41161187" class="c"><input type="checkbox" id="c-41161187" checked=""/><div class="controls bullet"><span class="by">Avamander</span><span>|</span><a href="#41160409">root</a><span>|</span><a href="#41161161">parent</a><span>|</span><a href="#41160901">next</a><span>|</span><label class="collapse" for="c-41161187">[-]</label><label class="expand" for="c-41161187">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s probably a reference to the news article about Whatsapp increasing maximum group size to 256 and a journalist pondering over why such a specific number was chosen. OP probably meant it a similar sense, why was 65535 chosen (but it&#x27;s not really such a mystery).</div><br/></div></div></div></div><div id="41160901" class="c"><input type="checkbox" id="c-41160901" checked=""/><div class="controls bullet"><span class="by">Alifatisk</span><span>|</span><a href="#41160409">parent</a><span>|</span><a href="#41161161">prev</a><span>|</span><label class="collapse" for="c-41160901">[-]</label><label class="expand" for="c-41160901">[2 more]</label></div><br/><div class="children"><div class="content">I don’t know why the author said that, Is it really unclear to why?</div><br/></div></div></div></div></div></div></div></div></div></body></html>