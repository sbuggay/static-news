<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1715590866519" as="style"/><link rel="stylesheet" href="styles.css?v=1715590866519"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://aljamal.substack.com/p/homoiconic-python">Homoiconic Python</a> <span class="domain">(<a href="https://aljamal.substack.com">aljamal.substack.com</a>)</span></div><div class="subtext"><span>aburjg</span> | <span>59 comments</span></div><br/><div><div id="40336238" class="c"><input type="checkbox" id="c-40336238" checked=""/><div class="controls bullet"><span class="by">netbioserror</span><span>|</span><a href="#40336685">next</a><span>|</span><label class="collapse" for="c-40336238">[-]</label><label class="expand" for="c-40336238">[6 more]</label></div><br/><div class="children"><div class="content">Only tangentially related, but for anyone interested in the idea of a simple, quick Python-like scripting Lisp, there are two Clojure-style languages to look at:<p>1) Hy (<a href="https:&#x2F;&#x2F;hylang.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;hylang.org&#x2F;</a>, compiles to Python bytecode, usually slower than Python but compatible with all Python libraries)<p>2) Janet (<a href="https:&#x2F;&#x2F;janet-lang.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;janet-lang.org&#x2F;</a>, very light Lua-style embeddable VM ~1 Mb, roughly twice as fast as Python for similar ops, very easy C interop)</div><br/><div id="40338002" class="c"><input type="checkbox" id="c-40338002" checked=""/><div class="controls bullet"><span class="by">vindarel</span><span>|</span><a href="#40336238">parent</a><span>|</span><a href="#40338403">next</a><span>|</span><label class="collapse" for="c-40338002">[-]</label><label class="expand" for="c-40338002">[3 more]</label></div><br/><div class="children"><div class="content">&gt; quick python-like scripting<p>since we&#x27;re at it, why not a batteries-included Common Lisp: <a href="https:&#x2F;&#x2F;github.com&#x2F;ciel-lang&#x2F;ciel">https:&#x2F;&#x2F;github.com&#x2F;ciel-lang&#x2F;ciel</a> it comes as a binary that starts fast and that includes libraries for mundane tasks.<p>(for more CL&lt;-&gt;Python if anyone&#x27;s interested: <a href="https:&#x2F;&#x2F;github.com&#x2F;CodyReichert&#x2F;awesome-cl?tab=readme-ov-file#python">https:&#x2F;&#x2F;github.com&#x2F;CodyReichert&#x2F;awesome-cl?tab=readme-ov-fil...</a>)</div><br/><div id="40338160" class="c"><input type="checkbox" id="c-40338160" checked=""/><div class="controls bullet"><span class="by">koito17</span><span>|</span><a href="#40336238">root</a><span>|</span><a href="#40338002">parent</a><span>|</span><a href="#40340101">next</a><span>|</span><label class="collapse" for="c-40338160">[-]</label><label class="expand" for="c-40338160">[1 more]</label></div><br/><div class="children"><div class="content">Ciel is exactly what I wanted out of a &quot;scripting language&quot; that runs atop Common Lisp. Really glad that you mentioned it. The built-in SLY&#x2F;SLIME support makes me instantly want to ditch Babashka for this</div><br/></div></div><div id="40340101" class="c"><input type="checkbox" id="c-40340101" checked=""/><div class="controls bullet"><span class="by">trenchgun</span><span>|</span><a href="#40336238">root</a><span>|</span><a href="#40338002">parent</a><span>|</span><a href="#40338160">prev</a><span>|</span><a href="#40338403">next</a><span>|</span><label class="collapse" for="c-40340101">[-]</label><label class="expand" for="c-40340101">[1 more]</label></div><br/><div class="children"><div class="content">Ciel looks awesome</div><br/></div></div></div></div><div id="40338403" class="c"><input type="checkbox" id="c-40338403" checked=""/><div class="controls bullet"><span class="by">Kodiologist</span><span>|</span><a href="#40336238">parent</a><span>|</span><a href="#40338002">prev</a><span>|</span><a href="#40337497">next</a><span>|</span><label class="collapse" for="c-40338403">[-]</label><label class="expand" for="c-40338403">[1 more]</label></div><br/><div class="children"><div class="content">Hy slower than Python? It shouldn&#x27;t be, at least at run-time. I maintain Hy. If you notice any meaningful performance differences, that&#x27;s a bug.</div><br/></div></div><div id="40337497" class="c"><input type="checkbox" id="c-40337497" checked=""/><div class="controls bullet"><span class="by">refset</span><span>|</span><a href="#40336238">parent</a><span>|</span><a href="#40338403">prev</a><span>|</span><a href="#40336685">next</a><span>|</span><label class="collapse" for="c-40337497">[-]</label><label class="expand" for="c-40337497">[1 more]</label></div><br/><div class="children"><div class="content">3) Basilisp (<a href="https:&#x2F;&#x2F;github.com&#x2F;basilisp-lang&#x2F;basilisp">https:&#x2F;&#x2F;github.com&#x2F;basilisp-lang&#x2F;basilisp</a>, &quot;A Clojure-compatible(-ish) Lisp dialect targeting Python 3.8+&quot;)</div><br/></div></div></div></div><div id="40336685" class="c"><input type="checkbox" id="c-40336685" checked=""/><div class="controls bullet"><span class="by">Garlef</span><span>|</span><a href="#40336238">prev</a><span>|</span><a href="#40336676">next</a><span>|</span><label class="collapse" for="c-40336685">[-]</label><label class="expand" for="c-40336685">[6 more]</label></div><br/><div class="children"><div class="content">Wait... Isn&#x27;t this just an implementation of lisp in python?<p>It&#x27;s not a homoiconic version of python as the title sugests, right?<p>Or am I missing something?</div><br/><div id="40336830" class="c"><input type="checkbox" id="c-40336830" checked=""/><div class="controls bullet"><span class="by">evanjrowley</span><span>|</span><a href="#40336685">parent</a><span>|</span><a href="#40337143">next</a><span>|</span><label class="collapse" for="c-40336830">[-]</label><label class="expand" for="c-40336830">[1 more]</label></div><br/><div class="children"><div class="content">You would be correct according to Greenspun&#x27;s 10th Rule: <a href="https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Greenspun&#x27;s_tenth_rule" rel="nofollow">https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Greenspun&#x27;s_tenth_rule</a></div><br/></div></div><div id="40337143" class="c"><input type="checkbox" id="c-40337143" checked=""/><div class="controls bullet"><span class="by">dj_mc_merlin</span><span>|</span><a href="#40336685">parent</a><span>|</span><a href="#40336830">prev</a><span>|</span><a href="#40339208">next</a><span>|</span><label class="collapse" for="c-40337143">[-]</label><label class="expand" for="c-40337143">[3 more]</label></div><br/><div class="children"><div class="content">Yep. I also got really excited thinking this is homoiconic python I might be able to make my coworkers use (without having them buy into lisp). But no, it&#x27;s just lisp.</div><br/><div id="40339748" class="c"><input type="checkbox" id="c-40339748" checked=""/><div class="controls bullet"><span class="by">gus_massa</span><span>|</span><a href="#40336685">root</a><span>|</span><a href="#40337143">parent</a><span>|</span><a href="#40338649">next</a><span>|</span><label class="collapse" for="c-40339748">[-]</label><label class="expand" for="c-40339748">[1 more]</label></div><br/><div class="children"><div class="content">You may want to take a look at Rhombus, that is a somewhat-python-like language with macros that is written in Racket.<p>&gt; <i>Rhombus is an experimental, general-purpose programming language with conventional expression syntax that is built on Racket and that is macro-extensible in the same way as Racket.</i><p>It&#x27;s still work in progress, but you can install and run the prototype. I recomend to take a look at the &quot;demo&quot; file with examples <a href="https:&#x2F;&#x2F;github.com&#x2F;racket&#x2F;rhombus-prototype&#x2F;blob&#x2F;master&#x2F;demo.rhm">https:&#x2F;&#x2F;github.com&#x2F;racket&#x2F;rhombus-prototype&#x2F;blob&#x2F;master&#x2F;demo...</a><p>Or read the docs <a href="https:&#x2F;&#x2F;docs.racket-lang.org&#x2F;rhombus&#x2F;index.html" rel="nofollow">https:&#x2F;&#x2F;docs.racket-lang.org&#x2F;rhombus&#x2F;index.html</a> , in particular an overwiew in <a href="https:&#x2F;&#x2F;docs.racket-lang.org&#x2F;rhombus&#x2F;Modules.html" rel="nofollow">https:&#x2F;&#x2F;docs.racket-lang.org&#x2F;rhombus&#x2F;Modules.html</a> and some examples of macros in <a href="https:&#x2F;&#x2F;docs.racket-lang.org&#x2F;rhombus&#x2F;expr-macro.html" rel="nofollow">https:&#x2F;&#x2F;docs.racket-lang.org&#x2F;rhombus&#x2F;expr-macro.html</a>
.</div><br/></div></div></div></div><div id="40339208" class="c"><input type="checkbox" id="c-40339208" checked=""/><div class="controls bullet"><span class="by">matheusmoreira</span><span>|</span><a href="#40336685">parent</a><span>|</span><a href="#40337143">prev</a><span>|</span><a href="#40336676">next</a><span>|</span><label class="collapse" for="c-40339208">[-]</label><label class="expand" for="c-40339208">[1 more]</label></div><br/><div class="children"><div class="content">Looks like it. I was curious to witness this homoiconic Python but I&#x27;m not sure it&#x27;s even possible. For that to be true, Python syntax would have to be made out of tuples, lists or dictionaries, and the interpreter would have to evaluate those directly.</div><br/></div></div></div></div><div id="40336676" class="c"><input type="checkbox" id="c-40336676" checked=""/><div class="controls bullet"><span class="by">tromp</span><span>|</span><a href="#40336685">prev</a><span>|</span><a href="#40340750">next</a><span>|</span><label class="collapse" for="c-40336676">[-]</label><label class="expand" for="c-40336676">[1 more]</label></div><br/><div class="children"><div class="content">Another functional language that can be concisely implemented [1] in Python is Binary Lambda Calculus, with a large part of the code dealing with BLC&#x27;s pure I&#x2F;O model. Instead of using an association list for variable lookup, it uses de-Bruijn indices to index the environment array. The same page shows implementations in 9 other languages, with BLC&#x27;s self interpreter being the most concise at 232 bits (29 bytes), which includes a parser and tokenizer.<p>[1] <a href="https:&#x2F;&#x2F;rosettacode.org&#x2F;wiki&#x2F;Universal_Lambda_Machine#Python" rel="nofollow">https:&#x2F;&#x2F;rosettacode.org&#x2F;wiki&#x2F;Universal_Lambda_Machine#Python</a></div><br/></div></div><div id="40340750" class="c"><input type="checkbox" id="c-40340750" checked=""/><div class="controls bullet"><span class="by">fire_lake</span><span>|</span><a href="#40336676">prev</a><span>|</span><a href="#40337919">next</a><span>|</span><label class="collapse" for="c-40340750">[-]</label><label class="expand" for="c-40340750">[1 more]</label></div><br/><div class="children"><div class="content">An expression-orientated Python would be so much better than the Python we have now.<p>This article is not what the title suggests, but it’s a good explanation of Lisp.</div><br/></div></div><div id="40337919" class="c"><input type="checkbox" id="c-40337919" checked=""/><div class="controls bullet"><span class="by">programjames</span><span>|</span><a href="#40340750">prev</a><span>|</span><a href="#40340287">next</a><span>|</span><label class="collapse" for="c-40337919">[-]</label><label class="expand" for="c-40337919">[2 more]</label></div><br/><div class="children"><div class="content">MIT&#x27;s fundamentals of programming course requires all its students to write a Lisp interpreter in Python. It&#x27;s a throwback to when the class actually was in Lisp.<p><a href="https:&#x2F;&#x2F;py.mit.edu&#x2F;spring24" rel="nofollow">https:&#x2F;&#x2F;py.mit.edu&#x2F;spring24</a></div><br/><div id="40337937" class="c"><input type="checkbox" id="c-40337937" checked=""/><div class="controls bullet"><span class="by">yismail</span><span>|</span><a href="#40337919">parent</a><span>|</span><a href="#40340287">next</a><span>|</span><label class="collapse" for="c-40337937">[-]</label><label class="expand" for="c-40337937">[1 more]</label></div><br/><div class="children"><div class="content">Similarly a course I took in university made us implement a (rudimentary) Lisp interpreter in Lisp.</div><br/></div></div></div></div><div id="40340287" class="c"><input type="checkbox" id="c-40340287" checked=""/><div class="controls bullet"><span class="by">okaleniuk</span><span>|</span><a href="#40337919">prev</a><span>|</span><a href="#40340662">next</a><span>|</span><label class="collapse" for="c-40340287">[-]</label><label class="expand" for="c-40340287">[4 more]</label></div><br/><div class="children"><div class="content">I also played with the same idea some time ago: <a href="https:&#x2F;&#x2F;github.com&#x2F;akalenuk&#x2F;fakelisp">https:&#x2F;&#x2F;github.com&#x2F;akalenuk&#x2F;fakelisp</a><p>I ended up using tuples instead of lists for cosmetic purposes :-) My Fakelisp then looks like this:<p><pre><code>    from fakelisp import *
    
    # And now you can start mixing Python and LISP
    X = (BEGIN
        (SET (F) (LAMBDA (X)
            (IF (EQ (X) (1))
                (1)
                (MUL (X) (F (SUB (X) (1)))))))

        (LIST (F (4)) (42)))

    # Back to Python any time
    print &quot;x: &quot;, str(X)</code></pre></div><br/><div id="40340501" class="c"><input type="checkbox" id="c-40340501" checked=""/><div class="controls bullet"><span class="by">Galanwe</span><span>|</span><a href="#40340287">parent</a><span>|</span><a href="#40340662">next</a><span>|</span><label class="collapse" for="c-40340501">[-]</label><label class="expand" for="c-40340501">[3 more]</label></div><br/><div class="children"><div class="content">Just curious, how did you manage to get that syntax?<p>If it&#x27;s tuples, then how did you get rid of the commas?<p>If it&#x27;s functions, how do you get rid of parens around scalars?</div><br/><div id="40340591" class="c"><input type="checkbox" id="c-40340591" checked=""/><div class="controls bullet"><span class="by">okaleniuk</span><span>|</span><a href="#40340287">root</a><span>|</span><a href="#40340501">parent</a><span>|</span><a href="#40340662">next</a><span>|</span><label class="collapse" for="c-40340591">[-]</label><label class="expand" for="c-40340591">[2 more]</label></div><br/><div class="children"><div class="content">Oh, that&#x27;s easy. It is functions, and I didn&#x27;t get rid of parents around scalars :-)</div><br/><div id="40340627" class="c"><input type="checkbox" id="c-40340627" checked=""/><div class="controls bullet"><span class="by">Galanwe</span><span>|</span><a href="#40340287">root</a><span>|</span><a href="#40340591">parent</a><span>|</span><a href="#40340662">next</a><span>|</span><label class="collapse" for="c-40340627">[-]</label><label class="expand" for="c-40340627">[1 more]</label></div><br/><div class="children"><div class="content">Haha thanks, cute project :-)</div><br/></div></div></div></div></div></div></div></div><div id="40340662" class="c"><input type="checkbox" id="c-40340662" checked=""/><div class="controls bullet"><span class="by">anonzzzies</span><span>|</span><a href="#40340287">prev</a><span>|</span><a href="#40338384">next</a><span>|</span><label class="collapse" for="c-40340662">[-]</label><label class="expand" for="c-40340662">[1 more]</label></div><br/><div class="children"><div class="content">I would like everything to have Lisp (no) syntax. It makes things nicer for me; luckily it’s easy to do that in CL.</div><br/></div></div><div id="40338384" class="c"><input type="checkbox" id="c-40338384" checked=""/><div class="controls bullet"><span class="by">1equalsequals1</span><span>|</span><a href="#40340662">prev</a><span>|</span><a href="#40336133">next</a><span>|</span><label class="collapse" for="c-40338384">[-]</label><label class="expand" for="c-40338384">[1 more]</label></div><br/><div class="children"><div class="content">How is this implementation homoiconic Python?</div><br/></div></div><div id="40336133" class="c"><input type="checkbox" id="c-40336133" checked=""/><div class="controls bullet"><span class="by">andrelaszlo</span><span>|</span><a href="#40338384">prev</a><span>|</span><a href="#40337688">next</a><span>|</span><label class="collapse" for="c-40336133">[-]</label><label class="expand" for="c-40336133">[1 more]</label></div><br/><div class="children"><div class="content">I did something along those lines with JS lists: <a href="https:&#x2F;&#x2F;github.com&#x2F;andrelaszlo&#x2F;js-lisp">https:&#x2F;&#x2F;github.com&#x2F;andrelaszlo&#x2F;js-lisp</a></div><br/></div></div><div id="40336270" class="c"><input type="checkbox" id="c-40336270" checked=""/><div class="controls bullet"><span class="by">behnamoh</span><span>|</span><a href="#40337688">prev</a><span>|</span><a href="#40336188">next</a><span>|</span><label class="collapse" for="c-40336270">[-]</label><label class="expand" for="c-40336270">[31 more]</label></div><br/><div class="children"><div class="content">I find it funny and also ironic that a lot of modern languages re-discover Lisp&#x27;s amazing features decades later. The other day I was infuriated to see my Python program halt after 9 hours of API calling to my own home server. The API calls were similar (calling an LLM with a pre-defined prompt template, constrained using grammars). I wanted to save the state of the program and exit it before running the remaining iterations separately. So I needed a way to modify the current running Python code and inspect the variables. I couldn&#x27;t figure out a way to &quot;dig into&quot; the running Python process and save the state and&#x2F;or fix it. So I lost 9 hours worth of work.<p>A couple days later, I saw this:<p><a href="https:&#x2F;&#x2F;malisper.me&#x2F;debugging-lisp-part-1-recompilation&#x2F;" rel="nofollow">https:&#x2F;&#x2F;malisper.me&#x2F;debugging-lisp-part-1-recompilation&#x2F;</a><p>The fact that CL had this feature built into the language decades ago just blows my mind. Not to mention numerous other features (like the most powerful macro system there is), etc.</div><br/><div id="40336577" class="c"><input type="checkbox" id="c-40336577" checked=""/><div class="controls bullet"><span class="by">eikenberry</span><span>|</span><a href="#40336270">parent</a><span>|</span><a href="#40337819">next</a><span>|</span><label class="collapse" for="c-40336577">[-]</label><label class="expand" for="c-40336577">[13 more]</label></div><br/><div class="children"><div class="content">&gt; I find it funny and also ironic that a lot of modern languages re-discover Lisp&#x27;s amazing features decades later.<p>This is never surprising as Lispy languages are some of the most flexible and expressive languages. But that&#x27;s the problem, it is too expressive. The Lisps always reminded me of mixed media (visual) art, where the freedom of expression from the mixed media sounds good on the face of it but in the end it generally produces sub-par works compared to more traditional single media art. It turns out that the restrictions of the medium are just as important as the expressiveness.</div><br/><div id="40336962" class="c"><input type="checkbox" id="c-40336962" checked=""/><div class="controls bullet"><span class="by">cess11</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40336577">parent</a><span>|</span><a href="#40336684">next</a><span>|</span><label class="collapse" for="c-40336962">[-]</label><label class="expand" for="c-40336962">[11 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve seen shitty code running in &#x27;prod&#x27; at every employment I&#x27;ve had as a developer. The language isn&#x27;t that important, the people and the organisation are.</div><br/><div id="40337488" class="c"><input type="checkbox" id="c-40337488" checked=""/><div class="controls bullet"><span class="by">rowanG077</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40336962">parent</a><span>|</span><a href="#40336684">next</a><span>|</span><label class="collapse" for="c-40337488">[-]</label><label class="expand" for="c-40337488">[10 more]</label></div><br/><div class="children"><div class="content">Language is very important. Bad code in python is at least still python. Bad code in lisp can be an inpenetrable eldritch abomination where the only option is to rewrite from scratch. I believe this is actually the primary reason google build go. You can&#x27;t write good code. But you also can&#x27;t write really bad code.</div><br/><div id="40338232" class="c"><input type="checkbox" id="c-40338232" checked=""/><div class="controls bullet"><span class="by">Pannoniae</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40337488">parent</a><span>|</span><a href="#40337619">next</a><span>|</span><label class="collapse" for="c-40338232">[-]</label><label class="expand" for="c-40338232">[1 more]</label></div><br/><div class="children"><div class="content">&quot;I believe this is actually the primary reason google build go.&quot; Well the <i>actual</i> quiet part is that they built Go to reduce costs of paying those highly trained software engineers and replace them with moderately trained monkeys.</div><br/></div></div><div id="40337619" class="c"><input type="checkbox" id="c-40337619" checked=""/><div class="controls bullet"><span class="by">cess11</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40337488">parent</a><span>|</span><a href="#40338232">prev</a><span>|</span><a href="#40336684">next</a><span>|</span><label class="collapse" for="c-40337619">[-]</label><label class="expand" for="c-40337619">[8 more]</label></div><br/><div class="children"><div class="content">Why do you believe it impossible for Python to be impenetrable?<p>A Common Lisp will likely be much more introspectable and debuggable than your average CPython.<p>I think Google designed Golang to be a small language for implementing network services that will tie newcomers to programming hard to that specific language and then also Google. Hence the syntactic quirks and the err spectre. That it enables development of CLI applications was likely an unexpected bonus.</div><br/><div id="40339839" class="c"><input type="checkbox" id="c-40339839" checked=""/><div class="controls bullet"><span class="by">kunley</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40337619">parent</a><span>|</span><a href="#40337772">next</a><span>|</span><label class="collapse" for="c-40339839">[-]</label><label class="expand" for="c-40339839">[3 more]</label></div><br/><div class="children"><div class="content">@cess11 on Golang, no, rather Ken Thompson and colleagues designed a language stripped off things they find as an unnecessary cruft and they could finally get back to the fun they had before Java and OO.</div><br/><div id="40340315" class="c"><input type="checkbox" id="c-40340315" checked=""/><div class="controls bullet"><span class="by">grumpyprole</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40339839">parent</a><span>|</span><a href="#40339907">next</a><span>|</span><label class="collapse" for="c-40340315">[-]</label><label class="expand" for="c-40340315">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t disagree that Java has cruft, but Go didn&#x27;t fix data races, nulls or lack of sum types. It&#x27;s not a &quot;fun&quot; language for me.</div><br/></div></div><div id="40339907" class="c"><input type="checkbox" id="c-40339907" checked=""/><div class="controls bullet"><span class="by">cess11</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40339839">parent</a><span>|</span><a href="#40340315">prev</a><span>|</span><a href="#40337772">next</a><span>|</span><label class="collapse" for="c-40339907">[-]</label><label class="expand" for="c-40339907">[1 more]</label></div><br/><div class="children"><div class="content">&quot;Finally&quot;.</div><br/></div></div></div></div><div id="40337772" class="c"><input type="checkbox" id="c-40337772" checked=""/><div class="controls bullet"><span class="by">dudinax</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40337619">parent</a><span>|</span><a href="#40339839">prev</a><span>|</span><a href="#40337857">next</a><span>|</span><label class="collapse" for="c-40337772">[-]</label><label class="expand" for="c-40337772">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not impossible for python to be impenetrable, but it usually isn&#x27;t.</div><br/><div id="40339945" class="c"><input type="checkbox" id="c-40339945" checked=""/><div class="controls bullet"><span class="by">cess11</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40337772">parent</a><span>|</span><a href="#40337857">next</a><span>|</span><label class="collapse" for="c-40339945">[-]</label><label class="expand" for="c-40339945">[1 more]</label></div><br/><div class="children"><div class="content">But Lisp usually is, or what?</div><br/></div></div></div></div><div id="40337857" class="c"><input type="checkbox" id="c-40337857" checked=""/><div class="controls bullet"><span class="by">rowanG077</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40337619">parent</a><span>|</span><a href="#40337772">prev</a><span>|</span><a href="#40336684">next</a><span>|</span><label class="collapse" for="c-40337857">[-]</label><label class="expand" for="c-40337857">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not impossible. But rather much less likely. And even less likely to do by accident. Lisp by itself basically encourages programming deviating from standard practices. That the entire reason it&#x27;s so powerful. It takes a real genius in addition to strong restraint to keep writing good code in that environment.</div><br/><div id="40339915" class="c"><input type="checkbox" id="c-40339915" checked=""/><div class="controls bullet"><span class="by">cess11</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40337857">parent</a><span>|</span><a href="#40336684">next</a><span>|</span><label class="collapse" for="c-40339915">[-]</label><label class="expand" for="c-40339915">[1 more]</label></div><br/><div class="children"><div class="content">What do you mean, &quot;encourages programming deviating from standard practices&quot;?</div><br/></div></div></div></div></div></div></div></div></div></div><div id="40336684" class="c"><input type="checkbox" id="c-40336684" checked=""/><div class="controls bullet"><span class="by">sweeter</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40336577">parent</a><span>|</span><a href="#40336962">prev</a><span>|</span><a href="#40337819">next</a><span>|</span><label class="collapse" for="c-40336684">[-]</label><label class="expand" for="c-40336684">[1 more]</label></div><br/><div class="children"><div class="content">thats a great analogy.</div><br/></div></div></div></div><div id="40337819" class="c"><input type="checkbox" id="c-40337819" checked=""/><div class="controls bullet"><span class="by">albertzeyer</span><span>|</span><a href="#40336270">parent</a><span>|</span><a href="#40336577">prev</a><span>|</span><a href="#40336461">next</a><span>|</span><label class="collapse" for="c-40337819">[-]</label><label class="expand" for="c-40337819">[1 more]</label></div><br/><div class="children"><div class="content">Py-spy or Pystack to inspect the state to certain degree.<p>Or <a href="https:&#x2F;&#x2F;github.com&#x2F;malor&#x2F;cpython-lldb">https:&#x2F;&#x2F;github.com&#x2F;malor&#x2F;cpython-lldb</a>.<p>Or more here: <a href="https:&#x2F;&#x2F;github.com&#x2F;albertz&#x2F;pydbattach&#x2F;">https:&#x2F;&#x2F;github.com&#x2F;albertz&#x2F;pydbattach&#x2F;</a></div><br/></div></div><div id="40336295" class="c"><input type="checkbox" id="c-40336295" checked=""/><div class="controls bullet"><span class="by">pyuser583</span><span>|</span><a href="#40336270">parent</a><span>|</span><a href="#40336461">prev</a><span>|</span><a href="#40338352">next</a><span>|</span><label class="collapse" for="c-40336295">[-]</label><label class="expand" for="c-40336295">[13 more]</label></div><br/><div class="children"><div class="content">Was there no exception being thrown?</div><br/><div id="40336452" class="c"><input type="checkbox" id="c-40336452" checked=""/><div class="controls bullet"><span class="by">kqr</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40336295">parent</a><span>|</span><a href="#40338352">next</a><span>|</span><label class="collapse" for="c-40336452">[-]</label><label class="expand" for="c-40336452">[12 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t know how that would have helped. Most languages (including Python, AFAIK) unwind the stack when an exception is thrown, all the way up to the nearest catch. Whatever you wanted to do at the place of throwage is no longer possible because that stack doesn&#x27;t exist other than as an incomplete printout.<p>In contrast, Common Lisps condition system keeps all stack between throw and catch so you can resume from anywhere in between, possibly with altered code or local variables.<p>Basically, Common Lisps exception stack traces are interactive by default.</div><br/><div id="40336552" class="c"><input type="checkbox" id="c-40336552" checked=""/><div class="controls bullet"><span class="by">aidos</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40336452">parent</a><span>|</span><a href="#40337043">next</a><span>|</span><label class="collapse" for="c-40336552">[-]</label><label class="expand" for="c-40336552">[6 more]</label></div><br/><div class="children"><div class="content">I don’t quite understand what sort of state the system is in at this stage. So the process has errored but not exited?<p>I know that during the exception you can pry into the variables from the stack. When do they get cleaned up?<p><a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;a&#x2F;5328139&#x2F;171450" rel="nofollow">https:&#x2F;&#x2F;stackoverflow.com&#x2F;a&#x2F;5328139&#x2F;171450</a></div><br/><div id="40336627" class="c"><input type="checkbox" id="c-40336627" checked=""/><div class="controls bullet"><span class="by">behnamoh</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40336552">parent</a><span>|</span><a href="#40337043">next</a><span>|</span><label class="collapse" for="c-40336627">[-]</label><label class="expand" for="c-40336627">[5 more]</label></div><br/><div class="children"><div class="content">For that to happen, you must have implemented what that SO answer says in your code. In contrast, CL allows you to modify the current running code and apply fixes.</div><br/><div id="40336956" class="c"><input type="checkbox" id="c-40336956" checked=""/><div class="controls bullet"><span class="by">aidos</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40336627">parent</a><span>|</span><a href="#40337043">next</a><span>|</span><label class="collapse" for="c-40336956">[-]</label><label class="expand" for="c-40336956">[4 more]</label></div><br/><div class="children"><div class="content">I guess I’m confused about what running code even <i>means</i> after the exception. The process has crashed. Is it waiting to be reaped by a parent process?</div><br/><div id="40337289" class="c"><input type="checkbox" id="c-40337289" checked=""/><div class="controls bullet"><span class="by">lispm</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40336956">parent</a><span>|</span><a href="#40337319">next</a><span>|</span><label class="collapse" for="c-40337289">[-]</label><label class="expand" for="c-40337289">[1 more]</label></div><br/><div class="children"><div class="content">If there is an exception a matching error handler will be selected and called in the context of the error. A default handler could be a debugger, a break loop (which is a Lisp REPL), something which asks the user waht to do or it could be a handler provided by the software, which could do anything, including looking for restarts and using one.<p>For example the variable a is unbound and we try to add 3.<p><pre><code>    CL-USER 37 &gt; (+ 3 a)
</code></pre>
CL shows an UNBOUND-VARIABLE error and provides Restarts. Restart 3 is a USE-VALUE restart.<p><pre><code>    Error: The variable A is unbound.
      1 (continue) Try evaluating A again.
      2 Return the value of :A instead.
      3 Specify a value to use this time instead of evaluating A.
      4 Specify a value to set A to.
      5 (abort) Return to top loop level 0.

    Type :b for backtrace or :c &lt;option number&gt; to proceed.
    Type :bug-form &quot;&lt;subject&gt;&quot; for a bug report template or :? for other options.
</code></pre>
We are now in a break loop, a REPL one level deeper, in the context of the error. Let&#x27;s see what the condition (-&gt; exception) is:<p><pre><code>    CL-USER 38 : 1 &gt; :cc
    #&lt;UNBOUND-VARIABLE 8010002EC3&gt;
</code></pre>
we call one restart (listed above, number 3) interactively, it uses the new value and continues to compute the expression. It asks for a value. I enter 5 -&gt; 5 + 3 = 8<p><pre><code>    CL-USER 39 : 1 &gt; :c 3

    Enter a form to be evaluated: 5
    8
</code></pre>
We can do it also programmatically. HANDLER-BIND establishes a handler for UNBOUND-VARIABLE. It invokes the restart USE-VALUE with 4 -&gt; 3 + 4 = 7<p><pre><code>    CL-USER 40 &gt; (handler-bind ((unbound-variable #&#x27;(lambda (c)
                                                      (invoke-restart &#x27;use-value 4))))
                   (+ 3 a))
    7
</code></pre>
All this is the default behavior. There is no special &quot;debug mode&quot;, attaching a debugger or &quot;instrumentation of code&quot; needed.</div><br/></div></div><div id="40337319" class="c"><input type="checkbox" id="c-40337319" checked=""/><div class="controls bullet"><span class="by">kqr</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40336956">parent</a><span>|</span><a href="#40337289">prev</a><span>|</span><a href="#40337343">next</a><span>|</span><label class="collapse" for="c-40337319">[-]</label><label class="expand" for="c-40337319">[1 more]</label></div><br/><div class="children"><div class="content">In the CL condition system they have separated error detection (exception thrown) from handler selection (catching exception) <i>and</i> handler implementation (what are called &quot;restarts&quot;.)<p>So basically instead of registering one handler (catch block) that is responsible both for determining the proper course of action and implementing it, the condition system allows you to register multiple &quot;restarting points&quot; which the handler can select from when deciding how to handle the error.<p>One of the restarts often used in debugging is restarting any of the functions in the call chain, i.e. just trying the same thing again. But just as common is varying some parameter or local variable and <i>then</i> restarting the function.</div><br/></div></div><div id="40337343" class="c"><input type="checkbox" id="c-40337343" checked=""/><div class="controls bullet"><span class="by">pyuser583</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40336956">parent</a><span>|</span><a href="#40337319">prev</a><span>|</span><a href="#40337043">next</a><span>|</span><label class="collapse" for="c-40337343">[-]</label><label class="expand" for="c-40337343">[1 more]</label></div><br/><div class="children"><div class="content">The process hasn’t crashed after an exception. It still might even exit with a success error code, if you really want it to.<p>An exception is raised when you attempt to parse HTML as JSON. The process doesn’t end. You catch the exception, see what happened, and respond with a 400.</div><br/></div></div></div></div></div></div></div></div><div id="40337043" class="c"><input type="checkbox" id="c-40337043" checked=""/><div class="controls bullet"><span class="by">kortex</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40336452">parent</a><span>|</span><a href="#40336552">prev</a><span>|</span><a href="#40336493">next</a><span>|</span><label class="collapse" for="c-40337043">[-]</label><label class="expand" for="c-40337043">[3 more]</label></div><br/><div class="children"><div class="content">&gt; Most languages (including Python, AFAIK) unwind the stack when an exception is thrown, all the way up to the nearest catch.<p>You might have to use a few tricks&#x2F;hacks, but I&#x27;m pretty sure you can set up python in a way to breakpoint at an exception, including all local state at the throw site. Otherwise pdb would not work.</div><br/><div id="40337329" class="c"><input type="checkbox" id="c-40337329" checked=""/><div class="controls bullet"><span class="by">pyuser583</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40337043">parent</a><span>|</span><a href="#40336493">next</a><span>|</span><label class="collapse" for="c-40337329">[-]</label><label class="expand" for="c-40337329">[2 more]</label></div><br/><div class="children"><div class="content">Definitely.<p>It’s very possible to pause (pdb-like) or persist the local state&#x2F;stack.<p>But there needs to be an actual exception.<p>If someone pulls the power cord, you’re out of luck.</div><br/><div id="40340795" class="c"><input type="checkbox" id="c-40340795" checked=""/><div class="controls bullet"><span class="by">fransje26</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40337329">parent</a><span>|</span><a href="#40336493">next</a><span>|</span><label class="collapse" for="c-40340795">[-]</label><label class="expand" for="c-40340795">[1 more]</label></div><br/><div class="children"><div class="content">Can the program be recovered once the exception is thrown and you start debugging? Or is the keeping of the stack the last allowed state before exiting?</div><br/></div></div></div></div></div></div><div id="40336493" class="c"><input type="checkbox" id="c-40336493" checked=""/><div class="controls bullet"><span class="by">ptsneves</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40336452">parent</a><span>|</span><a href="#40337043">prev</a><span>|</span><a href="#40338352">next</a><span>|</span><label class="collapse" for="c-40336493">[-]</label><label class="expand" for="c-40336493">[2 more]</label></div><br/><div class="children"><div class="content">Ironically that stack unwinding is exactly why I like a straight old sigsegv.<p>Just dump the core and analyse the frozen state. One thing that annoyed me in go is that even when it core dumps on panic and after I  worked on the backtrace analyser for gdb, most of the core dumps were useless as everything of worth was already unwound and lost.</div><br/><div id="40336696" class="c"><input type="checkbox" id="c-40336696" checked=""/><div class="controls bullet"><span class="by">mananaysiempre</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40336493">parent</a><span>|</span><a href="#40338352">next</a><span>|</span><label class="collapse" for="c-40336696">[-]</label><label class="expand" for="c-40336696">[1 more]</label></div><br/><div class="children"><div class="content">Hidden in plain sight is the fact is that structured exception handling in 32-bit Windows (the linked-list-on-the-stack version[1,2], not saying anything about the gigantic-tables “zero-cost” version) is a <i>resumable</i> exception system a la Common Lisp conditions—inevitably, seeing as it subsumes SIGSEGV coredumps!<p>[1] <a href="http:&#x2F;&#x2F;bytepointer.com&#x2F;resources&#x2F;pietrek_crash_course_depths_of_win32_seh.htm" rel="nofollow">http:&#x2F;&#x2F;bytepointer.com&#x2F;resources&#x2F;pietrek_crash_course_depths...</a><p>[2] <a href="http:&#x2F;&#x2F;bytepointer.com&#x2F;resources&#x2F;pietrek_vectored_exception_handling.htm" rel="nofollow">http:&#x2F;&#x2F;bytepointer.com&#x2F;resources&#x2F;pietrek_vectored_exception_...</a></div><br/></div></div></div></div></div></div></div></div><div id="40338352" class="c"><input type="checkbox" id="c-40338352" checked=""/><div class="controls bullet"><span class="by">mixmastamyk</span><span>|</span><a href="#40336270">parent</a><span>|</span><a href="#40336295">prev</a><span>|</span><a href="#40336188">next</a><span>|</span><label class="collapse" for="c-40338352">[-]</label><label class="expand" for="c-40338352">[2 more]</label></div><br/><div class="children"><div class="content">If you have a process running for multiple hours, it should be saving work to disk and be ready to pick up where it left off.</div><br/><div id="40340182" class="c"><input type="checkbox" id="c-40340182" checked=""/><div class="controls bullet"><span class="by">fermigier</span><span>|</span><a href="#40336270">root</a><span>|</span><a href="#40338352">parent</a><span>|</span><a href="#40336188">next</a><span>|</span><label class="collapse" for="c-40340182">[-]</label><label class="expand" for="c-40340182">[1 more]</label></div><br/><div class="children"><div class="content">Indeed. Using Joblib for instance (<a href="https:&#x2F;&#x2F;joblib.readthedocs.io&#x2F;" rel="nofollow">https:&#x2F;&#x2F;joblib.readthedocs.io&#x2F;</a>).</div><br/></div></div></div></div></div></div><div id="40336200" class="c"><input type="checkbox" id="c-40336200" checked=""/><div class="controls bullet"><span class="by">frozenport</span><span>|</span><a href="#40336188">prev</a><span>|</span><a href="#40336131">next</a><span>|</span><label class="collapse" for="c-40336200">[-]</label><label class="expand" for="c-40336200">[1 more]</label></div><br/><div class="children"><div class="content">Appears it takes an LLM running on the fastest computers in the world to read lisp</div><br/></div></div></div></div></div></div></div></body></html>