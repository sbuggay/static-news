<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1715504454133" as="style"/><link rel="stylesheet" href="styles.css?v=1715504454133"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="http://oldvcr.blogspot.com/2024/04/virtualizing-6502-with-6o6-and.html">Virtualizing the 6502 on a 6502 with 6o6</a> <span class="domain">(<a href="http://oldvcr.blogspot.com">oldvcr.blogspot.com</a>)</span></div><div class="subtext"><span>goldenskye</span> | <span>9 comments</span></div><br/><div><div id="40333118" class="c"><input type="checkbox" id="c-40333118" checked=""/><div class="controls bullet"><span class="by">drpossum</span><span>|</span><a href="#40332393">next</a><span>|</span><label class="collapse" for="c-40333118">[-]</label><label class="expand" for="c-40333118">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;archive.fo&#x2F;2u3Y8" rel="nofollow">https:&#x2F;&#x2F;archive.fo&#x2F;2u3Y8</a></div><br/></div></div><div id="40332393" class="c"><input type="checkbox" id="c-40332393" checked=""/><div class="controls bullet"><span class="by">userbinator</span><span>|</span><a href="#40333118">prev</a><span>|</span><a href="#40332480">next</a><span>|</span><label class="collapse" for="c-40332393">[-]</label><label class="expand" for="c-40332393">[2 more]</label></div><br/><div class="children"><div class="content">Despite how simple and limited the 6502 is, it&#x27;s always interesting to see this almost 50-year-old architecture being stretched to new limits. 6502 cores are still found in some SoCs aimed at the ultra-low-cost high-volume market.</div><br/><div id="40332573" class="c"><input type="checkbox" id="c-40332573" checked=""/><div class="controls bullet"><span class="by">dailykoder</span><span>|</span><a href="#40332393">parent</a><span>|</span><a href="#40332480">next</a><span>|</span><label class="collapse" for="c-40332573">[-]</label><label class="expand" for="c-40332573">[1 more]</label></div><br/><div class="children"><div class="content">&gt; 6502 cores are still found in some SoCs aimed at the ultra-low-cost high-volume market.<p>What&#x27;s the reason behind that? Probably just keeping existing, working designs and thus saving R&amp;D costs? Sounds like beating a 10 cent risc-v core would be hard.<p>Edit: When I first read your comment I had to chuckle a bit, because I got the image of a multicore SoC with 6502 6502 cores. That would be a fun project for my FPGA hmmmmmmmm ...</div><br/></div></div></div></div><div id="40332480" class="c"><input type="checkbox" id="c-40332480" checked=""/><div class="controls bullet"><span class="by">sitkack</span><span>|</span><a href="#40332393">prev</a><span>|</span><label class="collapse" for="c-40332480">[-]</label><label class="expand" for="c-40332480">[5 more]</label></div><br/><div class="children"><div class="content">This post has been hanging out with no comments for ages. I was like, I&#x27;ll skim it later.<p>&gt; It&#x27;s almost burying the lede to announce that, though, because the real meat in this entry is how the Commodore 64 manages to emulate a very different 6502-based system. That piece is &quot;6o6,&quot; for &quot;6502-on-6502,&quot; and is a full virtualized software NMOS 6502 CPU that runs on a 6502 CPU — which I&#x27;ve open-sourced too. It has full control of guest code execution, including trapping undocumented and jam opcodes, and completely abstracts all memory access, making it possible to remap addresses, intercept illegal reads or writes, or even run entirely from virtual memory. On top of that, it&#x27;s complete enough to not only pass a full functional test but also virtualize itself virtualizing itself:<p>This is incredible! Not just from a 6502 perspective, but from an everything perspective! Amazing work.<p>Also, it reminded me of this &quot;The Zilog Z80 has a Protected Mode&quot; <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=DLSUAVPKeYk" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=DLSUAVPKeYk</a> posted to hn, but got no discussion.</div><br/><div id="40332565" class="c"><input type="checkbox" id="c-40332565" checked=""/><div class="controls bullet"><span class="by">FLT8</span><span>|</span><a href="#40332480">parent</a><span>|</span><a href="#40332510">next</a><span>|</span><label class="collapse" for="c-40332565">[-]</label><label class="expand" for="c-40332565">[3 more]</label></div><br/><div class="children"><div class="content">Also related: C64 booting Linux by emulating a RISC-V processor:<p><a href="https:&#x2F;&#x2F;hackaday.com&#x2F;2023&#x2F;08&#x2F;27&#x2F;linux-on-a-commodore-64&#x2F;" rel="nofollow">https:&#x2F;&#x2F;hackaday.com&#x2F;2023&#x2F;08&#x2F;27&#x2F;linux-on-a-commodore-64&#x2F;</a></div><br/><div id="40332814" class="c"><input type="checkbox" id="c-40332814" checked=""/><div class="controls bullet"><span class="by">userbinator</span><span>|</span><a href="#40332480">root</a><span>|</span><a href="#40332565">parent</a><span>|</span><a href="#40332604">next</a><span>|</span><label class="collapse" for="c-40332814">[-]</label><label class="expand" for="c-40332814">[1 more]</label></div><br/><div class="children"><div class="content">That reminds me of this similar project using an ARM emulator instead: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=5581851">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=5581851</a></div><br/></div></div><div id="40332604" class="c"><input type="checkbox" id="c-40332604" checked=""/><div class="controls bullet"><span class="by">sitkack</span><span>|</span><a href="#40332480">root</a><span>|</span><a href="#40332565">parent</a><span>|</span><a href="#40332814">prev</a><span>|</span><a href="#40332510">next</a><span>|</span><label class="collapse" for="c-40332604">[-]</label><label class="expand" for="c-40332604">[1 more]</label></div><br/><div class="children"><div class="content">Wow!<p>&gt; There is a catch (rather: a couple) of course: It runs extremely slowly and it needs a RAM Expansion Unit (REU), as there is no chance to fit it all into just 64KiB.<p>&gt; It even emulates virtual memory with an MMU.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;onnokort&#x2F;semu-c64">https:&#x2F;&#x2F;github.com&#x2F;onnokort&#x2F;semu-c64</a></div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>