<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1706518866943" as="style"/><link rel="stylesheet" href="styles.css?v=1706518866943"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.phoronix.com/news/Ubuntu-Low-Lat-Generic-Kernel">Ubuntu Looking at Applying Low-Latency Optimizations to Its Generic Kernel</a>Â <span class="domain">(<a href="https://www.phoronix.com">www.phoronix.com</a>)</span></div><div class="subtext"><span>mfiguiere</span> | <span>9 comments</span></div><br/><div><div id="39173799" class="c"><input type="checkbox" id="c-39173799" checked=""/><div class="controls bullet"><span class="by">freedomben</span><span>|</span><a href="#39174158">next</a><span>|</span><label class="collapse" for="c-39173799">[-]</label><label class="expand" for="c-39173799">[2 more]</label></div><br/><div class="children"><div class="content">This is really great news:<p>&gt; <i>Ubuntu&#x27;s low-latency kernel is mostly Kconfig configuration changes applied to their kernel build that they are now at least considering to make by default.</i><p>Ubuntu used to have an absolute monster of a hacked up franken-kernel compared to mainstream, but (very fortunately) over the years it&#x27;s gotten much, much closer to upstream.  It was honestly a bit of a nightmare trying to apply a set of custom patches on top of it (to improve a driver that was buggy for many years that I hacked in a way that made it work awesome but would never be accepted upstream because it violated FCC regulations).  I&#x27;m an outside observer so pure speculation, but I have suspected that it was painful for the Canonical kernel team just as it was for me, and that they made a concerted effort to get away from the craziness.  In related news, the people who backport kernel fixes to LTS versions they maintain for their distros (think Canonical and Red Hat, for example) are some of the most unsung heroes in the world.  That work is brutal and takes a lot of dedication, and when you&#x27;re doing your job perfectly nobody knows, but when you mess up <i>everybody</i> knows.  That leads to a lot of thanklessness.</div><br/><div id="39174214" class="c"><input type="checkbox" id="c-39174214" checked=""/><div class="controls bullet"><span class="by">csdvrx</span><span>|</span><a href="#39173799">parent</a><span>|</span><a href="#39174158">next</a><span>|</span><label class="collapse" for="c-39174214">[-]</label><label class="expand" for="c-39174214">[1 more]</label></div><br/><div class="children"><div class="content">&gt; to improve a driver that was buggy for many years that I hacked in a way that made it work awesome but would never be accepted upstream because it violated FCC regulations<p>Now I want to know more! Was it a misbehaving wifi?  Did it violate the spirit, or the letter of the regulations?<p>I&#x27;ve had the opposite problem, trying to make a card respect FCC regulations (ieee80211_regdom=US) while its firmware seems to have another country hardcoded.<p>I think it would be far better to use regdom=US instead of letting the card do whatever&#x27;s ok in the country the card believes it&#x27;s still operating in, yet it would also &quot;violate&quot; FCC regulations to let me write into its firmware that it should follow US rules by default from now on.<p>ebay + a worldwide market + &quot;can&#x27;t trust people to change the firmware&quot; = problems<p>I wish there was more flexibility in the drivers to correct such misbehaviors, because I believe most people want to do the right things.</div><br/></div></div></div></div><div id="39174158" class="c"><input type="checkbox" id="c-39174158" checked=""/><div class="controls bullet"><span class="by">dvh</span><span>|</span><a href="#39173799">prev</a><span>|</span><a href="#39174206">next</a><span>|</span><label class="collapse" for="c-39174158">[-]</label><label class="expand" for="c-39174158">[2 more]</label></div><br/><div class="children"><div class="content">There was an Australian anesthesiologist (whose name escapes me atm) and he did lot of work on kernel latency but I think he gave up.</div><br/><div id="39174187" class="c"><input type="checkbox" id="c-39174187" checked=""/><div class="controls bullet"><span class="by">renewiltord</span><span>|</span><a href="#39174158">parent</a><span>|</span><a href="#39174206">next</a><span>|</span><label class="collapse" for="c-39174187">[-]</label><label class="expand" for="c-39174187">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Con_Kolivas" rel="nofollow">https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Con_Kolivas</a><p>The CK patches were always something that many of us eagerly applied at the time.</div><br/></div></div></div></div><div id="39174206" class="c"><input type="checkbox" id="c-39174206" checked=""/><div class="controls bullet"><span class="by">a-french-anon</span><span>|</span><a href="#39174158">prev</a><span>|</span><a href="#39173811">next</a><span>|</span><label class="collapse" for="c-39174206">[-]</label><label class="expand" for="c-39174206">[2 more]</label></div><br/><div class="children"><div class="content">&gt;CONFIG_NO_HZ_FULL for full tickless mode<p>Huh? As a Gentoo user who searched about all of this, once upon a time, I remember this being worse for latency, introduced as an Android patch for battery life gains. Also, what&#x27;s the point of setting CONFIG_HZ=1000 with it?</div><br/><div id="39174224" class="c"><input type="checkbox" id="c-39174224" checked=""/><div class="controls bullet"><span class="by">csdvrx</span><span>|</span><a href="#39174206">parent</a><span>|</span><a href="#39173811">next</a><span>|</span><label class="collapse" for="c-39174224">[-]</label><label class="expand" for="c-39174224">[1 more]</label></div><br/><div class="children"><div class="content">&gt; what&#x27;s the point of setting CONFIG_HZ=1000 with it?<p>Agreed, if you go tickless, go to the lowest value: I have my own kernel configs, and I generally use HZ=100:<p># zcat &#x2F;proc&#x2F;config.gz |grep HZ_<p>CONFIG_NO_HZ_COMMON=y<p># CONFIG_HZ_PERIODIC is not set<p># CONFIG_NO_HZ_IDLE is not set<p>CONFIG_NO_HZ_FULL=y<p>CONFIG_HZ_100=y<p># CONFIG_HZ_250 is not set<p># CONFIG_HZ_300 is not set<p># CONFIG_HZ_1000 is not set<p>CONFIG_MACHZ_WDT=m</div><br/></div></div></div></div><div id="39173811" class="c"><input type="checkbox" id="c-39173811" checked=""/><div class="controls bullet"><span class="by">bitcharmer</span><span>|</span><a href="#39174206">prev</a><span>|</span><label class="collapse" for="c-39173811">[-]</label><label class="expand" for="c-39173811">[2 more]</label></div><br/><div class="children"><div class="content">This is a welcome change. Even though I moved away from Ubuntu and onto Fedora, I haven&#x27;t used generic kernel in years on my desktop. Low latency variant with low-tick scheduling (I hate the false term &quot;tickless&quot;), rcu offloading and higher scheduling hr tick frequency makes a noticeable difference in responsiveness.<p>I hope other major distros follow suit.</div><br/><div id="39174183" class="c"><input type="checkbox" id="c-39174183" checked=""/><div class="controls bullet"><span class="by">slekker</span><span>|</span><a href="#39173811">parent</a><span>|</span><label class="collapse" for="c-39174183">[-]</label><label class="expand" for="c-39174183">[1 more]</label></div><br/><div class="children"><div class="content">Why aren&#x27;t these changes the default? What are their drawbacks?</div><br/></div></div></div></div></div></div></div></div></div></body></html>