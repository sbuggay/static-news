<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1730451665107" as="style"/><link rel="stylesheet" href="styles.css?v=1730451665107"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/eshaz/wasm-audio-decoders">Web Assembly audio decoders highly optimized for size and performance</a>Â <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>ctoth</span> | <span>22 comments</span></div><br/><div><div id="42007298" class="c"><input type="checkbox" id="c-42007298" checked=""/><div class="controls bullet"><span class="by">xfalcox</span><span>|</span><a href="#42006771">next</a><span>|</span><label class="collapse" for="c-42007298">[-]</label><label class="expand" for="c-42007298">[2 more]</label></div><br/><div class="children"><div class="content">I wish the author would do the same for image decoding. iOS inability to draw a canvas with 4096x4097 dimensions means you can&#x27;t use an Off screen canvas to go from file to RGBA array.</div><br/></div></div><div id="42006771" class="c"><input type="checkbox" id="c-42006771" checked=""/><div class="controls bullet"><span class="by">wg0</span><span>|</span><a href="#42007298">prev</a><span>|</span><a href="#42010831">next</a><span>|</span><label class="collapse" for="c-42006771">[-]</label><label class="expand" for="c-42006771">[13 more]</label></div><br/><div class="children"><div class="content">Interesting. What would be the use case for these? Audio editors?</div><br/><div id="42008579" class="c"><input type="checkbox" id="c-42008579" checked=""/><div class="controls bullet"><span class="by">austin-cheney</span><span>|</span><a href="#42006771">parent</a><span>|</span><a href="#42006794">next</a><span>|</span><label class="collapse" for="c-42008579">[-]</label><label class="expand" for="c-42008579">[3 more]</label></div><br/><div class="children"><div class="content">So, the JavaScript audio&#x2F;video APIs already available in the browser are fully competent to build any kind of media player.  The major limitation is that media players reliant on the browser APIs are limited to the codecs and containers supported by the browsers, which turns out to be a huge limitation.<p>A media library written for WASM with supplied codecs would not have that limitation, such that you could have an equivalent to VLC directly in a browser supporting immediate playback of any video&#x2F;audio codec&#x2F;container supplied in the WASM payload.  The major advantage of a browser based application versus a desktop app is immediate playback of media via hyperlink without the soul crushing limitations Apple imposes on iOS.</div><br/><div id="42014104" class="c"><input type="checkbox" id="c-42014104" checked=""/><div class="controls bullet"><span class="by">gp</span><span>|</span><a href="#42006771">root</a><span>|</span><a href="#42008579">parent</a><span>|</span><a href="#42006794">next</a><span>|</span><label class="collapse" for="c-42014104">[-]</label><label class="expand" for="c-42014104">[2 more]</label></div><br/><div class="children"><div class="content">Do you have a recommendation for having frame by frame control of a file?<p>I am trying to synchronize multiple video files that have uneven framerates. I have separate metadata containing the frame timing.<p>The video files are .ts (mpeg stream) files.</div><br/><div id="42015064" class="c"><input type="checkbox" id="c-42015064" checked=""/><div class="controls bullet"><span class="by">austin-cheney</span><span>|</span><a href="#42006771">root</a><span>|</span><a href="#42014104">parent</a><span>|</span><a href="#42006794">next</a><span>|</span><label class="collapse" for="c-42015064">[-]</label><label class="expand" for="c-42015064">[1 more]</label></div><br/><div class="children"><div class="content">Here is the media player I wrote in JavaScript: <a href="https:&#x2F;&#x2F;github.com&#x2F;prettydiff&#x2F;mp3-master-list&#x2F;blob&#x2F;master&#x2F;lib&#x2F;browser.ts">https:&#x2F;&#x2F;github.com&#x2F;prettydiff&#x2F;mp3-master-list&#x2F;blob&#x2F;master&#x2F;li...</a><p>I suspect there exist filters in the browser APIs to adjust play back timing and rate. I have not attempted to modify the media in that way myself but I did see API filters to alter stero panning, tonal quality, wave shape, biquad, delay, and more.</div><br/></div></div></div></div></div></div><div id="42006794" class="c"><input type="checkbox" id="c-42006794" checked=""/><div class="controls bullet"><span class="by">duped</span><span>|</span><a href="#42006771">parent</a><span>|</span><a href="#42008579">prev</a><span>|</span><a href="#42007149">next</a><span>|</span><label class="collapse" for="c-42006794">[-]</label><label class="expand" for="c-42006794">[8 more]</label></div><br/><div class="children"><div class="content">Browser support of some codecs is inconsistent, for example Safari&#x27;s support for opus has been pretty bad&#x2F;nonexistent (iirc this recently changed)</div><br/><div id="42007014" class="c"><input type="checkbox" id="c-42007014" checked=""/><div class="controls bullet"><span class="by">cupofjoakim</span><span>|</span><a href="#42006771">root</a><span>|</span><a href="#42006794">parent</a><span>|</span><a href="#42007076">next</a><span>|</span><label class="collapse" for="c-42007014">[-]</label><label class="expand" for="c-42007014">[2 more]</label></div><br/><div class="children"><div class="content">I used to work at a place that developed a DAW in the browser, and yeah, we used a WASM Ogg Opus decoder to save on storage costs for our sound library. We earlier had to have mp3s for safari devices. With opus being opus we really wanted to provide it for the majority of devices as well as our server side streaming, and being able to provide opus support for safari ourselves was a godsend.<p>Edit: Should note that our decoder was developed in house and I have nothing to do with the project OP linked to.</div><br/><div id="42007407" class="c"><input type="checkbox" id="c-42007407" checked=""/><div class="controls bullet"><span class="by">duped</span><span>|</span><a href="#42006771">root</a><span>|</span><a href="#42007014">parent</a><span>|</span><a href="#42007076">next</a><span>|</span><label class="collapse" for="c-42007407">[-]</label><label class="expand" for="c-42007407">[1 more]</label></div><br/><div class="children"><div class="content">bandlab?</div><br/></div></div></div></div><div id="42007076" class="c"><input type="checkbox" id="c-42007076" checked=""/><div class="controls bullet"><span class="by">lifthrasiir</span><span>|</span><a href="#42006771">root</a><span>|</span><a href="#42006794">parent</a><span>|</span><a href="#42007014">prev</a><span>|</span><a href="#42007034">next</a><span>|</span><label class="collapse" for="c-42007076">[-]</label><label class="expand" for="c-42007076">[4 more]</label></div><br/><div class="children"><div class="content">Is that true even for mp3 though? Apparently it actually has a universal browser support up to MSIE 9 (!), while Ogg Vorbis and FLAC are now supported by all modern browsers after MSIE [1]. Opus seems to be the earliest format with less support than that, while this library only dates back to 2020.<p>[1] <a href="https:&#x2F;&#x2F;caniuse.com&#x2F;?search=audio%20format" rel="nofollow">https:&#x2F;&#x2F;caniuse.com&#x2F;?search=audio%20format</a></div><br/><div id="42007482" class="c"><input type="checkbox" id="c-42007482" checked=""/><div class="controls bullet"><span class="by">duped</span><span>|</span><a href="#42006771">root</a><span>|</span><a href="#42007076">parent</a><span>|</span><a href="#42007034">next</a><span>|</span><label class="collapse" for="c-42007482">[-]</label><label class="expand" for="c-42007482">[3 more]</label></div><br/><div class="children"><div class="content">Sure, but what if you don&#x27;t want to use mp3... codecs aren&#x27;t created equal. For anything latency sensitive mp3 is a non starter. For anything under bandwidth constraints, flac isn&#x27;t great.<p>OPUS is a descendant of CELT (which never caught on, for reasons) which is an open&#x2F;unhindered by patents low latency lossy codec suitable for VoIP and live streaming. It&#x27;s relatively recent, but also, those use cases are more popular recently in the browser.<p>And to go even more extreme, some applications really care about bit-exactness in their decoders, which you don&#x27;t get by relying on other vendors.</div><br/><div id="42008175" class="c"><input type="checkbox" id="c-42008175" checked=""/><div class="controls bullet"><span class="by">lifthrasiir</span><span>|</span><a href="#42006771">root</a><span>|</span><a href="#42007482">parent</a><span>|</span><a href="#42007034">next</a><span>|</span><label class="collapse" for="c-42008175">[-]</label><label class="expand" for="c-42008175">[2 more]</label></div><br/><div class="children"><div class="content">I mean, WebAssembly Opus decoder seems meaningful even to this day, but I wondered why earlier formats are there in the first place. The bit-exactness is a good argument but as you&#x27;ve said that&#x27;s a very specific requirement, and the library only seems to care about performance and minified size anyway.</div><br/><div id="42009146" class="c"><input type="checkbox" id="c-42009146" checked=""/><div class="controls bullet"><span class="by">ctoth</span><span>|</span><a href="#42006771">root</a><span>|</span><a href="#42008175">parent</a><span>|</span><a href="#42007034">next</a><span>|</span><label class="collapse" for="c-42009146">[-]</label><label class="expand" for="c-42009146">[1 more]</label></div><br/><div class="children"><div class="content">Being able to decode audio in a Web Worker rather than the main UI thread is also a nice use case.</div><br/></div></div></div></div></div></div></div></div><div id="42007034" class="c"><input type="checkbox" id="c-42007034" checked=""/><div class="controls bullet"><span class="by">pier25</span><span>|</span><a href="#42006771">root</a><span>|</span><a href="#42006794">parent</a><span>|</span><a href="#42007076">prev</a><span>|</span><a href="#42007149">next</a><span>|</span><label class="collapse" for="c-42007034">[-]</label><label class="expand" for="c-42007034">[1 more]</label></div><br/><div class="children"><div class="content">This. Even FLAC support isn&#x27;t great.</div><br/></div></div></div></div><div id="42007149" class="c"><input type="checkbox" id="c-42007149" checked=""/><div class="controls bullet"><span class="by">nsteel</span><span>|</span><a href="#42006771">parent</a><span>|</span><a href="#42006794">prev</a><span>|</span><a href="#42010831">next</a><span>|</span><label class="collapse" for="c-42007149">[-]</label><label class="expand" for="c-42007149">[1 more]</label></div><br/><div class="children"><div class="content">They look great for <a href="https:&#x2F;&#x2F;github.com&#x2F;badaix&#x2F;snapweb">https:&#x2F;&#x2F;github.com&#x2F;badaix&#x2F;snapweb</a> which is missing decoders for some formats.</div><br/></div></div></div></div><div id="42010831" class="c"><input type="checkbox" id="c-42010831" checked=""/><div class="controls bullet"><span class="by">hoten</span><span>|</span><a href="#42006771">prev</a><span>|</span><a href="#42008481">next</a><span>|</span><label class="collapse" for="c-42010831">[-]</label><label class="expand" for="c-42010831">[1 more]</label></div><br/><div class="children"><div class="content">If I&#x27;m already compiling ogg vorbis&#x2F;opus&#x2F;minimp3&#x2F;etc via emscripten (allegro app), is there still big benefit to using these instead?</div><br/></div></div><div id="42008481" class="c"><input type="checkbox" id="c-42008481" checked=""/><div class="controls bullet"><span class="by">nilslice</span><span>|</span><a href="#42010831">prev</a><span>|</span><a href="#42010867">next</a><span>|</span><label class="collapse" for="c-42008481">[-]</label><label class="expand" for="c-42008481">[1 more]</label></div><br/><div class="children"><div class="content">awesome! would love to help get distributions of these as Extism wasm plugins so they can be used in Go&#x2F;Rust&#x2F;PHP&#x2F;Ruby&#x2F;OCaml&#x2F;Java&#x2F;C++&#x2F;C#&#x2F;bunch more languages...</div><br/></div></div><div id="42010867" class="c"><input type="checkbox" id="c-42010867" checked=""/><div class="controls bullet"><span class="by">beepbooptheory</span><span>|</span><a href="#42008481">prev</a><span>|</span><a href="#42009274">next</a><span>|</span><label class="collapse" for="c-42010867">[-]</label><label class="expand" for="c-42010867">[1 more]</label></div><br/><div class="children"><div class="content">If they are all web workers, how do you use them in an Audio Worklet?</div><br/></div></div><div id="42009274" class="c"><input type="checkbox" id="c-42009274" checked=""/><div class="controls bullet"><span class="by">jauntywundrkind</span><span>|</span><a href="#42010867">prev</a><span>|</span><label class="collapse" for="c-42009274">[-]</label><label class="expand" for="c-42009274">[3 more]</label></div><br/><div class="children"><div class="content">Probably a good basis for a shoutcast client! So little info on it &amp; I really doubt it&#x27;s supported in any browsers. Even though it&#x27;s mp3 with a little metadata sprinkled in every X bytes. <a href="https:&#x2F;&#x2F;www.radiotoolbox.com&#x2F;community&#x2F;forums&#x2F;viewtopic.php?t=74" rel="nofollow">https:&#x2F;&#x2F;www.radiotoolbox.com&#x2F;community&#x2F;forums&#x2F;viewtopic.php?...</a></div><br/><div id="42010203" class="c"><input type="checkbox" id="c-42010203" checked=""/><div class="controls bullet"><span class="by">doublerebel</span><span>|</span><a href="#42009274">parent</a><span>|</span><a href="#42010363">next</a><span>|</span><label class="collapse" for="c-42010203">[-]</label><label class="expand" for="c-42010203">[1 more]</label></div><br/><div class="children"><div class="content">There are lots of docs and info available for shoutcast&#x2F;icecast servers and clients. Hereâs a couple implementations in javascript:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;livebassmusicrightnow&#x2F;even-nicercast&#x2F;blob&#x2F;master&#x2F;src&#x2F;even-nicercast.coffee">https:&#x2F;&#x2F;github.com&#x2F;livebassmusicrightnow&#x2F;even-nicercast&#x2F;blob...</a><p><a href="https:&#x2F;&#x2F;github.com&#x2F;TooTallNate&#x2F;node-icy">https:&#x2F;&#x2F;github.com&#x2F;TooTallNate&#x2F;node-icy</a><p>WASM would be total overkill. The mpeg stream is readable natively in the browser â thatâs how I served the client when I was running livebassmusicrightnow.</div><br/></div></div><div id="42010363" class="c"><input type="checkbox" id="c-42010363" checked=""/><div class="controls bullet"><span class="by">eshaz</span><span>|</span><a href="#42009274">parent</a><span>|</span><a href="#42010203">prev</a><span>|</span><label class="collapse" for="c-42010363">[-]</label><label class="expand" for="c-42010363">[1 more]</label></div><br/><div class="children"><div class="content">Hey, author of the wasm-audio-decoders library here. Actually, I wrote this library for this very reason to supplement my other library, icecast-metadata-player which is an Icecast (Shoutcast) browser client with ICY metadata support.
<a href="https:&#x2F;&#x2F;github.com&#x2F;eshaz&#x2F;icecast-metadata-js">https:&#x2F;&#x2F;github.com&#x2F;eshaz&#x2F;icecast-metadata-js</a></div><br/></div></div></div></div></div></div></div></div></div></body></html>