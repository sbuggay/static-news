<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1718701258927" as="style"/><link rel="stylesheet" href="styles.css?v=1718701258927"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/nicanorflavier/spf-dkim-dmarc-simplified">Understanding SPF, DKIM, and DMARC: A Simple Guide</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>miles</span> | <span>77 comments</span></div><br/><div><div id="40710875" class="c"><input type="checkbox" id="c-40710875" checked=""/><div class="controls bullet"><span class="by">velcrovan</span><span>|</span><a href="#40711427">next</a><span>|</span><label class="collapse" for="c-40710875">[-]</label><label class="expand" for="c-40710875">[28 more]</label></div><br/><div class="children"><div class="content">I manage IT at a mid-size business. At least once a month, I get asked to release some incoming email from quarantine that got sent there because the sender&#x27;s SPF record is wrong or outdated and doesn&#x27;t include all the email services they actually use. (What this really tells me is how many small businesses are out there running with no in-house IT expertise or support of any kind.)<p>I don&#x27;t do whitelisting. Instead, I always reach out and offer to help the other party correct their SPF record.<p>It happens often enough that I wrote a script in Racket that will generate the email for me and paste it into the clipboard [1]. The email tells them exactly what they need to change, and links to docs from their current email provider (so they don&#x27;t have to trust me about edits to their DNS).<p>[1]: <a href="https:&#x2F;&#x2F;gist.github.com&#x2F;otherjoel&#x2F;6b8bf02f6db6e0c47ba6bca72ecf1c3e" rel="nofollow">https:&#x2F;&#x2F;gist.github.com&#x2F;otherjoel&#x2F;6b8bf02f6db6e0c47ba6bca72e...</a></div><br/><div id="40714418" class="c"><input type="checkbox" id="c-40714418" checked=""/><div class="controls bullet"><span class="by">deng</span><span>|</span><a href="#40710875">parent</a><span>|</span><a href="#40715408">next</a><span>|</span><label class="collapse" for="c-40714418">[-]</label><label class="expand" for="c-40714418">[4 more]</label></div><br/><div class="children"><div class="content">&gt; At least once a month, I get asked to release some incoming email from quarantine that got sent there because the sender&#x27;s SPF record is wrong or outdated<p>And at the same time, I regularly get Spam&#x2F;Phishing with perfect SPF, DKIM, DMARC, etc. The domains and IPs they use might get blocked within a day, but of course, these people have no problem getting others.<p>And although I have set up my MTA perfectly, my mail gets refused by MS&#x2F;t-online&#x2F;etc., because I don&#x27;t have enough &quot;sender reputation&quot;. In e-mail, we have an oligopoly of a few big mail providers, and in the end, they decide which mail gets delivered and which isn&#x27;t, and to me it looks like they give a rat&#x27;s ass about SPF and DKIM, and probably rightfully so, because most spammers are probably better at configuring MTAs than your average mail admin.</div><br/><div id="40714559" class="c"><input type="checkbox" id="c-40714559" checked=""/><div class="controls bullet"><span class="by">taskforcegemini</span><span>|</span><a href="#40710875">root</a><span>|</span><a href="#40714418">parent</a><span>|</span><a href="#40715408">next</a><span>|</span><label class="collapse" for="c-40714559">[-]</label><label class="expand" for="c-40714559">[3 more]</label></div><br/><div class="children"><div class="content">t-online uses a global whitelist, which is pretty stupid for e-mail. sometimes it helps contacting them, other times they refuse to resolve it for arbitrary reasons (not because of actual spamming)</div><br/><div id="40714655" class="c"><input type="checkbox" id="c-40714655" checked=""/><div class="controls bullet"><span class="by">Leonelf</span><span>|</span><a href="#40710875">root</a><span>|</span><a href="#40714559">parent</a><span>|</span><a href="#40715408">next</a><span>|</span><label class="collapse" for="c-40714655">[-]</label><label class="expand" for="c-40714655">[2 more]</label></div><br/><div class="children"><div class="content">t-online told me I needed an imprint on the website that&#x27;s reachable under my domain. Seems to be some misunderstanding of German law (German commercial websites need an imprint, legally, but t-online also apply this requirement to private domains).</div><br/><div id="40715061" class="c"><input type="checkbox" id="c-40715061" checked=""/><div class="controls bullet"><span class="by">persnickety</span><span>|</span><a href="#40710875">root</a><span>|</span><a href="#40714655">parent</a><span>|</span><a href="#40715408">next</a><span>|</span><label class="collapse" for="c-40715061">[-]</label><label class="expand" for="c-40715061">[1 more]</label></div><br/><div class="children"><div class="content">Last month they unblocked me even though the website is blank.</div><br/></div></div></div></div></div></div></div></div><div id="40715408" class="c"><input type="checkbox" id="c-40715408" checked=""/><div class="controls bullet"><span class="by">jonathantf2</span><span>|</span><a href="#40710875">parent</a><span>|</span><a href="#40714418">prev</a><span>|</span><a href="#40711407">next</a><span>|</span><label class="collapse" for="c-40715408">[-]</label><label class="expand" for="c-40715408">[2 more]</label></div><br/><div class="children"><div class="content">I work at an IT provider - we see this daily. Have to whitelist to keep the customer happy, usually the other end is a 1 or 2 person business with an old hosted Yahoo system or similar</div><br/><div id="40715424" class="c"><input type="checkbox" id="c-40715424" checked=""/><div class="controls bullet"><span class="by">egorfine</span><span>|</span><a href="#40710875">root</a><span>|</span><a href="#40715408">parent</a><span>|</span><a href="#40711407">next</a><span>|</span><label class="collapse" for="c-40715424">[-]</label><label class="expand" for="c-40715424">[1 more]</label></div><br/><div class="children"><div class="content">&gt; happy<p>or misguided?<p>(I know the pain.)</div><br/></div></div></div></div><div id="40711407" class="c"><input type="checkbox" id="c-40711407" checked=""/><div class="controls bullet"><span class="by">ziddoap</span><span>|</span><a href="#40710875">parent</a><span>|</span><a href="#40715408">prev</a><span>|</span><a href="#40713178">next</a><span>|</span><label class="collapse" for="c-40711407">[-]</label><label class="expand" for="c-40711407">[7 more]</label></div><br/><div class="children"><div class="content">What would you say the normal reception you receive from this email template is?<p>I like the idea, but I would think sending a technical email (with industry-specific acronyms that you don&#x27;t spell out!) to a business that has no in-house IT would just be ignored in most cases.</div><br/><div id="40711519" class="c"><input type="checkbox" id="c-40711519" checked=""/><div class="controls bullet"><span class="by">velcrovan</span><span>|</span><a href="#40710875">root</a><span>|</span><a href="#40711407">parent</a><span>|</span><a href="#40715427">next</a><span>|</span><label class="collapse" for="c-40711519">[-]</label><label class="expand" for="c-40711519">[5 more]</label></div><br/><div class="children"><div class="content">Well if you read the template, you&#x27;ll see I start out with a non-technical explanation, advise that they forward the email to an IT type person, and offer to help in any way I can. Then I put in a &quot;More info&quot; heading further down with all the details and instructions.<p>Overall I&#x27;m pleased with how well this approach works. When people realize that their email is getting stuck in spam filters because of a problem on their end, they&#x27;re usually motivated to get it fixed. Sometimes it gets sent to an owner who had barely enough tech mojo to stand up a gmail account at a custom domain, and even then the instructions are usually simple enough for them to follow.</div><br/><div id="40711541" class="c"><input type="checkbox" id="c-40711541" checked=""/><div class="controls bullet"><span class="by">ziddoap</span><span>|</span><a href="#40710875">root</a><span>|</span><a href="#40711519">parent</a><span>|</span><a href="#40715427">next</a><span>|</span><label class="collapse" for="c-40711541">[-]</label><label class="expand" for="c-40711541">[4 more]</label></div><br/><div class="children"><div class="content">&gt;<i>Well if you read the template</i><p>I read the template, that&#x27;s how I spotted the acronyms that weren&#x27;t spelled out. Like DNS on the second line, before you recommend forwarding.<p>&gt;<i>Overall I&#x27;m pleased with how well this approach works.</i><p>Interesting, I definitely would have thought it&#x27;d be ignored more often than not, but I might have to look into rolling out something similar. Thanks for the idea.</div><br/><div id="40711650" class="c"><input type="checkbox" id="c-40711650" checked=""/><div class="controls bullet"><span class="by">ralferoo</span><span>|</span><a href="#40710875">root</a><span>|</span><a href="#40711541">parent</a><span>|</span><a href="#40715427">next</a><span>|</span><label class="collapse" for="c-40711650">[-]</label><label class="expand" for="c-40711650">[3 more]</label></div><br/><div class="children"><div class="content">I think you&#x27;re being a bit unfair here.<p>&gt; If you do not have access to your company’s DNS records, please forward this email to someone in an IT role.<p>If you don&#x27;t even know what DNS records are, I&#x27;d imagine you&#x27;d assume you don&#x27;t have access to them and so forward them to the IT person as suggested. But sure, maybe he could also add &quot;, or don&#x27;t know what they are&quot; to this line.</div><br/><div id="40711721" class="c"><input type="checkbox" id="c-40711721" checked=""/><div class="controls bullet"><span class="by">ziddoap</span><span>|</span><a href="#40710875">root</a><span>|</span><a href="#40711650">parent</a><span>|</span><a href="#40715427">next</a><span>|</span><label class="collapse" for="c-40711721">[-]</label><label class="expand" for="c-40711721">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not trying to be unfair or critical or anything. My first question was genuine. I intended my note about acronyms to be just that: a side note. The response I got was &quot;If you read the template [...]&quot;, which it should have been pretty obvious I did. Then I got an explanation of the template as if I hadn&#x27;t read it, which was a bit patronizing.<p>I think it&#x27;s a good idea (and said so twice!). I was curious what the reception was like.<p>Sorry if my comment about acronyms was too much. It is a pet peeve of mine to see acronyms not spelled out, especially technical ones in a document intended for non-technical people. I didn&#x27;t intend it to derail the conversation. Obviously it was taken in a way more critical way than I had intended -- my fault.</div><br/><div id="40712272" class="c"><input type="checkbox" id="c-40712272" checked=""/><div class="controls bullet"><span class="by">velcrovan</span><span>|</span><a href="#40710875">root</a><span>|</span><a href="#40711721">parent</a><span>|</span><a href="#40715427">next</a><span>|</span><label class="collapse" for="c-40712272">[-]</label><label class="expand" for="c-40712272">[1 more]</label></div><br/><div class="children"><div class="content">Sorry I didn’t pick up that you had read the template. I was just trying to give context for my answer without assuming or requiring anyone who might read it to have scrolled through all the code.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="40715427" class="c"><input type="checkbox" id="c-40715427" checked=""/><div class="controls bullet"><span class="by">egorfine</span><span>|</span><a href="#40710875">root</a><span>|</span><a href="#40711407">parent</a><span>|</span><a href="#40711519">prev</a><span>|</span><a href="#40713178">next</a><span>|</span><label class="collapse" for="c-40715427">[-]</label><label class="expand" for="c-40715427">[1 more]</label></div><br/><div class="children"><div class="content">&gt; ignored in most cases<p>I see no problem here.</div><br/></div></div></div></div><div id="40713178" class="c"><input type="checkbox" id="c-40713178" checked=""/><div class="controls bullet"><span class="by">EnigmaFlare</span><span>|</span><a href="#40710875">parent</a><span>|</span><a href="#40711407">prev</a><span>|</span><a href="#40714393">next</a><span>|</span><label class="collapse" for="c-40713178">[-]</label><label class="expand" for="c-40713178">[2 more]</label></div><br/><div class="children"><div class="content">I was on the receiving end of an automated version of this. However, when I looked into it, it seemed the problem (SPF record required more than 10 DNS lookups) was fairly common. I don&#x27;t seem to have any other deliverability problems and my email and DNS is managed by some big hosting company so I assume it&#x27;s not a real problem and didn&#x27;t fix it.</div><br/><div id="40713477" class="c"><input type="checkbox" id="c-40713477" checked=""/><div class="controls bullet"><span class="by">brightball</span><span>|</span><a href="#40710875">root</a><span>|</span><a href="#40713178">parent</a><span>|</span><a href="#40714393">next</a><span>|</span><label class="collapse" for="c-40713477">[-]</label><label class="expand" for="c-40713477">[1 more]</label></div><br/><div class="children"><div class="content">It’s a real problem. The solution is just to isolate each service on its own subdomain. The only thing that should be listed in your top level SPF record is the corporate email for the domain.</div><br/></div></div></div></div><div id="40714393" class="c"><input type="checkbox" id="c-40714393" checked=""/><div class="controls bullet"><span class="by">rkagerer</span><span>|</span><a href="#40710875">parent</a><span>|</span><a href="#40713178">prev</a><span>|</span><a href="#40711533">next</a><span>|</span><label class="collapse" for="c-40714393">[-]</label><label class="expand" for="c-40714393">[1 more]</label></div><br/><div class="children"><div class="content">Awesome, mind if I send you an email solely to test if it gets through or if I get to be the recipient of your awesome script? ;-)</div><br/></div></div><div id="40711533" class="c"><input type="checkbox" id="c-40711533" checked=""/><div class="controls bullet"><span class="by">victorbjorklund</span><span>|</span><a href="#40710875">parent</a><span>|</span><a href="#40714393">prev</a><span>|</span><a href="#40712450">next</a><span>|</span><label class="collapse" for="c-40711533">[-]</label><label class="expand" for="c-40711533">[1 more]</label></div><br/><div class="children"><div class="content">That is really awesome. It can be easy to miss setting up SPF on every new tool.</div><br/></div></div><div id="40712450" class="c"><input type="checkbox" id="c-40712450" checked=""/><div class="controls bullet"><span class="by">rnewme</span><span>|</span><a href="#40710875">parent</a><span>|</span><a href="#40711533">prev</a><span>|</span><a href="#40712783">next</a><span>|</span><label class="collapse" for="c-40712450">[-]</label><label class="expand" for="c-40712450">[6 more]</label></div><br/><div class="children"><div class="content">Cool stuff! BTW, what&#x27;s up with the license?</div><br/><div id="40712481" class="c"><input type="checkbox" id="c-40712481" checked=""/><div class="controls bullet"><span class="by">velcrovan</span><span>|</span><a href="#40710875">root</a><span>|</span><a href="#40712450">parent</a><span>|</span><a href="#40712783">next</a><span>|</span><label class="collapse" for="c-40712481">[-]</label><label class="expand" for="c-40712481">[5 more]</label></div><br/><div class="children"><div class="content">Including the whole license in the gist was probably overkill, but I particularly like Blue Oak for permissive licensing and would like to see it more widely used.<p><a href="https:&#x2F;&#x2F;writing.kemitchell.com&#x2F;2019&#x2F;03&#x2F;09&#x2F;Deprecation-Notice.html" rel="nofollow">https:&#x2F;&#x2F;writing.kemitchell.com&#x2F;2019&#x2F;03&#x2F;09&#x2F;Deprecation-Notice...</a></div><br/><div id="40712751" class="c"><input type="checkbox" id="c-40712751" checked=""/><div class="controls bullet"><span class="by">bb88</span><span>|</span><a href="#40710875">root</a><span>|</span><a href="#40712481">parent</a><span>|</span><a href="#40712675">next</a><span>|</span><label class="collapse" for="c-40712751">[-]</label><label class="expand" for="c-40712751">[2 more]</label></div><br/><div class="children"><div class="content">&gt;  If anyone notifies you in writing that you have not
complied with [Notices](#notices), you can keep your
license by taking all practical steps to comply within 30
days after the notice.  If you do not do so, your license
ends immediately.<p>I&#x27;m not sure I like it.  Like, what if the notification of notice was incorrect?  You lose your license anyway?</div><br/><div id="40713378" class="c"><input type="checkbox" id="c-40713378" checked=""/><div class="controls bullet"><span class="by">velcrovan</span><span>|</span><a href="#40710875">root</a><span>|</span><a href="#40712751">parent</a><span>|</span><a href="#40712675">next</a><span>|</span><label class="collapse" for="c-40713378">[-]</label><label class="expand" for="c-40713378">[1 more]</label></div><br/><div class="children"><div class="content">By default under most open source licenses, particularly permissive ones, violating the terms even by accident ends your license instantly, with no notice whatsoever.<p>Including a fair, common sense path to forgiveness severely limits legal risk for users, and is one of the things I like about the Blue Oak license.</div><br/></div></div></div></div><div id="40712675" class="c"><input type="checkbox" id="c-40712675" checked=""/><div class="controls bullet"><span class="by">LelouBil</span><span>|</span><a href="#40710875">root</a><span>|</span><a href="#40712481">parent</a><span>|</span><a href="#40712751">prev</a><span>|</span><a href="#40712783">next</a><span>|</span><label class="collapse" for="c-40712675">[-]</label><label class="expand" for="c-40712675">[2 more]</label></div><br/><div class="children"><div class="content">Hey, English is not my first language so I&#x27;m surely missing something here but:<p>&gt; Copyright<p>&gt; Each contributor licenses you to do everything with this software that would otherwise infringe that contributor&#x27;s copyright in it.<p>This sounds like the license specifically allows you to infringe on the contributor&#x27;s copyright.</div><br/><div id="40713306" class="c"><input type="checkbox" id="c-40713306" checked=""/><div class="controls bullet"><span class="by">velcrovan</span><span>|</span><a href="#40710875">root</a><span>|</span><a href="#40712675">parent</a><span>|</span><a href="#40712783">next</a><span>|</span><label class="collapse" for="c-40713306">[-]</label><label class="expand" for="c-40713306">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a permissive license. The licensor is saying “I own copyright in this work, which gives me the right to give you permission to do whatever you want with it.”</div><br/></div></div></div></div></div></div></div></div><div id="40712783" class="c"><input type="checkbox" id="c-40712783" checked=""/><div class="controls bullet"><span class="by">hug</span><span>|</span><a href="#40710875">parent</a><span>|</span><a href="#40712450">prev</a><span>|</span><a href="#40710906">next</a><span>|</span><label class="collapse" for="c-40712783">[-]</label><label class="expand" for="c-40712783">[3 more]</label></div><br/><div class="children"><div class="content">Does the script handle macros in SPF?<p>I&#x27;ve had a couple of other-company-IT-admins tell me that my MX is jacked because I use hosted SPF via proofpoint, and when they look up my SPF it looks like this:<p>&quot;v=spf1 include:%{ir}.%{v}.%{d}.spf.has.pphosted.com ~all&quot;<p>A surprising number of mail admins don&#x27;t understand SPF macros.</div><br/><div id="40714007" class="c"><input type="checkbox" id="c-40714007" checked=""/><div class="controls bullet"><span class="by">TheNewsIsHere</span><span>|</span><a href="#40710875">root</a><span>|</span><a href="#40712783">parent</a><span>|</span><a href="#40713335">next</a><span>|</span><label class="collapse" for="c-40714007">[-]</label><label class="expand" for="c-40714007">[1 more]</label></div><br/><div class="children"><div class="content">In defense of those who haven’t read the RFCs personally — I can count on one hand the number of times I’ve seen SPF macros in the wild, which holds true if I included yours.<p>Interestingly all Proofpoint customers too.<p>I’ve seen it more common to isolate services to subdomains and specify subdomain SPF records rather than use macros. This is my preferred approach.<p>I’m not hating on the macros. They’re just seemingly very rarely used. I know they’re on the table but I haven’t found a compelling use case in my own deployments.</div><br/></div></div><div id="40713335" class="c"><input type="checkbox" id="c-40713335" checked=""/><div class="controls bullet"><span class="by">velcrovan</span><span>|</span><a href="#40710875">root</a><span>|</span><a href="#40712783">parent</a><span>|</span><a href="#40714007">prev</a><span>|</span><a href="#40710906">next</a><span>|</span><label class="collapse" for="c-40713335">[-]</label><label class="expand" for="c-40713335">[1 more]</label></div><br/><div class="children"><div class="content">If I’m reaching for the script, it&#x27;s because I’m already in a scenario where Proofpoint has quarantined legitimate email for failing SPF checks (we use Proofpoint too). So the script itself doesn’t do any analysis of the existing SPF record. It just shows them the existing record and tells them how to fix it based on the sender&#x27;s IP for the email in question.</div><br/></div></div></div></div><div id="40710906" class="c"><input type="checkbox" id="c-40710906" checked=""/><div class="controls bullet"><span class="by">luckman212</span><span>|</span><a href="#40710875">parent</a><span>|</span><a href="#40712783">prev</a><span>|</span><a href="#40711427">next</a><span>|</span><label class="collapse" for="c-40710906">[-]</label><label class="expand" for="c-40710906">[1 more]</label></div><br/><div class="children"><div class="content">Neat! I must try this.</div><br/></div></div></div></div><div id="40711427" class="c"><input type="checkbox" id="c-40711427" checked=""/><div class="controls bullet"><span class="by">njt</span><span>|</span><a href="#40710875">prev</a><span>|</span><a href="#40710866">next</a><span>|</span><label class="collapse" for="c-40711427">[-]</label><label class="expand" for="c-40711427">[2 more]</label></div><br/><div class="children"><div class="content">On a slightly related note, Michael W. Lucas[1] is working on an upcoming book entitled &quot;Run Your Own Mail Server&quot;, that will be published shortly (there&#x27;s a Kickstarter campaign as well[2]).<p>I attended his tutorial and talk at BSDCan[3] this year and both were excellent. I highly recommend buying the book when it comes out (or supporting the Kickstarter), it will go through all the gory details of setting up and running a mail server, and best practices, including a ton of material on SPF&#x2F;DKIM&#x2F;DMARC.<p>(P.S. I have no affiliation with the author or the book in any way.)<p>[1] - <a href="https:&#x2F;&#x2F;mwl.io&#x2F;" rel="nofollow">https:&#x2F;&#x2F;mwl.io&#x2F;</a><p>[2] - <a href="https:&#x2F;&#x2F;www.kickstarter.com&#x2F;projects&#x2F;mwlucas&#x2F;run-your-own-mail-server" rel="nofollow">https:&#x2F;&#x2F;www.kickstarter.com&#x2F;projects&#x2F;mwlucas&#x2F;run-your-own-ma...</a><p>[3] - <a href="https:&#x2F;&#x2F;www.bsdcan.org&#x2F;2024&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.bsdcan.org&#x2F;2024&#x2F;</a></div><br/><div id="40712153" class="c"><input type="checkbox" id="c-40712153" checked=""/><div class="controls bullet"><span class="by">whartung</span><span>|</span><a href="#40711427">parent</a><span>|</span><a href="#40710866">next</a><span>|</span><label class="collapse" for="c-40712153">[-]</label><label class="expand" for="c-40712153">[1 more]</label></div><br/><div class="children"><div class="content">Looking forward to this. First thing I ever ponied up on KS for.<p>I don&#x27;t even run a mailserver, I&#x27;m just hoping it will take a bunch of the guides that have been floating about on the web, consolidate the sharp edges, and make sure its up to date.<p>I also hope it has some discussion on troubleshooting. Like dealing with blacklists and what not, folks always talk about that, but I&#x27;ve never see it documented what is actually done to resolve these problems (Like who do you send an email to, how do you even find out who to send an email to, etc.)</div><br/></div></div></div></div><div id="40710866" class="c"><input type="checkbox" id="c-40710866" checked=""/><div class="controls bullet"><span class="by">jprjr</span><span>|</span><a href="#40711427">prev</a><span>|</span><a href="#40714928">next</a><span>|</span><label class="collapse" for="c-40710866">[-]</label><label class="expand" for="c-40710866">[3 more]</label></div><br/><div class="children"><div class="content">What I really want to see is a guide for SPF&#x2F;DKIM&#x2F;DMARC oriented towards people writing apps that send email using other people&#x27;s domains. I have dealt with so many ticketing systems and marketing platforms that do not understand the roles of SPF&#x2F;DKIM&#x2F;DMARC at all.<p>Things like, insisting we need to include their SPF record in ours, even going so far as to scan the SPF record for the include, only to find out they use their own domain in the envelope address (which is what I wanted them to do in the first place).<p>Or not distinguishing at all between envelope and header addresses and using our domain in both. Which of course means they&#x27;re not tracking delayed bounces.<p>It really becomes an issue with larger orgs where everybody wants to use the main domain for brand purposes and subdomains are just totally frowned upon for whatever reason. If you just leave my SPF alone and rely on DKIM, it means you can still pass DMARC and track bounces properly. Hell I&#x27;d be fine with making subdomains for the envelope address that lists your infrastructure in the MX records but again, eyes really start to glaze over when you say &quot;envelope address.&quot;<p>Basically what I really want is a guide that boils down to: if you&#x27;re not their primary email provider, then don&#x27;t touch your client&#x27;s SPF record.</div><br/><div id="40711350" class="c"><input type="checkbox" id="c-40711350" checked=""/><div class="controls bullet"><span class="by">jabroni_salad</span><span>|</span><a href="#40710866">parent</a><span>|</span><a href="#40714928">next</a><span>|</span><label class="collapse" for="c-40711350">[-]</label><label class="expand" for="c-40711350">[2 more]</label></div><br/><div class="children"><div class="content">I recently set up a mailchimp tenant for someone and was surprised that their email authentication wizard pretty much began and ended with DKIM. I&#x27;m way too used to b2b solutions that want the equivalent of a chmod+999 before it can run a hello world.</div><br/><div id="40714037" class="c"><input type="checkbox" id="c-40714037" checked=""/><div class="controls bullet"><span class="by">TheNewsIsHere</span><span>|</span><a href="#40710866">root</a><span>|</span><a href="#40711350">parent</a><span>|</span><a href="#40714928">next</a><span>|</span><label class="collapse" for="c-40714037">[-]</label><label class="expand" for="c-40714037">[1 more]</label></div><br/><div class="children"><div class="content">In my experience this approach is becoming more common, but slowly.<p>I still configure my default apex DMARC records (in most scenarios) to enforce strict alignment on both SPF and DKIM, but I’ve been relaxing that on a case by case basis or overriding the apex DMARC policy at a subdomain level and only using DKIM where supported.</div><br/></div></div></div></div></div></div><div id="40714928" class="c"><input type="checkbox" id="c-40714928" checked=""/><div class="controls bullet"><span class="by">oriettaxx</span><span>|</span><a href="#40710866">prev</a><span>|</span><a href="#40711868">next</a><span>|</span><label class="collapse" for="c-40714928">[-]</label><label class="expand" for="c-40714928">[2 more]</label></div><br/><div class="children"><div class="content">I would add <a href="https:&#x2F;&#x2F;www.mail-tester.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.mail-tester.com&#x2F;</a> to the testing tool list<p>the free version of <a href="https:&#x2F;&#x2F;eu.dmarcian.com" rel="nofollow">https:&#x2F;&#x2F;eu.dmarcian.com</a> (which is great btw, but costs a bit out of my budget) is good, too<p>this is good too <a href="https:&#x2F;&#x2F;www.20i.com&#x2F;blog&#x2F;dkim-demystified&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.20i.com&#x2F;blog&#x2F;dkim-demystified&#x2F;</a></div><br/><div id="40715207" class="c"><input type="checkbox" id="c-40715207" checked=""/><div class="controls bullet"><span class="by">WhyNotHugo</span><span>|</span><a href="#40714928">parent</a><span>|</span><a href="#40711868">next</a><span>|</span><label class="collapse" for="c-40715207">[-]</label><label class="expand" for="c-40715207">[1 more]</label></div><br/><div class="children"><div class="content">dmarcian won&#x27;t load in NL:<p>&gt; On February 20th 2024, the Hague Appellate court instructed dmarcian to block dmarcian.com visitors who originate from Dutch Internet Protocol addresses.<p>Apparently they had some trademark dispute with their local representative. The story on their website seems to be missing some key details to understand the whole picture.</div><br/></div></div></div></div><div id="40711868" class="c"><input type="checkbox" id="c-40711868" checked=""/><div class="controls bullet"><span class="by">disport</span><span>|</span><a href="#40714928">prev</a><span>|</span><a href="#40711159">next</a><span>|</span><label class="collapse" for="c-40711868">[-]</label><label class="expand" for="c-40711868">[2 more]</label></div><br/><div class="children"><div class="content">Disclaimer: My startup is made to get user domains automatically onboarded to applications, DNS-related things such as SPF&#x2F;DKIM&#x2F;DMARC. It&#x27;s a &quot;Stripe-for-DNS&quot; called cloudvalid.com.<p>I like the quality of this SPF&#x2F;DKIM&#x2F;DMARC guide. This is the industry I started out in, and I actually wrote the guides for SendGrid, Amazon SES, and a few other email products. I don&#x27;t mind saying that author has done a better job at this than me.<p>That being said, I see SPF&#x2F;DKIM&#x2F;DMARC guides like this pop up with some regularity, but users continue to have the same level of comprehension as before. I think the nature of this problem is not one that lends itself to being solved by guides. It&#x27;s the sort of problem that a user is really only faced with once, which means that they&#x27;re not getting the repetitions in to warrant any long-term comprehension.<p>I&#x27;m naturally biased here, but if you&#x27;re onboarding users with SPF&#x2F;DKIM&#x2F;DMARC to your application, it&#x27;s good if you can just get them setup with automation.</div><br/><div id="40713958" class="c"><input type="checkbox" id="c-40713958" checked=""/><div class="controls bullet"><span class="by">apitman</span><span>|</span><a href="#40711868">parent</a><span>|</span><a href="#40711159">next</a><span>|</span><label class="collapse" for="c-40713958">[-]</label><label class="expand" for="c-40713958">[1 more]</label></div><br/><div class="children"><div class="content">&gt; My startup is made to get user domains automatically onboarded to applications, DNS-related things such as SPF&#x2F;DKIM&#x2F;DMARC. It&#x27;s a &quot;Stripe-for-DNS&quot; called cloudvalid.com.<p>Interesting. Not lot of startups out there talking about Domain Connect on their front page. Seems like a decent amount of overlap with my project TakingNames.io[0]. Feel free to reach out if you want to talk shop.<p>[0]: <a href="https:&#x2F;&#x2F;takingnames.io&#x2F;blog&#x2F;introducing-takingnames-io" rel="nofollow">https:&#x2F;&#x2F;takingnames.io&#x2F;blog&#x2F;introducing-takingnames-io</a></div><br/></div></div></div></div><div id="40711159" class="c"><input type="checkbox" id="c-40711159" checked=""/><div class="controls bullet"><span class="by">lovasoa</span><span>|</span><a href="#40711868">prev</a><span>|</span><a href="#40712997">next</a><span>|</span><label class="collapse" for="c-40711159">[-]</label><label class="expand" for="c-40711159">[5 more]</label></div><br/><div class="children"><div class="content">Just today, someone sent me the link to a great tool to debug dmark issues: <a href="https:&#x2F;&#x2F;www.learndmarc.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.learndmarc.com&#x2F;</a></div><br/><div id="40711799" class="c"><input type="checkbox" id="c-40711799" checked=""/><div class="controls bullet"><span class="by">UberFly</span><span>|</span><a href="#40711159">parent</a><span>|</span><a href="#40713399">next</a><span>|</span><label class="collapse" for="c-40711799">[-]</label><label class="expand" for="c-40711799">[1 more]</label></div><br/><div class="children"><div class="content">Just tried it - you&#x27;re right that is really good. Thanks.</div><br/></div></div><div id="40713399" class="c"><input type="checkbox" id="c-40713399" checked=""/><div class="controls bullet"><span class="by">nevster</span><span>|</span><a href="#40711159">parent</a><span>|</span><a href="#40711799">prev</a><span>|</span><a href="#40714953">next</a><span>|</span><label class="collapse" for="c-40713399">[-]</label><label class="expand" for="c-40713399">[1 more]</label></div><br/><div class="children"><div class="content">Fantastic!</div><br/></div></div><div id="40714953" class="c"><input type="checkbox" id="c-40714953" checked=""/><div class="controls bullet"><span class="by">oriettaxx</span><span>|</span><a href="#40711159">parent</a><span>|</span><a href="#40713399">prev</a><span>|</span><a href="#40714567">next</a><span>|</span><label class="collapse" for="c-40714953">[-]</label><label class="expand" for="c-40714953">[1 more]</label></div><br/><div class="children"><div class="content">uh, you are right, super cool!<p>sysadmins will love it</div><br/></div></div><div id="40714567" class="c"><input type="checkbox" id="c-40714567" checked=""/><div class="controls bullet"><span class="by">jesterson</span><span>|</span><a href="#40711159">parent</a><span>|</span><a href="#40714953">prev</a><span>|</span><a href="#40712997">next</a><span>|</span><label class="collapse" for="c-40714567">[-]</label><label class="expand" for="c-40714567">[1 more]</label></div><br/><div class="children"><div class="content">Is it just me who finds this tool horrendous? Instead of just giving a report, it makes words fly on the page... Certainly it looks cool and perhaps appealing to some younger generation, but if it is tech analysis, you would expect clear and concise report, not some flying things with explanation like I am 4</div><br/></div></div></div></div><div id="40712997" class="c"><input type="checkbox" id="c-40712997" checked=""/><div class="controls bullet"><span class="by">dankai</span><span>|</span><a href="#40711159">prev</a><span>|</span><a href="#40712875">next</a><span>|</span><label class="collapse" for="c-40712997">[-]</label><label class="expand" for="c-40712997">[8 more]</label></div><br/><div class="children"><div class="content">This is a great guide but from my experience, even if you configure it 100% correctly, email services like Gmail may still classify your emails as spam for no apparent reason while not being on any IP or domain blacklist. I tried for hundreds of hours to get around it with no avail, and my emails to Gmail always went to spam unless it was a response to an email from a Gmail address. Had to go back to a 3rd party hosted service (iCloud) because of it.</div><br/><div id="40713321" class="c"><input type="checkbox" id="c-40713321" checked=""/><div class="controls bullet"><span class="by">notarealllama</span><span>|</span><a href="#40712997">parent</a><span>|</span><a href="#40713228">next</a><span>|</span><label class="collapse" for="c-40713321">[-]</label><label class="expand" for="c-40713321">[3 more]</label></div><br/><div class="children"><div class="content">Came here to say this, plus add a little personal insight to the future of email.<p>I&#x27;ve run 5 or 6 different mail servers over the past 10 years. Originally before O365 I was an exchange admin, then postfix, iRed, mailcow, mail gun, you name it. Hosted on every cloud provider, even in our colo with part of a private &#x2F;24 allocation with good reputation (built since 1997, gawdamn). Every sort of header combination, tls setup, and no blacklists. Always 100% alignment, including strict rejection policy (best results even over quarantine).<p>Does not matter, if you&#x27;re sending from custom domain not handled through a big name, expect the spam box with Gmail. Yahoo and Outlook are fine, but Gmail is the bane.<p>I&#x27;ve spent maybe 100 hours of my own over this last year and know what I realized? Nobody cares about email anymore, except for automated account management stuff (login, PW reset). Businesses pay the $3 &#x2F;mo &#x2F; seat for fastmail and don&#x27;t think twice.<p>But the current trend is toward social chat (discord or Whatsapp) and most the people who own an iPhone just use their apple ID email for everything.<p>Although I am a fervent supporter of open protocols and believe email (with pgp signing) is an awesome long form communication format... Face it, it&#x27;s going the way of the fax machine.</div><br/><div id="40714249" class="c"><input type="checkbox" id="c-40714249" checked=""/><div class="controls bullet"><span class="by">cuu508</span><span>|</span><a href="#40712997">root</a><span>|</span><a href="#40713321">parent</a><span>|</span><a href="#40713228">next</a><span>|</span><label class="collapse" for="c-40714249">[-]</label><label class="expand" for="c-40714249">[2 more]</label></div><br/><div class="children"><div class="content">Perhaps it is a volume issue? You need steady and significant volume of emails to maintain reputation at gmail and friends.</div><br/><div id="40714698" class="c"><input type="checkbox" id="c-40714698" checked=""/><div class="controls bullet"><span class="by">1ncorrect</span><span>|</span><a href="#40712997">root</a><span>|</span><a href="#40714249">parent</a><span>|</span><a href="#40713228">next</a><span>|</span><label class="collapse" for="c-40714698">[-]</label><label class="expand" for="c-40714698">[1 more]</label></div><br/><div class="children"><div class="content">Guilty until proven innocent, an excellent initial position.<p>I’ve had to relax my SPF record to include the entire mail pool of my ISP to be able to send to anything hosted by Microsoft. I tried to liaise with them directly, and through Linode, but they refused to exclude the IP from their opaque blocklist. Their proposed solution was to change the IP of the VPS, but that’s just agreeing to play whack-a-mole with a bad faith actor.<p>There should be a path to greater transparency and accountability from the SMTP cartels, but I’m at a loss as to how that can manifest.</div><br/></div></div></div></div></div></div><div id="40713228" class="c"><input type="checkbox" id="c-40713228" checked=""/><div class="controls bullet"><span class="by">gerdesj</span><span>|</span><a href="#40712997">parent</a><span>|</span><a href="#40713321">prev</a><span>|</span><a href="#40712875">next</a><span>|</span><label class="collapse" for="c-40713228">[-]</label><label class="expand" for="c-40713228">[4 more]</label></div><br/><div class="children"><div class="content">I have had a Gmail account from the days when it was invitation only.  The inbox contains spam and my test emails and nothing else!<p>I&#x27;ve run tiny smtp systems for 25 years or so.  It can be done.  I am based in the UK but at least one of my domains is a .net jobbie, so nominally American.  That one still works fine and it is my (ltd) company domain, so all good.  The MX records etc have moved around a bit but always very carefully.<p>It all starts around the IP address you are using.  Is it &quot;tainted&quot;? is it in a tainted block?  If it is then you need to either go elsewhere or clean it up and that takes a bit of time.  By clean it up I mean apply for removal from the usual suspect&#x27;s blocklists - Spamcop (lol), Spamhaus and all the rest that you can find.<p>Now setup PTR records.  That has to be done by your ISP.  If they can&#x27;t do it for you, then find a new ISP.  If you can&#x27;t get PTR records to match A records then you may have to give up.  One of the first checks an anti spam system will do is reverse look up an incoming IP address and compare it.  Also that should match the HELO&#x2F;EHLO announced by the SMTP MTA:<p>SMTP connection from IP address 12.13.14.15 
HELO (my name is) smtp.example.co.uk<p>Receiver will check: smtp.example.co.uk == 12.13.14.15 AND 15.14.13.12.in-addr.arpa == smtp.example.co.uk.<p>Everyone gets their knickers in a twist about SPF, DKIM and DMARC but if you do not get the prior basics of IP -&gt; A -&gt; HELO -&gt; PTR sorted out first then you will fail sooner or later.  I also recommend that you ensure your MX records (receiving) match up too with your sending records.  It means you can use mx is SPF, for example.<p>If you have multiple internet connections and IPs then be absolutely certain that your inbound and outbound IPs for SMTP match up.<p>Sorted all that?  Cool, now proceed to SPF.<p>Most people fail at the PTR stage.  If your ISP will not do PTR for you then you are probably screwed for self hosted SMTP.  If you cannot change ISP to one that will, then you are really screwed.  Sorry.  In that case you will have to engage a service that will route SMTP on your behalf.  It won&#x27;t cost much but you won&#x27;t own it and you will have to pay someone to do it.  Soz.</div><br/><div id="40713375" class="c"><input type="checkbox" id="c-40713375" checked=""/><div class="controls bullet"><span class="by">notarealllama</span><span>|</span><a href="#40712997">root</a><span>|</span><a href="#40713228">parent</a><span>|</span><a href="#40713957">next</a><span>|</span><label class="collapse" for="c-40713375">[-]</label><label class="expand" for="c-40713375">[1 more]</label></div><br/><div class="children"><div class="content">Reverse pointer is pretty easy with some hosting (Linode) and painful with others, but that&#x27;s pretty basic knowledge. Same with managing IP reputation. Heck, mail gun helps warm up IPs for you (but if you&#x27;re not email marketing it&#x27;s ridiculous to maintain that).<p>What really gobbles my bobble is BIMI. Even without the paid-for certificate ($1500 is absurd), you can set it up to show your logo, and works on some providers (like yahoo). But careful, you have BIMI without the cert set up? Gmail spam-cans it.<p>Same with pgp, if you include your signature a lot of providers will immediately increase it&#x27;s spam rating, usually high enough to land in spam (+7 pts usually), even though I doubt any spammer or scammer is inviting you to encrypted chats.<p>Email is broken because we all signed up for Gmail and didn&#x27;t know better at the time.</div><br/></div></div><div id="40713957" class="c"><input type="checkbox" id="c-40713957" checked=""/><div class="controls bullet"><span class="by">pteraspidomorph</span><span>|</span><a href="#40712997">root</a><span>|</span><a href="#40713228">parent</a><span>|</span><a href="#40713375">prev</a><span>|</span><a href="#40714770">next</a><span>|</span><label class="collapse" for="c-40713957">[-]</label><label class="expand" for="c-40713957">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s getting pretty expensive to rent one IPv4 address per domain these days. You also don&#x27;t always control every address in a block, which means there may be nothing you can do about your reputation no matter where you go.</div><br/></div></div><div id="40714770" class="c"><input type="checkbox" id="c-40714770" checked=""/><div class="controls bullet"><span class="by">encom</span><span>|</span><a href="#40712997">root</a><span>|</span><a href="#40713228">parent</a><span>|</span><a href="#40713957">prev</a><span>|</span><a href="#40712875">next</a><span>|</span><label class="collapse" for="c-40714770">[-]</label><label class="expand" for="c-40714770">[1 more]</label></div><br/><div class="children"><div class="content">&gt;Spamcop (lol)<p>What is lol about Spamcop?</div><br/></div></div></div></div></div></div><div id="40712875" class="c"><input type="checkbox" id="c-40712875" checked=""/><div class="controls bullet"><span class="by">betaby</span><span>|</span><a href="#40712997">prev</a><span>|</span><a href="#40714747">next</a><span>|</span><label class="collapse" for="c-40712875">[-]</label><label class="expand" for="c-40712875">[3 more]</label></div><br/><div class="children"><div class="content">We need more email diversity. 
Use your own email servers as often as you can. Monocultures of Apple&#x2F;Google&#x2F;MS is  deterioration for the Internet.</div><br/><div id="40713551" class="c"><input type="checkbox" id="c-40713551" checked=""/><div class="controls bullet"><span class="by">nerdponx</span><span>|</span><a href="#40712875">parent</a><span>|</span><a href="#40714747">next</a><span>|</span><label class="collapse" for="c-40713551">[-]</label><label class="expand" for="c-40713551">[2 more]</label></div><br/><div class="children"><div class="content">And you don&#x27;t need to run your own server in order to escape the big players. I have been a happy Fastmail customer for many years now.</div><br/><div id="40714077" class="c"><input type="checkbox" id="c-40714077" checked=""/><div class="controls bullet"><span class="by">TheNewsIsHere</span><span>|</span><a href="#40712875">root</a><span>|</span><a href="#40713551">parent</a><span>|</span><a href="#40714747">next</a><span>|</span><label class="collapse" for="c-40714077">[-]</label><label class="expand" for="c-40714077">[1 more]</label></div><br/><div class="children"><div class="content">I second Fastmail wholeheartedly. I moved multiple self-hosted (Postfix and Dovecot) environments to Fastmail and haven’t looked back. The only thing I lost was the ability to manually configure an address to bounce back.<p>Sending and receiving as a wildcard alias is fantastic, and Fastmail allowing that was the reason I finally moved. I held out on that feature for a long time. (You can also do this in Exchange Online if you want to run a convoluted and officially unsupported configuration.)<p>I only twice had any kind of RBL issues, and one was a motivating factor in moving. I also got tired of worrying about patching and CVEs. I do that enough for my work.</div><br/></div></div></div></div></div></div><div id="40714747" class="c"><input type="checkbox" id="c-40714747" checked=""/><div class="controls bullet"><span class="by">kuon</span><span>|</span><a href="#40712875">prev</a><span>|</span><a href="#40710944">next</a><span>|</span><label class="collapse" for="c-40714747">[-]</label><label class="expand" for="c-40714747">[1 more]</label></div><br/><div class="children"><div class="content">I run my own email server, and I&#x27;ll add that SFP &#x2F;DKIM and spam filtering should be done at the connection level during SMTP session. Your MTA should not accept a message for delivery that has been filtered. This ensures that the sender of false positive gets a notification from his MTA and also, in my experience, it works very well to discourage spam senders from trying again as they think your MTA is broken.</div><br/></div></div><div id="40710944" class="c"><input type="checkbox" id="c-40710944" checked=""/><div class="controls bullet"><span class="by">NoboruWataya</span><span>|</span><a href="#40714747">prev</a><span>|</span><a href="#40712128">next</a><span>|</span><label class="collapse" for="c-40710944">[-]</label><label class="expand" for="c-40710944">[1 more]</label></div><br/><div class="children"><div class="content">&gt; If you are invovled in developing, supporting, or maintaining an application that sends emails, this guide is a must read.<p>I would also say a guide like this is helpful whenever you are using a custom domain with an email service, and therefore need to set these records yourself. Okay, you might not need to have an in-depth knowledge of these concepts, but it&#x27;s certainly helpful to understand <i>why</i> your email provider is telling you to set all these weird DNS records.</div><br/></div></div><div id="40711202" class="c"><input type="checkbox" id="c-40711202" checked=""/><div class="controls bullet"><span class="by">detourdog</span><span>|</span><a href="#40712128">prev</a><span>|</span><a href="#40711974">next</a><span>|</span><label class="collapse" for="c-40711202">[-]</label><label class="expand" for="c-40711202">[4 more]</label></div><br/><div class="children"><div class="content">When I first implemented the above the next step was going to be ARC.<p>Does anyone have thoughts on ARC?<p><a href="https:&#x2F;&#x2F;www.validity.com&#x2F;blog&#x2F;how-to-explain-authenticated-received-chain-arc-in-plain-english&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.validity.com&#x2F;blog&#x2F;how-to-explain-authenticated-r...</a></div><br/><div id="40711295" class="c"><input type="checkbox" id="c-40711295" checked=""/><div class="controls bullet"><span class="by">jabroni_salad</span><span>|</span><a href="#40711202">parent</a><span>|</span><a href="#40711974">next</a><span>|</span><label class="collapse" for="c-40711295">[-]</label><label class="expand" for="c-40711295">[3 more]</label></div><br/><div class="children"><div class="content">It&#x27;s only really needed if you need to robo-forward stuff between domains. For example if you set up a domain but want to receive emails to your usual gmail.<p>I noticed that cloudflare&#x27;s email forwarder uses an ARC record and it works a treat.</div><br/><div id="40711377" class="c"><input type="checkbox" id="c-40711377" checked=""/><div class="controls bullet"><span class="by">lxgr</span><span>|</span><a href="#40711202">root</a><span>|</span><a href="#40711295">parent</a><span>|</span><a href="#40711974">next</a><span>|</span><label class="collapse" for="c-40711377">[-]</label><label class="expand" for="c-40711377">[2 more]</label></div><br/><div class="children"><div class="content">I recently noticed this when debugging email delivery issues for a family member who have their own TLD, but forward everything to Gmail.<p>Unfortunately, the mail server of the forwarding domain doesn&#x27;t seem to support ARC, so Gmail frequently throws away everything that doesn&#x27;t have a DMARC header, since without DMARC the only other option is SPF, which doesn&#x27;t work for forwarding.</div><br/><div id="40711585" class="c"><input type="checkbox" id="c-40711585" checked=""/><div class="controls bullet"><span class="by">jabroni_salad</span><span>|</span><a href="#40711202">root</a><span>|</span><a href="#40711377">parent</a><span>|</span><a href="#40711974">next</a><span>|</span><label class="collapse" for="c-40711585">[-]</label><label class="expand" for="c-40711585">[1 more]</label></div><br/><div class="children"><div class="content">A lot of small businesses in my area have been bit by that this year. I have to give hostgator&#x2F;bluehost&#x2F;godaddy etc kudos for having an email forwarder work reliably for so long but I wish they were more proactive about getting their customers compliant with this.<p>Also it&#x27;s kinda messed up how much of the small business sector is relying on AOL webmail to operate.</div><br/></div></div></div></div></div></div></div></div><div id="40712086" class="c"><input type="checkbox" id="c-40712086" checked=""/><div class="controls bullet"><span class="by">heavyset_go</span><span>|</span><a href="#40711974">prev</a><span>|</span><a href="#40712477">next</a><span>|</span><label class="collapse" for="c-40712086">[-]</label><label class="expand" for="c-40712086">[6 more]</label></div><br/><div class="children"><div class="content">Tangential, but what is the contemporary go-to for standing up a mail server these days? The last time I had to do so was a decade ago.<p>I remember Mail-in-a-Box being popular at one point, wondering if that&#x27;s still the case.</div><br/><div id="40714031" class="c"><input type="checkbox" id="c-40714031" checked=""/><div class="controls bullet"><span class="by">ranger207</span><span>|</span><a href="#40712086">parent</a><span>|</span><a href="#40712357">next</a><span>|</span><label class="collapse" for="c-40714031">[-]</label><label class="expand" for="c-40714031">[1 more]</label></div><br/><div class="children"><div class="content">There&#x27;s a bunch of options: <a href="https:&#x2F;&#x2F;github.com&#x2F;awesome-selfhosted&#x2F;awesome-selfhosted?tab=readme-ov-file#communication---email---complete-solutions">https:&#x2F;&#x2F;github.com&#x2F;awesome-selfhosted&#x2F;awesome-selfhosted?tab...</a><p>I personally use docker-mailserver <a href="https:&#x2F;&#x2F;docker-mailserver.github.io&#x2F;docker-mailserver&#x2F;latest&#x2F;" rel="nofollow">https:&#x2F;&#x2F;docker-mailserver.github.io&#x2F;docker-mailserver&#x2F;latest...</a> because it&#x27;s a pretty traditional stack (postfix+dovecot+sieve etc) just already containerized and configured, so there&#x27;s a lot of info already out there on how it works<p>The number 0 requirement that you have to solve regardless of stack though is to get an IP with a good reputation. I&#x27;ve got Comcast Business to my apartment, which I think is probably the best way to get a good IP since it&#x27;s relatively difficult for spammers to have used it in the past. Alternatively, relay everything through Mailgun&#x2F;SES&#x2F;whatever</div><br/></div></div><div id="40712357" class="c"><input type="checkbox" id="c-40712357" checked=""/><div class="controls bullet"><span class="by">jeroenhd</span><span>|</span><a href="#40712086">parent</a><span>|</span><a href="#40714031">prev</a><span>|</span><a href="#40712765">next</a><span>|</span><label class="collapse" for="c-40712357">[-]</label><label class="expand" for="c-40712357">[2 more]</label></div><br/><div class="children"><div class="content">Really depends on what you want to get out of your server. Most easy to use server software I know seems to be geared towards personal use and small organisations.<p>Mail-in-a-box still works, though last time I checked they were on quite an old Ubuntu LTS release. There are a few pre-packaged docker containers too (i.e. docker-mailserver) which seem to be popular. I myself use Mailcow, but that&#x27;s pretty heavy for &quot;just&quot; a mail server.<p>There&#x27;s also a mail server that I can&#x27;t for the life of me remember the name of, which packaged a whole bunch of stuff into one single binary you can run rather than use the classic &quot;every part of the email delivery chain is a separate process&quot; approach. I think it was written in Go?</div><br/><div id="40714298" class="c"><input type="checkbox" id="c-40714298" checked=""/><div class="controls bullet"><span class="by">cuu508</span><span>|</span><a href="#40712086">root</a><span>|</span><a href="#40712357">parent</a><span>|</span><a href="#40712765">next</a><span>|</span><label class="collapse" for="c-40714298">[-]</label><label class="expand" for="c-40714298">[1 more]</label></div><br/><div class="children"><div class="content">&gt; There&#x27;s also a mail server that I can&#x27;t for the life of me remember the name of, which packaged a whole bunch of stuff into one single binary you can run rather than use the classic &quot;every part of the email delivery chain is a separate process&quot; approach. I think it was written in Go?<p>maddy or mox?</div><br/></div></div></div></div><div id="40712765" class="c"><input type="checkbox" id="c-40712765" checked=""/><div class="controls bullet"><span class="by">cauterize</span><span>|</span><a href="#40712086">parent</a><span>|</span><a href="#40712357">prev</a><span>|</span><a href="#40712425">next</a><span>|</span><label class="collapse" for="c-40712765">[-]</label><label class="expand" for="c-40712765">[1 more]</label></div><br/><div class="children"><div class="content">I’m partial to <a href="https:&#x2F;&#x2F;gitlab.com&#x2F;simple-nixos-mailserver&#x2F;nixos-mailserver" rel="nofollow">https:&#x2F;&#x2F;gitlab.com&#x2F;simple-nixos-mailserver&#x2F;nixos-mailserver</a><p>Does require some NixOS knowledge, but is nice for upgrades.</div><br/></div></div><div id="40712425" class="c"><input type="checkbox" id="c-40712425" checked=""/><div class="controls bullet"><span class="by">bongodongobob</span><span>|</span><a href="#40712086">parent</a><span>|</span><a href="#40712765">prev</a><span>|</span><a href="#40712477">next</a><span>|</span><label class="collapse" for="c-40712425">[-]</label><label class="expand" for="c-40712425">[1 more]</label></div><br/><div class="children"><div class="content">For a business? You don&#x27;t. For hobby&#x2F;fun? I still wouldn&#x27;t. I tried years ago and you&#x27;re just going to fight blacklisting constantly. If you&#x27;re on a residential&#x2F;consumer internet service, trying to set it up in your home lab, forget it.</div><br/></div></div></div></div><div id="40712477" class="c"><input type="checkbox" id="c-40712477" checked=""/><div class="controls bullet"><span class="by">remram</span><span>|</span><a href="#40712086">prev</a><span>|</span><a href="#40713959">next</a><span>|</span><label class="collapse" for="c-40712477">[-]</label><label class="expand" for="c-40712477">[2 more]</label></div><br/><div class="children"><div class="content">My problem with SPF (&amp; co) is redirections.<p>I have email redirected from other domains into my (Gmail) inbox. For it to arrive, I use SRS, so the email is properly aligned and always makes it into my inbox. The problem is that some of that email is malicious. I have a choice of dropping those mails, and I never see a trace of it in my inbox, or forwarding them with SRS, and they look to Gmail like 100% perfectly good mails sent from my own domain (but still potentially malicious). It&#x27;s annoying.</div><br/><div id="40714672" class="c"><input type="checkbox" id="c-40714672" checked=""/><div class="controls bullet"><span class="by">alt227</span><span>|</span><a href="#40712477">parent</a><span>|</span><a href="#40713959">next</a><span>|</span><label class="collapse" for="c-40714672">[-]</label><label class="expand" for="c-40714672">[1 more]</label></div><br/><div class="children"><div class="content">&gt; It&#x27;s annoying.<p>This seems very much like a problem you have created for yourself.</div><br/></div></div></div></div><div id="40713959" class="c"><input type="checkbox" id="c-40713959" checked=""/><div class="controls bullet"><span class="by">nubinetwork</span><span>|</span><a href="#40712477">prev</a><span>|</span><a href="#40712896">next</a><span>|</span><label class="collapse" for="c-40713959">[-]</label><label class="expand" for="c-40713959">[5 more]</label></div><br/><div class="children"><div class="content">These kinds of articles pop up on HN all the time...<p>Give me a mail server that can use LE for certificates and I&#x27;ll gladly give DKIM and DMARC a try...</div><br/><div id="40714150" class="c"><input type="checkbox" id="c-40714150" checked=""/><div class="controls bullet"><span class="by">inejge</span><span>|</span><a href="#40713959">parent</a><span>|</span><a href="#40714053">next</a><span>|</span><label class="collapse" for="c-40714150">[-]</label><label class="expand" for="c-40714150">[2 more]</label></div><br/><div class="children"><div class="content">You don&#x27;t need public certificates for DKIM, it uses privately generated ones for as long as you want to keep them. (A security researcher recently found quite a few domains using weak DKIM keys generated by buggy Debian OpenSSL, more than fifteen years ago.)</div><br/><div id="40714289" class="c"><input type="checkbox" id="c-40714289" checked=""/><div class="controls bullet"><span class="by">nubinetwork</span><span>|</span><a href="#40713959">root</a><span>|</span><a href="#40714150">parent</a><span>|</span><a href="#40714053">next</a><span>|</span><label class="collapse" for="c-40714289">[-]</label><label class="expand" for="c-40714289">[1 more]</label></div><br/><div class="children"><div class="content">I could swear at one point you needed one, but I just half-setup opendkim and it generated one without me needing to make one by hand...    when I get around to updating the DNS on my personal domains, I guess I&#x27;ll see how things turn out.</div><br/></div></div></div></div><div id="40714053" class="c"><input type="checkbox" id="c-40714053" checked=""/><div class="controls bullet"><span class="by">yubiox</span><span>|</span><a href="#40713959">parent</a><span>|</span><a href="#40714150">prev</a><span>|</span><a href="#40712896">next</a><span>|</span><label class="collapse" for="c-40714053">[-]</label><label class="expand" for="c-40714053">[2 more]</label></div><br/><div class="children"><div class="content">Sendmail</div><br/><div id="40714082" class="c"><input type="checkbox" id="c-40714082" checked=""/><div class="controls bullet"><span class="by">nubinetwork</span><span>|</span><a href="#40713959">root</a><span>|</span><a href="#40714053">parent</a><span>|</span><a href="#40712896">next</a><span>|</span><label class="collapse" for="c-40714082">[-]</label><label class="expand" for="c-40714082">[1 more]</label></div><br/><div class="children"><div class="content">I can&#x27;t believe sendmail still exists...  worst configuration format ever.</div><br/></div></div></div></div></div></div><div id="40713342" class="c"><input type="checkbox" id="c-40713342" checked=""/><div class="controls bullet"><span class="by">jgalt212</span><span>|</span><a href="#40712896">prev</a><span>|</span><label class="collapse" for="c-40713342">[-]</label><label class="expand" for="c-40713342">[1 more]</label></div><br/><div class="children"><div class="content">Many of our emails were blocked because our SPF record was correct for our domain, but not correct for the Return-Path domain. There is no mention of Return-Path in the guide, but it&#x27;s essential to get this right.<p><a href="https:&#x2F;&#x2F;easydmarc.com&#x2F;blog&#x2F;how-does-an-spf-record-work&#x2F;" rel="nofollow">https:&#x2F;&#x2F;easydmarc.com&#x2F;blog&#x2F;how-does-an-spf-record-work&#x2F;</a></div><br/></div></div></div></div></div></div></div></body></html>