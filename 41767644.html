<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1728378068696" as="style"/><link rel="stylesheet" href="styles.css?v=1728378068696"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://wasmer.io/posts/clang-in-browser">Show HN: Compiling C in the browser using WebAssembly</a> <span class="domain">(<a href="https://wasmer.io">wasmer.io</a>)</span></div><div class="subtext"><span>syrusakbary</span> | <span>58 comments</span></div><br/><div><div id="41769612" class="c"><input type="checkbox" id="c-41769612" checked=""/><div class="controls bullet"><span class="by">whytevuhuni</span><span>|</span><a href="#41768680">next</a><span>|</span><label class="collapse" for="c-41769612">[-]</label><label class="expand" for="c-41769612">[8 more]</label></div><br/><div class="children"><div class="content">Now all this needs is a simple OS running in a browser, that can edit and compile itself, post the resulting binary onto a WebDAV somewhere, and reload itself from there.<p>Then it becomes a fully self-sustaining OS that can live forever in a browser.</div><br/><div id="41772347" class="c"><input type="checkbox" id="c-41772347" checked=""/><div class="controls bullet"><span class="by">baudaux</span><span>|</span><a href="#41769612">parent</a><span>|</span><a href="#41771032">next</a><span>|</span><label class="collapse" for="c-41772347">[-]</label><label class="expand" for="c-41772347">[1 more]</label></div><br/><div class="children"><div class="content">Something like exaequOS? <a href="https:&#x2F;&#x2F;exaequos.com" rel="nofollow">https:&#x2F;&#x2F;exaequos.com</a></div><br/></div></div><div id="41771032" class="c"><input type="checkbox" id="c-41771032" checked=""/><div class="controls bullet"><span class="by">d_philla</span><span>|</span><a href="#41769612">parent</a><span>|</span><a href="#41772347">prev</a><span>|</span><a href="#41769880">next</a><span>|</span><label class="collapse" for="c-41771032">[-]</label><label class="expand" for="c-41771032">[1 more]</label></div><br/><div class="children"><div class="content">Check out Jeff Lindsay&#x27;s Wanix project: <a href="https:&#x2F;&#x2F;wanix.sh&#x2F;" rel="nofollow">https:&#x2F;&#x2F;wanix.sh&#x2F;</a></div><br/></div></div><div id="41769880" class="c"><input type="checkbox" id="c-41769880" checked=""/><div class="controls bullet"><span class="by">dangerwill</span><span>|</span><a href="#41769612">parent</a><span>|</span><a href="#41771032">prev</a><span>|</span><a href="#41769658">next</a><span>|</span><label class="collapse" for="c-41769880">[-]</label><label class="expand" for="c-41769880">[3 more]</label></div><br/><div class="children"><div class="content">Very interesting idea but I have to say that those goals are not possible with a simple OS, at least by OS definitions of simple :P</div><br/><div id="41769972" class="c"><input type="checkbox" id="c-41769972" checked=""/><div class="controls bullet"><span class="by">whytevuhuni</span><span>|</span><a href="#41769612">root</a><span>|</span><a href="#41769880">parent</a><span>|</span><a href="#41769658">next</a><span>|</span><label class="collapse" for="c-41769972">[-]</label><label class="expand" for="c-41769972">[2 more]</label></div><br/><div class="children"><div class="content">The old <a href="https:&#x2F;&#x2F;webassembly.sh&#x2F;" rel="nofollow">https:&#x2F;&#x2F;webassembly.sh&#x2F;</a> and the new <a href="https:&#x2F;&#x2F;wasmer.sh&#x2F;" rel="nofollow">https:&#x2F;&#x2F;wasmer.sh&#x2F;</a>  came a long way already.<p>All you need is a virtual filesystem of some sort, a way to download, a way to upload, an editor, a compiler, and a VT100 JS library. We already have WASI for the rest.<p>If the JS is too undesired, then perhaps go the old framebuffer graphics mode (e.g. a region of the WASM memory that is interpreted as an ASCII screen, or maybe even as a full bitmap buffer). Then JavaScript side just needs to forward keyboard&#x2F;mouse into memory and that screen region out of memory.</div><br/><div id="41770811" class="c"><input type="checkbox" id="c-41770811" checked=""/><div class="controls bullet"><span class="by">Arshia001</span><span>|</span><a href="#41769612">root</a><span>|</span><a href="#41769972">parent</a><span>|</span><a href="#41769658">next</a><span>|</span><label class="collapse" for="c-41770811">[-]</label><label class="expand" for="c-41770811">[1 more]</label></div><br/><div class="children"><div class="content">The framebuffer idea is used in this wasm doom port: <a href="https:&#x2F;&#x2F;github.com&#x2F;diekmann&#x2F;wasm-fizzbuzz&#x2F;tree&#x2F;main&#x2F;doom">https:&#x2F;&#x2F;github.com&#x2F;diekmann&#x2F;wasm-fizzbuzz&#x2F;tree&#x2F;main&#x2F;doom</a><p>WASIX already does all the other stuff you mentioned, including in the browser. The one thing it&#x27;s missing is GUI, mainly because there&#x27;s no standard GUI interface in POSIX.</div><br/></div></div></div></div></div></div><div id="41769658" class="c"><input type="checkbox" id="c-41769658" checked=""/><div class="controls bullet"><span class="by">jauntywundrkind</span><span>|</span><a href="#41769612">parent</a><span>|</span><a href="#41769880">prev</a><span>|</span><a href="#41768680">next</a><span>|</span><label class="collapse" for="c-41769658">[-]</label><label class="expand" for="c-41769658">[2 more]</label></div><br/><div class="children"><div class="content">And then use webrtc (or ideally someone can revive a webtransport-p2p <i>please</i>!) to serve itself from a page to other people.<p>Ideally http3 over webtransport-p2p!<p>Then add some network discovery so we can advertise &amp; find what&#x27;s available on our networks!</div><br/><div id="41774156" class="c"><input type="checkbox" id="c-41774156" checked=""/><div class="controls bullet"><span class="by">spirodonfl</span><span>|</span><a href="#41769612">root</a><span>|</span><a href="#41769658">parent</a><span>|</span><a href="#41768680">next</a><span>|</span><label class="collapse" for="c-41774156">[-]</label><label class="expand" for="c-41774156">[1 more]</label></div><br/><div class="children"><div class="content">Do you have a proper link to the webtransport-p2p idea? I&#x27;ve done a few searches but I think there&#x27;s some mix of current implementation and deprecated implementation somehow.<p>What is it that needs reviving?</div><br/></div></div></div></div></div></div><div id="41768680" class="c"><input type="checkbox" id="c-41768680" checked=""/><div class="controls bullet"><span class="by">marmaduke</span><span>|</span><a href="#41769612">prev</a><span>|</span><a href="#41774692">next</a><span>|</span><label class="collapse" for="c-41768680">[-]</label><label class="expand" for="c-41768680">[15 more]</label></div><br/><div class="children"><div class="content">Couldn’t a tcc or similarly simple C compiler be used instead of a 100MB Clang? Where’s the C to wasm compiler hiding?</div><br/><div id="41769916" class="c"><input type="checkbox" id="c-41769916" checked=""/><div class="controls bullet"><span class="by">mananaysiempre</span><span>|</span><a href="#41768680">parent</a><span>|</span><a href="#41770931">next</a><span>|</span><label class="collapse" for="c-41769916">[-]</label><label class="expand" for="c-41769916">[7 more]</label></div><br/><div class="children"><div class="content">One issue with Wasm is you essentially can&#x27;t target it with a single-pass compiler, unlike just about any real machine. Wasm can only represent reducible control flow, so you have to pass your control-flow graph through some variation of the Relooper[1,2]. I don&#x27;t know if upstream tcc can do that (there are apparently some forks?..).<p>[1] <a href="http:&#x2F;&#x2F;troubles.md&#x2F;why-do-we-need-the-relooper-algorithm-again&#x2F;" rel="nofollow">http:&#x2F;&#x2F;troubles.md&#x2F;why-do-we-need-the-relooper-algorithm-aga...</a><p>[2] <a href="https:&#x2F;&#x2F;medium.com&#x2F;leaningtech&#x2F;solving-the-structured-control-flow-problem-once-and-for-all-5123117b1ee2" rel="nofollow">https:&#x2F;&#x2F;medium.com&#x2F;leaningtech&#x2F;solving-the-structured-contro...</a></div><br/><div id="41770206" class="c"><input type="checkbox" id="c-41770206" checked=""/><div class="controls bullet"><span class="by">titzer</span><span>|</span><a href="#41768680">root</a><span>|</span><a href="#41769916">parent</a><span>|</span><a href="#41770931">next</a><span>|</span><label class="collapse" for="c-41770206">[-]</label><label class="expand" for="c-41770206">[6 more]</label></div><br/><div class="children"><div class="content">&gt; you essentially can&#x27;t target it with a single-pass compiler,<p>That might be true if your source language has goto, but for other languages that start with structured control flow, it&#x27;s possible to just carry the structure through and emit Wasm directly from the AST.</div><br/><div id="41770528" class="c"><input type="checkbox" id="c-41770528" checked=""/><div class="controls bullet"><span class="by">mananaysiempre</span><span>|</span><a href="#41768680">root</a><span>|</span><a href="#41770206">parent</a><span>|</span><a href="#41772816">next</a><span>|</span><label class="collapse" for="c-41770528">[-]</label><label class="expand" for="c-41770528">[1 more]</label></div><br/><div class="children"><div class="content">Sure, I was speaking in the context of C specifically. (In non-simplistic compilers, you may not want to preserve the source structure anyway—e.g. in Scheme or Lua with tail calls all over the place.)</div><br/></div></div><div id="41772816" class="c"><input type="checkbox" id="c-41772816" checked=""/><div class="controls bullet"><span class="by">RossBencina</span><span>|</span><a href="#41768680">root</a><span>|</span><a href="#41770206">parent</a><span>|</span><a href="#41770528">prev</a><span>|</span><a href="#41770448">next</a><span>|</span><label class="collapse" for="c-41772816">[-]</label><label class="expand" for="c-41772816">[3 more]</label></div><br/><div class="children"><div class="content">Presumably C&#x27;s `switch` is also a problem.</div><br/><div id="41773504" class="c"><input type="checkbox" id="c-41773504" checked=""/><div class="controls bullet"><span class="by">metadat</span><span>|</span><a href="#41768680">root</a><span>|</span><a href="#41772816">parent</a><span>|</span><a href="#41770448">next</a><span>|</span><label class="collapse" for="c-41773504">[-]</label><label class="expand" for="c-41773504">[2 more]</label></div><br/><div class="children"><div class="content">Yes, I don&#x27;t recall all the confusing elements and technicalities of what&#x27;s allowed in Switch statements in C offhand but here are a few brainfscks:<p><a href="https:&#x2F;&#x2F;old.reddit.com&#x2F;r&#x2F;C_Programming&#x2F;comments&#x2F;16kg48y&#x2F;mind_blown_by_switch_statement_syntax_and_labels&#x2F;" rel="nofollow">https:&#x2F;&#x2F;old.reddit.com&#x2F;r&#x2F;C_Programming&#x2F;comments&#x2F;16kg48y&#x2F;mind...</a><p><a href="https:&#x2F;&#x2F;old.reddit.com&#x2F;r&#x2F;programminghorror&#x2F;comments&#x2F;ylc7f3&#x2F;why_do_c_devs_love_switch_statements_so_much&#x2F;" rel="nofollow">https:&#x2F;&#x2F;old.reddit.com&#x2F;r&#x2F;programminghorror&#x2F;comments&#x2F;ylc7f3&#x2F;w...</a></div><br/><div id="41774822" class="c"><input type="checkbox" id="c-41774822" checked=""/><div class="controls bullet"><span class="by">r1chardnl</span><span>|</span><a href="#41768680">root</a><span>|</span><a href="#41773504">parent</a><span>|</span><a href="#41770448">next</a><span>|</span><label class="collapse" for="c-41774822">[-]</label><label class="expand" for="c-41774822">[1 more]</label></div><br/><div class="children"><div class="content">I went down a rabbithole and wow.<p>Found a comment from the author of <a href="https:&#x2F;&#x2F;github.com&#x2F;stclib&#x2F;STC">https:&#x2F;&#x2F;github.com&#x2F;stclib&#x2F;STC</a> apparently and then came across this example:<p><a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;a&#x2F;76887723" rel="nofollow">https:&#x2F;&#x2F;stackoverflow.com&#x2F;a&#x2F;76887723</a><p><pre><code>  int coro_a(struct a* g)
  {
   cco_routine (g) {
    printf(&quot;entering a\n&quot;);
    for (g-&gt;i = 0; g-&gt;i &lt; 3; g-&gt;i++) {
     printf(&quot;A step %d\n&quot;, g-&gt;i);
     cco_yield();
    }
    cco_final:
    printf(&quot;returning from a\n&quot;);
   }
   return 0; &#x2F;&#x2F; done
  }
</code></pre>
gcc -E -ISTC&#x2F;include co.c<p>After running it through a preprocessor, it gives me this.<p><pre><code>  int coro_a(struct a* g)
   {
    for (int* _state = &amp;(g)-&gt;cco_state; *_state != CCO_STATE_DONE; *_state = CCO_STATE_DONE) _resume: switch (*_state) case 0: {
     printf(&quot;entering a\n&quot;);
     for (g-&gt;i = 0; g-&gt;i &lt; 3; g-&gt;i++) {
      printf(&quot;A step %d\n&quot;, g-&gt;i);
      do { *_state = 14; return CCO_YIELD; goto _resume; case 14:; } while (0);
     }
     *_state = CCO_STATE_FINAL; case CCO_STATE_FINAL:
     printf(&quot;returning from a\n&quot;);
    }
    return 0;
   }</code></pre></div><br/></div></div></div></div></div></div><div id="41770448" class="c"><input type="checkbox" id="c-41770448" checked=""/><div class="controls bullet"><span class="by">alexdovzhanyn</span><span>|</span><a href="#41768680">root</a><span>|</span><a href="#41770206">parent</a><span>|</span><a href="#41772816">prev</a><span>|</span><a href="#41770931">next</a><span>|</span><label class="collapse" for="c-41770448">[-]</label><label class="expand" for="c-41770448">[1 more]</label></div><br/><div class="children"><div class="content">This is true. In Theta (<a href="https:&#x2F;&#x2F;github.com&#x2F;ThetaLang&#x2F;Theta">https:&#x2F;&#x2F;github.com&#x2F;ThetaLang&#x2F;Theta</a>) this is exactly what we do -- no need for more than one pass for the WASM codegen.</div><br/></div></div></div></div></div></div><div id="41770931" class="c"><input type="checkbox" id="c-41770931" checked=""/><div class="controls bullet"><span class="by">halb</span><span>|</span><a href="#41768680">parent</a><span>|</span><a href="#41769916">prev</a><span>|</span><a href="#41768848">next</a><span>|</span><label class="collapse" for="c-41770931">[-]</label><label class="expand" for="c-41770931">[1 more]</label></div><br/><div class="children"><div class="content">If all you want to do is compile and run c code in the browser you could run tcc in the blink x86_64 emulator, running in wasm.
It would take ~300Kb, less than the js &amp; css used in the average webpage</div><br/></div></div><div id="41768848" class="c"><input type="checkbox" id="c-41768848" checked=""/><div class="controls bullet"><span class="by">syrusakbary</span><span>|</span><a href="#41768680">parent</a><span>|</span><a href="#41770931">prev</a><span>|</span><a href="#41771188">next</a><span>|</span><label class="collapse" for="c-41768848">[-]</label><label class="expand" for="c-41768848">[3 more]</label></div><br/><div class="children"><div class="content">The whole LLVM toolchain is a bit big. I think we can reduce much more the size. We actually researched on using tcc but unfortunately tcc doesn’t have a wasm backend (for generating wasm output). It would be awesome if they added it!</div><br/><div id="41768911" class="c"><input type="checkbox" id="c-41768911" checked=""/><div class="controls bullet"><span class="by">fuhsnn</span><span>|</span><a href="#41768680">root</a><span>|</span><a href="#41768848">parent</a><span>|</span><a href="#41771188">next</a><span>|</span><label class="collapse" for="c-41768911">[-]</label><label class="expand" for="c-41768911">[2 more]</label></div><br/><div class="children"><div class="content">Check out <a href="https:&#x2F;&#x2F;github.com&#x2F;tyfkda&#x2F;xcc">https:&#x2F;&#x2F;github.com&#x2F;tyfkda&#x2F;xcc</a>, I&#x27;ve only used the native backend, but it&#x27;s small and fast.</div><br/><div id="41768969" class="c"><input type="checkbox" id="c-41768969" checked=""/><div class="controls bullet"><span class="by">syrusakbary</span><span>|</span><a href="#41768680">root</a><span>|</span><a href="#41768911">parent</a><span>|</span><a href="#41771188">next</a><span>|</span><label class="collapse" for="c-41768969">[-]</label><label class="expand" for="c-41768969">[1 more]</label></div><br/><div class="children"><div class="content">Nice! I didn’t know the project.
Thanks for sharing!</div><br/></div></div></div></div></div></div><div id="41771188" class="c"><input type="checkbox" id="c-41771188" checked=""/><div class="controls bullet"><span class="by">gnulinux</span><span>|</span><a href="#41768680">parent</a><span>|</span><a href="#41768848">prev</a><span>|</span><a href="#41768828">next</a><span>|</span><label class="collapse" for="c-41771188">[-]</label><label class="expand" for="c-41771188">[2 more]</label></div><br/><div class="children"><div class="content">I recently wanted to use tcc for a homebaked programming sideproject and was surprised to find it&#x27;s no longer supported anymore, at least not by Fabrice Bellard. Upstream git still has some light activity but no releases. I wasn&#x27;t sure how good of an idea it is to rely on it as a code generator.</div><br/><div id="41771749" class="c"><input type="checkbox" id="c-41771749" checked=""/><div class="controls bullet"><span class="by">stefanos82</span><span>|</span><a href="#41768680">root</a><span>|</span><a href="#41771188">parent</a><span>|</span><a href="#41768828">next</a><span>|</span><label class="collapse" for="c-41771749">[-]</label><label class="expand" for="c-41771749">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s alive and kicking my friend <a href="https:&#x2F;&#x2F;repo.or.cz&#x2F;tinycc.git&#x2F;shortlog" rel="nofollow">https:&#x2F;&#x2F;repo.or.cz&#x2F;tinycc.git&#x2F;shortlog</a><p>We wait for grischka to decide when to announce a new release <a href="https:&#x2F;&#x2F;lists.nongnu.org&#x2F;archive&#x2F;html&#x2F;tinycc-devel&#x2F;2024-10&#x2F;msg00000.html" rel="nofollow">https:&#x2F;&#x2F;lists.nongnu.org&#x2F;archive&#x2F;html&#x2F;tinycc-devel&#x2F;2024-10&#x2F;m...</a></div><br/></div></div></div></div><div id="41768828" class="c"><input type="checkbox" id="c-41768828" checked=""/><div class="controls bullet"><span class="by">kachapopopow</span><span>|</span><a href="#41768680">parent</a><span>|</span><a href="#41771188">prev</a><span>|</span><a href="#41774692">next</a><span>|</span><label class="collapse" for="c-41768828">[-]</label><label class="expand" for="c-41768828">[1 more]</label></div><br/><div class="children"><div class="content">clang can target wasm already.</div><br/></div></div></div></div><div id="41774692" class="c"><input type="checkbox" id="c-41774692" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#41768680">prev</a><span>|</span><a href="#41770048">next</a><span>|</span><label class="collapse" for="c-41774692">[-]</label><label class="expand" for="c-41774692">[1 more]</label></div><br/><div class="children"><div class="content">Not really, on Firefox<p><pre><code>    panicked at &#x2F;Users&#x2F;syrusakbary&#x2F;Development&#x2F;wasmer&#x2F;lib&#x2F;api&#x2F;src&#x2F;js&#x2F;instance.rs:62:84:
    called `Result::unwrap()` on an `Err` value: JsValue(Function(bound 846))

    Stack:

    fe&#x2F;_.wbg.__wbg_new_abda76e883ba8a5f@https:&#x2F;&#x2F;wasmer.sh&#x2F;assets&#x2F;index-CgFg6VHw.js:17:6582
    @https:&#x2F;&#x2F;wasmer.sh&#x2F;assets&#x2F;wasmer_js_bg-BruS15W0.wasm:wasm-function[1125]:0x2b4276
    @https:&#x2F;&#x2F;wasmer.sh&#x2F;assets&#x2F;wasmer_js_bg-BruS15W0.wasm:wasm-function[2888]:0x3ab373
    @https:&#x2F;&#x2F;wasmer.sh&#x2F;assets&#x2F;wasmer_js_bg-BruS15W0.wasm:wasm-function[8254]:0x435ed3
    @https:&#x2F;&#x2F;wasmer.sh&#x2F;assets&#x2F;wasmer_js_bg-BruS15W0.wasm:wasm-function[4825]:0x3fa7de
    @https:&#x2F;&#x2F;wasmer.sh&#x2F;assets&#x2F;wasmer_js_bg-BruS15W0.wasm:wasm-function[517]:0x1af753
    @https:&#x2F;&#x2F;wasmer.sh&#x2F;assets&#x2F;wasmer_js_bg-BruS15W0.wasm:wasm-function[294]:0xbed03
    @https:&#x2F;&#x2F;wasmer.sh&#x2F;assets&#x2F;wasmer_js_bg-BruS15W0.wasm:wasm-function[2039]:0x34b10e
    @https:&#x2F;&#x2F;wasmer.sh&#x2F;assets&#x2F;wasmer_js_bg-BruS15W0.wasm:wasm-function[2896]:0x3abaa1
    @https:&#x2F;&#x2F;wasmer.sh&#x2F;assets&#x2F;wasmer_js_bg-BruS15W0.wasm:wasm-function[9393]:0x43fde1
    S@https:&#x2F;&#x2F;wasmer.sh&#x2F;assets&#x2F;index-CgFg6VHw.js:11:424
    c@https:&#x2F;&#x2F;wasmer.sh&#x2F;assets&#x2F;index-CgFg6VHw.js:11:264</code></pre></div><br/></div></div><div id="41770048" class="c"><input type="checkbox" id="c-41770048" checked=""/><div class="controls bullet"><span class="by">kylewlacy</span><span>|</span><a href="#41774692">prev</a><span>|</span><a href="#41772805">next</a><span>|</span><label class="collapse" for="c-41770048">[-]</label><label class="expand" for="c-41770048">[1 more]</label></div><br/><div class="children"><div class="content">Very cool! I&#x27;ve been watching the &quot;toolchains in Wasm&quot; landscape for a while, and seeing a Clang&#x2F;LLVM toolchain running in Wasm is awesome!<p>YoWASP has also had an LLVM toolchain working in Wasm for a while too[1], although it seems like this version solves the subprocess problem by providing an implementation of `posix_spawn` whereas the YoWASP one uses some patches to avoid subprocesses altogether<p>My biggest question marks around this version are about runtime&#x2F;platform support. As I understand it, this toolchain uses WASIX, which (AFAICT) works with Wasmer&#x27;s own runtime and with a browser shim, but with none of the other runtimes. Are there plans to get WASIX more widely adopted across more runtimes, or to get WASIX caught up to the latest WASI standard (preview2)? Or maybe even better, bring the missing features from WASIX to mainline WASI like `posix_spawn`[2]? I&#x27;d love to be able to adopt this toolchain, but it doesn&#x27;t seem like WASIX support has really caught on across the other runtimes<p>[1]: <a href="https:&#x2F;&#x2F;discourse.llvm.org&#x2F;t&#x2F;rfc-building-llvm-for-webassembly&#x2F;79073" rel="nofollow">https:&#x2F;&#x2F;discourse.llvm.org&#x2F;t&#x2F;rfc-building-llvm-for-webassemb...</a>
[2]: <a href="https:&#x2F;&#x2F;github.com&#x2F;WebAssembly&#x2F;WASI&#x2F;issues&#x2F;414">https:&#x2F;&#x2F;github.com&#x2F;WebAssembly&#x2F;WASI&#x2F;issues&#x2F;414</a></div><br/></div></div><div id="41772805" class="c"><input type="checkbox" id="c-41772805" checked=""/><div class="controls bullet"><span class="by">ancientstraits</span><span>|</span><a href="#41770048">prev</a><span>|</span><a href="#41769856">next</a><span>|</span><label class="collapse" for="c-41772805">[-]</label><label class="expand" for="c-41772805">[1 more]</label></div><br/><div class="children"><div class="content">A few weeks ago, I tried to compile Clang to WebAssembly, but got several different errors, and tried fixing a lot of them, but some of them seemed kind of impossible to fix, so I thought I would try again at a later date. However it seems I will not need to try again. I feel angry that someone made a convenient solution before I did, but also happy, because this probably implies that they made a consistent process to compile Clang for WASM.</div><br/></div></div><div id="41769856" class="c"><input type="checkbox" id="c-41769856" checked=""/><div class="controls bullet"><span class="by">egnehots</span><span>|</span><a href="#41772805">prev</a><span>|</span><a href="#41770708">next</a><span>|</span><label class="collapse" for="c-41769856">[-]</label><label class="expand" for="c-41769856">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s pretty misleading not to mention the performance overhead. That&#x27;s an obvious downside and quite easy to benchmark. Skipping any discussion of performance feels like sweeping it under the marketing rug :&#x2F;</div><br/><div id="41769919" class="c"><input type="checkbox" id="c-41769919" checked=""/><div class="controls bullet"><span class="by">bilekas</span><span>|</span><a href="#41769856">parent</a><span>|</span><a href="#41770708">next</a><span>|</span><label class="collapse" for="c-41769919">[-]</label><label class="expand" for="c-41769919">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Skipping any discussion of performance feels like sweeping it under the marketing rug<p>Expecting performance while compiling C in the browser feels redundant right now though.</div><br/></div></div></div></div><div id="41770708" class="c"><input type="checkbox" id="c-41770708" checked=""/><div class="controls bullet"><span class="by">zengid</span><span>|</span><a href="#41769856">prev</a><span>|</span><a href="#41771134">next</a><span>|</span><label class="collapse" for="c-41770708">[-]</label><label class="expand" for="c-41770708">[2 more]</label></div><br/><div class="children"><div class="content">Didn&#x27;t Gary Bernhardt do this in 2014? &#x2F;sarcasm</div><br/><div id="41770715" class="c"><input type="checkbox" id="c-41770715" checked=""/><div class="controls bullet"><span class="by">zengid</span><span>|</span><a href="#41770708">parent</a><span>|</span><a href="#41771134">next</a><span>|</span><label class="collapse" for="c-41770715">[-]</label><label class="expand" for="c-41770715">[1 more]</label></div><br/><div class="children"><div class="content">reference <a href="https:&#x2F;&#x2F;www.destroyallsoftware.com&#x2F;talks&#x2F;the-birth-and-death-of-javascript" rel="nofollow">https:&#x2F;&#x2F;www.destroyallsoftware.com&#x2F;talks&#x2F;the-birth-and-death...</a></div><br/></div></div></div></div><div id="41771134" class="c"><input type="checkbox" id="c-41771134" checked=""/><div class="controls bullet"><span class="by">apignotti</span><span>|</span><a href="#41770708">prev</a><span>|</span><a href="#41768300">next</a><span>|</span><label class="collapse" for="c-41771134">[-]</label><label class="expand" for="c-41771134">[4 more]</label></div><br/><div class="children"><div class="content">GCC? That&#x27;s easy! :-) What about a complete system? <a href="https:&#x2F;&#x2F;webvm.io" rel="nofollow">https:&#x2F;&#x2F;webvm.io</a><p>Shameless plug: we are hosting a WebVM Hackathon next week (11-14 October) over Discord. For more information: <a href="https:&#x2F;&#x2F;cheerpx.io&#x2F;hackathon" rel="nofollow">https:&#x2F;&#x2F;cheerpx.io&#x2F;hackathon</a></div><br/><div id="41774284" class="c"><input type="checkbox" id="c-41774284" checked=""/><div class="controls bullet"><span class="by">baudaux</span><span>|</span><a href="#41771134">parent</a><span>|</span><a href="#41774438">next</a><span>|</span><label class="collapse" for="c-41774284">[-]</label><label class="expand" for="c-41774284">[2 more]</label></div><br/><div class="children"><div class="content">Can I compete with exaequOS?</div><br/><div id="41774374" class="c"><input type="checkbox" id="c-41774374" checked=""/><div class="controls bullet"><span class="by">apignotti</span><span>|</span><a href="#41771134">root</a><span>|</span><a href="#41774284">parent</a><span>|</span><a href="#41774438">next</a><span>|</span><label class="collapse" for="c-41774374">[-]</label><label class="expand" for="c-41774374">[1 more]</label></div><br/><div class="children"><div class="content">No, the competition is explicitly based around CheerpX: an X86 virtualization technology built on top of WebAssembly</div><br/></div></div></div></div><div id="41774438" class="c"><input type="checkbox" id="c-41774438" checked=""/><div class="controls bullet"><span class="by">jedisct1</span><span>|</span><a href="#41771134">parent</a><span>|</span><a href="#41774284">prev</a><span>|</span><a href="#41768300">next</a><span>|</span><label class="collapse" for="c-41774438">[-]</label><label class="expand" for="c-41774438">[1 more]</label></div><br/><div class="children"><div class="content">What about something that doesn&#x27;t even require WebAssembly and is faster? <a href="https:&#x2F;&#x2F;bellard.org&#x2F;jslinux&#x2F;" rel="nofollow">https:&#x2F;&#x2F;bellard.org&#x2F;jslinux&#x2F;</a></div><br/></div></div></div></div><div id="41768300" class="c"><input type="checkbox" id="c-41768300" checked=""/><div class="controls bullet"><span class="by">corysama</span><span>|</span><a href="#41771134">prev</a><span>|</span><a href="#41769482">next</a><span>|</span><label class="collapse" for="c-41768300">[-]</label><label class="expand" for="c-41768300">[5 more]</label></div><br/><div class="children"><div class="content">Is it possible&#x2F;already existing to have interactive C++ lessons where the user&#x27;s C++ code is compiled an run client-side in a web page?</div><br/><div id="41770204" class="c"><input type="checkbox" id="c-41770204" checked=""/><div class="controls bullet"><span class="by">halb</span><span>|</span><a href="#41768300">parent</a><span>|</span><a href="#41769435">next</a><span>|</span><label class="collapse" for="c-41770204">[-]</label><label class="expand" for="c-41770204">[1 more]</label></div><br/><div class="children"><div class="content">Absolutely! You can even run clang in wasm targeting x86_64, and then emulate the resulting program using the blink x86_64 emulator.<p>I&#x27;m working on something similar, where students can compile intel assembly and run it client-side: <a href="https:&#x2F;&#x2F;github.com&#x2F;robalb&#x2F;x86-64-playground">https:&#x2F;&#x2F;github.com&#x2F;robalb&#x2F;x86-64-playground</a></div><br/></div></div><div id="41769435" class="c"><input type="checkbox" id="c-41769435" checked=""/><div class="controls bullet"><span class="by">legobmw99</span><span>|</span><a href="#41768300">parent</a><span>|</span><a href="#41770204">prev</a><span>|</span><a href="#41768468">next</a><span>|</span><label class="collapse" for="c-41769435">[-]</label><label class="expand" for="c-41769435">[2 more]</label></div><br/><div class="children"><div class="content">See: emception<p><a href="https:&#x2F;&#x2F;github.com&#x2F;jprendes&#x2F;emception">https:&#x2F;&#x2F;github.com&#x2F;jprendes&#x2F;emception</a></div><br/><div id="41774077" class="c"><input type="checkbox" id="c-41774077" checked=""/><div class="controls bullet"><span class="by">nunobrito</span><span>|</span><a href="#41768300">root</a><span>|</span><a href="#41769435">parent</a><span>|</span><a href="#41768468">next</a><span>|</span><label class="collapse" for="c-41774077">[-]</label><label class="expand" for="c-41774077">[1 more]</label></div><br/><div class="children"><div class="content">Thanks, I&#x27;m seeing but the documentation is so scarce and I&#x27;m not a proefficient C expert.<p>What syntax can be used to run emception? Thank you.</div><br/></div></div></div></div><div id="41768468" class="c"><input type="checkbox" id="c-41768468" checked=""/><div class="controls bullet"><span class="by">fwip</span><span>|</span><a href="#41768300">parent</a><span>|</span><a href="#41769435">prev</a><span>|</span><a href="#41769482">next</a><span>|</span><label class="collapse" for="c-41768468">[-]</label><label class="expand" for="c-41768468">[1 more]</label></div><br/><div class="children"><div class="content">Definitely been possible for at least 5 years now. Would probably be a weekend project now.</div><br/></div></div></div></div><div id="41769482" class="c"><input type="checkbox" id="c-41769482" checked=""/><div class="controls bullet"><span class="by">legobmw99</span><span>|</span><a href="#41768300">prev</a><span>|</span><a href="#41769442">next</a><span>|</span><label class="collapse" for="c-41769482">[-]</label><label class="expand" for="c-41769482">[3 more]</label></div><br/><div class="children"><div class="content">If what I want is not an executable but a shared library, does this get me anything?<p>I currently have a use case that uses a server running an emscripten build (using SMODULARIZE and some exports, I suppose it’s not a true dylib)</div><br/><div id="41770272" class="c"><input type="checkbox" id="c-41770272" checked=""/><div class="controls bullet"><span class="by">Muromec</span><span>|</span><a href="#41769482">parent</a><span>|</span><a href="#41769442">next</a><span>|</span><label class="collapse" for="c-41770272">[-]</label><label class="expand" for="c-41770272">[2 more]</label></div><br/><div class="children"><div class="content">Importing a wasm module from a wasm module is (non)surprisingly impossible to do -- you have to have a linker, abi and all that.</div><br/><div id="41770552" class="c"><input type="checkbox" id="c-41770552" checked=""/><div class="controls bullet"><span class="by">okwhateverdude</span><span>|</span><a href="#41769482">root</a><span>|</span><a href="#41770272">parent</a><span>|</span><a href="#41769442">next</a><span>|</span><label class="collapse" for="c-41770552">[-]</label><label class="expand" for="c-41770552">[1 more]</label></div><br/><div class="children"><div class="content">It is possible provided some care. I was looking into this with WAForth which compiles  the wasm and loads it via a host function (ie. it is the hosts responsibility to make it available). I wanted to enable dynamic loading of words from disk which requires some book keeping and shuffling a bunch of bytes around during compilation to write out the bits necessary to have the host do that linking. It isn&#x27;t impossible to do, just tedious and in my case, having to write it in WAT is a pain.</div><br/></div></div></div></div></div></div><div id="41769442" class="c"><input type="checkbox" id="c-41769442" checked=""/><div class="controls bullet"><span class="by">CyberDildonics</span><span>|</span><a href="#41769482">prev</a><span>|</span><a href="#41768284">next</a><span>|</span><label class="collapse" for="c-41769442">[-]</label><label class="expand" for="c-41769442">[3 more]</label></div><br/><div class="children"><div class="content">100MB on every page refresh just to compile C is a pretty bold direction to go in.</div><br/><div id="41769480" class="c"><input type="checkbox" id="c-41769480" checked=""/><div class="controls bullet"><span class="by">jampekka</span><span>|</span><a href="#41769442">parent</a><span>|</span><a href="#41768284">next</a><span>|</span><label class="collapse" for="c-41769480">[-]</label><label class="expand" for="c-41769480">[2 more]</label></div><br/><div class="children"><div class="content">Except if&#x2F;when it&#x27;s cached.</div><br/><div id="41769817" class="c"><input type="checkbox" id="c-41769817" checked=""/><div class="controls bullet"><span class="by">adastra22</span><span>|</span><a href="#41769442">root</a><span>|</span><a href="#41769480">parent</a><span>|</span><a href="#41768284">next</a><span>|</span><label class="collapse" for="c-41769817">[-]</label><label class="expand" for="c-41769817">[1 more]</label></div><br/><div class="children"><div class="content">I don’t want my cache requirements ballooning by 100mb.</div><br/></div></div></div></div></div></div><div id="41768284" class="c"><input type="checkbox" id="c-41768284" checked=""/><div class="controls bullet"><span class="by">Retr0id</span><span>|</span><a href="#41769442">prev</a><span>|</span><a href="#41770416">next</a><span>|</span><label class="collapse" for="c-41768284">[-]</label><label class="expand" for="c-41768284">[5 more]</label></div><br/><div class="children"><div class="content">&gt; note: it requires a 100MB download<p>Is this how big a clang toolchain usually is?</div><br/><div id="41768742" class="c"><input type="checkbox" id="c-41768742" checked=""/><div class="controls bullet"><span class="by">syrusakbary</span><span>|</span><a href="#41768284">parent</a><span>|</span><a href="#41770416">next</a><span>|</span><label class="collapse" for="c-41768742">[-]</label><label class="expand" for="c-41768742">[4 more]</label></div><br/><div class="children"><div class="content">The Clang WASI SDK weights about 100Mb compressed. We optimized things a bit but still have a way to go (we are not yet compressing in the network). I believe we can serve everything in about 30Mb</div><br/><div id="41768901" class="c"><input type="checkbox" id="c-41768901" checked=""/><div class="controls bullet"><span class="by">01HNNWZ0MV43FF</span><span>|</span><a href="#41768284">root</a><span>|</span><a href="#41768742">parent</a><span>|</span><a href="#41770416">next</a><span>|</span><label class="collapse" for="c-41768901">[-]</label><label class="expand" for="c-41768901">[3 more]</label></div><br/><div class="children"><div class="content">MB, right? Mb is megabit<p>I only have to bring this up because network providers still insist on measuring bits</div><br/><div id="41769559" class="c"><input type="checkbox" id="c-41769559" checked=""/><div class="controls bullet"><span class="by">kevin_thibedeau</span><span>|</span><a href="#41768284">root</a><span>|</span><a href="#41768901">parent</a><span>|</span><a href="#41770416">next</a><span>|</span><label class="collapse" for="c-41769559">[-]</label><label class="expand" for="c-41769559">[2 more]</label></div><br/><div class="children"><div class="content">They insist on it because it is the proper way to measure data rates on serial bit streams where out-of-band encoding doesn&#x27;t divide up on octet boundaries.</div><br/><div id="41773072" class="c"><input type="checkbox" id="c-41773072" checked=""/><div class="controls bullet"><span class="by">msla</span><span>|</span><a href="#41768284">root</a><span>|</span><a href="#41769559">parent</a><span>|</span><a href="#41770416">next</a><span>|</span><label class="collapse" for="c-41773072">[-]</label><label class="expand" for="c-41773072">[1 more]</label></div><br/><div class="children"><div class="content">They insist on it because big number sell better.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="41770416" class="c"><input type="checkbox" id="c-41770416" checked=""/><div class="controls bullet"><span class="by">westurner</span><span>|</span><a href="#41768284">prev</a><span>|</span><a href="#41773266">next</a><span>|</span><label class="collapse" for="c-41770416">[-]</label><label class="expand" for="c-41770416">[1 more]</label></div><br/><div class="children"><div class="content">Cling (the interactive C++ interpreter) should also compile to WASM.<p>There&#x27;s a xeus-cling Jupyter kernel, which supports interactive C++ in notebooks: <a href="https:&#x2F;&#x2F;github.com&#x2F;jupyter-xeus&#x2F;xeus-cling">https:&#x2F;&#x2F;github.com&#x2F;jupyter-xeus&#x2F;xeus-cling</a><p>There&#x27;s not yet a JupyterLite (WASM) kernel for C or C++.</div><br/></div></div><div id="41773266" class="c"><input type="checkbox" id="c-41773266" checked=""/><div class="controls bullet"><span class="by">ttflee</span><span>|</span><a href="#41770416">prev</a><span>|</span><a href="#41770004">next</a><span>|</span><label class="collapse" for="c-41773266">[-]</label><label class="expand" for="c-41773266">[2 more]</label></div><br/><div class="children"><div class="content">Every few years, new progresses might remind me of this talk by Gary Bernhardt:<p><a href="https:&#x2F;&#x2F;www.destroyallsoftware.com&#x2F;talks&#x2F;the-birth-and-death-of-javascript" rel="nofollow">https:&#x2F;&#x2F;www.destroyallsoftware.com&#x2F;talks&#x2F;the-birth-and-death...</a></div><br/><div id="41774705" class="c"><input type="checkbox" id="c-41774705" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#41773266">parent</a><span>|</span><a href="#41770004">next</a><span>|</span><label class="collapse" for="c-41774705">[-]</label><label class="expand" for="c-41774705">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, mostly because WebAssembly is the new kid in bytecode town.</div><br/></div></div></div></div><div id="41770004" class="c"><input type="checkbox" id="c-41770004" checked=""/><div class="controls bullet"><span class="by">zh2408</span><span>|</span><a href="#41773266">prev</a><span>|</span><a href="#41769927">next</a><span>|</span><label class="collapse" for="c-41770004">[-]</label><label class="expand" for="c-41770004">[3 more]</label></div><br/><div class="children"><div class="content">What&#x27;s the use case?</div><br/><div id="41771684" class="c"><input type="checkbox" id="c-41771684" checked=""/><div class="controls bullet"><span class="by">baanist</span><span>|</span><a href="#41770004">parent</a><span>|</span><a href="#41774120">next</a><span>|</span><label class="collapse" for="c-41771684">[-]</label><label class="expand" for="c-41771684">[1 more]</label></div><br/><div class="children"><div class="content">Like most things in software the use cases are the limits of one&#x27;s imagination. The browser has always been a Turing complete development environment so this is just another demonstration.</div><br/></div></div><div id="41774120" class="c"><input type="checkbox" id="c-41774120" checked=""/><div class="controls bullet"><span class="by">dxroshan</span><span>|</span><a href="#41770004">parent</a><span>|</span><a href="#41771684">prev</a><span>|</span><a href="#41769927">next</a><span>|</span><label class="collapse" for="c-41774120">[-]</label><label class="expand" for="c-41774120">[1 more]</label></div><br/><div class="children"><div class="content">I was also asking exactly the same question.</div><br/></div></div></div></div><div id="41769927" class="c"><input type="checkbox" id="c-41769927" checked=""/><div class="controls bullet"><span class="by">bilekas</span><span>|</span><a href="#41770004">prev</a><span>|</span><label class="collapse" for="c-41769927">[-]</label><label class="expand" for="c-41769927">[1 more]</label></div><br/><div class="children"><div class="content">&quot;Yeah, yeah, but your scientists were so preoccupied with whether or not they could that they didn&#x27;t stop to think if they should.&quot; ....</div><br/></div></div></div></div></div></div></div></body></html>