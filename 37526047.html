<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1694854877741" as="style"/><link rel="stylesheet" href="styles.css?v=1694854877741"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://csvbase.com/blog/5">My favourite API is a zipfile on the European Central Bank&#x27;s website</a> <span class="domain">(<a href="https://csvbase.com">csvbase.com</a>)</span></div><div class="subtext"><span>qsantos</span> | <span>224 comments</span></div><br/><div><div id="37528076" class="c"><input type="checkbox" id="c-37528076" checked=""/><div class="controls bullet"><span class="by">stevoski</span><span>|</span><a href="#37526406">next</a><span>|</span><label class="collapse" for="c-37528076">[-]</label><label class="expand" for="c-37528076">[31 more]</label></div><br/><div class="children"><div class="content">Ah, I remember this specific file from my time at the ECB 15-ish years ago.<p>IIRC it was by far the most downloaded file on the ECB website. Tons of people, including many financial institutions, downloaded it daily, and used it to update their own systems.<p>IIRC #2 in the minutes immediately after the daily scheduled time for publishing this file, there was a massive traffic spike.<p>It was a conscious decision to make it a simple CSV file (once unzipped): it made it possible to serve the file reliably, fast, and with little resources needed.<p>The small team responsible at the time for the ECB’S public website was inordinately proud of the technical decisions made to serve this data in a single static file. And rightly so.</div><br/><div id="37530272" class="c"><input type="checkbox" id="c-37530272" checked=""/><div class="controls bullet"><span class="by">tharkun__</span><span>|</span><a href="#37528076">parent</a><span>|</span><a href="#37532331">next</a><span>|</span><label class="collapse" for="c-37530272">[-]</label><label class="expand" for="c-37530272">[5 more]</label></div><br/><div class="children"><div class="content">This is something that powers a lot of data interchange but lots of people don&#x27;t realize because they never work with older systems like that. It&#x27;s not shiny. No frameworks.<p>I used to work for a large, old company whose products you have all bought and buy (and which shall remain nameless) about 15 years ago. I worked on data interchange between the systems used for record keeping of said products and various other downstream or parallel systems (same purpose, separate system because left over from merger&#x2F;acquisition).<p>So basically bulk data import and export. The product was 15 years old at that point. Data interchange was via various fixed width or delimited (CSV but the C might be some other character or character sequence) files transferred to and from various SFTP servers.<p>It&#x27;s been a while but there were probably like 20 or 30 different such data sources or exports going in and out. Worked like a charm. I bet they&#x27;re still used without much change. The frontend was being rewritten at the time (old one was in Smalltalk).</div><br/><div id="37530609" class="c"><input type="checkbox" id="c-37530609" checked=""/><div class="controls bullet"><span class="by">keepamovin</span><span>|</span><a href="#37528076">root</a><span>|</span><a href="#37530272">parent</a><span>|</span><a href="#37532938">next</a><span>|</span><label class="collapse" for="c-37530609">[-]</label><label class="expand" for="c-37530609">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;m using this type of simple approach to build a SaaS right now. We need to spin up many VPS and provision them, and the fastest way to do that is with rsync and ssh.<p>But we didn&#x27;t stop there: this SaaS for our open source browser product is entirely built like this: behind the scenes it&#x27;s a collection of bash scripts that implement and execute the business operation of the SaaS.<p>So basically, it&#x27;s a command-line interface to the SaaS. Think of it this way, say I didn&#x27;t have a website, with login, and &quot;click a button to open a browser&quot;, but instead people would write me letters, send me cheques, or call me on the phone. Then I can serve their requests manually, at the command line.<p>The reason I made it like this was:<p>- clear separation between thin web front-end and actual business logic<p>- nice command-line interface (options, usage, help, clear error messages) to business logic for maintenance and support to jump on and fix things<p>- inheritance of operating system permissions and user process isolation<p>- highly testable implementation<p>Maybe this is dumb, but I really like it. To me it&#x27;s an architecture and approach that makes sense.<p>I&#x27;m sure this is not new, and I think a lot of good quality operations must be built via this way. I highly align with the author&#x27;s stance of the composition of a few simple command line tools to get the job done.<p>Perhaps we can call this &quot;unix driven development&quot;, or &quot;unix-philosophy backend engineering&quot;<p>browser product: <a href="https:&#x2F;&#x2F;github.com&#x2F;dosyago&#x2F;BrowserBoxPro">https:&#x2F;&#x2F;github.com&#x2F;dosyago&#x2F;BrowserBoxPro</a> (saas coming soonish)</div><br/><div id="37532546" class="c"><input type="checkbox" id="c-37532546" checked=""/><div class="controls bullet"><span class="by">fourstepper</span><span>|</span><a href="#37528076">root</a><span>|</span><a href="#37530609">parent</a><span>|</span><a href="#37532938">next</a><span>|</span><label class="collapse" for="c-37532546">[-]</label><label class="expand" for="c-37532546">[1 more]</label></div><br/><div class="children"><div class="content">I feel like you went way overboard with this one.. I think the first paragraph and an example of what you&#x27;re doing that&#x27;s similar to OP would&#x27;ve been plenty</div><br/></div></div></div></div><div id="37532938" class="c"><input type="checkbox" id="c-37532938" checked=""/><div class="controls bullet"><span class="by">PH95VuimJjqBqy</span><span>|</span><a href="#37528076">root</a><span>|</span><a href="#37530272">parent</a><span>|</span><a href="#37530609">prev</a><span>|</span><a href="#37532331">next</a><span>|</span><label class="collapse" for="c-37532938">[-]</label><label class="expand" for="c-37532938">[2 more]</label></div><br/><div class="children"><div class="content">A lot of developers talk smack about CSV files (or tab delimited) but they really are the workhorse of our industry.  They&#x27;re simple, textual, compress really well, and as long as everyone on both sides has an agreement about the format, they&#x27;re almost a standard.<p>sure, a lot of the criticisms of CSV are true, but given the above constraints it&#x27;s really hard to beat them.</div><br/><div id="37533109" class="c"><input type="checkbox" id="c-37533109" checked=""/><div class="controls bullet"><span class="by">sambazi</span><span>|</span><a href="#37528076">root</a><span>|</span><a href="#37532938">parent</a><span>|</span><a href="#37532331">next</a><span>|</span><label class="collapse" for="c-37533109">[-]</label><label class="expand" for="c-37533109">[1 more]</label></div><br/><div class="children"><div class="content">&quot;everything is a file&quot; still going strong</div><br/></div></div></div></div></div></div><div id="37532331" class="c"><input type="checkbox" id="c-37532331" checked=""/><div class="controls bullet"><span class="by">leokennis</span><span>|</span><a href="#37528076">parent</a><span>|</span><a href="#37530272">prev</a><span>|</span><a href="#37528281">next</a><span>|</span><label class="collapse" for="c-37532331">[-]</label><label class="expand" for="c-37532331">[3 more]</label></div><br/><div class="children"><div class="content">Wow. I’m just thinking of the hoops I’d have to go through to host changing data as a static CSV&#x2F;ZIP at my employer.<p>Architects would complain ZIP isn’t a format conform to their specs for this purpose. Compliance would complain there needs to be a check that no private informatie leaked. Risk that I should prevent bad actors from downloading the file. Web people that I need an approved change to add stuff to the site.</div><br/><div id="37532915" class="c"><input type="checkbox" id="c-37532915" checked=""/><div class="controls bullet"><span class="by">TeMPOraL</span><span>|</span><a href="#37528076">root</a><span>|</span><a href="#37532331">parent</a><span>|</span><a href="#37532488">next</a><span>|</span><label class="collapse" for="c-37532915">[-]</label><label class="expand" for="c-37532915">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, but modern, approved practices don&#x27;t really address any of that - they just hide it under a pile of extra complexity that&#x27;s too big for most devs and managers&#x27; attention span, effectively disappearing it.</div><br/></div></div></div></div><div id="37528281" class="c"><input type="checkbox" id="c-37528281" checked=""/><div class="controls bullet"><span class="by">andylynch</span><span>|</span><a href="#37528076">parent</a><span>|</span><a href="#37532331">prev</a><span>|</span><a href="#37529922">next</a><span>|</span><label class="collapse" for="c-37528281">[-]</label><label class="expand" for="c-37528281">[1 more]</label></div><br/><div class="children"><div class="content">I know this file too, I was one of them. 
Of all the data sources we used, it was the best to work with.</div><br/></div></div><div id="37529922" class="c"><input type="checkbox" id="c-37529922" checked=""/><div class="controls bullet"><span class="by">mstade</span><span>|</span><a href="#37528076">parent</a><span>|</span><a href="#37528281">prev</a><span>|</span><a href="#37529241">next</a><span>|</span><label class="collapse" for="c-37529922">[-]</label><label class="expand" for="c-37529922">[18 more]</label></div><br/><div class="children"><div class="content">Do you know why they decided to host a zip file instead of just hosting the CSV and relying on HTTP compression?</div><br/><div id="37529987" class="c"><input type="checkbox" id="c-37529987" checked=""/><div class="controls bullet"><span class="by">theamk</span><span>|</span><a href="#37528076">root</a><span>|</span><a href="#37529922">parent</a><span>|</span><a href="#37530816">next</a><span>|</span><label class="collapse" for="c-37529987">[-]</label><label class="expand" for="c-37529987">[11 more]</label></div><br/><div class="children"><div class="content">HTTP compression is optional, so they either have to compress on the fly (wasting cpu) or provide multiple versions (complicating setup and deployment) or make some HTTP clients not work.<p>simgle zip file is really the easiest solution for cases when the file must absolutely be compressed</div><br/><div id="37530221" class="c"><input type="checkbox" id="c-37530221" checked=""/><div class="controls bullet"><span class="by">sethhochberg</span><span>|</span><a href="#37528076">root</a><span>|</span><a href="#37529987">parent</a><span>|</span><a href="#37530588">next</a><span>|</span><label class="collapse" for="c-37530221">[-]</label><label class="expand" for="c-37530221">[7 more]</label></div><br/><div class="children"><div class="content">Many webservers allow you to serve a compressed file (stored on disk) and _decompress_ when a client specifically can&#x27;t support the compressed encoding. Since most clients should support compression, this means you only use the CPU for the rarer case where the uncompressed data is required.<p>Eg, <a href="http:&#x2F;&#x2F;nginx.org&#x2F;en&#x2F;docs&#x2F;http&#x2F;ngx_http_gunzip_module.html" rel="nofollow noreferrer">http:&#x2F;&#x2F;nginx.org&#x2F;en&#x2F;docs&#x2F;http&#x2F;ngx_http_gunzip_module.html</a></div><br/><div id="37530822" class="c"><input type="checkbox" id="c-37530822" checked=""/><div class="controls bullet"><span class="by">nikau</span><span>|</span><a href="#37528076">root</a><span>|</span><a href="#37530221">parent</a><span>|</span><a href="#37530588">next</a><span>|</span><label class="collapse" for="c-37530822">[-]</label><label class="expand" for="c-37530822">[6 more]</label></div><br/><div class="children"><div class="content">Or you can just zip it explicitly and remove complexity and future issues it they have to move to another web server platform.</div><br/><div id="37530883" class="c"><input type="checkbox" id="c-37530883" checked=""/><div class="controls bullet"><span class="by">MengerSponge</span><span>|</span><a href="#37528076">root</a><span>|</span><a href="#37530822">parent</a><span>|</span><a href="#37530588">next</a><span>|</span><label class="collapse" for="c-37530883">[-]</label><label class="expand" for="c-37530883">[5 more]</label></div><br/><div class="children"><div class="content">But what if an analyst needs to access this data and run their regressions on a potato? Surely that use case is worth adding a few libraries to handle.</div><br/><div id="37533162" class="c"><input type="checkbox" id="c-37533162" checked=""/><div class="controls bullet"><span class="by">nikau</span><span>|</span><a href="#37528076">root</a><span>|</span><a href="#37530883">parent</a><span>|</span><a href="#37531043">next</a><span>|</span><label class="collapse" for="c-37533162">[-]</label><label class="expand" for="c-37533162">[1 more]</label></div><br/><div class="children"><div class="content">hmm good point, can you draft up an architecture plan using multiple microservices and redundancy via a kubernetes cluster and have it on my desk by Monday please.</div><br/></div></div><div id="37531043" class="c"><input type="checkbox" id="c-37531043" checked=""/><div class="controls bullet"><span class="by">innocenat</span><span>|</span><a href="#37528076">root</a><span>|</span><a href="#37530883">parent</a><span>|</span><a href="#37533162">prev</a><span>|</span><a href="#37531489">next</a><span>|</span><label class="collapse" for="c-37531043">[-]</label><label class="expand" for="c-37531043">[1 more]</label></div><br/><div class="children"><div class="content">I would think running regression should be more demanding on the potato then decompressing ZIP file.</div><br/></div></div><div id="37531489" class="c"><input type="checkbox" id="c-37531489" checked=""/><div class="controls bullet"><span class="by">CJefferson</span><span>|</span><a href="#37528076">root</a><span>|</span><a href="#37530883">parent</a><span>|</span><a href="#37531043">prev</a><span>|</span><a href="#37530588">next</a><span>|</span><label class="collapse" for="c-37531489">[-]</label><label class="expand" for="c-37531489">[2 more]</label></div><br/><div class="children"><div class="content">What machine could anyone be running an analysis on where unzip is a limiting factor?</div><br/><div id="37531872" class="c"><input type="checkbox" id="c-37531872" checked=""/><div class="controls bullet"><span class="by">londonReed</span><span>|</span><a href="#37528076">root</a><span>|</span><a href="#37531489">parent</a><span>|</span><a href="#37530588">next</a><span>|</span><label class="collapse" for="c-37531872">[-]</label><label class="expand" for="c-37531872">[1 more]</label></div><br/><div class="children"><div class="content">Whoosh</div><br/></div></div></div></div></div></div></div></div></div></div><div id="37530588" class="c"><input type="checkbox" id="c-37530588" checked=""/><div class="controls bullet"><span class="by">avandelay1</span><span>|</span><a href="#37528076">root</a><span>|</span><a href="#37529987">parent</a><span>|</span><a href="#37530221">prev</a><span>|</span><a href="#37530816">next</a><span>|</span><label class="collapse" for="c-37530588">[-]</label><label class="expand" for="c-37530588">[3 more]</label></div><br/><div class="children"><div class="content">Nginx or Apache would both cache these versions transparently. I think they just wanted to distribute as a zip</div><br/><div id="37530792" class="c"><input type="checkbox" id="c-37530792" checked=""/><div class="controls bullet"><span class="by">anakaine</span><span>|</span><a href="#37528076">root</a><span>|</span><a href="#37530588">parent</a><span>|</span><a href="#37530816">next</a><span>|</span><label class="collapse" for="c-37530792">[-]</label><label class="expand" for="c-37530792">[2 more]</label></div><br/><div class="children"><div class="content">The business logic here is &gt;15 years old. Http compression was only in early stages then, and you can guarantee that many client side scripts and libraries would jot have supported it. Zip was well known. Compress and place.<p>If I&#x27;m not missing the point here, this was, and still is, about offering the simplest, most reliable solution over a long period. This is a near perfect example of how to do exactly that. No changing formats, no moving requirements, no big swings in frameworks, apis, or even standards. And most importantly, no breaking your customers business workflows.</div><br/><div id="37531135" class="c"><input type="checkbox" id="c-37531135" checked=""/><div class="controls bullet"><span class="by">skylanh</span><span>|</span><a href="#37528076">root</a><span>|</span><a href="#37530792">parent</a><span>|</span><a href="#37530816">next</a><span>|</span><label class="collapse" for="c-37531135">[-]</label><label class="expand" for="c-37531135">[1 more]</label></div><br/><div class="children"><div class="content">No edge case dependencies on the WWW server&#x27;s configuration, and no sudden &quot;why did we just saturate our external connection?&quot;<p>No emergency change requests from the outage team that has to be impacted by other areas and fit into the infrastructure&#x27;s teams maintenance windows and their capacity to address that.<p>No rebalancing of workloads because Jane had to implement (or schedule the task and monitor it) that change, Joe had to check and verify that the external availability tests passed, and Annick had to sign off on the change complete, and now everyone isn&#x27;t available for another OT window for the week.<p>Or something.</div><br/></div></div></div></div></div></div></div></div><div id="37530816" class="c"><input type="checkbox" id="c-37530816" checked=""/><div class="controls bullet"><span class="by">firecall</span><span>|</span><a href="#37528076">root</a><span>|</span><a href="#37529922">parent</a><span>|</span><a href="#37529987">prev</a><span>|</span><a href="#37530030">next</a><span>|</span><label class="collapse" for="c-37530816">[-]</label><label class="expand" for="c-37530816">[2 more]</label></div><br/><div class="children"><div class="content">Maybe in part because it encourages you to work with a local copy, rather than just hitting the hosted .csv repeatedly?<p>Just guessing. I have no idea :-)</div><br/><div id="37532033" class="c"><input type="checkbox" id="c-37532033" checked=""/><div class="controls bullet"><span class="by">mmis1000</span><span>|</span><a href="#37528076">root</a><span>|</span><a href="#37530816">parent</a><span>|</span><a href="#37530030">next</a><span>|</span><label class="collapse" for="c-37532033">[-]</label><label class="expand" for="c-37532033">[1 more]</label></div><br/><div class="children"><div class="content">It it exactly what most api optimization does. For example, batch queries merge several api calls into one to reduce api call counts. And it this case, it is perfectly optimized. You have literally one zip file, and there is no more.</div><br/></div></div></div></div><div id="37530030" class="c"><input type="checkbox" id="c-37530030" checked=""/><div class="controls bullet"><span class="by">Nux</span><span>|</span><a href="#37528076">root</a><span>|</span><a href="#37529922">parent</a><span>|</span><a href="#37530816">prev</a><span>|</span><a href="#37530473">next</a><span>|</span><label class="collapse" for="c-37530030">[-]</label><label class="expand" for="c-37530030">[1 more]</label></div><br/><div class="children"><div class="content">I could see 2 reasons:<p>1 - save on cpu usage, compress once, serve many<p>2 - with zip you can have some rudimentary data integrity checks (unzip -t)</div><br/></div></div><div id="37530473" class="c"><input type="checkbox" id="c-37530473" checked=""/><div class="controls bullet"><span class="by">rsaxvc</span><span>|</span><a href="#37528076">root</a><span>|</span><a href="#37529922">parent</a><span>|</span><a href="#37530030">prev</a><span>|</span><a href="#37530917">next</a><span>|</span><label class="collapse" for="c-37530473">[-]</label><label class="expand" for="c-37530473">[1 more]</label></div><br/><div class="children"><div class="content">The CSV was available at <a href="https:&#x2F;&#x2F;www.ecb.europa.eu&#x2F;stats&#x2F;eurofxref&#x2F;eurofxref-hist.csv" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.ecb.europa.eu&#x2F;stats&#x2F;eurofxref&#x2F;eurofxref-hist.csv</a> but isn&#x27;t up to date.</div><br/></div></div><div id="37530249" class="c"><input type="checkbox" id="c-37530249" checked=""/><div class="controls bullet"><span class="by">pstuart</span><span>|</span><a href="#37528076">root</a><span>|</span><a href="#37529922">parent</a><span>|</span><a href="#37530917">prev</a><span>|</span><a href="#37529241">next</a><span>|</span><label class="collapse" for="c-37530249">[-]</label><label class="expand" for="c-37530249">[1 more]</label></div><br/><div class="children"><div class="content">Another option would be save it as a gzip file and serve it raw with implied gzip compression.<p>Nginx does this: <a href="https:&#x2F;&#x2F;docs.nginx.com&#x2F;nginx&#x2F;admin-guide&#x2F;web-server&#x2F;compression&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;docs.nginx.com&#x2F;nginx&#x2F;admin-guide&#x2F;web-server&#x2F;compress...</a><p>Last entry: the directive is `gzip_static on;`</div><br/></div></div></div></div><div id="37529241" class="c"><input type="checkbox" id="c-37529241" checked=""/><div class="controls bullet"><span class="by">nlehuen</span><span>|</span><a href="#37528076">parent</a><span>|</span><a href="#37529922">prev</a><span>|</span><a href="#37526406">next</a><span>|</span><label class="collapse" for="c-37529241">[-]</label><label class="expand" for="c-37529241">[3 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a bit scary to imagine the consequences if this file was somehow corrupted (wrong column headers for instance)!</div><br/><div id="37529991" class="c"><input type="checkbox" id="c-37529991" checked=""/><div class="controls bullet"><span class="by">thghtihadanacct</span><span>|</span><a href="#37528076">root</a><span>|</span><a href="#37529241">parent</a><span>|</span><a href="#37526406">next</a><span>|</span><label class="collapse" for="c-37529991">[-]</label><label class="expand" for="c-37529991">[2 more]</label></div><br/><div class="children"><div class="content">Just wait until you inherit a service that, sans documentation, pulls in a web resource file that suddenly is no longer available :(</div><br/><div id="37532867" class="c"><input type="checkbox" id="c-37532867" checked=""/><div class="controls bullet"><span class="by">dizhn</span><span>|</span><a href="#37528076">root</a><span>|</span><a href="#37529991">parent</a><span>|</span><a href="#37526406">next</a><span>|</span><label class="collapse" for="c-37532867">[-]</label><label class="expand" for="c-37532867">[1 more]</label></div><br/><div class="children"><div class="content">scale8 recently archived their GitHub repo without explanation and right after that the url for a GDPR opt-in list they were using changed. The product is now dead because the code doesn&#x27;t handle the situation where that file might not be available.<p>(Scale8 is a web analytics and tag management software like google analytics)</div><br/></div></div></div></div></div></div></div></div><div id="37526406" class="c"><input type="checkbox" id="c-37526406" checked=""/><div class="controls bullet"><span class="by">NelsonMinar</span><span>|</span><a href="#37528076">prev</a><span>|</span><a href="#37532379">next</a><span>|</span><label class="collapse" for="c-37526406">[-]</label><label class="expand" for="c-37526406">[86 more]</label></div><br/><div class="children"><div class="content">Simple file downloads and CSV files are fantastic. I wish more folks would publish data in simple formats like this. Every time I have to fill a &quot;shopping cart&quot; for a US government data download I die a little.<p>There&#x27;s a bunch of wrapper tools to make this particular pipeline easier. Also something like Datasette is great if you want a web view and some fancier features.</div><br/><div id="37528635" class="c"><input type="checkbox" id="c-37528635" checked=""/><div class="controls bullet"><span class="by">wefarrell</span><span>|</span><a href="#37526406">parent</a><span>|</span><a href="#37527561">next</a><span>|</span><label class="collapse" for="c-37528635">[-]</label><label class="expand" for="c-37528635">[13 more]</label></div><br/><div class="children"><div class="content">One nice thing about CSV files being zipped and served via the web is they can be streamed directly into the database incredibly fast without having to persist them anywhere (aside from the db).<p>You can load the zip file as a stream, read the CSV line by line, transform it, and then load it to the db using COPY FROM stdin (assuming Postgres).</div><br/><div id="37529326" class="c"><input type="checkbox" id="c-37529326" checked=""/><div class="controls bullet"><span class="by">thibaut_barrere</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528635">parent</a><span>|</span><a href="#37529531">next</a><span>|</span><label class="collapse" for="c-37529326">[-]</label><label class="expand" for="c-37529326">[1 more]</label></div><br/><div class="children"><div class="content">Definitely, it is much easier to stream CSV than say JSON or XML (even if JSONL&#x2F;Sax parsers exist etc).</div><br/></div></div><div id="37529531" class="c"><input type="checkbox" id="c-37529531" checked=""/><div class="controls bullet"><span class="by">eastbound</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528635">parent</a><span>|</span><a href="#37529326">prev</a><span>|</span><a href="#37528663">next</a><span>|</span><label class="collapse" for="c-37529531">[-]</label><label class="expand" for="c-37529531">[1 more]</label></div><br/><div class="children"><div class="content">I you feel risky, try a Foreign Data Wrapper ;)</div><br/></div></div><div id="37528663" class="c"><input type="checkbox" id="c-37528663" checked=""/><div class="controls bullet"><span class="by">heavenlyblue</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528635">parent</a><span>|</span><a href="#37529531">prev</a><span>|</span><a href="#37527561">next</a><span>|</span><label class="collapse" for="c-37528663">[-]</label><label class="expand" for="c-37528663">[10 more]</label></div><br/><div class="children"><div class="content">That doesn&#x27;t sound like an amazingly safe idea</div><br/><div id="37528683" class="c"><input type="checkbox" id="c-37528683" checked=""/><div class="controls bullet"><span class="by">dambi0</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528663">parent</a><span>|</span><a href="#37529256">next</a><span>|</span><label class="collapse" for="c-37528683">[-]</label><label class="expand" for="c-37528683">[5 more]</label></div><br/><div class="children"><div class="content">What specific risks do you foresee with this approach?</div><br/><div id="37528787" class="c"><input type="checkbox" id="c-37528787" checked=""/><div class="controls bullet"><span class="by">diroussel</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528683">parent</a><span>|</span><a href="#37532332">next</a><span>|</span><label class="collapse" for="c-37528787">[-]</label><label class="expand" for="c-37528787">[2 more]</label></div><br/><div class="children"><div class="content">Seem totally fine to me. As long as you can rollback if the download is truncated or the crc checksum doesn’t match.</div><br/><div id="37531974" class="c"><input type="checkbox" id="c-37531974" checked=""/><div class="controls bullet"><span class="by">chii</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528787">parent</a><span>|</span><a href="#37532332">next</a><span>|</span><label class="collapse" for="c-37531974">[-]</label><label class="expand" for="c-37531974">[1 more]</label></div><br/><div class="children"><div class="content">&gt; or the crc checksum doesn’t match.<p>which wouldn&#x27;t exist if the api is simply just a single CSV file?<p>at least with a zip, the CRC exists (an incomplete zip file is detectable, an incomplete, but syntactically correct CSV file is not)</div><br/></div></div></div></div><div id="37532332" class="c"><input type="checkbox" id="c-37532332" checked=""/><div class="controls bullet"><span class="by">NL807</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528683">parent</a><span>|</span><a href="#37528787">prev</a><span>|</span><a href="#37529256">next</a><span>|</span><label class="collapse" for="c-37532332">[-]</label><label class="expand" for="c-37532332">[2 more]</label></div><br/><div class="children"><div class="content">DROP DATABASE blah;</div><br/><div id="37532647" class="c"><input type="checkbox" id="c-37532647" checked=""/><div class="controls bullet"><span class="by">aidos</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37532332">parent</a><span>|</span><a href="#37529256">next</a><span>|</span><label class="collapse" for="c-37532647">[-]</label><label class="expand" for="c-37532647">[1 more]</label></div><br/><div class="children"><div class="content">That’s not how COPY FROM works in postgres. You give it a csv and a table matching the structure and it hammers the data into the table faster than anything else can.</div><br/></div></div></div></div></div></div><div id="37529256" class="c"><input type="checkbox" id="c-37529256" checked=""/><div class="controls bullet"><span class="by">berkes</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528663">parent</a><span>|</span><a href="#37528683">prev</a><span>|</span><a href="#37527561">next</a><span>|</span><label class="collapse" for="c-37529256">[-]</label><label class="expand" for="c-37529256">[4 more]</label></div><br/><div class="children"><div class="content">It isn&#x27;t. But that&#x27;s easily mitigated with temp tables, ephemeral database and COPY etc.<p>Upstream can easily f-up and (accidentally) delete production data if you do this on a live db. Which is why PostgreSQL and nearly all other DBS have a miriad of tools to solve this by not doing it directly on a production database</div><br/><div id="37530904" class="c"><input type="checkbox" id="c-37530904" checked=""/><div class="controls bullet"><span class="by">wefarrell</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37529256">parent</a><span>|</span><a href="#37527561">next</a><span>|</span><label class="collapse" for="c-37530904">[-]</label><label class="expand" for="c-37530904">[3 more]</label></div><br/><div class="children"><div class="content">Maybe I&#x27;m missing something but I don&#x27;t see how it&#x27;s possible for a COPY statement alone to remove existing data.</div><br/><div id="37531545" class="c"><input type="checkbox" id="c-37531545" checked=""/><div class="controls bullet"><span class="by">LgWoodenBadger</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37530904">parent</a><span>|</span><a href="#37527561">next</a><span>|</span><label class="collapse" for="c-37531545">[-]</label><label class="expand" for="c-37531545">[2 more]</label></div><br/><div class="children"><div class="content">If in the regular scenario you load 10000 rows of new data and delete the old then it’s fine.<p>What if someone screws up the zip and instead of 10000 today, it’s only 10?</div><br/><div id="37532662" class="c"><input type="checkbox" id="c-37532662" checked=""/><div class="controls bullet"><span class="by">aidos</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37531545">parent</a><span>|</span><a href="#37527561">next</a><span>|</span><label class="collapse" for="c-37532662">[-]</label><label class="expand" for="c-37532662">[1 more]</label></div><br/><div class="children"><div class="content">I had this last week, but instead it was a 3rd party api and their service started returning null instead of true for the has_more property beyond the second page of results.<p>In either the solution is probably to check rough counts and error if not reasonable.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="37527561" class="c"><input type="checkbox" id="c-37527561" checked=""/><div class="controls bullet"><span class="by">username_my1</span><span>|</span><a href="#37526406">parent</a><span>|</span><a href="#37528635">prev</a><span>|</span><a href="#37526527">next</a><span>|</span><label class="collapse" for="c-37527561">[-]</label><label class="expand" for="c-37527561">[18 more]</label></div><br/><div class="children"><div class="content">it blows my mind that you can use sqlite with csv as input and then query it, it sounds so logical and useful yet I never came by it.<p>we have lots of reporting in CSV, can&#x27;t wait to start using it to run queries quickly</div><br/><div id="37528005" class="c"><input type="checkbox" id="c-37528005" checked=""/><div class="controls bullet"><span class="by">shortrounddev2</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37527561">parent</a><span>|</span><a href="#37527783">next</a><span>|</span><label class="collapse" for="c-37528005">[-]</label><label class="expand" for="c-37528005">[8 more]</label></div><br/><div class="children"><div class="content">You should checkout powershell; it supports converting CSV into in-memory structured data and then you can run regular powershell queries on that data:<p><pre><code>    $&gt; csvData = @&quot;
       Name,Department,Salary
       John Doe,IT,60000
       Jane Smith,Finance,75000
       Alice Johnson,HR,65000
       Bob Anderson,IT,71000
       &quot;@;
    
    $&gt; csvData
         | ConvertFrom-Csv
         | Select Name, Salary
         | Sort Salary -Descending
    
       Name          Salary
       ----          ------
       Jane Smith    75000
       Bob Anderson  71000
       Alice Johnson 65000
       John Doe      60000
</code></pre>
You can also then convert the results back into CSV by piping into ConvertTo-Csv<p><pre><code>    $&gt; csvData
         | ConvertFrom-Csv
         | Select Name, Salary
         | Sort Salary -Descending
         | ConvertTo-Csv
         
       &quot;Name&quot;,&quot;Salary&quot;
       &quot;Jane Smith&quot;,&quot;75000&quot;
       &quot;Bob Anderson&quot;,&quot;71000&quot;
       &quot;Alice Johnson&quot;,&quot;65000&quot;
       &quot;John Doe&quot;,&quot;60000&quot;</code></pre></div><br/><div id="37528202" class="c"><input type="checkbox" id="c-37528202" checked=""/><div class="controls bullet"><span class="by">llimllib</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528005">parent</a><span>|</span><a href="#37529083">next</a><span>|</span><label class="collapse" for="c-37528202">[-]</label><label class="expand" for="c-37528202">[5 more]</label></div><br/><div class="children"><div class="content">nushell does too:<p><pre><code>    &#x2F;tmp&#x2F;&gt; &quot;Name,Department,Salary
    ::: John Doe,IT,60000
    ::: Jane Smith,Finance,75000
    ::: Alice Johnson,HR,65000
    ::: Bob Anderson,IT,71000&quot; |
    :::     from csv | 
    :::     select Name Salary | 
    :::     sort-by -r Salary
    ╭───┬───────────────┬────────╮
    │ # │     Name      │ Salary │
    ├───┼───────────────┼────────┤
    │ 0 │ Jane Smith    │  75000 │
    │ 1 │ Bob Anderson  │  71000 │
    │ 2 │ Alice Johnson │  65000 │
    │ 3 │ John Doe      │  60000 │
    ╰───┴───────────────┴────────╯</code></pre></div><br/><div id="37529194" class="c"><input type="checkbox" id="c-37529194" checked=""/><div class="controls bullet"><span class="by">marzell</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528202">parent</a><span>|</span><a href="#37528393">next</a><span>|</span><label class="collapse" for="c-37529194">[-]</label><label class="expand" for="c-37529194">[3 more]</label></div><br/><div class="children"><div class="content">for something a bit more robust, check out DuckDB. It&#x27;s a library you can embed, use it to run SQL on local files as well as connect to databases, do joins, analytics, etc.</div><br/><div id="37529374" class="c"><input type="checkbox" id="c-37529374" checked=""/><div class="controls bullet"><span class="by">scumola</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37529194">parent</a><span>|</span><a href="#37528393">next</a><span>|</span><label class="collapse" for="c-37529374">[-]</label><label class="expand" for="c-37529374">[2 more]</label></div><br/><div class="children"><div class="content">Agreed.  The article mentioned duckdb and I&#x27;m her to thumbs-up the use of DuckDB wholeheartedly.  If you like the world of public CSV files as data sources that you can query or cross-query, duckdb is the tool for you.  Just follow the demo on the duckdb website and you&#x27;ll be wow&#x27;d for sure.</div><br/><div id="37530812" class="c"><input type="checkbox" id="c-37530812" checked=""/><div class="controls bullet"><span class="by">llimllib</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37529374">parent</a><span>|</span><a href="#37528393">next</a><span>|</span><label class="collapse" for="c-37530812">[-]</label><label class="expand" for="c-37530812">[1 more]</label></div><br/><div class="children"><div class="content">I use both, and I have found it helpful to have nushell around when munging csv and parquet files, even when working with duckdb - I find it quicker to ask for the first few rows of a thing or do simple stuff with it, then deeper analysis with duckdb.<p>They&#x27;re a powerful pairing</div><br/></div></div></div></div></div></div><div id="37528393" class="c"><input type="checkbox" id="c-37528393" checked=""/><div class="controls bullet"><span class="by">shortrounddev2</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528202">parent</a><span>|</span><a href="#37529194">prev</a><span>|</span><a href="#37529083">next</a><span>|</span><label class="collapse" for="c-37528393">[-]</label><label class="expand" for="c-37528393">[1 more]</label></div><br/><div class="children"><div class="content">Crazy how similar the commands are.</div><br/></div></div></div></div><div id="37529083" class="c"><input type="checkbox" id="c-37529083" checked=""/><div class="controls bullet"><span class="by">rzmk</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528005">parent</a><span>|</span><a href="#37528202">prev</a><span>|</span><a href="#37531199">next</a><span>|</span><label class="collapse" for="c-37529083">[-]</label><label class="expand" for="c-37529083">[1 more]</label></div><br/><div class="children"><div class="content">qsv (<a href="https:&#x2F;&#x2F;github.com&#x2F;jqnatividad&#x2F;qsv">https:&#x2F;&#x2F;github.com&#x2F;jqnatividad&#x2F;qsv</a>) also has a sqlp command which lets you run Polars SQL queries on CSV(s).<p>Here I&#x27;ll:<p><pre><code>  - Send the csv data from stdin (using echo and referred to in the command by -)
  - Refer to the data in the query by stdin. You may also use the _t_N syntax (first table is _t_1, then _t_2, etc.), or the file name itself before the .csv extension if we were using files.
  - Pipe the output to the table command for formatting.
  - Also, the shape of the result is printed to stderr (the (4, 2) below).

  $ echo &#x27;Name,Department,Salary
    John Doe,IT,60000
    Jane Smith,Finance,75000
    Alice Johnson,HR,65000
    Bob Anderson,IT,71000&#x27; |
    qsv sqlp - &#x27;SELECT Name, Salary FROM stdin ORDER BY Salary DESC&#x27; |
    qsv table
    
    (4, 2)
    Name           Salary
    Jane Smith     75000
    Bob Anderson   71000
    Alice Johnson  65000
    John Doe       60000</code></pre></div><br/></div></div><div id="37531199" class="c"><input type="checkbox" id="c-37531199" checked=""/><div class="controls bullet"><span class="by">smooc</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528005">parent</a><span>|</span><a href="#37529083">prev</a><span>|</span><a href="#37527783">next</a><span>|</span><label class="collapse" for="c-37531199">[-]</label><label class="expand" for="c-37531199">[1 more]</label></div><br/><div class="children"><div class="content">You do realize that this happened also on the article? I.e. In memory and autoinference</div><br/></div></div></div></div><div id="37527783" class="c"><input type="checkbox" id="c-37527783" checked=""/><div class="controls bullet"><span class="by">WorldMaker</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37527561">parent</a><span>|</span><a href="#37528005">prev</a><span>|</span><a href="#37528145">next</a><span>|</span><label class="collapse" for="c-37527783">[-]</label><label class="expand" for="c-37527783">[1 more]</label></div><br/><div class="children"><div class="content">You might find a lot of interesting tools in the Datasette ecosystem. Data dashboarding for SQLite with all sorts of import and export and visualization plugins.<p><a href="https:&#x2F;&#x2F;datasette.io&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;datasette.io&#x2F;</a></div><br/></div></div><div id="37528145" class="c"><input type="checkbox" id="c-37528145" checked=""/><div class="controls bullet"><span class="by">whartung</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37527561">parent</a><span>|</span><a href="#37527783">prev</a><span>|</span><a href="#37528029">next</a><span>|</span><label class="collapse" for="c-37528145">[-]</label><label class="expand" for="c-37528145">[2 more]</label></div><br/><div class="children"><div class="content">What’s really interesting about it is that Awk is now, finally, getting support for CSV. But I bet a large amount of Awk+CSV use cases can be met with SQLite and SQL+CSV.</div><br/><div id="37528580" class="c"><input type="checkbox" id="c-37528580" checked=""/><div class="controls bullet"><span class="by">nuc1e0n</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528145">parent</a><span>|</span><a href="#37528029">next</a><span>|</span><label class="collapse" for="c-37528580">[-]</label><label class="expand" for="c-37528580">[1 more]</label></div><br/><div class="children"><div class="content">AWK&#x27;s new CSV and UTF-8 support is great, but when querying data I think in terms of SQL.</div><br/></div></div></div></div><div id="37528029" class="c"><input type="checkbox" id="c-37528029" checked=""/><div class="controls bullet"><span class="by">fiddlerwoaroof</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37527561">parent</a><span>|</span><a href="#37528145">prev</a><span>|</span><a href="#37527787">next</a><span>|</span><label class="collapse" for="c-37528029">[-]</label><label class="expand" for="c-37528029">[1 more]</label></div><br/><div class="children"><div class="content">The clickhouse-local tool is also really great for querying a bunch of systems, and it has connectors and converters for a whole bunch of other systems and formats.</div><br/></div></div><div id="37527787" class="c"><input type="checkbox" id="c-37527787" checked=""/><div class="controls bullet"><span class="by">j0hnyl</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37527561">parent</a><span>|</span><a href="#37528029">prev</a><span>|</span><a href="#37531291">next</a><span>|</span><label class="collapse" for="c-37527787">[-]</label><label class="expand" for="c-37527787">[1 more]</label></div><br/><div class="children"><div class="content">Have you used duckdb? It&#x27;s great for that.</div><br/></div></div><div id="37531291" class="c"><input type="checkbox" id="c-37531291" checked=""/><div class="controls bullet"><span class="by">ISL</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37527561">parent</a><span>|</span><a href="#37527787">prev</a><span>|</span><a href="#37529768">next</a><span>|</span><label class="collapse" for="c-37531291">[-]</label><label class="expand" for="c-37531291">[1 more]</label></div><br/><div class="children"><div class="content">There&#x27;s a chance this HN post is going to more than halve my awk-usage....</div><br/></div></div><div id="37529768" class="c"><input type="checkbox" id="c-37529768" checked=""/><div class="controls bullet"><span class="by">wiredfool</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37527561">parent</a><span>|</span><a href="#37531291">prev</a><span>|</span><a href="#37529346">next</a><span>|</span><label class="collapse" for="c-37529768">[-]</label><label class="expand" for="c-37529768">[1 more]</label></div><br/><div class="children"><div class="content">Look at duckdb. Queries against csv, parquet, Jason, locally or via http. It’s like SQLite, but faster and better.</div><br/></div></div><div id="37529346" class="c"><input type="checkbox" id="c-37529346" checked=""/><div class="controls bullet"><span class="by">dima55</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37527561">parent</a><span>|</span><a href="#37529768">prev</a><span>|</span><a href="#37530053">next</a><span>|</span><label class="collapse" for="c-37529346">[-]</label><label class="expand" for="c-37529346">[1 more]</label></div><br/><div class="children"><div class="content">Or the vnlog tools can do this. There are many ways to do data processing on the commandline now.</div><br/></div></div><div id="37530053" class="c"><input type="checkbox" id="c-37530053" checked=""/><div class="controls bullet"><span class="by">freedude</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37527561">parent</a><span>|</span><a href="#37529346">prev</a><span>|</span><a href="#37526527">next</a><span>|</span><label class="collapse" for="c-37530053">[-]</label><label class="expand" for="c-37530053">[1 more]</label></div><br/><div class="children"><div class="content">perl with the right plugins makes data janitor situations simplified.</div><br/></div></div></div></div><div id="37526527" class="c"><input type="checkbox" id="c-37526527" checked=""/><div class="controls bullet"><span class="by">stormfather</span><span>|</span><a href="#37526406">parent</a><span>|</span><a href="#37527561">prev</a><span>|</span><a href="#37532582">next</a><span>|</span><label class="collapse" for="c-37526527">[-]</label><label class="expand" for="c-37526527">[20 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve never stopped to question the absurdity of the gov data shopping cart thing. WHY!?!? Is there some justification for that?</div><br/><div id="37526631" class="c"><input type="checkbox" id="c-37526631" checked=""/><div class="controls bullet"><span class="by">icyfox</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37526527">parent</a><span>|</span><a href="#37528004">next</a><span>|</span><label class="collapse" for="c-37526631">[-]</label><label class="expand" for="c-37526631">[3 more]</label></div><br/><div class="children"><div class="content">I can almost assure you it was an explicit requirement in an RFP that was copied from some master template. So not a good justification - but a justification in the eyes of the bureaucracy.<p>The book Recoding America has a lot of anecdotes to this effect; most of these situations reduce to a Congressional mandate that got misinterpreted along the way. My favorite was for an update to Social Security. The department in charge of the implementation swore that Congress was forcing them to build a facebook for doctors (literally where doctors could friend other doctors and message them). Congress had no such intention; it was actually 3rd party lobbying that wanted the requirement so they could build their own solution outside of government. Really crazy stuff.</div><br/><div id="37529470" class="c"><input type="checkbox" id="c-37529470" checked=""/><div class="controls bullet"><span class="by">reverius42</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37526631">parent</a><span>|</span><a href="#37528004">next</a><span>|</span><label class="collapse" for="c-37529470">[-]</label><label class="expand" for="c-37529470">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Congress had no such intention; it was actually 3rd party lobbying<p>Right, but 3rd party lobbying can&#x27;t force anyone to do anything, whereas Congress can (and did) give this mandate the force of law. The fact that lobbyists got Congress to do something that they had &quot;no such intention&quot; to do is its own problem, but let&#x27;s not lose sight of who is responsible for laws.</div><br/><div id="37530006" class="c"><input type="checkbox" id="c-37530006" checked=""/><div class="controls bullet"><span class="by">icyfox</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37529470">parent</a><span>|</span><a href="#37528004">next</a><span>|</span><label class="collapse" for="c-37530006">[-]</label><label class="expand" for="c-37530006">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s the interesting part of this story; Congress didn&#x27;t think this requirement existed, neither did the lobbyists. But the language that congress adopted (with the consultation of this lobbying group) made the agencies _think_ it was what congress wanted. So the agency was left holding the bag for something no one actually wanted in the first place. Like a big game of telephone.<p>I agree with your broader point however. Congress needs to do a better job of owning outcomes.</div><br/></div></div></div></div></div></div><div id="37528004" class="c"><input type="checkbox" id="c-37528004" checked=""/><div class="controls bullet"><span class="by">ics</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37526527">parent</a><span>|</span><a href="#37526631">prev</a><span>|</span><a href="#37527867">next</a><span>|</span><label class="collapse" for="c-37528004">[-]</label><label class="expand" for="c-37528004">[3 more]</label></div><br/><div class="children"><div class="content">I for one was tickled the first time I paid an NYC parking ticket online and had to add it to my cart, as if they might upsell me on some other more serious violation. Act now before it&#x27;s too late!</div><br/><div id="37528841" class="c"><input type="checkbox" id="c-37528841" checked=""/><div class="controls bullet"><span class="by">dkarl</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528004">parent</a><span>|</span><a href="#37529583">next</a><span>|</span><label class="collapse" for="c-37528841">[-]</label><label class="expand" for="c-37528841">[1 more]</label></div><br/><div class="children"><div class="content">When you&#x27;re paying for things, and can pay for several things at the same time, it makes sense. I helped my mother pay her property taxes this year, and for two properties we had to make four payments. Without the shopping cart (or a functional equivalent) I would have had to enter my payment information four times instead of once.</div><br/></div></div><div id="37529583" class="c"><input type="checkbox" id="c-37529583" checked=""/><div class="controls bullet"><span class="by">yard2010</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528004">parent</a><span>|</span><a href="#37528841">prev</a><span>|</span><a href="#37527867">next</a><span>|</span><label class="collapse" for="c-37529583">[-]</label><label class="expand" for="c-37529583">[1 more]</label></div><br/><div class="children"><div class="content">And if you don&#x27;t like the service you have free returns for 14 days no questions asked</div><br/></div></div></div></div><div id="37527867" class="c"><input type="checkbox" id="c-37527867" checked=""/><div class="controls bullet"><span class="by">NelsonMinar</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37526527">parent</a><span>|</span><a href="#37528004">prev</a><span>|</span><a href="#37526645">next</a><span>|</span><label class="collapse" for="c-37527867">[-]</label><label class="expand" for="c-37527867">[1 more]</label></div><br/><div class="children"><div class="content">I assume it&#x27;s a vestige from the old days when you ordered actual tapes or printouts from government agencies. The notion of an order that had to be prepared is baked into how they think about the service and product.<p>All sorts of strange things happen with accessing US government data. But most agencies have a lot of excellent data available for free and motivated data scientists who want to make it available to you.</div><br/></div></div><div id="37526645" class="c"><input type="checkbox" id="c-37526645" checked=""/><div class="controls bullet"><span class="by">d1sxeyes</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37526527">parent</a><span>|</span><a href="#37527867">prev</a><span>|</span><a href="#37527492">next</a><span>|</span><label class="collapse" for="c-37526645">[-]</label><label class="expand" for="c-37526645">[1 more]</label></div><br/><div class="children"><div class="content">Probably because it’s the out-of-the-box functionality on ServiceNow or whatever tool they’re using.</div><br/></div></div><div id="37527492" class="c"><input type="checkbox" id="c-37527492" checked=""/><div class="controls bullet"><span class="by">jstarfish</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37526527">parent</a><span>|</span><a href="#37526645">prev</a><span>|</span><a href="#37527992">next</a><span>|</span><label class="collapse" for="c-37527492">[-]</label><label class="expand" for="c-37527492">[2 more]</label></div><br/><div class="children"><div class="content">Some records are only released for a fee, so I always assumed implementing a standard interface to handle commercial transactions and making select items free was easier than maintaining separate commercial&#x2F;noncommercial sites.</div><br/><div id="37529222" class="c"><input type="checkbox" id="c-37529222" checked=""/><div class="controls bullet"><span class="by">dTal</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37527492">parent</a><span>|</span><a href="#37527992">next</a><span>|</span><label class="collapse" for="c-37529222">[-]</label><label class="expand" for="c-37529222">[1 more]</label></div><br/><div class="children"><div class="content">Which in itself is fairly antidemocratic.</div><br/></div></div></div></div><div id="37527992" class="c"><input type="checkbox" id="c-37527992" checked=""/><div class="controls bullet"><span class="by">RicoElectrico</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37526527">parent</a><span>|</span><a href="#37527492">prev</a><span>|</span><a href="#37527676">next</a><span>|</span><label class="collapse" for="c-37527992">[-]</label><label class="expand" for="c-37527992">[1 more]</label></div><br/><div class="children"><div class="content">My guess would be to gather information about who is using the data - and present it to the stakeholders.<p>Sometimes they send questionnaires to data consumers.</div><br/></div></div><div id="37527676" class="c"><input type="checkbox" id="c-37527676" checked=""/><div class="controls bullet"><span class="by">btown</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37526527">parent</a><span>|</span><a href="#37527992">prev</a><span>|</span><a href="#37530512">next</a><span>|</span><label class="collapse" for="c-37527676">[-]</label><label class="expand" for="c-37527676">[2 more]</label></div><br/><div class="children"><div class="content">Probably made by the same people who made <a href="https:&#x2F;&#x2F;pacer.uscourts.gov&#x2F;pacer-pricing-how-fees-work" rel="nofollow noreferrer">https:&#x2F;&#x2F;pacer.uscourts.gov&#x2F;pacer-pricing-how-fees-work</a> ...<p>(As a side note, I can understand why in years past it would cost multiple cents per page to physically photocopy a federal document - but it is absolutely absurd that <i>already-digitized</i> documents, documents which are fundamentally part of the precedent that decides whether our behavior does or doesn&#x27;t cause civil or criminal liability, are behind a paywall for a digital download!)</div><br/><div id="37528766" class="c"><input type="checkbox" id="c-37528766" checked=""/><div class="controls bullet"><span class="by">dmvdoug</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37527676">parent</a><span>|</span><a href="#37530512">next</a><span>|</span><label class="collapse" for="c-37528766">[-]</label><label class="expand" for="c-37528766">[1 more]</label></div><br/><div class="children"><div class="content">Pacer physically hurts to use. They should have to pay us for having to use it.</div><br/></div></div></div></div><div id="37530512" class="c"><input type="checkbox" id="c-37530512" checked=""/><div class="controls bullet"><span class="by">turquoisevar</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37526527">parent</a><span>|</span><a href="#37527676">prev</a><span>|</span><a href="#37527353">next</a><span>|</span><label class="collapse" for="c-37530512">[-]</label><label class="expand" for="c-37530512">[2 more]</label></div><br/><div class="children"><div class="content">I’d go further and say that government websites and services in general are weird and often feel outdated, especially the more local you get.<p>Some of them look like they’re straight from the early 2000s.<p>Another thing is that privacy is dead and almost everything is deemed public information. 
Your address, mugshot, voter rolls, you name it, it’s all deemed public information.<p>But once you actually want to access information that is useful to society as whole, more often than not it’s behind a paywall. 
Despite this, they still call it “public” information because theoretically anyone can pay for it and get access.<p>It’s one of the first things I noticed when I moved to the US.<p>Another thing that I’ve noticed is that, if possible, there always needs to be a middle man inserted, a private corporation that can make a profit out of it.<p>You want to identify yourself to the government? 
Well you’re gonna need an ID.me account or complete a quiz provided to you by LexisNexis or one of the credit reporting agencies.<p>Why? How is it that the <i>government</i> of all entities, isn’t capable of verifying me themselves?<p>Zooming out even further you’ll start to recognize even more ancient processes you interact with in daily life.<p>The whole banking situation and the backbone that’s running it is a great example. 
The concept of pending transactions, checks and expensive and slow transfers is baffling to me.<p>It’s so weird, like ooh, aah this country is the pinnacle of technological innovation, yet in daily life there’s so much that hinges on ancient and suboptimal processes that you don’t see in, say, Western Europe.<p>My best guess is that’s this is because of a mix of lack of funding and politicians that wanting to placate profit seeking corporations.<p>Ironically, and I have no hard evidence for this because I’m too lazy to look into it, I suspect that on the long term it costs more to outsource it than it does to do it themselves.<p>&#x2F;rant</div><br/><div id="37532454" class="c"><input type="checkbox" id="c-37532454" checked=""/><div class="controls bullet"><span class="by">domh</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37530512">parent</a><span>|</span><a href="#37527353">next</a><span>|</span><label class="collapse" for="c-37532454">[-]</label><label class="expand" for="c-37532454">[1 more]</label></div><br/><div class="children"><div class="content">I feel like the USA was probably ahead of the curve on things like the banking system in the 90s but removing all of that cruft and replacing with a v2 is not an easy thing to do. Especially when the population are generally skeptical of government and outsourcing to a private corporation is seen as the cheaper option. Short term it&#x27;s potentially cheaper&#x2F;quicker to outsource but long term maintenance contracts and lobbying to keep things as they are is much more expensive.<p>In the USA you find these whole industries that exist due to the inadequacies of the old systems. E.g. venmo doesnt need to exist in Western Europe (and probably rest of world?) because person-to-person bank transactions are free and easy.</div><br/></div></div></div></div><div id="37527353" class="c"><input type="checkbox" id="c-37527353" checked=""/><div class="controls bullet"><span class="by">phatskat</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37526527">parent</a><span>|</span><a href="#37530512">prev</a><span>|</span><a href="#37532582">next</a><span>|</span><label class="collapse" for="c-37527353">[-]</label><label class="expand" for="c-37527353">[4 more]</label></div><br/><div class="children"><div class="content">Bureaucracy = $$$</div><br/><div id="37528345" class="c"><input type="checkbox" id="c-37528345" checked=""/><div class="controls bullet"><span class="by">nerevarthelame</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37527353">parent</a><span>|</span><a href="#37532582">next</a><span>|</span><label class="collapse" for="c-37528345">[-]</label><label class="expand" for="c-37528345">[3 more]</label></div><br/><div class="children"><div class="content">Who is making money with shopping cart-style downloads?</div><br/><div id="37529136" class="c"><input type="checkbox" id="c-37529136" checked=""/><div class="controls bullet"><span class="by">redavni</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528345">parent</a><span>|</span><a href="#37528599">next</a><span>|</span><label class="collapse" for="c-37529136">[-]</label><label class="expand" for="c-37529136">[1 more]</label></div><br/><div class="children"><div class="content">The web development companies that are subcontracted by the government agencies to repurpose their silly shopping cart software.<p>I will decline to share my personal anecdote&#x27;s about these companies because I am like 10+ years out of date, but I can tell you that most of these companies seemed to have certain very specific non-technical things in common.</div><br/></div></div></div></div></div></div></div></div><div id="37532582" class="c"><input type="checkbox" id="c-37532582" checked=""/><div class="controls bullet"><span class="by">FranOntanaya</span><span>|</span><a href="#37526406">parent</a><span>|</span><a href="#37526527">prev</a><span>|</span><a href="#37531891">next</a><span>|</span><label class="collapse" for="c-37532582">[-]</label><label class="expand" for="c-37532582">[1 more]</label></div><br/><div class="children"><div class="content">The main thing for me is that the data isn&#x27;t broken down in a way that ends you having to make a thousand requests and collate them. If the client is expected to be able to pull the whole set of data, provide the whole set. There&#x27;s other ways to rate limit.</div><br/></div></div><div id="37531891" class="c"><input type="checkbox" id="c-37531891" checked=""/><div class="controls bullet"><span class="by">jd3</span><span>|</span><a href="#37526406">parent</a><span>|</span><a href="#37532582">prev</a><span>|</span><a href="#37529293">next</a><span>|</span><label class="collapse" for="c-37531891">[-]</label><label class="expand" for="c-37531891">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Every time I have to fill a &quot;shopping cart&quot; for a US government data download I die a little.<p>I&#x27;ve worked in gov&#x2F;civic tech for 5+ years and, as you&#x27;re probably aware, there is now a highly lucrative business in centralizing and consequently selling easy access to this data to lobbyists&#x2F;fortune 500s&#x2F;nonprofits.<p>USDS&#x2F;18f are sort of addressing this, but haven&#x27;t really made a dent in the market afaik since they&#x27;re focusing on modernizing specific agencies rather than centralizing everything.</div><br/></div></div><div id="37529293" class="c"><input type="checkbox" id="c-37529293" checked=""/><div class="controls bullet"><span class="by">thibaut_barrere</span><span>|</span><a href="#37526406">parent</a><span>|</span><a href="#37531891">prev</a><span>|</span><a href="#37527395">next</a><span>|</span><label class="collapse" for="c-37529293">[-]</label><label class="expand" for="c-37529293">[4 more]</label></div><br/><div class="children"><div class="content">Agreed! People are surprised but CSV files (while I would not use them for everything) work great in low-tech environment, for instance, or when files must be produced by many different actors with different technical levels.<p>They also work nicely as an interop between different stacks (Cobol &lt;-&gt; Ruby).<p>One concrete example is the French standard to describe Electrical Vehicles Charge Points, which is made of 2 parts (static = position &amp; overall description, dynamic = current state, occupancy etc). Both &quot;files&quot; are just CSV files:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;etalab&#x2F;schema-irve">https:&#x2F;&#x2F;github.com&#x2F;etalab&#x2F;schema-irve</a><p>Both sub-formats are specified via TableSchema (<a href="https:&#x2F;&#x2F;frictionlessdata.io&#x2F;schemas&#x2F;table-schema.json" rel="nofollow noreferrer">https:&#x2F;&#x2F;frictionlessdata.io&#x2F;schemas&#x2F;table-schema.json</a>).<p>Files are produced directly by electrical charge points operators, which can have widely different sizes &amp; technicality, so CSV works nicely in that case.</div><br/><div id="37529410" class="c"><input type="checkbox" id="c-37529410" checked=""/><div class="controls bullet"><span class="by">rjh29</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37529293">parent</a><span>|</span><a href="#37527395">next</a><span>|</span><label class="collapse" for="c-37529410">[-]</label><label class="expand" for="c-37529410">[3 more]</label></div><br/><div class="children"><div class="content">I worked for a company that used TSV for huge datasets. It was extremely efficient, far more so than any database.</div><br/><div id="37529812" class="c"><input type="checkbox" id="c-37529812" checked=""/><div class="controls bullet"><span class="by">xp84</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37529410">parent</a><span>|</span><a href="#37531760">next</a><span>|</span><label class="collapse" for="c-37529812">[-]</label><label class="expand" for="c-37529812">[1 more]</label></div><br/><div class="children"><div class="content">TSV is criminally underrated compared to CSV.</div><br/></div></div></div></div></div></div><div id="37527395" class="c"><input type="checkbox" id="c-37527395" checked=""/><div class="controls bullet"><span class="by">digging</span><span>|</span><a href="#37526406">parent</a><span>|</span><a href="#37529293">prev</a><span>|</span><a href="#37528360">next</a><span>|</span><label class="collapse" for="c-37527395">[-]</label><label class="expand" for="c-37527395">[5 more]</label></div><br/><div class="children"><div class="content">Can you explain what the shopping cart is?<p>I mean... do they make you select one or more files, then navigate to another page to download your selected files?</div><br/><div id="37527476" class="c"><input type="checkbox" id="c-37527476" checked=""/><div class="controls bullet"><span class="by">crizzlenizzle</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37527395">parent</a><span>|</span><a href="#37527435">next</a><span>|</span><label class="collapse" for="c-37527476">[-]</label><label class="expand" for="c-37527476">[1 more]</label></div><br/><div class="children"><div class="content">Sounds like Germany’s company register[1].<p>You can search for companies, select the documents you’d like to see (like shareholder lists), then you go through a checkout process and pay 0 EUR (used to be like a few euros years ago), and then you can finally download your file. Still a super tedious process, but at least for free nowadays.<p>[1] <a href="https:&#x2F;&#x2F;www.unternehmensregister.de&#x2F;ureg&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.unternehmensregister.de&#x2F;ureg&#x2F;</a></div><br/></div></div><div id="37527435" class="c"><input type="checkbox" id="c-37527435" checked=""/><div class="controls bullet"><span class="by">RosanaAnaDana</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37527395">parent</a><span>|</span><a href="#37527476">prev</a><span>|</span><a href="#37527915">next</a><span>|</span><label class="collapse" for="c-37527435">[-]</label><label class="expand" for="c-37527435">[2 more]</label></div><br/><div class="children"><div class="content">Quite literally yes. There are often multiple click throughs. Every Department, agency, sub-agency, all the way down to federal dog catcher has decided the most important thing is to invent a new way of getting data from them.</div><br/><div id="37529213" class="c"><input type="checkbox" id="c-37529213" checked=""/><div class="controls bullet"><span class="by">imchillyb</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37527435">parent</a><span>|</span><a href="#37527915">next</a><span>|</span><label class="collapse" for="c-37529213">[-]</label><label class="expand" for="c-37529213">[1 more]</label></div><br/><div class="children"><div class="content">Solutions vary as the budgets and talent assigned the projects do.<p>Federal, State, local and hyper local solutions cannot be the same unless the financier is also the same.</div><br/></div></div></div></div><div id="37527915" class="c"><input type="checkbox" id="c-37527915" checked=""/><div class="controls bullet"><span class="by">pininja</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37527395">parent</a><span>|</span><a href="#37527435">prev</a><span>|</span><a href="#37528360">next</a><span>|</span><label class="collapse" for="c-37527915">[-]</label><label class="expand" for="c-37527915">[1 more]</label></div><br/><div class="children"><div class="content">Pretty much. USGS’s EarthExplorer requires a login just to download free files <a href="https:&#x2F;&#x2F;earthexplorer.usgs.gov&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;earthexplorer.usgs.gov&#x2F;</a><p>There are other ways to access the data on here, but they’re fragmented. It’s nicely organized here so it’s a bummer they make it hard to programmatically retrieve files once you find what you’re looking for.</div><br/></div></div></div></div><div id="37528360" class="c"><input type="checkbox" id="c-37528360" checked=""/><div class="controls bullet"><span class="by">x86x87</span><span>|</span><a href="#37526406">parent</a><span>|</span><a href="#37527395">prev</a><span>|</span><a href="#37528536">next</a><span>|</span><label class="collapse" for="c-37528360">[-]</label><label class="expand" for="c-37528360">[8 more]</label></div><br/><div class="children"><div class="content">Lol. Tell me you never had to parse CSV files without telling me.<p>CSV files can be a nightmare to work with depending where they come from and various liberties that were taken when generating the file or reading the file.<p>Use a goddam battle tested library people and don&#x27;t reinvent the wheel. &#x2F;oldman rant over</div><br/><div id="37529148" class="c"><input type="checkbox" id="c-37529148" checked=""/><div class="controls bullet"><span class="by">wavemode</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528360">parent</a><span>|</span><a href="#37530217">next</a><span>|</span><label class="collapse" for="c-37529148">[-]</label><label class="expand" for="c-37529148">[1 more]</label></div><br/><div class="children"><div class="content">Yes, you eventually realize the hard way that &quot;CSV&quot; is actually a blanket of various similar formats, with different rules and conventions. The way one program outputs CSV&#x27;s may be completely different from another.</div><br/></div></div><div id="37530217" class="c"><input type="checkbox" id="c-37530217" checked=""/><div class="controls bullet"><span class="by">NelsonMinar</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528360">parent</a><span>|</span><a href="#37529148">prev</a><span>|</span><a href="#37529393">next</a><span>|</span><label class="collapse" for="c-37530217">[-]</label><label class="expand" for="c-37530217">[1 more]</label></div><br/><div class="children"><div class="content">Actually, I worked on OpenAddresses, a project to parse thousands of CSV files containing address data from many different county, state, and national systems around the world. It really wasn&#x27;t that hard, even Python&#x27;s basic csv parser was sufficient to the task (and there are plenty of better options).<p>CSV is remarkably robust in practice.</div><br/></div></div><div id="37529393" class="c"><input type="checkbox" id="c-37529393" checked=""/><div class="controls bullet"><span class="by">thefurdrake</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528360">parent</a><span>|</span><a href="#37530217">prev</a><span>|</span><a href="#37528729">next</a><span>|</span><label class="collapse" for="c-37529393">[-]</label><label class="expand" for="c-37529393">[4 more]</label></div><br/><div class="children"><div class="content">Hey, CSV is hard, guys.<p>I&#x27;ve found template injection in a CSV upload before because they didn&#x27;t anticipate a doublequote being syntactically relevant or something.<p>It was my job to find these things and I still felt betrayed by a file format I didn&#x27;t realize wasn&#x27;t just comma separated values only.</div><br/><div id="37530136" class="c"><input type="checkbox" id="c-37530136" checked=""/><div class="controls bullet"><span class="by">x86x87</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37529393">parent</a><span>|</span><a href="#37528729">next</a><span>|</span><label class="collapse" for="c-37530136">[-]</label><label class="expand" for="c-37530136">[3 more]</label></div><br/><div class="children"><div class="content">Someone can find all these issues on 200 lines of code :) see sibling comment</div><br/><div id="37530437" class="c"><input type="checkbox" id="c-37530437" checked=""/><div class="controls bullet"><span class="by">nuc1e0n</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37530136">parent</a><span>|</span><a href="#37528729">next</a><span>|</span><label class="collapse" for="c-37530437">[-]</label><label class="expand" for="c-37530437">[2 more]</label></div><br/><div class="children"><div class="content">This isn&#x27;t my code, but gives you an idea of the level of complexity involved. But don&#x27;t reimplement what you don&#x27;t need to.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;mafintosh&#x2F;csv-parser&#x2F;blob&#x2F;master&#x2F;index.js">https:&#x2F;&#x2F;github.com&#x2F;mafintosh&#x2F;csv-parser&#x2F;blob&#x2F;master&#x2F;index.js</a></div><br/><div id="37531193" class="c"><input type="checkbox" id="c-37531193" checked=""/><div class="controls bullet"><span class="by">x86x87</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37530437">parent</a><span>|</span><a href="#37528729">next</a><span>|</span><label class="collapse" for="c-37531193">[-]</label><label class="expand" for="c-37531193">[1 more]</label></div><br/><div class="children"><div class="content">To be clear my comment was meant as a joke.<p>Looking at the parser I see a few problems with it just by skimming the code. I&#x27;m not saying it wouldn&#x27;t work or that it&#x27;s not good enough for certain purposes.</div><br/></div></div></div></div></div></div></div></div><div id="37528729" class="c"><input type="checkbox" id="c-37528729" checked=""/><div class="controls bullet"><span class="by">nuc1e0n</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528360">parent</a><span>|</span><a href="#37529393">prev</a><span>|</span><a href="#37528536">next</a><span>|</span><label class="collapse" for="c-37528729">[-]</label><label class="expand" for="c-37528729">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not as bad as all that. There&#x27;s some gochas sure but you can cover them all with about 200 lines of code.<p>However, I would recommend using a tested library to do the parsing, sqlite for example, rather than rolling your own. Unless you have to of course.</div><br/></div></div></div></div><div id="37528536" class="c"><input type="checkbox" id="c-37528536" checked=""/><div class="controls bullet"><span class="by">chankstein38</span><span>|</span><a href="#37526406">parent</a><span>|</span><a href="#37528360">prev</a><span>|</span><a href="#37528199">next</a><span>|</span><label class="collapse" for="c-37528536">[-]</label><label class="expand" for="c-37528536">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t know if this is the cart you&#x27;re talking about but the USGS does this for LiDAR data and yeah I&#x27;m with you I die a little every time I use that site.  I love that the data is available but why in the world do we have to cart everything?  Just give me a one click download</div><br/></div></div><div id="37528199" class="c"><input type="checkbox" id="c-37528199" checked=""/><div class="controls bullet"><span class="by">msla</span><span>|</span><a href="#37526406">parent</a><span>|</span><a href="#37528536">prev</a><span>|</span><a href="#37529128">next</a><span>|</span><label class="collapse" for="c-37528199">[-]</label><label class="expand" for="c-37528199">[5 more]</label></div><br/><div class="children"><div class="content">CSV would be great if there were <i>one</i> CSV, and if you absolutely guarantee that nobody has &quot;improved&quot; the CSV by editing it with a spreadsheet program (including opening it with a spreadsheet program) or their own deft little fingers in a text editor.<p>For example:<p><pre><code>    &quot;Look, this contains \&quot;quotes\&quot;!&quot;,012345
</code></pre>
Or:<p><pre><code>    &quot;Look, this contains &quot;&quot;quotes&quot;&quot;!&quot;,012345
</code></pre>
Or, for some degenerate examples:<p><pre><code>    &quot;Look, this contains &quot;quotes&quot;!&quot;,012345
</code></pre>
Or:<p><pre><code>    Look, this contains &quot;quotes&quot;!,012345
</code></pre>
Or the spoor of a spreadsheet:<p><pre><code>    &quot;Look, this contains &quot;&quot;quotes&quot;&quot;!&quot;,12345
</code></pre>
Theoretically, JSON isn&#x27;t immune to being hand-hacked into a semi-coherent mess. In practice, people don&#x27;t seem to do that to JSON files, at least not that I&#x27;ve seen. Ditto number problems, in that in JSON, serial numbers and such tend to be strings instead of integers a &quot;helpful&quot; application can lop a few zeroes off of.</div><br/><div id="37528528" class="c"><input type="checkbox" id="c-37528528" checked=""/><div class="controls bullet"><span class="by">AshamedCaptain</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528199">parent</a><span>|</span><a href="#37530670">next</a><span>|</span><label class="collapse" for="c-37528528">[-]</label><label class="expand" for="c-37528528">[1 more]</label></div><br/><div class="children"><div class="content">&gt; CSV would be great if there were one CSV, and if you absolutely guarantee that nobody has &quot;improved&quot; the CSV by editing it with a spreadsheet program (including opening it with a spreadsheet program)<p>Practically no formats actually pass those rules. Even plain text is bound to be &quot;improved&quot; by text editors frequently (uniformation of line endings, removal of data not in a known encoding, UTF BOM, UTF normalization, etc.)<p>Just don&#x27;t do that.</div><br/></div></div><div id="37530670" class="c"><input type="checkbox" id="c-37530670" checked=""/><div class="controls bullet"><span class="by">nly</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528199">parent</a><span>|</span><a href="#37528528">prev</a><span>|</span><a href="#37528811">next</a><span>|</span><label class="collapse" for="c-37530670">[-]</label><label class="expand" for="c-37530670">[1 more]</label></div><br/><div class="children"><div class="content">I mean in practice you open up the CSV file, figure out the escaping rules, change one line of your code, and get on with your life.</div><br/></div></div><div id="37528811" class="c"><input type="checkbox" id="c-37528811" checked=""/><div class="controls bullet"><span class="by">nuc1e0n</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528199">parent</a><span>|</span><a href="#37530670">prev</a><span>|</span><a href="#37529080">next</a><span>|</span><label class="collapse" for="c-37528811">[-]</label><label class="expand" for="c-37528811">[1 more]</label></div><br/><div class="children"><div class="content">Stick to files conforming to RFC-4180 then</div><br/></div></div><div id="37529080" class="c"><input type="checkbox" id="c-37529080" checked=""/><div class="controls bullet"><span class="by">ianburrell</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528199">parent</a><span>|</span><a href="#37528811">prev</a><span>|</span><a href="#37529128">next</a><span>|</span><label class="collapse" for="c-37529080">[-]</label><label class="expand" for="c-37529080">[1 more]</label></div><br/><div class="children"><div class="content">JSONL should replace CSV. It is standardized and the escapes mostly well specified. It is effectively CSV with &quot;[&quot; and &quot;]&quot; surrounding lines.<p>Regular JSON would work fine for static file, and make Schema and links (JSON-LD) possible. But then the file could be any structure. JSONL works better for systems that assume line-based records, and are more likely to have consistent, simple records.</div><br/></div></div></div></div><div id="37529128" class="c"><input type="checkbox" id="c-37529128" checked=""/><div class="controls bullet"><span class="by">jhwhite</span><span>|</span><a href="#37526406">parent</a><span>|</span><a href="#37528199">prev</a><span>|</span><a href="#37527975">next</a><span>|</span><label class="collapse" for="c-37529128">[-]</label><label class="expand" for="c-37529128">[1 more]</label></div><br/><div class="children"><div class="content">clinicaltrials.gov let&#x27;s you save a search term then download the results as a zip. But there&#x27;s an xml file for each search result for the trial.<p>One of the first things I played around with was using Python to get that file, unzip it, then iterate through the xml files grabbing the info I wanted and putting it into ElasticSearch to make it searchable then putting an angular front end on it.<p>I used to have it published somewhere but I think I let it all die. :(</div><br/></div></div><div id="37527975" class="c"><input type="checkbox" id="c-37527975" checked=""/><div class="controls bullet"><span class="by">pbreit</span><span>|</span><a href="#37526406">parent</a><span>|</span><a href="#37529128">prev</a><span>|</span><a href="#37527901">next</a><span>|</span><label class="collapse" for="c-37527975">[-]</label><label class="expand" for="c-37527975">[1 more]</label></div><br/><div class="children"><div class="content">Pretty much all data eventually ends up in 2 dimensions (rows &amp; columns) so all these complicated data models are just mostly complicating things.</div><br/></div></div><div id="37527901" class="c"><input type="checkbox" id="c-37527901" checked=""/><div class="controls bullet"><span class="by">mhh__</span><span>|</span><a href="#37526406">parent</a><span>|</span><a href="#37527975">prev</a><span>|</span><a href="#37527914">next</a><span>|</span><label class="collapse" for="c-37527901">[-]</label><label class="expand" for="c-37527901">[1 more]</label></div><br/><div class="children"><div class="content">Someone posted me a pdf in the last year! Online even! (But posted!)</div><br/></div></div><div id="37527914" class="c"><input type="checkbox" id="c-37527914" checked=""/><div class="controls bullet"><span class="by">rewmie</span><span>|</span><a href="#37526406">parent</a><span>|</span><a href="#37527901">prev</a><span>|</span><a href="#37532379">next</a><span>|</span><label class="collapse" for="c-37527914">[-]</label><label class="expand" for="c-37527914">[6 more]</label></div><br/><div class="children"><div class="content">&gt; Simple file downloads and CSV files are fantastic. I wish more folks would publish data in simple formats like this.<p>The document format doesn&#x27;t seem to have much to do with the problem. I mean, if the CSV is replaced by a zipped JSON doc then the benefits are the same.<p>&gt; Every time I have to fill a &quot;shopping cart&quot; for a US government data download I die a little.<p>Now that seems to be the real problem: too many hurdles in the way of a simple download of a statically-served file.</div><br/><div id="37528031" class="c"><input type="checkbox" id="c-37528031" checked=""/><div class="controls bullet"><span class="by">dividedbyzero</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37527914">parent</a><span>|</span><a href="#37532379">next</a><span>|</span><label class="collapse" for="c-37528031">[-]</label><label class="expand" for="c-37528031">[5 more]</label></div><br/><div class="children"><div class="content">&gt; if the CSV is replaced by a zipped JSON doc then the benefits are the same.<p>Being able to use things like jq and gron might make simple use cases extremely straightforward. I&#x27;m not aware of anything similarly nimble for CSV.</div><br/><div id="37528582" class="c"><input type="checkbox" id="c-37528582" checked=""/><div class="controls bullet"><span class="by">BeefWellington</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528031">parent</a><span>|</span><a href="#37528918">next</a><span>|</span><label class="collapse" for="c-37528582">[-]</label><label class="expand" for="c-37528582">[1 more]</label></div><br/><div class="children"><div class="content">csvtool is probably what you&#x27;re looking for, though I think the use case for JSON vs CSV is different as one is hierarchy-oriented and the other is flat.</div><br/></div></div><div id="37528918" class="c"><input type="checkbox" id="c-37528918" checked=""/><div class="controls bullet"><span class="by">darkwater</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528031">parent</a><span>|</span><a href="#37528582">prev</a><span>|</span><a href="#37528267">next</a><span>|</span><label class="collapse" for="c-37528918">[-]</label><label class="expand" for="c-37528918">[2 more]</label></div><br/><div class="children"><div class="content">You dont gron with CSV, normal grep will work wonders.</div><br/><div id="37530940" class="c"><input type="checkbox" id="c-37530940" checked=""/><div class="controls bullet"><span class="by">dividedbyzero</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528918">parent</a><span>|</span><a href="#37528267">next</a><span>|</span><label class="collapse" for="c-37530940">[-]</label><label class="expand" for="c-37530940">[1 more]</label></div><br/><div class="children"><div class="content">gron gives you both the complete key and value in a single line (which you then grep). Directly grep-ing a specific column in a CSV file isn&#x27;t very straightforward.</div><br/></div></div></div></div><div id="37528267" class="c"><input type="checkbox" id="c-37528267" checked=""/><div class="controls bullet"><span class="by">two_handfuls</span><span>|</span><a href="#37526406">root</a><span>|</span><a href="#37528031">parent</a><span>|</span><a href="#37528918">prev</a><span>|</span><a href="#37532379">next</a><span>|</span><label class="collapse" for="c-37528267">[-]</label><label class="expand" for="c-37528267">[1 more]</label></div><br/><div class="children"><div class="content">For CSV? DuckDB, Datasette, awk, pawk, and tons of others.</div><br/></div></div></div></div></div></div></div></div><div id="37532379" class="c"><input type="checkbox" id="c-37532379" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#37526406">prev</a><span>|</span><a href="#37526328">next</a><span>|</span><label class="collapse" for="c-37532379">[-]</label><label class="expand" for="c-37532379">[1 more]</label></div><br/><div class="children"><div class="content">Going on a tangent:<p>&gt; Why was the Euro so weak back in 2000? It was launched, without coins or notes, in January 1999. The Euro was, initially, a sort of in-game currency for the European Union. It existed only inside banks - so there were no notes or coins for it. That all came later. So did belief - early on it didn&#x27;t look like the little Euro was going to make it: so the rate against the Dollar was 0.8252. That means that in October 2000, a Dollar would buy you 1.21 Euros (to reverse exchange rates, do 1&#x2F;rate). Nowadays the Euro is much stronger: a Dollar would buy you less than 1 Euro.<p>Even if the Euro initially only existed electronically, it still had fixed exchange rates with the old currencies of the EU zone members.  Most importantly with the established and well-trusted Deutsche Mark of Germany.<p>So any explanation of &#x27;why was the Euro initially weak&#x27; also has to explain why the DEM was weak at the time.  The explanation given in that paragraph doesn&#x27;t sound like it&#x27;s passing that test.</div><br/></div></div><div id="37526328" class="c"><input type="checkbox" id="c-37526328" checked=""/><div class="controls bullet"><span class="by">liamkinne</span><span>|</span><a href="#37532379">prev</a><span>|</span><a href="#37526386">next</a><span>|</span><label class="collapse" for="c-37526328">[-]</label><label class="expand" for="c-37526328">[17 more]</label></div><br/><div class="children"><div class="content">I once hade the unfortunate experience of building an API for a government org where the data changed once a year or when amendments were made which happens very infrequently.<p>The whole data set could have been zipped into a &lt;1MB file but instead a “solution architect” go their hands on the requirements. We ended up with a slow API because they wouldn’t let us cache results in case the data had changed just as it was requested. And an overly complex webhook system for notifying subscribers of changes to the data.<p>A zip file probably was too simple, but not far off what was actually required.</div><br/><div id="37526969" class="c"><input type="checkbox" id="c-37526969" checked=""/><div class="controls bullet"><span class="by">xg15</span><span>|</span><a href="#37526328">parent</a><span>|</span><a href="#37527293">next</a><span>|</span><label class="collapse" for="c-37526969">[-]</label><label class="expand" for="c-37526969">[4 more]</label></div><br/><div class="children"><div class="content">I think for &lt;1MB of data, with changes once (or twice) a year, the correct API is a static webserver with working ETag&#x2F;If-Modified-Since support.<p>If you want to get really fancy, offer an additional webhook which triggers when the file changes - so clients know when to redownload it and don&#x27;t have to poll once a day.<p>...or make a script that sends a predefined e-mail to a mailing list when there is a change.</div><br/><div id="37527688" class="c"><input type="checkbox" id="c-37527688" checked=""/><div class="controls bullet"><span class="by">calpaterson</span><span>|</span><a href="#37526328">root</a><span>|</span><a href="#37526969">parent</a><span>|</span><a href="#37528097">next</a><span>|</span><label class="collapse" for="c-37527688">[-]</label><label class="expand" for="c-37527688">[1 more]</label></div><br/><div class="children"><div class="content">&gt; working ETag&#x2F;If-Modified-Since support<p>I completely agree and csvbase already implements this (so does curl btw), try:<p><pre><code>    curl --etag-compare stock-exchanges-etag.txt --etag-save stock-exchanges-etag.txt https:&#x2F;&#x2F;csvbase.com&#x2F;meripaterson&#x2F;stock-exchanges.parquet -O</code></pre></div><br/></div></div><div id="37527329" class="c"><input type="checkbox" id="c-37527329" checked=""/><div class="controls bullet"><span class="by">justsomehnguy</span><span>|</span><a href="#37526328">root</a><span>|</span><a href="#37526969">parent</a><span>|</span><a href="#37528097">prev</a><span>|</span><a href="#37527293">next</a><span>|</span><label class="collapse" for="c-37527329">[-]</label><label class="expand" for="c-37527329">[1 more]</label></div><br/><div class="children"><div class="content">&gt; ETag&#x2F;If-Modified-Since<p>See above. Also you can just publish the version in DNS with a long enough TTL</div><br/></div></div></div></div><div id="37527293" class="c"><input type="checkbox" id="c-37527293" checked=""/><div class="controls bullet"><span class="by">deeringc</span><span>|</span><a href="#37526328">parent</a><span>|</span><a href="#37526969">prev</a><span>|</span><a href="#37526968">next</a><span>|</span><label class="collapse" for="c-37527293">[-]</label><label class="expand" for="c-37527293">[5 more]</label></div><br/><div class="children"><div class="content">A zip file on a web server that supports etags, that&#x27;s polled every time access is required. When nothing has changed since last time, you get an empty HTTP 304 response and if it has changed then you simply download the &lt;1MB Zip file again with the updated etag. What am I missing?</div><br/><div id="37527899" class="c"><input type="checkbox" id="c-37527899" checked=""/><div class="controls bullet"><span class="by">throwing_away</span><span>|</span><a href="#37526328">root</a><span>|</span><a href="#37527293">parent</a><span>|</span><a href="#37530372">next</a><span>|</span><label class="collapse" for="c-37527899">[-]</label><label class="expand" for="c-37527899">[1 more]</label></div><br/><div class="children"><div class="content">You forgot to get yourself paid.</div><br/></div></div><div id="37530372" class="c"><input type="checkbox" id="c-37530372" checked=""/><div class="controls bullet"><span class="by">tryauuum</span><span>|</span><a href="#37526328">root</a><span>|</span><a href="#37527293">parent</a><span>|</span><a href="#37527899">prev</a><span>|</span><a href="#37526968">next</a><span>|</span><label class="collapse" for="c-37530372">[-]</label><label class="expand" for="c-37530372">[3 more]</label></div><br/><div class="children"><div class="content">Probably nothing<p>My concern was &quot;what if file is updated while it&#x27;s mid-download&quot; but Linux would probably keep the old version of the file until the download finishes (== until file is still open by webserver process). Probably. It&#x27;s better to test</div><br/><div id="37531892" class="c"><input type="checkbox" id="c-37531892" checked=""/><div class="controls bullet"><span class="by">tbrownaw</span><span>|</span><a href="#37526328">root</a><span>|</span><a href="#37530372">parent</a><span>|</span><a href="#37531605">prev</a><span>|</span><a href="#37526968">next</a><span>|</span><label class="collapse" for="c-37531892">[-]</label><label class="expand" for="c-37531892">[1 more]</label></div><br/><div class="children"><div class="content">Is it updated in place (open&#x2F;write), or replaced (rename)?<p>If it&#x27;s updated in place, did the web server read the whole thing into a buffer or is it doing read&#x2F;send in a loop?</div><br/></div></div></div></div></div></div><div id="37526968" class="c"><input type="checkbox" id="c-37526968" checked=""/><div class="controls bullet"><span class="by">ipaddr</span><span>|</span><a href="#37526328">parent</a><span>|</span><a href="#37527293">prev</a><span>|</span><a href="#37526386">next</a><span>|</span><label class="collapse" for="c-37526968">[-]</label><label class="expand" for="c-37526968">[7 more]</label></div><br/><div class="children"><div class="content">If data changes only once a year or rarely that would imply usage of the api is a rare event for a user of the data so speed isn&#x27;t a huge concern.  Caching would introduce more complexities and the risk of needing to manually revalidate the cache.  The solution architect was probably right.</div><br/><div id="37527112" class="c"><input type="checkbox" id="c-37527112" checked=""/><div class="controls bullet"><span class="by">xg15</span><span>|</span><a href="#37526328">root</a><span>|</span><a href="#37526968">parent</a><span>|</span><a href="#37527359">next</a><span>|</span><label class="collapse" for="c-37527112">[-]</label><label class="expand" for="c-37527112">[1 more]</label></div><br/><div class="children"><div class="content">Why do rare writes imply rare usage? It&#x27;s possible the file is read often and by different systems even if changes are infrequent.<p>If the API was used rarely, that would be even more of an argument for a simple implementation and not a complex system involving webhooks.</div><br/></div></div><div id="37527359" class="c"><input type="checkbox" id="c-37527359" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#37526328">root</a><span>|</span><a href="#37526968">parent</a><span>|</span><a href="#37527112">prev</a><span>|</span><a href="#37528968">next</a><span>|</span><label class="collapse" for="c-37527359">[-]</label><label class="expand" for="c-37527359">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Caching would introduce more complexities<p>Apache&#x2F;nginx do it just fine...</div><br/></div></div><div id="37528968" class="c"><input type="checkbox" id="c-37528968" checked=""/><div class="controls bullet"><span class="by">pests</span><span>|</span><a href="#37526328">root</a><span>|</span><a href="#37526968">parent</a><span>|</span><a href="#37527359">prev</a><span>|</span><a href="#37527300">next</a><span>|</span><label class="collapse" for="c-37528968">[-]</label><label class="expand" for="c-37528968">[1 more]</label></div><br/><div class="children"><div class="content">Can&#x27;t cache so you need to read it whenever you use the data, not just when it changes.</div><br/></div></div><div id="37527300" class="c"><input type="checkbox" id="c-37527300" checked=""/><div class="controls bullet"><span class="by">justsomehnguy</span><span>|</span><a href="#37526328">root</a><span>|</span><a href="#37526968">parent</a><span>|</span><a href="#37528968">prev</a><span>|</span><a href="#37526386">next</a><span>|</span><label class="collapse" for="c-37527300">[-]</label><label class="expand" for="c-37527300">[3 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>  cat &#x2F;api&#x2F;version.txt
  2023.01.01

  ls &#x2F;api
  version.txt data.zip</code></pre></div><br/><div id="37527361" class="c"><input type="checkbox" id="c-37527361" checked=""/><div class="controls bullet"><span class="by">accrual</span><span>|</span><a href="#37526328">root</a><span>|</span><a href="#37527300">parent</a><span>|</span><a href="#37526386">next</a><span>|</span><label class="collapse" for="c-37527361">[-]</label><label class="expand" for="c-37527361">[2 more]</label></div><br/><div class="children"><div class="content">Or maybe encode the version into the filename? It would overwrite if nothing changed, and the previous versions would remain available.<p><pre><code>    2023.01.01-data.zip</code></pre></div><br/><div id="37528174" class="c"><input type="checkbox" id="c-37528174" checked=""/><div class="controls bullet"><span class="by">justsomehnguy</span><span>|</span><a href="#37526328">root</a><span>|</span><a href="#37527361">parent</a><span>|</span><a href="#37526386">next</a><span>|</span><label class="collapse" for="c-37528174">[-]</label><label class="expand" for="c-37528174">[1 more]</label></div><br/><div class="children"><div class="content">That requires preprocessing on the client and there are some ppl who has.. weird assumptions about how the dates should be written.<p>The version file can be quired at least the two ways:<p>the ETag&#x2F;If-Modified-Since way (metadata only)<p>content itself<p>The best part with the last one - you don&#x27;t need semver shenanigans. Just compare it with the latest dloaded copy, if version != dloaded =&gt; do_the_thing</div><br/></div></div></div></div></div></div></div></div></div></div><div id="37526386" class="c"><input type="checkbox" id="c-37526386" checked=""/><div class="controls bullet"><span class="by">crazygringo</span><span>|</span><a href="#37526328">prev</a><span>|</span><a href="#37526669">next</a><span>|</span><label class="collapse" for="c-37526386">[-]</label><label class="expand" for="c-37526386">[30 more]</label></div><br/><div class="children"><div class="content">No, it&#x27;s a terrible <i>API</i> if retrieving the result &#x27;2000-10-26&#x27; requires downloading a 565 KB file.<p>I don&#x27;t want to seem overly negative -- zipped CSV files are fantastic when you want to import lots of data that you then re-serve to users. I would vastly prefer it over e.g. protobufs that are currently used for mass transit system&#x27;s live train times, but have terrible support in many languages.<p>But it&#x27;s incredibly wasteful to treat it like an API to retrieve a single value. I hope nobody would ever write something like that into an app...<p>(So the article is cool, it&#x27;s just the headline that&#x27;s too much of a &quot;hot take&quot; for me.)</div><br/><div id="37526798" class="c"><input type="checkbox" id="c-37526798" checked=""/><div class="controls bullet"><span class="by">piaste</span><span>|</span><a href="#37526386">parent</a><span>|</span><a href="#37526507">next</a><span>|</span><label class="collapse" for="c-37526798">[-]</label><label class="expand" for="c-37526798">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s historical data. There is zero reason to request it more than once a day, and the users of such data will be interested in wildly different filters or aggregates over that data.<p>If this were being used to get the current rates, then yes, it would be a terrible design choice. But there are other services for that. This one fits its typical use case.</div><br/></div></div><div id="37526507" class="c"><input type="checkbox" id="c-37526507" checked=""/><div class="controls bullet"><span class="by">pixl97</span><span>|</span><a href="#37526386">parent</a><span>|</span><a href="#37526798">prev</a><span>|</span><a href="#37527222">next</a><span>|</span><label class="collapse" for="c-37526507">[-]</label><label class="expand" for="c-37526507">[5 more]</label></div><br/><div class="children"><div class="content">&gt; I hope nobody would ever write something like that into an app...<p>I have got some bad news for you...<p>Not directly API related, but I remember supporting some land management application, and a new version of their software came out. Before that point it was working fine on our slow satellite offices that may have been on something like ISDN at the time. New version didn&#x27;t work at all. The company said to run it on an RDP server.<p>I thought their answer was bullshit and investigated what they were doing. One particular call, for no particular reason was doing a &#x27;SELECT * FROM sometable&#x27; for no particular reason. There were many other calls that were using proper SQL select clauses in the same execution.<p>I brought this up with the vendor and at first they were confused as hell how we could even figure this out. Eventually they pushed out a new version with a fixed call that was usable over slow speed lines, but for hells sake, how could they not figure that out in their own testing and instead pushed customers to expensive solutions?</div><br/><div id="37526553" class="c"><input type="checkbox" id="c-37526553" checked=""/><div class="controls bullet"><span class="by">gray_-_wolf</span><span>|</span><a href="#37526386">root</a><span>|</span><a href="#37526507">parent</a><span>|</span><a href="#37527222">next</a><span>|</span><label class="collapse" for="c-37526553">[-]</label><label class="expand" for="c-37526553">[4 more]</label></div><br/><div class="children"><div class="content">&gt;  how could they not figure that out in their own testing<p>This one is easy.  Testing with little data on fast network (likely localhost).</div><br/><div id="37527219" class="c"><input type="checkbox" id="c-37527219" checked=""/><div class="controls bullet"><span class="by">codetrotter</span><span>|</span><a href="#37526386">root</a><span>|</span><a href="#37526553">parent</a><span>|</span><a href="#37527222">next</a><span>|</span><label class="collapse" for="c-37527219">[-]</label><label class="expand" for="c-37527219">[3 more]</label></div><br/><div class="children"><div class="content">Also, if there are any ORMs involved it could be that it’s not immediately obvious from their code itself that this would happen.<p>I’ve seen code that was using an ORM, where they needed to find some data that matched certain criteria. With plain SQL it would have resulted in just a few rows of data. Put instead with their use of the ORM they ended up selecting all rows in the table from the database, and then looping over the resulting rows in code.<p>The result of that was that the code was really slow to run, for something that would’ve been super fast if it wasn’t for the way they used the ORM in that code.</div><br/><div id="37530190" class="c"><input type="checkbox" id="c-37530190" checked=""/><div class="controls bullet"><span class="by">xp84</span><span>|</span><a href="#37526386">root</a><span>|</span><a href="#37527219">parent</a><span>|</span><a href="#37529836">next</a><span>|</span><label class="collapse" for="c-37530190">[-]</label><label class="expand" for="c-37530190">[1 more]</label></div><br/><div class="children"><div class="content">Seen this so many times by novice developers, whose work style is often &quot;Trial and error, and as soon as it works, stop and change nothing.&quot; And it&#x27;s so easy to slip in there because it works perfectly locally and often even in non-production envs, unless you&#x27;ve seeded them with production-like amounts of data, and with the ORM it looks fine. Like in Rails:<p><pre><code>  Product.where(category_id: xx).filter {|p| p.name.include?(&quot;computer&quot;) }
</code></pre>
vs<p><pre><code>  Product.where(category_id: xx).where(&quot;name like &#x27;%?%&#x27;&quot;, &quot;computer&quot;)
</code></pre>
PS: I know there&#x27;s an Arel way of doing the above without putting any SQL into the app -- use your imagination and pretend that&#x27;s what I did, because I still don&#x27;t have that memorized :)</div><br/></div></div><div id="37529836" class="c"><input type="checkbox" id="c-37529836" checked=""/><div class="controls bullet"><span class="by">mrighele</span><span>|</span><a href="#37526386">root</a><span>|</span><a href="#37527219">parent</a><span>|</span><a href="#37530190">prev</a><span>|</span><a href="#37527222">next</a><span>|</span><label class="collapse" for="c-37529836">[-]</label><label class="expand" for="c-37529836">[1 more]</label></div><br/><div class="children"><div class="content">I just see recently an example of that, a REST call  returning a few KB of data that would fetch a few million rows from the database and use 10+ GB of memory (unfortunately some people think that you should always use join fetches with JPA...).</div><br/></div></div></div></div></div></div></div></div><div id="37527222" class="c"><input type="checkbox" id="c-37527222" checked=""/><div class="controls bullet"><span class="by">jrm4</span><span>|</span><a href="#37526386">parent</a><span>|</span><a href="#37526507">prev</a><span>|</span><a href="#37527757">next</a><span>|</span><label class="collapse" for="c-37527222">[-]</label><label class="expand" for="c-37527222">[4 more]</label></div><br/><div class="children"><div class="content">Kinda feels like 20 years ago called and wants its argument back, like have you seen any javascript ever?<p>565 KB + the logic to get the big one is <i>miniscule</i> today by any reasonable factor.</div><br/><div id="37528216" class="c"><input type="checkbox" id="c-37528216" checked=""/><div class="controls bullet"><span class="by">scubbo</span><span>|</span><a href="#37526386">root</a><span>|</span><a href="#37527222">parent</a><span>|</span><a href="#37527757">next</a><span>|</span><label class="collapse" for="c-37528216">[-]</label><label class="expand" for="c-37528216">[3 more]</label></div><br/><div class="children"><div class="content">True, though ironic that also OP is implicitly making the argument for GraphQL-like interfaces (&quot;just specify the data that you want returned&quot; rather than &quot;get all the data, then process it&quot;), which are themselves the New Hotness in some areas.</div><br/><div id="37528686" class="c"><input type="checkbox" id="c-37528686" checked=""/><div class="controls bullet"><span class="by">thekashifmalik</span><span>|</span><a href="#37526386">root</a><span>|</span><a href="#37528216">parent</a><span>|</span><a href="#37527757">next</a><span>|</span><label class="collapse" for="c-37528686">[-]</label><label class="expand" for="c-37528686">[2 more]</label></div><br/><div class="children"><div class="content">At risk of sounding pedantic, REST also allows for &quot;just specify the data that you want returned&quot; style APIs.<p>Something like:<p><pre><code>    curl https:&#x2F;&#x2F;www.ecb.europa.eu&#x2F;stats&#x2F;eurofxref&#x2F;api?fields=Date&amp;order=USD&amp;limit=1</code></pre></div><br/><div id="37528975" class="c"><input type="checkbox" id="c-37528975" checked=""/><div class="controls bullet"><span class="by">scubbo</span><span>|</span><a href="#37526386">root</a><span>|</span><a href="#37528686">parent</a><span>|</span><a href="#37527757">next</a><span>|</span><label class="collapse" for="c-37528975">[-]</label><label class="expand" for="c-37528975">[1 more]</label></div><br/><div class="children"><div class="content">A very fair point well-made!</div><br/></div></div></div></div></div></div></div></div><div id="37527757" class="c"><input type="checkbox" id="c-37527757" checked=""/><div class="controls bullet"><span class="by">Telemakhos</span><span>|</span><a href="#37526386">parent</a><span>|</span><a href="#37527222">prev</a><span>|</span><a href="#37529366">next</a><span>|</span><label class="collapse" for="c-37527757">[-]</label><label class="expand" for="c-37527757">[1 more]</label></div><br/><div class="children"><div class="content">I think a lot of people in this thread are glossing over a difference in definitions. Some people see &quot;API&quot; as &quot;how to get data, even if that means all data with no filtering.&quot; Personally, I regard downloading an entire table as downloading a data model without any logic operating on the model, and an API as logic that returns only part of the model filtered in some way that interests me.</div><br/></div></div><div id="37529366" class="c"><input type="checkbox" id="c-37529366" checked=""/><div class="controls bullet"><span class="by">berkes</span><span>|</span><a href="#37526386">parent</a><span>|</span><a href="#37527757">prev</a><span>|</span><a href="#37526469">next</a><span>|</span><label class="collapse" for="c-37529366">[-]</label><label class="expand" for="c-37529366">[1 more]</label></div><br/><div class="children"><div class="content">Why do you assume that 565KB even matters?<p>I&#x27;ve been building loads of financial software, both back and front ends. In frontend world it, sadly is quite common to send that amount of &quot;data&quot; over wires before even getting to actual data<p>And in backends it&#x27;s really a design decision. There&#x27;s nothing faster than a Cron job parsing echange rates nightly and writing them to a purpose designed todays-rates.json served as static file to your mobile, web or microservices apps.<p>Nothing implies your mobile app has to consume this zip-csv_over_http</div><br/></div></div><div id="37526469" class="c"><input type="checkbox" id="c-37526469" checked=""/><div class="controls bullet"><span class="by">theLiminator</span><span>|</span><a href="#37526386">parent</a><span>|</span><a href="#37529366">prev</a><span>|</span><a href="#37526552">next</a><span>|</span><label class="collapse" for="c-37526469">[-]</label><label class="expand" for="c-37526469">[6 more]</label></div><br/><div class="children"><div class="content">They should ship parquet, supports predicate pushdown and is dramatically more compact, while you can&#x27;t get row level data, it&#x27;s great for analytical queries.</div><br/><div id="37526755" class="c"><input type="checkbox" id="c-37526755" checked=""/><div class="controls bullet"><span class="by">RobinL</span><span>|</span><a href="#37526386">root</a><span>|</span><a href="#37526469">parent</a><span>|</span><a href="#37527772">next</a><span>|</span><label class="collapse" for="c-37526755">[-]</label><label class="expand" for="c-37526755">[2 more]</label></div><br/><div class="children"><div class="content">Totally agree!  So much that I wrote a whole article about it a while back!<p>&quot;Why parquet files are my preferred API for bulk open data&quot;
<a href="https:&#x2F;&#x2F;www.robinlinacre.com&#x2F;parquet_api&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.robinlinacre.com&#x2F;parquet_api&#x2F;</a></div><br/><div id="37527909" class="c"><input type="checkbox" id="c-37527909" checked=""/><div class="controls bullet"><span class="by">swader999</span><span>|</span><a href="#37526386">root</a><span>|</span><a href="#37526755">parent</a><span>|</span><a href="#37527772">next</a><span>|</span><label class="collapse" for="c-37527909">[-]</label><label class="expand" for="c-37527909">[1 more]</label></div><br/><div class="children"><div class="content">Parquet is a level better than csv but difficult to get customers to adopt and transmit in that format.</div><br/></div></div></div></div><div id="37527772" class="c"><input type="checkbox" id="c-37527772" checked=""/><div class="controls bullet"><span class="by">calpaterson</span><span>|</span><a href="#37526386">root</a><span>|</span><a href="#37526469">parent</a><span>|</span><a href="#37526755">prev</a><span>|</span><a href="#37526599">next</a><span>|</span><label class="collapse" for="c-37527772">[-]</label><label class="expand" for="c-37527772">[2 more]</label></div><br/><div class="children"><div class="content">csvbase does ship parquet!<p>Just add &quot;.parquet&quot; - eg <a href="https:&#x2F;&#x2F;csvbase.com&#x2F;meripaterson&#x2F;stock-exchanges.parquet" rel="nofollow noreferrer">https:&#x2F;&#x2F;csvbase.com&#x2F;meripaterson&#x2F;stock-exchanges.parquet</a></div><br/><div id="37528667" class="c"><input type="checkbox" id="c-37528667" checked=""/><div class="controls bullet"><span class="by">theLiminator</span><span>|</span><a href="#37526386">root</a><span>|</span><a href="#37527772">parent</a><span>|</span><a href="#37526599">next</a><span>|</span><label class="collapse" for="c-37528667">[-]</label><label class="expand" for="c-37528667">[1 more]</label></div><br/><div class="children"><div class="content">Nice!</div><br/></div></div></div></div><div id="37526599" class="c"><input type="checkbox" id="c-37526599" checked=""/><div class="controls bullet"><span class="by">IanCal</span><span>|</span><a href="#37526386">root</a><span>|</span><a href="#37526469">parent</a><span>|</span><a href="#37527772">prev</a><span>|</span><a href="#37526552">next</a><span>|</span><label class="collapse" for="c-37526599">[-]</label><label class="expand" for="c-37526599">[1 more]</label></div><br/><div class="children"><div class="content">IMO this is the best simple option right now.<p>For sorted data you only need the relevant row groups which can be tunable to sensible sizes for your data and access pattern.</div><br/></div></div></div></div><div id="37526552" class="c"><input type="checkbox" id="c-37526552" checked=""/><div class="controls bullet"><span class="by">netsharc</span><span>|</span><a href="#37526386">parent</a><span>|</span><a href="#37526469">prev</a><span>|</span><a href="#37526456">next</a><span>|</span><label class="collapse" for="c-37526552">[-]</label><label class="expand" for="c-37526552">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;m an old fart, seeing the curl in every example is like nails on chalkboard.<p>565 KB, that&#x27;s about 3 minutes download on a 28.8kbps modem I started getting online with...</div><br/><div id="37527193" class="c"><input type="checkbox" id="c-37527193" checked=""/><div class="controls bullet"><span class="by">zamadatix</span><span>|</span><a href="#37526386">root</a><span>|</span><a href="#37526552">parent</a><span>|</span><a href="#37526456">next</a><span>|</span><label class="collapse" for="c-37527193">[-]</label><label class="expand" for="c-37527193">[1 more]</label></div><br/><div class="children"><div class="content">When you got that modem were you concerned with how long it would have taken to type&#x2F;write the information sent over it or were you just happy it didn&#x27;t matter anymore?<p>I often wonder what I&#x27;ll think of technology in say another 20 years but I can never tell if it&#x27;s all just some general shift in perspective or, as you look farther back, if certain people were always just about a certain perspective (e.g. doing the most given the constraints) and technology changes enough that different perspectives (e.g. getting the most done easily for the same unit of human time) become the most common users for the newer stuff and that these people will also have a different perspective than the ones another 20 years down the line from them and so on.<p>For example, maybe you think it&#x27;s crazy to ask for the exact piece of data you need, I think it&#x27;s crazy to do all the work to not just grab the whole half MB and just extract what you need quickly on the client side as often as you want, and someone equidistant from me will think it&#x27;s nuts to not just feed all the data into their AI tool and ask it &quot;what is the data for ${thing}&quot; instead of caring about how the data gets delivered at all. Or maybe that&#x27;s just something I hope for because I don&#x27;t want to end up a guy who says everything is the same just done slower on faster computers since that seems... depressing in comparison :).</div><br/></div></div></div></div><div id="37526456" class="c"><input type="checkbox" id="c-37526456" checked=""/><div class="controls bullet"><span class="by">smallpipe</span><span>|</span><a href="#37526386">parent</a><span>|</span><a href="#37526552">prev</a><span>|</span><a href="#37526544">next</a><span>|</span><label class="collapse" for="c-37526456">[-]</label><label class="expand" for="c-37526456">[3 more]</label></div><br/><div class="children"><div class="content">How much data do I need to download before I can do a protobuf request ?</div><br/><div id="37530117" class="c"><input type="checkbox" id="c-37530117" checked=""/><div class="controls bullet"><span class="by">crazygringo</span><span>|</span><a href="#37526386">root</a><span>|</span><a href="#37526456">parent</a><span>|</span><a href="#37526612">next</a><span>|</span><label class="collapse" for="c-37530117">[-]</label><label class="expand" for="c-37530117">[1 more]</label></div><br/><div class="children"><div class="content">Mass transit files are often a single protobuf file that is like a megabyte or something.<p>I&#x27;m talking about zipped CSV files as easier to use than protobuf files. Neither is a request in this comparison.</div><br/></div></div><div id="37526612" class="c"><input type="checkbox" id="c-37526612" checked=""/><div class="controls bullet"><span class="by">eddythompson80</span><span>|</span><a href="#37526386">root</a><span>|</span><a href="#37526456">parent</a><span>|</span><a href="#37530117">prev</a><span>|</span><a href="#37526544">next</a><span>|</span><label class="collapse" for="c-37526612">[-]</label><label class="expand" for="c-37526612">[1 more]</label></div><br/><div class="children"><div class="content">Are you counting the client size? TLS handshake? Because otherwise the answer is none.</div><br/></div></div></div></div><div id="37526544" class="c"><input type="checkbox" id="c-37526544" checked=""/><div class="controls bullet"><span class="by">mhh__</span><span>|</span><a href="#37526386">parent</a><span>|</span><a href="#37526456">prev</a><span>|</span><a href="#37526588">next</a><span>|</span><label class="collapse" for="c-37526544">[-]</label><label class="expand" for="c-37526544">[1 more]</label></div><br/><div class="children"><div class="content">But what if I want the average over time? The query depends on every value, should everything be computed on the server?</div><br/></div></div><div id="37526588" class="c"><input type="checkbox" id="c-37526588" checked=""/><div class="controls bullet"><span class="by">maxbond</span><span>|</span><a href="#37526386">parent</a><span>|</span><a href="#37526544">prev</a><span>|</span><a href="#37529945">next</a><span>|</span><label class="collapse" for="c-37526588">[-]</label><label class="expand" for="c-37526588">[1 more]</label></div><br/><div class="children"><div class="content">Here&#x27;s an API built on top of this data that allows for more fine tuned queries.<p><a href="https:&#x2F;&#x2F;exchangeratesapi.io&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;exchangeratesapi.io&#x2F;</a><p><a href="https:&#x2F;&#x2F;github.com&#x2F;exchangeratesapi&#x2F;exchangeratesapi">https:&#x2F;&#x2F;github.com&#x2F;exchangeratesapi&#x2F;exchangeratesapi</a></div><br/></div></div><div id="37529945" class="c"><input type="checkbox" id="c-37529945" checked=""/><div class="controls bullet"><span class="by">dang</span><span>|</span><a href="#37526386">parent</a><span>|</span><a href="#37526588">prev</a><span>|</span><a href="#37526592">next</a><span>|</span><label class="collapse" for="c-37529945">[-]</label><label class="expand" for="c-37529945">[1 more]</label></div><br/><div class="children"><div class="content">&gt; (So the article is cool, it&#x27;s just the headline that&#x27;s too much of a &quot;hot take&quot; for me.)<p>It&#x27;s one of those headlines that we&#x27;d never allow if it were an editorialization by the submitter (even if the submitter were the author, in this case), but since it&#x27;s the article&#x27;s own subtitle, it&#x27;s ok. A bit baity but more in a whimsical than a hardened-shameless way.<p>(I&#x27;m sure you probably noticed this but I thought the gloss might be interesting)</div><br/></div></div><div id="37526592" class="c"><input type="checkbox" id="c-37526592" checked=""/><div class="controls bullet"><span class="by">Hamuko</span><span>|</span><a href="#37526386">parent</a><span>|</span><a href="#37529945">prev</a><span>|</span><a href="#37526669">next</a><span>|</span><label class="collapse" for="c-37526592">[-]</label><label class="expand" for="c-37526592">[3 more]</label></div><br/><div class="children"><div class="content">How much bandwidth does the average API documentation page use?</div><br/><div id="37526621" class="c"><input type="checkbox" id="c-37526621" checked=""/><div class="controls bullet"><span class="by">eddythompson80</span><span>|</span><a href="#37526386">root</a><span>|</span><a href="#37526592">parent</a><span>|</span><a href="#37526669">next</a><span>|</span><label class="collapse" for="c-37526621">[-]</label><label class="expand" for="c-37526621">[2 more]</label></div><br/><div class="children"><div class="content">Does your client query the API documentation every time it&#x27;s querying an API?</div><br/><div id="37527400" class="c"><input type="checkbox" id="c-37527400" checked=""/><div class="controls bullet"><span class="by">ajcp</span><span>|</span><a href="#37526386">root</a><span>|</span><a href="#37526621">parent</a><span>|</span><a href="#37526669">next</a><span>|</span><label class="collapse" for="c-37527400">[-]</label><label class="expand" for="c-37527400">[1 more]</label></div><br/><div class="children"><div class="content">Well of course it does; how else would it know how to query the API? &#x2F;s</div><br/></div></div></div></div></div></div></div></div><div id="37526669" class="c"><input type="checkbox" id="c-37526669" checked=""/><div class="controls bullet"><span class="by">lovasoa</span><span>|</span><a href="#37526386">prev</a><span>|</span><a href="#37527194">next</a><span>|</span><label class="collapse" for="c-37526669">[-]</label><label class="expand" for="c-37526669">[4 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>    &gt;  curl -s https:&#x2F;&#x2F;www.ecb.europa.eu&#x2F;stats&#x2F;eurofxref&#x2F;eurofxref-hist.zip | gunzip | sqlite3 &#x27;:memory:&#x27; &#x27;.import &#x2F;dev&#x2F;stdin stdin&#x27;   &quot;select Date from stdin order by USD asc limit 1;&quot;
    Error: in prepare, no such column: Date (1)

</code></pre>
There is a typo in the example (that is not in the screenshot): you need to add a -csv argument to sqlite.</div><br/><div id="37527170" class="c"><input type="checkbox" id="c-37527170" checked=""/><div class="controls bullet"><span class="by">calpaterson</span><span>|</span><a href="#37526669">parent</a><span>|</span><a href="#37527194">next</a><span>|</span><label class="collapse" for="c-37527170">[-]</label><label class="expand" for="c-37527170">[3 more]</label></div><br/><div class="children"><div class="content">This is odd, I did originally have that argument but I removed it because it didn&#x27;t seem to matter - it works without (&quot;On My Machine&quot;(tm))<p>Erk - readding it and busting the cache.  After I put my kids to bed I will figure out what is wrong<p>EDIT: the reason it works for me is because I&#x27;ve got this config in ~&#x2F;.sqliterc:<p><pre><code>    .separator &#x27;,&#x27;
</code></pre>
Apparently at some point in the past I realised that I mostly insert csv files into it and set that default.</div><br/><div id="37527571" class="c"><input type="checkbox" id="c-37527571" checked=""/><div class="controls bullet"><span class="by">c7b</span><span>|</span><a href="#37526669">root</a><span>|</span><a href="#37527170">parent</a><span>|</span><a href="#37527194">next</a><span>|</span><label class="collapse" for="c-37527571">[-]</label><label class="expand" for="c-37527571">[2 more]</label></div><br/><div class="children"><div class="content">Generally curious - any particular reasons you chose sqlite and gnuplot for this task rather than, say, Python?</div><br/><div id="37527750" class="c"><input type="checkbox" id="c-37527750" checked=""/><div class="controls bullet"><span class="by">calpaterson</span><span>|</span><a href="#37526669">root</a><span>|</span><a href="#37527571">parent</a><span>|</span><a href="#37527194">next</a><span>|</span><label class="collapse" for="c-37527750">[-]</label><label class="expand" for="c-37527750">[1 more]</label></div><br/><div class="children"><div class="content">I do also use Python (pandas) partway down the page :)  I&#x27;m just trying to show different tools to give people ideas about how much is possible with stuff that is already in &#x2F;usr&#x2F;bin&#x2F;<p>If you were to ask my own tool preferences which I use for $DAYJOB: pandas for data cleaning and small data because I think that dataframes are genuinely a good API.  I use SQL for larger datasets and I am not keen on matplotlib but still use it for graphs I have to show to other people.</div><br/></div></div></div></div></div></div></div></div><div id="37527194" class="c"><input type="checkbox" id="c-37527194" checked=""/><div class="controls bullet"><span class="by">taldo</span><span>|</span><a href="#37526669">prev</a><span>|</span><a href="#37532006">next</a><span>|</span><label class="collapse" for="c-37527194">[-]</label><label class="expand" for="c-37527194">[4 more]</label></div><br/><div class="children"><div class="content">A very simple optimization for those complaining about having to fetch a large file every time you need a little datapoint: if they promised the file was append-only, and used HTTP gzip&#x2F;brotli&#x2F;whatever compression (as opposed to shipping a zip file), you could use range requests to only get the new data after your last refresh. Throw in an extra checksum header for peace of mind, and you have a pretty efficient, yet extremely simple incremental API.<p>(Yes, this assumes you keep the state, and you have to pay the price of the first download + state-keeping. Yes, it&#x27;s also inefficient if you just need to get the EUR&#x2F;JPY rate from 2007-08-22 a single time.)</div><br/><div id="37527230" class="c"><input type="checkbox" id="c-37527230" checked=""/><div class="controls bullet"><span class="by">calpaterson</span><span>|</span><a href="#37527194">parent</a><span>|</span><a href="#37530244">next</a><span>|</span><label class="collapse" for="c-37527230">[-]</label><label class="expand" for="c-37527230">[1 more]</label></div><br/><div class="children"><div class="content">Absolutely!  I have a plan for a client lib that uses ETags (+ other tricks) to do just that.<p>Very WIP but check out my current &quot;research quality&quot; code here: <a href="https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;csvbase-client&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;csvbase-client&#x2F;</a></div><br/></div></div><div id="37530244" class="c"><input type="checkbox" id="c-37530244" checked=""/><div class="controls bullet"><span class="by">GuB-42</span><span>|</span><a href="#37527194">parent</a><span>|</span><a href="#37527230">prev</a><span>|</span><a href="#37529759">next</a><span>|</span><label class="collapse" for="c-37530244">[-]</label><label class="expand" for="c-37530244">[1 more]</label></div><br/><div class="children"><div class="content">Or, just serve a bunch of diff files. Just having a single daily patch can drastically reduce the bandwidth required to keep the file up to date on your side.<p>That&#x27;s if downloading a few hundred kB more per day matters to you. It probably doesn&#x27;t.</div><br/></div></div><div id="37529759" class="c"><input type="checkbox" id="c-37529759" checked=""/><div class="controls bullet"><span class="by">acqq</span><span>|</span><a href="#37527194">parent</a><span>|</span><a href="#37530244">prev</a><span>|</span><a href="#37532006">next</a><span>|</span><label class="collapse" for="c-37529759">[-]</label><label class="expand" for="c-37529759">[1 more]</label></div><br/><div class="children"><div class="content">Also, on the topic of range requests, when a server allows the range requests for zip files, the zip files are huge and one needs just a few files from them, one can actually download just the &quot;central directory&quot; and the compressed data of the needed files without downloading the whole zip file:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;gtsystem&#x2F;python-remotezip">https:&#x2F;&#x2F;github.com&#x2F;gtsystem&#x2F;python-remotezip</a></div><br/></div></div></div></div><div id="37532006" class="c"><input type="checkbox" id="c-37532006" checked=""/><div class="controls bullet"><span class="by">Joel_Mckay</span><span>|</span><a href="#37527194">prev</a><span>|</span><a href="#37533021">next</a><span>|</span><label class="collapse" for="c-37532006">[-]</label><label class="expand" for="c-37532006">[3 more]</label></div><br/><div class="children"><div class="content">There are several reasons a compressed archive isn&#x27;t a good data format outside trusted backups.<p>1. inconsistent binary formats, float precision edge conditions, and unknown Endianness.  Thus, assuming the Marshalling of some document is reliable is risky&#x2F;fragile, so pick some standard your partners also support...  try XML&#x2F;XSLT, BSON, JSON, SOAP, AMQP+why, or even EDIFACT.<p>2. &quot;dump and load&quot; is usually inefficient, with an exception when the entire dataset is going to change every time (NOAA weather maps etc.)<p>3. Anyone wise to the 42TiB bzip 18kiB file joke is acutely aware of what compressed files can do to server scripts.<p>4. Tuning firewall traffic-shaping for a web-server is different from a server designed to handle large files.  Too tolerant rules causes persistent DDoS exposure issues, and too strict causes connections to become unreliable when busy&#x2F;slow.<p>5. Anyone that has to deal with CSV files knows how many proprietary interpretations of a simple document format emerge.<p>Best of luck, and remember to have fun =)</div><br/><div id="37532139" class="c"><input type="checkbox" id="c-37532139" checked=""/><div class="controls bullet"><span class="by">isoprophlex</span><span>|</span><a href="#37532006">parent</a><span>|</span><a href="#37533021">next</a><span>|</span><label class="collapse" for="c-37532139">[-]</label><label class="expand" for="c-37532139">[2 more]</label></div><br/><div class="children"><div class="content">About your Point 5, let me tell you about the ESV file format: Eggplant Separated Values! Who needs escaping if you have the eggplant emoji!</div><br/><div id="37532319" class="c"><input type="checkbox" id="c-37532319" checked=""/><div class="controls bullet"><span class="by">Joel_Mckay</span><span>|</span><a href="#37532006">root</a><span>|</span><a href="#37532139">parent</a><span>|</span><a href="#37533021">next</a><span>|</span><label class="collapse" for="c-37532319">[-]</label><label class="expand" for="c-37532319">[1 more]</label></div><br/><div class="children"><div class="content">My favorite was console control-characters accidentally embedded in plain text by cross-platform document code-page encoding errors.<p>One learns over the years that every program stage&#x2F;interface must sanitize input, sanity check formats, and isolate data on a per account log.<p>Did the user intend &quot;P=0&#x2F;O&quot; as a joke... we&#x27;ll never know. =)</div><br/></div></div></div></div></div></div><div id="37533021" class="c"><input type="checkbox" id="c-37533021" checked=""/><div class="controls bullet"><span class="by">hamilyon2</span><span>|</span><a href="#37532006">prev</a><span>|</span><a href="#37526260">next</a><span>|</span><label class="collapse" for="c-37533021">[-]</label><label class="expand" for="c-37533021">[1 more]</label></div><br/><div class="children"><div class="content">If your data is somewhat sparse, somewhat hierarchical or have evolving&#x2F;amorphous schema, gzipped jsonl is better. Jsonl is supposed by clickhouse and jq and a bit more consistent around escaping&#x2F;delimiting</div><br/></div></div><div id="37526260" class="c"><input type="checkbox" id="c-37526260" checked=""/><div class="controls bullet"><span class="by">Waterluvian</span><span>|</span><a href="#37533021">prev</a><span>|</span><a href="#37526376">next</a><span>|</span><label class="collapse" for="c-37526260">[-]</label><label class="expand" for="c-37526260">[2 more]</label></div><br/><div class="children"><div class="content">For little problems where you can just download the entire database every time and do read-only work, never underestimate the value of keeping it simple! I really like SQLite for this because it has the portability of a .Json or .csv file but it’s more ready to interact with as a database.</div><br/><div id="37526572" class="c"><input type="checkbox" id="c-37526572" checked=""/><div class="controls bullet"><span class="by">semi-extrinsic</span><span>|</span><a href="#37526260">parent</a><span>|</span><a href="#37526376">next</a><span>|</span><label class="collapse" for="c-37526572">[-]</label><label class="expand" for="c-37526572">[1 more]</label></div><br/><div class="children"><div class="content">Just use clickhouse-local, and you can interact with any old CSV file as if it was a database.</div><br/></div></div></div></div><div id="37526376" class="c"><input type="checkbox" id="c-37526376" checked=""/><div class="controls bullet"><span class="by">AceJohnny2</span><span>|</span><a href="#37526260">prev</a><span>|</span><a href="#37532934">next</a><span>|</span><label class="collapse" for="c-37526376">[-]</label><label class="expand" for="c-37526376">[3 more]</label></div><br/><div class="children"><div class="content">Key point:<p>&gt; <i>Some things we didn&#x27;t have to do in this case: negotiate access (for example by paying money or talking to a salesman); deposit our email address&#x2F;company name&#x2F;job title into someone&#x27;s database of qualified leads, observe any quota; authenticate (often a substantial side-quest of its own), read any API docs at all or deal with any issues more serious than basic formatting and shape.</i></div><br/><div id="37526774" class="c"><input type="checkbox" id="c-37526774" checked=""/><div class="controls bullet"><span class="by">lovasoa</span><span>|</span><a href="#37526376">parent</a><span>|</span><a href="#37532934">next</a><span>|</span><label class="collapse" for="c-37526774">[-]</label><label class="expand" for="c-37526774">[2 more]</label></div><br/><div class="children"><div class="content">I am skeptical about the &quot;observe any quota&quot; part. Bandwidth is not free.</div><br/><div id="37530912" class="c"><input type="checkbox" id="c-37530912" checked=""/><div class="controls bullet"><span class="by">hatthew</span><span>|</span><a href="#37526376">root</a><span>|</span><a href="#37526774">parent</a><span>|</span><a href="#37532934">next</a><span>|</span><label class="collapse" for="c-37530912">[-]</label><label class="expand" for="c-37530912">[1 more]</label></div><br/><div class="children"><div class="content">There probably is a quota of some sort, but since there&#x27;s no reason to download the file very often, it&#x27;s probably not a quota you need to worry about.</div><br/></div></div></div></div></div></div><div id="37532934" class="c"><input type="checkbox" id="c-37532934" checked=""/><div class="controls bullet"><span class="by">pietz</span><span>|</span><a href="#37526376">prev</a><span>|</span><a href="#37526865">next</a><span>|</span><label class="collapse" for="c-37532934">[-]</label><label class="expand" for="c-37532934">[1 more]</label></div><br/><div class="children"><div class="content">Just thinking out loud: If we make the zip file a parquet file, wouldn&#x27;t we be able to do partial downloads (like getting the first 1000 lines) instead of getting the whole file every single time?</div><br/></div></div><div id="37526865" class="c"><input type="checkbox" id="c-37526865" checked=""/><div class="controls bullet"><span class="by">pharrington</span><span>|</span><a href="#37532934">prev</a><span>|</span><a href="#37526277">next</a><span>|</span><label class="collapse" for="c-37526865">[-]</label><label class="expand" for="c-37526865">[1 more]</label></div><br/><div class="children"><div class="content">Yeah having a local snapshot of an entire dataset is obviously nice when it&#x27;s feasible. But there&#x27;s no need to conflate that with &quot;application programming interface&quot; just to market csvbase.</div><br/></div></div><div id="37526277" class="c"><input type="checkbox" id="c-37526277" checked=""/><div class="controls bullet"><span class="by">lxgr</span><span>|</span><a href="#37526865">prev</a><span>|</span><a href="#37530853">next</a><span>|</span><label class="collapse" for="c-37526277">[-]</label><label class="expand" for="c-37526277">[8 more]</label></div><br/><div class="children"><div class="content">The example is failing at decompression for me, and I suspect it&#x27;s because of this:<p>&gt; That data comes as a zipfile, which gunzip will decompress.<p>Doesn&#x27;t gunzip expect gzip files, as opposed to ZIP (i.e. .zip) files?<p>On Linux I get further (apparently Linux gunzip is more tolerant of the format error than the macOS default one), but there, I then run into:<p>&gt; Error: no such column: Date</div><br/><div id="37526342" class="c"><input type="checkbox" id="c-37526342" checked=""/><div class="controls bullet"><span class="by">halJordan</span><span>|</span><a href="#37526277">parent</a><span>|</span><a href="#37526410">next</a><span>|</span><label class="collapse" for="c-37526342">[-]</label><label class="expand" for="c-37526342">[1 more]</label></div><br/><div class="children"><div class="content">Here&#x27;s the gzipped tarball of the docs you can read to find out<p><a href="https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;gzip&#x2F;manual&#x2F;gzip.txt.gz" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;gzip&#x2F;manual&#x2F;gzip.txt.gz</a></div><br/></div></div><div id="37526410" class="c"><input type="checkbox" id="c-37526410" checked=""/><div class="controls bullet"><span class="by">jandrese</span><span>|</span><a href="#37526277">parent</a><span>|</span><a href="#37526342">prev</a><span>|</span><a href="#37526418">next</a><span>|</span><label class="collapse" for="c-37526410">[-]</label><label class="expand" for="c-37526410">[3 more]</label></div><br/><div class="children"><div class="content">This is slightly abusive of gunzip, but it does work, but only because the zipfile in question only contains a single file and you are piping it in via shell.  If you had tried to download the file and then run gunzip on it the program would have refused.<p>As for the second error, I think you might be trying to import an empty file or maybe an error message?  Probably related to the first problem.</div><br/><div id="37526504" class="c"><input type="checkbox" id="c-37526504" checked=""/><div class="controls bullet"><span class="by">lxgr</span><span>|</span><a href="#37526277">root</a><span>|</span><a href="#37526410">parent</a><span>|</span><a href="#37526799">next</a><span>|</span><label class="collapse" for="c-37526504">[-]</label><label class="expand" for="c-37526504">[1 more]</label></div><br/><div class="children"><div class="content">&gt; but it does work<p>Only on some gzip implementations, e.g. the one shipping with many Linux distributions. It doesn&#x27;t work on macOS, for example.</div><br/></div></div><div id="37526799" class="c"><input type="checkbox" id="c-37526799" checked=""/><div class="controls bullet"><span class="by">lovasoa</span><span>|</span><a href="#37526277">root</a><span>|</span><a href="#37526410">parent</a><span>|</span><a href="#37526504">prev</a><span>|</span><a href="#37526418">next</a><span>|</span><label class="collapse" for="c-37526799">[-]</label><label class="expand" for="c-37526799">[1 more]</label></div><br/><div class="children"><div class="content">the second error is because you need to add a `-csv` argument to sqlite</div><br/></div></div></div></div><div id="37526418" class="c"><input type="checkbox" id="c-37526418" checked=""/><div class="controls bullet"><span class="by">pixl97</span><span>|</span><a href="#37526277">parent</a><span>|</span><a href="#37526410">prev</a><span>|</span><a href="#37528008">next</a><span>|</span><label class="collapse" for="c-37526418">[-]</label><label class="expand" for="c-37526418">[2 more]</label></div><br/><div class="children"><div class="content">At least in Ubuntu it doesn&#x27;t do anything at all.<p># gunzip -d master.zip
gunzip: master.zip: unknown suffix -- ignored</div><br/><div id="37526524" class="c"><input type="checkbox" id="c-37526524" checked=""/><div class="controls bullet"><span class="by">lxgr</span><span>|</span><a href="#37526277">root</a><span>|</span><a href="#37526418">parent</a><span>|</span><a href="#37528008">next</a><span>|</span><label class="collapse" for="c-37526524">[-]</label><label class="expand" for="c-37526524">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a ZIP file, so you&#x27;ll want to use unzip, not gunzip.<p>Ubuntu&#x27;s version of g(un)zip actually does tolerate ZIP inputs though; for that usage, just omit the &#x27;-d&#x27;.</div><br/></div></div></div></div></div></div><div id="37530853" class="c"><input type="checkbox" id="c-37530853" checked=""/><div class="controls bullet"><span class="by">nextaccountic</span><span>|</span><a href="#37526277">prev</a><span>|</span><a href="#37530220">next</a><span>|</span><label class="collapse" for="c-37530853">[-]</label><label class="expand" for="c-37530853">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Although pulling out a simple max is easy, the data shape is not ideal. It&#x27;s in &quot;wide&quot; format - a Date column, and then an extra column for every currency. Here&#x27;s the csv header for that file:<p>&gt; Date,USD,JPY,BGN,CYP,CZK,DKK,EEK,GBP,HUF,LTL,LVL,MTL,[and on, and on]<p>&gt; When doing filters and aggregations, life is easier if the data is in &quot;long&quot; format, like this:<p>&gt; Date,Currency,Rate<p>&gt; Switching from wide to long is a simple operation, commonly called a &quot;melt&quot;. Unfortunately, it&#x27;s not available in SQL.<p>&gt; No matter, you can melt with pandas:<p>&gt; curl -s <a href="https:&#x2F;&#x2F;www.ecb.europa.eu&#x2F;stats&#x2F;eurofxref&#x2F;eurofxref-hist.zip" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.ecb.europa.eu&#x2F;stats&#x2F;eurofxref&#x2F;eurofxref-hist.zip</a> | \
gunzip | \
&gt; python3 -c &#x27;import sys, pandas as pd
&gt; pd.read_csv(sys.stdin).melt(&quot;Date&quot;).to_csv(sys.stdout, index=False)&#x27;<p>You sure this can&#x27;t be done in SQL? I myself don&#x27;t know enough SQL, but I believe that you can decompose a single row into multiple rows in SQL by joining multiple queries using UNION ALL:<p><a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;46217564&#x2F;converting-single-row-into-multiple-rows-based-on-values-in-columns" rel="nofollow noreferrer">https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;46217564&#x2F;converting-sing...</a><p><a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;52279384&#x2F;how-do-i-melt-a-sql-table" rel="nofollow noreferrer">https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;52279384&#x2F;how-do-i-melt-a...</a><p>Now the question is, how to make this less verbose (so that the query doesn&#x27;t need to mention each of the 42 columns)</div><br/><div id="37531971" class="c"><input type="checkbox" id="c-37531971" checked=""/><div class="controls bullet"><span class="by">tbrownaw</span><span>|</span><a href="#37530853">parent</a><span>|</span><a href="#37530220">next</a><span>|</span><label class="collapse" for="c-37531971">[-]</label><label class="expand" for="c-37531971">[1 more]</label></div><br/><div class="children"><div class="content">That sounds like PIVOT and UNPIVOT. But of course being SQL you have to list all the columns explicitly, which can get kind of annoying.</div><br/></div></div></div></div><div id="37530220" class="c"><input type="checkbox" id="c-37530220" checked=""/><div class="controls bullet"><span class="by">mrighele</span><span>|</span><a href="#37530853">prev</a><span>|</span><a href="#37530211">next</a><span>|</span><label class="collapse" for="c-37530220">[-]</label><label class="expand" for="c-37530220">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Switching from wide to long is a simple operation, commonly called a &quot;melt&quot;. Unfortunately, it&#x27;s not available in SQL.<p>That&#x27;s not completely true. In most SQL databases you can query information about the table, and this is true for Sqlite too. You cannot use this information to have a query with a &quot;dynamic&quot; number of columns, but you can always generate the query from the metadata and then executed the generated queries. It is not exactly fun to do as a one-liner, but it works:<p>&gt; curl &#x27;<a href="https:&#x2F;&#x2F;www.ecb.europa.eu&#x2F;stats&#x2F;eurofxref&#x2F;eurofxref-hist.csv" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.ecb.europa.eu&#x2F;stats&#x2F;eurofxref&#x2F;eurofxref-hist.csv</a>&#x27; | sqlite3 -csv &#x27;:memory:&#x27; &#x27;.import &#x2F;dev&#x2F;stdin stdin&#x27; &#x27;.mode list&#x27; &#x27;.output query.sql&#x27; &quot;select &#x27;select Date, &#x27;&#x27;&#x27; || name || &#x27;&#x27;&#x27;, &#x27; || name || &#x27; from stdin ;&#x27; from pragma_table_info(&#x27;stdin&#x27;) where cid &gt; 0 and cid &lt; 42;&quot; &#x27;.output stdout&#x27; &#x27;.mode csv&#x27; &#x27;.read query.sql&#x27;<p>(yes, you&#x27;re also left with some temporary file on the computer).</div><br/></div></div><div id="37532684" class="c"><input type="checkbox" id="c-37532684" checked=""/><div class="controls bullet"><span class="by">emmelaich</span><span>|</span><a href="#37530211">prev</a><span>|</span><a href="#37526326">next</a><span>|</span><label class="collapse" for="c-37532684">[-]</label><label class="expand" for="c-37532684">[1 more]</label></div><br/><div class="children"><div class="content">FWIW, this is absolutely RESTful.<p>Except not versioned I suppose, but if the only version is LATEST, then maybe it is.</div><br/></div></div><div id="37526326" class="c"><input type="checkbox" id="c-37526326" checked=""/><div class="controls bullet"><span class="by">Scene_Cast2</span><span>|</span><a href="#37532684">prev</a><span>|</span><a href="#37527988">next</a><span>|</span><label class="collapse" for="c-37526326">[-]</label><label class="expand" for="c-37526326">[3 more]</label></div><br/><div class="children"><div class="content">There&#x27;s an issue with openly &amp; freely available financial data. It tends to be limited (i.e. you need many sources to answer the questions you want and not just the questions a particular source is able to answer). And if you&#x27;re bringing in different sources of data, each source requires custom fetching and parsing, along with being just annoyingly slightly different from other sources. Even if the value is given on a per-day basis (which is a huge assumption, lots of things like interest rates are published much slower), you have things like &quot;is the value at the start of day, end of day, market close, median? What time zone? Which exchange? What about days when the exchange was closed? What about odd exchange hours or halts?&quot;, &quot;what&#x27;s the date and time format, what&#x27;s the naming convention?&quot;</div><br/><div id="37526472" class="c"><input type="checkbox" id="c-37526472" checked=""/><div class="controls bullet"><span class="by">mhh__</span><span>|</span><a href="#37526326">parent</a><span>|</span><a href="#37526486">next</a><span>|</span><label class="collapse" for="c-37526472">[-]</label><label class="expand" for="c-37526472">[1 more]</label></div><br/><div class="children"><div class="content">This why Bloomberg and friends make money. They&#x27;re a cartel but they at least do both making all this data work together and also transcribe stuff that is written in English into structured data etc (hence their interest in AI)</div><br/></div></div><div id="37526486" class="c"><input type="checkbox" id="c-37526486" checked=""/><div class="controls bullet"><span class="by">mhh__</span><span>|</span><a href="#37526326">parent</a><span>|</span><a href="#37526472">prev</a><span>|</span><a href="#37527988">next</a><span>|</span><label class="collapse" for="c-37526486">[-]</label><label class="expand" for="c-37526486">[1 more]</label></div><br/><div class="children"><div class="content"><i>Target</i> rates aren&#x27;t published very frequently but interest rates themselves are typically daily or better.</div><br/></div></div></div></div><div id="37527988" class="c"><input type="checkbox" id="c-37527988" checked=""/><div class="controls bullet"><span class="by">tomp</span><span>|</span><a href="#37526326">prev</a><span>|</span><a href="#37527926">next</a><span>|</span><label class="collapse" for="c-37527988">[-]</label><label class="expand" for="c-37527988">[6 more]</label></div><br/><div class="children"><div class="content">Interesting.<p>As someone with a lot of data experience, and in particular including financial data (trading team in a hedge fund) I definitely prefer the <i>column</i> format where each currency is its own column.<p>That way it&#x27;s very easy to filter for only the currencies I care about, and common data processing software (e.g. Pandas for Python) natively support columns, so you can get e.g. USDGBP rate simply by dividing two columns.<p>The biggest drawback of `eurofxref-hist` IMO is that it uses EUR as the <i>numeraire</i> (i.e. EUR is always 1), whereas most of the finance world uses USD. (Yeah I know it&#x27;s in the name, it&#x27;s just that I&#x27;d rather use a file with USD-denominated FX rates, if one was available.)</div><br/><div id="37529712" class="c"><input type="checkbox" id="c-37529712" checked=""/><div class="controls bullet"><span class="by">fastasucan</span><span>|</span><a href="#37527988">parent</a><span>|</span><a href="#37529860">next</a><span>|</span><label class="collapse" for="c-37529712">[-]</label><label class="expand" for="c-37529712">[1 more]</label></div><br/><div class="children"><div class="content">Are you really asking for the european central bank to not use its own currency?</div><br/></div></div><div id="37529860" class="c"><input type="checkbox" id="c-37529860" checked=""/><div class="controls bullet"><span class="by">andylynch</span><span>|</span><a href="#37527988">parent</a><span>|</span><a href="#37529712">prev</a><span>|</span><a href="#37528279">next</a><span>|</span><label class="collapse" for="c-37529860">[-]</label><label class="expand" for="c-37529860">[1 more]</label></div><br/><div class="children"><div class="content">But why would the ECB publish its Euro fixings in some other currency?</div><br/></div></div><div id="37528279" class="c"><input type="checkbox" id="c-37528279" checked=""/><div class="controls bullet"><span class="by">dist-epoch</span><span>|</span><a href="#37527988">parent</a><span>|</span><a href="#37529860">prev</a><span>|</span><a href="#37527926">next</a><span>|</span><label class="collapse" for="c-37528279">[-]</label><label class="expand" for="c-37528279">[3 more]</label></div><br/><div class="children"><div class="content">Not sure what you mean by &quot;most of the finance world&quot;, but in forex trading the EUR&#x2F;USD rate is denominated exactly as in this file - 1.066 for today and not the inverse 0.094.</div><br/><div id="37528609" class="c"><input type="checkbox" id="c-37528609" checked=""/><div class="controls bullet"><span class="by">tomp</span><span>|</span><a href="#37527988">root</a><span>|</span><a href="#37528279">parent</a><span>|</span><a href="#37527926">next</a><span>|</span><label class="collapse" for="c-37528609">[-]</label><label class="expand" for="c-37528609">[2 more]</label></div><br/><div class="children"><div class="content">right, I mean quant trading - i.e. where people actually use data :D you want things relatively standardised, which means using a common unit of account - for most funds AFAIK that&#x27;s USD</div><br/><div id="37530747" class="c"><input type="checkbox" id="c-37530747" checked=""/><div class="controls bullet"><span class="by">nly</span><span>|</span><a href="#37527988">root</a><span>|</span><a href="#37528609">parent</a><span>|</span><a href="#37527926">next</a><span>|</span><label class="collapse" for="c-37530747">[-]</label><label class="expand" for="c-37530747">[1 more]</label></div><br/><div class="children"><div class="content">This is my experience as well. Everything is expressed as &#x27;number to multiply by to get USD&#x27; so USDJPY would always be used in-house inverted. British firm as well. Nobody likes the GBP.</div><br/></div></div></div></div></div></div></div></div><div id="37527926" class="c"><input type="checkbox" id="c-37527926" checked=""/><div class="controls bullet"><span class="by">1vuio0pswjnm7</span><span>|</span><a href="#37527988">prev</a><span>|</span><a href="#37526584">next</a><span>|</span><label class="collapse" for="c-37527926">[-]</label><label class="expand" for="c-37527926">[1 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>  curl -s https:&#x2F;&#x2F;www.ecb.europa.eu&#x2F;stats&#x2F;eurofxref&#x2F;eurofxref-hist.zip \
  | gunzip \
  | sqlite3 &#x27;:memory:&#x27; &#x27;.import &#x2F;dev&#x2F;stdin stdin&#x27; \
   &quot;select Date from stdin order by USD asc limit 1;&quot;
</code></pre>
SQLite can read and write zip files.<p><a href="https:&#x2F;&#x2F;sqlite.org&#x2F;zipfile.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;sqlite.org&#x2F;zipfile.html</a><p>Is it possible to use sqlite3 instead of gunzip for decompression.</div><br/></div></div><div id="37526584" class="c"><input type="checkbox" id="c-37526584" checked=""/><div class="controls bullet"><span class="by">mhh__</span><span>|</span><a href="#37527926">prev</a><span>|</span><a href="#37527846">next</a><span>|</span><label class="collapse" for="c-37526584">[-]</label><label class="expand" for="c-37526584">[3 more]</label></div><br/><div class="children"><div class="content">Lots of exchanges and banks still use FTP and and friends to publish data to both the public and counterparties</div><br/><div id="37527945" class="c"><input type="checkbox" id="c-37527945" checked=""/><div class="controls bullet"><span class="by">swader999</span><span>|</span><a href="#37526584">parent</a><span>|</span><a href="#37527578">next</a><span>|</span><label class="collapse" for="c-37527945">[-]</label><label class="expand" for="c-37527945">[1 more]</label></div><br/><div class="children"><div class="content">I would say almost all do, especially the larger ones. Looking at you wells fargo with your tabbed and nested record csv&#x27;s.</div><br/></div></div><div id="37527578" class="c"><input type="checkbox" id="c-37527578" checked=""/><div class="controls bullet"><span class="by">accrual</span><span>|</span><a href="#37526584">parent</a><span>|</span><a href="#37527945">prev</a><span>|</span><a href="#37527846">next</a><span>|</span><label class="collapse" for="c-37527578">[-]</label><label class="expand" for="c-37527578">[1 more]</label></div><br/><div class="children"><div class="content">Indeed, I think ACH (Automated Clearing House) specifically still relies on FTP.</div><br/></div></div></div></div><div id="37527846" class="c"><input type="checkbox" id="c-37527846" checked=""/><div class="controls bullet"><span class="by">swader999</span><span>|</span><a href="#37526584">prev</a><span>|</span><a href="#37527683">next</a><span>|</span><label class="collapse" for="c-37527846">[-]</label><label class="expand" for="c-37527846">[1 more]</label></div><br/><div class="children"><div class="content">Csv is surprisingly common and I prefer it despite parsing, quoting, encoding and escaping woes.<p>Amazon S3 let&#x27;s you query csv files already loaded in buckets which is interesting but I haven&#x27;t used yet.<p>One company I worked at a long time ago used free dropbox accounts as a ftp like drop that they would consume. Was hilarious and it worked well and was easy to stay under the free limits.</div><br/></div></div><div id="37527683" class="c"><input type="checkbox" id="c-37527683" checked=""/><div class="controls bullet"><span class="by">shortrounddev2</span><span>|</span><a href="#37527846">prev</a><span>|</span><a href="#37527726">next</a><span>|</span><label class="collapse" for="c-37527683">[-]</label><label class="expand" for="c-37527683">[5 more]</label></div><br/><div class="children"><div class="content">The site apparently serves .csv directly as well (replace .zip with .csv). I used this to convert the expression to powershell (using only built-in powershell cmdlets and commands):<p><pre><code>    $&gt; (invoke-webrequest &quot;https:&#x2F;&#x2F;www.ecb.europa.eu&#x2F;stats&#x2F;eurofxref&#x2F;eurofxref-hist.csv&quot;).Content
         | ConvertFrom-Csv
         | sort &quot;usd&quot;
         | select &quot;date&quot; -first 1

       Date
       ----
       2000-10-26
</code></pre>
Doing it with a zip file would be a little more verbose since there is no built in &quot;gunzip&quot; type command which operates on streams, but you can write one which does basically that out of built in .Net functions:<p><pre><code>    function ConvertFrom-Zip {
        param(
            [Parameter(Position=0, Mandatory=$true, ValueFromPipeline=$true)]
            [byte[]]$Data
        )
        
        process {
            $memoryStream = [System.IO.MemoryStream]::new($Data)
            $zipArchive = [System.IO.Compression.ZipArchive]::new($memoryStream)
        
            $outputStreams = @()
            
            foreach ($entry in $zipArchive.Entries) {
                $reader = [System.IO.StreamReader]::new($entry.Open())
                $outputStreams += $reader.ReadToEnd()
                $reader.Close()
            }

            $zipArchive.Dispose()
            $memoryStream.Dispose()

            return $outputStreams
        }
    }
</code></pre>
and call it like:<p><pre><code>    # unary &quot;,&quot; operator required to have powershell
    # pipe the byte[] as a single argument rather
    # than piping each byte individually to 
    # ConvertFrom-Zip

    $&gt; ,(invoke-webrequest &quot;https:&#x2F;&#x2F;www.ecb.europa.eu&#x2F;stats&#x2F;eurofxref&#x2F;eurofxref-hist.zip&quot;).Content
         | ConvertFrom-Zip
         | ConvertFrom-Csv
         | sort &quot;usd&quot;
         | select &quot;date&quot; -first 1

       Date
       ----
       2000-10-26
</code></pre>
I love powershell</div><br/><div id="37528558" class="c"><input type="checkbox" id="c-37528558" checked=""/><div class="controls bullet"><span class="by">llimllib</span><span>|</span><a href="#37527683">parent</a><span>|</span><a href="#37527726">next</a><span>|</span><label class="collapse" for="c-37528558">[-]</label><label class="expand" for="c-37528558">[4 more]</label></div><br/><div class="children"><div class="content">Here it is in nushell:<p><pre><code>    &#x2F;tmp&gt; # be kind to the server and only download the file if it&#x27;s updated
    &#x2F;tmp&gt; curl -s -o &#x2F;tmp&#x2F;euro.zip -z &#x2F;tmp&#x2F;euro.zip https:&#x2F;&#x2F;www.ecb.europa.eu&#x2F;stats&#x2F;eurofxref&#x2F;eurofxref-hist.zip
    &#x2F;tmp&gt; unzip -p &#x2F;tmp&#x2F;euro.zip | from csv | select Date USD | sort-by USD | first
    ╭──────┬────────────╮
    │ Date │ 2000-10-26 │
    │ USD  │ 0.83       │
    ╰──────┴────────────╯

</code></pre>
(I removed the pipe to gunzip because 1. gunzip doesn&#x27;t work like that on mac and 2. it&#x27;s not something you should expect to work anyway, zip files often won&#x27;t work like that, they&#x27;re a container and their unzip can&#x27;t normally be streamed)</div><br/><div id="37532731" class="c"><input type="checkbox" id="c-37532731" checked=""/><div class="controls bullet"><span class="by">jwilk</span><span>|</span><a href="#37527683">root</a><span>|</span><a href="#37528558">parent</a><span>|</span><a href="#37529327">next</a><span>|</span><label class="collapse" for="c-37532731">[-]</label><label class="expand" for="c-37532731">[1 more]</label></div><br/><div class="children"><div class="content">This is not a secure use of &#x2F;tmp.</div><br/></div></div><div id="37529327" class="c"><input type="checkbox" id="c-37529327" checked=""/><div class="controls bullet"><span class="by">shortrounddev2</span><span>|</span><a href="#37527683">root</a><span>|</span><a href="#37528558">parent</a><span>|</span><a href="#37532731">prev</a><span>|</span><a href="#37527726">next</a><span>|</span><label class="collapse" for="c-37529327">[-]</label><label class="expand" for="c-37529327">[2 more]</label></div><br/><div class="children"><div class="content">&gt; be kind to the server and only download the file if it&#x27;s updated<p>I wonder if their webserver supports the If-modified-since http header</div><br/><div id="37529690" class="c"><input type="checkbox" id="c-37529690" checked=""/><div class="controls bullet"><span class="by">sltkr</span><span>|</span><a href="#37527683">root</a><span>|</span><a href="#37529327">parent</a><span>|</span><a href="#37527726">next</a><span>|</span><label class="collapse" for="c-37529690">[-]</label><label class="expand" for="c-37529690">[1 more]</label></div><br/><div class="children"><div class="content">You can check with `curl -v`.<p>tl;dr: the server doesn&#x27;t support that header, but since the response does include a Last-Modified header, curl helpfully aborts the transfer if the Last-Modified date is the same as the mtime of the previously downloaded file.</div><br/></div></div></div></div></div></div></div></div><div id="37527726" class="c"><input type="checkbox" id="c-37527726" checked=""/><div class="controls bullet"><span class="by">jakswa</span><span>|</span><a href="#37527683">prev</a><span>|</span><a href="#37530811">next</a><span>|</span><label class="collapse" for="c-37527726">[-]</label><label class="expand" for="c-37527726">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ll throw out the the GTFS transit standard involves publishing zipped CSVs representing your DB tables regularly. There are nice things about it and downsides IMO. This is how google map&#x27;s transit directions function -- they rely on agencies to publish their schedules regularly in zipped CSVs I think.<p>One downside is that dev experience is pretty bad in my opinion. It took me years of fiddling in my free time to realize that if you happen to try to use the CSVs near a schedule change, you don&#x27;t know what data you&#x27;re missing, or that you&#x27;re missing data, until you go to use it. My local agency doesn&#x27;t publish historical CSVs so if you just missed that old CSV and need it, you&#x27;re relying on the community to have a copy somewhere. Similarly, if a schedule change just happened but you failed to download the CSV, you don&#x27;t know until you go to match up IDs in the APIs.</div><br/></div></div><div id="37530811" class="c"><input type="checkbox" id="c-37530811" checked=""/><div class="controls bullet"><span class="by">thibran</span><span>|</span><a href="#37527726">prev</a><span>|</span><a href="#37532468">next</a><span>|</span><label class="collapse" for="c-37530811">[-]</label><label class="expand" for="c-37530811">[1 more]</label></div><br/><div class="children"><div class="content">Too many different tools with weird syntax... once you are used to Nushell, you keep using it :)<p>http get <a href="https:&#x2F;&#x2F;www.ecb.europa.eu&#x2F;stats&#x2F;eurofxref&#x2F;eurofxref-hist.zip" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.ecb.europa.eu&#x2F;stats&#x2F;eurofxref&#x2F;eurofxref-hist.zip</a> | gunzip | from csv | sort-by USD | first | get Date</div><br/></div></div><div id="37532468" class="c"><input type="checkbox" id="c-37532468" checked=""/><div class="controls bullet"><span class="by">michelb</span><span>|</span><a href="#37530811">prev</a><span>|</span><a href="#37526508">next</a><span>|</span><label class="collapse" for="c-37532468">[-]</label><label class="expand" for="c-37532468">[1 more]</label></div><br/><div class="children"><div class="content">Finally something I actually CAN build in a weekend ;)</div><br/></div></div><div id="37526508" class="c"><input type="checkbox" id="c-37526508" checked=""/><div class="controls bullet"><span class="by">paradox460</span><span>|</span><a href="#37532468">prev</a><span>|</span><a href="#37529012">next</a><span>|</span><label class="collapse" for="c-37526508">[-]</label><label class="expand" for="c-37526508">[1 more]</label></div><br/><div class="children"><div class="content">If this is his favorite API, he should check out patent office gazettes</div><br/></div></div><div id="37529012" class="c"><input type="checkbox" id="c-37529012" checked=""/><div class="controls bullet"><span class="by">babblingfish</span><span>|</span><a href="#37526508">prev</a><span>|</span><a href="#37526816">next</a><span>|</span><label class="collapse" for="c-37529012">[-]</label><label class="expand" for="c-37529012">[2 more]</label></div><br/><div class="children"><div class="content">I believe that curl does not have client side caching so every time you run the command it downloads the csv. While downloading the csv and then analyzing it would no longer makes it a magic one-liner you can send to people. It would save bandwidth and reduce traffic on the API.<p>Unless there is caching going on here? Perhaps a CDN cache on the server side?</div><br/><div id="37531035" class="c"><input type="checkbox" id="c-37531035" checked=""/><div class="controls bullet"><span class="by">acqq</span><span>|</span><a href="#37529012">parent</a><span>|</span><a href="#37526816">next</a><span>|</span><label class="collapse" for="c-37531035">[-]</label><label class="expand" for="c-37531035">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I believe that curl does not have client side caching<p>See:<p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=37528558">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=37528558</a><p>by llimllib<p>Specifically:<p><pre><code>   curl  -o &#x2F;tmp&#x2F;euro.zip -z &#x2F;tmp&#x2F;euro.zip
</code></pre>
Option o is output, option z says<p>&quot;Request a file that has been modified later than the given time and date, or one that has been modified before that time.&quot;<p>And:<p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=37529690">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=37529690</a><p>by sltkr:<p>&quot;the server doesn&#x27;t support that header, but since the response does include a Last-Modified header, curl helpfully aborts the transfer if the Last-Modified date is the same as the mtime of the previously downloaded file.&quot;</div><br/></div></div></div></div><div id="37526816" class="c"><input type="checkbox" id="c-37526816" checked=""/><div class="controls bullet"><span class="by">supergeek133</span><span>|</span><a href="#37529012">prev</a><span>|</span><label class="collapse" for="c-37526816">[-]</label><label class="expand" for="c-37526816">[1 more]</label></div><br/><div class="children"><div class="content">I used to help run the Best Buy product catalog API. We did nightly CSVs instead of making people poll&#x2F;paginate the entire catalog. It was super widely used.</div><br/></div></div></div></div></div></div></div></body></html>