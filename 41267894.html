<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1724230876544" as="style"/><link rel="stylesheet" href="styles.css?v=1724230876544"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://tomeraberba.ch/the-1-hour-per-year-bug">The 1 Hour per Year Bug (But Only in Pacific Time!)</a> <span class="domain">(<a href="https://tomeraberba.ch">tomeraberba.ch</a>)</span></div><div class="subtext"><span>tomeraberbach</span> | <span>32 comments</span></div><br/><div><div id="41307010" class="c"><input type="checkbox" id="c-41307010" checked=""/><div class="controls bullet"><span class="by">Moru</span><span>|</span><a href="#41307036">next</a><span>|</span><label class="collapse" for="c-41307010">[-]</label><label class="expand" for="c-41307010">[15 more]</label></div><br/><div class="children"><div class="content">Can we talk about all the problems with dates formated as &quot;today&quot;, &quot;tomorrow&quot; or &quot;2 hours ago&quot; when trying to figure out how far apport two log-events happened? I at least want an OPTION to set that I want all dates down to the second exactly when they happened... And in a standard format with Y-M-D H:m:s that can sort naturally. The most significant part first, the least significant last.</div><br/><div id="41307104" class="c"><input type="checkbox" id="c-41307104" checked=""/><div class="controls bullet"><span class="by">stephen_g</span><span>|</span><a href="#41307010">parent</a><span>|</span><a href="#41307333">next</a><span>|</span><label class="collapse" for="c-41307104">[-]</label><label class="expand" for="c-41307104">[4 more]</label></div><br/><div class="children"><div class="content">The absolute worst are ones like “last month”, “last week” or “earlier this week” - almost absolutely useless! Especially for logs of things that happened at work, I extremely frequently want to know the day and date something happened, but that style obscures that sometimes to the point where you can’t even tell which week it was!</div><br/><div id="41307225" class="c"><input type="checkbox" id="c-41307225" checked=""/><div class="controls bullet"><span class="by">bigiain</span><span>|</span><a href="#41307010">root</a><span>|</span><a href="#41307104">parent</a><span>|</span><a href="#41307499">next</a><span>|</span><label class="collapse" for="c-41307225">[-]</label><label class="expand" for="c-41307225">[1 more]</label></div><br/><div class="children"><div class="content">I consider those as &quot;management oriented time deltas&quot;. Usually specifically requested by Project Managers because they&#x27;re so imprecise that they can avoid being held responsible for anything...</div><br/></div></div><div id="41307499" class="c"><input type="checkbox" id="c-41307499" checked=""/><div class="controls bullet"><span class="by">Aardwolf</span><span>|</span><a href="#41307010">root</a><span>|</span><a href="#41307104">parent</a><span>|</span><a href="#41307225">prev</a><span>|</span><a href="#41307178">next</a><span>|</span><label class="collapse" for="c-41307499">[-]</label><label class="expand" for="c-41307499">[1 more]</label></div><br/><div class="children"><div class="content">I also hate &quot;1 year ago&quot; when it was actually 23 months ago</div><br/></div></div><div id="41307178" class="c"><input type="checkbox" id="c-41307178" checked=""/><div class="controls bullet"><span class="by">Moru</span><span>|</span><a href="#41307010">root</a><span>|</span><a href="#41307104">parent</a><span>|</span><a href="#41307499">prev</a><span>|</span><a href="#41307333">next</a><span>|</span><label class="collapse" for="c-41307178">[-]</label><label class="expand" for="c-41307178">[1 more]</label></div><br/><div class="children"><div class="content">And if you save something and need to look it up a year later it&#x27;s even less useful. Last week computed from save date? File save date changed because zip-file didn&#x27;t save the date? Well, now it&#x27;s worse than useless, now it&#x27;s missleading.</div><br/></div></div></div></div><div id="41307333" class="c"><input type="checkbox" id="c-41307333" checked=""/><div class="controls bullet"><span class="by">bigiain</span><span>|</span><a href="#41307010">parent</a><span>|</span><a href="#41307104">prev</a><span>|</span><a href="#41307142">next</a><span>|</span><label class="collapse" for="c-41307333">[-]</label><label class="expand" for="c-41307333">[5 more]</label></div><br/><div class="children"><div class="content">&gt; in a standard format with Y-M-D H:m:s<p>Make sure that has a timezone (or better still, is explicitly in UTC).<p>Also, bytes are cheap these days, let&#x27;s have millisecond precision seconds there too.<p>Lets go full ISO 8601 and use yyyy-mm-ddThh:mm:ss.sssZ at least this way you have a recognised standard to appeal to if some other code or library can&#x27;t parse your datetimes.<p>(One reason I&#x27;d accept _not_ using ISO8601 dates is if your database uses a datetime format that&#x27;s equally human readable and unambiguous, MySQL users might use YYYY-MM-DD hh:mm:ss or YYYY-MM-DD hh:mm:ss.sss with an assumed and well documented UTC timezone.)</div><br/><div id="41308141" class="c"><input type="checkbox" id="c-41308141" checked=""/><div class="controls bullet"><span class="by">mjevans</span><span>|</span><a href="#41307010">root</a><span>|</span><a href="#41307333">parent</a><span>|</span><a href="#41307400">next</a><span>|</span><label class="collapse" for="c-41308141">[-]</label><label class="expand" for="c-41308141">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;ijmacd.github.io&#x2F;rfc3339-iso8601&#x2F;" rel="nofollow">https:&#x2F;&#x2F;ijmacd.github.io&#x2F;rfc3339-iso8601&#x2F;</a><p>RFC3339 allows (space) to replace the T, which is about 1000 times more readable for a human.<p>ISO8601 and RFC3339 both agree the time part of should include E.G. a Z for the Zulu (UTC) timezone abbreviation.<p>I&#x27;m of the mindset that unspecified timezones (the MySQL format mentioned YYYY-MM-DD hh;mm:ss etc) are &#x27;undefined behavior&#x27; and therefore context dependent.  For user facing applications they should be the local &#x27;normal persons&#x27; timezone, while for operator (E.G. SQL console) and programmed interface facing tasks should be either UTC of TAI time, as expected by the system.</div><br/></div></div><div id="41307400" class="c"><input type="checkbox" id="c-41307400" checked=""/><div class="controls bullet"><span class="by">boopdewoop</span><span>|</span><a href="#41307010">root</a><span>|</span><a href="#41307333">parent</a><span>|</span><a href="#41308141">prev</a><span>|</span><a href="#41307142">next</a><span>|</span><label class="collapse" for="c-41307400">[-]</label><label class="expand" for="c-41307400">[3 more]</label></div><br/><div class="children"><div class="content">Why not just use epoch? render it however you like. - Posted at 1724222105</div><br/><div id="41307460" class="c"><input type="checkbox" id="c-41307460" checked=""/><div class="controls bullet"><span class="by">lionkor</span><span>|</span><a href="#41307010">root</a><span>|</span><a href="#41307400">parent</a><span>|</span><a href="#41307142">next</a><span>|</span><label class="collapse" for="c-41307460">[-]</label><label class="expand" for="c-41307460">[2 more]</label></div><br/><div class="children"><div class="content">I prefer human readable datetime for debugging, because there are a lot of programs which have timings and timeouts for certain operations. Being able to quickly observe that a timeout happened in 500 ms instead of 1.5s would be interesting, epoch does not show you this information.<p>Similar with quickly jumping to a certain day.</div><br/><div id="41308118" class="c"><input type="checkbox" id="c-41308118" checked=""/><div class="controls bullet"><span class="by">Dylan16807</span><span>|</span><a href="#41307010">root</a><span>|</span><a href="#41307460">parent</a><span>|</span><a href="#41307142">next</a><span>|</span><label class="collapse" for="c-41308118">[-]</label><label class="expand" for="c-41308118">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Being able to quickly observe that a timeout happened in 500 ms instead of 1.5s would be interesting, epoch does not show you this information.<p>1724222105000 and  1724222105.000000 are common forms that solve that problem.</div><br/></div></div></div></div></div></div></div></div><div id="41307142" class="c"><input type="checkbox" id="c-41307142" checked=""/><div class="controls bullet"><span class="by">pastage</span><span>|</span><a href="#41307010">parent</a><span>|</span><a href="#41307333">prev</a><span>|</span><a href="#41308082">next</a><span>|</span><label class="collapse" for="c-41307142">[-]</label><label class="expand" for="c-41307142">[2 more]</label></div><br/><div class="children"><div class="content">I agreed I have gone so far as to replace strings in HTML with the date in the &lt;time&gt; tag, but it is not always available in that tag especially now with Javascript frameworks taking over. Further your wording makes it clear to me why date formatting is hard, what is most significant is clearly subjective.</div><br/><div id="41307301" class="c"><input type="checkbox" id="c-41307301" checked=""/><div class="controls bullet"><span class="by">andreareina</span><span>|</span><a href="#41307010">root</a><span>|</span><a href="#41307142">parent</a><span>|</span><a href="#41308082">next</a><span>|</span><label class="collapse" for="c-41307301">[-]</label><label class="expand" for="c-41307301">[1 more]</label></div><br/><div class="children"><div class="content">&quot;Most significant&quot; in this context is in analogy to most significant bit&#x2F;digit, which is objective. In this case, the year.</div><br/></div></div></div></div><div id="41307491" class="c"><input type="checkbox" id="c-41307491" checked=""/><div class="controls bullet"><span class="by">maxglute</span><span>|</span><a href="#41307010">parent</a><span>|</span><a href="#41308082">prev</a><span>|</span><a href="#41307091">next</a><span>|</span><label class="collapse" for="c-41307491">[-]</label><label class="expand" for="c-41307491">[1 more]</label></div><br/><div class="children"><div class="content">Yeah I wish all time is given in some standardized iso&#x2F;unix time and then have user reformat depending on on browser or OS settings.</div><br/></div></div><div id="41307091" class="c"><input type="checkbox" id="c-41307091" checked=""/><div class="controls bullet"><span class="by">noja</span><span>|</span><a href="#41307010">parent</a><span>|</span><a href="#41307491">prev</a><span>|</span><a href="#41307036">next</a><span>|</span><label class="collapse" for="c-41307091">[-]</label><label class="expand" for="c-41307091">[1 more]</label></div><br/><div class="children"><div class="content">Yeah at least I want a mouseover to see the real timestamp, and the column to be sortable.</div><br/></div></div></div></div><div id="41307036" class="c"><input type="checkbox" id="c-41307036" checked=""/><div class="controls bullet"><span class="by">jbrot</span><span>|</span><a href="#41307010">prev</a><span>|</span><a href="#41307634">next</a><span>|</span><label class="collapse" for="c-41307036">[-]</label><label class="expand" for="c-41307036">[2 more]</label></div><br/><div class="children"><div class="content">The article claims that the daylight savings transition happens at 11pm in pacific time. However, my understanding is that this transition should happen at 2 am for all us time zones. Where is 11pm coming from?</div><br/><div id="41307364" class="c"><input type="checkbox" id="c-41307364" checked=""/><div class="controls bullet"><span class="by">andreareina</span><span>|</span><a href="#41307036">parent</a><span>|</span><a href="#41307634">next</a><span>|</span><label class="collapse" for="c-41307364">[-]</label><label class="expand" for="c-41307364">[1 more]</label></div><br/><div class="children"><div class="content">Maybe a cross-timezone interaction? 23:00 pacific is 02:00 eastern (most days)</div><br/></div></div></div></div><div id="41307634" class="c"><input type="checkbox" id="c-41307634" checked=""/><div class="controls bullet"><span class="by">mjtardiff</span><span>|</span><a href="#41307036">prev</a><span>|</span><a href="#41307150">next</a><span>|</span><label class="collapse" for="c-41307634">[-]</label><label class="expand" for="c-41307634">[1 more]</label></div><br/><div class="children"><div class="content">Keep time and calculate intervals in epoch time, for sure. But the DST&#x2F;ST switch happens at 02:00 <i>local</i> time on the date of the switch (always a Sunday morning in the US), and so since the OP points out that the bug only happens when DST switches at 23:00 PT…that’s why. The code was doing time-switching wrong in all zones.<p>But as another poster points out, when a server lives in one time zone and is used in another, all hell can easily break loose when deciding what to show the local user.</div><br/></div></div><div id="41307150" class="c"><input type="checkbox" id="c-41307150" checked=""/><div class="controls bullet"><span class="by">crote</span><span>|</span><a href="#41307634">prev</a><span>|</span><a href="#41307204">next</a><span>|</span><label class="collapse" for="c-41307150">[-]</label><label class="expand" for="c-41307150">[2 more]</label></div><br/><div class="children"><div class="content">It does make me wonder how many bugs like these exist in the average codebase. In this case there was an &quot;unusually large&quot; amount of reports, all coming from the same timezone, all filed at the same time.<p>But imagine getting a <i>single</i> bug report, which doesn&#x27;t provide a timezone or timestamp and essentially boils down to &quot;I swear it said the wrong date yesterday but it fixed itself!&quot;: how much time are you really going to spend trying to reproduce it before closing it with the conclusion that the user was probably just imagining things?</div><br/><div id="41307184" class="c"><input type="checkbox" id="c-41307184" checked=""/><div class="controls bullet"><span class="by">Moru</span><span>|</span><a href="#41307150">parent</a><span>|</span><a href="#41307204">next</a><span>|</span><label class="collapse" for="c-41307184">[-]</label><label class="expand" for="c-41307184">[1 more]</label></div><br/><div class="children"><div class="content">This was probably what happened for several years already until this person got curious.</div><br/></div></div></div></div><div id="41307204" class="c"><input type="checkbox" id="c-41307204" checked=""/><div class="controls bullet"><span class="by">mattbillenstein</span><span>|</span><a href="#41307150">prev</a><span>|</span><a href="#41307438">next</a><span>|</span><label class="collapse" for="c-41307204">[-]</label><label class="expand" for="c-41307204">[2 more]</label></div><br/><div class="children"><div class="content">Clocks roll back at 2am Pacific time just like everywhere else - so the author&#x27;s explanation seems unsatisfying although I&#x27;ve encountered this type of bug before.</div><br/><div id="41308151" class="c"><input type="checkbox" id="c-41308151" checked=""/><div class="controls bullet"><span class="by">mjevans</span><span>|</span><a href="#41307204">parent</a><span>|</span><a href="#41307438">next</a><span>|</span><label class="collapse" for="c-41308151">[-]</label><label class="expand" for="c-41308151">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, as soon as they said 11PM I realized, ` they&#x27;re using EST as the timezone? ` which would just do it at that time for everyone using the doc?  I don&#x27;t work with raw date objects in JavaScript very much, is that illogical behavior from it&#x27;s Date object?</div><br/></div></div></div></div><div id="41307438" class="c"><input type="checkbox" id="c-41307438" checked=""/><div class="controls bullet"><span class="by">ajennings</span><span>|</span><a href="#41307204">prev</a><span>|</span><a href="#41307022">next</a><span>|</span><label class="collapse" for="c-41307438">[-]</label><label class="expand" for="c-41307438">[1 more]</label></div><br/><div class="children"><div class="content">This reminds me of a bug I created where the calendar showed only 30 days in March. I took the number of hours in the month, divided by 24, and rounded down.<p>The bigger problem was that I couldn&#x27;t replicate it because I was in Arizona (which doesn&#x27;t observe DST). Only users outside of Arizona were seeing the bug.</div><br/></div></div><div id="41307022" class="c"><input type="checkbox" id="c-41307022" checked=""/><div class="controls bullet"><span class="by">et-al</span><span>|</span><a href="#41307438">prev</a><span>|</span><a href="#41307108">next</a><span>|</span><label class="collapse" for="c-41307022">[-]</label><label class="expand" for="c-41307022">[2 more]</label></div><br/><div class="children"><div class="content">&gt; <i>Normally I would have dismissed that as a coincidence, but daylight saving time also ended at 11:00pm (PT) on November 7!</i><p>Huh? Unless I&#x27;m mistaken, Daylight Saving ended at 2am <i>local</i> time on Nov 7, 2021.<p>Was the bug that Day Saving is internally set based on Eastern Time (i.e. 2am ET &#x2F; 11pm PT)?</div><br/><div id="41307163" class="c"><input type="checkbox" id="c-41307163" checked=""/><div class="controls bullet"><span class="by">Laughsalot</span><span>|</span><a href="#41307022">parent</a><span>|</span><a href="#41307108">next</a><span>|</span><label class="collapse" for="c-41307163">[-]</label><label class="expand" for="c-41307163">[1 more]</label></div><br/><div class="children"><div class="content">This is my understanding as well. and and Wikipedia backs me up on it [<a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Pacific_Time_Zone#Daylight_time" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Pacific_Time_Zone#Daylight_tim...</a>].<p>Some of the software I&#x27;ve written _explicitly_ disables scheduling mobile notifications during the transition periods so I was also very confused by that. Your ET speculation makes sense to me. I&#x27;ll bet that whatever server&#x2F;containers being used for the backend were running in the Eastern Timezone.</div><br/></div></div></div></div><div id="41307108" class="c"><input type="checkbox" id="c-41307108" checked=""/><div class="controls bullet"><span class="by">mulmen</span><span>|</span><a href="#41307022">prev</a><span>|</span><label class="collapse" for="c-41307108">[-]</label><label class="expand" for="c-41307108">[6 more]</label></div><br/><div class="children"><div class="content">I’m having a hard time following how such naive time handling became part of a Google product.  Pick an epoch for timekeeping.  Timezones are a display issue.</div><br/><div id="41307862" class="c"><input type="checkbox" id="c-41307862" checked=""/><div class="controls bullet"><span class="by">saagarjha</span><span>|</span><a href="#41307108">parent</a><span>|</span><a href="#41307188">next</a><span>|</span><label class="collapse" for="c-41307862">[-]</label><label class="expand" for="c-41307862">[1 more]</label></div><br/><div class="children"><div class="content">Googlers are not all timekeeping experts, nor are they all capable of summoning that knowledge at all times when writing code.</div><br/></div></div><div id="41307188" class="c"><input type="checkbox" id="c-41307188" checked=""/><div class="controls bullet"><span class="by">crote</span><span>|</span><a href="#41307108">parent</a><span>|</span><a href="#41307862">prev</a><span>|</span><label class="collapse" for="c-41307188">[-]</label><label class="expand" for="c-41307188">[4 more]</label></div><br/><div class="children"><div class="content">No, it isn&#x27;t. That approach works fine for things like logging where are your timestamps are in the past, but the moment you have to deal with <i>future</i> timestamps it leads to some truly horrible issues when some political leader decides to change the definition of the timezone. Suddenly all your future epoch-based datetimes are representing the wrong wall clock time...</div><br/><div id="41308049" class="c"><input type="checkbox" id="c-41308049" checked=""/><div class="controls bullet"><span class="by">Dylan16807</span><span>|</span><a href="#41307108">root</a><span>|</span><a href="#41307188">parent</a><span>|</span><a href="#41307290">next</a><span>|</span><label class="collapse" for="c-41308049">[-]</label><label class="expand" for="c-41308049">[1 more]</label></div><br/><div class="children"><div class="content">But the context of the article was logging and purely a display issue.</div><br/></div></div><div id="41307290" class="c"><input type="checkbox" id="c-41307290" checked=""/><div class="controls bullet"><span class="by">mulmen</span><span>|</span><a href="#41307108">root</a><span>|</span><a href="#41307188">parent</a><span>|</span><a href="#41308049">prev</a><span>|</span><a href="#41307277">next</a><span>|</span><label class="collapse" for="c-41307290">[-]</label><label class="expand" for="c-41307290">[1 more]</label></div><br/><div class="children"><div class="content">Timekeeping is always epoch based.  When the definition changes you update the <i>display</i> code.  There’s no way to write code today that accounts for future changes in local time.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>