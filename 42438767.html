<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1734512460715" as="style"/><link rel="stylesheet" href="styles.css?v=1734512460715"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://medium.com/@ivan.ishubin/how-i-used-linear-algebra-to-build-an-interactive-diagramming-editor-and-why-matrix-math-is-d5bd552f2e8d">How I used linear algebra to build an interactive diagramming editor</a> <span class="domain">(<a href="https://medium.com">medium.com</a>)</span></div><div class="subtext"><span>binshu</span> | <span>43 comments</span></div><br/><div><div id="42441278" class="c"><input type="checkbox" id="c-42441278" checked=""/><div class="controls bullet"><span class="by">willvarfar</span><span>|</span><a href="#42442222">next</a><span>|</span><label class="collapse" for="c-42441278">[-]</label><label class="expand" for="c-42441278">[11 more]</label></div><br/><div class="children"><div class="content">Cool, hadn&#x27;t heard of Schemio before!  <a href="https:&#x2F;&#x2F;schem.io&#x2F;" rel="nofollow">https:&#x2F;&#x2F;schem.io&#x2F;</a><p>Very slick look and feel :D<p>And it doesn&#x27;t boast about it, but it&#x27;s open source <a href="https:&#x2F;&#x2F;github.com&#x2F;ishubin&#x2F;schemio">https:&#x2F;&#x2F;github.com&#x2F;ishubin&#x2F;schemio</a></div><br/><div id="42441357" class="c"><input type="checkbox" id="c-42441357" checked=""/><div class="controls bullet"><span class="by">binshu</span><span>|</span><a href="#42441278">parent</a><span>|</span><a href="#42443465">next</a><span>|</span><label class="collapse" for="c-42441357">[-]</label><label class="expand" for="c-42441357">[8 more]</label></div><br/><div class="children"><div class="content">Thanks! Schemio is open-sourced with the exception of the backend part of <a href="https:&#x2F;&#x2F;schem.io" rel="nofollow">https:&#x2F;&#x2F;schem.io</a>. But the frontend code is completely open and you can even host your own server. Although in that case it would simply use a file system as a storage, so no database and no user management.</div><br/><div id="42444298" class="c"><input type="checkbox" id="c-42444298" checked=""/><div class="controls bullet"><span class="by">willvarfar</span><span>|</span><a href="#42441278">root</a><span>|</span><a href="#42441357">parent</a><span>|</span><a href="#42444631">next</a><span>|</span><label class="collapse" for="c-42444298">[-]</label><label class="expand" for="c-42444298">[3 more]</label></div><br/><div class="children"><div class="content">Do you mean that there are two servers:<p>1. a basic open source one you can self-host,<p>2. and another closed-source one with accounts and other features that schem.io uses?<p>And (I&#x27;m just thinking out loud, and don&#x27;t want to encourage any development as I am not a real user) is there a server-less embeddable version that perhaps just saves&#x2F;loads locally with a javascript API for use in other apps?</div><br/><div id="42444995" class="c"><input type="checkbox" id="c-42444995" checked=""/><div class="controls bullet"><span class="by">binshu</span><span>|</span><a href="#42441278">root</a><span>|</span><a href="#42444298">parent</a><span>|</span><a href="#42444631">next</a><span>|</span><label class="collapse" for="c-42444995">[-]</label><label class="expand" for="c-42444995">[2 more]</label></div><br/><div class="children"><div class="content">Yes, but there is more than that.
Actually there are 6 types of deployments of Schemio<p>1. Self-hosted, there is even a docker container available (<a href="https:&#x2F;&#x2F;hub.docker.com&#x2F;r&#x2F;binshu&#x2F;schemio&#x2F;tags" rel="nofollow">https:&#x2F;&#x2F;hub.docker.com&#x2F;r&#x2F;binshu&#x2F;schemio&#x2F;tags</a>). It does not have authorization and user-management, stores all diagrams on a file system. But it allows you to run server in write and read-only mode<p>2. <a href="https:&#x2F;&#x2F;schem.io" rel="nofollow">https:&#x2F;&#x2F;schem.io</a> - a service for collaborative editing and sharing of diagrams. This is obviously a closed-source for now and it uses the open-source frontend of Schemio<p>3. Schemio as a js library. Although I am not really releasing it to npm, just hadn&#x27;t the time to work this out. But there is an option to build a js lib that lets you use Schemio as a Vue component. That&#x27;s actually how I made it work on <a href="https:&#x2F;&#x2F;schem.io" rel="nofollow">https:&#x2F;&#x2F;schem.io</a><p>4. <a href="https:&#x2F;&#x2F;schemio.app" rel="nofollow">https:&#x2F;&#x2F;schemio.app</a> - Google Drive based frontend. All your diagrams are stored on Google Drive. Obviously you cannot share your diagrams, as they are only available to you. This is completely open-sourced and you can even build it yourself with npm<p>5. Static deployment. If you use option 1, you can export all of your diagrams into a static deployment and even host it on Github pages.<p>6. Standalone player of Schemio that lets you embed a single diagram on your website</div><br/><div id="42448429" class="c"><input type="checkbox" id="c-42448429" checked=""/><div class="controls bullet"><span class="by">binshu</span><span>|</span><a href="#42441278">root</a><span>|</span><a href="#42444995">parent</a><span>|</span><a href="#42444631">next</a><span>|</span><label class="collapse" for="c-42448429">[-]</label><label class="expand" for="c-42448429">[1 more]</label></div><br/><div class="children"><div class="content">I actually forgot about the 7th option - desktop app built with Electron. Unfortunately it&#x27;s been broken for a while and the electron build fails with some weird error message. I just didn&#x27;t have enough time to look into it since I am currently a single developer working on it.</div><br/></div></div></div></div></div></div><div id="42444631" class="c"><input type="checkbox" id="c-42444631" checked=""/><div class="controls bullet"><span class="by">hgomersall</span><span>|</span><a href="#42441278">root</a><span>|</span><a href="#42441357">parent</a><span>|</span><a href="#42444298">prev</a><span>|</span><a href="#42443465">next</a><span>|</span><label class="collapse" for="c-42444631">[-]</label><label class="expand" for="c-42444631">[4 more]</label></div><br/><div class="children"><div class="content">Is it possible to use programmatically? Basically I&#x27;ve been wanting to create an HDL diagram (for FPGA development) from source code to visualise the block interactions. It would be great to have a bit of interaction with the blocks that are created. No other tool I&#x27;ve seen can really do what&#x27;s wanted.</div><br/><div id="42448942" class="c"><input type="checkbox" id="c-42448942" checked=""/><div class="controls bullet"><span class="by">Wololooo</span><span>|</span><a href="#42441278">root</a><span>|</span><a href="#42444631">parent</a><span>|</span><a href="#42444893">next</a><span>|</span><label class="collapse" for="c-42448942">[-]</label><label class="expand" for="c-42448942">[1 more]</label></div><br/><div class="children"><div class="content">Isn&#x27;t this normally particle at synthesis time?<p>If you want open source alternatives, I remembered seeing now a little while ago this <a href="https:&#x2F;&#x2F;blog.eowyn.net&#x2F;netlistsvg&#x2F;" rel="nofollow">https:&#x2F;&#x2F;blog.eowyn.net&#x2F;netlistsvg&#x2F;</a> but never tried it myself, you might give it a go.</div><br/></div></div><div id="42444893" class="c"><input type="checkbox" id="c-42444893" checked=""/><div class="controls bullet"><span class="by">binshu</span><span>|</span><a href="#42441278">root</a><span>|</span><a href="#42444631">parent</a><span>|</span><a href="#42448942">prev</a><span>|</span><a href="#42443465">next</a><span>|</span><label class="collapse" for="c-42444893">[-]</label><label class="expand" for="c-42444893">[2 more]</label></div><br/><div class="children"><div class="content">Do you mean diagrams as code? something like PlantUML <a href="https:&#x2F;&#x2F;pdf.plantuml.net&#x2F;1.2020.22&#x2F;PlantUML_Language_Reference_Guide_en.pdf" rel="nofollow">https:&#x2F;&#x2F;pdf.plantuml.net&#x2F;1.2020.22&#x2F;PlantUML_Language_Referen...</a> ?<p>If that&#x27;s what you mean, then no. I do have plans to work on this in the future, but I am not sure when I&#x27;ll get the time for that.<p>Or do you mean just generating a diagram and posting it to Schemio programatically? This is possible, but it&#x27;s not documented.<p>All diagrams are stored in JSON by the way and the structure is quite straightforward, so it shouldn&#x27;t be too difficult to generate it yourself</div><br/><div id="42448907" class="c"><input type="checkbox" id="c-42448907" checked=""/><div class="controls bullet"><span class="by">hgomersall</span><span>|</span><a href="#42441278">root</a><span>|</span><a href="#42444893">parent</a><span>|</span><a href="#42443465">next</a><span>|</span><label class="collapse" for="c-42448907">[-]</label><label class="expand" for="c-42448907">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not sure honestly. I basically want to connect nodes with arrows and lines and have the resultant thing look sensible, and ideally interactive.</div><br/></div></div></div></div></div></div></div></div><div id="42443465" class="c"><input type="checkbox" id="c-42443465" checked=""/><div class="controls bullet"><span class="by">tejohnso</span><span>|</span><a href="#42441278">parent</a><span>|</span><a href="#42441357">prev</a><span>|</span><a href="#42442222">next</a><span>|</span><label class="collapse" for="c-42443465">[-]</label><label class="expand" for="c-42443465">[2 more]</label></div><br/><div class="children"><div class="content">I love the way you can zoom in for a diagram with more detail and them easily zoom back out. This is what I wanted from Obsidian but it isn&#x27;t quite as slick.</div><br/><div id="42448372" class="c"><input type="checkbox" id="c-42448372" checked=""/><div class="controls bullet"><span class="by">binshu</span><span>|</span><a href="#42441278">root</a><span>|</span><a href="#42443465">parent</a><span>|</span><a href="#42442222">next</a><span>|</span><label class="collapse" for="c-42448372">[-]</label><label class="expand" for="c-42448372">[1 more]</label></div><br/><div class="children"><div class="content">This idea came to me after my first on-call, when I had to quickly figure out what is going on in a distributed system of 200+ micro-services. That&#x27;s why I focused on embedding documentation into a diagram and being able to zoom into the parts of a complex system as much as you can. So that you stay focused on the entire picture. The alternative is to jump between multiple Google Docs&#x2F;Wiki&#x2F;Readmes for multiple services and read tones of text.</div><br/></div></div></div></div></div></div><div id="42442222" class="c"><input type="checkbox" id="c-42442222" checked=""/><div class="controls bullet"><span class="by">breadwinner</span><span>|</span><a href="#42441278">prev</a><span>|</span><a href="#42441340">next</a><span>|</span><label class="collapse" for="c-42442222">[-]</label><label class="expand" for="c-42442222">[6 more]</label></div><br/><div class="children"><div class="content">Transformation matrices were popularized by Adobe PostScript in the 1980s. SVG heavily borrows from PostScript imaging model. See links below for PostScript&#x27;s use of 2D matrices:<p><a href="https:&#x2F;&#x2F;personal.math.ubc.ca&#x2F;~cass&#x2F;graphics&#x2F;text&#x2F;old.pdf&#x2F;last&#x2F;ch4.pdf" rel="nofollow">https:&#x2F;&#x2F;personal.math.ubc.ca&#x2F;~cass&#x2F;graphics&#x2F;text&#x2F;old.pdf&#x2F;las...</a><p><a href="https:&#x2F;&#x2F;scientificgems.wordpress.com&#x2F;2014&#x2F;11&#x2F;28&#x2F;mathematics-in-action-affine-transformations-and-postscript&#x2F;" rel="nofollow">https:&#x2F;&#x2F;scientificgems.wordpress.com&#x2F;2014&#x2F;11&#x2F;28&#x2F;mathematics-...</a></div><br/><div id="42445383" class="c"><input type="checkbox" id="c-42445383" checked=""/><div class="controls bullet"><span class="by">2muchcoffeeman</span><span>|</span><a href="#42442222">parent</a><span>|</span><a href="#42441340">next</a><span>|</span><label class="collapse" for="c-42445383">[-]</label><label class="expand" for="c-42445383">[5 more]</label></div><br/><div class="children"><div class="content">Popularised by Adobe?<p>Don’t you just learn transformation matrices in algebra?</div><br/><div id="42446151" class="c"><input type="checkbox" id="c-42446151" checked=""/><div class="controls bullet"><span class="by">breadwinner</span><span>|</span><a href="#42442222">root</a><span>|</span><a href="#42445383">parent</a><span>|</span><a href="#42441340">next</a><span>|</span><label class="collapse" for="c-42446151">[-]</label><label class="expand" for="c-42446151">[4 more]</label></div><br/><div class="children"><div class="content">You learn matrix multiplication in algebra, not its application to do affine transforms in 2D graphics.</div><br/><div id="42446563" class="c"><input type="checkbox" id="c-42446563" checked=""/><div class="controls bullet"><span class="by">2muchcoffeeman</span><span>|</span><a href="#42442222">root</a><span>|</span><a href="#42446151">parent</a><span>|</span><a href="#42441340">next</a><span>|</span><label class="collapse" for="c-42446563">[-]</label><label class="expand" for="c-42446563">[3 more]</label></div><br/><div class="children"><div class="content">I started learning rotations, translations, scaling, shears using matrices in high school.<p>Affine transforms are apparently attributed to Mobius and Gauss. That’s like the 1700s.<p>What is vector based 2D graphics if not a direct application of geometry? Were we not using well known maths results when 2D graphics was first implemented on a computer?</div><br/><div id="42447532" class="c"><input type="checkbox" id="c-42447532" checked=""/><div class="controls bullet"><span class="by">TeMPOraL</span><span>|</span><a href="#42442222">root</a><span>|</span><a href="#42446563">parent</a><span>|</span><a href="#42447487">next</a><span>|</span><label class="collapse" for="c-42447532">[-]</label><label class="expand" for="c-42447532">[1 more]</label></div><br/><div class="children"><div class="content">&gt; <i>What is vector based 2D graphics if not a direct application of geometry? Were we not using well known maths results when 2D graphics was first implemented on a computer?</i><p>We were, but in high school, they aren&#x27;t teaching you computer graphics, they&#x27;re teaching you how to apply weirdly specific rules to transform some scribbles into more scribbles, for no good reason - hence the common student question, &quot;what will I ever need that for?&quot;.<p>FWIW, I actually got into gamedev as a hobby as a kid, and it saved my life prospects, because it gave me <i>a reason</i> to be interested in trigonometry and algebra - all those random scribble transformation rules were directly applicable to problems relevant to me, such as &quot;how do I rotate the bitmaps that are spaceships and rockets and turrets?&quot;, and such.</div><br/></div></div><div id="42447487" class="c"><input type="checkbox" id="c-42447487" checked=""/><div class="controls bullet"><span class="by">breadwinner</span><span>|</span><a href="#42442222">root</a><span>|</span><a href="#42446563">parent</a><span>|</span><a href="#42447532">prev</a><span>|</span><a href="#42441340">next</a><span>|</span><label class="collapse" for="c-42447487">[-]</label><label class="expand" for="c-42447487">[1 more]</label></div><br/><div class="children"><div class="content">Nearly all modern 2D graphics systems are modeled after PostScript, including PDF, SVG, Java&#x27;s Graphics2D, etc. In fact, Adobe employees contributed to the specifications of those technologies. Based on that I&#x27;d say PostScript popularized it. Other 2D graphics libs such as X-Windows, AWT, Windows GDI, Apple QuickDraw etc. didn&#x27;t support transformation matrices. Maybe they never heard about Mobius and Gauss?</div><br/></div></div></div></div></div></div></div></div></div></div><div id="42441340" class="c"><input type="checkbox" id="c-42441340" checked=""/><div class="controls bullet"><span class="by">amelius</span><span>|</span><a href="#42442222">prev</a><span>|</span><a href="#42448265">next</a><span>|</span><label class="collapse" for="c-42441340">[-]</label><label class="expand" for="c-42441340">[3 more]</label></div><br/><div class="children"><div class="content">Author may wish to look up:<p><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Homogeneous_coordinates" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Homogeneous_coordinates</a></div><br/><div id="42441466" class="c"><input type="checkbox" id="c-42441466" checked=""/><div class="controls bullet"><span class="by">binshu</span><span>|</span><a href="#42441340">parent</a><span>|</span><a href="#42448265">next</a><span>|</span><label class="collapse" for="c-42441466">[-]</label><label class="expand" for="c-42441466">[2 more]</label></div><br/><div class="children"><div class="content">Hi, I am the author. Thanks for your suggestion! I will definitely go through that article, once I have some time. Just had a quick glance and it looks like there is also a section about transformation matrix, which is what I have been using</div><br/><div id="42441505" class="c"><input type="checkbox" id="c-42441505" checked=""/><div class="controls bullet"><span class="by">JadeNB</span><span>|</span><a href="#42441340">root</a><span>|</span><a href="#42441466">parent</a><span>|</span><a href="#42448265">next</a><span>|</span><label class="collapse" for="c-42441505">[-]</label><label class="expand" for="c-42441505">[1 more]</label></div><br/><div class="children"><div class="content">Great indication of the power of linear algebra! One little nitpick: not <i>all</i> transformations can be expressed with matrices, only the linear ones. Once you homogenize, you can get the affine ones (like linear, but allowing for translation, so that you don&#x27;t need to respect a fixed origin). However, you can&#x27;t, at least not without considerable violence to your coordinate system, express a transformation that, e.g., scales distances quadratically instead of linearly. Fortunately, as you suggest, this doesn&#x27;t seem to be a transformation that&#x27;s needed a lot in routine graphical editing.<p>Also, if you wanted to, you could juice up your discussion of the importance of performing transformations in the right order to introduce the idea of conjugates (<a href="https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Inner_automorphism" rel="nofollow">https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Inner_automorphism</a>) and commutators (<a href="https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Commutator" rel="nofollow">https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Commutator</a>). Although in your context introducing these explicitly might just make the exposition more complicated, they are useful tools to have in your general toolkit. (Conjugacy in particular, as you implicitly discuss, is practically built to express the idea &quot;change from inconvenient coordinates to convenient ones, transform in convenient coordinates, then change back.&quot;)</div><br/></div></div></div></div></div></div><div id="42448265" class="c"><input type="checkbox" id="c-42448265" checked=""/><div class="controls bullet"><span class="by">bee_rider</span><span>|</span><a href="#42441340">prev</a><span>|</span><a href="#42447368">next</a><span>|</span><label class="collapse" for="c-42448265">[-]</label><label class="expand" for="c-42448265">[2 more]</label></div><br/><div class="children"><div class="content">I wonder—when you move an object with a lot of children, between frames you have to update the A(i-1) term for all children (and then iteratively through the grandchildren, so on and so forth). Does this become costly? Or maybe it isn’t so bad for reasonably-sized figures?</div><br/><div id="42448410" class="c"><input type="checkbox" id="c-42448410" checked=""/><div class="controls bullet"><span class="by">binshu</span><span>|</span><a href="#42448265">parent</a><span>|</span><a href="#42447368">next</a><span>|</span><label class="collapse" for="c-42448410">[-]</label><label class="expand" for="c-42448410">[1 more]</label></div><br/><div class="children"><div class="content">Yes, I still have to update the transformation matrix for every children on every movement of any of their ancestors. But it doesn&#x27;t cause a significant performance drop so far. Currently it is only computing it just in case, but it is actually not affecting the SVG elements at all so they do not have to be updated. The only reason for re-computing this transformation matrix is if I would have to know the local-to-world coordinates of a particular object, when readjusting the attached connector or doing some other logic based on their positioning</div><br/></div></div></div></div><div id="42447368" class="c"><input type="checkbox" id="c-42447368" checked=""/><div class="controls bullet"><span class="by">teleforce</span><span>|</span><a href="#42448265">prev</a><span>|</span><a href="#42446103">next</a><span>|</span><label class="collapse" for="c-42447368">[-]</label><label class="expand" for="c-42447368">[1 more]</label></div><br/><div class="children"><div class="content">Very interesting article and software, personally has been looking for robust open source software for diagraming but strangely schemio never appeared on my radar.<p>I&#x27;ve got the feeling that it will be more intuitive to use geometric algebra instead of linear algebra for the transformation and animation [1].<p>[1] Projective Geometric Algebra:<p><a href="https:&#x2F;&#x2F;projectivegeometricalgebra.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;projectivegeometricalgebra.org&#x2F;</a></div><br/></div></div><div id="42446103" class="c"><input type="checkbox" id="c-42446103" checked=""/><div class="controls bullet"><span class="by">myrloc</span><span>|</span><a href="#42447368">prev</a><span>|</span><a href="#42442917">next</a><span>|</span><label class="collapse" for="c-42446103">[-]</label><label class="expand" for="c-42446103">[1 more]</label></div><br/><div class="children"><div class="content">Schemio looks cool. I&#x27;ve been building a lot of flow diagrams using Claude, which outputs to Mermaidjs (and renders it in the browser). I would love to do something similar with Schemio given the improved zooming in&#x2F;out from flow to sequence, etc features.</div><br/></div></div><div id="42442917" class="c"><input type="checkbox" id="c-42442917" checked=""/><div class="controls bullet"><span class="by">dekhn</span><span>|</span><a href="#42446103">prev</a><span>|</span><a href="#42446844">next</a><span>|</span><label class="collapse" for="c-42442917">[-]</label><label class="expand" for="c-42442917">[1 more]</label></div><br/><div class="children"><div class="content">Take a look at QGraphicsView framework, <a href="https:&#x2F;&#x2F;doc.qt.io&#x2F;qt-6&#x2F;graphicsview.html" rel="nofollow">https:&#x2F;&#x2F;doc.qt.io&#x2F;qt-6&#x2F;graphicsview.html</a> it&#x27;s one of the most powerful graphics frameworks I&#x27;ve used.  In addition to scene-to-object transformations (with object hierarchies) it gives you many powerful tools to render complex, interactive scenes.<p>Alas, I have not found a web equivalent that works as well as QGVF.</div><br/></div></div><div id="42446844" class="c"><input type="checkbox" id="c-42446844" checked=""/><div class="controls bullet"><span class="by">globalnode</span><span>|</span><a href="#42442917">prev</a><span>|</span><a href="#42446734">next</a><span>|</span><label class="collapse" for="c-42446844">[-]</label><label class="expand" for="c-42446844">[1 more]</label></div><br/><div class="children"><div class="content">A cool aspect to using 3x3 homogeneous matrices to translate in 2D is that the 2D translation is actually a shear in 3D along the z = 1 plane.<p><a href="https:&#x2F;&#x2F;youtu.be&#x2F;AheaTd_l5Is?t=263" rel="nofollow">https:&#x2F;&#x2F;youtu.be&#x2F;AheaTd_l5Is?t=263</a></div><br/></div></div><div id="42446734" class="c"><input type="checkbox" id="c-42446734" checked=""/><div class="controls bullet"><span class="by">mithametacs</span><span>|</span><a href="#42446844">prev</a><span>|</span><a href="#42442781">next</a><span>|</span><label class="collapse" for="c-42446734">[-]</label><label class="expand" for="c-42446734">[1 more]</label></div><br/><div class="children"><div class="content">Absolutely gorgeous and probably even worth actually using</div><br/></div></div><div id="42442781" class="c"><input type="checkbox" id="c-42442781" checked=""/><div class="controls bullet"><span class="by">airstrike</span><span>|</span><a href="#42446734">prev</a><span>|</span><a href="#42442051">next</a><span>|</span><label class="collapse" for="c-42442781">[-]</label><label class="expand" for="c-42442781">[1 more]</label></div><br/><div class="children"><div class="content">Equal parts cool and informative. Thanks for sharing! I&#x27;ve learned a lot.</div><br/></div></div><div id="42442051" class="c"><input type="checkbox" id="c-42442051" checked=""/><div class="controls bullet"><span class="by">munchler</span><span>|</span><a href="#42442781">prev</a><span>|</span><a href="#42441518">next</a><span>|</span><label class="collapse" for="c-42442051">[-]</label><label class="expand" for="c-42442051">[9 more]</label></div><br/><div class="children"><div class="content">&gt; Since all the transformation matrices are 3x3, a 2D point needs to be represented as a 3x1 matrix.<p>I&#x27;m confused by this. Why use a 3D matrix for a 2D transformation?</div><br/><div id="42442156" class="c"><input type="checkbox" id="c-42442156" checked=""/><div class="controls bullet"><span class="by">ndriscoll</span><span>|</span><a href="#42442051">parent</a><span>|</span><a href="#42443827">next</a><span>|</span><label class="collapse" for="c-42442156">[-]</label><label class="expand" for="c-42442156">[1 more]</label></div><br/><div class="children"><div class="content">Translation is not linear, but you can represent it as a linear map on n+1 dimensional projective space. &quot;Homogeneous coordinates&quot; is the relevant phrase for computer graphics.</div><br/></div></div><div id="42443827" class="c"><input type="checkbox" id="c-42443827" checked=""/><div class="controls bullet"><span class="by">blt</span><span>|</span><a href="#42442051">parent</a><span>|</span><a href="#42442156">prev</a><span>|</span><a href="#42442074">next</a><span>|</span><label class="collapse" for="c-42443827">[-]</label><label class="expand" for="c-42443827">[1 more]</label></div><br/><div class="children"><div class="content">Start with the desire - we want to have an algebra of 2D affine transformations with composition and (usually) inversion.<p>We can represent this with the trick of &quot;homogeneous coordinates&quot;, using 3D vectors with the last entry 1 and 3x3 matrices with the last row [0, 0, 1].<p>This is convenient because both mathematicians and programmers are familiar with linear transforms and matrices. It&#x27;s in the comfort zone. There are many libraries.<p>However, it&#x27;s wasteful to store all those extra 1&#x27;s and 0&#x27;s in memory. You can always replace the matrices with<p>class Affine2D {
    Matrix2x2 linear;
    Vector2 shift;
};<p>and overload all the algebraic operators, including multiplication with 2D vectors.</div><br/></div></div><div id="42442074" class="c"><input type="checkbox" id="c-42442074" checked=""/><div class="controls bullet"><span class="by">umvi</span><span>|</span><a href="#42442051">parent</a><span>|</span><a href="#42443827">prev</a><span>|</span><a href="#42442130">next</a><span>|</span><label class="collapse" for="c-42442074">[-]</label><label class="expand" for="c-42442074">[5 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not a 3d matrix. It&#x27;s a 3x3 matrix. To do 3d transformations you need a 4x4 matrix.</div><br/><div id="42442116" class="c"><input type="checkbox" id="c-42442116" checked=""/><div class="controls bullet"><span class="by">munchler</span><span>|</span><a href="#42442051">root</a><span>|</span><a href="#42442074">parent</a><span>|</span><a href="#42442130">next</a><span>|</span><label class="collapse" for="c-42442116">[-]</label><label class="expand" for="c-42442116">[4 more]</label></div><br/><div class="children"><div class="content">OK, then I&#x27;m confused about this:<p>&quot;For example, a point in space is a 3×1 matrix. To transform it, you multiply it by a 3×3 transformation matrix.&quot;<p>It seems we&#x27;re transforming a point in 3D space using a 3x3 matrix, no?</div><br/><div id="42442238" class="c"><input type="checkbox" id="c-42442238" checked=""/><div class="controls bullet"><span class="by">binshu</span><span>|</span><a href="#42442051">root</a><span>|</span><a href="#42442116">parent</a><span>|</span><a href="#42442206">next</a><span>|</span><label class="collapse" for="c-42442238">[-]</label><label class="expand" for="c-42442238">[1 more]</label></div><br/><div class="children"><div class="content">I am sorry for the confusion in my article. I should have probably clarified that this is a 2D point in a 2D space. To make the transformations work correctly you need to represent a 2D point as a 3x1 matrix.
And if you want to perform the same in a 3D space, then a 3D point should be represented as a 4x1 matrix, where the last row is always 1.</div><br/></div></div><div id="42442206" class="c"><input type="checkbox" id="c-42442206" checked=""/><div class="controls bullet"><span class="by">seanhunter</span><span>|</span><a href="#42442051">root</a><span>|</span><a href="#42442116">parent</a><span>|</span><a href="#42442238">prev</a><span>|</span><a href="#42442130">next</a><span>|</span><label class="collapse" for="c-42442206">[-]</label><label class="expand" for="c-42442206">[2 more]</label></div><br/><div class="children"><div class="content">As a sibling comment mentioned, translation is not linear so say you want to move your box a bit to the left. You can&#x27;t do this by multiplication by any 2x2 matrix. This is because what you need is an affine transform and what you have is a linear transform. So you can scale things, rotate them and shear them (squish them along the diagonals) but what you can</div><br/><div id="42443730" class="c"><input type="checkbox" id="c-42443730" checked=""/><div class="controls bullet"><span class="by">seanhunter</span><span>|</span><a href="#42442051">root</a><span>|</span><a href="#42442206">parent</a><span>|</span><a href="#42442130">next</a><span>|</span><label class="collapse" for="c-42443730">[-]</label><label class="expand" for="c-42443730">[1 more]</label></div><br/><div class="children"><div class="content">...do is pop <i>up</i> a dimension, shear in that dimension, then project into your original dimension. This will make sense if we think of an example.<p>Say we&#x27;re working in 2d and have a unit square starting at the origin and we want to translate it right by 1.  This is not possible with any kind of matrix multiplication by a 2x2 matrix. That&#x27;s easy to confirm if you just try it but trivially the lower right hand corner is on the origin and anything you multiply by zero is going to be zero. So any 2x2 matrix you multiply the coordinates of your square by is going to result in something where that point is still at the origin.<p>So instead what you do is pop your square up a dimension into 3D.  So now you have a unit cube.  If you do a shear of the unit cube by 1 in the x direction (which is a 3x3 matrix multiplication), you can take the projection (&quot;shadow&quot;) of the top face of the cube to get back into 2D and you&#x27;ll find it&#x27;s where you wanted it (moved over by 1).<p>&lt;meta-point: apologies - my original response seems to have been chopped in half. I didn&#x27;t mean to submit in this form and I was in meetings etc so it&#x27;s too old to edit now&gt;</div><br/></div></div></div></div></div></div></div></div></div></div><div id="42441518" class="c"><input type="checkbox" id="c-42441518" checked=""/><div class="controls bullet"><span class="by">FrustratedMonky</span><span>|</span><a href="#42442051">prev</a><span>|</span><a href="#42441655">next</a><span>|</span><label class="collapse" for="c-42441518">[-]</label><label class="expand" for="c-42441518">[4 more]</label></div><br/><div class="children"><div class="content">This is cool summary of building editors. And good summary of linear algebra.<p>But don&#x27;t all editors use linear algebra?</div><br/><div id="42442396" class="c"><input type="checkbox" id="c-42442396" checked=""/><div class="controls bullet"><span class="by">binshu</span><span>|</span><a href="#42441518">parent</a><span>|</span><a href="#42441655">next</a><span>|</span><label class="collapse" for="c-42442396">[-]</label><label class="expand" for="c-42442396">[3 more]</label></div><br/><div class="children"><div class="content">Technically yes, we can say that all graphical editors rely on linear algebra for various purposes. It&#x27;s just that not all of the problems are obvious to anyone who starts developing something like this. That is why I decided to share some of the challenges I had encountered from a math perspective. I guess the main point I wanted to make is how matrices simplified the calculations for me even though I already used linear algebra.<p>Also another point is that, if you rely on SVG for rendering you could get away with just the code without thinking too much about the math involved. For instance if I wouldn&#x27;t have introduced object hierarchy, I wouldn&#x27;t even have to bother with  math at all. SVG can take care of all the transformations, I wouldn&#x27;t even have to know that matrices exist and that I could use them in svg objects 1-on-1. Dragging an object without a hierarchy would also propably be much easier, all I had to do is to change the translate(x,y) inside of the svg transform attribute.</div><br/><div id="42447635" class="c"><input type="checkbox" id="c-42447635" checked=""/><div class="controls bullet"><span class="by">mnutt</span><span>|</span><a href="#42441518">root</a><span>|</span><a href="#42442396">parent</a><span>|</span><a href="#42448081">next</a><span>|</span><label class="collapse" for="c-42447635">[-]</label><label class="expand" for="c-42447635">[1 more]</label></div><br/><div class="children"><div class="content">I had a similar experience: I built dragging and handle resize, then later added rotation via a bit of trigonometry. Each operation worked fine separately, but if you tried to rotate and then resize, unexpected things happened. I left the bug for years, thinking I needed to come back and just add a bit more trigonometry to get rotated resizing working. When I finally came back to it I spent quite a while hacking at it before realizing that matrices were a much better way to describe the solution.</div><br/></div></div><div id="42448081" class="c"><input type="checkbox" id="c-42448081" checked=""/><div class="controls bullet"><span class="by">Xmd5a</span><span>|</span><a href="#42441518">root</a><span>|</span><a href="#42442396">parent</a><span>|</span><a href="#42447635">prev</a><span>|</span><a href="#42441655">next</a><span>|</span><label class="collapse" for="c-42448081">[-]</label><label class="expand" for="c-42448081">[1 more]</label></div><br/><div class="children"><div class="content">You might be interested in GraphBLAS (using linear algebra to run graph algorithms):<p><a href="https:&#x2F;&#x2F;graphblas.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;graphblas.org&#x2F;</a></div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>