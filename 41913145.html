<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1729760475229" as="style"/><link rel="stylesheet" href="styles.css?v=1729760475229"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://quansight.com/post/my-numpy-year-creating-a-dtype-for-the-next-generation-of-scientific-computing/">My NumPy year: Creating a DType for the next generation of scientific computing</a> <span class="domain">(<a href="https://quansight.com">quansight.com</a>)</span></div><div class="subtext"><span>sebg</span> | <span>5 comments</span></div><br/><div><div id="41931705" class="c"><input type="checkbox" id="c-41931705" checked=""/><div class="controls bullet"><span class="by">karteum</span><span>|</span><a href="#41930071">next</a><span>|</span><label class="collapse" for="c-41931705">[-]</label><label class="expand" for="c-41931705">[2 more]</label></div><br/><div class="children"><div class="content">There are aspects I didn&#x27;t fully understand, maybe someone can explain : on one hand I understand that Object arrays were very slow and raised issues, that PyArrow strings solved the issue (how ?) at the expense of a huge dependency, and that the approach here also solves the issue in a lighter way, but it seems to be somewhat the same way as Object arrays : &quot;So, the actual array buffer doesn’t contain any string data—it contains pointers to the actual string data. This is similar to how object arrays work, except instead of pointers to Python objects, they’re pointers to strings&quot; =&gt; OK so... if they are stored in a similar way, how is that more performant or better than regular Object arrays ?</div><br/><div id="41931855" class="c"><input type="checkbox" id="c-41931855" checked=""/><div class="controls bullet"><span class="by">DHRicoF</span><span>|</span><a href="#41931705">parent</a><span>|</span><a href="#41930071">next</a><span>|</span><label class="collapse" for="c-41931855">[-]</label><label class="expand" for="c-41931855">[1 more]</label></div><br/><div class="children"><div class="content">One way in with address data sparcity is using arenas, a big pull of memory allocated where the strings lives, instead of them &quot;floating&quot; around all the heap.<p>the other improvements are related to the representation and layout of utf.<p>I&#x27;ve only read this briefly, so I don&#x27;t know if there are other optimizations there in the memory allocation or anywhere.</div><br/></div></div></div></div><div id="41930071" class="c"><input type="checkbox" id="c-41930071" checked=""/><div class="controls bullet"><span class="by">Neywiny</span><span>|</span><a href="#41931705">prev</a><span>|</span><a href="#41930155">next</a><span>|</span><label class="collapse" for="c-41930071">[-]</label><label class="expand" for="c-41930071">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s an interesting write up and I hope the API change yields more useful data types. I&#x27;m not sure about the 28 byte size field, though. The way the rest of the code works it seems like a typo and sound be 8 bytes. I may dig into the code and find out.</div><br/></div></div><div id="41930155" class="c"><input type="checkbox" id="c-41930155" checked=""/><div class="controls bullet"><span class="by">tkahlrt</span><span>|</span><a href="#41930071">prev</a><span>|</span><label class="collapse" for="c-41930155">[-]</label><label class="expand" for="c-41930155">[1 more]</label></div><br/><div class="children"><div class="content">Dupe: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41927436">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41927436</a></div><br/></div></div></div></div></div></div></div></body></html>