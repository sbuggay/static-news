<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1737104455656" as="style"/><link rel="stylesheet" href="styles.css?v=1737104455656"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/SonyResearch/micro_diffusion">Diffusion training from scratch on a micro-budget</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>lnyan</span> | <span>19 comments</span></div><br/><div><div id="42730538" class="c"><input type="checkbox" id="c-42730538" checked=""/><div class="controls bullet"><span class="by">philipkglass</span><span>|</span><a href="#42731112">next</a><span>|</span><label class="collapse" for="c-42730538">[-]</label><label class="expand" for="c-42730538">[8 more]</label></div><br/><div class="children"><div class="content">The differently styled images of &quot;astronaut riding a horse&quot; are great, but that has been a go-to example for image generation models for a while now. The introduction says that they train on 37 million real <i>and synthetic</i> images. Are astronauts riding horses now represented in the training data more than would have been possible 5 years ago?<p>If it&#x27;s possible to get good, generalizable results from such (relatively) small data sets, I&#x27;d like to see what this approach can do if trained exclusively on non-synthetic permissively licensed inputs. It might be possible to make a good &quot;free of any possible future legal challenges&quot; image generator just from public domain content.</div><br/><div id="42731804" class="c"><input type="checkbox" id="c-42731804" checked=""/><div class="controls bullet"><span class="by">godelski</span><span>|</span><a href="#42730538">parent</a><span>|</span><a href="#42731112">next</a><span>|</span><label class="collapse" for="c-42731804">[-]</label><label class="expand" for="c-42731804">[7 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>  &gt;  Are astronauts riding horses now represented in the training data more than would have been possible 5 years ago?
</code></pre>
Yes.<p>Though I&#x27;m a bit confused why this became the goto. If I remember correctly the claim was about it being &quot;out of distribution&quot; but I have high confidence that astronauts riding horses are within the training dataset prior to DALL-E. The big reason everyone should believe this is because astronauts have always been compared to cowboys. And... what do we stereotypically associate with cowboys?<p>The second reason, is because it is the main poster for the 2006 movie The Astronaut Farmer:
<a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;The_Astronaut_Farmer" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;The_Astronaut_Farmer</a><p>But here&#x27;s some other ones I found that are timestamped. It&#x27;s kinda hard to find random digital art that is timestamped. Looks like even shutterstock doesn&#x27;t... And places like deviantart don&#x27;t have great search. Hell... even Google will just flat out ignore advanced search terms (the fuck is even the point of having them?). The term is so littered now that this makes search difficult, but I found two relatively quickly.<p>2014: <a href="https:&#x2F;&#x2F;www.behance.net&#x2F;gallery&#x2F;18695387&#x2F;Space-Cowboy#" rel="nofollow">https:&#x2F;&#x2F;www.behance.net&#x2F;gallery&#x2F;18695387&#x2F;Space-Cowboy#</a><p>2016: <a href="https:&#x2F;&#x2F;drawception.com&#x2F;game&#x2F;DZgKzhbrhq&#x2F;badass-space-cowboy-on-robot-horse&#x2F;" rel="nofollow">https:&#x2F;&#x2F;drawception.com&#x2F;game&#x2F;DZgKzhbrhq&#x2F;badass-space-cowboy-...</a><p>But even if the samples did not exist, I do not think this represents a significantly out of distribution, if at all, image. Are we in doubt that there&#x27;s images like astronauts riding rockets? I think certainly there exists &quot;astronaut riding horse&quot; along the interpolation between &quot;person riding horse&quot; and &quot;astronaut riding &lt;insert any term&gt;&quot;. Mind you, generating samples in distribution but not in training (or test) is still a great feat and impressive accomplishment. This should in no way be underplayed at all! But there is a difference in claiming out of distribution.<p><pre><code>  &gt; I&#x27;d like to see what this approach can do if trained exclusively on non-synthetic permissively licensed inputs
</code></pre>
One minor point. The term &quot;synthetically generated&quot; is a bit ambiguous. It may include digital art. It does not necessarily mean generated by a machine learning generative model. TBH, I find the ambiguity frustrating as there is some important distinctions.</div><br/><div id="42733607" class="c"><input type="checkbox" id="c-42733607" checked=""/><div class="controls bullet"><span class="by">doctorpangloss</span><span>|</span><a href="#42730538">root</a><span>|</span><a href="#42731804">parent</a><span>|</span><a href="#42731897">next</a><span>|</span><label class="collapse" for="c-42733607">[-]</label><label class="expand" for="c-42733607">[2 more]</label></div><br/><div class="children"><div class="content">The original meme about the limitations of diffusion was the text to image prompt, “a horse riding an astronaut.”<p>It’s in all sorts of papers. This guy Gary Marcus used to be a big crank about AI limitations and was the “being wrong on the Internet” guy who got a lot of mainstream attention to the problem - <a href="https:&#x2F;&#x2F;garymarcus.substack.com&#x2F;p&#x2F;horse-rides-astronaut" rel="nofollow">https:&#x2F;&#x2F;garymarcus.substack.com&#x2F;p&#x2F;horse-rides-astronaut</a>. Not sure how much we hear from him nowadays.<p>The astronaut riding horses thing is from how 10-1,000x more people are doing this stuff now, and kind of process the whole zeitgeist before their arrival with fuzzy glasses. The irony is it is the human, not the generator, that got confused about the purposefully out of sample horse riding an astronaut prompt, and changed it to astronaut riding a horse.</div><br/><div id="42734840" class="c"><input type="checkbox" id="c-42734840" checked=""/><div class="controls bullet"><span class="by">littlestymaar</span><span>|</span><a href="#42730538">root</a><span>|</span><a href="#42733607">parent</a><span>|</span><a href="#42731897">next</a><span>|</span><label class="collapse" for="c-42734840">[-]</label><label class="expand" for="c-42734840">[1 more]</label></div><br/><div class="children"><div class="content">This whole “Horse riding an astronaut” was a bit dumb in the first place, because AFAIK CLIP (the text encoder used in first-generation diffusion models) doesn&#x27;t really distinguish the two in the first place. (So fundamentally that Marcus guy was right, the tech employed was fundamentally unable to do what he asked of to do)<p>&gt; The irony is it is the human, not the generator, that got confused about the purposefully out of sample horse riding an astronaut prompt, and changed it to astronaut riding a horse.<p>You&#x27;re mixing things up: &quot;astronaut ridding a horse&quot; was used by OpenAI their Dall-E 2 announcement blog post, ”horse ridding an astronaut&quot; only came after, and had a much more niche audience anyway, so it&#x27;s absolutely not an instance of “humans got caught by an out of sample instance and misremembered”.</div><br/></div></div></div></div><div id="42731897" class="c"><input type="checkbox" id="c-42731897" checked=""/><div class="controls bullet"><span class="by">throwaway314155</span><span>|</span><a href="#42730538">root</a><span>|</span><a href="#42731804">parent</a><span>|</span><a href="#42733607">prev</a><span>|</span><a href="#42731112">next</a><span>|</span><label class="collapse" for="c-42731897">[-]</label><label class="expand" for="c-42731897">[4 more]</label></div><br/><div class="children"><div class="content">It wasn&#x27;t because it was &quot;out of distribution&quot; (although that&#x27;s a reasonable assumption and it is at least _somewhat_ out of distribution, given the scarcity of your examples).<p>Like the avocado armchair before it, the real reason was simply that it &quot;looked cool&quot;. It scratched some particular itch for people.<p>For me, indeed it&#x27;s correlated with &quot;imagination&quot;. An avocado armchair output had a particular blending of concepts that matched (in my mind) the way humans blend concepts. With the &quot;astronaut riding a horse on the moon&quot;, you are hitting a little of that; but also you&#x27;re effectively addressing criticism about text-to-image models with a prompt that serves as an evaluation for a couple of things:<p>1.) t2i is bad at people (astronaut)<p>2.) t2i struggles with animal legs (horse)<p>3.) t2i struggles with costumes, commonly putting the spacesuit on both the astronaut _and_ the horse - and mangling that in the process (and usually ruining any sense of good artistic aesthetics).<p>4.) t2i commonly gets confused with the moon specifically, frequently creating a moon _landscape_ but also doing something silly like putting &quot;another&quot; moon in the &quot;night sky&quot; as well.<p>There are probably other things. And of course this is subjective. But as someone who followed these things as they happened, which was I believe the release of DALL-E 2 and the first Stable Diffusion models, this is why I thought it was a good evaluation (at the time).<p>edit: I truly despise HN comment&#x27;s formatting rules.</div><br/><div id="42732686" class="c"><input type="checkbox" id="c-42732686" checked=""/><div class="controls bullet"><span class="by">godelski</span><span>|</span><a href="#42730538">root</a><span>|</span><a href="#42731897">parent</a><span>|</span><a href="#42731112">next</a><span>|</span><label class="collapse" for="c-42732686">[-]</label><label class="expand" for="c-42732686">[3 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>  &gt; although that&#x27;s a reasonable assumption and it is at least _somewhat_ out of distribution, given the scarcity of your examples
</code></pre>
This isn&#x27;t what &quot;out of distribution&quot; means. There can be ZERO images and it wouldn&#x27;t mean something is OOD. OOD means not within the underlying distribution. That&#x27;s why I made the whole point about interpolation.<p>Is it scarce? Hard to tell. But I wouldn&#x27;t make that assumption based on my examples. Search is poisoned now.<p>I think there&#x27;s a lot of things that are assumed scarce which are not. There&#x27;s entire datasets that are spoiled because people haven&#x27;t bothered to check.<p><pre><code>  &gt; edit: I truly despise HN comment&#x27;s formatting rules.

  Add 2 spaces
  on a new
  line and 

  you can do whatever you want because it is a quote block
  That&#x27;s also why I quote people this way</code></pre></div><br/><div id="42732781" class="c"><input type="checkbox" id="c-42732781" checked=""/><div class="controls bullet"><span class="by">throwaway314155</span><span>|</span><a href="#42730538">root</a><span>|</span><a href="#42732686">parent</a><span>|</span><a href="#42731112">next</a><span>|</span><label class="collapse" for="c-42732781">[-]</label><label class="expand" for="c-42732781">[2 more]</label></div><br/><div class="children"><div class="content">&gt;  This isn&#x27;t what &quot;out of distribution&quot; means. There can be ZERO images and it wouldn&#x27;t mean something is OOD. OOD means not within the underlying distribution. That&#x27;s why I made the whole point about interpolation.<p>Sure. I&#x27;ll concede to that, although it&#x27;s a bit pedantic.<p>&gt; Is it scarce? Hard to tell. But I wouldn&#x27;t make that assumption based on my examples. Search is poisoned now.<p>I was more referring to why it originally was used, not why it would still be used. In any case, I maintain that it was _not_ used for being OOD, which I mentioned in my first comment.<p>&gt;  Add 2 spaces
&gt;  on a new
&gt;  line and 
&gt;  ...<p>Yeah, I still hate it. Sorry. Give me markdown support and I&#x27;ll be happy.<p>edit: I&#x27;ll leave my mistake here as an example of why it&#x27;s non-intuitive.</div><br/><div id="42733434" class="c"><input type="checkbox" id="c-42733434" checked=""/><div class="controls bullet"><span class="by">godelski</span><span>|</span><a href="#42730538">root</a><span>|</span><a href="#42732781">parent</a><span>|</span><a href="#42731112">next</a><span>|</span><label class="collapse" for="c-42733434">[-]</label><label class="expand" for="c-42733434">[1 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>  &gt; although it&#x27;s a bit pedantic.
</code></pre>
If we&#x27;re discussing research -- and I think this is fair since we&#x27;re discussing a link to an arxiv paper -- then being pedantic matters. Things have definitions and we are supposed to know what they mean.<p><pre><code>  &gt; Give me markdown support and I&#x27;ll be happy.
</code></pre>
You and me both</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="42731112" class="c"><input type="checkbox" id="c-42731112" checked=""/><div class="controls bullet"><span class="by">llm_trw</span><span>|</span><a href="#42730538">prev</a><span>|</span><a href="#42731765">next</a><span>|</span><label class="collapse" for="c-42731112">[-]</label><label class="expand" for="c-42731112">[7 more]</label></div><br/><div class="children"><div class="content">&gt;The estimated training time for the end-to-end model on an 8×H100 machine is 2.6 days.<p>That&#x27;s a $250,000 machine for the micro budget. Or if you don&#x27;t want to do it locally ~$2,000 to do it on someone else&#x27;s machine for the one model.</div><br/><div id="42731535" class="c"><input type="checkbox" id="c-42731535" checked=""/><div class="controls bullet"><span class="by">godelski</span><span>|</span><a href="#42731112">parent</a><span>|</span><a href="#42731300">next</a><span>|</span><label class="collapse" for="c-42731535">[-]</label><label class="expand" for="c-42731535">[3 more]</label></div><br/><div class="children"><div class="content">From the abstract<p><pre><code>  Finally, using only 37M publicly available real and synthetic images, we train a 1.16 billion parameter sparse transformer with only $1,890 economical cost and achieve a 12.7 FID in zero-shot generation on the COCO dataset. Notably, our model achieves competitive FID and high-quality generations while incurring 118× lower cost than stable diffusion models and 14× lower cost than the current state-of-the-art approach that costs $28,400.
</code></pre>
Figure 1<p><pre><code>  Qualitative evaluation of the image generation capabilities of our model (512×512 image resolution). Our model is trained in 2.6 days on a single 8×H100 machine (amounting to only $1,890 in GPU cost) without any proprietary or billion image dataset. 
</code></pre>
End of intro under the key contributions bullet points<p><pre><code>  - Using a micro-budget of only $1,890, we train a 1.16 billion parameter sparse diffusion transformer on 37M images and a 75% masking ratio that achieves a 12.7 FID in zero-shot generation on the COCO dataset. The wall-clock time of our training is only 2.6 days on a single 8×H100 GPU machine, 14× lower than the current state-of-the-art approach that would take 37.6 training days ($28,400 GPU cost).
</code></pre>
I&#x27;m just saying, the authors are not trying to hide this point. They are making it abundantly clear.<p>I should also mention that this is the most straightforward way to discuss pricing. It is going to be much more difficult if they do comparisons including the costs of the machines as then there needs to be an amortization cost baked in and that&#x27;s going to have to include costs of electricity, supporting hardware, networking, how long the hardware is used for, at what percentage utility the hardware is, costs of employees to maintain, and all that fun stuff. Which... you can estimate by... GPU rental costs... Since they are in fact baking those numbers in. They explain their numbers in the appendix under Table 5. It is estimated at $3.75&#x2F;H100&#x2F;hr.<p>Btw, they also state a conversion to A100s</div><br/><div id="42732656" class="c"><input type="checkbox" id="c-42732656" checked=""/><div class="controls bullet"><span class="by">nickpsecurity</span><span>|</span><a href="#42731112">root</a><span>|</span><a href="#42731535">parent</a><span>|</span><a href="#42731300">next</a><span>|</span><label class="collapse" for="c-42732656">[-]</label><label class="expand" for="c-42732656">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been collecting papers on straining models on small numbers of GPU&#x27;s. What I look for is (a) type of GPU, (b) how many, and (c) how long it ran. I can quickly establish a <i>minimum</i> cost from that.<p>I say minimum because there&#x27;s pre-processing data, setting up the machine configuration, trial runs on small data to make sure it&#x27;s working, repeats during the main run if failures happened, and any time to load or offload data (eg checkpoints) from the GPU instance. So, the numbers in the papers are a nice minimum rather than the actual cost of a replication which is highly specific to one&#x27;s circumstances.</div><br/><div id="42733452" class="c"><input type="checkbox" id="c-42733452" checked=""/><div class="controls bullet"><span class="by">godelski</span><span>|</span><a href="#42731112">root</a><span>|</span><a href="#42732656">parent</a><span>|</span><a href="#42731300">next</a><span>|</span><label class="collapse" for="c-42733452">[-]</label><label class="expand" for="c-42733452">[1 more]</label></div><br/><div class="children"><div class="content">Sure... but they provide all that too. They&#x27;re just saving most people extra work. And honestly, I think it is nice to have a historical record. There&#x27;s plenty of times I&#x27;m looking in papers for numbers that don&#x27;t seem relevant at the time but are later. Doesn&#x27;t hurt.</div><br/></div></div></div></div></div></div><div id="42731300" class="c"><input type="checkbox" id="c-42731300" checked=""/><div class="controls bullet"><span class="by">GaggiX</span><span>|</span><a href="#42731112">parent</a><span>|</span><a href="#42731535">prev</a><span>|</span><a href="#42732654">next</a><span>|</span><label class="collapse" for="c-42731300">[-]</label><label class="expand" for="c-42731300">[2 more]</label></div><br/><div class="children"><div class="content">You can do it on one single GPU but you would need to use gradient accumulation and the training would probably last 1-2 months on a consumer GPU.</div><br/><div id="42731829" class="c"><input type="checkbox" id="c-42731829" checked=""/><div class="controls bullet"><span class="by">programd</span><span>|</span><a href="#42731112">root</a><span>|</span><a href="#42731300">parent</a><span>|</span><a href="#42732654">next</a><span>|</span><label class="collapse" for="c-42731829">[-]</label><label class="expand" for="c-42731829">[1 more]</label></div><br/><div class="children"><div class="content">Accepting the 1-2 month estimate at face value we&#x27;re firmly in hobby territory now. Any adult with a job and a GPU can train their own models for an investement roughly equivelent to a high end gaming machine. Let&#x27;s run some very hand wavy numbers:<p>RTX 4090 ($3000) + CPU&#x2F;Motherboard&#x2F;SSD&#x2F;etc ($1600) + two months at full power ($300) is only on the order of $5000 initial investment for the first model. After that you can train 6 models per year to your exact specifications for an extra $150 per month in power usage. This cost will go down.<p>I&#x27;m expecting an explosion of micro-AI models specifically tailored for very narrow use cases. I mean Hugging face already has thousands of models, but they&#x27;re mostly reusing the aligned big corporate stuff. What&#x27;s coming is an avalanche of infinately creative micro-AI models, both good and bad. There are no moats.<p>It&#x27;s going to be kind of like when teenagers got their hands on personal computers. Oh wait....</div><br/></div></div></div></div><div id="42732654" class="c"><input type="checkbox" id="c-42732654" checked=""/><div class="controls bullet"><span class="by">corysama</span><span>|</span><a href="#42731112">parent</a><span>|</span><a href="#42731300">prev</a><span>|</span><a href="#42731765">next</a><span>|</span><label class="collapse" for="c-42732654">[-]</label><label class="expand" for="c-42732654">[1 more]</label></div><br/><div class="children"><div class="content">So, a kilo-budget.</div><br/></div></div></div></div><div id="42731765" class="c"><input type="checkbox" id="c-42731765" checked=""/><div class="controls bullet"><span class="by">__loam</span><span>|</span><a href="#42731112">prev</a><span>|</span><label class="collapse" for="c-42731765">[-]</label><label class="expand" for="c-42731765">[3 more]</label></div><br/><div class="children"><div class="content">The pixel art these models produce continues to look like shit and not be actual pixel art.<p>Where&#x27;d you get your dataset? Did you get permission from the rightsholders to use their work for this?</div><br/><div id="42732011" class="c"><input type="checkbox" id="c-42732011" checked=""/><div class="controls bullet"><span class="by">GaggiX</span><span>|</span><a href="#42731765">parent</a><span>|</span><label class="collapse" for="c-42732011">[-]</label><label class="expand" for="c-42732011">[2 more]</label></div><br/><div class="children"><div class="content">This model is kind of the bottom of the barrel. Also there are models that specialize in pixel art: <a href="https:&#x2F;&#x2F;www.pixellab.ai&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.pixellab.ai&#x2F;</a></div><br/><div id="42733893" class="c"><input type="checkbox" id="c-42733893" checked=""/><div class="controls bullet"><span class="by">AuryGlenz</span><span>|</span><a href="#42731765">root</a><span>|</span><a href="#42732011">parent</a><span>|</span><label class="collapse" for="c-42733893">[-]</label><label class="expand" for="c-42733893">[1 more]</label></div><br/><div class="children"><div class="content">I’m guessing that’s built on Stable Diffusion&#x2F;Flux just as RetroDiffusion is. That would mean it’s not directly pixel art and needs to be downscaled after the fact. The results can still be pretty great but it’s not super ideal.<p>Training a small (64x64 or the like) pixel based model instead of something that relies on a VAE may in fact be cheaper than what’s in the OP and could probably make someone some good money besides but the lack of training data would be a huge issue.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>