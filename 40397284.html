<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1716195673996" as="style"/><link rel="stylesheet" href="styles.css?v=1716195673996"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://matiasklemola.com/liikennematto-devlog-five">A kids traffic mat in Elm</a> <span class="domain">(<a href="https://matiasklemola.com">matiasklemola.com</a>)</span></div><div class="subtext"><span>eliasson</span> | <span>12 comments</span></div><br/><div><div id="40407132" class="c"><input type="checkbox" id="c-40407132" checked=""/><div class="controls bullet"><span class="by">grumpyprole</span><span>|</span><a href="#40406837">next</a><span>|</span><label class="collapse" for="c-40407132">[-]</label><label class="expand" for="c-40407132">[2 more]</label></div><br/><div class="children"><div class="content">Well done to the author on this project. A beautiful architecture and code base with not an &quot;object&quot; in sight. Projects such as this demonstrate how complex interactive applications can be built without pervasive mutable state. Pure functions are everywhere, which makes it much easier to reason about, test and reuse this code</div><br/><div id="40408227" class="c"><input type="checkbox" id="c-40408227" checked=""/><div class="controls bullet"><span class="by">klemola</span><span>|</span><a href="#40407132">parent</a><span>|</span><a href="#40406837">next</a><span>|</span><label class="collapse" for="c-40408227">[-]</label><label class="expand" for="c-40408227">[1 more]</label></div><br/><div class="children"><div class="content">Thank you! Using a pure functional programming language in a game project has been suprisingly easy. I find an event driven, completely asynchoronus architecture well suited for a simulation game such as Liikennematto. Some events are big (a road tile was placed - this will update the tilemap as well as the road network graph), and some are small (UI events). Everything boils down to how an event will transform the game state.<p>Though many games have been built with Elm, I&#x27;ve had to implement lots of &quot;game engine&quot; code myself. For example, the collision system, physics (acceleration etc.), and path finding are custom code. It&#x27;s worth mentioning that this is my fist gamedev project, and I&#x27;ve had to read up a quite a bit on the topic. Still the difficult was not in Elm itself, but in math and data structures, as it would be on any language.<p>Elm&#x27;s lack of runtime exceptions and mutable state makes any game quite robust. Most of the bugs in Liikennematto have been of omissions (forgot to update something) and in math formulas. 3rd party Elm libraries are often excellent with great docs and have helped along the way.<p>Lastly Elm is quite performant (pure functions can be inlined and easily optimized) and I can create a single .js file that contains the game code, UI and the assets (which are still SVG in Elm). The whole game is still about 1 megabyte minimized! I think that&#x27;s amazing, despite not shipping the runtime enviroment (the browser).</div><br/></div></div></div></div><div id="40406837" class="c"><input type="checkbox" id="c-40406837" checked=""/><div class="controls bullet"><span class="by">klemola</span><span>|</span><a href="#40407132">prev</a><span>|</span><a href="#40408244">next</a><span>|</span><label class="collapse" for="c-40406837">[-]</label><label class="expand" for="c-40406837">[2 more]</label></div><br/><div class="children"><div class="content">Whoa, didn’t expect to make it here. Thanks, OP!<p>This has been a fun (and rather long) project. I craved for a simple city builder that a toddler could play and understand. You might want to start from the first devlog entry to see where Liikennematto came from.<p>You can play Liikennematto in your browser on itch.io[1] (the link is buried at the end of the article).<p>[1] <a href="https:&#x2F;&#x2F;yourmagicisworking.itch.io&#x2F;liikennematto" rel="nofollow">https:&#x2F;&#x2F;yourmagicisworking.itch.io&#x2F;liikennematto</a></div><br/><div id="40407005" class="c"><input type="checkbox" id="c-40407005" checked=""/><div class="controls bullet"><span class="by">eliasson</span><span>|</span><a href="#40406837">parent</a><span>|</span><a href="#40408244">next</a><span>|</span><label class="collapse" for="c-40407005">[-]</label><label class="expand" for="c-40407005">[1 more]</label></div><br/><div class="children"><div class="content">Thank you for building an writing about it, I have enjoyed reading about your progress over the years!</div><br/></div></div></div></div><div id="40408244" class="c"><input type="checkbox" id="c-40408244" checked=""/><div class="controls bullet"><span class="by">hombre_fatal</span><span>|</span><a href="#40406837">prev</a><span>|</span><a href="#40411939">next</a><span>|</span><label class="collapse" for="c-40408244">[-]</label><label class="expand" for="c-40408244">[1 more]</label></div><br/><div class="children"><div class="content">This is really polished. It&#x27;s one thing to make cars drive around a city, but really cool to also make them go into and exit parking.<p>I&#x27;ve done some basic game dev in Elm and was surprised how nice it was. In one game, I had melee fighters moving around a map fighting each other. Much later I came back to add a projectile class.<p>Having not touched the game code in months, adding an archer was a matter of adding an `Archer` model (with archer specific state) to an enum and then following the errors until I&#x27;d handled the archer at every switch site in the code. It blew my mind that I had a working archer system without even running the code once and without having to reload the whole code base into my head.</div><br/></div></div><div id="40411939" class="c"><input type="checkbox" id="c-40411939" checked=""/><div class="controls bullet"><span class="by">falcor84</span><span>|</span><a href="#40408244">prev</a><span>|</span><a href="#40408713">next</a><span>|</span><label class="collapse" for="c-40411939">[-]</label><label class="expand" for="c-40411939">[1 more]</label></div><br/><div class="children"><div class="content">An amazing project, kudos!<p>I wonder if there is some reasonably priced flexible display I could use to make this into an actual &quot;mat&quot; for kids to play on.<p>EDIT: I just found this; anyone here with experience with this kind of tech? 
<a href="https:&#x2F;&#x2F;www.aliexpress.com&#x2F;item&#x2F;1005006497423497.html" rel="nofollow">https:&#x2F;&#x2F;www.aliexpress.com&#x2F;item&#x2F;1005006497423497.html</a></div><br/></div></div><div id="40408713" class="c"><input type="checkbox" id="c-40408713" checked=""/><div class="controls bullet"><span class="by">spicyusername</span><span>|</span><a href="#40411939">prev</a><span>|</span><a href="#40410244">next</a><span>|</span><label class="collapse" for="c-40408713">[-]</label><label class="expand" for="c-40408713">[1 more]</label></div><br/><div class="children"><div class="content">Elm is a fun language to work with.</div><br/></div></div><div id="40410244" class="c"><input type="checkbox" id="c-40410244" checked=""/><div class="controls bullet"><span class="by">tmountain</span><span>|</span><a href="#40408713">prev</a><span>|</span><a href="#40406369">next</a><span>|</span><label class="collapse" for="c-40410244">[-]</label><label class="expand" for="c-40410244">[1 more]</label></div><br/><div class="children"><div class="content">Beautiful write up, thank you!</div><br/></div></div><div id="40406369" class="c"><input type="checkbox" id="c-40406369" checked=""/><div class="controls bullet"><span class="by">playingalong</span><span>|</span><a href="#40410244">prev</a><span>|</span><a href="#40407100">next</a><span>|</span><label class="collapse" for="c-40406369">[-]</label><label class="expand" for="c-40406369">[2 more]</label></div><br/><div class="children"><div class="content">Like SimCity.</div><br/><div id="40406575" class="c"><input type="checkbox" id="c-40406575" checked=""/><div class="controls bullet"><span class="by">MisterTea</span><span>|</span><a href="#40406369">parent</a><span>|</span><a href="#40407100">next</a><span>|</span><label class="collapse" for="c-40406575">[-]</label><label class="expand" for="c-40406575">[1 more]</label></div><br/><div class="children"><div class="content">More like SimTown: <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;SimTown" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;SimTown</a> I played it long ago and was pretty simple and fun. More kid friendly for sure but it didn&#x27;t have traffic from memory.</div><br/></div></div></div></div><div id="40407100" class="c"><input type="checkbox" id="c-40407100" checked=""/><div class="controls bullet"><span class="by">airstrike</span><span>|</span><a href="#40406369">prev</a><span>|</span><label class="collapse" for="c-40407100">[-]</label><label class="expand" for="c-40407100">[1 more]</label></div><br/><div class="children"><div class="content">Pretty cool! Sounds like a fun project to try to port over to Rust using iced if anyone is looking for ideas ;-)<p><a href="https:&#x2F;&#x2F;github.com&#x2F;iced-rs&#x2F;iced">https:&#x2F;&#x2F;github.com&#x2F;iced-rs&#x2F;iced</a></div><br/></div></div></div></div></div></div></div></body></html>