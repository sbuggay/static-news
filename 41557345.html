<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1726563668770" as="style"/><link rel="stylesheet" href="styles.css?v=1726563668770"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.latacora.com/blog/2024/09/13/datomic-and-content-addressable-techniques/">Datomic and Content Addressable Techniques</a> <span class="domain">(<a href="https://www.latacora.com">www.latacora.com</a>)</span></div><div class="subtext"><span>lvh</span> | <span>32 comments</span></div><br/><div><div id="41557870" class="c"><input type="checkbox" id="c-41557870" checked=""/><div class="controls bullet"><span class="by">w10-1</span><span>|</span><a href="#41557742">next</a><span>|</span><label class="collapse" for="c-41557870">[-]</label><label class="expand" for="c-41557870">[6 more]</label></div><br/><div class="children"><div class="content">Their content-addressing hash would seem critical, but the &quot;combineUnordered&quot;  hash they use just adds each byte.  The API is clear that this is only as good as possible, and I&#x27;m not sure I would rely on it for data used for security investigations.  I suspect they&#x27;ll come up with something like an arbitrary but fixed order over keys that would improve hash quality.<p>More generally, while I can maybe understand what they&#x27;re doing, it&#x27;s hard to imagine how to QA it in a way that&#x27;s convincing to customers without a lot of data&#x2F;compute&#x2F;coverage analysis.</div><br/><div id="41560007" class="c"><input type="checkbox" id="c-41560007" checked=""/><div class="controls bullet"><span class="by">paulvrutledge</span><span>|</span><a href="#41557870">parent</a><span>|</span><a href="#41559826">next</a><span>|</span><label class="collapse" for="c-41560007">[-]</label><label class="expand" for="c-41560007">[2 more]</label></div><br/><div class="children"><div class="content">I suspect you&#x27;re right and was already having similar thoughts regarding the hashing scheme. I put a patch together and am going to supplement with some additional tests of the collision space.<p>Unordered hashes made more sense for arbitrary Clojure data structures where the keys might be complex compound objects, but once we&#x27;re in the land of datoms with finite value data types it&#x27;s pretty easy to enforce a consistent ordering.<p>(disclaimer: I wrote much of the feature and post)</div><br/><div id="41562336" class="c"><input type="checkbox" id="c-41562336" checked=""/><div class="controls bullet"><span class="by">limit499karma</span><span>|</span><a href="#41557870">root</a><span>|</span><a href="#41560007">parent</a><span>|</span><a href="#41559826">next</a><span>|</span><label class="collapse" for="c-41562336">[-]</label><label class="expand" for="c-41562336">[1 more]</label></div><br/><div class="children"><div class="content">&gt; where the keys might be complex compound objects<p>Given that any (simple) object has a unique c.a. identity, even anonymous (and unordered) containment in the parent object provides a key, that is k-&gt;k, with implicit order over {K} in the domain of keys (say ascending sort on k0..kn). As you obviously know, there are various schemas for that, such as &quot;objspace:&#x2F;&#x2F;oid&#x2F;&lt;value-hash&gt;&quot;. By definition, that is a bounded domain, with the same cardinality as the hash space. So then there remains the matter of nesting (aka trees) in which case unique identity of the parent is recursively computed as we walk up the tree from the leaves.</div><br/></div></div></div></div><div id="41559826" class="c"><input type="checkbox" id="c-41559826" checked=""/><div class="controls bullet"><span class="by">lvh</span><span>|</span><a href="#41557870">parent</a><span>|</span><a href="#41560007">prev</a><span>|</span><a href="#41560711">next</a><span>|</span><label class="collapse" for="c-41559826">[-]</label><label class="expand" for="c-41559826">[1 more]</label></div><br/><div class="children"><div class="content">Re: hashing: Yes, but I&#x27;ll leave that one to Paul who is a lot smarter than I am :)<p>Re: QA: can you say a bit more about the type of coverage you&#x27;re worried about? Is your concern that we&#x27;d be missing APIs, or that the storage format itself breaks, resulting in fact elision? payne (the underlying project) has a borderline obnoxious amount of tests, but that doesn&#x27;t mean we didn&#x27;t miss anything :)</div><br/></div></div><div id="41560711" class="c"><input type="checkbox" id="c-41560711" checked=""/><div class="controls bullet"><span class="by">juoitre</span><span>|</span><a href="#41557870">parent</a><span>|</span><a href="#41559826">prev</a><span>|</span><a href="#41557742">next</a><span>|</span><label class="collapse" for="c-41560711">[-]</label><label class="expand" for="c-41560711">[2 more]</label></div><br/><div class="children"><div class="content">&gt; in a way that&#x27;s convincing to customers<p>Customers of this sort of security consulting are largely uninterested in the security as much as the audit report that allows them to say to their customers and incestors “we had these security professionals look at our stuff and this is what they said”.</div><br/><div id="41560862" class="c"><input type="checkbox" id="c-41560862" checked=""/><div class="controls bullet"><span class="by">lvh</span><span>|</span><a href="#41557870">root</a><span>|</span><a href="#41560711">parent</a><span>|</span><a href="#41557742">next</a><span>|</span><label class="collapse" for="c-41560862">[-]</label><label class="expand" for="c-41560862">[1 more]</label></div><br/><div class="children"><div class="content">Some of our customers, like Tailscale, are a helluva lot more picky than that.</div><br/></div></div></div></div></div></div><div id="41557742" class="c"><input type="checkbox" id="c-41557742" checked=""/><div class="controls bullet"><span class="by">linotype</span><span>|</span><a href="#41557870">prev</a><span>|</span><a href="#41562542">next</a><span>|</span><label class="collapse" for="c-41557742">[-]</label><label class="expand" for="c-41557742">[22 more]</label></div><br/><div class="children"><div class="content">Separate question: are there any new startups out there writing code primarily in Clojure?</div><br/><div id="41558365" class="c"><input type="checkbox" id="c-41558365" checked=""/><div class="controls bullet"><span class="by">kaliszad</span><span>|</span><a href="#41557742">parent</a><span>|</span><a href="#41560751">next</a><span>|</span><label class="collapse" for="c-41558365">[-]</label><label class="expand" for="c-41558365">[5 more]</label></div><br/><div class="children"><div class="content">Yes, in fact there is also a good number of conferences, for instance in less than two days <a href="https:&#x2F;&#x2F;2024.heartofclojure.eu&#x2F;" rel="nofollow">https:&#x2F;&#x2F;2024.heartofclojure.eu&#x2F;</a> starts in Belgium for instance (meet me there ;-) ).<p>We are writing a trading system for a small broker company in Clojure&#x2F; ClojureScript with a Datomic centered backend. The previous company some of us on the team worked at had the code-base also in Clojure&#x2F; ClojureScript.</div><br/><div id="41559715" class="c"><input type="checkbox" id="c-41559715" checked=""/><div class="controls bullet"><span class="by">lvh</span><span>|</span><a href="#41557742">root</a><span>|</span><a href="#41558365">parent</a><span>|</span><a href="#41559305">next</a><span>|</span><label class="collapse" for="c-41559715">[-]</label><label class="expand" for="c-41559715">[1 more]</label></div><br/><div class="children"><div class="content">(I&#x27;m one of the founders of Latacora and reviewed the post.) If any of you are at Heart of Clojure, I&#x27;ll be there both wearing my Latacora hat and my Clojurists Together hat :)</div><br/></div></div><div id="41559305" class="c"><input type="checkbox" id="c-41559305" checked=""/><div class="controls bullet"><span class="by">tsingy</span><span>|</span><a href="#41557742">root</a><span>|</span><a href="#41558365">parent</a><span>|</span><a href="#41559715">prev</a><span>|</span><a href="#41560751">next</a><span>|</span><label class="collapse" for="c-41559305">[-]</label><label class="expand" for="c-41559305">[3 more]</label></div><br/><div class="children"><div class="content">How is the job market for juniors? Functional programming jobs seems to be anti-juniors when hiring.</div><br/><div id="41559642" class="c"><input type="checkbox" id="c-41559642" checked=""/><div class="controls bullet"><span class="by">nextos</span><span>|</span><a href="#41557742">root</a><span>|</span><a href="#41559305">parent</a><span>|</span><a href="#41559524">next</a><span>|</span><label class="collapse" for="c-41559642">[-]</label><label class="expand" for="c-41559642">[1 more]</label></div><br/><div class="children"><div class="content">Sadly Common Lisp, Scheme, Clojure, Julia, OCaml, F# and Haskell jobs are quite scarce.<p>For example, right now, I can only see ~50 LinkedIn EU Clojure ads. A dozen more mention Clojure but it does not seem to be the main focus of the job.<p>Would love to be proven wrong, though. Perhaps these jobs are sometimes not advertised via LinkedIn.</div><br/></div></div><div id="41559524" class="c"><input type="checkbox" id="c-41559524" checked=""/><div class="controls bullet"><span class="by">kaliszad</span><span>|</span><a href="#41557742">root</a><span>|</span><a href="#41559305">parent</a><span>|</span><a href="#41559642">prev</a><span>|</span><a href="#41560751">next</a><span>|</span><label class="collapse" for="c-41559524">[-]</label><label class="expand" for="c-41559524">[1 more]</label></div><br/><div class="children"><div class="content">Hard to say, I was always contacted directly by the team&#x2F; had other role and later it turned out I can do a fair bit of programming too ;-)</div><br/></div></div></div></div></div></div><div id="41560751" class="c"><input type="checkbox" id="c-41560751" checked=""/><div class="controls bullet"><span class="by">puredanger</span><span>|</span><a href="#41557742">parent</a><span>|</span><a href="#41558365">prev</a><span>|</span><a href="#41558243">next</a><span>|</span><label class="collapse" for="c-41560751">[-]</label><label class="expand" for="c-41560751">[1 more]</label></div><br/><div class="children"><div class="content">The annual Clojure&#x2F;conj conference is coming up next month in Alexandria, VA (<a href="https:&#x2F;&#x2F;2024.clojure-conj.org" rel="nofollow">https:&#x2F;&#x2F;2024.clojure-conj.org</a>) and there will be talks from a variety of companies, both big and small.</div><br/></div></div><div id="41558243" class="c"><input type="checkbox" id="c-41558243" checked=""/><div class="controls bullet"><span class="by">refset</span><span>|</span><a href="#41557742">parent</a><span>|</span><a href="#41560751">prev</a><span>|</span><a href="#41558360">next</a><span>|</span><label class="collapse" for="c-41558243">[-]</label><label class="expand" for="c-41558243">[1 more]</label></div><br/><div class="children"><div class="content">InstantDB (YC S22) launched a few weeks ago <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41322281">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41322281</a></div><br/></div></div><div id="41558360" class="c"><input type="checkbox" id="c-41558360" checked=""/><div class="controls bullet"><span class="by">packetlost</span><span>|</span><a href="#41557742">parent</a><span>|</span><a href="#41558243">prev</a><span>|</span><a href="#41560069">next</a><span>|</span><label class="collapse" for="c-41558360">[-]</label><label class="expand" for="c-41558360">[6 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t know about startups, but I know of several more mature companies that are using it. It&#x27;s, IMO, the best way to use the Java ecosystem.</div><br/><div id="41558551" class="c"><input type="checkbox" id="c-41558551" checked=""/><div class="controls bullet"><span class="by">fiddlerwoaroof</span><span>|</span><a href="#41557742">root</a><span>|</span><a href="#41558360">parent</a><span>|</span><a href="#41560069">next</a><span>|</span><label class="collapse" for="c-41558551">[-]</label><label class="expand" for="c-41558551">[5 more]</label></div><br/><div class="children"><div class="content">Even if you never push the code to production, it’s a crazy gorse multiplier for the explore and adventure prototype phase of a project</div><br/><div id="41558671" class="c"><input type="checkbox" id="c-41558671" checked=""/><div class="controls bullet"><span class="by">finnh</span><span>|</span><a href="#41557742">root</a><span>|</span><a href="#41558551">parent</a><span>|</span><a href="#41560069">next</a><span>|</span><label class="collapse" for="c-41558671">[-]</label><label class="expand" for="c-41558671">[4 more]</label></div><br/><div class="children"><div class="content">&quot;gorse multiplier&quot; wins today&#x27;s &quot;best transcription error&quot; award, IMO<p>category: edit-distance-two</div><br/><div id="41559070" class="c"><input type="checkbox" id="c-41559070" checked=""/><div class="controls bullet"><span class="by">pavlov</span><span>|</span><a href="#41557742">root</a><span>|</span><a href="#41558671">parent</a><span>|</span><a href="#41560846">next</a><span>|</span><label class="collapse" for="c-41559070">[-]</label><label class="expand" for="c-41559070">[1 more]</label></div><br/><div class="children"><div class="content">I was momentarily convinced that “crazy horse multiplier” must be an American idiom, and then realized that maybe the misspelled thing being multiplied is a force rather than a horse after all.</div><br/></div></div><div id="41560846" class="c"><input type="checkbox" id="c-41560846" checked=""/><div class="controls bullet"><span class="by">jacobobryant</span><span>|</span><a href="#41557742">root</a><span>|</span><a href="#41558671">parent</a><span>|</span><a href="#41559070">prev</a><span>|</span><a href="#41560760">next</a><span>|</span><label class="collapse" for="c-41560846">[-]</label><label class="expand" for="c-41560846">[1 more]</label></div><br/><div class="children"><div class="content">2nd place probably goes to another comment in this thread: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41560711">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41560711</a></div><br/></div></div><div id="41560760" class="c"><input type="checkbox" id="c-41560760" checked=""/><div class="controls bullet"><span class="by">fiddlerwoaroof</span><span>|</span><a href="#41557742">root</a><span>|</span><a href="#41558671">parent</a><span>|</span><a href="#41560846">prev</a><span>|</span><a href="#41560069">next</a><span>|</span><label class="collapse" for="c-41560760">[-]</label><label class="expand" for="c-41560760">[1 more]</label></div><br/><div class="children"><div class="content">I usually catch these too and ninja edit them out</div><br/></div></div></div></div></div></div></div></div><div id="41560069" class="c"><input type="checkbox" id="c-41560069" checked=""/><div class="controls bullet"><span class="by">vincentdm</span><span>|</span><a href="#41557742">parent</a><span>|</span><a href="#41558360">prev</a><span>|</span><a href="#41558733">next</a><span>|</span><label class="collapse" for="c-41560069">[-]</label><label class="expand" for="c-41560069">[1 more]</label></div><br/><div class="children"><div class="content">We (<a href="https:&#x2F;&#x2F;basil.net" rel="nofollow">https:&#x2F;&#x2F;basil.net</a>) are not new and not a startup, but our main language is Clojure and each new project is written in it. Very satisfied with our choice.</div><br/></div></div><div id="41558733" class="c"><input type="checkbox" id="c-41558733" checked=""/><div class="controls bullet"><span class="by">thenonameguy</span><span>|</span><a href="#41557742">parent</a><span>|</span><a href="#41560069">prev</a><span>|</span><a href="#41558198">next</a><span>|</span><label class="collapse" for="c-41558733">[-]</label><label class="expand" for="c-41558733">[1 more]</label></div><br/><div class="children"><div class="content">Yup, it&#x27;s still the best tool for me. Especially for complex domains, as it does not allow you to over-abstract data structures.<p>Schemamap.io has a declarative SQL compiler and backend implemented in it, solving Postgres database syncing.</div><br/></div></div><div id="41558198" class="c"><input type="checkbox" id="c-41558198" checked=""/><div class="controls bullet"><span class="by">ekzy</span><span>|</span><a href="#41557742">parent</a><span>|</span><a href="#41558733">prev</a><span>|</span><a href="#41559326">next</a><span>|</span><label class="collapse" for="c-41558198">[-]</label><label class="expand" for="c-41558198">[4 more]</label></div><br/><div class="children"><div class="content">There are quite a few! We do at Doccla (and we’re hiring :) (EU))</div><br/><div id="41559317" class="c"><input type="checkbox" id="c-41559317" checked=""/><div class="controls bullet"><span class="by">tsingy</span><span>|</span><a href="#41557742">root</a><span>|</span><a href="#41558198">parent</a><span>|</span><a href="#41559231">next</a><span>|</span><label class="collapse" for="c-41559317">[-]</label><label class="expand" for="c-41559317">[1 more]</label></div><br/><div class="children"><div class="content">Anything for juniors?</div><br/></div></div><div id="41559231" class="c"><input type="checkbox" id="c-41559231" checked=""/><div class="controls bullet"><span class="by">ska80</span><span>|</span><a href="#41557742">root</a><span>|</span><a href="#41558198">parent</a><span>|</span><a href="#41559317">prev</a><span>|</span><a href="#41559330">next</a><span>|</span><label class="collapse" for="c-41559231">[-]</label><label class="expand" for="c-41559231">[1 more]</label></div><br/><div class="children"><div class="content">&gt; EU<p>:(</div><br/></div></div><div id="41559330" class="c"><input type="checkbox" id="c-41559330" checked=""/><div class="controls bullet"><span class="by">edem</span><span>|</span><a href="#41557742">root</a><span>|</span><a href="#41558198">parent</a><span>|</span><a href="#41559231">prev</a><span>|</span><a href="#41559326">next</a><span>|</span><label class="collapse" for="c-41559330">[-]</label><label class="expand" for="c-41559330">[1 more]</label></div><br/><div class="children"><div class="content">havent touched clojure in years, but i use FP daily, can i get an interview? :)</div><br/></div></div></div></div><div id="41559326" class="c"><input type="checkbox" id="c-41559326" checked=""/><div class="controls bullet"><span class="by">jwr</span><span>|</span><a href="#41557742">parent</a><span>|</span><a href="#41558198">prev</a><span>|</span><a href="#41558373">next</a><span>|</span><label class="collapse" for="c-41559326">[-]</label><label class="expand" for="c-41559326">[1 more]</label></div><br/><div class="children"><div class="content">Definitely. It&#x27;s a great tool, especially in a small and smart team.</div><br/></div></div><div id="41558373" class="c"><input type="checkbox" id="c-41558373" checked=""/><div class="controls bullet"><span class="by">tvaughan</span><span>|</span><a href="#41557742">parent</a><span>|</span><a href="#41559326">prev</a><span>|</span><a href="#41562542">next</a><span>|</span><label class="collapse" for="c-41558373">[-]</label><label class="expand" for="c-41558373">[1 more]</label></div><br/><div class="children"><div class="content">Nalca Biotech</div><br/></div></div></div></div><div id="41562542" class="c"><input type="checkbox" id="c-41562542" checked=""/><div class="controls bullet"><span class="by">jchanimal</span><span>|</span><a href="#41557742">prev</a><span>|</span><a href="#41559747">next</a><span>|</span><label class="collapse" for="c-41562542">[-]</label><label class="expand" for="c-41562542">[1 more]</label></div><br/><div class="children"><div class="content">Fireproof is taking the lessons of cloujure and Ipfs and applying them to the browser, to create a realtime database that runs anywhere.<p>As cofounder of Couchbase I got to meet Rich Hickey, whose work was a big inspiration to Fireproof.<p>Content addressing makes causal consistency easy to implement. We are fast approaching readiness for consistency checks and ACID characterization.</div><br/></div></div><div id="41559747" class="c"><input type="checkbox" id="c-41559747" checked=""/><div class="controls bullet"><span class="by">lvh</span><span>|</span><a href="#41562542">prev</a><span>|</span><label class="collapse" for="c-41559747">[-]</label><label class="expand" for="c-41559747">[2 more]</label></div><br/><div class="children"><div class="content">FYI: we&#x27;re planning a followup post for people who are less interested in the Datomic mechanics and more interested in the usefulness to investigations and other security functions. Informally, I think of it this way: your SIEM has the deltas, but often you want the contextual states in between the deltas (and a lot of investigation is about trying to reason about that state). We built this tool originally to support that, and it turned out that approach was also super useful for things like compliance, CSPM...<p>We already wrote a high level blog post here: <a href="https:&#x2F;&#x2F;www.latacora.com&#x2F;blog&#x2F;2023&#x2F;11&#x2F;01&#x2F;our-approach-to-building-security-tooling&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.latacora.com&#x2F;blog&#x2F;2023&#x2F;11&#x2F;01&#x2F;our-approach-to-bui...</a> -- but the one I&#x27;m hoping to write is more of a case study.</div><br/></div></div></div></div></div></div></div></body></html>