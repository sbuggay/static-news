<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1721466050736" as="style"/><link rel="stylesheet" href="styles.css?v=1721466050736"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://automerge.org/">Automerge: A library of data structures for building collaborative applications</a> <span class="domain">(<a href="https://automerge.org">automerge.org</a>)</span></div><div class="subtext"><span>surprisetalk</span> | <span>11 comments</span></div><br/><div><div id="41012895" class="c"><input type="checkbox" id="c-41012895" checked=""/><div class="controls bullet"><span class="by">mkl</span><span>|</span><a href="#41014248">next</a><span>|</span><label class="collapse" for="c-41012895">[-]</label><label class="expand" for="c-41012895">[7 more]</label></div><br/><div class="children"><div class="content">In practice most projects seem to use Yjs rather than Automerge.  Is there an up-to-date comparison of the two?  Has anyone here chosen Automerge over Yjs?</div><br/><div id="41014942" class="c"><input type="checkbox" id="c-41014942" checked=""/><div class="controls bullet"><span class="by">josephg</span><span>|</span><a href="#41012895">parent</a><span>|</span><a href="#41013205">next</a><span>|</span><label class="collapse" for="c-41014942">[-]</label><label class="expand" for="c-41014942">[1 more]</label></div><br/><div class="children"><div class="content">I’m quite familiar with both, having spent some time building a crdt library of my own. The authors of both projects are lovely humans. There are quite a lot of small differences that might matter to some people:<p>- Yjs is mostly made by a single author (Kevin Jahns). It does not store the full document history, but it does support arbitrarily many checkpoints which you can rewind a document to. Yjs is written in JavaScript. There’s a rust rewrite (Yrs) but it’s significantly slower than the JavaScript version for some reason. (5-10x slower last I checked).<p>- Automerge was started by Martin Kleppmann, Cambridge professor and author of Designing Data Intensive Applications. They have some funding now and as I understand it there are people working on it full time. To me it feels a bit more researchy - for example the team has been working on Byzantine fault tolerance features, rich text and other interesting but novel stuff. These days it’s written in rust, with wasm builds for the web. Automerge stores the entire history of a document, so unlike Yjs, deleted items are stored forever - with the costs and benefits that brings. Automerge is also significantly slower and less memory efficient than Yjs for large text documents. (It takes ~10 seconds &amp; 200mb of ram to load a 100 page document in my tests.) I’m assured the team is working on optimisations; which is good because I would very much like to see more attention in that area.<p>They’re both good projects, but honestly both could use a lot of love. I’d love to have a “SQLite of local first software”. I think we’re close, but not quite there yet.<p>(There are some much faster test based CRDTs around if that’s your jam. Aside from my own work, Cola is also a very impressive and clean - and orders of magnitude faster than Yjs and automerge.)</div><br/></div></div><div id="41013205" class="c"><input type="checkbox" id="c-41013205" checked=""/><div class="controls bullet"><span class="by">clarkrinker</span><span>|</span><a href="#41012895">parent</a><span>|</span><a href="#41014942">prev</a><span>|</span><a href="#41013149">next</a><span>|</span><label class="collapse" for="c-41013205">[-]</label><label class="expand" for="c-41013205">[2 more]</label></div><br/><div class="children"><div class="content">yJS has the webrtc adapter and appears to still win out in the edit benchmarks. I’ve used yJS in two projects: once just for presence chat and syncing menus for a coaching site and once in a overlay graphics app for a livestream<p>Biggest problem with yJS for me has been the ergonomics when I use it with React. There’s a third party project called synced store that I used for the stream overlay but it has some strange behavior.<p>With first party support with React in automerge I think it’s worth a shot for my rewrite</div><br/><div id="41014207" class="c"><input type="checkbox" id="c-41014207" checked=""/><div class="controls bullet"><span class="by">6gvONxR4sf7o</span><span>|</span><a href="#41012895">root</a><span>|</span><a href="#41013205">parent</a><span>|</span><a href="#41013149">next</a><span>|</span><label class="collapse" for="c-41014207">[-]</label><label class="expand" for="c-41014207">[1 more]</label></div><br/><div class="children"><div class="content">The big yjs problem for me is the documentation. A few of the most important sections are just “todo” placeholders, like the “how to write a provider” section.<p>It’s great at first, but woefully underdocumented if you want to use it in a way that doesn’t have off the shelf support, and the code is tough to parse (for me at least). Same with subdocuments.<p>I wanted to use it with Lexical a while back, and yjs plugin was too tightly coupled too a single data model and was too complicated to DIY.</div><br/></div></div></div></div><div id="41013149" class="c"><input type="checkbox" id="c-41013149" checked=""/><div class="controls bullet"><span class="by">danielvaughn</span><span>|</span><a href="#41012895">parent</a><span>|</span><a href="#41013205">prev</a><span>|</span><a href="#41013123">next</a><span>|</span><label class="collapse" for="c-41013149">[-]</label><label class="expand" for="c-41013149">[2 more]</label></div><br/><div class="children"><div class="content">In a recent (abandoned) project, I used Reflect: <a href="https:&#x2F;&#x2F;reflect.net&#x2F;" rel="nofollow">https:&#x2F;&#x2F;reflect.net&#x2F;</a><p>It was by <i>far</i> the most developer-friendly experience I&#x27;ve had trying to implement collaborative editing. The one thing it didn&#x27;t have that YJS did was built-in undo&#x2F;redo.</div><br/><div id="41013293" class="c"><input type="checkbox" id="c-41013293" checked=""/><div class="controls bullet"><span class="by">localfirst</span><span>|</span><a href="#41012895">root</a><span>|</span><a href="#41013149">parent</a><span>|</span><a href="#41013123">next</a><span>|</span><label class="collapse" for="c-41013293">[-]</label><label class="expand" for="c-41013293">[1 more]</label></div><br/><div class="children"><div class="content">what about PartyKit?<p>okay looks like partykit hides some extra metered costs with a call us button<p>reflect&#x27;s pricing seems a lot easier to understand!<p>just trying to think how this will work with cloudflare + fastify</div><br/></div></div></div></div><div id="41013123" class="c"><input type="checkbox" id="c-41013123" checked=""/><div class="controls bullet"><span class="by">CharlieDigital</span><span>|</span><a href="#41012895">parent</a><span>|</span><a href="#41013149">prev</a><span>|</span><a href="#41014248">next</a><span>|</span><label class="collapse" for="c-41013123">[-]</label><label class="expand" for="c-41013123">[1 more]</label></div><br/><div class="children"><div class="content">There&#x27;s also Microsoft&#x27;s Fluid Framework and Azure Fluid Relay which is powering their O365&#x2F;SharePoint product.</div><br/></div></div></div></div><div id="41014248" class="c"><input type="checkbox" id="c-41014248" checked=""/><div class="controls bullet"><span class="by">surfingdino</span><span>|</span><a href="#41012895">prev</a><span>|</span><a href="#41013158">next</a><span>|</span><label class="collapse" for="c-41014248">[-]</label><label class="expand" for="c-41014248">[1 more]</label></div><br/><div class="children"><div class="content">Interesting. IndexedDB + Automerge remind me of CouchDB.</div><br/></div></div><div id="41013158" class="c"><input type="checkbox" id="c-41013158" checked=""/><div class="controls bullet"><span class="by">zaphod420</span><span>|</span><a href="#41014248">prev</a><span>|</span><label class="collapse" for="c-41013158">[-]</label><label class="expand" for="c-41013158">[2 more]</label></div><br/><div class="children"><div class="content">I just recently found out about automerge from this youtube channel. <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;@localfirstfm" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;@localfirstfm</a><p>I love the idea of &quot;local first software&quot; <a href="https:&#x2F;&#x2F;www.inkandswitch.com&#x2F;local-first&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.inkandswitch.com&#x2F;local-first&#x2F;</a></div><br/><div id="41013245" class="c"><input type="checkbox" id="c-41013245" checked=""/><div class="controls bullet"><span class="by">mkl</span><span>|</span><a href="#41013158">parent</a><span>|</span><label class="collapse" for="c-41013245">[-]</label><label class="expand" for="c-41013245">[1 more]</label></div><br/><div class="children"><div class="content">Big discussion of local-first a few weeks ago: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=40786425">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=40786425</a><p>A number of past discussions too: <a href="https:&#x2F;&#x2F;hn.algolia.com&#x2F;?q=local+first" rel="nofollow">https:&#x2F;&#x2F;hn.algolia.com&#x2F;?q=local+first</a></div><br/></div></div></div></div></div></div></div></div></div></body></html>