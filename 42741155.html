<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1737190875754" as="style"/><link rel="stylesheet" href="styles.css?v=1737190875754"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://blogsystem5.substack.com/p/netbsd-graphics-wo-x11">Hands-On Graphics Without X11</a> <span class="domain">(<a href="https://blogsystem5.substack.com">blogsystem5.substack.com</a>)</span></div><div class="subtext"><span>ingve</span> | <span>25 comments</span></div><br/><div><div id="42743096" class="c"><input type="checkbox" id="c-42743096" checked=""/><div class="controls bullet"><span class="by">arghwhat</span><span>|</span><a href="#42742710">next</a><span>|</span><label class="collapse" for="c-42743096">[-]</label><label class="expand" for="c-42743096">[5 more]</label></div><br/><div class="children"><div class="content">These interfaces can be cute to play with, but there&#x27;s a reason that fbdev is deprecated on Linux - it&#x27;s not a good interface outside toy examples. wscons may be more powerful, but I don&#x27;t think it can be used to fully enable modern accelerated display devices, although do correct me if I&#x27;m wrong.<p>Despite some confusion in terminology, modern interfaces also operate on frame buffers, but with an API for switching them out atomically. Likewise, your display server (at least modern ones) just take your client window as a completed frame buffer, and mainly serve to let multiple applications all show their frame buffers without having to worry about what other applications are doing. Frame buffers all the way down, just with support for DMA, atomicity, fancy formats and color spaces, etc.<p>You can use the appropriate modern APIs to make a single, exclusive graphical application with all the benefits of modern display hardware easily enough. That is, after all, what your display server is. You just don&#x27;t gain much - just a little bit of saved sideband IPC.<p>X11 makes it seem like a display server is a complicated thing that has to support drawing and what not, but with alternatives like Wayland, a full screen client buffer is handed off zero-copy from the client application tot he hardware without being looked at.</div><br/><div id="42745849" class="c"><input type="checkbox" id="c-42745849" checked=""/><div class="controls bullet"><span class="by">panic</span><span>|</span><a href="#42743096">parent</a><span>|</span><a href="#42743200">next</a><span>|</span><label class="collapse" for="c-42745849">[-]</label><label class="expand" for="c-42745849">[1 more]</label></div><br/><div class="children"><div class="content">BTW if you want to learn how to put stuff on the screen without any display server on modern Linux, the kmscube example project is a great starting point: <a href="https:&#x2F;&#x2F;gitlab.freedesktop.org&#x2F;mesa&#x2F;kmscube" rel="nofollow">https:&#x2F;&#x2F;gitlab.freedesktop.org&#x2F;mesa&#x2F;kmscube</a></div><br/></div></div><div id="42743200" class="c"><input type="checkbox" id="c-42743200" checked=""/><div class="controls bullet"><span class="by">jmmv</span><span>|</span><a href="#42743096">parent</a><span>|</span><a href="#42745849">prev</a><span>|</span><a href="#42742710">next</a><span>|</span><label class="collapse" for="c-42743200">[-]</label><label class="expand" for="c-42743200">[3 more]</label></div><br/><div class="children"><div class="content">&gt; wscons may be more powerful, but I don&#x27;t think it can be used to fully enable modern accelerated display devices, although do correct me if I&#x27;m wrong.<p>As I mentioned in the text, I <i>think</i> that&#x27;s the difference between WSDISPLAYIO_MODE_MAPPED and WSDISPLAYIO_MODE_DUMBFB. The former allows access to the hardware registers whereas the latter does not. Obviously, if you choose to use the former, then you are tied to a specific graphics driver. (But I&#x27;m not sure of this.)<p>And yes, agree, what I described is not great for performant results, but there is a lot you gain from the simplicity of this approach if all you want is toy around. I feel we lost a lot of this simplicity over the years, but it&#x27;s &quot;still there&quot; if you don&#x27;t care about optimal performance.</div><br/><div id="42744390" class="c"><input type="checkbox" id="c-42744390" checked=""/><div class="controls bullet"><span class="by">arghwhat</span><span>|</span><a href="#42743096">root</a><span>|</span><a href="#42743200">parent</a><span>|</span><a href="#42743574">next</a><span>|</span><label class="collapse" for="c-42744390">[-]</label><label class="expand" for="c-42744390">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I feel we lost a lot of this simplicity over the years, but it&#x27;s &quot;still there&quot; if you don&#x27;t care about optimal performance.<p>You lost some simplicity in going &quot;straight to the metal&quot;, but at the same time it never really went straight to the metal because things have not actually worked that way for ages, nor do anyone really want to deal with exclusive access.<p>On the other hand, you can make a window with a shm buffer on your display server, giving you the same drawing simplicity of the old interfaces but without having to deal with fbdev, evdev, exclusive access, etc. - with that in mind, I do not think anything educational was lost.<p>No harm in playing around though.</div><br/></div></div><div id="42743574" class="c"><input type="checkbox" id="c-42743574" checked=""/><div class="controls bullet"><span class="by">taeric</span><span>|</span><a href="#42743096">root</a><span>|</span><a href="#42743200">parent</a><span>|</span><a href="#42744390">prev</a><span>|</span><a href="#42742710">next</a><span>|</span><label class="collapse" for="c-42743574">[-]</label><label class="expand" for="c-42743574">[1 more]</label></div><br/><div class="children"><div class="content">Completely agreed on the feeling that we lost a lot by moving away from some of the simpler interface options.  Particularly for introductory and play purposes.   Specifically, even.</div><br/></div></div></div></div></div></div><div id="42742710" class="c"><input type="checkbox" id="c-42742710" checked=""/><div class="controls bullet"><span class="by">pjmlp</span><span>|</span><a href="#42743096">prev</a><span>|</span><a href="#42745281">next</a><span>|</span><label class="collapse" for="c-42742710">[-]</label><label class="expand" for="c-42742710">[3 more]</label></div><br/><div class="children"><div class="content">On a parallel note, this brought memories of SVGALib.<p><a href="https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;SVGALib" rel="nofollow">https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;SVGALib</a></div><br/><div id="42744822" class="c"><input type="checkbox" id="c-42744822" checked=""/><div class="controls bullet"><span class="by">keyle</span><span>|</span><a href="#42742710">parent</a><span>|</span><a href="#42744969">prev</a><span>|</span><a href="#42745281">next</a><span>|</span><label class="collapse" for="c-42744822">[-]</label><label class="expand" for="c-42744822">[1 more]</label></div><br/><div class="children"><div class="content">Never heard of it before, interesting!</div><br/></div></div></div></div><div id="42745281" class="c"><input type="checkbox" id="c-42745281" checked=""/><div class="controls bullet"><span class="by">makz</span><span>|</span><a href="#42742710">prev</a><span>|</span><a href="#42743175">next</a><span>|</span><label class="collapse" for="c-42745281">[-]</label><label class="expand" for="c-42745281">[1 more]</label></div><br/><div class="children"><div class="content">Awesome! I was thinking about playing with this on some BSD like two months ago.</div><br/></div></div><div id="42743175" class="c"><input type="checkbox" id="c-42743175" checked=""/><div class="controls bullet"><span class="by">segasaturn</span><span>|</span><a href="#42745281">prev</a><span>|</span><a href="#42744781">next</a><span>|</span><label class="collapse" for="c-42743175">[-]</label><label class="expand" for="c-42743175">[4 more]</label></div><br/><div class="children"><div class="content">I remember Links, the text-based browser that runs in your terminal, had a framebuffer mode that you could use to get rudimentary graphical web browsing on a system with no X11 installed.</div><br/><div id="42743985" class="c"><input type="checkbox" id="c-42743985" checked=""/><div class="controls bullet"><span class="by">prmoustache</span><span>|</span><a href="#42743175">parent</a><span>|</span><a href="#42743597">next</a><span>|</span><label class="collapse" for="c-42743985">[-]</label><label class="expand" for="c-42743985">[1 more]</label></div><br/><div class="children"><div class="content">I think netsurf can still be compiled for fb.</div><br/></div></div><div id="42743597" class="c"><input type="checkbox" id="c-42743597" checked=""/><div class="controls bullet"><span class="by">LtWorf</span><span>|</span><a href="#42743175">parent</a><span>|</span><a href="#42743985">prev</a><span>|</span><a href="#42744781">next</a><span>|</span><label class="collapse" for="c-42743597">[-]</label><label class="expand" for="c-42743597">[2 more]</label></div><br/><div class="children"><div class="content">Yeah, also mpv has a framebuffer driver. AFAIK Qt has one as well, so any Qt program could run without X&#x2F;wayland.</div><br/><div id="42746585" class="c"><input type="checkbox" id="c-42746585" checked=""/><div class="controls bullet"><span class="by">qalmakka</span><span>|</span><a href="#42743175">root</a><span>|</span><a href="#42743597">parent</a><span>|</span><a href="#42744781">next</a><span>|</span><label class="collapse" for="c-42746585">[-]</label><label class="expand" for="c-42746585">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Qt<p>That&#x27;s EGLFS, it&#x27;s used quite a bit in automotive AFAIK. It&#x27;s slowly getting replaced by Wayland and Weston though.</div><br/></div></div></div></div></div></div><div id="42744781" class="c"><input type="checkbox" id="c-42744781" checked=""/><div class="controls bullet"><span class="by">seba_dos1</span><span>|</span><a href="#42743175">prev</a><span>|</span><a href="#42746254">next</a><span>|</span><label class="collapse" for="c-42744781">[-]</label><label class="expand" for="c-42744781">[4 more]</label></div><br/><div class="children"><div class="content">&gt; Same font, same colors, same… everything? Other than for the actual text they display, they look identical, don’t they?<p>Funny to see that written under two screenshots with clearly different fonts, and even different colors (though not so clearly; but still different enough to make me check).</div><br/><div id="42744841" class="c"><input type="checkbox" id="c-42744841" checked=""/><div class="controls bullet"><span class="by">jmmv</span><span>|</span><a href="#42744781">parent</a><span>|</span><a href="#42746254">next</a><span>|</span><label class="collapse" for="c-42744841">[-]</label><label class="expand" for="c-42744841">[3 more]</label></div><br/><div class="children"><div class="content">It’s the same font data but not the same rendering code. The spacing between the characters is probably different.</div><br/><div id="42744942" class="c"><input type="checkbox" id="c-42744942" checked=""/><div class="controls bullet"><span class="by">seba_dos1</span><span>|</span><a href="#42744781">root</a><span>|</span><a href="#42744841">parent</a><span>|</span><a href="#42746254">next</a><span>|</span><label class="collapse" for="c-42744942">[-]</label><label class="expand" for="c-42744942">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not. Just look at it please! Glyphs are completely different. One font is serif, one is sans-serif. It&#x27;s the most obvious when you look at p, y, r, a, s...</div><br/><div id="42744984" class="c"><input type="checkbox" id="c-42744984" checked=""/><div class="controls bullet"><span class="by">jmmv</span><span>|</span><a href="#42744781">root</a><span>|</span><a href="#42744942">parent</a><span>|</span><a href="#42746254">next</a><span>|</span><label class="collapse" for="c-42744984">[-]</label><label class="expand" for="c-42744984">[1 more]</label></div><br/><div class="children"><div class="content">Hah, I was convinced I picked the same font file from NetBSD... and didn&#x27;t really notice the difference on the small screen I&#x27;m running this on!</div><br/></div></div></div></div></div></div></div></div><div id="42746254" class="c"><input type="checkbox" id="c-42746254" checked=""/><div class="controls bullet"><span class="by">zfg</span><span>|</span><a href="#42744781">prev</a><span>|</span><a href="#42742885">next</a><span>|</span><label class="collapse" for="c-42746254">[-]</label><label class="expand" for="c-42746254">[1 more]</label></div><br/><div class="children"><div class="content">Avalonia (<a href="https:&#x2F;&#x2F;avaloniaui.net&#x2F;" rel="nofollow">https:&#x2F;&#x2F;avaloniaui.net&#x2F;</a>) supports the Direct Rendering Manager on Linux for graphics without X11 or Wayland:<p><a href="https:&#x2F;&#x2F;avaloniaui.net&#x2F;blog&#x2F;unleashing-net-on-embedded-linux" rel="nofollow">https:&#x2F;&#x2F;avaloniaui.net&#x2F;blog&#x2F;unleashing-net-on-embedded-linux</a><p><a href="https:&#x2F;&#x2F;docs.avaloniaui.net&#x2F;docs&#x2F;guides&#x2F;platforms&#x2F;rpi&#x2F;running-on-raspbian-lite-via-drm" rel="nofollow">https:&#x2F;&#x2F;docs.avaloniaui.net&#x2F;docs&#x2F;guides&#x2F;platforms&#x2F;rpi&#x2F;runnin...</a></div><br/></div></div><div id="42742885" class="c"><input type="checkbox" id="c-42742885" checked=""/><div class="controls bullet"><span class="by">ykonstant</span><span>|</span><a href="#42746254">prev</a><span>|</span><a href="#42745370">next</a><span>|</span><label class="collapse" for="c-42742885">[-]</label><label class="expand" for="c-42742885">[2 more]</label></div><br/><div class="children"><div class="content">Very nice, I am very interested in raw framebuffer graphics and applications.</div><br/><div id="42744510" class="c"><input type="checkbox" id="c-42744510" checked=""/><div class="controls bullet"><span class="by">mysterydip</span><span>|</span><a href="#42742885">parent</a><span>|</span><a href="#42745370">next</a><span>|</span><label class="collapse" for="c-42744510">[-]</label><label class="expand" for="c-42744510">[1 more]</label></div><br/><div class="children"><div class="content">Check this out: <a href="https:&#x2F;&#x2F;github.com&#x2F;vvaltchev&#x2F;tfblib">https:&#x2F;&#x2F;github.com&#x2F;vvaltchev&#x2F;tfblib</a><p>It worked well for a hobby project. I had issues on certain specific displays I think due to the color depth requirement.</div><br/></div></div></div></div><div id="42745370" class="c"><input type="checkbox" id="c-42745370" checked=""/><div class="controls bullet"><span class="by">synergy20</span><span>|</span><a href="#42742885">prev</a><span>|</span><a href="#42746799">next</a><span>|</span><label class="collapse" for="c-42745370">[-]</label><label class="expand" for="c-42745370">[3 more]</label></div><br/><div class="children"><div class="content">i think that&#x27;s what sdl provides? except sdl can do more</div><br/><div id="42745726" class="c"><input type="checkbox" id="c-42745726" checked=""/><div class="controls bullet"><span class="by">incanus77</span><span>|</span><a href="#42745370">parent</a><span>|</span><a href="#42746799">next</a><span>|</span><label class="collapse" for="c-42745726">[-]</label><label class="expand" for="c-42745726">[2 more]</label></div><br/><div class="children"><div class="content">No, SDL provides a window&#x2F;context in the existing windowing layer.</div><br/><div id="42746778" class="c"><input type="checkbox" id="c-42746778" checked=""/><div class="controls bullet"><span class="by">jpc0</span><span>|</span><a href="#42745370">root</a><span>|</span><a href="#42745726">parent</a><span>|</span><a href="#42746799">next</a><span>|</span><label class="collapse" for="c-42746778">[-]</label><label class="expand" for="c-42746778">[1 more]</label></div><br/><div class="children"><div class="content">SDL does not need a windowing layer... There might be better docs somewhere but this should act as enough proof for you without linking directly to the source code.<p><a href="https:&#x2F;&#x2F;wiki.libsdl.org&#x2F;SDL2&#x2F;SDL_HINT_KMSDRM_REQUIRE_DRM_MASTER" rel="nofollow">https:&#x2F;&#x2F;wiki.libsdl.org&#x2F;SDL2&#x2F;SDL_HINT_KMSDRM_REQUIRE_DRM_MAS...</a></div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>