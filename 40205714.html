<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1714554069589" as="style"/><link rel="stylesheet" href="styles.css?v=1714554069589"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://mastodon.social/@pid_eins/112353324518585654">Run0, a systemd based alternative to sudo, announced</a> <span class="domain">(<a href="https://mastodon.social">mastodon.social</a>)</span></div><div class="subtext"><span>CoolCold</span> | <span>346 comments</span></div><br/><div><div id="40220398" class="c"><input type="checkbox" id="c-40220398" checked=""/><div class="controls bullet"><span class="by">jimrandomh</span><span>|</span><a href="#40220178">next</a><span>|</span><label class="collapse" for="c-40220398">[-]</label><label class="expand" for="c-40220398">[4 more]</label></div><br/><div class="children"><div class="content">&gt; Or in other words: the target command is invoked in an isolated exec context, freshly forked off PID 1, without inheriting any context from the client (well, admittedly, we <i>do</i> propagate $TERM, but that&#x27;s an explicit exception, i.e. allowlist rather than denylist).<p>I think in practice, this is going to be an endless source of problems, so much so that it won&#x27;t be adopted. The usual use case of sudo is that you have a normal shell command, making use of the environment for context in all the ways that shell commands do, but it doesn&#x27;t have all the permissions it needs, so you add &quot;sudo&quot; as an adverb.<p>Sometimes it makes use of environment variables. Sometimes stdin or stdout is redirected to a file, or to something more exotic than a file. Sometimes that means it runs inside of a chroot, or a Docker container. Sometimes you care about which process group it runs in.<p>And sometimes the thing you&#x27;re running is a complicated shell script or shell-script-like object, eg &quot;sudo make install&quot;. In this case, you don&#x27;t really know what its dependencies are. In fact this is a common enough case that, if run0 becomes widespread, I expect it&#x27;ll have a flag or a set of flags that make it act exactly like sudo, and I expect people to wind up learning that they should always give run0 those flags.<p>And I&#x27;m kind of worried that when this breaks stuff, the systemd project is going to push forward with some plan to get rid of sudo, and not gracefully accept the feedback that this is breaking things. I&#x27;m particularly worried about this because of the whole saga of KillUsersProcesses breaking nohup and screen, which to my knowledge is still broken many years later.</div><br/><div id="40220545" class="c"><input type="checkbox" id="c-40220545" checked=""/><div class="controls bullet"><span class="by">yorwba</span><span>|</span><a href="#40220398">parent</a><span>|</span><a href="#40220776">next</a><span>|</span><label class="collapse" for="c-40220545">[-]</label><label class="expand" for="c-40220545">[2 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t know what your sudo does, but mine requires the --preserve-env flag if you want the new process to have access to all your environment variables.<p>The thing you&#x27;re saying is going to be an endless source of problems should already be an endless source of problems! (And I think I&#x27;ve been briefly confused by some missing environment variable once or twice so far.)</div><br/><div id="40220671" class="c"><input type="checkbox" id="c-40220671" checked=""/><div class="controls bullet"><span class="by">mid-kid</span><span>|</span><a href="#40220398">root</a><span>|</span><a href="#40220545">parent</a><span>|</span><a href="#40220776">next</a><span>|</span><label class="collapse" for="c-40220671">[-]</label><label class="expand" for="c-40220671">[1 more]</label></div><br/><div class="children"><div class="content">It depends on whether sudo was compiled with --disable-env-reset or not, it&#x27;s on by default[1].<p>Also some variables are inherited regardless (e.g. DISPLAY, TERM), and some useful ones (e.g. HOME) are initialized by sudo, but I can&#x27;t tell where that&#x27;s done.<p>[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;sudo-project&#x2F;sudo&#x2F;blob&#x2F;ef52db46f9b375d7ffd2e8893f1ef65f5b0fc014&#x2F;configure.ac#L1279">https:&#x2F;&#x2F;github.com&#x2F;sudo-project&#x2F;sudo&#x2F;blob&#x2F;ef52db46f9b375d7ff...</a></div><br/></div></div></div></div><div id="40220776" class="c"><input type="checkbox" id="c-40220776" checked=""/><div class="controls bullet"><span class="by">lyu07282</span><span>|</span><a href="#40220398">parent</a><span>|</span><a href="#40220545">prev</a><span>|</span><a href="#40220178">next</a><span>|</span><label class="collapse" for="c-40220776">[-]</label><label class="expand" for="c-40220776">[1 more]</label></div><br/><div class="children"><div class="content">I think what is perhaps something to consider is how much of an attack surface sudo is and how unaware people are of the fact. Many people think they can configure sudo to be safe to use for unprivileged users, by only allowing specific things to run with it. But they don&#x27;t realize all the ways it can be abused for privilege escalation. Getting rid of all that configuration removes that false sense of security, which is a good thing, it has been a huge footgun in Linux for decades. Some incompatibility is price well worth paying for that imho</div><br/></div></div></div></div><div id="40220178" class="c"><input type="checkbox" id="c-40220178" checked=""/><div class="controls bullet"><span class="by">ccorcos</span><span>|</span><a href="#40220398">prev</a><span>|</span><a href="#40215122">next</a><span>|</span><label class="collapse" for="c-40220178">[-]</label><label class="expand" for="c-40220178">[12 more]</label></div><br/><div class="children"><div class="content">Can someone explain what this is &#x2F; how it works to someone who has done a considerable amount of programming but lacks this kind of operating system level knowledge?<p>I was under the impression that ‘sudo’ was baked into the entire system. Like ‘cd’ or ‘ps’. How exactly can you just swap out sudo? Does that involve swapping out chmod as well?</div><br/><div id="40220238" class="c"><input type="checkbox" id="c-40220238" checked=""/><div class="controls bullet"><span class="by">anon291</span><span>|</span><a href="#40220178">parent</a><span>|</span><a href="#40220277">next</a><span>|</span><label class="collapse" for="c-40220238">[-]</label><label class="expand" for="c-40220238">[3 more]</label></div><br/><div class="children"><div class="content">Sudo is a program that:<p>1. Parses the sudoers file to check if the current user can run the command provided.<p>2. If so, authenticates the user using PAM.<p>3. If both those pass, sets the user id to root and runs the program.<p>There is nothing special about it. All steps can be done by any program. In fact sudo is usually not even an installed by default package in many systems.<p>The only seeming magic bit is part 3, where the program sets it&#x27;s user id to root. Obviously if any program could do this... That&#x27;d be unsafe.<p>However, unix systems allow any executable file to have their flags changed to include the setuid bit which causes the file to execute with privileges of the files owner. You&#x27;ll notice that the sudo binary has this bit set and it&#x27;s owned by root, which explains now the entire process.</div><br/><div id="40220384" class="c"><input type="checkbox" id="c-40220384" checked=""/><div class="controls bullet"><span class="by">Galanwe</span><span>|</span><a href="#40220178">root</a><span>|</span><a href="#40220238">parent</a><span>|</span><a href="#40220277">next</a><span>|</span><label class="collapse" for="c-40220384">[-]</label><label class="expand" for="c-40220384">[2 more]</label></div><br/><div class="children"><div class="content">Just to highlight some of the complexities of `sudo` to complement your helicopter view:<p>- Sudo can use PAM, or any other means, depending on NSS (local, ldap, through PAM, etc)<p>- Sudo can use a sudoers file, directory, or even LDAP fields to resolve accesses.<p>- Sudo can temporarily cache and forward authentication to avoid constantly retyping passwords<p>- Sudo can elevate you depending on your group, user, or even a glob of the command you want to type<p>- Sudo can log and report the executed commands<p>- Sudo can import none, part or all of your environment to run its command<p>- Etc<p>Sudo is <i>very</i> complex</div><br/><div id="40220737" class="c"><input type="checkbox" id="c-40220737" checked=""/><div class="controls bullet"><span class="by">cookiengineer</span><span>|</span><a href="#40220178">root</a><span>|</span><a href="#40220384">parent</a><span>|</span><a href="#40220277">next</a><span>|</span><label class="collapse" for="c-40220737">[-]</label><label class="expand" for="c-40220737">[1 more]</label></div><br/><div class="children"><div class="content">The setuid part is where things get exploitable. Pretty much any exploit to date was abusing a library&#x27;s assumption about what to sideload or what to persist after it got root rights for whatever reason.<p>&quot;Good distro maintainers&quot; (e.g. Arch Linux) try to minimize the attack surface by modifying their packages to use the capabilities flags instead (e.g. the net cap flag for ping binary).<p>&quot;Bad distro maintainers&quot; blame the end user for their own responsibility for letting this happen. They could have just uninstalled the program, right?<p>Well, I disagree. SystemD&#x27;s new approach is that they try to reuse the seccomp sandboxes they&#x27;ve introduced for a while now, where root rights-given processes can even be executed in a chroot, with a fake &#x2F;etc&#x2F;passwd file, with fake users, with fake &#x2F;dev ices etc.<p>As SystemD as the process #1 always has to be executed as root, I think it&#x27;s a good thing that they try to offer a sandboxed alternative. Polkit is just so damn ugly with all their hacky subscriptions and policy files. If you disagree with me, I recommend you to learn more about privilege escalation exploits on POSIX systems, and how PAM, Polkit and pretty much any auth framework always said it&#x27;s the users fault.<p>LD_PRELOAD auth bypasses are now more than 18 years old, and the CVE still works on enterprise-grade linux distributions. It literally was the reason muslc was created as an alternative to glibc. And that&#x27;s older than a decade now.<p>Check out <a href="https:&#x2F;&#x2F;gtfobins.github.io" rel="nofollow">https:&#x2F;&#x2F;gtfobins.github.io</a> (or the Windows NT equivalent LOLbins) if you wanna know how many binaries there are as an attack surface.</div><br/></div></div></div></div></div></div><div id="40220277" class="c"><input type="checkbox" id="c-40220277" checked=""/><div class="controls bullet"><span class="by">stouset</span><span>|</span><a href="#40220178">parent</a><span>|</span><a href="#40220238">prev</a><span>|</span><a href="#40220342">next</a><span>|</span><label class="collapse" for="c-40220277">[-]</label><label class="expand" for="c-40220277">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I was under the impression that ‘sudo’ was baked into the entire system. Like ‘cd’ or ‘ps’.<p>Neither of these are “baked into the entire system” for any meaningful sense of the word. `cd` is just a shell builtin and is casually reimplemented in every single shell. It’s just environment state within your session. `ps` is just a binary that (on Linux) parses stuff in &#x2F;proc.<p>None of it is magic. Neither is sudo. It’s just a binary like any other (though in sudo’s case, it’s setups, which is how it can cross the permissions boundary).</div><br/></div></div><div id="40220342" class="c"><input type="checkbox" id="c-40220342" checked=""/><div class="controls bullet"><span class="by">keeperofdakeys</span><span>|</span><a href="#40220178">parent</a><span>|</span><a href="#40220277">prev</a><span>|</span><a href="#40220205">next</a><span>|</span><label class="collapse" for="c-40220342">[-]</label><label class="expand" for="c-40220342">[1 more]</label></div><br/><div class="children"><div class="content">Any linux process can run with elevated privileges (ie: as root) by setting a specific permission bit - <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Setuid" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Setuid</a>. This is used for many things like ping and sudo.<p>Instead Run0 is using systemd to elevate privileges.<p>There is a lot that could be said, but suffice to say you can have both sudo and Run0 installed. So even if a Distro ships Run0 by default, you can always manually install sudo.</div><br/></div></div><div id="40220205" class="c"><input type="checkbox" id="c-40220205" checked=""/><div class="controls bullet"><span class="by">apexalpha</span><span>|</span><a href="#40220178">parent</a><span>|</span><a href="#40220342">prev</a><span>|</span><a href="#40220206">next</a><span>|</span><label class="collapse" for="c-40220205">[-]</label><label class="expand" for="c-40220205">[2 more]</label></div><br/><div class="children"><div class="content">sudo, and even cd and ps you mention are simply binaries that come shipped with your distro &#x2F; OS.<p>They, like explorer.exe on Windows, are an essential part of that OS with special privileges and roles but they are not part of the kernel, they are still simply programs. It is not developed by the people who develop the Linux kernel.<p>There are other Sudo alternatives such as DoAs already.</div><br/><div id="40220256" class="c"><input type="checkbox" id="c-40220256" checked=""/><div class="controls bullet"><span class="by">csande17</span><span>|</span><a href="#40220178">root</a><span>|</span><a href="#40220205">parent</a><span>|</span><a href="#40220206">next</a><span>|</span><label class="collapse" for="c-40220256">[-]</label><label class="expand" for="c-40220256">[1 more]</label></div><br/><div class="children"><div class="content">While some systems include a &quot;cd&quot; binary, it&#x27;s basically useless since it just changes its own working directory and then exits.<p>Instead, &quot;cd&quot; commands are generally parsed and executed by your shell (&#x2F;bin&#x2F;sh or similar) directly so that the <i>shell&#x27;s</i> working directory gets changed and you can run subsequent commands in the new location.<p>&quot;ps&quot; on the other hand is indeed just a normal program. Usually it reads files in &#x2F;proc to figure out which processes are running.</div><br/></div></div></div></div><div id="40220206" class="c"><input type="checkbox" id="c-40220206" checked=""/><div class="controls bullet"><span class="by">tommica</span><span>|</span><a href="#40220178">parent</a><span>|</span><a href="#40220205">prev</a><span>|</span><a href="#40220219">next</a><span>|</span><label class="collapse" for="c-40220206">[-]</label><label class="expand" for="c-40220206">[2 more]</label></div><br/><div class="children"><div class="content">Pretty sure `sudo` is an application that you can remove, it just comes pre-installed in many distros.</div><br/><div id="40220234" class="c"><input type="checkbox" id="c-40220234" checked=""/><div class="controls bullet"><span class="by">gattilorenz</span><span>|</span><a href="#40220178">root</a><span>|</span><a href="#40220206">parent</a><span>|</span><a href="#40220219">next</a><span>|</span><label class="collapse" for="c-40220234">[-]</label><label class="expand" for="c-40220234">[1 more]</label></div><br/><div class="children"><div class="content">Not only that, but it became commonly included only about 20 years ago.
I spent my first years with Linux calling ‘su’ instead.<p>I still run some very old distribution (e.g. RedHat 6.2) on a Pentium 1 laptop, and I downloaded the source of sudo and compiled it on it, since the sources were not even included in the extended CD set.</div><br/></div></div></div></div><div id="40220219" class="c"><input type="checkbox" id="c-40220219" checked=""/><div class="controls bullet"><span class="by">ErikBjare</span><span>|</span><a href="#40220178">parent</a><span>|</span><a href="#40220206">prev</a><span>|</span><a href="#40220224">next</a><span>|</span><label class="collapse" for="c-40220219">[-]</label><label class="expand" for="c-40220219">[1 more]</label></div><br/><div class="children"><div class="content">sudo is just another program, it&#x27;s not &quot;baked in&quot; as such. It just ships with many (not all) distros. I remember having to install it from repos in the past on a new system: <a href="https:&#x2F;&#x2F;github.com&#x2F;sudo-project&#x2F;sudo">https:&#x2F;&#x2F;github.com&#x2F;sudo-project&#x2F;sudo</a></div><br/></div></div><div id="40220224" class="c"><input type="checkbox" id="c-40220224" checked=""/><div class="controls bullet"><span class="by">Jonnax</span><span>|</span><a href="#40220178">parent</a><span>|</span><a href="#40220219">prev</a><span>|</span><a href="#40215122">next</a><span>|</span><label class="collapse" for="c-40220224">[-]</label><label class="expand" for="c-40220224">[1 more]</label></div><br/><div class="children"><div class="content">Sudo isn&#x27;t baked into the system. It&#x27;s an application.<p><a href="https:&#x2F;&#x2F;www.sudo.ws&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.sudo.ws&#x2F;</a><p>Did you read the thread linked?</div><br/></div></div></div></div><div id="40215122" class="c"><input type="checkbox" id="c-40215122" checked=""/><div class="controls bullet"><span class="by">tommiegannert</span><span>|</span><a href="#40220178">prev</a><span>|</span><a href="#40218468">next</a><span>|</span><label class="collapse" for="c-40215122">[-]</label><label class="expand" for="c-40215122">[1 more]</label></div><br/><div class="children"><div class="content">This is playing on the difference between hoping that sudo does the right thing juggling setuid and capabilities, and having a strict IPC boundary between privilege levels.<p>It sounds like a great use of systemd, for those who want to use it.</div><br/></div></div><div id="40218468" class="c"><input type="checkbox" id="c-40218468" checked=""/><div class="controls bullet"><span class="by">udev4096</span><span>|</span><a href="#40215122">prev</a><span>|</span><a href="#40212503">next</a><span>|</span><label class="collapse" for="c-40218468">[-]</label><label class="expand" for="c-40218468">[12 more]</label></div><br/><div class="children"><div class="content">Just a side note: sudo is largely maintained by just one dude <a href="https:&#x2F;&#x2F;github.com&#x2F;sudo-project&#x2F;sudo&#x2F;graphs&#x2F;contributors">https:&#x2F;&#x2F;github.com&#x2F;sudo-project&#x2F;sudo&#x2F;graphs&#x2F;contributors</a></div><br/><div id="40220204" class="c"><input type="checkbox" id="c-40220204" checked=""/><div class="controls bullet"><span class="by">aixpert</span><span>|</span><a href="#40218468">parent</a><span>|</span><a href="#40220140">next</a><span>|</span><label class="collapse" for="c-40220204">[-]</label><label class="expand" for="c-40220204">[1 more]</label></div><br/><div class="children"><div class="content">Don&#x27;t worry I offered him help. I recently helped xz library too</div><br/></div></div><div id="40220140" class="c"><input type="checkbox" id="c-40220140" checked=""/><div class="controls bullet"><span class="by">m463</span><span>|</span><a href="#40218468">parent</a><span>|</span><a href="#40220204">prev</a><span>|</span><a href="#40218764">next</a><span>|</span><label class="collapse" for="c-40220140">[-]</label><label class="expand" for="c-40220140">[4 more]</label></div><br/><div class="children"><div class="content">also worth mentioning: Lennart Poettering<p>&quot;Poettering is known for having controversial technical and architectural positions regarding the Linux ecosystem&quot;<p><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Lennart_Poettering" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Lennart_Poettering</a></div><br/><div id="40220317" class="c"><input type="checkbox" id="c-40220317" checked=""/><div class="controls bullet"><span class="by">vaylian</span><span>|</span><a href="#40218468">root</a><span>|</span><a href="#40220140">parent</a><span>|</span><a href="#40220708">next</a><span>|</span><label class="collapse" for="c-40220317">[-]</label><label class="expand" for="c-40220317">[2 more]</label></div><br/><div class="children"><div class="content">His positions are mostly controversial because he challenges the way things have been done for a long time. Whenever he presents some new idea&#x2F;architecture my first reaction is often confusion. Why would he change something that has worked so well for such a long time? But then I take the time to read up on the reasoning behind his ideas and then things start to make sense. Even when something isn&#x27;t exactly broken, there is still room for better solutions.</div><br/><div id="40220363" class="c"><input type="checkbox" id="c-40220363" checked=""/><div class="controls bullet"><span class="by">cduzz</span><span>|</span><a href="#40218468">root</a><span>|</span><a href="#40220317">parent</a><span>|</span><a href="#40220708">next</a><span>|</span><label class="collapse" for="c-40220363">[-]</label><label class="expand" for="c-40220363">[1 more]</label></div><br/><div class="children"><div class="content">There have been lots of suggestions for how to improve linux &#x2F; unix for a very long time.<p>The first great war I remember, and I&#x27;m sure there were more before I was around, was DJB vs everyone.  For the most part, I think his designs, &quot;weird&quot; as they were &#x2F; are, are still better than almost every crackpot variation of them that&#x27;s come since.</div><br/></div></div></div></div><div id="40220708" class="c"><input type="checkbox" id="c-40220708" checked=""/><div class="controls bullet"><span class="by">merpkz</span><span>|</span><a href="#40218468">root</a><span>|</span><a href="#40220140">parent</a><span>|</span><a href="#40220317">prev</a><span>|</span><a href="#40218764">next</a><span>|</span><label class="collapse" for="c-40220708">[-]</label><label class="expand" for="c-40220708">[1 more]</label></div><br/><div class="children"><div class="content">Is this guy still hated and receiving death threats? Also didn&#x27;t knew he is working for Microsoft now, that&#x27;s an interesting career change.</div><br/></div></div></div></div><div id="40218764" class="c"><input type="checkbox" id="c-40218764" checked=""/><div class="controls bullet"><span class="by">rascul</span><span>|</span><a href="#40218468">parent</a><span>|</span><a href="#40220140">prev</a><span>|</span><a href="#40219335">next</a><span>|</span><label class="collapse" for="c-40218764">[-]</label><label class="expand" for="c-40218764">[3 more]</label></div><br/><div class="children"><div class="content">For three decades. I suspect he hasn&#x27;t seen much money for the work, but hopefully I&#x27;m wrong.</div><br/><div id="40219514" class="c"><input type="checkbox" id="c-40219514" checked=""/><div class="controls bullet"><span class="by">skywal_l</span><span>|</span><a href="#40218468">root</a><span>|</span><a href="#40218764">parent</a><span>|</span><a href="#40219552">next</a><span>|</span><label class="collapse" for="c-40219514">[-]</label><label class="expand" for="c-40219514">[1 more]</label></div><br/><div class="children"><div class="content">From his personal page:<p><i>For the past 30+ years I’ve been the maintainer of sudo. I’m currently in search of a sponsor to fund continued sudo maintenance and development. If you or your organization is interested in sponsoring sudo, please let me know.</i>[0]<p>[0]: <a href="https:&#x2F;&#x2F;www.millert.dev&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.millert.dev&#x2F;</a></div><br/></div></div><div id="40219552" class="c"><input type="checkbox" id="c-40219552" checked=""/><div class="controls bullet"><span class="by">al_borland</span><span>|</span><a href="#40218468">root</a><span>|</span><a href="#40218764">parent</a><span>|</span><a href="#40219514">prev</a><span>|</span><a href="#40219335">next</a><span>|</span><label class="collapse" for="c-40219552">[-]</label><label class="expand" for="c-40219552">[1 more]</label></div><br/><div class="children"><div class="content">Seems like that might be an issue.<p>From his website…<p>&gt;I’m currently in search of a sponsor to fund continued sudo maintenance and development. If you or your organization is interested in sponsoring sudo, please let me know.</div><br/></div></div></div></div><div id="40219335" class="c"><input type="checkbox" id="c-40219335" checked=""/><div class="controls bullet"><span class="by">maxloh</span><span>|</span><a href="#40218468">parent</a><span>|</span><a href="#40218764">prev</a><span>|</span><a href="#40219992">next</a><span>|</span><label class="collapse" for="c-40219335">[-]</label><label class="expand" for="c-40219335">[2 more]</label></div><br/><div class="children"><div class="content">So many critical components in our system are maintained by just a random good guy on the internet.<p>I can&#x27;t help but think of another XZ crisis that is yet to come.<p><a href="https:&#x2F;&#x2F;xkcd.com&#x2F;2347&#x2F;" rel="nofollow">https:&#x2F;&#x2F;xkcd.com&#x2F;2347&#x2F;</a></div><br/><div id="40220320" class="c"><input type="checkbox" id="c-40220320" checked=""/><div class="controls bullet"><span class="by">BLKNSLVR</span><span>|</span><a href="#40218468">root</a><span>|</span><a href="#40219335">parent</a><span>|</span><a href="#40219992">next</a><span>|</span><label class="collapse" for="c-40220320">[-]</label><label class="expand" for="c-40220320">[1 more]</label></div><br/><div class="children"><div class="content">I think this may be the more accurate sentiment:<p><i>I can&#x27;t help but think of all the other xz crises yet to be discovered</i></div><br/></div></div></div></div><div id="40219992" class="c"><input type="checkbox" id="c-40219992" checked=""/><div class="controls bullet"><span class="by">citizen_friend</span><span>|</span><a href="#40218468">parent</a><span>|</span><a href="#40219335">prev</a><span>|</span><a href="#40212503">next</a><span>|</span><label class="collapse" for="c-40219992">[-]</label><label class="expand" for="c-40219992">[1 more]</label></div><br/><div class="children"><div class="content">Did you expect more?</div><br/></div></div></div></div><div id="40212503" class="c"><input type="checkbox" id="c-40212503" checked=""/><div class="controls bullet"><span class="by">kevincox</span><span>|</span><a href="#40218468">prev</a><span>|</span><a href="#40220024">next</a><span>|</span><label class="collapse" for="c-40212503">[-]</label><label class="expand" for="c-40212503">[17 more]</label></div><br/><div class="children"><div class="content">&gt; One could say, &quot;run0&quot; is closer to behaviour of &quot;ssh&quot; than to &quot;sudo&quot;, in many ways.<p>This is an interesting offhand comment. You could implement a very similar tool by SSHing to localhost.</div><br/><div id="40214944" class="c"><input type="checkbox" id="c-40214944" checked=""/><div class="controls bullet"><span class="by">__s</span><span>|</span><a href="#40212503">parent</a><span>|</span><a href="#40217356">next</a><span>|</span><label class="collapse" for="c-40214944">[-]</label><label class="expand" for="c-40214944">[1 more]</label></div><br/><div class="children"><div class="content">Indeed, there was a blog by a redhat engineer doing that: <a href="https:&#x2F;&#x2F;tim.siosm.fr&#x2F;blog&#x2F;2023&#x2F;12&#x2F;19&#x2F;ssh-over-unix-socket" rel="nofollow">https:&#x2F;&#x2F;tim.siosm.fr&#x2F;blog&#x2F;2023&#x2F;12&#x2F;19&#x2F;ssh-over-unix-socket</a></div><br/></div></div><div id="40217356" class="c"><input type="checkbox" id="c-40217356" checked=""/><div class="controls bullet"><span class="by">m463</span><span>|</span><a href="#40212503">parent</a><span>|</span><a href="#40214944">prev</a><span>|</span><a href="#40215277">next</a><span>|</span><label class="collapse" for="c-40217356">[-]</label><label class="expand" for="c-40217356">[4 more]</label></div><br/><div class="children"><div class="content">I had to write an ssh client for an embedded system long ago.<p>Looking at the design, I found it to be sort of messy.<p>You could restrict commands ssh could invoke, but it didn&#x27;t seem super secure.<p>Also scp&#x2F;sftp was not well designed.  You basically had to give ssh access to your system to allow a file to be copied, and there were no real path restrictions.<p>I personally thought ssh could be much more robust in what you could run and what you couldn&#x27;t.  And scp&#x2F;sftp could have better filesystem semantics so you could have more security in what you could access.<p>And I thought having a write-only scp would be really interesting, sort of like a dropbox for people to send you files securely, but not have to give someone ssh credentials to do it.  And an anoymous scp&#x2F;sftp for distribution or a dropbox could have been really interesting too.</div><br/><div id="40220008" class="c"><input type="checkbox" id="c-40220008" checked=""/><div class="controls bullet"><span class="by">CraigJPerry</span><span>|</span><a href="#40212503">root</a><span>|</span><a href="#40217356">parent</a><span>|</span><a href="#40218088">next</a><span>|</span><label class="collapse" for="c-40220008">[-]</label><label class="expand" for="c-40220008">[1 more]</label></div><br/><div class="children"><div class="content">&gt;&gt; And I thought having a write-only scp would be really interesting<p>I think you can achieve that at the file system level. At least, a long long time ago I maintained a public server with exactly that functionality. I’ve forgotten the details now but if I were tasked with this today my first attempt would be add a sticky bit like we do with &#x2F;tmp: chmod +t dropbox&#x2F;<p>If you don’t want to allow me to delete or overwrite my own files I believe (but haven’t tested) that chattr +a on the dropbox dir would achieve that.</div><br/></div></div><div id="40218088" class="c"><input type="checkbox" id="c-40218088" checked=""/><div class="controls bullet"><span class="by">metalspoon</span><span>|</span><a href="#40212503">root</a><span>|</span><a href="#40217356">parent</a><span>|</span><a href="#40220008">prev</a><span>|</span><a href="#40215277">next</a><span>|</span><label class="collapse" for="c-40218088">[-]</label><label class="expand" for="c-40218088">[2 more]</label></div><br/><div class="children"><div class="content">Well, yes, rsync to replace scp. Sftp&#x27;s also regarded a hack anyway imho.<p>The write-only scp intrigues me. I guess it&#x27;s not hard to write a program to do that. But, right, that&#x27;s not easy with standard tools only. The Linux file system was also not designed for that (although it doesn&#x27;t prohibit such software) I guess.</div><br/><div id="40219889" class="c"><input type="checkbox" id="c-40219889" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#40212503">root</a><span>|</span><a href="#40218088">parent</a><span>|</span><a href="#40215277">next</a><span>|</span><label class="collapse" for="c-40219889">[-]</label><label class="expand" for="c-40219889">[1 more]</label></div><br/><div class="children"><div class="content">&gt; The Linux file system was also not designed for that (although it doesn&#x27;t prohibit such software) I guess.<p>There&#x27;s no &#x27;the&#x27; Linux file system.  There&#x27;s plenty of file system to choose from.<p>And, in fact, it would be relatively easy to write a write-only filesystem with FUSE.  (<a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Filesystem_in_Userspace" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Filesystem_in_Userspace</a>)</div><br/></div></div></div></div></div></div><div id="40215277" class="c"><input type="checkbox" id="c-40215277" checked=""/><div class="controls bullet"><span class="by">Arnavion</span><span>|</span><a href="#40212503">parent</a><span>|</span><a href="#40217356">prev</a><span>|</span><a href="#40217679">next</a><span>|</span><label class="collapse" for="c-40215277">[-]</label><label class="expand" for="c-40215277">[6 more]</label></div><br/><div class="children"><div class="content">Technically `sudo -u` can switch to any user on the system while only a limited few would be allowed as ssh targets. Even root might not be allowed as an ssh target if `PermitRootLogin` is set to `no`, which I do on all my systems.</div><br/><div id="40215711" class="c"><input type="checkbox" id="c-40215711" checked=""/><div class="controls bullet"><span class="by">pmontra</span><span>|</span><a href="#40212503">root</a><span>|</span><a href="#40215277">parent</a><span>|</span><a href="#40218852">next</a><span>|</span><label class="collapse" for="c-40215711">[-]</label><label class="expand" for="c-40215711">[2 more]</label></div><br/><div class="children"><div class="content">I do use that a lot<p><pre><code>  sudo -H -u user bash
</code></pre>
after I ssh into a server with my own account. That other user might even be a no login account.</div><br/><div id="40216926" class="c"><input type="checkbox" id="c-40216926" checked=""/><div class="controls bullet"><span class="by">noinsight</span><span>|</span><a href="#40212503">root</a><span>|</span><a href="#40215711">parent</a><span>|</span><a href="#40218852">next</a><span>|</span><label class="collapse" for="c-40216926">[-]</label><label class="expand" for="c-40216926">[1 more]</label></div><br/><div class="children"><div class="content">You can just use `-i` instead of `bash`. (This method indeed requires a shell configured, your method is needed with nologin.)</div><br/></div></div></div></div><div id="40218852" class="c"><input type="checkbox" id="c-40218852" checked=""/><div class="controls bullet"><span class="by">fsckboy</span><span>|</span><a href="#40212503">root</a><span>|</span><a href="#40215277">parent</a><span>|</span><a href="#40215711">prev</a><span>|</span><a href="#40217679">next</a><span>|</span><label class="collapse" for="c-40218852">[-]</label><label class="expand" for="c-40218852">[3 more]</label></div><br/><div class="children"><div class="content">&gt;<i>Even root might not be allowed as an ssh target if `PermitRootLogin` is set to `no`, which I do on all my systems.</i><p>would something like PermitRootLogin=localhost punch an enormous hole in your intricate opsec?</div><br/><div id="40219480" class="c"><input type="checkbox" id="c-40219480" checked=""/><div class="controls bullet"><span class="by">jimbobthrowawy</span><span>|</span><a href="#40212503">root</a><span>|</span><a href="#40218852">parent</a><span>|</span><a href="#40217679">next</a><span>|</span><label class="collapse" for="c-40219480">[-]</label><label class="expand" for="c-40219480">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve set up tor on some machines to forward ssh as a hidden service for an easy to configure way to get past NAT before. That shows up as a login from localhost. (could be configured differently, with some extra work)<p>There&#x27;s so ways to configure access to a system, each with footguns I&#x27;m surely unaware of.</div><br/></div></div></div></div></div></div><div id="40217679" class="c"><input type="checkbox" id="c-40217679" checked=""/><div class="controls bullet"><span class="by">TachyonicBytes</span><span>|</span><a href="#40212503">parent</a><span>|</span><a href="#40215277">prev</a><span>|</span><a href="#40215636">next</a><span>|</span><label class="collapse" for="c-40217679">[-]</label><label class="expand" for="c-40217679">[4 more]</label></div><br/><div class="children"><div class="content">It&#x27;s the usual way to make changes to a privileged file in Emacs; ssh to localhost with root.</div><br/><div id="40218108" class="c"><input type="checkbox" id="c-40218108" checked=""/><div class="controls bullet"><span class="by">terinjokes</span><span>|</span><a href="#40212503">root</a><span>|</span><a href="#40217679">parent</a><span>|</span><a href="#40219077">next</a><span>|</span><label class="collapse" for="c-40218108">[-]</label><label class="expand" for="c-40218108">[1 more]</label></div><br/><div class="children"><div class="content">&#x27;sudo&#x27; and &#x27;doas&#x27; are inline connection methods in TRAMP, so no need for SSH to localhost. Curious that systemd-run isn&#x27;t already supported, but I imagine that will quickly change.</div><br/></div></div><div id="40219077" class="c"><input type="checkbox" id="c-40219077" checked=""/><div class="controls bullet"><span class="by">lanstin</span><span>|</span><a href="#40212503">root</a><span>|</span><a href="#40217679">parent</a><span>|</span><a href="#40218108">prev</a><span>|</span><a href="#40218515">next</a><span>|</span><label class="collapse" for="c-40219077">[-]</label><label class="expand" for="c-40219077">[1 more]</label></div><br/><div class="children"><div class="content">I like to have one of my tmux windows be a sudo session with emacs running as root and mostly used to run emerge world or apt update etc. also a window tailing all the logs. I haven’t been on a machine where more than one admin was logged in at the same time in quite some time.</div><br/></div></div><div id="40218515" class="c"><input type="checkbox" id="c-40218515" checked=""/><div class="controls bullet"><span class="by">tristan957</span><span>|</span><a href="#40212503">root</a><span>|</span><a href="#40217679">parent</a><span>|</span><a href="#40219077">prev</a><span>|</span><a href="#40215636">next</a><span>|</span><label class="collapse" for="c-40218515">[-]</label><label class="expand" for="c-40218515">[1 more]</label></div><br/><div class="children"><div class="content">Why not use sudoedit?</div><br/></div></div></div></div><div id="40215636" class="c"><input type="checkbox" id="c-40215636" checked=""/><div class="controls bullet"><span class="by">yegle</span><span>|</span><a href="#40212503">parent</a><span>|</span><a href="#40217679">prev</a><span>|</span><a href="#40220024">next</a><span>|</span><label class="collapse" for="c-40215636">[-]</label><label class="expand" for="c-40215636">[1 more]</label></div><br/><div class="children"><div class="content">In my previous job, we set up a privileged account on a server with shell set to `git-shell`, leave some shell scripts in $HOME, so that we can do:<p>&gt; ssh user@privileged-commands .&#x2F;do-something</div><br/></div></div></div></div><div id="40220024" class="c"><input type="checkbox" id="c-40220024" checked=""/><div class="controls bullet"><span class="by">thayne</span><span>|</span><a href="#40212503">prev</a><span>|</span><a href="#40215819">next</a><span>|</span><label class="collapse" for="c-40220024">[-]</label><label class="expand" for="c-40220024">[2 more]</label></div><br/><div class="children"><div class="content">First of all, I like the idea. But I have questions.<p>What does logging look like for this?<p>I don&#x27;t think it would be too difficult to log commands run with polkit, but is there an equivalent of sudo I&#x2F;O logs? My guess is there isn&#x27;t now, but to fully replace sudo it will probably need a way to record everything on the ptty it creates.<p>What environment variables does it forward by default? From the man page it sounds like SHELL is. What about TERM? Any others? What environment variables are set? What is PATH set to?<p>How are signals handled? Will a signal sent to the run0 process be propagated to the priveleged process?<p>What about sudoedit? How would I achieve similar functionality with run0?</div><br/><div id="40220156" class="c"><input type="checkbox" id="c-40220156" checked=""/><div class="controls bullet"><span class="by">cl3misch</span><span>|</span><a href="#40220024">parent</a><span>|</span><a href="#40215819">next</a><span>|</span><label class="collapse" for="c-40220156">[-]</label><label class="expand" for="c-40220156">[1 more]</label></div><br/><div class="children"><div class="content">From the post:<p>&gt; well, admittedly, we <i>do</i> propagate $TERM, but that&#x27;s an explicit exception, i.e. allowlist rather than denylist</div><br/></div></div></div></div><div id="40215819" class="c"><input type="checkbox" id="c-40215819" checked=""/><div class="controls bullet"><span class="by">airocker</span><span>|</span><a href="#40220024">prev</a><span>|</span><a href="#40212557">next</a><span>|</span><label class="collapse" for="c-40215819">[-]</label><label class="expand" for="c-40215819">[60 more]</label></div><br/><div class="children"><div class="content">I have seldom come across unix multiuser environments getting used anymore for servers. Its generally just one user on one physical machine now a days. I understand run0&#x27;s promise is still useful but i would really like to see the whole unix permission system simplified for just one user who has sudo access.</div><br/><div id="40216847" class="c"><input type="checkbox" id="c-40216847" checked=""/><div class="controls bullet"><span class="by">mbreese</span><span>|</span><a href="#40215819">parent</a><span>|</span><a href="#40216746">next</a><span>|</span><label class="collapse" for="c-40216847">[-]</label><label class="expand" for="c-40216847">[13 more]</label></div><br/><div class="children"><div class="content"><i>&gt; across unix multiuser environments getting used anymore for servers</i><p>I guess it depends on the servers. I&#x27;m in academic&#x2F;research computing and single-user systems are the anomaly. Part of it is having access to beefier systems for smaller slices of time, but most of it is being able to share data and collaboration between users.<p>If you&#x27;re only used to cloud VMs that are setup for a single user or service, I guess your views would be different.</div><br/><div id="40216876" class="c"><input type="checkbox" id="c-40216876" checked=""/><div class="controls bullet"><span class="by">shrimp_emoji</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40216847">parent</a><span>|</span><a href="#40216746">next</a><span>|</span><label class="collapse" for="c-40216876">[-]</label><label class="expand" for="c-40216876">[12 more]</label></div><br/><div class="children"><div class="content">&gt; <i>If you&#x27;re only used to cloud VMs that are setup for a single user or service, I guess your views would be different.</i><p>This is overwhelmingly the view for business and personal users. Settings like what you described are very rare nowadays.<p>No corporate IT department is timesharing users on a mainframe. It&#x27;s just baremetal laptops or VMs on Windows with networked mountpoints.</div><br/><div id="40220135" class="c"><input type="checkbox" id="c-40220135" checked=""/><div class="controls bullet"><span class="by">inopinatus</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40216876">parent</a><span>|</span><a href="#40217191">next</a><span>|</span><label class="collapse" for="c-40220135">[-]</label><label class="expand" for="c-40220135">[1 more]</label></div><br/><div class="children"><div class="content">&gt; No corporate IT department is timesharing users on a mainframe<p>Not a mainframe perhaps, but this sentiment is flat wrong otherwise, because that is how Citrix and RDS (fka Terminal Server) do app virtualization. It&#x27;s an approach in widespread use both for enterprise mobile&#x2F;remote access, and for thin clients in point of sale or booth applications. What&#x27;s more, a *nix as the underlying infrastructure is far from unusual.<p>I have first-hand insider knowledge of two financial institutions that prefer this delivery model to manage the attack surface in retail settings, and a supermarket chain that prefers it because employee theft is seen as a problem. It’s also a model that is easy to describe and pitch to corporate CIOs, which is undoubtedly a merit in the eyes of many project managers.<p>One of the above financial institutions actually does still have an entire department of users logged in to an S&#x2F;390 rented from IBM. They’ve been trying to discontinue the mainframe for years. I’m told there are similar continuing circumstances in airline reservations and credit card schemes; not just transaction processing, but connected interactive user sessions.<p>This is what corporate IT actually looks like. It is super different to the tech environments and white-collar head offices many of us think are the universal exemplar.</div><br/></div></div><div id="40217191" class="c"><input type="checkbox" id="c-40217191" checked=""/><div class="controls bullet"><span class="by">mbreese</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40216876">parent</a><span>|</span><a href="#40220135">prev</a><span>|</span><a href="#40217763">next</a><span>|</span><label class="collapse" for="c-40217191">[-]</label><label class="expand" for="c-40217191">[9 more]</label></div><br/><div class="children"><div class="content">Multi-user clusters are still quite common in HPC. And I think you&#x27;re not going to see a switch away from multi-user systems anytime soon. Single user systems like laptops might be a good use-case, but even the laptop I&#x27;m using now has different accounts for me and my wife (and it&#x27;s a Mac).<p>When you have one OS that is used on devices from phones, to laptops, to servers, to HPC clusters, you&#x27;re going to have this friction. Could Linux operate in a single-user mode? Of course. But does that really make sense for the other use-cases?</div><br/><div id="40217382" class="c"><input type="checkbox" id="c-40217382" checked=""/><div class="controls bullet"><span class="by">airocker</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40217191">parent</a><span>|</span><a href="#40217636">next</a><span>|</span><label class="collapse" for="c-40217382">[-]</label><label class="expand" for="c-40217382">[4 more]</label></div><br/><div class="children"><div class="content">you could potentially create multiple containers in that machine which are single user and give to every user who needs access. CPU&#x2F;Memory&#x2F;GPU can be assigned in any way you want(shared&#x2F;not shared). Now no user can mess up another user.</div><br/><div id="40220499" class="c"><input type="checkbox" id="c-40220499" checked=""/><div class="controls bullet"><span class="by">wongarsu</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40217382">parent</a><span>|</span><a href="#40220652">next</a><span>|</span><label class="collapse" for="c-40220499">[-]</label><label class="expand" for="c-40220499">[1 more]</label></div><br/><div class="children"><div class="content">Isn&#x27;t that just reinventing multiuser operating systems? Normal Linux already has the property that no user can mess up any other user (unless they are root or have sudo rights)</div><br/></div></div><div id="40220652" class="c"><input type="checkbox" id="c-40220652" checked=""/><div class="controls bullet"><span class="by">weebull</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40217382">parent</a><span>|</span><a href="#40220499">prev</a><span>|</span><a href="#40218780">next</a><span>|</span><label class="collapse" for="c-40220652">[-]</label><label class="expand" for="c-40220652">[1 more]</label></div><br/><div class="children"><div class="content">Not containers, but cgroups, and that is how HPC clusters work today. You still need multiple users though.</div><br/></div></div><div id="40218780" class="c"><input type="checkbox" id="c-40218780" checked=""/><div class="controls bullet"><span class="by">SoftTalker</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40217382">parent</a><span>|</span><a href="#40220652">prev</a><span>|</span><a href="#40217636">next</a><span>|</span><label class="collapse" for="c-40218780">[-]</label><label class="expand" for="c-40218780">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not &quot;that machine&quot; it&#x27;s a cluster of dozens or hundreds of machines that is partitioned in various ways and runs batch jobs submitted via a queuing system (probably slurm).</div><br/></div></div></div></div><div id="40217636" class="c"><input type="checkbox" id="c-40217636" checked=""/><div class="controls bullet"><span class="by">whimsicalism</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40217191">parent</a><span>|</span><a href="#40217382">prev</a><span>|</span><a href="#40217763">next</a><span>|</span><label class="collapse" for="c-40217636">[-]</label><label class="expand" for="c-40217636">[4 more]</label></div><br/><div class="children"><div class="content">is it? most HPC (if GPU clusters count) are probably in industry and managed by containers</div><br/><div id="40218964" class="c"><input type="checkbox" id="c-40218964" checked=""/><div class="controls bullet"><span class="by">birdiesanders</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40217636">parent</a><span>|</span><a href="#40219910">next</a><span>|</span><label class="collapse" for="c-40218964">[-]</label><label class="expand" for="c-40218964">[1 more]</label></div><br/><div class="children"><div class="content">Containers rely on many privilege separation systems to do what they do, they are in fact a rather extreme case of multi-user systems, but they tend to present as “single” user environs to the container’s processes.</div><br/></div></div><div id="40219910" class="c"><input type="checkbox" id="c-40219910" checked=""/><div class="controls bullet"><span class="by">bayindirh</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40217636">parent</a><span>|</span><a href="#40218964">prev</a><span>|</span><a href="#40217763">next</a><span>|</span><label class="collapse" for="c-40219910">[-]</label><label class="expand" for="c-40219910">[2 more]</label></div><br/><div class="children"><div class="content">HPC admin here.<p>Yes. First, we use user level container systems like apptainer&#x2F;singularity, and these containers run under the user itself.<p>This is also same for non academic HPC systems.<p>From schedulers to accounting, <i>everything</i> is done at user level, and we have <i>many, many</i> users.<p>It won’t change anytime soon.</div><br/><div id="40220850" class="c"><input type="checkbox" id="c-40220850" checked=""/><div class="controls bullet"><span class="by">pankajkumar229</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40219910">parent</a><span>|</span><a href="#40217763">next</a><span>|</span><label class="collapse" for="c-40220850">[-]</label><label class="expand" for="c-40220850">[1 more]</label></div><br/><div class="children"><div class="content">there is no reason for users to be maintained in the kernel.</div><br/></div></div></div></div></div></div></div></div><div id="40217763" class="c"><input type="checkbox" id="c-40217763" checked=""/><div class="controls bullet"><span class="by">twic</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40216876">parent</a><span>|</span><a href="#40217191">prev</a><span>|</span><a href="#40216746">next</a><span>|</span><label class="collapse" for="c-40217763">[-]</label><label class="expand" for="c-40217763">[1 more]</label></div><br/><div class="children"><div class="content">I wonder if they might be more common than you think. You will never see someone standing up at a conference and describing this setup, but there are millions of machines out there quietly doing work which are run by people who do not speak at conferences.<p>Where i work, we have a lot of physical machines. The IT staff own the root account, and development teams get some sort of normal user accounts, with highly restricted sudo.</div><br/></div></div></div></div></div></div><div id="40216746" class="c"><input type="checkbox" id="c-40216746" checked=""/><div class="controls bullet"><span class="by">berkes</span><span>|</span><a href="#40215819">parent</a><span>|</span><a href="#40216847">prev</a><span>|</span><a href="#40219888">next</a><span>|</span><label class="collapse" for="c-40216746">[-]</label><label class="expand" for="c-40216746">[6 more]</label></div><br/><div class="children"><div class="content">I always still split up &quot;sysadmin&quot; from &quot;deploy&quot;.<p>Ephemeral setups (amongst which k8s) remove that need but introduce a big load of other stuff.<p>Having a VPS that is managed by sysadmins (users with sudo rights, authed with keys) and on which partly overlapping &quot;deploy&quot; users can write to small parts and maybe do a passwordless &quot;sudo sysctl restart fooapp&quot; but only that, is a nice and simple setup.<p>I manage at least seven of these. And nothing in me even considers porting this to my k8s infra.<p>Edit: The reason for this setup is simple and twofold: deploy is safe and clear: deployers can be confident that whatever crap they pull, the server will churn on, data will be safe, recovery is possible. And all devs&#x2F;ops having their own keys and accts gives a trail, logs and makes it very easy to remove that contractor after she did her work.</div><br/><div id="40219921" class="c"><input type="checkbox" id="c-40219921" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40216746">parent</a><span>|</span><a href="#40217436">next</a><span>|</span><label class="collapse" for="c-40219921">[-]</label><label class="expand" for="c-40219921">[1 more]</label></div><br/><div class="children"><div class="content">Yes, we are moving more and more towards a system of immutable deployments.<p>That&#x27;s good!  We don&#x27;t patch executable binaries these days: we just compile a new one from source, when we made a change.  Similarly, more and more we just build new systems (or their images) from source, instead of mucking around with existing systems.</div><br/></div></div><div id="40217436" class="c"><input type="checkbox" id="c-40217436" checked=""/><div class="controls bullet"><span class="by">theteapot</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40216746">parent</a><span>|</span><a href="#40219921">prev</a><span>|</span><a href="#40219888">next</a><span>|</span><label class="collapse" for="c-40217436">[-]</label><label class="expand" for="c-40217436">[4 more]</label></div><br/><div class="children"><div class="content">I think you mean systemctl.</div><br/><div id="40218207" class="c"><input type="checkbox" id="c-40218207" checked=""/><div class="controls bullet"><span class="by">8372049</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40217436">parent</a><span>|</span><a href="#40219888">next</a><span>|</span><label class="collapse" for="c-40218207">[-]</label><label class="expand" for="c-40218207">[3 more]</label></div><br/><div class="children"><div class="content">He probably meant sysadmin as in the account with sudo access.</div><br/><div id="40219349" class="c"><input type="checkbox" id="c-40219349" checked=""/><div class="controls bullet"><span class="by">BenjiWiebe</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40218207">parent</a><span>|</span><a href="#40219888">next</a><span>|</span><label class="collapse" for="c-40219349">[-]</label><label class="expand" for="c-40219349">[2 more]</label></div><br/><div class="children"><div class="content">s&#x2F;sysctl&#x2F;systemctl&#x2F;</div><br/><div id="40220304" class="c"><input type="checkbox" id="c-40220304" checked=""/><div class="controls bullet"><span class="by">berkes</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40219349">parent</a><span>|</span><a href="#40219888">next</a><span>|</span><label class="collapse" for="c-40220304">[-]</label><label class="expand" for="c-40220304">[1 more]</label></div><br/><div class="children"><div class="content">Correct. Typed it on mobile.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="40219888" class="c"><input type="checkbox" id="c-40219888" checked=""/><div class="controls bullet"><span class="by">bayindirh</span><span>|</span><a href="#40215819">parent</a><span>|</span><a href="#40216746">prev</a><span>|</span><a href="#40215898">next</a><span>|</span><label class="collapse" for="c-40219888">[-]</label><label class="expand" for="c-40219888">[1 more]</label></div><br/><div class="children"><div class="content">Many, many daemons run under their own users. Just because a single human is using the system, it doesn’t mean the system has a single user.<p>Also, people noted HPC, and other still very relevant scenarios.</div><br/></div></div><div id="40215898" class="c"><input type="checkbox" id="c-40215898" checked=""/><div class="controls bullet"><span class="by">rpgwaiter</span><span>|</span><a href="#40215819">parent</a><span>|</span><a href="#40219888">prev</a><span>|</span><a href="#40217462">next</a><span>|</span><label class="collapse" for="c-40215898">[-]</label><label class="expand" for="c-40215898">[10 more]</label></div><br/><div class="children"><div class="content">NixOS may be helping multiuser make a comeback, at least it is for me and my home servers. I no longer have to containerize my apps, i can have one baremetal server with a dozen+ services, all with their own users and permissions, and i don&#x27;t have to actually think about any of the separation.<p>Plus there’s network shares. Multiple people in my home with linux PCs, each with their own slice of the NFS pie based on user perms. Sure, it’s not secure, but these are people I live with, not state-sponsored hackers.<p>All that said, I’d also love a simpler single-user perm setup. For VMs, containers, etc it would be amazing</div><br/><div id="40217505" class="c"><input type="checkbox" id="c-40217505" checked=""/><div class="controls bullet"><span class="by">inhumantsar</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40215898">parent</a><span>|</span><a href="#40216146">next</a><span>|</span><label class="collapse" for="c-40217505">[-]</label><label class="expand" for="c-40217505">[2 more]</label></div><br/><div class="children"><div class="content">&gt; i can have one baremetal server with a dozen+ services, all with their own users and permissions<p>I&#x27;ve used nixos and I don&#x27;t really see how nixos is special apart from the declarative config. The same can&#x2F;should be done with any distro and any config manager.<p>And unless you were running Podman in rootless mode, the same setup applies to containers too.</div><br/><div id="40219945" class="c"><input type="checkbox" id="c-40219945" checked=""/><div class="controls bullet"><span class="by">rpgwaiter</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40217505">parent</a><span>|</span><a href="#40216146">next</a><span>|</span><label class="collapse" for="c-40219945">[-]</label><label class="expand" for="c-40219945">[1 more]</label></div><br/><div class="children"><div class="content">Sure i <i>could</i> do this on debian, but like, i wont. Some software comes packaged with nice scripts to provision new users for running systemd services, but a lot do not.<p>For me and my home network, if the default security mode is “manage users yourself”, i chmod -R 777 on all applicable files and call it a day. Nixos lets me be lazy, as all nixos modules (that I’ve ever used) have their own user setups with minimal permissions by default</div><br/></div></div></div></div><div id="40216146" class="c"><input type="checkbox" id="c-40216146" checked=""/><div class="controls bullet"><span class="by">adastra22</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40215898">parent</a><span>|</span><a href="#40217505">prev</a><span>|</span><a href="#40219940">next</a><span>|</span><label class="collapse" for="c-40216146">[-]</label><label class="expand" for="c-40216146">[4 more]</label></div><br/><div class="children"><div class="content">I’m not sure how “I don’t have to actually think about any of the separation” meshes with the fact that you explicitly setup multiple users and configured file and group permissions accordingly. You clearly put a lot of thought into it.<p>Alternatively, containers really are a no-thinking-required solution. Everything maximally isolated by default.</div><br/><div id="40216833" class="c"><input type="checkbox" id="c-40216833" checked=""/><div class="controls bullet"><span class="by">oceanplexian</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40216146">parent</a><span>|</span><a href="#40216899">next</a><span>|</span><label class="collapse" for="c-40216833">[-]</label><label class="expand" for="c-40216833">[1 more]</label></div><br/><div class="children"><div class="content">Containers are isolated but a far, far cry from maximally isolated. They’re still sharing a Linux Kernel with some hand waving and cgroups. The network isolation and QoS side is half-baked even in the most mature implementations.<p>HVM hypervisors were doing stronger, safer, better isolation than Docker was 10 years ago. They are certainly no-thinking required though which leads to the abysmal state of containerized security and performance we have currently.</div><br/></div></div><div id="40216899" class="c"><input type="checkbox" id="c-40216899" checked=""/><div class="controls bullet"><span class="by">airocker</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40216146">parent</a><span>|</span><a href="#40216833">prev</a><span>|</span><a href="#40219940">next</a><span>|</span><label class="collapse" for="c-40216899">[-]</label><label class="expand" for="c-40216899">[2 more]</label></div><br/><div class="children"><div class="content">There have been no big cves of container escapes for a while now. I guess it can be considered secure enough.</div><br/><div id="40220912" class="c"><input type="checkbox" id="c-40220912" checked=""/><div class="controls bullet"><span class="by">lyu07282</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40216899">parent</a><span>|</span><a href="#40219940">next</a><span>|</span><label class="collapse" for="c-40220912">[-]</label><label class="expand" for="c-40220912">[1 more]</label></div><br/><div class="children"><div class="content">A lot of Kernel privescs are also technically container escapes, so 2 months ago was the last one actually: <a href="https:&#x2F;&#x2F;www.cvedetails.com&#x2F;cve&#x2F;CVE-2024-1086&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.cvedetails.com&#x2F;cve&#x2F;CVE-2024-1086&#x2F;</a></div><br/></div></div></div></div></div></div><div id="40219940" class="c"><input type="checkbox" id="c-40219940" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40215898">parent</a><span>|</span><a href="#40216146">prev</a><span>|</span><a href="#40216291">next</a><span>|</span><label class="collapse" for="c-40219940">[-]</label><label class="expand" for="c-40219940">[1 more]</label></div><br/><div class="children"><div class="content">Containerisation (either with containers or via VMs) doesn&#x27;t have to be expensive.<p>In principle, you can have just exactly the binary (or binaries) you need in the container or VM, without having a full Linux install.<p>See eg Unikernels like Mirage.</div><br/></div></div><div id="40216291" class="c"><input type="checkbox" id="c-40216291" checked=""/><div class="controls bullet"><span class="by">tetris11</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40215898">parent</a><span>|</span><a href="#40219940">prev</a><span>|</span><a href="#40215927">next</a><span>|</span><label class="collapse" for="c-40216291">[-]</label><label class="expand" for="c-40216291">[1 more]</label></div><br/><div class="children"><div class="content">DietPi does exactly the same using Debian</div><br/></div></div><div id="40215927" class="c"><input type="checkbox" id="c-40215927" checked=""/><div class="controls bullet"><span class="by">airocker</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40215898">parent</a><span>|</span><a href="#40216291">prev</a><span>|</span><a href="#40217462">next</a><span>|</span><label class="collapse" for="c-40215927">[-]</label><label class="expand" for="c-40215927">[1 more]</label></div><br/><div class="children"><div class="content">NixOS at it again :)</div><br/></div></div></div></div><div id="40217462" class="c"><input type="checkbox" id="c-40217462" checked=""/><div class="controls bullet"><span class="by">trueismywork</span><span>|</span><a href="#40215819">parent</a><span>|</span><a href="#40215898">prev</a><span>|</span><a href="#40216052">next</a><span>|</span><label class="collapse" for="c-40217462">[-]</label><label class="expand" for="c-40217462">[2 more]</label></div><br/><div class="children"><div class="content">You&#x27;ll just end up implementing multiuser support anyway due to different permissions to different devices services</div><br/><div id="40217522" class="c"><input type="checkbox" id="c-40217522" checked=""/><div class="controls bullet"><span class="by">airocker</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40217462">parent</a><span>|</span><a href="#40216052">next</a><span>|</span><label class="collapse" for="c-40217522">[-]</label><label class="expand" for="c-40217522">[1 more]</label></div><br/><div class="children"><div class="content">How about only in servers where you only have CPU&#x2F;Memory&#x2F;disk&#x2F;GPU with open source trusted drivers?</div><br/></div></div></div></div><div id="40216052" class="c"><input type="checkbox" id="c-40216052" checked=""/><div class="controls bullet"><span class="by">gnufx</span><span>|</span><a href="#40215819">parent</a><span>|</span><a href="#40217462">prev</a><span>|</span><a href="#40219644">next</a><span>|</span><label class="collapse" for="c-40216052">[-]</label><label class="expand" for="c-40216052">[2 more]</label></div><br/><div class="children"><div class="content">Visit the research computing environment sometime, for instance.  The libzma SSH compromise was considered very worrying, after all.</div><br/><div id="40216399" class="c"><input type="checkbox" id="c-40216399" checked=""/><div class="controls bullet"><span class="by">richardwhiuk</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40216052">parent</a><span>|</span><a href="#40219644">next</a><span>|</span><label class="collapse" for="c-40216399">[-]</label><label class="expand" for="c-40216399">[1 more]</label></div><br/><div class="children"><div class="content">That didn&#x27;t need multi-users.</div><br/></div></div></div></div><div id="40219644" class="c"><input type="checkbox" id="c-40219644" checked=""/><div class="controls bullet"><span class="by">unixhero</span><span>|</span><a href="#40215819">parent</a><span>|</span><a href="#40216052">prev</a><span>|</span><a href="#40216591">next</a><span>|</span><label class="collapse" for="c-40219644">[-]</label><label class="expand" for="c-40219644">[1 more]</label></div><br/><div class="children"><div class="content">The humans are now spawns of multithread shells and other things. Linux land is still very multiuser oriented. But it is the rise of the mschines instead.</div><br/></div></div><div id="40216591" class="c"><input type="checkbox" id="c-40216591" checked=""/><div class="controls bullet"><span class="by">anonymous_union</span><span>|</span><a href="#40215819">parent</a><span>|</span><a href="#40219644">prev</a><span>|</span><a href="#40217413">next</a><span>|</span><label class="collapse" for="c-40216591">[-]</label><label class="expand" for="c-40216591">[3 more]</label></div><br/><div class="children"><div class="content">in some other systems the concept has become overloaded. instead of multiple real people as users, different software with different permissions are different users. its not a bad abstraction.</div><br/><div id="40216660" class="c"><input type="checkbox" id="c-40216660" checked=""/><div class="controls bullet"><span class="by">airocker</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40216591">parent</a><span>|</span><a href="#40217413">next</a><span>|</span><label class="collapse" for="c-40216660">[-]</label><label class="expand" for="c-40216660">[2 more]</label></div><br/><div class="children"><div class="content">Maybe containers are a better way of isolating processes as mentioned in other comments.</div><br/></div></div></div></div><div id="40217413" class="c"><input type="checkbox" id="c-40217413" checked=""/><div class="controls bullet"><span class="by">NewJazz</span><span>|</span><a href="#40215819">parent</a><span>|</span><a href="#40216591">prev</a><span>|</span><a href="#40220264">next</a><span>|</span><label class="collapse" for="c-40217413">[-]</label><label class="expand" for="c-40217413">[5 more]</label></div><br/><div class="children"><div class="content">You only have one admin? How do you know who logged in, ssh certificates?</div><br/><div id="40217574" class="c"><input type="checkbox" id="c-40217574" checked=""/><div class="controls bullet"><span class="by">airocker</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40217413">parent</a><span>|</span><a href="#40217582">next</a><span>|</span><label class="collapse" for="c-40217574">[-]</label><label class="expand" for="c-40217574">[3 more]</label></div><br/><div class="children"><div class="content">Only one human per machine. If you need to share the machine, make multiple containers and give everyone a separate container.</div><br/><div id="40218004" class="c"><input type="checkbox" id="c-40218004" checked=""/><div class="controls bullet"><span class="by">NewJazz</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40217574">parent</a><span>|</span><a href="#40217582">next</a><span>|</span><label class="collapse" for="c-40218004">[-]</label><label class="expand" for="c-40218004">[2 more]</label></div><br/><div class="children"><div class="content">You don&#x27;t run any services where more than one person shares responsibility for managing that service? E.g. kubernetes. That is just one guy holding it up?</div><br/><div id="40218279" class="c"><input type="checkbox" id="c-40218279" checked=""/><div class="controls bullet"><span class="by">airocker</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40218004">parent</a><span>|</span><a href="#40217582">next</a><span>|</span><label class="collapse" for="c-40218279">[-]</label><label class="expand" for="c-40218279">[1 more]</label></div><br/><div class="children"><div class="content">In an on-prem cluster, yes one guy or a few sysadmins who either share passwords or can somehow put their keys in the authorized keys file and ssh.<p>In the cloud, AWS&#x2F;GCP let or not let an IAM user reach a server.</div><br/></div></div></div></div></div></div><div id="40217582" class="c"><input type="checkbox" id="c-40217582" checked=""/><div class="controls bullet"><span class="by">medellin</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40217413">parent</a><span>|</span><a href="#40217574">prev</a><span>|</span><a href="#40220264">next</a><span>|</span><label class="collapse" for="c-40217582">[-]</label><label class="expand" for="c-40217582">[1 more]</label></div><br/><div class="children"><div class="content">Signed ssh certs make your life easy here</div><br/></div></div></div></div><div id="40220264" class="c"><input type="checkbox" id="c-40220264" checked=""/><div class="controls bullet"><span class="by">badgersnake</span><span>|</span><a href="#40215819">parent</a><span>|</span><a href="#40217413">prev</a><span>|</span><a href="#40216221">next</a><span>|</span><label class="collapse" for="c-40220264">[-]</label><label class="expand" for="c-40220264">[1 more]</label></div><br/><div class="children"><div class="content">I haven’t seen it doesn’t mean it doesn’t exist.</div><br/></div></div><div id="40216221" class="c"><input type="checkbox" id="c-40216221" checked=""/><div class="controls bullet"><span class="by">mbivert</span><span>|</span><a href="#40215819">parent</a><span>|</span><a href="#40220264">prev</a><span>|</span><a href="#40216794">next</a><span>|</span><label class="collapse" for="c-40216221">[-]</label><label class="expand" for="c-40216221">[10 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve never understood the need for sudo(1) on single-user, physical machines: I keep a root shell (su(1)) around for admin tasks, and it&#x27;s always been sufficient.</div><br/><div id="40217199" class="c"><input type="checkbox" id="c-40217199" checked=""/><div class="controls bullet"><span class="by">chgs</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40216221">parent</a><span>|</span><a href="#40216440">next</a><span>|</span><label class="collapse" for="c-40217199">[-]</label><label class="expand" for="c-40217199">[2 more]</label></div><br/><div class="children"><div class="content">Everything I run with sudo is logged so I know how I messed up.<p>Nothing worse than ansible with its “sudo &#x2F;tmp&#x2F;whatever.sh” which hides what it’s doing.</div><br/><div id="40220288" class="c"><input type="checkbox" id="c-40220288" checked=""/><div class="controls bullet"><span class="by">mbivert</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40217199">parent</a><span>|</span><a href="#40216440">next</a><span>|</span><label class="collapse" for="c-40220288">[-]</label><label class="expand" for="c-40220288">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Everything I run with sudo is logged so I know how I messed up.<p>FWIW, shells have a (configurable) history file. I&#x27;m not sure how it compares to sudo&#x27;s logging though. I also personally perform little day to day admin tasks (I don&#x27;t have as much time nor interest to toy around as I used to, and my current setup has been sufficient for about a decade).<p>&gt; Nothing worse than ansible with its “sudo &#x2F;tmp&#x2F;whatever.sh” which hides what it’s doing.<p>That&#x27;s a nightmare indeed; for sensitive and complex-enough tasks requiring a script, those scripts should at least be equipped with something as crude as a ``log() { printf ... | tail $logfile`` }.</div><br/></div></div></div></div><div id="40216440" class="c"><input type="checkbox" id="c-40216440" checked=""/><div class="controls bullet"><span class="by">airocker</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40216221">parent</a><span>|</span><a href="#40217199">prev</a><span>|</span><a href="#40217134">next</a><span>|</span><label class="collapse" for="c-40216440">[-]</label><label class="expand" for="c-40216440">[2 more]</label></div><br/><div class="children"><div class="content">Its just maybe easier way to not have to go to the root shell.</div><br/><div id="40216629" class="c"><input type="checkbox" id="c-40216629" checked=""/><div class="controls bullet"><span class="by">mbivert</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40216440">parent</a><span>|</span><a href="#40217134">next</a><span>|</span><label class="collapse" for="c-40216629">[-]</label><label class="expand" for="c-40216629">[1 more]</label></div><br/><div class="children"><div class="content">Makes sense (I keep one warm in a tmux, two shortcuts away at most, so it never occurred to me).</div><br/></div></div></div></div><div id="40217134" class="c"><input type="checkbox" id="c-40217134" checked=""/><div class="controls bullet"><span class="by">lupusreal</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40216221">parent</a><span>|</span><a href="#40216440">prev</a><span>|</span><a href="#40216794">next</a><span>|</span><label class="collapse" for="c-40217134">[-]</label><label class="expand" for="c-40217134">[5 more]</label></div><br/><div class="children"><div class="content">One password is easier than two and it feels weird to use the same password for both accounts.  About half of my sudo invocations are &#x27;sudo su&#x27; lmao.</div><br/><div id="40220212" class="c"><input type="checkbox" id="c-40220212" checked=""/><div class="controls bullet"><span class="by">mbivert</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40217134">parent</a><span>|</span><a href="#40218811">next</a><span>|</span><label class="collapse" for="c-40220212">[-]</label><label class="expand" for="c-40220212">[1 more]</label></div><br/><div class="children"><div class="content">&gt; it feels weird to use the same password for both accounts<p>I&#x27;m not sure different passwords adds more protection for single-user machines, especially when sudo(1) can spawn root shells!</div><br/></div></div><div id="40218811" class="c"><input type="checkbox" id="c-40218811" checked=""/><div class="controls bullet"><span class="by">MadnessASAP</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40217134">parent</a><span>|</span><a href="#40220212">prev</a><span>|</span><a href="#40217721">next</a><span>|</span><label class="collapse" for="c-40218811">[-]</label><label class="expand" for="c-40218811">[1 more]</label></div><br/><div class="children"><div class="content">You&#x27;re entering your own accounts password, not root, when you use sudo. It&#x27;s a security measure to prove our shell hasn&#x27;t been hijacked and to make you pause and acknowledge your running a command that may affect the entire system.<p>You can also disable it in the sudoers file.</div><br/></div></div><div id="40217721" class="c"><input type="checkbox" id="c-40217721" checked=""/><div class="controls bullet"><span class="by">bmicraft</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40217134">parent</a><span>|</span><a href="#40218811">prev</a><span>|</span><a href="#40219340">next</a><span>|</span><label class="collapse" for="c-40217721">[-]</label><label class="expand" for="c-40217721">[1 more]</label></div><br/><div class="children"><div class="content">You could probably save a process with `sudo -i`</div><br/></div></div><div id="40219340" class="c"><input type="checkbox" id="c-40219340" checked=""/><div class="controls bullet"><span class="by">lanstin</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40217134">parent</a><span>|</span><a href="#40217721">prev</a><span>|</span><a href="#40216794">next</a><span>|</span><label class="collapse" for="c-40219340">[-]</label><label class="expand" for="c-40219340">[1 more]</label></div><br/><div class="children"><div class="content">of mine are sudo bash.</div><br/></div></div></div></div></div></div><div id="40216049" class="c"><input type="checkbox" id="c-40216049" checked=""/><div class="controls bullet"><span class="by">TZubiri</span><span>|</span><a href="#40215819">parent</a><span>|</span><a href="#40216794">prev</a><span>|</span><a href="#40218411">next</a><span>|</span><label class="collapse" for="c-40216049">[-]</label><label class="expand" for="c-40216049">[2 more]</label></div><br/><div class="children"><div class="content">access management is usually delegated to other systems that supervise UNIX, like AWS</div><br/><div id="40216074" class="c"><input type="checkbox" id="c-40216074" checked=""/><div class="controls bullet"><span class="by">airocker</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40216049">parent</a><span>|</span><a href="#40218411">next</a><span>|</span><label class="collapse" for="c-40216074">[-]</label><label class="expand" for="c-40216074">[1 more]</label></div><br/><div class="children"><div class="content">Or Kubernetes. Thats where a standard way of authentication&#x2F;authorization should be there.</div><br/></div></div></div></div><div id="40218411" class="c"><input type="checkbox" id="c-40218411" checked=""/><div class="controls bullet"><span class="by">jongjong</span><span>|</span><a href="#40215819">parent</a><span>|</span><a href="#40216049">prev</a><span>|</span><a href="#40212557">next</a><span>|</span><label class="collapse" for="c-40218411">[-]</label><label class="expand" for="c-40218411">[2 more]</label></div><br/><div class="children"><div class="content">Technically not with virtual machines as the hardware is shared, though I agree, nowadays accounts and access control of the system belong to the virtualization layer below. The benefits of multiple accounts per machine are tiny and not worth the complexity for server setups.<p>We could significantly simplify things by getting rid of the account system. The same could be said for a lot of systems like database servers. Typically it&#x27;s just one database, one user (your application server) with full access. The account system is mostly an annoyance.<p>For big company use cases where you want to reduce attack surface, why not spawn a second server with different credentials? Anyway big companies typically have many database servers in a cluster and the same credentials are shared by many server processes... The tendency there is literally in the opposite direction.</div><br/><div id="40219152" class="c"><input type="checkbox" id="c-40219152" checked=""/><div class="controls bullet"><span class="by">zer00eyz</span><span>|</span><a href="#40215819">root</a><span>|</span><a href="#40218411">parent</a><span>|</span><a href="#40212557">next</a><span>|</span><label class="collapse" for="c-40219152">[-]</label><label class="expand" for="c-40219152">[1 more]</label></div><br/><div class="children"><div class="content">&gt;&gt; Typically it&#x27;s just one database, one user (your application server) with full access<p>This is a terrifying way to access databases.<p>Super user, A Modify user (just below super but cant delegate rights) for schema changes. A read&#x2F;write app user... Probably a pile of read only users who, have audit trails... You might want some admins or analytics users (who have their own scheme additions).<p>The words security and audit trails all spring to mind.</div><br/></div></div></div></div></div></div><div id="40212557" class="c"><input type="checkbox" id="c-40212557" checked=""/><div class="controls bullet"><span class="by">fn-mote</span><span>|</span><a href="#40215819">prev</a><span>|</span><a href="#40215962">next</a><span>|</span><label class="collapse" for="c-40212557">[-]</label><label class="expand" for="c-40212557">[42 more]</label></div><br/><div class="children"><div class="content">Overall, this seems great.<p>However...<p>&gt; [...] by default it will tint your terminal background in a reddish tone while you are operating with elevated privileges<p>?!! ouch ... seems orthogonal to the actual important parts.<p>Disclaimer: I didn&#x27;t try it.</div><br/><div id="40215695" class="c"><input type="checkbox" id="c-40215695" checked=""/><div class="controls bullet"><span class="by">bityard</span><span>|</span><a href="#40212557">parent</a><span>|</span><a href="#40212686">next</a><span>|</span><label class="collapse" for="c-40215695">[-]</label><label class="expand" for="c-40215695">[17 more]</label></div><br/><div class="children"><div class="content">This is a perfect example of a choice that a developer makes to suit his&#x2F;her personal preference and environment, believing that everyone does (or should) use their computer the same way. Which is sadly becoming a more common trend.<p>I like the idea, but I don&#x27;t think it should be on by default. The rest of us have just used root-specific shell prompts for the last few decades or so.</div><br/><div id="40216070" class="c"><input type="checkbox" id="c-40216070" checked=""/><div class="controls bullet"><span class="by">TZubiri</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40215695">parent</a><span>|</span><a href="#40212686">next</a><span>|</span><label class="collapse" for="c-40216070">[-]</label><label class="expand" for="c-40216070">[16 more]</label></div><br/><div class="children"><div class="content">It&#x27;s fine.<p>Not every software needs to be infinitely configurable and open source just in case the configurations don&#x27;t cover the needs of all.<p>We need opinionated software, if you don&#x27;t want to make any choice for me, you can&#x27;t even give me an assembly editor for fear of forcing your CPU arch of choice.</div><br/><div id="40220649" class="c"><input type="checkbox" id="c-40220649" checked=""/><div class="controls bullet"><span class="by">aragilar</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40216070">parent</a><span>|</span><a href="#40217307">next</a><span>|</span><label class="collapse" for="c-40220649">[-]</label><label class="expand" for="c-40220649">[1 more]</label></div><br/><div class="children"><div class="content">You can&#x27;t think of ways this could break things? I would find this a useful feature, but I&#x27;m also aware of how this works, and the issues it could cause.</div><br/></div></div><div id="40217307" class="c"><input type="checkbox" id="c-40217307" checked=""/><div class="controls bullet"><span class="by">shrimp_emoji</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40216070">parent</a><span>|</span><a href="#40220649">prev</a><span>|</span><a href="#40212686">next</a><span>|</span><label class="collapse" for="c-40217307">[-]</label><label class="expand" for="c-40217307">[14 more]</label></div><br/><div class="children"><div class="content">Counterpoint: GNOME and the modern GTK framework<p>(I needn&#x27;t say more.)</div><br/><div id="40217491" class="c"><input type="checkbox" id="c-40217491" checked=""/><div class="controls bullet"><span class="by">yoyohello13</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40217307">parent</a><span>|</span><a href="#40218152">next</a><span>|</span><label class="collapse" for="c-40217491">[-]</label><label class="expand" for="c-40217491">[11 more]</label></div><br/><div class="children"><div class="content">Gnome is great if you&#x27;re willing to do things their way. I Like Gnome a lot actually.</div><br/><div id="40217854" class="c"><input type="checkbox" id="c-40217854" checked=""/><div class="controls bullet"><span class="by">flaptrap</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40217491">parent</a><span>|</span><a href="#40218152">next</a><span>|</span><label class="collapse" for="c-40217854">[-]</label><label class="expand" for="c-40217854">[10 more]</label></div><br/><div class="children"><div class="content">Gnome&#x27;s UI peaked at 2.32. Find out how the users operate and implement so users can work efficiently. Don&#x27;t make changes just to make your mark or to make users work on the desktop like they see on a cell phone. That is so basic.</div><br/><div id="40218906" class="c"><input type="checkbox" id="c-40218906" checked=""/><div class="controls bullet"><span class="by">jimbosis</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40217854">parent</a><span>|</span><a href="#40219501">next</a><span>|</span><label class="collapse" for="c-40218906">[-]</label><label class="expand" for="c-40218906">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t know if you are DE shopping, but I&#x27;ve been very happy for the past few years with the MATE Desktop Environment, which &quot;...is the continuation of GNOME 2. It provides an intuitive and attractive desktop environment using traditional metaphors for Linux and other Unix-like operating systems.&quot;<p><a href="https:&#x2F;&#x2F;mate-desktop.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;mate-desktop.org&#x2F;</a><p>Among a great number of things I really like, I will mention that Caja, the MATE version of GNOME 2&#x27;s Nautilus file manager, can still be switched to spatial mode.<p><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Spatial_file_manager" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Spatial_file_manager</a><p>Generally speaking, I too really liked GNOME 2.32 and its predecessors, and, as far as I&#x27;m concerned, MATE is as it describes itself.<p>EDIT: Wording mistake.</div><br/></div></div><div id="40219501" class="c"><input type="checkbox" id="c-40219501" checked=""/><div class="controls bullet"><span class="by">abenga</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40217854">parent</a><span>|</span><a href="#40218906">prev</a><span>|</span><a href="#40218831">next</a><span>|</span><label class="collapse" for="c-40219501">[-]</label><label class="expand" for="c-40219501">[1 more]</label></div><br/><div class="children"><div class="content">Gnome is always getting better (if you want to do things the Gnome way). Why should a DE show any elements begging to be clicked on my desktop while I am working (window list, etc)? I am only interested in what&#x27;s in my IDE, terminal, and browser. Present Gnome comes closest to my ideal of fading into the background and letting me focus on my tasks.</div><br/></div></div><div id="40218831" class="c"><input type="checkbox" id="c-40218831" checked=""/><div class="controls bullet"><span class="by">MadnessASAP</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40217854">parent</a><span>|</span><a href="#40219501">prev</a><span>|</span><a href="#40219092">next</a><span>|</span><label class="collapse" for="c-40218831">[-]</label><label class="expand" for="c-40218831">[6 more]</label></div><br/><div class="children"><div class="content">I have no idea why Gnome keeps on insisting on breaking expectations. From the shell as a whole to the widgets and even the window titlebars they seem to insist on being different for the sake of being different.</div><br/><div id="40219511" class="c"><input type="checkbox" id="c-40219511" checked=""/><div class="controls bullet"><span class="by">abenga</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40218831">parent</a><span>|</span><a href="#40219092">next</a><span>|</span><label class="collapse" for="c-40219511">[-]</label><label class="expand" for="c-40219511">[5 more]</label></div><br/><div class="children"><div class="content">Because their choices <i>are</i> better, at least for some of us. Users who prefer the traditional desktop paradigm have a wealth of alternative DEs to choose from.</div><br/><div id="40219561" class="c"><input type="checkbox" id="c-40219561" checked=""/><div class="controls bullet"><span class="by">MadnessASAP</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40219511">parent</a><span>|</span><a href="#40219092">next</a><span>|</span><label class="collapse" for="c-40219561">[-]</label><label class="expand" for="c-40219561">[4 more]</label></div><br/><div class="children"><div class="content">I suppose my brutally minimalist Sway config with barely there titlebars and a skinny little status bar and not an icon, button, or widget in sight doesn&#x27;t give me great standing to call for a respect of conventions.<p>I suppose I should say I found Gnomes luridly chunky decorations and widgets to be personally offensive.</div><br/><div id="40220001" class="c"><input type="checkbox" id="c-40220001" checked=""/><div class="controls bullet"><span class="by">abenga</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40219561">parent</a><span>|</span><a href="#40219092">next</a><span>|</span><label class="collapse" for="c-40220001">[-]</label><label class="expand" for="c-40220001">[3 more]</label></div><br/><div class="children"><div class="content">What widgets? Gnome has just the one black bar at the top.</div><br/><div id="40220174" class="c"><input type="checkbox" id="c-40220174" checked=""/><div class="controls bullet"><span class="by">MadnessASAP</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40220001">parent</a><span>|</span><a href="#40219092">next</a><span>|</span><label class="collapse" for="c-40220174">[-]</label><label class="expand" for="c-40220174">[2 more]</label></div><br/><div class="children"><div class="content">And it&#x27;s a thick monster with all kinds of extra crap (I&#x27;m my not so humble opinion) shoved in it.</div><br/><div id="40220867" class="c"><input type="checkbox" id="c-40220867" checked=""/><div class="controls bullet"><span class="by">abenga</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40220174">parent</a><span>|</span><a href="#40219092">next</a><span>|</span><label class="collapse" for="c-40220867">[-]</label><label class="expand" for="c-40220867">[1 more]</label></div><br/><div class="children"><div class="content">It literally has an activities button, the time and date, and a tiny button for interacting with settings on the right.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="40219092" class="c"><input type="checkbox" id="c-40219092" checked=""/><div class="controls bullet"><span class="by">loeg</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40217854">parent</a><span>|</span><a href="#40218831">prev</a><span>|</span><a href="#40218152">next</a><span>|</span><label class="collapse" for="c-40219092">[-]</label><label class="expand" for="c-40219092">[1 more]</label></div><br/><div class="children"><div class="content">These days KDE gets a lot of the same things right that GNOME 2 did.</div><br/></div></div></div></div></div></div><div id="40218152" class="c"><input type="checkbox" id="c-40218152" checked=""/><div class="controls bullet"><span class="by">metalspoon</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40217307">parent</a><span>|</span><a href="#40217491">prev</a><span>|</span><a href="#40218083">next</a><span>|</span><label class="collapse" for="c-40218152">[-]</label><label class="expand" for="c-40218152">[1 more]</label></div><br/><div class="children"><div class="content">Yes. I prefer having tools that do one thing well. That&#x27;s the point of unix. How the user uses them should be up to her.<p>GNOME offering a monolithic environment with heavy opinionation is the opposite.</div><br/></div></div><div id="40218083" class="c"><input type="checkbox" id="c-40218083" checked=""/><div class="controls bullet"><span class="by">johnny22</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40217307">parent</a><span>|</span><a href="#40218152">prev</a><span>|</span><a href="#40212686">next</a><span>|</span><label class="collapse" for="c-40218083">[-]</label><label class="expand" for="c-40218083">[1 more]</label></div><br/><div class="children"><div class="content">actually you do, because gnome is great</div><br/></div></div></div></div></div></div></div></div><div id="40212686" class="c"><input type="checkbox" id="c-40212686" checked=""/><div class="controls bullet"><span class="by">NekkoDroid</span><span>|</span><a href="#40212557">parent</a><span>|</span><a href="#40215695">prev</a><span>|</span><a href="#40219040">next</a><span>|</span><label class="collapse" for="c-40212686">[-]</label><label class="expand" for="c-40212686">[23 more]</label></div><br/><div class="children"><div class="content">I tried it a bit ago (when it was still called uid0, pre-release), I also wasn&#x27;t a fan of the tinting.<p>I like the intent behind it, but some terminals already tint the header color when running sudo, I haven&#x27;t tested if its done specifically for sudo or if its in a more generic way that could handle this as well.</div><br/><div id="40213006" class="c"><input type="checkbox" id="c-40213006" checked=""/><div class="controls bullet"><span class="by">withinboredom</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40212686">parent</a><span>|</span><a href="#40212858">next</a><span>|</span><label class="collapse" for="c-40213006">[-]</label><label class="expand" for="c-40213006">[11 more]</label></div><br/><div class="children"><div class="content">I can think of a number of things this tinting would break.</div><br/><div id="40216548" class="c"><input type="checkbox" id="c-40216548" checked=""/><div class="controls bullet"><span class="by">seanc</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40213006">parent</a><span>|</span><a href="#40213766">next</a><span>|</span><label class="collapse" for="c-40216548">[-]</label><label class="expand" for="c-40216548">[6 more]</label></div><br/><div class="children"><div class="content">It violates the principle of Least Surprise; if I&#x27;m invoking run0 I&#x27;m expecting it to run my program with a different UID and return the same stdout I&#x27;d have gotten if I had just run the program in my shell.  Not inject a whole bunch of color control bytes in there.  Which hopefully my terminal will handle.  Unless it doesn&#x27;t.<p>I&#x27;ll give them the benefit of the doubt and assume they only do this if $TERM supports color.  But still.  That $TERM variable can surprise a poor programmer in all sorts of ways.</div><br/><div id="40217883" class="c"><input type="checkbox" id="c-40217883" checked=""/><div class="controls bullet"><span class="by">zeroimpl</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40216548">parent</a><span>|</span><a href="#40217545">next</a><span>|</span><label class="collapse" for="c-40217883">[-]</label><label class="expand" for="c-40217883">[3 more]</label></div><br/><div class="children"><div class="content">But sudo already doesn’t do that either. Eg sudo may ask for a password, and output some control sequences which hide the text so your password is not visible.<p>This feels like much ado about nothing.<p>Edit: Also don’t forget the “with great power comes great responsibility” blurb that sudo likes to output. I know that doesn’t happen in scripts when output is redirected, but I’m sure run0 will figure that out too.</div><br/><div id="40218131" class="c"><input type="checkbox" id="c-40218131" checked=""/><div class="controls bullet"><span class="by">dijit</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40217883">parent</a><span>|</span><a href="#40220144">next</a><span>|</span><label class="collapse" for="c-40218131">[-]</label><label class="expand" for="c-40218131">[1 more]</label></div><br/><div class="children"><div class="content">asking for a password to do an authenticated action is about as far away from surprising as I can legitimately reason about.<p>The contextual blurb does have a way of disabling it in a persistent config, which is easy enough to set. It also goes to stderr and not stdout and does nothing to alter the output of the command itself.<p>It also does not show if you have NOPASSWD: set in your sudoers. So even less surprising.</div><br/></div></div><div id="40220144" class="c"><input type="checkbox" id="c-40220144" checked=""/><div class="controls bullet"><span class="by">withinboredom</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40217883">parent</a><span>|</span><a href="#40218131">prev</a><span>|</span><a href="#40217545">next</a><span>|</span><label class="collapse" for="c-40220144">[-]</label><label class="expand" for="c-40220144">[1 more]</label></div><br/><div class="children"><div class="content">&gt; sudo may ask for a password, and output some control sequences which hide the text so your password is not visible.<p>You can turn this off for certain users and&#x2F;or programs.</div><br/></div></div></div></div><div id="40217545" class="c"><input type="checkbox" id="c-40217545" checked=""/><div class="controls bullet"><span class="by">10000truths</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40216548">parent</a><span>|</span><a href="#40217883">prev</a><span>|</span><a href="#40213766">next</a><span>|</span><label class="collapse" for="c-40217545">[-]</label><label class="expand" for="c-40217545">[2 more]</label></div><br/><div class="children"><div class="content">Any sane command line program will only output color codes if isatty(STDOUT_FILENO) succeeds.</div><br/><div id="40217597" class="c"><input type="checkbox" id="c-40217597" checked=""/><div class="controls bullet"><span class="by">withinboredom</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40217545">parent</a><span>|</span><a href="#40213766">next</a><span>|</span><label class="collapse" for="c-40217597">[-]</label><label class="expand" for="c-40217597">[1 more]</label></div><br/><div class="children"><div class="content">That can succeed in a number of cases, where it actually isn&#x27;t a tty with a user on the other end of it. There are a number of internal tools at work that only output logging if there is a tty and thus are run in their cronjobs with a tty. If there were unexpected color outputs in the logs, that would suck since the log aggregators probably wouldn&#x27;t know what to do with it.</div><br/></div></div></div></div></div></div><div id="40213766" class="c"><input type="checkbox" id="c-40213766" checked=""/><div class="controls bullet"><span class="by">lupire</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40213006">parent</a><span>|</span><a href="#40216548">prev</a><span>|</span><a href="#40212858">next</a><span>|</span><label class="collapse" for="c-40213766">[-]</label><label class="expand" for="c-40213766">[4 more]</label></div><br/><div class="children"><div class="content">Can you name any?</div><br/><div id="40217645" class="c"><input type="checkbox" id="c-40217645" checked=""/><div class="controls bullet"><span class="by">withinboredom</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40213766">parent</a><span>|</span><a href="#40216039">next</a><span>|</span><label class="collapse" for="c-40217645">[-]</label><label class="expand" for="c-40217645">[1 more]</label></div><br/><div class="children"><div class="content">Containers run with a tty attached but no console on the other end and then trying to read the logs, for starters. Additionally, as mentioned, conflicts with the user&#x27;s color scheme or even the program&#x27;s. Further, it&#x27;s possible to do this without the help of run0, so I suspect users already doing that are going to get their colors messed up and be annoyed. For example, prod machines are usually red, and running as root on a prod machine is royal purple. If this is used, seeing a red background instead of a purple one is likely non-desirable.</div><br/></div></div><div id="40216039" class="c"><input type="checkbox" id="c-40216039" checked=""/><div class="controls bullet"><span class="by">dsr_</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40213766">parent</a><span>|</span><a href="#40217645">prev</a><span>|</span><a href="#40217253">next</a><span>|</span><label class="collapse" for="c-40216039">[-]</label><label class="expand" for="c-40216039">[1 more]</label></div><br/><div class="children"><div class="content">The user&#x27;s choice of color schemes.</div><br/></div></div><div id="40217253" class="c"><input type="checkbox" id="c-40217253" checked=""/><div class="controls bullet"><span class="by">shiomiru</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40213766">parent</a><span>|</span><a href="#40216039">prev</a><span>|</span><a href="#40212858">next</a><span>|</span><label class="collapse" for="c-40217253">[-]</label><label class="expand" for="c-40217253">[1 more]</label></div><br/><div class="children"><div class="content">If the program you&#x27;re running prints red text, then you get red bgcolor with red fgcolor. Good luck reading that.<p>(Also, users with the wrong color scheme get that experience by default. Though that is a niche use case enough that I&#x27;d be surprised if systemd devs cared about it.)</div><br/></div></div></div></div></div></div><div id="40212858" class="c"><input type="checkbox" id="c-40212858" checked=""/><div class="controls bullet"><span class="by">Karellen</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40212686">parent</a><span>|</span><a href="#40213006">prev</a><span>|</span><a href="#40219040">next</a><span>|</span><label class="collapse" for="c-40212858">[-]</label><label class="expand" for="c-40212858">[11 more]</label></div><br/><div class="children"><div class="content">&gt; I also wasn&#x27;t a fan of the tinting.<p>From the linked mastodon thread:<p>&gt; For example, by default it will tint your terminal background in a reddish tone while you are operating with elevated privileges. That is supposed to act as a friendly reminder that you haven&#x27;t given up the privileges yet, and marks the output of all commands that ran with privileges appropriately. <i>(If you don&#x27;t like this, you can easily turn it off via the --background= switch)</i>.<p>(emphasis mine)</div><br/><div id="40215796" class="c"><input type="checkbox" id="c-40215796" checked=""/><div class="controls bullet"><span class="by">zamadatix</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40212858">parent</a><span>|</span><a href="#40217102">next</a><span>|</span><label class="collapse" for="c-40215796">[-]</label><label class="expand" for="c-40215796">[4 more]</label></div><br/><div class="children"><div class="content">I think it&#x27;s more that the default seems backwards than the lack of ability to change it.</div><br/><div id="40216064" class="c"><input type="checkbox" id="c-40216064" checked=""/><div class="controls bullet"><span class="by">dsr_</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40215796">parent</a><span>|</span><a href="#40217102">next</a><span>|</span><label class="collapse" for="c-40216064">[-]</label><label class="expand" for="c-40216064">[3 more]</label></div><br/><div class="children"><div class="content">It&#x27;s three things:<p>* here is a feature which we are defaulting to on<p>* there&#x27;s no persistent config for it<p>* we know better than you do about your preferences</div><br/><div id="40216974" class="c"><input type="checkbox" id="c-40216974" checked=""/><div class="controls bullet"><span class="by">zamadatix</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40216064">parent</a><span>|</span><a href="#40217102">next</a><span>|</span><label class="collapse" for="c-40216974">[-]</label><label class="expand" for="c-40216974">[2 more]</label></div><br/><div class="children"><div class="content">&quot;Defaulting to on&quot; is just a symlink to an existing binary so that&#x27;s not really much a problem.</div><br/><div id="40218213" class="c"><input type="checkbox" id="c-40218213" checked=""/><div class="controls bullet"><span class="by">gpm</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40216974">parent</a><span>|</span><a href="#40217102">next</a><span>|</span><label class="collapse" for="c-40218213">[-]</label><label class="expand" for="c-40218213">[1 more]</label></div><br/><div class="children"><div class="content">A symlink to a binary that I&#x27;m going to pass a password to seems like a security bug waiting to happen (just in the manner that any complexity around privilege escalation is a bad idea).</div><br/></div></div></div></div></div></div></div></div><div id="40217102" class="c"><input type="checkbox" id="c-40217102" checked=""/><div class="controls bullet"><span class="by">deadbunny</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40212858">parent</a><span>|</span><a href="#40215796">prev</a><span>|</span><a href="#40215782">next</a><span>|</span><label class="collapse" for="c-40217102">[-]</label><label class="expand" for="c-40217102">[2 more]</label></div><br/><div class="children"><div class="content">I for one love to type out 13 extra characters to a 4 character command to disable dumb choices by the developer.<p>On a more serious note, I wonder what random ASCII escape sequences we can send.</div><br/><div id="40219371" class="c"><input type="checkbox" id="c-40219371" checked=""/><div class="controls bullet"><span class="by">BenjiWiebe</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40217102">parent</a><span>|</span><a href="#40215782">next</a><span>|</span><label class="collapse" for="c-40219371">[-]</label><label class="expand" for="c-40219371">[1 more]</label></div><br/><div class="children"><div class="content">&#x27;alias&#x27; is your friend.</div><br/></div></div></div></div><div id="40215782" class="c"><input type="checkbox" id="c-40215782" checked=""/><div class="controls bullet"><span class="by">gh02t</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40212858">parent</a><span>|</span><a href="#40217102">prev</a><span>|</span><a href="#40219040">next</a><span>|</span><label class="collapse" for="c-40215782">[-]</label><label class="expand" for="c-40215782">[4 more]</label></div><br/><div class="children"><div class="content">It was a bit unclear to me from the thread, is there a persistent configuration option for this? I like the idea of tinting the terminal, but I also want to be able to turn it off with a global config option rather than having to type out a --background flag every invocation.</div><br/><div id="40215811" class="c"><input type="checkbox" id="c-40215811" checked=""/><div class="controls bullet"><span class="by">zamadatix</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40215782">parent</a><span>|</span><a href="#40219040">next</a><span>|</span><label class="collapse" for="c-40215811">[-]</label><label class="expand" for="c-40215811">[3 more]</label></div><br/><div class="children"><div class="content">Aliasing the command as the command + your default arguments is the easiest general solution to this kind of problem. I&#x27;m not sure if there is a &quot;systemd way&quot; to permanently set it though.</div><br/><div id="40217458" class="c"><input type="checkbox" id="c-40217458" checked=""/><div class="controls bullet"><span class="by">tolciho</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40215811">parent</a><span>|</span><a href="#40216003">next</a><span>|</span><label class="collapse" for="c-40217458">[-]</label><label class="expand" for="c-40217458">[1 more]</label></div><br/><div class="children"><div class="content">I accidentally compile color support out of st, or set xterm*colorMode:false to avoid seeing the backside of a unicorn randomly rubbed all over the terminal, on account of git and other wares being bad at their inability to not spew color codes. A sensible default would be to set no colors, in the event that the colors are unreadable (due to colorblindness, etc) or distracting, but that ship sailed. Most of my vim config on RedHat linux was disabling wacky vendorisms, and back when I used linux I did have a &quot;special terminal&quot; for some NVIDIA installer that mandated colors to be usable. Maybe the terminal title was set to Fisher-Price, maybe not.</div><br/></div></div><div id="40216003" class="c"><input type="checkbox" id="c-40216003" checked=""/><div class="controls bullet"><span class="by">gh02t</span><span>|</span><a href="#40212557">root</a><span>|</span><a href="#40215811">parent</a><span>|</span><a href="#40217458">prev</a><span>|</span><a href="#40219040">next</a><span>|</span><label class="collapse" for="c-40216003">[-]</label><label class="expand" for="c-40216003">[1 more]</label></div><br/><div class="children"><div class="content">True, I was thinking a simple environment variable or systemd configurable would be fine but I guess an alias is a good idea.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="40219040" class="c"><input type="checkbox" id="c-40219040" checked=""/><div class="controls bullet"><span class="by">whalesalad</span><span>|</span><a href="#40212557">parent</a><span>|</span><a href="#40212686">prev</a><span>|</span><a href="#40215962">next</a><span>|</span><label class="collapse" for="c-40219040">[-]</label><label class="expand" for="c-40219040">[1 more]</label></div><br/><div class="children"><div class="content">This is a thing in certain environments. I don’t mind it.</div><br/></div></div></div></div><div id="40215962" class="c"><input type="checkbox" id="c-40215962" checked=""/><div class="controls bullet"><span class="by">gnufx</span><span>|</span><a href="#40212557">prev</a><span>|</span><a href="#40209479">next</a><span>|</span><label class="collapse" for="c-40215962">[-]</label><label class="expand" for="c-40215962">[3 more]</label></div><br/><div class="children"><div class="content">In fact, if factotum were implemented on Unix along with an analogue to the Plan 9 capability device, venerable programs like su and login would no longer need to be installed ‘‘setuid root.’’ — <a href="https:&#x2F;&#x2F;plan9.io&#x2F;sys&#x2F;doc&#x2F;auth.html" rel="nofollow">https:&#x2F;&#x2F;plan9.io&#x2F;sys&#x2F;doc&#x2F;auth.html</a></div><br/><div id="40220059" class="c"><input type="checkbox" id="c-40220059" checked=""/><div class="controls bullet"><span class="by">opless</span><span>|</span><a href="#40215962">parent</a><span>|</span><a href="#40209479">next</a><span>|</span><label class="collapse" for="c-40220059">[-]</label><label class="expand" for="c-40220059">[2 more]</label></div><br/><div class="children"><div class="content">Plan9port has factotum.<p>Plan9 has a completely different security model.<p>The Hostowner (usually Glenda) is essentially &quot;root&quot; and you&#x27;re at the mercy of the filesystem regarding file privileges etc.<p>AFAIK there is no way to &quot;become&quot; glenda.</div><br/><div id="40220096" class="c"><input type="checkbox" id="c-40220096" checked=""/><div class="controls bullet"><span class="by">opless</span><span>|</span><a href="#40215962">root</a><span>|</span><a href="#40220059">parent</a><span>|</span><a href="#40209479">next</a><span>|</span><label class="collapse" for="c-40220096">[-]</label><label class="expand" for="c-40220096">[1 more]</label></div><br/><div class="children"><div class="content">In fact, according to sys&#x2F;src&#x2F;cmd&#x2F;auth&#x2F;login.c it looks like once you&#x27;ve logged it, you can shut the door using the capability device so then it&#x27;s game over, no more hostowner for you</div><br/></div></div></div></div></div></div><div id="40209479" class="c"><input type="checkbox" id="c-40209479" checked=""/><div class="controls bullet"><span class="by">ezoe</span><span>|</span><a href="#40215962">prev</a><span>|</span><a href="#40212733">next</a><span>|</span><label class="collapse" for="c-40209479">[-]</label><label class="expand" for="c-40209479">[10 more]</label></div><br/><div class="children"><div class="content">I wonder what other existing programs Will Systemd attempt to replace in the future.<p>My bet is &#x2F;bin&#x2F;sh, maybe they went further to replace the entire POSIX utilities.</div><br/><div id="40216531" class="c"><input type="checkbox" id="c-40216531" checked=""/><div class="controls bullet"><span class="by">quectophoton</span><span>|</span><a href="#40209479">parent</a><span>|</span><a href="#40217813">next</a><span>|</span><label class="collapse" for="c-40216531">[-]</label><label class="expand" for="c-40216531">[4 more]</label></div><br/><div class="children"><div class="content">filesystemd, replacing ext4&#x2F;btrfs&#x2F;etc.<p>It will come with `filectl` for all your file operations, so you will no longer need `cd`, `pwd`, `touch`, `rm`, `mkdir`, `cat`, `grep`, `find`, etc. Instead you do everything through `filectl` commands.<p>This will deprecate many commands from GNU coreutils, which is a good thing because replacing things is always good.<p>Then, since programs are just files, and filesystem will be part of systemd, any program you want to use will obviously have to go through systemd as well, meaning they will need to be a service unit of type `oneshot`, because this way we keep everything well integrated together.<p>Don&#x27;t worry tho, you only write the unit files once and they work forever. The only thing you need to remember is that, instead of `cargo build` you&#x27;ll need to use `filectl exec -u cargo build` (`filectl exec -u` is only 3 words, so you don&#x27;t have the right to ever complain about this tiny little change).<p>Anyone who doesn&#x27;t like these changes is stuck in the past.</div><br/><div id="40217706" class="c"><input type="checkbox" id="c-40217706" checked=""/><div class="controls bullet"><span class="by">imiric</span><span>|</span><a href="#40209479">root</a><span>|</span><a href="#40216531">parent</a><span>|</span><a href="#40217214">next</a><span>|</span><label class="collapse" for="c-40217706">[-]</label><label class="expand" for="c-40217706">[1 more]</label></div><br/><div class="children"><div class="content">&gt; The only thing you need to remember is that, instead of `cargo build` you&#x27;ll need to use `filectl exec -u cargo build`<p>No, you forgot about `buildctl` which compiles any language into systemd bytecode, that runs on the systemd VM. At long last, write once, run anywhere!</div><br/></div></div><div id="40217214" class="c"><input type="checkbox" id="c-40217214" checked=""/><div class="controls bullet"><span class="by">foresto</span><span>|</span><a href="#40209479">root</a><span>|</span><a href="#40216531">parent</a><span>|</span><a href="#40217706">prev</a><span>|</span><a href="#40219515">next</a><span>|</span><label class="collapse" for="c-40217214">[-]</label><label class="expand" for="c-40217214">[1 more]</label></div><br/><div class="children"><div class="content">&gt; instead of `cargo build` you&#x27;ll need to use `filectl exec -u cargo build`<p>You joke, but I already have to do this with lxc commands, and the systemd-compatible version of those commands is even longer than you imagined. See my other comment for details.</div><br/></div></div><div id="40219515" class="c"><input type="checkbox" id="c-40219515" checked=""/><div class="controls bullet"><span class="by">jimbobthrowawy</span><span>|</span><a href="#40209479">root</a><span>|</span><a href="#40216531">parent</a><span>|</span><a href="#40217214">prev</a><span>|</span><a href="#40217813">next</a><span>|</span><label class="collapse" for="c-40219515">[-]</label><label class="expand" for="c-40219515">[1 more]</label></div><br/><div class="children"><div class="content">busyboxd?</div><br/></div></div></div></div><div id="40217813" class="c"><input type="checkbox" id="c-40217813" checked=""/><div class="controls bullet"><span class="by">samgranieri</span><span>|</span><a href="#40209479">parent</a><span>|</span><a href="#40216531">prev</a><span>|</span><a href="#40214884">next</a><span>|</span><label class="collapse" for="c-40217813">[-]</label><label class="expand" for="c-40217813">[1 more]</label></div><br/><div class="children"><div class="content">Let’s call it GNU&#x2F;systemd&#x2F;linux</div><br/></div></div><div id="40214884" class="c"><input type="checkbox" id="c-40214884" checked=""/><div class="controls bullet"><span class="by">anthk</span><span>|</span><a href="#40209479">parent</a><span>|</span><a href="#40217813">prev</a><span>|</span><a href="#40212733">next</a><span>|</span><label class="collapse" for="c-40214884">[-]</label><label class="expand" for="c-40214884">[4 more]</label></div><br/><div class="children"><div class="content">Guix will reimplement POSIX utils and extras with tools written in Gule.</div><br/><div id="40216257" class="c"><input type="checkbox" id="c-40216257" checked=""/><div class="controls bullet"><span class="by">smegger001</span><span>|</span><a href="#40209479">root</a><span>|</span><a href="#40214884">parent</a><span>|</span><a href="#40212733">next</a><span>|</span><label class="collapse" for="c-40216257">[-]</label><label class="expand" for="c-40216257">[3 more]</label></div><br/><div class="children"><div class="content">Please say this is a joke</div><br/><div id="40217198" class="c"><input type="checkbox" id="c-40217198" checked=""/><div class="controls bullet"><span class="by">anthk</span><span>|</span><a href="#40209479">root</a><span>|</span><a href="#40216257">parent</a><span>|</span><a href="#40212733">next</a><span>|</span><label class="collapse" for="c-40217198">[-]</label><label class="expand" for="c-40217198">[2 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;nlnet.nl&#x2F;project&#x2F;Gash&#x2F;" rel="nofollow">https:&#x2F;&#x2F;nlnet.nl&#x2F;project&#x2F;Gash&#x2F;</a><p>It wouldn&#x27;t be a bad idea. Also, Guile&#x27;s JIT could be interesting there.<p>Also, a shell with a live REPL instead of <i>failing</i> on errors can be pretty interesting.</div><br/><div id="40219845" class="c"><input type="checkbox" id="c-40219845" checked=""/><div class="controls bullet"><span class="by">zarzavat</span><span>|</span><a href="#40209479">root</a><span>|</span><a href="#40217198">parent</a><span>|</span><a href="#40212733">next</a><span>|</span><label class="collapse" for="c-40219845">[-]</label><label class="expand" for="c-40219845">[1 more]</label></div><br/><div class="children"><div class="content">“gash” oh my, what a name. Do you think they know?</div><br/></div></div></div></div></div></div></div></div></div></div><div id="40212733" class="c"><input type="checkbox" id="c-40212733" checked=""/><div class="controls bullet"><span class="by">segasaturn</span><span>|</span><a href="#40209479">prev</a><span>|</span><a href="#40208219">next</a><span>|</span><label class="collapse" for="c-40212733">[-]</label><label class="expand" for="c-40212733">[3 more]</label></div><br/><div class="children"><div class="content">I asked this in a thread about this from last night and didn&#x27;t get a reply. For context, the way &quot;run0&quot; works is to apparently send a signal to polkit that requests a command under the root user&#x27;s ID and permissions, thereby getting a privileged shell without SUID:<p>&gt; How hard would it be to create a program to send a signal to polkit &quot;impersonating&quot; run0 and obtain a root shell without entering a password?<p>Anybody know how this is being authenticated?</div><br/><div id="40212982" class="c"><input type="checkbox" id="c-40212982" checked=""/><div class="controls bullet"><span class="by">ongy</span><span>|</span><a href="#40212733">parent</a><span>|</span><a href="#40214434">next</a><span>|</span><label class="collapse" for="c-40212982">[-]</label><label class="expand" for="c-40212982">[1 more]</label></div><br/><div class="children"><div class="content">Without looking at the he specific implementation<p>There should be a service running as uid=0 that exposes an unprivileged API.<p>This service then takes the RPC and does authorization with polkit.<p>I.e. the unprivileged part doesn&#x27;t talk to polkit directly. But a privileged part uses polkit instead of a custom sudoers style config.</div><br/></div></div><div id="40214434" class="c"><input type="checkbox" id="c-40214434" checked=""/><div class="controls bullet"><span class="by">thayne</span><span>|</span><a href="#40212733">parent</a><span>|</span><a href="#40212982">prev</a><span>|</span><a href="#40208219">next</a><span>|</span><label class="collapse" for="c-40214434">[-]</label><label class="expand" for="c-40214434">[1 more]</label></div><br/><div class="children"><div class="content">I would assume the authentication happens in polkit, so a fake client would only be able to run a command if it had the necessary credentials.</div><br/></div></div></div></div><div id="40208219" class="c"><input type="checkbox" id="c-40208219" checked=""/><div class="controls bullet"><span class="by">kbar13</span><span>|</span><a href="#40212733">prev</a><span>|</span><a href="#40219914">next</a><span>|</span><label class="collapse" for="c-40208219">[-]</label><label class="expand" for="c-40208219">[139 more]</label></div><br/><div class="children"><div class="content">systemd has been a net positive for the linux ecosystem. remember when you had to write bash scripts to start, stop, restart services and handle any other signals you want to send it? nowadays it&#x27;s a unit file (basically just an ini file) away with relatively straightforward API. and you can actually declare startup dependencies and other useful relationships past just &quot;prepend a number signifying when it should run globally to the front of the filename&quot;. it&#x27;s provided an extensible platform with which higher level orchestration frameworks like ansible &#x2F; ignition can easily templatize services or other system configuration.<p>since the beginning of systemd people have moaned about how complex it is and how we&#x27;re reinventing the wheel. yet time and time again the people actually working on the project show that the solution they&#x27;ve come up with is the result of the problem they&#x27;re facing on a daily basis. it&#x27;s quite annoying that the armchair linux experts complain about how &quot;lol systemd is so stupid for reinventing the wheel, give me my shell scripts back&quot;, maybe think about whether or not you have a legitimate issue not being addressed by the solution proposed or if you are just getting rage baited by a headline.</div><br/><div id="40214923" class="c"><input type="checkbox" id="c-40214923" checked=""/><div class="controls bullet"><span class="by">agilob</span><span>|</span><a href="#40208219">parent</a><span>|</span><a href="#40208374">next</a><span>|</span><label class="collapse" for="c-40214923">[-]</label><label class="expand" for="c-40214923">[64 more]</label></div><br/><div class="children"><div class="content">&gt; remember when you had to write bash scripts to start, stop, restart services<p>This was a really big pain, yes, but I also remember how I could `tail -f *.logs`. I remember how I didn&#x27;t need to remember about `--no-pager` and `--follow`. I knew where the files were, what they were called. I remember how I didn&#x27;t have to google how to find logs between 10 days ago and 4 days ago, because the logs would be in a .tar created by logrotate with a date in the filename.<p>The init system was probably peak of systemd, after that they started reinveting things in a more complicated way. Do we really need journald, systemd-boot, machinectl, systemd-networkd, sd-bus, systemd-resolved, systemd-nspawn? Do people actually use it all? Are there any metrics to show how many systems have it installed and in use?</div><br/><div id="40215154" class="c"><input type="checkbox" id="c-40215154" checked=""/><div class="controls bullet"><span class="by">lolinder</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40214923">parent</a><span>|</span><a href="#40216893">next</a><span>|</span><label class="collapse" for="c-40215154">[-]</label><label class="expand" for="c-40215154">[29 more]</label></div><br/><div class="children"><div class="content">&gt; I could `tail -f *.logs`. I remember how I didn&#x27;t need to remember about `--no-pager` and `--follow`.<p>journalctl supports -f, which by your own account you were already using for tail, so I&#x27;m not clear what&#x27;s worse there.<p>&gt; I remember how I didn&#x27;t have to google how to find logs between 10 days ago and 4 days ago, because the logs would be in a .tar created by logrotate with a date in the filename.<p>My memory of this time was that every single application had its own unique method of handling logs and its own unique location for storing them. So sure, once you found the logs you didn&#x27;t have to Google how to find the relevant dates <i>if</i> the application is using logrotate as you describe, but finding the logs in the first place was always a challenge. Systemd is nice in that it provides a single place where all logs go and a single interface for navigating them.</div><br/><div id="40215749" class="c"><input type="checkbox" id="c-40215749" checked=""/><div class="controls bullet"><span class="by">cogman10</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215154">parent</a><span>|</span><a href="#40216818">next</a><span>|</span><label class="collapse" for="c-40215749">[-]</label><label class="expand" for="c-40215749">[12 more]</label></div><br/><div class="children"><div class="content">I think my biggest gripe with journalctl is (and this may just be because I&#x27;m novice at using it) that discovering what sort of logs are on the system feels a lot more complex.<p>With regular logs, I can go to &#x2F;var&#x2F;log, ls the dir, and get a nice list of what&#x27;s being logged.  There will be, for example, an `apache.log` file that has all the logs relevant to apache.</div><br/><div id="40215866" class="c"><input type="checkbox" id="c-40215866" checked=""/><div class="controls bullet"><span class="by">tapoxi</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215749">parent</a><span>|</span><a href="#40216818">next</a><span>|</span><label class="collapse" for="c-40215866">[-]</label><label class="expand" for="c-40215866">[11 more]</label></div><br/><div class="children"><div class="content">It&#x27;s just journalctl -u apache -f, assuming your distribution calls the unit file &quot;apache&quot;, and the last few messages of the logfile appear with systemctl status apache<p>And you don&#x27;t need to worry about &quot;is this service rotating logs appropriately?&quot;</div><br/><div id="40215915" class="c"><input type="checkbox" id="c-40215915" checked=""/><div class="controls bullet"><span class="by">cogman10</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215866">parent</a><span>|</span><a href="#40216818">next</a><span>|</span><label class="collapse" for="c-40215915">[-]</label><label class="expand" for="c-40215915">[10 more]</label></div><br/><div class="children"><div class="content">The important thing for me at least isn&#x27;t he `-u apache` but rather knowing that `apache` exists as one of the installed services on this box.<p>In the old ways, that was apparent because of the presence of the log file.<p>Granted, this isn&#x27;t the problem it used to be for us, however, it would come up because we&#x27;d have our services named things like `foo-ws` and knowing that `foo-ws` existed on a given box might be tricky were it not for the log files.</div><br/><div id="40216154" class="c"><input type="checkbox" id="c-40216154" checked=""/><div class="controls bullet"><span class="by">tadfisher</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215915">parent</a><span>|</span><a href="#40215947">next</a><span>|</span><label class="collapse" for="c-40216154">[-]</label><label class="expand" for="c-40216154">[4 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>    journalctl -f -u &lt;TAB&gt;
</code></pre>
Shows you all installed units if you have working shell completion, or &#x27;a&lt;TAB&gt;&#x27; gets you all units starting with &#x27;a&#x27;, etc.</div><br/><div id="40217538" class="c"><input type="checkbox" id="c-40217538" checked=""/><div class="controls bullet"><span class="by">amaterasu</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40216154">parent</a><span>|</span><a href="#40215947">next</a><span>|</span><label class="collapse" for="c-40217538">[-]</label><label class="expand" for="c-40217538">[3 more]</label></div><br/><div class="children"><div class="content">In which shell?</div><br/><div id="40218228" class="c"><input type="checkbox" id="c-40218228" checked=""/><div class="controls bullet"><span class="by">alright2565</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40217538">parent</a><span>|</span><a href="#40217978">next</a><span>|</span><label class="collapse" for="c-40218228">[-]</label><label class="expand" for="c-40218228">[1 more]</label></div><br/><div class="children"><div class="content">bash &amp; zsh are supported by upstream: <a href="https:&#x2F;&#x2F;github.com&#x2F;systemd&#x2F;systemd&#x2F;tree&#x2F;main&#x2F;shell-completion">https:&#x2F;&#x2F;github.com&#x2F;systemd&#x2F;systemd&#x2F;tree&#x2F;main&#x2F;shell-completio...</a></div><br/></div></div><div id="40217978" class="c"><input type="checkbox" id="c-40217978" checked=""/><div class="controls bullet"><span class="by">ac29</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40217538">parent</a><span>|</span><a href="#40218228">prev</a><span>|</span><a href="#40215947">next</a><span>|</span><label class="collapse" for="c-40217978">[-]</label><label class="expand" for="c-40217978">[1 more]</label></div><br/><div class="children"><div class="content">Works in fish, I&#x27;ll have to remember that one</div><br/></div></div></div></div></div></div><div id="40215947" class="c"><input type="checkbox" id="c-40215947" checked=""/><div class="controls bullet"><span class="by">tapoxi</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215915">parent</a><span>|</span><a href="#40216154">prev</a><span>|</span><a href="#40219917">next</a><span>|</span><label class="collapse" for="c-40215947">[-]</label><label class="expand" for="c-40215947">[2 more]</label></div><br/><div class="children"><div class="content">I mean &quot;systemctl status&quot; shows all services and their hierarchy, there&#x27;s also &quot;systemctl list-unit-files&quot; if you want to see things that aren&#x27;t part of the current target (runlevel).<p>It&#x27;s much easier in the systemd world to see the state of the system, the state of the service, and the logs of a service because it enforces this consistency.</div><br/><div id="40216009" class="c"><input type="checkbox" id="c-40216009" checked=""/><div class="controls bullet"><span class="by">cogman10</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215947">parent</a><span>|</span><a href="#40219917">next</a><span>|</span><label class="collapse" for="c-40216009">[-]</label><label class="expand" for="c-40216009">[1 more]</label></div><br/><div class="children"><div class="content">Ah, good to know.  I figured it might be the case that I just needed to RTFM.</div><br/></div></div></div></div><div id="40219917" class="c"><input type="checkbox" id="c-40219917" checked=""/><div class="controls bullet"><span class="by">pcthrowaway</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215915">parent</a><span>|</span><a href="#40215947">prev</a><span>|</span><a href="#40216539">next</a><span>|</span><label class="collapse" for="c-40219917">[-]</label><label class="expand" for="c-40219917">[1 more]</label></div><br/><div class="children"><div class="content">`systemctl list-unit-files` is too difficult?</div><br/></div></div><div id="40216539" class="c"><input type="checkbox" id="c-40216539" checked=""/><div class="controls bullet"><span class="by">kbar13</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215915">parent</a><span>|</span><a href="#40219917">prev</a><span>|</span><a href="#40216818">next</a><span>|</span><label class="collapse" for="c-40216539">[-]</label><label class="expand" for="c-40216539">[2 more]</label></div><br/><div class="children"><div class="content">honestly that&#x27;s such a niche problem to have that i dont think it&#x27;s worth throwing the baby out with the bathwater. anyways you shouldn&#x27;t be discovering installed services by logfile presence, it should be something like querying your package manager.</div><br/><div id="40219622" class="c"><input type="checkbox" id="c-40219622" checked=""/><div class="controls bullet"><span class="by">rixed</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40216539">parent</a><span>|</span><a href="#40216818">next</a><span>|</span><label class="collapse" for="c-40219622">[-]</label><label class="expand" for="c-40219622">[1 more]</label></div><br/><div class="children"><div class="content">I wouldn&#x27;t say it&#x27;s a niche problem. I also miss being able to go to &#x2F;var&#x2F;log and see instantly what&#x27;s going on.<p>There should be a command like &quot;journalctl --top&quot; that would list all logging services with amount of logs, oldest and latest log times, and last few lines of each, to improve that experience. Maybe there is already a way to do something similar?</div><br/></div></div></div></div></div></div></div></div></div></div><div id="40216818" class="c"><input type="checkbox" id="c-40216818" checked=""/><div class="controls bullet"><span class="by">citrin_ru</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215154">parent</a><span>|</span><a href="#40215749">prev</a><span>|</span><a href="#40216628">next</a><span>|</span><label class="collapse" for="c-40216818">[-]</label><label class="expand" for="c-40216818">[2 more]</label></div><br/><div class="children"><div class="content">&#x27;journalctl -u service -f&#x27; takes many seconds to start showing logs (even with 4GB journal size limit which not that much). &#x27;tail -f &#x2F;var&#x2F;log&#x2F;service&#x27; works without a noticeable delay (be it 1kb or 100Gb log file). For me it&#x27;s a huge regression.</div><br/><div id="40216992" class="c"><input type="checkbox" id="c-40216992" checked=""/><div class="controls bullet"><span class="by">rezonant</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40216818">parent</a><span>|</span><a href="#40216628">next</a><span>|</span><label class="collapse" for="c-40216992">[-]</label><label class="expand" for="c-40216992">[1 more]</label></div><br/><div class="children"><div class="content">While I&#x27;m very pro journalctl, this is very true. They should put some work into the initial read performance on big journals.</div><br/></div></div></div></div><div id="40216628" class="c"><input type="checkbox" id="c-40216628" checked=""/><div class="controls bullet"><span class="by">cduzz</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215154">parent</a><span>|</span><a href="#40216818">prev</a><span>|</span><a href="#40218944">next</a><span>|</span><label class="collapse" for="c-40216628">[-]</label><label class="expand" for="c-40216628">[6 more]</label></div><br/><div class="children"><div class="content">I appreciate that someone&#x27;s invented shoes you inflate and snap.  I can see some advantages.<p>That said, when I&#x27;m in a hurry and going to do a thing that I&#x27;ve been doing every day of my life, I&#x27;m really not a big fan of having to stop what I&#x27;m doing and reexamine a tool I&#x27;ve used all my life to figure out how to use it.  I learned this stuff decades ago and I&#x27;m not anxious to relearn how to do it for a fractional improvement, and I&#x27;m not even really 100% sure that this new &quot;inflate and snap&quot; shoe model is actually an improvement, except for very specific use cases.</div><br/><div id="40216961" class="c"><input type="checkbox" id="c-40216961" checked=""/><div class="controls bullet"><span class="by">acdha</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40216628">parent</a><span>|</span><a href="#40218944">next</a><span>|</span><label class="collapse" for="c-40216961">[-]</label><label class="expand" for="c-40216961">[5 more]</label></div><br/><div class="children"><div class="content">Don’t think of it as relearning a tool, think of it as learning one tool which works for everything. You no longer have to implement your own log rotation, compression, etc. or work out which configuration each program needs to do that in the manner you expect – for example, “is it safe to rotate a log file?” requires you to know implementation details on each program.</div><br/><div id="40219219" class="c"><input type="checkbox" id="c-40219219" checked=""/><div class="controls bullet"><span class="by">llm_trw</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40216961">parent</a><span>|</span><a href="#40218944">next</a><span>|</span><label class="collapse" for="c-40219219">[-]</label><label class="expand" for="c-40219219">[4 more]</label></div><br/><div class="children"><div class="content">&gt;think of it as learning one tool which works for everything.<p>For how long?<p>I&#x27;ve been around for decades at this point with people telling me how the newest and greatest thing will obsolete everything that came before it.<p>The best way to look through logs is still to materialize them in as text in a files hierarchy and use find with grep to look for issues.</div><br/><div id="40220025" class="c"><input type="checkbox" id="c-40220025" checked=""/><div class="controls bullet"><span class="by">olddustytrail</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40219219">parent</a><span>|</span><a href="#40218944">next</a><span>|</span><label class="collapse" for="c-40220025">[-]</label><label class="expand" for="c-40220025">[3 more]</label></div><br/><div class="children"><div class="content">&gt; For how long?<p>Debian switched to systemd about 12 years ago, so at least that long.</div><br/><div id="40220627" class="c"><input type="checkbox" id="c-40220627" checked=""/><div class="controls bullet"><span class="by">cduzz</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40220025">parent</a><span>|</span><a href="#40220229">next</a><span>|</span><label class="collapse" for="c-40220627">[-]</label><label class="expand" for="c-40220627">[1 more]</label></div><br/><div class="children"><div class="content">A quick google indicates that it was made default in debian 8 in 2015, which is 9 years ago, not 12.<p>Perhaps it was available prior to then, but so were daemontools, upstart, and probably a variety of other alternatives.</div><br/></div></div><div id="40220229" class="c"><input type="checkbox" id="c-40220229" checked=""/><div class="controls bullet"><span class="by">llm_trw</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40220025">parent</a><span>|</span><a href="#40220627">prev</a><span>|</span><a href="#40218944">next</a><span>|</span><label class="collapse" for="c-40220229">[-]</label><label class="expand" for="c-40220229">[1 more]</label></div><br/><div class="children"><div class="content">Find came out in 1974.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="40218944" class="c"><input type="checkbox" id="c-40218944" checked=""/><div class="controls bullet"><span class="by">SoftTalker</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215154">parent</a><span>|</span><a href="#40216628">prev</a><span>|</span><a href="#40216689">next</a><span>|</span><label class="collapse" for="c-40218944">[-]</label><label class="expand" for="c-40218944">[1 more]</label></div><br/><div class="children"><div class="content">Not my memory at all. In almost all cases the logs were in &#x2F;var&#x2F;log and written by syslog. Unless the whole service was in a chroot directory, or the program was written by an amateur who didn&#x27;t follow logging conventions.</div><br/></div></div><div id="40216689" class="c"><input type="checkbox" id="c-40216689" checked=""/><div class="controls bullet"><span class="by">Asmod4n</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215154">parent</a><span>|</span><a href="#40218944">prev</a><span>|</span><a href="#40215510">next</a><span>|</span><label class="collapse" for="c-40216689">[-]</label><label class="expand" for="c-40216689">[1 more]</label></div><br/><div class="children"><div class="content">Oh the joy it is to have a corrupted log file which the program that wrote it refuses to even read.<p>Once you deal with that you’ll realize journald is just in the way and needs to be modified to output a human readable log by default.</div><br/></div></div><div id="40215510" class="c"><input type="checkbox" id="c-40215510" checked=""/><div class="controls bullet"><span class="by">saghm</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215154">parent</a><span>|</span><a href="#40216689">prev</a><span>|</span><a href="#40216893">next</a><span>|</span><label class="collapse" for="c-40215510">[-]</label><label class="expand" for="c-40215510">[6 more]</label></div><br/><div class="children"><div class="content">&gt; journalctl supports -f, which by your own account you were already using for tail, so I&#x27;m not clear what&#x27;s worse there<p>Yeah, this is a bit of an odd complaint. If I were this bothered by having to type those, I&#x27;d just make an alias to &quot;journalctl --follow --nopager&quot;` and would have forgotten about it years ago.</div><br/><div id="40215815" class="c"><input type="checkbox" id="c-40215815" checked=""/><div class="controls bullet"><span class="by">mdaniel</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215510">parent</a><span>|</span><a href="#40215734">next</a><span>|</span><label class="collapse" for="c-40215815">[-]</label><label class="expand" for="c-40215815">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I&#x27;d just make an alias to &quot;journalctl --follow --nopager&quot;` and would have forgotten about it years ago.<p>You sure would have forgotten about it when you tried to get onto another machine without the magic set of aliases<p>I am also prepared for someone to chime in that &quot;log egress tools exist&quot; to move up the Maslow&#x27;s Hierarchy of Log Needs</div><br/></div></div><div id="40215734" class="c"><input type="checkbox" id="c-40215734" checked=""/><div class="controls bullet"><span class="by">stoperaticless</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215510">parent</a><span>|</span><a href="#40215815">prev</a><span>|</span><a href="#40216893">next</a><span>|</span><label class="collapse" for="c-40215734">[-]</label><label class="expand" for="c-40215734">[4 more]</label></div><br/><div class="children"><div class="content">Never tried it, but if the complainer wrote: tail -f *.logs<p>Which involves glob’ing. I assume it allows to monitor several services at the same time.<p>Can systemd do that?</div><br/><div id="40215882" class="c"><input type="checkbox" id="c-40215882" checked=""/><div class="controls bullet"><span class="by">tapoxi</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215734">parent</a><span>|</span><a href="#40215992">next</a><span>|</span><label class="collapse" for="c-40215882">[-]</label><label class="expand" for="c-40215882">[2 more]</label></div><br/><div class="children"><div class="content">Yes, journalctl -u postgres -u redis -f etc</div><br/><div id="40216005" class="c"><input type="checkbox" id="c-40216005" checked=""/><div class="controls bullet"><span class="by">mintplant</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215882">parent</a><span>|</span><a href="#40215992">next</a><span>|</span><label class="collapse" for="c-40216005">[-]</label><label class="expand" for="c-40216005">[1 more]</label></div><br/><div class="children"><div class="content">Or just `journalctl -f` to follow all logs.</div><br/></div></div></div></div><div id="40215992" class="c"><input type="checkbox" id="c-40215992" checked=""/><div class="controls bullet"><span class="by">_flux</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215734">parent</a><span>|</span><a href="#40215882">prev</a><span>|</span><a href="#40216893">next</a><span>|</span><label class="collapse" for="c-40215992">[-]</label><label class="expand" for="c-40215992">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s the basic function what journalctl -f does by default: follow the global log all jobs write into. -u etc are for filtering that.</div><br/></div></div></div></div></div></div></div></div><div id="40216893" class="c"><input type="checkbox" id="c-40216893" checked=""/><div class="controls bullet"><span class="by">rezonant</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40214923">parent</a><span>|</span><a href="#40215154">prev</a><span>|</span><a href="#40218927">next</a><span>|</span><label class="collapse" for="c-40216893">[-]</label><label class="expand" for="c-40216893">[1 more]</label></div><br/><div class="children"><div class="content">&gt; This was a really big pain, yes, but I also remember how I could `tail -f *.logs`.<p>Others point out that journalctl supports `-f` and `-n` for determining how much journal to return, but for me what&#x27;s great about journalctl is that <i>I do not need to know</i> where the program is logging to, how it rotates logs (or how it doesn&#x27;t), or anything else. The program does not need special permissions to a log location in &#x2F;var&#x2F;log or &#x2F;usr&#x2F;var&#x2F;log or ~&#x2F;... or anything else, it just outputs using stdout and it gets captured. When I want to look at logs, I just use the same moniker that I use to control the service: its unit name. It is so incredibly nice- I do not want to go back to the bad old days of spelunking through &#x2F;var&#x2F;log and friends.<p>&gt; --no-pager<p>To be clear, if you pipe journalctl somewhere, it will automatically skip the pager and just work. `--no-pager` is most useful for when you want to print some unpiped content in an automated script to avoid having a non-existent user exit the pager.</div><br/></div></div><div id="40218927" class="c"><input type="checkbox" id="c-40218927" checked=""/><div class="controls bullet"><span class="by">SoftTalker</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40214923">parent</a><span>|</span><a href="#40216893">prev</a><span>|</span><a href="#40215089">next</a><span>|</span><label class="collapse" for="c-40218927">[-]</label><label class="expand" for="c-40218927">[1 more]</label></div><br/><div class="children"><div class="content">Those old init scripts were pretty boilerplate and not that hard to write. And in the case of OpenBSD (and maybe other BSDs?) the scripts for &#x2F;etc&#x2F;rc.d are usually just a few lines.<p>With the traditional init system I knew what was going on, and if I didn&#x27;t, find and grep were your friends. With systemd I&#x27;m googling everything every time. The systemctl man page is over 1,100 lines. OpenBSD&#x27;s rcctl man page is 119 lines.<p>I&#x27;m sure there are use cases for systemd but for running a server that provides a single or a handful of services, it seems like complete overkill.</div><br/></div></div><div id="40215089" class="c"><input type="checkbox" id="c-40215089" checked=""/><div class="controls bullet"><span class="by">hughesjj</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40214923">parent</a><span>|</span><a href="#40218927">prev</a><span>|</span><a href="#40216065">next</a><span>|</span><label class="collapse" for="c-40215089">[-]</label><label class="expand" for="c-40215089">[2 more]</label></div><br/><div class="children"><div class="content">My 2c, I definitely prefer systemd boot+networkd, fine with journald, don&#x27;t use the others enough to have an opinion.</div><br/><div id="40215416" class="c"><input type="checkbox" id="c-40215416" checked=""/><div class="controls bullet"><span class="by">iforgotpassword</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215089">parent</a><span>|</span><a href="#40216065">next</a><span>|</span><label class="collapse" for="c-40215416">[-]</label><label class="expand" for="c-40215416">[1 more]</label></div><br/><div class="children"><div class="content">Same. Init system is awesome, love .ini files, networkd is as simple as it can be, journald is fine. Love systemd-nspawn for simple containers as it feels more lightweight than docker. Especially for quick one-offs where I don&#x27;t need isolated networking you basically have chroot on steroids with &quot;systemd-nspawn -D &#x2F;path&#x2F;to&#x2F;fstree&quot;.</div><br/></div></div></div></div><div id="40216065" class="c"><input type="checkbox" id="c-40216065" checked=""/><div class="controls bullet"><span class="by">sunshowers</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40214923">parent</a><span>|</span><a href="#40215089">prev</a><span>|</span><a href="#40215742">next</a><span>|</span><label class="collapse" for="c-40216065">[-]</label><label class="expand" for="c-40216065">[4 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve recently become a fan of the `-x` flag to journalctl, which adds additional context to log entries and even suggests remediations at times. I&#x27;ve identified and fixed several issues on my Linux systems that way. Kind of hard to get that with tail -f!</div><br/><div id="40217427" class="c"><input type="checkbox" id="c-40217427" checked=""/><div class="controls bullet"><span class="by">aeonik</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40216065">parent</a><span>|</span><a href="#40217016">next</a><span>|</span><label class="collapse" for="c-40217427">[-]</label><label class="expand" for="c-40217427">[1 more]</label></div><br/><div class="children"><div class="content">How does it work? Can I pipe non-journald logs into the -x flag to take advantage of this lookup?</div><br/></div></div><div id="40217016" class="c"><input type="checkbox" id="c-40217016" checked=""/><div class="controls bullet"><span class="by">rezonant</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40216065">parent</a><span>|</span><a href="#40217427">prev</a><span>|</span><a href="#40217224">next</a><span>|</span><label class="collapse" for="c-40217016">[-]</label><label class="expand" for="c-40217016">[1 more]</label></div><br/><div class="children"><div class="content">Ooh nice. What are some examples of things it will catch?</div><br/></div></div><div id="40217224" class="c"><input type="checkbox" id="c-40217224" checked=""/><div class="controls bullet"><span class="by">dumpsterdiver</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40216065">parent</a><span>|</span><a href="#40217016">prev</a><span>|</span><a href="#40215742">next</a><span>|</span><label class="collapse" for="c-40217224">[-]</label><label class="expand" for="c-40217224">[1 more]</label></div><br/><div class="children"><div class="content">My goto is journalctl -xf. Best of both worlds :)</div><br/></div></div></div></div><div id="40215742" class="c"><input type="checkbox" id="c-40215742" checked=""/><div class="controls bullet"><span class="by">jordemort</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40214923">parent</a><span>|</span><a href="#40216065">prev</a><span>|</span><a href="#40217407">next</a><span>|</span><label class="collapse" for="c-40215742">[-]</label><label class="expand" for="c-40215742">[1 more]</label></div><br/><div class="children"><div class="content">systemd-nspawn is actually pretty great, and is mostly just a tool that exposes functionality that systemd already needs for other reasons. IIRC it was originally developed to aid in testing systemd itself, and was initially shipped as an unsupported extra in case other people found it useful.<p>systemd-resolved is the only way I&#x27;ve ever been able to get dockerd to play nice with Tailscale DNS; it&#x27;s also the best way that I&#x27;ve found to get a system to pick different upstream DNS servers depending on domain. The alternative is hand-rolling it with dnsmasq or something similar.<p>I admit I haven&#x27;t really seen a huge advantage to using systemd-networkd over NetworkManager yet, but for servers with relatively static network configurations, I greatly prefer systemd-networkd over any of the various implementations of ifupdown.</div><br/></div></div><div id="40217407" class="c"><input type="checkbox" id="c-40217407" checked=""/><div class="controls bullet"><span class="by">ranger207</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40214923">parent</a><span>|</span><a href="#40215742">prev</a><span>|</span><a href="#40215028">next</a><span>|</span><label class="collapse" for="c-40217407">[-]</label><label class="expand" for="c-40217407">[1 more]</label></div><br/><div class="children"><div class="content">I remember, and sometimes still have to deal with, programs that _didn&#x27;t_ dump their logs in &#x2F;var&#x2F;log, forcing me to figure out where the log are in the first place</div><br/></div></div><div id="40215028" class="c"><input type="checkbox" id="c-40215028" checked=""/><div class="controls bullet"><span class="by">superb_dev</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40214923">parent</a><span>|</span><a href="#40217407">prev</a><span>|</span><a href="#40208374">next</a><span>|</span><label class="collapse" for="c-40215028">[-]</label><label class="expand" for="c-40215028">[24 more]</label></div><br/><div class="children"><div class="content">The follow argument is identical to tail `-f`.
`sudo journalctl -f -u &lt;service name&gt;`</div><br/><div id="40215268" class="c"><input type="checkbox" id="c-40215268" checked=""/><div class="controls bullet"><span class="by">rangerelf</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215028">parent</a><span>|</span><a href="#40215896">next</a><span>|</span><label class="collapse" for="c-40215268">[-]</label><label class="expand" for="c-40215268">[22 more]</label></div><br/><div class="children"><div class="content">And what would be the equivalent to, &quot;Oh, I don´t  know the name of the log for this process I can see in &#x27;ps aux&#x27;, let me cd into &#x2F;var&#x2F;log and see what filenames I can find ... or grep everything until I can find a couple of words that make some sense so I can keep digging further&quot;?<p>The lack of explorability in journalctl, the &quot;need&quot; to keep everything locked behind their own flavor of tools and magic file types, is what makes the rest of us abhor them.</div><br/><div id="40216093" class="c"><input type="checkbox" id="c-40216093" checked=""/><div class="controls bullet"><span class="by">sunshowers</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215268">parent</a><span>|</span><a href="#40215825">next</a><span>|</span><label class="collapse" for="c-40216093">[-]</label><label class="expand" for="c-40216093">[1 more]</label></div><br/><div class="children"><div class="content">You do have to learn a few new things, yes. But it&#x27;s not too difficult. We all have to learn new things sometimes.<p>I spent around 15 minutes a few weeks ago learning how to do a few things with journalctl, and I came away from it with a great appreciation for its power.</div><br/></div></div><div id="40215825" class="c"><input type="checkbox" id="c-40215825" checked=""/><div class="controls bullet"><span class="by">ciupicri</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215268">parent</a><span>|</span><a href="#40216093">prev</a><span>|</span><a href="#40215724">next</a><span>|</span><label class="collapse" for="c-40215825">[-]</label><label class="expand" for="c-40215825">[10 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>    # journalctl -f _PID=${your_pid}  # option 1
    # systemctl status ${your_pid}    # option 2
</code></pre>
[1]: <a href="https:&#x2F;&#x2F;www.freedesktop.org&#x2F;software&#x2F;systemd&#x2F;man&#x2F;latest&#x2F;journalctl.html#Examples" rel="nofollow">https:&#x2F;&#x2F;www.freedesktop.org&#x2F;software&#x2F;systemd&#x2F;man&#x2F;latest&#x2F;jour...</a><p>[2]: <a href="https:&#x2F;&#x2F;www.freedesktop.org&#x2F;software&#x2F;systemd&#x2F;man&#x2F;latest&#x2F;systemctl.html#status%20PATTERN%E2%80%A6%7CPID%E2%80%A6%5D" rel="nofollow">https:&#x2F;&#x2F;www.freedesktop.org&#x2F;software&#x2F;systemd&#x2F;man&#x2F;latest&#x2F;syst...</a></div><br/><div id="40216104" class="c"><input type="checkbox" id="c-40216104" checked=""/><div class="controls bullet"><span class="by">Brian_K_White</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215825">parent</a><span>|</span><a href="#40215724">next</a><span>|</span><label class="collapse" for="c-40216104">[-]</label><label class="expand" for="c-40216104">[9 more]</label></div><br/><div class="children"><div class="content">These absolutely SUCK as answers to that question. They entirely miss the point. They provide a specific answer to a general problem.<p>The problem with systemnd is it assumes that it&#x27;s possible for all needs to be predicted and accounted for ahead of time. While &quot;look around at directories and files, and grep within them&quot; works <i>after the fact</i> without any special knowledge or tools. The person who wrote the log file did not need to know how someone will maybe try to access it 23 years later on a different OS. It&#x27;s just a regular file that can be read by anything over any kind of channel on any os. The person finding themselves needing to read the file does not need to have any particular command installed, or installable, or runnable. It does not require the happy path in order to work.<p>I have a joke I always say, often self-deprecating making fun of my own self for the way I do things sometimes, but also when I&#x27;m trying to commiserate with a customer so they don&#x27;t feel intimidated by &quot;the expert&quot; or &quot;the engineer&quot;: &quot;37 easy steps!&quot;<p>Every answer that starts with &quot;it&#x27;s simple, just journalctl ...&quot; is FUCKING 37 easy steps. The very name of the program itself is a trainwreck. journalctl... it takes me 18 seconds just to type it.<p>systemd is great for managing exquisitely washed masses of drone vms. It&#x27;s utter and complete shit for direct administration, operation, development, debugging, flexibility, or custom integrations.</div><br/><div id="40219141" class="c"><input type="checkbox" id="c-40219141" checked=""/><div class="controls bullet"><span class="by">superb_dev</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40216104">parent</a><span>|</span><a href="#40217591">next</a><span>|</span><label class="collapse" for="c-40219141">[-]</label><label class="expand" for="c-40219141">[1 more]</label></div><br/><div class="children"><div class="content">I didn’t answer the general question because I don’t care, I have no dog in this fight. Im just happy to provide information.<p>I like systemd and have found it extremely useful. If it doesn’t fill a need for you then use something else.</div><br/></div></div><div id="40217591" class="c"><input type="checkbox" id="c-40217591" checked=""/><div class="controls bullet"><span class="by">sgarland</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40216104">parent</a><span>|</span><a href="#40219141">prev</a><span>|</span><a href="#40216624">next</a><span>|</span><label class="collapse" for="c-40217591">[-]</label><label class="expand" for="c-40217591">[1 more]</label></div><br/><div class="children"><div class="content">Agreed. I’ve tried to get used to it on Debian 12 for personal VMs. I just can’t. I don’t care. grep and awk are always going to be available, and I know how to use them.</div><br/></div></div><div id="40216624" class="c"><input type="checkbox" id="c-40216624" checked=""/><div class="controls bullet"><span class="by">robertlagrant</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40216104">parent</a><span>|</span><a href="#40217591">prev</a><span>|</span><a href="#40215724">next</a><span>|</span><label class="collapse" for="c-40216624">[-]</label><label class="expand" for="c-40216624">[6 more]</label></div><br/><div class="children"><div class="content">&gt; These absolutely SUCK as answers to that question. They entirely miss the point. They provide a specific answer to a general problem.<p>No they don&#x27;t. They are good answers. If you want answers to a more general problem, then ask. This is not an emotive topic.</div><br/><div id="40216759" class="c"><input type="checkbox" id="c-40216759" checked=""/><div class="controls bullet"><span class="by">Brian_K_White</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40216624">parent</a><span>|</span><a href="#40215724">next</a><span>|</span><label class="collapse" for="c-40216759">[-]</label><label class="expand" for="c-40216759">[5 more]</label></div><br/><div class="children"><div class="content">They may be correct answers, in that they accomplish a task.<p>They suck in that the proposed method for accomplishing the task is a suck-ass downgrade from the previous ways the new way proposes to displace.<p>I beg to differ about emotive, because absolutely the other side of this fence behaves every bit as butt-hurt when challenged as I just did. You yourself just said these crappy commands were good, as a purely unfounded assertion. They are great because you just say they are great. That is even less objective than my rant. I at least explained what exactly I find so bad. Tell me more about not emotive.</div><br/><div id="40218443" class="c"><input type="checkbox" id="c-40218443" checked=""/><div class="controls bullet"><span class="by">sunshowers</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40216759">parent</a><span>|</span><a href="#40216862">next</a><span>|</span><label class="collapse" for="c-40218443">[-]</label><label class="expand" for="c-40218443">[1 more]</label></div><br/><div class="children"><div class="content">To be clear -- you can just dump out all the logs to text and then use your standard grep toolkit on them. You can also dump them out to <i>JSON</i>, and use jq on them -- something you can&#x27;t do with text logs on disk.<p>And as far as learning the options goes, learning the basics of systemd and journalctl is much easier than learning how to, say, use a source control system effectively.<p>(And it&#x27;s definitely worth trying out new source control systems -- for example, I think most people should at least check out Jujutsu, and many people are going to like it more than Git. As simple as Jujutsu is to use, learning it takes a lot longer than learning journalctl.)</div><br/></div></div><div id="40216862" class="c"><input type="checkbox" id="c-40216862" checked=""/><div class="controls bullet"><span class="by">robertlagrant</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40216759">parent</a><span>|</span><a href="#40218443">prev</a><span>|</span><a href="#40215724">next</a><span>|</span><label class="collapse" for="c-40216862">[-]</label><label class="expand" for="c-40216862">[3 more]</label></div><br/><div class="children"><div class="content">&gt; You yourself just said these crappy commands were good, as a purely unfounded assertion. They are great because you just say they are great. That is even less objective than my rant. I at least explained what exactly I find so bad. Tell me more about not emotive.<p>Very well: I didn&#x27;t say the commands were good or great. If you attempt a little objectivity you&#x27;ll see it.</div><br/><div id="40217125" class="c"><input type="checkbox" id="c-40217125" checked=""/><div class="controls bullet"><span class="by">Brian_K_White</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40216862">parent</a><span>|</span><a href="#40215724">next</a><span>|</span><label class="collapse" for="c-40217125">[-]</label><label class="expand" for="c-40217125">[2 more]</label></div><br/><div class="children"><div class="content">If you attempt a little objectivity, you will see that addressing the answers (vs the commands) was in my first response.<p>Before even going into the nature of the commands, I said that the answer does not match the question. The answers addressed details, while the details in the question were merely examples.<p>Missing the point is actually merely one of the at least two dimensions along which the answers suck. Thank you for reminding me about that.</div><br/><div id="40217435" class="c"><input type="checkbox" id="c-40217435" checked=""/><div class="controls bullet"><span class="by">robertlagrant</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40217125">parent</a><span>|</span><a href="#40215724">next</a><span>|</span><label class="collapse" for="c-40217435">[-]</label><label class="expand" for="c-40217435">[1 more]</label></div><br/><div class="children"><div class="content">&gt; The answers addressed details, while the details in the question were merely examples.<p>No, the answers addressed the two scenarios in the question. That&#x27;s why they don&#x27;t &quot;SUCK&quot;. They are good answers to the question as asked, and not the question as you dreamed it. If you spent ten words on asking the question of your dreams, rather than having a go at people for not answering it (whatever it is), you might have an answer.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="40215724" class="c"><input type="checkbox" id="c-40215724" checked=""/><div class="controls bullet"><span class="by">superb_dev</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215268">parent</a><span>|</span><a href="#40215825">prev</a><span>|</span><a href="#40215373">next</a><span>|</span><label class="collapse" for="c-40215724">[-]</label><label class="expand" for="c-40215724">[5 more]</label></div><br/><div class="children"><div class="content">Well `-u` refers to the unit file, so I would start with `sudo systemctl status` which lists the status of active unit files. I bet I could find the unit name I&#x27;m looking for there. If not, then `sudo systemctl list-units` should have it. (and you can grep the output of both)<p>Systemd and Journald are less opaque than I used to think. Even if you don&#x27;t want to learn the commands, all of its unit files (and the relationships between them) are available through the filesystem. Most of your unit files will be in `&#x2F;etc&#x2F;systemd&#x2F;system`, and the active relationships between units are expressed through soft links.</div><br/><div id="40217753" class="c"><input type="checkbox" id="c-40217753" checked=""/><div class="controls bullet"><span class="by">aeonik</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215724">parent</a><span>|</span><a href="#40218606">next</a><span>|</span><label class="collapse" for="c-40217753">[-]</label><label class="expand" for="c-40217753">[3 more]</label></div><br/><div class="children"><div class="content">How would you exclude certain units from your logs? Let&#x27;s say that Auditd is spamming your logs, and you just want to exclude those?<p>Can you filter on search? How do you prevent applications from writing to Systemd at all?</div><br/><div id="40219117" class="c"><input type="checkbox" id="c-40219117" checked=""/><div class="controls bullet"><span class="by">superb_dev</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40217753">parent</a><span>|</span><a href="#40218606">next</a><span>|</span><label class="collapse" for="c-40219117">[-]</label><label class="expand" for="c-40219117">[2 more]</label></div><br/><div class="children"><div class="content">I would start with `man systemd`, or maybe `journalctl —help`.<p>If you don’t want a service to log to systemd, then don’t run it in systemd?</div><br/><div id="40219957" class="c"><input type="checkbox" id="c-40219957" checked=""/><div class="controls bullet"><span class="by">pcthrowaway</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40219117">parent</a><span>|</span><a href="#40218606">next</a><span>|</span><label class="collapse" for="c-40219957">[-]</label><label class="expand" for="c-40219957">[1 more]</label></div><br/><div class="children"><div class="content">I think you can also configure the journal per unit right? Don&#x27;t remember how exactly, at the very least you can stream logs to a different system.<p>There are also services which will just use their own logging convention for some reason. Honestly it&#x27;s easier just to go with journalctl for everything you can.</div><br/></div></div></div></div></div></div><div id="40218606" class="c"><input type="checkbox" id="c-40218606" checked=""/><div class="controls bullet"><span class="by">ramses0</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215724">parent</a><span>|</span><a href="#40217753">prev</a><span>|</span><a href="#40215373">next</a><span>|</span><label class="collapse" for="c-40218606">[-]</label><label class="expand" for="c-40218606">[1 more]</label></div><br/><div class="children"><div class="content">systemctl does not have the Unix nature.</div><br/></div></div></div></div><div id="40215373" class="c"><input type="checkbox" id="c-40215373" checked=""/><div class="controls bullet"><span class="by">iforgotpassword</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215268">parent</a><span>|</span><a href="#40215724">prev</a><span>|</span><a href="#40217449">next</a><span>|</span><label class="collapse" for="c-40215373">[-]</label><label class="expand" for="c-40215373">[3 more]</label></div><br/><div class="children"><div class="content">Huh, isn&#x27;t grepping journalctl output pretty much the same? It even prefixes messages by the binary name.</div><br/><div id="40215828" class="c"><input type="checkbox" id="c-40215828" checked=""/><div class="controls bullet"><span class="by">mdaniel</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215373">parent</a><span>|</span><a href="#40217449">next</a><span>|</span><label class="collapse" for="c-40215828">[-]</label><label class="expand" for="c-40215828">[2 more]</label></div><br/><div class="children"><div class="content">Pedantically, they&#x27;re the <i>unit</i> name which only sometimes matches the <i>binary</i> name</div><br/><div id="40217066" class="c"><input type="checkbox" id="c-40217066" checked=""/><div class="controls bullet"><span class="by">rezonant</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215828">parent</a><span>|</span><a href="#40217449">next</a><span>|</span><label class="collapse" for="c-40217066">[-]</label><label class="expand" for="c-40217066">[1 more]</label></div><br/><div class="children"><div class="content">Actually no, they are prefixed by the binary name and the PID number. Technically they are prefixed with: `&lt;date&gt; &lt;host&gt; &lt;binary&gt;[&lt;pid&gt;]`.<p>You can then use `systemctl status &lt;pid&gt;` to identify the unit if you need to.<p>I would imagine this is configurable, and this might be the configuration chosen by my distribution (since I have not changed it myself). It would actually be nice to show the unit name instead of the binary&#x2F;PID combination, though not strictly necessary.<p>EDIT: Ooh, systemd 239 adds `journalctl -o with-unit` to do this exact thing. There are lots of other formats you can choose from as well.<p>EDIT 2: Unfortunately there&#x27;s no way to set this as default, you must use `-o with-unit` each time or set up a shell alias :-\</div><br/></div></div></div></div></div></div><div id="40217449" class="c"><input type="checkbox" id="c-40217449" checked=""/><div class="controls bullet"><span class="by">JoshTriplett</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215268">parent</a><span>|</span><a href="#40215373">prev</a><span>|</span><a href="#40216232">next</a><span>|</span><label class="collapse" for="c-40217449">[-]</label><label class="expand" for="c-40217449">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Oh, I don´t know the name of the log for this process I can see in &#x27;ps aux&#x27;,<p>With services using journald, there&#x27;s no &quot;name of the log&quot; because everything&#x27;s in the journal, so that part isn&#x27;t a problem. Rather than &quot;is this in auth.log or syslog or thisservice.log&quot;, it&#x27;ll always be in the journal.<p>&gt; let me cd into &#x2F;var&#x2F;log and see what filenames I can find<p>You can filter journal entries by unit (-u) or by service identifier (-t). Often, though, I find it really useful to be able to see the adjacent entries from <i>other</i> services at the same time, since that can give some indication of what&#x27;s happening on the system that caused an issue.<p>&gt; or grep everything until I can find a couple of words that make some sense so I can keep digging further<p>journalctl --grep, or more conveniently, journalctl and then &#x2F; to search.<p>&gt; The lack of explorability in journalctl<p>It&#x27;s explorable by dozens of different axes, and if all of those aren&#x27;t sufficient, you always can get the whole thing as text and run any command you like on it, or get it in structured form and do structured queries on it.</div><br/></div></div><div id="40216232" class="c"><input type="checkbox" id="c-40216232" checked=""/><div class="controls bullet"><span class="by">rcxdude</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215268">parent</a><span>|</span><a href="#40217449">prev</a><span>|</span><a href="#40215896">next</a><span>|</span><label class="collapse" for="c-40216232">[-]</label><label class="expand" for="c-40216232">[1 more]</label></div><br/><div class="children"><div class="content">systemctl status &lt;pid&gt; will show you the unit and helpfully the last few lines of log from it. Journalctl -u &lt;unit name&gt; will then show you the full logs</div><br/></div></div></div></div></div></div></div></div><div id="40208374" class="c"><input type="checkbox" id="c-40208374" checked=""/><div class="controls bullet"><span class="by">hxelk1</span><span>|</span><a href="#40208219">parent</a><span>|</span><a href="#40214923">prev</a><span>|</span><a href="#40217617">next</a><span>|</span><label class="collapse" for="c-40208374">[-]</label><label class="expand" for="c-40208374">[6 more]</label></div><br/><div class="children"><div class="content">&gt; you can actually declare startup dependencies and other useful relationships<p>In theory, yes. In practice, I had a lot of trouble ordering things correctly in non-trivial cases.<p>&gt; it&#x27;s quite annoying that the armchair linux experts complain about how &quot;lol systemd is so stupid for reinventing the wheel, give me my shell scripts back&quot;<p>I can only speak for myself, but I don&#x27;t want the abysmal sysvinit scripts back. I just want a simple process supervision suite which is true to the UNIX way of doing things. The sysvinit&#x2F;systemd dichotomy is false.<p>Runit and s6 are both very real alternatives to systemd. They lack a ton of features, but they are a way to reliably run services. They do use shell scripts, but not for the reasons sysvinit did. They are extremely simple and have a very small attack surface as a result. Runit itself is a spiritual descendant of daemontools which predate systemd by great many years.<p>The problem with systemd is that it&#x27;s a mediocre solution to many problems. UNIX deserved better.<p>[Edit: whitespace]</div><br/><div id="40208546" class="c"><input type="checkbox" id="c-40208546" checked=""/><div class="controls bullet"><span class="by">mid-kid</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40208374">parent</a><span>|</span><a href="#40210966">next</a><span>|</span><label class="collapse" for="c-40208546">[-]</label><label class="expand" for="c-40208546">[2 more]</label></div><br/><div class="children"><div class="content">In a similar vein, systems like openrc use &quot;shell scripts&quot; as well, but can generally be written declaratively[1]. This provides greater flexibility when it comes to creating one-shot services or services that require a little setup before running, as you can just re-define the start() function, rather than requiring one to make a separate shell script for it, or dependency tree, like you&#x27;d have to in systemd land.<p>&quot;sysvinit&quot; is an ill-defined concept, anyway, as every distribution had their own scripts and tooling around actual services, and sysvinit was generally only responsible for starting getty and launching the distribution&#x27;s actual service system. How initscripts were created and how you managed them depended significantly on the distribution.<p>[1]: <a href="https:&#x2F;&#x2F;gitweb.gentoo.org&#x2F;repo&#x2F;gentoo.git&#x2F;tree&#x2F;net-vpn&#x2F;tailscale&#x2F;files&#x2F;tailscaled.initd" rel="nofollow">https:&#x2F;&#x2F;gitweb.gentoo.org&#x2F;repo&#x2F;gentoo.git&#x2F;tree&#x2F;net-vpn&#x2F;tails...</a></div><br/><div id="40219306" class="c"><input type="checkbox" id="c-40219306" checked=""/><div class="controls bullet"><span class="by">declarethroway</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40208546">parent</a><span>|</span><a href="#40210966">next</a><span>|</span><label class="collapse" for="c-40219306">[-]</label><label class="expand" for="c-40219306">[1 more]</label></div><br/><div class="children"><div class="content">Debian&#x27;s sysvinit scripts can also be declarative.
<a href="https:&#x2F;&#x2F;github.com&#x2F;DanielAdolfsson&#x2F;ndppd&#x2F;blob&#x2F;master&#x2F;ndppd-init-debian-jessi">https:&#x2F;&#x2F;github.com&#x2F;DanielAdolfsson&#x2F;ndppd&#x2F;blob&#x2F;master&#x2F;ndppd-i...</a><p>The full system also cares about dependencies and parallel running. And this is not recent, but the black legend will never die.<p>Bonus: by having the shipped scripts under &#x2F;etc, tools like etckeeper can show your changes as well as updates, all in one place.</div><br/></div></div></div></div><div id="40210966" class="c"><input type="checkbox" id="c-40210966" checked=""/><div class="controls bullet"><span class="by">jauntywundrkind</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40208374">parent</a><span>|</span><a href="#40208546">prev</a><span>|</span><a href="#40217617">next</a><span>|</span><label class="collapse" for="c-40210966">[-]</label><label class="expand" for="c-40210966">[3 more]</label></div><br/><div class="children"><div class="content">The other pieces are also pretty excellent. Ifup gave me no joy &amp; was very limited. Systemd-networkd is a wonderful option with vast &amp; great capabilities, that meshes well with the init process &amp; it&#x27;s style. Systemd-timesyncd is fine, I dunno, works for me. Systemd-journald is probably the weakest of the batch but mostly because it&#x27;s not very ambitious; I loath that there&#x27;s no way to really deal with super-active programs hogging all the logspace, short of configuring a second journald instance for that program, which ain&#x27;t no joy to setup. Systemd-home is a cool set of features for portability. Systemd-nspawn is a bit ahead of its time &amp; looks a little weird now but was a very novel &amp; powerful thing to have built in to most systems. Systemd-resolved is a pretty good local DNS that handles mdns and much weirder cases easily. Systemd-boot is a really nice easy to work with uefi boot loaders that&#x27;s worlds easier to deal with than uboot or <i>gasp</i> grub.<p>All of these are taken em or leave em. But they&#x27;re good expectations to have. I love the bazaar model, but Linux used to have so few common expectations, used to manage various bits so poorly. And now there&#x27;s a much better base of capabilities, which have universal patterns of management that tend to apply to them (how etc files are laid how, being dbus and maybe varlink accessible). Linux <i>hadn&#x27;t</i> been growing; when you came to a random systems you expected enormously little and typically got it, and what extras were available were scattered&#x2F;random and often not particularly high quality or capable software. Systems has extended a much bigger base of competency &amp; capability. That we can plug in a USB drive and systemd-home can create an isolated dynamic user out of that &amp; let that user securely run their environment there is a neat as heck expectation. That our network manager supports setting up such a wide range of bridges and tunnels and taps and tuns is fantastic, is excellent. I don&#x27;t have words for people turning their noses up at this better world; this is so much more competent &amp; capable a world than where we were, gives us so much we all can now take for granted, and it&#x27;s been done smartly, more mono-repo than monolithic, such that you can do alternatives. But many of these pieces are utterly without peer. And the consistency of operation you get, the predictability of use, from being under the same umbrella, is an ergonomic wonder that is unmatched.</div><br/><div id="40212615" class="c"><input type="checkbox" id="c-40212615" checked=""/><div class="controls bullet"><span class="by">ghostpepper</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40210966">parent</a><span>|</span><a href="#40217617">next</a><span>|</span><label class="collapse" for="c-40212615">[-]</label><label class="expand" for="c-40212615">[2 more]</label></div><br/><div class="children"><div class="content">Is there a good overview of these pieces and what they&#x27;re responsible for and how they fit together?<p>I had a quick skim of the docs on systemd.io and there are quite a few documents but they don&#x27;t seem particularly organized and I couldn&#x27;t see a good architecture overview.</div><br/><div id="40214918" class="c"><input type="checkbox" id="c-40214918" checked=""/><div class="controls bullet"><span class="by">mattpallissard</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40212615">parent</a><span>|</span><a href="#40217617">next</a><span>|</span><label class="collapse" for="c-40214918">[-]</label><label class="expand" for="c-40214918">[1 more]</label></div><br/><div class="children"><div class="content">I hate to be this guy but the man pages have it all<p><pre><code>  man -k systemd

</code></pre>
There&#x27;s some terminology to learn, but overall it&#x27;s pretty approachable.<p>Edit; and as far as architecture goes they are all _separate_ programs. It&#x27;s not a single large &quot;systemd&quot;</div><br/></div></div></div></div></div></div></div></div><div id="40217617" class="c"><input type="checkbox" id="c-40217617" checked=""/><div class="controls bullet"><span class="by">nextaccountic</span><span>|</span><a href="#40208219">parent</a><span>|</span><a href="#40208374">prev</a><span>|</span><a href="#40208481">next</a><span>|</span><label class="collapse" for="c-40217617">[-]</label><label class="expand" for="c-40217617">[1 more]</label></div><br/><div class="children"><div class="content">&gt; systemd has been a net positive for the linux ecosystem. remember when you had to write bash scripts to start, stop, restart services and handle any other signals you want to send it?<p>Systemd was meant to replace Ubuntu&#x27;s upstart, not sysv init. And it indeed systemd was better designed than upstart.<p>Sysv init is a horrendous hack. People should NOT use that. Upstart had limitations but is okay, and certainly much better than sysv init. Systemd is okay too (but has much more features).<p>Also as an historical note, both upstart and system was inspired by Apple&#x27;s launchd.<p>NixOS was an early adopter of upstart but it later migrated to systemd (alongside Ubuntu itself)</div><br/></div></div><div id="40208481" class="c"><input type="checkbox" id="c-40208481" checked=""/><div class="controls bullet"><span class="by">mid-kid</span><span>|</span><a href="#40208219">parent</a><span>|</span><a href="#40217617">prev</a><span>|</span><a href="#40214704">next</a><span>|</span><label class="collapse" for="c-40208481">[-]</label><label class="expand" for="c-40208481">[10 more]</label></div><br/><div class="children"><div class="content">I&#x27;d agree with your message if systemd was just an init system.</div><br/><div id="40210220" class="c"><input type="checkbox" id="c-40210220" checked=""/><div class="controls bullet"><span class="by">bryanlarsen</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40208481">parent</a><span>|</span><a href="#40214704">next</a><span>|</span><label class="collapse" for="c-40210220">[-]</label><label class="expand" for="c-40210220">[9 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not difficult to use some parts of systemd without using others.  Is it any different than something like coreutils, another package of linux utilities that are synergistic but usable seperately?  Nobody complains about coreutils being bundled.  Even the rewrite in rust crowd bundle them.</div><br/><div id="40212661" class="c"><input type="checkbox" id="c-40212661" checked=""/><div class="controls bullet"><span class="by">jacoblambda</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40210220">parent</a><span>|</span><a href="#40220315">next</a><span>|</span><label class="collapse" for="c-40212661">[-]</label><label class="expand" for="c-40212661">[7 more]</label></div><br/><div class="children"><div class="content">It really is not. This &quot;sudo replacement&quot; (which under the hood is systemd-run) will apparently require quite a bit of the systemd stack to operate. That is not something you have access to in many lightweight container distros or on other non-systemd distros.<p>And coreutils is expected because most people use GNU&#x2F;Linux. Coreutils is that GNU userland part. And either way, the majority of coreutils are GNU implementations of standard unix components. You can use most software that depends on coreutils on other *nix platforms like BSD for this reason.</div><br/><div id="40213200" class="c"><input type="checkbox" id="c-40213200" checked=""/><div class="controls bullet"><span class="by">bryanlarsen</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40212661">parent</a><span>|</span><a href="#40220315">next</a><span>|</span><label class="collapse" for="c-40213200">[-]</label><label class="expand" for="c-40213200">[6 more]</label></div><br/><div class="children"><div class="content">I doubt you&#x27;ll need to run systemd as pid 1 to use this.</div><br/><div id="40214620" class="c"><input type="checkbox" id="c-40214620" checked=""/><div class="controls bullet"><span class="by">navaati</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40213200">parent</a><span>|</span><a href="#40215182">next</a><span>|</span><label class="collapse" for="c-40214620">[-]</label><label class="expand" for="c-40214620">[4 more]</label></div><br/><div class="children"><div class="content">Oh you do: this work completely differently from sudo, there is no suid binary involved, instead it does IPC to the systemd pid 1 and asks it to spawn you process, attached to your current terminal. So if you don&#x27;t have systeme as pid 1, it&#x27;ll have noone to talk to.<p>Whether you like that or not is for you to decide.</div><br/><div id="40215434" class="c"><input type="checkbox" id="c-40215434" checked=""/><div class="controls bullet"><span class="by">bryanlarsen</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40214620">parent</a><span>|</span><a href="#40215182">next</a><span>|</span><label class="collapse" for="c-40215434">[-]</label><label class="expand" for="c-40215434">[3 more]</label></div><br/><div class="children"><div class="content">IPC will likely be over d-bus.   The new process will fork off a systemd which is almost always pid 1, but it might not have to be.</div><br/><div id="40217986" class="c"><input type="checkbox" id="c-40217986" checked=""/><div class="controls bullet"><span class="by">dijit</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215434">parent</a><span>|</span><a href="#40215182">next</a><span>|</span><label class="collapse" for="c-40217986">[-]</label><label class="expand" for="c-40217986">[2 more]</label></div><br/><div class="children"><div class="content">are there any non-systemd DBus options anymore? I had a hard time a year ago setting up Gentoo because there were no maintained options at that time.</div><br/><div id="40218270" class="c"><input type="checkbox" id="c-40218270" checked=""/><div class="controls bullet"><span class="by">jacoblambda</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40217986">parent</a><span>|</span><a href="#40215182">next</a><span>|</span><label class="collapse" for="c-40218270">[-]</label><label class="expand" for="c-40218270">[1 more]</label></div><br/><div class="children"><div class="content">There are. Gentoo has actually always used the FreeDesktop reference implementation instead of sd-bus (the systemd implementation).<p>FreeDesktop also maintains a list of implementations (also including bindings so you have to read to find which ones are full impls vs libdbus bindings).<p><a href="https:&#x2F;&#x2F;www.freedesktop.org&#x2F;wiki&#x2F;Software&#x2F;DBusBindings&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.freedesktop.org&#x2F;wiki&#x2F;Software&#x2F;DBusBindings&#x2F;</a></div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="40220315" class="c"><input type="checkbox" id="c-40220315" checked=""/><div class="controls bullet"><span class="by">j16sdiz</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40210220">parent</a><span>|</span><a href="#40212661">prev</a><span>|</span><a href="#40214704">next</a><span>|</span><label class="collapse" for="c-40220315">[-]</label><label class="expand" for="c-40220315">[1 more]</label></div><br/><div class="children"><div class="content">No. 
The real nightmare is systemd integration with dbus.</div><br/></div></div></div></div></div></div><div id="40214704" class="c"><input type="checkbox" id="c-40214704" checked=""/><div class="controls bullet"><span class="by">esoterae</span><span>|</span><a href="#40208219">parent</a><span>|</span><a href="#40208481">prev</a><span>|</span><a href="#40209110">next</a><span>|</span><label class="collapse" for="c-40214704">[-]</label><label class="expand" for="c-40214704">[6 more]</label></div><br/><div class="children"><div class="content">No, it hasn&#x27;t.<p>You forget, the reason systemd was originally rationalized for its insertion into our trees was &quot;boot times are too slow&quot;.  Its chameleon-like nature and ability to solve the hastily described problem du jour seems to be its only consistently touted feature.<p>Bash scripts that start processes are ephemeral.  If it&#x27;s signal handling you want, that was your program&#x27;s problem.  Either that or your program didn&#x27;t fork itself, which is a fish of an entirely different feather.<p>And now we have this sprawling mess of complexity and headache.</div><br/><div id="40216989" class="c"><input type="checkbox" id="c-40216989" checked=""/><div class="controls bullet"><span class="by">riddley</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40214704">parent</a><span>|</span><a href="#40209110">next</a><span>|</span><label class="collapse" for="c-40216989">[-]</label><label class="expand" for="c-40216989">[5 more]</label></div><br/><div class="children"><div class="content">Same thing is happening with Wayland. It reduces features adds complexity and solves no new problems but here it comes.</div><br/><div id="40217835" class="c"><input type="checkbox" id="c-40217835" checked=""/><div class="controls bullet"><span class="by">roenxi</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40216989">parent</a><span>|</span><a href="#40217464">next</a><span>|</span><label class="collapse" for="c-40217835">[-]</label><label class="expand" for="c-40217835">[1 more]</label></div><br/><div class="children"><div class="content">Wayland was a mis-fire in terms of user friendliness for the first decade or so. But it is still a big step up from the mess that was a typical xserver back in 2010.<p>&gt; It reduces features adds complexity...<p>The irony here is Wayland is part of a huge effort to decomplex an xserver into component parts. A really commendable initiative; the path forward while maintaining the X protocol probably was impractically hairy.<p>The Wayland protocol design had some glaring flaws, but saying that it adds complexity is unfair. It oversimplified; it would have benefited from some flexibility in providing a standard mechanism to let people inspect the buffers graphics buffers to be composited.</div><br/></div></div><div id="40217464" class="c"><input type="checkbox" id="c-40217464" checked=""/><div class="controls bullet"><span class="by">themerone</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40216989">parent</a><span>|</span><a href="#40217835">prev</a><span>|</span><a href="#40209110">next</a><span>|</span><label class="collapse" for="c-40217464">[-]</label><label class="expand" for="c-40217464">[3 more]</label></div><br/><div class="children"><div class="content">How is Wayland more complex than X?</div><br/><div id="40220328" class="c"><input type="checkbox" id="c-40220328" checked=""/><div class="controls bullet"><span class="by">j16sdiz</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40217464">parent</a><span>|</span><a href="#40218136">next</a><span>|</span><label class="collapse" for="c-40220328">[-]</label><label class="expand" for="c-40220328">[1 more]</label></div><br/><div class="children"><div class="content">Wayland by itself is simplier -- it is done by &quot;outsourcing&quot; everything a window system should do to the window manager.
There is where the complexity kicks in.</div><br/></div></div><div id="40218136" class="c"><input type="checkbox" id="c-40218136" checked=""/><div class="controls bullet"><span class="by">gmueckl</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40217464">parent</a><span>|</span><a href="#40220328">prev</a><span>|</span><a href="#40209110">next</a><span>|</span><label class="collapse" for="c-40218136">[-]</label><label class="expand" for="c-40218136">[1 more]</label></div><br/><div class="children"><div class="content">The resulting wayland environments are more complex because wayland itself refuses to define&#x2F;include features that desktop systems are expected to have. This results in a sprawling mess of competing and incompatible interfaces for those gaps that other parts of the implementations (desktop environments) now have to compensate for by including multiple implementations of the same thing based on all these different interfaces.</div><br/></div></div></div></div></div></div></div></div><div id="40209110" class="c"><input type="checkbox" id="c-40209110" checked=""/><div class="controls bullet"><span class="by">xolve</span><span>|</span><a href="#40208219">parent</a><span>|</span><a href="#40214704">prev</a><span>|</span><a href="#40217144">next</a><span>|</span><label class="collapse" for="c-40209110">[-]</label><label class="expand" for="c-40209110">[1 more]</label></div><br/><div class="children"><div class="content">Its refreshing to see that just hate systemd because &quot;its not UNIX way&quot; is not anymore. I see better discussions under this post and in other places around the web.</div><br/></div></div><div id="40217144" class="c"><input type="checkbox" id="c-40217144" checked=""/><div class="controls bullet"><span class="by">foresto</span><span>|</span><a href="#40208219">parent</a><span>|</span><a href="#40209110">prev</a><span>|</span><a href="#40208249">next</a><span>|</span><label class="collapse" for="c-40217144">[-]</label><label class="expand" for="c-40217144">[1 more]</label></div><br/><div class="children"><div class="content">&gt; systemd has been a net positive for the linux ecosystem.<p>You&#x27;re presuming to speak for an awful lot of people there, on a topic that would be difficult to measure.<p>&gt; since the beginning of systemd people have moaned<p>&gt; it&#x27;s quite annoying that the armchair linux experts complain<p>Now you&#x27;re overgeneralizing, and doing so in a dismissive and patronizing way.<p>Here are a few examples of problems I have with systemd:<p>System shutdown&#x2F;reboot is now unreliable. Sometimes it will be just as quick as it was before systemd arrived, but other times, systemd will decide that something isn&#x27;t to its liking, and block shutdown for somewhere between 30 seconds and 10 minutes, waiting for something that will never happen. The thing in question might be different from one session to the next, and from one systemd version to the next; I can spend hours or days tracking down the process&#x2F;mount&#x2F;service in question and finding a workaround, only to have systemd hang on something else the next day. It offers no manual skip option, so unless I happen to be working on a host with systemd&#x27;s timeouts reconfigured to reduce this problem, I&#x27;m stuck with either forcing a power-off or having my time wasted.<p>Something about systemd&#x27;s meddling with cgroups broke the lxc control commands a few years back. To work around the problem, I have to replace every such command I use with something like `systemd-run --quiet --user --scope --property=Delegate=yes &lt;command&gt;`. That&#x27;s a PITA that I&#x27;m unlikely to ever remember (or want to type) so I effectively cannot manage containers interactively without helper scripts any more. It&#x27;s also a new systemd dependency, so those helper scripts now also need checks for cgroup version and systemd presence, and a different code path depending on the result. Making matters worse, that systemd-run command occasionally fails even when I do everything &quot;right&quot;. What was once simple and easy is now complex and unreliable.<p>At some point, Lennart unilaterally decided that all machines accessed over a network must have a domain name. Subsequently, every machine running a distro that had migrated to systemd-resolved was suddenly unable to resolve its hostname-only peers on the LAN, despite the DNS server handling them just fine. Finding the problem, figuring out the cause, and reconfiguring around it wasn&#x27;t the end of the world, but it did waste more of my time. Repeating that experience once or twice more when systemd behavior changed again and again eventually drove me to a policy of ripping out systemd-resolved entirely on any new installation. (Which, of course, takes more time.) I think this behavior may have been rolled back by now, but sadly, I&#x27;ll never get my time back.<p>There are more examples, but I&#x27;m tired of re-living them and don&#x27;t really want to write a book. I hope these few are enough to convey my point:<p>Systemd has been a net negative in my experience. It has made my life markedly worse, without bringing anything I needed. Based on conversations, comments, and bug reports I&#x27;ve seen over the years, I get the impression that many others have had a similar experience, but don&#x27;t bother speaking up about it any more, because they&#x27;re tired of being dismissed, ignored, or shouted down, just as I am.<p>I would welcome a reliable, minimal, non-invasive, dependency-based init. Systemd is not it.</div><br/></div></div><div id="40208249" class="c"><input type="checkbox" id="c-40208249" checked=""/><div class="controls bullet"><span class="by">dcow</span><span>|</span><a href="#40208219">parent</a><span>|</span><a href="#40217144">prev</a><span>|</span><a href="#40215793">next</a><span>|</span><label class="collapse" for="c-40208249">[-]</label><label class="expand" for="c-40208249">[5 more]</label></div><br/><div class="children"><div class="content">I love systemd.</div><br/><div id="40208318" class="c"><input type="checkbox" id="c-40208318" checked=""/><div class="controls bullet"><span class="by">andrewstuart</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40208249">parent</a><span>|</span><a href="#40215793">next</a><span>|</span><label class="collapse" for="c-40208318">[-]</label><label class="expand" for="c-40208318">[4 more]</label></div><br/><div class="children"><div class="content">Me too. The best thing about Linux.</div><br/><div id="40208421" class="c"><input type="checkbox" id="c-40208421" checked=""/><div class="controls bullet"><span class="by">jbverschoor</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40208318">parent</a><span>|</span><a href="#40215793">next</a><span>|</span><label class="collapse" for="c-40208421">[-]</label><label class="expand" for="c-40208421">[3 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a re-implementation of Apple&#x27;s launchd. I&#x27;ve always liked it though</div><br/><div id="40214844" class="c"><input type="checkbox" id="c-40214844" checked=""/><div class="controls bullet"><span class="by">freedomben</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40208421">parent</a><span>|</span><a href="#40210167">next</a><span>|</span><label class="collapse" for="c-40214844">[-]</label><label class="expand" for="c-40214844">[1 more]</label></div><br/><div class="children"><div class="content">It is much more than just a re-implementation of launchd. I can&#x27;t grab a link right now, but Lenart wrote a long blog post about the philosophical decisions behind systemd, and he goes into detail about what he liked from launchd and what he did not like. It is called &quot;rethinking PID 1&quot;</div><br/></div></div><div id="40210167" class="c"><input type="checkbox" id="c-40210167" checked=""/><div class="controls bullet"><span class="by">bryanlarsen</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40208421">parent</a><span>|</span><a href="#40214844">prev</a><span>|</span><a href="#40215793">next</a><span>|</span><label class="collapse" for="c-40210167">[-]</label><label class="expand" for="c-40210167">[1 more]</label></div><br/><div class="children"><div class="content">A much improved version of launchd, yes.</div><br/></div></div></div></div></div></div></div></div><div id="40215793" class="c"><input type="checkbox" id="c-40215793" checked=""/><div class="controls bullet"><span class="by">aftbit</span><span>|</span><a href="#40208219">parent</a><span>|</span><a href="#40208249">prev</a><span>|</span><a href="#40212965">next</a><span>|</span><label class="collapse" for="c-40215793">[-]</label><label class="expand" for="c-40215793">[3 more]</label></div><br/><div class="children"><div class="content">Ah yes I remember back when you just put the system hostname in &#x2F;etc&#x2F;hostname. Now we have hostnamed!</div><br/><div id="40215891" class="c"><input type="checkbox" id="c-40215891" checked=""/><div class="controls bullet"><span class="by">egorfine</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215793">parent</a><span>|</span><a href="#40212965">next</a><span>|</span><label class="collapse" for="c-40215891">[-]</label><label class="expand" for="c-40215891">[2 more]</label></div><br/><div class="children"><div class="content">Which is now borderline impossible to tame. Google &quot;change hostname ubuntu&quot; and take a look at the results and comments.</div><br/><div id="40219996" class="c"><input type="checkbox" id="c-40219996" checked=""/><div class="controls bullet"><span class="by">pcthrowaway</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215891">parent</a><span>|</span><a href="#40212965">next</a><span>|</span><label class="collapse" for="c-40219996">[-]</label><label class="expand" for="c-40219996">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m still trying to figure out whether I like nftables more than iptables. Both are pretty complex to manage IIRC (I&#x27;ve only touched nftables a couple of times though, and not recently)</div><br/></div></div></div></div></div></div><div id="40212620" class="c"><input type="checkbox" id="c-40212620" checked=""/><div class="controls bullet"><span class="by">ranger_danger</span><span>|</span><a href="#40208219">parent</a><span>|</span><a href="#40214800">prev</a><span>|</span><a href="#40216445">next</a><span>|</span><label class="collapse" for="c-40212620">[-]</label><label class="expand" for="c-40212620">[1 more]</label></div><br/><div class="children"><div class="content">&gt; systemd has been a net positive for the linux ecosystem<p>I guess that depends on whether or not you consider the great number of CVEs caused by it don&#x27;t matter enough.</div><br/></div></div><div id="40216445" class="c"><input type="checkbox" id="c-40216445" checked=""/><div class="controls bullet"><span class="by">bitwize</span><span>|</span><a href="#40208219">parent</a><span>|</span><a href="#40212620">prev</a><span>|</span><a href="#40215163">next</a><span>|</span><label class="collapse" for="c-40216445">[-]</label><label class="expand" for="c-40216445">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t resent systemd for existing, but I don&#x27;t want to be forced to accept Lennart&#x27;s shitty design decisions and it&#x27;s clear he wants me to be since he successfully agitated for other critical components to hard depend on it. I want the option of opting out, which Lennart would deny me if he could.<p>At the end of the day, I just run Void (or MX Linux if I want something more Debian-flavored) and get on with my life.</div><br/></div></div><div id="40215163" class="c"><input type="checkbox" id="c-40215163" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#40208219">parent</a><span>|</span><a href="#40216445">prev</a><span>|</span><a href="#40215552">next</a><span>|</span><label class="collapse" for="c-40215163">[-]</label><label class="expand" for="c-40215163">[4 more]</label></div><br/><div class="children"><div class="content">100%<p>Systemd unit files make Linux feel like a rational OS.</div><br/><div id="40215284" class="c"><input type="checkbox" id="c-40215284" checked=""/><div class="controls bullet"><span class="by">slackfan</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215163">parent</a><span>|</span><a href="#40215552">next</a><span>|</span><label class="collapse" for="c-40215284">[-]</label><label class="expand" for="c-40215284">[3 more]</label></div><br/><div class="children"><div class="content">Only if your marker for a rational OS is NT.</div><br/><div id="40215989" class="c"><input type="checkbox" id="c-40215989" checked=""/><div class="controls bullet"><span class="by">delta_p_delta_x</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215284">parent</a><span>|</span><a href="#40215552">next</a><span>|</span><label class="collapse" for="c-40215989">[-]</label><label class="expand" for="c-40215989">[2 more]</label></div><br/><div class="children"><div class="content">Not the parent commenter. Windows has a lot of rubbish user-level interaction which belie how good an OS NT really is. Anyone who blindly disses it because &#x27;Windoze&#x27; and &#x27;M$ bad&#x27; is not really worthy of any attention whatsoever.</div><br/><div id="40217394" class="c"><input type="checkbox" id="c-40217394" checked=""/><div class="controls bullet"><span class="by">slackfan</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215989">parent</a><span>|</span><a href="#40215552">next</a><span>|</span><label class="collapse" for="c-40217394">[-]</label><label class="expand" for="c-40217394">[1 more]</label></div><br/><div class="children"><div class="content">NT isn&#x27;t terrible with some very well designed systems, that is quite true. It is however good for a completely different list of reasons that *nix is. Trying to conflate the two is a pottering&#x27;s errand.</div><br/></div></div></div></div></div></div></div></div><div id="40209185" class="c"><input type="checkbox" id="c-40209185" checked=""/><div class="controls bullet"><span class="by">SixDouble5321</span><span>|</span><a href="#40208219">parent</a><span>|</span><a href="#40215552">prev</a><span>|</span><a href="#40208286">next</a><span>|</span><label class="collapse" for="c-40209185">[-]</label><label class="expand" for="c-40209185">[1 more]</label></div><br/><div class="children"><div class="content">Systemd isn&#x27;t just one thing lol</div><br/></div></div><div id="40208286" class="c"><input type="checkbox" id="c-40208286" checked=""/><div class="controls bullet"><span class="by">Faaak</span><span>|</span><a href="#40208219">parent</a><span>|</span><a href="#40209185">prev</a><span>|</span><a href="#40219914">next</a><span>|</span><label class="collapse" for="c-40208286">[-]</label><label class="expand" for="c-40208286">[31 more]</label></div><br/><div class="children"><div class="content">Yeah, basically I&#x27;ve found that the people the more vocal against systemd are either not really knowing how it works behind the scenes, and just criticizing for the sake of it (or because other people do so), or criticizing from an ideological point of view (do one thing and do it well). They see systemd as an octopus, not following the unix ideology. Which I don&#x27;t really agree tbh</div><br/><div id="40218038" class="c"><input type="checkbox" id="c-40218038" checked=""/><div class="controls bullet"><span class="by">dijit</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40208286">parent</a><span>|</span><a href="#40212740">next</a><span>|</span><label class="collapse" for="c-40218038">[-]</label><label class="expand" for="c-40218038">[1 more]</label></div><br/><div class="children"><div class="content">I think this is a really old statement. I’ve used systemd since it was made default in Fedora back in 2011 (Lovelock, anyone?) - at what point am I qualified to have an opinion, after having used it personally for 13 years and professionally for 8.<p>systemd is scary for 3 reasons.<p>1. it is inscrutable. Debugging it is nearly impossible, so you had better hope you don’t get a buggy release, especially with how hostile the devs can be.<p>2. it is large, and growing. Lots of things it claims are optional are in reality: not really. This is <i>fine</i> until uou get something that really doesnt work well (systemd-resolved is consistently the largest reason I have connectivity issues, wether it be because it interferes with docker inter-container networking or because it needs to time-out when trying DNSSec to continue- or if it fights with my vpn provider for power over my resolvers etc). Due to my distro being very tied to it: I gotta keep using it and working around it.<p>3. The interface is irreplaceable. Why are their 13 init systems? Because init is a closed scope. To be a sucessful init you need to spawn processes and do it cheaply. Supervising processes after start? Noble, and there were implementations that could do that (CDDL licensed SMF from Solaris for example). However we have already reached the state where it will be literal man-decades of work to replace systemd as we will need to make any replacement <i>bug compatible</i> with systemd itself. Its the ultimate show stopper.<p>The implementation is the reference. Which is a large departure now from what came before.</div><br/></div></div><div id="40212740" class="c"><input type="checkbox" id="c-40212740" checked=""/><div class="controls bullet"><span class="by">jacoblambda</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40208286">parent</a><span>|</span><a href="#40218038">prev</a><span>|</span><a href="#40209002">next</a><span>|</span><label class="collapse" for="c-40212740">[-]</label><label class="expand" for="c-40212740">[4 more]</label></div><br/><div class="children"><div class="content">The issue is that it&#x27;s not just ideological. &quot;Do one thing and do it well&quot; is important because if you want to port software to another platform, it&#x27;s a lot easier to port a single dependency component over to make it work than it is to port over the entire framework.<p>This is a serious problem and it makes it way harder to make things cross platform.</div><br/><div id="40215134" class="c"><input type="checkbox" id="c-40215134" checked=""/><div class="controls bullet"><span class="by">Xylakant</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40212740">parent</a><span>|</span><a href="#40209002">next</a><span>|</span><label class="collapse" for="c-40215134">[-]</label><label class="expand" for="c-40215134">[3 more]</label></div><br/><div class="children"><div class="content">Systemd was written specifically for Linux, hard depends on a list of features provided by the Linux kernel and leverages them to do its work. Porting it to another kernel is a rewrite. Lack of portability is in this case a design tradeoff.</div><br/><div id="40215608" class="c"><input type="checkbox" id="c-40215608" checked=""/><div class="controls bullet"><span class="by">fhars</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215134">parent</a><span>|</span><a href="#40215607">next</a><span>|</span><label class="collapse" for="c-40215608">[-]</label><label class="expand" for="c-40215608">[1 more]</label></div><br/><div class="children"><div class="content">The argument was that this design of systemd makes it hard to write applications that are portable, so that systemd is effectively a very big net negative to the open source ecosystem, because it causes massive fragmentation.</div><br/></div></div><div id="40215607" class="c"><input type="checkbox" id="c-40215607" checked=""/><div class="controls bullet"><span class="by">jacoblambda</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215134">parent</a><span>|</span><a href="#40215608">prev</a><span>|</span><a href="#40209002">next</a><span>|</span><label class="collapse" for="c-40215607">[-]</label><label class="expand" for="c-40215607">[1 more]</label></div><br/><div class="children"><div class="content">Sure that is the case for systemd itself but it&#x27;s not the case for most projects that happen to use things systemd provides.<p>There is very little benefit for most userspace software to tie itself to systemd and by extension linux when otherwise it could be portable to any unix or unix like platform. Especially when an alternative, portable solution already exists and is well established.</div><br/></div></div></div></div></div></div><div id="40209002" class="c"><input type="checkbox" id="c-40209002" checked=""/><div class="controls bullet"><span class="by">StimDeck</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40208286">parent</a><span>|</span><a href="#40212740">prev</a><span>|</span><a href="#40208422">next</a><span>|</span><label class="collapse" for="c-40209002">[-]</label><label class="expand" for="c-40209002">[18 more]</label></div><br/><div class="children"><div class="content">Systemd mentality is what made it possible for a binary blob in XZ Utils to create a backdoor in SSH.</div><br/><div id="40220443" class="c"><input type="checkbox" id="c-40220443" checked=""/><div class="controls bullet"><span class="by">_flux</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40209002">parent</a><span>|</span><a href="#40209034">next</a><span>|</span><label class="collapse" for="c-40220443">[-]</label><label class="expand" for="c-40220443">[1 more]</label></div><br/><div class="children"><div class="content">They didn&#x27;t need to use the library to make use of the systemd notify mechanism, which is simple to interface and quite a nice feature in the first place.<p>The free-standing implementation: <a href="https:&#x2F;&#x2F;github.com&#x2F;openssh&#x2F;openssh-portable&#x2F;commit&#x2F;08f579231cd38a1c657aaa6ddeb8ab57a1fd4f5c">https:&#x2F;&#x2F;github.com&#x2F;openssh&#x2F;openssh-portable&#x2F;commit&#x2F;08f579231...</a></div><br/></div></div><div id="40209034" class="c"><input type="checkbox" id="c-40209034" checked=""/><div class="controls bullet"><span class="by">growse</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40209002">parent</a><span>|</span><a href="#40220443">prev</a><span>|</span><a href="#40208422">next</a><span>|</span><label class="collapse" for="c-40209034">[-]</label><label class="expand" for="c-40209034">[16 more]</label></div><br/><div class="children"><div class="content">I think dynamic linking pre-dates systemd by quite a number of years.</div><br/><div id="40209169" class="c"><input type="checkbox" id="c-40209169" checked=""/><div class="controls bullet"><span class="by">StimDeck</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40209034">parent</a><span>|</span><a href="#40208422">next</a><span>|</span><label class="collapse" for="c-40209169">[-]</label><label class="expand" for="c-40209169">[15 more]</label></div><br/><div class="children"><div class="content">SSH being linked to XZ doesn’t.</div><br/><div id="40214989" class="c"><input type="checkbox" id="c-40214989" checked=""/><div class="controls bullet"><span class="by">tommiegannert</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40209169">parent</a><span>|</span><a href="#40209743">next</a><span>|</span><label class="collapse" for="c-40214989">[-]</label><label class="expand" for="c-40214989">[5 more]</label></div><br/><div class="children"><div class="content">My Ubuntu &#x2F;usr&#x2F;sbin&#x2F;sshd already links to libz, liblzma, liblz4 and libzstd. I don&#x27;t see why linking to libxz would be so outrageous. All-in-all, ldd reports 26 libraries.<p>They attacked the weakest link, and systemd was just a small pawn in that game. Sure, a smaller attack surface is better, but it&#x27;s not like OpenSSHd has a small attack surface even without libsystemd. Not even in projects with a similar possibility of obscure &quot;test data.&quot;</div><br/><div id="40220509" class="c"><input type="checkbox" id="c-40220509" checked=""/><div class="controls bullet"><span class="by">jwilk</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40214989">parent</a><span>|</span><a href="#40218362">next</a><span>|</span><label class="collapse" for="c-40220509">[-]</label><label class="expand" for="c-40220509">[2 more]</label></div><br/><div class="children"><div class="content">&gt; My Ubuntu &#x2F;usr&#x2F;sbin&#x2F;sshd already links to libz, liblzma, liblz4 and libzstd.<p>Except for libz, they are only linked indirectly through libsystemd.<p>&gt; I don&#x27;t see why linking to libxz would be so outrageous<p>The XZ Utils library is called liblzma, not libxz.</div><br/><div id="40220650" class="c"><input type="checkbox" id="c-40220650" checked=""/><div class="controls bullet"><span class="by">tommiegannert</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40220509">parent</a><span>|</span><a href="#40218362">next</a><span>|</span><label class="collapse" for="c-40220650">[-]</label><label class="expand" for="c-40220650">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Except for libz, they are only linked indirectly though libsystemd.<p>Ah, that invalidates my point re. obscure test data. Sloppy use of ldd. (I&#x27;m guessing it would be much harder making such an attack on a crypto library.)<p>Thanks.</div><br/></div></div></div></div><div id="40218362" class="c"><input type="checkbox" id="c-40218362" checked=""/><div class="controls bullet"><span class="by">t-3</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40214989">parent</a><span>|</span><a href="#40220509">prev</a><span>|</span><a href="#40215680">next</a><span>|</span><label class="collapse" for="c-40218362">[-]</label><label class="expand" for="c-40218362">[1 more]</label></div><br/><div class="children"><div class="content">On OpenBSD it links 4 libraries. On my crux linux installation, 7.</div><br/></div></div><div id="40215680" class="c"><input type="checkbox" id="c-40215680" checked=""/><div class="controls bullet"><span class="by">michaelmrose</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40214989">parent</a><span>|</span><a href="#40218362">prev</a><span>|</span><a href="#40209743">next</a><span>|</span><label class="collapse" for="c-40215680">[-]</label><label class="expand" for="c-40215680">[1 more]</label></div><br/><div class="children"><div class="content">In void it links 11 and includes only libz of the items you listed.</div><br/></div></div></div></div><div id="40209743" class="c"><input type="checkbox" id="c-40209743" checked=""/><div class="controls bullet"><span class="by">growse</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40209169">parent</a><span>|</span><a href="#40214989">prev</a><span>|</span><a href="#40214774">next</a><span>|</span><label class="collapse" for="c-40209743">[-]</label><label class="expand" for="c-40209743">[5 more]</label></div><br/><div class="children"><div class="content">So aim your ire at the distributions who (I agree) cocked this one up. &quot;Take a library dependency to implement basic functionality&quot; is not a systemd mentality, it&#x27;s pernicious throughout software development - see leftPad as another example.</div><br/><div id="40215112" class="c"><input type="checkbox" id="c-40215112" checked=""/><div class="controls bullet"><span class="by">immibis</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40209743">parent</a><span>|</span><a href="#40215111">next</a><span>|</span><label class="collapse" for="c-40215112">[-]</label><label class="expand" for="c-40215112">[3 more]</label></div><br/><div class="children"><div class="content">&quot;Put everything in one big ball&quot; is systemd mentality AND something that enabled the xz exploit to work.</div><br/><div id="40216864" class="c"><input type="checkbox" id="c-40216864" checked=""/><div class="controls bullet"><span class="by">growse</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215112">parent</a><span>|</span><a href="#40215111">next</a><span>|</span><label class="collapse" for="c-40216864">[-]</label><label class="expand" for="c-40216864">[2 more]</label></div><br/><div class="children"><div class="content">Lots of things enabled the xz exploit to work.<p>If the lesson you take from xz is &quot;systemd bad&quot; then you&#x27;ve really missed the wood for the trees.</div><br/><div id="40217338" class="c"><input type="checkbox" id="c-40217338" checked=""/><div class="controls bullet"><span class="by">immibis</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40216864">parent</a><span>|</span><a href="#40215111">next</a><span>|</span><label class="collapse" for="c-40217338">[-]</label><label class="expand" for="c-40217338">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s one of many things to consider. Think of it as sandboxing, or attack surface reduction. Should we expose everything to everything else, or should it be on a need-to-know basis?</div><br/></div></div></div></div></div></div></div></div><div id="40214774" class="c"><input type="checkbox" id="c-40214774" checked=""/><div class="controls bullet"><span class="by">SR2Z</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40209169">parent</a><span>|</span><a href="#40209743">prev</a><span>|</span><a href="#40208422">next</a><span>|</span><label class="collapse" for="c-40214774">[-]</label><label class="expand" for="c-40214774">[4 more]</label></div><br/><div class="children"><div class="content">Why wouldn&#x27;t SSH be linked to XZ?  Isn&#x27;t it supported as a compression method for connections?</div><br/><div id="40215048" class="c"><input type="checkbox" id="c-40215048" checked=""/><div class="controls bullet"><span class="by">yjftsjthsd-h</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40214774">parent</a><span>|</span><a href="#40208422">next</a><span>|</span><label class="collapse" for="c-40215048">[-]</label><label class="expand" for="c-40215048">[3 more]</label></div><br/><div class="children"><div class="content">IIRC, xz was used by a systemd library, and that systemd library got added to sshd so it could tell systemd when it had started or something like that. SSH itself doesn&#x27;t use xz.</div><br/><div id="40217025" class="c"><input type="checkbox" id="c-40217025" checked=""/><div class="controls bullet"><span class="by">riddley</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40215048">parent</a><span>|</span><a href="#40208422">next</a><span>|</span><label class="collapse" for="c-40217025">[-]</label><label class="expand" for="c-40217025">[2 more]</label></div><br/><div class="children"><div class="content">xz is a compression library.</div><br/><div id="40217925" class="c"><input type="checkbox" id="c-40217925" checked=""/><div class="controls bullet"><span class="by">yjftsjthsd-h</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40217025">parent</a><span>|</span><a href="#40208422">next</a><span>|</span><label class="collapse" for="c-40217925">[-]</label><label class="expand" for="c-40217925">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m aware? It&#x27;s a compression library that is used by systemd, including in a systemd library that got added to sshd in some distros.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="40208422" class="c"><input type="checkbox" id="c-40208422" checked=""/><div class="controls bullet"><span class="by">hanselot</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40208286">parent</a><span>|</span><a href="#40209002">prev</a><span>|</span><a href="#40219914">next</a><span>|</span><label class="collapse" for="c-40208422">[-]</label><label class="expand" for="c-40208422">[7 more]</label></div><br/><div class="children"><div class="content">Well, you don&#x27;t have to understand the underlying concepts that deeply to know that putting all your xzs in one basket is a bad idea.<p>There is no single piece of software that has given me more Microsoft EEE vibes in the past decade than systemd<p>The attack vector for systemd is already enormous, but the inclusion of sudo seems like the most blatant attempt I&#x27;ve yet seen to put the final piece of this nation state backdoor in place.</div><br/><div id="40208710" class="c"><input type="checkbox" id="c-40208710" checked=""/><div class="controls bullet"><span class="by">dale_glass</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40208422">parent</a><span>|</span><a href="#40208645">next</a><span>|</span><label class="collapse" for="c-40208710">[-]</label><label class="expand" for="c-40208710">[4 more]</label></div><br/><div class="children"><div class="content">systemd isn&#x27;t a single piece of software. It&#x27;s a collection of software with an unified theme, like KDE or Gnome.<p>Attack surface-wise, I don&#x27;t think there&#x27;s much difference between &quot;sudo&quot; being a part of the systemd package and not. Either way there&#x27;s &quot;sudo&quot; code to be targeted, which package it&#x27;s part of is just a technicality.</div><br/><div id="40211011" class="c"><input type="checkbox" id="c-40211011" checked=""/><div class="controls bullet"><span class="by">SAI_Peregrinus</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40208710">parent</a><span>|</span><a href="#40208645">next</a><span>|</span><label class="collapse" for="c-40211011">[-]</label><label class="expand" for="c-40211011">[3 more]</label></div><br/><div class="children"><div class="content">I like to compare Systemd to GNU. Pretty similar scale, similar &quot;take over the world&quot; levels of adoption in Linux (GNU&#x27;s libc is in nearly <i>everything</i>, all the other GNU tools are ridiculously common), adds lots of attack surface to what used to be single-purpose simple tools, etc. Just about every criticism of Systemd applies just as well to GNU.</div><br/><div id="40216650" class="c"><input type="checkbox" id="c-40216650" checked=""/><div class="controls bullet"><span class="by">fsflover</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40211011">parent</a><span>|</span><a href="#40215317">prev</a><span>|</span><a href="#40208645">next</a><span>|</span><label class="collapse" for="c-40216650">[-]</label><label class="expand" for="c-40216650">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=40215413">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=40215413</a></div><br/></div></div></div></div></div></div><div id="40208645" class="c"><input type="checkbox" id="c-40208645" checked=""/><div class="controls bullet"><span class="by">throwaway598</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40208422">parent</a><span>|</span><a href="#40208710">prev</a><span>|</span><a href="#40219914">next</a><span>|</span><label class="collapse" for="c-40208645">[-]</label><label class="expand" for="c-40208645">[2 more]</label></div><br/><div class="children"><div class="content">The root of the problem is sudo, and su more generally.  This derives from *nix, or mainstream versions today, requiring a super user, a manifestation of the problem with monolithic kernals.  A microkernal may be a stepping stone to improving this but even this is not a solution.  The only solution is no kernal space, no privileged user(s), all processes negotiate independently with each other.</div><br/><div id="40215326" class="c"><input type="checkbox" id="c-40215326" checked=""/><div class="controls bullet"><span class="by">metalforever</span><span>|</span><a href="#40208219">root</a><span>|</span><a href="#40208645">parent</a><span>|</span><a href="#40219914">next</a><span>|</span><label class="collapse" for="c-40215326">[-]</label><label class="expand" for="c-40215326">[1 more]</label></div><br/><div class="children"><div class="content">No the root of the problem is the large attack surface systemd is creating by tightly coupling a ton of tools together, I agree about the microkernel idea completely though.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="40219914" class="c"><input type="checkbox" id="c-40219914" checked=""/><div class="controls bullet"><span class="by">ykonstant</span><span>|</span><a href="#40208219">prev</a><span>|</span><a href="#40208262">next</a><span>|</span><label class="collapse" for="c-40219914">[-]</label><label class="expand" for="c-40219914">[1 more]</label></div><br/><div class="children"><div class="content">Is there a way to read this sequence of messages as a coherent whole in the correct order?</div><br/></div></div><div id="40208262" class="c"><input type="checkbox" id="c-40208262" checked=""/><div class="controls bullet"><span class="by">mehdix</span><span>|</span><a href="#40219914">prev</a><span>|</span><a href="#40212909">next</a><span>|</span><label class="collapse" for="c-40208262">[-]</label><label class="expand" for="c-40208262">[1 more]</label></div><br/><div class="children"><div class="content">Lennart&#x27;s toots suggest they are replacing a complex SUID binary with an already existing component (systemd-run) with better workflow (service manager handling the elevated context), which sounds like a sane move to me.</div><br/></div></div><div id="40212909" class="c"><input type="checkbox" id="c-40212909" checked=""/><div class="controls bullet"><span class="by">abridgett</span><span>|</span><a href="#40208262">prev</a><span>|</span><a href="#40220367">next</a><span>|</span><label class="collapse" for="c-40212909">[-]</label><label class="expand" for="c-40212909">[8 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not sure it can replace non-trivial setups - sudo&#x2F;doas looks set to stay.<p>e.g when you need to restrict a set of users to run only certain applications with certain other users.  sudo can do this (even if the config format can be painful).</div><br/><div id="40215759" class="c"><input type="checkbox" id="c-40215759" checked=""/><div class="controls bullet"><span class="by">agwa</span><span>|</span><a href="#40212909">parent</a><span>|</span><a href="#40215140">next</a><span>|</span><label class="collapse" for="c-40215759">[-]</label><label class="expand" for="c-40215759">[4 more]</label></div><br/><div class="children"><div class="content">Good news! run0 will use polkit[1], which uses JavaScript for its rules[2], so there&#x27;s no limit to how complex your rules can get!<p>On the other hand, maybe adding a JavaScript interpreter to Linux&#x27;s trusted computing base isn&#x27;t good news...<p>[1] <a href="https:&#x2F;&#x2F;mastodon.social&#x2F;@pid_eins&#x2F;112353420303876549" rel="nofollow">https:&#x2F;&#x2F;mastodon.social&#x2F;@pid_eins&#x2F;112353420303876549</a><p>[2] <a href="https:&#x2F;&#x2F;www.freedesktop.org&#x2F;software&#x2F;polkit&#x2F;docs&#x2F;latest&#x2F;polkit.8.html" rel="nofollow">https:&#x2F;&#x2F;www.freedesktop.org&#x2F;software&#x2F;polkit&#x2F;docs&#x2F;latest&#x2F;polk...</a></div><br/><div id="40216997" class="c"><input type="checkbox" id="c-40216997" checked=""/><div class="controls bullet"><span class="by">rcxdude</span><span>|</span><a href="#40212909">root</a><span>|</span><a href="#40215759">parent</a><span>|</span><a href="#40216026">next</a><span>|</span><label class="collapse" for="c-40216997">[-]</label><label class="expand" for="c-40216997">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a heck if a lot better than a random smattering of shared libraries getting pulled into a random high-priviledge context which also inherits some other context from whoever is asking for authentication. Polkit gets a lot of flack but PAM is absolutely mad.</div><br/></div></div><div id="40216026" class="c"><input type="checkbox" id="c-40216026" checked=""/><div class="controls bullet"><span class="by">akira2501</span><span>|</span><a href="#40212909">root</a><span>|</span><a href="#40215759">parent</a><span>|</span><a href="#40216997">prev</a><span>|</span><a href="#40215140">next</a><span>|</span><label class="collapse" for="c-40216026">[-]</label><label class="expand" for="c-40216026">[2 more]</label></div><br/><div class="children"><div class="content">If the lesson of xz was &quot;reduce supply chain attack surface&quot; then the freedesktop people clearly haven&#x27;t received it yet.</div><br/><div id="40218506" class="c"><input type="checkbox" id="c-40218506" checked=""/><div class="controls bullet"><span class="by">bmicraft</span><span>|</span><a href="#40212909">root</a><span>|</span><a href="#40216026">parent</a><span>|</span><a href="#40215140">next</a><span>|</span><label class="collapse" for="c-40218506">[-]</label><label class="expand" for="c-40218506">[1 more]</label></div><br/><div class="children"><div class="content">Fedora has used PolKit for 12 years now, and the javascript rules have probably been a thing for about as long.</div><br/></div></div></div></div></div></div><div id="40215140" class="c"><input type="checkbox" id="c-40215140" checked=""/><div class="controls bullet"><span class="by">stop50</span><span>|</span><a href="#40212909">parent</a><span>|</span><a href="#40215759">prev</a><span>|</span><a href="#40213750">next</a><span>|</span><label class="collapse" for="c-40215140">[-]</label><label class="expand" for="c-40215140">[1 more]</label></div><br/><div class="children"><div class="content">Thats why i moved every sudoers rule to ldap. Much nicer to configure and no need for files with the same content on multiple servers. New users are added and removed fast and i can check the rule on any server.</div><br/></div></div><div id="40213750" class="c"><input type="checkbox" id="c-40213750" checked=""/><div class="controls bullet"><span class="by">lupire</span><span>|</span><a href="#40212909">parent</a><span>|</span><a href="#40215140">prev</a><span>|</span><a href="#40213044">next</a><span>|</span><label class="collapse" for="c-40213750">[-]</label><label class="expand" for="c-40213750">[1 more]</label></div><br/><div class="children"><div class="content">What&#x27;s the goal?<p>If the host is to get most scenarios off sudo, exceptions aren&#x27;t a problem.<p>If the goal is to delete sudo, exceptions matter, and migrating what is migratable will clarify what the remaining requirements are.</div><br/></div></div><div id="40213044" class="c"><input type="checkbox" id="c-40213044" checked=""/><div class="controls bullet"><span class="by">cozzyd</span><span>|</span><a href="#40212909">parent</a><span>|</span><a href="#40213750">prev</a><span>|</span><a href="#40220367">next</a><span>|</span><label class="collapse" for="c-40213044">[-]</label><label class="expand" for="c-40213044">[1 more]</label></div><br/><div class="children"><div class="content">sure but very few people (relatively) are doing stuff like that?</div><br/></div></div></div></div><div id="40220367" class="c"><input type="checkbox" id="c-40220367" checked=""/><div class="controls bullet"><span class="by">theshrike79</span><span>|</span><a href="#40212909">prev</a><span>|</span><a href="#40207703">next</a><span>|</span><label class="collapse" for="c-40220367">[-]</label><label class="expand" for="c-40220367">[2 more]</label></div><br/><div class="children"><div class="content">I think we&#x27;re entering a point where GNU&#x2F;Linux should be called Systemd&#x2F;Linux</div><br/><div id="40220924" class="c"><input type="checkbox" id="c-40220924" checked=""/><div class="controls bullet"><span class="by">mrighele</span><span>|</span><a href="#40220367">parent</a><span>|</span><a href="#40207703">next</a><span>|</span><label class="collapse" for="c-40220924">[-]</label><label class="expand" for="c-40220924">[1 more]</label></div><br/><div class="children"><div class="content">That was the plan (by Redhat) all along, to have better control of the platform.</div><br/></div></div></div></div><div id="40207703" class="c"><input type="checkbox" id="c-40207703" checked=""/><div class="controls bullet"><span class="by">bananskalhalk</span><span>|</span><a href="#40220367">prev</a><span>|</span><a href="#40220834">next</a><span>|</span><label class="collapse" for="c-40207703">[-]</label><label class="expand" for="c-40207703">[3 more]</label></div><br/><div class="children"><div class="content">I was really hoping the next sudo replacement would borrow heavily on root as role[0] (if not being root as role). Feels like a missed opportunity to not use capabilities.<p>[0]: <a href="https:&#x2F;&#x2F;www.sciencedirect.com&#x2F;science&#x2F;article&#x2F;pii&#x2F;S0167404822003753" rel="nofollow">https:&#x2F;&#x2F;www.sciencedirect.com&#x2F;science&#x2F;article&#x2F;pii&#x2F;S016740482...</a></div><br/><div id="40208030" class="c"><input type="checkbox" id="c-40208030" checked=""/><div class="controls bullet"><span class="by">bandrami</span><span>|</span><a href="#40207703">parent</a><span>|</span><a href="#40220834">next</a><span>|</span><label class="collapse" for="c-40208030">[-]</label><label class="expand" for="c-40208030">[2 more]</label></div><br/><div class="children"><div class="content">Capabilities aren&#x27;t guaranteed to be present, and in a lot of high-security situations aren&#x27;t available (though obviously you could say that about sudo too)</div><br/><div id="40209395" class="c"><input type="checkbox" id="c-40209395" checked=""/><div class="controls bullet"><span class="by">bananskalhalk</span><span>|</span><a href="#40207703">root</a><span>|</span><a href="#40208030">parent</a><span>|</span><a href="#40220834">next</a><span>|</span><label class="collapse" for="c-40209395">[-]</label><label class="expand" for="c-40209395">[1 more]</label></div><br/><div class="children"><div class="content">Sounds exciting and might be obvious, but where will I find systemd and not capabilities?</div><br/></div></div></div></div></div></div><div id="40220834" class="c"><input type="checkbox" id="c-40220834" checked=""/><div class="controls bullet"><span class="by">constantcrying</span><span>|</span><a href="#40207703">prev</a><span>|</span><a href="#40219344">next</a><span>|</span><label class="collapse" for="c-40220834">[-]</label><label class="expand" for="c-40220834">[1 more]</label></div><br/><div class="children"><div class="content">&gt;But enough about all that security blabla. The tool is also a lot more fun to use than sudo. For example, by default it will tint your terminal background in a reddish tone while you are operating with elevated privileges. That is supposed to act as a friendly reminder that you haven&#x27;t given up the privileges yet, and marks the output of all commands that ran with privileges appropriately.<p>WHAT AM I READING?? Why can&#x27;t the systemd developers just be normal?<p>I also suspect that this will interact terribly with anyone who uses a certain kind of terminal theme. Do they not know that you can have these &quot;nice to have&quot; features, off by default, so that anyone who wants can enable them and anyone else is never bothered by them?</div><br/></div></div><div id="40219344" class="c"><input type="checkbox" id="c-40219344" checked=""/><div class="controls bullet"><span class="by">emmelaich</span><span>|</span><a href="#40220834">prev</a><span>|</span><a href="#40212851">next</a><span>|</span><label class="collapse" for="c-40219344">[-]</label><label class="expand" for="c-40219344">[3 more]</label></div><br/><div class="children"><div class="content">This is great!<p>There was (is?) a program developed by some debian developers that did a similar thing way back, but I can&#x27;t remember it.<p>Anyone?<p>[edit - <a href="https:&#x2F;&#x2F;www.chiark.greenend.org.uk&#x2F;~ian&#x2F;userv&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.chiark.greenend.org.uk&#x2F;~ian&#x2F;userv&#x2F;</a> is probably what I&#x27;m thinking of]</div><br/><div id="40219380" class="c"><input type="checkbox" id="c-40219380" checked=""/><div class="controls bullet"><span class="by">yonatan8070</span><span>|</span><a href="#40219344">parent</a><span>|</span><a href="#40212851">next</a><span>|</span><label class="collapse" for="c-40219380">[-]</label><label class="expand" for="c-40219380">[2 more]</label></div><br/><div class="children"><div class="content">I know of doas[1], but that appears to be an OpenBSD thing. Maybe Debian folks ported it?<p>[1] <a href="https:&#x2F;&#x2F;wiki.archlinux.org&#x2F;title&#x2F;Doas" rel="nofollow">https:&#x2F;&#x2F;wiki.archlinux.org&#x2F;title&#x2F;Doas</a></div><br/><div id="40219766" class="c"><input type="checkbox" id="c-40219766" checked=""/><div class="controls bullet"><span class="by">rfmoz</span><span>|</span><a href="#40219344">root</a><span>|</span><a href="#40219380">parent</a><span>|</span><a href="#40212851">next</a><span>|</span><label class="collapse" for="c-40219766">[-]</label><label class="expand" for="c-40219766">[1 more]</label></div><br/><div class="children"><div class="content">hopefully</div><br/></div></div></div></div></div></div><div id="40212851" class="c"><input type="checkbox" id="c-40212851" checked=""/><div class="controls bullet"><span class="by">StayTrue</span><span>|</span><a href="#40219344">prev</a><span>|</span><a href="#40212976">next</a><span>|</span><label class="collapse" for="c-40212851">[-]</label><label class="expand" for="c-40212851">[5 more]</label></div><br/><div class="children"><div class="content">Perhaps the nomenclature should be updated from GNU&#x2F;Linux to GNU&#x2F;systemd&#x2F;Linux.</div><br/><div id="40212921" class="c"><input type="checkbox" id="c-40212921" checked=""/><div class="controls bullet"><span class="by">phone8675309</span><span>|</span><a href="#40212851">parent</a><span>|</span><a href="#40212976">next</a><span>|</span><label class="collapse" for="c-40212921">[-]</label><label class="expand" for="c-40212921">[4 more]</label></div><br/><div class="children"><div class="content">Until systemd consumes the kernel and then it will be GNU&#x2F;systemd</div><br/><div id="40212970" class="c"><input type="checkbox" id="c-40212970" checked=""/><div class="controls bullet"><span class="by">CamouflagedKiwi</span><span>|</span><a href="#40212851">root</a><span>|</span><a href="#40212921">parent</a><span>|</span><a href="#40215868">next</a><span>|</span><label class="collapse" for="c-40212970">[-]</label><label class="expand" for="c-40212970">[2 more]</label></div><br/><div class="children"><div class="content">Or it consumes every other part of the GNU runtime and it becomes systemd&#x2F;linux</div><br/><div id="40219093" class="c"><input type="checkbox" id="c-40219093" checked=""/><div class="controls bullet"><span class="by">Zuiii</span><span>|</span><a href="#40212851">root</a><span>|</span><a href="#40212970">parent</a><span>|</span><a href="#40215868">next</a><span>|</span><label class="collapse" for="c-40219093">[-]</label><label class="expand" for="c-40219093">[1 more]</label></div><br/><div class="children"><div class="content">At it&#x27;s growth rate, it&#x27;ll be just systemd. I&#x27;m only half joking unfortunately.</div><br/></div></div></div></div><div id="40215868" class="c"><input type="checkbox" id="c-40215868" checked=""/><div class="controls bullet"><span class="by">bitwize</span><span>|</span><a href="#40212851">root</a><span>|</span><a href="#40212921">parent</a><span>|</span><a href="#40212970">prev</a><span>|</span><a href="#40212976">next</a><span>|</span><label class="collapse" for="c-40215868">[-]</label><label class="expand" for="c-40215868">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;www.tumblr.com&#x2F;wizardofbits&#x2F;96856361060&#x2F;rethinking-the-primacy-of-linux-in-a-linux-system" rel="nofollow">https:&#x2F;&#x2F;www.tumblr.com&#x2F;wizardofbits&#x2F;96856361060&#x2F;rethinking-t...</a><p>Waiting for this to no longer be fake.</div><br/></div></div></div></div></div></div><div id="40212976" class="c"><input type="checkbox" id="c-40212976" checked=""/><div class="controls bullet"><span class="by">withinboredom</span><span>|</span><a href="#40212851">prev</a><span>|</span><a href="#40207713">next</a><span>|</span><label class="collapse" for="c-40212976">[-]</label><label class="expand" for="c-40212976">[3 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t understand the point of creating an entirely new shell inheriting almost nothing. Seems like that would cause a lot of issues (i.e., sudo make install)</div><br/><div id="40213021" class="c"><input type="checkbox" id="c-40213021" checked=""/><div class="controls bullet"><span class="by">Arnavion</span><span>|</span><a href="#40212976">parent</a><span>|</span><a href="#40207713">next</a><span>|</span><label class="collapse" for="c-40213021">[-]</label><label class="expand" for="c-40213021">[2 more]</label></div><br/><div class="children"><div class="content">That&#x27;s how sudo already works on most (all?) distros. Eg Debian 12 has:<p><pre><code>    Defaults env_reset
</code></pre>
... which will clear almost everything that `make install` would&#x27;ve used. OpenSUSE TW has:<p><pre><code>    Defaults always_set_home
    Defaults env_reset
    Defaults env_keep = &quot;LANG LC_ADDRESS LC_CTYPE LC_COLLATE LC_IDENTIFICATION LC_MEASUREMENT LC_MESSAGES LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER LC_TELEPHONE LC_TIME LC_ALL LANGUAGE LINGUAS XDG_SESSION_COOKIE&quot;
</code></pre>
... which is a lot more, but will still clear whatever `make install` would&#x27;ve used.<p>Anything you need to give to `make install` should be given explicitly, like `sudo make INSTALL_ROOT=$INSTALL_ROOT install` or whatever.</div><br/><div id="40215771" class="c"><input type="checkbox" id="c-40215771" checked=""/><div class="controls bullet"><span class="by">gcbirzan</span><span>|</span><a href="#40212976">root</a><span>|</span><a href="#40213021">parent</a><span>|</span><a href="#40207713">next</a><span>|</span><label class="collapse" for="c-40215771">[-]</label><label class="expand" for="c-40215771">[1 more]</label></div><br/><div class="children"><div class="content">If you&#x27;re using autoconf&#x2F;automake, you don&#x27;t need to do that.</div><br/></div></div></div></div></div></div><div id="40207713" class="c"><input type="checkbox" id="c-40207713" checked=""/><div class="controls bullet"><span class="by">viraptor</span><span>|</span><a href="#40212976">prev</a><span>|</span><a href="#40220269">next</a><span>|</span><label class="collapse" for="c-40207713">[-]</label><label class="expand" for="c-40207713">[1 more]</label></div><br/><div class="children"><div class="content">That looks pretty good. I&#x27;m glad that the plan is to make this more typing friendly - systemd-run is not good enough for daily usage.</div><br/></div></div><div id="40220269" class="c"><input type="checkbox" id="c-40220269" checked=""/><div class="controls bullet"><span class="by">j16sdiz</span><span>|</span><a href="#40207713">prev</a><span>|</span><a href="#40208225">next</a><span>|</span><label class="collapse" for="c-40220269">[-]</label><label class="expand" for="c-40220269">[1 more]</label></div><br/><div class="children"><div class="content">Oh, great.
Adding another moving parts via IPC to essential system tool.
Sure this would make recovery&#x2F;rescue scenario more &quot;fun&quot;.</div><br/></div></div><div id="40208225" class="c"><input type="checkbox" id="c-40208225" checked=""/><div class="controls bullet"><span class="by">frafra</span><span>|</span><a href="#40220269">prev</a><span>|</span><a href="#40208209">next</a><span>|</span><label class="collapse" for="c-40208225">[-]</label><label class="expand" for="c-40208225">[1 more]</label></div><br/><div class="children"><div class="content">This is not new functionality:<p>&quot;There’s a new tool in systemd, called “run0”. Or actually, it’s not a new tool, it’s actually the long-existing tool “systemd-run”, but when invoked under the “run0” name (via a symlink)&quot;.<p>systemd-run is very useful to run tasks with specific cgroups settings, or at a specific time. It asks for password whenever needed.</div><br/></div></div><div id="40208209" class="c"><input type="checkbox" id="c-40208209" checked=""/><div class="controls bullet"><span class="by">KaiserPro</span><span>|</span><a href="#40208225">prev</a><span>|</span><a href="#40208307">next</a><span>|</span><label class="collapse" for="c-40208209">[-]</label><label class="expand" for="c-40208209">[2 more]</label></div><br/><div class="children"><div class="content">Thats fine, and lord knows we probably need a replacement to sudo.<p>However, sudo needs to be user friendly <i>and</i> fail safe with decent information as to why its failed. Something that service files historically didn&#x27;t do.<p>But, the way it&#x27;s supported also needs to change, it almost certainly needs to be decoupled from systemd&#x27;s release cycle.<p>I hope that we have all learnt from early systemd, and that we all won&#x27;t take a &quot;lets piss on each other&#x27;s chips&quot; approach. I&#x27;m too old you you lot to start flame warring over stuff you&#x27;ll never actually fucking use.</div><br/><div id="40217136" class="c"><input type="checkbox" id="c-40217136" checked=""/><div class="controls bullet"><span class="by">mynameisnoone</span><span>|</span><a href="#40208209">parent</a><span>|</span><a href="#40208307">next</a><span>|</span><label class="collapse" for="c-40217136">[-]</label><label class="expand" for="c-40217136">[1 more]</label></div><br/><div class="children"><div class="content"><i>doas</i> exists but isn&#x27;t universally available but already solves this problem. <i>sudo</i> has too many features and permits excessive configuration, but it also has the convenience of ubiquity. Inventing a third thing <i>tied to systemd</i> is absurd and unnecessary.</div><br/></div></div></div></div><div id="40208307" class="c"><input type="checkbox" id="c-40208307" checked=""/><div class="controls bullet"><span class="by">gpderetta</span><span>|</span><a href="#40208209">prev</a><span>|</span><a href="#40205715">next</a><span>|</span><label class="collapse" for="c-40208307">[-]</label><label class="expand" for="c-40208307">[1 more]</label></div><br/><div class="children"><div class="content">Does systemd read email yet?</div><br/></div></div><div id="40205715" class="c"><input type="checkbox" id="c-40205715" checked=""/><div class="controls bullet"><span class="by">CoolCold</span><span>|</span><a href="#40208307">prev</a><span>|</span><a href="#40219989">next</a><span>|</span><label class="collapse" for="c-40205715">[-]</label><label class="expand" for="c-40205715">[4 more]</label></div><br/><div class="children"><div class="content">Uses polkit.<p>run0, which behaves like sudo, but works entirely differently and is not SUID. Run0 asks the services manager to create a shell or command under the target user’s ID, creating a new PTY, sending data back and forth from the originating TTY and the new PTY.</div><br/><div id="40211789" class="c"><input type="checkbox" id="c-40211789" checked=""/><div class="controls bullet"><span class="by">segasaturn</span><span>|</span><a href="#40205715">parent</a><span>|</span><a href="#40219989">next</a><span>|</span><label class="collapse" for="c-40211789">[-]</label><label class="expand" for="c-40211789">[3 more]</label></div><br/><div class="children"><div class="content">How hard would it be to create a program to send a signal to polkit &quot;impersonating&quot; run0 and obtains a root shell? :)</div><br/><div id="40215921" class="c"><input type="checkbox" id="c-40215921" checked=""/><div class="controls bullet"><span class="by">gh02t</span><span>|</span><a href="#40205715">root</a><span>|</span><a href="#40211789">parent</a><span>|</span><a href="#40220630">next</a><span>|</span><label class="collapse" for="c-40215921">[-]</label><label class="expand" for="c-40215921">[1 more]</label></div><br/><div class="children"><div class="content">Is that even a problem? Any program can shell out to sudo, hence why you shouldn&#x27;t set NOPASSWD in sudoers. Polkit takes in a request on an unprivileged interface, that request is evaluated in privileged code against the set of privilege rules, and then passed the proper capabilities if the rules allow. This includes a mechanism where it can, if desired, prompt a user to enter a password etc to prevent a rogue program silently acquiring root. But even in the worst case, the rogue program is not going to acquire any capabilities that you would not otherwise have as with sudo, and the breakpoint between privileged and unprivileged code is (in theory) more tightly defined and controlled.</div><br/></div></div><div id="40220630" class="c"><input type="checkbox" id="c-40220630" checked=""/><div class="controls bullet"><span class="by">YtvwlD</span><span>|</span><a href="#40205715">root</a><span>|</span><a href="#40211789">parent</a><span>|</span><a href="#40215921">prev</a><span>|</span><a href="#40219989">next</a><span>|</span><label class="collapse" for="c-40220630">[-]</label><label class="expand" for="c-40220630">[1 more]</label></div><br/><div class="children"><div class="content">You&#x27;d need to be root already, so hard.</div><br/></div></div></div></div></div></div><div id="40219989" class="c"><input type="checkbox" id="c-40219989" checked=""/><div class="controls bullet"><span class="by">DeathArrow</span><span>|</span><a href="#40205715">prev</a><span>|</span><a href="#40219202">next</a><span>|</span><label class="collapse" for="c-40219989">[-]</label><label class="expand" for="c-40219989">[1 more]</label></div><br/><div class="children"><div class="content">Someday systemd will going to replace Linux entirely.</div><br/></div></div><div id="40219202" class="c"><input type="checkbox" id="c-40219202" checked=""/><div class="controls bullet"><span class="by">pkulak</span><span>|</span><a href="#40219989">prev</a><span>|</span><a href="#40211055">next</a><span>|</span><label class="collapse" for="c-40219202">[-]</label><label class="expand" for="c-40219202">[1 more]</label></div><br/><div class="children"><div class="content">But can I symlink sudo instead of run0? There are so many scripts that assume sudo, not to mention my own fingers.</div><br/></div></div><div id="40211055" class="c"><input type="checkbox" id="c-40211055" checked=""/><div class="controls bullet"><span class="by">sys_64738</span><span>|</span><a href="#40219202">prev</a><span>|</span><label class="collapse" for="c-40211055">[-]</label><label class="expand" for="c-40211055">[1 more]</label></div><br/><div class="children"><div class="content">How long before humans are systemd compatible?</div><br/></div></div></div></div></div></div></div></body></html>