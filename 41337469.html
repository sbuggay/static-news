<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1724835687388" as="style"/><link rel="stylesheet" href="styles.css?v=1724835687388"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/moxie0/knockknock">Knockknock: Simple, secure, and stealthy port knocking implementation (2012)</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>Bluestein</span> | <span>43 comments</span></div><br/><div><div id="41374956" class="c"><input type="checkbox" id="c-41374956" checked=""/><div class="controls bullet"><span class="by">TheCraiggers</span><span>|</span><a href="#41375295">next</a><span>|</span><label class="collapse" for="c-41374956">[-]</label><label class="expand" for="c-41374956">[24 more]</label></div><br/><div class="children"><div class="content">I used to use lots of port knocking setups to hide my ssh port. That was, until I discovered Tailscale&#x27;s SSH setup. Now my SSH is run over wireguard which is very stealthy.</div><br/><div id="41375016" class="c"><input type="checkbox" id="c-41375016" checked=""/><div class="controls bullet"><span class="by">ray_v</span><span>|</span><a href="#41374956">parent</a><span>|</span><a href="#41375974">next</a><span>|</span><label class="collapse" for="c-41375016">[-]</label><label class="expand" for="c-41375016">[19 more]</label></div><br/><div class="children"><div class="content">Same. It&#x27;s amazing not having my server hammered by malicious actors and hardening it by not even offering the ssh service on the primary network interface</div><br/><div id="41375791" class="c"><input type="checkbox" id="c-41375791" checked=""/><div class="controls bullet"><span class="by">Demiurge</span><span>|</span><a href="#41374956">root</a><span>|</span><a href="#41375016">parent</a><span>|</span><a href="#41375974">next</a><span>|</span><label class="collapse" for="c-41375791">[-]</label><label class="expand" for="c-41375791">[18 more]</label></div><br/><div class="children"><div class="content">Why is it so amazing? Sounds more complicated than fail2ban. I&#x27;ve been installing fail2ban for decades on countless servers, using decent passwords, and have never had SSH get brute-forced. It’s anecdotal, but if you’re getting blocked after three wrong attempts, the chances of a successful attack are pretty small. So, why bother with nonstandard ports or even other protocols?</div><br/><div id="41377284" class="c"><input type="checkbox" id="c-41377284" checked=""/><div class="controls bullet"><span class="by">thyristan</span><span>|</span><a href="#41374956">root</a><span>|</span><a href="#41375791">parent</a><span>|</span><a href="#41375943">next</a><span>|</span><label class="collapse" for="c-41377284">[-]</label><label class="expand" for="c-41377284">[1 more]</label></div><br/><div class="children"><div class="content">fail2ban is dangerous imho. First, it will only block high-frequency maliciousness. If an attacker knows to stay below the default ban frequencies, or change endpoints often enough, they will have free reign. Second, fail2ban is a DoS risk, attackers can spoof connections from an IP they want to switch off. Third, fail2ban relies on parsing of textual logs. This is vulnerable to all kinds of injection attacks (there have been some CVEs to that end) where an attacker injects patterns that the fail2ban heuristics will latch on to, and wildly ban stuff.<p>So you should not rely on fail2ban to keep you safe from anything, and you are introducing DoS risks. Very bad tradeoff imho, making it only good as a last resort.</div><br/></div></div><div id="41375943" class="c"><input type="checkbox" id="c-41375943" checked=""/><div class="controls bullet"><span class="by">sevg</span><span>|</span><a href="#41374956">root</a><span>|</span><a href="#41375791">parent</a><span>|</span><a href="#41377284">prev</a><span>|</span><a href="#41375888">next</a><span>|</span><label class="collapse" for="c-41375943">[-]</label><label class="expand" for="c-41375943">[8 more]</label></div><br/><div class="children"><div class="content">&gt; using decent passwords<p>For anyone else reading this, generally speaking one shouldn&#x27;t use passwords for SSH in 2024. Use public key auth instead.<p>&gt; Why is it so amazing?<p>OpenSSH isn&#x27;t invulnerable. It can have zero-day vulnerabilities. But if it isn&#x27;t even listening on the public internet, that&#x27;s one less attack vector.</div><br/><div id="41376028" class="c"><input type="checkbox" id="c-41376028" checked=""/><div class="controls bullet"><span class="by">Demiurge</span><span>|</span><a href="#41374956">root</a><span>|</span><a href="#41375943">parent</a><span>|</span><a href="#41375888">next</a><span>|</span><label class="collapse" for="c-41376028">[-]</label><label class="expand" for="c-41376028">[7 more]</label></div><br/><div class="children"><div class="content">Generally speaking, you’re right, but I have servers I want to be able to access from anywhere, because I support some app running on them. Until 1password agent setup, having keys only and password disabled was too difficult, and yet, also unnecessary.<p>Zero day ssh bug? I’m not NSA, how often does this happen to random servers?? Again, never have been hacked in more than 20 years. Still support some servers with ~6 year uptime.</div><br/><div id="41376255" class="c"><input type="checkbox" id="c-41376255" checked=""/><div class="controls bullet"><span class="by">kalaksi</span><span>|</span><a href="#41374956">root</a><span>|</span><a href="#41376028">parent</a><span>|</span><a href="#41376080">next</a><span>|</span><label class="collapse" for="c-41376255">[-]</label><label class="expand" for="c-41376255">[1 more]</label></div><br/><div class="children"><div class="content">Some of them may then be vulnerable. This is the recent SSH vulnerability: <a href="https:&#x2F;&#x2F;arstechnica.com&#x2F;security&#x2F;2024&#x2F;07&#x2F;regresshion-vulnerability-in-openssh-gives-attackers-root-on-linux&#x2F;" rel="nofollow">https:&#x2F;&#x2F;arstechnica.com&#x2F;security&#x2F;2024&#x2F;07&#x2F;regresshion-vulnera...</a></div><br/></div></div><div id="41376080" class="c"><input type="checkbox" id="c-41376080" checked=""/><div class="controls bullet"><span class="by">sevg</span><span>|</span><a href="#41374956">root</a><span>|</span><a href="#41376028">parent</a><span>|</span><a href="#41376255">prev</a><span>|</span><a href="#41375888">next</a><span>|</span><label class="collapse" for="c-41376080">[-]</label><label class="expand" for="c-41376080">[5 more]</label></div><br/><div class="children"><div class="content">Ah yes, the &quot;I&#x27;ve never been hacked so I must be secure&quot; argument ;)<p>Unfortunately, you&#x27;re not convincing anyone. Amongst the security conscious, multi-year uptimes are the opposite of a brag. And it doesn&#x27;t matter how you spin it, key-based auth is best practice, as is reducing your attack surface.<p>It seems that some of these measures are too difficult for you, and that&#x27;s fine. But trying to argue that the measures are pointless is just false.</div><br/><div id="41376113" class="c"><input type="checkbox" id="c-41376113" checked=""/><div class="controls bullet"><span class="by">Demiurge</span><span>|</span><a href="#41374956">root</a><span>|</span><a href="#41376080">parent</a><span>|</span><a href="#41376628">next</a><span>|</span><label class="collapse" for="c-41376113">[-]</label><label class="expand" for="c-41376113">[3 more]</label></div><br/><div class="children"><div class="content">I’m not trying to convince anyone, I’m trying to understand what drives sone security focused people to make things more complicated and harder without practical justification.<p>So, are you NSA? How many servers have you lost to the password attack vector?</div><br/><div id="41376239" class="c"><input type="checkbox" id="c-41376239" checked=""/><div class="controls bullet"><span class="by">sevg</span><span>|</span><a href="#41374956">root</a><span>|</span><a href="#41376113">parent</a><span>|</span><a href="#41376628">next</a><span>|</span><label class="collapse" for="c-41376239">[-]</label><label class="expand" for="c-41376239">[2 more]</label></div><br/><div class="children"><div class="content">&gt; I&#x27;m trying to understand<p>Well on the one hand you make it seem like you&#x27;re here for genuine adult conversation.<p>On the other hand you call people that disagree with you the &quot;NSA&quot;.<p>And that is the point this conservation has outlived its usefulness :)</div><br/><div id="41377247" class="c"><input type="checkbox" id="c-41377247" checked=""/><div class="controls bullet"><span class="by">Demiurge</span><span>|</span><a href="#41374956">root</a><span>|</span><a href="#41376239">parent</a><span>|</span><a href="#41376628">next</a><span>|</span><label class="collapse" for="c-41377247">[-]</label><label class="expand" for="c-41377247">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, it might read like that, but it also is how I feel. If I was running a crypto farm, or if I was doing security research, I would have different levels of concerns.<p>But, in fact, hosting a competitive gsmijg website, I did experience common brute force and and other types of attacks, but fail2ban did foil them for years :)<p>None of the attackers were ever sophisticated enough to come up with a successful attack (that I know of :))<p>The point is, should everything be do all the best practices as if they were equally likely to be attacked?<p>It’s like saying that everyone should also have a faraday cage house, and electrified fences, it is the best practice, after all.</div><br/></div></div></div></div></div></div><div id="41376628" class="c"><input type="checkbox" id="c-41376628" checked=""/><div class="controls bullet"><span class="by">nine_k</span><span>|</span><a href="#41374956">root</a><span>|</span><a href="#41376080">parent</a><span>|</span><a href="#41376113">prev</a><span>|</span><a href="#41375888">next</a><span>|</span><label class="collapse" for="c-41376628">[-]</label><label class="expand" for="c-41376628">[1 more]</label></div><br/><div class="children"><div class="content">OK, let&#x27;s assume SSH is configured to accept one 30-character random password as an escape hatch. All normal auth is done using pre-shared keys. What are the risks, from your point of view?<p>From my POV, the principal risk is opsec mishaps, which may lead to leaking a public key or a password alike.</div><br/></div></div></div></div></div></div></div></div><div id="41375888" class="c"><input type="checkbox" id="c-41375888" checked=""/><div class="controls bullet"><span class="by">tptacek</span><span>|</span><a href="#41374956">root</a><span>|</span><a href="#41375791">parent</a><span>|</span><a href="#41375943">prev</a><span>|</span><a href="#41375951">next</a><span>|</span><label class="collapse" for="c-41375888">[-]</label><label class="expand" for="c-41375888">[6 more]</label></div><br/><div class="children"><div class="content">Getting your SSH brute-forced shouldn&#x27;t be possible with or without screening, because absolutely nobody in 2024 should be using passwords with SSH to begin with. This is the most frustrating thing about fail2ban cargo culting; fail2ban hasn&#x27;t made sense since the era of multiuser Unix shell accounts, which is 2 decades in the past.</div><br/><div id="41375965" class="c"><input type="checkbox" id="c-41375965" checked=""/><div class="controls bullet"><span class="by">fragmede</span><span>|</span><a href="#41374956">root</a><span>|</span><a href="#41375888">parent</a><span>|</span><a href="#41375951">next</a><span>|</span><label class="collapse" for="c-41375965">[-]</label><label class="expand" for="c-41375965">[5 more]</label></div><br/><div class="children"><div class="content">You&#x27;ve been mugged in a foreign country and have no phone, no wallet, or keys. How do you break back into your digital life? Everything&#x27;s got two factor and you&#x27;ve not got your something-you-have factor.<p>I&#x27;m all for almost all my servers not accepting passwords, but it&#x27;s a scenario that I think about, so there&#x27;s one server running ssh on an non-default port that takes a password so I can break back in using only what&#x27;s in my head (hopefully I don&#x27;t get hit so hard in this mugging so as to forget what I&#x27;ve memorized).</div><br/><div id="41376008" class="c"><input type="checkbox" id="c-41376008" checked=""/><div class="controls bullet"><span class="by">tptacek</span><span>|</span><a href="#41374956">root</a><span>|</span><a href="#41375965">parent</a><span>|</span><a href="#41375951">next</a><span>|</span><label class="collapse" for="c-41376008">[-]</label><label class="expand" for="c-41376008">[4 more]</label></div><br/><div class="children"><div class="content">This is not a good reason to put passwords on your server SSH accounts. Encrypt an SSH key you can recover.</div><br/><div id="41376055" class="c"><input type="checkbox" id="c-41376055" checked=""/><div class="controls bullet"><span class="by">Demiurge</span><span>|</span><a href="#41374956">root</a><span>|</span><a href="#41376008">parent</a><span>|</span><a href="#41375951">next</a><span>|</span><label class="collapse" for="c-41376055">[-]</label><label class="expand" for="c-41376055">[3 more]</label></div><br/><div class="children"><div class="content">Really, what are the chances if you have a <i>decent</i> password and 3 attempts per 24 hours? Why would I take something %0.000000001 likely and make it %0.0000000000000000000001 likely if there is an added risk of %0.001 my house burns down and I will lose all my access?</div><br/><div id="41376745" class="c"><input type="checkbox" id="c-41376745" checked=""/><div class="controls bullet"><span class="by">mkatx</span><span>|</span><a href="#41374956">root</a><span>|</span><a href="#41376055">parent</a><span>|</span><a href="#41375951">next</a><span>|</span><label class="collapse" for="c-41376745">[-]</label><label class="expand" for="c-41376745">[2 more]</label></div><br/><div class="children"><div class="content">Not to argue any of your other points, except.. you could get a lot more than 3 tries with a rotating proxy or a botnet.</div><br/><div id="41377213" class="c"><input type="checkbox" id="c-41377213" checked=""/><div class="controls bullet"><span class="by">Demiurge</span><span>|</span><a href="#41374956">root</a><span>|</span><a href="#41376745">parent</a><span>|</span><a href="#41375951">next</a><span>|</span><label class="collapse" for="c-41377213">[-]</label><label class="expand" for="c-41377213">[1 more]</label></div><br/><div class="children"><div class="content">That is also true. That’s a good reason to block certain IP segments.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="41375951" class="c"><input type="checkbox" id="c-41375951" checked=""/><div class="controls bullet"><span class="by">jjeaff</span><span>|</span><a href="#41374956">root</a><span>|</span><a href="#41375791">parent</a><span>|</span><a href="#41375888">prev</a><span>|</span><a href="#41375974">next</a><span>|</span><label class="collapse" for="c-41375951">[-]</label><label class="expand" for="c-41375951">[2 more]</label></div><br/><div class="children"><div class="content">It can be difficult to pass some PCI compliance tests if your ssh port is available to the world. OpenSSH also leaks some information about your server unless you recompile it with those options removed.</div><br/><div id="41376125" class="c"><input type="checkbox" id="c-41376125" checked=""/><div class="controls bullet"><span class="by">Demiurge</span><span>|</span><a href="#41374956">root</a><span>|</span><a href="#41375951">parent</a><span>|</span><a href="#41375974">next</a><span>|</span><label class="collapse" for="c-41376125">[-]</label><label class="expand" for="c-41376125">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, that makes sense, sometimes orgs or audits have requirements.</div><br/></div></div></div></div></div></div></div></div><div id="41375974" class="c"><input type="checkbox" id="c-41375974" checked=""/><div class="controls bullet"><span class="by">jjeaff</span><span>|</span><a href="#41374956">parent</a><span>|</span><a href="#41375016">prev</a><span>|</span><a href="#41375411">next</a><span>|</span><label class="collapse" for="c-41375974">[-]</label><label class="expand" for="c-41375974">[2 more]</label></div><br/><div class="children"><div class="content">I also love tailscale&#x27;s ssh option. I have been using it for a few months now. But I&#x27;m a little bit scared that if the tailscale daemon crashes, I&#x27;ll lose access to my server.</div><br/><div id="41376233" class="c"><input type="checkbox" id="c-41376233" checked=""/><div class="controls bullet"><span class="by">dvzk</span><span>|</span><a href="#41374956">root</a><span>|</span><a href="#41375974">parent</a><span>|</span><a href="#41375411">next</a><span>|</span><label class="collapse" for="c-41376233">[-]</label><label class="expand" for="c-41376233">[1 more]</label></div><br/><div class="children"><div class="content">You would also be locked out if you ran OpenSSH on Tailscale&#x27;s autoconfigured WG interface. Setup WireGuard manually, or enable serial console login, or make sure your servers are dispensible. Tailscale (and Nebula) mostly alleviate the last case.</div><br/></div></div></div></div></div></div><div id="41375295" class="c"><input type="checkbox" id="c-41375295" checked=""/><div class="controls bullet"><span class="by">TZubiri</span><span>|</span><a href="#41374956">prev</a><span>|</span><a href="#41376974">next</a><span>|</span><label class="collapse" for="c-41375295">[-]</label><label class="expand" for="c-41375295">[3 more]</label></div><br/><div class="children"><div class="content">Port knocking is supposed to be a last, self made, no dependency, cheap, cute layer of defense.<p>Installing external dependencies, even from someone trusted like Moxie, is counterproductive. The more system you have the more vulnerabilities, less is more.<p>I&#x27;ve actually been fired over this, we were building a product, and I implemented port knocking in python. Lead said it was unsecure and wanted to install an encrypted port knocking protocol.<p>EDIT: Just read the readme, Moxie is saying the same thing verbatim lol, we cool</div><br/><div id="41375375" class="c"><input type="checkbox" id="c-41375375" checked=""/><div class="controls bullet"><span class="by">teruakohatu</span><span>|</span><a href="#41375295">parent</a><span>|</span><a href="#41376974">next</a><span>|</span><label class="collapse" for="c-41375375">[-]</label><label class="expand" for="c-41375375">[2 more]</label></div><br/><div class="children"><div class="content">&gt; I&#x27;ve actually been fired over this,<p>Why exactly where you fired? Because you used python?</div><br/><div id="41375408" class="c"><input type="checkbox" id="c-41375408" checked=""/><div class="controls bullet"><span class="by">TZubiri</span><span>|</span><a href="#41375295">root</a><span>|</span><a href="#41375375">parent</a><span>|</span><a href="#41376974">next</a><span>|</span><label class="collapse" for="c-41375408">[-]</label><label class="expand" for="c-41375408">[1 more]</label></div><br/><div class="children"><div class="content">Didn&#x27;t follow instructions to the T. E.g: install a port knocker vs implementing a port knocker in python</div><br/></div></div></div></div></div></div><div id="41376974" class="c"><input type="checkbox" id="c-41376974" checked=""/><div class="controls bullet"><span class="by">ndsipa_pomu</span><span>|</span><a href="#41375295">prev</a><span>|</span><a href="#41375025">next</a><span>|</span><label class="collapse" for="c-41376974">[-]</label><label class="expand" for="c-41376974">[1 more]</label></div><br/><div class="children"><div class="content">Hmmm, can&#x27;t see any mentions of fwknop <a href="https:&#x2F;&#x2F;www.cipherdyne.org&#x2F;fwknop&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.cipherdyne.org&#x2F;fwknop&#x2F;</a></div><br/></div></div><div id="41375025" class="c"><input type="checkbox" id="c-41375025" checked=""/><div class="controls bullet"><span class="by">commercialnix</span><span>|</span><a href="#41376974">prev</a><span>|</span><a href="#41376200">next</a><span>|</span><label class="collapse" for="c-41375025">[-]</label><label class="expand" for="c-41375025">[1 more]</label></div><br/><div class="children"><div class="content">Knockknock was one of my favorite things back in the day. I love Moxie&#x27;s mindset. Nowadays I put Wireguard in front of everything.</div><br/></div></div><div id="41376200" class="c"><input type="checkbox" id="c-41376200" checked=""/><div class="controls bullet"><span class="by">exabrial</span><span>|</span><a href="#41375025">prev</a><span>|</span><a href="#41376736">next</a><span>|</span><label class="collapse" for="c-41376200">[-]</label><label class="expand" for="c-41376200">[1 more]</label></div><br/><div class="children"><div class="content">I mentioned this awhile back:<p>Port Knocking, but the port combination is based on TOTP protocol and has a &quot;use once&quot; feature. Basically rotating protocols :D</div><br/></div></div><div id="41376736" class="c"><input type="checkbox" id="c-41376736" checked=""/><div class="controls bullet"><span class="by">thomashabets2</span><span>|</span><a href="#41376200">prev</a><span>|</span><a href="#41374921">next</a><span>|</span><label class="collapse" for="c-41376736">[-]</label><label class="expand" for="c-41376736">[2 more]</label></div><br/><div class="children"><div class="content">Port knocking is a stupid concept. You&#x27;re sending a password (or TOTP) in plaintext. Just send an UDP packet with the password in it, and be honest about it.<p>Just to prove a point, I made two port knockers using just an UDP packet in a few lines of bash. One uses OpenBSD&#x27;s signify to sign unlock requests, and the other is on the server side just nftables <i>config</i> to check a static UDP packet, not even a binary.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;ThomasHabets&#x2F;udportknock&#x2F;blob&#x2F;master&#x2F;gen-nftables.sh">https:&#x2F;&#x2F;github.com&#x2F;ThomasHabets&#x2F;udportknock&#x2F;blob&#x2F;master&#x2F;gen-...</a>
Modulating TCP SYN packets? Eyeroll.</div><br/><div id="41377148" class="c"><input type="checkbox" id="c-41377148" checked=""/><div class="controls bullet"><span class="by">Joker_vD</span><span>|</span><a href="#41376736">parent</a><span>|</span><a href="#41374921">next</a><span>|</span><label class="collapse" for="c-41377148">[-]</label><label class="expand" for="c-41377148">[1 more]</label></div><br/><div class="children"><div class="content">From what I understand, this project does not send a &quot;password&quot;: its impossible to replay the requests.</div><br/></div></div></div></div><div id="41374921" class="c"><input type="checkbox" id="c-41374921" checked=""/><div class="controls bullet"><span class="by">beeman</span><span>|</span><a href="#41376736">prev</a><span>|</span><a href="#41375702">next</a><span>|</span><label class="collapse" for="c-41374921">[-]</label><label class="expand" for="c-41374921">[1 more]</label></div><br/><div class="children"><div class="content">A similar tool that&#x27;s actively developed was posted a few days ago.<p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41327735">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=41327735</a><p>&gt; Show HN: Ruroco – like port knocking, but better<p><a href="https:&#x2F;&#x2F;github.com&#x2F;beac0n&#x2F;ruroco">https:&#x2F;&#x2F;github.com&#x2F;beac0n&#x2F;ruroco</a></div><br/></div></div><div id="41375702" class="c"><input type="checkbox" id="c-41375702" checked=""/><div class="controls bullet"><span class="by">fulafel</span><span>|</span><a href="#41374921">prev</a><span>|</span><a href="#41375672">next</a><span>|</span><label class="collapse" for="c-41375702">[-]</label><label class="expand" for="c-41375702">[1 more]</label></div><br/><div class="children"><div class="content">As a workaround for vulnerabilities in your ssh implementation (&quot;Why Is This Even Necessary&quot;) this seems timely given the recent OpenSSH flaw. I wonder if this still works after 12 years of no commits.<p>spiped has been another tool sometimes recommended for addressing this and seems more maintained.</div><br/></div></div><div id="41375672" class="c"><input type="checkbox" id="c-41375672" checked=""/><div class="controls bullet"><span class="by">andrewstuart</span><span>|</span><a href="#41375702">prev</a><span>|</span><a href="#41374879">next</a><span>|</span><label class="collapse" for="c-41375672">[-]</label><label class="expand" for="c-41375672">[6 more]</label></div><br/><div class="children"><div class="content">Is port knocking really a security thing or is it theater?</div><br/><div id="41375744" class="c"><input type="checkbox" id="c-41375744" checked=""/><div class="controls bullet"><span class="by">orev</span><span>|</span><a href="#41375672">parent</a><span>|</span><a href="#41377335">next</a><span>|</span><label class="collapse" for="c-41375744">[-]</label><label class="expand" for="c-41375744">[2 more]</label></div><br/><div class="children"><div class="content">Security is built in layers. Is it theoretically possible for someone on the network to observe the knock sequence? Yes. Is it likely to happen in any but the most adversarial of conditions? No. And if it’s implemented in a cryptographically secure way, like fwknop, then it’s really very good.</div><br/><div id="41375894" class="c"><input type="checkbox" id="c-41375894" checked=""/><div class="controls bullet"><span class="by">tptacek</span><span>|</span><a href="#41375672">root</a><span>|</span><a href="#41375744">parent</a><span>|</span><a href="#41377335">next</a><span>|</span><label class="collapse" for="c-41375894">[-]</label><label class="expand" for="c-41375894">[1 more]</label></div><br/><div class="children"><div class="content">One of the oldest canards in security: &quot;defense in depth&quot;, &quot;security is built in layers&quot;, which you can use to justify any performative measure.</div><br/></div></div></div></div><div id="41377335" class="c"><input type="checkbox" id="c-41377335" checked=""/><div class="controls bullet"><span class="by">Joel_Mckay</span><span>|</span><a href="#41375672">parent</a><span>|</span><a href="#41375744">prev</a><span>|</span><a href="#41376273">next</a><span>|</span><label class="collapse" for="c-41377335">[-]</label><label class="expand" for="c-41377335">[1 more]</label></div><br/><div class="children"><div class="content">Prevents some types of distributed slow brute force attack, port scans, and 99.98% of nuisance traffic on the ports.   Most effective when interleaved with port-sequence-close and port-trip-wire firewall random-delayed black-hole rules. Note login time window restrictions and fail2ban should also be active.<p>Obfuscating your ssh traffic over SSL or Iodine tunnel traffic can punch through many sandbox networks that try to jack secure traffic.<p>People will argue time constrained tap sequences (think Morse code) are also easily logged with a sniffer, but in general fail2ban rules can email you as the ssh noise should be nearly nonexistent.<p>i.e. One can determine if a route&#x2F;VPN is attacking secure traffic links, or has uncanny insight into internal security policy.<p>Some people post bad policies for setting up ssh, email, and web servers...<p>Setting up knocking should be the first step on a new server image, as many folks lock themselves out the first run (and on some occasions need to re-image the host). =3</div><br/></div></div><div id="41376273" class="c"><input type="checkbox" id="c-41376273" checked=""/><div class="controls bullet"><span class="by">mscdex</span><span>|</span><a href="#41375672">parent</a><span>|</span><a href="#41377335">prev</a><span>|</span><a href="#41375893">next</a><span>|</span><label class="collapse" for="c-41376273">[-]</label><label class="expand" for="c-41376273">[1 more]</label></div><br/><div class="children"><div class="content">In my opinion it&#x27;s primarily for less noisy logs.</div><br/></div></div><div id="41375893" class="c"><input type="checkbox" id="c-41375893" checked=""/><div class="controls bullet"><span class="by">tptacek</span><span>|</span><a href="#41375672">parent</a><span>|</span><a href="#41376273">prev</a><span>|</span><a href="#41374879">next</a><span>|</span><label class="collapse" for="c-41375893">[-]</label><label class="expand" for="c-41375893">[1 more]</label></div><br/><div class="children"><div class="content">Pure theater.</div><br/></div></div></div></div><div id="41374879" class="c"><input type="checkbox" id="c-41374879" checked=""/><div class="controls bullet"><span class="by">ranger_danger</span><span>|</span><a href="#41375672">prev</a><span>|</span><a href="#41376014">next</a><span>|</span><label class="collapse" for="c-41374879">[-]</label><label class="expand" for="c-41374879">[1 more]</label></div><br/><div class="children"><div class="content">this is from 2012, must be run as root, uses python 2, and requires &quot;hping3&quot;</div><br/></div></div></div></div></div></div></div></body></html>