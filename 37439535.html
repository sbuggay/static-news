<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1694250058644" as="style"/><link rel="stylesheet" href="styles.css?v=1694250058644"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://maizure.org/projects/decoded-gnu-coreutils/">Decoded: GNU Coreutils (2018)</a> <span class="domain">(<a href="https://maizure.org">maizure.org</a>)</span></div><div class="subtext"><span>mr_o47</span> | <span>68 comments</span></div><br/><div><div id="37441160" class="c"><input type="checkbox" id="c-37441160" checked=""/><div class="controls bullet"><span class="by">1vuio0pswjnm7</span><span>|</span><a href="#37441645">next</a><span>|</span><label class="collapse" for="c-37441160">[-]</label><label class="expand" for="c-37441160">[11 more]</label></div><br/><div class="children"><div class="content">&quot;Many of these utilities are approaching 30 years old and include revisions by many people over the years.&quot;<p>&quot;They are not designed for long life or to scale beyond their role.&quot;<p>Would love to see some examples from the author of programs he believes are &quot;designed for long life&quot; that have been around 30 years.<p>Or even ones he thinks will be around for 30 years.</div><br/><div id="37442033" class="c"><input type="checkbox" id="c-37442033" checked=""/><div class="controls bullet"><span class="by">matheusmoreira</span><span>|</span><a href="#37441160">parent</a><span>|</span><a href="#37441507">next</a><span>|</span><label class="collapse" for="c-37442033">[-]</label><label class="expand" for="c-37442033">[7 more]</label></div><br/><div class="children"><div class="content">Well, what exactly is their role? Is there a limit to what we can do with these things?<p>To test a little programming language I made, I created a testing framework with bash and coreutils. I felt guilty about not using a &quot;proper&quot; language at first but it works so well. In parallel too.<p>I found that the the only thing I couldn&#x27;t test was the argv[0] of the program. No matter how much I twisted the programs, I couldn&#x27;t get them to do exactly what I wanted. So I sent a feature request and a patch to coreutils to give env this feature:<p><a href="https:&#x2F;&#x2F;lists.gnu.org&#x2F;archive&#x2F;html&#x2F;coreutils&#x2F;2023-08&#x2F;msg00060.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;lists.gnu.org&#x2F;archive&#x2F;html&#x2F;coreutils&#x2F;2023-08&#x2F;msg0006...</a><p>Looks like it&#x27;s gonna make it in. A new feature for this old program.</div><br/><div id="37443271" class="c"><input type="checkbox" id="c-37443271" checked=""/><div class="controls bullet"><span class="by">hereonout2</span><span>|</span><a href="#37441160">root</a><span>|</span><a href="#37442033">parent</a><span>|</span><a href="#37442381">next</a><span>|</span><label class="collapse" for="c-37443271">[-]</label><label class="expand" for="c-37443271">[2 more]</label></div><br/><div class="children"><div class="content">Hey if this makes it congratulations! I&#x27;ve never contributed to something so ubiquitous before but often thought how satisfying it&#x27;d be.<p>Like in years down the line, maybe as you retire and hang up your keyboard, you could sit back and smile as you realise your code is still deployed on millions, possibly billions of devices? That the code could far outlast 99.9% of code code anyone has ever written?</div><br/><div id="37443315" class="c"><input type="checkbox" id="c-37443315" checked=""/><div class="controls bullet"><span class="by">matheusmoreira</span><span>|</span><a href="#37441160">root</a><span>|</span><a href="#37443271">parent</a><span>|</span><a href="#37442381">next</a><span>|</span><label class="collapse" for="c-37443315">[-]</label><label class="expand" for="c-37443315">[1 more]</label></div><br/><div class="children"><div class="content">Well, I don&#x27;t know if they&#x27;re gonna use my patch. I reported a bug to gpg once and sent a patch in but in the end the maintainer rearchitected the code and gave me attribution. Perhaps they require copyright reassignment?<p>I can&#x27;t deny I&#x27;m gonna be really happy if they do use it.</div><br/></div></div></div></div><div id="37442381" class="c"><input type="checkbox" id="c-37442381" checked=""/><div class="controls bullet"><span class="by">1vuio0pswjnm7</span><span>|</span><a href="#37441160">root</a><span>|</span><a href="#37442033">parent</a><span>|</span><a href="#37443271">prev</a><span>|</span><a href="#37443038">next</a><span>|</span><label class="collapse" for="c-37442381">[-]</label><label class="expand" for="c-37442381">[2 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;cr.yp.to&#x2F;ucspi-tcp&#x2F;argv0.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;cr.yp.to&#x2F;ucspi-tcp&#x2F;argv0.html</a></div><br/><div id="37443372" class="c"><input type="checkbox" id="c-37443372" checked=""/><div class="controls bullet"><span class="by">matheusmoreira</span><span>|</span><a href="#37441160">root</a><span>|</span><a href="#37442381">parent</a><span>|</span><a href="#37443038">next</a><span>|</span><label class="collapse" for="c-37443372">[-]</label><label class="expand" for="c-37443372">[1 more]</label></div><br/><div class="children"><div class="content">Not part of coreutils though. I want to keep my dependencies to a minimum. The GNU coreutils are ubiquitous.</div><br/></div></div></div></div><div id="37443038" class="c"><input type="checkbox" id="c-37443038" checked=""/><div class="controls bullet"><span class="by">nrabulinski</span><span>|</span><a href="#37441160">root</a><span>|</span><a href="#37442033">parent</a><span>|</span><a href="#37442381">prev</a><span>|</span><a href="#37441507">next</a><span>|</span><label class="collapse" for="c-37443038">[-]</label><label class="expand" for="c-37443038">[2 more]</label></div><br/><div class="children"><div class="content">You could’ve used bash’s exec which allows specifying argv0</div><br/><div id="37443273" class="c"><input type="checkbox" id="c-37443273" checked=""/><div class="controls bullet"><span class="by">matheusmoreira</span><span>|</span><a href="#37441160">root</a><span>|</span><a href="#37443038">parent</a><span>|</span><a href="#37441507">next</a><span>|</span><label class="collapse" for="c-37443273">[-]</label><label class="expand" for="c-37443273">[1 more]</label></div><br/><div class="children"><div class="content">I did try it. Didn&#x27;t work in combination with env.<p><pre><code>  # Sets PWD and SHLVL and the latter apparently can&#x27;t be unset
  env -i VARIABLE=value bash -c &#x27;exec -a program .&#x2F;program&#x27;

  # Sets env&#x27;s argv0, not my program&#x27;s
  bash -c &#x27;exec -a program env -i VARIABLE=value .&#x2F;program&#x27;

  # SHLVL still set
  env -i bash -c &#x27;unset SHLVL; unset PWD; exec -a program .&#x2F;program&#x27;

  # SHLVL and _ still set
  env -i zsh -c &#x27;unset _ HOME PWD LOGNAME SHLVL OLDPWD; ARGV0=program
</code></pre>
The original discussions, linked from my post:<p><a href="https:&#x2F;&#x2F;lists.gnu.org&#x2F;archive&#x2F;html&#x2F;coreutils&#x2F;2023-03&#x2F;msg00002.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;lists.gnu.org&#x2F;archive&#x2F;html&#x2F;coreutils&#x2F;2023-03&#x2F;msg0000...</a><p><a href="https:&#x2F;&#x2F;lists.gnu.org&#x2F;archive&#x2F;html&#x2F;coreutils&#x2F;2023-03&#x2F;msg00010.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;lists.gnu.org&#x2F;archive&#x2F;html&#x2F;coreutils&#x2F;2023-03&#x2F;msg0001...</a></div><br/></div></div></div></div></div></div><div id="37441507" class="c"><input type="checkbox" id="c-37441507" checked=""/><div class="controls bullet"><span class="by">remexre</span><span>|</span><a href="#37441160">parent</a><span>|</span><a href="#37442033">prev</a><span>|</span><a href="#37441506">next</a><span>|</span><label class="collapse" for="c-37441507">[-]</label><label class="expand" for="c-37441507">[2 more]</label></div><br/><div class="children"><div class="content">I think that was meant to be understood in context as &quot;meant to be actively developed&quot; (as opposed to maintained) for a long time. The practices the author lists are ones that in larger programs would typically be criticized for damaging maintainability as the program grows.</div><br/><div id="37442655" class="c"><input type="checkbox" id="c-37442655" checked=""/><div class="controls bullet"><span class="by">hulitu</span><span>|</span><a href="#37441160">root</a><span>|</span><a href="#37441507">parent</a><span>|</span><a href="#37441506">next</a><span>|</span><label class="collapse" for="c-37442655">[-]</label><label class="expand" for="c-37442655">[1 more]</label></div><br/><div class="children"><div class="content">So to be rewritten from scratch every 2 years. 
CADT strikes again. &#x2F;s</div><br/></div></div></div></div><div id="37441506" class="c"><input type="checkbox" id="c-37441506" checked=""/><div class="controls bullet"><span class="by">johnmaguire</span><span>|</span><a href="#37441160">parent</a><span>|</span><a href="#37441507">prev</a><span>|</span><a href="#37441645">next</a><span>|</span><label class="collapse" for="c-37441506">[-]</label><label class="expand" for="c-37441506">[1 more]</label></div><br/><div class="children"><div class="content">I think perhaps the author meant &quot;long development life.&quot; As in, they are basically write-once utilities. Part of the benefit of doing &quot;one thing well.&quot;</div><br/></div></div></div></div><div id="37441645" class="c"><input type="checkbox" id="c-37441645" checked=""/><div class="controls bullet"><span class="by">asicsp</span><span>|</span><a href="#37441160">prev</a><span>|</span><a href="#37440521">next</a><span>|</span><label class="collapse" for="c-37441645">[-]</label><label class="expand" for="c-37441645">[1 more]</label></div><br/><div class="children"><div class="content">See also:<p>* How the GNU coreutils are tested: <a href="https:&#x2F;&#x2F;www.pixelbeat.org&#x2F;docs&#x2F;coreutils-testing.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.pixelbeat.org&#x2F;docs&#x2F;coreutils-testing.html</a><p>* Exploration of each of the coreutils commands: <a href="https:&#x2F;&#x2F;ratfactor.com&#x2F;slackware&#x2F;pkgblog&#x2F;coreutils" rel="nofollow noreferrer">https:&#x2F;&#x2F;ratfactor.com&#x2F;slackware&#x2F;pkgblog&#x2F;coreutils</a><p>* Command line text processing with GNU Coreutils: <a href="https:&#x2F;&#x2F;learnbyexample.github.io&#x2F;cli_text_processing_coreutils&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;learnbyexample.github.io&#x2F;cli_text_processing_coreuti...</a> (my ebook that covers 20+ text processing tools)</div><br/></div></div><div id="37440521" class="c"><input type="checkbox" id="c-37440521" checked=""/><div class="controls bullet"><span class="by">dang</span><span>|</span><a href="#37441645">prev</a><span>|</span><a href="#37442947">next</a><span>|</span><label class="collapse" for="c-37440521">[-]</label><label class="expand" for="c-37440521">[1 more]</label></div><br/><div class="children"><div class="content">Related:<p><i>Decoded: GNU Coreutils (2018)</i> - <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=29871037">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=29871037</a> - Jan 2022 (7 comments)<p><i>Decoded: GNU coreutils (2019)</i> - <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=26411908">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=26411908</a> - March 2021 (38 comments)<p><i>Decoded: GNU Coreutils</i> - <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=20328650">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=20328650</a> - July 2019 (55 comments)</div><br/></div></div><div id="37442947" class="c"><input type="checkbox" id="c-37442947" checked=""/><div class="controls bullet"><span class="by">jmholla</span><span>|</span><a href="#37440521">prev</a><span>|</span><a href="#37443008">next</a><span>|</span><label class="collapse" for="c-37442947">[-]</label><label class="expand" for="c-37442947">[1 more]</label></div><br/><div class="children"><div class="content">I noticed at least one error, if the author is here. The short description on the shred page[0] is actually the description for csplit[1]. It should be something along the lines of &quot;overwrite a file to hide its contents, and optionally delete it&quot;.<p>[0]: <a href="https:&#x2F;&#x2F;maizure.org&#x2F;projects&#x2F;decoded-gnu-coreutils&#x2F;shred.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;maizure.org&#x2F;projects&#x2F;decoded-gnu-coreutils&#x2F;shred.htm...</a>
[1]: <a href="https:&#x2F;&#x2F;maizure.org&#x2F;projects&#x2F;decoded-gnu-coreutils&#x2F;csplit.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;maizure.org&#x2F;projects&#x2F;decoded-gnu-coreutils&#x2F;csplit.ht...</a></div><br/></div></div><div id="37443008" class="c"><input type="checkbox" id="c-37443008" checked=""/><div class="controls bullet"><span class="by">boppo1</span><span>|</span><a href="#37442947">prev</a><span>|</span><a href="#37440189">next</a><span>|</span><label class="collapse" for="c-37443008">[-]</label><label class="expand" for="c-37443008">[3 more]</label></div><br/><div class="children"><div class="content">As a novice programmer trying to sharpen my grasp of how to fruitfully apply DS&amp;A, are there any of these I should look at in particular?</div><br/><div id="37443024" class="c"><input type="checkbox" id="c-37443024" checked=""/><div class="controls bullet"><span class="by">nrabulinski</span><span>|</span><a href="#37443008">parent</a><span>|</span><a href="#37440189">next</a><span>|</span><label class="collapse" for="c-37443024">[-]</label><label class="expand" for="c-37443024">[2 more]</label></div><br/><div class="children"><div class="content">Maybe I’m misunderstanding but what do data structures and algorithms have to do with CLI tools?</div><br/><div id="37443181" class="c"><input type="checkbox" id="c-37443181" checked=""/><div class="controls bullet"><span class="by">webmobdev</span><span>|</span><a href="#37443008">root</a><span>|</span><a href="#37443024">parent</a><span>|</span><a href="#37440189">next</a><span>|</span><label class="collapse" for="c-37443181">[-]</label><label class="expand" for="c-37443181">[1 more]</label></div><br/><div class="children"><div class="content">Don&#x27;t CLI tools use data structures and algorithms?</div><br/></div></div></div></div></div></div><div id="37440189" class="c"><input type="checkbox" id="c-37440189" checked=""/><div class="controls bullet"><span class="by">version_five</span><span>|</span><a href="#37443008">prev</a><span>|</span><a href="#37440652">next</a><span>|</span><label class="collapse" for="c-37440189">[-]</label><label class="expand" for="c-37440189">[36 more]</label></div><br/><div class="children"><div class="content">Cool, I didn&#x27;t know this existed. I think simple ones like `yes` can be very interesting just to see how the base code of a utility (that writes to stdout) is written.<p><a href="https:&#x2F;&#x2F;maizure.org&#x2F;projects&#x2F;decoded-gnu-coreutils&#x2F;yes.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;maizure.org&#x2F;projects&#x2F;decoded-gnu-coreutils&#x2F;yes.html</a></div><br/><div id="37441003" class="c"><input type="checkbox" id="c-37441003" checked=""/><div class="controls bullet"><span class="by">version_five</span><span>|</span><a href="#37440189">parent</a><span>|</span><a href="#37440369">next</a><span>|</span><label class="collapse" for="c-37441003">[-]</label><label class="expand" for="c-37441003">[2 more]</label></div><br/><div class="children"><div class="content">Replying to myself because the thread got trolled:<p>My point was in part that it&#x27;s valuable for even a simple utility to be well written and optimized and that it&#x27;s nice to have these minimal examples to learn about how to, e.g. write output very quickly. The program is so short that presumably the number of lines is unimportant, and if the author knows how to do it they might as well make it as fast as possible so it&#x27;s never in the way, and so we can learn from it. That&#x27;s why I think it&#x27;s a good example.</div><br/><div id="37441474" class="c"><input type="checkbox" id="c-37441474" checked=""/><div class="controls bullet"><span class="by">m1keil</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37441003">parent</a><span>|</span><a href="#37440369">next</a><span>|</span><label class="collapse" for="c-37441474">[-]</label><label class="expand" for="c-37441474">[1 more]</label></div><br/><div class="children"><div class="content">also quite interesting to compare with other implementations from the present and the past:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;openbsd&#x2F;src&#x2F;blob&#x2F;master&#x2F;usr.bin&#x2F;yes&#x2F;yes.c">https:&#x2F;&#x2F;github.com&#x2F;openbsd&#x2F;src&#x2F;blob&#x2F;master&#x2F;usr.bin&#x2F;yes&#x2F;yes.c</a>
<a href="https:&#x2F;&#x2F;github.com&#x2F;freebsd&#x2F;freebsd-src&#x2F;blob&#x2F;release&#x2F;4.0.0&#x2F;usr.bin&#x2F;yes&#x2F;yes.c">https:&#x2F;&#x2F;github.com&#x2F;freebsd&#x2F;freebsd-src&#x2F;blob&#x2F;release&#x2F;4.0.0&#x2F;us...</a></div><br/></div></div></div></div><div id="37440369" class="c"><input type="checkbox" id="c-37440369" checked=""/><div class="controls bullet"><span class="by">38</span><span>|</span><a href="#37440189">parent</a><span>|</span><a href="#37441003">prev</a><span>|</span><a href="#37440652">next</a><span>|</span><label class="collapse" for="c-37440369">[-]</label><label class="expand" for="c-37440369">[33 more]</label></div><br/><div class="children"><div class="content">here is a Go implementation for fun:<p><pre><code>    package main
    
    import &quot;flag&quot;
    
    func main() {
       yes := flag.String(&quot;m&quot;, &quot;y&quot;, &quot;message&quot;)
       flag.Parse()
       for {
          println(*yes)
       }
    }</code></pre></div><br/><div id="37440430" class="c"><input type="checkbox" id="c-37440430" checked=""/><div class="controls bullet"><span class="by">dale_glass</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440369">parent</a><span>|</span><a href="#37440417">next</a><span>|</span><label class="collapse" for="c-37440430">[-]</label><label class="expand" for="c-37440430">[29 more]</label></div><br/><div class="children"><div class="content">Yeah, GNU yes could be about that simple but it&#x27;s a good deal more complex to obtain the best performance possible:<p><a href="https:&#x2F;&#x2F;www.reddit.com&#x2F;r&#x2F;unix&#x2F;comments&#x2F;6gxduc&#x2F;how_is_gnu_yes_so_fast&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.reddit.com&#x2F;r&#x2F;unix&#x2F;comments&#x2F;6gxduc&#x2F;how_is_gnu_yes...</a></div><br/><div id="37440458" class="c"><input type="checkbox" id="c-37440458" checked=""/><div class="controls bullet"><span class="by">38</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440430">parent</a><span>|</span><a href="#37440417">next</a><span>|</span><label class="collapse" for="c-37440458">[-]</label><label class="expand" for="c-37440458">[28 more]</label></div><br/><div class="children"><div class="content">um, who cares? most times people are needing to use &quot;yes&quot; as part of a &quot;configure&quot; script or similar. even if GNU yes was 10 times slower, it would NEVER be the bottleneck in any situation. so whats the point?</div><br/><div id="37441140" class="c"><input type="checkbox" id="c-37441140" checked=""/><div class="controls bullet"><span class="by">pixelbeat__</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440458">parent</a><span>|</span><a href="#37440506">next</a><span>|</span><label class="collapse" for="c-37441140">[-]</label><label class="expand" for="c-37441140">[1 more]</label></div><br/><div class="children"><div class="content">I optimized yes because:<p>* The fast version is still simple enough<p>* The general functionality being provided is to output arbitrary data repeatedly, and it can be useful to do this as fast as possible</div><br/></div></div><div id="37440506" class="c"><input type="checkbox" id="c-37440506" checked=""/><div class="controls bullet"><span class="by">dale_glass</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440458">parent</a><span>|</span><a href="#37441140">prev</a><span>|</span><a href="#37440505">next</a><span>|</span><label class="collapse" for="c-37440506">[-]</label><label class="expand" for="c-37440506">[3 more]</label></div><br/><div class="children"><div class="content">I presume somebody had a need, and scratched the itch.<p>With modern systems we can have 8 channel RAM and 128 PCIe lanes to feed a system stuffed with NVMe drives. The amount of throughput that can be obtained is nuts, and at that point all sorts of weird things can become an unexpected bottleneck.<p>This applies even in consumer systems. Suddenly your game loads far slower on a NVMe than it could because it never occurred to the programmer that instead of the disk, the JPEG decoder can become a bottleneck when you can read compressed data at 7 GB&#x2F;s.</div><br/><div id="37440600" class="c"><input type="checkbox" id="c-37440600" checked=""/><div class="controls bullet"><span class="by">eichin</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440506">parent</a><span>|</span><a href="#37440505">next</a><span>|</span><label class="collapse" for="c-37440600">[-]</label><label class="expand" for="c-37440600">[2 more]</label></div><br/><div class="children"><div class="content">a decade or so ago, I ran into a problem where &quot;yes&quot; was <i>already</i> too fast, feeding it to apt-get install or something (in a context where we knew what the prompts were doing and if anything unusual happened we&#x27;d fail other checks immediately) and it had some clever input buffering going on... that wasn&#x27;t clever enough and locked up on getting a megabyte of yes&#x27;es on the first read() call.</div><br/><div id="37440817" class="c"><input type="checkbox" id="c-37440817" checked=""/><div class="controls bullet"><span class="by">shrubble</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440600">parent</a><span>|</span><a href="#37440505">next</a><span>|</span><label class="collapse" for="c-37440817">[-]</label><label class="expand" for="c-37440817">[1 more]</label></div><br/><div class="children"><div class="content">Check out &#x27;stdbuf&#x27; perhaps?</div><br/></div></div></div></div></div></div><div id="37440505" class="c"><input type="checkbox" id="c-37440505" checked=""/><div class="controls bullet"><span class="by">the-smug-one</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440458">parent</a><span>|</span><a href="#37440506">prev</a><span>|</span><a href="#37441078">next</a><span>|</span><label class="collapse" for="c-37440505">[-]</label><label class="expand" for="c-37440505">[18 more]</label></div><br/><div class="children"><div class="content">You&#x27;ll have to ask the author that. Now, I&#x27;d like to ask the author who cares how you implement &#x27;yes&#x27; in Go ;-).</div><br/><div id="37440518" class="c"><input type="checkbox" id="c-37440518" checked=""/><div class="controls bullet"><span class="by">38</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440505">parent</a><span>|</span><a href="#37441078">next</a><span>|</span><label class="collapse" for="c-37440518">[-]</label><label class="expand" for="c-37440518">[17 more]</label></div><br/><div class="children"><div class="content">yes C lines of code: 112<p>yes Go lines of code: 9</div><br/><div id="37440693" class="c"><input type="checkbox" id="c-37440693" checked=""/><div class="controls bullet"><span class="by">hunson_abadeer</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440518">parent</a><span>|</span><a href="#37440689">next</a><span>|</span><label class="collapse" for="c-37440693">[-]</label><label class="expand" for="c-37440693">[6 more]</label></div><br/><div class="children"><div class="content">It feels like you&#x27;re making a bad-faith argument here. You can implement &#x27;yes&#x27; in a straightforward way in a couple lines of C, too.<p><pre><code>  main(int argc, char** argv) {
    while (1) {
      if (argc &gt; 1)
        for (int i = 1; i &lt; argc; i++) printf(&quot;%s%c&quot;, argv[i], (i == argc - 1) ? &#x27;\n&#x27; : &#x27; &#x27;);
        else puts(&quot;y&quot;);
    }
  }
</code></pre>
The point other folks are making is that it&#x27;s written differently for a reason. Maybe not a reason that&#x27;s important, but at the very least, let&#x27;s try to compare apples to apples.</div><br/><div id="37440879" class="c"><input type="checkbox" id="c-37440879" checked=""/><div class="controls bullet"><span class="by">38</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440693">parent</a><span>|</span><a href="#37440689">next</a><span>|</span><label class="collapse" for="c-37440879">[-]</label><label class="expand" for="c-37440879">[5 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t see include, which means you&#x27;re ignoring warnings aren&#x27;t printing them in the first place. Also testing against a number instead of boolean. Also you have a horrible hack instead of proper flag parsing. And you&#x27;re also abusing brace elision just to reduce LOC. And again abusing ternary syntax for the same reason.</div><br/><div id="37441376" class="c"><input type="checkbox" id="c-37441376" checked=""/><div class="controls bullet"><span class="by">mturmon</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440879">parent</a><span>|</span><a href="#37441322">next</a><span>|</span><label class="collapse" for="c-37441376">[-]</label><label class="expand" for="c-37441376">[3 more]</label></div><br/><div class="children"><div class="content">If you start with code golf, as you did, then this is where you end up. The only way to win is not to play?</div><br/><div id="37441635" class="c"><input type="checkbox" id="c-37441635" checked=""/><div class="controls bullet"><span class="by">38</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37441376">parent</a><span>|</span><a href="#37441322">next</a><span>|</span><label class="collapse" for="c-37441635">[-]</label><label class="expand" for="c-37441635">[2 more]</label></div><br/><div class="children"><div class="content">mine is just normal idiomatic Go code. thats not true of the C code.</div><br/><div id="37442846" class="c"><input type="checkbox" id="c-37442846" checked=""/><div class="controls bullet"><span class="by">inferiorhuman</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37441635">parent</a><span>|</span><a href="#37441322">next</a><span>|</span><label class="collapse" for="c-37442846">[-]</label><label class="expand" for="c-37442846">[1 more]</label></div><br/><div class="children"><div class="content">It might be ugly, but that is idiomatic C code.  C didn&#x27;t even have boolean types until C99, and even then it&#x27;s an &quot;extension&quot; of an integer type.<p>You could argue about the loop itself, after all K&amp;R specified &quot;for(;;)&quot;, but the other commonly used (ergo idiomatic) infinite loops use precisely the same number of lines.
&quot;while(1)&quot; is a perfectly idiomatic manner to create an infinite loop.<p>Likewise a void return type for main was entirely legal until C99.  The BSD yes(1) I&#x27;ve laying around only prints the first argument, so flag parsing?  What flag parsing?<p>Yes in nine lines of C inclusive of preprocessor macro invocations and white space.<p><pre><code>  #include &lt;stdio.h&gt;
  
  int main(int argc, char **argv) {
    const char *phrase = argc &gt; 1 ? argv[1] : &quot;y&quot;;
    while (1) {
      printf(&quot;%s\n&quot;, phrase);
    }
    return 0;
  }</code></pre></div><br/></div></div></div></div></div></div></div></div></div></div><div id="37440689" class="c"><input type="checkbox" id="c-37440689" checked=""/><div class="controls bullet"><span class="by">not2b</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440518">parent</a><span>|</span><a href="#37440693">prev</a><span>|</span><a href="#37440947">next</a><span>|</span><label class="collapse" for="c-37440689">[-]</label><label class="expand" for="c-37440689">[1 more]</label></div><br/><div class="children"><div class="content">That isn&#x27;t an apples-to-apples comparison. A C version could be similarly short, but the GNU yes implementer got carried away with efficiency considerations. If the Go program did the same, it would be longer.</div><br/></div></div><div id="37440947" class="c"><input type="checkbox" id="c-37440947" checked=""/><div class="controls bullet"><span class="by">staplung</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440518">parent</a><span>|</span><a href="#37440689">prev</a><span>|</span><a href="#37440661">next</a><span>|</span><label class="collapse" for="c-37440947">[-]</label><label class="expand" for="c-37440947">[6 more]</label></div><br/><div class="children"><div class="content">On my mac the go version of yes creates a binary that&#x27;s 30x larger than the yes binary I have on a linux machine. 2MB vs ~65KB.</div><br/><div id="37442341" class="c"><input type="checkbox" id="c-37442341" checked=""/><div class="controls bullet"><span class="by">smashed</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440947">parent</a><span>|</span><a href="#37440988">next</a><span>|</span><label class="collapse" for="c-37442341">[-]</label><label class="expand" for="c-37442341">[1 more]</label></div><br/><div class="children"><div class="content">This.<p>In fact, most embedded Linux thingy will be running the busybox version of core utilities instead of gnu coreutils for binary size reasons.<p>I other words, even gnu coreutils is too big.</div><br/></div></div><div id="37440988" class="c"><input type="checkbox" id="c-37440988" checked=""/><div class="controls bullet"><span class="by">svnpenn</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440947">parent</a><span>|</span><a href="#37442341">prev</a><span>|</span><a href="#37440661">next</a><span>|</span><label class="collapse" for="c-37440988">[-]</label><label class="expand" for="c-37440988">[4 more]</label></div><br/><div class="children"><div class="content">on mine it is 1,354 KB. I prefer the 10x LOC savings over a megabyte of hard drive, but you do you.</div><br/><div id="37441737" class="c"><input type="checkbox" id="c-37441737" checked=""/><div class="controls bullet"><span class="by">commonlisp94</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440988">parent</a><span>|</span><a href="#37441221">next</a><span>|</span><label class="collapse" for="c-37441737">[-]</label><label class="expand" for="c-37441737">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not about hard drive space, it&#x27;s about start up time.<p>The 10x LOC (despite being a huge exaggeration) is also the fixed cost, not the marginal cost. You&#x27;re only forging main loop and includes, not any fundamental complexity.<p>This is also a funny argument coming from a Go programmer considering that Go trades off conciseness and expressivity for simplicity. Show me some of your favorite Go and I&#x27;m sure we can replace it with some concise C++.</div><br/><div id="37442762" class="c"><input type="checkbox" id="c-37442762" checked=""/><div class="controls bullet"><span class="by">38</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37441737">parent</a><span>|</span><a href="#37441221">next</a><span>|</span><label class="collapse" for="c-37442762">[-]</label><label class="expand" for="c-37442762">[1 more]</label></div><br/><div class="children"><div class="content">&gt; C++<p>I just physically shuddered</div><br/></div></div></div></div><div id="37441221" class="c"><input type="checkbox" id="c-37441221" checked=""/><div class="controls bullet"><span class="by">BenjiWiebe</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440988">parent</a><span>|</span><a href="#37441737">prev</a><span>|</span><a href="#37440661">next</a><span>|</span><label class="collapse" for="c-37441221">[-]</label><label class="expand" for="c-37441221">[1 more]</label></div><br/><div class="children"><div class="content">But if everything was written in Go it might be 1 megabyte * the number of users of coreutils. Might be worth using a few more lines of code to save a little bit of space on a lot of machines.</div><br/></div></div></div></div></div></div><div id="37440661" class="c"><input type="checkbox" id="c-37440661" checked=""/><div class="controls bullet"><span class="by">placesalt</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440518">parent</a><span>|</span><a href="#37440947">prev</a><span>|</span><a href="#37441078">next</a><span>|</span><label class="collapse" for="c-37440661">[-]</label><label class="expand" for="c-37440661">[3 more]</label></div><br/><div class="children"><div class="content">16 lines of go, with comments &amp; whitespace</div><br/><div id="37440906" class="c"><input type="checkbox" id="c-37440906" checked=""/><div class="controls bullet"><span class="by">38</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440661">parent</a><span>|</span><a href="#37441078">next</a><span>|</span><label class="collapse" for="c-37440906">[-]</label><label class="expand" for="c-37440906">[2 more]</label></div><br/><div class="children"><div class="content">134 lines of C, with comments &amp; whitespace</div><br/></div></div></div></div></div></div></div></div><div id="37441078" class="c"><input type="checkbox" id="c-37441078" checked=""/><div class="controls bullet"><span class="by">rcr</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440458">parent</a><span>|</span><a href="#37440505">prev</a><span>|</span><a href="#37440936">next</a><span>|</span><label class="collapse" for="c-37441078">[-]</label><label class="expand" for="c-37441078">[3 more]</label></div><br/><div class="children"><div class="content">Because you can&#x27;t imagine a case its needed it must not exist? I also remember being a junior dev who thought they had all the answers.</div><br/><div id="37441646" class="c"><input type="checkbox" id="c-37441646" checked=""/><div class="controls bullet"><span class="by">38</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37441078">parent</a><span>|</span><a href="#37440936">next</a><span>|</span><label class="collapse" for="c-37441646">[-]</label><label class="expand" for="c-37441646">[2 more]</label></div><br/><div class="children"><div class="content">gotta love junior devs pretending to be more than, then calling out what they think are other junior devs</div><br/></div></div></div></div><div id="37440936" class="c"><input type="checkbox" id="c-37440936" checked=""/><div class="controls bullet"><span class="by">singron</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440458">parent</a><span>|</span><a href="#37441078">prev</a><span>|</span><a href="#37441033">next</a><span>|</span><label class="collapse" for="c-37440936">[-]</label><label class="expand" for="c-37440936">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve heard before that a lot of GNU programs are stretched like this so that they don&#x27;t resemble anything from proprietary AT&amp;T unix. E.g. all the extra options in basically everything and the ridiculous optimization of things like yes.</div><br/></div></div><div id="37441033" class="c"><input type="checkbox" id="c-37441033" checked=""/><div class="controls bullet"><span class="by">fipar</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440458">parent</a><span>|</span><a href="#37440936">prev</a><span>|</span><a href="#37440417">next</a><span>|</span><label class="collapse" for="c-37441033">[-]</label><label class="expand" for="c-37441033">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m not saying this is the reason, but unnecessary (or sometimes dangerous if used in real life) optimizations have been created to speed up QA runs (of course, that only works if what you optimize away is not part of what you&#x27;re trying to test), e.g., libeatmydata.<p>But for &#x27;yes&#x27;, I&#x27;d agree with you, though I guess the answer to &quot;who cares?&quot; is that whomever wrote it cared. They could have a legit performance reason or may just have done it to show they could.</div><br/></div></div></div></div></div></div><div id="37440417" class="c"><input type="checkbox" id="c-37440417" checked=""/><div class="controls bullet"><span class="by">sltkr</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440369">parent</a><span>|</span><a href="#37440430">prev</a><span>|</span><a href="#37440652">next</a><span>|</span><label class="collapse" for="c-37440417">[-]</label><label class="expand" for="c-37440417">[3 more]</label></div><br/><div class="children"><div class="content">Here&#x27;s a Brainfuck implementation:<p><pre><code>    ++++++++++[-&gt;++++++++++++&gt;+&lt;&lt;]&gt;+[.&gt;.&lt;]
</code></pre>
(Unfortunately, Brainfuck doesn&#x27;t support command line flags.)</div><br/><div id="37440939" class="c"><input type="checkbox" id="c-37440939" checked=""/><div class="controls bullet"><span class="by">Cloudef</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440417">parent</a><span>|</span><a href="#37440652">next</a><span>|</span><label class="collapse" for="c-37440939">[-]</label><label class="expand" for="c-37440939">[2 more]</label></div><br/><div class="children"><div class="content">[.&gt;.&lt;]
かわいい</div><br/><div id="37441563" class="c"><input type="checkbox" id="c-37441563" checked=""/><div class="controls bullet"><span class="by">Twisol</span><span>|</span><a href="#37440189">root</a><span>|</span><a href="#37440939">parent</a><span>|</span><a href="#37440652">next</a><span>|</span><label class="collapse" for="c-37441563">[-]</label><label class="expand" for="c-37441563">[1 more]</label></div><br/><div class="children"><div class="content">(for those who can&#x27;t read Japanese, and at risk of over-explaining, the parent called part of the program cute.)</div><br/></div></div></div></div></div></div></div></div></div></div><div id="37440652" class="c"><input type="checkbox" id="c-37440652" checked=""/><div class="controls bullet"><span class="by">staplung</span><span>|</span><a href="#37440189">prev</a><span>|</span><a href="#37441628">next</a><span>|</span><label class="collapse" for="c-37440652">[-]</label><label class="expand" for="c-37440652">[9 more]</label></div><br/><div class="children"><div class="content">Kind of a fun list of basic utilities. I&#x27;ve been using UNIX for a loooong time and had never heard of e.g. `shred`, `shuf`, or `factor`. Makes me want to try<p><pre><code>  sudo find &#x2F; -type f -exec shred {} \;
</code></pre>
to see how far it gets before killing itself (on a VM or easily re-flashed machine of course).</div><br/><div id="37440876" class="c"><input type="checkbox" id="c-37440876" checked=""/><div class="controls bullet"><span class="by">notpeter</span><span>|</span><a href="#37440652">parent</a><span>|</span><a href="#37440729">next</a><span>|</span><label class="collapse" for="c-37440876">[-]</label><label class="expand" for="c-37440876">[2 more]</label></div><br/><div class="children"><div class="content">&gt; to see how far it gets before killing itself (on a VM or easily re-flashed machine of course).<p>I did this, but with dd -- it completed. Was very anti-climatic. I was hoping it would crash or at least disconnect me, but the kernel, sshd and bash were still in memory and happily returned me to a prompt where I couldn&#x27;t really do anything.</div><br/><div id="37441260" class="c"><input type="checkbox" id="c-37441260" checked=""/><div class="controls bullet"><span class="by">nightfly</span><span>|</span><a href="#37440652">root</a><span>|</span><a href="#37440876">parent</a><span>|</span><a href="#37440729">next</a><span>|</span><label class="collapse" for="c-37441260">[-]</label><label class="expand" for="c-37441260">[1 more]</label></div><br/><div class="children"><div class="content">Doing at the block device level you&#x27;re gonna have stuff stick around in cache, file-wise would blow things up faster</div><br/></div></div></div></div><div id="37440729" class="c"><input type="checkbox" id="c-37440729" checked=""/><div class="controls bullet"><span class="by">Denvercoder9</span><span>|</span><a href="#37440652">parent</a><span>|</span><a href="#37440876">prev</a><span>|</span><a href="#37441628">next</a><span>|</span><label class="collapse" for="c-37440729">[-]</label><label class="expand" for="c-37440729">[6 more]</label></div><br/><div class="children"><div class="content">On Linux, it&#x27;d likely go until completion. You can&#x27;t write to executables and libraries that are currently running (ETXTBUSY), so shred can&#x27;t trash either itself or find.</div><br/><div id="37441556" class="c"><input type="checkbox" id="c-37441556" checked=""/><div class="controls bullet"><span class="by">rascul</span><span>|</span><a href="#37440652">root</a><span>|</span><a href="#37440729">parent</a><span>|</span><a href="#37440813">next</a><span>|</span><label class="collapse" for="c-37441556">[-]</label><label class="expand" for="c-37441556">[3 more]</label></div><br/><div class="children"><div class="content">That doesn&#x27;t seem right. I can delete nano&#x27;s executable while it&#x27;s running, and rm can remove itself.<p>What am I missing?</div><br/><div id="37441591" class="c"><input type="checkbox" id="c-37441591" checked=""/><div class="controls bullet"><span class="by">shric</span><span>|</span><a href="#37440652">root</a><span>|</span><a href="#37441556">parent</a><span>|</span><a href="#37440813">next</a><span>|</span><label class="collapse" for="c-37441591">[-]</label><label class="expand" for="c-37441591">[2 more]</label></div><br/><div class="children"><div class="content">rm doesn&#x27;t actually modify the file. It does an unlink which removes the link from the filename to the file.<p>Essentially, a file can have 0 or more names linked to it. As long as a file has at least one name or at least one process with it open, it will persevere.<p>By contrast, shred actually writes to the underlying file.</div><br/><div id="37441630" class="c"><input type="checkbox" id="c-37441630" checked=""/><div class="controls bullet"><span class="by">rascul</span><span>|</span><a href="#37440652">root</a><span>|</span><a href="#37441591">parent</a><span>|</span><a href="#37440813">next</a><span>|</span><label class="collapse" for="c-37441630">[-]</label><label class="expand" for="c-37441630">[1 more]</label></div><br/><div class="children"><div class="content">Ahh, for some reason I completely missed that shred was involved.</div><br/></div></div></div></div></div></div><div id="37440813" class="c"><input type="checkbox" id="c-37440813" checked=""/><div class="controls bullet"><span class="by">staplung</span><span>|</span><a href="#37440652">root</a><span>|</span><a href="#37440729">parent</a><span>|</span><a href="#37441556">prev</a><span>|</span><a href="#37441628">next</a><span>|</span><label class="collapse" for="c-37440813">[-]</label><label class="expand" for="c-37440813">[2 more]</label></div><br/><div class="children"><div class="content">True, but I wonder if it would first get stuck on trying to shred e.g. &#x2F;dev&#x2F;stderr or if after shredding the files in &#x2F;etc some daemon woke up and tried to read a file there and choked.</div><br/><div id="37440993" class="c"><input type="checkbox" id="c-37440993" checked=""/><div class="controls bullet"><span class="by">yjftsjthsd-h</span><span>|</span><a href="#37440652">root</a><span>|</span><a href="#37440813">parent</a><span>|</span><a href="#37441628">next</a><span>|</span><label class="collapse" for="c-37440993">[-]</label><label class="expand" for="c-37440993">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;d be curious what it did to &#x2F;sys and &#x2F;proc</div><br/></div></div></div></div></div></div></div></div><div id="37441628" class="c"><input type="checkbox" id="c-37441628" checked=""/><div class="controls bullet"><span class="by">MenhirMike</span><span>|</span><a href="#37440652">prev</a><span>|</span><a href="#37440378">next</a><span>|</span><label class="collapse" for="c-37441628">[-]</label><label class="expand" for="c-37441628">[2 more]</label></div><br/><div class="children"><div class="content">I do like that &#x2F;bin&#x2F;true can actually fail and return false, which technically makes a &quot;Not &#x2F;bin&#x2F;false&quot; invocation more resilient: <a href="https:&#x2F;&#x2F;github.com&#x2F;coreutils&#x2F;coreutils&#x2F;blob&#x2F;master&#x2F;src&#x2F;true.c#L67">https:&#x2F;&#x2F;github.com&#x2F;coreutils&#x2F;coreutils&#x2F;blob&#x2F;master&#x2F;src&#x2F;true....</a> (and yes, I know it&#x27;s the most unlikely thing, I just found it funny)</div><br/><div id="37441923" class="c"><input type="checkbox" id="c-37441923" checked=""/><div class="controls bullet"><span class="by">yjftsjthsd-h</span><span>|</span><a href="#37441628">parent</a><span>|</span><a href="#37440378">next</a><span>|</span><label class="collapse" for="c-37441923">[-]</label><label class="expand" for="c-37441923">[1 more]</label></div><br/><div class="children"><div class="content">Only if run with options, right? It looks like just running `true` is unaffected unless the comment is misleading me.</div><br/></div></div></div></div><div id="37440378" class="c"><input type="checkbox" id="c-37440378" checked=""/><div class="controls bullet"><span class="by">nilespotter</span><span>|</span><a href="#37441628">prev</a><span>|</span><label class="collapse" for="c-37440378">[-]</label><label class="expand" for="c-37440378">[3 more]</label></div><br/><div class="children"><div class="content">Fun fact, if you install coretuils from homebrew on MacOS, since MacOS already ships with od(1), od from coretuils is installed as god(1)</div><br/><div id="37440854" class="c"><input type="checkbox" id="c-37440854" checked=""/><div class="controls bullet"><span class="by">aidenn0</span><span>|</span><a href="#37440378">parent</a><span>|</span><label class="collapse" for="c-37440854">[-]</label><label class="expand" for="c-37440854">[2 more]</label></div><br/><div class="children"><div class="content">Well of course it is, the &quot;G&quot; lets you distinguish the Gnu &quot;od&quot; from the OG &quot;od&quot;</div><br/></div></div></div></div></div></div></div></div></div></body></html>