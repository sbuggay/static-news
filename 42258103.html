<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1732784458451" as="style"/><link rel="stylesheet" href="styles.css?v=1732784458451"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://bernsteinbear.com/blog/creduce/">You can use C-Reduce for any language</a> <span class="domain">(<a href="https://bernsteinbear.com">bernsteinbear.com</a>)</span></div><div class="subtext"><span>Tomte</span> | <span>79 comments</span></div><br/><div><div id="42258961" class="c"><input type="checkbox" id="c-42258961" checked=""/><div class="controls bullet"><span class="by">judofyr</span><span>|</span><a href="#42258733">next</a><span>|</span><label class="collapse" for="c-42258961">[-]</label><label class="expand" for="c-42258961">[4 more]</label></div><br/><div class="children"><div class="content">Well, aren&#x27;t you going to share the reduced file?<p>Okay fine, let&#x27;s see for ourselves:<p><pre><code>    # Setup
    git clone git@github.com:RustPython&#x2F;RustPython.git &amp;&amp; cd RustPython &amp;&amp; cargo build --release
    git clone git@github.com:tekknolagi&#x2F;scrapscript.git &amp;&amp; cp scrapscript&#x2F;scrapscript.py .

    # Download interesting.sh, replace the path to RustPython
    chmod +x interesting.sh

    # Command in article:
    nix run nixpkgs#creduce -- --not-c interesting.sh scrapscript.py

</code></pre>
Niiice:<p><pre><code>    (93.2 %, 13717 bytes)
    (93.2 %, 13683 bytes)
    (93.3 %, 13614 bytes)
    (93.3 %, 13592 bytes)
    (93.3 %, 13571 bytes)
    (93.3 %, 13517 bytes)
    (93.3 %, 13449 bytes)
    (93.4 %, 13412 bytes)
    (93.4 %, 13365 bytes)
    (93.4 %, 13333 bytes)
    (93.4 %, 13313 bytes)

</code></pre>
It seems to have stopped at &quot;(96.4 %, 7347 bytes)&quot; with the following output: <a href="https:&#x2F;&#x2F;gist.github.com&#x2F;judofyr&#x2F;47cba8a20cb2cd5798943ef975d0cd8d" rel="nofollow">https:&#x2F;&#x2F;gist.github.com&#x2F;judofyr&#x2F;47cba8a20cb2cd5798943ef975d0...</a></div><br/><div id="42260817" class="c"><input type="checkbox" id="c-42260817" checked=""/><div class="controls bullet"><span class="by">tomberek</span><span>|</span><a href="#42258961">parent</a><span>|</span><a href="#42258733">next</a><span>|</span><label class="collapse" for="c-42260817">[-]</label><label class="expand" for="c-42260817">[3 more]</label></div><br/><div class="children"><div class="content">Random thought. Another commenter worried about the runtime of the program becoming mangled and performing destructive operations on your machine. What if you run the reducer as a source-to-source Nix derivation? Protects against dangerous things, and can be easily distributed to remote builders.</div><br/><div id="42263540" class="c"><input type="checkbox" id="c-42263540" checked=""/><div class="controls bullet"><span class="by">judofyr</span><span>|</span><a href="#42258961">root</a><span>|</span><a href="#42260817">parent</a><span>|</span><a href="#42263344">next</a><span>|</span><label class="collapse" for="c-42263540">[-]</label><label class="expand" for="c-42263540">[1 more]</label></div><br/><div class="children"><div class="content">Oh, that’s a neat idea. To reply to the sibling comment: Nix runs commands under a sandbox. It’s not bullet proof, but useful enough that it will prevent obvious commands like deleting local files and accessing the network.<p>It took some time to get RustPython to run, but it seems to work fine: <a href="https:&#x2F;&#x2F;gist.github.com&#x2F;judofyr&#x2F;82d2255c92ebb0c6b3a6882ac9fde327#file-flake-nix" rel="nofollow">https:&#x2F;&#x2F;gist.github.com&#x2F;judofyr&#x2F;82d2255c92ebb0c6b3a6882ac9fd...</a><p>Also, after running it for 5 minutes it was now able of reducing it to a much smaller case:<p><pre><code>    class a:
        def b() : c
        def h(d) :
            while d:
                    break
            else:
                return 
            d.b()
    def j(e) :
        f = a()
        if f.h  () :
                g
    i = &quot;&quot;
    j(i)</code></pre></div><br/></div></div><div id="42263344" class="c"><input type="checkbox" id="c-42263344" checked=""/><div class="controls bullet"><span class="by">capitol_</span><span>|</span><a href="#42258961">root</a><span>|</span><a href="#42260817">parent</a><span>|</span><a href="#42263540">prev</a><span>|</span><a href="#42258733">next</a><span>|</span><label class="collapse" for="c-42263344">[-]</label><label class="expand" for="c-42263344">[1 more]</label></div><br/><div class="children"><div class="content">How does this protect against dangerous things?<p>My understanding is that this would just cause the dangerous things to be repeatable.</div><br/></div></div></div></div></div></div><div id="42258733" class="c"><input type="checkbox" id="c-42258733" checked=""/><div class="controls bullet"><span class="by">lambda</span><span>|</span><a href="#42258961">prev</a><span>|</span><a href="#42258515">next</a><span>|</span><label class="collapse" for="c-42258733">[-]</label><label class="expand" for="c-42258733">[6 more]</label></div><br/><div class="children"><div class="content">Note that as recommended by John Regehr, author of C-Reduce, for this use case you might also want to try Shrinkray, a tool that was written to be format independent and works well for cases that C-Reduce dow not: <a href="https:&#x2F;&#x2F;mastodon.social&#x2F;@regehr&#x2F;113489759789563570" rel="nofollow">https:&#x2F;&#x2F;mastodon.social&#x2F;@regehr&#x2F;113489759789563570</a></div><br/><div id="42261020" class="c"><input type="checkbox" id="c-42261020" checked=""/><div class="controls bullet"><span class="by">droideqa</span><span>|</span><a href="#42258733">parent</a><span>|</span><a href="#42260604">next</a><span>|</span><label class="collapse" for="c-42261020">[-]</label><label class="expand" for="c-42261020">[4 more]</label></div><br/><div class="children"><div class="content">Is this[0] the official repo of Shrinkray?<p>[0]: <a href="https:&#x2F;&#x2F;github.com&#x2F;DRMacIver&#x2F;shrinkray">https:&#x2F;&#x2F;github.com&#x2F;DRMacIver&#x2F;shrinkray</a></div><br/><div id="42261900" class="c"><input type="checkbox" id="c-42261900" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#42258733">root</a><span>|</span><a href="#42261020">parent</a><span>|</span><a href="#42261974">next</a><span>|</span><label class="collapse" for="c-42261900">[-]</label><label class="expand" for="c-42261900">[2 more]</label></div><br/><div class="children"><div class="content">Interesting, isn&#x27;t that also the author of Python&#x27;s hypothesis?</div><br/><div id="42261949" class="c"><input type="checkbox" id="c-42261949" checked=""/><div class="controls bullet"><span class="by">lambda</span><span>|</span><a href="#42258733">root</a><span>|</span><a href="#42261900">parent</a><span>|</span><a href="#42261974">next</a><span>|</span><label class="collapse" for="c-42261949">[-]</label><label class="expand" for="c-42261949">[1 more]</label></div><br/><div class="children"><div class="content">Yes, hypothesis also does minimization of failed test cases, so it&#x27;s kind of a similar problem, just a question if what format the data is in and how you invoke your test.</div><br/></div></div></div></div><div id="42261974" class="c"><input type="checkbox" id="c-42261974" checked=""/><div class="controls bullet"><span class="by">lambda</span><span>|</span><a href="#42258733">root</a><span>|</span><a href="#42261020">parent</a><span>|</span><a href="#42261900">prev</a><span>|</span><a href="#42260604">next</a><span>|</span><label class="collapse" for="c-42261974">[-]</label><label class="expand" for="c-42261974">[1 more]</label></div><br/><div class="children"><div class="content">Yep!</div><br/></div></div></div></div><div id="42260604" class="c"><input type="checkbox" id="c-42260604" checked=""/><div class="controls bullet"><span class="by">canu7</span><span>|</span><a href="#42258733">parent</a><span>|</span><a href="#42261020">prev</a><span>|</span><a href="#42258515">next</a><span>|</span><label class="collapse" for="c-42260604">[-]</label><label class="expand" for="c-42260604">[1 more]</label></div><br/><div class="children"><div class="content">Looking forward to try it! A shout out to cvise (<a href="https:&#x2F;&#x2F;github.com&#x2F;marxin&#x2F;cvise">https:&#x2F;&#x2F;github.com&#x2F;marxin&#x2F;cvise</a>) as a python alternative that works well too for non c languages.</div><br/></div></div></div></div><div id="42258515" class="c"><input type="checkbox" id="c-42258515" checked=""/><div class="controls bullet"><span class="by">asmeurer</span><span>|</span><a href="#42258733">prev</a><span>|</span><a href="#42258311">next</a><span>|</span><label class="collapse" for="c-42258515">[-]</label><label class="expand" for="c-42258515">[8 more]</label></div><br/><div class="children"><div class="content">A paper by the authors John Regehr et al. from 2012 explaining how it works <a href="https:&#x2F;&#x2F;fsl.cs.illinois.edu&#x2F;publications&#x2F;regehr-chen-cuoq-eide-ellison-yang-pldi-2012.pdf" rel="nofollow">https:&#x2F;&#x2F;fsl.cs.illinois.edu&#x2F;publications&#x2F;regehr-chen-cuoq-ei...</a>.</div><br/><div id="42258690" class="c"><input type="checkbox" id="c-42258690" checked=""/><div class="controls bullet"><span class="by">gnulinux</span><span>|</span><a href="#42258515">parent</a><span>|</span><a href="#42259241">next</a><span>|</span><label class="collapse" for="c-42258690">[-]</label><label class="expand" for="c-42258690">[6 more]</label></div><br/><div class="children"><div class="content">I read this paper and I still feel lost as to <i>how can this even be possible</i>. It seems to understand how to tokenize, merge lines, remove tokens etc for arbitrary programming languages. Is there another paper that explains this algorithm alone?</div><br/><div id="42262555" class="c"><input type="checkbox" id="c-42262555" checked=""/><div class="controls bullet"><span class="by">dataflow</span><span>|</span><a href="#42258515">root</a><span>|</span><a href="#42258690">parent</a><span>|</span><a href="#42258967">next</a><span>|</span><label class="collapse" for="c-42262555">[-]</label><label class="expand" for="c-42262555">[2 more]</label></div><br/><div class="children"><div class="content">I was wondering the same thing but I guess the key is probably that you don&#x27;t actually have to do it correctly every time. Just tokenizing based on a few common characteristics (brace pairing, quotes, indentation, newlines, etc.) should let you trim a ton without knowing anything about the language, I imagine?<p>My real worry is what if this ends up running dangerous code. Like what if you have a disabled line that writes instead of reading, that randomly gets reactivated?</div><br/><div id="42262789" class="c"><input type="checkbox" id="c-42262789" checked=""/><div class="controls bullet"><span class="by">steventhedev</span><span>|</span><a href="#42258515">root</a><span>|</span><a href="#42262555">parent</a><span>|</span><a href="#42258967">next</a><span>|</span><label class="collapse" for="c-42262789">[-]</label><label class="expand" for="c-42262789">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s intended to run for producing compiler test cases, so there shouldn&#x27;t be any code that&#x27;s actually running.<p>CPython includes a flag to only run parsing&#x2F;compiling to bytecode. While you can use it like they did here and run the code - it really depends on how much you trust every possible subset of your code</div><br/></div></div></div></div><div id="42258967" class="c"><input type="checkbox" id="c-42258967" checked=""/><div class="controls bullet"><span class="by">IshKebab</span><span>|</span><a href="#42258515">root</a><span>|</span><a href="#42258690">parent</a><span>|</span><a href="#42262555">prev</a><span>|</span><a href="#42259241">next</a><span>|</span><label class="collapse" for="c-42258967">[-]</label><label class="expand" for="c-42258967">[3 more]</label></div><br/><div class="children"><div class="content">It basically runs transformation passes over the code until they stop changing the code or break its behaviour.<p>It seems like a small number of the passes are not specific to C:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;csmith-project&#x2F;creduce&#x2F;blob&#x2F;master&#x2F;creduce&#x2F;creduce.in#L767-L938">https:&#x2F;&#x2F;github.com&#x2F;csmith-project&#x2F;creduce&#x2F;blob&#x2F;master&#x2F;creduc...</a><p>`&quot;C&quot; =&gt; 1,` means it is only for C.<p>I would guess `pass_lines` is the most important for non-C code; I&#x27;m guessing (it&#x27;s written in unreadable Perl) that it removes lines.<p>So while it <i>can</i> work for languages other than C, most of its features are C-specific so it&#x27;s not going to work nearly as well. Still I&#x27;d never heard of C-Reduce; pretty cool tool!<p>Someone make one based on Tree Sitter, quick!</div><br/><div id="42260758" class="c"><input type="checkbox" id="c-42260758" checked=""/><div class="controls bullet"><span class="by">the8472</span><span>|</span><a href="#42258515">root</a><span>|</span><a href="#42258967">parent</a><span>|</span><a href="#42262776">next</a><span>|</span><label class="collapse" for="c-42260758">[-]</label><label class="expand" for="c-42260758">[1 more]</label></div><br/><div class="children"><div class="content">どうぞ <a href="https:&#x2F;&#x2F;langston-barrett.github.io&#x2F;treereduce&#x2F;" rel="nofollow">https:&#x2F;&#x2F;langston-barrett.github.io&#x2F;treereduce&#x2F;</a></div><br/></div></div><div id="42262776" class="c"><input type="checkbox" id="c-42262776" checked=""/><div class="controls bullet"><span class="by">codesnik</span><span>|</span><a href="#42258515">root</a><span>|</span><a href="#42258967">parent</a><span>|</span><a href="#42260758">prev</a><span>|</span><a href="#42259241">next</a><span>|</span><label class="collapse" for="c-42262776">[-]</label><label class="expand" for="c-42262776">[1 more]</label></div><br/><div class="children"><div class="content">unreadable perl?! I clicked on the link expecting something super-terse and unstructured, but it&#x27;s anything but. What the hell is wrong with people casually dropping such remarks.</div><br/></div></div></div></div></div></div><div id="42259241" class="c"><input type="checkbox" id="c-42259241" checked=""/><div class="controls bullet"><span class="by">nyrikki</span><span>|</span><a href="#42258515">parent</a><span>|</span><a href="#42258690">prev</a><span>|</span><a href="#42258311">next</a><span>|</span><label class="collapse" for="c-42259241">[-]</label><label class="expand" for="c-42259241">[1 more]</label></div><br/><div class="children"><div class="content">This paper is not about C-Reduce as a whole but 3 new &quot;domain-specific test-case reducers&quot; that the authors added to the project.<p>Most of the non-domain specific reductions in C-Reduce is simply brute force IIRC.</div><br/></div></div></div></div><div id="42258311" class="c"><input type="checkbox" id="c-42258311" checked=""/><div class="controls bullet"><span class="by">jchw</span><span>|</span><a href="#42258515">prev</a><span>|</span><a href="#42260196">next</a><span>|</span><label class="collapse" for="c-42258311">[-]</label><label class="expand" for="c-42258311">[18 more]</label></div><br/><div class="children"><div class="content">I did not know about C-Reduce until just now, and I&#x27;m already hooked. This is basically like discovering git bisect for the first time.<p>I&#x27;ll have to stuff that into the back of my mind until I run into something where it might fit.</div><br/><div id="42261192" class="c"><input type="checkbox" id="c-42261192" checked=""/><div class="controls bullet"><span class="by">com2kid</span><span>|</span><a href="#42258311">parent</a><span>|</span><a href="#42262579">next</a><span>|</span><label class="collapse" for="c-42261192">[-]</label><label class="expand" for="c-42261192">[1 more]</label></div><br/><div class="children"><div class="content">Doing this manually was part of my first job out of college on a C&#x2F;C++ compiler team. Kind of amazing that there is automation that can accomplish the same thing!</div><br/></div></div><div id="42262579" class="c"><input type="checkbox" id="c-42262579" checked=""/><div class="controls bullet"><span class="by">dataflow</span><span>|</span><a href="#42258311">parent</a><span>|</span><a href="#42261192">prev</a><span>|</span><a href="#42260222">next</a><span>|</span><label class="collapse" for="c-42262579">[-]</label><label class="expand" for="c-42262579">[7 more]</label></div><br/><div class="children"><div class="content">&gt; I did not know about C-Reduce until just now, and I&#x27;m already hooked. This is basically like discovering git bisect for the first time.<p>I&#x27;ve known about git bisect for maybe a decade, and used it maybe... twice so far? And I think at least one of those times it took me longer to understand the command line options than it took to just do it manually.<p>YMMV, maybe it&#x27;s more useful in a larger collaborative codebase, but to me it sounds life-changing in theory but I haven&#x27;t found it that in practice.</div><br/><div id="42262736" class="c"><input type="checkbox" id="c-42262736" checked=""/><div class="controls bullet"><span class="by">SnowflakeOnIce</span><span>|</span><a href="#42258311">root</a><span>|</span><a href="#42262579">parent</a><span>|</span><a href="#42262652">next</a><span>|</span><label class="collapse" for="c-42262736">[-]</label><label class="expand" for="c-42262736">[4 more]</label></div><br/><div class="children"><div class="content">At a previous job, with a huge C++ codebase and ~100 developers over 20 years, many platforms supported, a build could take hours, and the test suite took so long to run that it would take several days or weeks of real time to get through it all.<p>This cycle time combined with occasional unexpected interactions between components meant that in every release cycle, there were dozens of complicated failing tests where it was not obvious which code change was responsible.<p>`bisect` here was extremely helpful: instead of having to pore over commit history and think very hard, I could bisect with a small wrapper script that would build and run the failing test in question. Builds still took hours, but I could usually autonatically pinpoint the responsible code change for one of the tests overnight.<p>(This was not using Git, but Perforce, for which I had to write `p4-bisect`. Alas, it&#x27;s not open-source...)</div><br/><div id="42262858" class="c"><input type="checkbox" id="c-42262858" checked=""/><div class="controls bullet"><span class="by">dataflow</span><span>|</span><a href="#42258311">root</a><span>|</span><a href="#42262736">parent</a><span>|</span><a href="#42262652">next</a><span>|</span><label class="collapse" for="c-42262858">[-]</label><label class="expand" for="c-42262858">[3 more]</label></div><br/><div class="children"><div class="content">&gt; in every release cycle, there were dozens of complicated failing tests<p>Sorry if this is a dumb question, perhaps I&#x27;m not understanding what you mean by every release cycle, but does this mean nobody in the team&#x2F;company ran tests until it was time for release? That sounds like a really big everlasting wound to put a tiny git-bisect bandage on!</div><br/><div id="42263601" class="c"><input type="checkbox" id="c-42263601" checked=""/><div class="controls bullet"><span class="by">Someone</span><span>|</span><a href="#42258311">root</a><span>|</span><a href="#42262858">parent</a><span>|</span><a href="#42263148">next</a><span>|</span><label class="collapse" for="c-42263601">[-]</label><label class="expand" for="c-42263601">[1 more]</label></div><br/><div class="children"><div class="content">&gt; does this mean nobody in the team&#x2F;company ran tests until it was time for release?<p>The OP wrote “many platforms supported, a build could take hours, and the test suite took so long to run that it would take several days or weeks of real time to get through it all”<p>⇒ I think they did run tests, but typically not all of them on all platforms.</div><br/></div></div><div id="42263148" class="c"><input type="checkbox" id="c-42263148" checked=""/><div class="controls bullet"><span class="by">botanical76</span><span>|</span><a href="#42258311">root</a><span>|</span><a href="#42262858">parent</a><span>|</span><a href="#42263601">prev</a><span>|</span><a href="#42262652">next</a><span>|</span><label class="collapse" for="c-42263148">[-]</label><label class="expand" for="c-42263148">[1 more]</label></div><br/><div class="children"><div class="content">At least in my &quot;Agile&quot; experience, it is always time for release.</div><br/></div></div></div></div></div></div><div id="42262652" class="c"><input type="checkbox" id="c-42262652" checked=""/><div class="controls bullet"><span class="by">jchw</span><span>|</span><a href="#42258311">root</a><span>|</span><a href="#42262579">parent</a><span>|</span><a href="#42262736">prev</a><span>|</span><a href="#42260222">next</a><span>|</span><label class="collapse" for="c-42262652">[-]</label><label class="expand" for="c-42262652">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s pretty incredible if I&#x27;m trying to find a breakage in a repo I don&#x27;t understand. Build&#x27;s failing? Easy enough:<p><pre><code>    git bisect start master v1.1         # Bisect from v1.1 to current master
    git bisect run cmake --build .build  # Find the first commit where `cmake --build` returns non-zero.
</code></pre>
No need to bother trying to understand the error message, I can go make coffee instead and then just look at the commit that broke it. Also, this is really useful for and in conjunction with Nixpkgs.<p>It&#x27;s not as useful for personal projects because chances are it won&#x27;t tell you anything you don&#x27;t already know.</div><br/><div id="42262815" class="c"><input type="checkbox" id="c-42262815" checked=""/><div class="controls bullet"><span class="by">dataflow</span><span>|</span><a href="#42258311">root</a><span>|</span><a href="#42262652">parent</a><span>|</span><a href="#42260222">next</a><span>|</span><label class="collapse" for="c-42262815">[-]</label><label class="expand" for="c-42262815">[1 more]</label></div><br/><div class="children"><div class="content">&gt; It&#x27;s pretty incredible if I&#x27;m trying to find a breakage in a repo I don&#x27;t understand.<p>&gt; Build&#x27;s failing? Easy enough:<p>&gt; It&#x27;s not as useful for personal projects<p>How often do you run into this situation, though? For your scenario to arise, you need:<p>(1) A repo you&#x27;re unfamiliar with (which is already unusual for most people... most people spend most of their time working on repositories they&#x27;ve become familiar with)<p>(2) The unfamiliar repo to use standard build commands you already know, which is basically never the case in my experience (even cmake-based projects almost always need variables defined with custom names I don&#x27;t know beforehand, and the configuration process is so onerous I find the GUI easier)<p>(3) An obscure enough breakage where the output is complete garbage (otherwise the compile error would just tell you the file and line, and git blame would tell you the commit directly)<p>(4) Knowledge that this unfamiliar repo <i>actually would have actually built on your machine</i> at some point (which is often <i>not</i> the case because cmake isn&#x27;t hermetic and breakages are often due to having the wrong toolchain installed)<p>(5) For the problem to be a mere build error, as opposed to some running of the program that requires investing time to automate<p>(6) For you to not have any sort of prior CI or other form of validation on your dependencies, because you apparently didn&#x27;t catch even catch a build error when it was introduced (never mind automated testing)<p>I could go on, but these set of circumstances are more or less indistinguishable from ~never to me.</div><br/></div></div></div></div></div></div><div id="42260222" class="c"><input type="checkbox" id="c-42260222" checked=""/><div class="controls bullet"><span class="by">geon</span><span>|</span><a href="#42258311">parent</a><span>|</span><a href="#42262579">prev</a><span>|</span><a href="#42261357">next</a><span>|</span><label class="collapse" for="c-42260222">[-]</label><label class="expand" for="c-42260222">[1 more]</label></div><br/><div class="children"><div class="content">I ran into some issues with what might be compiler bugs in cc65, a C compiler for the 6502 processor (c64, NES, Apple 1).<p>I might see if I can get this set up. Apparently VICE supports &quot;printing&quot; to a file on the host OS, so I could run my test on the emulator.</div><br/></div></div><div id="42261357" class="c"><input type="checkbox" id="c-42261357" checked=""/><div class="controls bullet"><span class="by">pfdietz</span><span>|</span><a href="#42258311">parent</a><span>|</span><a href="#42260222">prev</a><span>|</span><a href="#42259014">next</a><span>|</span><label class="collapse" for="c-42261357">[-]</label><label class="expand" for="c-42261357">[4 more]</label></div><br/><div class="children"><div class="content">It&#x27;s great when combined with random test input generators.</div><br/><div id="42261905" class="c"><input type="checkbox" id="c-42261905" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#42258311">root</a><span>|</span><a href="#42261357">parent</a><span>|</span><a href="#42259014">next</a><span>|</span><label class="collapse" for="c-42261905">[-]</label><label class="expand" for="c-42261905">[3 more]</label></div><br/><div class="children"><div class="content">Yes, most property based testing libraries do this.</div><br/><div id="42262103" class="c"><input type="checkbox" id="c-42262103" checked=""/><div class="controls bullet"><span class="by">pfdietz</span><span>|</span><a href="#42258311">root</a><span>|</span><a href="#42261905">parent</a><span>|</span><a href="#42259014">next</a><span>|</span><label class="collapse" for="c-42262103">[-]</label><label class="expand" for="c-42262103">[2 more]</label></div><br/><div class="children"><div class="content">Hypothesis in particular has a very clever way to do test reduction.  The key problem is that if your test generator is enforcing some constraint on the input, it&#x27;s not necessarily the case that naive pruning will preserve the constraint.  Hypothesis has a fairly general way of enforcing that the generated test input continues to satisfy constraints.</div><br/><div id="42262837" class="c"><input type="checkbox" id="c-42262837" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#42258311">root</a><span>|</span><a href="#42262103">parent</a><span>|</span><a href="#42259014">next</a><span>|</span><label class="collapse" for="c-42262837">[-]</label><label class="expand" for="c-42262837">[1 more]</label></div><br/><div class="children"><div class="content">Yes, Hypothesis is great.  And &#x27;shrinkray&#x27; mentioned elsewhere in the comments here seems to be by the same author.</div><br/></div></div></div></div></div></div></div></div><div id="42259014" class="c"><input type="checkbox" id="c-42259014" checked=""/><div class="controls bullet"><span class="by">__MatrixMan__</span><span>|</span><a href="#42258311">parent</a><span>|</span><a href="#42261357">prev</a><span>|</span><a href="#42260336">next</a><span>|</span><label class="collapse" for="c-42259014">[-]</label><label class="expand" for="c-42259014">[1 more]</label></div><br/><div class="children"><div class="content">Same story, I can&#x27;t wait to try this.</div><br/></div></div><div id="42260336" class="c"><input type="checkbox" id="c-42260336" checked=""/><div class="controls bullet"><span class="by">brightball</span><span>|</span><a href="#42258311">parent</a><span>|</span><a href="#42259014">prev</a><span>|</span><a href="#42260196">next</a><span>|</span><label class="collapse" for="c-42260336">[-]</label><label class="expand" for="c-42260336">[3 more]</label></div><br/><div class="children"><div class="content">...so I just discovered git bisect for the first time and this is pretty cool.</div><br/><div id="42262508" class="c"><input type="checkbox" id="c-42262508" checked=""/><div class="controls bullet"><span class="by">crdrost</span><span>|</span><a href="#42258311">root</a><span>|</span><a href="#42260336">parent</a><span>|</span><a href="#42260196">next</a><span>|</span><label class="collapse" for="c-42262508">[-]</label><label class="expand" for="c-42262508">[2 more]</label></div><br/><div class="children"><div class="content">Yes! The actual commands that you have to search up to get it to run automatically without user input, take almost as long to put together as finding the bug that you&#x27;re finding (in the 80% case, of course there are 20% cases that take forever) but there is something so satisfying about seeing the thing just humming along once you have it set, that just makes it so satisfying.</div><br/><div id="42262596" class="c"><input type="checkbox" id="c-42262596" checked=""/><div class="controls bullet"><span class="by">dataflow</span><span>|</span><a href="#42258311">root</a><span>|</span><a href="#42262508">parent</a><span>|</span><a href="#42260196">next</a><span>|</span><label class="collapse" for="c-42262596">[-]</label><label class="expand" for="c-42262596">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Yes! The actual commands that you have to search up to get it to run automatically without user input, take almost as long to put together as finding the bug that you&#x27;re finding<p>Funny, I just wrote the exact same thing only to scroll down and see you had the same opinion:<p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=42262579">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=42262579</a></div><br/></div></div></div></div></div></div></div></div><div id="42260196" class="c"><input type="checkbox" id="c-42260196" checked=""/><div class="controls bullet"><span class="by">dswilkerson</span><span>|</span><a href="#42258311">prev</a><span>|</span><a href="#42258410">next</a><span>|</span><label class="collapse" for="c-42260196">[-]</label><label class="expand" for="c-42260196">[2 more]</label></div><br/><div class="children"><div class="content">Delta debugging is not new: <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Delta_debugging" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Delta_debugging</a><p>My implementation of delta debugging, &quot;delta&quot; is 19+ years old: <a href="https:&#x2F;&#x2F;github.com&#x2F;dsw&#x2F;delta">https:&#x2F;&#x2F;github.com&#x2F;dsw&#x2F;delta</a><p>I released it as Open Source because Microsoft Research sent someone to my office to ask me to, back when Microsoft was calling Open Source a &quot;cancer&quot;.<p>The LLVM introduction by Latner refers to the &quot;standard delta debugging tool&quot;, so it is rather well-known: <a href="https:&#x2F;&#x2F;aosabook.org&#x2F;en&#x2F;v1&#x2F;llvm.html" rel="nofollow">https:&#x2F;&#x2F;aosabook.org&#x2F;en&#x2F;v1&#x2F;llvm.html</a> &#x27;unlike the standard &quot;delta&quot; command line tool.&#x27;</div><br/><div id="42260448" class="c"><input type="checkbox" id="c-42260448" checked=""/><div class="controls bullet"><span class="by">arxanas</span><span>|</span><a href="#42260196">parent</a><span>|</span><a href="#42258410">next</a><span>|</span><label class="collapse" for="c-42260448">[-]</label><label class="expand" for="c-42260448">[1 more]</label></div><br/><div class="children"><div class="content">For other readers&#x27; benefit: C-Reduce is a little more sophisticated than plain delta-debugging. From the abstract of Test-Case Reduction for C Compiler Bugs (2012):<p>&gt; [...] [C-Reduce] produces outputs that are, on average, more than 25 times smaller than those produced by our other reducers or by the existing reducer that is most commonly used by compiler developers. We conclude that effective program reduction requires more than straightforward delta debugging.<p>(Of course, this means that C-Reduce is 12 years old now.)<p>At the same time, C-Reduce seems to be more general than the LLVM tool you linked (&quot;BugPoint&quot;, dating to 2002), since that one works with LLVM IR specifically.<p>I think most developers are generally unfamiliar with automatic test case minimization tools and techniques, so the post may be helpful even if the ideas have been known in their respective circles for quite some time.</div><br/></div></div></div></div><div id="42258410" class="c"><input type="checkbox" id="c-42258410" checked=""/><div class="controls bullet"><span class="by">graypegg</span><span>|</span><a href="#42260196">prev</a><span>|</span><a href="#42258445">next</a><span>|</span><label class="collapse" for="c-42258410">[-]</label><label class="expand" for="c-42258410">[1 more]</label></div><br/><div class="children"><div class="content">Found this article with examples of before and after: <a href="https:&#x2F;&#x2F;pramodkumbhar.com&#x2F;2024&#x2F;01&#x2F;c-reduce-systematically-tackling-not-only-compiler-bugs-in-hpc-too&#x2F;" rel="nofollow">https:&#x2F;&#x2F;pramodkumbhar.com&#x2F;2024&#x2F;01&#x2F;c-reduce-systematically-ta...</a><p>But still having trouble understanding how it knows WHAT to remove when trying each iteration. There must be some tokenization going on, but then I don&#x27;t know how that would work across programming languages</div><br/></div></div><div id="42258445" class="c"><input type="checkbox" id="c-42258445" checked=""/><div class="controls bullet"><span class="by">wood_spirit</span><span>|</span><a href="#42258410">prev</a><span>|</span><a href="#42259095">next</a><span>|</span><label class="collapse" for="c-42258445">[-]</label><label class="expand" for="c-42258445">[1 more]</label></div><br/><div class="children"><div class="content">Creduce is awesome.<p>I used a test script that spent hours using CSmith to generate random test programs when developing an esoteric llvm target.  When they crashed it automatically Creduced and left them for inspection.  Invaluable!</div><br/></div></div><div id="42259095" class="c"><input type="checkbox" id="c-42259095" checked=""/><div class="controls bullet"><span class="by">def-</span><span>|</span><a href="#42258445">prev</a><span>|</span><a href="#42263136">next</a><span>|</span><label class="collapse" for="c-42259095">[-]</label><label class="expand" for="c-42259095">[1 more]</label></div><br/><div class="children"><div class="content">Works well for SQL too, I‘ve been using it at my day job, found out via <a href="https:&#x2F;&#x2F;github.com&#x2F;sqlancer&#x2F;sqlancer?tab=readme-ov-file#reducing-a-bug">https:&#x2F;&#x2F;github.com&#x2F;sqlancer&#x2F;sqlancer?tab=readme-ov-file#redu...</a></div><br/></div></div><div id="42263136" class="c"><input type="checkbox" id="c-42263136" checked=""/><div class="controls bullet"><span class="by">af3d</span><span>|</span><a href="#42259095">prev</a><span>|</span><a href="#42258362">next</a><span>|</span><label class="collapse" for="c-42263136">[-]</label><label class="expand" for="c-42263136">[1 more]</label></div><br/><div class="children"><div class="content">The link to the documentation seems to be dead. Archived version:
<a href="https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20221203043431&#x2F;https:&#x2F;&#x2F;embed.cs.utah.edu&#x2F;creduce&#x2F;using&#x2F;" rel="nofollow">https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20221203043431&#x2F;https:&#x2F;&#x2F;embed.cs....</a></div><br/></div></div><div id="42258362" class="c"><input type="checkbox" id="c-42258362" checked=""/><div class="controls bullet"><span class="by">furyofantares</span><span>|</span><a href="#42263136">prev</a><span>|</span><a href="#42263243">next</a><span>|</span><label class="collapse" for="c-42258362">[-]</label><label class="expand" for="c-42258362">[28 more]</label></div><br/><div class="children"><div class="content">Without an explanation of <i>why</i> it works on languages other than C, that is a hard claim to believe! I mean, I don&#x27;t think they&#x27;re lying but (given it doesn&#x27;t use an LLM) I am bewildered.</div><br/><div id="42261842" class="c"><input type="checkbox" id="c-42261842" checked=""/><div class="controls bullet"><span class="by">jcranmer</span><span>|</span><a href="#42258362">parent</a><span>|</span><a href="#42258620">next</a><span>|</span><label class="collapse" for="c-42261842">[-]</label><label class="expand" for="c-42261842">[2 more]</label></div><br/><div class="children"><div class="content">So the short answer is that some of the reduction passes are pretty generalizable to C-family languages, and these can be some of the most effective passes.<p>Some of those passes are:<p>* Tokenize the input according to C, and randomly chuck away chunks of length 1-(I think) 13. Most languages vaguely similar to C have very similar tokenization rules to C, so these kinds of passes are going to have similar effects, and this will tend to be effective in doing things like omitting needless qualifiers or attributes.<p>* Balanced parentheses, and chuck away units of balanced parentheses. This includes (), {}, and []--and for almost any language, this can be a useful level of stuff to throw away or reduce.<p>* Stripping comments and whitespace. Again, many languages use the &#x2F;* and &#x2F;&#x2F; styles of comments that C does, so this is pretty effective.<p>There&#x27;s actually relatively few passes that are incredibly C&#x2F;C++-specific, and in my experience, one of the biggest issues with creduce is that it is absolutely terrible at trying to detemplatize the code as a reduction step, which should be a relatively easily automatible step.</div><br/><div id="42263158" class="c"><input type="checkbox" id="c-42263158" checked=""/><div class="controls bullet"><span class="by">ndjdjddjsjj</span><span>|</span><a href="#42258362">root</a><span>|</span><a href="#42261842">parent</a><span>|</span><a href="#42258620">next</a><span>|</span><label class="collapse" for="c-42263158">[-]</label><label class="expand" for="c-42263158">[1 more]</label></div><br/><div class="children"><div class="content">The compile and test condition do the heavy lifting.</div><br/></div></div></div></div><div id="42258620" class="c"><input type="checkbox" id="c-42258620" checked=""/><div class="controls bullet"><span class="by">wiml</span><span>|</span><a href="#42258362">parent</a><span>|</span><a href="#42261842">prev</a><span>|</span><a href="#42258615">next</a><span>|</span><label class="collapse" for="c-42258620">[-]</label><label class="expand" for="c-42258620">[1 more]</label></div><br/><div class="children"><div class="content">I recommend skimming the PLDI paper linked by asmeurer, it has a good summary. Some of its transforms are pretty C-specific, using the Clang frontend; some are pretty generic and probably work on any Algol-descended language. It&#x27;s meant to be a modular tool, so you could add transforms that understand other languages if you like.</div><br/></div></div><div id="42258615" class="c"><input type="checkbox" id="c-42258615" checked=""/><div class="controls bullet"><span class="by">Kuinox</span><span>|</span><a href="#42258362">parent</a><span>|</span><a href="#42258620">prev</a><span>|</span><a href="#42258551">next</a><span>|</span><label class="collapse" for="c-42258615">[-]</label><label class="expand" for="c-42258615">[10 more]</label></div><br/><div class="children"><div class="content">Without looking at the paper, I would guess it would be like a fuzzer that apply mutations that reduce the size of the input.</div><br/><div id="42258763" class="c"><input type="checkbox" id="c-42258763" checked=""/><div class="controls bullet"><span class="by">gnulinux</span><span>|</span><a href="#42258362">root</a><span>|</span><a href="#42258615">parent</a><span>|</span><a href="#42258551">next</a><span>|</span><label class="collapse" for="c-42258763">[-]</label><label class="expand" for="c-42258763">[9 more]</label></div><br/><div class="children"><div class="content">Isn&#x27;t that potentially unsafe though? Random permutations can reduce arbitrary programs to destructive programs, in particular any program can be mutated to `rm -rf &#x2F;` given enough time. Also even the problem of finding syntactically valid programs is combinatoric, it&#x27;s pretty surprising that it can go toward a local optima in such a short time without having any understanding of the function or its derivatives.</div><br/><div id="42258839" class="c"><input type="checkbox" id="c-42258839" checked=""/><div class="controls bullet"><span class="by">jewel</span><span>|</span><a href="#42258362">root</a><span>|</span><a href="#42258763">parent</a><span>|</span><a href="#42259544">next</a><span>|</span><label class="collapse" for="c-42258839">[-]</label><label class="expand" for="c-42258839">[5 more]</label></div><br/><div class="children"><div class="content">For compiled languages it should be fine, as you&#x27;re only going to compile the permuted source code, not execute it.<p>Given a sufficiently bad compiler bug anything is possible, but I think given that it&#x27;s trying to minimize the size of an input that gives a particular output I don&#x27;t think it&#x27;s likely to explore distant branches.</div><br/><div id="42259784" class="c"><input type="checkbox" id="c-42259784" checked=""/><div class="controls bullet"><span class="by">0x457</span><span>|</span><a href="#42258362">root</a><span>|</span><a href="#42258839">parent</a><span>|</span><a href="#42259526">next</a><span>|</span><label class="collapse" for="c-42259784">[-]</label><label class="expand" for="c-42259784">[1 more]</label></div><br/><div class="children"><div class="content">&gt; For compiled languages it should be fine, as you&#x27;re only going to compile the permuted source code, not execute it.<p>Only if you&#x27;te going for compiler bug. If you&#x27;re working on minimal reproducible example. You need to make sure your code isn&#x27;t reduced to:<p>int main() {
    return 0;
}<p>in that case.</div><br/></div></div><div id="42259526" class="c"><input type="checkbox" id="c-42259526" checked=""/><div class="controls bullet"><span class="by">adastra22</span><span>|</span><a href="#42258362">root</a><span>|</span><a href="#42258839">parent</a><span>|</span><a href="#42259784">prev</a><span>|</span><a href="#42258936">next</a><span>|</span><label class="collapse" for="c-42259526">[-]</label><label class="expand" for="c-42259526">[2 more]</label></div><br/><div class="children"><div class="content">It runs the executed code in order to determine if the bug exists, does it not?</div><br/><div id="42259658" class="c"><input type="checkbox" id="c-42259658" checked=""/><div class="controls bullet"><span class="by">Cieric</span><span>|</span><a href="#42258362">root</a><span>|</span><a href="#42259526">parent</a><span>|</span><a href="#42258936">next</a><span>|</span><label class="collapse" for="c-42259658">[-]</label><label class="expand" for="c-42259658">[1 more]</label></div><br/><div class="children"><div class="content">That depends completely on the interesting-ness test that&#x27;s provided. If you&#x27;re looking for a compiler bug (like I do often for my language), then the interesting-ness test checks the compile logs for information like the &quot;Segmentation Fault&quot; text, no need to run the actual executable. You could also hoist everything into docker if you really want to, or ship it off to another device to run.</div><br/></div></div></div></div><div id="42258936" class="c"><input type="checkbox" id="c-42258936" checked=""/><div class="controls bullet"><span class="by">Quekid5</span><span>|</span><a href="#42258362">root</a><span>|</span><a href="#42258839">parent</a><span>|</span><a href="#42259526">prev</a><span>|</span><a href="#42259544">next</a><span>|</span><label class="collapse" for="c-42258936">[-]</label><label class="expand" for="c-42258936">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Given a sufficiently bad compiler bug anything is possible, ...<p>I can&#x27;t help but wonder about the consteval&#x2F;constexpr machinery in the various C++ compilers... It&#x27;d be interesting to see how much adversarial input has been tested for those.<p>(I guess Zig&#x27;s comptime might also be relevant, but I&#x27;m not sure what that&#x27;s allowed to do. Maybe execute arbitrary code?)<p>... anyway just a stray thought.</div><br/></div></div></div></div><div id="42259544" class="c"><input type="checkbox" id="c-42259544" checked=""/><div class="controls bullet"><span class="by">bawolff</span><span>|</span><a href="#42258362">root</a><span>|</span><a href="#42258763">parent</a><span>|</span><a href="#42258839">prev</a><span>|</span><a href="#42263165">next</a><span>|</span><label class="collapse" for="c-42259544">[-]</label><label class="expand" for="c-42259544">[1 more]</label></div><br/><div class="children"><div class="content">It seems pretty unlikely to mutate in a malicious direction, random chance probably wouldn&#x27;t get there, and there doesn&#x27;t seem like any reason it would be guided in that direction.<p>&quot;Enough time&quot; does a lot of work here and warrants further analysis. With enough time it might produce the works of shakespare (if you ignore its designed to minimize), but we should probably view anything that would take more than a year as too much times.</div><br/></div></div><div id="42263165" class="c"><input type="checkbox" id="c-42263165" checked=""/><div class="controls bullet"><span class="by">ndjdjddjsjj</span><span>|</span><a href="#42258362">root</a><span>|</span><a href="#42258763">parent</a><span>|</span><a href="#42259544">prev</a><span>|</span><a href="#42261914">next</a><span>|</span><label class="collapse" for="c-42263165">[-]</label><label class="expand" for="c-42263165">[1 more]</label></div><br/><div class="children"><div class="content">Docker saves the day again!</div><br/></div></div><div id="42261914" class="c"><input type="checkbox" id="c-42261914" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#42258362">root</a><span>|</span><a href="#42258763">parent</a><span>|</span><a href="#42263165">prev</a><span>|</span><a href="#42258551">next</a><span>|</span><label class="collapse" for="c-42261914">[-]</label><label class="expand" for="c-42261914">[1 more]</label></div><br/><div class="children"><div class="content">Use a sandboxed VM?</div><br/></div></div></div></div></div></div><div id="42258551" class="c"><input type="checkbox" id="c-42258551" checked=""/><div class="controls bullet"><span class="by">bqmjjx0kac</span><span>|</span><a href="#42258362">parent</a><span>|</span><a href="#42258615">prev</a><span>|</span><a href="#42258713">next</a><span>|</span><label class="collapse" for="c-42258551">[-]</label><label class="expand" for="c-42258551">[8 more]</label></div><br/><div class="children"><div class="content">Yes, and without understanding how it works, I&#x27;m left wondering whether it&#x27;s even safe to use this way. Will creduce execute mutated versions of the input script, potentially deleting my files or eating my lunch?</div><br/><div id="42258593" class="c"><input type="checkbox" id="c-42258593" checked=""/><div class="controls bullet"><span class="by">None4U</span><span>|</span><a href="#42258362">root</a><span>|</span><a href="#42258551">parent</a><span>|</span><a href="#42258713">next</a><span>|</span><label class="collapse" for="c-42258593">[-]</label><label class="expand" for="c-42258593">[7 more]</label></div><br/><div class="children"><div class="content">it will execute whatever script you pass it (immutable) and mutate whatever other files you pass it</div><br/><div id="42258805" class="c"><input type="checkbox" id="c-42258805" checked=""/><div class="controls bullet"><span class="by">defen</span><span>|</span><a href="#42258362">root</a><span>|</span><a href="#42258593">parent</a><span>|</span><a href="#42258713">next</a><span>|</span><label class="collapse" for="c-42258805">[-]</label><label class="expand" for="c-42258805">[6 more]</label></div><br/><div class="children"><div class="content">I think the question is, how do you know C-reduce isn&#x27;t going to mutate your test case into calling `remove(&quot;&#x2F;path&#x2F;to&#x2F;my&#x2F;important&#x2F;file&quot;);`</div><br/><div id="42259364" class="c"><input type="checkbox" id="c-42259364" checked=""/><div class="controls bullet"><span class="by">frabert</span><span>|</span><a href="#42258362">root</a><span>|</span><a href="#42258805">parent</a><span>|</span><a href="#42259148">next</a><span>|</span><label class="collapse" for="c-42259364">[-]</label><label class="expand" for="c-42259364">[4 more]</label></div><br/><div class="children"><div class="content">C-reduce is meant to... Reduce your files, it would not add stuff that was not there in the first place. Also, I think it&#x27;s meant to only be run against the &quot;frontend&quot; of most languages, not full execution</div><br/><div id="42259714" class="c"><input type="checkbox" id="c-42259714" checked=""/><div class="controls bullet"><span class="by">chubot</span><span>|</span><a href="#42258362">root</a><span>|</span><a href="#42259364">parent</a><span>|</span><a href="#42259148">next</a><span>|</span><label class="collapse" for="c-42259714">[-]</label><label class="expand" for="c-42259714">[3 more]</label></div><br/><div class="children"><div class="content">Yeah but you could have a shell script that does<p><pre><code>    rm -rf &#x2F;foo&#x2F;bar
</code></pre>
and in theory it could reduce it to<p><pre><code>    rm -rf &#x2F;
</code></pre>
The passes are very heuristic, so that doesn&#x27;t seem like something you can rule out.<p>(and I actually want to run it on shell scripts! )</div><br/><div id="42259812" class="c"><input type="checkbox" id="c-42259812" checked=""/><div class="controls bullet"><span class="by">Cieric</span><span>|</span><a href="#42258362">root</a><span>|</span><a href="#42259714">parent</a><span>|</span><a href="#42261150">next</a><span>|</span><label class="collapse" for="c-42259812">[-]</label><label class="expand" for="c-42259812">[1 more]</label></div><br/><div class="children"><div class="content">While I&#x27;ve used c-reduce before, I&#x27;ve never done it in a way where it could be destructive. However speculating based on what I do know. I think the 2 things I would do would be in the interesting-ness test, grep for already known harmful instructions and force them to be uninteresting (returning 1). And then if I was still unsure of the potential harm of the program and I had to run it to determine if it&#x27;s interesting or not (segfault or something similar). I think I would hoist the binary&#x2F;script into a docker container and run it there. That way the log and result can still be checked, but it&#x27;s access to actual file system is minimized as much as possible.<p>TLDR; C-Reduce just gives you text to run&#x2F;compile, if you&#x27;re worried about things like that sandbox as much as possible.</div><br/></div></div><div id="42261150" class="c"><input type="checkbox" id="c-42261150" checked=""/><div class="controls bullet"><span class="by">btilly</span><span>|</span><a href="#42258362">root</a><span>|</span><a href="#42259714">parent</a><span>|</span><a href="#42259812">prev</a><span>|</span><a href="#42259148">next</a><span>|</span><label class="collapse" for="c-42261150">[-]</label><label class="expand" for="c-42261150">[1 more]</label></div><br/><div class="children"><div class="content">So just run it inside of a Docker instance.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="42258713" class="c"><input type="checkbox" id="c-42258713" checked=""/><div class="controls bullet"><span class="by">keybored</span><span>|</span><a href="#42258362">parent</a><span>|</span><a href="#42258551">prev</a><span>|</span><a href="#42258386">next</a><span>|</span><label class="collapse" for="c-42258713">[-]</label><label class="expand" for="c-42258713">[3 more]</label></div><br/><div class="children"><div class="content">&gt; I mean, I don&#x27;t think they&#x27;re lying but (given it doesn&#x27;t use an LLM) I am bewildered.<p>I’m pretty sure (based on the last time I saw this) that this is just good old fashioned computer science.[1]<p>I really hope that HN hasn’t forgotten about good old fashioned computer science stuff already.<p>[1] All the algorithm and whatnot stuff, not the spooky machine learning stuff. Even things like Prolog-for-AI, although that has the slight downside of not working (for the purposes of making AI).</div><br/><div id="42259213" class="c"><input type="checkbox" id="c-42259213" checked=""/><div class="controls bullet"><span class="by">furyofantares</span><span>|</span><a href="#42258362">root</a><span>|</span><a href="#42258713">parent</a><span>|</span><a href="#42258386">next</a><span>|</span><label class="collapse" for="c-42259213">[-]</label><label class="expand" for="c-42259213">[2 more]</label></div><br/><div class="children"><div class="content">To be clear my comment was meant to be an awareness that it is good old fashioned computer science. Without LLMs, which this predates, it is surprising to me that you&#x27;d have a lot of success reducing a program in an arbitrary language and still having something that&#x27;s valid syntax!<p>I do get that it will reject a lot of stuff as not working (and has to even in the target language) and I also get that algol-like languages are all very similar, but I am still surprised that it works well enough to function on ~arbitrary languages.<p>These are very LLM-era properties for a program to have. The question is not &quot;does it work for language x&quot; but &quot;how well does it work for language x&quot;, and the answer is not &quot;is it one of the languages it was designed for&quot; but instead &quot;idunno try it out and see&quot;.</div><br/><div id="42263199" class="c"><input type="checkbox" id="c-42263199" checked=""/><div class="controls bullet"><span class="by">ndjdjddjsjj</span><span>|</span><a href="#42258362">root</a><span>|</span><a href="#42259213">parent</a><span>|</span><a href="#42258386">next</a><span>|</span><label class="collapse" for="c-42263199">[-]</label><label class="expand" for="c-42263199">[1 more]</label></div><br/><div class="children"><div class="content">An AST for you favourite language is readily availble so get one and go nuts.<p>I am sure in 2006 or so I was doing &quot;extract method&quot; in Resharper. And Lispers probably doing it for centuries ;)</div><br/></div></div></div></div></div></div><div id="42258386" class="c"><input type="checkbox" id="c-42258386" checked=""/><div class="controls bullet"><span class="by">johnisgood</span><span>|</span><a href="#42258362">parent</a><span>|</span><a href="#42258713">prev</a><span>|</span><a href="#42263243">next</a><span>|</span><label class="collapse" for="c-42258386">[-]</label><label class="expand" for="c-42258386">[3 more]</label></div><br/><div class="children"><div class="content">Yeah, I would have liked to see more examples and an explanation.</div><br/><div id="42258430" class="c"><input type="checkbox" id="c-42258430" checked=""/><div class="controls bullet"><span class="by">evmar</span><span>|</span><a href="#42258362">root</a><span>|</span><a href="#42258386">parent</a><span>|</span><a href="#42263243">next</a><span>|</span><label class="collapse" for="c-42258430">[-]</label><label class="expand" for="c-42258430">[2 more]</label></div><br/><div class="children"><div class="content">I glanced at the code.  It seems to have multiple possible &quot;passes&quot; which reduce the code in various ways, and the passes here not tagged with &quot;C&quot;=&gt;1 are used in the not-c mode recommended in the post.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;csmith-project&#x2F;creduce&#x2F;blob&#x2F;31e855e290970cba0286e5032971509c0e7c0a80&#x2F;creduce&#x2F;creduce.in#L769">https:&#x2F;&#x2F;github.com&#x2F;csmith-project&#x2F;creduce&#x2F;blob&#x2F;31e855e290970...</a><p>You can see the pass implementation in files on the left.</div><br/><div id="42258661" class="c"><input type="checkbox" id="c-42258661" checked=""/><div class="controls bullet"><span class="by">wat10000</span><span>|</span><a href="#42258362">root</a><span>|</span><a href="#42258430">parent</a><span>|</span><a href="#42263243">next</a><span>|</span><label class="collapse" for="c-42258661">[-]</label><label class="expand" for="c-42258661">[1 more]</label></div><br/><div class="children"><div class="content">The key thing is that the transforms it makes aren’t required to always produce a program that can actually run, or even build.<p>The user provides a script which determines if a program is “interesting.” A program with build-time errors should be considered “not interesting” in most cases. (And if you’re hunting an incorrectly reported error, you’ll want to make sure you only consider that error to be interesting.)<p>Then it yoinks out parts of your program and checks if the result is still interesting. If it’s not, that attempt is discarded and it tries something else. If the reduced program is still interesting, it will try yoinking out more stuff. Repeat until you like the result.<p>There doesn’t need to be any understanding of the program in order for this to work. You just need something where removing some bit of the program has a chance of producing a new program that’s still interesting. That works in most programming languages.<p>This process can take a long time, and it’s slower when there’s a lower probability of a removal producing an interesting program. Thus heuristics are added: don’t remove random character ranges, but work at a token level. When removing a brace, find the matching brace and remove the insides. That sort of thing. Most modern languages are similar enough to C that many of these rules are helpful for them too. And even if they don’t help, this just slows the process down, but it still works.</div><br/></div></div></div></div></div></div></div></div><div id="42263243" class="c"><input type="checkbox" id="c-42263243" checked=""/><div class="controls bullet"><span class="by">rurban</span><span>|</span><a href="#42258362">prev</a><span>|</span><a href="#42259878">next</a><span>|</span><label class="collapse" for="c-42263243">[-]</label><label class="expand" for="c-42263243">[2 more]</label></div><br/><div class="children"><div class="content">Of course, because it&#x27;s perl, the Swiss army knife. Reducing token sets, blocks, statements is pretty language agnostic. It would have been an overarchitectured multi-file mess in python</div><br/><div id="42263313" class="c"><input type="checkbox" id="c-42263313" checked=""/><div class="controls bullet"><span class="by">edwcross</span><span>|</span><a href="#42263243">parent</a><span>|</span><a href="#42259878">next</a><span>|</span><label class="collapse" for="c-42263313">[-]</label><label class="expand" for="c-42263313">[1 more]</label></div><br/><div class="children"><div class="content">A &quot;super-parallel Python port&quot; of C-Reduce, cvise (<a href="https:&#x2F;&#x2F;github.com&#x2F;marxin&#x2F;cvise">https:&#x2F;&#x2F;github.com&#x2F;marxin&#x2F;cvise</a>), is actually written in Python.</div><br/></div></div></div></div><div id="42259878" class="c"><input type="checkbox" id="c-42259878" checked=""/><div class="controls bullet"><span class="by">gmueckl</span><span>|</span><a href="#42263243">prev</a><span>|</span><a href="#42261408">next</a><span>|</span><label class="collapse" for="c-42259878">[-]</label><label class="expand" for="c-42259878">[1 more]</label></div><br/><div class="children"><div class="content">How does this compare to dustmite (<a href="https:&#x2F;&#x2F;dlang.org&#x2F;blog&#x2F;2020&#x2F;04&#x2F;13&#x2F;dustmite-the-general-purpose-data-reduction-tool&#x2F;" rel="nofollow">https:&#x2F;&#x2F;dlang.org&#x2F;blog&#x2F;2020&#x2F;04&#x2F;13&#x2F;dustmite-the-general-purpo...</a>)?</div><br/></div></div><div id="42261408" class="c"><input type="checkbox" id="c-42261408" checked=""/><div class="controls bullet"><span class="by">wyldfire</span><span>|</span><a href="#42259878">prev</a><span>|</span><a href="#42258912">next</a><span>|</span><label class="collapse" for="c-42261408">[-]</label><label class="expand" for="c-42261408">[1 more]</label></div><br/><div class="children"><div class="content">A good companion&#x2F; successor is cvise.<p>I&#x27;ve used c-reduce&#x2F;cvise to reduce assembly programs to the minimal set that evokes an assembler defect quite a few times. It&#x27;s a real handy program.<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;marxin&#x2F;cvise">https:&#x2F;&#x2F;github.com&#x2F;marxin&#x2F;cvise</a></div><br/></div></div><div id="42258912" class="c"><input type="checkbox" id="c-42258912" checked=""/><div class="controls bullet"><span class="by">andrewchambers</span><span>|</span><a href="#42261408">prev</a><span>|</span><a href="#42262651">next</a><span>|</span><label class="collapse" for="c-42258912">[-]</label><label class="expand" for="c-42258912">[1 more]</label></div><br/><div class="children"><div class="content">I wrote a general purpose delta debugger in python - <a href="https:&#x2F;&#x2F;github.com&#x2F;andrewchambers&#x2F;ddmin-python">https:&#x2F;&#x2F;github.com&#x2F;andrewchambers&#x2F;ddmin-python</a>. Can be used to do the same thing.</div><br/></div></div><div id="42262651" class="c"><input type="checkbox" id="c-42262651" checked=""/><div class="controls bullet"><span class="by">ndesaulniers</span><span>|</span><a href="#42258912">prev</a><span>|</span><a href="#42260842">next</a><span>|</span><label class="collapse" for="c-42262651">[-]</label><label class="expand" for="c-42262651">[1 more]</label></div><br/><div class="children"><div class="content">True, I&#x27;ve used it for asm, though these days I prefer c-vise.</div><br/></div></div><div id="42260842" class="c"><input type="checkbox" id="c-42260842" checked=""/><div class="controls bullet"><span class="by">jheriko</span><span>|</span><a href="#42262651">prev</a><span>|</span><label class="collapse" for="c-42260842">[-]</label><label class="expand" for="c-42260842">[2 more]</label></div><br/><div class="children"><div class="content">the seems somewhat interesting but the example given is incredibly stupid.</div><br/><div id="42260978" class="c"><input type="checkbox" id="c-42260978" checked=""/><div class="controls bullet"><span class="by">tekknolagi</span><span>|</span><a href="#42260842">parent</a><span>|</span><label class="collapse" for="c-42260978">[-]</label><label class="expand" for="c-42260978">[1 more]</label></div><br/><div class="children"><div class="content">Thank you for your feedback. I&#x27;ll take that into consideration for my next blog post and compiler.</div><br/></div></div></div></div></div></div></div></div></div></body></html>