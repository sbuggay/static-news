<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1735030877304" as="style"/><link rel="stylesheet" href="styles.css?v=1735030877304"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://onlinelibrary.wiley.com/doi/10.1002/spe.3296">Parsing millions of URLs per Second (2023)</a> <span class="domain">(<a href="https://onlinelibrary.wiley.com">onlinelibrary.wiley.com</a>)</span></div><div class="subtext"><span>PaulHoule</span> | <span>21 comments</span></div><br/><div><div id="42499001" class="c"><input type="checkbox" id="c-42499001" checked=""/><div class="controls bullet"><span class="by">Cicero22</span><span>|</span><a href="#42500317">next</a><span>|</span><label class="collapse" for="c-42499001">[-]</label><label class="expand" for="c-42499001">[1 more]</label></div><br/><div class="children"><div class="content">This sort of work is something I wouldn&#x27;t be able to do, but I can&#x27;t help but point out at least one potential issue with the paper. It&#x27;s a lot easier to find problems than solutions I guess.<p>Are the benchmarks comparing node versions valid to conclude a real world performance increase?<p>one possible confounder is the version of V8.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;nodejs&#x2F;node&#x2F;blob&#x2F;v18.x&#x2F;deps&#x2F;v8&#x2F;include&#x2F;v8-version.h">https:&#x2F;&#x2F;github.com&#x2F;nodejs&#x2F;node&#x2F;blob&#x2F;v18.x&#x2F;deps&#x2F;v8&#x2F;include&#x2F;v8...</a>
<a href="https:&#x2F;&#x2F;github.com&#x2F;nodejs&#x2F;node&#x2F;blob&#x2F;v20.x&#x2F;deps&#x2F;v8&#x2F;include&#x2F;v8-version.h">https:&#x2F;&#x2F;github.com&#x2F;nodejs&#x2F;node&#x2F;blob&#x2F;v20.x&#x2F;deps&#x2F;v8&#x2F;include&#x2F;v8...</a><p>ideally, they would&#x27;ve patched Node 18.15 with their changes directly and test their patch against 18.15.</div><br/></div></div><div id="42500317" class="c"><input type="checkbox" id="c-42500317" checked=""/><div class="controls bullet"><span class="by">maartenscholl</span><span>|</span><a href="#42499001">prev</a><span>|</span><a href="#42499258">next</a><span>|</span><label class="collapse" for="c-42500317">[-]</label><label class="expand" for="c-42500317">[1 more]</label></div><br/><div class="children"><div class="content">I had a lot of fun writing low latency parsers for various message standards C++. There are a lot of fun things you can do when you can take ownership of the read buffer and you can figure out how to parse in-situ (modifying the data in place as you move along)</div><br/></div></div><div id="42499258" class="c"><input type="checkbox" id="c-42499258" checked=""/><div class="controls bullet"><span class="by">beached_whale</span><span>|</span><a href="#42500317">prev</a><span>|</span><a href="#42498670">next</a><span>|</span><label class="collapse" for="c-42499258">[-]</label><label class="expand" for="c-42499258">[1 more]</label></div><br/><div class="children"><div class="content">Found the easier to read&#x2F;download from Arxiv link<p><a href="https:&#x2F;&#x2F;arxiv.org&#x2F;abs&#x2F;2311.10533" rel="nofollow">https:&#x2F;&#x2F;arxiv.org&#x2F;abs&#x2F;2311.10533</a></div><br/></div></div><div id="42498670" class="c"><input type="checkbox" id="c-42498670" checked=""/><div class="controls bullet"><span class="by">notamy</span><span>|</span><a href="#42499258">prev</a><span>|</span><a href="#42499251">next</a><span>|</span><label class="collapse" for="c-42498670">[-]</label><label class="expand" for="c-42498670">[6 more]</label></div><br/><div class="children"><div class="content">The title seems to have a few words missing. Original title:<p>&gt; Parsing millions of URLs per second</div><br/><div id="42498722" class="c"><input type="checkbox" id="c-42498722" checked=""/><div class="controls bullet"><span class="by">HL33tibCe7</span><span>|</span><a href="#42498670">parent</a><span>|</span><a href="#42499251">next</a><span>|</span><label class="collapse" for="c-42498722">[-]</label><label class="expand" for="c-42498722">[5 more]</label></div><br/><div class="children"><div class="content">HN’s stupid&#x2F;arrogant automatic title rewriter strikes again</div><br/><div id="42499747" class="c"><input type="checkbox" id="c-42499747" checked=""/><div class="controls bullet"><span class="by">kristianp</span><span>|</span><a href="#42498670">root</a><span>|</span><a href="#42498722">parent</a><span>|</span><a href="#42498766">next</a><span>|</span><label class="collapse" for="c-42499747">[-]</label><label class="expand" for="c-42499747">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve never noticed a title being rewritten automatically when posting an article.  Are you sure that&#x27;s really a thing?</div><br/><div id="42500161" class="c"><input type="checkbox" id="c-42500161" checked=""/><div class="controls bullet"><span class="by">pests</span><span>|</span><a href="#42498670">root</a><span>|</span><a href="#42499747">parent</a><span>|</span><a href="#42498766">next</a><span>|</span><label class="collapse" for="c-42500161">[-]</label><label class="expand" for="c-42500161">[2 more]</label></div><br/><div class="children"><div class="content">There are some auto rewrite rules. Off the top of my head: numbers in the beginning are stripped, [pdf] or [video] can be added to the end, and one more I can&#x27;t remember that gets stripped off beginning and can cause confusion.<p>A pdf link to &quot;5 Reasons To Do Things&quot; will be &quot;Reasons To Do Things [pdf]&quot; for example.</div><br/></div></div></div></div><div id="42498766" class="c"><input type="checkbox" id="c-42498766" checked=""/><div class="controls bullet"><span class="by">PaulHoule</span><span>|</span><a href="#42498670">root</a><span>|</span><a href="#42498722">parent</a><span>|</span><a href="#42499747">prev</a><span>|</span><a href="#42499251">next</a><span>|</span><label class="collapse" for="c-42498766">[-]</label><label class="expand" for="c-42498766">[1 more]</label></div><br/><div class="children"><div class="content">Fixed</div><br/></div></div></div></div></div></div><div id="42499251" class="c"><input type="checkbox" id="c-42499251" checked=""/><div class="controls bullet"><span class="by">TZubiri</span><span>|</span><a href="#42498670">prev</a><span>|</span><a href="#42500337">next</a><span>|</span><label class="collapse" for="c-42499251">[-]</label><label class="expand" for="c-42499251">[9 more]</label></div><br/><div class="children"><div class="content">The title doesn&#x27;t sound impressive at all to make me want to read this<p>a regex can parse millions of URLS on a home computer (say 4GHz, you get 4000 cycles per URL.)<p>These things were desgined to be parsed.</div><br/><div id="42499275" class="c"><input type="checkbox" id="c-42499275" checked=""/><div class="controls bullet"><span class="by">fabrice_d</span><span>|</span><a href="#42499251">parent</a><span>|</span><a href="#42499354">next</a><span>|</span><label class="collapse" for="c-42499275">[-]</label><label class="expand" for="c-42499275">[5 more]</label></div><br/><div class="children"><div class="content">The article explains optimizations to spend less cycles parsing URLs than other libraries. Very interesting work, there&#x27;s no reason not to do things efficiently when it&#x27;s possible.<p>Also, good luck using regex to write a RFC or WHATWG conformant URL parser.</div><br/><div id="42499312" class="c"><input type="checkbox" id="c-42499312" checked=""/><div class="controls bullet"><span class="by">TZubiri</span><span>|</span><a href="#42499251">root</a><span>|</span><a href="#42499275">parent</a><span>|</span><a href="#42499354">next</a><span>|</span><label class="collapse" for="c-42499312">[-]</label><label class="expand" for="c-42499312">[4 more]</label></div><br/><div class="children"><div class="content">2 minutes reading an rfc about uris and I find a regex literally used in the specs:<p><a href="https:&#x2F;&#x2F;www.rfc-editor.org&#x2F;rfc&#x2F;rfc3986#page-7" rel="nofollow">https:&#x2F;&#x2F;www.rfc-editor.org&#x2F;rfc&#x2F;rfc3986#page-7</a><p>&gt;&gt; The following line is the regular expression for breaking-down a
well-formed URI reference into its components.<p>&gt;&gt; ^(([^:&#x2F;?#]+):)?(&#x2F;&#x2F;([^&#x2F;?#]<i>))?([^?#]</i>)(\?([^#]<i>))?(#(.</i>))?<p>Did Chomsky die for nothing?<p>I guess there are reasons to do things efficiently when possible, but a million URLs is not it, the adage about the root of all evil comes to mind. A billion URLs per second and it&#x27;s almost interesting, but not really.</div><br/><div id="42499579" class="c"><input type="checkbox" id="c-42499579" checked=""/><div class="controls bullet"><span class="by">yagiznizipli</span><span>|</span><a href="#42499251">root</a><span>|</span><a href="#42499312">parent</a><span>|</span><a href="#42499570">next</a><span>|</span><label class="collapse" for="c-42499579">[-]</label><label class="expand" for="c-42499579">[1 more]</label></div><br/><div class="children"><div class="content">RFC 3986 is a lot simpler than WHATWG spec. You can literally write a zero copy 3986 parser whereas you can’t with WHATWG. (And Ada is still faster than 3986 parsers)</div><br/></div></div><div id="42499570" class="c"><input type="checkbox" id="c-42499570" checked=""/><div class="controls bullet"><span class="by">switchbak</span><span>|</span><a href="#42499251">root</a><span>|</span><a href="#42499312">parent</a><span>|</span><a href="#42499579">prev</a><span>|</span><a href="#42499433">next</a><span>|</span><label class="collapse" for="c-42499570">[-]</label><label class="expand" for="c-42499570">[1 more]</label></div><br/><div class="children"><div class="content">Last I heard Noam Chomsky was still alive, and a quick Google doesn’t contradict that. Or is this some kind of high brow joke that went over my head?</div><br/></div></div><div id="42499433" class="c"><input type="checkbox" id="c-42499433" checked=""/><div class="controls bullet"><span class="by">FroshKiller</span><span>|</span><a href="#42499251">root</a><span>|</span><a href="#42499312">parent</a><span>|</span><a href="#42499570">prev</a><span>|</span><a href="#42499354">next</a><span>|</span><label class="collapse" for="c-42499433">[-]</label><label class="expand" for="c-42499433">[1 more]</label></div><br/><div class="children"><div class="content">The spec provides an expression for &quot;well-formed&quot; URIs. Good luck with real-world input.</div><br/></div></div></div></div></div></div><div id="42499354" class="c"><input type="checkbox" id="c-42499354" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#42499251">parent</a><span>|</span><a href="#42499275">prev</a><span>|</span><a href="#42500337">next</a><span>|</span><label class="collapse" for="c-42499354">[-]</label><label class="expand" for="c-42499354">[3 more]</label></div><br/><div class="children"><div class="content">That will get you only one million per second.<p>And depending on the length of your URL, 4000 will not be trivial, depending on the output format.</div><br/><div id="42499790" class="c"><input type="checkbox" id="c-42499790" checked=""/><div class="controls bullet"><span class="by">metadat</span><span>|</span><a href="#42499251">root</a><span>|</span><a href="#42499354">parent</a><span>|</span><a href="#42499507">next</a><span>|</span><label class="collapse" for="c-42499790">[-]</label><label class="expand" for="c-42499790">[1 more]</label></div><br/><div class="children"><div class="content">Correct, URLs can be something like 4,000 characters long in 15 year old Firefox.  I wonder what the current maximum length is?<p>Today, Chrome supports 32,768 characters.. good luck processing that in 4,000 cycles!  It&#x27;d require SIMD or some other fanciness.</div><br/></div></div><div id="42499507" class="c"><input type="checkbox" id="c-42499507" checked=""/><div class="controls bullet"><span class="by">yjftsjthsd-h</span><span>|</span><a href="#42499251">root</a><span>|</span><a href="#42499354">parent</a><span>|</span><a href="#42499790">prev</a><span>|</span><a href="#42500337">next</a><span>|</span><label class="collapse" for="c-42499507">[-]</label><label class="expand" for="c-42499507">[1 more]</label></div><br/><div class="children"><div class="content">&gt; That will get you only one million per second.<p>But per core, right?</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>