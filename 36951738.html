<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1690880459345" as="style"/><link rel="stylesheet" href="styles.css?v=1690880459345"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://tylercipriani.com/blog/2023/07/31/git-files-hidden-in-plain-sight/">Git files hidden in plain sight</a> <span class="domain">(<a href="https://tylercipriani.com">tylercipriani.com</a>)</span></div><div class="subtext"><span>thcipriani</span> | <span>14 comments</span></div><br/><div><div id="36952454" class="c"><input type="checkbox" id="c-36952454" checked=""/><div class="controls bullet"><span class="by">mosselman</span><span>|</span><a href="#36952764">next</a><span>|</span><label class="collapse" for="c-36952454">[-]</label><label class="expand" for="c-36952454">[10 more]</label></div><br/><div class="children"><div class="content">I know this isn’t about the signing really, but it is my understanding that you sign things with your private key and people can verify that it was you who signed it with the matching public key.<p>Does this work differently with git?</div><br/><div id="36952938" class="c"><input type="checkbox" id="c-36952938" checked=""/><div class="controls bullet"><span class="by">woodruffw</span><span>|</span><a href="#36952454">parent</a><span>|</span><a href="#36952512">next</a><span>|</span><label class="collapse" for="c-36952938">[-]</label><label class="expand" for="c-36952938">[1 more]</label></div><br/><div class="children"><div class="content">Nope, it’s the same. I believe the blog post is trying to say that including the key in the git object storage is effectively the same thing as self-signing, since there’s no independent key discovery or trust mechanism. In other words: it’s not because it’s a private key, but because putting a public key in the same channel that it’s meant to verify is essentially “useless” from a verification perspective.</div><br/></div></div><div id="36952512" class="c"><input type="checkbox" id="c-36952512" checked=""/><div class="controls bullet"><span class="by">seeknotfind</span><span>|</span><a href="#36952454">parent</a><span>|</span><a href="#36952938">prev</a><span>|</span><a href="#36952530">next</a><span>|</span><label class="collapse" for="c-36952512">[-]</label><label class="expand" for="c-36952512">[7 more]</label></div><br/><div class="children"><div class="content">This is not a security issue. The key is just hard to update when it expires. Private is private, public is public, even in git.</div><br/><div id="36952998" class="c"><input type="checkbox" id="c-36952998" checked=""/><div class="controls bullet"><span class="by">woodruffw</span><span>|</span><a href="#36952454">root</a><span>|</span><a href="#36952512">parent</a><span>|</span><a href="#36952876">next</a><span>|</span><label class="collapse" for="c-36952998">[-]</label><label class="expand" for="c-36952998">[1 more]</label></div><br/><div class="children"><div class="content">It’s a security issue in the sense that it defeats the signing scheme: rather than negotiating the key out-of-band, the user is trusting the thing they’re trying to verify to supply the key. In other words “trust me because I’m signed, and also trust me to give you the key I’m signed with.”<p>On the other hand, approximately nobody actually verifies git commit signatures, so it doesn’t matter all that much :-)</div><br/></div></div><div id="36952876" class="c"><input type="checkbox" id="c-36952876" checked=""/><div class="controls bullet"><span class="by">whirlwin</span><span>|</span><a href="#36952454">root</a><span>|</span><a href="#36952512">parent</a><span>|</span><a href="#36952998">prev</a><span>|</span><a href="#36952530">next</a><span>|</span><label class="collapse" for="c-36952876">[-]</label><label class="expand" for="c-36952876">[5 more]</label></div><br/><div class="children"><div class="content">Why does it need to be public? By revealing your public key you also reveal the algo used for your public&#x2F;private keypair. If you are a renowned developer and have an insecure algo, you might be a victim for targeted attacks</div><br/><div id="36952930" class="c"><input type="checkbox" id="c-36952930" checked=""/><div class="controls bullet"><span class="by">woodruffw</span><span>|</span><a href="#36952454">root</a><span>|</span><a href="#36952876">parent</a><span>|</span><a href="#36953001">next</a><span>|</span><label class="collapse" for="c-36952930">[-]</label><label class="expand" for="c-36952930">[3 more]</label></div><br/><div class="children"><div class="content">If your goal is to have others verify your signatures, then they need to have your public key.<p>The solution to using weak algorithms is to not use them, not to hide your public key. If you don’t reveal your public key, then there’s effectively no value in the signatures made by its private half.</div><br/><div id="36953582" class="c"><input type="checkbox" id="c-36953582" checked=""/><div class="controls bullet"><span class="by">lloeki</span><span>|</span><a href="#36952454">root</a><span>|</span><a href="#36952930">parent</a><span>|</span><a href="#36953509">next</a><span>|</span><label class="collapse" for="c-36953582">[-]</label><label class="expand" for="c-36953582">[1 more]</label></div><br/><div class="children"><div class="content">Fun fact, just as SSH public keys for a user are readily publicly  available on GitHub, gpg keys are as well<p><pre><code>    curl https:&#x2F;&#x2F;github.com&#x2F;${username}.keys
    curl https:&#x2F;&#x2F;github.com&#x2F;${username}.gpg | gpg --list-packets
</code></pre>
Interestingly enough, since changing the GH keys is subject to GH authentication (possibly involving 2FA), the owner&#x27;s key is kind of validated (by GH) so it _kind of_ makes GH a gpg key notary.<p>Having `git log --show-signatures` validate _all_ signatures is then a matter of:<p><pre><code>    curl https:&#x2F;&#x2F;github.com&#x2F;${username}.gpg | gpg --import
</code></pre>
Now I kind of wish GH would sign such user pub keys _at the time they&#x27;re added_ (thus at the time GH authentication is deemed valid), thus ensuring they&#x27;ve not been tampered with in between.<p>With a bit of UI GH could present a UI for a user to validate another user&#x27;s key, and sign that assertion (with a GH private key, not the user&#x27;s of course) as well.<p>Of course it hinges on trusting GH, but GH already signs e.g UI borne merge commits on your behalf so there&#x27;s that.<p>Then next step would be for GH to host an actual key server to accept off-band signed keys containing a magic comment that bind the keys and sigs to GH usernames...</div><br/></div></div><div id="36953509" class="c"><input type="checkbox" id="c-36953509" checked=""/><div class="controls bullet"><span class="by">whirlwin</span><span>|</span><a href="#36952454">root</a><span>|</span><a href="#36952930">parent</a><span>|</span><a href="#36953582">prev</a><span>|</span><a href="#36953001">next</a><span>|</span><label class="collapse" for="c-36953509">[-]</label><label class="expand" for="c-36953509">[1 more]</label></div><br/><div class="children"><div class="content">Isn&#x27;t the best way to verify the integrity to use git signed commits? GitHub has great support for this</div><br/></div></div></div></div><div id="36953001" class="c"><input type="checkbox" id="c-36953001" checked=""/><div class="controls bullet"><span class="by">lvc_</span><span>|</span><a href="#36952454">root</a><span>|</span><a href="#36952876">parent</a><span>|</span><a href="#36952930">prev</a><span>|</span><a href="#36952530">next</a><span>|</span><label class="collapse" for="c-36953001">[-]</label><label class="expand" for="c-36953001">[1 more]</label></div><br/><div class="children"><div class="content">It doesn&#x27;t necessarily need to be public in the global sense, but it is public in the sense of &quot;you can&#x27;t rely on keeping it secret as a security boundary&quot;. Since its used to validate the signature, it will usually need to be (at least) as public as the signed thing.</div><br/></div></div></div></div></div></div><div id="36952530" class="c"><input type="checkbox" id="c-36952530" checked=""/><div class="controls bullet"><span class="by">LukeShu</span><span>|</span><a href="#36952454">parent</a><span>|</span><a href="#36952512">prev</a><span>|</span><a href="#36952764">next</a><span>|</span><label class="collapse" for="c-36952530">[-]</label><label class="expand" for="c-36952530">[1 more]</label></div><br/><div class="children"><div class="content">Nope, that&#x27;s how it works with Git.</div><br/></div></div></div></div><div id="36952764" class="c"><input type="checkbox" id="c-36952764" checked=""/><div class="controls bullet"><span class="by">eisbaw</span><span>|</span><a href="#36952454">prev</a><span>|</span><a href="#36952897">next</a><span>|</span><label class="collapse" for="c-36952764">[-]</label><label class="expand" for="c-36952764">[2 more]</label></div><br/><div class="children"><div class="content">&quot;Hiding&quot; a file as a raw blob with a tag pointing to it, isn&#x27;t bad if the thing should be able to expire.<p>If a thing is truly expired, then why have it fill-up the commit graph.<p>That said, a public key - even an expired one - may have value in keeping around: Verifying older historic releases.</div><br/><div id="36952797" class="c"><input type="checkbox" id="c-36952797" checked=""/><div class="controls bullet"><span class="by">LukeShu</span><span>|</span><a href="#36952764">parent</a><span>|</span><a href="#36952897">next</a><span>|</span><label class="collapse" for="c-36952797">[-]</label><label class="expand" for="c-36952797">[1 more]</label></div><br/><div class="children"><div class="content">By default, most things assume that tags are immutable and won&#x27;t check for updates to a tag.  So tags aren&#x27;t great for things that can expire or otherwise need to be changed.</div><br/></div></div></div></div></div></div></div></div></div></body></html>