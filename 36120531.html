<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1685437257244" as="style"/><link rel="stylesheet" href="styles.css?v=1685437257244"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://pubs.geoscienceworld.org/geophysics/article-abstract/88/3/F29/622154/HDF5eis-A-storage-and-input-output-solution-for?redirectedFrom=fulltext">HDF5eis: Storage IO solution for big multidimensional time series sensor data</a> <span class="domain">(<a href="https://pubs.geoscienceworld.org">pubs.geoscienceworld.org</a>)</span></div><div class="subtext"><span>teleforce</span> | <span>27 comments</span></div><br/><div><div id="36121851" class="c"><input type="checkbox" id="c-36121851" checked=""/><div class="controls bullet"><span class="by">nicobrevin</span><span>|</span><a href="#36120911">next</a><span>|</span><label class="collapse" for="c-36121851">[-]</label><label class="expand" for="c-36121851">[2 more]</label></div><br/><div class="children"><div class="content">It would be nice if the hdf5 people could add better support for concurrency, a la <a href="https:&#x2F;&#x2F;www.hdfgroup.org&#x2F;2020&#x2F;11&#x2F;webinar-enabling-multithreading-concurrency-in-hdf5-community-discussion" rel="nofollow">https:&#x2F;&#x2F;www.hdfgroup.org&#x2F;2020&#x2F;11&#x2F;webinar-enabling-multithrea...</a><p>I can&#x27;t imagine there&#x27;ll be a queue of people wanting to implement that for fun on their weekend</div><br/><div id="36122158" class="c"><input type="checkbox" id="c-36122158" checked=""/><div class="controls bullet"><span class="by">mgaunard</span><span>|</span><a href="#36121851">parent</a><span>|</span><a href="#36120911">next</a><span>|</span><label class="collapse" for="c-36122158">[-]</label><label class="expand" for="c-36122158">[1 more]</label></div><br/><div class="children"><div class="content">Mostly sounds like a bad idea.<p>HDF5 is on the way out anyway.</div><br/></div></div></div></div><div id="36120911" class="c"><input type="checkbox" id="c-36120911" checked=""/><div class="controls bullet"><span class="by">29athrowaway</span><span>|</span><a href="#36121851">prev</a><span>|</span><a href="#36121268">next</a><span>|</span><label class="collapse" for="c-36120911">[-]</label><label class="expand" for="c-36120911">[9 more]</label></div><br/><div class="children"><div class="content">Before moving to HDF5:<p><a href="https:&#x2F;&#x2F;cyrille.rossant.net&#x2F;moving-away-hdf5&#x2F;" rel="nofollow">https:&#x2F;&#x2F;cyrille.rossant.net&#x2F;moving-away-hdf5&#x2F;</a></div><br/><div id="36122291" class="c"><input type="checkbox" id="c-36122291" checked=""/><div class="controls bullet"><span class="by">wnkrshm</span><span>|</span><a href="#36120911">parent</a><span>|</span><a href="#36120958">next</a><span>|</span><label class="collapse" for="c-36122291">[-]</label><label class="expand" for="c-36122291">[2 more]</label></div><br/><div class="children"><div class="content">You cannot load or write (may only have been one of those operations, strangely) a file containing non-ASCII characters with the C&#x2F;C++ libraries if you target Win.<p>If you target Linux, those work out of the box due to the file system doing the lifting.<p>With windows we had to use the short file name (e.g. FILEN~1.EXT) as a workaround.<p>Also, you have to watch out for what the library does when it writes to (Edit: Windows) network shares - we&#x27;ve seen it write NaNs where there were values in the data it should save, maybe a latency issue, maybe a configuration issue - but not something you get told about.<p>I would like to move away from it.</div><br/><div id="36122450" class="c"><input type="checkbox" id="c-36122450" checked=""/><div class="controls bullet"><span class="by">planede</span><span>|</span><a href="#36120911">root</a><span>|</span><a href="#36122291">parent</a><span>|</span><a href="#36120958">next</a><span>|</span><label class="collapse" for="c-36122450">[-]</label><label class="expand" for="c-36122450">[1 more]</label></div><br/><div class="children"><div class="content">&gt; You cannot load or write (may only have been one of those operations, strangely) a file containing non-ASCII characters with the C&#x2F;C++ libraries if you target Win.<p>This is definitely not true, at least for C++, but I agree that it can be hassle.</div><br/></div></div></div></div><div id="36120958" class="c"><input type="checkbox" id="c-36120958" checked=""/><div class="controls bullet"><span class="by">cjbgkagh</span><span>|</span><a href="#36120911">parent</a><span>|</span><a href="#36122291">prev</a><span>|</span><a href="#36121153">next</a><span>|</span><label class="collapse" for="c-36120958">[-]</label><label class="expand" for="c-36120958">[4 more]</label></div><br/><div class="children"><div class="content">I was wondering if anyone else had this problem, I found HDF5 to be a nightmare to work with and is on my short list of technologies I refuse to work with anymore.</div><br/><div id="36121261" class="c"><input type="checkbox" id="c-36121261" checked=""/><div class="controls bullet"><span class="by">zwaps</span><span>|</span><a href="#36120911">root</a><span>|</span><a href="#36120958">parent</a><span>|</span><a href="#36121031">next</a><span>|</span><label class="collapse" for="c-36121261">[-]</label><label class="expand" for="c-36121261">[1 more]</label></div><br/><div class="children"><div class="content">Yes. I had to save string data in a column, which is frankly not something you want to do. HDF5 is super weird about encodings, quietly introduces errors, requires a fixed character length for that column and if you want to quickly access or search through the data, you have to write a program because HDF5View (or whatever it was called) is the worst. And since you still have to manage multiple reads and writes, the only benefit is maybe speed.<p>String data and HDF5 = No.<p>It does have an index tho compared to Parquet, which is handy for ML type stuff.</div><br/></div></div><div id="36121031" class="c"><input type="checkbox" id="c-36121031" checked=""/><div class="controls bullet"><span class="by">dguest</span><span>|</span><a href="#36120911">root</a><span>|</span><a href="#36120958">parent</a><span>|</span><a href="#36121261">prev</a><span>|</span><a href="#36121153">next</a><span>|</span><label class="collapse" for="c-36121031">[-]</label><label class="expand" for="c-36121031">[2 more]</label></div><br/><div class="children"><div class="content">What do you recommend for binary structured data? (assuming that SQL-like isn&#x27;t appropriate)</div><br/><div id="36121297" class="c"><input type="checkbox" id="c-36121297" checked=""/><div class="controls bullet"><span class="by">cjbgkagh</span><span>|</span><a href="#36120911">root</a><span>|</span><a href="#36121031">parent</a><span>|</span><a href="#36121153">next</a><span>|</span><label class="collapse" for="c-36121297">[-]</label><label class="expand" for="c-36121297">[1 more]</label></div><br/><div class="children"><div class="content">Protobuf is my go-to and I have had no issues with it. If I had to do larger memory mapped files I guess flatbuffers would be the way to go.<p>Nympy has a reasonably sensible format, but I haven’t tried to do anything tricky with it.</div><br/></div></div></div></div></div></div><div id="36121153" class="c"><input type="checkbox" id="c-36121153" checked=""/><div class="controls bullet"><span class="by">tired_star_nrg</span><span>|</span><a href="#36120911">parent</a><span>|</span><a href="#36120958">prev</a><span>|</span><a href="#36121035">next</a><span>|</span><label class="collapse" for="c-36121153">[-]</label><label class="expand" for="c-36121153">[1 more]</label></div><br/><div class="children"><div class="content">Oh wow, sounds very similar to trying to use Microsoft Access files for production at scale. Many of the same headaches with everything in a single file</div><br/></div></div><div id="36121035" class="c"><input type="checkbox" id="c-36121035" checked=""/><div class="controls bullet"><span class="by">dguest</span><span>|</span><a href="#36120911">parent</a><span>|</span><a href="#36121153">prev</a><span>|</span><a href="#36121268">next</a><span>|</span><label class="collapse" for="c-36121035">[-]</label><label class="expand" for="c-36121035">[1 more]</label></div><br/><div class="children"><div class="content">I was pretty happy with it. But then, I was moving from something much worse that very few people use.</div><br/></div></div></div></div><div id="36121268" class="c"><input type="checkbox" id="c-36121268" checked=""/><div class="controls bullet"><span class="by">teleforce</span><span>|</span><a href="#36120911">prev</a><span>|</span><a href="#36121088">next</a><span>|</span><label class="collapse" for="c-36121268">[-]</label><label class="expand" for="c-36121268">[1 more]</label></div><br/><div class="children"><div class="content">Full text download:<p><a href="https:&#x2F;&#x2F;www.researchgate.net&#x2F;publication&#x2F;367373175_HDF5eis_A_storage_and_IO_solution_for_big_multidimensional_time_series_data_from_environmental_sensors" rel="nofollow">https:&#x2F;&#x2F;www.researchgate.net&#x2F;publication&#x2F;367373175_HDF5eis_A...</a></div><br/></div></div><div id="36121088" class="c"><input type="checkbox" id="c-36121088" checked=""/><div class="controls bullet"><span class="by">teleforce</span><span>|</span><a href="#36121268">prev</a><span>|</span><a href="#36121450">next</a><span>|</span><label class="collapse" for="c-36121088">[-]</label><label class="expand" for="c-36121088">[1 more]</label></div><br/><div class="children"><div class="content">This data format can be used for Big Data Seismology:<p><a href="https:&#x2F;&#x2F;agupubs.onlinelibrary.wiley.com&#x2F;doi&#x2F;abs&#x2F;10.1029&#x2F;2021RG000769" rel="nofollow">https:&#x2F;&#x2F;agupubs.onlinelibrary.wiley.com&#x2F;doi&#x2F;abs&#x2F;10.1029&#x2F;2021...</a></div><br/></div></div><div id="36121450" class="c"><input type="checkbox" id="c-36121450" checked=""/><div class="controls bullet"><span class="by">xarope</span><span>|</span><a href="#36121088">prev</a><span>|</span><a href="#36120741">next</a><span>|</span><label class="collapse" for="c-36121450">[-]</label><label class="expand" for="c-36121450">[6 more]</label></div><br/><div class="children"><div class="content">At the risk of shoehorning SQLite into this as a solution, would it?  Does SQLite handle this type of data (big multidimensional time series sensor data) well?</div><br/><div id="36121848" class="c"><input type="checkbox" id="c-36121848" checked=""/><div class="controls bullet"><span class="by">osigurdson</span><span>|</span><a href="#36121450">parent</a><span>|</span><a href="#36121826">next</a><span>|</span><label class="collapse" for="c-36121848">[-]</label><label class="expand" for="c-36121848">[3 more]</label></div><br/><div class="children"><div class="content">Relational DBs aren&#x27;t great for timeseries data which is why solutions like TimescaleDB, InfluxDB and other time series databases exist. Of course, it can work perfectly fine if the you don&#x27;t have too much data.<p>The fundamental problem with time series data is often that the insert pattern is the exact opposite of typical retrieval patterns. For example, you may insert 1000s of properties at once (most efficiently stored as interleaved data), yet typical access patterns involve obtaining a single property over many timestamps. Of course, it can work fine despite the inefficiency. If you have a few 100 sensors and are sampling them every minute, storing data for a month, it would likely be fine. If you plan on storing audio samples as records in a DB (i.e. one record per sample), it will fail.<p>As another commenter mentions, HDF5 doesn&#x27;t really help much of this. It is an unnecessary rabbit hole to some extent. It mostly just a glitchy b-tree implementation with no WAL log + some compression algorithms.</div><br/><div id="36121973" class="c"><input type="checkbox" id="c-36121973" checked=""/><div class="controls bullet"><span class="by">zX41ZdbW</span><span>|</span><a href="#36121450">root</a><span>|</span><a href="#36121848">parent</a><span>|</span><a href="#36121826">next</a><span>|</span><label class="collapse" for="c-36121973">[-]</label><label class="expand" for="c-36121973">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s not correct to say that relational DBMS are not suitable for time series.<p>ClickHouse is a relational DBMS, and it works for time series better than specialized systems (like TimescaleDB or InfluxDB). You can quickly get trillions of records for time series, but it is not a problem. For example, see <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=JlcI2Vfz_uk">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=JlcI2Vfz_uk</a><p>If you try TimescaleDB in this scenario, it will barely be crawling.<p>PS. I am developer of ClickHouse, and I use it for these scenarios every time.</div><br/><div id="36122093" class="c"><input type="checkbox" id="c-36122093" checked=""/><div class="controls bullet"><span class="by">tpetry</span><span>|</span><a href="#36121450">root</a><span>|</span><a href="#36121973">parent</a><span>|</span><a href="#36121826">next</a><span>|</span><label class="collapse" for="c-36122093">[-]</label><label class="expand" for="c-36122093">[1 more]</label></div><br/><div class="children"><div class="content">I guess it was just wrong names of the parent. He shared that OLTP databases are not good for the use-case but OLAP databases designed for analytical purposes like ClickHouse or Timescale are perfect for this. However, Timescale is not a real OLAP database - they are something in-between.</div><br/></div></div></div></div></div></div><div id="36121826" class="c"><input type="checkbox" id="c-36121826" checked=""/><div class="controls bullet"><span class="by">jofer</span><span>|</span><a href="#36121450">parent</a><span>|</span><a href="#36121848">prev</a><span>|</span><a href="#36122590">next</a><span>|</span><label class="collapse" for="c-36121826">[-]</label><label class="expand" for="c-36121826">[1 more]</label></div><br/><div class="children"><div class="content">No. The issue is that you quickly have trillions of rows. You don&#x27;t need a relational db setup or fancy non-relationary db solutions. Both are well known anti-patterns. One row per sample falls over quickly for regularly sampled data.<p>What does work for large regularly sampled datasets is array storage solutions like hdf, or image formats, etc etc.<p>It&#x27;s the same reason and same approach for your vacation photos. You wouldn&#x27;t put each pixel in the db, but you might very well have a db with a row for each photo.<p>Use a db for the non-regular portions (e.g. an index of datasets) and array storage for the actual data itself.</div><br/></div></div><div id="36122590" class="c"><input type="checkbox" id="c-36122590" checked=""/><div class="controls bullet"><span class="by">IshKebab</span><span>|</span><a href="#36121450">parent</a><span>|</span><a href="#36121826">prev</a><span>|</span><a href="#36120741">next</a><span>|</span><label class="collapse" for="c-36122590">[-]</label><label class="expand" for="c-36122590">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve used it for this. It worked way better than it had any right to. Obviously you don&#x27;t use one sample per row like `jofer` assumed, but you can easily build something on top of SQLite to store compressed blocks of matrices as rows. That&#x27;s how HDF5 works too (it splits matrices into blocks and compresses them independently).<p>It&#x27;s obviously a bit more work than relying on HDF5 to do it for you, but not that bad since you don&#x27;t need to implement a full general solution.</div><br/></div></div></div></div><div id="36120741" class="c"><input type="checkbox" id="c-36120741" checked=""/><div class="controls bullet"><span class="by">foobarbecue</span><span>|</span><a href="#36121450">prev</a><span>|</span><a href="#36120811">next</a><span>|</span><label class="collapse" for="c-36120741">[-]</label><label class="expand" for="c-36120741">[1 more]</label></div><br/><div class="children"><div class="content">So the 5 is an S, and it&#x27;s seismic? Nifty.</div><br/></div></div><div id="36120811" class="c"><input type="checkbox" id="c-36120811" checked=""/><div class="controls bullet"><span class="by">cozzyd</span><span>|</span><a href="#36120741">prev</a><span>|</span><a href="#36120877">next</a><span>|</span><label class="collapse" for="c-36120811">[-]</label><label class="expand" for="c-36120811">[5 more]</label></div><br/><div class="children"><div class="content">wonder how it compares with ROOT or Parquet...</div><br/><div id="36121042" class="c"><input type="checkbox" id="c-36121042" checked=""/><div class="controls bullet"><span class="by">fbdab103</span><span>|</span><a href="#36120811">parent</a><span>|</span><a href="#36121053">next</a><span>|</span><label class="collapse" for="c-36121042">[-]</label><label class="expand" for="c-36121042">[3 more]</label></div><br/><div class="children"><div class="content">I think only ROOT would be comparable. I, perhaps naively, think of Parquet as just a binary csv&#x2F;table format.<p>A modern alternative would be Zarr[0] which was frustrated with the complexity of HDF5 and wanted something that would be more amenable to working with S3 storage. Never worked with it, but the ideas are laudable. Then again, I was never all that frustrated with HDF5. I wish the exploratory tooling was better, but that is about the end of my complaints.<p>[0] <a href="https:&#x2F;&#x2F;zarr.readthedocs.io&#x2F;en&#x2F;stable&#x2F;index.html" rel="nofollow">https:&#x2F;&#x2F;zarr.readthedocs.io&#x2F;en&#x2F;stable&#x2F;index.html</a></div><br/><div id="36121114" class="c"><input type="checkbox" id="c-36121114" checked=""/><div class="controls bullet"><span class="by">prpl</span><span>|</span><a href="#36120811">root</a><span>|</span><a href="#36121042">parent</a><span>|</span><a href="#36121053">next</a><span>|</span><label class="collapse" for="c-36121114">[-]</label><label class="expand" for="c-36121114">[2 more]</label></div><br/><div class="children"><div class="content">ROOT is most comparable. Iceberg+Parquet&#x2F;ORC&#x2F;Avro is comparable to (and with better benefits) to some of the multi-file catalog-like features of HDF5.<p>There’s some cases where data really needs to be structured, especially closer to instruments producing data. The thing is - some or all of that data is going to end up in a database or a dataframe sooner or later</div><br/><div id="36121505" class="c"><input type="checkbox" id="c-36121505" checked=""/><div class="controls bullet"><span class="by">dendrite9</span><span>|</span><a href="#36120811">root</a><span>|</span><a href="#36121114">parent</a><span>|</span><a href="#36121053">next</a><span>|</span><label class="collapse" for="c-36121505">[-]</label><label class="expand" for="c-36121505">[1 more]</label></div><br/><div class="children"><div class="content">I am involved in a project producing say 100 channels of 32 bit measurements that has to be roughly aligned with a series of camera images, or a video stream. My work is unconnected to the data storage question but I&#x27;ve been thinking about it as an interesting question I don&#x27;t know enough about. I&#x27;ve thought about trying to implement something on a small scale as learning experience in my spare time, probably with limits on the total storage&#x2F;duration. HDF5 looked like an interesting option but I&#x27;ve heard about issues. Do you have any suggestions for tools to look at or reading that might help push me toward doing (on not) such a project?</div><br/></div></div></div></div></div></div><div id="36121053" class="c"><input type="checkbox" id="c-36121053" checked=""/><div class="controls bullet"><span class="by">dguest</span><span>|</span><a href="#36120811">parent</a><span>|</span><a href="#36121042">prev</a><span>|</span><a href="#36120877">next</a><span>|</span><label class="collapse" for="c-36121053">[-]</label><label class="expand" for="c-36121053">[1 more]</label></div><br/><div class="children"><div class="content">In my experience HDF5 is like a simplified version of ROOT: doesn&#x27;t provide a full data analysis suite, graphics library, or embedded compiler. It won&#x27;t assume that everything in your data maps to a C++ type, or that every C++ type should be serializable as data. It just does data, for better or worse.<p>It also has a spec, which can be useful.</div><br/></div></div></div></div></div></div></div></div></div></body></html>